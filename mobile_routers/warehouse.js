const a0_0x1ad2d7=a0_0x5670;function a0_0x4d42(){const _0x5e1b6a=['status','message','$room','Finished\x20Goods','aggregate','../middleware/auth','length','post','Raw\x20Materials','27YWbMwV','exports','1766555jPWTWh','findOne','ejs','9893808FEnAOE','../public/language/languages.json','/room','express','floor','nodemailer','62876DBlQGl','1028744HLOfdK','INC-','$_id','body','log','517676pNyAov','random','13736lJpduA','table\x20page','3261750MXLJYy','json','$name','/supplier','343yiNeXR','Enabled'];a0_0x4d42=function(){return _0x5e1b6a;};return a0_0x4d42();}(function(_0x4a60d8,_0x1faed5){const _0x570bcb=a0_0x5670,_0x54b8f3=_0x4a60d8();while(!![]){try{const _0x259ccb=-parseInt(_0x570bcb(0x15b))/0x1+parseInt(_0x570bcb(0x155))/0x2*(-parseInt(_0x570bcb(0x14a))/0x3)+parseInt(_0x570bcb(0x156))/0x4+parseInt(_0x570bcb(0x14c))/0x5+-parseInt(_0x570bcb(0x13b))/0x6+parseInt(_0x570bcb(0x13f))/0x7*(-parseInt(_0x570bcb(0x15d))/0x8)+parseInt(_0x570bcb(0x14f))/0x9;if(_0x259ccb===_0x1faed5)break;else _0x54b8f3['push'](_0x54b8f3['shift']());}catch(_0x735135){_0x54b8f3['push'](_0x54b8f3['shift']());}}}(a0_0x4d42,0x44b59));const express=require(a0_0x1ad2d7(0x152)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x1ad2d7(0x146)),nodemailer=require(a0_0x1ad2d7(0x154));function a0_0x5670(_0x2c5bf1,_0x26cbaa){const _0x4d4262=a0_0x4d42();return a0_0x5670=function(_0x567087,_0x24e73d){_0x567087=_0x567087-0x13a;let _0x3a10a7=_0x4d4262[_0x567087];return _0x3a10a7;},a0_0x5670(_0x2c5bf1,_0x26cbaa);}var ejs=require(a0_0x1ad2d7(0x14e));const path=require('path'),users=require(a0_0x1ad2d7(0x150));router[a0_0x1ad2d7(0x148)]('/view',async(_0x5da3e6,_0x13bc47)=>{const _0x3f488f=a0_0x1ad2d7;try{const {warehouse_category:_0x185d2c}=_0x5da3e6[_0x3f488f(0x159)];if(_0x185d2c=='RM'){const _0x581a51=await warehouse[_0x3f488f(0x145)]([{'$match':{'status':_0x3f488f(0x140),'warehouse_category':_0x3f488f(0x149),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x3f488f(0x13d),'name':{'$first':'$name'}}}]);_0x13bc47[_0x3f488f(0x13c)](_0x581a51);}else{const _0x50bae3=await warehouse[_0x3f488f(0x145)]([{'$match':{'status':_0x3f488f(0x140),'warehouse_category':_0x3f488f(0x144),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x3f488f(0x13d),'name':{'$first':'$name'}}}]);_0x13bc47[_0x3f488f(0x13c)](_0x50bae3);}}catch(_0x59cb0e){console[_0x3f488f(0x15a)](_0x3f488f(0x13a),_0x59cb0e),_0x13bc47[_0x3f488f(0x141)](0xc8)[_0x3f488f(0x13c)]({'message':_0x59cb0e[_0x3f488f(0x142)]});}}),router['post'](a0_0x1ad2d7(0x13e),async(_0x1bb85c,_0x389071)=>{const _0x35afe6=a0_0x1ad2d7;try{const _0x400269=await suppliers['find']({});_0x389071[_0x35afe6(0x141)](0xc8)[_0x35afe6(0x13c)](_0x400269);}catch(_0x4fbad5){console[_0x35afe6(0x15a)](_0x35afe6(0x13a),_0x4fbad5),_0x389071[_0x35afe6(0x141)](0xc8)[_0x35afe6(0x13c)]({'message':_0x4fbad5[_0x35afe6(0x142)]});}}),router[a0_0x1ad2d7(0x148)](a0_0x1ad2d7(0x151),async(_0x232aaa,_0x318b45)=>{const _0x14c2a8=a0_0x1ad2d7;try{const {wahouse_data:_0x182131}=_0x232aaa[_0x14c2a8(0x159)],_0x49708c=[{'$match':{'name':_0x182131,'status':_0x14c2a8(0x140)}},{'$group':{'_id':_0x14c2a8(0x158),'room_name':{'$first':_0x14c2a8(0x143)}}},{'$sort':{'room_name':0x1}}],_0xd2293b=await warehouse[_0x14c2a8(0x145)](_0x49708c);_0x318b45['status'](0xc8)['json'](_0xd2293b);}catch(_0x69d792){console[_0x14c2a8(0x15a)]('table\x20page',_0x69d792),_0x318b45[_0x14c2a8(0x141)](0xc8)['json']({'message':_0x69d792[_0x14c2a8(0x142)]});}}),router['post']('/invoice',async(_0x22a247,_0x1c283c)=>{const _0x9274e4=a0_0x1ad2d7;try{const _0x2ad4f3=0x989680,_0x483c3a=0x5f5e0ff,_0x36f5e9=Math[_0x9274e4(0x153)](Math[_0x9274e4(0x15c)]()*(_0x483c3a-_0x2ad4f3+0x1))+_0x2ad4f3;var _0x5828c9;const _0x46073c=await purchases[_0x9274e4(0x14d)]({'invoice':_0x9274e4(0x157)+_0x36f5e9});return _0x46073c&&_0x46073c[_0x9274e4(0x147)]>0x0?_0x5828c9=_0x9274e4(0x157)+_0x36f5e9:_0x5828c9=_0x9274e4(0x157)+_0x36f5e9,_0x1c283c['json']({'incoming_invoice':_0x5828c9}),_0x5828c9;}catch(_0x4f1bb3){console[_0x9274e4(0x15a)](_0x9274e4(0x13a),_0x4f1bb3),_0x1c283c[_0x9274e4(0x141)](0xc8)[_0x9274e4(0x13c)]({'message':_0x4f1bb3[_0x9274e4(0x142)]});}}),module[a0_0x1ad2d7(0x14b)]=router;