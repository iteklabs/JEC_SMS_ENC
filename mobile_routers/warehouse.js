const a0_0x438013=a0_0x2dda;function a0_0x2dda(_0x16286b,_0x1be34b){const _0x2f5945=a0_0x2f59();return a0_0x2dda=function(_0x2dda86,_0x73107b){_0x2dda86=_0x2dda86-0x1e6;let _0x541c65=_0x2f5945[_0x2dda86];return _0x541c65;},a0_0x2dda(_0x16286b,_0x1be34b);}(function(_0x540a95,_0x3a4895){const _0x2c1d70=a0_0x2dda,_0x32e395=_0x540a95();while(!![]){try{const _0x39651a=parseInt(_0x2c1d70(0x200))/0x1+parseInt(_0x2c1d70(0x1fc))/0x2*(-parseInt(_0x2c1d70(0x1ec))/0x3)+-parseInt(_0x2c1d70(0x207))/0x4*(-parseInt(_0x2c1d70(0x1e7))/0x5)+parseInt(_0x2c1d70(0x202))/0x6+parseInt(_0x2c1d70(0x1ff))/0x7*(-parseInt(_0x2c1d70(0x20b))/0x8)+-parseInt(_0x2c1d70(0x209))/0x9*(-parseInt(_0x2c1d70(0x1f0))/0xa)+-parseInt(_0x2c1d70(0x20c))/0xb*(parseInt(_0x2c1d70(0x20a))/0xc);if(_0x39651a===_0x3a4895)break;else _0x32e395['push'](_0x32e395['shift']());}catch(_0x46b3f4){_0x32e395['push'](_0x32e395['shift']());}}}(a0_0x2f59,0x32ee9));const express=require(a0_0x438013(0x1ea)),app=express(),router=express[a0_0x438013(0x1f8)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x438013(0x1f6)),auth=require('../middleware/auth'),nodemailer=require(a0_0x438013(0x1fb));var ejs=require('ejs');const path=require('path'),users=require('../public/language/languages.json');function a0_0x2f59(){const _0x164d3a=['json','1120555LvrHlH','$_id','$name','express','status','786195VtlSpq','body','Return\x20Goods','exports','30iMhLqo','$room','/invoice','findOne','Enabled','log','../models/all_models','table\x20page','Router','/supplier','message','nodemailer','2qDcuWI','INC-','find','7OUkYyd','225162ITATCL','post','1462398KrlbtL','floor','Finished\x20Goods','aggregate','length','4CfQbph','/view','1139220ikbyRY','276hHkZHU','897496UpVyrc','234289aCzjfC'];a0_0x2f59=function(){return _0x164d3a;};return a0_0x2f59();}router[a0_0x438013(0x201)](a0_0x438013(0x208),async(_0x1562c2,_0x375780)=>{const _0x1cb0d5=a0_0x438013;try{const {warehouse_category:_0x5c4424}=_0x1562c2['body'];if(_0x5c4424=='RM'){const _0x37ea92=await warehouse[_0x1cb0d5(0x205)]([{'$match':{'status':'Enabled','warehouse_category':'Raw\x20Materials','name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x1cb0d5(0x1e9),'name':{'$first':_0x1cb0d5(0x1e9)}}}]);_0x375780[_0x1cb0d5(0x1e6)](_0x37ea92);}else{const _0x45d165=await warehouse[_0x1cb0d5(0x205)]([{'$match':{'status':_0x1cb0d5(0x1f4),'warehouse_category':_0x1cb0d5(0x204),'name':{'$ne':_0x1cb0d5(0x1ee)}}},{'$group':{'_id':_0x1cb0d5(0x1e9),'name':{'$first':_0x1cb0d5(0x1e9)}}}]);_0x375780[_0x1cb0d5(0x1e6)](_0x45d165);}}catch(_0x172923){console[_0x1cb0d5(0x1f5)](_0x1cb0d5(0x1f7),_0x172923),_0x375780[_0x1cb0d5(0x1eb)](0xc8)[_0x1cb0d5(0x1e6)]({'message':_0x172923[_0x1cb0d5(0x1fa)]});}}),router[a0_0x438013(0x201)](a0_0x438013(0x1f9),async(_0x510581,_0x3c3523)=>{const _0x5c0cae=a0_0x438013;try{const _0x2f42de=await suppliers[_0x5c0cae(0x1fe)]({});_0x3c3523[_0x5c0cae(0x1eb)](0xc8)[_0x5c0cae(0x1e6)](_0x2f42de);}catch(_0x347bd0){console['log'](_0x5c0cae(0x1f7),_0x347bd0),_0x3c3523['status'](0xc8)[_0x5c0cae(0x1e6)]({'message':_0x347bd0[_0x5c0cae(0x1fa)]});}}),router[a0_0x438013(0x201)]('/room',async(_0x26453e,_0x686b2b)=>{const _0x3d6410=a0_0x438013;try{const {wahouse_data:_0x19b017}=_0x26453e[_0x3d6410(0x1ed)],_0x4e6cde=[{'$match':{'name':_0x19b017,'status':_0x3d6410(0x1f4)}},{'$group':{'_id':_0x3d6410(0x1e8),'room_name':{'$first':_0x3d6410(0x1f1)}}},{'$sort':{'room_name':0x1}}],_0x2d827c=await warehouse['aggregate'](_0x4e6cde);_0x686b2b[_0x3d6410(0x1eb)](0xc8)[_0x3d6410(0x1e6)](_0x2d827c);}catch(_0x3987b0){console[_0x3d6410(0x1f5)](_0x3d6410(0x1f7),_0x3987b0),_0x686b2b[_0x3d6410(0x1eb)](0xc8)[_0x3d6410(0x1e6)]({'message':_0x3987b0[_0x3d6410(0x1fa)]});}}),router[a0_0x438013(0x201)](a0_0x438013(0x1f2),async(_0x30bf70,_0x3f3843)=>{const _0x4cc385=a0_0x438013;try{const _0x59522c=0x989680,_0x3c6a65=0x5f5e0ff,_0x5af65a=Math[_0x4cc385(0x203)](Math['random']()*(_0x3c6a65-_0x59522c+0x1))+_0x59522c;var _0x39d470;const _0x535d8c=await purchases[_0x4cc385(0x1f3)]({'invoice':'INC-'+_0x5af65a});return _0x535d8c&&_0x535d8c[_0x4cc385(0x206)]>0x0?_0x39d470=_0x4cc385(0x1fd)+_0x5af65a:_0x39d470=_0x4cc385(0x1fd)+_0x5af65a,_0x3f3843[_0x4cc385(0x1e6)]({'incoming_invoice':_0x39d470}),_0x39d470;}catch(_0x317653){console[_0x4cc385(0x1f5)](_0x4cc385(0x1f7),_0x317653),_0x3f3843[_0x4cc385(0x1eb)](0xc8)[_0x4cc385(0x1e6)]({'message':_0x317653[_0x4cc385(0x1fa)]});}}),module[a0_0x438013(0x1ef)]=router;