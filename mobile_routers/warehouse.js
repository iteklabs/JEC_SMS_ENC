const a0_0x3ebbfa=a0_0x520b;function a0_0x5409(){const _0xb624aa=['express','exports','$name','934435tuCzdS','1199535plRIYD','nodemailer','/invoice','table\x20page','../models/all_models','find','log','Return\x20Goods','aggregate','/supplier','3904509QWYrFa','/view','Finished\x20Goods','body','6903cCGXdE','status','341794jgwzlQ','Enabled','18UyJYxm','2128743auiOGh','Router','368Lggeeq','findOne','message','json','$_id','random','../middleware/auth','ejs','path','post','2560680BfiYHB','Raw\x20Materials','length','INC-'];a0_0x5409=function(){return _0xb624aa;};return a0_0x5409();}(function(_0x2f5742,_0x4b5a3b){const _0x3cf629=a0_0x520b,_0x30b2e9=_0x2f5742();while(!![]){try{const _0x1f3f69=-parseInt(_0x3cf629(0x165))/0x1+-parseInt(_0x3cf629(0x14f))/0x2+parseInt(_0x3cf629(0x14d))/0x3*(parseInt(_0x3cf629(0x154))/0x4)+parseInt(_0x3cf629(0x166))/0x5*(parseInt(_0x3cf629(0x151))/0x6)+parseInt(_0x3cf629(0x149))/0x7+parseInt(_0x3cf629(0x15e))/0x8+-parseInt(_0x3cf629(0x152))/0x9;if(_0x1f3f69===_0x4b5a3b)break;else _0x30b2e9['push'](_0x30b2e9['shift']());}catch(_0x22e385){_0x30b2e9['push'](_0x30b2e9['shift']());}}}(a0_0x5409,0x721e2));const express=require(a0_0x3ebbfa(0x162)),app=express(),router=express[a0_0x3ebbfa(0x153)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x3ebbfa(0x143)),auth=require(a0_0x3ebbfa(0x15a)),nodemailer=require(a0_0x3ebbfa(0x167));var ejs=require(a0_0x3ebbfa(0x15b));const path=require(a0_0x3ebbfa(0x15c)),users=require('../public/language/languages.json');function a0_0x520b(_0x83334d,_0xb3558d){const _0x540998=a0_0x5409();return a0_0x520b=function(_0x520b55,_0x2a3ab5){_0x520b55=_0x520b55-0x143;let _0xbab441=_0x540998[_0x520b55];return _0xbab441;},a0_0x520b(_0x83334d,_0xb3558d);}router[a0_0x3ebbfa(0x15d)](a0_0x3ebbfa(0x14a),async(_0x5c05ab,_0x3ac538)=>{const _0x1d054d=a0_0x3ebbfa;try{const {warehouse_category:_0x332365}=_0x5c05ab[_0x1d054d(0x14c)];if(_0x332365=='RM'){const _0x47cc14=await warehouse[_0x1d054d(0x147)]([{'$match':{'status':_0x1d054d(0x150),'warehouse_category':_0x1d054d(0x15f),'name':{'$ne':_0x1d054d(0x146)}}},{'$group':{'_id':_0x1d054d(0x164),'name':{'$first':_0x1d054d(0x164)}}}]);_0x3ac538[_0x1d054d(0x157)](_0x47cc14);}else{const _0x135e3f=await warehouse[_0x1d054d(0x147)]([{'$match':{'status':_0x1d054d(0x150),'warehouse_category':_0x1d054d(0x14b),'name':{'$ne':_0x1d054d(0x146)}}},{'$group':{'_id':_0x1d054d(0x164),'name':{'$first':_0x1d054d(0x164)}}}]);_0x3ac538[_0x1d054d(0x157)](_0x135e3f);}}catch(_0x3418a3){console[_0x1d054d(0x145)](_0x1d054d(0x169),_0x3418a3),_0x3ac538['status'](0xc8)[_0x1d054d(0x157)]({'message':_0x3418a3[_0x1d054d(0x156)]});}}),router['post'](a0_0x3ebbfa(0x148),async(_0x11eb48,_0x3f5545)=>{const _0x2abbfa=a0_0x3ebbfa;try{const _0x1f79c9=await suppliers[_0x2abbfa(0x144)]({});_0x3f5545[_0x2abbfa(0x14e)](0xc8)[_0x2abbfa(0x157)](_0x1f79c9);}catch(_0x11b32d){console[_0x2abbfa(0x145)](_0x2abbfa(0x169),_0x11b32d),_0x3f5545['status'](0xc8)[_0x2abbfa(0x157)]({'message':_0x11b32d[_0x2abbfa(0x156)]});}}),router[a0_0x3ebbfa(0x15d)]('/room',async(_0x7c6866,_0x3f8057)=>{const _0x3c2f41=a0_0x3ebbfa;try{const {wahouse_data:_0x144c3c}=_0x7c6866[_0x3c2f41(0x14c)],_0x26c7e8=[{'$match':{'name':_0x144c3c,'status':_0x3c2f41(0x150)}},{'$group':{'_id':_0x3c2f41(0x158),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}],_0xd05754=await warehouse[_0x3c2f41(0x147)](_0x26c7e8);_0x3f8057[_0x3c2f41(0x14e)](0xc8)[_0x3c2f41(0x157)](_0xd05754);}catch(_0x38bb26){console[_0x3c2f41(0x145)](_0x3c2f41(0x169),_0x38bb26),_0x3f8057[_0x3c2f41(0x14e)](0xc8)['json']({'message':_0x38bb26[_0x3c2f41(0x156)]});}}),router['post'](a0_0x3ebbfa(0x168),async(_0x30dd69,_0x25c0a4)=>{const _0x5f52a8=a0_0x3ebbfa;try{const _0x5d57e5=0x989680,_0x412ee5=0x5f5e0ff,_0x3d7643=Math['floor'](Math[_0x5f52a8(0x159)]()*(_0x412ee5-_0x5d57e5+0x1))+_0x5d57e5;var _0x106171;const _0x31aebe=await purchases[_0x5f52a8(0x155)]({'invoice':_0x5f52a8(0x161)+_0x3d7643});return _0x31aebe&&_0x31aebe[_0x5f52a8(0x160)]>0x0?_0x106171=_0x5f52a8(0x161)+_0x3d7643:_0x106171='INC-'+_0x3d7643,_0x25c0a4['json']({'incoming_invoice':_0x106171}),_0x106171;}catch(_0x18af48){console[_0x5f52a8(0x145)](_0x5f52a8(0x169),_0x18af48),_0x25c0a4[_0x5f52a8(0x14e)](0xc8)[_0x5f52a8(0x157)]({'message':_0x18af48['message']});}}),module[a0_0x3ebbfa(0x163)]=router;