const a0_0x51ec0c=a0_0x1976;(function(_0x42b293,_0x3dff68){const _0x45afa1=a0_0x1976,_0xef445f=_0x42b293();while(!![]){try{const _0x48af4d=-parseInt(_0x45afa1(0x196))/0x1*(-parseInt(_0x45afa1(0x197))/0x2)+-parseInt(_0x45afa1(0x183))/0x3+-parseInt(_0x45afa1(0x193))/0x4+parseInt(_0x45afa1(0x18b))/0x5+parseInt(_0x45afa1(0x188))/0x6+-parseInt(_0x45afa1(0x199))/0x7*(parseInt(_0x45afa1(0x18d))/0x8)+parseInt(_0x45afa1(0x195))/0x9;if(_0x48af4d===_0x3dff68)break;else _0xef445f['push'](_0xef445f['shift']());}catch(_0x3046a7){_0xef445f['push'](_0xef445f['shift']());}}}(a0_0xd6ee,0x1879c));function a0_0xd6ee(){const _0x1aef5e=['$_id','table\x20page','$name','../models/all_models','801052tyfUBu','length','2949921GTKPpL','811fNQskt','184xrMJKx','post','28KjMttz','exports','path','../middleware/auth','/supplier','find','express','$room','floor','Enabled','json','/room','Return\x20Goods','Raw\x20Materials','370860NegXzN','Finished\x20Goods','aggregate','../public/language/languages.json','status','27642EmlHsW','/invoice','random','608175cAeKnL','INC-','208976jMbRvj','message'];a0_0xd6ee=function(){return _0x1aef5e;};return a0_0xd6ee();}const express=require(a0_0x51ec0c(0x17b)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x51ec0c(0x192)),auth=require(a0_0x51ec0c(0x178)),nodemailer=require('nodemailer');function a0_0x1976(_0xdce6d2,_0x47e6ee){const _0xd6ee46=a0_0xd6ee();return a0_0x1976=function(_0x197671,_0x55b841){_0x197671=_0x197671-0x176;let _0x415447=_0xd6ee46[_0x197671];return _0x415447;},a0_0x1976(_0xdce6d2,_0x47e6ee);}var ejs=require('ejs');const path=require(a0_0x51ec0c(0x177)),users=require(a0_0x51ec0c(0x186));router['post']('/view',async(_0x2a86b7,_0x55812a)=>{const _0x185750=a0_0x51ec0c;try{const {warehouse_category:_0x4629f6}=_0x2a86b7['body'];if(_0x4629f6=='RM'){const _0x3fb4ca=await warehouse[_0x185750(0x185)]([{'$match':{'status':_0x185750(0x17e),'warehouse_category':_0x185750(0x182),'name':{'$ne':_0x185750(0x181)}}},{'$group':{'_id':_0x185750(0x191),'name':{'$first':_0x185750(0x191)}}}]);_0x55812a[_0x185750(0x17f)](_0x3fb4ca);}else{const _0x33892d=await warehouse['aggregate']([{'$match':{'status':_0x185750(0x17e),'warehouse_category':_0x185750(0x184),'name':{'$ne':_0x185750(0x181)}}},{'$group':{'_id':_0x185750(0x191),'name':{'$first':'$name'}}}]);_0x55812a[_0x185750(0x17f)](_0x33892d);}}catch(_0xda105a){console['log'](_0x185750(0x190),_0xda105a),_0x55812a[_0x185750(0x187)](0xc8)[_0x185750(0x17f)]({'message':_0xda105a[_0x185750(0x18e)]});}}),router['post'](a0_0x51ec0c(0x179),async(_0x433d2a,_0x151804)=>{const _0x1cacee=a0_0x51ec0c;try{const _0x3fdeb1=await suppliers[_0x1cacee(0x17a)]({});_0x151804[_0x1cacee(0x187)](0xc8)[_0x1cacee(0x17f)](_0x3fdeb1);}catch(_0x1e471a){console['log']('table\x20page',_0x1e471a),_0x151804[_0x1cacee(0x187)](0xc8)[_0x1cacee(0x17f)]({'message':_0x1e471a[_0x1cacee(0x18e)]});}}),router['post'](a0_0x51ec0c(0x180),async(_0x28b521,_0x34e18f)=>{const _0x380d04=a0_0x51ec0c;try{const {wahouse_data:_0xdd8906}=_0x28b521['body'],_0x36b530=[{'$match':{'name':_0xdd8906,'status':_0x380d04(0x17e)}},{'$group':{'_id':_0x380d04(0x18f),'room_name':{'$first':_0x380d04(0x17c)}}},{'$sort':{'room_name':0x1}}],_0x3cc475=await warehouse[_0x380d04(0x185)](_0x36b530);_0x34e18f[_0x380d04(0x187)](0xc8)[_0x380d04(0x17f)](_0x3cc475);}catch(_0x3f5246){console['log']('table\x20page',_0x3f5246),_0x34e18f[_0x380d04(0x187)](0xc8)[_0x380d04(0x17f)]({'message':_0x3f5246['message']});}}),router[a0_0x51ec0c(0x198)](a0_0x51ec0c(0x189),async(_0xd76765,_0x257c17)=>{const _0x5d5790=a0_0x51ec0c;try{const _0x4c2dcc=0x989680,_0x36d7a9=0x5f5e0ff,_0x257b81=Math[_0x5d5790(0x17d)](Math[_0x5d5790(0x18a)]()*(_0x36d7a9-_0x4c2dcc+0x1))+_0x4c2dcc;var _0x34d5e4;const _0x30c055=await purchases['findOne']({'invoice':'INC-'+_0x257b81});return _0x30c055&&_0x30c055[_0x5d5790(0x194)]>0x0?_0x34d5e4=_0x5d5790(0x18c)+_0x257b81:_0x34d5e4='INC-'+_0x257b81,_0x257c17[_0x5d5790(0x17f)]({'incoming_invoice':_0x34d5e4}),_0x34d5e4;}catch(_0x514bd4){console['log'](_0x5d5790(0x190),_0x514bd4),_0x257c17[_0x5d5790(0x187)](0xc8)['json']({'message':_0x514bd4[_0x5d5790(0x18e)]});}}),module[a0_0x51ec0c(0x176)]=router;