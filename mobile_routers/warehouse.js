const a0_0x427e71=a0_0x2262;(function(_0x17265a,_0x248f9b){const _0x3ab518=a0_0x2262,_0x34a2d5=_0x17265a();while(!![]){try{const _0x1f1605=-parseInt(_0x3ab518(0x180))/0x1*(-parseInt(_0x3ab518(0x161))/0x2)+parseInt(_0x3ab518(0x176))/0x3+parseInt(_0x3ab518(0x174))/0x4*(-parseInt(_0x3ab518(0x165))/0x5)+-parseInt(_0x3ab518(0x177))/0x6+parseInt(_0x3ab518(0x16a))/0x7*(parseInt(_0x3ab518(0x16c))/0x8)+parseInt(_0x3ab518(0x160))/0x9*(-parseInt(_0x3ab518(0x17a))/0xa)+-parseInt(_0x3ab518(0x162))/0xb;if(_0x1f1605===_0x248f9b)break;else _0x34a2d5['push'](_0x34a2d5['shift']());}catch(_0x5d5c79){_0x34a2d5['push'](_0x34a2d5['shift']());}}}(a0_0x16d8,0x52e88));const express=require(a0_0x427e71(0x175)),app=express(),router=express[a0_0x427e71(0x179)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require('../models/all_models'),auth=require('../middleware/auth'),nodemailer=require('nodemailer');var ejs=require('ejs');function a0_0x16d8(){const _0x4bd1ec=['6145OiuJXW','table\x20page','post','status','floor','6993uepYcg','log','4128KoIdfI','/supplier','body','$name','findOne','json','Enabled','$room','556QgKlWD','express','1954854nETGhR','2199684EboSLt','length','Router','5656400yOdBqV','message','INC-','exports','aggregate','find','15wSgsxV','Return\x20Goods','$_id','9qvwNNm','66336JbqhCS','2441395kpbDaV','Finished\x20Goods','Raw\x20Materials'];a0_0x16d8=function(){return _0x4bd1ec;};return a0_0x16d8();}function a0_0x2262(_0x493b0c,_0x40de14){const _0x16d815=a0_0x16d8();return a0_0x2262=function(_0x226281,_0x31dbe3){_0x226281=_0x226281-0x15e;let _0x4c5255=_0x16d815[_0x226281];return _0x4c5255;},a0_0x2262(_0x493b0c,_0x40de14);}const path=require('path'),users=require('../public/language/languages.json');router[a0_0x427e71(0x167)]('/view',async(_0x266926,_0x438952)=>{const _0x4a18cf=a0_0x427e71;try{const {warehouse_category:_0x351fac}=_0x266926['body'];if(_0x351fac=='RM'){const _0x1f2f5b=await warehouse['aggregate']([{'$match':{'status':_0x4a18cf(0x172),'warehouse_category':_0x4a18cf(0x164),'name':{'$ne':_0x4a18cf(0x15e)}}},{'$group':{'_id':_0x4a18cf(0x16f),'name':{'$first':'$name'}}}]);_0x438952[_0x4a18cf(0x171)](_0x1f2f5b);}else{const _0x5a6712=await warehouse[_0x4a18cf(0x17e)]([{'$match':{'status':_0x4a18cf(0x172),'warehouse_category':_0x4a18cf(0x163),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x4a18cf(0x16f),'name':{'$first':'$name'}}}]);_0x438952[_0x4a18cf(0x171)](_0x5a6712);}}catch(_0x1c2414){console[_0x4a18cf(0x16b)](_0x4a18cf(0x166),_0x1c2414),_0x438952[_0x4a18cf(0x168)](0xc8)[_0x4a18cf(0x171)]({'message':_0x1c2414[_0x4a18cf(0x17b)]});}}),router[a0_0x427e71(0x167)](a0_0x427e71(0x16d),async(_0x371fd0,_0x10418d)=>{const _0xad6110=a0_0x427e71;try{const _0x26bc51=await suppliers[_0xad6110(0x17f)]({});_0x10418d['status'](0xc8)[_0xad6110(0x171)](_0x26bc51);}catch(_0x2e0281){console[_0xad6110(0x16b)]('table\x20page',_0x2e0281),_0x10418d[_0xad6110(0x168)](0xc8)[_0xad6110(0x171)]({'message':_0x2e0281['message']});}}),router[a0_0x427e71(0x167)]('/room',async(_0x2d1c97,_0x12b18b)=>{const _0x44debb=a0_0x427e71;try{const {wahouse_data:_0x3f7f2e}=_0x2d1c97[_0x44debb(0x16e)],_0x7fb7a7=[{'$match':{'name':_0x3f7f2e,'status':_0x44debb(0x172)}},{'$group':{'_id':_0x44debb(0x15f),'room_name':{'$first':_0x44debb(0x173)}}},{'$sort':{'room_name':0x1}}],_0x2d5a9c=await warehouse[_0x44debb(0x17e)](_0x7fb7a7);_0x12b18b[_0x44debb(0x168)](0xc8)[_0x44debb(0x171)](_0x2d5a9c);}catch(_0xb3bd14){console['log'](_0x44debb(0x166),_0xb3bd14),_0x12b18b[_0x44debb(0x168)](0xc8)[_0x44debb(0x171)]({'message':_0xb3bd14[_0x44debb(0x17b)]});}}),router[a0_0x427e71(0x167)]('/invoice',async(_0x41a5e3,_0x4308a9)=>{const _0x288a25=a0_0x427e71;try{const _0x502dbd=0x989680,_0x1602bb=0x5f5e0ff,_0x43c6ea=Math[_0x288a25(0x169)](Math['random']()*(_0x1602bb-_0x502dbd+0x1))+_0x502dbd;var _0x435b50;const _0x42682c=await purchases[_0x288a25(0x170)]({'invoice':_0x288a25(0x17c)+_0x43c6ea});return _0x42682c&&_0x42682c[_0x288a25(0x178)]>0x0?_0x435b50=_0x288a25(0x17c)+_0x43c6ea:_0x435b50=_0x288a25(0x17c)+_0x43c6ea,_0x4308a9[_0x288a25(0x171)]({'incoming_invoice':_0x435b50}),_0x435b50;}catch(_0x125b05){console['log']('table\x20page',_0x125b05),_0x4308a9[_0x288a25(0x168)](0xc8)[_0x288a25(0x171)]({'message':_0x125b05[_0x288a25(0x17b)]});}}),module[a0_0x427e71(0x17d)]=router;