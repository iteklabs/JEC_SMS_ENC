const a0_0x364be0=a0_0x4959;(function(_0x36283f,_0x30d8de){const _0x4c52ac=a0_0x4959,_0x2fb0f9=_0x36283f();while(!![]){try{const _0x51b566=parseInt(_0x4c52ac(0x9d))/0x1+-parseInt(_0x4c52ac(0xb0))/0x2+-parseInt(_0x4c52ac(0xa7))/0x3+-parseInt(_0x4c52ac(0x9f))/0x4+parseInt(_0x4c52ac(0xa4))/0x5*(-parseInt(_0x4c52ac(0x9c))/0x6)+-parseInt(_0x4c52ac(0xa8))/0x7+parseInt(_0x4c52ac(0xb1))/0x8;if(_0x51b566===_0x30d8de)break;else _0x2fb0f9['push'](_0x2fb0f9['shift']());}catch(_0x39f26a){_0x2fb0f9['push'](_0x2fb0f9['shift']());}}}(a0_0x14e7,0x3c132));const express=require(a0_0x364be0(0xa0)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x364be0(0xa2)),auth=require('../middleware/auth'),nodemailer=require('nodemailer');function a0_0x14e7(){const _0x4aa1e5=['374381UuuljV','INC-','log','floor','body','ejs','Finished\x20Goods','Raw\x20Materials','952022XKQKvY','9814024vaIVDQ','/invoice','status','Enabled','path','Return\x20Goods','aggregate','findOne','find','/view','post','exports','random','360tAmQiO','371178SvYYVT','length','1386300BwKZcy','express','json','../models/all_models','message','27175XeqfEE','$name','table\x20page','449088vIFQOj'];a0_0x14e7=function(){return _0x4aa1e5;};return a0_0x14e7();}function a0_0x4959(_0x47da45,_0x27beb9){const _0x14e7d8=a0_0x14e7();return a0_0x4959=function(_0x49593f,_0x2c28b9){_0x49593f=_0x49593f-0x93;let _0x595fff=_0x14e7d8[_0x49593f];return _0x595fff;},a0_0x4959(_0x47da45,_0x27beb9);}var ejs=require(a0_0x364be0(0xad));const path=require(a0_0x364be0(0x93)),users=require('../public/language/languages.json');router['post'](a0_0x364be0(0x98),async(_0x334e65,_0x4db7f4)=>{const _0x5a99bd=a0_0x364be0;try{const {warehouse_category:_0x5d9431}=_0x334e65[_0x5a99bd(0xac)];if(_0x5d9431=='RM'){const _0x50f054=await warehouse[_0x5a99bd(0x95)]([{'$match':{'status':_0x5a99bd(0xb4),'warehouse_category':_0x5a99bd(0xaf),'name':{'$ne':_0x5a99bd(0x94)}}},{'$group':{'_id':_0x5a99bd(0xa5),'name':{'$first':_0x5a99bd(0xa5)}}}]);_0x4db7f4['json'](_0x50f054);}else{const _0x38c1cc=await warehouse[_0x5a99bd(0x95)]([{'$match':{'status':_0x5a99bd(0xb4),'warehouse_category':_0x5a99bd(0xae),'name':{'$ne':_0x5a99bd(0x94)}}},{'$group':{'_id':_0x5a99bd(0xa5),'name':{'$first':'$name'}}}]);_0x4db7f4[_0x5a99bd(0xa1)](_0x38c1cc);}}catch(_0x388c5d){console[_0x5a99bd(0xaa)](_0x5a99bd(0xa6),_0x388c5d),_0x4db7f4[_0x5a99bd(0xb3)](0xc8)[_0x5a99bd(0xa1)]({'message':_0x388c5d[_0x5a99bd(0xa3)]});}}),router[a0_0x364be0(0x99)]('/supplier',async(_0x202a1b,_0x133688)=>{const _0x312d79=a0_0x364be0;try{const _0x476c0f=await suppliers[_0x312d79(0x97)]({});_0x133688[_0x312d79(0xb3)](0xc8)[_0x312d79(0xa1)](_0x476c0f);}catch(_0x376dc8){console['log'](_0x312d79(0xa6),_0x376dc8),_0x133688['status'](0xc8)[_0x312d79(0xa1)]({'message':_0x376dc8[_0x312d79(0xa3)]});}}),router[a0_0x364be0(0x99)]('/room',async(_0x870991,_0x2c4ff9)=>{const _0x5c37cf=a0_0x364be0;try{const {wahouse_data:_0x4e49dd}=_0x870991['body'],_0x5e4b48=[{'$match':{'name':_0x4e49dd,'status':_0x5c37cf(0xb4)}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}],_0x2287af=await warehouse['aggregate'](_0x5e4b48);_0x2c4ff9[_0x5c37cf(0xb3)](0xc8)[_0x5c37cf(0xa1)](_0x2287af);}catch(_0x40a007){console[_0x5c37cf(0xaa)]('table\x20page',_0x40a007),_0x2c4ff9['status'](0xc8)['json']({'message':_0x40a007['message']});}}),router[a0_0x364be0(0x99)](a0_0x364be0(0xb2),async(_0x55f138,_0xc7bc17)=>{const _0x11b179=a0_0x364be0;try{const _0x3a9be7=0x989680,_0x187ec6=0x5f5e0ff,_0x5da63d=Math[_0x11b179(0xab)](Math[_0x11b179(0x9b)]()*(_0x187ec6-_0x3a9be7+0x1))+_0x3a9be7;var _0xc37059;const _0x1ec2da=await purchases[_0x11b179(0x96)]({'invoice':'INC-'+_0x5da63d});return _0x1ec2da&&_0x1ec2da[_0x11b179(0x9e)]>0x0?_0xc37059=_0x11b179(0xa9)+_0x5da63d:_0xc37059=_0x11b179(0xa9)+_0x5da63d,_0xc7bc17[_0x11b179(0xa1)]({'incoming_invoice':_0xc37059}),_0xc37059;}catch(_0xc9cbb){console[_0x11b179(0xaa)](_0x11b179(0xa6),_0xc9cbb),_0xc7bc17[_0x11b179(0xb3)](0xc8)['json']({'message':_0xc9cbb[_0x11b179(0xa3)]});}}),module[a0_0x364be0(0x9a)]=router;