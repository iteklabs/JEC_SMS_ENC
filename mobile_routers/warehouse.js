const a0_0x487298=a0_0x5bba;(function(_0x5b6ee1,_0x34f78c){const _0x3a9239=a0_0x5bba,_0x43ee1d=_0x5b6ee1();while(!![]){try{const _0x2daa5f=parseInt(_0x3a9239(0x92))/0x1*(parseInt(_0x3a9239(0x80))/0x2)+parseInt(_0x3a9239(0x83))/0x3*(-parseInt(_0x3a9239(0x7e))/0x4)+-parseInt(_0x3a9239(0x6c))/0x5*(-parseInt(_0x3a9239(0x7d))/0x6)+parseInt(_0x3a9239(0x82))/0x7+parseInt(_0x3a9239(0x90))/0x8*(parseInt(_0x3a9239(0x76))/0x9)+-parseInt(_0x3a9239(0x78))/0xa+-parseInt(_0x3a9239(0x6f))/0xb;if(_0x2daa5f===_0x34f78c)break;else _0x43ee1d['push'](_0x43ee1d['shift']());}catch(_0x1c9aa6){_0x43ee1d['push'](_0x43ee1d['shift']());}}}(a0_0x1a98,0xce574));const express=require('express'),app=express(),router=express[a0_0x487298(0x93)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x487298(0x7b)),nodemailer=require(a0_0x487298(0x6d));var ejs=require(a0_0x487298(0x8d));function a0_0x5bba(_0x315be3,_0x18d03f){const _0x1a986b=a0_0x1a98();return a0_0x5bba=function(_0x5bbada,_0x569ae6){_0x5bbada=_0x5bbada-0x6b;let _0x110feb=_0x1a986b[_0x5bbada];return _0x110feb;},a0_0x5bba(_0x315be3,_0x18d03f);}const path=require(a0_0x487298(0x91)),users=require(a0_0x487298(0x74));function a0_0x1a98(){const _0x4667f8=['$name','$room','length','../public/language/languages.json','Raw\x20Materials','9uMTmUM','find','496210seVQPp','body','Enabled','../middleware/auth','json','6NotIdJ','4lEGwQY','Finished\x20Goods','20912dhQQEb','$_id','10611608gbgfYT','3533388LplpQD','table\x20page','findOne','/room','log','message','INC-','status','/invoice','floor','ejs','Return\x20Goods','random','656560zENPPX','path','94xueNMv','Router','/view','1366655cybvst','nodemailer','aggregate','8597820GYUoXR','post'];a0_0x1a98=function(){return _0x4667f8;};return a0_0x1a98();}router[a0_0x487298(0x70)](a0_0x487298(0x6b),async(_0x8428d7,_0xf77de7)=>{const _0x928c27=a0_0x487298;try{const {warehouse_category:_0x215440}=_0x8428d7[_0x928c27(0x79)];if(_0x215440=='RM'){const _0x2af94d=await warehouse['aggregate']([{'$match':{'status':_0x928c27(0x7a),'warehouse_category':_0x928c27(0x75),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x928c27(0x71),'name':{'$first':'$name'}}}]);_0xf77de7[_0x928c27(0x7c)](_0x2af94d);}else{const _0x44307b=await warehouse[_0x928c27(0x6e)]([{'$match':{'status':_0x928c27(0x7a),'warehouse_category':_0x928c27(0x7f),'name':{'$ne':_0x928c27(0x8e)}}},{'$group':{'_id':_0x928c27(0x71),'name':{'$first':_0x928c27(0x71)}}}]);_0xf77de7[_0x928c27(0x7c)](_0x44307b);}}catch(_0x478dd8){console['log']('table\x20page',_0x478dd8),_0xf77de7['status'](0xc8)[_0x928c27(0x7c)]({'message':_0x478dd8[_0x928c27(0x88)]});}}),router['post']('/supplier',async(_0x4442ae,_0x11ffd2)=>{const _0x5d2f02=a0_0x487298;try{const _0x25aa0e=await suppliers[_0x5d2f02(0x77)]({});_0x11ffd2[_0x5d2f02(0x8a)](0xc8)['json'](_0x25aa0e);}catch(_0x144d59){console[_0x5d2f02(0x87)](_0x5d2f02(0x84),_0x144d59),_0x11ffd2[_0x5d2f02(0x8a)](0xc8)[_0x5d2f02(0x7c)]({'message':_0x144d59[_0x5d2f02(0x88)]});}}),router[a0_0x487298(0x70)](a0_0x487298(0x86),async(_0x38da08,_0x4c9b71)=>{const _0x1e284a=a0_0x487298;try{const {wahouse_data:_0x14ab84}=_0x38da08[_0x1e284a(0x79)],_0x16b191=[{'$match':{'name':_0x14ab84,'status':'Enabled'}},{'$group':{'_id':_0x1e284a(0x81),'room_name':{'$first':_0x1e284a(0x72)}}},{'$sort':{'room_name':0x1}}],_0x1de2b2=await warehouse[_0x1e284a(0x6e)](_0x16b191);_0x4c9b71[_0x1e284a(0x8a)](0xc8)[_0x1e284a(0x7c)](_0x1de2b2);}catch(_0x5520ad){console[_0x1e284a(0x87)](_0x1e284a(0x84),_0x5520ad),_0x4c9b71['status'](0xc8)[_0x1e284a(0x7c)]({'message':_0x5520ad[_0x1e284a(0x88)]});}}),router[a0_0x487298(0x70)](a0_0x487298(0x8b),async(_0x17978b,_0x27257b)=>{const _0x4301c7=a0_0x487298;try{const _0x494bff=0x989680,_0x3e7b05=0x5f5e0ff,_0x437166=Math[_0x4301c7(0x8c)](Math[_0x4301c7(0x8f)]()*(_0x3e7b05-_0x494bff+0x1))+_0x494bff;var _0x471180;const _0x3ff7b4=await purchases[_0x4301c7(0x85)]({'invoice':_0x4301c7(0x89)+_0x437166});return _0x3ff7b4&&_0x3ff7b4[_0x4301c7(0x73)]>0x0?_0x471180=_0x4301c7(0x89)+_0x437166:_0x471180=_0x4301c7(0x89)+_0x437166,_0x27257b[_0x4301c7(0x7c)]({'incoming_invoice':_0x471180}),_0x471180;}catch(_0x41ac45){console[_0x4301c7(0x87)](_0x4301c7(0x84),_0x41ac45),_0x27257b[_0x4301c7(0x8a)](0xc8)[_0x4301c7(0x7c)]({'message':_0x41ac45[_0x4301c7(0x88)]});}}),module['exports']=router;