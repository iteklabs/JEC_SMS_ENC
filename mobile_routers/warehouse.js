const a0_0x4e31a3=a0_0x94ce;(function(_0x20c129,_0x1a82ad){const _0xed1a60=a0_0x94ce,_0xe8c60b=_0x20c129();while(!![]){try{const _0x5523ba=parseInt(_0xed1a60(0x175))/0x1*(parseInt(_0xed1a60(0x16e))/0x2)+parseInt(_0xed1a60(0x16c))/0x3+parseInt(_0xed1a60(0x18d))/0x4+-parseInt(_0xed1a60(0x16d))/0x5+parseInt(_0xed1a60(0x172))/0x6*(parseInt(_0xed1a60(0x17b))/0x7)+parseInt(_0xed1a60(0x186))/0x8*(-parseInt(_0xed1a60(0x185))/0x9)+-parseInt(_0xed1a60(0x174))/0xa*(parseInt(_0xed1a60(0x179))/0xb);if(_0x5523ba===_0x1a82ad)break;else _0xe8c60b['push'](_0xe8c60b['shift']());}catch(_0x586df3){_0xe8c60b['push'](_0xe8c60b['shift']());}}}(a0_0xbd22,0x91573));const express=require(a0_0x4e31a3(0x17f)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x4e31a3(0x176)),auth=require(a0_0x4e31a3(0x189)),nodemailer=require(a0_0x4e31a3(0x187));var ejs=require('ejs');const path=require(a0_0x4e31a3(0x17a)),users=require('../public/language/languages.json');function a0_0x94ce(_0x440725,_0x42f888){const _0xbd22bb=a0_0xbd22();return a0_0x94ce=function(_0x94ce4d,_0x35eca3){_0x94ce4d=_0x94ce4d-0x16c;let _0x2a4cdf=_0xbd22bb[_0x94ce4d];return _0x2a4cdf;},a0_0x94ce(_0x440725,_0x42f888);}function a0_0xbd22(){const _0x3d0de9=['47250kuCRhP','/invoice','table\x20page','Finished\x20Goods','express','floor','json','aggregate','Return\x20Goods','body','106875pNbJjC','8HpPThM','nodemailer','status','../middleware/auth','Raw\x20Materials','post','findOne','2185264rsgPrC','INC-','message','/view','747084uzjzdc','4622850LCggZe','34478LDyyAo','find','exports','$name','918xLSJyg','Enabled','5710BplFvk','63AEwtZR','../models/all_models','random','log','26631WnRUzA','path'];a0_0xbd22=function(){return _0x3d0de9;};return a0_0xbd22();}router[a0_0x4e31a3(0x18b)](a0_0x4e31a3(0x190),async(_0xe05f04,_0x1fcc2f)=>{const _0x23a155=a0_0x4e31a3;try{const {warehouse_category:_0x57cf65}=_0xe05f04[_0x23a155(0x184)];if(_0x57cf65=='RM'){const _0x3a34c2=await warehouse[_0x23a155(0x182)]([{'$match':{'status':'Enabled','warehouse_category':_0x23a155(0x18a),'name':{'$ne':_0x23a155(0x183)}}},{'$group':{'_id':'$name','name':{'$first':_0x23a155(0x171)}}}]);_0x1fcc2f[_0x23a155(0x181)](_0x3a34c2);}else{const _0x4b171a=await warehouse[_0x23a155(0x182)]([{'$match':{'status':_0x23a155(0x173),'warehouse_category':_0x23a155(0x17e),'name':{'$ne':_0x23a155(0x183)}}},{'$group':{'_id':'$name','name':{'$first':_0x23a155(0x171)}}}]);_0x1fcc2f['json'](_0x4b171a);}}catch(_0x517359){console[_0x23a155(0x178)]('table\x20page',_0x517359),_0x1fcc2f['status'](0xc8)['json']({'message':_0x517359['message']});}}),router['post']('/supplier',async(_0x1c5ab3,_0x2026cc)=>{const _0x2ddd10=a0_0x4e31a3;try{const _0x293b3f=await suppliers[_0x2ddd10(0x16f)]({});_0x2026cc[_0x2ddd10(0x188)](0xc8)[_0x2ddd10(0x181)](_0x293b3f);}catch(_0x563812){console[_0x2ddd10(0x178)](_0x2ddd10(0x17d),_0x563812),_0x2026cc[_0x2ddd10(0x188)](0xc8)[_0x2ddd10(0x181)]({'message':_0x563812[_0x2ddd10(0x18f)]});}}),router[a0_0x4e31a3(0x18b)]('/room',async(_0x1d7c03,_0x1c3696)=>{const _0x51b31d=a0_0x4e31a3;try{const {wahouse_data:_0x51ae2b}=_0x1d7c03['body'],_0x32e733=[{'$match':{'name':_0x51ae2b,'status':_0x51b31d(0x173)}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}],_0x47b800=await warehouse[_0x51b31d(0x182)](_0x32e733);_0x1c3696['status'](0xc8)['json'](_0x47b800);}catch(_0x24c3c5){console['log']('table\x20page',_0x24c3c5),_0x1c3696[_0x51b31d(0x188)](0xc8)[_0x51b31d(0x181)]({'message':_0x24c3c5['message']});}}),router['post'](a0_0x4e31a3(0x17c),async(_0xb4dcdb,_0x3905f7)=>{const _0x17b8aa=a0_0x4e31a3;try{const _0x25e202=0x989680,_0x1a7e64=0x5f5e0ff,_0xa59895=Math[_0x17b8aa(0x180)](Math[_0x17b8aa(0x177)]()*(_0x1a7e64-_0x25e202+0x1))+_0x25e202;var _0xaed0a6;const _0x57fe0e=await purchases[_0x17b8aa(0x18c)]({'invoice':'INC-'+_0xa59895});return _0x57fe0e&&_0x57fe0e['length']>0x0?_0xaed0a6=_0x17b8aa(0x18e)+_0xa59895:_0xaed0a6=_0x17b8aa(0x18e)+_0xa59895,_0x3905f7['json']({'incoming_invoice':_0xaed0a6}),_0xaed0a6;}catch(_0xe6ed27){console['log'](_0x17b8aa(0x17d),_0xe6ed27),_0x3905f7[_0x17b8aa(0x188)](0xc8)[_0x17b8aa(0x181)]({'message':_0xe6ed27[_0x17b8aa(0x18f)]});}}),module[a0_0x4e31a3(0x170)]=router;