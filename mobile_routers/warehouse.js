const a0_0x16592d=a0_0x52fd;(function(_0xd93722,_0x307e02){const _0x1dfde1=a0_0x52fd,_0x1b3971=_0xd93722();while(!![]){try{const _0x2ac5d4=-parseInt(_0x1dfde1(0x160))/0x1+parseInt(_0x1dfde1(0x165))/0x2+-parseInt(_0x1dfde1(0x170))/0x3*(-parseInt(_0x1dfde1(0x171))/0x4)+-parseInt(_0x1dfde1(0x16b))/0x5+-parseInt(_0x1dfde1(0x180))/0x6*(-parseInt(_0x1dfde1(0x182))/0x7)+-parseInt(_0x1dfde1(0x163))/0x8*(parseInt(_0x1dfde1(0x16f))/0x9)+parseInt(_0x1dfde1(0x185))/0xa;if(_0x2ac5d4===_0x307e02)break;else _0x1b3971['push'](_0x1b3971['shift']());}catch(_0x4dde8b){_0x1b3971['push'](_0x1b3971['shift']());}}}(a0_0x6580,0x27e3c));function a0_0x6580(){const _0x4b0e7c=['log','exports','Raw\x20Materials','body','json','1147734VyrKJq','../public/language/languages.json','7clZfqy','Enabled','INC-','1068580dPcIJA','/supplier','46556mZXCMl','length','find','56WcwzyY','$_id','508818DdZAHd','../models/all_models','../middleware/auth','findOne','$name','Finished\x20Goods','1596780lRpVmc','table\x20page','aggregate','/invoice','246681JICrkO','3UQGxkq','674428tHwAun','post','random','status','/room','path','Return\x20Goods','message','floor','$room'];a0_0x6580=function(){return _0x4b0e7c;};return a0_0x6580();}const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x16592d(0x166)),auth=require(a0_0x16592d(0x167)),nodemailer=require('nodemailer');function a0_0x52fd(_0x42eb3f,_0x32da74){const _0x65803d=a0_0x6580();return a0_0x52fd=function(_0x52fd45,_0x672051){_0x52fd45=_0x52fd45-0x160;let _0x462381=_0x65803d[_0x52fd45];return _0x462381;},a0_0x52fd(_0x42eb3f,_0x32da74);}var ejs=require('ejs');const path=require(a0_0x16592d(0x176)),users=require(a0_0x16592d(0x181));router['post']('/view',async(_0x12054c,_0x15f405)=>{const _0x565b31=a0_0x16592d;try{const {warehouse_category:_0x3ba7ca}=_0x12054c[_0x565b31(0x17e)];if(_0x3ba7ca=='RM'){const _0x4b2b9e=await warehouse[_0x565b31(0x16d)]([{'$match':{'status':'Enabled','warehouse_category':_0x565b31(0x17d),'name':{'$ne':_0x565b31(0x177)}}},{'$group':{'_id':_0x565b31(0x169),'name':{'$first':'$name'}}}]);_0x15f405[_0x565b31(0x17f)](_0x4b2b9e);}else{const _0x585d8b=await warehouse[_0x565b31(0x16d)]([{'$match':{'status':_0x565b31(0x183),'warehouse_category':_0x565b31(0x16a),'name':{'$ne':_0x565b31(0x177)}}},{'$group':{'_id':_0x565b31(0x169),'name':{'$first':_0x565b31(0x169)}}}]);_0x15f405['json'](_0x585d8b);}}catch(_0x29c71c){console['log'](_0x565b31(0x16c),_0x29c71c),_0x15f405[_0x565b31(0x174)](0xc8)[_0x565b31(0x17f)]({'message':_0x29c71c['message']});}}),router[a0_0x16592d(0x172)](a0_0x16592d(0x186),async(_0x3a9b90,_0x5055b7)=>{const _0x37cc30=a0_0x16592d;try{const _0x3a61a6=await suppliers[_0x37cc30(0x162)]({});_0x5055b7[_0x37cc30(0x174)](0xc8)['json'](_0x3a61a6);}catch(_0x26e003){console['log'](_0x37cc30(0x16c),_0x26e003),_0x5055b7[_0x37cc30(0x174)](0xc8)[_0x37cc30(0x17f)]({'message':_0x26e003[_0x37cc30(0x178)]});}}),router[a0_0x16592d(0x172)](a0_0x16592d(0x175),async(_0x48d73e,_0x54809c)=>{const _0x429f6f=a0_0x16592d;try{const {wahouse_data:_0x517d77}=_0x48d73e['body'],_0x358827=[{'$match':{'name':_0x517d77,'status':_0x429f6f(0x183)}},{'$group':{'_id':_0x429f6f(0x164),'room_name':{'$first':_0x429f6f(0x17a)}}},{'$sort':{'room_name':0x1}}],_0x42167c=await warehouse[_0x429f6f(0x16d)](_0x358827);_0x54809c[_0x429f6f(0x174)](0xc8)[_0x429f6f(0x17f)](_0x42167c);}catch(_0x422041){console[_0x429f6f(0x17b)](_0x429f6f(0x16c),_0x422041),_0x54809c[_0x429f6f(0x174)](0xc8)[_0x429f6f(0x17f)]({'message':_0x422041[_0x429f6f(0x178)]});}}),router[a0_0x16592d(0x172)](a0_0x16592d(0x16e),async(_0x393c47,_0x8de6f6)=>{const _0x33787e=a0_0x16592d;try{const _0x4050c8=0x989680,_0x54d683=0x5f5e0ff,_0x500fd7=Math[_0x33787e(0x179)](Math[_0x33787e(0x173)]()*(_0x54d683-_0x4050c8+0x1))+_0x4050c8;var _0x1d5b30;const _0x178b65=await purchases[_0x33787e(0x168)]({'invoice':_0x33787e(0x184)+_0x500fd7});return _0x178b65&&_0x178b65[_0x33787e(0x161)]>0x0?_0x1d5b30=_0x33787e(0x184)+_0x500fd7:_0x1d5b30=_0x33787e(0x184)+_0x500fd7,_0x8de6f6[_0x33787e(0x17f)]({'incoming_invoice':_0x1d5b30}),_0x1d5b30;}catch(_0x23a638){console['log'](_0x33787e(0x16c),_0x23a638),_0x8de6f6[_0x33787e(0x174)](0xc8)[_0x33787e(0x17f)]({'message':_0x23a638[_0x33787e(0x178)]});}}),module[a0_0x16592d(0x17c)]=router;