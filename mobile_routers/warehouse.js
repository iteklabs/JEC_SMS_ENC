const a0_0x41e2ab=a0_0x2bc3;(function(_0x998979,_0x2dbd5e){const _0x101803=a0_0x2bc3,_0x480602=_0x998979();while(!![]){try{const _0x2caa39=parseInt(_0x101803(0xd9))/0x1*(-parseInt(_0x101803(0xc9))/0x2)+-parseInt(_0x101803(0xce))/0x3+-parseInt(_0x101803(0xca))/0x4+-parseInt(_0x101803(0xbd))/0x5*(parseInt(_0x101803(0xdb))/0x6)+-parseInt(_0x101803(0xc6))/0x7+-parseInt(_0x101803(0xcf))/0x8*(-parseInt(_0x101803(0xd3))/0x9)+parseInt(_0x101803(0xc3))/0xa*(parseInt(_0x101803(0xd0))/0xb);if(_0x2caa39===_0x2dbd5e)break;else _0x480602['push'](_0x480602['shift']());}catch(_0x183f05){_0x480602['push'](_0x480602['shift']());}}}(a0_0x1cb0,0x5d48d));function a0_0x1cb0(){const _0x1124e6=['aggregate','$name','length','../public/language/languages.json','message','INC-','find','5qilauq','floor','$_id','Return\x20Goods','Finished\x20Goods','/invoice','10mhliJx','nodemailer','../middleware/auth','2022790rZtMeb','/supplier','exports','122450mNTjGB','2051080NjlciB','Raw\x20Materials','status','ejs','361122rJZvDQ','9992gaxIWk','21499973yUsBOb','findOne','$room','288copxLT','body','json','path','table\x20page','post','6wsmYgP','log','1937724JCPoIk','Enabled','/room','../models/all_models','/view'];a0_0x1cb0=function(){return _0x1124e6;};return a0_0x1cb0();}function a0_0x2bc3(_0x47114e,_0x4fb65e){const _0x1cb052=a0_0x1cb0();return a0_0x2bc3=function(_0x2bc3e3,_0x1029a5){_0x2bc3e3=_0x2bc3e3-0xb2;let _0x3deaa2=_0x1cb052[_0x2bc3e3];return _0x3deaa2;},a0_0x2bc3(_0x47114e,_0x4fb65e);}const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x41e2ab(0xb4)),auth=require(a0_0x41e2ab(0xc5)),nodemailer=require(a0_0x41e2ab(0xc4));var ejs=require(a0_0x41e2ab(0xcd));const path=require(a0_0x41e2ab(0xd6)),users=require(a0_0x41e2ab(0xb9));router[a0_0x41e2ab(0xd8)](a0_0x41e2ab(0xb5),async(_0x24d69f,_0x34872b)=>{const _0x57f7d7=a0_0x41e2ab;try{const {warehouse_category:_0x179204}=_0x24d69f['body'];if(_0x179204=='RM'){const _0x55b8a2=await warehouse[_0x57f7d7(0xb6)]([{'$match':{'status':_0x57f7d7(0xb2),'warehouse_category':_0x57f7d7(0xcb),'name':{'$ne':_0x57f7d7(0xc0)}}},{'$group':{'_id':_0x57f7d7(0xb7),'name':{'$first':_0x57f7d7(0xb7)}}}]);_0x34872b[_0x57f7d7(0xd5)](_0x55b8a2);}else{const _0x4cab2a=await warehouse[_0x57f7d7(0xb6)]([{'$match':{'status':_0x57f7d7(0xb2),'warehouse_category':_0x57f7d7(0xc1),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x57f7d7(0xb7),'name':{'$first':_0x57f7d7(0xb7)}}}]);_0x34872b[_0x57f7d7(0xd5)](_0x4cab2a);}}catch(_0x352c2b){console[_0x57f7d7(0xda)]('table\x20page',_0x352c2b),_0x34872b[_0x57f7d7(0xcc)](0xc8)['json']({'message':_0x352c2b[_0x57f7d7(0xba)]});}}),router['post'](a0_0x41e2ab(0xc7),async(_0x2dbb34,_0x2c21c7)=>{const _0x4cf143=a0_0x41e2ab;try{const _0x40f1e6=await suppliers[_0x4cf143(0xbc)]({});_0x2c21c7[_0x4cf143(0xcc)](0xc8)[_0x4cf143(0xd5)](_0x40f1e6);}catch(_0x5ea4cc){console[_0x4cf143(0xda)]('table\x20page',_0x5ea4cc),_0x2c21c7[_0x4cf143(0xcc)](0xc8)[_0x4cf143(0xd5)]({'message':_0x5ea4cc[_0x4cf143(0xba)]});}}),router[a0_0x41e2ab(0xd8)](a0_0x41e2ab(0xb3),async(_0x1ad52b,_0x563e87)=>{const _0x1525b5=a0_0x41e2ab;try{const {wahouse_data:_0x51f155}=_0x1ad52b[_0x1525b5(0xd4)],_0x38c557=[{'$match':{'name':_0x51f155,'status':_0x1525b5(0xb2)}},{'$group':{'_id':_0x1525b5(0xbf),'room_name':{'$first':_0x1525b5(0xd2)}}},{'$sort':{'room_name':0x1}}],_0x1fe43c=await warehouse[_0x1525b5(0xb6)](_0x38c557);_0x563e87[_0x1525b5(0xcc)](0xc8)[_0x1525b5(0xd5)](_0x1fe43c);}catch(_0x2903f8){console['log'](_0x1525b5(0xd7),_0x2903f8),_0x563e87[_0x1525b5(0xcc)](0xc8)[_0x1525b5(0xd5)]({'message':_0x2903f8[_0x1525b5(0xba)]});}}),router['post'](a0_0x41e2ab(0xc2),async(_0x51eb83,_0x493498)=>{const _0x486d2b=a0_0x41e2ab;try{const _0x5a611d=0x989680,_0x5b0802=0x5f5e0ff,_0x866563=Math[_0x486d2b(0xbe)](Math['random']()*(_0x5b0802-_0x5a611d+0x1))+_0x5a611d;var _0x1dea7e;const _0x53d08e=await purchases[_0x486d2b(0xd1)]({'invoice':'INC-'+_0x866563});return _0x53d08e&&_0x53d08e[_0x486d2b(0xb8)]>0x0?_0x1dea7e='INC-'+_0x866563:_0x1dea7e=_0x486d2b(0xbb)+_0x866563,_0x493498['json']({'incoming_invoice':_0x1dea7e}),_0x1dea7e;}catch(_0x438294){console[_0x486d2b(0xda)](_0x486d2b(0xd7),_0x438294),_0x493498[_0x486d2b(0xcc)](0xc8)[_0x486d2b(0xd5)]({'message':_0x438294[_0x486d2b(0xba)]});}}),module[a0_0x41e2ab(0xc8)]=router;