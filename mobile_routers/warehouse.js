const a0_0x52f329=a0_0x2b7b;function a0_0x2b7b(_0x5e90ee,_0x4e8c4a){const _0x4428da=a0_0x4428();return a0_0x2b7b=function(_0x2b7b9c,_0x3c85c3){_0x2b7b9c=_0x2b7b9c-0x86;let _0x1272a1=_0x4428da[_0x2b7b9c];return _0x1272a1;},a0_0x2b7b(_0x5e90ee,_0x4e8c4a);}(function(_0x904972,_0x531e69){const _0x402566=a0_0x2b7b,_0x2f9aaa=_0x904972();while(!![]){try{const _0x9db4e8=parseInt(_0x402566(0x98))/0x1*(parseInt(_0x402566(0x95))/0x2)+-parseInt(_0x402566(0x89))/0x3*(-parseInt(_0x402566(0xa7))/0x4)+parseInt(_0x402566(0xa3))/0x5*(parseInt(_0x402566(0x96))/0x6)+-parseInt(_0x402566(0x8b))/0x7*(parseInt(_0x402566(0xa0))/0x8)+-parseInt(_0x402566(0x97))/0x9+parseInt(_0x402566(0x9c))/0xa*(parseInt(_0x402566(0xa6))/0xb)+parseInt(_0x402566(0x93))/0xc*(-parseInt(_0x402566(0x9b))/0xd);if(_0x9db4e8===_0x531e69)break;else _0x2f9aaa['push'](_0x2f9aaa['shift']());}catch(_0x578267){_0x2f9aaa['push'](_0x2f9aaa['shift']());}}}(a0_0x4428,0x84e3b));function a0_0x4428(){const _0x1daf00=['11wRHKEt','3256516VIvHct','/invoice','json','$_id','Return\x20Goods','Finished\x20Goods','express','status','Router','log','length','3suOqrG','INC-','7327859BpkmWn','nodemailer','findOne','aggregate','../middleware/auth','/room','/supplier','../models/all_models','12uvzrwA','message','16wMMiSn','47706XPOYIV','6001263lpxaTH','42603kAdCIp','/view','floor','10034089WwVEpG','8094250omigNg','body','$room','ejs','8VnVrNj','$name','Raw\x20Materials','670bHPIlV','post','table\x20page'];a0_0x4428=function(){return _0x1daf00;};return a0_0x4428();}const express=require(a0_0x52f329(0xad)),app=express(),router=express[a0_0x52f329(0x86)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x52f329(0x92)),auth=require(a0_0x52f329(0x8f)),nodemailer=require(a0_0x52f329(0x8c));var ejs=require(a0_0x52f329(0x9f));const path=require('path'),users=require('../public/language/languages.json');router[a0_0x52f329(0xa4)](a0_0x52f329(0x99),async(_0x173623,_0x43453f)=>{const _0x2dbf60=a0_0x52f329;try{const {warehouse_category:_0x2a927d}=_0x173623[_0x2dbf60(0x9d)];if(_0x2a927d=='RM'){const _0x547b18=await warehouse[_0x2dbf60(0x8e)]([{'$match':{'status':'Enabled','warehouse_category':_0x2dbf60(0xa2),'name':{'$ne':_0x2dbf60(0xab)}}},{'$group':{'_id':_0x2dbf60(0xa1),'name':{'$first':_0x2dbf60(0xa1)}}}]);_0x43453f[_0x2dbf60(0xa9)](_0x547b18);}else{const _0x1f2bd4=await warehouse[_0x2dbf60(0x8e)]([{'$match':{'status':'Enabled','warehouse_category':_0x2dbf60(0xac),'name':{'$ne':_0x2dbf60(0xab)}}},{'$group':{'_id':_0x2dbf60(0xa1),'name':{'$first':_0x2dbf60(0xa1)}}}]);_0x43453f['json'](_0x1f2bd4);}}catch(_0x11762e){console[_0x2dbf60(0x87)]('table\x20page',_0x11762e),_0x43453f['status'](0xc8)[_0x2dbf60(0xa9)]({'message':_0x11762e[_0x2dbf60(0x94)]});}}),router[a0_0x52f329(0xa4)](a0_0x52f329(0x91),async(_0x34325f,_0x49d1b6)=>{const _0x87d650=a0_0x52f329;try{const _0x44d0aa=await suppliers['find']({});_0x49d1b6['status'](0xc8)['json'](_0x44d0aa);}catch(_0x59344b){console['log']('table\x20page',_0x59344b),_0x49d1b6[_0x87d650(0xae)](0xc8)['json']({'message':_0x59344b[_0x87d650(0x94)]});}}),router['post'](a0_0x52f329(0x90),async(_0x49937b,_0x8b3c46)=>{const _0x473e36=a0_0x52f329;try{const {wahouse_data:_0x34bbe1}=_0x49937b[_0x473e36(0x9d)],_0x1d4d32=[{'$match':{'name':_0x34bbe1,'status':'Enabled'}},{'$group':{'_id':_0x473e36(0xaa),'room_name':{'$first':_0x473e36(0x9e)}}},{'$sort':{'room_name':0x1}}],_0x1a0fc3=await warehouse[_0x473e36(0x8e)](_0x1d4d32);_0x8b3c46[_0x473e36(0xae)](0xc8)[_0x473e36(0xa9)](_0x1a0fc3);}catch(_0x13a90c){console[_0x473e36(0x87)](_0x473e36(0xa5),_0x13a90c),_0x8b3c46[_0x473e36(0xae)](0xc8)[_0x473e36(0xa9)]({'message':_0x13a90c[_0x473e36(0x94)]});}}),router['post'](a0_0x52f329(0xa8),async(_0x4fc036,_0x2ccd8b)=>{const _0x2137fa=a0_0x52f329;try{const _0x17925c=0x989680,_0x320298=0x5f5e0ff,_0x106f60=Math[_0x2137fa(0x9a)](Math['random']()*(_0x320298-_0x17925c+0x1))+_0x17925c;var _0x91b00a;const _0x23a447=await purchases[_0x2137fa(0x8d)]({'invoice':_0x2137fa(0x8a)+_0x106f60});return _0x23a447&&_0x23a447[_0x2137fa(0x88)]>0x0?_0x91b00a=_0x2137fa(0x8a)+_0x106f60:_0x91b00a='INC-'+_0x106f60,_0x2ccd8b['json']({'incoming_invoice':_0x91b00a}),_0x91b00a;}catch(_0x533aa2){console[_0x2137fa(0x87)](_0x2137fa(0xa5),_0x533aa2),_0x2ccd8b[_0x2137fa(0xae)](0xc8)['json']({'message':_0x533aa2['message']});}}),module['exports']=router;