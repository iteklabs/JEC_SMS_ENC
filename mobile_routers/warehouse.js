const a0_0x4adaed=a0_0x45bb;function a0_0x1fe7(){const _0x150f73=['/room','327426mUQJTB','228bNRUIT','status','$name','1292889cBFFYj','log','express','Enabled','findOne','/supplier','2178540IdDtNO','Router','488EPuxQH','json','../public/language/languages.json','../models/all_models','Raw\x20Materials','table\x20page','12474420HcsNcz','ejs','post','26577YowyxI','/invoice','aggregate','/view','body','80928ZhfcID','length','16600dxyfLr','6paExhA','message','path','Return\x20Goods','INC-'];a0_0x1fe7=function(){return _0x150f73;};return a0_0x1fe7();}(function(_0x2b5c19,_0x426528){const _0x457f3d=a0_0x45bb,_0x3418e0=_0x2b5c19();while(!![]){try{const _0x4934b1=parseInt(_0x457f3d(0x1bc))/0x1*(-parseInt(_0x457f3d(0x1b9))/0x2)+-parseInt(_0x457f3d(0x1a3))/0x3+parseInt(_0x457f3d(0x1a0))/0x4*(parseInt(_0x457f3d(0x1bb))/0x5)+parseInt(_0x457f3d(0x19f))/0x6+-parseInt(_0x457f3d(0x1a9))/0x7+-parseInt(_0x457f3d(0x1ab))/0x8*(parseInt(_0x457f3d(0x1b4))/0x9)+parseInt(_0x457f3d(0x1b1))/0xa;if(_0x4934b1===_0x426528)break;else _0x3418e0['push'](_0x3418e0['shift']());}catch(_0x53d23f){_0x3418e0['push'](_0x3418e0['shift']());}}}(a0_0x1fe7,0x4fa09));function a0_0x45bb(_0xd5b3c3,_0xf52e05){const _0x1fe774=a0_0x1fe7();return a0_0x45bb=function(_0x45bba7,_0x5d8687){_0x45bba7=_0x45bba7-0x19b;let _0x25d34c=_0x1fe774[_0x45bba7];return _0x25d34c;},a0_0x45bb(_0xd5b3c3,_0xf52e05);}const express=require(a0_0x4adaed(0x1a5)),app=express(),router=express[a0_0x4adaed(0x1aa)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x4adaed(0x1ae)),auth=require('../middleware/auth'),nodemailer=require('nodemailer');var ejs=require(a0_0x4adaed(0x1b2));const path=require(a0_0x4adaed(0x19b)),users=require(a0_0x4adaed(0x1ad));router['post'](a0_0x4adaed(0x1b7),async(_0x3efd31,_0x3ddbec)=>{const _0x1d0bf0=a0_0x4adaed;try{const {warehouse_category:_0x26514d}=_0x3efd31['body'];if(_0x26514d=='RM'){const _0x3e0694=await warehouse['aggregate']([{'$match':{'status':_0x1d0bf0(0x1a6),'warehouse_category':_0x1d0bf0(0x1af),'name':{'$ne':_0x1d0bf0(0x19c)}}},{'$group':{'_id':'$name','name':{'$first':_0x1d0bf0(0x1a2)}}}]);_0x3ddbec[_0x1d0bf0(0x1ac)](_0x3e0694);}else{const _0x147281=await warehouse[_0x1d0bf0(0x1b6)]([{'$match':{'status':_0x1d0bf0(0x1a6),'warehouse_category':'Finished\x20Goods','name':{'$ne':_0x1d0bf0(0x19c)}}},{'$group':{'_id':_0x1d0bf0(0x1a2),'name':{'$first':_0x1d0bf0(0x1a2)}}}]);_0x3ddbec[_0x1d0bf0(0x1ac)](_0x147281);}}catch(_0x2599aa){console[_0x1d0bf0(0x1a4)](_0x1d0bf0(0x1b0),_0x2599aa),_0x3ddbec[_0x1d0bf0(0x1a1)](0xc8)[_0x1d0bf0(0x1ac)]({'message':_0x2599aa[_0x1d0bf0(0x1bd)]});}}),router[a0_0x4adaed(0x1b3)](a0_0x4adaed(0x1a8),async(_0x199cb8,_0x1700d6)=>{const _0x275d57=a0_0x4adaed;try{const _0x41da6b=await suppliers['find']({});_0x1700d6[_0x275d57(0x1a1)](0xc8)[_0x275d57(0x1ac)](_0x41da6b);}catch(_0x5e1e83){console['log']('table\x20page',_0x5e1e83),_0x1700d6[_0x275d57(0x1a1)](0xc8)['json']({'message':_0x5e1e83[_0x275d57(0x1bd)]});}}),router[a0_0x4adaed(0x1b3)](a0_0x4adaed(0x19e),async(_0xf894ee,_0x717f61)=>{const _0x4fe428=a0_0x4adaed;try{const {wahouse_data:_0x4a0a91}=_0xf894ee[_0x4fe428(0x1b8)],_0x30e2fd=[{'$match':{'name':_0x4a0a91,'status':_0x4fe428(0x1a6)}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}],_0x3e045e=await warehouse[_0x4fe428(0x1b6)](_0x30e2fd);_0x717f61['status'](0xc8)[_0x4fe428(0x1ac)](_0x3e045e);}catch(_0x45dac3){console[_0x4fe428(0x1a4)](_0x4fe428(0x1b0),_0x45dac3),_0x717f61[_0x4fe428(0x1a1)](0xc8)[_0x4fe428(0x1ac)]({'message':_0x45dac3['message']});}}),router[a0_0x4adaed(0x1b3)](a0_0x4adaed(0x1b5),async(_0x2c8403,_0x23808f)=>{const _0x44258c=a0_0x4adaed;try{const _0x18ed6f=0x989680,_0x57462a=0x5f5e0ff,_0x1c50aa=Math['floor'](Math['random']()*(_0x57462a-_0x18ed6f+0x1))+_0x18ed6f;var _0x2b55b8;const _0x2be2a4=await purchases[_0x44258c(0x1a7)]({'invoice':_0x44258c(0x19d)+_0x1c50aa});return _0x2be2a4&&_0x2be2a4[_0x44258c(0x1ba)]>0x0?_0x2b55b8=_0x44258c(0x19d)+_0x1c50aa:_0x2b55b8='INC-'+_0x1c50aa,_0x23808f[_0x44258c(0x1ac)]({'incoming_invoice':_0x2b55b8}),_0x2b55b8;}catch(_0x598a6e){console['log'](_0x44258c(0x1b0),_0x598a6e),_0x23808f[_0x44258c(0x1a1)](0xc8)['json']({'message':_0x598a6e[_0x44258c(0x1bd)]});}}),module['exports']=router;