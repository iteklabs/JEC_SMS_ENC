const a0_0x1f7170=a0_0x3441;(function(_0x4ecdf1,_0x563350){const _0x2902c4=a0_0x3441,_0x443367=_0x4ecdf1();while(!![]){try{const _0x5215a3=-parseInt(_0x2902c4(0xea))/0x1*(parseInt(_0x2902c4(0xf7))/0x2)+parseInt(_0x2902c4(0x101))/0x3*(-parseInt(_0x2902c4(0xfb))/0x4)+parseInt(_0x2902c4(0xed))/0x5*(-parseInt(_0x2902c4(0xec))/0x6)+-parseInt(_0x2902c4(0xe6))/0x7+parseInt(_0x2902c4(0x102))/0x8*(-parseInt(_0x2902c4(0xf3))/0x9)+parseInt(_0x2902c4(0x104))/0xa+parseInt(_0x2902c4(0x10c))/0xb;if(_0x5215a3===_0x563350)break;else _0x443367['push'](_0x443367['shift']());}catch(_0x1b9f26){_0x443367['push'](_0x443367['shift']());}}}(a0_0x447d,0xab943));const express=require(a0_0x1f7170(0xff)),app=express(),router=express[a0_0x1f7170(0xfd)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x1f7170(0x109)),auth=require(a0_0x1f7170(0xfa)),nodemailer=require('nodemailer');var ejs=require(a0_0x1f7170(0xf8));const path=require('path'),users=require(a0_0x1f7170(0xf0));function a0_0x447d(){const _0x1028b4=['7578Kuuuiq','26008ANPhtS','/supplier','5595600lkCRpX','$name','exports','Return\x20Goods','Finished\x20Goods','../models/all_models','floor','status','22908864KmOlwz','INC-','3564764brrvrb','length','post','message','397vLprvt','$room','177486NACFip','135ughkgf','/view','body','../public/language/languages.json','findOne','log','657vEZzgc','find','json','random','1502ohcJmV','ejs','aggregate','../middleware/auth','152QrnXPO','table\x20page','Router','/room','express','Enabled'];a0_0x447d=function(){return _0x1028b4;};return a0_0x447d();}function a0_0x3441(_0x27fe3d,_0xc093b){const _0x447d0f=a0_0x447d();return a0_0x3441=function(_0x34416c,_0x9b9f26){_0x34416c=_0x34416c-0xe6;let _0x5352fe=_0x447d0f[_0x34416c];return _0x5352fe;},a0_0x3441(_0x27fe3d,_0xc093b);}router[a0_0x1f7170(0xe8)](a0_0x1f7170(0xee),async(_0x424308,_0x47a019)=>{const _0x567da6=a0_0x1f7170;try{const {warehouse_category:_0x179b0a}=_0x424308[_0x567da6(0xef)];if(_0x179b0a=='RM'){const _0x4eb4ab=await warehouse['aggregate']([{'$match':{'status':_0x567da6(0x100),'warehouse_category':'Raw\x20Materials','name':{'$ne':_0x567da6(0x107)}}},{'$group':{'_id':_0x567da6(0x105),'name':{'$first':'$name'}}}]);_0x47a019[_0x567da6(0xf5)](_0x4eb4ab);}else{const _0x56cfd0=await warehouse[_0x567da6(0xf9)]([{'$match':{'status':_0x567da6(0x100),'warehouse_category':_0x567da6(0x108),'name':{'$ne':_0x567da6(0x107)}}},{'$group':{'_id':_0x567da6(0x105),'name':{'$first':_0x567da6(0x105)}}}]);_0x47a019[_0x567da6(0xf5)](_0x56cfd0);}}catch(_0x425946){console[_0x567da6(0xf2)]('table\x20page',_0x425946),_0x47a019[_0x567da6(0x10b)](0xc8)[_0x567da6(0xf5)]({'message':_0x425946[_0x567da6(0xe9)]});}}),router[a0_0x1f7170(0xe8)](a0_0x1f7170(0x103),async(_0x607fda,_0x199314)=>{const _0x5d79d0=a0_0x1f7170;try{const _0x9936c2=await suppliers[_0x5d79d0(0xf4)]({});_0x199314[_0x5d79d0(0x10b)](0xc8)[_0x5d79d0(0xf5)](_0x9936c2);}catch(_0x2a1e13){console[_0x5d79d0(0xf2)](_0x5d79d0(0xfc),_0x2a1e13),_0x199314['status'](0xc8)[_0x5d79d0(0xf5)]({'message':_0x2a1e13[_0x5d79d0(0xe9)]});}}),router['post'](a0_0x1f7170(0xfe),async(_0x5a6f42,_0x521a85)=>{const _0x505a3f=a0_0x1f7170;try{const {wahouse_data:_0x143858}=_0x5a6f42['body'],_0x49cfda=[{'$match':{'name':_0x143858,'status':'Enabled'}},{'$group':{'_id':'$_id','room_name':{'$first':_0x505a3f(0xeb)}}},{'$sort':{'room_name':0x1}}],_0xc24cd7=await warehouse[_0x505a3f(0xf9)](_0x49cfda);_0x521a85[_0x505a3f(0x10b)](0xc8)[_0x505a3f(0xf5)](_0xc24cd7);}catch(_0xceb2f1){console[_0x505a3f(0xf2)](_0x505a3f(0xfc),_0xceb2f1),_0x521a85[_0x505a3f(0x10b)](0xc8)[_0x505a3f(0xf5)]({'message':_0xceb2f1[_0x505a3f(0xe9)]});}}),router['post']('/invoice',async(_0x3ed6a9,_0x4c8273)=>{const _0x1f9c1f=a0_0x1f7170;try{const _0x4e2911=0x989680,_0x2da117=0x5f5e0ff,_0x43acf0=Math[_0x1f9c1f(0x10a)](Math[_0x1f9c1f(0xf6)]()*(_0x2da117-_0x4e2911+0x1))+_0x4e2911;var _0x53221a;const _0x1c0244=await purchases[_0x1f9c1f(0xf1)]({'invoice':_0x1f9c1f(0x10d)+_0x43acf0});return _0x1c0244&&_0x1c0244[_0x1f9c1f(0xe7)]>0x0?_0x53221a=_0x1f9c1f(0x10d)+_0x43acf0:_0x53221a=_0x1f9c1f(0x10d)+_0x43acf0,_0x4c8273[_0x1f9c1f(0xf5)]({'incoming_invoice':_0x53221a}),_0x53221a;}catch(_0x57913a){console[_0x1f9c1f(0xf2)]('table\x20page',_0x57913a),_0x4c8273['status'](0xc8)[_0x1f9c1f(0xf5)]({'message':_0x57913a[_0x1f9c1f(0xe9)]});}}),module[a0_0x1f7170(0x106)]=router;