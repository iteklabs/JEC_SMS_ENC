const a0_0x361991=a0_0x52fc;function a0_0x52fc(_0x3b8f05,_0x17062a){const _0x5a6c53=a0_0x5a6c();return a0_0x52fc=function(_0x52fc06,_0x302ee3){_0x52fc06=_0x52fc06-0x1e8;let _0x50f095=_0x5a6c53[_0x52fc06];return _0x50f095;},a0_0x52fc(_0x3b8f05,_0x17062a);}function a0_0x5a6c(){const _0x3afd9b=['ejs','3113RKGEeb','18207GbjxgO','Return\x20Goods','Enabled','post','json','message','nodemailer','$name','log','7437460WcUGBw','findOne','9NgBwDp','INC-','/invoice','2vcXifD','../middleware/auth','length','find','exports','aggregate','path','Raw\x20Materials','$_id','40416VNHoWv','status','table\x20page','215rdgqyd','26988hFweDn','floor','483569OvRmAc','Router','Finished\x20Goods','random','3630957lRffzt','2696lEZNZI','1060540FdKGki','/view','express'];a0_0x5a6c=function(){return _0x3afd9b;};return a0_0x5a6c();}(function(_0x271bb9,_0x380eba){const _0x14dc59=a0_0x52fc,_0x2aa14d=_0x271bb9();while(!![]){try{const _0x5eb6f0=parseInt(_0x14dc59(0x202))/0x1+parseInt(_0x14dc59(0x1f3))/0x2*(parseInt(_0x14dc59(0x206))/0x3)+-parseInt(_0x14dc59(0x208))/0x4+parseInt(_0x14dc59(0x1ff))/0x5*(parseInt(_0x14dc59(0x1fc))/0x6)+-parseInt(_0x14dc59(0x20d))/0x7*(parseInt(_0x14dc59(0x207))/0x8)+-parseInt(_0x14dc59(0x1f0))/0x9*(parseInt(_0x14dc59(0x1ee))/0xa)+parseInt(_0x14dc59(0x20c))/0xb*(parseInt(_0x14dc59(0x200))/0xc);if(_0x5eb6f0===_0x380eba)break;else _0x2aa14d['push'](_0x2aa14d['shift']());}catch(_0x59a7b0){_0x2aa14d['push'](_0x2aa14d['shift']());}}}(a0_0x5a6c,0xb3579));const express=require(a0_0x361991(0x20a)),app=express(),router=express[a0_0x361991(0x203)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x361991(0x1f4)),nodemailer=require(a0_0x361991(0x1eb));var ejs=require(a0_0x361991(0x20b));const path=require(a0_0x361991(0x1f9)),users=require('../public/language/languages.json');router[a0_0x361991(0x1e8)](a0_0x361991(0x209),async(_0x24a91e,_0x10fde1)=>{const _0x1b0623=a0_0x361991;try{const {warehouse_category:_0x45a715}=_0x24a91e['body'];if(_0x45a715=='RM'){const _0x598bbe=await warehouse[_0x1b0623(0x1f8)]([{'$match':{'status':_0x1b0623(0x20f),'warehouse_category':_0x1b0623(0x1fa),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x1b0623(0x1ec),'name':{'$first':_0x1b0623(0x1ec)}}}]);_0x10fde1[_0x1b0623(0x1e9)](_0x598bbe);}else{const _0x519a99=await warehouse[_0x1b0623(0x1f8)]([{'$match':{'status':_0x1b0623(0x20f),'warehouse_category':_0x1b0623(0x204),'name':{'$ne':_0x1b0623(0x20e)}}},{'$group':{'_id':_0x1b0623(0x1ec),'name':{'$first':'$name'}}}]);_0x10fde1['json'](_0x519a99);}}catch(_0x34c212){console[_0x1b0623(0x1ed)](_0x1b0623(0x1fe),_0x34c212),_0x10fde1[_0x1b0623(0x1fd)](0xc8)[_0x1b0623(0x1e9)]({'message':_0x34c212[_0x1b0623(0x1ea)]});}}),router[a0_0x361991(0x1e8)]('/supplier',async(_0x5c0552,_0x2c4d90)=>{const _0xffd49=a0_0x361991;try{const _0x5e1cd6=await suppliers[_0xffd49(0x1f6)]({});_0x2c4d90['status'](0xc8)[_0xffd49(0x1e9)](_0x5e1cd6);}catch(_0x54a6b7){console['log']('table\x20page',_0x54a6b7),_0x2c4d90[_0xffd49(0x1fd)](0xc8)[_0xffd49(0x1e9)]({'message':_0x54a6b7[_0xffd49(0x1ea)]});}}),router['post']('/room',async(_0x5d5d1f,_0x4b60a9)=>{const _0x348cad=a0_0x361991;try{const {wahouse_data:_0x5d1bb1}=_0x5d5d1f['body'],_0x147d3b=[{'$match':{'name':_0x5d1bb1,'status':_0x348cad(0x20f)}},{'$group':{'_id':_0x348cad(0x1fb),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}],_0x2a8e5a=await warehouse[_0x348cad(0x1f8)](_0x147d3b);_0x4b60a9[_0x348cad(0x1fd)](0xc8)[_0x348cad(0x1e9)](_0x2a8e5a);}catch(_0x51f8c9){console['log'](_0x348cad(0x1fe),_0x51f8c9),_0x4b60a9['status'](0xc8)[_0x348cad(0x1e9)]({'message':_0x51f8c9['message']});}}),router[a0_0x361991(0x1e8)](a0_0x361991(0x1f2),async(_0x59dd3b,_0x2818d6)=>{const _0x38c035=a0_0x361991;try{const _0x565544=0x989680,_0x5aa413=0x5f5e0ff,_0x202595=Math[_0x38c035(0x201)](Math[_0x38c035(0x205)]()*(_0x5aa413-_0x565544+0x1))+_0x565544;var _0x3bac39;const _0x3d1477=await purchases[_0x38c035(0x1ef)]({'invoice':_0x38c035(0x1f1)+_0x202595});return _0x3d1477&&_0x3d1477[_0x38c035(0x1f5)]>0x0?_0x3bac39='INC-'+_0x202595:_0x3bac39=_0x38c035(0x1f1)+_0x202595,_0x2818d6[_0x38c035(0x1e9)]({'incoming_invoice':_0x3bac39}),_0x3bac39;}catch(_0x2b7a32){console[_0x38c035(0x1ed)](_0x38c035(0x1fe),_0x2b7a32),_0x2818d6['status'](0xc8)[_0x38c035(0x1e9)]({'message':_0x2b7a32[_0x38c035(0x1ea)]});}}),module[a0_0x361991(0x1f7)]=router;