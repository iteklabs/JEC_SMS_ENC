const a0_0xbd87d9=a0_0x5d7e;function a0_0x1e2b(){const _0x23f928=['../models/all_models','6257535BBslsS','floor','aggregate','exports','$_id','json','../public/language/languages.json','status','path','4044qYHexa','13mftAHw','$name','find','/view','table\x20page','463564akFBaO','175kZBjyG','random','Enabled','message','Return\x20Goods','Router','nodemailer','INC-','express','2420106TfITdd','/room','197222fWXSRW','Finished\x20Goods','$room','log','8299008cLrSFI','/supplier','post','8112784BkheVv'];a0_0x1e2b=function(){return _0x23f928;};return a0_0x1e2b();}(function(_0x164890,_0x4ad3d8){const _0x33a0fb=a0_0x5d7e,_0x6a7af0=_0x164890();while(!![]){try{const _0x5e3a36=parseInt(_0x33a0fb(0x1f0))/0x1*(parseInt(_0x33a0fb(0x201))/0x2)+parseInt(_0x33a0fb(0x1ff))/0x3+parseInt(_0x33a0fb(0x1f5))/0x4+-parseInt(_0x33a0fb(0x20a))/0x5+parseInt(_0x33a0fb(0x1ef))/0x6*(-parseInt(_0x33a0fb(0x1f6))/0x7)+-parseInt(_0x33a0fb(0x208))/0x8+parseInt(_0x33a0fb(0x205))/0x9;if(_0x5e3a36===_0x4ad3d8)break;else _0x6a7af0['push'](_0x6a7af0['shift']());}catch(_0x5c8bed){_0x6a7af0['push'](_0x6a7af0['shift']());}}}(a0_0x1e2b,0xce1a1));const express=require(a0_0xbd87d9(0x1fe)),app=express(),router=express[a0_0xbd87d9(0x1fb)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0xbd87d9(0x209)),auth=require('../middleware/auth'),nodemailer=require(a0_0xbd87d9(0x1fc));var ejs=require('ejs');function a0_0x5d7e(_0x17d124,_0x2d25c6){const _0x1e2b74=a0_0x1e2b();return a0_0x5d7e=function(_0x5d7e0e,_0xb98157){_0x5d7e0e=_0x5d7e0e-0x1ee;let _0x3fe7be=_0x1e2b74[_0x5d7e0e];return _0x3fe7be;},a0_0x5d7e(_0x17d124,_0x2d25c6);}const path=require(a0_0xbd87d9(0x1ee)),users=require(a0_0xbd87d9(0x210));router[a0_0xbd87d9(0x207)](a0_0xbd87d9(0x1f3),async(_0x33da4e,_0x30ac9f)=>{const _0x37b99e=a0_0xbd87d9;try{const {warehouse_category:_0x56ceb0}=_0x33da4e['body'];if(_0x56ceb0=='RM'){const _0x26515e=await warehouse[_0x37b99e(0x20c)]([{'$match':{'status':_0x37b99e(0x1f8),'warehouse_category':'Raw\x20Materials','name':{'$ne':_0x37b99e(0x1fa)}}},{'$group':{'_id':'$name','name':{'$first':_0x37b99e(0x1f1)}}}]);_0x30ac9f[_0x37b99e(0x20f)](_0x26515e);}else{const _0x3810c7=await warehouse[_0x37b99e(0x20c)]([{'$match':{'status':'Enabled','warehouse_category':_0x37b99e(0x202),'name':{'$ne':_0x37b99e(0x1fa)}}},{'$group':{'_id':_0x37b99e(0x1f1),'name':{'$first':_0x37b99e(0x1f1)}}}]);_0x30ac9f[_0x37b99e(0x20f)](_0x3810c7);}}catch(_0x2dd4fc){console[_0x37b99e(0x204)](_0x37b99e(0x1f4),_0x2dd4fc),_0x30ac9f[_0x37b99e(0x211)](0xc8)['json']({'message':_0x2dd4fc['message']});}}),router[a0_0xbd87d9(0x207)](a0_0xbd87d9(0x206),async(_0xf747e1,_0x1514de)=>{const _0x7c7d0f=a0_0xbd87d9;try{const _0x5b3902=await suppliers[_0x7c7d0f(0x1f2)]({});_0x1514de[_0x7c7d0f(0x211)](0xc8)[_0x7c7d0f(0x20f)](_0x5b3902);}catch(_0x5401e7){console[_0x7c7d0f(0x204)](_0x7c7d0f(0x1f4),_0x5401e7),_0x1514de[_0x7c7d0f(0x211)](0xc8)[_0x7c7d0f(0x20f)]({'message':_0x5401e7[_0x7c7d0f(0x1f9)]});}}),router['post'](a0_0xbd87d9(0x200),async(_0x49dd9b,_0x27e1b5)=>{const _0x34de0a=a0_0xbd87d9;try{const {wahouse_data:_0x4e9503}=_0x49dd9b['body'],_0x5503c0=[{'$match':{'name':_0x4e9503,'status':_0x34de0a(0x1f8)}},{'$group':{'_id':_0x34de0a(0x20e),'room_name':{'$first':_0x34de0a(0x203)}}},{'$sort':{'room_name':0x1}}],_0x35ca5a=await warehouse['aggregate'](_0x5503c0);_0x27e1b5['status'](0xc8)['json'](_0x35ca5a);}catch(_0x2d1e6e){console['log']('table\x20page',_0x2d1e6e),_0x27e1b5[_0x34de0a(0x211)](0xc8)[_0x34de0a(0x20f)]({'message':_0x2d1e6e[_0x34de0a(0x1f9)]});}}),router[a0_0xbd87d9(0x207)]('/invoice',async(_0x43c03d,_0x4423a5)=>{const _0x12d22c=a0_0xbd87d9;try{const _0x5a6c97=0x989680,_0x128b70=0x5f5e0ff,_0x56b27f=Math[_0x12d22c(0x20b)](Math[_0x12d22c(0x1f7)]()*(_0x128b70-_0x5a6c97+0x1))+_0x5a6c97;var _0x323771;const _0x46254c=await purchases['findOne']({'invoice':'INC-'+_0x56b27f});return _0x46254c&&_0x46254c['length']>0x0?_0x323771=_0x12d22c(0x1fd)+_0x56b27f:_0x323771=_0x12d22c(0x1fd)+_0x56b27f,_0x4423a5[_0x12d22c(0x20f)]({'incoming_invoice':_0x323771}),_0x323771;}catch(_0xbbcb70){console[_0x12d22c(0x204)](_0x12d22c(0x1f4),_0xbbcb70),_0x4423a5[_0x12d22c(0x211)](0xc8)['json']({'message':_0xbbcb70[_0x12d22c(0x1f9)]});}}),module[a0_0xbd87d9(0x20d)]=router;