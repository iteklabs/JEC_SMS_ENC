const a0_0x811b2c=a0_0x5ab8;(function(_0xbfd990,_0x52d7a0){const _0x28fc71=a0_0x5ab8,_0x114b0b=_0xbfd990();while(!![]){try{const _0x3e8d0f=parseInt(_0x28fc71(0x137))/0x1*(-parseInt(_0x28fc71(0x13c))/0x2)+parseInt(_0x28fc71(0x129))/0x3+-parseInt(_0x28fc71(0x14b))/0x4*(parseInt(_0x28fc71(0x149))/0x5)+parseInt(_0x28fc71(0x13a))/0x6+-parseInt(_0x28fc71(0x141))/0x7+parseInt(_0x28fc71(0x12b))/0x8*(parseInt(_0x28fc71(0x146))/0x9)+parseInt(_0x28fc71(0x126))/0xa*(-parseInt(_0x28fc71(0x136))/0xb);if(_0x3e8d0f===_0x52d7a0)break;else _0x114b0b['push'](_0x114b0b['shift']());}catch(_0x19cfa6){_0x114b0b['push'](_0x114b0b['shift']());}}}(a0_0x247b,0x2b557));const express=require(a0_0x811b2c(0x135)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x811b2c(0x132)),auth=require(a0_0x811b2c(0x128)),nodemailer=require(a0_0x811b2c(0x12f));function a0_0x5ab8(_0x5b386a,_0x2ec86b){const _0x247b5c=a0_0x247b();return a0_0x5ab8=function(_0x5ab8f4,_0x2c8130){_0x5ab8f4=_0x5ab8f4-0x125;let _0x103798=_0x247b5c[_0x5ab8f4];return _0x103798;},a0_0x5ab8(_0x5b386a,_0x2ec86b);}var ejs=require(a0_0x811b2c(0x138));const path=require(a0_0x811b2c(0x139)),users=require(a0_0x811b2c(0x12e));router['post'](a0_0x811b2c(0x131),async(_0x192cde,_0x106b5b)=>{const _0xa46793=a0_0x811b2c;try{const {warehouse_category:_0xb6dad5}=_0x192cde[_0xa46793(0x13e)];if(_0xb6dad5=='RM'){const _0x65a97b=await warehouse[_0xa46793(0x13d)]([{'$match':{'status':_0xa46793(0x145),'warehouse_category':'Raw\x20Materials','name':{'$ne':_0xa46793(0x130)}}},{'$group':{'_id':_0xa46793(0x144),'name':{'$first':_0xa46793(0x144)}}}]);_0x106b5b[_0xa46793(0x125)](_0x65a97b);}else{const _0x5323d9=await warehouse['aggregate']([{'$match':{'status':_0xa46793(0x145),'warehouse_category':'Finished\x20Goods','name':{'$ne':_0xa46793(0x130)}}},{'$group':{'_id':_0xa46793(0x144),'name':{'$first':'$name'}}}]);_0x106b5b[_0xa46793(0x125)](_0x5323d9);}}catch(_0x34df8d){console['log'](_0xa46793(0x14a),_0x34df8d),_0x106b5b['status'](0xc8)[_0xa46793(0x125)]({'message':_0x34df8d['message']});}}),router[a0_0x811b2c(0x12c)](a0_0x811b2c(0x147),async(_0x155dd6,_0x130aae)=>{const _0x192737=a0_0x811b2c;try{const _0x452dc6=await suppliers[_0x192737(0x140)]({});_0x130aae[_0x192737(0x148)](0xc8)['json'](_0x452dc6);}catch(_0x3f79c9){console['log'](_0x192737(0x14a),_0x3f79c9),_0x130aae['status'](0xc8)[_0x192737(0x125)]({'message':_0x3f79c9[_0x192737(0x143)]});}}),router[a0_0x811b2c(0x12c)](a0_0x811b2c(0x133),async(_0x57d82e,_0x4a7812)=>{const _0x411834=a0_0x811b2c;try{const {wahouse_data:_0x22886b}=_0x57d82e['body'],_0x39ad63=[{'$match':{'name':_0x22886b,'status':'Enabled'}},{'$group':{'_id':_0x411834(0x13f),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}],_0x1434c6=await warehouse[_0x411834(0x13d)](_0x39ad63);_0x4a7812[_0x411834(0x148)](0xc8)[_0x411834(0x125)](_0x1434c6);}catch(_0x1bbba5){console[_0x411834(0x12d)](_0x411834(0x14a),_0x1bbba5),_0x4a7812[_0x411834(0x148)](0xc8)[_0x411834(0x125)]({'message':_0x1bbba5[_0x411834(0x143)]});}}),router['post'](a0_0x811b2c(0x14c),async(_0x1dbe98,_0x14e5d9)=>{const _0x5e2aca=a0_0x811b2c;try{const _0x50af5f=0x989680,_0x5e56d1=0x5f5e0ff,_0x19069b=Math[_0x5e2aca(0x142)](Math[_0x5e2aca(0x12a)]()*(_0x5e56d1-_0x50af5f+0x1))+_0x50af5f;var _0x398193;const _0x745f6=await purchases['findOne']({'invoice':_0x5e2aca(0x13b)+_0x19069b});return _0x745f6&&_0x745f6[_0x5e2aca(0x127)]>0x0?_0x398193=_0x5e2aca(0x13b)+_0x19069b:_0x398193=_0x5e2aca(0x13b)+_0x19069b,_0x14e5d9[_0x5e2aca(0x125)]({'incoming_invoice':_0x398193}),_0x398193;}catch(_0x119a59){console[_0x5e2aca(0x12d)](_0x5e2aca(0x14a),_0x119a59),_0x14e5d9[_0x5e2aca(0x148)](0xc8)[_0x5e2aca(0x125)]({'message':_0x119a59[_0x5e2aca(0x143)]});}}),module[a0_0x811b2c(0x134)]=router;function a0_0x247b(){const _0x1ba7b3=['220140DcjxlD','aggregate','body','$_id','find','1691564cultXw','floor','message','$name','Enabled','2230929PucTNf','/supplier','status','397685whFHhO','table\x20page','4gAALyM','/invoice','json','150ZPuOpi','length','../middleware/auth','370611zasmRy','random','8whfEym','post','log','../public/language/languages.json','nodemailer','Return\x20Goods','/view','../models/all_models','/room','exports','express','36861nwcGMk','1xmnose','ejs','path','1725606xLieOs','INC-'];a0_0x247b=function(){return _0x1ba7b3;};return a0_0x247b();}