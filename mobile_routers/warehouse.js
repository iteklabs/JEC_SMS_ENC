const a0_0x351215=a0_0x180a;function a0_0x5984(){const _0x33f0be=['express','log','88578frAmDG','437311tiiUoG','INC-','/room','24KTXdqb','../models/all_models','402OhuQrs','body','Enabled','47171QQpxIQ','json','28OMzDnc','12bcrbRv','/view','$name','findOne','exports','36670GLweEq','find','/invoice','table\x20page','ejs','post','/supplier','Router','$room','../middleware/auth','status','message','Return\x20Goods','8FIoKuU','1220860UCmQDO','path','../public/language/languages.json','2519rhJaei','11815219hJwQNy','2390Uzrvla','aggregate'];a0_0x5984=function(){return _0x33f0be;};return a0_0x5984();}(function(_0x279921,_0x355871){const _0x45c070=a0_0x180a,_0x3086a4=_0x279921();while(!![]){try{const _0x1a1dcc=-parseInt(_0x45c070(0x1bb))/0x1*(-parseInt(_0x45c070(0x1bd))/0x2)+-parseInt(_0x45c070(0x1be))/0x3*(-parseInt(_0x45c070(0x1a9))/0x4)+parseInt(_0x45c070(0x1ae))/0x5*(-parseInt(_0x45c070(0x1b8))/0x6)+-parseInt(_0x45c070(0x1b3))/0x7*(parseInt(_0x45c070(0x1a8))/0x8)+parseInt(_0x45c070(0x1b2))/0x9+parseInt(_0x45c070(0x19b))/0xa*(parseInt(_0x45c070(0x1ac))/0xb)+-parseInt(_0x45c070(0x1b6))/0xc*(parseInt(_0x45c070(0x1ad))/0xd);if(_0x1a1dcc===_0x355871)break;else _0x3086a4['push'](_0x3086a4['shift']());}catch(_0x1e6c5b){_0x3086a4['push'](_0x3086a4['shift']());}}}(a0_0x5984,0xc7db6));const express=require(a0_0x351215(0x1b0)),app=express(),router=express[a0_0x351215(0x1a2)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x351215(0x1b7)),auth=require(a0_0x351215(0x1a4)),nodemailer=require('nodemailer');var ejs=require(a0_0x351215(0x19f));function a0_0x180a(_0x35c8c4,_0x7a01f){const _0x59840b=a0_0x5984();return a0_0x180a=function(_0x180aed,_0x593a5d){_0x180aed=_0x180aed-0x19a;let _0x260e8a=_0x59840b[_0x180aed];return _0x260e8a;},a0_0x180a(_0x35c8c4,_0x7a01f);}const path=require(a0_0x351215(0x1aa)),users=require(a0_0x351215(0x1ab));router[a0_0x351215(0x1a0)](a0_0x351215(0x1bf),async(_0x708958,_0x3b10a7)=>{const _0x1df9ff=a0_0x351215;try{const {warehouse_category:_0x51fa95}=_0x708958[_0x1df9ff(0x1b9)];if(_0x51fa95=='RM'){const _0x53f180=await warehouse[_0x1df9ff(0x1af)]([{'$match':{'status':_0x1df9ff(0x1ba),'warehouse_category':'Raw\x20Materials','name':{'$ne':_0x1df9ff(0x1a7)}}},{'$group':{'_id':'$name','name':{'$first':_0x1df9ff(0x1c0)}}}]);_0x3b10a7[_0x1df9ff(0x1bc)](_0x53f180);}else{const _0x51ef50=await warehouse['aggregate']([{'$match':{'status':_0x1df9ff(0x1ba),'warehouse_category':'Finished\x20Goods','name':{'$ne':_0x1df9ff(0x1a7)}}},{'$group':{'_id':'$name','name':{'$first':_0x1df9ff(0x1c0)}}}]);_0x3b10a7['json'](_0x51ef50);}}catch(_0x231306){console[_0x1df9ff(0x1b1)](_0x1df9ff(0x19e),_0x231306),_0x3b10a7['status'](0xc8)[_0x1df9ff(0x1bc)]({'message':_0x231306[_0x1df9ff(0x1a6)]});}}),router[a0_0x351215(0x1a0)](a0_0x351215(0x1a1),async(_0x164b78,_0x5868b7)=>{const _0x35059b=a0_0x351215;try{const _0x17143a=await suppliers[_0x35059b(0x19c)]({});_0x5868b7[_0x35059b(0x1a5)](0xc8)['json'](_0x17143a);}catch(_0x1e9607){console['log']('table\x20page',_0x1e9607),_0x5868b7['status'](0xc8)[_0x35059b(0x1bc)]({'message':_0x1e9607[_0x35059b(0x1a6)]});}}),router[a0_0x351215(0x1a0)](a0_0x351215(0x1b5),async(_0x21a2c1,_0x9efcb4)=>{const _0x290032=a0_0x351215;try{const {wahouse_data:_0x53f1a0}=_0x21a2c1[_0x290032(0x1b9)],_0x2cabfa=[{'$match':{'name':_0x53f1a0,'status':_0x290032(0x1ba)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x290032(0x1a3)}}},{'$sort':{'room_name':0x1}}],_0x15bfa8=await warehouse[_0x290032(0x1af)](_0x2cabfa);_0x9efcb4[_0x290032(0x1a5)](0xc8)[_0x290032(0x1bc)](_0x15bfa8);}catch(_0x5f4b41){console['log'](_0x290032(0x19e),_0x5f4b41),_0x9efcb4[_0x290032(0x1a5)](0xc8)['json']({'message':_0x5f4b41['message']});}}),router['post'](a0_0x351215(0x19d),async(_0x101222,_0x16d652)=>{const _0x125e42=a0_0x351215;try{const _0x5ca32a=0x989680,_0x2db69a=0x5f5e0ff,_0x4c0baf=Math['floor'](Math['random']()*(_0x2db69a-_0x5ca32a+0x1))+_0x5ca32a;var _0x1c87b2;const _0x2cd9be=await purchases[_0x125e42(0x1c1)]({'invoice':_0x125e42(0x1b4)+_0x4c0baf});return _0x2cd9be&&_0x2cd9be['length']>0x0?_0x1c87b2='INC-'+_0x4c0baf:_0x1c87b2='INC-'+_0x4c0baf,_0x16d652[_0x125e42(0x1bc)]({'incoming_invoice':_0x1c87b2}),_0x1c87b2;}catch(_0x46b4bf){console[_0x125e42(0x1b1)](_0x125e42(0x19e),_0x46b4bf),_0x16d652[_0x125e42(0x1a5)](0xc8)[_0x125e42(0x1bc)]({'message':_0x46b4bf['message']});}}),module[a0_0x351215(0x19a)]=router;