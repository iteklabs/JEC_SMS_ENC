const a0_0x2daa44=a0_0x3979;function a0_0x3979(_0x5c3ade,_0x370dc0){const _0x53f8d9=a0_0x53f8();return a0_0x3979=function(_0x397920,_0x5f4de8){_0x397920=_0x397920-0xfe;let _0x173305=_0x53f8d9[_0x397920];return _0x173305;},a0_0x3979(_0x5c3ade,_0x370dc0);}function a0_0x53f8(){const _0x888267=['aggregate','find','ejs','/room','message','51sqIflV','83452bBGZQg','5257764ABjVbW','$_id','890025IqmoPK','24oPeCVR','express','Return\x20Goods','/invoice','Router','exports','findOne','$room','nodemailer','status','../public/language/languages.json','Enabled','table\x20page','14YIvEvM','random','json','5121936cbWcTf','Raw\x20Materials','path','14316910JcmSIf','body','log','post','11301705MvocEh','$name','1181095ixCdyD','../middleware/auth','INC-'];a0_0x53f8=function(){return _0x888267;};return a0_0x53f8();}(function(_0x4887ee,_0xb3d1e5){const _0xd04918=a0_0x3979,_0x54556d=_0x4887ee();while(!![]){try{const _0x4f6ae4=parseInt(_0xd04918(0xfe))/0x1+parseInt(_0xd04918(0x121))/0x2*(parseInt(_0xd04918(0x120))/0x3)+-parseInt(_0xd04918(0x122))/0x4+parseInt(_0xd04918(0x118))/0x5*(-parseInt(_0xd04918(0xff))/0x6)+-parseInt(_0xd04918(0x10c))/0x7*(-parseInt(_0xd04918(0x10f))/0x8)+-parseInt(_0xd04918(0x116))/0x9+parseInt(_0xd04918(0x112))/0xa;if(_0x4f6ae4===_0xb3d1e5)break;else _0x54556d['push'](_0x54556d['shift']());}catch(_0x37f1e2){_0x54556d['push'](_0x54556d['shift']());}}}(a0_0x53f8,0xc2740));const express=require(a0_0x2daa44(0x100)),app=express(),router=express[a0_0x2daa44(0x103)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x2daa44(0x119)),nodemailer=require(a0_0x2daa44(0x107));var ejs=require(a0_0x2daa44(0x11d));const path=require(a0_0x2daa44(0x111)),users=require(a0_0x2daa44(0x109));router[a0_0x2daa44(0x115)]('/view',async(_0x50d32d,_0x5005d6)=>{const _0x3e5a19=a0_0x2daa44;try{const {warehouse_category:_0x363bc1}=_0x50d32d['body'];if(_0x363bc1=='RM'){const _0x4768cb=await warehouse[_0x3e5a19(0x11b)]([{'$match':{'status':_0x3e5a19(0x10a),'warehouse_category':_0x3e5a19(0x110),'name':{'$ne':_0x3e5a19(0x101)}}},{'$group':{'_id':'$name','name':{'$first':_0x3e5a19(0x117)}}}]);_0x5005d6[_0x3e5a19(0x10e)](_0x4768cb);}else{const _0xabf270=await warehouse[_0x3e5a19(0x11b)]([{'$match':{'status':_0x3e5a19(0x10a),'warehouse_category':'Finished\x20Goods','name':{'$ne':_0x3e5a19(0x101)}}},{'$group':{'_id':_0x3e5a19(0x117),'name':{'$first':_0x3e5a19(0x117)}}}]);_0x5005d6['json'](_0xabf270);}}catch(_0x593b1f){console[_0x3e5a19(0x114)](_0x3e5a19(0x10b),_0x593b1f),_0x5005d6[_0x3e5a19(0x108)](0xc8)[_0x3e5a19(0x10e)]({'message':_0x593b1f[_0x3e5a19(0x11f)]});}}),router[a0_0x2daa44(0x115)]('/supplier',async(_0x318303,_0x4837ff)=>{const _0x1321f5=a0_0x2daa44;try{const _0x2a6d9d=await suppliers[_0x1321f5(0x11c)]({});_0x4837ff[_0x1321f5(0x108)](0xc8)['json'](_0x2a6d9d);}catch(_0x46e950){console['log'](_0x1321f5(0x10b),_0x46e950),_0x4837ff[_0x1321f5(0x108)](0xc8)[_0x1321f5(0x10e)]({'message':_0x46e950[_0x1321f5(0x11f)]});}}),router[a0_0x2daa44(0x115)](a0_0x2daa44(0x11e),async(_0x118105,_0xf9a8c9)=>{const _0xe293e7=a0_0x2daa44;try{const {wahouse_data:_0x7601d3}=_0x118105[_0xe293e7(0x113)],_0x473160=[{'$match':{'name':_0x7601d3,'status':_0xe293e7(0x10a)}},{'$group':{'_id':_0xe293e7(0x123),'room_name':{'$first':_0xe293e7(0x106)}}},{'$sort':{'room_name':0x1}}],_0x56273f=await warehouse['aggregate'](_0x473160);_0xf9a8c9[_0xe293e7(0x108)](0xc8)[_0xe293e7(0x10e)](_0x56273f);}catch(_0x1923f1){console['log'](_0xe293e7(0x10b),_0x1923f1),_0xf9a8c9[_0xe293e7(0x108)](0xc8)[_0xe293e7(0x10e)]({'message':_0x1923f1['message']});}}),router[a0_0x2daa44(0x115)](a0_0x2daa44(0x102),async(_0x172df8,_0x44953f)=>{const _0x51027a=a0_0x2daa44;try{const _0x2b75e6=0x989680,_0x178804=0x5f5e0ff,_0x596d6e=Math['floor'](Math[_0x51027a(0x10d)]()*(_0x178804-_0x2b75e6+0x1))+_0x2b75e6;var _0x1e4ab2;const _0x50c338=await purchases[_0x51027a(0x105)]({'invoice':'INC-'+_0x596d6e});return _0x50c338&&_0x50c338['length']>0x0?_0x1e4ab2=_0x51027a(0x11a)+_0x596d6e:_0x1e4ab2='INC-'+_0x596d6e,_0x44953f['json']({'incoming_invoice':_0x1e4ab2}),_0x1e4ab2;}catch(_0x28867e){console[_0x51027a(0x114)](_0x51027a(0x10b),_0x28867e),_0x44953f[_0x51027a(0x108)](0xc8)['json']({'message':_0x28867e['message']});}}),module[a0_0x2daa44(0x104)]=router;