function a0_0x5785(_0x5ca620,_0x8a4e75){const _0x5b7231=a0_0x5b72();return a0_0x5785=function(_0x5785ae,_0x488729){_0x5785ae=_0x5785ae-0xd7;let _0x92526b=_0x5b7231[_0x5785ae];return _0x92526b;},a0_0x5785(_0x5ca620,_0x8a4e75);}const a0_0x4cb428=a0_0x5785;function a0_0x5b72(){const _0x78e946=['1040523ICJSng','732456QAOyHv','$product.room_name','$batch_code','$product.quantity','json','suppliers','$invoice','../middleware/auth','express','end','$secondary_unit','$note','$maxProdPerUnit','$suppliers_docs','$finalize','post','2233pEFkJZ','body','$category','$product.bay','$due_amount','ejs','$maxStocks','../models/all_models','7140336ZLqOQR','path','$product.bin','9612QNunBe','2947468WKnmZQ','$_id','message','length','90VEUvLO','$secondary_code','$product.type','$alertquantity','538608MhWNmG','$warehouse_name','$date','5zpKLAX','652733uWNTGJ','$brand','table\x20page','Raw\x20Materials','$unit','nodemailer','name','/view','2ncBMZJ','query','start','$product','$primary_code','aggregate','$product_code','status','$suppliers','$paid_amount'];a0_0x5b72=function(){return _0x78e946;};return a0_0x5b72();}(function(_0x4d683b,_0x30ffe6){const _0x3e1864=a0_0x5785,_0x156821=_0x4d683b();while(!![]){try{const _0xc87ce5=parseInt(_0x3e1864(0xff))/0x1*(parseInt(_0x3e1864(0x107))/0x2)+parseInt(_0x3e1864(0xfb))/0x3+-parseInt(_0x3e1864(0xf3))/0x4*(parseInt(_0x3e1864(0xfe))/0x5)+-parseInt(_0x3e1864(0xf2))/0x6*(-parseInt(_0x3e1864(0xe7))/0x7)+-parseInt(_0x3e1864(0xef))/0x8+-parseInt(_0x3e1864(0xd7))/0x9+-parseInt(_0x3e1864(0xf7))/0xa*(-parseInt(_0x3e1864(0x111))/0xb);if(_0xc87ce5===_0x30ffe6)break;else _0x156821['push'](_0x156821['shift']());}catch(_0x49ee01){_0x156821['push'](_0x156821['shift']());}}}(a0_0x5b72,0x7620b));const express=require(a0_0x4cb428(0xdf)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x4cb428(0xee)),auth=require(a0_0x4cb428(0xde)),nodemailer=require(a0_0x4cb428(0x104));var ejs=require(a0_0x4cb428(0xec));const path=require(a0_0x4cb428(0xf0)),users=require('../public/language/languages.json');router['get'](a0_0x4cb428(0x106),async(_0x378422,_0x2c7ddb)=>{const _0x387a61=a0_0x4cb428;try{const _0x44efff=parseInt(_0x378422[_0x387a61(0x108)][_0x387a61(0x109)])||0x0,_0x43b39e=parseInt(_0x378422[_0x387a61(0x108)][_0x387a61(0xe0)])||0xa;let _0x27ec4b;_0x27ec4b=await purchases['aggregate']([{'$lookup':{'from':_0x387a61(0xdc),'localField':_0x387a61(0xdc),'foreignField':_0x387a61(0x105),'as':'suppliers_docs'}},{'$unwind':_0x387a61(0xe4)},{'$unwind':_0x387a61(0x10a)},{'$group':{'_id':_0x387a61(0xf4),'invoice':{'$first':_0x387a61(0xdd)},'suppliers':{'$first':_0x387a61(0x10f)},'date':{'$first':_0x387a61(0xfd)},'warehouse_name':{'$first':_0x387a61(0xfc)},'room':{'$addToSet':_0x387a61(0xd8)},'product':{'$push':_0x387a61(0x10a)},'note':{'$first':_0x387a61(0xe2)},'paid_amount':{'$first':_0x387a61(0x110)},'due_amount':{'$first':_0x387a61(0xeb)},'return_data':{'$first':'$return_data'},'batch_code':{'$first':_0x387a61(0xd9)},'expiry_date':{'$first':'$expiry_date'},'suppliers_docs':{'$first':_0x387a61(0xe4)},'total_product_quantity':{'$sum':_0x387a61(0xda)},'level':{'$addToSet':_0x387a61(0xea)},'isle':{'$addToSet':_0x387a61(0xf1)},'type':{'$addToSet':_0x387a61(0xf9)},'floorlevel':{'$addToSet':'$product.floorlevel'},'finalize':{'$first':_0x387a61(0xe5)}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x44efff},{'$limit':_0x43b39e-_0x44efff}]),_0x2c7ddb['json'](_0x27ec4b);}catch(_0x59ae60){console['log'](_0x387a61(0x101),_0x59ae60),_0x2c7ddb[_0x387a61(0x10e)](0xc8)[_0x387a61(0xdb)]({'message':_0x59ae60[_0x387a61(0xf5)]});}}),router[a0_0x4cb428(0xe6)]('/barcode_scanner',async(_0x2ac218,_0x3cc7a9)=>{const _0x1c2177=a0_0x4cb428,{product_code:_0xd1b900}=_0x2ac218[_0x1c2177(0xe8)];var _0x5d2646;const _0x52ed8b=await product[_0x1c2177(0x10c)]([{'$match':{'primary_code':_0xd1b900,'product_category':_0x1c2177(0x102)}},{'$group':{'_id':_0x1c2177(0xf4),'name':{'$first':'$name'},'category':{'$first':_0x1c2177(0xe9)},'brand':{'$first':'$brand'},'unit':{'$first':_0x1c2177(0x103)},'alertquantity':{'$first':_0x1c2177(0xfa)},'product_code':{'$first':_0x1c2177(0x10d)},'primary_code':{'$first':_0x1c2177(0x10b)},'secondary_code':{'$first':_0x1c2177(0xf8)},'maxStocks':{'$first':_0x1c2177(0xed)},'maxProdPerUnit':{'$first':_0x1c2177(0xe3)},'product_cat':{'$first':'P'},'secondary_unit':{'$first':_0x1c2177(0xe1)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x3d9138=await product[_0x1c2177(0x10c)]([{'$match':{'secondary_code':_0xd1b900,'product_category':_0x1c2177(0x102)}},{'$group':{'_id':_0x1c2177(0xf4),'name':{'$first':'$name'},'category':{'$first':_0x1c2177(0xe9)},'brand':{'$first':_0x1c2177(0x100)},'unit':{'$first':_0x1c2177(0x103)},'alertquantity':{'$first':_0x1c2177(0xfa)},'product_code':{'$first':'$product_code'},'primary_code':{'$first':_0x1c2177(0x10b)},'secondary_code':{'$first':_0x1c2177(0xf8)},'maxStocks':{'$first':_0x1c2177(0xed)},'maxProdPerUnit':{'$first':_0x1c2177(0xe3)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':_0x1c2177(0xe1)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x52ed8b[_0x1c2177(0xf6)]>0x0)_0x5d2646=_0x52ed8b;else _0x3d9138['length']>0x0&&(_0x5d2646=_0x3d9138);_0x3cc7a9['json'](_0x5d2646);}),module['exports']=router;