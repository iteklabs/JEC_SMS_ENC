function a0_0x5f43(_0x4151a4,_0x3183f6){const _0x7d5ca9=a0_0x7d5c();return a0_0x5f43=function(_0x5f43db,_0x2daae0){_0x5f43db=_0x5f43db-0xa5;let _0x43183c=_0x7d5ca9[_0x5f43db];return _0x43183c;},a0_0x5f43(_0x4151a4,_0x3183f6);}const a0_0x512998=a0_0x5f43;(function(_0xda2cb5,_0x4c1343){const _0x549d89=a0_0x5f43,_0x3c31e8=_0xda2cb5();while(!![]){try{const _0x37b412=parseInt(_0x549d89(0xbd))/0x1+-parseInt(_0x549d89(0xb4))/0x2*(-parseInt(_0x549d89(0xd3))/0x3)+parseInt(_0x549d89(0xaa))/0x4+parseInt(_0x549d89(0xb5))/0x5*(parseInt(_0x549d89(0xd0))/0x6)+parseInt(_0x549d89(0xb0))/0x7*(-parseInt(_0x549d89(0xc6))/0x8)+-parseInt(_0x549d89(0xc8))/0x9+-parseInt(_0x549d89(0xc9))/0xa;if(_0x37b412===_0x4c1343)break;else _0x3c31e8['push'](_0x3c31e8['shift']());}catch(_0xa29d03){_0x3c31e8['push'](_0x3c31e8['shift']());}}}(a0_0x7d5c,0x9dacb));const express=require(a0_0x512998(0xba)),app=express(),router=express[a0_0x512998(0xaf)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x512998(0xc1)),nodemailer=require('nodemailer');var ejs=require(a0_0x512998(0xb7));const path=require('path'),users=require('../public/language/languages.json');function a0_0x7d5c(){const _0x97a0e0=['length','1301262nwyORj','$warehouse_name','/barcode_scanner','48AtBHKj','get','query','$suppliers','$primary_code','$product.bay','$due_amount','body','/view','start','$product.quantity','$product.type','suppliers_docs','2304364EttKRz','$note','$product_code','$paid_amount','$unit','Router','174132BtMhLB','$secondary_code','$product','$_id','128132Wmvywh','5pVhRQa','$maxStocks','ejs','$maxProdPerUnit','$suppliers_docs','express','$secondary_unit','end','1158880SrVClg','$product.bin','$brand','exports','../middleware/auth','$category','$product.floorlevel','log','message','328GDeuWe','json','1188351fglkOK','11791140aTqkQL','name','table\x20page','$name','post','aggregate'];a0_0x7d5c=function(){return _0x97a0e0;};return a0_0x7d5c();}router[a0_0x512998(0xd4)](a0_0x512998(0xa5),async(_0x2f411b,_0x55cc81)=>{const _0x4df973=a0_0x512998;try{const _0x1c43eb=parseInt(_0x2f411b[_0x4df973(0xd5)][_0x4df973(0xa6)])||0x0,_0x49f57d=parseInt(_0x2f411b[_0x4df973(0xd5)][_0x4df973(0xbc)])||0xa;let _0x267256;_0x267256=await purchases[_0x4df973(0xce)]([{'$lookup':{'from':'suppliers','localField':'suppliers','foreignField':_0x4df973(0xca),'as':_0x4df973(0xa9)}},{'$unwind':_0x4df973(0xb9)},{'$unwind':'$product'},{'$group':{'_id':_0x4df973(0xb3),'invoice':{'$first':'$invoice'},'suppliers':{'$first':_0x4df973(0xd6)},'date':{'$first':'$date'},'warehouse_name':{'$first':_0x4df973(0xd1)},'room':{'$addToSet':'$product.room_name'},'product':{'$push':_0x4df973(0xb2)},'note':{'$first':_0x4df973(0xab)},'paid_amount':{'$first':_0x4df973(0xad)},'due_amount':{'$first':_0x4df973(0xd9)},'return_data':{'$first':'$return_data'},'batch_code':{'$first':'$batch_code'},'expiry_date':{'$first':'$expiry_date'},'suppliers_docs':{'$first':_0x4df973(0xb9)},'total_product_quantity':{'$sum':_0x4df973(0xa7)},'level':{'$addToSet':_0x4df973(0xd8)},'isle':{'$addToSet':_0x4df973(0xbe)},'type':{'$addToSet':_0x4df973(0xa8)},'floorlevel':{'$addToSet':_0x4df973(0xc3)},'finalize':{'$first':'$finalize'}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x1c43eb},{'$limit':_0x49f57d-_0x1c43eb}]),_0x55cc81['json'](_0x267256);}catch(_0x432dc9){console[_0x4df973(0xc4)](_0x4df973(0xcb),_0x432dc9),_0x55cc81['status'](0xc8)[_0x4df973(0xc7)]({'message':_0x432dc9[_0x4df973(0xc5)]});}}),router[a0_0x512998(0xcd)](a0_0x512998(0xd2),async(_0x342787,_0x42826e)=>{const _0x2cadd2=a0_0x512998,{product_code:_0x14ea3b}=_0x342787[_0x2cadd2(0xda)];var _0x3dc386;const _0x179b66=await product['aggregate']([{'$match':{'primary_code':_0x14ea3b,'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x2cadd2(0xb3),'name':{'$first':_0x2cadd2(0xcc)},'category':{'$first':_0x2cadd2(0xc2)},'brand':{'$first':_0x2cadd2(0xbf)},'unit':{'$first':'$unit'},'alertquantity':{'$first':'$alertquantity'},'product_code':{'$first':_0x2cadd2(0xac)},'primary_code':{'$first':_0x2cadd2(0xd7)},'secondary_code':{'$first':'$secondary_code'},'maxStocks':{'$first':_0x2cadd2(0xb6)},'maxProdPerUnit':{'$first':_0x2cadd2(0xb8)},'product_cat':{'$first':'P'},'secondary_unit':{'$first':'$secondary_unit'}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x3691a8=await product['aggregate']([{'$match':{'secondary_code':_0x14ea3b,'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x2cadd2(0xb3),'name':{'$first':_0x2cadd2(0xcc)},'category':{'$first':_0x2cadd2(0xc2)},'brand':{'$first':_0x2cadd2(0xbf)},'unit':{'$first':_0x2cadd2(0xae)},'alertquantity':{'$first':'$alertquantity'},'product_code':{'$first':_0x2cadd2(0xac)},'primary_code':{'$first':_0x2cadd2(0xd7)},'secondary_code':{'$first':_0x2cadd2(0xb1)},'maxStocks':{'$first':_0x2cadd2(0xb6)},'maxProdPerUnit':{'$first':'$maxProdPerUnit'},'product_cat':{'$first':'S'},'secondary_unit':{'$first':_0x2cadd2(0xbb)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x179b66[_0x2cadd2(0xcf)]>0x0)_0x3dc386=_0x179b66;else _0x3691a8[_0x2cadd2(0xcf)]>0x0&&(_0x3dc386=_0x3691a8);_0x42826e[_0x2cadd2(0xc7)](_0x3dc386);}),module[a0_0x512998(0xc0)]=router;