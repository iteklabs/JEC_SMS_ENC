function a0_0x1949(){const _0x30991d=['path','$secondary_unit','json','2519udMUWM','../middleware/auth','$product','11300IjqOap','name','../models/all_models','$product_code','start','log','$product.quantity','$note','suppliers_docs','length','$product.type','45530ebbJmk','$suppliers','$invoice','$product.bin','ejs','suppliers','$name','nodemailer','1389438ubqZZi','$suppliers_docs','$date','$batch_code','$secondary_code','85zqtMbH','/view','status','exports','$brand','$finalize','/barcode_scanner','335868eYCLPc','$alertquantity','948053uwxIEk','$_id','$warehouse_name','$primary_code','body','7172577zofBWX','end','$unit','14wvLzlz','1041WfFqSn','2469776Jbvikt','$due_amount','Raw\x20Materials','aggregate','$expiry_date','$product.bay','$maxStocks','table\x20page','$return_data','query','$maxProdPerUnit','$product.floorlevel'];a0_0x1949=function(){return _0x30991d;};return a0_0x1949();}const a0_0x456777=a0_0x4041;(function(_0x1d2066,_0xb20099){const _0x4d5e0a=a0_0x4041,_0x308811=_0x1d2066();while(!![]){try{const _0x222e97=-parseInt(_0x4d5e0a(0x7e))/0x1+parseInt(_0x4d5e0a(0xad))/0x2+parseInt(_0x4d5e0a(0x87))/0x3*(-parseInt(_0x4d5e0a(0x9a))/0x4)+parseInt(_0x4d5e0a(0xb2))/0x5*(parseInt(_0x4d5e0a(0x7c))/0x6)+-parseInt(_0x4d5e0a(0x86))/0x7*(-parseInt(_0x4d5e0a(0x88))/0x8)+-parseInt(_0x4d5e0a(0x83))/0x9+parseInt(_0x4d5e0a(0xa5))/0xa*(parseInt(_0x4d5e0a(0x97))/0xb);if(_0x222e97===_0xb20099)break;else _0x308811['push'](_0x308811['shift']());}catch(_0x448b21){_0x308811['push'](_0x308811['shift']());}}}(a0_0x1949,0x8de19));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x456777(0x9c)),auth=require(a0_0x456777(0x98)),nodemailer=require(a0_0x456777(0xac));var ejs=require(a0_0x456777(0xa9));const path=require(a0_0x456777(0x94)),users=require('../public/language/languages.json');function a0_0x4041(_0x3e42bc,_0xf2e0de){const _0x19495b=a0_0x1949();return a0_0x4041=function(_0x4041e6,_0x233786){_0x4041e6=_0x4041e6-0x76;let _0x4d84ba=_0x19495b[_0x4041e6];return _0x4d84ba;},a0_0x4041(_0x3e42bc,_0xf2e0de);}router['get'](a0_0x456777(0x76),async(_0x4fa49d,_0xbe6ae4)=>{const _0x510244=a0_0x456777;try{const _0x1df5ab=parseInt(_0x4fa49d[_0x510244(0x91)][_0x510244(0x9e)])||0x0,_0xadc61e=parseInt(_0x4fa49d['query'][_0x510244(0x84)])||0xa;let _0xe4e4e0;_0xe4e4e0=await purchases[_0x510244(0x8b)]([{'$lookup':{'from':_0x510244(0xaa),'localField':'suppliers','foreignField':_0x510244(0x9b),'as':_0x510244(0xa2)}},{'$unwind':'$suppliers_docs'},{'$unwind':'$product'},{'$group':{'_id':_0x510244(0x7f),'invoice':{'$first':_0x510244(0xa7)},'suppliers':{'$first':_0x510244(0xa6)},'date':{'$first':_0x510244(0xaf)},'warehouse_name':{'$first':_0x510244(0x80)},'room':{'$addToSet':'$product.room_name'},'product':{'$push':_0x510244(0x99)},'note':{'$first':_0x510244(0xa1)},'paid_amount':{'$first':'$paid_amount'},'due_amount':{'$first':_0x510244(0x89)},'return_data':{'$first':_0x510244(0x90)},'batch_code':{'$first':_0x510244(0xb0)},'expiry_date':{'$first':_0x510244(0x8c)},'suppliers_docs':{'$first':_0x510244(0xae)},'total_product_quantity':{'$sum':_0x510244(0xa0)},'level':{'$addToSet':_0x510244(0x8d)},'isle':{'$addToSet':_0x510244(0xa8)},'type':{'$addToSet':_0x510244(0xa4)},'floorlevel':{'$addToSet':_0x510244(0x93)},'finalize':{'$first':_0x510244(0x7a)}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x1df5ab},{'$limit':_0xadc61e-_0x1df5ab}]),_0xbe6ae4['json'](_0xe4e4e0);}catch(_0x2b8361){console[_0x510244(0x9f)](_0x510244(0x8f),_0x2b8361),_0xbe6ae4[_0x510244(0x77)](0xc8)[_0x510244(0x96)]({'message':_0x2b8361['message']});}}),router['post'](a0_0x456777(0x7b),async(_0xa03464,_0x429d07)=>{const _0x4eb045=a0_0x456777,{product_code:_0x424dde}=_0xa03464[_0x4eb045(0x82)];var _0x1f79e5;const _0x21ff33=await product['aggregate']([{'$match':{'primary_code':_0x424dde,'product_category':_0x4eb045(0x8a)}},{'$group':{'_id':_0x4eb045(0x7f),'name':{'$first':'$name'},'category':{'$first':'$category'},'brand':{'$first':_0x4eb045(0x79)},'unit':{'$first':_0x4eb045(0x85)},'alertquantity':{'$first':'$alertquantity'},'product_code':{'$first':_0x4eb045(0x9d)},'primary_code':{'$first':_0x4eb045(0x81)},'secondary_code':{'$first':'$secondary_code'},'maxStocks':{'$first':_0x4eb045(0x8e)},'maxProdPerUnit':{'$first':'$maxProdPerUnit'},'product_cat':{'$first':'P'},'secondary_unit':{'$first':_0x4eb045(0x95)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x309171=await product[_0x4eb045(0x8b)]([{'$match':{'secondary_code':_0x424dde,'product_category':_0x4eb045(0x8a)}},{'$group':{'_id':_0x4eb045(0x7f),'name':{'$first':_0x4eb045(0xab)},'category':{'$first':'$category'},'brand':{'$first':'$brand'},'unit':{'$first':'$unit'},'alertquantity':{'$first':_0x4eb045(0x7d)},'product_code':{'$first':_0x4eb045(0x9d)},'primary_code':{'$first':'$primary_code'},'secondary_code':{'$first':_0x4eb045(0xb1)},'maxStocks':{'$first':'$maxStocks'},'maxProdPerUnit':{'$first':_0x4eb045(0x92)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':'$secondary_unit'}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x21ff33[_0x4eb045(0xa3)]>0x0)_0x1f79e5=_0x21ff33;else _0x309171[_0x4eb045(0xa3)]>0x0&&(_0x1f79e5=_0x309171);_0x429d07[_0x4eb045(0x96)](_0x1f79e5);}),module[a0_0x456777(0x78)]=router;