function a0_0x3ba9(_0x2b231e,_0x59ba38){const _0x8bc453=a0_0x8bc4();return a0_0x3ba9=function(_0x3ba983,_0x4e2a3e){_0x3ba983=_0x3ba983-0x72;let _0x106d7e=_0x8bc453[_0x3ba983];return _0x106d7e;},a0_0x3ba9(_0x2b231e,_0x59ba38);}const a0_0x35ec04=a0_0x3ba9;(function(_0x5f58c3,_0x1e1550){const _0x269fc9=a0_0x3ba9,_0x276158=_0x5f58c3();while(!![]){try{const _0x57c323=parseInt(_0x269fc9(0x94))/0x1*(-parseInt(_0x269fc9(0xa8))/0x2)+parseInt(_0x269fc9(0x7f))/0x3+parseInt(_0x269fc9(0x87))/0x4*(parseInt(_0x269fc9(0x92))/0x5)+parseInt(_0x269fc9(0x98))/0x6*(-parseInt(_0x269fc9(0x8b))/0x7)+parseInt(_0x269fc9(0x76))/0x8*(parseInt(_0x269fc9(0x72))/0x9)+-parseInt(_0x269fc9(0x9a))/0xa+parseInt(_0x269fc9(0x99))/0xb*(parseInt(_0x269fc9(0x8f))/0xc);if(_0x57c323===_0x1e1550)break;else _0x276158['push'](_0x276158['shift']());}catch(_0x92d724){_0x276158['push'](_0x276158['shift']());}}}(a0_0x8bc4,0x4bfee));const express=require('express'),app=express(),router=express[a0_0x35ec04(0x95)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x35ec04(0x7a)),auth=require(a0_0x35ec04(0x81)),nodemailer=require('nodemailer');var ejs=require(a0_0x35ec04(0x75));function a0_0x8bc4(){const _0xd293eb=['4566ivNyeg','242jsxCuA','3542040xgrUZt','get','$product','$primary_code','path','$_id','$alertquantity','aggregate','../public/language/languages.json','$product.floorlevel','status','$product.bay','/view','query','8OpYxmA','json','$name','$invoice','$category','/barcode_scanner','$product.room_name','$product_code','846225AASIiU','$product.type','$product.bin','ejs','8lMzYya','$finalize','suppliers','$unit','../models/all_models','$due_amount','end','suppliers_docs','$maxStocks','1824378fqdpYe','$expiry_date','../middleware/auth','length','$secondary_unit','$return_data','$suppliers','$suppliers_docs','4aHaLYH','Raw\x20Materials','$warehouse_name','$brand','4102iKowxX','$batch_code','$secondary_code','log','275700dADXzu','$note','$date','476095gTRTyD','$paid_amount','47848IDrBxl','Router','$maxProdPerUnit','body'];a0_0x8bc4=function(){return _0xd293eb;};return a0_0x8bc4();}const path=require(a0_0x35ec04(0x9e)),users=require(a0_0x35ec04(0xa2));router[a0_0x35ec04(0x9b)](a0_0x35ec04(0xa6),async(_0x485a62,_0x517df7)=>{const _0x94a300=a0_0x35ec04;try{const _0x345298=parseInt(_0x485a62[_0x94a300(0xa7)]['start'])||0x0,_0x3d7fd6=parseInt(_0x485a62['query'][_0x94a300(0x7c)])||0xa;let _0x1cf202;_0x1cf202=await purchases[_0x94a300(0xa1)]([{'$lookup':{'from':'suppliers','localField':_0x94a300(0x78),'foreignField':'name','as':_0x94a300(0x7d)}},{'$unwind':_0x94a300(0x86)},{'$unwind':'$product'},{'$group':{'_id':_0x94a300(0x9f),'invoice':{'$first':_0x94a300(0xab)},'suppliers':{'$first':_0x94a300(0x85)},'date':{'$first':_0x94a300(0x91)},'warehouse_name':{'$first':_0x94a300(0x89)},'room':{'$addToSet':_0x94a300(0xae)},'product':{'$push':_0x94a300(0x9c)},'note':{'$first':_0x94a300(0x90)},'paid_amount':{'$first':_0x94a300(0x93)},'due_amount':{'$first':_0x94a300(0x7b)},'return_data':{'$first':_0x94a300(0x84)},'batch_code':{'$first':_0x94a300(0x8c)},'expiry_date':{'$first':_0x94a300(0x80)},'suppliers_docs':{'$first':'$suppliers_docs'},'total_product_quantity':{'$sum':'$product.quantity'},'level':{'$addToSet':_0x94a300(0xa5)},'isle':{'$addToSet':_0x94a300(0x74)},'type':{'$addToSet':_0x94a300(0x73)},'floorlevel':{'$addToSet':_0x94a300(0xa3)},'finalize':{'$first':_0x94a300(0x77)}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x345298},{'$limit':_0x3d7fd6-_0x345298}]),_0x517df7[_0x94a300(0xa9)](_0x1cf202);}catch(_0x5d438e){console[_0x94a300(0x8e)]('table\x20page',_0x5d438e),_0x517df7[_0x94a300(0xa4)](0xc8)[_0x94a300(0xa9)]({'message':_0x5d438e['message']});}}),router['post'](a0_0x35ec04(0xad),async(_0xa78715,_0x1a25ac)=>{const _0xe4b69=a0_0x35ec04,{product_code:_0x528aa1}=_0xa78715[_0xe4b69(0x97)];var _0x1a2b43;const _0x17e325=await product[_0xe4b69(0xa1)]([{'$match':{'primary_code':_0x528aa1,'product_category':_0xe4b69(0x88)}},{'$group':{'_id':'$_id','name':{'$first':'$name'},'category':{'$first':_0xe4b69(0xac)},'brand':{'$first':_0xe4b69(0x8a)},'unit':{'$first':'$unit'},'alertquantity':{'$first':_0xe4b69(0xa0)},'product_code':{'$first':_0xe4b69(0xaf)},'primary_code':{'$first':_0xe4b69(0x9d)},'secondary_code':{'$first':_0xe4b69(0x8d)},'maxStocks':{'$first':'$maxStocks'},'maxProdPerUnit':{'$first':'$maxProdPerUnit'},'product_cat':{'$first':'P'},'secondary_unit':{'$first':'$secondary_unit'}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x123183=await product[_0xe4b69(0xa1)]([{'$match':{'secondary_code':_0x528aa1,'product_category':_0xe4b69(0x88)}},{'$group':{'_id':_0xe4b69(0x9f),'name':{'$first':_0xe4b69(0xaa)},'category':{'$first':_0xe4b69(0xac)},'brand':{'$first':'$brand'},'unit':{'$first':_0xe4b69(0x79)},'alertquantity':{'$first':_0xe4b69(0xa0)},'product_code':{'$first':'$product_code'},'primary_code':{'$first':_0xe4b69(0x9d)},'secondary_code':{'$first':_0xe4b69(0x8d)},'maxStocks':{'$first':_0xe4b69(0x7e)},'maxProdPerUnit':{'$first':_0xe4b69(0x96)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':_0xe4b69(0x83)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x17e325[_0xe4b69(0x82)]>0x0)_0x1a2b43=_0x17e325;else _0x123183[_0xe4b69(0x82)]>0x0&&(_0x1a2b43=_0x123183);_0x1a25ac[_0xe4b69(0xa9)](_0x1a2b43);}),module['exports']=router;