function a0_0x1c14(_0x3ea365,_0x4befa9){const _0x321839=a0_0x3218();return a0_0x1c14=function(_0x1c1407,_0x5ee959){_0x1c1407=_0x1c1407-0x1bb;let _0x2b6ee3=_0x321839[_0x1c1407];return _0x2b6ee3;},a0_0x1c14(_0x3ea365,_0x4befa9);}const a0_0x75d53f=a0_0x1c14;(function(_0xadf5cf,_0x50de5c){const _0x3c0675=a0_0x1c14,_0x40c9cd=_0xadf5cf();while(!![]){try{const _0x4bc562=-parseInt(_0x3c0675(0x1e4))/0x1+-parseInt(_0x3c0675(0x1c6))/0x2+-parseInt(_0x3c0675(0x1bc))/0x3+-parseInt(_0x3c0675(0x1d4))/0x4*(parseInt(_0x3c0675(0x1e1))/0x5)+-parseInt(_0x3c0675(0x1f0))/0x6*(parseInt(_0x3c0675(0x1ef))/0x7)+-parseInt(_0x3c0675(0x1f4))/0x8+parseInt(_0x3c0675(0x1eb))/0x9;if(_0x4bc562===_0x50de5c)break;else _0x40c9cd['push'](_0x40c9cd['shift']());}catch(_0xd4cf5){_0x40c9cd['push'](_0x40c9cd['shift']());}}}(a0_0x3218,0x7a57c));const express=require(a0_0x75d53f(0x1f3)),app=express(),router=express[a0_0x75d53f(0x1ea)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x75d53f(0x1c4)),auth=require(a0_0x75d53f(0x1be)),nodemailer=require(a0_0x75d53f(0x1dc));var ejs=require('ejs');const path=require(a0_0x75d53f(0x1e7)),users=require(a0_0x75d53f(0x1e3));router[a0_0x75d53f(0x1e5)]('/view',async(_0x4e13d9,_0x37ce61)=>{const _0x5ada1e=a0_0x75d53f;try{const _0x570ed3=parseInt(_0x4e13d9[_0x5ada1e(0x1cc)]['start'])||0x0,_0x334c0b=parseInt(_0x4e13d9['query'][_0x5ada1e(0x1bd)])||0xa;let _0x4bf459;_0x4bf459=await purchases[_0x5ada1e(0x1de)]([{'$lookup':{'from':_0x5ada1e(0x1bf),'localField':_0x5ada1e(0x1bf),'foreignField':_0x5ada1e(0x1d7),'as':_0x5ada1e(0x1e9)}},{'$unwind':_0x5ada1e(0x1d8)},{'$unwind':_0x5ada1e(0x1df)},{'$group':{'_id':_0x5ada1e(0x1c0),'invoice':{'$first':'$invoice'},'suppliers':{'$first':_0x5ada1e(0x1c2)},'date':{'$first':_0x5ada1e(0x1f2)},'warehouse_name':{'$first':'$warehouse_name'},'room':{'$addToSet':_0x5ada1e(0x1c9)},'product':{'$push':_0x5ada1e(0x1df)},'note':{'$first':'$note'},'paid_amount':{'$first':_0x5ada1e(0x1e8)},'due_amount':{'$first':_0x5ada1e(0x1ce)},'return_data':{'$first':_0x5ada1e(0x1e6)},'batch_code':{'$first':'$batch_code'},'expiry_date':{'$first':_0x5ada1e(0x1d6)},'suppliers_docs':{'$first':_0x5ada1e(0x1d8)},'total_product_quantity':{'$sum':_0x5ada1e(0x1c1)},'level':{'$addToSet':_0x5ada1e(0x1ed)},'isle':{'$addToSet':'$product.bin'},'type':{'$addToSet':_0x5ada1e(0x1db)},'floorlevel':{'$addToSet':_0x5ada1e(0x1d0)},'finalize':{'$first':_0x5ada1e(0x1c7)}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x570ed3},{'$limit':_0x334c0b-_0x570ed3}]),_0x37ce61[_0x5ada1e(0x1cd)](_0x4bf459);}catch(_0x52b099){console['log'](_0x5ada1e(0x1d3),_0x52b099),_0x37ce61[_0x5ada1e(0x1d9)](0xc8)[_0x5ada1e(0x1cd)]({'message':_0x52b099['message']});}}),router[a0_0x75d53f(0x1f1)](a0_0x75d53f(0x1da),async(_0x2459a9,_0x25824b)=>{const _0x5dcc72=a0_0x75d53f,{product_code:_0x5cfbc6}=_0x2459a9[_0x5dcc72(0x1cb)];var _0x576fde;const _0x134e8e=await product['aggregate']([{'$match':{'primary_code':_0x5cfbc6,'product_category':_0x5dcc72(0x1bb)}},{'$group':{'_id':_0x5dcc72(0x1c0),'name':{'$first':_0x5dcc72(0x1c5)},'category':{'$first':'$category'},'brand':{'$first':_0x5dcc72(0x1d1)},'unit':{'$first':_0x5dcc72(0x1d2)},'alertquantity':{'$first':_0x5dcc72(0x1d5)},'product_code':{'$first':'$product_code'},'primary_code':{'$first':_0x5dcc72(0x1dd)},'secondary_code':{'$first':_0x5dcc72(0x1c3)},'maxStocks':{'$first':_0x5dcc72(0x1ec)},'maxProdPerUnit':{'$first':_0x5dcc72(0x1e2)},'product_cat':{'$first':'P'},'secondary_unit':{'$first':_0x5dcc72(0x1cf)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x11d99a=await product[_0x5dcc72(0x1de)]([{'$match':{'secondary_code':_0x5cfbc6,'product_category':_0x5dcc72(0x1bb)}},{'$group':{'_id':_0x5dcc72(0x1c0),'name':{'$first':_0x5dcc72(0x1c5)},'category':{'$first':_0x5dcc72(0x1e0)},'brand':{'$first':_0x5dcc72(0x1d1)},'unit':{'$first':'$unit'},'alertquantity':{'$first':_0x5dcc72(0x1d5)},'product_code':{'$first':_0x5dcc72(0x1c8)},'primary_code':{'$first':_0x5dcc72(0x1dd)},'secondary_code':{'$first':_0x5dcc72(0x1c3)},'maxStocks':{'$first':_0x5dcc72(0x1ec)},'maxProdPerUnit':{'$first':_0x5dcc72(0x1e2)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':_0x5dcc72(0x1cf)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x134e8e[_0x5dcc72(0x1ee)]>0x0)_0x576fde=_0x134e8e;else _0x11d99a['length']>0x0&&(_0x576fde=_0x11d99a);_0x25824b[_0x5dcc72(0x1cd)](_0x576fde);}),module[a0_0x75d53f(0x1ca)]=router;function a0_0x3218(){const _0x665432=['$product_code','$product.room_name','exports','body','query','json','$due_amount','$secondary_unit','$product.floorlevel','$brand','$unit','table\x20page','544yuuAHz','$alertquantity','$expiry_date','name','$suppliers_docs','status','/barcode_scanner','$product.type','nodemailer','$primary_code','aggregate','$product','$category','1195onWOVY','$maxProdPerUnit','../public/language/languages.json','902899WlKGDd','get','$return_data','path','$paid_amount','suppliers_docs','Router','23135517MWcVQn','$maxStocks','$product.bay','length','60473WgCGln','84nVObqS','post','$date','express','498976KpbCOG','Raw\x20Materials','1507800IwRWwh','end','../middleware/auth','suppliers','$_id','$product.quantity','$suppliers','$secondary_code','../models/all_models','$name','896352uMnLcE','$finalize'];a0_0x3218=function(){return _0x665432;};return a0_0x3218();}