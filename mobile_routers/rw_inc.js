function a0_0x4c1d(){const _0x46b264=['message','4315329ymZbac','end','ejs','$product.quantity','post','Router','$brand','Raw\x20Materials','$product.bin','22276CCKAwW','suppliers_docs','$secondary_code','$due_amount','$secondary_unit','$date','$suppliers_docs','$finalize','15818062sjiHdz','1YmAGYI','length','$_id','../models/all_models','100nbqloV','exports','$invoice','24wqXnky','169686RhugSI','log','$product_code','table\x20page','nodemailer','18NsTsiY','../public/language/languages.json','$name','suppliers','name','$product.bay','$expiry_date','882nMZTjV','/view','../middleware/auth','1136AOsMkJ','$product','express','get','13085vtUZlk','$maxStocks','$note','$primary_code','aggregate','$alertquantity','39137NmUGGP','$suppliers','425002OIjQJT','$maxProdPerUnit','$unit','status','$warehouse_name','json','$category'];a0_0x4c1d=function(){return _0x46b264;};return a0_0x4c1d();}const a0_0x384118=a0_0x4e5f;function a0_0x4e5f(_0x4c2679,_0x12cd0f){const _0x4c1da8=a0_0x4c1d();return a0_0x4e5f=function(_0x4e5fa5,_0xf94f19){_0x4e5fa5=_0x4e5fa5-0x18b;let _0xbb8132=_0x4c1da8[_0x4e5fa5];return _0xbb8132;},a0_0x4e5f(_0x4c2679,_0x12cd0f);}(function(_0x1b0c79,_0x11bc9b){const _0x5958d6=a0_0x4e5f,_0xa368ec=_0x1b0c79();while(!![]){try{const _0x5ae8cc=-parseInt(_0x5958d6(0x1bd))/0x1*(parseInt(_0x5958d6(0x1a3))/0x2)+parseInt(_0x5958d6(0x18d))/0x3*(parseInt(_0x5958d6(0x1b4))/0x4)+-parseInt(_0x5958d6(0x19b))/0x5*(parseInt(_0x5958d6(0x194))/0x6)+-parseInt(_0x5958d6(0x1a1))/0x7*(parseInt(_0x5958d6(0x197))/0x8)+-parseInt(_0x5958d6(0x1ab))/0x9+parseInt(_0x5958d6(0x1c1))/0xa*(-parseInt(_0x5958d6(0x1c5))/0xb)+parseInt(_0x5958d6(0x1c4))/0xc*(parseInt(_0x5958d6(0x1bc))/0xd);if(_0x5ae8cc===_0x11bc9b)break;else _0xa368ec['push'](_0xa368ec['shift']());}catch(_0xd78da9){_0xa368ec['push'](_0xa368ec['shift']());}}}(a0_0x4c1d,0x6bef3));const express=require(a0_0x384118(0x199)),app=express(),router=express[a0_0x384118(0x1b0)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x384118(0x1c0)),auth=require(a0_0x384118(0x196)),nodemailer=require(a0_0x384118(0x18c));var ejs=require(a0_0x384118(0x1ad));const path=require('path'),users=require(a0_0x384118(0x18e));router[a0_0x384118(0x19a)](a0_0x384118(0x195),async(_0x55e582,_0x38d21d)=>{const _0x33025e=a0_0x384118;try{const _0x289665=parseInt(_0x55e582['query']['start'])||0x0,_0x273e47=parseInt(_0x55e582['query'][_0x33025e(0x1ac)])||0xa;let _0x223212;_0x223212=await purchases[_0x33025e(0x19f)]([{'$lookup':{'from':_0x33025e(0x190),'localField':_0x33025e(0x190),'foreignField':_0x33025e(0x191),'as':_0x33025e(0x1b5)}},{'$unwind':'$suppliers_docs'},{'$unwind':'$product'},{'$group':{'_id':_0x33025e(0x1bf),'invoice':{'$first':_0x33025e(0x1c3)},'suppliers':{'$first':_0x33025e(0x1a2)},'date':{'$first':_0x33025e(0x1b9)},'warehouse_name':{'$first':_0x33025e(0x1a7)},'room':{'$addToSet':'$product.room_name'},'product':{'$push':_0x33025e(0x198)},'note':{'$first':_0x33025e(0x19d)},'paid_amount':{'$first':'$paid_amount'},'due_amount':{'$first':_0x33025e(0x1b7)},'return_data':{'$first':'$return_data'},'batch_code':{'$first':'$batch_code'},'expiry_date':{'$first':_0x33025e(0x193)},'suppliers_docs':{'$first':_0x33025e(0x1ba)},'total_product_quantity':{'$sum':_0x33025e(0x1ae)},'level':{'$addToSet':_0x33025e(0x192)},'isle':{'$addToSet':_0x33025e(0x1b3)},'type':{'$addToSet':'$product.type'},'floorlevel':{'$addToSet':'$product.floorlevel'},'finalize':{'$first':_0x33025e(0x1bb)}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x289665},{'$limit':_0x273e47-_0x289665}]),_0x38d21d[_0x33025e(0x1a8)](_0x223212);}catch(_0x329016){console[_0x33025e(0x1c6)](_0x33025e(0x18b),_0x329016),_0x38d21d[_0x33025e(0x1a6)](0xc8)[_0x33025e(0x1a8)]({'message':_0x329016[_0x33025e(0x1aa)]});}}),router[a0_0x384118(0x1af)]('/barcode_scanner',async(_0x308fd5,_0x4dd350)=>{const _0x98f43c=a0_0x384118,{product_code:_0xc279f4}=_0x308fd5['body'];var _0x800d8d;const _0x1197d3=await product[_0x98f43c(0x19f)]([{'$match':{'primary_code':_0xc279f4,'product_category':_0x98f43c(0x1b2)}},{'$group':{'_id':_0x98f43c(0x1bf),'name':{'$first':_0x98f43c(0x18f)},'category':{'$first':_0x98f43c(0x1a9)},'brand':{'$first':_0x98f43c(0x1b1)},'unit':{'$first':_0x98f43c(0x1a5)},'alertquantity':{'$first':_0x98f43c(0x1a0)},'product_code':{'$first':_0x98f43c(0x1c7)},'primary_code':{'$first':'$primary_code'},'secondary_code':{'$first':_0x98f43c(0x1b6)},'maxStocks':{'$first':_0x98f43c(0x19c)},'maxProdPerUnit':{'$first':_0x98f43c(0x1a4)},'product_cat':{'$first':'P'},'secondary_unit':{'$first':'$secondary_unit'}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x17c100=await product[_0x98f43c(0x19f)]([{'$match':{'secondary_code':_0xc279f4,'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x98f43c(0x1bf),'name':{'$first':_0x98f43c(0x18f)},'category':{'$first':'$category'},'brand':{'$first':_0x98f43c(0x1b1)},'unit':{'$first':_0x98f43c(0x1a5)},'alertquantity':{'$first':_0x98f43c(0x1a0)},'product_code':{'$first':'$product_code'},'primary_code':{'$first':_0x98f43c(0x19e)},'secondary_code':{'$first':_0x98f43c(0x1b6)},'maxStocks':{'$first':_0x98f43c(0x19c)},'maxProdPerUnit':{'$first':_0x98f43c(0x1a4)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':_0x98f43c(0x1b8)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x1197d3[_0x98f43c(0x1be)]>0x0)_0x800d8d=_0x1197d3;else _0x17c100[_0x98f43c(0x1be)]>0x0&&(_0x800d8d=_0x17c100);_0x4dd350[_0x98f43c(0x1a8)](_0x800d8d);}),module[a0_0x384118(0x1c2)]=router;