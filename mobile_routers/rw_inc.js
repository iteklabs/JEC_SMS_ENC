const a0_0x109036=a0_0x99d8;function a0_0x2d83(){const _0x405bdb=['start','$product.room_name','$name','$product_code','$primary_code','276066aKXnJh','log','1970532LJcyzz','7624127TRsbrT','$product','1524934iQTEBq','Router','status','/barcode_scanner','$batch_code','7660950YPZybW','get','nodemailer','$expiry_date','aggregate','../models/all_models','json','post','$unit','message','$product.bay','2763720NmnCgF','$secondary_code','suppliers_docs','Raw\x20Materials','ejs','$_id','$maxStocks','$invoice','suppliers','$maxProdPerUnit','$brand','$suppliers','1364892NAvVRT','$suppliers_docs','$due_amount','body','name','$category','$product.bin','$product.quantity','../middleware/auth','express','$finalize','$product.type','$product.floorlevel','query','end','$alertquantity','$note','$return_data','/view','exports'];a0_0x2d83=function(){return _0x405bdb;};return a0_0x2d83();}(function(_0x227a39,_0x26835a){const _0x1bd90d=a0_0x99d8,_0x1d57fd=_0x227a39();while(!![]){try{const _0x4ff0c0=-parseInt(_0x1bd90d(0xa4))/0x1+-parseInt(_0x1bd90d(0x88))/0x2+parseInt(_0x1bd90d(0x83))/0x3+parseInt(_0x1bd90d(0x98))/0x4+parseInt(_0x1bd90d(0x8d))/0x5+-parseInt(_0x1bd90d(0x85))/0x6+parseInt(_0x1bd90d(0x86))/0x7;if(_0x4ff0c0===_0x26835a)break;else _0x1d57fd['push'](_0x1d57fd['shift']());}catch(_0x272497){_0x1d57fd['push'](_0x1d57fd['shift']());}}}(a0_0x2d83,0xe792a));function a0_0x99d8(_0x4c5ecc,_0x1e54d5){const _0x2d8339=a0_0x2d83();return a0_0x99d8=function(_0x99d8fd,_0x4747bf){_0x99d8fd=_0x99d8fd-0x74;let _0x227f1b=_0x2d8339[_0x99d8fd];return _0x227f1b;},a0_0x99d8(_0x4c5ecc,_0x1e54d5);}const express=require(a0_0x109036(0xad)),app=express(),router=express[a0_0x109036(0x89)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x109036(0x92)),auth=require(a0_0x109036(0xac)),nodemailer=require(a0_0x109036(0x8f));var ejs=require(a0_0x109036(0x9c));const path=require('path'),users=require('../public/language/languages.json');router[a0_0x109036(0x8e)](a0_0x109036(0x7c),async(_0x8aaae6,_0x21efb3)=>{const _0x32aefc=a0_0x109036;try{const _0x58e0e0=parseInt(_0x8aaae6[_0x32aefc(0x77)][_0x32aefc(0x7e)])||0x0,_0x1a80c5=parseInt(_0x8aaae6[_0x32aefc(0x77)][_0x32aefc(0x78)])||0xa;let _0x4a89ea;_0x4a89ea=await purchases[_0x32aefc(0x91)]([{'$lookup':{'from':'suppliers','localField':_0x32aefc(0xa0),'foreignField':_0x32aefc(0xa8),'as':_0x32aefc(0x9a)}},{'$unwind':_0x32aefc(0xa5)},{'$unwind':_0x32aefc(0x87)},{'$group':{'_id':_0x32aefc(0x9d),'invoice':{'$first':_0x32aefc(0x9f)},'suppliers':{'$first':_0x32aefc(0xa3)},'date':{'$first':'$date'},'warehouse_name':{'$first':'$warehouse_name'},'room':{'$addToSet':_0x32aefc(0x7f)},'product':{'$push':_0x32aefc(0x87)},'note':{'$first':_0x32aefc(0x7a)},'paid_amount':{'$first':'$paid_amount'},'due_amount':{'$first':_0x32aefc(0xa6)},'return_data':{'$first':_0x32aefc(0x7b)},'batch_code':{'$first':_0x32aefc(0x8c)},'expiry_date':{'$first':_0x32aefc(0x90)},'suppliers_docs':{'$first':'$suppliers_docs'},'total_product_quantity':{'$sum':_0x32aefc(0xab)},'level':{'$addToSet':_0x32aefc(0x97)},'isle':{'$addToSet':_0x32aefc(0xaa)},'type':{'$addToSet':_0x32aefc(0x75)},'floorlevel':{'$addToSet':_0x32aefc(0x76)},'finalize':{'$first':_0x32aefc(0x74)}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x58e0e0},{'$limit':_0x1a80c5-_0x58e0e0}]),_0x21efb3[_0x32aefc(0x93)](_0x4a89ea);}catch(_0x12352d){console[_0x32aefc(0x84)]('table\x20page',_0x12352d),_0x21efb3[_0x32aefc(0x8a)](0xc8)[_0x32aefc(0x93)]({'message':_0x12352d[_0x32aefc(0x96)]});}}),router[a0_0x109036(0x94)](a0_0x109036(0x8b),async(_0x396d9c,_0x52a95c)=>{const _0x2ecd90=a0_0x109036,{product_code:_0x55937a}=_0x396d9c[_0x2ecd90(0xa7)];var _0x307ed6;const _0x4ee16c=await product[_0x2ecd90(0x91)]([{'$match':{'primary_code':_0x55937a,'product_category':_0x2ecd90(0x9b)}},{'$group':{'_id':_0x2ecd90(0x9d),'name':{'$first':'$name'},'category':{'$first':_0x2ecd90(0xa9)},'brand':{'$first':_0x2ecd90(0xa2)},'unit':{'$first':_0x2ecd90(0x95)},'alertquantity':{'$first':'$alertquantity'},'product_code':{'$first':_0x2ecd90(0x81)},'primary_code':{'$first':_0x2ecd90(0x82)},'secondary_code':{'$first':_0x2ecd90(0x99)},'maxStocks':{'$first':_0x2ecd90(0x9e)},'maxProdPerUnit':{'$first':_0x2ecd90(0xa1)},'product_cat':{'$first':'P'},'secondary_unit':{'$first':'$secondary_unit'}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x442316=await product['aggregate']([{'$match':{'secondary_code':_0x55937a,'product_category':_0x2ecd90(0x9b)}},{'$group':{'_id':_0x2ecd90(0x9d),'name':{'$first':_0x2ecd90(0x80)},'category':{'$first':_0x2ecd90(0xa9)},'brand':{'$first':_0x2ecd90(0xa2)},'unit':{'$first':_0x2ecd90(0x95)},'alertquantity':{'$first':_0x2ecd90(0x79)},'product_code':{'$first':_0x2ecd90(0x81)},'primary_code':{'$first':'$primary_code'},'secondary_code':{'$first':_0x2ecd90(0x99)},'maxStocks':{'$first':_0x2ecd90(0x9e)},'maxProdPerUnit':{'$first':_0x2ecd90(0xa1)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':'$secondary_unit'}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x4ee16c['length']>0x0)_0x307ed6=_0x4ee16c;else _0x442316['length']>0x0&&(_0x307ed6=_0x442316);_0x52a95c[_0x2ecd90(0x93)](_0x307ed6);}),module[a0_0x109036(0x7d)]=router;