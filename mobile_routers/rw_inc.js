function a0_0x5329(){const _0x2b79d8=['$date','../models/all_models','path','$suppliers_docs','json','nodemailer','$return_data','$finalize','193455sIrsFe','$due_amount','$secondary_code','309nyHRhR','$product.bay','query','$primary_code','$product_code','post','express','$brand','18511030HQxKHV','end','$maxProdPerUnit','$warehouse_name','$product.room_name','name','suppliers_docs','get','message','$product.bin','$_id','$name','exports','47238ySyhJt','status','$product.type','1944ONctcs','/view','$product.floorlevel','length','aggregate','start','$unit','/barcode_scanner','log','$product','$secondary_unit','ejs','body','$note','$alertquantity','../public/language/languages.json','189XEelGY','../middleware/auth','3276880BRibVT','$product.quantity','$maxStocks','1096060OdIqbf','18702dtluwq','9256LRHQuq','$suppliers','$category'];a0_0x5329=function(){return _0x2b79d8;};return a0_0x5329();}const a0_0x1c5aab=a0_0x2190;(function(_0x1e7278,_0x1b551b){const _0x200f8a=a0_0x2190,_0x50837a=_0x1e7278();while(!![]){try{const _0x172e78=-parseInt(_0x200f8a(0xe4))/0x1+parseInt(_0x200f8a(0xd9))/0x2*(-parseInt(_0x200f8a(0xe7))/0x3)+parseInt(_0x200f8a(0xd7))/0x4+-parseInt(_0x200f8a(0xd4))/0x5+parseInt(_0x200f8a(0xfc))/0x6*(parseInt(_0x200f8a(0xd2))/0x7)+parseInt(_0x200f8a(0xff))/0x8*(-parseInt(_0x200f8a(0xd8))/0x9)+parseInt(_0x200f8a(0xef))/0xa;if(_0x172e78===_0x1b551b)break;else _0x50837a['push'](_0x50837a['shift']());}catch(_0x109507){_0x50837a['push'](_0x50837a['shift']());}}}(a0_0x5329,0x7bd54));const express=require(a0_0x1c5aab(0xed)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x1c5aab(0xdd)),auth=require(a0_0x1c5aab(0xd3)),nodemailer=require(a0_0x1c5aab(0xe1));var ejs=require(a0_0x1c5aab(0xcd));const path=require(a0_0x1c5aab(0xde)),users=require(a0_0x1c5aab(0xd1));function a0_0x2190(_0x1467e3,_0x4539e7){const _0x5329ea=a0_0x5329();return a0_0x2190=function(_0x2190d0,_0x46f906){_0x2190d0=_0x2190d0-0xca;let _0x4fdeb6=_0x5329ea[_0x2190d0];return _0x4fdeb6;},a0_0x2190(_0x1467e3,_0x4539e7);}router[a0_0x1c5aab(0xf6)](a0_0x1c5aab(0x100),async(_0x13b4f3,_0x48c130)=>{const _0xb6d242=a0_0x1c5aab;try{const _0x2ffdba=parseInt(_0x13b4f3[_0xb6d242(0xe9)][_0xb6d242(0x104)])||0x0,_0x54b9c7=parseInt(_0x13b4f3[_0xb6d242(0xe9)][_0xb6d242(0xf0)])||0xa;let _0x53616d;_0x53616d=await purchases[_0xb6d242(0x103)]([{'$lookup':{'from':'suppliers','localField':'suppliers','foreignField':_0xb6d242(0xf4),'as':_0xb6d242(0xf5)}},{'$unwind':'$suppliers_docs'},{'$unwind':_0xb6d242(0xcb)},{'$group':{'_id':'$_id','invoice':{'$first':'$invoice'},'suppliers':{'$first':_0xb6d242(0xda)},'date':{'$first':_0xb6d242(0xdc)},'warehouse_name':{'$first':_0xb6d242(0xf2)},'room':{'$addToSet':_0xb6d242(0xf3)},'product':{'$push':_0xb6d242(0xcb)},'note':{'$first':_0xb6d242(0xcf)},'paid_amount':{'$first':'$paid_amount'},'due_amount':{'$first':_0xb6d242(0xe5)},'return_data':{'$first':_0xb6d242(0xe2)},'batch_code':{'$first':'$batch_code'},'expiry_date':{'$first':'$expiry_date'},'suppliers_docs':{'$first':_0xb6d242(0xdf)},'total_product_quantity':{'$sum':_0xb6d242(0xd5)},'level':{'$addToSet':_0xb6d242(0xe8)},'isle':{'$addToSet':_0xb6d242(0xf8)},'type':{'$addToSet':_0xb6d242(0xfe)},'floorlevel':{'$addToSet':_0xb6d242(0x101)},'finalize':{'$first':_0xb6d242(0xe3)}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x2ffdba},{'$limit':_0x54b9c7-_0x2ffdba}]),_0x48c130[_0xb6d242(0xe0)](_0x53616d);}catch(_0x1927ea){console[_0xb6d242(0xca)]('table\x20page',_0x1927ea),_0x48c130[_0xb6d242(0xfd)](0xc8)[_0xb6d242(0xe0)]({'message':_0x1927ea[_0xb6d242(0xf7)]});}}),router[a0_0x1c5aab(0xec)](a0_0x1c5aab(0x106),async(_0x5339e8,_0x3f8593)=>{const _0x31f8e8=a0_0x1c5aab,{product_code:_0x174513}=_0x5339e8[_0x31f8e8(0xce)];var _0x4e96e3;const _0x22a912=await product[_0x31f8e8(0x103)]([{'$match':{'primary_code':_0x174513,'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$_id','name':{'$first':_0x31f8e8(0xfa)},'category':{'$first':_0x31f8e8(0xdb)},'brand':{'$first':_0x31f8e8(0xee)},'unit':{'$first':_0x31f8e8(0x105)},'alertquantity':{'$first':_0x31f8e8(0xd0)},'product_code':{'$first':_0x31f8e8(0xeb)},'primary_code':{'$first':_0x31f8e8(0xea)},'secondary_code':{'$first':_0x31f8e8(0xe6)},'maxStocks':{'$first':_0x31f8e8(0xd6)},'maxProdPerUnit':{'$first':'$maxProdPerUnit'},'product_cat':{'$first':'P'},'secondary_unit':{'$first':_0x31f8e8(0xcc)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x168911=await product[_0x31f8e8(0x103)]([{'$match':{'secondary_code':_0x174513,'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x31f8e8(0xf9),'name':{'$first':'$name'},'category':{'$first':_0x31f8e8(0xdb)},'brand':{'$first':_0x31f8e8(0xee)},'unit':{'$first':_0x31f8e8(0x105)},'alertquantity':{'$first':_0x31f8e8(0xd0)},'product_code':{'$first':_0x31f8e8(0xeb)},'primary_code':{'$first':_0x31f8e8(0xea)},'secondary_code':{'$first':_0x31f8e8(0xe6)},'maxStocks':{'$first':_0x31f8e8(0xd6)},'maxProdPerUnit':{'$first':_0x31f8e8(0xf1)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':'$secondary_unit'}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x22a912[_0x31f8e8(0x102)]>0x0)_0x4e96e3=_0x22a912;else _0x168911[_0x31f8e8(0x102)]>0x0&&(_0x4e96e3=_0x168911);_0x3f8593['json'](_0x4e96e3);}),module[a0_0x1c5aab(0xfb)]=router;