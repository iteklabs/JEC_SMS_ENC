function a0_0x13fe(_0x4a01b3,_0x295467){const _0x2c8d5a=a0_0x2c8d();return a0_0x13fe=function(_0x13fe90,_0x38c6ee){_0x13fe90=_0x13fe90-0x9e;let _0x207d0c=_0x2c8d5a[_0x13fe90];return _0x207d0c;},a0_0x13fe(_0x4a01b3,_0x295467);}const a0_0x3fdc05=a0_0x13fe;(function(_0x3e3698,_0x5dc05a){const _0x2d8ef7=a0_0x13fe,_0x3baa40=_0x3e3698();while(!![]){try{const _0xea14f2=parseInt(_0x2d8ef7(0xce))/0x1+-parseInt(_0x2d8ef7(0xcf))/0x2+-parseInt(_0x2d8ef7(0xd1))/0x3*(-parseInt(_0x2d8ef7(0xab))/0x4)+-parseInt(_0x2d8ef7(0xd3))/0x5*(-parseInt(_0x2d8ef7(0xb2))/0x6)+-parseInt(_0x2d8ef7(0xcd))/0x7*(parseInt(_0x2d8ef7(0xcc))/0x8)+parseInt(_0x2d8ef7(0xb1))/0x9+-parseInt(_0x2d8ef7(0xc7))/0xa;if(_0xea14f2===_0x5dc05a)break;else _0x3baa40['push'](_0x3baa40['shift']());}catch(_0xc7c6ed){_0x3baa40['push'](_0x3baa40['shift']());}}}(a0_0x2c8d,0x3c1f2));const express=require(a0_0x3fdc05(0xc9)),app=express(),router=express[a0_0x3fdc05(0xbd)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x3fdc05(0xa6)),auth=require(a0_0x3fdc05(0xd5)),nodemailer=require(a0_0x3fdc05(0xb3));var ejs=require(a0_0x3fdc05(0xd0));function a0_0x2c8d(){const _0x4ad159=['78051oxrTQC','$paid_amount','2135245iIHHFF','$product.floorlevel','../middleware/auth','exports','name','$_id','$return_data','$product.bin','json','$name','$maxStocks','../models/all_models','start','aggregate','$secondary_unit','$unit','40OGnXLw','$maxProdPerUnit','body','path','$primary_code','$suppliers','1936116YvErfO','6VXmDXj','nodemailer','message','$invoice','status','$expiry_date','$brand','post','query','Raw\x20Materials','$product_code','Router','/barcode_scanner','$product.quantity','$due_amount','$alertquantity','$product','$product.type','$note','$suppliers_docs','$date','1951800ZQHXHQ','../public/language/languages.json','express','$finalize','$category','34360jfBzhF','707fBvRpo','401353EJlXqP','856926IpHkZc','ejs'];a0_0x2c8d=function(){return _0x4ad159;};return a0_0x2c8d();}const path=require(a0_0x3fdc05(0xae)),users=require(a0_0x3fdc05(0xc8));router['get']('/view',async(_0x3cbb3f,_0x465972)=>{const _0xb446c3=a0_0x3fdc05;try{const _0x599ee0=parseInt(_0x3cbb3f['query'][_0xb446c3(0xa7)])||0x0,_0xce84c8=parseInt(_0x3cbb3f[_0xb446c3(0xba)]['end'])||0xa;let _0x24c6ec;_0x24c6ec=await purchases[_0xb446c3(0xa8)]([{'$lookup':{'from':'suppliers','localField':'suppliers','foreignField':_0xb446c3(0x9f),'as':'suppliers_docs'}},{'$unwind':'$suppliers_docs'},{'$unwind':_0xb446c3(0xc2)},{'$group':{'_id':'$_id','invoice':{'$first':_0xb446c3(0xb5)},'suppliers':{'$first':_0xb446c3(0xb0)},'date':{'$first':_0xb446c3(0xc6)},'warehouse_name':{'$first':'$warehouse_name'},'room':{'$addToSet':'$product.room_name'},'product':{'$push':_0xb446c3(0xc2)},'note':{'$first':_0xb446c3(0xc4)},'paid_amount':{'$first':_0xb446c3(0xd2)},'due_amount':{'$first':_0xb446c3(0xc0)},'return_data':{'$first':_0xb446c3(0xa1)},'batch_code':{'$first':'$batch_code'},'expiry_date':{'$first':_0xb446c3(0xb7)},'suppliers_docs':{'$first':_0xb446c3(0xc5)},'total_product_quantity':{'$sum':_0xb446c3(0xbf)},'level':{'$addToSet':'$product.bay'},'isle':{'$addToSet':_0xb446c3(0xa2)},'type':{'$addToSet':_0xb446c3(0xc3)},'floorlevel':{'$addToSet':_0xb446c3(0xd4)},'finalize':{'$first':_0xb446c3(0xca)}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x599ee0},{'$limit':_0xce84c8-_0x599ee0}]),_0x465972[_0xb446c3(0xa3)](_0x24c6ec);}catch(_0x4d2334){console['log']('table\x20page',_0x4d2334),_0x465972[_0xb446c3(0xb6)](0xc8)[_0xb446c3(0xa3)]({'message':_0x4d2334[_0xb446c3(0xb4)]});}}),router[a0_0x3fdc05(0xb9)](a0_0x3fdc05(0xbe),async(_0x448e96,_0x326030)=>{const _0x5ec69c=a0_0x3fdc05,{product_code:_0x209b20}=_0x448e96[_0x5ec69c(0xad)];var _0x3b0693;const _0x846c3d=await product[_0x5ec69c(0xa8)]([{'$match':{'primary_code':_0x209b20,'product_category':_0x5ec69c(0xbb)}},{'$group':{'_id':_0x5ec69c(0xa0),'name':{'$first':_0x5ec69c(0xa4)},'category':{'$first':'$category'},'brand':{'$first':_0x5ec69c(0xb8)},'unit':{'$first':_0x5ec69c(0xaa)},'alertquantity':{'$first':_0x5ec69c(0xc1)},'product_code':{'$first':_0x5ec69c(0xbc)},'primary_code':{'$first':'$primary_code'},'secondary_code':{'$first':'$secondary_code'},'maxStocks':{'$first':_0x5ec69c(0xa5)},'maxProdPerUnit':{'$first':_0x5ec69c(0xac)},'product_cat':{'$first':'P'},'secondary_unit':{'$first':_0x5ec69c(0xa9)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x6a6946=await product[_0x5ec69c(0xa8)]([{'$match':{'secondary_code':_0x209b20,'product_category':_0x5ec69c(0xbb)}},{'$group':{'_id':_0x5ec69c(0xa0),'name':{'$first':_0x5ec69c(0xa4)},'category':{'$first':_0x5ec69c(0xcb)},'brand':{'$first':_0x5ec69c(0xb8)},'unit':{'$first':_0x5ec69c(0xaa)},'alertquantity':{'$first':_0x5ec69c(0xc1)},'product_code':{'$first':_0x5ec69c(0xbc)},'primary_code':{'$first':_0x5ec69c(0xaf)},'secondary_code':{'$first':'$secondary_code'},'maxStocks':{'$first':_0x5ec69c(0xa5)},'maxProdPerUnit':{'$first':_0x5ec69c(0xac)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':_0x5ec69c(0xa9)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x846c3d['length']>0x0)_0x3b0693=_0x846c3d;else _0x6a6946['length']>0x0&&(_0x3b0693=_0x6a6946);_0x326030[_0x5ec69c(0xa3)](_0x3b0693);}),module[a0_0x3fdc05(0x9e)]=router;