const a0_0x45edfb=a0_0x55df;function a0_0x55df(_0x56d8bb,_0xb6b621){const _0x54b58b=a0_0x54b5();return a0_0x55df=function(_0x55df4f,_0x932470){_0x55df4f=_0x55df4f-0xa2;let _0x5916ef=_0x54b58b[_0x55df4f];return _0x5916ef;},a0_0x55df(_0x56d8bb,_0xb6b621);}(function(_0x11dc61,_0x4884cd){const _0x363afb=a0_0x55df,_0x2a8192=_0x11dc61();while(!![]){try{const _0x5edabb=parseInt(_0x363afb(0xc5))/0x1+-parseInt(_0x363afb(0xbc))/0x2+parseInt(_0x363afb(0xb4))/0x3+parseInt(_0x363afb(0xb7))/0x4+-parseInt(_0x363afb(0xab))/0x5*(parseInt(_0x363afb(0xd8))/0x6)+parseInt(_0x363afb(0xcd))/0x7*(parseInt(_0x363afb(0xc7))/0x8)+parseInt(_0x363afb(0xa4))/0x9*(parseInt(_0x363afb(0xd1))/0xa);if(_0x5edabb===_0x4884cd)break;else _0x2a8192['push'](_0x2a8192['shift']());}catch(_0x11c083){_0x2a8192['push'](_0x2a8192['shift']());}}}(a0_0x54b5,0x44706));const express=require(a0_0x45edfb(0xa8)),app=express(),router=express[a0_0x45edfb(0xae)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings}=require(a0_0x45edfb(0xb0)),auth=require(a0_0x45edfb(0xd4)),nodemailer=require('nodemailer');function a0_0x54b5(){const _0xd6c596=['/view','exports','4735750vMJfvZ','$warehouse_name','json','../middleware/auth','length','$name','post','1830TiCfDc','/barcode_scanner','end','$secondary_code','9CZFvDc','query','$product','suppliers','express','$product.room_name','name','4405QbYZPH','$alertquantity','$secondary_unit','Router','$batch_code','../models/all_models','$_id','start','$maxStocks','279375NIZlho','$product.quantity','$product_code','579644HaByXa','aggregate','$invoice','$expiry_date','$primary_code','485726rAdDeC','$product.bin','status','ejs','$unit','Raw\x20Materials','log','$product.floorlevel','table\x20page','60443iOCvTO','$product.type','64EFKrDt','body','$category','$maxProdPerUnit','$note','suppliers_docs','17360YWoMzi','$suppliers_docs'];a0_0x54b5=function(){return _0xd6c596;};return a0_0x54b5();}var ejs=require(a0_0x45edfb(0xbf));const path=require('path'),users=require('../public/language/languages.json');router['get'](a0_0x45edfb(0xcf),async(_0x1ab8f5,_0x2b5c45)=>{const _0x413eae=a0_0x45edfb;try{const _0x853585=parseInt(_0x1ab8f5[_0x413eae(0xa5)][_0x413eae(0xb2)])||0x0,_0x17630e=parseInt(_0x1ab8f5[_0x413eae(0xa5)][_0x413eae(0xa2)])||0xa;let _0x2715f4;_0x2715f4=await purchases[_0x413eae(0xb8)]([{'$lookup':{'from':_0x413eae(0xa7),'localField':_0x413eae(0xa7),'foreignField':_0x413eae(0xaa),'as':_0x413eae(0xcc)}},{'$unwind':_0x413eae(0xce)},{'$unwind':_0x413eae(0xa6)},{'$group':{'_id':_0x413eae(0xb1),'invoice':{'$first':_0x413eae(0xb9)},'suppliers':{'$first':'$suppliers'},'date':{'$first':'$date'},'warehouse_name':{'$first':_0x413eae(0xd2)},'room':{'$addToSet':_0x413eae(0xa9)},'product':{'$push':_0x413eae(0xa6)},'note':{'$first':_0x413eae(0xcb)},'paid_amount':{'$first':'$paid_amount'},'due_amount':{'$first':'$due_amount'},'return_data':{'$first':'$return_data'},'batch_code':{'$first':_0x413eae(0xaf)},'expiry_date':{'$first':_0x413eae(0xba)},'suppliers_docs':{'$first':_0x413eae(0xce)},'total_product_quantity':{'$sum':_0x413eae(0xb5)},'level':{'$addToSet':'$product.bay'},'isle':{'$addToSet':_0x413eae(0xbd)},'type':{'$addToSet':_0x413eae(0xc6)},'floorlevel':{'$addToSet':_0x413eae(0xc3)},'finalize':{'$first':'$finalize'}}},{'$sort':{'_id':0x1}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'product':0x1,'note':0x1,'paid_amount':0x1,'due_amount':0x1,'return_data':0x1,'batch_code':0x1,'expiry_date':0x1,'suppliers_docs':0x1,'total_product_quantity':0x1,'level':0x1,'isle':0x1,'type':0x1,'floorlevel':0x1,'finalize':0x1}},{'$skip':_0x853585},{'$limit':_0x17630e-_0x853585}]),_0x2b5c45[_0x413eae(0xd3)](_0x2715f4);}catch(_0x56ec16){console[_0x413eae(0xc2)](_0x413eae(0xc4),_0x56ec16),_0x2b5c45[_0x413eae(0xbe)](0xc8)[_0x413eae(0xd3)]({'message':_0x56ec16['message']});}}),router[a0_0x45edfb(0xd7)](a0_0x45edfb(0xd9),async(_0x2ce0de,_0x3a4351)=>{const _0x4d5dfa=a0_0x45edfb,{product_code:_0x3d5935}=_0x2ce0de[_0x4d5dfa(0xc8)];var _0x50425d;const _0x1fde8f=await product[_0x4d5dfa(0xb8)]([{'$match':{'primary_code':_0x3d5935,'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x4d5dfa(0xb1),'name':{'$first':_0x4d5dfa(0xd6)},'category':{'$first':_0x4d5dfa(0xc9)},'brand':{'$first':'$brand'},'unit':{'$first':'$unit'},'alertquantity':{'$first':_0x4d5dfa(0xac)},'product_code':{'$first':_0x4d5dfa(0xb6)},'primary_code':{'$first':_0x4d5dfa(0xbb)},'secondary_code':{'$first':_0x4d5dfa(0xa3)},'maxStocks':{'$first':_0x4d5dfa(0xb3)},'maxProdPerUnit':{'$first':_0x4d5dfa(0xca)},'product_cat':{'$first':'P'},'secondary_unit':{'$first':_0x4d5dfa(0xad)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]),_0x365d4f=await product[_0x4d5dfa(0xb8)]([{'$match':{'secondary_code':_0x3d5935,'product_category':_0x4d5dfa(0xc1)}},{'$group':{'_id':_0x4d5dfa(0xb1),'name':{'$first':_0x4d5dfa(0xd6)},'category':{'$first':_0x4d5dfa(0xc9)},'brand':{'$first':'$brand'},'unit':{'$first':_0x4d5dfa(0xc0)},'alertquantity':{'$first':_0x4d5dfa(0xac)},'product_code':{'$first':_0x4d5dfa(0xb6)},'primary_code':{'$first':'$primary_code'},'secondary_code':{'$first':_0x4d5dfa(0xa3)},'maxStocks':{'$first':'$maxStocks'},'maxProdPerUnit':{'$first':_0x4d5dfa(0xca)},'product_cat':{'$first':'S'},'secondary_unit':{'$first':_0x4d5dfa(0xad)}}},{'$project':{'_id':0x1,'name':0x1,'category':0x1,'brand':0x1,'unit':0x1,'alertquantity':0x1,'product_code':0x1,'primary_code':0x1,'secondary_code':0x1,'maxStocks':0x1,'maxProdPerUnit':0x1,'product_cat':0x1,'secondary_unit':0x1}}]);if(_0x1fde8f[_0x4d5dfa(0xd5)]>0x0)_0x50425d=_0x1fde8f;else _0x365d4f[_0x4d5dfa(0xd5)]>0x0&&(_0x50425d=_0x365d4f);_0x3a4351[_0x4d5dfa(0xd3)](_0x50425d);}),module[a0_0x45edfb(0xd0)]=router;