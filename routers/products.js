const a0_0x5efcbd=a0_0x2176;(function(_0x313641,_0x167ca1){const _0x2ca6ae=a0_0x2176,_0x4b5920=_0x313641();while(!![]){try{const _0x285360=-parseInt(_0x2ca6ae(0x285))/0x1*(parseInt(_0x2ca6ae(0x24f))/0x2)+-parseInt(_0x2ca6ae(0x23b))/0x3+parseInt(_0x2ca6ae(0x211))/0x4*(-parseInt(_0x2ca6ae(0x268))/0x5)+parseInt(_0x2ca6ae(0x236))/0x6*(-parseInt(_0x2ca6ae(0x271))/0x7)+-parseInt(_0x2ca6ae(0x26e))/0x8*(parseInt(_0x2ca6ae(0x1d0))/0x9)+parseInt(_0x2ca6ae(0x1e5))/0xa+-parseInt(_0x2ca6ae(0x237))/0xb*(-parseInt(_0x2ca6ae(0x1be))/0xc);if(_0x285360===_0x167ca1)break;else _0x4b5920['push'](_0x4b5920['shift']());}catch(_0x3163c9){_0x4b5920['push'](_0x4b5920['shift']());}}}(a0_0x28dd,0x49a3e));const express=require(a0_0x5efcbd(0x22c)),res=require(a0_0x5efcbd(0x1ef)),app=express(),router=express[a0_0x5efcbd(0x258)](),multer=require(a0_0x5efcbd(0x26f)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x5efcbd(0x209)),auth=require(a0_0x5efcbd(0x21f)),users=require(a0_0x5efcbd(0x232)),excelJS=require(a0_0x5efcbd(0x254)),xlsx=require('xlsx'),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x5efcbd(0x22b)),PDFDocument=require(a0_0x5efcbd(0x201));function a0_0x2176(_0x45380d,_0x2e7b0b){const _0x28dd80=a0_0x28dd();return a0_0x2176=function(_0x2176cb,_0x4092ce){_0x2176cb=_0x2176cb-0x1bb;let _0x4f83d9=_0x28dd80[_0x2176cb];return _0x4f83d9;},a0_0x2176(_0x45380d,_0x2e7b0b);}router[a0_0x5efcbd(0x1de)](a0_0x5efcbd(0x23e),auth,async(_0xae9557,_0x5e7f80)=>{const _0xca0118=a0_0x5efcbd;try{const {username:_0x3ac138,email:_0x5cf1bb,role:_0x54db33}=_0xae9557[_0xca0118(0x1d4)],_0x2608a1=_0xae9557[_0xca0118(0x1d4)],_0x58e26d=await profile['findOne']({'email':_0x2608a1[_0xca0118(0x238)]}),_0x1bc128=await master_shop[_0xca0118(0x25d)]();console[_0xca0118(0x24d)](_0xca0118(0x221),_0x1bc128);const _0x2f3f8e=await categories['find']();if(_0x1bc128[0x0][_0xca0118(0x21c)]==_0xca0118(0x242))var _0x443095=users[_0xca0118(0x1d7)];else{if(_0x1bc128[0x0][_0xca0118(0x21c)]==_0xca0118(0x1ed))var _0x443095=users[_0xca0118(0x1ed)];else{if(_0x1bc128[0x0][_0xca0118(0x21c)]==_0xca0118(0x215))var _0x443095=users[_0xca0118(0x215)];else{if(_0x1bc128[0x0]['language']=='Spanish')var _0x443095=users['Spanish'];else{if(_0x1bc128[0x0][_0xca0118(0x21c)]==_0xca0118(0x252))var _0x443095=users[_0xca0118(0x252)];else{if(_0x1bc128[0x0]['language']=='Portuguese\x20(BR)')var _0x443095=users[_0xca0118(0x278)];else{if(_0x1bc128[0x0]['language']==_0xca0118(0x21d))var _0x443095=users[_0xca0118(0x21d)];else{if(_0x1bc128[0x0][_0xca0118(0x21c)]==_0xca0118(0x21e))var _0x443095=users[_0xca0118(0x219)];}}}}}}}_0x5e7f80[_0xca0118(0x22e)]('categories',{'success':_0xae9557['flash'](_0xca0118(0x1e4)),'errors':_0xae9557[_0xca0118(0x1ff)](_0xca0118(0x1e9)),'role':_0x2608a1,'profile':_0x58e26d,'user':_0x2f3f8e,'master_shop':_0x1bc128,'language':_0x443095});}catch(_0x35920a){console[_0xca0118(0x24d)](_0x35920a);}}),router[a0_0x5efcbd(0x1f5)](a0_0x5efcbd(0x23e),auth,async(_0x4e7f37,_0x379542)=>{const _0x3dbcaa=a0_0x5efcbd;try{const {name:_0x46c939,products:_0x551d41}=_0x4e7f37['body'],_0x5c7bc8=new categories({'name':_0x46c939,'products':_0x551d41}),_0x4e30fd=await categories['findOne']({'name':_0x46c939});_0x4e30fd?_0x4e7f37[_0x3dbcaa(0x1ff)](_0x3dbcaa(0x1e9),_0x46c939+_0x3dbcaa(0x222)):_0x4e7f37['flash']('success',_0x46c939+_0x3dbcaa(0x27c));const _0x4196ce=await _0x5c7bc8[_0x3dbcaa(0x279)]();_0x379542[_0x3dbcaa(0x210)](_0x3dbcaa(0x27a));}catch(_0x38aaef){console[_0x3dbcaa(0x24d)](_0x38aaef);}}),router[a0_0x5efcbd(0x1de)](a0_0x5efcbd(0x1e1),auth,async(_0x54b822,_0x11e21d)=>{const _0x2af7e5=a0_0x5efcbd;try{const {username:_0x293aa5,email:_0x3bde87,role:_0x4c5a32}=_0x54b822[_0x2af7e5(0x1d4)],_0x4b84d2=_0x54b822[_0x2af7e5(0x1d4)],_0x5284fa=await profile[_0x2af7e5(0x261)]({'email':_0x4b84d2[_0x2af7e5(0x238)]}),_0x337fbe=await master_shop['find']();console[_0x2af7e5(0x24d)](_0x2af7e5(0x221),_0x337fbe);const _0x5503f9=_0x54b822[_0x2af7e5(0x20b)]['id'];console['log'](_0x5503f9);const _0x5c13f2=await categories['findById'](_0x5503f9);if(_0x337fbe[0x0]['language']=='English\x20(US)')var _0x41cb76=users[_0x2af7e5(0x1d7)];else{if(_0x337fbe[0x0][_0x2af7e5(0x21c)]=='Hindi')var _0x41cb76=users[_0x2af7e5(0x1ed)];else{if(_0x337fbe[0x0][_0x2af7e5(0x21c)]==_0x2af7e5(0x215))var _0x41cb76=users[_0x2af7e5(0x215)];else{if(_0x337fbe[0x0][_0x2af7e5(0x21c)]==_0x2af7e5(0x217))var _0x41cb76=users[_0x2af7e5(0x217)];else{if(_0x337fbe[0x0][_0x2af7e5(0x21c)]==_0x2af7e5(0x252))var _0x41cb76=users['French'];else{if(_0x337fbe[0x0][_0x2af7e5(0x21c)]==_0x2af7e5(0x1eb))var _0x41cb76=users['Portuguese'];else{if(_0x337fbe[0x0][_0x2af7e5(0x21c)]==_0x2af7e5(0x21d))var _0x41cb76=users[_0x2af7e5(0x21d)];else{if(_0x337fbe[0x0][_0x2af7e5(0x21c)]==_0x2af7e5(0x21e))var _0x41cb76=users['Arabic'];}}}}}}}_0x11e21d['render'](_0x2af7e5(0x276),{'success':_0x54b822[_0x2af7e5(0x1ff)]('success'),'errors':_0x54b822[_0x2af7e5(0x1ff)]('errors'),'role':_0x4b84d2,'profile':_0x5284fa,'master_shop':_0x337fbe,'user':_0x5c13f2,'language':_0x41cb76});}catch(_0x22d89b){console[_0x2af7e5(0x24d)](_0x22d89b);}}),router[a0_0x5efcbd(0x1f5)]('/categories/:id',auth,async(_0x7f2a29,_0x4675b5)=>{const _0x134542=a0_0x5efcbd;try{const _0x21433d=_0x7f2a29[_0x134542(0x20b)]['id'],_0x2cb063=await categories['findByIdAndUpdate'](_0x21433d,_0x7f2a29['body']);_0x7f2a29['flash'](_0x134542(0x1e4),''+users[_0x134542(0x25a)]),_0x4675b5[_0x134542(0x210)]('/products/categories');}catch(_0x197f20){console['log'](_0x197f20);}}),router[a0_0x5efcbd(0x1de)](a0_0x5efcbd(0x231),auth,async(_0x79b3d9,_0x19ce13)=>{const _0x3189dc=a0_0x5efcbd;try{const _0x4c018b=_0x79b3d9['params']['id'],_0x24005d=await categories['findByIdAndDelete'](_0x4c018b);_0x79b3d9[_0x3189dc(0x1ff)](_0x3189dc(0x1e4),_0x3189dc(0x216)),_0x19ce13[_0x3189dc(0x210)](_0x3189dc(0x27a));}catch(_0x48894e){console['log'](_0x48894e);}}),router['get'](a0_0x5efcbd(0x228),auth,async(_0x58fb16,_0x404614)=>{const _0x387aa7=a0_0x5efcbd;try{const {username:_0x8043f9,email:_0x1d10cf,role:_0x5bd007}=_0x58fb16[_0x387aa7(0x1d4)],_0xfc8359=_0x58fb16['user'],_0x9bf5f=await profile[_0x387aa7(0x261)]({'email':_0xfc8359[_0x387aa7(0x238)]}),_0x22efda=await master_shop['find']();console['log']('master',_0x22efda);const _0x27e776=await brands[_0x387aa7(0x25d)]();if(_0x22efda[0x0][_0x387aa7(0x21c)]==_0x387aa7(0x242))var _0x7d70d1=users['English'];else{if(_0x22efda[0x0][_0x387aa7(0x21c)]=='Hindi')var _0x7d70d1=users[_0x387aa7(0x1ed)];else{if(_0x22efda[0x0][_0x387aa7(0x21c)]==_0x387aa7(0x215))var _0x7d70d1=users['German'];else{if(_0x22efda[0x0][_0x387aa7(0x21c)]=='Spanish')var _0x7d70d1=users['Spanish'];else{if(_0x22efda[0x0][_0x387aa7(0x21c)]=='French')var _0x7d70d1=users[_0x387aa7(0x252)];else{if(_0x22efda[0x0][_0x387aa7(0x21c)]==_0x387aa7(0x1eb))var _0x7d70d1=users['Portuguese'];else{if(_0x22efda[0x0][_0x387aa7(0x21c)]==_0x387aa7(0x21d))var _0x7d70d1=users['Chinese'];else{if(_0x22efda[0x0]['language']==_0x387aa7(0x21e))var _0x7d70d1=users[_0x387aa7(0x219)];}}}}}}}_0x404614[_0x387aa7(0x22e)](_0x387aa7(0x20c),{'success':_0x58fb16['flash'](_0x387aa7(0x1e4)),'errors':_0x58fb16[_0x387aa7(0x1ff)](_0x387aa7(0x1e9)),'role':_0xfc8359,'profile':_0x9bf5f,'master_shop':_0x22efda,'user':_0x27e776,'language':_0x7d70d1});}catch(_0xbc133d){console[_0x387aa7(0x24d)](_0xbc133d);}}),router['post'](a0_0x5efcbd(0x228),auth,async(_0x16ec38,_0x299bf4)=>{const _0x3bdf99=a0_0x5efcbd;try{const {name:_0x154724,products:_0x127abd}=_0x16ec38[_0x3bdf99(0x1d8)],_0x4fc7dc=new brands({'name':_0x154724,'products':_0x127abd}),_0x19f03c=await brands[_0x3bdf99(0x261)]({'name':_0x154724});_0x19f03c?_0x16ec38['flash'](_0x3bdf99(0x1e9),_0x154724+_0x3bdf99(0x23f)):_0x16ec38[_0x3bdf99(0x1ff)](_0x3bdf99(0x1e4),_0x154724+_0x3bdf99(0x1cf));const _0x32c045=await _0x4fc7dc[_0x3bdf99(0x279)]();_0x299bf4[_0x3bdf99(0x210)]('/products/brands');}catch(_0x5ae135){console[_0x3bdf99(0x24d)](_0x5ae135);}}),router[a0_0x5efcbd(0x1de)]('/brands/:id',auth,async(_0x392d4e,_0xd2cf3e)=>{const _0x55a726=a0_0x5efcbd;try{const {username:_0x94d13f,email:_0x11b9e6,role:_0x56ac81}=_0x392d4e['user'],_0x5dfc05=_0x392d4e[_0x55a726(0x1d4)],_0x30c050=await profile[_0x55a726(0x261)]({'email':_0x5dfc05[_0x55a726(0x238)]}),_0x5f5a8a=await master_shop[_0x55a726(0x25d)]();console['log'](_0x55a726(0x221),_0x5f5a8a);const _0x3345cd=_0x392d4e['params']['id'];console[_0x55a726(0x24d)](_0x3345cd);const _0x38dec6=await brands[_0x55a726(0x1c6)](_0x3345cd);if(_0x5f5a8a[0x0]['language']=='English\x20(US)')var _0x4d3480=users['English'];else{if(_0x5f5a8a[0x0][_0x55a726(0x21c)]=='Hindi')var _0x4d3480=users[_0x55a726(0x1ed)];else{if(_0x5f5a8a[0x0][_0x55a726(0x21c)]=='German')var _0x4d3480=users[_0x55a726(0x215)];else{if(_0x5f5a8a[0x0][_0x55a726(0x21c)]==_0x55a726(0x217))var _0x4d3480=users[_0x55a726(0x217)];else{if(_0x5f5a8a[0x0][_0x55a726(0x21c)]=='French')var _0x4d3480=users[_0x55a726(0x252)];else{if(_0x5f5a8a[0x0][_0x55a726(0x21c)]==_0x55a726(0x1eb))var _0x4d3480=users['Portuguese'];else{if(_0x5f5a8a[0x0][_0x55a726(0x21c)]=='Chinese')var _0x4d3480=users[_0x55a726(0x21d)];else{if(_0x5f5a8a[0x0]['language']==_0x55a726(0x21e))var _0x4d3480=users[_0x55a726(0x219)];}}}}}}}_0xd2cf3e[_0x55a726(0x22e)](_0x55a726(0x20c),{'success':_0x392d4e['flash']('success'),'errors':_0x392d4e['flash'](_0x55a726(0x1e9)),'role':_0x5dfc05,'profile':_0x30c050,'master_shop':_0x5f5a8a,'user':_0x38dec6,'language':_0x4d3480});}catch(_0x14ad9d){console[_0x55a726(0x24d)](_0x14ad9d);}}),router['post']('/brands/:id',auth,async(_0xeed031,_0x90be9a)=>{const _0x2ff2b8=a0_0x5efcbd;try{const _0x2ccc66=_0xeed031[_0x2ff2b8(0x20b)]['id'],_0x2125e8=await brands[_0x2ff2b8(0x225)](_0x2ccc66,_0xeed031[_0x2ff2b8(0x1d8)]);_0xeed031[_0x2ff2b8(0x1ff)](_0x2ff2b8(0x1e4),_0x2ff2b8(0x1ec)),_0x90be9a[_0x2ff2b8(0x210)](_0x2ff2b8(0x248));}catch(_0x3ad98){console['log'](_0x3ad98);}}),router[a0_0x5efcbd(0x1de)](a0_0x5efcbd(0x20d),auth,async(_0x578631,_0x54e218)=>{const _0x4f37ea=a0_0x5efcbd;try{const _0xbef84c=_0x578631[_0x4f37ea(0x20b)]['id'],_0x540f7c=await brands[_0x4f37ea(0x273)](_0xbef84c);_0x578631['flash'](_0x4f37ea(0x1e4),_0x4f37ea(0x1db)),_0x54e218[_0x4f37ea(0x210)](_0x4f37ea(0x248));}catch(_0x242a78){console['log'](_0x242a78);}}),router['get'](a0_0x5efcbd(0x241),auth,async(_0x9711fd,_0x29b32d)=>{const _0x4406ab=a0_0x5efcbd;try{const {username:_0x271473,email:_0x4fd5e4,role:_0xd57de3}=_0x9711fd['user'],_0x38149f=_0x9711fd['user'],_0xfcb036=await profile[_0x4406ab(0x261)]({'email':_0x38149f[_0x4406ab(0x238)]}),_0x4641df=await master_shop['find']();console[_0x4406ab(0x24d)]('master',_0x4641df);const _0x3de92c=await units['find']();if(_0x4641df[0x0][_0x4406ab(0x21c)]==_0x4406ab(0x242))var _0x532765=users['English'];else{if(_0x4641df[0x0][_0x4406ab(0x21c)]==_0x4406ab(0x1ed))var _0x532765=users[_0x4406ab(0x1ed)];else{if(_0x4641df[0x0][_0x4406ab(0x21c)]==_0x4406ab(0x215))var _0x532765=users[_0x4406ab(0x215)];else{if(_0x4641df[0x0]['language']=='Spanish')var _0x532765=users[_0x4406ab(0x217)];else{if(_0x4641df[0x0][_0x4406ab(0x21c)]==_0x4406ab(0x252))var _0x532765=users[_0x4406ab(0x252)];else{if(_0x4641df[0x0][_0x4406ab(0x21c)]==_0x4406ab(0x1eb))var _0x532765=users['Portuguese'];else{if(_0x4641df[0x0][_0x4406ab(0x21c)]==_0x4406ab(0x21d))var _0x532765=users[_0x4406ab(0x21d)];else{if(_0x4641df[0x0][_0x4406ab(0x21c)]==_0x4406ab(0x21e))var _0x532765=users[_0x4406ab(0x219)];}}}}}}}_0x29b32d['render'](_0x4406ab(0x270),{'success':_0x9711fd[_0x4406ab(0x1ff)]('success'),'errors':_0x9711fd[_0x4406ab(0x1ff)]('errors'),'role':_0x38149f,'profile':_0xfcb036,'master_shop':_0x4641df,'user':_0x3de92c,'language':_0x532765});}catch(_0x2cef39){console[_0x4406ab(0x24d)](_0x2cef39);}}),router[a0_0x5efcbd(0x1f5)](a0_0x5efcbd(0x241),auth,async(_0x527fbd,_0x5e8045)=>{const _0x3660b5=a0_0x5efcbd;try{const {name:_0xf0ddd4,secondary_unit:_0x4987e4,products:_0x43507d}=_0x527fbd['body'],_0x28e943=new units({'name':_0xf0ddd4,'secondary_unit':_0x4987e4,'products':_0x43507d}),_0x5e954f=await units[_0x3660b5(0x261)]({'name':_0xf0ddd4});_0x5e954f?_0x527fbd[_0x3660b5(0x1ff)](_0x3660b5(0x1e9),_0xf0ddd4+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x527fbd[_0x3660b5(0x1ff)](_0x3660b5(0x1e4),_0xf0ddd4+_0x3660b5(0x1d9));const _0x3fa3af=await _0x28e943[_0x3660b5(0x279)]();_0x5e8045['redirect'](_0x3660b5(0x25b));}catch(_0x4e607b){console[_0x3660b5(0x24d)](_0x4e607b);}}),router['get'](a0_0x5efcbd(0x25f),auth,async(_0x296d33,_0x58f506)=>{const _0x223e81=a0_0x5efcbd;try{const {username:_0x36b4c9,email:_0x52be88,role:_0x4525aa}=_0x296d33[_0x223e81(0x1d4)],_0x394ea2=_0x296d33['user'],_0x5301de=await profile[_0x223e81(0x261)]({'email':_0x394ea2[_0x223e81(0x238)]}),_0xed11c7=await master_shop[_0x223e81(0x25d)]();console[_0x223e81(0x24d)]('master',_0xed11c7);const _0x521771=_0x296d33[_0x223e81(0x20b)]['id'],_0x5b7e76=await units['findById'](_0x521771);if(_0xed11c7[0x0][_0x223e81(0x21c)]==_0x223e81(0x242))var _0x484119=users['English'];else{if(_0xed11c7[0x0][_0x223e81(0x21c)]==_0x223e81(0x1ed))var _0x484119=users['Hindi'];else{if(_0xed11c7[0x0][_0x223e81(0x21c)]==_0x223e81(0x215))var _0x484119=users[_0x223e81(0x215)];else{if(_0xed11c7[0x0]['language']==_0x223e81(0x217))var _0x484119=users[_0x223e81(0x217)];else{if(_0xed11c7[0x0]['language']=='French')var _0x484119=users['French'];else{if(_0xed11c7[0x0][_0x223e81(0x21c)]==_0x223e81(0x1eb))var _0x484119=users['Portuguese'];else{if(_0xed11c7[0x0][_0x223e81(0x21c)]=='Chinese')var _0x484119=users[_0x223e81(0x21d)];else{if(_0xed11c7[0x0][_0x223e81(0x21c)]==_0x223e81(0x21e))var _0x484119=users[_0x223e81(0x219)];}}}}}}}_0x58f506[_0x223e81(0x22e)](_0x223e81(0x270),{'success':_0x296d33[_0x223e81(0x1ff)](_0x223e81(0x1e4)),'errors':_0x296d33[_0x223e81(0x1ff)](_0x223e81(0x1e9)),'role':_0x394ea2,'profile':_0x5301de,'master_shop':_0xed11c7,'user':_0x5b7e76,'language':_0x484119});}catch(_0x3cf30a){console[_0x223e81(0x24d)](_0x3cf30a);}}),router[a0_0x5efcbd(0x1f5)](a0_0x5efcbd(0x25f),auth,async(_0x484dc5,_0x1acb59)=>{const _0x34e940=a0_0x5efcbd;try{const _0x25696f=_0x484dc5[_0x34e940(0x20b)]['id'],_0x1a1943=await units[_0x34e940(0x225)](_0x25696f,_0x484dc5[_0x34e940(0x1d8)]);_0x484dc5[_0x34e940(0x1ff)](_0x34e940(0x1e4),_0x34e940(0x1d2)),_0x1acb59[_0x34e940(0x210)]('/products/units');}catch(_0xab4194){console[_0x34e940(0x24d)](_0xab4194);}}),router[a0_0x5efcbd(0x1de)]('/units/delete/:id',auth,async(_0x211a01,_0x1bc65c)=>{const _0x2ff6a9=a0_0x5efcbd;try{const _0x1d1c93=_0x211a01[_0x2ff6a9(0x20b)]['id'],_0x35fcf2=await units['findByIdAndDelete'](_0x1d1c93);_0x211a01[_0x2ff6a9(0x1ff)](_0x2ff6a9(0x1e4),'unit\x20data\x20delete\x20successfully'),_0x1bc65c[_0x2ff6a9(0x210)](_0x2ff6a9(0x25b));}catch(_0x51c3e3){console[_0x2ff6a9(0x24d)](_0x51c3e3);}});const storage=multer['diskStorage']({'destination':(_0x1b0d74,_0x2c24dd,_0x2e7644)=>{const _0x4956f9=a0_0x5efcbd;_0x2e7644(null,_0x4956f9(0x281));},'filename':(_0x13d744,_0x49fa39,_0x2117c1)=>{const _0x4c8d99=a0_0x5efcbd;_0x2117c1(null,Date['now']()+_0x49fa39[_0x4c8d99(0x25e)]);}}),upload=multer({'storage':storage});router['get'](a0_0x5efcbd(0x22f),auth,async(_0x93a792,_0x5c3299)=>{const _0xbaee3e=a0_0x5efcbd;try{const {username:_0x1c4086,email:_0x4f4f39,role:_0xa67465}=_0x93a792['user'],_0x188f99=_0x93a792[_0xbaee3e(0x1d4)],_0x4bfac4=await profile['findOne']({'email':_0x188f99['email']}),_0x11e190={'year':_0xbaee3e(0x1d1),'month':_0xbaee3e(0x259),'day':_0xbaee3e(0x1d1)},_0x5eca11=await master_shop['find']();console[_0xbaee3e(0x24d)]('Products\x20master',_0x5eca11);const _0x1d4a3b=await product[_0xbaee3e(0x25d)]();console[_0xbaee3e(0x24d)](_0xbaee3e(0x282),_0x1d4a3b);const _0x5f0c25=await warehouse[_0xbaee3e(0x26d)]([{'$unwind':_0xbaee3e(0x253)},{'$lookup':{'from':_0xbaee3e(0x244),'localField':'product_details.product_name','foreignField':_0xbaee3e(0x266),'as':_0xbaee3e(0x1fa)}},{'$unwind':_0xbaee3e(0x1d3)},{'$project':{'product_name':_0xbaee3e(0x1cc),'product_stock':_0xbaee3e(0x24c)}},{'$group':{'_id':_0xbaee3e(0x235),'product_stock':{'$sum':_0xbaee3e(0x230)}}}]);console[_0xbaee3e(0x24d)](_0xbaee3e(0x25c),_0x5f0c25),_0x5f0c25[_0xbaee3e(0x1c7)](_0x39f421=>{const _0x5b9b18=_0xbaee3e,_0x30dfa1=_0x1d4a3b[_0x5b9b18(0x283)](_0x83e56a=>{const _0x1b5943=_0x5b9b18;_0x83e56a[_0x1b5943(0x266)]==_0x39f421[_0x1b5943(0x202)]&&(_0x83e56a[_0x1b5943(0x213)]=parseInt(_0x83e56a[_0x1b5943(0x213)])+parseInt(_0x39f421[_0x1b5943(0x26b)]));});}),console[_0xbaee3e(0x24d)](_0xbaee3e(0x282),_0x1d4a3b);if(_0x5eca11[0x0][_0xbaee3e(0x21c)]==_0xbaee3e(0x242))var _0x32d0f0=users[_0xbaee3e(0x1d7)];else{if(_0x5eca11[0x0]['language']==_0xbaee3e(0x1ed))var _0x32d0f0=users[_0xbaee3e(0x1ed)];else{if(_0x5eca11[0x0][_0xbaee3e(0x21c)]==_0xbaee3e(0x215))var _0x32d0f0=users['German'];else{if(_0x5eca11[0x0][_0xbaee3e(0x21c)]==_0xbaee3e(0x217))var _0x32d0f0=users[_0xbaee3e(0x217)];else{if(_0x5eca11[0x0][_0xbaee3e(0x21c)]==_0xbaee3e(0x252))var _0x32d0f0=users['French'];else{if(_0x5eca11[0x0][_0xbaee3e(0x21c)]==_0xbaee3e(0x1eb))var _0x32d0f0=users['Portuguese'];else{if(_0x5eca11[0x0][_0xbaee3e(0x21c)]=='Chinese')var _0x32d0f0=users[_0xbaee3e(0x21d)];else{if(_0x5eca11[0x0][_0xbaee3e(0x21c)]==_0xbaee3e(0x21e))var _0x32d0f0=users['Arabic'];}}}}}}}_0x5c3299[_0xbaee3e(0x22e)](_0xbaee3e(0x244),{'success':_0x93a792[_0xbaee3e(0x1ff)]('success'),'errors':_0x93a792[_0xbaee3e(0x1ff)](_0xbaee3e(0x1e9)),'alldata':_0x1d4a3b,'profile':_0x4bfac4,'master_shop':_0x5eca11,'role':_0x188f99,'product_stock':_0x5f0c25,'language':_0x32d0f0});}catch(_0x9b3052){console[_0xbaee3e(0x24d)](_0x9b3052);}}),router[a0_0x5efcbd(0x1de)]('/view/add_products',auth,async(_0x247531,_0x2303f2)=>{const _0x4e1a27=a0_0x5efcbd;try{const {username:_0x2fc50e,email:_0x4725cf,role:_0x485d31}=_0x247531['user'],_0x1c20ef=_0x247531[_0x4e1a27(0x1d4)],_0x5014ba=await profile[_0x4e1a27(0x261)]({'email':_0x1c20ef['email']}),_0x3aa733=await master_shop['find']();console['log'](_0x4e1a27(0x221),_0x3aa733);const _0x318e52=await categories[_0x4e1a27(0x25d)]({}),_0xe5d37b=await brands[_0x4e1a27(0x25d)]({}),_0x23d399=await units[_0x4e1a27(0x25d)]({}),_0x261399=await warehouse[_0x4e1a27(0x25d)]({'status':_0x4e1a27(0x23a)});if(_0x3aa733[0x0]['language']==_0x4e1a27(0x242))var _0x1fd31a=users['English'];else{if(_0x3aa733[0x0][_0x4e1a27(0x21c)]==_0x4e1a27(0x1ed))var _0x1fd31a=users['Hindi'];else{if(_0x3aa733[0x0]['language']==_0x4e1a27(0x215))var _0x1fd31a=users[_0x4e1a27(0x215)];else{if(_0x3aa733[0x0][_0x4e1a27(0x21c)]==_0x4e1a27(0x217))var _0x1fd31a=users[_0x4e1a27(0x217)];else{if(_0x3aa733[0x0][_0x4e1a27(0x21c)]==_0x4e1a27(0x252))var _0x1fd31a=users['French'];else{if(_0x3aa733[0x0][_0x4e1a27(0x21c)]==_0x4e1a27(0x1eb))var _0x1fd31a=users[_0x4e1a27(0x278)];else{if(_0x3aa733[0x0]['language']==_0x4e1a27(0x21d))var _0x1fd31a=users['Chinese'];else{if(_0x3aa733[0x0][_0x4e1a27(0x21c)]==_0x4e1a27(0x21e))var _0x1fd31a=users[_0x4e1a27(0x219)];}}}}}}}_0x2303f2[_0x4e1a27(0x22e)](_0x4e1a27(0x24b),{'success':_0x247531[_0x4e1a27(0x1ff)](_0x4e1a27(0x1e4)),'errors':_0x247531['flash'](_0x4e1a27(0x1e9)),'role':_0x1c20ef,'profile':_0x5014ba,'categories':_0x318e52,'brands':_0xe5d37b,'master_shop':_0x3aa733,'units':_0x23d399,'language':_0x1fd31a,'find_data':_0x261399});}catch(_0x473a5e){console['log'](_0x473a5e);}}),router[a0_0x5efcbd(0x1f5)](a0_0x5efcbd(0x284),auth,upload[a0_0x5efcbd(0x249)]('image'),async(_0x4a47a0,_0x1d99f8)=>{const _0x5251a5=a0_0x5efcbd;try{const {name:_0x57c973,category:_0x21c137,brand:_0x564ad2,unit:_0xc8bb3e,alertquantity:_0x37539d,stock:_0x2cfa13,product_code:_0x26976e,warehouse:_0x467eb5,primary_ItemCode:_0x197e09,second_ItemCode:_0x2c69e6,second_unit:_0xb846e0,maxPerUnit:_0x2a56ed,MaxPerProduct:_0xba5a04,sales_cat:_0x2e3bb2,type_prod:_0xe824be}=_0x4a47a0['body'],_0x1529f5=_0x4a47a0['file']?.['filename']||'defaultProduct.avif',_0x5cd5a4=new product({'image':_0x1529f5,'name':_0x57c973,'category':_0x21c137,'brand':_0x564ad2,'unit':_0xc8bb3e,'alertquantity':_0x37539d,'stock':_0x2cfa13,'product_code':_0x26976e,'warehouse':_0x467eb5,'primary_code':_0x197e09,'secondary_code':_0x2c69e6,'second_unit':_0xb846e0,'maxStocks':_0xba5a04,'maxProdPerUnit':_0x2a56ed,'sales_category':_0x2e3bb2,'type_products':_0xe824be}),_0x294285=await _0x5cd5a4['save'](),_0x33c809=await categories[_0x5251a5(0x261)]({'name':_0x21c137});_0x33c809['products']=parseInt(_0x33c809[_0x5251a5(0x244)])+0x1,await _0x33c809[_0x5251a5(0x279)]();const _0x49aec0=await brands[_0x5251a5(0x261)]({'name':_0x564ad2});_0x49aec0[_0x5251a5(0x244)]=parseInt(_0x49aec0[_0x5251a5(0x244)])+0x1,await _0x49aec0[_0x5251a5(0x279)]();const _0xc5a770=await units[_0x5251a5(0x261)]({'name':_0xc8bb3e});_0xc5a770['products']=parseInt(_0xc5a770['products'])+0x1,await _0xc5a770['save'](),_0x4a47a0[_0x5251a5(0x1ff)](_0x5251a5(0x1e4),'product\x20add\x20successfully'),_0x1d99f8[_0x5251a5(0x210)](_0x5251a5(0x1e3));}catch(_0x14abef){console[_0x5251a5(0x24d)](_0x14abef);}}),router[a0_0x5efcbd(0x1de)](a0_0x5efcbd(0x1cd),auth,async(_0x311868,_0x456efd)=>{const _0x494d64=a0_0x5efcbd;try{const {username:_0x28c562,email:_0x8689a6,role:_0x24d609}=_0x311868[_0x494d64(0x1d4)],_0x1a780b=_0x311868[_0x494d64(0x1d4)],_0x1bf325=await profile[_0x494d64(0x261)]({'email':_0x1a780b[_0x494d64(0x238)]}),_0xd438d6=await master_shop[_0x494d64(0x25d)]();console[_0x494d64(0x24d)](_0x494d64(0x27b),_0xd438d6);const _0x377c0b=_0x311868['params']['id'],_0xf5e498=await product['findById'](_0x377c0b),_0x2db2f1=await categories['find']({}),_0x416b74=await brands[_0x494d64(0x25d)]({}),_0x4f1b79=await units['find']({}),_0x3045a2=await warehouse[_0x494d64(0x25d)]({'status':_0x494d64(0x23a)}),_0x54de3c=await units['aggregate']([{'$group':{'_id':_0x494d64(0x234),'secondaryunit':{'$first':_0x494d64(0x205)}}}]);if(_0xd438d6[0x0][_0x494d64(0x21c)]==_0x494d64(0x242))var _0x4c30be=users[_0x494d64(0x1d7)];else{if(_0xd438d6[0x0]['language']==_0x494d64(0x1ed))var _0x4c30be=users[_0x494d64(0x1ed)];else{if(_0xd438d6[0x0][_0x494d64(0x21c)]=='German')var _0x4c30be=users[_0x494d64(0x215)];else{if(_0xd438d6[0x0][_0x494d64(0x21c)]==_0x494d64(0x217))var _0x4c30be=users['Spanish'];else{if(_0xd438d6[0x0][_0x494d64(0x21c)]==_0x494d64(0x252))var _0x4c30be=users['French'];else{if(_0xd438d6[0x0][_0x494d64(0x21c)]=='Portuguese\x20(BR)')var _0x4c30be=users['Portuguese'];else{if(_0xd438d6[0x0][_0x494d64(0x21c)]==_0x494d64(0x21d))var _0x4c30be=users[_0x494d64(0x21d)];else{if(_0xd438d6[0x0][_0x494d64(0x21c)]==_0x494d64(0x21e))var _0x4c30be=users[_0x494d64(0x219)];}}}}}}}_0x456efd[_0x494d64(0x22e)](_0x494d64(0x24a),{'success':_0x311868[_0x494d64(0x1ff)](_0x494d64(0x1e4)),'errors':_0x311868['flash']('errors'),'role':_0x1a780b,'profile':_0x1bf325,'alldata':_0xf5e498,'categories':_0x2db2f1,'brands':_0x416b74,'master_shop':_0xd438d6,'units':_0x4f1b79,'secondunit':_0x54de3c,'find_data':_0x3045a2,'language':_0x4c30be});}catch(_0x4b5e94){console[_0x494d64(0x24d)](_0x4b5e94);}}),router[a0_0x5efcbd(0x1f5)](a0_0x5efcbd(0x1cd),auth,upload['single']('image'),async(_0x38ab47,_0x3a23ca)=>{const _0x50b56e=a0_0x5efcbd;try{const _0x31dcf4=_0x38ab47[_0x50b56e(0x20b)]['id'],_0x411fc9=await product['findById'](_0x31dcf4),{image:_0x147520,name:_0x2b0ca7,category:_0x1b1db9,brand:_0x2015d6,sku:_0x571135,unit:_0x57e321,alertquantity:_0x1d94af,product_code:_0x44eadd,warehouse:_0x39a292,primary_ItemCode:_0x14e1eb,second_ItemCode:_0x2f7012,second_unit:_0x1c0f08,maxPerUnit:_0x294038,MaxPerProduct:_0x215dd2,prod_catdata:_0x48939f,type_prod:_0x5e1fbe,sales_cat:_0x350193}=_0x38ab47[_0x50b56e(0x1d8)];_0x38ab47[_0x50b56e(0x1f6)]&&(_0x411fc9[_0x50b56e(0x1f9)]=_0x38ab47['file'][_0x50b56e(0x1e6)]);_0x411fc9['name']=_0x2b0ca7,_0x411fc9['category']=_0x1b1db9,_0x411fc9[_0x50b56e(0x265)]=_0x2015d6,_0x411fc9['sku']=_0x571135,_0x411fc9['unit']=_0x57e321,_0x411fc9[_0x50b56e(0x255)]=_0x1d94af,_0x411fc9[_0x50b56e(0x22d)]=_0x44eadd,_0x411fc9[_0x50b56e(0x27e)]=_0x39a292,_0x411fc9[_0x50b56e(0x1fe)]=_0x14e1eb,_0x411fc9[_0x50b56e(0x239)]=_0x2f7012,_0x411fc9[_0x50b56e(0x208)]=_0x1c0f08,_0x411fc9[_0x50b56e(0x1df)]=_0x215dd2,_0x411fc9[_0x50b56e(0x1d6)]=_0x294038,_0x411fc9['product_category']=_0x48939f,_0x411fc9[_0x50b56e(0x23d)]=_0x5e1fbe,_0x411fc9['sales_category']=_0x350193;const _0x1af45a=await _0x411fc9[_0x50b56e(0x279)]();console['log'](_0x50b56e(0x274),_0x411fc9),_0x38ab47[_0x50b56e(0x1ff)](_0x50b56e(0x1e4),_0x50b56e(0x26c)),_0x3a23ca[_0x50b56e(0x210)](_0x50b56e(0x1e3));}catch(_0x5a2b99){console[_0x50b56e(0x24d)](_0x5a2b99);}}),router['get'](a0_0x5efcbd(0x1f0),auth,async(_0x10d8eb,_0x460bf4)=>{const _0xeb8c9e=a0_0x5efcbd;try{const {username:_0x5c1470,email:_0x899cb1,role:_0x10264b}=_0x10d8eb[_0xeb8c9e(0x1d4)],_0x2bb458=_0x10d8eb[_0xeb8c9e(0x1d4)],_0x9fa167=await profile[_0xeb8c9e(0x261)]({'email':_0x2bb458[_0xeb8c9e(0x238)]}),_0x2a3aa8=await master_shop[_0xeb8c9e(0x25d)]();console[_0xeb8c9e(0x24d)](_0xeb8c9e(0x1c1),_0x2a3aa8);const _0x1c9de2=_0x10d8eb[_0xeb8c9e(0x20b)]['id'],_0x1f6d31=await product[_0xeb8c9e(0x1c6)](_0x1c9de2);console[_0xeb8c9e(0x24d)](_0xeb8c9e(0x1c9),_0x1f6d31);if(_0x2a3aa8[0x0][_0xeb8c9e(0x21c)]==_0xeb8c9e(0x242))var _0x27b184=users[_0xeb8c9e(0x1d7)];else{if(_0x2a3aa8[0x0]['language']==_0xeb8c9e(0x1ed))var _0x27b184=users[_0xeb8c9e(0x1ed)];else{if(_0x2a3aa8[0x0]['language']==_0xeb8c9e(0x215))var _0x27b184=users[_0xeb8c9e(0x215)];else{if(_0x2a3aa8[0x0][_0xeb8c9e(0x21c)]=='Spanish')var _0x27b184=users[_0xeb8c9e(0x217)];else{if(_0x2a3aa8[0x0][_0xeb8c9e(0x21c)]==_0xeb8c9e(0x252))var _0x27b184=users['French'];else{if(_0x2a3aa8[0x0][_0xeb8c9e(0x21c)]=='Portuguese\x20(BR)')var _0x27b184=users['Portuguese'];else{if(_0x2a3aa8[0x0]['language']=='Chinese')var _0x27b184=users[_0xeb8c9e(0x21d)];else{if(_0x2a3aa8[0x0][_0xeb8c9e(0x21c)]==_0xeb8c9e(0x21e))var _0x27b184=users[_0xeb8c9e(0x219)];}}}}}}}_0x460bf4[_0xeb8c9e(0x22e)](_0xeb8c9e(0x204),{'success':_0x10d8eb[_0xeb8c9e(0x1ff)](_0xeb8c9e(0x1e4)),'errors':_0x10d8eb['flash']('errors'),'role':_0x2bb458,'profile':_0x9fa167,'alldata':_0x1f6d31,'master_shop':_0x2a3aa8,'language':_0x27b184});}catch(_0x1bf7b5){console[_0xeb8c9e(0x24d)](_0x1bf7b5);}}),router[a0_0x5efcbd(0x1de)](a0_0x5efcbd(0x1fb),auth,async(_0x444d1c,_0x228c6b)=>{const _0x1caca4=a0_0x5efcbd;try{const _0x467171=new excelJS[(_0x1caca4(0x245))](),_0x2d37ad=_0x467171[_0x1caca4(0x20a)](_0x1caca4(0x200));return _0x2d37ad[_0x1caca4(0x240)]=[{'header':_0x1caca4(0x1e0),'key':_0x1caca4(0x264),'width':0xa},{'header':'Brands','key':_0x1caca4(0x1d5),'width':0xa},{'header':'Units','key':_0x1caca4(0x27f),'width':0xa},{'header':_0x1caca4(0x1c3),'key':'PSecondaryUnits','width':0xa},{'header':_0x1caca4(0x1f1),'key':_0x1caca4(0x20e),'width':0xa},{'header':'Primary_Code','key':_0x1caca4(0x257),'width':0xa},{'header':_0x1caca4(0x1bb),'key':'ProductCode','width':0xa},{'header':_0x1caca4(0x229),'key':_0x1caca4(0x257),'width':0xa},{'header':_0x1caca4(0x262),'key':_0x1caca4(0x1c4),'width':0xa},{'header':_0x1caca4(0x233),'key':_0x1caca4(0x212),'width':0xa},{'header':'Maximum_Stocks','key':_0x1caca4(0x212),'width':0xa},{'header':'Products_category','key':_0x1caca4(0x1e2),'width':0xa}],_0x228c6b[_0x1caca4(0x203)]('Content-Type',_0x1caca4(0x1f8)),_0x228c6b[_0x1caca4(0x203)]('Content-Disposition',_0x1caca4(0x1f4)),_0x467171[_0x1caca4(0x206)][_0x1caca4(0x1dd)](_0x228c6b)['then'](()=>{const _0x40402e=_0x1caca4;_0x228c6b[_0x40402e(0x1f7)](0xc8);});}catch(_0x4c8de4){_0x228c6b[_0x1caca4(0x1f7)](0x190)[_0x1caca4(0x27d)](_0x4c8de4);}});const storage1=multer['diskStorage']({'destination':(_0x33e583,_0x55981c,_0x4fc696)=>{const _0x264f67=a0_0x5efcbd;_0x4fc696(null,_0x264f67(0x1ce));},'filename':(_0x2d1667,_0x143ff6,_0x17e06d)=>{const _0x1dd430=a0_0x5efcbd;_0x17e06d(null,Date[_0x1dd430(0x1c2)]()+_0x143ff6['originalname']);}}),uploadMigrate=multer({'storage':storage1});function a0_0x28dd(){const _0x2d868f=['2367vsiGUb','numeric','unit\x20data\x20update\x20successfully','$product_docs','user','PBrands','maxProdPerUnit','English','body','\x20unit\x20is\x20add\x20successfully','/filter_product','brand\x20data\x20delete\x20successfully','category','write','get','maxStocks','Product_Name','/categories/:id','Prod_Cat','/products/view','success','5691190Qvmzsg','filename','$product_category','concat','errors','height','Portuguese\x20(BR)','brand\x20data\x20update\x20successfully','Hindi','utils','express/lib/response','/barcode/:id','max_number_per_units','SheetNames','$category','attachment;\x20filename=Product_Migration_File.xlsx','post','file','status','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','image','product_docs','/products_export_migrate_file','Brands','product_barcode_products','primary_code','flash','Products','pdfkit-table','_id','setHeader','product_barcode','$secondary_unit','xlsx','end','secondary_unit','../models/all_models','addWorksheet','params','brands','/brands/delete/:id','MaxperUnits','message','redirect','254284muJSua','PAlQty','stock','defaultProduct.avif','German','categories\x20data\x20delete\x20successfully','Spanish','Units','Arabic','migrate_product_fule','addPage','language','Chinese','Arabic\x20(ae)','../middleware/auth','exports','master','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','sheet_to_json','bind','findByIdAndUpdate','push','Sheets','/brands','Product_Code','categ','canvas','express','product_code','render','/view','$product_stock','/categories/delete/:id','../public/language/languages.json','Alert_QTY','$_id','$product_name','3438HacXkf','37961HYaDxz','email','secondary_code','Enabled','1087725ZmKZmZ','length','type_products','/categories','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','columns','/units','English\x20(US)','Products_category','products','Workbook','/barcode_filter','Maximum_Stocks','/products/brands','single','edit_product','add_product','$product_details.product_stock','log','json','67162eIXbtE','base64','width','French','$product_details','exceljs','alertquantity','/print_barcode','ProductCode','Router','long','categories_edit','/products/units','Products\x20warehouse_data','find','originalname','/units/:id','\x20added\x20successfully','findOne','Category','\x20<>\x20','PName','brand','name','Primary_Code','15LibIhQ','toBuffer','data','product_stock','product\x20update\x20successfully','aggregate','5008PtbJeF','multer','units','7273Oxboow','unit','findByIdAndDelete','product\x20edit','/print_barcode_filter/','categories','Finished\x20Goods','Portuguese','save','/products/categories','edit\x20Product\x20master','\x20categories\x20is\x20add\x20successfully','send','warehouse','PUnits','min','public/upload','Products\x20find_data','map','/view/add_products','15LnWTKC','readFile','Secondary_Code','CODE128','/print_barcode_filter_search/','5388sYQTAC','prod_categ','Raw\x20Materials','barcode\x20Product\x20master','now','Secondary_Units','PCat','/barcode_data','findById','forEach','product_category','barcode\x20user_id','$brand','/print_barcode_single/:id','$product_details.product_name','/view/:id','public/Migration','\x20brand\x20is\x20add\x20successfully'];a0_0x28dd=function(){return _0x2d868f;};return a0_0x28dd();}router[a0_0x5efcbd(0x1f5)]('/products_import_migrate_file',auth,uploadMigrate[a0_0x5efcbd(0x249)](a0_0x5efcbd(0x21a)),async(_0x1a27bd,_0x310c91)=>{const _0x2b9ae8=a0_0x5efcbd,_0x46cf5c=_0x1a27bd[_0x2b9ae8(0x1f6)]['filename'],_0x5bae7e=await xlsx[_0x2b9ae8(0x286)]('public/Migration/'+_0x46cf5c);let _0x4af8f0=_0x5bae7e[_0x2b9ae8(0x1f2)],_0x534a64=xlsx[_0x2b9ae8(0x1ee)][_0x2b9ae8(0x223)](_0x5bae7e[_0x2b9ae8(0x227)][_0x4af8f0[0x0]]);for(const _0x571fea of _0x534a64){const _0x4c76ab=_0x571fea[_0x2b9ae8(0x1e0)],_0x2328fa=_0x571fea[_0x2b9ae8(0x1fc)],_0x31d9e5=_0x571fea[_0x2b9ae8(0x218)],_0x13500d=_0x571fea['Secondary_Units'],_0x4da3ad=_0x571fea[_0x2b9ae8(0x229)],_0x4554a7=_0x571fea[_0x2b9ae8(0x262)],_0x4dd82e=_0x571fea[_0x2b9ae8(0x233)],_0x4234a0=_0x571fea[_0x2b9ae8(0x267)],_0x34b524=_0x571fea['Secondary_Code'],_0xd4ccca=_0x571fea[_0x2b9ae8(0x247)],_0x469cd7=_0x571fea[_0x2b9ae8(0x1f1)],_0x36facb=_0x571fea[_0x2b9ae8(0x243)];try{let _0x5de15c=await categories['findOne']({'name':_0x4554a7});if(!_0x5de15c){const _0x567a8e=new categories({'name':_0x4554a7,'products':'0'});_0x5de15c=await _0x567a8e[_0x2b9ae8(0x279)]();}let _0x4dc3f0=await brands[_0x2b9ae8(0x261)]({'name':_0x2328fa});if(!_0x4dc3f0){const _0x5b5607=new brands({'name':_0x2328fa,'products':'0'});_0x4dc3f0=await _0x5b5607[_0x2b9ae8(0x279)]();}let _0x472401=await units[_0x2b9ae8(0x261)]({'name':_0x31d9e5,'secondary_unit':_0x13500d});if(!_0x472401){const _0x4d4001=new units({'name':_0x31d9e5,'secondary_unit':_0x13500d,'products':'0'});_0x472401=await _0x4d4001[_0x2b9ae8(0x279)]();}const _0x231565=await product[_0x2b9ae8(0x25d)]({'name':_0x4c76ab,'category':_0x5de15c[_0x2b9ae8(0x266)],'brand':_0x4dc3f0[_0x2b9ae8(0x266)],'secondary_unit':_0x472401[_0x2b9ae8(0x208)],'product_code':_0x4da3ad});console[_0x2b9ae8(0x24d)](_0x231565[_0x2b9ae8(0x23c)]+_0x2b9ae8(0x263)+_0x5de15c[_0x2b9ae8(0x266)]+_0x2b9ae8(0x263)+_0x4dc3f0[_0x2b9ae8(0x266)]+_0x2b9ae8(0x263)+_0x472401[_0x2b9ae8(0x208)]+_0x2b9ae8(0x263)+_0x4da3ad+'\x20<>\x20'+_0x4c76ab);if(_0x231565[_0x2b9ae8(0x23c)]===0x0){const _0x1f6bce=new product({'image':_0x2b9ae8(0x214),'name':_0x4c76ab,'category':_0x5de15c['name'],'brand':_0x4dc3f0['name'],'unit':_0x472401[_0x2b9ae8(0x266)],'alertquantity':_0x4dd82e,'product_code':_0x4da3ad,'secondary_unit':_0x472401[_0x2b9ae8(0x208)],'primary_code':_0x4234a0,'secondary_code':_0x34b524,'maxStocks':_0xd4ccca,'maxProdPerUnit':_0x469cd7,'product_category':_0x36facb}),_0x158eb7=await _0x1f6bce[_0x2b9ae8(0x279)]();_0x5de15c['products']=parseInt(_0x5de15c[_0x2b9ae8(0x244)])+0x1,await _0x5de15c['save'](),_0x4dc3f0['products']=parseInt(_0x4dc3f0['products'])+0x1,await _0x4dc3f0[_0x2b9ae8(0x279)](),_0x472401[_0x2b9ae8(0x244)]=parseInt(_0x472401['products'])+0x1,await _0x472401[_0x2b9ae8(0x279)](),_0x1a27bd[_0x2b9ae8(0x1ff)](_0x2b9ae8(0x1e4),_0x4c76ab+_0x2b9ae8(0x260));}else{console[_0x2b9ae8(0x24d)](_0x231565[0x0]);const _0xc0ccdd=_0x231565[0x0];_0xc0ccdd[_0x2b9ae8(0x1dc)]=_0x5de15c[_0x2b9ae8(0x266)],_0xc0ccdd[_0x2b9ae8(0x265)]=_0x4dc3f0['name'],_0xc0ccdd[_0x2b9ae8(0x272)]=_0x472401[_0x2b9ae8(0x266)],_0xc0ccdd['alertquantity']=_0x4dd82e,_0xc0ccdd[_0x2b9ae8(0x22d)]=_0x4da3ad,_0xc0ccdd[_0x2b9ae8(0x208)]=_0x472401['secondary_unit'],_0xc0ccdd[_0x2b9ae8(0x1fe)]=_0x4234a0,_0xc0ccdd['secondary_code']=_0x34b524,_0xc0ccdd[_0x2b9ae8(0x1df)]=_0xd4ccca,_0xc0ccdd[_0x2b9ae8(0x1d6)]=_0x469cd7,_0xc0ccdd[_0x2b9ae8(0x1c8)]=_0x36facb;const _0x180b12=await _0xc0ccdd['save']();_0x1a27bd[_0x2b9ae8(0x1ff)](_0x2b9ae8(0x1e4),_0x180b12[_0x2b9ae8(0x266)]+'\x20Edit\x20Successfully');}}catch(_0x367fa8){_0x310c91['status'](0x1f4)[_0x2b9ae8(0x24e)]({'proderror':_0x367fa8[_0x2b9ae8(0x20f)],'aproduct':_0x4c76ab});}}_0x310c91[_0x2b9ae8(0x210)](_0x2b9ae8(0x1e3));}),router['post']('/select_data',auth,async(_0x3053f3,_0x1d6816)=>{const _0x471f22=a0_0x5efcbd;try{console[_0x471f22(0x24d)](_0x3053f3[_0x471f22(0x1d8)]);const {data_cateory:_0x3322d9,datachoose:_0x1e4b95}=_0x3053f3[_0x471f22(0x1d8)];var _0x157330;if(_0x1e4b95==_0x471f22(0x1bf))_0x157330=await product['aggregate']([{'$group':{'_id':_0x471f22(0x1e7)}}]);else{if(_0x1e4b95==_0x471f22(0x20c))_0x157330=await product[_0x471f22(0x26d)]([{'$match':{'product_category':_0x3322d9}},{'$group':{'_id':_0x471f22(0x1ca)}}]);else _0x1e4b95==_0x471f22(0x22a)&&(_0x157330=await product['aggregate']([{'$match':{'product_category':_0x3322d9}},{'$group':{'_id':_0x471f22(0x1f3)}}]));}_0x1d6816[_0x471f22(0x24e)](_0x157330);}catch(_0x4fe957){_0x1d6816[_0x471f22(0x24e)]({'message':_0x4fe957[_0x471f22(0x20f)]});}}),router[a0_0x5efcbd(0x1f5)](a0_0x5efcbd(0x1da),auth,async(_0x452373,_0x51c569)=>{const _0x391c3b=a0_0x5efcbd;try{const {data_choosing:_0x4a75c4,data_selected:_0xc703e4}=_0x452373[_0x391c3b(0x1d8)];var _0x326252;if(_0x4a75c4==_0x391c3b(0x1bf))_0x326252=await product['aggregate']([{'$match':{'product_category':_0xc703e4}}]);else{if(_0x4a75c4==_0x391c3b(0x20c))_0x326252=await product[_0x391c3b(0x26d)]([{'$match':{'brand':_0xc703e4}}]);else _0x4a75c4==_0x391c3b(0x22a)&&(_0x326252=await product[_0x391c3b(0x26d)]([{'$match':{'category':_0xc703e4}}]));}_0x51c569['json'](_0x326252);}catch(_0x2c7e0f){_0x51c569[_0x391c3b(0x24e)]({'message':_0x2c7e0f[_0x391c3b(0x20f)]});}}),router[a0_0x5efcbd(0x1de)](a0_0x5efcbd(0x256),auth,async(_0x1bc87d,_0x609533)=>{const _0x413aed=a0_0x5efcbd,_0x3a5324=_0x1bc87d[_0x413aed(0x1d4)],_0x5ac93e=await profile[_0x413aed(0x261)]({'email':_0x3a5324[_0x413aed(0x238)]}),_0x5eaea4=await master_shop[_0x413aed(0x25d)](),_0x54997a=await product[_0x413aed(0x25d)]();if(_0x5eaea4[0x0]['language']==_0x413aed(0x242))var _0x16382f=users[_0x413aed(0x1d7)];else{if(_0x5eaea4[0x0][_0x413aed(0x21c)]==_0x413aed(0x1ed))var _0x16382f=users[_0x413aed(0x1ed)];else{if(_0x5eaea4[0x0][_0x413aed(0x21c)]=='German')var _0x16382f=users[_0x413aed(0x215)];else{if(_0x5eaea4[0x0][_0x413aed(0x21c)]==_0x413aed(0x217))var _0x16382f=users[_0x413aed(0x217)];else{if(_0x5eaea4[0x0][_0x413aed(0x21c)]==_0x413aed(0x252))var _0x16382f=users[_0x413aed(0x252)];else{if(_0x5eaea4[0x0][_0x413aed(0x21c)]==_0x413aed(0x1eb))var _0x16382f=users[_0x413aed(0x278)];else{if(_0x5eaea4[0x0][_0x413aed(0x21c)]==_0x413aed(0x21d))var _0x16382f=users[_0x413aed(0x21d)];else{if(_0x5eaea4[0x0]['language']==_0x413aed(0x21e))var _0x16382f=users[_0x413aed(0x219)];}}}}}}}_0x609533[_0x413aed(0x22e)](_0x413aed(0x1fd),{'success':_0x1bc87d[_0x413aed(0x1ff)](_0x413aed(0x1e4)),'errors':_0x1bc87d['flash'](_0x413aed(0x1e9)),'role':_0x3a5324,'profile':_0x5ac93e,'products':_0x54997a,'master_shop':_0x5eaea4,'language':_0x16382f});}),router[a0_0x5efcbd(0x1f5)](a0_0x5efcbd(0x1c5),auth,async(_0x3e74bb,_0x15c306)=>{const _0x3dc0bc=a0_0x5efcbd,_0x3bb4c0=await product[_0x3dc0bc(0x25d)]();_0x15c306[_0x3dc0bc(0x24e)]({'data':_0x3bb4c0});}),router[a0_0x5efcbd(0x1f5)](a0_0x5efcbd(0x246),auth,async(_0x405a24,_0x3a0e01)=>{const _0x11f79e=a0_0x5efcbd;try{const {dataProdCat:_0x4c4af8,dataProdIdentity:_0x222192}=_0x405a24[_0x11f79e(0x1d8)];var _0xa0e781;switch(_0x4c4af8){case'fg':switch(_0x222192){case _0x11f79e(0x1fc):_0xa0e781=await product[_0x11f79e(0x26d)]([{'$match':{'product_category':_0x11f79e(0x277)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x11f79e(0x234)}}]);break;case _0x11f79e(0x262):_0xa0e781=await product[_0x11f79e(0x26d)]([{'$match':{'product_category':_0x11f79e(0x277)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x11f79e(0x234)}}]);break;}break;case'rm':switch(_0x222192){case _0x11f79e(0x1fc):_0xa0e781=await product[_0x11f79e(0x26d)]([{'$match':{'product_category':_0x11f79e(0x1c0)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x11f79e(0x234)}}]);break;case'Category':_0xa0e781=await product[_0x11f79e(0x26d)]([{'$match':{'product_category':_0x11f79e(0x1c0)}},{'$group':{'_id':_0x11f79e(0x1f3)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x3a0e01[_0x11f79e(0x24e)](_0xa0e781);}catch(_0x56701b){_0x3a0e01[_0x11f79e(0x24e)]({'message':_0x56701b[_0x11f79e(0x20f)]});}}),router['post'](a0_0x5efcbd(0x275),auth,async(_0x3c4b73,_0x537f01)=>{const _0x2c5f78=a0_0x5efcbd;try{console[_0x2c5f78(0x24d)](_0x3c4b73[_0x2c5f78(0x1d8)]);const {prod_cat:_0x67249d,identity:_0x23fa58,valueData:_0xfbf8f3,typeofbarcode:_0x2c465e}=_0x3c4b73[_0x2c5f78(0x1d8)];let _0x4c85b9;switch(_0x67249d){case'fg':if(_0x23fa58==_0x2c5f78(0x1fc))_0x4c85b9=await product['aggregate']([{'$match':{'product_category':_0x2c5f78(0x277),'brand':_0xfbf8f3}}]);else _0x23fa58==_0x2c5f78(0x262)&&(_0x4c85b9=await product[_0x2c5f78(0x26d)]([{'$match':{'product_category':_0x2c5f78(0x277),'category':_0xfbf8f3}}]));break;case'rm':if(_0x23fa58==_0x2c5f78(0x1fc))_0x4c85b9=await product['aggregate']([{'$match':{'product_category':_0x2c5f78(0x1c0),'brand':_0xfbf8f3}}]);else _0x23fa58=='Category'&&(_0x4c85b9=await product[_0x2c5f78(0x26d)]([{'$match':{'product_category':_0x2c5f78(0x1c0),'category':_0xfbf8f3}}]));break;}const _0x50a003=_0x34263a=>_0x34263a*0x48,_0x1e98b4={'width':0x3,'height':0x1},_0xd2a8ae=new PDFDocument({'margin':_0x50a003(0.75),'size':[_0x50a003(_0x1e98b4[_0x2c5f78(0x251)]),_0x50a003(_0x1e98b4[_0x2c5f78(0x1ea)])],'bufferPages':!![]}),_0x55d68d=_0x4c85b9[_0x2c5f78(0x23c)];for(let _0x5c0014=0x0;_0x5c0014<=_0x55d68d;_0x5c0014++){if(_0x5c0014!=_0x55d68d){const _0x24333c=_0x4c85b9[_0x5c0014][_0x2c5f78(0x266)],_0x5c424c=_0x4c85b9[_0x5c0014][_0x2c5f78(0x1fe)],_0x5ae40b=_0x4c85b9[_0x5c0014][_0x2c5f78(0x239)],_0x3a3446=_0x4c85b9[_0x5c0014][_0x2c5f78(0x22d)];var _0x5f0f5f;switch(_0x2c465e){case'1':_0x5f0f5f=_0x5c424c;break;case'2':_0x5f0f5f=_0x5ae40b;break;case'3':_0x5f0f5f=_0x3a3446;break;}const _0xf3833b={'width':0xd2,'height':0x64},_0x4963d4={'width':_0x50a003(_0x1e98b4['width']),'height':_0x50a003(_0x1e98b4[_0x2c5f78(0x1ea)])},_0x59413f=new Canvas();JsBarcode(_0x59413f,_0x5f0f5f,{'format':'CODE128','height':_0xf3833b['height'],'displayValue':!![],'text':_0x5f0f5f});const _0x4a5263=_0x59413f[_0x2c5f78(0x269)](),_0x3f3ec4=_0x4963d4[_0x2c5f78(0x251)]/_0xf3833b[_0x2c5f78(0x251)],_0xacbacf=_0x4963d4[_0x2c5f78(0x1ea)]/_0xf3833b['height'],_0x557468=Math[_0x2c5f78(0x280)](_0x3f3ec4,_0xacbacf),_0x4053c5=_0xf3833b[_0x2c5f78(0x251)]*_0x557468,_0x5dba13=_0xf3833b[_0x2c5f78(0x1ea)]*_0x557468,_0x1c2d6b=(_0x4963d4['width']-_0x4053c5)/0x2,_0x10a225=(_0x4963d4[_0x2c5f78(0x1ea)]-_0x5dba13)/0x2;_0xd2a8ae['image'](_0x4a5263,_0x1c2d6b,_0x10a225,{'width':_0x4053c5,'height':_0x5dba13}),_0x5c0014!=_0x55d68d&&_0xd2a8ae[_0x2c5f78(0x21b)]();}}const _0xa843b6=[];_0xd2a8ae['on'](_0x2c5f78(0x26a),_0xa843b6['push'][_0x2c5f78(0x224)](_0xa843b6)),_0xd2a8ae['on'](_0x2c5f78(0x207),()=>{const _0x512b2f=_0x2c5f78,_0x47b42b=Buffer['concat'](_0xa843b6),_0xb7d021=_0x47b42b['toString'](_0x512b2f(0x250));_0x537f01[_0x512b2f(0x24e)]({'pdfContent':_0xb7d021});}),_0xd2a8ae['end']();}catch(_0x508476){_0x537f01[_0x2c5f78(0x24e)]({'message':_0x508476['message']});}}),router['post'](a0_0x5efcbd(0x1bd),auth,async(_0x104c4c,_0x4f2e5b)=>{const _0x1fbee4=a0_0x5efcbd;try{console[_0x1fbee4(0x24d)](_0x104c4c['body']);const {prod_cat:_0x43533f,identity:_0x11e107,valueData:_0x396846}=_0x104c4c[_0x1fbee4(0x1d8)];let _0x16f2d1;switch(_0x43533f){case'fg':if(_0x11e107==_0x1fbee4(0x1fc))_0x16f2d1=await product[_0x1fbee4(0x26d)]([{'$match':{'product_category':_0x1fbee4(0x277),'brand':_0x396846}}]);else _0x11e107==_0x1fbee4(0x262)&&(_0x16f2d1=await product[_0x1fbee4(0x26d)]([{'$match':{'product_category':_0x1fbee4(0x277),'category':_0x396846}}]));break;case'rm':if(_0x11e107==_0x1fbee4(0x1fc))_0x16f2d1=await product[_0x1fbee4(0x26d)]([{'$match':{'product_category':_0x1fbee4(0x1c0),'brand':_0x396846}}]);else _0x11e107==_0x1fbee4(0x262)&&(_0x16f2d1=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0x396846}}]));break;}_0x4f2e5b[_0x1fbee4(0x24e)]({'data':_0x16f2d1});}catch(_0x31699c){_0x4f2e5b[_0x1fbee4(0x24e)]({'message':_0x31699c[_0x1fbee4(0x20f)]});}}),router['post'](a0_0x5efcbd(0x1cb),auth,async(_0x271506,_0x506869)=>{const _0xa68478=a0_0x5efcbd;try{const _0x52ebf6=_0x271506['params']['id'],{copies:_0x4aecc7,typeofbarcode:_0x58752b}=_0x271506[_0xa68478(0x1d8)];var _0x529667=await product[_0xa68478(0x1c6)](_0x52ebf6);const _0x542543=_0x3c9c9e=>_0x3c9c9e*0x48,_0x32e9aa={'width':0x3,'height':0x1},_0x226fea=new PDFDocument({'margin':_0x542543(0.75),'size':[_0x542543(_0x32e9aa[_0xa68478(0x251)]),_0x542543(_0x32e9aa[_0xa68478(0x1ea)])],'bufferPages':!![]}),_0x54992f=_0x4aecc7,_0x7bc7b9=_0x529667[_0xa68478(0x266)],_0x393959=_0x529667[_0xa68478(0x1fe)],_0x6fc258=_0x529667[_0xa68478(0x239)],_0x4477e6=_0x529667[_0xa68478(0x22d)];let _0x5b871e;switch(_0x58752b){case'1':_0x5b871e=_0x393959;break;case'2':_0x5b871e=_0x6fc258;break;case'3':_0x5b871e=_0x4477e6;break;}const _0x558a03={'width':0xd2,'height':0x64},_0x1dc558={'width':_0x542543(_0x32e9aa['width']),'height':_0x542543(_0x32e9aa[_0xa68478(0x1ea)])};for(let _0x1b259f=0x1;_0x1b259f<=_0x54992f;_0x1b259f++){const _0x482e70=new Canvas();JsBarcode(_0x482e70,_0x5b871e,{'format':_0xa68478(0x1bc),'height':_0x558a03['height'],'displayValue':!![],'text':_0x5b871e});const _0x56d446=_0x482e70['toBuffer'](),_0x5eb789=_0x1dc558[_0xa68478(0x251)]/_0x558a03['width'],_0x13518c=_0x1dc558[_0xa68478(0x1ea)]/_0x558a03[_0xa68478(0x1ea)],_0x46521b=Math[_0xa68478(0x280)](_0x5eb789,_0x13518c),_0x1dc5f5=_0x558a03['width']*_0x46521b,_0x2781d7=_0x558a03[_0xa68478(0x1ea)]*_0x46521b,_0x3d2201=(_0x1dc558[_0xa68478(0x251)]-_0x1dc5f5)/0x2,_0x55aa8b=(_0x1dc558[_0xa68478(0x1ea)]-_0x2781d7)/0x2;_0x226fea[_0xa68478(0x1f9)](_0x56d446,_0x3d2201,_0x55aa8b,{'width':_0x1dc5f5,'height':_0x2781d7}),_0x1b259f!=_0x54992f&&_0x226fea[_0xa68478(0x21b)]();}const _0x5cb68a=[];_0x226fea['on'](_0xa68478(0x26a),_0x5cb68a[_0xa68478(0x226)][_0xa68478(0x224)](_0x5cb68a)),_0x226fea['on']('end',()=>{const _0x5c8cd5=_0xa68478,_0x75d16b=Buffer[_0x5c8cd5(0x1e8)](_0x5cb68a),_0x5a0b4d=_0x75d16b['toString'](_0x5c8cd5(0x250));_0x506869[_0x5c8cd5(0x24e)]({'pdfContent':_0x5a0b4d});}),_0x226fea[_0xa68478(0x207)]();}catch(_0x5a1c94){_0x506869['json']({'message':_0x5a1c94[_0xa68478(0x20f)]});}}),module[a0_0x5efcbd(0x220)]=router;