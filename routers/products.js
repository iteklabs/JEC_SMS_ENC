function a0_0x490f(_0x27f5bf,_0x7d594){const _0x247ce9=a0_0x247c();return a0_0x490f=function(_0x490f6a,_0x1fd7e4){_0x490f6a=_0x490f6a-0x1ac;let _0xec172b=_0x247ce9[_0x490f6a];return _0xec172b;},a0_0x490f(_0x27f5bf,_0x7d594);}const a0_0x5c9b81=a0_0x490f;(function(_0x31d492,_0xef28c2){const _0x39623d=a0_0x490f,_0x31c106=_0x31d492();while(!![]){try{const _0x3ef5a0=parseInt(_0x39623d(0x1c8))/0x1*(-parseInt(_0x39623d(0x215))/0x2)+parseInt(_0x39623d(0x25e))/0x3+parseInt(_0x39623d(0x1de))/0x4*(parseInt(_0x39623d(0x234))/0x5)+parseInt(_0x39623d(0x225))/0x6*(-parseInt(_0x39623d(0x223))/0x7)+-parseInt(_0x39623d(0x201))/0x8*(-parseInt(_0x39623d(0x241))/0x9)+-parseInt(_0x39623d(0x224))/0xa*(-parseInt(_0x39623d(0x24b))/0xb)+-parseInt(_0x39623d(0x1da))/0xc;if(_0x3ef5a0===_0xef28c2)break;else _0x31c106['push'](_0x31c106['shift']());}catch(_0x3c9f70){_0x31c106['push'](_0x31c106['shift']());}}}(a0_0x247c,0x5a8fe));const express=require(a0_0x5c9b81(0x1ca)),res=require(a0_0x5c9b81(0x1fd)),app=express(),router=express[a0_0x5c9b81(0x1cd)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x5c9b81(0x218)),auth=require(a0_0x5c9b81(0x202)),users=require(a0_0x5c9b81(0x222)),excelJS=require(a0_0x5c9b81(0x23a)),xlsx=require(a0_0x5c9b81(0x1cb)),JsBarcode=require(a0_0x5c9b81(0x245)),{Canvas}=require(a0_0x5c9b81(0x264)),PDFDocument=require(a0_0x5c9b81(0x1b3));router['get']('/categories',auth,async(_0x54c55e,_0x40d0e8)=>{const _0x11cfe0=a0_0x5c9b81;try{const {username:_0x856476,email:_0x21f584,role:_0x4545ce}=_0x54c55e[_0x11cfe0(0x243)],_0x3e1be4=_0x54c55e[_0x11cfe0(0x243)],_0x1e0533=await profile[_0x11cfe0(0x261)]({'email':_0x3e1be4[_0x11cfe0(0x219)]}),_0x4c5a6e=await master_shop[_0x11cfe0(0x1bd)]();console[_0x11cfe0(0x216)](_0x11cfe0(0x263),_0x4c5a6e);const _0x2e0ef4=await categories[_0x11cfe0(0x1bd)]();if(_0x4c5a6e[0x0][_0x11cfe0(0x22f)]==_0x11cfe0(0x1f7))var _0x56707b=users[_0x11cfe0(0x220)];else{if(_0x4c5a6e[0x0][_0x11cfe0(0x22f)]=='Hindi')var _0x56707b=users['Hindi'];else{if(_0x4c5a6e[0x0]['language']=='German')var _0x56707b=users[_0x11cfe0(0x255)];else{if(_0x4c5a6e[0x0][_0x11cfe0(0x22f)]==_0x11cfe0(0x1ad))var _0x56707b=users[_0x11cfe0(0x1ad)];else{if(_0x4c5a6e[0x0][_0x11cfe0(0x22f)]==_0x11cfe0(0x1ce))var _0x56707b=users[_0x11cfe0(0x1ce)];else{if(_0x4c5a6e[0x0][_0x11cfe0(0x22f)]=='Portuguese\x20(BR)')var _0x56707b=users[_0x11cfe0(0x250)];else{if(_0x4c5a6e[0x0][_0x11cfe0(0x22f)]==_0x11cfe0(0x24d))var _0x56707b=users[_0x11cfe0(0x24d)];else{if(_0x4c5a6e[0x0][_0x11cfe0(0x22f)]==_0x11cfe0(0x249))var _0x56707b=users['Arabic'];}}}}}}}_0x40d0e8[_0x11cfe0(0x266)](_0x11cfe0(0x1c1),{'success':_0x54c55e[_0x11cfe0(0x1d2)](_0x11cfe0(0x237)),'errors':_0x54c55e[_0x11cfe0(0x1d2)](_0x11cfe0(0x240)),'role':_0x3e1be4,'profile':_0x1e0533,'user':_0x2e0ef4,'master_shop':_0x4c5a6e,'language':_0x56707b});}catch(_0x5251ad){console[_0x11cfe0(0x216)](_0x5251ad);}}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x1bf),auth,async(_0x4bf9ed,_0xc0f770)=>{const _0x572bde=a0_0x5c9b81;try{const {name:_0x5a3f08,products:_0x17af46}=_0x4bf9ed['body'],_0x2da63e=new categories({'name':_0x5a3f08,'products':_0x17af46}),_0x8853ec=await categories[_0x572bde(0x261)]({'name':_0x5a3f08});_0x8853ec?_0x4bf9ed[_0x572bde(0x1d2)](_0x572bde(0x240),_0x5a3f08+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x4bf9ed['flash'](_0x572bde(0x237),_0x5a3f08+_0x572bde(0x21e));const _0x2be27e=await _0x2da63e['save']();_0xc0f770[_0x572bde(0x26c)](_0x572bde(0x1d0));}catch(_0x2da150){console['log'](_0x2da150);}}),router['get']('/categories/:id',auth,async(_0x54c34c,_0x4229d5)=>{const _0x36b21b=a0_0x5c9b81;try{const {username:_0x1101ea,email:_0x9890ec,role:_0x54d91a}=_0x54c34c[_0x36b21b(0x243)],_0x28543c=_0x54c34c[_0x36b21b(0x243)],_0x3402cf=await profile[_0x36b21b(0x261)]({'email':_0x28543c[_0x36b21b(0x219)]}),_0x234958=await master_shop[_0x36b21b(0x1bd)]();console[_0x36b21b(0x216)]('master',_0x234958);const _0x39065c=_0x54c34c[_0x36b21b(0x269)]['id'];console[_0x36b21b(0x216)](_0x39065c);const _0x45b8ee=await categories[_0x36b21b(0x1c5)](_0x39065c);if(_0x234958[0x0][_0x36b21b(0x22f)]=='English\x20(US)')var _0x596fe0=users[_0x36b21b(0x220)];else{if(_0x234958[0x0][_0x36b21b(0x22f)]==_0x36b21b(0x1d1))var _0x596fe0=users[_0x36b21b(0x1d1)];else{if(_0x234958[0x0]['language']=='German')var _0x596fe0=users[_0x36b21b(0x255)];else{if(_0x234958[0x0][_0x36b21b(0x22f)]=='Spanish')var _0x596fe0=users[_0x36b21b(0x1ad)];else{if(_0x234958[0x0][_0x36b21b(0x22f)]==_0x36b21b(0x1ce))var _0x596fe0=users['French'];else{if(_0x234958[0x0]['language']=='Portuguese\x20(BR)')var _0x596fe0=users[_0x36b21b(0x250)];else{if(_0x234958[0x0][_0x36b21b(0x22f)]=='Chinese')var _0x596fe0=users[_0x36b21b(0x24d)];else{if(_0x234958[0x0][_0x36b21b(0x22f)]==_0x36b21b(0x249))var _0x596fe0=users[_0x36b21b(0x25c)];}}}}}}}_0x4229d5['render'](_0x36b21b(0x1c1),{'success':_0x54c34c[_0x36b21b(0x1d2)](_0x36b21b(0x237)),'errors':_0x54c34c[_0x36b21b(0x1d2)]('errors'),'role':_0x28543c,'profile':_0x3402cf,'master_shop':_0x234958,'user':_0x45b8ee,'language':_0x596fe0});}catch(_0x3d897e){console[_0x36b21b(0x216)](_0x3d897e);}}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x1b8),auth,async(_0x41e121,_0x1c185d)=>{const _0x1cbd88=a0_0x5c9b81;try{const _0x3d6187=_0x41e121['params']['id'],_0xa91023=await categories[_0x1cbd88(0x24e)](_0x3d6187,_0x41e121[_0x1cbd88(0x1b5)]);_0x41e121[_0x1cbd88(0x1d2)]('success',''+users[_0x1cbd88(0x230)]),_0x1c185d[_0x1cbd88(0x26c)]('/products/categories');}catch(_0x1d76fe){console[_0x1cbd88(0x216)](_0x1d76fe);}}),router['get'](a0_0x5c9b81(0x20c),auth,async(_0x2f4f0b,_0x2b7395)=>{const _0x31425c=a0_0x5c9b81;try{const _0x3b9643=_0x2f4f0b['params']['id'],_0x1ba504=await categories['findByIdAndDelete'](_0x3b9643);_0x2f4f0b[_0x31425c(0x1d2)](_0x31425c(0x237),_0x31425c(0x1e2)),_0x2b7395[_0x31425c(0x26c)](_0x31425c(0x1d0));}catch(_0x1d5565){console[_0x31425c(0x216)](_0x1d5565);}}),router[a0_0x5c9b81(0x1db)](a0_0x5c9b81(0x25f),auth,async(_0x4166b3,_0x5b3e9c)=>{const _0x26cb70=a0_0x5c9b81;try{const {username:_0x2a53a9,email:_0x1f87db,role:_0x51961d}=_0x4166b3[_0x26cb70(0x243)],_0x2791bf=_0x4166b3[_0x26cb70(0x243)],_0x3d28d7=await profile['findOne']({'email':_0x2791bf['email']}),_0x604045=await master_shop['find']();console[_0x26cb70(0x216)](_0x26cb70(0x263),_0x604045);const _0x2ab7ae=await brands[_0x26cb70(0x1bd)]();if(_0x604045[0x0][_0x26cb70(0x22f)]==_0x26cb70(0x1f7))var _0x18ac08=users[_0x26cb70(0x220)];else{if(_0x604045[0x0][_0x26cb70(0x22f)]==_0x26cb70(0x1d1))var _0x18ac08=users['Hindi'];else{if(_0x604045[0x0][_0x26cb70(0x22f)]=='German')var _0x18ac08=users[_0x26cb70(0x255)];else{if(_0x604045[0x0][_0x26cb70(0x22f)]==_0x26cb70(0x1ad))var _0x18ac08=users['Spanish'];else{if(_0x604045[0x0][_0x26cb70(0x22f)]==_0x26cb70(0x1ce))var _0x18ac08=users[_0x26cb70(0x1ce)];else{if(_0x604045[0x0]['language']==_0x26cb70(0x1fb))var _0x18ac08=users['Portuguese'];else{if(_0x604045[0x0][_0x26cb70(0x22f)]==_0x26cb70(0x24d))var _0x18ac08=users[_0x26cb70(0x24d)];else{if(_0x604045[0x0][_0x26cb70(0x22f)]=='Arabic\x20(ae)')var _0x18ac08=users['Arabic'];}}}}}}}_0x5b3e9c[_0x26cb70(0x266)](_0x26cb70(0x1d8),{'success':_0x4166b3['flash']('success'),'errors':_0x4166b3[_0x26cb70(0x1d2)](_0x26cb70(0x240)),'role':_0x2791bf,'profile':_0x3d28d7,'master_shop':_0x604045,'user':_0x2ab7ae,'language':_0x18ac08});}catch(_0x21f90e){console['log'](_0x21f90e);}}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x25f),auth,async(_0x44bd66,_0x4e8c21)=>{const _0x4baecb=a0_0x5c9b81;try{const {name:_0x445700,products:_0x497a41}=_0x44bd66[_0x4baecb(0x1b5)],_0x14454d=new brands({'name':_0x445700,'products':_0x497a41}),_0x1c2b31=await brands[_0x4baecb(0x261)]({'name':_0x445700});_0x1c2b31?_0x44bd66[_0x4baecb(0x1d2)](_0x4baecb(0x240),_0x445700+_0x4baecb(0x1e8)):_0x44bd66[_0x4baecb(0x1d2)](_0x4baecb(0x237),_0x445700+'\x20brand\x20is\x20add\x20successfully');const _0x47a27b=await _0x14454d[_0x4baecb(0x1fc)]();_0x4e8c21['redirect'](_0x4baecb(0x1d4));}catch(_0x1c655a){console[_0x4baecb(0x216)](_0x1c655a);}}),router[a0_0x5c9b81(0x1db)](a0_0x5c9b81(0x258),auth,async(_0x422672,_0x421394)=>{const _0xcaf8d0=a0_0x5c9b81;try{const {username:_0x4c1312,email:_0x454f2a,role:_0x3761b7}=_0x422672['user'],_0x1ea910=_0x422672[_0xcaf8d0(0x243)],_0x245013=await profile[_0xcaf8d0(0x261)]({'email':_0x1ea910[_0xcaf8d0(0x219)]}),_0x4474c9=await master_shop['find']();console['log'](_0xcaf8d0(0x263),_0x4474c9);const _0x48c0d9=_0x422672[_0xcaf8d0(0x269)]['id'];console[_0xcaf8d0(0x216)](_0x48c0d9);const _0xc1700a=await brands['findById'](_0x48c0d9);if(_0x4474c9[0x0][_0xcaf8d0(0x22f)]=='English\x20(US)')var _0x5adbe6=users[_0xcaf8d0(0x220)];else{if(_0x4474c9[0x0]['language']==_0xcaf8d0(0x1d1))var _0x5adbe6=users['Hindi'];else{if(_0x4474c9[0x0][_0xcaf8d0(0x22f)]=='German')var _0x5adbe6=users['German'];else{if(_0x4474c9[0x0][_0xcaf8d0(0x22f)]==_0xcaf8d0(0x1ad))var _0x5adbe6=users[_0xcaf8d0(0x1ad)];else{if(_0x4474c9[0x0]['language']==_0xcaf8d0(0x1ce))var _0x5adbe6=users[_0xcaf8d0(0x1ce)];else{if(_0x4474c9[0x0][_0xcaf8d0(0x22f)]==_0xcaf8d0(0x1fb))var _0x5adbe6=users['Portuguese'];else{if(_0x4474c9[0x0][_0xcaf8d0(0x22f)]==_0xcaf8d0(0x24d))var _0x5adbe6=users['Chinese'];else{if(_0x4474c9[0x0][_0xcaf8d0(0x22f)]==_0xcaf8d0(0x249))var _0x5adbe6=users[_0xcaf8d0(0x25c)];}}}}}}}_0x421394[_0xcaf8d0(0x266)]('brands',{'success':_0x422672[_0xcaf8d0(0x1d2)]('success'),'errors':_0x422672[_0xcaf8d0(0x1d2)](_0xcaf8d0(0x240)),'role':_0x1ea910,'profile':_0x245013,'master_shop':_0x4474c9,'user':_0xc1700a,'language':_0x5adbe6});}catch(_0x493d2d){console['log'](_0x493d2d);}}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x258),auth,async(_0x163696,_0x20e68d)=>{const _0x25848e=a0_0x5c9b81;try{const _0x4f0293=_0x163696['params']['id'],_0x535cef=await brands['findByIdAndUpdate'](_0x4f0293,_0x163696[_0x25848e(0x1b5)]);_0x163696['flash'](_0x25848e(0x237),_0x25848e(0x23d)),_0x20e68d[_0x25848e(0x26c)](_0x25848e(0x1d4));}catch(_0x54d217){console[_0x25848e(0x216)](_0x54d217);}}),router['get'](a0_0x5c9b81(0x24f),auth,async(_0x3139d1,_0x43a1f5)=>{const _0x465f8c=a0_0x5c9b81;try{const _0x3abba0=_0x3139d1[_0x465f8c(0x269)]['id'],_0x1c9fa5=await brands[_0x465f8c(0x1c2)](_0x3abba0);_0x3139d1[_0x465f8c(0x1d2)](_0x465f8c(0x237),_0x465f8c(0x256)),_0x43a1f5[_0x465f8c(0x26c)]('/products/brands');}catch(_0x415aca){console[_0x465f8c(0x216)](_0x415aca);}}),router[a0_0x5c9b81(0x1db)](a0_0x5c9b81(0x25d),auth,async(_0x4e98b1,_0x101430)=>{const _0xfea6a7=a0_0x5c9b81;try{const {username:_0x3d52b6,email:_0xf8704e,role:_0x48ac8b}=_0x4e98b1['user'],_0x5d42bd=_0x4e98b1[_0xfea6a7(0x243)],_0x405c76=await profile[_0xfea6a7(0x261)]({'email':_0x5d42bd[_0xfea6a7(0x219)]}),_0x3150c9=await master_shop[_0xfea6a7(0x1bd)]();console['log'](_0xfea6a7(0x263),_0x3150c9);const _0x1ce018=await units[_0xfea6a7(0x1bd)]();if(_0x3150c9[0x0][_0xfea6a7(0x22f)]=='English\x20(US)')var _0x14a398=users[_0xfea6a7(0x220)];else{if(_0x3150c9[0x0]['language']==_0xfea6a7(0x1d1))var _0x14a398=users[_0xfea6a7(0x1d1)];else{if(_0x3150c9[0x0][_0xfea6a7(0x22f)]==_0xfea6a7(0x255))var _0x14a398=users[_0xfea6a7(0x255)];else{if(_0x3150c9[0x0][_0xfea6a7(0x22f)]=='Spanish')var _0x14a398=users[_0xfea6a7(0x1ad)];else{if(_0x3150c9[0x0][_0xfea6a7(0x22f)]==_0xfea6a7(0x1ce))var _0x14a398=users[_0xfea6a7(0x1ce)];else{if(_0x3150c9[0x0]['language']==_0xfea6a7(0x1fb))var _0x14a398=users[_0xfea6a7(0x250)];else{if(_0x3150c9[0x0][_0xfea6a7(0x22f)]=='Chinese')var _0x14a398=users[_0xfea6a7(0x24d)];else{if(_0x3150c9[0x0][_0xfea6a7(0x22f)]==_0xfea6a7(0x249))var _0x14a398=users['Arabic'];}}}}}}}_0x101430[_0xfea6a7(0x266)]('units',{'success':_0x4e98b1[_0xfea6a7(0x1d2)](_0xfea6a7(0x237)),'errors':_0x4e98b1[_0xfea6a7(0x1d2)](_0xfea6a7(0x240)),'role':_0x5d42bd,'profile':_0x405c76,'master_shop':_0x3150c9,'user':_0x1ce018,'language':_0x14a398});}catch(_0x4d865d){console[_0xfea6a7(0x216)](_0x4d865d);}}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x25d),auth,async(_0xb6702f,_0x32702a)=>{const _0x5efdaa=a0_0x5c9b81;try{const {name:_0x248e2b,secondary_unit:_0x4c3e54,products:_0x18133f}=_0xb6702f[_0x5efdaa(0x1b5)],_0x4ecd6b=new units({'name':_0x248e2b,'secondary_unit':_0x4c3e54,'products':_0x18133f}),_0x44c35d=await units[_0x5efdaa(0x261)]({'name':_0x248e2b});_0x44c35d?_0xb6702f[_0x5efdaa(0x1d2)]('errors',_0x248e2b+_0x5efdaa(0x1e5)):_0xb6702f[_0x5efdaa(0x1d2)]('success',_0x248e2b+_0x5efdaa(0x1f1));const _0x1d2bf4=await _0x4ecd6b[_0x5efdaa(0x1fc)]();_0x32702a[_0x5efdaa(0x26c)](_0x5efdaa(0x26a));}catch(_0x4033b8){console['log'](_0x4033b8);}}),router[a0_0x5c9b81(0x1db)](a0_0x5c9b81(0x259),auth,async(_0x949dd5,_0x5083aa)=>{const _0x1b353d=a0_0x5c9b81;try{const {username:_0x7352b6,email:_0x4d6b8e,role:_0x13677a}=_0x949dd5[_0x1b353d(0x243)],_0x415b26=_0x949dd5['user'],_0x51db08=await profile[_0x1b353d(0x261)]({'email':_0x415b26[_0x1b353d(0x219)]}),_0x567c20=await master_shop[_0x1b353d(0x1bd)]();console[_0x1b353d(0x216)](_0x1b353d(0x263),_0x567c20);const _0x2f9254=_0x949dd5[_0x1b353d(0x269)]['id'],_0x3646a6=await units[_0x1b353d(0x1c5)](_0x2f9254);if(_0x567c20[0x0][_0x1b353d(0x22f)]==_0x1b353d(0x1f7))var _0x4f477a=users[_0x1b353d(0x220)];else{if(_0x567c20[0x0][_0x1b353d(0x22f)]==_0x1b353d(0x1d1))var _0x4f477a=users[_0x1b353d(0x1d1)];else{if(_0x567c20[0x0]['language']==_0x1b353d(0x255))var _0x4f477a=users[_0x1b353d(0x255)];else{if(_0x567c20[0x0][_0x1b353d(0x22f)]==_0x1b353d(0x1ad))var _0x4f477a=users[_0x1b353d(0x1ad)];else{if(_0x567c20[0x0][_0x1b353d(0x22f)]==_0x1b353d(0x1ce))var _0x4f477a=users[_0x1b353d(0x1ce)];else{if(_0x567c20[0x0]['language']==_0x1b353d(0x1fb))var _0x4f477a=users[_0x1b353d(0x250)];else{if(_0x567c20[0x0][_0x1b353d(0x22f)]=='Chinese')var _0x4f477a=users[_0x1b353d(0x24d)];else{if(_0x567c20[0x0][_0x1b353d(0x22f)]==_0x1b353d(0x249))var _0x4f477a=users[_0x1b353d(0x25c)];}}}}}}}_0x5083aa['render'](_0x1b353d(0x1e4),{'success':_0x949dd5[_0x1b353d(0x1d2)](_0x1b353d(0x237)),'errors':_0x949dd5[_0x1b353d(0x1d2)](_0x1b353d(0x240)),'role':_0x415b26,'profile':_0x51db08,'master_shop':_0x567c20,'user':_0x3646a6,'language':_0x4f477a});}catch(_0x39f234){console[_0x1b353d(0x216)](_0x39f234);}}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x259),auth,async(_0x58e500,_0x57c8b1)=>{const _0x1ebd84=a0_0x5c9b81;try{const _0x2cdd18=_0x58e500[_0x1ebd84(0x269)]['id'],_0x1bf642=await units[_0x1ebd84(0x24e)](_0x2cdd18,_0x58e500['body']);_0x58e500[_0x1ebd84(0x1d2)](_0x1ebd84(0x237),_0x1ebd84(0x1f9)),_0x57c8b1['redirect']('/products/units');}catch(_0x5c58c1){console[_0x1ebd84(0x216)](_0x5c58c1);}}),router[a0_0x5c9b81(0x1db)]('/units/delete/:id',auth,async(_0x2b8976,_0x4195f6)=>{const _0x387a91=a0_0x5c9b81;try{const _0x940f83=_0x2b8976[_0x387a91(0x269)]['id'],_0x3729b1=await units[_0x387a91(0x1c2)](_0x940f83);_0x2b8976['flash']('success',_0x387a91(0x231)),_0x4195f6['redirect']('/products/units');}catch(_0x20f106){console[_0x387a91(0x216)](_0x20f106);}});const storage=multer[a0_0x5c9b81(0x238)]({'destination':(_0x69fa8f,_0x2f6000,_0x2386e4)=>{const _0x28cf68=a0_0x5c9b81;_0x2386e4(null,_0x28cf68(0x221));},'filename':(_0x401419,_0x151142,_0x30d6a)=>{const _0x1fef4f=a0_0x5c9b81;_0x30d6a(null,Date[_0x1fef4f(0x20d)]()+_0x151142[_0x1fef4f(0x22e)]);}}),upload=multer({'storage':storage});router[a0_0x5c9b81(0x1db)](a0_0x5c9b81(0x1d7),auth,async(_0x3fdb4f,_0x2082bc)=>{const _0x1de77f=a0_0x5c9b81;try{const {username:_0x73ea15,email:_0x51d436,role:_0x36e3b9}=_0x3fdb4f[_0x1de77f(0x243)],_0x594ae7=_0x3fdb4f[_0x1de77f(0x243)],_0xbdbf9e=await profile[_0x1de77f(0x261)]({'email':_0x594ae7[_0x1de77f(0x219)]}),_0x3e804a={'year':'numeric','month':_0x1de77f(0x1af),'day':'numeric'},_0x4f49ed=await master_shop[_0x1de77f(0x1bd)]();console['log']('Products\x20master',_0x4f49ed);const _0x373c80=await product['find']();console[_0x1de77f(0x216)]('Products\x20find_data',_0x373c80);const _0x364d4f=await warehouse[_0x1de77f(0x1dc)]([{'$unwind':_0x1de77f(0x1b2)},{'$lookup':{'from':'products','localField':'product_details.product_name','foreignField':_0x1de77f(0x1f4),'as':_0x1de77f(0x1dd)}},{'$unwind':_0x1de77f(0x25b)},{'$project':{'product_name':_0x1de77f(0x1d6),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':'$product_name','product_stock':{'$sum':'$product_stock'}}}]);console[_0x1de77f(0x216)](_0x1de77f(0x26b),_0x364d4f),_0x364d4f[_0x1de77f(0x254)](_0xfe9e00=>{const _0x5489a5=_0x1de77f,_0xd8f319=_0x373c80[_0x5489a5(0x1e1)](_0x48694e=>{const _0x1e8a76=_0x5489a5;_0x48694e[_0x1e8a76(0x1f4)]==_0xfe9e00['_id']&&(_0x48694e[_0x1e8a76(0x248)]=parseInt(_0x48694e['stock'])+parseInt(_0xfe9e00[_0x1e8a76(0x20e)]));});}),console['log']('Products\x20find_data',_0x373c80);if(_0x4f49ed[0x0][_0x1de77f(0x22f)]==_0x1de77f(0x1f7))var _0xb05297=users[_0x1de77f(0x220)];else{if(_0x4f49ed[0x0][_0x1de77f(0x22f)]==_0x1de77f(0x1d1))var _0xb05297=users['Hindi'];else{if(_0x4f49ed[0x0]['language']=='German')var _0xb05297=users['German'];else{if(_0x4f49ed[0x0]['language']==_0x1de77f(0x1ad))var _0xb05297=users[_0x1de77f(0x1ad)];else{if(_0x4f49ed[0x0]['language']==_0x1de77f(0x1ce))var _0xb05297=users[_0x1de77f(0x1ce)];else{if(_0x4f49ed[0x0][_0x1de77f(0x22f)]==_0x1de77f(0x1fb))var _0xb05297=users['Portuguese'];else{if(_0x4f49ed[0x0][_0x1de77f(0x22f)]=='Chinese')var _0xb05297=users[_0x1de77f(0x24d)];else{if(_0x4f49ed[0x0][_0x1de77f(0x22f)]=='Arabic\x20(ae)')var _0xb05297=users['Arabic'];}}}}}}}_0x2082bc[_0x1de77f(0x266)]('products',{'success':_0x3fdb4f[_0x1de77f(0x1d2)](_0x1de77f(0x237)),'errors':_0x3fdb4f[_0x1de77f(0x1d2)](_0x1de77f(0x240)),'alldata':_0x373c80,'profile':_0xbdbf9e,'master_shop':_0x4f49ed,'role':_0x594ae7,'product_stock':_0x364d4f,'language':_0xb05297});}catch(_0x1cc465){console[_0x1de77f(0x216)](_0x1cc465);}}),router[a0_0x5c9b81(0x1db)](a0_0x5c9b81(0x217),auth,async(_0x480837,_0x48668a)=>{const _0xe8f980=a0_0x5c9b81;try{const {username:_0x535cfc,email:_0x21722a,role:_0xf6ce55}=_0x480837['user'],_0x513ec1=_0x480837[_0xe8f980(0x243)],_0x1ab03a=await profile[_0xe8f980(0x261)]({'email':_0x513ec1[_0xe8f980(0x219)]}),_0x4e1a75=await master_shop[_0xe8f980(0x1bd)]();console[_0xe8f980(0x216)](_0xe8f980(0x263),_0x4e1a75);const _0x4564fb=await categories['find']({}),_0x42b5c4=await brands['find']({}),_0x3423dc=await units[_0xe8f980(0x1bd)]({}),_0x55df15=await warehouse[_0xe8f980(0x1bd)]({'status':_0xe8f980(0x1b4)});if(_0x4e1a75[0x0]['language']==_0xe8f980(0x1f7))var _0x511836=users[_0xe8f980(0x220)];else{if(_0x4e1a75[0x0][_0xe8f980(0x22f)]=='Hindi')var _0x511836=users[_0xe8f980(0x1d1)];else{if(_0x4e1a75[0x0][_0xe8f980(0x22f)]==_0xe8f980(0x255))var _0x511836=users[_0xe8f980(0x255)];else{if(_0x4e1a75[0x0][_0xe8f980(0x22f)]==_0xe8f980(0x1ad))var _0x511836=users['Spanish'];else{if(_0x4e1a75[0x0][_0xe8f980(0x22f)]=='French')var _0x511836=users[_0xe8f980(0x1ce)];else{if(_0x4e1a75[0x0][_0xe8f980(0x22f)]==_0xe8f980(0x1fb))var _0x511836=users[_0xe8f980(0x250)];else{if(_0x4e1a75[0x0][_0xe8f980(0x22f)]==_0xe8f980(0x24d))var _0x511836=users['Chinese'];else{if(_0x4e1a75[0x0][_0xe8f980(0x22f)]==_0xe8f980(0x249))var _0x511836=users[_0xe8f980(0x25c)];}}}}}}}_0x48668a[_0xe8f980(0x266)]('add_product',{'success':_0x480837[_0xe8f980(0x1d2)](_0xe8f980(0x237)),'errors':_0x480837[_0xe8f980(0x1d2)](_0xe8f980(0x240)),'role':_0x513ec1,'profile':_0x1ab03a,'categories':_0x4564fb,'brands':_0x42b5c4,'master_shop':_0x4e1a75,'units':_0x3423dc,'language':_0x511836,'find_data':_0x55df15});}catch(_0x3754ac){console[_0xe8f980(0x216)](_0x3754ac);}}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x217),auth,upload[a0_0x5c9b81(0x1bb)]('image'),async(_0x16729d,_0x25776c)=>{const _0x52979b=a0_0x5c9b81;try{const {name:_0xe0feb4,category:_0xbd4cbf,brand:_0x20e2ff,unit:_0x398bec,alertquantity:_0x1c582d,stock:_0x5e17ab,product_code:_0x498723,warehouse:_0x24360b,primary_ItemCode:_0x12c997,second_ItemCode:_0x3e1ab6,second_unit:_0x3af77d,maxPerUnit:_0x44b28,MaxPerProduct:_0x5c836c,sales_cat:_0x4753f1,type_prod:_0x5f3ad0}=_0x16729d[_0x52979b(0x1b5)],_0x60b989=_0x16729d[_0x52979b(0x1d3)]?.['filename']||'defaultProduct.avif',_0x3f9eef=new product({'image':_0x60b989,'name':_0xe0feb4,'category':_0xbd4cbf,'brand':_0x20e2ff,'unit':_0x398bec,'alertquantity':_0x1c582d,'stock':_0x5e17ab,'product_code':_0x498723,'warehouse':_0x24360b,'primary_code':_0x12c997,'secondary_code':_0x3e1ab6,'second_unit':_0x3af77d,'maxStocks':_0x5c836c,'maxProdPerUnit':_0x44b28,'sales_category':_0x4753f1,'type_products':_0x5f3ad0}),_0x3121ca=await _0x3f9eef[_0x52979b(0x1fc)](),_0x5dfef8=await categories[_0x52979b(0x261)]({'name':_0xbd4cbf});_0x5dfef8['products']=parseInt(_0x5dfef8[_0x52979b(0x21f)])+0x1,await _0x5dfef8[_0x52979b(0x1fc)]();const _0x151a13=await brands[_0x52979b(0x261)]({'name':_0x20e2ff});_0x151a13[_0x52979b(0x21f)]=parseInt(_0x151a13[_0x52979b(0x21f)])+0x1,await _0x151a13[_0x52979b(0x1fc)]();const _0xaf8b2f=await units['findOne']({'name':_0x398bec});_0xaf8b2f[_0x52979b(0x21f)]=parseInt(_0xaf8b2f[_0x52979b(0x21f)])+0x1,await _0xaf8b2f[_0x52979b(0x1fc)](),_0x16729d[_0x52979b(0x1d2)]('success',_0x52979b(0x200)),_0x25776c[_0x52979b(0x26c)]('/products/view');}catch(_0x56310f){console[_0x52979b(0x216)](_0x56310f);}}),router[a0_0x5c9b81(0x1db)]('/view/:id',auth,async(_0x40b6ba,_0x20fca5)=>{const _0x1eacc6=a0_0x5c9b81;try{const {username:_0x3c44ca,email:_0xc5f144,role:_0x57b7d6}=_0x40b6ba['user'],_0x28555b=_0x40b6ba[_0x1eacc6(0x243)],_0x64785e=await profile['findOne']({'email':_0x28555b[_0x1eacc6(0x219)]}),_0xfb6d2f=await master_shop[_0x1eacc6(0x1bd)]();console[_0x1eacc6(0x216)](_0x1eacc6(0x1ec),_0xfb6d2f);const _0x47b6bf=_0x40b6ba[_0x1eacc6(0x269)]['id'],_0x12326a=await product[_0x1eacc6(0x1c5)](_0x47b6bf),_0x4a1b4a=await categories['find']({}),_0xe5722c=await brands[_0x1eacc6(0x1bd)]({}),_0x52706a=await units[_0x1eacc6(0x1bd)]({}),_0x1096cf=await warehouse[_0x1eacc6(0x1bd)]({'status':_0x1eacc6(0x1b4)}),_0x1607cb=await units[_0x1eacc6(0x1dc)]([{'$group':{'_id':_0x1eacc6(0x262),'secondaryunit':{'$first':_0x1eacc6(0x247)}}}]);if(_0xfb6d2f[0x0][_0x1eacc6(0x22f)]=='English\x20(US)')var _0x47c07d=users[_0x1eacc6(0x220)];else{if(_0xfb6d2f[0x0]['language']==_0x1eacc6(0x1d1))var _0x47c07d=users[_0x1eacc6(0x1d1)];else{if(_0xfb6d2f[0x0][_0x1eacc6(0x22f)]==_0x1eacc6(0x255))var _0x47c07d=users[_0x1eacc6(0x255)];else{if(_0xfb6d2f[0x0][_0x1eacc6(0x22f)]==_0x1eacc6(0x1ad))var _0x47c07d=users[_0x1eacc6(0x1ad)];else{if(_0xfb6d2f[0x0][_0x1eacc6(0x22f)]==_0x1eacc6(0x1ce))var _0x47c07d=users['French'];else{if(_0xfb6d2f[0x0]['language']==_0x1eacc6(0x1fb))var _0x47c07d=users[_0x1eacc6(0x250)];else{if(_0xfb6d2f[0x0]['language']==_0x1eacc6(0x24d))var _0x47c07d=users[_0x1eacc6(0x24d)];else{if(_0xfb6d2f[0x0][_0x1eacc6(0x22f)]==_0x1eacc6(0x249))var _0x47c07d=users[_0x1eacc6(0x25c)];}}}}}}}_0x20fca5[_0x1eacc6(0x266)]('edit_product',{'success':_0x40b6ba[_0x1eacc6(0x1d2)]('success'),'errors':_0x40b6ba[_0x1eacc6(0x1d2)](_0x1eacc6(0x240)),'role':_0x28555b,'profile':_0x64785e,'alldata':_0x12326a,'categories':_0x4a1b4a,'brands':_0xe5722c,'master_shop':_0xfb6d2f,'units':_0x52706a,'secondunit':_0x1607cb,'find_data':_0x1096cf,'language':_0x47c07d});}catch(_0x5a270b){console['log'](_0x5a270b);}}),router[a0_0x5c9b81(0x24a)]('/view/:id',auth,upload[a0_0x5c9b81(0x1bb)](a0_0x5c9b81(0x1b1)),async(_0x35fc0a,_0x1f1fdf)=>{const _0x699830=a0_0x5c9b81;try{const _0x151694=_0x35fc0a[_0x699830(0x269)]['id'],_0x1efc66=await product['findById'](_0x151694),{image:_0x199a07,name:_0x5dee87,category:_0x1d9084,brand:_0x1ad028,sku:_0x53da09,unit:_0x582f9a,alertquantity:_0x1c04f6,product_code:_0x2ceaa3,warehouse:_0x207a71,primary_ItemCode:_0x5ae177,second_ItemCode:_0x424e53,second_unit:_0xa5412c,maxPerUnit:_0x425748,MaxPerProduct:_0x4314bb,prod_catdata:_0x378db0,type_prod:_0x7092b2,sales_cat:_0x2f504b}=_0x35fc0a['body'];_0x35fc0a['file']&&(_0x1efc66[_0x699830(0x1b1)]=_0x35fc0a[_0x699830(0x1d3)]['filename']);_0x1efc66[_0x699830(0x1f4)]=_0x5dee87,_0x1efc66['category']=_0x1d9084,_0x1efc66[_0x699830(0x1f0)]=_0x1ad028,_0x1efc66[_0x699830(0x22d)]=_0x53da09,_0x1efc66[_0x699830(0x1d5)]=_0x582f9a,_0x1efc66[_0x699830(0x1ee)]=_0x1c04f6,_0x1efc66[_0x699830(0x229)]=_0x2ceaa3,_0x1efc66[_0x699830(0x1ea)]=_0x207a71,_0x1efc66[_0x699830(0x1fa)]=_0x5ae177,_0x1efc66[_0x699830(0x1c9)]=_0x424e53,_0x1efc66[_0x699830(0x251)]=_0xa5412c,_0x1efc66[_0x699830(0x24c)]=_0x4314bb,_0x1efc66[_0x699830(0x252)]=_0x425748,_0x1efc66[_0x699830(0x1be)]=_0x378db0,_0x1efc66[_0x699830(0x227)]=_0x7092b2,_0x1efc66[_0x699830(0x1e9)]=_0x2f504b;const _0x355c4d=await _0x1efc66[_0x699830(0x1fc)]();console['log'](_0x699830(0x244),_0x1efc66),_0x35fc0a[_0x699830(0x1d2)](_0x699830(0x237),'product\x20update\x20successfully'),_0x1f1fdf['redirect'](_0x699830(0x226));}catch(_0xee53be){console['log'](_0xee53be);}}),router[a0_0x5c9b81(0x1db)]('/barcode/:id',auth,async(_0x4ef5c5,_0x2b2f4e)=>{const _0x23ad4f=a0_0x5c9b81;try{const {username:_0x13a67f,email:_0x248486,role:_0x5d5eff}=_0x4ef5c5['user'],_0x1904dc=_0x4ef5c5['user'],_0x546a6a=await profile[_0x23ad4f(0x261)]({'email':_0x1904dc[_0x23ad4f(0x219)]}),_0x1f5548=await master_shop['find']();console[_0x23ad4f(0x216)]('barcode\x20Product\x20master',_0x1f5548);const _0x41e4b4=_0x4ef5c5[_0x23ad4f(0x269)]['id'],_0x5ab006=await product[_0x23ad4f(0x1c5)](_0x41e4b4);console[_0x23ad4f(0x216)]('barcode\x20user_id',_0x5ab006);if(_0x1f5548[0x0][_0x23ad4f(0x22f)]==_0x23ad4f(0x1f7))var _0x237f13=users[_0x23ad4f(0x220)];else{if(_0x1f5548[0x0][_0x23ad4f(0x22f)]=='Hindi')var _0x237f13=users[_0x23ad4f(0x1d1)];else{if(_0x1f5548[0x0][_0x23ad4f(0x22f)]==_0x23ad4f(0x255))var _0x237f13=users[_0x23ad4f(0x255)];else{if(_0x1f5548[0x0]['language']==_0x23ad4f(0x1ad))var _0x237f13=users[_0x23ad4f(0x1ad)];else{if(_0x1f5548[0x0][_0x23ad4f(0x22f)]=='French')var _0x237f13=users[_0x23ad4f(0x1ce)];else{if(_0x1f5548[0x0]['language']==_0x23ad4f(0x1fb))var _0x237f13=users['Portuguese'];else{if(_0x1f5548[0x0][_0x23ad4f(0x22f)]=='Chinese')var _0x237f13=users[_0x23ad4f(0x24d)];else{if(_0x1f5548[0x0][_0x23ad4f(0x22f)]==_0x23ad4f(0x249))var _0x237f13=users[_0x23ad4f(0x25c)];}}}}}}}_0x2b2f4e[_0x23ad4f(0x266)](_0x23ad4f(0x20a),{'success':_0x4ef5c5[_0x23ad4f(0x1d2)](_0x23ad4f(0x237)),'errors':_0x4ef5c5[_0x23ad4f(0x1d2)](_0x23ad4f(0x240)),'role':_0x1904dc,'profile':_0x546a6a,'alldata':_0x5ab006,'master_shop':_0x1f5548,'language':_0x237f13});}catch(_0x24f491){console[_0x23ad4f(0x216)](_0x24f491);}}),router['get'](a0_0x5c9b81(0x214),auth,async(_0x2c3c5f,_0x163c0f)=>{const _0x2d38a1=a0_0x5c9b81;try{const _0x3fb09e=new excelJS[(_0x2d38a1(0x1f6))](),_0x1009dd=_0x3fb09e[_0x2d38a1(0x228)]('Products');return _0x1009dd[_0x2d38a1(0x23e)]=[{'header':_0x2d38a1(0x210),'key':_0x2d38a1(0x23b),'width':0xa},{'header':_0x2d38a1(0x233),'key':_0x2d38a1(0x1f3),'width':0xa},{'header':_0x2d38a1(0x206),'key':_0x2d38a1(0x1fe),'width':0xa},{'header':_0x2d38a1(0x232),'key':_0x2d38a1(0x1ef),'width':0xa},{'header':_0x2d38a1(0x204),'key':_0x2d38a1(0x1cf),'width':0xa},{'header':_0x2d38a1(0x208),'key':'ProductCode','width':0xa},{'header':'Secondary_Code','key':'ProductCode','width':0xa},{'header':_0x2d38a1(0x1f2),'key':_0x2d38a1(0x23f),'width':0xa},{'header':_0x2d38a1(0x23c),'key':'PCat','width':0xa},{'header':_0x2d38a1(0x268),'key':_0x2d38a1(0x213),'width':0xa},{'header':_0x2d38a1(0x21a),'key':_0x2d38a1(0x213),'width':0xa},{'header':'Products_category','key':_0x2d38a1(0x1ac),'width':0xa}],_0x163c0f[_0x2d38a1(0x21c)](_0x2d38a1(0x1c6),_0x2d38a1(0x260)),_0x163c0f[_0x2d38a1(0x21c)](_0x2d38a1(0x1b6),_0x2d38a1(0x207)),_0x3fb09e['xlsx'][_0x2d38a1(0x203)](_0x163c0f)[_0x2d38a1(0x205)](()=>{const _0x18a659=_0x2d38a1;_0x163c0f[_0x18a659(0x1bc)](0xc8);});}catch(_0x419dc0){_0x163c0f['status'](0x190)['send'](_0x419dc0);}});function a0_0x247c(){const _0x5ceb92=['German','brand\x20data\x20delete\x20successfully','Sheets','/brands/:id','/units/:id','/barcode_data','$product_docs','Arabic','/units','1478718ZUmtHb','/brands','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','findOne','$_id','master','canvas','/print_barcode_single/:id','render','/select_data','Alert_QTY','params','/products/units','Products\x20warehouse_data','redirect','Prod_Cat','Spanish','readFile','long','migrate_product_fule','image','$product_details','pdfkit-table','Enabled','body','Content-Disposition','addPage','/categories/:id','height','sheet_to_json','single','status','find','product_category','/categories','Products_category','categories','findByIdAndDelete','$category','width','findById','Content-Type','length','12273KSJqpF','secondary_code','express','xlsx','category','Router','French','MaxperUnits','/products/categories','Hindi','flash','file','/products/brands','unit','$product_details.product_name','/view','brands','toBuffer','7206348kauQMV','get','aggregate','product_docs','478572KdDTuy','/filter_product','\x20<>\x20','map','categories\x20data\x20delete\x20successfully','message','units','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','categ','end','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','sales_category','warehouse','bind','edit\x20Product\x20master','$brand','alertquantity','PSecondaryUnits','brand','\x20unit\x20is\x20add\x20successfully','Product_Code','PBrands','name','defaultProduct.avif','Workbook','English\x20(US)','Secondary_Code','unit\x20data\x20update\x20successfully','primary_code','Portuguese\x20(BR)','save','express/lib/response','PUnits','SheetNames','product\x20add\x20successfully','344DYYJZO','../middleware/auth','write','max_number_per_units','then','Units','attachment;\x20filename=Product_Migration_File.xlsx','Primary_Code','prod_categ','product_barcode','public/Migration','/categories/delete/:id','now','product_stock','base64','Product_Name','/barcode_filter','json','PAlQty','/products_export_migrate_file','26kWDNxu','log','/view/add_products','../models/all_models','email','Maximum_Stocks','data','setHeader','utils','\x20categories\x20is\x20add\x20successfully','products','English','public/upload','../public/language/languages.json','301SFKyIA','10jnXeGJ','22458KimZVc','/products/view','type_products','addWorksheet','product_code','/print_barcode_filter_search/','toString','concat','sku','originalname','language','categories_edit','unit\x20data\x20delete\x20successfully','Secondary_Units','Brands','15HMJVvd','Raw\x20Materials','CODE128','success','diskStorage','push','exceljs','PName','Category','brand\x20data\x20update\x20successfully','columns','ProductCode','errors','49365WmkJIK','\x20added\x20successfully','user','product\x20edit','jsbarcode','min','$secondary_unit','stock','Arabic\x20(ae)','post','2247069PuiYvz','maxStocks','Chinese','findByIdAndUpdate','/brands/delete/:id','Portuguese','secondary_unit','maxProdPerUnit','Finished\x20Goods','forEach'];a0_0x247c=function(){return _0x5ceb92;};return a0_0x247c();}const storage1=multer['diskStorage']({'destination':(_0x4effe0,_0x1c9fdb,_0x118acb)=>{const _0x188601=a0_0x5c9b81;_0x118acb(null,_0x188601(0x20b));},'filename':(_0x48f305,_0x50bce6,_0x375480)=>{const _0x24a457=a0_0x5c9b81;_0x375480(null,Date[_0x24a457(0x20d)]()+_0x50bce6[_0x24a457(0x22e)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x5c9b81(0x24a)]('/products_import_migrate_file',auth,uploadMigrate[a0_0x5c9b81(0x1bb)](a0_0x5c9b81(0x1b0)),async(_0xf4723d,_0x5da11d)=>{const _0x1de414=a0_0x5c9b81,_0x747b14=_0xf4723d[_0x1de414(0x1d3)]['filename'],_0x1adb16=await xlsx[_0x1de414(0x1ae)]('public/Migration/'+_0x747b14);let _0x430490=_0x1adb16[_0x1de414(0x1ff)],_0xfca60d=xlsx[_0x1de414(0x21d)][_0x1de414(0x1ba)](_0x1adb16[_0x1de414(0x257)][_0x430490[0x0]]);for(const _0x23a52b of _0xfca60d){const _0x192551=_0x23a52b[_0x1de414(0x210)],_0x2baa54=_0x23a52b['Brands'],_0x46e6b9=_0x23a52b[_0x1de414(0x206)],_0x37affd=_0x23a52b[_0x1de414(0x232)],_0xf9df98=_0x23a52b[_0x1de414(0x1f2)],_0xe8c738=_0x23a52b['Category'],_0x152570=_0x23a52b[_0x1de414(0x268)],_0x24b56c=_0x23a52b[_0x1de414(0x208)],_0x12ea64=_0x23a52b[_0x1de414(0x1f8)],_0x538ccf=_0x23a52b[_0x1de414(0x21a)],_0x4d83df=_0x23a52b[_0x1de414(0x204)],_0x579d8c=_0x23a52b[_0x1de414(0x1c0)];try{let _0xf733d6=await categories[_0x1de414(0x261)]({'name':_0xe8c738});if(!_0xf733d6){const _0x3d443f=new categories({'name':_0xe8c738,'products':'0'});_0xf733d6=await _0x3d443f[_0x1de414(0x1fc)]();}let _0xfb0858=await brands['findOne']({'name':_0x2baa54});if(!_0xfb0858){const _0x4278d2=new brands({'name':_0x2baa54,'products':'0'});_0xfb0858=await _0x4278d2[_0x1de414(0x1fc)]();}let _0x215ca8=await units[_0x1de414(0x261)]({'name':_0x46e6b9,'secondary_unit':_0x37affd});if(!_0x215ca8){const _0x3190ba=new units({'name':_0x46e6b9,'secondary_unit':_0x37affd,'products':'0'});_0x215ca8=await _0x3190ba[_0x1de414(0x1fc)]();}const _0x56e482=await product[_0x1de414(0x1bd)]({'name':_0x192551,'category':_0xf733d6[_0x1de414(0x1f4)],'brand':_0xfb0858[_0x1de414(0x1f4)],'secondary_unit':_0x215ca8[_0x1de414(0x251)],'product_code':_0xf9df98});console[_0x1de414(0x216)](_0x56e482['length']+'\x20<>\x20'+_0xf733d6[_0x1de414(0x1f4)]+_0x1de414(0x1e0)+_0xfb0858[_0x1de414(0x1f4)]+_0x1de414(0x1e0)+_0x215ca8['secondary_unit']+'\x20<>\x20'+_0xf9df98+_0x1de414(0x1e0)+_0x192551);if(_0x56e482[_0x1de414(0x1c7)]===0x0){const _0xe0dd01=new product({'image':_0x1de414(0x1f5),'name':_0x192551,'category':_0xf733d6[_0x1de414(0x1f4)],'brand':_0xfb0858['name'],'unit':_0x215ca8[_0x1de414(0x1f4)],'alertquantity':_0x152570,'product_code':_0xf9df98,'secondary_unit':_0x215ca8[_0x1de414(0x251)],'primary_code':_0x24b56c,'secondary_code':_0x12ea64,'maxStocks':_0x538ccf,'maxProdPerUnit':_0x4d83df,'product_category':_0x579d8c}),_0x32b4d2=await _0xe0dd01[_0x1de414(0x1fc)]();_0xf733d6[_0x1de414(0x21f)]=parseInt(_0xf733d6[_0x1de414(0x21f)])+0x1,await _0xf733d6[_0x1de414(0x1fc)](),_0xfb0858[_0x1de414(0x21f)]=parseInt(_0xfb0858[_0x1de414(0x21f)])+0x1,await _0xfb0858[_0x1de414(0x1fc)](),_0x215ca8[_0x1de414(0x21f)]=parseInt(_0x215ca8[_0x1de414(0x21f)])+0x1,await _0x215ca8['save'](),_0xf4723d['flash']('success',_0x192551+_0x1de414(0x242));}else{console[_0x1de414(0x216)](_0x56e482[0x0]);const _0x3a64f1=_0x56e482[0x0];_0x3a64f1[_0x1de414(0x1cc)]=_0xf733d6['name'],_0x3a64f1[_0x1de414(0x1f0)]=_0xfb0858[_0x1de414(0x1f4)],_0x3a64f1[_0x1de414(0x1d5)]=_0x215ca8[_0x1de414(0x1f4)],_0x3a64f1[_0x1de414(0x1ee)]=_0x152570,_0x3a64f1[_0x1de414(0x229)]=_0xf9df98,_0x3a64f1[_0x1de414(0x251)]=_0x215ca8['secondary_unit'],_0x3a64f1[_0x1de414(0x1fa)]=_0x24b56c,_0x3a64f1[_0x1de414(0x1c9)]=_0x12ea64,_0x3a64f1['maxStocks']=_0x538ccf,_0x3a64f1[_0x1de414(0x252)]=_0x4d83df,_0x3a64f1[_0x1de414(0x1be)]=_0x579d8c;const _0x27d215=await _0x3a64f1[_0x1de414(0x1fc)]();_0xf4723d[_0x1de414(0x1d2)](_0x1de414(0x237),_0x27d215[_0x1de414(0x1f4)]+'\x20Edit\x20Successfully');}}catch(_0x577c87){_0x5da11d[_0x1de414(0x1bc)](0x1f4)[_0x1de414(0x212)]({'proderror':_0x577c87['message'],'aproduct':_0x192551});}}_0x5da11d['redirect']('/products/view');}),router['post'](a0_0x5c9b81(0x267),auth,async(_0xc7b440,_0x54057c)=>{const _0x313459=a0_0x5c9b81;try{console[_0x313459(0x216)](_0xc7b440[_0x313459(0x1b5)]);const {data_cateory:_0x2758e4,datachoose:_0x12794}=_0xc7b440[_0x313459(0x1b5)];var _0x52bbd3;if(_0x12794==_0x313459(0x209))_0x52bbd3=await product[_0x313459(0x1dc)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x12794==_0x313459(0x1d8))_0x52bbd3=await product['aggregate']([{'$match':{'product_category':_0x2758e4}},{'$group':{'_id':_0x313459(0x1ed)}}]);else _0x12794==_0x313459(0x1e6)&&(_0x52bbd3=await product['aggregate']([{'$match':{'product_category':_0x2758e4}},{'$group':{'_id':_0x313459(0x1c3)}}]));}_0x54057c[_0x313459(0x212)](_0x52bbd3);}catch(_0x32c7d1){_0x54057c[_0x313459(0x212)]({'message':_0x32c7d1['message']});}}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x1df),auth,async(_0x47b68b,_0x40e588)=>{const _0x13e1b5=a0_0x5c9b81;try{const {data_choosing:_0x10c5e3,data_selected:_0x8dcdfe}=_0x47b68b[_0x13e1b5(0x1b5)];var _0x1621c2;if(_0x10c5e3==_0x13e1b5(0x209))_0x1621c2=await product['aggregate']([{'$match':{'product_category':_0x8dcdfe}}]);else{if(_0x10c5e3==_0x13e1b5(0x1d8))_0x1621c2=await product['aggregate']([{'$match':{'brand':_0x8dcdfe}}]);else _0x10c5e3==_0x13e1b5(0x1e6)&&(_0x1621c2=await product[_0x13e1b5(0x1dc)]([{'$match':{'category':_0x8dcdfe}}]));}_0x40e588[_0x13e1b5(0x212)](_0x1621c2);}catch(_0x501f7b){_0x40e588[_0x13e1b5(0x212)]({'message':_0x501f7b[_0x13e1b5(0x1e3)]});}}),router[a0_0x5c9b81(0x1db)]('/print_barcode',auth,async(_0x36f700,_0x285605)=>{const _0x52d374=a0_0x5c9b81,_0x486717=_0x36f700[_0x52d374(0x243)],_0x27926d=await profile[_0x52d374(0x261)]({'email':_0x486717['email']}),_0x93f7e2=await master_shop[_0x52d374(0x1bd)](),_0x12682a=await product[_0x52d374(0x1bd)]();if(_0x93f7e2[0x0][_0x52d374(0x22f)]=='English\x20(US)')var _0x4d8271=users['English'];else{if(_0x93f7e2[0x0]['language']=='Hindi')var _0x4d8271=users['Hindi'];else{if(_0x93f7e2[0x0][_0x52d374(0x22f)]==_0x52d374(0x255))var _0x4d8271=users[_0x52d374(0x255)];else{if(_0x93f7e2[0x0]['language']==_0x52d374(0x1ad))var _0x4d8271=users[_0x52d374(0x1ad)];else{if(_0x93f7e2[0x0]['language']=='French')var _0x4d8271=users[_0x52d374(0x1ce)];else{if(_0x93f7e2[0x0][_0x52d374(0x22f)]==_0x52d374(0x1fb))var _0x4d8271=users['Portuguese'];else{if(_0x93f7e2[0x0][_0x52d374(0x22f)]=='Chinese')var _0x4d8271=users['Chinese'];else{if(_0x93f7e2[0x0][_0x52d374(0x22f)]==_0x52d374(0x249))var _0x4d8271=users['Arabic'];}}}}}}}_0x285605['render']('product_barcode_products',{'success':_0x36f700['flash'](_0x52d374(0x237)),'errors':_0x36f700[_0x52d374(0x1d2)](_0x52d374(0x240)),'role':_0x486717,'profile':_0x27926d,'products':_0x12682a,'master_shop':_0x93f7e2,'language':_0x4d8271});}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x25a),auth,async(_0x5c9fa2,_0x4fee92)=>{const _0x265e04=a0_0x5c9b81,_0x4e5c3=await product[_0x265e04(0x1bd)]();_0x4fee92[_0x265e04(0x212)]({'data':_0x4e5c3});}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x211),auth,async(_0x12f1b1,_0x2f0743)=>{const _0x43c154=a0_0x5c9b81;try{const {dataProdCat:_0x7de464,dataProdIdentity:_0x5a9bbe}=_0x12f1b1[_0x43c154(0x1b5)];var _0x3210ab;switch(_0x7de464){case'fg':switch(_0x5a9bbe){case'Brands':_0x3210ab=await product[_0x43c154(0x1dc)]([{'$match':{'product_category':_0x43c154(0x253)}},{'$group':{'_id':_0x43c154(0x1ed)}},{'$project':{'brand':'$_id'}}]);break;case _0x43c154(0x23c):_0x3210ab=await product[_0x43c154(0x1dc)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x43c154(0x1c3)}},{'$project':{'category':_0x43c154(0x262)}}]);break;}break;case'rm':switch(_0x5a9bbe){case _0x43c154(0x233):_0x3210ab=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x43c154(0x1ed)}},{'$project':{'brand':'$_id'}}]);break;case _0x43c154(0x23c):_0x3210ab=await product[_0x43c154(0x1dc)]([{'$match':{'product_category':_0x43c154(0x235)}},{'$group':{'_id':_0x43c154(0x1c3)}},{'$project':{'category':_0x43c154(0x262)}}]);break;}break;}_0x2f0743[_0x43c154(0x212)](_0x3210ab);}catch(_0x5bbce2){_0x2f0743[_0x43c154(0x212)]({'message':_0x5bbce2['message']});}}),router[a0_0x5c9b81(0x24a)]('/print_barcode_filter/',auth,async(_0x3ef8f5,_0x3e8c55)=>{const _0x1c4cf0=a0_0x5c9b81;try{console['log'](_0x3ef8f5[_0x1c4cf0(0x1b5)]);const {prod_cat:_0x275720,identity:_0x2560c3,valueData:_0xe14518,typeofbarcode:_0x1fd715}=_0x3ef8f5[_0x1c4cf0(0x1b5)];let _0x24300f;switch(_0x275720){case'fg':if(_0x2560c3=='Brands')_0x24300f=await product[_0x1c4cf0(0x1dc)]([{'$match':{'product_category':_0x1c4cf0(0x253),'brand':_0xe14518}}]);else _0x2560c3==_0x1c4cf0(0x23c)&&(_0x24300f=await product[_0x1c4cf0(0x1dc)]([{'$match':{'product_category':_0x1c4cf0(0x253),'category':_0xe14518}}]));break;case'rm':if(_0x2560c3==_0x1c4cf0(0x233))_0x24300f=await product[_0x1c4cf0(0x1dc)]([{'$match':{'product_category':_0x1c4cf0(0x235),'brand':_0xe14518}}]);else _0x2560c3==_0x1c4cf0(0x23c)&&(_0x24300f=await product[_0x1c4cf0(0x1dc)]([{'$match':{'product_category':_0x1c4cf0(0x235),'category':_0xe14518}}]));break;}const _0x19cabb=_0x528c41=>_0x528c41*0x48,_0x4d3dc2={'width':0x3,'height':0x1},_0x2ce6f8=new PDFDocument({'margin':_0x19cabb(0.75),'size':[_0x19cabb(_0x4d3dc2['width']),_0x19cabb(_0x4d3dc2[_0x1c4cf0(0x1b9)])],'bufferPages':!![]}),_0x2b95b2=_0x24300f['length'];for(let _0x218553=0x0;_0x218553<=_0x2b95b2;_0x218553++){if(_0x218553!=_0x2b95b2){const _0x1d9e4e=_0x24300f[_0x218553][_0x1c4cf0(0x1f4)],_0x2b6c6a=_0x24300f[_0x218553]['primary_code'],_0x4eb4b3=_0x24300f[_0x218553][_0x1c4cf0(0x1c9)],_0x1670eb=_0x24300f[_0x218553][_0x1c4cf0(0x229)];var _0xe602c4;switch(_0x1fd715){case'1':_0xe602c4=_0x2b6c6a;break;case'2':_0xe602c4=_0x4eb4b3;break;case'3':_0xe602c4=_0x1670eb;break;}const _0x39dc5e={'width':0xd2,'height':0x64},_0x170903={'width':_0x19cabb(_0x4d3dc2[_0x1c4cf0(0x1c4)]),'height':_0x19cabb(_0x4d3dc2[_0x1c4cf0(0x1b9)])},_0x325901=new Canvas();JsBarcode(_0x325901,_0xe602c4,{'format':'CODE128','height':_0x39dc5e[_0x1c4cf0(0x1b9)],'displayValue':!![],'text':_0xe602c4});const _0x273ef8=_0x325901[_0x1c4cf0(0x1d9)](),_0x3e0b80=_0x170903[_0x1c4cf0(0x1c4)]/_0x39dc5e[_0x1c4cf0(0x1c4)],_0x1539fb=_0x170903[_0x1c4cf0(0x1b9)]/_0x39dc5e['height'],_0x4137d0=Math[_0x1c4cf0(0x246)](_0x3e0b80,_0x1539fb),_0x4c13de=_0x39dc5e[_0x1c4cf0(0x1c4)]*_0x4137d0,_0x2bc533=_0x39dc5e[_0x1c4cf0(0x1b9)]*_0x4137d0,_0xff704b=(_0x170903['width']-_0x4c13de)/0x2,_0x482950=(_0x170903[_0x1c4cf0(0x1b9)]-_0x2bc533)/0x2;_0x2ce6f8['image'](_0x273ef8,_0xff704b,_0x482950,{'width':_0x4c13de,'height':_0x2bc533}),_0x218553!=_0x2b95b2&&_0x2ce6f8[_0x1c4cf0(0x1b7)]();}}const _0x34b1d5=[];_0x2ce6f8['on']('data',_0x34b1d5[_0x1c4cf0(0x239)][_0x1c4cf0(0x1eb)](_0x34b1d5)),_0x2ce6f8['on'](_0x1c4cf0(0x1e7),()=>{const _0x432e68=_0x1c4cf0,_0x59e2bb=Buffer['concat'](_0x34b1d5),_0x338348=_0x59e2bb[_0x432e68(0x22b)](_0x432e68(0x20f));_0x3e8c55['json']({'pdfContent':_0x338348});}),_0x2ce6f8[_0x1c4cf0(0x1e7)]();}catch(_0xe90947){_0x3e8c55['json']({'message':_0xe90947[_0x1c4cf0(0x1e3)]});}}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x22a),auth,async(_0x56d415,_0x3b8a59)=>{const _0x3bdd80=a0_0x5c9b81;try{console['log'](_0x56d415[_0x3bdd80(0x1b5)]);const {prod_cat:_0x5ee6d8,identity:_0x316086,valueData:_0x26e37a}=_0x56d415[_0x3bdd80(0x1b5)];let _0x5a1b31;switch(_0x5ee6d8){case'fg':if(_0x316086==_0x3bdd80(0x233))_0x5a1b31=await product[_0x3bdd80(0x1dc)]([{'$match':{'product_category':_0x3bdd80(0x253),'brand':_0x26e37a}}]);else _0x316086==_0x3bdd80(0x23c)&&(_0x5a1b31=await product[_0x3bdd80(0x1dc)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x26e37a}}]));break;case'rm':if(_0x316086==_0x3bdd80(0x233))_0x5a1b31=await product['aggregate']([{'$match':{'product_category':_0x3bdd80(0x235),'brand':_0x26e37a}}]);else _0x316086=='Category'&&(_0x5a1b31=await product[_0x3bdd80(0x1dc)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x26e37a}}]));break;}_0x3b8a59[_0x3bdd80(0x212)]({'data':_0x5a1b31});}catch(_0x4edade){_0x3b8a59['json']({'message':_0x4edade['message']});}}),router[a0_0x5c9b81(0x24a)](a0_0x5c9b81(0x265),auth,async(_0x1a9d54,_0x1197fe)=>{const _0xae060b=a0_0x5c9b81;try{const _0x2f5080=_0x1a9d54['params']['id'],{copies:_0x5780a6,typeofbarcode:_0x581d78}=_0x1a9d54[_0xae060b(0x1b5)];var _0x44a9a2=await product[_0xae060b(0x1c5)](_0x2f5080);const _0x38f203=_0x4dcfaf=>_0x4dcfaf*0x48,_0x5e800e={'width':0x3,'height':0x1},_0x2f6038=new PDFDocument({'margin':_0x38f203(0.75),'size':[_0x38f203(_0x5e800e[_0xae060b(0x1c4)]),_0x38f203(_0x5e800e[_0xae060b(0x1b9)])],'bufferPages':!![]}),_0x432aa9=_0x5780a6,_0x23b78c=_0x44a9a2[_0xae060b(0x1f4)],_0x40225c=_0x44a9a2['primary_code'],_0x5aa8fc=_0x44a9a2[_0xae060b(0x1c9)],_0x54957f=_0x44a9a2[_0xae060b(0x229)];let _0x49cfcc;switch(_0x581d78){case'1':_0x49cfcc=_0x40225c;break;case'2':_0x49cfcc=_0x5aa8fc;break;case'3':_0x49cfcc=_0x54957f;break;}const _0x4fdb6a={'width':0xd2,'height':0x64},_0xf74097={'width':_0x38f203(_0x5e800e[_0xae060b(0x1c4)]),'height':_0x38f203(_0x5e800e['height'])};for(let _0x56ab23=0x1;_0x56ab23<=_0x432aa9;_0x56ab23++){const _0x2421ad=new Canvas();JsBarcode(_0x2421ad,_0x49cfcc,{'format':_0xae060b(0x236),'height':_0x4fdb6a[_0xae060b(0x1b9)],'displayValue':!![],'text':_0x49cfcc});const _0x3b255d=_0x2421ad['toBuffer'](),_0x6b7f91=_0xf74097[_0xae060b(0x1c4)]/_0x4fdb6a['width'],_0x4df073=_0xf74097[_0xae060b(0x1b9)]/_0x4fdb6a['height'],_0x464039=Math['min'](_0x6b7f91,_0x4df073),_0x3c7131=_0x4fdb6a[_0xae060b(0x1c4)]*_0x464039,_0x47e962=_0x4fdb6a[_0xae060b(0x1b9)]*_0x464039,_0xdc5a35=(_0xf74097[_0xae060b(0x1c4)]-_0x3c7131)/0x2,_0x48b4ad=(_0xf74097['height']-_0x47e962)/0x2;_0x2f6038['image'](_0x3b255d,_0xdc5a35,_0x48b4ad,{'width':_0x3c7131,'height':_0x47e962}),_0x56ab23!=_0x432aa9&&_0x2f6038['addPage']();}const _0x2d46b4=[];_0x2f6038['on'](_0xae060b(0x21b),_0x2d46b4[_0xae060b(0x239)]['bind'](_0x2d46b4)),_0x2f6038['on'](_0xae060b(0x1e7),()=>{const _0x430dff=_0xae060b,_0x4f73f9=Buffer[_0x430dff(0x22c)](_0x2d46b4),_0x590299=_0x4f73f9[_0x430dff(0x22b)](_0x430dff(0x20f));_0x1197fe[_0x430dff(0x212)]({'pdfContent':_0x590299});}),_0x2f6038['end']();}catch(_0x4fe5a6){_0x1197fe[_0xae060b(0x212)]({'message':_0x4fe5a6[_0xae060b(0x1e3)]});}}),module['exports']=router;