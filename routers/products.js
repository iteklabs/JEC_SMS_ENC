const a0_0x3c83c2=a0_0x48cb;function a0_0x4709(){const _0x189f88=['secondary_unit','Sheets','CODE128','10hOSyeO','2VNaNZV','$product_name','get','log','../middleware/auth','5sooVNg','/view/:id','aggregate','base64','pdfkit-table','Products\x20find_data','image','\x20brand\x20is\x20add\x20successfully','product_category','Category','findByIdAndDelete','product_details.product_name','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Spanish','defaultProduct.avif','/products_import_migrate_file','barcode\x20Product\x20master','PUnits','$product_details','product_stock','/print_barcode_filter_search/','/products/categories','readFile','Brands','Units','\x20unit\x20is\x20add\x20successfully','PName','product\x20update\x20successfully','$brand','/brands/delete/:id','English','columns','7016538QJUVaT','bind','brand\x20data\x20update\x20successfully','24319224EVoqFD','then','xlsx','$_id','\x20added\x20successfully','unit\x20data\x20delete\x20successfully','end','Content-Type','$secondary_unit','redirect','prod_categ','flash','PSecondaryUnits','product\x20edit','numeric','file','sheet_to_json','public/upload','Portuguese','add_product','write','/view','findById','filename','Products','message','categories\x20data\x20delete\x20successfully','originalname','$product_stock','categ','/units/:id','$product_docs','toString','email','$product_category','body','save','send','max_number_per_units','English\x20(US)','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','now','errors','/units/delete/:id','68280dCnsnU','/products/units','Arabic','/barcode_filter','French','$category','edit\x20Product\x20master','public/Migration','unit\x20data\x20update\x20successfully','product_docs','/filter_product','MaxperUnits','product_code','Product_Name','setHeader','data','Portuguese\x20(BR)','canvas','length','height','/print_barcode','Router','/barcode_data','\x20categories\x20is\x20add\x20successfully','6838168MjYJAp','multer','Products_category','Maximum_Stocks','PBrands','products','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','brands','Arabic\x20(ae)','diskStorage','single','Raw\x20Materials','min','German','/products/view','status','post','push','primary_code','findOne','/view/add_products','attachment;\x20filename=Product_Migration_File.xlsx','Product_Code','concat','Chinese','edit_product','/brands/:id','language','/brands','success','warehouse','toBuffer','Primary_Code','stock','maxStocks','params','Alert_QTY','name','4171140PUsaQH','/products/brands','jsbarcode','ProductCode','/categories/:id','map','Hindi','secondary_code','category','forEach','Products\x20warehouse_data','width','PAlQty','SheetNames','9020865AfPFmT','sku','long','\x20<>\x20','Prod_Cat','/categories/delete/:id','addPage','render','/units','/products_export_migrate_file','Content-Disposition','user','find','findByIdAndUpdate','brand','Secondary_Units','categories','2172808nVckRF','alertquantity','Secondary_Code','/categories','json','Enabled','product_barcode','unit','/barcode/:id','Finished\x20Goods','../public/language/languages.json','_id','master'];a0_0x4709=function(){return _0x189f88;};return a0_0x4709();}(function(_0x1a7d7c,_0x2fab56){const _0x86e8e3=a0_0x48cb,_0xfb3d26=_0x1a7d7c();while(!![]){try{const _0x12e68c=-parseInt(_0x86e8e3(0x170))/0x1+parseInt(_0x86e8e3(0x11c))/0x2*(-parseInt(_0x86e8e3(0x1ae))/0x3)+parseInt(_0x86e8e3(0x1cd))/0x4+parseInt(_0x86e8e3(0x121))/0x5*(parseInt(_0x86e8e3(0x141))/0x6)+-parseInt(_0x86e8e3(0x1bc))/0x7+-parseInt(_0x86e8e3(0x188))/0x8+parseInt(_0x86e8e3(0x144))/0x9*(parseInt(_0x86e8e3(0x11b))/0xa);if(_0x12e68c===_0x2fab56)break;else _0xfb3d26['push'](_0xfb3d26['shift']());}catch(_0x5dfdc6){_0xfb3d26['push'](_0xfb3d26['shift']());}}}(a0_0x4709,0xc665b));const express=require('express'),res=require('express/lib/response'),app=express(),router=express[a0_0x3c83c2(0x185)](),multer=require(a0_0x3c83c2(0x189)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x3c83c2(0x120)),users=require(a0_0x3c83c2(0x115)),excelJS=require('exceljs'),xlsx=require(a0_0x3c83c2(0x146)),JsBarcode=require(a0_0x3c83c2(0x1b0)),{Canvas}=require(a0_0x3c83c2(0x181)),PDFDocument=require(a0_0x3c83c2(0x125));router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x1d0),auth,async(_0x28b3a6,_0x4516db)=>{const _0x4ffccd=a0_0x3c83c2;try{const {username:_0x519c06,email:_0x4c123f,role:_0x3fd6fa}=_0x28b3a6[_0x4ffccd(0x1c7)],_0x25c984=_0x28b3a6[_0x4ffccd(0x1c7)],_0x26cfac=await profile[_0x4ffccd(0x19b)]({'email':_0x25c984[_0x4ffccd(0x165)]}),_0x22f93c=await master_shop[_0x4ffccd(0x1c8)]();console['log'](_0x4ffccd(0x117),_0x22f93c);const _0x58ba9f=await categories['find']();if(_0x22f93c[0x0][_0x4ffccd(0x1a3)]==_0x4ffccd(0x16b))var _0x3373ef=users[_0x4ffccd(0x13f)];else{if(_0x22f93c[0x0][_0x4ffccd(0x1a3)]=='Hindi')var _0x3373ef=users[_0x4ffccd(0x1b4)];else{if(_0x22f93c[0x0][_0x4ffccd(0x1a3)]=='German')var _0x3373ef=users[_0x4ffccd(0x195)];else{if(_0x22f93c[0x0][_0x4ffccd(0x1a3)]==_0x4ffccd(0x12e))var _0x3373ef=users[_0x4ffccd(0x12e)];else{if(_0x22f93c[0x0]['language']==_0x4ffccd(0x174))var _0x3373ef=users[_0x4ffccd(0x174)];else{if(_0x22f93c[0x0]['language']==_0x4ffccd(0x180))var _0x3373ef=users[_0x4ffccd(0x156)];else{if(_0x22f93c[0x0]['language']==_0x4ffccd(0x1a0))var _0x3373ef=users[_0x4ffccd(0x1a0)];else{if(_0x22f93c[0x0]['language']==_0x4ffccd(0x190))var _0x3373ef=users[_0x4ffccd(0x172)];}}}}}}}_0x4516db[_0x4ffccd(0x1c3)]('categories',{'success':_0x28b3a6['flash'](_0x4ffccd(0x1a5)),'errors':_0x28b3a6[_0x4ffccd(0x14f)]('errors'),'role':_0x25c984,'profile':_0x26cfac,'user':_0x58ba9f,'master_shop':_0x22f93c,'language':_0x3373ef});}catch(_0xfc3e69){console['log'](_0xfc3e69);}}),router[a0_0x3c83c2(0x198)]('/categories',auth,async(_0x5dcd84,_0x57ecc0)=>{const _0x153e88=a0_0x3c83c2;try{const {name:_0x1a6816,products:_0x5bc953}=_0x5dcd84['body'],_0x4c0d0f=new categories({'name':_0x1a6816,'products':_0x5bc953}),_0x292f7c=await categories[_0x153e88(0x19b)]({'name':_0x1a6816});_0x292f7c?_0x5dcd84[_0x153e88(0x14f)](_0x153e88(0x16e),_0x1a6816+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x5dcd84[_0x153e88(0x14f)](_0x153e88(0x1a5),_0x1a6816+_0x153e88(0x187));const _0x536af0=await _0x4c0d0f[_0x153e88(0x168)]();_0x57ecc0['redirect'](_0x153e88(0x136));}catch(_0xf4dbdc){console[_0x153e88(0x11f)](_0xf4dbdc);}}),router['get'](a0_0x3c83c2(0x1b2),auth,async(_0x528505,_0x5a55a1)=>{const _0x39d42c=a0_0x3c83c2;try{const {username:_0x47a5f7,email:_0x17c902,role:_0x80ad94}=_0x528505[_0x39d42c(0x1c7)],_0x98f787=_0x528505[_0x39d42c(0x1c7)],_0x2bfe3d=await profile[_0x39d42c(0x19b)]({'email':_0x98f787[_0x39d42c(0x165)]}),_0x24b1f4=await master_shop[_0x39d42c(0x1c8)]();console['log']('master',_0x24b1f4);const _0x5e53ad=_0x528505[_0x39d42c(0x1ab)]['id'];console[_0x39d42c(0x11f)](_0x5e53ad);const _0x1b38ea=await categories[_0x39d42c(0x15a)](_0x5e53ad);if(_0x24b1f4[0x0][_0x39d42c(0x1a3)]==_0x39d42c(0x16b))var _0x1ce9a2=users[_0x39d42c(0x13f)];else{if(_0x24b1f4[0x0][_0x39d42c(0x1a3)]==_0x39d42c(0x1b4))var _0x1ce9a2=users[_0x39d42c(0x1b4)];else{if(_0x24b1f4[0x0][_0x39d42c(0x1a3)]==_0x39d42c(0x195))var _0x1ce9a2=users['German'];else{if(_0x24b1f4[0x0][_0x39d42c(0x1a3)]==_0x39d42c(0x12e))var _0x1ce9a2=users[_0x39d42c(0x12e)];else{if(_0x24b1f4[0x0][_0x39d42c(0x1a3)]==_0x39d42c(0x174))var _0x1ce9a2=users[_0x39d42c(0x174)];else{if(_0x24b1f4[0x0][_0x39d42c(0x1a3)]=='Portuguese\x20(BR)')var _0x1ce9a2=users[_0x39d42c(0x156)];else{if(_0x24b1f4[0x0][_0x39d42c(0x1a3)]==_0x39d42c(0x1a0))var _0x1ce9a2=users[_0x39d42c(0x1a0)];else{if(_0x24b1f4[0x0][_0x39d42c(0x1a3)]==_0x39d42c(0x190))var _0x1ce9a2=users[_0x39d42c(0x172)];}}}}}}}_0x5a55a1['render'](_0x39d42c(0x1cc),{'success':_0x528505[_0x39d42c(0x14f)]('success'),'errors':_0x528505['flash'](_0x39d42c(0x16e)),'role':_0x98f787,'profile':_0x2bfe3d,'master_shop':_0x24b1f4,'user':_0x1b38ea,'language':_0x1ce9a2});}catch(_0x30849b){console[_0x39d42c(0x11f)](_0x30849b);}}),router['post'](a0_0x3c83c2(0x1b2),auth,async(_0xc5e9b0,_0x1cdd1d)=>{const _0x29ed9d=a0_0x3c83c2;try{const _0x19299b=_0xc5e9b0[_0x29ed9d(0x1ab)]['id'],_0x2e01ca=await categories[_0x29ed9d(0x1c9)](_0x19299b,_0xc5e9b0['body']);_0xc5e9b0[_0x29ed9d(0x14f)](_0x29ed9d(0x1a5),''+users['categories_edit']),_0x1cdd1d[_0x29ed9d(0x14d)]('/products/categories');}catch(_0x35e0c0){console[_0x29ed9d(0x11f)](_0x35e0c0);}}),router['get'](a0_0x3c83c2(0x1c1),auth,async(_0x156d2b,_0x4af378)=>{const _0x31fb22=a0_0x3c83c2;try{const _0x3ed687=_0x156d2b[_0x31fb22(0x1ab)]['id'],_0x48c0f4=await categories[_0x31fb22(0x12b)](_0x3ed687);_0x156d2b[_0x31fb22(0x14f)](_0x31fb22(0x1a5),_0x31fb22(0x15e)),_0x4af378['redirect']('/products/categories');}catch(_0x4d17f4){console[_0x31fb22(0x11f)](_0x4d17f4);}}),router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x1a4),auth,async(_0x3a1966,_0x161696)=>{const _0x3bcc99=a0_0x3c83c2;try{const {username:_0x2ca171,email:_0x45f06c,role:_0x40b916}=_0x3a1966[_0x3bcc99(0x1c7)],_0xc7b8cf=_0x3a1966[_0x3bcc99(0x1c7)],_0x49e684=await profile[_0x3bcc99(0x19b)]({'email':_0xc7b8cf['email']}),_0x3c5abc=await master_shop[_0x3bcc99(0x1c8)]();console[_0x3bcc99(0x11f)](_0x3bcc99(0x117),_0x3c5abc);const _0x507d03=await brands[_0x3bcc99(0x1c8)]();if(_0x3c5abc[0x0][_0x3bcc99(0x1a3)]==_0x3bcc99(0x16b))var _0x3252e0=users[_0x3bcc99(0x13f)];else{if(_0x3c5abc[0x0][_0x3bcc99(0x1a3)]==_0x3bcc99(0x1b4))var _0x3252e0=users[_0x3bcc99(0x1b4)];else{if(_0x3c5abc[0x0][_0x3bcc99(0x1a3)]==_0x3bcc99(0x195))var _0x3252e0=users[_0x3bcc99(0x195)];else{if(_0x3c5abc[0x0]['language']=='Spanish')var _0x3252e0=users[_0x3bcc99(0x12e)];else{if(_0x3c5abc[0x0][_0x3bcc99(0x1a3)]=='French')var _0x3252e0=users[_0x3bcc99(0x174)];else{if(_0x3c5abc[0x0][_0x3bcc99(0x1a3)]==_0x3bcc99(0x180))var _0x3252e0=users[_0x3bcc99(0x156)];else{if(_0x3c5abc[0x0][_0x3bcc99(0x1a3)]==_0x3bcc99(0x1a0))var _0x3252e0=users[_0x3bcc99(0x1a0)];else{if(_0x3c5abc[0x0][_0x3bcc99(0x1a3)]==_0x3bcc99(0x190))var _0x3252e0=users[_0x3bcc99(0x172)];}}}}}}}_0x161696[_0x3bcc99(0x1c3)](_0x3bcc99(0x18f),{'success':_0x3a1966[_0x3bcc99(0x14f)](_0x3bcc99(0x1a5)),'errors':_0x3a1966[_0x3bcc99(0x14f)]('errors'),'role':_0xc7b8cf,'profile':_0x49e684,'master_shop':_0x3c5abc,'user':_0x507d03,'language':_0x3252e0});}catch(_0x2c970f){console[_0x3bcc99(0x11f)](_0x2c970f);}}),router[a0_0x3c83c2(0x198)](a0_0x3c83c2(0x1a4),auth,async(_0x133caf,_0xa35250)=>{const _0x2aaa74=a0_0x3c83c2;try{const {name:_0x285eb1,products:_0x257643}=_0x133caf['body'],_0x4f34d8=new brands({'name':_0x285eb1,'products':_0x257643}),_0x3c8783=await brands[_0x2aaa74(0x19b)]({'name':_0x285eb1});_0x3c8783?_0x133caf[_0x2aaa74(0x14f)](_0x2aaa74(0x16e),_0x285eb1+_0x2aaa74(0x12d)):_0x133caf['flash'](_0x2aaa74(0x1a5),_0x285eb1+_0x2aaa74(0x128));const _0x570b25=await _0x4f34d8['save']();_0xa35250[_0x2aaa74(0x14d)]('/products/brands');}catch(_0x5f1160){console[_0x2aaa74(0x11f)](_0x5f1160);}}),router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x1a2),auth,async(_0x1d97a6,_0x33adea)=>{const _0x465c64=a0_0x3c83c2;try{const {username:_0xeef11a,email:_0x579c59,role:_0x4ab49c}=_0x1d97a6[_0x465c64(0x1c7)],_0x2e17d1=_0x1d97a6['user'],_0x33ecd7=await profile['findOne']({'email':_0x2e17d1['email']}),_0x220160=await master_shop[_0x465c64(0x1c8)]();console['log'](_0x465c64(0x117),_0x220160);const _0x269f30=_0x1d97a6[_0x465c64(0x1ab)]['id'];console[_0x465c64(0x11f)](_0x269f30);const _0x39a226=await brands[_0x465c64(0x15a)](_0x269f30);if(_0x220160[0x0][_0x465c64(0x1a3)]=='English\x20(US)')var _0x83a186=users[_0x465c64(0x13f)];else{if(_0x220160[0x0][_0x465c64(0x1a3)]==_0x465c64(0x1b4))var _0x83a186=users['Hindi'];else{if(_0x220160[0x0][_0x465c64(0x1a3)]==_0x465c64(0x195))var _0x83a186=users[_0x465c64(0x195)];else{if(_0x220160[0x0][_0x465c64(0x1a3)]==_0x465c64(0x12e))var _0x83a186=users[_0x465c64(0x12e)];else{if(_0x220160[0x0][_0x465c64(0x1a3)]=='French')var _0x83a186=users['French'];else{if(_0x220160[0x0][_0x465c64(0x1a3)]==_0x465c64(0x180))var _0x83a186=users['Portuguese'];else{if(_0x220160[0x0][_0x465c64(0x1a3)]==_0x465c64(0x1a0))var _0x83a186=users[_0x465c64(0x1a0)];else{if(_0x220160[0x0]['language']==_0x465c64(0x190))var _0x83a186=users[_0x465c64(0x172)];}}}}}}}_0x33adea['render']('brands',{'success':_0x1d97a6[_0x465c64(0x14f)](_0x465c64(0x1a5)),'errors':_0x1d97a6[_0x465c64(0x14f)](_0x465c64(0x16e)),'role':_0x2e17d1,'profile':_0x33ecd7,'master_shop':_0x220160,'user':_0x39a226,'language':_0x83a186});}catch(_0x2d9243){console[_0x465c64(0x11f)](_0x2d9243);}}),router[a0_0x3c83c2(0x198)](a0_0x3c83c2(0x1a2),auth,async(_0x322405,_0x4ce0c8)=>{const _0x53b21a=a0_0x3c83c2;try{const _0x2a15fe=_0x322405[_0x53b21a(0x1ab)]['id'],_0x471f1c=await brands[_0x53b21a(0x1c9)](_0x2a15fe,_0x322405[_0x53b21a(0x167)]);_0x322405['flash']('success',_0x53b21a(0x143)),_0x4ce0c8[_0x53b21a(0x14d)](_0x53b21a(0x1af));}catch(_0x5cc375){console[_0x53b21a(0x11f)](_0x5cc375);}}),router['get'](a0_0x3c83c2(0x13e),auth,async(_0x360848,_0x1a9820)=>{const _0x1fa1c9=a0_0x3c83c2;try{const _0x11e3d0=_0x360848[_0x1fa1c9(0x1ab)]['id'],_0xe4911=await brands[_0x1fa1c9(0x12b)](_0x11e3d0);_0x360848[_0x1fa1c9(0x14f)](_0x1fa1c9(0x1a5),'brand\x20data\x20delete\x20successfully'),_0x1a9820['redirect'](_0x1fa1c9(0x1af));}catch(_0x1300e9){console[_0x1fa1c9(0x11f)](_0x1300e9);}}),router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x1c4),auth,async(_0x45b1d2,_0x119bc0)=>{const _0x445182=a0_0x3c83c2;try{const {username:_0x4320a4,email:_0x532e1a,role:_0x219814}=_0x45b1d2[_0x445182(0x1c7)],_0x45ccf8=_0x45b1d2['user'],_0x273b1d=await profile['findOne']({'email':_0x45ccf8[_0x445182(0x165)]}),_0xd01c0c=await master_shop[_0x445182(0x1c8)]();console[_0x445182(0x11f)]('master',_0xd01c0c);const _0x2526f6=await units[_0x445182(0x1c8)]();if(_0xd01c0c[0x0]['language']==_0x445182(0x16b))var _0x326210=users[_0x445182(0x13f)];else{if(_0xd01c0c[0x0][_0x445182(0x1a3)]==_0x445182(0x1b4))var _0x326210=users[_0x445182(0x1b4)];else{if(_0xd01c0c[0x0][_0x445182(0x1a3)]==_0x445182(0x195))var _0x326210=users[_0x445182(0x195)];else{if(_0xd01c0c[0x0][_0x445182(0x1a3)]==_0x445182(0x12e))var _0x326210=users[_0x445182(0x12e)];else{if(_0xd01c0c[0x0][_0x445182(0x1a3)]==_0x445182(0x174))var _0x326210=users['French'];else{if(_0xd01c0c[0x0][_0x445182(0x1a3)]==_0x445182(0x180))var _0x326210=users[_0x445182(0x156)];else{if(_0xd01c0c[0x0]['language']==_0x445182(0x1a0))var _0x326210=users[_0x445182(0x1a0)];else{if(_0xd01c0c[0x0][_0x445182(0x1a3)]==_0x445182(0x190))var _0x326210=users[_0x445182(0x172)];}}}}}}}_0x119bc0[_0x445182(0x1c3)]('units',{'success':_0x45b1d2[_0x445182(0x14f)](_0x445182(0x1a5)),'errors':_0x45b1d2[_0x445182(0x14f)](_0x445182(0x16e)),'role':_0x45ccf8,'profile':_0x273b1d,'master_shop':_0xd01c0c,'user':_0x2526f6,'language':_0x326210});}catch(_0x303576){console[_0x445182(0x11f)](_0x303576);}}),router[a0_0x3c83c2(0x198)](a0_0x3c83c2(0x1c4),auth,async(_0x490129,_0x2643a0)=>{const _0x44e199=a0_0x3c83c2;try{const {name:_0x3e7db9,secondary_unit:_0x14d5c9,products:_0x44738d}=_0x490129['body'],_0x4aa1c6=new units({'name':_0x3e7db9,'secondary_unit':_0x14d5c9,'products':_0x44738d}),_0x6df7f6=await units[_0x44e199(0x19b)]({'name':_0x3e7db9});_0x6df7f6?_0x490129[_0x44e199(0x14f)](_0x44e199(0x16e),_0x3e7db9+_0x44e199(0x16c)):_0x490129['flash'](_0x44e199(0x1a5),_0x3e7db9+_0x44e199(0x13a));const _0x4d477c=await _0x4aa1c6[_0x44e199(0x168)]();_0x2643a0[_0x44e199(0x14d)](_0x44e199(0x171));}catch(_0x1f83e1){console[_0x44e199(0x11f)](_0x1f83e1);}}),router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x162),auth,async(_0x417f67,_0x1bd17d)=>{const _0x291420=a0_0x3c83c2;try{const {username:_0xfd41ef,email:_0x438c52,role:_0x46e281}=_0x417f67[_0x291420(0x1c7)],_0x1281f3=_0x417f67[_0x291420(0x1c7)],_0x449f26=await profile[_0x291420(0x19b)]({'email':_0x1281f3[_0x291420(0x165)]}),_0x185b87=await master_shop[_0x291420(0x1c8)]();console[_0x291420(0x11f)]('master',_0x185b87);const _0x5b118d=_0x417f67['params']['id'],_0x1c51d5=await units[_0x291420(0x15a)](_0x5b118d);if(_0x185b87[0x0][_0x291420(0x1a3)]==_0x291420(0x16b))var _0xdd65bf=users[_0x291420(0x13f)];else{if(_0x185b87[0x0][_0x291420(0x1a3)]==_0x291420(0x1b4))var _0xdd65bf=users[_0x291420(0x1b4)];else{if(_0x185b87[0x0][_0x291420(0x1a3)]==_0x291420(0x195))var _0xdd65bf=users[_0x291420(0x195)];else{if(_0x185b87[0x0][_0x291420(0x1a3)]=='Spanish')var _0xdd65bf=users[_0x291420(0x12e)];else{if(_0x185b87[0x0]['language']==_0x291420(0x174))var _0xdd65bf=users[_0x291420(0x174)];else{if(_0x185b87[0x0][_0x291420(0x1a3)]=='Portuguese\x20(BR)')var _0xdd65bf=users[_0x291420(0x156)];else{if(_0x185b87[0x0][_0x291420(0x1a3)]==_0x291420(0x1a0))var _0xdd65bf=users[_0x291420(0x1a0)];else{if(_0x185b87[0x0]['language']==_0x291420(0x190))var _0xdd65bf=users[_0x291420(0x172)];}}}}}}}_0x1bd17d[_0x291420(0x1c3)]('units',{'success':_0x417f67[_0x291420(0x14f)](_0x291420(0x1a5)),'errors':_0x417f67[_0x291420(0x14f)](_0x291420(0x16e)),'role':_0x1281f3,'profile':_0x449f26,'master_shop':_0x185b87,'user':_0x1c51d5,'language':_0xdd65bf});}catch(_0x4c6b8b){console[_0x291420(0x11f)](_0x4c6b8b);}}),router[a0_0x3c83c2(0x198)](a0_0x3c83c2(0x162),auth,async(_0x5310f7,_0x3f317b)=>{const _0x129dbf=a0_0x3c83c2;try{const _0x328ae0=_0x5310f7['params']['id'],_0x24a940=await units[_0x129dbf(0x1c9)](_0x328ae0,_0x5310f7[_0x129dbf(0x167)]);_0x5310f7[_0x129dbf(0x14f)](_0x129dbf(0x1a5),_0x129dbf(0x178)),_0x3f317b[_0x129dbf(0x14d)]('/products/units');}catch(_0x4b2664){console[_0x129dbf(0x11f)](_0x4b2664);}}),router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x16f),auth,async(_0x2626ec,_0x1b45f7)=>{const _0x2ebaa1=a0_0x3c83c2;try{const _0x105f5f=_0x2626ec[_0x2ebaa1(0x1ab)]['id'],_0x37c4c9=await units[_0x2ebaa1(0x12b)](_0x105f5f);_0x2626ec[_0x2ebaa1(0x14f)](_0x2ebaa1(0x1a5),_0x2ebaa1(0x149)),_0x1b45f7[_0x2ebaa1(0x14d)]('/products/units');}catch(_0x501d51){console['log'](_0x501d51);}});const storage=multer[a0_0x3c83c2(0x191)]({'destination':(_0x478d84,_0x1bf23d,_0xa51e26)=>{const _0x338bd9=a0_0x3c83c2;_0xa51e26(null,_0x338bd9(0x155));},'filename':(_0x4db3c1,_0x161423,_0x4a8692)=>{const _0x26349f=a0_0x3c83c2;_0x4a8692(null,Date[_0x26349f(0x16d)]()+_0x161423[_0x26349f(0x15f)]);}}),upload=multer({'storage':storage});router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x159),auth,async(_0x3058b3,_0x46cd24)=>{const _0x31c47e=a0_0x3c83c2;try{const {username:_0x10549b,email:_0x368b6c,role:_0x3943c8}=_0x3058b3[_0x31c47e(0x1c7)],_0x22686f=_0x3058b3[_0x31c47e(0x1c7)],_0x31825b=await profile['findOne']({'email':_0x22686f[_0x31c47e(0x165)]}),_0x4fd3a6={'year':'numeric','month':_0x31c47e(0x1be),'day':_0x31c47e(0x152)},_0x11b43b=await master_shop['find']();console[_0x31c47e(0x11f)]('Products\x20master',_0x11b43b);const _0xfc0108=await product[_0x31c47e(0x1c8)]();console[_0x31c47e(0x11f)](_0x31c47e(0x126),_0xfc0108);const _0x329811=await warehouse[_0x31c47e(0x123)]([{'$unwind':_0x31c47e(0x133)},{'$lookup':{'from':_0x31c47e(0x18d),'localField':_0x31c47e(0x12c),'foreignField':_0x31c47e(0x1ad),'as':_0x31c47e(0x179)}},{'$unwind':_0x31c47e(0x163)},{'$project':{'product_name':'$product_details.product_name','product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x31c47e(0x11d),'product_stock':{'$sum':_0x31c47e(0x160)}}}]);console['log'](_0x31c47e(0x1b8),_0x329811),_0x329811[_0x31c47e(0x1b7)](_0x251893=>{const _0x5b4693=_0x31c47e,_0x150c04=_0xfc0108[_0x5b4693(0x1b3)](_0x202bb9=>{const _0x1fdbd8=_0x5b4693;_0x202bb9['name']==_0x251893[_0x1fdbd8(0x116)]&&(_0x202bb9[_0x1fdbd8(0x1a9)]=parseInt(_0x202bb9['stock'])+parseInt(_0x251893[_0x1fdbd8(0x134)]));});}),console[_0x31c47e(0x11f)](_0x31c47e(0x126),_0xfc0108);if(_0x11b43b[0x0]['language']==_0x31c47e(0x16b))var _0x289209=users[_0x31c47e(0x13f)];else{if(_0x11b43b[0x0][_0x31c47e(0x1a3)]==_0x31c47e(0x1b4))var _0x289209=users[_0x31c47e(0x1b4)];else{if(_0x11b43b[0x0]['language']==_0x31c47e(0x195))var _0x289209=users[_0x31c47e(0x195)];else{if(_0x11b43b[0x0]['language']=='Spanish')var _0x289209=users['Spanish'];else{if(_0x11b43b[0x0]['language']==_0x31c47e(0x174))var _0x289209=users[_0x31c47e(0x174)];else{if(_0x11b43b[0x0][_0x31c47e(0x1a3)]==_0x31c47e(0x180))var _0x289209=users[_0x31c47e(0x156)];else{if(_0x11b43b[0x0][_0x31c47e(0x1a3)]==_0x31c47e(0x1a0))var _0x289209=users[_0x31c47e(0x1a0)];else{if(_0x11b43b[0x0][_0x31c47e(0x1a3)]==_0x31c47e(0x190))var _0x289209=users[_0x31c47e(0x172)];}}}}}}}_0x46cd24[_0x31c47e(0x1c3)]('products',{'success':_0x3058b3[_0x31c47e(0x14f)]('success'),'errors':_0x3058b3[_0x31c47e(0x14f)](_0x31c47e(0x16e)),'alldata':_0xfc0108,'profile':_0x31825b,'master_shop':_0x11b43b,'role':_0x22686f,'product_stock':_0x329811,'language':_0x289209});}catch(_0x1f664b){console['log'](_0x1f664b);}}),router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x19c),auth,async(_0x9e8d6c,_0x45b170)=>{const _0x56704b=a0_0x3c83c2;try{const {username:_0x136580,email:_0x56c4e1,role:_0x2b5772}=_0x9e8d6c['user'],_0x3f26b0=_0x9e8d6c[_0x56704b(0x1c7)],_0x2c8cf9=await profile[_0x56704b(0x19b)]({'email':_0x3f26b0['email']}),_0x5530be=await master_shop[_0x56704b(0x1c8)]();console[_0x56704b(0x11f)](_0x56704b(0x117),_0x5530be);const _0x2359b6=await categories[_0x56704b(0x1c8)]({}),_0x318d9b=await brands[_0x56704b(0x1c8)]({}),_0x3ac759=await units['find']({}),_0x2eb07e=await warehouse[_0x56704b(0x1c8)]({'status':'Enabled'});if(_0x5530be[0x0][_0x56704b(0x1a3)]==_0x56704b(0x16b))var _0x42c7f4=users[_0x56704b(0x13f)];else{if(_0x5530be[0x0]['language']==_0x56704b(0x1b4))var _0x42c7f4=users['Hindi'];else{if(_0x5530be[0x0]['language']==_0x56704b(0x195))var _0x42c7f4=users['German'];else{if(_0x5530be[0x0][_0x56704b(0x1a3)]==_0x56704b(0x12e))var _0x42c7f4=users[_0x56704b(0x12e)];else{if(_0x5530be[0x0][_0x56704b(0x1a3)]=='French')var _0x42c7f4=users[_0x56704b(0x174)];else{if(_0x5530be[0x0]['language']=='Portuguese\x20(BR)')var _0x42c7f4=users['Portuguese'];else{if(_0x5530be[0x0][_0x56704b(0x1a3)]==_0x56704b(0x1a0))var _0x42c7f4=users['Chinese'];else{if(_0x5530be[0x0][_0x56704b(0x1a3)]=='Arabic\x20(ae)')var _0x42c7f4=users[_0x56704b(0x172)];}}}}}}}_0x45b170[_0x56704b(0x1c3)](_0x56704b(0x157),{'success':_0x9e8d6c[_0x56704b(0x14f)](_0x56704b(0x1a5)),'errors':_0x9e8d6c[_0x56704b(0x14f)](_0x56704b(0x16e)),'role':_0x3f26b0,'profile':_0x2c8cf9,'categories':_0x2359b6,'brands':_0x318d9b,'master_shop':_0x5530be,'units':_0x3ac759,'language':_0x42c7f4,'find_data':_0x2eb07e});}catch(_0x715b04){console['log'](_0x715b04);}}),router[a0_0x3c83c2(0x198)](a0_0x3c83c2(0x19c),auth,upload[a0_0x3c83c2(0x192)](a0_0x3c83c2(0x127)),async(_0x3e3af4,_0x4e8753)=>{const _0x10f309=a0_0x3c83c2;try{const {name:_0x49a49a,category:_0x182c9a,brand:_0x3513e3,unit:_0x2a47fa,alertquantity:_0x4bc9f4,stock:_0x311114,product_code:_0x3a2425,warehouse:_0x2855c3,primary_ItemCode:_0x49a486,second_ItemCode:_0xf840a4,second_unit:_0x4f320d,maxPerUnit:_0x57863c,MaxPerProduct:_0x15ff84,sales_cat:_0x3997be,type_prod:_0x920cb1}=_0x3e3af4['body'],_0x31efda=_0x3e3af4['file']?.[_0x10f309(0x15b)]||_0x10f309(0x12f),_0x374efb=new product({'image':_0x31efda,'name':_0x49a49a,'category':_0x182c9a,'brand':_0x3513e3,'unit':_0x2a47fa,'alertquantity':_0x4bc9f4,'stock':_0x311114,'product_code':_0x3a2425,'warehouse':_0x2855c3,'primary_code':_0x49a486,'secondary_code':_0xf840a4,'second_unit':_0x4f320d,'maxStocks':_0x15ff84,'maxProdPerUnit':_0x57863c,'sales_category':_0x3997be,'type_products':_0x920cb1}),_0x4c3dac=await _0x374efb['save'](),_0x11de82=await categories['findOne']({'name':_0x182c9a});_0x11de82[_0x10f309(0x18d)]=parseInt(_0x11de82[_0x10f309(0x18d)])+0x1,await _0x11de82[_0x10f309(0x168)]();const _0xca0834=await brands[_0x10f309(0x19b)]({'name':_0x3513e3});_0xca0834[_0x10f309(0x18d)]=parseInt(_0xca0834[_0x10f309(0x18d)])+0x1,await _0xca0834[_0x10f309(0x168)]();const _0x373a94=await units[_0x10f309(0x19b)]({'name':_0x2a47fa});_0x373a94[_0x10f309(0x18d)]=parseInt(_0x373a94[_0x10f309(0x18d)])+0x1,await _0x373a94[_0x10f309(0x168)](),_0x3e3af4['flash'](_0x10f309(0x1a5),'product\x20add\x20successfully'),_0x4e8753['redirect']('/products/view');}catch(_0x384fef){console[_0x10f309(0x11f)](_0x384fef);}}),router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x122),auth,async(_0x419a22,_0x29e095)=>{const _0x471251=a0_0x3c83c2;try{const {username:_0x2fc56e,email:_0x3be9c4,role:_0x1b84ec}=_0x419a22[_0x471251(0x1c7)],_0x34e7bf=_0x419a22[_0x471251(0x1c7)],_0x28c495=await profile[_0x471251(0x19b)]({'email':_0x34e7bf['email']}),_0x15f49b=await master_shop[_0x471251(0x1c8)]();console[_0x471251(0x11f)](_0x471251(0x176),_0x15f49b);const _0x1e5390=_0x419a22[_0x471251(0x1ab)]['id'],_0x36be1d=await product[_0x471251(0x15a)](_0x1e5390),_0x456783=await categories[_0x471251(0x1c8)]({}),_0x5ca4ca=await brands['find']({}),_0x300a29=await units[_0x471251(0x1c8)]({}),_0x20cdac=await warehouse[_0x471251(0x1c8)]({'status':_0x471251(0x1d2)}),_0x4423c9=await units[_0x471251(0x123)]([{'$group':{'_id':_0x471251(0x147),'secondaryunit':{'$first':_0x471251(0x14c)}}}]);if(_0x15f49b[0x0][_0x471251(0x1a3)]=='English\x20(US)')var _0x29eb15=users[_0x471251(0x13f)];else{if(_0x15f49b[0x0]['language']==_0x471251(0x1b4))var _0x29eb15=users['Hindi'];else{if(_0x15f49b[0x0][_0x471251(0x1a3)]==_0x471251(0x195))var _0x29eb15=users[_0x471251(0x195)];else{if(_0x15f49b[0x0]['language']=='Spanish')var _0x29eb15=users['Spanish'];else{if(_0x15f49b[0x0][_0x471251(0x1a3)]==_0x471251(0x174))var _0x29eb15=users[_0x471251(0x174)];else{if(_0x15f49b[0x0]['language']==_0x471251(0x180))var _0x29eb15=users[_0x471251(0x156)];else{if(_0x15f49b[0x0][_0x471251(0x1a3)]==_0x471251(0x1a0))var _0x29eb15=users['Chinese'];else{if(_0x15f49b[0x0][_0x471251(0x1a3)]=='Arabic\x20(ae)')var _0x29eb15=users['Arabic'];}}}}}}}_0x29e095[_0x471251(0x1c3)](_0x471251(0x1a1),{'success':_0x419a22['flash'](_0x471251(0x1a5)),'errors':_0x419a22['flash'](_0x471251(0x16e)),'role':_0x34e7bf,'profile':_0x28c495,'alldata':_0x36be1d,'categories':_0x456783,'brands':_0x5ca4ca,'master_shop':_0x15f49b,'units':_0x300a29,'secondunit':_0x4423c9,'find_data':_0x20cdac,'language':_0x29eb15});}catch(_0x491b62){console[_0x471251(0x11f)](_0x491b62);}}),router[a0_0x3c83c2(0x198)](a0_0x3c83c2(0x122),auth,upload[a0_0x3c83c2(0x192)](a0_0x3c83c2(0x127)),async(_0x150798,_0x59418b)=>{const _0x22cd19=a0_0x3c83c2;try{const _0x14a129=_0x150798['params']['id'],_0xcf6796=await product[_0x22cd19(0x15a)](_0x14a129),{image:_0x3e60d0,name:_0x5a6720,category:_0x56be55,brand:_0x551ad5,sku:_0x2ef969,unit:_0x3c4bc6,alertquantity:_0x74d1c1,product_code:_0x55cd4a,warehouse:_0x2f4730,primary_ItemCode:_0x5cd2b8,second_ItemCode:_0x290519,second_unit:_0x424c96,maxPerUnit:_0x440300,MaxPerProduct:_0x544013,prod_catdata:_0x422678,type_prod:_0x25e192,sales_cat:_0x832a8c}=_0x150798['body'];_0x150798['file']&&(_0xcf6796[_0x22cd19(0x127)]=_0x150798[_0x22cd19(0x153)]['filename']);_0xcf6796[_0x22cd19(0x1ad)]=_0x5a6720,_0xcf6796[_0x22cd19(0x1b6)]=_0x56be55,_0xcf6796['brand']=_0x551ad5,_0xcf6796[_0x22cd19(0x1bd)]=_0x2ef969,_0xcf6796[_0x22cd19(0x1d4)]=_0x3c4bc6,_0xcf6796[_0x22cd19(0x1ce)]=_0x74d1c1,_0xcf6796['product_code']=_0x55cd4a,_0xcf6796[_0x22cd19(0x1a6)]=_0x2f4730,_0xcf6796[_0x22cd19(0x19a)]=_0x5cd2b8,_0xcf6796[_0x22cd19(0x1b5)]=_0x290519,_0xcf6796['secondary_unit']=_0x424c96,_0xcf6796[_0x22cd19(0x1aa)]=_0x544013,_0xcf6796['maxProdPerUnit']=_0x440300,_0xcf6796[_0x22cd19(0x129)]=_0x422678,_0xcf6796['type_products']=_0x25e192,_0xcf6796['sales_category']=_0x832a8c;const _0x2acd65=await _0xcf6796[_0x22cd19(0x168)]();console['log'](_0x22cd19(0x151),_0xcf6796),_0x150798[_0x22cd19(0x14f)](_0x22cd19(0x1a5),_0x22cd19(0x13c)),_0x59418b[_0x22cd19(0x14d)](_0x22cd19(0x196));}catch(_0x41ecdf){console['log'](_0x41ecdf);}}),router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x113),auth,async(_0x4f9568,_0x5834fe)=>{const _0x395ad9=a0_0x3c83c2;try{const {username:_0x21149f,email:_0x26a5e9,role:_0x1c8733}=_0x4f9568[_0x395ad9(0x1c7)],_0x444b80=_0x4f9568[_0x395ad9(0x1c7)],_0x457119=await profile[_0x395ad9(0x19b)]({'email':_0x444b80['email']}),_0x3c385a=await master_shop[_0x395ad9(0x1c8)]();console[_0x395ad9(0x11f)](_0x395ad9(0x131),_0x3c385a);const _0x1b5504=_0x4f9568[_0x395ad9(0x1ab)]['id'],_0xee6c5f=await product[_0x395ad9(0x15a)](_0x1b5504);console[_0x395ad9(0x11f)]('barcode\x20user_id',_0xee6c5f);if(_0x3c385a[0x0][_0x395ad9(0x1a3)]==_0x395ad9(0x16b))var _0x839ee9=users[_0x395ad9(0x13f)];else{if(_0x3c385a[0x0]['language']==_0x395ad9(0x1b4))var _0x839ee9=users[_0x395ad9(0x1b4)];else{if(_0x3c385a[0x0][_0x395ad9(0x1a3)]==_0x395ad9(0x195))var _0x839ee9=users['German'];else{if(_0x3c385a[0x0]['language']==_0x395ad9(0x12e))var _0x839ee9=users['Spanish'];else{if(_0x3c385a[0x0][_0x395ad9(0x1a3)]=='French')var _0x839ee9=users[_0x395ad9(0x174)];else{if(_0x3c385a[0x0]['language']==_0x395ad9(0x180))var _0x839ee9=users['Portuguese'];else{if(_0x3c385a[0x0]['language']==_0x395ad9(0x1a0))var _0x839ee9=users['Chinese'];else{if(_0x3c385a[0x0][_0x395ad9(0x1a3)]==_0x395ad9(0x190))var _0x839ee9=users[_0x395ad9(0x172)];}}}}}}}_0x5834fe[_0x395ad9(0x1c3)](_0x395ad9(0x1d3),{'success':_0x4f9568[_0x395ad9(0x14f)](_0x395ad9(0x1a5)),'errors':_0x4f9568[_0x395ad9(0x14f)](_0x395ad9(0x16e)),'role':_0x444b80,'profile':_0x457119,'alldata':_0xee6c5f,'master_shop':_0x3c385a,'language':_0x839ee9});}catch(_0x3dfb14){console['log'](_0x3dfb14);}}),router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x1c5),auth,async(_0x299de8,_0x23d837)=>{const _0x4fdeaa=a0_0x3c83c2;try{const _0x37193e=new excelJS['Workbook'](),_0x306293=_0x37193e['addWorksheet'](_0x4fdeaa(0x15c));return _0x306293[_0x4fdeaa(0x140)]=[{'header':_0x4fdeaa(0x17d),'key':_0x4fdeaa(0x13b),'width':0xa},{'header':_0x4fdeaa(0x138),'key':_0x4fdeaa(0x18c),'width':0xa},{'header':_0x4fdeaa(0x139),'key':_0x4fdeaa(0x132),'width':0xa},{'header':'Secondary_Units','key':_0x4fdeaa(0x150),'width':0xa},{'header':_0x4fdeaa(0x16a),'key':_0x4fdeaa(0x17b),'width':0xa},{'header':'Primary_Code','key':_0x4fdeaa(0x1b1),'width':0xa},{'header':_0x4fdeaa(0x1cf),'key':_0x4fdeaa(0x1b1),'width':0xa},{'header':_0x4fdeaa(0x19e),'key':_0x4fdeaa(0x1b1),'width':0xa},{'header':_0x4fdeaa(0x12a),'key':'PCat','width':0xa},{'header':'Alert_QTY','key':_0x4fdeaa(0x1ba),'width':0xa},{'header':_0x4fdeaa(0x18b),'key':'PAlQty','width':0xa},{'header':_0x4fdeaa(0x18a),'key':_0x4fdeaa(0x1c0),'width':0xa}],_0x23d837['setHeader'](_0x4fdeaa(0x14b),_0x4fdeaa(0x18e)),_0x23d837[_0x4fdeaa(0x17e)](_0x4fdeaa(0x1c6),_0x4fdeaa(0x19d)),_0x37193e['xlsx'][_0x4fdeaa(0x158)](_0x23d837)[_0x4fdeaa(0x145)](()=>{const _0x26cd95=_0x4fdeaa;_0x23d837[_0x26cd95(0x197)](0xc8);});}catch(_0x5972dd){_0x23d837['status'](0x190)[_0x4fdeaa(0x169)](_0x5972dd);}});function a0_0x48cb(_0x2efbf8,_0x313df7){const _0x470994=a0_0x4709();return a0_0x48cb=function(_0x48cbe3,_0x1ed2d5){_0x48cbe3=_0x48cbe3-0x113;let _0x2f77a4=_0x470994[_0x48cbe3];return _0x2f77a4;},a0_0x48cb(_0x2efbf8,_0x313df7);}const storage1=multer[a0_0x3c83c2(0x191)]({'destination':(_0x580321,_0x3bb529,_0x503f48)=>{const _0x2b4cfb=a0_0x3c83c2;_0x503f48(null,_0x2b4cfb(0x177));},'filename':(_0x5126d4,_0x42de2a,_0x54733e)=>{const _0x5ce4ca=a0_0x3c83c2;_0x54733e(null,Date['now']()+_0x42de2a[_0x5ce4ca(0x15f)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x3c83c2(0x198)](a0_0x3c83c2(0x130),auth,uploadMigrate[a0_0x3c83c2(0x192)]('migrate_product_fule'),async(_0xff67f6,_0x3f817e)=>{const _0x201052=a0_0x3c83c2,_0x4df784=_0xff67f6[_0x201052(0x153)][_0x201052(0x15b)],_0x9d1974=await xlsx[_0x201052(0x137)]('public/Migration/'+_0x4df784);let _0x14eafe=_0x9d1974[_0x201052(0x1bb)],_0x264a90=xlsx['utils'][_0x201052(0x154)](_0x9d1974[_0x201052(0x119)][_0x14eafe[0x0]]);for(const _0x5455e0 of _0x264a90){const _0x17b0cd=_0x5455e0[_0x201052(0x17d)],_0x592dce=_0x5455e0['Brands'],_0x32df0d=_0x5455e0['Units'],_0x3650ca=_0x5455e0[_0x201052(0x1cb)],_0x4517c3=_0x5455e0[_0x201052(0x19e)],_0x24923c=_0x5455e0[_0x201052(0x12a)],_0x497593=_0x5455e0[_0x201052(0x1ac)],_0x4a020a=_0x5455e0[_0x201052(0x1a8)],_0x8242c8=_0x5455e0[_0x201052(0x1cf)],_0x9e24c7=_0x5455e0['Maximum_Stocks'],_0xfc279f=_0x5455e0['max_number_per_units'],_0x508460=_0x5455e0['Products_category'];try{let _0x4bf31a=await categories['findOne']({'name':_0x24923c});if(!_0x4bf31a){const _0x3866f6=new categories({'name':_0x24923c,'products':'0'});_0x4bf31a=await _0x3866f6[_0x201052(0x168)]();}let _0x485701=await brands[_0x201052(0x19b)]({'name':_0x592dce});if(!_0x485701){const _0x2ea9bb=new brands({'name':_0x592dce,'products':'0'});_0x485701=await _0x2ea9bb[_0x201052(0x168)]();}let _0x57796b=await units[_0x201052(0x19b)]({'name':_0x32df0d,'secondary_unit':_0x3650ca});if(!_0x57796b){const _0x591f6b=new units({'name':_0x32df0d,'secondary_unit':_0x3650ca,'products':'0'});_0x57796b=await _0x591f6b['save']();}const _0x541920=await product[_0x201052(0x1c8)]({'name':_0x17b0cd,'category':_0x4bf31a[_0x201052(0x1ad)],'brand':_0x485701[_0x201052(0x1ad)],'secondary_unit':_0x57796b[_0x201052(0x118)],'product_code':_0x4517c3});console[_0x201052(0x11f)](_0x541920[_0x201052(0x182)]+_0x201052(0x1bf)+_0x4bf31a[_0x201052(0x1ad)]+'\x20<>\x20'+_0x485701[_0x201052(0x1ad)]+_0x201052(0x1bf)+_0x57796b[_0x201052(0x118)]+_0x201052(0x1bf)+_0x4517c3+'\x20<>\x20'+_0x17b0cd);if(_0x541920[_0x201052(0x182)]===0x0){const _0x4534df=new product({'image':_0x201052(0x12f),'name':_0x17b0cd,'category':_0x4bf31a[_0x201052(0x1ad)],'brand':_0x485701['name'],'unit':_0x57796b[_0x201052(0x1ad)],'alertquantity':_0x497593,'product_code':_0x4517c3,'secondary_unit':_0x57796b['secondary_unit'],'primary_code':_0x4a020a,'secondary_code':_0x8242c8,'maxStocks':_0x9e24c7,'maxProdPerUnit':_0xfc279f,'product_category':_0x508460}),_0xee20e7=await _0x4534df[_0x201052(0x168)]();_0x4bf31a[_0x201052(0x18d)]=parseInt(_0x4bf31a[_0x201052(0x18d)])+0x1,await _0x4bf31a[_0x201052(0x168)](),_0x485701[_0x201052(0x18d)]=parseInt(_0x485701[_0x201052(0x18d)])+0x1,await _0x485701[_0x201052(0x168)](),_0x57796b[_0x201052(0x18d)]=parseInt(_0x57796b[_0x201052(0x18d)])+0x1,await _0x57796b['save'](),_0xff67f6['flash'](_0x201052(0x1a5),_0x17b0cd+_0x201052(0x148));}else{console[_0x201052(0x11f)](_0x541920[0x0]);const _0xfc47c1=_0x541920[0x0];_0xfc47c1[_0x201052(0x1b6)]=_0x4bf31a[_0x201052(0x1ad)],_0xfc47c1[_0x201052(0x1ca)]=_0x485701['name'],_0xfc47c1[_0x201052(0x1d4)]=_0x57796b[_0x201052(0x1ad)],_0xfc47c1[_0x201052(0x1ce)]=_0x497593,_0xfc47c1[_0x201052(0x17c)]=_0x4517c3,_0xfc47c1[_0x201052(0x118)]=_0x57796b['secondary_unit'],_0xfc47c1[_0x201052(0x19a)]=_0x4a020a,_0xfc47c1[_0x201052(0x1b5)]=_0x8242c8,_0xfc47c1['maxStocks']=_0x9e24c7,_0xfc47c1['maxProdPerUnit']=_0xfc279f,_0xfc47c1[_0x201052(0x129)]=_0x508460;const _0xd0534c=await _0xfc47c1['save']();_0xff67f6[_0x201052(0x14f)](_0x201052(0x1a5),_0xd0534c['name']+'\x20Edit\x20Successfully');}}catch(_0x25ebe5){_0x3f817e[_0x201052(0x197)](0x1f4)[_0x201052(0x1d1)]({'proderror':_0x25ebe5[_0x201052(0x15d)],'aproduct':_0x17b0cd});}}_0x3f817e[_0x201052(0x14d)](_0x201052(0x196));}),router[a0_0x3c83c2(0x198)]('/select_data',auth,async(_0x5187ba,_0x373d3f)=>{const _0x4cf1df=a0_0x3c83c2;try{console[_0x4cf1df(0x11f)](_0x5187ba['body']);const {data_cateory:_0x535699,datachoose:_0xe2fa93}=_0x5187ba['body'];var _0xcd2255;if(_0xe2fa93==_0x4cf1df(0x14e))_0xcd2255=await product['aggregate']([{'$group':{'_id':_0x4cf1df(0x166)}}]);else{if(_0xe2fa93==_0x4cf1df(0x18f))_0xcd2255=await product['aggregate']([{'$match':{'product_category':_0x535699}},{'$group':{'_id':_0x4cf1df(0x13d)}}]);else _0xe2fa93==_0x4cf1df(0x161)&&(_0xcd2255=await product[_0x4cf1df(0x123)]([{'$match':{'product_category':_0x535699}},{'$group':{'_id':_0x4cf1df(0x175)}}]));}_0x373d3f[_0x4cf1df(0x1d1)](_0xcd2255);}catch(_0x1d48e5){_0x373d3f[_0x4cf1df(0x1d1)]({'message':_0x1d48e5[_0x4cf1df(0x15d)]});}}),router[a0_0x3c83c2(0x198)](a0_0x3c83c2(0x17a),auth,async(_0x59e881,_0x5cdea4)=>{const _0x100cba=a0_0x3c83c2;try{const {data_choosing:_0x316887,data_selected:_0xb92ef6}=_0x59e881[_0x100cba(0x167)];var _0x147142;if(_0x316887==_0x100cba(0x14e))_0x147142=await product[_0x100cba(0x123)]([{'$match':{'product_category':_0xb92ef6}}]);else{if(_0x316887==_0x100cba(0x18f))_0x147142=await product['aggregate']([{'$match':{'brand':_0xb92ef6}}]);else _0x316887==_0x100cba(0x161)&&(_0x147142=await product[_0x100cba(0x123)]([{'$match':{'category':_0xb92ef6}}]));}_0x5cdea4[_0x100cba(0x1d1)](_0x147142);}catch(_0x56b23e){_0x5cdea4[_0x100cba(0x1d1)]({'message':_0x56b23e[_0x100cba(0x15d)]});}}),router[a0_0x3c83c2(0x11e)](a0_0x3c83c2(0x184),auth,async(_0x1eae65,_0x1c6d11)=>{const _0x4c071a=a0_0x3c83c2,_0x18f8e2=_0x1eae65[_0x4c071a(0x1c7)],_0x30362a=await profile[_0x4c071a(0x19b)]({'email':_0x18f8e2['email']}),_0x58f185=await master_shop[_0x4c071a(0x1c8)](),_0x31462c=await product[_0x4c071a(0x1c8)]();if(_0x58f185[0x0][_0x4c071a(0x1a3)]==_0x4c071a(0x16b))var _0x90c45a=users[_0x4c071a(0x13f)];else{if(_0x58f185[0x0][_0x4c071a(0x1a3)]==_0x4c071a(0x1b4))var _0x90c45a=users[_0x4c071a(0x1b4)];else{if(_0x58f185[0x0]['language']==_0x4c071a(0x195))var _0x90c45a=users[_0x4c071a(0x195)];else{if(_0x58f185[0x0][_0x4c071a(0x1a3)]=='Spanish')var _0x90c45a=users[_0x4c071a(0x12e)];else{if(_0x58f185[0x0][_0x4c071a(0x1a3)]==_0x4c071a(0x174))var _0x90c45a=users[_0x4c071a(0x174)];else{if(_0x58f185[0x0][_0x4c071a(0x1a3)]==_0x4c071a(0x180))var _0x90c45a=users[_0x4c071a(0x156)];else{if(_0x58f185[0x0][_0x4c071a(0x1a3)]==_0x4c071a(0x1a0))var _0x90c45a=users[_0x4c071a(0x1a0)];else{if(_0x58f185[0x0][_0x4c071a(0x1a3)]==_0x4c071a(0x190))var _0x90c45a=users['Arabic'];}}}}}}}_0x1c6d11['render']('product_barcode_products',{'success':_0x1eae65[_0x4c071a(0x14f)](_0x4c071a(0x1a5)),'errors':_0x1eae65[_0x4c071a(0x14f)]('errors'),'role':_0x18f8e2,'profile':_0x30362a,'products':_0x31462c,'master_shop':_0x58f185,'language':_0x90c45a});}),router['post'](a0_0x3c83c2(0x186),auth,async(_0x26d540,_0x509826)=>{const _0x140f51=a0_0x3c83c2,_0x500551=await product[_0x140f51(0x1c8)]();_0x509826[_0x140f51(0x1d1)]({'data':_0x500551});}),router['post'](a0_0x3c83c2(0x173),auth,async(_0x3211a8,_0x246848)=>{const _0x130a4e=a0_0x3c83c2;try{const {dataProdCat:_0x2d1f24,dataProdIdentity:_0x1c2eda}=_0x3211a8['body'];var _0x104a4e;switch(_0x2d1f24){case'fg':switch(_0x1c2eda){case _0x130a4e(0x138):_0x104a4e=await product[_0x130a4e(0x123)]([{'$match':{'product_category':_0x130a4e(0x114)}},{'$group':{'_id':_0x130a4e(0x13d)}},{'$project':{'brand':_0x130a4e(0x147)}}]);break;case _0x130a4e(0x12a):_0x104a4e=await product[_0x130a4e(0x123)]([{'$match':{'product_category':_0x130a4e(0x114)}},{'$group':{'_id':_0x130a4e(0x175)}},{'$project':{'category':_0x130a4e(0x147)}}]);break;}break;case'rm':switch(_0x1c2eda){case _0x130a4e(0x138):_0x104a4e=await product[_0x130a4e(0x123)]([{'$match':{'product_category':_0x130a4e(0x193)}},{'$group':{'_id':_0x130a4e(0x13d)}},{'$project':{'brand':_0x130a4e(0x147)}}]);break;case _0x130a4e(0x12a):_0x104a4e=await product['aggregate']([{'$match':{'product_category':_0x130a4e(0x193)}},{'$group':{'_id':_0x130a4e(0x175)}},{'$project':{'category':_0x130a4e(0x147)}}]);break;}break;}_0x246848[_0x130a4e(0x1d1)](_0x104a4e);}catch(_0x319df8){_0x246848[_0x130a4e(0x1d1)]({'message':_0x319df8[_0x130a4e(0x15d)]});}}),router[a0_0x3c83c2(0x198)]('/print_barcode_filter/',auth,async(_0x56b52c,_0x3b667c)=>{const _0x51d3c2=a0_0x3c83c2;try{console[_0x51d3c2(0x11f)](_0x56b52c['body']);const {prod_cat:_0x1b9bb5,identity:_0x52c9b6,valueData:_0x2eab7d,typeofbarcode:_0x5bbf13}=_0x56b52c['body'];let _0x2d315c;switch(_0x1b9bb5){case'fg':if(_0x52c9b6==_0x51d3c2(0x138))_0x2d315c=await product[_0x51d3c2(0x123)]([{'$match':{'product_category':_0x51d3c2(0x114),'brand':_0x2eab7d}}]);else _0x52c9b6==_0x51d3c2(0x12a)&&(_0x2d315c=await product['aggregate']([{'$match':{'product_category':_0x51d3c2(0x114),'category':_0x2eab7d}}]));break;case'rm':if(_0x52c9b6=='Brands')_0x2d315c=await product[_0x51d3c2(0x123)]([{'$match':{'product_category':_0x51d3c2(0x193),'brand':_0x2eab7d}}]);else _0x52c9b6==_0x51d3c2(0x12a)&&(_0x2d315c=await product[_0x51d3c2(0x123)]([{'$match':{'product_category':_0x51d3c2(0x193),'category':_0x2eab7d}}]));break;}const _0x40571f=_0xb246ca=>_0xb246ca*0x48,_0x32e9ce={'width':0x3,'height':0x1},_0x40b5bb=new PDFDocument({'margin':_0x40571f(0.75),'size':[_0x40571f(_0x32e9ce[_0x51d3c2(0x1b9)]),_0x40571f(_0x32e9ce['height'])],'bufferPages':!![]}),_0x433e78=_0x2d315c['length'];for(let _0x23f3a2=0x0;_0x23f3a2<=_0x433e78;_0x23f3a2++){if(_0x23f3a2!=_0x433e78){const _0x365d0f=_0x2d315c[_0x23f3a2][_0x51d3c2(0x1ad)],_0x8839d4=_0x2d315c[_0x23f3a2]['primary_code'],_0x36dc71=_0x2d315c[_0x23f3a2][_0x51d3c2(0x1b5)],_0x27b06f=_0x2d315c[_0x23f3a2]['product_code'];var _0x1283c0;switch(_0x5bbf13){case'1':_0x1283c0=_0x8839d4;break;case'2':_0x1283c0=_0x36dc71;break;case'3':_0x1283c0=_0x27b06f;break;}const _0x2f9867={'width':0xd2,'height':0x64},_0x4f7cc6={'width':_0x40571f(_0x32e9ce[_0x51d3c2(0x1b9)]),'height':_0x40571f(_0x32e9ce[_0x51d3c2(0x183)])},_0xc18e7b=new Canvas();JsBarcode(_0xc18e7b,_0x1283c0,{'format':_0x51d3c2(0x11a),'height':_0x2f9867[_0x51d3c2(0x183)],'displayValue':!![],'text':_0x1283c0});const _0x3145c5=_0xc18e7b[_0x51d3c2(0x1a7)](),_0x573138=_0x4f7cc6['width']/_0x2f9867['width'],_0x59a7f6=_0x4f7cc6[_0x51d3c2(0x183)]/_0x2f9867['height'],_0x3a6a14=Math['min'](_0x573138,_0x59a7f6),_0xc5506c=_0x2f9867[_0x51d3c2(0x1b9)]*_0x3a6a14,_0x3bb320=_0x2f9867[_0x51d3c2(0x183)]*_0x3a6a14,_0x2ef837=(_0x4f7cc6[_0x51d3c2(0x1b9)]-_0xc5506c)/0x2,_0x284922=(_0x4f7cc6[_0x51d3c2(0x183)]-_0x3bb320)/0x2;_0x40b5bb[_0x51d3c2(0x127)](_0x3145c5,_0x2ef837,_0x284922,{'width':_0xc5506c,'height':_0x3bb320}),_0x23f3a2!=_0x433e78&&_0x40b5bb[_0x51d3c2(0x1c2)]();}}const _0x539cdf=[];_0x40b5bb['on']('data',_0x539cdf[_0x51d3c2(0x199)][_0x51d3c2(0x142)](_0x539cdf)),_0x40b5bb['on'](_0x51d3c2(0x14a),()=>{const _0x44ed85=_0x51d3c2,_0x42c7a8=Buffer[_0x44ed85(0x19f)](_0x539cdf),_0x88c71b=_0x42c7a8[_0x44ed85(0x164)](_0x44ed85(0x124));_0x3b667c[_0x44ed85(0x1d1)]({'pdfContent':_0x88c71b});}),_0x40b5bb[_0x51d3c2(0x14a)]();}catch(_0x440af6){_0x3b667c['json']({'message':_0x440af6[_0x51d3c2(0x15d)]});}}),router['post'](a0_0x3c83c2(0x135),auth,async(_0x368ad7,_0x31df35)=>{const _0x4e21fe=a0_0x3c83c2;try{console[_0x4e21fe(0x11f)](_0x368ad7[_0x4e21fe(0x167)]);const {prod_cat:_0x1aeaa4,identity:_0x218f59,valueData:_0x84118d}=_0x368ad7['body'];let _0x1301ce;switch(_0x1aeaa4){case'fg':if(_0x218f59==_0x4e21fe(0x138))_0x1301ce=await product[_0x4e21fe(0x123)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x84118d}}]);else _0x218f59==_0x4e21fe(0x12a)&&(_0x1301ce=await product[_0x4e21fe(0x123)]([{'$match':{'product_category':_0x4e21fe(0x114),'category':_0x84118d}}]));break;case'rm':if(_0x218f59=='Brands')_0x1301ce=await product['aggregate']([{'$match':{'product_category':_0x4e21fe(0x193),'brand':_0x84118d}}]);else _0x218f59==_0x4e21fe(0x12a)&&(_0x1301ce=await product['aggregate']([{'$match':{'product_category':_0x4e21fe(0x193),'category':_0x84118d}}]));break;}_0x31df35[_0x4e21fe(0x1d1)]({'data':_0x1301ce});}catch(_0x2f2e20){_0x31df35[_0x4e21fe(0x1d1)]({'message':_0x2f2e20[_0x4e21fe(0x15d)]});}}),router[a0_0x3c83c2(0x198)]('/print_barcode_single/:id',auth,async(_0x132ad9,_0x451688)=>{const _0x5db224=a0_0x3c83c2;try{const _0x5e15e9=_0x132ad9[_0x5db224(0x1ab)]['id'],{copies:_0xa78488,typeofbarcode:_0x40ee0e}=_0x132ad9[_0x5db224(0x167)];var _0x20ce5a=await product[_0x5db224(0x15a)](_0x5e15e9);const _0x4191d4=_0x36e862=>_0x36e862*0x48,_0x4c76ed={'width':0x3,'height':0x1},_0x41036d=new PDFDocument({'margin':_0x4191d4(0.75),'size':[_0x4191d4(_0x4c76ed[_0x5db224(0x1b9)]),_0x4191d4(_0x4c76ed[_0x5db224(0x183)])],'bufferPages':!![]}),_0x1af1ac=_0xa78488,_0x405c54=_0x20ce5a['name'],_0x15ad44=_0x20ce5a['primary_code'],_0x4f410c=_0x20ce5a[_0x5db224(0x1b5)],_0x1281f4=_0x20ce5a[_0x5db224(0x17c)];let _0x51adea;switch(_0x40ee0e){case'1':_0x51adea=_0x15ad44;break;case'2':_0x51adea=_0x4f410c;break;case'3':_0x51adea=_0x1281f4;break;}const _0x1f735c={'width':0xd2,'height':0x64},_0x51f1b1={'width':_0x4191d4(_0x4c76ed[_0x5db224(0x1b9)]),'height':_0x4191d4(_0x4c76ed[_0x5db224(0x183)])};for(let _0x448f61=0x1;_0x448f61<=_0x1af1ac;_0x448f61++){const _0x57d07c=new Canvas();JsBarcode(_0x57d07c,_0x51adea,{'format':_0x5db224(0x11a),'height':_0x1f735c['height'],'displayValue':!![],'text':_0x51adea});const _0x9e60c=_0x57d07c[_0x5db224(0x1a7)](),_0x4832bc=_0x51f1b1[_0x5db224(0x1b9)]/_0x1f735c[_0x5db224(0x1b9)],_0x332627=_0x51f1b1[_0x5db224(0x183)]/_0x1f735c[_0x5db224(0x183)],_0x2a5821=Math[_0x5db224(0x194)](_0x4832bc,_0x332627),_0x198495=_0x1f735c[_0x5db224(0x1b9)]*_0x2a5821,_0x55ebb1=_0x1f735c['height']*_0x2a5821,_0x254905=(_0x51f1b1[_0x5db224(0x1b9)]-_0x198495)/0x2,_0x142e6d=(_0x51f1b1[_0x5db224(0x183)]-_0x55ebb1)/0x2;_0x41036d[_0x5db224(0x127)](_0x9e60c,_0x254905,_0x142e6d,{'width':_0x198495,'height':_0x55ebb1}),_0x448f61!=_0x1af1ac&&_0x41036d[_0x5db224(0x1c2)]();}const _0x2a5a72=[];_0x41036d['on'](_0x5db224(0x17f),_0x2a5a72['push'][_0x5db224(0x142)](_0x2a5a72)),_0x41036d['on']('end',()=>{const _0x1066c9=_0x5db224,_0x36493f=Buffer[_0x1066c9(0x19f)](_0x2a5a72),_0x480ebf=_0x36493f[_0x1066c9(0x164)](_0x1066c9(0x124));_0x451688[_0x1066c9(0x1d1)]({'pdfContent':_0x480ebf});}),_0x41036d[_0x5db224(0x14a)]();}catch(_0x390910){_0x451688[_0x5db224(0x1d1)]({'message':_0x390910[_0x5db224(0x15d)]});}}),module['exports']=router;