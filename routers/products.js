const a0_0x41d038=a0_0x5bb8;(function(_0x4dccee,_0x25c8cb){const _0x34a4de=a0_0x5bb8,_0x2d8f11=_0x4dccee();while(!![]){try{const _0x1da866=-parseInt(_0x34a4de(0xe4))/0x1+parseInt(_0x34a4de(0x118))/0x2*(-parseInt(_0x34a4de(0x10e))/0x3)+parseInt(_0x34a4de(0x169))/0x4+-parseInt(_0x34a4de(0x142))/0x5+-parseInt(_0x34a4de(0xd8))/0x6*(parseInt(_0x34a4de(0xda))/0x7)+parseInt(_0x34a4de(0x13f))/0x8+parseInt(_0x34a4de(0x111))/0x9*(parseInt(_0x34a4de(0x151))/0xa);if(_0x1da866===_0x25c8cb)break;else _0x2d8f11['push'](_0x2d8f11['shift']());}catch(_0x2e62b2){_0x2d8f11['push'](_0x2d8f11['shift']());}}}(a0_0xec23,0xb3e0a));const express=require(a0_0x41d038(0xf5)),res=require(a0_0x41d038(0xe1)),app=express(),router=express[a0_0x41d038(0x11d)](),multer=require(a0_0x41d038(0xcf)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x41d038(0x104)),auth=require(a0_0x41d038(0x11b)),users=require(a0_0x41d038(0xc7)),excelJS=require('exceljs'),xlsx=require('xlsx'),JsBarcode=require('jsbarcode'),{Canvas}=require('canvas'),PDFDocument=require(a0_0x41d038(0x15a));function a0_0x5bb8(_0x3ca83f,_0x427fd8){const _0xec239b=a0_0xec23();return a0_0x5bb8=function(_0x5bb8cf,_0x1b4b8b){_0x5bb8cf=_0x5bb8cf-0xac;let _0x53207c=_0xec239b[_0x5bb8cf];return _0x53207c;},a0_0x5bb8(_0x3ca83f,_0x427fd8);}router[a0_0x41d038(0x11e)](a0_0x41d038(0xfd),auth,async(_0x3fea75,_0x4591bc)=>{const _0xb294a3=a0_0x41d038;try{const {username:_0x4e403a,email:_0x4af1a6,role:_0x29ee5d}=_0x3fea75[_0xb294a3(0x16a)],_0x5f5742=_0x3fea75[_0xb294a3(0x16a)],_0x3c14f4=await profile[_0xb294a3(0xc2)]({'email':_0x5f5742['email']}),_0x34f93f=await master_shop[_0xb294a3(0xbe)]();console[_0xb294a3(0xcc)]('master',_0x34f93f);const _0x33e13e=await categories[_0xb294a3(0xbe)]();if(_0x34f93f[0x0][_0xb294a3(0x15d)]=='English\x20(US)')var _0x591729=users[_0xb294a3(0xcd)];else{if(_0x34f93f[0x0][_0xb294a3(0x15d)]==_0xb294a3(0xb7))var _0x591729=users[_0xb294a3(0xb7)];else{if(_0x34f93f[0x0][_0xb294a3(0x15d)]=='German')var _0x591729=users[_0xb294a3(0x110)];else{if(_0x34f93f[0x0][_0xb294a3(0x15d)]==_0xb294a3(0xc9))var _0x591729=users[_0xb294a3(0xc9)];else{if(_0x34f93f[0x0][_0xb294a3(0x15d)]=='French')var _0x591729=users[_0xb294a3(0xbf)];else{if(_0x34f93f[0x0][_0xb294a3(0x15d)]==_0xb294a3(0x141))var _0x591729=users[_0xb294a3(0x10b)];else{if(_0x34f93f[0x0][_0xb294a3(0x15d)]==_0xb294a3(0xbb))var _0x591729=users[_0xb294a3(0xbb)];else{if(_0x34f93f[0x0][_0xb294a3(0x15d)]==_0xb294a3(0x159))var _0x591729=users['Arabic'];}}}}}}}_0x4591bc['render'](_0xb294a3(0x16d),{'success':_0x3fea75['flash'](_0xb294a3(0x14b)),'errors':_0x3fea75[_0xb294a3(0xb3)](_0xb294a3(0xd1)),'role':_0x5f5742,'profile':_0x3c14f4,'user':_0x33e13e,'master_shop':_0x34f93f,'language':_0x591729});}catch(_0x5f1182){console[_0xb294a3(0xcc)](_0x5f1182);}}),router[a0_0x41d038(0xd7)](a0_0x41d038(0xfd),auth,async(_0xef892b,_0x2054f7)=>{const _0x59bdf4=a0_0x41d038;try{const {name:_0x52b09e,products:_0x299ce7}=_0xef892b[_0x59bdf4(0x11a)],_0x1976a9=new categories({'name':_0x52b09e,'products':_0x299ce7}),_0x4739ef=await categories[_0x59bdf4(0xc2)]({'name':_0x52b09e});_0x4739ef?_0xef892b[_0x59bdf4(0xb3)]('errors',_0x52b09e+_0x59bdf4(0xae)):_0xef892b[_0x59bdf4(0xb3)](_0x59bdf4(0x14b),_0x52b09e+_0x59bdf4(0x162));const _0x182281=await _0x1976a9[_0x59bdf4(0x123)]();_0x2054f7[_0x59bdf4(0xac)](_0x59bdf4(0xf0));}catch(_0x56105b){console[_0x59bdf4(0xcc)](_0x56105b);}}),router[a0_0x41d038(0x11e)](a0_0x41d038(0x12d),auth,async(_0x3f3b08,_0x4bb83d)=>{const _0x47b887=a0_0x41d038;try{const {username:_0x2c702f,email:_0x35ccab,role:_0x485b7f}=_0x3f3b08[_0x47b887(0x16a)],_0x3790d5=_0x3f3b08[_0x47b887(0x16a)],_0x20ba94=await profile[_0x47b887(0xc2)]({'email':_0x3790d5[_0x47b887(0x136)]}),_0x2cf6bd=await master_shop[_0x47b887(0xbe)]();console[_0x47b887(0xcc)]('master',_0x2cf6bd);const _0xa550ee=_0x3f3b08[_0x47b887(0x146)]['id'];console[_0x47b887(0xcc)](_0xa550ee);const _0x2ab22a=await categories['findById'](_0xa550ee);if(_0x2cf6bd[0x0][_0x47b887(0x15d)]==_0x47b887(0xb6))var _0x89d83a=users[_0x47b887(0xcd)];else{if(_0x2cf6bd[0x0][_0x47b887(0x15d)]==_0x47b887(0xb7))var _0x89d83a=users[_0x47b887(0xb7)];else{if(_0x2cf6bd[0x0][_0x47b887(0x15d)]==_0x47b887(0x110))var _0x89d83a=users[_0x47b887(0x110)];else{if(_0x2cf6bd[0x0][_0x47b887(0x15d)]==_0x47b887(0xc9))var _0x89d83a=users[_0x47b887(0xc9)];else{if(_0x2cf6bd[0x0][_0x47b887(0x15d)]==_0x47b887(0xbf))var _0x89d83a=users['French'];else{if(_0x2cf6bd[0x0]['language']==_0x47b887(0x141))var _0x89d83a=users[_0x47b887(0x10b)];else{if(_0x2cf6bd[0x0]['language']==_0x47b887(0xbb))var _0x89d83a=users[_0x47b887(0xbb)];else{if(_0x2cf6bd[0x0][_0x47b887(0x15d)]==_0x47b887(0x159))var _0x89d83a=users[_0x47b887(0xba)];}}}}}}}_0x4bb83d[_0x47b887(0x13d)](_0x47b887(0x16d),{'success':_0x3f3b08[_0x47b887(0xb3)]('success'),'errors':_0x3f3b08[_0x47b887(0xb3)](_0x47b887(0xd1)),'role':_0x3790d5,'profile':_0x20ba94,'master_shop':_0x2cf6bd,'user':_0x2ab22a,'language':_0x89d83a});}catch(_0x2097f9){console['log'](_0x2097f9);}}),router[a0_0x41d038(0xd7)](a0_0x41d038(0x12d),auth,async(_0x2ac83c,_0xc496db)=>{const _0x59e7b2=a0_0x41d038;try{const _0x453859=_0x2ac83c['params']['id'],_0x36188=await categories[_0x59e7b2(0x13a)](_0x453859,_0x2ac83c[_0x59e7b2(0x11a)]);_0x2ac83c['flash'](_0x59e7b2(0x14b),''+users[_0x59e7b2(0x117)]),_0xc496db[_0x59e7b2(0xac)](_0x59e7b2(0xf0));}catch(_0x9ae434){console[_0x59e7b2(0xcc)](_0x9ae434);}}),router[a0_0x41d038(0x11e)](a0_0x41d038(0xd5),auth,async(_0x5e8ab7,_0x2d41f1)=>{const _0x43a2a6=a0_0x41d038;try{const _0x258de8=_0x5e8ab7['params']['id'],_0x18dbed=await categories[_0x43a2a6(0x165)](_0x258de8);_0x5e8ab7[_0x43a2a6(0xb3)](_0x43a2a6(0x14b),'categories\x20data\x20delete\x20successfully'),_0x2d41f1[_0x43a2a6(0xac)](_0x43a2a6(0xf0));}catch(_0x3086ee){console['log'](_0x3086ee);}}),router[a0_0x41d038(0x11e)](a0_0x41d038(0x15c),auth,async(_0x452bf4,_0x2e5319)=>{const _0x1ad1c0=a0_0x41d038;try{const {username:_0x149e29,email:_0x531044,role:_0x1d0ebd}=_0x452bf4[_0x1ad1c0(0x16a)],_0x415141=_0x452bf4[_0x1ad1c0(0x16a)],_0xa5bf1e=await profile[_0x1ad1c0(0xc2)]({'email':_0x415141[_0x1ad1c0(0x136)]}),_0x1ae94e=await master_shop[_0x1ad1c0(0xbe)]();console[_0x1ad1c0(0xcc)]('master',_0x1ae94e);const _0x43341d=await brands[_0x1ad1c0(0xbe)]();if(_0x1ae94e[0x0][_0x1ad1c0(0x15d)]==_0x1ad1c0(0xb6))var _0x2142e6=users['English'];else{if(_0x1ae94e[0x0][_0x1ad1c0(0x15d)]==_0x1ad1c0(0xb7))var _0x2142e6=users['Hindi'];else{if(_0x1ae94e[0x0][_0x1ad1c0(0x15d)]==_0x1ad1c0(0x110))var _0x2142e6=users['German'];else{if(_0x1ae94e[0x0][_0x1ad1c0(0x15d)]==_0x1ad1c0(0xc9))var _0x2142e6=users[_0x1ad1c0(0xc9)];else{if(_0x1ae94e[0x0][_0x1ad1c0(0x15d)]==_0x1ad1c0(0xbf))var _0x2142e6=users['French'];else{if(_0x1ae94e[0x0][_0x1ad1c0(0x15d)]==_0x1ad1c0(0x141))var _0x2142e6=users[_0x1ad1c0(0x10b)];else{if(_0x1ae94e[0x0][_0x1ad1c0(0x15d)]==_0x1ad1c0(0xbb))var _0x2142e6=users[_0x1ad1c0(0xbb)];else{if(_0x1ae94e[0x0][_0x1ad1c0(0x15d)]==_0x1ad1c0(0x159))var _0x2142e6=users[_0x1ad1c0(0xba)];}}}}}}}_0x2e5319[_0x1ad1c0(0x13d)](_0x1ad1c0(0x16b),{'success':_0x452bf4['flash'](_0x1ad1c0(0x14b)),'errors':_0x452bf4[_0x1ad1c0(0xb3)]('errors'),'role':_0x415141,'profile':_0xa5bf1e,'master_shop':_0x1ae94e,'user':_0x43341d,'language':_0x2142e6});}catch(_0x367dfb){console['log'](_0x367dfb);}}),router[a0_0x41d038(0xd7)]('/brands',auth,async(_0x12408d,_0x307b19)=>{const _0xe1f956=a0_0x41d038;try{const {name:_0xa12fdc,products:_0x28b915}=_0x12408d[_0xe1f956(0x11a)],_0x57ab1d=new brands({'name':_0xa12fdc,'products':_0x28b915}),_0x20e6d8=await brands[_0xe1f956(0xc2)]({'name':_0xa12fdc});_0x20e6d8?_0x12408d[_0xe1f956(0xb3)](_0xe1f956(0xd1),_0xa12fdc+_0xe1f956(0x119)):_0x12408d[_0xe1f956(0xb3)](_0xe1f956(0x14b),_0xa12fdc+'\x20brand\x20is\x20add\x20successfully');const _0x28b361=await _0x57ab1d[_0xe1f956(0x123)]();_0x307b19[_0xe1f956(0xac)]('/products/brands');}catch(_0x277149){console[_0xe1f956(0xcc)](_0x277149);}}),router[a0_0x41d038(0x11e)](a0_0x41d038(0xfe),auth,async(_0x56a579,_0x5af2ef)=>{const _0x6442c0=a0_0x41d038;try{const {username:_0x17143f,email:_0x4f549b,role:_0x432459}=_0x56a579[_0x6442c0(0x16a)],_0x2e89f4=_0x56a579[_0x6442c0(0x16a)],_0x2af7c4=await profile[_0x6442c0(0xc2)]({'email':_0x2e89f4[_0x6442c0(0x136)]}),_0x5cb2e1=await master_shop['find']();console[_0x6442c0(0xcc)](_0x6442c0(0xb0),_0x5cb2e1);const _0x3d0385=_0x56a579[_0x6442c0(0x146)]['id'];console[_0x6442c0(0xcc)](_0x3d0385);const _0x5b2e2c=await brands[_0x6442c0(0x167)](_0x3d0385);if(_0x5cb2e1[0x0]['language']==_0x6442c0(0xb6))var _0x1bbbba=users[_0x6442c0(0xcd)];else{if(_0x5cb2e1[0x0][_0x6442c0(0x15d)]==_0x6442c0(0xb7))var _0x1bbbba=users['Hindi'];else{if(_0x5cb2e1[0x0][_0x6442c0(0x15d)]=='German')var _0x1bbbba=users[_0x6442c0(0x110)];else{if(_0x5cb2e1[0x0][_0x6442c0(0x15d)]==_0x6442c0(0xc9))var _0x1bbbba=users[_0x6442c0(0xc9)];else{if(_0x5cb2e1[0x0][_0x6442c0(0x15d)]==_0x6442c0(0xbf))var _0x1bbbba=users[_0x6442c0(0xbf)];else{if(_0x5cb2e1[0x0][_0x6442c0(0x15d)]==_0x6442c0(0x141))var _0x1bbbba=users[_0x6442c0(0x10b)];else{if(_0x5cb2e1[0x0]['language']=='Chinese')var _0x1bbbba=users[_0x6442c0(0xbb)];else{if(_0x5cb2e1[0x0][_0x6442c0(0x15d)]==_0x6442c0(0x159))var _0x1bbbba=users[_0x6442c0(0xba)];}}}}}}}_0x5af2ef[_0x6442c0(0x13d)](_0x6442c0(0x16b),{'success':_0x56a579[_0x6442c0(0xb3)](_0x6442c0(0x14b)),'errors':_0x56a579[_0x6442c0(0xb3)]('errors'),'role':_0x2e89f4,'profile':_0x2af7c4,'master_shop':_0x5cb2e1,'user':_0x5b2e2c,'language':_0x1bbbba});}catch(_0x129a16){console['log'](_0x129a16);}}),router['post']('/brands/:id',auth,async(_0x3cfc61,_0x12e5c3)=>{const _0x58894c=a0_0x41d038;try{const _0x33a1f6=_0x3cfc61['params']['id'],_0xba9e9c=await brands[_0x58894c(0x13a)](_0x33a1f6,_0x3cfc61['body']);_0x3cfc61[_0x58894c(0xb3)]('success',_0x58894c(0x124)),_0x12e5c3['redirect'](_0x58894c(0x14a));}catch(_0x3ade43){console[_0x58894c(0xcc)](_0x3ade43);}}),router[a0_0x41d038(0x11e)]('/brands/delete/:id',auth,async(_0x4b5900,_0x5642ea)=>{const _0x38146a=a0_0x41d038;try{const _0x47654b=_0x4b5900[_0x38146a(0x146)]['id'],_0x3234fc=await brands[_0x38146a(0x165)](_0x47654b);_0x4b5900[_0x38146a(0xb3)](_0x38146a(0x14b),_0x38146a(0x156)),_0x5642ea[_0x38146a(0xac)]('/products/brands');}catch(_0x3767a8){console[_0x38146a(0xcc)](_0x3767a8);}}),router[a0_0x41d038(0x11e)](a0_0x41d038(0x128),auth,async(_0x2e1beb,_0x5571fe)=>{const _0x1ec07c=a0_0x41d038;try{const {username:_0x5a0b8e,email:_0x3b3904,role:_0x367a4b}=_0x2e1beb[_0x1ec07c(0x16a)],_0x477ed0=_0x2e1beb[_0x1ec07c(0x16a)],_0x3b5fb9=await profile[_0x1ec07c(0xc2)]({'email':_0x477ed0[_0x1ec07c(0x136)]}),_0x3e01d9=await master_shop['find']();console[_0x1ec07c(0xcc)](_0x1ec07c(0xb0),_0x3e01d9);const _0x3b84be=await units[_0x1ec07c(0xbe)]();if(_0x3e01d9[0x0][_0x1ec07c(0x15d)]==_0x1ec07c(0xb6))var _0x2b8da1=users[_0x1ec07c(0xcd)];else{if(_0x3e01d9[0x0][_0x1ec07c(0x15d)]==_0x1ec07c(0xb7))var _0x2b8da1=users['Hindi'];else{if(_0x3e01d9[0x0][_0x1ec07c(0x15d)]==_0x1ec07c(0x110))var _0x2b8da1=users[_0x1ec07c(0x110)];else{if(_0x3e01d9[0x0][_0x1ec07c(0x15d)]==_0x1ec07c(0xc9))var _0x2b8da1=users[_0x1ec07c(0xc9)];else{if(_0x3e01d9[0x0][_0x1ec07c(0x15d)]==_0x1ec07c(0xbf))var _0x2b8da1=users[_0x1ec07c(0xbf)];else{if(_0x3e01d9[0x0][_0x1ec07c(0x15d)]=='Portuguese\x20(BR)')var _0x2b8da1=users[_0x1ec07c(0x10b)];else{if(_0x3e01d9[0x0][_0x1ec07c(0x15d)]==_0x1ec07c(0xbb))var _0x2b8da1=users[_0x1ec07c(0xbb)];else{if(_0x3e01d9[0x0]['language']==_0x1ec07c(0x159))var _0x2b8da1=users['Arabic'];}}}}}}}_0x5571fe[_0x1ec07c(0x13d)](_0x1ec07c(0x14f),{'success':_0x2e1beb[_0x1ec07c(0xb3)](_0x1ec07c(0x14b)),'errors':_0x2e1beb['flash'](_0x1ec07c(0xd1)),'role':_0x477ed0,'profile':_0x3b5fb9,'master_shop':_0x3e01d9,'user':_0x3b84be,'language':_0x2b8da1});}catch(_0x4eade2){console['log'](_0x4eade2);}}),router[a0_0x41d038(0xd7)]('/units',auth,async(_0x45a94b,_0x5a5419)=>{const _0x2e582d=a0_0x41d038;try{const {name:_0x5ac802,secondary_unit:_0x5469d0,products:_0x45ef58}=_0x45a94b[_0x2e582d(0x11a)],_0x2afdfa=new units({'name':_0x5ac802,'secondary_unit':_0x5469d0,'products':_0x45ef58}),_0x398c5b=await units[_0x2e582d(0xc2)]({'name':_0x5ac802});_0x398c5b?_0x45a94b[_0x2e582d(0xb3)](_0x2e582d(0xd1),_0x5ac802+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x45a94b[_0x2e582d(0xb3)]('success',_0x5ac802+_0x2e582d(0x13e));const _0x5d63ac=await _0x2afdfa[_0x2e582d(0x123)]();_0x5a5419[_0x2e582d(0xac)](_0x2e582d(0x109));}catch(_0xcdb4fd){console[_0x2e582d(0xcc)](_0xcdb4fd);}}),router[a0_0x41d038(0x11e)](a0_0x41d038(0x147),auth,async(_0x2ddb13,_0x1af43c)=>{const _0x19922b=a0_0x41d038;try{const {username:_0x28ef50,email:_0x37b535,role:_0x37913e}=_0x2ddb13['user'],_0x3c2e31=_0x2ddb13['user'],_0x32f873=await profile[_0x19922b(0xc2)]({'email':_0x3c2e31[_0x19922b(0x136)]}),_0x5d8a1b=await master_shop[_0x19922b(0xbe)]();console[_0x19922b(0xcc)](_0x19922b(0xb0),_0x5d8a1b);const _0x2ea84b=_0x2ddb13[_0x19922b(0x146)]['id'],_0xf0463c=await units[_0x19922b(0x167)](_0x2ea84b);if(_0x5d8a1b[0x0][_0x19922b(0x15d)]==_0x19922b(0xb6))var _0x1fd869=users[_0x19922b(0xcd)];else{if(_0x5d8a1b[0x0]['language']==_0x19922b(0xb7))var _0x1fd869=users[_0x19922b(0xb7)];else{if(_0x5d8a1b[0x0][_0x19922b(0x15d)]==_0x19922b(0x110))var _0x1fd869=users[_0x19922b(0x110)];else{if(_0x5d8a1b[0x0][_0x19922b(0x15d)]==_0x19922b(0xc9))var _0x1fd869=users['Spanish'];else{if(_0x5d8a1b[0x0][_0x19922b(0x15d)]==_0x19922b(0xbf))var _0x1fd869=users['French'];else{if(_0x5d8a1b[0x0][_0x19922b(0x15d)]==_0x19922b(0x141))var _0x1fd869=users['Portuguese'];else{if(_0x5d8a1b[0x0][_0x19922b(0x15d)]==_0x19922b(0xbb))var _0x1fd869=users['Chinese'];else{if(_0x5d8a1b[0x0]['language']==_0x19922b(0x159))var _0x1fd869=users['Arabic'];}}}}}}}_0x1af43c[_0x19922b(0x13d)](_0x19922b(0x14f),{'success':_0x2ddb13['flash'](_0x19922b(0x14b)),'errors':_0x2ddb13[_0x19922b(0xb3)](_0x19922b(0xd1)),'role':_0x3c2e31,'profile':_0x32f873,'master_shop':_0x5d8a1b,'user':_0xf0463c,'language':_0x1fd869});}catch(_0x1e799d){console[_0x19922b(0xcc)](_0x1e799d);}}),router[a0_0x41d038(0xd7)](a0_0x41d038(0x147),auth,async(_0x321273,_0x49d2c8)=>{const _0x360b16=a0_0x41d038;try{const _0x3f8bf1=_0x321273[_0x360b16(0x146)]['id'],_0x29fff2=await units[_0x360b16(0x13a)](_0x3f8bf1,_0x321273['body']);_0x321273['flash'](_0x360b16(0x14b),_0x360b16(0x126)),_0x49d2c8[_0x360b16(0xac)](_0x360b16(0x109));}catch(_0x4bec07){console['log'](_0x4bec07);}}),router['get'](a0_0x41d038(0x161),auth,async(_0x4feb53,_0x594fbb)=>{const _0x28c0c3=a0_0x41d038;try{const _0x456a47=_0x4feb53[_0x28c0c3(0x146)]['id'],_0x4e0b43=await units['findByIdAndDelete'](_0x456a47);_0x4feb53[_0x28c0c3(0xb3)]('success',_0x28c0c3(0x140)),_0x594fbb[_0x28c0c3(0xac)](_0x28c0c3(0x109));}catch(_0x36c790){console[_0x28c0c3(0xcc)](_0x36c790);}});const storage=multer[a0_0x41d038(0x100)]({'destination':(_0x34ac71,_0x35b3a5,_0x18fce1)=>{const _0x37875c=a0_0x41d038;_0x18fce1(null,_0x37875c(0xdf));},'filename':(_0x20be82,_0x2d8fa0,_0x2c1077)=>{const _0xa2be19=a0_0x41d038;_0x2c1077(null,Date[_0xa2be19(0x133)]()+_0x2d8fa0['originalname']);}}),upload=multer({'storage':storage});router[a0_0x41d038(0x11e)](a0_0x41d038(0x106),auth,async(_0x3abcbe,_0x1f6409)=>{const _0x278dc7=a0_0x41d038;try{const {username:_0x562e47,email:_0x34c786,role:_0x3d608c}=_0x3abcbe['user'],_0x1e721d=_0x3abcbe[_0x278dc7(0x16a)],_0x2021e6=await profile[_0x278dc7(0xc2)]({'email':_0x1e721d[_0x278dc7(0x136)]}),_0x205dd7={'year':_0x278dc7(0x115),'month':_0x278dc7(0xc3),'day':_0x278dc7(0x115)},_0x1402d2=await master_shop[_0x278dc7(0xbe)]();console[_0x278dc7(0xcc)](_0x278dc7(0xdb),_0x1402d2);const _0x3ca5eb=await product[_0x278dc7(0xbe)]();console[_0x278dc7(0xcc)](_0x278dc7(0x130),_0x3ca5eb);const _0x2c4282=await warehouse[_0x278dc7(0xef)]([{'$unwind':_0x278dc7(0xe2)},{'$lookup':{'from':_0x278dc7(0x101),'localField':_0x278dc7(0x138),'foreignField':'name','as':_0x278dc7(0x12a)}},{'$unwind':_0x278dc7(0x166)},{'$project':{'product_name':_0x278dc7(0x15b),'product_stock':_0x278dc7(0xe0)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x278dc7(0xc8)}}}]);console[_0x278dc7(0xcc)](_0x278dc7(0x12b),_0x2c4282),_0x2c4282[_0x278dc7(0x108)](_0x40183e=>{const _0x1bbc01=_0x278dc7,_0x5f5657=_0x3ca5eb[_0x1bbc01(0x105)](_0x268fca=>{const _0x3b5941=_0x1bbc01;_0x268fca[_0x3b5941(0x154)]==_0x40183e[_0x3b5941(0xfc)]&&(_0x268fca[_0x3b5941(0x14c)]=parseInt(_0x268fca[_0x3b5941(0x14c)])+parseInt(_0x40183e[_0x3b5941(0x164)]));});}),console[_0x278dc7(0xcc)](_0x278dc7(0x130),_0x3ca5eb);if(_0x1402d2[0x0][_0x278dc7(0x15d)]==_0x278dc7(0xb6))var _0x5aef2a=users[_0x278dc7(0xcd)];else{if(_0x1402d2[0x0][_0x278dc7(0x15d)]==_0x278dc7(0xb7))var _0x5aef2a=users['Hindi'];else{if(_0x1402d2[0x0]['language']=='German')var _0x5aef2a=users[_0x278dc7(0x110)];else{if(_0x1402d2[0x0]['language']=='Spanish')var _0x5aef2a=users[_0x278dc7(0xc9)];else{if(_0x1402d2[0x0][_0x278dc7(0x15d)]==_0x278dc7(0xbf))var _0x5aef2a=users[_0x278dc7(0xbf)];else{if(_0x1402d2[0x0][_0x278dc7(0x15d)]==_0x278dc7(0x141))var _0x5aef2a=users[_0x278dc7(0x10b)];else{if(_0x1402d2[0x0]['language']==_0x278dc7(0xbb))var _0x5aef2a=users['Chinese'];else{if(_0x1402d2[0x0]['language']==_0x278dc7(0x159))var _0x5aef2a=users[_0x278dc7(0xba)];}}}}}}}_0x1f6409['render'](_0x278dc7(0x101),{'success':_0x3abcbe[_0x278dc7(0xb3)](_0x278dc7(0x14b)),'errors':_0x3abcbe[_0x278dc7(0xb3)](_0x278dc7(0xd1)),'alldata':_0x3ca5eb,'profile':_0x2021e6,'master_shop':_0x1402d2,'role':_0x1e721d,'product_stock':_0x2c4282,'language':_0x5aef2a});}catch(_0x1ff21a){console['log'](_0x1ff21a);}}),router[a0_0x41d038(0x11e)](a0_0x41d038(0x143),auth,async(_0x283c07,_0x44c126)=>{const _0x18638f=a0_0x41d038;try{const {username:_0x323ebd,email:_0x4783e6,role:_0x8d2972}=_0x283c07[_0x18638f(0x16a)],_0x5ac2ae=_0x283c07[_0x18638f(0x16a)],_0x34a98e=await profile['findOne']({'email':_0x5ac2ae['email']}),_0x248e99=await master_shop['find']();console['log'](_0x18638f(0xb0),_0x248e99);const _0x5514f6=await categories[_0x18638f(0xbe)]({}),_0x2ac193=await brands[_0x18638f(0xbe)]({}),_0x5455ad=await units[_0x18638f(0xbe)]({}),_0x188c8a=await warehouse[_0x18638f(0xbe)]({'status':'Enabled'});if(_0x248e99[0x0][_0x18638f(0x15d)]==_0x18638f(0xb6))var _0x3a3c7c=users['English'];else{if(_0x248e99[0x0][_0x18638f(0x15d)]==_0x18638f(0xb7))var _0x3a3c7c=users[_0x18638f(0xb7)];else{if(_0x248e99[0x0]['language']==_0x18638f(0x110))var _0x3a3c7c=users[_0x18638f(0x110)];else{if(_0x248e99[0x0][_0x18638f(0x15d)]==_0x18638f(0xc9))var _0x3a3c7c=users[_0x18638f(0xc9)];else{if(_0x248e99[0x0][_0x18638f(0x15d)]==_0x18638f(0xbf))var _0x3a3c7c=users[_0x18638f(0xbf)];else{if(_0x248e99[0x0][_0x18638f(0x15d)]==_0x18638f(0x141))var _0x3a3c7c=users[_0x18638f(0x10b)];else{if(_0x248e99[0x0]['language']=='Chinese')var _0x3a3c7c=users[_0x18638f(0xbb)];else{if(_0x248e99[0x0]['language']=='Arabic\x20(ae)')var _0x3a3c7c=users[_0x18638f(0xba)];}}}}}}}_0x44c126['render'](_0x18638f(0x16e),{'success':_0x283c07[_0x18638f(0xb3)](_0x18638f(0x14b)),'errors':_0x283c07['flash'](_0x18638f(0xd1)),'role':_0x5ac2ae,'profile':_0x34a98e,'categories':_0x5514f6,'brands':_0x2ac193,'master_shop':_0x248e99,'units':_0x5455ad,'language':_0x3a3c7c,'find_data':_0x188c8a});}catch(_0x9bff47){console['log'](_0x9bff47);}}),router[a0_0x41d038(0xd7)](a0_0x41d038(0x143),auth,upload[a0_0x41d038(0xb8)](a0_0x41d038(0xc0)),async(_0x4834f0,_0x530c9a)=>{const _0x259764=a0_0x41d038;try{const {name:_0x554b59,category:_0x2e0d17,brand:_0x2f1486,unit:_0x33fb06,alertquantity:_0x2baf79,stock:_0x40cb51,product_code:_0x1ef8c6,warehouse:_0x1f6dc1,primary_ItemCode:_0x4615c1,second_ItemCode:_0x39f791,second_unit:_0xe7ecfa,maxPerUnit:_0x92ea02,MaxPerProduct:_0x108c25,sales_cat:_0x450e8e,type_prod:_0x122d83}=_0x4834f0[_0x259764(0x11a)],_0x2eab2f=_0x4834f0['file']?.[_0x259764(0x170)]||_0x259764(0xad),_0x5aee79=new product({'image':_0x2eab2f,'name':_0x554b59,'category':_0x2e0d17,'brand':_0x2f1486,'unit':_0x33fb06,'alertquantity':_0x2baf79,'stock':_0x40cb51,'product_code':_0x1ef8c6,'warehouse':_0x1f6dc1,'primary_code':_0x4615c1,'secondary_code':_0x39f791,'second_unit':_0xe7ecfa,'maxStocks':_0x108c25,'maxProdPerUnit':_0x92ea02,'sales_category':_0x450e8e,'type_products':_0x122d83}),_0x2d19a1=await _0x5aee79[_0x259764(0x123)](),_0x11e475=await categories[_0x259764(0xc2)]({'name':_0x2e0d17});_0x11e475['products']=parseInt(_0x11e475[_0x259764(0x101)])+0x1,await _0x11e475[_0x259764(0x123)]();const _0x8e869d=await brands[_0x259764(0xc2)]({'name':_0x2f1486});_0x8e869d[_0x259764(0x101)]=parseInt(_0x8e869d[_0x259764(0x101)])+0x1,await _0x8e869d['save']();const _0x79e7c8=await units['findOne']({'name':_0x33fb06});_0x79e7c8[_0x259764(0x101)]=parseInt(_0x79e7c8[_0x259764(0x101)])+0x1,await _0x79e7c8[_0x259764(0x123)](),_0x4834f0['flash'](_0x259764(0x14b),_0x259764(0xe5)),_0x530c9a[_0x259764(0xac)](_0x259764(0xf9));}catch(_0x1530b8){console['log'](_0x1530b8);}}),router[a0_0x41d038(0x11e)](a0_0x41d038(0xe6),auth,async(_0x464c4d,_0x2ec235)=>{const _0x8c40d2=a0_0x41d038;try{const {username:_0x4e108b,email:_0x44d0a7,role:_0x49eaf3}=_0x464c4d[_0x8c40d2(0x16a)],_0x1a25c7=_0x464c4d['user'],_0x1ec3ab=await profile[_0x8c40d2(0xc2)]({'email':_0x1a25c7[_0x8c40d2(0x136)]}),_0x4319e5=await master_shop[_0x8c40d2(0xbe)]();console[_0x8c40d2(0xcc)]('edit\x20Product\x20master',_0x4319e5);const _0x370b9a=_0x464c4d['params']['id'],_0xfb175f=await product[_0x8c40d2(0x167)](_0x370b9a),_0x2a6227=await categories[_0x8c40d2(0xbe)]({}),_0x559d47=await brands[_0x8c40d2(0xbe)]({}),_0x41399e=await units[_0x8c40d2(0xbe)]({}),_0x39aff1=await warehouse[_0x8c40d2(0xbe)]({'status':_0x8c40d2(0xf6)}),_0x294a98=await units[_0x8c40d2(0xef)]([{'$group':{'_id':_0x8c40d2(0x103),'secondaryunit':{'$first':_0x8c40d2(0x148)}}}]);if(_0x4319e5[0x0][_0x8c40d2(0x15d)]==_0x8c40d2(0xb6))var _0x2ca18a=users['English'];else{if(_0x4319e5[0x0][_0x8c40d2(0x15d)]==_0x8c40d2(0xb7))var _0x2ca18a=users[_0x8c40d2(0xb7)];else{if(_0x4319e5[0x0][_0x8c40d2(0x15d)]==_0x8c40d2(0x110))var _0x2ca18a=users['German'];else{if(_0x4319e5[0x0]['language']==_0x8c40d2(0xc9))var _0x2ca18a=users[_0x8c40d2(0xc9)];else{if(_0x4319e5[0x0]['language']==_0x8c40d2(0xbf))var _0x2ca18a=users[_0x8c40d2(0xbf)];else{if(_0x4319e5[0x0][_0x8c40d2(0x15d)]==_0x8c40d2(0x141))var _0x2ca18a=users[_0x8c40d2(0x10b)];else{if(_0x4319e5[0x0][_0x8c40d2(0x15d)]==_0x8c40d2(0xbb))var _0x2ca18a=users[_0x8c40d2(0xbb)];else{if(_0x4319e5[0x0]['language']==_0x8c40d2(0x159))var _0x2ca18a=users[_0x8c40d2(0xba)];}}}}}}}_0x2ec235[_0x8c40d2(0x13d)](_0x8c40d2(0x131),{'success':_0x464c4d['flash'](_0x8c40d2(0x14b)),'errors':_0x464c4d['flash'](_0x8c40d2(0xd1)),'role':_0x1a25c7,'profile':_0x1ec3ab,'alldata':_0xfb175f,'categories':_0x2a6227,'brands':_0x559d47,'master_shop':_0x4319e5,'units':_0x41399e,'secondunit':_0x294a98,'find_data':_0x39aff1,'language':_0x2ca18a});}catch(_0x5c1807){console['log'](_0x5c1807);}}),router[a0_0x41d038(0xd7)](a0_0x41d038(0xe6),auth,upload['single'](a0_0x41d038(0xc0)),async(_0x3162a4,_0x2a8934)=>{const _0x333763=a0_0x41d038;try{const _0x3d2af2=_0x3162a4[_0x333763(0x146)]['id'],_0x2c4a4c=await product[_0x333763(0x167)](_0x3d2af2),{image:_0x31a58a,name:_0x595bdc,category:_0x2f23b2,brand:_0x14fa23,sku:_0x32c835,unit:_0x2393b7,alertquantity:_0x3ec11c,product_code:_0x274d13,warehouse:_0x91be32,primary_ItemCode:_0x2dc0b3,second_ItemCode:_0x131511,second_unit:_0x5e854a,maxPerUnit:_0x3c9f02,MaxPerProduct:_0x3dd0c0,prod_catdata:_0x515874,type_prod:_0x2a3a6a,sales_cat:_0x3b1511}=_0x3162a4[_0x333763(0x11a)];_0x3162a4[_0x333763(0xc1)]&&(_0x2c4a4c[_0x333763(0xc0)]=_0x3162a4['file'][_0x333763(0x170)]);_0x2c4a4c[_0x333763(0x154)]=_0x595bdc,_0x2c4a4c[_0x333763(0x102)]=_0x2f23b2,_0x2c4a4c[_0x333763(0xf3)]=_0x14fa23,_0x2c4a4c[_0x333763(0x155)]=_0x32c835,_0x2c4a4c[_0x333763(0xbd)]=_0x2393b7,_0x2c4a4c[_0x333763(0x127)]=_0x3ec11c,_0x2c4a4c[_0x333763(0x107)]=_0x274d13,_0x2c4a4c[_0x333763(0xfb)]=_0x91be32,_0x2c4a4c[_0x333763(0xaf)]=_0x2dc0b3,_0x2c4a4c[_0x333763(0x10c)]=_0x131511,_0x2c4a4c[_0x333763(0xc6)]=_0x5e854a,_0x2c4a4c[_0x333763(0xd2)]=_0x3dd0c0,_0x2c4a4c['maxProdPerUnit']=_0x3c9f02,_0x2c4a4c['product_category']=_0x515874,_0x2c4a4c[_0x333763(0xd9)]=_0x2a3a6a,_0x2c4a4c[_0x333763(0xec)]=_0x3b1511;const _0xc37a85=await _0x2c4a4c[_0x333763(0x123)]();console['log'](_0x333763(0xb1),_0x2c4a4c),_0x3162a4['flash'](_0x333763(0x14b),_0x333763(0x12e)),_0x2a8934[_0x333763(0xac)](_0x333763(0xf9));}catch(_0x351202){console['log'](_0x351202);}}),router[a0_0x41d038(0x11e)](a0_0x41d038(0x16f),auth,async(_0x5e4a87,_0x31137)=>{const _0x326e7c=a0_0x41d038;try{const {username:_0x1f14b4,email:_0x7907e0,role:_0x115ca5}=_0x5e4a87['user'],_0x13c29a=_0x5e4a87[_0x326e7c(0x16a)],_0x404cbb=await profile['findOne']({'email':_0x13c29a[_0x326e7c(0x136)]}),_0x53952b=await master_shop['find']();console[_0x326e7c(0xcc)](_0x326e7c(0x10f),_0x53952b);const _0x2990ea=_0x5e4a87['params']['id'],_0x849816=await product['findById'](_0x2990ea);console['log'](_0x326e7c(0x11c),_0x849816);if(_0x53952b[0x0][_0x326e7c(0x15d)]==_0x326e7c(0xb6))var _0x218c3f=users['English'];else{if(_0x53952b[0x0]['language']==_0x326e7c(0xb7))var _0x218c3f=users['Hindi'];else{if(_0x53952b[0x0][_0x326e7c(0x15d)]=='German')var _0x218c3f=users[_0x326e7c(0x110)];else{if(_0x53952b[0x0][_0x326e7c(0x15d)]=='Spanish')var _0x218c3f=users[_0x326e7c(0xc9)];else{if(_0x53952b[0x0]['language']==_0x326e7c(0xbf))var _0x218c3f=users[_0x326e7c(0xbf)];else{if(_0x53952b[0x0][_0x326e7c(0x15d)]==_0x326e7c(0x141))var _0x218c3f=users[_0x326e7c(0x10b)];else{if(_0x53952b[0x0][_0x326e7c(0x15d)]==_0x326e7c(0xbb))var _0x218c3f=users['Chinese'];else{if(_0x53952b[0x0][_0x326e7c(0x15d)]==_0x326e7c(0x159))var _0x218c3f=users[_0x326e7c(0xba)];}}}}}}}_0x31137['render'](_0x326e7c(0xf4),{'success':_0x5e4a87[_0x326e7c(0xb3)]('success'),'errors':_0x5e4a87['flash'](_0x326e7c(0xd1)),'role':_0x13c29a,'profile':_0x404cbb,'alldata':_0x849816,'master_shop':_0x53952b,'language':_0x218c3f});}catch(_0x17cc2e){console[_0x326e7c(0xcc)](_0x17cc2e);}}),router[a0_0x41d038(0x11e)](a0_0x41d038(0x15f),auth,async(_0x2edd92,_0x301db0)=>{const _0xdc39e0=a0_0x41d038;try{const _0x3c8ab4=new excelJS[(_0xdc39e0(0xee))](),_0x5dd4ac=_0x3c8ab4['addWorksheet']('Products');return _0x5dd4ac['columns']=[{'header':_0xdc39e0(0x14e),'key':_0xdc39e0(0xd0),'width':0xa},{'header':_0xdc39e0(0x15e),'key':'PBrands','width':0xa},{'header':'Units','key':_0xdc39e0(0xdd),'width':0xa},{'header':_0xdc39e0(0xea),'key':_0xdc39e0(0xf1),'width':0xa},{'header':_0xdc39e0(0xb9),'key':_0xdc39e0(0xc4),'width':0xa},{'header':_0xdc39e0(0x16c),'key':'ProductCode','width':0xa},{'header':_0xdc39e0(0x12f),'key':_0xdc39e0(0x139),'width':0xa},{'header':'Product_Code','key':_0xdc39e0(0x139),'width':0xa},{'header':_0xdc39e0(0x113),'key':_0xdc39e0(0xff),'width':0xa},{'header':_0xdc39e0(0x13c),'key':_0xdc39e0(0x152),'width':0xa},{'header':_0xdc39e0(0xca),'key':_0xdc39e0(0x152),'width':0xa},{'header':'Products_category','key':_0xdc39e0(0xed),'width':0xa}],_0x301db0[_0xdc39e0(0xb4)]('Content-Type',_0xdc39e0(0x14d)),_0x301db0[_0xdc39e0(0xb4)]('Content-Disposition',_0xdc39e0(0x158)),_0x3c8ab4[_0xdc39e0(0x160)][_0xdc39e0(0xbc)](_0x301db0)[_0xdc39e0(0xd4)](()=>{_0x301db0['status'](0xc8);});}catch(_0x256a49){_0x301db0[_0xdc39e0(0xb5)](0x190)[_0xdc39e0(0xfa)](_0x256a49);}});const storage1=multer[a0_0x41d038(0x100)]({'destination':(_0x23bb01,_0x3faee6,_0x347fb8)=>{_0x347fb8(null,'public/Migration');},'filename':(_0x535843,_0x2e577f,_0x36099a)=>{const _0x4cee8b=a0_0x41d038;_0x36099a(null,Date[_0x4cee8b(0x133)]()+_0x2e577f[_0x4cee8b(0xde)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x41d038(0x122),auth,uploadMigrate['single']('migrate_product_fule'),async(_0xbeabb2,_0x38539a)=>{const _0x3acccb=a0_0x41d038,_0x386855=_0xbeabb2[_0x3acccb(0xc1)]['filename'],_0x2383a3=await xlsx[_0x3acccb(0x121)]('public/Migration/'+_0x386855);let _0xa8e161=_0x2383a3[_0x3acccb(0x120)],_0x3b5905=xlsx['utils'][_0x3acccb(0xe9)](_0x2383a3['Sheets'][_0xa8e161[0x0]]);for(const _0x2aba43 of _0x3b5905){const _0x44bf94=_0x2aba43[_0x3acccb(0x14e)],_0x5999b0=_0x2aba43[_0x3acccb(0x15e)],_0x48cafd=_0x2aba43[_0x3acccb(0x11f)],_0x370903=_0x2aba43[_0x3acccb(0xea)],_0x151c40=_0x2aba43['Product_Code'],_0x2436c6=_0x2aba43[_0x3acccb(0x113)],_0x5659f8=_0x2aba43[_0x3acccb(0x13c)],_0x2d5d82=_0x2aba43[_0x3acccb(0x16c)],_0x4633b9=_0x2aba43['Secondary_Code'],_0x18c094=_0x2aba43[_0x3acccb(0xca)],_0x1bfc2a=_0x2aba43[_0x3acccb(0xb9)],_0x1a7a73=_0x2aba43[_0x3acccb(0x149)];try{let _0x3e6e14=await categories[_0x3acccb(0xc2)]({'name':_0x2436c6});if(!_0x3e6e14){const _0x35d5b2=new categories({'name':_0x2436c6,'products':'0'});_0x3e6e14=await _0x35d5b2[_0x3acccb(0x123)]();}let _0xeda9ea=await brands[_0x3acccb(0xc2)]({'name':_0x5999b0});if(!_0xeda9ea){const _0x52bc9d=new brands({'name':_0x5999b0,'products':'0'});_0xeda9ea=await _0x52bc9d[_0x3acccb(0x123)]();}let _0xd1bb9e=await units[_0x3acccb(0xc2)]({'name':_0x48cafd,'secondary_unit':_0x370903});if(!_0xd1bb9e){const _0x1b2cd2=new units({'name':_0x48cafd,'secondary_unit':_0x370903,'products':'0'});_0xd1bb9e=await _0x1b2cd2[_0x3acccb(0x123)]();}const _0x539b9b=await product[_0x3acccb(0xbe)]({'name':_0x44bf94,'category':_0x3e6e14[_0x3acccb(0x154)],'brand':_0xeda9ea[_0x3acccb(0x154)],'secondary_unit':_0xd1bb9e[_0x3acccb(0xc6)],'product_code':_0x151c40});console[_0x3acccb(0xcc)](_0x539b9b[_0x3acccb(0xf2)]+_0x3acccb(0x10d)+_0x3e6e14[_0x3acccb(0x154)]+'\x20<>\x20'+_0xeda9ea[_0x3acccb(0x154)]+_0x3acccb(0x10d)+_0xd1bb9e['secondary_unit']+_0x3acccb(0x10d)+_0x151c40+_0x3acccb(0x10d)+_0x44bf94);if(_0x539b9b[_0x3acccb(0xf2)]===0x0){const _0x151c0d=new product({'image':_0x3acccb(0xad),'name':_0x44bf94,'category':_0x3e6e14['name'],'brand':_0xeda9ea[_0x3acccb(0x154)],'unit':_0xd1bb9e[_0x3acccb(0x154)],'alertquantity':_0x5659f8,'product_code':_0x151c40,'secondary_unit':_0xd1bb9e[_0x3acccb(0xc6)],'primary_code':_0x2d5d82,'secondary_code':_0x4633b9,'maxStocks':_0x18c094,'maxProdPerUnit':_0x1bfc2a,'product_category':_0x1a7a73}),_0xb937be=await _0x151c0d[_0x3acccb(0x123)]();_0x3e6e14[_0x3acccb(0x101)]=parseInt(_0x3e6e14[_0x3acccb(0x101)])+0x1,await _0x3e6e14['save'](),_0xeda9ea['products']=parseInt(_0xeda9ea[_0x3acccb(0x101)])+0x1,await _0xeda9ea['save'](),_0xd1bb9e['products']=parseInt(_0xd1bb9e[_0x3acccb(0x101)])+0x1,await _0xd1bb9e['save'](),_0xbeabb2[_0x3acccb(0xb3)](_0x3acccb(0x14b),_0x44bf94+'\x20added\x20successfully');}else{console[_0x3acccb(0xcc)](_0x539b9b[0x0]);const _0x33ba43=_0x539b9b[0x0];_0x33ba43[_0x3acccb(0x102)]=_0x3e6e14[_0x3acccb(0x154)],_0x33ba43[_0x3acccb(0xf3)]=_0xeda9ea[_0x3acccb(0x154)],_0x33ba43[_0x3acccb(0xbd)]=_0xd1bb9e[_0x3acccb(0x154)],_0x33ba43['alertquantity']=_0x5659f8,_0x33ba43[_0x3acccb(0x107)]=_0x151c40,_0x33ba43['secondary_unit']=_0xd1bb9e[_0x3acccb(0xc6)],_0x33ba43[_0x3acccb(0xaf)]=_0x2d5d82,_0x33ba43[_0x3acccb(0x10c)]=_0x4633b9,_0x33ba43[_0x3acccb(0xd2)]=_0x18c094,_0x33ba43['maxProdPerUnit']=_0x1bfc2a,_0x33ba43[_0x3acccb(0x163)]=_0x1a7a73;const _0x5d48b8=await _0x33ba43[_0x3acccb(0x123)]();_0xbeabb2['flash']('success',_0x5d48b8['name']+_0x3acccb(0x144));}}catch(_0x3ba10e){_0x38539a[_0x3acccb(0xb5)](0x1f4)[_0x3acccb(0xb2)]({'proderror':_0x3ba10e[_0x3acccb(0xd3)],'aproduct':_0x44bf94});}}_0x38539a['redirect'](_0x3acccb(0xf9));}),router[a0_0x41d038(0xd7)](a0_0x41d038(0x13b),auth,async(_0x58a0ab,_0x5f493b)=>{const _0x4bf01a=a0_0x41d038;try{console['log'](_0x58a0ab['body']);const {data_cateory:_0x590019,datachoose:_0x4a7901}=_0x58a0ab[_0x4bf01a(0x11a)];var _0x1a3a8a;if(_0x4a7901=='prod_categ')_0x1a3a8a=await product[_0x4bf01a(0xef)]([{'$group':{'_id':_0x4bf01a(0x168)}}]);else{if(_0x4a7901==_0x4bf01a(0x16b))_0x1a3a8a=await product[_0x4bf01a(0xef)]([{'$match':{'product_category':_0x590019}},{'$group':{'_id':_0x4bf01a(0x114)}}]);else _0x4a7901==_0x4bf01a(0xe7)&&(_0x1a3a8a=await product[_0x4bf01a(0xef)]([{'$match':{'product_category':_0x590019}},{'$group':{'_id':_0x4bf01a(0x171)}}]));}_0x5f493b['json'](_0x1a3a8a);}catch(_0x115747){_0x5f493b[_0x4bf01a(0xb2)]({'message':_0x115747[_0x4bf01a(0xd3)]});}}),router[a0_0x41d038(0xd7)](a0_0x41d038(0x153),auth,async(_0xfb93ad,_0x14ae53)=>{const _0x4a51b9=a0_0x41d038;try{const {data_choosing:_0x3001d6,data_selected:_0x246c50}=_0xfb93ad[_0x4a51b9(0x11a)];var _0x467f44;if(_0x3001d6==_0x4a51b9(0xf7))_0x467f44=await product['aggregate']([{'$match':{'product_category':_0x246c50}}]);else{if(_0x3001d6==_0x4a51b9(0x16b))_0x467f44=await product[_0x4a51b9(0xef)]([{'$match':{'brand':_0x246c50}}]);else _0x3001d6==_0x4a51b9(0xe7)&&(_0x467f44=await product[_0x4a51b9(0xef)]([{'$match':{'category':_0x246c50}}]));}_0x14ae53[_0x4a51b9(0xb2)](_0x467f44);}catch(_0xe26a7f){_0x14ae53[_0x4a51b9(0xb2)]({'message':_0xe26a7f['message']});}}),router[a0_0x41d038(0x11e)]('/print_barcode',auth,async(_0x4b4cb1,_0x133cee)=>{const _0x612e63=a0_0x41d038,_0x372f2d=_0x4b4cb1[_0x612e63(0x16a)],_0x33d6fa=await profile[_0x612e63(0xc2)]({'email':_0x372f2d[_0x612e63(0x136)]}),_0x2944ff=await master_shop[_0x612e63(0xbe)](),_0x3b649d=await product['find']();if(_0x2944ff[0x0][_0x612e63(0x15d)]==_0x612e63(0xb6))var _0x1f2447=users[_0x612e63(0xcd)];else{if(_0x2944ff[0x0][_0x612e63(0x15d)]==_0x612e63(0xb7))var _0x1f2447=users[_0x612e63(0xb7)];else{if(_0x2944ff[0x0][_0x612e63(0x15d)]==_0x612e63(0x110))var _0x1f2447=users['German'];else{if(_0x2944ff[0x0][_0x612e63(0x15d)]=='Spanish')var _0x1f2447=users[_0x612e63(0xc9)];else{if(_0x2944ff[0x0][_0x612e63(0x15d)]=='French')var _0x1f2447=users[_0x612e63(0xbf)];else{if(_0x2944ff[0x0]['language']==_0x612e63(0x141))var _0x1f2447=users[_0x612e63(0x10b)];else{if(_0x2944ff[0x0][_0x612e63(0x15d)]==_0x612e63(0xbb))var _0x1f2447=users[_0x612e63(0xbb)];else{if(_0x2944ff[0x0]['language']==_0x612e63(0x159))var _0x1f2447=users['Arabic'];}}}}}}}_0x133cee[_0x612e63(0x13d)](_0x612e63(0xf8),{'success':_0x4b4cb1['flash'](_0x612e63(0x14b)),'errors':_0x4b4cb1[_0x612e63(0xb3)](_0x612e63(0xd1)),'role':_0x372f2d,'profile':_0x33d6fa,'products':_0x3b649d,'master_shop':_0x2944ff,'language':_0x1f2447});}),router['post'](a0_0x41d038(0x112),auth,async(_0x5c2407,_0x29fd9f)=>{const _0x364159=await product['find']();_0x29fd9f['json']({'data':_0x364159});}),router['post'](a0_0x41d038(0xeb),auth,async(_0x4a9e41,_0x732165)=>{const _0x478db7=a0_0x41d038;try{const {dataProdCat:_0x36ccf7,dataProdIdentity:_0x1ef0a4}=_0x4a9e41[_0x478db7(0x11a)];var _0x4aa534;switch(_0x36ccf7){case'fg':switch(_0x1ef0a4){case _0x478db7(0x15e):_0x4aa534=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x478db7(0x114)}},{'$project':{'brand':'$_id'}}]);break;case _0x478db7(0x113):_0x4aa534=await product['aggregate']([{'$match':{'product_category':_0x478db7(0xd6)}},{'$group':{'_id':_0x478db7(0x171)}},{'$project':{'category':_0x478db7(0x103)}}]);break;}break;case'rm':switch(_0x1ef0a4){case'Brands':_0x4aa534=await product[_0x478db7(0xef)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x478db7(0x114)}},{'$project':{'brand':_0x478db7(0x103)}}]);break;case _0x478db7(0x113):_0x4aa534=await product[_0x478db7(0xef)]([{'$match':{'product_category':_0x478db7(0x145)}},{'$group':{'_id':_0x478db7(0x171)}},{'$project':{'category':_0x478db7(0x103)}}]);break;}break;}_0x732165[_0x478db7(0xb2)](_0x4aa534);}catch(_0x530127){_0x732165['json']({'message':_0x530127['message']});}}),router[a0_0x41d038(0xd7)](a0_0x41d038(0x137),auth,async(_0x4b2aa7,_0xd2e474)=>{const _0x416363=a0_0x41d038;try{console[_0x416363(0xcc)](_0x4b2aa7[_0x416363(0x11a)]);const {prod_cat:_0xd5e29c,identity:_0x1ec70f,valueData:_0x2db633,typeofbarcode:_0x2f6e42}=_0x4b2aa7[_0x416363(0x11a)];let _0x21bfb2;switch(_0xd5e29c){case'fg':if(_0x1ec70f==_0x416363(0x15e))_0x21bfb2=await product[_0x416363(0xef)]([{'$match':{'product_category':_0x416363(0xd6),'brand':_0x2db633}}]);else _0x1ec70f==_0x416363(0x113)&&(_0x21bfb2=await product[_0x416363(0xef)]([{'$match':{'product_category':_0x416363(0xd6),'category':_0x2db633}}]));break;case'rm':if(_0x1ec70f==_0x416363(0x15e))_0x21bfb2=await product['aggregate']([{'$match':{'product_category':_0x416363(0x145),'brand':_0x2db633}}]);else _0x1ec70f==_0x416363(0x113)&&(_0x21bfb2=await product[_0x416363(0xef)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x2db633}}]));break;}const _0x497be3=_0x41879b=>_0x41879b*0x48,_0x43509f={'width':0x3,'height':0x1},_0x247674=new PDFDocument({'margin':_0x497be3(0.75),'size':[_0x497be3(_0x43509f['width']),_0x497be3(_0x43509f['height'])],'bufferPages':!![]}),_0x59c348=_0x21bfb2['length'];for(let _0x58a133=0x0;_0x58a133<=_0x59c348;_0x58a133++){if(_0x58a133!=_0x59c348){const _0x3baea2=_0x21bfb2[_0x58a133][_0x416363(0x154)],_0x2ae1b2=_0x21bfb2[_0x58a133][_0x416363(0xaf)],_0x454ac0=_0x21bfb2[_0x58a133][_0x416363(0x10c)],_0x2e5047=_0x21bfb2[_0x58a133][_0x416363(0x107)];var _0xe5eee5;switch(_0x2f6e42){case'1':_0xe5eee5=_0x2ae1b2;break;case'2':_0xe5eee5=_0x454ac0;break;case'3':_0xe5eee5=_0x2e5047;break;}const _0x48aa8d={'width':0xd2,'height':0x64},_0x506e47={'width':_0x497be3(_0x43509f[_0x416363(0x116)]),'height':_0x497be3(_0x43509f[_0x416363(0xcb)])},_0x49dc58=new Canvas();JsBarcode(_0x49dc58,_0xe5eee5,{'format':_0x416363(0xdc),'height':_0x48aa8d[_0x416363(0xcb)],'displayValue':!![],'text':_0xe5eee5});const _0x4b28d9=_0x49dc58[_0x416363(0xe8)](),_0x5b5a44=_0x506e47[_0x416363(0x116)]/_0x48aa8d[_0x416363(0x116)],_0x1b60b6=_0x506e47['height']/_0x48aa8d[_0x416363(0xcb)],_0x15496f=Math[_0x416363(0x132)](_0x5b5a44,_0x1b60b6),_0x1b3f2f=_0x48aa8d[_0x416363(0x116)]*_0x15496f,_0x11db93=_0x48aa8d['height']*_0x15496f,_0x23d3d1=(_0x506e47[_0x416363(0x116)]-_0x1b3f2f)/0x2,_0x3056eb=(_0x506e47[_0x416363(0xcb)]-_0x11db93)/0x2;_0x247674[_0x416363(0xc0)](_0x4b28d9,_0x23d3d1,_0x3056eb,{'width':_0x1b3f2f,'height':_0x11db93}),_0x58a133!=_0x59c348&&_0x247674[_0x416363(0x150)]();}}const _0x37602d=[];_0x247674['on'](_0x416363(0xc5),_0x37602d[_0x416363(0x134)]['bind'](_0x37602d)),_0x247674['on'](_0x416363(0x125),()=>{const _0xbdc3e3=_0x416363,_0x555a26=Buffer['concat'](_0x37602d),_0x3bea44=_0x555a26[_0xbdc3e3(0x157)](_0xbdc3e3(0x135));_0xd2e474[_0xbdc3e3(0xb2)]({'pdfContent':_0x3bea44});}),_0x247674['end']();}catch(_0x1135f1){_0xd2e474[_0x416363(0xb2)]({'message':_0x1135f1['message']});}}),router[a0_0x41d038(0xd7)](a0_0x41d038(0x129),auth,async(_0x5d2ed4,_0x55cf78)=>{const _0x1e8a13=a0_0x41d038;try{console['log'](_0x5d2ed4[_0x1e8a13(0x11a)]);const {prod_cat:_0x4c4ca6,identity:_0x276fed,valueData:_0x2d6690}=_0x5d2ed4[_0x1e8a13(0x11a)];let _0x46debb;switch(_0x4c4ca6){case'fg':if(_0x276fed==_0x1e8a13(0x15e))_0x46debb=await product[_0x1e8a13(0xef)]([{'$match':{'product_category':_0x1e8a13(0xd6),'brand':_0x2d6690}}]);else _0x276fed==_0x1e8a13(0x113)&&(_0x46debb=await product[_0x1e8a13(0xef)]([{'$match':{'product_category':_0x1e8a13(0xd6),'category':_0x2d6690}}]));break;case'rm':if(_0x276fed=='Brands')_0x46debb=await product[_0x1e8a13(0xef)]([{'$match':{'product_category':_0x1e8a13(0x145),'brand':_0x2d6690}}]);else _0x276fed==_0x1e8a13(0x113)&&(_0x46debb=await product[_0x1e8a13(0xef)]([{'$match':{'product_category':_0x1e8a13(0x145),'category':_0x2d6690}}]));break;}_0x55cf78[_0x1e8a13(0xb2)]({'data':_0x46debb});}catch(_0x712ab3){_0x55cf78[_0x1e8a13(0xb2)]({'message':_0x712ab3[_0x1e8a13(0xd3)]});}}),router[a0_0x41d038(0xd7)](a0_0x41d038(0x10a),auth,async(_0x44c0c4,_0x459127)=>{const _0x1a2097=a0_0x41d038;try{const _0x2589a9=_0x44c0c4['params']['id'],{copies:_0x2abd9d,typeofbarcode:_0x47f3fd}=_0x44c0c4[_0x1a2097(0x11a)];var _0x40d7dd=await product[_0x1a2097(0x167)](_0x2589a9);const _0x2bacaa=_0x471b17=>_0x471b17*0x48,_0x1a803e={'width':0x3,'height':0x1},_0x557985=new PDFDocument({'margin':_0x2bacaa(0.75),'size':[_0x2bacaa(_0x1a803e[_0x1a2097(0x116)]),_0x2bacaa(_0x1a803e['height'])],'bufferPages':!![]}),_0x19dcf0=_0x2abd9d,_0xcf8a61=_0x40d7dd[_0x1a2097(0x154)],_0x29b0db=_0x40d7dd['primary_code'],_0x562ca5=_0x40d7dd[_0x1a2097(0x10c)],_0x4565a1=_0x40d7dd['product_code'];let _0x2c4e2f;switch(_0x47f3fd){case'1':_0x2c4e2f=_0x29b0db;break;case'2':_0x2c4e2f=_0x562ca5;break;case'3':_0x2c4e2f=_0x4565a1;break;}const _0x38a4a5={'width':0xd2,'height':0x64},_0x5860f6={'width':_0x2bacaa(_0x1a803e[_0x1a2097(0x116)]),'height':_0x2bacaa(_0x1a803e[_0x1a2097(0xcb)])};for(let _0x252606=0x1;_0x252606<=_0x19dcf0;_0x252606++){const _0x4e1b07=new Canvas();JsBarcode(_0x4e1b07,_0x2c4e2f,{'format':_0x1a2097(0xdc),'height':_0x38a4a5[_0x1a2097(0xcb)],'displayValue':!![],'text':_0x2c4e2f});const _0x18ee78=_0x4e1b07['toBuffer'](),_0x610b26=_0x5860f6[_0x1a2097(0x116)]/_0x38a4a5[_0x1a2097(0x116)],_0x40a0e3=_0x5860f6[_0x1a2097(0xcb)]/_0x38a4a5['height'],_0x4bfa95=Math[_0x1a2097(0x132)](_0x610b26,_0x40a0e3),_0x57c1bf=_0x38a4a5['width']*_0x4bfa95,_0x16b8af=_0x38a4a5[_0x1a2097(0xcb)]*_0x4bfa95,_0x2dcc5b=(_0x5860f6[_0x1a2097(0x116)]-_0x57c1bf)/0x2,_0x378e7f=(_0x5860f6[_0x1a2097(0xcb)]-_0x16b8af)/0x2;_0x557985[_0x1a2097(0xc0)](_0x18ee78,_0x2dcc5b,_0x378e7f,{'width':_0x57c1bf,'height':_0x16b8af}),_0x252606!=_0x19dcf0&&_0x557985[_0x1a2097(0x150)]();}const _0x5b2fbe=[];_0x557985['on'](_0x1a2097(0xc5),_0x5b2fbe[_0x1a2097(0x134)][_0x1a2097(0xce)](_0x5b2fbe)),_0x557985['on'](_0x1a2097(0x125),()=>{const _0x3253c7=_0x1a2097,_0x11bef2=Buffer[_0x3253c7(0x12c)](_0x5b2fbe),_0x22ad06=_0x11bef2[_0x3253c7(0x157)](_0x3253c7(0x135));_0x459127['json']({'pdfContent':_0x22ad06});}),_0x557985[_0x1a2097(0x125)]();}catch(_0x5aae57){_0x459127[_0x1a2097(0xb2)]({'message':_0x5aae57[_0x1a2097(0xd3)]});}}),module[a0_0x41d038(0xe3)]=router;function a0_0xec23(){const _0x2abb9d=['length','brand','product_barcode','express','Enabled','prod_categ','product_barcode_products','/products/view','send','warehouse','_id','/categories','/brands/:id','PCat','diskStorage','products','category','$_id','../models/all_models','map','/view','product_code','forEach','/products/units','/print_barcode_single/:id','Portuguese','secondary_code','\x20<>\x20','3340146GRPBNS','barcode\x20Product\x20master','German','909bjmtFn','/barcode_data','Category','$brand','numeric','width','categories_edit','2QGLtDL','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','body','../middleware/auth','barcode\x20user_id','Router','get','Units','SheetNames','readFile','/products_import_migrate_file','save','brand\x20data\x20update\x20successfully','end','unit\x20data\x20update\x20successfully','alertquantity','/units','/print_barcode_filter_search/','product_docs','Products\x20warehouse_data','concat','/categories/:id','product\x20update\x20successfully','Secondary_Code','Products\x20find_data','edit_product','min','now','push','base64','email','/print_barcode_filter/','product_details.product_name','ProductCode','findByIdAndUpdate','/select_data','Alert_QTY','render','\x20unit\x20is\x20add\x20successfully','40768QgFbTN','unit\x20data\x20delete\x20successfully','Portuguese\x20(BR)','2911225lNpeOG','/view/add_products','\x20Edit\x20Successfully','Raw\x20Materials','params','/units/:id','$secondary_unit','Products_category','/products/brands','success','stock','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Product_Name','units','addPage','236890PaNazW','PAlQty','/filter_product','name','sku','brand\x20data\x20delete\x20successfully','toString','attachment;\x20filename=Product_Migration_File.xlsx','Arabic\x20(ae)','pdfkit-table','$product_details.product_name','/brands','language','Brands','/products_export_migrate_file','xlsx','/units/delete/:id','\x20categories\x20is\x20add\x20successfully','product_category','product_stock','findByIdAndDelete','$product_docs','findById','$product_category','5281364qHkaXV','user','brands','Primary_Code','categories','add_product','/barcode/:id','filename','$category','redirect','defaultProduct.avif','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','primary_code','master','product\x20edit','json','flash','setHeader','status','English\x20(US)','Hindi','single','max_number_per_units','Arabic','Chinese','write','unit','find','French','image','file','findOne','long','MaxperUnits','data','secondary_unit','../public/language/languages.json','$product_stock','Spanish','Maximum_Stocks','height','log','English','bind','multer','PName','errors','maxStocks','message','then','/categories/delete/:id','Finished\x20Goods','post','14838NzgHUc','type_products','3206dnVOCA','Products\x20master','CODE128','PUnits','originalname','public/upload','$product_details.product_stock','express/lib/response','$product_details','exports','152987HBVwNu','product\x20add\x20successfully','/view/:id','categ','toBuffer','sheet_to_json','Secondary_Units','/barcode_filter','sales_category','Prod_Cat','Workbook','aggregate','/products/categories','PSecondaryUnits'];a0_0xec23=function(){return _0x2abb9d;};return a0_0xec23();}