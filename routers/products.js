const a0_0x1f85da=a0_0x5a6f;function a0_0x5a6f(_0x2a6fef,_0x65f322){const _0x5da82b=a0_0x5da8();return a0_0x5a6f=function(_0x5a6fee,_0x49be6a){_0x5a6fee=_0x5a6fee-0xbc;let _0x4f6153=_0x5da82b[_0x5a6fee];return _0x4f6153;},a0_0x5a6f(_0x2a6fef,_0x65f322);}(function(_0x510154,_0x3f50ac){const _0x350acf=a0_0x5a6f,_0x259161=_0x510154();while(!![]){try{const _0x32ddfd=-parseInt(_0x350acf(0x108))/0x1*(parseInt(_0x350acf(0x16a))/0x2)+parseInt(_0x350acf(0x127))/0x3*(-parseInt(_0x350acf(0x11e))/0x4)+-parseInt(_0x350acf(0x164))/0x5+parseInt(_0x350acf(0x151))/0x6+-parseInt(_0x350acf(0x103))/0x7*(-parseInt(_0x350acf(0x13b))/0x8)+parseInt(_0x350acf(0xd4))/0x9*(parseInt(_0x350acf(0x11c))/0xa)+parseInt(_0x350acf(0x177))/0xb;if(_0x32ddfd===_0x3f50ac)break;else _0x259161['push'](_0x259161['shift']());}catch(_0x5298b0){_0x259161['push'](_0x259161['shift']());}}}(a0_0x5da8,0x592cf));const express=require(a0_0x1f85da(0x145)),res=require(a0_0x1f85da(0xd8)),app=express(),router=express['Router'](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x1f85da(0x136)),users=require(a0_0x1f85da(0xef)),excelJS=require('exceljs'),xlsx=require(a0_0x1f85da(0x169)),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x1f85da(0xda)),PDFDocument=require('pdfkit-table');router[a0_0x1f85da(0x10d)](a0_0x1f85da(0x12b),auth,async(_0x315dd4,_0x3523fe)=>{const _0x78086e=a0_0x1f85da;try{const {username:_0x19f343,email:_0x53d546,role:_0x50a971}=_0x315dd4['user'],_0x4a53c9=_0x315dd4['user'],_0xcc17bc=await profile[_0x78086e(0x144)]({'email':_0x4a53c9[_0x78086e(0x117)]}),_0x233612=await master_shop[_0x78086e(0xe1)]();console['log']('master',_0x233612);const _0x537f6f=await categories[_0x78086e(0xe1)]();if(_0x233612[0x0]['language']==_0x78086e(0xc0))var _0x200ba8=users[_0x78086e(0xdd)];else{if(_0x233612[0x0]['language']=='Hindi')var _0x200ba8=users[_0x78086e(0xc8)];else{if(_0x233612[0x0][_0x78086e(0x156)]=='German')var _0x200ba8=users[_0x78086e(0x15a)];else{if(_0x233612[0x0][_0x78086e(0x156)]=='Spanish')var _0x200ba8=users[_0x78086e(0xfc)];else{if(_0x233612[0x0]['language']==_0x78086e(0xfd))var _0x200ba8=users[_0x78086e(0xfd)];else{if(_0x233612[0x0][_0x78086e(0x156)]==_0x78086e(0x135))var _0x200ba8=users[_0x78086e(0xdc)];else{if(_0x233612[0x0]['language']==_0x78086e(0xe2))var _0x200ba8=users['Chinese'];else{if(_0x233612[0x0][_0x78086e(0x156)]=='Arabic\x20(ae)')var _0x200ba8=users['Arabic'];}}}}}}}_0x3523fe[_0x78086e(0x121)](_0x78086e(0x129),{'success':_0x315dd4['flash'](_0x78086e(0x141)),'errors':_0x315dd4['flash'](_0x78086e(0x15c)),'role':_0x4a53c9,'profile':_0xcc17bc,'user':_0x537f6f,'master_shop':_0x233612,'language':_0x200ba8});}catch(_0x115c2d){console[_0x78086e(0xcb)](_0x115c2d);}}),router[a0_0x1f85da(0x17b)]('/categories',auth,async(_0x4ff694,_0x2ecc01)=>{const _0x56e869=a0_0x1f85da;try{const {name:_0x5a6022,products:_0x32b791}=_0x4ff694[_0x56e869(0x118)],_0x35b5e2=new categories({'name':_0x5a6022,'products':_0x32b791}),_0x507cfe=await categories[_0x56e869(0x144)]({'name':_0x5a6022});_0x507cfe?_0x4ff694['flash'](_0x56e869(0x15c),_0x5a6022+_0x56e869(0x102)):_0x4ff694['flash'](_0x56e869(0x141),_0x5a6022+_0x56e869(0x12f));const _0x886e30=await _0x35b5e2['save']();_0x2ecc01[_0x56e869(0x179)](_0x56e869(0x122));}catch(_0x3856b7){console[_0x56e869(0xcb)](_0x3856b7);}}),router[a0_0x1f85da(0x10d)]('/categories/:id',auth,async(_0x16e562,_0x20aeff)=>{const _0x17c9d4=a0_0x1f85da;try{const {username:_0x51040c,email:_0x4c24da,role:_0x1c8493}=_0x16e562[_0x17c9d4(0x15d)],_0x33cb3f=_0x16e562[_0x17c9d4(0x15d)],_0x4cc136=await profile[_0x17c9d4(0x144)]({'email':_0x33cb3f[_0x17c9d4(0x117)]}),_0x47e8b2=await master_shop['find']();console[_0x17c9d4(0xcb)](_0x17c9d4(0xdf),_0x47e8b2);const _0x26b051=_0x16e562[_0x17c9d4(0x14c)]['id'];console[_0x17c9d4(0xcb)](_0x26b051);const _0x5ce50c=await categories[_0x17c9d4(0x139)](_0x26b051);if(_0x47e8b2[0x0][_0x17c9d4(0x156)]==_0x17c9d4(0xc0))var _0x1cb86e=users[_0x17c9d4(0xdd)];else{if(_0x47e8b2[0x0]['language']==_0x17c9d4(0xc8))var _0x1cb86e=users[_0x17c9d4(0xc8)];else{if(_0x47e8b2[0x0][_0x17c9d4(0x156)]=='German')var _0x1cb86e=users[_0x17c9d4(0x15a)];else{if(_0x47e8b2[0x0][_0x17c9d4(0x156)]=='Spanish')var _0x1cb86e=users[_0x17c9d4(0xfc)];else{if(_0x47e8b2[0x0][_0x17c9d4(0x156)]=='French')var _0x1cb86e=users[_0x17c9d4(0xfd)];else{if(_0x47e8b2[0x0][_0x17c9d4(0x156)]==_0x17c9d4(0x135))var _0x1cb86e=users[_0x17c9d4(0xdc)];else{if(_0x47e8b2[0x0][_0x17c9d4(0x156)]==_0x17c9d4(0xe2))var _0x1cb86e=users['Chinese'];else{if(_0x47e8b2[0x0]['language']==_0x17c9d4(0x173))var _0x1cb86e=users['Arabic'];}}}}}}}_0x20aeff['render'](_0x17c9d4(0x129),{'success':_0x16e562[_0x17c9d4(0x132)](_0x17c9d4(0x141)),'errors':_0x16e562[_0x17c9d4(0x132)]('errors'),'role':_0x33cb3f,'profile':_0x4cc136,'master_shop':_0x47e8b2,'user':_0x5ce50c,'language':_0x1cb86e});}catch(_0x5c1873){console[_0x17c9d4(0xcb)](_0x5c1873);}}),router[a0_0x1f85da(0x17b)]('/categories/:id',auth,async(_0xc91200,_0x24e07a)=>{const _0x455b43=a0_0x1f85da;try{const _0x3c9e24=_0xc91200[_0x455b43(0x14c)]['id'],_0x5dc4b5=await categories[_0x455b43(0x134)](_0x3c9e24,_0xc91200['body']);_0xc91200[_0x455b43(0x132)]('success',''+users[_0x455b43(0x11d)]),_0x24e07a['redirect'](_0x455b43(0x122));}catch(_0x32376d){console[_0x455b43(0xcb)](_0x32376d);}}),router[a0_0x1f85da(0x10d)]('/categories/delete/:id',auth,async(_0xc83290,_0x551fed)=>{const _0x1c11f2=a0_0x1f85da;try{const _0x552c7c=_0xc83290[_0x1c11f2(0x14c)]['id'],_0x508977=await categories[_0x1c11f2(0xe4)](_0x552c7c);_0xc83290[_0x1c11f2(0x132)](_0x1c11f2(0x141),_0x1c11f2(0x170)),_0x551fed[_0x1c11f2(0x179)]('/products/categories');}catch(_0x5ce0ac){console[_0x1c11f2(0xcb)](_0x5ce0ac);}}),router['get']('/brands',auth,async(_0x1ea766,_0x5a0d30)=>{const _0x3dc5ad=a0_0x1f85da;try{const {username:_0x46452a,email:_0x2afa12,role:_0x207c2c}=_0x1ea766[_0x3dc5ad(0x15d)],_0x5e8987=_0x1ea766[_0x3dc5ad(0x15d)],_0x20a49f=await profile['findOne']({'email':_0x5e8987['email']}),_0x101c07=await master_shop['find']();console['log']('master',_0x101c07);const _0xd699ec=await brands[_0x3dc5ad(0xe1)]();if(_0x101c07[0x0]['language']==_0x3dc5ad(0xc0))var _0x495a8d=users[_0x3dc5ad(0xdd)];else{if(_0x101c07[0x0]['language']==_0x3dc5ad(0xc8))var _0x495a8d=users['Hindi'];else{if(_0x101c07[0x0][_0x3dc5ad(0x156)]==_0x3dc5ad(0x15a))var _0x495a8d=users[_0x3dc5ad(0x15a)];else{if(_0x101c07[0x0][_0x3dc5ad(0x156)]==_0x3dc5ad(0xfc))var _0x495a8d=users[_0x3dc5ad(0xfc)];else{if(_0x101c07[0x0]['language']==_0x3dc5ad(0xfd))var _0x495a8d=users['French'];else{if(_0x101c07[0x0][_0x3dc5ad(0x156)]==_0x3dc5ad(0x135))var _0x495a8d=users['Portuguese'];else{if(_0x101c07[0x0][_0x3dc5ad(0x156)]==_0x3dc5ad(0xe2))var _0x495a8d=users['Chinese'];else{if(_0x101c07[0x0]['language']==_0x3dc5ad(0x173))var _0x495a8d=users[_0x3dc5ad(0x10b)];}}}}}}}_0x5a0d30[_0x3dc5ad(0x121)](_0x3dc5ad(0xf1),{'success':_0x1ea766[_0x3dc5ad(0x132)](_0x3dc5ad(0x141)),'errors':_0x1ea766[_0x3dc5ad(0x132)](_0x3dc5ad(0x15c)),'role':_0x5e8987,'profile':_0x20a49f,'master_shop':_0x101c07,'user':_0xd699ec,'language':_0x495a8d});}catch(_0x4be979){console[_0x3dc5ad(0xcb)](_0x4be979);}}),router[a0_0x1f85da(0x17b)]('/brands',auth,async(_0x15cbc5,_0xcabb82)=>{const _0x538478=a0_0x1f85da;try{const {name:_0xc73b87,products:_0x5e3f14}=_0x15cbc5[_0x538478(0x118)],_0x4765a9=new brands({'name':_0xc73b87,'products':_0x5e3f14}),_0x356f0e=await brands[_0x538478(0x144)]({'name':_0xc73b87});_0x356f0e?_0x15cbc5['flash'](_0x538478(0x15c),_0xc73b87+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x15cbc5[_0x538478(0x132)](_0x538478(0x141),_0xc73b87+_0x538478(0xc5));const _0x261371=await _0x4765a9[_0x538478(0x166)]();_0xcabb82[_0x538478(0x179)](_0x538478(0x146));}catch(_0x1745cf){console[_0x538478(0xcb)](_0x1745cf);}}),router['get'](a0_0x1f85da(0x147),auth,async(_0xbb6d3e,_0x3c9e46)=>{const _0x1a1e6e=a0_0x1f85da;try{const {username:_0xe30bba,email:_0x41f3df,role:_0x1e48f0}=_0xbb6d3e[_0x1a1e6e(0x15d)],_0x25e030=_0xbb6d3e['user'],_0x24b9b1=await profile[_0x1a1e6e(0x144)]({'email':_0x25e030['email']}),_0x40ca3b=await master_shop['find']();console[_0x1a1e6e(0xcb)]('master',_0x40ca3b);const _0x407e18=_0xbb6d3e[_0x1a1e6e(0x14c)]['id'];console[_0x1a1e6e(0xcb)](_0x407e18);const _0x31bcc8=await brands[_0x1a1e6e(0x139)](_0x407e18);if(_0x40ca3b[0x0][_0x1a1e6e(0x156)]=='English\x20(US)')var _0x5825b5=users[_0x1a1e6e(0xdd)];else{if(_0x40ca3b[0x0][_0x1a1e6e(0x156)]==_0x1a1e6e(0xc8))var _0x5825b5=users['Hindi'];else{if(_0x40ca3b[0x0]['language']=='German')var _0x5825b5=users[_0x1a1e6e(0x15a)];else{if(_0x40ca3b[0x0][_0x1a1e6e(0x156)]==_0x1a1e6e(0xfc))var _0x5825b5=users[_0x1a1e6e(0xfc)];else{if(_0x40ca3b[0x0][_0x1a1e6e(0x156)]==_0x1a1e6e(0xfd))var _0x5825b5=users[_0x1a1e6e(0xfd)];else{if(_0x40ca3b[0x0][_0x1a1e6e(0x156)]==_0x1a1e6e(0x135))var _0x5825b5=users[_0x1a1e6e(0xdc)];else{if(_0x40ca3b[0x0][_0x1a1e6e(0x156)]==_0x1a1e6e(0xe2))var _0x5825b5=users[_0x1a1e6e(0xe2)];else{if(_0x40ca3b[0x0][_0x1a1e6e(0x156)]=='Arabic\x20(ae)')var _0x5825b5=users['Arabic'];}}}}}}}_0x3c9e46['render'](_0x1a1e6e(0xf1),{'success':_0xbb6d3e['flash'](_0x1a1e6e(0x141)),'errors':_0xbb6d3e[_0x1a1e6e(0x132)](_0x1a1e6e(0x15c)),'role':_0x25e030,'profile':_0x24b9b1,'master_shop':_0x40ca3b,'user':_0x31bcc8,'language':_0x5825b5});}catch(_0x3c8fee){console['log'](_0x3c8fee);}}),router[a0_0x1f85da(0x17b)](a0_0x1f85da(0x147),auth,async(_0x52a514,_0x372e29)=>{const _0x4610d9=a0_0x1f85da;try{const _0x1f1522=_0x52a514[_0x4610d9(0x14c)]['id'],_0x5dae1a=await brands[_0x4610d9(0x134)](_0x1f1522,_0x52a514[_0x4610d9(0x118)]);_0x52a514[_0x4610d9(0x132)](_0x4610d9(0x141),_0x4610d9(0x152)),_0x372e29[_0x4610d9(0x179)](_0x4610d9(0x146));}catch(_0x3c23ef){console[_0x4610d9(0xcb)](_0x3c23ef);}}),router[a0_0x1f85da(0x10d)](a0_0x1f85da(0x120),auth,async(_0x5c28e4,_0x1ae385)=>{const _0x2c36cc=a0_0x1f85da;try{const _0x2c5a07=_0x5c28e4[_0x2c36cc(0x14c)]['id'],_0x30ebdd=await brands[_0x2c36cc(0xe4)](_0x2c5a07);_0x5c28e4[_0x2c36cc(0x132)](_0x2c36cc(0x141),_0x2c36cc(0x126)),_0x1ae385['redirect'](_0x2c36cc(0x146));}catch(_0x3eb7e4){console[_0x2c36cc(0xcb)](_0x3eb7e4);}}),router[a0_0x1f85da(0x10d)](a0_0x1f85da(0xfa),auth,async(_0x54f01b,_0x346f54)=>{const _0x2e74b5=a0_0x1f85da;try{const {username:_0xc3c2a8,email:_0x107a1a,role:_0x13f819}=_0x54f01b[_0x2e74b5(0x15d)],_0x3da3c0=_0x54f01b['user'],_0x349de9=await profile['findOne']({'email':_0x3da3c0['email']}),_0x4d5baf=await master_shop[_0x2e74b5(0xe1)]();console[_0x2e74b5(0xcb)]('master',_0x4d5baf);const _0x179d4d=await units[_0x2e74b5(0xe1)]();if(_0x4d5baf[0x0][_0x2e74b5(0x156)]==_0x2e74b5(0xc0))var _0x3f2e65=users[_0x2e74b5(0xdd)];else{if(_0x4d5baf[0x0]['language']=='Hindi')var _0x3f2e65=users[_0x2e74b5(0xc8)];else{if(_0x4d5baf[0x0]['language']==_0x2e74b5(0x15a))var _0x3f2e65=users[_0x2e74b5(0x15a)];else{if(_0x4d5baf[0x0]['language']==_0x2e74b5(0xfc))var _0x3f2e65=users['Spanish'];else{if(_0x4d5baf[0x0][_0x2e74b5(0x156)]==_0x2e74b5(0xfd))var _0x3f2e65=users[_0x2e74b5(0xfd)];else{if(_0x4d5baf[0x0][_0x2e74b5(0x156)]==_0x2e74b5(0x135))var _0x3f2e65=users[_0x2e74b5(0xdc)];else{if(_0x4d5baf[0x0][_0x2e74b5(0x156)]==_0x2e74b5(0xe2))var _0x3f2e65=users['Chinese'];else{if(_0x4d5baf[0x0][_0x2e74b5(0x156)]==_0x2e74b5(0x173))var _0x3f2e65=users[_0x2e74b5(0x10b)];}}}}}}}_0x346f54[_0x2e74b5(0x121)](_0x2e74b5(0xee),{'success':_0x54f01b[_0x2e74b5(0x132)](_0x2e74b5(0x141)),'errors':_0x54f01b[_0x2e74b5(0x132)](_0x2e74b5(0x15c)),'role':_0x3da3c0,'profile':_0x349de9,'master_shop':_0x4d5baf,'user':_0x179d4d,'language':_0x3f2e65});}catch(_0x3a1ec0){console[_0x2e74b5(0xcb)](_0x3a1ec0);}}),router[a0_0x1f85da(0x17b)](a0_0x1f85da(0xfa),auth,async(_0x4b4d20,_0x29041c)=>{const _0x3b7fd9=a0_0x1f85da;try{const {name:_0x38dfb4,secondary_unit:_0x2b9a98,products:_0x450d86}=_0x4b4d20['body'],_0x3ed0dc=new units({'name':_0x38dfb4,'secondary_unit':_0x2b9a98,'products':_0x450d86}),_0x145b82=await units[_0x3b7fd9(0x144)]({'name':_0x38dfb4});_0x145b82?_0x4b4d20['flash']('errors',_0x38dfb4+_0x3b7fd9(0x148)):_0x4b4d20[_0x3b7fd9(0x132)](_0x3b7fd9(0x141),_0x38dfb4+_0x3b7fd9(0x13c));const _0x5ad71e=await _0x3ed0dc[_0x3b7fd9(0x166)]();_0x29041c[_0x3b7fd9(0x179)]('/products/units');}catch(_0x580052){console[_0x3b7fd9(0xcb)](_0x580052);}}),router['get'](a0_0x1f85da(0xd1),auth,async(_0x1a0958,_0x2f09dc)=>{const _0x5706b7=a0_0x1f85da;try{const {username:_0x2e8631,email:_0xaa712f,role:_0x5e1526}=_0x1a0958[_0x5706b7(0x15d)],_0x540e79=_0x1a0958[_0x5706b7(0x15d)],_0x3c9f7c=await profile[_0x5706b7(0x144)]({'email':_0x540e79[_0x5706b7(0x117)]}),_0x2d58da=await master_shop[_0x5706b7(0xe1)]();console['log'](_0x5706b7(0xdf),_0x2d58da);const _0x5123c8=_0x1a0958[_0x5706b7(0x14c)]['id'],_0xa5d881=await units['findById'](_0x5123c8);if(_0x2d58da[0x0][_0x5706b7(0x156)]==_0x5706b7(0xc0))var _0x23c48f=users['English'];else{if(_0x2d58da[0x0][_0x5706b7(0x156)]==_0x5706b7(0xc8))var _0x23c48f=users[_0x5706b7(0xc8)];else{if(_0x2d58da[0x0][_0x5706b7(0x156)]==_0x5706b7(0x15a))var _0x23c48f=users['German'];else{if(_0x2d58da[0x0][_0x5706b7(0x156)]==_0x5706b7(0xfc))var _0x23c48f=users[_0x5706b7(0xfc)];else{if(_0x2d58da[0x0][_0x5706b7(0x156)]==_0x5706b7(0xfd))var _0x23c48f=users['French'];else{if(_0x2d58da[0x0][_0x5706b7(0x156)]==_0x5706b7(0x135))var _0x23c48f=users['Portuguese'];else{if(_0x2d58da[0x0][_0x5706b7(0x156)]==_0x5706b7(0xe2))var _0x23c48f=users[_0x5706b7(0xe2)];else{if(_0x2d58da[0x0][_0x5706b7(0x156)]=='Arabic\x20(ae)')var _0x23c48f=users[_0x5706b7(0x10b)];}}}}}}}_0x2f09dc[_0x5706b7(0x121)](_0x5706b7(0xee),{'success':_0x1a0958[_0x5706b7(0x132)]('success'),'errors':_0x1a0958[_0x5706b7(0x132)]('errors'),'role':_0x540e79,'profile':_0x3c9f7c,'master_shop':_0x2d58da,'user':_0xa5d881,'language':_0x23c48f});}catch(_0x40dda8){console[_0x5706b7(0xcb)](_0x40dda8);}}),router[a0_0x1f85da(0x17b)](a0_0x1f85da(0xd1),auth,async(_0x2db461,_0x15885d)=>{const _0x4494bb=a0_0x1f85da;try{const _0x17215f=_0x2db461[_0x4494bb(0x14c)]['id'],_0x1ab1ea=await units['findByIdAndUpdate'](_0x17215f,_0x2db461[_0x4494bb(0x118)]);_0x2db461[_0x4494bb(0x132)](_0x4494bb(0x141),_0x4494bb(0x12a)),_0x15885d[_0x4494bb(0x179)](_0x4494bb(0x16c));}catch(_0x3dfd62){console[_0x4494bb(0xcb)](_0x3dfd62);}}),router[a0_0x1f85da(0x10d)]('/units/delete/:id',auth,async(_0x331472,_0x124d54)=>{const _0x3822ad=a0_0x1f85da;try{const _0x51379d=_0x331472[_0x3822ad(0x14c)]['id'],_0x138306=await units['findByIdAndDelete'](_0x51379d);_0x331472[_0x3822ad(0x132)](_0x3822ad(0x141),_0x3822ad(0xf6)),_0x124d54['redirect']('/products/units');}catch(_0x6d816f){console['log'](_0x6d816f);}});const storage=multer[a0_0x1f85da(0xfb)]({'destination':(_0x7e204d,_0x3f9c2d,_0xac93be)=>{const _0x1f090c=a0_0x1f85da;_0xac93be(null,_0x1f090c(0x153));},'filename':(_0x310573,_0x1d1316,_0xbb951c)=>{const _0xaf16db=a0_0x1f85da;_0xbb951c(null,Date[_0xaf16db(0x105)]()+_0x1d1316[_0xaf16db(0xc6)]);}}),upload=multer({'storage':storage});router['get'](a0_0x1f85da(0x172),auth,async(_0x14facd,_0x1e44f2)=>{const _0x4f5269=a0_0x1f85da;try{const {username:_0x133af6,email:_0x5d16d5,role:_0x31e3de}=_0x14facd[_0x4f5269(0x15d)],_0x591c7d=_0x14facd[_0x4f5269(0x15d)],_0x26db6a=await profile[_0x4f5269(0x144)]({'email':_0x591c7d[_0x4f5269(0x117)]}),_0x3005e4={'year':'numeric','month':_0x4f5269(0x155),'day':'numeric'},_0x2d66ab=await master_shop[_0x4f5269(0xe1)]();console[_0x4f5269(0xcb)](_0x4f5269(0xf2),_0x2d66ab);const _0x3be97f=await product[_0x4f5269(0xe1)]();console['log'](_0x4f5269(0x14d),_0x3be97f);const _0x1d5f3a=await warehouse['aggregate']([{'$unwind':_0x4f5269(0x14e)},{'$lookup':{'from':_0x4f5269(0xd0),'localField':_0x4f5269(0x168),'foreignField':_0x4f5269(0x15b),'as':'product_docs'}},{'$unwind':_0x4f5269(0xbd)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x4f5269(0x14a)}},{'$group':{'_id':_0x4f5269(0x11a),'product_stock':{'$sum':_0x4f5269(0x115)}}}]);console[_0x4f5269(0xcb)](_0x4f5269(0x116),_0x1d5f3a),_0x1d5f3a[_0x4f5269(0x16e)](_0x2f92db=>{const _0x58d356=_0x4f5269,_0x2991d2=_0x3be97f[_0x58d356(0x12d)](_0x1a44ce=>{const _0x2a2f98=_0x58d356;_0x1a44ce[_0x2a2f98(0x15b)]==_0x2f92db['_id']&&(_0x1a44ce[_0x2a2f98(0xe5)]=parseInt(_0x1a44ce[_0x2a2f98(0xe5)])+parseInt(_0x2f92db[_0x2a2f98(0xe3)]));});}),console[_0x4f5269(0xcb)](_0x4f5269(0x14d),_0x3be97f);if(_0x2d66ab[0x0][_0x4f5269(0x156)]=='English\x20(US)')var _0x272ce5=users[_0x4f5269(0xdd)];else{if(_0x2d66ab[0x0][_0x4f5269(0x156)]==_0x4f5269(0xc8))var _0x272ce5=users[_0x4f5269(0xc8)];else{if(_0x2d66ab[0x0][_0x4f5269(0x156)]==_0x4f5269(0x15a))var _0x272ce5=users[_0x4f5269(0x15a)];else{if(_0x2d66ab[0x0][_0x4f5269(0x156)]==_0x4f5269(0xfc))var _0x272ce5=users[_0x4f5269(0xfc)];else{if(_0x2d66ab[0x0]['language']==_0x4f5269(0xfd))var _0x272ce5=users[_0x4f5269(0xfd)];else{if(_0x2d66ab[0x0][_0x4f5269(0x156)]==_0x4f5269(0x135))var _0x272ce5=users['Portuguese'];else{if(_0x2d66ab[0x0][_0x4f5269(0x156)]==_0x4f5269(0xe2))var _0x272ce5=users[_0x4f5269(0xe2)];else{if(_0x2d66ab[0x0]['language']=='Arabic\x20(ae)')var _0x272ce5=users[_0x4f5269(0x10b)];}}}}}}}_0x1e44f2[_0x4f5269(0x121)](_0x4f5269(0xd0),{'success':_0x14facd[_0x4f5269(0x132)](_0x4f5269(0x141)),'errors':_0x14facd[_0x4f5269(0x132)](_0x4f5269(0x15c)),'alldata':_0x3be97f,'profile':_0x26db6a,'master_shop':_0x2d66ab,'role':_0x591c7d,'product_stock':_0x1d5f3a,'language':_0x272ce5});}catch(_0x562e01){console[_0x4f5269(0xcb)](_0x562e01);}}),router[a0_0x1f85da(0x10d)]('/view/add_products',auth,async(_0x4f600d,_0x31274c)=>{const _0x445e4e=a0_0x1f85da;try{const {username:_0x1ff7b2,email:_0x3ce99d,role:_0x49fd73}=_0x4f600d[_0x445e4e(0x15d)],_0x3a532e=_0x4f600d[_0x445e4e(0x15d)],_0x30869d=await profile[_0x445e4e(0x144)]({'email':_0x3a532e[_0x445e4e(0x117)]}),_0x224ad4=await master_shop[_0x445e4e(0xe1)]();console[_0x445e4e(0xcb)](_0x445e4e(0xdf),_0x224ad4);const _0x392ebb=await categories[_0x445e4e(0xe1)]({}),_0x2dc691=await brands[_0x445e4e(0xe1)]({}),_0x2ca109=await units[_0x445e4e(0xe1)]({}),_0x1516ed=await warehouse[_0x445e4e(0xe1)]({'status':'Enabled'});if(_0x224ad4[0x0][_0x445e4e(0x156)]==_0x445e4e(0xc0))var _0x7728b7=users[_0x445e4e(0xdd)];else{if(_0x224ad4[0x0][_0x445e4e(0x156)]==_0x445e4e(0xc8))var _0x7728b7=users['Hindi'];else{if(_0x224ad4[0x0]['language']=='German')var _0x7728b7=users[_0x445e4e(0x15a)];else{if(_0x224ad4[0x0][_0x445e4e(0x156)]==_0x445e4e(0xfc))var _0x7728b7=users[_0x445e4e(0xfc)];else{if(_0x224ad4[0x0]['language']=='French')var _0x7728b7=users[_0x445e4e(0xfd)];else{if(_0x224ad4[0x0][_0x445e4e(0x156)]==_0x445e4e(0x135))var _0x7728b7=users['Portuguese'];else{if(_0x224ad4[0x0][_0x445e4e(0x156)]=='Chinese')var _0x7728b7=users[_0x445e4e(0xe2)];else{if(_0x224ad4[0x0][_0x445e4e(0x156)]==_0x445e4e(0x173))var _0x7728b7=users[_0x445e4e(0x10b)];}}}}}}}_0x31274c[_0x445e4e(0x121)](_0x445e4e(0x13d),{'success':_0x4f600d[_0x445e4e(0x132)]('success'),'errors':_0x4f600d['flash'](_0x445e4e(0x15c)),'role':_0x3a532e,'profile':_0x30869d,'categories':_0x392ebb,'brands':_0x2dc691,'master_shop':_0x224ad4,'units':_0x2ca109,'language':_0x7728b7,'find_data':_0x1516ed});}catch(_0xe94e2){console['log'](_0xe94e2);}}),router[a0_0x1f85da(0x17b)](a0_0x1f85da(0x137),auth,upload['single'](a0_0x1f85da(0x159)),async(_0x2b3349,_0x3f87ae)=>{const _0x2055e4=a0_0x1f85da;try{const {name:_0x224f8d,category:_0x4bab8a,brand:_0x36f595,unit:_0x2a6ef2,alertquantity:_0x1dc02b,stock:_0xf9d80c,product_code:_0xcc3171,warehouse:_0x24fce5,primary_ItemCode:_0x249579,second_ItemCode:_0x3aba4a,second_unit:_0x48bde5,maxPerUnit:_0x53f0b6,MaxPerProduct:_0x5e596e,sales_cat:_0x19018b,type_prod:_0x42b447}=_0x2b3349[_0x2055e4(0x118)],_0x47cca3=_0x2b3349['file']?.[_0x2055e4(0x158)]||_0x2055e4(0xeb),_0x74cbb7=new product({'image':_0x47cca3,'name':_0x224f8d,'category':_0x4bab8a,'brand':_0x36f595,'unit':_0x2a6ef2,'alertquantity':_0x1dc02b,'stock':_0xf9d80c,'product_code':_0xcc3171,'warehouse':_0x24fce5,'primary_code':_0x249579,'secondary_code':_0x3aba4a,'second_unit':_0x48bde5,'maxStocks':_0x5e596e,'maxProdPerUnit':_0x53f0b6,'sales_category':_0x19018b,'type_products':_0x42b447}),_0x2a7c57=await _0x74cbb7[_0x2055e4(0x166)](),_0x25601c=await categories[_0x2055e4(0x144)]({'name':_0x4bab8a});_0x25601c[_0x2055e4(0xd0)]=parseInt(_0x25601c[_0x2055e4(0xd0)])+0x1,await _0x25601c[_0x2055e4(0x166)]();const _0x1c5d0a=await brands[_0x2055e4(0x144)]({'name':_0x36f595});_0x1c5d0a[_0x2055e4(0xd0)]=parseInt(_0x1c5d0a[_0x2055e4(0xd0)])+0x1,await _0x1c5d0a[_0x2055e4(0x166)]();const _0x2e9cdf=await units['findOne']({'name':_0x2a6ef2});_0x2e9cdf['products']=parseInt(_0x2e9cdf[_0x2055e4(0xd0)])+0x1,await _0x2e9cdf[_0x2055e4(0x166)](),_0x2b3349[_0x2055e4(0x132)](_0x2055e4(0x141),'product\x20add\x20successfully'),_0x3f87ae[_0x2055e4(0x179)](_0x2055e4(0x17a));}catch(_0x1d5cc3){console[_0x2055e4(0xcb)](_0x1d5cc3);}}),router['get'](a0_0x1f85da(0xbf),auth,async(_0x69f9f2,_0xa7fb6b)=>{const _0x14a2d8=a0_0x1f85da;try{const {username:_0x5f4155,email:_0x17086b,role:_0x39e738}=_0x69f9f2[_0x14a2d8(0x15d)],_0x46282e=_0x69f9f2['user'],_0x4c4c86=await profile[_0x14a2d8(0x144)]({'email':_0x46282e[_0x14a2d8(0x117)]}),_0x39e709=await master_shop[_0x14a2d8(0xe1)]();console['log'](_0x14a2d8(0x178),_0x39e709);const _0x149012=_0x69f9f2['params']['id'],_0x171c7b=await product[_0x14a2d8(0x139)](_0x149012),_0x1dd5cf=await categories[_0x14a2d8(0xe1)]({}),_0x1893b9=await brands[_0x14a2d8(0xe1)]({}),_0x4a9858=await units[_0x14a2d8(0xe1)]({}),_0x3a445c=await warehouse['find']({'status':_0x14a2d8(0xc1)}),_0xfd8be9=await units[_0x14a2d8(0xf7)]([{'$group':{'_id':_0x14a2d8(0x106),'secondaryunit':{'$first':_0x14a2d8(0x157)}}}]);if(_0x39e709[0x0][_0x14a2d8(0x156)]==_0x14a2d8(0xc0))var _0x178f86=users[_0x14a2d8(0xdd)];else{if(_0x39e709[0x0][_0x14a2d8(0x156)]==_0x14a2d8(0xc8))var _0x178f86=users[_0x14a2d8(0xc8)];else{if(_0x39e709[0x0][_0x14a2d8(0x156)]==_0x14a2d8(0x15a))var _0x178f86=users[_0x14a2d8(0x15a)];else{if(_0x39e709[0x0]['language']==_0x14a2d8(0xfc))var _0x178f86=users[_0x14a2d8(0xfc)];else{if(_0x39e709[0x0][_0x14a2d8(0x156)]=='French')var _0x178f86=users[_0x14a2d8(0xfd)];else{if(_0x39e709[0x0]['language']=='Portuguese\x20(BR)')var _0x178f86=users[_0x14a2d8(0xdc)];else{if(_0x39e709[0x0][_0x14a2d8(0x156)]=='Chinese')var _0x178f86=users[_0x14a2d8(0xe2)];else{if(_0x39e709[0x0][_0x14a2d8(0x156)]==_0x14a2d8(0x173))var _0x178f86=users[_0x14a2d8(0x10b)];}}}}}}}_0xa7fb6b[_0x14a2d8(0x121)](_0x14a2d8(0xf0),{'success':_0x69f9f2[_0x14a2d8(0x132)](_0x14a2d8(0x141)),'errors':_0x69f9f2[_0x14a2d8(0x132)](_0x14a2d8(0x15c)),'role':_0x46282e,'profile':_0x4c4c86,'alldata':_0x171c7b,'categories':_0x1dd5cf,'brands':_0x1893b9,'master_shop':_0x39e709,'units':_0x4a9858,'secondunit':_0xfd8be9,'find_data':_0x3a445c,'language':_0x178f86});}catch(_0x1dcff3){console[_0x14a2d8(0xcb)](_0x1dcff3);}}),router[a0_0x1f85da(0x17b)](a0_0x1f85da(0xbf),auth,upload[a0_0x1f85da(0x138)](a0_0x1f85da(0x159)),async(_0x3c2fb7,_0x9d992e)=>{const _0x40204b=a0_0x1f85da;try{const _0x16c914=_0x3c2fb7[_0x40204b(0x14c)]['id'],_0x3e1c11=await product['findById'](_0x16c914),{image:_0x4dbb8e,name:_0x30c3a1,category:_0x2e75bf,brand:_0x3bb4a2,sku:_0x2a82a2,unit:_0x2840bf,alertquantity:_0x5c8133,product_code:_0x577dec,warehouse:_0x449bda,primary_ItemCode:_0x1cbdaa,second_ItemCode:_0x3f0fa4,second_unit:_0x566089,maxPerUnit:_0x17cf4b,MaxPerProduct:_0x4c6411,prod_catdata:_0x166757,type_prod:_0x3dcca2,sales_cat:_0x3cd29c}=_0x3c2fb7[_0x40204b(0x118)];_0x3c2fb7['file']&&(_0x3e1c11[_0x40204b(0x159)]=_0x3c2fb7[_0x40204b(0xc9)][_0x40204b(0x158)]);_0x3e1c11[_0x40204b(0x15b)]=_0x30c3a1,_0x3e1c11[_0x40204b(0x17c)]=_0x2e75bf,_0x3e1c11[_0x40204b(0x131)]=_0x3bb4a2,_0x3e1c11[_0x40204b(0x113)]=_0x2a82a2,_0x3e1c11[_0x40204b(0x128)]=_0x2840bf,_0x3e1c11[_0x40204b(0xc3)]=_0x5c8133,_0x3e1c11[_0x40204b(0xcd)]=_0x577dec,_0x3e1c11[_0x40204b(0x119)]=_0x449bda,_0x3e1c11[_0x40204b(0xd7)]=_0x1cbdaa,_0x3e1c11[_0x40204b(0xed)]=_0x3f0fa4,_0x3e1c11[_0x40204b(0xce)]=_0x566089,_0x3e1c11[_0x40204b(0x10f)]=_0x4c6411,_0x3e1c11[_0x40204b(0x175)]=_0x17cf4b,_0x3e1c11[_0x40204b(0xf4)]=_0x166757,_0x3e1c11[_0x40204b(0x171)]=_0x3dcca2,_0x3e1c11[_0x40204b(0xe0)]=_0x3cd29c;const _0x3121c7=await _0x3e1c11[_0x40204b(0x166)]();console[_0x40204b(0xcb)]('product\x20edit',_0x3e1c11),_0x3c2fb7[_0x40204b(0x132)](_0x40204b(0x141),_0x40204b(0x130)),_0x9d992e[_0x40204b(0x179)](_0x40204b(0x17a));}catch(_0x498a3e){console[_0x40204b(0xcb)](_0x498a3e);}}),router['get'](a0_0x1f85da(0x15f),auth,async(_0x2dbb8e,_0x48404d)=>{const _0x55ad2d=a0_0x1f85da;try{const {username:_0x82fcf9,email:_0x3e7882,role:_0x7840e7}=_0x2dbb8e[_0x55ad2d(0x15d)],_0x4ea67d=_0x2dbb8e[_0x55ad2d(0x15d)],_0x4b88c7=await profile[_0x55ad2d(0x144)]({'email':_0x4ea67d[_0x55ad2d(0x117)]}),_0x38a23e=await master_shop[_0x55ad2d(0xe1)]();console['log'](_0x55ad2d(0x161),_0x38a23e);const _0x14140f=_0x2dbb8e[_0x55ad2d(0x14c)]['id'],_0x257a47=await product[_0x55ad2d(0x139)](_0x14140f);console['log'](_0x55ad2d(0xdb),_0x257a47);if(_0x38a23e[0x0]['language']==_0x55ad2d(0xc0))var _0x26da78=users[_0x55ad2d(0xdd)];else{if(_0x38a23e[0x0][_0x55ad2d(0x156)]=='Hindi')var _0x26da78=users[_0x55ad2d(0xc8)];else{if(_0x38a23e[0x0][_0x55ad2d(0x156)]==_0x55ad2d(0x15a))var _0x26da78=users['German'];else{if(_0x38a23e[0x0][_0x55ad2d(0x156)]==_0x55ad2d(0xfc))var _0x26da78=users[_0x55ad2d(0xfc)];else{if(_0x38a23e[0x0][_0x55ad2d(0x156)]==_0x55ad2d(0xfd))var _0x26da78=users[_0x55ad2d(0xfd)];else{if(_0x38a23e[0x0][_0x55ad2d(0x156)]=='Portuguese\x20(BR)')var _0x26da78=users[_0x55ad2d(0xdc)];else{if(_0x38a23e[0x0]['language']==_0x55ad2d(0xe2))var _0x26da78=users[_0x55ad2d(0xe2)];else{if(_0x38a23e[0x0][_0x55ad2d(0x156)]==_0x55ad2d(0x173))var _0x26da78=users['Arabic'];}}}}}}}_0x48404d[_0x55ad2d(0x121)](_0x55ad2d(0xcc),{'success':_0x2dbb8e[_0x55ad2d(0x132)](_0x55ad2d(0x141)),'errors':_0x2dbb8e[_0x55ad2d(0x132)](_0x55ad2d(0x15c)),'role':_0x4ea67d,'profile':_0x4b88c7,'alldata':_0x257a47,'master_shop':_0x38a23e,'language':_0x26da78});}catch(_0x377406){console[_0x55ad2d(0xcb)](_0x377406);}}),router[a0_0x1f85da(0x10d)](a0_0x1f85da(0x133),auth,async(_0x296629,_0x56f479)=>{const _0x211417=a0_0x1f85da;try{const _0x4573e4=new excelJS['Workbook'](),_0x17aac1=_0x4573e4[_0x211417(0xc4)](_0x211417(0x13e));return _0x17aac1[_0x211417(0x114)]=[{'header':_0x211417(0x107),'key':_0x211417(0xe9),'width':0xa},{'header':'Brands','key':_0x211417(0x160),'width':0xa},{'header':_0x211417(0x149),'key':_0x211417(0xf3),'width':0xa},{'header':_0x211417(0x142),'key':'PSecondaryUnits','width':0xa},{'header':_0x211417(0x154),'key':'MaxperUnits','width':0xa},{'header':_0x211417(0x124),'key':_0x211417(0x165),'width':0xa},{'header':_0x211417(0x16b),'key':'ProductCode','width':0xa},{'header':'Product_Code','key':_0x211417(0x165),'width':0xa},{'header':_0x211417(0xbc),'key':_0x211417(0xd2),'width':0xa},{'header':_0x211417(0x12c),'key':_0x211417(0x101),'width':0xa},{'header':'Maximum_Stocks','key':_0x211417(0x101),'width':0xa},{'header':_0x211417(0x17e),'key':_0x211417(0x125),'width':0xa}],_0x56f479['setHeader'](_0x211417(0x11f),_0x211417(0x176)),_0x56f479['setHeader'](_0x211417(0xea),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x4573e4[_0x211417(0x169)][_0x211417(0xca)](_0x56f479)[_0x211417(0x10e)](()=>{_0x56f479['status'](0xc8);});}catch(_0x53615b){_0x56f479[_0x211417(0x12e)](0x190)[_0x211417(0xd6)](_0x53615b);}});function a0_0x5da8(){const _0x3b6ea2=['body','warehouse','$product_name','product_barcode_products','2231370wWWQGd','categories_edit','24MtMTvK','Content-Type','/brands/delete/:id','render','/products/categories','SheetNames','Primary_Code','Prod_Cat','brand\x20data\x20delete\x20successfully','133197MAjfLm','unit','categories','unit\x20data\x20update\x20successfully','/categories','Alert_QTY','map','status','\x20categories\x20is\x20add\x20successfully','product\x20update\x20successfully','brand','flash','/products_export_migrate_file','findByIdAndUpdate','Portuguese\x20(BR)','../middleware/auth','/view/add_products','single','findById','width','40cXchax','\x20unit\x20is\x20add\x20successfully','add_product','Products','readFile','/barcode_filter','success','Secondary_Units','public/Migration/','findOne','express','/products/brands','/brands/:id','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Units','$product_details.product_stock','message','params','Products\x20find_data','$product_details','Brands','$brand','467556PoDXVB','brand\x20data\x20update\x20successfully','public/upload','max_number_per_units','long','language','$secondary_unit','filename','image','German','name','errors','user','$product_category','/barcode/:id','PBrands','barcode\x20Product\x20master','public/Migration','bind','1166635xxFBiD','ProductCode','save','Product_Code','product_details.product_name','xlsx','336854Wrhnyc','Secondary_Code','/products/units','/barcode_data','forEach','/filter_product','categories\x20data\x20delete\x20successfully','type_products','/view','Arabic\x20(ae)','$category','maxProdPerUnit','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','10021814TxeJOQ','edit\x20Product\x20master','redirect','/products/view','post','category','json','Products_category','Category','$product_docs','\x20added\x20successfully','/view/:id','English\x20(US)','Enabled','concat','alertquantity','addWorksheet','\x20brand\x20is\x20add\x20successfully','originalname','utils','Hindi','file','write','log','product_barcode','product_code','secondary_unit','\x20<>\x20','products','/units/:id','PCat','migrate_product_fule','9oFpigg','Maximum_Stocks','send','primary_code','express/lib/response','addPage','canvas','barcode\x20user_id','Portuguese','English','height','master','sales_category','find','Chinese','product_stock','findByIdAndDelete','stock','Raw\x20Materials','/products_import_migrate_file','end','PName','Content-Disposition','defaultProduct.avif','base64','secondary_code','units','../public/language/languages.json','edit_product','brands','Products\x20master','PUnits','product_category','length','unit\x20data\x20delete\x20successfully','aggregate','data','toString','/units','diskStorage','Spanish','French','/select_data','categ','push','PAlQty','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','457177xLBQRB','\x20Edit\x20Successfully','now','$_id','Product_Name','4knQRZP','CODE128','Sheets','Arabic','sheet_to_json','get','then','maxStocks','toBuffer','Finished\x20Goods','min','sku','columns','$product_stock','Products\x20warehouse_data','email'];a0_0x5da8=function(){return _0x3b6ea2;};return a0_0x5da8();}const storage1=multer[a0_0x1f85da(0xfb)]({'destination':(_0x21e1d9,_0x5e21f6,_0x367a5c)=>{const _0x521da5=a0_0x1f85da;_0x367a5c(null,_0x521da5(0x162));},'filename':(_0x2834c1,_0x15b8c5,_0x3c7949)=>{const _0x5d8f28=a0_0x1f85da;_0x3c7949(null,Date[_0x5d8f28(0x105)]()+_0x15b8c5[_0x5d8f28(0xc6)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x1f85da(0x17b)](a0_0x1f85da(0xe7),auth,uploadMigrate[a0_0x1f85da(0x138)](a0_0x1f85da(0xd3)),async(_0x22120a,_0x47a7b4)=>{const _0x510d98=a0_0x1f85da,_0x37b07e=_0x22120a[_0x510d98(0xc9)]['filename'],_0x118496=await xlsx[_0x510d98(0x13f)](_0x510d98(0x143)+_0x37b07e);let _0x4f9871=_0x118496[_0x510d98(0x123)],_0x36a651=xlsx[_0x510d98(0xc7)][_0x510d98(0x10c)](_0x118496[_0x510d98(0x10a)][_0x4f9871[0x0]]);for(const _0x1f746a of _0x36a651){const _0x47b1bf=_0x1f746a[_0x510d98(0x107)],_0x42cecb=_0x1f746a[_0x510d98(0x14f)],_0x57938c=_0x1f746a[_0x510d98(0x149)],_0x46c82f=_0x1f746a['Secondary_Units'],_0x23fd6b=_0x1f746a[_0x510d98(0x167)],_0x59adc3=_0x1f746a['Category'],_0x187d30=_0x1f746a[_0x510d98(0x12c)],_0x4d70ce=_0x1f746a[_0x510d98(0x124)],_0x4acd9d=_0x1f746a[_0x510d98(0x16b)],_0x5e653e=_0x1f746a[_0x510d98(0xd5)],_0x2f4965=_0x1f746a[_0x510d98(0x154)],_0x2fe575=_0x1f746a[_0x510d98(0x17e)];try{let _0x445ca7=await categories[_0x510d98(0x144)]({'name':_0x59adc3});if(!_0x445ca7){const _0x97d38a=new categories({'name':_0x59adc3,'products':'0'});_0x445ca7=await _0x97d38a[_0x510d98(0x166)]();}let _0x3f2eba=await brands['findOne']({'name':_0x42cecb});if(!_0x3f2eba){const _0x285b40=new brands({'name':_0x42cecb,'products':'0'});_0x3f2eba=await _0x285b40[_0x510d98(0x166)]();}let _0x31a5e8=await units[_0x510d98(0x144)]({'name':_0x57938c,'secondary_unit':_0x46c82f});if(!_0x31a5e8){const _0x39c2f8=new units({'name':_0x57938c,'secondary_unit':_0x46c82f,'products':'0'});_0x31a5e8=await _0x39c2f8['save']();}const _0x548dc8=await product[_0x510d98(0xe1)]({'name':_0x47b1bf,'category':_0x445ca7[_0x510d98(0x15b)],'brand':_0x3f2eba[_0x510d98(0x15b)],'secondary_unit':_0x31a5e8[_0x510d98(0xce)],'product_code':_0x23fd6b});console[_0x510d98(0xcb)](_0x548dc8[_0x510d98(0xf5)]+_0x510d98(0xcf)+_0x445ca7[_0x510d98(0x15b)]+'\x20<>\x20'+_0x3f2eba[_0x510d98(0x15b)]+_0x510d98(0xcf)+_0x31a5e8['secondary_unit']+_0x510d98(0xcf)+_0x23fd6b+_0x510d98(0xcf)+_0x47b1bf);if(_0x548dc8[_0x510d98(0xf5)]===0x0){const _0x1406e4=new product({'image':'defaultProduct.avif','name':_0x47b1bf,'category':_0x445ca7[_0x510d98(0x15b)],'brand':_0x3f2eba[_0x510d98(0x15b)],'unit':_0x31a5e8[_0x510d98(0x15b)],'alertquantity':_0x187d30,'product_code':_0x23fd6b,'secondary_unit':_0x31a5e8[_0x510d98(0xce)],'primary_code':_0x4d70ce,'secondary_code':_0x4acd9d,'maxStocks':_0x5e653e,'maxProdPerUnit':_0x2f4965,'product_category':_0x2fe575}),_0x4fe1b6=await _0x1406e4['save']();_0x445ca7[_0x510d98(0xd0)]=parseInt(_0x445ca7[_0x510d98(0xd0)])+0x1,await _0x445ca7[_0x510d98(0x166)](),_0x3f2eba[_0x510d98(0xd0)]=parseInt(_0x3f2eba[_0x510d98(0xd0)])+0x1,await _0x3f2eba[_0x510d98(0x166)](),_0x31a5e8[_0x510d98(0xd0)]=parseInt(_0x31a5e8[_0x510d98(0xd0)])+0x1,await _0x31a5e8[_0x510d98(0x166)](),_0x22120a[_0x510d98(0x132)](_0x510d98(0x141),_0x47b1bf+_0x510d98(0xbe));}else{console['log'](_0x548dc8[0x0]);const _0x154e96=_0x548dc8[0x0];_0x154e96[_0x510d98(0x17c)]=_0x445ca7['name'],_0x154e96[_0x510d98(0x131)]=_0x3f2eba[_0x510d98(0x15b)],_0x154e96[_0x510d98(0x128)]=_0x31a5e8[_0x510d98(0x15b)],_0x154e96['alertquantity']=_0x187d30,_0x154e96[_0x510d98(0xcd)]=_0x23fd6b,_0x154e96[_0x510d98(0xce)]=_0x31a5e8[_0x510d98(0xce)],_0x154e96[_0x510d98(0xd7)]=_0x4d70ce,_0x154e96[_0x510d98(0xed)]=_0x4acd9d,_0x154e96[_0x510d98(0x10f)]=_0x5e653e,_0x154e96[_0x510d98(0x175)]=_0x2f4965,_0x154e96['product_category']=_0x2fe575;const _0x5119ba=await _0x154e96[_0x510d98(0x166)]();_0x22120a[_0x510d98(0x132)](_0x510d98(0x141),_0x5119ba[_0x510d98(0x15b)]+_0x510d98(0x104));}}catch(_0x4ce4fe){_0x47a7b4['status'](0x1f4)['json']({'proderror':_0x4ce4fe[_0x510d98(0x14b)],'aproduct':_0x47b1bf});}}_0x47a7b4['redirect'](_0x510d98(0x17a));}),router[a0_0x1f85da(0x17b)](a0_0x1f85da(0xfe),auth,async(_0x149940,_0x286cf7)=>{const _0x2a2922=a0_0x1f85da;try{console[_0x2a2922(0xcb)](_0x149940['body']);const {data_cateory:_0x3a2f7f,datachoose:_0x4096e1}=_0x149940[_0x2a2922(0x118)];var _0x35609a;if(_0x4096e1=='prod_categ')_0x35609a=await product[_0x2a2922(0xf7)]([{'$group':{'_id':_0x2a2922(0x15e)}}]);else{if(_0x4096e1==_0x2a2922(0xf1))_0x35609a=await product[_0x2a2922(0xf7)]([{'$match':{'product_category':_0x3a2f7f}},{'$group':{'_id':_0x2a2922(0x150)}}]);else _0x4096e1==_0x2a2922(0xff)&&(_0x35609a=await product[_0x2a2922(0xf7)]([{'$match':{'product_category':_0x3a2f7f}},{'$group':{'_id':_0x2a2922(0x174)}}]));}_0x286cf7[_0x2a2922(0x17d)](_0x35609a);}catch(_0x178990){_0x286cf7[_0x2a2922(0x17d)]({'message':_0x178990[_0x2a2922(0x14b)]});}}),router[a0_0x1f85da(0x17b)](a0_0x1f85da(0x16f),auth,async(_0xa639b9,_0x49be9d)=>{const _0x236e1d=a0_0x1f85da;try{const {data_choosing:_0x287742,data_selected:_0x4c3bf0}=_0xa639b9[_0x236e1d(0x118)];var _0x1ba1a7;if(_0x287742=='prod_categ')_0x1ba1a7=await product[_0x236e1d(0xf7)]([{'$match':{'product_category':_0x4c3bf0}}]);else{if(_0x287742==_0x236e1d(0xf1))_0x1ba1a7=await product[_0x236e1d(0xf7)]([{'$match':{'brand':_0x4c3bf0}}]);else _0x287742==_0x236e1d(0xff)&&(_0x1ba1a7=await product[_0x236e1d(0xf7)]([{'$match':{'category':_0x4c3bf0}}]));}_0x49be9d[_0x236e1d(0x17d)](_0x1ba1a7);}catch(_0x445dda){_0x49be9d[_0x236e1d(0x17d)]({'message':_0x445dda[_0x236e1d(0x14b)]});}}),router[a0_0x1f85da(0x10d)]('/print_barcode',auth,async(_0x43f7be,_0x2bc857)=>{const _0x462d33=a0_0x1f85da,_0x88919e=_0x43f7be[_0x462d33(0x15d)],_0x5501bf=await profile[_0x462d33(0x144)]({'email':_0x88919e['email']}),_0x74b62d=await master_shop[_0x462d33(0xe1)](),_0x5136d6=await product[_0x462d33(0xe1)]();if(_0x74b62d[0x0][_0x462d33(0x156)]==_0x462d33(0xc0))var _0x502a08=users[_0x462d33(0xdd)];else{if(_0x74b62d[0x0][_0x462d33(0x156)]==_0x462d33(0xc8))var _0x502a08=users[_0x462d33(0xc8)];else{if(_0x74b62d[0x0][_0x462d33(0x156)]==_0x462d33(0x15a))var _0x502a08=users[_0x462d33(0x15a)];else{if(_0x74b62d[0x0]['language']==_0x462d33(0xfc))var _0x502a08=users['Spanish'];else{if(_0x74b62d[0x0][_0x462d33(0x156)]=='French')var _0x502a08=users[_0x462d33(0xfd)];else{if(_0x74b62d[0x0][_0x462d33(0x156)]==_0x462d33(0x135))var _0x502a08=users[_0x462d33(0xdc)];else{if(_0x74b62d[0x0][_0x462d33(0x156)]==_0x462d33(0xe2))var _0x502a08=users[_0x462d33(0xe2)];else{if(_0x74b62d[0x0][_0x462d33(0x156)]==_0x462d33(0x173))var _0x502a08=users[_0x462d33(0x10b)];}}}}}}}_0x2bc857[_0x462d33(0x121)](_0x462d33(0x11b),{'success':_0x43f7be[_0x462d33(0x132)](_0x462d33(0x141)),'errors':_0x43f7be[_0x462d33(0x132)](_0x462d33(0x15c)),'role':_0x88919e,'profile':_0x5501bf,'products':_0x5136d6,'master_shop':_0x74b62d,'language':_0x502a08});}),router[a0_0x1f85da(0x17b)](a0_0x1f85da(0x16d),auth,async(_0x1743d4,_0x4011ac)=>{const _0xc46243=a0_0x1f85da,_0x48ee16=await product['find']();_0x4011ac[_0xc46243(0x17d)]({'data':_0x48ee16});}),router[a0_0x1f85da(0x17b)](a0_0x1f85da(0x140),auth,async(_0x12a3a8,_0x2c0799)=>{const _0x3dcec8=a0_0x1f85da;try{const {dataProdCat:_0x2896b4,dataProdIdentity:_0x459dd6}=_0x12a3a8['body'];var _0xc439db;switch(_0x2896b4){case'fg':switch(_0x459dd6){case _0x3dcec8(0x14f):_0xc439db=await product[_0x3dcec8(0xf7)]([{'$match':{'product_category':_0x3dcec8(0x111)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x3dcec8(0x106)}}]);break;case'Category':_0xc439db=await product[_0x3dcec8(0xf7)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x3dcec8(0x106)}}]);break;}break;case'rm':switch(_0x459dd6){case _0x3dcec8(0x14f):_0xc439db=await product[_0x3dcec8(0xf7)]([{'$match':{'product_category':_0x3dcec8(0xe6)}},{'$group':{'_id':_0x3dcec8(0x150)}},{'$project':{'brand':'$_id'}}]);break;case _0x3dcec8(0xbc):_0xc439db=await product['aggregate']([{'$match':{'product_category':_0x3dcec8(0xe6)}},{'$group':{'_id':_0x3dcec8(0x174)}},{'$project':{'category':_0x3dcec8(0x106)}}]);break;}break;}_0x2c0799['json'](_0xc439db);}catch(_0x1d6b90){_0x2c0799['json']({'message':_0x1d6b90['message']});}}),router[a0_0x1f85da(0x17b)]('/print_barcode_filter/',auth,async(_0x164f7e,_0x3ee84c)=>{const _0x3f36f7=a0_0x1f85da;try{console[_0x3f36f7(0xcb)](_0x164f7e[_0x3f36f7(0x118)]);const {prod_cat:_0x3728e2,identity:_0x511860,valueData:_0x37d634,typeofbarcode:_0x3d1c8a}=_0x164f7e[_0x3f36f7(0x118)];let _0x459362;switch(_0x3728e2){case'fg':if(_0x511860==_0x3f36f7(0x14f))_0x459362=await product[_0x3f36f7(0xf7)]([{'$match':{'product_category':_0x3f36f7(0x111),'brand':_0x37d634}}]);else _0x511860==_0x3f36f7(0xbc)&&(_0x459362=await product['aggregate']([{'$match':{'product_category':_0x3f36f7(0x111),'category':_0x37d634}}]));break;case'rm':if(_0x511860==_0x3f36f7(0x14f))_0x459362=await product[_0x3f36f7(0xf7)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x37d634}}]);else _0x511860==_0x3f36f7(0xbc)&&(_0x459362=await product[_0x3f36f7(0xf7)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x37d634}}]));break;}const _0x43bde5=_0x13fe29=>_0x13fe29*0x48,_0x27bab3={'width':0x3,'height':0x1},_0x5bfbad=new PDFDocument({'margin':_0x43bde5(0.75),'size':[_0x43bde5(_0x27bab3['width']),_0x43bde5(_0x27bab3[_0x3f36f7(0xde)])],'bufferPages':!![]}),_0x11c05b=_0x459362[_0x3f36f7(0xf5)];for(let _0x14277a=0x0;_0x14277a<=_0x11c05b;_0x14277a++){if(_0x14277a!=_0x11c05b){const _0x16d830=_0x459362[_0x14277a]['name'],_0x21400b=_0x459362[_0x14277a][_0x3f36f7(0xd7)],_0x56bfcf=_0x459362[_0x14277a][_0x3f36f7(0xed)],_0x3f34b2=_0x459362[_0x14277a][_0x3f36f7(0xcd)];var _0x3894b6;switch(_0x3d1c8a){case'1':_0x3894b6=_0x21400b;break;case'2':_0x3894b6=_0x56bfcf;break;case'3':_0x3894b6=_0x3f34b2;break;}const _0x2ff51f={'width':0xd2,'height':0x64},_0x2e8ceb={'width':_0x43bde5(_0x27bab3['width']),'height':_0x43bde5(_0x27bab3['height'])},_0x23d5e9=new Canvas();JsBarcode(_0x23d5e9,_0x3894b6,{'format':_0x3f36f7(0x109),'height':_0x2ff51f['height'],'displayValue':!![],'text':_0x3894b6});const _0x56a6ed=_0x23d5e9[_0x3f36f7(0x110)](),_0x8e747a=_0x2e8ceb[_0x3f36f7(0x13a)]/_0x2ff51f[_0x3f36f7(0x13a)],_0x11c571=_0x2e8ceb[_0x3f36f7(0xde)]/_0x2ff51f[_0x3f36f7(0xde)],_0xce2d44=Math[_0x3f36f7(0x112)](_0x8e747a,_0x11c571),_0xc483fc=_0x2ff51f[_0x3f36f7(0x13a)]*_0xce2d44,_0x3b469c=_0x2ff51f[_0x3f36f7(0xde)]*_0xce2d44,_0x161710=(_0x2e8ceb['width']-_0xc483fc)/0x2,_0x5c6b6e=(_0x2e8ceb[_0x3f36f7(0xde)]-_0x3b469c)/0x2;_0x5bfbad[_0x3f36f7(0x159)](_0x56a6ed,_0x161710,_0x5c6b6e,{'width':_0xc483fc,'height':_0x3b469c}),_0x14277a!=_0x11c05b&&_0x5bfbad[_0x3f36f7(0xd9)]();}}const _0x583770=[];_0x5bfbad['on'](_0x3f36f7(0xf8),_0x583770[_0x3f36f7(0x100)][_0x3f36f7(0x163)](_0x583770)),_0x5bfbad['on'](_0x3f36f7(0xe8),()=>{const _0x8da1cb=_0x3f36f7,_0x1184cf=Buffer[_0x8da1cb(0xc2)](_0x583770),_0x4035b2=_0x1184cf[_0x8da1cb(0xf9)](_0x8da1cb(0xec));_0x3ee84c[_0x8da1cb(0x17d)]({'pdfContent':_0x4035b2});}),_0x5bfbad[_0x3f36f7(0xe8)]();}catch(_0x1bdbab){_0x3ee84c['json']({'message':_0x1bdbab[_0x3f36f7(0x14b)]});}}),router[a0_0x1f85da(0x17b)]('/print_barcode_filter_search/',auth,async(_0x196575,_0x1a9e88)=>{const _0x2ad229=a0_0x1f85da;try{console[_0x2ad229(0xcb)](_0x196575[_0x2ad229(0x118)]);const {prod_cat:_0x1ce10f,identity:_0x4f267d,valueData:_0x2d6104}=_0x196575['body'];let _0x5b65e1;switch(_0x1ce10f){case'fg':if(_0x4f267d==_0x2ad229(0x14f))_0x5b65e1=await product[_0x2ad229(0xf7)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x2d6104}}]);else _0x4f267d==_0x2ad229(0xbc)&&(_0x5b65e1=await product['aggregate']([{'$match':{'product_category':_0x2ad229(0x111),'category':_0x2d6104}}]));break;case'rm':if(_0x4f267d=='Brands')_0x5b65e1=await product[_0x2ad229(0xf7)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x2d6104}}]);else _0x4f267d==_0x2ad229(0xbc)&&(_0x5b65e1=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0x2d6104}}]));break;}_0x1a9e88[_0x2ad229(0x17d)]({'data':_0x5b65e1});}catch(_0x2aeea1){_0x1a9e88['json']({'message':_0x2aeea1['message']});}}),router['post']('/print_barcode_single/:id',auth,async(_0x341529,_0x37f6b3)=>{const _0x1c6f48=a0_0x1f85da;try{const _0x43a525=_0x341529['params']['id'],{copies:_0x3d859e,typeofbarcode:_0x2f7541}=_0x341529[_0x1c6f48(0x118)];var _0x442645=await product[_0x1c6f48(0x139)](_0x43a525);const _0x50237a=_0x3de0cd=>_0x3de0cd*0x48,_0x4dfcf5={'width':0x3,'height':0x1},_0x1698a4=new PDFDocument({'margin':_0x50237a(0.75),'size':[_0x50237a(_0x4dfcf5[_0x1c6f48(0x13a)]),_0x50237a(_0x4dfcf5[_0x1c6f48(0xde)])],'bufferPages':!![]}),_0x3da1dd=_0x3d859e,_0x10021d=_0x442645[_0x1c6f48(0x15b)],_0x17beb8=_0x442645[_0x1c6f48(0xd7)],_0x45e6e2=_0x442645['secondary_code'],_0x375b11=_0x442645[_0x1c6f48(0xcd)];let _0x2e11ff;switch(_0x2f7541){case'1':_0x2e11ff=_0x17beb8;break;case'2':_0x2e11ff=_0x45e6e2;break;case'3':_0x2e11ff=_0x375b11;break;}const _0x3eea60={'width':0xd2,'height':0x64},_0x587401={'width':_0x50237a(_0x4dfcf5['width']),'height':_0x50237a(_0x4dfcf5[_0x1c6f48(0xde)])};for(let _0x4744fe=0x1;_0x4744fe<=_0x3da1dd;_0x4744fe++){const _0x3d0a36=new Canvas();JsBarcode(_0x3d0a36,_0x2e11ff,{'format':_0x1c6f48(0x109),'height':_0x3eea60['height'],'displayValue':!![],'text':_0x2e11ff});const _0x22097f=_0x3d0a36[_0x1c6f48(0x110)](),_0x14195b=_0x587401['width']/_0x3eea60['width'],_0x31d6d7=_0x587401[_0x1c6f48(0xde)]/_0x3eea60['height'],_0x46716f=Math['min'](_0x14195b,_0x31d6d7),_0x579a11=_0x3eea60[_0x1c6f48(0x13a)]*_0x46716f,_0x4fb41a=_0x3eea60[_0x1c6f48(0xde)]*_0x46716f,_0x514b23=(_0x587401[_0x1c6f48(0x13a)]-_0x579a11)/0x2,_0x4173d4=(_0x587401[_0x1c6f48(0xde)]-_0x4fb41a)/0x2;_0x1698a4['image'](_0x22097f,_0x514b23,_0x4173d4,{'width':_0x579a11,'height':_0x4fb41a}),_0x4744fe!=_0x3da1dd&&_0x1698a4[_0x1c6f48(0xd9)]();}const _0x4de641=[];_0x1698a4['on']('data',_0x4de641[_0x1c6f48(0x100)][_0x1c6f48(0x163)](_0x4de641)),_0x1698a4['on'](_0x1c6f48(0xe8),()=>{const _0x2381b1=_0x1c6f48,_0x310539=Buffer[_0x2381b1(0xc2)](_0x4de641),_0x582685=_0x310539['toString'](_0x2381b1(0xec));_0x37f6b3[_0x2381b1(0x17d)]({'pdfContent':_0x582685});}),_0x1698a4['end']();}catch(_0x491cd5){_0x37f6b3[_0x1c6f48(0x17d)]({'message':_0x491cd5[_0x1c6f48(0x14b)]});}}),module['exports']=router;