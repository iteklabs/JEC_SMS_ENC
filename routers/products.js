function a0_0x4328(){const _0xb31983=['\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Arabic','/print_barcode','/barcode/:id','public/Migration/','flash','Products\x20find_data','setHeader','product\x20add\x20successfully','2153215QAVmgM','CODE128','Brands','unit\x20data\x20update\x20successfully','brands','$_id','\x20Edit\x20Successfully','/view/add_products','type_products','Alert_QTY','send','maxProdPerUnit','/units/delete/:id','readFile','public/Migration','Finished\x20Goods','end','units','utils','Content-Type','product_barcode_products','Enabled','2632239EHnMEC','alertquantity','filename','sheet_to_json','categ','1239VOkVGf','find','errors','product_category','/brands/:id','/categories/:id','toBuffer','Arabic\x20(ae)','/products_import_migrate_file','PBrands','$product_details.product_name','migrate_product_fule','email','primary_code','findByIdAndDelete','Workbook','/units/:id','originalname','MaxperUnits','body','user','log','Portuguese\x20(BR)','/categories','Chinese','800932OgMXfq','\x20<>\x20','max_number_per_units','/products/brands','secondary_unit','/barcode_filter','Products\x20warehouse_data','Content-Disposition','single','findByIdAndUpdate','$brand','Raw\x20Materials','SheetNames','/units','/products/units','map','../middleware/auth','category','/products_export_migrate_file','unit','Secondary_Code','Portuguese','French','barcode\x20Product\x20master','Router','length','file','long','redirect','categories_edit','../public/language/languages.json','4878tMJLhM','/brands','1854112MTbHve','Units','data','brand','bind','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','attachment;\x20filename=Product_Migration_File.xlsx','Product_Code','post','save','categories','product\x20edit','$product_docs','public/upload','$product_details','then','Product_Name','concat','German','image','English\x20(US)','maxStocks','xlsx','aggregate','addPage','min','/products/categories','$category','$secondary_unit','Products\x20master','product\x20update\x20successfully','numeric','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','33XONHbc','categories\x20data\x20delete\x20successfully','Primary_Code','height','Category','addWorksheet','products','Products','Sheets','ProductCode','product_stock','name','/print_barcode_filter_search/','/view/:id','language','Hindi','json','columns','English','edit_product','multer','defaultProduct.avif','width','diskStorage','exceljs','PCat','/view','render','base64','/select_data','product_code','../models/all_models','Spanish','params','message','edit\x20Product\x20master','/products/view','findOne','135508dFNjSL','/categories/delete/:id','push','Maximum_Stocks','success','Products_category','unit\x20data\x20delete\x20successfully','PName','PAlQty','507159zCUWyr','findById','/print_barcode_filter/','express/lib/response','prod_categ','$product_name','secondary_code','/brands/delete/:id','master','product_barcode','\x20unit\x20is\x20add\x20successfully','product_details.product_name','toString','get','now','Secondary_Units','\x20categories\x20is\x20add\x20successfully','exports'];a0_0x4328=function(){return _0xb31983;};return a0_0x4328();}function a0_0x5258(_0x4bda0a,_0x51c3bf){const _0x4328b0=a0_0x4328();return a0_0x5258=function(_0x5258a0,_0x7f5f7a){_0x5258a0=_0x5258a0-0x9e;let _0x5c062c=_0x4328b0[_0x5258a0];return _0x5c062c;},a0_0x5258(_0x4bda0a,_0x51c3bf);}const a0_0x2df1e2=a0_0x5258;(function(_0x4f2bdf,_0x10e5cc){const _0x1985d6=a0_0x5258,_0x362752=_0x4f2bdf();while(!![]){try{const _0x1ddc8d=-parseInt(_0x1985d6(0x140))/0x1+-parseInt(_0x1985d6(0xcf))/0x2+-parseInt(_0x1985d6(0x111))/0x3*(-parseInt(_0x1985d6(0x137))/0x4)+parseInt(_0x1985d6(0x15b))/0x5+parseInt(_0x1985d6(0xee))/0x6*(-parseInt(_0x1985d6(0xb6))/0x7)+parseInt(_0x1985d6(0xf0))/0x8+parseInt(_0x1985d6(0xb1))/0x9;if(_0x1ddc8d===_0x10e5cc)break;else _0x362752['push'](_0x362752['shift']());}catch(_0x49e2b6){_0x362752['push'](_0x362752['shift']());}}}(a0_0x4328,0x4361f));const express=require('express'),res=require(a0_0x2df1e2(0x143)),app=express(),router=express[a0_0x2df1e2(0xe7)](),multer=require(a0_0x2df1e2(0x125)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x2df1e2(0x130)),auth=require(a0_0x2df1e2(0xdf)),users=require(a0_0x2df1e2(0xed)),excelJS=require(a0_0x2df1e2(0x129)),xlsx=require(a0_0x2df1e2(0x106)),JsBarcode=require('jsbarcode'),{Canvas}=require('canvas'),PDFDocument=require('pdfkit-table');router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0xcd),auth,async(_0x397cd8,_0x2c463d)=>{const _0x5117d0=a0_0x2df1e2;try{const {username:_0x384a78,email:_0x1ab556,role:_0x56dc82}=_0x397cd8['user'],_0x59dcd8=_0x397cd8[_0x5117d0(0xca)],_0x54b303=await profile[_0x5117d0(0x136)]({'email':_0x59dcd8[_0x5117d0(0xc2)]}),_0x3ad392=await master_shop[_0x5117d0(0xb7)]();console['log']('master',_0x3ad392);const _0x177bbc=await categories['find']();if(_0x3ad392[0x0][_0x5117d0(0x11f)]=='English\x20(US)')var _0x5da157=users[_0x5117d0(0x123)];else{if(_0x3ad392[0x0]['language']=='Hindi')var _0x5da157=users[_0x5117d0(0x120)];else{if(_0x3ad392[0x0][_0x5117d0(0x11f)]==_0x5117d0(0x102))var _0x5da157=users[_0x5117d0(0x102)];else{if(_0x3ad392[0x0]['language']==_0x5117d0(0x131))var _0x5da157=users[_0x5117d0(0x131)];else{if(_0x3ad392[0x0][_0x5117d0(0x11f)]==_0x5117d0(0xe5))var _0x5da157=users[_0x5117d0(0xe5)];else{if(_0x3ad392[0x0][_0x5117d0(0x11f)]==_0x5117d0(0xcc))var _0x5da157=users['Portuguese'];else{if(_0x3ad392[0x0]['language']==_0x5117d0(0xce))var _0x5da157=users[_0x5117d0(0xce)];else{if(_0x3ad392[0x0][_0x5117d0(0x11f)]==_0x5117d0(0xbd))var _0x5da157=users[_0x5117d0(0x153)];}}}}}}}_0x2c463d['render'](_0x5117d0(0xfa),{'success':_0x397cd8[_0x5117d0(0x157)](_0x5117d0(0x13b)),'errors':_0x397cd8[_0x5117d0(0x157)](_0x5117d0(0xb8)),'role':_0x59dcd8,'profile':_0x54b303,'user':_0x177bbc,'master_shop':_0x3ad392,'language':_0x5da157});}catch(_0x38672e){console[_0x5117d0(0xcb)](_0x38672e);}}),router[a0_0x2df1e2(0xf8)](a0_0x2df1e2(0xcd),auth,async(_0x5d753a,_0x4f45d7)=>{const _0x5ad770=a0_0x2df1e2;try{const {name:_0x1c194e,products:_0x22112c}=_0x5d753a[_0x5ad770(0xc9)],_0x6bd4b2=new categories({'name':_0x1c194e,'products':_0x22112c}),_0x575041=await categories[_0x5ad770(0x136)]({'name':_0x1c194e});_0x575041?_0x5d753a[_0x5ad770(0x157)]('errors',_0x1c194e+_0x5ad770(0x152)):_0x5d753a['flash'](_0x5ad770(0x13b),_0x1c194e+_0x5ad770(0x150));const _0x54208e=await _0x6bd4b2[_0x5ad770(0xf9)]();_0x4f45d7[_0x5ad770(0xeb)](_0x5ad770(0x10a));}catch(_0x3e5478){console['log'](_0x3e5478);}}),router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0xbb),auth,async(_0x4cca27,_0x4d901b)=>{const _0x409712=a0_0x2df1e2;try{const {username:_0x4ff392,email:_0x2c1359,role:_0x1bd84e}=_0x4cca27['user'],_0x2cb2d2=_0x4cca27[_0x409712(0xca)],_0x3626bf=await profile[_0x409712(0x136)]({'email':_0x2cb2d2['email']}),_0x48e5ea=await master_shop[_0x409712(0xb7)]();console['log'](_0x409712(0x148),_0x48e5ea);const _0xb564a3=_0x4cca27[_0x409712(0x132)]['id'];console[_0x409712(0xcb)](_0xb564a3);const _0x3f7901=await categories['findById'](_0xb564a3);if(_0x48e5ea[0x0]['language']==_0x409712(0x104))var _0xff1f82=users[_0x409712(0x123)];else{if(_0x48e5ea[0x0][_0x409712(0x11f)]=='Hindi')var _0xff1f82=users[_0x409712(0x120)];else{if(_0x48e5ea[0x0][_0x409712(0x11f)]==_0x409712(0x102))var _0xff1f82=users[_0x409712(0x102)];else{if(_0x48e5ea[0x0][_0x409712(0x11f)]==_0x409712(0x131))var _0xff1f82=users[_0x409712(0x131)];else{if(_0x48e5ea[0x0][_0x409712(0x11f)]==_0x409712(0xe5))var _0xff1f82=users[_0x409712(0xe5)];else{if(_0x48e5ea[0x0]['language']==_0x409712(0xcc))var _0xff1f82=users['Portuguese'];else{if(_0x48e5ea[0x0][_0x409712(0x11f)]=='Chinese')var _0xff1f82=users[_0x409712(0xce)];else{if(_0x48e5ea[0x0]['language']==_0x409712(0xbd))var _0xff1f82=users[_0x409712(0x153)];}}}}}}}_0x4d901b[_0x409712(0x12c)](_0x409712(0xfa),{'success':_0x4cca27[_0x409712(0x157)](_0x409712(0x13b)),'errors':_0x4cca27[_0x409712(0x157)]('errors'),'role':_0x2cb2d2,'profile':_0x3626bf,'master_shop':_0x48e5ea,'user':_0x3f7901,'language':_0xff1f82});}catch(_0x425063){console[_0x409712(0xcb)](_0x425063);}}),router[a0_0x2df1e2(0xf8)]('/categories/:id',auth,async(_0x48afb9,_0x13cea4)=>{const _0x2674ca=a0_0x2df1e2;try{const _0x4f42bb=_0x48afb9[_0x2674ca(0x132)]['id'],_0x633a94=await categories[_0x2674ca(0xd8)](_0x4f42bb,_0x48afb9[_0x2674ca(0xc9)]);_0x48afb9[_0x2674ca(0x157)](_0x2674ca(0x13b),''+users[_0x2674ca(0xec)]),_0x13cea4['redirect']('/products/categories');}catch(_0x551cef){console[_0x2674ca(0xcb)](_0x551cef);}}),router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0x138),auth,async(_0x10c522,_0x4bc64e)=>{const _0x3ae129=a0_0x2df1e2;try{const _0x55d1db=_0x10c522[_0x3ae129(0x132)]['id'],_0x450cad=await categories[_0x3ae129(0xc4)](_0x55d1db);_0x10c522[_0x3ae129(0x157)]('success',_0x3ae129(0x112)),_0x4bc64e[_0x3ae129(0xeb)](_0x3ae129(0x10a));}catch(_0x16c67f){console[_0x3ae129(0xcb)](_0x16c67f);}}),router['get'](a0_0x2df1e2(0xef),auth,async(_0x315f03,_0x11342e)=>{const _0xc236c6=a0_0x2df1e2;try{const {username:_0x416cf6,email:_0x18d299,role:_0xa038a4}=_0x315f03[_0xc236c6(0xca)],_0x275117=_0x315f03[_0xc236c6(0xca)],_0x35e4a9=await profile[_0xc236c6(0x136)]({'email':_0x275117[_0xc236c6(0xc2)]}),_0xed638f=await master_shop[_0xc236c6(0xb7)]();console['log'](_0xc236c6(0x148),_0xed638f);const _0x4dc274=await brands[_0xc236c6(0xb7)]();if(_0xed638f[0x0][_0xc236c6(0x11f)]==_0xc236c6(0x104))var _0x40a62d=users[_0xc236c6(0x123)];else{if(_0xed638f[0x0]['language']=='Hindi')var _0x40a62d=users['Hindi'];else{if(_0xed638f[0x0][_0xc236c6(0x11f)]==_0xc236c6(0x102))var _0x40a62d=users[_0xc236c6(0x102)];else{if(_0xed638f[0x0]['language']==_0xc236c6(0x131))var _0x40a62d=users[_0xc236c6(0x131)];else{if(_0xed638f[0x0]['language']==_0xc236c6(0xe5))var _0x40a62d=users[_0xc236c6(0xe5)];else{if(_0xed638f[0x0][_0xc236c6(0x11f)]==_0xc236c6(0xcc))var _0x40a62d=users[_0xc236c6(0xe4)];else{if(_0xed638f[0x0][_0xc236c6(0x11f)]==_0xc236c6(0xce))var _0x40a62d=users[_0xc236c6(0xce)];else{if(_0xed638f[0x0][_0xc236c6(0x11f)]==_0xc236c6(0xbd))var _0x40a62d=users[_0xc236c6(0x153)];}}}}}}}_0x11342e[_0xc236c6(0x12c)](_0xc236c6(0x9f),{'success':_0x315f03[_0xc236c6(0x157)]('success'),'errors':_0x315f03[_0xc236c6(0x157)](_0xc236c6(0xb8)),'role':_0x275117,'profile':_0x35e4a9,'master_shop':_0xed638f,'user':_0x4dc274,'language':_0x40a62d});}catch(_0x30f515){console[_0xc236c6(0xcb)](_0x30f515);}}),router[a0_0x2df1e2(0xf8)]('/brands',auth,async(_0x32ebf6,_0x38ba7a)=>{const _0x160fa3=a0_0x2df1e2;try{const {name:_0x53557d,products:_0x30d958}=_0x32ebf6[_0x160fa3(0xc9)],_0x22b058=new brands({'name':_0x53557d,'products':_0x30d958}),_0x1e3899=await brands[_0x160fa3(0x136)]({'name':_0x53557d});_0x1e3899?_0x32ebf6['flash'](_0x160fa3(0xb8),_0x53557d+_0x160fa3(0xf5)):_0x32ebf6['flash'](_0x160fa3(0x13b),_0x53557d+'\x20brand\x20is\x20add\x20successfully');const _0x4f8703=await _0x22b058['save']();_0x38ba7a[_0x160fa3(0xeb)](_0x160fa3(0xd2));}catch(_0x71bb75){console[_0x160fa3(0xcb)](_0x71bb75);}}),router[a0_0x2df1e2(0x14d)]('/brands/:id',auth,async(_0x27515f,_0xa3cae5)=>{const _0x103d7f=a0_0x2df1e2;try{const {username:_0x219dd3,email:_0x2085d5,role:_0x45304d}=_0x27515f[_0x103d7f(0xca)],_0x16cd11=_0x27515f[_0x103d7f(0xca)],_0xeb4842=await profile[_0x103d7f(0x136)]({'email':_0x16cd11[_0x103d7f(0xc2)]}),_0x183035=await master_shop['find']();console['log']('master',_0x183035);const _0xac809a=_0x27515f[_0x103d7f(0x132)]['id'];console[_0x103d7f(0xcb)](_0xac809a);const _0x37e3da=await brands['findById'](_0xac809a);if(_0x183035[0x0][_0x103d7f(0x11f)]==_0x103d7f(0x104))var _0x363861=users[_0x103d7f(0x123)];else{if(_0x183035[0x0][_0x103d7f(0x11f)]==_0x103d7f(0x120))var _0x363861=users['Hindi'];else{if(_0x183035[0x0]['language']==_0x103d7f(0x102))var _0x363861=users['German'];else{if(_0x183035[0x0][_0x103d7f(0x11f)]==_0x103d7f(0x131))var _0x363861=users[_0x103d7f(0x131)];else{if(_0x183035[0x0]['language']=='French')var _0x363861=users[_0x103d7f(0xe5)];else{if(_0x183035[0x0]['language']=='Portuguese\x20(BR)')var _0x363861=users[_0x103d7f(0xe4)];else{if(_0x183035[0x0]['language']==_0x103d7f(0xce))var _0x363861=users['Chinese'];else{if(_0x183035[0x0][_0x103d7f(0x11f)]==_0x103d7f(0xbd))var _0x363861=users[_0x103d7f(0x153)];}}}}}}}_0xa3cae5[_0x103d7f(0x12c)](_0x103d7f(0x9f),{'success':_0x27515f[_0x103d7f(0x157)](_0x103d7f(0x13b)),'errors':_0x27515f[_0x103d7f(0x157)](_0x103d7f(0xb8)),'role':_0x16cd11,'profile':_0xeb4842,'master_shop':_0x183035,'user':_0x37e3da,'language':_0x363861});}catch(_0x3409a3){console[_0x103d7f(0xcb)](_0x3409a3);}}),router[a0_0x2df1e2(0xf8)](a0_0x2df1e2(0xba),auth,async(_0x303873,_0x4e0bd0)=>{const _0x11f0bb=a0_0x2df1e2;try{const _0x2ed663=_0x303873[_0x11f0bb(0x132)]['id'],_0x87d828=await brands['findByIdAndUpdate'](_0x2ed663,_0x303873['body']);_0x303873[_0x11f0bb(0x157)](_0x11f0bb(0x13b),'brand\x20data\x20update\x20successfully'),_0x4e0bd0['redirect']('/products/brands');}catch(_0x1fe78b){console['log'](_0x1fe78b);}}),router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0x147),auth,async(_0x4ba05a,_0x37e1e3)=>{const _0xb8cebb=a0_0x2df1e2;try{const _0x5c6e88=_0x4ba05a[_0xb8cebb(0x132)]['id'],_0x148d8b=await brands[_0xb8cebb(0xc4)](_0x5c6e88);_0x4ba05a[_0xb8cebb(0x157)](_0xb8cebb(0x13b),'brand\x20data\x20delete\x20successfully'),_0x37e1e3['redirect'](_0xb8cebb(0xd2));}catch(_0x331c47){console[_0xb8cebb(0xcb)](_0x331c47);}}),router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0xdc),auth,async(_0x5bbf8c,_0xdf8831)=>{const _0x33a572=a0_0x2df1e2;try{const {username:_0x172ff3,email:_0x49c573,role:_0x52cc4a}=_0x5bbf8c[_0x33a572(0xca)],_0x8bcbc9=_0x5bbf8c[_0x33a572(0xca)],_0x1d5a85=await profile[_0x33a572(0x136)]({'email':_0x8bcbc9[_0x33a572(0xc2)]}),_0x42bfe9=await master_shop[_0x33a572(0xb7)]();console[_0x33a572(0xcb)](_0x33a572(0x148),_0x42bfe9);const _0x12d0a4=await units['find']();if(_0x42bfe9[0x0][_0x33a572(0x11f)]==_0x33a572(0x104))var _0x996ac8=users[_0x33a572(0x123)];else{if(_0x42bfe9[0x0][_0x33a572(0x11f)]==_0x33a572(0x120))var _0x996ac8=users[_0x33a572(0x120)];else{if(_0x42bfe9[0x0][_0x33a572(0x11f)]==_0x33a572(0x102))var _0x996ac8=users[_0x33a572(0x102)];else{if(_0x42bfe9[0x0]['language']==_0x33a572(0x131))var _0x996ac8=users[_0x33a572(0x131)];else{if(_0x42bfe9[0x0]['language']==_0x33a572(0xe5))var _0x996ac8=users['French'];else{if(_0x42bfe9[0x0][_0x33a572(0x11f)]==_0x33a572(0xcc))var _0x996ac8=users[_0x33a572(0xe4)];else{if(_0x42bfe9[0x0][_0x33a572(0x11f)]==_0x33a572(0xce))var _0x996ac8=users['Chinese'];else{if(_0x42bfe9[0x0][_0x33a572(0x11f)]=='Arabic\x20(ae)')var _0x996ac8=users['Arabic'];}}}}}}}_0xdf8831[_0x33a572(0x12c)](_0x33a572(0xac),{'success':_0x5bbf8c[_0x33a572(0x157)](_0x33a572(0x13b)),'errors':_0x5bbf8c['flash']('errors'),'role':_0x8bcbc9,'profile':_0x1d5a85,'master_shop':_0x42bfe9,'user':_0x12d0a4,'language':_0x996ac8});}catch(_0x444d82){console[_0x33a572(0xcb)](_0x444d82);}}),router[a0_0x2df1e2(0xf8)]('/units',auth,async(_0x340b7a,_0x45ed1a)=>{const _0x3fdbdb=a0_0x2df1e2;try{const {name:_0x2f2795,secondary_unit:_0x4d36ca,products:_0x154c8d}=_0x340b7a[_0x3fdbdb(0xc9)],_0x5939b3=new units({'name':_0x2f2795,'secondary_unit':_0x4d36ca,'products':_0x154c8d}),_0x34afdf=await units['findOne']({'name':_0x2f2795});_0x34afdf?_0x340b7a[_0x3fdbdb(0x157)](_0x3fdbdb(0xb8),_0x2f2795+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x340b7a[_0x3fdbdb(0x157)](_0x3fdbdb(0x13b),_0x2f2795+_0x3fdbdb(0x14a));const _0x17432b=await _0x5939b3['save']();_0x45ed1a[_0x3fdbdb(0xeb)](_0x3fdbdb(0xdd));}catch(_0x25dabc){console[_0x3fdbdb(0xcb)](_0x25dabc);}}),router[a0_0x2df1e2(0x14d)]('/units/:id',auth,async(_0x46219e,_0xe42f5b)=>{const _0x1cb31c=a0_0x2df1e2;try{const {username:_0x4e5573,email:_0x580892,role:_0x4e31f1}=_0x46219e[_0x1cb31c(0xca)],_0x166087=_0x46219e['user'],_0x50f93a=await profile[_0x1cb31c(0x136)]({'email':_0x166087[_0x1cb31c(0xc2)]}),_0x7c9f11=await master_shop['find']();console[_0x1cb31c(0xcb)]('master',_0x7c9f11);const _0x29aef8=_0x46219e[_0x1cb31c(0x132)]['id'],_0x33a395=await units['findById'](_0x29aef8);if(_0x7c9f11[0x0][_0x1cb31c(0x11f)]=='English\x20(US)')var _0x242831=users[_0x1cb31c(0x123)];else{if(_0x7c9f11[0x0]['language']==_0x1cb31c(0x120))var _0x242831=users[_0x1cb31c(0x120)];else{if(_0x7c9f11[0x0][_0x1cb31c(0x11f)]==_0x1cb31c(0x102))var _0x242831=users[_0x1cb31c(0x102)];else{if(_0x7c9f11[0x0][_0x1cb31c(0x11f)]=='Spanish')var _0x242831=users['Spanish'];else{if(_0x7c9f11[0x0][_0x1cb31c(0x11f)]==_0x1cb31c(0xe5))var _0x242831=users[_0x1cb31c(0xe5)];else{if(_0x7c9f11[0x0][_0x1cb31c(0x11f)]==_0x1cb31c(0xcc))var _0x242831=users[_0x1cb31c(0xe4)];else{if(_0x7c9f11[0x0][_0x1cb31c(0x11f)]==_0x1cb31c(0xce))var _0x242831=users['Chinese'];else{if(_0x7c9f11[0x0]['language']=='Arabic\x20(ae)')var _0x242831=users[_0x1cb31c(0x153)];}}}}}}}_0xe42f5b['render']('units',{'success':_0x46219e[_0x1cb31c(0x157)](_0x1cb31c(0x13b)),'errors':_0x46219e['flash'](_0x1cb31c(0xb8)),'role':_0x166087,'profile':_0x50f93a,'master_shop':_0x7c9f11,'user':_0x33a395,'language':_0x242831});}catch(_0x1580e1){console[_0x1cb31c(0xcb)](_0x1580e1);}}),router[a0_0x2df1e2(0xf8)](a0_0x2df1e2(0xc6),auth,async(_0x1b7de8,_0x13ca5c)=>{const _0xadbb19=a0_0x2df1e2;try{const _0x3c974d=_0x1b7de8[_0xadbb19(0x132)]['id'],_0x4089a6=await units[_0xadbb19(0xd8)](_0x3c974d,_0x1b7de8['body']);_0x1b7de8['flash']('success',_0xadbb19(0x9e)),_0x13ca5c[_0xadbb19(0xeb)](_0xadbb19(0xdd));}catch(_0x40233f){console[_0xadbb19(0xcb)](_0x40233f);}}),router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0xa7),auth,async(_0x4a3f76,_0x26bdf9)=>{const _0x5c23b5=a0_0x2df1e2;try{const _0x50cd69=_0x4a3f76[_0x5c23b5(0x132)]['id'],_0x4e5469=await units[_0x5c23b5(0xc4)](_0x50cd69);_0x4a3f76[_0x5c23b5(0x157)](_0x5c23b5(0x13b),_0x5c23b5(0x13d)),_0x26bdf9[_0x5c23b5(0xeb)](_0x5c23b5(0xdd));}catch(_0x3b1283){console[_0x5c23b5(0xcb)](_0x3b1283);}});const storage=multer[a0_0x2df1e2(0x128)]({'destination':(_0x31dca6,_0x321c56,_0x1d5e44)=>{const _0x315a10=a0_0x2df1e2;_0x1d5e44(null,_0x315a10(0xfd));},'filename':(_0x147111,_0x205779,_0x1677f0)=>{const _0x4b47ff=a0_0x2df1e2;_0x1677f0(null,Date['now']()+_0x205779[_0x4b47ff(0xc7)]);}}),upload=multer({'storage':storage});router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0x12b),auth,async(_0xcf46c,_0x576a17)=>{const _0x231725=a0_0x2df1e2;try{const {username:_0x1a1c26,email:_0x4d4de1,role:_0x317628}=_0xcf46c[_0x231725(0xca)],_0x4bb8df=_0xcf46c[_0x231725(0xca)],_0x5952ff=await profile[_0x231725(0x136)]({'email':_0x4bb8df[_0x231725(0xc2)]}),_0x310b45={'year':_0x231725(0x10f),'month':_0x231725(0xea),'day':'numeric'},_0x23fcd4=await master_shop['find']();console[_0x231725(0xcb)](_0x231725(0x10d),_0x23fcd4);const _0x2682d6=await product[_0x231725(0xb7)]();console['log'](_0x231725(0x158),_0x2682d6);const _0x281a47=await warehouse[_0x231725(0x107)]([{'$unwind':_0x231725(0xfe)},{'$lookup':{'from':_0x231725(0x117),'localField':_0x231725(0x14b),'foreignField':'name','as':'product_docs'}},{'$unwind':_0x231725(0xfc)},{'$project':{'product_name':_0x231725(0xc0),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x231725(0x145),'product_stock':{'$sum':'$product_stock'}}}]);console[_0x231725(0xcb)](_0x231725(0xd5),_0x281a47),_0x281a47['forEach'](_0x5f791f=>{const _0x4129ae=_0x231725,_0xad9635=_0x2682d6[_0x4129ae(0xde)](_0x1601f9=>{const _0x416bfc=_0x4129ae;_0x1601f9['name']==_0x5f791f['_id']&&(_0x1601f9['stock']=parseInt(_0x1601f9['stock'])+parseInt(_0x5f791f[_0x416bfc(0x11b)]));});}),console['log'](_0x231725(0x158),_0x2682d6);if(_0x23fcd4[0x0][_0x231725(0x11f)]==_0x231725(0x104))var _0x2eff1b=users['English'];else{if(_0x23fcd4[0x0][_0x231725(0x11f)]==_0x231725(0x120))var _0x2eff1b=users[_0x231725(0x120)];else{if(_0x23fcd4[0x0][_0x231725(0x11f)]==_0x231725(0x102))var _0x2eff1b=users[_0x231725(0x102)];else{if(_0x23fcd4[0x0][_0x231725(0x11f)]==_0x231725(0x131))var _0x2eff1b=users['Spanish'];else{if(_0x23fcd4[0x0][_0x231725(0x11f)]==_0x231725(0xe5))var _0x2eff1b=users[_0x231725(0xe5)];else{if(_0x23fcd4[0x0][_0x231725(0x11f)]==_0x231725(0xcc))var _0x2eff1b=users[_0x231725(0xe4)];else{if(_0x23fcd4[0x0]['language']=='Chinese')var _0x2eff1b=users['Chinese'];else{if(_0x23fcd4[0x0][_0x231725(0x11f)]==_0x231725(0xbd))var _0x2eff1b=users[_0x231725(0x153)];}}}}}}}_0x576a17[_0x231725(0x12c)](_0x231725(0x117),{'success':_0xcf46c[_0x231725(0x157)]('success'),'errors':_0xcf46c['flash'](_0x231725(0xb8)),'alldata':_0x2682d6,'profile':_0x5952ff,'master_shop':_0x23fcd4,'role':_0x4bb8df,'product_stock':_0x281a47,'language':_0x2eff1b});}catch(_0x5b89c7){console[_0x231725(0xcb)](_0x5b89c7);}}),router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0xa2),auth,async(_0x26f953,_0x5f1eb7)=>{const _0x48171f=a0_0x2df1e2;try{const {username:_0x338261,email:_0x1749fb,role:_0xcaa21}=_0x26f953[_0x48171f(0xca)],_0x5d4cc6=_0x26f953['user'],_0x16f154=await profile['findOne']({'email':_0x5d4cc6['email']}),_0xbddaeb=await master_shop[_0x48171f(0xb7)]();console[_0x48171f(0xcb)](_0x48171f(0x148),_0xbddaeb);const _0x26a402=await categories[_0x48171f(0xb7)]({}),_0x42519e=await brands[_0x48171f(0xb7)]({}),_0x37afd7=await units['find']({}),_0x216674=await warehouse[_0x48171f(0xb7)]({'status':_0x48171f(0xb0)});if(_0xbddaeb[0x0][_0x48171f(0x11f)]=='English\x20(US)')var _0x2d072c=users['English'];else{if(_0xbddaeb[0x0][_0x48171f(0x11f)]==_0x48171f(0x120))var _0x2d072c=users[_0x48171f(0x120)];else{if(_0xbddaeb[0x0][_0x48171f(0x11f)]==_0x48171f(0x102))var _0x2d072c=users['German'];else{if(_0xbddaeb[0x0][_0x48171f(0x11f)]=='Spanish')var _0x2d072c=users[_0x48171f(0x131)];else{if(_0xbddaeb[0x0][_0x48171f(0x11f)]==_0x48171f(0xe5))var _0x2d072c=users['French'];else{if(_0xbddaeb[0x0][_0x48171f(0x11f)]=='Portuguese\x20(BR)')var _0x2d072c=users['Portuguese'];else{if(_0xbddaeb[0x0]['language']=='Chinese')var _0x2d072c=users[_0x48171f(0xce)];else{if(_0xbddaeb[0x0][_0x48171f(0x11f)]==_0x48171f(0xbd))var _0x2d072c=users['Arabic'];}}}}}}}_0x5f1eb7['render']('add_product',{'success':_0x26f953[_0x48171f(0x157)](_0x48171f(0x13b)),'errors':_0x26f953[_0x48171f(0x157)]('errors'),'role':_0x5d4cc6,'profile':_0x16f154,'categories':_0x26a402,'brands':_0x42519e,'master_shop':_0xbddaeb,'units':_0x37afd7,'language':_0x2d072c,'find_data':_0x216674});}catch(_0x44352e){console['log'](_0x44352e);}}),router['post'](a0_0x2df1e2(0xa2),auth,upload[a0_0x2df1e2(0xd7)](a0_0x2df1e2(0x103)),async(_0x1b64b7,_0x211b07)=>{const _0x36b61f=a0_0x2df1e2;try{const {name:_0x365749,category:_0x2b174e,brand:_0x223362,unit:_0x4fbb64,alertquantity:_0xc7de3c,stock:_0x1010b4,product_code:_0x43cc,warehouse:_0x32f173,primary_ItemCode:_0x5a3a80,second_ItemCode:_0x2eabe4,second_unit:_0xadbad1,maxPerUnit:_0x3de274,MaxPerProduct:_0x54236f,sales_cat:_0x1c46b2,type_prod:_0x36eb94}=_0x1b64b7[_0x36b61f(0xc9)],_0x146d4a=_0x1b64b7[_0x36b61f(0xe9)]?.[_0x36b61f(0xb3)]||_0x36b61f(0x126),_0x1bff91=new product({'image':_0x146d4a,'name':_0x365749,'category':_0x2b174e,'brand':_0x223362,'unit':_0x4fbb64,'alertquantity':_0xc7de3c,'stock':_0x1010b4,'product_code':_0x43cc,'warehouse':_0x32f173,'primary_code':_0x5a3a80,'secondary_code':_0x2eabe4,'second_unit':_0xadbad1,'maxStocks':_0x54236f,'maxProdPerUnit':_0x3de274,'sales_category':_0x1c46b2,'type_products':_0x36eb94}),_0x42195c=await _0x1bff91[_0x36b61f(0xf9)](),_0x17bb7a=await categories[_0x36b61f(0x136)]({'name':_0x2b174e});_0x17bb7a[_0x36b61f(0x117)]=parseInt(_0x17bb7a['products'])+0x1,await _0x17bb7a[_0x36b61f(0xf9)]();const _0x1cd77e=await brands[_0x36b61f(0x136)]({'name':_0x223362});_0x1cd77e['products']=parseInt(_0x1cd77e[_0x36b61f(0x117)])+0x1,await _0x1cd77e[_0x36b61f(0xf9)]();const _0x320b01=await units[_0x36b61f(0x136)]({'name':_0x4fbb64});_0x320b01[_0x36b61f(0x117)]=parseInt(_0x320b01[_0x36b61f(0x117)])+0x1,await _0x320b01['save'](),_0x1b64b7['flash'](_0x36b61f(0x13b),_0x36b61f(0x15a)),_0x211b07[_0x36b61f(0xeb)](_0x36b61f(0x135));}catch(_0x275565){console[_0x36b61f(0xcb)](_0x275565);}}),router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0x11e),auth,async(_0xb15943,_0x5a6b90)=>{const _0x4c0a23=a0_0x2df1e2;try{const {username:_0x223f23,email:_0x49d0e6,role:_0xbbce72}=_0xb15943[_0x4c0a23(0xca)],_0x445d0c=_0xb15943[_0x4c0a23(0xca)],_0x2b54ab=await profile['findOne']({'email':_0x445d0c[_0x4c0a23(0xc2)]}),_0x408dd9=await master_shop[_0x4c0a23(0xb7)]();console[_0x4c0a23(0xcb)](_0x4c0a23(0x134),_0x408dd9);const _0x5622fb=_0xb15943[_0x4c0a23(0x132)]['id'],_0x440ae4=await product[_0x4c0a23(0x141)](_0x5622fb),_0x928d27=await categories[_0x4c0a23(0xb7)]({}),_0x238d18=await brands['find']({}),_0x5eb662=await units[_0x4c0a23(0xb7)]({}),_0x39ed86=await warehouse[_0x4c0a23(0xb7)]({'status':'Enabled'}),_0x6a33df=await units['aggregate']([{'$group':{'_id':_0x4c0a23(0xa0),'secondaryunit':{'$first':_0x4c0a23(0x10c)}}}]);if(_0x408dd9[0x0]['language']==_0x4c0a23(0x104))var _0x5555ed=users['English'];else{if(_0x408dd9[0x0]['language']==_0x4c0a23(0x120))var _0x5555ed=users[_0x4c0a23(0x120)];else{if(_0x408dd9[0x0][_0x4c0a23(0x11f)]=='German')var _0x5555ed=users[_0x4c0a23(0x102)];else{if(_0x408dd9[0x0][_0x4c0a23(0x11f)]=='Spanish')var _0x5555ed=users[_0x4c0a23(0x131)];else{if(_0x408dd9[0x0][_0x4c0a23(0x11f)]==_0x4c0a23(0xe5))var _0x5555ed=users['French'];else{if(_0x408dd9[0x0]['language']=='Portuguese\x20(BR)')var _0x5555ed=users['Portuguese'];else{if(_0x408dd9[0x0][_0x4c0a23(0x11f)]=='Chinese')var _0x5555ed=users['Chinese'];else{if(_0x408dd9[0x0]['language']==_0x4c0a23(0xbd))var _0x5555ed=users[_0x4c0a23(0x153)];}}}}}}}_0x5a6b90['render'](_0x4c0a23(0x124),{'success':_0xb15943[_0x4c0a23(0x157)](_0x4c0a23(0x13b)),'errors':_0xb15943['flash'](_0x4c0a23(0xb8)),'role':_0x445d0c,'profile':_0x2b54ab,'alldata':_0x440ae4,'categories':_0x928d27,'brands':_0x238d18,'master_shop':_0x408dd9,'units':_0x5eb662,'secondunit':_0x6a33df,'find_data':_0x39ed86,'language':_0x5555ed});}catch(_0x376799){console[_0x4c0a23(0xcb)](_0x376799);}}),router['post'](a0_0x2df1e2(0x11e),auth,upload[a0_0x2df1e2(0xd7)](a0_0x2df1e2(0x103)),async(_0x20bbed,_0x2de969)=>{const _0x1d0bd1=a0_0x2df1e2;try{const _0x5439aa=_0x20bbed[_0x1d0bd1(0x132)]['id'],_0x356f1f=await product[_0x1d0bd1(0x141)](_0x5439aa),{image:_0x24000b,name:_0x1707de,category:_0x595cab,brand:_0x30da7c,sku:_0x46e686,unit:_0x3379c3,alertquantity:_0x57046a,product_code:_0x1b8fa1,warehouse:_0x450257,primary_ItemCode:_0x4059da,second_ItemCode:_0x492fa6,second_unit:_0x49b267,maxPerUnit:_0x73a176,MaxPerProduct:_0x22d0ee,prod_catdata:_0x3a307f,type_prod:_0x388750,sales_cat:_0x5a517d}=_0x20bbed['body'];_0x20bbed[_0x1d0bd1(0xe9)]&&(_0x356f1f[_0x1d0bd1(0x103)]=_0x20bbed[_0x1d0bd1(0xe9)][_0x1d0bd1(0xb3)]);_0x356f1f[_0x1d0bd1(0x11c)]=_0x1707de,_0x356f1f[_0x1d0bd1(0xe0)]=_0x595cab,_0x356f1f[_0x1d0bd1(0xf3)]=_0x30da7c,_0x356f1f['sku']=_0x46e686,_0x356f1f[_0x1d0bd1(0xe2)]=_0x3379c3,_0x356f1f[_0x1d0bd1(0xb2)]=_0x57046a,_0x356f1f['product_code']=_0x1b8fa1,_0x356f1f['warehouse']=_0x450257,_0x356f1f[_0x1d0bd1(0xc3)]=_0x4059da,_0x356f1f[_0x1d0bd1(0x146)]=_0x492fa6,_0x356f1f[_0x1d0bd1(0xd3)]=_0x49b267,_0x356f1f['maxStocks']=_0x22d0ee,_0x356f1f['maxProdPerUnit']=_0x73a176,_0x356f1f[_0x1d0bd1(0xb9)]=_0x3a307f,_0x356f1f[_0x1d0bd1(0xa3)]=_0x388750,_0x356f1f['sales_category']=_0x5a517d;const _0x18a1b1=await _0x356f1f[_0x1d0bd1(0xf9)]();console[_0x1d0bd1(0xcb)](_0x1d0bd1(0xfb),_0x356f1f),_0x20bbed[_0x1d0bd1(0x157)](_0x1d0bd1(0x13b),_0x1d0bd1(0x10e)),_0x2de969['redirect'](_0x1d0bd1(0x135));}catch(_0x49e60c){console[_0x1d0bd1(0xcb)](_0x49e60c);}}),router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0x155),auth,async(_0x27d2c4,_0x2e4c18)=>{const _0x301d43=a0_0x2df1e2;try{const {username:_0x56265e,email:_0x363170,role:_0x3cc5b0}=_0x27d2c4[_0x301d43(0xca)],_0x974867=_0x27d2c4[_0x301d43(0xca)],_0xae279e=await profile[_0x301d43(0x136)]({'email':_0x974867[_0x301d43(0xc2)]}),_0x144063=await master_shop[_0x301d43(0xb7)]();console[_0x301d43(0xcb)](_0x301d43(0xe6),_0x144063);const _0x11a30b=_0x27d2c4[_0x301d43(0x132)]['id'],_0x1a7587=await product[_0x301d43(0x141)](_0x11a30b);console[_0x301d43(0xcb)]('barcode\x20user_id',_0x1a7587);if(_0x144063[0x0][_0x301d43(0x11f)]==_0x301d43(0x104))var _0x5de03f=users[_0x301d43(0x123)];else{if(_0x144063[0x0]['language']==_0x301d43(0x120))var _0x5de03f=users[_0x301d43(0x120)];else{if(_0x144063[0x0]['language']==_0x301d43(0x102))var _0x5de03f=users[_0x301d43(0x102)];else{if(_0x144063[0x0]['language']==_0x301d43(0x131))var _0x5de03f=users['Spanish'];else{if(_0x144063[0x0][_0x301d43(0x11f)]=='French')var _0x5de03f=users[_0x301d43(0xe5)];else{if(_0x144063[0x0][_0x301d43(0x11f)]==_0x301d43(0xcc))var _0x5de03f=users[_0x301d43(0xe4)];else{if(_0x144063[0x0][_0x301d43(0x11f)]==_0x301d43(0xce))var _0x5de03f=users[_0x301d43(0xce)];else{if(_0x144063[0x0][_0x301d43(0x11f)]==_0x301d43(0xbd))var _0x5de03f=users[_0x301d43(0x153)];}}}}}}}_0x2e4c18['render'](_0x301d43(0x149),{'success':_0x27d2c4['flash'](_0x301d43(0x13b)),'errors':_0x27d2c4[_0x301d43(0x157)]('errors'),'role':_0x974867,'profile':_0xae279e,'alldata':_0x1a7587,'master_shop':_0x144063,'language':_0x5de03f});}catch(_0x459418){console[_0x301d43(0xcb)](_0x459418);}}),router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0xe1),auth,async(_0x12f1ba,_0x45e09b)=>{const _0x4f993a=a0_0x2df1e2;try{const _0x1e3a53=new excelJS[(_0x4f993a(0xc5))](),_0xfd5b4e=_0x1e3a53[_0x4f993a(0x116)](_0x4f993a(0x118));return _0xfd5b4e[_0x4f993a(0x122)]=[{'header':_0x4f993a(0x100),'key':_0x4f993a(0x13e),'width':0xa},{'header':'Brands','key':_0x4f993a(0xbf),'width':0xa},{'header':_0x4f993a(0xf1),'key':'PUnits','width':0xa},{'header':'Secondary_Units','key':'PSecondaryUnits','width':0xa},{'header':'max_number_per_units','key':_0x4f993a(0xc8),'width':0xa},{'header':_0x4f993a(0x113),'key':_0x4f993a(0x11a),'width':0xa},{'header':_0x4f993a(0xe3),'key':_0x4f993a(0x11a),'width':0xa},{'header':_0x4f993a(0xf7),'key':_0x4f993a(0x11a),'width':0xa},{'header':'Category','key':_0x4f993a(0x12a),'width':0xa},{'header':_0x4f993a(0xa4),'key':_0x4f993a(0x13f),'width':0xa},{'header':_0x4f993a(0x13a),'key':'PAlQty','width':0xa},{'header':_0x4f993a(0x13c),'key':'Prod_Cat','width':0xa}],_0x45e09b['setHeader'](_0x4f993a(0xae),_0x4f993a(0x110)),_0x45e09b[_0x4f993a(0x159)](_0x4f993a(0xd6),_0x4f993a(0xf6)),_0x1e3a53[_0x4f993a(0x106)]['write'](_0x45e09b)[_0x4f993a(0xff)](()=>{_0x45e09b['status'](0xc8);});}catch(_0x2d3b73){_0x45e09b['status'](0x190)[_0x4f993a(0xa5)](_0x2d3b73);}});const storage1=multer[a0_0x2df1e2(0x128)]({'destination':(_0x4666a6,_0x49267e,_0x2fb6ba)=>{const _0x24d083=a0_0x2df1e2;_0x2fb6ba(null,_0x24d083(0xa9));},'filename':(_0x1d2621,_0x57d38e,_0x36d7f0)=>{const _0x2f5877=a0_0x2df1e2;_0x36d7f0(null,Date[_0x2f5877(0x14e)]()+_0x57d38e['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x2df1e2(0xf8)](a0_0x2df1e2(0xbe),auth,uploadMigrate[a0_0x2df1e2(0xd7)](a0_0x2df1e2(0xc1)),async(_0x4f1711,_0x255edc)=>{const _0x15557=a0_0x2df1e2,_0x1c6a2e=_0x4f1711[_0x15557(0xe9)]['filename'],_0x8e73e9=await xlsx[_0x15557(0xa8)](_0x15557(0x156)+_0x1c6a2e);let _0x21dcc8=_0x8e73e9[_0x15557(0xdb)],_0x845cc4=xlsx[_0x15557(0xad)][_0x15557(0xb4)](_0x8e73e9[_0x15557(0x119)][_0x21dcc8[0x0]]);for(const _0x469d94 of _0x845cc4){const _0x4799b5=_0x469d94[_0x15557(0x100)],_0x276d20=_0x469d94['Brands'],_0x4c9745=_0x469d94[_0x15557(0xf1)],_0x1bbec4=_0x469d94[_0x15557(0x14f)],_0x41fed1=_0x469d94[_0x15557(0xf7)],_0x360452=_0x469d94[_0x15557(0x115)],_0x4e6a81=_0x469d94[_0x15557(0xa4)],_0x337844=_0x469d94[_0x15557(0x113)],_0x50c2f6=_0x469d94['Secondary_Code'],_0x2d10ad=_0x469d94[_0x15557(0x13a)],_0x31a698=_0x469d94[_0x15557(0xd1)],_0x13f1b1=_0x469d94[_0x15557(0x13c)];try{let _0x1493e9=await categories['findOne']({'name':_0x360452});if(!_0x1493e9){const _0x1949d5=new categories({'name':_0x360452,'products':'0'});_0x1493e9=await _0x1949d5[_0x15557(0xf9)]();}let _0x2bb8c7=await brands[_0x15557(0x136)]({'name':_0x276d20});if(!_0x2bb8c7){const _0x10f4e2=new brands({'name':_0x276d20,'products':'0'});_0x2bb8c7=await _0x10f4e2['save']();}let _0x353de6=await units[_0x15557(0x136)]({'name':_0x4c9745,'secondary_unit':_0x1bbec4});if(!_0x353de6){const _0x3680b=new units({'name':_0x4c9745,'secondary_unit':_0x1bbec4,'products':'0'});_0x353de6=await _0x3680b[_0x15557(0xf9)]();}const _0x341b2e=await product[_0x15557(0xb7)]({'name':_0x4799b5,'category':_0x1493e9['name'],'brand':_0x2bb8c7[_0x15557(0x11c)],'secondary_unit':_0x353de6[_0x15557(0xd3)],'product_code':_0x41fed1});console[_0x15557(0xcb)](_0x341b2e['length']+_0x15557(0xd0)+_0x1493e9[_0x15557(0x11c)]+_0x15557(0xd0)+_0x2bb8c7[_0x15557(0x11c)]+_0x15557(0xd0)+_0x353de6[_0x15557(0xd3)]+'\x20<>\x20'+_0x41fed1+_0x15557(0xd0)+_0x4799b5);if(_0x341b2e[_0x15557(0xe8)]===0x0){const _0x1a8f42=new product({'image':_0x15557(0x126),'name':_0x4799b5,'category':_0x1493e9['name'],'brand':_0x2bb8c7['name'],'unit':_0x353de6[_0x15557(0x11c)],'alertquantity':_0x4e6a81,'product_code':_0x41fed1,'secondary_unit':_0x353de6[_0x15557(0xd3)],'primary_code':_0x337844,'secondary_code':_0x50c2f6,'maxStocks':_0x2d10ad,'maxProdPerUnit':_0x31a698,'product_category':_0x13f1b1}),_0x459851=await _0x1a8f42[_0x15557(0xf9)]();_0x1493e9['products']=parseInt(_0x1493e9[_0x15557(0x117)])+0x1,await _0x1493e9[_0x15557(0xf9)](),_0x2bb8c7[_0x15557(0x117)]=parseInt(_0x2bb8c7[_0x15557(0x117)])+0x1,await _0x2bb8c7[_0x15557(0xf9)](),_0x353de6[_0x15557(0x117)]=parseInt(_0x353de6['products'])+0x1,await _0x353de6['save'](),_0x4f1711['flash'](_0x15557(0x13b),_0x4799b5+'\x20added\x20successfully');}else{console[_0x15557(0xcb)](_0x341b2e[0x0]);const _0x115a94=_0x341b2e[0x0];_0x115a94[_0x15557(0xe0)]=_0x1493e9['name'],_0x115a94[_0x15557(0xf3)]=_0x2bb8c7['name'],_0x115a94[_0x15557(0xe2)]=_0x353de6[_0x15557(0x11c)],_0x115a94['alertquantity']=_0x4e6a81,_0x115a94[_0x15557(0x12f)]=_0x41fed1,_0x115a94[_0x15557(0xd3)]=_0x353de6[_0x15557(0xd3)],_0x115a94[_0x15557(0xc3)]=_0x337844,_0x115a94[_0x15557(0x146)]=_0x50c2f6,_0x115a94[_0x15557(0x105)]=_0x2d10ad,_0x115a94[_0x15557(0xa6)]=_0x31a698,_0x115a94[_0x15557(0xb9)]=_0x13f1b1;const _0x13574e=await _0x115a94[_0x15557(0xf9)]();_0x4f1711[_0x15557(0x157)]('success',_0x13574e[_0x15557(0x11c)]+_0x15557(0xa1));}}catch(_0x475d84){_0x255edc['status'](0x1f4)[_0x15557(0x121)]({'proderror':_0x475d84[_0x15557(0x133)],'aproduct':_0x4799b5});}}_0x255edc[_0x15557(0xeb)](_0x15557(0x135));}),router[a0_0x2df1e2(0xf8)](a0_0x2df1e2(0x12e),auth,async(_0x1f0c45,_0x12858b)=>{const _0x428010=a0_0x2df1e2;try{console[_0x428010(0xcb)](_0x1f0c45[_0x428010(0xc9)]);const {data_cateory:_0x4df1b9,datachoose:_0x25ce74}=_0x1f0c45[_0x428010(0xc9)];var _0x25f0c1;if(_0x25ce74=='prod_categ')_0x25f0c1=await product[_0x428010(0x107)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x25ce74==_0x428010(0x9f))_0x25f0c1=await product[_0x428010(0x107)]([{'$match':{'product_category':_0x4df1b9}},{'$group':{'_id':_0x428010(0xd9)}}]);else _0x25ce74==_0x428010(0xb5)&&(_0x25f0c1=await product[_0x428010(0x107)]([{'$match':{'product_category':_0x4df1b9}},{'$group':{'_id':_0x428010(0x10b)}}]));}_0x12858b[_0x428010(0x121)](_0x25f0c1);}catch(_0x2780fc){_0x12858b['json']({'message':_0x2780fc[_0x428010(0x133)]});}}),router[a0_0x2df1e2(0xf8)]('/filter_product',auth,async(_0x381d19,_0x1e794e)=>{const _0x1fef28=a0_0x2df1e2;try{const {data_choosing:_0x4a9d5c,data_selected:_0xe22f22}=_0x381d19['body'];var _0x327c03;if(_0x4a9d5c==_0x1fef28(0x144))_0x327c03=await product[_0x1fef28(0x107)]([{'$match':{'product_category':_0xe22f22}}]);else{if(_0x4a9d5c=='brands')_0x327c03=await product['aggregate']([{'$match':{'brand':_0xe22f22}}]);else _0x4a9d5c=='categ'&&(_0x327c03=await product['aggregate']([{'$match':{'category':_0xe22f22}}]));}_0x1e794e[_0x1fef28(0x121)](_0x327c03);}catch(_0x202ad8){_0x1e794e[_0x1fef28(0x121)]({'message':_0x202ad8[_0x1fef28(0x133)]});}}),router[a0_0x2df1e2(0x14d)](a0_0x2df1e2(0x154),auth,async(_0x1da21d,_0x47e52b)=>{const _0x305198=a0_0x2df1e2,_0x5cc330=_0x1da21d[_0x305198(0xca)],_0x5c1bf8=await profile['findOne']({'email':_0x5cc330[_0x305198(0xc2)]}),_0x2f49f8=await master_shop['find'](),_0x7e1a6b=await product['find']();if(_0x2f49f8[0x0][_0x305198(0x11f)]=='English\x20(US)')var _0x19588d=users[_0x305198(0x123)];else{if(_0x2f49f8[0x0]['language']==_0x305198(0x120))var _0x19588d=users[_0x305198(0x120)];else{if(_0x2f49f8[0x0]['language']==_0x305198(0x102))var _0x19588d=users[_0x305198(0x102)];else{if(_0x2f49f8[0x0]['language']==_0x305198(0x131))var _0x19588d=users[_0x305198(0x131)];else{if(_0x2f49f8[0x0][_0x305198(0x11f)]==_0x305198(0xe5))var _0x19588d=users[_0x305198(0xe5)];else{if(_0x2f49f8[0x0][_0x305198(0x11f)]==_0x305198(0xcc))var _0x19588d=users[_0x305198(0xe4)];else{if(_0x2f49f8[0x0][_0x305198(0x11f)]==_0x305198(0xce))var _0x19588d=users[_0x305198(0xce)];else{if(_0x2f49f8[0x0][_0x305198(0x11f)]==_0x305198(0xbd))var _0x19588d=users[_0x305198(0x153)];}}}}}}}_0x47e52b['render'](_0x305198(0xaf),{'success':_0x1da21d[_0x305198(0x157)](_0x305198(0x13b)),'errors':_0x1da21d[_0x305198(0x157)]('errors'),'role':_0x5cc330,'profile':_0x5c1bf8,'products':_0x7e1a6b,'master_shop':_0x2f49f8,'language':_0x19588d});}),router['post']('/barcode_data',auth,async(_0x22f9dc,_0x92598b)=>{const _0xdbc16b=a0_0x2df1e2,_0xc4471=await product[_0xdbc16b(0xb7)]();_0x92598b[_0xdbc16b(0x121)]({'data':_0xc4471});}),router[a0_0x2df1e2(0xf8)](a0_0x2df1e2(0xd4),auth,async(_0x33f004,_0x2a41dc)=>{const _0x5998f8=a0_0x2df1e2;try{const {dataProdCat:_0x35e7ea,dataProdIdentity:_0x39610b}=_0x33f004[_0x5998f8(0xc9)];var _0x4ebd85;switch(_0x35e7ea){case'fg':switch(_0x39610b){case _0x5998f8(0x15d):_0x4ebd85=await product['aggregate']([{'$match':{'product_category':_0x5998f8(0xaa)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x5998f8(0xa0)}}]);break;case _0x5998f8(0x115):_0x4ebd85=await product['aggregate']([{'$match':{'product_category':_0x5998f8(0xaa)}},{'$group':{'_id':_0x5998f8(0x10b)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x39610b){case _0x5998f8(0x15d):_0x4ebd85=await product[_0x5998f8(0x107)]([{'$match':{'product_category':_0x5998f8(0xda)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x5998f8(0xa0)}}]);break;case _0x5998f8(0x115):_0x4ebd85=await product[_0x5998f8(0x107)]([{'$match':{'product_category':_0x5998f8(0xda)}},{'$group':{'_id':_0x5998f8(0x10b)}},{'$project':{'category':_0x5998f8(0xa0)}}]);break;}break;}_0x2a41dc['json'](_0x4ebd85);}catch(_0x4ad956){_0x2a41dc[_0x5998f8(0x121)]({'message':_0x4ad956[_0x5998f8(0x133)]});}}),router[a0_0x2df1e2(0xf8)](a0_0x2df1e2(0x142),auth,async(_0x4ec92e,_0x1386f0)=>{const _0x11ec53=a0_0x2df1e2;try{console[_0x11ec53(0xcb)](_0x4ec92e[_0x11ec53(0xc9)]);const {prod_cat:_0x59a671,identity:_0x60af56,valueData:_0x56ddce,typeofbarcode:_0x2a366a}=_0x4ec92e[_0x11ec53(0xc9)];let _0x192288;switch(_0x59a671){case'fg':if(_0x60af56==_0x11ec53(0x15d))_0x192288=await product[_0x11ec53(0x107)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x56ddce}}]);else _0x60af56=='Category'&&(_0x192288=await product[_0x11ec53(0x107)]([{'$match':{'product_category':_0x11ec53(0xaa),'category':_0x56ddce}}]));break;case'rm':if(_0x60af56==_0x11ec53(0x15d))_0x192288=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','brand':_0x56ddce}}]);else _0x60af56==_0x11ec53(0x115)&&(_0x192288=await product[_0x11ec53(0x107)]([{'$match':{'product_category':_0x11ec53(0xda),'category':_0x56ddce}}]));break;}const _0x1ccc8a=_0x1fd09a=>_0x1fd09a*0x48,_0x3b5776={'width':0x3,'height':0x1},_0x54428c=new PDFDocument({'margin':_0x1ccc8a(0.75),'size':[_0x1ccc8a(_0x3b5776['width']),_0x1ccc8a(_0x3b5776[_0x11ec53(0x114)])],'bufferPages':!![]}),_0x1609db=_0x192288[_0x11ec53(0xe8)];for(let _0x74292b=0x0;_0x74292b<=_0x1609db;_0x74292b++){if(_0x74292b!=_0x1609db){const _0x5a9cef=_0x192288[_0x74292b][_0x11ec53(0x11c)],_0x58698c=_0x192288[_0x74292b][_0x11ec53(0xc3)],_0x191018=_0x192288[_0x74292b][_0x11ec53(0x146)],_0x546e88=_0x192288[_0x74292b]['product_code'];var _0x2b67b3;switch(_0x2a366a){case'1':_0x2b67b3=_0x58698c;break;case'2':_0x2b67b3=_0x191018;break;case'3':_0x2b67b3=_0x546e88;break;}const _0x385412={'width':0xd2,'height':0x64},_0x2179b1={'width':_0x1ccc8a(_0x3b5776[_0x11ec53(0x127)]),'height':_0x1ccc8a(_0x3b5776[_0x11ec53(0x114)])},_0x46ee9a=new Canvas();JsBarcode(_0x46ee9a,_0x2b67b3,{'format':_0x11ec53(0x15c),'height':_0x385412[_0x11ec53(0x114)],'displayValue':!![],'text':_0x2b67b3});const _0x386426=_0x46ee9a[_0x11ec53(0xbc)](),_0x3a5bef=_0x2179b1['width']/_0x385412[_0x11ec53(0x127)],_0x25ac63=_0x2179b1[_0x11ec53(0x114)]/_0x385412[_0x11ec53(0x114)],_0x4b5676=Math['min'](_0x3a5bef,_0x25ac63),_0x3c8d49=_0x385412[_0x11ec53(0x127)]*_0x4b5676,_0x2d4a14=_0x385412[_0x11ec53(0x114)]*_0x4b5676,_0x44c6b9=(_0x2179b1[_0x11ec53(0x127)]-_0x3c8d49)/0x2,_0xa4e7ee=(_0x2179b1[_0x11ec53(0x114)]-_0x2d4a14)/0x2;_0x54428c[_0x11ec53(0x103)](_0x386426,_0x44c6b9,_0xa4e7ee,{'width':_0x3c8d49,'height':_0x2d4a14}),_0x74292b!=_0x1609db&&_0x54428c[_0x11ec53(0x108)]();}}const _0x455d94=[];_0x54428c['on'](_0x11ec53(0xf2),_0x455d94['push']['bind'](_0x455d94)),_0x54428c['on'](_0x11ec53(0xab),()=>{const _0x205e1a=_0x11ec53,_0x508cc9=Buffer[_0x205e1a(0x101)](_0x455d94),_0x1a934f=_0x508cc9['toString'](_0x205e1a(0x12d));_0x1386f0[_0x205e1a(0x121)]({'pdfContent':_0x1a934f});}),_0x54428c[_0x11ec53(0xab)]();}catch(_0x30e0f3){_0x1386f0[_0x11ec53(0x121)]({'message':_0x30e0f3['message']});}}),router[a0_0x2df1e2(0xf8)](a0_0x2df1e2(0x11d),auth,async(_0x4082be,_0x38b9b2)=>{const _0x5ccc53=a0_0x2df1e2;try{console[_0x5ccc53(0xcb)](_0x4082be['body']);const {prod_cat:_0x5c225e,identity:_0x298a44,valueData:_0xc69f9e}=_0x4082be[_0x5ccc53(0xc9)];let _0x5c3c36;switch(_0x5c225e){case'fg':if(_0x298a44==_0x5ccc53(0x15d))_0x5c3c36=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods','brand':_0xc69f9e}}]);else _0x298a44==_0x5ccc53(0x115)&&(_0x5c3c36=await product[_0x5ccc53(0x107)]([{'$match':{'product_category':_0x5ccc53(0xaa),'category':_0xc69f9e}}]));break;case'rm':if(_0x298a44==_0x5ccc53(0x15d))_0x5c3c36=await product[_0x5ccc53(0x107)]([{'$match':{'product_category':_0x5ccc53(0xda),'brand':_0xc69f9e}}]);else _0x298a44==_0x5ccc53(0x115)&&(_0x5c3c36=await product[_0x5ccc53(0x107)]([{'$match':{'product_category':'Raw\x20Materials','category':_0xc69f9e}}]));break;}_0x38b9b2[_0x5ccc53(0x121)]({'data':_0x5c3c36});}catch(_0x54f0e2){_0x38b9b2['json']({'message':_0x54f0e2[_0x5ccc53(0x133)]});}}),router['post']('/print_barcode_single/:id',auth,async(_0x4f4369,_0x508dd3)=>{const _0x562a76=a0_0x2df1e2;try{const _0x3f6c14=_0x4f4369['params']['id'],{copies:_0xa432d5,typeofbarcode:_0x16075b}=_0x4f4369['body'];var _0x54ce00=await product['findById'](_0x3f6c14);const _0x237b4d=_0x593572=>_0x593572*0x48,_0x2a0be3={'width':0x3,'height':0x1},_0xce3e33=new PDFDocument({'margin':_0x237b4d(0.75),'size':[_0x237b4d(_0x2a0be3[_0x562a76(0x127)]),_0x237b4d(_0x2a0be3[_0x562a76(0x114)])],'bufferPages':!![]}),_0x13d617=_0xa432d5,_0x300630=_0x54ce00['name'],_0x4c0bfa=_0x54ce00[_0x562a76(0xc3)],_0x4174e8=_0x54ce00[_0x562a76(0x146)],_0x4b3d28=_0x54ce00[_0x562a76(0x12f)];let _0x7ab2fa;switch(_0x16075b){case'1':_0x7ab2fa=_0x4c0bfa;break;case'2':_0x7ab2fa=_0x4174e8;break;case'3':_0x7ab2fa=_0x4b3d28;break;}const _0x559753={'width':0xd2,'height':0x64},_0x2713ac={'width':_0x237b4d(_0x2a0be3[_0x562a76(0x127)]),'height':_0x237b4d(_0x2a0be3[_0x562a76(0x114)])};for(let _0x24c408=0x1;_0x24c408<=_0x13d617;_0x24c408++){const _0x13a076=new Canvas();JsBarcode(_0x13a076,_0x7ab2fa,{'format':_0x562a76(0x15c),'height':_0x559753[_0x562a76(0x114)],'displayValue':!![],'text':_0x7ab2fa});const _0x1f890f=_0x13a076[_0x562a76(0xbc)](),_0x48bfb7=_0x2713ac[_0x562a76(0x127)]/_0x559753[_0x562a76(0x127)],_0x378560=_0x2713ac['height']/_0x559753['height'],_0x1a2e0c=Math[_0x562a76(0x109)](_0x48bfb7,_0x378560),_0x11db3e=_0x559753[_0x562a76(0x127)]*_0x1a2e0c,_0x400c39=_0x559753[_0x562a76(0x114)]*_0x1a2e0c,_0x1fa406=(_0x2713ac[_0x562a76(0x127)]-_0x11db3e)/0x2,_0x2d5b9c=(_0x2713ac['height']-_0x400c39)/0x2;_0xce3e33[_0x562a76(0x103)](_0x1f890f,_0x1fa406,_0x2d5b9c,{'width':_0x11db3e,'height':_0x400c39}),_0x24c408!=_0x13d617&&_0xce3e33[_0x562a76(0x108)]();}const _0x236461=[];_0xce3e33['on'](_0x562a76(0xf2),_0x236461[_0x562a76(0x139)][_0x562a76(0xf4)](_0x236461)),_0xce3e33['on'](_0x562a76(0xab),()=>{const _0x4f9690=_0x562a76,_0x5015aa=Buffer[_0x4f9690(0x101)](_0x236461),_0x392899=_0x5015aa[_0x4f9690(0x14c)]('base64');_0x508dd3[_0x4f9690(0x121)]({'pdfContent':_0x392899});}),_0xce3e33['end']();}catch(_0x18d263){_0x508dd3['json']({'message':_0x18d263[_0x562a76(0x133)]});}}),module[a0_0x2df1e2(0x151)]=router;