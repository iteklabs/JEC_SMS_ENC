const a0_0x21574c=a0_0x31b9;(function(_0x6788c9,_0x5c9a3c){const _0x38e8ae=a0_0x31b9,_0x1635b3=_0x6788c9();while(!![]){try{const _0x23525a=-parseInt(_0x38e8ae(0x110))/0x1+parseInt(_0x38e8ae(0xe2))/0x2*(-parseInt(_0x38e8ae(0x118))/0x3)+parseInt(_0x38e8ae(0x149))/0x4+parseInt(_0x38e8ae(0xb0))/0x5*(parseInt(_0x38e8ae(0x143))/0x6)+parseInt(_0x38e8ae(0xd6))/0x7+-parseInt(_0x38e8ae(0xc0))/0x8+-parseInt(_0x38e8ae(0xd5))/0x9*(parseInt(_0x38e8ae(0x138))/0xa);if(_0x23525a===_0x5c9a3c)break;else _0x1635b3['push'](_0x1635b3['shift']());}catch(_0x3a03f0){_0x1635b3['push'](_0x1635b3['shift']());}}}(a0_0x3d9e,0x612e4));function a0_0x3d9e(){const _0x688b57=['secondary_unit','Alert_QTY','categories\x20data\x20delete\x20successfully','English\x20(US)','toString','post','Category','now','/filter_product','end','/select_data','sales_category','Chinese','Brands','map','2489720udzKsB','/products/units','toBuffer','user','email','setHeader','PName','exports','product_code','maxProdPerUnit','prod_categ','xlsx','$category','file','pdfkit-table','Hindi','min','product\x20update\x20successfully','public/upload','sheet_to_json','brand\x20data\x20delete\x20successfully','9KFZKjG','4561235OPVpVE','master','utils','brand\x20data\x20update\x20successfully','\x20Edit\x20Successfully','length','image','../public/language/languages.json','Router','canvas','/brands','body','9674RwWFYS','single','height','/units/:id','Arabic','render','Portuguese','/products_export_migrate_file','/categories/:id','jsbarcode','originalname','data','stock','Arabic\x20(ae)','$product_details.product_name','PSecondaryUnits','Raw\x20Materials','success','/print_barcode_filter/','columns','categ','products','Product_Code','write','maxStocks','/products/categories','/units','aggregate','product_details.product_name','Enabled','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','params','edit_product','defaultProduct.avif','sku','Portuguese\x20(BR)','$product_name','/view/:id','$brand','CODE128','unit\x20data\x20update\x20successfully','public/Migration/','barcode\x20Product\x20master','width','base64','/products/view','123521vPyeWr','PCat','findOne','/products/brands','express','send','/print_barcode','addPage','276fLfgZH','alertquantity','product\x20add\x20successfully','../models/all_models','errors','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','findByIdAndDelete','max_number_per_units','secondary_code','\x20categories\x20is\x20add\x20successfully','ProductCode','diskStorage','primary_code','save','_id','unit\x20data\x20delete\x20successfully','json','get','$product_category','Primary_Code','find','$_id','findById','readFile','then','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','units','redirect','name','category','Products\x20warehouse_data','Secondary_Code','3747980lBSEfQ','/view','Products_category','/brands/:id','Units','multer','Product_Name','French','Spanish','language','PUnits','24CFHBKq','MaxperUnits','\x20unit\x20is\x20add\x20successfully','SheetNames','English','concat','2468676WGwdSS','message','/print_barcode_single/:id','categories','$product_stock','status','PBrands','Sheets','barcode\x20user_id','flash','/print_barcode_filter_search/','$product_details.product_stock','brands','product_stock','/view/add_products','log','Prod_Cat','public/Migration','Products\x20find_data','/products_import_migrate_file','unit','Maximum_Stocks','Secondary_Units','German','attachment;\x20filename=Product_Migration_File.xlsx','Workbook','findByIdAndUpdate','PAlQty','\x20<>\x20','push','forEach','\x20brand\x20is\x20add\x20successfully','Finished\x20Goods','/categories','filename','warehouse','479770PlBMLh'];a0_0x3d9e=function(){return _0x688b57;};return a0_0x3d9e();}const express=require(a0_0x21574c(0x114)),res=require('express/lib/response'),app=express(),router=express[a0_0x21574c(0xde)](),multer=require(a0_0x21574c(0x13d)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x21574c(0x11b)),auth=require('../middleware/auth'),users=require(a0_0x21574c(0xdd)),excelJS=require('exceljs'),xlsx=require(a0_0x21574c(0xcb)),JsBarcode=require(a0_0x21574c(0xeb)),{Canvas}=require(a0_0x21574c(0xdf)),PDFDocument=require(a0_0x21574c(0xce));function a0_0x31b9(_0x45324f,_0x18e573){const _0x3d9e4a=a0_0x3d9e();return a0_0x31b9=function(_0x31b998,_0x28605e){_0x31b998=_0x31b998-0xb0;let _0x43d539=_0x3d9e4a[_0x31b998];return _0x43d539;},a0_0x31b9(_0x45324f,_0x18e573);}router[a0_0x21574c(0x129)](a0_0x21574c(0x16a),auth,async(_0x37d2a4,_0x3ea4de)=>{const _0x376bc7=a0_0x21574c;try{const {username:_0x3ffaea,email:_0x217664,role:_0x297087}=_0x37d2a4['user'],_0x12723d=_0x37d2a4[_0x376bc7(0xc3)],_0x242204=await profile[_0x376bc7(0x112)]({'email':_0x12723d[_0x376bc7(0xc4)]}),_0x299c51=await master_shop['find']();console['log'](_0x376bc7(0xd7),_0x299c51);const _0x2d6d5b=await categories[_0x376bc7(0x12c)]();if(_0x299c51[0x0][_0x376bc7(0x141)]==_0x376bc7(0xb4))var _0x13d7cc=users['English'];else{if(_0x299c51[0x0][_0x376bc7(0x141)]==_0x376bc7(0xcf))var _0x13d7cc=users[_0x376bc7(0xcf)];else{if(_0x299c51[0x0]['language']=='German')var _0x13d7cc=users[_0x376bc7(0x160)];else{if(_0x299c51[0x0][_0x376bc7(0x141)]=='Spanish')var _0x13d7cc=users[_0x376bc7(0x140)];else{if(_0x299c51[0x0][_0x376bc7(0x141)]=='French')var _0x13d7cc=users[_0x376bc7(0x13f)];else{if(_0x299c51[0x0][_0x376bc7(0x141)]=='Portuguese\x20(BR)')var _0x13d7cc=users[_0x376bc7(0xe8)];else{if(_0x299c51[0x0][_0x376bc7(0x141)]==_0x376bc7(0xbd))var _0x13d7cc=users[_0x376bc7(0xbd)];else{if(_0x299c51[0x0][_0x376bc7(0x141)]==_0x376bc7(0xef))var _0x13d7cc=users[_0x376bc7(0xe6)];}}}}}}}_0x3ea4de[_0x376bc7(0xe7)]('categories',{'success':_0x37d2a4[_0x376bc7(0x152)](_0x376bc7(0xf3)),'errors':_0x37d2a4[_0x376bc7(0x152)](_0x376bc7(0x11c)),'role':_0x12723d,'profile':_0x242204,'user':_0x2d6d5b,'master_shop':_0x299c51,'language':_0x13d7cc});}catch(_0x138738){console[_0x376bc7(0x158)](_0x138738);}}),router[a0_0x21574c(0xb6)](a0_0x21574c(0x16a),auth,async(_0x3d2a01,_0x49d088)=>{const _0x2b3a36=a0_0x21574c;try{const {name:_0x2c54f4,products:_0x480eda}=_0x3d2a01[_0x2b3a36(0xe1)],_0x103086=new categories({'name':_0x2c54f4,'products':_0x480eda}),_0xed2575=await categories[_0x2b3a36(0x112)]({'name':_0x2c54f4});_0xed2575?_0x3d2a01[_0x2b3a36(0x152)](_0x2b3a36(0x11c),_0x2c54f4+_0x2b3a36(0x100)):_0x3d2a01[_0x2b3a36(0x152)](_0x2b3a36(0xf3),_0x2c54f4+_0x2b3a36(0x121));const _0x431ade=await _0x103086['save']();_0x49d088['redirect'](_0x2b3a36(0xfb));}catch(_0x19758c){console['log'](_0x19758c);}}),router[a0_0x21574c(0x129)]('/categories/:id',auth,async(_0x1e77d3,_0x3d1da7)=>{const _0x46d9df=a0_0x21574c;try{const {username:_0x2e80ce,email:_0x2f1a63,role:_0x3738b4}=_0x1e77d3['user'],_0xd6ccf1=_0x1e77d3[_0x46d9df(0xc3)],_0x5110ec=await profile['findOne']({'email':_0xd6ccf1[_0x46d9df(0xc4)]}),_0x48bd52=await master_shop[_0x46d9df(0x12c)]();console['log']('master',_0x48bd52);const _0x19b629=_0x1e77d3[_0x46d9df(0x101)]['id'];console[_0x46d9df(0x158)](_0x19b629);const _0x498b08=await categories['findById'](_0x19b629);if(_0x48bd52[0x0]['language']==_0x46d9df(0xb4))var _0x5153c0=users[_0x46d9df(0x147)];else{if(_0x48bd52[0x0][_0x46d9df(0x141)]==_0x46d9df(0xcf))var _0x5153c0=users[_0x46d9df(0xcf)];else{if(_0x48bd52[0x0][_0x46d9df(0x141)]==_0x46d9df(0x160))var _0x5153c0=users[_0x46d9df(0x160)];else{if(_0x48bd52[0x0]['language']==_0x46d9df(0x140))var _0x5153c0=users[_0x46d9df(0x140)];else{if(_0x48bd52[0x0][_0x46d9df(0x141)]==_0x46d9df(0x13f))var _0x5153c0=users[_0x46d9df(0x13f)];else{if(_0x48bd52[0x0][_0x46d9df(0x141)]=='Portuguese\x20(BR)')var _0x5153c0=users['Portuguese'];else{if(_0x48bd52[0x0]['language']==_0x46d9df(0xbd))var _0x5153c0=users[_0x46d9df(0xbd)];else{if(_0x48bd52[0x0][_0x46d9df(0x141)]==_0x46d9df(0xef))var _0x5153c0=users[_0x46d9df(0xe6)];}}}}}}}_0x3d1da7['render'](_0x46d9df(0x14c),{'success':_0x1e77d3[_0x46d9df(0x152)](_0x46d9df(0xf3)),'errors':_0x1e77d3[_0x46d9df(0x152)](_0x46d9df(0x11c)),'role':_0xd6ccf1,'profile':_0x5110ec,'master_shop':_0x48bd52,'user':_0x498b08,'language':_0x5153c0});}catch(_0x2e576f){console[_0x46d9df(0x158)](_0x2e576f);}}),router['post'](a0_0x21574c(0xea),auth,async(_0x55f9c7,_0x3eb76d)=>{const _0x351414=a0_0x21574c;try{const _0x4bb5ef=_0x55f9c7[_0x351414(0x101)]['id'],_0x150b6a=await categories[_0x351414(0x163)](_0x4bb5ef,_0x55f9c7[_0x351414(0xe1)]);_0x55f9c7[_0x351414(0x152)](_0x351414(0xf3),''+users['categories_edit']),_0x3eb76d['redirect'](_0x351414(0xfb));}catch(_0x51342b){console[_0x351414(0x158)](_0x51342b);}}),router[a0_0x21574c(0x129)]('/categories/delete/:id',auth,async(_0x116bec,_0x5c271f)=>{const _0x43f481=a0_0x21574c;try{const _0x9c15c=_0x116bec['params']['id'],_0x227b82=await categories[_0x43f481(0x11e)](_0x9c15c);_0x116bec['flash'](_0x43f481(0xf3),_0x43f481(0xb3)),_0x5c271f['redirect']('/products/categories');}catch(_0x3fb22c){console[_0x43f481(0x158)](_0x3fb22c);}}),router[a0_0x21574c(0x129)](a0_0x21574c(0xe0),auth,async(_0x21618e,_0x308c6f)=>{const _0x406e1b=a0_0x21574c;try{const {username:_0x28ea6b,email:_0xaa9309,role:_0x3f684a}=_0x21618e[_0x406e1b(0xc3)],_0x58045d=_0x21618e[_0x406e1b(0xc3)],_0x303e5f=await profile[_0x406e1b(0x112)]({'email':_0x58045d[_0x406e1b(0xc4)]}),_0x47519a=await master_shop['find']();console[_0x406e1b(0x158)](_0x406e1b(0xd7),_0x47519a);const _0x14c864=await brands['find']();if(_0x47519a[0x0][_0x406e1b(0x141)]==_0x406e1b(0xb4))var _0x2f61b4=users[_0x406e1b(0x147)];else{if(_0x47519a[0x0]['language']==_0x406e1b(0xcf))var _0x2f61b4=users[_0x406e1b(0xcf)];else{if(_0x47519a[0x0][_0x406e1b(0x141)]=='German')var _0x2f61b4=users[_0x406e1b(0x160)];else{if(_0x47519a[0x0][_0x406e1b(0x141)]=='Spanish')var _0x2f61b4=users[_0x406e1b(0x140)];else{if(_0x47519a[0x0][_0x406e1b(0x141)]==_0x406e1b(0x13f))var _0x2f61b4=users[_0x406e1b(0x13f)];else{if(_0x47519a[0x0][_0x406e1b(0x141)]==_0x406e1b(0x105))var _0x2f61b4=users['Portuguese'];else{if(_0x47519a[0x0][_0x406e1b(0x141)]=='Chinese')var _0x2f61b4=users[_0x406e1b(0xbd)];else{if(_0x47519a[0x0][_0x406e1b(0x141)]=='Arabic\x20(ae)')var _0x2f61b4=users[_0x406e1b(0xe6)];}}}}}}}_0x308c6f[_0x406e1b(0xe7)](_0x406e1b(0x155),{'success':_0x21618e[_0x406e1b(0x152)](_0x406e1b(0xf3)),'errors':_0x21618e['flash']('errors'),'role':_0x58045d,'profile':_0x303e5f,'master_shop':_0x47519a,'user':_0x14c864,'language':_0x2f61b4});}catch(_0x17c58a){console['log'](_0x17c58a);}}),router[a0_0x21574c(0xb6)](a0_0x21574c(0xe0),auth,async(_0x1556b9,_0x564a5f)=>{const _0x14e765=a0_0x21574c;try{const {name:_0x2f00b1,products:_0x37b89f}=_0x1556b9[_0x14e765(0xe1)],_0x3c127d=new brands({'name':_0x2f00b1,'products':_0x37b89f}),_0x556475=await brands[_0x14e765(0x112)]({'name':_0x2f00b1});_0x556475?_0x1556b9[_0x14e765(0x152)](_0x14e765(0x11c),_0x2f00b1+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x1556b9[_0x14e765(0x152)](_0x14e765(0xf3),_0x2f00b1+_0x14e765(0x168));const _0x7870fd=await _0x3c127d['save']();_0x564a5f['redirect'](_0x14e765(0x113));}catch(_0x1163f3){console[_0x14e765(0x158)](_0x1163f3);}}),router['get'](a0_0x21574c(0x13b),auth,async(_0x41e767,_0x4a62e1)=>{const _0xf07538=a0_0x21574c;try{const {username:_0x3bf652,email:_0x36d053,role:_0x283d9f}=_0x41e767['user'],_0x579ac6=_0x41e767[_0xf07538(0xc3)],_0x598a30=await profile[_0xf07538(0x112)]({'email':_0x579ac6['email']}),_0x4f0e74=await master_shop[_0xf07538(0x12c)]();console[_0xf07538(0x158)](_0xf07538(0xd7),_0x4f0e74);const _0xf2891c=_0x41e767[_0xf07538(0x101)]['id'];console['log'](_0xf2891c);const _0x2ff576=await brands[_0xf07538(0x12e)](_0xf2891c);if(_0x4f0e74[0x0][_0xf07538(0x141)]==_0xf07538(0xb4))var _0x525af2=users[_0xf07538(0x147)];else{if(_0x4f0e74[0x0][_0xf07538(0x141)]==_0xf07538(0xcf))var _0x525af2=users['Hindi'];else{if(_0x4f0e74[0x0][_0xf07538(0x141)]==_0xf07538(0x160))var _0x525af2=users['German'];else{if(_0x4f0e74[0x0]['language']==_0xf07538(0x140))var _0x525af2=users['Spanish'];else{if(_0x4f0e74[0x0][_0xf07538(0x141)]==_0xf07538(0x13f))var _0x525af2=users[_0xf07538(0x13f)];else{if(_0x4f0e74[0x0][_0xf07538(0x141)]==_0xf07538(0x105))var _0x525af2=users[_0xf07538(0xe8)];else{if(_0x4f0e74[0x0]['language']==_0xf07538(0xbd))var _0x525af2=users[_0xf07538(0xbd)];else{if(_0x4f0e74[0x0]['language']=='Arabic\x20(ae)')var _0x525af2=users[_0xf07538(0xe6)];}}}}}}}_0x4a62e1[_0xf07538(0xe7)]('brands',{'success':_0x41e767[_0xf07538(0x152)]('success'),'errors':_0x41e767[_0xf07538(0x152)](_0xf07538(0x11c)),'role':_0x579ac6,'profile':_0x598a30,'master_shop':_0x4f0e74,'user':_0x2ff576,'language':_0x525af2});}catch(_0x240128){console[_0xf07538(0x158)](_0x240128);}}),router['post'](a0_0x21574c(0x13b),auth,async(_0x2c049b,_0x2cdb16)=>{const _0x2b17ce=a0_0x21574c;try{const _0x316dca=_0x2c049b[_0x2b17ce(0x101)]['id'],_0x286de9=await brands[_0x2b17ce(0x163)](_0x316dca,_0x2c049b[_0x2b17ce(0xe1)]);_0x2c049b['flash'](_0x2b17ce(0xf3),_0x2b17ce(0xd9)),_0x2cdb16[_0x2b17ce(0x133)](_0x2b17ce(0x113));}catch(_0x4b2238){console[_0x2b17ce(0x158)](_0x4b2238);}}),router[a0_0x21574c(0x129)]('/brands/delete/:id',auth,async(_0x453fc5,_0x5d420e)=>{const _0x44da89=a0_0x21574c;try{const _0x165917=_0x453fc5[_0x44da89(0x101)]['id'],_0x3a093e=await brands['findByIdAndDelete'](_0x165917);_0x453fc5[_0x44da89(0x152)]('success',_0x44da89(0xd4)),_0x5d420e[_0x44da89(0x133)](_0x44da89(0x113));}catch(_0x24f1bd){console[_0x44da89(0x158)](_0x24f1bd);}}),router[a0_0x21574c(0x129)](a0_0x21574c(0xfc),auth,async(_0x57b1c5,_0x15e1b6)=>{const _0x13d614=a0_0x21574c;try{const {username:_0x1e996e,email:_0x540753,role:_0x136b6d}=_0x57b1c5['user'],_0x203d06=_0x57b1c5['user'],_0x535905=await profile[_0x13d614(0x112)]({'email':_0x203d06[_0x13d614(0xc4)]}),_0x3e57af=await master_shop[_0x13d614(0x12c)]();console[_0x13d614(0x158)]('master',_0x3e57af);const _0x55d150=await units['find']();if(_0x3e57af[0x0][_0x13d614(0x141)]==_0x13d614(0xb4))var _0x409315=users[_0x13d614(0x147)];else{if(_0x3e57af[0x0]['language']=='Hindi')var _0x409315=users[_0x13d614(0xcf)];else{if(_0x3e57af[0x0][_0x13d614(0x141)]==_0x13d614(0x160))var _0x409315=users[_0x13d614(0x160)];else{if(_0x3e57af[0x0][_0x13d614(0x141)]=='Spanish')var _0x409315=users['Spanish'];else{if(_0x3e57af[0x0][_0x13d614(0x141)]==_0x13d614(0x13f))var _0x409315=users[_0x13d614(0x13f)];else{if(_0x3e57af[0x0][_0x13d614(0x141)]==_0x13d614(0x105))var _0x409315=users[_0x13d614(0xe8)];else{if(_0x3e57af[0x0][_0x13d614(0x141)]==_0x13d614(0xbd))var _0x409315=users[_0x13d614(0xbd)];else{if(_0x3e57af[0x0]['language']==_0x13d614(0xef))var _0x409315=users[_0x13d614(0xe6)];}}}}}}}_0x15e1b6[_0x13d614(0xe7)](_0x13d614(0x132),{'success':_0x57b1c5['flash']('success'),'errors':_0x57b1c5[_0x13d614(0x152)]('errors'),'role':_0x203d06,'profile':_0x535905,'master_shop':_0x3e57af,'user':_0x55d150,'language':_0x409315});}catch(_0x4ab881){console[_0x13d614(0x158)](_0x4ab881);}}),router[a0_0x21574c(0xb6)](a0_0x21574c(0xfc),auth,async(_0x46e0c7,_0x5866d)=>{const _0x58e94c=a0_0x21574c;try{const {name:_0x28b95e,secondary_unit:_0x55358c,products:_0x525772}=_0x46e0c7['body'],_0x460988=new units({'name':_0x28b95e,'secondary_unit':_0x55358c,'products':_0x525772}),_0x283a62=await units[_0x58e94c(0x112)]({'name':_0x28b95e});_0x283a62?_0x46e0c7[_0x58e94c(0x152)](_0x58e94c(0x11c),_0x28b95e+_0x58e94c(0x131)):_0x46e0c7['flash'](_0x58e94c(0xf3),_0x28b95e+_0x58e94c(0x145));const _0x2fedf2=await _0x460988[_0x58e94c(0x125)]();_0x5866d['redirect'](_0x58e94c(0xc1));}catch(_0xc91374){console[_0x58e94c(0x158)](_0xc91374);}}),router[a0_0x21574c(0x129)]('/units/:id',auth,async(_0x5d63e0,_0x18c0d9)=>{const _0x1021fa=a0_0x21574c;try{const {username:_0x90f998,email:_0x22bf3b,role:_0x2e727c}=_0x5d63e0[_0x1021fa(0xc3)],_0x57897d=_0x5d63e0[_0x1021fa(0xc3)],_0x213e26=await profile[_0x1021fa(0x112)]({'email':_0x57897d[_0x1021fa(0xc4)]}),_0x2ec2d9=await master_shop['find']();console[_0x1021fa(0x158)](_0x1021fa(0xd7),_0x2ec2d9);const _0x1d65fc=_0x5d63e0[_0x1021fa(0x101)]['id'],_0x683036=await units[_0x1021fa(0x12e)](_0x1d65fc);if(_0x2ec2d9[0x0][_0x1021fa(0x141)]==_0x1021fa(0xb4))var _0x3914f2=users[_0x1021fa(0x147)];else{if(_0x2ec2d9[0x0]['language']==_0x1021fa(0xcf))var _0x3914f2=users[_0x1021fa(0xcf)];else{if(_0x2ec2d9[0x0][_0x1021fa(0x141)]==_0x1021fa(0x160))var _0x3914f2=users[_0x1021fa(0x160)];else{if(_0x2ec2d9[0x0]['language']==_0x1021fa(0x140))var _0x3914f2=users[_0x1021fa(0x140)];else{if(_0x2ec2d9[0x0][_0x1021fa(0x141)]==_0x1021fa(0x13f))var _0x3914f2=users['French'];else{if(_0x2ec2d9[0x0]['language']=='Portuguese\x20(BR)')var _0x3914f2=users[_0x1021fa(0xe8)];else{if(_0x2ec2d9[0x0][_0x1021fa(0x141)]=='Chinese')var _0x3914f2=users[_0x1021fa(0xbd)];else{if(_0x2ec2d9[0x0][_0x1021fa(0x141)]==_0x1021fa(0xef))var _0x3914f2=users[_0x1021fa(0xe6)];}}}}}}}_0x18c0d9[_0x1021fa(0xe7)](_0x1021fa(0x132),{'success':_0x5d63e0[_0x1021fa(0x152)]('success'),'errors':_0x5d63e0[_0x1021fa(0x152)]('errors'),'role':_0x57897d,'profile':_0x213e26,'master_shop':_0x2ec2d9,'user':_0x683036,'language':_0x3914f2});}catch(_0x9cf5e){console['log'](_0x9cf5e);}}),router['post'](a0_0x21574c(0xe5),auth,async(_0x13f767,_0x55559b)=>{const _0x5bf720=a0_0x21574c;try{const _0x51f11c=_0x13f767[_0x5bf720(0x101)]['id'],_0x37a5ea=await units['findByIdAndUpdate'](_0x51f11c,_0x13f767['body']);_0x13f767[_0x5bf720(0x152)](_0x5bf720(0xf3),_0x5bf720(0x10a)),_0x55559b['redirect'](_0x5bf720(0xc1));}catch(_0x4b69ef){console[_0x5bf720(0x158)](_0x4b69ef);}}),router[a0_0x21574c(0x129)]('/units/delete/:id',auth,async(_0x14f8c7,_0x461306)=>{const _0x4ef7c5=a0_0x21574c;try{const _0x500f9e=_0x14f8c7[_0x4ef7c5(0x101)]['id'],_0x5e705e=await units[_0x4ef7c5(0x11e)](_0x500f9e);_0x14f8c7[_0x4ef7c5(0x152)](_0x4ef7c5(0xf3),_0x4ef7c5(0x127)),_0x461306['redirect'](_0x4ef7c5(0xc1));}catch(_0x5f4991){console['log'](_0x5f4991);}});const storage=multer[a0_0x21574c(0x123)]({'destination':(_0x76d1c6,_0xc880fc,_0xfc30f5)=>{const _0x45b110=a0_0x21574c;_0xfc30f5(null,_0x45b110(0xd2));},'filename':(_0x774efa,_0x30b883,_0x2f7546)=>{const _0x2f5d45=a0_0x21574c;_0x2f7546(null,Date[_0x2f5d45(0xb8)]()+_0x30b883[_0x2f5d45(0xec)]);}}),upload=multer({'storage':storage});router[a0_0x21574c(0x129)](a0_0x21574c(0x139),auth,async(_0x124a4e,_0x4a6bc5)=>{const _0x30eeed=a0_0x21574c;try{const {username:_0x21a5b7,email:_0x2ae292,role:_0x65c2ab}=_0x124a4e[_0x30eeed(0xc3)],_0x302fe5=_0x124a4e[_0x30eeed(0xc3)],_0x27a061=await profile[_0x30eeed(0x112)]({'email':_0x302fe5['email']}),_0x264ebf={'year':'numeric','month':'long','day':'numeric'},_0x16882d=await master_shop[_0x30eeed(0x12c)]();console[_0x30eeed(0x158)]('Products\x20master',_0x16882d);const _0x41a170=await product['find']();console[_0x30eeed(0x158)](_0x30eeed(0x15b),_0x41a170);const _0x2bfdb9=await warehouse[_0x30eeed(0xfd)]([{'$unwind':'$product_details'},{'$lookup':{'from':_0x30eeed(0xf7),'localField':_0x30eeed(0xfe),'foreignField':_0x30eeed(0x134),'as':'product_docs'}},{'$unwind':'$product_docs'},{'$project':{'product_name':_0x30eeed(0xf0),'product_stock':_0x30eeed(0x154)}},{'$group':{'_id':_0x30eeed(0x106),'product_stock':{'$sum':_0x30eeed(0x14d)}}}]);console[_0x30eeed(0x158)](_0x30eeed(0x136),_0x2bfdb9),_0x2bfdb9[_0x30eeed(0x167)](_0x3336d9=>{const _0x5a0c40=_0x30eeed,_0x3b0360=_0x41a170[_0x5a0c40(0xbf)](_0x9abc61=>{const _0x206d3b=_0x5a0c40;_0x9abc61[_0x206d3b(0x134)]==_0x3336d9[_0x206d3b(0x126)]&&(_0x9abc61['stock']=parseInt(_0x9abc61[_0x206d3b(0xee)])+parseInt(_0x3336d9[_0x206d3b(0x156)]));});}),console['log'](_0x30eeed(0x15b),_0x41a170);if(_0x16882d[0x0][_0x30eeed(0x141)]==_0x30eeed(0xb4))var _0x36ea82=users[_0x30eeed(0x147)];else{if(_0x16882d[0x0]['language']=='Hindi')var _0x36ea82=users[_0x30eeed(0xcf)];else{if(_0x16882d[0x0][_0x30eeed(0x141)]==_0x30eeed(0x160))var _0x36ea82=users[_0x30eeed(0x160)];else{if(_0x16882d[0x0]['language']==_0x30eeed(0x140))var _0x36ea82=users['Spanish'];else{if(_0x16882d[0x0][_0x30eeed(0x141)]==_0x30eeed(0x13f))var _0x36ea82=users['French'];else{if(_0x16882d[0x0][_0x30eeed(0x141)]==_0x30eeed(0x105))var _0x36ea82=users[_0x30eeed(0xe8)];else{if(_0x16882d[0x0][_0x30eeed(0x141)]=='Chinese')var _0x36ea82=users[_0x30eeed(0xbd)];else{if(_0x16882d[0x0][_0x30eeed(0x141)]==_0x30eeed(0xef))var _0x36ea82=users[_0x30eeed(0xe6)];}}}}}}}_0x4a6bc5[_0x30eeed(0xe7)](_0x30eeed(0xf7),{'success':_0x124a4e['flash']('success'),'errors':_0x124a4e[_0x30eeed(0x152)](_0x30eeed(0x11c)),'alldata':_0x41a170,'profile':_0x27a061,'master_shop':_0x16882d,'role':_0x302fe5,'product_stock':_0x2bfdb9,'language':_0x36ea82});}catch(_0x39e5ad){console[_0x30eeed(0x158)](_0x39e5ad);}}),router[a0_0x21574c(0x129)]('/view/add_products',auth,async(_0x6722d0,_0x50932e)=>{const _0x12e159=a0_0x21574c;try{const {username:_0x4c50ab,email:_0x5ef5e7,role:_0x5dedcc}=_0x6722d0[_0x12e159(0xc3)],_0x54c23a=_0x6722d0[_0x12e159(0xc3)],_0x1e07ba=await profile['findOne']({'email':_0x54c23a[_0x12e159(0xc4)]}),_0x20a25b=await master_shop[_0x12e159(0x12c)]();console['log'](_0x12e159(0xd7),_0x20a25b);const _0x5a2584=await categories['find']({}),_0x161ac3=await brands[_0x12e159(0x12c)]({}),_0x43661c=await units[_0x12e159(0x12c)]({}),_0x55e9b0=await warehouse[_0x12e159(0x12c)]({'status':_0x12e159(0xff)});if(_0x20a25b[0x0][_0x12e159(0x141)]==_0x12e159(0xb4))var _0x6b85a=users[_0x12e159(0x147)];else{if(_0x20a25b[0x0][_0x12e159(0x141)]==_0x12e159(0xcf))var _0x6b85a=users['Hindi'];else{if(_0x20a25b[0x0]['language']==_0x12e159(0x160))var _0x6b85a=users[_0x12e159(0x160)];else{if(_0x20a25b[0x0][_0x12e159(0x141)]=='Spanish')var _0x6b85a=users[_0x12e159(0x140)];else{if(_0x20a25b[0x0][_0x12e159(0x141)]==_0x12e159(0x13f))var _0x6b85a=users[_0x12e159(0x13f)];else{if(_0x20a25b[0x0][_0x12e159(0x141)]==_0x12e159(0x105))var _0x6b85a=users[_0x12e159(0xe8)];else{if(_0x20a25b[0x0][_0x12e159(0x141)]=='Chinese')var _0x6b85a=users[_0x12e159(0xbd)];else{if(_0x20a25b[0x0][_0x12e159(0x141)]==_0x12e159(0xef))var _0x6b85a=users['Arabic'];}}}}}}}_0x50932e[_0x12e159(0xe7)]('add_product',{'success':_0x6722d0['flash'](_0x12e159(0xf3)),'errors':_0x6722d0[_0x12e159(0x152)](_0x12e159(0x11c)),'role':_0x54c23a,'profile':_0x1e07ba,'categories':_0x5a2584,'brands':_0x161ac3,'master_shop':_0x20a25b,'units':_0x43661c,'language':_0x6b85a,'find_data':_0x55e9b0});}catch(_0x312899){console[_0x12e159(0x158)](_0x312899);}}),router[a0_0x21574c(0xb6)](a0_0x21574c(0x157),auth,upload[a0_0x21574c(0xe3)](a0_0x21574c(0xdc)),async(_0x5523e3,_0x5b10f9)=>{const _0x246aed=a0_0x21574c;try{const {name:_0x41957d,category:_0x3fa22c,brand:_0x344dd7,unit:_0x3af66b,alertquantity:_0x2a11d0,stock:_0xeec6f4,product_code:_0x341549,warehouse:_0x1e9d2a,primary_ItemCode:_0x17d2ef,second_ItemCode:_0x98ec29,second_unit:_0x58e87b,maxPerUnit:_0x45c581,MaxPerProduct:_0x5900aa,sales_cat:_0x31cdf6,type_prod:_0x824a98}=_0x5523e3[_0x246aed(0xe1)],_0x254076=_0x5523e3[_0x246aed(0xcd)]?.['filename']||'defaultProduct.avif',_0x467370=new product({'image':_0x254076,'name':_0x41957d,'category':_0x3fa22c,'brand':_0x344dd7,'unit':_0x3af66b,'alertquantity':_0x2a11d0,'stock':_0xeec6f4,'product_code':_0x341549,'warehouse':_0x1e9d2a,'primary_code':_0x17d2ef,'secondary_code':_0x98ec29,'second_unit':_0x58e87b,'maxStocks':_0x5900aa,'maxProdPerUnit':_0x45c581,'sales_category':_0x31cdf6,'type_products':_0x824a98}),_0x45280b=await _0x467370[_0x246aed(0x125)](),_0x5c2b44=await categories[_0x246aed(0x112)]({'name':_0x3fa22c});_0x5c2b44[_0x246aed(0xf7)]=parseInt(_0x5c2b44['products'])+0x1,await _0x5c2b44['save']();const _0x48a5e8=await brands['findOne']({'name':_0x344dd7});_0x48a5e8[_0x246aed(0xf7)]=parseInt(_0x48a5e8[_0x246aed(0xf7)])+0x1,await _0x48a5e8[_0x246aed(0x125)]();const _0x4d47c4=await units[_0x246aed(0x112)]({'name':_0x3af66b});_0x4d47c4[_0x246aed(0xf7)]=parseInt(_0x4d47c4[_0x246aed(0xf7)])+0x1,await _0x4d47c4[_0x246aed(0x125)](),_0x5523e3['flash'](_0x246aed(0xf3),_0x246aed(0x11a)),_0x5b10f9[_0x246aed(0x133)](_0x246aed(0x10f));}catch(_0x11b973){console[_0x246aed(0x158)](_0x11b973);}}),router[a0_0x21574c(0x129)](a0_0x21574c(0x107),auth,async(_0x463315,_0x2fe744)=>{const _0x3bc202=a0_0x21574c;try{const {username:_0x144305,email:_0x4757ab,role:_0x30e118}=_0x463315[_0x3bc202(0xc3)],_0x3eab42=_0x463315['user'],_0x14349e=await profile[_0x3bc202(0x112)]({'email':_0x3eab42['email']}),_0x3c4aed=await master_shop[_0x3bc202(0x12c)]();console[_0x3bc202(0x158)]('edit\x20Product\x20master',_0x3c4aed);const _0x1d0b0b=_0x463315['params']['id'],_0x4ddf3b=await product[_0x3bc202(0x12e)](_0x1d0b0b),_0x325bcb=await categories[_0x3bc202(0x12c)]({}),_0x4d28c1=await brands[_0x3bc202(0x12c)]({}),_0x1eeca3=await units['find']({}),_0x4e8aa8=await warehouse['find']({'status':_0x3bc202(0xff)}),_0xa17959=await units['aggregate']([{'$group':{'_id':_0x3bc202(0x12d),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x3c4aed[0x0][_0x3bc202(0x141)]==_0x3bc202(0xb4))var _0x3cb236=users[_0x3bc202(0x147)];else{if(_0x3c4aed[0x0][_0x3bc202(0x141)]==_0x3bc202(0xcf))var _0x3cb236=users[_0x3bc202(0xcf)];else{if(_0x3c4aed[0x0][_0x3bc202(0x141)]==_0x3bc202(0x160))var _0x3cb236=users[_0x3bc202(0x160)];else{if(_0x3c4aed[0x0][_0x3bc202(0x141)]==_0x3bc202(0x140))var _0x3cb236=users['Spanish'];else{if(_0x3c4aed[0x0][_0x3bc202(0x141)]==_0x3bc202(0x13f))var _0x3cb236=users[_0x3bc202(0x13f)];else{if(_0x3c4aed[0x0][_0x3bc202(0x141)]==_0x3bc202(0x105))var _0x3cb236=users[_0x3bc202(0xe8)];else{if(_0x3c4aed[0x0][_0x3bc202(0x141)]==_0x3bc202(0xbd))var _0x3cb236=users[_0x3bc202(0xbd)];else{if(_0x3c4aed[0x0][_0x3bc202(0x141)]=='Arabic\x20(ae)')var _0x3cb236=users[_0x3bc202(0xe6)];}}}}}}}_0x2fe744[_0x3bc202(0xe7)](_0x3bc202(0x102),{'success':_0x463315[_0x3bc202(0x152)](_0x3bc202(0xf3)),'errors':_0x463315[_0x3bc202(0x152)]('errors'),'role':_0x3eab42,'profile':_0x14349e,'alldata':_0x4ddf3b,'categories':_0x325bcb,'brands':_0x4d28c1,'master_shop':_0x3c4aed,'units':_0x1eeca3,'secondunit':_0xa17959,'find_data':_0x4e8aa8,'language':_0x3cb236});}catch(_0x1e42a3){console[_0x3bc202(0x158)](_0x1e42a3);}}),router[a0_0x21574c(0xb6)]('/view/:id',auth,upload['single']('image'),async(_0x267ec9,_0x2c4deb)=>{const _0x287cbd=a0_0x21574c;try{const _0x418991=_0x267ec9[_0x287cbd(0x101)]['id'],_0x3ab0ab=await product[_0x287cbd(0x12e)](_0x418991),{image:_0x35c24a,name:_0xc8a42e,category:_0x38c1e0,brand:_0x3e7862,sku:_0x3b8020,unit:_0x1a49ef,alertquantity:_0x4b9fd9,product_code:_0xcb8f45,warehouse:_0x2dd187,primary_ItemCode:_0x4970dd,second_ItemCode:_0x65ca1f,second_unit:_0x28df3a,maxPerUnit:_0x1900f4,MaxPerProduct:_0x1848e0,prod_catdata:_0x651020,type_prod:_0x4edbf3,sales_cat:_0x4a20a1}=_0x267ec9[_0x287cbd(0xe1)];_0x267ec9[_0x287cbd(0xcd)]&&(_0x3ab0ab[_0x287cbd(0xdc)]=_0x267ec9[_0x287cbd(0xcd)][_0x287cbd(0x16b)]);_0x3ab0ab[_0x287cbd(0x134)]=_0xc8a42e,_0x3ab0ab[_0x287cbd(0x135)]=_0x38c1e0,_0x3ab0ab['brand']=_0x3e7862,_0x3ab0ab[_0x287cbd(0x104)]=_0x3b8020,_0x3ab0ab[_0x287cbd(0x15d)]=_0x1a49ef,_0x3ab0ab[_0x287cbd(0x119)]=_0x4b9fd9,_0x3ab0ab[_0x287cbd(0xc8)]=_0xcb8f45,_0x3ab0ab[_0x287cbd(0x16c)]=_0x2dd187,_0x3ab0ab[_0x287cbd(0x124)]=_0x4970dd,_0x3ab0ab[_0x287cbd(0x120)]=_0x65ca1f,_0x3ab0ab['secondary_unit']=_0x28df3a,_0x3ab0ab['maxStocks']=_0x1848e0,_0x3ab0ab[_0x287cbd(0xc9)]=_0x1900f4,_0x3ab0ab['product_category']=_0x651020,_0x3ab0ab['type_products']=_0x4edbf3,_0x3ab0ab[_0x287cbd(0xbc)]=_0x4a20a1;const _0x1b9e3d=await _0x3ab0ab['save']();console[_0x287cbd(0x158)]('product\x20edit',_0x3ab0ab),_0x267ec9[_0x287cbd(0x152)]('success',_0x287cbd(0xd1)),_0x2c4deb['redirect'](_0x287cbd(0x10f));}catch(_0x304074){console['log'](_0x304074);}}),router[a0_0x21574c(0x129)]('/barcode/:id',auth,async(_0x5d4588,_0x35188a)=>{const _0x148818=a0_0x21574c;try{const {username:_0xde1d89,email:_0x502b81,role:_0x40bb6a}=_0x5d4588[_0x148818(0xc3)],_0x15761a=_0x5d4588[_0x148818(0xc3)],_0x3facef=await profile[_0x148818(0x112)]({'email':_0x15761a[_0x148818(0xc4)]}),_0x5dbd31=await master_shop['find']();console['log'](_0x148818(0x10c),_0x5dbd31);const _0x584485=_0x5d4588['params']['id'],_0x58bb11=await product[_0x148818(0x12e)](_0x584485);console[_0x148818(0x158)](_0x148818(0x151),_0x58bb11);if(_0x5dbd31[0x0][_0x148818(0x141)]==_0x148818(0xb4))var _0xb7f9f4=users[_0x148818(0x147)];else{if(_0x5dbd31[0x0][_0x148818(0x141)]==_0x148818(0xcf))var _0xb7f9f4=users[_0x148818(0xcf)];else{if(_0x5dbd31[0x0]['language']==_0x148818(0x160))var _0xb7f9f4=users[_0x148818(0x160)];else{if(_0x5dbd31[0x0]['language']==_0x148818(0x140))var _0xb7f9f4=users[_0x148818(0x140)];else{if(_0x5dbd31[0x0][_0x148818(0x141)]==_0x148818(0x13f))var _0xb7f9f4=users[_0x148818(0x13f)];else{if(_0x5dbd31[0x0][_0x148818(0x141)]==_0x148818(0x105))var _0xb7f9f4=users['Portuguese'];else{if(_0x5dbd31[0x0][_0x148818(0x141)]==_0x148818(0xbd))var _0xb7f9f4=users['Chinese'];else{if(_0x5dbd31[0x0]['language']==_0x148818(0xef))var _0xb7f9f4=users['Arabic'];}}}}}}}_0x35188a['render']('product_barcode',{'success':_0x5d4588['flash'](_0x148818(0xf3)),'errors':_0x5d4588[_0x148818(0x152)](_0x148818(0x11c)),'role':_0x15761a,'profile':_0x3facef,'alldata':_0x58bb11,'master_shop':_0x5dbd31,'language':_0xb7f9f4});}catch(_0x54569c){console[_0x148818(0x158)](_0x54569c);}}),router[a0_0x21574c(0x129)](a0_0x21574c(0xe9),auth,async(_0x4b0552,_0x534bff)=>{const _0x127b9b=a0_0x21574c;try{const _0x3aea5a=new excelJS[(_0x127b9b(0x162))](),_0x3d9797=_0x3aea5a['addWorksheet']('Products');return _0x3d9797[_0x127b9b(0xf5)]=[{'header':_0x127b9b(0x13e),'key':_0x127b9b(0xc6),'width':0xa},{'header':_0x127b9b(0xbe),'key':_0x127b9b(0x14f),'width':0xa},{'header':_0x127b9b(0x13c),'key':_0x127b9b(0x142),'width':0xa},{'header':_0x127b9b(0x15f),'key':_0x127b9b(0xf1),'width':0xa},{'header':_0x127b9b(0x11f),'key':_0x127b9b(0x144),'width':0xa},{'header':_0x127b9b(0x12b),'key':'ProductCode','width':0xa},{'header':_0x127b9b(0x137),'key':_0x127b9b(0x122),'width':0xa},{'header':_0x127b9b(0xf8),'key':_0x127b9b(0x122),'width':0xa},{'header':_0x127b9b(0xb7),'key':_0x127b9b(0x111),'width':0xa},{'header':_0x127b9b(0xb2),'key':_0x127b9b(0x164),'width':0xa},{'header':_0x127b9b(0x15e),'key':_0x127b9b(0x164),'width':0xa},{'header':_0x127b9b(0x13a),'key':_0x127b9b(0x159),'width':0xa}],_0x534bff['setHeader']('Content-Type',_0x127b9b(0x11d)),_0x534bff[_0x127b9b(0xc5)]('Content-Disposition',_0x127b9b(0x161)),_0x3aea5a[_0x127b9b(0xcb)][_0x127b9b(0xf9)](_0x534bff)[_0x127b9b(0x130)](()=>{const _0x10b7ab=_0x127b9b;_0x534bff[_0x10b7ab(0x14e)](0xc8);});}catch(_0x72ae73){_0x534bff[_0x127b9b(0x14e)](0x190)[_0x127b9b(0x115)](_0x72ae73);}});const storage1=multer[a0_0x21574c(0x123)]({'destination':(_0x24551d,_0x3646cd,_0x4c7029)=>{const _0x263cba=a0_0x21574c;_0x4c7029(null,_0x263cba(0x15a));},'filename':(_0x4006a9,_0x2265c7,_0x19d793)=>{const _0x4ef01d=a0_0x21574c;_0x19d793(null,Date[_0x4ef01d(0xb8)]()+_0x2265c7[_0x4ef01d(0xec)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x21574c(0xb6)](a0_0x21574c(0x15c),auth,uploadMigrate[a0_0x21574c(0xe3)]('migrate_product_fule'),async(_0x46645b,_0x111471)=>{const _0x50b379=a0_0x21574c,_0x4c0d67=_0x46645b[_0x50b379(0xcd)][_0x50b379(0x16b)],_0x32cedf=await xlsx[_0x50b379(0x12f)](_0x50b379(0x10b)+_0x4c0d67);let _0x244041=_0x32cedf[_0x50b379(0x146)],_0x5e8e98=xlsx[_0x50b379(0xd8)][_0x50b379(0xd3)](_0x32cedf[_0x50b379(0x150)][_0x244041[0x0]]);for(const _0x3fc028 of _0x5e8e98){const _0x9247e1=_0x3fc028['Product_Name'],_0x5bf9e0=_0x3fc028[_0x50b379(0xbe)],_0x1c92bc=_0x3fc028[_0x50b379(0x13c)],_0x398a9e=_0x3fc028[_0x50b379(0x15f)],_0x50124c=_0x3fc028['Product_Code'],_0x442280=_0x3fc028[_0x50b379(0xb7)],_0x31d441=_0x3fc028[_0x50b379(0xb2)],_0x44572d=_0x3fc028[_0x50b379(0x12b)],_0x2fd808=_0x3fc028['Secondary_Code'],_0x33e15b=_0x3fc028[_0x50b379(0x15e)],_0x1157f3=_0x3fc028[_0x50b379(0x11f)],_0x41728c=_0x3fc028[_0x50b379(0x13a)];try{let _0x4370ef=await categories['findOne']({'name':_0x442280});if(!_0x4370ef){const _0x58ce05=new categories({'name':_0x442280,'products':'0'});_0x4370ef=await _0x58ce05[_0x50b379(0x125)]();}let _0x3b7505=await brands['findOne']({'name':_0x5bf9e0});if(!_0x3b7505){const _0x394970=new brands({'name':_0x5bf9e0,'products':'0'});_0x3b7505=await _0x394970['save']();}let _0x3dc2a8=await units[_0x50b379(0x112)]({'name':_0x1c92bc,'secondary_unit':_0x398a9e});if(!_0x3dc2a8){const _0x5cc281=new units({'name':_0x1c92bc,'secondary_unit':_0x398a9e,'products':'0'});_0x3dc2a8=await _0x5cc281[_0x50b379(0x125)]();}const _0x32058d=await product[_0x50b379(0x12c)]({'name':_0x9247e1,'category':_0x4370ef['name'],'brand':_0x3b7505[_0x50b379(0x134)],'secondary_unit':_0x3dc2a8[_0x50b379(0xb1)],'product_code':_0x50124c});console[_0x50b379(0x158)](_0x32058d['length']+_0x50b379(0x165)+_0x4370ef[_0x50b379(0x134)]+_0x50b379(0x165)+_0x3b7505[_0x50b379(0x134)]+'\x20<>\x20'+_0x3dc2a8[_0x50b379(0xb1)]+'\x20<>\x20'+_0x50124c+_0x50b379(0x165)+_0x9247e1);if(_0x32058d['length']===0x0){const _0x300379=new product({'image':_0x50b379(0x103),'name':_0x9247e1,'category':_0x4370ef[_0x50b379(0x134)],'brand':_0x3b7505['name'],'unit':_0x3dc2a8[_0x50b379(0x134)],'alertquantity':_0x31d441,'product_code':_0x50124c,'secondary_unit':_0x3dc2a8[_0x50b379(0xb1)],'primary_code':_0x44572d,'secondary_code':_0x2fd808,'maxStocks':_0x33e15b,'maxProdPerUnit':_0x1157f3,'product_category':_0x41728c}),_0xaa21d1=await _0x300379[_0x50b379(0x125)]();_0x4370ef[_0x50b379(0xf7)]=parseInt(_0x4370ef[_0x50b379(0xf7)])+0x1,await _0x4370ef[_0x50b379(0x125)](),_0x3b7505['products']=parseInt(_0x3b7505[_0x50b379(0xf7)])+0x1,await _0x3b7505[_0x50b379(0x125)](),_0x3dc2a8[_0x50b379(0xf7)]=parseInt(_0x3dc2a8['products'])+0x1,await _0x3dc2a8[_0x50b379(0x125)](),_0x46645b[_0x50b379(0x152)]('success',_0x9247e1+'\x20added\x20successfully');}else{console[_0x50b379(0x158)](_0x32058d[0x0]);const _0xb838c=_0x32058d[0x0];_0xb838c[_0x50b379(0x135)]=_0x4370ef[_0x50b379(0x134)],_0xb838c['brand']=_0x3b7505['name'],_0xb838c['unit']=_0x3dc2a8[_0x50b379(0x134)],_0xb838c['alertquantity']=_0x31d441,_0xb838c['product_code']=_0x50124c,_0xb838c[_0x50b379(0xb1)]=_0x3dc2a8[_0x50b379(0xb1)],_0xb838c[_0x50b379(0x124)]=_0x44572d,_0xb838c[_0x50b379(0x120)]=_0x2fd808,_0xb838c[_0x50b379(0xfa)]=_0x33e15b,_0xb838c[_0x50b379(0xc9)]=_0x1157f3,_0xb838c['product_category']=_0x41728c;const _0x30a86f=await _0xb838c[_0x50b379(0x125)]();_0x46645b[_0x50b379(0x152)](_0x50b379(0xf3),_0x30a86f[_0x50b379(0x134)]+_0x50b379(0xda));}}catch(_0x2b0800){_0x111471['status'](0x1f4)[_0x50b379(0x128)]({'proderror':_0x2b0800['message'],'aproduct':_0x9247e1});}}_0x111471[_0x50b379(0x133)](_0x50b379(0x10f));}),router['post'](a0_0x21574c(0xbb),auth,async(_0x4cc4dd,_0x588df1)=>{const _0xcdafda=a0_0x21574c;try{console[_0xcdafda(0x158)](_0x4cc4dd[_0xcdafda(0xe1)]);const {data_cateory:_0x4503be,datachoose:_0x2b5c4c}=_0x4cc4dd['body'];var _0x2351c7;if(_0x2b5c4c==_0xcdafda(0xca))_0x2351c7=await product[_0xcdafda(0xfd)]([{'$group':{'_id':_0xcdafda(0x12a)}}]);else{if(_0x2b5c4c==_0xcdafda(0x155))_0x2351c7=await product['aggregate']([{'$match':{'product_category':_0x4503be}},{'$group':{'_id':_0xcdafda(0x108)}}]);else _0x2b5c4c==_0xcdafda(0xf6)&&(_0x2351c7=await product[_0xcdafda(0xfd)]([{'$match':{'product_category':_0x4503be}},{'$group':{'_id':'$category'}}]));}_0x588df1['json'](_0x2351c7);}catch(_0x18f77a){_0x588df1[_0xcdafda(0x128)]({'message':_0x18f77a[_0xcdafda(0x14a)]});}}),router[a0_0x21574c(0xb6)](a0_0x21574c(0xb9),auth,async(_0x17f04a,_0x53aa38)=>{const _0x2c7c4d=a0_0x21574c;try{const {data_choosing:_0x59c5ef,data_selected:_0xff3649}=_0x17f04a[_0x2c7c4d(0xe1)];var _0x232218;if(_0x59c5ef==_0x2c7c4d(0xca))_0x232218=await product[_0x2c7c4d(0xfd)]([{'$match':{'product_category':_0xff3649}}]);else{if(_0x59c5ef==_0x2c7c4d(0x155))_0x232218=await product[_0x2c7c4d(0xfd)]([{'$match':{'brand':_0xff3649}}]);else _0x59c5ef==_0x2c7c4d(0xf6)&&(_0x232218=await product['aggregate']([{'$match':{'category':_0xff3649}}]));}_0x53aa38[_0x2c7c4d(0x128)](_0x232218);}catch(_0x58c842){_0x53aa38['json']({'message':_0x58c842[_0x2c7c4d(0x14a)]});}}),router[a0_0x21574c(0x129)](a0_0x21574c(0x116),auth,async(_0x7e24d7,_0xd13d33)=>{const _0x335f10=a0_0x21574c,_0x3a77e8=_0x7e24d7[_0x335f10(0xc3)],_0x6e0766=await profile['findOne']({'email':_0x3a77e8[_0x335f10(0xc4)]}),_0x53bb78=await master_shop[_0x335f10(0x12c)](),_0x545439=await product['find']();if(_0x53bb78[0x0][_0x335f10(0x141)]==_0x335f10(0xb4))var _0x332bb9=users[_0x335f10(0x147)];else{if(_0x53bb78[0x0]['language']=='Hindi')var _0x332bb9=users[_0x335f10(0xcf)];else{if(_0x53bb78[0x0][_0x335f10(0x141)]==_0x335f10(0x160))var _0x332bb9=users['German'];else{if(_0x53bb78[0x0][_0x335f10(0x141)]=='Spanish')var _0x332bb9=users[_0x335f10(0x140)];else{if(_0x53bb78[0x0][_0x335f10(0x141)]=='French')var _0x332bb9=users[_0x335f10(0x13f)];else{if(_0x53bb78[0x0]['language']==_0x335f10(0x105))var _0x332bb9=users[_0x335f10(0xe8)];else{if(_0x53bb78[0x0][_0x335f10(0x141)]==_0x335f10(0xbd))var _0x332bb9=users[_0x335f10(0xbd)];else{if(_0x53bb78[0x0][_0x335f10(0x141)]==_0x335f10(0xef))var _0x332bb9=users[_0x335f10(0xe6)];}}}}}}}_0xd13d33[_0x335f10(0xe7)]('product_barcode_products',{'success':_0x7e24d7[_0x335f10(0x152)](_0x335f10(0xf3)),'errors':_0x7e24d7[_0x335f10(0x152)](_0x335f10(0x11c)),'role':_0x3a77e8,'profile':_0x6e0766,'products':_0x545439,'master_shop':_0x53bb78,'language':_0x332bb9});}),router['post']('/barcode_data',auth,async(_0x5a75d9,_0x3603f0)=>{const _0x22c308=a0_0x21574c,_0x16cf71=await product[_0x22c308(0x12c)]();_0x3603f0['json']({'data':_0x16cf71});}),router[a0_0x21574c(0xb6)]('/barcode_filter',auth,async(_0x429fcd,_0x548cd6)=>{const _0x43a9e9=a0_0x21574c;try{const {dataProdCat:_0x2c9ba4,dataProdIdentity:_0x101ea2}=_0x429fcd[_0x43a9e9(0xe1)];var _0x2b5603;switch(_0x2c9ba4){case'fg':switch(_0x101ea2){case _0x43a9e9(0xbe):_0x2b5603=await product['aggregate']([{'$match':{'product_category':_0x43a9e9(0x169)}},{'$group':{'_id':_0x43a9e9(0x108)}},{'$project':{'brand':'$_id'}}]);break;case _0x43a9e9(0xb7):_0x2b5603=await product[_0x43a9e9(0xfd)]([{'$match':{'product_category':_0x43a9e9(0x169)}},{'$group':{'_id':_0x43a9e9(0xcc)}},{'$project':{'category':_0x43a9e9(0x12d)}}]);break;}break;case'rm':switch(_0x101ea2){case'Brands':_0x2b5603=await product[_0x43a9e9(0xfd)]([{'$match':{'product_category':_0x43a9e9(0xf2)}},{'$group':{'_id':_0x43a9e9(0x108)}},{'$project':{'brand':_0x43a9e9(0x12d)}}]);break;case _0x43a9e9(0xb7):_0x2b5603=await product[_0x43a9e9(0xfd)]([{'$match':{'product_category':_0x43a9e9(0xf2)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x43a9e9(0x12d)}}]);break;}break;}_0x548cd6[_0x43a9e9(0x128)](_0x2b5603);}catch(_0x57cab8){_0x548cd6['json']({'message':_0x57cab8[_0x43a9e9(0x14a)]});}}),router['post'](a0_0x21574c(0xf4),auth,async(_0x9f21c7,_0x7643bd)=>{const _0x3cb0cf=a0_0x21574c;try{console['log'](_0x9f21c7[_0x3cb0cf(0xe1)]);const {prod_cat:_0x2c5434,identity:_0x7c5a7a,valueData:_0x4d3f35,typeofbarcode:_0x1e1c6d}=_0x9f21c7[_0x3cb0cf(0xe1)];let _0x69646;switch(_0x2c5434){case'fg':if(_0x7c5a7a=='Brands')_0x69646=await product[_0x3cb0cf(0xfd)]([{'$match':{'product_category':_0x3cb0cf(0x169),'brand':_0x4d3f35}}]);else _0x7c5a7a==_0x3cb0cf(0xb7)&&(_0x69646=await product[_0x3cb0cf(0xfd)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x4d3f35}}]));break;case'rm':if(_0x7c5a7a==_0x3cb0cf(0xbe))_0x69646=await product['aggregate']([{'$match':{'product_category':_0x3cb0cf(0xf2),'brand':_0x4d3f35}}]);else _0x7c5a7a==_0x3cb0cf(0xb7)&&(_0x69646=await product[_0x3cb0cf(0xfd)]([{'$match':{'product_category':_0x3cb0cf(0xf2),'category':_0x4d3f35}}]));break;}const _0x5cb73a=_0x5cdc4d=>_0x5cdc4d*0x48,_0x5c380e={'width':0x3,'height':0x1},_0xc2ad78=new PDFDocument({'margin':_0x5cb73a(0.75),'size':[_0x5cb73a(_0x5c380e[_0x3cb0cf(0x10d)]),_0x5cb73a(_0x5c380e[_0x3cb0cf(0xe4)])],'bufferPages':!![]}),_0x59ffc9=_0x69646[_0x3cb0cf(0xdb)];for(let _0x495558=0x0;_0x495558<=_0x59ffc9;_0x495558++){if(_0x495558!=_0x59ffc9){const _0x12b33e=_0x69646[_0x495558][_0x3cb0cf(0x134)],_0x100852=_0x69646[_0x495558][_0x3cb0cf(0x124)],_0x1ea52e=_0x69646[_0x495558][_0x3cb0cf(0x120)],_0x371057=_0x69646[_0x495558][_0x3cb0cf(0xc8)];var _0x4a5ae0;switch(_0x1e1c6d){case'1':_0x4a5ae0=_0x100852;break;case'2':_0x4a5ae0=_0x1ea52e;break;case'3':_0x4a5ae0=_0x371057;break;}const _0x2e5d96={'width':0xd2,'height':0x64},_0xcace1a={'width':_0x5cb73a(_0x5c380e[_0x3cb0cf(0x10d)]),'height':_0x5cb73a(_0x5c380e['height'])},_0x12c604=new Canvas();JsBarcode(_0x12c604,_0x4a5ae0,{'format':'CODE128','height':_0x2e5d96[_0x3cb0cf(0xe4)],'displayValue':!![],'text':_0x4a5ae0});const _0x569d16=_0x12c604[_0x3cb0cf(0xc2)](),_0x637a55=_0xcace1a['width']/_0x2e5d96['width'],_0x2d4311=_0xcace1a[_0x3cb0cf(0xe4)]/_0x2e5d96['height'],_0x23cefd=Math[_0x3cb0cf(0xd0)](_0x637a55,_0x2d4311),_0x2ad2a4=_0x2e5d96[_0x3cb0cf(0x10d)]*_0x23cefd,_0x423d1f=_0x2e5d96[_0x3cb0cf(0xe4)]*_0x23cefd,_0x24ed93=(_0xcace1a['width']-_0x2ad2a4)/0x2,_0x20b142=(_0xcace1a[_0x3cb0cf(0xe4)]-_0x423d1f)/0x2;_0xc2ad78['image'](_0x569d16,_0x24ed93,_0x20b142,{'width':_0x2ad2a4,'height':_0x423d1f}),_0x495558!=_0x59ffc9&&_0xc2ad78['addPage']();}}const _0x5b0622=[];_0xc2ad78['on']('data',_0x5b0622[_0x3cb0cf(0x166)]['bind'](_0x5b0622)),_0xc2ad78['on'](_0x3cb0cf(0xba),()=>{const _0x3123aa=_0x3cb0cf,_0x4c440b=Buffer['concat'](_0x5b0622),_0x352faf=_0x4c440b[_0x3123aa(0xb5)](_0x3123aa(0x10e));_0x7643bd[_0x3123aa(0x128)]({'pdfContent':_0x352faf});}),_0xc2ad78['end']();}catch(_0x1f1216){_0x7643bd[_0x3cb0cf(0x128)]({'message':_0x1f1216[_0x3cb0cf(0x14a)]});}}),router['post'](a0_0x21574c(0x153),auth,async(_0x549435,_0xb8c185)=>{const _0x432040=a0_0x21574c;try{console['log'](_0x549435[_0x432040(0xe1)]);const {prod_cat:_0x2a596e,identity:_0x354ec3,valueData:_0xb43be8}=_0x549435[_0x432040(0xe1)];let _0x73e879;switch(_0x2a596e){case'fg':if(_0x354ec3==_0x432040(0xbe))_0x73e879=await product[_0x432040(0xfd)]([{'$match':{'product_category':_0x432040(0x169),'brand':_0xb43be8}}]);else _0x354ec3==_0x432040(0xb7)&&(_0x73e879=await product[_0x432040(0xfd)]([{'$match':{'product_category':'Finished\x20Goods','category':_0xb43be8}}]));break;case'rm':if(_0x354ec3==_0x432040(0xbe))_0x73e879=await product['aggregate']([{'$match':{'product_category':_0x432040(0xf2),'brand':_0xb43be8}}]);else _0x354ec3=='Category'&&(_0x73e879=await product[_0x432040(0xfd)]([{'$match':{'product_category':_0x432040(0xf2),'category':_0xb43be8}}]));break;}_0xb8c185[_0x432040(0x128)]({'data':_0x73e879});}catch(_0x5b6db5){_0xb8c185[_0x432040(0x128)]({'message':_0x5b6db5[_0x432040(0x14a)]});}}),router['post'](a0_0x21574c(0x14b),auth,async(_0x300583,_0x4eef62)=>{const _0x5b6cba=a0_0x21574c;try{const _0x1cded8=_0x300583['params']['id'],{copies:_0x1454b7,typeofbarcode:_0x9b8fbd}=_0x300583[_0x5b6cba(0xe1)];var _0x476a5d=await product['findById'](_0x1cded8);const _0x27a240=_0x2699fd=>_0x2699fd*0x48,_0x27c849={'width':0x3,'height':0x1},_0x2c7b98=new PDFDocument({'margin':_0x27a240(0.75),'size':[_0x27a240(_0x27c849[_0x5b6cba(0x10d)]),_0x27a240(_0x27c849[_0x5b6cba(0xe4)])],'bufferPages':!![]}),_0x1f515c=_0x1454b7,_0x9c5b9a=_0x476a5d[_0x5b6cba(0x134)],_0x1d4cc5=_0x476a5d[_0x5b6cba(0x124)],_0x5a1a73=_0x476a5d['secondary_code'],_0x15e352=_0x476a5d[_0x5b6cba(0xc8)];let _0x592813;switch(_0x9b8fbd){case'1':_0x592813=_0x1d4cc5;break;case'2':_0x592813=_0x5a1a73;break;case'3':_0x592813=_0x15e352;break;}const _0x15cec3={'width':0xd2,'height':0x64},_0x448580={'width':_0x27a240(_0x27c849[_0x5b6cba(0x10d)]),'height':_0x27a240(_0x27c849[_0x5b6cba(0xe4)])};for(let _0x1de72b=0x1;_0x1de72b<=_0x1f515c;_0x1de72b++){const _0x504d48=new Canvas();JsBarcode(_0x504d48,_0x592813,{'format':_0x5b6cba(0x109),'height':_0x15cec3['height'],'displayValue':!![],'text':_0x592813});const _0x147fd8=_0x504d48[_0x5b6cba(0xc2)](),_0x3d868a=_0x448580[_0x5b6cba(0x10d)]/_0x15cec3[_0x5b6cba(0x10d)],_0x28a77c=_0x448580[_0x5b6cba(0xe4)]/_0x15cec3[_0x5b6cba(0xe4)],_0x434ccd=Math[_0x5b6cba(0xd0)](_0x3d868a,_0x28a77c),_0x361a3f=_0x15cec3['width']*_0x434ccd,_0x47751a=_0x15cec3[_0x5b6cba(0xe4)]*_0x434ccd,_0x1fbac7=(_0x448580[_0x5b6cba(0x10d)]-_0x361a3f)/0x2,_0x554d83=(_0x448580[_0x5b6cba(0xe4)]-_0x47751a)/0x2;_0x2c7b98[_0x5b6cba(0xdc)](_0x147fd8,_0x1fbac7,_0x554d83,{'width':_0x361a3f,'height':_0x47751a}),_0x1de72b!=_0x1f515c&&_0x2c7b98[_0x5b6cba(0x117)]();}const _0x4679e6=[];_0x2c7b98['on'](_0x5b6cba(0xed),_0x4679e6['push']['bind'](_0x4679e6)),_0x2c7b98['on'](_0x5b6cba(0xba),()=>{const _0x532b14=_0x5b6cba,_0x1821e4=Buffer[_0x532b14(0x148)](_0x4679e6),_0x13ee69=_0x1821e4[_0x532b14(0xb5)](_0x532b14(0x10e));_0x4eef62[_0x532b14(0x128)]({'pdfContent':_0x13ee69});}),_0x2c7b98[_0x5b6cba(0xba)]();}catch(_0x48ddb3){_0x4eef62[_0x5b6cba(0x128)]({'message':_0x48ddb3[_0x5b6cba(0x14a)]});}}),module[a0_0x21574c(0xc7)]=router;