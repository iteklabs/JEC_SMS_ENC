const a0_0x1432ab=a0_0x170a;(function(_0x55567f,_0x1c08fc){const _0x212b12=a0_0x170a,_0x4cfbc5=_0x55567f();while(!![]){try{const _0x349b03=parseInt(_0x212b12(0x245))/0x1+-parseInt(_0x212b12(0x1f1))/0x2+-parseInt(_0x212b12(0x283))/0x3*(parseInt(_0x212b12(0x20d))/0x4)+-parseInt(_0x212b12(0x248))/0x5*(-parseInt(_0x212b12(0x241))/0x6)+-parseInt(_0x212b12(0x257))/0x7+parseInt(_0x212b12(0x229))/0x8+parseInt(_0x212b12(0x1e5))/0x9*(parseInt(_0x212b12(0x242))/0xa);if(_0x349b03===_0x1c08fc)break;else _0x4cfbc5['push'](_0x4cfbc5['shift']());}catch(_0x4240b3){_0x4cfbc5['push'](_0x4cfbc5['shift']());}}}(a0_0x23ad,0xe0601));const express=require(a0_0x1432ab(0x1fb)),res=require(a0_0x1432ab(0x23f)),app=express(),router=express[a0_0x1432ab(0x20e)](),multer=require(a0_0x1432ab(0x23e)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x1432ab(0x24f)),excelJS=require(a0_0x1432ab(0x1ea)),xlsx=require(a0_0x1432ab(0x1cb)),JsBarcode=require(a0_0x1432ab(0x28b)),{Canvas}=require(a0_0x1432ab(0x28d)),PDFDocument=require(a0_0x1432ab(0x269));router[a0_0x1432ab(0x28a)]('/categories',auth,async(_0x23ae71,_0x3d3af6)=>{const _0x58ef98=a0_0x1432ab;try{const {username:_0x2bf752,email:_0x3b4521,role:_0x2169c3}=_0x23ae71[_0x58ef98(0x212)],_0x227207=_0x23ae71[_0x58ef98(0x212)],_0x416c3b=await profile['findOne']({'email':_0x227207[_0x58ef98(0x207)]}),_0x2ecd48=await master_shop['find']();console[_0x58ef98(0x208)](_0x58ef98(0x278),_0x2ecd48);const _0x18d41c=await categories['find']();if(_0x2ecd48[0x0][_0x58ef98(0x26f)]==_0x58ef98(0x1e3))var _0x561db6=users[_0x58ef98(0x25d)];else{if(_0x2ecd48[0x0][_0x58ef98(0x26f)]==_0x58ef98(0x21a))var _0x561db6=users['Hindi'];else{if(_0x2ecd48[0x0][_0x58ef98(0x26f)]==_0x58ef98(0x213))var _0x561db6=users[_0x58ef98(0x213)];else{if(_0x2ecd48[0x0]['language']==_0x58ef98(0x1ce))var _0x561db6=users[_0x58ef98(0x1ce)];else{if(_0x2ecd48[0x0]['language']==_0x58ef98(0x22d))var _0x561db6=users[_0x58ef98(0x22d)];else{if(_0x2ecd48[0x0]['language']==_0x58ef98(0x1d4))var _0x561db6=users[_0x58ef98(0x1da)];else{if(_0x2ecd48[0x0][_0x58ef98(0x26f)]==_0x58ef98(0x1d6))var _0x561db6=users[_0x58ef98(0x1d6)];else{if(_0x2ecd48[0x0][_0x58ef98(0x26f)]==_0x58ef98(0x273))var _0x561db6=users[_0x58ef98(0x25a)];}}}}}}}_0x3d3af6[_0x58ef98(0x279)](_0x58ef98(0x204),{'success':_0x23ae71[_0x58ef98(0x261)](_0x58ef98(0x260)),'errors':_0x23ae71[_0x58ef98(0x261)]('errors'),'role':_0x227207,'profile':_0x416c3b,'user':_0x18d41c,'master_shop':_0x2ecd48,'language':_0x561db6});}catch(_0x4794d3){console[_0x58ef98(0x208)](_0x4794d3);}}),router[a0_0x1432ab(0x249)](a0_0x1432ab(0x231),auth,async(_0x12859c,_0x46187b)=>{const _0x39b761=a0_0x1432ab;try{const {name:_0x255e04,products:_0x298cea}=_0x12859c['body'],_0x2df3e0=new categories({'name':_0x255e04,'products':_0x298cea}),_0x13b501=await categories['findOne']({'name':_0x255e04});_0x13b501?_0x12859c[_0x39b761(0x261)](_0x39b761(0x1f8),_0x255e04+_0x39b761(0x1d8)):_0x12859c[_0x39b761(0x261)](_0x39b761(0x260),_0x255e04+_0x39b761(0x23b));const _0x1026de=await _0x2df3e0[_0x39b761(0x281)]();_0x46187b[_0x39b761(0x1f5)](_0x39b761(0x24a));}catch(_0x364b8c){console[_0x39b761(0x208)](_0x364b8c);}}),router[a0_0x1432ab(0x28a)](a0_0x1432ab(0x1fa),auth,async(_0x55b59f,_0x42fc03)=>{const _0x5afba5=a0_0x1432ab;try{const {username:_0x5b4a45,email:_0x3f6cd3,role:_0x106d12}=_0x55b59f[_0x5afba5(0x212)],_0x32d431=_0x55b59f[_0x5afba5(0x212)],_0x316c9a=await profile['findOne']({'email':_0x32d431[_0x5afba5(0x207)]}),_0x1133c0=await master_shop[_0x5afba5(0x271)]();console['log'](_0x5afba5(0x278),_0x1133c0);const _0x498614=_0x55b59f[_0x5afba5(0x27b)]['id'];console[_0x5afba5(0x208)](_0x498614);const _0x4b67b5=await categories[_0x5afba5(0x270)](_0x498614);if(_0x1133c0[0x0]['language']==_0x5afba5(0x1e3))var _0x85e026=users[_0x5afba5(0x25d)];else{if(_0x1133c0[0x0][_0x5afba5(0x26f)]==_0x5afba5(0x21a))var _0x85e026=users['Hindi'];else{if(_0x1133c0[0x0][_0x5afba5(0x26f)]=='German')var _0x85e026=users['German'];else{if(_0x1133c0[0x0]['language']==_0x5afba5(0x1ce))var _0x85e026=users[_0x5afba5(0x1ce)];else{if(_0x1133c0[0x0]['language']==_0x5afba5(0x22d))var _0x85e026=users[_0x5afba5(0x22d)];else{if(_0x1133c0[0x0][_0x5afba5(0x26f)]==_0x5afba5(0x1d4))var _0x85e026=users[_0x5afba5(0x1da)];else{if(_0x1133c0[0x0]['language']==_0x5afba5(0x1d6))var _0x85e026=users['Chinese'];else{if(_0x1133c0[0x0][_0x5afba5(0x26f)]=='Arabic\x20(ae)')var _0x85e026=users[_0x5afba5(0x25a)];}}}}}}}_0x42fc03['render'](_0x5afba5(0x204),{'success':_0x55b59f[_0x5afba5(0x261)](_0x5afba5(0x260)),'errors':_0x55b59f[_0x5afba5(0x261)](_0x5afba5(0x1f8)),'role':_0x32d431,'profile':_0x316c9a,'master_shop':_0x1133c0,'user':_0x4b67b5,'language':_0x85e026});}catch(_0x47d4ec){console[_0x5afba5(0x208)](_0x47d4ec);}}),router[a0_0x1432ab(0x249)](a0_0x1432ab(0x1fa),auth,async(_0x25444f,_0x1f7882)=>{const _0x46e43b=a0_0x1432ab;try{const _0x45e337=_0x25444f[_0x46e43b(0x27b)]['id'],_0x3ea94d=await categories[_0x46e43b(0x1d7)](_0x45e337,_0x25444f[_0x46e43b(0x27d)]);_0x25444f[_0x46e43b(0x261)](_0x46e43b(0x260),''+users[_0x46e43b(0x28c)]),_0x1f7882[_0x46e43b(0x1f5)](_0x46e43b(0x24a));}catch(_0x5f077b){console['log'](_0x5f077b);}}),router[a0_0x1432ab(0x28a)](a0_0x1432ab(0x264),auth,async(_0x453f6e,_0x28c81c)=>{const _0x334596=a0_0x1432ab;try{const _0x524535=_0x453f6e[_0x334596(0x27b)]['id'],_0x30f28f=await categories[_0x334596(0x21c)](_0x524535);_0x453f6e['flash'](_0x334596(0x260),'categories\x20data\x20delete\x20successfully'),_0x28c81c[_0x334596(0x1f5)](_0x334596(0x24a));}catch(_0x5c6d3c){console[_0x334596(0x208)](_0x5c6d3c);}}),router['get'](a0_0x1432ab(0x25e),auth,async(_0x31f01a,_0x4843c6)=>{const _0x59feaa=a0_0x1432ab;try{const {username:_0x1d80d1,email:_0x3f0222,role:_0x49d782}=_0x31f01a[_0x59feaa(0x212)],_0x359bc4=_0x31f01a[_0x59feaa(0x212)],_0x558f72=await profile[_0x59feaa(0x26e)]({'email':_0x359bc4['email']}),_0x22c190=await master_shop[_0x59feaa(0x271)]();console[_0x59feaa(0x208)](_0x59feaa(0x278),_0x22c190);const _0xbd52d7=await brands[_0x59feaa(0x271)]();if(_0x22c190[0x0][_0x59feaa(0x26f)]=='English\x20(US)')var _0x5afc76=users['English'];else{if(_0x22c190[0x0]['language']==_0x59feaa(0x21a))var _0x5afc76=users[_0x59feaa(0x21a)];else{if(_0x22c190[0x0][_0x59feaa(0x26f)]==_0x59feaa(0x213))var _0x5afc76=users[_0x59feaa(0x213)];else{if(_0x22c190[0x0][_0x59feaa(0x26f)]==_0x59feaa(0x1ce))var _0x5afc76=users[_0x59feaa(0x1ce)];else{if(_0x22c190[0x0]['language']==_0x59feaa(0x22d))var _0x5afc76=users[_0x59feaa(0x22d)];else{if(_0x22c190[0x0][_0x59feaa(0x26f)]==_0x59feaa(0x1d4))var _0x5afc76=users['Portuguese'];else{if(_0x22c190[0x0][_0x59feaa(0x26f)]==_0x59feaa(0x1d6))var _0x5afc76=users[_0x59feaa(0x1d6)];else{if(_0x22c190[0x0]['language']==_0x59feaa(0x273))var _0x5afc76=users[_0x59feaa(0x25a)];}}}}}}}_0x4843c6[_0x59feaa(0x279)](_0x59feaa(0x236),{'success':_0x31f01a[_0x59feaa(0x261)](_0x59feaa(0x260)),'errors':_0x31f01a['flash'](_0x59feaa(0x1f8)),'role':_0x359bc4,'profile':_0x558f72,'master_shop':_0x22c190,'user':_0xbd52d7,'language':_0x5afc76});}catch(_0x579db1){console[_0x59feaa(0x208)](_0x579db1);}}),router[a0_0x1432ab(0x249)](a0_0x1432ab(0x25e),auth,async(_0x445090,_0x5313a6)=>{const _0x299654=a0_0x1432ab;try{const {name:_0x47a253,products:_0x2b65f2}=_0x445090[_0x299654(0x27d)],_0x4cd32a=new brands({'name':_0x47a253,'products':_0x2b65f2}),_0x362571=await brands['findOne']({'name':_0x47a253});_0x362571?_0x445090[_0x299654(0x261)]('errors',_0x47a253+_0x299654(0x272)):_0x445090[_0x299654(0x261)]('success',_0x47a253+_0x299654(0x25b));const _0x38a554=await _0x4cd32a[_0x299654(0x281)]();_0x5313a6[_0x299654(0x1f5)](_0x299654(0x26a));}catch(_0xf2becd){console[_0x299654(0x208)](_0xf2becd);}}),router['get'](a0_0x1432ab(0x233),auth,async(_0x172323,_0x163a0)=>{const _0x143eef=a0_0x1432ab;try{const {username:_0x53404c,email:_0x31334c,role:_0x8ccedb}=_0x172323[_0x143eef(0x212)],_0x36ceb4=_0x172323['user'],_0x5e60ff=await profile[_0x143eef(0x26e)]({'email':_0x36ceb4[_0x143eef(0x207)]}),_0x37ba87=await master_shop[_0x143eef(0x271)]();console[_0x143eef(0x208)]('master',_0x37ba87);const _0xb2f76=_0x172323[_0x143eef(0x27b)]['id'];console[_0x143eef(0x208)](_0xb2f76);const _0x5c462b=await brands['findById'](_0xb2f76);if(_0x37ba87[0x0]['language']==_0x143eef(0x1e3))var _0x123ec3=users[_0x143eef(0x25d)];else{if(_0x37ba87[0x0][_0x143eef(0x26f)]==_0x143eef(0x21a))var _0x123ec3=users['Hindi'];else{if(_0x37ba87[0x0][_0x143eef(0x26f)]==_0x143eef(0x213))var _0x123ec3=users[_0x143eef(0x213)];else{if(_0x37ba87[0x0][_0x143eef(0x26f)]==_0x143eef(0x1ce))var _0x123ec3=users['Spanish'];else{if(_0x37ba87[0x0]['language']=='French')var _0x123ec3=users['French'];else{if(_0x37ba87[0x0][_0x143eef(0x26f)]==_0x143eef(0x1d4))var _0x123ec3=users[_0x143eef(0x1da)];else{if(_0x37ba87[0x0][_0x143eef(0x26f)]==_0x143eef(0x1d6))var _0x123ec3=users['Chinese'];else{if(_0x37ba87[0x0][_0x143eef(0x26f)]=='Arabic\x20(ae)')var _0x123ec3=users['Arabic'];}}}}}}}_0x163a0[_0x143eef(0x279)](_0x143eef(0x236),{'success':_0x172323[_0x143eef(0x261)](_0x143eef(0x260)),'errors':_0x172323[_0x143eef(0x261)]('errors'),'role':_0x36ceb4,'profile':_0x5e60ff,'master_shop':_0x37ba87,'user':_0x5c462b,'language':_0x123ec3});}catch(_0x22a0ff){console[_0x143eef(0x208)](_0x22a0ff);}}),router['post'](a0_0x1432ab(0x233),auth,async(_0x18301d,_0x3eb082)=>{const _0x4eb57b=a0_0x1432ab;try{const _0x5229c9=_0x18301d['params']['id'],_0x3bc8cd=await brands[_0x4eb57b(0x1d7)](_0x5229c9,_0x18301d['body']);_0x18301d[_0x4eb57b(0x261)](_0x4eb57b(0x260),_0x4eb57b(0x1f7)),_0x3eb082['redirect'](_0x4eb57b(0x26a));}catch(_0x281603){console[_0x4eb57b(0x208)](_0x281603);}}),router[a0_0x1432ab(0x28a)](a0_0x1432ab(0x276),auth,async(_0x25d58b,_0x28cad3)=>{const _0xaa08ab=a0_0x1432ab;try{const _0x545cc8=_0x25d58b['params']['id'],_0x588318=await brands['findByIdAndDelete'](_0x545cc8);_0x25d58b[_0xaa08ab(0x261)](_0xaa08ab(0x260),'brand\x20data\x20delete\x20successfully'),_0x28cad3['redirect']('/products/brands');}catch(_0x2ef58c){console[_0xaa08ab(0x208)](_0x2ef58c);}}),router[a0_0x1432ab(0x28a)](a0_0x1432ab(0x224),auth,async(_0xf15803,_0x1b7ebb)=>{const _0x30ce6c=a0_0x1432ab;try{const {username:_0x53e11b,email:_0xb2ac13,role:_0x24de7b}=_0xf15803[_0x30ce6c(0x212)],_0x191c95=_0xf15803[_0x30ce6c(0x212)],_0x4e3889=await profile[_0x30ce6c(0x26e)]({'email':_0x191c95[_0x30ce6c(0x207)]}),_0x2945ca=await master_shop[_0x30ce6c(0x271)]();console['log'](_0x30ce6c(0x278),_0x2945ca);const _0xdd700c=await units[_0x30ce6c(0x271)]();if(_0x2945ca[0x0][_0x30ce6c(0x26f)]==_0x30ce6c(0x1e3))var _0x26ee09=users['English'];else{if(_0x2945ca[0x0]['language']==_0x30ce6c(0x21a))var _0x26ee09=users['Hindi'];else{if(_0x2945ca[0x0][_0x30ce6c(0x26f)]==_0x30ce6c(0x213))var _0x26ee09=users[_0x30ce6c(0x213)];else{if(_0x2945ca[0x0][_0x30ce6c(0x26f)]==_0x30ce6c(0x1ce))var _0x26ee09=users[_0x30ce6c(0x1ce)];else{if(_0x2945ca[0x0][_0x30ce6c(0x26f)]==_0x30ce6c(0x22d))var _0x26ee09=users[_0x30ce6c(0x22d)];else{if(_0x2945ca[0x0][_0x30ce6c(0x26f)]==_0x30ce6c(0x1d4))var _0x26ee09=users[_0x30ce6c(0x1da)];else{if(_0x2945ca[0x0][_0x30ce6c(0x26f)]==_0x30ce6c(0x1d6))var _0x26ee09=users['Chinese'];else{if(_0x2945ca[0x0][_0x30ce6c(0x26f)]==_0x30ce6c(0x273))var _0x26ee09=users[_0x30ce6c(0x25a)];}}}}}}}_0x1b7ebb[_0x30ce6c(0x279)](_0x30ce6c(0x253),{'success':_0xf15803['flash']('success'),'errors':_0xf15803[_0x30ce6c(0x261)]('errors'),'role':_0x191c95,'profile':_0x4e3889,'master_shop':_0x2945ca,'user':_0xdd700c,'language':_0x26ee09});}catch(_0xfe68f4){console['log'](_0xfe68f4);}}),router['post'](a0_0x1432ab(0x224),auth,async(_0x3a2cdb,_0x62dd23)=>{const _0x14400c=a0_0x1432ab;try{const {name:_0x49a97a,secondary_unit:_0x1f6554,products:_0x46642f}=_0x3a2cdb[_0x14400c(0x27d)],_0xe71dfc=new units({'name':_0x49a97a,'secondary_unit':_0x1f6554,'products':_0x46642f}),_0x22fb09=await units['findOne']({'name':_0x49a97a});_0x22fb09?_0x3a2cdb[_0x14400c(0x261)](_0x14400c(0x1f8),_0x49a97a+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x3a2cdb[_0x14400c(0x261)](_0x14400c(0x260),_0x49a97a+_0x14400c(0x277));const _0x5cdd90=await _0xe71dfc['save']();_0x62dd23[_0x14400c(0x1f5)](_0x14400c(0x24d));}catch(_0x5894fd){console[_0x14400c(0x208)](_0x5894fd);}}),router['get'](a0_0x1432ab(0x1d9),auth,async(_0x44caa6,_0x43e24c)=>{const _0x3f8f42=a0_0x1432ab;try{const {username:_0x46e180,email:_0x1152b0,role:_0x4bc544}=_0x44caa6[_0x3f8f42(0x212)],_0x4a9a00=_0x44caa6[_0x3f8f42(0x212)],_0x39bd36=await profile[_0x3f8f42(0x26e)]({'email':_0x4a9a00[_0x3f8f42(0x207)]}),_0x384dfd=await master_shop[_0x3f8f42(0x271)]();console['log'](_0x3f8f42(0x278),_0x384dfd);const _0x47bda4=_0x44caa6[_0x3f8f42(0x27b)]['id'],_0xfd876e=await units[_0x3f8f42(0x270)](_0x47bda4);if(_0x384dfd[0x0][_0x3f8f42(0x26f)]==_0x3f8f42(0x1e3))var _0x420111=users[_0x3f8f42(0x25d)];else{if(_0x384dfd[0x0][_0x3f8f42(0x26f)]==_0x3f8f42(0x21a))var _0x420111=users[_0x3f8f42(0x21a)];else{if(_0x384dfd[0x0][_0x3f8f42(0x26f)]==_0x3f8f42(0x213))var _0x420111=users[_0x3f8f42(0x213)];else{if(_0x384dfd[0x0][_0x3f8f42(0x26f)]==_0x3f8f42(0x1ce))var _0x420111=users['Spanish'];else{if(_0x384dfd[0x0]['language']==_0x3f8f42(0x22d))var _0x420111=users['French'];else{if(_0x384dfd[0x0]['language']==_0x3f8f42(0x1d4))var _0x420111=users[_0x3f8f42(0x1da)];else{if(_0x384dfd[0x0][_0x3f8f42(0x26f)]==_0x3f8f42(0x1d6))var _0x420111=users['Chinese'];else{if(_0x384dfd[0x0][_0x3f8f42(0x26f)]==_0x3f8f42(0x273))var _0x420111=users[_0x3f8f42(0x25a)];}}}}}}}_0x43e24c[_0x3f8f42(0x279)](_0x3f8f42(0x253),{'success':_0x44caa6[_0x3f8f42(0x261)](_0x3f8f42(0x260)),'errors':_0x44caa6[_0x3f8f42(0x261)](_0x3f8f42(0x1f8)),'role':_0x4a9a00,'profile':_0x39bd36,'master_shop':_0x384dfd,'user':_0xfd876e,'language':_0x420111});}catch(_0x254ab3){console[_0x3f8f42(0x208)](_0x254ab3);}}),router[a0_0x1432ab(0x249)](a0_0x1432ab(0x1d9),auth,async(_0x3be505,_0x2c09c1)=>{const _0x343351=a0_0x1432ab;try{const _0xefde0d=_0x3be505[_0x343351(0x27b)]['id'],_0x10bfcb=await units['findByIdAndUpdate'](_0xefde0d,_0x3be505[_0x343351(0x27d)]);_0x3be505[_0x343351(0x261)](_0x343351(0x260),_0x343351(0x25f)),_0x2c09c1[_0x343351(0x1f5)](_0x343351(0x24d));}catch(_0x7e2d82){console[_0x343351(0x208)](_0x7e2d82);}}),router[a0_0x1432ab(0x28a)](a0_0x1432ab(0x247),auth,async(_0x32b346,_0x520d53)=>{const _0x45c349=a0_0x1432ab;try{const _0x27005a=_0x32b346[_0x45c349(0x27b)]['id'],_0x424b29=await units[_0x45c349(0x21c)](_0x27005a);_0x32b346[_0x45c349(0x261)](_0x45c349(0x260),'unit\x20data\x20delete\x20successfully'),_0x520d53['redirect'](_0x45c349(0x24d));}catch(_0x2beb9c){console[_0x45c349(0x208)](_0x2beb9c);}});function a0_0x170a(_0x3d5776,_0x1957b5){const _0x23adc6=a0_0x23ad();return a0_0x170a=function(_0x170a2d,_0x578473){_0x170a2d=_0x170a2d-0x1ca;let _0x747673=_0x23adc6[_0x170a2d];return _0x747673;},a0_0x170a(_0x3d5776,_0x1957b5);}const storage=multer[a0_0x1432ab(0x23c)]({'destination':(_0x32fc86,_0x296ebd,_0x44a4b4)=>{_0x44a4b4(null,'public/upload');},'filename':(_0x24a35f,_0x43f94c,_0x269197)=>{const _0x14f639=a0_0x1432ab;_0x269197(null,Date[_0x14f639(0x1d2)]()+_0x43f94c[_0x14f639(0x1f4)]);}}),upload=multer({'storage':storage});router[a0_0x1432ab(0x28a)](a0_0x1432ab(0x259),auth,async(_0x46142f,_0x5a4201)=>{const _0x4136ec=a0_0x1432ab;try{const {username:_0x468924,email:_0xd782d2,role:_0x156ef4}=_0x46142f['user'],_0x3217e5=_0x46142f[_0x4136ec(0x212)],_0x4a5792=await profile[_0x4136ec(0x26e)]({'email':_0x3217e5['email']}),_0x3e1abd={'year':'numeric','month':_0x4136ec(0x1e9),'day':_0x4136ec(0x1fd)},_0x37635a=await master_shop[_0x4136ec(0x271)]();console[_0x4136ec(0x208)](_0x4136ec(0x1fc),_0x37635a);const _0x27e2da=await product[_0x4136ec(0x271)]();console[_0x4136ec(0x208)]('Products\x20find_data',_0x27e2da);const _0x4a5ec2=await warehouse[_0x4136ec(0x21f)]([{'$unwind':_0x4136ec(0x265)},{'$lookup':{'from':_0x4136ec(0x202),'localField':'product_details.product_name','foreignField':'name','as':_0x4136ec(0x1d5)}},{'$unwind':_0x4136ec(0x258)},{'$project':{'product_name':_0x4136ec(0x1f9),'product_stock':_0x4136ec(0x289)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x4136ec(0x1e6)}}}]);console[_0x4136ec(0x208)](_0x4136ec(0x286),_0x4a5ec2),_0x4a5ec2[_0x4136ec(0x256)](_0x9de94f=>{const _0x3c6e10=_0x4136ec,_0x2f9a0a=_0x27e2da[_0x3c6e10(0x20f)](_0x11b214=>{const _0x3fef4a=_0x3c6e10;_0x11b214[_0x3fef4a(0x1f2)]==_0x9de94f[_0x3fef4a(0x1cd)]&&(_0x11b214[_0x3fef4a(0x275)]=parseInt(_0x11b214[_0x3fef4a(0x275)])+parseInt(_0x9de94f[_0x3fef4a(0x1ff)]));});}),console['log'](_0x4136ec(0x23a),_0x27e2da);if(_0x37635a[0x0][_0x4136ec(0x26f)]=='English\x20(US)')var _0x313997=users[_0x4136ec(0x25d)];else{if(_0x37635a[0x0][_0x4136ec(0x26f)]=='Hindi')var _0x313997=users[_0x4136ec(0x21a)];else{if(_0x37635a[0x0][_0x4136ec(0x26f)]=='German')var _0x313997=users[_0x4136ec(0x213)];else{if(_0x37635a[0x0][_0x4136ec(0x26f)]==_0x4136ec(0x1ce))var _0x313997=users['Spanish'];else{if(_0x37635a[0x0][_0x4136ec(0x26f)]==_0x4136ec(0x22d))var _0x313997=users[_0x4136ec(0x22d)];else{if(_0x37635a[0x0][_0x4136ec(0x26f)]==_0x4136ec(0x1d4))var _0x313997=users[_0x4136ec(0x1da)];else{if(_0x37635a[0x0][_0x4136ec(0x26f)]==_0x4136ec(0x1d6))var _0x313997=users[_0x4136ec(0x1d6)];else{if(_0x37635a[0x0][_0x4136ec(0x26f)]==_0x4136ec(0x273))var _0x313997=users[_0x4136ec(0x25a)];}}}}}}}_0x5a4201[_0x4136ec(0x279)](_0x4136ec(0x202),{'success':_0x46142f[_0x4136ec(0x261)]('success'),'errors':_0x46142f[_0x4136ec(0x261)]('errors'),'alldata':_0x27e2da,'profile':_0x4a5792,'master_shop':_0x37635a,'role':_0x3217e5,'product_stock':_0x4a5ec2,'language':_0x313997});}catch(_0x45f6ec){console[_0x4136ec(0x208)](_0x45f6ec);}}),router['get']('/view/add_products',auth,async(_0x3cb86c,_0x2da988)=>{const _0x2ed2c6=a0_0x1432ab;try{const {username:_0x4137bd,email:_0x1c5376,role:_0x184169}=_0x3cb86c['user'],_0x6bab4e=_0x3cb86c[_0x2ed2c6(0x212)],_0xaa6a05=await profile[_0x2ed2c6(0x26e)]({'email':_0x6bab4e[_0x2ed2c6(0x207)]}),_0x1d9945=await master_shop[_0x2ed2c6(0x271)]();console[_0x2ed2c6(0x208)]('master',_0x1d9945);const _0xb58043=await categories[_0x2ed2c6(0x271)]({}),_0x2722aa=await brands[_0x2ed2c6(0x271)]({}),_0x354158=await units[_0x2ed2c6(0x271)]({}),_0x55385f=await warehouse[_0x2ed2c6(0x271)]({'status':_0x2ed2c6(0x251)});if(_0x1d9945[0x0][_0x2ed2c6(0x26f)]==_0x2ed2c6(0x1e3))var _0x568617=users[_0x2ed2c6(0x25d)];else{if(_0x1d9945[0x0]['language']==_0x2ed2c6(0x21a))var _0x568617=users[_0x2ed2c6(0x21a)];else{if(_0x1d9945[0x0][_0x2ed2c6(0x26f)]=='German')var _0x568617=users['German'];else{if(_0x1d9945[0x0][_0x2ed2c6(0x26f)]==_0x2ed2c6(0x1ce))var _0x568617=users[_0x2ed2c6(0x1ce)];else{if(_0x1d9945[0x0][_0x2ed2c6(0x26f)]==_0x2ed2c6(0x22d))var _0x568617=users['French'];else{if(_0x1d9945[0x0][_0x2ed2c6(0x26f)]==_0x2ed2c6(0x1d4))var _0x568617=users[_0x2ed2c6(0x1da)];else{if(_0x1d9945[0x0][_0x2ed2c6(0x26f)]==_0x2ed2c6(0x1d6))var _0x568617=users['Chinese'];else{if(_0x1d9945[0x0][_0x2ed2c6(0x26f)]=='Arabic\x20(ae)')var _0x568617=users[_0x2ed2c6(0x25a)];}}}}}}}_0x2da988['render'](_0x2ed2c6(0x239),{'success':_0x3cb86c[_0x2ed2c6(0x261)](_0x2ed2c6(0x260)),'errors':_0x3cb86c['flash'](_0x2ed2c6(0x1f8)),'role':_0x6bab4e,'profile':_0xaa6a05,'categories':_0xb58043,'brands':_0x2722aa,'master_shop':_0x1d9945,'units':_0x354158,'language':_0x568617,'find_data':_0x55385f});}catch(_0x2327fe){console[_0x2ed2c6(0x208)](_0x2327fe);}}),router[a0_0x1432ab(0x249)](a0_0x1432ab(0x205),auth,upload[a0_0x1432ab(0x1f6)]('image'),async(_0x908d6b,_0x1d4ee4)=>{const _0x4f48e1=a0_0x1432ab;try{const {name:_0x354a78,category:_0x48a108,brand:_0x3b3a10,unit:_0x4839f8,alertquantity:_0x31636d,stock:_0x466197,product_code:_0x54a449,warehouse:_0x3ab973,primary_ItemCode:_0x26d77d,second_ItemCode:_0x476559,second_unit:_0x14c83a,maxPerUnit:_0x42e36b,MaxPerProduct:_0x3fb09c,sales_cat:_0x2e6831,type_prod:_0x272aa8}=_0x908d6b[_0x4f48e1(0x27d)],_0x421500=_0x908d6b[_0x4f48e1(0x1d0)]?.['filename']||_0x4f48e1(0x216),_0xba9e05=new product({'image':_0x421500,'name':_0x354a78,'category':_0x48a108,'brand':_0x3b3a10,'unit':_0x4839f8,'alertquantity':_0x31636d,'stock':_0x466197,'product_code':_0x54a449,'warehouse':_0x3ab973,'primary_code':_0x26d77d,'secondary_code':_0x476559,'second_unit':_0x14c83a,'maxStocks':_0x3fb09c,'maxProdPerUnit':_0x42e36b,'sales_category':_0x2e6831,'type_products':_0x272aa8}),_0x57a178=await _0xba9e05[_0x4f48e1(0x281)](),_0x526880=await categories[_0x4f48e1(0x26e)]({'name':_0x48a108});_0x526880['products']=parseInt(_0x526880[_0x4f48e1(0x202)])+0x1,await _0x526880[_0x4f48e1(0x281)]();const _0x165be7=await brands[_0x4f48e1(0x26e)]({'name':_0x3b3a10});_0x165be7[_0x4f48e1(0x202)]=parseInt(_0x165be7[_0x4f48e1(0x202)])+0x1,await _0x165be7[_0x4f48e1(0x281)]();const _0x28997c=await units[_0x4f48e1(0x26e)]({'name':_0x4839f8});_0x28997c[_0x4f48e1(0x202)]=parseInt(_0x28997c['products'])+0x1,await _0x28997c['save'](),_0x908d6b[_0x4f48e1(0x261)]('success','product\x20add\x20successfully'),_0x1d4ee4[_0x4f48e1(0x1f5)](_0x4f48e1(0x201));}catch(_0x2946fd){console['log'](_0x2946fd);}}),router['get'](a0_0x1432ab(0x237),auth,async(_0x1eacc1,_0x492418)=>{const _0x930f37=a0_0x1432ab;try{const {username:_0x5c3073,email:_0x543feb,role:_0x47a791}=_0x1eacc1['user'],_0x33b541=_0x1eacc1['user'],_0x2b5563=await profile['findOne']({'email':_0x33b541[_0x930f37(0x207)]}),_0x13c284=await master_shop[_0x930f37(0x271)]();console[_0x930f37(0x208)](_0x930f37(0x21d),_0x13c284);const _0x70c8d=_0x1eacc1['params']['id'],_0x12cd88=await product['findById'](_0x70c8d),_0x3c9372=await categories[_0x930f37(0x271)]({}),_0x4daaaa=await brands[_0x930f37(0x271)]({}),_0x23a58a=await units[_0x930f37(0x271)]({}),_0x316455=await warehouse[_0x930f37(0x271)]({'status':_0x930f37(0x251)}),_0x4c870a=await units[_0x930f37(0x21f)]([{'$group':{'_id':_0x930f37(0x255),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x13c284[0x0][_0x930f37(0x26f)]==_0x930f37(0x1e3))var _0x54272e=users[_0x930f37(0x25d)];else{if(_0x13c284[0x0][_0x930f37(0x26f)]==_0x930f37(0x21a))var _0x54272e=users[_0x930f37(0x21a)];else{if(_0x13c284[0x0][_0x930f37(0x26f)]==_0x930f37(0x213))var _0x54272e=users[_0x930f37(0x213)];else{if(_0x13c284[0x0][_0x930f37(0x26f)]==_0x930f37(0x1ce))var _0x54272e=users[_0x930f37(0x1ce)];else{if(_0x13c284[0x0][_0x930f37(0x26f)]=='French')var _0x54272e=users[_0x930f37(0x22d)];else{if(_0x13c284[0x0]['language']=='Portuguese\x20(BR)')var _0x54272e=users[_0x930f37(0x1da)];else{if(_0x13c284[0x0]['language']==_0x930f37(0x1d6))var _0x54272e=users['Chinese'];else{if(_0x13c284[0x0][_0x930f37(0x26f)]==_0x930f37(0x273))var _0x54272e=users[_0x930f37(0x25a)];}}}}}}}_0x492418[_0x930f37(0x279)]('edit_product',{'success':_0x1eacc1['flash'](_0x930f37(0x260)),'errors':_0x1eacc1[_0x930f37(0x261)](_0x930f37(0x1f8)),'role':_0x33b541,'profile':_0x2b5563,'alldata':_0x12cd88,'categories':_0x3c9372,'brands':_0x4daaaa,'master_shop':_0x13c284,'units':_0x23a58a,'secondunit':_0x4c870a,'find_data':_0x316455,'language':_0x54272e});}catch(_0x47acae){console['log'](_0x47acae);}}),router[a0_0x1432ab(0x249)](a0_0x1432ab(0x237),auth,upload[a0_0x1432ab(0x1f6)](a0_0x1432ab(0x287)),async(_0xc06028,_0x4660de)=>{const _0xa1b43e=a0_0x1432ab;try{const _0xc51aa5=_0xc06028[_0xa1b43e(0x27b)]['id'],_0x3c47ea=await product['findById'](_0xc51aa5),{image:_0xacf577,name:_0xbf536e,category:_0x5267c2,brand:_0xcefa5d,sku:_0x11c9ed,unit:_0xa19bd3,alertquantity:_0x5eaf27,product_code:_0x20a3cf,warehouse:_0x1c0f87,primary_ItemCode:_0x219a61,second_ItemCode:_0x6f54e9,second_unit:_0x4610a0,maxPerUnit:_0x215a7d,MaxPerProduct:_0x15f577,prod_catdata:_0x1395df,type_prod:_0x183f7f,sales_cat:_0x2fe791}=_0xc06028['body'];_0xc06028[_0xa1b43e(0x1d0)]&&(_0x3c47ea[_0xa1b43e(0x287)]=_0xc06028['file'][_0xa1b43e(0x263)]);_0x3c47ea[_0xa1b43e(0x1f2)]=_0xbf536e,_0x3c47ea[_0xa1b43e(0x25c)]=_0x5267c2,_0x3c47ea[_0xa1b43e(0x27e)]=_0xcefa5d,_0x3c47ea[_0xa1b43e(0x221)]=_0x11c9ed,_0x3c47ea[_0xa1b43e(0x20b)]=_0xa19bd3,_0x3c47ea[_0xa1b43e(0x230)]=_0x5eaf27,_0x3c47ea[_0xa1b43e(0x24c)]=_0x20a3cf,_0x3c47ea[_0xa1b43e(0x206)]=_0x1c0f87,_0x3c47ea['primary_code']=_0x219a61,_0x3c47ea[_0xa1b43e(0x1d3)]=_0x6f54e9,_0x3c47ea[_0xa1b43e(0x26b)]=_0x4610a0,_0x3c47ea[_0xa1b43e(0x1de)]=_0x15f577,_0x3c47ea[_0xa1b43e(0x1ef)]=_0x215a7d,_0x3c47ea[_0xa1b43e(0x226)]=_0x1395df,_0x3c47ea['type_products']=_0x183f7f,_0x3c47ea[_0xa1b43e(0x217)]=_0x2fe791;const _0x1152ce=await _0x3c47ea[_0xa1b43e(0x281)]();console[_0xa1b43e(0x208)]('product\x20edit',_0x3c47ea),_0xc06028['flash'](_0xa1b43e(0x260),_0xa1b43e(0x27c)),_0x4660de[_0xa1b43e(0x1f5)](_0xa1b43e(0x201));}catch(_0x57d6d7){console[_0xa1b43e(0x208)](_0x57d6d7);}}),router['get'](a0_0x1432ab(0x1fe),auth,async(_0x392842,_0x4d48a6)=>{const _0x2eafdb=a0_0x1432ab;try{const {username:_0x299574,email:_0x53e1f0,role:_0x221f30}=_0x392842[_0x2eafdb(0x212)],_0x5c38f0=_0x392842[_0x2eafdb(0x212)],_0x3e175a=await profile[_0x2eafdb(0x26e)]({'email':_0x5c38f0[_0x2eafdb(0x207)]}),_0x2a7ebf=await master_shop[_0x2eafdb(0x271)]();console[_0x2eafdb(0x208)](_0x2eafdb(0x1dd),_0x2a7ebf);const _0x568d81=_0x392842['params']['id'],_0x178792=await product[_0x2eafdb(0x270)](_0x568d81);console[_0x2eafdb(0x208)]('barcode\x20user_id',_0x178792);if(_0x2a7ebf[0x0][_0x2eafdb(0x26f)]==_0x2eafdb(0x1e3))var _0x157644=users[_0x2eafdb(0x25d)];else{if(_0x2a7ebf[0x0][_0x2eafdb(0x26f)]==_0x2eafdb(0x21a))var _0x157644=users['Hindi'];else{if(_0x2a7ebf[0x0][_0x2eafdb(0x26f)]==_0x2eafdb(0x213))var _0x157644=users[_0x2eafdb(0x213)];else{if(_0x2a7ebf[0x0]['language']==_0x2eafdb(0x1ce))var _0x157644=users[_0x2eafdb(0x1ce)];else{if(_0x2a7ebf[0x0][_0x2eafdb(0x26f)]==_0x2eafdb(0x22d))var _0x157644=users[_0x2eafdb(0x22d)];else{if(_0x2a7ebf[0x0][_0x2eafdb(0x26f)]==_0x2eafdb(0x1d4))var _0x157644=users[_0x2eafdb(0x1da)];else{if(_0x2a7ebf[0x0][_0x2eafdb(0x26f)]==_0x2eafdb(0x1d6))var _0x157644=users[_0x2eafdb(0x1d6)];else{if(_0x2a7ebf[0x0]['language']==_0x2eafdb(0x273))var _0x157644=users['Arabic'];}}}}}}}_0x4d48a6[_0x2eafdb(0x279)](_0x2eafdb(0x223),{'success':_0x392842['flash']('success'),'errors':_0x392842[_0x2eafdb(0x261)](_0x2eafdb(0x1f8)),'role':_0x5c38f0,'profile':_0x3e175a,'alldata':_0x178792,'master_shop':_0x2a7ebf,'language':_0x157644});}catch(_0x3b52b3){console['log'](_0x3b52b3);}}),router[a0_0x1432ab(0x28a)](a0_0x1432ab(0x1cc),auth,async(_0x1b9c9f,_0x576008)=>{const _0x56c800=a0_0x1432ab;try{const _0x29e089=new excelJS[(_0x56c800(0x215))](),_0x4d67ba=_0x29e089[_0x56c800(0x234)](_0x56c800(0x225));return _0x4d67ba['columns']=[{'header':_0x56c800(0x1e1),'key':'PName','width':0xa},{'header':_0x56c800(0x267),'key':_0x56c800(0x1db),'width':0xa},{'header':_0x56c800(0x1e8),'key':_0x56c800(0x288),'width':0xa},{'header':_0x56c800(0x1e4),'key':_0x56c800(0x222),'width':0xa},{'header':_0x56c800(0x20a),'key':_0x56c800(0x228),'width':0xa},{'header':_0x56c800(0x214),'key':_0x56c800(0x1ec),'width':0xa},{'header':'Secondary_Code','key':_0x56c800(0x1ec),'width':0xa},{'header':_0x56c800(0x26d),'key':'ProductCode','width':0xa},{'header':_0x56c800(0x24e),'key':'PCat','width':0xa},{'header':'Alert_QTY','key':_0x56c800(0x209),'width':0xa},{'header':_0x56c800(0x211),'key':_0x56c800(0x209),'width':0xa},{'header':_0x56c800(0x240),'key':_0x56c800(0x27a),'width':0xa}],_0x576008[_0x56c800(0x282)](_0x56c800(0x1e0),_0x56c800(0x1df)),_0x576008[_0x56c800(0x282)]('Content-Disposition',_0x56c800(0x1d1)),_0x29e089[_0x56c800(0x1cb)][_0x56c800(0x274)](_0x576008)[_0x56c800(0x22b)](()=>{const _0x5e21f1=_0x56c800;_0x576008[_0x5e21f1(0x23d)](0xc8);});}catch(_0x4f9ebc){_0x576008['status'](0x190)[_0x56c800(0x21b)](_0x4f9ebc);}});const storage1=multer[a0_0x1432ab(0x23c)]({'destination':(_0xe34f05,_0x4302cf,_0x303dd7)=>{const _0x496bab=a0_0x1432ab;_0x303dd7(null,_0x496bab(0x243));},'filename':(_0x34cbee,_0x2471b7,_0x59b701)=>{const _0xb29148=a0_0x1432ab;_0x59b701(null,Date[_0xb29148(0x1d2)]()+_0x2471b7['originalname']);}}),uploadMigrate=multer({'storage':storage1});function a0_0x23ad(){const _0x249336=['maxProdPerUnit','\x20<>\x20','3214770lnSkmn','name','Raw\x20Materials','originalname','redirect','single','brand\x20data\x20update\x20successfully','errors','$product_details.product_name','/categories/:id','express','Products\x20master','numeric','/barcode/:id','product_stock','length','/products/view','products','min','categories','/view/add_products','warehouse','email','log','PAlQty','max_number_per_units','unit','Sheets','3377408GaEiYm','Router','map','\x20Edit\x20Successfully','Maximum_Stocks','user','German','Primary_Code','Workbook','defaultProduct.avif','sales_category','Alert_QTY','/print_barcode_filter/','Hindi','send','findByIdAndDelete','edit\x20Product\x20master','/select_data','aggregate','utils','sku','PSecondaryUnits','product_barcode','/units','Products','product_category','prod_categ','MaxperUnits','5012600znDgiO','categ','then','/print_barcode','French','message','exports','alertquantity','/categories','data','/brands/:id','addWorksheet','push','brands','/view/:id','concat','add_product','Products\x20find_data','\x20categories\x20is\x20add\x20successfully','diskStorage','status','multer','express/lib/response','Products_category','1459428UEqpjf','7510zGWIpu','public/Migration','base64','975395GiGUZV','Finished\x20Goods','/units/delete/:id','30OWfzeb','post','/products/categories','migrate_product_fule','product_code','/products/units','Category','../public/language/languages.json','/print_barcode_single/:id','Enabled','product_barcode_products','units','end','$_id','forEach','10665081uMtMHc','$product_docs','/view','Arabic','\x20brand\x20is\x20add\x20successfully','category','English','/brands','unit\x20data\x20update\x20successfully','success','flash','/barcode_filter','filename','/categories/delete/:id','$product_details','CODE128','Brands','/filter_product','pdfkit-table','/products/brands','secondary_unit','json','Product_Code','findOne','language','findById','find','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Arabic\x20(ae)','write','stock','/brands/delete/:id','\x20unit\x20is\x20add\x20successfully','master','render','Prod_Cat','params','product\x20update\x20successfully','body','brand','\x20added\x20successfully','width','save','setHeader','6mIpuEJ','toBuffer','/barcode_data','Products\x20warehouse_data','image','PUnits','$product_details.product_stock','get','jsbarcode','categories_edit','canvas','$brand','xlsx','/products_export_migrate_file','_id','Spanish','height','file','attachment;\x20filename=Product_Migration_File.xlsx','now','secondary_code','Portuguese\x20(BR)','product_docs','Chinese','findByIdAndUpdate','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/units/:id','Portuguese','PBrands','primary_code','barcode\x20Product\x20master','maxStocks','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Content-Type','Product_Name','$category','English\x20(US)','Secondary_Units','32085IaYuzO','$product_stock','toString','Units','long','exceljs','addPage','ProductCode','SheetNames','bind'];a0_0x23ad=function(){return _0x249336;};return a0_0x23ad();}router[a0_0x1432ab(0x249)]('/products_import_migrate_file',auth,uploadMigrate['single'](a0_0x1432ab(0x24b)),async(_0x502da6,_0x41a1c4)=>{const _0x49a80b=a0_0x1432ab,_0x5b5220=_0x502da6['file'][_0x49a80b(0x263)],_0xa3d024=await xlsx['readFile']('public/Migration/'+_0x5b5220);let _0x20006d=_0xa3d024[_0x49a80b(0x1ed)],_0x32b89a=xlsx[_0x49a80b(0x220)]['sheet_to_json'](_0xa3d024[_0x49a80b(0x20c)][_0x20006d[0x0]]);for(const _0x437797 of _0x32b89a){const _0x2357be=_0x437797[_0x49a80b(0x1e1)],_0xd3c89b=_0x437797[_0x49a80b(0x267)],_0x4d210b=_0x437797['Units'],_0x56559e=_0x437797[_0x49a80b(0x1e4)],_0x156c2c=_0x437797[_0x49a80b(0x26d)],_0x53212c=_0x437797[_0x49a80b(0x24e)],_0x26a35b=_0x437797[_0x49a80b(0x218)],_0x5cc3bf=_0x437797[_0x49a80b(0x214)],_0x3004d4=_0x437797['Secondary_Code'],_0x1e5d24=_0x437797[_0x49a80b(0x211)],_0x19855f=_0x437797[_0x49a80b(0x20a)],_0xa20677=_0x437797['Products_category'];try{let _0x34c467=await categories[_0x49a80b(0x26e)]({'name':_0x53212c});if(!_0x34c467){const _0x23143c=new categories({'name':_0x53212c,'products':'0'});_0x34c467=await _0x23143c['save']();}let _0x2df8af=await brands['findOne']({'name':_0xd3c89b});if(!_0x2df8af){const _0x37365a=new brands({'name':_0xd3c89b,'products':'0'});_0x2df8af=await _0x37365a[_0x49a80b(0x281)]();}let _0x4b5528=await units['findOne']({'name':_0x4d210b,'secondary_unit':_0x56559e});if(!_0x4b5528){const _0x6ce715=new units({'name':_0x4d210b,'secondary_unit':_0x56559e,'products':'0'});_0x4b5528=await _0x6ce715[_0x49a80b(0x281)]();}const _0x3532f3=await product['find']({'name':_0x2357be,'category':_0x34c467[_0x49a80b(0x1f2)],'brand':_0x2df8af[_0x49a80b(0x1f2)],'secondary_unit':_0x4b5528[_0x49a80b(0x26b)],'product_code':_0x156c2c});console[_0x49a80b(0x208)](_0x3532f3[_0x49a80b(0x200)]+_0x49a80b(0x1f0)+_0x34c467[_0x49a80b(0x1f2)]+_0x49a80b(0x1f0)+_0x2df8af[_0x49a80b(0x1f2)]+_0x49a80b(0x1f0)+_0x4b5528[_0x49a80b(0x26b)]+_0x49a80b(0x1f0)+_0x156c2c+'\x20<>\x20'+_0x2357be);if(_0x3532f3[_0x49a80b(0x200)]===0x0){const _0x579c6e=new product({'image':'defaultProduct.avif','name':_0x2357be,'category':_0x34c467[_0x49a80b(0x1f2)],'brand':_0x2df8af[_0x49a80b(0x1f2)],'unit':_0x4b5528['name'],'alertquantity':_0x26a35b,'product_code':_0x156c2c,'secondary_unit':_0x4b5528[_0x49a80b(0x26b)],'primary_code':_0x5cc3bf,'secondary_code':_0x3004d4,'maxStocks':_0x1e5d24,'maxProdPerUnit':_0x19855f,'product_category':_0xa20677}),_0x1db36b=await _0x579c6e[_0x49a80b(0x281)]();_0x34c467[_0x49a80b(0x202)]=parseInt(_0x34c467['products'])+0x1,await _0x34c467['save'](),_0x2df8af[_0x49a80b(0x202)]=parseInt(_0x2df8af[_0x49a80b(0x202)])+0x1,await _0x2df8af['save'](),_0x4b5528[_0x49a80b(0x202)]=parseInt(_0x4b5528[_0x49a80b(0x202)])+0x1,await _0x4b5528[_0x49a80b(0x281)](),_0x502da6[_0x49a80b(0x261)](_0x49a80b(0x260),_0x2357be+_0x49a80b(0x27f));}else{console[_0x49a80b(0x208)](_0x3532f3[0x0]);const _0x3a0c06=_0x3532f3[0x0];_0x3a0c06[_0x49a80b(0x25c)]=_0x34c467[_0x49a80b(0x1f2)],_0x3a0c06['brand']=_0x2df8af[_0x49a80b(0x1f2)],_0x3a0c06[_0x49a80b(0x20b)]=_0x4b5528[_0x49a80b(0x1f2)],_0x3a0c06[_0x49a80b(0x230)]=_0x26a35b,_0x3a0c06['product_code']=_0x156c2c,_0x3a0c06[_0x49a80b(0x26b)]=_0x4b5528['secondary_unit'],_0x3a0c06[_0x49a80b(0x1dc)]=_0x5cc3bf,_0x3a0c06['secondary_code']=_0x3004d4,_0x3a0c06['maxStocks']=_0x1e5d24,_0x3a0c06[_0x49a80b(0x1ef)]=_0x19855f,_0x3a0c06['product_category']=_0xa20677;const _0x54eb57=await _0x3a0c06[_0x49a80b(0x281)]();_0x502da6['flash']('success',_0x54eb57['name']+_0x49a80b(0x210));}}catch(_0x3f3029){_0x41a1c4[_0x49a80b(0x23d)](0x1f4)[_0x49a80b(0x26c)]({'proderror':_0x3f3029['message'],'aproduct':_0x2357be});}}_0x41a1c4[_0x49a80b(0x1f5)]('/products/view');}),router[a0_0x1432ab(0x249)](a0_0x1432ab(0x21e),auth,async(_0x4c15e9,_0x1024b6)=>{const _0x324247=a0_0x1432ab;try{console['log'](_0x4c15e9[_0x324247(0x27d)]);const {data_cateory:_0x4e9f03,datachoose:_0x317cf8}=_0x4c15e9[_0x324247(0x27d)];var _0x2b9707;if(_0x317cf8==_0x324247(0x227))_0x2b9707=await product[_0x324247(0x21f)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x317cf8==_0x324247(0x236))_0x2b9707=await product[_0x324247(0x21f)]([{'$match':{'product_category':_0x4e9f03}},{'$group':{'_id':_0x324247(0x1ca)}}]);else _0x317cf8==_0x324247(0x22a)&&(_0x2b9707=await product[_0x324247(0x21f)]([{'$match':{'product_category':_0x4e9f03}},{'$group':{'_id':_0x324247(0x1e2)}}]));}_0x1024b6[_0x324247(0x26c)](_0x2b9707);}catch(_0x37585c){_0x1024b6['json']({'message':_0x37585c[_0x324247(0x22e)]});}}),router[a0_0x1432ab(0x249)](a0_0x1432ab(0x268),auth,async(_0x51bb11,_0x3bb18e)=>{const _0x3e3f8c=a0_0x1432ab;try{const {data_choosing:_0x19f720,data_selected:_0x5a6460}=_0x51bb11[_0x3e3f8c(0x27d)];var _0x5ef082;if(_0x19f720==_0x3e3f8c(0x227))_0x5ef082=await product['aggregate']([{'$match':{'product_category':_0x5a6460}}]);else{if(_0x19f720==_0x3e3f8c(0x236))_0x5ef082=await product['aggregate']([{'$match':{'brand':_0x5a6460}}]);else _0x19f720==_0x3e3f8c(0x22a)&&(_0x5ef082=await product[_0x3e3f8c(0x21f)]([{'$match':{'category':_0x5a6460}}]));}_0x3bb18e['json'](_0x5ef082);}catch(_0x4ee2d0){_0x3bb18e['json']({'message':_0x4ee2d0[_0x3e3f8c(0x22e)]});}}),router[a0_0x1432ab(0x28a)](a0_0x1432ab(0x22c),auth,async(_0x532e33,_0xcb0431)=>{const _0x28cf0f=a0_0x1432ab,_0x46885d=_0x532e33[_0x28cf0f(0x212)],_0x5e52ec=await profile[_0x28cf0f(0x26e)]({'email':_0x46885d['email']}),_0x2e7580=await master_shop['find'](),_0x4761b9=await product[_0x28cf0f(0x271)]();if(_0x2e7580[0x0]['language']==_0x28cf0f(0x1e3))var _0x27d0c4=users[_0x28cf0f(0x25d)];else{if(_0x2e7580[0x0]['language']==_0x28cf0f(0x21a))var _0x27d0c4=users['Hindi'];else{if(_0x2e7580[0x0]['language']==_0x28cf0f(0x213))var _0x27d0c4=users['German'];else{if(_0x2e7580[0x0][_0x28cf0f(0x26f)]==_0x28cf0f(0x1ce))var _0x27d0c4=users[_0x28cf0f(0x1ce)];else{if(_0x2e7580[0x0][_0x28cf0f(0x26f)]==_0x28cf0f(0x22d))var _0x27d0c4=users[_0x28cf0f(0x22d)];else{if(_0x2e7580[0x0][_0x28cf0f(0x26f)]==_0x28cf0f(0x1d4))var _0x27d0c4=users[_0x28cf0f(0x1da)];else{if(_0x2e7580[0x0][_0x28cf0f(0x26f)]==_0x28cf0f(0x1d6))var _0x27d0c4=users[_0x28cf0f(0x1d6)];else{if(_0x2e7580[0x0][_0x28cf0f(0x26f)]=='Arabic\x20(ae)')var _0x27d0c4=users['Arabic'];}}}}}}}_0xcb0431[_0x28cf0f(0x279)](_0x28cf0f(0x252),{'success':_0x532e33[_0x28cf0f(0x261)](_0x28cf0f(0x260)),'errors':_0x532e33['flash'](_0x28cf0f(0x1f8)),'role':_0x46885d,'profile':_0x5e52ec,'products':_0x4761b9,'master_shop':_0x2e7580,'language':_0x27d0c4});}),router[a0_0x1432ab(0x249)](a0_0x1432ab(0x285),auth,async(_0x5c95d5,_0x1f9f7f)=>{const _0x2674db=a0_0x1432ab,_0x14aaf0=await product[_0x2674db(0x271)]();_0x1f9f7f['json']({'data':_0x14aaf0});}),router[a0_0x1432ab(0x249)](a0_0x1432ab(0x262),auth,async(_0x112f77,_0x1f68b3)=>{const _0x4193ed=a0_0x1432ab;try{const {dataProdCat:_0x4508cb,dataProdIdentity:_0x34595b}=_0x112f77[_0x4193ed(0x27d)];var _0x541efc;switch(_0x4508cb){case'fg':switch(_0x34595b){case'Brands':_0x541efc=await product[_0x4193ed(0x21f)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x4193ed(0x1ca)}},{'$project':{'brand':_0x4193ed(0x255)}}]);break;case'Category':_0x541efc=await product[_0x4193ed(0x21f)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x4193ed(0x255)}}]);break;}break;case'rm':switch(_0x34595b){case'Brands':_0x541efc=await product[_0x4193ed(0x21f)]([{'$match':{'product_category':_0x4193ed(0x1f3)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x4193ed(0x255)}}]);break;case _0x4193ed(0x24e):_0x541efc=await product[_0x4193ed(0x21f)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x4193ed(0x1e2)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x1f68b3[_0x4193ed(0x26c)](_0x541efc);}catch(_0x5d5971){_0x1f68b3['json']({'message':_0x5d5971[_0x4193ed(0x22e)]});}}),router[a0_0x1432ab(0x249)](a0_0x1432ab(0x219),auth,async(_0xdccea6,_0x3a1aa2)=>{const _0x493912=a0_0x1432ab;try{console[_0x493912(0x208)](_0xdccea6[_0x493912(0x27d)]);const {prod_cat:_0x1e0433,identity:_0x2d9779,valueData:_0x168b4d,typeofbarcode:_0x322d31}=_0xdccea6['body'];let _0x4712df;switch(_0x1e0433){case'fg':if(_0x2d9779==_0x493912(0x267))_0x4712df=await product[_0x493912(0x21f)]([{'$match':{'product_category':_0x493912(0x246),'brand':_0x168b4d}}]);else _0x2d9779=='Category'&&(_0x4712df=await product[_0x493912(0x21f)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x168b4d}}]));break;case'rm':if(_0x2d9779==_0x493912(0x267))_0x4712df=await product[_0x493912(0x21f)]([{'$match':{'product_category':_0x493912(0x1f3),'brand':_0x168b4d}}]);else _0x2d9779=='Category'&&(_0x4712df=await product['aggregate']([{'$match':{'product_category':_0x493912(0x1f3),'category':_0x168b4d}}]));break;}const _0x4c9426=_0x32d5c8=>_0x32d5c8*0x48,_0x2c8739={'width':0x3,'height':0x1},_0x2a28d1=new PDFDocument({'margin':_0x4c9426(0.75),'size':[_0x4c9426(_0x2c8739[_0x493912(0x280)]),_0x4c9426(_0x2c8739[_0x493912(0x1cf)])],'bufferPages':!![]}),_0x34a477=_0x4712df[_0x493912(0x200)];for(let _0x7591ea=0x0;_0x7591ea<=_0x34a477;_0x7591ea++){if(_0x7591ea!=_0x34a477){const _0x4b7a93=_0x4712df[_0x7591ea][_0x493912(0x1f2)],_0x3b4321=_0x4712df[_0x7591ea][_0x493912(0x1dc)],_0x3ed730=_0x4712df[_0x7591ea]['secondary_code'],_0xebac02=_0x4712df[_0x7591ea]['product_code'];var _0x3aa3e7;switch(_0x322d31){case'1':_0x3aa3e7=_0x3b4321;break;case'2':_0x3aa3e7=_0x3ed730;break;case'3':_0x3aa3e7=_0xebac02;break;}const _0x34b72b={'width':0xd2,'height':0x64},_0xf40471={'width':_0x4c9426(_0x2c8739[_0x493912(0x280)]),'height':_0x4c9426(_0x2c8739[_0x493912(0x1cf)])},_0x58ba7e=new Canvas();JsBarcode(_0x58ba7e,_0x3aa3e7,{'format':_0x493912(0x266),'height':_0x34b72b[_0x493912(0x1cf)],'displayValue':!![],'text':_0x3aa3e7});const _0x278182=_0x58ba7e['toBuffer'](),_0x194be5=_0xf40471['width']/_0x34b72b[_0x493912(0x280)],_0x3c50d0=_0xf40471[_0x493912(0x1cf)]/_0x34b72b[_0x493912(0x1cf)],_0x1bb72f=Math[_0x493912(0x203)](_0x194be5,_0x3c50d0),_0x417e46=_0x34b72b['width']*_0x1bb72f,_0x65189c=_0x34b72b['height']*_0x1bb72f,_0x2698fd=(_0xf40471[_0x493912(0x280)]-_0x417e46)/0x2,_0x4c8f9d=(_0xf40471[_0x493912(0x1cf)]-_0x65189c)/0x2;_0x2a28d1[_0x493912(0x287)](_0x278182,_0x2698fd,_0x4c8f9d,{'width':_0x417e46,'height':_0x65189c}),_0x7591ea!=_0x34a477&&_0x2a28d1[_0x493912(0x1eb)]();}}const _0x553145=[];_0x2a28d1['on'](_0x493912(0x232),_0x553145[_0x493912(0x235)][_0x493912(0x1ee)](_0x553145)),_0x2a28d1['on'](_0x493912(0x254),()=>{const _0x3011e5=_0x493912,_0x37e043=Buffer[_0x3011e5(0x238)](_0x553145),_0x329ebc=_0x37e043['toString'](_0x3011e5(0x244));_0x3a1aa2[_0x3011e5(0x26c)]({'pdfContent':_0x329ebc});}),_0x2a28d1['end']();}catch(_0xc37abf){_0x3a1aa2[_0x493912(0x26c)]({'message':_0xc37abf['message']});}}),router[a0_0x1432ab(0x249)]('/print_barcode_filter_search/',auth,async(_0x9dce0c,_0x405b5e)=>{const _0x2d35de=a0_0x1432ab;try{console[_0x2d35de(0x208)](_0x9dce0c['body']);const {prod_cat:_0xadcc29,identity:_0x1ad818,valueData:_0x5e5e9b}=_0x9dce0c[_0x2d35de(0x27d)];let _0x3a5784;switch(_0xadcc29){case'fg':if(_0x1ad818==_0x2d35de(0x267))_0x3a5784=await product[_0x2d35de(0x21f)]([{'$match':{'product_category':_0x2d35de(0x246),'brand':_0x5e5e9b}}]);else _0x1ad818==_0x2d35de(0x24e)&&(_0x3a5784=await product['aggregate']([{'$match':{'product_category':_0x2d35de(0x246),'category':_0x5e5e9b}}]));break;case'rm':if(_0x1ad818==_0x2d35de(0x267))_0x3a5784=await product[_0x2d35de(0x21f)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x5e5e9b}}]);else _0x1ad818=='Category'&&(_0x3a5784=await product[_0x2d35de(0x21f)]([{'$match':{'product_category':_0x2d35de(0x1f3),'category':_0x5e5e9b}}]));break;}_0x405b5e[_0x2d35de(0x26c)]({'data':_0x3a5784});}catch(_0x364c45){_0x405b5e[_0x2d35de(0x26c)]({'message':_0x364c45[_0x2d35de(0x22e)]});}}),router['post'](a0_0x1432ab(0x250),auth,async(_0x2e7d43,_0x4e39dd)=>{const _0x1d3ae5=a0_0x1432ab;try{const _0x39a96b=_0x2e7d43[_0x1d3ae5(0x27b)]['id'],{copies:_0xf463cb,typeofbarcode:_0x46b6f2}=_0x2e7d43['body'];var _0xc0a26d=await product[_0x1d3ae5(0x270)](_0x39a96b);const _0x38261c=_0x3eeabe=>_0x3eeabe*0x48,_0x267f65={'width':0x3,'height':0x1},_0x3dec59=new PDFDocument({'margin':_0x38261c(0.75),'size':[_0x38261c(_0x267f65[_0x1d3ae5(0x280)]),_0x38261c(_0x267f65[_0x1d3ae5(0x1cf)])],'bufferPages':!![]}),_0x1c039f=_0xf463cb,_0x266971=_0xc0a26d[_0x1d3ae5(0x1f2)],_0x55d4a2=_0xc0a26d[_0x1d3ae5(0x1dc)],_0x53a732=_0xc0a26d[_0x1d3ae5(0x1d3)],_0x2332e2=_0xc0a26d['product_code'];let _0x5c9868;switch(_0x46b6f2){case'1':_0x5c9868=_0x55d4a2;break;case'2':_0x5c9868=_0x53a732;break;case'3':_0x5c9868=_0x2332e2;break;}const _0x3af25e={'width':0xd2,'height':0x64},_0x42656e={'width':_0x38261c(_0x267f65[_0x1d3ae5(0x280)]),'height':_0x38261c(_0x267f65[_0x1d3ae5(0x1cf)])};for(let _0x484d7c=0x1;_0x484d7c<=_0x1c039f;_0x484d7c++){const _0x477060=new Canvas();JsBarcode(_0x477060,_0x5c9868,{'format':'CODE128','height':_0x3af25e[_0x1d3ae5(0x1cf)],'displayValue':!![],'text':_0x5c9868});const _0x34ee32=_0x477060[_0x1d3ae5(0x284)](),_0x20f059=_0x42656e[_0x1d3ae5(0x280)]/_0x3af25e[_0x1d3ae5(0x280)],_0x3ccd8=_0x42656e[_0x1d3ae5(0x1cf)]/_0x3af25e[_0x1d3ae5(0x1cf)],_0x4ad479=Math[_0x1d3ae5(0x203)](_0x20f059,_0x3ccd8),_0x21dab2=_0x3af25e[_0x1d3ae5(0x280)]*_0x4ad479,_0x48de2a=_0x3af25e['height']*_0x4ad479,_0x3dd03b=(_0x42656e['width']-_0x21dab2)/0x2,_0x566eec=(_0x42656e[_0x1d3ae5(0x1cf)]-_0x48de2a)/0x2;_0x3dec59[_0x1d3ae5(0x287)](_0x34ee32,_0x3dd03b,_0x566eec,{'width':_0x21dab2,'height':_0x48de2a}),_0x484d7c!=_0x1c039f&&_0x3dec59['addPage']();}const _0x102d2c=[];_0x3dec59['on'](_0x1d3ae5(0x232),_0x102d2c[_0x1d3ae5(0x235)][_0x1d3ae5(0x1ee)](_0x102d2c)),_0x3dec59['on'](_0x1d3ae5(0x254),()=>{const _0x24a880=_0x1d3ae5,_0x8e9b20=Buffer[_0x24a880(0x238)](_0x102d2c),_0x4a8a71=_0x8e9b20[_0x24a880(0x1e7)]('base64');_0x4e39dd[_0x24a880(0x26c)]({'pdfContent':_0x4a8a71});}),_0x3dec59[_0x1d3ae5(0x254)]();}catch(_0x35ef96){_0x4e39dd['json']({'message':_0x35ef96[_0x1d3ae5(0x22e)]});}}),module[a0_0x1432ab(0x22f)]=router;