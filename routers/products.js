const a0_0x1b8e60=a0_0x4530;(function(_0x4e8873,_0x565f1e){const _0xea2792=a0_0x4530,_0x48d890=_0x4e8873();while(!![]){try{const _0x333a94=parseInt(_0xea2792(0x116))/0x1*(parseInt(_0xea2792(0x8d))/0x2)+parseInt(_0xea2792(0xb5))/0x3+parseInt(_0xea2792(0xa8))/0x4+parseInt(_0xea2792(0xaa))/0x5+-parseInt(_0xea2792(0xd4))/0x6*(-parseInt(_0xea2792(0x11a))/0x7)+-parseInt(_0xea2792(0x126))/0x8*(-parseInt(_0xea2792(0xc1))/0x9)+-parseInt(_0xea2792(0x12f))/0xa;if(_0x333a94===_0x565f1e)break;else _0x48d890['push'](_0x48d890['shift']());}catch(_0x488667){_0x48d890['push'](_0x48d890['shift']());}}}(a0_0x7303,0x251a5));const express=require(a0_0x1b8e60(0x97)),res=require(a0_0x1b8e60(0xdf)),app=express(),router=express['Router'](),multer=require(a0_0x1b8e60(0xa1)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x1b8e60(0x79)),auth=require('../middleware/auth'),users=require(a0_0x1b8e60(0xcc)),excelJS=require(a0_0x1b8e60(0xca)),xlsx=require(a0_0x1b8e60(0x10d)),JsBarcode=require(a0_0x1b8e60(0x96)),{Canvas}=require(a0_0x1b8e60(0xb2)),PDFDocument=require(a0_0x1b8e60(0xc3));router[a0_0x1b8e60(0xac)](a0_0x1b8e60(0x10b),auth,async(_0x366fc3,_0xdabf33)=>{const _0x4174e4=a0_0x1b8e60;try{const {username:_0x3843bb,email:_0x11c8fb,role:_0x2d9f39}=_0x366fc3['user'],_0x477fcb=_0x366fc3[_0x4174e4(0x112)],_0xcd6684=await profile[_0x4174e4(0xd6)]({'email':_0x477fcb[_0x4174e4(0x8f)]}),_0x5e5291=await master_shop['find']();console[_0x4174e4(0x89)](_0x4174e4(0x11d),_0x5e5291);const _0x887bc0=await categories[_0x4174e4(0xad)]();if(_0x5e5291[0x0][_0x4174e4(0x99)]==_0x4174e4(0xd5))var _0x5107e9=users['English'];else{if(_0x5e5291[0x0][_0x4174e4(0x99)]=='Hindi')var _0x5107e9=users[_0x4174e4(0x114)];else{if(_0x5e5291[0x0]['language']==_0x4174e4(0xd0))var _0x5107e9=users[_0x4174e4(0xd0)];else{if(_0x5e5291[0x0]['language']=='Spanish')var _0x5107e9=users['Spanish'];else{if(_0x5e5291[0x0][_0x4174e4(0x99)]=='French')var _0x5107e9=users[_0x4174e4(0x7f)];else{if(_0x5e5291[0x0][_0x4174e4(0x99)]==_0x4174e4(0xbb))var _0x5107e9=users['Portuguese'];else{if(_0x5e5291[0x0][_0x4174e4(0x99)]==_0x4174e4(0xa4))var _0x5107e9=users[_0x4174e4(0xa4)];else{if(_0x5e5291[0x0][_0x4174e4(0x99)]==_0x4174e4(0xae))var _0x5107e9=users['Arabic'];}}}}}}}_0xdabf33[_0x4174e4(0x93)](_0x4174e4(0x130),{'success':_0x366fc3['flash'](_0x4174e4(0x108)),'errors':_0x366fc3[_0x4174e4(0x87)](_0x4174e4(0xf6)),'role':_0x477fcb,'profile':_0xcd6684,'user':_0x887bc0,'master_shop':_0x5e5291,'language':_0x5107e9});}catch(_0xd65921){console[_0x4174e4(0x89)](_0xd65921);}}),router[a0_0x1b8e60(0xc5)]('/categories',auth,async(_0x773636,_0x3cb1aa)=>{const _0x19a081=a0_0x1b8e60;try{const {name:_0x450767,products:_0x17e7cc}=_0x773636[_0x19a081(0xdc)],_0x511187=new categories({'name':_0x450767,'products':_0x17e7cc}),_0x242460=await categories['findOne']({'name':_0x450767});_0x242460?_0x773636[_0x19a081(0x87)]('errors',_0x450767+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x773636[_0x19a081(0x87)](_0x19a081(0x108),_0x450767+_0x19a081(0xa3));const _0x10277c=await _0x511187[_0x19a081(0xb4)]();_0x3cb1aa[_0x19a081(0xe9)](_0x19a081(0x113));}catch(_0x2c7e2a){console[_0x19a081(0x89)](_0x2c7e2a);}}),router[a0_0x1b8e60(0xac)]('/categories/:id',auth,async(_0x3c491e,_0x3ecec4)=>{const _0x3ad27b=a0_0x1b8e60;try{const {username:_0x1e6fbc,email:_0x2564c9,role:_0x3ff68a}=_0x3c491e[_0x3ad27b(0x112)],_0x1fdba6=_0x3c491e['user'],_0x177709=await profile[_0x3ad27b(0xd6)]({'email':_0x1fdba6['email']}),_0x50832b=await master_shop[_0x3ad27b(0xad)]();console[_0x3ad27b(0x89)](_0x3ad27b(0x11d),_0x50832b);const _0x1f0a0e=_0x3c491e[_0x3ad27b(0x11f)]['id'];console[_0x3ad27b(0x89)](_0x1f0a0e);const _0x173efa=await categories[_0x3ad27b(0x128)](_0x1f0a0e);if(_0x50832b[0x0][_0x3ad27b(0x99)]==_0x3ad27b(0xd5))var _0x45a7b5=users[_0x3ad27b(0xa0)];else{if(_0x50832b[0x0]['language']=='Hindi')var _0x45a7b5=users[_0x3ad27b(0x114)];else{if(_0x50832b[0x0][_0x3ad27b(0x99)]==_0x3ad27b(0xd0))var _0x45a7b5=users['German'];else{if(_0x50832b[0x0][_0x3ad27b(0x99)]==_0x3ad27b(0x88))var _0x45a7b5=users['Spanish'];else{if(_0x50832b[0x0][_0x3ad27b(0x99)]=='French')var _0x45a7b5=users[_0x3ad27b(0x7f)];else{if(_0x50832b[0x0][_0x3ad27b(0x99)]==_0x3ad27b(0xbb))var _0x45a7b5=users[_0x3ad27b(0xf9)];else{if(_0x50832b[0x0][_0x3ad27b(0x99)]==_0x3ad27b(0xa4))var _0x45a7b5=users[_0x3ad27b(0xa4)];else{if(_0x50832b[0x0][_0x3ad27b(0x99)]=='Arabic\x20(ae)')var _0x45a7b5=users['Arabic'];}}}}}}}_0x3ecec4[_0x3ad27b(0x93)](_0x3ad27b(0x130),{'success':_0x3c491e[_0x3ad27b(0x87)](_0x3ad27b(0x108)),'errors':_0x3c491e[_0x3ad27b(0x87)](_0x3ad27b(0xf6)),'role':_0x1fdba6,'profile':_0x177709,'master_shop':_0x50832b,'user':_0x173efa,'language':_0x45a7b5});}catch(_0x3210ba){console[_0x3ad27b(0x89)](_0x3210ba);}}),router['post'](a0_0x1b8e60(0xfb),auth,async(_0x5a102b,_0x19ffd2)=>{const _0x1e6806=a0_0x1b8e60;try{const _0x55a57d=_0x5a102b[_0x1e6806(0x11f)]['id'],_0x3f060f=await categories[_0x1e6806(0x90)](_0x55a57d,_0x5a102b['body']);_0x5a102b[_0x1e6806(0x87)](_0x1e6806(0x108),''+users['categories_edit']),_0x19ffd2[_0x1e6806(0xe9)]('/products/categories');}catch(_0x3c1d5f){console[_0x1e6806(0x89)](_0x3c1d5f);}}),router['get'](a0_0x1b8e60(0x11c),auth,async(_0x4f4e96,_0x40d5b1)=>{const _0x5812fd=a0_0x1b8e60;try{const _0x2b9947=_0x4f4e96[_0x5812fd(0x11f)]['id'],_0x4d14f5=await categories['findByIdAndDelete'](_0x2b9947);_0x4f4e96[_0x5812fd(0x87)]('success','categories\x20data\x20delete\x20successfully'),_0x40d5b1[_0x5812fd(0xe9)](_0x5812fd(0x113));}catch(_0x1ea697){console['log'](_0x1ea697);}}),router['get'](a0_0x1b8e60(0x9e),auth,async(_0x31038b,_0x346a45)=>{const _0x1eb88e=a0_0x1b8e60;try{const {username:_0x4e3149,email:_0x3e7a45,role:_0x5be105}=_0x31038b['user'],_0x1c6a24=_0x31038b['user'],_0x2b3a0e=await profile[_0x1eb88e(0xd6)]({'email':_0x1c6a24[_0x1eb88e(0x8f)]}),_0xdbdfef=await master_shop[_0x1eb88e(0xad)]();console[_0x1eb88e(0x89)](_0x1eb88e(0x11d),_0xdbdfef);const _0x406c4e=await brands[_0x1eb88e(0xad)]();if(_0xdbdfef[0x0][_0x1eb88e(0x99)]==_0x1eb88e(0xd5))var _0x40e188=users['English'];else{if(_0xdbdfef[0x0][_0x1eb88e(0x99)]==_0x1eb88e(0x114))var _0x40e188=users[_0x1eb88e(0x114)];else{if(_0xdbdfef[0x0][_0x1eb88e(0x99)]=='German')var _0x40e188=users[_0x1eb88e(0xd0)];else{if(_0xdbdfef[0x0]['language']==_0x1eb88e(0x88))var _0x40e188=users['Spanish'];else{if(_0xdbdfef[0x0][_0x1eb88e(0x99)]=='French')var _0x40e188=users['French'];else{if(_0xdbdfef[0x0][_0x1eb88e(0x99)]==_0x1eb88e(0xbb))var _0x40e188=users['Portuguese'];else{if(_0xdbdfef[0x0]['language']==_0x1eb88e(0xa4))var _0x40e188=users[_0x1eb88e(0xa4)];else{if(_0xdbdfef[0x0]['language']=='Arabic\x20(ae)')var _0x40e188=users[_0x1eb88e(0x80)];}}}}}}}_0x346a45[_0x1eb88e(0x93)](_0x1eb88e(0xf2),{'success':_0x31038b[_0x1eb88e(0x87)]('success'),'errors':_0x31038b[_0x1eb88e(0x87)](_0x1eb88e(0xf6)),'role':_0x1c6a24,'profile':_0x2b3a0e,'master_shop':_0xdbdfef,'user':_0x406c4e,'language':_0x40e188});}catch(_0x1643de){console[_0x1eb88e(0x89)](_0x1643de);}}),router[a0_0x1b8e60(0xc5)](a0_0x1b8e60(0x9e),auth,async(_0x3392fe,_0x213615)=>{const _0x103bf3=a0_0x1b8e60;try{const {name:_0x52c3c3,products:_0x19254b}=_0x3392fe['body'],_0x556e54=new brands({'name':_0x52c3c3,'products':_0x19254b}),_0x404ab1=await brands['findOne']({'name':_0x52c3c3});_0x404ab1?_0x3392fe['flash'](_0x103bf3(0xf6),_0x52c3c3+_0x103bf3(0x10c)):_0x3392fe[_0x103bf3(0x87)](_0x103bf3(0x108),_0x52c3c3+_0x103bf3(0xce));const _0x30dc0c=await _0x556e54[_0x103bf3(0xb4)]();_0x213615[_0x103bf3(0xe9)](_0x103bf3(0xf4));}catch(_0x2ead05){console[_0x103bf3(0x89)](_0x2ead05);}}),router['get']('/brands/:id',auth,async(_0x34972b,_0x16bbb3)=>{const _0x2f8088=a0_0x1b8e60;try{const {username:_0x2fdae5,email:_0x556df1,role:_0x27187f}=_0x34972b[_0x2f8088(0x112)],_0x59123a=_0x34972b[_0x2f8088(0x112)],_0x141c4c=await profile[_0x2f8088(0xd6)]({'email':_0x59123a[_0x2f8088(0x8f)]}),_0x29f5b1=await master_shop[_0x2f8088(0xad)]();console[_0x2f8088(0x89)](_0x2f8088(0x11d),_0x29f5b1);const _0xa7ab91=_0x34972b[_0x2f8088(0x11f)]['id'];console[_0x2f8088(0x89)](_0xa7ab91);const _0x3b12a0=await brands[_0x2f8088(0x128)](_0xa7ab91);if(_0x29f5b1[0x0]['language']==_0x2f8088(0xd5))var _0x24639e=users[_0x2f8088(0xa0)];else{if(_0x29f5b1[0x0][_0x2f8088(0x99)]==_0x2f8088(0x114))var _0x24639e=users[_0x2f8088(0x114)];else{if(_0x29f5b1[0x0][_0x2f8088(0x99)]=='German')var _0x24639e=users[_0x2f8088(0xd0)];else{if(_0x29f5b1[0x0][_0x2f8088(0x99)]=='Spanish')var _0x24639e=users[_0x2f8088(0x88)];else{if(_0x29f5b1[0x0]['language']==_0x2f8088(0x7f))var _0x24639e=users[_0x2f8088(0x7f)];else{if(_0x29f5b1[0x0]['language']==_0x2f8088(0xbb))var _0x24639e=users[_0x2f8088(0xf9)];else{if(_0x29f5b1[0x0][_0x2f8088(0x99)]==_0x2f8088(0xa4))var _0x24639e=users[_0x2f8088(0xa4)];else{if(_0x29f5b1[0x0][_0x2f8088(0x99)]==_0x2f8088(0xae))var _0x24639e=users[_0x2f8088(0x80)];}}}}}}}_0x16bbb3[_0x2f8088(0x93)](_0x2f8088(0xf2),{'success':_0x34972b[_0x2f8088(0x87)]('success'),'errors':_0x34972b[_0x2f8088(0x87)](_0x2f8088(0xf6)),'role':_0x59123a,'profile':_0x141c4c,'master_shop':_0x29f5b1,'user':_0x3b12a0,'language':_0x24639e});}catch(_0x4d5287){console[_0x2f8088(0x89)](_0x4d5287);}}),router[a0_0x1b8e60(0xc5)](a0_0x1b8e60(0x9f),auth,async(_0x3f9775,_0x3f24ad)=>{const _0xeca45e=a0_0x1b8e60;try{const _0xf9e8f9=_0x3f9775[_0xeca45e(0x11f)]['id'],_0x36ca0f=await brands['findByIdAndUpdate'](_0xf9e8f9,_0x3f9775[_0xeca45e(0xdc)]);_0x3f9775[_0xeca45e(0x87)]('success','brand\x20data\x20update\x20successfully'),_0x3f24ad['redirect']('/products/brands');}catch(_0x5570ef){console['log'](_0x5570ef);}}),router[a0_0x1b8e60(0xac)]('/brands/delete/:id',auth,async(_0x3a8762,_0x5252f4)=>{const _0x59d1a5=a0_0x1b8e60;try{const _0x15ef8c=_0x3a8762['params']['id'],_0x31bbad=await brands[_0x59d1a5(0x12a)](_0x15ef8c);_0x3a8762['flash'](_0x59d1a5(0x108),'brand\x20data\x20delete\x20successfully'),_0x5252f4[_0x59d1a5(0xe9)](_0x59d1a5(0xf4));}catch(_0x3e26cb){console[_0x59d1a5(0x89)](_0x3e26cb);}}),router[a0_0x1b8e60(0xac)](a0_0x1b8e60(0xaf),auth,async(_0x54e8db,_0x454d4f)=>{const _0x14e0f9=a0_0x1b8e60;try{const {username:_0x3f0644,email:_0x1baca4,role:_0x158d42}=_0x54e8db[_0x14e0f9(0x112)],_0x11d510=_0x54e8db[_0x14e0f9(0x112)],_0x553de1=await profile[_0x14e0f9(0xd6)]({'email':_0x11d510[_0x14e0f9(0x8f)]}),_0x280fe5=await master_shop['find']();console[_0x14e0f9(0x89)](_0x14e0f9(0x11d),_0x280fe5);const _0x17555a=await units[_0x14e0f9(0xad)]();if(_0x280fe5[0x0][_0x14e0f9(0x99)]=='English\x20(US)')var _0xd1092a=users[_0x14e0f9(0xa0)];else{if(_0x280fe5[0x0][_0x14e0f9(0x99)]==_0x14e0f9(0x114))var _0xd1092a=users['Hindi'];else{if(_0x280fe5[0x0][_0x14e0f9(0x99)]==_0x14e0f9(0xd0))var _0xd1092a=users[_0x14e0f9(0xd0)];else{if(_0x280fe5[0x0][_0x14e0f9(0x99)]==_0x14e0f9(0x88))var _0xd1092a=users[_0x14e0f9(0x88)];else{if(_0x280fe5[0x0][_0x14e0f9(0x99)]==_0x14e0f9(0x7f))var _0xd1092a=users[_0x14e0f9(0x7f)];else{if(_0x280fe5[0x0][_0x14e0f9(0x99)]==_0x14e0f9(0xbb))var _0xd1092a=users['Portuguese'];else{if(_0x280fe5[0x0]['language']=='Chinese')var _0xd1092a=users[_0x14e0f9(0xa4)];else{if(_0x280fe5[0x0]['language']==_0x14e0f9(0xae))var _0xd1092a=users[_0x14e0f9(0x80)];}}}}}}}_0x454d4f[_0x14e0f9(0x93)](_0x14e0f9(0x106),{'success':_0x54e8db[_0x14e0f9(0x87)](_0x14e0f9(0x108)),'errors':_0x54e8db[_0x14e0f9(0x87)](_0x14e0f9(0xf6)),'role':_0x11d510,'profile':_0x553de1,'master_shop':_0x280fe5,'user':_0x17555a,'language':_0xd1092a});}catch(_0x1623df){console[_0x14e0f9(0x89)](_0x1623df);}}),router[a0_0x1b8e60(0xc5)](a0_0x1b8e60(0xaf),auth,async(_0x9c8f94,_0x33d749)=>{const _0x250371=a0_0x1b8e60;try{const {name:_0x65cb23,secondary_unit:_0x812b56,products:_0x17b248}=_0x9c8f94['body'],_0xfeda3e=new units({'name':_0x65cb23,'secondary_unit':_0x812b56,'products':_0x17b248}),_0x54e803=await units['findOne']({'name':_0x65cb23});_0x54e803?_0x9c8f94[_0x250371(0x87)]('errors',_0x65cb23+_0x250371(0xdb)):_0x9c8f94[_0x250371(0x87)](_0x250371(0x108),_0x65cb23+'\x20unit\x20is\x20add\x20successfully');const _0x321cd5=await _0xfeda3e[_0x250371(0xb4)]();_0x33d749[_0x250371(0xe9)]('/products/units');}catch(_0xe7e757){console[_0x250371(0x89)](_0xe7e757);}}),router['get'](a0_0x1b8e60(0xdd),auth,async(_0x31834f,_0xf41b36)=>{const _0x1bc90e=a0_0x1b8e60;try{const {username:_0x6035db,email:_0xa9a3dc,role:_0x7a66ce}=_0x31834f[_0x1bc90e(0x112)],_0x4b1fca=_0x31834f[_0x1bc90e(0x112)],_0x3fd289=await profile[_0x1bc90e(0xd6)]({'email':_0x4b1fca[_0x1bc90e(0x8f)]}),_0x365cbf=await master_shop['find']();console['log'](_0x1bc90e(0x11d),_0x365cbf);const _0x1a6b34=_0x31834f[_0x1bc90e(0x11f)]['id'],_0xf8329d=await units[_0x1bc90e(0x128)](_0x1a6b34);if(_0x365cbf[0x0][_0x1bc90e(0x99)]==_0x1bc90e(0xd5))var _0x49e633=users[_0x1bc90e(0xa0)];else{if(_0x365cbf[0x0]['language']=='Hindi')var _0x49e633=users[_0x1bc90e(0x114)];else{if(_0x365cbf[0x0][_0x1bc90e(0x99)]==_0x1bc90e(0xd0))var _0x49e633=users[_0x1bc90e(0xd0)];else{if(_0x365cbf[0x0][_0x1bc90e(0x99)]==_0x1bc90e(0x88))var _0x49e633=users[_0x1bc90e(0x88)];else{if(_0x365cbf[0x0][_0x1bc90e(0x99)]==_0x1bc90e(0x7f))var _0x49e633=users[_0x1bc90e(0x7f)];else{if(_0x365cbf[0x0][_0x1bc90e(0x99)]==_0x1bc90e(0xbb))var _0x49e633=users[_0x1bc90e(0xf9)];else{if(_0x365cbf[0x0]['language']==_0x1bc90e(0xa4))var _0x49e633=users[_0x1bc90e(0xa4)];else{if(_0x365cbf[0x0][_0x1bc90e(0x99)]=='Arabic\x20(ae)')var _0x49e633=users['Arabic'];}}}}}}}_0xf41b36['render'](_0x1bc90e(0x106),{'success':_0x31834f[_0x1bc90e(0x87)](_0x1bc90e(0x108)),'errors':_0x31834f[_0x1bc90e(0x87)]('errors'),'role':_0x4b1fca,'profile':_0x3fd289,'master_shop':_0x365cbf,'user':_0xf8329d,'language':_0x49e633});}catch(_0x4631c2){console[_0x1bc90e(0x89)](_0x4631c2);}}),router['post'](a0_0x1b8e60(0xdd),auth,async(_0x3fe06d,_0xfd1298)=>{const _0x281b4a=a0_0x1b8e60;try{const _0x54d9fa=_0x3fe06d[_0x281b4a(0x11f)]['id'],_0x36973f=await units[_0x281b4a(0x90)](_0x54d9fa,_0x3fe06d[_0x281b4a(0xdc)]);_0x3fe06d[_0x281b4a(0x87)]('success',_0x281b4a(0xb1)),_0xfd1298['redirect']('/products/units');}catch(_0x305cef){console[_0x281b4a(0x89)](_0x305cef);}}),router[a0_0x1b8e60(0xac)](a0_0x1b8e60(0x7a),auth,async(_0x5e36dc,_0x23247b)=>{const _0x411c67=a0_0x1b8e60;try{const _0x334208=_0x5e36dc['params']['id'],_0x2bc034=await units[_0x411c67(0x12a)](_0x334208);_0x5e36dc[_0x411c67(0x87)](_0x411c67(0x108),_0x411c67(0x8c)),_0x23247b[_0x411c67(0xe9)](_0x411c67(0xcd));}catch(_0x231b10){console[_0x411c67(0x89)](_0x231b10);}});const storage=multer['diskStorage']({'destination':(_0x54a5f4,_0x261caf,_0x30faf5)=>{_0x30faf5(null,'public/upload');},'filename':(_0x7f257c,_0x5a3ecc,_0xec9e14)=>{const _0x12feae=a0_0x1b8e60;_0xec9e14(null,Date[_0x12feae(0xe6)]()+_0x5a3ecc[_0x12feae(0x12b)]);}}),upload=multer({'storage':storage});function a0_0x4530(_0x3f253e,_0x1cf177){const _0x73035c=a0_0x7303();return a0_0x4530=function(_0x453034,_0x403474){_0x453034=_0x453034-0x78;let _0x59cec7=_0x73035c[_0x453034];return _0x59cec7;},a0_0x4530(_0x3f253e,_0x1cf177);}router['get'](a0_0x1b8e60(0xe3),auth,async(_0x4c9867,_0xa0c38d)=>{const _0x3d5dcd=a0_0x1b8e60;try{const {username:_0x38d7bd,email:_0x4c582b,role:_0x3d319f}=_0x4c9867['user'],_0x58d157=_0x4c9867['user'],_0x17866d=await profile[_0x3d5dcd(0xd6)]({'email':_0x58d157[_0x3d5dcd(0x8f)]}),_0x288a69={'year':'numeric','month':_0x3d5dcd(0x8e),'day':_0x3d5dcd(0x124)},_0xb41ddf=await master_shop[_0x3d5dcd(0xad)]();console[_0x3d5dcd(0x89)](_0x3d5dcd(0xb7),_0xb41ddf);const _0x1cf6dd=await product[_0x3d5dcd(0xad)]();console['log']('Products\x20find_data',_0x1cf6dd);const _0x25a419=await warehouse[_0x3d5dcd(0xbf)]([{'$unwind':_0x3d5dcd(0xe0)},{'$lookup':{'from':_0x3d5dcd(0x12e),'localField':'product_details.product_name','foreignField':_0x3d5dcd(0xd7),'as':'product_docs'}},{'$unwind':'$product_docs'},{'$project':{'product_name':'$product_details.product_name','product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x3d5dcd(0x9a),'product_stock':{'$sum':_0x3d5dcd(0xa9)}}}]);console[_0x3d5dcd(0x89)](_0x3d5dcd(0x110),_0x25a419),_0x25a419[_0x3d5dcd(0xb9)](_0x1904ca=>{const _0x37aa1c=_0x3d5dcd,_0x5be6bb=_0x1cf6dd[_0x37aa1c(0x7b)](_0x13350e=>{const _0x1b7318=_0x37aa1c;_0x13350e[_0x1b7318(0xd7)]==_0x1904ca[_0x1b7318(0x81)]&&(_0x13350e[_0x1b7318(0x94)]=parseInt(_0x13350e[_0x1b7318(0x94)])+parseInt(_0x1904ca[_0x1b7318(0xed)]));});}),console[_0x3d5dcd(0x89)](_0x3d5dcd(0x104),_0x1cf6dd);if(_0xb41ddf[0x0][_0x3d5dcd(0x99)]==_0x3d5dcd(0xd5))var _0x18eb11=users[_0x3d5dcd(0xa0)];else{if(_0xb41ddf[0x0][_0x3d5dcd(0x99)]==_0x3d5dcd(0x114))var _0x18eb11=users[_0x3d5dcd(0x114)];else{if(_0xb41ddf[0x0][_0x3d5dcd(0x99)]==_0x3d5dcd(0xd0))var _0x18eb11=users['German'];else{if(_0xb41ddf[0x0][_0x3d5dcd(0x99)]=='Spanish')var _0x18eb11=users[_0x3d5dcd(0x88)];else{if(_0xb41ddf[0x0]['language']==_0x3d5dcd(0x7f))var _0x18eb11=users[_0x3d5dcd(0x7f)];else{if(_0xb41ddf[0x0][_0x3d5dcd(0x99)]==_0x3d5dcd(0xbb))var _0x18eb11=users[_0x3d5dcd(0xf9)];else{if(_0xb41ddf[0x0][_0x3d5dcd(0x99)]==_0x3d5dcd(0xa4))var _0x18eb11=users[_0x3d5dcd(0xa4)];else{if(_0xb41ddf[0x0][_0x3d5dcd(0x99)]==_0x3d5dcd(0xae))var _0x18eb11=users[_0x3d5dcd(0x80)];}}}}}}}_0xa0c38d['render'](_0x3d5dcd(0x12e),{'success':_0x4c9867[_0x3d5dcd(0x87)]('success'),'errors':_0x4c9867['flash'](_0x3d5dcd(0xf6)),'alldata':_0x1cf6dd,'profile':_0x17866d,'master_shop':_0xb41ddf,'role':_0x58d157,'product_stock':_0x25a419,'language':_0x18eb11});}catch(_0x208c5d){console[_0x3d5dcd(0x89)](_0x208c5d);}}),router['get']('/view/add_products',auth,async(_0x18e1b7,_0x46ae3c)=>{const _0x2ddfea=a0_0x1b8e60;try{const {username:_0x4fa78d,email:_0x404b90,role:_0x2a6456}=_0x18e1b7[_0x2ddfea(0x112)],_0x1de0a3=_0x18e1b7[_0x2ddfea(0x112)],_0x414047=await profile[_0x2ddfea(0xd6)]({'email':_0x1de0a3[_0x2ddfea(0x8f)]}),_0x1711c8=await master_shop[_0x2ddfea(0xad)]();console[_0x2ddfea(0x89)]('master',_0x1711c8);const _0xa7edf5=await categories['find']({}),_0x3a7a1a=await brands['find']({}),_0xfc16a5=await units[_0x2ddfea(0xad)]({}),_0x5da10d=await warehouse[_0x2ddfea(0xad)]({'status':'Enabled'});if(_0x1711c8[0x0]['language']==_0x2ddfea(0xd5))var _0x28c96b=users[_0x2ddfea(0xa0)];else{if(_0x1711c8[0x0][_0x2ddfea(0x99)]==_0x2ddfea(0x114))var _0x28c96b=users['Hindi'];else{if(_0x1711c8[0x0][_0x2ddfea(0x99)]==_0x2ddfea(0xd0))var _0x28c96b=users[_0x2ddfea(0xd0)];else{if(_0x1711c8[0x0][_0x2ddfea(0x99)]==_0x2ddfea(0x88))var _0x28c96b=users['Spanish'];else{if(_0x1711c8[0x0][_0x2ddfea(0x99)]==_0x2ddfea(0x7f))var _0x28c96b=users[_0x2ddfea(0x7f)];else{if(_0x1711c8[0x0][_0x2ddfea(0x99)]==_0x2ddfea(0xbb))var _0x28c96b=users[_0x2ddfea(0xf9)];else{if(_0x1711c8[0x0][_0x2ddfea(0x99)]==_0x2ddfea(0xa4))var _0x28c96b=users[_0x2ddfea(0xa4)];else{if(_0x1711c8[0x0][_0x2ddfea(0x99)]==_0x2ddfea(0xae))var _0x28c96b=users[_0x2ddfea(0x80)];}}}}}}}_0x46ae3c[_0x2ddfea(0x93)](_0x2ddfea(0x95),{'success':_0x18e1b7['flash'](_0x2ddfea(0x108)),'errors':_0x18e1b7[_0x2ddfea(0x87)](_0x2ddfea(0xf6)),'role':_0x1de0a3,'profile':_0x414047,'categories':_0xa7edf5,'brands':_0x3a7a1a,'master_shop':_0x1711c8,'units':_0xfc16a5,'language':_0x28c96b,'find_data':_0x5da10d});}catch(_0x54ba77){console[_0x2ddfea(0x89)](_0x54ba77);}}),router[a0_0x1b8e60(0xc5)](a0_0x1b8e60(0x78),auth,upload[a0_0x1b8e60(0xec)](a0_0x1b8e60(0xf3)),async(_0x3a74fe,_0x48c7e5)=>{const _0x572113=a0_0x1b8e60;try{const {name:_0x4602fd,category:_0xf43783,brand:_0x4728e8,unit:_0x5439b6,alertquantity:_0x58f7d,stock:_0x5d2558,product_code:_0x26c37a,warehouse:_0x55cc77,primary_ItemCode:_0x3dbec3,second_ItemCode:_0x297e18,second_unit:_0x45de42,maxPerUnit:_0x5626e3,MaxPerProduct:_0x1a7248,sales_cat:_0x31ec09,type_prod:_0x3fce8e}=_0x3a74fe['body'],_0x31008a=_0x3a74fe[_0x572113(0x7d)]?.[_0x572113(0xcf)]||_0x572113(0x105),_0x400b14=new product({'image':_0x31008a,'name':_0x4602fd,'category':_0xf43783,'brand':_0x4728e8,'unit':_0x5439b6,'alertquantity':_0x58f7d,'stock':_0x5d2558,'product_code':_0x26c37a,'warehouse':_0x55cc77,'primary_code':_0x3dbec3,'secondary_code':_0x297e18,'second_unit':_0x45de42,'maxStocks':_0x1a7248,'maxProdPerUnit':_0x5626e3,'sales_category':_0x31ec09,'type_products':_0x3fce8e}),_0x59b183=await _0x400b14[_0x572113(0xb4)](),_0x567070=await categories[_0x572113(0xd6)]({'name':_0xf43783});_0x567070['products']=parseInt(_0x567070[_0x572113(0x12e)])+0x1,await _0x567070[_0x572113(0xb4)]();const _0x591db0=await brands['findOne']({'name':_0x4728e8});_0x591db0[_0x572113(0x12e)]=parseInt(_0x591db0['products'])+0x1,await _0x591db0[_0x572113(0xb4)]();const _0xd3b622=await units[_0x572113(0xd6)]({'name':_0x5439b6});_0xd3b622[_0x572113(0x12e)]=parseInt(_0xd3b622['products'])+0x1,await _0xd3b622['save'](),_0x3a74fe[_0x572113(0x87)]('success','product\x20add\x20successfully'),_0x48c7e5[_0x572113(0xe9)](_0x572113(0x7c));}catch(_0x198489){console[_0x572113(0x89)](_0x198489);}}),router[a0_0x1b8e60(0xac)](a0_0x1b8e60(0xcb),auth,async(_0x3d6c4d,_0x2a97bc)=>{const _0x15e0d2=a0_0x1b8e60;try{const {username:_0x2f5a2b,email:_0x3aa448,role:_0x294f78}=_0x3d6c4d[_0x15e0d2(0x112)],_0x21b0ef=_0x3d6c4d['user'],_0x3cf12f=await profile['findOne']({'email':_0x21b0ef[_0x15e0d2(0x8f)]}),_0x115349=await master_shop[_0x15e0d2(0xad)]();console[_0x15e0d2(0x89)](_0x15e0d2(0xe4),_0x115349);const _0x454b72=_0x3d6c4d[_0x15e0d2(0x11f)]['id'],_0x2944d1=await product[_0x15e0d2(0x128)](_0x454b72),_0x4e9b6d=await categories[_0x15e0d2(0xad)]({}),_0x297766=await brands[_0x15e0d2(0xad)]({}),_0x41d325=await units[_0x15e0d2(0xad)]({}),_0x3b1cec=await warehouse[_0x15e0d2(0xad)]({'status':_0x15e0d2(0x100)}),_0xe126fe=await units[_0x15e0d2(0xbf)]([{'$group':{'_id':_0x15e0d2(0xc0),'secondaryunit':{'$first':_0x15e0d2(0xeb)}}}]);if(_0x115349[0x0][_0x15e0d2(0x99)]=='English\x20(US)')var _0x45da29=users['English'];else{if(_0x115349[0x0][_0x15e0d2(0x99)]=='Hindi')var _0x45da29=users['Hindi'];else{if(_0x115349[0x0][_0x15e0d2(0x99)]=='German')var _0x45da29=users[_0x15e0d2(0xd0)];else{if(_0x115349[0x0][_0x15e0d2(0x99)]==_0x15e0d2(0x88))var _0x45da29=users[_0x15e0d2(0x88)];else{if(_0x115349[0x0]['language']==_0x15e0d2(0x7f))var _0x45da29=users[_0x15e0d2(0x7f)];else{if(_0x115349[0x0][_0x15e0d2(0x99)]==_0x15e0d2(0xbb))var _0x45da29=users[_0x15e0d2(0xf9)];else{if(_0x115349[0x0][_0x15e0d2(0x99)]==_0x15e0d2(0xa4))var _0x45da29=users[_0x15e0d2(0xa4)];else{if(_0x115349[0x0][_0x15e0d2(0x99)]==_0x15e0d2(0xae))var _0x45da29=users['Arabic'];}}}}}}}_0x2a97bc[_0x15e0d2(0x93)]('edit_product',{'success':_0x3d6c4d['flash']('success'),'errors':_0x3d6c4d[_0x15e0d2(0x87)](_0x15e0d2(0xf6)),'role':_0x21b0ef,'profile':_0x3cf12f,'alldata':_0x2944d1,'categories':_0x4e9b6d,'brands':_0x297766,'master_shop':_0x115349,'units':_0x41d325,'secondunit':_0xe126fe,'find_data':_0x3b1cec,'language':_0x45da29});}catch(_0x3ae591){console[_0x15e0d2(0x89)](_0x3ae591);}}),router[a0_0x1b8e60(0xc5)](a0_0x1b8e60(0xcb),auth,upload[a0_0x1b8e60(0xec)](a0_0x1b8e60(0xf3)),async(_0x24698c,_0xbcc098)=>{const _0x47647b=a0_0x1b8e60;try{const _0x55594d=_0x24698c[_0x47647b(0x11f)]['id'],_0x42cd5b=await product[_0x47647b(0x128)](_0x55594d),{image:_0x31457d,name:_0x57aada,category:_0x1c5fd4,brand:_0x2c4e5e,sku:_0x4e52a8,unit:_0x492144,alertquantity:_0x4cba3d,product_code:_0x5cd116,warehouse:_0x5333d9,primary_ItemCode:_0x5cdee7,second_ItemCode:_0x3b9cb4,second_unit:_0x1eceac,maxPerUnit:_0x5e08c6,MaxPerProduct:_0x4ed4a4,prod_catdata:_0x48da09,type_prod:_0x21cef6,sales_cat:_0x1a11b7}=_0x24698c[_0x47647b(0xdc)];_0x24698c[_0x47647b(0x7d)]&&(_0x42cd5b[_0x47647b(0xf3)]=_0x24698c[_0x47647b(0x7d)][_0x47647b(0xcf)]);_0x42cd5b[_0x47647b(0xd7)]=_0x57aada,_0x42cd5b[_0x47647b(0xc4)]=_0x1c5fd4,_0x42cd5b[_0x47647b(0x8b)]=_0x2c4e5e,_0x42cd5b[_0x47647b(0xb8)]=_0x4e52a8,_0x42cd5b[_0x47647b(0xc9)]=_0x492144,_0x42cd5b[_0x47647b(0xd8)]=_0x4cba3d,_0x42cd5b[_0x47647b(0x11e)]=_0x5cd116,_0x42cd5b[_0x47647b(0x86)]=_0x5333d9,_0x42cd5b[_0x47647b(0x131)]=_0x5cdee7,_0x42cd5b[_0x47647b(0xa6)]=_0x3b9cb4,_0x42cd5b[_0x47647b(0xc2)]=_0x1eceac,_0x42cd5b['maxStocks']=_0x4ed4a4,_0x42cd5b[_0x47647b(0xd3)]=_0x5e08c6,_0x42cd5b[_0x47647b(0xbc)]=_0x48da09,_0x42cd5b[_0x47647b(0xe7)]=_0x21cef6,_0x42cd5b[_0x47647b(0x92)]=_0x1a11b7;const _0x25610a=await _0x42cd5b[_0x47647b(0xb4)]();console[_0x47647b(0x89)](_0x47647b(0x111),_0x42cd5b),_0x24698c['flash'](_0x47647b(0x108),_0x47647b(0x122)),_0xbcc098[_0x47647b(0xe9)]('/products/view');}catch(_0x599066){console[_0x47647b(0x89)](_0x599066);}}),router[a0_0x1b8e60(0xac)]('/barcode/:id',auth,async(_0x43b91c,_0x34fbb1)=>{const _0x58d56a=a0_0x1b8e60;try{const {username:_0x39a0b5,email:_0x5dfb4f,role:_0x1d9d95}=_0x43b91c[_0x58d56a(0x112)],_0x6d0e3e=_0x43b91c[_0x58d56a(0x112)],_0x3ddb19=await profile[_0x58d56a(0xd6)]({'email':_0x6d0e3e[_0x58d56a(0x8f)]}),_0x37e685=await master_shop[_0x58d56a(0xad)]();console[_0x58d56a(0x89)](_0x58d56a(0xef),_0x37e685);const _0x54fed5=_0x43b91c[_0x58d56a(0x11f)]['id'],_0x74071f=await product[_0x58d56a(0x128)](_0x54fed5);console[_0x58d56a(0x89)](_0x58d56a(0x7e),_0x74071f);if(_0x37e685[0x0][_0x58d56a(0x99)]==_0x58d56a(0xd5))var _0x120b2f=users[_0x58d56a(0xa0)];else{if(_0x37e685[0x0][_0x58d56a(0x99)]==_0x58d56a(0x114))var _0x120b2f=users['Hindi'];else{if(_0x37e685[0x0]['language']==_0x58d56a(0xd0))var _0x120b2f=users[_0x58d56a(0xd0)];else{if(_0x37e685[0x0]['language']==_0x58d56a(0x88))var _0x120b2f=users[_0x58d56a(0x88)];else{if(_0x37e685[0x0][_0x58d56a(0x99)]=='French')var _0x120b2f=users['French'];else{if(_0x37e685[0x0][_0x58d56a(0x99)]==_0x58d56a(0xbb))var _0x120b2f=users[_0x58d56a(0xf9)];else{if(_0x37e685[0x0][_0x58d56a(0x99)]==_0x58d56a(0xa4))var _0x120b2f=users['Chinese'];else{if(_0x37e685[0x0][_0x58d56a(0x99)]==_0x58d56a(0xae))var _0x120b2f=users[_0x58d56a(0x80)];}}}}}}}_0x34fbb1[_0x58d56a(0x93)](_0x58d56a(0xf1),{'success':_0x43b91c[_0x58d56a(0x87)](_0x58d56a(0x108)),'errors':_0x43b91c['flash'](_0x58d56a(0xf6)),'role':_0x6d0e3e,'profile':_0x3ddb19,'alldata':_0x74071f,'master_shop':_0x37e685,'language':_0x120b2f});}catch(_0x6c86fc){console[_0x58d56a(0x89)](_0x6c86fc);}}),router[a0_0x1b8e60(0xac)](a0_0x1b8e60(0x102),auth,async(_0x4ebb62,_0x4abe0e)=>{const _0x2ab08b=a0_0x1b8e60;try{const _0x5229be=new excelJS['Workbook'](),_0x5c2c53=_0x5229be[_0x2ab08b(0xe2)](_0x2ab08b(0xd2));return _0x5c2c53[_0x2ab08b(0x11b)]=[{'header':_0x2ab08b(0x10e),'key':_0x2ab08b(0xf8),'width':0xa},{'header':_0x2ab08b(0xa2),'key':_0x2ab08b(0xf7),'width':0xa},{'header':'Units','key':_0x2ab08b(0xd1),'width':0xa},{'header':_0x2ab08b(0x125),'key':'PSecondaryUnits','width':0xa},{'header':_0x2ab08b(0x98),'key':_0x2ab08b(0xc7),'width':0xa},{'header':_0x2ab08b(0x85),'key':_0x2ab08b(0xe1),'width':0xa},{'header':'Secondary_Code','key':_0x2ab08b(0xe1),'width':0xa},{'header':_0x2ab08b(0xc6),'key':_0x2ab08b(0xe1),'width':0xa},{'header':_0x2ab08b(0x120),'key':'PCat','width':0xa},{'header':_0x2ab08b(0xbd),'key':_0x2ab08b(0xa7),'width':0xa},{'header':_0x2ab08b(0xe8),'key':_0x2ab08b(0xa7),'width':0xa},{'header':'Products_category','key':_0x2ab08b(0xfa),'width':0xa}],_0x4abe0e[_0x2ab08b(0x9d)](_0x2ab08b(0xda),_0x2ab08b(0xe5)),_0x4abe0e['setHeader']('Content-Disposition',_0x2ab08b(0xee)),_0x5229be[_0x2ab08b(0x10d)]['write'](_0x4abe0e)['then'](()=>{const _0x457ad6=_0x2ab08b;_0x4abe0e[_0x457ad6(0x83)](0xc8);});}catch(_0x5593b1){_0x4abe0e[_0x2ab08b(0x83)](0x190)[_0x2ab08b(0x133)](_0x5593b1);}});function a0_0x7303(){const _0x2d112d=['attachment;\x20filename=Product_Migration_File.xlsx','barcode\x20Product\x20master','/print_barcode_filter/','product_barcode','brands','image','/products/brands','toBuffer','errors','PBrands','PName','Portuguese','Prod_Cat','/categories/:id','/print_barcode','/print_barcode_filter_search/','\x20<>\x20','addPage','Enabled','base64','/products_export_migrate_file','diskStorage','Products\x20find_data','defaultProduct.avif','units','Raw\x20Materials','success','CODE128','end','/categories','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','xlsx','Product_Name','utils','Products\x20warehouse_data','product\x20edit','user','/products/categories','Hindi','data','1XseZbr','/products_import_migrate_file','height','\x20Edit\x20Successfully','1888621gSTEZC','columns','/categories/delete/:id','master','product_code','params','Category','width','product\x20update\x20successfully','Finished\x20Goods','numeric','Secondary_Units','16XRNkRb','/barcode_filter','findById','migrate_product_fule','findByIdAndDelete','originalname','message','public/Migration/','products','9476840acjZaf','categories','primary_code','Sheets','send','/view/add_products','../models/all_models','/units/delete/:id','map','/products/view','file','barcode\x20user_id','French','Arabic','_id','min','status','\x20added\x20successfully','Primary_Code','warehouse','flash','Spanish','log','product_barcode_products','brand','unit\x20data\x20delete\x20successfully','147938PMjRPl','long','email','findByIdAndUpdate','/filter_product','sales_category','render','stock','add_product','jsbarcode','express','max_number_per_units','language','$product_name','bind','$brand','setHeader','/brands','/brands/:id','English','multer','Brands','\x20categories\x20is\x20add\x20successfully','Chinese','json','secondary_code','PAlQty','29748lvRESc','$product_stock','1455885rQgrzT','concat','get','find','Arabic\x20(ae)','/units','$category','unit\x20data\x20update\x20successfully','canvas','/select_data','save','578439qwuHsI','toString','Products\x20master','sku','forEach','SheetNames','Portuguese\x20(BR)','product_category','Alert_QTY','length','aggregate','$_id','1190061eMKHfP','secondary_unit','pdfkit-table','category','post','Product_Code','MaxperUnits','readFile','unit','exceljs','/view/:id','../public/language/languages.json','/products/units','\x20brand\x20is\x20add\x20successfully','filename','German','PUnits','Products','maxProdPerUnit','6tLwKdU','English\x20(US)','findOne','name','alertquantity','categ','Content-Type','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','body','/units/:id','Products_category','express/lib/response','$product_details','ProductCode','addWorksheet','/view','edit\x20Product\x20master','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','now','type_products','Maximum_Stocks','redirect','prod_categ','$secondary_unit','single','product_stock'];a0_0x7303=function(){return _0x2d112d;};return a0_0x7303();}const storage1=multer[a0_0x1b8e60(0x103)]({'destination':(_0x4a5f9b,_0xef729,_0x2df5cb)=>{_0x2df5cb(null,'public/Migration');},'filename':(_0x449b09,_0x2ce945,_0x1a44ba)=>{const _0x113068=a0_0x1b8e60;_0x1a44ba(null,Date[_0x113068(0xe6)]()+_0x2ce945[_0x113068(0x12b)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x1b8e60(0xc5)](a0_0x1b8e60(0x117),auth,uploadMigrate[a0_0x1b8e60(0xec)](a0_0x1b8e60(0x129)),async(_0x45e192,_0x360fa4)=>{const _0x22b241=a0_0x1b8e60,_0x57c0ef=_0x45e192[_0x22b241(0x7d)][_0x22b241(0xcf)],_0x16f095=await xlsx[_0x22b241(0xc8)](_0x22b241(0x12d)+_0x57c0ef);let _0x1ec16d=_0x16f095[_0x22b241(0xba)],_0x29a060=xlsx[_0x22b241(0x10f)]['sheet_to_json'](_0x16f095[_0x22b241(0x132)][_0x1ec16d[0x0]]);for(const _0x1b12f9 of _0x29a060){const _0x591ede=_0x1b12f9[_0x22b241(0x10e)],_0x1a28c2=_0x1b12f9[_0x22b241(0xa2)],_0x4ece0c=_0x1b12f9['Units'],_0x27c67e=_0x1b12f9[_0x22b241(0x125)],_0x55f4bc=_0x1b12f9[_0x22b241(0xc6)],_0x5a7158=_0x1b12f9['Category'],_0x5206de=_0x1b12f9[_0x22b241(0xbd)],_0x5090cc=_0x1b12f9[_0x22b241(0x85)],_0x2e9c7a=_0x1b12f9['Secondary_Code'],_0x56053b=_0x1b12f9[_0x22b241(0xe8)],_0x247e04=_0x1b12f9[_0x22b241(0x98)],_0x10b146=_0x1b12f9[_0x22b241(0xde)];try{let _0x26a664=await categories[_0x22b241(0xd6)]({'name':_0x5a7158});if(!_0x26a664){const _0x3d917b=new categories({'name':_0x5a7158,'products':'0'});_0x26a664=await _0x3d917b[_0x22b241(0xb4)]();}let _0x1728c2=await brands[_0x22b241(0xd6)]({'name':_0x1a28c2});if(!_0x1728c2){const _0x4b59d2=new brands({'name':_0x1a28c2,'products':'0'});_0x1728c2=await _0x4b59d2[_0x22b241(0xb4)]();}let _0x2543a6=await units[_0x22b241(0xd6)]({'name':_0x4ece0c,'secondary_unit':_0x27c67e});if(!_0x2543a6){const _0x2f3d37=new units({'name':_0x4ece0c,'secondary_unit':_0x27c67e,'products':'0'});_0x2543a6=await _0x2f3d37['save']();}const _0x78624b=await product[_0x22b241(0xad)]({'name':_0x591ede,'category':_0x26a664[_0x22b241(0xd7)],'brand':_0x1728c2[_0x22b241(0xd7)],'secondary_unit':_0x2543a6[_0x22b241(0xc2)],'product_code':_0x55f4bc});console['log'](_0x78624b['length']+_0x22b241(0xfe)+_0x26a664[_0x22b241(0xd7)]+'\x20<>\x20'+_0x1728c2[_0x22b241(0xd7)]+_0x22b241(0xfe)+_0x2543a6[_0x22b241(0xc2)]+'\x20<>\x20'+_0x55f4bc+_0x22b241(0xfe)+_0x591ede);if(_0x78624b[_0x22b241(0xbe)]===0x0){const _0x4005c1=new product({'image':_0x22b241(0x105),'name':_0x591ede,'category':_0x26a664[_0x22b241(0xd7)],'brand':_0x1728c2[_0x22b241(0xd7)],'unit':_0x2543a6[_0x22b241(0xd7)],'alertquantity':_0x5206de,'product_code':_0x55f4bc,'secondary_unit':_0x2543a6[_0x22b241(0xc2)],'primary_code':_0x5090cc,'secondary_code':_0x2e9c7a,'maxStocks':_0x56053b,'maxProdPerUnit':_0x247e04,'product_category':_0x10b146}),_0x5ba144=await _0x4005c1[_0x22b241(0xb4)]();_0x26a664[_0x22b241(0x12e)]=parseInt(_0x26a664[_0x22b241(0x12e)])+0x1,await _0x26a664['save'](),_0x1728c2['products']=parseInt(_0x1728c2[_0x22b241(0x12e)])+0x1,await _0x1728c2[_0x22b241(0xb4)](),_0x2543a6[_0x22b241(0x12e)]=parseInt(_0x2543a6[_0x22b241(0x12e)])+0x1,await _0x2543a6['save'](),_0x45e192[_0x22b241(0x87)](_0x22b241(0x108),_0x591ede+_0x22b241(0x84));}else{console[_0x22b241(0x89)](_0x78624b[0x0]);const _0x2ae416=_0x78624b[0x0];_0x2ae416[_0x22b241(0xc4)]=_0x26a664[_0x22b241(0xd7)],_0x2ae416[_0x22b241(0x8b)]=_0x1728c2[_0x22b241(0xd7)],_0x2ae416[_0x22b241(0xc9)]=_0x2543a6[_0x22b241(0xd7)],_0x2ae416[_0x22b241(0xd8)]=_0x5206de,_0x2ae416[_0x22b241(0x11e)]=_0x55f4bc,_0x2ae416[_0x22b241(0xc2)]=_0x2543a6['secondary_unit'],_0x2ae416[_0x22b241(0x131)]=_0x5090cc,_0x2ae416[_0x22b241(0xa6)]=_0x2e9c7a,_0x2ae416['maxStocks']=_0x56053b,_0x2ae416[_0x22b241(0xd3)]=_0x247e04,_0x2ae416['product_category']=_0x10b146;const _0x196fab=await _0x2ae416[_0x22b241(0xb4)]();_0x45e192['flash'](_0x22b241(0x108),_0x196fab[_0x22b241(0xd7)]+_0x22b241(0x119));}}catch(_0x55429e){_0x360fa4[_0x22b241(0x83)](0x1f4)[_0x22b241(0xa5)]({'proderror':_0x55429e[_0x22b241(0x12c)],'aproduct':_0x591ede});}}_0x360fa4['redirect']('/products/view');}),router[a0_0x1b8e60(0xc5)](a0_0x1b8e60(0xb3),auth,async(_0x4bae17,_0x57338f)=>{const _0x3560f8=a0_0x1b8e60;try{console[_0x3560f8(0x89)](_0x4bae17[_0x3560f8(0xdc)]);const {data_cateory:_0x29a25a,datachoose:_0x46a2f4}=_0x4bae17[_0x3560f8(0xdc)];var _0x5819f1;if(_0x46a2f4==_0x3560f8(0xea))_0x5819f1=await product['aggregate']([{'$group':{'_id':'$product_category'}}]);else{if(_0x46a2f4==_0x3560f8(0xf2))_0x5819f1=await product['aggregate']([{'$match':{'product_category':_0x29a25a}},{'$group':{'_id':'$brand'}}]);else _0x46a2f4==_0x3560f8(0xd9)&&(_0x5819f1=await product['aggregate']([{'$match':{'product_category':_0x29a25a}},{'$group':{'_id':_0x3560f8(0xb0)}}]));}_0x57338f[_0x3560f8(0xa5)](_0x5819f1);}catch(_0x4bade1){_0x57338f[_0x3560f8(0xa5)]({'message':_0x4bade1['message']});}}),router[a0_0x1b8e60(0xc5)](a0_0x1b8e60(0x91),auth,async(_0x416811,_0x7edb94)=>{const _0x45385c=a0_0x1b8e60;try{const {data_choosing:_0x1f6f53,data_selected:_0x4b3fe2}=_0x416811['body'];var _0x48ed32;if(_0x1f6f53==_0x45385c(0xea))_0x48ed32=await product[_0x45385c(0xbf)]([{'$match':{'product_category':_0x4b3fe2}}]);else{if(_0x1f6f53==_0x45385c(0xf2))_0x48ed32=await product[_0x45385c(0xbf)]([{'$match':{'brand':_0x4b3fe2}}]);else _0x1f6f53==_0x45385c(0xd9)&&(_0x48ed32=await product[_0x45385c(0xbf)]([{'$match':{'category':_0x4b3fe2}}]));}_0x7edb94['json'](_0x48ed32);}catch(_0x3d19c7){_0x7edb94[_0x45385c(0xa5)]({'message':_0x3d19c7['message']});}}),router[a0_0x1b8e60(0xac)](a0_0x1b8e60(0xfc),auth,async(_0x38f35c,_0x34b7b5)=>{const _0x4174c0=a0_0x1b8e60,_0x431e7b=_0x38f35c[_0x4174c0(0x112)],_0x27c51d=await profile[_0x4174c0(0xd6)]({'email':_0x431e7b['email']}),_0x951591=await master_shop[_0x4174c0(0xad)](),_0x3e6d54=await product[_0x4174c0(0xad)]();if(_0x951591[0x0][_0x4174c0(0x99)]==_0x4174c0(0xd5))var _0x474944=users[_0x4174c0(0xa0)];else{if(_0x951591[0x0]['language']==_0x4174c0(0x114))var _0x474944=users[_0x4174c0(0x114)];else{if(_0x951591[0x0][_0x4174c0(0x99)]==_0x4174c0(0xd0))var _0x474944=users[_0x4174c0(0xd0)];else{if(_0x951591[0x0]['language']==_0x4174c0(0x88))var _0x474944=users[_0x4174c0(0x88)];else{if(_0x951591[0x0]['language']=='French')var _0x474944=users['French'];else{if(_0x951591[0x0][_0x4174c0(0x99)]==_0x4174c0(0xbb))var _0x474944=users[_0x4174c0(0xf9)];else{if(_0x951591[0x0]['language']==_0x4174c0(0xa4))var _0x474944=users[_0x4174c0(0xa4)];else{if(_0x951591[0x0]['language']==_0x4174c0(0xae))var _0x474944=users[_0x4174c0(0x80)];}}}}}}}_0x34b7b5['render'](_0x4174c0(0x8a),{'success':_0x38f35c['flash']('success'),'errors':_0x38f35c[_0x4174c0(0x87)](_0x4174c0(0xf6)),'role':_0x431e7b,'profile':_0x27c51d,'products':_0x3e6d54,'master_shop':_0x951591,'language':_0x474944});}),router[a0_0x1b8e60(0xc5)]('/barcode_data',auth,async(_0x2ed60f,_0x513ba2)=>{const _0x6755e2=await product['find']();_0x513ba2['json']({'data':_0x6755e2});}),router[a0_0x1b8e60(0xc5)](a0_0x1b8e60(0x127),auth,async(_0x59cf04,_0x1b2995)=>{const _0x5324de=a0_0x1b8e60;try{const {dataProdCat:_0x52e37a,dataProdIdentity:_0x3d59d6}=_0x59cf04['body'];var _0xa3a71;switch(_0x52e37a){case'fg':switch(_0x3d59d6){case _0x5324de(0xa2):_0xa3a71=await product[_0x5324de(0xbf)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x5324de(0x9c)}},{'$project':{'brand':_0x5324de(0xc0)}}]);break;case'Category':_0xa3a71=await product[_0x5324de(0xbf)]([{'$match':{'product_category':_0x5324de(0x123)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x5324de(0xc0)}}]);break;}break;case'rm':switch(_0x3d59d6){case _0x5324de(0xa2):_0xa3a71=await product[_0x5324de(0xbf)]([{'$match':{'product_category':_0x5324de(0x107)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x5324de(0xc0)}}]);break;case'Category':_0xa3a71=await product[_0x5324de(0xbf)]([{'$match':{'product_category':_0x5324de(0x107)}},{'$group':{'_id':_0x5324de(0xb0)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x1b2995['json'](_0xa3a71);}catch(_0x38b7a6){_0x1b2995[_0x5324de(0xa5)]({'message':_0x38b7a6[_0x5324de(0x12c)]});}}),router[a0_0x1b8e60(0xc5)](a0_0x1b8e60(0xf0),auth,async(_0x309031,_0x1435fc)=>{const _0x4fc5be=a0_0x1b8e60;try{console[_0x4fc5be(0x89)](_0x309031[_0x4fc5be(0xdc)]);const {prod_cat:_0x2b378b,identity:_0x1b631d,valueData:_0x1209c2,typeofbarcode:_0x340c41}=_0x309031[_0x4fc5be(0xdc)];let _0x1427de;switch(_0x2b378b){case'fg':if(_0x1b631d==_0x4fc5be(0xa2))_0x1427de=await product[_0x4fc5be(0xbf)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x1209c2}}]);else _0x1b631d=='Category'&&(_0x1427de=await product[_0x4fc5be(0xbf)]([{'$match':{'product_category':_0x4fc5be(0x123),'category':_0x1209c2}}]));break;case'rm':if(_0x1b631d==_0x4fc5be(0xa2))_0x1427de=await product[_0x4fc5be(0xbf)]([{'$match':{'product_category':_0x4fc5be(0x107),'brand':_0x1209c2}}]);else _0x1b631d==_0x4fc5be(0x120)&&(_0x1427de=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0x1209c2}}]));break;}const _0x2aeb27=_0x125b5c=>_0x125b5c*0x48,_0x55dbcf={'width':0x3,'height':0x1},_0x490d18=new PDFDocument({'margin':_0x2aeb27(0.75),'size':[_0x2aeb27(_0x55dbcf[_0x4fc5be(0x121)]),_0x2aeb27(_0x55dbcf['height'])],'bufferPages':!![]}),_0x16afc8=_0x1427de['length'];for(let _0x22947c=0x0;_0x22947c<=_0x16afc8;_0x22947c++){if(_0x22947c!=_0x16afc8){const _0x118576=_0x1427de[_0x22947c][_0x4fc5be(0xd7)],_0x36e8a8=_0x1427de[_0x22947c][_0x4fc5be(0x131)],_0x1e69f7=_0x1427de[_0x22947c][_0x4fc5be(0xa6)],_0x38b094=_0x1427de[_0x22947c]['product_code'];var _0x258d33;switch(_0x340c41){case'1':_0x258d33=_0x36e8a8;break;case'2':_0x258d33=_0x1e69f7;break;case'3':_0x258d33=_0x38b094;break;}const _0xa63459={'width':0xd2,'height':0x64},_0x654709={'width':_0x2aeb27(_0x55dbcf[_0x4fc5be(0x121)]),'height':_0x2aeb27(_0x55dbcf[_0x4fc5be(0x118)])},_0xe7e039=new Canvas();JsBarcode(_0xe7e039,_0x258d33,{'format':_0x4fc5be(0x109),'height':_0xa63459[_0x4fc5be(0x118)],'displayValue':!![],'text':_0x258d33});const _0xd02db2=_0xe7e039[_0x4fc5be(0xf5)](),_0x2e9e06=_0x654709['width']/_0xa63459[_0x4fc5be(0x121)],_0x441e0d=_0x654709[_0x4fc5be(0x118)]/_0xa63459[_0x4fc5be(0x118)],_0x3a6c88=Math[_0x4fc5be(0x82)](_0x2e9e06,_0x441e0d),_0x11aaab=_0xa63459[_0x4fc5be(0x121)]*_0x3a6c88,_0x5f09f1=_0xa63459['height']*_0x3a6c88,_0x45c176=(_0x654709[_0x4fc5be(0x121)]-_0x11aaab)/0x2,_0x354b3c=(_0x654709[_0x4fc5be(0x118)]-_0x5f09f1)/0x2;_0x490d18[_0x4fc5be(0xf3)](_0xd02db2,_0x45c176,_0x354b3c,{'width':_0x11aaab,'height':_0x5f09f1}),_0x22947c!=_0x16afc8&&_0x490d18[_0x4fc5be(0xff)]();}}const _0x2efc28=[];_0x490d18['on'](_0x4fc5be(0x115),_0x2efc28['push'][_0x4fc5be(0x9b)](_0x2efc28)),_0x490d18['on'](_0x4fc5be(0x10a),()=>{const _0x1e8029=_0x4fc5be,_0x257716=Buffer['concat'](_0x2efc28),_0xdf282c=_0x257716[_0x1e8029(0xb6)](_0x1e8029(0x101));_0x1435fc[_0x1e8029(0xa5)]({'pdfContent':_0xdf282c});}),_0x490d18['end']();}catch(_0x385e0a){_0x1435fc['json']({'message':_0x385e0a[_0x4fc5be(0x12c)]});}}),router[a0_0x1b8e60(0xc5)](a0_0x1b8e60(0xfd),auth,async(_0x463a28,_0x16efb5)=>{const _0x4af6e3=a0_0x1b8e60;try{console[_0x4af6e3(0x89)](_0x463a28['body']);const {prod_cat:_0x2b241a,identity:_0x6a6d2d,valueData:_0x3e7708}=_0x463a28[_0x4af6e3(0xdc)];let _0x5bfe2c;switch(_0x2b241a){case'fg':if(_0x6a6d2d=='Brands')_0x5bfe2c=await product[_0x4af6e3(0xbf)]([{'$match':{'product_category':_0x4af6e3(0x123),'brand':_0x3e7708}}]);else _0x6a6d2d=='Category'&&(_0x5bfe2c=await product['aggregate']([{'$match':{'product_category':_0x4af6e3(0x123),'category':_0x3e7708}}]));break;case'rm':if(_0x6a6d2d==_0x4af6e3(0xa2))_0x5bfe2c=await product['aggregate']([{'$match':{'product_category':_0x4af6e3(0x107),'brand':_0x3e7708}}]);else _0x6a6d2d==_0x4af6e3(0x120)&&(_0x5bfe2c=await product[_0x4af6e3(0xbf)]([{'$match':{'product_category':_0x4af6e3(0x107),'category':_0x3e7708}}]));break;}_0x16efb5[_0x4af6e3(0xa5)]({'data':_0x5bfe2c});}catch(_0x4335f5){_0x16efb5[_0x4af6e3(0xa5)]({'message':_0x4335f5[_0x4af6e3(0x12c)]});}}),router['post']('/print_barcode_single/:id',auth,async(_0x46c433,_0x254fca)=>{const _0x3c449e=a0_0x1b8e60;try{const _0x293766=_0x46c433[_0x3c449e(0x11f)]['id'],{copies:_0x289321,typeofbarcode:_0x58f6b7}=_0x46c433[_0x3c449e(0xdc)];var _0x1e318a=await product[_0x3c449e(0x128)](_0x293766);const _0x569253=_0x12bd1e=>_0x12bd1e*0x48,_0x37fb59={'width':0x3,'height':0x1},_0x2ce56c=new PDFDocument({'margin':_0x569253(0.75),'size':[_0x569253(_0x37fb59['width']),_0x569253(_0x37fb59['height'])],'bufferPages':!![]}),_0x14c7c3=_0x289321,_0x2b4458=_0x1e318a[_0x3c449e(0xd7)],_0x217358=_0x1e318a[_0x3c449e(0x131)],_0x4af6b6=_0x1e318a[_0x3c449e(0xa6)],_0x26b799=_0x1e318a[_0x3c449e(0x11e)];let _0x3d459b;switch(_0x58f6b7){case'1':_0x3d459b=_0x217358;break;case'2':_0x3d459b=_0x4af6b6;break;case'3':_0x3d459b=_0x26b799;break;}const _0x2fcc5f={'width':0xd2,'height':0x64},_0x4d274f={'width':_0x569253(_0x37fb59[_0x3c449e(0x121)]),'height':_0x569253(_0x37fb59['height'])};for(let _0x1fc44a=0x1;_0x1fc44a<=_0x14c7c3;_0x1fc44a++){const _0x49b17e=new Canvas();JsBarcode(_0x49b17e,_0x3d459b,{'format':_0x3c449e(0x109),'height':_0x2fcc5f[_0x3c449e(0x118)],'displayValue':!![],'text':_0x3d459b});const _0xa90c2=_0x49b17e[_0x3c449e(0xf5)](),_0x1788d3=_0x4d274f[_0x3c449e(0x121)]/_0x2fcc5f['width'],_0xa545fb=_0x4d274f[_0x3c449e(0x118)]/_0x2fcc5f['height'],_0x53db8f=Math[_0x3c449e(0x82)](_0x1788d3,_0xa545fb),_0x1d9f22=_0x2fcc5f[_0x3c449e(0x121)]*_0x53db8f,_0x187300=_0x2fcc5f[_0x3c449e(0x118)]*_0x53db8f,_0x4d0c14=(_0x4d274f[_0x3c449e(0x121)]-_0x1d9f22)/0x2,_0x5c7e97=(_0x4d274f['height']-_0x187300)/0x2;_0x2ce56c[_0x3c449e(0xf3)](_0xa90c2,_0x4d0c14,_0x5c7e97,{'width':_0x1d9f22,'height':_0x187300}),_0x1fc44a!=_0x14c7c3&&_0x2ce56c[_0x3c449e(0xff)]();}const _0x39e263=[];_0x2ce56c['on'](_0x3c449e(0x115),_0x39e263['push']['bind'](_0x39e263)),_0x2ce56c['on'](_0x3c449e(0x10a),()=>{const _0x1a335c=_0x3c449e,_0xaed709=Buffer[_0x1a335c(0xab)](_0x39e263),_0x578ec6=_0xaed709[_0x1a335c(0xb6)](_0x1a335c(0x101));_0x254fca[_0x1a335c(0xa5)]({'pdfContent':_0x578ec6});}),_0x2ce56c[_0x3c449e(0x10a)]();}catch(_0x5d41b7){_0x254fca[_0x3c449e(0xa5)]({'message':_0x5d41b7[_0x3c449e(0x12c)]});}}),module['exports']=router;