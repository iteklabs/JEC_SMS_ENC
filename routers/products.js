const a0_0x90895c=a0_0x54cb;(function(_0x47c7e3,_0x15e031){const _0x5850af=a0_0x54cb,_0x8f547c=_0x47c7e3();while(!![]){try{const _0x19dc25=-parseInt(_0x5850af(0x101))/0x1+parseInt(_0x5850af(0x9f))/0x2*(parseInt(_0x5850af(0xb1))/0x3)+-parseInt(_0x5850af(0xf3))/0x4+parseInt(_0x5850af(0xc6))/0x5*(parseInt(_0x5850af(0xb3))/0x6)+-parseInt(_0x5850af(0x11e))/0x7+-parseInt(_0x5850af(0x73))/0x8+parseInt(_0x5850af(0xc5))/0x9;if(_0x19dc25===_0x15e031)break;else _0x8f547c['push'](_0x8f547c['shift']());}catch(_0x274edf){_0x8f547c['push'](_0x8f547c['shift']());}}}(a0_0x14f1,0x3751d));const express=require(a0_0x90895c(0x10d)),res=require('express/lib/response'),app=express(),router=express[a0_0x90895c(0x11d)](),multer=require(a0_0x90895c(0xab)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x90895c(0xe7)),auth=require(a0_0x90895c(0xeb)),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require(a0_0x90895c(0x119)),JsBarcode=require(a0_0x90895c(0x6b)),{Canvas}=require(a0_0x90895c(0x11b)),PDFDocument=require(a0_0x90895c(0x8e));function a0_0x54cb(_0x5a86b8,_0x480db3){const _0x14f138=a0_0x14f1();return a0_0x54cb=function(_0x54cb8e,_0x58c725){_0x54cb8e=_0x54cb8e-0x64;let _0xf208ac=_0x14f138[_0x54cb8e];return _0xf208ac;},a0_0x54cb(_0x5a86b8,_0x480db3);}function a0_0x14f1(){const _0x314416=['edit\x20Product\x20master','Product_Code','Products\x20warehouse_data','aggregate','pdfkit-table','PSecondaryUnits','Arabic','English\x20(US)','toBuffer','Products_category','product_category','defaultProduct.avif','attachment;\x20filename=Product_Migration_File.xlsx','min','Primary_Code','single','json','addWorksheet','products','stock','type_products','6Cgbriz','/select_data','redirect','/view/add_products','Category','bind','file','Hindi','\x20unit\x20is\x20add\x20successfully','then','product_barcode','categories','multer','product\x20edit','originalname','Products','utils','/products_import_migrate_file','158757QvYvCh','end','199974WsvIfV','log','migrate_product_fule','name','/print_barcode_filter/','body','/products/categories','/print_barcode_single/:id','now','MaxperUnits','/view','secondary_code','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Arabic\x20(ae)','brands','master','prod_categ','Brands','8241732oHtnNr','50oaQZzH','ProductCode','params','$product_details.product_stock','primary_code','setHeader','\x20<>\x20','length','base64','PAlQty','toString','findById','/products/units','product\x20update\x20successfully','_id','email','\x20categories\x20is\x20add\x20successfully','units','barcode\x20Product\x20master','find','save','Content-Type','success','sku','categories\x20data\x20delete\x20successfully','product\x20add\x20successfully','category','/print_barcode','/products_export_migrate_file','Prod_Cat','/categories/delete/:id','edit_product','$_id','../models/all_models','$category','alertquantity','diskStorage','../middleware/auth','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/brands/:id','public/upload','Spanish','PName','/products/view','Sheets','1087852dDGvdB','Chinese','post','columns','German','findByIdAndDelete','errors','/categories/:id','send','push','status','CODE128','$product_details','brand\x20data\x20update\x20successfully','278463msgdNw','public/Migration','Enabled','$product_name','forEach','Alert_QTY','Secondary_Code','warehouse','flash','max_number_per_units','findByIdAndUpdate','product_code','express','image','Workbook','filename','maxStocks','/products/brands','findOne','/barcode_data','Products\x20master','brand','Units','Raw\x20Materials','xlsx','/units/:id','canvas','French','Router','2346134HIFCzT','user','English','Product_Name','Portuguese','language','Secondary_Units','PCat','$product_docs','/brands','Products\x20find_data','data','Maximum_Stocks','unit','jsbarcode','/units','numeric','categ','unit\x20data\x20update\x20successfully','public/Migration/','maxProdPerUnit','render','2364944ysKTrN','unit\x20data\x20delete\x20successfully','$product_details.product_name','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Finished\x20Goods','categories_edit','height','width','concat','Portuguese\x20(BR)','addPage','/units/delete/:id','get','$product_category','/filter_product','\x20Edit\x20Successfully','write','/barcode_filter','$brand','product_docs','message','product_stock','secondary_unit'];a0_0x14f1=function(){return _0x314416;};return a0_0x14f1();}router[a0_0x90895c(0x7f)]('/categories',auth,async(_0x2e2177,_0x270a76)=>{const _0x19d2e3=a0_0x90895c;try{const {username:_0x240641,email:_0x2b7c6a,role:_0x45f18e}=_0x2e2177[_0x19d2e3(0x11f)],_0x49108c=_0x2e2177[_0x19d2e3(0x11f)],_0x4aa97f=await profile[_0x19d2e3(0x113)]({'email':_0x49108c['email']}),_0xffe042=await master_shop[_0x19d2e3(0xd9)]();console['log'](_0x19d2e3(0xc2),_0xffe042);const _0x47a421=await categories[_0x19d2e3(0xd9)]();if(_0xffe042[0x0][_0x19d2e3(0x123)]==_0x19d2e3(0x91))var _0x4c2f3b=users['English'];else{if(_0xffe042[0x0][_0x19d2e3(0x123)]=='Hindi')var _0x4c2f3b=users['Hindi'];else{if(_0xffe042[0x0][_0x19d2e3(0x123)]==_0x19d2e3(0xf7))var _0x4c2f3b=users[_0x19d2e3(0xf7)];else{if(_0xffe042[0x0][_0x19d2e3(0x123)]==_0x19d2e3(0xef))var _0x4c2f3b=users[_0x19d2e3(0xef)];else{if(_0xffe042[0x0][_0x19d2e3(0x123)]==_0x19d2e3(0x11c))var _0x4c2f3b=users[_0x19d2e3(0x11c)];else{if(_0xffe042[0x0][_0x19d2e3(0x123)]==_0x19d2e3(0x7c))var _0x4c2f3b=users[_0x19d2e3(0x122)];else{if(_0xffe042[0x0]['language']==_0x19d2e3(0xf4))var _0x4c2f3b=users[_0x19d2e3(0xf4)];else{if(_0xffe042[0x0][_0x19d2e3(0x123)]==_0x19d2e3(0xc0))var _0x4c2f3b=users[_0x19d2e3(0x90)];}}}}}}}_0x270a76['render'](_0x19d2e3(0xaa),{'success':_0x2e2177[_0x19d2e3(0x109)](_0x19d2e3(0xdc)),'errors':_0x2e2177[_0x19d2e3(0x109)](_0x19d2e3(0xf9)),'role':_0x49108c,'profile':_0x4aa97f,'user':_0x47a421,'master_shop':_0xffe042,'language':_0x4c2f3b});}catch(_0x3125f6){console[_0x19d2e3(0xb4)](_0x3125f6);}}),router[a0_0x90895c(0xf5)]('/categories',auth,async(_0x3a3bd1,_0x73e210)=>{const _0x57f6e2=a0_0x90895c;try{const {name:_0x3cde46,products:_0x524e2f}=_0x3a3bd1[_0x57f6e2(0xb8)],_0x58416f=new categories({'name':_0x3cde46,'products':_0x524e2f}),_0x442419=await categories[_0x57f6e2(0x113)]({'name':_0x3cde46});_0x442419?_0x3a3bd1['flash'](_0x57f6e2(0xf9),_0x3cde46+_0x57f6e2(0x76)):_0x3a3bd1[_0x57f6e2(0x109)]('success',_0x3cde46+_0x57f6e2(0xd6));const _0x24ec16=await _0x58416f[_0x57f6e2(0xda)]();_0x73e210[_0x57f6e2(0xa1)](_0x57f6e2(0xb9));}catch(_0x9b0d18){console[_0x57f6e2(0xb4)](_0x9b0d18);}}),router[a0_0x90895c(0x7f)](a0_0x90895c(0xfa),auth,async(_0x20e179,_0x9070f1)=>{const _0x78348c=a0_0x90895c;try{const {username:_0x3fe673,email:_0x31e4a1,role:_0x2b1c38}=_0x20e179[_0x78348c(0x11f)],_0x49b3cd=_0x20e179[_0x78348c(0x11f)],_0x1c1b5c=await profile[_0x78348c(0x113)]({'email':_0x49b3cd['email']}),_0x4a9fc0=await master_shop[_0x78348c(0xd9)]();console[_0x78348c(0xb4)]('master',_0x4a9fc0);const _0x492f95=_0x20e179[_0x78348c(0xc8)]['id'];console[_0x78348c(0xb4)](_0x492f95);const _0x23f012=await categories[_0x78348c(0xd1)](_0x492f95);if(_0x4a9fc0[0x0][_0x78348c(0x123)]=='English\x20(US)')var _0x2f6f5c=users['English'];else{if(_0x4a9fc0[0x0]['language']=='Hindi')var _0x2f6f5c=users[_0x78348c(0xa6)];else{if(_0x4a9fc0[0x0][_0x78348c(0x123)]=='German')var _0x2f6f5c=users[_0x78348c(0xf7)];else{if(_0x4a9fc0[0x0][_0x78348c(0x123)]==_0x78348c(0xef))var _0x2f6f5c=users['Spanish'];else{if(_0x4a9fc0[0x0][_0x78348c(0x123)]==_0x78348c(0x11c))var _0x2f6f5c=users[_0x78348c(0x11c)];else{if(_0x4a9fc0[0x0][_0x78348c(0x123)]==_0x78348c(0x7c))var _0x2f6f5c=users['Portuguese'];else{if(_0x4a9fc0[0x0]['language']==_0x78348c(0xf4))var _0x2f6f5c=users[_0x78348c(0xf4)];else{if(_0x4a9fc0[0x0][_0x78348c(0x123)]==_0x78348c(0xc0))var _0x2f6f5c=users[_0x78348c(0x90)];}}}}}}}_0x9070f1[_0x78348c(0x72)]('categories',{'success':_0x20e179[_0x78348c(0x109)](_0x78348c(0xdc)),'errors':_0x20e179[_0x78348c(0x109)](_0x78348c(0xf9)),'role':_0x49b3cd,'profile':_0x1c1b5c,'master_shop':_0x4a9fc0,'user':_0x23f012,'language':_0x2f6f5c});}catch(_0x400294){console[_0x78348c(0xb4)](_0x400294);}}),router[a0_0x90895c(0xf5)](a0_0x90895c(0xfa),auth,async(_0x27151a,_0x29e4be)=>{const _0x29bcdb=a0_0x90895c;try{const _0x40e583=_0x27151a[_0x29bcdb(0xc8)]['id'],_0x4d5064=await categories[_0x29bcdb(0x10b)](_0x40e583,_0x27151a['body']);_0x27151a[_0x29bcdb(0x109)](_0x29bcdb(0xdc),''+users[_0x29bcdb(0x78)]),_0x29e4be['redirect'](_0x29bcdb(0xb9));}catch(_0x538188){console[_0x29bcdb(0xb4)](_0x538188);}}),router[a0_0x90895c(0x7f)](a0_0x90895c(0xe4),auth,async(_0x2296d2,_0x494d30)=>{const _0x4aebf2=a0_0x90895c;try{const _0x43f4ff=_0x2296d2[_0x4aebf2(0xc8)]['id'],_0x43c29d=await categories[_0x4aebf2(0xf8)](_0x43f4ff);_0x2296d2['flash'](_0x4aebf2(0xdc),_0x4aebf2(0xde)),_0x494d30[_0x4aebf2(0xa1)](_0x4aebf2(0xb9));}catch(_0x6b3502){console[_0x4aebf2(0xb4)](_0x6b3502);}}),router[a0_0x90895c(0x7f)](a0_0x90895c(0x66),auth,async(_0x2efd1c,_0x2f9d95)=>{const _0x4ca051=a0_0x90895c;try{const {username:_0x3e6973,email:_0x1d725d,role:_0x1fc560}=_0x2efd1c[_0x4ca051(0x11f)],_0x45736c=_0x2efd1c['user'],_0x180b86=await profile[_0x4ca051(0x113)]({'email':_0x45736c[_0x4ca051(0xd5)]}),_0x3849c6=await master_shop[_0x4ca051(0xd9)]();console[_0x4ca051(0xb4)](_0x4ca051(0xc2),_0x3849c6);const _0x259b57=await brands[_0x4ca051(0xd9)]();if(_0x3849c6[0x0]['language']==_0x4ca051(0x91))var _0x5da2c2=users[_0x4ca051(0x120)];else{if(_0x3849c6[0x0][_0x4ca051(0x123)]==_0x4ca051(0xa6))var _0x5da2c2=users[_0x4ca051(0xa6)];else{if(_0x3849c6[0x0][_0x4ca051(0x123)]==_0x4ca051(0xf7))var _0x5da2c2=users[_0x4ca051(0xf7)];else{if(_0x3849c6[0x0][_0x4ca051(0x123)]=='Spanish')var _0x5da2c2=users[_0x4ca051(0xef)];else{if(_0x3849c6[0x0][_0x4ca051(0x123)]==_0x4ca051(0x11c))var _0x5da2c2=users[_0x4ca051(0x11c)];else{if(_0x3849c6[0x0][_0x4ca051(0x123)]==_0x4ca051(0x7c))var _0x5da2c2=users['Portuguese'];else{if(_0x3849c6[0x0][_0x4ca051(0x123)]=='Chinese')var _0x5da2c2=users[_0x4ca051(0xf4)];else{if(_0x3849c6[0x0][_0x4ca051(0x123)]==_0x4ca051(0xc0))var _0x5da2c2=users[_0x4ca051(0x90)];}}}}}}}_0x2f9d95['render'](_0x4ca051(0xc1),{'success':_0x2efd1c[_0x4ca051(0x109)](_0x4ca051(0xdc)),'errors':_0x2efd1c['flash'](_0x4ca051(0xf9)),'role':_0x45736c,'profile':_0x180b86,'master_shop':_0x3849c6,'user':_0x259b57,'language':_0x5da2c2});}catch(_0x24c3e3){console[_0x4ca051(0xb4)](_0x24c3e3);}}),router['post'](a0_0x90895c(0x66),auth,async(_0x4e463b,_0x355494)=>{const _0x3eda34=a0_0x90895c;try{const {name:_0xe51468,products:_0x392f49}=_0x4e463b[_0x3eda34(0xb8)],_0x4d0c4a=new brands({'name':_0xe51468,'products':_0x392f49}),_0xabb1e7=await brands['findOne']({'name':_0xe51468});_0xabb1e7?_0x4e463b[_0x3eda34(0x109)](_0x3eda34(0xf9),_0xe51468+_0x3eda34(0xbf)):_0x4e463b[_0x3eda34(0x109)](_0x3eda34(0xdc),_0xe51468+'\x20brand\x20is\x20add\x20successfully');const _0x5a1623=await _0x4d0c4a[_0x3eda34(0xda)]();_0x355494[_0x3eda34(0xa1)](_0x3eda34(0x112));}catch(_0x20e95e){console['log'](_0x20e95e);}}),router[a0_0x90895c(0x7f)](a0_0x90895c(0xed),auth,async(_0x5544c3,_0x41bdc9)=>{const _0x3ab908=a0_0x90895c;try{const {username:_0x1f22e5,email:_0x1b67f6,role:_0xb74ae7}=_0x5544c3[_0x3ab908(0x11f)],_0x412e4f=_0x5544c3[_0x3ab908(0x11f)],_0x273ffd=await profile[_0x3ab908(0x113)]({'email':_0x412e4f[_0x3ab908(0xd5)]}),_0x17d72a=await master_shop['find']();console[_0x3ab908(0xb4)](_0x3ab908(0xc2),_0x17d72a);const _0x2dc0e2=_0x5544c3['params']['id'];console[_0x3ab908(0xb4)](_0x2dc0e2);const _0x1a44ab=await brands['findById'](_0x2dc0e2);if(_0x17d72a[0x0][_0x3ab908(0x123)]==_0x3ab908(0x91))var _0x2ab6e6=users['English'];else{if(_0x17d72a[0x0][_0x3ab908(0x123)]==_0x3ab908(0xa6))var _0x2ab6e6=users[_0x3ab908(0xa6)];else{if(_0x17d72a[0x0][_0x3ab908(0x123)]==_0x3ab908(0xf7))var _0x2ab6e6=users[_0x3ab908(0xf7)];else{if(_0x17d72a[0x0][_0x3ab908(0x123)]==_0x3ab908(0xef))var _0x2ab6e6=users['Spanish'];else{if(_0x17d72a[0x0][_0x3ab908(0x123)]==_0x3ab908(0x11c))var _0x2ab6e6=users[_0x3ab908(0x11c)];else{if(_0x17d72a[0x0]['language']==_0x3ab908(0x7c))var _0x2ab6e6=users[_0x3ab908(0x122)];else{if(_0x17d72a[0x0][_0x3ab908(0x123)]==_0x3ab908(0xf4))var _0x2ab6e6=users[_0x3ab908(0xf4)];else{if(_0x17d72a[0x0][_0x3ab908(0x123)]==_0x3ab908(0xc0))var _0x2ab6e6=users['Arabic'];}}}}}}}_0x41bdc9[_0x3ab908(0x72)](_0x3ab908(0xc1),{'success':_0x5544c3[_0x3ab908(0x109)](_0x3ab908(0xdc)),'errors':_0x5544c3[_0x3ab908(0x109)](_0x3ab908(0xf9)),'role':_0x412e4f,'profile':_0x273ffd,'master_shop':_0x17d72a,'user':_0x1a44ab,'language':_0x2ab6e6});}catch(_0x4922f3){console[_0x3ab908(0xb4)](_0x4922f3);}}),router[a0_0x90895c(0xf5)](a0_0x90895c(0xed),auth,async(_0x234bde,_0x5ae415)=>{const _0x54d7fa=a0_0x90895c;try{const _0x3f5999=_0x234bde[_0x54d7fa(0xc8)]['id'],_0x5c7fe4=await brands['findByIdAndUpdate'](_0x3f5999,_0x234bde[_0x54d7fa(0xb8)]);_0x234bde[_0x54d7fa(0x109)]('success',_0x54d7fa(0x100)),_0x5ae415['redirect'](_0x54d7fa(0x112));}catch(_0x46bd67){console[_0x54d7fa(0xb4)](_0x46bd67);}}),router[a0_0x90895c(0x7f)]('/brands/delete/:id',auth,async(_0x5c5b7d,_0x489709)=>{const _0x307a21=a0_0x90895c;try{const _0xc9e22f=_0x5c5b7d[_0x307a21(0xc8)]['id'],_0x554ddb=await brands[_0x307a21(0xf8)](_0xc9e22f);_0x5c5b7d[_0x307a21(0x109)](_0x307a21(0xdc),'brand\x20data\x20delete\x20successfully'),_0x489709['redirect']('/products/brands');}catch(_0x59eae4){console[_0x307a21(0xb4)](_0x59eae4);}}),router[a0_0x90895c(0x7f)](a0_0x90895c(0x6c),auth,async(_0x5d9446,_0x197f1d)=>{const _0x11baa8=a0_0x90895c;try{const {username:_0x193da3,email:_0x1bc272,role:_0x2613d2}=_0x5d9446[_0x11baa8(0x11f)],_0x35e2fa=_0x5d9446[_0x11baa8(0x11f)],_0x1b93ef=await profile[_0x11baa8(0x113)]({'email':_0x35e2fa[_0x11baa8(0xd5)]}),_0xd35df4=await master_shop[_0x11baa8(0xd9)]();console[_0x11baa8(0xb4)](_0x11baa8(0xc2),_0xd35df4);const _0x16b921=await units[_0x11baa8(0xd9)]();if(_0xd35df4[0x0][_0x11baa8(0x123)]==_0x11baa8(0x91))var _0x5d4125=users[_0x11baa8(0x120)];else{if(_0xd35df4[0x0]['language']=='Hindi')var _0x5d4125=users[_0x11baa8(0xa6)];else{if(_0xd35df4[0x0][_0x11baa8(0x123)]==_0x11baa8(0xf7))var _0x5d4125=users[_0x11baa8(0xf7)];else{if(_0xd35df4[0x0]['language']=='Spanish')var _0x5d4125=users['Spanish'];else{if(_0xd35df4[0x0][_0x11baa8(0x123)]==_0x11baa8(0x11c))var _0x5d4125=users['French'];else{if(_0xd35df4[0x0][_0x11baa8(0x123)]==_0x11baa8(0x7c))var _0x5d4125=users['Portuguese'];else{if(_0xd35df4[0x0]['language']=='Chinese')var _0x5d4125=users[_0x11baa8(0xf4)];else{if(_0xd35df4[0x0][_0x11baa8(0x123)]==_0x11baa8(0xc0))var _0x5d4125=users['Arabic'];}}}}}}}_0x197f1d['render'](_0x11baa8(0xd7),{'success':_0x5d9446[_0x11baa8(0x109)](_0x11baa8(0xdc)),'errors':_0x5d9446[_0x11baa8(0x109)](_0x11baa8(0xf9)),'role':_0x35e2fa,'profile':_0x1b93ef,'master_shop':_0xd35df4,'user':_0x16b921,'language':_0x5d4125});}catch(_0x5e5d6b){console['log'](_0x5e5d6b);}}),router[a0_0x90895c(0xf5)](a0_0x90895c(0x6c),auth,async(_0x473ed2,_0x2e8250)=>{const _0x3fb1b2=a0_0x90895c;try{const {name:_0x1421f1,secondary_unit:_0x1e6624,products:_0x574f8f}=_0x473ed2[_0x3fb1b2(0xb8)],_0x961450=new units({'name':_0x1421f1,'secondary_unit':_0x1e6624,'products':_0x574f8f}),_0x5e706c=await units['findOne']({'name':_0x1421f1});_0x5e706c?_0x473ed2['flash'](_0x3fb1b2(0xf9),_0x1421f1+_0x3fb1b2(0xec)):_0x473ed2[_0x3fb1b2(0x109)](_0x3fb1b2(0xdc),_0x1421f1+_0x3fb1b2(0xa7));const _0xc85189=await _0x961450[_0x3fb1b2(0xda)]();_0x2e8250[_0x3fb1b2(0xa1)](_0x3fb1b2(0xd2));}catch(_0x1c2a92){console[_0x3fb1b2(0xb4)](_0x1c2a92);}}),router[a0_0x90895c(0x7f)](a0_0x90895c(0x11a),auth,async(_0x59b913,_0x4a8ca0)=>{const _0x4a1405=a0_0x90895c;try{const {username:_0x8fe70,email:_0x2f53db,role:_0x259631}=_0x59b913[_0x4a1405(0x11f)],_0x150cb1=_0x59b913[_0x4a1405(0x11f)],_0x37f84a=await profile[_0x4a1405(0x113)]({'email':_0x150cb1[_0x4a1405(0xd5)]}),_0x90f6ee=await master_shop[_0x4a1405(0xd9)]();console['log'](_0x4a1405(0xc2),_0x90f6ee);const _0x5afb08=_0x59b913[_0x4a1405(0xc8)]['id'],_0x13ceee=await units[_0x4a1405(0xd1)](_0x5afb08);if(_0x90f6ee[0x0][_0x4a1405(0x123)]==_0x4a1405(0x91))var _0x5b2e52=users[_0x4a1405(0x120)];else{if(_0x90f6ee[0x0]['language']==_0x4a1405(0xa6))var _0x5b2e52=users[_0x4a1405(0xa6)];else{if(_0x90f6ee[0x0][_0x4a1405(0x123)]=='German')var _0x5b2e52=users[_0x4a1405(0xf7)];else{if(_0x90f6ee[0x0][_0x4a1405(0x123)]==_0x4a1405(0xef))var _0x5b2e52=users[_0x4a1405(0xef)];else{if(_0x90f6ee[0x0][_0x4a1405(0x123)]==_0x4a1405(0x11c))var _0x5b2e52=users['French'];else{if(_0x90f6ee[0x0][_0x4a1405(0x123)]==_0x4a1405(0x7c))var _0x5b2e52=users['Portuguese'];else{if(_0x90f6ee[0x0][_0x4a1405(0x123)]=='Chinese')var _0x5b2e52=users[_0x4a1405(0xf4)];else{if(_0x90f6ee[0x0][_0x4a1405(0x123)]==_0x4a1405(0xc0))var _0x5b2e52=users[_0x4a1405(0x90)];}}}}}}}_0x4a8ca0['render'](_0x4a1405(0xd7),{'success':_0x59b913[_0x4a1405(0x109)](_0x4a1405(0xdc)),'errors':_0x59b913[_0x4a1405(0x109)](_0x4a1405(0xf9)),'role':_0x150cb1,'profile':_0x37f84a,'master_shop':_0x90f6ee,'user':_0x13ceee,'language':_0x5b2e52});}catch(_0x356148){console[_0x4a1405(0xb4)](_0x356148);}}),router[a0_0x90895c(0xf5)](a0_0x90895c(0x11a),auth,async(_0x382ef8,_0x2da821)=>{const _0x3800f7=a0_0x90895c;try{const _0x5c6ca1=_0x382ef8[_0x3800f7(0xc8)]['id'],_0x34b5aa=await units['findByIdAndUpdate'](_0x5c6ca1,_0x382ef8['body']);_0x382ef8[_0x3800f7(0x109)]('success',_0x3800f7(0x6f)),_0x2da821[_0x3800f7(0xa1)](_0x3800f7(0xd2));}catch(_0x22774e){console[_0x3800f7(0xb4)](_0x22774e);}}),router[a0_0x90895c(0x7f)](a0_0x90895c(0x7e),auth,async(_0x25c298,_0x2d6225)=>{const _0x34d681=a0_0x90895c;try{const _0x12c41f=_0x25c298[_0x34d681(0xc8)]['id'],_0x294276=await units['findByIdAndDelete'](_0x12c41f);_0x25c298[_0x34d681(0x109)]('success',_0x34d681(0x74)),_0x2d6225[_0x34d681(0xa1)]('/products/units');}catch(_0x34a39c){console[_0x34d681(0xb4)](_0x34a39c);}});const storage=multer[a0_0x90895c(0xea)]({'destination':(_0x54dd50,_0xd172e7,_0x168426)=>{const _0x57c326=a0_0x90895c;_0x168426(null,_0x57c326(0xee));},'filename':(_0x489927,_0x552837,_0x5ba53b)=>{const _0x1ba8d1=a0_0x90895c;_0x5ba53b(null,Date[_0x1ba8d1(0xbb)]()+_0x552837[_0x1ba8d1(0xad)]);}}),upload=multer({'storage':storage});router[a0_0x90895c(0x7f)](a0_0x90895c(0xbd),auth,async(_0x15a5ad,_0xfe5047)=>{const _0x342d03=a0_0x90895c;try{const {username:_0x2598a9,email:_0x45d21e,role:_0xc9381a}=_0x15a5ad[_0x342d03(0x11f)],_0x46640b=_0x15a5ad[_0x342d03(0x11f)],_0x5e5c56=await profile[_0x342d03(0x113)]({'email':_0x46640b[_0x342d03(0xd5)]}),_0x24fa31={'year':_0x342d03(0x6d),'month':'long','day':_0x342d03(0x6d)},_0x5425fa=await master_shop[_0x342d03(0xd9)]();console[_0x342d03(0xb4)](_0x342d03(0x115),_0x5425fa);const _0xf232ca=await product[_0x342d03(0xd9)]();console[_0x342d03(0xb4)](_0x342d03(0x67),_0xf232ca);const _0x35548d=await warehouse[_0x342d03(0x8d)]([{'$unwind':_0x342d03(0xff)},{'$lookup':{'from':_0x342d03(0x9c),'localField':'product_details.product_name','foreignField':'name','as':_0x342d03(0x86)}},{'$unwind':_0x342d03(0x65)},{'$project':{'product_name':_0x342d03(0x75),'product_stock':_0x342d03(0xc9)}},{'$group':{'_id':_0x342d03(0x104),'product_stock':{'$sum':'$product_stock'}}}]);console[_0x342d03(0xb4)](_0x342d03(0x8c),_0x35548d),_0x35548d[_0x342d03(0x105)](_0x54867f=>{const _0x7c63fd=_0xf232ca['map'](_0xa150db=>{const _0x27f010=a0_0x54cb;_0xa150db[_0x27f010(0xb6)]==_0x54867f[_0x27f010(0xd4)]&&(_0xa150db['stock']=parseInt(_0xa150db[_0x27f010(0x9d)])+parseInt(_0x54867f[_0x27f010(0x88)]));});}),console[_0x342d03(0xb4)](_0x342d03(0x67),_0xf232ca);if(_0x5425fa[0x0][_0x342d03(0x123)]==_0x342d03(0x91))var _0x44587f=users[_0x342d03(0x120)];else{if(_0x5425fa[0x0]['language']==_0x342d03(0xa6))var _0x44587f=users[_0x342d03(0xa6)];else{if(_0x5425fa[0x0][_0x342d03(0x123)]==_0x342d03(0xf7))var _0x44587f=users[_0x342d03(0xf7)];else{if(_0x5425fa[0x0][_0x342d03(0x123)]==_0x342d03(0xef))var _0x44587f=users[_0x342d03(0xef)];else{if(_0x5425fa[0x0][_0x342d03(0x123)]==_0x342d03(0x11c))var _0x44587f=users[_0x342d03(0x11c)];else{if(_0x5425fa[0x0]['language']==_0x342d03(0x7c))var _0x44587f=users[_0x342d03(0x122)];else{if(_0x5425fa[0x0]['language']==_0x342d03(0xf4))var _0x44587f=users[_0x342d03(0xf4)];else{if(_0x5425fa[0x0][_0x342d03(0x123)]==_0x342d03(0xc0))var _0x44587f=users[_0x342d03(0x90)];}}}}}}}_0xfe5047[_0x342d03(0x72)](_0x342d03(0x9c),{'success':_0x15a5ad['flash'](_0x342d03(0xdc)),'errors':_0x15a5ad[_0x342d03(0x109)]('errors'),'alldata':_0xf232ca,'profile':_0x5e5c56,'master_shop':_0x5425fa,'role':_0x46640b,'product_stock':_0x35548d,'language':_0x44587f});}catch(_0x56e049){console[_0x342d03(0xb4)](_0x56e049);}}),router['get'](a0_0x90895c(0xa2),auth,async(_0x196899,_0x1c1d76)=>{const _0x1ed666=a0_0x90895c;try{const {username:_0x56e360,email:_0x574f1f,role:_0x48b689}=_0x196899[_0x1ed666(0x11f)],_0x4d1eef=_0x196899[_0x1ed666(0x11f)],_0x51a66c=await profile['findOne']({'email':_0x4d1eef[_0x1ed666(0xd5)]}),_0xa2206=await master_shop[_0x1ed666(0xd9)]();console[_0x1ed666(0xb4)](_0x1ed666(0xc2),_0xa2206);const _0xe84320=await categories[_0x1ed666(0xd9)]({}),_0x424ab4=await brands[_0x1ed666(0xd9)]({}),_0x4cda4e=await units[_0x1ed666(0xd9)]({}),_0x452243=await warehouse[_0x1ed666(0xd9)]({'status':_0x1ed666(0x103)});if(_0xa2206[0x0]['language']==_0x1ed666(0x91))var _0x23704c=users[_0x1ed666(0x120)];else{if(_0xa2206[0x0][_0x1ed666(0x123)]=='Hindi')var _0x23704c=users['Hindi'];else{if(_0xa2206[0x0][_0x1ed666(0x123)]=='German')var _0x23704c=users['German'];else{if(_0xa2206[0x0][_0x1ed666(0x123)]=='Spanish')var _0x23704c=users[_0x1ed666(0xef)];else{if(_0xa2206[0x0]['language']=='French')var _0x23704c=users[_0x1ed666(0x11c)];else{if(_0xa2206[0x0][_0x1ed666(0x123)]==_0x1ed666(0x7c))var _0x23704c=users['Portuguese'];else{if(_0xa2206[0x0][_0x1ed666(0x123)]==_0x1ed666(0xf4))var _0x23704c=users['Chinese'];else{if(_0xa2206[0x0][_0x1ed666(0x123)]=='Arabic\x20(ae)')var _0x23704c=users[_0x1ed666(0x90)];}}}}}}}_0x1c1d76[_0x1ed666(0x72)]('add_product',{'success':_0x196899[_0x1ed666(0x109)](_0x1ed666(0xdc)),'errors':_0x196899['flash']('errors'),'role':_0x4d1eef,'profile':_0x51a66c,'categories':_0xe84320,'brands':_0x424ab4,'master_shop':_0xa2206,'units':_0x4cda4e,'language':_0x23704c,'find_data':_0x452243});}catch(_0x33d545){console[_0x1ed666(0xb4)](_0x33d545);}}),router[a0_0x90895c(0xf5)](a0_0x90895c(0xa2),auth,upload[a0_0x90895c(0x99)]('image'),async(_0x38866e,_0x42f173)=>{const _0x5048cc=a0_0x90895c;try{const {name:_0x79aab,category:_0x3356f9,brand:_0x37f02d,unit:_0x19d821,alertquantity:_0x496e8e,stock:_0x49c53a,product_code:_0x340414,warehouse:_0x271f7b,primary_ItemCode:_0x3f18e3,second_ItemCode:_0x4808b5,second_unit:_0x309f2d,maxPerUnit:_0x3babd4,MaxPerProduct:_0xc3d87c,sales_cat:_0x29ce02,type_prod:_0x597209}=_0x38866e[_0x5048cc(0xb8)],_0x39723b=_0x38866e[_0x5048cc(0xa5)]?.[_0x5048cc(0x110)]||_0x5048cc(0x95),_0x1b175b=new product({'image':_0x39723b,'name':_0x79aab,'category':_0x3356f9,'brand':_0x37f02d,'unit':_0x19d821,'alertquantity':_0x496e8e,'stock':_0x49c53a,'product_code':_0x340414,'warehouse':_0x271f7b,'primary_code':_0x3f18e3,'secondary_code':_0x4808b5,'second_unit':_0x309f2d,'maxStocks':_0xc3d87c,'maxProdPerUnit':_0x3babd4,'sales_category':_0x29ce02,'type_products':_0x597209}),_0x364209=await _0x1b175b[_0x5048cc(0xda)](),_0x5879dc=await categories[_0x5048cc(0x113)]({'name':_0x3356f9});_0x5879dc[_0x5048cc(0x9c)]=parseInt(_0x5879dc[_0x5048cc(0x9c)])+0x1,await _0x5879dc[_0x5048cc(0xda)]();const _0x5475ca=await brands['findOne']({'name':_0x37f02d});_0x5475ca[_0x5048cc(0x9c)]=parseInt(_0x5475ca[_0x5048cc(0x9c)])+0x1,await _0x5475ca[_0x5048cc(0xda)]();const _0x580eda=await units[_0x5048cc(0x113)]({'name':_0x19d821});_0x580eda[_0x5048cc(0x9c)]=parseInt(_0x580eda[_0x5048cc(0x9c)])+0x1,await _0x580eda[_0x5048cc(0xda)](),_0x38866e[_0x5048cc(0x109)](_0x5048cc(0xdc),_0x5048cc(0xdf)),_0x42f173['redirect'](_0x5048cc(0xf1));}catch(_0x5311ff){console[_0x5048cc(0xb4)](_0x5311ff);}}),router[a0_0x90895c(0x7f)]('/view/:id',auth,async(_0x1925d3,_0xe5a52b)=>{const _0x3b4d63=a0_0x90895c;try{const {username:_0x49784d,email:_0x1e18f3,role:_0x17d9dd}=_0x1925d3[_0x3b4d63(0x11f)],_0x18a916=_0x1925d3[_0x3b4d63(0x11f)],_0x4fed23=await profile['findOne']({'email':_0x18a916[_0x3b4d63(0xd5)]}),_0x40672d=await master_shop[_0x3b4d63(0xd9)]();console['log'](_0x3b4d63(0x8a),_0x40672d);const _0x5a5d35=_0x1925d3['params']['id'],_0x2c8f38=await product['findById'](_0x5a5d35),_0x2069df=await categories[_0x3b4d63(0xd9)]({}),_0x37a1bd=await brands[_0x3b4d63(0xd9)]({}),_0x52bf0f=await units[_0x3b4d63(0xd9)]({}),_0x5e1e3f=await warehouse[_0x3b4d63(0xd9)]({'status':_0x3b4d63(0x103)}),_0x3b0d3c=await units[_0x3b4d63(0x8d)]([{'$group':{'_id':_0x3b4d63(0xe6),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x40672d[0x0][_0x3b4d63(0x123)]==_0x3b4d63(0x91))var _0x440685=users[_0x3b4d63(0x120)];else{if(_0x40672d[0x0][_0x3b4d63(0x123)]==_0x3b4d63(0xa6))var _0x440685=users[_0x3b4d63(0xa6)];else{if(_0x40672d[0x0]['language']==_0x3b4d63(0xf7))var _0x440685=users['German'];else{if(_0x40672d[0x0][_0x3b4d63(0x123)]==_0x3b4d63(0xef))var _0x440685=users[_0x3b4d63(0xef)];else{if(_0x40672d[0x0][_0x3b4d63(0x123)]==_0x3b4d63(0x11c))var _0x440685=users['French'];else{if(_0x40672d[0x0][_0x3b4d63(0x123)]==_0x3b4d63(0x7c))var _0x440685=users[_0x3b4d63(0x122)];else{if(_0x40672d[0x0][_0x3b4d63(0x123)]==_0x3b4d63(0xf4))var _0x440685=users[_0x3b4d63(0xf4)];else{if(_0x40672d[0x0]['language']=='Arabic\x20(ae)')var _0x440685=users[_0x3b4d63(0x90)];}}}}}}}_0xe5a52b[_0x3b4d63(0x72)](_0x3b4d63(0xe5),{'success':_0x1925d3['flash'](_0x3b4d63(0xdc)),'errors':_0x1925d3['flash'](_0x3b4d63(0xf9)),'role':_0x18a916,'profile':_0x4fed23,'alldata':_0x2c8f38,'categories':_0x2069df,'brands':_0x37a1bd,'master_shop':_0x40672d,'units':_0x52bf0f,'secondunit':_0x3b0d3c,'find_data':_0x5e1e3f,'language':_0x440685});}catch(_0xfc5634){console[_0x3b4d63(0xb4)](_0xfc5634);}}),router[a0_0x90895c(0xf5)]('/view/:id',auth,upload[a0_0x90895c(0x99)]('image'),async(_0x185c67,_0x2eee23)=>{const _0x9f3327=a0_0x90895c;try{const _0x387e87=_0x185c67[_0x9f3327(0xc8)]['id'],_0x25f400=await product[_0x9f3327(0xd1)](_0x387e87),{image:_0x58fbb0,name:_0x355351,category:_0x420b4f,brand:_0x296c7e,sku:_0x49fb52,unit:_0x3bb091,alertquantity:_0x4b809f,product_code:_0xa09d6e,warehouse:_0x1b5def,primary_ItemCode:_0x2bf877,second_ItemCode:_0x3b3ba5,second_unit:_0x950d75,maxPerUnit:_0x5b2c26,MaxPerProduct:_0x485c35,prod_catdata:_0x19d9aa,type_prod:_0x9f11ef,sales_cat:_0x29cf47}=_0x185c67[_0x9f3327(0xb8)];_0x185c67[_0x9f3327(0xa5)]&&(_0x25f400['image']=_0x185c67[_0x9f3327(0xa5)][_0x9f3327(0x110)]);_0x25f400[_0x9f3327(0xb6)]=_0x355351,_0x25f400['category']=_0x420b4f,_0x25f400[_0x9f3327(0x116)]=_0x296c7e,_0x25f400[_0x9f3327(0xdd)]=_0x49fb52,_0x25f400[_0x9f3327(0x6a)]=_0x3bb091,_0x25f400[_0x9f3327(0xe9)]=_0x4b809f,_0x25f400[_0x9f3327(0x10c)]=_0xa09d6e,_0x25f400[_0x9f3327(0x108)]=_0x1b5def,_0x25f400['primary_code']=_0x2bf877,_0x25f400[_0x9f3327(0xbe)]=_0x3b3ba5,_0x25f400[_0x9f3327(0x89)]=_0x950d75,_0x25f400[_0x9f3327(0x111)]=_0x485c35,_0x25f400[_0x9f3327(0x71)]=_0x5b2c26,_0x25f400['product_category']=_0x19d9aa,_0x25f400[_0x9f3327(0x9e)]=_0x9f11ef,_0x25f400['sales_category']=_0x29cf47;const _0x219158=await _0x25f400[_0x9f3327(0xda)]();console[_0x9f3327(0xb4)](_0x9f3327(0xac),_0x25f400),_0x185c67[_0x9f3327(0x109)](_0x9f3327(0xdc),_0x9f3327(0xd3)),_0x2eee23[_0x9f3327(0xa1)]('/products/view');}catch(_0x2e2b61){console['log'](_0x2e2b61);}}),router['get']('/barcode/:id',auth,async(_0x19ee60,_0x2bb638)=>{const _0x220a0a=a0_0x90895c;try{const {username:_0x21f106,email:_0x28ce59,role:_0x28a35}=_0x19ee60['user'],_0x2c7e37=_0x19ee60['user'],_0x5ada01=await profile['findOne']({'email':_0x2c7e37[_0x220a0a(0xd5)]}),_0x5cc222=await master_shop[_0x220a0a(0xd9)]();console[_0x220a0a(0xb4)](_0x220a0a(0xd8),_0x5cc222);const _0x5f4862=_0x19ee60[_0x220a0a(0xc8)]['id'],_0x29b99c=await product[_0x220a0a(0xd1)](_0x5f4862);console[_0x220a0a(0xb4)]('barcode\x20user_id',_0x29b99c);if(_0x5cc222[0x0][_0x220a0a(0x123)]==_0x220a0a(0x91))var _0x1fa903=users['English'];else{if(_0x5cc222[0x0][_0x220a0a(0x123)]=='Hindi')var _0x1fa903=users[_0x220a0a(0xa6)];else{if(_0x5cc222[0x0][_0x220a0a(0x123)]==_0x220a0a(0xf7))var _0x1fa903=users[_0x220a0a(0xf7)];else{if(_0x5cc222[0x0][_0x220a0a(0x123)]==_0x220a0a(0xef))var _0x1fa903=users[_0x220a0a(0xef)];else{if(_0x5cc222[0x0][_0x220a0a(0x123)]==_0x220a0a(0x11c))var _0x1fa903=users[_0x220a0a(0x11c)];else{if(_0x5cc222[0x0][_0x220a0a(0x123)]==_0x220a0a(0x7c))var _0x1fa903=users[_0x220a0a(0x122)];else{if(_0x5cc222[0x0]['language']==_0x220a0a(0xf4))var _0x1fa903=users[_0x220a0a(0xf4)];else{if(_0x5cc222[0x0][_0x220a0a(0x123)]==_0x220a0a(0xc0))var _0x1fa903=users[_0x220a0a(0x90)];}}}}}}}_0x2bb638[_0x220a0a(0x72)](_0x220a0a(0xa9),{'success':_0x19ee60['flash']('success'),'errors':_0x19ee60[_0x220a0a(0x109)]('errors'),'role':_0x2c7e37,'profile':_0x5ada01,'alldata':_0x29b99c,'master_shop':_0x5cc222,'language':_0x1fa903});}catch(_0x5168e7){console['log'](_0x5168e7);}}),router['get'](a0_0x90895c(0xe2),auth,async(_0x2d751d,_0x38ae34)=>{const _0x9dd5dd=a0_0x90895c;try{const _0x496b02=new excelJS[(_0x9dd5dd(0x10f))](),_0x2b6ae0=_0x496b02[_0x9dd5dd(0x9b)](_0x9dd5dd(0xae));return _0x2b6ae0[_0x9dd5dd(0xf6)]=[{'header':'Product_Name','key':_0x9dd5dd(0xf0),'width':0xa},{'header':_0x9dd5dd(0xc4),'key':'PBrands','width':0xa},{'header':'Units','key':'PUnits','width':0xa},{'header':_0x9dd5dd(0x124),'key':_0x9dd5dd(0x8f),'width':0xa},{'header':_0x9dd5dd(0x10a),'key':_0x9dd5dd(0xbc),'width':0xa},{'header':'Primary_Code','key':_0x9dd5dd(0xc7),'width':0xa},{'header':_0x9dd5dd(0x107),'key':_0x9dd5dd(0xc7),'width':0xa},{'header':_0x9dd5dd(0x8b),'key':'ProductCode','width':0xa},{'header':_0x9dd5dd(0xa3),'key':_0x9dd5dd(0x64),'width':0xa},{'header':'Alert_QTY','key':_0x9dd5dd(0xcf),'width':0xa},{'header':_0x9dd5dd(0x69),'key':_0x9dd5dd(0xcf),'width':0xa},{'header':'Products_category','key':_0x9dd5dd(0xe3),'width':0xa}],_0x38ae34[_0x9dd5dd(0xcb)](_0x9dd5dd(0xdb),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x38ae34[_0x9dd5dd(0xcb)]('Content-Disposition',_0x9dd5dd(0x96)),_0x496b02[_0x9dd5dd(0x119)][_0x9dd5dd(0x83)](_0x38ae34)[_0x9dd5dd(0xa8)](()=>{const _0x59fc7a=_0x9dd5dd;_0x38ae34[_0x59fc7a(0xfd)](0xc8);});}catch(_0x2c31b8){_0x38ae34[_0x9dd5dd(0xfd)](0x190)[_0x9dd5dd(0xfb)](_0x2c31b8);}});const storage1=multer[a0_0x90895c(0xea)]({'destination':(_0x7fef66,_0x32d2e8,_0x1f6275)=>{const _0x798cc9=a0_0x90895c;_0x1f6275(null,_0x798cc9(0x102));},'filename':(_0x5a29ae,_0x3bf648,_0x271dbe)=>{_0x271dbe(null,Date['now']()+_0x3bf648['originalname']);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x90895c(0xb0),auth,uploadMigrate[a0_0x90895c(0x99)](a0_0x90895c(0xb5)),async(_0x21c333,_0x2d1e82)=>{const _0x233e38=a0_0x90895c,_0x2080e0=_0x21c333[_0x233e38(0xa5)][_0x233e38(0x110)],_0x1937d3=await xlsx['readFile'](_0x233e38(0x70)+_0x2080e0);let _0x3d3521=_0x1937d3['SheetNames'],_0xee5c1d=xlsx[_0x233e38(0xaf)]['sheet_to_json'](_0x1937d3[_0x233e38(0xf2)][_0x3d3521[0x0]]);for(const _0x1debab of _0xee5c1d){const _0x2ba88a=_0x1debab[_0x233e38(0x121)],_0x10e206=_0x1debab[_0x233e38(0xc4)],_0x529707=_0x1debab[_0x233e38(0x117)],_0x59b1b1=_0x1debab[_0x233e38(0x124)],_0x473683=_0x1debab[_0x233e38(0x8b)],_0x3c7367=_0x1debab[_0x233e38(0xa3)],_0xa4ea0e=_0x1debab[_0x233e38(0x106)],_0x5f24d1=_0x1debab[_0x233e38(0x98)],_0x40f8d1=_0x1debab['Secondary_Code'],_0x35cc43=_0x1debab[_0x233e38(0x69)],_0x20188d=_0x1debab[_0x233e38(0x10a)],_0x86be21=_0x1debab[_0x233e38(0x93)];try{let _0x3f3fef=await categories[_0x233e38(0x113)]({'name':_0x3c7367});if(!_0x3f3fef){const _0x320105=new categories({'name':_0x3c7367,'products':'0'});_0x3f3fef=await _0x320105[_0x233e38(0xda)]();}let _0x4f16ef=await brands[_0x233e38(0x113)]({'name':_0x10e206});if(!_0x4f16ef){const _0x387008=new brands({'name':_0x10e206,'products':'0'});_0x4f16ef=await _0x387008[_0x233e38(0xda)]();}let _0x332e65=await units[_0x233e38(0x113)]({'name':_0x529707,'secondary_unit':_0x59b1b1});if(!_0x332e65){const _0x397d8d=new units({'name':_0x529707,'secondary_unit':_0x59b1b1,'products':'0'});_0x332e65=await _0x397d8d[_0x233e38(0xda)]();}const _0x478917=await product[_0x233e38(0xd9)]({'name':_0x2ba88a,'category':_0x3f3fef[_0x233e38(0xb6)],'brand':_0x4f16ef['name'],'secondary_unit':_0x332e65[_0x233e38(0x89)],'product_code':_0x473683});console[_0x233e38(0xb4)](_0x478917[_0x233e38(0xcd)]+'\x20<>\x20'+_0x3f3fef[_0x233e38(0xb6)]+'\x20<>\x20'+_0x4f16ef['name']+_0x233e38(0xcc)+_0x332e65['secondary_unit']+'\x20<>\x20'+_0x473683+'\x20<>\x20'+_0x2ba88a);if(_0x478917[_0x233e38(0xcd)]===0x0){const _0x4bee97=new product({'image':_0x233e38(0x95),'name':_0x2ba88a,'category':_0x3f3fef['name'],'brand':_0x4f16ef[_0x233e38(0xb6)],'unit':_0x332e65[_0x233e38(0xb6)],'alertquantity':_0xa4ea0e,'product_code':_0x473683,'secondary_unit':_0x332e65['secondary_unit'],'primary_code':_0x5f24d1,'secondary_code':_0x40f8d1,'maxStocks':_0x35cc43,'maxProdPerUnit':_0x20188d,'product_category':_0x86be21}),_0x1076bb=await _0x4bee97[_0x233e38(0xda)]();_0x3f3fef[_0x233e38(0x9c)]=parseInt(_0x3f3fef[_0x233e38(0x9c)])+0x1,await _0x3f3fef[_0x233e38(0xda)](),_0x4f16ef['products']=parseInt(_0x4f16ef[_0x233e38(0x9c)])+0x1,await _0x4f16ef['save'](),_0x332e65[_0x233e38(0x9c)]=parseInt(_0x332e65[_0x233e38(0x9c)])+0x1,await _0x332e65['save'](),_0x21c333['flash'](_0x233e38(0xdc),_0x2ba88a+'\x20added\x20successfully');}else{console['log'](_0x478917[0x0]);const _0x416c33=_0x478917[0x0];_0x416c33[_0x233e38(0xe0)]=_0x3f3fef['name'],_0x416c33[_0x233e38(0x116)]=_0x4f16ef['name'],_0x416c33[_0x233e38(0x6a)]=_0x332e65['name'],_0x416c33[_0x233e38(0xe9)]=_0xa4ea0e,_0x416c33[_0x233e38(0x10c)]=_0x473683,_0x416c33[_0x233e38(0x89)]=_0x332e65[_0x233e38(0x89)],_0x416c33['primary_code']=_0x5f24d1,_0x416c33['secondary_code']=_0x40f8d1,_0x416c33[_0x233e38(0x111)]=_0x35cc43,_0x416c33[_0x233e38(0x71)]=_0x20188d,_0x416c33[_0x233e38(0x94)]=_0x86be21;const _0x36662c=await _0x416c33[_0x233e38(0xda)]();_0x21c333[_0x233e38(0x109)](_0x233e38(0xdc),_0x36662c[_0x233e38(0xb6)]+_0x233e38(0x82));}}catch(_0x1c9815){_0x2d1e82[_0x233e38(0xfd)](0x1f4)[_0x233e38(0x9a)]({'proderror':_0x1c9815[_0x233e38(0x87)],'aproduct':_0x2ba88a});}}_0x2d1e82[_0x233e38(0xa1)](_0x233e38(0xf1));}),router[a0_0x90895c(0xf5)](a0_0x90895c(0xa0),auth,async(_0x29f6ea,_0xd3c081)=>{const _0x2648d5=a0_0x90895c;try{console[_0x2648d5(0xb4)](_0x29f6ea[_0x2648d5(0xb8)]);const {data_cateory:_0x39b15a,datachoose:_0x475462}=_0x29f6ea[_0x2648d5(0xb8)];var _0x3b9016;if(_0x475462==_0x2648d5(0xc3))_0x3b9016=await product[_0x2648d5(0x8d)]([{'$group':{'_id':_0x2648d5(0x80)}}]);else{if(_0x475462==_0x2648d5(0xc1))_0x3b9016=await product[_0x2648d5(0x8d)]([{'$match':{'product_category':_0x39b15a}},{'$group':{'_id':_0x2648d5(0x85)}}]);else _0x475462==_0x2648d5(0x6e)&&(_0x3b9016=await product[_0x2648d5(0x8d)]([{'$match':{'product_category':_0x39b15a}},{'$group':{'_id':_0x2648d5(0xe8)}}]));}_0xd3c081[_0x2648d5(0x9a)](_0x3b9016);}catch(_0xf3d051){_0xd3c081[_0x2648d5(0x9a)]({'message':_0xf3d051[_0x2648d5(0x87)]});}}),router['post'](a0_0x90895c(0x81),auth,async(_0x17aa4e,_0x4125e0)=>{const _0x4fb050=a0_0x90895c;try{const {data_choosing:_0x2675c7,data_selected:_0x173bb8}=_0x17aa4e[_0x4fb050(0xb8)];var _0x542c7a;if(_0x2675c7==_0x4fb050(0xc3))_0x542c7a=await product['aggregate']([{'$match':{'product_category':_0x173bb8}}]);else{if(_0x2675c7==_0x4fb050(0xc1))_0x542c7a=await product['aggregate']([{'$match':{'brand':_0x173bb8}}]);else _0x2675c7==_0x4fb050(0x6e)&&(_0x542c7a=await product[_0x4fb050(0x8d)]([{'$match':{'category':_0x173bb8}}]));}_0x4125e0[_0x4fb050(0x9a)](_0x542c7a);}catch(_0x4e253b){_0x4125e0['json']({'message':_0x4e253b[_0x4fb050(0x87)]});}}),router['get'](a0_0x90895c(0xe1),auth,async(_0x157b5f,_0x1ca781)=>{const _0xbe6f4b=a0_0x90895c,_0x194db0=_0x157b5f[_0xbe6f4b(0x11f)],_0x49701c=await profile[_0xbe6f4b(0x113)]({'email':_0x194db0[_0xbe6f4b(0xd5)]}),_0x5ce09d=await master_shop[_0xbe6f4b(0xd9)](),_0x3145e0=await product[_0xbe6f4b(0xd9)]();if(_0x5ce09d[0x0][_0xbe6f4b(0x123)]==_0xbe6f4b(0x91))var _0x43111f=users[_0xbe6f4b(0x120)];else{if(_0x5ce09d[0x0][_0xbe6f4b(0x123)]==_0xbe6f4b(0xa6))var _0x43111f=users[_0xbe6f4b(0xa6)];else{if(_0x5ce09d[0x0]['language']==_0xbe6f4b(0xf7))var _0x43111f=users[_0xbe6f4b(0xf7)];else{if(_0x5ce09d[0x0][_0xbe6f4b(0x123)]==_0xbe6f4b(0xef))var _0x43111f=users['Spanish'];else{if(_0x5ce09d[0x0][_0xbe6f4b(0x123)]=='French')var _0x43111f=users[_0xbe6f4b(0x11c)];else{if(_0x5ce09d[0x0][_0xbe6f4b(0x123)]=='Portuguese\x20(BR)')var _0x43111f=users[_0xbe6f4b(0x122)];else{if(_0x5ce09d[0x0][_0xbe6f4b(0x123)]==_0xbe6f4b(0xf4))var _0x43111f=users[_0xbe6f4b(0xf4)];else{if(_0x5ce09d[0x0][_0xbe6f4b(0x123)]==_0xbe6f4b(0xc0))var _0x43111f=users[_0xbe6f4b(0x90)];}}}}}}}_0x1ca781[_0xbe6f4b(0x72)]('product_barcode_products',{'success':_0x157b5f[_0xbe6f4b(0x109)](_0xbe6f4b(0xdc)),'errors':_0x157b5f[_0xbe6f4b(0x109)](_0xbe6f4b(0xf9)),'role':_0x194db0,'profile':_0x49701c,'products':_0x3145e0,'master_shop':_0x5ce09d,'language':_0x43111f});}),router['post'](a0_0x90895c(0x114),auth,async(_0x266e1b,_0xb8bf64)=>{const _0x29fa19=a0_0x90895c,_0x3c251f=await product[_0x29fa19(0xd9)]();_0xb8bf64[_0x29fa19(0x9a)]({'data':_0x3c251f});}),router[a0_0x90895c(0xf5)](a0_0x90895c(0x84),auth,async(_0x361153,_0x29b682)=>{const _0x4cccf6=a0_0x90895c;try{const {dataProdCat:_0x58519a,dataProdIdentity:_0x4c60f7}=_0x361153[_0x4cccf6(0xb8)];var _0x21819a;switch(_0x58519a){case'fg':switch(_0x4c60f7){case _0x4cccf6(0xc4):_0x21819a=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x4cccf6(0x85)}},{'$project':{'brand':_0x4cccf6(0xe6)}}]);break;case _0x4cccf6(0xa3):_0x21819a=await product['aggregate']([{'$match':{'product_category':_0x4cccf6(0x77)}},{'$group':{'_id':_0x4cccf6(0xe8)}},{'$project':{'category':_0x4cccf6(0xe6)}}]);break;}break;case'rm':switch(_0x4c60f7){case _0x4cccf6(0xc4):_0x21819a=await product['aggregate']([{'$match':{'product_category':_0x4cccf6(0x118)}},{'$group':{'_id':_0x4cccf6(0x85)}},{'$project':{'brand':'$_id'}}]);break;case _0x4cccf6(0xa3):_0x21819a=await product[_0x4cccf6(0x8d)]([{'$match':{'product_category':_0x4cccf6(0x118)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x4cccf6(0xe6)}}]);break;}break;}_0x29b682[_0x4cccf6(0x9a)](_0x21819a);}catch(_0x26ac97){_0x29b682['json']({'message':_0x26ac97[_0x4cccf6(0x87)]});}}),router[a0_0x90895c(0xf5)](a0_0x90895c(0xb7),auth,async(_0x51338a,_0x330176)=>{const _0x534d8a=a0_0x90895c;try{console[_0x534d8a(0xb4)](_0x51338a[_0x534d8a(0xb8)]);const {prod_cat:_0x45df9d,identity:_0x5d3f52,valueData:_0x5934fa,typeofbarcode:_0x41f747}=_0x51338a[_0x534d8a(0xb8)];let _0x5755cf;switch(_0x45df9d){case'fg':if(_0x5d3f52==_0x534d8a(0xc4))_0x5755cf=await product[_0x534d8a(0x8d)]([{'$match':{'product_category':_0x534d8a(0x77),'brand':_0x5934fa}}]);else _0x5d3f52==_0x534d8a(0xa3)&&(_0x5755cf=await product[_0x534d8a(0x8d)]([{'$match':{'product_category':_0x534d8a(0x77),'category':_0x5934fa}}]));break;case'rm':if(_0x5d3f52==_0x534d8a(0xc4))_0x5755cf=await product[_0x534d8a(0x8d)]([{'$match':{'product_category':_0x534d8a(0x118),'brand':_0x5934fa}}]);else _0x5d3f52==_0x534d8a(0xa3)&&(_0x5755cf=await product[_0x534d8a(0x8d)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x5934fa}}]));break;}const _0x26127f=_0x4de7ff=>_0x4de7ff*0x48,_0x44dc06={'width':0x3,'height':0x1},_0x47e94b=new PDFDocument({'margin':_0x26127f(0.75),'size':[_0x26127f(_0x44dc06['width']),_0x26127f(_0x44dc06[_0x534d8a(0x79)])],'bufferPages':!![]}),_0x4c503d=_0x5755cf['length'];for(let _0x4d0dc7=0x0;_0x4d0dc7<=_0x4c503d;_0x4d0dc7++){if(_0x4d0dc7!=_0x4c503d){const _0x566ae9=_0x5755cf[_0x4d0dc7][_0x534d8a(0xb6)],_0x57d9a6=_0x5755cf[_0x4d0dc7][_0x534d8a(0xca)],_0x5cda12=_0x5755cf[_0x4d0dc7][_0x534d8a(0xbe)],_0x44dc8=_0x5755cf[_0x4d0dc7][_0x534d8a(0x10c)];var _0x5256bc;switch(_0x41f747){case'1':_0x5256bc=_0x57d9a6;break;case'2':_0x5256bc=_0x5cda12;break;case'3':_0x5256bc=_0x44dc8;break;}const _0x1f4309={'width':0xd2,'height':0x64},_0x1eaad3={'width':_0x26127f(_0x44dc06[_0x534d8a(0x7a)]),'height':_0x26127f(_0x44dc06['height'])},_0x1cfb8e=new Canvas();JsBarcode(_0x1cfb8e,_0x5256bc,{'format':_0x534d8a(0xfe),'height':_0x1f4309['height'],'displayValue':!![],'text':_0x5256bc});const _0x26409e=_0x1cfb8e[_0x534d8a(0x92)](),_0x3db361=_0x1eaad3[_0x534d8a(0x7a)]/_0x1f4309[_0x534d8a(0x7a)],_0x4f1f81=_0x1eaad3[_0x534d8a(0x79)]/_0x1f4309[_0x534d8a(0x79)],_0x24efab=Math[_0x534d8a(0x97)](_0x3db361,_0x4f1f81),_0x58267e=_0x1f4309['width']*_0x24efab,_0x538ede=_0x1f4309[_0x534d8a(0x79)]*_0x24efab,_0x5e034a=(_0x1eaad3[_0x534d8a(0x7a)]-_0x58267e)/0x2,_0x42c088=(_0x1eaad3[_0x534d8a(0x79)]-_0x538ede)/0x2;_0x47e94b[_0x534d8a(0x10e)](_0x26409e,_0x5e034a,_0x42c088,{'width':_0x58267e,'height':_0x538ede}),_0x4d0dc7!=_0x4c503d&&_0x47e94b[_0x534d8a(0x7d)]();}}const _0x5d6933=[];_0x47e94b['on'](_0x534d8a(0x68),_0x5d6933[_0x534d8a(0xfc)][_0x534d8a(0xa4)](_0x5d6933)),_0x47e94b['on'](_0x534d8a(0xb2),()=>{const _0x11d9f8=_0x534d8a,_0x4debc6=Buffer[_0x11d9f8(0x7b)](_0x5d6933),_0x3d5d6c=_0x4debc6[_0x11d9f8(0xd0)]('base64');_0x330176[_0x11d9f8(0x9a)]({'pdfContent':_0x3d5d6c});}),_0x47e94b[_0x534d8a(0xb2)]();}catch(_0x1175cc){_0x330176[_0x534d8a(0x9a)]({'message':_0x1175cc[_0x534d8a(0x87)]});}}),router[a0_0x90895c(0xf5)]('/print_barcode_filter_search/',auth,async(_0x18056c,_0x352d3e)=>{const _0x261623=a0_0x90895c;try{console[_0x261623(0xb4)](_0x18056c['body']);const {prod_cat:_0x56dcaf,identity:_0x1365d9,valueData:_0x374be3}=_0x18056c[_0x261623(0xb8)];let _0x33c11a;switch(_0x56dcaf){case'fg':if(_0x1365d9==_0x261623(0xc4))_0x33c11a=await product[_0x261623(0x8d)]([{'$match':{'product_category':_0x261623(0x77),'brand':_0x374be3}}]);else _0x1365d9==_0x261623(0xa3)&&(_0x33c11a=await product[_0x261623(0x8d)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x374be3}}]));break;case'rm':if(_0x1365d9=='Brands')_0x33c11a=await product[_0x261623(0x8d)]([{'$match':{'product_category':_0x261623(0x118),'brand':_0x374be3}}]);else _0x1365d9==_0x261623(0xa3)&&(_0x33c11a=await product[_0x261623(0x8d)]([{'$match':{'product_category':_0x261623(0x118),'category':_0x374be3}}]));break;}_0x352d3e['json']({'data':_0x33c11a});}catch(_0x23c2a2){_0x352d3e[_0x261623(0x9a)]({'message':_0x23c2a2[_0x261623(0x87)]});}}),router[a0_0x90895c(0xf5)](a0_0x90895c(0xba),auth,async(_0x3591a6,_0x12dd8f)=>{const _0x4e7e7e=a0_0x90895c;try{const _0x5683e6=_0x3591a6[_0x4e7e7e(0xc8)]['id'],{copies:_0x156646,typeofbarcode:_0x4c615f}=_0x3591a6['body'];var _0x568df0=await product[_0x4e7e7e(0xd1)](_0x5683e6);const _0x2a8b66=_0x5a5948=>_0x5a5948*0x48,_0x2c10f3={'width':0x3,'height':0x1},_0x56fe57=new PDFDocument({'margin':_0x2a8b66(0.75),'size':[_0x2a8b66(_0x2c10f3[_0x4e7e7e(0x7a)]),_0x2a8b66(_0x2c10f3['height'])],'bufferPages':!![]}),_0x418a6e=_0x156646,_0x3b3bcc=_0x568df0['name'],_0x55a1a3=_0x568df0[_0x4e7e7e(0xca)],_0xd15b8c=_0x568df0['secondary_code'],_0x2337cd=_0x568df0[_0x4e7e7e(0x10c)];let _0x442549;switch(_0x4c615f){case'1':_0x442549=_0x55a1a3;break;case'2':_0x442549=_0xd15b8c;break;case'3':_0x442549=_0x2337cd;break;}const _0x24566d={'width':0xd2,'height':0x64},_0x22f03f={'width':_0x2a8b66(_0x2c10f3['width']),'height':_0x2a8b66(_0x2c10f3[_0x4e7e7e(0x79)])};for(let _0x2a0e0f=0x1;_0x2a0e0f<=_0x418a6e;_0x2a0e0f++){const _0x4627e0=new Canvas();JsBarcode(_0x4627e0,_0x442549,{'format':'CODE128','height':_0x24566d[_0x4e7e7e(0x79)],'displayValue':!![],'text':_0x442549});const _0x191db1=_0x4627e0[_0x4e7e7e(0x92)](),_0x1e4531=_0x22f03f['width']/_0x24566d[_0x4e7e7e(0x7a)],_0x143105=_0x22f03f[_0x4e7e7e(0x79)]/_0x24566d[_0x4e7e7e(0x79)],_0xe2b9ce=Math['min'](_0x1e4531,_0x143105),_0xf8f4bc=_0x24566d[_0x4e7e7e(0x7a)]*_0xe2b9ce,_0x56141b=_0x24566d[_0x4e7e7e(0x79)]*_0xe2b9ce,_0x4a39a9=(_0x22f03f[_0x4e7e7e(0x7a)]-_0xf8f4bc)/0x2,_0x3d074b=(_0x22f03f[_0x4e7e7e(0x79)]-_0x56141b)/0x2;_0x56fe57[_0x4e7e7e(0x10e)](_0x191db1,_0x4a39a9,_0x3d074b,{'width':_0xf8f4bc,'height':_0x56141b}),_0x2a0e0f!=_0x418a6e&&_0x56fe57['addPage']();}const _0xbb69f0=[];_0x56fe57['on'](_0x4e7e7e(0x68),_0xbb69f0[_0x4e7e7e(0xfc)][_0x4e7e7e(0xa4)](_0xbb69f0)),_0x56fe57['on'](_0x4e7e7e(0xb2),()=>{const _0x3c3083=_0x4e7e7e,_0x5a9e4f=Buffer[_0x3c3083(0x7b)](_0xbb69f0),_0x144ee2=_0x5a9e4f[_0x3c3083(0xd0)](_0x3c3083(0xce));_0x12dd8f[_0x3c3083(0x9a)]({'pdfContent':_0x144ee2});}),_0x56fe57[_0x4e7e7e(0xb2)]();}catch(_0x566073){_0x12dd8f[_0x4e7e7e(0x9a)]({'message':_0x566073[_0x4e7e7e(0x87)]});}}),module['exports']=router;