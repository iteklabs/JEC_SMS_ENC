const a0_0x442b99=a0_0x257b;(function(_0x3c65c7,_0x3536ed){const _0xea629d=a0_0x257b,_0x100cce=_0x3c65c7();while(!![]){try{const _0x14cd1d=-parseInt(_0xea629d(0x258))/0x1*(parseInt(_0xea629d(0x1cb))/0x2)+parseInt(_0xea629d(0x224))/0x3*(parseInt(_0xea629d(0x24b))/0x4)+-parseInt(_0xea629d(0x1c3))/0x5+-parseInt(_0xea629d(0x1d4))/0x6*(parseInt(_0xea629d(0x260))/0x7)+-parseInt(_0xea629d(0x206))/0x8+parseInt(_0xea629d(0x1f8))/0x9+parseInt(_0xea629d(0x21e))/0xa*(parseInt(_0xea629d(0x210))/0xb);if(_0x14cd1d===_0x3536ed)break;else _0x100cce['push'](_0x100cce['shift']());}catch(_0x10574b){_0x100cce['push'](_0x100cce['shift']());}}}(a0_0x7e67,0x74674));const express=require(a0_0x442b99(0x239)),res=require(a0_0x442b99(0x213)),app=express(),router=express[a0_0x442b99(0x1de)](),multer=require(a0_0x442b99(0x233)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x442b99(0x201)),auth=require('../middleware/auth'),users=require(a0_0x442b99(0x1f0)),excelJS=require(a0_0x442b99(0x1e4)),xlsx=require(a0_0x442b99(0x1d0)),JsBarcode=require(a0_0x442b99(0x20e)),{Canvas}=require(a0_0x442b99(0x1d6)),PDFDocument=require(a0_0x442b99(0x1ee));router[a0_0x442b99(0x25f)](a0_0x442b99(0x20d),auth,async(_0x48275e,_0x2d40c5)=>{const _0x425897=a0_0x442b99;try{const {username:_0x2c27e7,email:_0x488cc5,role:_0x14587a}=_0x48275e[_0x425897(0x1ac)],_0x342e5c=_0x48275e[_0x425897(0x1ac)],_0xf40e88=await profile[_0x425897(0x1fb)]({'email':_0x342e5c[_0x425897(0x249)]}),_0x3e4e43=await master_shop[_0x425897(0x23b)]();console['log'](_0x425897(0x1a8),_0x3e4e43);const _0x5c099a=await categories[_0x425897(0x23b)]();if(_0x3e4e43[0x0][_0x425897(0x254)]==_0x425897(0x19f))var _0x4d38e6=users[_0x425897(0x24c)];else{if(_0x3e4e43[0x0][_0x425897(0x254)]==_0x425897(0x234))var _0x4d38e6=users[_0x425897(0x234)];else{if(_0x3e4e43[0x0][_0x425897(0x254)]=='German')var _0x4d38e6=users[_0x425897(0x229)];else{if(_0x3e4e43[0x0][_0x425897(0x254)]==_0x425897(0x23c))var _0x4d38e6=users[_0x425897(0x23c)];else{if(_0x3e4e43[0x0][_0x425897(0x254)]=='French')var _0x4d38e6=users['French'];else{if(_0x3e4e43[0x0][_0x425897(0x254)]==_0x425897(0x242))var _0x4d38e6=users[_0x425897(0x243)];else{if(_0x3e4e43[0x0]['language']==_0x425897(0x1af))var _0x4d38e6=users[_0x425897(0x1af)];else{if(_0x3e4e43[0x0][_0x425897(0x254)]==_0x425897(0x23a))var _0x4d38e6=users[_0x425897(0x219)];}}}}}}}_0x2d40c5[_0x425897(0x1cc)]('categories',{'success':_0x48275e[_0x425897(0x21d)](_0x425897(0x202)),'errors':_0x48275e['flash'](_0x425897(0x227)),'role':_0x342e5c,'profile':_0xf40e88,'user':_0x5c099a,'master_shop':_0x3e4e43,'language':_0x4d38e6});}catch(_0x5728ba){console['log'](_0x5728ba);}}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x20d),auth,async(_0x1a009e,_0x57e435)=>{const _0x476dbe=a0_0x442b99;try{const {name:_0x42ae40,products:_0x5e7c65}=_0x1a009e[_0x476dbe(0x1f5)],_0x49e8a2=new categories({'name':_0x42ae40,'products':_0x5e7c65}),_0x550f1c=await categories[_0x476dbe(0x1fb)]({'name':_0x42ae40});_0x550f1c?_0x1a009e[_0x476dbe(0x21d)](_0x476dbe(0x227),_0x42ae40+_0x476dbe(0x1b9)):_0x1a009e[_0x476dbe(0x21d)](_0x476dbe(0x202),_0x42ae40+'\x20categories\x20is\x20add\x20successfully');const _0x4948be=await _0x49e8a2['save']();_0x57e435[_0x476dbe(0x1a9)]('/products/categories');}catch(_0x1a5ba9){console[_0x476dbe(0x1b0)](_0x1a5ba9);}}),router[a0_0x442b99(0x25f)](a0_0x442b99(0x1b8),auth,async(_0x1bcf26,_0x1f383d)=>{const _0x80caa0=a0_0x442b99;try{const {username:_0x2486aa,email:_0x4e27ca,role:_0x52ec91}=_0x1bcf26[_0x80caa0(0x1ac)],_0x219a00=_0x1bcf26['user'],_0x2b3c7d=await profile[_0x80caa0(0x1fb)]({'email':_0x219a00['email']}),_0x4ecfe3=await master_shop[_0x80caa0(0x23b)]();console[_0x80caa0(0x1b0)](_0x80caa0(0x1a8),_0x4ecfe3);const _0x42cdcf=_0x1bcf26[_0x80caa0(0x1ca)]['id'];console['log'](_0x42cdcf);const _0x31bcec=await categories[_0x80caa0(0x24e)](_0x42cdcf);if(_0x4ecfe3[0x0]['language']==_0x80caa0(0x19f))var _0x4421ae=users[_0x80caa0(0x24c)];else{if(_0x4ecfe3[0x0][_0x80caa0(0x254)]==_0x80caa0(0x234))var _0x4421ae=users[_0x80caa0(0x234)];else{if(_0x4ecfe3[0x0]['language']=='German')var _0x4421ae=users['German'];else{if(_0x4ecfe3[0x0][_0x80caa0(0x254)]==_0x80caa0(0x23c))var _0x4421ae=users['Spanish'];else{if(_0x4ecfe3[0x0]['language']==_0x80caa0(0x262))var _0x4421ae=users[_0x80caa0(0x262)];else{if(_0x4ecfe3[0x0][_0x80caa0(0x254)]==_0x80caa0(0x242))var _0x4421ae=users[_0x80caa0(0x243)];else{if(_0x4ecfe3[0x0][_0x80caa0(0x254)]==_0x80caa0(0x1af))var _0x4421ae=users['Chinese'];else{if(_0x4ecfe3[0x0][_0x80caa0(0x254)]==_0x80caa0(0x23a))var _0x4421ae=users[_0x80caa0(0x219)];}}}}}}}_0x1f383d[_0x80caa0(0x1cc)](_0x80caa0(0x1d3),{'success':_0x1bcf26[_0x80caa0(0x21d)](_0x80caa0(0x202)),'errors':_0x1bcf26['flash'](_0x80caa0(0x227)),'role':_0x219a00,'profile':_0x2b3c7d,'master_shop':_0x4ecfe3,'user':_0x31bcec,'language':_0x4421ae});}catch(_0x40943a){console[_0x80caa0(0x1b0)](_0x40943a);}}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x1b8),auth,async(_0x31de03,_0x370c2a)=>{const _0x5ef54b=a0_0x442b99;try{const _0xb6d6cd=_0x31de03[_0x5ef54b(0x1ca)]['id'],_0x5d8706=await categories['findByIdAndUpdate'](_0xb6d6cd,_0x31de03[_0x5ef54b(0x1f5)]);_0x31de03['flash'](_0x5ef54b(0x202),''+users[_0x5ef54b(0x250)]),_0x370c2a[_0x5ef54b(0x1a9)](_0x5ef54b(0x248));}catch(_0x33d3bf){console['log'](_0x33d3bf);}}),router[a0_0x442b99(0x25f)](a0_0x442b99(0x1f2),auth,async(_0x36356b,_0x59c327)=>{const _0x16bb83=a0_0x442b99;try{const _0x3c3b9d=_0x36356b[_0x16bb83(0x1ca)]['id'],_0x35eaff=await categories[_0x16bb83(0x257)](_0x3c3b9d);_0x36356b['flash'](_0x16bb83(0x202),_0x16bb83(0x200)),_0x59c327[_0x16bb83(0x1a9)]('/products/categories');}catch(_0x1bb335){console[_0x16bb83(0x1b0)](_0x1bb335);}}),router['get']('/brands',auth,async(_0x266bf3,_0x19b41f)=>{const _0x560a21=a0_0x442b99;try{const {username:_0x18e8c5,email:_0x181c7c,role:_0x560a63}=_0x266bf3['user'],_0x23116d=_0x266bf3['user'],_0x396350=await profile['findOne']({'email':_0x23116d[_0x560a21(0x249)]}),_0x2a1596=await master_shop[_0x560a21(0x23b)]();console[_0x560a21(0x1b0)]('master',_0x2a1596);const _0x5e9821=await brands[_0x560a21(0x23b)]();if(_0x2a1596[0x0][_0x560a21(0x254)]=='English\x20(US)')var _0x279f97=users[_0x560a21(0x24c)];else{if(_0x2a1596[0x0][_0x560a21(0x254)]==_0x560a21(0x234))var _0x279f97=users['Hindi'];else{if(_0x2a1596[0x0][_0x560a21(0x254)]==_0x560a21(0x229))var _0x279f97=users[_0x560a21(0x229)];else{if(_0x2a1596[0x0]['language']=='Spanish')var _0x279f97=users['Spanish'];else{if(_0x2a1596[0x0][_0x560a21(0x254)]=='French')var _0x279f97=users[_0x560a21(0x262)];else{if(_0x2a1596[0x0][_0x560a21(0x254)]==_0x560a21(0x242))var _0x279f97=users[_0x560a21(0x243)];else{if(_0x2a1596[0x0][_0x560a21(0x254)]==_0x560a21(0x1af))var _0x279f97=users['Chinese'];else{if(_0x2a1596[0x0][_0x560a21(0x254)]==_0x560a21(0x23a))var _0x279f97=users[_0x560a21(0x219)];}}}}}}}_0x19b41f[_0x560a21(0x1cc)](_0x560a21(0x1e1),{'success':_0x266bf3[_0x560a21(0x21d)]('success'),'errors':_0x266bf3[_0x560a21(0x21d)]('errors'),'role':_0x23116d,'profile':_0x396350,'master_shop':_0x2a1596,'user':_0x5e9821,'language':_0x279f97});}catch(_0x328ae9){console[_0x560a21(0x1b0)](_0x328ae9);}}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x1d2),auth,async(_0x3e51ea,_0x4d84b3)=>{const _0x45db1d=a0_0x442b99;try{const {name:_0x24ea55,products:_0x747dde}=_0x3e51ea['body'],_0x1e2c88=new brands({'name':_0x24ea55,'products':_0x747dde}),_0x43a080=await brands[_0x45db1d(0x1fb)]({'name':_0x24ea55});_0x43a080?_0x3e51ea[_0x45db1d(0x21d)](_0x45db1d(0x227),_0x24ea55+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x3e51ea[_0x45db1d(0x21d)]('success',_0x24ea55+'\x20brand\x20is\x20add\x20successfully');const _0x3ee3da=await _0x1e2c88[_0x45db1d(0x1ad)]();_0x4d84b3[_0x45db1d(0x1a9)](_0x45db1d(0x1ec));}catch(_0x314fc6){console[_0x45db1d(0x1b0)](_0x314fc6);}}),router[a0_0x442b99(0x25f)](a0_0x442b99(0x1a6),auth,async(_0x1ce088,_0xfd8155)=>{const _0x115d5f=a0_0x442b99;try{const {username:_0xb65687,email:_0x4e2e71,role:_0x168f89}=_0x1ce088[_0x115d5f(0x1ac)],_0x1b9ed0=_0x1ce088[_0x115d5f(0x1ac)],_0x24fddb=await profile['findOne']({'email':_0x1b9ed0[_0x115d5f(0x249)]}),_0x5bedd8=await master_shop['find']();console[_0x115d5f(0x1b0)](_0x115d5f(0x1a8),_0x5bedd8);const _0x4471f0=_0x1ce088['params']['id'];console[_0x115d5f(0x1b0)](_0x4471f0);const _0x355720=await brands['findById'](_0x4471f0);if(_0x5bedd8[0x0][_0x115d5f(0x254)]==_0x115d5f(0x19f))var _0x11ab56=users['English'];else{if(_0x5bedd8[0x0][_0x115d5f(0x254)]==_0x115d5f(0x234))var _0x11ab56=users['Hindi'];else{if(_0x5bedd8[0x0]['language']==_0x115d5f(0x229))var _0x11ab56=users['German'];else{if(_0x5bedd8[0x0]['language']=='Spanish')var _0x11ab56=users[_0x115d5f(0x23c)];else{if(_0x5bedd8[0x0][_0x115d5f(0x254)]==_0x115d5f(0x262))var _0x11ab56=users[_0x115d5f(0x262)];else{if(_0x5bedd8[0x0]['language']=='Portuguese\x20(BR)')var _0x11ab56=users[_0x115d5f(0x243)];else{if(_0x5bedd8[0x0][_0x115d5f(0x254)]==_0x115d5f(0x1af))var _0x11ab56=users['Chinese'];else{if(_0x5bedd8[0x0][_0x115d5f(0x254)]==_0x115d5f(0x23a))var _0x11ab56=users[_0x115d5f(0x219)];}}}}}}}_0xfd8155[_0x115d5f(0x1cc)](_0x115d5f(0x1e1),{'success':_0x1ce088[_0x115d5f(0x21d)](_0x115d5f(0x202)),'errors':_0x1ce088[_0x115d5f(0x21d)]('errors'),'role':_0x1b9ed0,'profile':_0x24fddb,'master_shop':_0x5bedd8,'user':_0x355720,'language':_0x11ab56});}catch(_0x358663){console['log'](_0x358663);}}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x1a6),auth,async(_0x38d3f6,_0x5f0c61)=>{const _0x30cece=a0_0x442b99;try{const _0x3b47ed=_0x38d3f6[_0x30cece(0x1ca)]['id'],_0x351d11=await brands[_0x30cece(0x221)](_0x3b47ed,_0x38d3f6[_0x30cece(0x1f5)]);_0x38d3f6['flash'](_0x30cece(0x202),_0x30cece(0x20f)),_0x5f0c61[_0x30cece(0x1a9)](_0x30cece(0x1ec));}catch(_0x170f8d){console[_0x30cece(0x1b0)](_0x170f8d);}}),router['get']('/brands/delete/:id',auth,async(_0x3574ba,_0x562757)=>{const _0x38e0d8=a0_0x442b99;try{const _0x3d9725=_0x3574ba['params']['id'],_0x555ee0=await brands[_0x38e0d8(0x257)](_0x3d9725);_0x3574ba[_0x38e0d8(0x21d)](_0x38e0d8(0x202),'brand\x20data\x20delete\x20successfully'),_0x562757[_0x38e0d8(0x1a9)](_0x38e0d8(0x1ec));}catch(_0x1652c4){console[_0x38e0d8(0x1b0)](_0x1652c4);}}),router[a0_0x442b99(0x25f)](a0_0x442b99(0x209),auth,async(_0x4ba9c2,_0x133d4e)=>{const _0x371467=a0_0x442b99;try{const {username:_0x439e34,email:_0x50f3a0,role:_0xdb976a}=_0x4ba9c2[_0x371467(0x1ac)],_0x1d77a8=_0x4ba9c2[_0x371467(0x1ac)],_0x3a5c56=await profile[_0x371467(0x1fb)]({'email':_0x1d77a8[_0x371467(0x249)]}),_0xca99b4=await master_shop[_0x371467(0x23b)]();console[_0x371467(0x1b0)](_0x371467(0x1a8),_0xca99b4);const _0x1ed806=await units[_0x371467(0x23b)]();if(_0xca99b4[0x0][_0x371467(0x254)]=='English\x20(US)')var _0x181741=users[_0x371467(0x24c)];else{if(_0xca99b4[0x0][_0x371467(0x254)]==_0x371467(0x234))var _0x181741=users['Hindi'];else{if(_0xca99b4[0x0]['language']==_0x371467(0x229))var _0x181741=users[_0x371467(0x229)];else{if(_0xca99b4[0x0][_0x371467(0x254)]==_0x371467(0x23c))var _0x181741=users[_0x371467(0x23c)];else{if(_0xca99b4[0x0]['language']==_0x371467(0x262))var _0x181741=users['French'];else{if(_0xca99b4[0x0][_0x371467(0x254)]==_0x371467(0x242))var _0x181741=users[_0x371467(0x243)];else{if(_0xca99b4[0x0][_0x371467(0x254)]==_0x371467(0x1af))var _0x181741=users[_0x371467(0x1af)];else{if(_0xca99b4[0x0]['language']==_0x371467(0x23a))var _0x181741=users['Arabic'];}}}}}}}_0x133d4e[_0x371467(0x1cc)](_0x371467(0x1ef),{'success':_0x4ba9c2[_0x371467(0x21d)](_0x371467(0x202)),'errors':_0x4ba9c2[_0x371467(0x21d)](_0x371467(0x227)),'role':_0x1d77a8,'profile':_0x3a5c56,'master_shop':_0xca99b4,'user':_0x1ed806,'language':_0x181741});}catch(_0x3b4d75){console['log'](_0x3b4d75);}}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x209),auth,async(_0x4637e9,_0x4048de)=>{const _0x4ae33a=a0_0x442b99;try{const {name:_0x23de11,secondary_unit:_0x1ac677,products:_0x38c675}=_0x4637e9[_0x4ae33a(0x1f5)],_0x366eda=new units({'name':_0x23de11,'secondary_unit':_0x1ac677,'products':_0x38c675}),_0x4fbc2c=await units['findOne']({'name':_0x23de11});_0x4fbc2c?_0x4637e9['flash'](_0x4ae33a(0x227),_0x23de11+_0x4ae33a(0x237)):_0x4637e9[_0x4ae33a(0x21d)](_0x4ae33a(0x202),_0x23de11+_0x4ae33a(0x1fa));const _0x48066f=await _0x366eda[_0x4ae33a(0x1ad)]();_0x4048de['redirect']('/products/units');}catch(_0x3c76b3){console[_0x4ae33a(0x1b0)](_0x3c76b3);}}),router[a0_0x442b99(0x25f)]('/units/:id',auth,async(_0xb54452,_0x5628ef)=>{const _0x10b0b7=a0_0x442b99;try{const {username:_0x44b22b,email:_0x2f91db,role:_0x2a90d7}=_0xb54452[_0x10b0b7(0x1ac)],_0x4f6897=_0xb54452[_0x10b0b7(0x1ac)],_0x5142ef=await profile[_0x10b0b7(0x1fb)]({'email':_0x4f6897[_0x10b0b7(0x249)]}),_0x30b65e=await master_shop['find']();console[_0x10b0b7(0x1b0)](_0x10b0b7(0x1a8),_0x30b65e);const _0xf30e8d=_0xb54452[_0x10b0b7(0x1ca)]['id'],_0x4318bc=await units[_0x10b0b7(0x24e)](_0xf30e8d);if(_0x30b65e[0x0][_0x10b0b7(0x254)]==_0x10b0b7(0x19f))var _0x2f55b8=users[_0x10b0b7(0x24c)];else{if(_0x30b65e[0x0][_0x10b0b7(0x254)]==_0x10b0b7(0x234))var _0x2f55b8=users[_0x10b0b7(0x234)];else{if(_0x30b65e[0x0][_0x10b0b7(0x254)]=='German')var _0x2f55b8=users[_0x10b0b7(0x229)];else{if(_0x30b65e[0x0][_0x10b0b7(0x254)]==_0x10b0b7(0x23c))var _0x2f55b8=users['Spanish'];else{if(_0x30b65e[0x0]['language']==_0x10b0b7(0x262))var _0x2f55b8=users[_0x10b0b7(0x262)];else{if(_0x30b65e[0x0][_0x10b0b7(0x254)]==_0x10b0b7(0x242))var _0x2f55b8=users[_0x10b0b7(0x243)];else{if(_0x30b65e[0x0][_0x10b0b7(0x254)]==_0x10b0b7(0x1af))var _0x2f55b8=users[_0x10b0b7(0x1af)];else{if(_0x30b65e[0x0][_0x10b0b7(0x254)]=='Arabic\x20(ae)')var _0x2f55b8=users[_0x10b0b7(0x219)];}}}}}}}_0x5628ef['render'](_0x10b0b7(0x1ef),{'success':_0xb54452[_0x10b0b7(0x21d)](_0x10b0b7(0x202)),'errors':_0xb54452[_0x10b0b7(0x21d)](_0x10b0b7(0x227)),'role':_0x4f6897,'profile':_0x5142ef,'master_shop':_0x30b65e,'user':_0x4318bc,'language':_0x2f55b8});}catch(_0x538509){console[_0x10b0b7(0x1b0)](_0x538509);}}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x228),auth,async(_0x28d87c,_0x2d3356)=>{const _0x1c8fbb=a0_0x442b99;try{const _0x3b6fe5=_0x28d87c[_0x1c8fbb(0x1ca)]['id'],_0x21748c=await units['findByIdAndUpdate'](_0x3b6fe5,_0x28d87c[_0x1c8fbb(0x1f5)]);_0x28d87c[_0x1c8fbb(0x21d)](_0x1c8fbb(0x202),_0x1c8fbb(0x212)),_0x2d3356[_0x1c8fbb(0x1a9)](_0x1c8fbb(0x1a5));}catch(_0x3eb2c1){console[_0x1c8fbb(0x1b0)](_0x3eb2c1);}}),router['get'](a0_0x442b99(0x245),auth,async(_0x57b31f,_0x223986)=>{const _0x1969f3=a0_0x442b99;try{const _0x187367=_0x57b31f[_0x1969f3(0x1ca)]['id'],_0x428a88=await units['findByIdAndDelete'](_0x187367);_0x57b31f[_0x1969f3(0x21d)](_0x1969f3(0x202),_0x1969f3(0x21a)),_0x223986[_0x1969f3(0x1a9)](_0x1969f3(0x1a5));}catch(_0x415171){console[_0x1969f3(0x1b0)](_0x415171);}});const storage=multer['diskStorage']({'destination':(_0xa920a0,_0x337aab,_0x3cf176)=>{const _0x29f9dc=a0_0x442b99;_0x3cf176(null,_0x29f9dc(0x1ff));},'filename':(_0x22892d,_0x36c464,_0x7ea05b)=>{const _0x1afa7e=a0_0x442b99;_0x7ea05b(null,Date[_0x1afa7e(0x1b7)]()+_0x36c464[_0x1afa7e(0x1ae)]);}}),upload=multer({'storage':storage});function a0_0x257b(_0x5c0d10,_0x5e7016){const _0x7e6765=a0_0x7e67();return a0_0x257b=function(_0x257b53,_0x29390f){_0x257b53=_0x257b53-0x19f;let _0x4bc706=_0x7e6765[_0x257b53];return _0x4bc706;},a0_0x257b(_0x5c0d10,_0x5e7016);}router['get'](a0_0x442b99(0x24a),auth,async(_0x4340fa,_0x3d4813)=>{const _0x29b874=a0_0x442b99;try{const {username:_0x34b8d8,email:_0x30c980,role:_0x1cd245}=_0x4340fa['user'],_0x3eb23c=_0x4340fa[_0x29b874(0x1ac)],_0x46563c=await profile[_0x29b874(0x1fb)]({'email':_0x3eb23c[_0x29b874(0x249)]}),_0x3fdc32={'year':_0x29b874(0x25c),'month':'long','day':_0x29b874(0x25c)},_0x310db5=await master_shop['find']();console[_0x29b874(0x1b0)](_0x29b874(0x218),_0x310db5);const _0x3dbfd9=await product[_0x29b874(0x23b)]();console[_0x29b874(0x1b0)](_0x29b874(0x208),_0x3dbfd9);const _0xa0b70d=await warehouse[_0x29b874(0x1a4)]([{'$unwind':'$product_details'},{'$lookup':{'from':'products','localField':'product_details.product_name','foreignField':_0x29b874(0x261),'as':_0x29b874(0x24f)}},{'$unwind':_0x29b874(0x214)},{'$project':{'product_name':_0x29b874(0x1f1),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x29b874(0x1ed)}}}]);console[_0x29b874(0x1b0)](_0x29b874(0x1d8),_0xa0b70d),_0xa0b70d[_0x29b874(0x25d)](_0x2fbdd8=>{const _0x2a7aa8=_0x29b874,_0x4b7f1c=_0x3dbfd9[_0x2a7aa8(0x20c)](_0x43d38b=>{const _0x40b5f6=_0x2a7aa8;_0x43d38b[_0x40b5f6(0x261)]==_0x2fbdd8['_id']&&(_0x43d38b[_0x40b5f6(0x203)]=parseInt(_0x43d38b['stock'])+parseInt(_0x2fbdd8[_0x40b5f6(0x24d)]));});}),console['log'](_0x29b874(0x208),_0x3dbfd9);if(_0x310db5[0x0][_0x29b874(0x254)]==_0x29b874(0x19f))var _0x303aa3=users[_0x29b874(0x24c)];else{if(_0x310db5[0x0]['language']==_0x29b874(0x234))var _0x303aa3=users[_0x29b874(0x234)];else{if(_0x310db5[0x0]['language']==_0x29b874(0x229))var _0x303aa3=users[_0x29b874(0x229)];else{if(_0x310db5[0x0][_0x29b874(0x254)]==_0x29b874(0x23c))var _0x303aa3=users[_0x29b874(0x23c)];else{if(_0x310db5[0x0]['language']=='French')var _0x303aa3=users[_0x29b874(0x262)];else{if(_0x310db5[0x0]['language']==_0x29b874(0x242))var _0x303aa3=users['Portuguese'];else{if(_0x310db5[0x0][_0x29b874(0x254)]=='Chinese')var _0x303aa3=users[_0x29b874(0x1af)];else{if(_0x310db5[0x0][_0x29b874(0x254)]=='Arabic\x20(ae)')var _0x303aa3=users[_0x29b874(0x219)];}}}}}}}_0x3d4813[_0x29b874(0x1cc)](_0x29b874(0x232),{'success':_0x4340fa[_0x29b874(0x21d)](_0x29b874(0x202)),'errors':_0x4340fa[_0x29b874(0x21d)](_0x29b874(0x227)),'alldata':_0x3dbfd9,'profile':_0x46563c,'master_shop':_0x310db5,'role':_0x3eb23c,'product_stock':_0xa0b70d,'language':_0x303aa3});}catch(_0x1d430a){console[_0x29b874(0x1b0)](_0x1d430a);}}),router[a0_0x442b99(0x25f)](a0_0x442b99(0x1a2),auth,async(_0x4d8717,_0x580863)=>{const _0x2b99b3=a0_0x442b99;try{const {username:_0x5006c5,email:_0xe1cc70,role:_0x58f9ae}=_0x4d8717[_0x2b99b3(0x1ac)],_0x447aa3=_0x4d8717[_0x2b99b3(0x1ac)],_0x3ce86b=await profile['findOne']({'email':_0x447aa3['email']}),_0x5a5d74=await master_shop[_0x2b99b3(0x23b)]();console[_0x2b99b3(0x1b0)](_0x2b99b3(0x1a8),_0x5a5d74);const _0xff9921=await categories['find']({}),_0x25c857=await brands[_0x2b99b3(0x23b)]({}),_0x3d0ad4=await units['find']({}),_0x58087b=await warehouse['find']({'status':_0x2b99b3(0x1d9)});if(_0x5a5d74[0x0][_0x2b99b3(0x254)]==_0x2b99b3(0x19f))var _0x22dc68=users[_0x2b99b3(0x24c)];else{if(_0x5a5d74[0x0][_0x2b99b3(0x254)]==_0x2b99b3(0x234))var _0x22dc68=users['Hindi'];else{if(_0x5a5d74[0x0]['language']==_0x2b99b3(0x229))var _0x22dc68=users[_0x2b99b3(0x229)];else{if(_0x5a5d74[0x0][_0x2b99b3(0x254)]==_0x2b99b3(0x23c))var _0x22dc68=users[_0x2b99b3(0x23c)];else{if(_0x5a5d74[0x0][_0x2b99b3(0x254)]==_0x2b99b3(0x262))var _0x22dc68=users[_0x2b99b3(0x262)];else{if(_0x5a5d74[0x0][_0x2b99b3(0x254)]=='Portuguese\x20(BR)')var _0x22dc68=users[_0x2b99b3(0x243)];else{if(_0x5a5d74[0x0][_0x2b99b3(0x254)]==_0x2b99b3(0x1af))var _0x22dc68=users[_0x2b99b3(0x1af)];else{if(_0x5a5d74[0x0][_0x2b99b3(0x254)]==_0x2b99b3(0x23a))var _0x22dc68=users[_0x2b99b3(0x219)];}}}}}}}_0x580863[_0x2b99b3(0x1cc)](_0x2b99b3(0x1b1),{'success':_0x4d8717[_0x2b99b3(0x21d)](_0x2b99b3(0x202)),'errors':_0x4d8717[_0x2b99b3(0x21d)](_0x2b99b3(0x227)),'role':_0x447aa3,'profile':_0x3ce86b,'categories':_0xff9921,'brands':_0x25c857,'master_shop':_0x5a5d74,'units':_0x3d0ad4,'language':_0x22dc68,'find_data':_0x58087b});}catch(_0xca2d3e){console['log'](_0xca2d3e);}}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x1a2),auth,upload[a0_0x442b99(0x1e8)](a0_0x442b99(0x235)),async(_0xda6144,_0x398597)=>{const _0x9f4f22=a0_0x442b99;try{const {name:_0x33d7b5,category:_0x4e3ee6,brand:_0x9377a7,unit:_0x4cf391,alertquantity:_0x5d1ab4,stock:_0x13831f,product_code:_0x3bacc0,warehouse:_0x39631a,primary_ItemCode:_0x524109,second_ItemCode:_0x46b291,second_unit:_0x3b1679,maxPerUnit:_0x59697d,MaxPerProduct:_0x2315d9,sales_cat:_0x47d955,type_prod:_0x3307d9}=_0xda6144[_0x9f4f22(0x1f5)],_0x185b05=_0xda6144[_0x9f4f22(0x25e)]?.[_0x9f4f22(0x253)]||_0x9f4f22(0x25a),_0x41f7cf=new product({'image':_0x185b05,'name':_0x33d7b5,'category':_0x4e3ee6,'brand':_0x9377a7,'unit':_0x4cf391,'alertquantity':_0x5d1ab4,'stock':_0x13831f,'product_code':_0x3bacc0,'warehouse':_0x39631a,'primary_code':_0x524109,'secondary_code':_0x46b291,'second_unit':_0x3b1679,'maxStocks':_0x2315d9,'maxProdPerUnit':_0x59697d,'sales_category':_0x47d955,'type_products':_0x3307d9}),_0x20ea4e=await _0x41f7cf[_0x9f4f22(0x1ad)](),_0x19f6e0=await categories[_0x9f4f22(0x1fb)]({'name':_0x4e3ee6});_0x19f6e0[_0x9f4f22(0x232)]=parseInt(_0x19f6e0['products'])+0x1,await _0x19f6e0[_0x9f4f22(0x1ad)]();const _0x3308a5=await brands['findOne']({'name':_0x9377a7});_0x3308a5[_0x9f4f22(0x232)]=parseInt(_0x3308a5[_0x9f4f22(0x232)])+0x1,await _0x3308a5['save']();const _0x38d749=await units['findOne']({'name':_0x4cf391});_0x38d749[_0x9f4f22(0x232)]=parseInt(_0x38d749[_0x9f4f22(0x232)])+0x1,await _0x38d749[_0x9f4f22(0x1ad)](),_0xda6144[_0x9f4f22(0x21d)](_0x9f4f22(0x202),_0x9f4f22(0x222)),_0x398597['redirect']('/products/view');}catch(_0x256842){console['log'](_0x256842);}}),router[a0_0x442b99(0x25f)](a0_0x442b99(0x22e),auth,async(_0x5e447,_0x1989b2)=>{const _0x2d0649=a0_0x442b99;try{const {username:_0x1de397,email:_0x3da35f,role:_0x1b6fb2}=_0x5e447['user'],_0x3b7a92=_0x5e447[_0x2d0649(0x1ac)],_0xf71db0=await profile[_0x2d0649(0x1fb)]({'email':_0x3b7a92[_0x2d0649(0x249)]}),_0x2aaa27=await master_shop[_0x2d0649(0x23b)]();console[_0x2d0649(0x1b0)](_0x2d0649(0x244),_0x2aaa27);const _0xd4dcd4=_0x5e447['params']['id'],_0x338797=await product[_0x2d0649(0x24e)](_0xd4dcd4),_0x18ab65=await categories[_0x2d0649(0x23b)]({}),_0x44ac44=await brands[_0x2d0649(0x23b)]({}),_0x5b9dca=await units['find']({}),_0x8a231f=await warehouse[_0x2d0649(0x23b)]({'status':_0x2d0649(0x1d9)}),_0x17fbdd=await units[_0x2d0649(0x1a4)]([{'$group':{'_id':_0x2d0649(0x1dd),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x2aaa27[0x0][_0x2d0649(0x254)]==_0x2d0649(0x19f))var _0x5081b9=users[_0x2d0649(0x24c)];else{if(_0x2aaa27[0x0]['language']==_0x2d0649(0x234))var _0x5081b9=users[_0x2d0649(0x234)];else{if(_0x2aaa27[0x0][_0x2d0649(0x254)]==_0x2d0649(0x229))var _0x5081b9=users[_0x2d0649(0x229)];else{if(_0x2aaa27[0x0][_0x2d0649(0x254)]=='Spanish')var _0x5081b9=users[_0x2d0649(0x23c)];else{if(_0x2aaa27[0x0]['language']==_0x2d0649(0x262))var _0x5081b9=users['French'];else{if(_0x2aaa27[0x0][_0x2d0649(0x254)]=='Portuguese\x20(BR)')var _0x5081b9=users[_0x2d0649(0x243)];else{if(_0x2aaa27[0x0][_0x2d0649(0x254)]==_0x2d0649(0x1af))var _0x5081b9=users['Chinese'];else{if(_0x2aaa27[0x0][_0x2d0649(0x254)]==_0x2d0649(0x23a))var _0x5081b9=users[_0x2d0649(0x219)];}}}}}}}_0x1989b2[_0x2d0649(0x1cc)](_0x2d0649(0x1bd),{'success':_0x5e447[_0x2d0649(0x21d)](_0x2d0649(0x202)),'errors':_0x5e447[_0x2d0649(0x21d)](_0x2d0649(0x227)),'role':_0x3b7a92,'profile':_0xf71db0,'alldata':_0x338797,'categories':_0x18ab65,'brands':_0x44ac44,'master_shop':_0x2aaa27,'units':_0x5b9dca,'secondunit':_0x17fbdd,'find_data':_0x8a231f,'language':_0x5081b9});}catch(_0x1cbead){console[_0x2d0649(0x1b0)](_0x1cbead);}}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x22e),auth,upload['single'](a0_0x442b99(0x235)),async(_0x4ae6c1,_0x2d0fce)=>{const _0xff104f=a0_0x442b99;try{const _0x1c559d=_0x4ae6c1[_0xff104f(0x1ca)]['id'],_0x253d90=await product[_0xff104f(0x24e)](_0x1c559d),{image:_0x45dc4d,name:_0xb85da0,category:_0x259a06,brand:_0x110946,sku:_0x3b5100,unit:_0xd68fa9,alertquantity:_0x33107a,product_code:_0x514f36,warehouse:_0x2846e8,primary_ItemCode:_0x139994,second_ItemCode:_0x4d8380,second_unit:_0x542d79,maxPerUnit:_0x38198d,MaxPerProduct:_0x110828,prod_catdata:_0x5521f7,type_prod:_0x3b902d,sales_cat:_0x2572d7}=_0x4ae6c1['body'];_0x4ae6c1[_0xff104f(0x25e)]&&(_0x253d90[_0xff104f(0x235)]=_0x4ae6c1[_0xff104f(0x25e)][_0xff104f(0x253)]);_0x253d90[_0xff104f(0x261)]=_0xb85da0,_0x253d90[_0xff104f(0x240)]=_0x259a06,_0x253d90[_0xff104f(0x1d1)]=_0x110946,_0x253d90['sku']=_0x3b5100,_0x253d90['unit']=_0xd68fa9,_0x253d90[_0xff104f(0x20a)]=_0x33107a,_0x253d90[_0xff104f(0x1e0)]=_0x514f36,_0x253d90['warehouse']=_0x2846e8,_0x253d90[_0xff104f(0x1c8)]=_0x139994,_0x253d90['secondary_code']=_0x4d8380,_0x253d90[_0xff104f(0x1aa)]=_0x542d79,_0x253d90[_0xff104f(0x1df)]=_0x110828,_0x253d90[_0xff104f(0x247)]=_0x38198d,_0x253d90['product_category']=_0x5521f7,_0x253d90['type_products']=_0x3b902d,_0x253d90['sales_category']=_0x2572d7;const _0x2e5bac=await _0x253d90[_0xff104f(0x1ad)]();console[_0xff104f(0x1b0)](_0xff104f(0x1f9),_0x253d90),_0x4ae6c1[_0xff104f(0x21d)]('success','product\x20update\x20successfully'),_0x2d0fce['redirect']('/products/view');}catch(_0x33323c){console['log'](_0x33323c);}}),router['get'](a0_0x442b99(0x1f4),auth,async(_0x214cbd,_0x5ab5e5)=>{const _0xe8813a=a0_0x442b99;try{const {username:_0x4279b7,email:_0x573c35,role:_0x1f3830}=_0x214cbd[_0xe8813a(0x1ac)],_0x5c572f=_0x214cbd[_0xe8813a(0x1ac)],_0x375955=await profile['findOne']({'email':_0x5c572f[_0xe8813a(0x249)]}),_0x3920de=await master_shop[_0xe8813a(0x23b)]();console[_0xe8813a(0x1b0)](_0xe8813a(0x241),_0x3920de);const _0x15785d=_0x214cbd[_0xe8813a(0x1ca)]['id'],_0x3c5176=await product[_0xe8813a(0x24e)](_0x15785d);console['log'](_0xe8813a(0x22d),_0x3c5176);if(_0x3920de[0x0][_0xe8813a(0x254)]==_0xe8813a(0x19f))var _0x2e6257=users['English'];else{if(_0x3920de[0x0][_0xe8813a(0x254)]==_0xe8813a(0x234))var _0x2e6257=users[_0xe8813a(0x234)];else{if(_0x3920de[0x0][_0xe8813a(0x254)]==_0xe8813a(0x229))var _0x2e6257=users[_0xe8813a(0x229)];else{if(_0x3920de[0x0][_0xe8813a(0x254)]==_0xe8813a(0x23c))var _0x2e6257=users[_0xe8813a(0x23c)];else{if(_0x3920de[0x0][_0xe8813a(0x254)]==_0xe8813a(0x262))var _0x2e6257=users['French'];else{if(_0x3920de[0x0][_0xe8813a(0x254)]=='Portuguese\x20(BR)')var _0x2e6257=users[_0xe8813a(0x243)];else{if(_0x3920de[0x0][_0xe8813a(0x254)]==_0xe8813a(0x1af))var _0x2e6257=users[_0xe8813a(0x1af)];else{if(_0x3920de[0x0][_0xe8813a(0x254)]==_0xe8813a(0x23a))var _0x2e6257=users[_0xe8813a(0x219)];}}}}}}}_0x5ab5e5[_0xe8813a(0x1cc)](_0xe8813a(0x238),{'success':_0x214cbd[_0xe8813a(0x21d)](_0xe8813a(0x202)),'errors':_0x214cbd[_0xe8813a(0x21d)](_0xe8813a(0x227)),'role':_0x5c572f,'profile':_0x375955,'alldata':_0x3c5176,'master_shop':_0x3920de,'language':_0x2e6257});}catch(_0x41dd46){console[_0xe8813a(0x1b0)](_0x41dd46);}}),router['get']('/products_export_migrate_file',auth,async(_0x1f7021,_0x39989a)=>{const _0x24a1d5=a0_0x442b99;try{const _0x42758a=new excelJS[(_0x24a1d5(0x220))](),_0x528eaa=_0x42758a[_0x24a1d5(0x1be)](_0x24a1d5(0x1c6));return _0x528eaa[_0x24a1d5(0x1a0)]=[{'header':'Product_Name','key':_0x24a1d5(0x1eb),'width':0xa},{'header':'Brands','key':_0x24a1d5(0x1c0),'width':0xa},{'header':'Units','key':_0x24a1d5(0x21f),'width':0xa},{'header':_0x24a1d5(0x21b),'key':'PSecondaryUnits','width':0xa},{'header':_0x24a1d5(0x1f6),'key':_0x24a1d5(0x211),'width':0xa},{'header':_0x24a1d5(0x225),'key':_0x24a1d5(0x1d7),'width':0xa},{'header':'Secondary_Code','key':_0x24a1d5(0x1d7),'width':0xa},{'header':'Product_Code','key':'ProductCode','width':0xa},{'header':'Category','key':_0x24a1d5(0x1fe),'width':0xa},{'header':'Alert_QTY','key':'PAlQty','width':0xa},{'header':_0x24a1d5(0x1e3),'key':_0x24a1d5(0x259),'width':0xa},{'header':_0x24a1d5(0x251),'key':_0x24a1d5(0x1e9),'width':0xa}],_0x39989a['setHeader'](_0x24a1d5(0x256),_0x24a1d5(0x246)),_0x39989a[_0x24a1d5(0x1cd)](_0x24a1d5(0x1b2),_0x24a1d5(0x22a)),_0x42758a[_0x24a1d5(0x1d0)][_0x24a1d5(0x23f)](_0x39989a)[_0x24a1d5(0x1da)](()=>{const _0x353794=_0x24a1d5;_0x39989a[_0x353794(0x1b6)](0xc8);});}catch(_0x32adce){_0x39989a[_0x24a1d5(0x1b6)](0x190)['send'](_0x32adce);}});const storage1=multer[a0_0x442b99(0x1d5)]({'destination':(_0x3cf3a6,_0x1c79a2,_0x4fc1b3)=>{const _0x4e7c80=a0_0x442b99;_0x4fc1b3(null,_0x4e7c80(0x1b3));},'filename':(_0xc3caa1,_0x5ec381,_0x508d2d)=>{const _0x538c60=a0_0x442b99;_0x508d2d(null,Date['now']()+_0x5ec381[_0x538c60(0x1ae)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x7e67(){const _0x2637e1=['findById','product_docs','categories_edit','Products_category','product_category','filename','language','product_barcode_products','Content-Type','findByIdAndDelete','7HJmLXY','PAlQty','defaultProduct.avif','CODE128','numeric','forEach','file','get','1628011CjabTK','name','French','English\x20(US)','columns','/print_barcode_filter_search/','/view/add_products','data','aggregate','/products/units','/brands/:id','\x20<>\x20','master','redirect','secondary_unit','exports','user','save','originalname','Chinese','log','add_product','Content-Disposition','public/Migration','base64','end','status','now','/categories/:id','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','unit','toString','Units','edit_product','addWorksheet','push','PBrands','Product_Code','toBuffer','4673975DXrfZN','/print_barcode','json','Products','/barcode_filter','primary_code','message','params','145346JflKiE','render','setHeader','concat','sheet_to_json','xlsx','brand','/brands','categories','6RuFHAp','diskStorage','canvas','ProductCode','Products\x20warehouse_data','Enabled','then','addPage','/select_data','$_id','Router','maxStocks','product_code','brands','/print_barcode_filter/','Maximum_Stocks','exceljs','Category','$brand','Brands','single','Prod_Cat','/barcode_data','PName','/products/brands','$product_stock','pdfkit-table','units','../public/language/languages.json','$product_details.product_name','/categories/delete/:id','prod_categ','/barcode/:id','body','max_number_per_units','$product_category','721197hwaQKk','product\x20edit','\x20unit\x20is\x20add\x20successfully','findOne','post','utils','PCat','public/upload','categories\x20data\x20delete\x20successfully','../models/all_models','success','stock','Product_Name','$category','3124208cvlwOY','SheetNames','Products\x20find_data','/units','alertquantity','width','map','/categories','jsbarcode','brand\x20data\x20update\x20successfully','1900558VhsUUL','MaxperUnits','unit\x20data\x20update\x20successfully','express/lib/response','$product_docs','bind','Raw\x20Materials','height','Products\x20master','Arabic','unit\x20data\x20delete\x20successfully','Secondary_Units','/products/view','flash','130sVRESo','PUnits','Workbook','findByIdAndUpdate','product\x20add\x20successfully','secondary_code','217146agVnzo','Primary_Code','categ','errors','/units/:id','German','attachment;\x20filename=Product_Migration_File.xlsx','/print_barcode_single/:id','/products_import_migrate_file','barcode\x20user_id','/view/:id','\x20Edit\x20Successfully','Alert_QTY','readFile','products','multer','Hindi','image','Finished\x20Goods','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','product_barcode','express','Arabic\x20(ae)','find','Spanish','\x20added\x20successfully','Sheets','write','category','barcode\x20Product\x20master','Portuguese\x20(BR)','Portuguese','edit\x20Product\x20master','/units/delete/:id','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','maxProdPerUnit','/products/categories','email','/view','12uvnwlA','English','product_stock'];a0_0x7e67=function(){return _0x2637e1;};return a0_0x7e67();}router[a0_0x442b99(0x1fc)](a0_0x442b99(0x22c),auth,uploadMigrate[a0_0x442b99(0x1e8)]('migrate_product_fule'),async(_0x3d926e,_0x2d157a)=>{const _0x15579a=a0_0x442b99,_0x20b9e1=_0x3d926e['file'][_0x15579a(0x253)],_0x220d7b=await xlsx[_0x15579a(0x231)]('public/Migration/'+_0x20b9e1);let _0x1ed753=_0x220d7b[_0x15579a(0x207)],_0x2d2ef0=xlsx[_0x15579a(0x1fd)][_0x15579a(0x1cf)](_0x220d7b[_0x15579a(0x23e)][_0x1ed753[0x0]]);for(const _0x2bd9b1 of _0x2d2ef0){const _0x3ace8c=_0x2bd9b1[_0x15579a(0x204)],_0x1a18e5=_0x2bd9b1['Brands'],_0x2777ec=_0x2bd9b1[_0x15579a(0x1bc)],_0x2a0294=_0x2bd9b1[_0x15579a(0x21b)],_0x55ae95=_0x2bd9b1[_0x15579a(0x1c1)],_0x38c9d1=_0x2bd9b1[_0x15579a(0x1e5)],_0x41a886=_0x2bd9b1[_0x15579a(0x230)],_0x135a99=_0x2bd9b1[_0x15579a(0x225)],_0x490d50=_0x2bd9b1['Secondary_Code'],_0x5c8659=_0x2bd9b1[_0x15579a(0x1e3)],_0x197d5b=_0x2bd9b1[_0x15579a(0x1f6)],_0x81ae4c=_0x2bd9b1[_0x15579a(0x251)];try{let _0x5c83b0=await categories[_0x15579a(0x1fb)]({'name':_0x38c9d1});if(!_0x5c83b0){const _0x132155=new categories({'name':_0x38c9d1,'products':'0'});_0x5c83b0=await _0x132155[_0x15579a(0x1ad)]();}let _0x3e09e1=await brands[_0x15579a(0x1fb)]({'name':_0x1a18e5});if(!_0x3e09e1){const _0x5192f6=new brands({'name':_0x1a18e5,'products':'0'});_0x3e09e1=await _0x5192f6['save']();}let _0x29a8ff=await units[_0x15579a(0x1fb)]({'name':_0x2777ec,'secondary_unit':_0x2a0294});if(!_0x29a8ff){const _0xcf6e4b=new units({'name':_0x2777ec,'secondary_unit':_0x2a0294,'products':'0'});_0x29a8ff=await _0xcf6e4b[_0x15579a(0x1ad)]();}const _0x4362e1=await product[_0x15579a(0x23b)]({'name':_0x3ace8c,'category':_0x5c83b0['name'],'brand':_0x3e09e1['name'],'secondary_unit':_0x29a8ff['secondary_unit'],'product_code':_0x55ae95});console[_0x15579a(0x1b0)](_0x4362e1['length']+_0x15579a(0x1a7)+_0x5c83b0[_0x15579a(0x261)]+'\x20<>\x20'+_0x3e09e1[_0x15579a(0x261)]+_0x15579a(0x1a7)+_0x29a8ff['secondary_unit']+_0x15579a(0x1a7)+_0x55ae95+_0x15579a(0x1a7)+_0x3ace8c);if(_0x4362e1['length']===0x0){const _0x32b66a=new product({'image':_0x15579a(0x25a),'name':_0x3ace8c,'category':_0x5c83b0[_0x15579a(0x261)],'brand':_0x3e09e1[_0x15579a(0x261)],'unit':_0x29a8ff[_0x15579a(0x261)],'alertquantity':_0x41a886,'product_code':_0x55ae95,'secondary_unit':_0x29a8ff[_0x15579a(0x1aa)],'primary_code':_0x135a99,'secondary_code':_0x490d50,'maxStocks':_0x5c8659,'maxProdPerUnit':_0x197d5b,'product_category':_0x81ae4c}),_0xf8f9ed=await _0x32b66a[_0x15579a(0x1ad)]();_0x5c83b0[_0x15579a(0x232)]=parseInt(_0x5c83b0['products'])+0x1,await _0x5c83b0[_0x15579a(0x1ad)](),_0x3e09e1[_0x15579a(0x232)]=parseInt(_0x3e09e1['products'])+0x1,await _0x3e09e1['save'](),_0x29a8ff[_0x15579a(0x232)]=parseInt(_0x29a8ff['products'])+0x1,await _0x29a8ff[_0x15579a(0x1ad)](),_0x3d926e[_0x15579a(0x21d)](_0x15579a(0x202),_0x3ace8c+_0x15579a(0x23d));}else{console[_0x15579a(0x1b0)](_0x4362e1[0x0]);const _0x1bd45c=_0x4362e1[0x0];_0x1bd45c['category']=_0x5c83b0['name'],_0x1bd45c[_0x15579a(0x1d1)]=_0x3e09e1['name'],_0x1bd45c[_0x15579a(0x1ba)]=_0x29a8ff[_0x15579a(0x261)],_0x1bd45c[_0x15579a(0x20a)]=_0x41a886,_0x1bd45c[_0x15579a(0x1e0)]=_0x55ae95,_0x1bd45c[_0x15579a(0x1aa)]=_0x29a8ff[_0x15579a(0x1aa)],_0x1bd45c[_0x15579a(0x1c8)]=_0x135a99,_0x1bd45c[_0x15579a(0x223)]=_0x490d50,_0x1bd45c['maxStocks']=_0x5c8659,_0x1bd45c[_0x15579a(0x247)]=_0x197d5b,_0x1bd45c[_0x15579a(0x252)]=_0x81ae4c;const _0x5641e4=await _0x1bd45c[_0x15579a(0x1ad)]();_0x3d926e['flash'](_0x15579a(0x202),_0x5641e4['name']+_0x15579a(0x22f));}}catch(_0x2fc486){_0x2d157a[_0x15579a(0x1b6)](0x1f4)['json']({'proderror':_0x2fc486['message'],'aproduct':_0x3ace8c});}}_0x2d157a[_0x15579a(0x1a9)](_0x15579a(0x21c));}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x1dc),auth,async(_0x5ebf17,_0x364a9a)=>{const _0x4b7765=a0_0x442b99;try{console[_0x4b7765(0x1b0)](_0x5ebf17[_0x4b7765(0x1f5)]);const {data_cateory:_0x5b27bf,datachoose:_0x48fcea}=_0x5ebf17[_0x4b7765(0x1f5)];var _0x59c00b;if(_0x48fcea=='prod_categ')_0x59c00b=await product[_0x4b7765(0x1a4)]([{'$group':{'_id':_0x4b7765(0x1f7)}}]);else{if(_0x48fcea==_0x4b7765(0x1e1))_0x59c00b=await product[_0x4b7765(0x1a4)]([{'$match':{'product_category':_0x5b27bf}},{'$group':{'_id':_0x4b7765(0x1e6)}}]);else _0x48fcea==_0x4b7765(0x226)&&(_0x59c00b=await product[_0x4b7765(0x1a4)]([{'$match':{'product_category':_0x5b27bf}},{'$group':{'_id':_0x4b7765(0x205)}}]));}_0x364a9a[_0x4b7765(0x1c5)](_0x59c00b);}catch(_0x2488c2){_0x364a9a['json']({'message':_0x2488c2[_0x4b7765(0x1c9)]});}}),router['post']('/filter_product',auth,async(_0x149cc5,_0x38cedc)=>{const _0x55e749=a0_0x442b99;try{const {data_choosing:_0x528cd4,data_selected:_0x21c212}=_0x149cc5['body'];var _0xaa84e2;if(_0x528cd4==_0x55e749(0x1f3))_0xaa84e2=await product['aggregate']([{'$match':{'product_category':_0x21c212}}]);else{if(_0x528cd4=='brands')_0xaa84e2=await product['aggregate']([{'$match':{'brand':_0x21c212}}]);else _0x528cd4=='categ'&&(_0xaa84e2=await product[_0x55e749(0x1a4)]([{'$match':{'category':_0x21c212}}]));}_0x38cedc[_0x55e749(0x1c5)](_0xaa84e2);}catch(_0x49f9ca){_0x38cedc['json']({'message':_0x49f9ca[_0x55e749(0x1c9)]});}}),router[a0_0x442b99(0x25f)](a0_0x442b99(0x1c4),auth,async(_0x3e1b3e,_0x4973ea)=>{const _0x114b9c=a0_0x442b99,_0x1d8cd7=_0x3e1b3e[_0x114b9c(0x1ac)],_0x5017b9=await profile['findOne']({'email':_0x1d8cd7[_0x114b9c(0x249)]}),_0x2c25eb=await master_shop[_0x114b9c(0x23b)](),_0x3d164b=await product[_0x114b9c(0x23b)]();if(_0x2c25eb[0x0][_0x114b9c(0x254)]=='English\x20(US)')var _0x5b8d19=users['English'];else{if(_0x2c25eb[0x0][_0x114b9c(0x254)]==_0x114b9c(0x234))var _0x5b8d19=users[_0x114b9c(0x234)];else{if(_0x2c25eb[0x0][_0x114b9c(0x254)]==_0x114b9c(0x229))var _0x5b8d19=users[_0x114b9c(0x229)];else{if(_0x2c25eb[0x0][_0x114b9c(0x254)]==_0x114b9c(0x23c))var _0x5b8d19=users[_0x114b9c(0x23c)];else{if(_0x2c25eb[0x0][_0x114b9c(0x254)]==_0x114b9c(0x262))var _0x5b8d19=users['French'];else{if(_0x2c25eb[0x0]['language']==_0x114b9c(0x242))var _0x5b8d19=users[_0x114b9c(0x243)];else{if(_0x2c25eb[0x0]['language']=='Chinese')var _0x5b8d19=users['Chinese'];else{if(_0x2c25eb[0x0][_0x114b9c(0x254)]==_0x114b9c(0x23a))var _0x5b8d19=users[_0x114b9c(0x219)];}}}}}}}_0x4973ea[_0x114b9c(0x1cc)](_0x114b9c(0x255),{'success':_0x3e1b3e[_0x114b9c(0x21d)](_0x114b9c(0x202)),'errors':_0x3e1b3e[_0x114b9c(0x21d)](_0x114b9c(0x227)),'role':_0x1d8cd7,'profile':_0x5017b9,'products':_0x3d164b,'master_shop':_0x2c25eb,'language':_0x5b8d19});}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x1ea),auth,async(_0x128bef,_0x5c1ec0)=>{const _0x1ecf96=await product['find']();_0x5c1ec0['json']({'data':_0x1ecf96});}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x1c7),auth,async(_0x2b3f92,_0x24eec7)=>{const _0x4bb464=a0_0x442b99;try{const {dataProdCat:_0xa61ad4,dataProdIdentity:_0x564f90}=_0x2b3f92['body'];var _0x10e8a7;switch(_0xa61ad4){case'fg':switch(_0x564f90){case _0x4bb464(0x1e7):_0x10e8a7=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x4bb464(0x1dd)}}]);break;case _0x4bb464(0x1e5):_0x10e8a7=await product['aggregate']([{'$match':{'product_category':_0x4bb464(0x236)}},{'$group':{'_id':_0x4bb464(0x205)}},{'$project':{'category':_0x4bb464(0x1dd)}}]);break;}break;case'rm':switch(_0x564f90){case _0x4bb464(0x1e7):_0x10e8a7=await product['aggregate']([{'$match':{'product_category':_0x4bb464(0x216)}},{'$group':{'_id':_0x4bb464(0x1e6)}},{'$project':{'brand':_0x4bb464(0x1dd)}}]);break;case'Category':_0x10e8a7=await product[_0x4bb464(0x1a4)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x4bb464(0x205)}},{'$project':{'category':_0x4bb464(0x1dd)}}]);break;}break;}_0x24eec7['json'](_0x10e8a7);}catch(_0x31e0a8){_0x24eec7[_0x4bb464(0x1c5)]({'message':_0x31e0a8[_0x4bb464(0x1c9)]});}}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x1e2),auth,async(_0x578314,_0x2926c6)=>{const _0x14906f=a0_0x442b99;try{console[_0x14906f(0x1b0)](_0x578314['body']);const {prod_cat:_0x500f4a,identity:_0x9faeeb,valueData:_0x24fb8a,typeofbarcode:_0x2f58cb}=_0x578314['body'];let _0x467e68;switch(_0x500f4a){case'fg':if(_0x9faeeb==_0x14906f(0x1e7))_0x467e68=await product[_0x14906f(0x1a4)]([{'$match':{'product_category':_0x14906f(0x236),'brand':_0x24fb8a}}]);else _0x9faeeb==_0x14906f(0x1e5)&&(_0x467e68=await product[_0x14906f(0x1a4)]([{'$match':{'product_category':_0x14906f(0x236),'category':_0x24fb8a}}]));break;case'rm':if(_0x9faeeb==_0x14906f(0x1e7))_0x467e68=await product[_0x14906f(0x1a4)]([{'$match':{'product_category':_0x14906f(0x216),'brand':_0x24fb8a}}]);else _0x9faeeb==_0x14906f(0x1e5)&&(_0x467e68=await product['aggregate']([{'$match':{'product_category':_0x14906f(0x216),'category':_0x24fb8a}}]));break;}const _0x1c9f43=_0x4daabb=>_0x4daabb*0x48,_0x11aeed={'width':0x3,'height':0x1},_0xdb9c9=new PDFDocument({'margin':_0x1c9f43(0.75),'size':[_0x1c9f43(_0x11aeed[_0x14906f(0x20b)]),_0x1c9f43(_0x11aeed[_0x14906f(0x217)])],'bufferPages':!![]}),_0x4e9fea=_0x467e68['length'];for(let _0x42d7dc=0x0;_0x42d7dc<=_0x4e9fea;_0x42d7dc++){if(_0x42d7dc!=_0x4e9fea){const _0x381dfb=_0x467e68[_0x42d7dc]['name'],_0x45aa46=_0x467e68[_0x42d7dc][_0x14906f(0x1c8)],_0x87c23d=_0x467e68[_0x42d7dc][_0x14906f(0x223)],_0x4b6787=_0x467e68[_0x42d7dc][_0x14906f(0x1e0)];var _0x29faf7;switch(_0x2f58cb){case'1':_0x29faf7=_0x45aa46;break;case'2':_0x29faf7=_0x87c23d;break;case'3':_0x29faf7=_0x4b6787;break;}const _0xb2a891={'width':0xd2,'height':0x64},_0x316f3f={'width':_0x1c9f43(_0x11aeed['width']),'height':_0x1c9f43(_0x11aeed[_0x14906f(0x217)])},_0x214d04=new Canvas();JsBarcode(_0x214d04,_0x29faf7,{'format':_0x14906f(0x25b),'height':_0xb2a891[_0x14906f(0x217)],'displayValue':!![],'text':_0x29faf7});const _0x262913=_0x214d04[_0x14906f(0x1c2)](),_0x1d9812=_0x316f3f[_0x14906f(0x20b)]/_0xb2a891[_0x14906f(0x20b)],_0x1ffec4=_0x316f3f['height']/_0xb2a891['height'],_0x45ddca=Math['min'](_0x1d9812,_0x1ffec4),_0x3423d4=_0xb2a891['width']*_0x45ddca,_0x454566=_0xb2a891[_0x14906f(0x217)]*_0x45ddca,_0xb55126=(_0x316f3f['width']-_0x3423d4)/0x2,_0x316749=(_0x316f3f[_0x14906f(0x217)]-_0x454566)/0x2;_0xdb9c9[_0x14906f(0x235)](_0x262913,_0xb55126,_0x316749,{'width':_0x3423d4,'height':_0x454566}),_0x42d7dc!=_0x4e9fea&&_0xdb9c9['addPage']();}}const _0x415fbf=[];_0xdb9c9['on']('data',_0x415fbf[_0x14906f(0x1bf)][_0x14906f(0x215)](_0x415fbf)),_0xdb9c9['on']('end',()=>{const _0x2366d4=_0x14906f,_0x48bd40=Buffer[_0x2366d4(0x1ce)](_0x415fbf),_0x28328e=_0x48bd40[_0x2366d4(0x1bb)](_0x2366d4(0x1b4));_0x2926c6[_0x2366d4(0x1c5)]({'pdfContent':_0x28328e});}),_0xdb9c9[_0x14906f(0x1b5)]();}catch(_0x22e1af){_0x2926c6[_0x14906f(0x1c5)]({'message':_0x22e1af[_0x14906f(0x1c9)]});}}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x1a1),auth,async(_0x68e256,_0xa1f98d)=>{const _0x2bb3f8=a0_0x442b99;try{console[_0x2bb3f8(0x1b0)](_0x68e256[_0x2bb3f8(0x1f5)]);const {prod_cat:_0x33a59c,identity:_0x7a35,valueData:_0xd381b4}=_0x68e256[_0x2bb3f8(0x1f5)];let _0xe57e23;switch(_0x33a59c){case'fg':if(_0x7a35=='Brands')_0xe57e23=await product['aggregate']([{'$match':{'product_category':_0x2bb3f8(0x236),'brand':_0xd381b4}}]);else _0x7a35==_0x2bb3f8(0x1e5)&&(_0xe57e23=await product['aggregate']([{'$match':{'product_category':_0x2bb3f8(0x236),'category':_0xd381b4}}]));break;case'rm':if(_0x7a35==_0x2bb3f8(0x1e7))_0xe57e23=await product[_0x2bb3f8(0x1a4)]([{'$match':{'product_category':_0x2bb3f8(0x216),'brand':_0xd381b4}}]);else _0x7a35=='Category'&&(_0xe57e23=await product[_0x2bb3f8(0x1a4)]([{'$match':{'product_category':_0x2bb3f8(0x216),'category':_0xd381b4}}]));break;}_0xa1f98d[_0x2bb3f8(0x1c5)]({'data':_0xe57e23});}catch(_0x1fe116){_0xa1f98d[_0x2bb3f8(0x1c5)]({'message':_0x1fe116['message']});}}),router[a0_0x442b99(0x1fc)](a0_0x442b99(0x22b),auth,async(_0x51cdec,_0x4d8c02)=>{const _0x57b6c3=a0_0x442b99;try{const _0x37125e=_0x51cdec[_0x57b6c3(0x1ca)]['id'],{copies:_0x3d688e,typeofbarcode:_0x495320}=_0x51cdec[_0x57b6c3(0x1f5)];var _0x438861=await product[_0x57b6c3(0x24e)](_0x37125e);const _0x6856fd=_0x7f98c1=>_0x7f98c1*0x48,_0x2d0528={'width':0x3,'height':0x1},_0x111d86=new PDFDocument({'margin':_0x6856fd(0.75),'size':[_0x6856fd(_0x2d0528[_0x57b6c3(0x20b)]),_0x6856fd(_0x2d0528[_0x57b6c3(0x217)])],'bufferPages':!![]}),_0x5c5d09=_0x3d688e,_0x53572f=_0x438861[_0x57b6c3(0x261)],_0x3160c4=_0x438861[_0x57b6c3(0x1c8)],_0x5ee2f5=_0x438861[_0x57b6c3(0x223)],_0x4335a8=_0x438861['product_code'];let _0x1bc82e;switch(_0x495320){case'1':_0x1bc82e=_0x3160c4;break;case'2':_0x1bc82e=_0x5ee2f5;break;case'3':_0x1bc82e=_0x4335a8;break;}const _0x893673={'width':0xd2,'height':0x64},_0x3f7dd8={'width':_0x6856fd(_0x2d0528[_0x57b6c3(0x20b)]),'height':_0x6856fd(_0x2d0528['height'])};for(let _0x1b3ba7=0x1;_0x1b3ba7<=_0x5c5d09;_0x1b3ba7++){const _0x4d99cf=new Canvas();JsBarcode(_0x4d99cf,_0x1bc82e,{'format':'CODE128','height':_0x893673[_0x57b6c3(0x217)],'displayValue':!![],'text':_0x1bc82e});const _0x20c5d2=_0x4d99cf[_0x57b6c3(0x1c2)](),_0x18f86f=_0x3f7dd8[_0x57b6c3(0x20b)]/_0x893673[_0x57b6c3(0x20b)],_0x53ae08=_0x3f7dd8[_0x57b6c3(0x217)]/_0x893673['height'],_0x21926d=Math['min'](_0x18f86f,_0x53ae08),_0xb1fd6d=_0x893673['width']*_0x21926d,_0x92f8b9=_0x893673[_0x57b6c3(0x217)]*_0x21926d,_0x150de1=(_0x3f7dd8[_0x57b6c3(0x20b)]-_0xb1fd6d)/0x2,_0x61f59a=(_0x3f7dd8[_0x57b6c3(0x217)]-_0x92f8b9)/0x2;_0x111d86[_0x57b6c3(0x235)](_0x20c5d2,_0x150de1,_0x61f59a,{'width':_0xb1fd6d,'height':_0x92f8b9}),_0x1b3ba7!=_0x5c5d09&&_0x111d86[_0x57b6c3(0x1db)]();}const _0x23a1ed=[];_0x111d86['on'](_0x57b6c3(0x1a3),_0x23a1ed[_0x57b6c3(0x1bf)]['bind'](_0x23a1ed)),_0x111d86['on'](_0x57b6c3(0x1b5),()=>{const _0x44b61e=_0x57b6c3,_0x4243a7=Buffer[_0x44b61e(0x1ce)](_0x23a1ed),_0x1d7b64=_0x4243a7[_0x44b61e(0x1bb)](_0x44b61e(0x1b4));_0x4d8c02[_0x44b61e(0x1c5)]({'pdfContent':_0x1d7b64});}),_0x111d86[_0x57b6c3(0x1b5)]();}catch(_0x408d33){_0x4d8c02[_0x57b6c3(0x1c5)]({'message':_0x408d33[_0x57b6c3(0x1c9)]});}}),module[a0_0x442b99(0x1ab)]=router;