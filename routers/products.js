const a0_0x387651=a0_0x1e2e;(function(_0x4bda9d,_0x16b48a){const _0x35f587=a0_0x1e2e,_0x1108cc=_0x4bda9d();while(!![]){try{const _0x191ea5=parseInt(_0x35f587(0x19d))/0x1*(parseInt(_0x35f587(0x199))/0x2)+-parseInt(_0x35f587(0x18f))/0x3*(parseInt(_0x35f587(0x153))/0x4)+-parseInt(_0x35f587(0x191))/0x5+parseInt(_0x35f587(0x18a))/0x6*(-parseInt(_0x35f587(0x17d))/0x7)+parseInt(_0x35f587(0x1bf))/0x8+-parseInt(_0x35f587(0x200))/0x9*(-parseInt(_0x35f587(0x1d1))/0xa)+-parseInt(_0x35f587(0x16d))/0xb*(-parseInt(_0x35f587(0x19f))/0xc);if(_0x191ea5===_0x16b48a)break;else _0x1108cc['push'](_0x1108cc['shift']());}catch(_0xe9a5ae){_0x1108cc['push'](_0x1108cc['shift']());}}}(a0_0x419f,0xebfdd));const express=require(a0_0x387651(0x202)),res=require(a0_0x387651(0x1f0)),app=express(),router=express[a0_0x387651(0x156)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x387651(0x1e7)),users=require(a0_0x387651(0x19e)),excelJS=require(a0_0x387651(0x183)),xlsx=require('xlsx'),JsBarcode=require(a0_0x387651(0x1bb)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x387651(0x184));function a0_0x419f(){const _0x41b4c4=['/products_import_migrate_file','Spanish','product_category','11rUISxo','max_number_per_units','brands','Arabic\x20(ae)','$category','/brands/:id','toString','prod_categ','Hindi','aggregate','migrate_product_fule','filename','Finished\x20Goods','file','/view','log','5357828gnEobF','\x20brand\x20is\x20add\x20successfully','/view/:id','data','json','product_details.product_name','exceljs','pdfkit-table','brand\x20data\x20delete\x20successfully','originalname','unit','$product_details.product_stock','redirect','12kPuKcU','send','secondary_unit','brand\x20data\x20update\x20successfully','PName','708960wmQGxc','Portuguese\x20(BR)','4306035iPyTJx','\x20Edit\x20Successfully','product_stock','/categories/:id','concat','findByIdAndUpdate','message','Sheets','58vrQbxS','PBrands','/products_export_migrate_file','Secondary_Code','8604FURwKC','../public/language/languages.json','21154428labQWB','Products\x20warehouse_data','$_id','email','product_barcode_products','\x20added\x20successfully','categories','Product_Name','params','products','Content-Type','/print_barcode_filter/','get','height','Arabic','Category','long','French','length','addPage','secondary_code','PCat','/print_barcode','Prod_Cat','Product_Code','$brand','$product_name','public/Migration/','jsbarcode','$product_details.product_name','Content-Disposition','add_product','14543528CMYjum','unit\x20data\x20update\x20successfully','brand','barcode\x20user_id','Enabled','/categories','sku','/brands/delete/:id','\x20categories\x20is\x20add\x20successfully','ProductCode','categ','sheet_to_json','$secondary_unit','findByIdAndDelete','utils','body','maxStocks','Secondary_Units','30NqGVgz','save','Alert_QTY','render','PSecondaryUnits','$product_stock','\x20<>\x20','success','primary_code','/products/categories','readFile','min','/view/add_products','CODE128','maxProdPerUnit','forEach','Brands','Products','Chinese','name','diskStorage','PAlQty','../middleware/auth','unit\x20data\x20delete\x20successfully','base64','product_code','German','/brands','category','post','single','express/lib/response','width','/products/brands','Primary_Code','edit_product','setHeader','toBuffer','edit\x20Product\x20master','map','now','SheetNames','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','findById','alertquantity','\x20unit\x20is\x20add\x20successfully','master','2838690SuNDeB','/print_barcode_single/:id','express','numeric','user','/products/units','PUnits','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','status','/units/:id','findOne','errors','product\x20update\x20successfully','image','Raw\x20Materials','English','/products/view','product_barcode','MaxperUnits','Products\x20master','attachment;\x20filename=Product_Migration_File.xlsx','/units','push','columns','24Jgmtjc','$product_docs','Portuguese','Router','product_docs','language','Units','end','Products_category','stock','find','Products\x20find_data','/units/delete/:id','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','categories\x20data\x20delete\x20successfully','Maximum_Stocks','English\x20(US)','/barcode_filter','Workbook','flash','/filter_product','addWorksheet','product\x20edit'];a0_0x419f=function(){return _0x41b4c4;};return a0_0x419f();}router[a0_0x387651(0x1ab)]('/categories',auth,async(_0x4de9d0,_0x19a683)=>{const _0x4b8d6d=a0_0x387651;try{const {username:_0x491339,email:_0x4a12e,role:_0x4e4f07}=_0x4de9d0['user'],_0xfc482f=_0x4de9d0[_0x4b8d6d(0x204)],_0x5d64ff=await profile[_0x4b8d6d(0x20a)]({'email':_0xfc482f[_0x4b8d6d(0x1a2)]}),_0x454a2a=await master_shop[_0x4b8d6d(0x15d)]();console['log'](_0x4b8d6d(0x1ff),_0x454a2a);const _0x5a21cd=await categories[_0x4b8d6d(0x15d)]();if(_0x454a2a[0x0][_0x4b8d6d(0x158)]==_0x4b8d6d(0x163))var _0x49ebe3=users[_0x4b8d6d(0x20f)];else{if(_0x454a2a[0x0]['language']=='Hindi')var _0x49ebe3=users[_0x4b8d6d(0x175)];else{if(_0x454a2a[0x0][_0x4b8d6d(0x158)]=='German')var _0x49ebe3=users['German'];else{if(_0x454a2a[0x0][_0x4b8d6d(0x158)]==_0x4b8d6d(0x16b))var _0x49ebe3=users['Spanish'];else{if(_0x454a2a[0x0][_0x4b8d6d(0x158)]=='French')var _0x49ebe3=users[_0x4b8d6d(0x1b0)];else{if(_0x454a2a[0x0][_0x4b8d6d(0x158)]==_0x4b8d6d(0x190))var _0x49ebe3=users[_0x4b8d6d(0x155)];else{if(_0x454a2a[0x0]['language']==_0x4b8d6d(0x1e3))var _0x49ebe3=users['Chinese'];else{if(_0x454a2a[0x0][_0x4b8d6d(0x158)]=='Arabic\x20(ae)')var _0x49ebe3=users[_0x4b8d6d(0x1ad)];}}}}}}}_0x19a683[_0x4b8d6d(0x1d4)](_0x4b8d6d(0x1a5),{'success':_0x4de9d0[_0x4b8d6d(0x166)](_0x4b8d6d(0x1d8)),'errors':_0x4de9d0[_0x4b8d6d(0x166)](_0x4b8d6d(0x20b)),'role':_0xfc482f,'profile':_0x5d64ff,'user':_0x5a21cd,'master_shop':_0x454a2a,'language':_0x49ebe3});}catch(_0x2ddb5c){console[_0x4b8d6d(0x17c)](_0x2ddb5c);}}),router['post'](a0_0x387651(0x1c4),auth,async(_0x290845,_0x362aa4)=>{const _0x104e4c=a0_0x387651;try{const {name:_0x3a7d94,products:_0x247fa5}=_0x290845[_0x104e4c(0x1ce)],_0x3b9ebe=new categories({'name':_0x3a7d94,'products':_0x247fa5}),_0x3a62bb=await categories[_0x104e4c(0x20a)]({'name':_0x3a7d94});_0x3a62bb?_0x290845['flash'](_0x104e4c(0x20b),_0x3a7d94+_0x104e4c(0x160)):_0x290845[_0x104e4c(0x166)](_0x104e4c(0x1d8),_0x3a7d94+_0x104e4c(0x1c7));const _0x4eeb76=await _0x3b9ebe[_0x104e4c(0x1d2)]();_0x362aa4[_0x104e4c(0x189)](_0x104e4c(0x1da));}catch(_0x9ac4af){console[_0x104e4c(0x17c)](_0x9ac4af);}}),router[a0_0x387651(0x1ab)](a0_0x387651(0x194),auth,async(_0x21e1ba,_0x5739e3)=>{const _0x14f76f=a0_0x387651;try{const {username:_0x13757f,email:_0x9aeb38,role:_0x24440b}=_0x21e1ba[_0x14f76f(0x204)],_0x58d44d=_0x21e1ba[_0x14f76f(0x204)],_0x4cbeb2=await profile[_0x14f76f(0x20a)]({'email':_0x58d44d[_0x14f76f(0x1a2)]}),_0x31606b=await master_shop[_0x14f76f(0x15d)]();console[_0x14f76f(0x17c)](_0x14f76f(0x1ff),_0x31606b);const _0x3eabad=_0x21e1ba[_0x14f76f(0x1a7)]['id'];console['log'](_0x3eabad);const _0x3940fa=await categories[_0x14f76f(0x1fc)](_0x3eabad);if(_0x31606b[0x0][_0x14f76f(0x158)]==_0x14f76f(0x163))var _0xea26ca=users[_0x14f76f(0x20f)];else{if(_0x31606b[0x0]['language']==_0x14f76f(0x175))var _0xea26ca=users[_0x14f76f(0x175)];else{if(_0x31606b[0x0][_0x14f76f(0x158)]==_0x14f76f(0x1eb))var _0xea26ca=users[_0x14f76f(0x1eb)];else{if(_0x31606b[0x0][_0x14f76f(0x158)]==_0x14f76f(0x16b))var _0xea26ca=users[_0x14f76f(0x16b)];else{if(_0x31606b[0x0][_0x14f76f(0x158)]==_0x14f76f(0x1b0))var _0xea26ca=users[_0x14f76f(0x1b0)];else{if(_0x31606b[0x0][_0x14f76f(0x158)]=='Portuguese\x20(BR)')var _0xea26ca=users[_0x14f76f(0x155)];else{if(_0x31606b[0x0][_0x14f76f(0x158)]=='Chinese')var _0xea26ca=users[_0x14f76f(0x1e3)];else{if(_0x31606b[0x0][_0x14f76f(0x158)]==_0x14f76f(0x170))var _0xea26ca=users[_0x14f76f(0x1ad)];}}}}}}}_0x5739e3[_0x14f76f(0x1d4)](_0x14f76f(0x1a5),{'success':_0x21e1ba[_0x14f76f(0x166)]('success'),'errors':_0x21e1ba[_0x14f76f(0x166)](_0x14f76f(0x20b)),'role':_0x58d44d,'profile':_0x4cbeb2,'master_shop':_0x31606b,'user':_0x3940fa,'language':_0xea26ca});}catch(_0xf92c05){console[_0x14f76f(0x17c)](_0xf92c05);}}),router[a0_0x387651(0x1ee)]('/categories/:id',auth,async(_0xd789e0,_0x58a4d2)=>{const _0x3a7046=a0_0x387651;try{const _0x2e075a=_0xd789e0[_0x3a7046(0x1a7)]['id'],_0x49854d=await categories['findByIdAndUpdate'](_0x2e075a,_0xd789e0[_0x3a7046(0x1ce)]);_0xd789e0[_0x3a7046(0x166)]('success',''+users['categories_edit']),_0x58a4d2[_0x3a7046(0x189)]('/products/categories');}catch(_0x433531){console[_0x3a7046(0x17c)](_0x433531);}}),router[a0_0x387651(0x1ab)]('/categories/delete/:id',auth,async(_0x2386bd,_0x4061e2)=>{const _0x41eed2=a0_0x387651;try{const _0x4a3fa8=_0x2386bd[_0x41eed2(0x1a7)]['id'],_0x366a8d=await categories['findByIdAndDelete'](_0x4a3fa8);_0x2386bd[_0x41eed2(0x166)](_0x41eed2(0x1d8),_0x41eed2(0x161)),_0x4061e2['redirect'](_0x41eed2(0x1da));}catch(_0x376050){console[_0x41eed2(0x17c)](_0x376050);}}),router[a0_0x387651(0x1ab)](a0_0x387651(0x1ec),auth,async(_0x520ac5,_0x8ab188)=>{const _0x265abf=a0_0x387651;try{const {username:_0xcdf893,email:_0x6476e2,role:_0x210d09}=_0x520ac5[_0x265abf(0x204)],_0x8933d3=_0x520ac5[_0x265abf(0x204)],_0x4e7113=await profile[_0x265abf(0x20a)]({'email':_0x8933d3[_0x265abf(0x1a2)]}),_0x1378cf=await master_shop[_0x265abf(0x15d)]();console[_0x265abf(0x17c)]('master',_0x1378cf);const _0x30497e=await brands[_0x265abf(0x15d)]();if(_0x1378cf[0x0][_0x265abf(0x158)]=='English\x20(US)')var _0x11c0c8=users['English'];else{if(_0x1378cf[0x0][_0x265abf(0x158)]==_0x265abf(0x175))var _0x11c0c8=users[_0x265abf(0x175)];else{if(_0x1378cf[0x0][_0x265abf(0x158)]==_0x265abf(0x1eb))var _0x11c0c8=users[_0x265abf(0x1eb)];else{if(_0x1378cf[0x0][_0x265abf(0x158)]==_0x265abf(0x16b))var _0x11c0c8=users[_0x265abf(0x16b)];else{if(_0x1378cf[0x0][_0x265abf(0x158)]==_0x265abf(0x1b0))var _0x11c0c8=users[_0x265abf(0x1b0)];else{if(_0x1378cf[0x0][_0x265abf(0x158)]=='Portuguese\x20(BR)')var _0x11c0c8=users[_0x265abf(0x155)];else{if(_0x1378cf[0x0][_0x265abf(0x158)]==_0x265abf(0x1e3))var _0x11c0c8=users[_0x265abf(0x1e3)];else{if(_0x1378cf[0x0][_0x265abf(0x158)]==_0x265abf(0x170))var _0x11c0c8=users['Arabic'];}}}}}}}_0x8ab188[_0x265abf(0x1d4)]('brands',{'success':_0x520ac5['flash'](_0x265abf(0x1d8)),'errors':_0x520ac5[_0x265abf(0x166)](_0x265abf(0x20b)),'role':_0x8933d3,'profile':_0x4e7113,'master_shop':_0x1378cf,'user':_0x30497e,'language':_0x11c0c8});}catch(_0x3c7b40){console[_0x265abf(0x17c)](_0x3c7b40);}}),router['post'](a0_0x387651(0x1ec),auth,async(_0x3f5c61,_0x227b3e)=>{const _0x17091f=a0_0x387651;try{const {name:_0x3b5971,products:_0x211161}=_0x3f5c61[_0x17091f(0x1ce)],_0x239485=new brands({'name':_0x3b5971,'products':_0x211161}),_0x4c0cfa=await brands[_0x17091f(0x20a)]({'name':_0x3b5971});_0x4c0cfa?_0x3f5c61[_0x17091f(0x166)]('errors',_0x3b5971+_0x17091f(0x207)):_0x3f5c61[_0x17091f(0x166)](_0x17091f(0x1d8),_0x3b5971+_0x17091f(0x17e));const _0x33e796=await _0x239485[_0x17091f(0x1d2)]();_0x227b3e[_0x17091f(0x189)](_0x17091f(0x1f2));}catch(_0x4634f6){console[_0x17091f(0x17c)](_0x4634f6);}}),router[a0_0x387651(0x1ab)](a0_0x387651(0x172),auth,async(_0x49ebac,_0x122fa6)=>{const _0x59c966=a0_0x387651;try{const {username:_0x55c617,email:_0xf03e1d,role:_0x2c677c}=_0x49ebac['user'],_0x30f72d=_0x49ebac[_0x59c966(0x204)],_0x4a93f8=await profile['findOne']({'email':_0x30f72d[_0x59c966(0x1a2)]}),_0x3265e8=await master_shop[_0x59c966(0x15d)]();console[_0x59c966(0x17c)](_0x59c966(0x1ff),_0x3265e8);const _0x3a91b8=_0x49ebac['params']['id'];console[_0x59c966(0x17c)](_0x3a91b8);const _0x3d1112=await brands[_0x59c966(0x1fc)](_0x3a91b8);if(_0x3265e8[0x0][_0x59c966(0x158)]==_0x59c966(0x163))var _0x2db7a3=users['English'];else{if(_0x3265e8[0x0][_0x59c966(0x158)]=='Hindi')var _0x2db7a3=users[_0x59c966(0x175)];else{if(_0x3265e8[0x0][_0x59c966(0x158)]==_0x59c966(0x1eb))var _0x2db7a3=users[_0x59c966(0x1eb)];else{if(_0x3265e8[0x0][_0x59c966(0x158)]==_0x59c966(0x16b))var _0x2db7a3=users['Spanish'];else{if(_0x3265e8[0x0][_0x59c966(0x158)]==_0x59c966(0x1b0))var _0x2db7a3=users[_0x59c966(0x1b0)];else{if(_0x3265e8[0x0][_0x59c966(0x158)]==_0x59c966(0x190))var _0x2db7a3=users['Portuguese'];else{if(_0x3265e8[0x0][_0x59c966(0x158)]==_0x59c966(0x1e3))var _0x2db7a3=users[_0x59c966(0x1e3)];else{if(_0x3265e8[0x0]['language']==_0x59c966(0x170))var _0x2db7a3=users['Arabic'];}}}}}}}_0x122fa6[_0x59c966(0x1d4)](_0x59c966(0x16f),{'success':_0x49ebac[_0x59c966(0x166)](_0x59c966(0x1d8)),'errors':_0x49ebac['flash'](_0x59c966(0x20b)),'role':_0x30f72d,'profile':_0x4a93f8,'master_shop':_0x3265e8,'user':_0x3d1112,'language':_0x2db7a3});}catch(_0x18c9ae){console[_0x59c966(0x17c)](_0x18c9ae);}}),router[a0_0x387651(0x1ee)](a0_0x387651(0x172),auth,async(_0x227bd5,_0x544707)=>{const _0xf1de8=a0_0x387651;try{const _0x4b3161=_0x227bd5[_0xf1de8(0x1a7)]['id'],_0x48e4a1=await brands[_0xf1de8(0x196)](_0x4b3161,_0x227bd5[_0xf1de8(0x1ce)]);_0x227bd5[_0xf1de8(0x166)]('success',_0xf1de8(0x18d)),_0x544707[_0xf1de8(0x189)]('/products/brands');}catch(_0x27c03f){console[_0xf1de8(0x17c)](_0x27c03f);}}),router[a0_0x387651(0x1ab)](a0_0x387651(0x1c6),auth,async(_0x1058f3,_0x194eb8)=>{const _0x3ff2c2=a0_0x387651;try{const _0x275d1e=_0x1058f3[_0x3ff2c2(0x1a7)]['id'],_0x200c33=await brands[_0x3ff2c2(0x1cc)](_0x275d1e);_0x1058f3[_0x3ff2c2(0x166)](_0x3ff2c2(0x1d8),_0x3ff2c2(0x185)),_0x194eb8[_0x3ff2c2(0x189)](_0x3ff2c2(0x1f2));}catch(_0x45132f){console['log'](_0x45132f);}}),router[a0_0x387651(0x1ab)](a0_0x387651(0x215),auth,async(_0x19427a,_0x2b3588)=>{const _0x12ab97=a0_0x387651;try{const {username:_0x643c6d,email:_0x256ac2,role:_0x881095}=_0x19427a['user'],_0x1946d8=_0x19427a['user'],_0xe9a08=await profile[_0x12ab97(0x20a)]({'email':_0x1946d8[_0x12ab97(0x1a2)]}),_0x5b1cc1=await master_shop[_0x12ab97(0x15d)]();console['log'](_0x12ab97(0x1ff),_0x5b1cc1);const _0x421e96=await units['find']();if(_0x5b1cc1[0x0][_0x12ab97(0x158)]==_0x12ab97(0x163))var _0x5a704b=users['English'];else{if(_0x5b1cc1[0x0][_0x12ab97(0x158)]=='Hindi')var _0x5a704b=users[_0x12ab97(0x175)];else{if(_0x5b1cc1[0x0][_0x12ab97(0x158)]==_0x12ab97(0x1eb))var _0x5a704b=users[_0x12ab97(0x1eb)];else{if(_0x5b1cc1[0x0][_0x12ab97(0x158)]==_0x12ab97(0x16b))var _0x5a704b=users['Spanish'];else{if(_0x5b1cc1[0x0][_0x12ab97(0x158)]=='French')var _0x5a704b=users['French'];else{if(_0x5b1cc1[0x0][_0x12ab97(0x158)]==_0x12ab97(0x190))var _0x5a704b=users[_0x12ab97(0x155)];else{if(_0x5b1cc1[0x0][_0x12ab97(0x158)]==_0x12ab97(0x1e3))var _0x5a704b=users[_0x12ab97(0x1e3)];else{if(_0x5b1cc1[0x0][_0x12ab97(0x158)]==_0x12ab97(0x170))var _0x5a704b=users['Arabic'];}}}}}}}_0x2b3588['render']('units',{'success':_0x19427a[_0x12ab97(0x166)](_0x12ab97(0x1d8)),'errors':_0x19427a['flash']('errors'),'role':_0x1946d8,'profile':_0xe9a08,'master_shop':_0x5b1cc1,'user':_0x421e96,'language':_0x5a704b});}catch(_0x31244e){console[_0x12ab97(0x17c)](_0x31244e);}}),router[a0_0x387651(0x1ee)](a0_0x387651(0x215),auth,async(_0x5e07d9,_0x2700c2)=>{const _0x2d0736=a0_0x387651;try{const {name:_0x27b00b,secondary_unit:_0xa27784,products:_0x48a8ad}=_0x5e07d9[_0x2d0736(0x1ce)],_0x545cba=new units({'name':_0x27b00b,'secondary_unit':_0xa27784,'products':_0x48a8ad}),_0x1eec7e=await units[_0x2d0736(0x20a)]({'name':_0x27b00b});_0x1eec7e?_0x5e07d9[_0x2d0736(0x166)](_0x2d0736(0x20b),_0x27b00b+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x5e07d9[_0x2d0736(0x166)]('success',_0x27b00b+_0x2d0736(0x1fe));const _0x1172ff=await _0x545cba[_0x2d0736(0x1d2)]();_0x2700c2[_0x2d0736(0x189)](_0x2d0736(0x205));}catch(_0x51563e){console[_0x2d0736(0x17c)](_0x51563e);}}),router['get'](a0_0x387651(0x209),auth,async(_0x2bcbbc,_0x5b27c3)=>{const _0x3cbddd=a0_0x387651;try{const {username:_0x1055ac,email:_0x57fadb,role:_0x3ae7b3}=_0x2bcbbc[_0x3cbddd(0x204)],_0x34dfb8=_0x2bcbbc[_0x3cbddd(0x204)],_0x28dcb4=await profile['findOne']({'email':_0x34dfb8[_0x3cbddd(0x1a2)]}),_0x15f846=await master_shop[_0x3cbddd(0x15d)]();console[_0x3cbddd(0x17c)](_0x3cbddd(0x1ff),_0x15f846);const _0x5dbbf4=_0x2bcbbc[_0x3cbddd(0x1a7)]['id'],_0x33bed8=await units[_0x3cbddd(0x1fc)](_0x5dbbf4);if(_0x15f846[0x0][_0x3cbddd(0x158)]==_0x3cbddd(0x163))var _0x5b5a80=users[_0x3cbddd(0x20f)];else{if(_0x15f846[0x0][_0x3cbddd(0x158)]==_0x3cbddd(0x175))var _0x5b5a80=users[_0x3cbddd(0x175)];else{if(_0x15f846[0x0][_0x3cbddd(0x158)]=='German')var _0x5b5a80=users['German'];else{if(_0x15f846[0x0][_0x3cbddd(0x158)]==_0x3cbddd(0x16b))var _0x5b5a80=users['Spanish'];else{if(_0x15f846[0x0][_0x3cbddd(0x158)]==_0x3cbddd(0x1b0))var _0x5b5a80=users[_0x3cbddd(0x1b0)];else{if(_0x15f846[0x0][_0x3cbddd(0x158)]=='Portuguese\x20(BR)')var _0x5b5a80=users[_0x3cbddd(0x155)];else{if(_0x15f846[0x0][_0x3cbddd(0x158)]==_0x3cbddd(0x1e3))var _0x5b5a80=users[_0x3cbddd(0x1e3)];else{if(_0x15f846[0x0]['language']=='Arabic\x20(ae)')var _0x5b5a80=users['Arabic'];}}}}}}}_0x5b27c3[_0x3cbddd(0x1d4)]('units',{'success':_0x2bcbbc['flash'](_0x3cbddd(0x1d8)),'errors':_0x2bcbbc['flash'](_0x3cbddd(0x20b)),'role':_0x34dfb8,'profile':_0x28dcb4,'master_shop':_0x15f846,'user':_0x33bed8,'language':_0x5b5a80});}catch(_0x307cc0){console[_0x3cbddd(0x17c)](_0x307cc0);}}),router[a0_0x387651(0x1ee)](a0_0x387651(0x209),auth,async(_0x3bb6b3,_0x4740f2)=>{const _0x9373c7=a0_0x387651;try{const _0x5e0196=_0x3bb6b3[_0x9373c7(0x1a7)]['id'],_0x3998c3=await units[_0x9373c7(0x196)](_0x5e0196,_0x3bb6b3[_0x9373c7(0x1ce)]);_0x3bb6b3[_0x9373c7(0x166)](_0x9373c7(0x1d8),_0x9373c7(0x1c0)),_0x4740f2['redirect'](_0x9373c7(0x205));}catch(_0x1b93bd){console[_0x9373c7(0x17c)](_0x1b93bd);}}),router[a0_0x387651(0x1ab)](a0_0x387651(0x15f),auth,async(_0x57fff5,_0x46e362)=>{const _0x299696=a0_0x387651;try{const _0x1552ed=_0x57fff5[_0x299696(0x1a7)]['id'],_0x3830dc=await units[_0x299696(0x1cc)](_0x1552ed);_0x57fff5[_0x299696(0x166)]('success',_0x299696(0x1e8)),_0x46e362[_0x299696(0x189)](_0x299696(0x205));}catch(_0x2681f2){console[_0x299696(0x17c)](_0x2681f2);}});const storage=multer[a0_0x387651(0x1e5)]({'destination':(_0x44ed6b,_0x12eb4e,_0x294c92)=>{_0x294c92(null,'public/upload');},'filename':(_0x2508b8,_0x226cd3,_0x2123a1)=>{const _0x1f7e33=a0_0x387651;_0x2123a1(null,Date[_0x1f7e33(0x1f9)]()+_0x226cd3[_0x1f7e33(0x186)]);}}),upload=multer({'storage':storage});router[a0_0x387651(0x1ab)](a0_0x387651(0x17b),auth,async(_0x483f8c,_0x209346)=>{const _0x22c2c1=a0_0x387651;try{const {username:_0x5a9d55,email:_0x13494c,role:_0x2ca265}=_0x483f8c[_0x22c2c1(0x204)],_0x48e386=_0x483f8c['user'],_0x40e3b7=await profile['findOne']({'email':_0x48e386[_0x22c2c1(0x1a2)]}),_0x4d0d19={'year':_0x22c2c1(0x203),'month':_0x22c2c1(0x1af),'day':_0x22c2c1(0x203)},_0x4f4232=await master_shop[_0x22c2c1(0x15d)]();console[_0x22c2c1(0x17c)](_0x22c2c1(0x213),_0x4f4232);const _0x39c2bc=await product[_0x22c2c1(0x15d)]();console[_0x22c2c1(0x17c)](_0x22c2c1(0x15e),_0x39c2bc);const _0x5737b5=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$lookup':{'from':_0x22c2c1(0x1a8),'localField':_0x22c2c1(0x182),'foreignField':_0x22c2c1(0x1e4),'as':_0x22c2c1(0x157)}},{'$unwind':_0x22c2c1(0x154)},{'$project':{'product_name':_0x22c2c1(0x1bc),'product_stock':_0x22c2c1(0x188)}},{'$group':{'_id':_0x22c2c1(0x1b9),'product_stock':{'$sum':_0x22c2c1(0x1d6)}}}]);console['log'](_0x22c2c1(0x1a0),_0x5737b5),_0x5737b5[_0x22c2c1(0x1e0)](_0x1e42d4=>{const _0x142524=_0x22c2c1,_0x540f73=_0x39c2bc[_0x142524(0x1f8)](_0x197ee3=>{const _0xc4bf25=_0x142524;_0x197ee3[_0xc4bf25(0x1e4)]==_0x1e42d4['_id']&&(_0x197ee3[_0xc4bf25(0x15c)]=parseInt(_0x197ee3[_0xc4bf25(0x15c)])+parseInt(_0x1e42d4[_0xc4bf25(0x193)]));});}),console['log'](_0x22c2c1(0x15e),_0x39c2bc);if(_0x4f4232[0x0][_0x22c2c1(0x158)]==_0x22c2c1(0x163))var _0x1e957d=users[_0x22c2c1(0x20f)];else{if(_0x4f4232[0x0]['language']=='Hindi')var _0x1e957d=users[_0x22c2c1(0x175)];else{if(_0x4f4232[0x0][_0x22c2c1(0x158)]==_0x22c2c1(0x1eb))var _0x1e957d=users[_0x22c2c1(0x1eb)];else{if(_0x4f4232[0x0][_0x22c2c1(0x158)]==_0x22c2c1(0x16b))var _0x1e957d=users['Spanish'];else{if(_0x4f4232[0x0][_0x22c2c1(0x158)]=='French')var _0x1e957d=users[_0x22c2c1(0x1b0)];else{if(_0x4f4232[0x0]['language']==_0x22c2c1(0x190))var _0x1e957d=users[_0x22c2c1(0x155)];else{if(_0x4f4232[0x0][_0x22c2c1(0x158)]=='Chinese')var _0x1e957d=users[_0x22c2c1(0x1e3)];else{if(_0x4f4232[0x0][_0x22c2c1(0x158)]==_0x22c2c1(0x170))var _0x1e957d=users[_0x22c2c1(0x1ad)];}}}}}}}_0x209346['render']('products',{'success':_0x483f8c[_0x22c2c1(0x166)]('success'),'errors':_0x483f8c[_0x22c2c1(0x166)]('errors'),'alldata':_0x39c2bc,'profile':_0x40e3b7,'master_shop':_0x4f4232,'role':_0x48e386,'product_stock':_0x5737b5,'language':_0x1e957d});}catch(_0xa8b085){console['log'](_0xa8b085);}}),router[a0_0x387651(0x1ab)]('/view/add_products',auth,async(_0x23c80e,_0x4a1fd9)=>{const _0x3c5e97=a0_0x387651;try{const {username:_0x39a3fe,email:_0x15903d,role:_0x46a2f3}=_0x23c80e['user'],_0x7cf815=_0x23c80e[_0x3c5e97(0x204)],_0x40180d=await profile[_0x3c5e97(0x20a)]({'email':_0x7cf815[_0x3c5e97(0x1a2)]}),_0x5c5ff8=await master_shop['find']();console[_0x3c5e97(0x17c)](_0x3c5e97(0x1ff),_0x5c5ff8);const _0x31f95d=await categories['find']({}),_0x206b55=await brands[_0x3c5e97(0x15d)]({}),_0x4c6a63=await units[_0x3c5e97(0x15d)]({}),_0xd5f546=await warehouse[_0x3c5e97(0x15d)]({'status':_0x3c5e97(0x1c3)});if(_0x5c5ff8[0x0]['language']==_0x3c5e97(0x163))var _0x3c3d79=users[_0x3c5e97(0x20f)];else{if(_0x5c5ff8[0x0][_0x3c5e97(0x158)]=='Hindi')var _0x3c3d79=users[_0x3c5e97(0x175)];else{if(_0x5c5ff8[0x0]['language']==_0x3c5e97(0x1eb))var _0x3c3d79=users[_0x3c5e97(0x1eb)];else{if(_0x5c5ff8[0x0][_0x3c5e97(0x158)]=='Spanish')var _0x3c3d79=users[_0x3c5e97(0x16b)];else{if(_0x5c5ff8[0x0][_0x3c5e97(0x158)]==_0x3c5e97(0x1b0))var _0x3c3d79=users[_0x3c5e97(0x1b0)];else{if(_0x5c5ff8[0x0][_0x3c5e97(0x158)]=='Portuguese\x20(BR)')var _0x3c3d79=users[_0x3c5e97(0x155)];else{if(_0x5c5ff8[0x0]['language']==_0x3c5e97(0x1e3))var _0x3c3d79=users['Chinese'];else{if(_0x5c5ff8[0x0][_0x3c5e97(0x158)]==_0x3c5e97(0x170))var _0x3c3d79=users[_0x3c5e97(0x1ad)];}}}}}}}_0x4a1fd9[_0x3c5e97(0x1d4)](_0x3c5e97(0x1be),{'success':_0x23c80e[_0x3c5e97(0x166)](_0x3c5e97(0x1d8)),'errors':_0x23c80e[_0x3c5e97(0x166)]('errors'),'role':_0x7cf815,'profile':_0x40180d,'categories':_0x31f95d,'brands':_0x206b55,'master_shop':_0x5c5ff8,'units':_0x4c6a63,'language':_0x3c3d79,'find_data':_0xd5f546});}catch(_0x7e360f){console['log'](_0x7e360f);}}),router[a0_0x387651(0x1ee)](a0_0x387651(0x1dd),auth,upload[a0_0x387651(0x1ef)]('image'),async(_0xa37c03,_0x2a0dd1)=>{const _0x46c1b8=a0_0x387651;try{const {name:_0x4ec188,category:_0xbe40f4,brand:_0x304499,unit:_0x4c9a33,alertquantity:_0x507c52,stock:_0x2c4338,product_code:_0x10745c,warehouse:_0x523574,primary_ItemCode:_0x4b267f,second_ItemCode:_0x3bb65e,second_unit:_0x22b024,maxPerUnit:_0x553bc5,MaxPerProduct:_0xb5fe47,sales_cat:_0x4954e7,type_prod:_0x1a3cfb}=_0xa37c03[_0x46c1b8(0x1ce)],_0x5963e0=_0xa37c03[_0x46c1b8(0x17a)]?.[_0x46c1b8(0x178)]||'defaultProduct.avif',_0x17aaea=new product({'image':_0x5963e0,'name':_0x4ec188,'category':_0xbe40f4,'brand':_0x304499,'unit':_0x4c9a33,'alertquantity':_0x507c52,'stock':_0x2c4338,'product_code':_0x10745c,'warehouse':_0x523574,'primary_code':_0x4b267f,'secondary_code':_0x3bb65e,'second_unit':_0x22b024,'maxStocks':_0xb5fe47,'maxProdPerUnit':_0x553bc5,'sales_category':_0x4954e7,'type_products':_0x1a3cfb}),_0x1917a0=await _0x17aaea[_0x46c1b8(0x1d2)](),_0x3161bd=await categories[_0x46c1b8(0x20a)]({'name':_0xbe40f4});_0x3161bd[_0x46c1b8(0x1a8)]=parseInt(_0x3161bd[_0x46c1b8(0x1a8)])+0x1,await _0x3161bd['save']();const _0x4e67ad=await brands['findOne']({'name':_0x304499});_0x4e67ad['products']=parseInt(_0x4e67ad['products'])+0x1,await _0x4e67ad['save']();const _0x2e30c7=await units[_0x46c1b8(0x20a)]({'name':_0x4c9a33});_0x2e30c7['products']=parseInt(_0x2e30c7[_0x46c1b8(0x1a8)])+0x1,await _0x2e30c7[_0x46c1b8(0x1d2)](),_0xa37c03[_0x46c1b8(0x166)](_0x46c1b8(0x1d8),'product\x20add\x20successfully'),_0x2a0dd1['redirect']('/products/view');}catch(_0x328a94){console[_0x46c1b8(0x17c)](_0x328a94);}}),router[a0_0x387651(0x1ab)](a0_0x387651(0x17f),auth,async(_0x925899,_0x222461)=>{const _0x3b1f12=a0_0x387651;try{const {username:_0x12b5c0,email:_0x38dcb3,role:_0x2f7371}=_0x925899['user'],_0x533d6e=_0x925899[_0x3b1f12(0x204)],_0x1113e1=await profile[_0x3b1f12(0x20a)]({'email':_0x533d6e[_0x3b1f12(0x1a2)]}),_0x25a72e=await master_shop[_0x3b1f12(0x15d)]();console['log'](_0x3b1f12(0x1f7),_0x25a72e);const _0x237792=_0x925899['params']['id'],_0x5123c2=await product['findById'](_0x237792),_0x1cdc7e=await categories['find']({}),_0xc8315c=await brands['find']({}),_0x1c574e=await units[_0x3b1f12(0x15d)]({}),_0x14602c=await warehouse[_0x3b1f12(0x15d)]({'status':_0x3b1f12(0x1c3)}),_0x474dec=await units['aggregate']([{'$group':{'_id':_0x3b1f12(0x1a1),'secondaryunit':{'$first':_0x3b1f12(0x1cb)}}}]);if(_0x25a72e[0x0]['language']==_0x3b1f12(0x163))var _0x44bb0f=users[_0x3b1f12(0x20f)];else{if(_0x25a72e[0x0]['language']==_0x3b1f12(0x175))var _0x44bb0f=users[_0x3b1f12(0x175)];else{if(_0x25a72e[0x0]['language']==_0x3b1f12(0x1eb))var _0x44bb0f=users[_0x3b1f12(0x1eb)];else{if(_0x25a72e[0x0][_0x3b1f12(0x158)]==_0x3b1f12(0x16b))var _0x44bb0f=users[_0x3b1f12(0x16b)];else{if(_0x25a72e[0x0][_0x3b1f12(0x158)]=='French')var _0x44bb0f=users['French'];else{if(_0x25a72e[0x0][_0x3b1f12(0x158)]=='Portuguese\x20(BR)')var _0x44bb0f=users[_0x3b1f12(0x155)];else{if(_0x25a72e[0x0]['language']=='Chinese')var _0x44bb0f=users[_0x3b1f12(0x1e3)];else{if(_0x25a72e[0x0]['language']==_0x3b1f12(0x170))var _0x44bb0f=users[_0x3b1f12(0x1ad)];}}}}}}}_0x222461[_0x3b1f12(0x1d4)](_0x3b1f12(0x1f4),{'success':_0x925899['flash'](_0x3b1f12(0x1d8)),'errors':_0x925899['flash']('errors'),'role':_0x533d6e,'profile':_0x1113e1,'alldata':_0x5123c2,'categories':_0x1cdc7e,'brands':_0xc8315c,'master_shop':_0x25a72e,'units':_0x1c574e,'secondunit':_0x474dec,'find_data':_0x14602c,'language':_0x44bb0f});}catch(_0x162b3b){console[_0x3b1f12(0x17c)](_0x162b3b);}}),router[a0_0x387651(0x1ee)]('/view/:id',auth,upload[a0_0x387651(0x1ef)](a0_0x387651(0x20d)),async(_0x1d61de,_0x55d092)=>{const _0x1910bb=a0_0x387651;try{const _0x124fb4=_0x1d61de[_0x1910bb(0x1a7)]['id'],_0x1afaf9=await product['findById'](_0x124fb4),{image:_0x442200,name:_0x2743a3,category:_0x1712eb,brand:_0x1d202e,sku:_0x511751,unit:_0x164f38,alertquantity:_0x3cfa8f,product_code:_0x3e4504,warehouse:_0x4597b8,primary_ItemCode:_0x332fbc,second_ItemCode:_0x5653e4,second_unit:_0x1be8e1,maxPerUnit:_0x4ab1c0,MaxPerProduct:_0x450c5e,prod_catdata:_0x3da8a0,type_prod:_0x468acb,sales_cat:_0x193ab0}=_0x1d61de[_0x1910bb(0x1ce)];_0x1d61de['file']&&(_0x1afaf9[_0x1910bb(0x20d)]=_0x1d61de['file'][_0x1910bb(0x178)]);_0x1afaf9[_0x1910bb(0x1e4)]=_0x2743a3,_0x1afaf9[_0x1910bb(0x1ed)]=_0x1712eb,_0x1afaf9[_0x1910bb(0x1c1)]=_0x1d202e,_0x1afaf9[_0x1910bb(0x1c5)]=_0x511751,_0x1afaf9[_0x1910bb(0x187)]=_0x164f38,_0x1afaf9[_0x1910bb(0x1fd)]=_0x3cfa8f,_0x1afaf9[_0x1910bb(0x1ea)]=_0x3e4504,_0x1afaf9['warehouse']=_0x4597b8,_0x1afaf9[_0x1910bb(0x1d9)]=_0x332fbc,_0x1afaf9['secondary_code']=_0x5653e4,_0x1afaf9[_0x1910bb(0x18c)]=_0x1be8e1,_0x1afaf9[_0x1910bb(0x1cf)]=_0x450c5e,_0x1afaf9[_0x1910bb(0x1df)]=_0x4ab1c0,_0x1afaf9[_0x1910bb(0x16c)]=_0x3da8a0,_0x1afaf9['type_products']=_0x468acb,_0x1afaf9['sales_category']=_0x193ab0;const _0x1d8410=await _0x1afaf9[_0x1910bb(0x1d2)]();console[_0x1910bb(0x17c)](_0x1910bb(0x169),_0x1afaf9),_0x1d61de[_0x1910bb(0x166)](_0x1910bb(0x1d8),_0x1910bb(0x20c)),_0x55d092[_0x1910bb(0x189)](_0x1910bb(0x210));}catch(_0x200426){console[_0x1910bb(0x17c)](_0x200426);}}),router['get']('/barcode/:id',auth,async(_0x20b403,_0x54a43a)=>{const _0x2bb167=a0_0x387651;try{const {username:_0x2614f4,email:_0x58bb3f,role:_0x28befc}=_0x20b403[_0x2bb167(0x204)],_0x1d67d6=_0x20b403[_0x2bb167(0x204)],_0x1fbf3c=await profile[_0x2bb167(0x20a)]({'email':_0x1d67d6[_0x2bb167(0x1a2)]}),_0x4aec80=await master_shop['find']();console[_0x2bb167(0x17c)]('barcode\x20Product\x20master',_0x4aec80);const _0x154f82=_0x20b403[_0x2bb167(0x1a7)]['id'],_0x50fe1b=await product[_0x2bb167(0x1fc)](_0x154f82);console[_0x2bb167(0x17c)](_0x2bb167(0x1c2),_0x50fe1b);if(_0x4aec80[0x0][_0x2bb167(0x158)]=='English\x20(US)')var _0x1e9cb5=users[_0x2bb167(0x20f)];else{if(_0x4aec80[0x0]['language']==_0x2bb167(0x175))var _0x1e9cb5=users[_0x2bb167(0x175)];else{if(_0x4aec80[0x0][_0x2bb167(0x158)]==_0x2bb167(0x1eb))var _0x1e9cb5=users['German'];else{if(_0x4aec80[0x0][_0x2bb167(0x158)]=='Spanish')var _0x1e9cb5=users[_0x2bb167(0x16b)];else{if(_0x4aec80[0x0]['language']==_0x2bb167(0x1b0))var _0x1e9cb5=users[_0x2bb167(0x1b0)];else{if(_0x4aec80[0x0]['language']==_0x2bb167(0x190))var _0x1e9cb5=users[_0x2bb167(0x155)];else{if(_0x4aec80[0x0][_0x2bb167(0x158)]=='Chinese')var _0x1e9cb5=users[_0x2bb167(0x1e3)];else{if(_0x4aec80[0x0][_0x2bb167(0x158)]==_0x2bb167(0x170))var _0x1e9cb5=users[_0x2bb167(0x1ad)];}}}}}}}_0x54a43a['render'](_0x2bb167(0x211),{'success':_0x20b403[_0x2bb167(0x166)](_0x2bb167(0x1d8)),'errors':_0x20b403[_0x2bb167(0x166)](_0x2bb167(0x20b)),'role':_0x1d67d6,'profile':_0x1fbf3c,'alldata':_0x50fe1b,'master_shop':_0x4aec80,'language':_0x1e9cb5});}catch(_0x1924e9){console[_0x2bb167(0x17c)](_0x1924e9);}}),router[a0_0x387651(0x1ab)](a0_0x387651(0x19b),auth,async(_0x44ee5e,_0x5f1bb2)=>{const _0x235a1a=a0_0x387651;try{const _0x4aa682=new excelJS[(_0x235a1a(0x165))](),_0x102a12=_0x4aa682[_0x235a1a(0x168)](_0x235a1a(0x1e2));return _0x102a12[_0x235a1a(0x217)]=[{'header':_0x235a1a(0x1a6),'key':_0x235a1a(0x18e),'width':0xa},{'header':_0x235a1a(0x1e1),'key':_0x235a1a(0x19a),'width':0xa},{'header':_0x235a1a(0x159),'key':_0x235a1a(0x206),'width':0xa},{'header':_0x235a1a(0x1d0),'key':_0x235a1a(0x1d5),'width':0xa},{'header':'max_number_per_units','key':_0x235a1a(0x212),'width':0xa},{'header':_0x235a1a(0x1f3),'key':_0x235a1a(0x1c8),'width':0xa},{'header':'Secondary_Code','key':_0x235a1a(0x1c8),'width':0xa},{'header':_0x235a1a(0x1b7),'key':'ProductCode','width':0xa},{'header':_0x235a1a(0x1ae),'key':_0x235a1a(0x1b4),'width':0xa},{'header':_0x235a1a(0x1d3),'key':_0x235a1a(0x1e6),'width':0xa},{'header':_0x235a1a(0x162),'key':_0x235a1a(0x1e6),'width':0xa},{'header':_0x235a1a(0x15b),'key':_0x235a1a(0x1b6),'width':0xa}],_0x5f1bb2[_0x235a1a(0x1f5)](_0x235a1a(0x1a9),_0x235a1a(0x1fb)),_0x5f1bb2[_0x235a1a(0x1f5)](_0x235a1a(0x1bd),_0x235a1a(0x214)),_0x4aa682['xlsx']['write'](_0x5f1bb2)['then'](()=>{const _0x5ae00e=_0x235a1a;_0x5f1bb2[_0x5ae00e(0x208)](0xc8);});}catch(_0x91d9c3){_0x5f1bb2[_0x235a1a(0x208)](0x190)[_0x235a1a(0x18b)](_0x91d9c3);}});function a0_0x1e2e(_0x294044,_0x32d0c1){const _0x419fb3=a0_0x419f();return a0_0x1e2e=function(_0x1e2e93,_0x354fa6){_0x1e2e93=_0x1e2e93-0x153;let _0x33b62a=_0x419fb3[_0x1e2e93];return _0x33b62a;},a0_0x1e2e(_0x294044,_0x32d0c1);}const storage1=multer[a0_0x387651(0x1e5)]({'destination':(_0x43acd0,_0x5c140b,_0x382a53)=>{_0x382a53(null,'public/Migration');},'filename':(_0x1d2dda,_0x46486d,_0x2055f1)=>{const _0xb5b05c=a0_0x387651;_0x2055f1(null,Date[_0xb5b05c(0x1f9)]()+_0x46486d[_0xb5b05c(0x186)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x387651(0x1ee)](a0_0x387651(0x16a),auth,uploadMigrate[a0_0x387651(0x1ef)](a0_0x387651(0x177)),async(_0x4f5680,_0x33693d)=>{const _0x1a9b5d=a0_0x387651,_0x2ca8ea=_0x4f5680[_0x1a9b5d(0x17a)][_0x1a9b5d(0x178)],_0x13daaf=await xlsx[_0x1a9b5d(0x1db)](_0x1a9b5d(0x1ba)+_0x2ca8ea);let _0x46949d=_0x13daaf[_0x1a9b5d(0x1fa)],_0xc29e7e=xlsx[_0x1a9b5d(0x1cd)][_0x1a9b5d(0x1ca)](_0x13daaf[_0x1a9b5d(0x198)][_0x46949d[0x0]]);for(const _0x5270bd of _0xc29e7e){const _0x2b82ac=_0x5270bd[_0x1a9b5d(0x1a6)],_0x18c72d=_0x5270bd['Brands'],_0x50e988=_0x5270bd[_0x1a9b5d(0x159)],_0x4cbf40=_0x5270bd[_0x1a9b5d(0x1d0)],_0xe3f3cb=_0x5270bd[_0x1a9b5d(0x1b7)],_0xbc44f2=_0x5270bd[_0x1a9b5d(0x1ae)],_0x2a7016=_0x5270bd[_0x1a9b5d(0x1d3)],_0x23912f=_0x5270bd[_0x1a9b5d(0x1f3)],_0xb2c7f9=_0x5270bd[_0x1a9b5d(0x19c)],_0x47b8b8=_0x5270bd[_0x1a9b5d(0x162)],_0x3527d4=_0x5270bd[_0x1a9b5d(0x16e)],_0x48186e=_0x5270bd[_0x1a9b5d(0x15b)];try{let _0x15646d=await categories[_0x1a9b5d(0x20a)]({'name':_0xbc44f2});if(!_0x15646d){const _0x5e14a9=new categories({'name':_0xbc44f2,'products':'0'});_0x15646d=await _0x5e14a9[_0x1a9b5d(0x1d2)]();}let _0x29a6fb=await brands[_0x1a9b5d(0x20a)]({'name':_0x18c72d});if(!_0x29a6fb){const _0x3e4a68=new brands({'name':_0x18c72d,'products':'0'});_0x29a6fb=await _0x3e4a68[_0x1a9b5d(0x1d2)]();}let _0x30fb0f=await units[_0x1a9b5d(0x20a)]({'name':_0x50e988,'secondary_unit':_0x4cbf40});if(!_0x30fb0f){const _0x1ccb39=new units({'name':_0x50e988,'secondary_unit':_0x4cbf40,'products':'0'});_0x30fb0f=await _0x1ccb39[_0x1a9b5d(0x1d2)]();}const _0x11c941=await product['find']({'name':_0x2b82ac,'category':_0x15646d[_0x1a9b5d(0x1e4)],'brand':_0x29a6fb[_0x1a9b5d(0x1e4)],'secondary_unit':_0x30fb0f[_0x1a9b5d(0x18c)],'product_code':_0xe3f3cb});console[_0x1a9b5d(0x17c)](_0x11c941[_0x1a9b5d(0x1b1)]+_0x1a9b5d(0x1d7)+_0x15646d[_0x1a9b5d(0x1e4)]+_0x1a9b5d(0x1d7)+_0x29a6fb[_0x1a9b5d(0x1e4)]+_0x1a9b5d(0x1d7)+_0x30fb0f[_0x1a9b5d(0x18c)]+_0x1a9b5d(0x1d7)+_0xe3f3cb+'\x20<>\x20'+_0x2b82ac);if(_0x11c941[_0x1a9b5d(0x1b1)]===0x0){const _0x1ce9b6=new product({'image':'defaultProduct.avif','name':_0x2b82ac,'category':_0x15646d[_0x1a9b5d(0x1e4)],'brand':_0x29a6fb['name'],'unit':_0x30fb0f[_0x1a9b5d(0x1e4)],'alertquantity':_0x2a7016,'product_code':_0xe3f3cb,'secondary_unit':_0x30fb0f['secondary_unit'],'primary_code':_0x23912f,'secondary_code':_0xb2c7f9,'maxStocks':_0x47b8b8,'maxProdPerUnit':_0x3527d4,'product_category':_0x48186e}),_0x5dcd90=await _0x1ce9b6[_0x1a9b5d(0x1d2)]();_0x15646d[_0x1a9b5d(0x1a8)]=parseInt(_0x15646d[_0x1a9b5d(0x1a8)])+0x1,await _0x15646d[_0x1a9b5d(0x1d2)](),_0x29a6fb['products']=parseInt(_0x29a6fb[_0x1a9b5d(0x1a8)])+0x1,await _0x29a6fb['save'](),_0x30fb0f[_0x1a9b5d(0x1a8)]=parseInt(_0x30fb0f[_0x1a9b5d(0x1a8)])+0x1,await _0x30fb0f['save'](),_0x4f5680[_0x1a9b5d(0x166)]('success',_0x2b82ac+_0x1a9b5d(0x1a4));}else{console[_0x1a9b5d(0x17c)](_0x11c941[0x0]);const _0x2e7fc9=_0x11c941[0x0];_0x2e7fc9[_0x1a9b5d(0x1ed)]=_0x15646d[_0x1a9b5d(0x1e4)],_0x2e7fc9[_0x1a9b5d(0x1c1)]=_0x29a6fb[_0x1a9b5d(0x1e4)],_0x2e7fc9['unit']=_0x30fb0f['name'],_0x2e7fc9[_0x1a9b5d(0x1fd)]=_0x2a7016,_0x2e7fc9[_0x1a9b5d(0x1ea)]=_0xe3f3cb,_0x2e7fc9[_0x1a9b5d(0x18c)]=_0x30fb0f[_0x1a9b5d(0x18c)],_0x2e7fc9['primary_code']=_0x23912f,_0x2e7fc9[_0x1a9b5d(0x1b3)]=_0xb2c7f9,_0x2e7fc9[_0x1a9b5d(0x1cf)]=_0x47b8b8,_0x2e7fc9[_0x1a9b5d(0x1df)]=_0x3527d4,_0x2e7fc9['product_category']=_0x48186e;const _0x1d2487=await _0x2e7fc9[_0x1a9b5d(0x1d2)]();_0x4f5680[_0x1a9b5d(0x166)](_0x1a9b5d(0x1d8),_0x1d2487[_0x1a9b5d(0x1e4)]+_0x1a9b5d(0x192));}}catch(_0x13abe9){_0x33693d[_0x1a9b5d(0x208)](0x1f4)['json']({'proderror':_0x13abe9[_0x1a9b5d(0x197)],'aproduct':_0x2b82ac});}}_0x33693d[_0x1a9b5d(0x189)](_0x1a9b5d(0x210));}),router[a0_0x387651(0x1ee)]('/select_data',auth,async(_0x54df6e,_0x58e0df)=>{const _0xffaeed=a0_0x387651;try{console[_0xffaeed(0x17c)](_0x54df6e[_0xffaeed(0x1ce)]);const {data_cateory:_0x5be138,datachoose:_0x542884}=_0x54df6e[_0xffaeed(0x1ce)];var _0x50022b;if(_0x542884==_0xffaeed(0x174))_0x50022b=await product[_0xffaeed(0x176)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x542884==_0xffaeed(0x16f))_0x50022b=await product[_0xffaeed(0x176)]([{'$match':{'product_category':_0x5be138}},{'$group':{'_id':_0xffaeed(0x1b8)}}]);else _0x542884==_0xffaeed(0x1c9)&&(_0x50022b=await product[_0xffaeed(0x176)]([{'$match':{'product_category':_0x5be138}},{'$group':{'_id':_0xffaeed(0x171)}}]));}_0x58e0df[_0xffaeed(0x181)](_0x50022b);}catch(_0x4eaac8){_0x58e0df[_0xffaeed(0x181)]({'message':_0x4eaac8[_0xffaeed(0x197)]});}}),router[a0_0x387651(0x1ee)](a0_0x387651(0x167),auth,async(_0x583220,_0x1c510a)=>{const _0xe522ed=a0_0x387651;try{const {data_choosing:_0x588d5e,data_selected:_0x4f6190}=_0x583220[_0xe522ed(0x1ce)];var _0x382250;if(_0x588d5e==_0xe522ed(0x174))_0x382250=await product[_0xe522ed(0x176)]([{'$match':{'product_category':_0x4f6190}}]);else{if(_0x588d5e==_0xe522ed(0x16f))_0x382250=await product[_0xe522ed(0x176)]([{'$match':{'brand':_0x4f6190}}]);else _0x588d5e=='categ'&&(_0x382250=await product[_0xe522ed(0x176)]([{'$match':{'category':_0x4f6190}}]));}_0x1c510a[_0xe522ed(0x181)](_0x382250);}catch(_0x3bf841){_0x1c510a[_0xe522ed(0x181)]({'message':_0x3bf841[_0xe522ed(0x197)]});}}),router['get'](a0_0x387651(0x1b5),auth,async(_0xe55920,_0x24d7e5)=>{const _0x32dd2e=a0_0x387651,_0x25187f=_0xe55920['user'],_0x45edb1=await profile[_0x32dd2e(0x20a)]({'email':_0x25187f[_0x32dd2e(0x1a2)]}),_0x26ae8f=await master_shop[_0x32dd2e(0x15d)](),_0x112962=await product[_0x32dd2e(0x15d)]();if(_0x26ae8f[0x0]['language']==_0x32dd2e(0x163))var _0x32dd71=users[_0x32dd2e(0x20f)];else{if(_0x26ae8f[0x0]['language']=='Hindi')var _0x32dd71=users[_0x32dd2e(0x175)];else{if(_0x26ae8f[0x0][_0x32dd2e(0x158)]=='German')var _0x32dd71=users['German'];else{if(_0x26ae8f[0x0][_0x32dd2e(0x158)]==_0x32dd2e(0x16b))var _0x32dd71=users[_0x32dd2e(0x16b)];else{if(_0x26ae8f[0x0]['language']==_0x32dd2e(0x1b0))var _0x32dd71=users[_0x32dd2e(0x1b0)];else{if(_0x26ae8f[0x0]['language']==_0x32dd2e(0x190))var _0x32dd71=users[_0x32dd2e(0x155)];else{if(_0x26ae8f[0x0][_0x32dd2e(0x158)]==_0x32dd2e(0x1e3))var _0x32dd71=users[_0x32dd2e(0x1e3)];else{if(_0x26ae8f[0x0][_0x32dd2e(0x158)]==_0x32dd2e(0x170))var _0x32dd71=users['Arabic'];}}}}}}}_0x24d7e5['render'](_0x32dd2e(0x1a3),{'success':_0xe55920[_0x32dd2e(0x166)](_0x32dd2e(0x1d8)),'errors':_0xe55920['flash'](_0x32dd2e(0x20b)),'role':_0x25187f,'profile':_0x45edb1,'products':_0x112962,'master_shop':_0x26ae8f,'language':_0x32dd71});}),router['post']('/barcode_data',auth,async(_0x4e4f37,_0x4575f1)=>{const _0x1f6cc6=a0_0x387651,_0x290706=await product['find']();_0x4575f1[_0x1f6cc6(0x181)]({'data':_0x290706});}),router[a0_0x387651(0x1ee)](a0_0x387651(0x164),auth,async(_0x5bc06e,_0x50c6a7)=>{const _0x472457=a0_0x387651;try{const {dataProdCat:_0x3ce382,dataProdIdentity:_0x5cb553}=_0x5bc06e[_0x472457(0x1ce)];var _0x440ed2;switch(_0x3ce382){case'fg':switch(_0x5cb553){case _0x472457(0x1e1):_0x440ed2=await product[_0x472457(0x176)]([{'$match':{'product_category':_0x472457(0x179)}},{'$group':{'_id':_0x472457(0x1b8)}},{'$project':{'brand':_0x472457(0x1a1)}}]);break;case'Category':_0x440ed2=await product[_0x472457(0x176)]([{'$match':{'product_category':_0x472457(0x179)}},{'$group':{'_id':_0x472457(0x171)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x5cb553){case _0x472457(0x1e1):_0x440ed2=await product[_0x472457(0x176)]([{'$match':{'product_category':_0x472457(0x20e)}},{'$group':{'_id':_0x472457(0x1b8)}},{'$project':{'brand':_0x472457(0x1a1)}}]);break;case _0x472457(0x1ae):_0x440ed2=await product[_0x472457(0x176)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x472457(0x171)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x50c6a7[_0x472457(0x181)](_0x440ed2);}catch(_0x42b30e){_0x50c6a7[_0x472457(0x181)]({'message':_0x42b30e['message']});}}),router['post'](a0_0x387651(0x1aa),auth,async(_0x1737e6,_0x3bb0b5)=>{const _0x5971e5=a0_0x387651;try{console['log'](_0x1737e6[_0x5971e5(0x1ce)]);const {prod_cat:_0x5cec56,identity:_0xef1e2d,valueData:_0x4045f8,typeofbarcode:_0x4123ab}=_0x1737e6[_0x5971e5(0x1ce)];let _0x184a01;switch(_0x5cec56){case'fg':if(_0xef1e2d=='Brands')_0x184a01=await product['aggregate']([{'$match':{'product_category':_0x5971e5(0x179),'brand':_0x4045f8}}]);else _0xef1e2d=='Category'&&(_0x184a01=await product[_0x5971e5(0x176)]([{'$match':{'product_category':_0x5971e5(0x179),'category':_0x4045f8}}]));break;case'rm':if(_0xef1e2d==_0x5971e5(0x1e1))_0x184a01=await product[_0x5971e5(0x176)]([{'$match':{'product_category':_0x5971e5(0x20e),'brand':_0x4045f8}}]);else _0xef1e2d=='Category'&&(_0x184a01=await product[_0x5971e5(0x176)]([{'$match':{'product_category':_0x5971e5(0x20e),'category':_0x4045f8}}]));break;}const _0x1ba151=_0x263ce0=>_0x263ce0*0x48,_0x1642ac={'width':0x3,'height':0x1},_0x1f434d=new PDFDocument({'margin':_0x1ba151(0.75),'size':[_0x1ba151(_0x1642ac[_0x5971e5(0x1f1)]),_0x1ba151(_0x1642ac[_0x5971e5(0x1ac)])],'bufferPages':!![]}),_0x5a00f4=_0x184a01['length'];for(let _0x4c2518=0x0;_0x4c2518<=_0x5a00f4;_0x4c2518++){if(_0x4c2518!=_0x5a00f4){const _0x60b61=_0x184a01[_0x4c2518]['name'],_0x3ab992=_0x184a01[_0x4c2518]['primary_code'],_0x511a5a=_0x184a01[_0x4c2518][_0x5971e5(0x1b3)],_0x57df7c=_0x184a01[_0x4c2518][_0x5971e5(0x1ea)];var _0x499a33;switch(_0x4123ab){case'1':_0x499a33=_0x3ab992;break;case'2':_0x499a33=_0x511a5a;break;case'3':_0x499a33=_0x57df7c;break;}const _0x1ab488={'width':0xd2,'height':0x64},_0xed23c9={'width':_0x1ba151(_0x1642ac[_0x5971e5(0x1f1)]),'height':_0x1ba151(_0x1642ac[_0x5971e5(0x1ac)])},_0x11482d=new Canvas();JsBarcode(_0x11482d,_0x499a33,{'format':_0x5971e5(0x1de),'height':_0x1ab488[_0x5971e5(0x1ac)],'displayValue':!![],'text':_0x499a33});const _0x21c5ff=_0x11482d[_0x5971e5(0x1f6)](),_0x2dd12b=_0xed23c9['width']/_0x1ab488[_0x5971e5(0x1f1)],_0x1aa6ed=_0xed23c9[_0x5971e5(0x1ac)]/_0x1ab488[_0x5971e5(0x1ac)],_0x35b46e=Math['min'](_0x2dd12b,_0x1aa6ed),_0x2fa638=_0x1ab488['width']*_0x35b46e,_0x1f0532=_0x1ab488[_0x5971e5(0x1ac)]*_0x35b46e,_0x3526bd=(_0xed23c9[_0x5971e5(0x1f1)]-_0x2fa638)/0x2,_0x1650b5=(_0xed23c9[_0x5971e5(0x1ac)]-_0x1f0532)/0x2;_0x1f434d['image'](_0x21c5ff,_0x3526bd,_0x1650b5,{'width':_0x2fa638,'height':_0x1f0532}),_0x4c2518!=_0x5a00f4&&_0x1f434d[_0x5971e5(0x1b2)]();}}const _0x3cab09=[];_0x1f434d['on'](_0x5971e5(0x180),_0x3cab09[_0x5971e5(0x216)]['bind'](_0x3cab09)),_0x1f434d['on'](_0x5971e5(0x15a),()=>{const _0x51963d=_0x5971e5,_0x2c0893=Buffer[_0x51963d(0x195)](_0x3cab09),_0x4a0b54=_0x2c0893[_0x51963d(0x173)]('base64');_0x3bb0b5[_0x51963d(0x181)]({'pdfContent':_0x4a0b54});}),_0x1f434d[_0x5971e5(0x15a)]();}catch(_0x5a3a25){_0x3bb0b5[_0x5971e5(0x181)]({'message':_0x5a3a25[_0x5971e5(0x197)]});}}),router[a0_0x387651(0x1ee)]('/print_barcode_filter_search/',auth,async(_0x4e560b,_0x2dc2b3)=>{const _0x502020=a0_0x387651;try{console['log'](_0x4e560b['body']);const {prod_cat:_0x3a4c0e,identity:_0x2c30c6,valueData:_0x15d0cc}=_0x4e560b['body'];let _0x57f51c;switch(_0x3a4c0e){case'fg':if(_0x2c30c6==_0x502020(0x1e1))_0x57f51c=await product['aggregate']([{'$match':{'product_category':_0x502020(0x179),'brand':_0x15d0cc}}]);else _0x2c30c6==_0x502020(0x1ae)&&(_0x57f51c=await product['aggregate']([{'$match':{'product_category':_0x502020(0x179),'category':_0x15d0cc}}]));break;case'rm':if(_0x2c30c6==_0x502020(0x1e1))_0x57f51c=await product[_0x502020(0x176)]([{'$match':{'product_category':_0x502020(0x20e),'brand':_0x15d0cc}}]);else _0x2c30c6==_0x502020(0x1ae)&&(_0x57f51c=await product['aggregate']([{'$match':{'product_category':_0x502020(0x20e),'category':_0x15d0cc}}]));break;}_0x2dc2b3['json']({'data':_0x57f51c});}catch(_0x481c07){_0x2dc2b3['json']({'message':_0x481c07['message']});}}),router[a0_0x387651(0x1ee)](a0_0x387651(0x201),auth,async(_0x5aae40,_0x12b8fe)=>{const _0x4b51e1=a0_0x387651;try{const _0x1c0bf3=_0x5aae40[_0x4b51e1(0x1a7)]['id'],{copies:_0x31554a,typeofbarcode:_0x441a50}=_0x5aae40[_0x4b51e1(0x1ce)];var _0x1309d3=await product[_0x4b51e1(0x1fc)](_0x1c0bf3);const _0x63d651=_0x1cea42=>_0x1cea42*0x48,_0x197627={'width':0x3,'height':0x1},_0x547658=new PDFDocument({'margin':_0x63d651(0.75),'size':[_0x63d651(_0x197627[_0x4b51e1(0x1f1)]),_0x63d651(_0x197627[_0x4b51e1(0x1ac)])],'bufferPages':!![]}),_0x371614=_0x31554a,_0x45a9ac=_0x1309d3[_0x4b51e1(0x1e4)],_0x1abe03=_0x1309d3[_0x4b51e1(0x1d9)],_0x261959=_0x1309d3[_0x4b51e1(0x1b3)],_0x51fb74=_0x1309d3['product_code'];let _0x199c5a;switch(_0x441a50){case'1':_0x199c5a=_0x1abe03;break;case'2':_0x199c5a=_0x261959;break;case'3':_0x199c5a=_0x51fb74;break;}const _0x3031cb={'width':0xd2,'height':0x64},_0x546660={'width':_0x63d651(_0x197627['width']),'height':_0x63d651(_0x197627[_0x4b51e1(0x1ac)])};for(let _0x536da5=0x1;_0x536da5<=_0x371614;_0x536da5++){const _0x5b34d5=new Canvas();JsBarcode(_0x5b34d5,_0x199c5a,{'format':_0x4b51e1(0x1de),'height':_0x3031cb[_0x4b51e1(0x1ac)],'displayValue':!![],'text':_0x199c5a});const _0x546eb6=_0x5b34d5['toBuffer'](),_0x27eba0=_0x546660[_0x4b51e1(0x1f1)]/_0x3031cb[_0x4b51e1(0x1f1)],_0x3dc9ab=_0x546660[_0x4b51e1(0x1ac)]/_0x3031cb[_0x4b51e1(0x1ac)],_0x57c1be=Math[_0x4b51e1(0x1dc)](_0x27eba0,_0x3dc9ab),_0x500f84=_0x3031cb[_0x4b51e1(0x1f1)]*_0x57c1be,_0x3c67d4=_0x3031cb['height']*_0x57c1be,_0x456127=(_0x546660[_0x4b51e1(0x1f1)]-_0x500f84)/0x2,_0x1f9c54=(_0x546660['height']-_0x3c67d4)/0x2;_0x547658[_0x4b51e1(0x20d)](_0x546eb6,_0x456127,_0x1f9c54,{'width':_0x500f84,'height':_0x3c67d4}),_0x536da5!=_0x371614&&_0x547658[_0x4b51e1(0x1b2)]();}const _0x3f66c2=[];_0x547658['on']('data',_0x3f66c2[_0x4b51e1(0x216)]['bind'](_0x3f66c2)),_0x547658['on'](_0x4b51e1(0x15a),()=>{const _0x5aeb2d=_0x4b51e1,_0x3d310b=Buffer[_0x5aeb2d(0x195)](_0x3f66c2),_0x43ea74=_0x3d310b[_0x5aeb2d(0x173)](_0x5aeb2d(0x1e9));_0x12b8fe[_0x5aeb2d(0x181)]({'pdfContent':_0x43ea74});}),_0x547658[_0x4b51e1(0x15a)]();}catch(_0x326cb9){_0x12b8fe[_0x4b51e1(0x181)]({'message':_0x326cb9[_0x4b51e1(0x197)]});}}),module['exports']=router;