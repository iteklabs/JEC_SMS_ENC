const a0_0x32e744=a0_0x5401;(function(_0x273fbc,_0x1c4a51){const _0x29bf92=a0_0x5401,_0x548226=_0x273fbc();while(!![]){try{const _0x1977d8=-parseInt(_0x29bf92(0x18d))/0x1*(-parseInt(_0x29bf92(0xfa))/0x2)+-parseInt(_0x29bf92(0x19d))/0x3+-parseInt(_0x29bf92(0x14b))/0x4*(-parseInt(_0x29bf92(0x14c))/0x5)+parseInt(_0x29bf92(0x128))/0x6+parseInt(_0x29bf92(0x16d))/0x7*(-parseInt(_0x29bf92(0x189))/0x8)+parseInt(_0x29bf92(0x153))/0x9+-parseInt(_0x29bf92(0xf8))/0xa*(parseInt(_0x29bf92(0x10c))/0xb);if(_0x1977d8===_0x1c4a51)break;else _0x548226['push'](_0x548226['shift']());}catch(_0x183f0b){_0x548226['push'](_0x548226['shift']());}}}(a0_0x1702,0x2530d));const express=require(a0_0x32e744(0x17b)),res=require(a0_0x32e744(0xe5)),app=express(),router=express[a0_0x32e744(0xe7)](),multer=require(a0_0x32e744(0x199)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x32e744(0xf4)),auth=require('../middleware/auth'),users=require(a0_0x32e744(0xe6)),excelJS=require(a0_0x32e744(0x159)),xlsx=require(a0_0x32e744(0x169)),JsBarcode=require(a0_0x32e744(0x143)),{Canvas}=require(a0_0x32e744(0x1a3)),PDFDocument=require(a0_0x32e744(0x168));function a0_0x1702(){const _0x41bfa8=['alertquantity','setHeader','\x20<>\x20','Portuguese','product_stock','Finished\x20Goods','numeric','$brand','Alert_QTY','categories\x20data\x20delete\x20successfully','$product_details','edit\x20Product\x20master','1694382iStZDC','product_category','English','/print_barcode','warehouse','Products\x20warehouse_data','categories','English\x20(US)','/categories/delete/:id','maxStocks','\x20Edit\x20Successfully','find','/units','French','then','Products_category','/products/units','concat','brand','public/Migration','findByIdAndUpdate','/view/add_products','single','/filter_product','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','findById','stock','jsbarcode','post','Products','params','$product_name','PCat','type_products','/products/categories','24420trNpZR','70WSrydo','products','bind','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','brand\x20data\x20update\x20successfully','product_details.product_name','diskStorage','487584DxBNxl','secondary_unit','/products/brands','Spanish','\x20unit\x20is\x20add\x20successfully','Raw\x20Materials','exceljs','max_number_per_units','migrate_product_fule','filename','image','redirect','file','public/upload','end','Arabic\x20(ae)','Content-Disposition','add_product','aggregate','Product_Code','/view/:id','pdfkit-table','xlsx','width','Products\x20find_data','defaultProduct.avif','126xqtUQh','$product_docs','product_barcode_products','/categories/:id','Primary_Code','/select_data','primary_code','Category','forEach','Portuguese\x20(BR)','status','name','language','Workbook','express','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','product_code','unit\x20data\x20update\x20successfully','user','PName','send','categ','write','product_barcode','Chinese','addPage','exports','/barcode_filter','67488oJTuaN','units','success','product\x20edit','3161yDKWAX','Brands','secondary_code','now','Sheets','findOne','Secondary_Units','ProductCode','/units/:id','product\x20update\x20successfully','data','unit','multer','min','errors','body','549759QzrEBk','toBuffer','message','$product_details.product_stock','$product_stock','log','canvas','master','brands','edit_product','CODE128','barcode\x20Product\x20master','\x20categories\x20is\x20add\x20successfully','\x20added\x20successfully','public/Migration/','express/lib/response','../public/language/languages.json','Router','Prod_Cat','/print_barcode_filter_search/','$_id','German','PSecondaryUnits','findByIdAndDelete','/products/view','sales_category','render','Enabled','base64','product\x20add\x20successfully','../models/all_models','toString','Units','maxProdPerUnit','1527180ZxUhFY','map','138AaNfAK','Product_Name','email','/brands','barcode\x20user_id','_id','height','originalname','utils','json','Secondary_Code','push','$product_category','/categories','category','Arabic','/brands/delete/:id','readFile','11sugSfo','sheet_to_json','get','flash','prod_categ','PBrands','/view','SheetNames','brand\x20data\x20delete\x20successfully','/brands/:id','/barcode_data','save','Hindi','/print_barcode_single/:id','length','$category'];a0_0x1702=function(){return _0x41bfa8;};return a0_0x1702();}router[a0_0x32e744(0x10e)](a0_0x32e744(0x107),auth,async(_0x510538,_0x47e5d9)=>{const _0x933d2d=a0_0x32e744;try{const {username:_0x1ec4c2,email:_0x372f6b,role:_0x1bb132}=_0x510538['user'],_0x34c27b=_0x510538[_0x933d2d(0x17f)],_0x3b71bc=await profile[_0x933d2d(0x192)]({'email':_0x34c27b['email']}),_0x5be467=await master_shop[_0x933d2d(0x133)]();console[_0x933d2d(0x1a2)]('master',_0x5be467);const _0x4c210e=await categories[_0x933d2d(0x133)]();if(_0x5be467[0x0][_0x933d2d(0x179)]==_0x933d2d(0x12f))var _0x1b4e2c=users['English'];else{if(_0x5be467[0x0]['language']==_0x933d2d(0x118))var _0x1b4e2c=users[_0x933d2d(0x118)];else{if(_0x5be467[0x0]['language']==_0x933d2d(0xeb))var _0x1b4e2c=users[_0x933d2d(0xeb)];else{if(_0x5be467[0x0]['language']==_0x933d2d(0x156))var _0x1b4e2c=users[_0x933d2d(0x156)];else{if(_0x5be467[0x0][_0x933d2d(0x179)]==_0x933d2d(0x135))var _0x1b4e2c=users['French'];else{if(_0x5be467[0x0][_0x933d2d(0x179)]==_0x933d2d(0x176))var _0x1b4e2c=users['Portuguese'];else{if(_0x5be467[0x0]['language']==_0x933d2d(0x185))var _0x1b4e2c=users[_0x933d2d(0x185)];else{if(_0x5be467[0x0]['language']==_0x933d2d(0x162))var _0x1b4e2c=users['Arabic'];}}}}}}}_0x47e5d9[_0x933d2d(0xf0)](_0x933d2d(0x12e),{'success':_0x510538[_0x933d2d(0x10f)](_0x933d2d(0x18b)),'errors':_0x510538['flash'](_0x933d2d(0x19b)),'role':_0x34c27b,'profile':_0x3b71bc,'user':_0x4c210e,'master_shop':_0x5be467,'language':_0x1b4e2c});}catch(_0x41c5d2){console[_0x933d2d(0x1a2)](_0x41c5d2);}}),router[a0_0x32e744(0x144)](a0_0x32e744(0x107),auth,async(_0x1718cb,_0x3f3fca)=>{const _0x195383=a0_0x32e744;try{const {name:_0x70e500,products:_0xa50f84}=_0x1718cb['body'],_0x2df98d=new categories({'name':_0x70e500,'products':_0xa50f84}),_0x3c03ec=await categories['findOne']({'name':_0x70e500});_0x3c03ec?_0x1718cb[_0x195383(0x10f)]('errors',_0x70e500+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x1718cb['flash']('success',_0x70e500+_0x195383(0xe2));const _0x3a238f=await _0x2df98d[_0x195383(0x117)]();_0x3f3fca[_0x195383(0x15e)](_0x195383(0x14a));}catch(_0x345502){console[_0x195383(0x1a2)](_0x345502);}}),router[a0_0x32e744(0x10e)](a0_0x32e744(0x170),auth,async(_0x295845,_0x35ecf9)=>{const _0x1d99fb=a0_0x32e744;try{const {username:_0x1c0bc1,email:_0x47263a,role:_0x464370}=_0x295845[_0x1d99fb(0x17f)],_0x567238=_0x295845['user'],_0x46b007=await profile[_0x1d99fb(0x192)]({'email':_0x567238[_0x1d99fb(0xfc)]}),_0x448c35=await master_shop[_0x1d99fb(0x133)]();console[_0x1d99fb(0x1a2)](_0x1d99fb(0x1a4),_0x448c35);const _0x9821e4=_0x295845[_0x1d99fb(0x146)]['id'];console[_0x1d99fb(0x1a2)](_0x9821e4);const _0x3750bf=await categories[_0x1d99fb(0x141)](_0x9821e4);if(_0x448c35[0x0]['language']==_0x1d99fb(0x12f))var _0x2f8b1f=users[_0x1d99fb(0x12a)];else{if(_0x448c35[0x0]['language']=='Hindi')var _0x2f8b1f=users['Hindi'];else{if(_0x448c35[0x0]['language']==_0x1d99fb(0xeb))var _0x2f8b1f=users[_0x1d99fb(0xeb)];else{if(_0x448c35[0x0][_0x1d99fb(0x179)]=='Spanish')var _0x2f8b1f=users['Spanish'];else{if(_0x448c35[0x0][_0x1d99fb(0x179)]==_0x1d99fb(0x135))var _0x2f8b1f=users[_0x1d99fb(0x135)];else{if(_0x448c35[0x0][_0x1d99fb(0x179)]==_0x1d99fb(0x176))var _0x2f8b1f=users[_0x1d99fb(0x11f)];else{if(_0x448c35[0x0][_0x1d99fb(0x179)]=='Chinese')var _0x2f8b1f=users[_0x1d99fb(0x185)];else{if(_0x448c35[0x0]['language']=='Arabic\x20(ae)')var _0x2f8b1f=users['Arabic'];}}}}}}}_0x35ecf9[_0x1d99fb(0xf0)](_0x1d99fb(0x12e),{'success':_0x295845['flash'](_0x1d99fb(0x18b)),'errors':_0x295845[_0x1d99fb(0x10f)]('errors'),'role':_0x567238,'profile':_0x46b007,'master_shop':_0x448c35,'user':_0x3750bf,'language':_0x2f8b1f});}catch(_0x590072){console['log'](_0x590072);}}),router['post'](a0_0x32e744(0x170),auth,async(_0x34ed24,_0x4432d3)=>{const _0x34eabe=a0_0x32e744;try{const _0x16111f=_0x34ed24['params']['id'],_0x7f707=await categories[_0x34eabe(0x13c)](_0x16111f,_0x34ed24[_0x34eabe(0x19c)]);_0x34ed24[_0x34eabe(0x10f)](_0x34eabe(0x18b),''+users['categories_edit']),_0x4432d3[_0x34eabe(0x15e)](_0x34eabe(0x14a));}catch(_0x31d754){console['log'](_0x31d754);}}),router[a0_0x32e744(0x10e)](a0_0x32e744(0x130),auth,async(_0x13a078,_0xd773b7)=>{const _0x1253ce=a0_0x32e744;try{const _0x13aba4=_0x13a078[_0x1253ce(0x146)]['id'],_0x20fb35=await categories[_0x1253ce(0xed)](_0x13aba4);_0x13a078['flash'](_0x1253ce(0x18b),_0x1253ce(0x125)),_0xd773b7[_0x1253ce(0x15e)](_0x1253ce(0x14a));}catch(_0xee82f4){console['log'](_0xee82f4);}}),router[a0_0x32e744(0x10e)](a0_0x32e744(0xfd),auth,async(_0x592cba,_0x1d75f4)=>{const _0x16782d=a0_0x32e744;try{const {username:_0x36a875,email:_0x887dc3,role:_0x1d8ed3}=_0x592cba[_0x16782d(0x17f)],_0xd3d824=_0x592cba['user'],_0x5b9932=await profile[_0x16782d(0x192)]({'email':_0xd3d824[_0x16782d(0xfc)]}),_0x2c99f2=await master_shop[_0x16782d(0x133)]();console['log'](_0x16782d(0x1a4),_0x2c99f2);const _0x29077a=await brands[_0x16782d(0x133)]();if(_0x2c99f2[0x0][_0x16782d(0x179)]=='English\x20(US)')var _0x4b9b58=users[_0x16782d(0x12a)];else{if(_0x2c99f2[0x0][_0x16782d(0x179)]=='Hindi')var _0x4b9b58=users[_0x16782d(0x118)];else{if(_0x2c99f2[0x0][_0x16782d(0x179)]==_0x16782d(0xeb))var _0x4b9b58=users['German'];else{if(_0x2c99f2[0x0][_0x16782d(0x179)]==_0x16782d(0x156))var _0x4b9b58=users[_0x16782d(0x156)];else{if(_0x2c99f2[0x0][_0x16782d(0x179)]==_0x16782d(0x135))var _0x4b9b58=users[_0x16782d(0x135)];else{if(_0x2c99f2[0x0][_0x16782d(0x179)]=='Portuguese\x20(BR)')var _0x4b9b58=users[_0x16782d(0x11f)];else{if(_0x2c99f2[0x0][_0x16782d(0x179)]==_0x16782d(0x185))var _0x4b9b58=users[_0x16782d(0x185)];else{if(_0x2c99f2[0x0][_0x16782d(0x179)]==_0x16782d(0x162))var _0x4b9b58=users['Arabic'];}}}}}}}_0x1d75f4[_0x16782d(0xf0)](_0x16782d(0x1a5),{'success':_0x592cba['flash'](_0x16782d(0x18b)),'errors':_0x592cba[_0x16782d(0x10f)](_0x16782d(0x19b)),'role':_0xd3d824,'profile':_0x5b9932,'master_shop':_0x2c99f2,'user':_0x29077a,'language':_0x4b9b58});}catch(_0x298281){console['log'](_0x298281);}}),router[a0_0x32e744(0x144)]('/brands',auth,async(_0x427ebc,_0x126865)=>{const _0x530e55=a0_0x32e744;try{const {name:_0x23087f,products:_0x599a6c}=_0x427ebc[_0x530e55(0x19c)],_0x4111b7=new brands({'name':_0x23087f,'products':_0x599a6c}),_0x15a563=await brands['findOne']({'name':_0x23087f});_0x15a563?_0x427ebc[_0x530e55(0x10f)](_0x530e55(0x19b),_0x23087f+_0x530e55(0x140)):_0x427ebc[_0x530e55(0x10f)](_0x530e55(0x18b),_0x23087f+'\x20brand\x20is\x20add\x20successfully');const _0x17dcf7=await _0x4111b7[_0x530e55(0x117)]();_0x126865[_0x530e55(0x15e)](_0x530e55(0x155));}catch(_0x5d890d){console[_0x530e55(0x1a2)](_0x5d890d);}}),router[a0_0x32e744(0x10e)](a0_0x32e744(0x115),auth,async(_0x56f0cf,_0x4fe133)=>{const _0x3edc29=a0_0x32e744;try{const {username:_0x2577f3,email:_0x2a4808,role:_0x49b315}=_0x56f0cf[_0x3edc29(0x17f)],_0x3fd240=_0x56f0cf[_0x3edc29(0x17f)],_0x4b4916=await profile[_0x3edc29(0x192)]({'email':_0x3fd240[_0x3edc29(0xfc)]}),_0x509a21=await master_shop[_0x3edc29(0x133)]();console[_0x3edc29(0x1a2)](_0x3edc29(0x1a4),_0x509a21);const _0x57cdf7=_0x56f0cf[_0x3edc29(0x146)]['id'];console['log'](_0x57cdf7);const _0x2088a6=await brands['findById'](_0x57cdf7);if(_0x509a21[0x0][_0x3edc29(0x179)]==_0x3edc29(0x12f))var _0x2597bd=users[_0x3edc29(0x12a)];else{if(_0x509a21[0x0][_0x3edc29(0x179)]=='Hindi')var _0x2597bd=users['Hindi'];else{if(_0x509a21[0x0][_0x3edc29(0x179)]==_0x3edc29(0xeb))var _0x2597bd=users[_0x3edc29(0xeb)];else{if(_0x509a21[0x0][_0x3edc29(0x179)]==_0x3edc29(0x156))var _0x2597bd=users['Spanish'];else{if(_0x509a21[0x0]['language']=='French')var _0x2597bd=users[_0x3edc29(0x135)];else{if(_0x509a21[0x0][_0x3edc29(0x179)]==_0x3edc29(0x176))var _0x2597bd=users[_0x3edc29(0x11f)];else{if(_0x509a21[0x0][_0x3edc29(0x179)]==_0x3edc29(0x185))var _0x2597bd=users[_0x3edc29(0x185)];else{if(_0x509a21[0x0][_0x3edc29(0x179)]==_0x3edc29(0x162))var _0x2597bd=users[_0x3edc29(0x109)];}}}}}}}_0x4fe133[_0x3edc29(0xf0)](_0x3edc29(0x1a5),{'success':_0x56f0cf[_0x3edc29(0x10f)]('success'),'errors':_0x56f0cf[_0x3edc29(0x10f)](_0x3edc29(0x19b)),'role':_0x3fd240,'profile':_0x4b4916,'master_shop':_0x509a21,'user':_0x2088a6,'language':_0x2597bd});}catch(_0x5b45b4){console['log'](_0x5b45b4);}}),router['post'](a0_0x32e744(0x115),auth,async(_0x2a752c,_0x4aa66b)=>{const _0x166414=a0_0x32e744;try{const _0x4b5a7f=_0x2a752c['params']['id'],_0x12b9b1=await brands['findByIdAndUpdate'](_0x4b5a7f,_0x2a752c['body']);_0x2a752c[_0x166414(0x10f)]('success',_0x166414(0x150)),_0x4aa66b['redirect']('/products/brands');}catch(_0x33ac76){console[_0x166414(0x1a2)](_0x33ac76);}}),router[a0_0x32e744(0x10e)](a0_0x32e744(0x10a),auth,async(_0x5747d8,_0x1e9826)=>{const _0x1e14f3=a0_0x32e744;try{const _0x15c7de=_0x5747d8[_0x1e14f3(0x146)]['id'],_0x32f535=await brands['findByIdAndDelete'](_0x15c7de);_0x5747d8['flash'](_0x1e14f3(0x18b),_0x1e14f3(0x114)),_0x1e9826['redirect'](_0x1e14f3(0x155));}catch(_0x5c007b){console[_0x1e14f3(0x1a2)](_0x5c007b);}}),router[a0_0x32e744(0x10e)](a0_0x32e744(0x134),auth,async(_0x47502b,_0x29d7a9)=>{const _0x151368=a0_0x32e744;try{const {username:_0x321643,email:_0x5cc410,role:_0x2cbb60}=_0x47502b['user'],_0x816292=_0x47502b[_0x151368(0x17f)],_0x133556=await profile[_0x151368(0x192)]({'email':_0x816292[_0x151368(0xfc)]}),_0x5c6806=await master_shop[_0x151368(0x133)]();console['log'](_0x151368(0x1a4),_0x5c6806);const _0xf1a10=await units[_0x151368(0x133)]();if(_0x5c6806[0x0][_0x151368(0x179)]==_0x151368(0x12f))var _0x1c64cb=users['English'];else{if(_0x5c6806[0x0][_0x151368(0x179)]=='Hindi')var _0x1c64cb=users[_0x151368(0x118)];else{if(_0x5c6806[0x0][_0x151368(0x179)]==_0x151368(0xeb))var _0x1c64cb=users[_0x151368(0xeb)];else{if(_0x5c6806[0x0][_0x151368(0x179)]==_0x151368(0x156))var _0x1c64cb=users[_0x151368(0x156)];else{if(_0x5c6806[0x0][_0x151368(0x179)]==_0x151368(0x135))var _0x1c64cb=users['French'];else{if(_0x5c6806[0x0][_0x151368(0x179)]=='Portuguese\x20(BR)')var _0x1c64cb=users[_0x151368(0x11f)];else{if(_0x5c6806[0x0]['language']=='Chinese')var _0x1c64cb=users[_0x151368(0x185)];else{if(_0x5c6806[0x0][_0x151368(0x179)]==_0x151368(0x162))var _0x1c64cb=users[_0x151368(0x109)];}}}}}}}_0x29d7a9[_0x151368(0xf0)](_0x151368(0x18a),{'success':_0x47502b[_0x151368(0x10f)]('success'),'errors':_0x47502b[_0x151368(0x10f)](_0x151368(0x19b)),'role':_0x816292,'profile':_0x133556,'master_shop':_0x5c6806,'user':_0xf1a10,'language':_0x1c64cb});}catch(_0x248565){console[_0x151368(0x1a2)](_0x248565);}}),router[a0_0x32e744(0x144)](a0_0x32e744(0x134),auth,async(_0x4bdbdc,_0x597c74)=>{const _0x4b940e=a0_0x32e744;try{const {name:_0x518b7f,secondary_unit:_0x649702,products:_0x41633f}=_0x4bdbdc['body'],_0x3a5708=new units({'name':_0x518b7f,'secondary_unit':_0x649702,'products':_0x41633f}),_0x49bdc2=await units[_0x4b940e(0x192)]({'name':_0x518b7f});_0x49bdc2?_0x4bdbdc['flash'](_0x4b940e(0x19b),_0x518b7f+_0x4b940e(0x14f)):_0x4bdbdc[_0x4b940e(0x10f)](_0x4b940e(0x18b),_0x518b7f+_0x4b940e(0x157));const _0x4842cb=await _0x3a5708[_0x4b940e(0x117)]();_0x597c74[_0x4b940e(0x15e)](_0x4b940e(0x138));}catch(_0xb3d48c){console['log'](_0xb3d48c);}}),router['get'](a0_0x32e744(0x195),auth,async(_0x47e95f,_0x209ff4)=>{const _0x60e234=a0_0x32e744;try{const {username:_0x2a3df5,email:_0x230042,role:_0x44de3d}=_0x47e95f[_0x60e234(0x17f)],_0x3a3928=_0x47e95f['user'],_0x21d8af=await profile[_0x60e234(0x192)]({'email':_0x3a3928[_0x60e234(0xfc)]}),_0x210b93=await master_shop[_0x60e234(0x133)]();console['log'](_0x60e234(0x1a4),_0x210b93);const _0x448096=_0x47e95f[_0x60e234(0x146)]['id'],_0x47fee1=await units[_0x60e234(0x141)](_0x448096);if(_0x210b93[0x0][_0x60e234(0x179)]==_0x60e234(0x12f))var _0x3594d0=users[_0x60e234(0x12a)];else{if(_0x210b93[0x0][_0x60e234(0x179)]==_0x60e234(0x118))var _0x3594d0=users[_0x60e234(0x118)];else{if(_0x210b93[0x0][_0x60e234(0x179)]==_0x60e234(0xeb))var _0x3594d0=users['German'];else{if(_0x210b93[0x0][_0x60e234(0x179)]==_0x60e234(0x156))var _0x3594d0=users[_0x60e234(0x156)];else{if(_0x210b93[0x0][_0x60e234(0x179)]==_0x60e234(0x135))var _0x3594d0=users[_0x60e234(0x135)];else{if(_0x210b93[0x0]['language']==_0x60e234(0x176))var _0x3594d0=users[_0x60e234(0x11f)];else{if(_0x210b93[0x0]['language']==_0x60e234(0x185))var _0x3594d0=users[_0x60e234(0x185)];else{if(_0x210b93[0x0][_0x60e234(0x179)]==_0x60e234(0x162))var _0x3594d0=users['Arabic'];}}}}}}}_0x209ff4[_0x60e234(0xf0)](_0x60e234(0x18a),{'success':_0x47e95f[_0x60e234(0x10f)]('success'),'errors':_0x47e95f[_0x60e234(0x10f)]('errors'),'role':_0x3a3928,'profile':_0x21d8af,'master_shop':_0x210b93,'user':_0x47fee1,'language':_0x3594d0});}catch(_0x43ebf5){console['log'](_0x43ebf5);}}),router[a0_0x32e744(0x144)](a0_0x32e744(0x195),auth,async(_0x4d8a76,_0x39c014)=>{const _0x5498de=a0_0x32e744;try{const _0x1aa1a2=_0x4d8a76[_0x5498de(0x146)]['id'],_0x499d9f=await units['findByIdAndUpdate'](_0x1aa1a2,_0x4d8a76[_0x5498de(0x19c)]);_0x4d8a76[_0x5498de(0x10f)](_0x5498de(0x18b),_0x5498de(0x17e)),_0x39c014[_0x5498de(0x15e)]('/products/units');}catch(_0x254139){console[_0x5498de(0x1a2)](_0x254139);}}),router[a0_0x32e744(0x10e)]('/units/delete/:id',auth,async(_0x56d0d7,_0x41db35)=>{const _0x3bac64=a0_0x32e744;try{const _0x4eab87=_0x56d0d7[_0x3bac64(0x146)]['id'],_0x5827bf=await units[_0x3bac64(0xed)](_0x4eab87);_0x56d0d7[_0x3bac64(0x10f)](_0x3bac64(0x18b),'unit\x20data\x20delete\x20successfully'),_0x41db35[_0x3bac64(0x15e)](_0x3bac64(0x138));}catch(_0x42dd71){console[_0x3bac64(0x1a2)](_0x42dd71);}});const storage=multer['diskStorage']({'destination':(_0x4f0805,_0x42d38a,_0x5f5024)=>{const _0x188f18=a0_0x32e744;_0x5f5024(null,_0x188f18(0x160));},'filename':(_0x457ee2,_0x7819e1,_0x48ad79)=>{const _0x357008=a0_0x32e744;_0x48ad79(null,Date['now']()+_0x7819e1[_0x357008(0x101)]);}}),upload=multer({'storage':storage});router['get'](a0_0x32e744(0x112),auth,async(_0x2e827a,_0x2d5e80)=>{const _0x1e9105=a0_0x32e744;try{const {username:_0x44cacd,email:_0x254189,role:_0x3af679}=_0x2e827a[_0x1e9105(0x17f)],_0x1c2d10=_0x2e827a['user'],_0x57384e=await profile[_0x1e9105(0x192)]({'email':_0x1c2d10['email']}),_0x4c2a44={'year':_0x1e9105(0x122),'month':'long','day':_0x1e9105(0x122)},_0x44734a=await master_shop['find']();console[_0x1e9105(0x1a2)]('Products\x20master',_0x44734a);const _0x45327e=await product[_0x1e9105(0x133)]();console['log'](_0x1e9105(0x16b),_0x45327e);const _0x27a66b=await warehouse[_0x1e9105(0x165)]([{'$unwind':_0x1e9105(0x126)},{'$lookup':{'from':_0x1e9105(0x14d),'localField':_0x1e9105(0x151),'foreignField':'name','as':'product_docs'}},{'$unwind':_0x1e9105(0x16e)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x1e9105(0x1a0)}},{'$group':{'_id':_0x1e9105(0x147),'product_stock':{'$sum':_0x1e9105(0x1a1)}}}]);console[_0x1e9105(0x1a2)](_0x1e9105(0x12d),_0x27a66b),_0x27a66b[_0x1e9105(0x175)](_0x3bf607=>{const _0x294a72=_0x1e9105,_0x3c8e8f=_0x45327e[_0x294a72(0xf9)](_0x4b82e4=>{const _0x2103bc=_0x294a72;_0x4b82e4[_0x2103bc(0x178)]==_0x3bf607[_0x2103bc(0xff)]&&(_0x4b82e4[_0x2103bc(0x142)]=parseInt(_0x4b82e4['stock'])+parseInt(_0x3bf607[_0x2103bc(0x120)]));});}),console[_0x1e9105(0x1a2)](_0x1e9105(0x16b),_0x45327e);if(_0x44734a[0x0]['language']==_0x1e9105(0x12f))var _0x1207f4=users[_0x1e9105(0x12a)];else{if(_0x44734a[0x0][_0x1e9105(0x179)]==_0x1e9105(0x118))var _0x1207f4=users[_0x1e9105(0x118)];else{if(_0x44734a[0x0][_0x1e9105(0x179)]==_0x1e9105(0xeb))var _0x1207f4=users[_0x1e9105(0xeb)];else{if(_0x44734a[0x0][_0x1e9105(0x179)]==_0x1e9105(0x156))var _0x1207f4=users[_0x1e9105(0x156)];else{if(_0x44734a[0x0]['language']=='French')var _0x1207f4=users[_0x1e9105(0x135)];else{if(_0x44734a[0x0]['language']==_0x1e9105(0x176))var _0x1207f4=users['Portuguese'];else{if(_0x44734a[0x0][_0x1e9105(0x179)]==_0x1e9105(0x185))var _0x1207f4=users['Chinese'];else{if(_0x44734a[0x0][_0x1e9105(0x179)]==_0x1e9105(0x162))var _0x1207f4=users[_0x1e9105(0x109)];}}}}}}}_0x2d5e80['render'](_0x1e9105(0x14d),{'success':_0x2e827a['flash'](_0x1e9105(0x18b)),'errors':_0x2e827a[_0x1e9105(0x10f)](_0x1e9105(0x19b)),'alldata':_0x45327e,'profile':_0x57384e,'master_shop':_0x44734a,'role':_0x1c2d10,'product_stock':_0x27a66b,'language':_0x1207f4});}catch(_0x1786a7){console[_0x1e9105(0x1a2)](_0x1786a7);}}),router['get'](a0_0x32e744(0x13d),auth,async(_0x2fc251,_0x23a51d)=>{const _0xa20e7b=a0_0x32e744;try{const {username:_0x3fb708,email:_0x19810e,role:_0x5c6117}=_0x2fc251[_0xa20e7b(0x17f)],_0x284679=_0x2fc251[_0xa20e7b(0x17f)],_0xdb99da=await profile[_0xa20e7b(0x192)]({'email':_0x284679[_0xa20e7b(0xfc)]}),_0x8cf5bd=await master_shop[_0xa20e7b(0x133)]();console[_0xa20e7b(0x1a2)](_0xa20e7b(0x1a4),_0x8cf5bd);const _0x2f6944=await categories[_0xa20e7b(0x133)]({}),_0x33e066=await brands[_0xa20e7b(0x133)]({}),_0x553251=await units[_0xa20e7b(0x133)]({}),_0x39f10b=await warehouse[_0xa20e7b(0x133)]({'status':_0xa20e7b(0xf1)});if(_0x8cf5bd[0x0]['language']=='English\x20(US)')var _0x21eaf1=users[_0xa20e7b(0x12a)];else{if(_0x8cf5bd[0x0][_0xa20e7b(0x179)]==_0xa20e7b(0x118))var _0x21eaf1=users[_0xa20e7b(0x118)];else{if(_0x8cf5bd[0x0][_0xa20e7b(0x179)]=='German')var _0x21eaf1=users[_0xa20e7b(0xeb)];else{if(_0x8cf5bd[0x0]['language']=='Spanish')var _0x21eaf1=users['Spanish'];else{if(_0x8cf5bd[0x0][_0xa20e7b(0x179)]=='French')var _0x21eaf1=users[_0xa20e7b(0x135)];else{if(_0x8cf5bd[0x0][_0xa20e7b(0x179)]==_0xa20e7b(0x176))var _0x21eaf1=users['Portuguese'];else{if(_0x8cf5bd[0x0][_0xa20e7b(0x179)]==_0xa20e7b(0x185))var _0x21eaf1=users[_0xa20e7b(0x185)];else{if(_0x8cf5bd[0x0]['language']==_0xa20e7b(0x162))var _0x21eaf1=users[_0xa20e7b(0x109)];}}}}}}}_0x23a51d[_0xa20e7b(0xf0)](_0xa20e7b(0x164),{'success':_0x2fc251['flash']('success'),'errors':_0x2fc251[_0xa20e7b(0x10f)](_0xa20e7b(0x19b)),'role':_0x284679,'profile':_0xdb99da,'categories':_0x2f6944,'brands':_0x33e066,'master_shop':_0x8cf5bd,'units':_0x553251,'language':_0x21eaf1,'find_data':_0x39f10b});}catch(_0x17ed2a){console[_0xa20e7b(0x1a2)](_0x17ed2a);}}),router[a0_0x32e744(0x144)]('/view/add_products',auth,upload[a0_0x32e744(0x13e)](a0_0x32e744(0x15d)),async(_0x3b720e,_0x2b5d3c)=>{const _0x231e4c=a0_0x32e744;try{const {name:_0x2b8d6c,category:_0x31e2a0,brand:_0x49c2b1,unit:_0xbedff5,alertquantity:_0x25ac1b,stock:_0x1a80ed,product_code:_0x3c7683,warehouse:_0x26dccf,primary_ItemCode:_0x16d929,second_ItemCode:_0x2fe2f4,second_unit:_0x88a782,maxPerUnit:_0x2a0703,MaxPerProduct:_0x4d41bd,sales_cat:_0x11911a,type_prod:_0x3892f3}=_0x3b720e[_0x231e4c(0x19c)],_0x1c8306=_0x3b720e['file']?.[_0x231e4c(0x15c)]||_0x231e4c(0x16c),_0xd8d19c=new product({'image':_0x1c8306,'name':_0x2b8d6c,'category':_0x31e2a0,'brand':_0x49c2b1,'unit':_0xbedff5,'alertquantity':_0x25ac1b,'stock':_0x1a80ed,'product_code':_0x3c7683,'warehouse':_0x26dccf,'primary_code':_0x16d929,'secondary_code':_0x2fe2f4,'second_unit':_0x88a782,'maxStocks':_0x4d41bd,'maxProdPerUnit':_0x2a0703,'sales_category':_0x11911a,'type_products':_0x3892f3}),_0x161d5d=await _0xd8d19c[_0x231e4c(0x117)](),_0x44a14b=await categories[_0x231e4c(0x192)]({'name':_0x31e2a0});_0x44a14b[_0x231e4c(0x14d)]=parseInt(_0x44a14b[_0x231e4c(0x14d)])+0x1,await _0x44a14b[_0x231e4c(0x117)]();const _0x500d5b=await brands[_0x231e4c(0x192)]({'name':_0x49c2b1});_0x500d5b[_0x231e4c(0x14d)]=parseInt(_0x500d5b[_0x231e4c(0x14d)])+0x1,await _0x500d5b[_0x231e4c(0x117)]();const _0x59daa1=await units['findOne']({'name':_0xbedff5});_0x59daa1[_0x231e4c(0x14d)]=parseInt(_0x59daa1[_0x231e4c(0x14d)])+0x1,await _0x59daa1['save'](),_0x3b720e[_0x231e4c(0x10f)](_0x231e4c(0x18b),_0x231e4c(0xf3)),_0x2b5d3c[_0x231e4c(0x15e)](_0x231e4c(0xee));}catch(_0x3edf68){console['log'](_0x3edf68);}}),router['get'](a0_0x32e744(0x167),auth,async(_0x9abe21,_0x33797e)=>{const _0x11a7bd=a0_0x32e744;try{const {username:_0x1c1b48,email:_0x331998,role:_0x3cfb1c}=_0x9abe21[_0x11a7bd(0x17f)],_0x537b90=_0x9abe21[_0x11a7bd(0x17f)],_0xd3d639=await profile[_0x11a7bd(0x192)]({'email':_0x537b90['email']}),_0x4c8d12=await master_shop[_0x11a7bd(0x133)]();console['log'](_0x11a7bd(0x127),_0x4c8d12);const _0x4232aa=_0x9abe21[_0x11a7bd(0x146)]['id'],_0x59da54=await product[_0x11a7bd(0x141)](_0x4232aa),_0x578ce5=await categories[_0x11a7bd(0x133)]({}),_0x540b95=await brands['find']({}),_0xcf2a08=await units[_0x11a7bd(0x133)]({}),_0x5ba24f=await warehouse[_0x11a7bd(0x133)]({'status':'Enabled'}),_0x47fcf1=await units[_0x11a7bd(0x165)]([{'$group':{'_id':_0x11a7bd(0xea),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x4c8d12[0x0][_0x11a7bd(0x179)]=='English\x20(US)')var _0x14a9a8=users[_0x11a7bd(0x12a)];else{if(_0x4c8d12[0x0][_0x11a7bd(0x179)]==_0x11a7bd(0x118))var _0x14a9a8=users['Hindi'];else{if(_0x4c8d12[0x0][_0x11a7bd(0x179)]==_0x11a7bd(0xeb))var _0x14a9a8=users[_0x11a7bd(0xeb)];else{if(_0x4c8d12[0x0][_0x11a7bd(0x179)]==_0x11a7bd(0x156))var _0x14a9a8=users[_0x11a7bd(0x156)];else{if(_0x4c8d12[0x0][_0x11a7bd(0x179)]=='French')var _0x14a9a8=users[_0x11a7bd(0x135)];else{if(_0x4c8d12[0x0][_0x11a7bd(0x179)]==_0x11a7bd(0x176))var _0x14a9a8=users[_0x11a7bd(0x11f)];else{if(_0x4c8d12[0x0]['language']==_0x11a7bd(0x185))var _0x14a9a8=users[_0x11a7bd(0x185)];else{if(_0x4c8d12[0x0][_0x11a7bd(0x179)]==_0x11a7bd(0x162))var _0x14a9a8=users['Arabic'];}}}}}}}_0x33797e[_0x11a7bd(0xf0)](_0x11a7bd(0x1a6),{'success':_0x9abe21['flash']('success'),'errors':_0x9abe21[_0x11a7bd(0x10f)]('errors'),'role':_0x537b90,'profile':_0xd3d639,'alldata':_0x59da54,'categories':_0x578ce5,'brands':_0x540b95,'master_shop':_0x4c8d12,'units':_0xcf2a08,'secondunit':_0x47fcf1,'find_data':_0x5ba24f,'language':_0x14a9a8});}catch(_0x536f60){console[_0x11a7bd(0x1a2)](_0x536f60);}}),router[a0_0x32e744(0x144)](a0_0x32e744(0x167),auth,upload[a0_0x32e744(0x13e)](a0_0x32e744(0x15d)),async(_0x56cb99,_0x38ef3d)=>{const _0x22377f=a0_0x32e744;try{const _0x338b3d=_0x56cb99[_0x22377f(0x146)]['id'],_0x8b8b15=await product[_0x22377f(0x141)](_0x338b3d),{image:_0x434359,name:_0x4c7d3f,category:_0x2ce2df,brand:_0x42c06e,sku:_0xaa262e,unit:_0x416209,alertquantity:_0x326a08,product_code:_0x37107a,warehouse:_0x3f13c5,primary_ItemCode:_0x537fcf,second_ItemCode:_0x26fbaa,second_unit:_0x447dec,maxPerUnit:_0x36281a,MaxPerProduct:_0x1d6d2f,prod_catdata:_0x134061,type_prod:_0x1ad64a,sales_cat:_0x1db105}=_0x56cb99['body'];_0x56cb99[_0x22377f(0x15f)]&&(_0x8b8b15['image']=_0x56cb99[_0x22377f(0x15f)][_0x22377f(0x15c)]);_0x8b8b15[_0x22377f(0x178)]=_0x4c7d3f,_0x8b8b15['category']=_0x2ce2df,_0x8b8b15[_0x22377f(0x13a)]=_0x42c06e,_0x8b8b15['sku']=_0xaa262e,_0x8b8b15[_0x22377f(0x198)]=_0x416209,_0x8b8b15[_0x22377f(0x11c)]=_0x326a08,_0x8b8b15['product_code']=_0x37107a,_0x8b8b15[_0x22377f(0x12c)]=_0x3f13c5,_0x8b8b15[_0x22377f(0x173)]=_0x537fcf,_0x8b8b15['secondary_code']=_0x26fbaa,_0x8b8b15[_0x22377f(0x154)]=_0x447dec,_0x8b8b15['maxStocks']=_0x1d6d2f,_0x8b8b15['maxProdPerUnit']=_0x36281a,_0x8b8b15['product_category']=_0x134061,_0x8b8b15[_0x22377f(0x149)]=_0x1ad64a,_0x8b8b15[_0x22377f(0xef)]=_0x1db105;const _0x31f482=await _0x8b8b15[_0x22377f(0x117)]();console[_0x22377f(0x1a2)](_0x22377f(0x18c),_0x8b8b15),_0x56cb99[_0x22377f(0x10f)](_0x22377f(0x18b),_0x22377f(0x196)),_0x38ef3d[_0x22377f(0x15e)](_0x22377f(0xee));}catch(_0x46abff){console[_0x22377f(0x1a2)](_0x46abff);}}),router[a0_0x32e744(0x10e)]('/barcode/:id',auth,async(_0x3c9e00,_0x577429)=>{const _0x1864b1=a0_0x32e744;try{const {username:_0x3f3f6d,email:_0x3f48a3,role:_0x594037}=_0x3c9e00[_0x1864b1(0x17f)],_0x24e672=_0x3c9e00[_0x1864b1(0x17f)],_0x1ebd0f=await profile[_0x1864b1(0x192)]({'email':_0x24e672['email']}),_0x1e7973=await master_shop['find']();console[_0x1864b1(0x1a2)](_0x1864b1(0x1a8),_0x1e7973);const _0x4c76b4=_0x3c9e00[_0x1864b1(0x146)]['id'],_0x4d34a0=await product[_0x1864b1(0x141)](_0x4c76b4);console[_0x1864b1(0x1a2)](_0x1864b1(0xfe),_0x4d34a0);if(_0x1e7973[0x0][_0x1864b1(0x179)]==_0x1864b1(0x12f))var _0x3acfd9=users[_0x1864b1(0x12a)];else{if(_0x1e7973[0x0][_0x1864b1(0x179)]==_0x1864b1(0x118))var _0x3acfd9=users[_0x1864b1(0x118)];else{if(_0x1e7973[0x0]['language']==_0x1864b1(0xeb))var _0x3acfd9=users[_0x1864b1(0xeb)];else{if(_0x1e7973[0x0]['language']==_0x1864b1(0x156))var _0x3acfd9=users[_0x1864b1(0x156)];else{if(_0x1e7973[0x0]['language']==_0x1864b1(0x135))var _0x3acfd9=users[_0x1864b1(0x135)];else{if(_0x1e7973[0x0][_0x1864b1(0x179)]=='Portuguese\x20(BR)')var _0x3acfd9=users['Portuguese'];else{if(_0x1e7973[0x0][_0x1864b1(0x179)]=='Chinese')var _0x3acfd9=users[_0x1864b1(0x185)];else{if(_0x1e7973[0x0][_0x1864b1(0x179)]==_0x1864b1(0x162))var _0x3acfd9=users['Arabic'];}}}}}}}_0x577429[_0x1864b1(0xf0)](_0x1864b1(0x184),{'success':_0x3c9e00[_0x1864b1(0x10f)]('success'),'errors':_0x3c9e00[_0x1864b1(0x10f)](_0x1864b1(0x19b)),'role':_0x24e672,'profile':_0x1ebd0f,'alldata':_0x4d34a0,'master_shop':_0x1e7973,'language':_0x3acfd9});}catch(_0x41ffa4){console[_0x1864b1(0x1a2)](_0x41ffa4);}}),router[a0_0x32e744(0x10e)]('/products_export_migrate_file',auth,async(_0x155832,_0x4a180a)=>{const _0x100160=a0_0x32e744;try{const _0x37a782=new excelJS[(_0x100160(0x17a))](),_0x214f01=_0x37a782['addWorksheet'](_0x100160(0x145));return _0x214f01['columns']=[{'header':_0x100160(0xfb),'key':_0x100160(0x180),'width':0xa},{'header':_0x100160(0x18e),'key':_0x100160(0x111),'width':0xa},{'header':_0x100160(0xf6),'key':'PUnits','width':0xa},{'header':_0x100160(0x193),'key':_0x100160(0xec),'width':0xa},{'header':_0x100160(0x15a),'key':'MaxperUnits','width':0xa},{'header':_0x100160(0x171),'key':'ProductCode','width':0xa},{'header':'Secondary_Code','key':_0x100160(0x194),'width':0xa},{'header':_0x100160(0x166),'key':_0x100160(0x194),'width':0xa},{'header':_0x100160(0x174),'key':_0x100160(0x148),'width':0xa},{'header':_0x100160(0x124),'key':'PAlQty','width':0xa},{'header':'Maximum_Stocks','key':'PAlQty','width':0xa},{'header':'Products_category','key':_0x100160(0xe8),'width':0xa}],_0x4a180a['setHeader']('Content-Type',_0x100160(0x17c)),_0x4a180a[_0x100160(0x11d)](_0x100160(0x163),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x37a782['xlsx'][_0x100160(0x183)](_0x4a180a)[_0x100160(0x136)](()=>{const _0xe994d4=_0x100160;_0x4a180a[_0xe994d4(0x177)](0xc8);});}catch(_0x4db0b9){_0x4a180a['status'](0x190)[_0x100160(0x181)](_0x4db0b9);}});function a0_0x5401(_0x3403c6,_0x5294b6){const _0x17026b=a0_0x1702();return a0_0x5401=function(_0x540118,_0xbf639f){_0x540118=_0x540118-0xe2;let _0x19e298=_0x17026b[_0x540118];return _0x19e298;},a0_0x5401(_0x3403c6,_0x5294b6);}const storage1=multer[a0_0x32e744(0x152)]({'destination':(_0x4c4c76,_0x654ffd,_0x1537e7)=>{const _0x5f17a5=a0_0x32e744;_0x1537e7(null,_0x5f17a5(0x13b));},'filename':(_0x3d3ccc,_0x18b154,_0x279de8)=>{const _0x371f59=a0_0x32e744;_0x279de8(null,Date[_0x371f59(0x190)]()+_0x18b154[_0x371f59(0x101)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x32e744(0x144)]('/products_import_migrate_file',auth,uploadMigrate[a0_0x32e744(0x13e)](a0_0x32e744(0x15b)),async(_0x538e82,_0x553c6b)=>{const _0x1ff7a7=a0_0x32e744,_0x22301e=_0x538e82[_0x1ff7a7(0x15f)]['filename'],_0x2e49c9=await xlsx[_0x1ff7a7(0x10b)](_0x1ff7a7(0xe4)+_0x22301e);let _0xdd5bfc=_0x2e49c9[_0x1ff7a7(0x113)],_0x117bec=xlsx[_0x1ff7a7(0x102)][_0x1ff7a7(0x10d)](_0x2e49c9[_0x1ff7a7(0x191)][_0xdd5bfc[0x0]]);for(const _0xbccea8 of _0x117bec){const _0x1288c7=_0xbccea8[_0x1ff7a7(0xfb)],_0x4a63ef=_0xbccea8[_0x1ff7a7(0x18e)],_0x2de62a=_0xbccea8[_0x1ff7a7(0xf6)],_0x28d171=_0xbccea8[_0x1ff7a7(0x193)],_0x38b451=_0xbccea8[_0x1ff7a7(0x166)],_0xdd5d16=_0xbccea8[_0x1ff7a7(0x174)],_0x37ad06=_0xbccea8[_0x1ff7a7(0x124)],_0x4d37b4=_0xbccea8[_0x1ff7a7(0x171)],_0xc1382=_0xbccea8[_0x1ff7a7(0x104)],_0x2127ca=_0xbccea8['Maximum_Stocks'],_0x53da5c=_0xbccea8[_0x1ff7a7(0x15a)],_0x2ce0d0=_0xbccea8[_0x1ff7a7(0x137)];try{let _0x179b23=await categories[_0x1ff7a7(0x192)]({'name':_0xdd5d16});if(!_0x179b23){const _0x1ecf60=new categories({'name':_0xdd5d16,'products':'0'});_0x179b23=await _0x1ecf60[_0x1ff7a7(0x117)]();}let _0x208573=await brands[_0x1ff7a7(0x192)]({'name':_0x4a63ef});if(!_0x208573){const _0x2258d4=new brands({'name':_0x4a63ef,'products':'0'});_0x208573=await _0x2258d4['save']();}let _0x5d10fe=await units['findOne']({'name':_0x2de62a,'secondary_unit':_0x28d171});if(!_0x5d10fe){const _0x282a00=new units({'name':_0x2de62a,'secondary_unit':_0x28d171,'products':'0'});_0x5d10fe=await _0x282a00[_0x1ff7a7(0x117)]();}const _0x2caede=await product[_0x1ff7a7(0x133)]({'name':_0x1288c7,'category':_0x179b23[_0x1ff7a7(0x178)],'brand':_0x208573[_0x1ff7a7(0x178)],'secondary_unit':_0x5d10fe[_0x1ff7a7(0x154)],'product_code':_0x38b451});console[_0x1ff7a7(0x1a2)](_0x2caede['length']+_0x1ff7a7(0x11e)+_0x179b23[_0x1ff7a7(0x178)]+_0x1ff7a7(0x11e)+_0x208573[_0x1ff7a7(0x178)]+_0x1ff7a7(0x11e)+_0x5d10fe['secondary_unit']+_0x1ff7a7(0x11e)+_0x38b451+_0x1ff7a7(0x11e)+_0x1288c7);if(_0x2caede[_0x1ff7a7(0x11a)]===0x0){const _0x364db3=new product({'image':_0x1ff7a7(0x16c),'name':_0x1288c7,'category':_0x179b23[_0x1ff7a7(0x178)],'brand':_0x208573[_0x1ff7a7(0x178)],'unit':_0x5d10fe['name'],'alertquantity':_0x37ad06,'product_code':_0x38b451,'secondary_unit':_0x5d10fe[_0x1ff7a7(0x154)],'primary_code':_0x4d37b4,'secondary_code':_0xc1382,'maxStocks':_0x2127ca,'maxProdPerUnit':_0x53da5c,'product_category':_0x2ce0d0}),_0x4db62b=await _0x364db3[_0x1ff7a7(0x117)]();_0x179b23[_0x1ff7a7(0x14d)]=parseInt(_0x179b23[_0x1ff7a7(0x14d)])+0x1,await _0x179b23[_0x1ff7a7(0x117)](),_0x208573[_0x1ff7a7(0x14d)]=parseInt(_0x208573['products'])+0x1,await _0x208573['save'](),_0x5d10fe['products']=parseInt(_0x5d10fe[_0x1ff7a7(0x14d)])+0x1,await _0x5d10fe[_0x1ff7a7(0x117)](),_0x538e82[_0x1ff7a7(0x10f)]('success',_0x1288c7+_0x1ff7a7(0xe3));}else{console['log'](_0x2caede[0x0]);const _0x30861c=_0x2caede[0x0];_0x30861c[_0x1ff7a7(0x108)]=_0x179b23['name'],_0x30861c[_0x1ff7a7(0x13a)]=_0x208573[_0x1ff7a7(0x178)],_0x30861c[_0x1ff7a7(0x198)]=_0x5d10fe[_0x1ff7a7(0x178)],_0x30861c[_0x1ff7a7(0x11c)]=_0x37ad06,_0x30861c[_0x1ff7a7(0x17d)]=_0x38b451,_0x30861c[_0x1ff7a7(0x154)]=_0x5d10fe[_0x1ff7a7(0x154)],_0x30861c[_0x1ff7a7(0x173)]=_0x4d37b4,_0x30861c[_0x1ff7a7(0x18f)]=_0xc1382,_0x30861c[_0x1ff7a7(0x131)]=_0x2127ca,_0x30861c[_0x1ff7a7(0xf7)]=_0x53da5c,_0x30861c[_0x1ff7a7(0x129)]=_0x2ce0d0;const _0x5bc512=await _0x30861c[_0x1ff7a7(0x117)]();_0x538e82[_0x1ff7a7(0x10f)]('success',_0x5bc512[_0x1ff7a7(0x178)]+_0x1ff7a7(0x132));}}catch(_0x3acc0e){_0x553c6b[_0x1ff7a7(0x177)](0x1f4)[_0x1ff7a7(0x103)]({'proderror':_0x3acc0e[_0x1ff7a7(0x19f)],'aproduct':_0x1288c7});}}_0x553c6b[_0x1ff7a7(0x15e)]('/products/view');}),router['post'](a0_0x32e744(0x172),auth,async(_0x361f40,_0x71083b)=>{const _0x32ea45=a0_0x32e744;try{console[_0x32ea45(0x1a2)](_0x361f40[_0x32ea45(0x19c)]);const {data_cateory:_0x557ece,datachoose:_0x15244b}=_0x361f40[_0x32ea45(0x19c)];var _0x327f17;if(_0x15244b==_0x32ea45(0x110))_0x327f17=await product['aggregate']([{'$group':{'_id':_0x32ea45(0x106)}}]);else{if(_0x15244b==_0x32ea45(0x1a5))_0x327f17=await product[_0x32ea45(0x165)]([{'$match':{'product_category':_0x557ece}},{'$group':{'_id':_0x32ea45(0x123)}}]);else _0x15244b==_0x32ea45(0x182)&&(_0x327f17=await product['aggregate']([{'$match':{'product_category':_0x557ece}},{'$group':{'_id':_0x32ea45(0x11b)}}]));}_0x71083b['json'](_0x327f17);}catch(_0xdded4f){_0x71083b[_0x32ea45(0x103)]({'message':_0xdded4f['message']});}}),router[a0_0x32e744(0x144)](a0_0x32e744(0x13f),auth,async(_0x26631e,_0x3eda22)=>{const _0x19afbb=a0_0x32e744;try{const {data_choosing:_0x270f34,data_selected:_0x5d1941}=_0x26631e[_0x19afbb(0x19c)];var _0x4ee763;if(_0x270f34==_0x19afbb(0x110))_0x4ee763=await product[_0x19afbb(0x165)]([{'$match':{'product_category':_0x5d1941}}]);else{if(_0x270f34==_0x19afbb(0x1a5))_0x4ee763=await product[_0x19afbb(0x165)]([{'$match':{'brand':_0x5d1941}}]);else _0x270f34==_0x19afbb(0x182)&&(_0x4ee763=await product['aggregate']([{'$match':{'category':_0x5d1941}}]));}_0x3eda22[_0x19afbb(0x103)](_0x4ee763);}catch(_0x175533){_0x3eda22[_0x19afbb(0x103)]({'message':_0x175533[_0x19afbb(0x19f)]});}}),router[a0_0x32e744(0x10e)](a0_0x32e744(0x12b),auth,async(_0x33f3a0,_0x228468)=>{const _0x50e178=a0_0x32e744,_0x1558a7=_0x33f3a0[_0x50e178(0x17f)],_0x106f4e=await profile[_0x50e178(0x192)]({'email':_0x1558a7[_0x50e178(0xfc)]}),_0x3681f6=await master_shop[_0x50e178(0x133)](),_0x1f0134=await product['find']();if(_0x3681f6[0x0][_0x50e178(0x179)]==_0x50e178(0x12f))var _0x5e9b11=users[_0x50e178(0x12a)];else{if(_0x3681f6[0x0][_0x50e178(0x179)]=='Hindi')var _0x5e9b11=users[_0x50e178(0x118)];else{if(_0x3681f6[0x0]['language']==_0x50e178(0xeb))var _0x5e9b11=users[_0x50e178(0xeb)];else{if(_0x3681f6[0x0][_0x50e178(0x179)]=='Spanish')var _0x5e9b11=users[_0x50e178(0x156)];else{if(_0x3681f6[0x0][_0x50e178(0x179)]=='French')var _0x5e9b11=users[_0x50e178(0x135)];else{if(_0x3681f6[0x0][_0x50e178(0x179)]==_0x50e178(0x176))var _0x5e9b11=users['Portuguese'];else{if(_0x3681f6[0x0][_0x50e178(0x179)]==_0x50e178(0x185))var _0x5e9b11=users['Chinese'];else{if(_0x3681f6[0x0][_0x50e178(0x179)]==_0x50e178(0x162))var _0x5e9b11=users[_0x50e178(0x109)];}}}}}}}_0x228468[_0x50e178(0xf0)](_0x50e178(0x16f),{'success':_0x33f3a0[_0x50e178(0x10f)](_0x50e178(0x18b)),'errors':_0x33f3a0['flash'](_0x50e178(0x19b)),'role':_0x1558a7,'profile':_0x106f4e,'products':_0x1f0134,'master_shop':_0x3681f6,'language':_0x5e9b11});}),router[a0_0x32e744(0x144)](a0_0x32e744(0x116),auth,async(_0x3d7965,_0x3c6c61)=>{const _0x250bb5=a0_0x32e744,_0x4bf541=await product[_0x250bb5(0x133)]();_0x3c6c61[_0x250bb5(0x103)]({'data':_0x4bf541});}),router['post'](a0_0x32e744(0x188),auth,async(_0x547d29,_0x1bfef0)=>{const _0x18c62c=a0_0x32e744;try{const {dataProdCat:_0x3defb1,dataProdIdentity:_0x327a90}=_0x547d29[_0x18c62c(0x19c)];var _0x4a6541;switch(_0x3defb1){case'fg':switch(_0x327a90){case _0x18c62c(0x18e):_0x4a6541=await product[_0x18c62c(0x165)]([{'$match':{'product_category':_0x18c62c(0x121)}},{'$group':{'_id':_0x18c62c(0x123)}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0x4a6541=await product[_0x18c62c(0x165)]([{'$match':{'product_category':_0x18c62c(0x121)}},{'$group':{'_id':_0x18c62c(0x11b)}},{'$project':{'category':_0x18c62c(0xea)}}]);break;}break;case'rm':switch(_0x327a90){case _0x18c62c(0x18e):_0x4a6541=await product['aggregate']([{'$match':{'product_category':_0x18c62c(0x158)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x18c62c(0xea)}}]);break;case _0x18c62c(0x174):_0x4a6541=await product[_0x18c62c(0x165)]([{'$match':{'product_category':_0x18c62c(0x158)}},{'$group':{'_id':_0x18c62c(0x11b)}},{'$project':{'category':_0x18c62c(0xea)}}]);break;}break;}_0x1bfef0['json'](_0x4a6541);}catch(_0xb7b1a8){_0x1bfef0[_0x18c62c(0x103)]({'message':_0xb7b1a8[_0x18c62c(0x19f)]});}}),router[a0_0x32e744(0x144)]('/print_barcode_filter/',auth,async(_0x1276f,_0x4214cd)=>{const _0x232914=a0_0x32e744;try{console[_0x232914(0x1a2)](_0x1276f[_0x232914(0x19c)]);const {prod_cat:_0x3ad0f0,identity:_0x3209e2,valueData:_0x49d2a6,typeofbarcode:_0x8b6c34}=_0x1276f[_0x232914(0x19c)];let _0x500879;switch(_0x3ad0f0){case'fg':if(_0x3209e2==_0x232914(0x18e))_0x500879=await product['aggregate']([{'$match':{'product_category':_0x232914(0x121),'brand':_0x49d2a6}}]);else _0x3209e2==_0x232914(0x174)&&(_0x500879=await product[_0x232914(0x165)]([{'$match':{'product_category':_0x232914(0x121),'category':_0x49d2a6}}]));break;case'rm':if(_0x3209e2==_0x232914(0x18e))_0x500879=await product[_0x232914(0x165)]([{'$match':{'product_category':_0x232914(0x158),'brand':_0x49d2a6}}]);else _0x3209e2==_0x232914(0x174)&&(_0x500879=await product[_0x232914(0x165)]([{'$match':{'product_category':_0x232914(0x158),'category':_0x49d2a6}}]));break;}const _0x5a4de3=_0x6f7a02=>_0x6f7a02*0x48,_0x88b5d3={'width':0x3,'height':0x1},_0x26d2c5=new PDFDocument({'margin':_0x5a4de3(0.75),'size':[_0x5a4de3(_0x88b5d3['width']),_0x5a4de3(_0x88b5d3['height'])],'bufferPages':!![]}),_0x2cf78e=_0x500879[_0x232914(0x11a)];for(let _0x244c79=0x0;_0x244c79<=_0x2cf78e;_0x244c79++){if(_0x244c79!=_0x2cf78e){const _0x173ec7=_0x500879[_0x244c79][_0x232914(0x178)],_0x6e1357=_0x500879[_0x244c79][_0x232914(0x173)],_0x4d0fb7=_0x500879[_0x244c79][_0x232914(0x18f)],_0xa0377d=_0x500879[_0x244c79][_0x232914(0x17d)];var _0x14dcbc;switch(_0x8b6c34){case'1':_0x14dcbc=_0x6e1357;break;case'2':_0x14dcbc=_0x4d0fb7;break;case'3':_0x14dcbc=_0xa0377d;break;}const _0x373101={'width':0xd2,'height':0x64},_0x113d2e={'width':_0x5a4de3(_0x88b5d3['width']),'height':_0x5a4de3(_0x88b5d3[_0x232914(0x100)])},_0x3fb3a1=new Canvas();JsBarcode(_0x3fb3a1,_0x14dcbc,{'format':'CODE128','height':_0x373101[_0x232914(0x100)],'displayValue':!![],'text':_0x14dcbc});const _0x150faf=_0x3fb3a1[_0x232914(0x19e)](),_0x160900=_0x113d2e[_0x232914(0x16a)]/_0x373101[_0x232914(0x16a)],_0x1cdde6=_0x113d2e[_0x232914(0x100)]/_0x373101[_0x232914(0x100)],_0x2e2dd4=Math['min'](_0x160900,_0x1cdde6),_0x1931c0=_0x373101['width']*_0x2e2dd4,_0x2fc51f=_0x373101[_0x232914(0x100)]*_0x2e2dd4,_0x20023d=(_0x113d2e[_0x232914(0x16a)]-_0x1931c0)/0x2,_0x1c5539=(_0x113d2e['height']-_0x2fc51f)/0x2;_0x26d2c5[_0x232914(0x15d)](_0x150faf,_0x20023d,_0x1c5539,{'width':_0x1931c0,'height':_0x2fc51f}),_0x244c79!=_0x2cf78e&&_0x26d2c5[_0x232914(0x186)]();}}const _0x1f6920=[];_0x26d2c5['on'](_0x232914(0x197),_0x1f6920[_0x232914(0x105)][_0x232914(0x14e)](_0x1f6920)),_0x26d2c5['on'](_0x232914(0x161),()=>{const _0x2a21af=_0x232914,_0x5950f0=Buffer[_0x2a21af(0x139)](_0x1f6920),_0x6755da=_0x5950f0[_0x2a21af(0xf5)](_0x2a21af(0xf2));_0x4214cd[_0x2a21af(0x103)]({'pdfContent':_0x6755da});}),_0x26d2c5[_0x232914(0x161)]();}catch(_0x4d6213){_0x4214cd[_0x232914(0x103)]({'message':_0x4d6213[_0x232914(0x19f)]});}}),router[a0_0x32e744(0x144)](a0_0x32e744(0xe9),auth,async(_0x18ad10,_0x4ca770)=>{const _0x4e9216=a0_0x32e744;try{console[_0x4e9216(0x1a2)](_0x18ad10[_0x4e9216(0x19c)]);const {prod_cat:_0xbd6dcd,identity:_0x55bd6f,valueData:_0x196761}=_0x18ad10['body'];let _0x15bb69;switch(_0xbd6dcd){case'fg':if(_0x55bd6f=='Brands')_0x15bb69=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods','brand':_0x196761}}]);else _0x55bd6f==_0x4e9216(0x174)&&(_0x15bb69=await product['aggregate']([{'$match':{'product_category':_0x4e9216(0x121),'category':_0x196761}}]));break;case'rm':if(_0x55bd6f=='Brands')_0x15bb69=await product[_0x4e9216(0x165)]([{'$match':{'product_category':_0x4e9216(0x158),'brand':_0x196761}}]);else _0x55bd6f==_0x4e9216(0x174)&&(_0x15bb69=await product[_0x4e9216(0x165)]([{'$match':{'product_category':_0x4e9216(0x158),'category':_0x196761}}]));break;}_0x4ca770[_0x4e9216(0x103)]({'data':_0x15bb69});}catch(_0x47e3f4){_0x4ca770['json']({'message':_0x47e3f4[_0x4e9216(0x19f)]});}}),router[a0_0x32e744(0x144)](a0_0x32e744(0x119),auth,async(_0x3c1cf2,_0xd4dc3b)=>{const _0xb7f525=a0_0x32e744;try{const _0x486f23=_0x3c1cf2['params']['id'],{copies:_0x1fbcc8,typeofbarcode:_0x4a79fc}=_0x3c1cf2['body'];var _0x2eddff=await product[_0xb7f525(0x141)](_0x486f23);const _0x3c5e1e=_0x5552a8=>_0x5552a8*0x48,_0x26cfc2={'width':0x3,'height':0x1},_0x5a7573=new PDFDocument({'margin':_0x3c5e1e(0.75),'size':[_0x3c5e1e(_0x26cfc2['width']),_0x3c5e1e(_0x26cfc2['height'])],'bufferPages':!![]}),_0x378425=_0x1fbcc8,_0x2589ad=_0x2eddff[_0xb7f525(0x178)],_0x1f61cc=_0x2eddff[_0xb7f525(0x173)],_0x3da175=_0x2eddff[_0xb7f525(0x18f)],_0x24688b=_0x2eddff[_0xb7f525(0x17d)];let _0x44f3d4;switch(_0x4a79fc){case'1':_0x44f3d4=_0x1f61cc;break;case'2':_0x44f3d4=_0x3da175;break;case'3':_0x44f3d4=_0x24688b;break;}const _0x1d2860={'width':0xd2,'height':0x64},_0x36060b={'width':_0x3c5e1e(_0x26cfc2[_0xb7f525(0x16a)]),'height':_0x3c5e1e(_0x26cfc2[_0xb7f525(0x100)])};for(let _0x333f2d=0x1;_0x333f2d<=_0x378425;_0x333f2d++){const _0x30ccc7=new Canvas();JsBarcode(_0x30ccc7,_0x44f3d4,{'format':_0xb7f525(0x1a7),'height':_0x1d2860[_0xb7f525(0x100)],'displayValue':!![],'text':_0x44f3d4});const _0x3a0b40=_0x30ccc7[_0xb7f525(0x19e)](),_0x2ecc43=_0x36060b[_0xb7f525(0x16a)]/_0x1d2860['width'],_0x4c6d60=_0x36060b[_0xb7f525(0x100)]/_0x1d2860['height'],_0x58d294=Math[_0xb7f525(0x19a)](_0x2ecc43,_0x4c6d60),_0x5a01eb=_0x1d2860[_0xb7f525(0x16a)]*_0x58d294,_0x29fe6f=_0x1d2860[_0xb7f525(0x100)]*_0x58d294,_0x449990=(_0x36060b[_0xb7f525(0x16a)]-_0x5a01eb)/0x2,_0x175659=(_0x36060b['height']-_0x29fe6f)/0x2;_0x5a7573[_0xb7f525(0x15d)](_0x3a0b40,_0x449990,_0x175659,{'width':_0x5a01eb,'height':_0x29fe6f}),_0x333f2d!=_0x378425&&_0x5a7573['addPage']();}const _0x1442ff=[];_0x5a7573['on'](_0xb7f525(0x197),_0x1442ff[_0xb7f525(0x105)][_0xb7f525(0x14e)](_0x1442ff)),_0x5a7573['on'](_0xb7f525(0x161),()=>{const _0x296cb0=_0xb7f525,_0x239c52=Buffer['concat'](_0x1442ff),_0x490ff9=_0x239c52[_0x296cb0(0xf5)](_0x296cb0(0xf2));_0xd4dc3b['json']({'pdfContent':_0x490ff9});}),_0x5a7573[_0xb7f525(0x161)]();}catch(_0x521663){_0xd4dc3b[_0xb7f525(0x103)]({'message':_0x521663['message']});}}),module[a0_0x32e744(0x187)]=router;