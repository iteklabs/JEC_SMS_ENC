function a0_0x4460(_0x3cad2f,_0x146761){const _0x366a23=a0_0x366a();return a0_0x4460=function(_0x446029,_0x12d855){_0x446029=_0x446029-0xfb;let _0x12a7a8=_0x366a23[_0x446029];return _0x12a7a8;},a0_0x4460(_0x3cad2f,_0x146761);}const a0_0x1c4ffd=a0_0x4460;(function(_0x352894,_0x509a9d){const _0x4e2223=a0_0x4460,_0xe9a2f5=_0x352894();while(!![]){try{const _0x4eb527=-parseInt(_0x4e2223(0x142))/0x1*(parseInt(_0x4e2223(0x158))/0x2)+parseInt(_0x4e2223(0x12c))/0x3*(parseInt(_0x4e2223(0x10e))/0x4)+parseInt(_0x4e2223(0x12e))/0x5+-parseInt(_0x4e2223(0x166))/0x6+parseInt(_0x4e2223(0x1ad))/0x7*(parseInt(_0x4e2223(0x160))/0x8)+-parseInt(_0x4e2223(0x187))/0x9+-parseInt(_0x4e2223(0x1a1))/0xa;if(_0x4eb527===_0x509a9d)break;else _0xe9a2f5['push'](_0xe9a2f5['shift']());}catch(_0x48df44){_0xe9a2f5['push'](_0xe9a2f5['shift']());}}}(a0_0x366a,0x5feee));const express=require(a0_0x1c4ffd(0x16e)),res=require(a0_0x1c4ffd(0x196)),app=express(),router=express[a0_0x1c4ffd(0x1bb)](),multer=require(a0_0x1c4ffd(0x149)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x1c4ffd(0x131)),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),excelJS=require(a0_0x1c4ffd(0x170)),xlsx=require(a0_0x1c4ffd(0x124)),JsBarcode=require(a0_0x1c4ffd(0x18e)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x1c4ffd(0x1a6));router['get'](a0_0x1c4ffd(0x1b9),auth,async(_0x4f5099,_0x55308f)=>{const _0x5659cf=a0_0x1c4ffd;try{const {username:_0x557bf1,email:_0x4a3506,role:_0x2e6f95}=_0x4f5099[_0x5659cf(0x156)],_0x246638=_0x4f5099['user'],_0x2586b9=await profile[_0x5659cf(0x1a4)]({'email':_0x246638[_0x5659cf(0x198)]}),_0x10da9e=await master_shop[_0x5659cf(0x153)]();console['log'](_0x5659cf(0x191),_0x10da9e);const _0x5e3aab=await categories[_0x5659cf(0x153)]();if(_0x10da9e[0x0][_0x5659cf(0x190)]==_0x5659cf(0x155))var _0x51c975=users[_0x5659cf(0x121)];else{if(_0x10da9e[0x0][_0x5659cf(0x190)]=='Hindi')var _0x51c975=users[_0x5659cf(0x11b)];else{if(_0x10da9e[0x0][_0x5659cf(0x190)]==_0x5659cf(0x148))var _0x51c975=users[_0x5659cf(0x148)];else{if(_0x10da9e[0x0][_0x5659cf(0x190)]==_0x5659cf(0x17e))var _0x51c975=users[_0x5659cf(0x17e)];else{if(_0x10da9e[0x0][_0x5659cf(0x190)]==_0x5659cf(0x10f))var _0x51c975=users['French'];else{if(_0x10da9e[0x0][_0x5659cf(0x190)]==_0x5659cf(0x1b7))var _0x51c975=users[_0x5659cf(0x12f)];else{if(_0x10da9e[0x0][_0x5659cf(0x190)]==_0x5659cf(0x1b6))var _0x51c975=users[_0x5659cf(0x1b6)];else{if(_0x10da9e[0x0][_0x5659cf(0x190)]==_0x5659cf(0x12d))var _0x51c975=users[_0x5659cf(0x1ba)];}}}}}}}_0x55308f[_0x5659cf(0xfd)](_0x5659cf(0x19c),{'success':_0x4f5099['flash'](_0x5659cf(0x168)),'errors':_0x4f5099[_0x5659cf(0x159)](_0x5659cf(0x19b)),'role':_0x246638,'profile':_0x2586b9,'user':_0x5e3aab,'master_shop':_0x10da9e,'language':_0x51c975});}catch(_0x213fef){console[_0x5659cf(0x115)](_0x213fef);}}),router[a0_0x1c4ffd(0x18f)](a0_0x1c4ffd(0x1b9),auth,async(_0x58be06,_0x2ce625)=>{const _0x49a11f=a0_0x1c4ffd;try{const {name:_0x1faa16,products:_0x437ee1}=_0x58be06['body'],_0x12e261=new categories({'name':_0x1faa16,'products':_0x437ee1}),_0x5d2406=await categories[_0x49a11f(0x1a4)]({'name':_0x1faa16});_0x5d2406?_0x58be06['flash'](_0x49a11f(0x19b),_0x1faa16+_0x49a11f(0x17d)):_0x58be06[_0x49a11f(0x159)]('success',_0x1faa16+_0x49a11f(0x1ae));const _0x419bbc=await _0x12e261[_0x49a11f(0x10b)]();_0x2ce625[_0x49a11f(0x144)]('/products/categories');}catch(_0x1e386a){console['log'](_0x1e386a);}}),router[a0_0x1c4ffd(0x16d)](a0_0x1c4ffd(0x1a7),auth,async(_0x2de498,_0x2f4735)=>{const _0x23bb99=a0_0x1c4ffd;try{const {username:_0x169d13,email:_0x4d2f60,role:_0x3e726a}=_0x2de498['user'],_0x59958d=_0x2de498[_0x23bb99(0x156)],_0xee624a=await profile[_0x23bb99(0x1a4)]({'email':_0x59958d['email']}),_0x1456b7=await master_shop[_0x23bb99(0x153)]();console[_0x23bb99(0x115)](_0x23bb99(0x191),_0x1456b7);const _0x124fc7=_0x2de498[_0x23bb99(0x102)]['id'];console['log'](_0x124fc7);const _0x132cd3=await categories[_0x23bb99(0x110)](_0x124fc7);if(_0x1456b7[0x0][_0x23bb99(0x190)]==_0x23bb99(0x155))var _0x650a1e=users[_0x23bb99(0x121)];else{if(_0x1456b7[0x0][_0x23bb99(0x190)]==_0x23bb99(0x11b))var _0x650a1e=users[_0x23bb99(0x11b)];else{if(_0x1456b7[0x0][_0x23bb99(0x190)]==_0x23bb99(0x148))var _0x650a1e=users['German'];else{if(_0x1456b7[0x0]['language']==_0x23bb99(0x17e))var _0x650a1e=users['Spanish'];else{if(_0x1456b7[0x0][_0x23bb99(0x190)]==_0x23bb99(0x10f))var _0x650a1e=users[_0x23bb99(0x10f)];else{if(_0x1456b7[0x0]['language']==_0x23bb99(0x1b7))var _0x650a1e=users[_0x23bb99(0x12f)];else{if(_0x1456b7[0x0][_0x23bb99(0x190)]==_0x23bb99(0x1b6))var _0x650a1e=users[_0x23bb99(0x1b6)];else{if(_0x1456b7[0x0][_0x23bb99(0x190)]=='Arabic\x20(ae)')var _0x650a1e=users['Arabic'];}}}}}}}_0x2f4735[_0x23bb99(0xfd)](_0x23bb99(0x19c),{'success':_0x2de498['flash'](_0x23bb99(0x168)),'errors':_0x2de498['flash'](_0x23bb99(0x19b)),'role':_0x59958d,'profile':_0xee624a,'master_shop':_0x1456b7,'user':_0x132cd3,'language':_0x650a1e});}catch(_0x2c0b22){console[_0x23bb99(0x115)](_0x2c0b22);}}),router[a0_0x1c4ffd(0x18f)](a0_0x1c4ffd(0x1a7),auth,async(_0x27f2b8,_0x325e5e)=>{const _0xbf9c0a=a0_0x1c4ffd;try{const _0x233506=_0x27f2b8[_0xbf9c0a(0x102)]['id'],_0x32a233=await categories[_0xbf9c0a(0x12b)](_0x233506,_0x27f2b8[_0xbf9c0a(0x120)]);_0x27f2b8['flash'](_0xbf9c0a(0x168),''+users[_0xbf9c0a(0x134)]),_0x325e5e[_0xbf9c0a(0x144)](_0xbf9c0a(0x141));}catch(_0x501d5f){console[_0xbf9c0a(0x115)](_0x501d5f);}}),router['get'](a0_0x1c4ffd(0x139),auth,async(_0x5685f0,_0x52acfb)=>{const _0x13157d=a0_0x1c4ffd;try{const _0x514593=_0x5685f0['params']['id'],_0x5e3e9a=await categories[_0x13157d(0x183)](_0x514593);_0x5685f0[_0x13157d(0x159)]('success','categories\x20data\x20delete\x20successfully'),_0x52acfb[_0x13157d(0x144)]('/products/categories');}catch(_0x43b87c){console[_0x13157d(0x115)](_0x43b87c);}}),router[a0_0x1c4ffd(0x16d)](a0_0x1c4ffd(0x11f),auth,async(_0x3bbcff,_0x1a6b3a)=>{const _0xd9611e=a0_0x1c4ffd;try{const {username:_0x4bc104,email:_0x35f182,role:_0x5e0564}=_0x3bbcff[_0xd9611e(0x156)],_0x25800e=_0x3bbcff[_0xd9611e(0x156)],_0x28fb28=await profile[_0xd9611e(0x1a4)]({'email':_0x25800e['email']}),_0x664365=await master_shop[_0xd9611e(0x153)]();console[_0xd9611e(0x115)]('master',_0x664365);const _0x245708=await brands[_0xd9611e(0x153)]();if(_0x664365[0x0]['language']==_0xd9611e(0x155))var _0x4fc0a6=users[_0xd9611e(0x121)];else{if(_0x664365[0x0][_0xd9611e(0x190)]==_0xd9611e(0x11b))var _0x4fc0a6=users[_0xd9611e(0x11b)];else{if(_0x664365[0x0]['language']==_0xd9611e(0x148))var _0x4fc0a6=users[_0xd9611e(0x148)];else{if(_0x664365[0x0][_0xd9611e(0x190)]=='Spanish')var _0x4fc0a6=users[_0xd9611e(0x17e)];else{if(_0x664365[0x0]['language']==_0xd9611e(0x10f))var _0x4fc0a6=users[_0xd9611e(0x10f)];else{if(_0x664365[0x0][_0xd9611e(0x190)]=='Portuguese\x20(BR)')var _0x4fc0a6=users[_0xd9611e(0x12f)];else{if(_0x664365[0x0][_0xd9611e(0x190)]==_0xd9611e(0x1b6))var _0x4fc0a6=users[_0xd9611e(0x1b6)];else{if(_0x664365[0x0]['language']==_0xd9611e(0x12d))var _0x4fc0a6=users[_0xd9611e(0x1ba)];}}}}}}}_0x1a6b3a['render'](_0xd9611e(0x16f),{'success':_0x3bbcff[_0xd9611e(0x159)](_0xd9611e(0x168)),'errors':_0x3bbcff[_0xd9611e(0x159)](_0xd9611e(0x19b)),'role':_0x25800e,'profile':_0x28fb28,'master_shop':_0x664365,'user':_0x245708,'language':_0x4fc0a6});}catch(_0xd47369){console['log'](_0xd47369);}}),router[a0_0x1c4ffd(0x18f)]('/brands',auth,async(_0x4aa8fd,_0x3869d5)=>{const _0x52654b=a0_0x1c4ffd;try{const {name:_0x278f1e,products:_0x19fd01}=_0x4aa8fd['body'],_0x3daec7=new brands({'name':_0x278f1e,'products':_0x19fd01}),_0x25fdd5=await brands[_0x52654b(0x1a4)]({'name':_0x278f1e});_0x25fdd5?_0x4aa8fd[_0x52654b(0x159)](_0x52654b(0x19b),_0x278f1e+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x4aa8fd[_0x52654b(0x159)]('success',_0x278f1e+'\x20brand\x20is\x20add\x20successfully');const _0x25b81b=await _0x3daec7[_0x52654b(0x10b)]();_0x3869d5[_0x52654b(0x144)]('/products/brands');}catch(_0x140154){console[_0x52654b(0x115)](_0x140154);}}),router[a0_0x1c4ffd(0x16d)](a0_0x1c4ffd(0x114),auth,async(_0x497b1d,_0x457b65)=>{const _0x1601ad=a0_0x1c4ffd;try{const {username:_0x3f701e,email:_0x179540,role:_0x2a4f02}=_0x497b1d[_0x1601ad(0x156)],_0x4c23d8=_0x497b1d[_0x1601ad(0x156)],_0x5cb54c=await profile[_0x1601ad(0x1a4)]({'email':_0x4c23d8[_0x1601ad(0x198)]}),_0x3f563d=await master_shop['find']();console[_0x1601ad(0x115)]('master',_0x3f563d);const _0x22ecbb=_0x497b1d[_0x1601ad(0x102)]['id'];console[_0x1601ad(0x115)](_0x22ecbb);const _0x15678=await brands[_0x1601ad(0x110)](_0x22ecbb);if(_0x3f563d[0x0][_0x1601ad(0x190)]=='English\x20(US)')var _0xdb5b21=users[_0x1601ad(0x121)];else{if(_0x3f563d[0x0][_0x1601ad(0x190)]==_0x1601ad(0x11b))var _0xdb5b21=users['Hindi'];else{if(_0x3f563d[0x0][_0x1601ad(0x190)]==_0x1601ad(0x148))var _0xdb5b21=users['German'];else{if(_0x3f563d[0x0][_0x1601ad(0x190)]==_0x1601ad(0x17e))var _0xdb5b21=users[_0x1601ad(0x17e)];else{if(_0x3f563d[0x0]['language']==_0x1601ad(0x10f))var _0xdb5b21=users[_0x1601ad(0x10f)];else{if(_0x3f563d[0x0]['language']==_0x1601ad(0x1b7))var _0xdb5b21=users[_0x1601ad(0x12f)];else{if(_0x3f563d[0x0][_0x1601ad(0x190)]==_0x1601ad(0x1b6))var _0xdb5b21=users[_0x1601ad(0x1b6)];else{if(_0x3f563d[0x0][_0x1601ad(0x190)]==_0x1601ad(0x12d))var _0xdb5b21=users['Arabic'];}}}}}}}_0x457b65[_0x1601ad(0xfd)]('brands',{'success':_0x497b1d[_0x1601ad(0x159)](_0x1601ad(0x168)),'errors':_0x497b1d[_0x1601ad(0x159)](_0x1601ad(0x19b)),'role':_0x4c23d8,'profile':_0x5cb54c,'master_shop':_0x3f563d,'user':_0x15678,'language':_0xdb5b21});}catch(_0x1d8a07){console[_0x1601ad(0x115)](_0x1d8a07);}}),router['post'](a0_0x1c4ffd(0x114),auth,async(_0x3c8031,_0x19a57b)=>{const _0x5e1f1e=a0_0x1c4ffd;try{const _0x48fcd5=_0x3c8031[_0x5e1f1e(0x102)]['id'],_0x497c04=await brands[_0x5e1f1e(0x12b)](_0x48fcd5,_0x3c8031[_0x5e1f1e(0x120)]);_0x3c8031['flash'](_0x5e1f1e(0x168),'brand\x20data\x20update\x20successfully'),_0x19a57b[_0x5e1f1e(0x144)]('/products/brands');}catch(_0x2b38f1){console[_0x5e1f1e(0x115)](_0x2b38f1);}}),router[a0_0x1c4ffd(0x16d)](a0_0x1c4ffd(0x171),auth,async(_0x1ebeee,_0x4bff7e)=>{const _0x215034=a0_0x1c4ffd;try{const _0x3ecf7f=_0x1ebeee[_0x215034(0x102)]['id'],_0x1acd3b=await brands[_0x215034(0x183)](_0x3ecf7f);_0x1ebeee['flash'](_0x215034(0x168),_0x215034(0x14d)),_0x4bff7e['redirect'](_0x215034(0x181));}catch(_0x468238){console[_0x215034(0x115)](_0x468238);}}),router[a0_0x1c4ffd(0x16d)](a0_0x1c4ffd(0x165),auth,async(_0x363b4d,_0xfcaf98)=>{const _0x4e6620=a0_0x1c4ffd;try{const {username:_0x3a33c4,email:_0x36e14b,role:_0x34a5ea}=_0x363b4d[_0x4e6620(0x156)],_0xc36d9c=_0x363b4d[_0x4e6620(0x156)],_0x197f15=await profile[_0x4e6620(0x1a4)]({'email':_0xc36d9c[_0x4e6620(0x198)]}),_0x5c0d7c=await master_shop[_0x4e6620(0x153)]();console[_0x4e6620(0x115)](_0x4e6620(0x191),_0x5c0d7c);const _0x431d25=await units['find']();if(_0x5c0d7c[0x0][_0x4e6620(0x190)]==_0x4e6620(0x155))var _0x352209=users[_0x4e6620(0x121)];else{if(_0x5c0d7c[0x0][_0x4e6620(0x190)]==_0x4e6620(0x11b))var _0x352209=users['Hindi'];else{if(_0x5c0d7c[0x0]['language']==_0x4e6620(0x148))var _0x352209=users[_0x4e6620(0x148)];else{if(_0x5c0d7c[0x0][_0x4e6620(0x190)]==_0x4e6620(0x17e))var _0x352209=users[_0x4e6620(0x17e)];else{if(_0x5c0d7c[0x0][_0x4e6620(0x190)]==_0x4e6620(0x10f))var _0x352209=users['French'];else{if(_0x5c0d7c[0x0]['language']=='Portuguese\x20(BR)')var _0x352209=users[_0x4e6620(0x12f)];else{if(_0x5c0d7c[0x0][_0x4e6620(0x190)]==_0x4e6620(0x1b6))var _0x352209=users[_0x4e6620(0x1b6)];else{if(_0x5c0d7c[0x0][_0x4e6620(0x190)]==_0x4e6620(0x12d))var _0x352209=users['Arabic'];}}}}}}}_0xfcaf98['render']('units',{'success':_0x363b4d[_0x4e6620(0x159)](_0x4e6620(0x168)),'errors':_0x363b4d['flash'](_0x4e6620(0x19b)),'role':_0xc36d9c,'profile':_0x197f15,'master_shop':_0x5c0d7c,'user':_0x431d25,'language':_0x352209});}catch(_0x1b575c){console[_0x4e6620(0x115)](_0x1b575c);}}),router[a0_0x1c4ffd(0x18f)](a0_0x1c4ffd(0x165),auth,async(_0x52b5ec,_0x49006a)=>{const _0x4afdfe=a0_0x1c4ffd;try{const {name:_0xf66c4,secondary_unit:_0x19d026,products:_0x1341b0}=_0x52b5ec[_0x4afdfe(0x120)],_0x4b053d=new units({'name':_0xf66c4,'secondary_unit':_0x19d026,'products':_0x1341b0}),_0x42ae8e=await units[_0x4afdfe(0x1a4)]({'name':_0xf66c4});_0x42ae8e?_0x52b5ec['flash'](_0x4afdfe(0x19b),_0xf66c4+_0x4afdfe(0x1a0)):_0x52b5ec['flash'](_0x4afdfe(0x168),_0xf66c4+'\x20unit\x20is\x20add\x20successfully');const _0x255a74=await _0x4b053d[_0x4afdfe(0x10b)]();_0x49006a[_0x4afdfe(0x144)]('/products/units');}catch(_0x291077){console[_0x4afdfe(0x115)](_0x291077);}}),router[a0_0x1c4ffd(0x16d)](a0_0x1c4ffd(0x192),auth,async(_0x152fb3,_0x595eaf)=>{const _0x6d7a8f=a0_0x1c4ffd;try{const {username:_0x58f897,email:_0x443b02,role:_0x1bd27d}=_0x152fb3[_0x6d7a8f(0x156)],_0xbdfea6=_0x152fb3[_0x6d7a8f(0x156)],_0x1ce6f3=await profile['findOne']({'email':_0xbdfea6[_0x6d7a8f(0x198)]}),_0x4c6be8=await master_shop[_0x6d7a8f(0x153)]();console[_0x6d7a8f(0x115)]('master',_0x4c6be8);const _0x2c5e8d=_0x152fb3['params']['id'],_0x43ee9b=await units[_0x6d7a8f(0x110)](_0x2c5e8d);if(_0x4c6be8[0x0][_0x6d7a8f(0x190)]==_0x6d7a8f(0x155))var _0x3b6632=users[_0x6d7a8f(0x121)];else{if(_0x4c6be8[0x0][_0x6d7a8f(0x190)]==_0x6d7a8f(0x11b))var _0x3b6632=users['Hindi'];else{if(_0x4c6be8[0x0]['language']==_0x6d7a8f(0x148))var _0x3b6632=users[_0x6d7a8f(0x148)];else{if(_0x4c6be8[0x0][_0x6d7a8f(0x190)]==_0x6d7a8f(0x17e))var _0x3b6632=users[_0x6d7a8f(0x17e)];else{if(_0x4c6be8[0x0][_0x6d7a8f(0x190)]==_0x6d7a8f(0x10f))var _0x3b6632=users[_0x6d7a8f(0x10f)];else{if(_0x4c6be8[0x0][_0x6d7a8f(0x190)]==_0x6d7a8f(0x1b7))var _0x3b6632=users[_0x6d7a8f(0x12f)];else{if(_0x4c6be8[0x0]['language']==_0x6d7a8f(0x1b6))var _0x3b6632=users[_0x6d7a8f(0x1b6)];else{if(_0x4c6be8[0x0]['language']=='Arabic\x20(ae)')var _0x3b6632=users[_0x6d7a8f(0x1ba)];}}}}}}}_0x595eaf[_0x6d7a8f(0xfd)](_0x6d7a8f(0x1b5),{'success':_0x152fb3[_0x6d7a8f(0x159)](_0x6d7a8f(0x168)),'errors':_0x152fb3[_0x6d7a8f(0x159)]('errors'),'role':_0xbdfea6,'profile':_0x1ce6f3,'master_shop':_0x4c6be8,'user':_0x43ee9b,'language':_0x3b6632});}catch(_0x2dfefa){console['log'](_0x2dfefa);}}),router[a0_0x1c4ffd(0x18f)](a0_0x1c4ffd(0x192),auth,async(_0x5d5e49,_0xc87a24)=>{const _0x1edd39=a0_0x1c4ffd;try{const _0x3127ea=_0x5d5e49[_0x1edd39(0x102)]['id'],_0x41747d=await units[_0x1edd39(0x12b)](_0x3127ea,_0x5d5e49['body']);_0x5d5e49['flash'](_0x1edd39(0x168),_0x1edd39(0x101)),_0xc87a24[_0x1edd39(0x144)](_0x1edd39(0x16a));}catch(_0x2cf99c){console['log'](_0x2cf99c);}}),router['get'](a0_0x1c4ffd(0x13f),auth,async(_0x49e2e7,_0x5d3473)=>{const _0x2ba795=a0_0x1c4ffd;try{const _0x50822c=_0x49e2e7['params']['id'],_0x4b70c0=await units[_0x2ba795(0x183)](_0x50822c);_0x49e2e7[_0x2ba795(0x159)](_0x2ba795(0x168),_0x2ba795(0xff)),_0x5d3473[_0x2ba795(0x144)](_0x2ba795(0x16a));}catch(_0xeb70e3){console['log'](_0xeb70e3);}});const storage=multer[a0_0x1c4ffd(0x143)]({'destination':(_0x552730,_0x47cd07,_0x542e65)=>{const _0x360a8c=a0_0x1c4ffd;_0x542e65(null,_0x360a8c(0x105));},'filename':(_0x3cdcf0,_0x3a21bc,_0x167e1b)=>{const _0x1d1e1e=a0_0x1c4ffd;_0x167e1b(null,Date[_0x1d1e1e(0x16c)]()+_0x3a21bc[_0x1d1e1e(0x10c)]);}}),upload=multer({'storage':storage});function a0_0x366a(){const _0x16143b=['../models/all_models','Secondary_Units','Category','categories_edit','filename','data','/print_barcode_single/:id','Finished\x20Goods','/categories/delete/:id','Primary_Code','products','$product_details.product_stock','message','/products_export_migrate_file','/units/delete/:id','product_stock','/products/categories','1649RDzrHA','diskStorage','redirect','product\x20add\x20successfully','Products\x20warehouse_data','Product_Name','German','multer','\x20<>\x20','/barcode_filter','Products','brand\x20data\x20delete\x20successfully','sheet_to_json','product_barcode','_id','readFile','/view/add_products','find','status','English\x20(US)','user','product_code','662vtOGcA','flash','Maximum_Stocks','addWorksheet','width','SheetNames','Products_category','unit','802408YZDAQc','Secondary_Code','aggregate','Products\x20master','category','/units','3345558rbvRmR','$_id','success','/products/view','/products/units','toBuffer','now','get','express','brands','exceljs','/brands/delete/:id','/select_data','public/Migration/','stock','numeric','alertquantity','brand','$secondary_unit','MaxperUnits','CODE128','PUnits','product_barcode_products','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Spanish','$category','push','/products/brands','/products_import_migrate_file','findByIdAndDelete','Raw\x20Materials','defaultProduct.avif','prod_categ','2349162jMVGcK','maxStocks','Prod_Cat','image','product_docs','/barcode_data','toString','jsbarcode','post','language','master','/units/:id','secondary_code','maxProdPerUnit','/view/:id','express/lib/response','PCat','email','end','then','errors','categories','Workbook','warehouse','edit_product','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','2195090tOSLJA','Units','secondary_unit','findOne','forEach','pdfkit-table','/categories/:id','$product_details.product_name','json','barcode\x20user_id','Enabled','type_products','49OCRCpc','\x20categories\x20is\x20add\x20successfully','barcode\x20Product\x20master','Sheets','/print_barcode_filter_search/','PAlQty','PName','PSecondaryUnits','units','Chinese','Portuguese\x20(BR)','min','/categories','Arabic','Router','$product_stock','product\x20update\x20successfully','concat','render','Content-Disposition','unit\x20data\x20delete\x20successfully','ProductCode','unit\x20data\x20update\x20successfully','params','migrate_product_fule','Product_Code','public/upload','columns','addPage','Products\x20find_data','$product_docs','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','save','originalname','$product_details','12232ZsruzI','French','findById','single','product\x20edit','sku','/brands/:id','log','max_number_per_units','height','Brands','exports','long','Hindi','name','\x20added\x20successfully','categ','/brands','body','English','file','product_category','xlsx','primary_code','PBrands','/view','length','Content-Type','$product_category','findByIdAndUpdate','615DGWewK','Arabic\x20(ae)','3239420PrwFBp','Portuguese','Alert_QTY'];a0_0x366a=function(){return _0x16143b;};return a0_0x366a();}router[a0_0x1c4ffd(0x16d)](a0_0x1c4ffd(0x127),auth,async(_0x130f53,_0x12603c)=>{const _0x207d1d=a0_0x1c4ffd;try{const {username:_0x1cccaa,email:_0x41ca8b,role:_0x1004dc}=_0x130f53[_0x207d1d(0x156)],_0xc8d53b=_0x130f53[_0x207d1d(0x156)],_0x53932e=await profile[_0x207d1d(0x1a4)]({'email':_0xc8d53b[_0x207d1d(0x198)]}),_0x5e7040={'year':_0x207d1d(0x175),'month':_0x207d1d(0x11a),'day':'numeric'},_0x4d51df=await master_shop[_0x207d1d(0x153)]();console[_0x207d1d(0x115)](_0x207d1d(0x163),_0x4d51df);const _0x53d0a1=await product['find']();console[_0x207d1d(0x115)](_0x207d1d(0x108),_0x53d0a1);const _0x3ce3dc=await warehouse['aggregate']([{'$unwind':_0x207d1d(0x10d)},{'$lookup':{'from':_0x207d1d(0x13b),'localField':'product_details.product_name','foreignField':'name','as':_0x207d1d(0x18b)}},{'$unwind':_0x207d1d(0x109)},{'$project':{'product_name':_0x207d1d(0x1a8),'product_stock':_0x207d1d(0x13c)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x207d1d(0x1bc)}}}]);console['log'](_0x207d1d(0x146),_0x3ce3dc),_0x3ce3dc[_0x207d1d(0x1a5)](_0x1e43ea=>{const _0x426f9e=_0x53d0a1['map'](_0x2a2a6e=>{const _0x378494=a0_0x4460;_0x2a2a6e['name']==_0x1e43ea[_0x378494(0x150)]&&(_0x2a2a6e[_0x378494(0x174)]=parseInt(_0x2a2a6e[_0x378494(0x174)])+parseInt(_0x1e43ea[_0x378494(0x140)]));});}),console[_0x207d1d(0x115)]('Products\x20find_data',_0x53d0a1);if(_0x4d51df[0x0]['language']=='English\x20(US)')var _0x2b7ec8=users['English'];else{if(_0x4d51df[0x0]['language']==_0x207d1d(0x11b))var _0x2b7ec8=users[_0x207d1d(0x11b)];else{if(_0x4d51df[0x0]['language']=='German')var _0x2b7ec8=users['German'];else{if(_0x4d51df[0x0][_0x207d1d(0x190)]=='Spanish')var _0x2b7ec8=users[_0x207d1d(0x17e)];else{if(_0x4d51df[0x0][_0x207d1d(0x190)]==_0x207d1d(0x10f))var _0x2b7ec8=users[_0x207d1d(0x10f)];else{if(_0x4d51df[0x0]['language']==_0x207d1d(0x1b7))var _0x2b7ec8=users[_0x207d1d(0x12f)];else{if(_0x4d51df[0x0]['language']=='Chinese')var _0x2b7ec8=users['Chinese'];else{if(_0x4d51df[0x0][_0x207d1d(0x190)]=='Arabic\x20(ae)')var _0x2b7ec8=users[_0x207d1d(0x1ba)];}}}}}}}_0x12603c[_0x207d1d(0xfd)](_0x207d1d(0x13b),{'success':_0x130f53['flash']('success'),'errors':_0x130f53['flash'](_0x207d1d(0x19b)),'alldata':_0x53d0a1,'profile':_0x53932e,'master_shop':_0x4d51df,'role':_0xc8d53b,'product_stock':_0x3ce3dc,'language':_0x2b7ec8});}catch(_0x5c01b8){console['log'](_0x5c01b8);}}),router[a0_0x1c4ffd(0x16d)](a0_0x1c4ffd(0x152),auth,async(_0x3ac0ad,_0xd2d6da)=>{const _0xee0c06=a0_0x1c4ffd;try{const {username:_0x1783d5,email:_0x39910b,role:_0x3ca6b5}=_0x3ac0ad['user'],_0x369b67=_0x3ac0ad[_0xee0c06(0x156)],_0x450075=await profile['findOne']({'email':_0x369b67[_0xee0c06(0x198)]}),_0x10eb01=await master_shop[_0xee0c06(0x153)]();console[_0xee0c06(0x115)](_0xee0c06(0x191),_0x10eb01);const _0x244a36=await categories[_0xee0c06(0x153)]({}),_0x3b0e79=await brands[_0xee0c06(0x153)]({}),_0x578baf=await units[_0xee0c06(0x153)]({}),_0x5aa8f1=await warehouse[_0xee0c06(0x153)]({'status':'Enabled'});if(_0x10eb01[0x0][_0xee0c06(0x190)]=='English\x20(US)')var _0xad99b=users[_0xee0c06(0x121)];else{if(_0x10eb01[0x0][_0xee0c06(0x190)]==_0xee0c06(0x11b))var _0xad99b=users[_0xee0c06(0x11b)];else{if(_0x10eb01[0x0][_0xee0c06(0x190)]=='German')var _0xad99b=users[_0xee0c06(0x148)];else{if(_0x10eb01[0x0][_0xee0c06(0x190)]==_0xee0c06(0x17e))var _0xad99b=users[_0xee0c06(0x17e)];else{if(_0x10eb01[0x0][_0xee0c06(0x190)]=='French')var _0xad99b=users[_0xee0c06(0x10f)];else{if(_0x10eb01[0x0][_0xee0c06(0x190)]=='Portuguese\x20(BR)')var _0xad99b=users[_0xee0c06(0x12f)];else{if(_0x10eb01[0x0][_0xee0c06(0x190)]=='Chinese')var _0xad99b=users[_0xee0c06(0x1b6)];else{if(_0x10eb01[0x0]['language']==_0xee0c06(0x12d))var _0xad99b=users[_0xee0c06(0x1ba)];}}}}}}}_0xd2d6da[_0xee0c06(0xfd)]('add_product',{'success':_0x3ac0ad[_0xee0c06(0x159)](_0xee0c06(0x168)),'errors':_0x3ac0ad[_0xee0c06(0x159)](_0xee0c06(0x19b)),'role':_0x369b67,'profile':_0x450075,'categories':_0x244a36,'brands':_0x3b0e79,'master_shop':_0x10eb01,'units':_0x578baf,'language':_0xad99b,'find_data':_0x5aa8f1});}catch(_0x1e9396){console[_0xee0c06(0x115)](_0x1e9396);}}),router[a0_0x1c4ffd(0x18f)]('/view/add_products',auth,upload['single'](a0_0x1c4ffd(0x18a)),async(_0x5a2c8d,_0x277663)=>{const _0x3444b4=a0_0x1c4ffd;try{const {name:_0x474440,category:_0x1ff2f8,brand:_0x9ed7,unit:_0x12245c,alertquantity:_0x104d48,stock:_0x533bed,product_code:_0x45c6ab,warehouse:_0x2abe56,primary_ItemCode:_0x149f16,second_ItemCode:_0x5a3ffe,second_unit:_0x184a96,maxPerUnit:_0x3b3e38,MaxPerProduct:_0x485644,sales_cat:_0x428463,type_prod:_0xcfc8e6}=_0x5a2c8d[_0x3444b4(0x120)],_0x482cf8=_0x5a2c8d[_0x3444b4(0x122)]?.[_0x3444b4(0x135)]||_0x3444b4(0x185),_0x37aa4f=new product({'image':_0x482cf8,'name':_0x474440,'category':_0x1ff2f8,'brand':_0x9ed7,'unit':_0x12245c,'alertquantity':_0x104d48,'stock':_0x533bed,'product_code':_0x45c6ab,'warehouse':_0x2abe56,'primary_code':_0x149f16,'secondary_code':_0x5a3ffe,'second_unit':_0x184a96,'maxStocks':_0x485644,'maxProdPerUnit':_0x3b3e38,'sales_category':_0x428463,'type_products':_0xcfc8e6}),_0xe7b2aa=await _0x37aa4f[_0x3444b4(0x10b)](),_0x4bb1d0=await categories[_0x3444b4(0x1a4)]({'name':_0x1ff2f8});_0x4bb1d0[_0x3444b4(0x13b)]=parseInt(_0x4bb1d0['products'])+0x1,await _0x4bb1d0['save']();const _0x7f5b55=await brands[_0x3444b4(0x1a4)]({'name':_0x9ed7});_0x7f5b55[_0x3444b4(0x13b)]=parseInt(_0x7f5b55[_0x3444b4(0x13b)])+0x1,await _0x7f5b55[_0x3444b4(0x10b)]();const _0x4466aa=await units[_0x3444b4(0x1a4)]({'name':_0x12245c});_0x4466aa[_0x3444b4(0x13b)]=parseInt(_0x4466aa['products'])+0x1,await _0x4466aa[_0x3444b4(0x10b)](),_0x5a2c8d[_0x3444b4(0x159)](_0x3444b4(0x168),_0x3444b4(0x145)),_0x277663[_0x3444b4(0x144)]('/products/view');}catch(_0xfc4495){console[_0x3444b4(0x115)](_0xfc4495);}}),router[a0_0x1c4ffd(0x16d)]('/view/:id',auth,async(_0x2450b9,_0x1327f4)=>{const _0x3201b5=a0_0x1c4ffd;try{const {username:_0x30445f,email:_0x3db4c2,role:_0x291205}=_0x2450b9['user'],_0x24b097=_0x2450b9[_0x3201b5(0x156)],_0x40485f=await profile[_0x3201b5(0x1a4)]({'email':_0x24b097['email']}),_0x297e64=await master_shop['find']();console[_0x3201b5(0x115)]('edit\x20Product\x20master',_0x297e64);const _0x1309ff=_0x2450b9[_0x3201b5(0x102)]['id'],_0xa38ac8=await product['findById'](_0x1309ff),_0x7a225d=await categories[_0x3201b5(0x153)]({}),_0xa70ccf=await brands[_0x3201b5(0x153)]({}),_0x21ab4b=await units[_0x3201b5(0x153)]({}),_0x33729b=await warehouse[_0x3201b5(0x153)]({'status':_0x3201b5(0x1ab)}),_0x38cc86=await units[_0x3201b5(0x162)]([{'$group':{'_id':_0x3201b5(0x167),'secondaryunit':{'$first':_0x3201b5(0x178)}}}]);if(_0x297e64[0x0]['language']==_0x3201b5(0x155))var _0x50ec19=users['English'];else{if(_0x297e64[0x0][_0x3201b5(0x190)]==_0x3201b5(0x11b))var _0x50ec19=users[_0x3201b5(0x11b)];else{if(_0x297e64[0x0][_0x3201b5(0x190)]==_0x3201b5(0x148))var _0x50ec19=users['German'];else{if(_0x297e64[0x0][_0x3201b5(0x190)]=='Spanish')var _0x50ec19=users[_0x3201b5(0x17e)];else{if(_0x297e64[0x0][_0x3201b5(0x190)]==_0x3201b5(0x10f))var _0x50ec19=users[_0x3201b5(0x10f)];else{if(_0x297e64[0x0][_0x3201b5(0x190)]==_0x3201b5(0x1b7))var _0x50ec19=users[_0x3201b5(0x12f)];else{if(_0x297e64[0x0][_0x3201b5(0x190)]==_0x3201b5(0x1b6))var _0x50ec19=users[_0x3201b5(0x1b6)];else{if(_0x297e64[0x0][_0x3201b5(0x190)]==_0x3201b5(0x12d))var _0x50ec19=users[_0x3201b5(0x1ba)];}}}}}}}_0x1327f4[_0x3201b5(0xfd)](_0x3201b5(0x19f),{'success':_0x2450b9[_0x3201b5(0x159)](_0x3201b5(0x168)),'errors':_0x2450b9[_0x3201b5(0x159)](_0x3201b5(0x19b)),'role':_0x24b097,'profile':_0x40485f,'alldata':_0xa38ac8,'categories':_0x7a225d,'brands':_0xa70ccf,'master_shop':_0x297e64,'units':_0x21ab4b,'secondunit':_0x38cc86,'find_data':_0x33729b,'language':_0x50ec19});}catch(_0x2cac6b){console[_0x3201b5(0x115)](_0x2cac6b);}}),router[a0_0x1c4ffd(0x18f)](a0_0x1c4ffd(0x195),auth,upload['single'](a0_0x1c4ffd(0x18a)),async(_0x2de133,_0x115dd4)=>{const _0xac2b28=a0_0x1c4ffd;try{const _0x136a40=_0x2de133[_0xac2b28(0x102)]['id'],_0x29410e=await product['findById'](_0x136a40),{image:_0x543fa8,name:_0x71d6bd,category:_0x2a943b,brand:_0x11f380,sku:_0x34e02b,unit:_0x5a60f3,alertquantity:_0x348c80,product_code:_0x8782ce,warehouse:_0x29a19a,primary_ItemCode:_0x4b92e4,second_ItemCode:_0x4a05ed,second_unit:_0x3c1580,maxPerUnit:_0x103545,MaxPerProduct:_0x1f55ec,prod_catdata:_0x3e7dc1,type_prod:_0x4c4a1a,sales_cat:_0x372dd6}=_0x2de133['body'];_0x2de133[_0xac2b28(0x122)]&&(_0x29410e[_0xac2b28(0x18a)]=_0x2de133[_0xac2b28(0x122)][_0xac2b28(0x135)]);_0x29410e[_0xac2b28(0x11c)]=_0x71d6bd,_0x29410e[_0xac2b28(0x164)]=_0x2a943b,_0x29410e[_0xac2b28(0x177)]=_0x11f380,_0x29410e[_0xac2b28(0x113)]=_0x34e02b,_0x29410e[_0xac2b28(0x15f)]=_0x5a60f3,_0x29410e[_0xac2b28(0x176)]=_0x348c80,_0x29410e[_0xac2b28(0x157)]=_0x8782ce,_0x29410e[_0xac2b28(0x19e)]=_0x29a19a,_0x29410e[_0xac2b28(0x125)]=_0x4b92e4,_0x29410e[_0xac2b28(0x193)]=_0x4a05ed,_0x29410e[_0xac2b28(0x1a3)]=_0x3c1580,_0x29410e[_0xac2b28(0x188)]=_0x1f55ec,_0x29410e[_0xac2b28(0x194)]=_0x103545,_0x29410e['product_category']=_0x3e7dc1,_0x29410e[_0xac2b28(0x1ac)]=_0x4c4a1a,_0x29410e['sales_category']=_0x372dd6;const _0x2a632d=await _0x29410e[_0xac2b28(0x10b)]();console[_0xac2b28(0x115)](_0xac2b28(0x112),_0x29410e),_0x2de133[_0xac2b28(0x159)](_0xac2b28(0x168),_0xac2b28(0xfb)),_0x115dd4['redirect'](_0xac2b28(0x169));}catch(_0x1edccd){console[_0xac2b28(0x115)](_0x1edccd);}}),router[a0_0x1c4ffd(0x16d)]('/barcode/:id',auth,async(_0x258905,_0x5ae619)=>{const _0x45a75e=a0_0x1c4ffd;try{const {username:_0x25b8f6,email:_0x57f993,role:_0x5620a6}=_0x258905[_0x45a75e(0x156)],_0x4a8c46=_0x258905['user'],_0x49ebd3=await profile[_0x45a75e(0x1a4)]({'email':_0x4a8c46[_0x45a75e(0x198)]}),_0x3d186b=await master_shop[_0x45a75e(0x153)]();console['log'](_0x45a75e(0x1af),_0x3d186b);const _0x5b0759=_0x258905[_0x45a75e(0x102)]['id'],_0x828eb8=await product['findById'](_0x5b0759);console[_0x45a75e(0x115)](_0x45a75e(0x1aa),_0x828eb8);if(_0x3d186b[0x0][_0x45a75e(0x190)]==_0x45a75e(0x155))var _0x82fada=users[_0x45a75e(0x121)];else{if(_0x3d186b[0x0]['language']==_0x45a75e(0x11b))var _0x82fada=users[_0x45a75e(0x11b)];else{if(_0x3d186b[0x0][_0x45a75e(0x190)]==_0x45a75e(0x148))var _0x82fada=users[_0x45a75e(0x148)];else{if(_0x3d186b[0x0][_0x45a75e(0x190)]==_0x45a75e(0x17e))var _0x82fada=users[_0x45a75e(0x17e)];else{if(_0x3d186b[0x0][_0x45a75e(0x190)]=='French')var _0x82fada=users[_0x45a75e(0x10f)];else{if(_0x3d186b[0x0][_0x45a75e(0x190)]==_0x45a75e(0x1b7))var _0x82fada=users[_0x45a75e(0x12f)];else{if(_0x3d186b[0x0][_0x45a75e(0x190)]=='Chinese')var _0x82fada=users['Chinese'];else{if(_0x3d186b[0x0][_0x45a75e(0x190)]==_0x45a75e(0x12d))var _0x82fada=users['Arabic'];}}}}}}}_0x5ae619[_0x45a75e(0xfd)](_0x45a75e(0x14f),{'success':_0x258905[_0x45a75e(0x159)](_0x45a75e(0x168)),'errors':_0x258905[_0x45a75e(0x159)](_0x45a75e(0x19b)),'role':_0x4a8c46,'profile':_0x49ebd3,'alldata':_0x828eb8,'master_shop':_0x3d186b,'language':_0x82fada});}catch(_0x417737){console['log'](_0x417737);}}),router[a0_0x1c4ffd(0x16d)](a0_0x1c4ffd(0x13e),auth,async(_0x43eed9,_0x46c176)=>{const _0x2f4ff0=a0_0x1c4ffd;try{const _0x59b552=new excelJS[(_0x2f4ff0(0x19d))](),_0x171e5a=_0x59b552[_0x2f4ff0(0x15b)](_0x2f4ff0(0x14c));return _0x171e5a[_0x2f4ff0(0x106)]=[{'header':_0x2f4ff0(0x147),'key':_0x2f4ff0(0x1b3),'width':0xa},{'header':_0x2f4ff0(0x118),'key':_0x2f4ff0(0x126),'width':0xa},{'header':_0x2f4ff0(0x1a2),'key':_0x2f4ff0(0x17b),'width':0xa},{'header':'Secondary_Units','key':_0x2f4ff0(0x1b4),'width':0xa},{'header':_0x2f4ff0(0x116),'key':_0x2f4ff0(0x179),'width':0xa},{'header':_0x2f4ff0(0x13a),'key':_0x2f4ff0(0x100),'width':0xa},{'header':_0x2f4ff0(0x161),'key':'ProductCode','width':0xa},{'header':_0x2f4ff0(0x104),'key':_0x2f4ff0(0x100),'width':0xa},{'header':_0x2f4ff0(0x133),'key':_0x2f4ff0(0x197),'width':0xa},{'header':_0x2f4ff0(0x130),'key':_0x2f4ff0(0x1b2),'width':0xa},{'header':_0x2f4ff0(0x15a),'key':'PAlQty','width':0xa},{'header':_0x2f4ff0(0x15e),'key':_0x2f4ff0(0x189),'width':0xa}],_0x46c176['setHeader'](_0x2f4ff0(0x129),_0x2f4ff0(0x10a)),_0x46c176['setHeader'](_0x2f4ff0(0xfe),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x59b552[_0x2f4ff0(0x124)]['write'](_0x46c176)[_0x2f4ff0(0x19a)](()=>{const _0x185c9f=_0x2f4ff0;_0x46c176[_0x185c9f(0x154)](0xc8);});}catch(_0x208f16){_0x46c176['status'](0x190)['send'](_0x208f16);}});const storage1=multer[a0_0x1c4ffd(0x143)]({'destination':(_0x1ca208,_0x2a1b73,_0x46a506)=>{_0x46a506(null,'public/Migration');},'filename':(_0x57a570,_0x39d8c8,_0x3775c0)=>{const _0x228db2=a0_0x1c4ffd;_0x3775c0(null,Date[_0x228db2(0x16c)]()+_0x39d8c8[_0x228db2(0x10c)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x1c4ffd(0x18f)](a0_0x1c4ffd(0x182),auth,uploadMigrate[a0_0x1c4ffd(0x111)](a0_0x1c4ffd(0x103)),async(_0x4a3fc4,_0x112dff)=>{const _0x73a2b6=a0_0x1c4ffd,_0x4351aa=_0x4a3fc4[_0x73a2b6(0x122)][_0x73a2b6(0x135)],_0x1cbddb=await xlsx[_0x73a2b6(0x151)](_0x73a2b6(0x173)+_0x4351aa);let _0x5ef481=_0x1cbddb[_0x73a2b6(0x15d)],_0x3f57c7=xlsx['utils'][_0x73a2b6(0x14e)](_0x1cbddb[_0x73a2b6(0x1b0)][_0x5ef481[0x0]]);for(const _0x6fa8f8 of _0x3f57c7){const _0x2853b7=_0x6fa8f8[_0x73a2b6(0x147)],_0x4e20b0=_0x6fa8f8[_0x73a2b6(0x118)],_0x39705d=_0x6fa8f8[_0x73a2b6(0x1a2)],_0x3463c1=_0x6fa8f8[_0x73a2b6(0x132)],_0x2e140e=_0x6fa8f8[_0x73a2b6(0x104)],_0x5c624c=_0x6fa8f8[_0x73a2b6(0x133)],_0x1917da=_0x6fa8f8[_0x73a2b6(0x130)],_0x427047=_0x6fa8f8['Primary_Code'],_0x45d339=_0x6fa8f8['Secondary_Code'],_0x309fe9=_0x6fa8f8[_0x73a2b6(0x15a)],_0xf23bff=_0x6fa8f8['max_number_per_units'],_0x147833=_0x6fa8f8[_0x73a2b6(0x15e)];try{let _0xcc71cb=await categories[_0x73a2b6(0x1a4)]({'name':_0x5c624c});if(!_0xcc71cb){const _0x3eb389=new categories({'name':_0x5c624c,'products':'0'});_0xcc71cb=await _0x3eb389['save']();}let _0x50f82b=await brands[_0x73a2b6(0x1a4)]({'name':_0x4e20b0});if(!_0x50f82b){const _0x4a4966=new brands({'name':_0x4e20b0,'products':'0'});_0x50f82b=await _0x4a4966['save']();}let _0x2e8236=await units[_0x73a2b6(0x1a4)]({'name':_0x39705d,'secondary_unit':_0x3463c1});if(!_0x2e8236){const _0x3eb22c=new units({'name':_0x39705d,'secondary_unit':_0x3463c1,'products':'0'});_0x2e8236=await _0x3eb22c['save']();}const _0x66c229=await product[_0x73a2b6(0x153)]({'name':_0x2853b7,'category':_0xcc71cb[_0x73a2b6(0x11c)],'brand':_0x50f82b['name'],'secondary_unit':_0x2e8236['secondary_unit'],'product_code':_0x2e140e});console[_0x73a2b6(0x115)](_0x66c229[_0x73a2b6(0x128)]+_0x73a2b6(0x14a)+_0xcc71cb[_0x73a2b6(0x11c)]+_0x73a2b6(0x14a)+_0x50f82b['name']+_0x73a2b6(0x14a)+_0x2e8236['secondary_unit']+'\x20<>\x20'+_0x2e140e+_0x73a2b6(0x14a)+_0x2853b7);if(_0x66c229['length']===0x0){const _0x2b5076=new product({'image':_0x73a2b6(0x185),'name':_0x2853b7,'category':_0xcc71cb['name'],'brand':_0x50f82b[_0x73a2b6(0x11c)],'unit':_0x2e8236['name'],'alertquantity':_0x1917da,'product_code':_0x2e140e,'secondary_unit':_0x2e8236[_0x73a2b6(0x1a3)],'primary_code':_0x427047,'secondary_code':_0x45d339,'maxStocks':_0x309fe9,'maxProdPerUnit':_0xf23bff,'product_category':_0x147833}),_0x85d90c=await _0x2b5076[_0x73a2b6(0x10b)]();_0xcc71cb[_0x73a2b6(0x13b)]=parseInt(_0xcc71cb[_0x73a2b6(0x13b)])+0x1,await _0xcc71cb[_0x73a2b6(0x10b)](),_0x50f82b[_0x73a2b6(0x13b)]=parseInt(_0x50f82b[_0x73a2b6(0x13b)])+0x1,await _0x50f82b[_0x73a2b6(0x10b)](),_0x2e8236[_0x73a2b6(0x13b)]=parseInt(_0x2e8236[_0x73a2b6(0x13b)])+0x1,await _0x2e8236[_0x73a2b6(0x10b)](),_0x4a3fc4[_0x73a2b6(0x159)](_0x73a2b6(0x168),_0x2853b7+_0x73a2b6(0x11d));}else{console[_0x73a2b6(0x115)](_0x66c229[0x0]);const _0x249588=_0x66c229[0x0];_0x249588['category']=_0xcc71cb['name'],_0x249588[_0x73a2b6(0x177)]=_0x50f82b['name'],_0x249588[_0x73a2b6(0x15f)]=_0x2e8236[_0x73a2b6(0x11c)],_0x249588[_0x73a2b6(0x176)]=_0x1917da,_0x249588[_0x73a2b6(0x157)]=_0x2e140e,_0x249588[_0x73a2b6(0x1a3)]=_0x2e8236['secondary_unit'],_0x249588[_0x73a2b6(0x125)]=_0x427047,_0x249588['secondary_code']=_0x45d339,_0x249588['maxStocks']=_0x309fe9,_0x249588[_0x73a2b6(0x194)]=_0xf23bff,_0x249588[_0x73a2b6(0x123)]=_0x147833;const _0x5eb536=await _0x249588[_0x73a2b6(0x10b)]();_0x4a3fc4[_0x73a2b6(0x159)](_0x73a2b6(0x168),_0x5eb536[_0x73a2b6(0x11c)]+'\x20Edit\x20Successfully');}}catch(_0xa91088){_0x112dff[_0x73a2b6(0x154)](0x1f4)[_0x73a2b6(0x1a9)]({'proderror':_0xa91088[_0x73a2b6(0x13d)],'aproduct':_0x2853b7});}}_0x112dff['redirect']('/products/view');}),router[a0_0x1c4ffd(0x18f)](a0_0x1c4ffd(0x172),auth,async(_0x244341,_0x2b8782)=>{const _0x5b8023=a0_0x1c4ffd;try{console[_0x5b8023(0x115)](_0x244341['body']);const {data_cateory:_0xe9296f,datachoose:_0x183360}=_0x244341['body'];var _0x168ad5;if(_0x183360==_0x5b8023(0x186))_0x168ad5=await product[_0x5b8023(0x162)]([{'$group':{'_id':_0x5b8023(0x12a)}}]);else{if(_0x183360==_0x5b8023(0x16f))_0x168ad5=await product[_0x5b8023(0x162)]([{'$match':{'product_category':_0xe9296f}},{'$group':{'_id':'$brand'}}]);else _0x183360==_0x5b8023(0x11e)&&(_0x168ad5=await product[_0x5b8023(0x162)]([{'$match':{'product_category':_0xe9296f}},{'$group':{'_id':_0x5b8023(0x17f)}}]));}_0x2b8782[_0x5b8023(0x1a9)](_0x168ad5);}catch(_0x370ce1){_0x2b8782[_0x5b8023(0x1a9)]({'message':_0x370ce1[_0x5b8023(0x13d)]});}}),router[a0_0x1c4ffd(0x18f)]('/filter_product',auth,async(_0x4ba3cd,_0x58d576)=>{const _0x3faf06=a0_0x1c4ffd;try{const {data_choosing:_0x4099a1,data_selected:_0xcdaef}=_0x4ba3cd[_0x3faf06(0x120)];var _0x4f22a1;if(_0x4099a1==_0x3faf06(0x186))_0x4f22a1=await product[_0x3faf06(0x162)]([{'$match':{'product_category':_0xcdaef}}]);else{if(_0x4099a1==_0x3faf06(0x16f))_0x4f22a1=await product[_0x3faf06(0x162)]([{'$match':{'brand':_0xcdaef}}]);else _0x4099a1==_0x3faf06(0x11e)&&(_0x4f22a1=await product[_0x3faf06(0x162)]([{'$match':{'category':_0xcdaef}}]));}_0x58d576[_0x3faf06(0x1a9)](_0x4f22a1);}catch(_0x42b63a){_0x58d576[_0x3faf06(0x1a9)]({'message':_0x42b63a[_0x3faf06(0x13d)]});}}),router['get']('/print_barcode',auth,async(_0x25309b,_0x23f50d)=>{const _0xba7caa=a0_0x1c4ffd,_0x2ffcae=_0x25309b[_0xba7caa(0x156)],_0x1bdc79=await profile['findOne']({'email':_0x2ffcae[_0xba7caa(0x198)]}),_0x108d38=await master_shop[_0xba7caa(0x153)](),_0xacf1dc=await product[_0xba7caa(0x153)]();if(_0x108d38[0x0][_0xba7caa(0x190)]=='English\x20(US)')var _0x480281=users[_0xba7caa(0x121)];else{if(_0x108d38[0x0][_0xba7caa(0x190)]==_0xba7caa(0x11b))var _0x480281=users[_0xba7caa(0x11b)];else{if(_0x108d38[0x0][_0xba7caa(0x190)]==_0xba7caa(0x148))var _0x480281=users[_0xba7caa(0x148)];else{if(_0x108d38[0x0][_0xba7caa(0x190)]=='Spanish')var _0x480281=users['Spanish'];else{if(_0x108d38[0x0]['language']==_0xba7caa(0x10f))var _0x480281=users[_0xba7caa(0x10f)];else{if(_0x108d38[0x0][_0xba7caa(0x190)]==_0xba7caa(0x1b7))var _0x480281=users[_0xba7caa(0x12f)];else{if(_0x108d38[0x0][_0xba7caa(0x190)]==_0xba7caa(0x1b6))var _0x480281=users[_0xba7caa(0x1b6)];else{if(_0x108d38[0x0][_0xba7caa(0x190)]==_0xba7caa(0x12d))var _0x480281=users['Arabic'];}}}}}}}_0x23f50d[_0xba7caa(0xfd)](_0xba7caa(0x17c),{'success':_0x25309b[_0xba7caa(0x159)](_0xba7caa(0x168)),'errors':_0x25309b[_0xba7caa(0x159)](_0xba7caa(0x19b)),'role':_0x2ffcae,'profile':_0x1bdc79,'products':_0xacf1dc,'master_shop':_0x108d38,'language':_0x480281});}),router[a0_0x1c4ffd(0x18f)](a0_0x1c4ffd(0x18c),auth,async(_0x266ce2,_0x28182a)=>{const _0x342305=a0_0x1c4ffd,_0x5c387a=await product[_0x342305(0x153)]();_0x28182a[_0x342305(0x1a9)]({'data':_0x5c387a});}),router['post'](a0_0x1c4ffd(0x14b),auth,async(_0x5f04b1,_0x2efd64)=>{const _0x1975ce=a0_0x1c4ffd;try{const {dataProdCat:_0x548e62,dataProdIdentity:_0x4cfcf4}=_0x5f04b1[_0x1975ce(0x120)];var _0xedb3e9;switch(_0x548e62){case'fg':switch(_0x4cfcf4){case'Brands':_0xedb3e9=await product[_0x1975ce(0x162)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0xedb3e9=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x1975ce(0x167)}}]);break;}break;case'rm':switch(_0x4cfcf4){case _0x1975ce(0x118):_0xedb3e9=await product[_0x1975ce(0x162)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x1975ce(0x167)}}]);break;case'Category':_0xedb3e9=await product[_0x1975ce(0x162)]([{'$match':{'product_category':_0x1975ce(0x184)}},{'$group':{'_id':_0x1975ce(0x17f)}},{'$project':{'category':_0x1975ce(0x167)}}]);break;}break;}_0x2efd64[_0x1975ce(0x1a9)](_0xedb3e9);}catch(_0x2705d5){_0x2efd64['json']({'message':_0x2705d5[_0x1975ce(0x13d)]});}}),router[a0_0x1c4ffd(0x18f)]('/print_barcode_filter/',auth,async(_0x3ae5dd,_0x477ee3)=>{const _0x488848=a0_0x1c4ffd;try{console[_0x488848(0x115)](_0x3ae5dd[_0x488848(0x120)]);const {prod_cat:_0x31fa62,identity:_0x2f9ece,valueData:_0xc2b8d0,typeofbarcode:_0x5518c7}=_0x3ae5dd['body'];let _0xef17d2;switch(_0x31fa62){case'fg':if(_0x2f9ece==_0x488848(0x118))_0xef17d2=await product[_0x488848(0x162)]([{'$match':{'product_category':_0x488848(0x138),'brand':_0xc2b8d0}}]);else _0x2f9ece==_0x488848(0x133)&&(_0xef17d2=await product[_0x488848(0x162)]([{'$match':{'product_category':'Finished\x20Goods','category':_0xc2b8d0}}]));break;case'rm':if(_0x2f9ece==_0x488848(0x118))_0xef17d2=await product[_0x488848(0x162)]([{'$match':{'product_category':_0x488848(0x184),'brand':_0xc2b8d0}}]);else _0x2f9ece==_0x488848(0x133)&&(_0xef17d2=await product[_0x488848(0x162)]([{'$match':{'product_category':'Raw\x20Materials','category':_0xc2b8d0}}]));break;}const _0x552bb3=_0xe4032b=>_0xe4032b*0x48,_0x2ed23d={'width':0x3,'height':0x1},_0x3e7a48=new PDFDocument({'margin':_0x552bb3(0.75),'size':[_0x552bb3(_0x2ed23d[_0x488848(0x15c)]),_0x552bb3(_0x2ed23d[_0x488848(0x117)])],'bufferPages':!![]}),_0x260c2f=_0xef17d2['length'];for(let _0x3d2440=0x0;_0x3d2440<=_0x260c2f;_0x3d2440++){if(_0x3d2440!=_0x260c2f){const _0x3a1d02=_0xef17d2[_0x3d2440][_0x488848(0x11c)],_0x12f981=_0xef17d2[_0x3d2440][_0x488848(0x125)],_0x5f23c0=_0xef17d2[_0x3d2440][_0x488848(0x193)],_0x50a1fd=_0xef17d2[_0x3d2440][_0x488848(0x157)];var _0x678a40;switch(_0x5518c7){case'1':_0x678a40=_0x12f981;break;case'2':_0x678a40=_0x5f23c0;break;case'3':_0x678a40=_0x50a1fd;break;}const _0x1a6248={'width':0xd2,'height':0x64},_0x2c7e94={'width':_0x552bb3(_0x2ed23d[_0x488848(0x15c)]),'height':_0x552bb3(_0x2ed23d[_0x488848(0x117)])},_0x1e70c8=new Canvas();JsBarcode(_0x1e70c8,_0x678a40,{'format':_0x488848(0x17a),'height':_0x1a6248[_0x488848(0x117)],'displayValue':!![],'text':_0x678a40});const _0x3d7677=_0x1e70c8['toBuffer'](),_0x36da35=_0x2c7e94[_0x488848(0x15c)]/_0x1a6248[_0x488848(0x15c)],_0x371394=_0x2c7e94[_0x488848(0x117)]/_0x1a6248[_0x488848(0x117)],_0x1b7d37=Math[_0x488848(0x1b8)](_0x36da35,_0x371394),_0x24d2ec=_0x1a6248['width']*_0x1b7d37,_0x1cc4ef=_0x1a6248[_0x488848(0x117)]*_0x1b7d37,_0x58bddf=(_0x2c7e94[_0x488848(0x15c)]-_0x24d2ec)/0x2,_0x376dac=(_0x2c7e94[_0x488848(0x117)]-_0x1cc4ef)/0x2;_0x3e7a48[_0x488848(0x18a)](_0x3d7677,_0x58bddf,_0x376dac,{'width':_0x24d2ec,'height':_0x1cc4ef}),_0x3d2440!=_0x260c2f&&_0x3e7a48[_0x488848(0x107)]();}}const _0x506493=[];_0x3e7a48['on']('data',_0x506493[_0x488848(0x180)]['bind'](_0x506493)),_0x3e7a48['on'](_0x488848(0x199),()=>{const _0x89df23=_0x488848,_0x1d77a2=Buffer[_0x89df23(0xfc)](_0x506493),_0x2e472=_0x1d77a2[_0x89df23(0x18d)]('base64');_0x477ee3[_0x89df23(0x1a9)]({'pdfContent':_0x2e472});}),_0x3e7a48['end']();}catch(_0x576f15){_0x477ee3['json']({'message':_0x576f15[_0x488848(0x13d)]});}}),router[a0_0x1c4ffd(0x18f)](a0_0x1c4ffd(0x1b1),auth,async(_0x127f3a,_0x5ebc43)=>{const _0x5540ee=a0_0x1c4ffd;try{console[_0x5540ee(0x115)](_0x127f3a[_0x5540ee(0x120)]);const {prod_cat:_0x217951,identity:_0x404809,valueData:_0x19f8c0}=_0x127f3a[_0x5540ee(0x120)];let _0x1c00c6;switch(_0x217951){case'fg':if(_0x404809==_0x5540ee(0x118))_0x1c00c6=await product[_0x5540ee(0x162)]([{'$match':{'product_category':_0x5540ee(0x138),'brand':_0x19f8c0}}]);else _0x404809=='Category'&&(_0x1c00c6=await product[_0x5540ee(0x162)]([{'$match':{'product_category':_0x5540ee(0x138),'category':_0x19f8c0}}]));break;case'rm':if(_0x404809==_0x5540ee(0x118))_0x1c00c6=await product[_0x5540ee(0x162)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x19f8c0}}]);else _0x404809==_0x5540ee(0x133)&&(_0x1c00c6=await product[_0x5540ee(0x162)]([{'$match':{'product_category':_0x5540ee(0x184),'category':_0x19f8c0}}]));break;}_0x5ebc43[_0x5540ee(0x1a9)]({'data':_0x1c00c6});}catch(_0x52ce33){_0x5ebc43[_0x5540ee(0x1a9)]({'message':_0x52ce33[_0x5540ee(0x13d)]});}}),router[a0_0x1c4ffd(0x18f)](a0_0x1c4ffd(0x137),auth,async(_0x5bfd28,_0x494130)=>{const _0xad7ab4=a0_0x1c4ffd;try{const _0x181d11=_0x5bfd28['params']['id'],{copies:_0x69023e,typeofbarcode:_0x2fe5ff}=_0x5bfd28['body'];var _0xa67882=await product[_0xad7ab4(0x110)](_0x181d11);const _0x36247c=_0x2368ca=>_0x2368ca*0x48,_0x1f8d9a={'width':0x3,'height':0x1},_0x11efda=new PDFDocument({'margin':_0x36247c(0.75),'size':[_0x36247c(_0x1f8d9a[_0xad7ab4(0x15c)]),_0x36247c(_0x1f8d9a[_0xad7ab4(0x117)])],'bufferPages':!![]}),_0x30a8f8=_0x69023e,_0x4cf28a=_0xa67882[_0xad7ab4(0x11c)],_0x3e3d53=_0xa67882[_0xad7ab4(0x125)],_0x5e6df1=_0xa67882[_0xad7ab4(0x193)],_0x1ea6b8=_0xa67882[_0xad7ab4(0x157)];let _0x2be59c;switch(_0x2fe5ff){case'1':_0x2be59c=_0x3e3d53;break;case'2':_0x2be59c=_0x5e6df1;break;case'3':_0x2be59c=_0x1ea6b8;break;}const _0x4775af={'width':0xd2,'height':0x64},_0x313702={'width':_0x36247c(_0x1f8d9a[_0xad7ab4(0x15c)]),'height':_0x36247c(_0x1f8d9a['height'])};for(let _0x21d1f9=0x1;_0x21d1f9<=_0x30a8f8;_0x21d1f9++){const _0x49513f=new Canvas();JsBarcode(_0x49513f,_0x2be59c,{'format':_0xad7ab4(0x17a),'height':_0x4775af[_0xad7ab4(0x117)],'displayValue':!![],'text':_0x2be59c});const _0x107c24=_0x49513f[_0xad7ab4(0x16b)](),_0x24198d=_0x313702[_0xad7ab4(0x15c)]/_0x4775af[_0xad7ab4(0x15c)],_0x4c441f=_0x313702[_0xad7ab4(0x117)]/_0x4775af['height'],_0x2075d5=Math[_0xad7ab4(0x1b8)](_0x24198d,_0x4c441f),_0x350256=_0x4775af[_0xad7ab4(0x15c)]*_0x2075d5,_0x1adfd2=_0x4775af['height']*_0x2075d5,_0x3a1998=(_0x313702[_0xad7ab4(0x15c)]-_0x350256)/0x2,_0x364104=(_0x313702[_0xad7ab4(0x117)]-_0x1adfd2)/0x2;_0x11efda['image'](_0x107c24,_0x3a1998,_0x364104,{'width':_0x350256,'height':_0x1adfd2}),_0x21d1f9!=_0x30a8f8&&_0x11efda[_0xad7ab4(0x107)]();}const _0x190b46=[];_0x11efda['on'](_0xad7ab4(0x136),_0x190b46[_0xad7ab4(0x180)]['bind'](_0x190b46)),_0x11efda['on'](_0xad7ab4(0x199),()=>{const _0x5bf1c5=_0xad7ab4,_0x16ffe6=Buffer[_0x5bf1c5(0xfc)](_0x190b46),_0x32dec3=_0x16ffe6['toString']('base64');_0x494130[_0x5bf1c5(0x1a9)]({'pdfContent':_0x32dec3});}),_0x11efda[_0xad7ab4(0x199)]();}catch(_0x397b3e){_0x494130['json']({'message':_0x397b3e[_0xad7ab4(0x13d)]});}}),module[a0_0x1c4ffd(0x119)]=router;