function a0_0xb95c(_0x535ccb,_0x277ff4){const _0xcf7c2c=a0_0xcf7c();return a0_0xb95c=function(_0xb95ca8,_0x4126cf){_0xb95ca8=_0xb95ca8-0x104;let _0x2d5d8c=_0xcf7c2c[_0xb95ca8];return _0x2d5d8c;},a0_0xb95c(_0x535ccb,_0x277ff4);}const a0_0x2e9744=a0_0xb95c;function a0_0xcf7c(){const _0x49c45e=['units','/products/units','categories','366UMSOee','stock','diskStorage','categories_edit','redirect','/brands/:id','params','Product_Code','find','message','product_barcode_products','body','canvas','$brand','status','sheet_to_json','product_details.product_name','/view','36UhboQQ','86035LtVOkj','image','Arabic','findOne','\x20unit\x20is\x20add\x20successfully','Portuguese','now','flash','log','Maximum_Stocks','json','width','/units','/brands','send','Finished\x20Goods','Units','end','email','Category','Prod_Cat','toString','utils','$product_docs','secondary_unit','then','render','/products_export_migrate_file','/units/delete/:id','master','findByIdAndDelete','294lXJYUU','product_docs','public/upload','26531FPLuvu','alertquantity','jsbarcode','filename','\x20added\x20successfully','Alert_QTY','max_number_per_units','edit_product','/barcode_data','save','SheetNames','204090MgebSe','public/Migration/','categories\x20data\x20delete\x20successfully','file','unit','PName','/products/categories','/categories/delete/:id','xlsx','Spanish','post','user','secondary_code','_id','/view/add_products','long','/filter_product','product_code','findById','name','columns','product\x20update\x20successfully','Products_category','unit\x20data\x20update\x20successfully','PAlQty','forEach','findByIdAndUpdate','primary_code','/products/view','migrate_product_fule','barcode\x20Product\x20master','ProductCode','PCat','Hindi','Products\x20find_data','product_stock','/print_barcode_filter/','Products\x20master','Brands','product_barcode','exports','/view/:id','Portuguese\x20(BR)','$product_name','products','Secondary_Code','PSecondaryUnits','push','Primary_Code','$_id','product_category','$product_details.product_name','$category','maxStocks','brand\x20data\x20delete\x20successfully','aggregate','12JMjqmt','defaultProduct.avif','brands','originalname','type_products','1165040FyPDTa','/products/brands','Content-Disposition','$product_details','pdfkit-table','PUnits','CODE128','Sheets','/categories','write','brand','Router','Products\x20warehouse_data','German','/products_import_migrate_file','maxProdPerUnit','prod_categ','$product_category','height','express/lib/response','Product_Name','Raw\x20Materials','3257881ZdvwzS','Arabic\x20(ae)','../middleware/auth','language','27yjnTcB','sku','success','3098ZqgSRo','/barcode_filter','min','addPage','/categories/:id','length','barcode\x20user_id','concat','Chinese','bind','edit\x20Product\x20master','errors','/print_barcode_single/:id','$secondary_unit','single','multer','$product_stock','categ','data','toBuffer','\x20Edit\x20Successfully','numeric','sales_category','Secondary_Units','English\x20(US)','add_product','Content-Type','category','base64','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','French','get','\x20<>\x20','282tTcAEb','attachment;\x20filename=Product_Migration_File.xlsx','English'];a0_0xcf7c=function(){return _0x49c45e;};return a0_0xcf7c();}(function(_0x1b31d5,_0x906842){const _0x201a7f=a0_0xb95c,_0x5464f3=_0x1b31d5();while(!![]){try{const _0x3b0397=parseInt(_0x201a7f(0x141))/0x1+parseInt(_0x201a7f(0x1a6))/0x2*(parseInt(_0x201a7f(0x106))/0x3)+parseInt(_0x201a7f(0x11e))/0x4*(parseInt(_0x201a7f(0x11f))/0x5)+-parseInt(_0x201a7f(0x10c))/0x6*(parseInt(_0x201a7f(0x13e))/0x7)+parseInt(_0x201a7f(0x189))/0x8+parseInt(_0x201a7f(0x1a3))/0x9*(-parseInt(_0x201a7f(0x14c))/0xa)+parseInt(_0x201a7f(0x19f))/0xb*(-parseInt(_0x201a7f(0x184))/0xc);if(_0x3b0397===_0x906842)break;else _0x5464f3['push'](_0x5464f3['shift']());}catch(_0x41495a){_0x5464f3['push'](_0x5464f3['shift']());}}}(a0_0xcf7c,0x1b81e));const express=require('express'),res=require(a0_0x2e9744(0x19c)),app=express(),router=express[a0_0x2e9744(0x194)](),multer=require(a0_0x2e9744(0x1b5)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x2e9744(0x1a1)),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require(a0_0x2e9744(0x154)),JsBarcode=require(a0_0x2e9744(0x143)),{Canvas}=require(a0_0x2e9744(0x118)),PDFDocument=require(a0_0x2e9744(0x18d));router[a0_0x2e9744(0x104)](a0_0x2e9744(0x191),auth,async(_0xee7ba5,_0x212f33)=>{const _0x3b7bdc=a0_0x2e9744;try{const {username:_0x4d1070,email:_0x36aa6d,role:_0x23bd99}=_0xee7ba5['user'],_0x181866=_0xee7ba5[_0x3b7bdc(0x157)],_0x2aadf3=await profile['findOne']({'email':_0x181866[_0x3b7bdc(0x131)]}),_0x5125a2=await master_shop[_0x3b7bdc(0x114)]();console[_0x3b7bdc(0x127)](_0x3b7bdc(0x13c),_0x5125a2);const _0x31ee79=await categories[_0x3b7bdc(0x114)]();if(_0x5125a2[0x0][_0x3b7bdc(0x1a2)]==_0x3b7bdc(0x1be))var _0x108a74=users[_0x3b7bdc(0x108)];else{if(_0x5125a2[0x0][_0x3b7bdc(0x1a2)]=='Hindi')var _0x108a74=users['Hindi'];else{if(_0x5125a2[0x0]['language']=='German')var _0x108a74=users[_0x3b7bdc(0x196)];else{if(_0x5125a2[0x0]['language']==_0x3b7bdc(0x155))var _0x108a74=users['Spanish'];else{if(_0x5125a2[0x0]['language']==_0x3b7bdc(0x1c4))var _0x108a74=users[_0x3b7bdc(0x1c4)];else{if(_0x5125a2[0x0][_0x3b7bdc(0x1a2)]=='Portuguese\x20(BR)')var _0x108a74=users[_0x3b7bdc(0x124)];else{if(_0x5125a2[0x0][_0x3b7bdc(0x1a2)]==_0x3b7bdc(0x1ae))var _0x108a74=users[_0x3b7bdc(0x1ae)];else{if(_0x5125a2[0x0][_0x3b7bdc(0x1a2)]==_0x3b7bdc(0x1a0))var _0x108a74=users[_0x3b7bdc(0x121)];}}}}}}}_0x212f33[_0x3b7bdc(0x139)](_0x3b7bdc(0x10b),{'success':_0xee7ba5[_0x3b7bdc(0x126)](_0x3b7bdc(0x1a5)),'errors':_0xee7ba5['flash']('errors'),'role':_0x181866,'profile':_0x2aadf3,'user':_0x31ee79,'master_shop':_0x5125a2,'language':_0x108a74});}catch(_0x12303f){console[_0x3b7bdc(0x127)](_0x12303f);}}),router[a0_0x2e9744(0x156)]('/categories',auth,async(_0x3b7967,_0x3d4a5c)=>{const _0x411eec=a0_0x2e9744;try{const {name:_0x1fad56,products:_0x2ba413}=_0x3b7967['body'],_0x130589=new categories({'name':_0x1fad56,'products':_0x2ba413}),_0x15512d=await categories[_0x411eec(0x122)]({'name':_0x1fad56});_0x15512d?_0x3b7967[_0x411eec(0x126)]('errors',_0x1fad56+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x3b7967[_0x411eec(0x126)](_0x411eec(0x1a5),_0x1fad56+'\x20categories\x20is\x20add\x20successfully');const _0x2cfe1e=await _0x130589[_0x411eec(0x14a)]();_0x3d4a5c[_0x411eec(0x110)]('/products/categories');}catch(_0x1f569b){console['log'](_0x1f569b);}}),router[a0_0x2e9744(0x104)](a0_0x2e9744(0x1aa),auth,async(_0x331601,_0xba345c)=>{const _0x72b2d5=a0_0x2e9744;try{const {username:_0x55b2e1,email:_0x116764,role:_0x4a4d8c}=_0x331601['user'],_0x70e5b3=_0x331601[_0x72b2d5(0x157)],_0x243c74=await profile[_0x72b2d5(0x122)]({'email':_0x70e5b3['email']}),_0x5dc0cf=await master_shop[_0x72b2d5(0x114)]();console['log'](_0x72b2d5(0x13c),_0x5dc0cf);const _0x285b32=_0x331601[_0x72b2d5(0x112)]['id'];console[_0x72b2d5(0x127)](_0x285b32);const _0x585ce6=await categories[_0x72b2d5(0x15e)](_0x285b32);if(_0x5dc0cf[0x0][_0x72b2d5(0x1a2)]=='English\x20(US)')var _0x9b1cd6=users['English'];else{if(_0x5dc0cf[0x0][_0x72b2d5(0x1a2)]==_0x72b2d5(0x16d))var _0x9b1cd6=users[_0x72b2d5(0x16d)];else{if(_0x5dc0cf[0x0][_0x72b2d5(0x1a2)]==_0x72b2d5(0x196))var _0x9b1cd6=users[_0x72b2d5(0x196)];else{if(_0x5dc0cf[0x0]['language']==_0x72b2d5(0x155))var _0x9b1cd6=users[_0x72b2d5(0x155)];else{if(_0x5dc0cf[0x0][_0x72b2d5(0x1a2)]==_0x72b2d5(0x1c4))var _0x9b1cd6=users[_0x72b2d5(0x1c4)];else{if(_0x5dc0cf[0x0][_0x72b2d5(0x1a2)]==_0x72b2d5(0x176))var _0x9b1cd6=users['Portuguese'];else{if(_0x5dc0cf[0x0][_0x72b2d5(0x1a2)]==_0x72b2d5(0x1ae))var _0x9b1cd6=users[_0x72b2d5(0x1ae)];else{if(_0x5dc0cf[0x0][_0x72b2d5(0x1a2)]=='Arabic\x20(ae)')var _0x9b1cd6=users[_0x72b2d5(0x121)];}}}}}}}_0xba345c[_0x72b2d5(0x139)](_0x72b2d5(0x10b),{'success':_0x331601['flash'](_0x72b2d5(0x1a5)),'errors':_0x331601[_0x72b2d5(0x126)](_0x72b2d5(0x1b1)),'role':_0x70e5b3,'profile':_0x243c74,'master_shop':_0x5dc0cf,'user':_0x585ce6,'language':_0x9b1cd6});}catch(_0x18f50c){console[_0x72b2d5(0x127)](_0x18f50c);}}),router['post'](a0_0x2e9744(0x1aa),auth,async(_0x3a51c3,_0x2d97d8)=>{const _0x36ef23=a0_0x2e9744;try{const _0x116e6f=_0x3a51c3['params']['id'],_0x212952=await categories[_0x36ef23(0x166)](_0x116e6f,_0x3a51c3['body']);_0x3a51c3[_0x36ef23(0x126)]('success',''+users[_0x36ef23(0x10f)]),_0x2d97d8[_0x36ef23(0x110)](_0x36ef23(0x152));}catch(_0xe465ee){console[_0x36ef23(0x127)](_0xe465ee);}}),router[a0_0x2e9744(0x104)](a0_0x2e9744(0x153),auth,async(_0x132841,_0x22d50a)=>{const _0x4d8e8c=a0_0x2e9744;try{const _0x1d7c17=_0x132841[_0x4d8e8c(0x112)]['id'],_0x2683c9=await categories[_0x4d8e8c(0x13d)](_0x1d7c17);_0x132841[_0x4d8e8c(0x126)](_0x4d8e8c(0x1a5),_0x4d8e8c(0x14e)),_0x22d50a[_0x4d8e8c(0x110)](_0x4d8e8c(0x152));}catch(_0x148937){console[_0x4d8e8c(0x127)](_0x148937);}}),router['get']('/brands',auth,async(_0x1841d8,_0x2fcd25)=>{const _0x3fe1bc=a0_0x2e9744;try{const {username:_0x493b0f,email:_0x1a1003,role:_0x3eacc3}=_0x1841d8[_0x3fe1bc(0x157)],_0x3913c2=_0x1841d8[_0x3fe1bc(0x157)],_0x351852=await profile[_0x3fe1bc(0x122)]({'email':_0x3913c2[_0x3fe1bc(0x131)]}),_0xce8ca9=await master_shop[_0x3fe1bc(0x114)]();console[_0x3fe1bc(0x127)]('master',_0xce8ca9);const _0x9b5bb8=await brands[_0x3fe1bc(0x114)]();if(_0xce8ca9[0x0][_0x3fe1bc(0x1a2)]=='English\x20(US)')var _0x3de4dc=users[_0x3fe1bc(0x108)];else{if(_0xce8ca9[0x0][_0x3fe1bc(0x1a2)]==_0x3fe1bc(0x16d))var _0x3de4dc=users[_0x3fe1bc(0x16d)];else{if(_0xce8ca9[0x0][_0x3fe1bc(0x1a2)]=='German')var _0x3de4dc=users[_0x3fe1bc(0x196)];else{if(_0xce8ca9[0x0]['language']=='Spanish')var _0x3de4dc=users[_0x3fe1bc(0x155)];else{if(_0xce8ca9[0x0][_0x3fe1bc(0x1a2)]==_0x3fe1bc(0x1c4))var _0x3de4dc=users[_0x3fe1bc(0x1c4)];else{if(_0xce8ca9[0x0][_0x3fe1bc(0x1a2)]==_0x3fe1bc(0x176))var _0x3de4dc=users[_0x3fe1bc(0x124)];else{if(_0xce8ca9[0x0][_0x3fe1bc(0x1a2)]==_0x3fe1bc(0x1ae))var _0x3de4dc=users[_0x3fe1bc(0x1ae)];else{if(_0xce8ca9[0x0][_0x3fe1bc(0x1a2)]=='Arabic\x20(ae)')var _0x3de4dc=users[_0x3fe1bc(0x121)];}}}}}}}_0x2fcd25['render']('brands',{'success':_0x1841d8[_0x3fe1bc(0x126)]('success'),'errors':_0x1841d8[_0x3fe1bc(0x126)](_0x3fe1bc(0x1b1)),'role':_0x3913c2,'profile':_0x351852,'master_shop':_0xce8ca9,'user':_0x9b5bb8,'language':_0x3de4dc});}catch(_0x5d41b0){console[_0x3fe1bc(0x127)](_0x5d41b0);}}),router['post'](a0_0x2e9744(0x12c),auth,async(_0x5a9473,_0x205b88)=>{const _0x5b0295=a0_0x2e9744;try{const {name:_0x39c320,products:_0x17ccdd}=_0x5a9473['body'],_0x3f4c52=new brands({'name':_0x39c320,'products':_0x17ccdd}),_0x516cca=await brands[_0x5b0295(0x122)]({'name':_0x39c320});_0x516cca?_0x5a9473[_0x5b0295(0x126)](_0x5b0295(0x1b1),_0x39c320+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x5a9473[_0x5b0295(0x126)](_0x5b0295(0x1a5),_0x39c320+'\x20brand\x20is\x20add\x20successfully');const _0x53f6ce=await _0x3f4c52[_0x5b0295(0x14a)]();_0x205b88[_0x5b0295(0x110)](_0x5b0295(0x18a));}catch(_0x2a0f69){console[_0x5b0295(0x127)](_0x2a0f69);}}),router[a0_0x2e9744(0x104)](a0_0x2e9744(0x111),auth,async(_0x334ed7,_0x37db58)=>{const _0xb42805=a0_0x2e9744;try{const {username:_0x3a750b,email:_0x5b3db5,role:_0x387d22}=_0x334ed7['user'],_0x5abb37=_0x334ed7[_0xb42805(0x157)],_0x52dafe=await profile[_0xb42805(0x122)]({'email':_0x5abb37[_0xb42805(0x131)]}),_0xd82fae=await master_shop['find']();console[_0xb42805(0x127)](_0xb42805(0x13c),_0xd82fae);const _0x184b19=_0x334ed7[_0xb42805(0x112)]['id'];console['log'](_0x184b19);const _0x484e43=await brands[_0xb42805(0x15e)](_0x184b19);if(_0xd82fae[0x0]['language']==_0xb42805(0x1be))var _0x4319b8=users[_0xb42805(0x108)];else{if(_0xd82fae[0x0][_0xb42805(0x1a2)]=='Hindi')var _0x4319b8=users[_0xb42805(0x16d)];else{if(_0xd82fae[0x0][_0xb42805(0x1a2)]=='German')var _0x4319b8=users[_0xb42805(0x196)];else{if(_0xd82fae[0x0][_0xb42805(0x1a2)]==_0xb42805(0x155))var _0x4319b8=users[_0xb42805(0x155)];else{if(_0xd82fae[0x0][_0xb42805(0x1a2)]=='French')var _0x4319b8=users[_0xb42805(0x1c4)];else{if(_0xd82fae[0x0]['language']==_0xb42805(0x176))var _0x4319b8=users[_0xb42805(0x124)];else{if(_0xd82fae[0x0]['language']==_0xb42805(0x1ae))var _0x4319b8=users[_0xb42805(0x1ae)];else{if(_0xd82fae[0x0][_0xb42805(0x1a2)]==_0xb42805(0x1a0))var _0x4319b8=users[_0xb42805(0x121)];}}}}}}}_0x37db58[_0xb42805(0x139)](_0xb42805(0x186),{'success':_0x334ed7[_0xb42805(0x126)](_0xb42805(0x1a5)),'errors':_0x334ed7[_0xb42805(0x126)](_0xb42805(0x1b1)),'role':_0x5abb37,'profile':_0x52dafe,'master_shop':_0xd82fae,'user':_0x484e43,'language':_0x4319b8});}catch(_0x1f2959){console[_0xb42805(0x127)](_0x1f2959);}}),router['post']('/brands/:id',auth,async(_0x22d881,_0x21e576)=>{const _0x40db03=a0_0x2e9744;try{const _0x159af2=_0x22d881[_0x40db03(0x112)]['id'],_0x5e497d=await brands[_0x40db03(0x166)](_0x159af2,_0x22d881[_0x40db03(0x117)]);_0x22d881['flash']('success','brand\x20data\x20update\x20successfully'),_0x21e576[_0x40db03(0x110)]('/products/brands');}catch(_0x46ad53){console[_0x40db03(0x127)](_0x46ad53);}}),router[a0_0x2e9744(0x104)]('/brands/delete/:id',auth,async(_0x3dc4be,_0x19278e)=>{const _0x3c1ffa=a0_0x2e9744;try{const _0x124b7c=_0x3dc4be[_0x3c1ffa(0x112)]['id'],_0x411b9b=await brands[_0x3c1ffa(0x13d)](_0x124b7c);_0x3dc4be[_0x3c1ffa(0x126)](_0x3c1ffa(0x1a5),_0x3c1ffa(0x182)),_0x19278e[_0x3c1ffa(0x110)]('/products/brands');}catch(_0x276054){console['log'](_0x276054);}}),router[a0_0x2e9744(0x104)](a0_0x2e9744(0x12b),auth,async(_0x478203,_0x2c3e21)=>{const _0x2d549a=a0_0x2e9744;try{const {username:_0x161cc3,email:_0x1bee6f,role:_0x41d823}=_0x478203[_0x2d549a(0x157)],_0x5eda57=_0x478203['user'],_0x4e17ea=await profile[_0x2d549a(0x122)]({'email':_0x5eda57[_0x2d549a(0x131)]}),_0x45bfcf=await master_shop[_0x2d549a(0x114)]();console[_0x2d549a(0x127)]('master',_0x45bfcf);const _0x2fbec6=await units['find']();if(_0x45bfcf[0x0][_0x2d549a(0x1a2)]==_0x2d549a(0x1be))var _0x5c57da=users[_0x2d549a(0x108)];else{if(_0x45bfcf[0x0][_0x2d549a(0x1a2)]==_0x2d549a(0x16d))var _0x5c57da=users[_0x2d549a(0x16d)];else{if(_0x45bfcf[0x0][_0x2d549a(0x1a2)]==_0x2d549a(0x196))var _0x5c57da=users['German'];else{if(_0x45bfcf[0x0]['language']==_0x2d549a(0x155))var _0x5c57da=users[_0x2d549a(0x155)];else{if(_0x45bfcf[0x0][_0x2d549a(0x1a2)]==_0x2d549a(0x1c4))var _0x5c57da=users[_0x2d549a(0x1c4)];else{if(_0x45bfcf[0x0]['language']==_0x2d549a(0x176))var _0x5c57da=users['Portuguese'];else{if(_0x45bfcf[0x0]['language']==_0x2d549a(0x1ae))var _0x5c57da=users[_0x2d549a(0x1ae)];else{if(_0x45bfcf[0x0]['language']==_0x2d549a(0x1a0))var _0x5c57da=users[_0x2d549a(0x121)];}}}}}}}_0x2c3e21[_0x2d549a(0x139)](_0x2d549a(0x109),{'success':_0x478203[_0x2d549a(0x126)]('success'),'errors':_0x478203['flash'](_0x2d549a(0x1b1)),'role':_0x5eda57,'profile':_0x4e17ea,'master_shop':_0x45bfcf,'user':_0x2fbec6,'language':_0x5c57da});}catch(_0x5408f1){console['log'](_0x5408f1);}}),router[a0_0x2e9744(0x156)](a0_0x2e9744(0x12b),auth,async(_0x33a701,_0x2a3f5f)=>{const _0x53c54b=a0_0x2e9744;try{const {name:_0xf659b1,secondary_unit:_0xf198b1,products:_0x435a7b}=_0x33a701['body'],_0xd2c3b0=new units({'name':_0xf659b1,'secondary_unit':_0xf198b1,'products':_0x435a7b}),_0x4e35ca=await units['findOne']({'name':_0xf659b1});_0x4e35ca?_0x33a701[_0x53c54b(0x126)]('errors',_0xf659b1+_0x53c54b(0x1c3)):_0x33a701[_0x53c54b(0x126)](_0x53c54b(0x1a5),_0xf659b1+_0x53c54b(0x123));const _0x3f0861=await _0xd2c3b0[_0x53c54b(0x14a)]();_0x2a3f5f['redirect'](_0x53c54b(0x10a));}catch(_0x31daa5){console[_0x53c54b(0x127)](_0x31daa5);}}),router[a0_0x2e9744(0x104)]('/units/:id',auth,async(_0x43296f,_0x1505b2)=>{const _0x1189eb=a0_0x2e9744;try{const {username:_0x3f40db,email:_0x898962,role:_0x2471f4}=_0x43296f[_0x1189eb(0x157)],_0x1831c4=_0x43296f[_0x1189eb(0x157)],_0xed99bf=await profile['findOne']({'email':_0x1831c4[_0x1189eb(0x131)]}),_0x9cf259=await master_shop[_0x1189eb(0x114)]();console['log'](_0x1189eb(0x13c),_0x9cf259);const _0x3efc3c=_0x43296f[_0x1189eb(0x112)]['id'],_0xf85244=await units[_0x1189eb(0x15e)](_0x3efc3c);if(_0x9cf259[0x0][_0x1189eb(0x1a2)]==_0x1189eb(0x1be))var _0x36414d=users[_0x1189eb(0x108)];else{if(_0x9cf259[0x0]['language']=='Hindi')var _0x36414d=users[_0x1189eb(0x16d)];else{if(_0x9cf259[0x0][_0x1189eb(0x1a2)]==_0x1189eb(0x196))var _0x36414d=users[_0x1189eb(0x196)];else{if(_0x9cf259[0x0][_0x1189eb(0x1a2)]==_0x1189eb(0x155))var _0x36414d=users[_0x1189eb(0x155)];else{if(_0x9cf259[0x0]['language']==_0x1189eb(0x1c4))var _0x36414d=users[_0x1189eb(0x1c4)];else{if(_0x9cf259[0x0][_0x1189eb(0x1a2)]==_0x1189eb(0x176))var _0x36414d=users[_0x1189eb(0x124)];else{if(_0x9cf259[0x0]['language']==_0x1189eb(0x1ae))var _0x36414d=users[_0x1189eb(0x1ae)];else{if(_0x9cf259[0x0]['language']=='Arabic\x20(ae)')var _0x36414d=users['Arabic'];}}}}}}}_0x1505b2[_0x1189eb(0x139)](_0x1189eb(0x109),{'success':_0x43296f[_0x1189eb(0x126)](_0x1189eb(0x1a5)),'errors':_0x43296f[_0x1189eb(0x126)](_0x1189eb(0x1b1)),'role':_0x1831c4,'profile':_0xed99bf,'master_shop':_0x9cf259,'user':_0xf85244,'language':_0x36414d});}catch(_0x1f50cf){console[_0x1189eb(0x127)](_0x1f50cf);}}),router[a0_0x2e9744(0x156)]('/units/:id',auth,async(_0x50bb39,_0x214e9d)=>{const _0x3a7687=a0_0x2e9744;try{const _0x513f19=_0x50bb39[_0x3a7687(0x112)]['id'],_0x3599f3=await units['findByIdAndUpdate'](_0x513f19,_0x50bb39[_0x3a7687(0x117)]);_0x50bb39['flash'](_0x3a7687(0x1a5),_0x3a7687(0x163)),_0x214e9d['redirect'](_0x3a7687(0x10a));}catch(_0x324e98){console['log'](_0x324e98);}}),router[a0_0x2e9744(0x104)](a0_0x2e9744(0x13b),auth,async(_0x3bc604,_0x204636)=>{const _0x4d53e5=a0_0x2e9744;try{const _0x1c2e49=_0x3bc604[_0x4d53e5(0x112)]['id'],_0x42356d=await units['findByIdAndDelete'](_0x1c2e49);_0x3bc604[_0x4d53e5(0x126)](_0x4d53e5(0x1a5),'unit\x20data\x20delete\x20successfully'),_0x204636[_0x4d53e5(0x110)](_0x4d53e5(0x10a));}catch(_0x583831){console['log'](_0x583831);}});const storage=multer['diskStorage']({'destination':(_0x57a666,_0x91ff9f,_0xb8ade6)=>{const _0x1563d3=a0_0x2e9744;_0xb8ade6(null,_0x1563d3(0x140));},'filename':(_0x1732e2,_0x2c9be0,_0x2695a7)=>{const _0x456495=a0_0x2e9744;_0x2695a7(null,Date[_0x456495(0x125)]()+_0x2c9be0['originalname']);}}),upload=multer({'storage':storage});router[a0_0x2e9744(0x104)](a0_0x2e9744(0x11d),auth,async(_0x89266f,_0xa02682)=>{const _0x405818=a0_0x2e9744;try{const {username:_0xc18781,email:_0x46d2d2,role:_0x43525c}=_0x89266f[_0x405818(0x157)],_0x3c3507=_0x89266f[_0x405818(0x157)],_0x12b1c8=await profile[_0x405818(0x122)]({'email':_0x3c3507[_0x405818(0x131)]}),_0x10a642={'year':_0x405818(0x1bb),'month':_0x405818(0x15b),'day':'numeric'},_0x301de8=await master_shop[_0x405818(0x114)]();console[_0x405818(0x127)](_0x405818(0x171),_0x301de8);const _0x5abc2c=await product[_0x405818(0x114)]();console[_0x405818(0x127)](_0x405818(0x16e),_0x5abc2c);const _0x5f2bf1=await warehouse[_0x405818(0x183)]([{'$unwind':_0x405818(0x18c)},{'$lookup':{'from':_0x405818(0x178),'localField':_0x405818(0x11c),'foreignField':'name','as':_0x405818(0x13f)}},{'$unwind':_0x405818(0x136)},{'$project':{'product_name':_0x405818(0x17f),'product_stock':'$product_details.product_stock'}},{'$group':{'_id':_0x405818(0x177),'product_stock':{'$sum':_0x405818(0x1b6)}}}]);console[_0x405818(0x127)](_0x405818(0x195),_0x5f2bf1),_0x5f2bf1[_0x405818(0x165)](_0x1a124c=>{const _0x501018=_0x5abc2c['map'](_0x49388c=>{const _0x491c59=a0_0xb95c;_0x49388c[_0x491c59(0x15f)]==_0x1a124c[_0x491c59(0x159)]&&(_0x49388c['stock']=parseInt(_0x49388c[_0x491c59(0x10d)])+parseInt(_0x1a124c[_0x491c59(0x16f)]));});}),console[_0x405818(0x127)]('Products\x20find_data',_0x5abc2c);if(_0x301de8[0x0][_0x405818(0x1a2)]==_0x405818(0x1be))var _0x5131fa=users[_0x405818(0x108)];else{if(_0x301de8[0x0][_0x405818(0x1a2)]=='Hindi')var _0x5131fa=users[_0x405818(0x16d)];else{if(_0x301de8[0x0][_0x405818(0x1a2)]==_0x405818(0x196))var _0x5131fa=users[_0x405818(0x196)];else{if(_0x301de8[0x0][_0x405818(0x1a2)]==_0x405818(0x155))var _0x5131fa=users[_0x405818(0x155)];else{if(_0x301de8[0x0][_0x405818(0x1a2)]==_0x405818(0x1c4))var _0x5131fa=users[_0x405818(0x1c4)];else{if(_0x301de8[0x0][_0x405818(0x1a2)]=='Portuguese\x20(BR)')var _0x5131fa=users[_0x405818(0x124)];else{if(_0x301de8[0x0][_0x405818(0x1a2)]=='Chinese')var _0x5131fa=users['Chinese'];else{if(_0x301de8[0x0]['language']=='Arabic\x20(ae)')var _0x5131fa=users[_0x405818(0x121)];}}}}}}}_0xa02682[_0x405818(0x139)](_0x405818(0x178),{'success':_0x89266f[_0x405818(0x126)](_0x405818(0x1a5)),'errors':_0x89266f[_0x405818(0x126)](_0x405818(0x1b1)),'alldata':_0x5abc2c,'profile':_0x12b1c8,'master_shop':_0x301de8,'role':_0x3c3507,'product_stock':_0x5f2bf1,'language':_0x5131fa});}catch(_0x4676dc){console[_0x405818(0x127)](_0x4676dc);}}),router[a0_0x2e9744(0x104)](a0_0x2e9744(0x15a),auth,async(_0x4e8f1e,_0x280ba2)=>{const _0x29c40e=a0_0x2e9744;try{const {username:_0x41ff3e,email:_0x156884,role:_0x50188a}=_0x4e8f1e[_0x29c40e(0x157)],_0x243918=_0x4e8f1e[_0x29c40e(0x157)],_0x597cbc=await profile[_0x29c40e(0x122)]({'email':_0x243918[_0x29c40e(0x131)]}),_0x44a539=await master_shop[_0x29c40e(0x114)]();console['log'](_0x29c40e(0x13c),_0x44a539);const _0x3adbed=await categories['find']({}),_0x167cbf=await brands[_0x29c40e(0x114)]({}),_0xf314ac=await units['find']({}),_0x303f82=await warehouse[_0x29c40e(0x114)]({'status':'Enabled'});if(_0x44a539[0x0][_0x29c40e(0x1a2)]==_0x29c40e(0x1be))var _0x8c9cfa=users[_0x29c40e(0x108)];else{if(_0x44a539[0x0][_0x29c40e(0x1a2)]==_0x29c40e(0x16d))var _0x8c9cfa=users['Hindi'];else{if(_0x44a539[0x0][_0x29c40e(0x1a2)]==_0x29c40e(0x196))var _0x8c9cfa=users[_0x29c40e(0x196)];else{if(_0x44a539[0x0][_0x29c40e(0x1a2)]=='Spanish')var _0x8c9cfa=users['Spanish'];else{if(_0x44a539[0x0]['language']==_0x29c40e(0x1c4))var _0x8c9cfa=users[_0x29c40e(0x1c4)];else{if(_0x44a539[0x0][_0x29c40e(0x1a2)]==_0x29c40e(0x176))var _0x8c9cfa=users['Portuguese'];else{if(_0x44a539[0x0][_0x29c40e(0x1a2)]==_0x29c40e(0x1ae))var _0x8c9cfa=users[_0x29c40e(0x1ae)];else{if(_0x44a539[0x0][_0x29c40e(0x1a2)]==_0x29c40e(0x1a0))var _0x8c9cfa=users['Arabic'];}}}}}}}_0x280ba2[_0x29c40e(0x139)](_0x29c40e(0x1bf),{'success':_0x4e8f1e[_0x29c40e(0x126)](_0x29c40e(0x1a5)),'errors':_0x4e8f1e[_0x29c40e(0x126)](_0x29c40e(0x1b1)),'role':_0x243918,'profile':_0x597cbc,'categories':_0x3adbed,'brands':_0x167cbf,'master_shop':_0x44a539,'units':_0xf314ac,'language':_0x8c9cfa,'find_data':_0x303f82});}catch(_0x4873f4){console['log'](_0x4873f4);}}),router[a0_0x2e9744(0x156)](a0_0x2e9744(0x15a),auth,upload[a0_0x2e9744(0x1b4)](a0_0x2e9744(0x120)),async(_0xe210a9,_0x4a6e9b)=>{const _0x2d096f=a0_0x2e9744;try{const {name:_0x3c6b88,category:_0x5568e5,brand:_0x22746a,unit:_0x31ba5e,alertquantity:_0x25affd,stock:_0x196a65,product_code:_0x1b3a9c,warehouse:_0x555c1d,primary_ItemCode:_0x5da524,second_ItemCode:_0x2f0137,second_unit:_0x152973,maxPerUnit:_0x1117a3,MaxPerProduct:_0x30eeda,sales_cat:_0x54bcd5,type_prod:_0x108b40}=_0xe210a9[_0x2d096f(0x117)],_0x40a1e1=_0xe210a9[_0x2d096f(0x14f)]?.[_0x2d096f(0x144)]||'defaultProduct.avif',_0x344251=new product({'image':_0x40a1e1,'name':_0x3c6b88,'category':_0x5568e5,'brand':_0x22746a,'unit':_0x31ba5e,'alertquantity':_0x25affd,'stock':_0x196a65,'product_code':_0x1b3a9c,'warehouse':_0x555c1d,'primary_code':_0x5da524,'secondary_code':_0x2f0137,'second_unit':_0x152973,'maxStocks':_0x30eeda,'maxProdPerUnit':_0x1117a3,'sales_category':_0x54bcd5,'type_products':_0x108b40}),_0x198781=await _0x344251[_0x2d096f(0x14a)](),_0x319ee5=await categories['findOne']({'name':_0x5568e5});_0x319ee5['products']=parseInt(_0x319ee5['products'])+0x1,await _0x319ee5['save']();const _0x5a9dda=await brands[_0x2d096f(0x122)]({'name':_0x22746a});_0x5a9dda[_0x2d096f(0x178)]=parseInt(_0x5a9dda[_0x2d096f(0x178)])+0x1,await _0x5a9dda[_0x2d096f(0x14a)]();const _0x41b5fe=await units[_0x2d096f(0x122)]({'name':_0x31ba5e});_0x41b5fe[_0x2d096f(0x178)]=parseInt(_0x41b5fe[_0x2d096f(0x178)])+0x1,await _0x41b5fe[_0x2d096f(0x14a)](),_0xe210a9[_0x2d096f(0x126)](_0x2d096f(0x1a5),'product\x20add\x20successfully'),_0x4a6e9b['redirect'](_0x2d096f(0x168));}catch(_0x1143fe){console[_0x2d096f(0x127)](_0x1143fe);}}),router[a0_0x2e9744(0x104)](a0_0x2e9744(0x175),auth,async(_0x4b1d9c,_0x5de9a0)=>{const _0x11522d=a0_0x2e9744;try{const {username:_0xe67548,email:_0x3d95b8,role:_0x1c6628}=_0x4b1d9c[_0x11522d(0x157)],_0x30a4d8=_0x4b1d9c[_0x11522d(0x157)],_0x529fef=await profile[_0x11522d(0x122)]({'email':_0x30a4d8['email']}),_0x4e7f1=await master_shop[_0x11522d(0x114)]();console[_0x11522d(0x127)](_0x11522d(0x1b0),_0x4e7f1);const _0x2bdbba=_0x4b1d9c['params']['id'],_0x492050=await product['findById'](_0x2bdbba),_0x240cf7=await categories['find']({}),_0x170664=await brands['find']({}),_0x2aeb99=await units[_0x11522d(0x114)]({}),_0x505dfb=await warehouse[_0x11522d(0x114)]({'status':'Enabled'}),_0x5b67bd=await units['aggregate']([{'$group':{'_id':_0x11522d(0x17d),'secondaryunit':{'$first':_0x11522d(0x1b3)}}}]);if(_0x4e7f1[0x0][_0x11522d(0x1a2)]==_0x11522d(0x1be))var _0x59e11c=users['English'];else{if(_0x4e7f1[0x0][_0x11522d(0x1a2)]=='Hindi')var _0x59e11c=users['Hindi'];else{if(_0x4e7f1[0x0]['language']=='German')var _0x59e11c=users[_0x11522d(0x196)];else{if(_0x4e7f1[0x0]['language']==_0x11522d(0x155))var _0x59e11c=users['Spanish'];else{if(_0x4e7f1[0x0][_0x11522d(0x1a2)]==_0x11522d(0x1c4))var _0x59e11c=users[_0x11522d(0x1c4)];else{if(_0x4e7f1[0x0][_0x11522d(0x1a2)]==_0x11522d(0x176))var _0x59e11c=users[_0x11522d(0x124)];else{if(_0x4e7f1[0x0][_0x11522d(0x1a2)]=='Chinese')var _0x59e11c=users['Chinese'];else{if(_0x4e7f1[0x0]['language']==_0x11522d(0x1a0))var _0x59e11c=users[_0x11522d(0x121)];}}}}}}}_0x5de9a0[_0x11522d(0x139)](_0x11522d(0x148),{'success':_0x4b1d9c['flash'](_0x11522d(0x1a5)),'errors':_0x4b1d9c[_0x11522d(0x126)]('errors'),'role':_0x30a4d8,'profile':_0x529fef,'alldata':_0x492050,'categories':_0x240cf7,'brands':_0x170664,'master_shop':_0x4e7f1,'units':_0x2aeb99,'secondunit':_0x5b67bd,'find_data':_0x505dfb,'language':_0x59e11c});}catch(_0x4a005f){console['log'](_0x4a005f);}}),router[a0_0x2e9744(0x156)](a0_0x2e9744(0x175),auth,upload[a0_0x2e9744(0x1b4)](a0_0x2e9744(0x120)),async(_0x341c0a,_0x19fef9)=>{const _0xf5318d=a0_0x2e9744;try{const _0x5086a5=_0x341c0a[_0xf5318d(0x112)]['id'],_0x4685e9=await product[_0xf5318d(0x15e)](_0x5086a5),{image:_0x440b03,name:_0x48abac,category:_0x5d1a4a,brand:_0x58b8bb,sku:_0x3f922c,unit:_0x56d164,alertquantity:_0x5422cb,product_code:_0x124bb1,warehouse:_0x2bfd61,primary_ItemCode:_0x23b0e3,second_ItemCode:_0x2fb928,second_unit:_0x58be3f,maxPerUnit:_0xc4fb4a,MaxPerProduct:_0x2d50d6,prod_catdata:_0x5104de,type_prod:_0x4a390c,sales_cat:_0x47043f}=_0x341c0a[_0xf5318d(0x117)];_0x341c0a[_0xf5318d(0x14f)]&&(_0x4685e9[_0xf5318d(0x120)]=_0x341c0a['file'][_0xf5318d(0x144)]);_0x4685e9[_0xf5318d(0x15f)]=_0x48abac,_0x4685e9[_0xf5318d(0x1c1)]=_0x5d1a4a,_0x4685e9[_0xf5318d(0x193)]=_0x58b8bb,_0x4685e9[_0xf5318d(0x1a4)]=_0x3f922c,_0x4685e9[_0xf5318d(0x150)]=_0x56d164,_0x4685e9[_0xf5318d(0x142)]=_0x5422cb,_0x4685e9[_0xf5318d(0x15d)]=_0x124bb1,_0x4685e9['warehouse']=_0x2bfd61,_0x4685e9['primary_code']=_0x23b0e3,_0x4685e9['secondary_code']=_0x2fb928,_0x4685e9[_0xf5318d(0x137)]=_0x58be3f,_0x4685e9[_0xf5318d(0x181)]=_0x2d50d6,_0x4685e9[_0xf5318d(0x198)]=_0xc4fb4a,_0x4685e9['product_category']=_0x5104de,_0x4685e9[_0xf5318d(0x188)]=_0x4a390c,_0x4685e9[_0xf5318d(0x1bc)]=_0x47043f;const _0x2f2087=await _0x4685e9[_0xf5318d(0x14a)]();console[_0xf5318d(0x127)]('product\x20edit',_0x4685e9),_0x341c0a[_0xf5318d(0x126)]('success',_0xf5318d(0x161)),_0x19fef9[_0xf5318d(0x110)](_0xf5318d(0x168));}catch(_0xf12a9f){console['log'](_0xf12a9f);}}),router[a0_0x2e9744(0x104)]('/barcode/:id',auth,async(_0x545be6,_0x1a9ee4)=>{const _0x32fadd=a0_0x2e9744;try{const {username:_0x327286,email:_0x32f9c2,role:_0x497a98}=_0x545be6[_0x32fadd(0x157)],_0x428239=_0x545be6[_0x32fadd(0x157)],_0x220ad8=await profile['findOne']({'email':_0x428239['email']}),_0x5e3f08=await master_shop[_0x32fadd(0x114)]();console[_0x32fadd(0x127)](_0x32fadd(0x16a),_0x5e3f08);const _0x41c67a=_0x545be6[_0x32fadd(0x112)]['id'],_0x3b3107=await product[_0x32fadd(0x15e)](_0x41c67a);console[_0x32fadd(0x127)](_0x32fadd(0x1ac),_0x3b3107);if(_0x5e3f08[0x0][_0x32fadd(0x1a2)]==_0x32fadd(0x1be))var _0x1c05c6=users[_0x32fadd(0x108)];else{if(_0x5e3f08[0x0][_0x32fadd(0x1a2)]==_0x32fadd(0x16d))var _0x1c05c6=users[_0x32fadd(0x16d)];else{if(_0x5e3f08[0x0][_0x32fadd(0x1a2)]==_0x32fadd(0x196))var _0x1c05c6=users['German'];else{if(_0x5e3f08[0x0][_0x32fadd(0x1a2)]==_0x32fadd(0x155))var _0x1c05c6=users[_0x32fadd(0x155)];else{if(_0x5e3f08[0x0][_0x32fadd(0x1a2)]==_0x32fadd(0x1c4))var _0x1c05c6=users[_0x32fadd(0x1c4)];else{if(_0x5e3f08[0x0]['language']==_0x32fadd(0x176))var _0x1c05c6=users[_0x32fadd(0x124)];else{if(_0x5e3f08[0x0][_0x32fadd(0x1a2)]==_0x32fadd(0x1ae))var _0x1c05c6=users['Chinese'];else{if(_0x5e3f08[0x0][_0x32fadd(0x1a2)]==_0x32fadd(0x1a0))var _0x1c05c6=users[_0x32fadd(0x121)];}}}}}}}_0x1a9ee4['render'](_0x32fadd(0x173),{'success':_0x545be6['flash'](_0x32fadd(0x1a5)),'errors':_0x545be6[_0x32fadd(0x126)]('errors'),'role':_0x428239,'profile':_0x220ad8,'alldata':_0x3b3107,'master_shop':_0x5e3f08,'language':_0x1c05c6});}catch(_0x26ec87){console[_0x32fadd(0x127)](_0x26ec87);}}),router[a0_0x2e9744(0x104)](a0_0x2e9744(0x13a),auth,async(_0x24b93,_0x2906b3)=>{const _0x503f00=a0_0x2e9744;try{const _0xbebdb2=new excelJS['Workbook'](),_0x24eb11=_0xbebdb2['addWorksheet']('Products');return _0x24eb11[_0x503f00(0x160)]=[{'header':_0x503f00(0x19d),'key':_0x503f00(0x151),'width':0xa},{'header':_0x503f00(0x172),'key':'PBrands','width':0xa},{'header':'Units','key':_0x503f00(0x18e),'width':0xa},{'header':_0x503f00(0x1bd),'key':_0x503f00(0x17a),'width':0xa},{'header':_0x503f00(0x147),'key':'MaxperUnits','width':0xa},{'header':_0x503f00(0x17c),'key':_0x503f00(0x16b),'width':0xa},{'header':_0x503f00(0x179),'key':'ProductCode','width':0xa},{'header':_0x503f00(0x113),'key':_0x503f00(0x16b),'width':0xa},{'header':'Category','key':_0x503f00(0x16c),'width':0xa},{'header':_0x503f00(0x146),'key':_0x503f00(0x164),'width':0xa},{'header':_0x503f00(0x128),'key':_0x503f00(0x164),'width':0xa},{'header':_0x503f00(0x162),'key':_0x503f00(0x133),'width':0xa}],_0x2906b3['setHeader'](_0x503f00(0x1c0),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x2906b3['setHeader'](_0x503f00(0x18b),_0x503f00(0x107)),_0xbebdb2[_0x503f00(0x154)][_0x503f00(0x192)](_0x2906b3)[_0x503f00(0x138)](()=>{const _0x51d418=_0x503f00;_0x2906b3[_0x51d418(0x11a)](0xc8);});}catch(_0x318901){_0x2906b3[_0x503f00(0x11a)](0x190)[_0x503f00(0x12d)](_0x318901);}});const storage1=multer[a0_0x2e9744(0x10e)]({'destination':(_0x59ab7f,_0x22a881,_0x563f7a)=>{_0x563f7a(null,'public/Migration');},'filename':(_0x281f4e,_0xca53d,_0x5c4047)=>{const _0x4cab38=a0_0x2e9744;_0x5c4047(null,Date[_0x4cab38(0x125)]()+_0xca53d[_0x4cab38(0x187)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x2e9744(0x197),auth,uploadMigrate[a0_0x2e9744(0x1b4)](a0_0x2e9744(0x169)),async(_0x250890,_0x5b2021)=>{const _0x443bdd=a0_0x2e9744,_0x2d58b2=_0x250890['file'][_0x443bdd(0x144)],_0x1877a0=await xlsx['readFile'](_0x443bdd(0x14d)+_0x2d58b2);let _0x376be0=_0x1877a0[_0x443bdd(0x14b)],_0x3ca1b1=xlsx[_0x443bdd(0x135)][_0x443bdd(0x11b)](_0x1877a0[_0x443bdd(0x190)][_0x376be0[0x0]]);for(const _0x262988 of _0x3ca1b1){const _0x39f3f7=_0x262988['Product_Name'],_0x240566=_0x262988['Brands'],_0x4e489f=_0x262988[_0x443bdd(0x12f)],_0xb241e5=_0x262988['Secondary_Units'],_0x50f401=_0x262988[_0x443bdd(0x113)],_0x176378=_0x262988['Category'],_0x16f5a9=_0x262988[_0x443bdd(0x146)],_0x2988ea=_0x262988[_0x443bdd(0x17c)],_0x2cdf4e=_0x262988[_0x443bdd(0x179)],_0x4d58d5=_0x262988['Maximum_Stocks'],_0x5ae13a=_0x262988[_0x443bdd(0x147)],_0x1afb1b=_0x262988[_0x443bdd(0x162)];try{let _0x58cc3b=await categories['findOne']({'name':_0x176378});if(!_0x58cc3b){const _0x558d6c=new categories({'name':_0x176378,'products':'0'});_0x58cc3b=await _0x558d6c[_0x443bdd(0x14a)]();}let _0x20c7f9=await brands[_0x443bdd(0x122)]({'name':_0x240566});if(!_0x20c7f9){const _0x34c926=new brands({'name':_0x240566,'products':'0'});_0x20c7f9=await _0x34c926[_0x443bdd(0x14a)]();}let _0x46165=await units['findOne']({'name':_0x4e489f,'secondary_unit':_0xb241e5});if(!_0x46165){const _0x376806=new units({'name':_0x4e489f,'secondary_unit':_0xb241e5,'products':'0'});_0x46165=await _0x376806[_0x443bdd(0x14a)]();}const _0x14d670=await product[_0x443bdd(0x114)]({'name':_0x39f3f7,'category':_0x58cc3b['name'],'brand':_0x20c7f9[_0x443bdd(0x15f)],'secondary_unit':_0x46165['secondary_unit'],'product_code':_0x50f401});console[_0x443bdd(0x127)](_0x14d670[_0x443bdd(0x1ab)]+_0x443bdd(0x105)+_0x58cc3b[_0x443bdd(0x15f)]+_0x443bdd(0x105)+_0x20c7f9[_0x443bdd(0x15f)]+'\x20<>\x20'+_0x46165[_0x443bdd(0x137)]+_0x443bdd(0x105)+_0x50f401+_0x443bdd(0x105)+_0x39f3f7);if(_0x14d670['length']===0x0){const _0x29af9b=new product({'image':_0x443bdd(0x185),'name':_0x39f3f7,'category':_0x58cc3b[_0x443bdd(0x15f)],'brand':_0x20c7f9[_0x443bdd(0x15f)],'unit':_0x46165['name'],'alertquantity':_0x16f5a9,'product_code':_0x50f401,'secondary_unit':_0x46165[_0x443bdd(0x137)],'primary_code':_0x2988ea,'secondary_code':_0x2cdf4e,'maxStocks':_0x4d58d5,'maxProdPerUnit':_0x5ae13a,'product_category':_0x1afb1b}),_0x30ba80=await _0x29af9b[_0x443bdd(0x14a)]();_0x58cc3b[_0x443bdd(0x178)]=parseInt(_0x58cc3b['products'])+0x1,await _0x58cc3b[_0x443bdd(0x14a)](),_0x20c7f9[_0x443bdd(0x178)]=parseInt(_0x20c7f9['products'])+0x1,await _0x20c7f9[_0x443bdd(0x14a)](),_0x46165['products']=parseInt(_0x46165['products'])+0x1,await _0x46165['save'](),_0x250890[_0x443bdd(0x126)](_0x443bdd(0x1a5),_0x39f3f7+_0x443bdd(0x145));}else{console[_0x443bdd(0x127)](_0x14d670[0x0]);const _0x2ad429=_0x14d670[0x0];_0x2ad429[_0x443bdd(0x1c1)]=_0x58cc3b[_0x443bdd(0x15f)],_0x2ad429['brand']=_0x20c7f9['name'],_0x2ad429['unit']=_0x46165[_0x443bdd(0x15f)],_0x2ad429[_0x443bdd(0x142)]=_0x16f5a9,_0x2ad429['product_code']=_0x50f401,_0x2ad429['secondary_unit']=_0x46165[_0x443bdd(0x137)],_0x2ad429[_0x443bdd(0x167)]=_0x2988ea,_0x2ad429[_0x443bdd(0x158)]=_0x2cdf4e,_0x2ad429[_0x443bdd(0x181)]=_0x4d58d5,_0x2ad429[_0x443bdd(0x198)]=_0x5ae13a,_0x2ad429[_0x443bdd(0x17e)]=_0x1afb1b;const _0x302e4f=await _0x2ad429[_0x443bdd(0x14a)]();_0x250890[_0x443bdd(0x126)](_0x443bdd(0x1a5),_0x302e4f[_0x443bdd(0x15f)]+_0x443bdd(0x1ba));}}catch(_0x3d2816){_0x5b2021[_0x443bdd(0x11a)](0x1f4)[_0x443bdd(0x129)]({'proderror':_0x3d2816[_0x443bdd(0x115)],'aproduct':_0x39f3f7});}}_0x5b2021[_0x443bdd(0x110)](_0x443bdd(0x168));}),router[a0_0x2e9744(0x156)]('/select_data',auth,async(_0x2d0a5c,_0x62167e)=>{const _0x45d31d=a0_0x2e9744;try{console[_0x45d31d(0x127)](_0x2d0a5c['body']);const {data_cateory:_0x30d9ff,datachoose:_0x468b8e}=_0x2d0a5c['body'];var _0x5f11f4;if(_0x468b8e==_0x45d31d(0x199))_0x5f11f4=await product['aggregate']([{'$group':{'_id':_0x45d31d(0x19a)}}]);else{if(_0x468b8e==_0x45d31d(0x186))_0x5f11f4=await product[_0x45d31d(0x183)]([{'$match':{'product_category':_0x30d9ff}},{'$group':{'_id':_0x45d31d(0x119)}}]);else _0x468b8e==_0x45d31d(0x1b7)&&(_0x5f11f4=await product['aggregate']([{'$match':{'product_category':_0x30d9ff}},{'$group':{'_id':_0x45d31d(0x180)}}]));}_0x62167e[_0x45d31d(0x129)](_0x5f11f4);}catch(_0x49c2fe){_0x62167e['json']({'message':_0x49c2fe['message']});}}),router[a0_0x2e9744(0x156)](a0_0x2e9744(0x15c),auth,async(_0x2608a8,_0xa1e71a)=>{const _0x4b6807=a0_0x2e9744;try{const {data_choosing:_0x32430f,data_selected:_0xce0751}=_0x2608a8['body'];var _0x2b0af3;if(_0x32430f=='prod_categ')_0x2b0af3=await product[_0x4b6807(0x183)]([{'$match':{'product_category':_0xce0751}}]);else{if(_0x32430f=='brands')_0x2b0af3=await product[_0x4b6807(0x183)]([{'$match':{'brand':_0xce0751}}]);else _0x32430f==_0x4b6807(0x1b7)&&(_0x2b0af3=await product[_0x4b6807(0x183)]([{'$match':{'category':_0xce0751}}]));}_0xa1e71a[_0x4b6807(0x129)](_0x2b0af3);}catch(_0x5ce430){_0xa1e71a['json']({'message':_0x5ce430[_0x4b6807(0x115)]});}}),router[a0_0x2e9744(0x104)]('/print_barcode',auth,async(_0x5ca852,_0x1ffa97)=>{const _0x42e631=a0_0x2e9744,_0x2eb421=_0x5ca852[_0x42e631(0x157)],_0x534043=await profile[_0x42e631(0x122)]({'email':_0x2eb421[_0x42e631(0x131)]}),_0x180a19=await master_shop[_0x42e631(0x114)](),_0x4e29b2=await product[_0x42e631(0x114)]();if(_0x180a19[0x0][_0x42e631(0x1a2)]==_0x42e631(0x1be))var _0x9b78ab=users[_0x42e631(0x108)];else{if(_0x180a19[0x0]['language']==_0x42e631(0x16d))var _0x9b78ab=users['Hindi'];else{if(_0x180a19[0x0][_0x42e631(0x1a2)]==_0x42e631(0x196))var _0x9b78ab=users['German'];else{if(_0x180a19[0x0]['language']==_0x42e631(0x155))var _0x9b78ab=users[_0x42e631(0x155)];else{if(_0x180a19[0x0][_0x42e631(0x1a2)]==_0x42e631(0x1c4))var _0x9b78ab=users[_0x42e631(0x1c4)];else{if(_0x180a19[0x0][_0x42e631(0x1a2)]==_0x42e631(0x176))var _0x9b78ab=users['Portuguese'];else{if(_0x180a19[0x0][_0x42e631(0x1a2)]==_0x42e631(0x1ae))var _0x9b78ab=users[_0x42e631(0x1ae)];else{if(_0x180a19[0x0]['language']==_0x42e631(0x1a0))var _0x9b78ab=users[_0x42e631(0x121)];}}}}}}}_0x1ffa97[_0x42e631(0x139)](_0x42e631(0x116),{'success':_0x5ca852['flash'](_0x42e631(0x1a5)),'errors':_0x5ca852['flash'](_0x42e631(0x1b1)),'role':_0x2eb421,'profile':_0x534043,'products':_0x4e29b2,'master_shop':_0x180a19,'language':_0x9b78ab});}),router['post'](a0_0x2e9744(0x149),auth,async(_0x53efbc,_0x38b50d)=>{const _0x4aee4f=await product['find']();_0x38b50d['json']({'data':_0x4aee4f});}),router['post'](a0_0x2e9744(0x1a7),auth,async(_0x5c3d29,_0x5334ee)=>{const _0x4b575c=a0_0x2e9744;try{const {dataProdCat:_0x36474b,dataProdIdentity:_0x38b486}=_0x5c3d29[_0x4b575c(0x117)];var _0x350528;switch(_0x36474b){case'fg':switch(_0x38b486){case _0x4b575c(0x172):_0x350528=await product[_0x4b575c(0x183)]([{'$match':{'product_category':_0x4b575c(0x12e)}},{'$group':{'_id':_0x4b575c(0x119)}},{'$project':{'brand':_0x4b575c(0x17d)}}]);break;case _0x4b575c(0x132):_0x350528=await product[_0x4b575c(0x183)]([{'$match':{'product_category':_0x4b575c(0x12e)}},{'$group':{'_id':_0x4b575c(0x180)}},{'$project':{'category':_0x4b575c(0x17d)}}]);break;}break;case'rm':switch(_0x38b486){case _0x4b575c(0x172):_0x350528=await product['aggregate']([{'$match':{'product_category':_0x4b575c(0x19e)}},{'$group':{'_id':_0x4b575c(0x119)}},{'$project':{'brand':'$_id'}}]);break;case'Category':_0x350528=await product[_0x4b575c(0x183)]([{'$match':{'product_category':_0x4b575c(0x19e)}},{'$group':{'_id':'$category'}},{'$project':{'category':'$_id'}}]);break;}break;}_0x5334ee[_0x4b575c(0x129)](_0x350528);}catch(_0x3370a4){_0x5334ee['json']({'message':_0x3370a4[_0x4b575c(0x115)]});}}),router[a0_0x2e9744(0x156)](a0_0x2e9744(0x170),auth,async(_0x83020e,_0x3fa3d8)=>{const _0x4d32de=a0_0x2e9744;try{console[_0x4d32de(0x127)](_0x83020e[_0x4d32de(0x117)]);const {prod_cat:_0x583312,identity:_0x26f542,valueData:_0x18a4fe,typeofbarcode:_0x745c16}=_0x83020e[_0x4d32de(0x117)];let _0x12ce9;switch(_0x583312){case'fg':if(_0x26f542==_0x4d32de(0x172))_0x12ce9=await product[_0x4d32de(0x183)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x18a4fe}}]);else _0x26f542=='Category'&&(_0x12ce9=await product[_0x4d32de(0x183)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x18a4fe}}]));break;case'rm':if(_0x26f542=='Brands')_0x12ce9=await product[_0x4d32de(0x183)]([{'$match':{'product_category':_0x4d32de(0x19e),'brand':_0x18a4fe}}]);else _0x26f542==_0x4d32de(0x132)&&(_0x12ce9=await product[_0x4d32de(0x183)]([{'$match':{'product_category':_0x4d32de(0x19e),'category':_0x18a4fe}}]));break;}const _0x2c480f=_0x5bdf7b=>_0x5bdf7b*0x48,_0x3ed068={'width':0x3,'height':0x1},_0x1217ec=new PDFDocument({'margin':_0x2c480f(0.75),'size':[_0x2c480f(_0x3ed068[_0x4d32de(0x12a)]),_0x2c480f(_0x3ed068['height'])],'bufferPages':!![]}),_0x44f5d6=_0x12ce9[_0x4d32de(0x1ab)];for(let _0x11e1ef=0x0;_0x11e1ef<=_0x44f5d6;_0x11e1ef++){if(_0x11e1ef!=_0x44f5d6){const _0x3294ef=_0x12ce9[_0x11e1ef][_0x4d32de(0x15f)],_0x196242=_0x12ce9[_0x11e1ef][_0x4d32de(0x167)],_0x1e713a=_0x12ce9[_0x11e1ef]['secondary_code'],_0x56af9c=_0x12ce9[_0x11e1ef][_0x4d32de(0x15d)];var _0x1e1a72;switch(_0x745c16){case'1':_0x1e1a72=_0x196242;break;case'2':_0x1e1a72=_0x1e713a;break;case'3':_0x1e1a72=_0x56af9c;break;}const _0x3451b1={'width':0xd2,'height':0x64},_0x53b472={'width':_0x2c480f(_0x3ed068[_0x4d32de(0x12a)]),'height':_0x2c480f(_0x3ed068[_0x4d32de(0x19b)])},_0x340848=new Canvas();JsBarcode(_0x340848,_0x1e1a72,{'format':_0x4d32de(0x18f),'height':_0x3451b1[_0x4d32de(0x19b)],'displayValue':!![],'text':_0x1e1a72});const _0x133edc=_0x340848[_0x4d32de(0x1b9)](),_0x4633c1=_0x53b472[_0x4d32de(0x12a)]/_0x3451b1[_0x4d32de(0x12a)],_0x3bb114=_0x53b472['height']/_0x3451b1[_0x4d32de(0x19b)],_0x2293b6=Math[_0x4d32de(0x1a8)](_0x4633c1,_0x3bb114),_0x2b3696=_0x3451b1[_0x4d32de(0x12a)]*_0x2293b6,_0x27c5e7=_0x3451b1[_0x4d32de(0x19b)]*_0x2293b6,_0x233242=(_0x53b472[_0x4d32de(0x12a)]-_0x2b3696)/0x2,_0x5e8016=(_0x53b472[_0x4d32de(0x19b)]-_0x27c5e7)/0x2;_0x1217ec[_0x4d32de(0x120)](_0x133edc,_0x233242,_0x5e8016,{'width':_0x2b3696,'height':_0x27c5e7}),_0x11e1ef!=_0x44f5d6&&_0x1217ec[_0x4d32de(0x1a9)]();}}const _0xad0ff=[];_0x1217ec['on']('data',_0xad0ff[_0x4d32de(0x17b)][_0x4d32de(0x1af)](_0xad0ff)),_0x1217ec['on']('end',()=>{const _0xe9b2c5=_0x4d32de,_0x13e597=Buffer[_0xe9b2c5(0x1ad)](_0xad0ff),_0x3601a4=_0x13e597[_0xe9b2c5(0x134)](_0xe9b2c5(0x1c2));_0x3fa3d8[_0xe9b2c5(0x129)]({'pdfContent':_0x3601a4});}),_0x1217ec[_0x4d32de(0x130)]();}catch(_0x55d9b3){_0x3fa3d8['json']({'message':_0x55d9b3[_0x4d32de(0x115)]});}}),router[a0_0x2e9744(0x156)]('/print_barcode_filter_search/',auth,async(_0x1ab1a0,_0x6fbedb)=>{const _0xaeb2cc=a0_0x2e9744;try{console[_0xaeb2cc(0x127)](_0x1ab1a0[_0xaeb2cc(0x117)]);const {prod_cat:_0x501afa,identity:_0x3be30a,valueData:_0x1416fc}=_0x1ab1a0['body'];let _0x4a1cb4;switch(_0x501afa){case'fg':if(_0x3be30a==_0xaeb2cc(0x172))_0x4a1cb4=await product['aggregate']([{'$match':{'product_category':_0xaeb2cc(0x12e),'brand':_0x1416fc}}]);else _0x3be30a==_0xaeb2cc(0x132)&&(_0x4a1cb4=await product[_0xaeb2cc(0x183)]([{'$match':{'product_category':_0xaeb2cc(0x12e),'category':_0x1416fc}}]));break;case'rm':if(_0x3be30a==_0xaeb2cc(0x172))_0x4a1cb4=await product['aggregate']([{'$match':{'product_category':_0xaeb2cc(0x19e),'brand':_0x1416fc}}]);else _0x3be30a==_0xaeb2cc(0x132)&&(_0x4a1cb4=await product[_0xaeb2cc(0x183)]([{'$match':{'product_category':_0xaeb2cc(0x19e),'category':_0x1416fc}}]));break;}_0x6fbedb[_0xaeb2cc(0x129)]({'data':_0x4a1cb4});}catch(_0x329b5e){_0x6fbedb['json']({'message':_0x329b5e[_0xaeb2cc(0x115)]});}}),router[a0_0x2e9744(0x156)](a0_0x2e9744(0x1b2),auth,async(_0x1ff6a1,_0x8fe24a)=>{const _0x3ed118=a0_0x2e9744;try{const _0xd5431=_0x1ff6a1[_0x3ed118(0x112)]['id'],{copies:_0x6b2e07,typeofbarcode:_0x451dbb}=_0x1ff6a1[_0x3ed118(0x117)];var _0x36d582=await product[_0x3ed118(0x15e)](_0xd5431);const _0x7f0993=_0x2954c3=>_0x2954c3*0x48,_0xe4bf8f={'width':0x3,'height':0x1},_0x118311=new PDFDocument({'margin':_0x7f0993(0.75),'size':[_0x7f0993(_0xe4bf8f['width']),_0x7f0993(_0xe4bf8f['height'])],'bufferPages':!![]}),_0x58ce83=_0x6b2e07,_0x30dd31=_0x36d582[_0x3ed118(0x15f)],_0x1e2237=_0x36d582[_0x3ed118(0x167)],_0x383d53=_0x36d582['secondary_code'],_0x3bdd40=_0x36d582[_0x3ed118(0x15d)];let _0x5a160d;switch(_0x451dbb){case'1':_0x5a160d=_0x1e2237;break;case'2':_0x5a160d=_0x383d53;break;case'3':_0x5a160d=_0x3bdd40;break;}const _0x38033b={'width':0xd2,'height':0x64},_0x40a85f={'width':_0x7f0993(_0xe4bf8f[_0x3ed118(0x12a)]),'height':_0x7f0993(_0xe4bf8f[_0x3ed118(0x19b)])};for(let _0x13f250=0x1;_0x13f250<=_0x58ce83;_0x13f250++){const _0x47d750=new Canvas();JsBarcode(_0x47d750,_0x5a160d,{'format':_0x3ed118(0x18f),'height':_0x38033b[_0x3ed118(0x19b)],'displayValue':!![],'text':_0x5a160d});const _0xc81bd9=_0x47d750['toBuffer'](),_0x3c18d6=_0x40a85f[_0x3ed118(0x12a)]/_0x38033b[_0x3ed118(0x12a)],_0x4f7266=_0x40a85f[_0x3ed118(0x19b)]/_0x38033b[_0x3ed118(0x19b)],_0x458c07=Math[_0x3ed118(0x1a8)](_0x3c18d6,_0x4f7266),_0x435ed5=_0x38033b['width']*_0x458c07,_0x2e814c=_0x38033b[_0x3ed118(0x19b)]*_0x458c07,_0x1716ef=(_0x40a85f[_0x3ed118(0x12a)]-_0x435ed5)/0x2,_0x545b8b=(_0x40a85f[_0x3ed118(0x19b)]-_0x2e814c)/0x2;_0x118311[_0x3ed118(0x120)](_0xc81bd9,_0x1716ef,_0x545b8b,{'width':_0x435ed5,'height':_0x2e814c}),_0x13f250!=_0x58ce83&&_0x118311[_0x3ed118(0x1a9)]();}const _0x422cbe=[];_0x118311['on'](_0x3ed118(0x1b8),_0x422cbe[_0x3ed118(0x17b)]['bind'](_0x422cbe)),_0x118311['on'](_0x3ed118(0x130),()=>{const _0x18a107=_0x3ed118,_0xebd2a4=Buffer[_0x18a107(0x1ad)](_0x422cbe),_0x2a4fe6=_0xebd2a4[_0x18a107(0x134)](_0x18a107(0x1c2));_0x8fe24a['json']({'pdfContent':_0x2a4fe6});}),_0x118311['end']();}catch(_0x177692){_0x8fe24a['json']({'message':_0x177692['message']});}}),module[a0_0x2e9744(0x174)]=router;