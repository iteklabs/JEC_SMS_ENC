function a0_0x561d(_0x563a85,_0x35c23d){const _0x3acf07=a0_0x3acf();return a0_0x561d=function(_0x561daa,_0x3944ef){_0x561daa=_0x561daa-0x74;let _0x1211db=_0x3acf07[_0x561daa];return _0x1211db;},a0_0x561d(_0x563a85,_0x35c23d);}const a0_0x35acad=a0_0x561d;(function(_0x4552b8,_0x10e610){const _0x13009f=a0_0x561d,_0x21210f=_0x4552b8();while(!![]){try{const _0x2377fc=parseInt(_0x13009f(0xf2))/0x1*(parseInt(_0x13009f(0xf4))/0x2)+-parseInt(_0x13009f(0x9e))/0x3+parseInt(_0x13009f(0x108))/0x4*(parseInt(_0x13009f(0x10c))/0x5)+parseInt(_0x13009f(0x91))/0x6+-parseInt(_0x13009f(0x100))/0x7*(-parseInt(_0x13009f(0xa8))/0x8)+parseInt(_0x13009f(0x127))/0x9+parseInt(_0x13009f(0x9b))/0xa*(-parseInt(_0x13009f(0x89))/0xb);if(_0x2377fc===_0x10e610)break;else _0x21210f['push'](_0x21210f['shift']());}catch(_0x1f7c47){_0x21210f['push'](_0x21210f['shift']());}}}(a0_0x3acf,0x9a24e));const express=require('express'),res=require(a0_0x35acad(0x134)),app=express(),router=express[a0_0x35acad(0xc8)](),multer=require(a0_0x35acad(0x115)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x35acad(0x111)),users=require(a0_0x35acad(0xca)),excelJS=require(a0_0x35acad(0x8a)),xlsx=require('xlsx'),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x35acad(0xaa)),PDFDocument=require(a0_0x35acad(0x80));router[a0_0x35acad(0x12b)](a0_0x35acad(0x96),auth,async(_0x1e617e,_0x11c8fa)=>{const _0x1d6aa9=a0_0x35acad;try{const {username:_0x4d1b9c,email:_0x277baf,role:_0x4ac424}=_0x1e617e[_0x1d6aa9(0x129)],_0x32818b=_0x1e617e['user'],_0x1fccf8=await profile[_0x1d6aa9(0x87)]({'email':_0x32818b[_0x1d6aa9(0x11c)]}),_0x213711=await master_shop[_0x1d6aa9(0x113)]();console[_0x1d6aa9(0x107)](_0x1d6aa9(0xf3),_0x213711);const _0x1f654e=await categories[_0x1d6aa9(0x113)]();if(_0x213711[0x0][_0x1d6aa9(0xbc)]==_0x1d6aa9(0xc5))var _0x449642=users['English'];else{if(_0x213711[0x0][_0x1d6aa9(0xbc)]==_0x1d6aa9(0xd2))var _0x449642=users[_0x1d6aa9(0xd2)];else{if(_0x213711[0x0][_0x1d6aa9(0xbc)]=='German')var _0x449642=users[_0x1d6aa9(0x9a)];else{if(_0x213711[0x0]['language']==_0x1d6aa9(0x114))var _0x449642=users[_0x1d6aa9(0x114)];else{if(_0x213711[0x0][_0x1d6aa9(0xbc)]==_0x1d6aa9(0x7d))var _0x449642=users[_0x1d6aa9(0x7d)];else{if(_0x213711[0x0]['language']==_0x1d6aa9(0xd9))var _0x449642=users[_0x1d6aa9(0xef)];else{if(_0x213711[0x0][_0x1d6aa9(0xbc)]==_0x1d6aa9(0x85))var _0x449642=users[_0x1d6aa9(0x85)];else{if(_0x213711[0x0][_0x1d6aa9(0xbc)]=='Arabic\x20(ae)')var _0x449642=users[_0x1d6aa9(0xea)];}}}}}}}_0x11c8fa[_0x1d6aa9(0xe6)](_0x1d6aa9(0x122),{'success':_0x1e617e[_0x1d6aa9(0xf0)](_0x1d6aa9(0xd0)),'errors':_0x1e617e[_0x1d6aa9(0xf0)](_0x1d6aa9(0x9f)),'role':_0x32818b,'profile':_0x1fccf8,'user':_0x1f654e,'master_shop':_0x213711,'language':_0x449642});}catch(_0x50c0f5){console[_0x1d6aa9(0x107)](_0x50c0f5);}}),router[a0_0x35acad(0xf1)](a0_0x35acad(0x96),auth,async(_0x389e20,_0x35ca5f)=>{const _0x5a2883=a0_0x35acad;try{const {name:_0x291bcf,products:_0x25fe07}=_0x389e20[_0x5a2883(0xdc)],_0x4be797=new categories({'name':_0x291bcf,'products':_0x25fe07}),_0x1ed2a6=await categories[_0x5a2883(0x87)]({'name':_0x291bcf});_0x1ed2a6?_0x389e20['flash'](_0x5a2883(0x9f),_0x291bcf+_0x5a2883(0xd7)):_0x389e20[_0x5a2883(0xf0)]('success',_0x291bcf+_0x5a2883(0xe3));const _0x5b3cb2=await _0x4be797['save']();_0x35ca5f[_0x5a2883(0xe2)](_0x5a2883(0xfa));}catch(_0x169f1c){console[_0x5a2883(0x107)](_0x169f1c);}}),router[a0_0x35acad(0x12b)]('/categories/:id',auth,async(_0x160c25,_0x42fd02)=>{const _0x24b921=a0_0x35acad;try{const {username:_0x4f015c,email:_0x52ac92,role:_0x30263a}=_0x160c25['user'],_0x3265bb=_0x160c25[_0x24b921(0x129)],_0x396aad=await profile[_0x24b921(0x87)]({'email':_0x3265bb['email']}),_0x26ff5f=await master_shop[_0x24b921(0x113)]();console[_0x24b921(0x107)](_0x24b921(0xf3),_0x26ff5f);const _0xbc3e82=_0x160c25[_0x24b921(0xb3)]['id'];console['log'](_0xbc3e82);const _0x1fb942=await categories['findById'](_0xbc3e82);if(_0x26ff5f[0x0][_0x24b921(0xbc)]==_0x24b921(0xc5))var _0x5bcade=users['English'];else{if(_0x26ff5f[0x0][_0x24b921(0xbc)]==_0x24b921(0xd2))var _0x5bcade=users[_0x24b921(0xd2)];else{if(_0x26ff5f[0x0][_0x24b921(0xbc)]==_0x24b921(0x9a))var _0x5bcade=users[_0x24b921(0x9a)];else{if(_0x26ff5f[0x0][_0x24b921(0xbc)]=='Spanish')var _0x5bcade=users[_0x24b921(0x114)];else{if(_0x26ff5f[0x0][_0x24b921(0xbc)]==_0x24b921(0x7d))var _0x5bcade=users[_0x24b921(0x7d)];else{if(_0x26ff5f[0x0][_0x24b921(0xbc)]==_0x24b921(0xd9))var _0x5bcade=users[_0x24b921(0xef)];else{if(_0x26ff5f[0x0][_0x24b921(0xbc)]==_0x24b921(0x85))var _0x5bcade=users[_0x24b921(0x85)];else{if(_0x26ff5f[0x0]['language']==_0x24b921(0xc0))var _0x5bcade=users[_0x24b921(0xea)];}}}}}}}_0x42fd02[_0x24b921(0xe6)](_0x24b921(0x122),{'success':_0x160c25['flash'](_0x24b921(0xd0)),'errors':_0x160c25[_0x24b921(0xf0)](_0x24b921(0x9f)),'role':_0x3265bb,'profile':_0x396aad,'master_shop':_0x26ff5f,'user':_0x1fb942,'language':_0x5bcade});}catch(_0x184c22){console[_0x24b921(0x107)](_0x184c22);}}),router[a0_0x35acad(0xf1)](a0_0x35acad(0x8b),auth,async(_0x20bd95,_0x45f8ec)=>{const _0x94eef6=a0_0x35acad;try{const _0x1c738a=_0x20bd95[_0x94eef6(0xb3)]['id'],_0x2e9712=await categories[_0x94eef6(0x10d)](_0x1c738a,_0x20bd95[_0x94eef6(0xdc)]);_0x20bd95[_0x94eef6(0xf0)]('success',''+users[_0x94eef6(0x7a)]),_0x45f8ec[_0x94eef6(0xe2)](_0x94eef6(0xfa));}catch(_0x2b933d){console['log'](_0x2b933d);}}),router[a0_0x35acad(0x12b)]('/categories/delete/:id',auth,async(_0x59b5c1,_0x4f014a)=>{const _0x5e4114=a0_0x35acad;try{const _0x11e6eb=_0x59b5c1[_0x5e4114(0xb3)]['id'],_0x281066=await categories['findByIdAndDelete'](_0x11e6eb);_0x59b5c1[_0x5e4114(0xf0)](_0x5e4114(0xd0),_0x5e4114(0xf9)),_0x4f014a[_0x5e4114(0xe2)]('/products/categories');}catch(_0x570b61){console[_0x5e4114(0x107)](_0x570b61);}}),router['get'](a0_0x35acad(0xa3),auth,async(_0x157096,_0x3a813f)=>{const _0x267621=a0_0x35acad;try{const {username:_0x48078e,email:_0x1b1df9,role:_0x4bfc3e}=_0x157096[_0x267621(0x129)],_0x1ccfb8=_0x157096[_0x267621(0x129)],_0x94be2=await profile[_0x267621(0x87)]({'email':_0x1ccfb8['email']}),_0xfc22bb=await master_shop[_0x267621(0x113)]();console[_0x267621(0x107)](_0x267621(0xf3),_0xfc22bb);const _0x27bdfa=await brands[_0x267621(0x113)]();if(_0xfc22bb[0x0][_0x267621(0xbc)]==_0x267621(0xc5))var _0x1d2308=users[_0x267621(0xd1)];else{if(_0xfc22bb[0x0][_0x267621(0xbc)]==_0x267621(0xd2))var _0x1d2308=users[_0x267621(0xd2)];else{if(_0xfc22bb[0x0][_0x267621(0xbc)]==_0x267621(0x9a))var _0x1d2308=users[_0x267621(0x9a)];else{if(_0xfc22bb[0x0][_0x267621(0xbc)]==_0x267621(0x114))var _0x1d2308=users[_0x267621(0x114)];else{if(_0xfc22bb[0x0]['language']==_0x267621(0x7d))var _0x1d2308=users['French'];else{if(_0xfc22bb[0x0][_0x267621(0xbc)]==_0x267621(0xd9))var _0x1d2308=users[_0x267621(0xef)];else{if(_0xfc22bb[0x0]['language']=='Chinese')var _0x1d2308=users['Chinese'];else{if(_0xfc22bb[0x0][_0x267621(0xbc)]=='Arabic\x20(ae)')var _0x1d2308=users[_0x267621(0xea)];}}}}}}}_0x3a813f[_0x267621(0xe6)](_0x267621(0x8c),{'success':_0x157096[_0x267621(0xf0)](_0x267621(0xd0)),'errors':_0x157096[_0x267621(0xf0)](_0x267621(0x9f)),'role':_0x1ccfb8,'profile':_0x94be2,'master_shop':_0xfc22bb,'user':_0x27bdfa,'language':_0x1d2308});}catch(_0x3c2beb){console[_0x267621(0x107)](_0x3c2beb);}}),router['post'](a0_0x35acad(0xa3),auth,async(_0x2d0215,_0x3e9a69)=>{const _0x581afe=a0_0x35acad;try{const {name:_0x1a177a,products:_0x17fa70}=_0x2d0215['body'],_0x5dce8=new brands({'name':_0x1a177a,'products':_0x17fa70}),_0x5696ce=await brands[_0x581afe(0x87)]({'name':_0x1a177a});_0x5696ce?_0x2d0215[_0x581afe(0xf0)](_0x581afe(0x9f),_0x1a177a+_0x581afe(0xed)):_0x2d0215[_0x581afe(0xf0)]('success',_0x1a177a+_0x581afe(0xc4));const _0x3a9cf7=await _0x5dce8[_0x581afe(0x76)]();_0x3e9a69[_0x581afe(0xe2)]('/products/brands');}catch(_0x1d2f65){console['log'](_0x1d2f65);}}),router[a0_0x35acad(0x12b)](a0_0x35acad(0x86),auth,async(_0x1290cf,_0x26f5f9)=>{const _0x49ec0a=a0_0x35acad;try{const {username:_0x59c782,email:_0x268664,role:_0x409b05}=_0x1290cf['user'],_0x2c8e04=_0x1290cf[_0x49ec0a(0x129)],_0x2165e9=await profile[_0x49ec0a(0x87)]({'email':_0x2c8e04[_0x49ec0a(0x11c)]}),_0x3c27ce=await master_shop[_0x49ec0a(0x113)]();console['log'](_0x49ec0a(0xf3),_0x3c27ce);const _0x3fc3d4=_0x1290cf[_0x49ec0a(0xb3)]['id'];console[_0x49ec0a(0x107)](_0x3fc3d4);const _0x137166=await brands[_0x49ec0a(0xfb)](_0x3fc3d4);if(_0x3c27ce[0x0]['language']=='English\x20(US)')var _0x372a0e=users['English'];else{if(_0x3c27ce[0x0][_0x49ec0a(0xbc)]==_0x49ec0a(0xd2))var _0x372a0e=users['Hindi'];else{if(_0x3c27ce[0x0][_0x49ec0a(0xbc)]==_0x49ec0a(0x9a))var _0x372a0e=users[_0x49ec0a(0x9a)];else{if(_0x3c27ce[0x0][_0x49ec0a(0xbc)]==_0x49ec0a(0x114))var _0x372a0e=users['Spanish'];else{if(_0x3c27ce[0x0][_0x49ec0a(0xbc)]=='French')var _0x372a0e=users[_0x49ec0a(0x7d)];else{if(_0x3c27ce[0x0][_0x49ec0a(0xbc)]=='Portuguese\x20(BR)')var _0x372a0e=users[_0x49ec0a(0xef)];else{if(_0x3c27ce[0x0][_0x49ec0a(0xbc)]==_0x49ec0a(0x85))var _0x372a0e=users[_0x49ec0a(0x85)];else{if(_0x3c27ce[0x0][_0x49ec0a(0xbc)]==_0x49ec0a(0xc0))var _0x372a0e=users[_0x49ec0a(0xea)];}}}}}}}_0x26f5f9[_0x49ec0a(0xe6)](_0x49ec0a(0x8c),{'success':_0x1290cf[_0x49ec0a(0xf0)](_0x49ec0a(0xd0)),'errors':_0x1290cf[_0x49ec0a(0xf0)]('errors'),'role':_0x2c8e04,'profile':_0x2165e9,'master_shop':_0x3c27ce,'user':_0x137166,'language':_0x372a0e});}catch(_0x130f16){console[_0x49ec0a(0x107)](_0x130f16);}}),router['post'](a0_0x35acad(0x86),auth,async(_0x4d37a3,_0x58ed31)=>{const _0x4a7657=a0_0x35acad;try{const _0xbd077b=_0x4d37a3[_0x4a7657(0xb3)]['id'],_0x1fb9d3=await brands[_0x4a7657(0x10d)](_0xbd077b,_0x4d37a3[_0x4a7657(0xdc)]);_0x4d37a3[_0x4a7657(0xf0)](_0x4a7657(0xd0),_0x4a7657(0x112)),_0x58ed31[_0x4a7657(0xe2)]('/products/brands');}catch(_0x1df7be){console[_0x4a7657(0x107)](_0x1df7be);}}),router[a0_0x35acad(0x12b)](a0_0x35acad(0x77),auth,async(_0x4e9e7b,_0x58ffd6)=>{const _0x14f139=a0_0x35acad;try{const _0x544eca=_0x4e9e7b[_0x14f139(0xb3)]['id'],_0x542062=await brands['findByIdAndDelete'](_0x544eca);_0x4e9e7b[_0x14f139(0xf0)](_0x14f139(0xd0),_0x14f139(0xad)),_0x58ffd6[_0x14f139(0xe2)](_0x14f139(0xa7));}catch(_0xa51c1c){console[_0x14f139(0x107)](_0xa51c1c);}}),router['get']('/units',auth,async(_0x7af20f,_0x2a8e33)=>{const _0x104989=a0_0x35acad;try{const {username:_0x1507a6,email:_0x5d5fb6,role:_0x2bcf71}=_0x7af20f['user'],_0x4dd36c=_0x7af20f[_0x104989(0x129)],_0x42efd8=await profile[_0x104989(0x87)]({'email':_0x4dd36c[_0x104989(0x11c)]}),_0x374042=await master_shop['find']();console[_0x104989(0x107)](_0x104989(0xf3),_0x374042);const _0x46f626=await units[_0x104989(0x113)]();if(_0x374042[0x0][_0x104989(0xbc)]==_0x104989(0xc5))var _0x178509=users[_0x104989(0xd1)];else{if(_0x374042[0x0][_0x104989(0xbc)]=='Hindi')var _0x178509=users[_0x104989(0xd2)];else{if(_0x374042[0x0][_0x104989(0xbc)]==_0x104989(0x9a))var _0x178509=users['German'];else{if(_0x374042[0x0][_0x104989(0xbc)]=='Spanish')var _0x178509=users[_0x104989(0x114)];else{if(_0x374042[0x0][_0x104989(0xbc)]==_0x104989(0x7d))var _0x178509=users[_0x104989(0x7d)];else{if(_0x374042[0x0]['language']==_0x104989(0xd9))var _0x178509=users['Portuguese'];else{if(_0x374042[0x0][_0x104989(0xbc)]==_0x104989(0x85))var _0x178509=users[_0x104989(0x85)];else{if(_0x374042[0x0]['language']==_0x104989(0xc0))var _0x178509=users[_0x104989(0xea)];}}}}}}}_0x2a8e33['render'](_0x104989(0xb4),{'success':_0x7af20f[_0x104989(0xf0)](_0x104989(0xd0)),'errors':_0x7af20f['flash'](_0x104989(0x9f)),'role':_0x4dd36c,'profile':_0x42efd8,'master_shop':_0x374042,'user':_0x46f626,'language':_0x178509});}catch(_0x4192cb){console[_0x104989(0x107)](_0x4192cb);}}),router['post'](a0_0x35acad(0x101),auth,async(_0x352862,_0x596c8c)=>{const _0x84b0c2=a0_0x35acad;try{const {name:_0x16d0f5,secondary_unit:_0x248e20,products:_0x573ffc}=_0x352862[_0x84b0c2(0xdc)],_0x5ea1aa=new units({'name':_0x16d0f5,'secondary_unit':_0x248e20,'products':_0x573ffc}),_0x2717b8=await units[_0x84b0c2(0x87)]({'name':_0x16d0f5});_0x2717b8?_0x352862[_0x84b0c2(0xf0)](_0x84b0c2(0x9f),_0x16d0f5+_0x84b0c2(0x125)):_0x352862['flash'](_0x84b0c2(0xd0),_0x16d0f5+_0x84b0c2(0x12c));const _0x5acaad=await _0x5ea1aa[_0x84b0c2(0x76)]();_0x596c8c[_0x84b0c2(0xe2)](_0x84b0c2(0x126));}catch(_0x5ee589){console[_0x84b0c2(0x107)](_0x5ee589);}}),router['get'](a0_0x35acad(0x12e),auth,async(_0x1d3ad4,_0x507f91)=>{const _0x1a755a=a0_0x35acad;try{const {username:_0xac9d68,email:_0x4f82d2,role:_0x54cf35}=_0x1d3ad4[_0x1a755a(0x129)],_0x389ea6=_0x1d3ad4['user'],_0x114962=await profile[_0x1a755a(0x87)]({'email':_0x389ea6[_0x1a755a(0x11c)]}),_0xc6f97e=await master_shop['find']();console[_0x1a755a(0x107)]('master',_0xc6f97e);const _0x515019=_0x1d3ad4[_0x1a755a(0xb3)]['id'],_0x48ce2d=await units[_0x1a755a(0xfb)](_0x515019);if(_0xc6f97e[0x0][_0x1a755a(0xbc)]==_0x1a755a(0xc5))var _0x3ebd1e=users[_0x1a755a(0xd1)];else{if(_0xc6f97e[0x0][_0x1a755a(0xbc)]==_0x1a755a(0xd2))var _0x3ebd1e=users[_0x1a755a(0xd2)];else{if(_0xc6f97e[0x0]['language']==_0x1a755a(0x9a))var _0x3ebd1e=users['German'];else{if(_0xc6f97e[0x0][_0x1a755a(0xbc)]==_0x1a755a(0x114))var _0x3ebd1e=users[_0x1a755a(0x114)];else{if(_0xc6f97e[0x0][_0x1a755a(0xbc)]==_0x1a755a(0x7d))var _0x3ebd1e=users['French'];else{if(_0xc6f97e[0x0][_0x1a755a(0xbc)]==_0x1a755a(0xd9))var _0x3ebd1e=users[_0x1a755a(0xef)];else{if(_0xc6f97e[0x0][_0x1a755a(0xbc)]=='Chinese')var _0x3ebd1e=users['Chinese'];else{if(_0xc6f97e[0x0]['language']==_0x1a755a(0xc0))var _0x3ebd1e=users['Arabic'];}}}}}}}_0x507f91['render']('units',{'success':_0x1d3ad4[_0x1a755a(0xf0)](_0x1a755a(0xd0)),'errors':_0x1d3ad4[_0x1a755a(0xf0)](_0x1a755a(0x9f)),'role':_0x389ea6,'profile':_0x114962,'master_shop':_0xc6f97e,'user':_0x48ce2d,'language':_0x3ebd1e});}catch(_0x150cf6){console['log'](_0x150cf6);}}),router[a0_0x35acad(0xf1)](a0_0x35acad(0x12e),auth,async(_0x3e9cb7,_0x495a06)=>{const _0x5e7442=a0_0x35acad;try{const _0x56c26f=_0x3e9cb7[_0x5e7442(0xb3)]['id'],_0x4572f=await units['findByIdAndUpdate'](_0x56c26f,_0x3e9cb7['body']);_0x3e9cb7['flash']('success',_0x5e7442(0xcb)),_0x495a06[_0x5e7442(0xe2)](_0x5e7442(0x126));}catch(_0x3470c2){console[_0x5e7442(0x107)](_0x3470c2);}}),router[a0_0x35acad(0x12b)](a0_0x35acad(0x11a),auth,async(_0x30b746,_0x5e0036)=>{const _0x140e75=a0_0x35acad;try{const _0x1bfe90=_0x30b746['params']['id'],_0x115a77=await units[_0x140e75(0x90)](_0x1bfe90);_0x30b746['flash']('success',_0x140e75(0x11e)),_0x5e0036[_0x140e75(0xe2)](_0x140e75(0x126));}catch(_0x213b32){console[_0x140e75(0x107)](_0x213b32);}});const storage=multer['diskStorage']({'destination':(_0x1a30a7,_0x5f26a4,_0x1fe0a3)=>{const _0x4064a1=a0_0x35acad;_0x1fe0a3(null,_0x4064a1(0xde));},'filename':(_0x116be1,_0x3f23d1,_0x14fe8f)=>{const _0x437287=a0_0x35acad;_0x14fe8f(null,Date[_0x437287(0xc1)]()+_0x3f23d1[_0x437287(0xc9)]);}}),upload=multer({'storage':storage});router[a0_0x35acad(0x12b)](a0_0x35acad(0x124),auth,async(_0x3d3862,_0x4ab631)=>{const _0x2882a6=a0_0x35acad;try{const {username:_0x3117fa,email:_0x162ff9,role:_0x22d0ba}=_0x3d3862[_0x2882a6(0x129)],_0x585302=_0x3d3862[_0x2882a6(0x129)],_0xdfcc4a=await profile[_0x2882a6(0x87)]({'email':_0x585302['email']}),_0x5d6130={'year':_0x2882a6(0xf6),'month':_0x2882a6(0x102),'day':'numeric'},_0x4bc54f=await master_shop[_0x2882a6(0x113)]();console[_0x2882a6(0x107)]('Products\x20master',_0x4bc54f);const _0x54c49b=await product[_0x2882a6(0x113)]();console[_0x2882a6(0x107)](_0x2882a6(0x8f),_0x54c49b);const _0x41557a=await warehouse[_0x2882a6(0x7f)]([{'$unwind':_0x2882a6(0xb5)},{'$lookup':{'from':_0x2882a6(0xac),'localField':'product_details.product_name','foreignField':_0x2882a6(0xe5),'as':_0x2882a6(0xe4)}},{'$unwind':_0x2882a6(0xa0)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x2882a6(0xfe)}},{'$group':{'_id':_0x2882a6(0x131),'product_stock':{'$sum':_0x2882a6(0xe7)}}}]);console['log'](_0x2882a6(0x135),_0x41557a),_0x41557a[_0x2882a6(0x82)](_0x3f84eb=>{const _0x2998a3=_0x2882a6,_0x2c8a0d=_0x54c49b[_0x2998a3(0xfc)](_0x220dcb=>{const _0x4d49a3=_0x2998a3;_0x220dcb[_0x4d49a3(0xe5)]==_0x3f84eb[_0x4d49a3(0xa9)]&&(_0x220dcb[_0x4d49a3(0x106)]=parseInt(_0x220dcb[_0x4d49a3(0x106)])+parseInt(_0x3f84eb['product_stock']));});}),console['log'](_0x2882a6(0x8f),_0x54c49b);if(_0x4bc54f[0x0][_0x2882a6(0xbc)]==_0x2882a6(0xc5))var _0xd6c5a7=users[_0x2882a6(0xd1)];else{if(_0x4bc54f[0x0][_0x2882a6(0xbc)]==_0x2882a6(0xd2))var _0xd6c5a7=users['Hindi'];else{if(_0x4bc54f[0x0][_0x2882a6(0xbc)]=='German')var _0xd6c5a7=users[_0x2882a6(0x9a)];else{if(_0x4bc54f[0x0]['language']==_0x2882a6(0x114))var _0xd6c5a7=users[_0x2882a6(0x114)];else{if(_0x4bc54f[0x0][_0x2882a6(0xbc)]==_0x2882a6(0x7d))var _0xd6c5a7=users['French'];else{if(_0x4bc54f[0x0][_0x2882a6(0xbc)]==_0x2882a6(0xd9))var _0xd6c5a7=users[_0x2882a6(0xef)];else{if(_0x4bc54f[0x0][_0x2882a6(0xbc)]==_0x2882a6(0x85))var _0xd6c5a7=users['Chinese'];else{if(_0x4bc54f[0x0][_0x2882a6(0xbc)]==_0x2882a6(0xc0))var _0xd6c5a7=users[_0x2882a6(0xea)];}}}}}}}_0x4ab631['render'](_0x2882a6(0xac),{'success':_0x3d3862[_0x2882a6(0xf0)]('success'),'errors':_0x3d3862[_0x2882a6(0xf0)](_0x2882a6(0x9f)),'alldata':_0x54c49b,'profile':_0xdfcc4a,'master_shop':_0x4bc54f,'role':_0x585302,'product_stock':_0x41557a,'language':_0xd6c5a7});}catch(_0x478f44){console['log'](_0x478f44);}}),router['get'](a0_0x35acad(0x9d),auth,async(_0x30ef4f,_0x4564c0)=>{const _0x34bec0=a0_0x35acad;try{const {username:_0xae6988,email:_0x289ea2,role:_0x1ba5aa}=_0x30ef4f[_0x34bec0(0x129)],_0x5cc7e4=_0x30ef4f[_0x34bec0(0x129)],_0x39367f=await profile[_0x34bec0(0x87)]({'email':_0x5cc7e4[_0x34bec0(0x11c)]}),_0x3f495a=await master_shop[_0x34bec0(0x113)]();console[_0x34bec0(0x107)](_0x34bec0(0xf3),_0x3f495a);const _0x37d311=await categories[_0x34bec0(0x113)]({}),_0x34854a=await brands['find']({}),_0x32c8c4=await units['find']({}),_0xec8bdf=await warehouse[_0x34bec0(0x113)]({'status':_0x34bec0(0x93)});if(_0x3f495a[0x0]['language']==_0x34bec0(0xc5))var _0x45e122=users['English'];else{if(_0x3f495a[0x0][_0x34bec0(0xbc)]=='Hindi')var _0x45e122=users[_0x34bec0(0xd2)];else{if(_0x3f495a[0x0][_0x34bec0(0xbc)]==_0x34bec0(0x9a))var _0x45e122=users['German'];else{if(_0x3f495a[0x0][_0x34bec0(0xbc)]==_0x34bec0(0x114))var _0x45e122=users['Spanish'];else{if(_0x3f495a[0x0][_0x34bec0(0xbc)]==_0x34bec0(0x7d))var _0x45e122=users[_0x34bec0(0x7d)];else{if(_0x3f495a[0x0][_0x34bec0(0xbc)]=='Portuguese\x20(BR)')var _0x45e122=users[_0x34bec0(0xef)];else{if(_0x3f495a[0x0][_0x34bec0(0xbc)]==_0x34bec0(0x85))var _0x45e122=users['Chinese'];else{if(_0x3f495a[0x0][_0x34bec0(0xbc)]=='Arabic\x20(ae)')var _0x45e122=users[_0x34bec0(0xea)];}}}}}}}_0x4564c0['render'](_0x34bec0(0xce),{'success':_0x30ef4f[_0x34bec0(0xf0)]('success'),'errors':_0x30ef4f[_0x34bec0(0xf0)](_0x34bec0(0x9f)),'role':_0x5cc7e4,'profile':_0x39367f,'categories':_0x37d311,'brands':_0x34854a,'master_shop':_0x3f495a,'units':_0x32c8c4,'language':_0x45e122,'find_data':_0xec8bdf});}catch(_0xb08b06){console[_0x34bec0(0x107)](_0xb08b06);}}),router['post'](a0_0x35acad(0x9d),auth,upload['single'](a0_0x35acad(0x7b)),async(_0x15f8ae,_0x30fa65)=>{const _0x8a7e45=a0_0x35acad;try{const {name:_0x140475,category:_0x13f90d,brand:_0x1db42f,unit:_0xb7c3d,alertquantity:_0x1969cb,stock:_0x2ae9b4,product_code:_0x1b2bb4,warehouse:_0x675a06,primary_ItemCode:_0x2e9254,second_ItemCode:_0x128b2e,second_unit:_0x28f817,maxPerUnit:_0xfaf603,MaxPerProduct:_0x4af559,sales_cat:_0xda4b21,type_prod:_0xdd0335}=_0x15f8ae[_0x8a7e45(0xdc)],_0x2fab61=_0x15f8ae['file']?.[_0x8a7e45(0x103)]||_0x8a7e45(0x130),_0x4321e1=new product({'image':_0x2fab61,'name':_0x140475,'category':_0x13f90d,'brand':_0x1db42f,'unit':_0xb7c3d,'alertquantity':_0x1969cb,'stock':_0x2ae9b4,'product_code':_0x1b2bb4,'warehouse':_0x675a06,'primary_code':_0x2e9254,'secondary_code':_0x128b2e,'second_unit':_0x28f817,'maxStocks':_0x4af559,'maxProdPerUnit':_0xfaf603,'sales_category':_0xda4b21,'type_products':_0xdd0335}),_0x5b9cf3=await _0x4321e1[_0x8a7e45(0x76)](),_0x5e0c40=await categories[_0x8a7e45(0x87)]({'name':_0x13f90d});_0x5e0c40[_0x8a7e45(0xac)]=parseInt(_0x5e0c40[_0x8a7e45(0xac)])+0x1,await _0x5e0c40[_0x8a7e45(0x76)]();const _0x185d2d=await brands[_0x8a7e45(0x87)]({'name':_0x1db42f});_0x185d2d[_0x8a7e45(0xac)]=parseInt(_0x185d2d['products'])+0x1,await _0x185d2d[_0x8a7e45(0x76)]();const _0xf074d5=await units[_0x8a7e45(0x87)]({'name':_0xb7c3d});_0xf074d5['products']=parseInt(_0xf074d5[_0x8a7e45(0xac)])+0x1,await _0xf074d5[_0x8a7e45(0x76)](),_0x15f8ae[_0x8a7e45(0xf0)]('success',_0x8a7e45(0x88)),_0x30fa65['redirect'](_0x8a7e45(0xbd));}catch(_0x407a7a){console['log'](_0x407a7a);}}),router[a0_0x35acad(0x12b)]('/view/:id',auth,async(_0xeb2336,_0x401368)=>{const _0x3d8f56=a0_0x35acad;try{const {username:_0x46b5a8,email:_0x20e96e,role:_0x5eefeb}=_0xeb2336[_0x3d8f56(0x129)],_0x615ee9=_0xeb2336[_0x3d8f56(0x129)],_0x61f691=await profile[_0x3d8f56(0x87)]({'email':_0x615ee9[_0x3d8f56(0x11c)]}),_0x231efe=await master_shop[_0x3d8f56(0x113)]();console[_0x3d8f56(0x107)](_0x3d8f56(0x120),_0x231efe);const _0x1e5c04=_0xeb2336[_0x3d8f56(0xb3)]['id'],_0x7d74f0=await product[_0x3d8f56(0xfb)](_0x1e5c04),_0x4c6afa=await categories[_0x3d8f56(0x113)]({}),_0xdae9fd=await brands[_0x3d8f56(0x113)]({}),_0x300d0b=await units[_0x3d8f56(0x113)]({}),_0x1b32c7=await warehouse[_0x3d8f56(0x113)]({'status':'Enabled'}),_0x19cce4=await units[_0x3d8f56(0x7f)]([{'$group':{'_id':_0x3d8f56(0xda),'secondaryunit':{'$first':_0x3d8f56(0x10b)}}}]);if(_0x231efe[0x0][_0x3d8f56(0xbc)]==_0x3d8f56(0xc5))var _0x57f40d=users[_0x3d8f56(0xd1)];else{if(_0x231efe[0x0][_0x3d8f56(0xbc)]==_0x3d8f56(0xd2))var _0x57f40d=users[_0x3d8f56(0xd2)];else{if(_0x231efe[0x0][_0x3d8f56(0xbc)]==_0x3d8f56(0x9a))var _0x57f40d=users['German'];else{if(_0x231efe[0x0]['language']==_0x3d8f56(0x114))var _0x57f40d=users[_0x3d8f56(0x114)];else{if(_0x231efe[0x0][_0x3d8f56(0xbc)]==_0x3d8f56(0x7d))var _0x57f40d=users[_0x3d8f56(0x7d)];else{if(_0x231efe[0x0][_0x3d8f56(0xbc)]==_0x3d8f56(0xd9))var _0x57f40d=users[_0x3d8f56(0xef)];else{if(_0x231efe[0x0][_0x3d8f56(0xbc)]==_0x3d8f56(0x85))var _0x57f40d=users['Chinese'];else{if(_0x231efe[0x0][_0x3d8f56(0xbc)]=='Arabic\x20(ae)')var _0x57f40d=users['Arabic'];}}}}}}}_0x401368[_0x3d8f56(0xe6)]('edit_product',{'success':_0xeb2336[_0x3d8f56(0xf0)](_0x3d8f56(0xd0)),'errors':_0xeb2336[_0x3d8f56(0xf0)](_0x3d8f56(0x9f)),'role':_0x615ee9,'profile':_0x61f691,'alldata':_0x7d74f0,'categories':_0x4c6afa,'brands':_0xdae9fd,'master_shop':_0x231efe,'units':_0x300d0b,'secondunit':_0x19cce4,'find_data':_0x1b32c7,'language':_0x57f40d});}catch(_0x2c4723){console[_0x3d8f56(0x107)](_0x2c4723);}}),router['post']('/view/:id',auth,upload[a0_0x35acad(0x83)](a0_0x35acad(0x7b)),async(_0x418067,_0x589d54)=>{const _0x9d0e7d=a0_0x35acad;try{const _0x18f1bd=_0x418067[_0x9d0e7d(0xb3)]['id'],_0x186509=await product['findById'](_0x18f1bd),{image:_0x3ead80,name:_0x55e658,category:_0x151dea,brand:_0x30037b,sku:_0x3f2777,unit:_0x4f3f0b,alertquantity:_0x4dc8c4,product_code:_0x198bd9,warehouse:_0x1b78fb,primary_ItemCode:_0x3525f1,second_ItemCode:_0x372551,second_unit:_0x2845f8,maxPerUnit:_0x56653d,MaxPerProduct:_0x33fc66,prod_catdata:_0x59e483,type_prod:_0xc0e7cc,sales_cat:_0xa314ba}=_0x418067[_0x9d0e7d(0xdc)];_0x418067[_0x9d0e7d(0xcd)]&&(_0x186509[_0x9d0e7d(0x7b)]=_0x418067[_0x9d0e7d(0xcd)][_0x9d0e7d(0x103)]);_0x186509[_0x9d0e7d(0xe5)]=_0x55e658,_0x186509[_0x9d0e7d(0xdb)]=_0x151dea,_0x186509['brand']=_0x30037b,_0x186509['sku']=_0x3f2777,_0x186509['unit']=_0x4f3f0b,_0x186509[_0x9d0e7d(0x116)]=_0x4dc8c4,_0x186509[_0x9d0e7d(0xee)]=_0x198bd9,_0x186509[_0x9d0e7d(0x11d)]=_0x1b78fb,_0x186509[_0x9d0e7d(0xa2)]=_0x3525f1,_0x186509[_0x9d0e7d(0xdf)]=_0x372551,_0x186509[_0x9d0e7d(0x79)]=_0x2845f8,_0x186509['maxStocks']=_0x33fc66,_0x186509[_0x9d0e7d(0x92)]=_0x56653d,_0x186509['product_category']=_0x59e483,_0x186509[_0x9d0e7d(0xb2)]=_0xc0e7cc,_0x186509['sales_category']=_0xa314ba;const _0x5bb0c8=await _0x186509['save']();console[_0x9d0e7d(0x107)](_0x9d0e7d(0x105),_0x186509),_0x418067[_0x9d0e7d(0xf0)](_0x9d0e7d(0xd0),_0x9d0e7d(0x84)),_0x589d54[_0x9d0e7d(0xe2)](_0x9d0e7d(0xbd));}catch(_0xc2fd95){console[_0x9d0e7d(0x107)](_0xc2fd95);}}),router[a0_0x35acad(0x12b)]('/barcode/:id',auth,async(_0x4ab4c1,_0x4ea0e1)=>{const _0x22d39c=a0_0x35acad;try{const {username:_0x34a22c,email:_0x1cb74c,role:_0x1c02ec}=_0x4ab4c1[_0x22d39c(0x129)],_0x49bc5f=_0x4ab4c1[_0x22d39c(0x129)],_0x379c12=await profile['findOne']({'email':_0x49bc5f[_0x22d39c(0x11c)]}),_0x3f776c=await master_shop[_0x22d39c(0x113)]();console['log'](_0x22d39c(0x7e),_0x3f776c);const _0x286826=_0x4ab4c1[_0x22d39c(0xb3)]['id'],_0x435896=await product[_0x22d39c(0xfb)](_0x286826);console[_0x22d39c(0x107)](_0x22d39c(0x94),_0x435896);if(_0x3f776c[0x0][_0x22d39c(0xbc)]=='English\x20(US)')var _0x2d1285=users[_0x22d39c(0xd1)];else{if(_0x3f776c[0x0][_0x22d39c(0xbc)]==_0x22d39c(0xd2))var _0x2d1285=users['Hindi'];else{if(_0x3f776c[0x0][_0x22d39c(0xbc)]==_0x22d39c(0x9a))var _0x2d1285=users[_0x22d39c(0x9a)];else{if(_0x3f776c[0x0][_0x22d39c(0xbc)]=='Spanish')var _0x2d1285=users[_0x22d39c(0x114)];else{if(_0x3f776c[0x0][_0x22d39c(0xbc)]=='French')var _0x2d1285=users[_0x22d39c(0x7d)];else{if(_0x3f776c[0x0]['language']==_0x22d39c(0xd9))var _0x2d1285=users[_0x22d39c(0xef)];else{if(_0x3f776c[0x0][_0x22d39c(0xbc)]==_0x22d39c(0x85))var _0x2d1285=users[_0x22d39c(0x85)];else{if(_0x3f776c[0x0][_0x22d39c(0xbc)]=='Arabic\x20(ae)')var _0x2d1285=users[_0x22d39c(0xea)];}}}}}}}_0x4ea0e1[_0x22d39c(0xe6)](_0x22d39c(0xb9),{'success':_0x4ab4c1[_0x22d39c(0xf0)]('success'),'errors':_0x4ab4c1[_0x22d39c(0xf0)](_0x22d39c(0x9f)),'role':_0x49bc5f,'profile':_0x379c12,'alldata':_0x435896,'master_shop':_0x3f776c,'language':_0x2d1285});}catch(_0x51c5a1){console[_0x22d39c(0x107)](_0x51c5a1);}}),router[a0_0x35acad(0x12b)](a0_0x35acad(0xd8),auth,async(_0x521aa9,_0x2443b7)=>{const _0x496f78=a0_0x35acad;try{const _0x262c99=new excelJS[(_0x496f78(0xa1))](),_0x489b3f=_0x262c99[_0x496f78(0x81)]('Products');return _0x489b3f[_0x496f78(0xb8)]=[{'header':'Product_Name','key':_0x496f78(0xf8),'width':0xa},{'header':'Brands','key':'PBrands','width':0xa},{'header':_0x496f78(0x123),'key':_0x496f78(0xd3),'width':0xa},{'header':_0x496f78(0x75),'key':_0x496f78(0xbb),'width':0xa},{'header':_0x496f78(0xd4),'key':_0x496f78(0xbe),'width':0xa},{'header':_0x496f78(0xe0),'key':_0x496f78(0xbf),'width':0xa},{'header':'Secondary_Code','key':_0x496f78(0xbf),'width':0xa},{'header':_0x496f78(0xeb),'key':_0x496f78(0xbf),'width':0xa},{'header':_0x496f78(0x104),'key':'PCat','width':0xa},{'header':'Alert_QTY','key':_0x496f78(0x7c),'width':0xa},{'header':_0x496f78(0x132),'key':_0x496f78(0x7c),'width':0xa},{'header':_0x496f78(0xff),'key':_0x496f78(0x117),'width':0xa}],_0x2443b7[_0x496f78(0xd6)](_0x496f78(0x12f),_0x496f78(0x8d)),_0x2443b7[_0x496f78(0xd6)](_0x496f78(0xb1),_0x496f78(0xc3)),_0x262c99[_0x496f78(0x128)][_0x496f78(0xdd)](_0x2443b7)['then'](()=>{const _0x16353e=_0x496f78;_0x2443b7[_0x16353e(0xa4)](0xc8);});}catch(_0x17370e){_0x2443b7['status'](0x190)['send'](_0x17370e);}});const storage1=multer[a0_0x35acad(0xe8)]({'destination':(_0x2376cb,_0x53aac9,_0x5f4cd7)=>{_0x5f4cd7(null,'public/Migration');},'filename':(_0x1e88a2,_0x26c0a8,_0x5f18e2)=>{const _0x54908d=a0_0x35acad;_0x5f18e2(null,Date['now']()+_0x26c0a8[_0x54908d(0xc9)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x3acf(){const _0x51702f=['/select_data','express/lib/response','Products\x20warehouse_data','public/Migration/','Secondary_Units','save','/brands/delete/:id','push','secondary_unit','categories_edit','image','PAlQty','French','barcode\x20Product\x20master','aggregate','pdfkit-table','addWorksheet','forEach','single','product\x20update\x20successfully','Chinese','/brands/:id','findOne','product\x20add\x20successfully','10392943NRHNJP','exceljs','/categories/:id','brands','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','$category','Products\x20find_data','findByIdAndDelete','7538448nInitl','maxProdPerUnit','Enabled','barcode\x20user_id','migrate_product_fule','/categories','CODE128','$brand','/filter_product','German','20YfouDw','/print_barcode_filter_search/','/view/add_products','675237NDhYhl','errors','$product_docs','Workbook','primary_code','/brands','status','SheetNames','sheet_to_json','/products/brands','40856nJqfkh','_id','canvas','addPage','products','brand\x20data\x20delete\x20successfully','base64','utils','categ','Content-Disposition','type_products','params','units','$product_details','toString','Brands','columns','product_barcode','toBuffer','PSecondaryUnits','language','/products/view','MaxperUnits','ProductCode','Arabic\x20(ae)','now','\x20<>\x20','attachment;\x20filename=Product_Migration_File.xlsx','\x20brand\x20is\x20add\x20successfully','English\x20(US)','/barcode_filter','$product_category','Router','originalname','../public/language/languages.json','unit\x20data\x20update\x20successfully','product_category','file','add_product','data','success','English','Hindi','PUnits','max_number_per_units','Finished\x20Goods','setHeader','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/products_export_migrate_file','Portuguese\x20(BR)','$_id','category','body','write','public/upload','secondary_code','Primary_Code','/print_barcode_single/:id','redirect','\x20categories\x20is\x20add\x20successfully','product_docs','name','render','$product_stock','diskStorage','json','Arabic','Product_Code','end','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','product_code','Portuguese','flash','post','3174UZikHs','master','24HWNKFl','\x20Edit\x20Successfully','numeric','min','PName','categories\x20data\x20delete\x20successfully','/products/categories','findById','map','unit','$product_details.product_stock','Products_category','119CnyWJH','/units','long','filename','Category','product\x20edit','stock','log','3083672VEULIg','length','exports','$secondary_unit','5cgZhAP','findByIdAndUpdate','\x20added\x20successfully','readFile','message','../middleware/auth','brand\x20data\x20update\x20successfully','find','Spanish','multer','alertquantity','Prod_Cat','Raw\x20Materials','/print_barcode_filter/','/units/delete/:id','brand','email','warehouse','unit\x20data\x20delete\x20successfully','bind','edit\x20Product\x20master','width','categories','Units','/view','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/products/units','5344614QODLTr','xlsx','user','concat','get','\x20unit\x20is\x20add\x20successfully','height','/units/:id','Content-Type','defaultProduct.avif','$product_name','Maximum_Stocks'];a0_0x3acf=function(){return _0x51702f;};return a0_0x3acf();}router[a0_0x35acad(0xf1)]('/products_import_migrate_file',auth,uploadMigrate[a0_0x35acad(0x83)](a0_0x35acad(0x95)),async(_0x401933,_0x581d86)=>{const _0x5b8ee0=a0_0x35acad,_0x373bf1=_0x401933[_0x5b8ee0(0xcd)][_0x5b8ee0(0x103)],_0x347b46=await xlsx[_0x5b8ee0(0x10f)](_0x5b8ee0(0x74)+_0x373bf1);let _0x1015e9=_0x347b46[_0x5b8ee0(0xa5)],_0x484166=xlsx[_0x5b8ee0(0xaf)][_0x5b8ee0(0xa6)](_0x347b46['Sheets'][_0x1015e9[0x0]]);for(const _0x377ecf of _0x484166){const _0x402616=_0x377ecf['Product_Name'],_0x2684ef=_0x377ecf['Brands'],_0x5505ed=_0x377ecf[_0x5b8ee0(0x123)],_0x5106d8=_0x377ecf['Secondary_Units'],_0x1b02ad=_0x377ecf[_0x5b8ee0(0xeb)],_0x23f635=_0x377ecf[_0x5b8ee0(0x104)],_0x10ce31=_0x377ecf['Alert_QTY'],_0x4c5dc7=_0x377ecf['Primary_Code'],_0x11b1a5=_0x377ecf['Secondary_Code'],_0x219191=_0x377ecf[_0x5b8ee0(0x132)],_0x5cc215=_0x377ecf[_0x5b8ee0(0xd4)],_0x41549e=_0x377ecf[_0x5b8ee0(0xff)];try{let _0x12d8eb=await categories[_0x5b8ee0(0x87)]({'name':_0x23f635});if(!_0x12d8eb){const _0x50f620=new categories({'name':_0x23f635,'products':'0'});_0x12d8eb=await _0x50f620[_0x5b8ee0(0x76)]();}let _0x16f333=await brands[_0x5b8ee0(0x87)]({'name':_0x2684ef});if(!_0x16f333){const _0x4c4f7c=new brands({'name':_0x2684ef,'products':'0'});_0x16f333=await _0x4c4f7c['save']();}let _0x59c577=await units[_0x5b8ee0(0x87)]({'name':_0x5505ed,'secondary_unit':_0x5106d8});if(!_0x59c577){const _0x2d5a2a=new units({'name':_0x5505ed,'secondary_unit':_0x5106d8,'products':'0'});_0x59c577=await _0x2d5a2a[_0x5b8ee0(0x76)]();}const _0x1c93a5=await product[_0x5b8ee0(0x113)]({'name':_0x402616,'category':_0x12d8eb['name'],'brand':_0x16f333[_0x5b8ee0(0xe5)],'secondary_unit':_0x59c577[_0x5b8ee0(0x79)],'product_code':_0x1b02ad});console['log'](_0x1c93a5['length']+_0x5b8ee0(0xc2)+_0x12d8eb[_0x5b8ee0(0xe5)]+'\x20<>\x20'+_0x16f333[_0x5b8ee0(0xe5)]+_0x5b8ee0(0xc2)+_0x59c577[_0x5b8ee0(0x79)]+'\x20<>\x20'+_0x1b02ad+_0x5b8ee0(0xc2)+_0x402616);if(_0x1c93a5['length']===0x0){const _0x2410f3=new product({'image':_0x5b8ee0(0x130),'name':_0x402616,'category':_0x12d8eb[_0x5b8ee0(0xe5)],'brand':_0x16f333['name'],'unit':_0x59c577[_0x5b8ee0(0xe5)],'alertquantity':_0x10ce31,'product_code':_0x1b02ad,'secondary_unit':_0x59c577['secondary_unit'],'primary_code':_0x4c5dc7,'secondary_code':_0x11b1a5,'maxStocks':_0x219191,'maxProdPerUnit':_0x5cc215,'product_category':_0x41549e}),_0x2acc6c=await _0x2410f3[_0x5b8ee0(0x76)]();_0x12d8eb[_0x5b8ee0(0xac)]=parseInt(_0x12d8eb[_0x5b8ee0(0xac)])+0x1,await _0x12d8eb[_0x5b8ee0(0x76)](),_0x16f333['products']=parseInt(_0x16f333[_0x5b8ee0(0xac)])+0x1,await _0x16f333['save'](),_0x59c577[_0x5b8ee0(0xac)]=parseInt(_0x59c577[_0x5b8ee0(0xac)])+0x1,await _0x59c577['save'](),_0x401933[_0x5b8ee0(0xf0)]('success',_0x402616+_0x5b8ee0(0x10e));}else{console['log'](_0x1c93a5[0x0]);const _0x566424=_0x1c93a5[0x0];_0x566424[_0x5b8ee0(0xdb)]=_0x12d8eb[_0x5b8ee0(0xe5)],_0x566424[_0x5b8ee0(0x11b)]=_0x16f333['name'],_0x566424[_0x5b8ee0(0xfd)]=_0x59c577['name'],_0x566424[_0x5b8ee0(0x116)]=_0x10ce31,_0x566424[_0x5b8ee0(0xee)]=_0x1b02ad,_0x566424['secondary_unit']=_0x59c577[_0x5b8ee0(0x79)],_0x566424[_0x5b8ee0(0xa2)]=_0x4c5dc7,_0x566424['secondary_code']=_0x11b1a5,_0x566424['maxStocks']=_0x219191,_0x566424[_0x5b8ee0(0x92)]=_0x5cc215,_0x566424[_0x5b8ee0(0xcc)]=_0x41549e;const _0x2b1755=await _0x566424[_0x5b8ee0(0x76)]();_0x401933[_0x5b8ee0(0xf0)](_0x5b8ee0(0xd0),_0x2b1755['name']+_0x5b8ee0(0xf5));}}catch(_0x4cacb4){_0x581d86[_0x5b8ee0(0xa4)](0x1f4)['json']({'proderror':_0x4cacb4[_0x5b8ee0(0x110)],'aproduct':_0x402616});}}_0x581d86[_0x5b8ee0(0xe2)](_0x5b8ee0(0xbd));}),router['post'](a0_0x35acad(0x133),auth,async(_0x3f4a8f,_0x190bf2)=>{const _0x37e8a6=a0_0x35acad;try{console[_0x37e8a6(0x107)](_0x3f4a8f[_0x37e8a6(0xdc)]);const {data_cateory:_0x23f39e,datachoose:_0x37feee}=_0x3f4a8f[_0x37e8a6(0xdc)];var _0x3ac76e;if(_0x37feee=='prod_categ')_0x3ac76e=await product[_0x37e8a6(0x7f)]([{'$group':{'_id':_0x37e8a6(0xc7)}}]);else{if(_0x37feee==_0x37e8a6(0x8c))_0x3ac76e=await product[_0x37e8a6(0x7f)]([{'$match':{'product_category':_0x23f39e}},{'$group':{'_id':'$brand'}}]);else _0x37feee==_0x37e8a6(0xb0)&&(_0x3ac76e=await product['aggregate']([{'$match':{'product_category':_0x23f39e}},{'$group':{'_id':'$category'}}]));}_0x190bf2[_0x37e8a6(0xe9)](_0x3ac76e);}catch(_0x3bac27){_0x190bf2[_0x37e8a6(0xe9)]({'message':_0x3bac27[_0x37e8a6(0x110)]});}}),router['post'](a0_0x35acad(0x99),auth,async(_0xb3cf46,_0x18775f)=>{const _0x525e95=a0_0x35acad;try{const {data_choosing:_0x45962a,data_selected:_0x311df3}=_0xb3cf46[_0x525e95(0xdc)];var _0x2db18b;if(_0x45962a=='prod_categ')_0x2db18b=await product[_0x525e95(0x7f)]([{'$match':{'product_category':_0x311df3}}]);else{if(_0x45962a==_0x525e95(0x8c))_0x2db18b=await product['aggregate']([{'$match':{'brand':_0x311df3}}]);else _0x45962a==_0x525e95(0xb0)&&(_0x2db18b=await product[_0x525e95(0x7f)]([{'$match':{'category':_0x311df3}}]));}_0x18775f['json'](_0x2db18b);}catch(_0x5aa970){_0x18775f[_0x525e95(0xe9)]({'message':_0x5aa970[_0x525e95(0x110)]});}}),router[a0_0x35acad(0x12b)]('/print_barcode',auth,async(_0x552d14,_0x1d795a)=>{const _0x33c6f9=a0_0x35acad,_0x2c7a9b=_0x552d14[_0x33c6f9(0x129)],_0x265d0c=await profile[_0x33c6f9(0x87)]({'email':_0x2c7a9b[_0x33c6f9(0x11c)]}),_0x4349ed=await master_shop['find'](),_0x21be1d=await product[_0x33c6f9(0x113)]();if(_0x4349ed[0x0][_0x33c6f9(0xbc)]=='English\x20(US)')var _0x3e421a=users[_0x33c6f9(0xd1)];else{if(_0x4349ed[0x0]['language']=='Hindi')var _0x3e421a=users['Hindi'];else{if(_0x4349ed[0x0][_0x33c6f9(0xbc)]==_0x33c6f9(0x9a))var _0x3e421a=users[_0x33c6f9(0x9a)];else{if(_0x4349ed[0x0][_0x33c6f9(0xbc)]==_0x33c6f9(0x114))var _0x3e421a=users['Spanish'];else{if(_0x4349ed[0x0][_0x33c6f9(0xbc)]=='French')var _0x3e421a=users[_0x33c6f9(0x7d)];else{if(_0x4349ed[0x0][_0x33c6f9(0xbc)]==_0x33c6f9(0xd9))var _0x3e421a=users[_0x33c6f9(0xef)];else{if(_0x4349ed[0x0]['language']==_0x33c6f9(0x85))var _0x3e421a=users[_0x33c6f9(0x85)];else{if(_0x4349ed[0x0][_0x33c6f9(0xbc)]==_0x33c6f9(0xc0))var _0x3e421a=users['Arabic'];}}}}}}}_0x1d795a[_0x33c6f9(0xe6)]('product_barcode_products',{'success':_0x552d14['flash'](_0x33c6f9(0xd0)),'errors':_0x552d14[_0x33c6f9(0xf0)](_0x33c6f9(0x9f)),'role':_0x2c7a9b,'profile':_0x265d0c,'products':_0x21be1d,'master_shop':_0x4349ed,'language':_0x3e421a});}),router[a0_0x35acad(0xf1)]('/barcode_data',auth,async(_0x272f83,_0x4b2247)=>{const _0x564306=a0_0x35acad,_0x7a5018=await product['find']();_0x4b2247[_0x564306(0xe9)]({'data':_0x7a5018});}),router[a0_0x35acad(0xf1)](a0_0x35acad(0xc6),auth,async(_0x3d78ac,_0x34745a)=>{const _0x23d302=a0_0x35acad;try{const {dataProdCat:_0x2a3f41,dataProdIdentity:_0x4c855d}=_0x3d78ac[_0x23d302(0xdc)];var _0x3dbcae;switch(_0x2a3f41){case'fg':switch(_0x4c855d){case'Brands':_0x3dbcae=await product[_0x23d302(0x7f)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x23d302(0x98)}},{'$project':{'brand':_0x23d302(0xda)}}]);break;case'Category':_0x3dbcae=await product[_0x23d302(0x7f)]([{'$match':{'product_category':_0x23d302(0xd5)}},{'$group':{'_id':_0x23d302(0x8e)}},{'$project':{'category':_0x23d302(0xda)}}]);break;}break;case'rm':switch(_0x4c855d){case _0x23d302(0xb7):_0x3dbcae=await product['aggregate']([{'$match':{'product_category':_0x23d302(0x118)}},{'$group':{'_id':_0x23d302(0x98)}},{'$project':{'brand':_0x23d302(0xda)}}]);break;case _0x23d302(0x104):_0x3dbcae=await product[_0x23d302(0x7f)]([{'$match':{'product_category':_0x23d302(0x118)}},{'$group':{'_id':_0x23d302(0x8e)}},{'$project':{'category':_0x23d302(0xda)}}]);break;}break;}_0x34745a['json'](_0x3dbcae);}catch(_0x2f0cd5){_0x34745a['json']({'message':_0x2f0cd5[_0x23d302(0x110)]});}}),router[a0_0x35acad(0xf1)](a0_0x35acad(0x119),auth,async(_0x587b8e,_0x3c5c59)=>{const _0x34808f=a0_0x35acad;try{console[_0x34808f(0x107)](_0x587b8e['body']);const {prod_cat:_0x45451a,identity:_0x5638d1,valueData:_0x324d4d,typeofbarcode:_0x2e5969}=_0x587b8e[_0x34808f(0xdc)];let _0x3c5707;switch(_0x45451a){case'fg':if(_0x5638d1=='Brands')_0x3c5707=await product[_0x34808f(0x7f)]([{'$match':{'product_category':_0x34808f(0xd5),'brand':_0x324d4d}}]);else _0x5638d1==_0x34808f(0x104)&&(_0x3c5707=await product[_0x34808f(0x7f)]([{'$match':{'product_category':_0x34808f(0xd5),'category':_0x324d4d}}]));break;case'rm':if(_0x5638d1==_0x34808f(0xb7))_0x3c5707=await product[_0x34808f(0x7f)]([{'$match':{'product_category':_0x34808f(0x118),'brand':_0x324d4d}}]);else _0x5638d1==_0x34808f(0x104)&&(_0x3c5707=await product[_0x34808f(0x7f)]([{'$match':{'product_category':_0x34808f(0x118),'category':_0x324d4d}}]));break;}const _0x551323=_0x304cef=>_0x304cef*0x48,_0x2c793e={'width':0x3,'height':0x1},_0x54128c=new PDFDocument({'margin':_0x551323(0.75),'size':[_0x551323(_0x2c793e[_0x34808f(0x121)]),_0x551323(_0x2c793e['height'])],'bufferPages':!![]}),_0xc8e2fb=_0x3c5707[_0x34808f(0x109)];for(let _0x15bb24=0x0;_0x15bb24<=_0xc8e2fb;_0x15bb24++){if(_0x15bb24!=_0xc8e2fb){const _0x4f887a=_0x3c5707[_0x15bb24][_0x34808f(0xe5)],_0x399eac=_0x3c5707[_0x15bb24][_0x34808f(0xa2)],_0x22e305=_0x3c5707[_0x15bb24][_0x34808f(0xdf)],_0x5b4d25=_0x3c5707[_0x15bb24]['product_code'];var _0x24c020;switch(_0x2e5969){case'1':_0x24c020=_0x399eac;break;case'2':_0x24c020=_0x22e305;break;case'3':_0x24c020=_0x5b4d25;break;}const _0x236043={'width':0xd2,'height':0x64},_0x5f41a8={'width':_0x551323(_0x2c793e[_0x34808f(0x121)]),'height':_0x551323(_0x2c793e[_0x34808f(0x12d)])},_0x1cb9e1=new Canvas();JsBarcode(_0x1cb9e1,_0x24c020,{'format':'CODE128','height':_0x236043[_0x34808f(0x12d)],'displayValue':!![],'text':_0x24c020});const _0x762df7=_0x1cb9e1[_0x34808f(0xba)](),_0x2ba80d=_0x5f41a8['width']/_0x236043[_0x34808f(0x121)],_0x26fe9e=_0x5f41a8[_0x34808f(0x12d)]/_0x236043[_0x34808f(0x12d)],_0x46885d=Math[_0x34808f(0xf7)](_0x2ba80d,_0x26fe9e),_0x514a9c=_0x236043[_0x34808f(0x121)]*_0x46885d,_0x1a6178=_0x236043[_0x34808f(0x12d)]*_0x46885d,_0x32c2b5=(_0x5f41a8[_0x34808f(0x121)]-_0x514a9c)/0x2,_0x41fba6=(_0x5f41a8[_0x34808f(0x12d)]-_0x1a6178)/0x2;_0x54128c['image'](_0x762df7,_0x32c2b5,_0x41fba6,{'width':_0x514a9c,'height':_0x1a6178}),_0x15bb24!=_0xc8e2fb&&_0x54128c[_0x34808f(0xab)]();}}const _0x2af576=[];_0x54128c['on'](_0x34808f(0xcf),_0x2af576[_0x34808f(0x78)][_0x34808f(0x11f)](_0x2af576)),_0x54128c['on']('end',()=>{const _0xf1fcb6=_0x34808f,_0x87332c=Buffer[_0xf1fcb6(0x12a)](_0x2af576),_0x924134=_0x87332c['toString'](_0xf1fcb6(0xae));_0x3c5c59[_0xf1fcb6(0xe9)]({'pdfContent':_0x924134});}),_0x54128c[_0x34808f(0xec)]();}catch(_0x5f243a){_0x3c5c59[_0x34808f(0xe9)]({'message':_0x5f243a[_0x34808f(0x110)]});}}),router[a0_0x35acad(0xf1)](a0_0x35acad(0x9c),auth,async(_0x48e4b9,_0x3c0aa5)=>{const _0x5e0cca=a0_0x35acad;try{console[_0x5e0cca(0x107)](_0x48e4b9['body']);const {prod_cat:_0x4d4595,identity:_0x1a03af,valueData:_0x400315}=_0x48e4b9[_0x5e0cca(0xdc)];let _0x2bba6d;switch(_0x4d4595){case'fg':if(_0x1a03af==_0x5e0cca(0xb7))_0x2bba6d=await product[_0x5e0cca(0x7f)]([{'$match':{'product_category':_0x5e0cca(0xd5),'brand':_0x400315}}]);else _0x1a03af==_0x5e0cca(0x104)&&(_0x2bba6d=await product[_0x5e0cca(0x7f)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x400315}}]));break;case'rm':if(_0x1a03af==_0x5e0cca(0xb7))_0x2bba6d=await product[_0x5e0cca(0x7f)]([{'$match':{'product_category':_0x5e0cca(0x118),'brand':_0x400315}}]);else _0x1a03af==_0x5e0cca(0x104)&&(_0x2bba6d=await product[_0x5e0cca(0x7f)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x400315}}]));break;}_0x3c0aa5[_0x5e0cca(0xe9)]({'data':_0x2bba6d});}catch(_0x56beb4){_0x3c0aa5[_0x5e0cca(0xe9)]({'message':_0x56beb4[_0x5e0cca(0x110)]});}}),router[a0_0x35acad(0xf1)](a0_0x35acad(0xe1),auth,async(_0x352421,_0x250497)=>{const _0x4504d9=a0_0x35acad;try{const _0x2dcdf8=_0x352421[_0x4504d9(0xb3)]['id'],{copies:_0x425e57,typeofbarcode:_0x59487e}=_0x352421['body'];var _0x5c0e0d=await product[_0x4504d9(0xfb)](_0x2dcdf8);const _0x4d055a=_0x3b0fbb=>_0x3b0fbb*0x48,_0x4a8ff3={'width':0x3,'height':0x1},_0x3fd0a9=new PDFDocument({'margin':_0x4d055a(0.75),'size':[_0x4d055a(_0x4a8ff3['width']),_0x4d055a(_0x4a8ff3[_0x4504d9(0x12d)])],'bufferPages':!![]}),_0x357352=_0x425e57,_0x5bbe79=_0x5c0e0d[_0x4504d9(0xe5)],_0x1ac53f=_0x5c0e0d['primary_code'],_0x28d7f3=_0x5c0e0d[_0x4504d9(0xdf)],_0x1d4d61=_0x5c0e0d[_0x4504d9(0xee)];let _0x5e353a;switch(_0x59487e){case'1':_0x5e353a=_0x1ac53f;break;case'2':_0x5e353a=_0x28d7f3;break;case'3':_0x5e353a=_0x1d4d61;break;}const _0x22b7ff={'width':0xd2,'height':0x64},_0x10f94c={'width':_0x4d055a(_0x4a8ff3[_0x4504d9(0x121)]),'height':_0x4d055a(_0x4a8ff3['height'])};for(let _0x4ed098=0x1;_0x4ed098<=_0x357352;_0x4ed098++){const _0x430607=new Canvas();JsBarcode(_0x430607,_0x5e353a,{'format':_0x4504d9(0x97),'height':_0x22b7ff[_0x4504d9(0x12d)],'displayValue':!![],'text':_0x5e353a});const _0x336456=_0x430607[_0x4504d9(0xba)](),_0x38c32e=_0x10f94c[_0x4504d9(0x121)]/_0x22b7ff[_0x4504d9(0x121)],_0x31d6b8=_0x10f94c[_0x4504d9(0x12d)]/_0x22b7ff[_0x4504d9(0x12d)],_0x3d28fc=Math[_0x4504d9(0xf7)](_0x38c32e,_0x31d6b8),_0x2e3b8e=_0x22b7ff[_0x4504d9(0x121)]*_0x3d28fc,_0x23ff6c=_0x22b7ff[_0x4504d9(0x12d)]*_0x3d28fc,_0x540985=(_0x10f94c[_0x4504d9(0x121)]-_0x2e3b8e)/0x2,_0x4c114f=(_0x10f94c[_0x4504d9(0x12d)]-_0x23ff6c)/0x2;_0x3fd0a9[_0x4504d9(0x7b)](_0x336456,_0x540985,_0x4c114f,{'width':_0x2e3b8e,'height':_0x23ff6c}),_0x4ed098!=_0x357352&&_0x3fd0a9[_0x4504d9(0xab)]();}const _0x131303=[];_0x3fd0a9['on'](_0x4504d9(0xcf),_0x131303['push'][_0x4504d9(0x11f)](_0x131303)),_0x3fd0a9['on']('end',()=>{const _0x42a9e8=_0x4504d9,_0x1faa9a=Buffer[_0x42a9e8(0x12a)](_0x131303),_0x413c2e=_0x1faa9a[_0x42a9e8(0xb6)](_0x42a9e8(0xae));_0x250497[_0x42a9e8(0xe9)]({'pdfContent':_0x413c2e});}),_0x3fd0a9['end']();}catch(_0x3b86ca){_0x250497[_0x4504d9(0xe9)]({'message':_0x3b86ca[_0x4504d9(0x110)]});}}),module[a0_0x35acad(0x10a)]=router;