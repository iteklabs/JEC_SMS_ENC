const a0_0x56c35c=a0_0x565a;function a0_0x5124(){const _0x5317c4=['/products/view','primary_code','$secondary_unit','concat','product\x20update\x20successfully','product\x20add\x20successfully','/brands/delete/:id','body','$product_details.product_stock','setHeader','Raw\x20Materials','$product_name','width','send','../middleware/auth','express','pdfkit-table','edit_product','push','min','Products_category','findByIdAndDelete','PBrands','image','barcode\x20user_id','Products','product_category','defaultProduct.avif','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','/brands','$_id','base64','Arabic\x20(ae)','category','Spanish','English\x20(US)','Enabled','utils','product_stock','Primary_Code','status','903217FQbxai','Portuguese','findById','/view/:id','product_code','/categories/delete/:id','PUnits','filename','/categories','German','params','1727442AsXSXm','add_product','height','get','/view/add_products','/brands/:id','redirect','toString','canvas','language','max_number_per_units','message','attachment;\x20filename=Product_Migration_File.xlsx','product\x20edit','/print_barcode_filter/','21130NEAQBr','maxStocks','/products_export_migrate_file','French','Chinese','Product_Code','PAlQty','findOne','$product_details.product_name','public/Migration/','map','end','long','1238055RHBZfK','\x20unit\x20is\x20add\x20successfully','email','\x20brand\x20is\x20add\x20successfully','Brands','aggregate','exports','json','/barcode/:id','brand','units','/products/units','secondary_unit','categories_edit','Portuguese\x20(BR)','$product_details','Products\x20master','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','secondary_code','public/Migration','find','multer','addPage','Secondary_Code','PName','$brand','toBuffer','Hindi','then','\x20categories\x20is\x20add\x20successfully','69480fSNGzj','$product_stock','numeric','categories','../public/language/languages.json','warehouse','type_products','Alert_QTY','MaxperUnits','addWorksheet','\x20<>\x20','Prod_Cat','categ','data','errors','success','single','/products/categories','user','/units/:id','$category','categories\x20data\x20delete\x20successfully','/products/brands','/print_barcode','originalname','Maximum_Stocks','log','Secondary_Units','9215766dfbDQa','CODE128','exceljs','length','English','diskStorage','20YfsQKd','name','/print_barcode_single/:id','write','/barcode_data','prod_categ','unit\x20data\x20update\x20successfully','/units','forEach','22rVHKzN','83579SWpgoS','products','product_barcode','Units','_id','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','render','PSecondaryUnits','PCat','barcode\x20Product\x20master','$product_docs','/barcode_filter','brands','596cWqIca','jsbarcode','flash','../models/all_models','post','express/lib/response','bind','Arabic','\x20added\x20successfully','Finished\x20Goods','/categories/:id','unit','/units/delete/:id','columns','maxProdPerUnit','Category','Content-Disposition','Content-Type','master','ProductCode','now','xlsx','Products\x20find_data','product_barcode_products','alertquantity','findByIdAndUpdate','/filter_product','public/upload','file','Products\x20warehouse_data','product_details.product_name','$product_category','/print_barcode_filter_search/','save'];a0_0x5124=function(){return _0x5317c4;};return a0_0x5124();}(function(_0x415bac,_0x885b3a){const _0x5f5b64=a0_0x565a,_0x43470d=_0x415bac();while(!![]){try{const _0x3e3c36=parseInt(_0x5f5b64(0x225))/0x1*(-parseInt(_0x5f5b64(0x224))/0x2)+-parseInt(_0x5f5b64(0x1db))/0x3+-parseInt(_0x5f5b64(0x169))/0x4*(parseInt(_0x5f5b64(0x1ce))/0x5)+parseInt(_0x5f5b64(0x1bf))/0x6+parseInt(_0x5f5b64(0x1b4))/0x7+-parseInt(_0x5f5b64(0x1f9))/0x8+-parseInt(_0x5f5b64(0x215))/0x9*(-parseInt(_0x5f5b64(0x21b))/0xa);if(_0x3e3c36===_0x885b3a)break;else _0x43470d['push'](_0x43470d['shift']());}catch(_0x5e2cc6){_0x43470d['push'](_0x43470d['shift']());}}}(a0_0x5124,0x78b89));const express=require(a0_0x56c35c(0x19a)),res=require(a0_0x56c35c(0x16e)),app=express(),router=express['Router'](),multer=require(a0_0x56c35c(0x1f0)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x56c35c(0x16c)),auth=require(a0_0x56c35c(0x199)),users=require(a0_0x56c35c(0x1fd)),excelJS=require(a0_0x56c35c(0x217)),xlsx=require(a0_0x56c35c(0x17e)),JsBarcode=require(a0_0x56c35c(0x16a)),{Canvas}=require(a0_0x56c35c(0x1c7)),PDFDocument=require(a0_0x56c35c(0x19b));router[a0_0x56c35c(0x1c2)](a0_0x56c35c(0x1bc),auth,async(_0x44a7d1,_0x537361)=>{const _0x5638f6=a0_0x56c35c;try{const {username:_0x27acce,email:_0x405a7e,role:_0x245248}=_0x44a7d1[_0x5638f6(0x20b)],_0x169488=_0x44a7d1[_0x5638f6(0x20b)],_0x284e03=await profile[_0x5638f6(0x1d5)]({'email':_0x169488[_0x5638f6(0x1dd)]}),_0x145d44=await master_shop[_0x5638f6(0x1ef)]();console['log']('master',_0x145d44);const _0x42e799=await categories['find']();if(_0x145d44[0x0]['language']=='English\x20(US)')var _0x48d9fb=users[_0x5638f6(0x219)];else{if(_0x145d44[0x0][_0x5638f6(0x1c8)]==_0x5638f6(0x1f6))var _0x48d9fb=users[_0x5638f6(0x1f6)];else{if(_0x145d44[0x0]['language']==_0x5638f6(0x1bd))var _0x48d9fb=users[_0x5638f6(0x1bd)];else{if(_0x145d44[0x0][_0x5638f6(0x1c8)]==_0x5638f6(0x1ad))var _0x48d9fb=users[_0x5638f6(0x1ad)];else{if(_0x145d44[0x0][_0x5638f6(0x1c8)]==_0x5638f6(0x1d1))var _0x48d9fb=users['French'];else{if(_0x145d44[0x0][_0x5638f6(0x1c8)]==_0x5638f6(0x1e9))var _0x48d9fb=users['Portuguese'];else{if(_0x145d44[0x0][_0x5638f6(0x1c8)]==_0x5638f6(0x1d2))var _0x48d9fb=users[_0x5638f6(0x1d2)];else{if(_0x145d44[0x0][_0x5638f6(0x1c8)]==_0x5638f6(0x1ab))var _0x48d9fb=users['Arabic'];}}}}}}}_0x537361[_0x5638f6(0x22b)](_0x5638f6(0x1fc),{'success':_0x44a7d1['flash']('success'),'errors':_0x44a7d1['flash'](_0x5638f6(0x207)),'role':_0x169488,'profile':_0x284e03,'user':_0x42e799,'master_shop':_0x145d44,'language':_0x48d9fb});}catch(_0x23626c){console[_0x5638f6(0x213)](_0x23626c);}}),router['post'](a0_0x56c35c(0x1bc),auth,async(_0xaf92e4,_0x38fc6d)=>{const _0x416a32=a0_0x56c35c;try{const {name:_0x2c9820,products:_0x3a56a6}=_0xaf92e4[_0x416a32(0x192)],_0x2ea2a5=new categories({'name':_0x2c9820,'products':_0x3a56a6}),_0x4c5e95=await categories[_0x416a32(0x1d5)]({'name':_0x2c9820});_0x4c5e95?_0xaf92e4[_0x416a32(0x16b)]('errors',_0x2c9820+_0x416a32(0x1ec)):_0xaf92e4[_0x416a32(0x16b)](_0x416a32(0x208),_0x2c9820+_0x416a32(0x1f8));const _0x376ba6=await _0x2ea2a5[_0x416a32(0x18a)]();_0x38fc6d[_0x416a32(0x1c5)](_0x416a32(0x20a));}catch(_0x4e30e4){console[_0x416a32(0x213)](_0x4e30e4);}}),router[a0_0x56c35c(0x1c2)](a0_0x56c35c(0x173),auth,async(_0x58e5d7,_0x58c665)=>{const _0x1d2810=a0_0x56c35c;try{const {username:_0x2e2f91,email:_0x305b4e,role:_0x277447}=_0x58e5d7[_0x1d2810(0x20b)],_0x15c8ab=_0x58e5d7[_0x1d2810(0x20b)],_0x5b3f47=await profile[_0x1d2810(0x1d5)]({'email':_0x15c8ab[_0x1d2810(0x1dd)]}),_0x1f5d21=await master_shop[_0x1d2810(0x1ef)]();console[_0x1d2810(0x213)](_0x1d2810(0x17b),_0x1f5d21);const _0x54f7f6=_0x58e5d7[_0x1d2810(0x1be)]['id'];console[_0x1d2810(0x213)](_0x54f7f6);const _0x2687b0=await categories[_0x1d2810(0x1b6)](_0x54f7f6);if(_0x1f5d21[0x0][_0x1d2810(0x1c8)]=='English\x20(US)')var _0x528309=users['English'];else{if(_0x1f5d21[0x0][_0x1d2810(0x1c8)]==_0x1d2810(0x1f6))var _0x528309=users[_0x1d2810(0x1f6)];else{if(_0x1f5d21[0x0][_0x1d2810(0x1c8)]=='German')var _0x528309=users[_0x1d2810(0x1bd)];else{if(_0x1f5d21[0x0][_0x1d2810(0x1c8)]==_0x1d2810(0x1ad))var _0x528309=users[_0x1d2810(0x1ad)];else{if(_0x1f5d21[0x0][_0x1d2810(0x1c8)]==_0x1d2810(0x1d1))var _0x528309=users['French'];else{if(_0x1f5d21[0x0][_0x1d2810(0x1c8)]==_0x1d2810(0x1e9))var _0x528309=users[_0x1d2810(0x1b5)];else{if(_0x1f5d21[0x0][_0x1d2810(0x1c8)]==_0x1d2810(0x1d2))var _0x528309=users[_0x1d2810(0x1d2)];else{if(_0x1f5d21[0x0][_0x1d2810(0x1c8)]=='Arabic\x20(ae)')var _0x528309=users[_0x1d2810(0x170)];}}}}}}}_0x58c665[_0x1d2810(0x22b)](_0x1d2810(0x1fc),{'success':_0x58e5d7['flash'](_0x1d2810(0x208)),'errors':_0x58e5d7[_0x1d2810(0x16b)]('errors'),'role':_0x15c8ab,'profile':_0x5b3f47,'master_shop':_0x1f5d21,'user':_0x2687b0,'language':_0x528309});}catch(_0x8088d4){console[_0x1d2810(0x213)](_0x8088d4);}}),router[a0_0x56c35c(0x16d)]('/categories/:id',auth,async(_0x26d0d8,_0x5be9a7)=>{const _0x2a513b=a0_0x56c35c;try{const _0x1f3b91=_0x26d0d8['params']['id'],_0x3952b6=await categories[_0x2a513b(0x182)](_0x1f3b91,_0x26d0d8[_0x2a513b(0x192)]);_0x26d0d8[_0x2a513b(0x16b)]('success',''+users[_0x2a513b(0x1e8)]),_0x5be9a7['redirect'](_0x2a513b(0x20a));}catch(_0x3b62c7){console[_0x2a513b(0x213)](_0x3b62c7);}}),router['get'](a0_0x56c35c(0x1b9),auth,async(_0x5f5281,_0x501977)=>{const _0x5464a9=a0_0x56c35c;try{const _0x53c56a=_0x5f5281[_0x5464a9(0x1be)]['id'],_0x10a7c0=await categories[_0x5464a9(0x1a0)](_0x53c56a);_0x5f5281[_0x5464a9(0x16b)]('success',_0x5464a9(0x20e)),_0x501977[_0x5464a9(0x1c5)]('/products/categories');}catch(_0x2b0b62){console[_0x5464a9(0x213)](_0x2b0b62);}}),router['get'](a0_0x56c35c(0x1a8),auth,async(_0x3a3ffa,_0x3d8129)=>{const _0x5465fd=a0_0x56c35c;try{const {username:_0x4aa0e7,email:_0x4432fd,role:_0xb0210e}=_0x3a3ffa[_0x5465fd(0x20b)],_0x54e09a=_0x3a3ffa[_0x5465fd(0x20b)],_0x19a1c7=await profile[_0x5465fd(0x1d5)]({'email':_0x54e09a['email']}),_0x419701=await master_shop['find']();console['log'](_0x5465fd(0x17b),_0x419701);const _0x2b3d0d=await brands[_0x5465fd(0x1ef)]();if(_0x419701[0x0]['language']==_0x5465fd(0x1ae))var _0x2a2cbc=users[_0x5465fd(0x219)];else{if(_0x419701[0x0]['language']=='Hindi')var _0x2a2cbc=users[_0x5465fd(0x1f6)];else{if(_0x419701[0x0][_0x5465fd(0x1c8)]==_0x5465fd(0x1bd))var _0x2a2cbc=users['German'];else{if(_0x419701[0x0]['language']=='Spanish')var _0x2a2cbc=users[_0x5465fd(0x1ad)];else{if(_0x419701[0x0][_0x5465fd(0x1c8)]==_0x5465fd(0x1d1))var _0x2a2cbc=users[_0x5465fd(0x1d1)];else{if(_0x419701[0x0][_0x5465fd(0x1c8)]==_0x5465fd(0x1e9))var _0x2a2cbc=users['Portuguese'];else{if(_0x419701[0x0]['language']==_0x5465fd(0x1d2))var _0x2a2cbc=users[_0x5465fd(0x1d2)];else{if(_0x419701[0x0][_0x5465fd(0x1c8)]==_0x5465fd(0x1ab))var _0x2a2cbc=users[_0x5465fd(0x170)];}}}}}}}_0x3d8129[_0x5465fd(0x22b)](_0x5465fd(0x168),{'success':_0x3a3ffa['flash']('success'),'errors':_0x3a3ffa[_0x5465fd(0x16b)](_0x5465fd(0x207)),'role':_0x54e09a,'profile':_0x19a1c7,'master_shop':_0x419701,'user':_0x2b3d0d,'language':_0x2a2cbc});}catch(_0x15bff4){console['log'](_0x15bff4);}}),router['post'](a0_0x56c35c(0x1a8),auth,async(_0x2e1ec7,_0x5cb215)=>{const _0x119458=a0_0x56c35c;try{const {name:_0x1f725a,products:_0x15eef0}=_0x2e1ec7['body'],_0x369a28=new brands({'name':_0x1f725a,'products':_0x15eef0}),_0x14d50e=await brands[_0x119458(0x1d5)]({'name':_0x1f725a});_0x14d50e?_0x2e1ec7[_0x119458(0x16b)](_0x119458(0x207),_0x1f725a+_0x119458(0x1a7)):_0x2e1ec7[_0x119458(0x16b)]('success',_0x1f725a+_0x119458(0x1de));const _0x4eceb9=await _0x369a28[_0x119458(0x18a)]();_0x5cb215[_0x119458(0x1c5)](_0x119458(0x20f));}catch(_0x5b9722){console['log'](_0x5b9722);}}),router[a0_0x56c35c(0x1c2)](a0_0x56c35c(0x1c4),auth,async(_0x44d0cc,_0x4a58c3)=>{const _0x234ec8=a0_0x56c35c;try{const {username:_0x828482,email:_0x1d9ed2,role:_0x266d5b}=_0x44d0cc[_0x234ec8(0x20b)],_0x2147be=_0x44d0cc[_0x234ec8(0x20b)],_0x5e6f87=await profile[_0x234ec8(0x1d5)]({'email':_0x2147be[_0x234ec8(0x1dd)]}),_0x29f6d7=await master_shop[_0x234ec8(0x1ef)]();console['log'](_0x234ec8(0x17b),_0x29f6d7);const _0x27e8d5=_0x44d0cc[_0x234ec8(0x1be)]['id'];console[_0x234ec8(0x213)](_0x27e8d5);const _0x3e5578=await brands[_0x234ec8(0x1b6)](_0x27e8d5);if(_0x29f6d7[0x0][_0x234ec8(0x1c8)]==_0x234ec8(0x1ae))var _0x3ffd6e=users['English'];else{if(_0x29f6d7[0x0][_0x234ec8(0x1c8)]==_0x234ec8(0x1f6))var _0x3ffd6e=users[_0x234ec8(0x1f6)];else{if(_0x29f6d7[0x0][_0x234ec8(0x1c8)]==_0x234ec8(0x1bd))var _0x3ffd6e=users[_0x234ec8(0x1bd)];else{if(_0x29f6d7[0x0][_0x234ec8(0x1c8)]==_0x234ec8(0x1ad))var _0x3ffd6e=users[_0x234ec8(0x1ad)];else{if(_0x29f6d7[0x0][_0x234ec8(0x1c8)]==_0x234ec8(0x1d1))var _0x3ffd6e=users['French'];else{if(_0x29f6d7[0x0]['language']=='Portuguese\x20(BR)')var _0x3ffd6e=users['Portuguese'];else{if(_0x29f6d7[0x0][_0x234ec8(0x1c8)]=='Chinese')var _0x3ffd6e=users[_0x234ec8(0x1d2)];else{if(_0x29f6d7[0x0][_0x234ec8(0x1c8)]==_0x234ec8(0x1ab))var _0x3ffd6e=users[_0x234ec8(0x170)];}}}}}}}_0x4a58c3[_0x234ec8(0x22b)](_0x234ec8(0x168),{'success':_0x44d0cc['flash'](_0x234ec8(0x208)),'errors':_0x44d0cc[_0x234ec8(0x16b)](_0x234ec8(0x207)),'role':_0x2147be,'profile':_0x5e6f87,'master_shop':_0x29f6d7,'user':_0x3e5578,'language':_0x3ffd6e});}catch(_0x5e9967){console['log'](_0x5e9967);}}),router[a0_0x56c35c(0x16d)](a0_0x56c35c(0x1c4),auth,async(_0x1107f1,_0xd1327b)=>{const _0x4fef38=a0_0x56c35c;try{const _0x5d8634=_0x1107f1[_0x4fef38(0x1be)]['id'],_0x3947de=await brands[_0x4fef38(0x182)](_0x5d8634,_0x1107f1[_0x4fef38(0x192)]);_0x1107f1[_0x4fef38(0x16b)](_0x4fef38(0x208),'brand\x20data\x20update\x20successfully'),_0xd1327b[_0x4fef38(0x1c5)](_0x4fef38(0x20f));}catch(_0x24b7c1){console['log'](_0x24b7c1);}}),router[a0_0x56c35c(0x1c2)](a0_0x56c35c(0x191),auth,async(_0x29fab6,_0x4cbda1)=>{const _0x59f5a9=a0_0x56c35c;try{const _0xa8ede6=_0x29fab6[_0x59f5a9(0x1be)]['id'],_0x1ee50a=await brands['findByIdAndDelete'](_0xa8ede6);_0x29fab6['flash'](_0x59f5a9(0x208),'brand\x20data\x20delete\x20successfully'),_0x4cbda1[_0x59f5a9(0x1c5)](_0x59f5a9(0x20f));}catch(_0xe552b2){console['log'](_0xe552b2);}}),router[a0_0x56c35c(0x1c2)]('/units',auth,async(_0x2135f5,_0x171a69)=>{const _0x33997c=a0_0x56c35c;try{const {username:_0x18dc48,email:_0x5a7f3a,role:_0xb89f1d}=_0x2135f5['user'],_0x33ac06=_0x2135f5[_0x33997c(0x20b)],_0x576196=await profile['findOne']({'email':_0x33ac06[_0x33997c(0x1dd)]}),_0x133236=await master_shop[_0x33997c(0x1ef)]();console['log'](_0x33997c(0x17b),_0x133236);const _0x245c5f=await units[_0x33997c(0x1ef)]();if(_0x133236[0x0][_0x33997c(0x1c8)]==_0x33997c(0x1ae))var _0x9abaff=users[_0x33997c(0x219)];else{if(_0x133236[0x0][_0x33997c(0x1c8)]==_0x33997c(0x1f6))var _0x9abaff=users['Hindi'];else{if(_0x133236[0x0][_0x33997c(0x1c8)]==_0x33997c(0x1bd))var _0x9abaff=users[_0x33997c(0x1bd)];else{if(_0x133236[0x0][_0x33997c(0x1c8)]==_0x33997c(0x1ad))var _0x9abaff=users[_0x33997c(0x1ad)];else{if(_0x133236[0x0][_0x33997c(0x1c8)]==_0x33997c(0x1d1))var _0x9abaff=users['French'];else{if(_0x133236[0x0][_0x33997c(0x1c8)]=='Portuguese\x20(BR)')var _0x9abaff=users[_0x33997c(0x1b5)];else{if(_0x133236[0x0][_0x33997c(0x1c8)]==_0x33997c(0x1d2))var _0x9abaff=users[_0x33997c(0x1d2)];else{if(_0x133236[0x0]['language']==_0x33997c(0x1ab))var _0x9abaff=users[_0x33997c(0x170)];}}}}}}}_0x171a69[_0x33997c(0x22b)](_0x33997c(0x1e5),{'success':_0x2135f5[_0x33997c(0x16b)](_0x33997c(0x208)),'errors':_0x2135f5[_0x33997c(0x16b)](_0x33997c(0x207)),'role':_0x33ac06,'profile':_0x576196,'master_shop':_0x133236,'user':_0x245c5f,'language':_0x9abaff});}catch(_0x1c4c5c){console['log'](_0x1c4c5c);}}),router['post'](a0_0x56c35c(0x222),auth,async(_0x3be946,_0x9e785b)=>{const _0x174e0f=a0_0x56c35c;try{const {name:_0x40e014,secondary_unit:_0x485162,products:_0x25c239}=_0x3be946[_0x174e0f(0x192)],_0x5a1d9f=new units({'name':_0x40e014,'secondary_unit':_0x485162,'products':_0x25c239}),_0x53472d=await units[_0x174e0f(0x1d5)]({'name':_0x40e014});_0x53472d?_0x3be946['flash'](_0x174e0f(0x207),_0x40e014+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x3be946[_0x174e0f(0x16b)](_0x174e0f(0x208),_0x40e014+_0x174e0f(0x1dc));const _0x9d6bab=await _0x5a1d9f[_0x174e0f(0x18a)]();_0x9e785b[_0x174e0f(0x1c5)](_0x174e0f(0x1e6));}catch(_0x56bf61){console[_0x174e0f(0x213)](_0x56bf61);}}),router['get'](a0_0x56c35c(0x20c),auth,async(_0x361c8c,_0xe3ffde)=>{const _0x1c7444=a0_0x56c35c;try{const {username:_0x326b99,email:_0x5340a4,role:_0x5a3152}=_0x361c8c[_0x1c7444(0x20b)],_0x4094d1=_0x361c8c[_0x1c7444(0x20b)],_0x282355=await profile[_0x1c7444(0x1d5)]({'email':_0x4094d1[_0x1c7444(0x1dd)]}),_0x5afeff=await master_shop[_0x1c7444(0x1ef)]();console[_0x1c7444(0x213)](_0x1c7444(0x17b),_0x5afeff);const _0x29c48e=_0x361c8c[_0x1c7444(0x1be)]['id'],_0x419983=await units[_0x1c7444(0x1b6)](_0x29c48e);if(_0x5afeff[0x0]['language']=='English\x20(US)')var _0xdf521d=users[_0x1c7444(0x219)];else{if(_0x5afeff[0x0][_0x1c7444(0x1c8)]==_0x1c7444(0x1f6))var _0xdf521d=users[_0x1c7444(0x1f6)];else{if(_0x5afeff[0x0][_0x1c7444(0x1c8)]==_0x1c7444(0x1bd))var _0xdf521d=users[_0x1c7444(0x1bd)];else{if(_0x5afeff[0x0][_0x1c7444(0x1c8)]==_0x1c7444(0x1ad))var _0xdf521d=users[_0x1c7444(0x1ad)];else{if(_0x5afeff[0x0][_0x1c7444(0x1c8)]==_0x1c7444(0x1d1))var _0xdf521d=users[_0x1c7444(0x1d1)];else{if(_0x5afeff[0x0]['language']==_0x1c7444(0x1e9))var _0xdf521d=users['Portuguese'];else{if(_0x5afeff[0x0][_0x1c7444(0x1c8)]==_0x1c7444(0x1d2))var _0xdf521d=users[_0x1c7444(0x1d2)];else{if(_0x5afeff[0x0][_0x1c7444(0x1c8)]==_0x1c7444(0x1ab))var _0xdf521d=users[_0x1c7444(0x170)];}}}}}}}_0xe3ffde['render'](_0x1c7444(0x1e5),{'success':_0x361c8c['flash'](_0x1c7444(0x208)),'errors':_0x361c8c[_0x1c7444(0x16b)](_0x1c7444(0x207)),'role':_0x4094d1,'profile':_0x282355,'master_shop':_0x5afeff,'user':_0x419983,'language':_0xdf521d});}catch(_0x3f8379){console[_0x1c7444(0x213)](_0x3f8379);}}),router[a0_0x56c35c(0x16d)](a0_0x56c35c(0x20c),auth,async(_0x47b999,_0x38a7af)=>{const _0x5f1261=a0_0x56c35c;try{const _0x3c639f=_0x47b999[_0x5f1261(0x1be)]['id'],_0x4a716b=await units[_0x5f1261(0x182)](_0x3c639f,_0x47b999[_0x5f1261(0x192)]);_0x47b999[_0x5f1261(0x16b)](_0x5f1261(0x208),_0x5f1261(0x221)),_0x38a7af['redirect'](_0x5f1261(0x1e6));}catch(_0x41bfc2){console[_0x5f1261(0x213)](_0x41bfc2);}}),router[a0_0x56c35c(0x1c2)](a0_0x56c35c(0x175),auth,async(_0x1df7ef,_0x25216b)=>{const _0x2e049d=a0_0x56c35c;try{const _0x38deda=_0x1df7ef['params']['id'],_0x58b1ca=await units[_0x2e049d(0x1a0)](_0x38deda);_0x1df7ef[_0x2e049d(0x16b)](_0x2e049d(0x208),'unit\x20data\x20delete\x20successfully'),_0x25216b[_0x2e049d(0x1c5)]('/products/units');}catch(_0x25abb9){console[_0x2e049d(0x213)](_0x25abb9);}});const storage=multer[a0_0x56c35c(0x21a)]({'destination':(_0x32e62e,_0x19c5c0,_0x5dce53)=>{const _0x4a3233=a0_0x56c35c;_0x5dce53(null,_0x4a3233(0x184));},'filename':(_0x2e3fb7,_0x53a86c,_0x54acb5)=>{const _0x2937d7=a0_0x56c35c;_0x54acb5(null,Date[_0x2937d7(0x17d)]()+_0x53a86c['originalname']);}}),upload=multer({'storage':storage});router['get']('/view',auth,async(_0x4d047a,_0x387768)=>{const _0x5df8c5=a0_0x56c35c;try{const {username:_0x487c5b,email:_0x21a228,role:_0x3bdf23}=_0x4d047a[_0x5df8c5(0x20b)],_0x3ee3c8=_0x4d047a[_0x5df8c5(0x20b)],_0x3ec960=await profile[_0x5df8c5(0x1d5)]({'email':_0x3ee3c8['email']}),_0x3626a1={'year':_0x5df8c5(0x1fb),'month':_0x5df8c5(0x1da),'day':'numeric'},_0x2e1c0=await master_shop[_0x5df8c5(0x1ef)]();console[_0x5df8c5(0x213)](_0x5df8c5(0x1eb),_0x2e1c0);const _0x614b58=await product[_0x5df8c5(0x1ef)]();console[_0x5df8c5(0x213)](_0x5df8c5(0x17f),_0x614b58);const _0x5f12aa=await warehouse['aggregate']([{'$unwind':_0x5df8c5(0x1ea)},{'$lookup':{'from':'products','localField':_0x5df8c5(0x187),'foreignField':_0x5df8c5(0x21c),'as':'product_docs'}},{'$unwind':_0x5df8c5(0x166)},{'$project':{'product_name':_0x5df8c5(0x1d6),'product_stock':_0x5df8c5(0x193)}},{'$group':{'_id':_0x5df8c5(0x196),'product_stock':{'$sum':_0x5df8c5(0x1fa)}}}]);console[_0x5df8c5(0x213)](_0x5df8c5(0x186),_0x5f12aa),_0x5f12aa[_0x5df8c5(0x223)](_0x3e6178=>{const _0x213bc4=_0x5df8c5,_0x311d3c=_0x614b58[_0x213bc4(0x1d8)](_0x2714d8=>{const _0x379660=_0x213bc4;_0x2714d8['name']==_0x3e6178[_0x379660(0x229)]&&(_0x2714d8['stock']=parseInt(_0x2714d8['stock'])+parseInt(_0x3e6178[_0x379660(0x1b1)]));});}),console['log'](_0x5df8c5(0x17f),_0x614b58);if(_0x2e1c0[0x0][_0x5df8c5(0x1c8)]==_0x5df8c5(0x1ae))var _0x295e7f=users[_0x5df8c5(0x219)];else{if(_0x2e1c0[0x0][_0x5df8c5(0x1c8)]=='Hindi')var _0x295e7f=users[_0x5df8c5(0x1f6)];else{if(_0x2e1c0[0x0][_0x5df8c5(0x1c8)]==_0x5df8c5(0x1bd))var _0x295e7f=users[_0x5df8c5(0x1bd)];else{if(_0x2e1c0[0x0][_0x5df8c5(0x1c8)]==_0x5df8c5(0x1ad))var _0x295e7f=users[_0x5df8c5(0x1ad)];else{if(_0x2e1c0[0x0]['language']==_0x5df8c5(0x1d1))var _0x295e7f=users[_0x5df8c5(0x1d1)];else{if(_0x2e1c0[0x0][_0x5df8c5(0x1c8)]==_0x5df8c5(0x1e9))var _0x295e7f=users[_0x5df8c5(0x1b5)];else{if(_0x2e1c0[0x0][_0x5df8c5(0x1c8)]==_0x5df8c5(0x1d2))var _0x295e7f=users[_0x5df8c5(0x1d2)];else{if(_0x2e1c0[0x0][_0x5df8c5(0x1c8)]=='Arabic\x20(ae)')var _0x295e7f=users[_0x5df8c5(0x170)];}}}}}}}_0x387768[_0x5df8c5(0x22b)](_0x5df8c5(0x226),{'success':_0x4d047a[_0x5df8c5(0x16b)](_0x5df8c5(0x208)),'errors':_0x4d047a[_0x5df8c5(0x16b)](_0x5df8c5(0x207)),'alldata':_0x614b58,'profile':_0x3ec960,'master_shop':_0x2e1c0,'role':_0x3ee3c8,'product_stock':_0x5f12aa,'language':_0x295e7f});}catch(_0x2e9873){console['log'](_0x2e9873);}}),router[a0_0x56c35c(0x1c2)](a0_0x56c35c(0x1c3),auth,async(_0xe43694,_0x4f7546)=>{const _0x323aa5=a0_0x56c35c;try{const {username:_0x268501,email:_0x153235,role:_0xe9e834}=_0xe43694[_0x323aa5(0x20b)],_0x539af0=_0xe43694[_0x323aa5(0x20b)],_0x2d83ed=await profile[_0x323aa5(0x1d5)]({'email':_0x539af0[_0x323aa5(0x1dd)]}),_0x85282c=await master_shop['find']();console[_0x323aa5(0x213)](_0x323aa5(0x17b),_0x85282c);const _0x48a14e=await categories[_0x323aa5(0x1ef)]({}),_0x49e08a=await brands['find']({}),_0x1aad67=await units[_0x323aa5(0x1ef)]({}),_0xdc51f6=await warehouse['find']({'status':_0x323aa5(0x1af)});if(_0x85282c[0x0]['language']==_0x323aa5(0x1ae))var _0xcd4591=users[_0x323aa5(0x219)];else{if(_0x85282c[0x0][_0x323aa5(0x1c8)]==_0x323aa5(0x1f6))var _0xcd4591=users[_0x323aa5(0x1f6)];else{if(_0x85282c[0x0][_0x323aa5(0x1c8)]==_0x323aa5(0x1bd))var _0xcd4591=users[_0x323aa5(0x1bd)];else{if(_0x85282c[0x0]['language']==_0x323aa5(0x1ad))var _0xcd4591=users['Spanish'];else{if(_0x85282c[0x0][_0x323aa5(0x1c8)]==_0x323aa5(0x1d1))var _0xcd4591=users['French'];else{if(_0x85282c[0x0][_0x323aa5(0x1c8)]==_0x323aa5(0x1e9))var _0xcd4591=users[_0x323aa5(0x1b5)];else{if(_0x85282c[0x0][_0x323aa5(0x1c8)]=='Chinese')var _0xcd4591=users[_0x323aa5(0x1d2)];else{if(_0x85282c[0x0][_0x323aa5(0x1c8)]=='Arabic\x20(ae)')var _0xcd4591=users[_0x323aa5(0x170)];}}}}}}}_0x4f7546['render'](_0x323aa5(0x1c0),{'success':_0xe43694[_0x323aa5(0x16b)](_0x323aa5(0x208)),'errors':_0xe43694[_0x323aa5(0x16b)](_0x323aa5(0x207)),'role':_0x539af0,'profile':_0x2d83ed,'categories':_0x48a14e,'brands':_0x49e08a,'master_shop':_0x85282c,'units':_0x1aad67,'language':_0xcd4591,'find_data':_0xdc51f6});}catch(_0x16d913){console[_0x323aa5(0x213)](_0x16d913);}}),router[a0_0x56c35c(0x16d)](a0_0x56c35c(0x1c3),auth,upload['single'](a0_0x56c35c(0x1a2)),async(_0x538e39,_0x136df7)=>{const _0x2cfdd7=a0_0x56c35c;try{const {name:_0x276a56,category:_0x514e68,brand:_0x2d5b34,unit:_0x51937e,alertquantity:_0x2c7e61,stock:_0x156876,product_code:_0x1226bd,warehouse:_0x1a1573,primary_ItemCode:_0x5e48af,second_ItemCode:_0x3ba069,second_unit:_0x1d3410,maxPerUnit:_0x39a662,MaxPerProduct:_0x3f54f4,sales_cat:_0x3e952f,type_prod:_0x5b743a}=_0x538e39['body'],_0x4bfc26=_0x538e39['file']?.[_0x2cfdd7(0x1bb)]||_0x2cfdd7(0x1a6),_0x574e7c=new product({'image':_0x4bfc26,'name':_0x276a56,'category':_0x514e68,'brand':_0x2d5b34,'unit':_0x51937e,'alertquantity':_0x2c7e61,'stock':_0x156876,'product_code':_0x1226bd,'warehouse':_0x1a1573,'primary_code':_0x5e48af,'secondary_code':_0x3ba069,'second_unit':_0x1d3410,'maxStocks':_0x3f54f4,'maxProdPerUnit':_0x39a662,'sales_category':_0x3e952f,'type_products':_0x5b743a}),_0x2f4875=await _0x574e7c[_0x2cfdd7(0x18a)](),_0x1aa417=await categories[_0x2cfdd7(0x1d5)]({'name':_0x514e68});_0x1aa417[_0x2cfdd7(0x226)]=parseInt(_0x1aa417[_0x2cfdd7(0x226)])+0x1,await _0x1aa417[_0x2cfdd7(0x18a)]();const _0x55abae=await brands[_0x2cfdd7(0x1d5)]({'name':_0x2d5b34});_0x55abae['products']=parseInt(_0x55abae[_0x2cfdd7(0x226)])+0x1,await _0x55abae[_0x2cfdd7(0x18a)]();const _0xe3fba=await units[_0x2cfdd7(0x1d5)]({'name':_0x51937e});_0xe3fba[_0x2cfdd7(0x226)]=parseInt(_0xe3fba[_0x2cfdd7(0x226)])+0x1,await _0xe3fba[_0x2cfdd7(0x18a)](),_0x538e39[_0x2cfdd7(0x16b)](_0x2cfdd7(0x208),_0x2cfdd7(0x190)),_0x136df7[_0x2cfdd7(0x1c5)](_0x2cfdd7(0x18b));}catch(_0x50322f){console[_0x2cfdd7(0x213)](_0x50322f);}}),router[a0_0x56c35c(0x1c2)]('/view/:id',auth,async(_0x220716,_0x4b63b2)=>{const _0x4bd977=a0_0x56c35c;try{const {username:_0x1bcb5f,email:_0xfc63dc,role:_0x26e265}=_0x220716[_0x4bd977(0x20b)],_0x158992=_0x220716['user'],_0xb7230e=await profile[_0x4bd977(0x1d5)]({'email':_0x158992[_0x4bd977(0x1dd)]}),_0x13d41e=await master_shop[_0x4bd977(0x1ef)]();console[_0x4bd977(0x213)]('edit\x20Product\x20master',_0x13d41e);const _0x1d9c82=_0x220716[_0x4bd977(0x1be)]['id'],_0x52419e=await product[_0x4bd977(0x1b6)](_0x1d9c82),_0x318746=await categories[_0x4bd977(0x1ef)]({}),_0x2185d4=await brands[_0x4bd977(0x1ef)]({}),_0x591f9b=await units[_0x4bd977(0x1ef)]({}),_0x3337ea=await warehouse['find']({'status':_0x4bd977(0x1af)}),_0x197a68=await units[_0x4bd977(0x1e0)]([{'$group':{'_id':_0x4bd977(0x1a9),'secondaryunit':{'$first':_0x4bd977(0x18d)}}}]);if(_0x13d41e[0x0]['language']==_0x4bd977(0x1ae))var _0x2c3199=users[_0x4bd977(0x219)];else{if(_0x13d41e[0x0]['language']==_0x4bd977(0x1f6))var _0x2c3199=users[_0x4bd977(0x1f6)];else{if(_0x13d41e[0x0][_0x4bd977(0x1c8)]==_0x4bd977(0x1bd))var _0x2c3199=users[_0x4bd977(0x1bd)];else{if(_0x13d41e[0x0][_0x4bd977(0x1c8)]==_0x4bd977(0x1ad))var _0x2c3199=users[_0x4bd977(0x1ad)];else{if(_0x13d41e[0x0][_0x4bd977(0x1c8)]==_0x4bd977(0x1d1))var _0x2c3199=users[_0x4bd977(0x1d1)];else{if(_0x13d41e[0x0][_0x4bd977(0x1c8)]==_0x4bd977(0x1e9))var _0x2c3199=users[_0x4bd977(0x1b5)];else{if(_0x13d41e[0x0]['language']==_0x4bd977(0x1d2))var _0x2c3199=users[_0x4bd977(0x1d2)];else{if(_0x13d41e[0x0][_0x4bd977(0x1c8)]==_0x4bd977(0x1ab))var _0x2c3199=users[_0x4bd977(0x170)];}}}}}}}_0x4b63b2[_0x4bd977(0x22b)](_0x4bd977(0x19c),{'success':_0x220716[_0x4bd977(0x16b)](_0x4bd977(0x208)),'errors':_0x220716[_0x4bd977(0x16b)](_0x4bd977(0x207)),'role':_0x158992,'profile':_0xb7230e,'alldata':_0x52419e,'categories':_0x318746,'brands':_0x2185d4,'master_shop':_0x13d41e,'units':_0x591f9b,'secondunit':_0x197a68,'find_data':_0x3337ea,'language':_0x2c3199});}catch(_0x34e216){console[_0x4bd977(0x213)](_0x34e216);}}),router[a0_0x56c35c(0x16d)](a0_0x56c35c(0x1b7),auth,upload[a0_0x56c35c(0x209)](a0_0x56c35c(0x1a2)),async(_0x15bb14,_0x17f030)=>{const _0x396160=a0_0x56c35c;try{const _0x497a3a=_0x15bb14['params']['id'],_0x1747df=await product[_0x396160(0x1b6)](_0x497a3a),{image:_0x560506,name:_0x1e38b3,category:_0x538f16,brand:_0x37c514,sku:_0x59da5b,unit:_0x27af37,alertquantity:_0x52df3f,product_code:_0x1ca720,warehouse:_0x24fa52,primary_ItemCode:_0x1e36bd,second_ItemCode:_0x2983b4,second_unit:_0x6fd259,maxPerUnit:_0x5f0e4a,MaxPerProduct:_0x236ba7,prod_catdata:_0x1452f1,type_prod:_0x1cdfff,sales_cat:_0x5470f8}=_0x15bb14[_0x396160(0x192)];_0x15bb14['file']&&(_0x1747df[_0x396160(0x1a2)]=_0x15bb14['file'][_0x396160(0x1bb)]);_0x1747df['name']=_0x1e38b3,_0x1747df['category']=_0x538f16,_0x1747df[_0x396160(0x1e4)]=_0x37c514,_0x1747df['sku']=_0x59da5b,_0x1747df[_0x396160(0x174)]=_0x27af37,_0x1747df[_0x396160(0x181)]=_0x52df3f,_0x1747df[_0x396160(0x1b8)]=_0x1ca720,_0x1747df[_0x396160(0x1fe)]=_0x24fa52,_0x1747df[_0x396160(0x18c)]=_0x1e36bd,_0x1747df[_0x396160(0x1ed)]=_0x2983b4,_0x1747df[_0x396160(0x1e7)]=_0x6fd259,_0x1747df['maxStocks']=_0x236ba7,_0x1747df[_0x396160(0x177)]=_0x5f0e4a,_0x1747df[_0x396160(0x1a5)]=_0x1452f1,_0x1747df[_0x396160(0x1ff)]=_0x1cdfff,_0x1747df['sales_category']=_0x5470f8;const _0x508578=await _0x1747df[_0x396160(0x18a)]();console[_0x396160(0x213)](_0x396160(0x1cc),_0x1747df),_0x15bb14[_0x396160(0x16b)](_0x396160(0x208),_0x396160(0x18f)),_0x17f030['redirect'](_0x396160(0x18b));}catch(_0x44481b){console[_0x396160(0x213)](_0x44481b);}}),router[a0_0x56c35c(0x1c2)](a0_0x56c35c(0x1e3),auth,async(_0x189265,_0x1aced6)=>{const _0x58d933=a0_0x56c35c;try{const {username:_0xe88f6a,email:_0x341cc9,role:_0x513aae}=_0x189265[_0x58d933(0x20b)],_0x271344=_0x189265[_0x58d933(0x20b)],_0x2b2e2b=await profile[_0x58d933(0x1d5)]({'email':_0x271344[_0x58d933(0x1dd)]}),_0x485679=await master_shop[_0x58d933(0x1ef)]();console[_0x58d933(0x213)](_0x58d933(0x165),_0x485679);const _0x4672d8=_0x189265[_0x58d933(0x1be)]['id'],_0x5af734=await product[_0x58d933(0x1b6)](_0x4672d8);console['log'](_0x58d933(0x1a3),_0x5af734);if(_0x485679[0x0]['language']==_0x58d933(0x1ae))var _0x112ea1=users[_0x58d933(0x219)];else{if(_0x485679[0x0][_0x58d933(0x1c8)]=='Hindi')var _0x112ea1=users[_0x58d933(0x1f6)];else{if(_0x485679[0x0][_0x58d933(0x1c8)]==_0x58d933(0x1bd))var _0x112ea1=users['German'];else{if(_0x485679[0x0][_0x58d933(0x1c8)]==_0x58d933(0x1ad))var _0x112ea1=users[_0x58d933(0x1ad)];else{if(_0x485679[0x0]['language']==_0x58d933(0x1d1))var _0x112ea1=users['French'];else{if(_0x485679[0x0]['language']==_0x58d933(0x1e9))var _0x112ea1=users[_0x58d933(0x1b5)];else{if(_0x485679[0x0][_0x58d933(0x1c8)]=='Chinese')var _0x112ea1=users[_0x58d933(0x1d2)];else{if(_0x485679[0x0]['language']=='Arabic\x20(ae)')var _0x112ea1=users[_0x58d933(0x170)];}}}}}}}_0x1aced6['render'](_0x58d933(0x227),{'success':_0x189265[_0x58d933(0x16b)](_0x58d933(0x208)),'errors':_0x189265['flash'](_0x58d933(0x207)),'role':_0x271344,'profile':_0x2b2e2b,'alldata':_0x5af734,'master_shop':_0x485679,'language':_0x112ea1});}catch(_0x49a3b0){console[_0x58d933(0x213)](_0x49a3b0);}}),router[a0_0x56c35c(0x1c2)](a0_0x56c35c(0x1d0),auth,async(_0xd8a1a,_0x29b01d)=>{const _0x55d247=a0_0x56c35c;try{const _0x1acc97=new excelJS['Workbook'](),_0x15f1bf=_0x1acc97[_0x55d247(0x202)](_0x55d247(0x1a4));return _0x15f1bf[_0x55d247(0x176)]=[{'header':'Product_Name','key':_0x55d247(0x1f3),'width':0xa},{'header':_0x55d247(0x1df),'key':_0x55d247(0x1a1),'width':0xa},{'header':'Units','key':_0x55d247(0x1ba),'width':0xa},{'header':_0x55d247(0x214),'key':_0x55d247(0x163),'width':0xa},{'header':_0x55d247(0x1c9),'key':_0x55d247(0x201),'width':0xa},{'header':_0x55d247(0x1b2),'key':_0x55d247(0x17c),'width':0xa},{'header':_0x55d247(0x1f2),'key':'ProductCode','width':0xa},{'header':_0x55d247(0x1d3),'key':_0x55d247(0x17c),'width':0xa},{'header':_0x55d247(0x178),'key':_0x55d247(0x164),'width':0xa},{'header':_0x55d247(0x200),'key':_0x55d247(0x1d4),'width':0xa},{'header':'Maximum_Stocks','key':_0x55d247(0x1d4),'width':0xa},{'header':_0x55d247(0x19f),'key':_0x55d247(0x204),'width':0xa}],_0x29b01d[_0x55d247(0x194)](_0x55d247(0x17a),_0x55d247(0x22a)),_0x29b01d[_0x55d247(0x194)](_0x55d247(0x179),_0x55d247(0x1cb)),_0x1acc97[_0x55d247(0x17e)][_0x55d247(0x21e)](_0x29b01d)[_0x55d247(0x1f7)](()=>{const _0x2202ec=_0x55d247;_0x29b01d[_0x2202ec(0x1b3)](0xc8);});}catch(_0x93f8d){_0x29b01d[_0x55d247(0x1b3)](0x190)[_0x55d247(0x198)](_0x93f8d);}});function a0_0x565a(_0x55508c,_0x11f04f){const _0x512416=a0_0x5124();return a0_0x565a=function(_0x565a8f,_0x4e0e41){_0x565a8f=_0x565a8f-0x163;let _0x5d0c61=_0x512416[_0x565a8f];return _0x5d0c61;},a0_0x565a(_0x55508c,_0x11f04f);}const storage1=multer[a0_0x56c35c(0x21a)]({'destination':(_0x59a969,_0x1ae22b,_0x40d471)=>{const _0x2f7f2c=a0_0x56c35c;_0x40d471(null,_0x2f7f2c(0x1ee));},'filename':(_0xa6d1c8,_0xf35c,_0x5867e5)=>{const _0x3b8df0=a0_0x56c35c;_0x5867e5(null,Date['now']()+_0xf35c[_0x3b8df0(0x211)]);}}),uploadMigrate=multer({'storage':storage1});router['post']('/products_import_migrate_file',auth,uploadMigrate[a0_0x56c35c(0x209)]('migrate_product_fule'),async(_0x3aa8b0,_0x21ffc3)=>{const _0x52a8c4=a0_0x56c35c,_0x52a866=_0x3aa8b0[_0x52a8c4(0x185)][_0x52a8c4(0x1bb)],_0x1bd49a=await xlsx['readFile'](_0x52a8c4(0x1d7)+_0x52a866);let _0x20b257=_0x1bd49a['SheetNames'],_0x2073e9=xlsx[_0x52a8c4(0x1b0)]['sheet_to_json'](_0x1bd49a['Sheets'][_0x20b257[0x0]]);for(const _0x12471f of _0x2073e9){const _0x3b5b2c=_0x12471f['Product_Name'],_0x22e43e=_0x12471f['Brands'],_0x17e523=_0x12471f[_0x52a8c4(0x228)],_0x284b51=_0x12471f['Secondary_Units'],_0x3312bf=_0x12471f['Product_Code'],_0x5622aa=_0x12471f[_0x52a8c4(0x178)],_0x243f35=_0x12471f['Alert_QTY'],_0x4f4323=_0x12471f[_0x52a8c4(0x1b2)],_0x3e93c9=_0x12471f[_0x52a8c4(0x1f2)],_0x3a3337=_0x12471f[_0x52a8c4(0x212)],_0x45cac5=_0x12471f['max_number_per_units'],_0x548e18=_0x12471f[_0x52a8c4(0x19f)];try{let _0x2fbf30=await categories['findOne']({'name':_0x5622aa});if(!_0x2fbf30){const _0x2afe03=new categories({'name':_0x5622aa,'products':'0'});_0x2fbf30=await _0x2afe03[_0x52a8c4(0x18a)]();}let _0x5b3fec=await brands[_0x52a8c4(0x1d5)]({'name':_0x22e43e});if(!_0x5b3fec){const _0x133e22=new brands({'name':_0x22e43e,'products':'0'});_0x5b3fec=await _0x133e22[_0x52a8c4(0x18a)]();}let _0x51542f=await units[_0x52a8c4(0x1d5)]({'name':_0x17e523,'secondary_unit':_0x284b51});if(!_0x51542f){const _0x22afe0=new units({'name':_0x17e523,'secondary_unit':_0x284b51,'products':'0'});_0x51542f=await _0x22afe0[_0x52a8c4(0x18a)]();}const _0x2ef5e6=await product[_0x52a8c4(0x1ef)]({'name':_0x3b5b2c,'category':_0x2fbf30[_0x52a8c4(0x21c)],'brand':_0x5b3fec['name'],'secondary_unit':_0x51542f[_0x52a8c4(0x1e7)],'product_code':_0x3312bf});console[_0x52a8c4(0x213)](_0x2ef5e6[_0x52a8c4(0x218)]+_0x52a8c4(0x203)+_0x2fbf30[_0x52a8c4(0x21c)]+_0x52a8c4(0x203)+_0x5b3fec[_0x52a8c4(0x21c)]+_0x52a8c4(0x203)+_0x51542f[_0x52a8c4(0x1e7)]+_0x52a8c4(0x203)+_0x3312bf+_0x52a8c4(0x203)+_0x3b5b2c);if(_0x2ef5e6[_0x52a8c4(0x218)]===0x0){const _0x21a01a=new product({'image':_0x52a8c4(0x1a6),'name':_0x3b5b2c,'category':_0x2fbf30[_0x52a8c4(0x21c)],'brand':_0x5b3fec[_0x52a8c4(0x21c)],'unit':_0x51542f[_0x52a8c4(0x21c)],'alertquantity':_0x243f35,'product_code':_0x3312bf,'secondary_unit':_0x51542f[_0x52a8c4(0x1e7)],'primary_code':_0x4f4323,'secondary_code':_0x3e93c9,'maxStocks':_0x3a3337,'maxProdPerUnit':_0x45cac5,'product_category':_0x548e18}),_0x49b2d9=await _0x21a01a[_0x52a8c4(0x18a)]();_0x2fbf30[_0x52a8c4(0x226)]=parseInt(_0x2fbf30['products'])+0x1,await _0x2fbf30['save'](),_0x5b3fec['products']=parseInt(_0x5b3fec[_0x52a8c4(0x226)])+0x1,await _0x5b3fec[_0x52a8c4(0x18a)](),_0x51542f[_0x52a8c4(0x226)]=parseInt(_0x51542f['products'])+0x1,await _0x51542f['save'](),_0x3aa8b0[_0x52a8c4(0x16b)](_0x52a8c4(0x208),_0x3b5b2c+_0x52a8c4(0x171));}else{console[_0x52a8c4(0x213)](_0x2ef5e6[0x0]);const _0xa189dd=_0x2ef5e6[0x0];_0xa189dd[_0x52a8c4(0x1ac)]=_0x2fbf30[_0x52a8c4(0x21c)],_0xa189dd[_0x52a8c4(0x1e4)]=_0x5b3fec[_0x52a8c4(0x21c)],_0xa189dd['unit']=_0x51542f['name'],_0xa189dd['alertquantity']=_0x243f35,_0xa189dd[_0x52a8c4(0x1b8)]=_0x3312bf,_0xa189dd[_0x52a8c4(0x1e7)]=_0x51542f[_0x52a8c4(0x1e7)],_0xa189dd[_0x52a8c4(0x18c)]=_0x4f4323,_0xa189dd[_0x52a8c4(0x1ed)]=_0x3e93c9,_0xa189dd[_0x52a8c4(0x1cf)]=_0x3a3337,_0xa189dd[_0x52a8c4(0x177)]=_0x45cac5,_0xa189dd[_0x52a8c4(0x1a5)]=_0x548e18;const _0x109929=await _0xa189dd[_0x52a8c4(0x18a)]();_0x3aa8b0[_0x52a8c4(0x16b)](_0x52a8c4(0x208),_0x109929[_0x52a8c4(0x21c)]+'\x20Edit\x20Successfully');}}catch(_0x4fcb52){_0x21ffc3[_0x52a8c4(0x1b3)](0x1f4)[_0x52a8c4(0x1e2)]({'proderror':_0x4fcb52['message'],'aproduct':_0x3b5b2c});}}_0x21ffc3[_0x52a8c4(0x1c5)](_0x52a8c4(0x18b));}),router[a0_0x56c35c(0x16d)]('/select_data',auth,async(_0x5419a2,_0x16a904)=>{const _0x22b59b=a0_0x56c35c;try{console[_0x22b59b(0x213)](_0x5419a2[_0x22b59b(0x192)]);const {data_cateory:_0x187a8b,datachoose:_0x2aba2e}=_0x5419a2[_0x22b59b(0x192)];var _0x3151f6;if(_0x2aba2e==_0x22b59b(0x220))_0x3151f6=await product[_0x22b59b(0x1e0)]([{'$group':{'_id':_0x22b59b(0x188)}}]);else{if(_0x2aba2e==_0x22b59b(0x168))_0x3151f6=await product[_0x22b59b(0x1e0)]([{'$match':{'product_category':_0x187a8b}},{'$group':{'_id':_0x22b59b(0x1f4)}}]);else _0x2aba2e==_0x22b59b(0x205)&&(_0x3151f6=await product['aggregate']([{'$match':{'product_category':_0x187a8b}},{'$group':{'_id':_0x22b59b(0x20d)}}]));}_0x16a904[_0x22b59b(0x1e2)](_0x3151f6);}catch(_0x217ae3){_0x16a904[_0x22b59b(0x1e2)]({'message':_0x217ae3['message']});}}),router[a0_0x56c35c(0x16d)](a0_0x56c35c(0x183),auth,async(_0x7aa38d,_0x53e58c)=>{const _0x23d913=a0_0x56c35c;try{const {data_choosing:_0x419d14,data_selected:_0x2705f9}=_0x7aa38d['body'];var _0x5eda49;if(_0x419d14==_0x23d913(0x220))_0x5eda49=await product['aggregate']([{'$match':{'product_category':_0x2705f9}}]);else{if(_0x419d14=='brands')_0x5eda49=await product[_0x23d913(0x1e0)]([{'$match':{'brand':_0x2705f9}}]);else _0x419d14==_0x23d913(0x205)&&(_0x5eda49=await product[_0x23d913(0x1e0)]([{'$match':{'category':_0x2705f9}}]));}_0x53e58c[_0x23d913(0x1e2)](_0x5eda49);}catch(_0x4e140e){_0x53e58c[_0x23d913(0x1e2)]({'message':_0x4e140e['message']});}}),router[a0_0x56c35c(0x1c2)](a0_0x56c35c(0x210),auth,async(_0x3c2154,_0x5e2ec4)=>{const _0xb89cad=a0_0x56c35c,_0x333149=_0x3c2154['user'],_0x25ac0f=await profile[_0xb89cad(0x1d5)]({'email':_0x333149[_0xb89cad(0x1dd)]}),_0x15374a=await master_shop[_0xb89cad(0x1ef)](),_0x13fed4=await product[_0xb89cad(0x1ef)]();if(_0x15374a[0x0]['language']=='English\x20(US)')var _0x5a825e=users[_0xb89cad(0x219)];else{if(_0x15374a[0x0][_0xb89cad(0x1c8)]=='Hindi')var _0x5a825e=users[_0xb89cad(0x1f6)];else{if(_0x15374a[0x0][_0xb89cad(0x1c8)]==_0xb89cad(0x1bd))var _0x5a825e=users[_0xb89cad(0x1bd)];else{if(_0x15374a[0x0]['language']==_0xb89cad(0x1ad))var _0x5a825e=users[_0xb89cad(0x1ad)];else{if(_0x15374a[0x0][_0xb89cad(0x1c8)]==_0xb89cad(0x1d1))var _0x5a825e=users[_0xb89cad(0x1d1)];else{if(_0x15374a[0x0]['language']=='Portuguese\x20(BR)')var _0x5a825e=users[_0xb89cad(0x1b5)];else{if(_0x15374a[0x0][_0xb89cad(0x1c8)]==_0xb89cad(0x1d2))var _0x5a825e=users[_0xb89cad(0x1d2)];else{if(_0x15374a[0x0][_0xb89cad(0x1c8)]=='Arabic\x20(ae)')var _0x5a825e=users[_0xb89cad(0x170)];}}}}}}}_0x5e2ec4['render'](_0xb89cad(0x180),{'success':_0x3c2154[_0xb89cad(0x16b)](_0xb89cad(0x208)),'errors':_0x3c2154[_0xb89cad(0x16b)](_0xb89cad(0x207)),'role':_0x333149,'profile':_0x25ac0f,'products':_0x13fed4,'master_shop':_0x15374a,'language':_0x5a825e});}),router['post'](a0_0x56c35c(0x21f),auth,async(_0x22ce1a,_0x31bd58)=>{const _0x266bce=a0_0x56c35c,_0x4961c9=await product[_0x266bce(0x1ef)]();_0x31bd58[_0x266bce(0x1e2)]({'data':_0x4961c9});}),router[a0_0x56c35c(0x16d)](a0_0x56c35c(0x167),auth,async(_0x3caa7d,_0x5399d2)=>{const _0xb6fa8a=a0_0x56c35c;try{const {dataProdCat:_0x27b31c,dataProdIdentity:_0x21ab6f}=_0x3caa7d[_0xb6fa8a(0x192)];var _0x12e473;switch(_0x27b31c){case'fg':switch(_0x21ab6f){case _0xb6fa8a(0x1df):_0x12e473=await product[_0xb6fa8a(0x1e0)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0xb6fa8a(0x1a9)}}]);break;case _0xb6fa8a(0x178):_0x12e473=await product[_0xb6fa8a(0x1e0)]([{'$match':{'product_category':_0xb6fa8a(0x172)}},{'$group':{'_id':_0xb6fa8a(0x20d)}},{'$project':{'category':_0xb6fa8a(0x1a9)}}]);break;}break;case'rm':switch(_0x21ab6f){case _0xb6fa8a(0x1df):_0x12e473=await product[_0xb6fa8a(0x1e0)]([{'$match':{'product_category':_0xb6fa8a(0x195)}},{'$group':{'_id':_0xb6fa8a(0x1f4)}},{'$project':{'brand':_0xb6fa8a(0x1a9)}}]);break;case _0xb6fa8a(0x178):_0x12e473=await product[_0xb6fa8a(0x1e0)]([{'$match':{'product_category':_0xb6fa8a(0x195)}},{'$group':{'_id':_0xb6fa8a(0x20d)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x5399d2[_0xb6fa8a(0x1e2)](_0x12e473);}catch(_0x3a72e5){_0x5399d2[_0xb6fa8a(0x1e2)]({'message':_0x3a72e5[_0xb6fa8a(0x1ca)]});}}),router[a0_0x56c35c(0x16d)](a0_0x56c35c(0x1cd),auth,async(_0x14ebf3,_0x4fe035)=>{const _0xa1f543=a0_0x56c35c;try{console[_0xa1f543(0x213)](_0x14ebf3[_0xa1f543(0x192)]);const {prod_cat:_0x597e84,identity:_0x1f666b,valueData:_0xf984a,typeofbarcode:_0x3fe24b}=_0x14ebf3[_0xa1f543(0x192)];let _0x55c996;switch(_0x597e84){case'fg':if(_0x1f666b==_0xa1f543(0x1df))_0x55c996=await product['aggregate']([{'$match':{'product_category':_0xa1f543(0x172),'brand':_0xf984a}}]);else _0x1f666b==_0xa1f543(0x178)&&(_0x55c996=await product[_0xa1f543(0x1e0)]([{'$match':{'product_category':_0xa1f543(0x172),'category':_0xf984a}}]));break;case'rm':if(_0x1f666b==_0xa1f543(0x1df))_0x55c996=await product[_0xa1f543(0x1e0)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0xf984a}}]);else _0x1f666b==_0xa1f543(0x178)&&(_0x55c996=await product['aggregate']([{'$match':{'product_category':_0xa1f543(0x195),'category':_0xf984a}}]));break;}const _0x2ceaab=_0xf310fc=>_0xf310fc*0x48,_0x2ce7d7={'width':0x3,'height':0x1},_0x114c73=new PDFDocument({'margin':_0x2ceaab(0.75),'size':[_0x2ceaab(_0x2ce7d7[_0xa1f543(0x197)]),_0x2ceaab(_0x2ce7d7[_0xa1f543(0x1c1)])],'bufferPages':!![]}),_0x8ea50b=_0x55c996[_0xa1f543(0x218)];for(let _0x594d78=0x0;_0x594d78<=_0x8ea50b;_0x594d78++){if(_0x594d78!=_0x8ea50b){const _0x15e431=_0x55c996[_0x594d78][_0xa1f543(0x21c)],_0x4e62cd=_0x55c996[_0x594d78]['primary_code'],_0x1e78bb=_0x55c996[_0x594d78][_0xa1f543(0x1ed)],_0x375669=_0x55c996[_0x594d78][_0xa1f543(0x1b8)];var _0x8d81ea;switch(_0x3fe24b){case'1':_0x8d81ea=_0x4e62cd;break;case'2':_0x8d81ea=_0x1e78bb;break;case'3':_0x8d81ea=_0x375669;break;}const _0xdc2434={'width':0xd2,'height':0x64},_0x92dad1={'width':_0x2ceaab(_0x2ce7d7[_0xa1f543(0x197)]),'height':_0x2ceaab(_0x2ce7d7['height'])},_0x302907=new Canvas();JsBarcode(_0x302907,_0x8d81ea,{'format':_0xa1f543(0x216),'height':_0xdc2434[_0xa1f543(0x1c1)],'displayValue':!![],'text':_0x8d81ea});const _0x5041c8=_0x302907[_0xa1f543(0x1f5)](),_0x44c546=_0x92dad1['width']/_0xdc2434[_0xa1f543(0x197)],_0xb5517d=_0x92dad1[_0xa1f543(0x1c1)]/_0xdc2434[_0xa1f543(0x1c1)],_0x1d7e8b=Math['min'](_0x44c546,_0xb5517d),_0x4910d3=_0xdc2434[_0xa1f543(0x197)]*_0x1d7e8b,_0x68b57d=_0xdc2434[_0xa1f543(0x1c1)]*_0x1d7e8b,_0x26d643=(_0x92dad1[_0xa1f543(0x197)]-_0x4910d3)/0x2,_0x3bfda7=(_0x92dad1['height']-_0x68b57d)/0x2;_0x114c73[_0xa1f543(0x1a2)](_0x5041c8,_0x26d643,_0x3bfda7,{'width':_0x4910d3,'height':_0x68b57d}),_0x594d78!=_0x8ea50b&&_0x114c73['addPage']();}}const _0xce4be7=[];_0x114c73['on']('data',_0xce4be7[_0xa1f543(0x19d)][_0xa1f543(0x16f)](_0xce4be7)),_0x114c73['on'](_0xa1f543(0x1d9),()=>{const _0x46c155=_0xa1f543,_0x5e1af9=Buffer[_0x46c155(0x18e)](_0xce4be7),_0x4af1da=_0x5e1af9[_0x46c155(0x1c6)](_0x46c155(0x1aa));_0x4fe035[_0x46c155(0x1e2)]({'pdfContent':_0x4af1da});}),_0x114c73[_0xa1f543(0x1d9)]();}catch(_0x3e51e6){_0x4fe035[_0xa1f543(0x1e2)]({'message':_0x3e51e6[_0xa1f543(0x1ca)]});}}),router[a0_0x56c35c(0x16d)](a0_0x56c35c(0x189),auth,async(_0x4946f8,_0x3299de)=>{const _0x4cc01f=a0_0x56c35c;try{console[_0x4cc01f(0x213)](_0x4946f8[_0x4cc01f(0x192)]);const {prod_cat:_0x150dc1,identity:_0x36edef,valueData:_0x6fb3ba}=_0x4946f8[_0x4cc01f(0x192)];let _0x33a37c;switch(_0x150dc1){case'fg':if(_0x36edef=='Brands')_0x33a37c=await product[_0x4cc01f(0x1e0)]([{'$match':{'product_category':_0x4cc01f(0x172),'brand':_0x6fb3ba}}]);else _0x36edef==_0x4cc01f(0x178)&&(_0x33a37c=await product['aggregate']([{'$match':{'product_category':_0x4cc01f(0x172),'category':_0x6fb3ba}}]));break;case'rm':if(_0x36edef==_0x4cc01f(0x1df))_0x33a37c=await product[_0x4cc01f(0x1e0)]([{'$match':{'product_category':_0x4cc01f(0x195),'brand':_0x6fb3ba}}]);else _0x36edef=='Category'&&(_0x33a37c=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0x6fb3ba}}]));break;}_0x3299de['json']({'data':_0x33a37c});}catch(_0x1354df){_0x3299de[_0x4cc01f(0x1e2)]({'message':_0x1354df[_0x4cc01f(0x1ca)]});}}),router['post'](a0_0x56c35c(0x21d),auth,async(_0x25ad63,_0x4dc52e)=>{const _0x40dab9=a0_0x56c35c;try{const _0x50c62d=_0x25ad63[_0x40dab9(0x1be)]['id'],{copies:_0x355bf6,typeofbarcode:_0x1251dd}=_0x25ad63[_0x40dab9(0x192)];var _0x24cb21=await product['findById'](_0x50c62d);const _0x935fdf=_0x2c62da=>_0x2c62da*0x48,_0xff5ed2={'width':0x3,'height':0x1},_0xb32acb=new PDFDocument({'margin':_0x935fdf(0.75),'size':[_0x935fdf(_0xff5ed2[_0x40dab9(0x197)]),_0x935fdf(_0xff5ed2[_0x40dab9(0x1c1)])],'bufferPages':!![]}),_0x5557f7=_0x355bf6,_0xbe240d=_0x24cb21[_0x40dab9(0x21c)],_0x5b6734=_0x24cb21[_0x40dab9(0x18c)],_0xdbb5aa=_0x24cb21[_0x40dab9(0x1ed)],_0x5b5df1=_0x24cb21[_0x40dab9(0x1b8)];let _0x13147e;switch(_0x1251dd){case'1':_0x13147e=_0x5b6734;break;case'2':_0x13147e=_0xdbb5aa;break;case'3':_0x13147e=_0x5b5df1;break;}const _0xfe27cc={'width':0xd2,'height':0x64},_0x29607a={'width':_0x935fdf(_0xff5ed2[_0x40dab9(0x197)]),'height':_0x935fdf(_0xff5ed2[_0x40dab9(0x1c1)])};for(let _0x4ff5c4=0x1;_0x4ff5c4<=_0x5557f7;_0x4ff5c4++){const _0x2807fc=new Canvas();JsBarcode(_0x2807fc,_0x13147e,{'format':'CODE128','height':_0xfe27cc[_0x40dab9(0x1c1)],'displayValue':!![],'text':_0x13147e});const _0x5b9456=_0x2807fc[_0x40dab9(0x1f5)](),_0x4e00c8=_0x29607a['width']/_0xfe27cc[_0x40dab9(0x197)],_0x9223ce=_0x29607a[_0x40dab9(0x1c1)]/_0xfe27cc[_0x40dab9(0x1c1)],_0x1b5930=Math[_0x40dab9(0x19e)](_0x4e00c8,_0x9223ce),_0x2fe633=_0xfe27cc[_0x40dab9(0x197)]*_0x1b5930,_0x2b9c43=_0xfe27cc['height']*_0x1b5930,_0x3ffb07=(_0x29607a[_0x40dab9(0x197)]-_0x2fe633)/0x2,_0x53af21=(_0x29607a[_0x40dab9(0x1c1)]-_0x2b9c43)/0x2;_0xb32acb[_0x40dab9(0x1a2)](_0x5b9456,_0x3ffb07,_0x53af21,{'width':_0x2fe633,'height':_0x2b9c43}),_0x4ff5c4!=_0x5557f7&&_0xb32acb[_0x40dab9(0x1f1)]();}const _0x4d623c=[];_0xb32acb['on'](_0x40dab9(0x206),_0x4d623c[_0x40dab9(0x19d)][_0x40dab9(0x16f)](_0x4d623c)),_0xb32acb['on'](_0x40dab9(0x1d9),()=>{const _0x3700aa=_0x40dab9,_0x446b67=Buffer['concat'](_0x4d623c),_0x303316=_0x446b67[_0x3700aa(0x1c6)](_0x3700aa(0x1aa));_0x4dc52e[_0x3700aa(0x1e2)]({'pdfContent':_0x303316});}),_0xb32acb['end']();}catch(_0x50d872){_0x4dc52e['json']({'message':_0x50d872[_0x40dab9(0x1ca)]});}}),module[a0_0x56c35c(0x1e1)]=router;