const a0_0x2da601=a0_0x2c6a;(function(_0xe34b94,_0x5567d1){const _0x28ffaf=a0_0x2c6a,_0x279071=_0xe34b94();while(!![]){try{const _0x3847fd=parseInt(_0x28ffaf(0x116))/0x1+-parseInt(_0x28ffaf(0xf9))/0x2+-parseInt(_0x28ffaf(0xd1))/0x3*(parseInt(_0x28ffaf(0x10d))/0x4)+-parseInt(_0x28ffaf(0x118))/0x5*(parseInt(_0x28ffaf(0x99))/0x6)+parseInt(_0x28ffaf(0x128))/0x7+parseInt(_0x28ffaf(0x10c))/0x8*(parseInt(_0x28ffaf(0x115))/0x9)+parseInt(_0x28ffaf(0x114))/0xa*(-parseInt(_0x28ffaf(0xaa))/0xb);if(_0x3847fd===_0x5567d1)break;else _0x279071['push'](_0x279071['shift']());}catch(_0x1cfe06){_0x279071['push'](_0x279071['shift']());}}}(a0_0x3b6e,0xaeaf8));function a0_0x2c6a(_0x3c8711,_0x1f0678){const _0x3b6ede=a0_0x3b6e();return a0_0x2c6a=function(_0x2c6a12,_0x82a465){_0x2c6a12=_0x2c6a12-0x76;let _0x7b260a=_0x3b6ede[_0x2c6a12];return _0x7b260a;},a0_0x2c6a(_0x3c8711,_0x1f0678);}const express=require(a0_0x2da601(0x104)),res=require('express/lib/response'),app=express(),router=express[a0_0x2da601(0xe6)](),multer=require('multer'),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x2da601(0x81)),auth=require(a0_0x2da601(0xe1)),users=require('../public/language/languages.json'),excelJS=require(a0_0x2da601(0xeb)),xlsx=require('xlsx'),JsBarcode=require(a0_0x2da601(0xdf)),{Canvas}=require(a0_0x2da601(0xe2)),PDFDocument=require(a0_0x2da601(0x94));router['get'](a0_0x2da601(0x9c),auth,async(_0x52b131,_0x582f8e)=>{const _0x3712fb=a0_0x2da601;try{const {username:_0x3a3f1e,email:_0x50beeb,role:_0xce8b43}=_0x52b131['user'],_0x355474=_0x52b131[_0x3712fb(0xc2)],_0x432a31=await profile[_0x3712fb(0xa0)]({'email':_0x355474['email']}),_0x190350=await master_shop[_0x3712fb(0xbe)]();console[_0x3712fb(0xcf)](_0x3712fb(0x107),_0x190350);const _0x252f29=await categories[_0x3712fb(0xbe)]();if(_0x190350[0x0][_0x3712fb(0x11c)]==_0x3712fb(0x92))var _0x480126=users[_0x3712fb(0x113)];else{if(_0x190350[0x0][_0x3712fb(0x11c)]==_0x3712fb(0xe0))var _0x480126=users[_0x3712fb(0xe0)];else{if(_0x190350[0x0]['language']=='German')var _0x480126=users[_0x3712fb(0xac)];else{if(_0x190350[0x0][_0x3712fb(0x11c)]==_0x3712fb(0x89))var _0x480126=users[_0x3712fb(0x89)];else{if(_0x190350[0x0]['language']==_0x3712fb(0xf3))var _0x480126=users[_0x3712fb(0xf3)];else{if(_0x190350[0x0][_0x3712fb(0x11c)]==_0x3712fb(0x8e))var _0x480126=users['Portuguese'];else{if(_0x190350[0x0][_0x3712fb(0x11c)]==_0x3712fb(0xd3))var _0x480126=users[_0x3712fb(0xd3)];else{if(_0x190350[0x0][_0x3712fb(0x11c)]==_0x3712fb(0xaf))var _0x480126=users[_0x3712fb(0x7c)];}}}}}}}_0x582f8e['render'](_0x3712fb(0x9f),{'success':_0x52b131[_0x3712fb(0x12f)]('success'),'errors':_0x52b131['flash'](_0x3712fb(0x10a)),'role':_0x355474,'profile':_0x432a31,'user':_0x252f29,'master_shop':_0x190350,'language':_0x480126});}catch(_0x29da49){console[_0x3712fb(0xcf)](_0x29da49);}}),router['post']('/categories',auth,async(_0x198fc0,_0x408352)=>{const _0x4ffbbf=a0_0x2da601;try{const {name:_0x75f21c,products:_0xfd11dd}=_0x198fc0[_0x4ffbbf(0xe3)],_0x23705f=new categories({'name':_0x75f21c,'products':_0xfd11dd}),_0x1d5ce9=await categories['findOne']({'name':_0x75f21c});_0x1d5ce9?_0x198fc0['flash']('errors',_0x75f21c+_0x4ffbbf(0xd8)):_0x198fc0[_0x4ffbbf(0x12f)](_0x4ffbbf(0x86),_0x75f21c+_0x4ffbbf(0x98));const _0x231506=await _0x23705f['save']();_0x408352['redirect']('/products/categories');}catch(_0x587b1f){console[_0x4ffbbf(0xcf)](_0x587b1f);}}),router['get'](a0_0x2da601(0x126),auth,async(_0x23e6cf,_0x2375d6)=>{const _0x2ab4fb=a0_0x2da601;try{const {username:_0x27fa97,email:_0x5c42d6,role:_0x3555f6}=_0x23e6cf[_0x2ab4fb(0xc2)],_0x18e8db=_0x23e6cf[_0x2ab4fb(0xc2)],_0xfd19f6=await profile[_0x2ab4fb(0xa0)]({'email':_0x18e8db[_0x2ab4fb(0xc3)]}),_0x2fc883=await master_shop['find']();console[_0x2ab4fb(0xcf)]('master',_0x2fc883);const _0x28ae19=_0x23e6cf[_0x2ab4fb(0x7b)]['id'];console[_0x2ab4fb(0xcf)](_0x28ae19);const _0x5831a3=await categories[_0x2ab4fb(0x122)](_0x28ae19);if(_0x2fc883[0x0][_0x2ab4fb(0x11c)]==_0x2ab4fb(0x92))var _0x66bfa5=users[_0x2ab4fb(0x113)];else{if(_0x2fc883[0x0][_0x2ab4fb(0x11c)]==_0x2ab4fb(0xe0))var _0x66bfa5=users[_0x2ab4fb(0xe0)];else{if(_0x2fc883[0x0][_0x2ab4fb(0x11c)]==_0x2ab4fb(0xac))var _0x66bfa5=users['German'];else{if(_0x2fc883[0x0][_0x2ab4fb(0x11c)]=='Spanish')var _0x66bfa5=users['Spanish'];else{if(_0x2fc883[0x0][_0x2ab4fb(0x11c)]==_0x2ab4fb(0xf3))var _0x66bfa5=users[_0x2ab4fb(0xf3)];else{if(_0x2fc883[0x0][_0x2ab4fb(0x11c)]==_0x2ab4fb(0x8e))var _0x66bfa5=users['Portuguese'];else{if(_0x2fc883[0x0][_0x2ab4fb(0x11c)]==_0x2ab4fb(0xd3))var _0x66bfa5=users[_0x2ab4fb(0xd3)];else{if(_0x2fc883[0x0][_0x2ab4fb(0x11c)]==_0x2ab4fb(0xaf))var _0x66bfa5=users[_0x2ab4fb(0x7c)];}}}}}}}_0x2375d6[_0x2ab4fb(0xb7)](_0x2ab4fb(0x9f),{'success':_0x23e6cf[_0x2ab4fb(0x12f)](_0x2ab4fb(0x86)),'errors':_0x23e6cf[_0x2ab4fb(0x12f)](_0x2ab4fb(0x10a)),'role':_0x18e8db,'profile':_0xfd19f6,'master_shop':_0x2fc883,'user':_0x5831a3,'language':_0x66bfa5});}catch(_0x368266){console[_0x2ab4fb(0xcf)](_0x368266);}}),router[a0_0x2da601(0xa1)](a0_0x2da601(0x126),auth,async(_0x2c0421,_0x3e8b3b)=>{const _0x5c1ec8=a0_0x2da601;try{const _0x5e844f=_0x2c0421['params']['id'],_0x37e1bf=await categories[_0x5c1ec8(0xc5)](_0x5e844f,_0x2c0421[_0x5c1ec8(0xe3)]);_0x2c0421[_0x5c1ec8(0x12f)](_0x5c1ec8(0x86),''+users[_0x5c1ec8(0x124)]),_0x3e8b3b[_0x5c1ec8(0xe4)](_0x5c1ec8(0x125));}catch(_0x72b7ea){console[_0x5c1ec8(0xcf)](_0x72b7ea);}}),router[a0_0x2da601(0xae)](a0_0x2da601(0xd7),auth,async(_0x619b1,_0x3a42ab)=>{const _0x2e5062=a0_0x2da601;try{const _0x133270=_0x619b1[_0x2e5062(0x7b)]['id'],_0x2cc596=await categories[_0x2e5062(0xf1)](_0x133270);_0x619b1[_0x2e5062(0x12f)](_0x2e5062(0x86),_0x2e5062(0x101)),_0x3a42ab['redirect']('/products/categories');}catch(_0x3e4f09){console[_0x2e5062(0xcf)](_0x3e4f09);}}),router['get']('/brands',auth,async(_0x5660f7,_0x9850e7)=>{const _0x1abfe2=a0_0x2da601;try{const {username:_0x442993,email:_0x4a2715,role:_0x5e58e9}=_0x5660f7[_0x1abfe2(0xc2)],_0x5a1b79=_0x5660f7[_0x1abfe2(0xc2)],_0x3ae945=await profile[_0x1abfe2(0xa0)]({'email':_0x5a1b79[_0x1abfe2(0xc3)]}),_0x2bc010=await master_shop[_0x1abfe2(0xbe)]();console[_0x1abfe2(0xcf)](_0x1abfe2(0x107),_0x2bc010);const _0x2844a4=await brands[_0x1abfe2(0xbe)]();if(_0x2bc010[0x0]['language']==_0x1abfe2(0x92))var _0x517af6=users['English'];else{if(_0x2bc010[0x0][_0x1abfe2(0x11c)]=='Hindi')var _0x517af6=users[_0x1abfe2(0xe0)];else{if(_0x2bc010[0x0][_0x1abfe2(0x11c)]==_0x1abfe2(0xac))var _0x517af6=users[_0x1abfe2(0xac)];else{if(_0x2bc010[0x0][_0x1abfe2(0x11c)]==_0x1abfe2(0x89))var _0x517af6=users[_0x1abfe2(0x89)];else{if(_0x2bc010[0x0]['language']==_0x1abfe2(0xf3))var _0x517af6=users[_0x1abfe2(0xf3)];else{if(_0x2bc010[0x0][_0x1abfe2(0x11c)]==_0x1abfe2(0x8e))var _0x517af6=users[_0x1abfe2(0xe7)];else{if(_0x2bc010[0x0][_0x1abfe2(0x11c)]=='Chinese')var _0x517af6=users[_0x1abfe2(0xd3)];else{if(_0x2bc010[0x0]['language']==_0x1abfe2(0xaf))var _0x517af6=users[_0x1abfe2(0x7c)];}}}}}}}_0x9850e7[_0x1abfe2(0xb7)](_0x1abfe2(0x100),{'success':_0x5660f7[_0x1abfe2(0x12f)](_0x1abfe2(0x86)),'errors':_0x5660f7['flash']('errors'),'role':_0x5a1b79,'profile':_0x3ae945,'master_shop':_0x2bc010,'user':_0x2844a4,'language':_0x517af6});}catch(_0x1963f6){console[_0x1abfe2(0xcf)](_0x1963f6);}}),router[a0_0x2da601(0xa1)]('/brands',auth,async(_0xd3f5fa,_0x5472d6)=>{const _0x3ceb3c=a0_0x2da601;try{const {name:_0x49a5f7,products:_0x52cb3b}=_0xd3f5fa[_0x3ceb3c(0xe3)],_0xbe631f=new brands({'name':_0x49a5f7,'products':_0x52cb3b}),_0x457863=await brands[_0x3ceb3c(0xa0)]({'name':_0x49a5f7});_0x457863?_0xd3f5fa[_0x3ceb3c(0x12f)](_0x3ceb3c(0x10a),_0x49a5f7+_0x3ceb3c(0xf8)):_0xd3f5fa[_0x3ceb3c(0x12f)](_0x3ceb3c(0x86),_0x49a5f7+_0x3ceb3c(0x9e));const _0x3222e2=await _0xbe631f['save']();_0x5472d6[_0x3ceb3c(0xe4)](_0x3ceb3c(0x7e));}catch(_0x16593c){console[_0x3ceb3c(0xcf)](_0x16593c);}}),router[a0_0x2da601(0xae)](a0_0x2da601(0xfc),auth,async(_0x45ac41,_0x3ed5bb)=>{const _0x454a1a=a0_0x2da601;try{const {username:_0x48c34f,email:_0x471894,role:_0x52c601}=_0x45ac41['user'],_0x1b92aa=_0x45ac41[_0x454a1a(0xc2)],_0x4b61aa=await profile['findOne']({'email':_0x1b92aa['email']}),_0x36a735=await master_shop[_0x454a1a(0xbe)]();console[_0x454a1a(0xcf)](_0x454a1a(0x107),_0x36a735);const _0x385433=_0x45ac41[_0x454a1a(0x7b)]['id'];console[_0x454a1a(0xcf)](_0x385433);const _0xeeb55a=await brands[_0x454a1a(0x122)](_0x385433);if(_0x36a735[0x0][_0x454a1a(0x11c)]==_0x454a1a(0x92))var _0xfd41e3=users[_0x454a1a(0x113)];else{if(_0x36a735[0x0][_0x454a1a(0x11c)]==_0x454a1a(0xe0))var _0xfd41e3=users['Hindi'];else{if(_0x36a735[0x0]['language']==_0x454a1a(0xac))var _0xfd41e3=users['German'];else{if(_0x36a735[0x0]['language']==_0x454a1a(0x89))var _0xfd41e3=users[_0x454a1a(0x89)];else{if(_0x36a735[0x0][_0x454a1a(0x11c)]==_0x454a1a(0xf3))var _0xfd41e3=users[_0x454a1a(0xf3)];else{if(_0x36a735[0x0][_0x454a1a(0x11c)]==_0x454a1a(0x8e))var _0xfd41e3=users[_0x454a1a(0xe7)];else{if(_0x36a735[0x0][_0x454a1a(0x11c)]==_0x454a1a(0xd3))var _0xfd41e3=users[_0x454a1a(0xd3)];else{if(_0x36a735[0x0]['language']==_0x454a1a(0xaf))var _0xfd41e3=users[_0x454a1a(0x7c)];}}}}}}}_0x3ed5bb['render']('brands',{'success':_0x45ac41['flash']('success'),'errors':_0x45ac41[_0x454a1a(0x12f)](_0x454a1a(0x10a)),'role':_0x1b92aa,'profile':_0x4b61aa,'master_shop':_0x36a735,'user':_0xeeb55a,'language':_0xfd41e3});}catch(_0x28c719){console[_0x454a1a(0xcf)](_0x28c719);}}),router[a0_0x2da601(0xa1)]('/brands/:id',auth,async(_0xb68cd2,_0x3ec8c0)=>{const _0x5831b9=a0_0x2da601;try{const _0x398d93=_0xb68cd2[_0x5831b9(0x7b)]['id'],_0x2d2758=await brands[_0x5831b9(0xc5)](_0x398d93,_0xb68cd2[_0x5831b9(0xe3)]);_0xb68cd2[_0x5831b9(0x12f)](_0x5831b9(0x86),_0x5831b9(0xef)),_0x3ec8c0[_0x5831b9(0xe4)](_0x5831b9(0x7e));}catch(_0x33c2ad){console[_0x5831b9(0xcf)](_0x33c2ad);}}),router[a0_0x2da601(0xae)](a0_0x2da601(0xc8),auth,async(_0x3a80dc,_0x2f0ef6)=>{const _0x5dc492=a0_0x2da601;try{const _0x11a44e=_0x3a80dc['params']['id'],_0x1aa758=await brands[_0x5dc492(0xf1)](_0x11a44e);_0x3a80dc[_0x5dc492(0x12f)](_0x5dc492(0x86),_0x5dc492(0xd5)),_0x2f0ef6[_0x5dc492(0xe4)](_0x5dc492(0x7e));}catch(_0x514cf6){console[_0x5dc492(0xcf)](_0x514cf6);}}),router[a0_0x2da601(0xae)](a0_0x2da601(0xfe),auth,async(_0x21ddbf,_0x34cca6)=>{const _0x376784=a0_0x2da601;try{const {username:_0x2d38f1,email:_0x501e10,role:_0x1109a8}=_0x21ddbf[_0x376784(0xc2)],_0x3896ed=_0x21ddbf[_0x376784(0xc2)],_0x4c5608=await profile[_0x376784(0xa0)]({'email':_0x3896ed[_0x376784(0xc3)]}),_0x1f673d=await master_shop[_0x376784(0xbe)]();console['log']('master',_0x1f673d);const _0x338c23=await units[_0x376784(0xbe)]();if(_0x1f673d[0x0][_0x376784(0x11c)]==_0x376784(0x92))var _0x2a173d=users[_0x376784(0x113)];else{if(_0x1f673d[0x0][_0x376784(0x11c)]==_0x376784(0xe0))var _0x2a173d=users[_0x376784(0xe0)];else{if(_0x1f673d[0x0][_0x376784(0x11c)]=='German')var _0x2a173d=users[_0x376784(0xac)];else{if(_0x1f673d[0x0][_0x376784(0x11c)]==_0x376784(0x89))var _0x2a173d=users[_0x376784(0x89)];else{if(_0x1f673d[0x0]['language']==_0x376784(0xf3))var _0x2a173d=users[_0x376784(0xf3)];else{if(_0x1f673d[0x0][_0x376784(0x11c)]==_0x376784(0x8e))var _0x2a173d=users[_0x376784(0xe7)];else{if(_0x1f673d[0x0]['language']==_0x376784(0xd3))var _0x2a173d=users[_0x376784(0xd3)];else{if(_0x1f673d[0x0][_0x376784(0x11c)]==_0x376784(0xaf))var _0x2a173d=users[_0x376784(0x7c)];}}}}}}}_0x34cca6[_0x376784(0xb7)]('units',{'success':_0x21ddbf[_0x376784(0x12f)]('success'),'errors':_0x21ddbf[_0x376784(0x12f)](_0x376784(0x10a)),'role':_0x3896ed,'profile':_0x4c5608,'master_shop':_0x1f673d,'user':_0x338c23,'language':_0x2a173d});}catch(_0x1e1178){console[_0x376784(0xcf)](_0x1e1178);}}),router[a0_0x2da601(0xa1)](a0_0x2da601(0xfe),auth,async(_0x4e93b0,_0x236ff5)=>{const _0x5ef2cb=a0_0x2da601;try{const {name:_0x632aa5,secondary_unit:_0x18e2a9,products:_0x52f86b}=_0x4e93b0[_0x5ef2cb(0xe3)],_0x4733b5=new units({'name':_0x632aa5,'secondary_unit':_0x18e2a9,'products':_0x52f86b}),_0x3927ca=await units['findOne']({'name':_0x632aa5});_0x3927ca?_0x4e93b0[_0x5ef2cb(0x12f)](_0x5ef2cb(0x10a),_0x632aa5+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x4e93b0[_0x5ef2cb(0x12f)](_0x5ef2cb(0x86),_0x632aa5+_0x5ef2cb(0x12d));const _0x1c5fdb=await _0x4733b5['save']();_0x236ff5[_0x5ef2cb(0xe4)]('/products/units');}catch(_0x461d77){console[_0x5ef2cb(0xcf)](_0x461d77);}}),router[a0_0x2da601(0xae)](a0_0x2da601(0xdb),auth,async(_0x261733,_0x23f4c1)=>{const _0x1f93fc=a0_0x2da601;try{const {username:_0x5f0012,email:_0x6fd933,role:_0x47f4ae}=_0x261733[_0x1f93fc(0xc2)],_0x3f847e=_0x261733[_0x1f93fc(0xc2)],_0x2fcfe4=await profile[_0x1f93fc(0xa0)]({'email':_0x3f847e['email']}),_0x27e80f=await master_shop[_0x1f93fc(0xbe)]();console['log']('master',_0x27e80f);const _0x53acf5=_0x261733[_0x1f93fc(0x7b)]['id'],_0x18eb13=await units['findById'](_0x53acf5);if(_0x27e80f[0x0][_0x1f93fc(0x11c)]==_0x1f93fc(0x92))var _0x378f6f=users[_0x1f93fc(0x113)];else{if(_0x27e80f[0x0][_0x1f93fc(0x11c)]==_0x1f93fc(0xe0))var _0x378f6f=users[_0x1f93fc(0xe0)];else{if(_0x27e80f[0x0][_0x1f93fc(0x11c)]==_0x1f93fc(0xac))var _0x378f6f=users[_0x1f93fc(0xac)];else{if(_0x27e80f[0x0][_0x1f93fc(0x11c)]=='Spanish')var _0x378f6f=users[_0x1f93fc(0x89)];else{if(_0x27e80f[0x0][_0x1f93fc(0x11c)]==_0x1f93fc(0xf3))var _0x378f6f=users[_0x1f93fc(0xf3)];else{if(_0x27e80f[0x0][_0x1f93fc(0x11c)]==_0x1f93fc(0x8e))var _0x378f6f=users[_0x1f93fc(0xe7)];else{if(_0x27e80f[0x0][_0x1f93fc(0x11c)]==_0x1f93fc(0xd3))var _0x378f6f=users[_0x1f93fc(0xd3)];else{if(_0x27e80f[0x0][_0x1f93fc(0x11c)]==_0x1f93fc(0xaf))var _0x378f6f=users[_0x1f93fc(0x7c)];}}}}}}}_0x23f4c1['render'](_0x1f93fc(0x10e),{'success':_0x261733[_0x1f93fc(0x12f)](_0x1f93fc(0x86)),'errors':_0x261733[_0x1f93fc(0x12f)](_0x1f93fc(0x10a)),'role':_0x3f847e,'profile':_0x2fcfe4,'master_shop':_0x27e80f,'user':_0x18eb13,'language':_0x378f6f});}catch(_0x2162e9){console[_0x1f93fc(0xcf)](_0x2162e9);}}),router['post'](a0_0x2da601(0xdb),auth,async(_0x1a93fa,_0x383d85)=>{const _0x1d152d=a0_0x2da601;try{const _0x551ab1=_0x1a93fa[_0x1d152d(0x7b)]['id'],_0x18df1=await units['findByIdAndUpdate'](_0x551ab1,_0x1a93fa[_0x1d152d(0xe3)]);_0x1a93fa[_0x1d152d(0x12f)](_0x1d152d(0x86),_0x1d152d(0x7a)),_0x383d85[_0x1d152d(0xe4)](_0x1d152d(0xb0));}catch(_0xcbca76){console[_0x1d152d(0xcf)](_0xcbca76);}}),router[a0_0x2da601(0xae)](a0_0x2da601(0xa2),auth,async(_0x479145,_0x2f262e)=>{const _0x3c0c5d=a0_0x2da601;try{const _0x2e6bb0=_0x479145[_0x3c0c5d(0x7b)]['id'],_0x5338d4=await units[_0x3c0c5d(0xf1)](_0x2e6bb0);_0x479145['flash'](_0x3c0c5d(0x86),_0x3c0c5d(0x78)),_0x2f262e[_0x3c0c5d(0xe4)](_0x3c0c5d(0xb0));}catch(_0xa7976){console[_0x3c0c5d(0xcf)](_0xa7976);}});function a0_0x3b6e(){const _0x18d0e0=['\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','attachment;\x20filename=Product_Migration_File.xlsx','$category','/units/:id','toString','Products_category','/view/:id','jsbarcode','Hindi','../middleware/auth','canvas','body','redirect','maxProdPerUnit','Router','Portuguese','add_product','ProductCode','public/upload','exceljs','categ','/filter_product','unit','brand\x20data\x20update\x20successfully','/select_data','findByIdAndDelete','exports','French','edit\x20Product\x20master','Enabled','product_details.product_name','$secondary_unit','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','1634904NWRtUn','send','secondary_unit','/brands/:id','/products_export_migrate_file','/units','min','brands','categories\x20data\x20delete\x20successfully','PBrands','Workbook','express','originalname','maxStocks','master','width','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','errors','category','368ESZQwx','4ixYiaO','units','$brand','/view','Products\x20find_data','Content-Disposition','English','1180KhWDOE','173709YnWCHp','1020967afVPyy','Brands','215010hcuEZV','message','secondary_code','CODE128','language','toBuffer','Secondary_Code','/print_barcode_filter_search/','defaultProduct.avif','sheet_to_json','findById','save','categories_edit','/products/categories','/categories/:id','/view/add_products','5689992XBbcyV','image','json','Product_Name','height','\x20unit\x20is\x20add\x20successfully','product_barcode','flash','product\x20add\x20successfully','PCat','then','product_category','PAlQty','aggregate','push','unit\x20data\x20delete\x20successfully','end','unit\x20data\x20update\x20successfully','params','Arabic','migrate_product_fule','/products/brands','/products_import_migrate_file','now','../models/all_models','Secondary_Units','addWorksheet','\x20Edit\x20Successfully','write','success','Raw\x20Materials','Primary_Code','Spanish','/print_barcode_filter/','Sheets','Category','$product_details.product_stock','Portuguese\x20(BR)','stock','brand','concat','English\x20(US)','file','pdfkit-table','base64','status','Product_Code','\x20categories\x20is\x20add\x20successfully','6bqdNin','$product_category','Units','/categories','Finished\x20Goods','\x20brand\x20is\x20add\x20successfully','categories','findOne','post','/units/delete/:id','prod_categ','\x20<>\x20','forEach','single','numeric','max_number_per_units','diskStorage','44759gWknDz','readFile','German','Content-Type','get','Arabic\x20(ae)','/products/units','name','primary_code','product_stock','product\x20edit','$_id','addPage','render','warehouse','filename','bind','columns','PUnits','products','find','product_code','SheetNames','edit_product','user','email','alertquantity','findByIdAndUpdate','PName','Maximum_Stocks','/brands/delete/:id','$product_docs','/print_barcode_single/:id','/products/view','product\x20update\x20successfully','setHeader','barcode\x20Product\x20master','log','length','1996683NRVZZf','PSecondaryUnits','Chinese','data','brand\x20data\x20delete\x20successfully','MaxperUnits','/categories/delete/:id'];a0_0x3b6e=function(){return _0x18d0e0;};return a0_0x3b6e();}const storage=multer[a0_0x2da601(0xa9)]({'destination':(_0x4e947f,_0x4640c3,_0x3b083e)=>{const _0x144b27=a0_0x2da601;_0x3b083e(null,_0x144b27(0xea));},'filename':(_0x1e55eb,_0x551a53,_0x59d9de)=>{const _0x4c8c0d=a0_0x2da601;_0x59d9de(null,Date['now']()+_0x551a53[_0x4c8c0d(0x105)]);}}),upload=multer({'storage':storage});router[a0_0x2da601(0xae)](a0_0x2da601(0x110),auth,async(_0x26c40d,_0x5521c1)=>{const _0x17bad9=a0_0x2da601;try{const {username:_0x2bd5b4,email:_0x2c7827,role:_0x1e718a}=_0x26c40d[_0x17bad9(0xc2)],_0x169fb5=_0x26c40d[_0x17bad9(0xc2)],_0x4f574d=await profile['findOne']({'email':_0x169fb5['email']}),_0xebd316={'year':_0x17bad9(0xa7),'month':'long','day':_0x17bad9(0xa7)},_0x427f63=await master_shop[_0x17bad9(0xbe)]();console[_0x17bad9(0xcf)]('Products\x20master',_0x427f63);const _0x2cbef3=await product[_0x17bad9(0xbe)]();console[_0x17bad9(0xcf)](_0x17bad9(0x111),_0x2cbef3);const _0x1cd346=await warehouse[_0x17bad9(0x76)]([{'$unwind':'$product_details'},{'$lookup':{'from':_0x17bad9(0xbd),'localField':_0x17bad9(0xf6),'foreignField':_0x17bad9(0xb1),'as':'product_docs'}},{'$unwind':_0x17bad9(0xc9)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x17bad9(0x8d)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':'$product_stock'}}}]);console[_0x17bad9(0xcf)]('Products\x20warehouse_data',_0x1cd346),_0x1cd346[_0x17bad9(0xa5)](_0x5812b0=>{const _0x1e4098=_0x2cbef3['map'](_0x59a164=>{const _0x51a7f0=a0_0x2c6a;_0x59a164[_0x51a7f0(0xb1)]==_0x5812b0['_id']&&(_0x59a164[_0x51a7f0(0x8f)]=parseInt(_0x59a164[_0x51a7f0(0x8f)])+parseInt(_0x5812b0[_0x51a7f0(0xb3)]));});}),console['log'](_0x17bad9(0x111),_0x2cbef3);if(_0x427f63[0x0][_0x17bad9(0x11c)]==_0x17bad9(0x92))var _0x57cd0b=users[_0x17bad9(0x113)];else{if(_0x427f63[0x0][_0x17bad9(0x11c)]==_0x17bad9(0xe0))var _0x57cd0b=users[_0x17bad9(0xe0)];else{if(_0x427f63[0x0]['language']==_0x17bad9(0xac))var _0x57cd0b=users[_0x17bad9(0xac)];else{if(_0x427f63[0x0][_0x17bad9(0x11c)]==_0x17bad9(0x89))var _0x57cd0b=users[_0x17bad9(0x89)];else{if(_0x427f63[0x0][_0x17bad9(0x11c)]==_0x17bad9(0xf3))var _0x57cd0b=users[_0x17bad9(0xf3)];else{if(_0x427f63[0x0][_0x17bad9(0x11c)]==_0x17bad9(0x8e))var _0x57cd0b=users[_0x17bad9(0xe7)];else{if(_0x427f63[0x0]['language']==_0x17bad9(0xd3))var _0x57cd0b=users[_0x17bad9(0xd3)];else{if(_0x427f63[0x0][_0x17bad9(0x11c)]=='Arabic\x20(ae)')var _0x57cd0b=users[_0x17bad9(0x7c)];}}}}}}}_0x5521c1[_0x17bad9(0xb7)](_0x17bad9(0xbd),{'success':_0x26c40d[_0x17bad9(0x12f)]('success'),'errors':_0x26c40d[_0x17bad9(0x12f)](_0x17bad9(0x10a)),'alldata':_0x2cbef3,'profile':_0x4f574d,'master_shop':_0x427f63,'role':_0x169fb5,'product_stock':_0x1cd346,'language':_0x57cd0b});}catch(_0x22eb73){console[_0x17bad9(0xcf)](_0x22eb73);}}),router[a0_0x2da601(0xae)](a0_0x2da601(0x127),auth,async(_0x5c7403,_0x55d1cb)=>{const _0x1a5640=a0_0x2da601;try{const {username:_0x25d4dd,email:_0x29e591,role:_0x2dd676}=_0x5c7403[_0x1a5640(0xc2)],_0x342a8e=_0x5c7403[_0x1a5640(0xc2)],_0x549a9a=await profile[_0x1a5640(0xa0)]({'email':_0x342a8e[_0x1a5640(0xc3)]}),_0x339c0d=await master_shop['find']();console['log'](_0x1a5640(0x107),_0x339c0d);const _0x427d1d=await categories[_0x1a5640(0xbe)]({}),_0x119808=await brands[_0x1a5640(0xbe)]({}),_0x25f877=await units[_0x1a5640(0xbe)]({}),_0x1908a5=await warehouse[_0x1a5640(0xbe)]({'status':_0x1a5640(0xf5)});if(_0x339c0d[0x0][_0x1a5640(0x11c)]==_0x1a5640(0x92))var _0x353051=users[_0x1a5640(0x113)];else{if(_0x339c0d[0x0][_0x1a5640(0x11c)]==_0x1a5640(0xe0))var _0x353051=users[_0x1a5640(0xe0)];else{if(_0x339c0d[0x0]['language']==_0x1a5640(0xac))var _0x353051=users[_0x1a5640(0xac)];else{if(_0x339c0d[0x0][_0x1a5640(0x11c)]==_0x1a5640(0x89))var _0x353051=users[_0x1a5640(0x89)];else{if(_0x339c0d[0x0][_0x1a5640(0x11c)]=='French')var _0x353051=users[_0x1a5640(0xf3)];else{if(_0x339c0d[0x0]['language']==_0x1a5640(0x8e))var _0x353051=users['Portuguese'];else{if(_0x339c0d[0x0][_0x1a5640(0x11c)]=='Chinese')var _0x353051=users[_0x1a5640(0xd3)];else{if(_0x339c0d[0x0]['language']==_0x1a5640(0xaf))var _0x353051=users['Arabic'];}}}}}}}_0x55d1cb[_0x1a5640(0xb7)](_0x1a5640(0xe8),{'success':_0x5c7403['flash'](_0x1a5640(0x86)),'errors':_0x5c7403[_0x1a5640(0x12f)](_0x1a5640(0x10a)),'role':_0x342a8e,'profile':_0x549a9a,'categories':_0x427d1d,'brands':_0x119808,'master_shop':_0x339c0d,'units':_0x25f877,'language':_0x353051,'find_data':_0x1908a5});}catch(_0x3be971){console['log'](_0x3be971);}}),router[a0_0x2da601(0xa1)](a0_0x2da601(0x127),auth,upload['single']('image'),async(_0x4d445d,_0x37a739)=>{const _0x3d7f0d=a0_0x2da601;try{const {name:_0x47d1d3,category:_0x31b2e4,brand:_0x377236,unit:_0x52540e,alertquantity:_0xa27300,stock:_0x2d6acb,product_code:_0x43bff5,warehouse:_0x263d79,primary_ItemCode:_0x5688e7,second_ItemCode:_0x3e856a,second_unit:_0x1d8d91,maxPerUnit:_0x3ee144,MaxPerProduct:_0x139a9b,sales_cat:_0x6acf08,type_prod:_0x2a27a2}=_0x4d445d[_0x3d7f0d(0xe3)],_0x80f85f=_0x4d445d[_0x3d7f0d(0x93)]?.['filename']||'defaultProduct.avif',_0x48ad6e=new product({'image':_0x80f85f,'name':_0x47d1d3,'category':_0x31b2e4,'brand':_0x377236,'unit':_0x52540e,'alertquantity':_0xa27300,'stock':_0x2d6acb,'product_code':_0x43bff5,'warehouse':_0x263d79,'primary_code':_0x5688e7,'secondary_code':_0x3e856a,'second_unit':_0x1d8d91,'maxStocks':_0x139a9b,'maxProdPerUnit':_0x3ee144,'sales_category':_0x6acf08,'type_products':_0x2a27a2}),_0x47c9e6=await _0x48ad6e[_0x3d7f0d(0x123)](),_0x32b33a=await categories[_0x3d7f0d(0xa0)]({'name':_0x31b2e4});_0x32b33a[_0x3d7f0d(0xbd)]=parseInt(_0x32b33a[_0x3d7f0d(0xbd)])+0x1,await _0x32b33a[_0x3d7f0d(0x123)]();const _0x524898=await brands[_0x3d7f0d(0xa0)]({'name':_0x377236});_0x524898['products']=parseInt(_0x524898['products'])+0x1,await _0x524898['save']();const _0x40e632=await units['findOne']({'name':_0x52540e});_0x40e632[_0x3d7f0d(0xbd)]=parseInt(_0x40e632[_0x3d7f0d(0xbd)])+0x1,await _0x40e632[_0x3d7f0d(0x123)](),_0x4d445d['flash'](_0x3d7f0d(0x86),_0x3d7f0d(0x130)),_0x37a739[_0x3d7f0d(0xe4)](_0x3d7f0d(0xcb));}catch(_0xbcb321){console['log'](_0xbcb321);}}),router[a0_0x2da601(0xae)](a0_0x2da601(0xde),auth,async(_0x58e06f,_0x3fa9d8)=>{const _0x521816=a0_0x2da601;try{const {username:_0x93e875,email:_0x1ae3d6,role:_0x1d000a}=_0x58e06f[_0x521816(0xc2)],_0x49557c=_0x58e06f[_0x521816(0xc2)],_0x4b24d0=await profile[_0x521816(0xa0)]({'email':_0x49557c['email']}),_0x18b0fa=await master_shop[_0x521816(0xbe)]();console[_0x521816(0xcf)](_0x521816(0xf4),_0x18b0fa);const _0x59e04f=_0x58e06f[_0x521816(0x7b)]['id'],_0x2f4302=await product[_0x521816(0x122)](_0x59e04f),_0x20e9bf=await categories['find']({}),_0x2607e7=await brands['find']({}),_0x43564a=await units[_0x521816(0xbe)]({}),_0x500077=await warehouse[_0x521816(0xbe)]({'status':_0x521816(0xf5)}),_0x203b2d=await units[_0x521816(0x76)]([{'$group':{'_id':_0x521816(0xb5),'secondaryunit':{'$first':_0x521816(0xf7)}}}]);if(_0x18b0fa[0x0][_0x521816(0x11c)]=='English\x20(US)')var _0xde158d=users[_0x521816(0x113)];else{if(_0x18b0fa[0x0][_0x521816(0x11c)]==_0x521816(0xe0))var _0xde158d=users[_0x521816(0xe0)];else{if(_0x18b0fa[0x0]['language']==_0x521816(0xac))var _0xde158d=users[_0x521816(0xac)];else{if(_0x18b0fa[0x0][_0x521816(0x11c)]==_0x521816(0x89))var _0xde158d=users[_0x521816(0x89)];else{if(_0x18b0fa[0x0][_0x521816(0x11c)]=='French')var _0xde158d=users[_0x521816(0xf3)];else{if(_0x18b0fa[0x0]['language']==_0x521816(0x8e))var _0xde158d=users['Portuguese'];else{if(_0x18b0fa[0x0]['language']==_0x521816(0xd3))var _0xde158d=users[_0x521816(0xd3)];else{if(_0x18b0fa[0x0][_0x521816(0x11c)]==_0x521816(0xaf))var _0xde158d=users[_0x521816(0x7c)];}}}}}}}_0x3fa9d8[_0x521816(0xb7)](_0x521816(0xc1),{'success':_0x58e06f[_0x521816(0x12f)]('success'),'errors':_0x58e06f['flash']('errors'),'role':_0x49557c,'profile':_0x4b24d0,'alldata':_0x2f4302,'categories':_0x20e9bf,'brands':_0x2607e7,'master_shop':_0x18b0fa,'units':_0x43564a,'secondunit':_0x203b2d,'find_data':_0x500077,'language':_0xde158d});}catch(_0x299a53){console[_0x521816(0xcf)](_0x299a53);}}),router[a0_0x2da601(0xa1)]('/view/:id',auth,upload[a0_0x2da601(0xa6)]('image'),async(_0x44a057,_0x2f1a46)=>{const _0x543dfe=a0_0x2da601;try{const _0x49aa52=_0x44a057[_0x543dfe(0x7b)]['id'],_0x8b3025=await product[_0x543dfe(0x122)](_0x49aa52),{image:_0x1b4c3f,name:_0x5bb00a,category:_0x26112c,brand:_0x3cdb06,sku:_0x1646c9,unit:_0x1182c4,alertquantity:_0x161635,product_code:_0x186907,warehouse:_0x12c30d,primary_ItemCode:_0x22c78f,second_ItemCode:_0x148927,second_unit:_0x54c6e0,maxPerUnit:_0x231bc4,MaxPerProduct:_0x1c2d08,prod_catdata:_0x3f479d,type_prod:_0x3556a8,sales_cat:_0x40bfa4}=_0x44a057['body'];_0x44a057['file']&&(_0x8b3025['image']=_0x44a057[_0x543dfe(0x93)]['filename']);_0x8b3025[_0x543dfe(0xb1)]=_0x5bb00a,_0x8b3025[_0x543dfe(0x10b)]=_0x26112c,_0x8b3025['brand']=_0x3cdb06,_0x8b3025['sku']=_0x1646c9,_0x8b3025[_0x543dfe(0xee)]=_0x1182c4,_0x8b3025['alertquantity']=_0x161635,_0x8b3025[_0x543dfe(0xbf)]=_0x186907,_0x8b3025[_0x543dfe(0xb8)]=_0x12c30d,_0x8b3025['primary_code']=_0x22c78f,_0x8b3025[_0x543dfe(0x11a)]=_0x148927,_0x8b3025['secondary_unit']=_0x54c6e0,_0x8b3025[_0x543dfe(0x106)]=_0x1c2d08,_0x8b3025[_0x543dfe(0xe5)]=_0x231bc4,_0x8b3025[_0x543dfe(0x133)]=_0x3f479d,_0x8b3025['type_products']=_0x3556a8,_0x8b3025['sales_category']=_0x40bfa4;const _0x2ca2ad=await _0x8b3025[_0x543dfe(0x123)]();console[_0x543dfe(0xcf)](_0x543dfe(0xb4),_0x8b3025),_0x44a057[_0x543dfe(0x12f)](_0x543dfe(0x86),_0x543dfe(0xcc)),_0x2f1a46['redirect']('/products/view');}catch(_0x5cfcd2){console[_0x543dfe(0xcf)](_0x5cfcd2);}}),router[a0_0x2da601(0xae)]('/barcode/:id',auth,async(_0x5a5914,_0x4938ac)=>{const _0x5058f4=a0_0x2da601;try{const {username:_0x3ac6a2,email:_0x3ea318,role:_0x2094b5}=_0x5a5914['user'],_0x2d3b84=_0x5a5914['user'],_0x51f310=await profile[_0x5058f4(0xa0)]({'email':_0x2d3b84[_0x5058f4(0xc3)]}),_0x1b93aa=await master_shop[_0x5058f4(0xbe)]();console['log'](_0x5058f4(0xce),_0x1b93aa);const _0x51d0ba=_0x5a5914['params']['id'],_0x15402f=await product[_0x5058f4(0x122)](_0x51d0ba);console[_0x5058f4(0xcf)]('barcode\x20user_id',_0x15402f);if(_0x1b93aa[0x0][_0x5058f4(0x11c)]==_0x5058f4(0x92))var _0xaf75ea=users[_0x5058f4(0x113)];else{if(_0x1b93aa[0x0]['language']==_0x5058f4(0xe0))var _0xaf75ea=users[_0x5058f4(0xe0)];else{if(_0x1b93aa[0x0][_0x5058f4(0x11c)]==_0x5058f4(0xac))var _0xaf75ea=users['German'];else{if(_0x1b93aa[0x0][_0x5058f4(0x11c)]==_0x5058f4(0x89))var _0xaf75ea=users[_0x5058f4(0x89)];else{if(_0x1b93aa[0x0][_0x5058f4(0x11c)]=='French')var _0xaf75ea=users['French'];else{if(_0x1b93aa[0x0][_0x5058f4(0x11c)]==_0x5058f4(0x8e))var _0xaf75ea=users['Portuguese'];else{if(_0x1b93aa[0x0][_0x5058f4(0x11c)]==_0x5058f4(0xd3))var _0xaf75ea=users[_0x5058f4(0xd3)];else{if(_0x1b93aa[0x0][_0x5058f4(0x11c)]=='Arabic\x20(ae)')var _0xaf75ea=users['Arabic'];}}}}}}}_0x4938ac['render'](_0x5058f4(0x12e),{'success':_0x5a5914[_0x5058f4(0x12f)]('success'),'errors':_0x5a5914[_0x5058f4(0x12f)]('errors'),'role':_0x2d3b84,'profile':_0x51f310,'alldata':_0x15402f,'master_shop':_0x1b93aa,'language':_0xaf75ea});}catch(_0x42e439){console[_0x5058f4(0xcf)](_0x42e439);}}),router['get'](a0_0x2da601(0xfd),auth,async(_0x1626b3,_0x1f132f)=>{const _0x5609af=a0_0x2da601;try{const _0x289008=new excelJS[(_0x5609af(0x103))](),_0x3bfd2c=_0x289008[_0x5609af(0x83)]('Products');return _0x3bfd2c[_0x5609af(0xbb)]=[{'header':_0x5609af(0x12b),'key':_0x5609af(0xc6),'width':0xa},{'header':_0x5609af(0x117),'key':_0x5609af(0x102),'width':0xa},{'header':'Units','key':_0x5609af(0xbc),'width':0xa},{'header':_0x5609af(0x82),'key':_0x5609af(0xd2),'width':0xa},{'header':_0x5609af(0xa8),'key':_0x5609af(0xd6),'width':0xa},{'header':_0x5609af(0x88),'key':'ProductCode','width':0xa},{'header':_0x5609af(0x11e),'key':_0x5609af(0xe9),'width':0xa},{'header':'Product_Code','key':_0x5609af(0xe9),'width':0xa},{'header':'Category','key':_0x5609af(0x131),'width':0xa},{'header':'Alert_QTY','key':_0x5609af(0x134),'width':0xa},{'header':'Maximum_Stocks','key':'PAlQty','width':0xa},{'header':_0x5609af(0xdd),'key':'Prod_Cat','width':0xa}],_0x1f132f['setHeader'](_0x5609af(0xad),_0x5609af(0x109)),_0x1f132f[_0x5609af(0xcd)](_0x5609af(0x112),_0x5609af(0xd9)),_0x289008['xlsx'][_0x5609af(0x85)](_0x1f132f)[_0x5609af(0x132)](()=>{_0x1f132f['status'](0xc8);});}catch(_0x576e68){_0x1f132f[_0x5609af(0x96)](0x190)[_0x5609af(0xfa)](_0x576e68);}});const storage1=multer[a0_0x2da601(0xa9)]({'destination':(_0x211f13,_0x15ae90,_0x4c7df4)=>{_0x4c7df4(null,'public/Migration');},'filename':(_0x4f07a1,_0x491819,_0x6e9980)=>{const _0x1c39d7=a0_0x2da601;_0x6e9980(null,Date[_0x1c39d7(0x80)]()+_0x491819['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x2da601(0xa1)](a0_0x2da601(0x7f),auth,uploadMigrate[a0_0x2da601(0xa6)](a0_0x2da601(0x7d)),async(_0x5f1bcb,_0x474518)=>{const _0x2a5d7a=a0_0x2da601,_0xcf871=_0x5f1bcb[_0x2a5d7a(0x93)][_0x2a5d7a(0xb9)],_0x40abdd=await xlsx[_0x2a5d7a(0xab)]('public/Migration/'+_0xcf871);let _0x3f354c=_0x40abdd[_0x2a5d7a(0xc0)],_0x4f154b=xlsx['utils'][_0x2a5d7a(0x121)](_0x40abdd[_0x2a5d7a(0x8b)][_0x3f354c[0x0]]);for(const _0x13b5e2 of _0x4f154b){const _0x181757=_0x13b5e2[_0x2a5d7a(0x12b)],_0x40d437=_0x13b5e2[_0x2a5d7a(0x117)],_0x1959d6=_0x13b5e2[_0x2a5d7a(0x9b)],_0x3195e3=_0x13b5e2[_0x2a5d7a(0x82)],_0x4af563=_0x13b5e2[_0x2a5d7a(0x97)],_0x49e929=_0x13b5e2[_0x2a5d7a(0x8c)],_0x230c1c=_0x13b5e2['Alert_QTY'],_0x15be91=_0x13b5e2['Primary_Code'],_0x23610c=_0x13b5e2[_0x2a5d7a(0x11e)],_0x5c5335=_0x13b5e2[_0x2a5d7a(0xc7)],_0x27d36c=_0x13b5e2[_0x2a5d7a(0xa8)],_0xa751b0=_0x13b5e2[_0x2a5d7a(0xdd)];try{let _0xd4b912=await categories[_0x2a5d7a(0xa0)]({'name':_0x49e929});if(!_0xd4b912){const _0x51b1fe=new categories({'name':_0x49e929,'products':'0'});_0xd4b912=await _0x51b1fe[_0x2a5d7a(0x123)]();}let _0x4ccb5d=await brands['findOne']({'name':_0x40d437});if(!_0x4ccb5d){const _0x48f56b=new brands({'name':_0x40d437,'products':'0'});_0x4ccb5d=await _0x48f56b[_0x2a5d7a(0x123)]();}let _0x51949c=await units[_0x2a5d7a(0xa0)]({'name':_0x1959d6,'secondary_unit':_0x3195e3});if(!_0x51949c){const _0x34b689=new units({'name':_0x1959d6,'secondary_unit':_0x3195e3,'products':'0'});_0x51949c=await _0x34b689['save']();}const _0x1c701c=await product[_0x2a5d7a(0xbe)]({'name':_0x181757,'category':_0xd4b912[_0x2a5d7a(0xb1)],'brand':_0x4ccb5d[_0x2a5d7a(0xb1)],'secondary_unit':_0x51949c[_0x2a5d7a(0xfb)],'product_code':_0x4af563});console[_0x2a5d7a(0xcf)](_0x1c701c[_0x2a5d7a(0xd0)]+_0x2a5d7a(0xa4)+_0xd4b912[_0x2a5d7a(0xb1)]+_0x2a5d7a(0xa4)+_0x4ccb5d[_0x2a5d7a(0xb1)]+_0x2a5d7a(0xa4)+_0x51949c[_0x2a5d7a(0xfb)]+_0x2a5d7a(0xa4)+_0x4af563+_0x2a5d7a(0xa4)+_0x181757);if(_0x1c701c['length']===0x0){const _0x4dbed1=new product({'image':_0x2a5d7a(0x120),'name':_0x181757,'category':_0xd4b912[_0x2a5d7a(0xb1)],'brand':_0x4ccb5d[_0x2a5d7a(0xb1)],'unit':_0x51949c[_0x2a5d7a(0xb1)],'alertquantity':_0x230c1c,'product_code':_0x4af563,'secondary_unit':_0x51949c[_0x2a5d7a(0xfb)],'primary_code':_0x15be91,'secondary_code':_0x23610c,'maxStocks':_0x5c5335,'maxProdPerUnit':_0x27d36c,'product_category':_0xa751b0}),_0x4e2f57=await _0x4dbed1[_0x2a5d7a(0x123)]();_0xd4b912[_0x2a5d7a(0xbd)]=parseInt(_0xd4b912[_0x2a5d7a(0xbd)])+0x1,await _0xd4b912[_0x2a5d7a(0x123)](),_0x4ccb5d[_0x2a5d7a(0xbd)]=parseInt(_0x4ccb5d[_0x2a5d7a(0xbd)])+0x1,await _0x4ccb5d[_0x2a5d7a(0x123)](),_0x51949c[_0x2a5d7a(0xbd)]=parseInt(_0x51949c[_0x2a5d7a(0xbd)])+0x1,await _0x51949c[_0x2a5d7a(0x123)](),_0x5f1bcb['flash']('success',_0x181757+'\x20added\x20successfully');}else{console[_0x2a5d7a(0xcf)](_0x1c701c[0x0]);const _0x5e1923=_0x1c701c[0x0];_0x5e1923[_0x2a5d7a(0x10b)]=_0xd4b912['name'],_0x5e1923[_0x2a5d7a(0x90)]=_0x4ccb5d[_0x2a5d7a(0xb1)],_0x5e1923[_0x2a5d7a(0xee)]=_0x51949c['name'],_0x5e1923[_0x2a5d7a(0xc4)]=_0x230c1c,_0x5e1923[_0x2a5d7a(0xbf)]=_0x4af563,_0x5e1923['secondary_unit']=_0x51949c[_0x2a5d7a(0xfb)],_0x5e1923[_0x2a5d7a(0xb2)]=_0x15be91,_0x5e1923[_0x2a5d7a(0x11a)]=_0x23610c,_0x5e1923[_0x2a5d7a(0x106)]=_0x5c5335,_0x5e1923[_0x2a5d7a(0xe5)]=_0x27d36c,_0x5e1923[_0x2a5d7a(0x133)]=_0xa751b0;const _0x5d34d4=await _0x5e1923[_0x2a5d7a(0x123)]();_0x5f1bcb[_0x2a5d7a(0x12f)](_0x2a5d7a(0x86),_0x5d34d4[_0x2a5d7a(0xb1)]+_0x2a5d7a(0x84));}}catch(_0x4e0710){_0x474518[_0x2a5d7a(0x96)](0x1f4)[_0x2a5d7a(0x12a)]({'proderror':_0x4e0710[_0x2a5d7a(0x119)],'aproduct':_0x181757});}}_0x474518[_0x2a5d7a(0xe4)](_0x2a5d7a(0xcb));}),router['post'](a0_0x2da601(0xf0),auth,async(_0xc1d95d,_0x4153fd)=>{const _0x343ab5=a0_0x2da601;try{console[_0x343ab5(0xcf)](_0xc1d95d['body']);const {data_cateory:_0x138432,datachoose:_0x14202d}=_0xc1d95d[_0x343ab5(0xe3)];var _0x3f9b55;if(_0x14202d=='prod_categ')_0x3f9b55=await product[_0x343ab5(0x76)]([{'$group':{'_id':_0x343ab5(0x9a)}}]);else{if(_0x14202d=='brands')_0x3f9b55=await product['aggregate']([{'$match':{'product_category':_0x138432}},{'$group':{'_id':_0x343ab5(0x10f)}}]);else _0x14202d==_0x343ab5(0xec)&&(_0x3f9b55=await product[_0x343ab5(0x76)]([{'$match':{'product_category':_0x138432}},{'$group':{'_id':_0x343ab5(0xda)}}]));}_0x4153fd[_0x343ab5(0x12a)](_0x3f9b55);}catch(_0x280d87){_0x4153fd['json']({'message':_0x280d87['message']});}}),router[a0_0x2da601(0xa1)](a0_0x2da601(0xed),auth,async(_0x59543e,_0x294b6b)=>{const _0x38cf7d=a0_0x2da601;try{const {data_choosing:_0x2cf959,data_selected:_0x56b814}=_0x59543e[_0x38cf7d(0xe3)];var _0x3a3843;if(_0x2cf959==_0x38cf7d(0xa3))_0x3a3843=await product[_0x38cf7d(0x76)]([{'$match':{'product_category':_0x56b814}}]);else{if(_0x2cf959=='brands')_0x3a3843=await product[_0x38cf7d(0x76)]([{'$match':{'brand':_0x56b814}}]);else _0x2cf959=='categ'&&(_0x3a3843=await product[_0x38cf7d(0x76)]([{'$match':{'category':_0x56b814}}]));}_0x294b6b['json'](_0x3a3843);}catch(_0x3de169){_0x294b6b[_0x38cf7d(0x12a)]({'message':_0x3de169[_0x38cf7d(0x119)]});}}),router[a0_0x2da601(0xae)]('/print_barcode',auth,async(_0x492f6e,_0x449161)=>{const _0x117f05=a0_0x2da601,_0x33df41=_0x492f6e[_0x117f05(0xc2)],_0xd45d7b=await profile[_0x117f05(0xa0)]({'email':_0x33df41[_0x117f05(0xc3)]}),_0x23fff5=await master_shop[_0x117f05(0xbe)](),_0x204966=await product['find']();if(_0x23fff5[0x0]['language']==_0x117f05(0x92))var _0x1758a8=users[_0x117f05(0x113)];else{if(_0x23fff5[0x0][_0x117f05(0x11c)]=='Hindi')var _0x1758a8=users['Hindi'];else{if(_0x23fff5[0x0][_0x117f05(0x11c)]==_0x117f05(0xac))var _0x1758a8=users[_0x117f05(0xac)];else{if(_0x23fff5[0x0][_0x117f05(0x11c)]=='Spanish')var _0x1758a8=users[_0x117f05(0x89)];else{if(_0x23fff5[0x0][_0x117f05(0x11c)]==_0x117f05(0xf3))var _0x1758a8=users[_0x117f05(0xf3)];else{if(_0x23fff5[0x0]['language']==_0x117f05(0x8e))var _0x1758a8=users[_0x117f05(0xe7)];else{if(_0x23fff5[0x0][_0x117f05(0x11c)]==_0x117f05(0xd3))var _0x1758a8=users[_0x117f05(0xd3)];else{if(_0x23fff5[0x0][_0x117f05(0x11c)]==_0x117f05(0xaf))var _0x1758a8=users[_0x117f05(0x7c)];}}}}}}}_0x449161['render']('product_barcode_products',{'success':_0x492f6e[_0x117f05(0x12f)](_0x117f05(0x86)),'errors':_0x492f6e[_0x117f05(0x12f)](_0x117f05(0x10a)),'role':_0x33df41,'profile':_0xd45d7b,'products':_0x204966,'master_shop':_0x23fff5,'language':_0x1758a8});}),router['post']('/barcode_data',auth,async(_0x2bf161,_0x44135c)=>{const _0x419d7f=a0_0x2da601,_0x260cef=await product[_0x419d7f(0xbe)]();_0x44135c['json']({'data':_0x260cef});}),router[a0_0x2da601(0xa1)]('/barcode_filter',auth,async(_0x137bfb,_0x4ad757)=>{const _0x312cce=a0_0x2da601;try{const {dataProdCat:_0x1b1b9d,dataProdIdentity:_0x5f5045}=_0x137bfb[_0x312cce(0xe3)];var _0x3a3bf7;switch(_0x1b1b9d){case'fg':switch(_0x5f5045){case _0x312cce(0x117):_0x3a3bf7=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x312cce(0x10f)}},{'$project':{'brand':_0x312cce(0xb5)}}]);break;case _0x312cce(0x8c):_0x3a3bf7=await product[_0x312cce(0x76)]([{'$match':{'product_category':_0x312cce(0x9d)}},{'$group':{'_id':_0x312cce(0xda)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x5f5045){case _0x312cce(0x117):_0x3a3bf7=await product[_0x312cce(0x76)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x312cce(0x10f)}},{'$project':{'brand':'$_id'}}]);break;case _0x312cce(0x8c):_0x3a3bf7=await product[_0x312cce(0x76)]([{'$match':{'product_category':_0x312cce(0x87)}},{'$group':{'_id':_0x312cce(0xda)}},{'$project':{'category':_0x312cce(0xb5)}}]);break;}break;}_0x4ad757[_0x312cce(0x12a)](_0x3a3bf7);}catch(_0x47d300){_0x4ad757[_0x312cce(0x12a)]({'message':_0x47d300[_0x312cce(0x119)]});}}),router[a0_0x2da601(0xa1)](a0_0x2da601(0x8a),auth,async(_0x5f4b60,_0x564140)=>{const _0x1c5c4e=a0_0x2da601;try{console['log'](_0x5f4b60[_0x1c5c4e(0xe3)]);const {prod_cat:_0x453b52,identity:_0x183899,valueData:_0x1335f5,typeofbarcode:_0x12d9cc}=_0x5f4b60[_0x1c5c4e(0xe3)];let _0x510cc8;switch(_0x453b52){case'fg':if(_0x183899==_0x1c5c4e(0x117))_0x510cc8=await product[_0x1c5c4e(0x76)]([{'$match':{'product_category':_0x1c5c4e(0x9d),'brand':_0x1335f5}}]);else _0x183899==_0x1c5c4e(0x8c)&&(_0x510cc8=await product[_0x1c5c4e(0x76)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x1335f5}}]));break;case'rm':if(_0x183899==_0x1c5c4e(0x117))_0x510cc8=await product[_0x1c5c4e(0x76)]([{'$match':{'product_category':_0x1c5c4e(0x87),'brand':_0x1335f5}}]);else _0x183899=='Category'&&(_0x510cc8=await product[_0x1c5c4e(0x76)]([{'$match':{'product_category':_0x1c5c4e(0x87),'category':_0x1335f5}}]));break;}const _0x5de839=_0x39661a=>_0x39661a*0x48,_0x4504cd={'width':0x3,'height':0x1},_0x553392=new PDFDocument({'margin':_0x5de839(0.75),'size':[_0x5de839(_0x4504cd[_0x1c5c4e(0x108)]),_0x5de839(_0x4504cd['height'])],'bufferPages':!![]}),_0x49c852=_0x510cc8['length'];for(let _0x21348b=0x0;_0x21348b<=_0x49c852;_0x21348b++){if(_0x21348b!=_0x49c852){const _0x51990c=_0x510cc8[_0x21348b][_0x1c5c4e(0xb1)],_0x3f539c=_0x510cc8[_0x21348b]['primary_code'],_0x2862d2=_0x510cc8[_0x21348b][_0x1c5c4e(0x11a)],_0x399bc0=_0x510cc8[_0x21348b][_0x1c5c4e(0xbf)];var _0x109e65;switch(_0x12d9cc){case'1':_0x109e65=_0x3f539c;break;case'2':_0x109e65=_0x2862d2;break;case'3':_0x109e65=_0x399bc0;break;}const _0x20b2a8={'width':0xd2,'height':0x64},_0x1bf7da={'width':_0x5de839(_0x4504cd[_0x1c5c4e(0x108)]),'height':_0x5de839(_0x4504cd['height'])},_0x56ea0c=new Canvas();JsBarcode(_0x56ea0c,_0x109e65,{'format':_0x1c5c4e(0x11b),'height':_0x20b2a8[_0x1c5c4e(0x12c)],'displayValue':!![],'text':_0x109e65});const _0x25bc4c=_0x56ea0c[_0x1c5c4e(0x11d)](),_0x3cac36=_0x1bf7da[_0x1c5c4e(0x108)]/_0x20b2a8[_0x1c5c4e(0x108)],_0x417b16=_0x1bf7da[_0x1c5c4e(0x12c)]/_0x20b2a8[_0x1c5c4e(0x12c)],_0x24b3eb=Math[_0x1c5c4e(0xff)](_0x3cac36,_0x417b16),_0x2838b4=_0x20b2a8['width']*_0x24b3eb,_0x52ede7=_0x20b2a8[_0x1c5c4e(0x12c)]*_0x24b3eb,_0x46db4b=(_0x1bf7da[_0x1c5c4e(0x108)]-_0x2838b4)/0x2,_0x4f7fc2=(_0x1bf7da[_0x1c5c4e(0x12c)]-_0x52ede7)/0x2;_0x553392['image'](_0x25bc4c,_0x46db4b,_0x4f7fc2,{'width':_0x2838b4,'height':_0x52ede7}),_0x21348b!=_0x49c852&&_0x553392[_0x1c5c4e(0xb6)]();}}const _0x2fd18d=[];_0x553392['on'](_0x1c5c4e(0xd4),_0x2fd18d[_0x1c5c4e(0x77)][_0x1c5c4e(0xba)](_0x2fd18d)),_0x553392['on'](_0x1c5c4e(0x79),()=>{const _0x186c8b=_0x1c5c4e,_0x175e5a=Buffer['concat'](_0x2fd18d),_0x2a31b0=_0x175e5a[_0x186c8b(0xdc)](_0x186c8b(0x95));_0x564140[_0x186c8b(0x12a)]({'pdfContent':_0x2a31b0});}),_0x553392[_0x1c5c4e(0x79)]();}catch(_0x481394){_0x564140['json']({'message':_0x481394['message']});}}),router['post'](a0_0x2da601(0x11f),auth,async(_0x3f1fe1,_0x5ab181)=>{const _0x4926bf=a0_0x2da601;try{console[_0x4926bf(0xcf)](_0x3f1fe1['body']);const {prod_cat:_0x5dae68,identity:_0x40ff04,valueData:_0x163986}=_0x3f1fe1[_0x4926bf(0xe3)];let _0x1a78d3;switch(_0x5dae68){case'fg':if(_0x40ff04==_0x4926bf(0x117))_0x1a78d3=await product[_0x4926bf(0x76)]([{'$match':{'product_category':_0x4926bf(0x9d),'brand':_0x163986}}]);else _0x40ff04==_0x4926bf(0x8c)&&(_0x1a78d3=await product[_0x4926bf(0x76)]([{'$match':{'product_category':_0x4926bf(0x9d),'category':_0x163986}}]));break;case'rm':if(_0x40ff04=='Brands')_0x1a78d3=await product[_0x4926bf(0x76)]([{'$match':{'product_category':_0x4926bf(0x87),'brand':_0x163986}}]);else _0x40ff04==_0x4926bf(0x8c)&&(_0x1a78d3=await product[_0x4926bf(0x76)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x163986}}]));break;}_0x5ab181[_0x4926bf(0x12a)]({'data':_0x1a78d3});}catch(_0x47ff25){_0x5ab181[_0x4926bf(0x12a)]({'message':_0x47ff25['message']});}}),router[a0_0x2da601(0xa1)](a0_0x2da601(0xca),auth,async(_0x197368,_0x47509e)=>{const _0x214c72=a0_0x2da601;try{const _0x48c564=_0x197368[_0x214c72(0x7b)]['id'],{copies:_0x1d1254,typeofbarcode:_0x1a8ee0}=_0x197368[_0x214c72(0xe3)];var _0x52699e=await product[_0x214c72(0x122)](_0x48c564);const _0x392a3d=_0x4b9e35=>_0x4b9e35*0x48,_0x2c782c={'width':0x3,'height':0x1},_0x17e7e6=new PDFDocument({'margin':_0x392a3d(0.75),'size':[_0x392a3d(_0x2c782c['width']),_0x392a3d(_0x2c782c[_0x214c72(0x12c)])],'bufferPages':!![]}),_0xecf4db=_0x1d1254,_0x1b4e38=_0x52699e[_0x214c72(0xb1)],_0x38fbcc=_0x52699e[_0x214c72(0xb2)],_0x2b9709=_0x52699e['secondary_code'],_0x523cc5=_0x52699e[_0x214c72(0xbf)];let _0x391bad;switch(_0x1a8ee0){case'1':_0x391bad=_0x38fbcc;break;case'2':_0x391bad=_0x2b9709;break;case'3':_0x391bad=_0x523cc5;break;}const _0x41a795={'width':0xd2,'height':0x64},_0x3c86d7={'width':_0x392a3d(_0x2c782c[_0x214c72(0x108)]),'height':_0x392a3d(_0x2c782c[_0x214c72(0x12c)])};for(let _0x37207b=0x1;_0x37207b<=_0xecf4db;_0x37207b++){const _0x349ffb=new Canvas();JsBarcode(_0x349ffb,_0x391bad,{'format':_0x214c72(0x11b),'height':_0x41a795[_0x214c72(0x12c)],'displayValue':!![],'text':_0x391bad});const _0x9dfcb3=_0x349ffb[_0x214c72(0x11d)](),_0x37d260=_0x3c86d7['width']/_0x41a795[_0x214c72(0x108)],_0x549160=_0x3c86d7[_0x214c72(0x12c)]/_0x41a795[_0x214c72(0x12c)],_0x39c0ad=Math[_0x214c72(0xff)](_0x37d260,_0x549160),_0x66e75e=_0x41a795[_0x214c72(0x108)]*_0x39c0ad,_0xf12b5b=_0x41a795[_0x214c72(0x12c)]*_0x39c0ad,_0x4f0276=(_0x3c86d7[_0x214c72(0x108)]-_0x66e75e)/0x2,_0x3aa3d7=(_0x3c86d7[_0x214c72(0x12c)]-_0xf12b5b)/0x2;_0x17e7e6[_0x214c72(0x129)](_0x9dfcb3,_0x4f0276,_0x3aa3d7,{'width':_0x66e75e,'height':_0xf12b5b}),_0x37207b!=_0xecf4db&&_0x17e7e6[_0x214c72(0xb6)]();}const _0x33a540=[];_0x17e7e6['on'](_0x214c72(0xd4),_0x33a540[_0x214c72(0x77)]['bind'](_0x33a540)),_0x17e7e6['on'](_0x214c72(0x79),()=>{const _0x224f7d=_0x214c72,_0x114363=Buffer[_0x224f7d(0x91)](_0x33a540),_0x396b21=_0x114363[_0x224f7d(0xdc)](_0x224f7d(0x95));_0x47509e['json']({'pdfContent':_0x396b21});}),_0x17e7e6['end']();}catch(_0x301029){_0x47509e['json']({'message':_0x301029[_0x214c72(0x119)]});}}),module[a0_0x2da601(0xf2)]=router;