const a0_0x225ca9=a0_0x5e10;(function(_0x52fe16,_0x42400a){const _0x122367=a0_0x5e10,_0x1a3299=_0x52fe16();while(!![]){try{const _0x1e86cd=parseInt(_0x122367(0x185))/0x1+-parseInt(_0x122367(0x1fe))/0x2+-parseInt(_0x122367(0x1ba))/0x3+-parseInt(_0x122367(0x1dd))/0x4*(parseInt(_0x122367(0x19e))/0x5)+parseInt(_0x122367(0x1ce))/0x6*(-parseInt(_0x122367(0x1e2))/0x7)+-parseInt(_0x122367(0x19a))/0x8*(-parseInt(_0x122367(0x1e5))/0x9)+-parseInt(_0x122367(0x1d9))/0xa*(-parseInt(_0x122367(0x167))/0xb);if(_0x1e86cd===_0x42400a)break;else _0x1a3299['push'](_0x1a3299['shift']());}catch(_0x43ebf3){_0x1a3299['push'](_0x1a3299['shift']());}}}(a0_0x3ba3,0xc76e0));const express=require(a0_0x225ca9(0x152)),res=require(a0_0x225ca9(0x1e1)),app=express(),router=express[a0_0x225ca9(0x17a)](),multer=require(a0_0x225ca9(0x20d)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x225ca9(0x174)),auth=require(a0_0x225ca9(0x1c2)),users=require(a0_0x225ca9(0x14e)),excelJS=require(a0_0x225ca9(0x1ed)),xlsx=require(a0_0x225ca9(0x17d)),JsBarcode=require(a0_0x225ca9(0x18d)),{Canvas}=require(a0_0x225ca9(0x200)),PDFDocument=require(a0_0x225ca9(0x20f));function a0_0x3ba3(){const _0x16e954=['$product_docs','German','file','PSecondaryUnits','Category','261150xPzbUU','product_docs','unit\x20data\x20update\x20successfully','success','/brands/:id','sku','maxStocks','/select_data','addWorksheet','/categories/:id','product_barcode_products','7760xiECOW','/barcode_filter','units','brand\x20data\x20delete\x20successfully','2648180ZdWMmB','length','ProductCode','toBuffer','express/lib/response','35uzkShe','product\x20edit','base64','9HBQqbA','barcode\x20user_id','name','type_products','primary_code','findById','Secondary_Code','\x20<>\x20','exceljs','/products_import_migrate_file','Brands','Product_Name','language','_id','defaultProduct.avif','Maximum_Stocks','Arabic','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','PUnits','PName','category','$product_details','unit\x20data\x20delete\x20successfully','master','Products_category','2850858WZmdor','brands','canvas','image','save','/units','Product_Code','$brand','status','product_stock','forEach','log','unit','$_id','product_details.product_name','multer','product\x20add\x20successfully','pdfkit-table','Content-Disposition','redirect','/print_barcode_filter_search/','categories_edit','MaxperUnits','sales_category','user','../public/language/languages.json','/products/categories','Alert_QTY','/view/add_products','express','$product_name','Finished\x20Goods','Prod_Cat','\x20Edit\x20Successfully','migrate_product_fule','get','\x20added\x20successfully','public/Migration/','then','readFile','$product_stock','width','/barcode_data','Raw\x20Materials','prod_categ','columns','PBrands','email','/print_barcode_single/:id','stock','39413lCquve','Portuguese\x20(BR)','Secondary_Units','originalname','find','Primary_Code','aggregate','English','product_barcode','Hindi','diskStorage','Chinese','findOne','../models/all_models','secondary_unit','Enabled','alertquantity','message','concat','Router','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','CODE128','xlsx','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','params','Portuguese','/brands/delete/:id','Arabic\x20(ae)','brand','body','306395mNamyn','categories','/print_barcode','English\x20(US)','height','long','categories\x20data\x20delete\x20successfully','Spanish','jsbarcode','/products/view','SheetNames','json','data','$product_category','attachment;\x20filename=Product_Migration_File.xlsx','products','findByIdAndUpdate','/units/:id','/brands','filename','product\x20update\x20successfully','4538312FZCgHR','$product_details.product_stock','\x20unit\x20is\x20add\x20successfully','$product_details.product_name','5AOuPlC','\x20categories\x20is\x20add\x20successfully','French','Products\x20warehouse_data','errors','flash','single','max_number_per_units','end','/categories/delete/:id','categ','/filter_product','public/upload','findByIdAndDelete','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Products','barcode\x20Product\x20master','bind','edit_product','product_code','/products/units','secondary_code','numeric','map','setHeader','maxProdPerUnit','$category','render','1596387YxPKPL','push','toString','Products\x20find_data','/categories','warehouse','addPage','post','../middleware/auth','/products/brands','/view/:id','product_category','min','Workbook','now'];a0_0x3ba3=function(){return _0x16e954;};return a0_0x3ba3();}router[a0_0x225ca9(0x158)]('/categories',auth,async(_0x56cca2,_0x6158d4)=>{const _0x32883c=a0_0x225ca9;try{const {username:_0x52a959,email:_0x74211c,role:_0x47bc84}=_0x56cca2[_0x32883c(0x216)],_0xdaed34=_0x56cca2['user'],_0x41b60f=await profile[_0x32883c(0x173)]({'email':_0xdaed34['email']}),_0xb5a1a8=await master_shop['find']();console[_0x32883c(0x209)]('master',_0xb5a1a8);const _0x25b23e=await categories[_0x32883c(0x16b)]();if(_0xb5a1a8[0x0][_0x32883c(0x1f1)]==_0x32883c(0x188))var _0x4e50ec=users[_0x32883c(0x16e)];else{if(_0xb5a1a8[0x0][_0x32883c(0x1f1)]=='Hindi')var _0x4e50ec=users['Hindi'];else{if(_0xb5a1a8[0x0][_0x32883c(0x1f1)]=='German')var _0x4e50ec=users[_0x32883c(0x1ca)];else{if(_0xb5a1a8[0x0][_0x32883c(0x1f1)]=='Spanish')var _0x4e50ec=users[_0x32883c(0x18c)];else{if(_0xb5a1a8[0x0][_0x32883c(0x1f1)]==_0x32883c(0x1a0))var _0x4e50ec=users[_0x32883c(0x1a0)];else{if(_0xb5a1a8[0x0]['language']=='Portuguese\x20(BR)')var _0x4e50ec=users[_0x32883c(0x180)];else{if(_0xb5a1a8[0x0][_0x32883c(0x1f1)]==_0x32883c(0x172))var _0x4e50ec=users[_0x32883c(0x172)];else{if(_0xb5a1a8[0x0][_0x32883c(0x1f1)]=='Arabic\x20(ae)')var _0x4e50ec=users['Arabic'];}}}}}}}_0x6158d4[_0x32883c(0x1b9)](_0x32883c(0x186),{'success':_0x56cca2[_0x32883c(0x1a3)](_0x32883c(0x1d1)),'errors':_0x56cca2[_0x32883c(0x1a3)](_0x32883c(0x1a2)),'role':_0xdaed34,'profile':_0x41b60f,'user':_0x25b23e,'master_shop':_0xb5a1a8,'language':_0x4e50ec});}catch(_0x3cabaf){console[_0x32883c(0x209)](_0x3cabaf);}}),router['post'](a0_0x225ca9(0x1be),auth,async(_0x52e2ed,_0x2ee170)=>{const _0x5f58c8=a0_0x225ca9;try{const {name:_0xb61d1e,products:_0x3dbeee}=_0x52e2ed[_0x5f58c8(0x184)],_0x575edb=new categories({'name':_0xb61d1e,'products':_0x3dbeee}),_0x403911=await categories[_0x5f58c8(0x173)]({'name':_0xb61d1e});_0x403911?_0x52e2ed['flash']('errors',_0xb61d1e+_0x5f58c8(0x17b)):_0x52e2ed[_0x5f58c8(0x1a3)](_0x5f58c8(0x1d1),_0xb61d1e+_0x5f58c8(0x19f));const _0xde029e=await _0x575edb[_0x5f58c8(0x202)]();_0x2ee170[_0x5f58c8(0x211)](_0x5f58c8(0x14f));}catch(_0xcb43ec){console[_0x5f58c8(0x209)](_0xcb43ec);}}),router[a0_0x225ca9(0x158)]('/categories/:id',auth,async(_0x1a55ef,_0x30e286)=>{const _0xdb1598=a0_0x225ca9;try{const {username:_0x17cbec,email:_0x2a41bb,role:_0x2bf1ba}=_0x1a55ef[_0xdb1598(0x216)],_0x51a343=_0x1a55ef['user'],_0xd01120=await profile['findOne']({'email':_0x51a343[_0xdb1598(0x164)]}),_0x356acf=await master_shop[_0xdb1598(0x16b)]();console['log'](_0xdb1598(0x1fc),_0x356acf);const _0x1fbb61=_0x1a55ef[_0xdb1598(0x17f)]['id'];console[_0xdb1598(0x209)](_0x1fbb61);const _0x521ede=await categories['findById'](_0x1fbb61);if(_0x356acf[0x0][_0xdb1598(0x1f1)]==_0xdb1598(0x188))var _0x3b7a6e=users[_0xdb1598(0x16e)];else{if(_0x356acf[0x0]['language']==_0xdb1598(0x170))var _0x3b7a6e=users[_0xdb1598(0x170)];else{if(_0x356acf[0x0]['language']==_0xdb1598(0x1ca))var _0x3b7a6e=users[_0xdb1598(0x1ca)];else{if(_0x356acf[0x0][_0xdb1598(0x1f1)]==_0xdb1598(0x18c))var _0x3b7a6e=users[_0xdb1598(0x18c)];else{if(_0x356acf[0x0]['language']==_0xdb1598(0x1a0))var _0x3b7a6e=users[_0xdb1598(0x1a0)];else{if(_0x356acf[0x0]['language']==_0xdb1598(0x168))var _0x3b7a6e=users[_0xdb1598(0x180)];else{if(_0x356acf[0x0][_0xdb1598(0x1f1)]==_0xdb1598(0x172))var _0x3b7a6e=users[_0xdb1598(0x172)];else{if(_0x356acf[0x0][_0xdb1598(0x1f1)]==_0xdb1598(0x182))var _0x3b7a6e=users[_0xdb1598(0x1f5)];}}}}}}}_0x30e286[_0xdb1598(0x1b9)]('categories',{'success':_0x1a55ef[_0xdb1598(0x1a3)](_0xdb1598(0x1d1)),'errors':_0x1a55ef['flash'](_0xdb1598(0x1a2)),'role':_0x51a343,'profile':_0xd01120,'master_shop':_0x356acf,'user':_0x521ede,'language':_0x3b7a6e});}catch(_0x1031f7){console[_0xdb1598(0x209)](_0x1031f7);}}),router['post'](a0_0x225ca9(0x1d7),auth,async(_0x10ec8a,_0x16153a)=>{const _0x5f244c=a0_0x225ca9;try{const _0x4020f6=_0x10ec8a['params']['id'],_0x222eb2=await categories[_0x5f244c(0x195)](_0x4020f6,_0x10ec8a[_0x5f244c(0x184)]);_0x10ec8a[_0x5f244c(0x1a3)](_0x5f244c(0x1d1),''+users[_0x5f244c(0x213)]),_0x16153a[_0x5f244c(0x211)](_0x5f244c(0x14f));}catch(_0x47a015){console[_0x5f244c(0x209)](_0x47a015);}}),router['get'](a0_0x225ca9(0x1a7),auth,async(_0x40fa62,_0x3bd5fb)=>{const _0x2a464f=a0_0x225ca9;try{const _0x1c9625=_0x40fa62[_0x2a464f(0x17f)]['id'],_0x18e892=await categories[_0x2a464f(0x1ab)](_0x1c9625);_0x40fa62['flash']('success',_0x2a464f(0x18b)),_0x3bd5fb['redirect'](_0x2a464f(0x14f));}catch(_0x509b06){console[_0x2a464f(0x209)](_0x509b06);}}),router[a0_0x225ca9(0x158)]('/brands',auth,async(_0x55bde5,_0xbf2d7c)=>{const _0x1877e6=a0_0x225ca9;try{const {username:_0x47ff7e,email:_0x4973f7,role:_0x13aad8}=_0x55bde5[_0x1877e6(0x216)],_0x37ab3d=_0x55bde5[_0x1877e6(0x216)],_0x2f638d=await profile[_0x1877e6(0x173)]({'email':_0x37ab3d['email']}),_0x24aa70=await master_shop[_0x1877e6(0x16b)]();console[_0x1877e6(0x209)](_0x1877e6(0x1fc),_0x24aa70);const _0x25e72a=await brands['find']();if(_0x24aa70[0x0][_0x1877e6(0x1f1)]=='English\x20(US)')var _0x23a262=users[_0x1877e6(0x16e)];else{if(_0x24aa70[0x0][_0x1877e6(0x1f1)]=='Hindi')var _0x23a262=users['Hindi'];else{if(_0x24aa70[0x0][_0x1877e6(0x1f1)]==_0x1877e6(0x1ca))var _0x23a262=users[_0x1877e6(0x1ca)];else{if(_0x24aa70[0x0][_0x1877e6(0x1f1)]=='Spanish')var _0x23a262=users[_0x1877e6(0x18c)];else{if(_0x24aa70[0x0][_0x1877e6(0x1f1)]=='French')var _0x23a262=users[_0x1877e6(0x1a0)];else{if(_0x24aa70[0x0][_0x1877e6(0x1f1)]==_0x1877e6(0x168))var _0x23a262=users[_0x1877e6(0x180)];else{if(_0x24aa70[0x0][_0x1877e6(0x1f1)]==_0x1877e6(0x172))var _0x23a262=users[_0x1877e6(0x172)];else{if(_0x24aa70[0x0][_0x1877e6(0x1f1)]=='Arabic\x20(ae)')var _0x23a262=users[_0x1877e6(0x1f5)];}}}}}}}_0xbf2d7c[_0x1877e6(0x1b9)]('brands',{'success':_0x55bde5[_0x1877e6(0x1a3)](_0x1877e6(0x1d1)),'errors':_0x55bde5[_0x1877e6(0x1a3)](_0x1877e6(0x1a2)),'role':_0x37ab3d,'profile':_0x2f638d,'master_shop':_0x24aa70,'user':_0x25e72a,'language':_0x23a262});}catch(_0x38fb0b){console['log'](_0x38fb0b);}}),router['post'](a0_0x225ca9(0x197),auth,async(_0x1d9f79,_0x287fc3)=>{const _0x1a7016=a0_0x225ca9;try{const {name:_0x3b2833,products:_0x197425}=_0x1d9f79[_0x1a7016(0x184)],_0x44f532=new brands({'name':_0x3b2833,'products':_0x197425}),_0x402ed1=await brands[_0x1a7016(0x173)]({'name':_0x3b2833});_0x402ed1?_0x1d9f79[_0x1a7016(0x1a3)](_0x1a7016(0x1a2),_0x3b2833+_0x1a7016(0x1f6)):_0x1d9f79[_0x1a7016(0x1a3)](_0x1a7016(0x1d1),_0x3b2833+'\x20brand\x20is\x20add\x20successfully');const _0x563965=await _0x44f532[_0x1a7016(0x202)]();_0x287fc3[_0x1a7016(0x211)](_0x1a7016(0x1c3));}catch(_0x309780){console['log'](_0x309780);}}),router[a0_0x225ca9(0x158)](a0_0x225ca9(0x1d2),auth,async(_0x434980,_0x553ac0)=>{const _0x526e88=a0_0x225ca9;try{const {username:_0xbd7ec1,email:_0x2b45c0,role:_0x6de3e9}=_0x434980[_0x526e88(0x216)],_0x4a4e6a=_0x434980[_0x526e88(0x216)],_0x2528e1=await profile[_0x526e88(0x173)]({'email':_0x4a4e6a[_0x526e88(0x164)]}),_0x24c26b=await master_shop[_0x526e88(0x16b)]();console[_0x526e88(0x209)]('master',_0x24c26b);const _0x670f52=_0x434980[_0x526e88(0x17f)]['id'];console[_0x526e88(0x209)](_0x670f52);const _0x8fe60b=await brands[_0x526e88(0x1ea)](_0x670f52);if(_0x24c26b[0x0][_0x526e88(0x1f1)]==_0x526e88(0x188))var _0x3526d1=users[_0x526e88(0x16e)];else{if(_0x24c26b[0x0][_0x526e88(0x1f1)]==_0x526e88(0x170))var _0x3526d1=users[_0x526e88(0x170)];else{if(_0x24c26b[0x0]['language']==_0x526e88(0x1ca))var _0x3526d1=users[_0x526e88(0x1ca)];else{if(_0x24c26b[0x0]['language']==_0x526e88(0x18c))var _0x3526d1=users[_0x526e88(0x18c)];else{if(_0x24c26b[0x0]['language']==_0x526e88(0x1a0))var _0x3526d1=users['French'];else{if(_0x24c26b[0x0][_0x526e88(0x1f1)]==_0x526e88(0x168))var _0x3526d1=users['Portuguese'];else{if(_0x24c26b[0x0][_0x526e88(0x1f1)]=='Chinese')var _0x3526d1=users['Chinese'];else{if(_0x24c26b[0x0][_0x526e88(0x1f1)]==_0x526e88(0x182))var _0x3526d1=users[_0x526e88(0x1f5)];}}}}}}}_0x553ac0[_0x526e88(0x1b9)](_0x526e88(0x1ff),{'success':_0x434980['flash'](_0x526e88(0x1d1)),'errors':_0x434980[_0x526e88(0x1a3)](_0x526e88(0x1a2)),'role':_0x4a4e6a,'profile':_0x2528e1,'master_shop':_0x24c26b,'user':_0x8fe60b,'language':_0x3526d1});}catch(_0x1fcedb){console[_0x526e88(0x209)](_0x1fcedb);}}),router['post']('/brands/:id',auth,async(_0x35c2a5,_0x1bf634)=>{const _0x505e77=a0_0x225ca9;try{const _0x367883=_0x35c2a5['params']['id'],_0x2f1fd7=await brands[_0x505e77(0x195)](_0x367883,_0x35c2a5['body']);_0x35c2a5[_0x505e77(0x1a3)](_0x505e77(0x1d1),'brand\x20data\x20update\x20successfully'),_0x1bf634[_0x505e77(0x211)](_0x505e77(0x1c3));}catch(_0x256315){console[_0x505e77(0x209)](_0x256315);}}),router[a0_0x225ca9(0x158)](a0_0x225ca9(0x181),auth,async(_0x41621a,_0x1f39ac)=>{const _0x5d0eec=a0_0x225ca9;try{const _0x33d647=_0x41621a[_0x5d0eec(0x17f)]['id'],_0x4a20e3=await brands['findByIdAndDelete'](_0x33d647);_0x41621a[_0x5d0eec(0x1a3)]('success',_0x5d0eec(0x1dc)),_0x1f39ac[_0x5d0eec(0x211)](_0x5d0eec(0x1c3));}catch(_0x537ae3){console[_0x5d0eec(0x209)](_0x537ae3);}}),router[a0_0x225ca9(0x158)](a0_0x225ca9(0x203),auth,async(_0xe943c4,_0x16fb14)=>{const _0x2a1296=a0_0x225ca9;try{const {username:_0x5d8f37,email:_0x2915b0,role:_0x47a7fe}=_0xe943c4[_0x2a1296(0x216)],_0x1c273a=_0xe943c4[_0x2a1296(0x216)],_0x144db7=await profile[_0x2a1296(0x173)]({'email':_0x1c273a[_0x2a1296(0x164)]}),_0x246cce=await master_shop[_0x2a1296(0x16b)]();console['log'](_0x2a1296(0x1fc),_0x246cce);const _0x4bd266=await units[_0x2a1296(0x16b)]();if(_0x246cce[0x0]['language']==_0x2a1296(0x188))var _0x30fb7f=users[_0x2a1296(0x16e)];else{if(_0x246cce[0x0]['language']==_0x2a1296(0x170))var _0x30fb7f=users[_0x2a1296(0x170)];else{if(_0x246cce[0x0][_0x2a1296(0x1f1)]=='German')var _0x30fb7f=users[_0x2a1296(0x1ca)];else{if(_0x246cce[0x0]['language']=='Spanish')var _0x30fb7f=users[_0x2a1296(0x18c)];else{if(_0x246cce[0x0][_0x2a1296(0x1f1)]=='French')var _0x30fb7f=users[_0x2a1296(0x1a0)];else{if(_0x246cce[0x0][_0x2a1296(0x1f1)]=='Portuguese\x20(BR)')var _0x30fb7f=users['Portuguese'];else{if(_0x246cce[0x0][_0x2a1296(0x1f1)]==_0x2a1296(0x172))var _0x30fb7f=users[_0x2a1296(0x172)];else{if(_0x246cce[0x0][_0x2a1296(0x1f1)]=='Arabic\x20(ae)')var _0x30fb7f=users[_0x2a1296(0x1f5)];}}}}}}}_0x16fb14['render'](_0x2a1296(0x1db),{'success':_0xe943c4[_0x2a1296(0x1a3)](_0x2a1296(0x1d1)),'errors':_0xe943c4[_0x2a1296(0x1a3)](_0x2a1296(0x1a2)),'role':_0x1c273a,'profile':_0x144db7,'master_shop':_0x246cce,'user':_0x4bd266,'language':_0x30fb7f});}catch(_0x5c16ea){console[_0x2a1296(0x209)](_0x5c16ea);}}),router[a0_0x225ca9(0x1c1)](a0_0x225ca9(0x203),auth,async(_0x1f29ad,_0x50fbc4)=>{const _0x3aa024=a0_0x225ca9;try{const {name:_0xcc08e,secondary_unit:_0x58cb97,products:_0x2d1efb}=_0x1f29ad[_0x3aa024(0x184)],_0x53bdfa=new units({'name':_0xcc08e,'secondary_unit':_0x58cb97,'products':_0x2d1efb}),_0x20f65f=await units[_0x3aa024(0x173)]({'name':_0xcc08e});_0x20f65f?_0x1f29ad[_0x3aa024(0x1a3)](_0x3aa024(0x1a2),_0xcc08e+_0x3aa024(0x17e)):_0x1f29ad[_0x3aa024(0x1a3)](_0x3aa024(0x1d1),_0xcc08e+_0x3aa024(0x19c));const _0x214491=await _0x53bdfa[_0x3aa024(0x202)]();_0x50fbc4[_0x3aa024(0x211)](_0x3aa024(0x1b2));}catch(_0x22bda6){console[_0x3aa024(0x209)](_0x22bda6);}}),router['get'](a0_0x225ca9(0x196),auth,async(_0x1c1316,_0x2f3cd9)=>{const _0x207c5c=a0_0x225ca9;try{const {username:_0x28a193,email:_0xab5b4,role:_0x7f5c29}=_0x1c1316['user'],_0xa2d84b=_0x1c1316[_0x207c5c(0x216)],_0xea5df8=await profile[_0x207c5c(0x173)]({'email':_0xa2d84b[_0x207c5c(0x164)]}),_0x324ba5=await master_shop['find']();console[_0x207c5c(0x209)](_0x207c5c(0x1fc),_0x324ba5);const _0x5612ff=_0x1c1316[_0x207c5c(0x17f)]['id'],_0x28e676=await units[_0x207c5c(0x1ea)](_0x5612ff);if(_0x324ba5[0x0][_0x207c5c(0x1f1)]=='English\x20(US)')var _0x173b7f=users[_0x207c5c(0x16e)];else{if(_0x324ba5[0x0][_0x207c5c(0x1f1)]==_0x207c5c(0x170))var _0x173b7f=users[_0x207c5c(0x170)];else{if(_0x324ba5[0x0][_0x207c5c(0x1f1)]==_0x207c5c(0x1ca))var _0x173b7f=users[_0x207c5c(0x1ca)];else{if(_0x324ba5[0x0]['language']==_0x207c5c(0x18c))var _0x173b7f=users[_0x207c5c(0x18c)];else{if(_0x324ba5[0x0]['language']=='French')var _0x173b7f=users['French'];else{if(_0x324ba5[0x0]['language']==_0x207c5c(0x168))var _0x173b7f=users[_0x207c5c(0x180)];else{if(_0x324ba5[0x0][_0x207c5c(0x1f1)]==_0x207c5c(0x172))var _0x173b7f=users[_0x207c5c(0x172)];else{if(_0x324ba5[0x0][_0x207c5c(0x1f1)]==_0x207c5c(0x182))var _0x173b7f=users[_0x207c5c(0x1f5)];}}}}}}}_0x2f3cd9[_0x207c5c(0x1b9)](_0x207c5c(0x1db),{'success':_0x1c1316[_0x207c5c(0x1a3)](_0x207c5c(0x1d1)),'errors':_0x1c1316[_0x207c5c(0x1a3)](_0x207c5c(0x1a2)),'role':_0xa2d84b,'profile':_0xea5df8,'master_shop':_0x324ba5,'user':_0x28e676,'language':_0x173b7f});}catch(_0x54876e){console[_0x207c5c(0x209)](_0x54876e);}}),router[a0_0x225ca9(0x1c1)](a0_0x225ca9(0x196),auth,async(_0x3fed1c,_0x3255b3)=>{const _0x4e4ebc=a0_0x225ca9;try{const _0x1ff907=_0x3fed1c[_0x4e4ebc(0x17f)]['id'],_0x62d3fd=await units[_0x4e4ebc(0x195)](_0x1ff907,_0x3fed1c[_0x4e4ebc(0x184)]);_0x3fed1c[_0x4e4ebc(0x1a3)](_0x4e4ebc(0x1d1),_0x4e4ebc(0x1d0)),_0x3255b3[_0x4e4ebc(0x211)](_0x4e4ebc(0x1b2));}catch(_0x5097cf){console[_0x4e4ebc(0x209)](_0x5097cf);}}),router[a0_0x225ca9(0x158)]('/units/delete/:id',auth,async(_0x258e6a,_0x401e17)=>{const _0x44a915=a0_0x225ca9;try{const _0x3d53e3=_0x258e6a[_0x44a915(0x17f)]['id'],_0x3b41e6=await units[_0x44a915(0x1ab)](_0x3d53e3);_0x258e6a['flash'](_0x44a915(0x1d1),_0x44a915(0x1fb)),_0x401e17[_0x44a915(0x211)](_0x44a915(0x1b2));}catch(_0x2cf664){console['log'](_0x2cf664);}});const storage=multer['diskStorage']({'destination':(_0x15162e,_0x126072,_0x23442a)=>{const _0x5e9027=a0_0x225ca9;_0x23442a(null,_0x5e9027(0x1aa));},'filename':(_0x33bd9f,_0x46e827,_0x3cf2a2)=>{const _0x409fe2=a0_0x225ca9;_0x3cf2a2(null,Date[_0x409fe2(0x1c8)]()+_0x46e827[_0x409fe2(0x16a)]);}}),upload=multer({'storage':storage});router['get']('/view',auth,async(_0x4a2337,_0x2b1952)=>{const _0x2c06c6=a0_0x225ca9;try{const {username:_0x5d01e6,email:_0x3d9f72,role:_0x440971}=_0x4a2337[_0x2c06c6(0x216)],_0x2e6f1a=_0x4a2337[_0x2c06c6(0x216)],_0x187834=await profile[_0x2c06c6(0x173)]({'email':_0x2e6f1a[_0x2c06c6(0x164)]}),_0x3afbe9={'year':_0x2c06c6(0x1b4),'month':_0x2c06c6(0x18a),'day':_0x2c06c6(0x1b4)},_0x22eb53=await master_shop[_0x2c06c6(0x16b)]();console[_0x2c06c6(0x209)]('Products\x20master',_0x22eb53);const _0x30aea7=await product[_0x2c06c6(0x16b)]();console[_0x2c06c6(0x209)](_0x2c06c6(0x1bd),_0x30aea7);const _0x637ca2=await warehouse[_0x2c06c6(0x16d)]([{'$unwind':_0x2c06c6(0x1fa)},{'$lookup':{'from':_0x2c06c6(0x194),'localField':_0x2c06c6(0x20c),'foreignField':_0x2c06c6(0x1e7),'as':_0x2c06c6(0x1cf)}},{'$unwind':_0x2c06c6(0x1c9)},{'$project':{'product_name':_0x2c06c6(0x19d),'product_stock':_0x2c06c6(0x19b)}},{'$group':{'_id':_0x2c06c6(0x153),'product_stock':{'$sum':_0x2c06c6(0x15d)}}}]);console['log'](_0x2c06c6(0x1a1),_0x637ca2),_0x637ca2[_0x2c06c6(0x208)](_0x573dfd=>{const _0xb662ec=_0x2c06c6,_0x456d9b=_0x30aea7[_0xb662ec(0x1b5)](_0x3d337a=>{const _0x2fd2fa=_0xb662ec;_0x3d337a['name']==_0x573dfd[_0x2fd2fa(0x1f2)]&&(_0x3d337a[_0x2fd2fa(0x166)]=parseInt(_0x3d337a[_0x2fd2fa(0x166)])+parseInt(_0x573dfd[_0x2fd2fa(0x207)]));});}),console['log'](_0x2c06c6(0x1bd),_0x30aea7);if(_0x22eb53[0x0][_0x2c06c6(0x1f1)]==_0x2c06c6(0x188))var _0x2f1770=users[_0x2c06c6(0x16e)];else{if(_0x22eb53[0x0]['language']=='Hindi')var _0x2f1770=users['Hindi'];else{if(_0x22eb53[0x0]['language']=='German')var _0x2f1770=users[_0x2c06c6(0x1ca)];else{if(_0x22eb53[0x0]['language']==_0x2c06c6(0x18c))var _0x2f1770=users['Spanish'];else{if(_0x22eb53[0x0][_0x2c06c6(0x1f1)]==_0x2c06c6(0x1a0))var _0x2f1770=users['French'];else{if(_0x22eb53[0x0][_0x2c06c6(0x1f1)]==_0x2c06c6(0x168))var _0x2f1770=users['Portuguese'];else{if(_0x22eb53[0x0]['language']==_0x2c06c6(0x172))var _0x2f1770=users[_0x2c06c6(0x172)];else{if(_0x22eb53[0x0][_0x2c06c6(0x1f1)]=='Arabic\x20(ae)')var _0x2f1770=users['Arabic'];}}}}}}}_0x2b1952[_0x2c06c6(0x1b9)](_0x2c06c6(0x194),{'success':_0x4a2337[_0x2c06c6(0x1a3)]('success'),'errors':_0x4a2337['flash'](_0x2c06c6(0x1a2)),'alldata':_0x30aea7,'profile':_0x187834,'master_shop':_0x22eb53,'role':_0x2e6f1a,'product_stock':_0x637ca2,'language':_0x2f1770});}catch(_0x9367c8){console[_0x2c06c6(0x209)](_0x9367c8);}}),router['get'](a0_0x225ca9(0x151),auth,async(_0x2b1cfa,_0x379399)=>{const _0x1b3bb1=a0_0x225ca9;try{const {username:_0x498fa9,email:_0x450ed1,role:_0x1c195b}=_0x2b1cfa[_0x1b3bb1(0x216)],_0x460306=_0x2b1cfa[_0x1b3bb1(0x216)],_0x5d4bbb=await profile[_0x1b3bb1(0x173)]({'email':_0x460306['email']}),_0xcbef0b=await master_shop[_0x1b3bb1(0x16b)]();console[_0x1b3bb1(0x209)](_0x1b3bb1(0x1fc),_0xcbef0b);const _0x4207c6=await categories[_0x1b3bb1(0x16b)]({}),_0x5dba98=await brands['find']({}),_0x11b846=await units['find']({}),_0x2294de=await warehouse[_0x1b3bb1(0x16b)]({'status':'Enabled'});if(_0xcbef0b[0x0][_0x1b3bb1(0x1f1)]==_0x1b3bb1(0x188))var _0x641885=users[_0x1b3bb1(0x16e)];else{if(_0xcbef0b[0x0][_0x1b3bb1(0x1f1)]==_0x1b3bb1(0x170))var _0x641885=users[_0x1b3bb1(0x170)];else{if(_0xcbef0b[0x0][_0x1b3bb1(0x1f1)]=='German')var _0x641885=users[_0x1b3bb1(0x1ca)];else{if(_0xcbef0b[0x0][_0x1b3bb1(0x1f1)]==_0x1b3bb1(0x18c))var _0x641885=users['Spanish'];else{if(_0xcbef0b[0x0][_0x1b3bb1(0x1f1)]=='French')var _0x641885=users[_0x1b3bb1(0x1a0)];else{if(_0xcbef0b[0x0][_0x1b3bb1(0x1f1)]==_0x1b3bb1(0x168))var _0x641885=users[_0x1b3bb1(0x180)];else{if(_0xcbef0b[0x0]['language']==_0x1b3bb1(0x172))var _0x641885=users['Chinese'];else{if(_0xcbef0b[0x0]['language']=='Arabic\x20(ae)')var _0x641885=users[_0x1b3bb1(0x1f5)];}}}}}}}_0x379399[_0x1b3bb1(0x1b9)]('add_product',{'success':_0x2b1cfa['flash'](_0x1b3bb1(0x1d1)),'errors':_0x2b1cfa['flash']('errors'),'role':_0x460306,'profile':_0x5d4bbb,'categories':_0x4207c6,'brands':_0x5dba98,'master_shop':_0xcbef0b,'units':_0x11b846,'language':_0x641885,'find_data':_0x2294de});}catch(_0x1a1bfe){console['log'](_0x1a1bfe);}}),router['post'](a0_0x225ca9(0x151),auth,upload[a0_0x225ca9(0x1a4)](a0_0x225ca9(0x201)),async(_0x25e35d,_0x3d5935)=>{const _0x495405=a0_0x225ca9;try{const {name:_0x45c5c7,category:_0x168fcc,brand:_0x3f9a0a,unit:_0x44b333,alertquantity:_0x252ca9,stock:_0x5a4ec1,product_code:_0x500974,warehouse:_0x52bea,primary_ItemCode:_0x3523f9,second_ItemCode:_0x5c465e,second_unit:_0x31bcba,maxPerUnit:_0x11deb1,MaxPerProduct:_0x346d48,sales_cat:_0x17b94c,type_prod:_0x4c60ff}=_0x25e35d['body'],_0x2cf240=_0x25e35d['file']?.[_0x495405(0x198)]||'defaultProduct.avif',_0xb47222=new product({'image':_0x2cf240,'name':_0x45c5c7,'category':_0x168fcc,'brand':_0x3f9a0a,'unit':_0x44b333,'alertquantity':_0x252ca9,'stock':_0x5a4ec1,'product_code':_0x500974,'warehouse':_0x52bea,'primary_code':_0x3523f9,'secondary_code':_0x5c465e,'second_unit':_0x31bcba,'maxStocks':_0x346d48,'maxProdPerUnit':_0x11deb1,'sales_category':_0x17b94c,'type_products':_0x4c60ff}),_0x5e161e=await _0xb47222[_0x495405(0x202)](),_0x4ebe17=await categories[_0x495405(0x173)]({'name':_0x168fcc});_0x4ebe17[_0x495405(0x194)]=parseInt(_0x4ebe17[_0x495405(0x194)])+0x1,await _0x4ebe17[_0x495405(0x202)]();const _0x2fb329=await brands[_0x495405(0x173)]({'name':_0x3f9a0a});_0x2fb329[_0x495405(0x194)]=parseInt(_0x2fb329[_0x495405(0x194)])+0x1,await _0x2fb329['save']();const _0x3056b6=await units[_0x495405(0x173)]({'name':_0x44b333});_0x3056b6[_0x495405(0x194)]=parseInt(_0x3056b6[_0x495405(0x194)])+0x1,await _0x3056b6[_0x495405(0x202)](),_0x25e35d[_0x495405(0x1a3)]('success',_0x495405(0x20e)),_0x3d5935[_0x495405(0x211)](_0x495405(0x18e));}catch(_0x1703d1){console[_0x495405(0x209)](_0x1703d1);}}),router['get'](a0_0x225ca9(0x1c4),auth,async(_0xa4574c,_0x4f54b0)=>{const _0x285909=a0_0x225ca9;try{const {username:_0x371c84,email:_0x2e9e0b,role:_0x4f2544}=_0xa4574c['user'],_0x3c9fd9=_0xa4574c[_0x285909(0x216)],_0x3e022b=await profile['findOne']({'email':_0x3c9fd9[_0x285909(0x164)]}),_0x1f194c=await master_shop[_0x285909(0x16b)]();console['log']('edit\x20Product\x20master',_0x1f194c);const _0x43b27c=_0xa4574c[_0x285909(0x17f)]['id'],_0x1eb3de=await product[_0x285909(0x1ea)](_0x43b27c),_0x480f8a=await categories[_0x285909(0x16b)]({}),_0x32f6f5=await brands[_0x285909(0x16b)]({}),_0x29225c=await units[_0x285909(0x16b)]({}),_0x230311=await warehouse[_0x285909(0x16b)]({'status':_0x285909(0x176)}),_0x30ba65=await units[_0x285909(0x16d)]([{'$group':{'_id':_0x285909(0x20b),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x1f194c[0x0][_0x285909(0x1f1)]==_0x285909(0x188))var _0x45d452=users[_0x285909(0x16e)];else{if(_0x1f194c[0x0][_0x285909(0x1f1)]==_0x285909(0x170))var _0x45d452=users[_0x285909(0x170)];else{if(_0x1f194c[0x0][_0x285909(0x1f1)]=='German')var _0x45d452=users['German'];else{if(_0x1f194c[0x0][_0x285909(0x1f1)]=='Spanish')var _0x45d452=users['Spanish'];else{if(_0x1f194c[0x0][_0x285909(0x1f1)]=='French')var _0x45d452=users[_0x285909(0x1a0)];else{if(_0x1f194c[0x0]['language']==_0x285909(0x168))var _0x45d452=users['Portuguese'];else{if(_0x1f194c[0x0][_0x285909(0x1f1)]=='Chinese')var _0x45d452=users[_0x285909(0x172)];else{if(_0x1f194c[0x0][_0x285909(0x1f1)]=='Arabic\x20(ae)')var _0x45d452=users['Arabic'];}}}}}}}_0x4f54b0['render'](_0x285909(0x1b0),{'success':_0xa4574c[_0x285909(0x1a3)](_0x285909(0x1d1)),'errors':_0xa4574c[_0x285909(0x1a3)]('errors'),'role':_0x3c9fd9,'profile':_0x3e022b,'alldata':_0x1eb3de,'categories':_0x480f8a,'brands':_0x32f6f5,'master_shop':_0x1f194c,'units':_0x29225c,'secondunit':_0x30ba65,'find_data':_0x230311,'language':_0x45d452});}catch(_0x9c0a61){console[_0x285909(0x209)](_0x9c0a61);}}),router[a0_0x225ca9(0x1c1)](a0_0x225ca9(0x1c4),auth,upload[a0_0x225ca9(0x1a4)]('image'),async(_0x39465d,_0x39f4f7)=>{const _0x21c578=a0_0x225ca9;try{const _0x1b8ef0=_0x39465d['params']['id'],_0x5e322d=await product[_0x21c578(0x1ea)](_0x1b8ef0),{image:_0x517637,name:_0x5a6b1c,category:_0x3dd55d,brand:_0x3b5297,sku:_0x4d4c77,unit:_0x1ee49c,alertquantity:_0x28558a,product_code:_0x4a4571,warehouse:_0x253ad6,primary_ItemCode:_0x442e1c,second_ItemCode:_0x56a712,second_unit:_0x5c0d88,maxPerUnit:_0x1dbb0d,MaxPerProduct:_0x1bbb98,prod_catdata:_0x1c2d3e,type_prod:_0x168149,sales_cat:_0x58f7ff}=_0x39465d['body'];_0x39465d[_0x21c578(0x1cb)]&&(_0x5e322d[_0x21c578(0x201)]=_0x39465d[_0x21c578(0x1cb)][_0x21c578(0x198)]);_0x5e322d['name']=_0x5a6b1c,_0x5e322d[_0x21c578(0x1f9)]=_0x3dd55d,_0x5e322d[_0x21c578(0x183)]=_0x3b5297,_0x5e322d[_0x21c578(0x1d3)]=_0x4d4c77,_0x5e322d[_0x21c578(0x20a)]=_0x1ee49c,_0x5e322d[_0x21c578(0x177)]=_0x28558a,_0x5e322d[_0x21c578(0x1b1)]=_0x4a4571,_0x5e322d[_0x21c578(0x1bf)]=_0x253ad6,_0x5e322d[_0x21c578(0x1e9)]=_0x442e1c,_0x5e322d['secondary_code']=_0x56a712,_0x5e322d[_0x21c578(0x175)]=_0x5c0d88,_0x5e322d[_0x21c578(0x1d4)]=_0x1bbb98,_0x5e322d[_0x21c578(0x1b7)]=_0x1dbb0d,_0x5e322d[_0x21c578(0x1c5)]=_0x1c2d3e,_0x5e322d[_0x21c578(0x1e8)]=_0x168149,_0x5e322d[_0x21c578(0x215)]=_0x58f7ff;const _0x24dc57=await _0x5e322d[_0x21c578(0x202)]();console[_0x21c578(0x209)](_0x21c578(0x1e3),_0x5e322d),_0x39465d[_0x21c578(0x1a3)]('success',_0x21c578(0x199)),_0x39f4f7[_0x21c578(0x211)](_0x21c578(0x18e));}catch(_0x5bd9f2){console['log'](_0x5bd9f2);}}),router[a0_0x225ca9(0x158)]('/barcode/:id',auth,async(_0x33d8a8,_0x307f08)=>{const _0x12ee42=a0_0x225ca9;try{const {username:_0x3d50d3,email:_0x15ba50,role:_0x30dfea}=_0x33d8a8[_0x12ee42(0x216)],_0x4122f2=_0x33d8a8[_0x12ee42(0x216)],_0x9ad307=await profile[_0x12ee42(0x173)]({'email':_0x4122f2[_0x12ee42(0x164)]}),_0x22379e=await master_shop[_0x12ee42(0x16b)]();console[_0x12ee42(0x209)](_0x12ee42(0x1ae),_0x22379e);const _0x160b41=_0x33d8a8[_0x12ee42(0x17f)]['id'],_0x1a6179=await product[_0x12ee42(0x1ea)](_0x160b41);console[_0x12ee42(0x209)](_0x12ee42(0x1e6),_0x1a6179);if(_0x22379e[0x0][_0x12ee42(0x1f1)]==_0x12ee42(0x188))var _0x3fdb1b=users[_0x12ee42(0x16e)];else{if(_0x22379e[0x0][_0x12ee42(0x1f1)]==_0x12ee42(0x170))var _0x3fdb1b=users[_0x12ee42(0x170)];else{if(_0x22379e[0x0][_0x12ee42(0x1f1)]==_0x12ee42(0x1ca))var _0x3fdb1b=users[_0x12ee42(0x1ca)];else{if(_0x22379e[0x0][_0x12ee42(0x1f1)]==_0x12ee42(0x18c))var _0x3fdb1b=users[_0x12ee42(0x18c)];else{if(_0x22379e[0x0][_0x12ee42(0x1f1)]==_0x12ee42(0x1a0))var _0x3fdb1b=users['French'];else{if(_0x22379e[0x0][_0x12ee42(0x1f1)]=='Portuguese\x20(BR)')var _0x3fdb1b=users[_0x12ee42(0x180)];else{if(_0x22379e[0x0][_0x12ee42(0x1f1)]==_0x12ee42(0x172))var _0x3fdb1b=users[_0x12ee42(0x172)];else{if(_0x22379e[0x0][_0x12ee42(0x1f1)]==_0x12ee42(0x182))var _0x3fdb1b=users['Arabic'];}}}}}}}_0x307f08[_0x12ee42(0x1b9)](_0x12ee42(0x16f),{'success':_0x33d8a8[_0x12ee42(0x1a3)](_0x12ee42(0x1d1)),'errors':_0x33d8a8[_0x12ee42(0x1a3)](_0x12ee42(0x1a2)),'role':_0x4122f2,'profile':_0x9ad307,'alldata':_0x1a6179,'master_shop':_0x22379e,'language':_0x3fdb1b});}catch(_0x1749e2){console[_0x12ee42(0x209)](_0x1749e2);}}),router[a0_0x225ca9(0x158)]('/products_export_migrate_file',auth,async(_0x4d698a,_0x376a75)=>{const _0xaff297=a0_0x225ca9;try{const _0x57083c=new excelJS[(_0xaff297(0x1c7))](),_0x234b54=_0x57083c[_0xaff297(0x1d6)](_0xaff297(0x1ad));return _0x234b54[_0xaff297(0x162)]=[{'header':_0xaff297(0x1f0),'key':_0xaff297(0x1f8),'width':0xa},{'header':_0xaff297(0x1ef),'key':_0xaff297(0x163),'width':0xa},{'header':'Units','key':_0xaff297(0x1f7),'width':0xa},{'header':_0xaff297(0x169),'key':_0xaff297(0x1cc),'width':0xa},{'header':_0xaff297(0x1a5),'key':_0xaff297(0x214),'width':0xa},{'header':_0xaff297(0x16c),'key':_0xaff297(0x1df),'width':0xa},{'header':_0xaff297(0x1eb),'key':_0xaff297(0x1df),'width':0xa},{'header':'Product_Code','key':'ProductCode','width':0xa},{'header':_0xaff297(0x1cd),'key':'PCat','width':0xa},{'header':_0xaff297(0x150),'key':'PAlQty','width':0xa},{'header':_0xaff297(0x1f4),'key':'PAlQty','width':0xa},{'header':_0xaff297(0x1fd),'key':_0xaff297(0x155),'width':0xa}],_0x376a75[_0xaff297(0x1b6)]('Content-Type',_0xaff297(0x1ac)),_0x376a75[_0xaff297(0x1b6)](_0xaff297(0x210),_0xaff297(0x193)),_0x57083c[_0xaff297(0x17d)]['write'](_0x376a75)[_0xaff297(0x15b)](()=>{const _0x3f3717=_0xaff297;_0x376a75[_0x3f3717(0x206)](0xc8);});}catch(_0x5bcb98){_0x376a75[_0xaff297(0x206)](0x190)['send'](_0x5bcb98);}});function a0_0x5e10(_0x3f122a,_0x12b064){const _0x3ba319=a0_0x3ba3();return a0_0x5e10=function(_0x5e10b6,_0x1fa682){_0x5e10b6=_0x5e10b6-0x14e;let _0x477fe9=_0x3ba319[_0x5e10b6];return _0x477fe9;},a0_0x5e10(_0x3f122a,_0x12b064);}const storage1=multer[a0_0x225ca9(0x171)]({'destination':(_0x2680f2,_0x1fac61,_0x4f102a)=>{_0x4f102a(null,'public/Migration');},'filename':(_0x1c88ea,_0x3c7d93,_0x6f51c)=>{const _0x4eb918=a0_0x225ca9;_0x6f51c(null,Date[_0x4eb918(0x1c8)]()+_0x3c7d93['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x225ca9(0x1c1)](a0_0x225ca9(0x1ee),auth,uploadMigrate['single'](a0_0x225ca9(0x157)),async(_0x114860,_0x4b8f8)=>{const _0x3b8cb1=a0_0x225ca9,_0x2bdb82=_0x114860[_0x3b8cb1(0x1cb)][_0x3b8cb1(0x198)],_0x395541=await xlsx[_0x3b8cb1(0x15c)](_0x3b8cb1(0x15a)+_0x2bdb82);let _0x1eb785=_0x395541[_0x3b8cb1(0x18f)],_0x30de79=xlsx['utils']['sheet_to_json'](_0x395541['Sheets'][_0x1eb785[0x0]]);for(const _0xf7ae9a of _0x30de79){const _0x11f7cc=_0xf7ae9a['Product_Name'],_0x12c489=_0xf7ae9a[_0x3b8cb1(0x1ef)],_0x274638=_0xf7ae9a['Units'],_0x22d95e=_0xf7ae9a[_0x3b8cb1(0x169)],_0x5689af=_0xf7ae9a[_0x3b8cb1(0x204)],_0x214109=_0xf7ae9a[_0x3b8cb1(0x1cd)],_0x43a1c6=_0xf7ae9a[_0x3b8cb1(0x150)],_0xe0d1c7=_0xf7ae9a[_0x3b8cb1(0x16c)],_0x40127c=_0xf7ae9a[_0x3b8cb1(0x1eb)],_0x5bedf1=_0xf7ae9a['Maximum_Stocks'],_0x4d997e=_0xf7ae9a['max_number_per_units'],_0x1859ef=_0xf7ae9a['Products_category'];try{let _0x44a4d1=await categories[_0x3b8cb1(0x173)]({'name':_0x214109});if(!_0x44a4d1){const _0x184adb=new categories({'name':_0x214109,'products':'0'});_0x44a4d1=await _0x184adb[_0x3b8cb1(0x202)]();}let _0x3c9c2f=await brands[_0x3b8cb1(0x173)]({'name':_0x12c489});if(!_0x3c9c2f){const _0x192c20=new brands({'name':_0x12c489,'products':'0'});_0x3c9c2f=await _0x192c20[_0x3b8cb1(0x202)]();}let _0x401dca=await units[_0x3b8cb1(0x173)]({'name':_0x274638,'secondary_unit':_0x22d95e});if(!_0x401dca){const _0x4f9b71=new units({'name':_0x274638,'secondary_unit':_0x22d95e,'products':'0'});_0x401dca=await _0x4f9b71['save']();}const _0x30eebf=await product[_0x3b8cb1(0x16b)]({'name':_0x11f7cc,'category':_0x44a4d1[_0x3b8cb1(0x1e7)],'brand':_0x3c9c2f[_0x3b8cb1(0x1e7)],'secondary_unit':_0x401dca[_0x3b8cb1(0x175)],'product_code':_0x5689af});console[_0x3b8cb1(0x209)](_0x30eebf[_0x3b8cb1(0x1de)]+_0x3b8cb1(0x1ec)+_0x44a4d1['name']+_0x3b8cb1(0x1ec)+_0x3c9c2f[_0x3b8cb1(0x1e7)]+_0x3b8cb1(0x1ec)+_0x401dca[_0x3b8cb1(0x175)]+_0x3b8cb1(0x1ec)+_0x5689af+'\x20<>\x20'+_0x11f7cc);if(_0x30eebf[_0x3b8cb1(0x1de)]===0x0){const _0x11c7ca=new product({'image':_0x3b8cb1(0x1f3),'name':_0x11f7cc,'category':_0x44a4d1[_0x3b8cb1(0x1e7)],'brand':_0x3c9c2f[_0x3b8cb1(0x1e7)],'unit':_0x401dca[_0x3b8cb1(0x1e7)],'alertquantity':_0x43a1c6,'product_code':_0x5689af,'secondary_unit':_0x401dca[_0x3b8cb1(0x175)],'primary_code':_0xe0d1c7,'secondary_code':_0x40127c,'maxStocks':_0x5bedf1,'maxProdPerUnit':_0x4d997e,'product_category':_0x1859ef}),_0x4a0d48=await _0x11c7ca[_0x3b8cb1(0x202)]();_0x44a4d1[_0x3b8cb1(0x194)]=parseInt(_0x44a4d1[_0x3b8cb1(0x194)])+0x1,await _0x44a4d1['save'](),_0x3c9c2f[_0x3b8cb1(0x194)]=parseInt(_0x3c9c2f[_0x3b8cb1(0x194)])+0x1,await _0x3c9c2f['save'](),_0x401dca['products']=parseInt(_0x401dca[_0x3b8cb1(0x194)])+0x1,await _0x401dca[_0x3b8cb1(0x202)](),_0x114860[_0x3b8cb1(0x1a3)](_0x3b8cb1(0x1d1),_0x11f7cc+_0x3b8cb1(0x159));}else{console[_0x3b8cb1(0x209)](_0x30eebf[0x0]);const _0x31fea7=_0x30eebf[0x0];_0x31fea7[_0x3b8cb1(0x1f9)]=_0x44a4d1[_0x3b8cb1(0x1e7)],_0x31fea7[_0x3b8cb1(0x183)]=_0x3c9c2f[_0x3b8cb1(0x1e7)],_0x31fea7[_0x3b8cb1(0x20a)]=_0x401dca['name'],_0x31fea7[_0x3b8cb1(0x177)]=_0x43a1c6,_0x31fea7[_0x3b8cb1(0x1b1)]=_0x5689af,_0x31fea7[_0x3b8cb1(0x175)]=_0x401dca[_0x3b8cb1(0x175)],_0x31fea7['primary_code']=_0xe0d1c7,_0x31fea7[_0x3b8cb1(0x1b3)]=_0x40127c,_0x31fea7[_0x3b8cb1(0x1d4)]=_0x5bedf1,_0x31fea7['maxProdPerUnit']=_0x4d997e,_0x31fea7[_0x3b8cb1(0x1c5)]=_0x1859ef;const _0x4a88a5=await _0x31fea7['save']();_0x114860[_0x3b8cb1(0x1a3)](_0x3b8cb1(0x1d1),_0x4a88a5[_0x3b8cb1(0x1e7)]+_0x3b8cb1(0x156));}}catch(_0x4df34f){_0x4b8f8['status'](0x1f4)[_0x3b8cb1(0x190)]({'proderror':_0x4df34f[_0x3b8cb1(0x178)],'aproduct':_0x11f7cc});}}_0x4b8f8[_0x3b8cb1(0x211)]('/products/view');}),router[a0_0x225ca9(0x1c1)](a0_0x225ca9(0x1d5),auth,async(_0x5cff3e,_0x3bd7eb)=>{const _0x31c37e=a0_0x225ca9;try{console[_0x31c37e(0x209)](_0x5cff3e[_0x31c37e(0x184)]);const {data_cateory:_0x247a6a,datachoose:_0x38f6ad}=_0x5cff3e['body'];var _0x2abb2b;if(_0x38f6ad==_0x31c37e(0x161))_0x2abb2b=await product[_0x31c37e(0x16d)]([{'$group':{'_id':_0x31c37e(0x192)}}]);else{if(_0x38f6ad==_0x31c37e(0x1ff))_0x2abb2b=await product[_0x31c37e(0x16d)]([{'$match':{'product_category':_0x247a6a}},{'$group':{'_id':_0x31c37e(0x205)}}]);else _0x38f6ad==_0x31c37e(0x1a8)&&(_0x2abb2b=await product[_0x31c37e(0x16d)]([{'$match':{'product_category':_0x247a6a}},{'$group':{'_id':'$category'}}]));}_0x3bd7eb[_0x31c37e(0x190)](_0x2abb2b);}catch(_0x17e914){_0x3bd7eb[_0x31c37e(0x190)]({'message':_0x17e914['message']});}}),router['post'](a0_0x225ca9(0x1a9),auth,async(_0x12bb23,_0x31126c)=>{const _0x39dfb4=a0_0x225ca9;try{const {data_choosing:_0xb14c08,data_selected:_0x38ce91}=_0x12bb23['body'];var _0x37d0ce;if(_0xb14c08==_0x39dfb4(0x161))_0x37d0ce=await product[_0x39dfb4(0x16d)]([{'$match':{'product_category':_0x38ce91}}]);else{if(_0xb14c08==_0x39dfb4(0x1ff))_0x37d0ce=await product[_0x39dfb4(0x16d)]([{'$match':{'brand':_0x38ce91}}]);else _0xb14c08==_0x39dfb4(0x1a8)&&(_0x37d0ce=await product[_0x39dfb4(0x16d)]([{'$match':{'category':_0x38ce91}}]));}_0x31126c[_0x39dfb4(0x190)](_0x37d0ce);}catch(_0x3702a1){_0x31126c[_0x39dfb4(0x190)]({'message':_0x3702a1['message']});}}),router[a0_0x225ca9(0x158)](a0_0x225ca9(0x187),auth,async(_0x18207d,_0x1a90b4)=>{const _0x5bfeae=a0_0x225ca9,_0x2aac00=_0x18207d[_0x5bfeae(0x216)],_0x2a2c7d=await profile[_0x5bfeae(0x173)]({'email':_0x2aac00[_0x5bfeae(0x164)]}),_0x2aaa46=await master_shop[_0x5bfeae(0x16b)](),_0x527182=await product['find']();if(_0x2aaa46[0x0][_0x5bfeae(0x1f1)]==_0x5bfeae(0x188))var _0x15e734=users[_0x5bfeae(0x16e)];else{if(_0x2aaa46[0x0]['language']=='Hindi')var _0x15e734=users[_0x5bfeae(0x170)];else{if(_0x2aaa46[0x0]['language']==_0x5bfeae(0x1ca))var _0x15e734=users['German'];else{if(_0x2aaa46[0x0]['language']==_0x5bfeae(0x18c))var _0x15e734=users['Spanish'];else{if(_0x2aaa46[0x0]['language']==_0x5bfeae(0x1a0))var _0x15e734=users[_0x5bfeae(0x1a0)];else{if(_0x2aaa46[0x0][_0x5bfeae(0x1f1)]==_0x5bfeae(0x168))var _0x15e734=users[_0x5bfeae(0x180)];else{if(_0x2aaa46[0x0][_0x5bfeae(0x1f1)]==_0x5bfeae(0x172))var _0x15e734=users[_0x5bfeae(0x172)];else{if(_0x2aaa46[0x0][_0x5bfeae(0x1f1)]=='Arabic\x20(ae)')var _0x15e734=users['Arabic'];}}}}}}}_0x1a90b4[_0x5bfeae(0x1b9)](_0x5bfeae(0x1d8),{'success':_0x18207d[_0x5bfeae(0x1a3)](_0x5bfeae(0x1d1)),'errors':_0x18207d['flash'](_0x5bfeae(0x1a2)),'role':_0x2aac00,'profile':_0x2a2c7d,'products':_0x527182,'master_shop':_0x2aaa46,'language':_0x15e734});}),router[a0_0x225ca9(0x1c1)](a0_0x225ca9(0x15f),auth,async(_0xc76f36,_0x31c2a4)=>{const _0x295404=a0_0x225ca9,_0x3d8c5a=await product['find']();_0x31c2a4[_0x295404(0x190)]({'data':_0x3d8c5a});}),router[a0_0x225ca9(0x1c1)](a0_0x225ca9(0x1da),auth,async(_0x29425a,_0x380bf2)=>{const _0x235ddc=a0_0x225ca9;try{const {dataProdCat:_0x21f42c,dataProdIdentity:_0x391940}=_0x29425a[_0x235ddc(0x184)];var _0x1f6556;switch(_0x21f42c){case'fg':switch(_0x391940){case _0x235ddc(0x1ef):_0x1f6556=await product[_0x235ddc(0x16d)]([{'$match':{'product_category':_0x235ddc(0x154)}},{'$group':{'_id':_0x235ddc(0x205)}},{'$project':{'brand':_0x235ddc(0x20b)}}]);break;case _0x235ddc(0x1cd):_0x1f6556=await product['aggregate']([{'$match':{'product_category':_0x235ddc(0x154)}},{'$group':{'_id':_0x235ddc(0x1b8)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x391940){case _0x235ddc(0x1ef):_0x1f6556=await product['aggregate']([{'$match':{'product_category':_0x235ddc(0x160)}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0x235ddc(0x20b)}}]);break;case _0x235ddc(0x1cd):_0x1f6556=await product[_0x235ddc(0x16d)]([{'$match':{'product_category':_0x235ddc(0x160)}},{'$group':{'_id':_0x235ddc(0x1b8)}},{'$project':{'category':_0x235ddc(0x20b)}}]);break;}break;}_0x380bf2['json'](_0x1f6556);}catch(_0x9fd364){_0x380bf2[_0x235ddc(0x190)]({'message':_0x9fd364[_0x235ddc(0x178)]});}}),router[a0_0x225ca9(0x1c1)]('/print_barcode_filter/',auth,async(_0x1a0300,_0x15e96d)=>{const _0x34933c=a0_0x225ca9;try{console[_0x34933c(0x209)](_0x1a0300[_0x34933c(0x184)]);const {prod_cat:_0x285e11,identity:_0x3fdf51,valueData:_0x4d23cd,typeofbarcode:_0x445f90}=_0x1a0300[_0x34933c(0x184)];let _0x5df001;switch(_0x285e11){case'fg':if(_0x3fdf51==_0x34933c(0x1ef))_0x5df001=await product[_0x34933c(0x16d)]([{'$match':{'product_category':_0x34933c(0x154),'brand':_0x4d23cd}}]);else _0x3fdf51=='Category'&&(_0x5df001=await product[_0x34933c(0x16d)]([{'$match':{'product_category':_0x34933c(0x154),'category':_0x4d23cd}}]));break;case'rm':if(_0x3fdf51==_0x34933c(0x1ef))_0x5df001=await product['aggregate']([{'$match':{'product_category':_0x34933c(0x160),'brand':_0x4d23cd}}]);else _0x3fdf51==_0x34933c(0x1cd)&&(_0x5df001=await product[_0x34933c(0x16d)]([{'$match':{'product_category':_0x34933c(0x160),'category':_0x4d23cd}}]));break;}const _0x39beff=_0x58e89f=>_0x58e89f*0x48,_0x5453b8={'width':0x3,'height':0x1},_0x436f35=new PDFDocument({'margin':_0x39beff(0.75),'size':[_0x39beff(_0x5453b8[_0x34933c(0x15e)]),_0x39beff(_0x5453b8['height'])],'bufferPages':!![]}),_0x53eb82=_0x5df001[_0x34933c(0x1de)];for(let _0x2bb5ff=0x0;_0x2bb5ff<=_0x53eb82;_0x2bb5ff++){if(_0x2bb5ff!=_0x53eb82){const _0xebec6c=_0x5df001[_0x2bb5ff][_0x34933c(0x1e7)],_0x3c07f1=_0x5df001[_0x2bb5ff]['primary_code'],_0x90423a=_0x5df001[_0x2bb5ff][_0x34933c(0x1b3)],_0x2c1121=_0x5df001[_0x2bb5ff][_0x34933c(0x1b1)];var _0x4d8758;switch(_0x445f90){case'1':_0x4d8758=_0x3c07f1;break;case'2':_0x4d8758=_0x90423a;break;case'3':_0x4d8758=_0x2c1121;break;}const _0x75bd12={'width':0xd2,'height':0x64},_0x38a670={'width':_0x39beff(_0x5453b8[_0x34933c(0x15e)]),'height':_0x39beff(_0x5453b8[_0x34933c(0x189)])},_0x358403=new Canvas();JsBarcode(_0x358403,_0x4d8758,{'format':_0x34933c(0x17c),'height':_0x75bd12[_0x34933c(0x189)],'displayValue':!![],'text':_0x4d8758});const _0x3f342f=_0x358403[_0x34933c(0x1e0)](),_0x824e04=_0x38a670['width']/_0x75bd12[_0x34933c(0x15e)],_0x209271=_0x38a670['height']/_0x75bd12['height'],_0xab0f71=Math[_0x34933c(0x1c6)](_0x824e04,_0x209271),_0x5d5681=_0x75bd12[_0x34933c(0x15e)]*_0xab0f71,_0x42a14a=_0x75bd12['height']*_0xab0f71,_0x54a793=(_0x38a670[_0x34933c(0x15e)]-_0x5d5681)/0x2,_0x42acca=(_0x38a670[_0x34933c(0x189)]-_0x42a14a)/0x2;_0x436f35[_0x34933c(0x201)](_0x3f342f,_0x54a793,_0x42acca,{'width':_0x5d5681,'height':_0x42a14a}),_0x2bb5ff!=_0x53eb82&&_0x436f35[_0x34933c(0x1c0)]();}}const _0x2db550=[];_0x436f35['on']('data',_0x2db550[_0x34933c(0x1bb)]['bind'](_0x2db550)),_0x436f35['on'](_0x34933c(0x1a6),()=>{const _0x4337c7=_0x34933c,_0x4ff1cb=Buffer[_0x4337c7(0x179)](_0x2db550),_0x282622=_0x4ff1cb[_0x4337c7(0x1bc)](_0x4337c7(0x1e4));_0x15e96d['json']({'pdfContent':_0x282622});}),_0x436f35[_0x34933c(0x1a6)]();}catch(_0x2def22){_0x15e96d[_0x34933c(0x190)]({'message':_0x2def22[_0x34933c(0x178)]});}}),router[a0_0x225ca9(0x1c1)](a0_0x225ca9(0x212),auth,async(_0x5e3b86,_0x192731)=>{const _0xa0be48=a0_0x225ca9;try{console['log'](_0x5e3b86[_0xa0be48(0x184)]);const {prod_cat:_0x16cebc,identity:_0x2341b2,valueData:_0x5c3e3e}=_0x5e3b86[_0xa0be48(0x184)];let _0x2771c5;switch(_0x16cebc){case'fg':if(_0x2341b2=='Brands')_0x2771c5=await product[_0xa0be48(0x16d)]([{'$match':{'product_category':_0xa0be48(0x154),'brand':_0x5c3e3e}}]);else _0x2341b2==_0xa0be48(0x1cd)&&(_0x2771c5=await product['aggregate']([{'$match':{'product_category':_0xa0be48(0x154),'category':_0x5c3e3e}}]));break;case'rm':if(_0x2341b2==_0xa0be48(0x1ef))_0x2771c5=await product[_0xa0be48(0x16d)]([{'$match':{'product_category':_0xa0be48(0x160),'brand':_0x5c3e3e}}]);else _0x2341b2=='Category'&&(_0x2771c5=await product[_0xa0be48(0x16d)]([{'$match':{'product_category':_0xa0be48(0x160),'category':_0x5c3e3e}}]));break;}_0x192731['json']({'data':_0x2771c5});}catch(_0x160716){_0x192731[_0xa0be48(0x190)]({'message':_0x160716['message']});}}),router[a0_0x225ca9(0x1c1)](a0_0x225ca9(0x165),auth,async(_0x5dac47,_0x4cfc3c)=>{const _0x49439b=a0_0x225ca9;try{const _0x952036=_0x5dac47[_0x49439b(0x17f)]['id'],{copies:_0x2f4b65,typeofbarcode:_0x268398}=_0x5dac47['body'];var _0x1b4aa8=await product[_0x49439b(0x1ea)](_0x952036);const _0x38b8e2=_0x14f67e=>_0x14f67e*0x48,_0x12c09e={'width':0x3,'height':0x1},_0x2b8794=new PDFDocument({'margin':_0x38b8e2(0.75),'size':[_0x38b8e2(_0x12c09e[_0x49439b(0x15e)]),_0x38b8e2(_0x12c09e[_0x49439b(0x189)])],'bufferPages':!![]}),_0x5cb784=_0x2f4b65,_0x344e60=_0x1b4aa8[_0x49439b(0x1e7)],_0x275f9b=_0x1b4aa8[_0x49439b(0x1e9)],_0x2a2372=_0x1b4aa8[_0x49439b(0x1b3)],_0x32989f=_0x1b4aa8[_0x49439b(0x1b1)];let _0x42dd17;switch(_0x268398){case'1':_0x42dd17=_0x275f9b;break;case'2':_0x42dd17=_0x2a2372;break;case'3':_0x42dd17=_0x32989f;break;}const _0x48ebc5={'width':0xd2,'height':0x64},_0x510888={'width':_0x38b8e2(_0x12c09e['width']),'height':_0x38b8e2(_0x12c09e['height'])};for(let _0x5bcd45=0x1;_0x5bcd45<=_0x5cb784;_0x5bcd45++){const _0x35d7ef=new Canvas();JsBarcode(_0x35d7ef,_0x42dd17,{'format':_0x49439b(0x17c),'height':_0x48ebc5[_0x49439b(0x189)],'displayValue':!![],'text':_0x42dd17});const _0x37cda9=_0x35d7ef[_0x49439b(0x1e0)](),_0x1cee08=_0x510888[_0x49439b(0x15e)]/_0x48ebc5['width'],_0x467741=_0x510888[_0x49439b(0x189)]/_0x48ebc5[_0x49439b(0x189)],_0x184145=Math['min'](_0x1cee08,_0x467741),_0x27f13c=_0x48ebc5[_0x49439b(0x15e)]*_0x184145,_0x48e6fe=_0x48ebc5['height']*_0x184145,_0x2d9ad3=(_0x510888[_0x49439b(0x15e)]-_0x27f13c)/0x2,_0x35564b=(_0x510888[_0x49439b(0x189)]-_0x48e6fe)/0x2;_0x2b8794['image'](_0x37cda9,_0x2d9ad3,_0x35564b,{'width':_0x27f13c,'height':_0x48e6fe}),_0x5bcd45!=_0x5cb784&&_0x2b8794[_0x49439b(0x1c0)]();}const _0x3ea62c=[];_0x2b8794['on'](_0x49439b(0x191),_0x3ea62c[_0x49439b(0x1bb)][_0x49439b(0x1af)](_0x3ea62c)),_0x2b8794['on'](_0x49439b(0x1a6),()=>{const _0x3e65a4=_0x49439b,_0x2a400d=Buffer[_0x3e65a4(0x179)](_0x3ea62c),_0x5b4777=_0x2a400d[_0x3e65a4(0x1bc)](_0x3e65a4(0x1e4));_0x4cfc3c[_0x3e65a4(0x190)]({'pdfContent':_0x5b4777});}),_0x2b8794[_0x49439b(0x1a6)]();}catch(_0x26ea5b){_0x4cfc3c[_0x49439b(0x190)]({'message':_0x26ea5b[_0x49439b(0x178)]});}}),module['exports']=router;