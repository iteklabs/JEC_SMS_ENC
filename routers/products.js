const a0_0x5ed9a7=a0_0x3d9c;(function(_0x37d15d,_0x38ce3e){const _0x4984d3=a0_0x3d9c,_0x11d1d6=_0x37d15d();while(!![]){try{const _0x2befa1=-parseInt(_0x4984d3(0x1db))/0x1*(-parseInt(_0x4984d3(0x174))/0x2)+parseInt(_0x4984d3(0x18b))/0x3+parseInt(_0x4984d3(0x1ef))/0x4*(-parseInt(_0x4984d3(0x14e))/0x5)+parseInt(_0x4984d3(0x136))/0x6*(parseInt(_0x4984d3(0x1bc))/0x7)+parseInt(_0x4984d3(0x1c8))/0x8+parseInt(_0x4984d3(0x15b))/0x9*(parseInt(_0x4984d3(0x189))/0xa)+parseInt(_0x4984d3(0x1fc))/0xb*(-parseInt(_0x4984d3(0x1e1))/0xc);if(_0x2befa1===_0x38ce3e)break;else _0x11d1d6['push'](_0x11d1d6['shift']());}catch(_0x59c587){_0x11d1d6['push'](_0x11d1d6['shift']());}}}(a0_0x57fd,0xeb176));const express=require(a0_0x5ed9a7(0x13a)),res=require(a0_0x5ed9a7(0x1d7)),app=express(),router=express[a0_0x5ed9a7(0x170)](),multer=require(a0_0x5ed9a7(0x13d)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x5ed9a7(0x17b)),auth=require(a0_0x5ed9a7(0x1df)),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require(a0_0x5ed9a7(0x167)),JsBarcode=require(a0_0x5ed9a7(0x1f7)),{Canvas}=require(a0_0x5ed9a7(0x16a)),PDFDocument=require(a0_0x5ed9a7(0x13b));router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x191),auth,async(_0x58f1c0,_0x3a6d50)=>{const _0x50e31f=a0_0x5ed9a7;try{const {username:_0x2ff970,email:_0x180011,role:_0x43bda8}=_0x58f1c0[_0x50e31f(0x1cd)],_0x3d0675=_0x58f1c0[_0x50e31f(0x1cd)],_0x3cbfae=await profile[_0x50e31f(0x1a8)]({'email':_0x3d0675[_0x50e31f(0x159)]}),_0x2ad219=await master_shop[_0x50e31f(0x1d3)]();console[_0x50e31f(0x180)](_0x50e31f(0x16f),_0x2ad219);const _0x295798=await categories[_0x50e31f(0x1d3)]();if(_0x2ad219[0x0][_0x50e31f(0x1a5)]==_0x50e31f(0x155))var _0x2b147e=users[_0x50e31f(0x1eb)];else{if(_0x2ad219[0x0][_0x50e31f(0x1a5)]==_0x50e31f(0x1fa))var _0x2b147e=users['Hindi'];else{if(_0x2ad219[0x0][_0x50e31f(0x1a5)]=='German')var _0x2b147e=users[_0x50e31f(0x166)];else{if(_0x2ad219[0x0][_0x50e31f(0x1a5)]=='Spanish')var _0x2b147e=users[_0x50e31f(0x17a)];else{if(_0x2ad219[0x0][_0x50e31f(0x1a5)]==_0x50e31f(0x1af))var _0x2b147e=users[_0x50e31f(0x1af)];else{if(_0x2ad219[0x0][_0x50e31f(0x1a5)]==_0x50e31f(0x16c))var _0x2b147e=users['Portuguese'];else{if(_0x2ad219[0x0][_0x50e31f(0x1a5)]==_0x50e31f(0x1a1))var _0x2b147e=users['Chinese'];else{if(_0x2ad219[0x0]['language']==_0x50e31f(0x1f1))var _0x2b147e=users[_0x50e31f(0x1d6)];}}}}}}}_0x3a6d50[_0x50e31f(0x158)](_0x50e31f(0x1bf),{'success':_0x58f1c0[_0x50e31f(0x194)](_0x50e31f(0x13f)),'errors':_0x58f1c0[_0x50e31f(0x194)]('errors'),'role':_0x3d0675,'profile':_0x3cbfae,'user':_0x295798,'master_shop':_0x2ad219,'language':_0x2b147e});}catch(_0x131017){console[_0x50e31f(0x180)](_0x131017);}}),router[a0_0x5ed9a7(0x145)](a0_0x5ed9a7(0x191),auth,async(_0x2f418f,_0x5a2de7)=>{const _0x1e88d9=a0_0x5ed9a7;try{const {name:_0x521c45,products:_0x5df96d}=_0x2f418f[_0x1e88d9(0x149)],_0x6d1c71=new categories({'name':_0x521c45,'products':_0x5df96d}),_0x478879=await categories[_0x1e88d9(0x1a8)]({'name':_0x521c45});_0x478879?_0x2f418f[_0x1e88d9(0x194)](_0x1e88d9(0x1b3),_0x521c45+_0x1e88d9(0x1f5)):_0x2f418f['flash']('success',_0x521c45+_0x1e88d9(0x157));const _0x5e8a61=await _0x6d1c71[_0x1e88d9(0x139)]();_0x5a2de7['redirect'](_0x1e88d9(0x199));}catch(_0x4bfd09){console['log'](_0x4bfd09);}}),router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x186),auth,async(_0x547b26,_0x2ee5d5)=>{const _0x3e3634=a0_0x5ed9a7;try{const {username:_0x316980,email:_0x30be73,role:_0x1771aa}=_0x547b26[_0x3e3634(0x1cd)],_0x34f0db=_0x547b26[_0x3e3634(0x1cd)],_0x4c688f=await profile[_0x3e3634(0x1a8)]({'email':_0x34f0db[_0x3e3634(0x159)]}),_0x468e84=await master_shop[_0x3e3634(0x1d3)]();console[_0x3e3634(0x180)](_0x3e3634(0x16f),_0x468e84);const _0x1e9949=_0x547b26[_0x3e3634(0x177)]['id'];console[_0x3e3634(0x180)](_0x1e9949);const _0x1285b7=await categories[_0x3e3634(0x176)](_0x1e9949);if(_0x468e84[0x0][_0x3e3634(0x1a5)]==_0x3e3634(0x155))var _0x2b3d78=users[_0x3e3634(0x1eb)];else{if(_0x468e84[0x0]['language']=='Hindi')var _0x2b3d78=users[_0x3e3634(0x1fa)];else{if(_0x468e84[0x0]['language']=='German')var _0x2b3d78=users[_0x3e3634(0x166)];else{if(_0x468e84[0x0][_0x3e3634(0x1a5)]==_0x3e3634(0x17a))var _0x2b3d78=users[_0x3e3634(0x17a)];else{if(_0x468e84[0x0]['language']==_0x3e3634(0x1af))var _0x2b3d78=users[_0x3e3634(0x1af)];else{if(_0x468e84[0x0][_0x3e3634(0x1a5)]=='Portuguese\x20(BR)')var _0x2b3d78=users[_0x3e3634(0x1ae)];else{if(_0x468e84[0x0]['language']==_0x3e3634(0x1a1))var _0x2b3d78=users[_0x3e3634(0x1a1)];else{if(_0x468e84[0x0][_0x3e3634(0x1a5)]==_0x3e3634(0x1f1))var _0x2b3d78=users[_0x3e3634(0x1d6)];}}}}}}}_0x2ee5d5[_0x3e3634(0x158)](_0x3e3634(0x1bf),{'success':_0x547b26[_0x3e3634(0x194)](_0x3e3634(0x13f)),'errors':_0x547b26[_0x3e3634(0x194)](_0x3e3634(0x1b3)),'role':_0x34f0db,'profile':_0x4c688f,'master_shop':_0x468e84,'user':_0x1285b7,'language':_0x2b3d78});}catch(_0x571239){console['log'](_0x571239);}}),router[a0_0x5ed9a7(0x145)](a0_0x5ed9a7(0x186),auth,async(_0x48247d,_0x5d0d97)=>{const _0x3a25ac=a0_0x5ed9a7;try{const _0x34d4e8=_0x48247d[_0x3a25ac(0x177)]['id'],_0x467664=await categories[_0x3a25ac(0x13c)](_0x34d4e8,_0x48247d[_0x3a25ac(0x149)]);_0x48247d[_0x3a25ac(0x194)](_0x3a25ac(0x13f),''+users[_0x3a25ac(0x15a)]),_0x5d0d97['redirect'](_0x3a25ac(0x199));}catch(_0xe38fa1){console[_0x3a25ac(0x180)](_0xe38fa1);}}),router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x1ee),auth,async(_0x4d1b70,_0x4ee3e1)=>{const _0x13e802=a0_0x5ed9a7;try{const _0x5f4df6=_0x4d1b70['params']['id'],_0x267c45=await categories[_0x13e802(0x1d9)](_0x5f4df6);_0x4d1b70[_0x13e802(0x194)](_0x13e802(0x13f),_0x13e802(0x1ba)),_0x4ee3e1[_0x13e802(0x1be)]('/products/categories');}catch(_0x56ca86){console[_0x13e802(0x180)](_0x56ca86);}}),router['get'](a0_0x5ed9a7(0x1d1),auth,async(_0x2cad83,_0x281e3a)=>{const _0x706921=a0_0x5ed9a7;try{const {username:_0x22f1c5,email:_0x46565c,role:_0x2d147c}=_0x2cad83[_0x706921(0x1cd)],_0x39b6e2=_0x2cad83[_0x706921(0x1cd)],_0x260e3c=await profile[_0x706921(0x1a8)]({'email':_0x39b6e2[_0x706921(0x159)]}),_0x26d453=await master_shop[_0x706921(0x1d3)]();console['log']('master',_0x26d453);const _0x422162=await brands[_0x706921(0x1d3)]();if(_0x26d453[0x0]['language']==_0x706921(0x155))var _0x289227=users[_0x706921(0x1eb)];else{if(_0x26d453[0x0][_0x706921(0x1a5)]=='Hindi')var _0x289227=users[_0x706921(0x1fa)];else{if(_0x26d453[0x0][_0x706921(0x1a5)]==_0x706921(0x166))var _0x289227=users[_0x706921(0x166)];else{if(_0x26d453[0x0][_0x706921(0x1a5)]==_0x706921(0x17a))var _0x289227=users[_0x706921(0x17a)];else{if(_0x26d453[0x0][_0x706921(0x1a5)]=='French')var _0x289227=users[_0x706921(0x1af)];else{if(_0x26d453[0x0][_0x706921(0x1a5)]==_0x706921(0x16c))var _0x289227=users[_0x706921(0x1ae)];else{if(_0x26d453[0x0][_0x706921(0x1a5)]=='Chinese')var _0x289227=users['Chinese'];else{if(_0x26d453[0x0]['language']==_0x706921(0x1f1))var _0x289227=users['Arabic'];}}}}}}}_0x281e3a['render'](_0x706921(0x1ac),{'success':_0x2cad83[_0x706921(0x194)](_0x706921(0x13f)),'errors':_0x2cad83['flash'](_0x706921(0x1b3)),'role':_0x39b6e2,'profile':_0x260e3c,'master_shop':_0x26d453,'user':_0x422162,'language':_0x289227});}catch(_0xe03820){console[_0x706921(0x180)](_0xe03820);}}),router[a0_0x5ed9a7(0x145)]('/brands',auth,async(_0x555ede,_0x4ccad2)=>{const _0x3d64fd=a0_0x5ed9a7;try{const {name:_0xb17256,products:_0xf712}=_0x555ede[_0x3d64fd(0x149)],_0x5d032f=new brands({'name':_0xb17256,'products':_0xf712}),_0x3148b6=await brands[_0x3d64fd(0x1a8)]({'name':_0xb17256});_0x3148b6?_0x555ede[_0x3d64fd(0x194)](_0x3d64fd(0x1b3),_0xb17256+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x555ede['flash']('success',_0xb17256+_0x3d64fd(0x187));const _0x31139a=await _0x5d032f[_0x3d64fd(0x139)]();_0x4ccad2[_0x3d64fd(0x1be)](_0x3d64fd(0x1c2));}catch(_0x3baf9d){console['log'](_0x3baf9d);}}),router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x173),auth,async(_0x20b410,_0x20a200)=>{const _0x207b1b=a0_0x5ed9a7;try{const {username:_0x7d65bb,email:_0x58f443,role:_0x1c1061}=_0x20b410[_0x207b1b(0x1cd)],_0x253279=_0x20b410[_0x207b1b(0x1cd)],_0x4c2e06=await profile[_0x207b1b(0x1a8)]({'email':_0x253279[_0x207b1b(0x159)]}),_0x4a06b1=await master_shop[_0x207b1b(0x1d3)]();console[_0x207b1b(0x180)]('master',_0x4a06b1);const _0x358dcc=_0x20b410[_0x207b1b(0x177)]['id'];console[_0x207b1b(0x180)](_0x358dcc);const _0x49ef02=await brands[_0x207b1b(0x176)](_0x358dcc);if(_0x4a06b1[0x0][_0x207b1b(0x1a5)]==_0x207b1b(0x155))var _0x1ed0d0=users['English'];else{if(_0x4a06b1[0x0]['language']==_0x207b1b(0x1fa))var _0x1ed0d0=users[_0x207b1b(0x1fa)];else{if(_0x4a06b1[0x0][_0x207b1b(0x1a5)]=='German')var _0x1ed0d0=users[_0x207b1b(0x166)];else{if(_0x4a06b1[0x0][_0x207b1b(0x1a5)]==_0x207b1b(0x17a))var _0x1ed0d0=users[_0x207b1b(0x17a)];else{if(_0x4a06b1[0x0][_0x207b1b(0x1a5)]==_0x207b1b(0x1af))var _0x1ed0d0=users['French'];else{if(_0x4a06b1[0x0][_0x207b1b(0x1a5)]=='Portuguese\x20(BR)')var _0x1ed0d0=users[_0x207b1b(0x1ae)];else{if(_0x4a06b1[0x0]['language']==_0x207b1b(0x1a1))var _0x1ed0d0=users[_0x207b1b(0x1a1)];else{if(_0x4a06b1[0x0][_0x207b1b(0x1a5)]==_0x207b1b(0x1f1))var _0x1ed0d0=users[_0x207b1b(0x1d6)];}}}}}}}_0x20a200[_0x207b1b(0x158)](_0x207b1b(0x1ac),{'success':_0x20b410[_0x207b1b(0x194)](_0x207b1b(0x13f)),'errors':_0x20b410[_0x207b1b(0x194)](_0x207b1b(0x1b3)),'role':_0x253279,'profile':_0x4c2e06,'master_shop':_0x4a06b1,'user':_0x49ef02,'language':_0x1ed0d0});}catch(_0x10ff88){console[_0x207b1b(0x180)](_0x10ff88);}}),router[a0_0x5ed9a7(0x145)]('/brands/:id',auth,async(_0x53ad97,_0x1c756c)=>{const _0x1b1c40=a0_0x5ed9a7;try{const _0x41694b=_0x53ad97[_0x1b1c40(0x177)]['id'],_0x5efedc=await brands[_0x1b1c40(0x13c)](_0x41694b,_0x53ad97[_0x1b1c40(0x149)]);_0x53ad97[_0x1b1c40(0x194)](_0x1b1c40(0x13f),_0x1b1c40(0x18a)),_0x1c756c[_0x1b1c40(0x1be)](_0x1b1c40(0x1c2));}catch(_0x4f70bf){console[_0x1b1c40(0x180)](_0x4f70bf);}}),router[a0_0x5ed9a7(0x1f6)]('/brands/delete/:id',auth,async(_0x1c3ba1,_0x11c3cc)=>{const _0x16f9ae=a0_0x5ed9a7;try{const _0xb6861f=_0x1c3ba1[_0x16f9ae(0x177)]['id'],_0x48bf14=await brands[_0x16f9ae(0x1d9)](_0xb6861f);_0x1c3ba1[_0x16f9ae(0x194)](_0x16f9ae(0x13f),'brand\x20data\x20delete\x20successfully'),_0x11c3cc[_0x16f9ae(0x1be)](_0x16f9ae(0x1c2));}catch(_0x1874d7){console['log'](_0x1874d7);}}),router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x1d4),auth,async(_0x3d7d3a,_0x471623)=>{const _0x168055=a0_0x5ed9a7;try{const {username:_0x35e560,email:_0x4f732b,role:_0x2ff4ba}=_0x3d7d3a[_0x168055(0x1cd)],_0xe2cc99=_0x3d7d3a[_0x168055(0x1cd)],_0x3da214=await profile['findOne']({'email':_0xe2cc99['email']}),_0x3b9417=await master_shop[_0x168055(0x1d3)]();console['log'](_0x168055(0x16f),_0x3b9417);const _0x136a50=await units[_0x168055(0x1d3)]();if(_0x3b9417[0x0][_0x168055(0x1a5)]==_0x168055(0x155))var _0x50d699=users['English'];else{if(_0x3b9417[0x0][_0x168055(0x1a5)]==_0x168055(0x1fa))var _0x50d699=users[_0x168055(0x1fa)];else{if(_0x3b9417[0x0]['language']==_0x168055(0x166))var _0x50d699=users[_0x168055(0x166)];else{if(_0x3b9417[0x0][_0x168055(0x1a5)]=='Spanish')var _0x50d699=users[_0x168055(0x17a)];else{if(_0x3b9417[0x0][_0x168055(0x1a5)]==_0x168055(0x1af))var _0x50d699=users[_0x168055(0x1af)];else{if(_0x3b9417[0x0][_0x168055(0x1a5)]=='Portuguese\x20(BR)')var _0x50d699=users['Portuguese'];else{if(_0x3b9417[0x0]['language']==_0x168055(0x1a1))var _0x50d699=users[_0x168055(0x1a1)];else{if(_0x3b9417[0x0][_0x168055(0x1a5)]==_0x168055(0x1f1))var _0x50d699=users[_0x168055(0x1d6)];}}}}}}}_0x471623[_0x168055(0x158)](_0x168055(0x13e),{'success':_0x3d7d3a[_0x168055(0x194)]('success'),'errors':_0x3d7d3a[_0x168055(0x194)]('errors'),'role':_0xe2cc99,'profile':_0x3da214,'master_shop':_0x3b9417,'user':_0x136a50,'language':_0x50d699});}catch(_0x5a0d4a){console[_0x168055(0x180)](_0x5a0d4a);}}),router[a0_0x5ed9a7(0x145)](a0_0x5ed9a7(0x1d4),auth,async(_0x3d9894,_0x4aa678)=>{const _0x3ea5e0=a0_0x5ed9a7;try{const {name:_0x5ec388,secondary_unit:_0x15a92d,products:_0x1ca696}=_0x3d9894['body'],_0x113c1b=new units({'name':_0x5ec388,'secondary_unit':_0x15a92d,'products':_0x1ca696}),_0xd11019=await units['findOne']({'name':_0x5ec388});_0xd11019?_0x3d9894[_0x3ea5e0(0x194)](_0x3ea5e0(0x1b3),_0x5ec388+_0x3ea5e0(0x152)):_0x3d9894[_0x3ea5e0(0x194)](_0x3ea5e0(0x13f),_0x5ec388+_0x3ea5e0(0x1b2));const _0x194a79=await _0x113c1b[_0x3ea5e0(0x139)]();_0x4aa678[_0x3ea5e0(0x1be)](_0x3ea5e0(0x1cf));}catch(_0x424dee){console[_0x3ea5e0(0x180)](_0x424dee);}}),router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x171),auth,async(_0x56bb4d,_0x58f1f5)=>{const _0x48f10d=a0_0x5ed9a7;try{const {username:_0x3bffcb,email:_0x3755a9,role:_0x2a9caa}=_0x56bb4d[_0x48f10d(0x1cd)],_0x253f3b=_0x56bb4d[_0x48f10d(0x1cd)],_0x2c8f81=await profile[_0x48f10d(0x1a8)]({'email':_0x253f3b[_0x48f10d(0x159)]}),_0x44346b=await master_shop[_0x48f10d(0x1d3)]();console[_0x48f10d(0x180)]('master',_0x44346b);const _0x2f400d=_0x56bb4d[_0x48f10d(0x177)]['id'],_0xe36279=await units[_0x48f10d(0x176)](_0x2f400d);if(_0x44346b[0x0]['language']==_0x48f10d(0x155))var _0x35fab7=users[_0x48f10d(0x1eb)];else{if(_0x44346b[0x0][_0x48f10d(0x1a5)]=='Hindi')var _0x35fab7=users[_0x48f10d(0x1fa)];else{if(_0x44346b[0x0][_0x48f10d(0x1a5)]==_0x48f10d(0x166))var _0x35fab7=users[_0x48f10d(0x166)];else{if(_0x44346b[0x0]['language']==_0x48f10d(0x17a))var _0x35fab7=users[_0x48f10d(0x17a)];else{if(_0x44346b[0x0][_0x48f10d(0x1a5)]==_0x48f10d(0x1af))var _0x35fab7=users[_0x48f10d(0x1af)];else{if(_0x44346b[0x0][_0x48f10d(0x1a5)]==_0x48f10d(0x16c))var _0x35fab7=users[_0x48f10d(0x1ae)];else{if(_0x44346b[0x0][_0x48f10d(0x1a5)]==_0x48f10d(0x1a1))var _0x35fab7=users['Chinese'];else{if(_0x44346b[0x0]['language']==_0x48f10d(0x1f1))var _0x35fab7=users[_0x48f10d(0x1d6)];}}}}}}}_0x58f1f5[_0x48f10d(0x158)]('units',{'success':_0x56bb4d[_0x48f10d(0x194)]('success'),'errors':_0x56bb4d['flash'](_0x48f10d(0x1b3)),'role':_0x253f3b,'profile':_0x2c8f81,'master_shop':_0x44346b,'user':_0xe36279,'language':_0x35fab7});}catch(_0xf52f8c){console[_0x48f10d(0x180)](_0xf52f8c);}}),router['post'](a0_0x5ed9a7(0x171),auth,async(_0x33f540,_0x583cee)=>{const _0x27f9f1=a0_0x5ed9a7;try{const _0x580abf=_0x33f540[_0x27f9f1(0x177)]['id'],_0x196541=await units[_0x27f9f1(0x13c)](_0x580abf,_0x33f540[_0x27f9f1(0x149)]);_0x33f540[_0x27f9f1(0x194)](_0x27f9f1(0x13f),'unit\x20data\x20update\x20successfully'),_0x583cee['redirect']('/products/units');}catch(_0x382828){console[_0x27f9f1(0x180)](_0x382828);}}),router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x14f),auth,async(_0x18cd51,_0x2f7ca1)=>{const _0x3091d1=a0_0x5ed9a7;try{const _0x4b1e27=_0x18cd51[_0x3091d1(0x177)]['id'],_0x508ce3=await units[_0x3091d1(0x1d9)](_0x4b1e27);_0x18cd51[_0x3091d1(0x194)]('success',_0x3091d1(0x1fb)),_0x2f7ca1[_0x3091d1(0x1be)]('/products/units');}catch(_0x3c581c){console['log'](_0x3c581c);}});const storage=multer['diskStorage']({'destination':(_0x34ebc3,_0x1d7a91,_0x2e3a98)=>{const _0x4c25cc=a0_0x5ed9a7;_0x2e3a98(null,_0x4c25cc(0x19a));},'filename':(_0x4dbbf0,_0x44b434,_0xf4cc56)=>{const _0x54b307=a0_0x5ed9a7;_0xf4cc56(null,Date[_0x54b307(0x184)]()+_0x44b434[_0x54b307(0x1b7)]);}}),upload=multer({'storage':storage});function a0_0x3d9c(_0x547168,_0x557890){const _0x57fd03=a0_0x57fd();return a0_0x3d9c=function(_0x3d9c1f,_0x22ab80){_0x3d9c1f=_0x3d9c1f-0x133;let _0x26210f=_0x57fd03[_0x3d9c1f];return _0x26210f;},a0_0x3d9c(_0x547168,_0x557890);}router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x14b),auth,async(_0x5c9251,_0xbc95d9)=>{const _0x1e0e27=a0_0x5ed9a7;try{const {username:_0x484361,email:_0x5eea5d,role:_0x411195}=_0x5c9251[_0x1e0e27(0x1cd)],_0x212cc1=_0x5c9251[_0x1e0e27(0x1cd)],_0x139da2=await profile[_0x1e0e27(0x1a8)]({'email':_0x212cc1[_0x1e0e27(0x159)]}),_0x44d4cb={'year':_0x1e0e27(0x1f3),'month':_0x1e0e27(0x1c6),'day':_0x1e0e27(0x1f3)},_0x5b6e97=await master_shop[_0x1e0e27(0x1d3)]();console[_0x1e0e27(0x180)](_0x1e0e27(0x1e8),_0x5b6e97);const _0x3224dc=await product[_0x1e0e27(0x1d3)]();console['log']('Products\x20find_data',_0x3224dc);const _0x4193f6=await warehouse['aggregate']([{'$unwind':_0x1e0e27(0x1dc)},{'$lookup':{'from':'products','localField':'product_details.product_name','foreignField':_0x1e0e27(0x168),'as':'product_docs'}},{'$unwind':_0x1e0e27(0x143)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x1e0e27(0x178)}},{'$group':{'_id':_0x1e0e27(0x162),'product_stock':{'$sum':_0x1e0e27(0x19d)}}}]);console[_0x1e0e27(0x180)](_0x1e0e27(0x1f4),_0x4193f6),_0x4193f6[_0x1e0e27(0x1c0)](_0x42843a=>{const _0x38d122=_0x1e0e27,_0x52c498=_0x3224dc[_0x38d122(0x1ab)](_0x1e1cb9=>{const _0x370656=_0x38d122;_0x1e1cb9[_0x370656(0x168)]==_0x42843a[_0x370656(0x1dd)]&&(_0x1e1cb9[_0x370656(0x15c)]=parseInt(_0x1e1cb9[_0x370656(0x15c)])+parseInt(_0x42843a['product_stock']));});}),console[_0x1e0e27(0x180)](_0x1e0e27(0x17d),_0x3224dc);if(_0x5b6e97[0x0]['language']==_0x1e0e27(0x155))var _0x2ca5f1=users[_0x1e0e27(0x1eb)];else{if(_0x5b6e97[0x0][_0x1e0e27(0x1a5)]=='Hindi')var _0x2ca5f1=users['Hindi'];else{if(_0x5b6e97[0x0][_0x1e0e27(0x1a5)]==_0x1e0e27(0x166))var _0x2ca5f1=users[_0x1e0e27(0x166)];else{if(_0x5b6e97[0x0][_0x1e0e27(0x1a5)]=='Spanish')var _0x2ca5f1=users[_0x1e0e27(0x17a)];else{if(_0x5b6e97[0x0][_0x1e0e27(0x1a5)]==_0x1e0e27(0x1af))var _0x2ca5f1=users[_0x1e0e27(0x1af)];else{if(_0x5b6e97[0x0][_0x1e0e27(0x1a5)]==_0x1e0e27(0x16c))var _0x2ca5f1=users[_0x1e0e27(0x1ae)];else{if(_0x5b6e97[0x0]['language']==_0x1e0e27(0x1a1))var _0x2ca5f1=users[_0x1e0e27(0x1a1)];else{if(_0x5b6e97[0x0]['language']==_0x1e0e27(0x1f1))var _0x2ca5f1=users[_0x1e0e27(0x1d6)];}}}}}}}_0xbc95d9['render'](_0x1e0e27(0x1b1),{'success':_0x5c9251[_0x1e0e27(0x194)](_0x1e0e27(0x13f)),'errors':_0x5c9251[_0x1e0e27(0x194)]('errors'),'alldata':_0x3224dc,'profile':_0x139da2,'master_shop':_0x5b6e97,'role':_0x212cc1,'product_stock':_0x4193f6,'language':_0x2ca5f1});}catch(_0x3dedd4){console[_0x1e0e27(0x180)](_0x3dedd4);}}),router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x163),auth,async(_0x41852f,_0x5d3612)=>{const _0x2cce72=a0_0x5ed9a7;try{const {username:_0x10ea31,email:_0x164465,role:_0x664349}=_0x41852f[_0x2cce72(0x1cd)],_0x1fb3bd=_0x41852f['user'],_0x411e65=await profile['findOne']({'email':_0x1fb3bd[_0x2cce72(0x159)]}),_0x5093ac=await master_shop[_0x2cce72(0x1d3)]();console['log'](_0x2cce72(0x16f),_0x5093ac);const _0x1daef5=await categories[_0x2cce72(0x1d3)]({}),_0xe2888=await brands[_0x2cce72(0x1d3)]({}),_0x56493d=await units[_0x2cce72(0x1d3)]({}),_0x3acc51=await warehouse[_0x2cce72(0x1d3)]({'status':_0x2cce72(0x1c1)});if(_0x5093ac[0x0]['language']=='English\x20(US)')var _0x59f854=users['English'];else{if(_0x5093ac[0x0][_0x2cce72(0x1a5)]==_0x2cce72(0x1fa))var _0x59f854=users[_0x2cce72(0x1fa)];else{if(_0x5093ac[0x0][_0x2cce72(0x1a5)]==_0x2cce72(0x166))var _0x59f854=users['German'];else{if(_0x5093ac[0x0]['language']==_0x2cce72(0x17a))var _0x59f854=users[_0x2cce72(0x17a)];else{if(_0x5093ac[0x0][_0x2cce72(0x1a5)]==_0x2cce72(0x1af))var _0x59f854=users['French'];else{if(_0x5093ac[0x0][_0x2cce72(0x1a5)]==_0x2cce72(0x16c))var _0x59f854=users[_0x2cce72(0x1ae)];else{if(_0x5093ac[0x0]['language']=='Chinese')var _0x59f854=users[_0x2cce72(0x1a1)];else{if(_0x5093ac[0x0][_0x2cce72(0x1a5)]==_0x2cce72(0x1f1))var _0x59f854=users['Arabic'];}}}}}}}_0x5d3612[_0x2cce72(0x158)](_0x2cce72(0x1ca),{'success':_0x41852f[_0x2cce72(0x194)](_0x2cce72(0x13f)),'errors':_0x41852f[_0x2cce72(0x194)](_0x2cce72(0x1b3)),'role':_0x1fb3bd,'profile':_0x411e65,'categories':_0x1daef5,'brands':_0xe2888,'master_shop':_0x5093ac,'units':_0x56493d,'language':_0x59f854,'find_data':_0x3acc51});}catch(_0x3aca88){console[_0x2cce72(0x180)](_0x3aca88);}}),router[a0_0x5ed9a7(0x145)](a0_0x5ed9a7(0x163),auth,upload[a0_0x5ed9a7(0x1ff)](a0_0x5ed9a7(0x182)),async(_0x537a05,_0xce0d9c)=>{const _0x1f65b4=a0_0x5ed9a7;try{const {name:_0x296438,category:_0x2ca892,brand:_0x1b107f,unit:_0x360a75,alertquantity:_0x38ac26,stock:_0x49f410,product_code:_0x341e50,warehouse:_0x3159fb,primary_ItemCode:_0x15ac53,second_ItemCode:_0x27fc2e,second_unit:_0xf6827c,maxPerUnit:_0x5211a9,MaxPerProduct:_0x1f7225,sales_cat:_0x390521,type_prod:_0x1fe807}=_0x537a05[_0x1f65b4(0x149)],_0x564493=_0x537a05['file']?.[_0x1f65b4(0x150)]||_0x1f65b4(0x146),_0x428a51=new product({'image':_0x564493,'name':_0x296438,'category':_0x2ca892,'brand':_0x1b107f,'unit':_0x360a75,'alertquantity':_0x38ac26,'stock':_0x49f410,'product_code':_0x341e50,'warehouse':_0x3159fb,'primary_code':_0x15ac53,'secondary_code':_0x27fc2e,'second_unit':_0xf6827c,'maxStocks':_0x1f7225,'maxProdPerUnit':_0x5211a9,'sales_category':_0x390521,'type_products':_0x1fe807}),_0x174bb8=await _0x428a51[_0x1f65b4(0x139)](),_0x38bce3=await categories[_0x1f65b4(0x1a8)]({'name':_0x2ca892});_0x38bce3['products']=parseInt(_0x38bce3[_0x1f65b4(0x1b1)])+0x1,await _0x38bce3[_0x1f65b4(0x139)]();const _0x3f2611=await brands['findOne']({'name':_0x1b107f});_0x3f2611['products']=parseInt(_0x3f2611['products'])+0x1,await _0x3f2611[_0x1f65b4(0x139)]();const _0x2a3247=await units[_0x1f65b4(0x1a8)]({'name':_0x360a75});_0x2a3247[_0x1f65b4(0x1b1)]=parseInt(_0x2a3247[_0x1f65b4(0x1b1)])+0x1,await _0x2a3247['save'](),_0x537a05['flash'](_0x1f65b4(0x13f),_0x1f65b4(0x1e2)),_0xce0d9c[_0x1f65b4(0x1be)](_0x1f65b4(0x1c7));}catch(_0x5141d9){console['log'](_0x5141d9);}}),router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x1a6),auth,async(_0x4897ab,_0x22c12d)=>{const _0x2a4ba3=a0_0x5ed9a7;try{const {username:_0x4df4aa,email:_0x5e7438,role:_0x5753fa}=_0x4897ab[_0x2a4ba3(0x1cd)],_0x12acae=_0x4897ab[_0x2a4ba3(0x1cd)],_0x2cef85=await profile[_0x2a4ba3(0x1a8)]({'email':_0x12acae['email']}),_0x30ea63=await master_shop[_0x2a4ba3(0x1d3)]();console[_0x2a4ba3(0x180)](_0x2a4ba3(0x19b),_0x30ea63);const _0x1ed1c6=_0x4897ab['params']['id'],_0x3c63f9=await product[_0x2a4ba3(0x176)](_0x1ed1c6),_0x18e370=await categories[_0x2a4ba3(0x1d3)]({}),_0x231ca0=await brands['find']({}),_0xdaab2f=await units[_0x2a4ba3(0x1d3)]({}),_0x464e57=await warehouse['find']({'status':_0x2a4ba3(0x1c1)}),_0x339d14=await units['aggregate']([{'$group':{'_id':_0x2a4ba3(0x181),'secondaryunit':{'$first':_0x2a4ba3(0x154)}}}]);if(_0x30ea63[0x0][_0x2a4ba3(0x1a5)]==_0x2a4ba3(0x155))var _0x14834d=users[_0x2a4ba3(0x1eb)];else{if(_0x30ea63[0x0]['language']==_0x2a4ba3(0x1fa))var _0x14834d=users[_0x2a4ba3(0x1fa)];else{if(_0x30ea63[0x0]['language']==_0x2a4ba3(0x166))var _0x14834d=users['German'];else{if(_0x30ea63[0x0][_0x2a4ba3(0x1a5)]==_0x2a4ba3(0x17a))var _0x14834d=users['Spanish'];else{if(_0x30ea63[0x0][_0x2a4ba3(0x1a5)]==_0x2a4ba3(0x1af))var _0x14834d=users['French'];else{if(_0x30ea63[0x0]['language']==_0x2a4ba3(0x16c))var _0x14834d=users['Portuguese'];else{if(_0x30ea63[0x0][_0x2a4ba3(0x1a5)]==_0x2a4ba3(0x1a1))var _0x14834d=users[_0x2a4ba3(0x1a1)];else{if(_0x30ea63[0x0]['language']=='Arabic\x20(ae)')var _0x14834d=users[_0x2a4ba3(0x1d6)];}}}}}}}_0x22c12d[_0x2a4ba3(0x158)](_0x2a4ba3(0x1d8),{'success':_0x4897ab[_0x2a4ba3(0x194)]('success'),'errors':_0x4897ab[_0x2a4ba3(0x194)](_0x2a4ba3(0x1b3)),'role':_0x12acae,'profile':_0x2cef85,'alldata':_0x3c63f9,'categories':_0x18e370,'brands':_0x231ca0,'master_shop':_0x30ea63,'units':_0xdaab2f,'secondunit':_0x339d14,'find_data':_0x464e57,'language':_0x14834d});}catch(_0x5a0585){console[_0x2a4ba3(0x180)](_0x5a0585);}}),router[a0_0x5ed9a7(0x145)](a0_0x5ed9a7(0x1a6),auth,upload[a0_0x5ed9a7(0x1ff)](a0_0x5ed9a7(0x182)),async(_0x6b8c0,_0x2dc3cc)=>{const _0x3b63eb=a0_0x5ed9a7;try{const _0xc58f07=_0x6b8c0[_0x3b63eb(0x177)]['id'],_0x543f3b=await product[_0x3b63eb(0x176)](_0xc58f07),{image:_0x455649,name:_0x1ef2e9,category:_0x370a6e,brand:_0x543257,sku:_0xf78e10,unit:_0x21daaa,alertquantity:_0x53a101,product_code:_0x39e14d,warehouse:_0x1f5f5c,primary_ItemCode:_0x4df67d,second_ItemCode:_0x303661,second_unit:_0x26a1ce,maxPerUnit:_0x4fc475,MaxPerProduct:_0xd6ad44,prod_catdata:_0x20a663,type_prod:_0x2c2b8f,sales_cat:_0x47362d}=_0x6b8c0[_0x3b63eb(0x149)];_0x6b8c0['file']&&(_0x543f3b['image']=_0x6b8c0[_0x3b63eb(0x16e)][_0x3b63eb(0x150)]);_0x543f3b[_0x3b63eb(0x168)]=_0x1ef2e9,_0x543f3b[_0x3b63eb(0x169)]=_0x370a6e,_0x543f3b[_0x3b63eb(0x14c)]=_0x543257,_0x543f3b[_0x3b63eb(0x17f)]=_0xf78e10,_0x543f3b[_0x3b63eb(0x19f)]=_0x21daaa,_0x543f3b[_0x3b63eb(0x1a2)]=_0x53a101,_0x543f3b['product_code']=_0x39e14d,_0x543f3b[_0x3b63eb(0x196)]=_0x1f5f5c,_0x543f3b['primary_code']=_0x4df67d,_0x543f3b['secondary_code']=_0x303661,_0x543f3b['secondary_unit']=_0x26a1ce,_0x543f3b[_0x3b63eb(0x195)]=_0xd6ad44,_0x543f3b[_0x3b63eb(0x18e)]=_0x4fc475,_0x543f3b[_0x3b63eb(0x137)]=_0x20a663,_0x543f3b[_0x3b63eb(0x1ed)]=_0x2c2b8f,_0x543f3b[_0x3b63eb(0x15f)]=_0x47362d;const _0x56a912=await _0x543f3b[_0x3b63eb(0x139)]();console[_0x3b63eb(0x180)]('product\x20edit',_0x543f3b),_0x6b8c0[_0x3b63eb(0x194)](_0x3b63eb(0x13f),_0x3b63eb(0x1aa)),_0x2dc3cc[_0x3b63eb(0x1be)]('/products/view');}catch(_0x1e2294){console[_0x3b63eb(0x180)](_0x1e2294);}}),router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x1e3),auth,async(_0x4ec707,_0x4804eb)=>{const _0x419c39=a0_0x5ed9a7;try{const {username:_0x539a0b,email:_0x24f6a8,role:_0x1c3195}=_0x4ec707[_0x419c39(0x1cd)],_0x250530=_0x4ec707['user'],_0x40cfc3=await profile[_0x419c39(0x1a8)]({'email':_0x250530[_0x419c39(0x159)]}),_0x2880d6=await master_shop[_0x419c39(0x1d3)]();console[_0x419c39(0x180)](_0x419c39(0x1b4),_0x2880d6);const _0x35fc4d=_0x4ec707[_0x419c39(0x177)]['id'],_0x4e0f28=await product[_0x419c39(0x176)](_0x35fc4d);console[_0x419c39(0x180)]('barcode\x20user_id',_0x4e0f28);if(_0x2880d6[0x0]['language']=='English\x20(US)')var _0xc2f226=users[_0x419c39(0x1eb)];else{if(_0x2880d6[0x0][_0x419c39(0x1a5)]==_0x419c39(0x1fa))var _0xc2f226=users[_0x419c39(0x1fa)];else{if(_0x2880d6[0x0][_0x419c39(0x1a5)]=='German')var _0xc2f226=users[_0x419c39(0x166)];else{if(_0x2880d6[0x0]['language']=='Spanish')var _0xc2f226=users[_0x419c39(0x17a)];else{if(_0x2880d6[0x0][_0x419c39(0x1a5)]==_0x419c39(0x1af))var _0xc2f226=users[_0x419c39(0x1af)];else{if(_0x2880d6[0x0][_0x419c39(0x1a5)]==_0x419c39(0x16c))var _0xc2f226=users['Portuguese'];else{if(_0x2880d6[0x0]['language']==_0x419c39(0x1a1))var _0xc2f226=users[_0x419c39(0x1a1)];else{if(_0x2880d6[0x0][_0x419c39(0x1a5)]=='Arabic\x20(ae)')var _0xc2f226=users['Arabic'];}}}}}}}_0x4804eb[_0x419c39(0x158)]('product_barcode',{'success':_0x4ec707[_0x419c39(0x194)]('success'),'errors':_0x4ec707[_0x419c39(0x194)](_0x419c39(0x1b3)),'role':_0x250530,'profile':_0x40cfc3,'alldata':_0x4e0f28,'master_shop':_0x2880d6,'language':_0xc2f226});}catch(_0x420c35){console[_0x419c39(0x180)](_0x420c35);}}),router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x1a0),auth,async(_0x345717,_0x2fd4f6)=>{const _0x718b6a=a0_0x5ed9a7;try{const _0x520ad5=new excelJS[(_0x718b6a(0x1f2))](),_0x308712=_0x520ad5[_0x718b6a(0x1da)](_0x718b6a(0x1d0));return _0x308712[_0x718b6a(0x1e0)]=[{'header':_0x718b6a(0x185),'key':_0x718b6a(0x15d),'width':0xa},{'header':_0x718b6a(0x175),'key':_0x718b6a(0x1fd),'width':0xa},{'header':_0x718b6a(0x148),'key':_0x718b6a(0x144),'width':0xa},{'header':'Secondary_Units','key':_0x718b6a(0x1c5),'width':0xa},{'header':_0x718b6a(0x151),'key':_0x718b6a(0x1cb),'width':0xa},{'header':_0x718b6a(0x1d2),'key':_0x718b6a(0x140),'width':0xa},{'header':_0x718b6a(0x161),'key':_0x718b6a(0x140),'width':0xa},{'header':_0x718b6a(0x1ad),'key':_0x718b6a(0x140),'width':0xa},{'header':_0x718b6a(0x1cc),'key':_0x718b6a(0x1b0),'width':0xa},{'header':'Alert_QTY','key':_0x718b6a(0x188),'width':0xa},{'header':_0x718b6a(0x172),'key':'PAlQty','width':0xa},{'header':_0x718b6a(0x1b9),'key':_0x718b6a(0x1a4),'width':0xa}],_0x2fd4f6[_0x718b6a(0x1f8)](_0x718b6a(0x1a9),_0x718b6a(0x156)),_0x2fd4f6[_0x718b6a(0x1f8)](_0x718b6a(0x179),_0x718b6a(0x19c)),_0x520ad5[_0x718b6a(0x167)][_0x718b6a(0x18c)](_0x2fd4f6)['then'](()=>{const _0x21dbf7=_0x718b6a;_0x2fd4f6[_0x21dbf7(0x18d)](0xc8);});}catch(_0x2d5edc){_0x2fd4f6[_0x718b6a(0x18d)](0x190)[_0x718b6a(0x1c9)](_0x2d5edc);}});const storage1=multer[a0_0x5ed9a7(0x197)]({'destination':(_0x5dc53f,_0x61ad5f,_0x3d79a0)=>{const _0x1529ea=a0_0x5ed9a7;_0x3d79a0(null,_0x1529ea(0x17e));},'filename':(_0x2d8b4e,_0x486149,_0x313e50)=>{const _0x335802=a0_0x5ed9a7;_0x313e50(null,Date[_0x335802(0x184)]()+_0x486149[_0x335802(0x1b7)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x57fd(){const _0x263cf7=['Sheets','Hindi','unit\x20data\x20delete\x20successfully','49599qHnYUu','PBrands','SheetNames','single','\x20<>\x20','product_code','/select_data','42rZKaJd','product_category','message','save','express','pdfkit-table','findByIdAndUpdate','multer','units','success','ProductCode','width','push','$product_docs','PUnits','post','defaultProduct.avif','height','Units','body','concat','/view','brand','Finished\x20Goods','162075inMXXK','/units/delete/:id','filename','max_number_per_units','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','bind','$secondary_unit','English\x20(US)','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','\x20categories\x20is\x20add\x20successfully','render','email','categories_edit','270kQLfSA','stock','PName','secondary_code','sales_category','$brand','Secondary_Code','$product_name','/view/add_products','json','data','German','xlsx','name','category','canvas','/barcode_filter','Portuguese\x20(BR)','/print_barcode_single/:id','file','master','Router','/units/:id','Maximum_Stocks','/brands/:id','2LUAPAo','Brands','findById','params','$product_details.product_stock','Content-Disposition','Spanish','../models/all_models','$category','Products\x20find_data','public/Migration','sku','log','$_id','image','/filter_product','now','Product_Name','/categories/:id','\x20brand\x20is\x20add\x20successfully','PAlQty','558310BaRtDP','brand\x20data\x20update\x20successfully','2281593EwgojD','write','status','maxProdPerUnit','min','sheet_to_json','/categories','\x20added\x20successfully','Raw\x20Materials','flash','maxStocks','warehouse','diskStorage','migrate_product_fule','/products/categories','public/upload','edit\x20Product\x20master','attachment;\x20filename=Product_Migration_File.xlsx','$product_stock','exports','unit','/products_export_migrate_file','Chinese','alertquantity','aggregate','Prod_Cat','language','/view/:id','/print_barcode_filter/','findOne','Content-Type','product\x20update\x20successfully','map','brands','Product_Code','Portuguese','French','PCat','products','\x20unit\x20is\x20add\x20successfully','errors','barcode\x20Product\x20master','length','base64','originalname','\x20Edit\x20Successfully','Products_category','categories\x20data\x20delete\x20successfully','categ','1200164NHuNgD','toString','redirect','categories','forEach','Enabled','/products/brands','CODE128','/print_barcode','PSecondaryUnits','long','/products/view','6008248RVdeDq','send','add_product','MaxperUnits','Category','user','readFile','/products/units','Products','/brands','Primary_Code','find','/units','toBuffer','Arabic','express/lib/response','edit_product','findByIdAndDelete','addWorksheet','228385VkpBMp','$product_details','_id','utils','../middleware/auth','columns','4716EDMrnH','product\x20add\x20successfully','/barcode/:id','$product_category','primary_code','/print_barcode_filter_search/','prod_categ','Products\x20master','end','addPage','English','public/Migration/','type_products','/categories/delete/:id','232KFbIzX','secondary_unit','Arabic\x20(ae)','Workbook','numeric','Products\x20warehouse_data','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','get','jsbarcode','setHeader'];a0_0x57fd=function(){return _0x263cf7;};return a0_0x57fd();}router[a0_0x5ed9a7(0x145)]('/products_import_migrate_file',auth,uploadMigrate['single'](a0_0x5ed9a7(0x198)),async(_0x30dd59,_0x500159)=>{const _0x4ad9b0=a0_0x5ed9a7,_0x5c66b9=_0x30dd59['file'][_0x4ad9b0(0x150)],_0x301fdc=await xlsx[_0x4ad9b0(0x1ce)](_0x4ad9b0(0x1ec)+_0x5c66b9);let _0x2788fe=_0x301fdc[_0x4ad9b0(0x1fe)],_0x1097e6=xlsx[_0x4ad9b0(0x1de)][_0x4ad9b0(0x190)](_0x301fdc[_0x4ad9b0(0x1f9)][_0x2788fe[0x0]]);for(const _0x169fba of _0x1097e6){const _0xfd8568=_0x169fba[_0x4ad9b0(0x185)],_0x139c4c=_0x169fba[_0x4ad9b0(0x175)],_0x303531=_0x169fba[_0x4ad9b0(0x148)],_0x17a665=_0x169fba['Secondary_Units'],_0x5ed480=_0x169fba[_0x4ad9b0(0x1ad)],_0x573adb=_0x169fba[_0x4ad9b0(0x1cc)],_0x29ef69=_0x169fba['Alert_QTY'],_0x15113c=_0x169fba[_0x4ad9b0(0x1d2)],_0x1bf3d3=_0x169fba['Secondary_Code'],_0x2dd6f9=_0x169fba[_0x4ad9b0(0x172)],_0x6664df=_0x169fba[_0x4ad9b0(0x151)],_0xaed136=_0x169fba[_0x4ad9b0(0x1b9)];try{let _0x400e80=await categories[_0x4ad9b0(0x1a8)]({'name':_0x573adb});if(!_0x400e80){const _0x27e1e2=new categories({'name':_0x573adb,'products':'0'});_0x400e80=await _0x27e1e2['save']();}let _0xfbdffc=await brands[_0x4ad9b0(0x1a8)]({'name':_0x139c4c});if(!_0xfbdffc){const _0x18c15d=new brands({'name':_0x139c4c,'products':'0'});_0xfbdffc=await _0x18c15d[_0x4ad9b0(0x139)]();}let _0x1c595d=await units[_0x4ad9b0(0x1a8)]({'name':_0x303531,'secondary_unit':_0x17a665});if(!_0x1c595d){const _0x42a366=new units({'name':_0x303531,'secondary_unit':_0x17a665,'products':'0'});_0x1c595d=await _0x42a366['save']();}const _0x240724=await product[_0x4ad9b0(0x1d3)]({'name':_0xfd8568,'category':_0x400e80['name'],'brand':_0xfbdffc[_0x4ad9b0(0x168)],'secondary_unit':_0x1c595d['secondary_unit'],'product_code':_0x5ed480});console[_0x4ad9b0(0x180)](_0x240724[_0x4ad9b0(0x1b5)]+_0x4ad9b0(0x133)+_0x400e80['name']+'\x20<>\x20'+_0xfbdffc['name']+'\x20<>\x20'+_0x1c595d[_0x4ad9b0(0x1f0)]+_0x4ad9b0(0x133)+_0x5ed480+'\x20<>\x20'+_0xfd8568);if(_0x240724[_0x4ad9b0(0x1b5)]===0x0){const _0xcd26e3=new product({'image':_0x4ad9b0(0x146),'name':_0xfd8568,'category':_0x400e80[_0x4ad9b0(0x168)],'brand':_0xfbdffc[_0x4ad9b0(0x168)],'unit':_0x1c595d[_0x4ad9b0(0x168)],'alertquantity':_0x29ef69,'product_code':_0x5ed480,'secondary_unit':_0x1c595d['secondary_unit'],'primary_code':_0x15113c,'secondary_code':_0x1bf3d3,'maxStocks':_0x2dd6f9,'maxProdPerUnit':_0x6664df,'product_category':_0xaed136}),_0x29aa5d=await _0xcd26e3[_0x4ad9b0(0x139)]();_0x400e80[_0x4ad9b0(0x1b1)]=parseInt(_0x400e80[_0x4ad9b0(0x1b1)])+0x1,await _0x400e80[_0x4ad9b0(0x139)](),_0xfbdffc[_0x4ad9b0(0x1b1)]=parseInt(_0xfbdffc[_0x4ad9b0(0x1b1)])+0x1,await _0xfbdffc[_0x4ad9b0(0x139)](),_0x1c595d['products']=parseInt(_0x1c595d[_0x4ad9b0(0x1b1)])+0x1,await _0x1c595d[_0x4ad9b0(0x139)](),_0x30dd59[_0x4ad9b0(0x194)](_0x4ad9b0(0x13f),_0xfd8568+_0x4ad9b0(0x192));}else{console[_0x4ad9b0(0x180)](_0x240724[0x0]);const _0x472fb7=_0x240724[0x0];_0x472fb7['category']=_0x400e80[_0x4ad9b0(0x168)],_0x472fb7['brand']=_0xfbdffc[_0x4ad9b0(0x168)],_0x472fb7[_0x4ad9b0(0x19f)]=_0x1c595d[_0x4ad9b0(0x168)],_0x472fb7[_0x4ad9b0(0x1a2)]=_0x29ef69,_0x472fb7[_0x4ad9b0(0x134)]=_0x5ed480,_0x472fb7[_0x4ad9b0(0x1f0)]=_0x1c595d[_0x4ad9b0(0x1f0)],_0x472fb7['primary_code']=_0x15113c,_0x472fb7[_0x4ad9b0(0x15e)]=_0x1bf3d3,_0x472fb7[_0x4ad9b0(0x195)]=_0x2dd6f9,_0x472fb7[_0x4ad9b0(0x18e)]=_0x6664df,_0x472fb7['product_category']=_0xaed136;const _0x2c2f34=await _0x472fb7[_0x4ad9b0(0x139)]();_0x30dd59[_0x4ad9b0(0x194)](_0x4ad9b0(0x13f),_0x2c2f34['name']+_0x4ad9b0(0x1b8));}}catch(_0x131002){_0x500159[_0x4ad9b0(0x18d)](0x1f4)['json']({'proderror':_0x131002[_0x4ad9b0(0x138)],'aproduct':_0xfd8568});}}_0x500159[_0x4ad9b0(0x1be)](_0x4ad9b0(0x1c7));}),router[a0_0x5ed9a7(0x145)](a0_0x5ed9a7(0x135),auth,async(_0x450cb7,_0x2c13ce)=>{const _0x26fd22=a0_0x5ed9a7;try{console[_0x26fd22(0x180)](_0x450cb7[_0x26fd22(0x149)]);const {data_cateory:_0xeb35dc,datachoose:_0x2c1a94}=_0x450cb7[_0x26fd22(0x149)];var _0x29180e;if(_0x2c1a94==_0x26fd22(0x1e7))_0x29180e=await product[_0x26fd22(0x1a3)]([{'$group':{'_id':_0x26fd22(0x1e4)}}]);else{if(_0x2c1a94==_0x26fd22(0x1ac))_0x29180e=await product['aggregate']([{'$match':{'product_category':_0xeb35dc}},{'$group':{'_id':'$brand'}}]);else _0x2c1a94==_0x26fd22(0x1bb)&&(_0x29180e=await product['aggregate']([{'$match':{'product_category':_0xeb35dc}},{'$group':{'_id':_0x26fd22(0x17c)}}]));}_0x2c13ce[_0x26fd22(0x164)](_0x29180e);}catch(_0xd91469){_0x2c13ce[_0x26fd22(0x164)]({'message':_0xd91469[_0x26fd22(0x138)]});}}),router[a0_0x5ed9a7(0x145)](a0_0x5ed9a7(0x183),auth,async(_0x5bb4d4,_0x3f0fcd)=>{const _0x2b1d57=a0_0x5ed9a7;try{const {data_choosing:_0x449e2f,data_selected:_0x2ebb96}=_0x5bb4d4[_0x2b1d57(0x149)];var _0x3c6e63;if(_0x449e2f==_0x2b1d57(0x1e7))_0x3c6e63=await product['aggregate']([{'$match':{'product_category':_0x2ebb96}}]);else{if(_0x449e2f==_0x2b1d57(0x1ac))_0x3c6e63=await product['aggregate']([{'$match':{'brand':_0x2ebb96}}]);else _0x449e2f==_0x2b1d57(0x1bb)&&(_0x3c6e63=await product['aggregate']([{'$match':{'category':_0x2ebb96}}]));}_0x3f0fcd[_0x2b1d57(0x164)](_0x3c6e63);}catch(_0xa4a0fe){_0x3f0fcd[_0x2b1d57(0x164)]({'message':_0xa4a0fe[_0x2b1d57(0x138)]});}}),router[a0_0x5ed9a7(0x1f6)](a0_0x5ed9a7(0x1c4),auth,async(_0x4b81b3,_0x327862)=>{const _0x3e2c4c=a0_0x5ed9a7,_0x19f3d7=_0x4b81b3[_0x3e2c4c(0x1cd)],_0x225ebd=await profile[_0x3e2c4c(0x1a8)]({'email':_0x19f3d7[_0x3e2c4c(0x159)]}),_0x506457=await master_shop[_0x3e2c4c(0x1d3)](),_0x5147ce=await product['find']();if(_0x506457[0x0][_0x3e2c4c(0x1a5)]==_0x3e2c4c(0x155))var _0x347d18=users['English'];else{if(_0x506457[0x0][_0x3e2c4c(0x1a5)]==_0x3e2c4c(0x1fa))var _0x347d18=users[_0x3e2c4c(0x1fa)];else{if(_0x506457[0x0][_0x3e2c4c(0x1a5)]==_0x3e2c4c(0x166))var _0x347d18=users[_0x3e2c4c(0x166)];else{if(_0x506457[0x0][_0x3e2c4c(0x1a5)]=='Spanish')var _0x347d18=users[_0x3e2c4c(0x17a)];else{if(_0x506457[0x0][_0x3e2c4c(0x1a5)]==_0x3e2c4c(0x1af))var _0x347d18=users[_0x3e2c4c(0x1af)];else{if(_0x506457[0x0]['language']==_0x3e2c4c(0x16c))var _0x347d18=users[_0x3e2c4c(0x1ae)];else{if(_0x506457[0x0][_0x3e2c4c(0x1a5)]==_0x3e2c4c(0x1a1))var _0x347d18=users[_0x3e2c4c(0x1a1)];else{if(_0x506457[0x0][_0x3e2c4c(0x1a5)]==_0x3e2c4c(0x1f1))var _0x347d18=users[_0x3e2c4c(0x1d6)];}}}}}}}_0x327862[_0x3e2c4c(0x158)]('product_barcode_products',{'success':_0x4b81b3[_0x3e2c4c(0x194)](_0x3e2c4c(0x13f)),'errors':_0x4b81b3[_0x3e2c4c(0x194)](_0x3e2c4c(0x1b3)),'role':_0x19f3d7,'profile':_0x225ebd,'products':_0x5147ce,'master_shop':_0x506457,'language':_0x347d18});}),router[a0_0x5ed9a7(0x145)]('/barcode_data',auth,async(_0xaad447,_0x3b3a7b)=>{const _0x5f09bb=a0_0x5ed9a7,_0x53308a=await product[_0x5f09bb(0x1d3)]();_0x3b3a7b[_0x5f09bb(0x164)]({'data':_0x53308a});}),router[a0_0x5ed9a7(0x145)](a0_0x5ed9a7(0x16b),auth,async(_0x1674bb,_0x3e94e2)=>{const _0x4024cb=a0_0x5ed9a7;try{const {dataProdCat:_0x3037c6,dataProdIdentity:_0x1cf5f2}=_0x1674bb['body'];var _0x5a3eaf;switch(_0x3037c6){case'fg':switch(_0x1cf5f2){case _0x4024cb(0x175):_0x5a3eaf=await product[_0x4024cb(0x1a3)]([{'$match':{'product_category':_0x4024cb(0x14d)}},{'$group':{'_id':_0x4024cb(0x160)}},{'$project':{'brand':_0x4024cb(0x181)}}]);break;case _0x4024cb(0x1cc):_0x5a3eaf=await product[_0x4024cb(0x1a3)]([{'$match':{'product_category':_0x4024cb(0x14d)}},{'$group':{'_id':_0x4024cb(0x17c)}},{'$project':{'category':_0x4024cb(0x181)}}]);break;}break;case'rm':switch(_0x1cf5f2){case _0x4024cb(0x175):_0x5a3eaf=await product[_0x4024cb(0x1a3)]([{'$match':{'product_category':_0x4024cb(0x193)}},{'$group':{'_id':_0x4024cb(0x160)}},{'$project':{'brand':_0x4024cb(0x181)}}]);break;case _0x4024cb(0x1cc):_0x5a3eaf=await product[_0x4024cb(0x1a3)]([{'$match':{'product_category':_0x4024cb(0x193)}},{'$group':{'_id':_0x4024cb(0x17c)}},{'$project':{'category':_0x4024cb(0x181)}}]);break;}break;}_0x3e94e2[_0x4024cb(0x164)](_0x5a3eaf);}catch(_0x3d3b91){_0x3e94e2[_0x4024cb(0x164)]({'message':_0x3d3b91[_0x4024cb(0x138)]});}}),router['post'](a0_0x5ed9a7(0x1a7),auth,async(_0x52af8f,_0x4fb8ba)=>{const _0x548637=a0_0x5ed9a7;try{console[_0x548637(0x180)](_0x52af8f[_0x548637(0x149)]);const {prod_cat:_0x43a499,identity:_0x4c3276,valueData:_0x35ad1b,typeofbarcode:_0x4b9415}=_0x52af8f['body'];let _0x4b6bfa;switch(_0x43a499){case'fg':if(_0x4c3276==_0x548637(0x175))_0x4b6bfa=await product[_0x548637(0x1a3)]([{'$match':{'product_category':_0x548637(0x14d),'brand':_0x35ad1b}}]);else _0x4c3276==_0x548637(0x1cc)&&(_0x4b6bfa=await product['aggregate']([{'$match':{'product_category':_0x548637(0x14d),'category':_0x35ad1b}}]));break;case'rm':if(_0x4c3276==_0x548637(0x175))_0x4b6bfa=await product['aggregate']([{'$match':{'product_category':_0x548637(0x193),'brand':_0x35ad1b}}]);else _0x4c3276=='Category'&&(_0x4b6bfa=await product[_0x548637(0x1a3)]([{'$match':{'product_category':_0x548637(0x193),'category':_0x35ad1b}}]));break;}const _0x5b63b0=_0x58c460=>_0x58c460*0x48,_0x35613f={'width':0x3,'height':0x1},_0x389839=new PDFDocument({'margin':_0x5b63b0(0.75),'size':[_0x5b63b0(_0x35613f[_0x548637(0x141)]),_0x5b63b0(_0x35613f[_0x548637(0x147)])],'bufferPages':!![]}),_0x448b20=_0x4b6bfa[_0x548637(0x1b5)];for(let _0x2bdf1e=0x0;_0x2bdf1e<=_0x448b20;_0x2bdf1e++){if(_0x2bdf1e!=_0x448b20){const _0x26e2f1=_0x4b6bfa[_0x2bdf1e][_0x548637(0x168)],_0x28e72c=_0x4b6bfa[_0x2bdf1e][_0x548637(0x1e5)],_0x1e93d0=_0x4b6bfa[_0x2bdf1e][_0x548637(0x15e)],_0x211d6d=_0x4b6bfa[_0x2bdf1e]['product_code'];var _0x424246;switch(_0x4b9415){case'1':_0x424246=_0x28e72c;break;case'2':_0x424246=_0x1e93d0;break;case'3':_0x424246=_0x211d6d;break;}const _0xf13b46={'width':0xd2,'height':0x64},_0x233620={'width':_0x5b63b0(_0x35613f['width']),'height':_0x5b63b0(_0x35613f[_0x548637(0x147)])},_0x77aa7d=new Canvas();JsBarcode(_0x77aa7d,_0x424246,{'format':_0x548637(0x1c3),'height':_0xf13b46[_0x548637(0x147)],'displayValue':!![],'text':_0x424246});const _0x379efd=_0x77aa7d[_0x548637(0x1d5)](),_0x26f00f=_0x233620[_0x548637(0x141)]/_0xf13b46['width'],_0x38b05c=_0x233620['height']/_0xf13b46[_0x548637(0x147)],_0x59db01=Math[_0x548637(0x18f)](_0x26f00f,_0x38b05c),_0x160ad3=_0xf13b46['width']*_0x59db01,_0x383f0d=_0xf13b46[_0x548637(0x147)]*_0x59db01,_0x48c7e1=(_0x233620[_0x548637(0x141)]-_0x160ad3)/0x2,_0x3448e0=(_0x233620[_0x548637(0x147)]-_0x383f0d)/0x2;_0x389839[_0x548637(0x182)](_0x379efd,_0x48c7e1,_0x3448e0,{'width':_0x160ad3,'height':_0x383f0d}),_0x2bdf1e!=_0x448b20&&_0x389839[_0x548637(0x1ea)]();}}const _0x3630b4=[];_0x389839['on'](_0x548637(0x165),_0x3630b4[_0x548637(0x142)][_0x548637(0x153)](_0x3630b4)),_0x389839['on']('end',()=>{const _0x1d439a=_0x548637,_0x312178=Buffer[_0x1d439a(0x14a)](_0x3630b4),_0x273fad=_0x312178[_0x1d439a(0x1bd)](_0x1d439a(0x1b6));_0x4fb8ba[_0x1d439a(0x164)]({'pdfContent':_0x273fad});}),_0x389839[_0x548637(0x1e9)]();}catch(_0x587239){_0x4fb8ba[_0x548637(0x164)]({'message':_0x587239[_0x548637(0x138)]});}}),router['post'](a0_0x5ed9a7(0x1e6),auth,async(_0x5d66a4,_0x3cb7b4)=>{const _0x5c1209=a0_0x5ed9a7;try{console['log'](_0x5d66a4[_0x5c1209(0x149)]);const {prod_cat:_0xd61e92,identity:_0x5b57e8,valueData:_0x129e06}=_0x5d66a4[_0x5c1209(0x149)];let _0x3919e2;switch(_0xd61e92){case'fg':if(_0x5b57e8==_0x5c1209(0x175))_0x3919e2=await product[_0x5c1209(0x1a3)]([{'$match':{'product_category':_0x5c1209(0x14d),'brand':_0x129e06}}]);else _0x5b57e8==_0x5c1209(0x1cc)&&(_0x3919e2=await product[_0x5c1209(0x1a3)]([{'$match':{'product_category':_0x5c1209(0x14d),'category':_0x129e06}}]));break;case'rm':if(_0x5b57e8=='Brands')_0x3919e2=await product[_0x5c1209(0x1a3)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x129e06}}]);else _0x5b57e8==_0x5c1209(0x1cc)&&(_0x3919e2=await product[_0x5c1209(0x1a3)]([{'$match':{'product_category':_0x5c1209(0x193),'category':_0x129e06}}]));break;}_0x3cb7b4['json']({'data':_0x3919e2});}catch(_0x4aea57){_0x3cb7b4[_0x5c1209(0x164)]({'message':_0x4aea57[_0x5c1209(0x138)]});}}),router['post'](a0_0x5ed9a7(0x16d),auth,async(_0x2be935,_0x207025)=>{const _0x31ae77=a0_0x5ed9a7;try{const _0x3b1c83=_0x2be935[_0x31ae77(0x177)]['id'],{copies:_0x526262,typeofbarcode:_0xd7aa14}=_0x2be935[_0x31ae77(0x149)];var _0x2c66ac=await product['findById'](_0x3b1c83);const _0x59176e=_0xb61fdd=>_0xb61fdd*0x48,_0x691b84={'width':0x3,'height':0x1},_0x1cda9a=new PDFDocument({'margin':_0x59176e(0.75),'size':[_0x59176e(_0x691b84[_0x31ae77(0x141)]),_0x59176e(_0x691b84['height'])],'bufferPages':!![]}),_0x43778e=_0x526262,_0x101ccd=_0x2c66ac[_0x31ae77(0x168)],_0x24e1e8=_0x2c66ac[_0x31ae77(0x1e5)],_0x414443=_0x2c66ac[_0x31ae77(0x15e)],_0x3ec067=_0x2c66ac['product_code'];let _0xbc3fc7;switch(_0xd7aa14){case'1':_0xbc3fc7=_0x24e1e8;break;case'2':_0xbc3fc7=_0x414443;break;case'3':_0xbc3fc7=_0x3ec067;break;}const _0x256a96={'width':0xd2,'height':0x64},_0x47dec8={'width':_0x59176e(_0x691b84['width']),'height':_0x59176e(_0x691b84[_0x31ae77(0x147)])};for(let _0x222090=0x1;_0x222090<=_0x43778e;_0x222090++){const _0x20f8b2=new Canvas();JsBarcode(_0x20f8b2,_0xbc3fc7,{'format':_0x31ae77(0x1c3),'height':_0x256a96['height'],'displayValue':!![],'text':_0xbc3fc7});const _0x46d8dc=_0x20f8b2['toBuffer'](),_0x2ec921=_0x47dec8[_0x31ae77(0x141)]/_0x256a96[_0x31ae77(0x141)],_0x20d47b=_0x47dec8[_0x31ae77(0x147)]/_0x256a96[_0x31ae77(0x147)],_0x56fc9c=Math[_0x31ae77(0x18f)](_0x2ec921,_0x20d47b),_0x129767=_0x256a96[_0x31ae77(0x141)]*_0x56fc9c,_0x2dbbba=_0x256a96[_0x31ae77(0x147)]*_0x56fc9c,_0x1de275=(_0x47dec8[_0x31ae77(0x141)]-_0x129767)/0x2,_0x2541f6=(_0x47dec8[_0x31ae77(0x147)]-_0x2dbbba)/0x2;_0x1cda9a[_0x31ae77(0x182)](_0x46d8dc,_0x1de275,_0x2541f6,{'width':_0x129767,'height':_0x2dbbba}),_0x222090!=_0x43778e&&_0x1cda9a[_0x31ae77(0x1ea)]();}const _0x2eaadd=[];_0x1cda9a['on']('data',_0x2eaadd[_0x31ae77(0x142)][_0x31ae77(0x153)](_0x2eaadd)),_0x1cda9a['on'](_0x31ae77(0x1e9),()=>{const _0x1ef1e8=_0x31ae77,_0x2d1605=Buffer[_0x1ef1e8(0x14a)](_0x2eaadd),_0x40b9ce=_0x2d1605[_0x1ef1e8(0x1bd)](_0x1ef1e8(0x1b6));_0x207025[_0x1ef1e8(0x164)]({'pdfContent':_0x40b9ce});}),_0x1cda9a[_0x31ae77(0x1e9)]();}catch(_0x36c07f){_0x207025[_0x31ae77(0x164)]({'message':_0x36c07f[_0x31ae77(0x138)]});}}),module[a0_0x5ed9a7(0x19e)]=router;