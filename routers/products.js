function a0_0x1aff(_0x42ee89,_0x3bc89b){const _0x5bc79d=a0_0x5bc7();return a0_0x1aff=function(_0x1affec,_0x15dd80){_0x1affec=_0x1affec-0x124;let _0x676b29=_0x5bc79d[_0x1affec];return _0x676b29;},a0_0x1aff(_0x42ee89,_0x3bc89b);}const a0_0x391103=a0_0x1aff;(function(_0x494bb9,_0x546304){const _0x316c02=a0_0x1aff,_0x550923=_0x494bb9();while(!![]){try{const _0x118e26=-parseInt(_0x316c02(0x15f))/0x1*(parseInt(_0x316c02(0x139))/0x2)+-parseInt(_0x316c02(0x1a3))/0x3+-parseInt(_0x316c02(0x180))/0x4+parseInt(_0x316c02(0x1c7))/0x5*(parseInt(_0x316c02(0x175))/0x6)+-parseInt(_0x316c02(0x136))/0x7*(parseInt(_0x316c02(0x127))/0x8)+parseInt(_0x316c02(0x1c2))/0x9+parseInt(_0x316c02(0x166))/0xa;if(_0x118e26===_0x546304)break;else _0x550923['push'](_0x550923['shift']());}catch(_0x17e8d6){_0x550923['push'](_0x550923['shift']());}}}(a0_0x5bc7,0xa7eec));function a0_0x5bc7(){const _0x30870c=['add_product','utils','then','originalname','/filter_product','PAlQty','\x20<>\x20','French','image','Alert_QTY','map','product_stock','Chinese','findById','products','Arabic\x20(ae)','findByIdAndUpdate','/view/:id','barcode\x20user_id','\x20Edit\x20Successfully','data','product_docs','Arabic','json','Prod_Cat','/print_barcode_single/:id','secondary_code','length','_id','Portuguese\x20(BR)','992sAjRWD','pdfkit-table','xlsx','multer','brand\x20data\x20delete\x20successfully','migrate_product_fule','end','toString','/units/delete/:id','params','Brands','stock','edit\x20Product\x20master','/products_import_migrate_file','$brand','15568LGJKBp','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','sku','42PQOjvg','redirect','/products/units','PBrands','sheet_to_json','secondary_unit','Sheets','/brands/:id','ProductCode','PUnits','master','filename','/brands/delete/:id','\x20categories\x20is\x20add\x20successfully','status','/view/add_products','file','/select_data','$product_name','defaultProduct.avif','findOne','Router','$category','find','save','/view','PName','numeric','flash','diskStorage','Workbook','now','forEach','$product_details','/products_export_migrate_file','/products/view','$_id','log','38749MLVYAt','/barcode_data','findByIdAndDelete','product_code','Content-Type','render','prod_categ','22373600JrizPB','/brands','Portuguese','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','brand','warehouse','German','../models/all_models','exceljs','addPage','body','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','product\x20edit','\x20unit\x20is\x20add\x20successfully','categ','1636566iByKRA','product_details.product_name','Products','base64','name','$secondary_unit','Products_category','attachment;\x20filename=Product_Migration_File.xlsx','Primary_Code','category','alertquantity','4886876hbTrZv','maxProdPerUnit','../middleware/auth','width','/categories/delete/:id','Units','maxStocks','aggregate','send','public/Migration/','$product_details.product_stock','post','categories\x20data\x20delete\x20successfully','columns','Hindi','Products\x20warehouse_data','height','setHeader','express/lib/response','Enabled','Secondary_Code','success','concat','max_number_per_units','CODE128','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','message','express','long','product_category','English','units','single','write','unit','2141145geeUvk','/products/categories','bind','categories','/print_barcode_filter/','get','Products\x20master','$product_stock','public/upload','Product_Name','/print_barcode','English\x20(US)','language','sales_category','readFile','edit_product','min','/categories','../public/language/languages.json','user','type_products','/print_barcode_filter_search/','Maximum_Stocks','errors','email','push','Product_Code','toBuffer','SheetNames','Finished\x20Goods','Secondary_Units','10824030fOzhsb','primary_code','Products\x20find_data','product\x20update\x20successfully','Raw\x20Materials','5DYQaWQ','brands','Spanish','/units/:id','Category','product_barcode_products','exports','barcode\x20Product\x20master','product\x20add\x20successfully','$product_docs','public/Migration'];a0_0x5bc7=function(){return _0x30870c;};return a0_0x5bc7();}const express=require(a0_0x391103(0x19b)),res=require(a0_0x391103(0x192)),app=express(),router=express[a0_0x391103(0x14e)](),multer=require(a0_0x391103(0x12a)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x391103(0x16d)),auth=require(a0_0x391103(0x182)),users=require(a0_0x391103(0x1b5)),excelJS=require(a0_0x391103(0x16e)),xlsx=require(a0_0x391103(0x129)),JsBarcode=require('jsbarcode'),{Canvas}=require('canvas'),PDFDocument=require(a0_0x391103(0x128));router[a0_0x391103(0x1a8)](a0_0x391103(0x1b4),auth,async(_0x4d4647,_0x5f780b)=>{const _0xa73092=a0_0x391103;try{const {username:_0x26fecc,email:_0x29d43f,role:_0x70f6a0}=_0x4d4647[_0xa73092(0x1b6)],_0x210b81=_0x4d4647['user'],_0x57f450=await profile[_0xa73092(0x14d)]({'email':_0x210b81[_0xa73092(0x1bb)]}),_0x1e6d5c=await master_shop[_0xa73092(0x150)]();console[_0xa73092(0x15e)](_0xa73092(0x143),_0x1e6d5c);const _0x387e55=await categories[_0xa73092(0x150)]();if(_0x1e6d5c[0x0][_0xa73092(0x1af)]==_0xa73092(0x1ae))var _0x54646d=users[_0xa73092(0x19e)];else{if(_0x1e6d5c[0x0][_0xa73092(0x1af)]==_0xa73092(0x18e))var _0x54646d=users[_0xa73092(0x18e)];else{if(_0x1e6d5c[0x0]['language']==_0xa73092(0x16c))var _0x54646d=users[_0xa73092(0x16c)];else{if(_0x1e6d5c[0x0][_0xa73092(0x1af)]==_0xa73092(0x1c9))var _0x54646d=users[_0xa73092(0x1c9)];else{if(_0x1e6d5c[0x0][_0xa73092(0x1af)]==_0xa73092(0x1d9))var _0x54646d=users[_0xa73092(0x1d9)];else{if(_0x1e6d5c[0x0]['language']==_0xa73092(0x126))var _0x54646d=users[_0xa73092(0x168)];else{if(_0x1e6d5c[0x0][_0xa73092(0x1af)]=='Chinese')var _0x54646d=users[_0xa73092(0x1de)];else{if(_0x1e6d5c[0x0][_0xa73092(0x1af)]==_0xa73092(0x1e1))var _0x54646d=users['Arabic'];}}}}}}}_0x5f780b[_0xa73092(0x164)](_0xa73092(0x1a6),{'success':_0x4d4647['flash'](_0xa73092(0x195)),'errors':_0x4d4647['flash']('errors'),'role':_0x210b81,'profile':_0x57f450,'user':_0x387e55,'master_shop':_0x1e6d5c,'language':_0x54646d});}catch(_0x309397){console[_0xa73092(0x15e)](_0x309397);}}),router[a0_0x391103(0x18b)](a0_0x391103(0x1b4),auth,async(_0x112b73,_0x21fd98)=>{const _0x25cfb7=a0_0x391103;try{const {name:_0x38049a,products:_0x508af2}=_0x112b73[_0x25cfb7(0x170)],_0x269b1f=new categories({'name':_0x38049a,'products':_0x508af2}),_0x26221c=await categories['findOne']({'name':_0x38049a});_0x26221c?_0x112b73[_0x25cfb7(0x155)](_0x25cfb7(0x1ba),_0x38049a+_0x25cfb7(0x171)):_0x112b73[_0x25cfb7(0x155)]('success',_0x38049a+_0x25cfb7(0x146));const _0x3dec16=await _0x269b1f[_0x25cfb7(0x151)]();_0x21fd98[_0x25cfb7(0x13a)](_0x25cfb7(0x1a4));}catch(_0x515bad){console[_0x25cfb7(0x15e)](_0x515bad);}}),router['get']('/categories/:id',auth,async(_0xd10ed1,_0x25dfe0)=>{const _0x39e7e0=a0_0x391103;try{const {username:_0x504c1c,email:_0x1d6ba1,role:_0x3547de}=_0xd10ed1[_0x39e7e0(0x1b6)],_0x4f201c=_0xd10ed1['user'],_0x305ec0=await profile[_0x39e7e0(0x14d)]({'email':_0x4f201c[_0x39e7e0(0x1bb)]}),_0x5ef533=await master_shop[_0x39e7e0(0x150)]();console[_0x39e7e0(0x15e)](_0x39e7e0(0x143),_0x5ef533);const _0x427d1f=_0xd10ed1['params']['id'];console[_0x39e7e0(0x15e)](_0x427d1f);const _0x5124d8=await categories[_0x39e7e0(0x1df)](_0x427d1f);if(_0x5ef533[0x0][_0x39e7e0(0x1af)]=='English\x20(US)')var _0x591a2e=users['English'];else{if(_0x5ef533[0x0]['language']==_0x39e7e0(0x18e))var _0x591a2e=users[_0x39e7e0(0x18e)];else{if(_0x5ef533[0x0][_0x39e7e0(0x1af)]==_0x39e7e0(0x16c))var _0x591a2e=users['German'];else{if(_0x5ef533[0x0]['language']==_0x39e7e0(0x1c9))var _0x591a2e=users[_0x39e7e0(0x1c9)];else{if(_0x5ef533[0x0][_0x39e7e0(0x1af)]==_0x39e7e0(0x1d9))var _0x591a2e=users[_0x39e7e0(0x1d9)];else{if(_0x5ef533[0x0][_0x39e7e0(0x1af)]=='Portuguese\x20(BR)')var _0x591a2e=users['Portuguese'];else{if(_0x5ef533[0x0][_0x39e7e0(0x1af)]==_0x39e7e0(0x1de))var _0x591a2e=users['Chinese'];else{if(_0x5ef533[0x0]['language']==_0x39e7e0(0x1e1))var _0x591a2e=users['Arabic'];}}}}}}}_0x25dfe0[_0x39e7e0(0x164)](_0x39e7e0(0x1a6),{'success':_0xd10ed1['flash'](_0x39e7e0(0x195)),'errors':_0xd10ed1['flash'](_0x39e7e0(0x1ba)),'role':_0x4f201c,'profile':_0x305ec0,'master_shop':_0x5ef533,'user':_0x5124d8,'language':_0x591a2e});}catch(_0x3a0e99){console[_0x39e7e0(0x15e)](_0x3a0e99);}}),router[a0_0x391103(0x18b)]('/categories/:id',auth,async(_0x345dbc,_0x12492f)=>{const _0x2e2650=a0_0x391103;try{const _0x40e7b3=_0x345dbc[_0x2e2650(0x130)]['id'],_0x58bd00=await categories[_0x2e2650(0x1e2)](_0x40e7b3,_0x345dbc['body']);_0x345dbc['flash'](_0x2e2650(0x195),''+users['categories_edit']),_0x12492f[_0x2e2650(0x13a)](_0x2e2650(0x1a4));}catch(_0x253951){console['log'](_0x253951);}}),router[a0_0x391103(0x1a8)](a0_0x391103(0x184),auth,async(_0x417bdb,_0x174c01)=>{const _0x1a8e4b=a0_0x391103;try{const _0x42b2f=_0x417bdb[_0x1a8e4b(0x130)]['id'],_0x4d8a60=await categories[_0x1a8e4b(0x161)](_0x42b2f);_0x417bdb['flash'](_0x1a8e4b(0x195),_0x1a8e4b(0x18c)),_0x174c01[_0x1a8e4b(0x13a)](_0x1a8e4b(0x1a4));}catch(_0x504697){console['log'](_0x504697);}}),router[a0_0x391103(0x1a8)](a0_0x391103(0x167),auth,async(_0x4c5bb1,_0x2b3632)=>{const _0x4a3476=a0_0x391103;try{const {username:_0x4c6a1d,email:_0x397e0b,role:_0x2a3968}=_0x4c5bb1['user'],_0x206241=_0x4c5bb1[_0x4a3476(0x1b6)],_0x5ea254=await profile[_0x4a3476(0x14d)]({'email':_0x206241[_0x4a3476(0x1bb)]}),_0x9f9f42=await master_shop[_0x4a3476(0x150)]();console[_0x4a3476(0x15e)]('master',_0x9f9f42);const _0xdec12f=await brands[_0x4a3476(0x150)]();if(_0x9f9f42[0x0][_0x4a3476(0x1af)]==_0x4a3476(0x1ae))var _0x376a32=users[_0x4a3476(0x19e)];else{if(_0x9f9f42[0x0][_0x4a3476(0x1af)]==_0x4a3476(0x18e))var _0x376a32=users['Hindi'];else{if(_0x9f9f42[0x0][_0x4a3476(0x1af)]=='German')var _0x376a32=users['German'];else{if(_0x9f9f42[0x0][_0x4a3476(0x1af)]==_0x4a3476(0x1c9))var _0x376a32=users[_0x4a3476(0x1c9)];else{if(_0x9f9f42[0x0]['language']=='French')var _0x376a32=users['French'];else{if(_0x9f9f42[0x0][_0x4a3476(0x1af)]==_0x4a3476(0x126))var _0x376a32=users[_0x4a3476(0x168)];else{if(_0x9f9f42[0x0][_0x4a3476(0x1af)]==_0x4a3476(0x1de))var _0x376a32=users[_0x4a3476(0x1de)];else{if(_0x9f9f42[0x0][_0x4a3476(0x1af)]==_0x4a3476(0x1e1))var _0x376a32=users['Arabic'];}}}}}}}_0x2b3632[_0x4a3476(0x164)](_0x4a3476(0x1c8),{'success':_0x4c5bb1[_0x4a3476(0x155)](_0x4a3476(0x195)),'errors':_0x4c5bb1[_0x4a3476(0x155)]('errors'),'role':_0x206241,'profile':_0x5ea254,'master_shop':_0x9f9f42,'user':_0xdec12f,'language':_0x376a32});}catch(_0x454ec8){console[_0x4a3476(0x15e)](_0x454ec8);}}),router[a0_0x391103(0x18b)]('/brands',auth,async(_0x409edc,_0x2f960c)=>{const _0x558d80=a0_0x391103;try{const {name:_0x3f2c93,products:_0x116433}=_0x409edc[_0x558d80(0x170)],_0x545acf=new brands({'name':_0x3f2c93,'products':_0x116433}),_0x41ab77=await brands[_0x558d80(0x14d)]({'name':_0x3f2c93});_0x41ab77?_0x409edc[_0x558d80(0x155)](_0x558d80(0x1ba),_0x3f2c93+_0x558d80(0x137)):_0x409edc[_0x558d80(0x155)](_0x558d80(0x195),_0x3f2c93+'\x20brand\x20is\x20add\x20successfully');const _0x3688d6=await _0x545acf[_0x558d80(0x151)]();_0x2f960c['redirect']('/products/brands');}catch(_0x526819){console[_0x558d80(0x15e)](_0x526819);}}),router[a0_0x391103(0x1a8)]('/brands/:id',auth,async(_0x4956f2,_0x56e7d7)=>{const _0x227ea8=a0_0x391103;try{const {username:_0xa35b4f,email:_0x7e1f7b,role:_0x33fa00}=_0x4956f2[_0x227ea8(0x1b6)],_0x26544b=_0x4956f2[_0x227ea8(0x1b6)],_0x5463f3=await profile[_0x227ea8(0x14d)]({'email':_0x26544b['email']}),_0x5921ce=await master_shop[_0x227ea8(0x150)]();console['log'](_0x227ea8(0x143),_0x5921ce);const _0xb475c9=_0x4956f2[_0x227ea8(0x130)]['id'];console[_0x227ea8(0x15e)](_0xb475c9);const _0x1d2149=await brands[_0x227ea8(0x1df)](_0xb475c9);if(_0x5921ce[0x0][_0x227ea8(0x1af)]==_0x227ea8(0x1ae))var _0x4f2590=users[_0x227ea8(0x19e)];else{if(_0x5921ce[0x0][_0x227ea8(0x1af)]=='Hindi')var _0x4f2590=users[_0x227ea8(0x18e)];else{if(_0x5921ce[0x0]['language']==_0x227ea8(0x16c))var _0x4f2590=users[_0x227ea8(0x16c)];else{if(_0x5921ce[0x0]['language']==_0x227ea8(0x1c9))var _0x4f2590=users[_0x227ea8(0x1c9)];else{if(_0x5921ce[0x0][_0x227ea8(0x1af)]==_0x227ea8(0x1d9))var _0x4f2590=users[_0x227ea8(0x1d9)];else{if(_0x5921ce[0x0][_0x227ea8(0x1af)]==_0x227ea8(0x126))var _0x4f2590=users[_0x227ea8(0x168)];else{if(_0x5921ce[0x0][_0x227ea8(0x1af)]==_0x227ea8(0x1de))var _0x4f2590=users['Chinese'];else{if(_0x5921ce[0x0]['language']==_0x227ea8(0x1e1))var _0x4f2590=users[_0x227ea8(0x1e8)];}}}}}}}_0x56e7d7['render'](_0x227ea8(0x1c8),{'success':_0x4956f2['flash']('success'),'errors':_0x4956f2[_0x227ea8(0x155)]('errors'),'role':_0x26544b,'profile':_0x5463f3,'master_shop':_0x5921ce,'user':_0x1d2149,'language':_0x4f2590});}catch(_0x4175ee){console[_0x227ea8(0x15e)](_0x4175ee);}}),router[a0_0x391103(0x18b)](a0_0x391103(0x140),auth,async(_0xe9f368,_0x208135)=>{const _0x4294dc=a0_0x391103;try{const _0x48c2ff=_0xe9f368[_0x4294dc(0x130)]['id'],_0x368510=await brands[_0x4294dc(0x1e2)](_0x48c2ff,_0xe9f368[_0x4294dc(0x170)]);_0xe9f368[_0x4294dc(0x155)]('success','brand\x20data\x20update\x20successfully'),_0x208135[_0x4294dc(0x13a)]('/products/brands');}catch(_0x361cd9){console['log'](_0x361cd9);}}),router[a0_0x391103(0x1a8)](a0_0x391103(0x145),auth,async(_0x5bb15e,_0x32dfa7)=>{const _0x5c39dc=a0_0x391103;try{const _0x2a62b7=_0x5bb15e[_0x5c39dc(0x130)]['id'],_0x1bea07=await brands[_0x5c39dc(0x161)](_0x2a62b7);_0x5bb15e[_0x5c39dc(0x155)](_0x5c39dc(0x195),_0x5c39dc(0x12b)),_0x32dfa7[_0x5c39dc(0x13a)]('/products/brands');}catch(_0xa1f479){console['log'](_0xa1f479);}}),router[a0_0x391103(0x1a8)]('/units',auth,async(_0x3cbcc0,_0x4bc2c8)=>{const _0x3e5f16=a0_0x391103;try{const {username:_0x54926e,email:_0x16f4f9,role:_0x583ef9}=_0x3cbcc0[_0x3e5f16(0x1b6)],_0x4aaf33=_0x3cbcc0[_0x3e5f16(0x1b6)],_0x165b96=await profile[_0x3e5f16(0x14d)]({'email':_0x4aaf33['email']}),_0x28f435=await master_shop[_0x3e5f16(0x150)]();console[_0x3e5f16(0x15e)](_0x3e5f16(0x143),_0x28f435);const _0x52d456=await units['find']();if(_0x28f435[0x0][_0x3e5f16(0x1af)]=='English\x20(US)')var _0x2422ed=users[_0x3e5f16(0x19e)];else{if(_0x28f435[0x0]['language']=='Hindi')var _0x2422ed=users[_0x3e5f16(0x18e)];else{if(_0x28f435[0x0][_0x3e5f16(0x1af)]==_0x3e5f16(0x16c))var _0x2422ed=users[_0x3e5f16(0x16c)];else{if(_0x28f435[0x0]['language']=='Spanish')var _0x2422ed=users[_0x3e5f16(0x1c9)];else{if(_0x28f435[0x0][_0x3e5f16(0x1af)]==_0x3e5f16(0x1d9))var _0x2422ed=users[_0x3e5f16(0x1d9)];else{if(_0x28f435[0x0][_0x3e5f16(0x1af)]==_0x3e5f16(0x126))var _0x2422ed=users[_0x3e5f16(0x168)];else{if(_0x28f435[0x0][_0x3e5f16(0x1af)]==_0x3e5f16(0x1de))var _0x2422ed=users['Chinese'];else{if(_0x28f435[0x0][_0x3e5f16(0x1af)]==_0x3e5f16(0x1e1))var _0x2422ed=users['Arabic'];}}}}}}}_0x4bc2c8[_0x3e5f16(0x164)](_0x3e5f16(0x19f),{'success':_0x3cbcc0[_0x3e5f16(0x155)](_0x3e5f16(0x195)),'errors':_0x3cbcc0[_0x3e5f16(0x155)](_0x3e5f16(0x1ba)),'role':_0x4aaf33,'profile':_0x165b96,'master_shop':_0x28f435,'user':_0x52d456,'language':_0x2422ed});}catch(_0x44a2cc){console[_0x3e5f16(0x15e)](_0x44a2cc);}}),router['post']('/units',auth,async(_0x26f7e9,_0x87dfab)=>{const _0x2247d4=a0_0x391103;try{const {name:_0x172683,secondary_unit:_0x1dc53f,products:_0x5b84d3}=_0x26f7e9[_0x2247d4(0x170)],_0x49f750=new units({'name':_0x172683,'secondary_unit':_0x1dc53f,'products':_0x5b84d3}),_0x30030a=await units[_0x2247d4(0x14d)]({'name':_0x172683});_0x30030a?_0x26f7e9['flash'](_0x2247d4(0x1ba),_0x172683+_0x2247d4(0x169)):_0x26f7e9['flash'](_0x2247d4(0x195),_0x172683+_0x2247d4(0x173));const _0x332ffb=await _0x49f750[_0x2247d4(0x151)]();_0x87dfab[_0x2247d4(0x13a)](_0x2247d4(0x13b));}catch(_0x1b509a){console[_0x2247d4(0x15e)](_0x1b509a);}}),router[a0_0x391103(0x1a8)](a0_0x391103(0x1ca),auth,async(_0x3d1704,_0x395d86)=>{const _0x14afa2=a0_0x391103;try{const {username:_0x40b981,email:_0x104eed,role:_0x453d2f}=_0x3d1704[_0x14afa2(0x1b6)],_0x209aee=_0x3d1704[_0x14afa2(0x1b6)],_0x402142=await profile['findOne']({'email':_0x209aee['email']}),_0x42add6=await master_shop[_0x14afa2(0x150)]();console[_0x14afa2(0x15e)](_0x14afa2(0x143),_0x42add6);const _0x1e00ad=_0x3d1704[_0x14afa2(0x130)]['id'],_0x5b1d5b=await units[_0x14afa2(0x1df)](_0x1e00ad);if(_0x42add6[0x0][_0x14afa2(0x1af)]==_0x14afa2(0x1ae))var _0x562f9c=users[_0x14afa2(0x19e)];else{if(_0x42add6[0x0][_0x14afa2(0x1af)]==_0x14afa2(0x18e))var _0x562f9c=users[_0x14afa2(0x18e)];else{if(_0x42add6[0x0][_0x14afa2(0x1af)]==_0x14afa2(0x16c))var _0x562f9c=users[_0x14afa2(0x16c)];else{if(_0x42add6[0x0]['language']==_0x14afa2(0x1c9))var _0x562f9c=users['Spanish'];else{if(_0x42add6[0x0][_0x14afa2(0x1af)]==_0x14afa2(0x1d9))var _0x562f9c=users['French'];else{if(_0x42add6[0x0][_0x14afa2(0x1af)]=='Portuguese\x20(BR)')var _0x562f9c=users['Portuguese'];else{if(_0x42add6[0x0]['language']==_0x14afa2(0x1de))var _0x562f9c=users[_0x14afa2(0x1de)];else{if(_0x42add6[0x0][_0x14afa2(0x1af)]=='Arabic\x20(ae)')var _0x562f9c=users[_0x14afa2(0x1e8)];}}}}}}}_0x395d86[_0x14afa2(0x164)]('units',{'success':_0x3d1704['flash'](_0x14afa2(0x195)),'errors':_0x3d1704[_0x14afa2(0x155)]('errors'),'role':_0x209aee,'profile':_0x402142,'master_shop':_0x42add6,'user':_0x5b1d5b,'language':_0x562f9c});}catch(_0x496bbb){console[_0x14afa2(0x15e)](_0x496bbb);}}),router[a0_0x391103(0x18b)](a0_0x391103(0x1ca),auth,async(_0x4ae0c9,_0x42aaa9)=>{const _0x395439=a0_0x391103;try{const _0xa7d1cb=_0x4ae0c9[_0x395439(0x130)]['id'],_0x5750b6=await units[_0x395439(0x1e2)](_0xa7d1cb,_0x4ae0c9[_0x395439(0x170)]);_0x4ae0c9[_0x395439(0x155)](_0x395439(0x195),'unit\x20data\x20update\x20successfully'),_0x42aaa9[_0x395439(0x13a)](_0x395439(0x13b));}catch(_0x21ee5a){console[_0x395439(0x15e)](_0x21ee5a);}}),router[a0_0x391103(0x1a8)](a0_0x391103(0x12f),auth,async(_0x6d2855,_0x4504b3)=>{const _0x2d37d5=a0_0x391103;try{const _0x2b0967=_0x6d2855[_0x2d37d5(0x130)]['id'],_0xac7b53=await units[_0x2d37d5(0x161)](_0x2b0967);_0x6d2855['flash'](_0x2d37d5(0x195),'unit\x20data\x20delete\x20successfully'),_0x4504b3['redirect']('/products/units');}catch(_0x4b457c){console[_0x2d37d5(0x15e)](_0x4b457c);}});const storage=multer[a0_0x391103(0x156)]({'destination':(_0x1dda4b,_0xa0c019,_0x29c570)=>{const _0x4d8279=a0_0x391103;_0x29c570(null,_0x4d8279(0x1ab));},'filename':(_0x3de4f5,_0x1ee8e6,_0x20b31e)=>{const _0x508127=a0_0x391103;_0x20b31e(null,Date[_0x508127(0x158)]()+_0x1ee8e6[_0x508127(0x1d5)]);}}),upload=multer({'storage':storage});router['get'](a0_0x391103(0x152),auth,async(_0x5873d5,_0xfa0d5f)=>{const _0xf7b20b=a0_0x391103;try{const {username:_0x320c13,email:_0x556ca1,role:_0x10bf4e}=_0x5873d5[_0xf7b20b(0x1b6)],_0x423079=_0x5873d5[_0xf7b20b(0x1b6)],_0xce189d=await profile[_0xf7b20b(0x14d)]({'email':_0x423079[_0xf7b20b(0x1bb)]}),_0x2e149f={'year':_0xf7b20b(0x154),'month':_0xf7b20b(0x19c),'day':_0xf7b20b(0x154)},_0x2b5d7e=await master_shop[_0xf7b20b(0x150)]();console[_0xf7b20b(0x15e)](_0xf7b20b(0x1a9),_0x2b5d7e);const _0x20c9e8=await product[_0xf7b20b(0x150)]();console[_0xf7b20b(0x15e)](_0xf7b20b(0x1c4),_0x20c9e8);const _0x7fae6c=await warehouse[_0xf7b20b(0x187)]([{'$unwind':_0xf7b20b(0x15a)},{'$lookup':{'from':'products','localField':_0xf7b20b(0x176),'foreignField':_0xf7b20b(0x179),'as':_0xf7b20b(0x1e7)}},{'$unwind':_0xf7b20b(0x1d0)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0xf7b20b(0x18a)}},{'$group':{'_id':_0xf7b20b(0x14b),'product_stock':{'$sum':_0xf7b20b(0x1aa)}}}]);console[_0xf7b20b(0x15e)](_0xf7b20b(0x18f),_0x7fae6c),_0x7fae6c[_0xf7b20b(0x159)](_0x5a4611=>{const _0x33b01a=_0xf7b20b,_0x1fa405=_0x20c9e8[_0x33b01a(0x1dc)](_0x390d59=>{const _0x24def9=_0x33b01a;_0x390d59[_0x24def9(0x179)]==_0x5a4611[_0x24def9(0x125)]&&(_0x390d59[_0x24def9(0x132)]=parseInt(_0x390d59[_0x24def9(0x132)])+parseInt(_0x5a4611[_0x24def9(0x1dd)]));});}),console['log'](_0xf7b20b(0x1c4),_0x20c9e8);if(_0x2b5d7e[0x0][_0xf7b20b(0x1af)]=='English\x20(US)')var _0x5678ce=users[_0xf7b20b(0x19e)];else{if(_0x2b5d7e[0x0][_0xf7b20b(0x1af)]==_0xf7b20b(0x18e))var _0x5678ce=users[_0xf7b20b(0x18e)];else{if(_0x2b5d7e[0x0]['language']==_0xf7b20b(0x16c))var _0x5678ce=users['German'];else{if(_0x2b5d7e[0x0][_0xf7b20b(0x1af)]==_0xf7b20b(0x1c9))var _0x5678ce=users[_0xf7b20b(0x1c9)];else{if(_0x2b5d7e[0x0][_0xf7b20b(0x1af)]=='French')var _0x5678ce=users[_0xf7b20b(0x1d9)];else{if(_0x2b5d7e[0x0][_0xf7b20b(0x1af)]==_0xf7b20b(0x126))var _0x5678ce=users[_0xf7b20b(0x168)];else{if(_0x2b5d7e[0x0][_0xf7b20b(0x1af)]=='Chinese')var _0x5678ce=users[_0xf7b20b(0x1de)];else{if(_0x2b5d7e[0x0][_0xf7b20b(0x1af)]==_0xf7b20b(0x1e1))var _0x5678ce=users['Arabic'];}}}}}}}_0xfa0d5f['render'](_0xf7b20b(0x1e0),{'success':_0x5873d5[_0xf7b20b(0x155)]('success'),'errors':_0x5873d5[_0xf7b20b(0x155)](_0xf7b20b(0x1ba)),'alldata':_0x20c9e8,'profile':_0xce189d,'master_shop':_0x2b5d7e,'role':_0x423079,'product_stock':_0x7fae6c,'language':_0x5678ce});}catch(_0x1f7800){console[_0xf7b20b(0x15e)](_0x1f7800);}}),router[a0_0x391103(0x1a8)](a0_0x391103(0x148),auth,async(_0xfaf2c5,_0x227116)=>{const _0x207282=a0_0x391103;try{const {username:_0x1cf6cd,email:_0x49865d,role:_0x4b0810}=_0xfaf2c5['user'],_0x1eac73=_0xfaf2c5[_0x207282(0x1b6)],_0x5018d9=await profile[_0x207282(0x14d)]({'email':_0x1eac73[_0x207282(0x1bb)]}),_0x5c0368=await master_shop[_0x207282(0x150)]();console[_0x207282(0x15e)](_0x207282(0x143),_0x5c0368);const _0x3831a5=await categories[_0x207282(0x150)]({}),_0xd5cb34=await brands['find']({}),_0x5e6b35=await units['find']({}),_0x1ff758=await warehouse[_0x207282(0x150)]({'status':_0x207282(0x193)});if(_0x5c0368[0x0][_0x207282(0x1af)]=='English\x20(US)')var _0x2152aa=users['English'];else{if(_0x5c0368[0x0]['language']==_0x207282(0x18e))var _0x2152aa=users[_0x207282(0x18e)];else{if(_0x5c0368[0x0][_0x207282(0x1af)]=='German')var _0x2152aa=users[_0x207282(0x16c)];else{if(_0x5c0368[0x0]['language']==_0x207282(0x1c9))var _0x2152aa=users[_0x207282(0x1c9)];else{if(_0x5c0368[0x0]['language']==_0x207282(0x1d9))var _0x2152aa=users[_0x207282(0x1d9)];else{if(_0x5c0368[0x0][_0x207282(0x1af)]=='Portuguese\x20(BR)')var _0x2152aa=users[_0x207282(0x168)];else{if(_0x5c0368[0x0][_0x207282(0x1af)]==_0x207282(0x1de))var _0x2152aa=users['Chinese'];else{if(_0x5c0368[0x0][_0x207282(0x1af)]==_0x207282(0x1e1))var _0x2152aa=users[_0x207282(0x1e8)];}}}}}}}_0x227116['render'](_0x207282(0x1d2),{'success':_0xfaf2c5[_0x207282(0x155)](_0x207282(0x195)),'errors':_0xfaf2c5[_0x207282(0x155)](_0x207282(0x1ba)),'role':_0x1eac73,'profile':_0x5018d9,'categories':_0x3831a5,'brands':_0xd5cb34,'master_shop':_0x5c0368,'units':_0x5e6b35,'language':_0x2152aa,'find_data':_0x1ff758});}catch(_0x2ee55d){console['log'](_0x2ee55d);}}),router['post'](a0_0x391103(0x148),auth,upload[a0_0x391103(0x1a0)](a0_0x391103(0x1da)),async(_0x3e46b4,_0x26547f)=>{const _0x40b7e2=a0_0x391103;try{const {name:_0x2c039c,category:_0x15a7f0,brand:_0x15732e,unit:_0xddefa1,alertquantity:_0x13eb30,stock:_0x47df8e,product_code:_0x39a98d,warehouse:_0x2475e8,primary_ItemCode:_0xabc38d,second_ItemCode:_0x465835,second_unit:_0x2c897b,maxPerUnit:_0x573cfd,MaxPerProduct:_0x2be55f,sales_cat:_0x546cdd,type_prod:_0x56d980}=_0x3e46b4[_0x40b7e2(0x170)],_0x330a27=_0x3e46b4['file']?.['filename']||_0x40b7e2(0x14c),_0x48bb0c=new product({'image':_0x330a27,'name':_0x2c039c,'category':_0x15a7f0,'brand':_0x15732e,'unit':_0xddefa1,'alertquantity':_0x13eb30,'stock':_0x47df8e,'product_code':_0x39a98d,'warehouse':_0x2475e8,'primary_code':_0xabc38d,'secondary_code':_0x465835,'second_unit':_0x2c897b,'maxStocks':_0x2be55f,'maxProdPerUnit':_0x573cfd,'sales_category':_0x546cdd,'type_products':_0x56d980}),_0x34b304=await _0x48bb0c[_0x40b7e2(0x151)](),_0x5ee353=await categories['findOne']({'name':_0x15a7f0});_0x5ee353[_0x40b7e2(0x1e0)]=parseInt(_0x5ee353[_0x40b7e2(0x1e0)])+0x1,await _0x5ee353[_0x40b7e2(0x151)]();const _0x4619af=await brands[_0x40b7e2(0x14d)]({'name':_0x15732e});_0x4619af[_0x40b7e2(0x1e0)]=parseInt(_0x4619af[_0x40b7e2(0x1e0)])+0x1,await _0x4619af[_0x40b7e2(0x151)]();const _0x9adcc=await units[_0x40b7e2(0x14d)]({'name':_0xddefa1});_0x9adcc['products']=parseInt(_0x9adcc['products'])+0x1,await _0x9adcc['save'](),_0x3e46b4[_0x40b7e2(0x155)](_0x40b7e2(0x195),_0x40b7e2(0x1cf)),_0x26547f[_0x40b7e2(0x13a)]('/products/view');}catch(_0x5d3294){console[_0x40b7e2(0x15e)](_0x5d3294);}}),router[a0_0x391103(0x1a8)](a0_0x391103(0x1e3),auth,async(_0x3270f5,_0x4f473d)=>{const _0x30c929=a0_0x391103;try{const {username:_0x2348a6,email:_0x152470,role:_0x564b85}=_0x3270f5[_0x30c929(0x1b6)],_0x4422e0=_0x3270f5['user'],_0x20e2f9=await profile[_0x30c929(0x14d)]({'email':_0x4422e0[_0x30c929(0x1bb)]}),_0x14d9c6=await master_shop[_0x30c929(0x150)]();console[_0x30c929(0x15e)](_0x30c929(0x133),_0x14d9c6);const _0x1fcf9c=_0x3270f5[_0x30c929(0x130)]['id'],_0x2b5902=await product[_0x30c929(0x1df)](_0x1fcf9c),_0x2dbd9e=await categories[_0x30c929(0x150)]({}),_0x21896d=await brands['find']({}),_0x238610=await units[_0x30c929(0x150)]({}),_0xa61a4e=await warehouse['find']({'status':'Enabled'}),_0x58bdf4=await units[_0x30c929(0x187)]([{'$group':{'_id':_0x30c929(0x15d),'secondaryunit':{'$first':_0x30c929(0x17a)}}}]);if(_0x14d9c6[0x0][_0x30c929(0x1af)]==_0x30c929(0x1ae))var _0x39b154=users['English'];else{if(_0x14d9c6[0x0][_0x30c929(0x1af)]==_0x30c929(0x18e))var _0x39b154=users[_0x30c929(0x18e)];else{if(_0x14d9c6[0x0][_0x30c929(0x1af)]=='German')var _0x39b154=users['German'];else{if(_0x14d9c6[0x0][_0x30c929(0x1af)]=='Spanish')var _0x39b154=users[_0x30c929(0x1c9)];else{if(_0x14d9c6[0x0]['language']=='French')var _0x39b154=users[_0x30c929(0x1d9)];else{if(_0x14d9c6[0x0]['language']=='Portuguese\x20(BR)')var _0x39b154=users[_0x30c929(0x168)];else{if(_0x14d9c6[0x0][_0x30c929(0x1af)]==_0x30c929(0x1de))var _0x39b154=users['Chinese'];else{if(_0x14d9c6[0x0][_0x30c929(0x1af)]==_0x30c929(0x1e1))var _0x39b154=users[_0x30c929(0x1e8)];}}}}}}}_0x4f473d[_0x30c929(0x164)](_0x30c929(0x1b2),{'success':_0x3270f5[_0x30c929(0x155)](_0x30c929(0x195)),'errors':_0x3270f5[_0x30c929(0x155)](_0x30c929(0x1ba)),'role':_0x4422e0,'profile':_0x20e2f9,'alldata':_0x2b5902,'categories':_0x2dbd9e,'brands':_0x21896d,'master_shop':_0x14d9c6,'units':_0x238610,'secondunit':_0x58bdf4,'find_data':_0xa61a4e,'language':_0x39b154});}catch(_0x8bee47){console['log'](_0x8bee47);}}),router[a0_0x391103(0x18b)](a0_0x391103(0x1e3),auth,upload['single'](a0_0x391103(0x1da)),async(_0x16d2df,_0x12fc69)=>{const _0xe827fd=a0_0x391103;try{const _0x4d3f92=_0x16d2df[_0xe827fd(0x130)]['id'],_0x49ed94=await product['findById'](_0x4d3f92),{image:_0x43ff83,name:_0x4e05e5,category:_0x2f20f0,brand:_0x5b0ecd,sku:_0x1f8485,unit:_0x34b4e8,alertquantity:_0x271369,product_code:_0x3418fd,warehouse:_0x52eb05,primary_ItemCode:_0xb589fc,second_ItemCode:_0x16cb56,second_unit:_0x47b01d,maxPerUnit:_0x15c02d,MaxPerProduct:_0x284e27,prod_catdata:_0x5221b7,type_prod:_0x15a591,sales_cat:_0x5a7b39}=_0x16d2df[_0xe827fd(0x170)];_0x16d2df[_0xe827fd(0x149)]&&(_0x49ed94[_0xe827fd(0x1da)]=_0x16d2df[_0xe827fd(0x149)][_0xe827fd(0x144)]);_0x49ed94[_0xe827fd(0x179)]=_0x4e05e5,_0x49ed94[_0xe827fd(0x17e)]=_0x2f20f0,_0x49ed94[_0xe827fd(0x16a)]=_0x5b0ecd,_0x49ed94[_0xe827fd(0x138)]=_0x1f8485,_0x49ed94[_0xe827fd(0x1a2)]=_0x34b4e8,_0x49ed94['alertquantity']=_0x271369,_0x49ed94['product_code']=_0x3418fd,_0x49ed94[_0xe827fd(0x16b)]=_0x52eb05,_0x49ed94[_0xe827fd(0x1c3)]=_0xb589fc,_0x49ed94['secondary_code']=_0x16cb56,_0x49ed94[_0xe827fd(0x13e)]=_0x47b01d,_0x49ed94[_0xe827fd(0x186)]=_0x284e27,_0x49ed94[_0xe827fd(0x181)]=_0x15c02d,_0x49ed94[_0xe827fd(0x19d)]=_0x5221b7,_0x49ed94[_0xe827fd(0x1b7)]=_0x15a591,_0x49ed94[_0xe827fd(0x1b0)]=_0x5a7b39;const _0x175626=await _0x49ed94[_0xe827fd(0x151)]();console['log'](_0xe827fd(0x172),_0x49ed94),_0x16d2df['flash'](_0xe827fd(0x195),_0xe827fd(0x1c5)),_0x12fc69[_0xe827fd(0x13a)](_0xe827fd(0x15c));}catch(_0x550abc){console[_0xe827fd(0x15e)](_0x550abc);}}),router[a0_0x391103(0x1a8)]('/barcode/:id',auth,async(_0x117bde,_0x467828)=>{const _0x5f0271=a0_0x391103;try{const {username:_0xb5a7ca,email:_0x539504,role:_0x2081ed}=_0x117bde[_0x5f0271(0x1b6)],_0xc7c085=_0x117bde[_0x5f0271(0x1b6)],_0x394e11=await profile[_0x5f0271(0x14d)]({'email':_0xc7c085[_0x5f0271(0x1bb)]}),_0x17b09c=await master_shop[_0x5f0271(0x150)]();console[_0x5f0271(0x15e)](_0x5f0271(0x1ce),_0x17b09c);const _0x366cb8=_0x117bde['params']['id'],_0x4f6cef=await product[_0x5f0271(0x1df)](_0x366cb8);console[_0x5f0271(0x15e)](_0x5f0271(0x1e4),_0x4f6cef);if(_0x17b09c[0x0][_0x5f0271(0x1af)]==_0x5f0271(0x1ae))var _0x2bdb27=users[_0x5f0271(0x19e)];else{if(_0x17b09c[0x0][_0x5f0271(0x1af)]==_0x5f0271(0x18e))var _0x2bdb27=users[_0x5f0271(0x18e)];else{if(_0x17b09c[0x0][_0x5f0271(0x1af)]=='German')var _0x2bdb27=users[_0x5f0271(0x16c)];else{if(_0x17b09c[0x0][_0x5f0271(0x1af)]==_0x5f0271(0x1c9))var _0x2bdb27=users[_0x5f0271(0x1c9)];else{if(_0x17b09c[0x0][_0x5f0271(0x1af)]=='French')var _0x2bdb27=users[_0x5f0271(0x1d9)];else{if(_0x17b09c[0x0][_0x5f0271(0x1af)]==_0x5f0271(0x126))var _0x2bdb27=users[_0x5f0271(0x168)];else{if(_0x17b09c[0x0]['language']==_0x5f0271(0x1de))var _0x2bdb27=users['Chinese'];else{if(_0x17b09c[0x0][_0x5f0271(0x1af)]==_0x5f0271(0x1e1))var _0x2bdb27=users['Arabic'];}}}}}}}_0x467828[_0x5f0271(0x164)]('product_barcode',{'success':_0x117bde[_0x5f0271(0x155)](_0x5f0271(0x195)),'errors':_0x117bde['flash'](_0x5f0271(0x1ba)),'role':_0xc7c085,'profile':_0x394e11,'alldata':_0x4f6cef,'master_shop':_0x17b09c,'language':_0x2bdb27});}catch(_0x389778){console[_0x5f0271(0x15e)](_0x389778);}}),router['get'](a0_0x391103(0x15b),auth,async(_0x1c0c66,_0x5838f0)=>{const _0x12d1ae=a0_0x391103;try{const _0x279d4e=new excelJS[(_0x12d1ae(0x157))](),_0x4549e3=_0x279d4e['addWorksheet'](_0x12d1ae(0x177));return _0x4549e3[_0x12d1ae(0x18d)]=[{'header':_0x12d1ae(0x1ac),'key':_0x12d1ae(0x153),'width':0xa},{'header':'Brands','key':_0x12d1ae(0x13c),'width':0xa},{'header':'Units','key':_0x12d1ae(0x142),'width':0xa},{'header':_0x12d1ae(0x1c1),'key':'PSecondaryUnits','width':0xa},{'header':'max_number_per_units','key':'MaxperUnits','width':0xa},{'header':_0x12d1ae(0x17d),'key':_0x12d1ae(0x141),'width':0xa},{'header':_0x12d1ae(0x194),'key':_0x12d1ae(0x141),'width':0xa},{'header':_0x12d1ae(0x1bd),'key':'ProductCode','width':0xa},{'header':_0x12d1ae(0x1cb),'key':'PCat','width':0xa},{'header':_0x12d1ae(0x1db),'key':_0x12d1ae(0x1d7),'width':0xa},{'header':_0x12d1ae(0x1b9),'key':'PAlQty','width':0xa},{'header':_0x12d1ae(0x17b),'key':_0x12d1ae(0x1ea),'width':0xa}],_0x5838f0[_0x12d1ae(0x191)](_0x12d1ae(0x163),_0x12d1ae(0x199)),_0x5838f0['setHeader']('Content-Disposition',_0x12d1ae(0x17c)),_0x279d4e[_0x12d1ae(0x129)][_0x12d1ae(0x1a1)](_0x5838f0)[_0x12d1ae(0x1d4)](()=>{const _0x18cc01=_0x12d1ae;_0x5838f0[_0x18cc01(0x147)](0xc8);});}catch(_0x30f5d0){_0x5838f0[_0x12d1ae(0x147)](0x190)[_0x12d1ae(0x188)](_0x30f5d0);}});const storage1=multer['diskStorage']({'destination':(_0x9fc94a,_0x5ecd8a,_0x562dd5)=>{const _0x40e76d=a0_0x391103;_0x562dd5(null,_0x40e76d(0x1d1));},'filename':(_0x4be409,_0x11aed7,_0x11516f)=>{const _0x40539a=a0_0x391103;_0x11516f(null,Date[_0x40539a(0x158)]()+_0x11aed7[_0x40539a(0x1d5)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x391103(0x18b)](a0_0x391103(0x134),auth,uploadMigrate[a0_0x391103(0x1a0)](a0_0x391103(0x12c)),async(_0x3a3d55,_0x59c836)=>{const _0x2f0e0e=a0_0x391103,_0x1a4be0=_0x3a3d55[_0x2f0e0e(0x149)][_0x2f0e0e(0x144)],_0x237756=await xlsx[_0x2f0e0e(0x1b1)](_0x2f0e0e(0x189)+_0x1a4be0);let _0x38b716=_0x237756[_0x2f0e0e(0x1bf)],_0x185c3d=xlsx[_0x2f0e0e(0x1d3)][_0x2f0e0e(0x13d)](_0x237756[_0x2f0e0e(0x13f)][_0x38b716[0x0]]);for(const _0x59a3d0 of _0x185c3d){const _0x4e0951=_0x59a3d0['Product_Name'],_0xe9b0be=_0x59a3d0['Brands'],_0x440edf=_0x59a3d0[_0x2f0e0e(0x185)],_0x2356cc=_0x59a3d0[_0x2f0e0e(0x1c1)],_0x1d2fff=_0x59a3d0[_0x2f0e0e(0x1bd)],_0x566df0=_0x59a3d0[_0x2f0e0e(0x1cb)],_0x196e90=_0x59a3d0[_0x2f0e0e(0x1db)],_0x2fae34=_0x59a3d0[_0x2f0e0e(0x17d)],_0x1e8814=_0x59a3d0['Secondary_Code'],_0xb46c65=_0x59a3d0[_0x2f0e0e(0x1b9)],_0x89d017=_0x59a3d0[_0x2f0e0e(0x197)],_0x255b40=_0x59a3d0[_0x2f0e0e(0x17b)];try{let _0x3d9d61=await categories['findOne']({'name':_0x566df0});if(!_0x3d9d61){const _0x184cf2=new categories({'name':_0x566df0,'products':'0'});_0x3d9d61=await _0x184cf2[_0x2f0e0e(0x151)]();}let _0x5ada8b=await brands['findOne']({'name':_0xe9b0be});if(!_0x5ada8b){const _0x184624=new brands({'name':_0xe9b0be,'products':'0'});_0x5ada8b=await _0x184624[_0x2f0e0e(0x151)]();}let _0xcfab4d=await units['findOne']({'name':_0x440edf,'secondary_unit':_0x2356cc});if(!_0xcfab4d){const _0x44b79a=new units({'name':_0x440edf,'secondary_unit':_0x2356cc,'products':'0'});_0xcfab4d=await _0x44b79a['save']();}const _0x1b949f=await product[_0x2f0e0e(0x150)]({'name':_0x4e0951,'category':_0x3d9d61[_0x2f0e0e(0x179)],'brand':_0x5ada8b['name'],'secondary_unit':_0xcfab4d[_0x2f0e0e(0x13e)],'product_code':_0x1d2fff});console[_0x2f0e0e(0x15e)](_0x1b949f[_0x2f0e0e(0x124)]+_0x2f0e0e(0x1d8)+_0x3d9d61[_0x2f0e0e(0x179)]+_0x2f0e0e(0x1d8)+_0x5ada8b['name']+_0x2f0e0e(0x1d8)+_0xcfab4d[_0x2f0e0e(0x13e)]+_0x2f0e0e(0x1d8)+_0x1d2fff+_0x2f0e0e(0x1d8)+_0x4e0951);if(_0x1b949f[_0x2f0e0e(0x124)]===0x0){const _0x3a1479=new product({'image':_0x2f0e0e(0x14c),'name':_0x4e0951,'category':_0x3d9d61[_0x2f0e0e(0x179)],'brand':_0x5ada8b[_0x2f0e0e(0x179)],'unit':_0xcfab4d[_0x2f0e0e(0x179)],'alertquantity':_0x196e90,'product_code':_0x1d2fff,'secondary_unit':_0xcfab4d['secondary_unit'],'primary_code':_0x2fae34,'secondary_code':_0x1e8814,'maxStocks':_0xb46c65,'maxProdPerUnit':_0x89d017,'product_category':_0x255b40}),_0x2b669d=await _0x3a1479[_0x2f0e0e(0x151)]();_0x3d9d61[_0x2f0e0e(0x1e0)]=parseInt(_0x3d9d61[_0x2f0e0e(0x1e0)])+0x1,await _0x3d9d61['save'](),_0x5ada8b[_0x2f0e0e(0x1e0)]=parseInt(_0x5ada8b['products'])+0x1,await _0x5ada8b[_0x2f0e0e(0x151)](),_0xcfab4d[_0x2f0e0e(0x1e0)]=parseInt(_0xcfab4d[_0x2f0e0e(0x1e0)])+0x1,await _0xcfab4d[_0x2f0e0e(0x151)](),_0x3a3d55[_0x2f0e0e(0x155)](_0x2f0e0e(0x195),_0x4e0951+'\x20added\x20successfully');}else{console[_0x2f0e0e(0x15e)](_0x1b949f[0x0]);const _0x39a90f=_0x1b949f[0x0];_0x39a90f[_0x2f0e0e(0x17e)]=_0x3d9d61[_0x2f0e0e(0x179)],_0x39a90f['brand']=_0x5ada8b[_0x2f0e0e(0x179)],_0x39a90f[_0x2f0e0e(0x1a2)]=_0xcfab4d[_0x2f0e0e(0x179)],_0x39a90f[_0x2f0e0e(0x17f)]=_0x196e90,_0x39a90f[_0x2f0e0e(0x162)]=_0x1d2fff,_0x39a90f[_0x2f0e0e(0x13e)]=_0xcfab4d[_0x2f0e0e(0x13e)],_0x39a90f[_0x2f0e0e(0x1c3)]=_0x2fae34,_0x39a90f[_0x2f0e0e(0x1ec)]=_0x1e8814,_0x39a90f[_0x2f0e0e(0x186)]=_0xb46c65,_0x39a90f['maxProdPerUnit']=_0x89d017,_0x39a90f['product_category']=_0x255b40;const _0x4089d2=await _0x39a90f['save']();_0x3a3d55['flash'](_0x2f0e0e(0x195),_0x4089d2[_0x2f0e0e(0x179)]+_0x2f0e0e(0x1e5));}}catch(_0x396081){_0x59c836[_0x2f0e0e(0x147)](0x1f4)[_0x2f0e0e(0x1e9)]({'proderror':_0x396081[_0x2f0e0e(0x19a)],'aproduct':_0x4e0951});}}_0x59c836[_0x2f0e0e(0x13a)](_0x2f0e0e(0x15c));}),router[a0_0x391103(0x18b)](a0_0x391103(0x14a),auth,async(_0x387a6e,_0x9b16e4)=>{const _0x132c20=a0_0x391103;try{console[_0x132c20(0x15e)](_0x387a6e[_0x132c20(0x170)]);const {data_cateory:_0x27b6ca,datachoose:_0x2a56a0}=_0x387a6e[_0x132c20(0x170)];var _0x2cbe68;if(_0x2a56a0==_0x132c20(0x165))_0x2cbe68=await product[_0x132c20(0x187)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x2a56a0==_0x132c20(0x1c8))_0x2cbe68=await product[_0x132c20(0x187)]([{'$match':{'product_category':_0x27b6ca}},{'$group':{'_id':_0x132c20(0x135)}}]);else _0x2a56a0==_0x132c20(0x174)&&(_0x2cbe68=await product[_0x132c20(0x187)]([{'$match':{'product_category':_0x27b6ca}},{'$group':{'_id':_0x132c20(0x14f)}}]));}_0x9b16e4[_0x132c20(0x1e9)](_0x2cbe68);}catch(_0xa6b27f){_0x9b16e4[_0x132c20(0x1e9)]({'message':_0xa6b27f[_0x132c20(0x19a)]});}}),router[a0_0x391103(0x18b)](a0_0x391103(0x1d6),auth,async(_0x421af3,_0x4bdfca)=>{const _0x290e8d=a0_0x391103;try{const {data_choosing:_0x342df1,data_selected:_0x1301ee}=_0x421af3[_0x290e8d(0x170)];var _0x19bd14;if(_0x342df1==_0x290e8d(0x165))_0x19bd14=await product[_0x290e8d(0x187)]([{'$match':{'product_category':_0x1301ee}}]);else{if(_0x342df1==_0x290e8d(0x1c8))_0x19bd14=await product[_0x290e8d(0x187)]([{'$match':{'brand':_0x1301ee}}]);else _0x342df1==_0x290e8d(0x174)&&(_0x19bd14=await product[_0x290e8d(0x187)]([{'$match':{'category':_0x1301ee}}]));}_0x4bdfca[_0x290e8d(0x1e9)](_0x19bd14);}catch(_0x2247b6){_0x4bdfca[_0x290e8d(0x1e9)]({'message':_0x2247b6[_0x290e8d(0x19a)]});}}),router[a0_0x391103(0x1a8)](a0_0x391103(0x1ad),auth,async(_0x1587a5,_0x2c49be)=>{const _0x58ab82=a0_0x391103,_0x543684=_0x1587a5[_0x58ab82(0x1b6)],_0x434e45=await profile[_0x58ab82(0x14d)]({'email':_0x543684[_0x58ab82(0x1bb)]}),_0x10635e=await master_shop[_0x58ab82(0x150)](),_0x492888=await product[_0x58ab82(0x150)]();if(_0x10635e[0x0][_0x58ab82(0x1af)]==_0x58ab82(0x1ae))var _0x5af3ff=users[_0x58ab82(0x19e)];else{if(_0x10635e[0x0][_0x58ab82(0x1af)]=='Hindi')var _0x5af3ff=users['Hindi'];else{if(_0x10635e[0x0][_0x58ab82(0x1af)]==_0x58ab82(0x16c))var _0x5af3ff=users[_0x58ab82(0x16c)];else{if(_0x10635e[0x0][_0x58ab82(0x1af)]==_0x58ab82(0x1c9))var _0x5af3ff=users['Spanish'];else{if(_0x10635e[0x0][_0x58ab82(0x1af)]==_0x58ab82(0x1d9))var _0x5af3ff=users[_0x58ab82(0x1d9)];else{if(_0x10635e[0x0][_0x58ab82(0x1af)]==_0x58ab82(0x126))var _0x5af3ff=users[_0x58ab82(0x168)];else{if(_0x10635e[0x0][_0x58ab82(0x1af)]==_0x58ab82(0x1de))var _0x5af3ff=users['Chinese'];else{if(_0x10635e[0x0]['language']==_0x58ab82(0x1e1))var _0x5af3ff=users[_0x58ab82(0x1e8)];}}}}}}}_0x2c49be[_0x58ab82(0x164)](_0x58ab82(0x1cc),{'success':_0x1587a5[_0x58ab82(0x155)](_0x58ab82(0x195)),'errors':_0x1587a5['flash'](_0x58ab82(0x1ba)),'role':_0x543684,'profile':_0x434e45,'products':_0x492888,'master_shop':_0x10635e,'language':_0x5af3ff});}),router[a0_0x391103(0x18b)](a0_0x391103(0x160),auth,async(_0x5cd5f4,_0x41e860)=>{const _0x55b3e1=a0_0x391103,_0x20de89=await product[_0x55b3e1(0x150)]();_0x41e860[_0x55b3e1(0x1e9)]({'data':_0x20de89});}),router['post']('/barcode_filter',auth,async(_0x306864,_0x2c195d)=>{const _0x14dbf0=a0_0x391103;try{const {dataProdCat:_0x45d26e,dataProdIdentity:_0xc5665e}=_0x306864[_0x14dbf0(0x170)];var _0x271fb5;switch(_0x45d26e){case'fg':switch(_0xc5665e){case _0x14dbf0(0x131):_0x271fb5=await product[_0x14dbf0(0x187)]([{'$match':{'product_category':_0x14dbf0(0x1c0)}},{'$group':{'_id':_0x14dbf0(0x135)}},{'$project':{'brand':'$_id'}}]);break;case _0x14dbf0(0x1cb):_0x271fb5=await product['aggregate']([{'$match':{'product_category':_0x14dbf0(0x1c0)}},{'$group':{'_id':_0x14dbf0(0x14f)}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0xc5665e){case _0x14dbf0(0x131):_0x271fb5=await product[_0x14dbf0(0x187)]([{'$match':{'product_category':_0x14dbf0(0x1c6)}},{'$group':{'_id':_0x14dbf0(0x135)}},{'$project':{'brand':_0x14dbf0(0x15d)}}]);break;case'Category':_0x271fb5=await product[_0x14dbf0(0x187)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x14dbf0(0x14f)}},{'$project':{'category':_0x14dbf0(0x15d)}}]);break;}break;}_0x2c195d[_0x14dbf0(0x1e9)](_0x271fb5);}catch(_0x5bb665){_0x2c195d['json']({'message':_0x5bb665['message']});}}),router[a0_0x391103(0x18b)](a0_0x391103(0x1a7),auth,async(_0x1989f8,_0x43a913)=>{const _0x1cbbfb=a0_0x391103;try{console[_0x1cbbfb(0x15e)](_0x1989f8[_0x1cbbfb(0x170)]);const {prod_cat:_0x54ca2e,identity:_0x5aabed,valueData:_0x341fe3,typeofbarcode:_0xf0d003}=_0x1989f8[_0x1cbbfb(0x170)];let _0x14c7e4;switch(_0x54ca2e){case'fg':if(_0x5aabed=='Brands')_0x14c7e4=await product[_0x1cbbfb(0x187)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x341fe3}}]);else _0x5aabed==_0x1cbbfb(0x1cb)&&(_0x14c7e4=await product['aggregate']([{'$match':{'product_category':_0x1cbbfb(0x1c0),'category':_0x341fe3}}]));break;case'rm':if(_0x5aabed==_0x1cbbfb(0x131))_0x14c7e4=await product[_0x1cbbfb(0x187)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x341fe3}}]);else _0x5aabed==_0x1cbbfb(0x1cb)&&(_0x14c7e4=await product['aggregate']([{'$match':{'product_category':_0x1cbbfb(0x1c6),'category':_0x341fe3}}]));break;}const _0x3e1641=_0x2dbbeb=>_0x2dbbeb*0x48,_0x294629={'width':0x3,'height':0x1},_0x54329e=new PDFDocument({'margin':_0x3e1641(0.75),'size':[_0x3e1641(_0x294629[_0x1cbbfb(0x183)]),_0x3e1641(_0x294629[_0x1cbbfb(0x190)])],'bufferPages':!![]}),_0x3ef5d6=_0x14c7e4[_0x1cbbfb(0x124)];for(let _0x287ced=0x0;_0x287ced<=_0x3ef5d6;_0x287ced++){if(_0x287ced!=_0x3ef5d6){const _0x2e37ab=_0x14c7e4[_0x287ced][_0x1cbbfb(0x179)],_0x25938e=_0x14c7e4[_0x287ced][_0x1cbbfb(0x1c3)],_0x37470d=_0x14c7e4[_0x287ced]['secondary_code'],_0x295779=_0x14c7e4[_0x287ced]['product_code'];var _0x2c6657;switch(_0xf0d003){case'1':_0x2c6657=_0x25938e;break;case'2':_0x2c6657=_0x37470d;break;case'3':_0x2c6657=_0x295779;break;}const _0x359f6a={'width':0xd2,'height':0x64},_0x1be348={'width':_0x3e1641(_0x294629[_0x1cbbfb(0x183)]),'height':_0x3e1641(_0x294629['height'])},_0x10de31=new Canvas();JsBarcode(_0x10de31,_0x2c6657,{'format':_0x1cbbfb(0x198),'height':_0x359f6a[_0x1cbbfb(0x190)],'displayValue':!![],'text':_0x2c6657});const _0x5ae2df=_0x10de31[_0x1cbbfb(0x1be)](),_0x53edd0=_0x1be348[_0x1cbbfb(0x183)]/_0x359f6a[_0x1cbbfb(0x183)],_0x1770f7=_0x1be348[_0x1cbbfb(0x190)]/_0x359f6a[_0x1cbbfb(0x190)],_0x406cb1=Math[_0x1cbbfb(0x1b3)](_0x53edd0,_0x1770f7),_0x316443=_0x359f6a['width']*_0x406cb1,_0x275dfb=_0x359f6a[_0x1cbbfb(0x190)]*_0x406cb1,_0x1d88eb=(_0x1be348[_0x1cbbfb(0x183)]-_0x316443)/0x2,_0x4327de=(_0x1be348['height']-_0x275dfb)/0x2;_0x54329e[_0x1cbbfb(0x1da)](_0x5ae2df,_0x1d88eb,_0x4327de,{'width':_0x316443,'height':_0x275dfb}),_0x287ced!=_0x3ef5d6&&_0x54329e[_0x1cbbfb(0x16f)]();}}const _0x31d64f=[];_0x54329e['on'](_0x1cbbfb(0x1e6),_0x31d64f['push'][_0x1cbbfb(0x1a5)](_0x31d64f)),_0x54329e['on'](_0x1cbbfb(0x12d),()=>{const _0x23c876=_0x1cbbfb,_0xf3aaa6=Buffer['concat'](_0x31d64f),_0x198229=_0xf3aaa6['toString'](_0x23c876(0x178));_0x43a913[_0x23c876(0x1e9)]({'pdfContent':_0x198229});}),_0x54329e[_0x1cbbfb(0x12d)]();}catch(_0x51cd4f){_0x43a913['json']({'message':_0x51cd4f[_0x1cbbfb(0x19a)]});}}),router[a0_0x391103(0x18b)](a0_0x391103(0x1b8),auth,async(_0x8b351d,_0x20137e)=>{const _0x46bd27=a0_0x391103;try{console[_0x46bd27(0x15e)](_0x8b351d[_0x46bd27(0x170)]);const {prod_cat:_0x3ad111,identity:_0xa44915,valueData:_0x31e5e7}=_0x8b351d[_0x46bd27(0x170)];let _0x507504;switch(_0x3ad111){case'fg':if(_0xa44915=='Brands')_0x507504=await product[_0x46bd27(0x187)]([{'$match':{'product_category':_0x46bd27(0x1c0),'brand':_0x31e5e7}}]);else _0xa44915==_0x46bd27(0x1cb)&&(_0x507504=await product[_0x46bd27(0x187)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x31e5e7}}]));break;case'rm':if(_0xa44915==_0x46bd27(0x131))_0x507504=await product['aggregate']([{'$match':{'product_category':_0x46bd27(0x1c6),'brand':_0x31e5e7}}]);else _0xa44915=='Category'&&(_0x507504=await product[_0x46bd27(0x187)]([{'$match':{'product_category':_0x46bd27(0x1c6),'category':_0x31e5e7}}]));break;}_0x20137e['json']({'data':_0x507504});}catch(_0x383b5a){_0x20137e[_0x46bd27(0x1e9)]({'message':_0x383b5a[_0x46bd27(0x19a)]});}}),router[a0_0x391103(0x18b)](a0_0x391103(0x1eb),auth,async(_0x205125,_0x1d94b6)=>{const _0x3febe6=a0_0x391103;try{const _0x3c6413=_0x205125[_0x3febe6(0x130)]['id'],{copies:_0x3c4f0c,typeofbarcode:_0x3c7cbb}=_0x205125[_0x3febe6(0x170)];var _0x2d5ade=await product['findById'](_0x3c6413);const _0x469ace=_0x3e5c2b=>_0x3e5c2b*0x48,_0x1aa056={'width':0x3,'height':0x1},_0x169780=new PDFDocument({'margin':_0x469ace(0.75),'size':[_0x469ace(_0x1aa056[_0x3febe6(0x183)]),_0x469ace(_0x1aa056['height'])],'bufferPages':!![]}),_0x5e0747=_0x3c4f0c,_0x1c1add=_0x2d5ade[_0x3febe6(0x179)],_0x2184a5=_0x2d5ade[_0x3febe6(0x1c3)],_0x39e2ab=_0x2d5ade[_0x3febe6(0x1ec)],_0x4dc43c=_0x2d5ade[_0x3febe6(0x162)];let _0x4b6475;switch(_0x3c7cbb){case'1':_0x4b6475=_0x2184a5;break;case'2':_0x4b6475=_0x39e2ab;break;case'3':_0x4b6475=_0x4dc43c;break;}const _0x203c30={'width':0xd2,'height':0x64},_0xb7cdcc={'width':_0x469ace(_0x1aa056['width']),'height':_0x469ace(_0x1aa056[_0x3febe6(0x190)])};for(let _0x27b7c8=0x1;_0x27b7c8<=_0x5e0747;_0x27b7c8++){const _0x45a7ce=new Canvas();JsBarcode(_0x45a7ce,_0x4b6475,{'format':_0x3febe6(0x198),'height':_0x203c30['height'],'displayValue':!![],'text':_0x4b6475});const _0x1ed480=_0x45a7ce[_0x3febe6(0x1be)](),_0x41d40c=_0xb7cdcc[_0x3febe6(0x183)]/_0x203c30[_0x3febe6(0x183)],_0x20bc84=_0xb7cdcc[_0x3febe6(0x190)]/_0x203c30[_0x3febe6(0x190)],_0x5f0a75=Math[_0x3febe6(0x1b3)](_0x41d40c,_0x20bc84),_0x538fd0=_0x203c30['width']*_0x5f0a75,_0x11480b=_0x203c30[_0x3febe6(0x190)]*_0x5f0a75,_0x11fb68=(_0xb7cdcc[_0x3febe6(0x183)]-_0x538fd0)/0x2,_0x3cafe3=(_0xb7cdcc[_0x3febe6(0x190)]-_0x11480b)/0x2;_0x169780[_0x3febe6(0x1da)](_0x1ed480,_0x11fb68,_0x3cafe3,{'width':_0x538fd0,'height':_0x11480b}),_0x27b7c8!=_0x5e0747&&_0x169780[_0x3febe6(0x16f)]();}const _0x38b6d0=[];_0x169780['on']('data',_0x38b6d0[_0x3febe6(0x1bc)]['bind'](_0x38b6d0)),_0x169780['on'](_0x3febe6(0x12d),()=>{const _0x5aafd0=_0x3febe6,_0x526ff6=Buffer[_0x5aafd0(0x196)](_0x38b6d0),_0x30b1ad=_0x526ff6[_0x5aafd0(0x12e)]('base64');_0x1d94b6[_0x5aafd0(0x1e9)]({'pdfContent':_0x30b1ad});}),_0x169780['end']();}catch(_0x2854b2){_0x1d94b6[_0x3febe6(0x1e9)]({'message':_0x2854b2[_0x3febe6(0x19a)]});}}),module[a0_0x391103(0x1cd)]=router;