const a0_0x402440=a0_0x4d9a;function a0_0x33a0(){const _0x29ab45=['PBrands','Arabic','Raw\x20Materials','post','216pWcRup','maxStocks','public/Migration','findOne','Primary_Code','$_id','type_products','product\x20update\x20successfully','jsbarcode','errors','Content-Disposition','Category','bind','unit\x20data\x20delete\x20successfully','/categories/:id','setHeader','/products/brands','data','migrate_product_fule','json','PUnits','sheet_to_json','/units/:id','/barcode_filter','length','pdfkit-table','originalname','/products/view','findById','/brands/:id','user','product\x20add\x20successfully','/view','264069FjbpEs','SheetNames','/print_barcode','single','\x20<>\x20','max_number_per_units','Chinese','Portuguese','then','brand','maxProdPerUnit','send','unit','/select_data','PCat','product\x20edit','Products\x20find_data','/categories','German','$brand','Products\x20warehouse_data','/categories/delete/:id','name','7163688zKKBRe','product_code','flash','Products\x20master','PAlQty','PSecondaryUnits','findByIdAndUpdate','/units/delete/:id','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','barcode\x20Product\x20master','stock','success','sku','$product_details.product_stock','Router','/print_barcode_single/:id','xlsx','French','brand\x20data\x20update\x20successfully','end','public/Migration/','/products/units','primary_code','map','category','\x20Edit\x20Successfully','/brands','diskStorage','_id','sales_category','Hindi','English\x20(US)','Products_category','save','numeric','PName','secondary_unit','/print_barcode_filter_search/','alertquantity','push','unit\x20data\x20update\x20successfully','product_details.product_name','master','get','width','height','Arabic\x20(ae)','Finished\x20Goods','image','Sheets','Spanish','params','/view/add_products','file','1549986LfNWeL','Prod_Cat','Product_Name','$category','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','$product_stock','attachment;\x20filename=Product_Migration_File.xlsx','ProductCode','Portuguese\x20(BR)','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','42621282MCxJSq','public/upload','/units','write','/products/categories','product_docs','brands','\x20unit\x20is\x20add\x20successfully','Units','utils','defaultProduct.avif','CODE128','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','/view/:id','findByIdAndDelete','../middleware/auth','products','canvas','add_product','$product_details','units','find','exceljs','Maximum_Stocks','885ylTTXb','Secondary_Units','English','aggregate','addPage','8596mRzIzM','message','edit\x20Product\x20master','Enabled','now','product_barcode_products','body','\x20categories\x20is\x20add\x20successfully','Secondary_Code','product_barcode','Brands','warehouse','product_category','concat','secondary_code','toBuffer','multer','$product_docs','long','toString','forEach','243537uPxakL','Content-Type','render','/barcode/:id','log','categories','redirect','/barcode_data','categories_edit','$product_category','language','status','barcode\x20user_id','\x20brand\x20is\x20add\x20successfully','Product_Code','1579971IGSgDE','categ','express','min','filename','base64','email'];a0_0x33a0=function(){return _0x29ab45;};return a0_0x33a0();}(function(_0x48ae32,_0x47d5ac){const _0x53c774=a0_0x4d9a,_0xacc280=_0x48ae32();while(!![]){try{const _0x3262d7=-parseInt(_0x53c774(0x234))/0x1+-parseInt(_0x53c774(0x1bd))/0x2+-parseInt(_0x53c774(0x208))/0x3+-parseInt(_0x53c774(0x1e4))/0x4*(parseInt(_0x53c774(0x1df))/0x5)+-parseInt(_0x53c774(0x24b))/0x6+-parseInt(_0x53c774(0x1f9))/0x7*(parseInt(_0x53c774(0x213))/0x8)+parseInt(_0x53c774(0x1c7))/0x9;if(_0x3262d7===_0x47d5ac)break;else _0xacc280['push'](_0xacc280['shift']());}catch(_0x555371){_0xacc280['push'](_0xacc280['shift']());}}}(a0_0x33a0,0xa03ad));const express=require(a0_0x402440(0x20a)),res=require('express/lib/response'),app=express(),router=express[a0_0x402440(0x195)](),multer=require(a0_0x402440(0x1f4)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x402440(0x1d6)),users=require('../public/language/languages.json'),excelJS=require(a0_0x402440(0x1dd)),xlsx=require(a0_0x402440(0x197)),JsBarcode=require(a0_0x402440(0x21b)),{Canvas}=require(a0_0x402440(0x1d8)),PDFDocument=require(a0_0x402440(0x22c));router[a0_0x402440(0x1b2)](a0_0x402440(0x245),auth,async(_0x42260e,_0x593f37)=>{const _0x2ca7c0=a0_0x402440;try{const {username:_0x49c060,email:_0xc45456,role:_0x11db0c}=_0x42260e[_0x2ca7c0(0x231)],_0x536bf6=_0x42260e[_0x2ca7c0(0x231)],_0xda6408=await profile[_0x2ca7c0(0x216)]({'email':_0x536bf6[_0x2ca7c0(0x20e)]}),_0x1e86c6=await master_shop[_0x2ca7c0(0x1dc)]();console[_0x2ca7c0(0x1fd)](_0x2ca7c0(0x1b1),_0x1e86c6);const _0x3df370=await categories[_0x2ca7c0(0x1dc)]();if(_0x1e86c6[0x0][_0x2ca7c0(0x203)]==_0x2ca7c0(0x1a6))var _0x541c8e=users[_0x2ca7c0(0x1e1)];else{if(_0x1e86c6[0x0][_0x2ca7c0(0x203)]==_0x2ca7c0(0x1a5))var _0x541c8e=users[_0x2ca7c0(0x1a5)];else{if(_0x1e86c6[0x0][_0x2ca7c0(0x203)]=='German')var _0x541c8e=users[_0x2ca7c0(0x246)];else{if(_0x1e86c6[0x0][_0x2ca7c0(0x203)]==_0x2ca7c0(0x1b9))var _0x541c8e=users['Spanish'];else{if(_0x1e86c6[0x0]['language']=='French')var _0x541c8e=users[_0x2ca7c0(0x198)];else{if(_0x1e86c6[0x0]['language']==_0x2ca7c0(0x1c5))var _0x541c8e=users[_0x2ca7c0(0x23b)];else{if(_0x1e86c6[0x0][_0x2ca7c0(0x203)]==_0x2ca7c0(0x23a))var _0x541c8e=users[_0x2ca7c0(0x23a)];else{if(_0x1e86c6[0x0][_0x2ca7c0(0x203)]==_0x2ca7c0(0x1b5))var _0x541c8e=users[_0x2ca7c0(0x210)];}}}}}}}_0x593f37[_0x2ca7c0(0x1fb)](_0x2ca7c0(0x1fe),{'success':_0x42260e['flash'](_0x2ca7c0(0x192)),'errors':_0x42260e['flash'](_0x2ca7c0(0x21c)),'role':_0x536bf6,'profile':_0xda6408,'user':_0x3df370,'master_shop':_0x1e86c6,'language':_0x541c8e});}catch(_0x1825ed){console['log'](_0x1825ed);}}),router[a0_0x402440(0x212)](a0_0x402440(0x245),auth,async(_0x39b68d,_0x36d720)=>{const _0x5ca971=a0_0x402440;try{const {name:_0x5f5844,products:_0x4c0a6b}=_0x39b68d[_0x5ca971(0x1ea)],_0x3e152b=new categories({'name':_0x5f5844,'products':_0x4c0a6b}),_0x3fb9b0=await categories[_0x5ca971(0x216)]({'name':_0x5f5844});_0x3fb9b0?_0x39b68d[_0x5ca971(0x24d)](_0x5ca971(0x21c),_0x5f5844+_0x5ca971(0x253)):_0x39b68d[_0x5ca971(0x24d)]('success',_0x5f5844+_0x5ca971(0x1eb));const _0x31af66=await _0x3e152b[_0x5ca971(0x1a8)]();_0x36d720['redirect'](_0x5ca971(0x1cb));}catch(_0x52dda4){console[_0x5ca971(0x1fd)](_0x52dda4);}}),router[a0_0x402440(0x1b2)](a0_0x402440(0x221),auth,async(_0x262afb,_0x24ae24)=>{const _0x2bad18=a0_0x402440;try{const {username:_0x146218,email:_0x495e2e,role:_0x1487c6}=_0x262afb[_0x2bad18(0x231)],_0x443d58=_0x262afb[_0x2bad18(0x231)],_0x10fbe8=await profile[_0x2bad18(0x216)]({'email':_0x443d58[_0x2bad18(0x20e)]}),_0x45e4e1=await master_shop[_0x2bad18(0x1dc)]();console[_0x2bad18(0x1fd)]('master',_0x45e4e1);const _0xbf31f0=_0x262afb[_0x2bad18(0x1ba)]['id'];console[_0x2bad18(0x1fd)](_0xbf31f0);const _0x1b9fa8=await categories[_0x2bad18(0x22f)](_0xbf31f0);if(_0x45e4e1[0x0][_0x2bad18(0x203)]==_0x2bad18(0x1a6))var _0x27f7e7=users[_0x2bad18(0x1e1)];else{if(_0x45e4e1[0x0][_0x2bad18(0x203)]==_0x2bad18(0x1a5))var _0x27f7e7=users[_0x2bad18(0x1a5)];else{if(_0x45e4e1[0x0][_0x2bad18(0x203)]==_0x2bad18(0x246))var _0x27f7e7=users[_0x2bad18(0x246)];else{if(_0x45e4e1[0x0][_0x2bad18(0x203)]==_0x2bad18(0x1b9))var _0x27f7e7=users[_0x2bad18(0x1b9)];else{if(_0x45e4e1[0x0][_0x2bad18(0x203)]==_0x2bad18(0x198))var _0x27f7e7=users[_0x2bad18(0x198)];else{if(_0x45e4e1[0x0][_0x2bad18(0x203)]==_0x2bad18(0x1c5))var _0x27f7e7=users['Portuguese'];else{if(_0x45e4e1[0x0][_0x2bad18(0x203)]=='Chinese')var _0x27f7e7=users[_0x2bad18(0x23a)];else{if(_0x45e4e1[0x0][_0x2bad18(0x203)]=='Arabic\x20(ae)')var _0x27f7e7=users['Arabic'];}}}}}}}_0x24ae24[_0x2bad18(0x1fb)](_0x2bad18(0x1fe),{'success':_0x262afb[_0x2bad18(0x24d)](_0x2bad18(0x192)),'errors':_0x262afb[_0x2bad18(0x24d)]('errors'),'role':_0x443d58,'profile':_0x10fbe8,'master_shop':_0x45e4e1,'user':_0x1b9fa8,'language':_0x27f7e7});}catch(_0x1266e0){console[_0x2bad18(0x1fd)](_0x1266e0);}}),router[a0_0x402440(0x212)](a0_0x402440(0x221),auth,async(_0x95dc08,_0x22d153)=>{const _0x2dd1de=a0_0x402440;try{const _0x26ab44=_0x95dc08[_0x2dd1de(0x1ba)]['id'],_0x43ab5c=await categories[_0x2dd1de(0x251)](_0x26ab44,_0x95dc08[_0x2dd1de(0x1ea)]);_0x95dc08[_0x2dd1de(0x24d)](_0x2dd1de(0x192),''+users[_0x2dd1de(0x201)]),_0x22d153[_0x2dd1de(0x1ff)](_0x2dd1de(0x1cb));}catch(_0x5754c5){console[_0x2dd1de(0x1fd)](_0x5754c5);}}),router[a0_0x402440(0x1b2)](a0_0x402440(0x249),auth,async(_0x2d8cdd,_0x5b1275)=>{const _0x43b6f2=a0_0x402440;try{const _0x4dc7e0=_0x2d8cdd['params']['id'],_0x10ad5f=await categories[_0x43b6f2(0x1d5)](_0x4dc7e0);_0x2d8cdd[_0x43b6f2(0x24d)](_0x43b6f2(0x192),'categories\x20data\x20delete\x20successfully'),_0x5b1275[_0x43b6f2(0x1ff)]('/products/categories');}catch(_0x4793dc){console[_0x43b6f2(0x1fd)](_0x4793dc);}}),router['get'](a0_0x402440(0x1a1),auth,async(_0x228b6c,_0x5a1462)=>{const _0x5cfed6=a0_0x402440;try{const {username:_0x3f6bd1,email:_0x12efa4,role:_0x4ebd2d}=_0x228b6c[_0x5cfed6(0x231)],_0x12bd01=_0x228b6c[_0x5cfed6(0x231)],_0x2a4da5=await profile[_0x5cfed6(0x216)]({'email':_0x12bd01['email']}),_0x5d8402=await master_shop[_0x5cfed6(0x1dc)]();console[_0x5cfed6(0x1fd)](_0x5cfed6(0x1b1),_0x5d8402);const _0x3faa97=await brands[_0x5cfed6(0x1dc)]();if(_0x5d8402[0x0][_0x5cfed6(0x203)]==_0x5cfed6(0x1a6))var _0xfeef66=users[_0x5cfed6(0x1e1)];else{if(_0x5d8402[0x0][_0x5cfed6(0x203)]==_0x5cfed6(0x1a5))var _0xfeef66=users[_0x5cfed6(0x1a5)];else{if(_0x5d8402[0x0][_0x5cfed6(0x203)]==_0x5cfed6(0x246))var _0xfeef66=users[_0x5cfed6(0x246)];else{if(_0x5d8402[0x0]['language']=='Spanish')var _0xfeef66=users[_0x5cfed6(0x1b9)];else{if(_0x5d8402[0x0][_0x5cfed6(0x203)]=='French')var _0xfeef66=users[_0x5cfed6(0x198)];else{if(_0x5d8402[0x0]['language']=='Portuguese\x20(BR)')var _0xfeef66=users[_0x5cfed6(0x23b)];else{if(_0x5d8402[0x0][_0x5cfed6(0x203)]==_0x5cfed6(0x23a))var _0xfeef66=users[_0x5cfed6(0x23a)];else{if(_0x5d8402[0x0][_0x5cfed6(0x203)]=='Arabic\x20(ae)')var _0xfeef66=users[_0x5cfed6(0x210)];}}}}}}}_0x5a1462[_0x5cfed6(0x1fb)](_0x5cfed6(0x1cd),{'success':_0x228b6c[_0x5cfed6(0x24d)]('success'),'errors':_0x228b6c[_0x5cfed6(0x24d)](_0x5cfed6(0x21c)),'role':_0x12bd01,'profile':_0x2a4da5,'master_shop':_0x5d8402,'user':_0x3faa97,'language':_0xfeef66});}catch(_0x3bc41d){console[_0x5cfed6(0x1fd)](_0x3bc41d);}}),router[a0_0x402440(0x212)](a0_0x402440(0x1a1),auth,async(_0x3af40d,_0xdb9cdb)=>{const _0x212d5e=a0_0x402440;try{const {name:_0x329f34,products:_0x6c6061}=_0x3af40d[_0x212d5e(0x1ea)],_0x7714eb=new brands({'name':_0x329f34,'products':_0x6c6061}),_0x262b2a=await brands[_0x212d5e(0x216)]({'name':_0x329f34});_0x262b2a?_0x3af40d[_0x212d5e(0x24d)](_0x212d5e(0x21c),_0x329f34+_0x212d5e(0x1c6)):_0x3af40d[_0x212d5e(0x24d)](_0x212d5e(0x192),_0x329f34+_0x212d5e(0x206));const _0xd7e2c5=await _0x7714eb[_0x212d5e(0x1a8)]();_0xdb9cdb[_0x212d5e(0x1ff)](_0x212d5e(0x223));}catch(_0xdbd054){console[_0x212d5e(0x1fd)](_0xdbd054);}}),router[a0_0x402440(0x1b2)](a0_0x402440(0x230),auth,async(_0x1824a0,_0x4e6118)=>{const _0x3ebe4a=a0_0x402440;try{const {username:_0x4f4467,email:_0x3d5333,role:_0x18bc53}=_0x1824a0[_0x3ebe4a(0x231)],_0x152796=_0x1824a0['user'],_0x15689e=await profile[_0x3ebe4a(0x216)]({'email':_0x152796['email']}),_0x253c00=await master_shop[_0x3ebe4a(0x1dc)]();console[_0x3ebe4a(0x1fd)](_0x3ebe4a(0x1b1),_0x253c00);const _0x19eba4=_0x1824a0[_0x3ebe4a(0x1ba)]['id'];console[_0x3ebe4a(0x1fd)](_0x19eba4);const _0xd96b85=await brands[_0x3ebe4a(0x22f)](_0x19eba4);if(_0x253c00[0x0][_0x3ebe4a(0x203)]==_0x3ebe4a(0x1a6))var _0x339057=users[_0x3ebe4a(0x1e1)];else{if(_0x253c00[0x0][_0x3ebe4a(0x203)]==_0x3ebe4a(0x1a5))var _0x339057=users[_0x3ebe4a(0x1a5)];else{if(_0x253c00[0x0]['language']==_0x3ebe4a(0x246))var _0x339057=users['German'];else{if(_0x253c00[0x0][_0x3ebe4a(0x203)]==_0x3ebe4a(0x1b9))var _0x339057=users[_0x3ebe4a(0x1b9)];else{if(_0x253c00[0x0][_0x3ebe4a(0x203)]==_0x3ebe4a(0x198))var _0x339057=users[_0x3ebe4a(0x198)];else{if(_0x253c00[0x0][_0x3ebe4a(0x203)]==_0x3ebe4a(0x1c5))var _0x339057=users[_0x3ebe4a(0x23b)];else{if(_0x253c00[0x0][_0x3ebe4a(0x203)]==_0x3ebe4a(0x23a))var _0x339057=users[_0x3ebe4a(0x23a)];else{if(_0x253c00[0x0][_0x3ebe4a(0x203)]==_0x3ebe4a(0x1b5))var _0x339057=users[_0x3ebe4a(0x210)];}}}}}}}_0x4e6118[_0x3ebe4a(0x1fb)](_0x3ebe4a(0x1cd),{'success':_0x1824a0[_0x3ebe4a(0x24d)](_0x3ebe4a(0x192)),'errors':_0x1824a0['flash']('errors'),'role':_0x152796,'profile':_0x15689e,'master_shop':_0x253c00,'user':_0xd96b85,'language':_0x339057});}catch(_0x5ccfd8){console[_0x3ebe4a(0x1fd)](_0x5ccfd8);}}),router[a0_0x402440(0x212)](a0_0x402440(0x230),auth,async(_0x163d26,_0x2cd3d7)=>{const _0x562a58=a0_0x402440;try{const _0x31d811=_0x163d26[_0x562a58(0x1ba)]['id'],_0x2f99f0=await brands[_0x562a58(0x251)](_0x31d811,_0x163d26[_0x562a58(0x1ea)]);_0x163d26['flash'](_0x562a58(0x192),_0x562a58(0x199)),_0x2cd3d7[_0x562a58(0x1ff)](_0x562a58(0x223));}catch(_0x3d2695){console['log'](_0x3d2695);}}),router[a0_0x402440(0x1b2)]('/brands/delete/:id',auth,async(_0x1e2563,_0x50eb66)=>{const _0x23bd49=a0_0x402440;try{const _0x460ba6=_0x1e2563[_0x23bd49(0x1ba)]['id'],_0x21f938=await brands[_0x23bd49(0x1d5)](_0x460ba6);_0x1e2563[_0x23bd49(0x24d)]('success','brand\x20data\x20delete\x20successfully'),_0x50eb66['redirect']('/products/brands');}catch(_0x113161){console[_0x23bd49(0x1fd)](_0x113161);}}),router[a0_0x402440(0x1b2)](a0_0x402440(0x1c9),auth,async(_0x5642a2,_0x3e215a)=>{const _0x5d843d=a0_0x402440;try{const {username:_0x135332,email:_0x2e8836,role:_0x5f5023}=_0x5642a2['user'],_0x2a816e=_0x5642a2[_0x5d843d(0x231)],_0x473622=await profile[_0x5d843d(0x216)]({'email':_0x2a816e[_0x5d843d(0x20e)]}),_0xe182a2=await master_shop['find']();console[_0x5d843d(0x1fd)](_0x5d843d(0x1b1),_0xe182a2);const _0x17c54a=await units['find']();if(_0xe182a2[0x0][_0x5d843d(0x203)]==_0x5d843d(0x1a6))var _0x4b073e=users[_0x5d843d(0x1e1)];else{if(_0xe182a2[0x0][_0x5d843d(0x203)]==_0x5d843d(0x1a5))var _0x4b073e=users['Hindi'];else{if(_0xe182a2[0x0][_0x5d843d(0x203)]==_0x5d843d(0x246))var _0x4b073e=users['German'];else{if(_0xe182a2[0x0]['language']=='Spanish')var _0x4b073e=users['Spanish'];else{if(_0xe182a2[0x0][_0x5d843d(0x203)]==_0x5d843d(0x198))var _0x4b073e=users[_0x5d843d(0x198)];else{if(_0xe182a2[0x0][_0x5d843d(0x203)]==_0x5d843d(0x1c5))var _0x4b073e=users[_0x5d843d(0x23b)];else{if(_0xe182a2[0x0][_0x5d843d(0x203)]=='Chinese')var _0x4b073e=users[_0x5d843d(0x23a)];else{if(_0xe182a2[0x0]['language']==_0x5d843d(0x1b5))var _0x4b073e=users['Arabic'];}}}}}}}_0x3e215a['render'](_0x5d843d(0x1db),{'success':_0x5642a2[_0x5d843d(0x24d)](_0x5d843d(0x192)),'errors':_0x5642a2[_0x5d843d(0x24d)](_0x5d843d(0x21c)),'role':_0x2a816e,'profile':_0x473622,'master_shop':_0xe182a2,'user':_0x17c54a,'language':_0x4b073e});}catch(_0x26dbb6){console[_0x5d843d(0x1fd)](_0x26dbb6);}}),router[a0_0x402440(0x212)](a0_0x402440(0x1c9),auth,async(_0x1a543a,_0xc42b0)=>{const _0x1bfaa1=a0_0x402440;try{const {name:_0xdbb91c,secondary_unit:_0x577a22,products:_0x4bb4b5}=_0x1a543a['body'],_0x164e4e=new units({'name':_0xdbb91c,'secondary_unit':_0x577a22,'products':_0x4bb4b5}),_0x1e4f65=await units['findOne']({'name':_0xdbb91c});_0x1e4f65?_0x1a543a[_0x1bfaa1(0x24d)]('errors',_0xdbb91c+_0x1bfaa1(0x1c1)):_0x1a543a['flash']('success',_0xdbb91c+_0x1bfaa1(0x1ce));const _0x319817=await _0x164e4e[_0x1bfaa1(0x1a8)]();_0xc42b0[_0x1bfaa1(0x1ff)](_0x1bfaa1(0x19c));}catch(_0x52c660){console[_0x1bfaa1(0x1fd)](_0x52c660);}}),router['get'](a0_0x402440(0x229),auth,async(_0x431b40,_0x19a657)=>{const _0x5774ec=a0_0x402440;try{const {username:_0x31a89f,email:_0x441dd9,role:_0x70549a}=_0x431b40[_0x5774ec(0x231)],_0x320db6=_0x431b40['user'],_0x4d683b=await profile['findOne']({'email':_0x320db6[_0x5774ec(0x20e)]}),_0xa42291=await master_shop[_0x5774ec(0x1dc)]();console[_0x5774ec(0x1fd)](_0x5774ec(0x1b1),_0xa42291);const _0x414fe1=_0x431b40[_0x5774ec(0x1ba)]['id'],_0x20b51b=await units[_0x5774ec(0x22f)](_0x414fe1);if(_0xa42291[0x0][_0x5774ec(0x203)]==_0x5774ec(0x1a6))var _0x24520e=users[_0x5774ec(0x1e1)];else{if(_0xa42291[0x0]['language']==_0x5774ec(0x1a5))var _0x24520e=users[_0x5774ec(0x1a5)];else{if(_0xa42291[0x0][_0x5774ec(0x203)]==_0x5774ec(0x246))var _0x24520e=users[_0x5774ec(0x246)];else{if(_0xa42291[0x0][_0x5774ec(0x203)]=='Spanish')var _0x24520e=users['Spanish'];else{if(_0xa42291[0x0]['language']==_0x5774ec(0x198))var _0x24520e=users['French'];else{if(_0xa42291[0x0]['language']==_0x5774ec(0x1c5))var _0x24520e=users[_0x5774ec(0x23b)];else{if(_0xa42291[0x0][_0x5774ec(0x203)]==_0x5774ec(0x23a))var _0x24520e=users[_0x5774ec(0x23a)];else{if(_0xa42291[0x0][_0x5774ec(0x203)]==_0x5774ec(0x1b5))var _0x24520e=users[_0x5774ec(0x210)];}}}}}}}_0x19a657[_0x5774ec(0x1fb)](_0x5774ec(0x1db),{'success':_0x431b40[_0x5774ec(0x24d)](_0x5774ec(0x192)),'errors':_0x431b40[_0x5774ec(0x24d)](_0x5774ec(0x21c)),'role':_0x320db6,'profile':_0x4d683b,'master_shop':_0xa42291,'user':_0x20b51b,'language':_0x24520e});}catch(_0x4a570f){console[_0x5774ec(0x1fd)](_0x4a570f);}}),router[a0_0x402440(0x212)]('/units/:id',auth,async(_0x52505e,_0x2c3d60)=>{const _0x43ecc3=a0_0x402440;try{const _0x168a41=_0x52505e['params']['id'],_0x65cd5e=await units[_0x43ecc3(0x251)](_0x168a41,_0x52505e['body']);_0x52505e[_0x43ecc3(0x24d)](_0x43ecc3(0x192),_0x43ecc3(0x1af)),_0x2c3d60[_0x43ecc3(0x1ff)]('/products/units');}catch(_0x3229f9){console[_0x43ecc3(0x1fd)](_0x3229f9);}}),router['get'](a0_0x402440(0x252),auth,async(_0x32d0ec,_0x32a3a9)=>{const _0x4541ba=a0_0x402440;try{const _0x51fe15=_0x32d0ec[_0x4541ba(0x1ba)]['id'],_0x5d9d58=await units[_0x4541ba(0x1d5)](_0x51fe15);_0x32d0ec[_0x4541ba(0x24d)](_0x4541ba(0x192),_0x4541ba(0x220)),_0x32a3a9[_0x4541ba(0x1ff)](_0x4541ba(0x19c));}catch(_0x469f9d){console[_0x4541ba(0x1fd)](_0x469f9d);}});const storage=multer[a0_0x402440(0x1a2)]({'destination':(_0x13c119,_0x9a504,_0x2048fd)=>{const _0xb89562=a0_0x402440;_0x2048fd(null,_0xb89562(0x1c8));},'filename':(_0x6b2fc0,_0x2745e4,_0x5af76f)=>{const _0x17ab9c=a0_0x402440;_0x5af76f(null,Date[_0x17ab9c(0x1e8)]()+_0x2745e4['originalname']);}}),upload=multer({'storage':storage});router['get'](a0_0x402440(0x233),auth,async(_0xf3496d,_0x185a99)=>{const _0x3b24d9=a0_0x402440;try{const {username:_0x2a8e74,email:_0x150ac5,role:_0x267045}=_0xf3496d[_0x3b24d9(0x231)],_0x362ec5=_0xf3496d['user'],_0x361615=await profile['findOne']({'email':_0x362ec5[_0x3b24d9(0x20e)]}),_0x10b05c={'year':_0x3b24d9(0x1a9),'month':_0x3b24d9(0x1f6),'day':_0x3b24d9(0x1a9)},_0x36a65a=await master_shop[_0x3b24d9(0x1dc)]();console[_0x3b24d9(0x1fd)](_0x3b24d9(0x24e),_0x36a65a);const _0x3ab563=await product[_0x3b24d9(0x1dc)]();console[_0x3b24d9(0x1fd)](_0x3b24d9(0x244),_0x3ab563);const _0x17aab3=await warehouse[_0x3b24d9(0x1e2)]([{'$unwind':_0x3b24d9(0x1da)},{'$lookup':{'from':_0x3b24d9(0x1d7),'localField':_0x3b24d9(0x1b0),'foreignField':_0x3b24d9(0x24a),'as':_0x3b24d9(0x1cc)}},{'$unwind':_0x3b24d9(0x1f5)},{'$project':{'product_name':'$product_details.product_name','product_stock':_0x3b24d9(0x194)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x3b24d9(0x1c2)}}}]);console['log'](_0x3b24d9(0x248),_0x17aab3),_0x17aab3[_0x3b24d9(0x1f8)](_0xbbc767=>{const _0x4e1a08=_0x3b24d9,_0x495442=_0x3ab563[_0x4e1a08(0x19e)](_0x2dbafc=>{const _0x492af0=_0x4e1a08;_0x2dbafc[_0x492af0(0x24a)]==_0xbbc767[_0x492af0(0x1a3)]&&(_0x2dbafc[_0x492af0(0x191)]=parseInt(_0x2dbafc['stock'])+parseInt(_0xbbc767['product_stock']));});}),console['log']('Products\x20find_data',_0x3ab563);if(_0x36a65a[0x0][_0x3b24d9(0x203)]=='English\x20(US)')var _0x203083=users[_0x3b24d9(0x1e1)];else{if(_0x36a65a[0x0][_0x3b24d9(0x203)]==_0x3b24d9(0x1a5))var _0x203083=users[_0x3b24d9(0x1a5)];else{if(_0x36a65a[0x0][_0x3b24d9(0x203)]=='German')var _0x203083=users[_0x3b24d9(0x246)];else{if(_0x36a65a[0x0][_0x3b24d9(0x203)]==_0x3b24d9(0x1b9))var _0x203083=users['Spanish'];else{if(_0x36a65a[0x0][_0x3b24d9(0x203)]=='French')var _0x203083=users[_0x3b24d9(0x198)];else{if(_0x36a65a[0x0][_0x3b24d9(0x203)]=='Portuguese\x20(BR)')var _0x203083=users['Portuguese'];else{if(_0x36a65a[0x0][_0x3b24d9(0x203)]=='Chinese')var _0x203083=users[_0x3b24d9(0x23a)];else{if(_0x36a65a[0x0]['language']==_0x3b24d9(0x1b5))var _0x203083=users[_0x3b24d9(0x210)];}}}}}}}_0x185a99[_0x3b24d9(0x1fb)](_0x3b24d9(0x1d7),{'success':_0xf3496d['flash'](_0x3b24d9(0x192)),'errors':_0xf3496d[_0x3b24d9(0x24d)](_0x3b24d9(0x21c)),'alldata':_0x3ab563,'profile':_0x361615,'master_shop':_0x36a65a,'role':_0x362ec5,'product_stock':_0x17aab3,'language':_0x203083});}catch(_0x3280c0){console[_0x3b24d9(0x1fd)](_0x3280c0);}}),router[a0_0x402440(0x1b2)](a0_0x402440(0x1bb),auth,async(_0x5ad3f7,_0xbc9b0e)=>{const _0x15a7f5=a0_0x402440;try{const {username:_0x59fc3e,email:_0x4fb4b8,role:_0x339996}=_0x5ad3f7[_0x15a7f5(0x231)],_0x5e457a=_0x5ad3f7[_0x15a7f5(0x231)],_0x14ce5f=await profile['findOne']({'email':_0x5e457a[_0x15a7f5(0x20e)]}),_0x14d454=await master_shop[_0x15a7f5(0x1dc)]();console[_0x15a7f5(0x1fd)](_0x15a7f5(0x1b1),_0x14d454);const _0x30d560=await categories['find']({}),_0x4ec9cc=await brands['find']({}),_0x19b36f=await units[_0x15a7f5(0x1dc)]({}),_0x1f6c46=await warehouse[_0x15a7f5(0x1dc)]({'status':_0x15a7f5(0x1e7)});if(_0x14d454[0x0][_0x15a7f5(0x203)]==_0x15a7f5(0x1a6))var _0x5ce8ce=users[_0x15a7f5(0x1e1)];else{if(_0x14d454[0x0][_0x15a7f5(0x203)]=='Hindi')var _0x5ce8ce=users[_0x15a7f5(0x1a5)];else{if(_0x14d454[0x0][_0x15a7f5(0x203)]==_0x15a7f5(0x246))var _0x5ce8ce=users[_0x15a7f5(0x246)];else{if(_0x14d454[0x0][_0x15a7f5(0x203)]=='Spanish')var _0x5ce8ce=users[_0x15a7f5(0x1b9)];else{if(_0x14d454[0x0][_0x15a7f5(0x203)]==_0x15a7f5(0x198))var _0x5ce8ce=users[_0x15a7f5(0x198)];else{if(_0x14d454[0x0]['language']==_0x15a7f5(0x1c5))var _0x5ce8ce=users[_0x15a7f5(0x23b)];else{if(_0x14d454[0x0][_0x15a7f5(0x203)]==_0x15a7f5(0x23a))var _0x5ce8ce=users[_0x15a7f5(0x23a)];else{if(_0x14d454[0x0][_0x15a7f5(0x203)]==_0x15a7f5(0x1b5))var _0x5ce8ce=users[_0x15a7f5(0x210)];}}}}}}}_0xbc9b0e[_0x15a7f5(0x1fb)](_0x15a7f5(0x1d9),{'success':_0x5ad3f7[_0x15a7f5(0x24d)](_0x15a7f5(0x192)),'errors':_0x5ad3f7[_0x15a7f5(0x24d)]('errors'),'role':_0x5e457a,'profile':_0x14ce5f,'categories':_0x30d560,'brands':_0x4ec9cc,'master_shop':_0x14d454,'units':_0x19b36f,'language':_0x5ce8ce,'find_data':_0x1f6c46});}catch(_0x1f443c){console[_0x15a7f5(0x1fd)](_0x1f443c);}}),router[a0_0x402440(0x212)](a0_0x402440(0x1bb),auth,upload[a0_0x402440(0x237)]('image'),async(_0x24e2c8,_0x14e7db)=>{const _0xc23fec=a0_0x402440;try{const {name:_0x2ccef6,category:_0x2814fc,brand:_0x1f1d8d,unit:_0x2bd6cd,alertquantity:_0x2e44b4,stock:_0x40bd9a,product_code:_0xffc386,warehouse:_0x4a6c80,primary_ItemCode:_0x11e316,second_ItemCode:_0x1bea51,second_unit:_0x36ee45,maxPerUnit:_0x2d20ae,MaxPerProduct:_0x2fb222,sales_cat:_0x183eee,type_prod:_0x235194}=_0x24e2c8['body'],_0x24afca=_0x24e2c8['file']?.['filename']||_0xc23fec(0x1d1),_0x5a325a=new product({'image':_0x24afca,'name':_0x2ccef6,'category':_0x2814fc,'brand':_0x1f1d8d,'unit':_0x2bd6cd,'alertquantity':_0x2e44b4,'stock':_0x40bd9a,'product_code':_0xffc386,'warehouse':_0x4a6c80,'primary_code':_0x11e316,'secondary_code':_0x1bea51,'second_unit':_0x36ee45,'maxStocks':_0x2fb222,'maxProdPerUnit':_0x2d20ae,'sales_category':_0x183eee,'type_products':_0x235194}),_0x3a664c=await _0x5a325a[_0xc23fec(0x1a8)](),_0x18a72c=await categories[_0xc23fec(0x216)]({'name':_0x2814fc});_0x18a72c['products']=parseInt(_0x18a72c['products'])+0x1,await _0x18a72c[_0xc23fec(0x1a8)]();const _0xfef08b=await brands[_0xc23fec(0x216)]({'name':_0x1f1d8d});_0xfef08b[_0xc23fec(0x1d7)]=parseInt(_0xfef08b[_0xc23fec(0x1d7)])+0x1,await _0xfef08b[_0xc23fec(0x1a8)]();const _0x2dffd3=await units['findOne']({'name':_0x2bd6cd});_0x2dffd3[_0xc23fec(0x1d7)]=parseInt(_0x2dffd3['products'])+0x1,await _0x2dffd3[_0xc23fec(0x1a8)](),_0x24e2c8['flash']('success',_0xc23fec(0x232)),_0x14e7db[_0xc23fec(0x1ff)](_0xc23fec(0x22e));}catch(_0x11053c){console[_0xc23fec(0x1fd)](_0x11053c);}}),router['get']('/view/:id',auth,async(_0x5a14fb,_0x518165)=>{const _0x509900=a0_0x402440;try{const {username:_0x3d4e70,email:_0x443fb6,role:_0x4ea800}=_0x5a14fb[_0x509900(0x231)],_0x16dfa9=_0x5a14fb['user'],_0x1fd7b8=await profile[_0x509900(0x216)]({'email':_0x16dfa9[_0x509900(0x20e)]}),_0x314cdc=await master_shop['find']();console[_0x509900(0x1fd)](_0x509900(0x1e6),_0x314cdc);const _0x27daab=_0x5a14fb[_0x509900(0x1ba)]['id'],_0x370e2d=await product[_0x509900(0x22f)](_0x27daab),_0x12d11c=await categories[_0x509900(0x1dc)]({}),_0x33a85b=await brands[_0x509900(0x1dc)]({}),_0x4ec1bc=await units[_0x509900(0x1dc)]({}),_0x4da09a=await warehouse[_0x509900(0x1dc)]({'status':'Enabled'}),_0x267383=await units['aggregate']([{'$group':{'_id':_0x509900(0x218),'secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x314cdc[0x0][_0x509900(0x203)]==_0x509900(0x1a6))var _0x398350=users[_0x509900(0x1e1)];else{if(_0x314cdc[0x0][_0x509900(0x203)]==_0x509900(0x1a5))var _0x398350=users[_0x509900(0x1a5)];else{if(_0x314cdc[0x0][_0x509900(0x203)]==_0x509900(0x246))var _0x398350=users[_0x509900(0x246)];else{if(_0x314cdc[0x0][_0x509900(0x203)]=='Spanish')var _0x398350=users[_0x509900(0x1b9)];else{if(_0x314cdc[0x0][_0x509900(0x203)]==_0x509900(0x198))var _0x398350=users['French'];else{if(_0x314cdc[0x0][_0x509900(0x203)]==_0x509900(0x1c5))var _0x398350=users[_0x509900(0x23b)];else{if(_0x314cdc[0x0][_0x509900(0x203)]==_0x509900(0x23a))var _0x398350=users['Chinese'];else{if(_0x314cdc[0x0][_0x509900(0x203)]==_0x509900(0x1b5))var _0x398350=users['Arabic'];}}}}}}}_0x518165[_0x509900(0x1fb)]('edit_product',{'success':_0x5a14fb[_0x509900(0x24d)]('success'),'errors':_0x5a14fb[_0x509900(0x24d)]('errors'),'role':_0x16dfa9,'profile':_0x1fd7b8,'alldata':_0x370e2d,'categories':_0x12d11c,'brands':_0x33a85b,'master_shop':_0x314cdc,'units':_0x4ec1bc,'secondunit':_0x267383,'find_data':_0x4da09a,'language':_0x398350});}catch(_0x5c9f5a){console[_0x509900(0x1fd)](_0x5c9f5a);}}),router[a0_0x402440(0x212)](a0_0x402440(0x1d4),auth,upload[a0_0x402440(0x237)](a0_0x402440(0x1b7)),async(_0x22b4df,_0xafa210)=>{const _0x4ead2f=a0_0x402440;try{const _0x45c156=_0x22b4df[_0x4ead2f(0x1ba)]['id'],_0x5edf32=await product[_0x4ead2f(0x22f)](_0x45c156),{image:_0x57a769,name:_0x1b73ee,category:_0x5e183b,brand:_0x310035,sku:_0x2a3c13,unit:_0x5c979f,alertquantity:_0x3c7462,product_code:_0x1f5c90,warehouse:_0x13c28f,primary_ItemCode:_0xfe19f6,second_ItemCode:_0x279ad9,second_unit:_0x407225,maxPerUnit:_0x248261,MaxPerProduct:_0x53badd,prod_catdata:_0x108dad,type_prod:_0x172339,sales_cat:_0x51de00}=_0x22b4df['body'];_0x22b4df[_0x4ead2f(0x1bc)]&&(_0x5edf32['image']=_0x22b4df['file'][_0x4ead2f(0x20c)]);_0x5edf32['name']=_0x1b73ee,_0x5edf32[_0x4ead2f(0x19f)]=_0x5e183b,_0x5edf32[_0x4ead2f(0x23d)]=_0x310035,_0x5edf32[_0x4ead2f(0x193)]=_0x2a3c13,_0x5edf32[_0x4ead2f(0x240)]=_0x5c979f,_0x5edf32[_0x4ead2f(0x1ad)]=_0x3c7462,_0x5edf32['product_code']=_0x1f5c90,_0x5edf32[_0x4ead2f(0x1ef)]=_0x13c28f,_0x5edf32[_0x4ead2f(0x19d)]=_0xfe19f6,_0x5edf32['secondary_code']=_0x279ad9,_0x5edf32[_0x4ead2f(0x1ab)]=_0x407225,_0x5edf32[_0x4ead2f(0x214)]=_0x53badd,_0x5edf32['maxProdPerUnit']=_0x248261,_0x5edf32[_0x4ead2f(0x1f0)]=_0x108dad,_0x5edf32[_0x4ead2f(0x219)]=_0x172339,_0x5edf32[_0x4ead2f(0x1a4)]=_0x51de00;const _0x3ca111=await _0x5edf32[_0x4ead2f(0x1a8)]();console['log'](_0x4ead2f(0x243),_0x5edf32),_0x22b4df['flash'](_0x4ead2f(0x192),_0x4ead2f(0x21a)),_0xafa210[_0x4ead2f(0x1ff)](_0x4ead2f(0x22e));}catch(_0x4011e0){console[_0x4ead2f(0x1fd)](_0x4011e0);}}),router['get'](a0_0x402440(0x1fc),auth,async(_0x4209a8,_0x2b2978)=>{const _0x1edb04=a0_0x402440;try{const {username:_0x21fd4a,email:_0x3c338c,role:_0x419182}=_0x4209a8[_0x1edb04(0x231)],_0x4f159a=_0x4209a8['user'],_0x2d97e3=await profile['findOne']({'email':_0x4f159a[_0x1edb04(0x20e)]}),_0x2f2049=await master_shop[_0x1edb04(0x1dc)]();console[_0x1edb04(0x1fd)](_0x1edb04(0x190),_0x2f2049);const _0x5b57e7=_0x4209a8[_0x1edb04(0x1ba)]['id'],_0x5722a5=await product[_0x1edb04(0x22f)](_0x5b57e7);console[_0x1edb04(0x1fd)](_0x1edb04(0x205),_0x5722a5);if(_0x2f2049[0x0]['language']==_0x1edb04(0x1a6))var _0x18550d=users[_0x1edb04(0x1e1)];else{if(_0x2f2049[0x0][_0x1edb04(0x203)]==_0x1edb04(0x1a5))var _0x18550d=users[_0x1edb04(0x1a5)];else{if(_0x2f2049[0x0]['language']==_0x1edb04(0x246))var _0x18550d=users['German'];else{if(_0x2f2049[0x0][_0x1edb04(0x203)]==_0x1edb04(0x1b9))var _0x18550d=users[_0x1edb04(0x1b9)];else{if(_0x2f2049[0x0][_0x1edb04(0x203)]==_0x1edb04(0x198))var _0x18550d=users[_0x1edb04(0x198)];else{if(_0x2f2049[0x0][_0x1edb04(0x203)]==_0x1edb04(0x1c5))var _0x18550d=users[_0x1edb04(0x23b)];else{if(_0x2f2049[0x0][_0x1edb04(0x203)]==_0x1edb04(0x23a))var _0x18550d=users[_0x1edb04(0x23a)];else{if(_0x2f2049[0x0]['language']==_0x1edb04(0x1b5))var _0x18550d=users[_0x1edb04(0x210)];}}}}}}}_0x2b2978[_0x1edb04(0x1fb)](_0x1edb04(0x1ed),{'success':_0x4209a8[_0x1edb04(0x24d)]('success'),'errors':_0x4209a8['flash'](_0x1edb04(0x21c)),'role':_0x4f159a,'profile':_0x2d97e3,'alldata':_0x5722a5,'master_shop':_0x2f2049,'language':_0x18550d});}catch(_0x2d35bd){console[_0x1edb04(0x1fd)](_0x2d35bd);}}),router[a0_0x402440(0x1b2)]('/products_export_migrate_file',auth,async(_0x4f39de,_0x4b1899)=>{const _0x10c6fc=a0_0x402440;try{const _0xdebc8e=new excelJS['Workbook'](),_0x522cb0=_0xdebc8e['addWorksheet']('Products');return _0x522cb0['columns']=[{'header':'Product_Name','key':_0x10c6fc(0x1aa),'width':0xa},{'header':_0x10c6fc(0x1ee),'key':_0x10c6fc(0x20f),'width':0xa},{'header':_0x10c6fc(0x1cf),'key':_0x10c6fc(0x227),'width':0xa},{'header':_0x10c6fc(0x1e0),'key':_0x10c6fc(0x250),'width':0xa},{'header':_0x10c6fc(0x239),'key':'MaxperUnits','width':0xa},{'header':_0x10c6fc(0x217),'key':'ProductCode','width':0xa},{'header':_0x10c6fc(0x1ec),'key':_0x10c6fc(0x1c4),'width':0xa},{'header':_0x10c6fc(0x207),'key':'ProductCode','width':0xa},{'header':_0x10c6fc(0x21e),'key':_0x10c6fc(0x242),'width':0xa},{'header':'Alert_QTY','key':_0x10c6fc(0x24f),'width':0xa},{'header':_0x10c6fc(0x1de),'key':_0x10c6fc(0x24f),'width':0xa},{'header':_0x10c6fc(0x1a7),'key':_0x10c6fc(0x1be),'width':0xa}],_0x4b1899[_0x10c6fc(0x222)](_0x10c6fc(0x1fa),_0x10c6fc(0x1d3)),_0x4b1899[_0x10c6fc(0x222)](_0x10c6fc(0x21d),_0x10c6fc(0x1c3)),_0xdebc8e[_0x10c6fc(0x197)][_0x10c6fc(0x1ca)](_0x4b1899)[_0x10c6fc(0x23c)](()=>{const _0x3e34f5=_0x10c6fc;_0x4b1899[_0x3e34f5(0x204)](0xc8);});}catch(_0x558d51){_0x4b1899[_0x10c6fc(0x204)](0x190)[_0x10c6fc(0x23f)](_0x558d51);}});const storage1=multer[a0_0x402440(0x1a2)]({'destination':(_0x419caa,_0x474dc6,_0x321b82)=>{const _0x46946f=a0_0x402440;_0x321b82(null,_0x46946f(0x215));},'filename':(_0x55ca19,_0x1ec594,_0x52f33e)=>{const _0x41813c=a0_0x402440;_0x52f33e(null,Date[_0x41813c(0x1e8)]()+_0x1ec594[_0x41813c(0x22d)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x4d9a(_0x129764,_0x225f1c){const _0x33a053=a0_0x33a0();return a0_0x4d9a=function(_0x4d9a15,_0x55ae02){_0x4d9a15=_0x4d9a15-0x190;let _0x10f934=_0x33a053[_0x4d9a15];return _0x10f934;},a0_0x4d9a(_0x129764,_0x225f1c);}router['post']('/products_import_migrate_file',auth,uploadMigrate[a0_0x402440(0x237)](a0_0x402440(0x225)),async(_0x4357e6,_0x49b784)=>{const _0x371fac=a0_0x402440,_0x2eb0d9=_0x4357e6[_0x371fac(0x1bc)][_0x371fac(0x20c)],_0x59506e=await xlsx['readFile'](_0x371fac(0x19b)+_0x2eb0d9);let _0x452fb8=_0x59506e[_0x371fac(0x235)],_0x1854b1=xlsx[_0x371fac(0x1d0)][_0x371fac(0x228)](_0x59506e[_0x371fac(0x1b8)][_0x452fb8[0x0]]);for(const _0x3f994b of _0x1854b1){const _0xfba27a=_0x3f994b[_0x371fac(0x1bf)],_0x39d065=_0x3f994b[_0x371fac(0x1ee)],_0x117538=_0x3f994b['Units'],_0x375105=_0x3f994b[_0x371fac(0x1e0)],_0x39baaf=_0x3f994b[_0x371fac(0x207)],_0x1ecb01=_0x3f994b[_0x371fac(0x21e)],_0x524bda=_0x3f994b['Alert_QTY'],_0x49d2bb=_0x3f994b[_0x371fac(0x217)],_0x3fc3f5=_0x3f994b[_0x371fac(0x1ec)],_0x16586a=_0x3f994b[_0x371fac(0x1de)],_0x16fce8=_0x3f994b['max_number_per_units'],_0x44ef47=_0x3f994b[_0x371fac(0x1a7)];try{let _0x2b4d17=await categories['findOne']({'name':_0x1ecb01});if(!_0x2b4d17){const _0x31c59e=new categories({'name':_0x1ecb01,'products':'0'});_0x2b4d17=await _0x31c59e['save']();}let _0x5696b6=await brands['findOne']({'name':_0x39d065});if(!_0x5696b6){const _0x3c7591=new brands({'name':_0x39d065,'products':'0'});_0x5696b6=await _0x3c7591[_0x371fac(0x1a8)]();}let _0x3516e1=await units[_0x371fac(0x216)]({'name':_0x117538,'secondary_unit':_0x375105});if(!_0x3516e1){const _0x343beb=new units({'name':_0x117538,'secondary_unit':_0x375105,'products':'0'});_0x3516e1=await _0x343beb['save']();}const _0x5794e5=await product[_0x371fac(0x1dc)]({'name':_0xfba27a,'category':_0x2b4d17[_0x371fac(0x24a)],'brand':_0x5696b6[_0x371fac(0x24a)],'secondary_unit':_0x3516e1[_0x371fac(0x1ab)],'product_code':_0x39baaf});console['log'](_0x5794e5[_0x371fac(0x22b)]+_0x371fac(0x238)+_0x2b4d17[_0x371fac(0x24a)]+_0x371fac(0x238)+_0x5696b6[_0x371fac(0x24a)]+'\x20<>\x20'+_0x3516e1['secondary_unit']+'\x20<>\x20'+_0x39baaf+_0x371fac(0x238)+_0xfba27a);if(_0x5794e5[_0x371fac(0x22b)]===0x0){const _0x3abf41=new product({'image':_0x371fac(0x1d1),'name':_0xfba27a,'category':_0x2b4d17['name'],'brand':_0x5696b6['name'],'unit':_0x3516e1[_0x371fac(0x24a)],'alertquantity':_0x524bda,'product_code':_0x39baaf,'secondary_unit':_0x3516e1[_0x371fac(0x1ab)],'primary_code':_0x49d2bb,'secondary_code':_0x3fc3f5,'maxStocks':_0x16586a,'maxProdPerUnit':_0x16fce8,'product_category':_0x44ef47}),_0x2f616a=await _0x3abf41[_0x371fac(0x1a8)]();_0x2b4d17[_0x371fac(0x1d7)]=parseInt(_0x2b4d17[_0x371fac(0x1d7)])+0x1,await _0x2b4d17[_0x371fac(0x1a8)](),_0x5696b6['products']=parseInt(_0x5696b6[_0x371fac(0x1d7)])+0x1,await _0x5696b6[_0x371fac(0x1a8)](),_0x3516e1[_0x371fac(0x1d7)]=parseInt(_0x3516e1[_0x371fac(0x1d7)])+0x1,await _0x3516e1['save'](),_0x4357e6[_0x371fac(0x24d)](_0x371fac(0x192),_0xfba27a+'\x20added\x20successfully');}else{console[_0x371fac(0x1fd)](_0x5794e5[0x0]);const _0x2c0725=_0x5794e5[0x0];_0x2c0725[_0x371fac(0x19f)]=_0x2b4d17['name'],_0x2c0725[_0x371fac(0x23d)]=_0x5696b6['name'],_0x2c0725[_0x371fac(0x240)]=_0x3516e1[_0x371fac(0x24a)],_0x2c0725[_0x371fac(0x1ad)]=_0x524bda,_0x2c0725['product_code']=_0x39baaf,_0x2c0725[_0x371fac(0x1ab)]=_0x3516e1[_0x371fac(0x1ab)],_0x2c0725[_0x371fac(0x19d)]=_0x49d2bb,_0x2c0725['secondary_code']=_0x3fc3f5,_0x2c0725[_0x371fac(0x214)]=_0x16586a,_0x2c0725[_0x371fac(0x23e)]=_0x16fce8,_0x2c0725['product_category']=_0x44ef47;const _0xfa53b7=await _0x2c0725[_0x371fac(0x1a8)]();_0x4357e6[_0x371fac(0x24d)](_0x371fac(0x192),_0xfa53b7[_0x371fac(0x24a)]+_0x371fac(0x1a0));}}catch(_0x4ab7fb){_0x49b784[_0x371fac(0x204)](0x1f4)[_0x371fac(0x226)]({'proderror':_0x4ab7fb[_0x371fac(0x1e5)],'aproduct':_0xfba27a});}}_0x49b784['redirect'](_0x371fac(0x22e));}),router[a0_0x402440(0x212)](a0_0x402440(0x241),auth,async(_0x2d8d69,_0x41c23c)=>{const _0x204c52=a0_0x402440;try{console[_0x204c52(0x1fd)](_0x2d8d69[_0x204c52(0x1ea)]);const {data_cateory:_0x456706,datachoose:_0x7c03f5}=_0x2d8d69[_0x204c52(0x1ea)];var _0x59ab6b;if(_0x7c03f5=='prod_categ')_0x59ab6b=await product[_0x204c52(0x1e2)]([{'$group':{'_id':_0x204c52(0x202)}}]);else{if(_0x7c03f5==_0x204c52(0x1cd))_0x59ab6b=await product[_0x204c52(0x1e2)]([{'$match':{'product_category':_0x456706}},{'$group':{'_id':_0x204c52(0x247)}}]);else _0x7c03f5==_0x204c52(0x209)&&(_0x59ab6b=await product[_0x204c52(0x1e2)]([{'$match':{'product_category':_0x456706}},{'$group':{'_id':_0x204c52(0x1c0)}}]));}_0x41c23c['json'](_0x59ab6b);}catch(_0x5f51b1){_0x41c23c[_0x204c52(0x226)]({'message':_0x5f51b1[_0x204c52(0x1e5)]});}}),router[a0_0x402440(0x212)]('/filter_product',auth,async(_0x2d6573,_0x4ec819)=>{const _0x5333f1=a0_0x402440;try{const {data_choosing:_0x2a9b5f,data_selected:_0x859f68}=_0x2d6573['body'];var _0x50e79e;if(_0x2a9b5f=='prod_categ')_0x50e79e=await product[_0x5333f1(0x1e2)]([{'$match':{'product_category':_0x859f68}}]);else{if(_0x2a9b5f=='brands')_0x50e79e=await product[_0x5333f1(0x1e2)]([{'$match':{'brand':_0x859f68}}]);else _0x2a9b5f==_0x5333f1(0x209)&&(_0x50e79e=await product[_0x5333f1(0x1e2)]([{'$match':{'category':_0x859f68}}]));}_0x4ec819[_0x5333f1(0x226)](_0x50e79e);}catch(_0x4fc28a){_0x4ec819['json']({'message':_0x4fc28a[_0x5333f1(0x1e5)]});}}),router[a0_0x402440(0x1b2)](a0_0x402440(0x236),auth,async(_0x5435bf,_0x986de)=>{const _0x509456=a0_0x402440,_0x498370=_0x5435bf[_0x509456(0x231)],_0x118ba5=await profile[_0x509456(0x216)]({'email':_0x498370['email']}),_0x1924a0=await master_shop[_0x509456(0x1dc)](),_0x2c0b8f=await product[_0x509456(0x1dc)]();if(_0x1924a0[0x0][_0x509456(0x203)]==_0x509456(0x1a6))var _0x48d6d1=users['English'];else{if(_0x1924a0[0x0]['language']==_0x509456(0x1a5))var _0x48d6d1=users[_0x509456(0x1a5)];else{if(_0x1924a0[0x0]['language']==_0x509456(0x246))var _0x48d6d1=users[_0x509456(0x246)];else{if(_0x1924a0[0x0]['language']==_0x509456(0x1b9))var _0x48d6d1=users['Spanish'];else{if(_0x1924a0[0x0][_0x509456(0x203)]==_0x509456(0x198))var _0x48d6d1=users[_0x509456(0x198)];else{if(_0x1924a0[0x0][_0x509456(0x203)]=='Portuguese\x20(BR)')var _0x48d6d1=users[_0x509456(0x23b)];else{if(_0x1924a0[0x0][_0x509456(0x203)]==_0x509456(0x23a))var _0x48d6d1=users[_0x509456(0x23a)];else{if(_0x1924a0[0x0]['language']=='Arabic\x20(ae)')var _0x48d6d1=users[_0x509456(0x210)];}}}}}}}_0x986de[_0x509456(0x1fb)](_0x509456(0x1e9),{'success':_0x5435bf['flash']('success'),'errors':_0x5435bf['flash'](_0x509456(0x21c)),'role':_0x498370,'profile':_0x118ba5,'products':_0x2c0b8f,'master_shop':_0x1924a0,'language':_0x48d6d1});}),router['post'](a0_0x402440(0x200),auth,async(_0x483b6f,_0xaf4f9f)=>{const _0xce2fb6=a0_0x402440,_0x4958cb=await product[_0xce2fb6(0x1dc)]();_0xaf4f9f[_0xce2fb6(0x226)]({'data':_0x4958cb});}),router[a0_0x402440(0x212)](a0_0x402440(0x22a),auth,async(_0x113632,_0x200081)=>{const _0x13024b=a0_0x402440;try{const {dataProdCat:_0xbdd57b,dataProdIdentity:_0x1d4087}=_0x113632['body'];var _0xdf55a7;switch(_0xbdd57b){case'fg':switch(_0x1d4087){case _0x13024b(0x1ee):_0xdf55a7=await product['aggregate']([{'$match':{'product_category':_0x13024b(0x1b6)}},{'$group':{'_id':_0x13024b(0x247)}},{'$project':{'brand':_0x13024b(0x218)}}]);break;case _0x13024b(0x21e):_0xdf55a7=await product[_0x13024b(0x1e2)]([{'$match':{'product_category':_0x13024b(0x1b6)}},{'$group':{'_id':_0x13024b(0x1c0)}},{'$project':{'category':_0x13024b(0x218)}}]);break;}break;case'rm':switch(_0x1d4087){case _0x13024b(0x1ee):_0xdf55a7=await product['aggregate']([{'$match':{'product_category':_0x13024b(0x211)}},{'$group':{'_id':_0x13024b(0x247)}},{'$project':{'brand':_0x13024b(0x218)}}]);break;case _0x13024b(0x21e):_0xdf55a7=await product[_0x13024b(0x1e2)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x13024b(0x1c0)}},{'$project':{'category':_0x13024b(0x218)}}]);break;}break;}_0x200081['json'](_0xdf55a7);}catch(_0x3a57cd){_0x200081[_0x13024b(0x226)]({'message':_0x3a57cd[_0x13024b(0x1e5)]});}}),router[a0_0x402440(0x212)]('/print_barcode_filter/',auth,async(_0x107b1c,_0x2974c1)=>{const _0x51010c=a0_0x402440;try{console['log'](_0x107b1c['body']);const {prod_cat:_0x4e3ef0,identity:_0x280e0b,valueData:_0x1e7fc2,typeofbarcode:_0x11727e}=_0x107b1c[_0x51010c(0x1ea)];let _0x4ae3ff;switch(_0x4e3ef0){case'fg':if(_0x280e0b==_0x51010c(0x1ee))_0x4ae3ff=await product[_0x51010c(0x1e2)]([{'$match':{'product_category':_0x51010c(0x1b6),'brand':_0x1e7fc2}}]);else _0x280e0b==_0x51010c(0x21e)&&(_0x4ae3ff=await product['aggregate']([{'$match':{'product_category':_0x51010c(0x1b6),'category':_0x1e7fc2}}]));break;case'rm':if(_0x280e0b=='Brands')_0x4ae3ff=await product[_0x51010c(0x1e2)]([{'$match':{'product_category':_0x51010c(0x211),'brand':_0x1e7fc2}}]);else _0x280e0b=='Category'&&(_0x4ae3ff=await product[_0x51010c(0x1e2)]([{'$match':{'product_category':_0x51010c(0x211),'category':_0x1e7fc2}}]));break;}const _0x103cf2=_0x4b4a28=>_0x4b4a28*0x48,_0x1a7ccb={'width':0x3,'height':0x1},_0x53df39=new PDFDocument({'margin':_0x103cf2(0.75),'size':[_0x103cf2(_0x1a7ccb[_0x51010c(0x1b3)]),_0x103cf2(_0x1a7ccb['height'])],'bufferPages':!![]}),_0x2d21e2=_0x4ae3ff[_0x51010c(0x22b)];for(let _0x48df5b=0x0;_0x48df5b<=_0x2d21e2;_0x48df5b++){if(_0x48df5b!=_0x2d21e2){const _0x2683de=_0x4ae3ff[_0x48df5b][_0x51010c(0x24a)],_0x4f4ab3=_0x4ae3ff[_0x48df5b]['primary_code'],_0x2b4076=_0x4ae3ff[_0x48df5b][_0x51010c(0x1f2)],_0x2df6ea=_0x4ae3ff[_0x48df5b][_0x51010c(0x24c)];var _0x2fac28;switch(_0x11727e){case'1':_0x2fac28=_0x4f4ab3;break;case'2':_0x2fac28=_0x2b4076;break;case'3':_0x2fac28=_0x2df6ea;break;}const _0x3c0350={'width':0xd2,'height':0x64},_0x1562a5={'width':_0x103cf2(_0x1a7ccb[_0x51010c(0x1b3)]),'height':_0x103cf2(_0x1a7ccb[_0x51010c(0x1b4)])},_0x26f5c2=new Canvas();JsBarcode(_0x26f5c2,_0x2fac28,{'format':_0x51010c(0x1d2),'height':_0x3c0350[_0x51010c(0x1b4)],'displayValue':!![],'text':_0x2fac28});const _0x2b1591=_0x26f5c2[_0x51010c(0x1f3)](),_0x21e0ac=_0x1562a5[_0x51010c(0x1b3)]/_0x3c0350[_0x51010c(0x1b3)],_0x1f7eb0=_0x1562a5[_0x51010c(0x1b4)]/_0x3c0350[_0x51010c(0x1b4)],_0x322ca8=Math[_0x51010c(0x20b)](_0x21e0ac,_0x1f7eb0),_0x524f58=_0x3c0350[_0x51010c(0x1b3)]*_0x322ca8,_0xaf0273=_0x3c0350['height']*_0x322ca8,_0x3f8617=(_0x1562a5[_0x51010c(0x1b3)]-_0x524f58)/0x2,_0x40ec02=(_0x1562a5[_0x51010c(0x1b4)]-_0xaf0273)/0x2;_0x53df39[_0x51010c(0x1b7)](_0x2b1591,_0x3f8617,_0x40ec02,{'width':_0x524f58,'height':_0xaf0273}),_0x48df5b!=_0x2d21e2&&_0x53df39[_0x51010c(0x1e3)]();}}const _0x87bac5=[];_0x53df39['on'](_0x51010c(0x224),_0x87bac5[_0x51010c(0x1ae)][_0x51010c(0x21f)](_0x87bac5)),_0x53df39['on'](_0x51010c(0x19a),()=>{const _0x4543d2=_0x51010c,_0x123a00=Buffer[_0x4543d2(0x1f1)](_0x87bac5),_0x11ed93=_0x123a00[_0x4543d2(0x1f7)](_0x4543d2(0x20d));_0x2974c1[_0x4543d2(0x226)]({'pdfContent':_0x11ed93});}),_0x53df39['end']();}catch(_0x43a974){_0x2974c1['json']({'message':_0x43a974[_0x51010c(0x1e5)]});}}),router[a0_0x402440(0x212)](a0_0x402440(0x1ac),auth,async(_0x11fa5d,_0x2ae1ed)=>{const _0x55223a=a0_0x402440;try{console[_0x55223a(0x1fd)](_0x11fa5d[_0x55223a(0x1ea)]);const {prod_cat:_0xec30ab,identity:_0x2ce039,valueData:_0x29b0d3}=_0x11fa5d[_0x55223a(0x1ea)];let _0x4f8fc9;switch(_0xec30ab){case'fg':if(_0x2ce039=='Brands')_0x4f8fc9=await product[_0x55223a(0x1e2)]([{'$match':{'product_category':_0x55223a(0x1b6),'brand':_0x29b0d3}}]);else _0x2ce039==_0x55223a(0x21e)&&(_0x4f8fc9=await product[_0x55223a(0x1e2)]([{'$match':{'product_category':_0x55223a(0x1b6),'category':_0x29b0d3}}]));break;case'rm':if(_0x2ce039==_0x55223a(0x1ee))_0x4f8fc9=await product[_0x55223a(0x1e2)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x29b0d3}}]);else _0x2ce039==_0x55223a(0x21e)&&(_0x4f8fc9=await product['aggregate']([{'$match':{'product_category':_0x55223a(0x211),'category':_0x29b0d3}}]));break;}_0x2ae1ed[_0x55223a(0x226)]({'data':_0x4f8fc9});}catch(_0x40393a){_0x2ae1ed['json']({'message':_0x40393a['message']});}}),router[a0_0x402440(0x212)](a0_0x402440(0x196),auth,async(_0x4a5da2,_0x12285c)=>{const _0x26bf4d=a0_0x402440;try{const _0x10b9a1=_0x4a5da2[_0x26bf4d(0x1ba)]['id'],{copies:_0x131858,typeofbarcode:_0x2daa1a}=_0x4a5da2[_0x26bf4d(0x1ea)];var _0x4ddc5d=await product[_0x26bf4d(0x22f)](_0x10b9a1);const _0x14ec9a=_0x492b77=>_0x492b77*0x48,_0x4f8cad={'width':0x3,'height':0x1},_0xcdfe41=new PDFDocument({'margin':_0x14ec9a(0.75),'size':[_0x14ec9a(_0x4f8cad[_0x26bf4d(0x1b3)]),_0x14ec9a(_0x4f8cad['height'])],'bufferPages':!![]}),_0x53bd7e=_0x131858,_0x35cc9f=_0x4ddc5d['name'],_0x464562=_0x4ddc5d[_0x26bf4d(0x19d)],_0x235c16=_0x4ddc5d[_0x26bf4d(0x1f2)],_0x2707ce=_0x4ddc5d[_0x26bf4d(0x24c)];let _0x44a441;switch(_0x2daa1a){case'1':_0x44a441=_0x464562;break;case'2':_0x44a441=_0x235c16;break;case'3':_0x44a441=_0x2707ce;break;}const _0x230d0f={'width':0xd2,'height':0x64},_0x1bbd9e={'width':_0x14ec9a(_0x4f8cad[_0x26bf4d(0x1b3)]),'height':_0x14ec9a(_0x4f8cad['height'])};for(let _0x58e46e=0x1;_0x58e46e<=_0x53bd7e;_0x58e46e++){const _0x3e1e75=new Canvas();JsBarcode(_0x3e1e75,_0x44a441,{'format':_0x26bf4d(0x1d2),'height':_0x230d0f[_0x26bf4d(0x1b4)],'displayValue':!![],'text':_0x44a441});const _0x356659=_0x3e1e75[_0x26bf4d(0x1f3)](),_0x81887a=_0x1bbd9e[_0x26bf4d(0x1b3)]/_0x230d0f[_0x26bf4d(0x1b3)],_0x2cee01=_0x1bbd9e[_0x26bf4d(0x1b4)]/_0x230d0f[_0x26bf4d(0x1b4)],_0x3e0091=Math['min'](_0x81887a,_0x2cee01),_0x27c359=_0x230d0f[_0x26bf4d(0x1b3)]*_0x3e0091,_0x2a8965=_0x230d0f[_0x26bf4d(0x1b4)]*_0x3e0091,_0x12ae92=(_0x1bbd9e['width']-_0x27c359)/0x2,_0x2cd810=(_0x1bbd9e['height']-_0x2a8965)/0x2;_0xcdfe41[_0x26bf4d(0x1b7)](_0x356659,_0x12ae92,_0x2cd810,{'width':_0x27c359,'height':_0x2a8965}),_0x58e46e!=_0x53bd7e&&_0xcdfe41[_0x26bf4d(0x1e3)]();}const _0x456ab9=[];_0xcdfe41['on'](_0x26bf4d(0x224),_0x456ab9[_0x26bf4d(0x1ae)][_0x26bf4d(0x21f)](_0x456ab9)),_0xcdfe41['on'](_0x26bf4d(0x19a),()=>{const _0x3f2428=_0x26bf4d,_0x107352=Buffer['concat'](_0x456ab9),_0x334e14=_0x107352[_0x3f2428(0x1f7)](_0x3f2428(0x20d));_0x12285c[_0x3f2428(0x226)]({'pdfContent':_0x334e14});}),_0xcdfe41[_0x26bf4d(0x19a)]();}catch(_0x24b9dd){_0x12285c[_0x26bf4d(0x226)]({'message':_0x24b9dd['message']});}}),module['exports']=router;