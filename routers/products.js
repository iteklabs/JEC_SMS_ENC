const a0_0x434e39=a0_0x31ef;(function(_0x417bd8,_0x3445a7){const _0x42568f=a0_0x31ef,_0x373784=_0x417bd8();while(!![]){try{const _0x5c9750=-parseInt(_0x42568f(0x118))/0x1+-parseInt(_0x42568f(0x1b3))/0x2+-parseInt(_0x42568f(0xf6))/0x3+-parseInt(_0x42568f(0x123))/0x4*(parseInt(_0x42568f(0x111))/0x5)+parseInt(_0x42568f(0x181))/0x6*(parseInt(_0x42568f(0x110))/0x7)+-parseInt(_0x42568f(0x1ac))/0x8*(-parseInt(_0x42568f(0x146))/0x9)+parseInt(_0x42568f(0x13b))/0xa;if(_0x5c9750===_0x3445a7)break;else _0x373784['push'](_0x373784['shift']());}catch(_0x36c57d){_0x373784['push'](_0x373784['shift']());}}}(a0_0x54b5,0xbf10b));function a0_0x31ef(_0x504279,_0x3241d2){const _0x54b562=a0_0x54b5();return a0_0x31ef=function(_0x31efe4,_0x5c7e8c){_0x31efe4=_0x31efe4-0xed;let _0xacdb7=_0x54b562[_0x31efe4];return _0xacdb7;},a0_0x31ef(_0x504279,_0x3241d2);}function a0_0x54b5(){const _0x104780=['Finished\x20Goods','units','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','public/upload','Portuguese','findById','PSecondaryUnits','sheet_to_json','exceljs','/categories','/brands/delete/:id','/filter_product','diskStorage','Products_category','canvas','unit','\x20<>\x20','add_product','unit\x20data\x20delete\x20successfully','json','multer','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','aggregate','base64','$brand','Brands','/select_data','Product_Code','height','alertquantity','\x20Edit\x20Successfully','/brands/:id','Prod_Cat','240552IxwMwM','/brands','$secondary_unit','unit\x20data\x20update\x20successfully','bind','PUnits','\x20brand\x20is\x20add\x20successfully','2751286dEqrdA','/products/brands','success','public/Migration/','now','/barcode_data','forEach','English\x20(US)','utils','maxStocks','min','SheetNames','2378364BHnXsB','addWorksheet','message','image','findOne','Products\x20find_data','status','filename','toBuffer','product_code','CODE128','MaxperUnits','primary_code','push','render','product_barcode_products','sales_category','master','width','Router','$product_details.product_stock','../public/language/languages.json','barcode\x20user_id','setHeader','findByIdAndUpdate','migrate_product_fule','33509RWmXcm','5jDGjGl','Products','$product_docs','/products/view','user','Spanish','then','976551SAbyBf','product_category','concat','end','category','Sheets','max_number_per_units','stock','/products/units','barcode\x20Product\x20master','columns','2425704HCzNOA','Secondary_Units','/print_barcode_filter_search/','findByIdAndDelete','Units','product_docs','Arabic\x20(ae)','PName','save','secondary_unit','/units/:id','flash','/barcode_filter','Chinese','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','brand\x20data\x20update\x20successfully','name','brands','Content-Disposition','errors','toString','maxProdPerUnit','xlsx','$product_name','34258100GbNuTC','email','PCat','Products\x20master','\x20categories\x20is\x20add\x20successfully','jsbarcode','file','ProductCode','brand\x20data\x20delete\x20successfully','send','$category','144IbZcWU','brand','Alert_QTY','/products/categories','/units/delete/:id','numeric','Enabled','defaultProduct.avif','prod_categ','sku','params','write','length','/view','Portuguese\x20(BR)','data','single','get','/categories/:id','Category','product_barcode','exports','Workbook','edit\x20Product\x20master','Hindi','/units','\x20unit\x20is\x20add\x20successfully','pdfkit-table','/view/:id','PBrands','categories\x20data\x20delete\x20successfully','product\x20update\x20successfully','warehouse','Arabic','categ','\x20added\x20successfully','express','/view/add_products','express/lib/response','Content-Type','post','Secondary_Code','French','products','categories','$product_details','English','../middleware/auth','originalname','language','/print_barcode','$product_details.product_name','Product_Name','Raw\x20Materials','body','log','secondary_code','/print_barcode_single/:id','German','786hBzCHi','$_id','/categories/delete/:id','readFile','Primary_Code','$product_category','redirect','map','find','/barcode/:id'];a0_0x54b5=function(){return _0x104780;};return a0_0x54b5();}const express=require(a0_0x434e39(0x16a)),res=require(a0_0x434e39(0x16c)),app=express(),router=express[a0_0x434e39(0x109)](),multer=require(a0_0x434e39(0x19f)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x434e39(0x175)),users=require(a0_0x434e39(0x10b)),excelJS=require(a0_0x434e39(0x193)),xlsx=require('xlsx'),JsBarcode=require(a0_0x434e39(0x140)),{Canvas}=require(a0_0x434e39(0x199)),PDFDocument=require(a0_0x434e39(0x161));router[a0_0x434e39(0x157)](a0_0x434e39(0x194),auth,async(_0x21f4c3,_0x5b9ca4)=>{const _0x6e2619=a0_0x434e39;try{const {username:_0x16964d,email:_0x1d0825,role:_0x918c3d}=_0x21f4c3[_0x6e2619(0x115)],_0x59f47c=_0x21f4c3['user'],_0x2fc410=await profile[_0x6e2619(0xfa)]({'email':_0x59f47c[_0x6e2619(0x13c)]}),_0x5ba3ad=await master_shop['find']();console['log'](_0x6e2619(0x107),_0x5ba3ad);const _0x32101f=await categories[_0x6e2619(0x189)]();if(_0x5ba3ad[0x0][_0x6e2619(0x177)]==_0x6e2619(0xf1))var _0x1373ab=users['English'];else{if(_0x5ba3ad[0x0][_0x6e2619(0x177)]==_0x6e2619(0x15e))var _0x1373ab=users['Hindi'];else{if(_0x5ba3ad[0x0][_0x6e2619(0x177)]==_0x6e2619(0x180))var _0x1373ab=users[_0x6e2619(0x180)];else{if(_0x5ba3ad[0x0][_0x6e2619(0x177)]==_0x6e2619(0x116))var _0x1373ab=users[_0x6e2619(0x116)];else{if(_0x5ba3ad[0x0][_0x6e2619(0x177)]==_0x6e2619(0x170))var _0x1373ab=users['French'];else{if(_0x5ba3ad[0x0][_0x6e2619(0x177)]==_0x6e2619(0x154))var _0x1373ab=users[_0x6e2619(0x18f)];else{if(_0x5ba3ad[0x0][_0x6e2619(0x177)]==_0x6e2619(0x130))var _0x1373ab=users['Chinese'];else{if(_0x5ba3ad[0x0][_0x6e2619(0x177)]==_0x6e2619(0x129))var _0x1373ab=users[_0x6e2619(0x167)];}}}}}}}_0x5b9ca4['render'](_0x6e2619(0x172),{'success':_0x21f4c3[_0x6e2619(0x12e)](_0x6e2619(0x1b5)),'errors':_0x21f4c3['flash'](_0x6e2619(0x136)),'role':_0x59f47c,'profile':_0x2fc410,'user':_0x32101f,'master_shop':_0x5ba3ad,'language':_0x1373ab});}catch(_0x5b1cc8){console[_0x6e2619(0x17d)](_0x5b1cc8);}}),router[a0_0x434e39(0x16e)]('/categories',auth,async(_0x55dbe0,_0x1a1dbe)=>{const _0x258685=a0_0x434e39;try{const {name:_0xa1ef94,products:_0x38f2b5}=_0x55dbe0[_0x258685(0x17c)],_0x4e7226=new categories({'name':_0xa1ef94,'products':_0x38f2b5}),_0x1101c9=await categories[_0x258685(0xfa)]({'name':_0xa1ef94});_0x1101c9?_0x55dbe0[_0x258685(0x12e)](_0x258685(0x136),_0xa1ef94+_0x258685(0x131)):_0x55dbe0[_0x258685(0x12e)](_0x258685(0x1b5),_0xa1ef94+_0x258685(0x13f));const _0x34afcc=await _0x4e7226[_0x258685(0x12b)]();_0x1a1dbe[_0x258685(0x187)]('/products/categories');}catch(_0x27b759){console[_0x258685(0x17d)](_0x27b759);}}),router[a0_0x434e39(0x157)](a0_0x434e39(0x158),auth,async(_0xaed568,_0x5929df)=>{const _0x1efcb4=a0_0x434e39;try{const {username:_0xc3d09f,email:_0x560091,role:_0x1bccf1}=_0xaed568[_0x1efcb4(0x115)],_0x404a4f=_0xaed568[_0x1efcb4(0x115)],_0x484e81=await profile[_0x1efcb4(0xfa)]({'email':_0x404a4f['email']}),_0xa1bfb4=await master_shop[_0x1efcb4(0x189)]();console[_0x1efcb4(0x17d)](_0x1efcb4(0x107),_0xa1bfb4);const _0x41c270=_0xaed568[_0x1efcb4(0x150)]['id'];console['log'](_0x41c270);const _0x2bd19b=await categories[_0x1efcb4(0x190)](_0x41c270);if(_0xa1bfb4[0x0][_0x1efcb4(0x177)]=='English\x20(US)')var _0x176994=users[_0x1efcb4(0x174)];else{if(_0xa1bfb4[0x0][_0x1efcb4(0x177)]=='Hindi')var _0x176994=users[_0x1efcb4(0x15e)];else{if(_0xa1bfb4[0x0]['language']==_0x1efcb4(0x180))var _0x176994=users['German'];else{if(_0xa1bfb4[0x0]['language']==_0x1efcb4(0x116))var _0x176994=users['Spanish'];else{if(_0xa1bfb4[0x0][_0x1efcb4(0x177)]==_0x1efcb4(0x170))var _0x176994=users[_0x1efcb4(0x170)];else{if(_0xa1bfb4[0x0][_0x1efcb4(0x177)]==_0x1efcb4(0x154))var _0x176994=users[_0x1efcb4(0x18f)];else{if(_0xa1bfb4[0x0][_0x1efcb4(0x177)]=='Chinese')var _0x176994=users[_0x1efcb4(0x130)];else{if(_0xa1bfb4[0x0]['language']==_0x1efcb4(0x129))var _0x176994=users[_0x1efcb4(0x167)];}}}}}}}_0x5929df[_0x1efcb4(0x104)](_0x1efcb4(0x172),{'success':_0xaed568['flash']('success'),'errors':_0xaed568[_0x1efcb4(0x12e)](_0x1efcb4(0x136)),'role':_0x404a4f,'profile':_0x484e81,'master_shop':_0xa1bfb4,'user':_0x2bd19b,'language':_0x176994});}catch(_0x2df4aa){console['log'](_0x2df4aa);}}),router[a0_0x434e39(0x16e)](a0_0x434e39(0x158),auth,async(_0x27567c,_0x479e0b)=>{const _0x20584d=a0_0x434e39;try{const _0x17b67b=_0x27567c[_0x20584d(0x150)]['id'],_0x1704f3=await categories[_0x20584d(0x10e)](_0x17b67b,_0x27567c[_0x20584d(0x17c)]);_0x27567c[_0x20584d(0x12e)](_0x20584d(0x1b5),''+users['categories_edit']),_0x479e0b[_0x20584d(0x187)](_0x20584d(0x149));}catch(_0x12c282){console[_0x20584d(0x17d)](_0x12c282);}}),router['get'](a0_0x434e39(0x183),auth,async(_0x44f23f,_0x3ce64d)=>{const _0x27d867=a0_0x434e39;try{const _0x5e0f39=_0x44f23f[_0x27d867(0x150)]['id'],_0x2fe69a=await categories[_0x27d867(0x126)](_0x5e0f39);_0x44f23f[_0x27d867(0x12e)](_0x27d867(0x1b5),_0x27d867(0x164)),_0x3ce64d['redirect']('/products/categories');}catch(_0x2767f3){console[_0x27d867(0x17d)](_0x2767f3);}}),router[a0_0x434e39(0x157)](a0_0x434e39(0x1ad),auth,async(_0x11bd06,_0x510df5)=>{const _0x182395=a0_0x434e39;try{const {username:_0x4c0314,email:_0x1433a5,role:_0x40f935}=_0x11bd06['user'],_0x2eecd7=_0x11bd06[_0x182395(0x115)],_0x1a2128=await profile['findOne']({'email':_0x2eecd7[_0x182395(0x13c)]}),_0x38c83a=await master_shop[_0x182395(0x189)]();console[_0x182395(0x17d)](_0x182395(0x107),_0x38c83a);const _0x52f9eb=await brands[_0x182395(0x189)]();if(_0x38c83a[0x0][_0x182395(0x177)]==_0x182395(0xf1))var _0x34f5e3=users[_0x182395(0x174)];else{if(_0x38c83a[0x0]['language']==_0x182395(0x15e))var _0x34f5e3=users[_0x182395(0x15e)];else{if(_0x38c83a[0x0][_0x182395(0x177)]==_0x182395(0x180))var _0x34f5e3=users['German'];else{if(_0x38c83a[0x0][_0x182395(0x177)]==_0x182395(0x116))var _0x34f5e3=users[_0x182395(0x116)];else{if(_0x38c83a[0x0][_0x182395(0x177)]==_0x182395(0x170))var _0x34f5e3=users['French'];else{if(_0x38c83a[0x0][_0x182395(0x177)]==_0x182395(0x154))var _0x34f5e3=users['Portuguese'];else{if(_0x38c83a[0x0][_0x182395(0x177)]==_0x182395(0x130))var _0x34f5e3=users[_0x182395(0x130)];else{if(_0x38c83a[0x0][_0x182395(0x177)]==_0x182395(0x129))var _0x34f5e3=users['Arabic'];}}}}}}}_0x510df5[_0x182395(0x104)](_0x182395(0x134),{'success':_0x11bd06[_0x182395(0x12e)](_0x182395(0x1b5)),'errors':_0x11bd06[_0x182395(0x12e)]('errors'),'role':_0x2eecd7,'profile':_0x1a2128,'master_shop':_0x38c83a,'user':_0x52f9eb,'language':_0x34f5e3});}catch(_0x413ba2){console[_0x182395(0x17d)](_0x413ba2);}}),router[a0_0x434e39(0x16e)](a0_0x434e39(0x1ad),auth,async(_0x22652b,_0x154850)=>{const _0x13caa1=a0_0x434e39;try{const {name:_0x586556,products:_0x57ce2f}=_0x22652b[_0x13caa1(0x17c)],_0x296174=new brands({'name':_0x586556,'products':_0x57ce2f}),_0x5c6038=await brands[_0x13caa1(0xfa)]({'name':_0x586556});_0x5c6038?_0x22652b['flash']('errors',_0x586556+_0x13caa1(0x1a0)):_0x22652b[_0x13caa1(0x12e)](_0x13caa1(0x1b5),_0x586556+_0x13caa1(0x1b2));const _0x24ce6b=await _0x296174[_0x13caa1(0x12b)]();_0x154850['redirect'](_0x13caa1(0x1b4));}catch(_0x44008b){console[_0x13caa1(0x17d)](_0x44008b);}}),router[a0_0x434e39(0x157)](a0_0x434e39(0x1aa),auth,async(_0x39adb5,_0xf73178)=>{const _0x277af4=a0_0x434e39;try{const {username:_0x3e6143,email:_0x1646ce,role:_0x135a09}=_0x39adb5[_0x277af4(0x115)],_0x3349fa=_0x39adb5[_0x277af4(0x115)],_0x460f8d=await profile[_0x277af4(0xfa)]({'email':_0x3349fa[_0x277af4(0x13c)]}),_0xa1d88e=await master_shop[_0x277af4(0x189)]();console[_0x277af4(0x17d)](_0x277af4(0x107),_0xa1d88e);const _0x288ebe=_0x39adb5[_0x277af4(0x150)]['id'];console[_0x277af4(0x17d)](_0x288ebe);const _0x13e31a=await brands[_0x277af4(0x190)](_0x288ebe);if(_0xa1d88e[0x0][_0x277af4(0x177)]==_0x277af4(0xf1))var _0x26e9d9=users[_0x277af4(0x174)];else{if(_0xa1d88e[0x0][_0x277af4(0x177)]=='Hindi')var _0x26e9d9=users[_0x277af4(0x15e)];else{if(_0xa1d88e[0x0][_0x277af4(0x177)]==_0x277af4(0x180))var _0x26e9d9=users['German'];else{if(_0xa1d88e[0x0][_0x277af4(0x177)]==_0x277af4(0x116))var _0x26e9d9=users[_0x277af4(0x116)];else{if(_0xa1d88e[0x0][_0x277af4(0x177)]==_0x277af4(0x170))var _0x26e9d9=users['French'];else{if(_0xa1d88e[0x0][_0x277af4(0x177)]==_0x277af4(0x154))var _0x26e9d9=users[_0x277af4(0x18f)];else{if(_0xa1d88e[0x0][_0x277af4(0x177)]==_0x277af4(0x130))var _0x26e9d9=users[_0x277af4(0x130)];else{if(_0xa1d88e[0x0][_0x277af4(0x177)]==_0x277af4(0x129))var _0x26e9d9=users[_0x277af4(0x167)];}}}}}}}_0xf73178[_0x277af4(0x104)](_0x277af4(0x134),{'success':_0x39adb5[_0x277af4(0x12e)](_0x277af4(0x1b5)),'errors':_0x39adb5[_0x277af4(0x12e)](_0x277af4(0x136)),'role':_0x3349fa,'profile':_0x460f8d,'master_shop':_0xa1d88e,'user':_0x13e31a,'language':_0x26e9d9});}catch(_0x129d49){console[_0x277af4(0x17d)](_0x129d49);}}),router[a0_0x434e39(0x16e)]('/brands/:id',auth,async(_0x36be5a,_0x54c83d)=>{const _0x6bf8d6=a0_0x434e39;try{const _0x503eca=_0x36be5a[_0x6bf8d6(0x150)]['id'],_0xc0cc66=await brands[_0x6bf8d6(0x10e)](_0x503eca,_0x36be5a['body']);_0x36be5a[_0x6bf8d6(0x12e)](_0x6bf8d6(0x1b5),_0x6bf8d6(0x132)),_0x54c83d[_0x6bf8d6(0x187)](_0x6bf8d6(0x1b4));}catch(_0x2d2c68){console[_0x6bf8d6(0x17d)](_0x2d2c68);}}),router[a0_0x434e39(0x157)](a0_0x434e39(0x195),auth,async(_0x27cc2e,_0x3b909b)=>{const _0x2d018=a0_0x434e39;try{const _0x4d4029=_0x27cc2e['params']['id'],_0xe3cc1e=await brands['findByIdAndDelete'](_0x4d4029);_0x27cc2e[_0x2d018(0x12e)](_0x2d018(0x1b5),_0x2d018(0x143)),_0x3b909b[_0x2d018(0x187)](_0x2d018(0x1b4));}catch(_0x18442a){console[_0x2d018(0x17d)](_0x18442a);}}),router['get'](a0_0x434e39(0x15f),auth,async(_0x4e6763,_0x46b2bf)=>{const _0x33d326=a0_0x434e39;try{const {username:_0x457e42,email:_0x2e8740,role:_0x596b33}=_0x4e6763[_0x33d326(0x115)],_0x53650f=_0x4e6763[_0x33d326(0x115)],_0xe736f=await profile[_0x33d326(0xfa)]({'email':_0x53650f[_0x33d326(0x13c)]}),_0x2f1109=await master_shop['find']();console['log']('master',_0x2f1109);const _0x4394bc=await units[_0x33d326(0x189)]();if(_0x2f1109[0x0]['language']==_0x33d326(0xf1))var _0x4d1977=users[_0x33d326(0x174)];else{if(_0x2f1109[0x0][_0x33d326(0x177)]=='Hindi')var _0x4d1977=users['Hindi'];else{if(_0x2f1109[0x0][_0x33d326(0x177)]==_0x33d326(0x180))var _0x4d1977=users[_0x33d326(0x180)];else{if(_0x2f1109[0x0]['language']==_0x33d326(0x116))var _0x4d1977=users['Spanish'];else{if(_0x2f1109[0x0][_0x33d326(0x177)]=='French')var _0x4d1977=users[_0x33d326(0x170)];else{if(_0x2f1109[0x0]['language']==_0x33d326(0x154))var _0x4d1977=users[_0x33d326(0x18f)];else{if(_0x2f1109[0x0][_0x33d326(0x177)]==_0x33d326(0x130))var _0x4d1977=users['Chinese'];else{if(_0x2f1109[0x0]['language']==_0x33d326(0x129))var _0x4d1977=users[_0x33d326(0x167)];}}}}}}}_0x46b2bf[_0x33d326(0x104)](_0x33d326(0x18c),{'success':_0x4e6763['flash'](_0x33d326(0x1b5)),'errors':_0x4e6763['flash']('errors'),'role':_0x53650f,'profile':_0xe736f,'master_shop':_0x2f1109,'user':_0x4394bc,'language':_0x4d1977});}catch(_0x34f755){console[_0x33d326(0x17d)](_0x34f755);}}),router[a0_0x434e39(0x16e)](a0_0x434e39(0x15f),auth,async(_0x426280,_0x5dbd4c)=>{const _0x94e45e=a0_0x434e39;try{const {name:_0x470d9f,secondary_unit:_0x15cdd4,products:_0x323b20}=_0x426280[_0x94e45e(0x17c)],_0x3170ea=new units({'name':_0x470d9f,'secondary_unit':_0x15cdd4,'products':_0x323b20}),_0xbdd793=await units[_0x94e45e(0xfa)]({'name':_0x470d9f});_0xbdd793?_0x426280[_0x94e45e(0x12e)]('errors',_0x470d9f+_0x94e45e(0x18d)):_0x426280[_0x94e45e(0x12e)](_0x94e45e(0x1b5),_0x470d9f+_0x94e45e(0x160));const _0x3b67f6=await _0x3170ea[_0x94e45e(0x12b)]();_0x5dbd4c['redirect'](_0x94e45e(0x120));}catch(_0x27e3a0){console[_0x94e45e(0x17d)](_0x27e3a0);}}),router[a0_0x434e39(0x157)](a0_0x434e39(0x12d),auth,async(_0xc60cc,_0x4a1a05)=>{const _0xb6f1b7=a0_0x434e39;try{const {username:_0x35b59f,email:_0x56bb7e,role:_0x5e7cdb}=_0xc60cc[_0xb6f1b7(0x115)],_0x3e10d4=_0xc60cc[_0xb6f1b7(0x115)],_0x7be2c3=await profile[_0xb6f1b7(0xfa)]({'email':_0x3e10d4[_0xb6f1b7(0x13c)]}),_0xd3070b=await master_shop[_0xb6f1b7(0x189)]();console['log'](_0xb6f1b7(0x107),_0xd3070b);const _0x18c5dc=_0xc60cc['params']['id'],_0x56eec7=await units[_0xb6f1b7(0x190)](_0x18c5dc);if(_0xd3070b[0x0][_0xb6f1b7(0x177)]==_0xb6f1b7(0xf1))var _0x5058ec=users[_0xb6f1b7(0x174)];else{if(_0xd3070b[0x0][_0xb6f1b7(0x177)]=='Hindi')var _0x5058ec=users[_0xb6f1b7(0x15e)];else{if(_0xd3070b[0x0][_0xb6f1b7(0x177)]==_0xb6f1b7(0x180))var _0x5058ec=users['German'];else{if(_0xd3070b[0x0]['language']==_0xb6f1b7(0x116))var _0x5058ec=users[_0xb6f1b7(0x116)];else{if(_0xd3070b[0x0][_0xb6f1b7(0x177)]=='French')var _0x5058ec=users[_0xb6f1b7(0x170)];else{if(_0xd3070b[0x0][_0xb6f1b7(0x177)]==_0xb6f1b7(0x154))var _0x5058ec=users['Portuguese'];else{if(_0xd3070b[0x0][_0xb6f1b7(0x177)]==_0xb6f1b7(0x130))var _0x5058ec=users[_0xb6f1b7(0x130)];else{if(_0xd3070b[0x0][_0xb6f1b7(0x177)]==_0xb6f1b7(0x129))var _0x5058ec=users['Arabic'];}}}}}}}_0x4a1a05[_0xb6f1b7(0x104)](_0xb6f1b7(0x18c),{'success':_0xc60cc[_0xb6f1b7(0x12e)](_0xb6f1b7(0x1b5)),'errors':_0xc60cc[_0xb6f1b7(0x12e)](_0xb6f1b7(0x136)),'role':_0x3e10d4,'profile':_0x7be2c3,'master_shop':_0xd3070b,'user':_0x56eec7,'language':_0x5058ec});}catch(_0x19c9ff){console[_0xb6f1b7(0x17d)](_0x19c9ff);}}),router[a0_0x434e39(0x16e)]('/units/:id',auth,async(_0x186917,_0x535b23)=>{const _0x2ab7cd=a0_0x434e39;try{const _0x4cc556=_0x186917[_0x2ab7cd(0x150)]['id'],_0x1e81ec=await units[_0x2ab7cd(0x10e)](_0x4cc556,_0x186917['body']);_0x186917['flash'](_0x2ab7cd(0x1b5),_0x2ab7cd(0x1af)),_0x535b23[_0x2ab7cd(0x187)](_0x2ab7cd(0x120));}catch(_0x3368df){console['log'](_0x3368df);}}),router[a0_0x434e39(0x157)](a0_0x434e39(0x14a),auth,async(_0xaefcba,_0x40553b)=>{const _0x1db178=a0_0x434e39;try{const _0x375fae=_0xaefcba[_0x1db178(0x150)]['id'],_0x38884e=await units[_0x1db178(0x126)](_0x375fae);_0xaefcba[_0x1db178(0x12e)](_0x1db178(0x1b5),_0x1db178(0x19d)),_0x40553b['redirect']('/products/units');}catch(_0x578aa5){console['log'](_0x578aa5);}});const storage=multer[a0_0x434e39(0x197)]({'destination':(_0x114057,_0x4d0d0a,_0x38866d)=>{const _0x457463=a0_0x434e39;_0x38866d(null,_0x457463(0x18e));},'filename':(_0x596c02,_0x267807,_0x562fbd)=>{const _0x36bf8f=a0_0x434e39;_0x562fbd(null,Date[_0x36bf8f(0xee)]()+_0x267807[_0x36bf8f(0x176)]);}}),upload=multer({'storage':storage});router['get'](a0_0x434e39(0x153),auth,async(_0x529568,_0x131841)=>{const _0x3ec165=a0_0x434e39;try{const {username:_0x55406f,email:_0x993b64,role:_0x208430}=_0x529568[_0x3ec165(0x115)],_0x7813f0=_0x529568['user'],_0x2c8194=await profile['findOne']({'email':_0x7813f0[_0x3ec165(0x13c)]}),_0x55ef19={'year':_0x3ec165(0x14b),'month':'long','day':_0x3ec165(0x14b)},_0x4a2390=await master_shop[_0x3ec165(0x189)]();console[_0x3ec165(0x17d)](_0x3ec165(0x13e),_0x4a2390);const _0x5b94d7=await product[_0x3ec165(0x189)]();console[_0x3ec165(0x17d)](_0x3ec165(0xfb),_0x5b94d7);const _0x3fc3bf=await warehouse[_0x3ec165(0x1a1)]([{'$unwind':_0x3ec165(0x173)},{'$lookup':{'from':'products','localField':'product_details.product_name','foreignField':_0x3ec165(0x133),'as':_0x3ec165(0x128)}},{'$unwind':_0x3ec165(0x113)},{'$project':{'product_name':_0x3ec165(0x179),'product_stock':_0x3ec165(0x10a)}},{'$group':{'_id':_0x3ec165(0x13a),'product_stock':{'$sum':'$product_stock'}}}]);console[_0x3ec165(0x17d)]('Products\x20warehouse_data',_0x3fc3bf),_0x3fc3bf[_0x3ec165(0xf0)](_0x460184=>{const _0x43148b=_0x3ec165,_0x1a1d80=_0x5b94d7[_0x43148b(0x188)](_0x4ce4f4=>{const _0x176c67=_0x43148b;_0x4ce4f4[_0x176c67(0x133)]==_0x460184['_id']&&(_0x4ce4f4[_0x176c67(0x11f)]=parseInt(_0x4ce4f4['stock'])+parseInt(_0x460184['product_stock']));});}),console[_0x3ec165(0x17d)]('Products\x20find_data',_0x5b94d7);if(_0x4a2390[0x0][_0x3ec165(0x177)]==_0x3ec165(0xf1))var _0x442fce=users[_0x3ec165(0x174)];else{if(_0x4a2390[0x0]['language']=='Hindi')var _0x442fce=users['Hindi'];else{if(_0x4a2390[0x0][_0x3ec165(0x177)]=='German')var _0x442fce=users[_0x3ec165(0x180)];else{if(_0x4a2390[0x0][_0x3ec165(0x177)]=='Spanish')var _0x442fce=users[_0x3ec165(0x116)];else{if(_0x4a2390[0x0][_0x3ec165(0x177)]=='French')var _0x442fce=users[_0x3ec165(0x170)];else{if(_0x4a2390[0x0][_0x3ec165(0x177)]==_0x3ec165(0x154))var _0x442fce=users[_0x3ec165(0x18f)];else{if(_0x4a2390[0x0][_0x3ec165(0x177)]==_0x3ec165(0x130))var _0x442fce=users[_0x3ec165(0x130)];else{if(_0x4a2390[0x0][_0x3ec165(0x177)]=='Arabic\x20(ae)')var _0x442fce=users[_0x3ec165(0x167)];}}}}}}}_0x131841[_0x3ec165(0x104)](_0x3ec165(0x171),{'success':_0x529568[_0x3ec165(0x12e)](_0x3ec165(0x1b5)),'errors':_0x529568['flash'](_0x3ec165(0x136)),'alldata':_0x5b94d7,'profile':_0x2c8194,'master_shop':_0x4a2390,'role':_0x7813f0,'product_stock':_0x3fc3bf,'language':_0x442fce});}catch(_0x18a44f){console['log'](_0x18a44f);}}),router[a0_0x434e39(0x157)](a0_0x434e39(0x16b),auth,async(_0x5dfc51,_0x32dfd8)=>{const _0x355d6f=a0_0x434e39;try{const {username:_0x5768dc,email:_0x1905b1,role:_0x40b305}=_0x5dfc51['user'],_0x21448c=_0x5dfc51[_0x355d6f(0x115)],_0x2773a2=await profile['findOne']({'email':_0x21448c['email']}),_0x12ffb4=await master_shop[_0x355d6f(0x189)]();console[_0x355d6f(0x17d)](_0x355d6f(0x107),_0x12ffb4);const _0x4dd463=await categories[_0x355d6f(0x189)]({}),_0x3edc43=await brands[_0x355d6f(0x189)]({}),_0x145005=await units[_0x355d6f(0x189)]({}),_0x18aedf=await warehouse[_0x355d6f(0x189)]({'status':_0x355d6f(0x14c)});if(_0x12ffb4[0x0][_0x355d6f(0x177)]=='English\x20(US)')var _0x35f77a=users['English'];else{if(_0x12ffb4[0x0][_0x355d6f(0x177)]==_0x355d6f(0x15e))var _0x35f77a=users[_0x355d6f(0x15e)];else{if(_0x12ffb4[0x0]['language']==_0x355d6f(0x180))var _0x35f77a=users[_0x355d6f(0x180)];else{if(_0x12ffb4[0x0][_0x355d6f(0x177)]==_0x355d6f(0x116))var _0x35f77a=users[_0x355d6f(0x116)];else{if(_0x12ffb4[0x0]['language']==_0x355d6f(0x170))var _0x35f77a=users[_0x355d6f(0x170)];else{if(_0x12ffb4[0x0][_0x355d6f(0x177)]==_0x355d6f(0x154))var _0x35f77a=users[_0x355d6f(0x18f)];else{if(_0x12ffb4[0x0]['language']==_0x355d6f(0x130))var _0x35f77a=users[_0x355d6f(0x130)];else{if(_0x12ffb4[0x0][_0x355d6f(0x177)]==_0x355d6f(0x129))var _0x35f77a=users[_0x355d6f(0x167)];}}}}}}}_0x32dfd8[_0x355d6f(0x104)](_0x355d6f(0x19c),{'success':_0x5dfc51['flash'](_0x355d6f(0x1b5)),'errors':_0x5dfc51[_0x355d6f(0x12e)](_0x355d6f(0x136)),'role':_0x21448c,'profile':_0x2773a2,'categories':_0x4dd463,'brands':_0x3edc43,'master_shop':_0x12ffb4,'units':_0x145005,'language':_0x35f77a,'find_data':_0x18aedf});}catch(_0x31504e){console['log'](_0x31504e);}}),router[a0_0x434e39(0x16e)](a0_0x434e39(0x16b),auth,upload[a0_0x434e39(0x156)]('image'),async(_0x2335dc,_0x2af12)=>{const _0x353c07=a0_0x434e39;try{const {name:_0x101786,category:_0x4abff4,brand:_0x4d6a6c,unit:_0x2698cf,alertquantity:_0x1cf245,stock:_0x9dc0f4,product_code:_0x58bb02,warehouse:_0x385f56,primary_ItemCode:_0x51778f,second_ItemCode:_0x16056e,second_unit:_0x251335,maxPerUnit:_0x153234,MaxPerProduct:_0xdbba08,sales_cat:_0x36f088,type_prod:_0x5beb93}=_0x2335dc[_0x353c07(0x17c)],_0x151294=_0x2335dc['file']?.[_0x353c07(0xfd)]||_0x353c07(0x14d),_0x452790=new product({'image':_0x151294,'name':_0x101786,'category':_0x4abff4,'brand':_0x4d6a6c,'unit':_0x2698cf,'alertquantity':_0x1cf245,'stock':_0x9dc0f4,'product_code':_0x58bb02,'warehouse':_0x385f56,'primary_code':_0x51778f,'secondary_code':_0x16056e,'second_unit':_0x251335,'maxStocks':_0xdbba08,'maxProdPerUnit':_0x153234,'sales_category':_0x36f088,'type_products':_0x5beb93}),_0x20baa8=await _0x452790[_0x353c07(0x12b)](),_0x4d5a12=await categories[_0x353c07(0xfa)]({'name':_0x4abff4});_0x4d5a12[_0x353c07(0x171)]=parseInt(_0x4d5a12[_0x353c07(0x171)])+0x1,await _0x4d5a12[_0x353c07(0x12b)]();const _0x5f40c9=await brands[_0x353c07(0xfa)]({'name':_0x4d6a6c});_0x5f40c9['products']=parseInt(_0x5f40c9['products'])+0x1,await _0x5f40c9[_0x353c07(0x12b)]();const _0x26df15=await units[_0x353c07(0xfa)]({'name':_0x2698cf});_0x26df15[_0x353c07(0x171)]=parseInt(_0x26df15[_0x353c07(0x171)])+0x1,await _0x26df15[_0x353c07(0x12b)](),_0x2335dc[_0x353c07(0x12e)](_0x353c07(0x1b5),'product\x20add\x20successfully'),_0x2af12[_0x353c07(0x187)](_0x353c07(0x114));}catch(_0x2d3edd){console[_0x353c07(0x17d)](_0x2d3edd);}}),router[a0_0x434e39(0x157)](a0_0x434e39(0x162),auth,async(_0x3841d4,_0x3670b8)=>{const _0x3cbeae=a0_0x434e39;try{const {username:_0x59c0c9,email:_0x537019,role:_0x1ef9c7}=_0x3841d4[_0x3cbeae(0x115)],_0x7affd4=_0x3841d4['user'],_0x5f2a90=await profile[_0x3cbeae(0xfa)]({'email':_0x7affd4[_0x3cbeae(0x13c)]}),_0x3dc12d=await master_shop['find']();console[_0x3cbeae(0x17d)](_0x3cbeae(0x15d),_0x3dc12d);const _0xd4cfe2=_0x3841d4[_0x3cbeae(0x150)]['id'],_0x617a62=await product['findById'](_0xd4cfe2),_0x4b3e11=await categories['find']({}),_0x4be6f7=await brands[_0x3cbeae(0x189)]({}),_0x86d3b4=await units[_0x3cbeae(0x189)]({}),_0x38dc24=await warehouse[_0x3cbeae(0x189)]({'status':_0x3cbeae(0x14c)}),_0x1e82d0=await units[_0x3cbeae(0x1a1)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':_0x3cbeae(0x1ae)}}}]);if(_0x3dc12d[0x0][_0x3cbeae(0x177)]==_0x3cbeae(0xf1))var _0x34be0d=users[_0x3cbeae(0x174)];else{if(_0x3dc12d[0x0][_0x3cbeae(0x177)]=='Hindi')var _0x34be0d=users[_0x3cbeae(0x15e)];else{if(_0x3dc12d[0x0][_0x3cbeae(0x177)]=='German')var _0x34be0d=users[_0x3cbeae(0x180)];else{if(_0x3dc12d[0x0]['language']==_0x3cbeae(0x116))var _0x34be0d=users[_0x3cbeae(0x116)];else{if(_0x3dc12d[0x0][_0x3cbeae(0x177)]==_0x3cbeae(0x170))var _0x34be0d=users[_0x3cbeae(0x170)];else{if(_0x3dc12d[0x0][_0x3cbeae(0x177)]=='Portuguese\x20(BR)')var _0x34be0d=users[_0x3cbeae(0x18f)];else{if(_0x3dc12d[0x0][_0x3cbeae(0x177)]==_0x3cbeae(0x130))var _0x34be0d=users[_0x3cbeae(0x130)];else{if(_0x3dc12d[0x0][_0x3cbeae(0x177)]=='Arabic\x20(ae)')var _0x34be0d=users['Arabic'];}}}}}}}_0x3670b8['render']('edit_product',{'success':_0x3841d4[_0x3cbeae(0x12e)](_0x3cbeae(0x1b5)),'errors':_0x3841d4[_0x3cbeae(0x12e)](_0x3cbeae(0x136)),'role':_0x7affd4,'profile':_0x5f2a90,'alldata':_0x617a62,'categories':_0x4b3e11,'brands':_0x4be6f7,'master_shop':_0x3dc12d,'units':_0x86d3b4,'secondunit':_0x1e82d0,'find_data':_0x38dc24,'language':_0x34be0d});}catch(_0x310c88){console[_0x3cbeae(0x17d)](_0x310c88);}}),router[a0_0x434e39(0x16e)]('/view/:id',auth,upload[a0_0x434e39(0x156)](a0_0x434e39(0xf9)),async(_0x5a969e,_0x52146b)=>{const _0x3b9fb8=a0_0x434e39;try{const _0x10c748=_0x5a969e[_0x3b9fb8(0x150)]['id'],_0x131af7=await product[_0x3b9fb8(0x190)](_0x10c748),{image:_0x34c783,name:_0x104e43,category:_0xfaa129,brand:_0x1e5b1f,sku:_0x1e5e8,unit:_0x20a9ec,alertquantity:_0x355fde,product_code:_0x298b6b,warehouse:_0xbbfc69,primary_ItemCode:_0x56d4cf,second_ItemCode:_0x3a50b9,second_unit:_0x3d4b72,maxPerUnit:_0x2b7243,MaxPerProduct:_0x294531,prod_catdata:_0x42b583,type_prod:_0x55aa61,sales_cat:_0xbee084}=_0x5a969e[_0x3b9fb8(0x17c)];_0x5a969e[_0x3b9fb8(0x141)]&&(_0x131af7['image']=_0x5a969e[_0x3b9fb8(0x141)][_0x3b9fb8(0xfd)]);_0x131af7['name']=_0x104e43,_0x131af7[_0x3b9fb8(0x11c)]=_0xfaa129,_0x131af7[_0x3b9fb8(0x147)]=_0x1e5b1f,_0x131af7[_0x3b9fb8(0x14f)]=_0x1e5e8,_0x131af7['unit']=_0x20a9ec,_0x131af7[_0x3b9fb8(0x1a8)]=_0x355fde,_0x131af7[_0x3b9fb8(0xff)]=_0x298b6b,_0x131af7[_0x3b9fb8(0x166)]=_0xbbfc69,_0x131af7[_0x3b9fb8(0x102)]=_0x56d4cf,_0x131af7[_0x3b9fb8(0x17e)]=_0x3a50b9,_0x131af7[_0x3b9fb8(0x12c)]=_0x3d4b72,_0x131af7[_0x3b9fb8(0xf3)]=_0x294531,_0x131af7[_0x3b9fb8(0x138)]=_0x2b7243,_0x131af7[_0x3b9fb8(0x119)]=_0x42b583,_0x131af7['type_products']=_0x55aa61,_0x131af7[_0x3b9fb8(0x106)]=_0xbee084;const _0x541a41=await _0x131af7[_0x3b9fb8(0x12b)]();console[_0x3b9fb8(0x17d)]('product\x20edit',_0x131af7),_0x5a969e[_0x3b9fb8(0x12e)](_0x3b9fb8(0x1b5),_0x3b9fb8(0x165)),_0x52146b[_0x3b9fb8(0x187)](_0x3b9fb8(0x114));}catch(_0x15f9cc){console[_0x3b9fb8(0x17d)](_0x15f9cc);}}),router[a0_0x434e39(0x157)](a0_0x434e39(0x18a),auth,async(_0x202f49,_0x12e985)=>{const _0x5ecdc5=a0_0x434e39;try{const {username:_0x295308,email:_0x4a0e07,role:_0x11d4c8}=_0x202f49[_0x5ecdc5(0x115)],_0x154fd3=_0x202f49[_0x5ecdc5(0x115)],_0x36b7c8=await profile[_0x5ecdc5(0xfa)]({'email':_0x154fd3[_0x5ecdc5(0x13c)]}),_0x2f4913=await master_shop[_0x5ecdc5(0x189)]();console[_0x5ecdc5(0x17d)](_0x5ecdc5(0x121),_0x2f4913);const _0x534025=_0x202f49[_0x5ecdc5(0x150)]['id'],_0x5c1619=await product[_0x5ecdc5(0x190)](_0x534025);console[_0x5ecdc5(0x17d)](_0x5ecdc5(0x10c),_0x5c1619);if(_0x2f4913[0x0]['language']==_0x5ecdc5(0xf1))var _0x70da13=users[_0x5ecdc5(0x174)];else{if(_0x2f4913[0x0][_0x5ecdc5(0x177)]==_0x5ecdc5(0x15e))var _0x70da13=users[_0x5ecdc5(0x15e)];else{if(_0x2f4913[0x0]['language']==_0x5ecdc5(0x180))var _0x70da13=users[_0x5ecdc5(0x180)];else{if(_0x2f4913[0x0]['language']==_0x5ecdc5(0x116))var _0x70da13=users['Spanish'];else{if(_0x2f4913[0x0][_0x5ecdc5(0x177)]=='French')var _0x70da13=users[_0x5ecdc5(0x170)];else{if(_0x2f4913[0x0][_0x5ecdc5(0x177)]==_0x5ecdc5(0x154))var _0x70da13=users[_0x5ecdc5(0x18f)];else{if(_0x2f4913[0x0][_0x5ecdc5(0x177)]==_0x5ecdc5(0x130))var _0x70da13=users[_0x5ecdc5(0x130)];else{if(_0x2f4913[0x0][_0x5ecdc5(0x177)]==_0x5ecdc5(0x129))var _0x70da13=users['Arabic'];}}}}}}}_0x12e985[_0x5ecdc5(0x104)](_0x5ecdc5(0x15a),{'success':_0x202f49['flash'](_0x5ecdc5(0x1b5)),'errors':_0x202f49['flash']('errors'),'role':_0x154fd3,'profile':_0x36b7c8,'alldata':_0x5c1619,'master_shop':_0x2f4913,'language':_0x70da13});}catch(_0x535b4f){console['log'](_0x535b4f);}}),router[a0_0x434e39(0x157)]('/products_export_migrate_file',auth,async(_0x862a16,_0x369e2a)=>{const _0x23a0f9=a0_0x434e39;try{const _0x57935c=new excelJS[(_0x23a0f9(0x15c))](),_0x3c5875=_0x57935c[_0x23a0f9(0xf7)](_0x23a0f9(0x112));return _0x3c5875[_0x23a0f9(0x122)]=[{'header':_0x23a0f9(0x17a),'key':_0x23a0f9(0x12a),'width':0xa},{'header':_0x23a0f9(0x1a4),'key':_0x23a0f9(0x163),'width':0xa},{'header':_0x23a0f9(0x127),'key':_0x23a0f9(0x1b1),'width':0xa},{'header':_0x23a0f9(0x124),'key':_0x23a0f9(0x191),'width':0xa},{'header':'max_number_per_units','key':_0x23a0f9(0x101),'width':0xa},{'header':_0x23a0f9(0x185),'key':_0x23a0f9(0x142),'width':0xa},{'header':_0x23a0f9(0x16f),'key':_0x23a0f9(0x142),'width':0xa},{'header':_0x23a0f9(0x1a6),'key':'ProductCode','width':0xa},{'header':_0x23a0f9(0x159),'key':_0x23a0f9(0x13d),'width':0xa},{'header':_0x23a0f9(0x148),'key':'PAlQty','width':0xa},{'header':'Maximum_Stocks','key':'PAlQty','width':0xa},{'header':_0x23a0f9(0x198),'key':_0x23a0f9(0x1ab),'width':0xa}],_0x369e2a['setHeader'](_0x23a0f9(0x16d),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x369e2a[_0x23a0f9(0x10d)](_0x23a0f9(0x135),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x57935c[_0x23a0f9(0x139)][_0x23a0f9(0x151)](_0x369e2a)[_0x23a0f9(0x117)](()=>{_0x369e2a['status'](0xc8);});}catch(_0x3b9029){_0x369e2a[_0x23a0f9(0xfc)](0x190)[_0x23a0f9(0x144)](_0x3b9029);}});const storage1=multer[a0_0x434e39(0x197)]({'destination':(_0x45302a,_0x15d67f,_0x28b2a3)=>{_0x28b2a3(null,'public/Migration');},'filename':(_0x4e7a4f,_0x391702,_0x127303)=>{const _0x41f948=a0_0x434e39;_0x127303(null,Date[_0x41f948(0xee)]()+_0x391702[_0x41f948(0x176)]);}}),uploadMigrate=multer({'storage':storage1});router['post']('/products_import_migrate_file',auth,uploadMigrate['single'](a0_0x434e39(0x10f)),async(_0x12dad1,_0x38071f)=>{const _0x3d702b=a0_0x434e39,_0x8d0e06=_0x12dad1[_0x3d702b(0x141)][_0x3d702b(0xfd)],_0x103d55=await xlsx[_0x3d702b(0x184)](_0x3d702b(0xed)+_0x8d0e06);let _0x10693f=_0x103d55[_0x3d702b(0xf5)],_0x239c50=xlsx[_0x3d702b(0xf2)][_0x3d702b(0x192)](_0x103d55[_0x3d702b(0x11d)][_0x10693f[0x0]]);for(const _0x3880b0 of _0x239c50){const _0x5d17d0=_0x3880b0[_0x3d702b(0x17a)],_0x5a2c56=_0x3880b0[_0x3d702b(0x1a4)],_0xdb1d83=_0x3880b0['Units'],_0x35793b=_0x3880b0[_0x3d702b(0x124)],_0x715517=_0x3880b0['Product_Code'],_0x1fcf8d=_0x3880b0[_0x3d702b(0x159)],_0x4edda8=_0x3880b0[_0x3d702b(0x148)],_0x1f7dc3=_0x3880b0[_0x3d702b(0x185)],_0x2be8ed=_0x3880b0['Secondary_Code'],_0x1e4143=_0x3880b0['Maximum_Stocks'],_0x5eeb67=_0x3880b0[_0x3d702b(0x11e)],_0x28c3ee=_0x3880b0[_0x3d702b(0x198)];try{let _0x5578d8=await categories[_0x3d702b(0xfa)]({'name':_0x1fcf8d});if(!_0x5578d8){const _0xe1985f=new categories({'name':_0x1fcf8d,'products':'0'});_0x5578d8=await _0xe1985f[_0x3d702b(0x12b)]();}let _0x117a1a=await brands[_0x3d702b(0xfa)]({'name':_0x5a2c56});if(!_0x117a1a){const _0x2589ab=new brands({'name':_0x5a2c56,'products':'0'});_0x117a1a=await _0x2589ab[_0x3d702b(0x12b)]();}let _0xb26516=await units['findOne']({'name':_0xdb1d83,'secondary_unit':_0x35793b});if(!_0xb26516){const _0x3f86e2=new units({'name':_0xdb1d83,'secondary_unit':_0x35793b,'products':'0'});_0xb26516=await _0x3f86e2[_0x3d702b(0x12b)]();}const _0x359d89=await product[_0x3d702b(0x189)]({'name':_0x5d17d0,'category':_0x5578d8[_0x3d702b(0x133)],'brand':_0x117a1a[_0x3d702b(0x133)],'secondary_unit':_0xb26516[_0x3d702b(0x12c)],'product_code':_0x715517});console[_0x3d702b(0x17d)](_0x359d89['length']+_0x3d702b(0x19b)+_0x5578d8['name']+_0x3d702b(0x19b)+_0x117a1a[_0x3d702b(0x133)]+_0x3d702b(0x19b)+_0xb26516[_0x3d702b(0x12c)]+_0x3d702b(0x19b)+_0x715517+_0x3d702b(0x19b)+_0x5d17d0);if(_0x359d89[_0x3d702b(0x152)]===0x0){const _0x2ac942=new product({'image':_0x3d702b(0x14d),'name':_0x5d17d0,'category':_0x5578d8['name'],'brand':_0x117a1a['name'],'unit':_0xb26516[_0x3d702b(0x133)],'alertquantity':_0x4edda8,'product_code':_0x715517,'secondary_unit':_0xb26516['secondary_unit'],'primary_code':_0x1f7dc3,'secondary_code':_0x2be8ed,'maxStocks':_0x1e4143,'maxProdPerUnit':_0x5eeb67,'product_category':_0x28c3ee}),_0x2a0d38=await _0x2ac942[_0x3d702b(0x12b)]();_0x5578d8[_0x3d702b(0x171)]=parseInt(_0x5578d8['products'])+0x1,await _0x5578d8[_0x3d702b(0x12b)](),_0x117a1a[_0x3d702b(0x171)]=parseInt(_0x117a1a['products'])+0x1,await _0x117a1a[_0x3d702b(0x12b)](),_0xb26516[_0x3d702b(0x171)]=parseInt(_0xb26516[_0x3d702b(0x171)])+0x1,await _0xb26516[_0x3d702b(0x12b)](),_0x12dad1['flash']('success',_0x5d17d0+_0x3d702b(0x169));}else{console[_0x3d702b(0x17d)](_0x359d89[0x0]);const _0x2199d8=_0x359d89[0x0];_0x2199d8[_0x3d702b(0x11c)]=_0x5578d8[_0x3d702b(0x133)],_0x2199d8[_0x3d702b(0x147)]=_0x117a1a[_0x3d702b(0x133)],_0x2199d8[_0x3d702b(0x19a)]=_0xb26516[_0x3d702b(0x133)],_0x2199d8[_0x3d702b(0x1a8)]=_0x4edda8,_0x2199d8[_0x3d702b(0xff)]=_0x715517,_0x2199d8['secondary_unit']=_0xb26516[_0x3d702b(0x12c)],_0x2199d8[_0x3d702b(0x102)]=_0x1f7dc3,_0x2199d8[_0x3d702b(0x17e)]=_0x2be8ed,_0x2199d8[_0x3d702b(0xf3)]=_0x1e4143,_0x2199d8[_0x3d702b(0x138)]=_0x5eeb67,_0x2199d8['product_category']=_0x28c3ee;const _0x48ff8a=await _0x2199d8['save']();_0x12dad1[_0x3d702b(0x12e)](_0x3d702b(0x1b5),_0x48ff8a[_0x3d702b(0x133)]+_0x3d702b(0x1a9));}}catch(_0x2ded60){_0x38071f[_0x3d702b(0xfc)](0x1f4)['json']({'proderror':_0x2ded60[_0x3d702b(0xf8)],'aproduct':_0x5d17d0});}}_0x38071f[_0x3d702b(0x187)](_0x3d702b(0x114));}),router[a0_0x434e39(0x16e)](a0_0x434e39(0x1a5),auth,async(_0x3e657c,_0x592579)=>{const _0x1ce5f9=a0_0x434e39;try{console[_0x1ce5f9(0x17d)](_0x3e657c[_0x1ce5f9(0x17c)]);const {data_cateory:_0x2a004b,datachoose:_0x37ac77}=_0x3e657c[_0x1ce5f9(0x17c)];var _0x58693b;if(_0x37ac77==_0x1ce5f9(0x14e))_0x58693b=await product[_0x1ce5f9(0x1a1)]([{'$group':{'_id':_0x1ce5f9(0x186)}}]);else{if(_0x37ac77==_0x1ce5f9(0x134))_0x58693b=await product[_0x1ce5f9(0x1a1)]([{'$match':{'product_category':_0x2a004b}},{'$group':{'_id':_0x1ce5f9(0x1a3)}}]);else _0x37ac77==_0x1ce5f9(0x168)&&(_0x58693b=await product[_0x1ce5f9(0x1a1)]([{'$match':{'product_category':_0x2a004b}},{'$group':{'_id':_0x1ce5f9(0x145)}}]));}_0x592579[_0x1ce5f9(0x19e)](_0x58693b);}catch(_0x2fe4b6){_0x592579['json']({'message':_0x2fe4b6[_0x1ce5f9(0xf8)]});}}),router[a0_0x434e39(0x16e)](a0_0x434e39(0x196),auth,async(_0x4f36c7,_0x140fc4)=>{const _0x3030cb=a0_0x434e39;try{const {data_choosing:_0x3e910f,data_selected:_0x453145}=_0x4f36c7[_0x3030cb(0x17c)];var _0x7ea7f8;if(_0x3e910f==_0x3030cb(0x14e))_0x7ea7f8=await product['aggregate']([{'$match':{'product_category':_0x453145}}]);else{if(_0x3e910f==_0x3030cb(0x134))_0x7ea7f8=await product[_0x3030cb(0x1a1)]([{'$match':{'brand':_0x453145}}]);else _0x3e910f==_0x3030cb(0x168)&&(_0x7ea7f8=await product[_0x3030cb(0x1a1)]([{'$match':{'category':_0x453145}}]));}_0x140fc4[_0x3030cb(0x19e)](_0x7ea7f8);}catch(_0xb8c0dd){_0x140fc4['json']({'message':_0xb8c0dd[_0x3030cb(0xf8)]});}}),router[a0_0x434e39(0x157)](a0_0x434e39(0x178),auth,async(_0x429cb2,_0x2cfb95)=>{const _0xb27496=a0_0x434e39,_0x277fe2=_0x429cb2['user'],_0x77a2f9=await profile[_0xb27496(0xfa)]({'email':_0x277fe2[_0xb27496(0x13c)]}),_0x5ec240=await master_shop[_0xb27496(0x189)](),_0x4872b9=await product['find']();if(_0x5ec240[0x0][_0xb27496(0x177)]=='English\x20(US)')var _0x3c5783=users['English'];else{if(_0x5ec240[0x0][_0xb27496(0x177)]==_0xb27496(0x15e))var _0x3c5783=users[_0xb27496(0x15e)];else{if(_0x5ec240[0x0]['language']==_0xb27496(0x180))var _0x3c5783=users[_0xb27496(0x180)];else{if(_0x5ec240[0x0]['language']==_0xb27496(0x116))var _0x3c5783=users[_0xb27496(0x116)];else{if(_0x5ec240[0x0]['language']==_0xb27496(0x170))var _0x3c5783=users[_0xb27496(0x170)];else{if(_0x5ec240[0x0][_0xb27496(0x177)]==_0xb27496(0x154))var _0x3c5783=users['Portuguese'];else{if(_0x5ec240[0x0]['language']==_0xb27496(0x130))var _0x3c5783=users[_0xb27496(0x130)];else{if(_0x5ec240[0x0]['language']=='Arabic\x20(ae)')var _0x3c5783=users['Arabic'];}}}}}}}_0x2cfb95[_0xb27496(0x104)](_0xb27496(0x105),{'success':_0x429cb2['flash']('success'),'errors':_0x429cb2[_0xb27496(0x12e)](_0xb27496(0x136)),'role':_0x277fe2,'profile':_0x77a2f9,'products':_0x4872b9,'master_shop':_0x5ec240,'language':_0x3c5783});}),router['post'](a0_0x434e39(0xef),auth,async(_0x50b7a6,_0xcd3b4d)=>{const _0xd24a8b=a0_0x434e39,_0x100774=await product[_0xd24a8b(0x189)]();_0xcd3b4d['json']({'data':_0x100774});}),router[a0_0x434e39(0x16e)](a0_0x434e39(0x12f),auth,async(_0x37bd81,_0x47816a)=>{const _0xf19275=a0_0x434e39;try{const {dataProdCat:_0x43e004,dataProdIdentity:_0x19725c}=_0x37bd81[_0xf19275(0x17c)];var _0x5df32c;switch(_0x43e004){case'fg':switch(_0x19725c){case'Brands':_0x5df32c=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0xf19275(0x1a3)}},{'$project':{'brand':_0xf19275(0x182)}}]);break;case _0xf19275(0x159):_0x5df32c=await product['aggregate']([{'$match':{'product_category':_0xf19275(0x18b)}},{'$group':{'_id':'$category'}},{'$project':{'category':'$_id'}}]);break;}break;case'rm':switch(_0x19725c){case _0xf19275(0x1a4):_0x5df32c=await product[_0xf19275(0x1a1)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':_0xf19275(0x182)}}]);break;case _0xf19275(0x159):_0x5df32c=await product[_0xf19275(0x1a1)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0xf19275(0x145)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x47816a[_0xf19275(0x19e)](_0x5df32c);}catch(_0x2e6854){_0x47816a['json']({'message':_0x2e6854['message']});}}),router[a0_0x434e39(0x16e)]('/print_barcode_filter/',auth,async(_0x5d712e,_0x520194)=>{const _0x40122d=a0_0x434e39;try{console[_0x40122d(0x17d)](_0x5d712e[_0x40122d(0x17c)]);const {prod_cat:_0x4dbdb4,identity:_0x37e7e8,valueData:_0x4bf928,typeofbarcode:_0x344720}=_0x5d712e[_0x40122d(0x17c)];let _0x3ac13c;switch(_0x4dbdb4){case'fg':if(_0x37e7e8==_0x40122d(0x1a4))_0x3ac13c=await product[_0x40122d(0x1a1)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x4bf928}}]);else _0x37e7e8=='Category'&&(_0x3ac13c=await product['aggregate']([{'$match':{'product_category':_0x40122d(0x18b),'category':_0x4bf928}}]));break;case'rm':if(_0x37e7e8==_0x40122d(0x1a4))_0x3ac13c=await product[_0x40122d(0x1a1)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x4bf928}}]);else _0x37e7e8==_0x40122d(0x159)&&(_0x3ac13c=await product[_0x40122d(0x1a1)]([{'$match':{'product_category':_0x40122d(0x17b),'category':_0x4bf928}}]));break;}const _0x581376=_0x83f4b6=>_0x83f4b6*0x48,_0x56f983={'width':0x3,'height':0x1},_0x2ab0f6=new PDFDocument({'margin':_0x581376(0.75),'size':[_0x581376(_0x56f983[_0x40122d(0x108)]),_0x581376(_0x56f983[_0x40122d(0x1a7)])],'bufferPages':!![]}),_0x10003d=_0x3ac13c[_0x40122d(0x152)];for(let _0x292df2=0x0;_0x292df2<=_0x10003d;_0x292df2++){if(_0x292df2!=_0x10003d){const _0x533abb=_0x3ac13c[_0x292df2][_0x40122d(0x133)],_0x237856=_0x3ac13c[_0x292df2]['primary_code'],_0xfec115=_0x3ac13c[_0x292df2][_0x40122d(0x17e)],_0x3c3b0d=_0x3ac13c[_0x292df2]['product_code'];var _0x426985;switch(_0x344720){case'1':_0x426985=_0x237856;break;case'2':_0x426985=_0xfec115;break;case'3':_0x426985=_0x3c3b0d;break;}const _0x764744={'width':0xd2,'height':0x64},_0x1f81ca={'width':_0x581376(_0x56f983[_0x40122d(0x108)]),'height':_0x581376(_0x56f983['height'])},_0x5f09dc=new Canvas();JsBarcode(_0x5f09dc,_0x426985,{'format':'CODE128','height':_0x764744[_0x40122d(0x1a7)],'displayValue':!![],'text':_0x426985});const _0x1c22b9=_0x5f09dc['toBuffer'](),_0x527c3b=_0x1f81ca[_0x40122d(0x108)]/_0x764744[_0x40122d(0x108)],_0x21dd73=_0x1f81ca[_0x40122d(0x1a7)]/_0x764744[_0x40122d(0x1a7)],_0x8a3b6d=Math['min'](_0x527c3b,_0x21dd73),_0x15af0c=_0x764744[_0x40122d(0x108)]*_0x8a3b6d,_0x425bf6=_0x764744[_0x40122d(0x1a7)]*_0x8a3b6d,_0xae37e=(_0x1f81ca[_0x40122d(0x108)]-_0x15af0c)/0x2,_0x22de71=(_0x1f81ca['height']-_0x425bf6)/0x2;_0x2ab0f6[_0x40122d(0xf9)](_0x1c22b9,_0xae37e,_0x22de71,{'width':_0x15af0c,'height':_0x425bf6}),_0x292df2!=_0x10003d&&_0x2ab0f6['addPage']();}}const _0x330393=[];_0x2ab0f6['on'](_0x40122d(0x155),_0x330393[_0x40122d(0x103)][_0x40122d(0x1b0)](_0x330393)),_0x2ab0f6['on'](_0x40122d(0x11b),()=>{const _0x3c8451=_0x40122d,_0x2051f4=Buffer['concat'](_0x330393),_0x5aec4b=_0x2051f4[_0x3c8451(0x137)](_0x3c8451(0x1a2));_0x520194['json']({'pdfContent':_0x5aec4b});}),_0x2ab0f6[_0x40122d(0x11b)]();}catch(_0x15fe23){_0x520194[_0x40122d(0x19e)]({'message':_0x15fe23['message']});}}),router[a0_0x434e39(0x16e)](a0_0x434e39(0x125),auth,async(_0x2c3b83,_0x3baad1)=>{const _0x5703be=a0_0x434e39;try{console['log'](_0x2c3b83['body']);const {prod_cat:_0x20d1c6,identity:_0x4edfde,valueData:_0x81de0}=_0x2c3b83[_0x5703be(0x17c)];let _0x30c9c6;switch(_0x20d1c6){case'fg':if(_0x4edfde==_0x5703be(0x1a4))_0x30c9c6=await product[_0x5703be(0x1a1)]([{'$match':{'product_category':_0x5703be(0x18b),'brand':_0x81de0}}]);else _0x4edfde==_0x5703be(0x159)&&(_0x30c9c6=await product['aggregate']([{'$match':{'product_category':_0x5703be(0x18b),'category':_0x81de0}}]));break;case'rm':if(_0x4edfde=='Brands')_0x30c9c6=await product[_0x5703be(0x1a1)]([{'$match':{'product_category':_0x5703be(0x17b),'brand':_0x81de0}}]);else _0x4edfde==_0x5703be(0x159)&&(_0x30c9c6=await product[_0x5703be(0x1a1)]([{'$match':{'product_category':'Raw\x20Materials','category':_0x81de0}}]));break;}_0x3baad1[_0x5703be(0x19e)]({'data':_0x30c9c6});}catch(_0x4a1cac){_0x3baad1['json']({'message':_0x4a1cac[_0x5703be(0xf8)]});}}),router[a0_0x434e39(0x16e)](a0_0x434e39(0x17f),auth,async(_0x58c75c,_0x4ec506)=>{const _0x1e9c8a=a0_0x434e39;try{const _0x6d30e0=_0x58c75c[_0x1e9c8a(0x150)]['id'],{copies:_0x26d3c0,typeofbarcode:_0x47bbe3}=_0x58c75c[_0x1e9c8a(0x17c)];var _0x5d6d0f=await product[_0x1e9c8a(0x190)](_0x6d30e0);const _0x2cabd3=_0x36cb02=>_0x36cb02*0x48,_0x5b7eb6={'width':0x3,'height':0x1},_0x459d15=new PDFDocument({'margin':_0x2cabd3(0.75),'size':[_0x2cabd3(_0x5b7eb6[_0x1e9c8a(0x108)]),_0x2cabd3(_0x5b7eb6[_0x1e9c8a(0x1a7)])],'bufferPages':!![]}),_0xda3476=_0x26d3c0,_0x2481e3=_0x5d6d0f[_0x1e9c8a(0x133)],_0x5d1819=_0x5d6d0f[_0x1e9c8a(0x102)],_0x308563=_0x5d6d0f[_0x1e9c8a(0x17e)],_0x540df7=_0x5d6d0f[_0x1e9c8a(0xff)];let _0x42375d;switch(_0x47bbe3){case'1':_0x42375d=_0x5d1819;break;case'2':_0x42375d=_0x308563;break;case'3':_0x42375d=_0x540df7;break;}const _0x2dc451={'width':0xd2,'height':0x64},_0x4d285e={'width':_0x2cabd3(_0x5b7eb6[_0x1e9c8a(0x108)]),'height':_0x2cabd3(_0x5b7eb6[_0x1e9c8a(0x1a7)])};for(let _0x18e1bd=0x1;_0x18e1bd<=_0xda3476;_0x18e1bd++){const _0x254bbc=new Canvas();JsBarcode(_0x254bbc,_0x42375d,{'format':_0x1e9c8a(0x100),'height':_0x2dc451[_0x1e9c8a(0x1a7)],'displayValue':!![],'text':_0x42375d});const _0x4531f1=_0x254bbc[_0x1e9c8a(0xfe)](),_0x1bf9ce=_0x4d285e[_0x1e9c8a(0x108)]/_0x2dc451[_0x1e9c8a(0x108)],_0x351e26=_0x4d285e['height']/_0x2dc451[_0x1e9c8a(0x1a7)],_0x221ee4=Math[_0x1e9c8a(0xf4)](_0x1bf9ce,_0x351e26),_0x3cc6f5=_0x2dc451[_0x1e9c8a(0x108)]*_0x221ee4,_0x4898e8=_0x2dc451[_0x1e9c8a(0x1a7)]*_0x221ee4,_0x441167=(_0x4d285e[_0x1e9c8a(0x108)]-_0x3cc6f5)/0x2,_0x1882de=(_0x4d285e[_0x1e9c8a(0x1a7)]-_0x4898e8)/0x2;_0x459d15[_0x1e9c8a(0xf9)](_0x4531f1,_0x441167,_0x1882de,{'width':_0x3cc6f5,'height':_0x4898e8}),_0x18e1bd!=_0xda3476&&_0x459d15['addPage']();}const _0x1213b7=[];_0x459d15['on'](_0x1e9c8a(0x155),_0x1213b7[_0x1e9c8a(0x103)][_0x1e9c8a(0x1b0)](_0x1213b7)),_0x459d15['on'](_0x1e9c8a(0x11b),()=>{const _0x4a9746=_0x1e9c8a,_0x34b956=Buffer[_0x4a9746(0x11a)](_0x1213b7),_0x15222e=_0x34b956['toString'](_0x4a9746(0x1a2));_0x4ec506[_0x4a9746(0x19e)]({'pdfContent':_0x15222e});}),_0x459d15[_0x1e9c8a(0x11b)]();}catch(_0x19b66d){_0x4ec506[_0x1e9c8a(0x19e)]({'message':_0x19b66d[_0x1e9c8a(0xf8)]});}}),module[a0_0x434e39(0x15b)]=router;