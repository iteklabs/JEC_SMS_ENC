const a0_0x94e428=a0_0x4953;(function(_0x2620dc,_0x446e59){const _0x25edb3=a0_0x4953,_0x1521f2=_0x2620dc();while(!![]){try{const _0x3b8d5b=-parseInt(_0x25edb3(0x17a))/0x1*(parseInt(_0x25edb3(0x180))/0x2)+-parseInt(_0x25edb3(0x168))/0x3*(parseInt(_0x25edb3(0x142))/0x4)+-parseInt(_0x25edb3(0x19a))/0x5*(parseInt(_0x25edb3(0x105))/0x6)+parseInt(_0x25edb3(0x16b))/0x7+parseInt(_0x25edb3(0xea))/0x8+-parseInt(_0x25edb3(0x190))/0x9*(-parseInt(_0x25edb3(0x141))/0xa)+parseInt(_0x25edb3(0x181))/0xb;if(_0x3b8d5b===_0x446e59)break;else _0x1521f2['push'](_0x1521f2['shift']());}catch(_0x2e45bc){_0x1521f2['push'](_0x1521f2['shift']());}}}(a0_0x366f,0x22307));const express=require(a0_0x94e428(0x146)),res=require(a0_0x94e428(0x19b)),app=express(),router=express[a0_0x94e428(0x112)](),multer=require(a0_0x94e428(0x183)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x94e428(0x15e)),users=require(a0_0x94e428(0x104)),excelJS=require(a0_0x94e428(0xfa)),xlsx=require(a0_0x94e428(0x1a2)),JsBarcode=require(a0_0x94e428(0x122)),{Canvas}=require(a0_0x94e428(0x157)),PDFDocument=require(a0_0x94e428(0x18c));router[a0_0x94e428(0x17c)](a0_0x94e428(0xe6),auth,async(_0x56adca,_0x54875c)=>{const _0xe337e=a0_0x94e428;try{const {username:_0x58e217,email:_0x55274e,role:_0x4e7a9e}=_0x56adca[_0xe337e(0x121)],_0x43b828=_0x56adca['user'],_0x295e68=await profile[_0xe337e(0xff)]({'email':_0x43b828[_0xe337e(0x130)]}),_0xccab00=await master_shop[_0xe337e(0x138)]();console[_0xe337e(0xf3)](_0xe337e(0x101),_0xccab00);const _0x4dfbb9=await categories[_0xe337e(0x138)]();if(_0xccab00[0x0][_0xe337e(0x18d)]==_0xe337e(0x135))var _0x636578=users[_0xe337e(0x117)];else{if(_0xccab00[0x0][_0xe337e(0x18d)]==_0xe337e(0x189))var _0x636578=users[_0xe337e(0x189)];else{if(_0xccab00[0x0][_0xe337e(0x18d)]=='German')var _0x636578=users[_0xe337e(0x199)];else{if(_0xccab00[0x0][_0xe337e(0x18d)]==_0xe337e(0x184))var _0x636578=users[_0xe337e(0x184)];else{if(_0xccab00[0x0][_0xe337e(0x18d)]==_0xe337e(0x16e))var _0x636578=users[_0xe337e(0x16e)];else{if(_0xccab00[0x0]['language']=='Portuguese\x20(BR)')var _0x636578=users[_0xe337e(0x175)];else{if(_0xccab00[0x0][_0xe337e(0x18d)]=='Chinese')var _0x636578=users[_0xe337e(0x164)];else{if(_0xccab00[0x0][_0xe337e(0x18d)]==_0xe337e(0x102))var _0x636578=users['Arabic'];}}}}}}}_0x54875c[_0xe337e(0xe8)]('categories',{'success':_0x56adca[_0xe337e(0xf7)](_0xe337e(0x18b)),'errors':_0x56adca[_0xe337e(0xf7)]('errors'),'role':_0x43b828,'profile':_0x295e68,'user':_0x4dfbb9,'master_shop':_0xccab00,'language':_0x636578});}catch(_0x34b9a1){console[_0xe337e(0xf3)](_0x34b9a1);}}),router[a0_0x94e428(0xe5)](a0_0x94e428(0xe6),auth,async(_0x1e8aba,_0x19e196)=>{const _0x3b604b=a0_0x94e428;try{const {name:_0x4fa318,products:_0x514c7f}=_0x1e8aba[_0x3b604b(0xe2)],_0x243e4c=new categories({'name':_0x4fa318,'products':_0x514c7f}),_0x3c9b01=await categories[_0x3b604b(0xff)]({'name':_0x4fa318});_0x3c9b01?_0x1e8aba[_0x3b604b(0xf7)](_0x3b604b(0xf6),_0x4fa318+_0x3b604b(0x194)):_0x1e8aba[_0x3b604b(0xf7)](_0x3b604b(0x18b),_0x4fa318+_0x3b604b(0x1a4));const _0xfbeafe=await _0x243e4c[_0x3b604b(0xed)]();_0x19e196[_0x3b604b(0xf4)](_0x3b604b(0x147));}catch(_0x35b504){console['log'](_0x35b504);}}),router['get'](a0_0x94e428(0x15a),auth,async(_0x4102e3,_0x149fcd)=>{const _0x1e9d0f=a0_0x94e428;try{const {username:_0x476021,email:_0x2d3738,role:_0x1d3f38}=_0x4102e3[_0x1e9d0f(0x121)],_0x1bdb90=_0x4102e3[_0x1e9d0f(0x121)],_0xe949dd=await profile[_0x1e9d0f(0xff)]({'email':_0x1bdb90[_0x1e9d0f(0x130)]}),_0x3b4146=await master_shop[_0x1e9d0f(0x138)]();console['log']('master',_0x3b4146);const _0xa885dd=_0x4102e3[_0x1e9d0f(0x167)]['id'];console[_0x1e9d0f(0xf3)](_0xa885dd);const _0x44a246=await categories[_0x1e9d0f(0x10f)](_0xa885dd);if(_0x3b4146[0x0][_0x1e9d0f(0x18d)]==_0x1e9d0f(0x135))var _0x18c99e=users['English'];else{if(_0x3b4146[0x0][_0x1e9d0f(0x18d)]==_0x1e9d0f(0x189))var _0x18c99e=users[_0x1e9d0f(0x189)];else{if(_0x3b4146[0x0]['language']=='German')var _0x18c99e=users['German'];else{if(_0x3b4146[0x0][_0x1e9d0f(0x18d)]==_0x1e9d0f(0x184))var _0x18c99e=users['Spanish'];else{if(_0x3b4146[0x0][_0x1e9d0f(0x18d)]==_0x1e9d0f(0x16e))var _0x18c99e=users[_0x1e9d0f(0x16e)];else{if(_0x3b4146[0x0][_0x1e9d0f(0x18d)]==_0x1e9d0f(0xfe))var _0x18c99e=users[_0x1e9d0f(0x175)];else{if(_0x3b4146[0x0][_0x1e9d0f(0x18d)]==_0x1e9d0f(0x164))var _0x18c99e=users[_0x1e9d0f(0x164)];else{if(_0x3b4146[0x0]['language']==_0x1e9d0f(0x102))var _0x18c99e=users[_0x1e9d0f(0x176)];}}}}}}}_0x149fcd[_0x1e9d0f(0xe8)](_0x1e9d0f(0x113),{'success':_0x4102e3[_0x1e9d0f(0xf7)](_0x1e9d0f(0x18b)),'errors':_0x4102e3['flash'](_0x1e9d0f(0xf6)),'role':_0x1bdb90,'profile':_0xe949dd,'master_shop':_0x3b4146,'user':_0x44a246,'language':_0x18c99e});}catch(_0x496e57){console[_0x1e9d0f(0xf3)](_0x496e57);}}),router[a0_0x94e428(0xe5)](a0_0x94e428(0x15a),auth,async(_0x27496d,_0x2c2a7f)=>{const _0x240dd2=a0_0x94e428;try{const _0x4ba91b=_0x27496d['params']['id'],_0x5cd4f5=await categories['findByIdAndUpdate'](_0x4ba91b,_0x27496d[_0x240dd2(0xe2)]);_0x27496d[_0x240dd2(0xf7)]('success',''+users[_0x240dd2(0x120)]),_0x2c2a7f[_0x240dd2(0xf4)]('/products/categories');}catch(_0x45a520){console[_0x240dd2(0xf3)](_0x45a520);}}),router[a0_0x94e428(0x17c)](a0_0x94e428(0x12e),auth,async(_0x5b9350,_0x34cd35)=>{const _0x2fb31c=a0_0x94e428;try{const _0x52717f=_0x5b9350[_0x2fb31c(0x167)]['id'],_0x2e6244=await categories['findByIdAndDelete'](_0x52717f);_0x5b9350[_0x2fb31c(0xf7)](_0x2fb31c(0x18b),_0x2fb31c(0xf5)),_0x34cd35[_0x2fb31c(0xf4)]('/products/categories');}catch(_0x2e3e7d){console[_0x2fb31c(0xf3)](_0x2e3e7d);}}),router['get'](a0_0x94e428(0x165),auth,async(_0x5425fb,_0x4298f5)=>{const _0x5f4b92=a0_0x94e428;try{const {username:_0x23d5e9,email:_0x28488b,role:_0x58a86b}=_0x5425fb[_0x5f4b92(0x121)],_0x31f078=_0x5425fb[_0x5f4b92(0x121)],_0x201e51=await profile[_0x5f4b92(0xff)]({'email':_0x31f078['email']}),_0xe5d7f9=await master_shop['find']();console[_0x5f4b92(0xf3)](_0x5f4b92(0x101),_0xe5d7f9);const _0x4b3566=await brands[_0x5f4b92(0x138)]();if(_0xe5d7f9[0x0]['language']=='English\x20(US)')var _0x2ac73d=users['English'];else{if(_0xe5d7f9[0x0][_0x5f4b92(0x18d)]==_0x5f4b92(0x189))var _0x2ac73d=users[_0x5f4b92(0x189)];else{if(_0xe5d7f9[0x0][_0x5f4b92(0x18d)]==_0x5f4b92(0x199))var _0x2ac73d=users[_0x5f4b92(0x199)];else{if(_0xe5d7f9[0x0][_0x5f4b92(0x18d)]==_0x5f4b92(0x184))var _0x2ac73d=users[_0x5f4b92(0x184)];else{if(_0xe5d7f9[0x0]['language']==_0x5f4b92(0x16e))var _0x2ac73d=users[_0x5f4b92(0x16e)];else{if(_0xe5d7f9[0x0][_0x5f4b92(0x18d)]=='Portuguese\x20(BR)')var _0x2ac73d=users[_0x5f4b92(0x175)];else{if(_0xe5d7f9[0x0][_0x5f4b92(0x18d)]=='Chinese')var _0x2ac73d=users[_0x5f4b92(0x164)];else{if(_0xe5d7f9[0x0][_0x5f4b92(0x18d)]==_0x5f4b92(0x102))var _0x2ac73d=users[_0x5f4b92(0x176)];}}}}}}}_0x4298f5[_0x5f4b92(0xe8)](_0x5f4b92(0x140),{'success':_0x5425fb[_0x5f4b92(0xf7)](_0x5f4b92(0x18b)),'errors':_0x5425fb[_0x5f4b92(0xf7)](_0x5f4b92(0xf6)),'role':_0x31f078,'profile':_0x201e51,'master_shop':_0xe5d7f9,'user':_0x4b3566,'language':_0x2ac73d});}catch(_0x33270a){console['log'](_0x33270a);}}),router['post'](a0_0x94e428(0x165),auth,async(_0x4830d9,_0xd61cbd)=>{const _0x3f456a=a0_0x94e428;try{const {name:_0x21a623,products:_0x2a5eb3}=_0x4830d9[_0x3f456a(0xe2)],_0x332726=new brands({'name':_0x21a623,'products':_0x2a5eb3}),_0x25fcb7=await brands[_0x3f456a(0xff)]({'name':_0x21a623});_0x25fcb7?_0x4830d9[_0x3f456a(0xf7)](_0x3f456a(0xf6),_0x21a623+_0x3f456a(0x151)):_0x4830d9[_0x3f456a(0xf7)](_0x3f456a(0x18b),_0x21a623+_0x3f456a(0x103));const _0x55ba86=await _0x332726['save']();_0xd61cbd[_0x3f456a(0xf4)]('/products/brands');}catch(_0x2edcd6){console[_0x3f456a(0xf3)](_0x2edcd6);}}),router[a0_0x94e428(0x17c)]('/brands/:id',auth,async(_0x566ba8,_0x55a48d)=>{const _0x32d7ed=a0_0x94e428;try{const {username:_0x4d11ea,email:_0xa1927,role:_0x59992b}=_0x566ba8[_0x32d7ed(0x121)],_0x408dbd=_0x566ba8[_0x32d7ed(0x121)],_0x4cd719=await profile[_0x32d7ed(0xff)]({'email':_0x408dbd[_0x32d7ed(0x130)]}),_0x1780ab=await master_shop[_0x32d7ed(0x138)]();console[_0x32d7ed(0xf3)](_0x32d7ed(0x101),_0x1780ab);const _0x16ca34=_0x566ba8[_0x32d7ed(0x167)]['id'];console[_0x32d7ed(0xf3)](_0x16ca34);const _0x4f5f53=await brands['findById'](_0x16ca34);if(_0x1780ab[0x0][_0x32d7ed(0x18d)]=='English\x20(US)')var _0x4332c6=users[_0x32d7ed(0x117)];else{if(_0x1780ab[0x0][_0x32d7ed(0x18d)]==_0x32d7ed(0x189))var _0x4332c6=users[_0x32d7ed(0x189)];else{if(_0x1780ab[0x0][_0x32d7ed(0x18d)]==_0x32d7ed(0x199))var _0x4332c6=users[_0x32d7ed(0x199)];else{if(_0x1780ab[0x0][_0x32d7ed(0x18d)]=='Spanish')var _0x4332c6=users['Spanish'];else{if(_0x1780ab[0x0][_0x32d7ed(0x18d)]=='French')var _0x4332c6=users[_0x32d7ed(0x16e)];else{if(_0x1780ab[0x0]['language']==_0x32d7ed(0xfe))var _0x4332c6=users['Portuguese'];else{if(_0x1780ab[0x0][_0x32d7ed(0x18d)]==_0x32d7ed(0x164))var _0x4332c6=users['Chinese'];else{if(_0x1780ab[0x0][_0x32d7ed(0x18d)]==_0x32d7ed(0x102))var _0x4332c6=users[_0x32d7ed(0x176)];}}}}}}}_0x55a48d[_0x32d7ed(0xe8)]('brands',{'success':_0x566ba8[_0x32d7ed(0xf7)](_0x32d7ed(0x18b)),'errors':_0x566ba8[_0x32d7ed(0xf7)](_0x32d7ed(0xf6)),'role':_0x408dbd,'profile':_0x4cd719,'master_shop':_0x1780ab,'user':_0x4f5f53,'language':_0x4332c6});}catch(_0x831d02){console[_0x32d7ed(0xf3)](_0x831d02);}}),router[a0_0x94e428(0xe5)](a0_0x94e428(0x196),auth,async(_0x4417a5,_0xa76598)=>{const _0x71b04c=a0_0x94e428;try{const _0x304d02=_0x4417a5['params']['id'],_0x13aa90=await brands[_0x71b04c(0x100)](_0x304d02,_0x4417a5[_0x71b04c(0xe2)]);_0x4417a5[_0x71b04c(0xf7)](_0x71b04c(0x18b),_0x71b04c(0x166)),_0xa76598[_0x71b04c(0xf4)](_0x71b04c(0x17f));}catch(_0x474090){console['log'](_0x474090);}}),router[a0_0x94e428(0x17c)](a0_0x94e428(0xf9),auth,async(_0x1577f4,_0x555a35)=>{const _0x2b412c=a0_0x94e428;try{const _0x2a3af1=_0x1577f4[_0x2b412c(0x167)]['id'],_0x519394=await brands[_0x2b412c(0x178)](_0x2a3af1);_0x1577f4[_0x2b412c(0xf7)](_0x2b412c(0x18b),_0x2b412c(0x144)),_0x555a35[_0x2b412c(0xf4)](_0x2b412c(0x17f));}catch(_0x41a447){console[_0x2b412c(0xf3)](_0x41a447);}}),router['get'](a0_0x94e428(0x17d),auth,async(_0x2fa39e,_0x5dd715)=>{const _0x3f46b4=a0_0x94e428;try{const {username:_0xb8111b,email:_0x40689e,role:_0x2272de}=_0x2fa39e[_0x3f46b4(0x121)],_0xafc09=_0x2fa39e[_0x3f46b4(0x121)],_0x47a1be=await profile[_0x3f46b4(0xff)]({'email':_0xafc09[_0x3f46b4(0x130)]}),_0xaef40f=await master_shop[_0x3f46b4(0x138)]();console[_0x3f46b4(0xf3)](_0x3f46b4(0x101),_0xaef40f);const _0xf43321=await units[_0x3f46b4(0x138)]();if(_0xaef40f[0x0][_0x3f46b4(0x18d)]==_0x3f46b4(0x135))var _0xdb2df4=users[_0x3f46b4(0x117)];else{if(_0xaef40f[0x0][_0x3f46b4(0x18d)]=='Hindi')var _0xdb2df4=users[_0x3f46b4(0x189)];else{if(_0xaef40f[0x0]['language']=='German')var _0xdb2df4=users['German'];else{if(_0xaef40f[0x0][_0x3f46b4(0x18d)]==_0x3f46b4(0x184))var _0xdb2df4=users['Spanish'];else{if(_0xaef40f[0x0]['language']=='French')var _0xdb2df4=users[_0x3f46b4(0x16e)];else{if(_0xaef40f[0x0][_0x3f46b4(0x18d)]==_0x3f46b4(0xfe))var _0xdb2df4=users[_0x3f46b4(0x175)];else{if(_0xaef40f[0x0][_0x3f46b4(0x18d)]==_0x3f46b4(0x164))var _0xdb2df4=users['Chinese'];else{if(_0xaef40f[0x0][_0x3f46b4(0x18d)]==_0x3f46b4(0x102))var _0xdb2df4=users['Arabic'];}}}}}}}_0x5dd715[_0x3f46b4(0xe8)](_0x3f46b4(0x114),{'success':_0x2fa39e[_0x3f46b4(0xf7)](_0x3f46b4(0x18b)),'errors':_0x2fa39e[_0x3f46b4(0xf7)](_0x3f46b4(0xf6)),'role':_0xafc09,'profile':_0x47a1be,'master_shop':_0xaef40f,'user':_0xf43321,'language':_0xdb2df4});}catch(_0x9fdfb0){console[_0x3f46b4(0xf3)](_0x9fdfb0);}}),router[a0_0x94e428(0xe5)](a0_0x94e428(0x17d),auth,async(_0x2b53bb,_0x593bf6)=>{const _0x452eac=a0_0x94e428;try{const {name:_0x1dd4f8,secondary_unit:_0x2141a0,products:_0x549a85}=_0x2b53bb[_0x452eac(0xe2)],_0x78e7fd=new units({'name':_0x1dd4f8,'secondary_unit':_0x2141a0,'products':_0x549a85}),_0x1fd0d0=await units[_0x452eac(0xff)]({'name':_0x1dd4f8});_0x1fd0d0?_0x2b53bb[_0x452eac(0xf7)](_0x452eac(0xf6),_0x1dd4f8+_0x452eac(0x12f)):_0x2b53bb[_0x452eac(0xf7)](_0x452eac(0x18b),_0x1dd4f8+_0x452eac(0x134));const _0x88f9ba=await _0x78e7fd[_0x452eac(0xed)]();_0x593bf6[_0x452eac(0xf4)](_0x452eac(0x1a9));}catch(_0x5825ea){console[_0x452eac(0xf3)](_0x5825ea);}}),router[a0_0x94e428(0x17c)](a0_0x94e428(0x115),auth,async(_0x525b52,_0x4ab050)=>{const _0x5c8a9b=a0_0x94e428;try{const {username:_0x51d66d,email:_0x2a6277,role:_0x232822}=_0x525b52[_0x5c8a9b(0x121)],_0x4e52bc=_0x525b52['user'],_0x49a3cc=await profile[_0x5c8a9b(0xff)]({'email':_0x4e52bc[_0x5c8a9b(0x130)]}),_0x4e8cc3=await master_shop['find']();console[_0x5c8a9b(0xf3)](_0x5c8a9b(0x101),_0x4e8cc3);const _0x4bbedb=_0x525b52[_0x5c8a9b(0x167)]['id'],_0x5b2f23=await units[_0x5c8a9b(0x10f)](_0x4bbedb);if(_0x4e8cc3[0x0][_0x5c8a9b(0x18d)]==_0x5c8a9b(0x135))var _0x4c14d5=users[_0x5c8a9b(0x117)];else{if(_0x4e8cc3[0x0][_0x5c8a9b(0x18d)]=='Hindi')var _0x4c14d5=users['Hindi'];else{if(_0x4e8cc3[0x0][_0x5c8a9b(0x18d)]=='German')var _0x4c14d5=users['German'];else{if(_0x4e8cc3[0x0][_0x5c8a9b(0x18d)]==_0x5c8a9b(0x184))var _0x4c14d5=users['Spanish'];else{if(_0x4e8cc3[0x0]['language']==_0x5c8a9b(0x16e))var _0x4c14d5=users[_0x5c8a9b(0x16e)];else{if(_0x4e8cc3[0x0]['language']==_0x5c8a9b(0xfe))var _0x4c14d5=users[_0x5c8a9b(0x175)];else{if(_0x4e8cc3[0x0][_0x5c8a9b(0x18d)]==_0x5c8a9b(0x164))var _0x4c14d5=users['Chinese'];else{if(_0x4e8cc3[0x0][_0x5c8a9b(0x18d)]=='Arabic\x20(ae)')var _0x4c14d5=users[_0x5c8a9b(0x176)];}}}}}}}_0x4ab050[_0x5c8a9b(0xe8)](_0x5c8a9b(0x114),{'success':_0x525b52[_0x5c8a9b(0xf7)](_0x5c8a9b(0x18b)),'errors':_0x525b52[_0x5c8a9b(0xf7)](_0x5c8a9b(0xf6)),'role':_0x4e52bc,'profile':_0x49a3cc,'master_shop':_0x4e8cc3,'user':_0x5b2f23,'language':_0x4c14d5});}catch(_0x36d28a){console[_0x5c8a9b(0xf3)](_0x36d28a);}}),router['post'](a0_0x94e428(0x115),auth,async(_0x5c83dd,_0x482da5)=>{const _0xf3705d=a0_0x94e428;try{const _0x3d1cdc=_0x5c83dd[_0xf3705d(0x167)]['id'],_0x211ffb=await units['findByIdAndUpdate'](_0x3d1cdc,_0x5c83dd[_0xf3705d(0xe2)]);_0x5c83dd[_0xf3705d(0xf7)](_0xf3705d(0x18b),_0xf3705d(0x12d)),_0x482da5[_0xf3705d(0xf4)](_0xf3705d(0x1a9));}catch(_0xee4db3){console[_0xf3705d(0xf3)](_0xee4db3);}}),router[a0_0x94e428(0x17c)](a0_0x94e428(0x126),auth,async(_0x181797,_0x5eba20)=>{const _0x4f7764=a0_0x94e428;try{const _0x350b84=_0x181797[_0x4f7764(0x167)]['id'],_0x2a93c2=await units[_0x4f7764(0x178)](_0x350b84);_0x181797[_0x4f7764(0xf7)]('success',_0x4f7764(0x137)),_0x5eba20[_0x4f7764(0xf4)](_0x4f7764(0x1a9));}catch(_0x44eb22){console[_0x4f7764(0xf3)](_0x44eb22);}});function a0_0x4953(_0x57edc6,_0x587c0c){const _0x366f42=a0_0x366f();return a0_0x4953=function(_0x4953b5,_0x3912e4){_0x4953b5=_0x4953b5-0xe0;let _0x380cdc=_0x366f42[_0x4953b5];return _0x380cdc;},a0_0x4953(_0x57edc6,_0x587c0c);}const storage=multer[a0_0x94e428(0x156)]({'destination':(_0x5e88cd,_0x470962,_0x4dc3a8)=>{const _0x459f2d=a0_0x94e428;_0x4dc3a8(null,_0x459f2d(0xe4));},'filename':(_0x2e3df1,_0x514002,_0x1e2f49)=>{const _0x245f4e=a0_0x94e428;_0x1e2f49(null,Date[_0x245f4e(0x110)]()+_0x514002[_0x245f4e(0x171)]);}}),upload=multer({'storage':storage});router[a0_0x94e428(0x17c)](a0_0x94e428(0x1aa),auth,async(_0xebe3c8,_0x4f9323)=>{const _0xc02b75=a0_0x94e428;try{const {username:_0x485f0e,email:_0x4567ec,role:_0x43ca2e}=_0xebe3c8[_0xc02b75(0x121)],_0x18cbf6=_0xebe3c8[_0xc02b75(0x121)],_0x3c2b75=await profile['findOne']({'email':_0x18cbf6[_0xc02b75(0x130)]}),_0x3f693d={'year':'numeric','month':_0xc02b75(0x11b),'day':_0xc02b75(0x186)},_0x61b893=await master_shop[_0xc02b75(0x138)]();console[_0xc02b75(0xf3)](_0xc02b75(0x1af),_0x61b893);const _0x45f37a=await product[_0xc02b75(0x138)]();console[_0xc02b75(0xf3)](_0xc02b75(0x173),_0x45f37a);const _0x27b8bd=await warehouse[_0xc02b75(0x136)]([{'$unwind':'$product_details'},{'$lookup':{'from':_0xc02b75(0x14b),'localField':'product_details.product_name','foreignField':_0xc02b75(0x188),'as':_0xc02b75(0x16d)}},{'$unwind':_0xc02b75(0x13e)},{'$project':{'product_name':_0xc02b75(0x1ab),'product_stock':_0xc02b75(0x16a)}},{'$group':{'_id':_0xc02b75(0x11e),'product_stock':{'$sum':_0xc02b75(0x13d)}}}]);console[_0xc02b75(0xf3)](_0xc02b75(0x191),_0x27b8bd),_0x27b8bd['forEach'](_0x2485c4=>{const _0x44330b=_0xc02b75,_0x4d18a8=_0x45f37a[_0x44330b(0x15f)](_0x17cf75=>{const _0x34aa01=_0x44330b;_0x17cf75[_0x34aa01(0x188)]==_0x2485c4[_0x34aa01(0x116)]&&(_0x17cf75[_0x34aa01(0x1a8)]=parseInt(_0x17cf75[_0x34aa01(0x1a8)])+parseInt(_0x2485c4[_0x34aa01(0x10b)]));});}),console[_0xc02b75(0xf3)](_0xc02b75(0x173),_0x45f37a);if(_0x61b893[0x0][_0xc02b75(0x18d)]==_0xc02b75(0x135))var _0x31396f=users[_0xc02b75(0x117)];else{if(_0x61b893[0x0][_0xc02b75(0x18d)]==_0xc02b75(0x189))var _0x31396f=users[_0xc02b75(0x189)];else{if(_0x61b893[0x0][_0xc02b75(0x18d)]==_0xc02b75(0x199))var _0x31396f=users[_0xc02b75(0x199)];else{if(_0x61b893[0x0]['language']==_0xc02b75(0x184))var _0x31396f=users[_0xc02b75(0x184)];else{if(_0x61b893[0x0][_0xc02b75(0x18d)]==_0xc02b75(0x16e))var _0x31396f=users[_0xc02b75(0x16e)];else{if(_0x61b893[0x0][_0xc02b75(0x18d)]==_0xc02b75(0xfe))var _0x31396f=users[_0xc02b75(0x175)];else{if(_0x61b893[0x0]['language']==_0xc02b75(0x164))var _0x31396f=users[_0xc02b75(0x164)];else{if(_0x61b893[0x0][_0xc02b75(0x18d)]=='Arabic\x20(ae)')var _0x31396f=users[_0xc02b75(0x176)];}}}}}}}_0x4f9323[_0xc02b75(0xe8)](_0xc02b75(0x14b),{'success':_0xebe3c8[_0xc02b75(0xf7)](_0xc02b75(0x18b)),'errors':_0xebe3c8[_0xc02b75(0xf7)](_0xc02b75(0xf6)),'alldata':_0x45f37a,'profile':_0x3c2b75,'master_shop':_0x61b893,'role':_0x18cbf6,'product_stock':_0x27b8bd,'language':_0x31396f});}catch(_0x14438b){console[_0xc02b75(0xf3)](_0x14438b);}}),router[a0_0x94e428(0x17c)](a0_0x94e428(0x158),auth,async(_0x3aad34,_0x22082f)=>{const _0x1cd207=a0_0x94e428;try{const {username:_0x306df6,email:_0x269c5c,role:_0x343287}=_0x3aad34[_0x1cd207(0x121)],_0x4131ab=_0x3aad34[_0x1cd207(0x121)],_0x5a847f=await profile[_0x1cd207(0xff)]({'email':_0x4131ab[_0x1cd207(0x130)]}),_0x2ae640=await master_shop['find']();console[_0x1cd207(0xf3)](_0x1cd207(0x101),_0x2ae640);const _0x12c357=await categories['find']({}),_0x4a27b7=await brands['find']({}),_0x2b6e42=await units[_0x1cd207(0x138)]({}),_0x5de167=await warehouse[_0x1cd207(0x138)]({'status':'Enabled'});if(_0x2ae640[0x0][_0x1cd207(0x18d)]==_0x1cd207(0x135))var _0x59d755=users[_0x1cd207(0x117)];else{if(_0x2ae640[0x0][_0x1cd207(0x18d)]==_0x1cd207(0x189))var _0x59d755=users[_0x1cd207(0x189)];else{if(_0x2ae640[0x0][_0x1cd207(0x18d)]==_0x1cd207(0x199))var _0x59d755=users[_0x1cd207(0x199)];else{if(_0x2ae640[0x0][_0x1cd207(0x18d)]==_0x1cd207(0x184))var _0x59d755=users['Spanish'];else{if(_0x2ae640[0x0][_0x1cd207(0x18d)]=='French')var _0x59d755=users['French'];else{if(_0x2ae640[0x0][_0x1cd207(0x18d)]==_0x1cd207(0xfe))var _0x59d755=users[_0x1cd207(0x175)];else{if(_0x2ae640[0x0][_0x1cd207(0x18d)]==_0x1cd207(0x164))var _0x59d755=users['Chinese'];else{if(_0x2ae640[0x0][_0x1cd207(0x18d)]==_0x1cd207(0x102))var _0x59d755=users[_0x1cd207(0x176)];}}}}}}}_0x22082f['render'](_0x1cd207(0x19e),{'success':_0x3aad34[_0x1cd207(0xf7)](_0x1cd207(0x18b)),'errors':_0x3aad34[_0x1cd207(0xf7)](_0x1cd207(0xf6)),'role':_0x4131ab,'profile':_0x5a847f,'categories':_0x12c357,'brands':_0x4a27b7,'master_shop':_0x2ae640,'units':_0x2b6e42,'language':_0x59d755,'find_data':_0x5de167});}catch(_0x54d4fc){console[_0x1cd207(0xf3)](_0x54d4fc);}}),router[a0_0x94e428(0xe5)](a0_0x94e428(0x158),auth,upload[a0_0x94e428(0x133)](a0_0x94e428(0x11d)),async(_0x2ed5c0,_0x4212be)=>{const _0x289872=a0_0x94e428;try{const {name:_0x328148,category:_0x3eaeb8,brand:_0x12bdd6,unit:_0x5eaf8f,alertquantity:_0x13cccd,stock:_0x40668c,product_code:_0x144ea4,warehouse:_0x4171c6,primary_ItemCode:_0x36b8b1,second_ItemCode:_0x5e26d7,second_unit:_0x275263,maxPerUnit:_0x2f89ea,MaxPerProduct:_0xcd581b,sales_cat:_0x33bc21,type_prod:_0x1ac1a2}=_0x2ed5c0[_0x289872(0xe2)],_0x2ed001=_0x2ed5c0['file']?.[_0x289872(0x19d)]||_0x289872(0x192),_0x40ed7f=new product({'image':_0x2ed001,'name':_0x328148,'category':_0x3eaeb8,'brand':_0x12bdd6,'unit':_0x5eaf8f,'alertquantity':_0x13cccd,'stock':_0x40668c,'product_code':_0x144ea4,'warehouse':_0x4171c6,'primary_code':_0x36b8b1,'secondary_code':_0x5e26d7,'second_unit':_0x275263,'maxStocks':_0xcd581b,'maxProdPerUnit':_0x2f89ea,'sales_category':_0x33bc21,'type_products':_0x1ac1a2}),_0x4dbc72=await _0x40ed7f[_0x289872(0xed)](),_0x4c4d09=await categories[_0x289872(0xff)]({'name':_0x3eaeb8});_0x4c4d09[_0x289872(0x14b)]=parseInt(_0x4c4d09[_0x289872(0x14b)])+0x1,await _0x4c4d09[_0x289872(0xed)]();const _0x5023f8=await brands[_0x289872(0xff)]({'name':_0x12bdd6});_0x5023f8[_0x289872(0x14b)]=parseInt(_0x5023f8['products'])+0x1,await _0x5023f8['save']();const _0x4a007c=await units[_0x289872(0xff)]({'name':_0x5eaf8f});_0x4a007c[_0x289872(0x14b)]=parseInt(_0x4a007c['products'])+0x1,await _0x4a007c[_0x289872(0xed)](),_0x2ed5c0[_0x289872(0xf7)](_0x289872(0x18b),_0x289872(0x18f)),_0x4212be['redirect'](_0x289872(0x19f));}catch(_0x5e2cce){console[_0x289872(0xf3)](_0x5e2cce);}}),router[a0_0x94e428(0x17c)](a0_0x94e428(0x13a),auth,async(_0x2d52c9,_0x32711e)=>{const _0x382e8f=a0_0x94e428;try{const {username:_0x23f093,email:_0x3d9141,role:_0x1652de}=_0x2d52c9[_0x382e8f(0x121)],_0xa6060e=_0x2d52c9[_0x382e8f(0x121)],_0x13f5cc=await profile[_0x382e8f(0xff)]({'email':_0xa6060e[_0x382e8f(0x130)]}),_0x58e359=await master_shop['find']();console[_0x382e8f(0xf3)]('edit\x20Product\x20master',_0x58e359);const _0x52fffd=_0x2d52c9[_0x382e8f(0x167)]['id'],_0x45d311=await product[_0x382e8f(0x10f)](_0x52fffd),_0x3c2db3=await categories['find']({}),_0x5ab636=await brands[_0x382e8f(0x138)]({}),_0xee8d58=await units[_0x382e8f(0x138)]({}),_0x52d0b4=await warehouse[_0x382e8f(0x138)]({'status':_0x382e8f(0x162)}),_0x421f9d=await units[_0x382e8f(0x136)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':_0x382e8f(0x14a)}}}]);if(_0x58e359[0x0][_0x382e8f(0x18d)]==_0x382e8f(0x135))var _0x195630=users[_0x382e8f(0x117)];else{if(_0x58e359[0x0][_0x382e8f(0x18d)]==_0x382e8f(0x189))var _0x195630=users[_0x382e8f(0x189)];else{if(_0x58e359[0x0][_0x382e8f(0x18d)]=='German')var _0x195630=users[_0x382e8f(0x199)];else{if(_0x58e359[0x0][_0x382e8f(0x18d)]==_0x382e8f(0x184))var _0x195630=users[_0x382e8f(0x184)];else{if(_0x58e359[0x0][_0x382e8f(0x18d)]==_0x382e8f(0x16e))var _0x195630=users[_0x382e8f(0x16e)];else{if(_0x58e359[0x0]['language']==_0x382e8f(0xfe))var _0x195630=users[_0x382e8f(0x175)];else{if(_0x58e359[0x0][_0x382e8f(0x18d)]==_0x382e8f(0x164))var _0x195630=users[_0x382e8f(0x164)];else{if(_0x58e359[0x0][_0x382e8f(0x18d)]==_0x382e8f(0x102))var _0x195630=users[_0x382e8f(0x176)];}}}}}}}_0x32711e[_0x382e8f(0xe8)](_0x382e8f(0x15b),{'success':_0x2d52c9[_0x382e8f(0xf7)](_0x382e8f(0x18b)),'errors':_0x2d52c9[_0x382e8f(0xf7)](_0x382e8f(0xf6)),'role':_0xa6060e,'profile':_0x13f5cc,'alldata':_0x45d311,'categories':_0x3c2db3,'brands':_0x5ab636,'master_shop':_0x58e359,'units':_0xee8d58,'secondunit':_0x421f9d,'find_data':_0x52d0b4,'language':_0x195630});}catch(_0x272b5b){console[_0x382e8f(0xf3)](_0x272b5b);}}),router['post']('/view/:id',auth,upload[a0_0x94e428(0x133)](a0_0x94e428(0x11d)),async(_0xb2a8ae,_0x422c48)=>{const _0xcf8a80=a0_0x94e428;try{const _0xee9907=_0xb2a8ae[_0xcf8a80(0x167)]['id'],_0x1ca89d=await product[_0xcf8a80(0x10f)](_0xee9907),{image:_0x1d17a8,name:_0x1661a2,category:_0x1ae33f,brand:_0x4c262d,sku:_0x5a4c62,unit:_0x19a662,alertquantity:_0x1c3230,product_code:_0x168308,warehouse:_0x531271,primary_ItemCode:_0x309313,second_ItemCode:_0x4272b5,second_unit:_0xc2c93f,maxPerUnit:_0x58f0e6,MaxPerProduct:_0x3d7dff,prod_catdata:_0x496d6a,type_prod:_0x55dd02,sales_cat:_0x3c7bf7}=_0xb2a8ae[_0xcf8a80(0xe2)];_0xb2a8ae['file']&&(_0x1ca89d[_0xcf8a80(0x11d)]=_0xb2a8ae[_0xcf8a80(0xf0)][_0xcf8a80(0x19d)]);_0x1ca89d[_0xcf8a80(0x188)]=_0x1661a2,_0x1ca89d['category']=_0x1ae33f,_0x1ca89d[_0xcf8a80(0x127)]=_0x4c262d,_0x1ca89d[_0xcf8a80(0x152)]=_0x5a4c62,_0x1ca89d[_0xcf8a80(0x10e)]=_0x19a662,_0x1ca89d[_0xcf8a80(0xe0)]=_0x1c3230,_0x1ca89d[_0xcf8a80(0xf2)]=_0x168308,_0x1ca89d['warehouse']=_0x531271,_0x1ca89d[_0xcf8a80(0xfd)]=_0x309313,_0x1ca89d[_0xcf8a80(0x123)]=_0x4272b5,_0x1ca89d[_0xcf8a80(0x14d)]=_0xc2c93f,_0x1ca89d[_0xcf8a80(0x19c)]=_0x3d7dff,_0x1ca89d[_0xcf8a80(0x1ad)]=_0x58f0e6,_0x1ca89d[_0xcf8a80(0x1a7)]=_0x496d6a,_0x1ca89d['type_products']=_0x55dd02,_0x1ca89d[_0xcf8a80(0x187)]=_0x3c7bf7;const _0x102efa=await _0x1ca89d[_0xcf8a80(0xed)]();console[_0xcf8a80(0xf3)](_0xcf8a80(0x10c),_0x1ca89d),_0xb2a8ae[_0xcf8a80(0xf7)]('success','product\x20update\x20successfully'),_0x422c48['redirect']('/products/view');}catch(_0x4f2759){console[_0xcf8a80(0xf3)](_0x4f2759);}}),router[a0_0x94e428(0x17c)](a0_0x94e428(0x10d),auth,async(_0x33fa1f,_0x30935f)=>{const _0x5787f5=a0_0x94e428;try{const {username:_0x2ee9d7,email:_0x1f69a5,role:_0x36d207}=_0x33fa1f[_0x5787f5(0x121)],_0x215d56=_0x33fa1f[_0x5787f5(0x121)],_0x5ac73c=await profile[_0x5787f5(0xff)]({'email':_0x215d56['email']}),_0x3193b8=await master_shop['find']();console['log'](_0x5787f5(0x109),_0x3193b8);const _0x21715b=_0x33fa1f[_0x5787f5(0x167)]['id'],_0x57cf79=await product[_0x5787f5(0x10f)](_0x21715b);console[_0x5787f5(0xf3)]('barcode\x20user_id',_0x57cf79);if(_0x3193b8[0x0]['language']=='English\x20(US)')var _0x5386c7=users['English'];else{if(_0x3193b8[0x0][_0x5787f5(0x18d)]==_0x5787f5(0x189))var _0x5386c7=users[_0x5787f5(0x189)];else{if(_0x3193b8[0x0]['language']==_0x5787f5(0x199))var _0x5386c7=users['German'];else{if(_0x3193b8[0x0][_0x5787f5(0x18d)]==_0x5787f5(0x184))var _0x5386c7=users[_0x5787f5(0x184)];else{if(_0x3193b8[0x0][_0x5787f5(0x18d)]=='French')var _0x5386c7=users[_0x5787f5(0x16e)];else{if(_0x3193b8[0x0][_0x5787f5(0x18d)]=='Portuguese\x20(BR)')var _0x5386c7=users[_0x5787f5(0x175)];else{if(_0x3193b8[0x0][_0x5787f5(0x18d)]=='Chinese')var _0x5386c7=users[_0x5787f5(0x164)];else{if(_0x3193b8[0x0][_0x5787f5(0x18d)]==_0x5787f5(0x102))var _0x5386c7=users[_0x5787f5(0x176)];}}}}}}}_0x30935f[_0x5787f5(0xe8)]('product_barcode',{'success':_0x33fa1f[_0x5787f5(0xf7)](_0x5787f5(0x18b)),'errors':_0x33fa1f[_0x5787f5(0xf7)](_0x5787f5(0xf6)),'role':_0x215d56,'profile':_0x5ac73c,'alldata':_0x57cf79,'master_shop':_0x3193b8,'language':_0x5386c7});}catch(_0x318447){console[_0x5787f5(0xf3)](_0x318447);}}),router['get'](a0_0x94e428(0xf1),auth,async(_0x267494,_0xbb3046)=>{const _0x4c5944=a0_0x94e428;try{const _0xbef0da=new excelJS[(_0x4c5944(0x159))](),_0x72b49c=_0xbef0da[_0x4c5944(0xe7)](_0x4c5944(0x16f));return _0x72b49c[_0x4c5944(0x17e)]=[{'header':_0x4c5944(0x1a5),'key':_0x4c5944(0x1a3),'width':0xa},{'header':_0x4c5944(0x18a),'key':_0x4c5944(0x12a),'width':0xa},{'header':_0x4c5944(0x153),'key':_0x4c5944(0x172),'width':0xa},{'header':_0x4c5944(0x15d),'key':'PSecondaryUnits','width':0xa},{'header':'max_number_per_units','key':_0x4c5944(0x13f),'width':0xa},{'header':_0x4c5944(0x14e),'key':_0x4c5944(0xe9),'width':0xa},{'header':_0x4c5944(0x1ae),'key':_0x4c5944(0xe9),'width':0xa},{'header':_0x4c5944(0x193),'key':_0x4c5944(0xe9),'width':0xa},{'header':'Category','key':_0x4c5944(0x14c),'width':0xa},{'header':_0x4c5944(0xee),'key':_0x4c5944(0x107),'width':0xa},{'header':_0x4c5944(0x195),'key':_0x4c5944(0x107),'width':0xa},{'header':_0x4c5944(0x182),'key':_0x4c5944(0x143),'width':0xa}],_0xbb3046[_0x4c5944(0x111)](_0x4c5944(0xf8),_0x4c5944(0xe1)),_0xbb3046['setHeader'](_0x4c5944(0x179),_0x4c5944(0x12c)),_0xbef0da[_0x4c5944(0x1a2)][_0x4c5944(0x185)](_0xbb3046)[_0x4c5944(0x124)](()=>{const _0x1b583c=_0x4c5944;_0xbb3046[_0x1b583c(0x118)](0xc8);});}catch(_0x23574c){_0xbb3046[_0x4c5944(0x118)](0x190)[_0x4c5944(0xe3)](_0x23574c);}});function a0_0x366f(){const _0x24d574=['findByIdAndUpdate','master','Arabic\x20(ae)','\x20brand\x20is\x20add\x20successfully','../public/language/languages.json','607458ppKiSO','Raw\x20Materials','PAlQty','min','barcode\x20Product\x20master','$brand','product_stock','product\x20edit','/barcode/:id','unit','findById','now','setHeader','Router','categories','units','/units/:id','_id','English','status','SheetNames','json','long','length','image','$product_name','exports','categories_edit','user','jsbarcode','secondary_code','then','/barcode_data','/units/delete/:id','brand','toBuffer','/print_barcode_filter/','PBrands','Category','attachment;\x20filename=Product_Migration_File.xlsx','unit\x20data\x20update\x20successfully','/categories/delete/:id','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','email','$category','height','single','\x20unit\x20is\x20add\x20successfully','English\x20(US)','aggregate','unit\x20data\x20delete\x20successfully','find','readFile','/view/:id','push','sheet_to_json','$product_stock','$product_docs','MaxperUnits','brands','250OWxzlR','3236ZSsTNa','Prod_Cat','brand\x20data\x20delete\x20successfully','categ','express','/products/categories','prod_categ','addPage','$secondary_unit','products','PCat','secondary_unit','Primary_Code','/barcode_filter','Sheets','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','sku','Units','\x20Edit\x20Successfully','public/Migration','diskStorage','canvas','/view/add_products','Workbook','/categories/:id','edit_product','base64','Secondary_Units','../middleware/auth','map','max_number_per_units','concat','Enabled','/products_import_migrate_file','Chinese','/brands','brand\x20data\x20update\x20successfully','params','402uMYFgK','/print_barcode_single/:id','$product_details.product_stock','1086372Edkkxl','end','product_docs','French','Products','/filter_product','originalname','PUnits','Products\x20find_data','category','Portuguese','Arabic','/print_barcode_filter_search/','findByIdAndDelete','Content-Disposition','121532mTmKjA','CODE128','get','/units','columns','/products/brands','4CkRgfY','2585121hATfBq','Products_category','multer','Spanish','write','numeric','sales_category','name','Hindi','Brands','success','pdfkit-table','language','/print_barcode','product\x20add\x20successfully','68049KjDZHa','Products\x20warehouse_data','defaultProduct.avif','Product_Code','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Maximum_Stocks','/brands/:id','toString','data','German','5KdczMQ','express/lib/response','maxStocks','filename','add_product','/products/view','width','\x20<>\x20','xlsx','PName','\x20categories\x20is\x20add\x20successfully','Product_Name','/select_data','product_category','stock','/products/units','/view','$product_details.product_name','bind','maxProdPerUnit','Secondary_Code','Products\x20master','alertquantity','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','body','send','public/upload','post','/categories','addWorksheet','render','ProductCode','108160QGLjGS','Finished\x20Goods','message','save','Alert_QTY','product_barcode_products','file','/products_export_migrate_file','product_code','log','redirect','categories\x20data\x20delete\x20successfully','errors','flash','Content-Type','/brands/delete/:id','exceljs','migrate_product_fule','$_id','primary_code','Portuguese\x20(BR)','findOne'];a0_0x366f=function(){return _0x24d574;};return a0_0x366f();}const storage1=multer[a0_0x94e428(0x156)]({'destination':(_0x13850b,_0x318de8,_0x163bdb)=>{const _0x231e93=a0_0x94e428;_0x163bdb(null,_0x231e93(0x155));},'filename':(_0x381063,_0x405019,_0x13e98a)=>{const _0x41c053=a0_0x94e428;_0x13e98a(null,Date[_0x41c053(0x110)]()+_0x405019[_0x41c053(0x171)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x94e428(0xe5)](a0_0x94e428(0x163),auth,uploadMigrate[a0_0x94e428(0x133)](a0_0x94e428(0xfb)),async(_0xe0439c,_0x2d4e18)=>{const _0x39ab98=a0_0x94e428,_0x23a82d=_0xe0439c[_0x39ab98(0xf0)]['filename'],_0x4da599=await xlsx[_0x39ab98(0x139)]('public/Migration/'+_0x23a82d);let _0x4e843c=_0x4da599[_0x39ab98(0x119)],_0x1706fe=xlsx['utils'][_0x39ab98(0x13c)](_0x4da599[_0x39ab98(0x150)][_0x4e843c[0x0]]);for(const _0x596ac1 of _0x1706fe){const _0x23d6a4=_0x596ac1[_0x39ab98(0x1a5)],_0x554f28=_0x596ac1[_0x39ab98(0x18a)],_0x203319=_0x596ac1[_0x39ab98(0x153)],_0x25ef37=_0x596ac1['Secondary_Units'],_0x3e0b10=_0x596ac1[_0x39ab98(0x193)],_0x20cd55=_0x596ac1[_0x39ab98(0x12b)],_0x5429db=_0x596ac1[_0x39ab98(0xee)],_0x40e375=_0x596ac1[_0x39ab98(0x14e)],_0x3dd84f=_0x596ac1[_0x39ab98(0x1ae)],_0x195b95=_0x596ac1[_0x39ab98(0x195)],_0x203c7f=_0x596ac1[_0x39ab98(0x160)],_0x2a2fed=_0x596ac1[_0x39ab98(0x182)];try{let _0x3b176e=await categories['findOne']({'name':_0x20cd55});if(!_0x3b176e){const _0x504405=new categories({'name':_0x20cd55,'products':'0'});_0x3b176e=await _0x504405['save']();}let _0x1a52cb=await brands['findOne']({'name':_0x554f28});if(!_0x1a52cb){const _0x447938=new brands({'name':_0x554f28,'products':'0'});_0x1a52cb=await _0x447938[_0x39ab98(0xed)]();}let _0x487683=await units[_0x39ab98(0xff)]({'name':_0x203319,'secondary_unit':_0x25ef37});if(!_0x487683){const _0x1bb09d=new units({'name':_0x203319,'secondary_unit':_0x25ef37,'products':'0'});_0x487683=await _0x1bb09d[_0x39ab98(0xed)]();}const _0x462614=await product[_0x39ab98(0x138)]({'name':_0x23d6a4,'category':_0x3b176e[_0x39ab98(0x188)],'brand':_0x1a52cb['name'],'secondary_unit':_0x487683[_0x39ab98(0x14d)],'product_code':_0x3e0b10});console[_0x39ab98(0xf3)](_0x462614[_0x39ab98(0x11c)]+_0x39ab98(0x1a1)+_0x3b176e[_0x39ab98(0x188)]+_0x39ab98(0x1a1)+_0x1a52cb[_0x39ab98(0x188)]+'\x20<>\x20'+_0x487683[_0x39ab98(0x14d)]+'\x20<>\x20'+_0x3e0b10+'\x20<>\x20'+_0x23d6a4);if(_0x462614[_0x39ab98(0x11c)]===0x0){const _0xee724d=new product({'image':_0x39ab98(0x192),'name':_0x23d6a4,'category':_0x3b176e[_0x39ab98(0x188)],'brand':_0x1a52cb[_0x39ab98(0x188)],'unit':_0x487683[_0x39ab98(0x188)],'alertquantity':_0x5429db,'product_code':_0x3e0b10,'secondary_unit':_0x487683[_0x39ab98(0x14d)],'primary_code':_0x40e375,'secondary_code':_0x3dd84f,'maxStocks':_0x195b95,'maxProdPerUnit':_0x203c7f,'product_category':_0x2a2fed}),_0xe48c2=await _0xee724d[_0x39ab98(0xed)]();_0x3b176e[_0x39ab98(0x14b)]=parseInt(_0x3b176e[_0x39ab98(0x14b)])+0x1,await _0x3b176e[_0x39ab98(0xed)](),_0x1a52cb['products']=parseInt(_0x1a52cb[_0x39ab98(0x14b)])+0x1,await _0x1a52cb[_0x39ab98(0xed)](),_0x487683[_0x39ab98(0x14b)]=parseInt(_0x487683['products'])+0x1,await _0x487683['save'](),_0xe0439c[_0x39ab98(0xf7)](_0x39ab98(0x18b),_0x23d6a4+'\x20added\x20successfully');}else{console[_0x39ab98(0xf3)](_0x462614[0x0]);const _0x4ec838=_0x462614[0x0];_0x4ec838[_0x39ab98(0x174)]=_0x3b176e[_0x39ab98(0x188)],_0x4ec838[_0x39ab98(0x127)]=_0x1a52cb[_0x39ab98(0x188)],_0x4ec838[_0x39ab98(0x10e)]=_0x487683[_0x39ab98(0x188)],_0x4ec838['alertquantity']=_0x5429db,_0x4ec838[_0x39ab98(0xf2)]=_0x3e0b10,_0x4ec838[_0x39ab98(0x14d)]=_0x487683[_0x39ab98(0x14d)],_0x4ec838[_0x39ab98(0xfd)]=_0x40e375,_0x4ec838[_0x39ab98(0x123)]=_0x3dd84f,_0x4ec838[_0x39ab98(0x19c)]=_0x195b95,_0x4ec838['maxProdPerUnit']=_0x203c7f,_0x4ec838[_0x39ab98(0x1a7)]=_0x2a2fed;const _0x489391=await _0x4ec838[_0x39ab98(0xed)]();_0xe0439c[_0x39ab98(0xf7)](_0x39ab98(0x18b),_0x489391['name']+_0x39ab98(0x154));}}catch(_0x379a99){_0x2d4e18[_0x39ab98(0x118)](0x1f4)[_0x39ab98(0x11a)]({'proderror':_0x379a99[_0x39ab98(0xec)],'aproduct':_0x23d6a4});}}_0x2d4e18[_0x39ab98(0xf4)]('/products/view');}),router['post'](a0_0x94e428(0x1a6),auth,async(_0x20bb88,_0x43c0f8)=>{const _0x82c97d=a0_0x94e428;try{console['log'](_0x20bb88[_0x82c97d(0xe2)]);const {data_cateory:_0x4b9f9f,datachoose:_0x575930}=_0x20bb88[_0x82c97d(0xe2)];var _0x166113;if(_0x575930=='prod_categ')_0x166113=await product[_0x82c97d(0x136)]([{'$group':{'_id':'$product_category'}}]);else{if(_0x575930==_0x82c97d(0x140))_0x166113=await product[_0x82c97d(0x136)]([{'$match':{'product_category':_0x4b9f9f}},{'$group':{'_id':_0x82c97d(0x10a)}}]);else _0x575930==_0x82c97d(0x145)&&(_0x166113=await product[_0x82c97d(0x136)]([{'$match':{'product_category':_0x4b9f9f}},{'$group':{'_id':_0x82c97d(0x131)}}]));}_0x43c0f8[_0x82c97d(0x11a)](_0x166113);}catch(_0x120ce8){_0x43c0f8[_0x82c97d(0x11a)]({'message':_0x120ce8['message']});}}),router['post'](a0_0x94e428(0x170),auth,async(_0x3e23fa,_0x1ce995)=>{const _0x293b0c=a0_0x94e428;try{const {data_choosing:_0x5aceab,data_selected:_0x62fab0}=_0x3e23fa[_0x293b0c(0xe2)];var _0x7387f4;if(_0x5aceab==_0x293b0c(0x148))_0x7387f4=await product[_0x293b0c(0x136)]([{'$match':{'product_category':_0x62fab0}}]);else{if(_0x5aceab==_0x293b0c(0x140))_0x7387f4=await product[_0x293b0c(0x136)]([{'$match':{'brand':_0x62fab0}}]);else _0x5aceab==_0x293b0c(0x145)&&(_0x7387f4=await product['aggregate']([{'$match':{'category':_0x62fab0}}]));}_0x1ce995[_0x293b0c(0x11a)](_0x7387f4);}catch(_0x34e34a){_0x1ce995[_0x293b0c(0x11a)]({'message':_0x34e34a[_0x293b0c(0xec)]});}}),router[a0_0x94e428(0x17c)](a0_0x94e428(0x18e),auth,async(_0x34cd95,_0xc4e7c5)=>{const _0x7525ac=a0_0x94e428,_0x223e06=_0x34cd95[_0x7525ac(0x121)],_0x387302=await profile[_0x7525ac(0xff)]({'email':_0x223e06['email']}),_0x4ffdbc=await master_shop[_0x7525ac(0x138)](),_0x2fb7cb=await product['find']();if(_0x4ffdbc[0x0][_0x7525ac(0x18d)]==_0x7525ac(0x135))var _0x32c763=users[_0x7525ac(0x117)];else{if(_0x4ffdbc[0x0][_0x7525ac(0x18d)]==_0x7525ac(0x189))var _0x32c763=users[_0x7525ac(0x189)];else{if(_0x4ffdbc[0x0][_0x7525ac(0x18d)]==_0x7525ac(0x199))var _0x32c763=users[_0x7525ac(0x199)];else{if(_0x4ffdbc[0x0][_0x7525ac(0x18d)]=='Spanish')var _0x32c763=users[_0x7525ac(0x184)];else{if(_0x4ffdbc[0x0][_0x7525ac(0x18d)]==_0x7525ac(0x16e))var _0x32c763=users[_0x7525ac(0x16e)];else{if(_0x4ffdbc[0x0][_0x7525ac(0x18d)]=='Portuguese\x20(BR)')var _0x32c763=users[_0x7525ac(0x175)];else{if(_0x4ffdbc[0x0]['language']==_0x7525ac(0x164))var _0x32c763=users['Chinese'];else{if(_0x4ffdbc[0x0][_0x7525ac(0x18d)]==_0x7525ac(0x102))var _0x32c763=users[_0x7525ac(0x176)];}}}}}}}_0xc4e7c5['render'](_0x7525ac(0xef),{'success':_0x34cd95[_0x7525ac(0xf7)]('success'),'errors':_0x34cd95[_0x7525ac(0xf7)](_0x7525ac(0xf6)),'role':_0x223e06,'profile':_0x387302,'products':_0x2fb7cb,'master_shop':_0x4ffdbc,'language':_0x32c763});}),router[a0_0x94e428(0xe5)](a0_0x94e428(0x125),auth,async(_0x52d547,_0x5d54a7)=>{const _0x374e4b=a0_0x94e428,_0x59ad3a=await product[_0x374e4b(0x138)]();_0x5d54a7['json']({'data':_0x59ad3a});}),router[a0_0x94e428(0xe5)](a0_0x94e428(0x14f),auth,async(_0x4ca05e,_0x187826)=>{const _0x2d8f6c=a0_0x94e428;try{const {dataProdCat:_0x329f60,dataProdIdentity:_0x54cf5c}=_0x4ca05e['body'];var _0x1abfaf;switch(_0x329f60){case'fg':switch(_0x54cf5c){case _0x2d8f6c(0x18a):_0x1abfaf=await product[_0x2d8f6c(0x136)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x2d8f6c(0x10a)}},{'$project':{'brand':_0x2d8f6c(0xfc)}}]);break;case'Category':_0x1abfaf=await product[_0x2d8f6c(0x136)]([{'$match':{'product_category':_0x2d8f6c(0xeb)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x2d8f6c(0xfc)}}]);break;}break;case'rm':switch(_0x54cf5c){case _0x2d8f6c(0x18a):_0x1abfaf=await product[_0x2d8f6c(0x136)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':'$brand'}},{'$project':{'brand':'$_id'}}]);break;case _0x2d8f6c(0x12b):_0x1abfaf=await product[_0x2d8f6c(0x136)]([{'$match':{'product_category':_0x2d8f6c(0x106)}},{'$group':{'_id':'$category'}},{'$project':{'category':_0x2d8f6c(0xfc)}}]);break;}break;}_0x187826['json'](_0x1abfaf);}catch(_0x1754d1){_0x187826[_0x2d8f6c(0x11a)]({'message':_0x1754d1[_0x2d8f6c(0xec)]});}}),router[a0_0x94e428(0xe5)](a0_0x94e428(0x129),auth,async(_0x55b28b,_0x1272ff)=>{const _0x359884=a0_0x94e428;try{console['log'](_0x55b28b[_0x359884(0xe2)]);const {prod_cat:_0x4c5ea1,identity:_0x2f6722,valueData:_0x35c35e,typeofbarcode:_0x3a3e9d}=_0x55b28b[_0x359884(0xe2)];let _0x220923;switch(_0x4c5ea1){case'fg':if(_0x2f6722==_0x359884(0x18a))_0x220923=await product[_0x359884(0x136)]([{'$match':{'product_category':_0x359884(0xeb),'brand':_0x35c35e}}]);else _0x2f6722==_0x359884(0x12b)&&(_0x220923=await product[_0x359884(0x136)]([{'$match':{'product_category':'Finished\x20Goods','category':_0x35c35e}}]));break;case'rm':if(_0x2f6722==_0x359884(0x18a))_0x220923=await product[_0x359884(0x136)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x35c35e}}]);else _0x2f6722==_0x359884(0x12b)&&(_0x220923=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0x35c35e}}]));break;}const _0x3acc6d=_0xcf966f=>_0xcf966f*0x48,_0x348512={'width':0x3,'height':0x1},_0x584d4a=new PDFDocument({'margin':_0x3acc6d(0.75),'size':[_0x3acc6d(_0x348512[_0x359884(0x1a0)]),_0x3acc6d(_0x348512[_0x359884(0x132)])],'bufferPages':!![]}),_0x504946=_0x220923[_0x359884(0x11c)];for(let _0x4a3c48=0x0;_0x4a3c48<=_0x504946;_0x4a3c48++){if(_0x4a3c48!=_0x504946){const _0xef5cbb=_0x220923[_0x4a3c48]['name'],_0xed2395=_0x220923[_0x4a3c48][_0x359884(0xfd)],_0x2b1668=_0x220923[_0x4a3c48][_0x359884(0x123)],_0x4c4891=_0x220923[_0x4a3c48]['product_code'];var _0x2dbde0;switch(_0x3a3e9d){case'1':_0x2dbde0=_0xed2395;break;case'2':_0x2dbde0=_0x2b1668;break;case'3':_0x2dbde0=_0x4c4891;break;}const _0x46fd46={'width':0xd2,'height':0x64},_0x38d33d={'width':_0x3acc6d(_0x348512['width']),'height':_0x3acc6d(_0x348512[_0x359884(0x132)])},_0x565722=new Canvas();JsBarcode(_0x565722,_0x2dbde0,{'format':'CODE128','height':_0x46fd46[_0x359884(0x132)],'displayValue':!![],'text':_0x2dbde0});const _0x221733=_0x565722[_0x359884(0x128)](),_0x1e452b=_0x38d33d[_0x359884(0x1a0)]/_0x46fd46['width'],_0x47d412=_0x38d33d['height']/_0x46fd46['height'],_0x263ca5=Math[_0x359884(0x108)](_0x1e452b,_0x47d412),_0x19d861=_0x46fd46['width']*_0x263ca5,_0xfccca3=_0x46fd46[_0x359884(0x132)]*_0x263ca5,_0x59ecb2=(_0x38d33d[_0x359884(0x1a0)]-_0x19d861)/0x2,_0x3872c5=(_0x38d33d[_0x359884(0x132)]-_0xfccca3)/0x2;_0x584d4a['image'](_0x221733,_0x59ecb2,_0x3872c5,{'width':_0x19d861,'height':_0xfccca3}),_0x4a3c48!=_0x504946&&_0x584d4a[_0x359884(0x149)]();}}const _0x290cfd=[];_0x584d4a['on'](_0x359884(0x198),_0x290cfd[_0x359884(0x13b)]['bind'](_0x290cfd)),_0x584d4a['on'](_0x359884(0x16c),()=>{const _0x7047e1=_0x359884,_0x32b372=Buffer[_0x7047e1(0x161)](_0x290cfd),_0x5b572d=_0x32b372[_0x7047e1(0x197)](_0x7047e1(0x15c));_0x1272ff['json']({'pdfContent':_0x5b572d});}),_0x584d4a['end']();}catch(_0x4e6448){_0x1272ff[_0x359884(0x11a)]({'message':_0x4e6448['message']});}}),router[a0_0x94e428(0xe5)](a0_0x94e428(0x177),auth,async(_0x2bb2d8,_0x45048b)=>{const _0x272ecf=a0_0x94e428;try{console['log'](_0x2bb2d8[_0x272ecf(0xe2)]);const {prod_cat:_0x525763,identity:_0x1805e9,valueData:_0x297874}=_0x2bb2d8['body'];let _0x772aa9;switch(_0x525763){case'fg':if(_0x1805e9==_0x272ecf(0x18a))_0x772aa9=await product[_0x272ecf(0x136)]([{'$match':{'product_category':_0x272ecf(0xeb),'brand':_0x297874}}]);else _0x1805e9==_0x272ecf(0x12b)&&(_0x772aa9=await product[_0x272ecf(0x136)]([{'$match':{'product_category':_0x272ecf(0xeb),'category':_0x297874}}]));break;case'rm':if(_0x1805e9==_0x272ecf(0x18a))_0x772aa9=await product[_0x272ecf(0x136)]([{'$match':{'product_category':_0x272ecf(0x106),'brand':_0x297874}}]);else _0x1805e9==_0x272ecf(0x12b)&&(_0x772aa9=await product[_0x272ecf(0x136)]([{'$match':{'product_category':_0x272ecf(0x106),'category':_0x297874}}]));break;}_0x45048b[_0x272ecf(0x11a)]({'data':_0x772aa9});}catch(_0x1ecad2){_0x45048b['json']({'message':_0x1ecad2[_0x272ecf(0xec)]});}}),router[a0_0x94e428(0xe5)](a0_0x94e428(0x169),auth,async(_0x4e3e82,_0x1bcdeb)=>{const _0x2d22ad=a0_0x94e428;try{const _0x44cc67=_0x4e3e82['params']['id'],{copies:_0x169caa,typeofbarcode:_0x572766}=_0x4e3e82[_0x2d22ad(0xe2)];var _0x5ecabe=await product['findById'](_0x44cc67);const _0x4f556f=_0x489346=>_0x489346*0x48,_0x17a3c3={'width':0x3,'height':0x1},_0x4c3105=new PDFDocument({'margin':_0x4f556f(0.75),'size':[_0x4f556f(_0x17a3c3[_0x2d22ad(0x1a0)]),_0x4f556f(_0x17a3c3[_0x2d22ad(0x132)])],'bufferPages':!![]}),_0x3e6a34=_0x169caa,_0x4cb79b=_0x5ecabe[_0x2d22ad(0x188)],_0x103742=_0x5ecabe[_0x2d22ad(0xfd)],_0x3a9b66=_0x5ecabe[_0x2d22ad(0x123)],_0x3e2bc7=_0x5ecabe[_0x2d22ad(0xf2)];let _0x58f2b4;switch(_0x572766){case'1':_0x58f2b4=_0x103742;break;case'2':_0x58f2b4=_0x3a9b66;break;case'3':_0x58f2b4=_0x3e2bc7;break;}const _0x51cc67={'width':0xd2,'height':0x64},_0x112027={'width':_0x4f556f(_0x17a3c3[_0x2d22ad(0x1a0)]),'height':_0x4f556f(_0x17a3c3[_0x2d22ad(0x132)])};for(let _0x2264f9=0x1;_0x2264f9<=_0x3e6a34;_0x2264f9++){const _0x82cfe=new Canvas();JsBarcode(_0x82cfe,_0x58f2b4,{'format':_0x2d22ad(0x17b),'height':_0x51cc67[_0x2d22ad(0x132)],'displayValue':!![],'text':_0x58f2b4});const _0x2020ad=_0x82cfe['toBuffer'](),_0xac5f2a=_0x112027[_0x2d22ad(0x1a0)]/_0x51cc67[_0x2d22ad(0x1a0)],_0xfda0e4=_0x112027[_0x2d22ad(0x132)]/_0x51cc67[_0x2d22ad(0x132)],_0x50dfe1=Math['min'](_0xac5f2a,_0xfda0e4),_0x564f4e=_0x51cc67[_0x2d22ad(0x1a0)]*_0x50dfe1,_0x4b8702=_0x51cc67[_0x2d22ad(0x132)]*_0x50dfe1,_0x523637=(_0x112027[_0x2d22ad(0x1a0)]-_0x564f4e)/0x2,_0x58f6e6=(_0x112027[_0x2d22ad(0x132)]-_0x4b8702)/0x2;_0x4c3105[_0x2d22ad(0x11d)](_0x2020ad,_0x523637,_0x58f6e6,{'width':_0x564f4e,'height':_0x4b8702}),_0x2264f9!=_0x3e6a34&&_0x4c3105[_0x2d22ad(0x149)]();}const _0x4d0636=[];_0x4c3105['on']('data',_0x4d0636[_0x2d22ad(0x13b)][_0x2d22ad(0x1ac)](_0x4d0636)),_0x4c3105['on'](_0x2d22ad(0x16c),()=>{const _0x1b11df=_0x2d22ad,_0x5bbc0c=Buffer['concat'](_0x4d0636),_0x1f4eb=_0x5bbc0c[_0x1b11df(0x197)](_0x1b11df(0x15c));_0x1bcdeb[_0x1b11df(0x11a)]({'pdfContent':_0x1f4eb});}),_0x4c3105['end']();}catch(_0x348a18){_0x1bcdeb[_0x2d22ad(0x11a)]({'message':_0x348a18[_0x2d22ad(0xec)]});}}),module[a0_0x94e428(0x11f)]=router;