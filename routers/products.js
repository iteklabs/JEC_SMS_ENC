const a0_0x5acdc7=a0_0x2aab;(function(_0x551137,_0x4b72a9){const _0x91d34c=a0_0x2aab,_0x35b49e=_0x551137();while(!![]){try{const _0xa1699d=-parseInt(_0x91d34c(0x146))/0x1*(parseInt(_0x91d34c(0xd6))/0x2)+-parseInt(_0x91d34c(0x163))/0x3*(parseInt(_0x91d34c(0xfa))/0x4)+parseInt(_0x91d34c(0x117))/0x5*(-parseInt(_0x91d34c(0x148))/0x6)+-parseInt(_0x91d34c(0x129))/0x7+parseInt(_0x91d34c(0xd5))/0x8*(-parseInt(_0x91d34c(0x141))/0x9)+-parseInt(_0x91d34c(0xb5))/0xa*(parseInt(_0x91d34c(0xb3))/0xb)+-parseInt(_0x91d34c(0x143))/0xc*(-parseInt(_0x91d34c(0xb2))/0xd);if(_0xa1699d===_0x4b72a9)break;else _0x35b49e['push'](_0x35b49e['shift']());}catch(_0x3ddd11){_0x35b49e['push'](_0x35b49e['shift']());}}}(a0_0x1f78,0x9d1a9));function a0_0x1f78(){const _0xfdd06c=['/units/delete/:id','$product_stock','Secondary_Units','body','save','min','Portuguese','alertquantity','migrate_product_fule','success','Products','warehouse','bind','/barcode_filter','CODE128','2968PsBlbb','12IxzICk','German','sku','exceljs','type_products','aggregate','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','brand\x20data\x20update\x20successfully','$brand','json','pdfkit-table','/categories','\x20added\x20successfully','Prod_Cat','Maximum_Stocks','PUnits','../middleware/auth','master','get','Units','/brands/:id','public/upload','Products\x20warehouse_data','toString','single','language','product_details.product_name','maxStocks','$product_category','log','Spanish','render','max_number_per_units','/filter_product','/view/add_products','express/lib/response','2327804qNauKx','product\x20update\x20successfully','toBuffer','$product_docs','addWorksheet','status','findOne','express','/products/units','/products_export_migrate_file','email','multer','Product_Code','Workbook','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Arabic','/products_import_migrate_file','Products\x20master','/units','filename','/brands','sheet_to_json','sales_category','/print_barcode','$category','file','product_barcode_products','edit_product','category','5wujZaO','user','Chinese','Products\x20find_data','xlsx','secondary_unit','public/Migration/','Enabled','/brands/delete/:id','maxProdPerUnit','setHeader','errors','Arabic\x20(ae)','Raw\x20Materials','map','concat','flash','brand\x20data\x20delete\x20successfully','6651085fUEZMb','columns','prod_categ','ProductCode','categories','barcode\x20user_id','/barcode/:id','brands','/barcode_data','length','stock','brand','\x20<>\x20','secondary_code','height','params','PBrands','MaxperUnits','Primary_Code','$product_details.product_stock','product\x20add\x20successfully','Product_Name','end','PCat','18342GRTKMx','then','6436296ITjdnO','diskStorage','SheetNames','211841CzyQRV','findByIdAndUpdate','7429746ROJIZG','Finished\x20Goods','message','product_stock','/select_data','Secondary_Code','push','exports','base64','attachment;\x20filename=Product_Migration_File.xlsx','send','write','$product_details.product_name','readFile','Brands','\x20categories\x20is\x20add\x20successfully','find','products','defaultProduct.avif','product_code','canvas','numeric','Content-Type','unit\x20data\x20delete\x20successfully','/products/categories','Products_category','$product_details','6quRQDP','product\x20edit','$_id','English\x20(US)','unit\x20data\x20update\x20successfully','PSecondaryUnits','categories\x20data\x20delete\x20successfully','/products/view','name','/categories/:id','width','English','unit','Portuguese\x20(BR)','add_product','product_category','Sheets','findById','/print_barcode_single/:id','forEach','post','/print_barcode_filter/','findByIdAndDelete','French','public/Migration','originalname','169QyTqTK','696421lElmAN','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','150wrWvFI','_id','barcode\x20Product\x20master','categ','/products/brands','primary_code','units','categories_edit','addPage','/view/:id','image','now','/categories/delete/:id','Hindi','/units/:id','redirect','Category'];a0_0x1f78=function(){return _0xfdd06c;};return a0_0x1f78();}const express=require(a0_0x5acdc7(0x101)),res=require(a0_0x5acdc7(0xf9)),app=express(),router=express['Router'](),multer=require(a0_0x5acdc7(0x105)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x5acdc7(0xe6)),users=require('../public/language/languages.json'),excelJS=require(a0_0x5acdc7(0xd9)),xlsx=require(a0_0x5acdc7(0x11b)),JsBarcode=require('jsbarcode'),{Canvas}=require(a0_0x5acdc7(0x15c)),PDFDocument=require(a0_0x5acdc7(0xe0));router[a0_0x5acdc7(0xe8)](a0_0x5acdc7(0xe1),auth,async(_0x150a35,_0x275bde)=>{const _0x160c3d=a0_0x5acdc7;try{const {username:_0x62ad7d,email:_0xfc6d5f,role:_0x4b0ab7}=_0x150a35['user'],_0x1027ef=_0x150a35[_0x160c3d(0x118)],_0xa97852=await profile[_0x160c3d(0x100)]({'email':_0x1027ef[_0x160c3d(0x104)]}),_0x22472b=await master_shop[_0x160c3d(0x158)]();console[_0x160c3d(0xf3)](_0x160c3d(0xe7),_0x22472b);const _0x4e9edd=await categories['find']();if(_0x22472b[0x0][_0x160c3d(0xef)]==_0x160c3d(0x9b))var _0x37e09f=users['English'];else{if(_0x22472b[0x0]['language']==_0x160c3d(0xc2))var _0x37e09f=users[_0x160c3d(0xc2)];else{if(_0x22472b[0x0][_0x160c3d(0xef)]==_0x160c3d(0xd7))var _0x37e09f=users[_0x160c3d(0xd7)];else{if(_0x22472b[0x0][_0x160c3d(0xef)]=='Spanish')var _0x37e09f=users['Spanish'];else{if(_0x22472b[0x0][_0x160c3d(0xef)]==_0x160c3d(0xaf))var _0x37e09f=users[_0x160c3d(0xaf)];else{if(_0x22472b[0x0][_0x160c3d(0xef)]==_0x160c3d(0xa5))var _0x37e09f=users[_0x160c3d(0xcc)];else{if(_0x22472b[0x0][_0x160c3d(0xef)]==_0x160c3d(0x119))var _0x37e09f=users['Chinese'];else{if(_0x22472b[0x0][_0x160c3d(0xef)]==_0x160c3d(0x123))var _0x37e09f=users['Arabic'];}}}}}}}_0x275bde[_0x160c3d(0xf5)]('categories',{'success':_0x150a35['flash'](_0x160c3d(0xcf)),'errors':_0x150a35[_0x160c3d(0x127)](_0x160c3d(0x122)),'role':_0x1027ef,'profile':_0xa97852,'user':_0x4e9edd,'master_shop':_0x22472b,'language':_0x37e09f});}catch(_0x503e44){console[_0x160c3d(0xf3)](_0x503e44);}}),router['post'](a0_0x5acdc7(0xe1),auth,async(_0x17fc2d,_0x3b407a)=>{const _0x3d13da=a0_0x5acdc7;try{const {name:_0x5410db,products:_0x45dbf7}=_0x17fc2d[_0x3d13da(0xc9)],_0x3a1ec0=new categories({'name':_0x5410db,'products':_0x45dbf7}),_0x3018b4=await categories[_0x3d13da(0x100)]({'name':_0x5410db});_0x3018b4?_0x17fc2d['flash']('errors',_0x5410db+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x17fc2d['flash'](_0x3d13da(0xcf),_0x5410db+_0x3d13da(0x157));const _0x34cf1c=await _0x3a1ec0[_0x3d13da(0xca)]();_0x3b407a[_0x3d13da(0xc4)](_0x3d13da(0x160));}catch(_0x1a81bd){console[_0x3d13da(0xf3)](_0x1a81bd);}}),router['get'](a0_0x5acdc7(0xa1),auth,async(_0x4dd1a1,_0x562d95)=>{const _0x22ee94=a0_0x5acdc7;try{const {username:_0x1f0665,email:_0x3f515f,role:_0x2dbffd}=_0x4dd1a1[_0x22ee94(0x118)],_0x3a9a41=_0x4dd1a1[_0x22ee94(0x118)],_0x3bfebf=await profile[_0x22ee94(0x100)]({'email':_0x3a9a41[_0x22ee94(0x104)]}),_0x4a18a8=await master_shop['find']();console[_0x22ee94(0xf3)](_0x22ee94(0xe7),_0x4a18a8);const _0x4ac9c9=_0x4dd1a1[_0x22ee94(0x138)]['id'];console[_0x22ee94(0xf3)](_0x4ac9c9);const _0x1abe5b=await categories[_0x22ee94(0xa9)](_0x4ac9c9);if(_0x4a18a8[0x0]['language']==_0x22ee94(0x9b))var _0x4ce52b=users[_0x22ee94(0xa3)];else{if(_0x4a18a8[0x0]['language']==_0x22ee94(0xc2))var _0x4ce52b=users['Hindi'];else{if(_0x4a18a8[0x0]['language']=='German')var _0x4ce52b=users[_0x22ee94(0xd7)];else{if(_0x4a18a8[0x0][_0x22ee94(0xef)]==_0x22ee94(0xf4))var _0x4ce52b=users[_0x22ee94(0xf4)];else{if(_0x4a18a8[0x0][_0x22ee94(0xef)]==_0x22ee94(0xaf))var _0x4ce52b=users['French'];else{if(_0x4a18a8[0x0][_0x22ee94(0xef)]=='Portuguese\x20(BR)')var _0x4ce52b=users[_0x22ee94(0xcc)];else{if(_0x4a18a8[0x0]['language']==_0x22ee94(0x119))var _0x4ce52b=users['Chinese'];else{if(_0x4a18a8[0x0][_0x22ee94(0xef)]==_0x22ee94(0x123))var _0x4ce52b=users['Arabic'];}}}}}}}_0x562d95[_0x22ee94(0xf5)](_0x22ee94(0x12d),{'success':_0x4dd1a1[_0x22ee94(0x127)](_0x22ee94(0xcf)),'errors':_0x4dd1a1['flash'](_0x22ee94(0x122)),'role':_0x3a9a41,'profile':_0x3bfebf,'master_shop':_0x4a18a8,'user':_0x1abe5b,'language':_0x4ce52b});}catch(_0x3bf8a1){console['log'](_0x3bf8a1);}}),router[a0_0x5acdc7(0xac)](a0_0x5acdc7(0xa1),auth,async(_0xd7be8a,_0x2bf795)=>{const _0x1b184d=a0_0x5acdc7;try{const _0x29dd8f=_0xd7be8a['params']['id'],_0x1d55bd=await categories[_0x1b184d(0x147)](_0x29dd8f,_0xd7be8a[_0x1b184d(0xc9)]);_0xd7be8a[_0x1b184d(0x127)]('success',''+users[_0x1b184d(0xbc)]),_0x2bf795[_0x1b184d(0xc4)](_0x1b184d(0x160));}catch(_0x294a60){console[_0x1b184d(0xf3)](_0x294a60);}}),router[a0_0x5acdc7(0xe8)](a0_0x5acdc7(0xc1),auth,async(_0x4147e4,_0x206266)=>{const _0x5986b4=a0_0x5acdc7;try{const _0x335aca=_0x4147e4[_0x5986b4(0x138)]['id'],_0x462118=await categories[_0x5986b4(0xae)](_0x335aca);_0x4147e4[_0x5986b4(0x127)]('success',_0x5986b4(0x9e)),_0x206266['redirect']('/products/categories');}catch(_0x23524e){console[_0x5986b4(0xf3)](_0x23524e);}}),router[a0_0x5acdc7(0xe8)](a0_0x5acdc7(0x10e),auth,async(_0x3d7aac,_0x289102)=>{const _0x21db74=a0_0x5acdc7;try{const {username:_0x2052ad,email:_0x10259f,role:_0xb80be}=_0x3d7aac[_0x21db74(0x118)],_0x376b63=_0x3d7aac['user'],_0x1188d9=await profile['findOne']({'email':_0x376b63[_0x21db74(0x104)]}),_0xd977b7=await master_shop[_0x21db74(0x158)]();console['log']('master',_0xd977b7);const _0x13daba=await brands[_0x21db74(0x158)]();if(_0xd977b7[0x0][_0x21db74(0xef)]==_0x21db74(0x9b))var _0xfdbf2d=users['English'];else{if(_0xd977b7[0x0][_0x21db74(0xef)]==_0x21db74(0xc2))var _0xfdbf2d=users[_0x21db74(0xc2)];else{if(_0xd977b7[0x0]['language']==_0x21db74(0xd7))var _0xfdbf2d=users[_0x21db74(0xd7)];else{if(_0xd977b7[0x0]['language']==_0x21db74(0xf4))var _0xfdbf2d=users[_0x21db74(0xf4)];else{if(_0xd977b7[0x0][_0x21db74(0xef)]==_0x21db74(0xaf))var _0xfdbf2d=users[_0x21db74(0xaf)];else{if(_0xd977b7[0x0]['language']==_0x21db74(0xa5))var _0xfdbf2d=users[_0x21db74(0xcc)];else{if(_0xd977b7[0x0][_0x21db74(0xef)]==_0x21db74(0x119))var _0xfdbf2d=users[_0x21db74(0x119)];else{if(_0xd977b7[0x0]['language']==_0x21db74(0x123))var _0xfdbf2d=users['Arabic'];}}}}}}}_0x289102[_0x21db74(0xf5)](_0x21db74(0x130),{'success':_0x3d7aac[_0x21db74(0x127)](_0x21db74(0xcf)),'errors':_0x3d7aac[_0x21db74(0x127)]('errors'),'role':_0x376b63,'profile':_0x1188d9,'master_shop':_0xd977b7,'user':_0x13daba,'language':_0xfdbf2d});}catch(_0x26eb6f){console[_0x21db74(0xf3)](_0x26eb6f);}}),router[a0_0x5acdc7(0xac)](a0_0x5acdc7(0x10e),auth,async(_0x469049,_0x246d83)=>{const _0x2d5fae=a0_0x5acdc7;try{const {name:_0x168232,products:_0x59d7f5}=_0x469049[_0x2d5fae(0xc9)],_0x3d77ae=new brands({'name':_0x168232,'products':_0x59d7f5}),_0x4c6188=await brands['findOne']({'name':_0x168232});_0x4c6188?_0x469049['flash']('errors',_0x168232+_0x2d5fae(0xdc)):_0x469049[_0x2d5fae(0x127)](_0x2d5fae(0xcf),_0x168232+'\x20brand\x20is\x20add\x20successfully');const _0x308dbd=await _0x3d77ae[_0x2d5fae(0xca)]();_0x246d83[_0x2d5fae(0xc4)](_0x2d5fae(0xb9));}catch(_0x5a615d){console[_0x2d5fae(0xf3)](_0x5a615d);}}),router['get'](a0_0x5acdc7(0xea),auth,async(_0xb91353,_0x376eef)=>{const _0x7fac61=a0_0x5acdc7;try{const {username:_0x204773,email:_0x198392,role:_0x1ec50d}=_0xb91353[_0x7fac61(0x118)],_0x3b35cf=_0xb91353[_0x7fac61(0x118)],_0x18da4f=await profile[_0x7fac61(0x100)]({'email':_0x3b35cf['email']}),_0x1b411c=await master_shop[_0x7fac61(0x158)]();console['log'](_0x7fac61(0xe7),_0x1b411c);const _0x3f1468=_0xb91353['params']['id'];console['log'](_0x3f1468);const _0x1817bf=await brands[_0x7fac61(0xa9)](_0x3f1468);if(_0x1b411c[0x0][_0x7fac61(0xef)]=='English\x20(US)')var _0x1bf9ad=users[_0x7fac61(0xa3)];else{if(_0x1b411c[0x0][_0x7fac61(0xef)]==_0x7fac61(0xc2))var _0x1bf9ad=users[_0x7fac61(0xc2)];else{if(_0x1b411c[0x0][_0x7fac61(0xef)]==_0x7fac61(0xd7))var _0x1bf9ad=users[_0x7fac61(0xd7)];else{if(_0x1b411c[0x0][_0x7fac61(0xef)]==_0x7fac61(0xf4))var _0x1bf9ad=users[_0x7fac61(0xf4)];else{if(_0x1b411c[0x0]['language']==_0x7fac61(0xaf))var _0x1bf9ad=users[_0x7fac61(0xaf)];else{if(_0x1b411c[0x0][_0x7fac61(0xef)]=='Portuguese\x20(BR)')var _0x1bf9ad=users['Portuguese'];else{if(_0x1b411c[0x0][_0x7fac61(0xef)]==_0x7fac61(0x119))var _0x1bf9ad=users[_0x7fac61(0x119)];else{if(_0x1b411c[0x0][_0x7fac61(0xef)]==_0x7fac61(0x123))var _0x1bf9ad=users[_0x7fac61(0x109)];}}}}}}}_0x376eef[_0x7fac61(0xf5)](_0x7fac61(0x130),{'success':_0xb91353[_0x7fac61(0x127)](_0x7fac61(0xcf)),'errors':_0xb91353[_0x7fac61(0x127)](_0x7fac61(0x122)),'role':_0x3b35cf,'profile':_0x18da4f,'master_shop':_0x1b411c,'user':_0x1817bf,'language':_0x1bf9ad});}catch(_0x27f89f){console[_0x7fac61(0xf3)](_0x27f89f);}}),router[a0_0x5acdc7(0xac)](a0_0x5acdc7(0xea),auth,async(_0x2bf375,_0x439600)=>{const _0x3321da=a0_0x5acdc7;try{const _0x21cef2=_0x2bf375['params']['id'],_0x2042fe=await brands['findByIdAndUpdate'](_0x21cef2,_0x2bf375[_0x3321da(0xc9)]);_0x2bf375[_0x3321da(0x127)](_0x3321da(0xcf),_0x3321da(0xdd)),_0x439600[_0x3321da(0xc4)]('/products/brands');}catch(_0x190830){console[_0x3321da(0xf3)](_0x190830);}}),router[a0_0x5acdc7(0xe8)](a0_0x5acdc7(0x11f),auth,async(_0x1d0452,_0x2b8998)=>{const _0x3c5115=a0_0x5acdc7;try{const _0x76f5d3=_0x1d0452[_0x3c5115(0x138)]['id'],_0x3a5017=await brands[_0x3c5115(0xae)](_0x76f5d3);_0x1d0452[_0x3c5115(0x127)](_0x3c5115(0xcf),_0x3c5115(0x128)),_0x2b8998['redirect']('/products/brands');}catch(_0x4b2acb){console[_0x3c5115(0xf3)](_0x4b2acb);}}),router[a0_0x5acdc7(0xe8)]('/units',auth,async(_0x35663a,_0x75f3f6)=>{const _0xa19956=a0_0x5acdc7;try{const {username:_0x59867c,email:_0xa2d601,role:_0x51a193}=_0x35663a[_0xa19956(0x118)],_0x421818=_0x35663a[_0xa19956(0x118)],_0x28782d=await profile[_0xa19956(0x100)]({'email':_0x421818['email']}),_0x4a8cb9=await master_shop[_0xa19956(0x158)]();console[_0xa19956(0xf3)](_0xa19956(0xe7),_0x4a8cb9);const _0x132050=await units['find']();if(_0x4a8cb9[0x0][_0xa19956(0xef)]==_0xa19956(0x9b))var _0x5cc598=users[_0xa19956(0xa3)];else{if(_0x4a8cb9[0x0][_0xa19956(0xef)]==_0xa19956(0xc2))var _0x5cc598=users[_0xa19956(0xc2)];else{if(_0x4a8cb9[0x0]['language']==_0xa19956(0xd7))var _0x5cc598=users[_0xa19956(0xd7)];else{if(_0x4a8cb9[0x0]['language']==_0xa19956(0xf4))var _0x5cc598=users[_0xa19956(0xf4)];else{if(_0x4a8cb9[0x0][_0xa19956(0xef)]==_0xa19956(0xaf))var _0x5cc598=users[_0xa19956(0xaf)];else{if(_0x4a8cb9[0x0][_0xa19956(0xef)]==_0xa19956(0xa5))var _0x5cc598=users[_0xa19956(0xcc)];else{if(_0x4a8cb9[0x0][_0xa19956(0xef)]==_0xa19956(0x119))var _0x5cc598=users['Chinese'];else{if(_0x4a8cb9[0x0][_0xa19956(0xef)]=='Arabic\x20(ae)')var _0x5cc598=users['Arabic'];}}}}}}}_0x75f3f6['render'](_0xa19956(0xbb),{'success':_0x35663a[_0xa19956(0x127)]('success'),'errors':_0x35663a[_0xa19956(0x127)]('errors'),'role':_0x421818,'profile':_0x28782d,'master_shop':_0x4a8cb9,'user':_0x132050,'language':_0x5cc598});}catch(_0x29162e){console[_0xa19956(0xf3)](_0x29162e);}}),router['post'](a0_0x5acdc7(0x10c),auth,async(_0xead802,_0x3afdd0)=>{const _0x2f7be5=a0_0x5acdc7;try{const {name:_0x2a2dd2,secondary_unit:_0xdf9c29,products:_0x3cd1a7}=_0xead802[_0x2f7be5(0xc9)],_0x57ac4c=new units({'name':_0x2a2dd2,'secondary_unit':_0xdf9c29,'products':_0x3cd1a7}),_0x72e67b=await units['findOne']({'name':_0x2a2dd2});_0x72e67b?_0xead802[_0x2f7be5(0x127)](_0x2f7be5(0x122),_0x2a2dd2+_0x2f7be5(0x108)):_0xead802[_0x2f7be5(0x127)]('success',_0x2a2dd2+'\x20unit\x20is\x20add\x20successfully');const _0x35d4d6=await _0x57ac4c['save']();_0x3afdd0[_0x2f7be5(0xc4)](_0x2f7be5(0x102));}catch(_0x2f2a3e){console[_0x2f7be5(0xf3)](_0x2f2a3e);}}),router[a0_0x5acdc7(0xe8)](a0_0x5acdc7(0xc3),auth,async(_0x193ab8,_0x4d3452)=>{const _0x3cd5b9=a0_0x5acdc7;try{const {username:_0x4960ea,email:_0x6ae166,role:_0xf04b2f}=_0x193ab8['user'],_0x261a4e=_0x193ab8[_0x3cd5b9(0x118)],_0x4cf1b3=await profile[_0x3cd5b9(0x100)]({'email':_0x261a4e[_0x3cd5b9(0x104)]}),_0x12f6d6=await master_shop[_0x3cd5b9(0x158)]();console[_0x3cd5b9(0xf3)](_0x3cd5b9(0xe7),_0x12f6d6);const _0x4e3d6e=_0x193ab8[_0x3cd5b9(0x138)]['id'],_0x229d1b=await units['findById'](_0x4e3d6e);if(_0x12f6d6[0x0][_0x3cd5b9(0xef)]==_0x3cd5b9(0x9b))var _0x4072b1=users[_0x3cd5b9(0xa3)];else{if(_0x12f6d6[0x0][_0x3cd5b9(0xef)]==_0x3cd5b9(0xc2))var _0x4072b1=users['Hindi'];else{if(_0x12f6d6[0x0][_0x3cd5b9(0xef)]==_0x3cd5b9(0xd7))var _0x4072b1=users[_0x3cd5b9(0xd7)];else{if(_0x12f6d6[0x0][_0x3cd5b9(0xef)]==_0x3cd5b9(0xf4))var _0x4072b1=users['Spanish'];else{if(_0x12f6d6[0x0][_0x3cd5b9(0xef)]==_0x3cd5b9(0xaf))var _0x4072b1=users['French'];else{if(_0x12f6d6[0x0][_0x3cd5b9(0xef)]==_0x3cd5b9(0xa5))var _0x4072b1=users[_0x3cd5b9(0xcc)];else{if(_0x12f6d6[0x0][_0x3cd5b9(0xef)]=='Chinese')var _0x4072b1=users[_0x3cd5b9(0x119)];else{if(_0x12f6d6[0x0][_0x3cd5b9(0xef)]==_0x3cd5b9(0x123))var _0x4072b1=users[_0x3cd5b9(0x109)];}}}}}}}_0x4d3452[_0x3cd5b9(0xf5)]('units',{'success':_0x193ab8[_0x3cd5b9(0x127)](_0x3cd5b9(0xcf)),'errors':_0x193ab8[_0x3cd5b9(0x127)](_0x3cd5b9(0x122)),'role':_0x261a4e,'profile':_0x4cf1b3,'master_shop':_0x12f6d6,'user':_0x229d1b,'language':_0x4072b1});}catch(_0x23ebf8){console[_0x3cd5b9(0xf3)](_0x23ebf8);}}),router['post'](a0_0x5acdc7(0xc3),auth,async(_0x3a560a,_0x48403a)=>{const _0x4666d0=a0_0x5acdc7;try{const _0x188a90=_0x3a560a[_0x4666d0(0x138)]['id'],_0x4621e5=await units[_0x4666d0(0x147)](_0x188a90,_0x3a560a[_0x4666d0(0xc9)]);_0x3a560a[_0x4666d0(0x127)](_0x4666d0(0xcf),_0x4666d0(0x9c)),_0x48403a[_0x4666d0(0xc4)](_0x4666d0(0x102));}catch(_0x19fd67){console[_0x4666d0(0xf3)](_0x19fd67);}}),router[a0_0x5acdc7(0xe8)](a0_0x5acdc7(0xc6),auth,async(_0x2cea0a,_0x56e804)=>{const _0x3b8687=a0_0x5acdc7;try{const _0x501fde=_0x2cea0a[_0x3b8687(0x138)]['id'],_0x67d2b8=await units[_0x3b8687(0xae)](_0x501fde);_0x2cea0a['flash'](_0x3b8687(0xcf),_0x3b8687(0x15f)),_0x56e804[_0x3b8687(0xc4)](_0x3b8687(0x102));}catch(_0x327e9e){console[_0x3b8687(0xf3)](_0x327e9e);}});const storage=multer[a0_0x5acdc7(0x144)]({'destination':(_0x461d06,_0x5debc4,_0x2e5820)=>{const _0x2faf0a=a0_0x5acdc7;_0x2e5820(null,_0x2faf0a(0xeb));},'filename':(_0x5db33c,_0x5cd5e8,_0x1d9671)=>{const _0x260a52=a0_0x5acdc7;_0x1d9671(null,Date[_0x260a52(0xc0)]()+_0x5cd5e8[_0x260a52(0xb1)]);}}),upload=multer({'storage':storage});router['get']('/view',auth,async(_0xeb1672,_0x2482f3)=>{const _0x121234=a0_0x5acdc7;try{const {username:_0xacb774,email:_0x2c4db6,role:_0x39ae85}=_0xeb1672[_0x121234(0x118)],_0x48c748=_0xeb1672[_0x121234(0x118)],_0x14cc69=await profile[_0x121234(0x100)]({'email':_0x48c748[_0x121234(0x104)]}),_0x21f7ba={'year':_0x121234(0x15d),'month':'long','day':_0x121234(0x15d)},_0x5e9935=await master_shop['find']();console['log'](_0x121234(0x10b),_0x5e9935);const _0x51c812=await product[_0x121234(0x158)]();console['log']('Products\x20find_data',_0x51c812);const _0x54ab0f=await warehouse[_0x121234(0xdb)]([{'$unwind':_0x121234(0x162)},{'$lookup':{'from':_0x121234(0x159),'localField':_0x121234(0xf0),'foreignField':_0x121234(0xa0),'as':'product_docs'}},{'$unwind':_0x121234(0xfd)},{'$project':{'product_name':_0x121234(0x154),'product_stock':_0x121234(0x13c)}},{'$group':{'_id':'$product_name','product_stock':{'$sum':_0x121234(0xc7)}}}]);console['log'](_0x121234(0xec),_0x54ab0f),_0x54ab0f[_0x121234(0xab)](_0x59d137=>{const _0xde2636=_0x121234,_0x14ef10=_0x51c812[_0xde2636(0x125)](_0x1c6109=>{const _0x333697=_0xde2636;_0x1c6109[_0x333697(0xa0)]==_0x59d137[_0x333697(0xb6)]&&(_0x1c6109[_0x333697(0x133)]=parseInt(_0x1c6109[_0x333697(0x133)])+parseInt(_0x59d137[_0x333697(0x14b)]));});}),console[_0x121234(0xf3)](_0x121234(0x11a),_0x51c812);if(_0x5e9935[0x0]['language']==_0x121234(0x9b))var _0x50d119=users['English'];else{if(_0x5e9935[0x0][_0x121234(0xef)]==_0x121234(0xc2))var _0x50d119=users[_0x121234(0xc2)];else{if(_0x5e9935[0x0][_0x121234(0xef)]==_0x121234(0xd7))var _0x50d119=users[_0x121234(0xd7)];else{if(_0x5e9935[0x0][_0x121234(0xef)]==_0x121234(0xf4))var _0x50d119=users[_0x121234(0xf4)];else{if(_0x5e9935[0x0][_0x121234(0xef)]==_0x121234(0xaf))var _0x50d119=users['French'];else{if(_0x5e9935[0x0][_0x121234(0xef)]==_0x121234(0xa5))var _0x50d119=users[_0x121234(0xcc)];else{if(_0x5e9935[0x0][_0x121234(0xef)]==_0x121234(0x119))var _0x50d119=users[_0x121234(0x119)];else{if(_0x5e9935[0x0][_0x121234(0xef)]==_0x121234(0x123))var _0x50d119=users[_0x121234(0x109)];}}}}}}}_0x2482f3[_0x121234(0xf5)](_0x121234(0x159),{'success':_0xeb1672['flash']('success'),'errors':_0xeb1672[_0x121234(0x127)](_0x121234(0x122)),'alldata':_0x51c812,'profile':_0x14cc69,'master_shop':_0x5e9935,'role':_0x48c748,'product_stock':_0x54ab0f,'language':_0x50d119});}catch(_0x51fb2c){console['log'](_0x51fb2c);}}),router[a0_0x5acdc7(0xe8)](a0_0x5acdc7(0xf8),auth,async(_0x1c1e1e,_0x51b291)=>{const _0x54a326=a0_0x5acdc7;try{const {username:_0x31e793,email:_0x379899,role:_0x78afdf}=_0x1c1e1e[_0x54a326(0x118)],_0x2306c3=_0x1c1e1e[_0x54a326(0x118)],_0x2e5d1a=await profile[_0x54a326(0x100)]({'email':_0x2306c3[_0x54a326(0x104)]}),_0x4376bc=await master_shop[_0x54a326(0x158)]();console['log'](_0x54a326(0xe7),_0x4376bc);const _0x3616b5=await categories['find']({}),_0x3d1166=await brands[_0x54a326(0x158)]({}),_0xc8c6d6=await units[_0x54a326(0x158)]({}),_0x1fc8f1=await warehouse[_0x54a326(0x158)]({'status':_0x54a326(0x11e)});if(_0x4376bc[0x0][_0x54a326(0xef)]==_0x54a326(0x9b))var _0x59e5cb=users[_0x54a326(0xa3)];else{if(_0x4376bc[0x0]['language']==_0x54a326(0xc2))var _0x59e5cb=users[_0x54a326(0xc2)];else{if(_0x4376bc[0x0][_0x54a326(0xef)]==_0x54a326(0xd7))var _0x59e5cb=users['German'];else{if(_0x4376bc[0x0]['language']=='Spanish')var _0x59e5cb=users[_0x54a326(0xf4)];else{if(_0x4376bc[0x0][_0x54a326(0xef)]==_0x54a326(0xaf))var _0x59e5cb=users['French'];else{if(_0x4376bc[0x0][_0x54a326(0xef)]=='Portuguese\x20(BR)')var _0x59e5cb=users[_0x54a326(0xcc)];else{if(_0x4376bc[0x0][_0x54a326(0xef)]==_0x54a326(0x119))var _0x59e5cb=users['Chinese'];else{if(_0x4376bc[0x0]['language']==_0x54a326(0x123))var _0x59e5cb=users['Arabic'];}}}}}}}_0x51b291[_0x54a326(0xf5)](_0x54a326(0xa6),{'success':_0x1c1e1e[_0x54a326(0x127)]('success'),'errors':_0x1c1e1e[_0x54a326(0x127)]('errors'),'role':_0x2306c3,'profile':_0x2e5d1a,'categories':_0x3616b5,'brands':_0x3d1166,'master_shop':_0x4376bc,'units':_0xc8c6d6,'language':_0x59e5cb,'find_data':_0x1fc8f1});}catch(_0x49e47b){console[_0x54a326(0xf3)](_0x49e47b);}}),router[a0_0x5acdc7(0xac)](a0_0x5acdc7(0xf8),auth,upload['single'](a0_0x5acdc7(0xbf)),async(_0x5e0355,_0x3f6f73)=>{const _0x17c8a3=a0_0x5acdc7;try{const {name:_0x2f233e,category:_0xd22e53,brand:_0x258403,unit:_0x526f00,alertquantity:_0x1bdf7a,stock:_0x5da174,product_code:_0x4a4446,warehouse:_0xb5ad14,primary_ItemCode:_0x383bea,second_ItemCode:_0x2cded5,second_unit:_0x413c0f,maxPerUnit:_0x3682dd,MaxPerProduct:_0x3a20ce,sales_cat:_0x101e15,type_prod:_0x2d47e7}=_0x5e0355[_0x17c8a3(0xc9)],_0xe1cc92=_0x5e0355[_0x17c8a3(0x113)]?.[_0x17c8a3(0x10d)]||_0x17c8a3(0x15a),_0x1a44dc=new product({'image':_0xe1cc92,'name':_0x2f233e,'category':_0xd22e53,'brand':_0x258403,'unit':_0x526f00,'alertquantity':_0x1bdf7a,'stock':_0x5da174,'product_code':_0x4a4446,'warehouse':_0xb5ad14,'primary_code':_0x383bea,'secondary_code':_0x2cded5,'second_unit':_0x413c0f,'maxStocks':_0x3a20ce,'maxProdPerUnit':_0x3682dd,'sales_category':_0x101e15,'type_products':_0x2d47e7}),_0x14e774=await _0x1a44dc[_0x17c8a3(0xca)](),_0x1ac9c8=await categories[_0x17c8a3(0x100)]({'name':_0xd22e53});_0x1ac9c8['products']=parseInt(_0x1ac9c8[_0x17c8a3(0x159)])+0x1,await _0x1ac9c8[_0x17c8a3(0xca)]();const _0x51a26e=await brands[_0x17c8a3(0x100)]({'name':_0x258403});_0x51a26e['products']=parseInt(_0x51a26e[_0x17c8a3(0x159)])+0x1,await _0x51a26e[_0x17c8a3(0xca)]();const _0x523036=await units[_0x17c8a3(0x100)]({'name':_0x526f00});_0x523036[_0x17c8a3(0x159)]=parseInt(_0x523036[_0x17c8a3(0x159)])+0x1,await _0x523036[_0x17c8a3(0xca)](),_0x5e0355[_0x17c8a3(0x127)]('success',_0x17c8a3(0x13d)),_0x3f6f73[_0x17c8a3(0xc4)](_0x17c8a3(0x9f));}catch(_0x4e83a0){console[_0x17c8a3(0xf3)](_0x4e83a0);}}),router['get'](a0_0x5acdc7(0xbe),auth,async(_0x4071a0,_0x16c1aa)=>{const _0x1dc0ab=a0_0x5acdc7;try{const {username:_0xc86db,email:_0x560f49,role:_0x4e9627}=_0x4071a0['user'],_0x2e7381=_0x4071a0[_0x1dc0ab(0x118)],_0x2ed412=await profile[_0x1dc0ab(0x100)]({'email':_0x2e7381[_0x1dc0ab(0x104)]}),_0x4a0fe0=await master_shop['find']();console['log']('edit\x20Product\x20master',_0x4a0fe0);const _0x215556=_0x4071a0[_0x1dc0ab(0x138)]['id'],_0x27dac5=await product[_0x1dc0ab(0xa9)](_0x215556),_0xce0767=await categories[_0x1dc0ab(0x158)]({}),_0xcb8bb8=await brands[_0x1dc0ab(0x158)]({}),_0x7cfba=await units[_0x1dc0ab(0x158)]({}),_0x418411=await warehouse[_0x1dc0ab(0x158)]({'status':_0x1dc0ab(0x11e)}),_0x2ba459=await units[_0x1dc0ab(0xdb)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':'$secondary_unit'}}}]);if(_0x4a0fe0[0x0][_0x1dc0ab(0xef)]==_0x1dc0ab(0x9b))var _0x31591a=users[_0x1dc0ab(0xa3)];else{if(_0x4a0fe0[0x0][_0x1dc0ab(0xef)]=='Hindi')var _0x31591a=users['Hindi'];else{if(_0x4a0fe0[0x0]['language']==_0x1dc0ab(0xd7))var _0x31591a=users['German'];else{if(_0x4a0fe0[0x0][_0x1dc0ab(0xef)]==_0x1dc0ab(0xf4))var _0x31591a=users[_0x1dc0ab(0xf4)];else{if(_0x4a0fe0[0x0]['language']==_0x1dc0ab(0xaf))var _0x31591a=users[_0x1dc0ab(0xaf)];else{if(_0x4a0fe0[0x0]['language']==_0x1dc0ab(0xa5))var _0x31591a=users[_0x1dc0ab(0xcc)];else{if(_0x4a0fe0[0x0][_0x1dc0ab(0xef)]==_0x1dc0ab(0x119))var _0x31591a=users[_0x1dc0ab(0x119)];else{if(_0x4a0fe0[0x0]['language']==_0x1dc0ab(0x123))var _0x31591a=users[_0x1dc0ab(0x109)];}}}}}}}_0x16c1aa[_0x1dc0ab(0xf5)](_0x1dc0ab(0x115),{'success':_0x4071a0['flash'](_0x1dc0ab(0xcf)),'errors':_0x4071a0[_0x1dc0ab(0x127)](_0x1dc0ab(0x122)),'role':_0x2e7381,'profile':_0x2ed412,'alldata':_0x27dac5,'categories':_0xce0767,'brands':_0xcb8bb8,'master_shop':_0x4a0fe0,'units':_0x7cfba,'secondunit':_0x2ba459,'find_data':_0x418411,'language':_0x31591a});}catch(_0x35988d){console[_0x1dc0ab(0xf3)](_0x35988d);}}),router['post']('/view/:id',auth,upload[a0_0x5acdc7(0xee)](a0_0x5acdc7(0xbf)),async(_0x1dfe53,_0x428dcd)=>{const _0x32ca85=a0_0x5acdc7;try{const _0x48295f=_0x1dfe53[_0x32ca85(0x138)]['id'],_0x34c4b7=await product[_0x32ca85(0xa9)](_0x48295f),{image:_0x41ecde,name:_0x4f8992,category:_0x4692cb,brand:_0x5ba667,sku:_0x45d414,unit:_0x41c66b,alertquantity:_0x31deb2,product_code:_0x5a3ade,warehouse:_0x4aacc3,primary_ItemCode:_0x35d3df,second_ItemCode:_0x346dd7,second_unit:_0x5887b1,maxPerUnit:_0x553758,MaxPerProduct:_0x1cb0e0,prod_catdata:_0xe66014,type_prod:_0x4f25bf,sales_cat:_0x595775}=_0x1dfe53[_0x32ca85(0xc9)];_0x1dfe53['file']&&(_0x34c4b7[_0x32ca85(0xbf)]=_0x1dfe53[_0x32ca85(0x113)][_0x32ca85(0x10d)]);_0x34c4b7[_0x32ca85(0xa0)]=_0x4f8992,_0x34c4b7[_0x32ca85(0x116)]=_0x4692cb,_0x34c4b7[_0x32ca85(0x134)]=_0x5ba667,_0x34c4b7[_0x32ca85(0xd8)]=_0x45d414,_0x34c4b7[_0x32ca85(0xa4)]=_0x41c66b,_0x34c4b7['alertquantity']=_0x31deb2,_0x34c4b7[_0x32ca85(0x15b)]=_0x5a3ade,_0x34c4b7[_0x32ca85(0xd1)]=_0x4aacc3,_0x34c4b7[_0x32ca85(0xba)]=_0x35d3df,_0x34c4b7['secondary_code']=_0x346dd7,_0x34c4b7[_0x32ca85(0x11c)]=_0x5887b1,_0x34c4b7[_0x32ca85(0xf1)]=_0x1cb0e0,_0x34c4b7[_0x32ca85(0x120)]=_0x553758,_0x34c4b7[_0x32ca85(0xa7)]=_0xe66014,_0x34c4b7[_0x32ca85(0xda)]=_0x4f25bf,_0x34c4b7[_0x32ca85(0x110)]=_0x595775;const _0x4e5793=await _0x34c4b7[_0x32ca85(0xca)]();console[_0x32ca85(0xf3)](_0x32ca85(0x164),_0x34c4b7),_0x1dfe53[_0x32ca85(0x127)]('success',_0x32ca85(0xfb)),_0x428dcd[_0x32ca85(0xc4)](_0x32ca85(0x9f));}catch(_0x5070fe){console[_0x32ca85(0xf3)](_0x5070fe);}}),router[a0_0x5acdc7(0xe8)](a0_0x5acdc7(0x12f),auth,async(_0x3f4a35,_0x23c746)=>{const _0x3ec1f3=a0_0x5acdc7;try{const {username:_0x2b3806,email:_0x3e6763,role:_0x26d834}=_0x3f4a35[_0x3ec1f3(0x118)],_0x3f60cd=_0x3f4a35[_0x3ec1f3(0x118)],_0x3de1ce=await profile['findOne']({'email':_0x3f60cd[_0x3ec1f3(0x104)]}),_0x5e7a82=await master_shop[_0x3ec1f3(0x158)]();console[_0x3ec1f3(0xf3)](_0x3ec1f3(0xb7),_0x5e7a82);const _0x515b1f=_0x3f4a35[_0x3ec1f3(0x138)]['id'],_0x163c3f=await product[_0x3ec1f3(0xa9)](_0x515b1f);console['log'](_0x3ec1f3(0x12e),_0x163c3f);if(_0x5e7a82[0x0][_0x3ec1f3(0xef)]==_0x3ec1f3(0x9b))var _0x3f2e61=users['English'];else{if(_0x5e7a82[0x0][_0x3ec1f3(0xef)]==_0x3ec1f3(0xc2))var _0x3f2e61=users[_0x3ec1f3(0xc2)];else{if(_0x5e7a82[0x0][_0x3ec1f3(0xef)]=='German')var _0x3f2e61=users['German'];else{if(_0x5e7a82[0x0][_0x3ec1f3(0xef)]==_0x3ec1f3(0xf4))var _0x3f2e61=users[_0x3ec1f3(0xf4)];else{if(_0x5e7a82[0x0][_0x3ec1f3(0xef)]==_0x3ec1f3(0xaf))var _0x3f2e61=users['French'];else{if(_0x5e7a82[0x0]['language']=='Portuguese\x20(BR)')var _0x3f2e61=users[_0x3ec1f3(0xcc)];else{if(_0x5e7a82[0x0][_0x3ec1f3(0xef)]==_0x3ec1f3(0x119))var _0x3f2e61=users['Chinese'];else{if(_0x5e7a82[0x0][_0x3ec1f3(0xef)]=='Arabic\x20(ae)')var _0x3f2e61=users[_0x3ec1f3(0x109)];}}}}}}}_0x23c746['render']('product_barcode',{'success':_0x3f4a35[_0x3ec1f3(0x127)](_0x3ec1f3(0xcf)),'errors':_0x3f4a35[_0x3ec1f3(0x127)]('errors'),'role':_0x3f60cd,'profile':_0x3de1ce,'alldata':_0x163c3f,'master_shop':_0x5e7a82,'language':_0x3f2e61});}catch(_0x1c26d4){console[_0x3ec1f3(0xf3)](_0x1c26d4);}}),router[a0_0x5acdc7(0xe8)](a0_0x5acdc7(0x103),auth,async(_0x1dd3da,_0x379afd)=>{const _0x2aaaea=a0_0x5acdc7;try{const _0x531c8c=new excelJS[(_0x2aaaea(0x107))](),_0x15a569=_0x531c8c[_0x2aaaea(0xfe)](_0x2aaaea(0xd0));return _0x15a569[_0x2aaaea(0x12a)]=[{'header':_0x2aaaea(0x13e),'key':'PName','width':0xa},{'header':_0x2aaaea(0x156),'key':_0x2aaaea(0x139),'width':0xa},{'header':'Units','key':_0x2aaaea(0xe5),'width':0xa},{'header':_0x2aaaea(0xc8),'key':_0x2aaaea(0x9d),'width':0xa},{'header':_0x2aaaea(0xf6),'key':_0x2aaaea(0x13a),'width':0xa},{'header':_0x2aaaea(0x13b),'key':'ProductCode','width':0xa},{'header':_0x2aaaea(0x14d),'key':_0x2aaaea(0x12c),'width':0xa},{'header':_0x2aaaea(0x106),'key':'ProductCode','width':0xa},{'header':_0x2aaaea(0xc5),'key':_0x2aaaea(0x140),'width':0xa},{'header':'Alert_QTY','key':'PAlQty','width':0xa},{'header':_0x2aaaea(0xe4),'key':'PAlQty','width':0xa},{'header':_0x2aaaea(0x161),'key':_0x2aaaea(0xe3),'width':0xa}],_0x379afd[_0x2aaaea(0x121)](_0x2aaaea(0x15e),_0x2aaaea(0xb4)),_0x379afd[_0x2aaaea(0x121)]('Content-Disposition',_0x2aaaea(0x151)),_0x531c8c['xlsx'][_0x2aaaea(0x153)](_0x379afd)[_0x2aaaea(0x142)](()=>{_0x379afd['status'](0xc8);});}catch(_0x21576b){_0x379afd[_0x2aaaea(0xff)](0x190)[_0x2aaaea(0x152)](_0x21576b);}});function a0_0x2aab(_0x53198f,_0x47969c){const _0x1f7822=a0_0x1f78();return a0_0x2aab=function(_0x2aab44,_0x410df5){_0x2aab44=_0x2aab44-0x9b;let _0x1247e9=_0x1f7822[_0x2aab44];return _0x1247e9;},a0_0x2aab(_0x53198f,_0x47969c);}const storage1=multer[a0_0x5acdc7(0x144)]({'destination':(_0x2f1fb2,_0x43bf4c,_0x34cdc5)=>{const _0x1ec782=a0_0x5acdc7;_0x34cdc5(null,_0x1ec782(0xb0));},'filename':(_0x2d1828,_0x68bada,_0x1ea793)=>{const _0x4fed77=a0_0x5acdc7;_0x1ea793(null,Date[_0x4fed77(0xc0)]()+_0x68bada[_0x4fed77(0xb1)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x5acdc7(0xac)](a0_0x5acdc7(0x10a),auth,uploadMigrate[a0_0x5acdc7(0xee)](a0_0x5acdc7(0xce)),async(_0x75576a,_0x497a30)=>{const _0xa5df62=a0_0x5acdc7,_0x110205=_0x75576a[_0xa5df62(0x113)][_0xa5df62(0x10d)],_0x1dfe3e=await xlsx[_0xa5df62(0x155)](_0xa5df62(0x11d)+_0x110205);let _0x36b2e3=_0x1dfe3e[_0xa5df62(0x145)],_0x5df0bd=xlsx['utils'][_0xa5df62(0x10f)](_0x1dfe3e[_0xa5df62(0xa8)][_0x36b2e3[0x0]]);for(const _0x937e9 of _0x5df0bd){const _0xf00a9c=_0x937e9['Product_Name'],_0x184be9=_0x937e9[_0xa5df62(0x156)],_0x214150=_0x937e9[_0xa5df62(0xe9)],_0x45ee2f=_0x937e9[_0xa5df62(0xc8)],_0x1eb11a=_0x937e9[_0xa5df62(0x106)],_0x1191f8=_0x937e9['Category'],_0x193a79=_0x937e9['Alert_QTY'],_0x1043a8=_0x937e9['Primary_Code'],_0x148763=_0x937e9[_0xa5df62(0x14d)],_0x3d9b90=_0x937e9['Maximum_Stocks'],_0x3effb1=_0x937e9[_0xa5df62(0xf6)],_0x17c3b1=_0x937e9[_0xa5df62(0x161)];try{let _0x5cabd3=await categories['findOne']({'name':_0x1191f8});if(!_0x5cabd3){const _0x126307=new categories({'name':_0x1191f8,'products':'0'});_0x5cabd3=await _0x126307['save']();}let _0x4e6968=await brands['findOne']({'name':_0x184be9});if(!_0x4e6968){const _0x11d077=new brands({'name':_0x184be9,'products':'0'});_0x4e6968=await _0x11d077[_0xa5df62(0xca)]();}let _0x1a59fb=await units['findOne']({'name':_0x214150,'secondary_unit':_0x45ee2f});if(!_0x1a59fb){const _0x4af843=new units({'name':_0x214150,'secondary_unit':_0x45ee2f,'products':'0'});_0x1a59fb=await _0x4af843['save']();}const _0x4dd03e=await product[_0xa5df62(0x158)]({'name':_0xf00a9c,'category':_0x5cabd3[_0xa5df62(0xa0)],'brand':_0x4e6968[_0xa5df62(0xa0)],'secondary_unit':_0x1a59fb['secondary_unit'],'product_code':_0x1eb11a});console[_0xa5df62(0xf3)](_0x4dd03e[_0xa5df62(0x132)]+_0xa5df62(0x135)+_0x5cabd3[_0xa5df62(0xa0)]+_0xa5df62(0x135)+_0x4e6968[_0xa5df62(0xa0)]+'\x20<>\x20'+_0x1a59fb[_0xa5df62(0x11c)]+_0xa5df62(0x135)+_0x1eb11a+'\x20<>\x20'+_0xf00a9c);if(_0x4dd03e[_0xa5df62(0x132)]===0x0){const _0x138309=new product({'image':_0xa5df62(0x15a),'name':_0xf00a9c,'category':_0x5cabd3['name'],'brand':_0x4e6968['name'],'unit':_0x1a59fb[_0xa5df62(0xa0)],'alertquantity':_0x193a79,'product_code':_0x1eb11a,'secondary_unit':_0x1a59fb[_0xa5df62(0x11c)],'primary_code':_0x1043a8,'secondary_code':_0x148763,'maxStocks':_0x3d9b90,'maxProdPerUnit':_0x3effb1,'product_category':_0x17c3b1}),_0x31ea03=await _0x138309[_0xa5df62(0xca)]();_0x5cabd3[_0xa5df62(0x159)]=parseInt(_0x5cabd3[_0xa5df62(0x159)])+0x1,await _0x5cabd3['save'](),_0x4e6968['products']=parseInt(_0x4e6968[_0xa5df62(0x159)])+0x1,await _0x4e6968[_0xa5df62(0xca)](),_0x1a59fb[_0xa5df62(0x159)]=parseInt(_0x1a59fb['products'])+0x1,await _0x1a59fb['save'](),_0x75576a[_0xa5df62(0x127)](_0xa5df62(0xcf),_0xf00a9c+_0xa5df62(0xe2));}else{console[_0xa5df62(0xf3)](_0x4dd03e[0x0]);const _0x2197dd=_0x4dd03e[0x0];_0x2197dd[_0xa5df62(0x116)]=_0x5cabd3[_0xa5df62(0xa0)],_0x2197dd[_0xa5df62(0x134)]=_0x4e6968['name'],_0x2197dd[_0xa5df62(0xa4)]=_0x1a59fb[_0xa5df62(0xa0)],_0x2197dd[_0xa5df62(0xcd)]=_0x193a79,_0x2197dd[_0xa5df62(0x15b)]=_0x1eb11a,_0x2197dd['secondary_unit']=_0x1a59fb['secondary_unit'],_0x2197dd[_0xa5df62(0xba)]=_0x1043a8,_0x2197dd[_0xa5df62(0x136)]=_0x148763,_0x2197dd[_0xa5df62(0xf1)]=_0x3d9b90,_0x2197dd[_0xa5df62(0x120)]=_0x3effb1,_0x2197dd[_0xa5df62(0xa7)]=_0x17c3b1;const _0x6aa058=await _0x2197dd[_0xa5df62(0xca)]();_0x75576a[_0xa5df62(0x127)](_0xa5df62(0xcf),_0x6aa058[_0xa5df62(0xa0)]+'\x20Edit\x20Successfully');}}catch(_0x117df4){_0x497a30[_0xa5df62(0xff)](0x1f4)[_0xa5df62(0xdf)]({'proderror':_0x117df4['message'],'aproduct':_0xf00a9c});}}_0x497a30['redirect']('/products/view');}),router[a0_0x5acdc7(0xac)](a0_0x5acdc7(0x14c),auth,async(_0x2da63a,_0x165787)=>{const _0x1343db=a0_0x5acdc7;try{console[_0x1343db(0xf3)](_0x2da63a[_0x1343db(0xc9)]);const {data_cateory:_0x4f9787,datachoose:_0x4eda8c}=_0x2da63a[_0x1343db(0xc9)];var _0x65bfb8;if(_0x4eda8c==_0x1343db(0x12b))_0x65bfb8=await product[_0x1343db(0xdb)]([{'$group':{'_id':_0x1343db(0xf2)}}]);else{if(_0x4eda8c=='brands')_0x65bfb8=await product[_0x1343db(0xdb)]([{'$match':{'product_category':_0x4f9787}},{'$group':{'_id':_0x1343db(0xde)}}]);else _0x4eda8c==_0x1343db(0xb8)&&(_0x65bfb8=await product[_0x1343db(0xdb)]([{'$match':{'product_category':_0x4f9787}},{'$group':{'_id':'$category'}}]));}_0x165787[_0x1343db(0xdf)](_0x65bfb8);}catch(_0x5b307c){_0x165787[_0x1343db(0xdf)]({'message':_0x5b307c[_0x1343db(0x14a)]});}}),router[a0_0x5acdc7(0xac)](a0_0x5acdc7(0xf7),auth,async(_0x180bc3,_0x25717d)=>{const _0x192a35=a0_0x5acdc7;try{const {data_choosing:_0x1bf33c,data_selected:_0x213a7e}=_0x180bc3[_0x192a35(0xc9)];var _0x587548;if(_0x1bf33c==_0x192a35(0x12b))_0x587548=await product['aggregate']([{'$match':{'product_category':_0x213a7e}}]);else{if(_0x1bf33c==_0x192a35(0x130))_0x587548=await product[_0x192a35(0xdb)]([{'$match':{'brand':_0x213a7e}}]);else _0x1bf33c==_0x192a35(0xb8)&&(_0x587548=await product[_0x192a35(0xdb)]([{'$match':{'category':_0x213a7e}}]));}_0x25717d[_0x192a35(0xdf)](_0x587548);}catch(_0x51f0df){_0x25717d[_0x192a35(0xdf)]({'message':_0x51f0df[_0x192a35(0x14a)]});}}),router[a0_0x5acdc7(0xe8)](a0_0x5acdc7(0x111),auth,async(_0x48106f,_0x1d8495)=>{const _0x32f48c=a0_0x5acdc7,_0x55e27d=_0x48106f['user'],_0x5830a0=await profile[_0x32f48c(0x100)]({'email':_0x55e27d[_0x32f48c(0x104)]}),_0x52e89f=await master_shop[_0x32f48c(0x158)](),_0x30868b=await product[_0x32f48c(0x158)]();if(_0x52e89f[0x0]['language']==_0x32f48c(0x9b))var _0x217bf6=users[_0x32f48c(0xa3)];else{if(_0x52e89f[0x0][_0x32f48c(0xef)]=='Hindi')var _0x217bf6=users[_0x32f48c(0xc2)];else{if(_0x52e89f[0x0][_0x32f48c(0xef)]==_0x32f48c(0xd7))var _0x217bf6=users[_0x32f48c(0xd7)];else{if(_0x52e89f[0x0][_0x32f48c(0xef)]==_0x32f48c(0xf4))var _0x217bf6=users[_0x32f48c(0xf4)];else{if(_0x52e89f[0x0][_0x32f48c(0xef)]==_0x32f48c(0xaf))var _0x217bf6=users[_0x32f48c(0xaf)];else{if(_0x52e89f[0x0][_0x32f48c(0xef)]==_0x32f48c(0xa5))var _0x217bf6=users[_0x32f48c(0xcc)];else{if(_0x52e89f[0x0][_0x32f48c(0xef)]==_0x32f48c(0x119))var _0x217bf6=users[_0x32f48c(0x119)];else{if(_0x52e89f[0x0][_0x32f48c(0xef)]=='Arabic\x20(ae)')var _0x217bf6=users[_0x32f48c(0x109)];}}}}}}}_0x1d8495[_0x32f48c(0xf5)](_0x32f48c(0x114),{'success':_0x48106f[_0x32f48c(0x127)](_0x32f48c(0xcf)),'errors':_0x48106f[_0x32f48c(0x127)](_0x32f48c(0x122)),'role':_0x55e27d,'profile':_0x5830a0,'products':_0x30868b,'master_shop':_0x52e89f,'language':_0x217bf6});}),router[a0_0x5acdc7(0xac)](a0_0x5acdc7(0x131),auth,async(_0x5aaf35,_0x1c6c68)=>{const _0x5b562d=a0_0x5acdc7,_0x10d573=await product[_0x5b562d(0x158)]();_0x1c6c68[_0x5b562d(0xdf)]({'data':_0x10d573});}),router['post'](a0_0x5acdc7(0xd3),auth,async(_0x5c067a,_0x3ace6e)=>{const _0x109660=a0_0x5acdc7;try{const {dataProdCat:_0x347c9a,dataProdIdentity:_0x4c348e}=_0x5c067a[_0x109660(0xc9)];var _0x2e2202;switch(_0x347c9a){case'fg':switch(_0x4c348e){case _0x109660(0x156):_0x2e2202=await product[_0x109660(0xdb)]([{'$match':{'product_category':'Finished\x20Goods'}},{'$group':{'_id':_0x109660(0xde)}},{'$project':{'brand':_0x109660(0x165)}}]);break;case _0x109660(0xc5):_0x2e2202=await product[_0x109660(0xdb)]([{'$match':{'product_category':_0x109660(0x149)}},{'$group':{'_id':_0x109660(0x112)}},{'$project':{'category':_0x109660(0x165)}}]);break;}break;case'rm':switch(_0x4c348e){case _0x109660(0x156):_0x2e2202=await product[_0x109660(0xdb)]([{'$match':{'product_category':'Raw\x20Materials'}},{'$group':{'_id':_0x109660(0xde)}},{'$project':{'brand':_0x109660(0x165)}}]);break;case _0x109660(0xc5):_0x2e2202=await product[_0x109660(0xdb)]([{'$match':{'product_category':_0x109660(0x124)}},{'$group':{'_id':_0x109660(0x112)}},{'$project':{'category':_0x109660(0x165)}}]);break;}break;}_0x3ace6e[_0x109660(0xdf)](_0x2e2202);}catch(_0x29781c){_0x3ace6e[_0x109660(0xdf)]({'message':_0x29781c[_0x109660(0x14a)]});}}),router[a0_0x5acdc7(0xac)](a0_0x5acdc7(0xad),auth,async(_0x108f20,_0x2d8c31)=>{const _0x23fc2e=a0_0x5acdc7;try{console[_0x23fc2e(0xf3)](_0x108f20[_0x23fc2e(0xc9)]);const {prod_cat:_0x44af65,identity:_0x490e3f,valueData:_0x424a9d,typeofbarcode:_0x2ae9d0}=_0x108f20[_0x23fc2e(0xc9)];let _0x43bcae;switch(_0x44af65){case'fg':if(_0x490e3f=='Brands')_0x43bcae=await product[_0x23fc2e(0xdb)]([{'$match':{'product_category':_0x23fc2e(0x149),'brand':_0x424a9d}}]);else _0x490e3f==_0x23fc2e(0xc5)&&(_0x43bcae=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods','category':_0x424a9d}}]));break;case'rm':if(_0x490e3f=='Brands')_0x43bcae=await product[_0x23fc2e(0xdb)]([{'$match':{'product_category':_0x23fc2e(0x124),'brand':_0x424a9d}}]);else _0x490e3f==_0x23fc2e(0xc5)&&(_0x43bcae=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0x424a9d}}]));break;}const _0x4a93df=_0x27dbc3=>_0x27dbc3*0x48,_0x304e9a={'width':0x3,'height':0x1},_0x5523af=new PDFDocument({'margin':_0x4a93df(0.75),'size':[_0x4a93df(_0x304e9a[_0x23fc2e(0xa2)]),_0x4a93df(_0x304e9a['height'])],'bufferPages':!![]}),_0x3ebae3=_0x43bcae[_0x23fc2e(0x132)];for(let _0x9ff11b=0x0;_0x9ff11b<=_0x3ebae3;_0x9ff11b++){if(_0x9ff11b!=_0x3ebae3){const _0x1b38f3=_0x43bcae[_0x9ff11b][_0x23fc2e(0xa0)],_0x5e08ec=_0x43bcae[_0x9ff11b][_0x23fc2e(0xba)],_0x473e0a=_0x43bcae[_0x9ff11b][_0x23fc2e(0x136)],_0x2fce62=_0x43bcae[_0x9ff11b][_0x23fc2e(0x15b)];var _0x9940a8;switch(_0x2ae9d0){case'1':_0x9940a8=_0x5e08ec;break;case'2':_0x9940a8=_0x473e0a;break;case'3':_0x9940a8=_0x2fce62;break;}const _0x363fe1={'width':0xd2,'height':0x64},_0x170677={'width':_0x4a93df(_0x304e9a[_0x23fc2e(0xa2)]),'height':_0x4a93df(_0x304e9a['height'])},_0x472171=new Canvas();JsBarcode(_0x472171,_0x9940a8,{'format':_0x23fc2e(0xd4),'height':_0x363fe1[_0x23fc2e(0x137)],'displayValue':!![],'text':_0x9940a8});const _0x4fd0bf=_0x472171[_0x23fc2e(0xfc)](),_0x1be766=_0x170677[_0x23fc2e(0xa2)]/_0x363fe1['width'],_0x428d97=_0x170677[_0x23fc2e(0x137)]/_0x363fe1[_0x23fc2e(0x137)],_0x5ce1c2=Math['min'](_0x1be766,_0x428d97),_0x4cd9a9=_0x363fe1[_0x23fc2e(0xa2)]*_0x5ce1c2,_0x12ffd2=_0x363fe1['height']*_0x5ce1c2,_0x5f4496=(_0x170677[_0x23fc2e(0xa2)]-_0x4cd9a9)/0x2,_0x46242e=(_0x170677[_0x23fc2e(0x137)]-_0x12ffd2)/0x2;_0x5523af[_0x23fc2e(0xbf)](_0x4fd0bf,_0x5f4496,_0x46242e,{'width':_0x4cd9a9,'height':_0x12ffd2}),_0x9ff11b!=_0x3ebae3&&_0x5523af[_0x23fc2e(0xbd)]();}}const _0x3de8eb=[];_0x5523af['on']('data',_0x3de8eb[_0x23fc2e(0x14e)]['bind'](_0x3de8eb)),_0x5523af['on'](_0x23fc2e(0x13f),()=>{const _0x29269f=_0x23fc2e,_0x36290d=Buffer[_0x29269f(0x126)](_0x3de8eb),_0x3e542e=_0x36290d[_0x29269f(0xed)](_0x29269f(0x150));_0x2d8c31[_0x29269f(0xdf)]({'pdfContent':_0x3e542e});}),_0x5523af['end']();}catch(_0x35acd6){_0x2d8c31['json']({'message':_0x35acd6[_0x23fc2e(0x14a)]});}}),router['post']('/print_barcode_filter_search/',auth,async(_0x14093f,_0x4e5398)=>{const _0x186376=a0_0x5acdc7;try{console[_0x186376(0xf3)](_0x14093f[_0x186376(0xc9)]);const {prod_cat:_0x517347,identity:_0x26f44d,valueData:_0x21deb5}=_0x14093f['body'];let _0x497da0;switch(_0x517347){case'fg':if(_0x26f44d==_0x186376(0x156))_0x497da0=await product['aggregate']([{'$match':{'product_category':'Finished\x20Goods','brand':_0x21deb5}}]);else _0x26f44d==_0x186376(0xc5)&&(_0x497da0=await product[_0x186376(0xdb)]([{'$match':{'product_category':_0x186376(0x149),'category':_0x21deb5}}]));break;case'rm':if(_0x26f44d==_0x186376(0x156))_0x497da0=await product['aggregate']([{'$match':{'product_category':_0x186376(0x124),'brand':_0x21deb5}}]);else _0x26f44d==_0x186376(0xc5)&&(_0x497da0=await product['aggregate']([{'$match':{'product_category':'Raw\x20Materials','category':_0x21deb5}}]));break;}_0x4e5398[_0x186376(0xdf)]({'data':_0x497da0});}catch(_0x1095da){_0x4e5398[_0x186376(0xdf)]({'message':_0x1095da[_0x186376(0x14a)]});}}),router[a0_0x5acdc7(0xac)](a0_0x5acdc7(0xaa),auth,async(_0x4c8451,_0xb2594b)=>{const _0x4f85bf=a0_0x5acdc7;try{const _0x480d98=_0x4c8451['params']['id'],{copies:_0x295a5b,typeofbarcode:_0x2c309b}=_0x4c8451[_0x4f85bf(0xc9)];var _0x44201e=await product[_0x4f85bf(0xa9)](_0x480d98);const _0x194460=_0x113f75=>_0x113f75*0x48,_0xa1bc96={'width':0x3,'height':0x1},_0x272e15=new PDFDocument({'margin':_0x194460(0.75),'size':[_0x194460(_0xa1bc96['width']),_0x194460(_0xa1bc96[_0x4f85bf(0x137)])],'bufferPages':!![]}),_0x313fad=_0x295a5b,_0x4a626d=_0x44201e['name'],_0xc46ea5=_0x44201e[_0x4f85bf(0xba)],_0x431b1e=_0x44201e[_0x4f85bf(0x136)],_0x405732=_0x44201e[_0x4f85bf(0x15b)];let _0x1b1fbe;switch(_0x2c309b){case'1':_0x1b1fbe=_0xc46ea5;break;case'2':_0x1b1fbe=_0x431b1e;break;case'3':_0x1b1fbe=_0x405732;break;}const _0x47160b={'width':0xd2,'height':0x64},_0x3e0b49={'width':_0x194460(_0xa1bc96['width']),'height':_0x194460(_0xa1bc96[_0x4f85bf(0x137)])};for(let _0x2376e9=0x1;_0x2376e9<=_0x313fad;_0x2376e9++){const _0x3f9f31=new Canvas();JsBarcode(_0x3f9f31,_0x1b1fbe,{'format':_0x4f85bf(0xd4),'height':_0x47160b[_0x4f85bf(0x137)],'displayValue':!![],'text':_0x1b1fbe});const _0x523634=_0x3f9f31[_0x4f85bf(0xfc)](),_0x1e06af=_0x3e0b49['width']/_0x47160b[_0x4f85bf(0xa2)],_0x2e964b=_0x3e0b49[_0x4f85bf(0x137)]/_0x47160b[_0x4f85bf(0x137)],_0x6dda28=Math[_0x4f85bf(0xcb)](_0x1e06af,_0x2e964b),_0x504d9f=_0x47160b[_0x4f85bf(0xa2)]*_0x6dda28,_0x4e1568=_0x47160b[_0x4f85bf(0x137)]*_0x6dda28,_0x33e872=(_0x3e0b49[_0x4f85bf(0xa2)]-_0x504d9f)/0x2,_0x42f63d=(_0x3e0b49['height']-_0x4e1568)/0x2;_0x272e15[_0x4f85bf(0xbf)](_0x523634,_0x33e872,_0x42f63d,{'width':_0x504d9f,'height':_0x4e1568}),_0x2376e9!=_0x313fad&&_0x272e15['addPage']();}const _0xcba91b=[];_0x272e15['on']('data',_0xcba91b['push'][_0x4f85bf(0xd2)](_0xcba91b)),_0x272e15['on']('end',()=>{const _0x541883=_0x4f85bf,_0x5e2389=Buffer[_0x541883(0x126)](_0xcba91b),_0x9b7a04=_0x5e2389['toString'](_0x541883(0x150));_0xb2594b[_0x541883(0xdf)]({'pdfContent':_0x9b7a04});}),_0x272e15[_0x4f85bf(0x13f)]();}catch(_0x4d8b6a){_0xb2594b['json']({'message':_0x4d8b6a[_0x4f85bf(0x14a)]});}}),module[a0_0x5acdc7(0x14f)]=router;