function a0_0x33a8(){const _0x5a2979=['2458800PsupFM','utils','964qBLnLZ','jsbarcode','redirect','Content-Type','Category','pdfkit-table','categories','findById','type_products','brand\x20data\x20delete\x20successfully','stock','/categories/:id','product_details.product_name','base64','product_code','Alert_QTY','../models/all_models','product_category','long','json','/barcode_filter','../middleware/auth','/units','render','findByIdAndDelete','\x20Edit\x20Successfully','\x20brand\x20is\x20add\x20successfully','Arabic','$secondary_unit','product_barcode_products','20450YSpgdY','$brand','bind','single','maxStocks','unit','/brands','PName','\x20categories\x20is\x20add\x20successfully','$product_details.product_stock','Products_category','success','secondary_unit','barcode\x20user_id','/products_import_migrate_file','/products_export_migrate_file','user','Products','log','/view/add_products','\x20<>\x20','params','/barcode_data','units','/products/units','findByIdAndUpdate','multer','/view','English\x20(US)','Units','$_id','end','numeric','categ','max_number_per_units','columns','13696936PrXtBM','flash','product_barcode','category','/categories','forEach','ProductCode','addPage','\x20unit\x20is\x20add\x20successfully','$product_details.product_name','save','concat','master','Chinese','product_stock','public/Migration','get','aggregate','width','Raw\x20Materials','Portuguese\x20(BR)','setHeader','add_product','/print_barcode_filter/','edit\x20Product\x20master','findOne','express','sales_category','/units/delete/:id','German','\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another','Products\x20master','filename','public/upload','Portuguese','2372REeZOf','1274105laYFgP','name','exports','product\x20add\x20successfully','PCat','email','readFile','public/Migration/','Primary_Code','sku','products','product\x20update\x20successfully','$product_category','PAlQty','/brands/delete/:id','diskStorage','Hindi','image','errors','defaultProduct.avif','data','Workbook','/categories/delete/:id','toBuffer','44519046sxSXsk','/print_barcode_single/:id','Products\x20warehouse_data','/brands/:id','Arabic\x20(ae)','xlsx','Finished\x20Goods','migrate_product_fule','height','brand\x20data\x20update\x20successfully','Maximum_Stocks','$product_stock','SheetNames','PBrands','/print_barcode','12pTteJV','Prod_Cat','then','product_docs','$product_name','push','primary_code','file','/units/:id','CODE128','categories_edit','product\x20edit','Brands','express/lib/response','French','secondary_code','maxProdPerUnit','alertquantity','language','Secondary_Code','/products/brands','find','status','brands','warehouse','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','774kSfPsp','length','now','Products\x20find_data','English','/products/view','MaxperUnits','Product_Name','body','/select_data','1561VwRAgT','$category','toString','message','Spanish','post','Product_Code','addWorksheet','unit\x20data\x20update\x20successfully','9951ieARWA','/print_barcode_filter_search/','write'];a0_0x33a8=function(){return _0x5a2979;};return a0_0x33a8();}const a0_0x37763d=a0_0x130e;(function(_0x3a628e,_0x376be2){const _0x30d2dc=a0_0x130e,_0x54c274=_0x3a628e();while(!![]){try{const _0x1425d8=-parseInt(_0x30d2dc(0x16b))/0x1*(-parseInt(_0x30d2dc(0x1de))/0x2)+-parseInt(_0x30d2dc(0x174))/0x3*(-parseInt(_0x30d2dc(0x179))/0x4)+parseInt(_0x30d2dc(0x177))/0x5+-parseInt(_0x30d2dc(0x147))/0x6*(-parseInt(_0x30d2dc(0x1df))/0x7)+parseInt(_0x30d2dc(0x1bb))/0x8+parseInt(_0x30d2dc(0x161))/0x9*(-parseInt(_0x30d2dc(0x197))/0xa)+-parseInt(_0x30d2dc(0x138))/0xb;if(_0x1425d8===_0x376be2)break;else _0x54c274['push'](_0x54c274['shift']());}catch(_0x3796b4){_0x54c274['push'](_0x54c274['shift']());}}}(a0_0x33a8,0xf310a));const express=require(a0_0x37763d(0x1d5)),res=require(a0_0x37763d(0x154)),app=express(),router=express['Router'](),multer=require(a0_0x37763d(0x1b1)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require(a0_0x37763d(0x189)),auth=require(a0_0x37763d(0x18e)),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require(a0_0x37763d(0x13d)),JsBarcode=require(a0_0x37763d(0x17a)),{Canvas}=require('canvas'),PDFDocument=require(a0_0x37763d(0x17e));router[a0_0x37763d(0x1cb)](a0_0x37763d(0x1bf),auth,async(_0x2b810b,_0x466a78)=>{const _0x5c3c95=a0_0x37763d;try{const {username:_0x1bcc5f,email:_0x41576a,role:_0x171c49}=_0x2b810b[_0x5c3c95(0x1a7)],_0x308de5=_0x2b810b[_0x5c3c95(0x1a7)],_0x185aae=await profile['findOne']({'email':_0x308de5[_0x5c3c95(0x1e4)]}),_0x5d526a=await master_shop['find']();console[_0x5c3c95(0x1a9)](_0x5c3c95(0x1c7),_0x5d526a);const _0x38a96e=await categories['find']();if(_0x5d526a[0x0][_0x5c3c95(0x159)]==_0x5c3c95(0x1b3))var _0x2748f8=users[_0x5c3c95(0x165)];else{if(_0x5d526a[0x0][_0x5c3c95(0x159)]==_0x5c3c95(0x130))var _0x2748f8=users[_0x5c3c95(0x130)];else{if(_0x5d526a[0x0][_0x5c3c95(0x159)]==_0x5c3c95(0x1d8))var _0x2748f8=users['German'];else{if(_0x5d526a[0x0][_0x5c3c95(0x159)]==_0x5c3c95(0x16f))var _0x2748f8=users[_0x5c3c95(0x16f)];else{if(_0x5d526a[0x0][_0x5c3c95(0x159)]==_0x5c3c95(0x155))var _0x2748f8=users[_0x5c3c95(0x155)];else{if(_0x5d526a[0x0][_0x5c3c95(0x159)]==_0x5c3c95(0x1cf))var _0x2748f8=users[_0x5c3c95(0x1dd)];else{if(_0x5d526a[0x0][_0x5c3c95(0x159)]==_0x5c3c95(0x1c8))var _0x2748f8=users['Chinese'];else{if(_0x5d526a[0x0][_0x5c3c95(0x159)]=='Arabic\x20(ae)')var _0x2748f8=users['Arabic'];}}}}}}}_0x466a78[_0x5c3c95(0x190)](_0x5c3c95(0x17f),{'success':_0x2b810b['flash'](_0x5c3c95(0x1a2)),'errors':_0x2b810b['flash']('errors'),'role':_0x308de5,'profile':_0x185aae,'user':_0x38a96e,'master_shop':_0x5d526a,'language':_0x2748f8});}catch(_0x9fff6d){console['log'](_0x9fff6d);}}),router[a0_0x37763d(0x170)](a0_0x37763d(0x1bf),auth,async(_0x21585f,_0x2b992d)=>{const _0x37efa3=a0_0x37763d;try{const {name:_0x1391f6,products:_0x49f7d6}=_0x21585f['body'],_0x32e41f=new categories({'name':_0x1391f6,'products':_0x49f7d6}),_0xdaace2=await categories[_0x37efa3(0x1d4)]({'name':_0x1391f6});_0xdaace2?_0x21585f['flash'](_0x37efa3(0x132),_0x1391f6+_0x37efa3(0x1d9)):_0x21585f['flash'](_0x37efa3(0x1a2),_0x1391f6+_0x37efa3(0x19f));const _0x3ffd07=await _0x32e41f[_0x37efa3(0x1c5)]();_0x2b992d['redirect']('/products/categories');}catch(_0x1289b7){console[_0x37efa3(0x1a9)](_0x1289b7);}}),router['get']('/categories/:id',auth,async(_0x1107e4,_0x1e9765)=>{const _0x583e11=a0_0x37763d;try{const {username:_0x57213e,email:_0x38c63c,role:_0x510239}=_0x1107e4[_0x583e11(0x1a7)],_0x5873b9=_0x1107e4[_0x583e11(0x1a7)],_0x161d5b=await profile['findOne']({'email':_0x5873b9[_0x583e11(0x1e4)]}),_0x4468d2=await master_shop[_0x583e11(0x15c)]();console['log']('master',_0x4468d2);const _0xf166e=_0x1107e4[_0x583e11(0x1ac)]['id'];console[_0x583e11(0x1a9)](_0xf166e);const _0x23bb47=await categories[_0x583e11(0x180)](_0xf166e);if(_0x4468d2[0x0]['language']=='English\x20(US)')var _0x4cf81e=users['English'];else{if(_0x4468d2[0x0][_0x583e11(0x159)]==_0x583e11(0x130))var _0x4cf81e=users[_0x583e11(0x130)];else{if(_0x4468d2[0x0][_0x583e11(0x159)]==_0x583e11(0x1d8))var _0x4cf81e=users['German'];else{if(_0x4468d2[0x0]['language']==_0x583e11(0x16f))var _0x4cf81e=users[_0x583e11(0x16f)];else{if(_0x4468d2[0x0][_0x583e11(0x159)]==_0x583e11(0x155))var _0x4cf81e=users[_0x583e11(0x155)];else{if(_0x4468d2[0x0]['language']==_0x583e11(0x1cf))var _0x4cf81e=users['Portuguese'];else{if(_0x4468d2[0x0][_0x583e11(0x159)]==_0x583e11(0x1c8))var _0x4cf81e=users[_0x583e11(0x1c8)];else{if(_0x4468d2[0x0][_0x583e11(0x159)]==_0x583e11(0x13c))var _0x4cf81e=users[_0x583e11(0x194)];}}}}}}}_0x1e9765['render'](_0x583e11(0x17f),{'success':_0x1107e4[_0x583e11(0x1bc)]('success'),'errors':_0x1107e4['flash']('errors'),'role':_0x5873b9,'profile':_0x161d5b,'master_shop':_0x4468d2,'user':_0x23bb47,'language':_0x4cf81e});}catch(_0x1e4a92){console['log'](_0x1e4a92);}}),router[a0_0x37763d(0x170)](a0_0x37763d(0x184),auth,async(_0x1b331d,_0x19afc2)=>{const _0x331826=a0_0x37763d;try{const _0x1a5b44=_0x1b331d[_0x331826(0x1ac)]['id'],_0x53c2cf=await categories[_0x331826(0x1b0)](_0x1a5b44,_0x1b331d[_0x331826(0x169)]);_0x1b331d[_0x331826(0x1bc)](_0x331826(0x1a2),''+users[_0x331826(0x151)]),_0x19afc2['redirect']('/products/categories');}catch(_0x18b959){console[_0x331826(0x1a9)](_0x18b959);}}),router['get'](a0_0x37763d(0x136),auth,async(_0xef02ba,_0x4dd1bd)=>{const _0xabd43b=a0_0x37763d;try{const _0x5ba7f1=_0xef02ba[_0xabd43b(0x1ac)]['id'],_0x493b5c=await categories['findByIdAndDelete'](_0x5ba7f1);_0xef02ba[_0xabd43b(0x1bc)]('success','categories\x20data\x20delete\x20successfully'),_0x4dd1bd['redirect']('/products/categories');}catch(_0x2b0f1c){console[_0xabd43b(0x1a9)](_0x2b0f1c);}}),router[a0_0x37763d(0x1cb)](a0_0x37763d(0x19d),auth,async(_0x2b1d2d,_0x2ed151)=>{const _0x32bdc6=a0_0x37763d;try{const {username:_0x32063e,email:_0x1cbadc,role:_0x593023}=_0x2b1d2d[_0x32bdc6(0x1a7)],_0x10fa8d=_0x2b1d2d[_0x32bdc6(0x1a7)],_0x3c4f84=await profile[_0x32bdc6(0x1d4)]({'email':_0x10fa8d[_0x32bdc6(0x1e4)]}),_0xe4c7e2=await master_shop['find']();console['log']('master',_0xe4c7e2);const _0x155224=await brands['find']();if(_0xe4c7e2[0x0]['language']==_0x32bdc6(0x1b3))var _0x436eb9=users[_0x32bdc6(0x165)];else{if(_0xe4c7e2[0x0]['language']==_0x32bdc6(0x130))var _0x436eb9=users[_0x32bdc6(0x130)];else{if(_0xe4c7e2[0x0][_0x32bdc6(0x159)]=='German')var _0x436eb9=users[_0x32bdc6(0x1d8)];else{if(_0xe4c7e2[0x0]['language']==_0x32bdc6(0x16f))var _0x436eb9=users[_0x32bdc6(0x16f)];else{if(_0xe4c7e2[0x0][_0x32bdc6(0x159)]==_0x32bdc6(0x155))var _0x436eb9=users[_0x32bdc6(0x155)];else{if(_0xe4c7e2[0x0][_0x32bdc6(0x159)]=='Portuguese\x20(BR)')var _0x436eb9=users[_0x32bdc6(0x1dd)];else{if(_0xe4c7e2[0x0][_0x32bdc6(0x159)]==_0x32bdc6(0x1c8))var _0x436eb9=users[_0x32bdc6(0x1c8)];else{if(_0xe4c7e2[0x0][_0x32bdc6(0x159)]=='Arabic\x20(ae)')var _0x436eb9=users['Arabic'];}}}}}}}_0x2ed151[_0x32bdc6(0x190)](_0x32bdc6(0x15e),{'success':_0x2b1d2d[_0x32bdc6(0x1bc)]('success'),'errors':_0x2b1d2d[_0x32bdc6(0x1bc)](_0x32bdc6(0x132)),'role':_0x10fa8d,'profile':_0x3c4f84,'master_shop':_0xe4c7e2,'user':_0x155224,'language':_0x436eb9});}catch(_0x5943d6){console[_0x32bdc6(0x1a9)](_0x5943d6);}}),router['post'](a0_0x37763d(0x19d),auth,async(_0x43bc63,_0x3d33fc)=>{const _0x25f87c=a0_0x37763d;try{const {name:_0x36610f,products:_0x30dd72}=_0x43bc63[_0x25f87c(0x169)],_0x2379af=new brands({'name':_0x36610f,'products':_0x30dd72}),_0x35cbbb=await brands[_0x25f87c(0x1d4)]({'name':_0x36610f});_0x35cbbb?_0x43bc63[_0x25f87c(0x1bc)](_0x25f87c(0x132),_0x36610f+'\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x43bc63[_0x25f87c(0x1bc)]('success',_0x36610f+_0x25f87c(0x193));const _0x2194d0=await _0x2379af['save']();_0x3d33fc[_0x25f87c(0x17b)](_0x25f87c(0x15b));}catch(_0x58c49f){console[_0x25f87c(0x1a9)](_0x58c49f);}}),router[a0_0x37763d(0x1cb)](a0_0x37763d(0x13b),auth,async(_0x34901d,_0x57b2a2)=>{const _0x26aa89=a0_0x37763d;try{const {username:_0x105dc8,email:_0x21b67c,role:_0x4ee599}=_0x34901d[_0x26aa89(0x1a7)],_0x3a5ba7=_0x34901d[_0x26aa89(0x1a7)],_0xe8bcef=await profile['findOne']({'email':_0x3a5ba7[_0x26aa89(0x1e4)]}),_0x5d70aa=await master_shop[_0x26aa89(0x15c)]();console[_0x26aa89(0x1a9)](_0x26aa89(0x1c7),_0x5d70aa);const _0x3f1b6f=_0x34901d[_0x26aa89(0x1ac)]['id'];console['log'](_0x3f1b6f);const _0xa2c436=await brands[_0x26aa89(0x180)](_0x3f1b6f);if(_0x5d70aa[0x0]['language']==_0x26aa89(0x1b3))var _0x28f32f=users['English'];else{if(_0x5d70aa[0x0][_0x26aa89(0x159)]=='Hindi')var _0x28f32f=users['Hindi'];else{if(_0x5d70aa[0x0][_0x26aa89(0x159)]==_0x26aa89(0x1d8))var _0x28f32f=users[_0x26aa89(0x1d8)];else{if(_0x5d70aa[0x0][_0x26aa89(0x159)]==_0x26aa89(0x16f))var _0x28f32f=users[_0x26aa89(0x16f)];else{if(_0x5d70aa[0x0][_0x26aa89(0x159)]=='French')var _0x28f32f=users[_0x26aa89(0x155)];else{if(_0x5d70aa[0x0][_0x26aa89(0x159)]==_0x26aa89(0x1cf))var _0x28f32f=users[_0x26aa89(0x1dd)];else{if(_0x5d70aa[0x0]['language']==_0x26aa89(0x1c8))var _0x28f32f=users[_0x26aa89(0x1c8)];else{if(_0x5d70aa[0x0][_0x26aa89(0x159)]==_0x26aa89(0x13c))var _0x28f32f=users[_0x26aa89(0x194)];}}}}}}}_0x57b2a2[_0x26aa89(0x190)]('brands',{'success':_0x34901d[_0x26aa89(0x1bc)](_0x26aa89(0x1a2)),'errors':_0x34901d['flash'](_0x26aa89(0x132)),'role':_0x3a5ba7,'profile':_0xe8bcef,'master_shop':_0x5d70aa,'user':_0xa2c436,'language':_0x28f32f});}catch(_0x14944d){console[_0x26aa89(0x1a9)](_0x14944d);}}),router[a0_0x37763d(0x170)](a0_0x37763d(0x13b),auth,async(_0x101898,_0x500a4e)=>{const _0x4cdf87=a0_0x37763d;try{const _0x5031e1=_0x101898[_0x4cdf87(0x1ac)]['id'],_0x2f6585=await brands[_0x4cdf87(0x1b0)](_0x5031e1,_0x101898[_0x4cdf87(0x169)]);_0x101898['flash'](_0x4cdf87(0x1a2),_0x4cdf87(0x141)),_0x500a4e[_0x4cdf87(0x17b)](_0x4cdf87(0x15b));}catch(_0x5d2eb1){console['log'](_0x5d2eb1);}}),router[a0_0x37763d(0x1cb)](a0_0x37763d(0x12e),auth,async(_0x199525,_0x460965)=>{const _0x3f7478=a0_0x37763d;try{const _0x17106d=_0x199525['params']['id'],_0x542d8a=await brands[_0x3f7478(0x191)](_0x17106d);_0x199525[_0x3f7478(0x1bc)]('success',_0x3f7478(0x182)),_0x460965[_0x3f7478(0x17b)](_0x3f7478(0x15b));}catch(_0x111e05){console[_0x3f7478(0x1a9)](_0x111e05);}}),router[a0_0x37763d(0x1cb)](a0_0x37763d(0x18f),auth,async(_0x1695a9,_0x2e3919)=>{const _0x36b3e0=a0_0x37763d;try{const {username:_0x1cf5b0,email:_0x156abd,role:_0x14a4e}=_0x1695a9[_0x36b3e0(0x1a7)],_0xa571b5=_0x1695a9[_0x36b3e0(0x1a7)],_0x4b2204=await profile[_0x36b3e0(0x1d4)]({'email':_0xa571b5[_0x36b3e0(0x1e4)]}),_0x3686e9=await master_shop[_0x36b3e0(0x15c)]();console[_0x36b3e0(0x1a9)](_0x36b3e0(0x1c7),_0x3686e9);const _0x41578f=await units[_0x36b3e0(0x15c)]();if(_0x3686e9[0x0][_0x36b3e0(0x159)]==_0x36b3e0(0x1b3))var _0x4017be=users[_0x36b3e0(0x165)];else{if(_0x3686e9[0x0]['language']==_0x36b3e0(0x130))var _0x4017be=users[_0x36b3e0(0x130)];else{if(_0x3686e9[0x0]['language']=='German')var _0x4017be=users[_0x36b3e0(0x1d8)];else{if(_0x3686e9[0x0]['language']==_0x36b3e0(0x16f))var _0x4017be=users[_0x36b3e0(0x16f)];else{if(_0x3686e9[0x0][_0x36b3e0(0x159)]==_0x36b3e0(0x155))var _0x4017be=users[_0x36b3e0(0x155)];else{if(_0x3686e9[0x0][_0x36b3e0(0x159)]==_0x36b3e0(0x1cf))var _0x4017be=users['Portuguese'];else{if(_0x3686e9[0x0][_0x36b3e0(0x159)]==_0x36b3e0(0x1c8))var _0x4017be=users[_0x36b3e0(0x1c8)];else{if(_0x3686e9[0x0][_0x36b3e0(0x159)]==_0x36b3e0(0x13c))var _0x4017be=users[_0x36b3e0(0x194)];}}}}}}}_0x2e3919[_0x36b3e0(0x190)](_0x36b3e0(0x1ae),{'success':_0x1695a9[_0x36b3e0(0x1bc)](_0x36b3e0(0x1a2)),'errors':_0x1695a9[_0x36b3e0(0x1bc)](_0x36b3e0(0x132)),'role':_0xa571b5,'profile':_0x4b2204,'master_shop':_0x3686e9,'user':_0x41578f,'language':_0x4017be});}catch(_0x36191f){console[_0x36b3e0(0x1a9)](_0x36191f);}}),router[a0_0x37763d(0x170)](a0_0x37763d(0x18f),auth,async(_0x42418,_0x50740f)=>{const _0x5f39b1=a0_0x37763d;try{const {name:_0x2f6940,secondary_unit:_0x1ff64c,products:_0x52b98a}=_0x42418[_0x5f39b1(0x169)],_0x1c968e=new units({'name':_0x2f6940,'secondary_unit':_0x1ff64c,'products':_0x52b98a}),_0x5c4d3c=await units['findOne']({'name':_0x2f6940});_0x5c4d3c?_0x42418[_0x5f39b1(0x1bc)]('errors',_0x2f6940+'\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x42418['flash'](_0x5f39b1(0x1a2),_0x2f6940+_0x5f39b1(0x1c3));const _0x2c5300=await _0x1c968e[_0x5f39b1(0x1c5)]();_0x50740f[_0x5f39b1(0x17b)]('/products/units');}catch(_0x33fb79){console[_0x5f39b1(0x1a9)](_0x33fb79);}}),router['get'](a0_0x37763d(0x14f),auth,async(_0x44c97b,_0x33930d)=>{const _0x4c92ab=a0_0x37763d;try{const {username:_0x1e27ab,email:_0xaacd63,role:_0x412e09}=_0x44c97b[_0x4c92ab(0x1a7)],_0x224b2b=_0x44c97b['user'],_0x43dc42=await profile[_0x4c92ab(0x1d4)]({'email':_0x224b2b[_0x4c92ab(0x1e4)]}),_0x55c7e0=await master_shop[_0x4c92ab(0x15c)]();console['log'](_0x4c92ab(0x1c7),_0x55c7e0);const _0x323216=_0x44c97b['params']['id'],_0x50c2c9=await units['findById'](_0x323216);if(_0x55c7e0[0x0][_0x4c92ab(0x159)]==_0x4c92ab(0x1b3))var _0x4f1a7b=users['English'];else{if(_0x55c7e0[0x0]['language']==_0x4c92ab(0x130))var _0x4f1a7b=users[_0x4c92ab(0x130)];else{if(_0x55c7e0[0x0]['language']==_0x4c92ab(0x1d8))var _0x4f1a7b=users[_0x4c92ab(0x1d8)];else{if(_0x55c7e0[0x0][_0x4c92ab(0x159)]=='Spanish')var _0x4f1a7b=users[_0x4c92ab(0x16f)];else{if(_0x55c7e0[0x0][_0x4c92ab(0x159)]==_0x4c92ab(0x155))var _0x4f1a7b=users[_0x4c92ab(0x155)];else{if(_0x55c7e0[0x0][_0x4c92ab(0x159)]==_0x4c92ab(0x1cf))var _0x4f1a7b=users[_0x4c92ab(0x1dd)];else{if(_0x55c7e0[0x0][_0x4c92ab(0x159)]=='Chinese')var _0x4f1a7b=users[_0x4c92ab(0x1c8)];else{if(_0x55c7e0[0x0][_0x4c92ab(0x159)]==_0x4c92ab(0x13c))var _0x4f1a7b=users[_0x4c92ab(0x194)];}}}}}}}_0x33930d['render'](_0x4c92ab(0x1ae),{'success':_0x44c97b[_0x4c92ab(0x1bc)](_0x4c92ab(0x1a2)),'errors':_0x44c97b['flash']('errors'),'role':_0x224b2b,'profile':_0x43dc42,'master_shop':_0x55c7e0,'user':_0x50c2c9,'language':_0x4f1a7b});}catch(_0x42dacf){console[_0x4c92ab(0x1a9)](_0x42dacf);}}),router[a0_0x37763d(0x170)]('/units/:id',auth,async(_0x3d2c1b,_0x599329)=>{const _0x42c9fc=a0_0x37763d;try{const _0x51b1f4=_0x3d2c1b[_0x42c9fc(0x1ac)]['id'],_0x428736=await units['findByIdAndUpdate'](_0x51b1f4,_0x3d2c1b['body']);_0x3d2c1b[_0x42c9fc(0x1bc)](_0x42c9fc(0x1a2),_0x42c9fc(0x173)),_0x599329[_0x42c9fc(0x17b)](_0x42c9fc(0x1af));}catch(_0x324bd6){console['log'](_0x324bd6);}}),router[a0_0x37763d(0x1cb)](a0_0x37763d(0x1d7),auth,async(_0x55a59e,_0x250b76)=>{const _0x40b4e4=a0_0x37763d;try{const _0x3123ab=_0x55a59e[_0x40b4e4(0x1ac)]['id'],_0x2e6853=await units['findByIdAndDelete'](_0x3123ab);_0x55a59e[_0x40b4e4(0x1bc)](_0x40b4e4(0x1a2),'unit\x20data\x20delete\x20successfully'),_0x250b76[_0x40b4e4(0x17b)](_0x40b4e4(0x1af));}catch(_0x3e3831){console[_0x40b4e4(0x1a9)](_0x3e3831);}});const storage=multer[a0_0x37763d(0x12f)]({'destination':(_0x82a0ed,_0x503771,_0x40e8c5)=>{const _0x34abf3=a0_0x37763d;_0x40e8c5(null,_0x34abf3(0x1dc));},'filename':(_0x286019,_0x5cefc4,_0x4d0116)=>{const _0x3b53cb=a0_0x37763d;_0x4d0116(null,Date[_0x3b53cb(0x163)]()+_0x5cefc4['originalname']);}}),upload=multer({'storage':storage});router['get'](a0_0x37763d(0x1b2),auth,async(_0x595777,_0xf8ca98)=>{const _0x4fd8ec=a0_0x37763d;try{const {username:_0x2d4b5f,email:_0x3376eb,role:_0x4a7a64}=_0x595777[_0x4fd8ec(0x1a7)],_0x382416=_0x595777[_0x4fd8ec(0x1a7)],_0x4bc291=await profile[_0x4fd8ec(0x1d4)]({'email':_0x382416[_0x4fd8ec(0x1e4)]}),_0x259788={'year':'numeric','month':_0x4fd8ec(0x18b),'day':_0x4fd8ec(0x1b7)},_0x2c59a9=await master_shop[_0x4fd8ec(0x15c)]();console[_0x4fd8ec(0x1a9)](_0x4fd8ec(0x1da),_0x2c59a9);const _0x1cc7b6=await product[_0x4fd8ec(0x15c)]();console[_0x4fd8ec(0x1a9)](_0x4fd8ec(0x164),_0x1cc7b6);const _0xeba16f=await warehouse[_0x4fd8ec(0x1cc)]([{'$unwind':'$product_details'},{'$lookup':{'from':_0x4fd8ec(0x12a),'localField':_0x4fd8ec(0x185),'foreignField':_0x4fd8ec(0x1e0),'as':_0x4fd8ec(0x14a)}},{'$unwind':'$product_docs'},{'$project':{'product_name':_0x4fd8ec(0x1c4),'product_stock':_0x4fd8ec(0x1a0)}},{'$group':{'_id':_0x4fd8ec(0x14b),'product_stock':{'$sum':_0x4fd8ec(0x143)}}}]);console['log'](_0x4fd8ec(0x13a),_0xeba16f),_0xeba16f[_0x4fd8ec(0x1c0)](_0x883d87=>{const _0x3740ec=_0x1cc7b6['map'](_0x448cda=>{const _0x2a9248=a0_0x130e;_0x448cda[_0x2a9248(0x1e0)]==_0x883d87['_id']&&(_0x448cda[_0x2a9248(0x183)]=parseInt(_0x448cda[_0x2a9248(0x183)])+parseInt(_0x883d87[_0x2a9248(0x1c9)]));});}),console[_0x4fd8ec(0x1a9)](_0x4fd8ec(0x164),_0x1cc7b6);if(_0x2c59a9[0x0][_0x4fd8ec(0x159)]==_0x4fd8ec(0x1b3))var _0x1bb395=users['English'];else{if(_0x2c59a9[0x0]['language']=='Hindi')var _0x1bb395=users[_0x4fd8ec(0x130)];else{if(_0x2c59a9[0x0][_0x4fd8ec(0x159)]==_0x4fd8ec(0x1d8))var _0x1bb395=users[_0x4fd8ec(0x1d8)];else{if(_0x2c59a9[0x0][_0x4fd8ec(0x159)]=='Spanish')var _0x1bb395=users[_0x4fd8ec(0x16f)];else{if(_0x2c59a9[0x0]['language']=='French')var _0x1bb395=users[_0x4fd8ec(0x155)];else{if(_0x2c59a9[0x0][_0x4fd8ec(0x159)]=='Portuguese\x20(BR)')var _0x1bb395=users['Portuguese'];else{if(_0x2c59a9[0x0][_0x4fd8ec(0x159)]==_0x4fd8ec(0x1c8))var _0x1bb395=users[_0x4fd8ec(0x1c8)];else{if(_0x2c59a9[0x0][_0x4fd8ec(0x159)]==_0x4fd8ec(0x13c))var _0x1bb395=users[_0x4fd8ec(0x194)];}}}}}}}_0xf8ca98['render']('products',{'success':_0x595777[_0x4fd8ec(0x1bc)]('success'),'errors':_0x595777['flash']('errors'),'alldata':_0x1cc7b6,'profile':_0x4bc291,'master_shop':_0x2c59a9,'role':_0x382416,'product_stock':_0xeba16f,'language':_0x1bb395});}catch(_0x4569cd){console[_0x4fd8ec(0x1a9)](_0x4569cd);}}),router['get'](a0_0x37763d(0x1aa),auth,async(_0x4b238a,_0x4d1d55)=>{const _0x66e81c=a0_0x37763d;try{const {username:_0x7021e3,email:_0x580060,role:_0x12c6fc}=_0x4b238a[_0x66e81c(0x1a7)],_0x3cc7b2=_0x4b238a[_0x66e81c(0x1a7)],_0x4ea22c=await profile['findOne']({'email':_0x3cc7b2[_0x66e81c(0x1e4)]}),_0x2c0667=await master_shop['find']();console['log'](_0x66e81c(0x1c7),_0x2c0667);const _0x207028=await categories[_0x66e81c(0x15c)]({}),_0x32b6e8=await brands[_0x66e81c(0x15c)]({}),_0x409ee2=await units[_0x66e81c(0x15c)]({}),_0x50a793=await warehouse[_0x66e81c(0x15c)]({'status':'Enabled'});if(_0x2c0667[0x0][_0x66e81c(0x159)]=='English\x20(US)')var _0x17b83a=users[_0x66e81c(0x165)];else{if(_0x2c0667[0x0][_0x66e81c(0x159)]==_0x66e81c(0x130))var _0x17b83a=users[_0x66e81c(0x130)];else{if(_0x2c0667[0x0][_0x66e81c(0x159)]==_0x66e81c(0x1d8))var _0x17b83a=users[_0x66e81c(0x1d8)];else{if(_0x2c0667[0x0][_0x66e81c(0x159)]=='Spanish')var _0x17b83a=users['Spanish'];else{if(_0x2c0667[0x0]['language']=='French')var _0x17b83a=users[_0x66e81c(0x155)];else{if(_0x2c0667[0x0]['language']==_0x66e81c(0x1cf))var _0x17b83a=users[_0x66e81c(0x1dd)];else{if(_0x2c0667[0x0]['language']==_0x66e81c(0x1c8))var _0x17b83a=users['Chinese'];else{if(_0x2c0667[0x0][_0x66e81c(0x159)]==_0x66e81c(0x13c))var _0x17b83a=users[_0x66e81c(0x194)];}}}}}}}_0x4d1d55[_0x66e81c(0x190)](_0x66e81c(0x1d1),{'success':_0x4b238a[_0x66e81c(0x1bc)]('success'),'errors':_0x4b238a[_0x66e81c(0x1bc)](_0x66e81c(0x132)),'role':_0x3cc7b2,'profile':_0x4ea22c,'categories':_0x207028,'brands':_0x32b6e8,'master_shop':_0x2c0667,'units':_0x409ee2,'language':_0x17b83a,'find_data':_0x50a793});}catch(_0x1eff40){console['log'](_0x1eff40);}}),router[a0_0x37763d(0x170)](a0_0x37763d(0x1aa),auth,upload[a0_0x37763d(0x19a)](a0_0x37763d(0x131)),async(_0x4f898d,_0x38e723)=>{const _0x1583bd=a0_0x37763d;try{const {name:_0x85f27,category:_0x34eac3,brand:_0x28f1a6,unit:_0x5457f2,alertquantity:_0x852f81,stock:_0x281580,product_code:_0x4bba8d,warehouse:_0x44137f,primary_ItemCode:_0x2f0653,second_ItemCode:_0x2814e4,second_unit:_0x1c4f29,maxPerUnit:_0x3598be,MaxPerProduct:_0xb552ac,sales_cat:_0x38d468,type_prod:_0x12c9a3}=_0x4f898d[_0x1583bd(0x169)],_0xffa9fd=_0x4f898d[_0x1583bd(0x14e)]?.['filename']||_0x1583bd(0x133),_0x2c3491=new product({'image':_0xffa9fd,'name':_0x85f27,'category':_0x34eac3,'brand':_0x28f1a6,'unit':_0x5457f2,'alertquantity':_0x852f81,'stock':_0x281580,'product_code':_0x4bba8d,'warehouse':_0x44137f,'primary_code':_0x2f0653,'secondary_code':_0x2814e4,'second_unit':_0x1c4f29,'maxStocks':_0xb552ac,'maxProdPerUnit':_0x3598be,'sales_category':_0x38d468,'type_products':_0x12c9a3}),_0xa963a9=await _0x2c3491['save'](),_0x20bc75=await categories[_0x1583bd(0x1d4)]({'name':_0x34eac3});_0x20bc75['products']=parseInt(_0x20bc75['products'])+0x1,await _0x20bc75[_0x1583bd(0x1c5)]();const _0x333842=await brands[_0x1583bd(0x1d4)]({'name':_0x28f1a6});_0x333842[_0x1583bd(0x12a)]=parseInt(_0x333842[_0x1583bd(0x12a)])+0x1,await _0x333842['save']();const _0x4b9985=await units[_0x1583bd(0x1d4)]({'name':_0x5457f2});_0x4b9985[_0x1583bd(0x12a)]=parseInt(_0x4b9985['products'])+0x1,await _0x4b9985[_0x1583bd(0x1c5)](),_0x4f898d[_0x1583bd(0x1bc)](_0x1583bd(0x1a2),_0x1583bd(0x1e2)),_0x38e723['redirect'](_0x1583bd(0x166));}catch(_0x3641fd){console[_0x1583bd(0x1a9)](_0x3641fd);}}),router[a0_0x37763d(0x1cb)]('/view/:id',auth,async(_0x5588dc,_0x171655)=>{const _0x2bba18=a0_0x37763d;try{const {username:_0x573888,email:_0xac2e2a,role:_0x242764}=_0x5588dc['user'],_0x51d3a1=_0x5588dc[_0x2bba18(0x1a7)],_0x4ee371=await profile['findOne']({'email':_0x51d3a1[_0x2bba18(0x1e4)]}),_0x352429=await master_shop[_0x2bba18(0x15c)]();console[_0x2bba18(0x1a9)](_0x2bba18(0x1d3),_0x352429);const _0x160098=_0x5588dc['params']['id'],_0x2eae8c=await product['findById'](_0x160098),_0x48dd47=await categories[_0x2bba18(0x15c)]({}),_0x543a11=await brands[_0x2bba18(0x15c)]({}),_0x12b553=await units['find']({}),_0x2c5dc2=await warehouse['find']({'status':'Enabled'}),_0x1d79ca=await units[_0x2bba18(0x1cc)]([{'$group':{'_id':'$_id','secondaryunit':{'$first':_0x2bba18(0x195)}}}]);if(_0x352429[0x0]['language']==_0x2bba18(0x1b3))var _0x4410e9=users['English'];else{if(_0x352429[0x0][_0x2bba18(0x159)]==_0x2bba18(0x130))var _0x4410e9=users[_0x2bba18(0x130)];else{if(_0x352429[0x0][_0x2bba18(0x159)]==_0x2bba18(0x1d8))var _0x4410e9=users[_0x2bba18(0x1d8)];else{if(_0x352429[0x0][_0x2bba18(0x159)]==_0x2bba18(0x16f))var _0x4410e9=users[_0x2bba18(0x16f)];else{if(_0x352429[0x0]['language']==_0x2bba18(0x155))var _0x4410e9=users['French'];else{if(_0x352429[0x0][_0x2bba18(0x159)]==_0x2bba18(0x1cf))var _0x4410e9=users['Portuguese'];else{if(_0x352429[0x0]['language']==_0x2bba18(0x1c8))var _0x4410e9=users[_0x2bba18(0x1c8)];else{if(_0x352429[0x0][_0x2bba18(0x159)]==_0x2bba18(0x13c))var _0x4410e9=users['Arabic'];}}}}}}}_0x171655[_0x2bba18(0x190)]('edit_product',{'success':_0x5588dc[_0x2bba18(0x1bc)]('success'),'errors':_0x5588dc[_0x2bba18(0x1bc)](_0x2bba18(0x132)),'role':_0x51d3a1,'profile':_0x4ee371,'alldata':_0x2eae8c,'categories':_0x48dd47,'brands':_0x543a11,'master_shop':_0x352429,'units':_0x12b553,'secondunit':_0x1d79ca,'find_data':_0x2c5dc2,'language':_0x4410e9});}catch(_0x6841bd){console['log'](_0x6841bd);}}),router[a0_0x37763d(0x170)]('/view/:id',auth,upload[a0_0x37763d(0x19a)](a0_0x37763d(0x131)),async(_0x1b5c00,_0x27d244)=>{const _0x4f64e0=a0_0x37763d;try{const _0x30063e=_0x1b5c00[_0x4f64e0(0x1ac)]['id'],_0x1707b6=await product['findById'](_0x30063e),{image:_0x279af7,name:_0x501376,category:_0x2236db,brand:_0x553417,sku:_0x4108a1,unit:_0x58402e,alertquantity:_0x219724,product_code:_0x51f3ea,warehouse:_0x2773d5,primary_ItemCode:_0x187e0,second_ItemCode:_0x3383ca,second_unit:_0x1c856a,maxPerUnit:_0x3ebf2d,MaxPerProduct:_0x5cd789,prod_catdata:_0x5af81c,type_prod:_0x4f732e,sales_cat:_0xfeb056}=_0x1b5c00['body'];_0x1b5c00[_0x4f64e0(0x14e)]&&(_0x1707b6[_0x4f64e0(0x131)]=_0x1b5c00[_0x4f64e0(0x14e)][_0x4f64e0(0x1db)]);_0x1707b6[_0x4f64e0(0x1e0)]=_0x501376,_0x1707b6['category']=_0x2236db,_0x1707b6['brand']=_0x553417,_0x1707b6[_0x4f64e0(0x1e8)]=_0x4108a1,_0x1707b6[_0x4f64e0(0x19c)]=_0x58402e,_0x1707b6['alertquantity']=_0x219724,_0x1707b6[_0x4f64e0(0x187)]=_0x51f3ea,_0x1707b6[_0x4f64e0(0x15f)]=_0x2773d5,_0x1707b6[_0x4f64e0(0x14d)]=_0x187e0,_0x1707b6[_0x4f64e0(0x156)]=_0x3383ca,_0x1707b6[_0x4f64e0(0x1a3)]=_0x1c856a,_0x1707b6[_0x4f64e0(0x19b)]=_0x5cd789,_0x1707b6[_0x4f64e0(0x157)]=_0x3ebf2d,_0x1707b6[_0x4f64e0(0x18a)]=_0x5af81c,_0x1707b6[_0x4f64e0(0x181)]=_0x4f732e,_0x1707b6[_0x4f64e0(0x1d6)]=_0xfeb056;const _0xa55e03=await _0x1707b6[_0x4f64e0(0x1c5)]();console[_0x4f64e0(0x1a9)](_0x4f64e0(0x152),_0x1707b6),_0x1b5c00[_0x4f64e0(0x1bc)](_0x4f64e0(0x1a2),_0x4f64e0(0x12b)),_0x27d244[_0x4f64e0(0x17b)](_0x4f64e0(0x166));}catch(_0x55d2ca){console['log'](_0x55d2ca);}}),router[a0_0x37763d(0x1cb)]('/barcode/:id',auth,async(_0x11b923,_0x2135d3)=>{const _0xe6c514=a0_0x37763d;try{const {username:_0x2058b3,email:_0x358f8a,role:_0x32240e}=_0x11b923['user'],_0xfed357=_0x11b923['user'],_0x49b3c2=await profile['findOne']({'email':_0xfed357[_0xe6c514(0x1e4)]}),_0x6c3ec8=await master_shop[_0xe6c514(0x15c)]();console[_0xe6c514(0x1a9)]('barcode\x20Product\x20master',_0x6c3ec8);const _0xedfcd5=_0x11b923[_0xe6c514(0x1ac)]['id'],_0x18b5aa=await product[_0xe6c514(0x180)](_0xedfcd5);console[_0xe6c514(0x1a9)](_0xe6c514(0x1a4),_0x18b5aa);if(_0x6c3ec8[0x0][_0xe6c514(0x159)]==_0xe6c514(0x1b3))var _0x4adc77=users[_0xe6c514(0x165)];else{if(_0x6c3ec8[0x0][_0xe6c514(0x159)]==_0xe6c514(0x130))var _0x4adc77=users['Hindi'];else{if(_0x6c3ec8[0x0][_0xe6c514(0x159)]==_0xe6c514(0x1d8))var _0x4adc77=users[_0xe6c514(0x1d8)];else{if(_0x6c3ec8[0x0][_0xe6c514(0x159)]=='Spanish')var _0x4adc77=users[_0xe6c514(0x16f)];else{if(_0x6c3ec8[0x0][_0xe6c514(0x159)]==_0xe6c514(0x155))var _0x4adc77=users[_0xe6c514(0x155)];else{if(_0x6c3ec8[0x0][_0xe6c514(0x159)]==_0xe6c514(0x1cf))var _0x4adc77=users[_0xe6c514(0x1dd)];else{if(_0x6c3ec8[0x0][_0xe6c514(0x159)]=='Chinese')var _0x4adc77=users[_0xe6c514(0x1c8)];else{if(_0x6c3ec8[0x0][_0xe6c514(0x159)]==_0xe6c514(0x13c))var _0x4adc77=users[_0xe6c514(0x194)];}}}}}}}_0x2135d3[_0xe6c514(0x190)](_0xe6c514(0x1bd),{'success':_0x11b923['flash'](_0xe6c514(0x1a2)),'errors':_0x11b923[_0xe6c514(0x1bc)](_0xe6c514(0x132)),'role':_0xfed357,'profile':_0x49b3c2,'alldata':_0x18b5aa,'master_shop':_0x6c3ec8,'language':_0x4adc77});}catch(_0x13b0cc){console[_0xe6c514(0x1a9)](_0x13b0cc);}}),router[a0_0x37763d(0x1cb)](a0_0x37763d(0x1a6),auth,async(_0x1122e0,_0x4451dd)=>{const _0x4d1284=a0_0x37763d;try{const _0x3a7554=new excelJS[(_0x4d1284(0x135))](),_0x27ce47=_0x3a7554[_0x4d1284(0x172)](_0x4d1284(0x1a8));return _0x27ce47[_0x4d1284(0x1ba)]=[{'header':_0x4d1284(0x168),'key':_0x4d1284(0x19e),'width':0xa},{'header':'Brands','key':_0x4d1284(0x145),'width':0xa},{'header':_0x4d1284(0x1b4),'key':'PUnits','width':0xa},{'header':'Secondary_Units','key':'PSecondaryUnits','width':0xa},{'header':_0x4d1284(0x1b9),'key':_0x4d1284(0x167),'width':0xa},{'header':'Primary_Code','key':_0x4d1284(0x1c1),'width':0xa},{'header':_0x4d1284(0x15a),'key':_0x4d1284(0x1c1),'width':0xa},{'header':_0x4d1284(0x171),'key':_0x4d1284(0x1c1),'width':0xa},{'header':'Category','key':_0x4d1284(0x1e3),'width':0xa},{'header':_0x4d1284(0x188),'key':_0x4d1284(0x12d),'width':0xa},{'header':_0x4d1284(0x142),'key':_0x4d1284(0x12d),'width':0xa},{'header':_0x4d1284(0x1a1),'key':_0x4d1284(0x148),'width':0xa}],_0x4451dd[_0x4d1284(0x1d0)](_0x4d1284(0x17c),_0x4d1284(0x160)),_0x4451dd['setHeader']('Content-Disposition','attachment;\x20filename=Product_Migration_File.xlsx'),_0x3a7554['xlsx'][_0x4d1284(0x176)](_0x4451dd)[_0x4d1284(0x149)](()=>{const _0xd3ccdf=_0x4d1284;_0x4451dd[_0xd3ccdf(0x15d)](0xc8);});}catch(_0x582f23){_0x4451dd[_0x4d1284(0x15d)](0x190)['send'](_0x582f23);}});function a0_0x130e(_0x1cdd5d,_0x403ea1){const _0x33a87d=a0_0x33a8();return a0_0x130e=function(_0x130e71,_0x10e25b){_0x130e71=_0x130e71-0x12a;let _0x398d0f=_0x33a87d[_0x130e71];return _0x398d0f;},a0_0x130e(_0x1cdd5d,_0x403ea1);}const storage1=multer[a0_0x37763d(0x12f)]({'destination':(_0xdb3733,_0x20d452,_0x52b67a)=>{const _0x239d8e=a0_0x37763d;_0x52b67a(null,_0x239d8e(0x1ca));},'filename':(_0x3d7411,_0x355fc1,_0x14ac61)=>{const _0x5d728e=a0_0x37763d;_0x14ac61(null,Date[_0x5d728e(0x163)]()+_0x355fc1['originalname']);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x37763d(0x1a5),auth,uploadMigrate[a0_0x37763d(0x19a)](a0_0x37763d(0x13f)),async(_0x39265d,_0x1b2e10)=>{const _0x4f17db=a0_0x37763d,_0x4a15b0=_0x39265d['file'][_0x4f17db(0x1db)],_0x3537f0=await xlsx[_0x4f17db(0x1e5)](_0x4f17db(0x1e6)+_0x4a15b0);let _0x288e76=_0x3537f0[_0x4f17db(0x144)],_0x396501=xlsx[_0x4f17db(0x178)]['sheet_to_json'](_0x3537f0['Sheets'][_0x288e76[0x0]]);for(const _0x23f9e6 of _0x396501){const _0x5835de=_0x23f9e6[_0x4f17db(0x168)],_0x104e50=_0x23f9e6['Brands'],_0xb59c51=_0x23f9e6[_0x4f17db(0x1b4)],_0x58eb6c=_0x23f9e6['Secondary_Units'],_0x4bb291=_0x23f9e6['Product_Code'],_0x8098a4=_0x23f9e6[_0x4f17db(0x17d)],_0x35e3cc=_0x23f9e6['Alert_QTY'],_0xe5ed07=_0x23f9e6[_0x4f17db(0x1e7)],_0x4f38c9=_0x23f9e6[_0x4f17db(0x15a)],_0x21d7a7=_0x23f9e6[_0x4f17db(0x142)],_0x90f3e=_0x23f9e6[_0x4f17db(0x1b9)],_0x10565d=_0x23f9e6['Products_category'];try{let _0x7eca12=await categories[_0x4f17db(0x1d4)]({'name':_0x8098a4});if(!_0x7eca12){const _0x43b6ce=new categories({'name':_0x8098a4,'products':'0'});_0x7eca12=await _0x43b6ce[_0x4f17db(0x1c5)]();}let _0x944973=await brands[_0x4f17db(0x1d4)]({'name':_0x104e50});if(!_0x944973){const _0xc6a4c0=new brands({'name':_0x104e50,'products':'0'});_0x944973=await _0xc6a4c0[_0x4f17db(0x1c5)]();}let _0x4f8cbe=await units[_0x4f17db(0x1d4)]({'name':_0xb59c51,'secondary_unit':_0x58eb6c});if(!_0x4f8cbe){const _0x5ec31d=new units({'name':_0xb59c51,'secondary_unit':_0x58eb6c,'products':'0'});_0x4f8cbe=await _0x5ec31d[_0x4f17db(0x1c5)]();}const _0x2b52dc=await product[_0x4f17db(0x15c)]({'name':_0x5835de,'category':_0x7eca12[_0x4f17db(0x1e0)],'brand':_0x944973[_0x4f17db(0x1e0)],'secondary_unit':_0x4f8cbe[_0x4f17db(0x1a3)],'product_code':_0x4bb291});console[_0x4f17db(0x1a9)](_0x2b52dc[_0x4f17db(0x162)]+_0x4f17db(0x1ab)+_0x7eca12['name']+_0x4f17db(0x1ab)+_0x944973[_0x4f17db(0x1e0)]+_0x4f17db(0x1ab)+_0x4f8cbe[_0x4f17db(0x1a3)]+'\x20<>\x20'+_0x4bb291+_0x4f17db(0x1ab)+_0x5835de);if(_0x2b52dc['length']===0x0){const _0x5ce80a=new product({'image':'defaultProduct.avif','name':_0x5835de,'category':_0x7eca12[_0x4f17db(0x1e0)],'brand':_0x944973[_0x4f17db(0x1e0)],'unit':_0x4f8cbe['name'],'alertquantity':_0x35e3cc,'product_code':_0x4bb291,'secondary_unit':_0x4f8cbe['secondary_unit'],'primary_code':_0xe5ed07,'secondary_code':_0x4f38c9,'maxStocks':_0x21d7a7,'maxProdPerUnit':_0x90f3e,'product_category':_0x10565d}),_0x291bd4=await _0x5ce80a[_0x4f17db(0x1c5)]();_0x7eca12['products']=parseInt(_0x7eca12['products'])+0x1,await _0x7eca12[_0x4f17db(0x1c5)](),_0x944973[_0x4f17db(0x12a)]=parseInt(_0x944973[_0x4f17db(0x12a)])+0x1,await _0x944973[_0x4f17db(0x1c5)](),_0x4f8cbe[_0x4f17db(0x12a)]=parseInt(_0x4f8cbe['products'])+0x1,await _0x4f8cbe['save'](),_0x39265d[_0x4f17db(0x1bc)](_0x4f17db(0x1a2),_0x5835de+'\x20added\x20successfully');}else{console[_0x4f17db(0x1a9)](_0x2b52dc[0x0]);const _0x186414=_0x2b52dc[0x0];_0x186414[_0x4f17db(0x1be)]=_0x7eca12[_0x4f17db(0x1e0)],_0x186414['brand']=_0x944973[_0x4f17db(0x1e0)],_0x186414['unit']=_0x4f8cbe['name'],_0x186414[_0x4f17db(0x158)]=_0x35e3cc,_0x186414[_0x4f17db(0x187)]=_0x4bb291,_0x186414[_0x4f17db(0x1a3)]=_0x4f8cbe[_0x4f17db(0x1a3)],_0x186414[_0x4f17db(0x14d)]=_0xe5ed07,_0x186414[_0x4f17db(0x156)]=_0x4f38c9,_0x186414[_0x4f17db(0x19b)]=_0x21d7a7,_0x186414[_0x4f17db(0x157)]=_0x90f3e,_0x186414[_0x4f17db(0x18a)]=_0x10565d;const _0x4128ba=await _0x186414[_0x4f17db(0x1c5)]();_0x39265d[_0x4f17db(0x1bc)](_0x4f17db(0x1a2),_0x4128ba['name']+_0x4f17db(0x192));}}catch(_0x194698){_0x1b2e10[_0x4f17db(0x15d)](0x1f4)['json']({'proderror':_0x194698[_0x4f17db(0x16e)],'aproduct':_0x5835de});}}_0x1b2e10[_0x4f17db(0x17b)]('/products/view');}),router[a0_0x37763d(0x170)](a0_0x37763d(0x16a),auth,async(_0xb31328,_0x5019eb)=>{const _0x53bdc4=a0_0x37763d;try{console[_0x53bdc4(0x1a9)](_0xb31328[_0x53bdc4(0x169)]);const {data_cateory:_0x56828b,datachoose:_0x258425}=_0xb31328['body'];var _0x44ae24;if(_0x258425=='prod_categ')_0x44ae24=await product[_0x53bdc4(0x1cc)]([{'$group':{'_id':_0x53bdc4(0x12c)}}]);else{if(_0x258425==_0x53bdc4(0x15e))_0x44ae24=await product['aggregate']([{'$match':{'product_category':_0x56828b}},{'$group':{'_id':'$brand'}}]);else _0x258425=='categ'&&(_0x44ae24=await product['aggregate']([{'$match':{'product_category':_0x56828b}},{'$group':{'_id':_0x53bdc4(0x16c)}}]));}_0x5019eb[_0x53bdc4(0x18c)](_0x44ae24);}catch(_0x4bd591){_0x5019eb[_0x53bdc4(0x18c)]({'message':_0x4bd591['message']});}}),router['post']('/filter_product',auth,async(_0x5474ea,_0x5d217e)=>{const _0x11dc80=a0_0x37763d;try{const {data_choosing:_0x5cdb51,data_selected:_0x70f23c}=_0x5474ea[_0x11dc80(0x169)];var _0x2977df;if(_0x5cdb51=='prod_categ')_0x2977df=await product['aggregate']([{'$match':{'product_category':_0x70f23c}}]);else{if(_0x5cdb51=='brands')_0x2977df=await product[_0x11dc80(0x1cc)]([{'$match':{'brand':_0x70f23c}}]);else _0x5cdb51==_0x11dc80(0x1b8)&&(_0x2977df=await product['aggregate']([{'$match':{'category':_0x70f23c}}]));}_0x5d217e[_0x11dc80(0x18c)](_0x2977df);}catch(_0x4a7def){_0x5d217e['json']({'message':_0x4a7def['message']});}}),router['get'](a0_0x37763d(0x146),auth,async(_0x2e30d1,_0x325dbe)=>{const _0x1f8eca=a0_0x37763d,_0x2d7cf5=_0x2e30d1[_0x1f8eca(0x1a7)],_0x452e0b=await profile['findOne']({'email':_0x2d7cf5[_0x1f8eca(0x1e4)]}),_0x2d7ecb=await master_shop[_0x1f8eca(0x15c)](),_0x1a06e7=await product['find']();if(_0x2d7ecb[0x0][_0x1f8eca(0x159)]=='English\x20(US)')var _0xca62a9=users[_0x1f8eca(0x165)];else{if(_0x2d7ecb[0x0][_0x1f8eca(0x159)]=='Hindi')var _0xca62a9=users['Hindi'];else{if(_0x2d7ecb[0x0][_0x1f8eca(0x159)]==_0x1f8eca(0x1d8))var _0xca62a9=users[_0x1f8eca(0x1d8)];else{if(_0x2d7ecb[0x0]['language']==_0x1f8eca(0x16f))var _0xca62a9=users['Spanish'];else{if(_0x2d7ecb[0x0][_0x1f8eca(0x159)]==_0x1f8eca(0x155))var _0xca62a9=users[_0x1f8eca(0x155)];else{if(_0x2d7ecb[0x0][_0x1f8eca(0x159)]==_0x1f8eca(0x1cf))var _0xca62a9=users[_0x1f8eca(0x1dd)];else{if(_0x2d7ecb[0x0]['language']==_0x1f8eca(0x1c8))var _0xca62a9=users[_0x1f8eca(0x1c8)];else{if(_0x2d7ecb[0x0][_0x1f8eca(0x159)]=='Arabic\x20(ae)')var _0xca62a9=users['Arabic'];}}}}}}}_0x325dbe[_0x1f8eca(0x190)](_0x1f8eca(0x196),{'success':_0x2e30d1['flash'](_0x1f8eca(0x1a2)),'errors':_0x2e30d1[_0x1f8eca(0x1bc)](_0x1f8eca(0x132)),'role':_0x2d7cf5,'profile':_0x452e0b,'products':_0x1a06e7,'master_shop':_0x2d7ecb,'language':_0xca62a9});}),router[a0_0x37763d(0x170)](a0_0x37763d(0x1ad),auth,async(_0x68b0eb,_0x19c9ca)=>{const _0x60eb1d=a0_0x37763d,_0x27ee6d=await product[_0x60eb1d(0x15c)]();_0x19c9ca[_0x60eb1d(0x18c)]({'data':_0x27ee6d});}),router[a0_0x37763d(0x170)](a0_0x37763d(0x18d),auth,async(_0x3bd15c,_0x3fd336)=>{const _0x277c34=a0_0x37763d;try{const {dataProdCat:_0xccba8f,dataProdIdentity:_0xc2af60}=_0x3bd15c[_0x277c34(0x169)];var _0x1a06ac;switch(_0xccba8f){case'fg':switch(_0xc2af60){case'Brands':_0x1a06ac=await product['aggregate']([{'$match':{'product_category':_0x277c34(0x13e)}},{'$group':{'_id':_0x277c34(0x198)}},{'$project':{'brand':'$_id'}}]);break;case _0x277c34(0x17d):_0x1a06ac=await product[_0x277c34(0x1cc)]([{'$match':{'product_category':_0x277c34(0x13e)}},{'$group':{'_id':_0x277c34(0x16c)}},{'$project':{'category':_0x277c34(0x1b5)}}]);break;}break;case'rm':switch(_0xc2af60){case _0x277c34(0x153):_0x1a06ac=await product[_0x277c34(0x1cc)]([{'$match':{'product_category':_0x277c34(0x1ce)}},{'$group':{'_id':_0x277c34(0x198)}},{'$project':{'brand':'$_id'}}]);break;case _0x277c34(0x17d):_0x1a06ac=await product['aggregate']([{'$match':{'product_category':_0x277c34(0x1ce)}},{'$group':{'_id':_0x277c34(0x16c)}},{'$project':{'category':'$_id'}}]);break;}break;}_0x3fd336['json'](_0x1a06ac);}catch(_0x4c1ba1){_0x3fd336[_0x277c34(0x18c)]({'message':_0x4c1ba1[_0x277c34(0x16e)]});}}),router[a0_0x37763d(0x170)](a0_0x37763d(0x1d2),auth,async(_0x550a2e,_0x246048)=>{const _0x5098c5=a0_0x37763d;try{console[_0x5098c5(0x1a9)](_0x550a2e[_0x5098c5(0x169)]);const {prod_cat:_0x13013c,identity:_0x50d5af,valueData:_0x1d1623,typeofbarcode:_0x412f41}=_0x550a2e[_0x5098c5(0x169)];let _0x4643a9;switch(_0x13013c){case'fg':if(_0x50d5af==_0x5098c5(0x153))_0x4643a9=await product[_0x5098c5(0x1cc)]([{'$match':{'product_category':'Finished\x20Goods','brand':_0x1d1623}}]);else _0x50d5af==_0x5098c5(0x17d)&&(_0x4643a9=await product[_0x5098c5(0x1cc)]([{'$match':{'product_category':_0x5098c5(0x13e),'category':_0x1d1623}}]));break;case'rm':if(_0x50d5af=='Brands')_0x4643a9=await product[_0x5098c5(0x1cc)]([{'$match':{'product_category':'Raw\x20Materials','brand':_0x1d1623}}]);else _0x50d5af==_0x5098c5(0x17d)&&(_0x4643a9=await product['aggregate']([{'$match':{'product_category':_0x5098c5(0x1ce),'category':_0x1d1623}}]));break;}const _0x5530b5=_0x5f2109=>_0x5f2109*0x48,_0x21db61={'width':0x3,'height':0x1},_0x18c4f4=new PDFDocument({'margin':_0x5530b5(0.75),'size':[_0x5530b5(_0x21db61[_0x5098c5(0x1cd)]),_0x5530b5(_0x21db61[_0x5098c5(0x140)])],'bufferPages':!![]}),_0x39104e=_0x4643a9['length'];for(let _0x6b118c=0x0;_0x6b118c<=_0x39104e;_0x6b118c++){if(_0x6b118c!=_0x39104e){const _0x4bc062=_0x4643a9[_0x6b118c]['name'],_0x57344e=_0x4643a9[_0x6b118c]['primary_code'],_0x599392=_0x4643a9[_0x6b118c][_0x5098c5(0x156)],_0x89c19c=_0x4643a9[_0x6b118c][_0x5098c5(0x187)];var _0x3a10ca;switch(_0x412f41){case'1':_0x3a10ca=_0x57344e;break;case'2':_0x3a10ca=_0x599392;break;case'3':_0x3a10ca=_0x89c19c;break;}const _0x1f23a1={'width':0xd2,'height':0x64},_0x59f830={'width':_0x5530b5(_0x21db61['width']),'height':_0x5530b5(_0x21db61['height'])},_0x3a550a=new Canvas();JsBarcode(_0x3a550a,_0x3a10ca,{'format':_0x5098c5(0x150),'height':_0x1f23a1['height'],'displayValue':!![],'text':_0x3a10ca});const _0x224144=_0x3a550a[_0x5098c5(0x137)](),_0x152a73=_0x59f830[_0x5098c5(0x1cd)]/_0x1f23a1[_0x5098c5(0x1cd)],_0x4bfa56=_0x59f830[_0x5098c5(0x140)]/_0x1f23a1['height'],_0x2b684a=Math['min'](_0x152a73,_0x4bfa56),_0x582e8a=_0x1f23a1[_0x5098c5(0x1cd)]*_0x2b684a,_0x4f47e3=_0x1f23a1['height']*_0x2b684a,_0x54df5d=(_0x59f830['width']-_0x582e8a)/0x2,_0x2257a5=(_0x59f830[_0x5098c5(0x140)]-_0x4f47e3)/0x2;_0x18c4f4['image'](_0x224144,_0x54df5d,_0x2257a5,{'width':_0x582e8a,'height':_0x4f47e3}),_0x6b118c!=_0x39104e&&_0x18c4f4[_0x5098c5(0x1c2)]();}}const _0x4210f5=[];_0x18c4f4['on']('data',_0x4210f5[_0x5098c5(0x14c)][_0x5098c5(0x199)](_0x4210f5)),_0x18c4f4['on']('end',()=>{const _0x5e6e97=_0x5098c5,_0x13df87=Buffer[_0x5e6e97(0x1c6)](_0x4210f5),_0x24a2e5=_0x13df87[_0x5e6e97(0x16d)](_0x5e6e97(0x186));_0x246048[_0x5e6e97(0x18c)]({'pdfContent':_0x24a2e5});}),_0x18c4f4[_0x5098c5(0x1b6)]();}catch(_0x43bf17){_0x246048[_0x5098c5(0x18c)]({'message':_0x43bf17[_0x5098c5(0x16e)]});}}),router[a0_0x37763d(0x170)](a0_0x37763d(0x175),auth,async(_0x53e8fd,_0x1c6b9a)=>{const _0x10de03=a0_0x37763d;try{console[_0x10de03(0x1a9)](_0x53e8fd['body']);const {prod_cat:_0x18e4b1,identity:_0x48c9af,valueData:_0x2bd4f5}=_0x53e8fd[_0x10de03(0x169)];let _0x51f2a2;switch(_0x18e4b1){case'fg':if(_0x48c9af==_0x10de03(0x153))_0x51f2a2=await product[_0x10de03(0x1cc)]([{'$match':{'product_category':_0x10de03(0x13e),'brand':_0x2bd4f5}}]);else _0x48c9af==_0x10de03(0x17d)&&(_0x51f2a2=await product[_0x10de03(0x1cc)]([{'$match':{'product_category':_0x10de03(0x13e),'category':_0x2bd4f5}}]));break;case'rm':if(_0x48c9af=='Brands')_0x51f2a2=await product[_0x10de03(0x1cc)]([{'$match':{'product_category':_0x10de03(0x1ce),'brand':_0x2bd4f5}}]);else _0x48c9af==_0x10de03(0x17d)&&(_0x51f2a2=await product[_0x10de03(0x1cc)]([{'$match':{'product_category':_0x10de03(0x1ce),'category':_0x2bd4f5}}]));break;}_0x1c6b9a[_0x10de03(0x18c)]({'data':_0x51f2a2});}catch(_0x40c7f4){_0x1c6b9a['json']({'message':_0x40c7f4['message']});}}),router['post'](a0_0x37763d(0x139),auth,async(_0x4b266f,_0x3d09ba)=>{const _0x3970fb=a0_0x37763d;try{const _0x3a11c6=_0x4b266f[_0x3970fb(0x1ac)]['id'],{copies:_0x153eac,typeofbarcode:_0x5a6cd8}=_0x4b266f[_0x3970fb(0x169)];var _0x369418=await product[_0x3970fb(0x180)](_0x3a11c6);const _0x2686c9=_0x3a4f52=>_0x3a4f52*0x48,_0xd7294c={'width':0x3,'height':0x1},_0x288306=new PDFDocument({'margin':_0x2686c9(0.75),'size':[_0x2686c9(_0xd7294c['width']),_0x2686c9(_0xd7294c['height'])],'bufferPages':!![]}),_0x48d157=_0x153eac,_0x367405=_0x369418[_0x3970fb(0x1e0)],_0x448cd1=_0x369418[_0x3970fb(0x14d)],_0xd591=_0x369418[_0x3970fb(0x156)],_0x36fb04=_0x369418[_0x3970fb(0x187)];let _0x279e94;switch(_0x5a6cd8){case'1':_0x279e94=_0x448cd1;break;case'2':_0x279e94=_0xd591;break;case'3':_0x279e94=_0x36fb04;break;}const _0x33edf9={'width':0xd2,'height':0x64},_0x362ad2={'width':_0x2686c9(_0xd7294c['width']),'height':_0x2686c9(_0xd7294c[_0x3970fb(0x140)])};for(let _0x31d0bc=0x1;_0x31d0bc<=_0x48d157;_0x31d0bc++){const _0x53bd1a=new Canvas();JsBarcode(_0x53bd1a,_0x279e94,{'format':'CODE128','height':_0x33edf9['height'],'displayValue':!![],'text':_0x279e94});const _0x939389=_0x53bd1a['toBuffer'](),_0x30628a=_0x362ad2[_0x3970fb(0x1cd)]/_0x33edf9[_0x3970fb(0x1cd)],_0x24e508=_0x362ad2[_0x3970fb(0x140)]/_0x33edf9[_0x3970fb(0x140)],_0x5c16fc=Math['min'](_0x30628a,_0x24e508),_0x187e87=_0x33edf9[_0x3970fb(0x1cd)]*_0x5c16fc,_0x114091=_0x33edf9[_0x3970fb(0x140)]*_0x5c16fc,_0x5423f9=(_0x362ad2[_0x3970fb(0x1cd)]-_0x187e87)/0x2,_0x4e86e5=(_0x362ad2[_0x3970fb(0x140)]-_0x114091)/0x2;_0x288306['image'](_0x939389,_0x5423f9,_0x4e86e5,{'width':_0x187e87,'height':_0x114091}),_0x31d0bc!=_0x48d157&&_0x288306[_0x3970fb(0x1c2)]();}const _0x558b6a=[];_0x288306['on'](_0x3970fb(0x134),_0x558b6a['push']['bind'](_0x558b6a)),_0x288306['on'](_0x3970fb(0x1b6),()=>{const _0x16aae2=_0x3970fb,_0x442a49=Buffer[_0x16aae2(0x1c6)](_0x558b6a),_0xdb9487=_0x442a49[_0x16aae2(0x16d)](_0x16aae2(0x186));_0x3d09ba[_0x16aae2(0x18c)]({'pdfContent':_0xdb9487});}),_0x288306['end']();}catch(_0x20c417){_0x3d09ba[_0x3970fb(0x18c)]({'message':_0x20c417[_0x3970fb(0x16e)]});}}),module[a0_0x37763d(0x1e1)]=router;