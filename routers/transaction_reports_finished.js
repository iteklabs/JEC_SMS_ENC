var a0_0x58e90e=a0_0x503e;(function(_0x3d6bda,_0x4ddd6b){var _0x502729=a0_0x503e,_0x21a2c5=_0x3d6bda();while(!![]){try{var _0x5d56bb=-parseInt(_0x502729(0x1b7))/0x1*(parseInt(_0x502729(0x1b9))/0x2)+-parseInt(_0x502729(0x196))/0x3+-parseInt(_0x502729(0x1b3))/0x4+-parseInt(_0x502729(0x1d8))/0x5*(-parseInt(_0x502729(0x171))/0x6)+-parseInt(_0x502729(0x19c))/0x7+-parseInt(_0x502729(0x1b4))/0x8*(-parseInt(_0x502729(0x177))/0x9)+-parseInt(_0x502729(0x18a))/0xa*(-parseInt(_0x502729(0x174))/0xb);if(_0x5d56bb===_0x4ddd6b)break;else _0x21a2c5['push'](_0x21a2c5['shift']());}catch(_0x345fbb){_0x21a2c5['push'](_0x21a2c5['shift']());}}}(a0_0xf64f,0xe5ebf));function a0_0x503e(_0x36cb4e,_0x335e12){var _0xf64f09=a0_0xf64f();return a0_0x503e=function(_0x503eac,_0x3f1d91){_0x503eac=_0x503eac-0x16e;var _0x2e5bec=_0xf64f09[_0x503eac];return _0x2e5bec;},a0_0x503e(_0x36cb4e,_0x335e12);}const express=require(a0_0x58e90e(0x1d3)),app=express(),router=express[a0_0x58e90e(0x1d4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x58e90e(0x185)),auth=require(a0_0x58e90e(0x1c4)),users=require(a0_0x58e90e(0x19b)),nodemailer=require(a0_0x58e90e(0x1c3));function a0_0xf64f(){var _0x359dd0=['$sale_product.invoice','$sale_product.id_transaction_from','96052XMxafg','$sale_product','/viewdata_tf_fg/:id','15597YvzUrC','/viewdata_og_fg/:id','errors','findById','$product_details._id','$product','$date','$product.expiry_date','Spanish','data_sales','data_adjustment','/viewFG','Portuguese','invoice','../models/all_models','$product.to_room_name','$product_details.production_date','English\x20(US)','success','1780aoNTpj','$sale_product.production_date','$product.product_name','Chinese','Arabic','valueOf','Hindi','$sale_product._id','$product.production_date','user','$product._id','$product.room_names','2158557KANbou','/reports','flash','$sale_product.quantity','Arabic\x20(ae)','../public/language/languages.json','4592735QSXiyM','$product.id_transaction_from','params','aggregate','push','Portuguese\x20(BR)','transaction_finished_raw','warehouses','all','/view','transaction_finished','$sale_product.product_name','json','$product_details.product_name','exports','German','$product_details.expiry_date','$to_warehouse','$product.new_adjust_qty','$product_details','$product.unit','$product_details.unit','post','3636112zmmduw','2088CsyOaq','Raw\x20Materials','$invoice','28463oKZlXA','$product.id_transaction','2agqIOs','_id','data_transfer','$sale_product.expiry_date','$product.id_transaction_id','$product.product_code','$sale_product.unit','body','English','length','nodemailer','../middleware/auth','$product.to_quantity','$product_details.invoice','Enabled','$sale_product.product_code','$product_details.product_stock','language','findOne','render','$$invoice','view_tf_table','French','view_og_table','$product_details.product_code','warehouse_data','express','Router','get','$warehouse_name','email','1248265iEGvib','map','$product.invoice','find','$room','log','$sale_product.room_name','$name','30dtTHSD'];a0_0xf64f=function(){return _0x359dd0;};return a0_0xf64f();}router[a0_0x58e90e(0x1d5)](a0_0x58e90e(0x1a5),auth,async(_0x16fe17,_0x515245)=>{var _0x214177=a0_0x58e90e;try{const {username:_0x4016b4,email:_0x2cd828,role:_0x289ba5}=_0x16fe17[_0x214177(0x193)],_0x1a3d53=_0x16fe17[_0x214177(0x193)],_0x455719=await profile[_0x214177(0x1cb)]({'email':_0x1a3d53[_0x214177(0x1d7)]}),_0x57a80a=await master_shop['find'](),_0x183cd6=await warehouse[_0x214177(0x19f)]([{'$match':{'status':'Enabled','warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);if(_0x57a80a[0x0][_0x214177(0x1ca)]==_0x214177(0x188))var _0x34e46f=users['English'];else{if(_0x57a80a[0x0][_0x214177(0x1ca)]==_0x214177(0x190))var _0x34e46f=users['Hindi'];else{if(_0x57a80a[0x0]['language']=='German')var _0x34e46f=users[_0x214177(0x1ab)];else{if(_0x57a80a[0x0][_0x214177(0x1ca)]==_0x214177(0x17f))var _0x34e46f=users[_0x214177(0x17f)];else{if(_0x57a80a[0x0]['language']=='French')var _0x34e46f=users[_0x214177(0x1cf)];else{if(_0x57a80a[0x0][_0x214177(0x1ca)]==_0x214177(0x1a1))var _0x34e46f=users[_0x214177(0x183)];else{if(_0x57a80a[0x0][_0x214177(0x1ca)]=='Chinese')var _0x34e46f=users[_0x214177(0x18d)];else{if(_0x57a80a[0x0][_0x214177(0x1ca)]==_0x214177(0x19a))var _0x34e46f=users['Arabic'];}}}}}}}_0x515245[_0x214177(0x1cc)](_0x214177(0x1a6),{'success':_0x16fe17[_0x214177(0x198)](_0x214177(0x189)),'errors':_0x16fe17[_0x214177(0x198)]('errors'),'role':_0x1a3d53,'profile':_0x455719,'master_shop':_0x57a80a,'dataProcess':_0x183cd6,'language':_0x34e46f});}catch(_0x553f76){console[_0x214177(0x16e)](_0x553f76);}}),router[a0_0x58e90e(0x1b2)](a0_0x58e90e(0x197),auth,async(_0x52533a,_0x1138b0)=>{var _0xae078d=a0_0x58e90e;const {product_category:_0x1b83ce,transaction_category:_0xa6e699,transaction_date_from:_0x204eef,transaction_date_to:_0x1f11ec,warehouse_category:_0x52f7e9,item_code:_0x64949a}=_0x52533a[_0xae078d(0x1c0)];console[_0xae078d(0x16e)](_0x52f7e9);if(_0x1b83ce=='rm'){if(_0x52f7e9==_0xae078d(0x1a4)){var _0x24f895=await purchases[_0xae078d(0x19f)]([{'$match':{'date':{'$gte':_0x204eef,'$lte':_0x1f11ec}}},{'$lookup':{'from':_0xae078d(0x1a3),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0xae078d(0x1cd),_0xae078d(0x1c6)]}}},{'$project':{'_id':'$product_details._id','product_name':_0xae078d(0x1a9),'product_code':_0xae078d(0x1d1),'quantity_available':_0xae078d(0x1c9),'warehouse_name':'$name','warehouse_room':_0xae078d(0x1dc),'invoice':_0xae078d(0x1c6),'production_date':_0xae078d(0x187),'expiry_date':_0xae078d(0x1ac),'UOM':_0xae078d(0x1b1)}}],'as':_0xae078d(0x1d2)}}]);_0x24f895[_0xae078d(0x180)]={},await Promise[_0xae078d(0x1a4)](_0x24f895[_0xae078d(0x1d9)](async _0x5e0cfc=>{var _0x5b7e6a=_0xae078d;_0x24f895[_0x5b7e6a(0x180)][_0x5e0cfc[_0x5b7e6a(0x184)]]=[],await Promise[_0x5b7e6a(0x1a4)](_0x5e0cfc[_0x5b7e6a(0x1d2)][_0x5b7e6a(0x1d9)](async _0x1fb51c=>{var _0x349ab8=_0x5b7e6a;const _0x3a1bc1=await sales[_0x349ab8(0x19f)]([{'$unwind':_0x349ab8(0x175)},{'$match':{'sale_product.id_transaction_from':_0x1fb51c[_0x349ab8(0x1ba)][_0x349ab8(0x18f)](),'sale_product.invoice':_0x1fb51c[_0x349ab8(0x184)]}},{'$project':{'_id':_0x349ab8(0x191),'product_name':_0x349ab8(0x1a7),'product_code':_0x349ab8(0x1c8),'quantity_available':_0x349ab8(0x199),'warehouse_name':_0x349ab8(0x1d6),'warehouse_room':'$sale_product.room_name','product_invoice':'$sale_product.invoice','invoice':_0x349ab8(0x1b6),'id_transaction_from':_0x349ab8(0x173),'date':_0x349ab8(0x17d),'production_date':_0x349ab8(0x18b),'expiry_date':'$sale_product.expiry_date','UOM':_0x349ab8(0x1bf)}}]);_0x3a1bc1[_0x349ab8(0x1c2)]>0x0&&_0x24f895[_0x349ab8(0x180)][_0x5e0cfc[_0x349ab8(0x184)]][_0x349ab8(0x1a0)](..._0x3a1bc1);}));})),_0x24f895['data_sales']=_0x24f895[_0xae078d(0x180)],_0x24f895[_0xae078d(0x181)]={},await Promise[_0xae078d(0x1a4)](_0x24f895[_0xae078d(0x1d9)](async _0x1b62b5=>{var _0x44d28f=_0xae078d;_0x24f895[_0x44d28f(0x181)][_0x1b62b5[_0x44d28f(0x184)]]=[],await Promise[_0x44d28f(0x1a4)](_0x1b62b5[_0x44d28f(0x1d2)][_0x44d28f(0x1d9)](async _0x162887=>{var _0x37552a=_0x44d28f;const _0x2449a2=await adjustment['aggregate']([{'$unwind':_0x37552a(0x17c)},{'$match':{'product.id_transaction_from':_0x162887[_0x37552a(0x1ba)]['valueOf'](),'product.invoice':_0x162887[_0x37552a(0x184)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0x37552a(0x1be),'quantity_available':_0x37552a(0x1ae),'warehouse_name':_0x37552a(0x1d6),'warehouse_room':'$product.room_names','product_invoice':_0x37552a(0x1da),'invoice':_0x37552a(0x1b6),'id_transaction_from':_0x37552a(0x19d),'date':'$date','production_date':_0x37552a(0x192),'expiry_date':_0x37552a(0x17e),'UOM':_0x37552a(0x1b0)}}]);_0x2449a2[_0x37552a(0x1c2)]>0x0&&_0x24f895[_0x37552a(0x181)][_0x1b62b5[_0x37552a(0x184)]][_0x37552a(0x1a0)](..._0x2449a2);}));})),_0x24f895['data_transfer']={},await Promise[_0xae078d(0x1a4)](_0x24f895['map'](async _0x18e13f=>{var _0x5d98a3=_0xae078d;_0x24f895['data_transfer'][_0x18e13f[_0x5d98a3(0x184)]]=[],await Promise['all'](_0x18e13f['warehouse_data'][_0x5d98a3(0x1d9)](async _0x289e4b=>{var _0x500219=_0x5d98a3;const _0x2b96fe=await transfers[_0x500219(0x19f)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x289e4b[_0x500219(0x1ba)][_0x500219(0x18f)](),'product.To_invoice':_0x289e4b[_0x500219(0x184)]}},{'$project':{'_id':_0x500219(0x194),'product_name':_0x500219(0x18c),'product_code':'$product.product_code','quantity_available':'$product.to_quantity','warehouse_name':_0x500219(0x1ad),'warehouse_room':_0x500219(0x195),'product_invoice':'$product.to_room_name','invoice':_0x500219(0x1b6),'id_transaction_from':'$product.id_transaction_id','date':_0x500219(0x17d),'production_date':'$product.production_date','expiry_date':'$product.expiry_date','UOM':_0x500219(0x1b0)}}]);_0x2b96fe[_0x500219(0x1c2)]>0x0&&_0x24f895[_0x500219(0x1bb)][_0x18e13f[_0x500219(0x184)]]['push'](..._0x2b96fe);}));})),_0x1138b0[_0xae078d(0x1a8)]({'purchases_warehouse':_0x24f895,'data_sales':_0x24f895['data_sales'],'data_adjustment':_0x24f895[_0xae078d(0x181)],'data_transfer':_0x24f895[_0xae078d(0x1bb)]});}else{var _0x24f895=await purchases[_0xae078d(0x19f)]([{'$match':{'warehouse_name':_0x52f7e9,'date':{'$gte':_0x204eef,'$lte':_0x1f11ec}}},{'$lookup':{'from':'warehouses','let':{'invoice':_0xae078d(0x1b6)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':['$$invoice','$product_details.invoice']}}},{'$project':{'_id':_0xae078d(0x17b),'product_name':_0xae078d(0x1a9),'product_code':'$product_details.product_code','quantity_available':_0xae078d(0x1c9),'warehouse_name':_0xae078d(0x170),'warehouse_room':_0xae078d(0x1dc),'invoice':_0xae078d(0x1c6),'production_date':_0xae078d(0x187),'expiry_date':_0xae078d(0x1ac),'UOM':_0xae078d(0x1b1)}}],'as':_0xae078d(0x1d2)}}]);_0x24f895[_0xae078d(0x180)]={},await Promise[_0xae078d(0x1a4)](_0x24f895['map'](async _0x6887cf=>{var _0x349061=_0xae078d;_0x24f895[_0x349061(0x180)][_0x6887cf[_0x349061(0x184)]]=[],await Promise[_0x349061(0x1a4)](_0x6887cf[_0x349061(0x1d2)][_0x349061(0x1d9)](async _0x1c8dc8=>{var _0x89b97a=_0x349061;const _0xd39cec=await sales[_0x89b97a(0x19f)]([{'$unwind':_0x89b97a(0x175)},{'$match':{'sale_product.id_transaction_from':_0x1c8dc8[_0x89b97a(0x1ba)]['valueOf'](),'sale_product.invoice':_0x1c8dc8[_0x89b97a(0x184)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x89b97a(0x1a7),'product_code':'$sale_product.product_code','quantity_available':'$sale_product.quantity','warehouse_name':_0x89b97a(0x1d6),'warehouse_room':_0x89b97a(0x16f),'product_invoice':_0x89b97a(0x172),'invoice':_0x89b97a(0x1b6),'id_transaction_from':_0x89b97a(0x173),'date':_0x89b97a(0x17d),'production_date':_0x89b97a(0x18b),'expiry_date':_0x89b97a(0x1bc),'UOM':_0x89b97a(0x1bf)}}]);_0xd39cec[_0x89b97a(0x1c2)]>0x0&&_0x24f895['data_sales'][_0x6887cf[_0x89b97a(0x184)]][_0x89b97a(0x1a0)](..._0xd39cec);}));})),_0x24f895[_0xae078d(0x180)]=_0x24f895[_0xae078d(0x180)],_0x24f895[_0xae078d(0x181)]={},await Promise[_0xae078d(0x1a4)](_0x24f895['map'](async _0x396fe9=>{var _0x36a86e=_0xae078d;_0x24f895['data_adjustment'][_0x396fe9[_0x36a86e(0x184)]]=[],await Promise[_0x36a86e(0x1a4)](_0x396fe9['warehouse_data'][_0x36a86e(0x1d9)](async _0x423e5e=>{var _0x15a801=_0x36a86e;const _0x1faa5b=await adjustment[_0x15a801(0x19f)]([{'$unwind':_0x15a801(0x17c)},{'$match':{'product.id_transaction_from':_0x423e5e[_0x15a801(0x1ba)][_0x15a801(0x18f)](),'product.invoice':_0x423e5e[_0x15a801(0x184)]}},{'$project':{'_id':_0x15a801(0x194),'product_name':_0x15a801(0x18c),'product_code':_0x15a801(0x1be),'quantity_available':_0x15a801(0x1ae),'warehouse_name':_0x15a801(0x1d6),'warehouse_room':_0x15a801(0x195),'product_invoice':_0x15a801(0x1da),'invoice':_0x15a801(0x1b6),'id_transaction_from':_0x15a801(0x19d),'date':_0x15a801(0x17d),'production_date':_0x15a801(0x192),'expiry_date':_0x15a801(0x17e),'UOM':_0x15a801(0x1b0)}}]);_0x1faa5b[_0x15a801(0x1c2)]>0x0&&_0x24f895[_0x15a801(0x181)][_0x396fe9['invoice']][_0x15a801(0x1a0)](..._0x1faa5b);}));})),_0x24f895[_0xae078d(0x1bb)]={},await Promise[_0xae078d(0x1a4)](_0x24f895[_0xae078d(0x1d9)](async _0x32ffcd=>{var _0x2996dc=_0xae078d;_0x24f895['data_transfer'][_0x32ffcd[_0x2996dc(0x184)]]=[],await Promise[_0x2996dc(0x1a4)](_0x32ffcd['warehouse_data']['map'](async _0x21cb36=>{var _0x459b89=_0x2996dc;const _0x5b7fbd=await transfers[_0x459b89(0x19f)]([{'$unwind':_0x459b89(0x17c)},{'$match':{'product.id_transaction_id':_0x21cb36['_id'][_0x459b89(0x18f)](),'product.To_invoice':_0x21cb36['invoice']}},{'$project':{'_id':_0x459b89(0x194),'product_name':_0x459b89(0x18c),'product_code':'$product.product_code','quantity_available':'$product.to_quantity','warehouse_name':_0x459b89(0x1ad),'warehouse_room':_0x459b89(0x195),'product_invoice':'$product.to_room_name','invoice':_0x459b89(0x1b6),'id_transaction_from':_0x459b89(0x1bd),'date':_0x459b89(0x17d),'production_date':'$product.production_date','expiry_date':_0x459b89(0x17e),'UOM':_0x459b89(0x1b0)}}]);_0x5b7fbd[_0x459b89(0x1c2)]>0x0&&_0x24f895['data_transfer'][_0x32ffcd[_0x459b89(0x184)]][_0x459b89(0x1a0)](..._0x5b7fbd);}));})),_0x1138b0[_0xae078d(0x1a8)]({'purchases_warehouse':_0x24f895,'data_sales':_0x24f895[_0xae078d(0x180)],'data_adjustment':_0x24f895[_0xae078d(0x181)],'data_transfer':_0x24f895[_0xae078d(0x1bb)]});}}else{if(_0x52f7e9==_0xae078d(0x1a4)){var _0x24f895=await purchases_finished[_0xae078d(0x19f)]([{'$match':{'date':{'$gte':_0x204eef,'$lte':_0x1f11ec}}},{'$lookup':{'from':'warehouses','let':{'invoice':_0xae078d(0x1b6)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':['$$invoice',_0xae078d(0x1c6)]}}},{'$project':{'_id':_0xae078d(0x17b),'product_name':'$product_details.product_name','product_code':'$product_details.product_code','quantity_available':_0xae078d(0x1c9),'warehouse_name':_0xae078d(0x170),'warehouse_room':'$room','invoice':_0xae078d(0x1c6),'production_date':_0xae078d(0x187),'expiry_date':_0xae078d(0x1ac),'UOM':_0xae078d(0x1b1)}}],'as':_0xae078d(0x1d2)}}]);_0x24f895[_0xae078d(0x180)]={},await Promise[_0xae078d(0x1a4)](_0x24f895[_0xae078d(0x1d9)](async _0x498d07=>{var _0x330e2d=_0xae078d;_0x24f895['data_sales'][_0x498d07['invoice']]=[],await Promise[_0x330e2d(0x1a4)](_0x498d07[_0x330e2d(0x1d2)][_0x330e2d(0x1d9)](async _0x13183a=>{var _0x13292c=_0x330e2d;const _0xa13ac7=await sales_finished[_0x13292c(0x19f)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x13183a[_0x13292c(0x1ba)][_0x13292c(0x18f)](),'sale_product.invoice':_0x13183a[_0x13292c(0x184)]}},{'$project':{'_id':_0x13292c(0x191),'product_name':'$sale_product.product_name','product_code':'$sale_product.product_code','quantity_available':'$sale_product.quantity','warehouse_name':_0x13292c(0x1d6),'warehouse_room':_0x13292c(0x16f),'product_invoice':_0x13292c(0x172),'invoice':_0x13292c(0x1b6),'id_transaction_from':_0x13292c(0x173),'date':'$date','production_date':_0x13292c(0x18b),'expiry_date':_0x13292c(0x1bc),'UOM':'$sale_product.unit'}}]);_0xa13ac7[_0x13292c(0x1c2)]>0x0&&_0x24f895[_0x13292c(0x180)][_0x498d07[_0x13292c(0x184)]]['push'](..._0xa13ac7);}));})),_0x24f895[_0xae078d(0x180)]=_0x24f895['data_sales'],_0x24f895[_0xae078d(0x181)]={},await Promise['all'](_0x24f895[_0xae078d(0x1d9)](async _0x4a15d0=>{var _0x4af981=_0xae078d;_0x24f895[_0x4af981(0x181)][_0x4a15d0[_0x4af981(0x184)]]=[],await Promise[_0x4af981(0x1a4)](_0x4a15d0[_0x4af981(0x1d2)][_0x4af981(0x1d9)](async _0xa8b66e=>{var _0x599e22=_0x4af981;const _0x264315=await adjustment_finished['aggregate']([{'$unwind':_0x599e22(0x17c)},{'$match':{'product.id_transaction_from':_0xa8b66e['_id'][_0x599e22(0x18f)](),'product.invoice':_0xa8b66e[_0x599e22(0x184)]}},{'$project':{'_id':_0x599e22(0x194),'product_name':_0x599e22(0x18c),'product_code':_0x599e22(0x1be),'quantity_available':_0x599e22(0x1ae),'warehouse_name':_0x599e22(0x1d6),'warehouse_room':_0x599e22(0x195),'product_invoice':_0x599e22(0x1da),'invoice':_0x599e22(0x1b6),'id_transaction_from':_0x599e22(0x19d),'date':_0x599e22(0x17d),'production_date':_0x599e22(0x192),'expiry_date':_0x599e22(0x17e),'UOM':_0x599e22(0x1b0)}}]);_0x264315[_0x599e22(0x1c2)]>0x0&&_0x24f895['data_adjustment'][_0x4a15d0['invoice']][_0x599e22(0x1a0)](..._0x264315);}));})),_0x24f895[_0xae078d(0x1bb)]={},await Promise[_0xae078d(0x1a4)](_0x24f895[_0xae078d(0x1d9)](async _0xf27eb9=>{var _0x513b8f=_0xae078d;_0x24f895[_0x513b8f(0x1bb)][_0xf27eb9[_0x513b8f(0x184)]]=[],await Promise[_0x513b8f(0x1a4)](_0xf27eb9[_0x513b8f(0x1d2)]['map'](async _0x26e7af=>{var _0x18226a=_0x513b8f;const _0x2341bc=await transfers_finished[_0x18226a(0x19f)]([{'$unwind':_0x18226a(0x17c)},{'$match':{'product.id_transaction':_0x26e7af[_0x18226a(0x1ba)]['valueOf'](),'product.from_invoice':_0x26e7af[_0x18226a(0x184)]}},{'$project':{'_id':_0x18226a(0x194),'product_name':'$product.product_name','product_code':_0x18226a(0x1be),'quantity_available':_0x18226a(0x1c5),'warehouse_name':'$to_warehouse','warehouse_room':'$product.room_names','product_invoice':_0x18226a(0x186),'invoice':_0x18226a(0x1b6),'id_transaction_from':'$product.id_transaction','date':_0x18226a(0x17d),'production_date':_0x18226a(0x192),'expiry_date':_0x18226a(0x17e),'UOM':_0x18226a(0x1b0)}}]);_0x2341bc[_0x18226a(0x1c2)]>0x0&&_0x24f895[_0x18226a(0x1bb)][_0xf27eb9['invoice']][_0x18226a(0x1a0)](..._0x2341bc);}));})),_0x1138b0[_0xae078d(0x1a8)]({'purchases_warehouse':_0x24f895,'data_sales':_0x24f895[_0xae078d(0x180)],'data_adjustment':_0x24f895[_0xae078d(0x181)],'data_transfer':_0x24f895['data_transfer']});}else{var _0x24f895=await purchases_finished[_0xae078d(0x19f)]([{'$match':{'warehouse_name':_0x52f7e9,'date':{'$gte':_0x204eef,'$lte':_0x1f11ec}}},{'$lookup':{'from':_0xae078d(0x1a3),'let':{'invoice':_0xae078d(0x1b6)},'pipeline':[{'$unwind':_0xae078d(0x1af)},{'$match':{'$expr':{'$eq':['$$invoice',_0xae078d(0x1c6)]}}},{'$project':{'_id':_0xae078d(0x17b),'product_name':'$product_details.product_name','product_code':_0xae078d(0x1d1),'quantity_available':_0xae078d(0x1c9),'warehouse_name':_0xae078d(0x170),'warehouse_room':_0xae078d(0x1dc),'invoice':_0xae078d(0x1c6),'production_date':_0xae078d(0x187),'expiry_date':_0xae078d(0x1ac),'UOM':_0xae078d(0x1b1)}}],'as':'warehouse_data'}}]);_0x24f895['data_sales']={},await Promise[_0xae078d(0x1a4)](_0x24f895[_0xae078d(0x1d9)](async _0x30d34f=>{var _0x15eccf=_0xae078d;_0x24f895['data_sales'][_0x30d34f[_0x15eccf(0x184)]]=[],await Promise[_0x15eccf(0x1a4)](_0x30d34f[_0x15eccf(0x1d2)][_0x15eccf(0x1d9)](async _0x47d4b5=>{var _0x1a523c=_0x15eccf;const _0x4de83a=await sales_finished[_0x1a523c(0x19f)]([{'$unwind':_0x1a523c(0x175)},{'$match':{'sale_product.id_transaction_from':_0x47d4b5[_0x1a523c(0x1ba)]['valueOf'](),'sale_product.invoice':_0x47d4b5[_0x1a523c(0x184)]}},{'$project':{'_id':_0x1a523c(0x191),'product_name':_0x1a523c(0x1a7),'product_code':_0x1a523c(0x1c8),'quantity_available':_0x1a523c(0x199),'warehouse_name':_0x1a523c(0x1d6),'warehouse_room':_0x1a523c(0x16f),'product_invoice':'$sale_product.invoice','invoice':_0x1a523c(0x1b6),'id_transaction_from':_0x1a523c(0x173),'date':_0x1a523c(0x17d),'production_date':_0x1a523c(0x18b),'expiry_date':_0x1a523c(0x1bc),'UOM':_0x1a523c(0x1bf)}}]);_0x4de83a[_0x1a523c(0x1c2)]>0x0&&_0x24f895[_0x1a523c(0x180)][_0x30d34f['invoice']]['push'](..._0x4de83a);}));})),_0x24f895[_0xae078d(0x180)]=_0x24f895[_0xae078d(0x180)],_0x24f895[_0xae078d(0x181)]={},await Promise[_0xae078d(0x1a4)](_0x24f895['map'](async _0x2eb501=>{var _0x5cb847=_0xae078d;_0x24f895['data_adjustment'][_0x2eb501[_0x5cb847(0x184)]]=[],await Promise[_0x5cb847(0x1a4)](_0x2eb501[_0x5cb847(0x1d2)][_0x5cb847(0x1d9)](async _0x317afa=>{var _0x9c5db5=_0x5cb847;const _0x2203ed=await adjustment_finished[_0x9c5db5(0x19f)]([{'$unwind':_0x9c5db5(0x17c)},{'$match':{'product.id_transaction_from':_0x317afa[_0x9c5db5(0x1ba)][_0x9c5db5(0x18f)](),'product.invoice':_0x317afa['invoice']}},{'$project':{'_id':_0x9c5db5(0x194),'product_name':_0x9c5db5(0x18c),'product_code':_0x9c5db5(0x1be),'quantity_available':_0x9c5db5(0x1ae),'warehouse_name':_0x9c5db5(0x1d6),'warehouse_room':_0x9c5db5(0x195),'product_invoice':_0x9c5db5(0x1da),'invoice':_0x9c5db5(0x1b6),'id_transaction_from':_0x9c5db5(0x19d),'date':_0x9c5db5(0x17d),'production_date':_0x9c5db5(0x192),'expiry_date':_0x9c5db5(0x17e),'UOM':_0x9c5db5(0x1b0)}}]);_0x2203ed[_0x9c5db5(0x1c2)]>0x0&&_0x24f895[_0x9c5db5(0x181)][_0x2eb501[_0x9c5db5(0x184)]]['push'](..._0x2203ed);}));})),_0x24f895['data_transfer']={},await Promise[_0xae078d(0x1a4)](_0x24f895['map'](async _0x45d76d=>{var _0x4c7fcc=_0xae078d;_0x24f895[_0x4c7fcc(0x1bb)][_0x45d76d[_0x4c7fcc(0x184)]]=[],await Promise[_0x4c7fcc(0x1a4)](_0x45d76d[_0x4c7fcc(0x1d2)]['map'](async _0x64d149=>{var _0x33c584=_0x4c7fcc;const _0x2ebf38=await transfers_finished['aggregate']([{'$unwind':_0x33c584(0x17c)},{'$match':{'product.id_transaction':_0x64d149[_0x33c584(0x1ba)][_0x33c584(0x18f)](),'product.from_invoice':_0x64d149[_0x33c584(0x184)]}},{'$project':{'_id':_0x33c584(0x194),'product_name':_0x33c584(0x18c),'product_code':_0x33c584(0x1be),'quantity_available':_0x33c584(0x1c5),'warehouse_name':_0x33c584(0x1ad),'warehouse_room':_0x33c584(0x195),'product_invoice':_0x33c584(0x186),'invoice':'$invoice','id_transaction_from':_0x33c584(0x1b8),'date':_0x33c584(0x17d),'production_date':_0x33c584(0x192),'expiry_date':_0x33c584(0x17e),'UOM':'$product.unit'}}]);_0x2ebf38[_0x33c584(0x1c2)]>0x0&&_0x24f895[_0x33c584(0x1bb)][_0x45d76d[_0x33c584(0x184)]][_0x33c584(0x1a0)](..._0x2ebf38);}));})),_0x1138b0['json']({'purchases_warehouse':_0x24f895,'data_sales':_0x24f895['data_sales'],'data_adjustment':_0x24f895[_0xae078d(0x181)],'data_transfer':_0x24f895[_0xae078d(0x1bb)]});}}}),router['get']('/viewdata_inc_fg/:id',auth,async(_0x5a7004,_0x465958)=>{var _0xdab25=a0_0x58e90e;try{const _0x18ac0e=_0x5a7004['params']['id'];var _0x5434ca=await purchases_finished[_0xdab25(0x17a)](_0x18ac0e);const _0xce6890=await master_shop[_0xdab25(0x1db)](),_0x125fe2=_0x5a7004[_0xdab25(0x193)],_0x292ae5=await profile[_0xdab25(0x1cb)]({'email':_0x125fe2[_0xdab25(0x1d7)]});if(_0xce6890[0x0]['language']==_0xdab25(0x188))var _0x4a7616=users['English'];else{if(_0xce6890[0x0][_0xdab25(0x1ca)]=='Hindi')var _0x4a7616=users['Hindi'];else{if(_0xce6890[0x0][_0xdab25(0x1ca)]==_0xdab25(0x1ab))var _0x4a7616=users[_0xdab25(0x1ab)];else{if(_0xce6890[0x0][_0xdab25(0x1ca)]==_0xdab25(0x17f))var _0x4a7616=users[_0xdab25(0x17f)];else{if(_0xce6890[0x0][_0xdab25(0x1ca)]==_0xdab25(0x1cf))var _0x4a7616=users[_0xdab25(0x1cf)];else{if(_0xce6890[0x0]['language']==_0xdab25(0x1a1))var _0x4a7616=users[_0xdab25(0x183)];else{if(_0xce6890[0x0]['language']==_0xdab25(0x18d))var _0x4a7616=users[_0xdab25(0x18d)];else{if(_0xce6890[0x0][_0xdab25(0x1ca)]==_0xdab25(0x19a))var _0x4a7616=users[_0xdab25(0x18e)];}}}}}}}_0x465958['render']('view_table',{'success':_0x5a7004[_0xdab25(0x198)](_0xdab25(0x189)),'errors':_0x5a7004[_0xdab25(0x198)]('errors'),'master_shop':_0xce6890,'profile':_0x292ae5,'role':_0x125fe2,'language':_0x4a7616,'data':_0x5434ca});}catch(_0x5480cb){_0x465958[_0xdab25(0x1a8)](_0x5480cb);}}),router[a0_0x58e90e(0x1d5)](a0_0x58e90e(0x178),auth,async(_0x5ea9ec,_0x49c128)=>{var _0x2c2f29=a0_0x58e90e;try{const _0x4b2f7e=_0x5ea9ec[_0x2c2f29(0x19e)]['id'];var _0x28e644=await sales_finished[_0x2c2f29(0x17a)](_0x4b2f7e);const _0x279c1d=await master_shop[_0x2c2f29(0x1db)](),_0x3e34b0=_0x5ea9ec[_0x2c2f29(0x193)],_0x15192f=await profile[_0x2c2f29(0x1cb)]({'email':_0x3e34b0['email']});if(_0x279c1d[0x0][_0x2c2f29(0x1ca)]==_0x2c2f29(0x188))var _0x58018a=users[_0x2c2f29(0x1c1)];else{if(_0x279c1d[0x0][_0x2c2f29(0x1ca)]==_0x2c2f29(0x190))var _0x58018a=users[_0x2c2f29(0x190)];else{if(_0x279c1d[0x0][_0x2c2f29(0x1ca)]==_0x2c2f29(0x1ab))var _0x58018a=users['German'];else{if(_0x279c1d[0x0]['language']=='Spanish')var _0x58018a=users[_0x2c2f29(0x17f)];else{if(_0x279c1d[0x0][_0x2c2f29(0x1ca)]==_0x2c2f29(0x1cf))var _0x58018a=users[_0x2c2f29(0x1cf)];else{if(_0x279c1d[0x0]['language']==_0x2c2f29(0x1a1))var _0x58018a=users[_0x2c2f29(0x183)];else{if(_0x279c1d[0x0][_0x2c2f29(0x1ca)]==_0x2c2f29(0x18d))var _0x58018a=users['Chinese'];else{if(_0x279c1d[0x0][_0x2c2f29(0x1ca)]==_0x2c2f29(0x19a))var _0x58018a=users[_0x2c2f29(0x18e)];}}}}}}}_0x49c128[_0x2c2f29(0x1cc)](_0x2c2f29(0x1d0),{'success':_0x5ea9ec[_0x2c2f29(0x198)](_0x2c2f29(0x189)),'errors':_0x5ea9ec['flash']('errors'),'master_shop':_0x279c1d,'profile':_0x15192f,'role':_0x3e34b0,'language':_0x58018a,'data':_0x28e644});}catch(_0x27728c){_0x49c128['json'](_0x27728c);}}),router[a0_0x58e90e(0x1d5)](a0_0x58e90e(0x176),auth,async(_0x3138d1,_0x2d0e10)=>{var _0x27bc96=a0_0x58e90e;try{const _0x2aee46=_0x3138d1[_0x27bc96(0x19e)]['id'];var _0x3c2a0e=await transfers_finished[_0x27bc96(0x17a)](_0x2aee46);const _0xef0a67=await master_shop['find'](),_0x1fd78f=_0x3138d1[_0x27bc96(0x193)],_0x28cf64=await profile[_0x27bc96(0x1cb)]({'email':_0x1fd78f['email']});if(_0xef0a67[0x0][_0x27bc96(0x1ca)]==_0x27bc96(0x188))var _0x2a408c=users[_0x27bc96(0x1c1)];else{if(_0xef0a67[0x0]['language']=='Hindi')var _0x2a408c=users[_0x27bc96(0x190)];else{if(_0xef0a67[0x0]['language']==_0x27bc96(0x1ab))var _0x2a408c=users['German'];else{if(_0xef0a67[0x0]['language']==_0x27bc96(0x17f))var _0x2a408c=users[_0x27bc96(0x17f)];else{if(_0xef0a67[0x0]['language']==_0x27bc96(0x1cf))var _0x2a408c=users[_0x27bc96(0x1cf)];else{if(_0xef0a67[0x0][_0x27bc96(0x1ca)]==_0x27bc96(0x1a1))var _0x2a408c=users[_0x27bc96(0x183)];else{if(_0xef0a67[0x0][_0x27bc96(0x1ca)]==_0x27bc96(0x18d))var _0x2a408c=users[_0x27bc96(0x18d)];else{if(_0xef0a67[0x0][_0x27bc96(0x1ca)]==_0x27bc96(0x19a))var _0x2a408c=users[_0x27bc96(0x18e)];}}}}}}}_0x2d0e10[_0x27bc96(0x1cc)](_0x27bc96(0x1ce),{'success':_0x3138d1[_0x27bc96(0x198)]('success'),'errors':_0x3138d1['flash'](_0x27bc96(0x179)),'master_shop':_0xef0a67,'profile':_0x28cf64,'role':_0x1fd78f,'language':_0x2a408c,'data':_0x3c2a0e});}catch(_0x37b1bb){_0x2d0e10['json'](_0x37b1bb);}}),router[a0_0x58e90e(0x1d5)](a0_0x58e90e(0x182),auth,async(_0x1d7236,_0x375ef5)=>{var _0x5cbafb=a0_0x58e90e;try{const {username:_0x481380,email:_0x7bd1c9,role:_0x1bb34c}=_0x1d7236[_0x5cbafb(0x193)],_0x1a667b=_0x1d7236[_0x5cbafb(0x193)],_0xa828c0=await profile[_0x5cbafb(0x1cb)]({'email':_0x1a667b[_0x5cbafb(0x1d7)]}),_0x5cbf6b=await master_shop[_0x5cbafb(0x1db)](),_0x387184=await warehouse[_0x5cbafb(0x19f)]([{'$match':{'status':_0x5cbafb(0x1c7),'warehouse_category':_0x5cbafb(0x1b5)}},{'$group':{'_id':'$name','name':{'$first':_0x5cbafb(0x170)}}}]);if(_0x5cbf6b[0x0][_0x5cbafb(0x1ca)]==_0x5cbafb(0x188))var _0x4881a0=users[_0x5cbafb(0x1c1)];else{if(_0x5cbf6b[0x0][_0x5cbafb(0x1ca)]==_0x5cbafb(0x190))var _0x4881a0=users['Hindi'];else{if(_0x5cbf6b[0x0][_0x5cbafb(0x1ca)]==_0x5cbafb(0x1ab))var _0x4881a0=users['German'];else{if(_0x5cbf6b[0x0][_0x5cbafb(0x1ca)]==_0x5cbafb(0x17f))var _0x4881a0=users[_0x5cbafb(0x17f)];else{if(_0x5cbf6b[0x0][_0x5cbafb(0x1ca)]==_0x5cbafb(0x1cf))var _0x4881a0=users[_0x5cbafb(0x1cf)];else{if(_0x5cbf6b[0x0]['language']==_0x5cbafb(0x1a1))var _0x4881a0=users[_0x5cbafb(0x183)];else{if(_0x5cbf6b[0x0][_0x5cbafb(0x1ca)]==_0x5cbafb(0x18d))var _0x4881a0=users[_0x5cbafb(0x18d)];else{if(_0x5cbf6b[0x0][_0x5cbafb(0x1ca)]==_0x5cbafb(0x19a))var _0x4881a0=users[_0x5cbafb(0x18e)];}}}}}}}_0x375ef5[_0x5cbafb(0x1cc)](_0x5cbafb(0x1a2),{'success':_0x1d7236[_0x5cbafb(0x198)]('success'),'errors':_0x1d7236[_0x5cbafb(0x198)](_0x5cbafb(0x179)),'role':_0x1a667b,'profile':_0xa828c0,'master_shop':_0x5cbf6b,'dataProcess':_0x387184,'language':_0x4881a0});}catch(_0xcf9c23){console[_0x5cbafb(0x16e)](_0xcf9c23);}}),module[a0_0x58e90e(0x1aa)]=router;