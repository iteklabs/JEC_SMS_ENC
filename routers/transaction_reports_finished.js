var a0_0x2dc1db=a0_0x3d79;function a0_0x243c(){var _0x5881c0=['$product.to_room_name','Finished\x20Goods','English','errors','../models/all_models','express','12xAdtrw','$product.product_name','French','get','../public/language/languages.json','$date','Spanish','$sale_product.product_code','warehouses','Enabled','invoice','$product_details.unit','$sale_product.production_date','findOne','data_adjustment','length','render','$product.room_names','$sale_product.id_transaction_from','valueOf','email','$name','../middleware/auth','Arabic\x20(ae)','user','$product_details.invoice','15861120ZfHSZu','body','$product.unit','$product_details.product_name','4098451OhMcVY','$sale_product.invoice','$product.id_transaction_id','$warehouse_name','$product._id','$product_details.product_stock','$product.to_quantity','$product_details.product_code','$product_details._id','/viewFG','$sale_product._id','view_og_table','430wQpaeo','$product_details','6136830kjlmGC','findById','nodemailer','German','$product.expiry_date','$product.production_date','5124176YeTWgk','$product_details.expiry_date','$to_warehouse','warehouse_data','$sale_product.quantity','Portuguese','transaction_finished_raw','/view','$sale_product.expiry_date','all','$product.invoice','$room','exports','Hindi','flash','success','params','$sale_product.product_name','Chinese','post','/viewdata_og_fg/:id','data_transfer','44559YsBvTQ','_id','Arabic','$sale_product.room_name','Router','Portuguese\x20(BR)','aggregate','$sale_product','English\x20(US)','1842369KxJYdT','$product','$product.id_transaction','/reports','/viewdata_inc_fg/:id','$product.product_code','$product_details.production_date','$product.id_transaction_from','transaction_finished','$sale_product.unit','find','$invoice','log','language','map','data_sales','4VlKWVn','$product.new_adjust_qty','$$invoice','2gaYNIX','json','Raw\x20Materials','1119737wrlweb','view_table','push'];a0_0x243c=function(){return _0x5881c0;};return a0_0x243c();}(function(_0x2a4103,_0x1a5726){var _0x8dea65=a0_0x3d79,_0x268148=_0x2a4103();while(!![]){try{var _0x50a684=parseInt(_0x8dea65(0xcb))/0x1*(parseInt(_0x8dea65(0x138))/0x2)+-parseInt(_0x8dea65(0x125))/0x3*(-parseInt(_0x8dea65(0x135))/0x4)+-parseInt(_0x8dea65(0x100))/0x5+-parseInt(_0x8dea65(0xd4))/0x6*(-parseInt(_0x8dea65(0xf2))/0x7)+parseInt(_0x8dea65(0x106))/0x8+parseInt(_0x8dea65(0x11c))/0x9*(-parseInt(_0x8dea65(0xfe))/0xa)+-parseInt(_0x8dea65(0xee))/0xb;if(_0x50a684===_0x1a5726)break;else _0x268148['push'](_0x268148['shift']());}catch(_0xa3955a){_0x268148['push'](_0x268148['shift']());}}}(a0_0x243c,0xa1e95));const express=require(a0_0x2dc1db(0xd3)),app=express(),router=express[a0_0x2dc1db(0x120)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x2dc1db(0xd2)),auth=require(a0_0x2dc1db(0xea)),users=require(a0_0x2dc1db(0xd8)),nodemailer=require(a0_0x2dc1db(0x102));function a0_0x3d79(_0xb2678e,_0x389e25){var _0x243c67=a0_0x243c();return a0_0x3d79=function(_0x3d790c,_0x4ae017){_0x3d790c=_0x3d790c-0xca;var _0x1697b6=_0x243c67[_0x3d790c];return _0x1697b6;},a0_0x3d79(_0xb2678e,_0x389e25);}router['get'](a0_0x2dc1db(0x10d),auth,async(_0x2901fd,_0x1d04c9)=>{var _0x54a949=a0_0x2dc1db;try{const {username:_0x53a0b7,email:_0x104108,role:_0x2bec9b}=_0x2901fd['user'],_0x1beef2=_0x2901fd[_0x54a949(0xec)],_0x3bdde8=await profile[_0x54a949(0xe1)]({'email':_0x1beef2['email']}),_0x226ad7=await master_shop[_0x54a949(0x12f)](),_0x2f3924=await warehouse[_0x54a949(0x122)]([{'$match':{'status':_0x54a949(0xdd),'warehouse_category':_0x54a949(0xcf)}},{'$group':{'_id':_0x54a949(0xe9),'name':{'$first':'$name'}}}]);if(_0x226ad7[0x0][_0x54a949(0x132)]=='English\x20(US)')var _0x2d8493=users[_0x54a949(0xd0)];else{if(_0x226ad7[0x0][_0x54a949(0x132)]=='Hindi')var _0x2d8493=users[_0x54a949(0x113)];else{if(_0x226ad7[0x0][_0x54a949(0x132)]==_0x54a949(0x103))var _0x2d8493=users[_0x54a949(0x103)];else{if(_0x226ad7[0x0][_0x54a949(0x132)]==_0x54a949(0xda))var _0x2d8493=users[_0x54a949(0xda)];else{if(_0x226ad7[0x0]['language']==_0x54a949(0xd6))var _0x2d8493=users['French'];else{if(_0x226ad7[0x0]['language']==_0x54a949(0x121))var _0x2d8493=users[_0x54a949(0x10b)];else{if(_0x226ad7[0x0][_0x54a949(0x132)]=='Chinese')var _0x2d8493=users[_0x54a949(0x118)];else{if(_0x226ad7[0x0][_0x54a949(0x132)]==_0x54a949(0xeb))var _0x2d8493=users[_0x54a949(0x11e)];}}}}}}}_0x1d04c9[_0x54a949(0xe4)](_0x54a949(0x12d),{'success':_0x2901fd[_0x54a949(0x114)]('success'),'errors':_0x2901fd[_0x54a949(0x114)](_0x54a949(0xd1)),'role':_0x1beef2,'profile':_0x3bdde8,'master_shop':_0x226ad7,'dataProcess':_0x2f3924,'language':_0x2d8493});}catch(_0x24598a){console[_0x54a949(0x131)](_0x24598a);}}),router[a0_0x2dc1db(0x119)](a0_0x2dc1db(0x128),auth,async(_0x391299,_0x27bbc3)=>{var _0x2ae581=a0_0x2dc1db;const {product_category:_0x42aaea,transaction_category:_0x255d2b,transaction_date_from:_0x1ec22c,transaction_date_to:_0x140553,warehouse_category:_0x4dddb1,item_code:_0x2b77a2}=_0x391299[_0x2ae581(0xef)];console[_0x2ae581(0x131)](_0x4dddb1);if(_0x42aaea=='rm'){if(_0x4dddb1=='all'){var _0x2e3368=await purchases[_0x2ae581(0x122)]([{'$match':{'date':{'$gte':_0x1ec22c,'$lte':_0x140553}}},{'$lookup':{'from':_0x2ae581(0xdc),'let':{'invoice':_0x2ae581(0x130)},'pipeline':[{'$unwind':_0x2ae581(0xff)},{'$match':{'$expr':{'$eq':[_0x2ae581(0x137),_0x2ae581(0xed)]}}},{'$project':{'_id':_0x2ae581(0xfa),'product_name':_0x2ae581(0xf1),'product_code':_0x2ae581(0xf9),'quantity_available':_0x2ae581(0xf7),'warehouse_name':_0x2ae581(0xe9),'warehouse_room':'$room','invoice':_0x2ae581(0xed),'production_date':_0x2ae581(0x12b),'expiry_date':_0x2ae581(0x107),'UOM':_0x2ae581(0xdf)}}],'as':_0x2ae581(0x109)}}]);_0x2e3368[_0x2ae581(0x134)]={},await Promise[_0x2ae581(0x10f)](_0x2e3368[_0x2ae581(0x133)](async _0x5836e6=>{var _0xa2b0ee=_0x2ae581;_0x2e3368[_0xa2b0ee(0x134)][_0x5836e6[_0xa2b0ee(0xde)]]=[],await Promise['all'](_0x5836e6[_0xa2b0ee(0x109)][_0xa2b0ee(0x133)](async _0x5b9908=>{var _0x1bb5ff=_0xa2b0ee;const _0x4f1697=await sales[_0x1bb5ff(0x122)]([{'$unwind':_0x1bb5ff(0x123)},{'$match':{'sale_product.id_transaction_from':_0x5b9908[_0x1bb5ff(0x11d)]['valueOf'](),'sale_product.invoice':_0x5b9908[_0x1bb5ff(0xde)]}},{'$project':{'_id':_0x1bb5ff(0xfc),'product_name':'$sale_product.product_name','product_code':'$sale_product.product_code','quantity_available':_0x1bb5ff(0x10a),'warehouse_name':_0x1bb5ff(0xf5),'warehouse_room':_0x1bb5ff(0x11f),'product_invoice':_0x1bb5ff(0xf3),'invoice':_0x1bb5ff(0x130),'id_transaction_from':_0x1bb5ff(0xe6),'date':'$date','production_date':_0x1bb5ff(0xe0),'expiry_date':'$sale_product.expiry_date','UOM':_0x1bb5ff(0x12e)}}]);_0x4f1697['length']>0x0&&_0x2e3368[_0x1bb5ff(0x134)][_0x5836e6[_0x1bb5ff(0xde)]]['push'](..._0x4f1697);}));})),_0x2e3368[_0x2ae581(0x134)]=_0x2e3368[_0x2ae581(0x134)],_0x2e3368[_0x2ae581(0xe2)]={},await Promise['all'](_0x2e3368[_0x2ae581(0x133)](async _0x25b53f=>{var _0x4668c0=_0x2ae581;_0x2e3368[_0x4668c0(0xe2)][_0x25b53f[_0x4668c0(0xde)]]=[],await Promise['all'](_0x25b53f[_0x4668c0(0x109)][_0x4668c0(0x133)](async _0x22fd0c=>{var _0x4b3c99=_0x4668c0;const _0x1b90e0=await adjustment[_0x4b3c99(0x122)]([{'$unwind':_0x4b3c99(0x126)},{'$match':{'product.id_transaction_from':_0x22fd0c[_0x4b3c99(0x11d)][_0x4b3c99(0xe7)](),'product.invoice':_0x22fd0c[_0x4b3c99(0xde)]}},{'$project':{'_id':_0x4b3c99(0xf6),'product_name':'$product.product_name','product_code':_0x4b3c99(0x12a),'quantity_available':_0x4b3c99(0x136),'warehouse_name':'$warehouse_name','warehouse_room':_0x4b3c99(0xe5),'product_invoice':_0x4b3c99(0x110),'invoice':_0x4b3c99(0x130),'id_transaction_from':'$product.id_transaction_from','date':_0x4b3c99(0xd9),'production_date':_0x4b3c99(0x105),'expiry_date':_0x4b3c99(0x104),'UOM':_0x4b3c99(0xf0)}}]);_0x1b90e0['length']>0x0&&_0x2e3368[_0x4b3c99(0xe2)][_0x25b53f[_0x4b3c99(0xde)]]['push'](..._0x1b90e0);}));})),_0x2e3368[_0x2ae581(0x11b)]={},await Promise[_0x2ae581(0x10f)](_0x2e3368[_0x2ae581(0x133)](async _0x3edac4=>{var _0x5ae87b=_0x2ae581;_0x2e3368[_0x5ae87b(0x11b)][_0x3edac4['invoice']]=[],await Promise[_0x5ae87b(0x10f)](_0x3edac4['warehouse_data'][_0x5ae87b(0x133)](async _0x2aa0dd=>{var _0x1b4b31=_0x5ae87b;const _0xab5961=await transfers['aggregate']([{'$unwind':_0x1b4b31(0x126)},{'$match':{'product.id_transaction_id':_0x2aa0dd[_0x1b4b31(0x11d)][_0x1b4b31(0xe7)](),'product.To_invoice':_0x2aa0dd[_0x1b4b31(0xde)]}},{'$project':{'_id':_0x1b4b31(0xf6),'product_name':_0x1b4b31(0xd5),'product_code':_0x1b4b31(0x12a),'quantity_available':_0x1b4b31(0xf8),'warehouse_name':_0x1b4b31(0x108),'warehouse_room':_0x1b4b31(0xe5),'product_invoice':_0x1b4b31(0xce),'invoice':_0x1b4b31(0x130),'id_transaction_from':_0x1b4b31(0xf4),'date':'$date','production_date':_0x1b4b31(0x105),'expiry_date':'$product.expiry_date','UOM':_0x1b4b31(0xf0)}}]);_0xab5961[_0x1b4b31(0xe3)]>0x0&&_0x2e3368['data_transfer'][_0x3edac4['invoice']][_0x1b4b31(0xcd)](..._0xab5961);}));})),_0x27bbc3[_0x2ae581(0x139)]({'purchases_warehouse':_0x2e3368,'data_sales':_0x2e3368[_0x2ae581(0x134)],'data_adjustment':_0x2e3368[_0x2ae581(0xe2)],'data_transfer':_0x2e3368[_0x2ae581(0x11b)]});}else{var _0x2e3368=await purchases[_0x2ae581(0x122)]([{'$match':{'warehouse_name':_0x4dddb1,'date':{'$gte':_0x1ec22c,'$lte':_0x140553}}},{'$lookup':{'from':_0x2ae581(0xdc),'let':{'invoice':_0x2ae581(0x130)},'pipeline':[{'$unwind':_0x2ae581(0xff)},{'$match':{'$expr':{'$eq':[_0x2ae581(0x137),'$product_details.invoice']}}},{'$project':{'_id':_0x2ae581(0xfa),'product_name':_0x2ae581(0xf1),'product_code':_0x2ae581(0xf9),'quantity_available':_0x2ae581(0xf7),'warehouse_name':_0x2ae581(0xe9),'warehouse_room':'$room','invoice':_0x2ae581(0xed),'production_date':_0x2ae581(0x12b),'expiry_date':_0x2ae581(0x107),'UOM':_0x2ae581(0xdf)}}],'as':'warehouse_data'}}]);_0x2e3368[_0x2ae581(0x134)]={},await Promise[_0x2ae581(0x10f)](_0x2e3368['map'](async _0x40fcdd=>{var _0x2bcdc8=_0x2ae581;_0x2e3368[_0x2bcdc8(0x134)][_0x40fcdd[_0x2bcdc8(0xde)]]=[],await Promise[_0x2bcdc8(0x10f)](_0x40fcdd['warehouse_data']['map'](async _0x555940=>{var _0x249b7d=_0x2bcdc8;const _0x101f60=await sales['aggregate']([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x555940[_0x249b7d(0x11d)][_0x249b7d(0xe7)](),'sale_product.invoice':_0x555940[_0x249b7d(0xde)]}},{'$project':{'_id':_0x249b7d(0xfc),'product_name':'$sale_product.product_name','product_code':_0x249b7d(0xdb),'quantity_available':_0x249b7d(0x10a),'warehouse_name':'$warehouse_name','warehouse_room':'$sale_product.room_name','product_invoice':_0x249b7d(0xf3),'invoice':_0x249b7d(0x130),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x249b7d(0xd9),'production_date':'$sale_product.production_date','expiry_date':_0x249b7d(0x10e),'UOM':_0x249b7d(0x12e)}}]);_0x101f60['length']>0x0&&_0x2e3368['data_sales'][_0x40fcdd[_0x249b7d(0xde)]][_0x249b7d(0xcd)](..._0x101f60);}));})),_0x2e3368[_0x2ae581(0x134)]=_0x2e3368[_0x2ae581(0x134)],_0x2e3368[_0x2ae581(0xe2)]={},await Promise[_0x2ae581(0x10f)](_0x2e3368[_0x2ae581(0x133)](async _0x325dfd=>{var _0x26207a=_0x2ae581;_0x2e3368['data_adjustment'][_0x325dfd[_0x26207a(0xde)]]=[],await Promise[_0x26207a(0x10f)](_0x325dfd[_0x26207a(0x109)][_0x26207a(0x133)](async _0x26d7ca=>{var _0x531c3d=_0x26207a;const _0x3d6e7d=await adjustment[_0x531c3d(0x122)]([{'$unwind':_0x531c3d(0x126)},{'$match':{'product.id_transaction_from':_0x26d7ca[_0x531c3d(0x11d)][_0x531c3d(0xe7)](),'product.invoice':_0x26d7ca[_0x531c3d(0xde)]}},{'$project':{'_id':'$product._id','product_name':_0x531c3d(0xd5),'product_code':_0x531c3d(0x12a),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x531c3d(0xf5),'warehouse_room':_0x531c3d(0xe5),'product_invoice':_0x531c3d(0x110),'invoice':_0x531c3d(0x130),'id_transaction_from':_0x531c3d(0x12c),'date':_0x531c3d(0xd9),'production_date':_0x531c3d(0x105),'expiry_date':_0x531c3d(0x104),'UOM':_0x531c3d(0xf0)}}]);_0x3d6e7d[_0x531c3d(0xe3)]>0x0&&_0x2e3368['data_adjustment'][_0x325dfd[_0x531c3d(0xde)]][_0x531c3d(0xcd)](..._0x3d6e7d);}));})),_0x2e3368['data_transfer']={},await Promise[_0x2ae581(0x10f)](_0x2e3368[_0x2ae581(0x133)](async _0x529b57=>{var _0x495fb3=_0x2ae581;_0x2e3368['data_transfer'][_0x529b57['invoice']]=[],await Promise[_0x495fb3(0x10f)](_0x529b57[_0x495fb3(0x109)]['map'](async _0x24b7ea=>{var _0x1a3fa2=_0x495fb3;const _0x4802d1=await transfers[_0x1a3fa2(0x122)]([{'$unwind':_0x1a3fa2(0x126)},{'$match':{'product.id_transaction_id':_0x24b7ea[_0x1a3fa2(0x11d)][_0x1a3fa2(0xe7)](),'product.To_invoice':_0x24b7ea['invoice']}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0x1a3fa2(0x12a),'quantity_available':_0x1a3fa2(0xf8),'warehouse_name':_0x1a3fa2(0x108),'warehouse_room':_0x1a3fa2(0xe5),'product_invoice':_0x1a3fa2(0xce),'invoice':_0x1a3fa2(0x130),'id_transaction_from':'$product.id_transaction_id','date':'$date','production_date':_0x1a3fa2(0x105),'expiry_date':'$product.expiry_date','UOM':_0x1a3fa2(0xf0)}}]);_0x4802d1['length']>0x0&&_0x2e3368[_0x1a3fa2(0x11b)][_0x529b57[_0x1a3fa2(0xde)]][_0x1a3fa2(0xcd)](..._0x4802d1);}));})),_0x27bbc3[_0x2ae581(0x139)]({'purchases_warehouse':_0x2e3368,'data_sales':_0x2e3368[_0x2ae581(0x134)],'data_adjustment':_0x2e3368['data_adjustment'],'data_transfer':_0x2e3368['data_transfer']});}}else{if(_0x4dddb1==_0x2ae581(0x10f)){var _0x2e3368=await purchases_finished[_0x2ae581(0x122)]([{'$match':{'date':{'$gte':_0x1ec22c,'$lte':_0x140553}}},{'$lookup':{'from':_0x2ae581(0xdc),'let':{'invoice':_0x2ae581(0x130)},'pipeline':[{'$unwind':_0x2ae581(0xff)},{'$match':{'$expr':{'$eq':[_0x2ae581(0x137),_0x2ae581(0xed)]}}},{'$project':{'_id':_0x2ae581(0xfa),'product_name':_0x2ae581(0xf1),'product_code':_0x2ae581(0xf9),'quantity_available':_0x2ae581(0xf7),'warehouse_name':'$name','warehouse_room':_0x2ae581(0x111),'invoice':_0x2ae581(0xed),'production_date':'$product_details.production_date','expiry_date':_0x2ae581(0x107),'UOM':_0x2ae581(0xdf)}}],'as':_0x2ae581(0x109)}}]);_0x2e3368[_0x2ae581(0x134)]={},await Promise[_0x2ae581(0x10f)](_0x2e3368[_0x2ae581(0x133)](async _0x2be390=>{var _0x537ebf=_0x2ae581;_0x2e3368[_0x537ebf(0x134)][_0x2be390['invoice']]=[],await Promise[_0x537ebf(0x10f)](_0x2be390[_0x537ebf(0x109)][_0x537ebf(0x133)](async _0x416ca1=>{var _0x5a2740=_0x537ebf;const _0x98d290=await sales_finished[_0x5a2740(0x122)]([{'$unwind':_0x5a2740(0x123)},{'$match':{'sale_product.id_transaction_from':_0x416ca1['_id'][_0x5a2740(0xe7)](),'sale_product.invoice':_0x416ca1[_0x5a2740(0xde)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x5a2740(0x117),'product_code':_0x5a2740(0xdb),'quantity_available':_0x5a2740(0x10a),'warehouse_name':_0x5a2740(0xf5),'warehouse_room':'$sale_product.room_name','product_invoice':_0x5a2740(0xf3),'invoice':_0x5a2740(0x130),'id_transaction_from':_0x5a2740(0xe6),'date':_0x5a2740(0xd9),'production_date':'$sale_product.production_date','expiry_date':_0x5a2740(0x10e),'UOM':_0x5a2740(0x12e)}}]);_0x98d290[_0x5a2740(0xe3)]>0x0&&_0x2e3368[_0x5a2740(0x134)][_0x2be390[_0x5a2740(0xde)]][_0x5a2740(0xcd)](..._0x98d290);}));})),_0x2e3368[_0x2ae581(0x134)]=_0x2e3368[_0x2ae581(0x134)],_0x2e3368[_0x2ae581(0xe2)]={},await Promise[_0x2ae581(0x10f)](_0x2e3368[_0x2ae581(0x133)](async _0x34b0df=>{var _0x174662=_0x2ae581;_0x2e3368[_0x174662(0xe2)][_0x34b0df[_0x174662(0xde)]]=[],await Promise[_0x174662(0x10f)](_0x34b0df['warehouse_data']['map'](async _0x3d0e5a=>{var _0x20fdd4=_0x174662;const _0x450d56=await adjustment_finished['aggregate']([{'$unwind':_0x20fdd4(0x126)},{'$match':{'product.id_transaction_from':_0x3d0e5a[_0x20fdd4(0x11d)][_0x20fdd4(0xe7)](),'product.invoice':_0x3d0e5a[_0x20fdd4(0xde)]}},{'$project':{'_id':'$product._id','product_name':_0x20fdd4(0xd5),'product_code':_0x20fdd4(0x12a),'quantity_available':_0x20fdd4(0x136),'warehouse_name':'$warehouse_name','warehouse_room':_0x20fdd4(0xe5),'product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':_0x20fdd4(0x12c),'date':_0x20fdd4(0xd9),'production_date':_0x20fdd4(0x105),'expiry_date':_0x20fdd4(0x104),'UOM':_0x20fdd4(0xf0)}}]);_0x450d56['length']>0x0&&_0x2e3368[_0x20fdd4(0xe2)][_0x34b0df[_0x20fdd4(0xde)]][_0x20fdd4(0xcd)](..._0x450d56);}));})),_0x2e3368[_0x2ae581(0x11b)]={},await Promise[_0x2ae581(0x10f)](_0x2e3368[_0x2ae581(0x133)](async _0x494497=>{var _0x125486=_0x2ae581;_0x2e3368['data_transfer'][_0x494497[_0x125486(0xde)]]=[],await Promise['all'](_0x494497['warehouse_data'][_0x125486(0x133)](async _0xf5b9c0=>{var _0x32e31c=_0x125486;const _0x36539f=await transfers_finished[_0x32e31c(0x122)]([{'$unwind':'$product'},{'$match':{'product.id_transaction':_0xf5b9c0[_0x32e31c(0x11d)][_0x32e31c(0xe7)](),'product.from_invoice':_0xf5b9c0[_0x32e31c(0xde)]}},{'$project':{'_id':_0x32e31c(0xf6),'product_name':_0x32e31c(0xd5),'product_code':_0x32e31c(0x12a),'quantity_available':_0x32e31c(0xf8),'warehouse_name':_0x32e31c(0x108),'warehouse_room':_0x32e31c(0xe5),'product_invoice':_0x32e31c(0xce),'invoice':'$invoice','id_transaction_from':_0x32e31c(0x127),'date':_0x32e31c(0xd9),'production_date':'$product.production_date','expiry_date':_0x32e31c(0x104),'UOM':_0x32e31c(0xf0)}}]);_0x36539f[_0x32e31c(0xe3)]>0x0&&_0x2e3368['data_transfer'][_0x494497[_0x32e31c(0xde)]][_0x32e31c(0xcd)](..._0x36539f);}));})),_0x27bbc3[_0x2ae581(0x139)]({'purchases_warehouse':_0x2e3368,'data_sales':_0x2e3368[_0x2ae581(0x134)],'data_adjustment':_0x2e3368[_0x2ae581(0xe2)],'data_transfer':_0x2e3368[_0x2ae581(0x11b)]});}else{var _0x2e3368=await purchases_finished[_0x2ae581(0x122)]([{'$match':{'warehouse_name':_0x4dddb1,'date':{'$gte':_0x1ec22c,'$lte':_0x140553}}},{'$lookup':{'from':_0x2ae581(0xdc),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x2ae581(0xff)},{'$match':{'$expr':{'$eq':['$$invoice',_0x2ae581(0xed)]}}},{'$project':{'_id':'$product_details._id','product_name':'$product_details.product_name','product_code':_0x2ae581(0xf9),'quantity_available':_0x2ae581(0xf7),'warehouse_name':_0x2ae581(0xe9),'warehouse_room':'$room','invoice':_0x2ae581(0xed),'production_date':_0x2ae581(0x12b),'expiry_date':_0x2ae581(0x107),'UOM':_0x2ae581(0xdf)}}],'as':'warehouse_data'}}]);_0x2e3368[_0x2ae581(0x134)]={},await Promise[_0x2ae581(0x10f)](_0x2e3368[_0x2ae581(0x133)](async _0x5a7a79=>{var _0x3c0d8f=_0x2ae581;_0x2e3368['data_sales'][_0x5a7a79['invoice']]=[],await Promise['all'](_0x5a7a79[_0x3c0d8f(0x109)][_0x3c0d8f(0x133)](async _0x23591e=>{var _0x4dec2d=_0x3c0d8f;const _0x1c7f90=await sales_finished[_0x4dec2d(0x122)]([{'$unwind':_0x4dec2d(0x123)},{'$match':{'sale_product.id_transaction_from':_0x23591e[_0x4dec2d(0x11d)][_0x4dec2d(0xe7)](),'sale_product.invoice':_0x23591e[_0x4dec2d(0xde)]}},{'$project':{'_id':_0x4dec2d(0xfc),'product_name':'$sale_product.product_name','product_code':_0x4dec2d(0xdb),'quantity_available':'$sale_product.quantity','warehouse_name':'$warehouse_name','warehouse_room':_0x4dec2d(0x11f),'product_invoice':'$sale_product.invoice','invoice':_0x4dec2d(0x130),'id_transaction_from':_0x4dec2d(0xe6),'date':_0x4dec2d(0xd9),'production_date':_0x4dec2d(0xe0),'expiry_date':_0x4dec2d(0x10e),'UOM':'$sale_product.unit'}}]);_0x1c7f90[_0x4dec2d(0xe3)]>0x0&&_0x2e3368[_0x4dec2d(0x134)][_0x5a7a79[_0x4dec2d(0xde)]][_0x4dec2d(0xcd)](..._0x1c7f90);}));})),_0x2e3368[_0x2ae581(0x134)]=_0x2e3368[_0x2ae581(0x134)],_0x2e3368[_0x2ae581(0xe2)]={},await Promise['all'](_0x2e3368[_0x2ae581(0x133)](async _0x1081aa=>{var _0x190e0c=_0x2ae581;_0x2e3368[_0x190e0c(0xe2)][_0x1081aa[_0x190e0c(0xde)]]=[],await Promise['all'](_0x1081aa[_0x190e0c(0x109)][_0x190e0c(0x133)](async _0x58ab53=>{var _0x8fc089=_0x190e0c;const _0x280b83=await adjustment_finished[_0x8fc089(0x122)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x58ab53['_id'][_0x8fc089(0xe7)](),'product.invoice':_0x58ab53['invoice']}},{'$project':{'_id':_0x8fc089(0xf6),'product_name':'$product.product_name','product_code':'$product.product_code','quantity_available':_0x8fc089(0x136),'warehouse_name':'$warehouse_name','warehouse_room':_0x8fc089(0xe5),'product_invoice':_0x8fc089(0x110),'invoice':_0x8fc089(0x130),'id_transaction_from':_0x8fc089(0x12c),'date':_0x8fc089(0xd9),'production_date':'$product.production_date','expiry_date':_0x8fc089(0x104),'UOM':_0x8fc089(0xf0)}}]);_0x280b83['length']>0x0&&_0x2e3368[_0x8fc089(0xe2)][_0x1081aa[_0x8fc089(0xde)]][_0x8fc089(0xcd)](..._0x280b83);}));})),_0x2e3368[_0x2ae581(0x11b)]={},await Promise[_0x2ae581(0x10f)](_0x2e3368['map'](async _0x6629cf=>{var _0x585a0f=_0x2ae581;_0x2e3368[_0x585a0f(0x11b)][_0x6629cf['invoice']]=[],await Promise[_0x585a0f(0x10f)](_0x6629cf[_0x585a0f(0x109)][_0x585a0f(0x133)](async _0x193ebd=>{var _0x27a00b=_0x585a0f;const _0x226e2a=await transfers_finished[_0x27a00b(0x122)]([{'$unwind':_0x27a00b(0x126)},{'$match':{'product.id_transaction':_0x193ebd[_0x27a00b(0x11d)][_0x27a00b(0xe7)](),'product.from_invoice':_0x193ebd[_0x27a00b(0xde)]}},{'$project':{'_id':_0x27a00b(0xf6),'product_name':_0x27a00b(0xd5),'product_code':_0x27a00b(0x12a),'quantity_available':_0x27a00b(0xf8),'warehouse_name':_0x27a00b(0x108),'warehouse_room':_0x27a00b(0xe5),'product_invoice':_0x27a00b(0xce),'invoice':_0x27a00b(0x130),'id_transaction_from':_0x27a00b(0x127),'date':_0x27a00b(0xd9),'production_date':_0x27a00b(0x105),'expiry_date':'$product.expiry_date','UOM':'$product.unit'}}]);_0x226e2a[_0x27a00b(0xe3)]>0x0&&_0x2e3368[_0x27a00b(0x11b)][_0x6629cf[_0x27a00b(0xde)]][_0x27a00b(0xcd)](..._0x226e2a);}));})),_0x27bbc3[_0x2ae581(0x139)]({'purchases_warehouse':_0x2e3368,'data_sales':_0x2e3368[_0x2ae581(0x134)],'data_adjustment':_0x2e3368['data_adjustment'],'data_transfer':_0x2e3368['data_transfer']});}}}),router[a0_0x2dc1db(0xd7)](a0_0x2dc1db(0x129),auth,async(_0x1a5859,_0x374d1d)=>{var _0x497ddc=a0_0x2dc1db;try{const _0x488fcf=_0x1a5859[_0x497ddc(0x116)]['id'];var _0x2ab015=await purchases_finished[_0x497ddc(0x101)](_0x488fcf);const _0xc92d7a=await master_shop[_0x497ddc(0x12f)](),_0x18bf34=_0x1a5859['user'],_0x9794c3=await profile['findOne']({'email':_0x18bf34[_0x497ddc(0xe8)]});if(_0xc92d7a[0x0][_0x497ddc(0x132)]==_0x497ddc(0x124))var _0x9a2732=users[_0x497ddc(0xd0)];else{if(_0xc92d7a[0x0]['language']==_0x497ddc(0x113))var _0x9a2732=users['Hindi'];else{if(_0xc92d7a[0x0][_0x497ddc(0x132)]=='German')var _0x9a2732=users[_0x497ddc(0x103)];else{if(_0xc92d7a[0x0][_0x497ddc(0x132)]==_0x497ddc(0xda))var _0x9a2732=users[_0x497ddc(0xda)];else{if(_0xc92d7a[0x0][_0x497ddc(0x132)]=='French')var _0x9a2732=users['French'];else{if(_0xc92d7a[0x0][_0x497ddc(0x132)]=='Portuguese\x20(BR)')var _0x9a2732=users['Portuguese'];else{if(_0xc92d7a[0x0][_0x497ddc(0x132)]==_0x497ddc(0x118))var _0x9a2732=users[_0x497ddc(0x118)];else{if(_0xc92d7a[0x0]['language']=='Arabic\x20(ae)')var _0x9a2732=users[_0x497ddc(0x11e)];}}}}}}}_0x374d1d[_0x497ddc(0xe4)](_0x497ddc(0xcc),{'success':_0x1a5859[_0x497ddc(0x114)](_0x497ddc(0x115)),'errors':_0x1a5859['flash']('errors'),'master_shop':_0xc92d7a,'profile':_0x9794c3,'role':_0x18bf34,'language':_0x9a2732,'data':_0x2ab015});}catch(_0x1d8a5d){_0x374d1d[_0x497ddc(0x139)](_0x1d8a5d);}}),router[a0_0x2dc1db(0xd7)](a0_0x2dc1db(0x11a),auth,async(_0x1f7c0e,_0x50bcf9)=>{var _0xaeb15d=a0_0x2dc1db;try{const _0x141c1c=_0x1f7c0e['params']['id'];var _0x1b4582=await sales_finished['findById'](_0x141c1c);const _0x41f29f=await master_shop['find'](),_0x872155=_0x1f7c0e['user'],_0x292afd=await profile[_0xaeb15d(0xe1)]({'email':_0x872155[_0xaeb15d(0xe8)]});if(_0x41f29f[0x0][_0xaeb15d(0x132)]==_0xaeb15d(0x124))var _0x54a25d=users[_0xaeb15d(0xd0)];else{if(_0x41f29f[0x0][_0xaeb15d(0x132)]==_0xaeb15d(0x113))var _0x54a25d=users[_0xaeb15d(0x113)];else{if(_0x41f29f[0x0][_0xaeb15d(0x132)]==_0xaeb15d(0x103))var _0x54a25d=users[_0xaeb15d(0x103)];else{if(_0x41f29f[0x0][_0xaeb15d(0x132)]=='Spanish')var _0x54a25d=users['Spanish'];else{if(_0x41f29f[0x0][_0xaeb15d(0x132)]=='French')var _0x54a25d=users[_0xaeb15d(0xd6)];else{if(_0x41f29f[0x0][_0xaeb15d(0x132)]==_0xaeb15d(0x121))var _0x54a25d=users[_0xaeb15d(0x10b)];else{if(_0x41f29f[0x0][_0xaeb15d(0x132)]=='Chinese')var _0x54a25d=users[_0xaeb15d(0x118)];else{if(_0x41f29f[0x0]['language']==_0xaeb15d(0xeb))var _0x54a25d=users[_0xaeb15d(0x11e)];}}}}}}}_0x50bcf9[_0xaeb15d(0xe4)](_0xaeb15d(0xfd),{'success':_0x1f7c0e[_0xaeb15d(0x114)](_0xaeb15d(0x115)),'errors':_0x1f7c0e['flash']('errors'),'master_shop':_0x41f29f,'profile':_0x292afd,'role':_0x872155,'language':_0x54a25d,'data':_0x1b4582});}catch(_0x6a3a70){_0x50bcf9[_0xaeb15d(0x139)](_0x6a3a70);}}),router['get']('/viewdata_tf_fg/:id',auth,async(_0x5bb65c,_0xefc2dc)=>{var _0x22a09f=a0_0x2dc1db;try{const _0x54277f=_0x5bb65c[_0x22a09f(0x116)]['id'];var _0x251dc4=await transfers_finished[_0x22a09f(0x101)](_0x54277f);const _0x486b28=await master_shop['find'](),_0x3e9828=_0x5bb65c[_0x22a09f(0xec)],_0x44f7cf=await profile[_0x22a09f(0xe1)]({'email':_0x3e9828['email']});if(_0x486b28[0x0]['language']==_0x22a09f(0x124))var _0x530a8b=users[_0x22a09f(0xd0)];else{if(_0x486b28[0x0]['language']==_0x22a09f(0x113))var _0x530a8b=users[_0x22a09f(0x113)];else{if(_0x486b28[0x0][_0x22a09f(0x132)]==_0x22a09f(0x103))var _0x530a8b=users['German'];else{if(_0x486b28[0x0]['language']==_0x22a09f(0xda))var _0x530a8b=users[_0x22a09f(0xda)];else{if(_0x486b28[0x0][_0x22a09f(0x132)]==_0x22a09f(0xd6))var _0x530a8b=users[_0x22a09f(0xd6)];else{if(_0x486b28[0x0][_0x22a09f(0x132)]==_0x22a09f(0x121))var _0x530a8b=users[_0x22a09f(0x10b)];else{if(_0x486b28[0x0][_0x22a09f(0x132)]==_0x22a09f(0x118))var _0x530a8b=users[_0x22a09f(0x118)];else{if(_0x486b28[0x0]['language']=='Arabic\x20(ae)')var _0x530a8b=users[_0x22a09f(0x11e)];}}}}}}}_0xefc2dc[_0x22a09f(0xe4)]('view_tf_table',{'success':_0x5bb65c[_0x22a09f(0x114)]('success'),'errors':_0x5bb65c[_0x22a09f(0x114)](_0x22a09f(0xd1)),'master_shop':_0x486b28,'profile':_0x44f7cf,'role':_0x3e9828,'language':_0x530a8b,'data':_0x251dc4});}catch(_0x4efb15){_0xefc2dc[_0x22a09f(0x139)](_0x4efb15);}}),router[a0_0x2dc1db(0xd7)](a0_0x2dc1db(0xfb),auth,async(_0x585ffa,_0x4e8aa5)=>{var _0x6dd68=a0_0x2dc1db;try{const {username:_0x51c28b,email:_0x4faa3b,role:_0x5b5c0a}=_0x585ffa['user'],_0x3cd29b=_0x585ffa[_0x6dd68(0xec)],_0x86d77b=await profile[_0x6dd68(0xe1)]({'email':_0x3cd29b[_0x6dd68(0xe8)]}),_0x309c5e=await master_shop[_0x6dd68(0x12f)](),_0x4abbb5=await warehouse['aggregate']([{'$match':{'status':_0x6dd68(0xdd),'warehouse_category':_0x6dd68(0xca)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);if(_0x309c5e[0x0][_0x6dd68(0x132)]==_0x6dd68(0x124))var _0x420dd6=users[_0x6dd68(0xd0)];else{if(_0x309c5e[0x0]['language']=='Hindi')var _0x420dd6=users[_0x6dd68(0x113)];else{if(_0x309c5e[0x0]['language']==_0x6dd68(0x103))var _0x420dd6=users[_0x6dd68(0x103)];else{if(_0x309c5e[0x0][_0x6dd68(0x132)]==_0x6dd68(0xda))var _0x420dd6=users[_0x6dd68(0xda)];else{if(_0x309c5e[0x0][_0x6dd68(0x132)]==_0x6dd68(0xd6))var _0x420dd6=users['French'];else{if(_0x309c5e[0x0]['language']==_0x6dd68(0x121))var _0x420dd6=users[_0x6dd68(0x10b)];else{if(_0x309c5e[0x0]['language']=='Chinese')var _0x420dd6=users['Chinese'];else{if(_0x309c5e[0x0]['language']==_0x6dd68(0xeb))var _0x420dd6=users['Arabic'];}}}}}}}_0x4e8aa5['render'](_0x6dd68(0x10c),{'success':_0x585ffa[_0x6dd68(0x114)](_0x6dd68(0x115)),'errors':_0x585ffa[_0x6dd68(0x114)](_0x6dd68(0xd1)),'role':_0x3cd29b,'profile':_0x86d77b,'master_shop':_0x309c5e,'dataProcess':_0x4abbb5,'language':_0x420dd6});}catch(_0x298be5){console[_0x6dd68(0x131)](_0x298be5);}}),module[a0_0x2dc1db(0x112)]=router;