var a0_0x3f1e49=a0_0x11fc;(function(_0x588e96,_0x551660){var _0x47dbfe=a0_0x11fc,_0x3db737=_0x588e96();while(!![]){try{var _0x483198=-parseInt(_0x47dbfe(0x17f))/0x1*(-parseInt(_0x47dbfe(0x158))/0x2)+-parseInt(_0x47dbfe(0x19a))/0x3+parseInt(_0x47dbfe(0x145))/0x4*(parseInt(_0x47dbfe(0x19b))/0x5)+parseInt(_0x47dbfe(0x19c))/0x6*(-parseInt(_0x47dbfe(0x15b))/0x7)+-parseInt(_0x47dbfe(0x195))/0x8*(-parseInt(_0x47dbfe(0x196))/0x9)+-parseInt(_0x47dbfe(0x13a))/0xa*(-parseInt(_0x47dbfe(0x1a5))/0xb)+-parseInt(_0x47dbfe(0x19d))/0xc;if(_0x483198===_0x551660)break;else _0x3db737['push'](_0x3db737['shift']());}catch(_0x326c1f){_0x3db737['push'](_0x3db737['shift']());}}}(a0_0x5f35,0x1d0f3));function a0_0x5f35(){var _0x4b2909=['$sale_product.product_name','/viewdata_tf_fg/:id','express','$product_details.production_date','Raw\x20Materials','$invoice','push','Finished\x20Goods','flash','user','$product.invoice','121438gyxbIC','$product.product_name','Router','/view','language','$sale_product.product_code','$product.new_adjust_qty','$name','transaction_finished','find','$sale_product._id','post','data_adjustment','view_tf_table','warehouses','invoice','Hindi','../middleware/auth','$product.to_quantity','email','map','$$invoice','8mVaSTa','668673aKvnkK','transaction_finished_raw','Spanish','$sale_product','412275wxrQsA','844785BPtvzy','188622lrIYrt','1341636sTPgYi','/viewdata_og_fg/:id','$product','English','all','exports','errors','_id','730807aswLQw','warehouse_data','$product.room_names','json','view_table','10CxaFbj','view_og_table','$product.to_room_name','Portuguese\x20(BR)','findById','findOne','$product.expiry_date','$sale_product.unit','success','$sale_product.expiry_date','../public/language/languages.json','4TOHaxP','$room','data_transfer','$product_details.product_stock','$product.production_date','$product.id_transaction_id','$product_details','body','/viewFG','Arabic','$to_warehouse','valueOf','$product_details.unit','$product_details._id','length','data_sales','$sale_product.room_name','German','get','2WfARQz','$product_details.expiry_date','render','14vOYDmJ','French','$product_details.invoice','aggregate','Arabic\x20(ae)','$product.product_code','params','$product.unit','$warehouse_name','nodemailer','$product_details.product_name','Chinese','log','/reports','$product._id','$product.id_transaction','English\x20(US)','Portuguese','$product_details.product_code','$date','$sale_product.production_date','$sale_product.quantity','$sale_product.id_transaction_from','$product.id_transaction_from','$sale_product.invoice'];a0_0x5f35=function(){return _0x4b2909;};return a0_0x5f35();}const express=require(a0_0x3f1e49(0x176)),app=express(),router=express[a0_0x3f1e49(0x181)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require('../models/all_models'),auth=require(a0_0x3f1e49(0x190)),users=require(a0_0x3f1e49(0x144)),nodemailer=require(a0_0x3f1e49(0x164));function a0_0x11fc(_0x5311be,_0x1b6992){var _0x5f35e0=a0_0x5f35();return a0_0x11fc=function(_0x11fcda,_0x29fed8){_0x11fcda=_0x11fcda-0x137;var _0x9de19c=_0x5f35e0[_0x11fcda];return _0x9de19c;},a0_0x11fc(_0x5311be,_0x1b6992);}router['get'](a0_0x3f1e49(0x182),auth,async(_0x33aaca,_0x8e4349)=>{var _0x21afae=a0_0x3f1e49;try{const {username:_0x5b0c22,email:_0x2532f3,role:_0x4c4a39}=_0x33aaca[_0x21afae(0x17d)],_0x2fffa4=_0x33aaca[_0x21afae(0x17d)],_0x497fe3=await profile[_0x21afae(0x13f)]({'email':_0x2fffa4[_0x21afae(0x192)]}),_0x3712bc=await master_shop[_0x21afae(0x188)](),_0x22153b=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0x21afae(0x17b)}},{'$group':{'_id':_0x21afae(0x186),'name':{'$first':_0x21afae(0x186)}}}]);if(_0x3712bc[0x0][_0x21afae(0x183)]==_0x21afae(0x16b))var _0x2e99db=users[_0x21afae(0x1a0)];else{if(_0x3712bc[0x0][_0x21afae(0x183)]==_0x21afae(0x18f))var _0x2e99db=users[_0x21afae(0x18f)];else{if(_0x3712bc[0x0]['language']==_0x21afae(0x156))var _0x2e99db=users['German'];else{if(_0x3712bc[0x0][_0x21afae(0x183)]==_0x21afae(0x198))var _0x2e99db=users[_0x21afae(0x198)];else{if(_0x3712bc[0x0]['language']==_0x21afae(0x15c))var _0x2e99db=users[_0x21afae(0x15c)];else{if(_0x3712bc[0x0]['language']==_0x21afae(0x13d))var _0x2e99db=users[_0x21afae(0x16c)];else{if(_0x3712bc[0x0]['language']=='Chinese')var _0x2e99db=users[_0x21afae(0x166)];else{if(_0x3712bc[0x0]['language']==_0x21afae(0x15f))var _0x2e99db=users['Arabic'];}}}}}}}_0x8e4349[_0x21afae(0x15a)](_0x21afae(0x187),{'success':_0x33aaca[_0x21afae(0x17c)](_0x21afae(0x142)),'errors':_0x33aaca[_0x21afae(0x17c)](_0x21afae(0x1a3)),'role':_0x2fffa4,'profile':_0x497fe3,'master_shop':_0x3712bc,'dataProcess':_0x22153b,'language':_0x2e99db});}catch(_0x10a764){console[_0x21afae(0x167)](_0x10a764);}}),router[a0_0x3f1e49(0x18a)](a0_0x3f1e49(0x168),auth,async(_0x3dbf50,_0x2a4f71)=>{var _0x513073=a0_0x3f1e49;const {product_category:_0x4bfb0d,transaction_category:_0x596805,transaction_date_from:_0x4adab9,transaction_date_to:_0x3f17e4,warehouse_category:_0x12117c,item_code:_0x553244}=_0x3dbf50[_0x513073(0x14c)];console[_0x513073(0x167)](_0x12117c);if(_0x4bfb0d=='rm'){if(_0x12117c=='all'){var _0x5169cc=await purchases[_0x513073(0x15e)]([{'$match':{'date':{'$gte':_0x4adab9,'$lte':_0x3f17e4}}},{'$lookup':{'from':_0x513073(0x18d),'let':{'invoice':_0x513073(0x179)},'pipeline':[{'$unwind':_0x513073(0x14b)},{'$match':{'$expr':{'$eq':[_0x513073(0x194),_0x513073(0x15d)]}}},{'$project':{'_id':_0x513073(0x152),'product_name':_0x513073(0x165),'product_code':'$product_details.product_code','quantity_available':_0x513073(0x148),'warehouse_name':_0x513073(0x186),'warehouse_room':'$room','invoice':_0x513073(0x15d),'production_date':_0x513073(0x177),'expiry_date':_0x513073(0x159),'UOM':_0x513073(0x151)}}],'as':_0x513073(0x1a6)}}]);_0x5169cc[_0x513073(0x154)]={},await Promise[_0x513073(0x1a1)](_0x5169cc[_0x513073(0x193)](async _0xe3f77b=>{var _0x3c1118=_0x513073;_0x5169cc[_0x3c1118(0x154)][_0xe3f77b[_0x3c1118(0x18e)]]=[],await Promise[_0x3c1118(0x1a1)](_0xe3f77b[_0x3c1118(0x1a6)][_0x3c1118(0x193)](async _0x571c10=>{var _0x10f0fd=_0x3c1118;const _0x2ee5e8=await sales[_0x10f0fd(0x15e)]([{'$unwind':_0x10f0fd(0x199)},{'$match':{'sale_product.id_transaction_from':_0x571c10[_0x10f0fd(0x1a4)][_0x10f0fd(0x150)](),'sale_product.invoice':_0x571c10[_0x10f0fd(0x18e)]}},{'$project':{'_id':_0x10f0fd(0x189),'product_name':'$sale_product.product_name','product_code':'$sale_product.product_code','quantity_available':_0x10f0fd(0x170),'warehouse_name':_0x10f0fd(0x163),'warehouse_room':'$sale_product.room_name','product_invoice':'$sale_product.invoice','invoice':_0x10f0fd(0x179),'id_transaction_from':_0x10f0fd(0x171),'date':_0x10f0fd(0x16e),'production_date':_0x10f0fd(0x16f),'expiry_date':_0x10f0fd(0x143),'UOM':'$sale_product.unit'}}]);_0x2ee5e8[_0x10f0fd(0x153)]>0x0&&_0x5169cc[_0x10f0fd(0x154)][_0xe3f77b[_0x10f0fd(0x18e)]]['push'](..._0x2ee5e8);}));})),_0x5169cc['data_sales']=_0x5169cc['data_sales'],_0x5169cc[_0x513073(0x18b)]={},await Promise[_0x513073(0x1a1)](_0x5169cc[_0x513073(0x193)](async _0x4cd8b5=>{var _0x57acfd=_0x513073;_0x5169cc[_0x57acfd(0x18b)][_0x4cd8b5[_0x57acfd(0x18e)]]=[],await Promise['all'](_0x4cd8b5['warehouse_data'][_0x57acfd(0x193)](async _0x11eca7=>{var _0x222f88=_0x57acfd;const _0x1b5dcd=await adjustment[_0x222f88(0x15e)]([{'$unwind':_0x222f88(0x19f)},{'$match':{'product.id_transaction_from':_0x11eca7[_0x222f88(0x1a4)]['valueOf'](),'product.invoice':_0x11eca7[_0x222f88(0x18e)]}},{'$project':{'_id':_0x222f88(0x169),'product_name':_0x222f88(0x180),'product_code':_0x222f88(0x160),'quantity_available':_0x222f88(0x185),'warehouse_name':_0x222f88(0x163),'warehouse_room':_0x222f88(0x137),'product_invoice':_0x222f88(0x17e),'invoice':_0x222f88(0x179),'id_transaction_from':'$product.id_transaction_from','date':_0x222f88(0x16e),'production_date':_0x222f88(0x149),'expiry_date':_0x222f88(0x140),'UOM':_0x222f88(0x162)}}]);_0x1b5dcd[_0x222f88(0x153)]>0x0&&_0x5169cc[_0x222f88(0x18b)][_0x4cd8b5[_0x222f88(0x18e)]]['push'](..._0x1b5dcd);}));})),_0x5169cc[_0x513073(0x147)]={},await Promise['all'](_0x5169cc['map'](async _0x424318=>{var _0x4c3311=_0x513073;_0x5169cc[_0x4c3311(0x147)][_0x424318[_0x4c3311(0x18e)]]=[],await Promise['all'](_0x424318[_0x4c3311(0x1a6)]['map'](async _0x2f5502=>{var _0x1a6540=_0x4c3311;const _0xfaf8d7=await transfers['aggregate']([{'$unwind':_0x1a6540(0x19f)},{'$match':{'product.id_transaction_id':_0x2f5502[_0x1a6540(0x1a4)][_0x1a6540(0x150)](),'product.To_invoice':_0x2f5502[_0x1a6540(0x18e)]}},{'$project':{'_id':_0x1a6540(0x169),'product_name':_0x1a6540(0x180),'product_code':_0x1a6540(0x160),'quantity_available':_0x1a6540(0x191),'warehouse_name':_0x1a6540(0x14f),'warehouse_room':_0x1a6540(0x137),'product_invoice':'$product.to_room_name','invoice':'$invoice','id_transaction_from':_0x1a6540(0x14a),'date':_0x1a6540(0x16e),'production_date':_0x1a6540(0x149),'expiry_date':'$product.expiry_date','UOM':_0x1a6540(0x162)}}]);_0xfaf8d7[_0x1a6540(0x153)]>0x0&&_0x5169cc[_0x1a6540(0x147)][_0x424318[_0x1a6540(0x18e)]]['push'](..._0xfaf8d7);}));})),_0x2a4f71[_0x513073(0x138)]({'purchases_warehouse':_0x5169cc,'data_sales':_0x5169cc['data_sales'],'data_adjustment':_0x5169cc[_0x513073(0x18b)],'data_transfer':_0x5169cc[_0x513073(0x147)]});}else{var _0x5169cc=await purchases['aggregate']([{'$match':{'warehouse_name':_0x12117c,'date':{'$gte':_0x4adab9,'$lte':_0x3f17e4}}},{'$lookup':{'from':_0x513073(0x18d),'let':{'invoice':_0x513073(0x179)},'pipeline':[{'$unwind':_0x513073(0x14b)},{'$match':{'$expr':{'$eq':[_0x513073(0x194),_0x513073(0x15d)]}}},{'$project':{'_id':_0x513073(0x152),'product_name':'$product_details.product_name','product_code':'$product_details.product_code','quantity_available':_0x513073(0x148),'warehouse_name':'$name','warehouse_room':'$room','invoice':'$product_details.invoice','production_date':_0x513073(0x177),'expiry_date':'$product_details.expiry_date','UOM':_0x513073(0x151)}}],'as':'warehouse_data'}}]);_0x5169cc[_0x513073(0x154)]={},await Promise[_0x513073(0x1a1)](_0x5169cc[_0x513073(0x193)](async _0x5e3791=>{var _0x2991f8=_0x513073;_0x5169cc[_0x2991f8(0x154)][_0x5e3791[_0x2991f8(0x18e)]]=[],await Promise['all'](_0x5e3791['warehouse_data'][_0x2991f8(0x193)](async _0x4c795c=>{var _0x38a247=_0x2991f8;const _0x45e446=await sales[_0x38a247(0x15e)]([{'$unwind':_0x38a247(0x199)},{'$match':{'sale_product.id_transaction_from':_0x4c795c[_0x38a247(0x1a4)][_0x38a247(0x150)](),'sale_product.invoice':_0x4c795c[_0x38a247(0x18e)]}},{'$project':{'_id':_0x38a247(0x189),'product_name':_0x38a247(0x174),'product_code':_0x38a247(0x184),'quantity_available':_0x38a247(0x170),'warehouse_name':_0x38a247(0x163),'warehouse_room':_0x38a247(0x155),'product_invoice':'$sale_product.invoice','invoice':_0x38a247(0x179),'id_transaction_from':_0x38a247(0x171),'date':'$date','production_date':_0x38a247(0x16f),'expiry_date':_0x38a247(0x143),'UOM':'$sale_product.unit'}}]);_0x45e446[_0x38a247(0x153)]>0x0&&_0x5169cc[_0x38a247(0x154)][_0x5e3791[_0x38a247(0x18e)]][_0x38a247(0x17a)](..._0x45e446);}));})),_0x5169cc[_0x513073(0x154)]=_0x5169cc[_0x513073(0x154)],_0x5169cc['data_adjustment']={},await Promise[_0x513073(0x1a1)](_0x5169cc[_0x513073(0x193)](async _0x2b03e3=>{var _0x4118da=_0x513073;_0x5169cc[_0x4118da(0x18b)][_0x2b03e3[_0x4118da(0x18e)]]=[],await Promise[_0x4118da(0x1a1)](_0x2b03e3[_0x4118da(0x1a6)][_0x4118da(0x193)](async _0x4b11df=>{var _0x454532=_0x4118da;const _0x524aeb=await adjustment[_0x454532(0x15e)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x4b11df[_0x454532(0x1a4)]['valueOf'](),'product.invoice':_0x4b11df[_0x454532(0x18e)]}},{'$project':{'_id':_0x454532(0x169),'product_name':_0x454532(0x180),'product_code':_0x454532(0x160),'quantity_available':_0x454532(0x185),'warehouse_name':_0x454532(0x163),'warehouse_room':_0x454532(0x137),'product_invoice':'$product.invoice','invoice':_0x454532(0x179),'id_transaction_from':_0x454532(0x172),'date':'$date','production_date':_0x454532(0x149),'expiry_date':'$product.expiry_date','UOM':_0x454532(0x162)}}]);_0x524aeb['length']>0x0&&_0x5169cc[_0x454532(0x18b)][_0x2b03e3[_0x454532(0x18e)]]['push'](..._0x524aeb);}));})),_0x5169cc['data_transfer']={},await Promise['all'](_0x5169cc[_0x513073(0x193)](async _0x17be6d=>{var _0x1315fc=_0x513073;_0x5169cc[_0x1315fc(0x147)][_0x17be6d['invoice']]=[],await Promise[_0x1315fc(0x1a1)](_0x17be6d[_0x1315fc(0x1a6)][_0x1315fc(0x193)](async _0x165859=>{var _0x2569fa=_0x1315fc;const _0x1230ac=await transfers[_0x2569fa(0x15e)]([{'$unwind':_0x2569fa(0x19f)},{'$match':{'product.id_transaction_id':_0x165859[_0x2569fa(0x1a4)][_0x2569fa(0x150)](),'product.To_invoice':_0x165859[_0x2569fa(0x18e)]}},{'$project':{'_id':_0x2569fa(0x169),'product_name':_0x2569fa(0x180),'product_code':_0x2569fa(0x160),'quantity_available':'$product.to_quantity','warehouse_name':_0x2569fa(0x14f),'warehouse_room':_0x2569fa(0x137),'product_invoice':_0x2569fa(0x13c),'invoice':_0x2569fa(0x179),'id_transaction_from':'$product.id_transaction_id','date':_0x2569fa(0x16e),'production_date':_0x2569fa(0x149),'expiry_date':_0x2569fa(0x140),'UOM':_0x2569fa(0x162)}}]);_0x1230ac[_0x2569fa(0x153)]>0x0&&_0x5169cc['data_transfer'][_0x17be6d[_0x2569fa(0x18e)]][_0x2569fa(0x17a)](..._0x1230ac);}));})),_0x2a4f71[_0x513073(0x138)]({'purchases_warehouse':_0x5169cc,'data_sales':_0x5169cc['data_sales'],'data_adjustment':_0x5169cc[_0x513073(0x18b)],'data_transfer':_0x5169cc[_0x513073(0x147)]});}}else{if(_0x12117c=='all'){var _0x5169cc=await purchases_finished[_0x513073(0x15e)]([{'$match':{'date':{'$gte':_0x4adab9,'$lte':_0x3f17e4}}},{'$lookup':{'from':_0x513073(0x18d),'let':{'invoice':_0x513073(0x179)},'pipeline':[{'$unwind':_0x513073(0x14b)},{'$match':{'$expr':{'$eq':[_0x513073(0x194),_0x513073(0x15d)]}}},{'$project':{'_id':_0x513073(0x152),'product_name':'$product_details.product_name','product_code':_0x513073(0x16d),'quantity_available':_0x513073(0x148),'warehouse_name':_0x513073(0x186),'warehouse_room':_0x513073(0x146),'invoice':_0x513073(0x15d),'production_date':'$product_details.production_date','expiry_date':'$product_details.expiry_date','UOM':_0x513073(0x151)}}],'as':_0x513073(0x1a6)}}]);_0x5169cc['data_sales']={},await Promise[_0x513073(0x1a1)](_0x5169cc[_0x513073(0x193)](async _0x4525fa=>{var _0x2bf82c=_0x513073;_0x5169cc[_0x2bf82c(0x154)][_0x4525fa[_0x2bf82c(0x18e)]]=[],await Promise[_0x2bf82c(0x1a1)](_0x4525fa['warehouse_data'][_0x2bf82c(0x193)](async _0x5e12a5=>{var _0x46cd69=_0x2bf82c;const _0x7a3c16=await sales_finished[_0x46cd69(0x15e)]([{'$unwind':_0x46cd69(0x199)},{'$match':{'sale_product.id_transaction_from':_0x5e12a5[_0x46cd69(0x1a4)]['valueOf'](),'sale_product.invoice':_0x5e12a5[_0x46cd69(0x18e)]}},{'$project':{'_id':_0x46cd69(0x189),'product_name':_0x46cd69(0x174),'product_code':_0x46cd69(0x184),'quantity_available':_0x46cd69(0x170),'warehouse_name':_0x46cd69(0x163),'warehouse_room':'$sale_product.room_name','product_invoice':'$sale_product.invoice','invoice':'$invoice','id_transaction_from':_0x46cd69(0x171),'date':_0x46cd69(0x16e),'production_date':'$sale_product.production_date','expiry_date':_0x46cd69(0x143),'UOM':_0x46cd69(0x141)}}]);_0x7a3c16['length']>0x0&&_0x5169cc['data_sales'][_0x4525fa[_0x46cd69(0x18e)]][_0x46cd69(0x17a)](..._0x7a3c16);}));})),_0x5169cc[_0x513073(0x154)]=_0x5169cc[_0x513073(0x154)],_0x5169cc[_0x513073(0x18b)]={},await Promise['all'](_0x5169cc['map'](async _0x4d3ea6=>{var _0x2f932f=_0x513073;_0x5169cc[_0x2f932f(0x18b)][_0x4d3ea6[_0x2f932f(0x18e)]]=[],await Promise[_0x2f932f(0x1a1)](_0x4d3ea6[_0x2f932f(0x1a6)][_0x2f932f(0x193)](async _0x1354ac=>{var _0x577e3b=_0x2f932f;const _0x482b13=await adjustment_finished[_0x577e3b(0x15e)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x1354ac[_0x577e3b(0x1a4)][_0x577e3b(0x150)](),'product.invoice':_0x1354ac[_0x577e3b(0x18e)]}},{'$project':{'_id':_0x577e3b(0x169),'product_name':_0x577e3b(0x180),'product_code':_0x577e3b(0x160),'quantity_available':_0x577e3b(0x185),'warehouse_name':_0x577e3b(0x163),'warehouse_room':_0x577e3b(0x137),'product_invoice':_0x577e3b(0x17e),'invoice':_0x577e3b(0x179),'id_transaction_from':_0x577e3b(0x172),'date':_0x577e3b(0x16e),'production_date':'$product.production_date','expiry_date':_0x577e3b(0x140),'UOM':_0x577e3b(0x162)}}]);_0x482b13['length']>0x0&&_0x5169cc[_0x577e3b(0x18b)][_0x4d3ea6[_0x577e3b(0x18e)]][_0x577e3b(0x17a)](..._0x482b13);}));})),_0x5169cc[_0x513073(0x147)]={},await Promise[_0x513073(0x1a1)](_0x5169cc[_0x513073(0x193)](async _0xdf844=>{var _0xda1564=_0x513073;_0x5169cc[_0xda1564(0x147)][_0xdf844[_0xda1564(0x18e)]]=[],await Promise[_0xda1564(0x1a1)](_0xdf844['warehouse_data'][_0xda1564(0x193)](async _0x21cfad=>{var _0xe0586f=_0xda1564;const _0x5a5b42=await transfers_finished[_0xe0586f(0x15e)]([{'$unwind':_0xe0586f(0x19f)},{'$match':{'product.id_transaction':_0x21cfad[_0xe0586f(0x1a4)][_0xe0586f(0x150)](),'product.from_invoice':_0x21cfad[_0xe0586f(0x18e)]}},{'$project':{'_id':_0xe0586f(0x169),'product_name':_0xe0586f(0x180),'product_code':'$product.product_code','quantity_available':_0xe0586f(0x191),'warehouse_name':_0xe0586f(0x14f),'warehouse_room':_0xe0586f(0x137),'product_invoice':_0xe0586f(0x13c),'invoice':_0xe0586f(0x179),'id_transaction_from':_0xe0586f(0x16a),'date':_0xe0586f(0x16e),'production_date':_0xe0586f(0x149),'expiry_date':'$product.expiry_date','UOM':_0xe0586f(0x162)}}]);_0x5a5b42[_0xe0586f(0x153)]>0x0&&_0x5169cc[_0xe0586f(0x147)][_0xdf844[_0xe0586f(0x18e)]][_0xe0586f(0x17a)](..._0x5a5b42);}));})),_0x2a4f71[_0x513073(0x138)]({'purchases_warehouse':_0x5169cc,'data_sales':_0x5169cc[_0x513073(0x154)],'data_adjustment':_0x5169cc[_0x513073(0x18b)],'data_transfer':_0x5169cc[_0x513073(0x147)]});}else{var _0x5169cc=await purchases_finished[_0x513073(0x15e)]([{'$match':{'warehouse_name':_0x12117c,'date':{'$gte':_0x4adab9,'$lte':_0x3f17e4}}},{'$lookup':{'from':_0x513073(0x18d),'let':{'invoice':_0x513073(0x179)},'pipeline':[{'$unwind':_0x513073(0x14b)},{'$match':{'$expr':{'$eq':[_0x513073(0x194),_0x513073(0x15d)]}}},{'$project':{'_id':_0x513073(0x152),'product_name':_0x513073(0x165),'product_code':_0x513073(0x16d),'quantity_available':_0x513073(0x148),'warehouse_name':'$name','warehouse_room':'$room','invoice':_0x513073(0x15d),'production_date':_0x513073(0x177),'expiry_date':_0x513073(0x159),'UOM':_0x513073(0x151)}}],'as':'warehouse_data'}}]);_0x5169cc['data_sales']={},await Promise[_0x513073(0x1a1)](_0x5169cc[_0x513073(0x193)](async _0xf400d6=>{var _0x14a049=_0x513073;_0x5169cc['data_sales'][_0xf400d6[_0x14a049(0x18e)]]=[],await Promise[_0x14a049(0x1a1)](_0xf400d6[_0x14a049(0x1a6)]['map'](async _0x5fc39f=>{var _0x56229e=_0x14a049;const _0xa03c01=await sales_finished[_0x56229e(0x15e)]([{'$unwind':_0x56229e(0x199)},{'$match':{'sale_product.id_transaction_from':_0x5fc39f[_0x56229e(0x1a4)][_0x56229e(0x150)](),'sale_product.invoice':_0x5fc39f[_0x56229e(0x18e)]}},{'$project':{'_id':_0x56229e(0x189),'product_name':_0x56229e(0x174),'product_code':'$sale_product.product_code','quantity_available':'$sale_product.quantity','warehouse_name':'$warehouse_name','warehouse_room':_0x56229e(0x155),'product_invoice':_0x56229e(0x173),'invoice':_0x56229e(0x179),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x56229e(0x16e),'production_date':_0x56229e(0x16f),'expiry_date':'$sale_product.expiry_date','UOM':_0x56229e(0x141)}}]);_0xa03c01[_0x56229e(0x153)]>0x0&&_0x5169cc[_0x56229e(0x154)][_0xf400d6[_0x56229e(0x18e)]][_0x56229e(0x17a)](..._0xa03c01);}));})),_0x5169cc[_0x513073(0x154)]=_0x5169cc['data_sales'],_0x5169cc[_0x513073(0x18b)]={},await Promise[_0x513073(0x1a1)](_0x5169cc[_0x513073(0x193)](async _0x4b03cb=>{var _0x542169=_0x513073;_0x5169cc[_0x542169(0x18b)][_0x4b03cb[_0x542169(0x18e)]]=[],await Promise['all'](_0x4b03cb[_0x542169(0x1a6)][_0x542169(0x193)](async _0x2041c4=>{var _0x4c01ff=_0x542169;const _0x3e3991=await adjustment_finished[_0x4c01ff(0x15e)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x2041c4[_0x4c01ff(0x1a4)][_0x4c01ff(0x150)](),'product.invoice':_0x2041c4[_0x4c01ff(0x18e)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0x4c01ff(0x160),'quantity_available':_0x4c01ff(0x185),'warehouse_name':_0x4c01ff(0x163),'warehouse_room':_0x4c01ff(0x137),'product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':_0x4c01ff(0x172),'date':_0x4c01ff(0x16e),'production_date':_0x4c01ff(0x149),'expiry_date':_0x4c01ff(0x140),'UOM':_0x4c01ff(0x162)}}]);_0x3e3991[_0x4c01ff(0x153)]>0x0&&_0x5169cc[_0x4c01ff(0x18b)][_0x4b03cb[_0x4c01ff(0x18e)]][_0x4c01ff(0x17a)](..._0x3e3991);}));})),_0x5169cc[_0x513073(0x147)]={},await Promise[_0x513073(0x1a1)](_0x5169cc['map'](async _0x255fd3=>{var _0x43fc91=_0x513073;_0x5169cc[_0x43fc91(0x147)][_0x255fd3[_0x43fc91(0x18e)]]=[],await Promise['all'](_0x255fd3['warehouse_data'][_0x43fc91(0x193)](async _0x348401=>{var _0x5c8628=_0x43fc91;const _0xa2eb45=await transfers_finished[_0x5c8628(0x15e)]([{'$unwind':_0x5c8628(0x19f)},{'$match':{'product.id_transaction':_0x348401[_0x5c8628(0x1a4)][_0x5c8628(0x150)](),'product.from_invoice':_0x348401[_0x5c8628(0x18e)]}},{'$project':{'_id':_0x5c8628(0x169),'product_name':'$product.product_name','product_code':_0x5c8628(0x160),'quantity_available':_0x5c8628(0x191),'warehouse_name':_0x5c8628(0x14f),'warehouse_room':_0x5c8628(0x137),'product_invoice':_0x5c8628(0x13c),'invoice':'$invoice','id_transaction_from':_0x5c8628(0x16a),'date':_0x5c8628(0x16e),'production_date':'$product.production_date','expiry_date':_0x5c8628(0x140),'UOM':_0x5c8628(0x162)}}]);_0xa2eb45[_0x5c8628(0x153)]>0x0&&_0x5169cc[_0x5c8628(0x147)][_0x255fd3[_0x5c8628(0x18e)]][_0x5c8628(0x17a)](..._0xa2eb45);}));})),_0x2a4f71['json']({'purchases_warehouse':_0x5169cc,'data_sales':_0x5169cc[_0x513073(0x154)],'data_adjustment':_0x5169cc[_0x513073(0x18b)],'data_transfer':_0x5169cc['data_transfer']});}}}),router[a0_0x3f1e49(0x157)]('/viewdata_inc_fg/:id',auth,async(_0xfd33a4,_0x5e28cf)=>{var _0x2391e4=a0_0x3f1e49;try{const _0x143d7a=_0xfd33a4[_0x2391e4(0x161)]['id'];var _0x2f308b=await purchases_finished[_0x2391e4(0x13e)](_0x143d7a);const _0x4c42f9=await master_shop[_0x2391e4(0x188)](),_0x2be370=_0xfd33a4[_0x2391e4(0x17d)],_0x59b09d=await profile[_0x2391e4(0x13f)]({'email':_0x2be370[_0x2391e4(0x192)]});if(_0x4c42f9[0x0][_0x2391e4(0x183)]==_0x2391e4(0x16b))var _0x2fd132=users[_0x2391e4(0x1a0)];else{if(_0x4c42f9[0x0]['language']=='Hindi')var _0x2fd132=users['Hindi'];else{if(_0x4c42f9[0x0]['language']==_0x2391e4(0x156))var _0x2fd132=users[_0x2391e4(0x156)];else{if(_0x4c42f9[0x0][_0x2391e4(0x183)]=='Spanish')var _0x2fd132=users[_0x2391e4(0x198)];else{if(_0x4c42f9[0x0]['language']=='French')var _0x2fd132=users[_0x2391e4(0x15c)];else{if(_0x4c42f9[0x0][_0x2391e4(0x183)]==_0x2391e4(0x13d))var _0x2fd132=users[_0x2391e4(0x16c)];else{if(_0x4c42f9[0x0][_0x2391e4(0x183)]==_0x2391e4(0x166))var _0x2fd132=users[_0x2391e4(0x166)];else{if(_0x4c42f9[0x0][_0x2391e4(0x183)]=='Arabic\x20(ae)')var _0x2fd132=users[_0x2391e4(0x14e)];}}}}}}}_0x5e28cf[_0x2391e4(0x15a)](_0x2391e4(0x139),{'success':_0xfd33a4['flash'](_0x2391e4(0x142)),'errors':_0xfd33a4[_0x2391e4(0x17c)](_0x2391e4(0x1a3)),'master_shop':_0x4c42f9,'profile':_0x59b09d,'role':_0x2be370,'language':_0x2fd132,'data':_0x2f308b});}catch(_0x4209b7){_0x5e28cf[_0x2391e4(0x138)](_0x4209b7);}}),router[a0_0x3f1e49(0x157)](a0_0x3f1e49(0x19e),auth,async(_0x4452c8,_0x5a3cee)=>{var _0x449828=a0_0x3f1e49;try{const _0x2cf8af=_0x4452c8[_0x449828(0x161)]['id'];var _0x1176b7=await sales_finished[_0x449828(0x13e)](_0x2cf8af);const _0x49e7e2=await master_shop[_0x449828(0x188)](),_0x4f06c1=_0x4452c8[_0x449828(0x17d)],_0x600c08=await profile['findOne']({'email':_0x4f06c1[_0x449828(0x192)]});if(_0x49e7e2[0x0][_0x449828(0x183)]==_0x449828(0x16b))var _0x5d4449=users['English'];else{if(_0x49e7e2[0x0]['language']==_0x449828(0x18f))var _0x5d4449=users[_0x449828(0x18f)];else{if(_0x49e7e2[0x0][_0x449828(0x183)]==_0x449828(0x156))var _0x5d4449=users['German'];else{if(_0x49e7e2[0x0][_0x449828(0x183)]==_0x449828(0x198))var _0x5d4449=users[_0x449828(0x198)];else{if(_0x49e7e2[0x0][_0x449828(0x183)]==_0x449828(0x15c))var _0x5d4449=users[_0x449828(0x15c)];else{if(_0x49e7e2[0x0][_0x449828(0x183)]==_0x449828(0x13d))var _0x5d4449=users[_0x449828(0x16c)];else{if(_0x49e7e2[0x0][_0x449828(0x183)]=='Chinese')var _0x5d4449=users[_0x449828(0x166)];else{if(_0x49e7e2[0x0]['language']==_0x449828(0x15f))var _0x5d4449=users[_0x449828(0x14e)];}}}}}}}_0x5a3cee[_0x449828(0x15a)](_0x449828(0x13b),{'success':_0x4452c8[_0x449828(0x17c)](_0x449828(0x142)),'errors':_0x4452c8[_0x449828(0x17c)](_0x449828(0x1a3)),'master_shop':_0x49e7e2,'profile':_0x600c08,'role':_0x4f06c1,'language':_0x5d4449,'data':_0x1176b7});}catch(_0x4becc1){_0x5a3cee[_0x449828(0x138)](_0x4becc1);}}),router[a0_0x3f1e49(0x157)](a0_0x3f1e49(0x175),auth,async(_0x1d2332,_0x29496f)=>{var _0x1fc671=a0_0x3f1e49;try{const _0x42ebfd=_0x1d2332[_0x1fc671(0x161)]['id'];var _0x40d2b1=await transfers_finished[_0x1fc671(0x13e)](_0x42ebfd);const _0x4fea80=await master_shop['find'](),_0x38a7f2=_0x1d2332[_0x1fc671(0x17d)],_0x43d65c=await profile[_0x1fc671(0x13f)]({'email':_0x38a7f2[_0x1fc671(0x192)]});if(_0x4fea80[0x0][_0x1fc671(0x183)]==_0x1fc671(0x16b))var _0x248edc=users[_0x1fc671(0x1a0)];else{if(_0x4fea80[0x0][_0x1fc671(0x183)]==_0x1fc671(0x18f))var _0x248edc=users[_0x1fc671(0x18f)];else{if(_0x4fea80[0x0]['language']=='German')var _0x248edc=users['German'];else{if(_0x4fea80[0x0]['language']==_0x1fc671(0x198))var _0x248edc=users[_0x1fc671(0x198)];else{if(_0x4fea80[0x0][_0x1fc671(0x183)]=='French')var _0x248edc=users[_0x1fc671(0x15c)];else{if(_0x4fea80[0x0]['language']=='Portuguese\x20(BR)')var _0x248edc=users[_0x1fc671(0x16c)];else{if(_0x4fea80[0x0]['language']==_0x1fc671(0x166))var _0x248edc=users['Chinese'];else{if(_0x4fea80[0x0][_0x1fc671(0x183)]==_0x1fc671(0x15f))var _0x248edc=users[_0x1fc671(0x14e)];}}}}}}}_0x29496f[_0x1fc671(0x15a)](_0x1fc671(0x18c),{'success':_0x1d2332[_0x1fc671(0x17c)](_0x1fc671(0x142)),'errors':_0x1d2332[_0x1fc671(0x17c)](_0x1fc671(0x1a3)),'master_shop':_0x4fea80,'profile':_0x43d65c,'role':_0x38a7f2,'language':_0x248edc,'data':_0x40d2b1});}catch(_0x3e99ba){_0x29496f['json'](_0x3e99ba);}}),router[a0_0x3f1e49(0x157)](a0_0x3f1e49(0x14d),auth,async(_0x1024d5,_0x25e939)=>{var _0x4c793e=a0_0x3f1e49;try{const {username:_0x5f04ef,email:_0xf8c2b0,role:_0x3d51d4}=_0x1024d5[_0x4c793e(0x17d)],_0x4a1a55=_0x1024d5[_0x4c793e(0x17d)],_0x510d1a=await profile[_0x4c793e(0x13f)]({'email':_0x4a1a55[_0x4c793e(0x192)]}),_0x145182=await master_shop[_0x4c793e(0x188)](),_0x53f586=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0x4c793e(0x178)}},{'$group':{'_id':'$name','name':{'$first':_0x4c793e(0x186)}}}]);if(_0x145182[0x0][_0x4c793e(0x183)]==_0x4c793e(0x16b))var _0x203821=users[_0x4c793e(0x1a0)];else{if(_0x145182[0x0][_0x4c793e(0x183)]==_0x4c793e(0x18f))var _0x203821=users[_0x4c793e(0x18f)];else{if(_0x145182[0x0][_0x4c793e(0x183)]==_0x4c793e(0x156))var _0x203821=users[_0x4c793e(0x156)];else{if(_0x145182[0x0][_0x4c793e(0x183)]==_0x4c793e(0x198))var _0x203821=users[_0x4c793e(0x198)];else{if(_0x145182[0x0][_0x4c793e(0x183)]==_0x4c793e(0x15c))var _0x203821=users[_0x4c793e(0x15c)];else{if(_0x145182[0x0][_0x4c793e(0x183)]==_0x4c793e(0x13d))var _0x203821=users[_0x4c793e(0x16c)];else{if(_0x145182[0x0]['language']==_0x4c793e(0x166))var _0x203821=users[_0x4c793e(0x166)];else{if(_0x145182[0x0][_0x4c793e(0x183)]==_0x4c793e(0x15f))var _0x203821=users['Arabic'];}}}}}}}_0x25e939[_0x4c793e(0x15a)](_0x4c793e(0x197),{'success':_0x1024d5[_0x4c793e(0x17c)](_0x4c793e(0x142)),'errors':_0x1024d5[_0x4c793e(0x17c)](_0x4c793e(0x1a3)),'role':_0x4a1a55,'profile':_0x510d1a,'master_shop':_0x145182,'dataProcess':_0x53f586,'language':_0x203821});}catch(_0x294de3){console['log'](_0x294de3);}}),module[a0_0x3f1e49(0x1a2)]=router;