var a0_0x2237ae=a0_0x1d0b;function a0_0x1d0b(_0x20c600,_0x2ba514){var _0x589fee=a0_0x589f();return a0_0x1d0b=function(_0x1d0bc3,_0x492302){_0x1d0bc3=_0x1d0bc3-0x172;var _0x434a03=_0x589fee[_0x1d0bc3];return _0x434a03;},a0_0x1d0b(_0x20c600,_0x2ba514);}(function(_0x95ab40,_0x141667){var _0x2da310=a0_0x1d0b,_0x41d0fd=_0x95ab40();while(!![]){try{var _0x168991=parseInt(_0x2da310(0x1b3))/0x1*(-parseInt(_0x2da310(0x1b5))/0x2)+parseInt(_0x2da310(0x1a7))/0x3+parseInt(_0x2da310(0x19c))/0x4*(-parseInt(_0x2da310(0x1dc))/0x5)+parseInt(_0x2da310(0x1be))/0x6*(-parseInt(_0x2da310(0x18e))/0x7)+-parseInt(_0x2da310(0x1ca))/0x8*(-parseInt(_0x2da310(0x1a8))/0x9)+parseInt(_0x2da310(0x194))/0xa+-parseInt(_0x2da310(0x173))/0xb;if(_0x168991===_0x141667)break;else _0x41d0fd['push'](_0x41d0fd['shift']());}catch(_0x6cff71){_0x41d0fd['push'](_0x41d0fd['shift']());}}}(a0_0x589f,0x7dad9));function a0_0x589f(){var _0x4bc87f=['$sale_product.production_date','$product_details.product_code','$product.product_name','$sale_product.room_name','../models/all_models','1110795gIiGRY','135243ekijyu','express','German','$product_details.invoice','find','$sale_product.quantity','Portuguese','json','data_transfer','/view','$product.product_code','2389ECWIJJ','$product.id_transaction','148SohTrT','view_tf_table','$invoice','$product.to_quantity','$product.id_transaction_id','$sale_product','Raw\x20Materials','Arabic\x20(ae)','data_adjustment','88122Ocnkpe','view_table','length','French','post','warehouse_data','$sale_product.id_transaction_from','Chinese','$product_details.expiry_date','$sale_product.expiry_date','user','$product_details.product_stock','408XCOcbE','language','/reports','$product_details.unit','$sale_product.product_name','log','get','success','$warehouse_name','$date','$product_details','render','$to_warehouse','$product_details.product_name','invoice','$product.expiry_date','$product_details.production_date','view_og_table','15EjcWUN','$$invoice','transaction_finished_raw','3034669mSxMXK','warehouses','Spanish','errors','push','flash','$product.invoice','Hindi','$name','findById','$product.id_transaction_from','$product.to_room_name','aggregate','$product.production_date','$product._id','English','$sale_product.product_code','Finished\x20Goods','$product.room_names','$sale_product.invoice','email','data_sales','exports','Portuguese\x20(BR)','$product','Enabled','/viewdata_og_fg/:id','476DJdzQT','$sale_product.unit','Arabic','$product.new_adjust_qty','body','$sale_product._id','8941270hgwigg','nodemailer','$product_details._id','map','valueOf','English\x20(US)','_id','all','86148EsGHFe','$product.unit','params','transaction_finished','$room','findOne'];a0_0x589f=function(){return _0x4bc87f;};return a0_0x589f();}const express=require(a0_0x2237ae(0x1a9)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x2237ae(0x1a6)),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),nodemailer=require(a0_0x2237ae(0x195));router[a0_0x2237ae(0x1d0)](a0_0x2237ae(0x1b1),auth,async(_0x3491e4,_0xc6c6e1)=>{var _0x9034bd=a0_0x2237ae;try{const {username:_0x41ab34,email:_0x330cec,role:_0x4b2b83}=_0x3491e4[_0x9034bd(0x1c8)],_0x5c2941=_0x3491e4[_0x9034bd(0x1c8)],_0x55f38e=await profile[_0x9034bd(0x1a1)]({'email':_0x5c2941[_0x9034bd(0x187)]}),_0x3a6a2b=await master_shop['find'](),_0x23b9b3=await warehouse['aggregate']([{'$match':{'status':_0x9034bd(0x18c),'warehouse_category':_0x9034bd(0x184)}},{'$group':{'_id':_0x9034bd(0x17b),'name':{'$first':_0x9034bd(0x17b)}}}]);if(_0x3a6a2b[0x0][_0x9034bd(0x1cb)]==_0x9034bd(0x199))var _0x1ab54e=users[_0x9034bd(0x182)];else{if(_0x3a6a2b[0x0][_0x9034bd(0x1cb)]==_0x9034bd(0x17a))var _0x1ab54e=users[_0x9034bd(0x17a)];else{if(_0x3a6a2b[0x0][_0x9034bd(0x1cb)]==_0x9034bd(0x1aa))var _0x1ab54e=users['German'];else{if(_0x3a6a2b[0x0]['language']==_0x9034bd(0x175))var _0x1ab54e=users[_0x9034bd(0x175)];else{if(_0x3a6a2b[0x0][_0x9034bd(0x1cb)]=='French')var _0x1ab54e=users[_0x9034bd(0x1c1)];else{if(_0x3a6a2b[0x0]['language']==_0x9034bd(0x18a))var _0x1ab54e=users[_0x9034bd(0x1ae)];else{if(_0x3a6a2b[0x0][_0x9034bd(0x1cb)]==_0x9034bd(0x1c5))var _0x1ab54e=users['Chinese'];else{if(_0x3a6a2b[0x0][_0x9034bd(0x1cb)]=='Arabic\x20(ae)')var _0x1ab54e=users[_0x9034bd(0x190)];}}}}}}}_0xc6c6e1[_0x9034bd(0x1d5)](_0x9034bd(0x19f),{'success':_0x3491e4[_0x9034bd(0x178)](_0x9034bd(0x1d1)),'errors':_0x3491e4['flash'](_0x9034bd(0x176)),'role':_0x5c2941,'profile':_0x55f38e,'master_shop':_0x3a6a2b,'dataProcess':_0x23b9b3,'language':_0x1ab54e});}catch(_0x5542b2){console[_0x9034bd(0x1cf)](_0x5542b2);}}),router[a0_0x2237ae(0x1c2)](a0_0x2237ae(0x1cc),auth,async(_0x34794a,_0x172c4d)=>{var _0x12c029=a0_0x2237ae;const {product_category:_0x3a00df,transaction_category:_0x540b3d,transaction_date_from:_0x4cda12,transaction_date_to:_0xe2905b,warehouse_category:_0x277f99,item_code:_0x5cb3cc}=_0x34794a[_0x12c029(0x192)];console[_0x12c029(0x1cf)](_0x277f99);if(_0x3a00df=='rm'){if(_0x277f99==_0x12c029(0x19b)){var _0x552e58=await purchases[_0x12c029(0x17f)]([{'$match':{'date':{'$gte':_0x4cda12,'$lte':_0xe2905b}}},{'$lookup':{'from':_0x12c029(0x174),'let':{'invoice':_0x12c029(0x1b7)},'pipeline':[{'$unwind':_0x12c029(0x1d4)},{'$match':{'$expr':{'$eq':[_0x12c029(0x1dd),_0x12c029(0x1ab)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x12c029(0x1d7),'product_code':_0x12c029(0x1a3),'quantity_available':'$product_details.product_stock','warehouse_name':_0x12c029(0x17b),'warehouse_room':_0x12c029(0x1a0),'invoice':_0x12c029(0x1ab),'production_date':_0x12c029(0x1da),'expiry_date':_0x12c029(0x1c6),'UOM':_0x12c029(0x1cd)}}],'as':_0x12c029(0x1c3)}}]);_0x552e58[_0x12c029(0x188)]={},await Promise[_0x12c029(0x19b)](_0x552e58[_0x12c029(0x197)](async _0x2543d5=>{var _0x1e5efc=_0x12c029;_0x552e58[_0x1e5efc(0x188)][_0x2543d5[_0x1e5efc(0x1d8)]]=[],await Promise['all'](_0x2543d5[_0x1e5efc(0x1c3)][_0x1e5efc(0x197)](async _0x2cab42=>{var _0x4ed775=_0x1e5efc;const _0x148d52=await sales['aggregate']([{'$unwind':_0x4ed775(0x1ba)},{'$match':{'sale_product.id_transaction_from':_0x2cab42['_id'][_0x4ed775(0x198)](),'sale_product.invoice':_0x2cab42[_0x4ed775(0x1d8)]}},{'$project':{'_id':_0x4ed775(0x193),'product_name':_0x4ed775(0x1ce),'product_code':_0x4ed775(0x183),'quantity_available':_0x4ed775(0x1ad),'warehouse_name':_0x4ed775(0x1d2),'warehouse_room':_0x4ed775(0x1a5),'product_invoice':_0x4ed775(0x186),'invoice':_0x4ed775(0x1b7),'id_transaction_from':_0x4ed775(0x1c4),'date':_0x4ed775(0x1d3),'production_date':_0x4ed775(0x1a2),'expiry_date':_0x4ed775(0x1c7),'UOM':_0x4ed775(0x18f)}}]);_0x148d52[_0x4ed775(0x1c0)]>0x0&&_0x552e58[_0x4ed775(0x188)][_0x2543d5[_0x4ed775(0x1d8)]]['push'](..._0x148d52);}));})),_0x552e58['data_sales']=_0x552e58[_0x12c029(0x188)],_0x552e58[_0x12c029(0x1bd)]={},await Promise[_0x12c029(0x19b)](_0x552e58['map'](async _0x4bd490=>{var _0x522676=_0x12c029;_0x552e58['data_adjustment'][_0x4bd490[_0x522676(0x1d8)]]=[],await Promise[_0x522676(0x19b)](_0x4bd490[_0x522676(0x1c3)][_0x522676(0x197)](async _0x2b83e1=>{var _0x22b3fb=_0x522676;const _0x5b2502=await adjustment[_0x22b3fb(0x17f)]([{'$unwind':_0x22b3fb(0x18b)},{'$match':{'product.id_transaction_from':_0x2b83e1[_0x22b3fb(0x19a)][_0x22b3fb(0x198)](),'product.invoice':_0x2b83e1[_0x22b3fb(0x1d8)]}},{'$project':{'_id':_0x22b3fb(0x181),'product_name':'$product.product_name','product_code':_0x22b3fb(0x1b2),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x22b3fb(0x1d2),'warehouse_room':'$product.room_names','product_invoice':'$product.invoice','invoice':_0x22b3fb(0x1b7),'id_transaction_from':'$product.id_transaction_from','date':_0x22b3fb(0x1d3),'production_date':_0x22b3fb(0x180),'expiry_date':'$product.expiry_date','UOM':'$product.unit'}}]);_0x5b2502[_0x22b3fb(0x1c0)]>0x0&&_0x552e58[_0x22b3fb(0x1bd)][_0x4bd490['invoice']][_0x22b3fb(0x177)](..._0x5b2502);}));})),_0x552e58[_0x12c029(0x1b0)]={},await Promise['all'](_0x552e58[_0x12c029(0x197)](async _0x1479b5=>{var _0x44b68a=_0x12c029;_0x552e58[_0x44b68a(0x1b0)][_0x1479b5[_0x44b68a(0x1d8)]]=[],await Promise[_0x44b68a(0x19b)](_0x1479b5[_0x44b68a(0x1c3)]['map'](async _0x1c28f7=>{var _0x199f09=_0x44b68a;const _0x836849=await transfers[_0x199f09(0x17f)]([{'$unwind':_0x199f09(0x18b)},{'$match':{'product.id_transaction_id':_0x1c28f7[_0x199f09(0x19a)][_0x199f09(0x198)](),'product.To_invoice':_0x1c28f7[_0x199f09(0x1d8)]}},{'$project':{'_id':_0x199f09(0x181),'product_name':_0x199f09(0x1a4),'product_code':_0x199f09(0x1b2),'quantity_available':_0x199f09(0x1b8),'warehouse_name':_0x199f09(0x1d6),'warehouse_room':_0x199f09(0x185),'product_invoice':_0x199f09(0x17e),'invoice':'$invoice','id_transaction_from':_0x199f09(0x1b9),'date':_0x199f09(0x1d3),'production_date':_0x199f09(0x180),'expiry_date':'$product.expiry_date','UOM':_0x199f09(0x19d)}}]);_0x836849[_0x199f09(0x1c0)]>0x0&&_0x552e58[_0x199f09(0x1b0)][_0x1479b5[_0x199f09(0x1d8)]]['push'](..._0x836849);}));})),_0x172c4d['json']({'purchases_warehouse':_0x552e58,'data_sales':_0x552e58[_0x12c029(0x188)],'data_adjustment':_0x552e58[_0x12c029(0x1bd)],'data_transfer':_0x552e58[_0x12c029(0x1b0)]});}else{var _0x552e58=await purchases[_0x12c029(0x17f)]([{'$match':{'warehouse_name':_0x277f99,'date':{'$gte':_0x4cda12,'$lte':_0xe2905b}}},{'$lookup':{'from':_0x12c029(0x174),'let':{'invoice':_0x12c029(0x1b7)},'pipeline':[{'$unwind':_0x12c029(0x1d4)},{'$match':{'$expr':{'$eq':[_0x12c029(0x1dd),_0x12c029(0x1ab)]}}},{'$project':{'_id':_0x12c029(0x196),'product_name':_0x12c029(0x1d7),'product_code':_0x12c029(0x1a3),'quantity_available':_0x12c029(0x1c9),'warehouse_name':_0x12c029(0x17b),'warehouse_room':'$room','invoice':_0x12c029(0x1ab),'production_date':_0x12c029(0x1da),'expiry_date':_0x12c029(0x1c6),'UOM':_0x12c029(0x1cd)}}],'as':_0x12c029(0x1c3)}}]);_0x552e58['data_sales']={},await Promise[_0x12c029(0x19b)](_0x552e58[_0x12c029(0x197)](async _0x5e86b1=>{var _0x383251=_0x12c029;_0x552e58[_0x383251(0x188)][_0x5e86b1[_0x383251(0x1d8)]]=[],await Promise[_0x383251(0x19b)](_0x5e86b1[_0x383251(0x1c3)][_0x383251(0x197)](async _0x3c6df7=>{var _0x5a7b0b=_0x383251;const _0x5eb21f=await sales[_0x5a7b0b(0x17f)]([{'$unwind':_0x5a7b0b(0x1ba)},{'$match':{'sale_product.id_transaction_from':_0x3c6df7[_0x5a7b0b(0x19a)][_0x5a7b0b(0x198)](),'sale_product.invoice':_0x3c6df7[_0x5a7b0b(0x1d8)]}},{'$project':{'_id':_0x5a7b0b(0x193),'product_name':_0x5a7b0b(0x1ce),'product_code':'$sale_product.product_code','quantity_available':_0x5a7b0b(0x1ad),'warehouse_name':_0x5a7b0b(0x1d2),'warehouse_room':_0x5a7b0b(0x1a5),'product_invoice':_0x5a7b0b(0x186),'invoice':_0x5a7b0b(0x1b7),'id_transaction_from':'$sale_product.id_transaction_from','date':'$date','production_date':_0x5a7b0b(0x1a2),'expiry_date':'$sale_product.expiry_date','UOM':_0x5a7b0b(0x18f)}}]);_0x5eb21f[_0x5a7b0b(0x1c0)]>0x0&&_0x552e58[_0x5a7b0b(0x188)][_0x5e86b1[_0x5a7b0b(0x1d8)]]['push'](..._0x5eb21f);}));})),_0x552e58[_0x12c029(0x188)]=_0x552e58[_0x12c029(0x188)],_0x552e58[_0x12c029(0x1bd)]={},await Promise['all'](_0x552e58[_0x12c029(0x197)](async _0x118c61=>{var _0x43f3ef=_0x12c029;_0x552e58[_0x43f3ef(0x1bd)][_0x118c61['invoice']]=[],await Promise[_0x43f3ef(0x19b)](_0x118c61[_0x43f3ef(0x1c3)][_0x43f3ef(0x197)](async _0x400f19=>{var _0x25dfad=_0x43f3ef;const _0x59fc77=await adjustment[_0x25dfad(0x17f)]([{'$unwind':_0x25dfad(0x18b)},{'$match':{'product.id_transaction_from':_0x400f19[_0x25dfad(0x19a)][_0x25dfad(0x198)](),'product.invoice':_0x400f19[_0x25dfad(0x1d8)]}},{'$project':{'_id':'$product._id','product_name':_0x25dfad(0x1a4),'product_code':_0x25dfad(0x1b2),'quantity_available':_0x25dfad(0x191),'warehouse_name':'$warehouse_name','warehouse_room':_0x25dfad(0x185),'product_invoice':_0x25dfad(0x179),'invoice':_0x25dfad(0x1b7),'id_transaction_from':_0x25dfad(0x17d),'date':_0x25dfad(0x1d3),'production_date':'$product.production_date','expiry_date':_0x25dfad(0x1d9),'UOM':_0x25dfad(0x19d)}}]);_0x59fc77['length']>0x0&&_0x552e58[_0x25dfad(0x1bd)][_0x118c61['invoice']][_0x25dfad(0x177)](..._0x59fc77);}));})),_0x552e58[_0x12c029(0x1b0)]={},await Promise[_0x12c029(0x19b)](_0x552e58[_0x12c029(0x197)](async _0x4016b1=>{var _0x565dc7=_0x12c029;_0x552e58[_0x565dc7(0x1b0)][_0x4016b1['invoice']]=[],await Promise[_0x565dc7(0x19b)](_0x4016b1[_0x565dc7(0x1c3)][_0x565dc7(0x197)](async _0x4a0ee6=>{var _0x1159b0=_0x565dc7;const _0x5be024=await transfers[_0x1159b0(0x17f)]([{'$unwind':_0x1159b0(0x18b)},{'$match':{'product.id_transaction_id':_0x4a0ee6[_0x1159b0(0x19a)][_0x1159b0(0x198)](),'product.To_invoice':_0x4a0ee6['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x1159b0(0x1a4),'product_code':_0x1159b0(0x1b2),'quantity_available':_0x1159b0(0x1b8),'warehouse_name':_0x1159b0(0x1d6),'warehouse_room':_0x1159b0(0x185),'product_invoice':_0x1159b0(0x17e),'invoice':_0x1159b0(0x1b7),'id_transaction_from':_0x1159b0(0x1b9),'date':_0x1159b0(0x1d3),'production_date':_0x1159b0(0x180),'expiry_date':'$product.expiry_date','UOM':_0x1159b0(0x19d)}}]);_0x5be024['length']>0x0&&_0x552e58[_0x1159b0(0x1b0)][_0x4016b1[_0x1159b0(0x1d8)]]['push'](..._0x5be024);}));})),_0x172c4d[_0x12c029(0x1af)]({'purchases_warehouse':_0x552e58,'data_sales':_0x552e58[_0x12c029(0x188)],'data_adjustment':_0x552e58[_0x12c029(0x1bd)],'data_transfer':_0x552e58['data_transfer']});}}else{if(_0x277f99==_0x12c029(0x19b)){var _0x552e58=await purchases_finished['aggregate']([{'$match':{'date':{'$gte':_0x4cda12,'$lte':_0xe2905b}}},{'$lookup':{'from':'warehouses','let':{'invoice':_0x12c029(0x1b7)},'pipeline':[{'$unwind':_0x12c029(0x1d4)},{'$match':{'$expr':{'$eq':[_0x12c029(0x1dd),_0x12c029(0x1ab)]}}},{'$project':{'_id':_0x12c029(0x196),'product_name':'$product_details.product_name','product_code':'$product_details.product_code','quantity_available':_0x12c029(0x1c9),'warehouse_name':_0x12c029(0x17b),'warehouse_room':_0x12c029(0x1a0),'invoice':_0x12c029(0x1ab),'production_date':_0x12c029(0x1da),'expiry_date':_0x12c029(0x1c6),'UOM':'$product_details.unit'}}],'as':_0x12c029(0x1c3)}}]);_0x552e58[_0x12c029(0x188)]={},await Promise['all'](_0x552e58[_0x12c029(0x197)](async _0x446132=>{var _0x4868a9=_0x12c029;_0x552e58[_0x4868a9(0x188)][_0x446132[_0x4868a9(0x1d8)]]=[],await Promise[_0x4868a9(0x19b)](_0x446132[_0x4868a9(0x1c3)]['map'](async _0x1d3db3=>{var _0x365e19=_0x4868a9;const _0x4deed9=await sales_finished[_0x365e19(0x17f)]([{'$unwind':_0x365e19(0x1ba)},{'$match':{'sale_product.id_transaction_from':_0x1d3db3[_0x365e19(0x19a)]['valueOf'](),'sale_product.invoice':_0x1d3db3[_0x365e19(0x1d8)]}},{'$project':{'_id':_0x365e19(0x193),'product_name':_0x365e19(0x1ce),'product_code':_0x365e19(0x183),'quantity_available':_0x365e19(0x1ad),'warehouse_name':_0x365e19(0x1d2),'warehouse_room':_0x365e19(0x1a5),'product_invoice':'$sale_product.invoice','invoice':_0x365e19(0x1b7),'id_transaction_from':_0x365e19(0x1c4),'date':_0x365e19(0x1d3),'production_date':'$sale_product.production_date','expiry_date':'$sale_product.expiry_date','UOM':_0x365e19(0x18f)}}]);_0x4deed9['length']>0x0&&_0x552e58[_0x365e19(0x188)][_0x446132['invoice']][_0x365e19(0x177)](..._0x4deed9);}));})),_0x552e58['data_sales']=_0x552e58[_0x12c029(0x188)],_0x552e58[_0x12c029(0x1bd)]={},await Promise[_0x12c029(0x19b)](_0x552e58[_0x12c029(0x197)](async _0x62f6e9=>{var _0x13adc5=_0x12c029;_0x552e58[_0x13adc5(0x1bd)][_0x62f6e9['invoice']]=[],await Promise[_0x13adc5(0x19b)](_0x62f6e9[_0x13adc5(0x1c3)][_0x13adc5(0x197)](async _0x5a09c4=>{var _0x563cac=_0x13adc5;const _0x20267f=await adjustment_finished[_0x563cac(0x17f)]([{'$unwind':_0x563cac(0x18b)},{'$match':{'product.id_transaction_from':_0x5a09c4[_0x563cac(0x19a)][_0x563cac(0x198)](),'product.invoice':_0x5a09c4[_0x563cac(0x1d8)]}},{'$project':{'_id':_0x563cac(0x181),'product_name':'$product.product_name','product_code':'$product.product_code','quantity_available':_0x563cac(0x191),'warehouse_name':'$warehouse_name','warehouse_room':_0x563cac(0x185),'product_invoice':_0x563cac(0x179),'invoice':'$invoice','id_transaction_from':_0x563cac(0x17d),'date':_0x563cac(0x1d3),'production_date':_0x563cac(0x180),'expiry_date':'$product.expiry_date','UOM':_0x563cac(0x19d)}}]);_0x20267f[_0x563cac(0x1c0)]>0x0&&_0x552e58[_0x563cac(0x1bd)][_0x62f6e9[_0x563cac(0x1d8)]][_0x563cac(0x177)](..._0x20267f);}));})),_0x552e58[_0x12c029(0x1b0)]={},await Promise[_0x12c029(0x19b)](_0x552e58[_0x12c029(0x197)](async _0x4ca67d=>{var _0x2fa695=_0x12c029;_0x552e58[_0x2fa695(0x1b0)][_0x4ca67d[_0x2fa695(0x1d8)]]=[],await Promise['all'](_0x4ca67d['warehouse_data'][_0x2fa695(0x197)](async _0x4d234b=>{var _0x2e5ce=_0x2fa695;const _0x2ad711=await transfers_finished[_0x2e5ce(0x17f)]([{'$unwind':'$product'},{'$match':{'product.id_transaction':_0x4d234b['_id'][_0x2e5ce(0x198)](),'product.from_invoice':_0x4d234b[_0x2e5ce(0x1d8)]}},{'$project':{'_id':_0x2e5ce(0x181),'product_name':'$product.product_name','product_code':_0x2e5ce(0x1b2),'quantity_available':_0x2e5ce(0x1b8),'warehouse_name':_0x2e5ce(0x1d6),'warehouse_room':'$product.room_names','product_invoice':_0x2e5ce(0x17e),'invoice':_0x2e5ce(0x1b7),'id_transaction_from':_0x2e5ce(0x1b4),'date':'$date','production_date':_0x2e5ce(0x180),'expiry_date':_0x2e5ce(0x1d9),'UOM':_0x2e5ce(0x19d)}}]);_0x2ad711[_0x2e5ce(0x1c0)]>0x0&&_0x552e58[_0x2e5ce(0x1b0)][_0x4ca67d[_0x2e5ce(0x1d8)]][_0x2e5ce(0x177)](..._0x2ad711);}));})),_0x172c4d[_0x12c029(0x1af)]({'purchases_warehouse':_0x552e58,'data_sales':_0x552e58[_0x12c029(0x188)],'data_adjustment':_0x552e58['data_adjustment'],'data_transfer':_0x552e58[_0x12c029(0x1b0)]});}else{var _0x552e58=await purchases_finished[_0x12c029(0x17f)]([{'$match':{'warehouse_name':_0x277f99,'date':{'$gte':_0x4cda12,'$lte':_0xe2905b}}},{'$lookup':{'from':_0x12c029(0x174),'let':{'invoice':_0x12c029(0x1b7)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x12c029(0x1dd),_0x12c029(0x1ab)]}}},{'$project':{'_id':_0x12c029(0x196),'product_name':_0x12c029(0x1d7),'product_code':_0x12c029(0x1a3),'quantity_available':_0x12c029(0x1c9),'warehouse_name':_0x12c029(0x17b),'warehouse_room':'$room','invoice':_0x12c029(0x1ab),'production_date':_0x12c029(0x1da),'expiry_date':_0x12c029(0x1c6),'UOM':_0x12c029(0x1cd)}}],'as':_0x12c029(0x1c3)}}]);_0x552e58['data_sales']={},await Promise[_0x12c029(0x19b)](_0x552e58[_0x12c029(0x197)](async _0x75fe1d=>{var _0x1ba72e=_0x12c029;_0x552e58[_0x1ba72e(0x188)][_0x75fe1d[_0x1ba72e(0x1d8)]]=[],await Promise[_0x1ba72e(0x19b)](_0x75fe1d[_0x1ba72e(0x1c3)][_0x1ba72e(0x197)](async _0x5bdcb4=>{var _0x26f141=_0x1ba72e;const _0xb09087=await sales_finished['aggregate']([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x5bdcb4[_0x26f141(0x19a)][_0x26f141(0x198)](),'sale_product.invoice':_0x5bdcb4[_0x26f141(0x1d8)]}},{'$project':{'_id':'$sale_product._id','product_name':'$sale_product.product_name','product_code':'$sale_product.product_code','quantity_available':'$sale_product.quantity','warehouse_name':_0x26f141(0x1d2),'warehouse_room':'$sale_product.room_name','product_invoice':_0x26f141(0x186),'invoice':_0x26f141(0x1b7),'id_transaction_from':'$sale_product.id_transaction_from','date':'$date','production_date':'$sale_product.production_date','expiry_date':'$sale_product.expiry_date','UOM':_0x26f141(0x18f)}}]);_0xb09087[_0x26f141(0x1c0)]>0x0&&_0x552e58[_0x26f141(0x188)][_0x75fe1d[_0x26f141(0x1d8)]][_0x26f141(0x177)](..._0xb09087);}));})),_0x552e58[_0x12c029(0x188)]=_0x552e58[_0x12c029(0x188)],_0x552e58[_0x12c029(0x1bd)]={},await Promise['all'](_0x552e58['map'](async _0x410cb5=>{var _0x3641e0=_0x12c029;_0x552e58['data_adjustment'][_0x410cb5[_0x3641e0(0x1d8)]]=[],await Promise[_0x3641e0(0x19b)](_0x410cb5['warehouse_data']['map'](async _0x43eeaa=>{var _0x2d8f80=_0x3641e0;const _0x346aa1=await adjustment_finished[_0x2d8f80(0x17f)]([{'$unwind':_0x2d8f80(0x18b)},{'$match':{'product.id_transaction_from':_0x43eeaa[_0x2d8f80(0x19a)]['valueOf'](),'product.invoice':_0x43eeaa[_0x2d8f80(0x1d8)]}},{'$project':{'_id':_0x2d8f80(0x181),'product_name':_0x2d8f80(0x1a4),'product_code':_0x2d8f80(0x1b2),'quantity_available':_0x2d8f80(0x191),'warehouse_name':'$warehouse_name','warehouse_room':_0x2d8f80(0x185),'product_invoice':_0x2d8f80(0x179),'invoice':'$invoice','id_transaction_from':_0x2d8f80(0x17d),'date':_0x2d8f80(0x1d3),'production_date':_0x2d8f80(0x180),'expiry_date':_0x2d8f80(0x1d9),'UOM':_0x2d8f80(0x19d)}}]);_0x346aa1[_0x2d8f80(0x1c0)]>0x0&&_0x552e58['data_adjustment'][_0x410cb5[_0x2d8f80(0x1d8)]]['push'](..._0x346aa1);}));})),_0x552e58[_0x12c029(0x1b0)]={},await Promise[_0x12c029(0x19b)](_0x552e58['map'](async _0x36643d=>{var _0x368e07=_0x12c029;_0x552e58[_0x368e07(0x1b0)][_0x36643d[_0x368e07(0x1d8)]]=[],await Promise[_0x368e07(0x19b)](_0x36643d[_0x368e07(0x1c3)][_0x368e07(0x197)](async _0xb48ffd=>{var _0x2542c1=_0x368e07;const _0x4e3e52=await transfers_finished[_0x2542c1(0x17f)]([{'$unwind':'$product'},{'$match':{'product.id_transaction':_0xb48ffd[_0x2542c1(0x19a)]['valueOf'](),'product.from_invoice':_0xb48ffd[_0x2542c1(0x1d8)]}},{'$project':{'_id':_0x2542c1(0x181),'product_name':_0x2542c1(0x1a4),'product_code':'$product.product_code','quantity_available':'$product.to_quantity','warehouse_name':'$to_warehouse','warehouse_room':'$product.room_names','product_invoice':_0x2542c1(0x17e),'invoice':_0x2542c1(0x1b7),'id_transaction_from':_0x2542c1(0x1b4),'date':'$date','production_date':_0x2542c1(0x180),'expiry_date':_0x2542c1(0x1d9),'UOM':_0x2542c1(0x19d)}}]);_0x4e3e52[_0x2542c1(0x1c0)]>0x0&&_0x552e58[_0x2542c1(0x1b0)][_0x36643d[_0x2542c1(0x1d8)]][_0x2542c1(0x177)](..._0x4e3e52);}));})),_0x172c4d[_0x12c029(0x1af)]({'purchases_warehouse':_0x552e58,'data_sales':_0x552e58['data_sales'],'data_adjustment':_0x552e58['data_adjustment'],'data_transfer':_0x552e58['data_transfer']});}}}),router['get']('/viewdata_inc_fg/:id',auth,async(_0x1dbc8f,_0x1889c4)=>{var _0x7b3562=a0_0x2237ae;try{const _0x28636b=_0x1dbc8f[_0x7b3562(0x19e)]['id'];var _0x4109d5=await purchases_finished[_0x7b3562(0x17c)](_0x28636b);const _0x8035ab=await master_shop[_0x7b3562(0x1ac)](),_0x3f52b5=_0x1dbc8f[_0x7b3562(0x1c8)],_0x3119b9=await profile['findOne']({'email':_0x3f52b5['email']});if(_0x8035ab[0x0][_0x7b3562(0x1cb)]==_0x7b3562(0x199))var _0x57025d=users[_0x7b3562(0x182)];else{if(_0x8035ab[0x0][_0x7b3562(0x1cb)]==_0x7b3562(0x17a))var _0x57025d=users[_0x7b3562(0x17a)];else{if(_0x8035ab[0x0][_0x7b3562(0x1cb)]=='German')var _0x57025d=users[_0x7b3562(0x1aa)];else{if(_0x8035ab[0x0][_0x7b3562(0x1cb)]==_0x7b3562(0x175))var _0x57025d=users[_0x7b3562(0x175)];else{if(_0x8035ab[0x0][_0x7b3562(0x1cb)]==_0x7b3562(0x1c1))var _0x57025d=users[_0x7b3562(0x1c1)];else{if(_0x8035ab[0x0][_0x7b3562(0x1cb)]==_0x7b3562(0x18a))var _0x57025d=users[_0x7b3562(0x1ae)];else{if(_0x8035ab[0x0][_0x7b3562(0x1cb)]==_0x7b3562(0x1c5))var _0x57025d=users['Chinese'];else{if(_0x8035ab[0x0][_0x7b3562(0x1cb)]==_0x7b3562(0x1bc))var _0x57025d=users[_0x7b3562(0x190)];}}}}}}}_0x1889c4['render'](_0x7b3562(0x1bf),{'success':_0x1dbc8f[_0x7b3562(0x178)](_0x7b3562(0x1d1)),'errors':_0x1dbc8f[_0x7b3562(0x178)](_0x7b3562(0x176)),'master_shop':_0x8035ab,'profile':_0x3119b9,'role':_0x3f52b5,'language':_0x57025d,'data':_0x4109d5});}catch(_0x32c451){_0x1889c4[_0x7b3562(0x1af)](_0x32c451);}}),router[a0_0x2237ae(0x1d0)](a0_0x2237ae(0x18d),auth,async(_0x2337dd,_0x18cc23)=>{var _0x126e10=a0_0x2237ae;try{const _0x5d0111=_0x2337dd[_0x126e10(0x19e)]['id'];var _0x446b22=await sales_finished[_0x126e10(0x17c)](_0x5d0111);const _0x4752bd=await master_shop[_0x126e10(0x1ac)](),_0x1b56d6=_0x2337dd[_0x126e10(0x1c8)],_0x3ced7b=await profile[_0x126e10(0x1a1)]({'email':_0x1b56d6[_0x126e10(0x187)]});if(_0x4752bd[0x0][_0x126e10(0x1cb)]=='English\x20(US)')var _0x516830=users[_0x126e10(0x182)];else{if(_0x4752bd[0x0]['language']=='Hindi')var _0x516830=users[_0x126e10(0x17a)];else{if(_0x4752bd[0x0][_0x126e10(0x1cb)]==_0x126e10(0x1aa))var _0x516830=users[_0x126e10(0x1aa)];else{if(_0x4752bd[0x0]['language']=='Spanish')var _0x516830=users['Spanish'];else{if(_0x4752bd[0x0]['language']=='French')var _0x516830=users[_0x126e10(0x1c1)];else{if(_0x4752bd[0x0][_0x126e10(0x1cb)]==_0x126e10(0x18a))var _0x516830=users[_0x126e10(0x1ae)];else{if(_0x4752bd[0x0][_0x126e10(0x1cb)]==_0x126e10(0x1c5))var _0x516830=users[_0x126e10(0x1c5)];else{if(_0x4752bd[0x0][_0x126e10(0x1cb)]==_0x126e10(0x1bc))var _0x516830=users['Arabic'];}}}}}}}_0x18cc23[_0x126e10(0x1d5)](_0x126e10(0x1db),{'success':_0x2337dd[_0x126e10(0x178)](_0x126e10(0x1d1)),'errors':_0x2337dd['flash']('errors'),'master_shop':_0x4752bd,'profile':_0x3ced7b,'role':_0x1b56d6,'language':_0x516830,'data':_0x446b22});}catch(_0x6f9320){_0x18cc23[_0x126e10(0x1af)](_0x6f9320);}}),router['get']('/viewdata_tf_fg/:id',auth,async(_0x448f45,_0x276203)=>{var _0x505a70=a0_0x2237ae;try{const _0x280288=_0x448f45[_0x505a70(0x19e)]['id'];var _0x3f6d16=await transfers_finished['findById'](_0x280288);const _0x28f3c5=await master_shop[_0x505a70(0x1ac)](),_0x2015f7=_0x448f45[_0x505a70(0x1c8)],_0x2b4680=await profile['findOne']({'email':_0x2015f7[_0x505a70(0x187)]});if(_0x28f3c5[0x0][_0x505a70(0x1cb)]=='English\x20(US)')var _0x59ec05=users[_0x505a70(0x182)];else{if(_0x28f3c5[0x0][_0x505a70(0x1cb)]==_0x505a70(0x17a))var _0x59ec05=users['Hindi'];else{if(_0x28f3c5[0x0]['language']==_0x505a70(0x1aa))var _0x59ec05=users[_0x505a70(0x1aa)];else{if(_0x28f3c5[0x0][_0x505a70(0x1cb)]==_0x505a70(0x175))var _0x59ec05=users[_0x505a70(0x175)];else{if(_0x28f3c5[0x0][_0x505a70(0x1cb)]==_0x505a70(0x1c1))var _0x59ec05=users[_0x505a70(0x1c1)];else{if(_0x28f3c5[0x0][_0x505a70(0x1cb)]=='Portuguese\x20(BR)')var _0x59ec05=users[_0x505a70(0x1ae)];else{if(_0x28f3c5[0x0][_0x505a70(0x1cb)]=='Chinese')var _0x59ec05=users[_0x505a70(0x1c5)];else{if(_0x28f3c5[0x0]['language']==_0x505a70(0x1bc))var _0x59ec05=users[_0x505a70(0x190)];}}}}}}}_0x276203[_0x505a70(0x1d5)](_0x505a70(0x1b6),{'success':_0x448f45['flash'](_0x505a70(0x1d1)),'errors':_0x448f45['flash'](_0x505a70(0x176)),'master_shop':_0x28f3c5,'profile':_0x2b4680,'role':_0x2015f7,'language':_0x59ec05,'data':_0x3f6d16});}catch(_0x2ccd60){_0x276203['json'](_0x2ccd60);}}),router[a0_0x2237ae(0x1d0)]('/viewFG',auth,async(_0x26a066,_0xeab89)=>{var _0x4c9c54=a0_0x2237ae;try{const {username:_0x57f17c,email:_0x423c68,role:_0x30a05f}=_0x26a066[_0x4c9c54(0x1c8)],_0x59df99=_0x26a066[_0x4c9c54(0x1c8)],_0x9ae919=await profile['findOne']({'email':_0x59df99[_0x4c9c54(0x187)]}),_0x422bac=await master_shop[_0x4c9c54(0x1ac)](),_0x4d0322=await warehouse['aggregate']([{'$match':{'status':_0x4c9c54(0x18c),'warehouse_category':_0x4c9c54(0x1bb)}},{'$group':{'_id':_0x4c9c54(0x17b),'name':{'$first':_0x4c9c54(0x17b)}}}]);if(_0x422bac[0x0]['language']==_0x4c9c54(0x199))var _0x39461a=users[_0x4c9c54(0x182)];else{if(_0x422bac[0x0]['language']==_0x4c9c54(0x17a))var _0x39461a=users['Hindi'];else{if(_0x422bac[0x0][_0x4c9c54(0x1cb)]==_0x4c9c54(0x1aa))var _0x39461a=users[_0x4c9c54(0x1aa)];else{if(_0x422bac[0x0][_0x4c9c54(0x1cb)]==_0x4c9c54(0x175))var _0x39461a=users[_0x4c9c54(0x175)];else{if(_0x422bac[0x0][_0x4c9c54(0x1cb)]==_0x4c9c54(0x1c1))var _0x39461a=users[_0x4c9c54(0x1c1)];else{if(_0x422bac[0x0][_0x4c9c54(0x1cb)]==_0x4c9c54(0x18a))var _0x39461a=users[_0x4c9c54(0x1ae)];else{if(_0x422bac[0x0][_0x4c9c54(0x1cb)]==_0x4c9c54(0x1c5))var _0x39461a=users['Chinese'];else{if(_0x422bac[0x0][_0x4c9c54(0x1cb)]==_0x4c9c54(0x1bc))var _0x39461a=users['Arabic'];}}}}}}}_0xeab89['render'](_0x4c9c54(0x172),{'success':_0x26a066[_0x4c9c54(0x178)](_0x4c9c54(0x1d1)),'errors':_0x26a066[_0x4c9c54(0x178)](_0x4c9c54(0x176)),'role':_0x59df99,'profile':_0x9ae919,'master_shop':_0x422bac,'dataProcess':_0x4d0322,'language':_0x39461a});}catch(_0x41d6ff){console['log'](_0x41d6ff);}}),module[a0_0x2237ae(0x189)]=router;