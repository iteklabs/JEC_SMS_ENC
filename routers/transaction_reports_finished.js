var a0_0x1aad77=a0_0x4f20;(function(_0x207d41,_0x15e817){var _0x26b9f9=a0_0x4f20,_0x5396af=_0x207d41();while(!![]){try{var _0x455104=parseInt(_0x26b9f9(0x1e6))/0x1+-parseInt(_0x26b9f9(0x204))/0x2+parseInt(_0x26b9f9(0x1e5))/0x3+-parseInt(_0x26b9f9(0x20f))/0x4*(-parseInt(_0x26b9f9(0x22e))/0x5)+-parseInt(_0x26b9f9(0x217))/0x6+parseInt(_0x26b9f9(0x22b))/0x7*(-parseInt(_0x26b9f9(0x235))/0x8)+parseInt(_0x26b9f9(0x203))/0x9*(-parseInt(_0x26b9f9(0x1ff))/0xa);if(_0x455104===_0x15e817)break;else _0x5396af['push'](_0x5396af['shift']());}catch(_0x5afa7a){_0x5396af['push'](_0x5396af['shift']());}}}(a0_0x783a,0x1985e));const express=require('express'),app=express(),router=express[a0_0x1aad77(0x244)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x1aad77(0x226)),auth=require(a0_0x1aad77(0x1ed)),users=require(a0_0x1aad77(0x1da)),nodemailer=require(a0_0x1aad77(0x206));function a0_0x4f20(_0x120a89,_0x129a76){var _0x783a77=a0_0x783a();return a0_0x4f20=function(_0x4f2045,_0x5197ba){_0x4f2045=_0x4f2045-0x1d7;var _0x314041=_0x783a77[_0x4f2045];return _0x314041;},a0_0x4f20(_0x120a89,_0x129a76);}router[a0_0x1aad77(0x1fa)](a0_0x1aad77(0x1ee),auth,async(_0x19b091,_0x82d6f6)=>{var _0x27bf15=a0_0x1aad77;try{const {username:_0x4170f0,email:_0x8b0f78,role:_0x2f4193}=_0x19b091[_0x27bf15(0x1dd)],_0x55caea=_0x19b091[_0x27bf15(0x1dd)],_0x3072a8=await profile[_0x27bf15(0x1d9)]({'email':_0x55caea[_0x27bf15(0x210)]}),_0x50fe41=await master_shop[_0x27bf15(0x223)](),_0x35746d=await warehouse[_0x27bf15(0x1e0)]([{'$match':{'status':_0x27bf15(0x1eb),'warehouse_category':_0x27bf15(0x213)}},{'$group':{'_id':_0x27bf15(0x222),'name':{'$first':_0x27bf15(0x222)}}}]);if(_0x50fe41[0x0][_0x27bf15(0x23f)]==_0x27bf15(0x208))var _0x4c2631=users[_0x27bf15(0x21b)];else{if(_0x50fe41[0x0]['language']==_0x27bf15(0x23e))var _0x4c2631=users[_0x27bf15(0x23e)];else{if(_0x50fe41[0x0][_0x27bf15(0x23f)]==_0x27bf15(0x212))var _0x4c2631=users['German'];else{if(_0x50fe41[0x0][_0x27bf15(0x23f)]==_0x27bf15(0x22f))var _0x4c2631=users[_0x27bf15(0x22f)];else{if(_0x50fe41[0x0]['language']==_0x27bf15(0x209))var _0x4c2631=users[_0x27bf15(0x209)];else{if(_0x50fe41[0x0]['language']=='Portuguese\x20(BR)')var _0x4c2631=users[_0x27bf15(0x219)];else{if(_0x50fe41[0x0][_0x27bf15(0x23f)]==_0x27bf15(0x20e))var _0x4c2631=users[_0x27bf15(0x20e)];else{if(_0x50fe41[0x0]['language']=='Arabic\x20(ae)')var _0x4c2631=users[_0x27bf15(0x1f4)];}}}}}}}_0x82d6f6[_0x27bf15(0x21c)](_0x27bf15(0x1fc),{'success':_0x19b091[_0x27bf15(0x1f8)](_0x27bf15(0x1fd)),'errors':_0x19b091['flash'](_0x27bf15(0x1d7)),'role':_0x55caea,'profile':_0x3072a8,'master_shop':_0x50fe41,'dataProcess':_0x35746d,'language':_0x4c2631});}catch(_0x475b07){console[_0x27bf15(0x237)](_0x475b07);}}),router[a0_0x1aad77(0x232)](a0_0x1aad77(0x1dc),auth,async(_0x32142b,_0x5e932d)=>{var _0x292160=a0_0x1aad77;const {product_category:_0x58e6c0,transaction_category:_0x10c9a2,transaction_date_from:_0x35c4c0,transaction_date_to:_0x1da710,warehouse_category:_0x57ce0c,item_code:_0x523b5d}=_0x32142b[_0x292160(0x224)];console[_0x292160(0x237)](_0x57ce0c);if(_0x58e6c0=='rm'){if(_0x57ce0c==_0x292160(0x1e8)){var _0x44911a=await purchases[_0x292160(0x1e0)]([{'$match':{'date':{'$gte':_0x35c4c0,'$lte':_0x1da710}}},{'$lookup':{'from':_0x292160(0x221),'let':{'invoice':_0x292160(0x231)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':['$$invoice',_0x292160(0x201)]}}},{'$project':{'_id':_0x292160(0x238),'product_name':_0x292160(0x22d),'product_code':_0x292160(0x1f5),'quantity_available':_0x292160(0x21a),'warehouse_name':'$name','warehouse_room':_0x292160(0x242),'invoice':_0x292160(0x201),'production_date':_0x292160(0x1e7),'expiry_date':_0x292160(0x23b),'UOM':_0x292160(0x243)}}],'as':_0x292160(0x1e9)}}]);_0x44911a[_0x292160(0x229)]={},await Promise['all'](_0x44911a['map'](async _0x2961ca=>{var _0x38e2c9=_0x292160;_0x44911a['data_sales'][_0x2961ca[_0x38e2c9(0x233)]]=[],await Promise[_0x38e2c9(0x1e8)](_0x2961ca['warehouse_data'][_0x38e2c9(0x228)](async _0x330e01=>{var _0x43ae77=_0x38e2c9;const _0x38682e=await sales['aggregate']([{'$unwind':_0x43ae77(0x1e2)},{'$match':{'sale_product.id_transaction_from':_0x330e01['_id'][_0x43ae77(0x1f9)](),'sale_product.invoice':_0x330e01[_0x43ae77(0x233)]}},{'$project':{'_id':_0x43ae77(0x20a),'product_name':_0x43ae77(0x1df),'product_code':'$sale_product.product_code','quantity_available':_0x43ae77(0x1db),'warehouse_name':_0x43ae77(0x241),'warehouse_room':_0x43ae77(0x22a),'product_invoice':_0x43ae77(0x1de),'invoice':_0x43ae77(0x231),'id_transaction_from':_0x43ae77(0x20c),'date':_0x43ae77(0x230),'production_date':_0x43ae77(0x23c),'expiry_date':_0x43ae77(0x1f1),'UOM':'$sale_product.unit'}}]);_0x38682e[_0x43ae77(0x207)]>0x0&&_0x44911a[_0x43ae77(0x229)][_0x2961ca[_0x43ae77(0x233)]]['push'](..._0x38682e);}));})),_0x44911a[_0x292160(0x229)]=_0x44911a[_0x292160(0x229)],_0x44911a[_0x292160(0x245)]={},await Promise[_0x292160(0x1e8)](_0x44911a[_0x292160(0x228)](async _0x4cdab6=>{var _0x58dafe=_0x292160;_0x44911a[_0x58dafe(0x245)][_0x4cdab6['invoice']]=[],await Promise[_0x58dafe(0x1e8)](_0x4cdab6[_0x58dafe(0x1e9)][_0x58dafe(0x228)](async _0x3926da=>{var _0x51254f=_0x58dafe;const _0x2b821c=await adjustment[_0x51254f(0x1e0)]([{'$unwind':_0x51254f(0x239)},{'$match':{'product.id_transaction_from':_0x3926da[_0x51254f(0x1f7)]['valueOf'](),'product.invoice':_0x3926da[_0x51254f(0x233)]}},{'$project':{'_id':'$product._id','product_name':_0x51254f(0x218),'product_code':_0x51254f(0x1e4),'quantity_available':_0x51254f(0x1f3),'warehouse_name':_0x51254f(0x241),'warehouse_room':_0x51254f(0x23d),'product_invoice':'$product.invoice','invoice':_0x51254f(0x231),'id_transaction_from':_0x51254f(0x205),'date':'$date','production_date':_0x51254f(0x20d),'expiry_date':_0x51254f(0x21e),'UOM':_0x51254f(0x220)}}]);_0x2b821c[_0x51254f(0x207)]>0x0&&_0x44911a['data_adjustment'][_0x4cdab6[_0x51254f(0x233)]][_0x51254f(0x246)](..._0x2b821c);}));})),_0x44911a[_0x292160(0x1fb)]={},await Promise[_0x292160(0x1e8)](_0x44911a[_0x292160(0x228)](async _0x3f3cdc=>{var _0x3b07cc=_0x292160;_0x44911a[_0x3b07cc(0x1fb)][_0x3f3cdc[_0x3b07cc(0x233)]]=[],await Promise[_0x3b07cc(0x1e8)](_0x3f3cdc[_0x3b07cc(0x1e9)]['map'](async _0x299613=>{var _0x25165a=_0x3b07cc;const _0x2946e4=await transfers['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x299613[_0x25165a(0x1f7)][_0x25165a(0x1f9)](),'product.To_invoice':_0x299613['invoice']}},{'$project':{'_id':_0x25165a(0x227),'product_name':_0x25165a(0x218),'product_code':_0x25165a(0x1e4),'quantity_available':_0x25165a(0x1d8),'warehouse_name':'$to_warehouse','warehouse_room':_0x25165a(0x23d),'product_invoice':_0x25165a(0x22c),'invoice':_0x25165a(0x231),'id_transaction_from':_0x25165a(0x21f),'date':_0x25165a(0x230),'production_date':_0x25165a(0x20d),'expiry_date':_0x25165a(0x21e),'UOM':_0x25165a(0x220)}}]);_0x2946e4[_0x25165a(0x207)]>0x0&&_0x44911a[_0x25165a(0x1fb)][_0x3f3cdc['invoice']]['push'](..._0x2946e4);}));})),_0x5e932d[_0x292160(0x236)]({'purchases_warehouse':_0x44911a,'data_sales':_0x44911a[_0x292160(0x229)],'data_adjustment':_0x44911a[_0x292160(0x245)],'data_transfer':_0x44911a[_0x292160(0x1fb)]});}else{var _0x44911a=await purchases['aggregate']([{'$match':{'warehouse_name':_0x57ce0c,'date':{'$gte':_0x35c4c0,'$lte':_0x1da710}}},{'$lookup':{'from':_0x292160(0x221),'let':{'invoice':_0x292160(0x231)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x292160(0x1f6),_0x292160(0x201)]}}},{'$project':{'_id':_0x292160(0x238),'product_name':_0x292160(0x22d),'product_code':'$product_details.product_code','quantity_available':'$product_details.product_stock','warehouse_name':'$name','warehouse_room':_0x292160(0x242),'invoice':'$product_details.invoice','production_date':_0x292160(0x1e7),'expiry_date':_0x292160(0x23b),'UOM':_0x292160(0x243)}}],'as':_0x292160(0x1e9)}}]);_0x44911a[_0x292160(0x229)]={},await Promise[_0x292160(0x1e8)](_0x44911a[_0x292160(0x228)](async _0x132c42=>{var _0x4fc623=_0x292160;_0x44911a[_0x4fc623(0x229)][_0x132c42[_0x4fc623(0x233)]]=[],await Promise[_0x4fc623(0x1e8)](_0x132c42[_0x4fc623(0x1e9)][_0x4fc623(0x228)](async _0x3d2e1e=>{var _0x74f412=_0x4fc623;const _0x254be9=await sales[_0x74f412(0x1e0)]([{'$unwind':_0x74f412(0x1e2)},{'$match':{'sale_product.id_transaction_from':_0x3d2e1e[_0x74f412(0x1f7)]['valueOf'](),'sale_product.invoice':_0x3d2e1e[_0x74f412(0x233)]}},{'$project':{'_id':_0x74f412(0x20a),'product_name':'$sale_product.product_name','product_code':_0x74f412(0x240),'quantity_available':'$sale_product.quantity','warehouse_name':_0x74f412(0x241),'warehouse_room':'$sale_product.room_name','product_invoice':_0x74f412(0x1de),'invoice':'$invoice','id_transaction_from':_0x74f412(0x20c),'date':'$date','production_date':_0x74f412(0x23c),'expiry_date':_0x74f412(0x1f1),'UOM':_0x74f412(0x1ec)}}]);_0x254be9[_0x74f412(0x207)]>0x0&&_0x44911a[_0x74f412(0x229)][_0x132c42[_0x74f412(0x233)]][_0x74f412(0x246)](..._0x254be9);}));})),_0x44911a['data_sales']=_0x44911a['data_sales'],_0x44911a[_0x292160(0x245)]={},await Promise[_0x292160(0x1e8)](_0x44911a[_0x292160(0x228)](async _0x3f7cbf=>{var _0x935583=_0x292160;_0x44911a[_0x935583(0x245)][_0x3f7cbf[_0x935583(0x233)]]=[],await Promise[_0x935583(0x1e8)](_0x3f7cbf[_0x935583(0x1e9)]['map'](async _0x3068a2=>{var _0x2c456f=_0x935583;const _0x1e80e1=await adjustment[_0x2c456f(0x1e0)]([{'$unwind':_0x2c456f(0x239)},{'$match':{'product.id_transaction_from':_0x3068a2['_id'][_0x2c456f(0x1f9)](),'product.invoice':_0x3068a2[_0x2c456f(0x233)]}},{'$project':{'_id':_0x2c456f(0x227),'product_name':'$product.product_name','product_code':_0x2c456f(0x1e4),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x2c456f(0x241),'warehouse_room':_0x2c456f(0x23d),'product_invoice':_0x2c456f(0x202),'invoice':'$invoice','id_transaction_from':_0x2c456f(0x205),'date':_0x2c456f(0x230),'production_date':_0x2c456f(0x20d),'expiry_date':_0x2c456f(0x21e),'UOM':_0x2c456f(0x220)}}]);_0x1e80e1[_0x2c456f(0x207)]>0x0&&_0x44911a[_0x2c456f(0x245)][_0x3f7cbf[_0x2c456f(0x233)]]['push'](..._0x1e80e1);}));})),_0x44911a[_0x292160(0x1fb)]={},await Promise[_0x292160(0x1e8)](_0x44911a['map'](async _0x5da25a=>{var _0x437da8=_0x292160;_0x44911a['data_transfer'][_0x5da25a[_0x437da8(0x233)]]=[],await Promise[_0x437da8(0x1e8)](_0x5da25a[_0x437da8(0x1e9)][_0x437da8(0x228)](async _0x5d3fff=>{var _0x54bf11=_0x437da8;const _0x4e1814=await transfers[_0x54bf11(0x1e0)]([{'$unwind':_0x54bf11(0x239)},{'$match':{'product.id_transaction_id':_0x5d3fff[_0x54bf11(0x1f7)][_0x54bf11(0x1f9)](),'product.To_invoice':_0x5d3fff[_0x54bf11(0x233)]}},{'$project':{'_id':'$product._id','product_name':_0x54bf11(0x218),'product_code':_0x54bf11(0x1e4),'quantity_available':_0x54bf11(0x1d8),'warehouse_name':_0x54bf11(0x200),'warehouse_room':_0x54bf11(0x23d),'product_invoice':'$product.to_room_name','invoice':_0x54bf11(0x231),'id_transaction_from':_0x54bf11(0x21f),'date':_0x54bf11(0x230),'production_date':_0x54bf11(0x20d),'expiry_date':_0x54bf11(0x21e),'UOM':'$product.unit'}}]);_0x4e1814[_0x54bf11(0x207)]>0x0&&_0x44911a['data_transfer'][_0x5da25a[_0x54bf11(0x233)]]['push'](..._0x4e1814);}));})),_0x5e932d[_0x292160(0x236)]({'purchases_warehouse':_0x44911a,'data_sales':_0x44911a[_0x292160(0x229)],'data_adjustment':_0x44911a['data_adjustment'],'data_transfer':_0x44911a[_0x292160(0x1fb)]});}}else{if(_0x57ce0c=='all'){var _0x44911a=await purchases_finished[_0x292160(0x1e0)]([{'$match':{'date':{'$gte':_0x35c4c0,'$lte':_0x1da710}}},{'$lookup':{'from':_0x292160(0x221),'let':{'invoice':_0x292160(0x231)},'pipeline':[{'$unwind':_0x292160(0x1e3)},{'$match':{'$expr':{'$eq':[_0x292160(0x1f6),_0x292160(0x201)]}}},{'$project':{'_id':_0x292160(0x238),'product_name':_0x292160(0x22d),'product_code':_0x292160(0x1f5),'quantity_available':_0x292160(0x21a),'warehouse_name':_0x292160(0x222),'warehouse_room':'$room','invoice':_0x292160(0x201),'production_date':_0x292160(0x1e7),'expiry_date':_0x292160(0x23b),'UOM':_0x292160(0x243)}}],'as':'warehouse_data'}}]);_0x44911a[_0x292160(0x229)]={},await Promise[_0x292160(0x1e8)](_0x44911a[_0x292160(0x228)](async _0x44f8e3=>{var _0x2f308b=_0x292160;_0x44911a['data_sales'][_0x44f8e3[_0x2f308b(0x233)]]=[],await Promise[_0x2f308b(0x1e8)](_0x44f8e3[_0x2f308b(0x1e9)][_0x2f308b(0x228)](async _0x330cc5=>{var _0x33cee4=_0x2f308b;const _0x38523b=await sales_finished[_0x33cee4(0x1e0)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x330cc5[_0x33cee4(0x1f7)][_0x33cee4(0x1f9)](),'sale_product.invoice':_0x330cc5[_0x33cee4(0x233)]}},{'$project':{'_id':_0x33cee4(0x20a),'product_name':_0x33cee4(0x1df),'product_code':_0x33cee4(0x240),'quantity_available':_0x33cee4(0x1db),'warehouse_name':'$warehouse_name','warehouse_room':_0x33cee4(0x22a),'product_invoice':_0x33cee4(0x1de),'invoice':'$invoice','id_transaction_from':_0x33cee4(0x20c),'date':_0x33cee4(0x230),'production_date':_0x33cee4(0x23c),'expiry_date':_0x33cee4(0x1f1),'UOM':_0x33cee4(0x1ec)}}]);_0x38523b[_0x33cee4(0x207)]>0x0&&_0x44911a[_0x33cee4(0x229)][_0x44f8e3[_0x33cee4(0x233)]][_0x33cee4(0x246)](..._0x38523b);}));})),_0x44911a[_0x292160(0x229)]=_0x44911a[_0x292160(0x229)],_0x44911a[_0x292160(0x245)]={},await Promise['all'](_0x44911a['map'](async _0x2b60f8=>{var _0x3f3895=_0x292160;_0x44911a[_0x3f3895(0x245)][_0x2b60f8[_0x3f3895(0x233)]]=[],await Promise[_0x3f3895(0x1e8)](_0x2b60f8[_0x3f3895(0x1e9)][_0x3f3895(0x228)](async _0x23a077=>{var _0x369394=_0x3f3895;const _0x47802b=await adjustment_finished['aggregate']([{'$unwind':_0x369394(0x239)},{'$match':{'product.id_transaction_from':_0x23a077[_0x369394(0x1f7)]['valueOf'](),'product.invoice':_0x23a077[_0x369394(0x233)]}},{'$project':{'_id':_0x369394(0x227),'product_name':_0x369394(0x218),'product_code':_0x369394(0x1e4),'quantity_available':'$product.new_adjust_qty','warehouse_name':'$warehouse_name','warehouse_room':_0x369394(0x23d),'product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':_0x369394(0x205),'date':_0x369394(0x230),'production_date':'$product.production_date','expiry_date':_0x369394(0x21e),'UOM':_0x369394(0x220)}}]);_0x47802b[_0x369394(0x207)]>0x0&&_0x44911a[_0x369394(0x245)][_0x2b60f8['invoice']][_0x369394(0x246)](..._0x47802b);}));})),_0x44911a[_0x292160(0x1fb)]={},await Promise['all'](_0x44911a['map'](async _0x4bf6a4=>{var _0x46dd12=_0x292160;_0x44911a[_0x46dd12(0x1fb)][_0x4bf6a4[_0x46dd12(0x233)]]=[],await Promise[_0x46dd12(0x1e8)](_0x4bf6a4[_0x46dd12(0x1e9)][_0x46dd12(0x228)](async _0x5ea347=>{var _0x2c441f=_0x46dd12;const _0x58ef0c=await transfers_finished[_0x2c441f(0x1e0)]([{'$unwind':_0x2c441f(0x239)},{'$match':{'product.id_transaction':_0x5ea347['_id']['valueOf'](),'product.from_invoice':_0x5ea347[_0x2c441f(0x233)]}},{'$project':{'_id':'$product._id','product_name':_0x2c441f(0x218),'product_code':_0x2c441f(0x1e4),'quantity_available':_0x2c441f(0x1d8),'warehouse_name':'$to_warehouse','warehouse_room':_0x2c441f(0x23d),'product_invoice':_0x2c441f(0x22c),'invoice':_0x2c441f(0x231),'id_transaction_from':_0x2c441f(0x215),'date':_0x2c441f(0x230),'production_date':'$product.production_date','expiry_date':_0x2c441f(0x21e),'UOM':_0x2c441f(0x220)}}]);_0x58ef0c[_0x2c441f(0x207)]>0x0&&_0x44911a[_0x2c441f(0x1fb)][_0x4bf6a4['invoice']][_0x2c441f(0x246)](..._0x58ef0c);}));})),_0x5e932d[_0x292160(0x236)]({'purchases_warehouse':_0x44911a,'data_sales':_0x44911a['data_sales'],'data_adjustment':_0x44911a['data_adjustment'],'data_transfer':_0x44911a[_0x292160(0x1fb)]});}else{var _0x44911a=await purchases_finished[_0x292160(0x1e0)]([{'$match':{'warehouse_name':_0x57ce0c,'date':{'$gte':_0x35c4c0,'$lte':_0x1da710}}},{'$lookup':{'from':_0x292160(0x221),'let':{'invoice':_0x292160(0x231)},'pipeline':[{'$unwind':_0x292160(0x1e3)},{'$match':{'$expr':{'$eq':[_0x292160(0x1f6),_0x292160(0x201)]}}},{'$project':{'_id':_0x292160(0x238),'product_name':_0x292160(0x22d),'product_code':_0x292160(0x1f5),'quantity_available':_0x292160(0x21a),'warehouse_name':_0x292160(0x222),'warehouse_room':_0x292160(0x242),'invoice':_0x292160(0x201),'production_date':_0x292160(0x1e7),'expiry_date':_0x292160(0x23b),'UOM':'$product_details.unit'}}],'as':_0x292160(0x1e9)}}]);_0x44911a[_0x292160(0x229)]={},await Promise[_0x292160(0x1e8)](_0x44911a[_0x292160(0x228)](async _0x2c86fe=>{var _0x44f7f0=_0x292160;_0x44911a['data_sales'][_0x2c86fe[_0x44f7f0(0x233)]]=[],await Promise[_0x44f7f0(0x1e8)](_0x2c86fe['warehouse_data']['map'](async _0x40833f=>{var _0x252848=_0x44f7f0;const _0x49b61e=await sales_finished[_0x252848(0x1e0)]([{'$unwind':_0x252848(0x1e2)},{'$match':{'sale_product.id_transaction_from':_0x40833f[_0x252848(0x1f7)][_0x252848(0x1f9)](),'sale_product.invoice':_0x40833f[_0x252848(0x233)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x252848(0x1df),'product_code':_0x252848(0x240),'quantity_available':_0x252848(0x1db),'warehouse_name':_0x252848(0x241),'warehouse_room':_0x252848(0x22a),'product_invoice':_0x252848(0x1de),'invoice':_0x252848(0x231),'id_transaction_from':_0x252848(0x20c),'date':'$date','production_date':_0x252848(0x23c),'expiry_date':_0x252848(0x1f1),'UOM':_0x252848(0x1ec)}}]);_0x49b61e[_0x252848(0x207)]>0x0&&_0x44911a[_0x252848(0x229)][_0x2c86fe[_0x252848(0x233)]][_0x252848(0x246)](..._0x49b61e);}));})),_0x44911a[_0x292160(0x229)]=_0x44911a[_0x292160(0x229)],_0x44911a[_0x292160(0x245)]={},await Promise[_0x292160(0x1e8)](_0x44911a[_0x292160(0x228)](async _0x2af89e=>{var _0x238777=_0x292160;_0x44911a['data_adjustment'][_0x2af89e['invoice']]=[],await Promise[_0x238777(0x1e8)](_0x2af89e[_0x238777(0x1e9)][_0x238777(0x228)](async _0x2f8a90=>{var _0x396770=_0x238777;const _0x1f3ce6=await adjustment_finished['aggregate']([{'$unwind':_0x396770(0x239)},{'$match':{'product.id_transaction_from':_0x2f8a90[_0x396770(0x1f7)]['valueOf'](),'product.invoice':_0x2f8a90[_0x396770(0x233)]}},{'$project':{'_id':'$product._id','product_name':_0x396770(0x218),'product_code':_0x396770(0x1e4),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x396770(0x241),'warehouse_room':_0x396770(0x23d),'product_invoice':_0x396770(0x202),'invoice':_0x396770(0x231),'id_transaction_from':'$product.id_transaction_from','date':_0x396770(0x230),'production_date':_0x396770(0x20d),'expiry_date':_0x396770(0x21e),'UOM':'$product.unit'}}]);_0x1f3ce6[_0x396770(0x207)]>0x0&&_0x44911a[_0x396770(0x245)][_0x2af89e[_0x396770(0x233)]][_0x396770(0x246)](..._0x1f3ce6);}));})),_0x44911a[_0x292160(0x1fb)]={},await Promise[_0x292160(0x1e8)](_0x44911a[_0x292160(0x228)](async _0x181124=>{var _0xaeb3df=_0x292160;_0x44911a[_0xaeb3df(0x1fb)][_0x181124['invoice']]=[],await Promise[_0xaeb3df(0x1e8)](_0x181124[_0xaeb3df(0x1e9)][_0xaeb3df(0x228)](async _0xef1515=>{var _0x13ec09=_0xaeb3df;const _0x396ff4=await transfers_finished[_0x13ec09(0x1e0)]([{'$unwind':_0x13ec09(0x239)},{'$match':{'product.id_transaction':_0xef1515[_0x13ec09(0x1f7)][_0x13ec09(0x1f9)](),'product.from_invoice':_0xef1515[_0x13ec09(0x233)]}},{'$project':{'_id':_0x13ec09(0x227),'product_name':_0x13ec09(0x218),'product_code':_0x13ec09(0x1e4),'quantity_available':_0x13ec09(0x1d8),'warehouse_name':_0x13ec09(0x200),'warehouse_room':_0x13ec09(0x23d),'product_invoice':_0x13ec09(0x22c),'invoice':'$invoice','id_transaction_from':_0x13ec09(0x215),'date':'$date','production_date':'$product.production_date','expiry_date':_0x13ec09(0x21e),'UOM':_0x13ec09(0x220)}}]);_0x396ff4[_0x13ec09(0x207)]>0x0&&_0x44911a[_0x13ec09(0x1fb)][_0x181124['invoice']][_0x13ec09(0x246)](..._0x396ff4);}));})),_0x5e932d[_0x292160(0x236)]({'purchases_warehouse':_0x44911a,'data_sales':_0x44911a[_0x292160(0x229)],'data_adjustment':_0x44911a[_0x292160(0x245)],'data_transfer':_0x44911a['data_transfer']});}}}),router[a0_0x1aad77(0x1fa)](a0_0x1aad77(0x21d),auth,async(_0x4ca533,_0x20bdf3)=>{var _0x48ebb7=a0_0x1aad77;try{const _0x21ce19=_0x4ca533[_0x48ebb7(0x234)]['id'];var _0x437921=await purchases_finished[_0x48ebb7(0x1ea)](_0x21ce19);const _0x5e0a21=await master_shop[_0x48ebb7(0x223)](),_0x4f823f=_0x4ca533['user'],_0x3984ff=await profile[_0x48ebb7(0x1d9)]({'email':_0x4f823f[_0x48ebb7(0x210)]});if(_0x5e0a21[0x0][_0x48ebb7(0x23f)]=='English\x20(US)')var _0x510c33=users[_0x48ebb7(0x21b)];else{if(_0x5e0a21[0x0]['language']=='Hindi')var _0x510c33=users[_0x48ebb7(0x23e)];else{if(_0x5e0a21[0x0][_0x48ebb7(0x23f)]==_0x48ebb7(0x212))var _0x510c33=users[_0x48ebb7(0x212)];else{if(_0x5e0a21[0x0]['language']=='Spanish')var _0x510c33=users['Spanish'];else{if(_0x5e0a21[0x0][_0x48ebb7(0x23f)]==_0x48ebb7(0x209))var _0x510c33=users[_0x48ebb7(0x209)];else{if(_0x5e0a21[0x0][_0x48ebb7(0x23f)]=='Portuguese\x20(BR)')var _0x510c33=users['Portuguese'];else{if(_0x5e0a21[0x0][_0x48ebb7(0x23f)]=='Chinese')var _0x510c33=users[_0x48ebb7(0x20e)];else{if(_0x5e0a21[0x0][_0x48ebb7(0x23f)]=='Arabic\x20(ae)')var _0x510c33=users[_0x48ebb7(0x1f4)];}}}}}}}_0x20bdf3[_0x48ebb7(0x21c)](_0x48ebb7(0x1ef),{'success':_0x4ca533[_0x48ebb7(0x1f8)](_0x48ebb7(0x1fd)),'errors':_0x4ca533[_0x48ebb7(0x1f8)](_0x48ebb7(0x1d7)),'master_shop':_0x5e0a21,'profile':_0x3984ff,'role':_0x4f823f,'language':_0x510c33,'data':_0x437921});}catch(_0x2e1240){_0x20bdf3[_0x48ebb7(0x236)](_0x2e1240);}}),router['get'](a0_0x1aad77(0x1f2),auth,async(_0x4e2e9f,_0x15c493)=>{var _0x11c376=a0_0x1aad77;try{const _0x460d2d=_0x4e2e9f[_0x11c376(0x234)]['id'];var _0x600679=await sales_finished[_0x11c376(0x1ea)](_0x460d2d);const _0x570afa=await master_shop['find'](),_0x3a1db9=_0x4e2e9f['user'],_0x363672=await profile[_0x11c376(0x1d9)]({'email':_0x3a1db9[_0x11c376(0x210)]});if(_0x570afa[0x0][_0x11c376(0x23f)]==_0x11c376(0x208))var _0x45b745=users[_0x11c376(0x21b)];else{if(_0x570afa[0x0]['language']==_0x11c376(0x23e))var _0x45b745=users[_0x11c376(0x23e)];else{if(_0x570afa[0x0][_0x11c376(0x23f)]==_0x11c376(0x212))var _0x45b745=users[_0x11c376(0x212)];else{if(_0x570afa[0x0][_0x11c376(0x23f)]==_0x11c376(0x22f))var _0x45b745=users[_0x11c376(0x22f)];else{if(_0x570afa[0x0][_0x11c376(0x23f)]==_0x11c376(0x209))var _0x45b745=users[_0x11c376(0x209)];else{if(_0x570afa[0x0][_0x11c376(0x23f)]==_0x11c376(0x1fe))var _0x45b745=users['Portuguese'];else{if(_0x570afa[0x0][_0x11c376(0x23f)]==_0x11c376(0x20e))var _0x45b745=users[_0x11c376(0x20e)];else{if(_0x570afa[0x0]['language']==_0x11c376(0x20b))var _0x45b745=users[_0x11c376(0x1f4)];}}}}}}}_0x15c493[_0x11c376(0x21c)](_0x11c376(0x1e1),{'success':_0x4e2e9f[_0x11c376(0x1f8)]('success'),'errors':_0x4e2e9f['flash'](_0x11c376(0x1d7)),'master_shop':_0x570afa,'profile':_0x363672,'role':_0x3a1db9,'language':_0x45b745,'data':_0x600679});}catch(_0x370af2){_0x15c493[_0x11c376(0x236)](_0x370af2);}}),router[a0_0x1aad77(0x1fa)](a0_0x1aad77(0x23a),auth,async(_0x337ebd,_0x35b105)=>{var _0x19368a=a0_0x1aad77;try{const _0x475dfe=_0x337ebd[_0x19368a(0x234)]['id'];var _0x5a518b=await transfers_finished[_0x19368a(0x1ea)](_0x475dfe);const _0x4b946d=await master_shop[_0x19368a(0x223)](),_0x20aa08=_0x337ebd[_0x19368a(0x1dd)],_0x3ec615=await profile[_0x19368a(0x1d9)]({'email':_0x20aa08[_0x19368a(0x210)]});if(_0x4b946d[0x0][_0x19368a(0x23f)]==_0x19368a(0x208))var _0x2c17e3=users['English'];else{if(_0x4b946d[0x0][_0x19368a(0x23f)]=='Hindi')var _0x2c17e3=users[_0x19368a(0x23e)];else{if(_0x4b946d[0x0][_0x19368a(0x23f)]=='German')var _0x2c17e3=users['German'];else{if(_0x4b946d[0x0][_0x19368a(0x23f)]=='Spanish')var _0x2c17e3=users['Spanish'];else{if(_0x4b946d[0x0][_0x19368a(0x23f)]==_0x19368a(0x209))var _0x2c17e3=users['French'];else{if(_0x4b946d[0x0][_0x19368a(0x23f)]==_0x19368a(0x1fe))var _0x2c17e3=users[_0x19368a(0x219)];else{if(_0x4b946d[0x0][_0x19368a(0x23f)]==_0x19368a(0x20e))var _0x2c17e3=users['Chinese'];else{if(_0x4b946d[0x0][_0x19368a(0x23f)]=='Arabic\x20(ae)')var _0x2c17e3=users[_0x19368a(0x1f4)];}}}}}}}_0x35b105[_0x19368a(0x21c)](_0x19368a(0x214),{'success':_0x337ebd[_0x19368a(0x1f8)]('success'),'errors':_0x337ebd[_0x19368a(0x1f8)](_0x19368a(0x1d7)),'master_shop':_0x4b946d,'profile':_0x3ec615,'role':_0x20aa08,'language':_0x2c17e3,'data':_0x5a518b});}catch(_0x64c636){_0x35b105[_0x19368a(0x236)](_0x64c636);}}),router[a0_0x1aad77(0x1fa)](a0_0x1aad77(0x211),auth,async(_0x35eccf,_0x2476c8)=>{var _0x2e2416=a0_0x1aad77;try{const {username:_0x529ebb,email:_0x1aa0ab,role:_0x1361f2}=_0x35eccf[_0x2e2416(0x1dd)],_0x150200=_0x35eccf[_0x2e2416(0x1dd)],_0x55263d=await profile[_0x2e2416(0x1d9)]({'email':_0x150200['email']}),_0x976209=await master_shop[_0x2e2416(0x223)](),_0x40bf54=await warehouse[_0x2e2416(0x1e0)]([{'$match':{'status':_0x2e2416(0x1eb),'warehouse_category':_0x2e2416(0x225)}},{'$group':{'_id':_0x2e2416(0x222),'name':{'$first':_0x2e2416(0x222)}}}]);if(_0x976209[0x0][_0x2e2416(0x23f)]==_0x2e2416(0x208))var _0x959dbb=users[_0x2e2416(0x21b)];else{if(_0x976209[0x0][_0x2e2416(0x23f)]=='Hindi')var _0x959dbb=users[_0x2e2416(0x23e)];else{if(_0x976209[0x0]['language']==_0x2e2416(0x212))var _0x959dbb=users['German'];else{if(_0x976209[0x0][_0x2e2416(0x23f)]==_0x2e2416(0x22f))var _0x959dbb=users[_0x2e2416(0x22f)];else{if(_0x976209[0x0][_0x2e2416(0x23f)]==_0x2e2416(0x209))var _0x959dbb=users[_0x2e2416(0x209)];else{if(_0x976209[0x0][_0x2e2416(0x23f)]==_0x2e2416(0x1fe))var _0x959dbb=users[_0x2e2416(0x219)];else{if(_0x976209[0x0][_0x2e2416(0x23f)]=='Chinese')var _0x959dbb=users[_0x2e2416(0x20e)];else{if(_0x976209[0x0][_0x2e2416(0x23f)]==_0x2e2416(0x20b))var _0x959dbb=users[_0x2e2416(0x1f4)];}}}}}}}_0x2476c8['render'](_0x2e2416(0x1f0),{'success':_0x35eccf[_0x2e2416(0x1f8)](_0x2e2416(0x1fd)),'errors':_0x35eccf[_0x2e2416(0x1f8)](_0x2e2416(0x1d7)),'role':_0x150200,'profile':_0x55263d,'master_shop':_0x976209,'dataProcess':_0x40bf54,'language':_0x959dbb});}catch(_0x53d254){console[_0x2e2416(0x237)](_0x53d254);}}),module[a0_0x1aad77(0x216)]=router;function a0_0x783a(){var _0x2a6bfc=['$sale_product.quantity','/reports','user','$sale_product.invoice','$sale_product.product_name','aggregate','view_og_table','$sale_product','$product_details','$product.product_code','485130STSlAN','181873AuXLoy','$product_details.production_date','all','warehouse_data','findById','Enabled','$sale_product.unit','../middleware/auth','/view','view_table','transaction_finished_raw','$sale_product.expiry_date','/viewdata_og_fg/:id','$product.new_adjust_qty','Arabic','$product_details.product_code','$$invoice','_id','flash','valueOf','get','data_transfer','transaction_finished','success','Portuguese\x20(BR)','1402280VdUjKF','$to_warehouse','$product_details.invoice','$product.invoice','9LYJVJe','326920tCnFlh','$product.id_transaction_from','nodemailer','length','English\x20(US)','French','$sale_product._id','Arabic\x20(ae)','$sale_product.id_transaction_from','$product.production_date','Chinese','44aNWzqR','email','/viewFG','German','Finished\x20Goods','view_tf_table','$product.id_transaction','exports','642nQJYJJ','$product.product_name','Portuguese','$product_details.product_stock','English','render','/viewdata_inc_fg/:id','$product.expiry_date','$product.id_transaction_id','$product.unit','warehouses','$name','find','body','Raw\x20Materials','../models/all_models','$product._id','map','data_sales','$sale_product.room_name','7CGIlZQ','$product.to_room_name','$product_details.product_name','83885lEPCDP','Spanish','$date','$invoice','post','invoice','params','958344hebsyh','json','log','$product_details._id','$product','/viewdata_tf_fg/:id','$product_details.expiry_date','$sale_product.production_date','$product.room_names','Hindi','language','$sale_product.product_code','$warehouse_name','$room','$product_details.unit','Router','data_adjustment','push','errors','$product.to_quantity','findOne','../public/language/languages.json'];a0_0x783a=function(){return _0x2a6bfc;};return a0_0x783a();}