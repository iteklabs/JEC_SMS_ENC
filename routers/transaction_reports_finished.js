function a0_0x11f4(_0x12de97,_0x56635f){var _0x1865d3=a0_0x1865();return a0_0x11f4=function(_0x11f45d,_0x2d8acf){_0x11f45d=_0x11f45d-0x87;var _0x412f34=_0x1865d3[_0x11f45d];return _0x412f34;},a0_0x11f4(_0x12de97,_0x56635f);}var a0_0x14380b=a0_0x11f4;(function(_0x1442fc,_0x3454dd){var _0x1748e6=a0_0x11f4,_0x577dd6=_0x1442fc();while(!![]){try{var _0xa108d7=-parseInt(_0x1748e6(0x96))/0x1*(parseInt(_0x1748e6(0xcd))/0x2)+-parseInt(_0x1748e6(0xe0))/0x3*(-parseInt(_0x1748e6(0xa7))/0x4)+parseInt(_0x1748e6(0xe3))/0x5+-parseInt(_0x1748e6(0xae))/0x6+parseInt(_0x1748e6(0xca))/0x7+parseInt(_0x1748e6(0x9f))/0x8+-parseInt(_0x1748e6(0xa4))/0x9;if(_0xa108d7===_0x3454dd)break;else _0x577dd6['push'](_0x577dd6['shift']());}catch(_0x51ec83){_0x577dd6['push'](_0x577dd6['shift']());}}}(a0_0x1865,0xd985e));const express=require('express'),app=express(),router=express[a0_0x14380b(0xf1)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x14380b(0xbc)),auth=require(a0_0x14380b(0xbd)),users=require(a0_0x14380b(0xc4)),nodemailer=require(a0_0x14380b(0x99));router[a0_0x14380b(0xea)](a0_0x14380b(0xb9),auth,async(_0x34eede,_0x4bfaed)=>{var _0xa2b662=a0_0x14380b;try{const {username:_0x1d533d,email:_0xa00f6e,role:_0x282cf4}=_0x34eede[_0xa2b662(0x8f)],_0x2aafbf=_0x34eede[_0xa2b662(0x8f)],_0x5629b4=await profile[_0xa2b662(0xee)]({'email':_0x2aafbf[_0xa2b662(0xc6)]}),_0x5e0da9=await master_shop[_0xa2b662(0xb8)](),_0x24c39c=await warehouse[_0xa2b662(0xd0)]([{'$match':{'status':_0xa2b662(0xb7),'warehouse_category':_0xa2b662(0xc0)}},{'$group':{'_id':_0xa2b662(0xc9),'name':{'$first':_0xa2b662(0xc9)}}}]);if(_0x5e0da9[0x0][_0xa2b662(0xa1)]==_0xa2b662(0xcc))var _0x181cbf=users[_0xa2b662(0xc2)];else{if(_0x5e0da9[0x0]['language']=='Hindi')var _0x181cbf=users['Hindi'];else{if(_0x5e0da9[0x0][_0xa2b662(0xa1)]==_0xa2b662(0xb6))var _0x181cbf=users['German'];else{if(_0x5e0da9[0x0][_0xa2b662(0xa1)]==_0xa2b662(0x91))var _0x181cbf=users[_0xa2b662(0x91)];else{if(_0x5e0da9[0x0][_0xa2b662(0xa1)]==_0xa2b662(0xd1))var _0x181cbf=users[_0xa2b662(0xd1)];else{if(_0x5e0da9[0x0][_0xa2b662(0xa1)]=='Portuguese\x20(BR)')var _0x181cbf=users[_0xa2b662(0xc8)];else{if(_0x5e0da9[0x0][_0xa2b662(0xa1)]=='Chinese')var _0x181cbf=users[_0xa2b662(0xb2)];else{if(_0x5e0da9[0x0][_0xa2b662(0xa1)]==_0xa2b662(0xb3))var _0x181cbf=users[_0xa2b662(0xec)];}}}}}}}_0x4bfaed[_0xa2b662(0x9e)](_0xa2b662(0xe5),{'success':_0x34eede[_0xa2b662(0xd8)](_0xa2b662(0x9d)),'errors':_0x34eede[_0xa2b662(0xd8)](_0xa2b662(0xe1)),'role':_0x2aafbf,'profile':_0x5629b4,'master_shop':_0x5e0da9,'dataProcess':_0x24c39c,'language':_0x181cbf});}catch(_0x22bd9f){console['log'](_0x22bd9f);}}),router[a0_0x14380b(0x89)](a0_0x14380b(0xbb),auth,async(_0x51bbf5,_0x7562f0)=>{var _0x1c7eb0=a0_0x14380b;const {product_category:_0x29c984,transaction_category:_0x19504d,transaction_date_from:_0xdffb56,transaction_date_to:_0x2793c0,warehouse_category:_0x329a03,item_code:_0x49f323}=_0x51bbf5[_0x1c7eb0(0x9b)];console[_0x1c7eb0(0x9c)](_0x329a03);if(_0x29c984=='rm'){if(_0x329a03=='all'){var _0x2bc09a=await purchases[_0x1c7eb0(0xd0)]([{'$match':{'date':{'$gte':_0xdffb56,'$lte':_0x2793c0}}},{'$lookup':{'from':_0x1c7eb0(0xd7),'let':{'invoice':_0x1c7eb0(0xa8)},'pipeline':[{'$unwind':_0x1c7eb0(0xd6)},{'$match':{'$expr':{'$eq':[_0x1c7eb0(0xd4),_0x1c7eb0(0xd2)]}}},{'$project':{'_id':_0x1c7eb0(0xdf),'product_name':_0x1c7eb0(0xeb),'product_code':'$product_details.product_code','quantity_available':_0x1c7eb0(0xa5),'warehouse_name':_0x1c7eb0(0xc9),'warehouse_room':_0x1c7eb0(0xba),'invoice':_0x1c7eb0(0xd2),'production_date':_0x1c7eb0(0x93),'expiry_date':_0x1c7eb0(0xa2),'UOM':'$product_details.unit'}}],'as':_0x1c7eb0(0xf0)}}]);_0x2bc09a['data_sales']={},await Promise[_0x1c7eb0(0xa0)](_0x2bc09a['map'](async _0x35ecb8=>{var _0x21c5fd=_0x1c7eb0;_0x2bc09a['data_sales'][_0x35ecb8[_0x21c5fd(0xac)]]=[],await Promise['all'](_0x35ecb8[_0x21c5fd(0xf0)][_0x21c5fd(0xb1)](async _0x14350d=>{var _0x5ca3af=_0x21c5fd;const _0x1f1547=await sales[_0x5ca3af(0xd0)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x14350d[_0x5ca3af(0xd3)][_0x5ca3af(0xaf)](),'sale_product.invoice':_0x14350d[_0x5ca3af(0xac)]}},{'$project':{'_id':_0x5ca3af(0x8b),'product_name':'$sale_product.product_name','product_code':_0x5ca3af(0xb5),'quantity_available':'$sale_product.quantity','warehouse_name':_0x5ca3af(0x95),'warehouse_room':'$sale_product.room_name','product_invoice':_0x5ca3af(0xa3),'invoice':_0x5ca3af(0xa8),'id_transaction_from':_0x5ca3af(0x8e),'date':_0x5ca3af(0xcb),'production_date':_0x5ca3af(0xed),'expiry_date':_0x5ca3af(0x90),'UOM':_0x5ca3af(0xef)}}]);_0x1f1547['length']>0x0&&_0x2bc09a['data_sales'][_0x35ecb8['invoice']][_0x5ca3af(0xe9)](..._0x1f1547);}));})),_0x2bc09a[_0x1c7eb0(0xce)]=_0x2bc09a[_0x1c7eb0(0xce)],_0x2bc09a[_0x1c7eb0(0xf2)]={},await Promise[_0x1c7eb0(0xa0)](_0x2bc09a['map'](async _0x4c2d91=>{var _0x196f8e=_0x1c7eb0;_0x2bc09a['data_adjustment'][_0x4c2d91['invoice']]=[],await Promise[_0x196f8e(0xa0)](_0x4c2d91['warehouse_data'][_0x196f8e(0xb1)](async _0x57c291=>{var _0x5850e3=_0x196f8e;const _0x52664e=await adjustment[_0x5850e3(0xd0)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x57c291[_0x5850e3(0xd3)][_0x5850e3(0xaf)](),'product.invoice':_0x57c291[_0x5850e3(0xac)]}},{'$project':{'_id':_0x5850e3(0x97),'product_name':_0x5850e3(0xb0),'product_code':_0x5850e3(0xb4),'quantity_available':_0x5850e3(0xe8),'warehouse_name':_0x5850e3(0x95),'warehouse_room':_0x5850e3(0x94),'product_invoice':_0x5850e3(0xdb),'invoice':_0x5850e3(0xa8),'id_transaction_from':_0x5850e3(0xd9),'date':_0x5850e3(0xcb),'production_date':_0x5850e3(0xe4),'expiry_date':_0x5850e3(0xe7),'UOM':_0x5850e3(0xc3)}}]);_0x52664e[_0x5850e3(0xad)]>0x0&&_0x2bc09a[_0x5850e3(0xf2)][_0x4c2d91[_0x5850e3(0xac)]][_0x5850e3(0xe9)](..._0x52664e);}));})),_0x2bc09a[_0x1c7eb0(0xab)]={},await Promise[_0x1c7eb0(0xa0)](_0x2bc09a[_0x1c7eb0(0xb1)](async _0x4997b5=>{var _0x1da1d2=_0x1c7eb0;_0x2bc09a[_0x1da1d2(0xab)][_0x4997b5[_0x1da1d2(0xac)]]=[],await Promise[_0x1da1d2(0xa0)](_0x4997b5[_0x1da1d2(0xf0)][_0x1da1d2(0xb1)](async _0x3841f7=>{var _0x21cdac=_0x1da1d2;const _0x127316=await transfers['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x3841f7['_id']['valueOf'](),'product.To_invoice':_0x3841f7[_0x21cdac(0xac)]}},{'$project':{'_id':_0x21cdac(0x97),'product_name':'$product.product_name','product_code':_0x21cdac(0xb4),'quantity_available':_0x21cdac(0xaa),'warehouse_name':_0x21cdac(0xc7),'warehouse_room':_0x21cdac(0x94),'product_invoice':_0x21cdac(0xc5),'invoice':_0x21cdac(0xa8),'id_transaction_from':_0x21cdac(0x8a),'date':_0x21cdac(0xcb),'production_date':_0x21cdac(0xe4),'expiry_date':_0x21cdac(0xe7),'UOM':'$product.unit'}}]);_0x127316[_0x21cdac(0xad)]>0x0&&_0x2bc09a[_0x21cdac(0xab)][_0x4997b5[_0x21cdac(0xac)]]['push'](..._0x127316);}));})),_0x7562f0[_0x1c7eb0(0xa6)]({'purchases_warehouse':_0x2bc09a,'data_sales':_0x2bc09a[_0x1c7eb0(0xce)],'data_adjustment':_0x2bc09a[_0x1c7eb0(0xf2)],'data_transfer':_0x2bc09a[_0x1c7eb0(0xab)]});}else{var _0x2bc09a=await purchases[_0x1c7eb0(0xd0)]([{'$match':{'warehouse_name':_0x329a03,'date':{'$gte':_0xdffb56,'$lte':_0x2793c0}}},{'$lookup':{'from':_0x1c7eb0(0xd7),'let':{'invoice':_0x1c7eb0(0xa8)},'pipeline':[{'$unwind':_0x1c7eb0(0xd6)},{'$match':{'$expr':{'$eq':[_0x1c7eb0(0xd4),_0x1c7eb0(0xd2)]}}},{'$project':{'_id':_0x1c7eb0(0xdf),'product_name':_0x1c7eb0(0xeb),'product_code':_0x1c7eb0(0x98),'quantity_available':_0x1c7eb0(0xa5),'warehouse_name':_0x1c7eb0(0xc9),'warehouse_room':_0x1c7eb0(0xba),'invoice':_0x1c7eb0(0xd2),'production_date':'$product_details.production_date','expiry_date':_0x1c7eb0(0xa2),'UOM':_0x1c7eb0(0xdc)}}],'as':'warehouse_data'}}]);_0x2bc09a[_0x1c7eb0(0xce)]={},await Promise[_0x1c7eb0(0xa0)](_0x2bc09a[_0x1c7eb0(0xb1)](async _0x23febe=>{var _0x1b1a09=_0x1c7eb0;_0x2bc09a['data_sales'][_0x23febe[_0x1b1a09(0xac)]]=[],await Promise[_0x1b1a09(0xa0)](_0x23febe['warehouse_data'][_0x1b1a09(0xb1)](async _0x9c50a9=>{var _0x17c714=_0x1b1a09;const _0x18b552=await sales[_0x17c714(0xd0)]([{'$unwind':_0x17c714(0xde)},{'$match':{'sale_product.id_transaction_from':_0x9c50a9[_0x17c714(0xd3)][_0x17c714(0xaf)](),'sale_product.invoice':_0x9c50a9['invoice']}},{'$project':{'_id':_0x17c714(0x8b),'product_name':_0x17c714(0xf3),'product_code':_0x17c714(0xb5),'quantity_available':'$sale_product.quantity','warehouse_name':_0x17c714(0x95),'warehouse_room':_0x17c714(0x8d),'product_invoice':_0x17c714(0xa3),'invoice':_0x17c714(0xa8),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x17c714(0xcb),'production_date':_0x17c714(0xed),'expiry_date':_0x17c714(0x90),'UOM':_0x17c714(0xef)}}]);_0x18b552['length']>0x0&&_0x2bc09a['data_sales'][_0x23febe['invoice']][_0x17c714(0xe9)](..._0x18b552);}));})),_0x2bc09a[_0x1c7eb0(0xce)]=_0x2bc09a[_0x1c7eb0(0xce)],_0x2bc09a[_0x1c7eb0(0xf2)]={},await Promise['all'](_0x2bc09a['map'](async _0x266ea4=>{var _0x5d0a50=_0x1c7eb0;_0x2bc09a[_0x5d0a50(0xf2)][_0x266ea4[_0x5d0a50(0xac)]]=[],await Promise[_0x5d0a50(0xa0)](_0x266ea4[_0x5d0a50(0xf0)][_0x5d0a50(0xb1)](async _0x3ec4d7=>{var _0x283708=_0x5d0a50;const _0x273806=await adjustment[_0x283708(0xd0)]([{'$unwind':_0x283708(0xbe)},{'$match':{'product.id_transaction_from':_0x3ec4d7['_id']['valueOf'](),'product.invoice':_0x3ec4d7[_0x283708(0xac)]}},{'$project':{'_id':_0x283708(0x97),'product_name':_0x283708(0xb0),'product_code':_0x283708(0xb4),'quantity_available':_0x283708(0xe8),'warehouse_name':_0x283708(0x95),'warehouse_room':'$product.room_names','product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':_0x283708(0xd9),'date':_0x283708(0xcb),'production_date':_0x283708(0xe4),'expiry_date':_0x283708(0xe7),'UOM':_0x283708(0xc3)}}]);_0x273806[_0x283708(0xad)]>0x0&&_0x2bc09a[_0x283708(0xf2)][_0x266ea4[_0x283708(0xac)]][_0x283708(0xe9)](..._0x273806);}));})),_0x2bc09a[_0x1c7eb0(0xab)]={},await Promise['all'](_0x2bc09a[_0x1c7eb0(0xb1)](async _0x102116=>{var _0x4c38bb=_0x1c7eb0;_0x2bc09a[_0x4c38bb(0xab)][_0x102116[_0x4c38bb(0xac)]]=[],await Promise['all'](_0x102116[_0x4c38bb(0xf0)][_0x4c38bb(0xb1)](async _0x2edfb5=>{var _0x51dabb=_0x4c38bb;const _0x4d39c1=await transfers[_0x51dabb(0xd0)]([{'$unwind':_0x51dabb(0xbe)},{'$match':{'product.id_transaction_id':_0x2edfb5[_0x51dabb(0xd3)][_0x51dabb(0xaf)](),'product.To_invoice':_0x2edfb5[_0x51dabb(0xac)]}},{'$project':{'_id':'$product._id','product_name':_0x51dabb(0xb0),'product_code':_0x51dabb(0xb4),'quantity_available':_0x51dabb(0xaa),'warehouse_name':_0x51dabb(0xc7),'warehouse_room':_0x51dabb(0x94),'product_invoice':'$product.to_room_name','invoice':'$invoice','id_transaction_from':_0x51dabb(0x8a),'date':_0x51dabb(0xcb),'production_date':_0x51dabb(0xe4),'expiry_date':_0x51dabb(0xe7),'UOM':_0x51dabb(0xc3)}}]);_0x4d39c1[_0x51dabb(0xad)]>0x0&&_0x2bc09a[_0x51dabb(0xab)][_0x102116[_0x51dabb(0xac)]]['push'](..._0x4d39c1);}));})),_0x7562f0[_0x1c7eb0(0xa6)]({'purchases_warehouse':_0x2bc09a,'data_sales':_0x2bc09a[_0x1c7eb0(0xce)],'data_adjustment':_0x2bc09a[_0x1c7eb0(0xf2)],'data_transfer':_0x2bc09a[_0x1c7eb0(0xab)]});}}else{if(_0x329a03=='all'){var _0x2bc09a=await purchases_finished[_0x1c7eb0(0xd0)]([{'$match':{'date':{'$gte':_0xdffb56,'$lte':_0x2793c0}}},{'$lookup':{'from':_0x1c7eb0(0xd7),'let':{'invoice':_0x1c7eb0(0xa8)},'pipeline':[{'$unwind':_0x1c7eb0(0xd6)},{'$match':{'$expr':{'$eq':['$$invoice',_0x1c7eb0(0xd2)]}}},{'$project':{'_id':'$product_details._id','product_name':'$product_details.product_name','product_code':_0x1c7eb0(0x98),'quantity_available':'$product_details.product_stock','warehouse_name':'$name','warehouse_room':'$room','invoice':_0x1c7eb0(0xd2),'production_date':_0x1c7eb0(0x93),'expiry_date':_0x1c7eb0(0xa2),'UOM':'$product_details.unit'}}],'as':_0x1c7eb0(0xf0)}}]);_0x2bc09a[_0x1c7eb0(0xce)]={},await Promise['all'](_0x2bc09a['map'](async _0x5794c0=>{var _0x2d0883=_0x1c7eb0;_0x2bc09a['data_sales'][_0x5794c0[_0x2d0883(0xac)]]=[],await Promise[_0x2d0883(0xa0)](_0x5794c0['warehouse_data'][_0x2d0883(0xb1)](async _0x41ceea=>{var _0x19e535=_0x2d0883;const _0x279e3a=await sales_finished[_0x19e535(0xd0)]([{'$unwind':_0x19e535(0xde)},{'$match':{'sale_product.id_transaction_from':_0x41ceea[_0x19e535(0xd3)][_0x19e535(0xaf)](),'sale_product.invoice':_0x41ceea['invoice']}},{'$project':{'_id':_0x19e535(0x8b),'product_name':_0x19e535(0xf3),'product_code':'$sale_product.product_code','quantity_available':_0x19e535(0x92),'warehouse_name':_0x19e535(0x95),'warehouse_room':_0x19e535(0x8d),'product_invoice':_0x19e535(0xa3),'invoice':'$invoice','id_transaction_from':_0x19e535(0x8e),'date':_0x19e535(0xcb),'production_date':_0x19e535(0xed),'expiry_date':'$sale_product.expiry_date','UOM':_0x19e535(0xef)}}]);_0x279e3a['length']>0x0&&_0x2bc09a[_0x19e535(0xce)][_0x5794c0[_0x19e535(0xac)]][_0x19e535(0xe9)](..._0x279e3a);}));})),_0x2bc09a[_0x1c7eb0(0xce)]=_0x2bc09a[_0x1c7eb0(0xce)],_0x2bc09a[_0x1c7eb0(0xf2)]={},await Promise[_0x1c7eb0(0xa0)](_0x2bc09a[_0x1c7eb0(0xb1)](async _0x3b29e7=>{var _0x482447=_0x1c7eb0;_0x2bc09a[_0x482447(0xf2)][_0x3b29e7['invoice']]=[],await Promise[_0x482447(0xa0)](_0x3b29e7[_0x482447(0xf0)][_0x482447(0xb1)](async _0x10d74f=>{var _0x14da28=_0x482447;const _0x3927ca=await adjustment_finished[_0x14da28(0xd0)]([{'$unwind':_0x14da28(0xbe)},{'$match':{'product.id_transaction_from':_0x10d74f['_id']['valueOf'](),'product.invoice':_0x10d74f['invoice']}},{'$project':{'_id':_0x14da28(0x97),'product_name':'$product.product_name','product_code':_0x14da28(0xb4),'quantity_available':_0x14da28(0xe8),'warehouse_name':_0x14da28(0x95),'warehouse_room':'$product.room_names','product_invoice':_0x14da28(0xdb),'invoice':_0x14da28(0xa8),'id_transaction_from':_0x14da28(0xd9),'date':'$date','production_date':_0x14da28(0xe4),'expiry_date':_0x14da28(0xe7),'UOM':_0x14da28(0xc3)}}]);_0x3927ca['length']>0x0&&_0x2bc09a[_0x14da28(0xf2)][_0x3b29e7[_0x14da28(0xac)]][_0x14da28(0xe9)](..._0x3927ca);}));})),_0x2bc09a['data_transfer']={},await Promise[_0x1c7eb0(0xa0)](_0x2bc09a['map'](async _0x21df7c=>{var _0x4054ce=_0x1c7eb0;_0x2bc09a[_0x4054ce(0xab)][_0x21df7c['invoice']]=[],await Promise[_0x4054ce(0xa0)](_0x21df7c[_0x4054ce(0xf0)]['map'](async _0x1fc351=>{var _0x1e5163=_0x4054ce;const _0x16072f=await transfers_finished['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction':_0x1fc351[_0x1e5163(0xd3)]['valueOf'](),'product.from_invoice':_0x1fc351[_0x1e5163(0xac)]}},{'$project':{'_id':_0x1e5163(0x97),'product_name':_0x1e5163(0xb0),'product_code':_0x1e5163(0xb4),'quantity_available':_0x1e5163(0xaa),'warehouse_name':_0x1e5163(0xc7),'warehouse_room':'$product.room_names','product_invoice':_0x1e5163(0xc5),'invoice':_0x1e5163(0xa8),'id_transaction_from':_0x1e5163(0xbf),'date':_0x1e5163(0xcb),'production_date':_0x1e5163(0xe4),'expiry_date':_0x1e5163(0xe7),'UOM':'$product.unit'}}]);_0x16072f[_0x1e5163(0xad)]>0x0&&_0x2bc09a[_0x1e5163(0xab)][_0x21df7c['invoice']]['push'](..._0x16072f);}));})),_0x7562f0[_0x1c7eb0(0xa6)]({'purchases_warehouse':_0x2bc09a,'data_sales':_0x2bc09a[_0x1c7eb0(0xce)],'data_adjustment':_0x2bc09a['data_adjustment'],'data_transfer':_0x2bc09a[_0x1c7eb0(0xab)]});}else{var _0x2bc09a=await purchases_finished[_0x1c7eb0(0xd0)]([{'$match':{'warehouse_name':_0x329a03,'date':{'$gte':_0xdffb56,'$lte':_0x2793c0}}},{'$lookup':{'from':'warehouses','let':{'invoice':_0x1c7eb0(0xa8)},'pipeline':[{'$unwind':_0x1c7eb0(0xd6)},{'$match':{'$expr':{'$eq':[_0x1c7eb0(0xd4),_0x1c7eb0(0xd2)]}}},{'$project':{'_id':_0x1c7eb0(0xdf),'product_name':'$product_details.product_name','product_code':_0x1c7eb0(0x98),'quantity_available':_0x1c7eb0(0xa5),'warehouse_name':_0x1c7eb0(0xc9),'warehouse_room':_0x1c7eb0(0xba),'invoice':_0x1c7eb0(0xd2),'production_date':_0x1c7eb0(0x93),'expiry_date':_0x1c7eb0(0xa2),'UOM':_0x1c7eb0(0xdc)}}],'as':'warehouse_data'}}]);_0x2bc09a['data_sales']={},await Promise[_0x1c7eb0(0xa0)](_0x2bc09a['map'](async _0x121867=>{var _0x5f6c10=_0x1c7eb0;_0x2bc09a['data_sales'][_0x121867[_0x5f6c10(0xac)]]=[],await Promise['all'](_0x121867[_0x5f6c10(0xf0)][_0x5f6c10(0xb1)](async _0x11b05e=>{var _0x49f0eb=_0x5f6c10;const _0x4192ec=await sales_finished[_0x49f0eb(0xd0)]([{'$unwind':_0x49f0eb(0xde)},{'$match':{'sale_product.id_transaction_from':_0x11b05e['_id'][_0x49f0eb(0xaf)](),'sale_product.invoice':_0x11b05e[_0x49f0eb(0xac)]}},{'$project':{'_id':_0x49f0eb(0x8b),'product_name':_0x49f0eb(0xf3),'product_code':_0x49f0eb(0xb5),'quantity_available':_0x49f0eb(0x92),'warehouse_name':'$warehouse_name','warehouse_room':'$sale_product.room_name','product_invoice':_0x49f0eb(0xa3),'invoice':_0x49f0eb(0xa8),'id_transaction_from':_0x49f0eb(0x8e),'date':_0x49f0eb(0xcb),'production_date':_0x49f0eb(0xed),'expiry_date':_0x49f0eb(0x90),'UOM':_0x49f0eb(0xef)}}]);_0x4192ec['length']>0x0&&_0x2bc09a[_0x49f0eb(0xce)][_0x121867['invoice']][_0x49f0eb(0xe9)](..._0x4192ec);}));})),_0x2bc09a['data_sales']=_0x2bc09a[_0x1c7eb0(0xce)],_0x2bc09a[_0x1c7eb0(0xf2)]={},await Promise[_0x1c7eb0(0xa0)](_0x2bc09a[_0x1c7eb0(0xb1)](async _0x2799dd=>{var _0x598059=_0x1c7eb0;_0x2bc09a[_0x598059(0xf2)][_0x2799dd[_0x598059(0xac)]]=[],await Promise[_0x598059(0xa0)](_0x2799dd[_0x598059(0xf0)][_0x598059(0xb1)](async _0x1051fe=>{var _0xa109df=_0x598059;const _0x48da56=await adjustment_finished[_0xa109df(0xd0)]([{'$unwind':_0xa109df(0xbe)},{'$match':{'product.id_transaction_from':_0x1051fe[_0xa109df(0xd3)]['valueOf'](),'product.invoice':_0x1051fe[_0xa109df(0xac)]}},{'$project':{'_id':'$product._id','product_name':_0xa109df(0xb0),'product_code':_0xa109df(0xb4),'quantity_available':'$product.new_adjust_qty','warehouse_name':'$warehouse_name','warehouse_room':_0xa109df(0x94),'product_invoice':_0xa109df(0xdb),'invoice':_0xa109df(0xa8),'id_transaction_from':_0xa109df(0xd9),'date':_0xa109df(0xcb),'production_date':'$product.production_date','expiry_date':_0xa109df(0xe7),'UOM':_0xa109df(0xc3)}}]);_0x48da56['length']>0x0&&_0x2bc09a['data_adjustment'][_0x2799dd[_0xa109df(0xac)]][_0xa109df(0xe9)](..._0x48da56);}));})),_0x2bc09a[_0x1c7eb0(0xab)]={},await Promise[_0x1c7eb0(0xa0)](_0x2bc09a[_0x1c7eb0(0xb1)](async _0x3d0d36=>{var _0x509244=_0x1c7eb0;_0x2bc09a['data_transfer'][_0x3d0d36[_0x509244(0xac)]]=[],await Promise[_0x509244(0xa0)](_0x3d0d36[_0x509244(0xf0)][_0x509244(0xb1)](async _0x24577c=>{var _0x3e3e9c=_0x509244;const _0x38cd6e=await transfers_finished['aggregate']([{'$unwind':_0x3e3e9c(0xbe)},{'$match':{'product.id_transaction':_0x24577c[_0x3e3e9c(0xd3)][_0x3e3e9c(0xaf)](),'product.from_invoice':_0x24577c[_0x3e3e9c(0xac)]}},{'$project':{'_id':_0x3e3e9c(0x97),'product_name':_0x3e3e9c(0xb0),'product_code':_0x3e3e9c(0xb4),'quantity_available':_0x3e3e9c(0xaa),'warehouse_name':'$to_warehouse','warehouse_room':_0x3e3e9c(0x94),'product_invoice':_0x3e3e9c(0xc5),'invoice':_0x3e3e9c(0xa8),'id_transaction_from':_0x3e3e9c(0xbf),'date':_0x3e3e9c(0xcb),'production_date':_0x3e3e9c(0xe4),'expiry_date':'$product.expiry_date','UOM':'$product.unit'}}]);_0x38cd6e[_0x3e3e9c(0xad)]>0x0&&_0x2bc09a['data_transfer'][_0x3d0d36[_0x3e3e9c(0xac)]][_0x3e3e9c(0xe9)](..._0x38cd6e);}));})),_0x7562f0[_0x1c7eb0(0xa6)]({'purchases_warehouse':_0x2bc09a,'data_sales':_0x2bc09a[_0x1c7eb0(0xce)],'data_adjustment':_0x2bc09a[_0x1c7eb0(0xf2)],'data_transfer':_0x2bc09a[_0x1c7eb0(0xab)]});}}}),router[a0_0x14380b(0xea)](a0_0x14380b(0xcf),auth,async(_0x17d8f4,_0x5854ab)=>{var _0x4b36a1=a0_0x14380b;try{const _0x9d7df5=_0x17d8f4[_0x4b36a1(0xda)]['id'];var _0x57bcee=await purchases_finished['findById'](_0x9d7df5);const _0x2e353b=await master_shop[_0x4b36a1(0xb8)](),_0x55e4b9=_0x17d8f4[_0x4b36a1(0x8f)],_0x11a579=await profile['findOne']({'email':_0x55e4b9[_0x4b36a1(0xc6)]});if(_0x2e353b[0x0][_0x4b36a1(0xa1)]=='English\x20(US)')var _0x4276d0=users[_0x4b36a1(0xc2)];else{if(_0x2e353b[0x0]['language']==_0x4b36a1(0xdd))var _0x4276d0=users[_0x4b36a1(0xdd)];else{if(_0x2e353b[0x0][_0x4b36a1(0xa1)]==_0x4b36a1(0xb6))var _0x4276d0=users[_0x4b36a1(0xb6)];else{if(_0x2e353b[0x0][_0x4b36a1(0xa1)]==_0x4b36a1(0x91))var _0x4276d0=users[_0x4b36a1(0x91)];else{if(_0x2e353b[0x0]['language']==_0x4b36a1(0xd1))var _0x4276d0=users[_0x4b36a1(0xd1)];else{if(_0x2e353b[0x0][_0x4b36a1(0xa1)]==_0x4b36a1(0x9a))var _0x4276d0=users['Portuguese'];else{if(_0x2e353b[0x0][_0x4b36a1(0xa1)]==_0x4b36a1(0xb2))var _0x4276d0=users[_0x4b36a1(0xb2)];else{if(_0x2e353b[0x0][_0x4b36a1(0xa1)]==_0x4b36a1(0xb3))var _0x4276d0=users[_0x4b36a1(0xec)];}}}}}}}_0x5854ab[_0x4b36a1(0x9e)]('view_table',{'success':_0x17d8f4[_0x4b36a1(0xd8)](_0x4b36a1(0x9d)),'errors':_0x17d8f4[_0x4b36a1(0xd8)](_0x4b36a1(0xe1)),'master_shop':_0x2e353b,'profile':_0x11a579,'role':_0x55e4b9,'language':_0x4276d0,'data':_0x57bcee});}catch(_0x225718){_0x5854ab[_0x4b36a1(0xa6)](_0x225718);}}),router['get'](a0_0x14380b(0xa9),auth,async(_0x12e807,_0x56b300)=>{var _0x29a111=a0_0x14380b;try{const _0x4f6b71=_0x12e807['params']['id'];var _0x2ccae0=await sales_finished['findById'](_0x4f6b71);const _0xdc0e96=await master_shop[_0x29a111(0xb8)](),_0x613ad=_0x12e807[_0x29a111(0x8f)],_0x20a9db=await profile[_0x29a111(0xee)]({'email':_0x613ad['email']});if(_0xdc0e96[0x0][_0x29a111(0xa1)]==_0x29a111(0xcc))var _0x4af2b8=users[_0x29a111(0xc2)];else{if(_0xdc0e96[0x0][_0x29a111(0xa1)]==_0x29a111(0xdd))var _0x4af2b8=users[_0x29a111(0xdd)];else{if(_0xdc0e96[0x0]['language']==_0x29a111(0xb6))var _0x4af2b8=users[_0x29a111(0xb6)];else{if(_0xdc0e96[0x0][_0x29a111(0xa1)]==_0x29a111(0x91))var _0x4af2b8=users['Spanish'];else{if(_0xdc0e96[0x0][_0x29a111(0xa1)]==_0x29a111(0xd1))var _0x4af2b8=users[_0x29a111(0xd1)];else{if(_0xdc0e96[0x0][_0x29a111(0xa1)]==_0x29a111(0x9a))var _0x4af2b8=users[_0x29a111(0xc8)];else{if(_0xdc0e96[0x0][_0x29a111(0xa1)]==_0x29a111(0xb2))var _0x4af2b8=users[_0x29a111(0xb2)];else{if(_0xdc0e96[0x0][_0x29a111(0xa1)]==_0x29a111(0xb3))var _0x4af2b8=users['Arabic'];}}}}}}}_0x56b300[_0x29a111(0x9e)](_0x29a111(0x88),{'success':_0x12e807[_0x29a111(0xd8)](_0x29a111(0x9d)),'errors':_0x12e807['flash']('errors'),'master_shop':_0xdc0e96,'profile':_0x20a9db,'role':_0x613ad,'language':_0x4af2b8,'data':_0x2ccae0});}catch(_0x2c90ad){_0x56b300['json'](_0x2c90ad);}}),router[a0_0x14380b(0xea)](a0_0x14380b(0x8c),auth,async(_0x277c76,_0x2775c6)=>{var _0x25d24e=a0_0x14380b;try{const _0x575bc6=_0x277c76[_0x25d24e(0xda)]['id'];var _0x15728b=await transfers_finished[_0x25d24e(0xe6)](_0x575bc6);const _0x33717b=await master_shop['find'](),_0x110d38=_0x277c76[_0x25d24e(0x8f)],_0x5ed7ad=await profile[_0x25d24e(0xee)]({'email':_0x110d38[_0x25d24e(0xc6)]});if(_0x33717b[0x0][_0x25d24e(0xa1)]==_0x25d24e(0xcc))var _0x118b1e=users[_0x25d24e(0xc2)];else{if(_0x33717b[0x0][_0x25d24e(0xa1)]=='Hindi')var _0x118b1e=users[_0x25d24e(0xdd)];else{if(_0x33717b[0x0][_0x25d24e(0xa1)]==_0x25d24e(0xb6))var _0x118b1e=users[_0x25d24e(0xb6)];else{if(_0x33717b[0x0]['language']==_0x25d24e(0x91))var _0x118b1e=users[_0x25d24e(0x91)];else{if(_0x33717b[0x0][_0x25d24e(0xa1)]=='French')var _0x118b1e=users[_0x25d24e(0xd1)];else{if(_0x33717b[0x0][_0x25d24e(0xa1)]==_0x25d24e(0x9a))var _0x118b1e=users[_0x25d24e(0xc8)];else{if(_0x33717b[0x0]['language']=='Chinese')var _0x118b1e=users[_0x25d24e(0xb2)];else{if(_0x33717b[0x0][_0x25d24e(0xa1)]==_0x25d24e(0xb3))var _0x118b1e=users[_0x25d24e(0xec)];}}}}}}}_0x2775c6['render'](_0x25d24e(0xe2),{'success':_0x277c76['flash']('success'),'errors':_0x277c76['flash'](_0x25d24e(0xe1)),'master_shop':_0x33717b,'profile':_0x5ed7ad,'role':_0x110d38,'language':_0x118b1e,'data':_0x15728b});}catch(_0x147238){_0x2775c6[_0x25d24e(0xa6)](_0x147238);}}),router[a0_0x14380b(0xea)](a0_0x14380b(0xc1),auth,async(_0x9a4b73,_0x54c5a4)=>{var _0x5a0f4c=a0_0x14380b;try{const {username:_0x1c7e28,email:_0x1f2911,role:_0x55ee72}=_0x9a4b73['user'],_0x278e3f=_0x9a4b73[_0x5a0f4c(0x8f)],_0x222fac=await profile['findOne']({'email':_0x278e3f[_0x5a0f4c(0xc6)]}),_0x317bd5=await master_shop[_0x5a0f4c(0xb8)](),_0x7ee4ae=await warehouse[_0x5a0f4c(0xd0)]([{'$match':{'status':_0x5a0f4c(0xb7),'warehouse_category':_0x5a0f4c(0xd5)}},{'$group':{'_id':'$name','name':{'$first':_0x5a0f4c(0xc9)}}}]);if(_0x317bd5[0x0][_0x5a0f4c(0xa1)]==_0x5a0f4c(0xcc))var _0x68d69d=users[_0x5a0f4c(0xc2)];else{if(_0x317bd5[0x0][_0x5a0f4c(0xa1)]==_0x5a0f4c(0xdd))var _0x68d69d=users['Hindi'];else{if(_0x317bd5[0x0][_0x5a0f4c(0xa1)]==_0x5a0f4c(0xb6))var _0x68d69d=users[_0x5a0f4c(0xb6)];else{if(_0x317bd5[0x0][_0x5a0f4c(0xa1)]=='Spanish')var _0x68d69d=users[_0x5a0f4c(0x91)];else{if(_0x317bd5[0x0]['language']==_0x5a0f4c(0xd1))var _0x68d69d=users['French'];else{if(_0x317bd5[0x0][_0x5a0f4c(0xa1)]==_0x5a0f4c(0x9a))var _0x68d69d=users[_0x5a0f4c(0xc8)];else{if(_0x317bd5[0x0][_0x5a0f4c(0xa1)]==_0x5a0f4c(0xb2))var _0x68d69d=users[_0x5a0f4c(0xb2)];else{if(_0x317bd5[0x0][_0x5a0f4c(0xa1)]==_0x5a0f4c(0xb3))var _0x68d69d=users[_0x5a0f4c(0xec)];}}}}}}}_0x54c5a4[_0x5a0f4c(0x9e)]('transaction_finished_raw',{'success':_0x9a4b73[_0x5a0f4c(0xd8)](_0x5a0f4c(0x9d)),'errors':_0x9a4b73[_0x5a0f4c(0xd8)](_0x5a0f4c(0xe1)),'role':_0x278e3f,'profile':_0x222fac,'master_shop':_0x317bd5,'dataProcess':_0x7ee4ae,'language':_0x68d69d});}catch(_0x14f036){console[_0x5a0f4c(0x9c)](_0x14f036);}}),module[a0_0x14380b(0x87)]=router;function a0_0x1865(){var _0x5bd4fb=['Hindi','$sale_product','$product_details._id','4909371fpCNEv','errors','view_tf_table','2730045vdtbMq','$product.production_date','transaction_finished','findById','$product.expiry_date','$product.new_adjust_qty','push','get','$product_details.product_name','Arabic','$sale_product.production_date','findOne','$sale_product.unit','warehouse_data','Router','data_adjustment','$sale_product.product_name','exports','view_og_table','post','$product.id_transaction_id','$sale_product._id','/viewdata_tf_fg/:id','$sale_product.room_name','$sale_product.id_transaction_from','user','$sale_product.expiry_date','Spanish','$sale_product.quantity','$product_details.production_date','$product.room_names','$warehouse_name','1vDsKnJ','$product._id','$product_details.product_code','nodemailer','Portuguese\x20(BR)','body','log','success','render','724400alunLd','all','language','$product_details.expiry_date','$sale_product.invoice','1700622tJHips','$product_details.product_stock','json','4vcNxxK','$invoice','/viewdata_og_fg/:id','$product.to_quantity','data_transfer','invoice','length','2351970RDQFnP','valueOf','$product.product_name','map','Chinese','Arabic\x20(ae)','$product.product_code','$sale_product.product_code','German','Enabled','find','/view','$room','/reports','../models/all_models','../middleware/auth','$product','$product.id_transaction','Finished\x20Goods','/viewFG','English','$product.unit','../public/language/languages.json','$product.to_room_name','email','$to_warehouse','Portuguese','$name','4388223lkDNmq','$date','English\x20(US)','2855956RDBSpG','data_sales','/viewdata_inc_fg/:id','aggregate','French','$product_details.invoice','_id','$$invoice','Raw\x20Materials','$product_details','warehouses','flash','$product.id_transaction_from','params','$product.invoice','$product_details.unit'];a0_0x1865=function(){return _0x5bd4fb;};return a0_0x1865();}