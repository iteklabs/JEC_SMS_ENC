var a0_0x5d6a6b=a0_0x3f7e;(function(_0x30bdcb,_0x1eca70){var _0x311524=a0_0x3f7e,_0x59ba3a=_0x30bdcb();while(!![]){try{var _0x3417dd=-parseInt(_0x311524(0x1f8))/0x1*(-parseInt(_0x311524(0x1c4))/0x2)+parseInt(_0x311524(0x1e0))/0x3*(-parseInt(_0x311524(0x21f))/0x4)+parseInt(_0x311524(0x1d1))/0x5+parseInt(_0x311524(0x1f3))/0x6*(-parseInt(_0x311524(0x1f2))/0x7)+-parseInt(_0x311524(0x211))/0x8*(parseInt(_0x311524(0x213))/0x9)+-parseInt(_0x311524(0x21b))/0xa+parseInt(_0x311524(0x1f5))/0xb;if(_0x3417dd===_0x1eca70)break;else _0x59ba3a['push'](_0x59ba3a['shift']());}catch(_0xb0adaa){_0x59ba3a['push'](_0x59ba3a['shift']());}}}(a0_0x442f,0x41f40));function a0_0x3f7e(_0x1f99ae,_0x3a99e2){var _0x442f8d=a0_0x442f();return a0_0x3f7e=function(_0x3f7e3d,_0x5713be){_0x3f7e3d=_0x3f7e3d-0x1be;var _0x11c81f=_0x442f8d[_0x3f7e3d];return _0x11c81f;},a0_0x3f7e(_0x1f99ae,_0x3a99e2);}function a0_0x442f(){var _0x13523f=['$product.product_name','view_tf_table','map','$date','1802440hwKoqX','language','data_adjustment','Enabled','72564oVrUpa','$product.new_adjust_qty','$product.invoice','_id','invoice','log','/viewdata_inc_fg/:id','warehouses','/viewFG','valueOf','$product_details.product_code','data_sales','$to_warehouse','$product.product_code','English','Arabic','$product._id','$sale_product','all','nodemailer','8036fqUnsM','French','$sale_product.product_code','length','$$invoice','exports','$product.to_room_name','express','post','Router','../public/language/languages.json','$product_details.product_stock','$sale_product.room_name','1502555uwJEIU','$sale_product.invoice','$room','$product','$product_details._id','email','$invoice','transaction_finished_raw','../models/all_models','Raw\x20Materials','$product.id_transaction','aggregate','$product.unit','Spanish','success','6ozkrcF','$sale_product._id','$product_details.production_date','Portuguese','params','findOne','$sale_product.production_date','$product_details.expiry_date','$sale_product.expiry_date','$product.id_transaction_from','$warehouse_name','/view','/viewdata_tf_fg/:id','Finished\x20Goods','$product_details.product_name','$product_details','json','German','8141UndETP','2286OozIFo','$name','10595453tEOXFy','English\x20(US)','$product.id_transaction_id','1ECJlPo','$product.to_quantity','/reports','Hindi','Arabic\x20(ae)','$product_details.unit','$sale_product.quantity','user','get','render','push','find','$product.expiry_date','warehouse_data','data_transfer','$sale_product.unit','errors','../middleware/auth','$product.production_date','$product.room_names','Chinese','Portuguese\x20(BR)','$sale_product.product_name','findById','transaction_finished','2703832NKflSl','$product_details.invoice','9zmRmKm','flash','$sale_product.id_transaction_from','view_og_table'];a0_0x442f=function(){return _0x13523f;};return a0_0x442f();}const express=require(a0_0x5d6a6b(0x1cb)),app=express(),router=express[a0_0x5d6a6b(0x1cd)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x5d6a6b(0x1d9)),auth=require(a0_0x5d6a6b(0x209)),users=require(a0_0x5d6a6b(0x1ce)),nodemailer=require(a0_0x5d6a6b(0x1c3));router['get'](a0_0x5d6a6b(0x1eb),auth,async(_0x4a1ac9,_0x13b619)=>{var _0x1cb077=a0_0x5d6a6b;try{const {username:_0x289c51,email:_0x2e568a,role:_0xdd5c29}=_0x4a1ac9[_0x1cb077(0x1ff)],_0x4f2ea3=_0x4a1ac9[_0x1cb077(0x1ff)],_0x90177c=await profile[_0x1cb077(0x1e5)]({'email':_0x4f2ea3[_0x1cb077(0x1d6)]}),_0x30e6c4=await master_shop[_0x1cb077(0x203)](),_0x31fd5d=await warehouse[_0x1cb077(0x1dc)]([{'$match':{'status':_0x1cb077(0x21e),'warehouse_category':_0x1cb077(0x1ed)}},{'$group':{'_id':'$name','name':{'$first':_0x1cb077(0x1f4)}}}]);if(_0x30e6c4[0x0][_0x1cb077(0x21c)]==_0x1cb077(0x1f6))var _0x48b4be=users[_0x1cb077(0x1be)];else{if(_0x30e6c4[0x0][_0x1cb077(0x21c)]=='Hindi')var _0x48b4be=users[_0x1cb077(0x1fb)];else{if(_0x30e6c4[0x0]['language']=='German')var _0x48b4be=users[_0x1cb077(0x1f1)];else{if(_0x30e6c4[0x0][_0x1cb077(0x21c)]==_0x1cb077(0x1de))var _0x48b4be=users[_0x1cb077(0x1de)];else{if(_0x30e6c4[0x0][_0x1cb077(0x21c)]==_0x1cb077(0x1c5))var _0x48b4be=users[_0x1cb077(0x1c5)];else{if(_0x30e6c4[0x0][_0x1cb077(0x21c)]==_0x1cb077(0x20d))var _0x48b4be=users[_0x1cb077(0x1e3)];else{if(_0x30e6c4[0x0][_0x1cb077(0x21c)]==_0x1cb077(0x20c))var _0x48b4be=users[_0x1cb077(0x20c)];else{if(_0x30e6c4[0x0][_0x1cb077(0x21c)]==_0x1cb077(0x1fc))var _0x48b4be=users[_0x1cb077(0x1bf)];}}}}}}}_0x13b619[_0x1cb077(0x201)](_0x1cb077(0x210),{'success':_0x4a1ac9['flash'](_0x1cb077(0x1df)),'errors':_0x4a1ac9['flash'](_0x1cb077(0x208)),'role':_0x4f2ea3,'profile':_0x90177c,'master_shop':_0x30e6c4,'dataProcess':_0x31fd5d,'language':_0x48b4be});}catch(_0x2345a7){console[_0x1cb077(0x224)](_0x2345a7);}}),router[a0_0x5d6a6b(0x1cc)](a0_0x5d6a6b(0x1fa),auth,async(_0x1de3d5,_0xe694d4)=>{var _0x39365a=a0_0x5d6a6b;const {product_category:_0x555859,transaction_category:_0x2ebc6f,transaction_date_from:_0x1f8abe,transaction_date_to:_0x26db17,warehouse_category:_0x3b5ac0,item_code:_0x36f11f}=_0x1de3d5['body'];console[_0x39365a(0x224)](_0x3b5ac0);if(_0x555859=='rm'){if(_0x3b5ac0=='all'){var _0x3371cc=await purchases[_0x39365a(0x1dc)]([{'$match':{'date':{'$gte':_0x1f8abe,'$lte':_0x26db17}}},{'$lookup':{'from':_0x39365a(0x226),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x39365a(0x1ef)},{'$match':{'$expr':{'$eq':[_0x39365a(0x1c8),_0x39365a(0x212)]}}},{'$project':{'_id':_0x39365a(0x1d5),'product_name':_0x39365a(0x1ee),'product_code':_0x39365a(0x229),'quantity_available':_0x39365a(0x1cf),'warehouse_name':_0x39365a(0x1f4),'warehouse_room':_0x39365a(0x1d3),'invoice':_0x39365a(0x212),'production_date':'$product_details.production_date','expiry_date':_0x39365a(0x1e7),'UOM':_0x39365a(0x1fd)}}],'as':_0x39365a(0x205)}}]);_0x3371cc[_0x39365a(0x22a)]={},await Promise[_0x39365a(0x1c2)](_0x3371cc[_0x39365a(0x219)](async _0x2c9a6c=>{var _0x3cb445=_0x39365a;_0x3371cc[_0x3cb445(0x22a)][_0x2c9a6c[_0x3cb445(0x223)]]=[],await Promise[_0x3cb445(0x1c2)](_0x2c9a6c[_0x3cb445(0x205)][_0x3cb445(0x219)](async _0x5b7497=>{var _0xbb5ae8=_0x3cb445;const _0x472b7b=await sales['aggregate']([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x5b7497[_0xbb5ae8(0x222)][_0xbb5ae8(0x228)](),'sale_product.invoice':_0x5b7497['invoice']}},{'$project':{'_id':_0xbb5ae8(0x1e1),'product_name':_0xbb5ae8(0x20e),'product_code':_0xbb5ae8(0x1c6),'quantity_available':_0xbb5ae8(0x1fe),'warehouse_name':'$warehouse_name','warehouse_room':'$sale_product.room_name','product_invoice':_0xbb5ae8(0x1d2),'invoice':_0xbb5ae8(0x1d7),'id_transaction_from':_0xbb5ae8(0x215),'date':_0xbb5ae8(0x21a),'production_date':_0xbb5ae8(0x1e6),'expiry_date':'$sale_product.expiry_date','UOM':_0xbb5ae8(0x207)}}]);_0x472b7b[_0xbb5ae8(0x1c7)]>0x0&&_0x3371cc[_0xbb5ae8(0x22a)][_0x2c9a6c[_0xbb5ae8(0x223)]]['push'](..._0x472b7b);}));})),_0x3371cc[_0x39365a(0x22a)]=_0x3371cc[_0x39365a(0x22a)],_0x3371cc[_0x39365a(0x21d)]={},await Promise[_0x39365a(0x1c2)](_0x3371cc[_0x39365a(0x219)](async _0x7745ed=>{var _0x3fa24e=_0x39365a;_0x3371cc['data_adjustment'][_0x7745ed[_0x3fa24e(0x223)]]=[],await Promise[_0x3fa24e(0x1c2)](_0x7745ed[_0x3fa24e(0x205)][_0x3fa24e(0x219)](async _0x1d2850=>{var _0x54f523=_0x3fa24e;const _0x51a7b9=await adjustment['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x1d2850[_0x54f523(0x222)][_0x54f523(0x228)](),'product.invoice':_0x1d2850[_0x54f523(0x223)]}},{'$project':{'_id':'$product._id','product_name':_0x54f523(0x217),'product_code':_0x54f523(0x22c),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x54f523(0x1ea),'warehouse_room':_0x54f523(0x20b),'product_invoice':_0x54f523(0x221),'invoice':_0x54f523(0x1d7),'id_transaction_from':'$product.id_transaction_from','date':_0x54f523(0x21a),'production_date':_0x54f523(0x20a),'expiry_date':_0x54f523(0x204),'UOM':_0x54f523(0x1dd)}}]);_0x51a7b9['length']>0x0&&_0x3371cc['data_adjustment'][_0x7745ed[_0x54f523(0x223)]][_0x54f523(0x202)](..._0x51a7b9);}));})),_0x3371cc['data_transfer']={},await Promise[_0x39365a(0x1c2)](_0x3371cc[_0x39365a(0x219)](async _0x46e4a5=>{var _0x57c24b=_0x39365a;_0x3371cc[_0x57c24b(0x206)][_0x46e4a5[_0x57c24b(0x223)]]=[],await Promise[_0x57c24b(0x1c2)](_0x46e4a5['warehouse_data'][_0x57c24b(0x219)](async _0x4b9efa=>{var _0x5d5457=_0x57c24b;const _0x120aa0=await transfers['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x4b9efa[_0x5d5457(0x222)][_0x5d5457(0x228)](),'product.To_invoice':_0x4b9efa[_0x5d5457(0x223)]}},{'$project':{'_id':_0x5d5457(0x1c0),'product_name':'$product.product_name','product_code':_0x5d5457(0x22c),'quantity_available':_0x5d5457(0x1f9),'warehouse_name':_0x5d5457(0x22b),'warehouse_room':_0x5d5457(0x20b),'product_invoice':_0x5d5457(0x1ca),'invoice':_0x5d5457(0x1d7),'id_transaction_from':_0x5d5457(0x1f7),'date':'$date','production_date':_0x5d5457(0x20a),'expiry_date':_0x5d5457(0x204),'UOM':_0x5d5457(0x1dd)}}]);_0x120aa0[_0x5d5457(0x1c7)]>0x0&&_0x3371cc[_0x5d5457(0x206)][_0x46e4a5[_0x5d5457(0x223)]][_0x5d5457(0x202)](..._0x120aa0);}));})),_0xe694d4['json']({'purchases_warehouse':_0x3371cc,'data_sales':_0x3371cc[_0x39365a(0x22a)],'data_adjustment':_0x3371cc[_0x39365a(0x21d)],'data_transfer':_0x3371cc['data_transfer']});}else{var _0x3371cc=await purchases[_0x39365a(0x1dc)]([{'$match':{'warehouse_name':_0x3b5ac0,'date':{'$gte':_0x1f8abe,'$lte':_0x26db17}}},{'$lookup':{'from':'warehouses','let':{'invoice':_0x39365a(0x1d7)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x39365a(0x1c8),_0x39365a(0x212)]}}},{'$project':{'_id':_0x39365a(0x1d5),'product_name':_0x39365a(0x1ee),'product_code':_0x39365a(0x229),'quantity_available':'$product_details.product_stock','warehouse_name':_0x39365a(0x1f4),'warehouse_room':'$room','invoice':_0x39365a(0x212),'production_date':'$product_details.production_date','expiry_date':_0x39365a(0x1e7),'UOM':_0x39365a(0x1fd)}}],'as':_0x39365a(0x205)}}]);_0x3371cc[_0x39365a(0x22a)]={},await Promise['all'](_0x3371cc[_0x39365a(0x219)](async _0x36a011=>{var _0x5f4549=_0x39365a;_0x3371cc[_0x5f4549(0x22a)][_0x36a011[_0x5f4549(0x223)]]=[],await Promise[_0x5f4549(0x1c2)](_0x36a011['warehouse_data']['map'](async _0x53de67=>{var _0x17e760=_0x5f4549;const _0x30065c=await sales[_0x17e760(0x1dc)]([{'$unwind':_0x17e760(0x1c1)},{'$match':{'sale_product.id_transaction_from':_0x53de67[_0x17e760(0x222)][_0x17e760(0x228)](),'sale_product.invoice':_0x53de67[_0x17e760(0x223)]}},{'$project':{'_id':_0x17e760(0x1e1),'product_name':_0x17e760(0x20e),'product_code':_0x17e760(0x1c6),'quantity_available':_0x17e760(0x1fe),'warehouse_name':_0x17e760(0x1ea),'warehouse_room':_0x17e760(0x1d0),'product_invoice':_0x17e760(0x1d2),'invoice':_0x17e760(0x1d7),'id_transaction_from':_0x17e760(0x215),'date':_0x17e760(0x21a),'production_date':_0x17e760(0x1e6),'expiry_date':_0x17e760(0x1e8),'UOM':_0x17e760(0x207)}}]);_0x30065c['length']>0x0&&_0x3371cc[_0x17e760(0x22a)][_0x36a011['invoice']][_0x17e760(0x202)](..._0x30065c);}));})),_0x3371cc[_0x39365a(0x22a)]=_0x3371cc[_0x39365a(0x22a)],_0x3371cc[_0x39365a(0x21d)]={},await Promise[_0x39365a(0x1c2)](_0x3371cc[_0x39365a(0x219)](async _0xccd331=>{var _0x4218e9=_0x39365a;_0x3371cc[_0x4218e9(0x21d)][_0xccd331['invoice']]=[],await Promise[_0x4218e9(0x1c2)](_0xccd331[_0x4218e9(0x205)][_0x4218e9(0x219)](async _0x4156ee=>{var _0x14934c=_0x4218e9;const _0x4ecf94=await adjustment[_0x14934c(0x1dc)]([{'$unwind':_0x14934c(0x1d4)},{'$match':{'product.id_transaction_from':_0x4156ee[_0x14934c(0x222)][_0x14934c(0x228)](),'product.invoice':_0x4156ee[_0x14934c(0x223)]}},{'$project':{'_id':_0x14934c(0x1c0),'product_name':_0x14934c(0x217),'product_code':'$product.product_code','quantity_available':_0x14934c(0x220),'warehouse_name':_0x14934c(0x1ea),'warehouse_room':_0x14934c(0x20b),'product_invoice':'$product.invoice','invoice':_0x14934c(0x1d7),'id_transaction_from':'$product.id_transaction_from','date':'$date','production_date':_0x14934c(0x20a),'expiry_date':_0x14934c(0x204),'UOM':_0x14934c(0x1dd)}}]);_0x4ecf94[_0x14934c(0x1c7)]>0x0&&_0x3371cc['data_adjustment'][_0xccd331['invoice']][_0x14934c(0x202)](..._0x4ecf94);}));})),_0x3371cc[_0x39365a(0x206)]={},await Promise[_0x39365a(0x1c2)](_0x3371cc[_0x39365a(0x219)](async _0x6be9a7=>{var _0x40942a=_0x39365a;_0x3371cc['data_transfer'][_0x6be9a7[_0x40942a(0x223)]]=[],await Promise[_0x40942a(0x1c2)](_0x6be9a7[_0x40942a(0x205)]['map'](async _0x524cfb=>{var _0x17888e=_0x40942a;const _0x5ab762=await transfers['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x524cfb[_0x17888e(0x222)][_0x17888e(0x228)](),'product.To_invoice':_0x524cfb[_0x17888e(0x223)]}},{'$project':{'_id':'$product._id','product_name':_0x17888e(0x217),'product_code':'$product.product_code','quantity_available':_0x17888e(0x1f9),'warehouse_name':_0x17888e(0x22b),'warehouse_room':_0x17888e(0x20b),'product_invoice':_0x17888e(0x1ca),'invoice':'$invoice','id_transaction_from':_0x17888e(0x1f7),'date':'$date','production_date':'$product.production_date','expiry_date':'$product.expiry_date','UOM':_0x17888e(0x1dd)}}]);_0x5ab762['length']>0x0&&_0x3371cc[_0x17888e(0x206)][_0x6be9a7[_0x17888e(0x223)]][_0x17888e(0x202)](..._0x5ab762);}));})),_0xe694d4[_0x39365a(0x1f0)]({'purchases_warehouse':_0x3371cc,'data_sales':_0x3371cc[_0x39365a(0x22a)],'data_adjustment':_0x3371cc[_0x39365a(0x21d)],'data_transfer':_0x3371cc[_0x39365a(0x206)]});}}else{if(_0x3b5ac0=='all'){var _0x3371cc=await purchases_finished[_0x39365a(0x1dc)]([{'$match':{'date':{'$gte':_0x1f8abe,'$lte':_0x26db17}}},{'$lookup':{'from':_0x39365a(0x226),'let':{'invoice':_0x39365a(0x1d7)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x39365a(0x1c8),_0x39365a(0x212)]}}},{'$project':{'_id':_0x39365a(0x1d5),'product_name':_0x39365a(0x1ee),'product_code':'$product_details.product_code','quantity_available':_0x39365a(0x1cf),'warehouse_name':_0x39365a(0x1f4),'warehouse_room':_0x39365a(0x1d3),'invoice':'$product_details.invoice','production_date':'$product_details.production_date','expiry_date':_0x39365a(0x1e7),'UOM':_0x39365a(0x1fd)}}],'as':_0x39365a(0x205)}}]);_0x3371cc[_0x39365a(0x22a)]={},await Promise[_0x39365a(0x1c2)](_0x3371cc[_0x39365a(0x219)](async _0xdcfcc=>{var _0x293c51=_0x39365a;_0x3371cc['data_sales'][_0xdcfcc['invoice']]=[],await Promise[_0x293c51(0x1c2)](_0xdcfcc[_0x293c51(0x205)][_0x293c51(0x219)](async _0x4b75a5=>{var _0xf49460=_0x293c51;const _0x4b3644=await sales_finished['aggregate']([{'$unwind':_0xf49460(0x1c1)},{'$match':{'sale_product.id_transaction_from':_0x4b75a5[_0xf49460(0x222)]['valueOf'](),'sale_product.invoice':_0x4b75a5[_0xf49460(0x223)]}},{'$project':{'_id':_0xf49460(0x1e1),'product_name':_0xf49460(0x20e),'product_code':'$sale_product.product_code','quantity_available':_0xf49460(0x1fe),'warehouse_name':_0xf49460(0x1ea),'warehouse_room':_0xf49460(0x1d0),'product_invoice':_0xf49460(0x1d2),'invoice':'$invoice','id_transaction_from':_0xf49460(0x215),'date':_0xf49460(0x21a),'production_date':'$sale_product.production_date','expiry_date':'$sale_product.expiry_date','UOM':'$sale_product.unit'}}]);_0x4b3644[_0xf49460(0x1c7)]>0x0&&_0x3371cc['data_sales'][_0xdcfcc[_0xf49460(0x223)]][_0xf49460(0x202)](..._0x4b3644);}));})),_0x3371cc[_0x39365a(0x22a)]=_0x3371cc[_0x39365a(0x22a)],_0x3371cc[_0x39365a(0x21d)]={},await Promise[_0x39365a(0x1c2)](_0x3371cc[_0x39365a(0x219)](async _0x485dbc=>{var _0x1831f5=_0x39365a;_0x3371cc[_0x1831f5(0x21d)][_0x485dbc[_0x1831f5(0x223)]]=[],await Promise['all'](_0x485dbc[_0x1831f5(0x205)][_0x1831f5(0x219)](async _0x1dfb7e=>{var _0x324e2c=_0x1831f5;const _0x9943a6=await adjustment_finished[_0x324e2c(0x1dc)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x1dfb7e['_id'][_0x324e2c(0x228)](),'product.invoice':_0x1dfb7e[_0x324e2c(0x223)]}},{'$project':{'_id':_0x324e2c(0x1c0),'product_name':_0x324e2c(0x217),'product_code':_0x324e2c(0x22c),'quantity_available':_0x324e2c(0x220),'warehouse_name':_0x324e2c(0x1ea),'warehouse_room':_0x324e2c(0x20b),'product_invoice':_0x324e2c(0x221),'invoice':'$invoice','id_transaction_from':_0x324e2c(0x1e9),'date':_0x324e2c(0x21a),'production_date':_0x324e2c(0x20a),'expiry_date':_0x324e2c(0x204),'UOM':_0x324e2c(0x1dd)}}]);_0x9943a6[_0x324e2c(0x1c7)]>0x0&&_0x3371cc[_0x324e2c(0x21d)][_0x485dbc[_0x324e2c(0x223)]]['push'](..._0x9943a6);}));})),_0x3371cc[_0x39365a(0x206)]={},await Promise['all'](_0x3371cc[_0x39365a(0x219)](async _0x415671=>{var _0x191646=_0x39365a;_0x3371cc[_0x191646(0x206)][_0x415671['invoice']]=[],await Promise[_0x191646(0x1c2)](_0x415671['warehouse_data'][_0x191646(0x219)](async _0xdb4f28=>{var _0x19cd02=_0x191646;const _0x5b9b73=await transfers_finished[_0x19cd02(0x1dc)]([{'$unwind':_0x19cd02(0x1d4)},{'$match':{'product.id_transaction':_0xdb4f28[_0x19cd02(0x222)][_0x19cd02(0x228)](),'product.from_invoice':_0xdb4f28[_0x19cd02(0x223)]}},{'$project':{'_id':_0x19cd02(0x1c0),'product_name':_0x19cd02(0x217),'product_code':_0x19cd02(0x22c),'quantity_available':_0x19cd02(0x1f9),'warehouse_name':_0x19cd02(0x22b),'warehouse_room':_0x19cd02(0x20b),'product_invoice':'$product.to_room_name','invoice':_0x19cd02(0x1d7),'id_transaction_from':'$product.id_transaction','date':_0x19cd02(0x21a),'production_date':'$product.production_date','expiry_date':_0x19cd02(0x204),'UOM':_0x19cd02(0x1dd)}}]);_0x5b9b73[_0x19cd02(0x1c7)]>0x0&&_0x3371cc[_0x19cd02(0x206)][_0x415671[_0x19cd02(0x223)]][_0x19cd02(0x202)](..._0x5b9b73);}));})),_0xe694d4[_0x39365a(0x1f0)]({'purchases_warehouse':_0x3371cc,'data_sales':_0x3371cc['data_sales'],'data_adjustment':_0x3371cc['data_adjustment'],'data_transfer':_0x3371cc[_0x39365a(0x206)]});}else{var _0x3371cc=await purchases_finished[_0x39365a(0x1dc)]([{'$match':{'warehouse_name':_0x3b5ac0,'date':{'$gte':_0x1f8abe,'$lte':_0x26db17}}},{'$lookup':{'from':'warehouses','let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x39365a(0x1ef)},{'$match':{'$expr':{'$eq':[_0x39365a(0x1c8),_0x39365a(0x212)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x39365a(0x1ee),'product_code':_0x39365a(0x229),'quantity_available':'$product_details.product_stock','warehouse_name':_0x39365a(0x1f4),'warehouse_room':_0x39365a(0x1d3),'invoice':_0x39365a(0x212),'production_date':_0x39365a(0x1e2),'expiry_date':_0x39365a(0x1e7),'UOM':_0x39365a(0x1fd)}}],'as':_0x39365a(0x205)}}]);_0x3371cc[_0x39365a(0x22a)]={},await Promise[_0x39365a(0x1c2)](_0x3371cc['map'](async _0x2bfd5a=>{var _0x1599d9=_0x39365a;_0x3371cc[_0x1599d9(0x22a)][_0x2bfd5a[_0x1599d9(0x223)]]=[],await Promise[_0x1599d9(0x1c2)](_0x2bfd5a[_0x1599d9(0x205)]['map'](async _0x38a0b6=>{var _0x433b54=_0x1599d9;const _0x2daa3b=await sales_finished[_0x433b54(0x1dc)]([{'$unwind':_0x433b54(0x1c1)},{'$match':{'sale_product.id_transaction_from':_0x38a0b6['_id'][_0x433b54(0x228)](),'sale_product.invoice':_0x38a0b6[_0x433b54(0x223)]}},{'$project':{'_id':_0x433b54(0x1e1),'product_name':_0x433b54(0x20e),'product_code':_0x433b54(0x1c6),'quantity_available':_0x433b54(0x1fe),'warehouse_name':'$warehouse_name','warehouse_room':_0x433b54(0x1d0),'product_invoice':_0x433b54(0x1d2),'invoice':'$invoice','id_transaction_from':'$sale_product.id_transaction_from','date':'$date','production_date':_0x433b54(0x1e6),'expiry_date':_0x433b54(0x1e8),'UOM':_0x433b54(0x207)}}]);_0x2daa3b['length']>0x0&&_0x3371cc[_0x433b54(0x22a)][_0x2bfd5a[_0x433b54(0x223)]][_0x433b54(0x202)](..._0x2daa3b);}));})),_0x3371cc[_0x39365a(0x22a)]=_0x3371cc[_0x39365a(0x22a)],_0x3371cc['data_adjustment']={},await Promise['all'](_0x3371cc[_0x39365a(0x219)](async _0x15e95e=>{var _0x373f5c=_0x39365a;_0x3371cc['data_adjustment'][_0x15e95e[_0x373f5c(0x223)]]=[],await Promise['all'](_0x15e95e[_0x373f5c(0x205)]['map'](async _0x182800=>{var _0x5ce5e5=_0x373f5c;const _0x11746c=await adjustment_finished['aggregate']([{'$unwind':_0x5ce5e5(0x1d4)},{'$match':{'product.id_transaction_from':_0x182800[_0x5ce5e5(0x222)][_0x5ce5e5(0x228)](),'product.invoice':_0x182800[_0x5ce5e5(0x223)]}},{'$project':{'_id':_0x5ce5e5(0x1c0),'product_name':_0x5ce5e5(0x217),'product_code':_0x5ce5e5(0x22c),'quantity_available':_0x5ce5e5(0x220),'warehouse_name':_0x5ce5e5(0x1ea),'warehouse_room':_0x5ce5e5(0x20b),'product_invoice':'$product.invoice','invoice':_0x5ce5e5(0x1d7),'id_transaction_from':'$product.id_transaction_from','date':_0x5ce5e5(0x21a),'production_date':_0x5ce5e5(0x20a),'expiry_date':_0x5ce5e5(0x204),'UOM':_0x5ce5e5(0x1dd)}}]);_0x11746c[_0x5ce5e5(0x1c7)]>0x0&&_0x3371cc[_0x5ce5e5(0x21d)][_0x15e95e[_0x5ce5e5(0x223)]][_0x5ce5e5(0x202)](..._0x11746c);}));})),_0x3371cc[_0x39365a(0x206)]={},await Promise[_0x39365a(0x1c2)](_0x3371cc[_0x39365a(0x219)](async _0x30d090=>{var _0x5453e8=_0x39365a;_0x3371cc['data_transfer'][_0x30d090[_0x5453e8(0x223)]]=[],await Promise['all'](_0x30d090[_0x5453e8(0x205)][_0x5453e8(0x219)](async _0x38fa10=>{var _0x2eb552=_0x5453e8;const _0x4524b9=await transfers_finished[_0x2eb552(0x1dc)]([{'$unwind':'$product'},{'$match':{'product.id_transaction':_0x38fa10[_0x2eb552(0x222)][_0x2eb552(0x228)](),'product.from_invoice':_0x38fa10['invoice']}},{'$project':{'_id':_0x2eb552(0x1c0),'product_name':_0x2eb552(0x217),'product_code':'$product.product_code','quantity_available':_0x2eb552(0x1f9),'warehouse_name':_0x2eb552(0x22b),'warehouse_room':_0x2eb552(0x20b),'product_invoice':'$product.to_room_name','invoice':_0x2eb552(0x1d7),'id_transaction_from':_0x2eb552(0x1db),'date':_0x2eb552(0x21a),'production_date':_0x2eb552(0x20a),'expiry_date':'$product.expiry_date','UOM':_0x2eb552(0x1dd)}}]);_0x4524b9[_0x2eb552(0x1c7)]>0x0&&_0x3371cc[_0x2eb552(0x206)][_0x30d090['invoice']][_0x2eb552(0x202)](..._0x4524b9);}));})),_0xe694d4[_0x39365a(0x1f0)]({'purchases_warehouse':_0x3371cc,'data_sales':_0x3371cc[_0x39365a(0x22a)],'data_adjustment':_0x3371cc[_0x39365a(0x21d)],'data_transfer':_0x3371cc[_0x39365a(0x206)]});}}}),router['get'](a0_0x5d6a6b(0x225),auth,async(_0x27293a,_0x13da8e)=>{var _0x1ff59a=a0_0x5d6a6b;try{const _0x1c3795=_0x27293a[_0x1ff59a(0x1e4)]['id'];var _0xea8fc7=await purchases_finished[_0x1ff59a(0x20f)](_0x1c3795);const _0x32e15e=await master_shop['find'](),_0x80c24f=_0x27293a[_0x1ff59a(0x1ff)],_0x4dbaa1=await profile['findOne']({'email':_0x80c24f[_0x1ff59a(0x1d6)]});if(_0x32e15e[0x0]['language']=='English\x20(US)')var _0x11a055=users[_0x1ff59a(0x1be)];else{if(_0x32e15e[0x0][_0x1ff59a(0x21c)]==_0x1ff59a(0x1fb))var _0x11a055=users[_0x1ff59a(0x1fb)];else{if(_0x32e15e[0x0][_0x1ff59a(0x21c)]==_0x1ff59a(0x1f1))var _0x11a055=users['German'];else{if(_0x32e15e[0x0][_0x1ff59a(0x21c)]==_0x1ff59a(0x1de))var _0x11a055=users[_0x1ff59a(0x1de)];else{if(_0x32e15e[0x0][_0x1ff59a(0x21c)]==_0x1ff59a(0x1c5))var _0x11a055=users[_0x1ff59a(0x1c5)];else{if(_0x32e15e[0x0][_0x1ff59a(0x21c)]=='Portuguese\x20(BR)')var _0x11a055=users['Portuguese'];else{if(_0x32e15e[0x0][_0x1ff59a(0x21c)]=='Chinese')var _0x11a055=users[_0x1ff59a(0x20c)];else{if(_0x32e15e[0x0][_0x1ff59a(0x21c)]=='Arabic\x20(ae)')var _0x11a055=users[_0x1ff59a(0x1bf)];}}}}}}}_0x13da8e[_0x1ff59a(0x201)]('view_table',{'success':_0x27293a[_0x1ff59a(0x214)](_0x1ff59a(0x1df)),'errors':_0x27293a[_0x1ff59a(0x214)]('errors'),'master_shop':_0x32e15e,'profile':_0x4dbaa1,'role':_0x80c24f,'language':_0x11a055,'data':_0xea8fc7});}catch(_0x3a79c7){_0x13da8e[_0x1ff59a(0x1f0)](_0x3a79c7);}}),router['get']('/viewdata_og_fg/:id',auth,async(_0x474fd2,_0x1485c9)=>{var _0x36f3aa=a0_0x5d6a6b;try{const _0x290de2=_0x474fd2[_0x36f3aa(0x1e4)]['id'];var _0x129ffd=await sales_finished[_0x36f3aa(0x20f)](_0x290de2);const _0x2ddf6d=await master_shop[_0x36f3aa(0x203)](),_0xb79220=_0x474fd2[_0x36f3aa(0x1ff)],_0x1b373d=await profile['findOne']({'email':_0xb79220[_0x36f3aa(0x1d6)]});if(_0x2ddf6d[0x0]['language']=='English\x20(US)')var _0xd12c62=users[_0x36f3aa(0x1be)];else{if(_0x2ddf6d[0x0][_0x36f3aa(0x21c)]=='Hindi')var _0xd12c62=users['Hindi'];else{if(_0x2ddf6d[0x0]['language']==_0x36f3aa(0x1f1))var _0xd12c62=users[_0x36f3aa(0x1f1)];else{if(_0x2ddf6d[0x0][_0x36f3aa(0x21c)]==_0x36f3aa(0x1de))var _0xd12c62=users[_0x36f3aa(0x1de)];else{if(_0x2ddf6d[0x0]['language']==_0x36f3aa(0x1c5))var _0xd12c62=users[_0x36f3aa(0x1c5)];else{if(_0x2ddf6d[0x0][_0x36f3aa(0x21c)]=='Portuguese\x20(BR)')var _0xd12c62=users['Portuguese'];else{if(_0x2ddf6d[0x0][_0x36f3aa(0x21c)]==_0x36f3aa(0x20c))var _0xd12c62=users['Chinese'];else{if(_0x2ddf6d[0x0][_0x36f3aa(0x21c)]==_0x36f3aa(0x1fc))var _0xd12c62=users['Arabic'];}}}}}}}_0x1485c9[_0x36f3aa(0x201)](_0x36f3aa(0x216),{'success':_0x474fd2[_0x36f3aa(0x214)]('success'),'errors':_0x474fd2['flash'](_0x36f3aa(0x208)),'master_shop':_0x2ddf6d,'profile':_0x1b373d,'role':_0xb79220,'language':_0xd12c62,'data':_0x129ffd});}catch(_0x247d12){_0x1485c9['json'](_0x247d12);}}),router[a0_0x5d6a6b(0x200)](a0_0x5d6a6b(0x1ec),auth,async(_0x46b310,_0x3a9cf3)=>{var _0x25c41a=a0_0x5d6a6b;try{const _0x4e381b=_0x46b310['params']['id'];var _0x5e357d=await transfers_finished[_0x25c41a(0x20f)](_0x4e381b);const _0x16cbb4=await master_shop['find'](),_0x955b3e=_0x46b310['user'],_0x4ebc6b=await profile[_0x25c41a(0x1e5)]({'email':_0x955b3e[_0x25c41a(0x1d6)]});if(_0x16cbb4[0x0][_0x25c41a(0x21c)]==_0x25c41a(0x1f6))var _0x11eff9=users[_0x25c41a(0x1be)];else{if(_0x16cbb4[0x0][_0x25c41a(0x21c)]==_0x25c41a(0x1fb))var _0x11eff9=users[_0x25c41a(0x1fb)];else{if(_0x16cbb4[0x0]['language']=='German')var _0x11eff9=users[_0x25c41a(0x1f1)];else{if(_0x16cbb4[0x0][_0x25c41a(0x21c)]==_0x25c41a(0x1de))var _0x11eff9=users['Spanish'];else{if(_0x16cbb4[0x0][_0x25c41a(0x21c)]=='French')var _0x11eff9=users[_0x25c41a(0x1c5)];else{if(_0x16cbb4[0x0][_0x25c41a(0x21c)]==_0x25c41a(0x20d))var _0x11eff9=users[_0x25c41a(0x1e3)];else{if(_0x16cbb4[0x0][_0x25c41a(0x21c)]==_0x25c41a(0x20c))var _0x11eff9=users[_0x25c41a(0x20c)];else{if(_0x16cbb4[0x0]['language']==_0x25c41a(0x1fc))var _0x11eff9=users[_0x25c41a(0x1bf)];}}}}}}}_0x3a9cf3['render'](_0x25c41a(0x218),{'success':_0x46b310[_0x25c41a(0x214)](_0x25c41a(0x1df)),'errors':_0x46b310['flash'](_0x25c41a(0x208)),'master_shop':_0x16cbb4,'profile':_0x4ebc6b,'role':_0x955b3e,'language':_0x11eff9,'data':_0x5e357d});}catch(_0xca6995){_0x3a9cf3['json'](_0xca6995);}}),router[a0_0x5d6a6b(0x200)](a0_0x5d6a6b(0x227),auth,async(_0x3d4939,_0x4cf765)=>{var _0x2fb80=a0_0x5d6a6b;try{const {username:_0x4fe330,email:_0x7767ac,role:_0x214d29}=_0x3d4939[_0x2fb80(0x1ff)],_0x4d513e=_0x3d4939[_0x2fb80(0x1ff)],_0x3bc55e=await profile[_0x2fb80(0x1e5)]({'email':_0x4d513e[_0x2fb80(0x1d6)]}),_0x275721=await master_shop[_0x2fb80(0x203)](),_0x1bb0bc=await warehouse[_0x2fb80(0x1dc)]([{'$match':{'status':'Enabled','warehouse_category':_0x2fb80(0x1da)}},{'$group':{'_id':_0x2fb80(0x1f4),'name':{'$first':_0x2fb80(0x1f4)}}}]);if(_0x275721[0x0][_0x2fb80(0x21c)]==_0x2fb80(0x1f6))var _0x22fe0d=users[_0x2fb80(0x1be)];else{if(_0x275721[0x0][_0x2fb80(0x21c)]=='Hindi')var _0x22fe0d=users[_0x2fb80(0x1fb)];else{if(_0x275721[0x0][_0x2fb80(0x21c)]==_0x2fb80(0x1f1))var _0x22fe0d=users[_0x2fb80(0x1f1)];else{if(_0x275721[0x0][_0x2fb80(0x21c)]=='Spanish')var _0x22fe0d=users[_0x2fb80(0x1de)];else{if(_0x275721[0x0]['language']=='French')var _0x22fe0d=users[_0x2fb80(0x1c5)];else{if(_0x275721[0x0][_0x2fb80(0x21c)]==_0x2fb80(0x20d))var _0x22fe0d=users[_0x2fb80(0x1e3)];else{if(_0x275721[0x0][_0x2fb80(0x21c)]==_0x2fb80(0x20c))var _0x22fe0d=users[_0x2fb80(0x20c)];else{if(_0x275721[0x0][_0x2fb80(0x21c)]=='Arabic\x20(ae)')var _0x22fe0d=users[_0x2fb80(0x1bf)];}}}}}}}_0x4cf765[_0x2fb80(0x201)](_0x2fb80(0x1d8),{'success':_0x3d4939[_0x2fb80(0x214)]('success'),'errors':_0x3d4939['flash'](_0x2fb80(0x208)),'role':_0x4d513e,'profile':_0x3bc55e,'master_shop':_0x275721,'dataProcess':_0x1bb0bc,'language':_0x22fe0d});}catch(_0x2966b5){console[_0x2fb80(0x224)](_0x2966b5);}}),module[a0_0x5d6a6b(0x1c9)]=router;