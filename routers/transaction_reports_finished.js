function a0_0x43ae(_0x11710e,_0x3036a3){var _0x4411bd=a0_0x4411();return a0_0x43ae=function(_0x43ae18,_0x2ab931){_0x43ae18=_0x43ae18-0xa5;var _0xdea12=_0x4411bd[_0x43ae18];return _0xdea12;},a0_0x43ae(_0x11710e,_0x3036a3);}function a0_0x4411(){var _0x2d1d91=['Chinese','errors','1131630EFyejH','../public/language/languages.json','$product_details.invoice','map','render','$sale_product','length','/viewdata_og_fg/:id','$sale_product._id','$product.id_transaction','transaction_finished_raw','$sale_product.product_code','aggregate','/view','all','$sale_product.expiry_date','Spanish','168253mykqGe','findOne','$product_details.unit','$product._id','json','/viewdata_tf_fg/:id','$product_details.expiry_date','invoice','6dpTJWH','$product.to_room_name','$$invoice','$product.unit','French','data_transfer','German','$room','$name','$product.id_transaction_id','Arabic\x20(ae)','$sale_product.id_transaction_from','$product_details._id','warehouses','/reports','$product.invoice','$product_details.product_name','data_adjustment','English','Finished\x20Goods','body','65lDCqWv','84iBHuaT','$sale_product.quantity','$sale_product.product_name','2958065ojBlhD','data_sales','$product.expiry_date','25335pFSCsj','push','Portuguese\x20(BR)','$product.production_date','view_og_table','English\x20(US)','$warehouse_name','$product.product_code','$product_details.product_stock','$date','$product.id_transaction_from','express','Arabic','$product_details','Hindi','find','user','email','$product.new_adjust_qty','14iZVLYl','warehouse_data','view_tf_table','$product.product_name','get','$product','Enabled','9000551EIZfaF','/viewFG','flash','$product_details.product_code','1208ZVpmbF','$sale_product.room_name','$to_warehouse','$sale_product.invoice','valueOf','$sale_product.production_date','$sale_product.unit','$product.to_quantity','$product.room_names','success','604047fOknJW','Portuguese','exports','log','_id','Router','language','params','186236WnCykN','$invoice','$product_details.production_date','transaction_finished','view_table'];a0_0x4411=function(){return _0x2d1d91;};return a0_0x4411();}var a0_0x44ba96=a0_0x43ae;(function(_0x3f0313,_0x5c754f){var _0x4dbedc=a0_0x43ae,_0x9e3cf=_0x3f0313();while(!![]){try{var _0x3fae8e=parseInt(_0x4dbedc(0xf5))/0x1*(-parseInt(_0x4dbedc(0xc0))/0x2)+-parseInt(_0x4dbedc(0xd5))/0x3+parseInt(_0x4dbedc(0xdd))/0x4*(-parseInt(_0x4dbedc(0xa6))/0x5)+parseInt(_0x4dbedc(0xfd))/0x6*(parseInt(_0x4dbedc(0xc7))/0x7)+-parseInt(_0x4dbedc(0xcb))/0x8*(parseInt(_0x4dbedc(0xad))/0x9)+-parseInt(_0x4dbedc(0xe4))/0xa+-parseInt(_0x4dbedc(0xaa))/0xb*(-parseInt(_0x4dbedc(0xa7))/0xc);if(_0x3fae8e===_0x5c754f)break;else _0x9e3cf['push'](_0x9e3cf['shift']());}catch(_0x21d567){_0x9e3cf['push'](_0x9e3cf['shift']());}}}(a0_0x4411,0x9d9cf));const express=require(a0_0x44ba96(0xb8)),app=express(),router=express[a0_0x44ba96(0xda)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x44ba96(0xe5)),nodemailer=require('nodemailer');router['get'](a0_0x44ba96(0xf1),auth,async(_0x2eabd5,_0x36914e)=>{var _0x153955=a0_0x44ba96;try{const {username:_0x2f9b8f,email:_0x399ce2,role:_0x355e1f}=_0x2eabd5[_0x153955(0xbd)],_0x22d9a9=_0x2eabd5[_0x153955(0xbd)],_0x51fc98=await profile['findOne']({'email':_0x22d9a9[_0x153955(0xbe)]}),_0x5d3c20=await master_shop[_0x153955(0xbc)](),_0x463973=await warehouse[_0x153955(0xf0)]([{'$match':{'status':_0x153955(0xc6),'warehouse_category':_0x153955(0x110)}},{'$group':{'_id':_0x153955(0x105),'name':{'$first':_0x153955(0x105)}}}]);if(_0x5d3c20[0x0][_0x153955(0xdb)]==_0x153955(0xb2))var _0xff2362=users[_0x153955(0x10f)];else{if(_0x5d3c20[0x0][_0x153955(0xdb)]==_0x153955(0xbb))var _0xff2362=users[_0x153955(0xbb)];else{if(_0x5d3c20[0x0]['language']=='German')var _0xff2362=users['German'];else{if(_0x5d3c20[0x0]['language']==_0x153955(0xf4))var _0xff2362=users[_0x153955(0xf4)];else{if(_0x5d3c20[0x0][_0x153955(0xdb)]=='French')var _0xff2362=users[_0x153955(0x101)];else{if(_0x5d3c20[0x0][_0x153955(0xdb)]=='Portuguese\x20(BR)')var _0xff2362=users['Portuguese'];else{if(_0x5d3c20[0x0][_0x153955(0xdb)]==_0x153955(0xe2))var _0xff2362=users[_0x153955(0xe2)];else{if(_0x5d3c20[0x0][_0x153955(0xdb)]=='Arabic\x20(ae)')var _0xff2362=users['Arabic'];}}}}}}}_0x36914e[_0x153955(0xe8)](_0x153955(0xe0),{'success':_0x2eabd5[_0x153955(0xc9)](_0x153955(0xd4)),'errors':_0x2eabd5[_0x153955(0xc9)]('errors'),'role':_0x22d9a9,'profile':_0x51fc98,'master_shop':_0x5d3c20,'dataProcess':_0x463973,'language':_0xff2362});}catch(_0x25941f){console[_0x153955(0xd8)](_0x25941f);}}),router['post'](a0_0x44ba96(0x10b),auth,async(_0x5011a9,_0x1cb693)=>{var _0x1f11c3=a0_0x44ba96;const {product_category:_0x44409a,transaction_category:_0x3dbd3a,transaction_date_from:_0x22dc11,transaction_date_to:_0x5570e0,warehouse_category:_0x5e5a66,item_code:_0x2d04c5}=_0x5011a9[_0x1f11c3(0xa5)];console[_0x1f11c3(0xd8)](_0x5e5a66);if(_0x44409a=='rm'){if(_0x5e5a66=='all'){var _0xcba484=await purchases[_0x1f11c3(0xf0)]([{'$match':{'date':{'$gte':_0x22dc11,'$lte':_0x5570e0}}},{'$lookup':{'from':_0x1f11c3(0x10a),'let':{'invoice':_0x1f11c3(0xde)},'pipeline':[{'$unwind':_0x1f11c3(0xba)},{'$match':{'$expr':{'$eq':[_0x1f11c3(0xff),_0x1f11c3(0xe6)]}}},{'$project':{'_id':_0x1f11c3(0x109),'product_name':_0x1f11c3(0x10d),'product_code':'$product_details.product_code','quantity_available':'$product_details.product_stock','warehouse_name':_0x1f11c3(0x105),'warehouse_room':_0x1f11c3(0x104),'invoice':_0x1f11c3(0xe6),'production_date':_0x1f11c3(0xdf),'expiry_date':'$product_details.expiry_date','UOM':_0x1f11c3(0xf7)}}],'as':_0x1f11c3(0xc1)}}]);_0xcba484['data_sales']={},await Promise[_0x1f11c3(0xf2)](_0xcba484[_0x1f11c3(0xe7)](async _0x4f28cc=>{var _0x316879=_0x1f11c3;_0xcba484[_0x316879(0xab)][_0x4f28cc[_0x316879(0xfc)]]=[],await Promise['all'](_0x4f28cc['warehouse_data']['map'](async _0xa6c046=>{var _0x4e79cc=_0x316879;const _0x4e4c32=await sales[_0x4e79cc(0xf0)]([{'$unwind':_0x4e79cc(0xe9)},{'$match':{'sale_product.id_transaction_from':_0xa6c046[_0x4e79cc(0xd9)]['valueOf'](),'sale_product.invoice':_0xa6c046[_0x4e79cc(0xfc)]}},{'$project':{'_id':_0x4e79cc(0xec),'product_name':_0x4e79cc(0xa9),'product_code':_0x4e79cc(0xef),'quantity_available':_0x4e79cc(0xa8),'warehouse_name':'$warehouse_name','warehouse_room':'$sale_product.room_name','product_invoice':_0x4e79cc(0xce),'invoice':_0x4e79cc(0xde),'id_transaction_from':_0x4e79cc(0x108),'date':_0x4e79cc(0xb6),'production_date':_0x4e79cc(0xd0),'expiry_date':_0x4e79cc(0xf3),'UOM':_0x4e79cc(0xd1)}}]);_0x4e4c32[_0x4e79cc(0xea)]>0x0&&_0xcba484[_0x4e79cc(0xab)][_0x4f28cc[_0x4e79cc(0xfc)]][_0x4e79cc(0xae)](..._0x4e4c32);}));})),_0xcba484['data_sales']=_0xcba484['data_sales'],_0xcba484[_0x1f11c3(0x10e)]={},await Promise[_0x1f11c3(0xf2)](_0xcba484[_0x1f11c3(0xe7)](async _0x1372b0=>{var _0x5913c6=_0x1f11c3;_0xcba484[_0x5913c6(0x10e)][_0x1372b0['invoice']]=[],await Promise['all'](_0x1372b0[_0x5913c6(0xc1)]['map'](async _0x13c0e0=>{var _0x1e0cf3=_0x5913c6;const _0xbd6282=await adjustment[_0x1e0cf3(0xf0)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x13c0e0['_id'][_0x1e0cf3(0xcf)](),'product.invoice':_0x13c0e0[_0x1e0cf3(0xfc)]}},{'$project':{'_id':_0x1e0cf3(0xf8),'product_name':_0x1e0cf3(0xc3),'product_code':_0x1e0cf3(0xb4),'quantity_available':_0x1e0cf3(0xbf),'warehouse_name':_0x1e0cf3(0xb3),'warehouse_room':_0x1e0cf3(0xd3),'product_invoice':_0x1e0cf3(0x10c),'invoice':'$invoice','id_transaction_from':_0x1e0cf3(0xb7),'date':_0x1e0cf3(0xb6),'production_date':_0x1e0cf3(0xb0),'expiry_date':_0x1e0cf3(0xac),'UOM':_0x1e0cf3(0x100)}}]);_0xbd6282['length']>0x0&&_0xcba484[_0x1e0cf3(0x10e)][_0x1372b0[_0x1e0cf3(0xfc)]][_0x1e0cf3(0xae)](..._0xbd6282);}));})),_0xcba484[_0x1f11c3(0x102)]={},await Promise['all'](_0xcba484[_0x1f11c3(0xe7)](async _0x854796=>{var _0x4a995c=_0x1f11c3;_0xcba484[_0x4a995c(0x102)][_0x854796[_0x4a995c(0xfc)]]=[],await Promise[_0x4a995c(0xf2)](_0x854796[_0x4a995c(0xc1)][_0x4a995c(0xe7)](async _0x1a8b5e=>{var _0x31396d=_0x4a995c;const _0x44232a=await transfers[_0x31396d(0xf0)]([{'$unwind':_0x31396d(0xc5)},{'$match':{'product.id_transaction_id':_0x1a8b5e['_id'][_0x31396d(0xcf)](),'product.To_invoice':_0x1a8b5e['invoice']}},{'$project':{'_id':_0x31396d(0xf8),'product_name':_0x31396d(0xc3),'product_code':_0x31396d(0xb4),'quantity_available':_0x31396d(0xd2),'warehouse_name':_0x31396d(0xcd),'warehouse_room':_0x31396d(0xd3),'product_invoice':_0x31396d(0xfe),'invoice':'$invoice','id_transaction_from':_0x31396d(0x106),'date':'$date','production_date':'$product.production_date','expiry_date':'$product.expiry_date','UOM':_0x31396d(0x100)}}]);_0x44232a[_0x31396d(0xea)]>0x0&&_0xcba484[_0x31396d(0x102)][_0x854796['invoice']][_0x31396d(0xae)](..._0x44232a);}));})),_0x1cb693[_0x1f11c3(0xf9)]({'purchases_warehouse':_0xcba484,'data_sales':_0xcba484[_0x1f11c3(0xab)],'data_adjustment':_0xcba484[_0x1f11c3(0x10e)],'data_transfer':_0xcba484['data_transfer']});}else{var _0xcba484=await purchases[_0x1f11c3(0xf0)]([{'$match':{'warehouse_name':_0x5e5a66,'date':{'$gte':_0x22dc11,'$lte':_0x5570e0}}},{'$lookup':{'from':_0x1f11c3(0x10a),'let':{'invoice':_0x1f11c3(0xde)},'pipeline':[{'$unwind':_0x1f11c3(0xba)},{'$match':{'$expr':{'$eq':[_0x1f11c3(0xff),'$product_details.invoice']}}},{'$project':{'_id':_0x1f11c3(0x109),'product_name':'$product_details.product_name','product_code':_0x1f11c3(0xca),'quantity_available':_0x1f11c3(0xb5),'warehouse_name':_0x1f11c3(0x105),'warehouse_room':'$room','invoice':_0x1f11c3(0xe6),'production_date':'$product_details.production_date','expiry_date':_0x1f11c3(0xfb),'UOM':_0x1f11c3(0xf7)}}],'as':_0x1f11c3(0xc1)}}]);_0xcba484[_0x1f11c3(0xab)]={},await Promise[_0x1f11c3(0xf2)](_0xcba484['map'](async _0x1808c9=>{var _0x2adaa9=_0x1f11c3;_0xcba484[_0x2adaa9(0xab)][_0x1808c9[_0x2adaa9(0xfc)]]=[],await Promise[_0x2adaa9(0xf2)](_0x1808c9[_0x2adaa9(0xc1)][_0x2adaa9(0xe7)](async _0x67e78=>{var _0x51dd2a=_0x2adaa9;const _0xfa802b=await sales[_0x51dd2a(0xf0)]([{'$unwind':_0x51dd2a(0xe9)},{'$match':{'sale_product.id_transaction_from':_0x67e78[_0x51dd2a(0xd9)][_0x51dd2a(0xcf)](),'sale_product.invoice':_0x67e78[_0x51dd2a(0xfc)]}},{'$project':{'_id':'$sale_product._id','product_name':'$sale_product.product_name','product_code':_0x51dd2a(0xef),'quantity_available':_0x51dd2a(0xa8),'warehouse_name':_0x51dd2a(0xb3),'warehouse_room':_0x51dd2a(0xcc),'product_invoice':_0x51dd2a(0xce),'invoice':_0x51dd2a(0xde),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x51dd2a(0xb6),'production_date':_0x51dd2a(0xd0),'expiry_date':_0x51dd2a(0xf3),'UOM':_0x51dd2a(0xd1)}}]);_0xfa802b[_0x51dd2a(0xea)]>0x0&&_0xcba484[_0x51dd2a(0xab)][_0x1808c9['invoice']][_0x51dd2a(0xae)](..._0xfa802b);}));})),_0xcba484['data_sales']=_0xcba484['data_sales'],_0xcba484[_0x1f11c3(0x10e)]={},await Promise[_0x1f11c3(0xf2)](_0xcba484['map'](async _0x5c6f9a=>{var _0x35cdc7=_0x1f11c3;_0xcba484[_0x35cdc7(0x10e)][_0x5c6f9a[_0x35cdc7(0xfc)]]=[],await Promise[_0x35cdc7(0xf2)](_0x5c6f9a[_0x35cdc7(0xc1)][_0x35cdc7(0xe7)](async _0x5bc1ae=>{var _0x295b2a=_0x35cdc7;const _0x16a830=await adjustment['aggregate']([{'$unwind':_0x295b2a(0xc5)},{'$match':{'product.id_transaction_from':_0x5bc1ae[_0x295b2a(0xd9)][_0x295b2a(0xcf)](),'product.invoice':_0x5bc1ae[_0x295b2a(0xfc)]}},{'$project':{'_id':_0x295b2a(0xf8),'product_name':_0x295b2a(0xc3),'product_code':_0x295b2a(0xb4),'quantity_available':_0x295b2a(0xbf),'warehouse_name':_0x295b2a(0xb3),'warehouse_room':_0x295b2a(0xd3),'product_invoice':_0x295b2a(0x10c),'invoice':_0x295b2a(0xde),'id_transaction_from':_0x295b2a(0xb7),'date':_0x295b2a(0xb6),'production_date':_0x295b2a(0xb0),'expiry_date':_0x295b2a(0xac),'UOM':_0x295b2a(0x100)}}]);_0x16a830['length']>0x0&&_0xcba484['data_adjustment'][_0x5c6f9a[_0x295b2a(0xfc)]][_0x295b2a(0xae)](..._0x16a830);}));})),_0xcba484[_0x1f11c3(0x102)]={},await Promise[_0x1f11c3(0xf2)](_0xcba484['map'](async _0x33f42b=>{var _0x269b3d=_0x1f11c3;_0xcba484[_0x269b3d(0x102)][_0x33f42b['invoice']]=[],await Promise[_0x269b3d(0xf2)](_0x33f42b[_0x269b3d(0xc1)][_0x269b3d(0xe7)](async _0x4a6b5f=>{var _0x514810=_0x269b3d;const _0x363829=await transfers[_0x514810(0xf0)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x4a6b5f['_id']['valueOf'](),'product.To_invoice':_0x4a6b5f['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x514810(0xc3),'product_code':_0x514810(0xb4),'quantity_available':_0x514810(0xd2),'warehouse_name':_0x514810(0xcd),'warehouse_room':_0x514810(0xd3),'product_invoice':_0x514810(0xfe),'invoice':_0x514810(0xde),'id_transaction_from':_0x514810(0x106),'date':_0x514810(0xb6),'production_date':_0x514810(0xb0),'expiry_date':'$product.expiry_date','UOM':_0x514810(0x100)}}]);_0x363829[_0x514810(0xea)]>0x0&&_0xcba484[_0x514810(0x102)][_0x33f42b[_0x514810(0xfc)]][_0x514810(0xae)](..._0x363829);}));})),_0x1cb693[_0x1f11c3(0xf9)]({'purchases_warehouse':_0xcba484,'data_sales':_0xcba484['data_sales'],'data_adjustment':_0xcba484[_0x1f11c3(0x10e)],'data_transfer':_0xcba484[_0x1f11c3(0x102)]});}}else{if(_0x5e5a66==_0x1f11c3(0xf2)){var _0xcba484=await purchases_finished['aggregate']([{'$match':{'date':{'$gte':_0x22dc11,'$lte':_0x5570e0}}},{'$lookup':{'from':_0x1f11c3(0x10a),'let':{'invoice':_0x1f11c3(0xde)},'pipeline':[{'$unwind':_0x1f11c3(0xba)},{'$match':{'$expr':{'$eq':[_0x1f11c3(0xff),_0x1f11c3(0xe6)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x1f11c3(0x10d),'product_code':_0x1f11c3(0xca),'quantity_available':_0x1f11c3(0xb5),'warehouse_name':_0x1f11c3(0x105),'warehouse_room':_0x1f11c3(0x104),'invoice':_0x1f11c3(0xe6),'production_date':_0x1f11c3(0xdf),'expiry_date':_0x1f11c3(0xfb),'UOM':'$product_details.unit'}}],'as':'warehouse_data'}}]);_0xcba484[_0x1f11c3(0xab)]={},await Promise[_0x1f11c3(0xf2)](_0xcba484[_0x1f11c3(0xe7)](async _0x3e9569=>{var _0x39c2be=_0x1f11c3;_0xcba484[_0x39c2be(0xab)][_0x3e9569[_0x39c2be(0xfc)]]=[],await Promise[_0x39c2be(0xf2)](_0x3e9569[_0x39c2be(0xc1)]['map'](async _0x43955b=>{var _0x3236c1=_0x39c2be;const _0x107a6a=await sales_finished[_0x3236c1(0xf0)]([{'$unwind':_0x3236c1(0xe9)},{'$match':{'sale_product.id_transaction_from':_0x43955b[_0x3236c1(0xd9)][_0x3236c1(0xcf)](),'sale_product.invoice':_0x43955b['invoice']}},{'$project':{'_id':_0x3236c1(0xec),'product_name':_0x3236c1(0xa9),'product_code':'$sale_product.product_code','quantity_available':_0x3236c1(0xa8),'warehouse_name':_0x3236c1(0xb3),'warehouse_room':_0x3236c1(0xcc),'product_invoice':_0x3236c1(0xce),'invoice':_0x3236c1(0xde),'id_transaction_from':_0x3236c1(0x108),'date':_0x3236c1(0xb6),'production_date':_0x3236c1(0xd0),'expiry_date':_0x3236c1(0xf3),'UOM':'$sale_product.unit'}}]);_0x107a6a[_0x3236c1(0xea)]>0x0&&_0xcba484[_0x3236c1(0xab)][_0x3e9569[_0x3236c1(0xfc)]][_0x3236c1(0xae)](..._0x107a6a);}));})),_0xcba484[_0x1f11c3(0xab)]=_0xcba484['data_sales'],_0xcba484[_0x1f11c3(0x10e)]={},await Promise[_0x1f11c3(0xf2)](_0xcba484[_0x1f11c3(0xe7)](async _0x2af3bc=>{var _0x469aca=_0x1f11c3;_0xcba484[_0x469aca(0x10e)][_0x2af3bc['invoice']]=[],await Promise[_0x469aca(0xf2)](_0x2af3bc['warehouse_data'][_0x469aca(0xe7)](async _0x20ab0f=>{var _0x30652b=_0x469aca;const _0x41ff3a=await adjustment_finished[_0x30652b(0xf0)]([{'$unwind':_0x30652b(0xc5)},{'$match':{'product.id_transaction_from':_0x20ab0f[_0x30652b(0xd9)][_0x30652b(0xcf)](),'product.invoice':_0x20ab0f[_0x30652b(0xfc)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0x30652b(0xb4),'quantity_available':_0x30652b(0xbf),'warehouse_name':_0x30652b(0xb3),'warehouse_room':_0x30652b(0xd3),'product_invoice':_0x30652b(0x10c),'invoice':'$invoice','id_transaction_from':_0x30652b(0xb7),'date':'$date','production_date':_0x30652b(0xb0),'expiry_date':_0x30652b(0xac),'UOM':_0x30652b(0x100)}}]);_0x41ff3a[_0x30652b(0xea)]>0x0&&_0xcba484[_0x30652b(0x10e)][_0x2af3bc[_0x30652b(0xfc)]]['push'](..._0x41ff3a);}));})),_0xcba484[_0x1f11c3(0x102)]={},await Promise['all'](_0xcba484[_0x1f11c3(0xe7)](async _0x151c86=>{var _0x1c4221=_0x1f11c3;_0xcba484['data_transfer'][_0x151c86[_0x1c4221(0xfc)]]=[],await Promise[_0x1c4221(0xf2)](_0x151c86[_0x1c4221(0xc1)][_0x1c4221(0xe7)](async _0x2e1105=>{var _0x289037=_0x1c4221;const _0x203fc0=await transfers_finished[_0x289037(0xf0)]([{'$unwind':'$product'},{'$match':{'product.id_transaction':_0x2e1105[_0x289037(0xd9)][_0x289037(0xcf)](),'product.from_invoice':_0x2e1105['invoice']}},{'$project':{'_id':_0x289037(0xf8),'product_name':_0x289037(0xc3),'product_code':'$product.product_code','quantity_available':_0x289037(0xd2),'warehouse_name':_0x289037(0xcd),'warehouse_room':'$product.room_names','product_invoice':_0x289037(0xfe),'invoice':_0x289037(0xde),'id_transaction_from':_0x289037(0xed),'date':_0x289037(0xb6),'production_date':_0x289037(0xb0),'expiry_date':_0x289037(0xac),'UOM':_0x289037(0x100)}}]);_0x203fc0[_0x289037(0xea)]>0x0&&_0xcba484['data_transfer'][_0x151c86['invoice']][_0x289037(0xae)](..._0x203fc0);}));})),_0x1cb693['json']({'purchases_warehouse':_0xcba484,'data_sales':_0xcba484[_0x1f11c3(0xab)],'data_adjustment':_0xcba484[_0x1f11c3(0x10e)],'data_transfer':_0xcba484[_0x1f11c3(0x102)]});}else{var _0xcba484=await purchases_finished[_0x1f11c3(0xf0)]([{'$match':{'warehouse_name':_0x5e5a66,'date':{'$gte':_0x22dc11,'$lte':_0x5570e0}}},{'$lookup':{'from':_0x1f11c3(0x10a),'let':{'invoice':_0x1f11c3(0xde)},'pipeline':[{'$unwind':_0x1f11c3(0xba)},{'$match':{'$expr':{'$eq':[_0x1f11c3(0xff),'$product_details.invoice']}}},{'$project':{'_id':_0x1f11c3(0x109),'product_name':'$product_details.product_name','product_code':_0x1f11c3(0xca),'quantity_available':_0x1f11c3(0xb5),'warehouse_name':_0x1f11c3(0x105),'warehouse_room':'$room','invoice':_0x1f11c3(0xe6),'production_date':_0x1f11c3(0xdf),'expiry_date':'$product_details.expiry_date','UOM':_0x1f11c3(0xf7)}}],'as':'warehouse_data'}}]);_0xcba484[_0x1f11c3(0xab)]={},await Promise[_0x1f11c3(0xf2)](_0xcba484[_0x1f11c3(0xe7)](async _0x27a7a4=>{var _0x4c2eb6=_0x1f11c3;_0xcba484[_0x4c2eb6(0xab)][_0x27a7a4[_0x4c2eb6(0xfc)]]=[],await Promise[_0x4c2eb6(0xf2)](_0x27a7a4[_0x4c2eb6(0xc1)]['map'](async _0x21a463=>{var _0x45b417=_0x4c2eb6;const _0x14208f=await sales_finished[_0x45b417(0xf0)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x21a463['_id'][_0x45b417(0xcf)](),'sale_product.invoice':_0x21a463['invoice']}},{'$project':{'_id':_0x45b417(0xec),'product_name':_0x45b417(0xa9),'product_code':_0x45b417(0xef),'quantity_available':_0x45b417(0xa8),'warehouse_name':'$warehouse_name','warehouse_room':_0x45b417(0xcc),'product_invoice':_0x45b417(0xce),'invoice':'$invoice','id_transaction_from':_0x45b417(0x108),'date':_0x45b417(0xb6),'production_date':_0x45b417(0xd0),'expiry_date':_0x45b417(0xf3),'UOM':_0x45b417(0xd1)}}]);_0x14208f[_0x45b417(0xea)]>0x0&&_0xcba484[_0x45b417(0xab)][_0x27a7a4['invoice']]['push'](..._0x14208f);}));})),_0xcba484[_0x1f11c3(0xab)]=_0xcba484[_0x1f11c3(0xab)],_0xcba484[_0x1f11c3(0x10e)]={},await Promise[_0x1f11c3(0xf2)](_0xcba484[_0x1f11c3(0xe7)](async _0x28bbc4=>{var _0x14b634=_0x1f11c3;_0xcba484[_0x14b634(0x10e)][_0x28bbc4[_0x14b634(0xfc)]]=[],await Promise[_0x14b634(0xf2)](_0x28bbc4['warehouse_data'][_0x14b634(0xe7)](async _0x495af2=>{var _0x83cf01=_0x14b634;const _0x4dac6c=await adjustment_finished[_0x83cf01(0xf0)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x495af2[_0x83cf01(0xd9)][_0x83cf01(0xcf)](),'product.invoice':_0x495af2[_0x83cf01(0xfc)]}},{'$project':{'_id':_0x83cf01(0xf8),'product_name':_0x83cf01(0xc3),'product_code':_0x83cf01(0xb4),'quantity_available':_0x83cf01(0xbf),'warehouse_name':_0x83cf01(0xb3),'warehouse_room':_0x83cf01(0xd3),'product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':'$product.id_transaction_from','date':_0x83cf01(0xb6),'production_date':_0x83cf01(0xb0),'expiry_date':_0x83cf01(0xac),'UOM':'$product.unit'}}]);_0x4dac6c[_0x83cf01(0xea)]>0x0&&_0xcba484[_0x83cf01(0x10e)][_0x28bbc4[_0x83cf01(0xfc)]]['push'](..._0x4dac6c);}));})),_0xcba484[_0x1f11c3(0x102)]={},await Promise['all'](_0xcba484[_0x1f11c3(0xe7)](async _0xcb6cfc=>{var _0x54572a=_0x1f11c3;_0xcba484['data_transfer'][_0xcb6cfc[_0x54572a(0xfc)]]=[],await Promise['all'](_0xcb6cfc[_0x54572a(0xc1)]['map'](async _0x35d05b=>{var _0x27389b=_0x54572a;const _0x117e43=await transfers_finished[_0x27389b(0xf0)]([{'$unwind':_0x27389b(0xc5)},{'$match':{'product.id_transaction':_0x35d05b[_0x27389b(0xd9)][_0x27389b(0xcf)](),'product.from_invoice':_0x35d05b[_0x27389b(0xfc)]}},{'$project':{'_id':_0x27389b(0xf8),'product_name':_0x27389b(0xc3),'product_code':_0x27389b(0xb4),'quantity_available':'$product.to_quantity','warehouse_name':_0x27389b(0xcd),'warehouse_room':_0x27389b(0xd3),'product_invoice':_0x27389b(0xfe),'invoice':_0x27389b(0xde),'id_transaction_from':_0x27389b(0xed),'date':_0x27389b(0xb6),'production_date':_0x27389b(0xb0),'expiry_date':'$product.expiry_date','UOM':_0x27389b(0x100)}}]);_0x117e43[_0x27389b(0xea)]>0x0&&_0xcba484[_0x27389b(0x102)][_0xcb6cfc[_0x27389b(0xfc)]][_0x27389b(0xae)](..._0x117e43);}));})),_0x1cb693[_0x1f11c3(0xf9)]({'purchases_warehouse':_0xcba484,'data_sales':_0xcba484[_0x1f11c3(0xab)],'data_adjustment':_0xcba484[_0x1f11c3(0x10e)],'data_transfer':_0xcba484[_0x1f11c3(0x102)]});}}}),router['get']('/viewdata_inc_fg/:id',auth,async(_0x448a65,_0x20e22c)=>{var _0x49fd8d=a0_0x44ba96;try{const _0xb08e0c=_0x448a65[_0x49fd8d(0xdc)]['id'];var _0x547aa9=await purchases_finished['findById'](_0xb08e0c);const _0x1a4b8d=await master_shop['find'](),_0x700704=_0x448a65[_0x49fd8d(0xbd)],_0x2ba390=await profile[_0x49fd8d(0xf6)]({'email':_0x700704['email']});if(_0x1a4b8d[0x0][_0x49fd8d(0xdb)]==_0x49fd8d(0xb2))var _0x927f29=users[_0x49fd8d(0x10f)];else{if(_0x1a4b8d[0x0][_0x49fd8d(0xdb)]==_0x49fd8d(0xbb))var _0x927f29=users[_0x49fd8d(0xbb)];else{if(_0x1a4b8d[0x0][_0x49fd8d(0xdb)]==_0x49fd8d(0x103))var _0x927f29=users[_0x49fd8d(0x103)];else{if(_0x1a4b8d[0x0][_0x49fd8d(0xdb)]==_0x49fd8d(0xf4))var _0x927f29=users[_0x49fd8d(0xf4)];else{if(_0x1a4b8d[0x0][_0x49fd8d(0xdb)]==_0x49fd8d(0x101))var _0x927f29=users[_0x49fd8d(0x101)];else{if(_0x1a4b8d[0x0][_0x49fd8d(0xdb)]==_0x49fd8d(0xaf))var _0x927f29=users['Portuguese'];else{if(_0x1a4b8d[0x0][_0x49fd8d(0xdb)]==_0x49fd8d(0xe2))var _0x927f29=users['Chinese'];else{if(_0x1a4b8d[0x0][_0x49fd8d(0xdb)]==_0x49fd8d(0x107))var _0x927f29=users['Arabic'];}}}}}}}_0x20e22c['render'](_0x49fd8d(0xe1),{'success':_0x448a65['flash'](_0x49fd8d(0xd4)),'errors':_0x448a65[_0x49fd8d(0xc9)](_0x49fd8d(0xe3)),'master_shop':_0x1a4b8d,'profile':_0x2ba390,'role':_0x700704,'language':_0x927f29,'data':_0x547aa9});}catch(_0x5d8433){_0x20e22c['json'](_0x5d8433);}}),router[a0_0x44ba96(0xc4)](a0_0x44ba96(0xeb),auth,async(_0x231c8c,_0x5147a5)=>{var _0x47d8b1=a0_0x44ba96;try{const _0x5173c0=_0x231c8c[_0x47d8b1(0xdc)]['id'];var _0x17d40b=await sales_finished['findById'](_0x5173c0);const _0x4d7f47=await master_shop[_0x47d8b1(0xbc)](),_0x2d0a4e=_0x231c8c[_0x47d8b1(0xbd)],_0x2d260e=await profile[_0x47d8b1(0xf6)]({'email':_0x2d0a4e[_0x47d8b1(0xbe)]});if(_0x4d7f47[0x0]['language']==_0x47d8b1(0xb2))var _0x5315cf=users[_0x47d8b1(0x10f)];else{if(_0x4d7f47[0x0][_0x47d8b1(0xdb)]==_0x47d8b1(0xbb))var _0x5315cf=users[_0x47d8b1(0xbb)];else{if(_0x4d7f47[0x0]['language']=='German')var _0x5315cf=users[_0x47d8b1(0x103)];else{if(_0x4d7f47[0x0][_0x47d8b1(0xdb)]==_0x47d8b1(0xf4))var _0x5315cf=users[_0x47d8b1(0xf4)];else{if(_0x4d7f47[0x0][_0x47d8b1(0xdb)]==_0x47d8b1(0x101))var _0x5315cf=users[_0x47d8b1(0x101)];else{if(_0x4d7f47[0x0][_0x47d8b1(0xdb)]=='Portuguese\x20(BR)')var _0x5315cf=users[_0x47d8b1(0xd6)];else{if(_0x4d7f47[0x0]['language']==_0x47d8b1(0xe2))var _0x5315cf=users['Chinese'];else{if(_0x4d7f47[0x0]['language']==_0x47d8b1(0x107))var _0x5315cf=users[_0x47d8b1(0xb9)];}}}}}}}_0x5147a5['render'](_0x47d8b1(0xb1),{'success':_0x231c8c['flash'](_0x47d8b1(0xd4)),'errors':_0x231c8c[_0x47d8b1(0xc9)](_0x47d8b1(0xe3)),'master_shop':_0x4d7f47,'profile':_0x2d260e,'role':_0x2d0a4e,'language':_0x5315cf,'data':_0x17d40b});}catch(_0x26c849){_0x5147a5['json'](_0x26c849);}}),router[a0_0x44ba96(0xc4)](a0_0x44ba96(0xfa),auth,async(_0x546c30,_0x48e00c)=>{var _0x5b6368=a0_0x44ba96;try{const _0x59a5a1=_0x546c30[_0x5b6368(0xdc)]['id'];var _0x496012=await transfers_finished['findById'](_0x59a5a1);const _0x2fddc1=await master_shop[_0x5b6368(0xbc)](),_0x201b4a=_0x546c30[_0x5b6368(0xbd)],_0x3e9084=await profile[_0x5b6368(0xf6)]({'email':_0x201b4a[_0x5b6368(0xbe)]});if(_0x2fddc1[0x0]['language']=='English\x20(US)')var _0x12f26c=users[_0x5b6368(0x10f)];else{if(_0x2fddc1[0x0][_0x5b6368(0xdb)]=='Hindi')var _0x12f26c=users['Hindi'];else{if(_0x2fddc1[0x0][_0x5b6368(0xdb)]==_0x5b6368(0x103))var _0x12f26c=users[_0x5b6368(0x103)];else{if(_0x2fddc1[0x0][_0x5b6368(0xdb)]==_0x5b6368(0xf4))var _0x12f26c=users[_0x5b6368(0xf4)];else{if(_0x2fddc1[0x0]['language']==_0x5b6368(0x101))var _0x12f26c=users[_0x5b6368(0x101)];else{if(_0x2fddc1[0x0][_0x5b6368(0xdb)]==_0x5b6368(0xaf))var _0x12f26c=users[_0x5b6368(0xd6)];else{if(_0x2fddc1[0x0][_0x5b6368(0xdb)]==_0x5b6368(0xe2))var _0x12f26c=users[_0x5b6368(0xe2)];else{if(_0x2fddc1[0x0][_0x5b6368(0xdb)]==_0x5b6368(0x107))var _0x12f26c=users['Arabic'];}}}}}}}_0x48e00c[_0x5b6368(0xe8)](_0x5b6368(0xc2),{'success':_0x546c30['flash'](_0x5b6368(0xd4)),'errors':_0x546c30[_0x5b6368(0xc9)]('errors'),'master_shop':_0x2fddc1,'profile':_0x3e9084,'role':_0x201b4a,'language':_0x12f26c,'data':_0x496012});}catch(_0x342391){_0x48e00c['json'](_0x342391);}}),router[a0_0x44ba96(0xc4)](a0_0x44ba96(0xc8),auth,async(_0x1f2d0e,_0xc51e60)=>{var _0x227246=a0_0x44ba96;try{const {username:_0x50c70f,email:_0x48f683,role:_0x198ca2}=_0x1f2d0e['user'],_0x111d44=_0x1f2d0e[_0x227246(0xbd)],_0x4dcdd7=await profile[_0x227246(0xf6)]({'email':_0x111d44[_0x227246(0xbe)]}),_0x1a3650=await master_shop[_0x227246(0xbc)](),_0x5126ca=await warehouse[_0x227246(0xf0)]([{'$match':{'status':_0x227246(0xc6),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x227246(0x105),'name':{'$first':_0x227246(0x105)}}}]);if(_0x1a3650[0x0][_0x227246(0xdb)]=='English\x20(US)')var _0x472b49=users[_0x227246(0x10f)];else{if(_0x1a3650[0x0][_0x227246(0xdb)]=='Hindi')var _0x472b49=users['Hindi'];else{if(_0x1a3650[0x0][_0x227246(0xdb)]==_0x227246(0x103))var _0x472b49=users[_0x227246(0x103)];else{if(_0x1a3650[0x0]['language']==_0x227246(0xf4))var _0x472b49=users[_0x227246(0xf4)];else{if(_0x1a3650[0x0][_0x227246(0xdb)]==_0x227246(0x101))var _0x472b49=users[_0x227246(0x101)];else{if(_0x1a3650[0x0][_0x227246(0xdb)]==_0x227246(0xaf))var _0x472b49=users[_0x227246(0xd6)];else{if(_0x1a3650[0x0][_0x227246(0xdb)]==_0x227246(0xe2))var _0x472b49=users['Chinese'];else{if(_0x1a3650[0x0][_0x227246(0xdb)]=='Arabic\x20(ae)')var _0x472b49=users[_0x227246(0xb9)];}}}}}}}_0xc51e60[_0x227246(0xe8)](_0x227246(0xee),{'success':_0x1f2d0e[_0x227246(0xc9)](_0x227246(0xd4)),'errors':_0x1f2d0e['flash']('errors'),'role':_0x111d44,'profile':_0x4dcdd7,'master_shop':_0x1a3650,'dataProcess':_0x5126ca,'language':_0x472b49});}catch(_0x14f096){console[_0x227246(0xd8)](_0x14f096);}}),module[a0_0x44ba96(0xd7)]=router;