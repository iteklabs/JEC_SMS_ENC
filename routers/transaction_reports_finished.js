function a0_0x431f(_0x1aa8ec,_0x217e10){var _0x315e54=a0_0x315e();return a0_0x431f=function(_0x431f88,_0x391207){_0x431f88=_0x431f88-0x1d7;var _0x29ad3c=_0x315e54[_0x431f88];return _0x29ad3c;},a0_0x431f(_0x1aa8ec,_0x217e10);}var a0_0x175d26=a0_0x431f;function a0_0x315e(){var _0x57ff71=['warehouses','$sale_product._id','$invoice','findOne','$product._id','$product.product_code','9aguAZQ','/reports','Portuguese\x20(BR)','$product.production_date','view_og_table','map','/viewdata_og_fg/:id','$product.room_names','$$invoice','English\x20(US)','$product.product_name','4134AwfeAn','$product_details.product_stock','json','Raw\x20Materials','$date','$product_details._id','/viewdata_inc_fg/:id','English','user','$warehouse_name','success','6VtHOeO','all','$product.id_transaction_id','88ocmLQQ','render','$product_details.production_date','$product.unit','Router','$sale_product.production_date','$product_details.product_code','$sale_product.product_code','Spanish','length','find','language','../middleware/auth','Arabic\x20(ae)','$sale_product.id_transaction_from','push','Enabled','1591107wbvamw','1157855tgNrbg','invoice','830590fsaous','$name','$product.id_transaction','$sale_product','$product_details.invoice','$room','$product.id_transaction_from','Chinese','$sale_product.room_name','German','warehouse_data','log','aggregate','$sale_product.quantity','valueOf','$product_details.unit','$product.expiry_date','477320VDhZJE','data_adjustment','$product.to_room_name','/viewdata_tf_fg/:id','data_sales','$sale_product.unit','$product_details','post','58007jpASBo','transaction_finished_raw','/view','get','$sale_product.expiry_date','$product','body','$product_details.expiry_date','../models/all_models','French','$product.new_adjust_qty','$to_warehouse','findById','../public/language/languages.json','$product.to_quantity','nodemailer','$sale_product.invoice','email','data_transfer','$product.invoice','873744ltEsem','flash','$product_details.product_name','params','errors','Arabic','Hindi','$sale_product.product_name','Portuguese','_id'];a0_0x315e=function(){return _0x57ff71;};return a0_0x315e();}(function(_0x5b86ac,_0x28ad54){var _0x34a010=a0_0x431f,_0x5cac5e=_0x5b86ac();while(!![]){try{var _0x366acb=parseInt(_0x34a010(0x211))/0x1+parseInt(_0x34a010(0x209))/0x2+parseInt(_0x34a010(0x240))/0x3*(parseInt(_0x34a010(0x1e4))/0x4)+parseInt(_0x34a010(0x1f6))/0x5*(-parseInt(_0x34a010(0x1e1))/0x6)+parseInt(_0x34a010(0x1f5))/0x7+-parseInt(_0x34a010(0x225))/0x8+parseInt(_0x34a010(0x235))/0x9*(-parseInt(_0x34a010(0x1f8))/0xa);if(_0x366acb===_0x28ad54)break;else _0x5cac5e['push'](_0x5cac5e['shift']());}catch(_0x217302){_0x5cac5e['push'](_0x5cac5e['shift']());}}}(a0_0x315e,0x1fd84));const express=require('express'),app=express(),router=express[a0_0x175d26(0x1e8)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x175d26(0x219)),auth=require(a0_0x175d26(0x1f0)),users=require(a0_0x175d26(0x21e)),nodemailer=require(a0_0x175d26(0x220));router[a0_0x175d26(0x214)](a0_0x175d26(0x213),auth,async(_0xe9e1b,_0x2aa298)=>{var _0xf467f7=a0_0x175d26;try{const {username:_0x45c96f,email:_0x847065,role:_0x1a2823}=_0xe9e1b[_0xf467f7(0x1de)],_0x23101c=_0xe9e1b[_0xf467f7(0x1de)],_0x25f21e=await profile[_0xf467f7(0x232)]({'email':_0x23101c[_0xf467f7(0x222)]}),_0x3ef59e=await master_shop[_0xf467f7(0x1ee)](),_0x4f00a0=await warehouse[_0xf467f7(0x204)]([{'$match':{'status':_0xf467f7(0x1f4),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0xf467f7(0x1f9),'name':{'$first':_0xf467f7(0x1f9)}}}]);if(_0x3ef59e[0x0]['language']=='English\x20(US)')var _0x408eba=users[_0xf467f7(0x1dd)];else{if(_0x3ef59e[0x0][_0xf467f7(0x1ef)]==_0xf467f7(0x22b))var _0x408eba=users[_0xf467f7(0x22b)];else{if(_0x3ef59e[0x0][_0xf467f7(0x1ef)]=='German')var _0x408eba=users['German'];else{if(_0x3ef59e[0x0][_0xf467f7(0x1ef)]==_0xf467f7(0x1ec))var _0x408eba=users[_0xf467f7(0x1ec)];else{if(_0x3ef59e[0x0]['language']=='French')var _0x408eba=users[_0xf467f7(0x21a)];else{if(_0x3ef59e[0x0][_0xf467f7(0x1ef)]=='Portuguese\x20(BR)')var _0x408eba=users['Portuguese'];else{if(_0x3ef59e[0x0][_0xf467f7(0x1ef)]==_0xf467f7(0x1ff))var _0x408eba=users[_0xf467f7(0x1ff)];else{if(_0x3ef59e[0x0][_0xf467f7(0x1ef)]==_0xf467f7(0x1f1))var _0x408eba=users[_0xf467f7(0x22a)];}}}}}}}_0x2aa298[_0xf467f7(0x1e5)]('transaction_finished',{'success':_0xe9e1b[_0xf467f7(0x226)](_0xf467f7(0x1e0)),'errors':_0xe9e1b[_0xf467f7(0x226)](_0xf467f7(0x229)),'role':_0x23101c,'profile':_0x25f21e,'master_shop':_0x3ef59e,'dataProcess':_0x4f00a0,'language':_0x408eba});}catch(_0x4f2fe9){console['log'](_0x4f2fe9);}}),router[a0_0x175d26(0x210)](a0_0x175d26(0x236),auth,async(_0x23a371,_0x1ab861)=>{var _0x33096c=a0_0x175d26;const {product_category:_0x3861a3,transaction_category:_0x3d0632,transaction_date_from:_0x5e241e,transaction_date_to:_0x4ee2a5,warehouse_category:_0x543e6c,item_code:_0x2ade91}=_0x23a371[_0x33096c(0x217)];console[_0x33096c(0x203)](_0x543e6c);if(_0x3861a3=='rm'){if(_0x543e6c==_0x33096c(0x1e2)){var _0x54fbc6=await purchases[_0x33096c(0x204)]([{'$match':{'date':{'$gte':_0x5e241e,'$lte':_0x4ee2a5}}},{'$lookup':{'from':_0x33096c(0x22f),'let':{'invoice':_0x33096c(0x231)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x33096c(0x23d),_0x33096c(0x1fc)]}}},{'$project':{'_id':_0x33096c(0x1db),'product_name':_0x33096c(0x227),'product_code':_0x33096c(0x1ea),'quantity_available':'$product_details.product_stock','warehouse_name':_0x33096c(0x1f9),'warehouse_room':_0x33096c(0x1fd),'invoice':_0x33096c(0x1fc),'production_date':_0x33096c(0x1e6),'expiry_date':_0x33096c(0x218),'UOM':_0x33096c(0x207)}}],'as':_0x33096c(0x202)}}]);_0x54fbc6[_0x33096c(0x20d)]={},await Promise[_0x33096c(0x1e2)](_0x54fbc6[_0x33096c(0x23a)](async _0xb9407a=>{var _0x28484d=_0x33096c;_0x54fbc6[_0x28484d(0x20d)][_0xb9407a[_0x28484d(0x1f7)]]=[],await Promise['all'](_0xb9407a[_0x28484d(0x202)][_0x28484d(0x23a)](async _0x38a053=>{var _0x1e3fff=_0x28484d;const _0xcf97b8=await sales['aggregate']([{'$unwind':_0x1e3fff(0x1fb)},{'$match':{'sale_product.id_transaction_from':_0x38a053['_id'][_0x1e3fff(0x206)](),'sale_product.invoice':_0x38a053[_0x1e3fff(0x1f7)]}},{'$project':{'_id':_0x1e3fff(0x230),'product_name':_0x1e3fff(0x22c),'product_code':_0x1e3fff(0x1eb),'quantity_available':'$sale_product.quantity','warehouse_name':'$warehouse_name','warehouse_room':_0x1e3fff(0x200),'product_invoice':_0x1e3fff(0x221),'invoice':_0x1e3fff(0x231),'id_transaction_from':_0x1e3fff(0x1f2),'date':'$date','production_date':_0x1e3fff(0x1e9),'expiry_date':_0x1e3fff(0x215),'UOM':_0x1e3fff(0x20e)}}]);_0xcf97b8[_0x1e3fff(0x1ed)]>0x0&&_0x54fbc6[_0x1e3fff(0x20d)][_0xb9407a[_0x1e3fff(0x1f7)]][_0x1e3fff(0x1f3)](..._0xcf97b8);}));})),_0x54fbc6[_0x33096c(0x20d)]=_0x54fbc6[_0x33096c(0x20d)],_0x54fbc6[_0x33096c(0x20a)]={},await Promise[_0x33096c(0x1e2)](_0x54fbc6['map'](async _0x136a99=>{var _0x5a37fb=_0x33096c;_0x54fbc6['data_adjustment'][_0x136a99[_0x5a37fb(0x1f7)]]=[],await Promise[_0x5a37fb(0x1e2)](_0x136a99[_0x5a37fb(0x202)][_0x5a37fb(0x23a)](async _0x13bbbd=>{var _0x2bf66c=_0x5a37fb;const _0x175c95=await adjustment[_0x2bf66c(0x204)]([{'$unwind':_0x2bf66c(0x216)},{'$match':{'product.id_transaction_from':_0x13bbbd['_id'][_0x2bf66c(0x206)](),'product.invoice':_0x13bbbd[_0x2bf66c(0x1f7)]}},{'$project':{'_id':_0x2bf66c(0x233),'product_name':_0x2bf66c(0x23f),'product_code':'$product.product_code','quantity_available':_0x2bf66c(0x21b),'warehouse_name':_0x2bf66c(0x1df),'warehouse_room':_0x2bf66c(0x23c),'product_invoice':_0x2bf66c(0x224),'invoice':_0x2bf66c(0x231),'id_transaction_from':_0x2bf66c(0x1fe),'date':_0x2bf66c(0x1da),'production_date':_0x2bf66c(0x238),'expiry_date':_0x2bf66c(0x208),'UOM':_0x2bf66c(0x1e7)}}]);_0x175c95[_0x2bf66c(0x1ed)]>0x0&&_0x54fbc6[_0x2bf66c(0x20a)][_0x136a99[_0x2bf66c(0x1f7)]][_0x2bf66c(0x1f3)](..._0x175c95);}));})),_0x54fbc6['data_transfer']={},await Promise[_0x33096c(0x1e2)](_0x54fbc6[_0x33096c(0x23a)](async _0x416b1b=>{var _0x343c88=_0x33096c;_0x54fbc6[_0x343c88(0x223)][_0x416b1b['invoice']]=[],await Promise['all'](_0x416b1b[_0x343c88(0x202)][_0x343c88(0x23a)](async _0x14ff98=>{var _0x48ab55=_0x343c88;const _0x1e6fb5=await transfers[_0x48ab55(0x204)]([{'$unwind':_0x48ab55(0x216)},{'$match':{'product.id_transaction_id':_0x14ff98[_0x48ab55(0x22e)][_0x48ab55(0x206)](),'product.To_invoice':_0x14ff98[_0x48ab55(0x1f7)]}},{'$project':{'_id':'$product._id','product_name':_0x48ab55(0x23f),'product_code':_0x48ab55(0x234),'quantity_available':_0x48ab55(0x21f),'warehouse_name':_0x48ab55(0x21c),'warehouse_room':'$product.room_names','product_invoice':_0x48ab55(0x20b),'invoice':'$invoice','id_transaction_from':'$product.id_transaction_id','date':_0x48ab55(0x1da),'production_date':_0x48ab55(0x238),'expiry_date':_0x48ab55(0x208),'UOM':'$product.unit'}}]);_0x1e6fb5[_0x48ab55(0x1ed)]>0x0&&_0x54fbc6[_0x48ab55(0x223)][_0x416b1b[_0x48ab55(0x1f7)]][_0x48ab55(0x1f3)](..._0x1e6fb5);}));})),_0x1ab861[_0x33096c(0x1d8)]({'purchases_warehouse':_0x54fbc6,'data_sales':_0x54fbc6[_0x33096c(0x20d)],'data_adjustment':_0x54fbc6[_0x33096c(0x20a)],'data_transfer':_0x54fbc6['data_transfer']});}else{var _0x54fbc6=await purchases[_0x33096c(0x204)]([{'$match':{'warehouse_name':_0x543e6c,'date':{'$gte':_0x5e241e,'$lte':_0x4ee2a5}}},{'$lookup':{'from':_0x33096c(0x22f),'let':{'invoice':_0x33096c(0x231)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x33096c(0x23d),_0x33096c(0x1fc)]}}},{'$project':{'_id':_0x33096c(0x1db),'product_name':_0x33096c(0x227),'product_code':_0x33096c(0x1ea),'quantity_available':_0x33096c(0x1d7),'warehouse_name':'$name','warehouse_room':_0x33096c(0x1fd),'invoice':_0x33096c(0x1fc),'production_date':_0x33096c(0x1e6),'expiry_date':_0x33096c(0x218),'UOM':'$product_details.unit'}}],'as':'warehouse_data'}}]);_0x54fbc6['data_sales']={},await Promise[_0x33096c(0x1e2)](_0x54fbc6[_0x33096c(0x23a)](async _0x4a30ce=>{var _0x57a600=_0x33096c;_0x54fbc6['data_sales'][_0x4a30ce[_0x57a600(0x1f7)]]=[],await Promise[_0x57a600(0x1e2)](_0x4a30ce[_0x57a600(0x202)][_0x57a600(0x23a)](async _0x2772d2=>{var _0x36fad7=_0x57a600;const _0x5721d2=await sales[_0x36fad7(0x204)]([{'$unwind':_0x36fad7(0x1fb)},{'$match':{'sale_product.id_transaction_from':_0x2772d2[_0x36fad7(0x22e)][_0x36fad7(0x206)](),'sale_product.invoice':_0x2772d2['invoice']}},{'$project':{'_id':_0x36fad7(0x230),'product_name':_0x36fad7(0x22c),'product_code':_0x36fad7(0x1eb),'quantity_available':_0x36fad7(0x205),'warehouse_name':_0x36fad7(0x1df),'warehouse_room':_0x36fad7(0x200),'product_invoice':_0x36fad7(0x221),'invoice':_0x36fad7(0x231),'id_transaction_from':_0x36fad7(0x1f2),'date':_0x36fad7(0x1da),'production_date':_0x36fad7(0x1e9),'expiry_date':'$sale_product.expiry_date','UOM':_0x36fad7(0x20e)}}]);_0x5721d2[_0x36fad7(0x1ed)]>0x0&&_0x54fbc6['data_sales'][_0x4a30ce['invoice']][_0x36fad7(0x1f3)](..._0x5721d2);}));})),_0x54fbc6[_0x33096c(0x20d)]=_0x54fbc6['data_sales'],_0x54fbc6[_0x33096c(0x20a)]={},await Promise[_0x33096c(0x1e2)](_0x54fbc6[_0x33096c(0x23a)](async _0x2e5913=>{var _0x4ed376=_0x33096c;_0x54fbc6[_0x4ed376(0x20a)][_0x2e5913['invoice']]=[],await Promise[_0x4ed376(0x1e2)](_0x2e5913['warehouse_data']['map'](async _0x4266c1=>{var _0x2e4670=_0x4ed376;const _0x503b05=await adjustment['aggregate']([{'$unwind':_0x2e4670(0x216)},{'$match':{'product.id_transaction_from':_0x4266c1[_0x2e4670(0x22e)][_0x2e4670(0x206)](),'product.invoice':_0x4266c1['invoice']}},{'$project':{'_id':_0x2e4670(0x233),'product_name':_0x2e4670(0x23f),'product_code':_0x2e4670(0x234),'quantity_available':_0x2e4670(0x21b),'warehouse_name':_0x2e4670(0x1df),'warehouse_room':_0x2e4670(0x23c),'product_invoice':_0x2e4670(0x224),'invoice':_0x2e4670(0x231),'id_transaction_from':_0x2e4670(0x1fe),'date':_0x2e4670(0x1da),'production_date':'$product.production_date','expiry_date':_0x2e4670(0x208),'UOM':'$product.unit'}}]);_0x503b05[_0x2e4670(0x1ed)]>0x0&&_0x54fbc6[_0x2e4670(0x20a)][_0x2e5913['invoice']]['push'](..._0x503b05);}));})),_0x54fbc6[_0x33096c(0x223)]={},await Promise[_0x33096c(0x1e2)](_0x54fbc6[_0x33096c(0x23a)](async _0x1b6001=>{var _0x41b6af=_0x33096c;_0x54fbc6[_0x41b6af(0x223)][_0x1b6001[_0x41b6af(0x1f7)]]=[],await Promise[_0x41b6af(0x1e2)](_0x1b6001[_0x41b6af(0x202)][_0x41b6af(0x23a)](async _0x2a373a=>{var _0xc1e9c0=_0x41b6af;const _0x210910=await transfers[_0xc1e9c0(0x204)]([{'$unwind':_0xc1e9c0(0x216)},{'$match':{'product.id_transaction_id':_0x2a373a[_0xc1e9c0(0x22e)][_0xc1e9c0(0x206)](),'product.To_invoice':_0x2a373a[_0xc1e9c0(0x1f7)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0xc1e9c0(0x234),'quantity_available':_0xc1e9c0(0x21f),'warehouse_name':_0xc1e9c0(0x21c),'warehouse_room':_0xc1e9c0(0x23c),'product_invoice':'$product.to_room_name','invoice':_0xc1e9c0(0x231),'id_transaction_from':_0xc1e9c0(0x1e3),'date':_0xc1e9c0(0x1da),'production_date':_0xc1e9c0(0x238),'expiry_date':'$product.expiry_date','UOM':_0xc1e9c0(0x1e7)}}]);_0x210910[_0xc1e9c0(0x1ed)]>0x0&&_0x54fbc6['data_transfer'][_0x1b6001[_0xc1e9c0(0x1f7)]]['push'](..._0x210910);}));})),_0x1ab861[_0x33096c(0x1d8)]({'purchases_warehouse':_0x54fbc6,'data_sales':_0x54fbc6[_0x33096c(0x20d)],'data_adjustment':_0x54fbc6[_0x33096c(0x20a)],'data_transfer':_0x54fbc6[_0x33096c(0x223)]});}}else{if(_0x543e6c==_0x33096c(0x1e2)){var _0x54fbc6=await purchases_finished[_0x33096c(0x204)]([{'$match':{'date':{'$gte':_0x5e241e,'$lte':_0x4ee2a5}}},{'$lookup':{'from':_0x33096c(0x22f),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x33096c(0x20f)},{'$match':{'$expr':{'$eq':['$$invoice',_0x33096c(0x1fc)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x33096c(0x227),'product_code':_0x33096c(0x1ea),'quantity_available':_0x33096c(0x1d7),'warehouse_name':'$name','warehouse_room':_0x33096c(0x1fd),'invoice':_0x33096c(0x1fc),'production_date':_0x33096c(0x1e6),'expiry_date':_0x33096c(0x218),'UOM':_0x33096c(0x207)}}],'as':_0x33096c(0x202)}}]);_0x54fbc6['data_sales']={},await Promise[_0x33096c(0x1e2)](_0x54fbc6['map'](async _0x5e977f=>{var _0x2874ec=_0x33096c;_0x54fbc6[_0x2874ec(0x20d)][_0x5e977f[_0x2874ec(0x1f7)]]=[],await Promise[_0x2874ec(0x1e2)](_0x5e977f[_0x2874ec(0x202)][_0x2874ec(0x23a)](async _0xae992f=>{var _0x2e80d1=_0x2874ec;const _0x3bf07f=await sales_finished[_0x2e80d1(0x204)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0xae992f['_id'][_0x2e80d1(0x206)](),'sale_product.invoice':_0xae992f[_0x2e80d1(0x1f7)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x2e80d1(0x22c),'product_code':_0x2e80d1(0x1eb),'quantity_available':'$sale_product.quantity','warehouse_name':_0x2e80d1(0x1df),'warehouse_room':_0x2e80d1(0x200),'product_invoice':_0x2e80d1(0x221),'invoice':_0x2e80d1(0x231),'id_transaction_from':_0x2e80d1(0x1f2),'date':'$date','production_date':'$sale_product.production_date','expiry_date':_0x2e80d1(0x215),'UOM':'$sale_product.unit'}}]);_0x3bf07f[_0x2e80d1(0x1ed)]>0x0&&_0x54fbc6[_0x2e80d1(0x20d)][_0x5e977f[_0x2e80d1(0x1f7)]][_0x2e80d1(0x1f3)](..._0x3bf07f);}));})),_0x54fbc6['data_sales']=_0x54fbc6[_0x33096c(0x20d)],_0x54fbc6['data_adjustment']={},await Promise[_0x33096c(0x1e2)](_0x54fbc6[_0x33096c(0x23a)](async _0x59f85c=>{var _0x405fe1=_0x33096c;_0x54fbc6[_0x405fe1(0x20a)][_0x59f85c[_0x405fe1(0x1f7)]]=[],await Promise[_0x405fe1(0x1e2)](_0x59f85c[_0x405fe1(0x202)][_0x405fe1(0x23a)](async _0x4e9e16=>{var _0x403f7c=_0x405fe1;const _0x42ba50=await adjustment_finished['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x4e9e16['_id']['valueOf'](),'product.invoice':_0x4e9e16[_0x403f7c(0x1f7)]}},{'$project':{'_id':_0x403f7c(0x233),'product_name':_0x403f7c(0x23f),'product_code':_0x403f7c(0x234),'quantity_available':_0x403f7c(0x21b),'warehouse_name':_0x403f7c(0x1df),'warehouse_room':'$product.room_names','product_invoice':'$product.invoice','invoice':_0x403f7c(0x231),'id_transaction_from':_0x403f7c(0x1fe),'date':'$date','production_date':_0x403f7c(0x238),'expiry_date':'$product.expiry_date','UOM':'$product.unit'}}]);_0x42ba50[_0x403f7c(0x1ed)]>0x0&&_0x54fbc6[_0x403f7c(0x20a)][_0x59f85c[_0x403f7c(0x1f7)]]['push'](..._0x42ba50);}));})),_0x54fbc6['data_transfer']={},await Promise[_0x33096c(0x1e2)](_0x54fbc6[_0x33096c(0x23a)](async _0x35feb8=>{var _0x245f44=_0x33096c;_0x54fbc6[_0x245f44(0x223)][_0x35feb8[_0x245f44(0x1f7)]]=[],await Promise[_0x245f44(0x1e2)](_0x35feb8[_0x245f44(0x202)]['map'](async _0x2a89ec=>{var _0x8f7046=_0x245f44;const _0x183735=await transfers_finished[_0x8f7046(0x204)]([{'$unwind':'$product'},{'$match':{'product.id_transaction':_0x2a89ec[_0x8f7046(0x22e)][_0x8f7046(0x206)](),'product.from_invoice':_0x2a89ec[_0x8f7046(0x1f7)]}},{'$project':{'_id':'$product._id','product_name':_0x8f7046(0x23f),'product_code':'$product.product_code','quantity_available':'$product.to_quantity','warehouse_name':_0x8f7046(0x21c),'warehouse_room':'$product.room_names','product_invoice':_0x8f7046(0x20b),'invoice':'$invoice','id_transaction_from':_0x8f7046(0x1fa),'date':'$date','production_date':_0x8f7046(0x238),'expiry_date':_0x8f7046(0x208),'UOM':_0x8f7046(0x1e7)}}]);_0x183735[_0x8f7046(0x1ed)]>0x0&&_0x54fbc6[_0x8f7046(0x223)][_0x35feb8[_0x8f7046(0x1f7)]]['push'](..._0x183735);}));})),_0x1ab861[_0x33096c(0x1d8)]({'purchases_warehouse':_0x54fbc6,'data_sales':_0x54fbc6['data_sales'],'data_adjustment':_0x54fbc6[_0x33096c(0x20a)],'data_transfer':_0x54fbc6[_0x33096c(0x223)]});}else{var _0x54fbc6=await purchases_finished['aggregate']([{'$match':{'warehouse_name':_0x543e6c,'date':{'$gte':_0x5e241e,'$lte':_0x4ee2a5}}},{'$lookup':{'from':_0x33096c(0x22f),'let':{'invoice':_0x33096c(0x231)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x33096c(0x23d),_0x33096c(0x1fc)]}}},{'$project':{'_id':_0x33096c(0x1db),'product_name':_0x33096c(0x227),'product_code':_0x33096c(0x1ea),'quantity_available':_0x33096c(0x1d7),'warehouse_name':_0x33096c(0x1f9),'warehouse_room':'$room','invoice':_0x33096c(0x1fc),'production_date':_0x33096c(0x1e6),'expiry_date':_0x33096c(0x218),'UOM':'$product_details.unit'}}],'as':_0x33096c(0x202)}}]);_0x54fbc6[_0x33096c(0x20d)]={},await Promise['all'](_0x54fbc6[_0x33096c(0x23a)](async _0x5aed57=>{var _0x24bed7=_0x33096c;_0x54fbc6[_0x24bed7(0x20d)][_0x5aed57[_0x24bed7(0x1f7)]]=[],await Promise[_0x24bed7(0x1e2)](_0x5aed57['warehouse_data']['map'](async _0x1960d5=>{var _0x4c3fd4=_0x24bed7;const _0x4aabf1=await sales_finished[_0x4c3fd4(0x204)]([{'$unwind':_0x4c3fd4(0x1fb)},{'$match':{'sale_product.id_transaction_from':_0x1960d5[_0x4c3fd4(0x22e)]['valueOf'](),'sale_product.invoice':_0x1960d5[_0x4c3fd4(0x1f7)]}},{'$project':{'_id':_0x4c3fd4(0x230),'product_name':'$sale_product.product_name','product_code':_0x4c3fd4(0x1eb),'quantity_available':_0x4c3fd4(0x205),'warehouse_name':_0x4c3fd4(0x1df),'warehouse_room':'$sale_product.room_name','product_invoice':'$sale_product.invoice','invoice':_0x4c3fd4(0x231),'id_transaction_from':_0x4c3fd4(0x1f2),'date':_0x4c3fd4(0x1da),'production_date':_0x4c3fd4(0x1e9),'expiry_date':'$sale_product.expiry_date','UOM':_0x4c3fd4(0x20e)}}]);_0x4aabf1[_0x4c3fd4(0x1ed)]>0x0&&_0x54fbc6[_0x4c3fd4(0x20d)][_0x5aed57[_0x4c3fd4(0x1f7)]][_0x4c3fd4(0x1f3)](..._0x4aabf1);}));})),_0x54fbc6[_0x33096c(0x20d)]=_0x54fbc6[_0x33096c(0x20d)],_0x54fbc6[_0x33096c(0x20a)]={},await Promise[_0x33096c(0x1e2)](_0x54fbc6[_0x33096c(0x23a)](async _0x3ccc3d=>{var _0x12f1e0=_0x33096c;_0x54fbc6['data_adjustment'][_0x3ccc3d[_0x12f1e0(0x1f7)]]=[],await Promise[_0x12f1e0(0x1e2)](_0x3ccc3d['warehouse_data']['map'](async _0x383fed=>{var _0x9c5d1e=_0x12f1e0;const _0x3be88a=await adjustment_finished[_0x9c5d1e(0x204)]([{'$unwind':_0x9c5d1e(0x216)},{'$match':{'product.id_transaction_from':_0x383fed[_0x9c5d1e(0x22e)]['valueOf'](),'product.invoice':_0x383fed[_0x9c5d1e(0x1f7)]}},{'$project':{'_id':_0x9c5d1e(0x233),'product_name':'$product.product_name','product_code':_0x9c5d1e(0x234),'quantity_available':_0x9c5d1e(0x21b),'warehouse_name':_0x9c5d1e(0x1df),'warehouse_room':_0x9c5d1e(0x23c),'product_invoice':_0x9c5d1e(0x224),'invoice':_0x9c5d1e(0x231),'id_transaction_from':_0x9c5d1e(0x1fe),'date':'$date','production_date':_0x9c5d1e(0x238),'expiry_date':_0x9c5d1e(0x208),'UOM':_0x9c5d1e(0x1e7)}}]);_0x3be88a['length']>0x0&&_0x54fbc6['data_adjustment'][_0x3ccc3d[_0x9c5d1e(0x1f7)]][_0x9c5d1e(0x1f3)](..._0x3be88a);}));})),_0x54fbc6['data_transfer']={},await Promise['all'](_0x54fbc6[_0x33096c(0x23a)](async _0x3920c0=>{var _0x54cee4=_0x33096c;_0x54fbc6[_0x54cee4(0x223)][_0x3920c0[_0x54cee4(0x1f7)]]=[],await Promise[_0x54cee4(0x1e2)](_0x3920c0[_0x54cee4(0x202)][_0x54cee4(0x23a)](async _0x39f32a=>{var _0x3040f3=_0x54cee4;const _0x496248=await transfers_finished[_0x3040f3(0x204)]([{'$unwind':'$product'},{'$match':{'product.id_transaction':_0x39f32a[_0x3040f3(0x22e)][_0x3040f3(0x206)](),'product.from_invoice':_0x39f32a['invoice']}},{'$project':{'_id':_0x3040f3(0x233),'product_name':_0x3040f3(0x23f),'product_code':_0x3040f3(0x234),'quantity_available':'$product.to_quantity','warehouse_name':_0x3040f3(0x21c),'warehouse_room':_0x3040f3(0x23c),'product_invoice':_0x3040f3(0x20b),'invoice':_0x3040f3(0x231),'id_transaction_from':_0x3040f3(0x1fa),'date':_0x3040f3(0x1da),'production_date':'$product.production_date','expiry_date':_0x3040f3(0x208),'UOM':_0x3040f3(0x1e7)}}]);_0x496248[_0x3040f3(0x1ed)]>0x0&&_0x54fbc6[_0x3040f3(0x223)][_0x3920c0[_0x3040f3(0x1f7)]][_0x3040f3(0x1f3)](..._0x496248);}));})),_0x1ab861[_0x33096c(0x1d8)]({'purchases_warehouse':_0x54fbc6,'data_sales':_0x54fbc6['data_sales'],'data_adjustment':_0x54fbc6[_0x33096c(0x20a)],'data_transfer':_0x54fbc6[_0x33096c(0x223)]});}}}),router[a0_0x175d26(0x214)](a0_0x175d26(0x1dc),auth,async(_0x437c3d,_0x1693fc)=>{var _0x21d6db=a0_0x175d26;try{const _0x2088be=_0x437c3d[_0x21d6db(0x228)]['id'];var _0x5e5694=await purchases_finished[_0x21d6db(0x21d)](_0x2088be);const _0x1de3a8=await master_shop[_0x21d6db(0x1ee)](),_0x2fcb0=_0x437c3d[_0x21d6db(0x1de)],_0x116267=await profile['findOne']({'email':_0x2fcb0[_0x21d6db(0x222)]});if(_0x1de3a8[0x0][_0x21d6db(0x1ef)]==_0x21d6db(0x23e))var _0x50be20=users[_0x21d6db(0x1dd)];else{if(_0x1de3a8[0x0]['language']=='Hindi')var _0x50be20=users[_0x21d6db(0x22b)];else{if(_0x1de3a8[0x0][_0x21d6db(0x1ef)]==_0x21d6db(0x201))var _0x50be20=users[_0x21d6db(0x201)];else{if(_0x1de3a8[0x0][_0x21d6db(0x1ef)]=='Spanish')var _0x50be20=users[_0x21d6db(0x1ec)];else{if(_0x1de3a8[0x0][_0x21d6db(0x1ef)]=='French')var _0x50be20=users[_0x21d6db(0x21a)];else{if(_0x1de3a8[0x0]['language']==_0x21d6db(0x237))var _0x50be20=users[_0x21d6db(0x22d)];else{if(_0x1de3a8[0x0][_0x21d6db(0x1ef)]==_0x21d6db(0x1ff))var _0x50be20=users[_0x21d6db(0x1ff)];else{if(_0x1de3a8[0x0][_0x21d6db(0x1ef)]==_0x21d6db(0x1f1))var _0x50be20=users['Arabic'];}}}}}}}_0x1693fc['render']('view_table',{'success':_0x437c3d[_0x21d6db(0x226)](_0x21d6db(0x1e0)),'errors':_0x437c3d[_0x21d6db(0x226)](_0x21d6db(0x229)),'master_shop':_0x1de3a8,'profile':_0x116267,'role':_0x2fcb0,'language':_0x50be20,'data':_0x5e5694});}catch(_0x3f0b5c){_0x1693fc[_0x21d6db(0x1d8)](_0x3f0b5c);}}),router[a0_0x175d26(0x214)](a0_0x175d26(0x23b),auth,async(_0xa7d726,_0x280951)=>{var _0x127138=a0_0x175d26;try{const _0x10cc68=_0xa7d726[_0x127138(0x228)]['id'];var _0x1d1c2c=await sales_finished[_0x127138(0x21d)](_0x10cc68);const _0x4445ba=await master_shop[_0x127138(0x1ee)](),_0x4c1cb5=_0xa7d726[_0x127138(0x1de)],_0x223b9b=await profile[_0x127138(0x232)]({'email':_0x4c1cb5[_0x127138(0x222)]});if(_0x4445ba[0x0][_0x127138(0x1ef)]==_0x127138(0x23e))var _0x55b613=users['English'];else{if(_0x4445ba[0x0]['language']==_0x127138(0x22b))var _0x55b613=users[_0x127138(0x22b)];else{if(_0x4445ba[0x0][_0x127138(0x1ef)]=='German')var _0x55b613=users[_0x127138(0x201)];else{if(_0x4445ba[0x0][_0x127138(0x1ef)]=='Spanish')var _0x55b613=users[_0x127138(0x1ec)];else{if(_0x4445ba[0x0][_0x127138(0x1ef)]==_0x127138(0x21a))var _0x55b613=users['French'];else{if(_0x4445ba[0x0][_0x127138(0x1ef)]==_0x127138(0x237))var _0x55b613=users['Portuguese'];else{if(_0x4445ba[0x0][_0x127138(0x1ef)]==_0x127138(0x1ff))var _0x55b613=users['Chinese'];else{if(_0x4445ba[0x0][_0x127138(0x1ef)]==_0x127138(0x1f1))var _0x55b613=users[_0x127138(0x22a)];}}}}}}}_0x280951[_0x127138(0x1e5)](_0x127138(0x239),{'success':_0xa7d726[_0x127138(0x226)](_0x127138(0x1e0)),'errors':_0xa7d726[_0x127138(0x226)](_0x127138(0x229)),'master_shop':_0x4445ba,'profile':_0x223b9b,'role':_0x4c1cb5,'language':_0x55b613,'data':_0x1d1c2c});}catch(_0x2aa8f6){_0x280951[_0x127138(0x1d8)](_0x2aa8f6);}}),router[a0_0x175d26(0x214)](a0_0x175d26(0x20c),auth,async(_0x101547,_0x59868f)=>{var _0x559618=a0_0x175d26;try{const _0x5b3f20=_0x101547['params']['id'];var _0x55bf3c=await transfers_finished[_0x559618(0x21d)](_0x5b3f20);const _0x3d3798=await master_shop[_0x559618(0x1ee)](),_0x59e488=_0x101547[_0x559618(0x1de)],_0x5708a9=await profile[_0x559618(0x232)]({'email':_0x59e488['email']});if(_0x3d3798[0x0][_0x559618(0x1ef)]==_0x559618(0x23e))var _0x35c3af=users[_0x559618(0x1dd)];else{if(_0x3d3798[0x0][_0x559618(0x1ef)]==_0x559618(0x22b))var _0x35c3af=users[_0x559618(0x22b)];else{if(_0x3d3798[0x0]['language']=='German')var _0x35c3af=users['German'];else{if(_0x3d3798[0x0][_0x559618(0x1ef)]=='Spanish')var _0x35c3af=users[_0x559618(0x1ec)];else{if(_0x3d3798[0x0]['language']=='French')var _0x35c3af=users['French'];else{if(_0x3d3798[0x0][_0x559618(0x1ef)]=='Portuguese\x20(BR)')var _0x35c3af=users[_0x559618(0x22d)];else{if(_0x3d3798[0x0]['language']==_0x559618(0x1ff))var _0x35c3af=users[_0x559618(0x1ff)];else{if(_0x3d3798[0x0]['language']==_0x559618(0x1f1))var _0x35c3af=users['Arabic'];}}}}}}}_0x59868f[_0x559618(0x1e5)]('view_tf_table',{'success':_0x101547[_0x559618(0x226)](_0x559618(0x1e0)),'errors':_0x101547[_0x559618(0x226)](_0x559618(0x229)),'master_shop':_0x3d3798,'profile':_0x5708a9,'role':_0x59e488,'language':_0x35c3af,'data':_0x55bf3c});}catch(_0x76d447){_0x59868f[_0x559618(0x1d8)](_0x76d447);}}),router['get']('/viewFG',auth,async(_0x1f9627,_0x566290)=>{var _0x296f97=a0_0x175d26;try{const {username:_0x3010a4,email:_0x1c04ba,role:_0x2d0bc3}=_0x1f9627[_0x296f97(0x1de)],_0x2d4f26=_0x1f9627[_0x296f97(0x1de)],_0x29802e=await profile[_0x296f97(0x232)]({'email':_0x2d4f26[_0x296f97(0x222)]}),_0x1e8dc0=await master_shop[_0x296f97(0x1ee)](),_0x4681b4=await warehouse[_0x296f97(0x204)]([{'$match':{'status':_0x296f97(0x1f4),'warehouse_category':_0x296f97(0x1d9)}},{'$group':{'_id':_0x296f97(0x1f9),'name':{'$first':_0x296f97(0x1f9)}}}]);if(_0x1e8dc0[0x0][_0x296f97(0x1ef)]==_0x296f97(0x23e))var _0x1df32e=users[_0x296f97(0x1dd)];else{if(_0x1e8dc0[0x0][_0x296f97(0x1ef)]==_0x296f97(0x22b))var _0x1df32e=users[_0x296f97(0x22b)];else{if(_0x1e8dc0[0x0][_0x296f97(0x1ef)]==_0x296f97(0x201))var _0x1df32e=users[_0x296f97(0x201)];else{if(_0x1e8dc0[0x0][_0x296f97(0x1ef)]==_0x296f97(0x1ec))var _0x1df32e=users[_0x296f97(0x1ec)];else{if(_0x1e8dc0[0x0][_0x296f97(0x1ef)]==_0x296f97(0x21a))var _0x1df32e=users[_0x296f97(0x21a)];else{if(_0x1e8dc0[0x0][_0x296f97(0x1ef)]==_0x296f97(0x237))var _0x1df32e=users[_0x296f97(0x22d)];else{if(_0x1e8dc0[0x0]['language']==_0x296f97(0x1ff))var _0x1df32e=users[_0x296f97(0x1ff)];else{if(_0x1e8dc0[0x0][_0x296f97(0x1ef)]==_0x296f97(0x1f1))var _0x1df32e=users[_0x296f97(0x22a)];}}}}}}}_0x566290['render'](_0x296f97(0x212),{'success':_0x1f9627[_0x296f97(0x226)]('success'),'errors':_0x1f9627[_0x296f97(0x226)]('errors'),'role':_0x2d4f26,'profile':_0x29802e,'master_shop':_0x1e8dc0,'dataProcess':_0x4681b4,'language':_0x1df32e});}catch(_0x325882){console[_0x296f97(0x203)](_0x325882);}}),module['exports']=router;