function a0_0x46cc(_0x10889b,_0x37c74b){var _0xf76449=a0_0xf764();return a0_0x46cc=function(_0x46cc64,_0x42bd18){_0x46cc64=_0x46cc64-0x7a;var _0x15be1a=_0xf76449[_0x46cc64];return _0x15be1a;},a0_0x46cc(_0x10889b,_0x37c74b);}function a0_0xf764(){var _0xe526f5=['warehouse_data','English\x20(US)','success','$product.expiry_date','$product_details.expiry_date','$name','push','$product.to_quantity','post','$room','flash','$sale_product.room_name','errors','aggregate','$product_details.product_name','invoice','12948KYwAej','$sale_product.product_code','findOne','$product_details.product_code','length','$to_warehouse','$product.product_name','params','$product_details._id','Portuguese\x20(BR)','$warehouse_name','$product_details.product_stock','body','_id','user','../middleware/auth','$product.id_transaction_from','Enabled','$sale_product.unit','render','view_table','Router','view_tf_table','$product.room_names','transaction_finished','$product_details.invoice','$product.id_transaction','167015HKiKyP','$product.product_code','English','express','Finished\x20Goods','174vGbEqf','$date','$sale_product.production_date','language','2629TnhwAN','transaction_finished_raw','25514BUlNMR','/viewdata_tf_fg/:id','$sale_product','../models/all_models','/viewdata_inc_fg/:id','/reports','log','7YBllmq','$$invoice','$invoice','$product.unit','547971JonQKO','$product_details','$product.new_adjust_qty','../public/language/languages.json','8lSgKof','French','$sale_product._id','/viewdata_og_fg/:id','$product.id_transaction_id','$product.invoice','nodemailer','844020kAqxeY','$product_details.unit','view_og_table','data_adjustment','json','$sale_product.id_transaction_from','Arabic\x20(ae)','Arabic','865624SeTRdA','4612170RsKXIp','$product','warehouses','Spanish','all','findById','$product_details.production_date','valueOf','data_transfer','map','$product.production_date','$sale_product.quantity','Portuguese','$sale_product.invoice','Raw\x20Materials','data_sales','German','29PhHSUg','email','find','$sale_product.product_name','$product._id','$sale_product.expiry_date','Chinese','Hindi','get','$product.to_room_name'];a0_0xf764=function(){return _0xe526f5;};return a0_0xf764();}var a0_0x29fc29=a0_0x46cc;(function(_0x20cc55,_0x26d242){var _0x1af734=a0_0x46cc,_0x319a52=_0x20cc55();while(!![]){try{var _0x21cf7e=parseInt(_0x1af734(0xbb))/0x1*(parseInt(_0x1af734(0x8b))/0x2)+-parseInt(_0x1af734(0x96))/0x3*(-parseInt(_0x1af734(0x9a))/0x4)+-parseInt(_0x1af734(0x80))/0x5*(parseInt(_0x1af734(0x85))/0x6)+parseInt(_0x1af734(0x92))/0x7*(parseInt(_0x1af734(0xa9))/0x8)+-parseInt(_0x1af734(0xa1))/0x9+parseInt(_0x1af734(0xaa))/0xa+parseInt(_0x1af734(0x89))/0xb*(parseInt(_0x1af734(0xd5))/0xc);if(_0x21cf7e===_0x26d242)break;else _0x319a52['push'](_0x319a52['shift']());}catch(_0x11f045){_0x319a52['push'](_0x319a52['shift']());}}}(a0_0xf764,0x7a185));const express=require(a0_0x29fc29(0x83)),app=express(),router=express[a0_0x29fc29(0x7a)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_finished,sales,sales_finished,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,adjustment_finished,adjustment}=require(a0_0x29fc29(0x8e)),auth=require(a0_0x29fc29(0xe4)),users=require(a0_0x29fc29(0x99)),nodemailer=require(a0_0x29fc29(0xa0));router[a0_0x29fc29(0xc3)]('/view',auth,async(_0x5cbe97,_0x31c0ed)=>{var _0x47a4c2=a0_0x29fc29;try{const {username:_0x5591eb,email:_0x4e700f,role:_0x10fe31}=_0x5cbe97[_0x47a4c2(0xe3)],_0x4f832a=_0x5cbe97[_0x47a4c2(0xe3)],_0x15a03b=await profile['findOne']({'email':_0x4f832a['email']}),_0x2ed8d4=await master_shop[_0x47a4c2(0xbd)](),_0x17450c=await warehouse['aggregate']([{'$match':{'status':_0x47a4c2(0xe6),'warehouse_category':_0x47a4c2(0x84)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);if(_0x2ed8d4[0x0][_0x47a4c2(0x88)]==_0x47a4c2(0xc6))var _0x139535=users[_0x47a4c2(0x82)];else{if(_0x2ed8d4[0x0][_0x47a4c2(0x88)]==_0x47a4c2(0xc2))var _0x139535=users[_0x47a4c2(0xc2)];else{if(_0x2ed8d4[0x0][_0x47a4c2(0x88)]==_0x47a4c2(0xba))var _0x139535=users['German'];else{if(_0x2ed8d4[0x0][_0x47a4c2(0x88)]=='Spanish')var _0x139535=users['Spanish'];else{if(_0x2ed8d4[0x0][_0x47a4c2(0x88)]==_0x47a4c2(0x9b))var _0x139535=users[_0x47a4c2(0x9b)];else{if(_0x2ed8d4[0x0][_0x47a4c2(0x88)]==_0x47a4c2(0xde))var _0x139535=users[_0x47a4c2(0xb6)];else{if(_0x2ed8d4[0x0][_0x47a4c2(0x88)]==_0x47a4c2(0xc1))var _0x139535=users[_0x47a4c2(0xc1)];else{if(_0x2ed8d4[0x0][_0x47a4c2(0x88)]=='Arabic\x20(ae)')var _0x139535=users[_0x47a4c2(0xa8)];}}}}}}}_0x31c0ed[_0x47a4c2(0xe8)](_0x47a4c2(0x7d),{'success':_0x5cbe97[_0x47a4c2(0xcf)](_0x47a4c2(0xc7)),'errors':_0x5cbe97[_0x47a4c2(0xcf)](_0x47a4c2(0xd1)),'role':_0x4f832a,'profile':_0x15a03b,'master_shop':_0x2ed8d4,'dataProcess':_0x17450c,'language':_0x139535});}catch(_0x64f369){console[_0x47a4c2(0x91)](_0x64f369);}}),router[a0_0x29fc29(0xcd)](a0_0x29fc29(0x90),auth,async(_0x2b8aad,_0x53c9a2)=>{var _0x3d3f65=a0_0x29fc29;const {product_category:_0xca0296,transaction_category:_0x31af4c,transaction_date_from:_0x46402c,transaction_date_to:_0x3c5db2,warehouse_category:_0x3f0fb5,item_code:_0x3aade9}=_0x2b8aad[_0x3d3f65(0xe1)];console[_0x3d3f65(0x91)](_0x3f0fb5);if(_0xca0296=='rm'){if(_0x3f0fb5==_0x3d3f65(0xae)){var _0x54462f=await purchases[_0x3d3f65(0xd2)]([{'$match':{'date':{'$gte':_0x46402c,'$lte':_0x3c5db2}}},{'$lookup':{'from':'warehouses','let':{'invoice':_0x3d3f65(0x94)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x3d3f65(0x93),_0x3d3f65(0x7e)]}}},{'$project':{'_id':'$product_details._id','product_name':'$product_details.product_name','product_code':_0x3d3f65(0xd8),'quantity_available':_0x3d3f65(0xe0),'warehouse_name':_0x3d3f65(0xca),'warehouse_room':_0x3d3f65(0xce),'invoice':_0x3d3f65(0x7e),'production_date':_0x3d3f65(0xb0),'expiry_date':_0x3d3f65(0xc9),'UOM':_0x3d3f65(0xa2)}}],'as':_0x3d3f65(0xc5)}}]);_0x54462f[_0x3d3f65(0xb9)]={},await Promise[_0x3d3f65(0xae)](_0x54462f[_0x3d3f65(0xb3)](async _0x59e9f5=>{var _0xe745c=_0x3d3f65;_0x54462f[_0xe745c(0xb9)][_0x59e9f5[_0xe745c(0xd4)]]=[],await Promise[_0xe745c(0xae)](_0x59e9f5[_0xe745c(0xc5)][_0xe745c(0xb3)](async _0x408954=>{var _0x5b5a3a=_0xe745c;const _0x1d69bf=await sales[_0x5b5a3a(0xd2)]([{'$unwind':_0x5b5a3a(0x8d)},{'$match':{'sale_product.id_transaction_from':_0x408954[_0x5b5a3a(0xe2)]['valueOf'](),'sale_product.invoice':_0x408954[_0x5b5a3a(0xd4)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x5b5a3a(0xbe),'product_code':'$sale_product.product_code','quantity_available':_0x5b5a3a(0xb5),'warehouse_name':'$warehouse_name','warehouse_room':'$sale_product.room_name','product_invoice':_0x5b5a3a(0xb7),'invoice':_0x5b5a3a(0x94),'id_transaction_from':'$sale_product.id_transaction_from','date':_0x5b5a3a(0x86),'production_date':_0x5b5a3a(0x87),'expiry_date':_0x5b5a3a(0xc0),'UOM':_0x5b5a3a(0xe7)}}]);_0x1d69bf[_0x5b5a3a(0xd9)]>0x0&&_0x54462f[_0x5b5a3a(0xb9)][_0x59e9f5[_0x5b5a3a(0xd4)]][_0x5b5a3a(0xcb)](..._0x1d69bf);}));})),_0x54462f['data_sales']=_0x54462f[_0x3d3f65(0xb9)],_0x54462f[_0x3d3f65(0xa4)]={},await Promise[_0x3d3f65(0xae)](_0x54462f[_0x3d3f65(0xb3)](async _0xc8bf5c=>{var _0x187bd3=_0x3d3f65;_0x54462f['data_adjustment'][_0xc8bf5c[_0x187bd3(0xd4)]]=[],await Promise[_0x187bd3(0xae)](_0xc8bf5c[_0x187bd3(0xc5)][_0x187bd3(0xb3)](async _0x1fe181=>{var _0x216af6=_0x187bd3;const _0x514a29=await adjustment[_0x216af6(0xd2)]([{'$unwind':_0x216af6(0xab)},{'$match':{'product.id_transaction_from':_0x1fe181['_id'][_0x216af6(0xb1)](),'product.invoice':_0x1fe181[_0x216af6(0xd4)]}},{'$project':{'_id':_0x216af6(0xbf),'product_name':_0x216af6(0xdb),'product_code':_0x216af6(0x81),'quantity_available':_0x216af6(0x98),'warehouse_name':_0x216af6(0xdf),'warehouse_room':_0x216af6(0x7c),'product_invoice':_0x216af6(0x9f),'invoice':_0x216af6(0x94),'id_transaction_from':_0x216af6(0xe5),'date':_0x216af6(0x86),'production_date':'$product.production_date','expiry_date':'$product.expiry_date','UOM':'$product.unit'}}]);_0x514a29[_0x216af6(0xd9)]>0x0&&_0x54462f[_0x216af6(0xa4)][_0xc8bf5c[_0x216af6(0xd4)]][_0x216af6(0xcb)](..._0x514a29);}));})),_0x54462f[_0x3d3f65(0xb2)]={},await Promise['all'](_0x54462f[_0x3d3f65(0xb3)](async _0x116a2a=>{var _0x409985=_0x3d3f65;_0x54462f[_0x409985(0xb2)][_0x116a2a['invoice']]=[],await Promise[_0x409985(0xae)](_0x116a2a['warehouse_data']['map'](async _0x22fc7e=>{var _0x4bd6c0=_0x409985;const _0x27f5ac=await transfers[_0x4bd6c0(0xd2)]([{'$unwind':_0x4bd6c0(0xab)},{'$match':{'product.id_transaction_id':_0x22fc7e[_0x4bd6c0(0xe2)]['valueOf'](),'product.To_invoice':_0x22fc7e[_0x4bd6c0(0xd4)]}},{'$project':{'_id':_0x4bd6c0(0xbf),'product_name':_0x4bd6c0(0xdb),'product_code':_0x4bd6c0(0x81),'quantity_available':_0x4bd6c0(0xcc),'warehouse_name':_0x4bd6c0(0xda),'warehouse_room':_0x4bd6c0(0x7c),'product_invoice':_0x4bd6c0(0xc4),'invoice':_0x4bd6c0(0x94),'id_transaction_from':'$product.id_transaction_id','date':_0x4bd6c0(0x86),'production_date':_0x4bd6c0(0xb4),'expiry_date':_0x4bd6c0(0xc8),'UOM':'$product.unit'}}]);_0x27f5ac['length']>0x0&&_0x54462f['data_transfer'][_0x116a2a['invoice']][_0x4bd6c0(0xcb)](..._0x27f5ac);}));})),_0x53c9a2[_0x3d3f65(0xa5)]({'purchases_warehouse':_0x54462f,'data_sales':_0x54462f[_0x3d3f65(0xb9)],'data_adjustment':_0x54462f[_0x3d3f65(0xa4)],'data_transfer':_0x54462f[_0x3d3f65(0xb2)]});}else{var _0x54462f=await purchases['aggregate']([{'$match':{'warehouse_name':_0x3f0fb5,'date':{'$gte':_0x46402c,'$lte':_0x3c5db2}}},{'$lookup':{'from':_0x3d3f65(0xac),'let':{'invoice':_0x3d3f65(0x94)},'pipeline':[{'$unwind':_0x3d3f65(0x97)},{'$match':{'$expr':{'$eq':[_0x3d3f65(0x93),_0x3d3f65(0x7e)]}}},{'$project':{'_id':'$product_details._id','product_name':'$product_details.product_name','product_code':'$product_details.product_code','quantity_available':'$product_details.product_stock','warehouse_name':_0x3d3f65(0xca),'warehouse_room':'$room','invoice':'$product_details.invoice','production_date':'$product_details.production_date','expiry_date':_0x3d3f65(0xc9),'UOM':_0x3d3f65(0xa2)}}],'as':_0x3d3f65(0xc5)}}]);_0x54462f[_0x3d3f65(0xb9)]={},await Promise['all'](_0x54462f[_0x3d3f65(0xb3)](async _0x513cfd=>{var _0x26e068=_0x3d3f65;_0x54462f[_0x26e068(0xb9)][_0x513cfd['invoice']]=[],await Promise['all'](_0x513cfd[_0x26e068(0xc5)]['map'](async _0x29081e=>{var _0x258caa=_0x26e068;const _0x4b7761=await sales['aggregate']([{'$unwind':_0x258caa(0x8d)},{'$match':{'sale_product.id_transaction_from':_0x29081e[_0x258caa(0xe2)][_0x258caa(0xb1)](),'sale_product.invoice':_0x29081e[_0x258caa(0xd4)]}},{'$project':{'_id':_0x258caa(0x9c),'product_name':_0x258caa(0xbe),'product_code':_0x258caa(0xd6),'quantity_available':_0x258caa(0xb5),'warehouse_name':'$warehouse_name','warehouse_room':_0x258caa(0xd0),'product_invoice':_0x258caa(0xb7),'invoice':'$invoice','id_transaction_from':_0x258caa(0xa6),'date':_0x258caa(0x86),'production_date':_0x258caa(0x87),'expiry_date':'$sale_product.expiry_date','UOM':_0x258caa(0xe7)}}]);_0x4b7761[_0x258caa(0xd9)]>0x0&&_0x54462f['data_sales'][_0x513cfd[_0x258caa(0xd4)]][_0x258caa(0xcb)](..._0x4b7761);}));})),_0x54462f[_0x3d3f65(0xb9)]=_0x54462f[_0x3d3f65(0xb9)],_0x54462f[_0x3d3f65(0xa4)]={},await Promise[_0x3d3f65(0xae)](_0x54462f['map'](async _0x2d6424=>{var _0x33c96b=_0x3d3f65;_0x54462f['data_adjustment'][_0x2d6424[_0x33c96b(0xd4)]]=[],await Promise[_0x33c96b(0xae)](_0x2d6424[_0x33c96b(0xc5)][_0x33c96b(0xb3)](async _0x29e348=>{var _0xfe80e7=_0x33c96b;const _0x29053c=await adjustment[_0xfe80e7(0xd2)]([{'$unwind':_0xfe80e7(0xab)},{'$match':{'product.id_transaction_from':_0x29e348[_0xfe80e7(0xe2)][_0xfe80e7(0xb1)](),'product.invoice':_0x29e348['invoice']}},{'$project':{'_id':_0xfe80e7(0xbf),'product_name':'$product.product_name','product_code':_0xfe80e7(0x81),'quantity_available':_0xfe80e7(0x98),'warehouse_name':'$warehouse_name','warehouse_room':_0xfe80e7(0x7c),'product_invoice':_0xfe80e7(0x9f),'invoice':_0xfe80e7(0x94),'id_transaction_from':_0xfe80e7(0xe5),'date':_0xfe80e7(0x86),'production_date':'$product.production_date','expiry_date':_0xfe80e7(0xc8),'UOM':_0xfe80e7(0x95)}}]);_0x29053c[_0xfe80e7(0xd9)]>0x0&&_0x54462f[_0xfe80e7(0xa4)][_0x2d6424[_0xfe80e7(0xd4)]]['push'](..._0x29053c);}));})),_0x54462f[_0x3d3f65(0xb2)]={},await Promise[_0x3d3f65(0xae)](_0x54462f[_0x3d3f65(0xb3)](async _0x591db9=>{var _0x3cb491=_0x3d3f65;_0x54462f[_0x3cb491(0xb2)][_0x591db9[_0x3cb491(0xd4)]]=[],await Promise[_0x3cb491(0xae)](_0x591db9[_0x3cb491(0xc5)][_0x3cb491(0xb3)](async _0x47fe68=>{var _0x882642=_0x3cb491;const _0x3b8768=await transfers[_0x882642(0xd2)]([{'$unwind':_0x882642(0xab)},{'$match':{'product.id_transaction_id':_0x47fe68['_id'][_0x882642(0xb1)](),'product.To_invoice':_0x47fe68[_0x882642(0xd4)]}},{'$project':{'_id':_0x882642(0xbf),'product_name':'$product.product_name','product_code':'$product.product_code','quantity_available':_0x882642(0xcc),'warehouse_name':_0x882642(0xda),'warehouse_room':'$product.room_names','product_invoice':_0x882642(0xc4),'invoice':'$invoice','id_transaction_from':_0x882642(0x9e),'date':_0x882642(0x86),'production_date':_0x882642(0xb4),'expiry_date':_0x882642(0xc8),'UOM':_0x882642(0x95)}}]);_0x3b8768[_0x882642(0xd9)]>0x0&&_0x54462f[_0x882642(0xb2)][_0x591db9[_0x882642(0xd4)]][_0x882642(0xcb)](..._0x3b8768);}));})),_0x53c9a2[_0x3d3f65(0xa5)]({'purchases_warehouse':_0x54462f,'data_sales':_0x54462f[_0x3d3f65(0xb9)],'data_adjustment':_0x54462f[_0x3d3f65(0xa4)],'data_transfer':_0x54462f[_0x3d3f65(0xb2)]});}}else{if(_0x3f0fb5=='all'){var _0x54462f=await purchases_finished[_0x3d3f65(0xd2)]([{'$match':{'date':{'$gte':_0x46402c,'$lte':_0x3c5db2}}},{'$lookup':{'from':'warehouses','let':{'invoice':_0x3d3f65(0x94)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x3d3f65(0x93),_0x3d3f65(0x7e)]}}},{'$project':{'_id':_0x3d3f65(0xdd),'product_name':_0x3d3f65(0xd3),'product_code':_0x3d3f65(0xd8),'quantity_available':_0x3d3f65(0xe0),'warehouse_name':_0x3d3f65(0xca),'warehouse_room':'$room','invoice':'$product_details.invoice','production_date':_0x3d3f65(0xb0),'expiry_date':'$product_details.expiry_date','UOM':_0x3d3f65(0xa2)}}],'as':_0x3d3f65(0xc5)}}]);_0x54462f[_0x3d3f65(0xb9)]={},await Promise[_0x3d3f65(0xae)](_0x54462f[_0x3d3f65(0xb3)](async _0x3464ed=>{var _0x369046=_0x3d3f65;_0x54462f['data_sales'][_0x3464ed[_0x369046(0xd4)]]=[],await Promise['all'](_0x3464ed[_0x369046(0xc5)][_0x369046(0xb3)](async _0x4be3b0=>{var _0x5c4637=_0x369046;const _0x2d532e=await sales_finished[_0x5c4637(0xd2)]([{'$unwind':_0x5c4637(0x8d)},{'$match':{'sale_product.id_transaction_from':_0x4be3b0[_0x5c4637(0xe2)][_0x5c4637(0xb1)](),'sale_product.invoice':_0x4be3b0[_0x5c4637(0xd4)]}},{'$project':{'_id':_0x5c4637(0x9c),'product_name':_0x5c4637(0xbe),'product_code':_0x5c4637(0xd6),'quantity_available':_0x5c4637(0xb5),'warehouse_name':_0x5c4637(0xdf),'warehouse_room':_0x5c4637(0xd0),'product_invoice':_0x5c4637(0xb7),'invoice':_0x5c4637(0x94),'id_transaction_from':_0x5c4637(0xa6),'date':_0x5c4637(0x86),'production_date':'$sale_product.production_date','expiry_date':_0x5c4637(0xc0),'UOM':_0x5c4637(0xe7)}}]);_0x2d532e[_0x5c4637(0xd9)]>0x0&&_0x54462f[_0x5c4637(0xb9)][_0x3464ed[_0x5c4637(0xd4)]][_0x5c4637(0xcb)](..._0x2d532e);}));})),_0x54462f['data_sales']=_0x54462f[_0x3d3f65(0xb9)],_0x54462f[_0x3d3f65(0xa4)]={},await Promise[_0x3d3f65(0xae)](_0x54462f[_0x3d3f65(0xb3)](async _0x4a5273=>{var _0x567e6f=_0x3d3f65;_0x54462f[_0x567e6f(0xa4)][_0x4a5273['invoice']]=[],await Promise[_0x567e6f(0xae)](_0x4a5273['warehouse_data'][_0x567e6f(0xb3)](async _0x3e59e2=>{var _0x5db234=_0x567e6f;const _0x3ad084=await adjustment_finished[_0x5db234(0xd2)]([{'$unwind':_0x5db234(0xab)},{'$match':{'product.id_transaction_from':_0x3e59e2['_id']['valueOf'](),'product.invoice':_0x3e59e2['invoice']}},{'$project':{'_id':_0x5db234(0xbf),'product_name':_0x5db234(0xdb),'product_code':_0x5db234(0x81),'quantity_available':_0x5db234(0x98),'warehouse_name':_0x5db234(0xdf),'warehouse_room':_0x5db234(0x7c),'product_invoice':'$product.invoice','invoice':_0x5db234(0x94),'id_transaction_from':_0x5db234(0xe5),'date':_0x5db234(0x86),'production_date':'$product.production_date','expiry_date':'$product.expiry_date','UOM':_0x5db234(0x95)}}]);_0x3ad084['length']>0x0&&_0x54462f[_0x5db234(0xa4)][_0x4a5273[_0x5db234(0xd4)]][_0x5db234(0xcb)](..._0x3ad084);}));})),_0x54462f[_0x3d3f65(0xb2)]={},await Promise[_0x3d3f65(0xae)](_0x54462f['map'](async _0x18aadb=>{var _0x35787a=_0x3d3f65;_0x54462f['data_transfer'][_0x18aadb[_0x35787a(0xd4)]]=[],await Promise[_0x35787a(0xae)](_0x18aadb[_0x35787a(0xc5)][_0x35787a(0xb3)](async _0x58af81=>{var _0x50b469=_0x35787a;const _0xeb2fa1=await transfers_finished[_0x50b469(0xd2)]([{'$unwind':_0x50b469(0xab)},{'$match':{'product.id_transaction':_0x58af81[_0x50b469(0xe2)][_0x50b469(0xb1)](),'product.from_invoice':_0x58af81[_0x50b469(0xd4)]}},{'$project':{'_id':_0x50b469(0xbf),'product_name':_0x50b469(0xdb),'product_code':_0x50b469(0x81),'quantity_available':'$product.to_quantity','warehouse_name':_0x50b469(0xda),'warehouse_room':_0x50b469(0x7c),'product_invoice':_0x50b469(0xc4),'invoice':'$invoice','id_transaction_from':'$product.id_transaction','date':_0x50b469(0x86),'production_date':_0x50b469(0xb4),'expiry_date':'$product.expiry_date','UOM':'$product.unit'}}]);_0xeb2fa1[_0x50b469(0xd9)]>0x0&&_0x54462f[_0x50b469(0xb2)][_0x18aadb[_0x50b469(0xd4)]][_0x50b469(0xcb)](..._0xeb2fa1);}));})),_0x53c9a2[_0x3d3f65(0xa5)]({'purchases_warehouse':_0x54462f,'data_sales':_0x54462f[_0x3d3f65(0xb9)],'data_adjustment':_0x54462f[_0x3d3f65(0xa4)],'data_transfer':_0x54462f[_0x3d3f65(0xb2)]});}else{var _0x54462f=await purchases_finished['aggregate']([{'$match':{'warehouse_name':_0x3f0fb5,'date':{'$gte':_0x46402c,'$lte':_0x3c5db2}}},{'$lookup':{'from':_0x3d3f65(0xac),'let':{'invoice':_0x3d3f65(0x94)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':[_0x3d3f65(0x93),'$product_details.invoice']}}},{'$project':{'_id':_0x3d3f65(0xdd),'product_name':_0x3d3f65(0xd3),'product_code':_0x3d3f65(0xd8),'quantity_available':_0x3d3f65(0xe0),'warehouse_name':_0x3d3f65(0xca),'warehouse_room':_0x3d3f65(0xce),'invoice':_0x3d3f65(0x7e),'production_date':_0x3d3f65(0xb0),'expiry_date':_0x3d3f65(0xc9),'UOM':_0x3d3f65(0xa2)}}],'as':'warehouse_data'}}]);_0x54462f[_0x3d3f65(0xb9)]={},await Promise['all'](_0x54462f[_0x3d3f65(0xb3)](async _0xc411dd=>{var _0x5214e9=_0x3d3f65;_0x54462f[_0x5214e9(0xb9)][_0xc411dd['invoice']]=[],await Promise[_0x5214e9(0xae)](_0xc411dd[_0x5214e9(0xc5)]['map'](async _0x218b9c=>{var _0x3af944=_0x5214e9;const _0x5d5f5e=await sales_finished[_0x3af944(0xd2)]([{'$unwind':_0x3af944(0x8d)},{'$match':{'sale_product.id_transaction_from':_0x218b9c[_0x3af944(0xe2)]['valueOf'](),'sale_product.invoice':_0x218b9c[_0x3af944(0xd4)]}},{'$project':{'_id':_0x3af944(0x9c),'product_name':_0x3af944(0xbe),'product_code':_0x3af944(0xd6),'quantity_available':_0x3af944(0xb5),'warehouse_name':_0x3af944(0xdf),'warehouse_room':'$sale_product.room_name','product_invoice':_0x3af944(0xb7),'invoice':_0x3af944(0x94),'id_transaction_from':_0x3af944(0xa6),'date':_0x3af944(0x86),'production_date':_0x3af944(0x87),'expiry_date':_0x3af944(0xc0),'UOM':_0x3af944(0xe7)}}]);_0x5d5f5e[_0x3af944(0xd9)]>0x0&&_0x54462f[_0x3af944(0xb9)][_0xc411dd[_0x3af944(0xd4)]][_0x3af944(0xcb)](..._0x5d5f5e);}));})),_0x54462f[_0x3d3f65(0xb9)]=_0x54462f['data_sales'],_0x54462f[_0x3d3f65(0xa4)]={},await Promise[_0x3d3f65(0xae)](_0x54462f[_0x3d3f65(0xb3)](async _0x9e8482=>{var _0x1a2460=_0x3d3f65;_0x54462f[_0x1a2460(0xa4)][_0x9e8482['invoice']]=[],await Promise[_0x1a2460(0xae)](_0x9e8482['warehouse_data']['map'](async _0x71f55=>{var _0x407de5=_0x1a2460;const _0x3f4656=await adjustment_finished[_0x407de5(0xd2)]([{'$unwind':_0x407de5(0xab)},{'$match':{'product.id_transaction_from':_0x71f55[_0x407de5(0xe2)][_0x407de5(0xb1)](),'product.invoice':_0x71f55['invoice']}},{'$project':{'_id':_0x407de5(0xbf),'product_name':'$product.product_name','product_code':_0x407de5(0x81),'quantity_available':'$product.new_adjust_qty','warehouse_name':'$warehouse_name','warehouse_room':_0x407de5(0x7c),'product_invoice':_0x407de5(0x9f),'invoice':_0x407de5(0x94),'id_transaction_from':_0x407de5(0xe5),'date':_0x407de5(0x86),'production_date':_0x407de5(0xb4),'expiry_date':_0x407de5(0xc8),'UOM':_0x407de5(0x95)}}]);_0x3f4656[_0x407de5(0xd9)]>0x0&&_0x54462f[_0x407de5(0xa4)][_0x9e8482[_0x407de5(0xd4)]][_0x407de5(0xcb)](..._0x3f4656);}));})),_0x54462f[_0x3d3f65(0xb2)]={},await Promise[_0x3d3f65(0xae)](_0x54462f[_0x3d3f65(0xb3)](async _0x55850e=>{var _0x5c3f7a=_0x3d3f65;_0x54462f[_0x5c3f7a(0xb2)][_0x55850e[_0x5c3f7a(0xd4)]]=[],await Promise[_0x5c3f7a(0xae)](_0x55850e['warehouse_data'][_0x5c3f7a(0xb3)](async _0x5c4ca7=>{var _0xded778=_0x5c3f7a;const _0xbb753a=await transfers_finished[_0xded778(0xd2)]([{'$unwind':_0xded778(0xab)},{'$match':{'product.id_transaction':_0x5c4ca7[_0xded778(0xe2)][_0xded778(0xb1)](),'product.from_invoice':_0x5c4ca7[_0xded778(0xd4)]}},{'$project':{'_id':_0xded778(0xbf),'product_name':_0xded778(0xdb),'product_code':'$product.product_code','quantity_available':_0xded778(0xcc),'warehouse_name':_0xded778(0xda),'warehouse_room':_0xded778(0x7c),'product_invoice':_0xded778(0xc4),'invoice':'$invoice','id_transaction_from':_0xded778(0x7f),'date':_0xded778(0x86),'production_date':'$product.production_date','expiry_date':'$product.expiry_date','UOM':_0xded778(0x95)}}]);_0xbb753a[_0xded778(0xd9)]>0x0&&_0x54462f[_0xded778(0xb2)][_0x55850e['invoice']][_0xded778(0xcb)](..._0xbb753a);}));})),_0x53c9a2[_0x3d3f65(0xa5)]({'purchases_warehouse':_0x54462f,'data_sales':_0x54462f[_0x3d3f65(0xb9)],'data_adjustment':_0x54462f[_0x3d3f65(0xa4)],'data_transfer':_0x54462f['data_transfer']});}}}),router[a0_0x29fc29(0xc3)](a0_0x29fc29(0x8f),auth,async(_0x4177f4,_0x4a534c)=>{var _0x502e60=a0_0x29fc29;try{const _0x38fc92=_0x4177f4[_0x502e60(0xdc)]['id'];var _0x1d458e=await purchases_finished[_0x502e60(0xaf)](_0x38fc92);const _0x4cbff4=await master_shop['find'](),_0x42e6f0=_0x4177f4['user'],_0x491e0e=await profile[_0x502e60(0xd7)]({'email':_0x42e6f0[_0x502e60(0xbc)]});if(_0x4cbff4[0x0][_0x502e60(0x88)]=='English\x20(US)')var _0xcaccb=users[_0x502e60(0x82)];else{if(_0x4cbff4[0x0][_0x502e60(0x88)]==_0x502e60(0xc2))var _0xcaccb=users['Hindi'];else{if(_0x4cbff4[0x0][_0x502e60(0x88)]==_0x502e60(0xba))var _0xcaccb=users['German'];else{if(_0x4cbff4[0x0][_0x502e60(0x88)]==_0x502e60(0xad))var _0xcaccb=users[_0x502e60(0xad)];else{if(_0x4cbff4[0x0]['language']=='French')var _0xcaccb=users[_0x502e60(0x9b)];else{if(_0x4cbff4[0x0][_0x502e60(0x88)]==_0x502e60(0xde))var _0xcaccb=users[_0x502e60(0xb6)];else{if(_0x4cbff4[0x0]['language']==_0x502e60(0xc1))var _0xcaccb=users[_0x502e60(0xc1)];else{if(_0x4cbff4[0x0][_0x502e60(0x88)]==_0x502e60(0xa7))var _0xcaccb=users[_0x502e60(0xa8)];}}}}}}}_0x4a534c['render'](_0x502e60(0xe9),{'success':_0x4177f4['flash']('success'),'errors':_0x4177f4['flash']('errors'),'master_shop':_0x4cbff4,'profile':_0x491e0e,'role':_0x42e6f0,'language':_0xcaccb,'data':_0x1d458e});}catch(_0xc812c9){_0x4a534c[_0x502e60(0xa5)](_0xc812c9);}}),router[a0_0x29fc29(0xc3)](a0_0x29fc29(0x9d),auth,async(_0x3b2843,_0x2063a8)=>{var _0x30696e=a0_0x29fc29;try{const _0x3ad5d8=_0x3b2843[_0x30696e(0xdc)]['id'];var _0x47c2fb=await sales_finished[_0x30696e(0xaf)](_0x3ad5d8);const _0x1cfcb9=await master_shop[_0x30696e(0xbd)](),_0x4d7e49=_0x3b2843[_0x30696e(0xe3)],_0x185f3a=await profile[_0x30696e(0xd7)]({'email':_0x4d7e49[_0x30696e(0xbc)]});if(_0x1cfcb9[0x0]['language']==_0x30696e(0xc6))var _0x5bebb0=users[_0x30696e(0x82)];else{if(_0x1cfcb9[0x0][_0x30696e(0x88)]==_0x30696e(0xc2))var _0x5bebb0=users[_0x30696e(0xc2)];else{if(_0x1cfcb9[0x0]['language']==_0x30696e(0xba))var _0x5bebb0=users[_0x30696e(0xba)];else{if(_0x1cfcb9[0x0][_0x30696e(0x88)]==_0x30696e(0xad))var _0x5bebb0=users[_0x30696e(0xad)];else{if(_0x1cfcb9[0x0][_0x30696e(0x88)]==_0x30696e(0x9b))var _0x5bebb0=users[_0x30696e(0x9b)];else{if(_0x1cfcb9[0x0][_0x30696e(0x88)]==_0x30696e(0xde))var _0x5bebb0=users[_0x30696e(0xb6)];else{if(_0x1cfcb9[0x0][_0x30696e(0x88)]==_0x30696e(0xc1))var _0x5bebb0=users[_0x30696e(0xc1)];else{if(_0x1cfcb9[0x0][_0x30696e(0x88)]==_0x30696e(0xa7))var _0x5bebb0=users[_0x30696e(0xa8)];}}}}}}}_0x2063a8[_0x30696e(0xe8)](_0x30696e(0xa3),{'success':_0x3b2843[_0x30696e(0xcf)]('success'),'errors':_0x3b2843[_0x30696e(0xcf)](_0x30696e(0xd1)),'master_shop':_0x1cfcb9,'profile':_0x185f3a,'role':_0x4d7e49,'language':_0x5bebb0,'data':_0x47c2fb});}catch(_0x609f0b){_0x2063a8[_0x30696e(0xa5)](_0x609f0b);}}),router['get'](a0_0x29fc29(0x8c),auth,async(_0x2fe173,_0x3df572)=>{var _0x240a2b=a0_0x29fc29;try{const _0x1139d3=_0x2fe173[_0x240a2b(0xdc)]['id'];var _0x315165=await transfers_finished['findById'](_0x1139d3);const _0x5bae11=await master_shop[_0x240a2b(0xbd)](),_0x49e723=_0x2fe173['user'],_0x335a54=await profile[_0x240a2b(0xd7)]({'email':_0x49e723['email']});if(_0x5bae11[0x0]['language']==_0x240a2b(0xc6))var _0x3b8830=users[_0x240a2b(0x82)];else{if(_0x5bae11[0x0][_0x240a2b(0x88)]=='Hindi')var _0x3b8830=users[_0x240a2b(0xc2)];else{if(_0x5bae11[0x0][_0x240a2b(0x88)]==_0x240a2b(0xba))var _0x3b8830=users['German'];else{if(_0x5bae11[0x0][_0x240a2b(0x88)]=='Spanish')var _0x3b8830=users[_0x240a2b(0xad)];else{if(_0x5bae11[0x0][_0x240a2b(0x88)]==_0x240a2b(0x9b))var _0x3b8830=users[_0x240a2b(0x9b)];else{if(_0x5bae11[0x0]['language']==_0x240a2b(0xde))var _0x3b8830=users[_0x240a2b(0xb6)];else{if(_0x5bae11[0x0][_0x240a2b(0x88)]==_0x240a2b(0xc1))var _0x3b8830=users[_0x240a2b(0xc1)];else{if(_0x5bae11[0x0][_0x240a2b(0x88)]==_0x240a2b(0xa7))var _0x3b8830=users['Arabic'];}}}}}}}_0x3df572[_0x240a2b(0xe8)](_0x240a2b(0x7b),{'success':_0x2fe173['flash'](_0x240a2b(0xc7)),'errors':_0x2fe173['flash'](_0x240a2b(0xd1)),'master_shop':_0x5bae11,'profile':_0x335a54,'role':_0x49e723,'language':_0x3b8830,'data':_0x315165});}catch(_0x9b437d){_0x3df572['json'](_0x9b437d);}}),router[a0_0x29fc29(0xc3)]('/viewFG',auth,async(_0x5191a9,_0x4974ff)=>{var _0x1f7702=a0_0x29fc29;try{const {username:_0x46296a,email:_0x2a1adb,role:_0x3f5027}=_0x5191a9[_0x1f7702(0xe3)],_0x3485df=_0x5191a9[_0x1f7702(0xe3)],_0x12cfc5=await profile[_0x1f7702(0xd7)]({'email':_0x3485df[_0x1f7702(0xbc)]}),_0x17b528=await master_shop[_0x1f7702(0xbd)](),_0x5c2206=await warehouse[_0x1f7702(0xd2)]([{'$match':{'status':_0x1f7702(0xe6),'warehouse_category':_0x1f7702(0xb8)}},{'$group':{'_id':_0x1f7702(0xca),'name':{'$first':_0x1f7702(0xca)}}}]);if(_0x17b528[0x0]['language']=='English\x20(US)')var _0x5ab00a=users['English'];else{if(_0x17b528[0x0]['language']==_0x1f7702(0xc2))var _0x5ab00a=users[_0x1f7702(0xc2)];else{if(_0x17b528[0x0][_0x1f7702(0x88)]=='German')var _0x5ab00a=users[_0x1f7702(0xba)];else{if(_0x17b528[0x0][_0x1f7702(0x88)]==_0x1f7702(0xad))var _0x5ab00a=users['Spanish'];else{if(_0x17b528[0x0]['language']=='French')var _0x5ab00a=users[_0x1f7702(0x9b)];else{if(_0x17b528[0x0][_0x1f7702(0x88)]==_0x1f7702(0xde))var _0x5ab00a=users[_0x1f7702(0xb6)];else{if(_0x17b528[0x0][_0x1f7702(0x88)]==_0x1f7702(0xc1))var _0x5ab00a=users[_0x1f7702(0xc1)];else{if(_0x17b528[0x0][_0x1f7702(0x88)]==_0x1f7702(0xa7))var _0x5ab00a=users[_0x1f7702(0xa8)];}}}}}}}_0x4974ff[_0x1f7702(0xe8)](_0x1f7702(0x8a),{'success':_0x5191a9['flash'](_0x1f7702(0xc7)),'errors':_0x5191a9[_0x1f7702(0xcf)](_0x1f7702(0xd1)),'role':_0x3485df,'profile':_0x12cfc5,'master_shop':_0x17b528,'dataProcess':_0x5c2206,'language':_0x5ab00a});}catch(_0x4738c6){console[_0x1f7702(0x91)](_0x4738c6);}}),module['exports']=router;