var a0_0x4239b7=a0_0x125b;(function(_0x547361,_0x1b5a12){var _0x36e6db=a0_0x125b,_0x2cb5cc=_0x547361();while(!![]){try{var _0x42139b=parseInt(_0x36e6db(0x1f3))/0x1*(parseInt(_0x36e6db(0x1c9))/0x2)+parseInt(_0x36e6db(0x1d5))/0x3*(parseInt(_0x36e6db(0x1f9))/0x4)+parseInt(_0x36e6db(0x20a))/0x5+parseInt(_0x36e6db(0x1e0))/0x6*(parseInt(_0x36e6db(0x20f))/0x7)+parseInt(_0x36e6db(0x231))/0x8+parseInt(_0x36e6db(0x220))/0x9*(parseInt(_0x36e6db(0x1ee))/0xa)+parseInt(_0x36e6db(0x230))/0xb*(-parseInt(_0x36e6db(0x1dd))/0xc);if(_0x42139b===_0x1b5a12)break;else _0x2cb5cc['push'](_0x2cb5cc['shift']());}catch(_0x16afaf){_0x2cb5cc['push'](_0x2cb5cc['shift']());}}}(a0_0x3e0d,0xa842b));const express=require('express'),app=express(),router=express[a0_0x4239b7(0x1e5)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x4239b7(0x1c6)),auth=require('../middleware/auth'),users=require(a0_0x4239b7(0x1f1));router['get'](a0_0x4239b7(0x1ff),auth,async(_0x13dfa5,_0x2ef85c)=>{var _0x2dd75a=a0_0x4239b7;try{const {username:_0x3e3a4f,email:_0x2fa7b7,role:_0x2814b7}=_0x13dfa5[_0x2dd75a(0x210)],_0x437424=_0x13dfa5['user'],_0x4b5a29=await profile[_0x2dd75a(0x1d1)]({'email':_0x437424['email']}),_0x51410a=await master_shop[_0x2dd75a(0x20c)](),_0x47050c=await sales_return_finished[_0x2dd75a(0x201)]([{'$lookup':{'from':'customers','localField':_0x2dd75a(0x1d6),'foreignField':'name','as':_0x2dd75a(0x1e7)}},{'$unwind':_0x2dd75a(0x1ed)}]);if(_0x51410a[0x0][_0x2dd75a(0x1de)]==_0x2dd75a(0x1fe)){var _0x227b55=users[_0x2dd75a(0x228)];console[_0x2dd75a(0x1d2)](_0x227b55);}else{if(_0x51410a[0x0]['language']==_0x2dd75a(0x1cd))var _0x227b55=users['Hindi'];else{if(_0x51410a[0x0][_0x2dd75a(0x1de)]==_0x2dd75a(0x1d7))var _0x227b55=users[_0x2dd75a(0x1d7)];else{if(_0x51410a[0x0][_0x2dd75a(0x1de)]=='Spanish')var _0x227b55=users[_0x2dd75a(0x205)];else{if(_0x51410a[0x0][_0x2dd75a(0x1de)]==_0x2dd75a(0x1db))var _0x227b55=users[_0x2dd75a(0x1db)];else{if(_0x51410a[0x0]['language']==_0x2dd75a(0x1ef))var _0x227b55=users['Portuguese'];else{if(_0x51410a[0x0][_0x2dd75a(0x1de)]=='Chinese')var _0x227b55=users['Chinese'];else{if(_0x51410a[0x0][_0x2dd75a(0x1de)]==_0x2dd75a(0x22e))var _0x227b55=users['Arabic'];}}}}}}}_0x2ef85c[_0x2dd75a(0x207)]('sales_return_finished',{'success':_0x13dfa5[_0x2dd75a(0x1d9)](_0x2dd75a(0x204)),'errors':_0x13dfa5[_0x2dd75a(0x1d9)]('errors'),'role':_0x437424,'profile':_0x4b5a29,'master_shop':_0x51410a,'user':_0x47050c,'language':_0x227b55});}catch(_0x302a3e){console[_0x2dd75a(0x1d2)](_0x302a3e);}}),router[a0_0x4239b7(0x209)](a0_0x4239b7(0x1da),auth,async(_0x2d36f0,_0x4a828a)=>{var _0x28defe=a0_0x4239b7;try{const {username:_0x1fcf24,email:_0x2964db,role:_0xe05d2b}=_0x2d36f0[_0x28defe(0x210)],_0x518733=_0x2d36f0[_0x28defe(0x210)],_0x1e9300=await profile[_0x28defe(0x1d1)]({'email':_0x518733[_0x28defe(0x223)]}),_0x31d0b5=await master_shop[_0x28defe(0x20c)]();console['log'](_0x28defe(0x1d3),_0x31d0b5);const _0x270887=_0x2d36f0[_0x28defe(0x21c)]['id'];console[_0x28defe(0x1d2)](_0x270887);var _0x3e532f=[_0x28defe(0x1fc)];const _0x5d4825=await sales_return_finished[_0x28defe(0x1c7)](_0x270887),_0x4eee37=await warehouse['aggregate']([{'$match':{'name':_0x5d4825[_0x28defe(0x21d)],'room':_0x5d4825['ToRoom']}},{'$unwind':_0x28defe(0x224)},{'$group':{'_id':_0x28defe(0x1fb),'name':{'$first':_0x28defe(0x1f0)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x28defe(0x236)},'type':{'$first':_0x28defe(0x1c4)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x28defe(0x215)},'secondary_code':{'$first':_0x28defe(0x23a)},'product_code':{'$first':_0x28defe(0x20d)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'}}}]);console[_0x28defe(0x1d2)](_0x4eee37);const _0x45f020=await warehouse[_0x28defe(0x201)]([{'$match':{'status':'Enabled','warehouse_category':_0x28defe(0x22c)}},{'$group':{'_id':_0x28defe(0x208),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x5051a2=await warehouse[_0x28defe(0x201)]([{'$match':{'status':'Enabled','name':_0x28defe(0x1e6)}},{'$group':{'_id':_0x28defe(0x208),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x4a604e=await product[_0x28defe(0x20c)]({});if(_0x31d0b5[0x0][_0x28defe(0x1de)]==_0x28defe(0x1fe)){var _0x113176=users[_0x28defe(0x228)];console['log'](_0x113176);}else{if(_0x31d0b5[0x0][_0x28defe(0x1de)]==_0x28defe(0x1cd))var _0x113176=users[_0x28defe(0x1cd)];else{if(_0x31d0b5[0x0][_0x28defe(0x1de)]==_0x28defe(0x1d7))var _0x113176=users['German'];else{if(_0x31d0b5[0x0][_0x28defe(0x1de)]==_0x28defe(0x205))var _0x113176=users[_0x28defe(0x205)];else{if(_0x31d0b5[0x0][_0x28defe(0x1de)]==_0x28defe(0x1db))var _0x113176=users[_0x28defe(0x1db)];else{if(_0x31d0b5[0x0][_0x28defe(0x1de)]=='Portuguese\x20(BR)')var _0x113176=users['Portuguese'];else{if(_0x31d0b5[0x0]['language']==_0x28defe(0x1e1))var _0x113176=users[_0x28defe(0x1e1)];else{if(_0x31d0b5[0x0]['language']==_0x28defe(0x22e))var _0x113176=users[_0x28defe(0x1e2)];}}}}}}}_0x4a828a[_0x28defe(0x207)](_0x28defe(0x1f2),{'success':_0x2d36f0[_0x28defe(0x1d9)](_0x28defe(0x204)),'errors':_0x2d36f0[_0x28defe(0x1d9)]('errors'),'role':_0x518733,'profile':_0x1e9300,'master_shop':_0x31d0b5,'user':_0x5d4825,'stock':_0x4eee37,'unit':_0x4a604e,'language':_0x113176,'warehouses':_0x45f020,'rooms':_0x3e532f,'warehouse_QA':_0x5051a2});}catch(_0x3881a5){console['log'](_0x3881a5);}}),router[a0_0x4239b7(0x1c5)]('/view/:id',auth,async(_0x5437a2,_0x167151)=>{var _0x11d6c3=a0_0x4239b7;if(_0x5437a2['body'][_0x11d6c3(0x227)]=='QA')try{const _0x1439f5=_0x5437a2[_0x11d6c3(0x21c)]['id'],_0xab7bdf=await sales_return[_0x11d6c3(0x1d1)]({'invoice':_0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x229)]}),_0x4c1a8b=await warehouse[_0x11d6c3(0x1d1)]({'name':_0xab7bdf['ToWarehouse'],'room':_0xab7bdf[_0x11d6c3(0x232)]}),{invoice:_0x20c369,customer:_0x3fa4e9,date:_0x2d0637,warehouse_name:_0x9d3d48,product_name:_0x7d958e,primary_code:_0x111ea0,secondary_code:_0x30055e,product_code:_0x2d1c13,sales_quantity:_0x35e4cd,stocks:_0x43b519,return_qty:_0x4b0fd4,note:_0x5a0d43,to_warehouse_name_QA:_0x3bbda4,to_Room_name_QA:_0x384731}=_0x5437a2[_0x11d6c3(0x211)];if(typeof product_name_QA==_0x11d6c3(0x237))var _0x39cd7e=[_0x5437a2['body'][_0x11d6c3(0x1cc)]],_0x572e7b=[_0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x1f5)]],_0x5b5ac5=[_0x5437a2[_0x11d6c3(0x211)]['secondary_code_QA']],_0x61b650=[_0x5437a2['body'][_0x11d6c3(0x1c8)]],_0x2af621=[_0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x214)]],_0x569a4d=[_0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x1d4)]],_0x26e1c6=[_0x5437a2['body'][_0x11d6c3(0x1cb)]];else var _0x39cd7e=[..._0x5437a2[_0x11d6c3(0x211)]['product_name_QA']],_0x572e7b=[..._0x5437a2[_0x11d6c3(0x211)]['primary_code_QA']],_0x5b5ac5=[..._0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x1e3)]],_0x61b650=[..._0x5437a2['body'][_0x11d6c3(0x1c8)]],_0x2af621=[..._0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x214)]],_0x569a4d=[..._0x5437a2['body']['stocks_QA']],_0x26e1c6=[..._0x5437a2['body'][_0x11d6c3(0x1cb)]];const _0x5937ac=_0x39cd7e['map'](_0x2973c1=>{return _0x2973c1={'product_name':_0x2973c1};});_0x572e7b[_0x11d6c3(0x222)]((_0x2bf7fc,_0xd5f42e)=>{_0x5937ac[_0xd5f42e]['primary_code']=_0x2bf7fc;}),_0x5b5ac5[_0x11d6c3(0x222)]((_0x1f8e9d,_0x52c266)=>{_0x5937ac[_0x52c266]['secondary_code']=_0x1f8e9d;}),_0x61b650[_0x11d6c3(0x222)]((_0x5e8318,_0x122491)=>{var _0x2cbe87=_0x11d6c3;_0x5937ac[_0x122491][_0x2cbe87(0x22b)]=_0x5e8318;}),_0x2af621['forEach']((_0xdc1332,_0x265cb1)=>{_0x5937ac[_0x265cb1]['sale_qty']=_0xdc1332;}),_0x569a4d[_0x11d6c3(0x222)]((_0x35b8d3,_0x1f974b)=>{var _0xbb0d73=_0x11d6c3;_0x5937ac[_0x1f974b][_0xbb0d73(0x203)]=_0x35b8d3;}),_0x26e1c6[_0x11d6c3(0x222)]((_0x49e7a8,_0x1b62bd)=>{var _0x3afc09=_0x11d6c3;_0x5937ac[_0x1b62bd][_0x3afc09(0x22f)]=_0x49e7a8;}),_0xab7bdf['return_sale_QA'][_0x11d6c3(0x222)](_0x4a7f95=>{var _0x2effb5=_0x11d6c3;const _0x392e7a=_0x4c1a8b[_0x2effb5(0x235)][_0x2effb5(0x1df)](_0x173f06=>{var _0x1e106e=_0x2effb5;_0x173f06[_0x1e106e(0x21f)]==_0x4a7f95[_0x1e106e(0x21f)]&&(_0x173f06[_0x1e106e(0x212)]=parseInt(_0x173f06[_0x1e106e(0x212)])+parseInt(_0x4a7f95[_0x1e106e(0x22f)]));});}),await _0x4c1a8b[_0x11d6c3(0x1d0)](),_0xab7bdf['invoice']=_0x20c369,_0xab7bdf[_0x11d6c3(0x1d6)]=_0x3fa4e9,_0xab7bdf[_0x11d6c3(0x217)]=_0x2d0637,_0xab7bdf[_0x11d6c3(0x1ce)]=_0x9d3d48,_0xab7bdf[_0x11d6c3(0x20b)]=_0x5937ac,_0xab7bdf[_0x11d6c3(0x206)]=_0x5a0d43,_0xab7bdf[_0x11d6c3(0x21d)]=_0x3bbda4,_0xab7bdf[_0x11d6c3(0x232)]=_0x384731;const _0xc23d44=await _0xab7bdf['save'](),_0x3204c5=await c_payment_data[_0x11d6c3(0x1d1)]({'invoice':_0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x229)],'reason':_0x11d6c3(0x21e)});_0x3204c5[_0x11d6c3(0x1cf)]=_0x5437a2['body'][_0x11d6c3(0x1cf)],_0x3204c5[_0x11d6c3(0x217)]=_0x5437a2['body'][_0x11d6c3(0x217)],await _0x3204c5[_0x11d6c3(0x1d0)](),_0x5437a2['flash'](_0x11d6c3(0x204),_0x11d6c3(0x1ea)),_0x167151[_0x11d6c3(0x221)]('/sales_return_finished/view');}catch(_0x871911){console[_0x11d6c3(0x1d2)](_0x871911),_0x167151[_0x11d6c3(0x22d)](0xc8)[_0x11d6c3(0x1fa)]({'message':_0x871911['message']});}else try{const _0x175bd7=_0x5437a2['params']['id'];console['log'](_0x175bd7);const _0x369bcf=await sales_return[_0x11d6c3(0x1d1)]({'invoice':_0x5437a2['body']['invoice']});console['log']('old_data',_0x369bcf);const _0x960c59=await warehouse[_0x11d6c3(0x1d1)]({'name':_0x369bcf[_0x11d6c3(0x21d)],'room':_0x369bcf[_0x11d6c3(0x232)]});console[_0x11d6c3(0x1d2)](_0x11d6c3(0x22a),_0x960c59);const {invoice:_0x940756,customer:_0x50566b,date:_0x111a05,warehouse_name:_0x4eec6d,product_name:_0x120d98,primary_code:_0x40eeb0,secondary_code:_0x1ee8ff,product_code:_0x528b22,sales_quantity:_0x5b0c90,stocks:_0x29e032,return_qty:_0x18652c,note:_0x4456bc,to_warehouse_name:_0x524d04,to_Room_name:_0x10abd2}=_0x5437a2[_0x11d6c3(0x211)];console['log'](_0x5437a2[_0x11d6c3(0x211)]);if(typeof _0x120d98==_0x11d6c3(0x237))var _0x39cd7e=[_0x5437a2['body']['product_name']],_0x572e7b=[_0x5437a2[_0x11d6c3(0x211)]['primary_code']],_0x5b5ac5=[_0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x1e8)]],_0x61b650=[_0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x22b)]],_0x2af621=[_0x5437a2[_0x11d6c3(0x211)]['sales_quantity']],_0x569a4d=[_0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x234)]],_0x26e1c6=[_0x5437a2['body'][_0x11d6c3(0x22f)]],_0x4ef085=[_0x5437a2['body'][_0x11d6c3(0x200)]],_0x5be642=[_0x5437a2['body']['bin']],_0x6d15f1=[_0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x1f4)]],_0x42d0b0=[_0x5437a2['body']['floorlevel']];else var _0x39cd7e=[..._0x5437a2['body'][_0x11d6c3(0x21f)]],_0x572e7b=[..._0x5437a2['body'][_0x11d6c3(0x1dc)]],_0x5b5ac5=[..._0x5437a2['body'][_0x11d6c3(0x1e8)]],_0x61b650=[..._0x5437a2['body']['product_code']],_0x2af621=[..._0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x1eb)]],_0x569a4d=[..._0x5437a2[_0x11d6c3(0x211)]['stocks']],_0x26e1c6=[..._0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x22f)]],_0x4ef085=[..._0x5437a2['body']['bay']],_0x5be642=[..._0x5437a2['body'][_0x11d6c3(0x23b)]],_0x6d15f1=[..._0x5437a2[_0x11d6c3(0x211)]['types']],_0x42d0b0=[..._0x5437a2[_0x11d6c3(0x211)]['floorlevel']];const _0x3c44ba=_0x39cd7e[_0x11d6c3(0x1df)](_0x117739=>{return _0x117739={'product_name':_0x117739};});_0x572e7b[_0x11d6c3(0x222)]((_0x43432a,_0x2bad78)=>{_0x3c44ba[_0x2bad78]['primary_code']=_0x43432a;}),_0x5b5ac5['forEach']((_0x5ead83,_0x223a6b)=>{var _0x17184e=_0x11d6c3;_0x3c44ba[_0x223a6b][_0x17184e(0x1e8)]=_0x5ead83;}),_0x61b650['forEach']((_0x2ebd54,_0xdab7fd)=>{var _0x5392dc=_0x11d6c3;_0x3c44ba[_0xdab7fd][_0x5392dc(0x22b)]=_0x2ebd54;}),_0x2af621[_0x11d6c3(0x222)]((_0x391fdf,_0x36a7be)=>{var _0x17a2fd=_0x11d6c3;_0x3c44ba[_0x36a7be][_0x17a2fd(0x21a)]=_0x391fdf;}),_0x569a4d[_0x11d6c3(0x222)]((_0x516f3d,_0x322317)=>{var _0xe4e87b=_0x11d6c3;_0x3c44ba[_0x322317][_0xe4e87b(0x203)]=_0x516f3d;}),_0x26e1c6[_0x11d6c3(0x222)]((_0xf92472,_0x48cc9a)=>{var _0x37bd2e=_0x11d6c3;_0x3c44ba[_0x48cc9a][_0x37bd2e(0x22f)]=_0xf92472;}),_0x4ef085[_0x11d6c3(0x222)]((_0x3df414,_0x575aca)=>{_0x3c44ba[_0x575aca]['bay']=_0x3df414;}),_0x5be642['forEach']((_0x1e405b,_0x5001e8)=>{_0x3c44ba[_0x5001e8]['bin']=_0x1e405b;}),_0x6d15f1[_0x11d6c3(0x222)]((_0x1de0f6,_0xd5647f)=>{_0x3c44ba[_0xd5647f]['type']=_0x1de0f6;}),_0x42d0b0[_0x11d6c3(0x222)]((_0x4a7d09,_0x56e62e)=>{var _0x12e239=_0x11d6c3;_0x3c44ba[_0x56e62e][_0x12e239(0x1e9)]=_0x4a7d09;});var _0x51c5e2=0x0;_0x3c44ba[_0x11d6c3(0x222)](_0x3bf9dd=>{var _0x39797c=_0x11d6c3;console['log'](_0x39797c(0x1e4),_0x3bf9dd),(parseInt(_0x3bf9dd[_0x39797c(0x21a)])<parseInt(_0x3bf9dd[_0x39797c(0x22f)])||parseInt(_0x3bf9dd[_0x39797c(0x203)])<parseInt(_0x3bf9dd['return_qty'])&&parseInt(_0x3bf9dd[_0x39797c(0x21a)])>parseInt(_0x3bf9dd[_0x39797c(0x22f)])||parseInt(_0x3bf9dd['return_qty'])==0x0)&&_0x51c5e2++;});if(_0x51c5e2!=0x0)return _0x5437a2[_0x11d6c3(0x1d9)]('errors','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty'),_0x167151['redirect'](_0x11d6c3(0x1fd));_0x369bcf[_0x11d6c3(0x1ca)][_0x11d6c3(0x222)](_0xc95a57=>{var _0x25879b=_0x11d6c3;const _0x18f729=_0x960c59['product_details'][_0x25879b(0x1df)](_0x2967c6=>{var _0x3e0141=_0x25879b;_0x2967c6[_0x3e0141(0x21f)]==_0xc95a57[_0x3e0141(0x21f)]&&_0x2967c6['floorlevel']==_0xc95a57['floorlevel']&&_0x2967c6[_0x3e0141(0x1f6)]==_0xc95a57[_0x3e0141(0x1f6)]&&_0x2967c6[_0x3e0141(0x23b)]==_0xc95a57[_0x3e0141(0x23b)]&&_0x2967c6[_0x3e0141(0x200)]==_0xc95a57[_0x3e0141(0x200)]&&(_0x2967c6[_0x3e0141(0x212)]=parseInt(_0x2967c6[_0x3e0141(0x212)])+parseInt(_0xc95a57[_0x3e0141(0x22f)]));});}),console['log'](_0x11d6c3(0x22a),_0x960c59),await _0x960c59[_0x11d6c3(0x1d0)](),_0x369bcf[_0x11d6c3(0x229)]=_0x940756,_0x369bcf[_0x11d6c3(0x1d6)]=_0x50566b,_0x369bcf['date']=_0x111a05,_0x369bcf['warehouse_name']=_0x4eec6d,_0x369bcf[_0x11d6c3(0x1ca)]=_0x3c44ba,_0x369bcf[_0x11d6c3(0x206)]=_0x4456bc,_0x369bcf['ToWarehouse']=_0x524d04,_0x369bcf[_0x11d6c3(0x232)]=_0x10abd2;const _0x1e122f=await _0x369bcf['save']();console[_0x11d6c3(0x1d2)](_0x11d6c3(0x238),_0x1e122f);const _0x11588b=await c_payment_data[_0x11d6c3(0x1d1)]({'invoice':_0x5437a2['body'][_0x11d6c3(0x229)],'reason':_0x11d6c3(0x21e)});_0x11588b[_0x11d6c3(0x1cf)]=_0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x1cf)],_0x11588b[_0x11d6c3(0x217)]=_0x5437a2[_0x11d6c3(0x211)][_0x11d6c3(0x217)],await _0x11588b[_0x11d6c3(0x1d0)](),_0x5437a2[_0x11d6c3(0x1d9)](_0x11d6c3(0x204),_0x11d6c3(0x1ea)),_0x167151[_0x11d6c3(0x221)](_0x11d6c3(0x21b));}catch(_0x2adeaf){console[_0x11d6c3(0x1d2)](_0x2adeaf),_0x167151[_0x11d6c3(0x22d)](0xc8)[_0x11d6c3(0x1fa)]({'message':_0x2adeaf[_0x11d6c3(0x1f7)]});}}),router['post']('/give_payment/:id',auth,async(_0x30cdf8,_0x5731d2)=>{var _0x1e4e53=a0_0x4239b7;try{const _0x885eb8=_0x30cdf8[_0x1e4e53(0x21c)]['id'],{invoice:_0x1ba4c3,customer:_0x408438,payable_to_customer:_0x49b84a,paid_amount:_0x492db2}=_0x30cdf8['body'],_0x4f0f3a=await sales_return[_0x1e4e53(0x1c7)](_0x885eb8);console[_0x1e4e53(0x1d2)]('data',_0x4f0f3a),console[_0x1e4e53(0x1d2)](_0x49b84a),console['log'](_0x492db2);var _0x5afd52=_0x49b84a-_0x492db2;console[_0x1e4e53(0x1d2)](_0x1e4e53(0x239),_0x5afd52),_0x4f0f3a[_0x1e4e53(0x226)]=parseFloat(_0x492db2)+parseFloat(_0x4f0f3a[_0x1e4e53(0x226)]),_0x4f0f3a['due_amount']=_0x5afd52,console[_0x1e4e53(0x1d2)](_0x4f0f3a);const _0x865f53=await _0x4f0f3a[_0x1e4e53(0x1d0)]();console[_0x1e4e53(0x1d2)](0x1b207);const _0x3324fd=await c_payment_data[_0x1e4e53(0x1d1)]({'invoice':_0x30cdf8[_0x1e4e53(0x211)][_0x1e4e53(0x229)],'reason':_0x1e4e53(0x21e)});console[_0x1e4e53(0x1d2)](_0x1e4e53(0x216),_0x3324fd),_0x3324fd[_0x1e4e53(0x202)]=_0x5afd52,await _0x3324fd[_0x1e4e53(0x1d0)]();let _0x1e9709=new Date(),_0x28c5ed=('0'+_0x1e9709[_0x1e4e53(0x219)]())[_0x1e4e53(0x1c3)](-0x2),_0xde0459=('0'+(_0x1e9709[_0x1e4e53(0x20e)]()+0x1))[_0x1e4e53(0x1c3)](-0x2),_0x543f52=_0x1e9709[_0x1e4e53(0x1f8)](),_0x539cba=_0x543f52+'-'+_0xde0459+'-'+_0x28c5ed;const _0x1f99c2=new customer_payment({'invoice':_0x1ba4c3,'date':_0x543f52+'-'+_0xde0459+'-'+_0x28c5ed,'customer':_0x408438,'reason':_0x1e4e53(0x225),'amount':_0x492db2}),_0x3f2dc3=await _0x1f99c2[_0x1e4e53(0x1d0)]();_0x30cdf8['flash']('success',_0x1e4e53(0x213)),_0x5731d2['redirect']('/sales_return/view');}catch(_0x5f3a74){console[_0x1e4e53(0x1d2)](_0x5f3a74);}}),router[a0_0x4239b7(0x209)](a0_0x4239b7(0x218),auth,async(_0x341261,_0x26117b)=>{var _0x1f2d6e=a0_0x4239b7;try{const {username:_0x2c971b,email:_0x450d39,role:_0x23d4c5}=_0x341261[_0x1f2d6e(0x210)],_0x43b46d=_0x341261[_0x1f2d6e(0x210)],_0x496ee9=await profile[_0x1f2d6e(0x1d1)]({'email':_0x43b46d['email']}),_0x20bcdb=await master_shop[_0x1f2d6e(0x20c)]();console[_0x1f2d6e(0x1d2)](_0x1f2d6e(0x1d3),_0x20bcdb);const _0x4f77b8=_0x341261[_0x1f2d6e(0x21c)]['id'],_0x40f0da=await sales_return['findById'](_0x4f77b8);console['log'](_0x40f0da);const _0x1b3ca9=await customer[_0x1f2d6e(0x1d1)]({'name':_0x40f0da[_0x1f2d6e(0x1d6)]});console[_0x1f2d6e(0x1d2)](_0x1b3ca9);if(_0x20bcdb[0x0][_0x1f2d6e(0x1de)]=='English\x20(US)'){var _0x1f3213=users[_0x1f2d6e(0x228)];console[_0x1f2d6e(0x1d2)](_0x1f3213);}else{if(_0x20bcdb[0x0][_0x1f2d6e(0x1de)]==_0x1f2d6e(0x1cd))var _0x1f3213=users['Hindi'];else{if(_0x20bcdb[0x0][_0x1f2d6e(0x1de)]==_0x1f2d6e(0x1d7))var _0x1f3213=users[_0x1f2d6e(0x1d7)];else{if(_0x20bcdb[0x0][_0x1f2d6e(0x1de)]==_0x1f2d6e(0x205))var _0x1f3213=users[_0x1f2d6e(0x205)];else{if(_0x20bcdb[0x0][_0x1f2d6e(0x1de)]==_0x1f2d6e(0x1db))var _0x1f3213=users['French'];else{if(_0x20bcdb[0x0]['language']==_0x1f2d6e(0x1ef))var _0x1f3213=users[_0x1f2d6e(0x1ec)];else{if(_0x20bcdb[0x0][_0x1f2d6e(0x1de)]==_0x1f2d6e(0x1e1))var _0x1f3213=users[_0x1f2d6e(0x1e1)];else{if(_0x20bcdb[0x0]['language']==_0x1f2d6e(0x22e))var _0x1f3213=users[_0x1f2d6e(0x1e2)];}}}}}}}_0x26117b[_0x1f2d6e(0x207)](_0x1f2d6e(0x1d8),{'success':_0x341261[_0x1f2d6e(0x1d9)](_0x1f2d6e(0x204)),'errors':_0x341261[_0x1f2d6e(0x1d9)](_0x1f2d6e(0x233)),'role':_0x43b46d,'profile':_0x496ee9,'master_shop':_0x20bcdb,'customers':_0x1b3ca9,'sales':_0x40f0da,'language':_0x1f3213});}catch(_0xde218e){console['log'](_0xde218e);}}),module['exports']=router;function a0_0x125b(_0x20b5f8,_0xb85190){var _0x3e0d35=a0_0x3e0d();return a0_0x125b=function(_0x125b90,_0x4ef8f1){_0x125b90=_0x125b90-0x1c3;var _0x200964=_0x3e0d35[_0x125b90];return _0x200964;},a0_0x125b(_0x20b5f8,_0xb85190);}function a0_0x3e0d(){var _0x2df6d9=['user','body','product_stock','payment\x20successfull','sales_quantity_QA','$product_details.primary_code','c_payment','date','/invoice/:id','getDate','sale_qty','/sales_return/view','params','ToWarehouse','Sale\x20Return','product_name','238311ekDplO','redirect','forEach','email','$product_details','Returned\x20Payment\x20For\x20Sale\x20Return','paid_amount','for_categorize','English','invoice','old_warehouse_data','product_code','Finished\x20Goods','status','Arabic\x20(ae)','return_qty','44671XSKsyQ','3185168yBFrLh','ToRoom','errors','stocks','product_details','$product_details.bin','string','new\x20new_data','subtract','$product_details.secondary_code','bin','slice','$product_details.type','post','../models/all_models','findById','product_code_QA','3074QfiwZg','return_sale','return_qty_QA','product_name_QA','Hindi','warehouse_name','suppliers','save','findOne','log','master','stocks_QA','2553FHIXKb','customer','German','sales_return_invoice','flash','/view/:id','French','primary_code','12576OzbqAT','language','map','30ofRvoz','Chinese','Arabic','secondary_code_QA','foreach\x20newproduct','Router','QA\x20Warehouse','customer_docs','secondary_code','floorlevel','purchase\x20return\x20successfully','sales_quantity','Portuguese','$customer_docs','40GCboSg','Portuguese\x20(BR)','$product_details.product_name','../public/language/languages.json','return_sale_edit_finished','610bzZcan','types','primary_code_QA','type','message','getFullYear','4684pTVqYS','json','$product_details._id','Return\x20Rooms','back','English\x20(US)','/view','bay','aggregate','amount','stock','success','Spanish','note','render','$name','get','6248475pqTMgl','return_sale_QA','find','$product_details.product_code','getMonth','1760185SLWCQG'];a0_0x3e0d=function(){return _0x2df6d9;};return a0_0x3e0d();}