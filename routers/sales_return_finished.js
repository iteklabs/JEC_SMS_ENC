function a0_0x2ca2(){var _0x2805d4=['json','email','c_payment','render','$customer_docs','French','90CLSkHM','product_stock','product_name_QA','post','Router','amount','slice','Chinese','/view','purchase\x20return\x20successfully','4fzkodD','secondary_code_QA','Portuguese','new\x20new_data','message','invoice','redirect','$product_details.product_code','old_data','/view/:id','$product_details.product_stock','1055416DFVmFG','flash','product_code','Spanish','map','return_qty_QA','../models/all_models','string','$name','Finished\x20Goods','sales_quantity_QA','948911vBAXFk','return_qty','Arabic\x20(ae)','exports','floorlevel','save','getDate','findOne','ToWarehouse','product_name','findById','product_code_QA','customers','stock','back','secondary_code','Portuguese\x20(BR)','primary_code','find','2502666RkdVCj','old_warehouse_data','customer_docs','stocks','$product_details.rack','aggregate','suppliers','primary_code_QA','3163359jHdZEp','data','getMonth','master','$product_details.bin','customer','type','$product_details.type','/sales_return/view','params','Return\x20Rooms','errors','/give_payment/:id','$product_details.floorlevel','Returned\x20Payment\x20For\x20Sale\x20Return','$product_details.storage','$product_details.product_name','subtract','$product_details.bay','6846670BIWIcH','QA\x20Warehouse','user','ToRoom','success','English','status','German','1923130vnCbwK','63PiCTBy','express','for_categorize','return_sale_edit_finished','stocks_QA','return_sale_QA','/invoice/:id','Sale\x20Return','bay','Enabled','English\x20(US)','$product_details.secondary_code','body','Hindi','forEach','note','log','Arabic','foreach\x20newproduct','return_sale','date','types','warehouse_name','../middleware/auth','1551195iDkjos','bin','$product_details._id','language','paid_amount','$product_details.primary_code','$product_details','get','sale_qty'];a0_0x2ca2=function(){return _0x2805d4;};return a0_0x2ca2();}var a0_0x5e19bf=a0_0x4a2a;(function(_0x11419e,_0x11d171){var _0x4b28e3=a0_0x4a2a,_0x3ca106=_0x11419e();while(!![]){try{var _0x35e9d=-parseInt(_0x4b28e3(0x1e0))/0x1+-parseInt(_0x4b28e3(0x216))/0x2+parseInt(_0x4b28e3(0x1fb))/0x3*(parseInt(_0x4b28e3(0x1ca))/0x4)+-parseInt(_0x4b28e3(0x20e))/0x5+parseInt(_0x4b28e3(0x1f3))/0x6+-parseInt(_0x4b28e3(0x217))/0x7*(-parseInt(_0x4b28e3(0x1d5))/0x8)+-parseInt(_0x4b28e3(0x22f))/0x9*(-parseInt(_0x4b28e3(0x1c0))/0xa);if(_0x35e9d===_0x11d171)break;else _0x3ca106['push'](_0x3ca106['shift']());}catch(_0x2195f7){_0x3ca106['push'](_0x3ca106['shift']());}}}(a0_0x2ca2,0xe31f4));function a0_0x4a2a(_0x115990,_0x160fc4){var _0x2ca266=a0_0x2ca2();return a0_0x4a2a=function(_0x4a2a7e,_0x415b34){_0x4a2a7e=_0x4a2a7e-0x1b5;var _0x390786=_0x2ca266[_0x4a2a7e];return _0x390786;},a0_0x4a2a(_0x115990,_0x160fc4);}const express=require(a0_0x5e19bf(0x218)),app=express(),router=express[a0_0x5e19bf(0x1c4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x5e19bf(0x1db)),auth=require(a0_0x5e19bf(0x22e)),users=require('../public/language/languages.json');router['get'](a0_0x5e19bf(0x1c8),auth,async(_0x1c12f3,_0x4e7471)=>{var _0x16a651=a0_0x5e19bf;try{const {username:_0x12e08e,email:_0x2d425,role:_0x2dd18b}=_0x1c12f3[_0x16a651(0x210)],_0x298fef=_0x1c12f3['user'],_0x73f19c=await profile[_0x16a651(0x1e7)]({'email':_0x298fef['email']}),_0x11c92b=await master_shop[_0x16a651(0x1f2)](),_0x5871df=await sales_return_finished[_0x16a651(0x1f8)]([{'$lookup':{'from':_0x16a651(0x1ec),'localField':_0x16a651(0x200),'foreignField':'name','as':_0x16a651(0x1f5)}},{'$unwind':_0x16a651(0x1be)}]);if(_0x11c92b[0x0][_0x16a651(0x232)]==_0x16a651(0x221)){var _0x3d2836=users[_0x16a651(0x213)];console['log'](_0x3d2836);}else{if(_0x11c92b[0x0][_0x16a651(0x232)]==_0x16a651(0x224))var _0x3d2836=users[_0x16a651(0x224)];else{if(_0x11c92b[0x0][_0x16a651(0x232)]==_0x16a651(0x215))var _0x3d2836=users[_0x16a651(0x215)];else{if(_0x11c92b[0x0][_0x16a651(0x232)]=='Spanish')var _0x3d2836=users['Spanish'];else{if(_0x11c92b[0x0][_0x16a651(0x232)]==_0x16a651(0x1bf))var _0x3d2836=users[_0x16a651(0x1bf)];else{if(_0x11c92b[0x0]['language']=='Portuguese\x20(BR)')var _0x3d2836=users[_0x16a651(0x1cc)];else{if(_0x11c92b[0x0][_0x16a651(0x232)]=='Chinese')var _0x3d2836=users[_0x16a651(0x1c7)];else{if(_0x11c92b[0x0][_0x16a651(0x232)]==_0x16a651(0x1e2))var _0x3d2836=users[_0x16a651(0x228)];}}}}}}}_0x4e7471[_0x16a651(0x1bd)]('sales_return_finished',{'success':_0x1c12f3[_0x16a651(0x1d6)](_0x16a651(0x212)),'errors':_0x1c12f3[_0x16a651(0x1d6)](_0x16a651(0x206)),'role':_0x298fef,'profile':_0x73f19c,'master_shop':_0x11c92b,'user':_0x5871df,'language':_0x3d2836});}catch(_0xc022a6){console['log'](_0xc022a6);}}),router[a0_0x5e19bf(0x1b8)](a0_0x5e19bf(0x1d3),auth,async(_0x3c5409,_0x172d06)=>{var _0x247fd4=a0_0x5e19bf;try{const {username:_0x2cd343,email:_0x220762,role:_0x33687f}=_0x3c5409[_0x247fd4(0x210)],_0x2eb366=_0x3c5409['user'],_0x4f042d=await profile['findOne']({'email':_0x2eb366[_0x247fd4(0x1bb)]}),_0x265e31=await master_shop[_0x247fd4(0x1f2)]();console['log'](_0x247fd4(0x1fe),_0x265e31);const _0x59603d=_0x3c5409[_0x247fd4(0x204)]['id'];console[_0x247fd4(0x227)](_0x59603d);var _0x1b4f10=[_0x247fd4(0x205)];const _0xcf3363=await sales_return_finished[_0x247fd4(0x1ea)](_0x59603d),_0x34626b=await warehouse[_0x247fd4(0x1f8)]([{'$match':{'name':_0xcf3363[_0x247fd4(0x1e8)],'room':_0xcf3363[_0x247fd4(0x211)]}},{'$unwind':_0x247fd4(0x1b7)},{'$group':{'_id':_0x247fd4(0x231),'name':{'$first':_0x247fd4(0x20b)},'product_stock':{'$first':_0x247fd4(0x1d4)},'bay':{'$first':_0x247fd4(0x20d)},'bin':{'$first':_0x247fd4(0x1ff)},'type':{'$first':_0x247fd4(0x202)},'floorlevel':{'$first':_0x247fd4(0x208)},'primary_code':{'$first':_0x247fd4(0x1b6)},'secondary_code':{'$first':_0x247fd4(0x222)},'product_code':{'$first':_0x247fd4(0x1d1)},'storage':{'$first':_0x247fd4(0x20a)},'rack':{'$first':_0x247fd4(0x1f7)}}}]);console[_0x247fd4(0x227)](_0x34626b);const _0x1a00b7=await warehouse[_0x247fd4(0x1f8)]([{'$match':{'status':_0x247fd4(0x220),'warehouse_category':_0x247fd4(0x1de)}},{'$group':{'_id':_0x247fd4(0x1dd),'name':{'$first':_0x247fd4(0x1dd)}}},{'$sort':{'name':0x1}}]),_0x562d9a=await warehouse[_0x247fd4(0x1f8)]([{'$match':{'status':_0x247fd4(0x220),'name':_0x247fd4(0x20f)}},{'$group':{'_id':_0x247fd4(0x1dd),'name':{'$first':_0x247fd4(0x1dd)}}},{'$sort':{'name':0x1}}]),_0x5aec1a=await product[_0x247fd4(0x1f2)]({});if(_0x265e31[0x0][_0x247fd4(0x232)]==_0x247fd4(0x221)){var _0x20072c=users['English'];console['log'](_0x20072c);}else{if(_0x265e31[0x0]['language']=='Hindi')var _0x20072c=users['Hindi'];else{if(_0x265e31[0x0][_0x247fd4(0x232)]=='German')var _0x20072c=users['German'];else{if(_0x265e31[0x0][_0x247fd4(0x232)]=='Spanish')var _0x20072c=users['Spanish'];else{if(_0x265e31[0x0][_0x247fd4(0x232)]==_0x247fd4(0x1bf))var _0x20072c=users[_0x247fd4(0x1bf)];else{if(_0x265e31[0x0]['language']==_0x247fd4(0x1f0))var _0x20072c=users[_0x247fd4(0x1cc)];else{if(_0x265e31[0x0][_0x247fd4(0x232)]==_0x247fd4(0x1c7))var _0x20072c=users['Chinese'];else{if(_0x265e31[0x0][_0x247fd4(0x232)]==_0x247fd4(0x1e2))var _0x20072c=users[_0x247fd4(0x228)];}}}}}}}_0x172d06[_0x247fd4(0x1bd)](_0x247fd4(0x21a),{'success':_0x3c5409[_0x247fd4(0x1d6)](_0x247fd4(0x212)),'errors':_0x3c5409[_0x247fd4(0x1d6)](_0x247fd4(0x206)),'role':_0x2eb366,'profile':_0x4f042d,'master_shop':_0x265e31,'user':_0xcf3363,'stock':_0x34626b,'unit':_0x5aec1a,'language':_0x20072c,'warehouses':_0x1a00b7,'rooms':_0x1b4f10,'warehouse_QA':_0x562d9a});}catch(_0x57fdfc){console[_0x247fd4(0x227)](_0x57fdfc);}}),router[a0_0x5e19bf(0x1c3)](a0_0x5e19bf(0x1d3),auth,async(_0xe5f180,_0x3eb355)=>{var _0x12d0f9=a0_0x5e19bf;if(_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x219)]=='QA')try{const _0x4696af=_0xe5f180[_0x12d0f9(0x204)]['id'],_0x584aff=await sales_return[_0x12d0f9(0x1e7)]({'invoice':_0xe5f180['body'][_0x12d0f9(0x1cf)]}),_0x5dc759=await warehouse[_0x12d0f9(0x1e7)]({'name':_0x584aff[_0x12d0f9(0x1e8)],'room':_0x584aff[_0x12d0f9(0x211)]}),{invoice:_0x453337,customer:_0x1271ec,date:_0x22afc9,warehouse_name:_0x3837e6,product_name:_0x1b3129,primary_code:_0x20c5ae,secondary_code:_0x5de081,product_code:_0x153960,sales_quantity:_0x501aaf,stocks:_0x5712ea,return_qty:_0x49b177,note:_0x47b4e7,to_warehouse_name_QA:_0x3634e0,to_Room_name_QA:_0x2f33e4}=_0xe5f180[_0x12d0f9(0x223)];if(typeof product_name_QA==_0x12d0f9(0x1dc))var _0x1cf694=[_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1c2)]],_0x5a5e94=[_0xe5f180['body'][_0x12d0f9(0x1fa)]],_0x1aa3c0=[_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1cb)]],_0x4bda89=[_0xe5f180['body'][_0x12d0f9(0x1eb)]],_0x201e4b=[_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1df)]],_0x4b46ed=[_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x21b)]],_0x263135=[_0xe5f180[_0x12d0f9(0x223)]['return_qty_QA']];else var _0x1cf694=[..._0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1c2)]],_0x5a5e94=[..._0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1fa)]],_0x1aa3c0=[..._0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1cb)]],_0x4bda89=[..._0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1eb)]],_0x201e4b=[..._0xe5f180[_0x12d0f9(0x223)]['sales_quantity_QA']],_0x4b46ed=[..._0xe5f180[_0x12d0f9(0x223)]['stocks_QA']],_0x263135=[..._0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1da)]];const _0x4c90d8=_0x1cf694[_0x12d0f9(0x1d9)](_0x50aa2f=>{return _0x50aa2f={'product_name':_0x50aa2f};});_0x5a5e94[_0x12d0f9(0x225)]((_0x3945a5,_0x38c35d)=>{var _0xa0e8ae=_0x12d0f9;_0x4c90d8[_0x38c35d][_0xa0e8ae(0x1f1)]=_0x3945a5;}),_0x1aa3c0[_0x12d0f9(0x225)]((_0x11a402,_0x3b0c5d)=>{var _0x5a351e=_0x12d0f9;_0x4c90d8[_0x3b0c5d][_0x5a351e(0x1ef)]=_0x11a402;}),_0x4bda89[_0x12d0f9(0x225)]((_0x4bdb35,_0x4baf33)=>{var _0x22d492=_0x12d0f9;_0x4c90d8[_0x4baf33][_0x22d492(0x1d7)]=_0x4bdb35;}),_0x201e4b[_0x12d0f9(0x225)]((_0x35e96d,_0xdbae4c)=>{var _0x11e87e=_0x12d0f9;_0x4c90d8[_0xdbae4c][_0x11e87e(0x1b9)]=_0x35e96d;}),_0x4b46ed[_0x12d0f9(0x225)]((_0x28a137,_0x3e9fcd)=>{var _0x4c78d8=_0x12d0f9;_0x4c90d8[_0x3e9fcd][_0x4c78d8(0x1ed)]=_0x28a137;}),_0x263135['forEach']((_0xa6fd2a,_0x4a89e3)=>{var _0x5efe99=_0x12d0f9;_0x4c90d8[_0x4a89e3][_0x5efe99(0x1e1)]=_0xa6fd2a;}),_0x584aff[_0x12d0f9(0x21c)][_0x12d0f9(0x225)](_0x43a81f=>{var _0x1176b6=_0x12d0f9;const _0x5109d1=_0x5dc759['product_details'][_0x1176b6(0x1d9)](_0x4fc9dd=>{var _0x1fbec1=_0x1176b6;_0x4fc9dd[_0x1fbec1(0x1e9)]==_0x43a81f['product_name']&&(_0x4fc9dd[_0x1fbec1(0x1c1)]=parseInt(_0x4fc9dd[_0x1fbec1(0x1c1)])+parseInt(_0x43a81f['return_qty']));});}),await _0x5dc759['save'](),_0x584aff[_0x12d0f9(0x1cf)]=_0x453337,_0x584aff['customer']=_0x1271ec,_0x584aff[_0x12d0f9(0x22b)]=_0x22afc9,_0x584aff[_0x12d0f9(0x22d)]=_0x3837e6,_0x584aff['return_sale_QA']=_0x4c90d8,_0x584aff[_0x12d0f9(0x226)]=_0x47b4e7,_0x584aff[_0x12d0f9(0x1e8)]=_0x3634e0,_0x584aff['ToRoom']=_0x2f33e4;const _0x454a79=await _0x584aff[_0x12d0f9(0x1e5)](),_0x3f8441=await c_payment_data[_0x12d0f9(0x1e7)]({'invoice':_0xe5f180['body'][_0x12d0f9(0x1cf)],'reason':_0x12d0f9(0x21e)});_0x3f8441[_0x12d0f9(0x1f9)]=_0xe5f180['body'][_0x12d0f9(0x1f9)],_0x3f8441[_0x12d0f9(0x22b)]=_0xe5f180['body'][_0x12d0f9(0x22b)],await _0x3f8441[_0x12d0f9(0x1e5)](),_0xe5f180[_0x12d0f9(0x1d6)]('success',_0x12d0f9(0x1c9)),_0x3eb355['redirect']('/sales_return_finished/view');}catch(_0x326c44){console[_0x12d0f9(0x227)](_0x326c44),_0x3eb355['status'](0xc8)[_0x12d0f9(0x1ba)]({'message':_0x326c44['message']});}else try{const _0x2caadd=_0xe5f180['params']['id'];console[_0x12d0f9(0x227)](_0x2caadd);const _0x3e4f59=await sales_return[_0x12d0f9(0x1e7)]({'invoice':_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1cf)]});console['log'](_0x12d0f9(0x1d2),_0x3e4f59);const _0x150269=await warehouse[_0x12d0f9(0x1e7)]({'name':_0x3e4f59['ToWarehouse'],'room':_0x3e4f59[_0x12d0f9(0x211)]});console['log']('old_warehouse_data',_0x150269);const {invoice:_0x1fbcb1,customer:_0x11b846,date:_0x5abd84,warehouse_name:_0x5627b8,product_name:_0x488161,primary_code:_0x209b9b,secondary_code:_0x1202b9,product_code:_0x111011,sales_quantity:_0x3ea093,stocks:_0x453680,return_qty:_0x1a6c98,note:_0x444107,to_warehouse_name:_0x24d9f2,to_Room_name:_0x27144e}=_0xe5f180['body'];console[_0x12d0f9(0x227)](_0xe5f180[_0x12d0f9(0x223)]);if(typeof _0x488161==_0x12d0f9(0x1dc))var _0x1cf694=[_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1e9)]],_0x5a5e94=[_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1f1)]],_0x1aa3c0=[_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1ef)]],_0x4bda89=[_0xe5f180['body'][_0x12d0f9(0x1d7)]],_0x201e4b=[_0xe5f180[_0x12d0f9(0x223)]['sales_quantity']],_0x4b46ed=[_0xe5f180['body'][_0x12d0f9(0x1f6)]],_0x263135=[_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1e1)]],_0x361c3c=[_0xe5f180[_0x12d0f9(0x223)]['bay']],_0x26e948=[_0xe5f180['body'][_0x12d0f9(0x230)]],_0x5bd6d2=[_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x22c)]],_0x494b82=[_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1e4)]];else var _0x1cf694=[..._0xe5f180['body']['product_name']],_0x5a5e94=[..._0xe5f180['body'][_0x12d0f9(0x1f1)]],_0x1aa3c0=[..._0xe5f180['body'][_0x12d0f9(0x1ef)]],_0x4bda89=[..._0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1d7)]],_0x201e4b=[..._0xe5f180[_0x12d0f9(0x223)]['sales_quantity']],_0x4b46ed=[..._0xe5f180['body'][_0x12d0f9(0x1f6)]],_0x263135=[..._0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1e1)]],_0x361c3c=[..._0xe5f180['body']['bay']],_0x26e948=[..._0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x230)]],_0x5bd6d2=[..._0xe5f180['body'][_0x12d0f9(0x22c)]],_0x494b82=[..._0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1e4)]];const _0x566266=_0x1cf694[_0x12d0f9(0x1d9)](_0x18c8f4=>{return _0x18c8f4={'product_name':_0x18c8f4};});_0x5a5e94[_0x12d0f9(0x225)]((_0x106b5e,_0x3c7a80)=>{var _0x5a1b3a=_0x12d0f9;_0x566266[_0x3c7a80][_0x5a1b3a(0x1f1)]=_0x106b5e;}),_0x1aa3c0['forEach']((_0x23c9c3,_0x331daf)=>{var _0x589f6e=_0x12d0f9;_0x566266[_0x331daf][_0x589f6e(0x1ef)]=_0x23c9c3;}),_0x4bda89[_0x12d0f9(0x225)]((_0x277596,_0x49e7c0)=>{var _0x382ab5=_0x12d0f9;_0x566266[_0x49e7c0][_0x382ab5(0x1d7)]=_0x277596;}),_0x201e4b[_0x12d0f9(0x225)]((_0x21c9e6,_0x190ce3)=>{_0x566266[_0x190ce3]['sale_qty']=_0x21c9e6;}),_0x4b46ed[_0x12d0f9(0x225)]((_0x4c16d4,_0x5e7359)=>{_0x566266[_0x5e7359]['stock']=_0x4c16d4;}),_0x263135[_0x12d0f9(0x225)]((_0x249e66,_0x14bef0)=>{_0x566266[_0x14bef0]['return_qty']=_0x249e66;}),_0x361c3c[_0x12d0f9(0x225)]((_0xbd7b58,_0x1682af)=>{var _0x46fe36=_0x12d0f9;_0x566266[_0x1682af][_0x46fe36(0x21f)]=_0xbd7b58;}),_0x26e948['forEach']((_0x5a7506,_0x2b9bd9)=>{var _0x296293=_0x12d0f9;_0x566266[_0x2b9bd9][_0x296293(0x230)]=_0x5a7506;}),_0x5bd6d2['forEach']((_0x27ed53,_0x262fe5)=>{var _0x45d51e=_0x12d0f9;_0x566266[_0x262fe5][_0x45d51e(0x201)]=_0x27ed53;}),_0x494b82['forEach']((_0x10dbb2,_0x817050)=>{var _0x227379=_0x12d0f9;_0x566266[_0x817050][_0x227379(0x1e4)]=_0x10dbb2;});var _0x4ad093=0x0;_0x566266[_0x12d0f9(0x225)](_0x281937=>{var _0x359c01=_0x12d0f9;console[_0x359c01(0x227)](_0x359c01(0x229),_0x281937),(parseInt(_0x281937[_0x359c01(0x1b9)])<parseInt(_0x281937['return_qty'])||parseInt(_0x281937[_0x359c01(0x1ed)])<parseInt(_0x281937['return_qty'])&&parseInt(_0x281937['sale_qty'])>parseInt(_0x281937[_0x359c01(0x1e1)])||parseInt(_0x281937[_0x359c01(0x1e1)])==0x0)&&_0x4ad093++;});if(_0x4ad093!=0x0)return _0xe5f180['flash']('errors','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty'),_0x3eb355[_0x12d0f9(0x1d0)](_0x12d0f9(0x1ee));_0x3e4f59[_0x12d0f9(0x22a)]['forEach'](_0x25af18=>{var _0x54e2fe=_0x12d0f9;const _0x5d70b3=_0x150269['product_details'][_0x54e2fe(0x1d9)](_0x247626=>{var _0x10e3ed=_0x54e2fe;_0x247626[_0x10e3ed(0x1e9)]==_0x25af18[_0x10e3ed(0x1e9)]&&_0x247626[_0x10e3ed(0x1e4)]==_0x25af18[_0x10e3ed(0x1e4)]&&_0x247626[_0x10e3ed(0x201)]==_0x25af18[_0x10e3ed(0x201)]&&_0x247626[_0x10e3ed(0x230)]==_0x25af18[_0x10e3ed(0x230)]&&_0x247626[_0x10e3ed(0x21f)]==_0x25af18['bay']&&(_0x247626[_0x10e3ed(0x1c1)]=parseInt(_0x247626[_0x10e3ed(0x1c1)])+parseInt(_0x25af18[_0x10e3ed(0x1e1)]));});}),console[_0x12d0f9(0x227)](_0x12d0f9(0x1f4),_0x150269),await _0x150269[_0x12d0f9(0x1e5)](),_0x3e4f59[_0x12d0f9(0x1cf)]=_0x1fbcb1,_0x3e4f59[_0x12d0f9(0x200)]=_0x11b846,_0x3e4f59[_0x12d0f9(0x22b)]=_0x5abd84,_0x3e4f59[_0x12d0f9(0x22d)]=_0x5627b8,_0x3e4f59['return_sale']=_0x566266,_0x3e4f59['note']=_0x444107,_0x3e4f59['ToWarehouse']=_0x24d9f2,_0x3e4f59[_0x12d0f9(0x211)]=_0x27144e;const _0x36b90=await _0x3e4f59[_0x12d0f9(0x1e5)]();console[_0x12d0f9(0x227)](_0x12d0f9(0x1cd),_0x36b90);const _0x51c495=await c_payment_data[_0x12d0f9(0x1e7)]({'invoice':_0xe5f180[_0x12d0f9(0x223)][_0x12d0f9(0x1cf)],'reason':_0x12d0f9(0x21e)});_0x51c495[_0x12d0f9(0x1f9)]=_0xe5f180[_0x12d0f9(0x223)]['suppliers'],_0x51c495[_0x12d0f9(0x22b)]=_0xe5f180[_0x12d0f9(0x223)]['date'],await _0x51c495['save'](),_0xe5f180['flash'](_0x12d0f9(0x212),_0x12d0f9(0x1c9)),_0x3eb355[_0x12d0f9(0x1d0)](_0x12d0f9(0x203));}catch(_0x48a665){console[_0x12d0f9(0x227)](_0x48a665),_0x3eb355[_0x12d0f9(0x214)](0xc8)[_0x12d0f9(0x1ba)]({'message':_0x48a665[_0x12d0f9(0x1ce)]});}}),router[a0_0x5e19bf(0x1c3)](a0_0x5e19bf(0x207),auth,async(_0x426b92,_0x571bb9)=>{var _0x5b81f9=a0_0x5e19bf;try{const _0x239755=_0x426b92[_0x5b81f9(0x204)]['id'],{invoice:_0x20ae40,customer:_0x3cf44a,payable_to_customer:_0xe63cf,paid_amount:_0xb7a4de}=_0x426b92[_0x5b81f9(0x223)],_0x4b48f8=await sales_return[_0x5b81f9(0x1ea)](_0x239755);console[_0x5b81f9(0x227)](_0x5b81f9(0x1fc),_0x4b48f8),console['log'](_0xe63cf),console[_0x5b81f9(0x227)](_0xb7a4de);var _0x1ace9c=_0xe63cf-_0xb7a4de;console[_0x5b81f9(0x227)](_0x5b81f9(0x20c),_0x1ace9c),_0x4b48f8[_0x5b81f9(0x1b5)]=parseFloat(_0xb7a4de)+parseFloat(_0x4b48f8['paid_amount']),_0x4b48f8['due_amount']=_0x1ace9c,console[_0x5b81f9(0x227)](_0x4b48f8);const _0x2c6599=await _0x4b48f8[_0x5b81f9(0x1e5)]();console['log'](0x1b207);const _0x107abf=await c_payment_data['findOne']({'invoice':_0x426b92[_0x5b81f9(0x223)][_0x5b81f9(0x1cf)],'reason':_0x5b81f9(0x21e)});console[_0x5b81f9(0x227)](_0x5b81f9(0x1bc),_0x107abf),_0x107abf[_0x5b81f9(0x1c5)]=_0x1ace9c,await _0x107abf[_0x5b81f9(0x1e5)]();let _0x17711f=new Date(),_0x377185=('0'+_0x17711f[_0x5b81f9(0x1e6)]())[_0x5b81f9(0x1c6)](-0x2),_0x203c2b=('0'+(_0x17711f[_0x5b81f9(0x1fd)]()+0x1))[_0x5b81f9(0x1c6)](-0x2),_0x4ba441=_0x17711f['getFullYear'](),_0x384a59=_0x4ba441+'-'+_0x203c2b+'-'+_0x377185;const _0x3720bc=new customer_payment({'invoice':_0x20ae40,'date':_0x4ba441+'-'+_0x203c2b+'-'+_0x377185,'customer':_0x3cf44a,'reason':_0x5b81f9(0x209),'amount':_0xb7a4de}),_0x466dc8=await _0x3720bc['save']();_0x426b92['flash'](_0x5b81f9(0x212),'payment\x20successfull'),_0x571bb9[_0x5b81f9(0x1d0)](_0x5b81f9(0x203));}catch(_0x3b4fbe){console[_0x5b81f9(0x227)](_0x3b4fbe);}}),router[a0_0x5e19bf(0x1b8)](a0_0x5e19bf(0x21d),auth,async(_0x3f9694,_0x2c47d2)=>{var _0x53b995=a0_0x5e19bf;try{const {username:_0x272968,email:_0x24ae3e,role:_0x2c475c}=_0x3f9694[_0x53b995(0x210)],_0x22e60c=_0x3f9694['user'],_0x484b59=await profile[_0x53b995(0x1e7)]({'email':_0x22e60c[_0x53b995(0x1bb)]}),_0xb00e7=await master_shop[_0x53b995(0x1f2)]();console[_0x53b995(0x227)](_0x53b995(0x1fe),_0xb00e7);const _0x14b5be=_0x3f9694[_0x53b995(0x204)]['id'],_0x3f274a=await sales_return[_0x53b995(0x1ea)](_0x14b5be);console[_0x53b995(0x227)](_0x3f274a);const _0x4ec562=await customer[_0x53b995(0x1e7)]({'name':_0x3f274a['customer']});console['log'](_0x4ec562);if(_0xb00e7[0x0]['language']==_0x53b995(0x221)){var _0x585643=users[_0x53b995(0x213)];console[_0x53b995(0x227)](_0x585643);}else{if(_0xb00e7[0x0][_0x53b995(0x232)]=='Hindi')var _0x585643=users[_0x53b995(0x224)];else{if(_0xb00e7[0x0]['language']==_0x53b995(0x215))var _0x585643=users[_0x53b995(0x215)];else{if(_0xb00e7[0x0][_0x53b995(0x232)]==_0x53b995(0x1d8))var _0x585643=users[_0x53b995(0x1d8)];else{if(_0xb00e7[0x0][_0x53b995(0x232)]=='French')var _0x585643=users[_0x53b995(0x1bf)];else{if(_0xb00e7[0x0]['language']==_0x53b995(0x1f0))var _0x585643=users[_0x53b995(0x1cc)];else{if(_0xb00e7[0x0][_0x53b995(0x232)]==_0x53b995(0x1c7))var _0x585643=users['Chinese'];else{if(_0xb00e7[0x0][_0x53b995(0x232)]==_0x53b995(0x1e2))var _0x585643=users[_0x53b995(0x228)];}}}}}}}_0x2c47d2['render']('sales_return_invoice',{'success':_0x3f9694[_0x53b995(0x1d6)](_0x53b995(0x212)),'errors':_0x3f9694[_0x53b995(0x1d6)](_0x53b995(0x206)),'role':_0x22e60c,'profile':_0x484b59,'master_shop':_0xb00e7,'customers':_0x4ec562,'sales':_0x3f274a,'language':_0x585643});}catch(_0x4601dc){console[_0x53b995(0x227)](_0x4601dc);}}),module[a0_0x5e19bf(0x1e3)]=router;