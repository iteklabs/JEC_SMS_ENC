var a0_0x83f725=a0_0x1094;function a0_0x1094(_0x451fd4,_0x43e9e2){var _0xa3f584=a0_0xa3f5();return a0_0x1094=function(_0x109431,_0x18c64d){_0x109431=_0x109431-0x168;var _0x4fa035=_0xa3f584[_0x109431];return _0x4fa035;},a0_0x1094(_0x451fd4,_0x43e9e2);}(function(_0x12dc27,_0x4134ab){var _0x2d9896=a0_0x1094,_0x45a73b=_0x12dc27();while(!![]){try{var _0x3aa594=-parseInt(_0x2d9896(0x1df))/0x1*(parseInt(_0x2d9896(0x1c1))/0x2)+-parseInt(_0x2d9896(0x1ce))/0x3*(-parseInt(_0x2d9896(0x17f))/0x4)+parseInt(_0x2d9896(0x1b7))/0x5*(-parseInt(_0x2d9896(0x16f))/0x6)+-parseInt(_0x2d9896(0x1b8))/0x7+-parseInt(_0x2d9896(0x168))/0x8*(-parseInt(_0x2d9896(0x197))/0x9)+parseInt(_0x2d9896(0x176))/0xa*(-parseInt(_0x2d9896(0x1cc))/0xb)+parseInt(_0x2d9896(0x17a))/0xc*(parseInt(_0x2d9896(0x1b4))/0xd);if(_0x3aa594===_0x4134ab)break;else _0x45a73b['push'](_0x45a73b['shift']());}catch(_0x99e017){_0x45a73b['push'](_0x45a73b['shift']());}}}(a0_0xa3f5,0x23a1f));function a0_0xa3f5(){var _0x43ebec=['$product_details.product_name','return_sale_QA','Finished\x20Goods','$product_details.bin','Arabic\x20(ae)','customer','sale_qty','date','../middleware/auth','getMonth','back','$product_details','name','../public/language/languages.json','Returned\x20Payment\x20For\x20Sale\x20Return','ToRoom','note','secondary_code_QA','Spanish','save','product_name_QA','log','10773eKSZoN','return_qty_QA','amount','findById','secondary_code','English','sales_quantity','English\x20(US)','primary_code_QA','QA\x20Warehouse','product_code_QA','aggregate','user','Router','status','/invoice/:id','$product_details._id','types','floorlevel','/view','bin','Portuguese','stocks','params','master','paid_amount','return_sale','German','message','39vaZPGZ','suppliers','primary_code','2075yoZIpU','1955765pTyLgU','data','Portuguese\x20(BR)','return_qty','/give_payment/:id','$product_details.storage','/sales_return_finished/view','Hindi','language','14TsbkjS','findOne','sales_return_finished','type','body','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','Enabled','sales_quantity_QA','product_details','get','warehouse_name','2298241CmeLLy','string','4128yDBzKr','product_code','errors','express','$product_details.floorlevel','French','post','$name','forEach','Chinese','stocks_QA','$product_details.secondary_code','exports','render','stock','old_data','Return\x20Rooms','29677DUsgGd','getDate','customer_docs','return_sale_edit_finished','email','success','due_amount','product_stock','map','$customer_docs','608FBFNEO','bay','find','$product_details.rack','old_warehouse_data','redirect','subtract','1650Dvsnnj','Arabic','$product_details.product_stock','slice','foreach\x20newproduct','invoice','Sale\x20Return','10LVxrfc','/sales_return/view','ToWarehouse','purchase\x20return\x20successfully','2943300oRBxXE','$product_details.type','flash','/view/:id','product_name','376EUYjrR','for_categorize'];a0_0xa3f5=function(){return _0x43ebec;};return a0_0xa3f5();}const express=require(a0_0x83f725(0x1d1)),app=express(),router=express[a0_0x83f725(0x1a4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require(a0_0x83f725(0x189)),users=require(a0_0x83f725(0x18e));router[a0_0x83f725(0x1ca)](a0_0x83f725(0x1aa),auth,async(_0x4570ab,_0x10764c)=>{var _0x39e258=a0_0x83f725;try{const {username:_0x22a912,email:_0x3ac7b6,role:_0x306a53}=_0x4570ab[_0x39e258(0x1a3)],_0x540ac4=_0x4570ab[_0x39e258(0x1a3)],_0x53d10d=await profile[_0x39e258(0x1c2)]({'email':_0x540ac4[_0x39e258(0x1e3)]}),_0x572658=await master_shop['find'](),_0x2deb30=await sales_return_finished['aggregate']([{'$lookup':{'from':'customers','localField':'customer','foreignField':_0x39e258(0x18d),'as':_0x39e258(0x1e1)}},{'$unwind':_0x39e258(0x1e8)}]);if(_0x572658[0x0]['language']=='English\x20(US)'){var _0x468e77=users[_0x39e258(0x19c)];console[_0x39e258(0x196)](_0x468e77);}else{if(_0x572658[0x0][_0x39e258(0x1c0)]==_0x39e258(0x1bf))var _0x468e77=users[_0x39e258(0x1bf)];else{if(_0x572658[0x0][_0x39e258(0x1c0)]==_0x39e258(0x1b2))var _0x468e77=users[_0x39e258(0x1b2)];else{if(_0x572658[0x0]['language']==_0x39e258(0x193))var _0x468e77=users[_0x39e258(0x193)];else{if(_0x572658[0x0][_0x39e258(0x1c0)]==_0x39e258(0x1d3))var _0x468e77=users[_0x39e258(0x1d3)];else{if(_0x572658[0x0][_0x39e258(0x1c0)]==_0x39e258(0x1ba))var _0x468e77=users[_0x39e258(0x1ac)];else{if(_0x572658[0x0][_0x39e258(0x1c0)]==_0x39e258(0x1d7))var _0x468e77=users[_0x39e258(0x1d7)];else{if(_0x572658[0x0][_0x39e258(0x1c0)]==_0x39e258(0x185))var _0x468e77=users[_0x39e258(0x170)];}}}}}}}_0x10764c[_0x39e258(0x1db)](_0x39e258(0x1c3),{'success':_0x4570ab[_0x39e258(0x17c)](_0x39e258(0x1e4)),'errors':_0x4570ab[_0x39e258(0x17c)]('errors'),'role':_0x540ac4,'profile':_0x53d10d,'master_shop':_0x572658,'user':_0x2deb30,'language':_0x468e77});}catch(_0x21511e){console['log'](_0x21511e);}}),router['get'](a0_0x83f725(0x17d),auth,async(_0xc2651d,_0x274586)=>{var _0x3813e4=a0_0x83f725;try{const {username:_0x1762ac,email:_0xcfa52c,role:_0x2e5dc6}=_0xc2651d[_0x3813e4(0x1a3)],_0x529885=_0xc2651d[_0x3813e4(0x1a3)],_0x59adb8=await profile[_0x3813e4(0x1c2)]({'email':_0x529885['email']}),_0x2d6fe8=await master_shop['find']();console[_0x3813e4(0x196)](_0x3813e4(0x1af),_0x2d6fe8);const _0x4f9869=_0xc2651d['params']['id'];console[_0x3813e4(0x196)](_0x4f9869);var _0x25dde4=[_0x3813e4(0x1de)];const _0x10adf3=await sales_return_finished['findById'](_0x4f9869),_0x11180b=await warehouse['aggregate']([{'$match':{'name':_0x10adf3[_0x3813e4(0x178)],'room':_0x10adf3['ToRoom']}},{'$unwind':_0x3813e4(0x18c)},{'$group':{'_id':_0x3813e4(0x1a7),'name':{'$first':_0x3813e4(0x181)},'product_stock':{'$first':_0x3813e4(0x171)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x3813e4(0x184)},'type':{'$first':_0x3813e4(0x17b)},'floorlevel':{'$first':_0x3813e4(0x1d2)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x3813e4(0x1d9)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x3813e4(0x1bd)},'rack':{'$first':_0x3813e4(0x16b)}}}]);console['log'](_0x11180b);const _0x446079=await warehouse[_0x3813e4(0x1a2)]([{'$match':{'status':'Enabled','warehouse_category':_0x3813e4(0x183)}},{'$group':{'_id':_0x3813e4(0x1d5),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x3102b4=await warehouse[_0x3813e4(0x1a2)]([{'$match':{'status':_0x3813e4(0x1c7),'name':_0x3813e4(0x1a0)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x1a9206=await product[_0x3813e4(0x16a)]({});if(_0x2d6fe8[0x0]['language']==_0x3813e4(0x19e)){var _0x441669=users['English'];console[_0x3813e4(0x196)](_0x441669);}else{if(_0x2d6fe8[0x0][_0x3813e4(0x1c0)]==_0x3813e4(0x1bf))var _0x441669=users[_0x3813e4(0x1bf)];else{if(_0x2d6fe8[0x0]['language']==_0x3813e4(0x1b2))var _0x441669=users[_0x3813e4(0x1b2)];else{if(_0x2d6fe8[0x0][_0x3813e4(0x1c0)]==_0x3813e4(0x193))var _0x441669=users[_0x3813e4(0x193)];else{if(_0x2d6fe8[0x0][_0x3813e4(0x1c0)]=='French')var _0x441669=users[_0x3813e4(0x1d3)];else{if(_0x2d6fe8[0x0][_0x3813e4(0x1c0)]==_0x3813e4(0x1ba))var _0x441669=users[_0x3813e4(0x1ac)];else{if(_0x2d6fe8[0x0][_0x3813e4(0x1c0)]==_0x3813e4(0x1d7))var _0x441669=users[_0x3813e4(0x1d7)];else{if(_0x2d6fe8[0x0][_0x3813e4(0x1c0)]==_0x3813e4(0x185))var _0x441669=users[_0x3813e4(0x170)];}}}}}}}_0x274586[_0x3813e4(0x1db)](_0x3813e4(0x1e2),{'success':_0xc2651d[_0x3813e4(0x17c)]('success'),'errors':_0xc2651d[_0x3813e4(0x17c)]('errors'),'role':_0x529885,'profile':_0x59adb8,'master_shop':_0x2d6fe8,'user':_0x10adf3,'stock':_0x11180b,'unit':_0x1a9206,'language':_0x441669,'warehouses':_0x446079,'rooms':_0x25dde4,'warehouse_QA':_0x3102b4});}catch(_0x393bc1){console[_0x3813e4(0x196)](_0x393bc1);}}),router[a0_0x83f725(0x1d4)](a0_0x83f725(0x17d),auth,async(_0x70a55a,_0x13e86f)=>{var _0x3ba6a0=a0_0x83f725;if(_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x180)]=='QA')try{const _0x21d0da=_0x70a55a[_0x3ba6a0(0x1ae)]['id'],_0x3544ae=await sales_return[_0x3ba6a0(0x1c2)]({'invoice':_0x70a55a['body'][_0x3ba6a0(0x174)]}),_0x4544f8=await warehouse[_0x3ba6a0(0x1c2)]({'name':_0x3544ae['ToWarehouse'],'room':_0x3544ae[_0x3ba6a0(0x190)]}),{invoice:_0x56063b,customer:_0x496dc2,date:_0x1230c0,warehouse_name:_0x3081f4,product_name:_0x598511,primary_code:_0x3214b0,secondary_code:_0x24fda2,product_code:_0xe37fbb,sales_quantity:_0x231a45,stocks:_0x1ab1af,return_qty:_0x116ade,note:_0x1013f8,to_warehouse_name_QA:_0x47856f,to_Room_name_QA:_0x2c4ed6}=_0x70a55a[_0x3ba6a0(0x1c5)];if(typeof product_name_QA==_0x3ba6a0(0x1cd))var _0x201b58=[_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x195)]],_0x33867f=[_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x19f)]],_0x25a12b=[_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x192)]],_0x76d71d=[_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1a1)]],_0x3b960f=[_0x70a55a['body'][_0x3ba6a0(0x1c8)]],_0x3235cf=[_0x70a55a['body'][_0x3ba6a0(0x1d8)]],_0x54232c=[_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x198)]];else var _0x201b58=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x195)]],_0x33867f=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x19f)]],_0x25a12b=[..._0x70a55a[_0x3ba6a0(0x1c5)]['secondary_code_QA']],_0x76d71d=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1a1)]],_0x3b960f=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1c8)]],_0x3235cf=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1d8)]],_0x54232c=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x198)]];const _0x20ad98=_0x201b58[_0x3ba6a0(0x1e7)](_0x5d273b=>{return _0x5d273b={'product_name':_0x5d273b};});_0x33867f[_0x3ba6a0(0x1d6)]((_0x39dc80,_0x3c952e)=>{var _0xb6b247=_0x3ba6a0;_0x20ad98[_0x3c952e][_0xb6b247(0x1b6)]=_0x39dc80;}),_0x25a12b[_0x3ba6a0(0x1d6)]((_0x3f8e09,_0x59d4f2)=>{var _0x5481c7=_0x3ba6a0;_0x20ad98[_0x59d4f2][_0x5481c7(0x19b)]=_0x3f8e09;}),_0x76d71d[_0x3ba6a0(0x1d6)]((_0xbc3289,_0x40ce4e)=>{var _0x2011e8=_0x3ba6a0;_0x20ad98[_0x40ce4e][_0x2011e8(0x1cf)]=_0xbc3289;}),_0x3b960f[_0x3ba6a0(0x1d6)]((_0x2ea589,_0x237bdb)=>{var _0x242e63=_0x3ba6a0;_0x20ad98[_0x237bdb][_0x242e63(0x187)]=_0x2ea589;}),_0x3235cf[_0x3ba6a0(0x1d6)]((_0x4a3480,_0x5f432a)=>{var _0x4b47e9=_0x3ba6a0;_0x20ad98[_0x5f432a][_0x4b47e9(0x1dc)]=_0x4a3480;}),_0x54232c[_0x3ba6a0(0x1d6)]((_0x261ac5,_0x4b17e4)=>{var _0x3833ac=_0x3ba6a0;_0x20ad98[_0x4b17e4][_0x3833ac(0x1bb)]=_0x261ac5;}),_0x3544ae[_0x3ba6a0(0x182)][_0x3ba6a0(0x1d6)](_0x974acf=>{var _0x1280fb=_0x3ba6a0;const _0x2fba32=_0x4544f8[_0x1280fb(0x1c9)][_0x1280fb(0x1e7)](_0x3fb5f4=>{var _0xd9ce3=_0x1280fb;_0x3fb5f4[_0xd9ce3(0x17e)]==_0x974acf[_0xd9ce3(0x17e)]&&(_0x3fb5f4['product_stock']=parseInt(_0x3fb5f4['product_stock'])+parseInt(_0x974acf[_0xd9ce3(0x1bb)]));});}),await _0x4544f8['save'](),_0x3544ae['invoice']=_0x56063b,_0x3544ae[_0x3ba6a0(0x186)]=_0x496dc2,_0x3544ae[_0x3ba6a0(0x188)]=_0x1230c0,_0x3544ae[_0x3ba6a0(0x1cb)]=_0x3081f4,_0x3544ae[_0x3ba6a0(0x182)]=_0x20ad98,_0x3544ae['note']=_0x1013f8,_0x3544ae[_0x3ba6a0(0x178)]=_0x47856f,_0x3544ae['ToRoom']=_0x2c4ed6;const _0x139b5c=await _0x3544ae[_0x3ba6a0(0x194)](),_0x38c54a=await c_payment_data[_0x3ba6a0(0x1c2)]({'invoice':_0x70a55a[_0x3ba6a0(0x1c5)]['invoice'],'reason':'Sale\x20Return'});_0x38c54a[_0x3ba6a0(0x1b5)]=_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1b5)],_0x38c54a[_0x3ba6a0(0x188)]=_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x188)],await _0x38c54a[_0x3ba6a0(0x194)](),_0x70a55a[_0x3ba6a0(0x17c)](_0x3ba6a0(0x1e4),_0x3ba6a0(0x179)),_0x13e86f['redirect'](_0x3ba6a0(0x1be));}catch(_0x556983){console[_0x3ba6a0(0x196)](_0x556983),_0x13e86f[_0x3ba6a0(0x1a5)](0xc8)['json']({'message':_0x556983[_0x3ba6a0(0x1b3)]});}else try{const _0x12abe1=_0x70a55a[_0x3ba6a0(0x1ae)]['id'];console[_0x3ba6a0(0x196)](_0x12abe1);const _0x35ef5f=await sales_return['findOne']({'invoice':_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x174)]});console[_0x3ba6a0(0x196)](_0x3ba6a0(0x1dd),_0x35ef5f);const _0x69d164=await warehouse['findOne']({'name':_0x35ef5f[_0x3ba6a0(0x178)],'room':_0x35ef5f[_0x3ba6a0(0x190)]});console[_0x3ba6a0(0x196)](_0x3ba6a0(0x16c),_0x69d164);const {invoice:_0x35e178,customer:_0x5239eb,date:_0x572e38,warehouse_name:_0x2e794b,product_name:_0x4c14c4,primary_code:_0x2fe7c3,secondary_code:_0x4a0c42,product_code:_0x2c0f05,sales_quantity:_0x35d776,stocks:_0x126b92,return_qty:_0x3d3aba,note:_0xfffe73,to_warehouse_name:_0x4926ec,to_Room_name:_0x55283c}=_0x70a55a[_0x3ba6a0(0x1c5)];console[_0x3ba6a0(0x196)](_0x70a55a[_0x3ba6a0(0x1c5)]);if(typeof _0x4c14c4=='string')var _0x201b58=[_0x70a55a['body'][_0x3ba6a0(0x17e)]],_0x33867f=[_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1b6)]],_0x25a12b=[_0x70a55a['body'][_0x3ba6a0(0x19b)]],_0x76d71d=[_0x70a55a['body'][_0x3ba6a0(0x1cf)]],_0x3b960f=[_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x19d)]],_0x3235cf=[_0x70a55a['body']['stocks']],_0x54232c=[_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1bb)]],_0x197503=[_0x70a55a['body'][_0x3ba6a0(0x169)]],_0x353f56=[_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1ab)]],_0xc6ceb7=[_0x70a55a['body']['types']],_0x11ed09=[_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1a9)]];else var _0x201b58=[..._0x70a55a['body'][_0x3ba6a0(0x17e)]],_0x33867f=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1b6)]],_0x25a12b=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x19b)]],_0x76d71d=[..._0x70a55a['body'][_0x3ba6a0(0x1cf)]],_0x3b960f=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x19d)]],_0x3235cf=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1ad)]],_0x54232c=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1bb)]],_0x197503=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x169)]],_0x353f56=[..._0x70a55a[_0x3ba6a0(0x1c5)]['bin']],_0xc6ceb7=[..._0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1a8)]],_0x11ed09=[..._0x70a55a['body'][_0x3ba6a0(0x1a9)]];const _0x4ada23=_0x201b58[_0x3ba6a0(0x1e7)](_0x3a65eb=>{return _0x3a65eb={'product_name':_0x3a65eb};});_0x33867f[_0x3ba6a0(0x1d6)]((_0x21a33f,_0x57b557)=>{var _0x22aa8c=_0x3ba6a0;_0x4ada23[_0x57b557][_0x22aa8c(0x1b6)]=_0x21a33f;}),_0x25a12b[_0x3ba6a0(0x1d6)]((_0xbde7df,_0x9af9a6)=>{var _0x2792f4=_0x3ba6a0;_0x4ada23[_0x9af9a6][_0x2792f4(0x19b)]=_0xbde7df;}),_0x76d71d[_0x3ba6a0(0x1d6)]((_0x2530ce,_0x3a9bd7)=>{var _0x3f0171=_0x3ba6a0;_0x4ada23[_0x3a9bd7][_0x3f0171(0x1cf)]=_0x2530ce;}),_0x3b960f['forEach']((_0x37f80e,_0x3a8105)=>{var _0x48f99d=_0x3ba6a0;_0x4ada23[_0x3a8105][_0x48f99d(0x187)]=_0x37f80e;}),_0x3235cf['forEach']((_0x3b7e01,_0x1572cd)=>{var _0x175f8a=_0x3ba6a0;_0x4ada23[_0x1572cd][_0x175f8a(0x1dc)]=_0x3b7e01;}),_0x54232c[_0x3ba6a0(0x1d6)]((_0x24e5c9,_0x52aa34)=>{var _0x400456=_0x3ba6a0;_0x4ada23[_0x52aa34][_0x400456(0x1bb)]=_0x24e5c9;}),_0x197503['forEach']((_0x375379,_0xc2fe9e)=>{var _0x3b7c61=_0x3ba6a0;_0x4ada23[_0xc2fe9e][_0x3b7c61(0x169)]=_0x375379;}),_0x353f56[_0x3ba6a0(0x1d6)]((_0x3d4b85,_0x2d149f)=>{var _0x5be700=_0x3ba6a0;_0x4ada23[_0x2d149f][_0x5be700(0x1ab)]=_0x3d4b85;}),_0xc6ceb7[_0x3ba6a0(0x1d6)]((_0x245c63,_0x515f16)=>{var _0x30197c=_0x3ba6a0;_0x4ada23[_0x515f16][_0x30197c(0x1c4)]=_0x245c63;}),_0x11ed09[_0x3ba6a0(0x1d6)]((_0x2b66ae,_0x183646)=>{var _0x3d95a8=_0x3ba6a0;_0x4ada23[_0x183646][_0x3d95a8(0x1a9)]=_0x2b66ae;});var _0x9bb255=0x0;_0x4ada23[_0x3ba6a0(0x1d6)](_0x106bed=>{var _0x36d1e2=_0x3ba6a0;console[_0x36d1e2(0x196)](_0x36d1e2(0x173),_0x106bed),(parseInt(_0x106bed[_0x36d1e2(0x187)])<parseInt(_0x106bed['return_qty'])||parseInt(_0x106bed[_0x36d1e2(0x1dc)])<parseInt(_0x106bed[_0x36d1e2(0x1bb)])&&parseInt(_0x106bed[_0x36d1e2(0x187)])>parseInt(_0x106bed['return_qty'])||parseInt(_0x106bed[_0x36d1e2(0x1bb)])==0x0)&&_0x9bb255++;});if(_0x9bb255!=0x0)return _0x70a55a[_0x3ba6a0(0x17c)]('errors',_0x3ba6a0(0x1c6)),_0x13e86f[_0x3ba6a0(0x16d)](_0x3ba6a0(0x18b));_0x35ef5f[_0x3ba6a0(0x1b1)][_0x3ba6a0(0x1d6)](_0xcb8099=>{var _0x43d864=_0x3ba6a0;const _0xb7e63e=_0x69d164[_0x43d864(0x1c9)][_0x43d864(0x1e7)](_0x2a1a0b=>{var _0x1a79df=_0x43d864;_0x2a1a0b['product_name']==_0xcb8099[_0x1a79df(0x17e)]&&_0x2a1a0b[_0x1a79df(0x1a9)]==_0xcb8099['floorlevel']&&_0x2a1a0b[_0x1a79df(0x1c4)]==_0xcb8099[_0x1a79df(0x1c4)]&&_0x2a1a0b[_0x1a79df(0x1ab)]==_0xcb8099[_0x1a79df(0x1ab)]&&_0x2a1a0b[_0x1a79df(0x169)]==_0xcb8099[_0x1a79df(0x169)]&&(_0x2a1a0b[_0x1a79df(0x1e6)]=parseInt(_0x2a1a0b[_0x1a79df(0x1e6)])+parseInt(_0xcb8099[_0x1a79df(0x1bb)]));});}),console[_0x3ba6a0(0x196)](_0x3ba6a0(0x16c),_0x69d164),await _0x69d164[_0x3ba6a0(0x194)](),_0x35ef5f[_0x3ba6a0(0x174)]=_0x35e178,_0x35ef5f['customer']=_0x5239eb,_0x35ef5f[_0x3ba6a0(0x188)]=_0x572e38,_0x35ef5f[_0x3ba6a0(0x1cb)]=_0x2e794b,_0x35ef5f[_0x3ba6a0(0x1b1)]=_0x4ada23,_0x35ef5f[_0x3ba6a0(0x191)]=_0xfffe73,_0x35ef5f[_0x3ba6a0(0x178)]=_0x4926ec,_0x35ef5f['ToRoom']=_0x55283c;const _0x4d0800=await _0x35ef5f[_0x3ba6a0(0x194)]();console[_0x3ba6a0(0x196)]('new\x20new_data',_0x4d0800);const _0x333a88=await c_payment_data[_0x3ba6a0(0x1c2)]({'invoice':_0x70a55a['body'][_0x3ba6a0(0x174)],'reason':_0x3ba6a0(0x175)});_0x333a88[_0x3ba6a0(0x1b5)]=_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x1b5)],_0x333a88[_0x3ba6a0(0x188)]=_0x70a55a[_0x3ba6a0(0x1c5)][_0x3ba6a0(0x188)],await _0x333a88[_0x3ba6a0(0x194)](),_0x70a55a[_0x3ba6a0(0x17c)](_0x3ba6a0(0x1e4),_0x3ba6a0(0x179)),_0x13e86f[_0x3ba6a0(0x16d)](_0x3ba6a0(0x177));}catch(_0x1f30e5){console['log'](_0x1f30e5),_0x13e86f['status'](0xc8)['json']({'message':_0x1f30e5[_0x3ba6a0(0x1b3)]});}}),router[a0_0x83f725(0x1d4)](a0_0x83f725(0x1bc),auth,async(_0x3f8ad0,_0x2ae690)=>{var _0x2148bb=a0_0x83f725;try{const _0x13cb1=_0x3f8ad0['params']['id'],{invoice:_0x422cd4,customer:_0xb0a5c,payable_to_customer:_0x1e5ba9,paid_amount:_0x4f03f7}=_0x3f8ad0['body'],_0x13bbf3=await sales_return[_0x2148bb(0x19a)](_0x13cb1);console[_0x2148bb(0x196)](_0x2148bb(0x1b9),_0x13bbf3),console['log'](_0x1e5ba9),console['log'](_0x4f03f7);var _0x2aef3e=_0x1e5ba9-_0x4f03f7;console[_0x2148bb(0x196)](_0x2148bb(0x16e),_0x2aef3e),_0x13bbf3['paid_amount']=parseFloat(_0x4f03f7)+parseFloat(_0x13bbf3[_0x2148bb(0x1b0)]),_0x13bbf3[_0x2148bb(0x1e5)]=_0x2aef3e,console[_0x2148bb(0x196)](_0x13bbf3);const _0x1a3b47=await _0x13bbf3[_0x2148bb(0x194)]();console[_0x2148bb(0x196)](0x1b207);const _0x3ae5ac=await c_payment_data[_0x2148bb(0x1c2)]({'invoice':_0x3f8ad0[_0x2148bb(0x1c5)][_0x2148bb(0x174)],'reason':_0x2148bb(0x175)});console['log']('c_payment',_0x3ae5ac),_0x3ae5ac[_0x2148bb(0x199)]=_0x2aef3e,await _0x3ae5ac[_0x2148bb(0x194)]();let _0x4ca511=new Date(),_0x7f1ac8=('0'+_0x4ca511[_0x2148bb(0x1e0)]())[_0x2148bb(0x172)](-0x2),_0x40923d=('0'+(_0x4ca511[_0x2148bb(0x18a)]()+0x1))[_0x2148bb(0x172)](-0x2),_0x526964=_0x4ca511['getFullYear'](),_0x586cf1=_0x526964+'-'+_0x40923d+'-'+_0x7f1ac8;const _0x3dfec2=new customer_payment({'invoice':_0x422cd4,'date':_0x526964+'-'+_0x40923d+'-'+_0x7f1ac8,'customer':_0xb0a5c,'reason':_0x2148bb(0x18f),'amount':_0x4f03f7}),_0x4d5b8e=await _0x3dfec2[_0x2148bb(0x194)]();_0x3f8ad0[_0x2148bb(0x17c)](_0x2148bb(0x1e4),'payment\x20successfull'),_0x2ae690[_0x2148bb(0x16d)](_0x2148bb(0x177));}catch(_0x142acc){console[_0x2148bb(0x196)](_0x142acc);}}),router[a0_0x83f725(0x1ca)](a0_0x83f725(0x1a6),auth,async(_0x50f3ef,_0x56a676)=>{var _0x47fca0=a0_0x83f725;try{const {username:_0x56af3e,email:_0x494a28,role:_0x52c27e}=_0x50f3ef['user'],_0x21f654=_0x50f3ef[_0x47fca0(0x1a3)],_0x365e1c=await profile[_0x47fca0(0x1c2)]({'email':_0x21f654[_0x47fca0(0x1e3)]}),_0x126583=await master_shop['find']();console[_0x47fca0(0x196)]('master',_0x126583);const _0x127a80=_0x50f3ef[_0x47fca0(0x1ae)]['id'],_0x39f99a=await sales_return['findById'](_0x127a80);console['log'](_0x39f99a);const _0x263459=await customer[_0x47fca0(0x1c2)]({'name':_0x39f99a['customer']});console[_0x47fca0(0x196)](_0x263459);if(_0x126583[0x0]['language']==_0x47fca0(0x19e)){var _0x1810c2=users[_0x47fca0(0x19c)];console['log'](_0x1810c2);}else{if(_0x126583[0x0]['language']=='Hindi')var _0x1810c2=users['Hindi'];else{if(_0x126583[0x0][_0x47fca0(0x1c0)]==_0x47fca0(0x1b2))var _0x1810c2=users[_0x47fca0(0x1b2)];else{if(_0x126583[0x0]['language']==_0x47fca0(0x193))var _0x1810c2=users[_0x47fca0(0x193)];else{if(_0x126583[0x0][_0x47fca0(0x1c0)]==_0x47fca0(0x1d3))var _0x1810c2=users[_0x47fca0(0x1d3)];else{if(_0x126583[0x0][_0x47fca0(0x1c0)]==_0x47fca0(0x1ba))var _0x1810c2=users['Portuguese'];else{if(_0x126583[0x0][_0x47fca0(0x1c0)]=='Chinese')var _0x1810c2=users[_0x47fca0(0x1d7)];else{if(_0x126583[0x0][_0x47fca0(0x1c0)]==_0x47fca0(0x185))var _0x1810c2=users[_0x47fca0(0x170)];}}}}}}}_0x56a676[_0x47fca0(0x1db)]('sales_return_invoice',{'success':_0x50f3ef[_0x47fca0(0x17c)](_0x47fca0(0x1e4)),'errors':_0x50f3ef[_0x47fca0(0x17c)](_0x47fca0(0x1d0)),'role':_0x21f654,'profile':_0x365e1c,'master_shop':_0x126583,'customers':_0x263459,'sales':_0x39f99a,'language':_0x1810c2});}catch(_0x1f909a){console[_0x47fca0(0x196)](_0x1f909a);}}),module[a0_0x83f725(0x1da)]=router;