var a0_0x109b39=a0_0x75f5;(function(_0x182e08,_0x38dbf0){var _0x3b3c57=a0_0x75f5,_0xcd4e86=_0x182e08();while(!![]){try{var _0x6d3f5f=-parseInt(_0x3b3c57(0x225))/0x1*(-parseInt(_0x3b3c57(0x229))/0x2)+-parseInt(_0x3b3c57(0x22c))/0x3*(parseInt(_0x3b3c57(0x22f))/0x4)+parseInt(_0x3b3c57(0x1cc))/0x5+parseInt(_0x3b3c57(0x244))/0x6+-parseInt(_0x3b3c57(0x230))/0x7*(parseInt(_0x3b3c57(0x1ee))/0x8)+parseInt(_0x3b3c57(0x245))/0x9+-parseInt(_0x3b3c57(0x205))/0xa;if(_0x6d3f5f===_0x38dbf0)break;else _0xcd4e86['push'](_0xcd4e86['shift']());}catch(_0x72b859){_0xcd4e86['push'](_0xcd4e86['shift']());}}}(a0_0x4326,0x243c9));function a0_0x4326(){var _0x32153f=['map','amount','for_categorize','Return\x20Rooms','/invoice/:id','redirect','product_stock','old_warehouse_data','40zjNLqq','customer','message','$product_details.storage','string','primary_code','payment\x20successfull','customers','Arabic','Hindi','due_amount','sales_quantity','$product_details.bay','QA\x20Warehouse','flash','success','../middleware/auth','status','product_code','errors','Portuguese\x20(BR)','English','log','2198030zySHYn','sales_return_invoice','suppliers','get','email','foreach\x20newproduct','getFullYear','primary_code_QA','stocks_QA','Portuguese','Arabic\x20(ae)','$product_details.product_code','find','data','$product_details.product_stock','exports','back','Sale\x20Return','/sales_return/view','slice','Spanish','French','json','$name','language','$product_details.rack','warehouse_name','sales_quantity_QA','/view/:id','getMonth','/sales_return_finished/view','return_qty_QA','45RhHDYu','$product_details.bin','note','invoice','6814cWcccp','master','c_payment','9woAQqp','return_sale','save','29732XTGkvT','177954aNyiwA','express','German','Chinese','findById','product_details','/give_payment/:id','types','$product_details.secondary_code','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','Finished\x20Goods','aggregate','return_sale_edit_finished','$product_details.type','customer_docs','stocks','$product_details.floorlevel','name','findOne','type','377622qRDrBB','1206396vqfVUM','English\x20(US)','product_name_QA','return_qty','bay','sales_return_finished','purchase\x20return\x20successfully','render','836705cNONET','return_sale_QA','ToWarehouse','forEach','new\x20new_data','date','product_name','stock','$product_details.product_name','ToRoom','paid_amount','../models/all_models','Returned\x20Payment\x20For\x20Sale\x20Return','floorlevel','secondary_code_QA','Router','params','bin','body','$product_details._id','sale_qty','$customer_docs','/view','subtract','user','secondary_code'];a0_0x4326=function(){return _0x32153f;};return a0_0x4326();}function a0_0x75f5(_0x266761,_0x114abd){var _0x4326fb=a0_0x4326();return a0_0x75f5=function(_0x75f58a,_0x6ff614){_0x75f58a=_0x75f58a-0x1cb;var _0x43d0a6=_0x4326fb[_0x75f58a];return _0x43d0a6;},a0_0x75f5(_0x266761,_0x114abd);}const express=require(a0_0x109b39(0x231)),app=express(),router=express[a0_0x109b39(0x1db)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x109b39(0x1d7)),auth=require(a0_0x109b39(0x1fe)),users=require('../public/language/languages.json');router[a0_0x109b39(0x208)](a0_0x109b39(0x1e2),auth,async(_0x500d5a,_0x2088e4)=>{var _0x4533ac=a0_0x109b39;try{const {username:_0x25852f,email:_0x30b8a6,role:_0x5ad381}=_0x500d5a[_0x4533ac(0x1e4)],_0x182904=_0x500d5a[_0x4533ac(0x1e4)],_0x304918=await profile[_0x4533ac(0x242)]({'email':_0x182904['email']}),_0xef1ed0=await master_shop[_0x4533ac(0x211)](),_0x1af88b=await sales_return_finished[_0x4533ac(0x23b)]([{'$lookup':{'from':_0x4533ac(0x1f5),'localField':_0x4533ac(0x1ef),'foreignField':_0x4533ac(0x241),'as':_0x4533ac(0x23e)}},{'$unwind':_0x4533ac(0x1e1)}]);if(_0xef1ed0[0x0][_0x4533ac(0x21d)]==_0x4533ac(0x246)){var _0x1c1d2b=users[_0x4533ac(0x203)];console['log'](_0x1c1d2b);}else{if(_0xef1ed0[0x0]['language']==_0x4533ac(0x1f7))var _0x1c1d2b=users[_0x4533ac(0x1f7)];else{if(_0xef1ed0[0x0][_0x4533ac(0x21d)]=='German')var _0x1c1d2b=users[_0x4533ac(0x232)];else{if(_0xef1ed0[0x0][_0x4533ac(0x21d)]==_0x4533ac(0x219))var _0x1c1d2b=users[_0x4533ac(0x219)];else{if(_0xef1ed0[0x0]['language']=='French')var _0x1c1d2b=users[_0x4533ac(0x21a)];else{if(_0xef1ed0[0x0]['language']==_0x4533ac(0x202))var _0x1c1d2b=users[_0x4533ac(0x20e)];else{if(_0xef1ed0[0x0][_0x4533ac(0x21d)]==_0x4533ac(0x233))var _0x1c1d2b=users['Chinese'];else{if(_0xef1ed0[0x0][_0x4533ac(0x21d)]==_0x4533ac(0x20f))var _0x1c1d2b=users[_0x4533ac(0x1f6)];}}}}}}}_0x2088e4[_0x4533ac(0x1cb)](_0x4533ac(0x24a),{'success':_0x500d5a[_0x4533ac(0x1fc)](_0x4533ac(0x1fd)),'errors':_0x500d5a[_0x4533ac(0x1fc)](_0x4533ac(0x201)),'role':_0x182904,'profile':_0x304918,'master_shop':_0xef1ed0,'user':_0x1af88b,'language':_0x1c1d2b});}catch(_0x27868e){console[_0x4533ac(0x204)](_0x27868e);}}),router[a0_0x109b39(0x208)](a0_0x109b39(0x221),auth,async(_0x1a3df5,_0x561767)=>{var _0x5658ba=a0_0x109b39;try{const {username:_0x5b5837,email:_0x92aa1e,role:_0x6ef4a9}=_0x1a3df5[_0x5658ba(0x1e4)],_0xf93ae5=_0x1a3df5['user'],_0x549558=await profile[_0x5658ba(0x242)]({'email':_0xf93ae5[_0x5658ba(0x209)]}),_0x3d1abb=await master_shop[_0x5658ba(0x211)]();console[_0x5658ba(0x204)](_0x5658ba(0x22a),_0x3d1abb);const _0x37f646=_0x1a3df5[_0x5658ba(0x1dc)]['id'];console[_0x5658ba(0x204)](_0x37f646);var _0x5b239e=[_0x5658ba(0x1e9)];const _0x27ead0=await sales_return_finished[_0x5658ba(0x234)](_0x37f646),_0x2fa30d=await warehouse['aggregate']([{'$match':{'name':_0x27ead0[_0x5658ba(0x1ce)],'room':_0x27ead0[_0x5658ba(0x1d5)]}},{'$unwind':'$product_details'},{'$group':{'_id':_0x5658ba(0x1df),'name':{'$first':_0x5658ba(0x1d4)},'product_stock':{'$first':_0x5658ba(0x213)},'bay':{'$first':_0x5658ba(0x1fa)},'bin':{'$first':_0x5658ba(0x226)},'type':{'$first':_0x5658ba(0x23d)},'floorlevel':{'$first':_0x5658ba(0x240)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x5658ba(0x238)},'product_code':{'$first':_0x5658ba(0x210)},'storage':{'$first':_0x5658ba(0x1f1)},'rack':{'$first':_0x5658ba(0x21e)}}}]);console[_0x5658ba(0x204)](_0x2fa30d);const _0x137684=await warehouse[_0x5658ba(0x23b)]([{'$match':{'status':'Enabled','warehouse_category':_0x5658ba(0x23a)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x1c9ff2=await warehouse[_0x5658ba(0x23b)]([{'$match':{'status':'Enabled','name':_0x5658ba(0x1fb)}},{'$group':{'_id':_0x5658ba(0x21c),'name':{'$first':_0x5658ba(0x21c)}}},{'$sort':{'name':0x1}}]),_0x12cd55=await product[_0x5658ba(0x211)]({});if(_0x3d1abb[0x0][_0x5658ba(0x21d)]==_0x5658ba(0x246)){var _0x4cc0aa=users[_0x5658ba(0x203)];console[_0x5658ba(0x204)](_0x4cc0aa);}else{if(_0x3d1abb[0x0][_0x5658ba(0x21d)]==_0x5658ba(0x1f7))var _0x4cc0aa=users[_0x5658ba(0x1f7)];else{if(_0x3d1abb[0x0][_0x5658ba(0x21d)]=='German')var _0x4cc0aa=users[_0x5658ba(0x232)];else{if(_0x3d1abb[0x0][_0x5658ba(0x21d)]==_0x5658ba(0x219))var _0x4cc0aa=users['Spanish'];else{if(_0x3d1abb[0x0][_0x5658ba(0x21d)]=='French')var _0x4cc0aa=users[_0x5658ba(0x21a)];else{if(_0x3d1abb[0x0]['language']==_0x5658ba(0x202))var _0x4cc0aa=users['Portuguese'];else{if(_0x3d1abb[0x0][_0x5658ba(0x21d)]==_0x5658ba(0x233))var _0x4cc0aa=users[_0x5658ba(0x233)];else{if(_0x3d1abb[0x0]['language']==_0x5658ba(0x20f))var _0x4cc0aa=users[_0x5658ba(0x1f6)];}}}}}}}_0x561767['render'](_0x5658ba(0x23c),{'success':_0x1a3df5[_0x5658ba(0x1fc)]('success'),'errors':_0x1a3df5[_0x5658ba(0x1fc)]('errors'),'role':_0xf93ae5,'profile':_0x549558,'master_shop':_0x3d1abb,'user':_0x27ead0,'stock':_0x2fa30d,'unit':_0x12cd55,'language':_0x4cc0aa,'warehouses':_0x137684,'rooms':_0x5b239e,'warehouse_QA':_0x1c9ff2});}catch(_0x451b52){console['log'](_0x451b52);}}),router['post'](a0_0x109b39(0x221),auth,async(_0x3c5e13,_0x2f769f)=>{var _0x3ff831=a0_0x109b39;if(_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x1e8)]=='QA')try{const _0x534332=_0x3c5e13['params']['id'],_0xe18074=await sales_return[_0x3ff831(0x242)]({'invoice':_0x3c5e13['body'][_0x3ff831(0x228)]}),_0xb0a5cf=await warehouse[_0x3ff831(0x242)]({'name':_0xe18074['ToWarehouse'],'room':_0xe18074['ToRoom']}),{invoice:_0x461db0,customer:_0x4346b4,date:_0x41430e,warehouse_name:_0x5b2c1e,product_name:_0x1a38c6,primary_code:_0x55602e,secondary_code:_0x1cdeda,product_code:_0x59192a,sales_quantity:_0x2ed672,stocks:_0x3f636f,return_qty:_0x2cf377,note:_0x1a3b35,to_warehouse_name_QA:_0x50f8d0,to_Room_name_QA:_0xc93a65}=_0x3c5e13[_0x3ff831(0x1de)];if(typeof product_name_QA=='string')var _0x10edb3=[_0x3c5e13['body'][_0x3ff831(0x247)]],_0x1d8b1c=[_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x20c)]],_0xf5dff7=[_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x1da)]],_0x1580b4=[_0x3c5e13['body']['product_code_QA']],_0x207612=[_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x220)]],_0x111044=[_0x3c5e13[_0x3ff831(0x1de)]['stocks_QA']],_0x57d870=[_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x224)]];else var _0x10edb3=[..._0x3c5e13['body']['product_name_QA']],_0x1d8b1c=[..._0x3c5e13[_0x3ff831(0x1de)]['primary_code_QA']],_0xf5dff7=[..._0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x1da)]],_0x1580b4=[..._0x3c5e13[_0x3ff831(0x1de)]['product_code_QA']],_0x207612=[..._0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x220)]],_0x111044=[..._0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x20d)]],_0x57d870=[..._0x3c5e13['body']['return_qty_QA']];const _0x47e34c=_0x10edb3[_0x3ff831(0x1e6)](_0x57dfb3=>{return _0x57dfb3={'product_name':_0x57dfb3};});_0x1d8b1c[_0x3ff831(0x1cf)]((_0xa8c82a,_0x70b72c)=>{_0x47e34c[_0x70b72c]['primary_code']=_0xa8c82a;}),_0xf5dff7[_0x3ff831(0x1cf)]((_0x2194e3,_0x5a5a5e)=>{var _0x2e2894=_0x3ff831;_0x47e34c[_0x5a5a5e][_0x2e2894(0x1e5)]=_0x2194e3;}),_0x1580b4[_0x3ff831(0x1cf)]((_0x2a2ad9,_0x240565)=>{_0x47e34c[_0x240565]['product_code']=_0x2a2ad9;}),_0x207612['forEach']((_0x40f067,_0x100db7)=>{var _0x14664a=_0x3ff831;_0x47e34c[_0x100db7][_0x14664a(0x1e0)]=_0x40f067;}),_0x111044['forEach']((_0x2d9632,_0x38c24a)=>{_0x47e34c[_0x38c24a]['stock']=_0x2d9632;}),_0x57d870[_0x3ff831(0x1cf)]((_0x50b609,_0x1c1cd8)=>{var _0x30baf8=_0x3ff831;_0x47e34c[_0x1c1cd8][_0x30baf8(0x248)]=_0x50b609;}),_0xe18074[_0x3ff831(0x1cd)][_0x3ff831(0x1cf)](_0xdabc29=>{var _0x268c01=_0x3ff831;const _0x90277d=_0xb0a5cf['product_details'][_0x268c01(0x1e6)](_0x46accc=>{var _0x141bc7=_0x268c01;_0x46accc[_0x141bc7(0x1d2)]==_0xdabc29[_0x141bc7(0x1d2)]&&(_0x46accc[_0x141bc7(0x1ec)]=parseInt(_0x46accc[_0x141bc7(0x1ec)])+parseInt(_0xdabc29[_0x141bc7(0x248)]));});}),await _0xb0a5cf[_0x3ff831(0x22e)](),_0xe18074[_0x3ff831(0x228)]=_0x461db0,_0xe18074[_0x3ff831(0x1ef)]=_0x4346b4,_0xe18074[_0x3ff831(0x1d1)]=_0x41430e,_0xe18074[_0x3ff831(0x21f)]=_0x5b2c1e,_0xe18074['return_sale_QA']=_0x47e34c,_0xe18074[_0x3ff831(0x227)]=_0x1a3b35,_0xe18074[_0x3ff831(0x1ce)]=_0x50f8d0,_0xe18074[_0x3ff831(0x1d5)]=_0xc93a65;const _0x5e6635=await _0xe18074['save'](),_0x4dba25=await c_payment_data[_0x3ff831(0x242)]({'invoice':_0x3c5e13['body'][_0x3ff831(0x228)],'reason':_0x3ff831(0x216)});_0x4dba25[_0x3ff831(0x207)]=_0x3c5e13['body'][_0x3ff831(0x207)],_0x4dba25[_0x3ff831(0x1d1)]=_0x3c5e13['body'][_0x3ff831(0x1d1)],await _0x4dba25[_0x3ff831(0x22e)](),_0x3c5e13['flash']('success',_0x3ff831(0x24b)),_0x2f769f[_0x3ff831(0x1eb)](_0x3ff831(0x223));}catch(_0x54e66c){console['log'](_0x54e66c),_0x2f769f[_0x3ff831(0x1ff)](0xc8)[_0x3ff831(0x21b)]({'message':_0x54e66c[_0x3ff831(0x1f0)]});}else try{const _0x348e93=_0x3c5e13[_0x3ff831(0x1dc)]['id'];console[_0x3ff831(0x204)](_0x348e93);const _0x44373d=await sales_return['findOne']({'invoice':_0x3c5e13[_0x3ff831(0x1de)]['invoice']});console[_0x3ff831(0x204)]('old_data',_0x44373d);const _0xab08d5=await warehouse[_0x3ff831(0x242)]({'name':_0x44373d[_0x3ff831(0x1ce)],'room':_0x44373d[_0x3ff831(0x1d5)]});console['log'](_0x3ff831(0x1ed),_0xab08d5);const {invoice:_0x4d3a04,customer:_0x394152,date:_0x1b1561,warehouse_name:_0x390552,product_name:_0x17053d,primary_code:_0x5eda50,secondary_code:_0x452bdd,product_code:_0x2a62f8,sales_quantity:_0x766570,stocks:_0x6dd90e,return_qty:_0x32ff0e,note:_0x473f6a,to_warehouse_name:_0x330c30,to_Room_name:_0x42a285}=_0x3c5e13[_0x3ff831(0x1de)];console[_0x3ff831(0x204)](_0x3c5e13[_0x3ff831(0x1de)]);if(typeof _0x17053d==_0x3ff831(0x1f2))var _0x10edb3=[_0x3c5e13['body'][_0x3ff831(0x1d2)]],_0x1d8b1c=[_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x1f3)]],_0xf5dff7=[_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x1e5)]],_0x1580b4=[_0x3c5e13['body'][_0x3ff831(0x200)]],_0x207612=[_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x1f9)]],_0x111044=[_0x3c5e13['body'][_0x3ff831(0x23f)]],_0x57d870=[_0x3c5e13[_0x3ff831(0x1de)]['return_qty']],_0x45af6a=[_0x3c5e13[_0x3ff831(0x1de)]['bay']],_0x44583e=[_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x1dd)]],_0x5868dd=[_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x237)]],_0x460196=[_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x1d9)]];else var _0x10edb3=[..._0x3c5e13[_0x3ff831(0x1de)]['product_name']],_0x1d8b1c=[..._0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x1f3)]],_0xf5dff7=[..._0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x1e5)]],_0x1580b4=[..._0x3c5e13['body']['product_code']],_0x207612=[..._0x3c5e13['body'][_0x3ff831(0x1f9)]],_0x111044=[..._0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x23f)]],_0x57d870=[..._0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x248)]],_0x45af6a=[..._0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x249)]],_0x44583e=[..._0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x1dd)]],_0x5868dd=[..._0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x237)]],_0x460196=[..._0x3c5e13['body']['floorlevel']];const _0xb787fe=_0x10edb3[_0x3ff831(0x1e6)](_0x1c0e7c=>{return _0x1c0e7c={'product_name':_0x1c0e7c};});_0x1d8b1c[_0x3ff831(0x1cf)]((_0x52f741,_0x2eaa5d)=>{_0xb787fe[_0x2eaa5d]['primary_code']=_0x52f741;}),_0xf5dff7[_0x3ff831(0x1cf)]((_0xa538a3,_0x50ba05)=>{_0xb787fe[_0x50ba05]['secondary_code']=_0xa538a3;}),_0x1580b4[_0x3ff831(0x1cf)]((_0x29d911,_0x479868)=>{var _0x8cffeb=_0x3ff831;_0xb787fe[_0x479868][_0x8cffeb(0x200)]=_0x29d911;}),_0x207612[_0x3ff831(0x1cf)]((_0x18aab2,_0x532c53)=>{var _0xd32da=_0x3ff831;_0xb787fe[_0x532c53][_0xd32da(0x1e0)]=_0x18aab2;}),_0x111044[_0x3ff831(0x1cf)]((_0x52fbc1,_0x212e9f)=>{var _0x48e6b5=_0x3ff831;_0xb787fe[_0x212e9f][_0x48e6b5(0x1d3)]=_0x52fbc1;}),_0x57d870[_0x3ff831(0x1cf)]((_0x2b0b73,_0x1dbf2d)=>{var _0x49f481=_0x3ff831;_0xb787fe[_0x1dbf2d][_0x49f481(0x248)]=_0x2b0b73;}),_0x45af6a[_0x3ff831(0x1cf)]((_0x3b9d7f,_0x25226c)=>{var _0x468a3e=_0x3ff831;_0xb787fe[_0x25226c][_0x468a3e(0x249)]=_0x3b9d7f;}),_0x44583e['forEach']((_0x40a85d,_0x5bdc00)=>{var _0x154af3=_0x3ff831;_0xb787fe[_0x5bdc00][_0x154af3(0x1dd)]=_0x40a85d;}),_0x5868dd[_0x3ff831(0x1cf)]((_0xd84c2e,_0x52609d)=>{var _0x5d8a55=_0x3ff831;_0xb787fe[_0x52609d][_0x5d8a55(0x243)]=_0xd84c2e;}),_0x460196['forEach']((_0x5d9a0d,_0xb713cc)=>{var _0x3fc0ac=_0x3ff831;_0xb787fe[_0xb713cc][_0x3fc0ac(0x1d9)]=_0x5d9a0d;});var _0x5679fb=0x0;_0xb787fe[_0x3ff831(0x1cf)](_0x597510=>{var _0x272d3b=_0x3ff831;console[_0x272d3b(0x204)](_0x272d3b(0x20a),_0x597510),(parseInt(_0x597510[_0x272d3b(0x1e0)])<parseInt(_0x597510[_0x272d3b(0x248)])||parseInt(_0x597510[_0x272d3b(0x1d3)])<parseInt(_0x597510[_0x272d3b(0x248)])&&parseInt(_0x597510[_0x272d3b(0x1e0)])>parseInt(_0x597510['return_qty'])||parseInt(_0x597510[_0x272d3b(0x248)])==0x0)&&_0x5679fb++;});if(_0x5679fb!=0x0)return _0x3c5e13[_0x3ff831(0x1fc)]('errors',_0x3ff831(0x239)),_0x2f769f[_0x3ff831(0x1eb)](_0x3ff831(0x215));_0x44373d[_0x3ff831(0x22d)][_0x3ff831(0x1cf)](_0x2119f2=>{var _0x3093af=_0x3ff831;const _0x53ee59=_0xab08d5[_0x3093af(0x235)][_0x3093af(0x1e6)](_0x294ec2=>{var _0x5884fb=_0x3093af;_0x294ec2[_0x5884fb(0x1d2)]==_0x2119f2[_0x5884fb(0x1d2)]&&_0x294ec2[_0x5884fb(0x1d9)]==_0x2119f2[_0x5884fb(0x1d9)]&&_0x294ec2['type']==_0x2119f2[_0x5884fb(0x243)]&&_0x294ec2['bin']==_0x2119f2[_0x5884fb(0x1dd)]&&_0x294ec2[_0x5884fb(0x249)]==_0x2119f2[_0x5884fb(0x249)]&&(_0x294ec2[_0x5884fb(0x1ec)]=parseInt(_0x294ec2[_0x5884fb(0x1ec)])+parseInt(_0x2119f2[_0x5884fb(0x248)]));});}),console[_0x3ff831(0x204)](_0x3ff831(0x1ed),_0xab08d5),await _0xab08d5[_0x3ff831(0x22e)](),_0x44373d[_0x3ff831(0x228)]=_0x4d3a04,_0x44373d[_0x3ff831(0x1ef)]=_0x394152,_0x44373d[_0x3ff831(0x1d1)]=_0x1b1561,_0x44373d[_0x3ff831(0x21f)]=_0x390552,_0x44373d['return_sale']=_0xb787fe,_0x44373d[_0x3ff831(0x227)]=_0x473f6a,_0x44373d[_0x3ff831(0x1ce)]=_0x330c30,_0x44373d[_0x3ff831(0x1d5)]=_0x42a285;const _0x4a8e55=await _0x44373d[_0x3ff831(0x22e)]();console['log'](_0x3ff831(0x1d0),_0x4a8e55);const _0x168b23=await c_payment_data['findOne']({'invoice':_0x3c5e13[_0x3ff831(0x1de)][_0x3ff831(0x228)],'reason':'Sale\x20Return'});_0x168b23[_0x3ff831(0x207)]=_0x3c5e13['body'][_0x3ff831(0x207)],_0x168b23[_0x3ff831(0x1d1)]=_0x3c5e13['body'][_0x3ff831(0x1d1)],await _0x168b23[_0x3ff831(0x22e)](),_0x3c5e13['flash'](_0x3ff831(0x1fd),_0x3ff831(0x24b)),_0x2f769f[_0x3ff831(0x1eb)](_0x3ff831(0x217));}catch(_0x3c1bb7){console['log'](_0x3c1bb7),_0x2f769f[_0x3ff831(0x1ff)](0xc8)['json']({'message':_0x3c1bb7[_0x3ff831(0x1f0)]});}}),router['post'](a0_0x109b39(0x236),auth,async(_0x19573f,_0x138094)=>{var _0x562fce=a0_0x109b39;try{const _0x41941e=_0x19573f[_0x562fce(0x1dc)]['id'],{invoice:_0x3b4e65,customer:_0xd264e1,payable_to_customer:_0x396c1e,paid_amount:_0x16b4fa}=_0x19573f[_0x562fce(0x1de)],_0x48375b=await sales_return['findById'](_0x41941e);console['log'](_0x562fce(0x212),_0x48375b),console['log'](_0x396c1e),console[_0x562fce(0x204)](_0x16b4fa);var _0x402b62=_0x396c1e-_0x16b4fa;console[_0x562fce(0x204)](_0x562fce(0x1e3),_0x402b62),_0x48375b['paid_amount']=parseFloat(_0x16b4fa)+parseFloat(_0x48375b[_0x562fce(0x1d6)]),_0x48375b[_0x562fce(0x1f8)]=_0x402b62,console[_0x562fce(0x204)](_0x48375b);const _0x26bd88=await _0x48375b[_0x562fce(0x22e)]();console[_0x562fce(0x204)](0x1b207);const _0x53f876=await c_payment_data[_0x562fce(0x242)]({'invoice':_0x19573f[_0x562fce(0x1de)][_0x562fce(0x228)],'reason':_0x562fce(0x216)});console[_0x562fce(0x204)](_0x562fce(0x22b),_0x53f876),_0x53f876[_0x562fce(0x1e7)]=_0x402b62,await _0x53f876[_0x562fce(0x22e)]();let _0x36ef7b=new Date(),_0x598c9b=('0'+_0x36ef7b['getDate']())[_0x562fce(0x218)](-0x2),_0x50ba7c=('0'+(_0x36ef7b[_0x562fce(0x222)]()+0x1))[_0x562fce(0x218)](-0x2),_0x213205=_0x36ef7b[_0x562fce(0x20b)](),_0x1cd842=_0x213205+'-'+_0x50ba7c+'-'+_0x598c9b;const _0x2a5031=new customer_payment({'invoice':_0x3b4e65,'date':_0x213205+'-'+_0x50ba7c+'-'+_0x598c9b,'customer':_0xd264e1,'reason':_0x562fce(0x1d8),'amount':_0x16b4fa}),_0xea5d72=await _0x2a5031[_0x562fce(0x22e)]();_0x19573f[_0x562fce(0x1fc)]('success',_0x562fce(0x1f4)),_0x138094[_0x562fce(0x1eb)]('/sales_return/view');}catch(_0xf02840){console['log'](_0xf02840);}}),router[a0_0x109b39(0x208)](a0_0x109b39(0x1ea),auth,async(_0x3078fb,_0xea7f4)=>{var _0x30b6ea=a0_0x109b39;try{const {username:_0x52be0f,email:_0x1494ce,role:_0x1b8fb9}=_0x3078fb[_0x30b6ea(0x1e4)],_0x501d31=_0x3078fb[_0x30b6ea(0x1e4)],_0x3578fc=await profile[_0x30b6ea(0x242)]({'email':_0x501d31[_0x30b6ea(0x209)]}),_0x12ebc3=await master_shop[_0x30b6ea(0x211)]();console['log'](_0x30b6ea(0x22a),_0x12ebc3);const _0x16c009=_0x3078fb[_0x30b6ea(0x1dc)]['id'],_0x52c69e=await sales_return['findById'](_0x16c009);console[_0x30b6ea(0x204)](_0x52c69e);const _0x42c58b=await customer[_0x30b6ea(0x242)]({'name':_0x52c69e[_0x30b6ea(0x1ef)]});console[_0x30b6ea(0x204)](_0x42c58b);if(_0x12ebc3[0x0]['language']==_0x30b6ea(0x246)){var _0x52904a=users[_0x30b6ea(0x203)];console[_0x30b6ea(0x204)](_0x52904a);}else{if(_0x12ebc3[0x0][_0x30b6ea(0x21d)]==_0x30b6ea(0x1f7))var _0x52904a=users[_0x30b6ea(0x1f7)];else{if(_0x12ebc3[0x0][_0x30b6ea(0x21d)]==_0x30b6ea(0x232))var _0x52904a=users[_0x30b6ea(0x232)];else{if(_0x12ebc3[0x0]['language']==_0x30b6ea(0x219))var _0x52904a=users[_0x30b6ea(0x219)];else{if(_0x12ebc3[0x0][_0x30b6ea(0x21d)]==_0x30b6ea(0x21a))var _0x52904a=users[_0x30b6ea(0x21a)];else{if(_0x12ebc3[0x0][_0x30b6ea(0x21d)]==_0x30b6ea(0x202))var _0x52904a=users[_0x30b6ea(0x20e)];else{if(_0x12ebc3[0x0]['language']==_0x30b6ea(0x233))var _0x52904a=users[_0x30b6ea(0x233)];else{if(_0x12ebc3[0x0][_0x30b6ea(0x21d)]=='Arabic\x20(ae)')var _0x52904a=users[_0x30b6ea(0x1f6)];}}}}}}}_0xea7f4[_0x30b6ea(0x1cb)](_0x30b6ea(0x206),{'success':_0x3078fb[_0x30b6ea(0x1fc)](_0x30b6ea(0x1fd)),'errors':_0x3078fb[_0x30b6ea(0x1fc)](_0x30b6ea(0x201)),'role':_0x501d31,'profile':_0x3578fc,'master_shop':_0x12ebc3,'customers':_0x42c58b,'sales':_0x52c69e,'language':_0x52904a});}catch(_0x29c6cc){console['log'](_0x29c6cc);}}),module[a0_0x109b39(0x214)]=router;