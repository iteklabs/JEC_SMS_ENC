var a0_0x158ec5=a0_0x4da6;(function(_0x2a5987,_0x505789){var _0x43f8a0=a0_0x4da6,_0x1bd3c6=_0x2a5987();while(!![]){try{var _0x1eaff4=-parseInt(_0x43f8a0(0x172))/0x1*(parseInt(_0x43f8a0(0x169))/0x2)+-parseInt(_0x43f8a0(0x15e))/0x3+-parseInt(_0x43f8a0(0x137))/0x4*(parseInt(_0x43f8a0(0x146))/0x5)+parseInt(_0x43f8a0(0x117))/0x6*(-parseInt(_0x43f8a0(0x16f))/0x7)+-parseInt(_0x43f8a0(0x13d))/0x8+-parseInt(_0x43f8a0(0x17d))/0x9+parseInt(_0x43f8a0(0x164))/0xa;if(_0x1eaff4===_0x505789)break;else _0x1bd3c6['push'](_0x1bd3c6['shift']());}catch(_0x3562b0){_0x1bd3c6['push'](_0x1bd3c6['shift']());}}}(a0_0x1f2a,0x53a02));const express=require('express'),app=express(),router=express[a0_0x158ec5(0x176)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require(a0_0x158ec5(0x148)),users=require(a0_0x158ec5(0x177));router[a0_0x158ec5(0x12c)](a0_0x158ec5(0x163),auth,async(_0x227b16,_0x144ddb)=>{var _0x1567c7=a0_0x158ec5;try{const {username:_0x482425,email:_0x2fc028,role:_0x4821bc}=_0x227b16[_0x1567c7(0x175)],_0x8be881=_0x227b16['user'],_0x1abdc8=await profile[_0x1567c7(0x166)]({'email':_0x8be881[_0x1567c7(0x14c)]}),_0x15313b=await master_shop[_0x1567c7(0x138)](),_0x458143=await sales_return_finished[_0x1567c7(0x11f)]([{'$lookup':{'from':_0x1567c7(0x145),'localField':'customer','foreignField':'name','as':_0x1567c7(0x15a)}},{'$unwind':_0x1567c7(0x121)}]);if(_0x15313b[0x0]['language']==_0x1567c7(0x16d)){var _0x23ef14=users['English'];console['log'](_0x23ef14);}else{if(_0x15313b[0x0]['language']==_0x1567c7(0x12f))var _0x23ef14=users[_0x1567c7(0x12f)];else{if(_0x15313b[0x0][_0x1567c7(0x157)]==_0x1567c7(0x14e))var _0x23ef14=users[_0x1567c7(0x14e)];else{if(_0x15313b[0x0][_0x1567c7(0x157)]==_0x1567c7(0x16a))var _0x23ef14=users[_0x1567c7(0x16a)];else{if(_0x15313b[0x0][_0x1567c7(0x157)]==_0x1567c7(0x13a))var _0x23ef14=users[_0x1567c7(0x13a)];else{if(_0x15313b[0x0]['language']==_0x1567c7(0x162))var _0x23ef14=users['Portuguese'];else{if(_0x15313b[0x0][_0x1567c7(0x157)]==_0x1567c7(0x13c))var _0x23ef14=users[_0x1567c7(0x13c)];else{if(_0x15313b[0x0][_0x1567c7(0x157)]==_0x1567c7(0x171))var _0x23ef14=users[_0x1567c7(0x173)];}}}}}}}_0x144ddb[_0x1567c7(0x139)](_0x1567c7(0x133),{'success':_0x227b16[_0x1567c7(0x147)](_0x1567c7(0x159)),'errors':_0x227b16[_0x1567c7(0x147)](_0x1567c7(0x180)),'role':_0x8be881,'profile':_0x1abdc8,'master_shop':_0x15313b,'user':_0x458143,'language':_0x23ef14});}catch(_0x4b7970){console[_0x1567c7(0x149)](_0x4b7970);}}),router[a0_0x158ec5(0x12c)](a0_0x158ec5(0x120),auth,async(_0x569ba8,_0x5c5126)=>{var _0x37d2bf=a0_0x158ec5;try{const {username:_0x491799,email:_0x11654b,role:_0x592b6d}=_0x569ba8[_0x37d2bf(0x175)],_0x227e26=_0x569ba8[_0x37d2bf(0x175)],_0x191540=await profile['findOne']({'email':_0x227e26[_0x37d2bf(0x14c)]}),_0x3b14a4=await master_shop[_0x37d2bf(0x138)]();console[_0x37d2bf(0x149)]('master',_0x3b14a4);const _0x42a1b2=_0x569ba8[_0x37d2bf(0x114)]['id'];console['log'](_0x42a1b2);var _0x490e0a=[_0x37d2bf(0x122)];const _0x4ef172=await sales_return_finished['findById'](_0x42a1b2),_0x252adf=await warehouse[_0x37d2bf(0x11f)]([{'$match':{'name':_0x4ef172[_0x37d2bf(0x135)],'room':_0x4ef172[_0x37d2bf(0x10b)]}},{'$unwind':_0x37d2bf(0x10c)},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x37d2bf(0x129)},'bin':{'$first':_0x37d2bf(0x16c)},'type':{'$first':_0x37d2bf(0x11a)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x37d2bf(0x125)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x37d2bf(0x11e)},'storage':{'$first':_0x37d2bf(0x15d)},'rack':{'$first':_0x37d2bf(0x13e)}}}]);console['log'](_0x252adf);const _0x4c1230=await warehouse[_0x37d2bf(0x11f)]([{'$match':{'status':_0x37d2bf(0x144),'warehouse_category':_0x37d2bf(0x160)}},{'$group':{'_id':'$name','name':{'$first':_0x37d2bf(0x124)}}},{'$sort':{'name':0x1}}]),_0x349d4b=await warehouse[_0x37d2bf(0x11f)]([{'$match':{'status':_0x37d2bf(0x144),'name':'QA\x20Warehouse'}},{'$group':{'_id':_0x37d2bf(0x124),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x3d16a0=await product[_0x37d2bf(0x138)]({});if(_0x3b14a4[0x0][_0x37d2bf(0x157)]==_0x37d2bf(0x16d)){var _0x349bbb=users['English'];console[_0x37d2bf(0x149)](_0x349bbb);}else{if(_0x3b14a4[0x0][_0x37d2bf(0x157)]==_0x37d2bf(0x12f))var _0x349bbb=users[_0x37d2bf(0x12f)];else{if(_0x3b14a4[0x0][_0x37d2bf(0x157)]==_0x37d2bf(0x14e))var _0x349bbb=users[_0x37d2bf(0x14e)];else{if(_0x3b14a4[0x0]['language']=='Spanish')var _0x349bbb=users[_0x37d2bf(0x16a)];else{if(_0x3b14a4[0x0][_0x37d2bf(0x157)]==_0x37d2bf(0x13a))var _0x349bbb=users[_0x37d2bf(0x13a)];else{if(_0x3b14a4[0x0][_0x37d2bf(0x157)]==_0x37d2bf(0x162))var _0x349bbb=users[_0x37d2bf(0x14a)];else{if(_0x3b14a4[0x0]['language']=='Chinese')var _0x349bbb=users[_0x37d2bf(0x13c)];else{if(_0x3b14a4[0x0]['language']==_0x37d2bf(0x171))var _0x349bbb=users[_0x37d2bf(0x173)];}}}}}}}_0x5c5126[_0x37d2bf(0x139)]('return_sale_edit_finished',{'success':_0x569ba8['flash'](_0x37d2bf(0x159)),'errors':_0x569ba8[_0x37d2bf(0x147)](_0x37d2bf(0x180)),'role':_0x227e26,'profile':_0x191540,'master_shop':_0x3b14a4,'user':_0x4ef172,'stock':_0x252adf,'unit':_0x3d16a0,'language':_0x349bbb,'warehouses':_0x4c1230,'rooms':_0x490e0a,'warehouse_QA':_0x349d4b});}catch(_0x2ba2a0){console[_0x37d2bf(0x149)](_0x2ba2a0);}}),router['post'](a0_0x158ec5(0x120),auth,async(_0x5d4f21,_0x1e1d96)=>{var _0x5f282d=a0_0x158ec5;if(_0x5d4f21[_0x5f282d(0x155)]['for_categorize']=='QA')try{const _0x4391fc=_0x5d4f21[_0x5f282d(0x114)]['id'],_0x2cfb0b=await sales_return[_0x5f282d(0x166)]({'invoice':_0x5d4f21[_0x5f282d(0x155)]['invoice']}),_0x1c0e06=await warehouse[_0x5f282d(0x166)]({'name':_0x2cfb0b[_0x5f282d(0x135)],'room':_0x2cfb0b['ToRoom']}),{invoice:_0x49092c,customer:_0x30fd00,date:_0x4374b1,warehouse_name:_0x426c58,product_name:_0x3de90a,primary_code:_0x4a9ed5,secondary_code:_0x443a70,product_code:_0x45d5ee,sales_quantity:_0x13a5f4,stocks:_0x178d7a,return_qty:_0x4b1b55,note:_0x20f654,to_warehouse_name_QA:_0x1e6856,to_Room_name_QA:_0x11d861}=_0x5d4f21[_0x5f282d(0x155)];if(typeof product_name_QA==_0x5f282d(0x127))var _0x53da57=[_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x115)]],_0x3841db=[_0x5d4f21[_0x5f282d(0x155)]['primary_code_QA']],_0x564158=[_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x156)]],_0x5f1e71=[_0x5d4f21['body'][_0x5f282d(0x181)]],_0x496a23=[_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x178)]],_0x4c0c23=[_0x5d4f21['body'][_0x5f282d(0x152)]],_0x234d72=[_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x151)]];else var _0x53da57=[..._0x5d4f21['body'][_0x5f282d(0x115)]],_0x3841db=[..._0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x119)]],_0x564158=[..._0x5d4f21['body']['secondary_code_QA']],_0x5f1e71=[..._0x5d4f21['body'][_0x5f282d(0x181)]],_0x496a23=[..._0x5d4f21[_0x5f282d(0x155)]['sales_quantity_QA']],_0x4c0c23=[..._0x5d4f21[_0x5f282d(0x155)]['stocks_QA']],_0x234d72=[..._0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x151)]];const _0x98c6b4=_0x53da57[_0x5f282d(0x16b)](_0xae44da=>{return _0xae44da={'product_name':_0xae44da};});_0x3841db[_0x5f282d(0x17a)]((_0x146352,_0x2dabb4)=>{_0x98c6b4[_0x2dabb4]['primary_code']=_0x146352;}),_0x564158[_0x5f282d(0x17a)]((_0x3f6c34,_0x4edd3d)=>{var _0x149d9e=_0x5f282d;_0x98c6b4[_0x4edd3d][_0x149d9e(0x150)]=_0x3f6c34;}),_0x5f1e71['forEach']((_0x42d580,_0x4aa35e)=>{var _0x3db7d5=_0x5f282d;_0x98c6b4[_0x4aa35e][_0x3db7d5(0x112)]=_0x42d580;}),_0x496a23['forEach']((_0x5b25c5,_0xe55404)=>{var _0x35c2a1=_0x5f282d;_0x98c6b4[_0xe55404][_0x35c2a1(0x17f)]=_0x5b25c5;}),_0x4c0c23[_0x5f282d(0x17a)]((_0x36c674,_0x478694)=>{var _0x2b95ac=_0x5f282d;_0x98c6b4[_0x478694][_0x2b95ac(0x123)]=_0x36c674;}),_0x234d72[_0x5f282d(0x17a)]((_0x4e584d,_0x2fb9a3)=>{var _0x326ec2=_0x5f282d;_0x98c6b4[_0x2fb9a3][_0x326ec2(0x126)]=_0x4e584d;}),_0x2cfb0b['return_sale_QA'][_0x5f282d(0x17a)](_0x4fa6c3=>{var _0x37915b=_0x5f282d;const _0x124524=_0x1c0e06[_0x37915b(0x179)][_0x37915b(0x16b)](_0x3b5b93=>{var _0x19c904=_0x37915b;_0x3b5b93[_0x19c904(0x118)]==_0x4fa6c3[_0x19c904(0x118)]&&(_0x3b5b93[_0x19c904(0x110)]=parseInt(_0x3b5b93['product_stock'])+parseInt(_0x4fa6c3[_0x19c904(0x126)]));});}),await _0x1c0e06[_0x5f282d(0x158)](),_0x2cfb0b[_0x5f282d(0x15f)]=_0x49092c,_0x2cfb0b['customer']=_0x30fd00,_0x2cfb0b[_0x5f282d(0x130)]=_0x4374b1,_0x2cfb0b[_0x5f282d(0x10e)]=_0x426c58,_0x2cfb0b[_0x5f282d(0x12b)]=_0x98c6b4,_0x2cfb0b[_0x5f282d(0x161)]=_0x20f654,_0x2cfb0b[_0x5f282d(0x135)]=_0x1e6856,_0x2cfb0b[_0x5f282d(0x10b)]=_0x11d861;const _0x1f5fe3=await _0x2cfb0b[_0x5f282d(0x158)](),_0xae6512=await c_payment_data[_0x5f282d(0x166)]({'invoice':_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x15f)],'reason':_0x5f282d(0x141)});_0xae6512[_0x5f282d(0x113)]=_0x5d4f21[_0x5f282d(0x155)]['suppliers'],_0xae6512[_0x5f282d(0x130)]=_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x130)],await _0xae6512['save'](),_0x5d4f21['flash'](_0x5f282d(0x159),_0x5f282d(0x11b)),_0x1e1d96['redirect'](_0x5f282d(0x17b));}catch(_0x24e513){console['log'](_0x24e513),_0x1e1d96[_0x5f282d(0x134)](0xc8)[_0x5f282d(0x142)]({'message':_0x24e513[_0x5f282d(0x14b)]});}else try{const _0x299596=_0x5d4f21['params']['id'];console[_0x5f282d(0x149)](_0x299596);const _0x23f93f=await sales_return[_0x5f282d(0x166)]({'invoice':_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x15f)]});console[_0x5f282d(0x149)](_0x5f282d(0x17c),_0x23f93f);const _0x53a8fc=await warehouse[_0x5f282d(0x166)]({'name':_0x23f93f[_0x5f282d(0x135)],'room':_0x23f93f[_0x5f282d(0x10b)]});console[_0x5f282d(0x149)](_0x5f282d(0x170),_0x53a8fc);const {invoice:_0x14ee31,customer:_0x5852ce,date:_0x213078,warehouse_name:_0x2cfe0e,product_name:_0x293695,primary_code:_0x1fee50,secondary_code:_0x390ce3,product_code:_0x27e989,sales_quantity:_0x5391ff,stocks:_0x2b59dc,return_qty:_0x48346d,note:_0xe55c5,to_warehouse_name:_0x1b6372,to_Room_name:_0x44640c}=_0x5d4f21[_0x5f282d(0x155)];console[_0x5f282d(0x149)](_0x5d4f21[_0x5f282d(0x155)]);if(typeof _0x293695==_0x5f282d(0x127))var _0x53da57=[_0x5d4f21['body'][_0x5f282d(0x118)]],_0x3841db=[_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x116)]],_0x564158=[_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x150)]],_0x5f1e71=[_0x5d4f21['body']['product_code']],_0x496a23=[_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x132)]],_0x4c0c23=[_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x11c)]],_0x234d72=[_0x5d4f21[_0x5f282d(0x155)]['return_qty']],_0x54fa50=[_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x12e)]],_0x4629d1=[_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x15c)]],_0x418925=[_0x5d4f21[_0x5f282d(0x155)]['types']],_0x3104ca=[_0x5d4f21['body'][_0x5f282d(0x143)]];else var _0x53da57=[..._0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x118)]],_0x3841db=[..._0x5d4f21[_0x5f282d(0x155)]['primary_code']],_0x564158=[..._0x5d4f21[_0x5f282d(0x155)]['secondary_code']],_0x5f1e71=[..._0x5d4f21[_0x5f282d(0x155)]['product_code']],_0x496a23=[..._0x5d4f21['body'][_0x5f282d(0x132)]],_0x4c0c23=[..._0x5d4f21['body'][_0x5f282d(0x11c)]],_0x234d72=[..._0x5d4f21[_0x5f282d(0x155)]['return_qty']],_0x54fa50=[..._0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x12e)]],_0x4629d1=[..._0x5d4f21['body']['bin']],_0x418925=[..._0x5d4f21[_0x5f282d(0x155)]['types']],_0x3104ca=[..._0x5d4f21['body']['floorlevel']];const _0x27f481=_0x53da57[_0x5f282d(0x16b)](_0x4d97f3=>{return _0x4d97f3={'product_name':_0x4d97f3};});_0x3841db['forEach']((_0x3d299c,_0xfbadcb)=>{var _0x451d5c=_0x5f282d;_0x27f481[_0xfbadcb][_0x451d5c(0x116)]=_0x3d299c;}),_0x564158[_0x5f282d(0x17a)]((_0x5420a9,_0x406cc8)=>{var _0x25ca40=_0x5f282d;_0x27f481[_0x406cc8][_0x25ca40(0x150)]=_0x5420a9;}),_0x5f1e71[_0x5f282d(0x17a)]((_0x61db22,_0x48e5f4)=>{_0x27f481[_0x48e5f4]['product_code']=_0x61db22;}),_0x496a23['forEach']((_0x4d50c2,_0x412c7e)=>{var _0x448e63=_0x5f282d;_0x27f481[_0x412c7e][_0x448e63(0x17f)]=_0x4d50c2;}),_0x4c0c23[_0x5f282d(0x17a)]((_0xcec8f7,_0x2630da)=>{_0x27f481[_0x2630da]['stock']=_0xcec8f7;}),_0x234d72[_0x5f282d(0x17a)]((_0x2f36f1,_0x4dc4a8)=>{_0x27f481[_0x4dc4a8]['return_qty']=_0x2f36f1;}),_0x54fa50['forEach']((_0xd4e00d,_0x3fb663)=>{_0x27f481[_0x3fb663]['bay']=_0xd4e00d;}),_0x4629d1[_0x5f282d(0x17a)]((_0x338390,_0x47f70a)=>{var _0xbc52d=_0x5f282d;_0x27f481[_0x47f70a][_0xbc52d(0x15c)]=_0x338390;}),_0x418925['forEach']((_0x30d420,_0x236f81)=>{var _0x7fd9f7=_0x5f282d;_0x27f481[_0x236f81][_0x7fd9f7(0x174)]=_0x30d420;}),_0x3104ca[_0x5f282d(0x17a)]((_0x2d70b7,_0x2c601a)=>{var _0x455ab8=_0x5f282d;_0x27f481[_0x2c601a][_0x455ab8(0x143)]=_0x2d70b7;});var _0x5c815c=0x0;_0x27f481[_0x5f282d(0x17a)](_0x59f526=>{var _0x39611d=_0x5f282d;console[_0x39611d(0x149)](_0x39611d(0x13f),_0x59f526),(parseInt(_0x59f526[_0x39611d(0x17f)])<parseInt(_0x59f526[_0x39611d(0x126)])||parseInt(_0x59f526[_0x39611d(0x123)])<parseInt(_0x59f526[_0x39611d(0x126)])&&parseInt(_0x59f526[_0x39611d(0x17f)])>parseInt(_0x59f526[_0x39611d(0x126)])||parseInt(_0x59f526[_0x39611d(0x126)])==0x0)&&_0x5c815c++;});if(_0x5c815c!=0x0)return _0x5d4f21['flash'](_0x5f282d(0x180),_0x5f282d(0x153)),_0x1e1d96[_0x5f282d(0x12a)]('back');_0x23f93f[_0x5f282d(0x14d)]['forEach'](_0x2711f0=>{var _0x5f5b33=_0x5f282d;const _0x1d079b=_0x53a8fc[_0x5f5b33(0x179)][_0x5f5b33(0x16b)](_0x46b051=>{var _0x13711f=_0x5f5b33;_0x46b051['product_name']==_0x2711f0['product_name']&&_0x46b051[_0x13711f(0x143)]==_0x2711f0['floorlevel']&&_0x46b051['type']==_0x2711f0[_0x13711f(0x174)]&&_0x46b051['bin']==_0x2711f0[_0x13711f(0x15c)]&&_0x46b051[_0x13711f(0x12e)]==_0x2711f0[_0x13711f(0x12e)]&&(_0x46b051[_0x13711f(0x110)]=parseInt(_0x46b051['product_stock'])+parseInt(_0x2711f0[_0x13711f(0x126)]));});}),console[_0x5f282d(0x149)](_0x5f282d(0x170),_0x53a8fc),await _0x53a8fc[_0x5f282d(0x158)](),_0x23f93f[_0x5f282d(0x15f)]=_0x14ee31,_0x23f93f[_0x5f282d(0x165)]=_0x5852ce,_0x23f93f[_0x5f282d(0x130)]=_0x213078,_0x23f93f[_0x5f282d(0x10e)]=_0x2cfe0e,_0x23f93f[_0x5f282d(0x14d)]=_0x27f481,_0x23f93f[_0x5f282d(0x161)]=_0xe55c5,_0x23f93f['ToWarehouse']=_0x1b6372,_0x23f93f[_0x5f282d(0x10b)]=_0x44640c;const _0x2d607a=await _0x23f93f[_0x5f282d(0x158)]();console[_0x5f282d(0x149)](_0x5f282d(0x15b),_0x2d607a);const _0x559a4a=await c_payment_data[_0x5f282d(0x166)]({'invoice':_0x5d4f21[_0x5f282d(0x155)][_0x5f282d(0x15f)],'reason':_0x5f282d(0x141)});_0x559a4a[_0x5f282d(0x113)]=_0x5d4f21[_0x5f282d(0x155)]['suppliers'],_0x559a4a['date']=_0x5d4f21[_0x5f282d(0x155)]['date'],await _0x559a4a[_0x5f282d(0x158)](),_0x5d4f21[_0x5f282d(0x147)](_0x5f282d(0x159),'purchase\x20return\x20successfully'),_0x1e1d96[_0x5f282d(0x12a)](_0x5f282d(0x13b));}catch(_0x5820d7){console['log'](_0x5820d7),_0x1e1d96['status'](0xc8)[_0x5f282d(0x142)]({'message':_0x5820d7[_0x5f282d(0x14b)]});}}),router[a0_0x158ec5(0x11d)](a0_0x158ec5(0x136),auth,async(_0x3f2635,_0x25d906)=>{var _0x4f3b19=a0_0x158ec5;try{const _0x380bdf=_0x3f2635[_0x4f3b19(0x114)]['id'],{invoice:_0x259477,customer:_0x5be4d7,payable_to_customer:_0x295659,paid_amount:_0x32cadb}=_0x3f2635['body'],_0x20f489=await sales_return['findById'](_0x380bdf);console['log']('data',_0x20f489),console[_0x4f3b19(0x149)](_0x295659),console[_0x4f3b19(0x149)](_0x32cadb);var _0x783b8d=_0x295659-_0x32cadb;console['log'](_0x4f3b19(0x16e),_0x783b8d),_0x20f489[_0x4f3b19(0x10a)]=parseFloat(_0x32cadb)+parseFloat(_0x20f489['paid_amount']),_0x20f489[_0x4f3b19(0x17e)]=_0x783b8d,console[_0x4f3b19(0x149)](_0x20f489);const _0x3b6b0a=await _0x20f489[_0x4f3b19(0x158)]();console[_0x4f3b19(0x149)](0x1b207);const _0x1b0872=await c_payment_data[_0x4f3b19(0x166)]({'invoice':_0x3f2635[_0x4f3b19(0x155)]['invoice'],'reason':'Sale\x20Return'});console[_0x4f3b19(0x149)]('c_payment',_0x1b0872),_0x1b0872[_0x4f3b19(0x168)]=_0x783b8d,await _0x1b0872[_0x4f3b19(0x158)]();let _0x7f2691=new Date(),_0x3a198c=('0'+_0x7f2691[_0x4f3b19(0x154)]())[_0x4f3b19(0x10f)](-0x2),_0x60aeb8=('0'+(_0x7f2691['getMonth']()+0x1))[_0x4f3b19(0x10f)](-0x2),_0x29d303=_0x7f2691[_0x4f3b19(0x14f)](),_0x102f30=_0x29d303+'-'+_0x60aeb8+'-'+_0x3a198c;const _0x2e5044=new customer_payment({'invoice':_0x259477,'date':_0x29d303+'-'+_0x60aeb8+'-'+_0x3a198c,'customer':_0x5be4d7,'reason':_0x4f3b19(0x131),'amount':_0x32cadb}),_0x214888=await _0x2e5044['save']();_0x3f2635[_0x4f3b19(0x147)](_0x4f3b19(0x159),_0x4f3b19(0x167)),_0x25d906[_0x4f3b19(0x12a)](_0x4f3b19(0x13b));}catch(_0x55a6f3){console[_0x4f3b19(0x149)](_0x55a6f3);}}),router[a0_0x158ec5(0x12c)](a0_0x158ec5(0x140),auth,async(_0x1b9c9a,_0x20ee28)=>{var _0x544dd5=a0_0x158ec5;try{const {username:_0xf4494f,email:_0x125c98,role:_0x38deff}=_0x1b9c9a['user'],_0x34c2c2=_0x1b9c9a[_0x544dd5(0x175)],_0x578a85=await profile[_0x544dd5(0x166)]({'email':_0x34c2c2['email']}),_0x1ca5c4=await master_shop[_0x544dd5(0x138)]();console[_0x544dd5(0x149)](_0x544dd5(0x10d),_0x1ca5c4);const _0x4292e9=_0x1b9c9a[_0x544dd5(0x114)]['id'],_0x1c4ea5=await sales_return[_0x544dd5(0x111)](_0x4292e9);console['log'](_0x1c4ea5);const _0x214581=await customer[_0x544dd5(0x166)]({'name':_0x1c4ea5['customer']});console[_0x544dd5(0x149)](_0x214581);if(_0x1ca5c4[0x0]['language']==_0x544dd5(0x16d)){var _0x10767f=users['English'];console[_0x544dd5(0x149)](_0x10767f);}else{if(_0x1ca5c4[0x0][_0x544dd5(0x157)]=='Hindi')var _0x10767f=users[_0x544dd5(0x12f)];else{if(_0x1ca5c4[0x0]['language']==_0x544dd5(0x14e))var _0x10767f=users[_0x544dd5(0x14e)];else{if(_0x1ca5c4[0x0][_0x544dd5(0x157)]==_0x544dd5(0x16a))var _0x10767f=users[_0x544dd5(0x16a)];else{if(_0x1ca5c4[0x0]['language']==_0x544dd5(0x13a))var _0x10767f=users[_0x544dd5(0x13a)];else{if(_0x1ca5c4[0x0][_0x544dd5(0x157)]==_0x544dd5(0x162))var _0x10767f=users[_0x544dd5(0x14a)];else{if(_0x1ca5c4[0x0][_0x544dd5(0x157)]=='Chinese')var _0x10767f=users[_0x544dd5(0x13c)];else{if(_0x1ca5c4[0x0][_0x544dd5(0x157)]==_0x544dd5(0x171))var _0x10767f=users[_0x544dd5(0x173)];}}}}}}}_0x20ee28['render'](_0x544dd5(0x12d),{'success':_0x1b9c9a[_0x544dd5(0x147)]('success'),'errors':_0x1b9c9a['flash'](_0x544dd5(0x180)),'role':_0x34c2c2,'profile':_0x578a85,'master_shop':_0x1ca5c4,'customers':_0x214581,'sales':_0x1c4ea5,'language':_0x10767f});}catch(_0x4d73f2){console['log'](_0x4d73f2);}}),module[a0_0x158ec5(0x128)]=router;function a0_0x4da6(_0x5acf86,_0x5f5305){var _0x1f2a02=a0_0x1f2a();return a0_0x4da6=function(_0x4da6eb,_0x5e9411){_0x4da6eb=_0x4da6eb-0x10a;var _0x3460a4=_0x1f2a02[_0x4da6eb];return _0x3460a4;},a0_0x4da6(_0x5acf86,_0x5f5305);}function a0_0x1f2a(){var _0x4bccb0=['42bFOASV','old_warehouse_data','Arabic\x20(ae)','18DEyMeR','Arabic','type','user','Router','../public/language/languages.json','sales_quantity_QA','product_details','forEach','/sales_return_finished/view','old_data','346716HHUVaI','due_amount','sale_qty','errors','product_code_QA','paid_amount','ToRoom','$product_details','master','warehouse_name','slice','product_stock','findById','product_code','suppliers','params','product_name_QA','primary_code','546414rgRbhN','product_name','primary_code_QA','$product_details.type','purchase\x20return\x20successfully','stocks','post','$product_details.product_code','aggregate','/view/:id','$customer_docs','Return\x20Rooms','stock','$name','$product_details.primary_code','return_qty','string','exports','$product_details.bay','redirect','return_sale_QA','get','sales_return_invoice','bay','Hindi','date','Returned\x20Payment\x20For\x20Sale\x20Return','sales_quantity','sales_return_finished','status','ToWarehouse','/give_payment/:id','116AmbFhN','find','render','French','/sales_return/view','Chinese','1675528sArWpW','$product_details.rack','foreach\x20newproduct','/invoice/:id','Sale\x20Return','json','floorlevel','Enabled','customers','63485xLqWzJ','flash','../middleware/auth','log','Portuguese','message','email','return_sale','German','getFullYear','secondary_code','return_qty_QA','stocks_QA','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','getDate','body','secondary_code_QA','language','save','success','customer_docs','new\x20new_data','bin','$product_details.storage','1234293YJjZfA','invoice','Finished\x20Goods','note','Portuguese\x20(BR)','/view','22022310PQTkHY','customer','findOne','payment\x20successfull','amount','31742AfRoPB','Spanish','map','$product_details.bin','English\x20(US)','subtract'];a0_0x1f2a=function(){return _0x4bccb0;};return a0_0x1f2a();}