function a0_0x4146(_0xf7efd0,_0xce17e6){var _0x3aafc2=a0_0x3aaf();return a0_0x4146=function(_0x4146ec,_0x449ecc){_0x4146ec=_0x4146ec-0x101;var _0x3090a5=_0x3aafc2[_0x4146ec];return _0x3090a5;},a0_0x4146(_0xf7efd0,_0xce17e6);}var a0_0x42ca90=a0_0x4146;(function(_0x1a50eb,_0x45e15b){var _0x288da0=a0_0x4146,_0x39b013=_0x1a50eb();while(!![]){try{var _0x57024f=parseInt(_0x288da0(0x15d))/0x1+-parseInt(_0x288da0(0x10b))/0x2*(parseInt(_0x288da0(0x10d))/0x3)+-parseInt(_0x288da0(0x145))/0x4+parseInt(_0x288da0(0x132))/0x5+parseInt(_0x288da0(0x139))/0x6+-parseInt(_0x288da0(0x131))/0x7+parseInt(_0x288da0(0x14d))/0x8;if(_0x57024f===_0x45e15b)break;else _0x39b013['push'](_0x39b013['shift']());}catch(_0x1677f2){_0x39b013['push'](_0x39b013['shift']());}}}(a0_0x3aaf,0x9abc1));const express=require(a0_0x42ca90(0x107)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x42ca90(0x16a)),auth=require('../middleware/auth'),users=require('../public/language/languages.json');function a0_0x3aaf(){var _0x112828=['return_qty','message','$product_details.product_code','Sale\x20Return','get','sales_return_finished','return_sale','log','$name','customer_docs','/sales_return_finished/view','English\x20(US)','find','product_stock','type','payment\x20successfull','QA\x20Warehouse','flash','old_warehouse_data','product_details','3245361HWlQBt','416600hDAfxw','aggregate','$product_details._id','params','types','success','Spanish','7178634StQtnS','purchase\x20return\x20successfully','product_name_QA','body','customer','bay','$product_details.floorlevel','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','customers','suppliers','sales_return_invoice','Arabic','763416djjDni','findOne','invoice','product_name','ToWarehouse','subtract','c_payment','$customer_docs','4998336yfZWDK','save','Arabic\x20(ae)','Hindi','/invoice/:id','map','ToRoom','/view','warehouse_name','json','sales_quantity_QA','user','render','paid_amount','language','getMonth','349466xUCOrw','secondary_code','$product_details.bay','$product_details.secondary_code','French','forEach','sales_quantity','email','return_sale_edit_finished','$product_details.primary_code','sale_qty','return_sale_QA','master','../models/all_models','floorlevel','post','stocks','product_code','old_data','Returned\x20Payment\x20For\x20Sale\x20Return','errors','amount','back','/view/:id','$product_details.product_name','Portuguese\x20(BR)','bin','secondary_code_QA','stock','Enabled','return_qty_QA','data','findById','slice','date','express','primary_code','string','/sales_return/view','1931494YyNzcw','German','3rSPFHr','Return\x20Rooms','foreach\x20newproduct','English','for_categorize','Chinese','product_code_QA','exports','stocks_QA','primary_code_QA','redirect','status','$product_details.type','new\x20new_data','Portuguese','$product_details.product_stock'];a0_0x3aaf=function(){return _0x112828;};return a0_0x3aaf();}router[a0_0x42ca90(0x121)](a0_0x42ca90(0x154),auth,async(_0x24b9e9,_0x4e8992)=>{var _0x256582=a0_0x42ca90;try{const {username:_0x823c56,email:_0x32a8cb,role:_0x44100e}=_0x24b9e9['user'],_0x396083=_0x24b9e9[_0x256582(0x158)],_0x38138f=await profile[_0x256582(0x146)]({'email':_0x396083['email']}),_0xaff266=await master_shop['find'](),_0x223c8a=await sales_return_finished[_0x256582(0x133)]([{'$lookup':{'from':_0x256582(0x141),'localField':_0x256582(0x13d),'foreignField':'name','as':_0x256582(0x126)}},{'$unwind':_0x256582(0x14c)}]);if(_0xaff266[0x0][_0x256582(0x15b)]==_0x256582(0x128)){var _0x1cbc19=users[_0x256582(0x110)];console[_0x256582(0x124)](_0x1cbc19);}else{if(_0xaff266[0x0][_0x256582(0x15b)]==_0x256582(0x150))var _0x1cbc19=users['Hindi'];else{if(_0xaff266[0x0][_0x256582(0x15b)]==_0x256582(0x10c))var _0x1cbc19=users['German'];else{if(_0xaff266[0x0]['language']==_0x256582(0x138))var _0x1cbc19=users[_0x256582(0x138)];else{if(_0xaff266[0x0][_0x256582(0x15b)]==_0x256582(0x161))var _0x1cbc19=users['French'];else{if(_0xaff266[0x0][_0x256582(0x15b)]==_0x256582(0x176))var _0x1cbc19=users[_0x256582(0x11b)];else{if(_0xaff266[0x0][_0x256582(0x15b)]==_0x256582(0x112))var _0x1cbc19=users[_0x256582(0x112)];else{if(_0xaff266[0x0][_0x256582(0x15b)]==_0x256582(0x14f))var _0x1cbc19=users[_0x256582(0x144)];}}}}}}}_0x4e8992[_0x256582(0x159)](_0x256582(0x122),{'success':_0x24b9e9[_0x256582(0x12e)]('success'),'errors':_0x24b9e9[_0x256582(0x12e)](_0x256582(0x171)),'role':_0x396083,'profile':_0x38138f,'master_shop':_0xaff266,'user':_0x223c8a,'language':_0x1cbc19});}catch(_0x3779f6){console[_0x256582(0x124)](_0x3779f6);}}),router[a0_0x42ca90(0x121)]('/view/:id',auth,async(_0x216268,_0x3cfbae)=>{var _0x1f4fc7=a0_0x42ca90;try{const {username:_0x4ad5aa,email:_0xf87038,role:_0x4ea090}=_0x216268[_0x1f4fc7(0x158)],_0x269eb2=_0x216268[_0x1f4fc7(0x158)],_0x2e1858=await profile[_0x1f4fc7(0x146)]({'email':_0x269eb2[_0x1f4fc7(0x164)]}),_0x383538=await master_shop[_0x1f4fc7(0x129)]();console['log'](_0x1f4fc7(0x169),_0x383538);const _0x4b764c=_0x216268[_0x1f4fc7(0x135)]['id'];console[_0x1f4fc7(0x124)](_0x4b764c);var _0x3fa812=[_0x1f4fc7(0x10e)];const _0x31fcae=await sales_return_finished['findById'](_0x4b764c),_0x14c956=await warehouse['aggregate']([{'$match':{'name':_0x31fcae[_0x1f4fc7(0x149)],'room':_0x31fcae['ToRoom']}},{'$unwind':'$product_details'},{'$group':{'_id':_0x1f4fc7(0x134),'name':{'$first':_0x1f4fc7(0x175)},'product_stock':{'$first':_0x1f4fc7(0x11c)},'bay':{'$first':_0x1f4fc7(0x15f)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x1f4fc7(0x119)},'floorlevel':{'$first':_0x1f4fc7(0x13f)},'primary_code':{'$first':_0x1f4fc7(0x166)},'secondary_code':{'$first':_0x1f4fc7(0x160)},'product_code':{'$first':_0x1f4fc7(0x11f)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'}}}]);console[_0x1f4fc7(0x124)](_0x14c956);const _0x408467=await warehouse['aggregate']([{'$match':{'status':_0x1f4fc7(0x101),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x1f4fc7(0x125),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x52ce6a=await warehouse[_0x1f4fc7(0x133)]([{'$match':{'status':_0x1f4fc7(0x101),'name':_0x1f4fc7(0x12d)}},{'$group':{'_id':_0x1f4fc7(0x125),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x50bb08=await product[_0x1f4fc7(0x129)]({});if(_0x383538[0x0]['language']=='English\x20(US)'){var _0x377dc4=users['English'];console['log'](_0x377dc4);}else{if(_0x383538[0x0]['language']==_0x1f4fc7(0x150))var _0x377dc4=users['Hindi'];else{if(_0x383538[0x0][_0x1f4fc7(0x15b)]=='German')var _0x377dc4=users[_0x1f4fc7(0x10c)];else{if(_0x383538[0x0][_0x1f4fc7(0x15b)]=='Spanish')var _0x377dc4=users[_0x1f4fc7(0x138)];else{if(_0x383538[0x0]['language']==_0x1f4fc7(0x161))var _0x377dc4=users[_0x1f4fc7(0x161)];else{if(_0x383538[0x0][_0x1f4fc7(0x15b)]==_0x1f4fc7(0x176))var _0x377dc4=users[_0x1f4fc7(0x11b)];else{if(_0x383538[0x0][_0x1f4fc7(0x15b)]==_0x1f4fc7(0x112))var _0x377dc4=users[_0x1f4fc7(0x112)];else{if(_0x383538[0x0][_0x1f4fc7(0x15b)]==_0x1f4fc7(0x14f))var _0x377dc4=users[_0x1f4fc7(0x144)];}}}}}}}_0x3cfbae[_0x1f4fc7(0x159)](_0x1f4fc7(0x165),{'success':_0x216268[_0x1f4fc7(0x12e)](_0x1f4fc7(0x137)),'errors':_0x216268['flash'](_0x1f4fc7(0x171)),'role':_0x269eb2,'profile':_0x2e1858,'master_shop':_0x383538,'user':_0x31fcae,'stock':_0x14c956,'unit':_0x50bb08,'language':_0x377dc4,'warehouses':_0x408467,'rooms':_0x3fa812,'warehouse_QA':_0x52ce6a});}catch(_0x154603){console['log'](_0x154603);}}),router[a0_0x42ca90(0x16c)](a0_0x42ca90(0x174),auth,async(_0x36e1b8,_0x56ad9b)=>{var _0x264968=a0_0x42ca90;if(_0x36e1b8[_0x264968(0x13c)][_0x264968(0x111)]=='QA')try{const _0x59f548=_0x36e1b8[_0x264968(0x135)]['id'],_0x29dc8d=await sales_return[_0x264968(0x146)]({'invoice':_0x36e1b8[_0x264968(0x13c)][_0x264968(0x147)]}),_0x1812d6=await warehouse[_0x264968(0x146)]({'name':_0x29dc8d[_0x264968(0x149)],'room':_0x29dc8d[_0x264968(0x153)]}),{invoice:_0x241cb5,customer:_0x2704af,date:_0x4156d9,warehouse_name:_0x84f03a,product_name:_0x2944de,primary_code:_0x2b608b,secondary_code:_0x19a1c2,product_code:_0x3ee2f2,sales_quantity:_0x5088e5,stocks:_0x17ce6c,return_qty:_0x587e54,note:_0x23e04b,to_warehouse_name_QA:_0x1acbea,to_Room_name_QA:_0x4b5172}=_0x36e1b8[_0x264968(0x13c)];if(typeof product_name_QA==_0x264968(0x109))var _0x3e0763=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x13b)]],_0x4ea673=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x116)]],_0x5934b3=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x178)]],_0xb14f42=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x113)]],_0x5994cf=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x157)]],_0x3196ae=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x115)]],_0x2e0266=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x102)]];else var _0x3e0763=[..._0x36e1b8['body'][_0x264968(0x13b)]],_0x4ea673=[..._0x36e1b8[_0x264968(0x13c)][_0x264968(0x116)]],_0x5934b3=[..._0x36e1b8[_0x264968(0x13c)][_0x264968(0x178)]],_0xb14f42=[..._0x36e1b8['body'][_0x264968(0x113)]],_0x5994cf=[..._0x36e1b8[_0x264968(0x13c)][_0x264968(0x157)]],_0x3196ae=[..._0x36e1b8['body']['stocks_QA']],_0x2e0266=[..._0x36e1b8[_0x264968(0x13c)][_0x264968(0x102)]];const _0xf78ea=_0x3e0763[_0x264968(0x152)](_0x412c81=>{return _0x412c81={'product_name':_0x412c81};});_0x4ea673[_0x264968(0x162)]((_0x31fa0a,_0x1e50c6)=>{_0xf78ea[_0x1e50c6]['primary_code']=_0x31fa0a;}),_0x5934b3['forEach']((_0x2b060a,_0x1d088c)=>{var _0x1c9a24=_0x264968;_0xf78ea[_0x1d088c][_0x1c9a24(0x15e)]=_0x2b060a;}),_0xb14f42['forEach']((_0x240363,_0x71070a)=>{var _0xc86a1c=_0x264968;_0xf78ea[_0x71070a][_0xc86a1c(0x16e)]=_0x240363;}),_0x5994cf['forEach']((_0x1d8b8b,_0xc4ba58)=>{var _0x93e43=_0x264968;_0xf78ea[_0xc4ba58][_0x93e43(0x167)]=_0x1d8b8b;}),_0x3196ae[_0x264968(0x162)]((_0x2fcf79,_0x42b8f4)=>{_0xf78ea[_0x42b8f4]['stock']=_0x2fcf79;}),_0x2e0266[_0x264968(0x162)]((_0x28afa2,_0x43b710)=>{_0xf78ea[_0x43b710]['return_qty']=_0x28afa2;}),_0x29dc8d[_0x264968(0x168)]['forEach'](_0x339f16=>{var _0xab172f=_0x264968;const _0xa0fdbd=_0x1812d6[_0xab172f(0x130)][_0xab172f(0x152)](_0x42a716=>{var _0x218283=_0xab172f;_0x42a716[_0x218283(0x148)]==_0x339f16[_0x218283(0x148)]&&(_0x42a716['product_stock']=parseInt(_0x42a716[_0x218283(0x12a)])+parseInt(_0x339f16[_0x218283(0x11d)]));});}),await _0x1812d6[_0x264968(0x14e)](),_0x29dc8d[_0x264968(0x147)]=_0x241cb5,_0x29dc8d[_0x264968(0x13d)]=_0x2704af,_0x29dc8d[_0x264968(0x106)]=_0x4156d9,_0x29dc8d['warehouse_name']=_0x84f03a,_0x29dc8d[_0x264968(0x168)]=_0xf78ea,_0x29dc8d['note']=_0x23e04b,_0x29dc8d[_0x264968(0x149)]=_0x1acbea,_0x29dc8d[_0x264968(0x153)]=_0x4b5172;const _0x30d72b=await _0x29dc8d[_0x264968(0x14e)](),_0x4e7d60=await c_payment_data[_0x264968(0x146)]({'invoice':_0x36e1b8[_0x264968(0x13c)][_0x264968(0x147)],'reason':_0x264968(0x120)});_0x4e7d60[_0x264968(0x142)]=_0x36e1b8[_0x264968(0x13c)][_0x264968(0x142)],_0x4e7d60[_0x264968(0x106)]=_0x36e1b8[_0x264968(0x13c)][_0x264968(0x106)],await _0x4e7d60[_0x264968(0x14e)](),_0x36e1b8['flash'](_0x264968(0x137),_0x264968(0x13a)),_0x56ad9b[_0x264968(0x117)](_0x264968(0x127));}catch(_0x143d46){console[_0x264968(0x124)](_0x143d46),_0x56ad9b[_0x264968(0x118)](0xc8)[_0x264968(0x156)]({'message':_0x143d46[_0x264968(0x11e)]});}else try{const _0x2bb845=_0x36e1b8[_0x264968(0x135)]['id'];console[_0x264968(0x124)](_0x2bb845);const _0xcdc70e=await sales_return[_0x264968(0x146)]({'invoice':_0x36e1b8['body'][_0x264968(0x147)]});console[_0x264968(0x124)](_0x264968(0x16f),_0xcdc70e);const _0x397172=await warehouse[_0x264968(0x146)]({'name':_0xcdc70e[_0x264968(0x149)],'room':_0xcdc70e[_0x264968(0x153)]});console[_0x264968(0x124)](_0x264968(0x12f),_0x397172);const {invoice:_0x58f084,customer:_0xcc0a87,date:_0x5cdad9,warehouse_name:_0x449b84,product_name:_0x2d98d8,primary_code:_0x596132,secondary_code:_0x25609e,product_code:_0x177e87,sales_quantity:_0x26a9e3,stocks:_0xa0f7df,return_qty:_0x265401,note:_0x288a2b,to_warehouse_name:_0x2c5b6d,to_Room_name:_0x57dea0}=_0x36e1b8[_0x264968(0x13c)];console['log'](_0x36e1b8[_0x264968(0x13c)]);if(typeof _0x2d98d8=='string')var _0x3e0763=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x148)]],_0x4ea673=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x108)]],_0x5934b3=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x15e)]],_0xb14f42=[_0x36e1b8['body']['product_code']],_0x5994cf=[_0x36e1b8['body'][_0x264968(0x163)]],_0x3196ae=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x16d)]],_0x2e0266=[_0x36e1b8['body']['return_qty']],_0x4c2d2b=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x13e)]],_0x3e54ad=[_0x36e1b8[_0x264968(0x13c)][_0x264968(0x177)]],_0x52a755=[_0x36e1b8[_0x264968(0x13c)]['types']],_0xe60885=[_0x36e1b8['body']['floorlevel']];else var _0x3e0763=[..._0x36e1b8['body'][_0x264968(0x148)]],_0x4ea673=[..._0x36e1b8[_0x264968(0x13c)][_0x264968(0x108)]],_0x5934b3=[..._0x36e1b8[_0x264968(0x13c)][_0x264968(0x15e)]],_0xb14f42=[..._0x36e1b8[_0x264968(0x13c)][_0x264968(0x16e)]],_0x5994cf=[..._0x36e1b8[_0x264968(0x13c)]['sales_quantity']],_0x3196ae=[..._0x36e1b8[_0x264968(0x13c)][_0x264968(0x16d)]],_0x2e0266=[..._0x36e1b8[_0x264968(0x13c)][_0x264968(0x11d)]],_0x4c2d2b=[..._0x36e1b8[_0x264968(0x13c)]['bay']],_0x3e54ad=[..._0x36e1b8[_0x264968(0x13c)][_0x264968(0x177)]],_0x52a755=[..._0x36e1b8['body'][_0x264968(0x136)]],_0xe60885=[..._0x36e1b8[_0x264968(0x13c)]['floorlevel']];const _0xc34849=_0x3e0763['map'](_0x2937d2=>{return _0x2937d2={'product_name':_0x2937d2};});_0x4ea673['forEach']((_0x2de1b8,_0x9c781d)=>{var _0x5f2a54=_0x264968;_0xc34849[_0x9c781d][_0x5f2a54(0x108)]=_0x2de1b8;}),_0x5934b3[_0x264968(0x162)]((_0x10ea40,_0x17f171)=>{_0xc34849[_0x17f171]['secondary_code']=_0x10ea40;}),_0xb14f42[_0x264968(0x162)]((_0x163923,_0x34ccaf)=>{var _0x3a039d=_0x264968;_0xc34849[_0x34ccaf][_0x3a039d(0x16e)]=_0x163923;}),_0x5994cf['forEach']((_0x497b67,_0x2c55d5)=>{_0xc34849[_0x2c55d5]['sale_qty']=_0x497b67;}),_0x3196ae[_0x264968(0x162)]((_0x2e4cd3,_0x3d145b)=>{_0xc34849[_0x3d145b]['stock']=_0x2e4cd3;}),_0x2e0266[_0x264968(0x162)]((_0x44cbd1,_0x1130ee)=>{var _0x4cc980=_0x264968;_0xc34849[_0x1130ee][_0x4cc980(0x11d)]=_0x44cbd1;}),_0x4c2d2b[_0x264968(0x162)]((_0x5c5f5e,_0xe7546e)=>{var _0x28505e=_0x264968;_0xc34849[_0xe7546e][_0x28505e(0x13e)]=_0x5c5f5e;}),_0x3e54ad['forEach']((_0x33b88f,_0x531a75)=>{var _0x137a46=_0x264968;_0xc34849[_0x531a75][_0x137a46(0x177)]=_0x33b88f;}),_0x52a755['forEach']((_0x1189dc,_0x302a92)=>{_0xc34849[_0x302a92]['type']=_0x1189dc;}),_0xe60885[_0x264968(0x162)]((_0x2e9df1,_0x1eb382)=>{var _0x1410c4=_0x264968;_0xc34849[_0x1eb382][_0x1410c4(0x16b)]=_0x2e9df1;});var _0x1f2399=0x0;_0xc34849[_0x264968(0x162)](_0x432d1e=>{var _0x4d42a8=_0x264968;console['log'](_0x4d42a8(0x10f),_0x432d1e),(parseInt(_0x432d1e[_0x4d42a8(0x167)])<parseInt(_0x432d1e[_0x4d42a8(0x11d)])||parseInt(_0x432d1e[_0x4d42a8(0x179)])<parseInt(_0x432d1e[_0x4d42a8(0x11d)])&&parseInt(_0x432d1e['sale_qty'])>parseInt(_0x432d1e['return_qty'])||parseInt(_0x432d1e[_0x4d42a8(0x11d)])==0x0)&&_0x1f2399++;});if(_0x1f2399!=0x0)return _0x36e1b8[_0x264968(0x12e)](_0x264968(0x171),_0x264968(0x140)),_0x56ad9b[_0x264968(0x117)](_0x264968(0x173));_0xcdc70e[_0x264968(0x123)]['forEach'](_0x2d47ab=>{var _0x2ae43f=_0x264968;const _0x1013b5=_0x397172[_0x2ae43f(0x130)][_0x2ae43f(0x152)](_0x687e77=>{var _0x5e7a44=_0x2ae43f;_0x687e77[_0x5e7a44(0x148)]==_0x2d47ab[_0x5e7a44(0x148)]&&_0x687e77['floorlevel']==_0x2d47ab['floorlevel']&&_0x687e77[_0x5e7a44(0x12b)]==_0x2d47ab[_0x5e7a44(0x12b)]&&_0x687e77[_0x5e7a44(0x177)]==_0x2d47ab[_0x5e7a44(0x177)]&&_0x687e77['bay']==_0x2d47ab[_0x5e7a44(0x13e)]&&(_0x687e77[_0x5e7a44(0x12a)]=parseInt(_0x687e77[_0x5e7a44(0x12a)])+parseInt(_0x2d47ab[_0x5e7a44(0x11d)]));});}),console[_0x264968(0x124)](_0x264968(0x12f),_0x397172),await _0x397172[_0x264968(0x14e)](),_0xcdc70e['invoice']=_0x58f084,_0xcdc70e[_0x264968(0x13d)]=_0xcc0a87,_0xcdc70e[_0x264968(0x106)]=_0x5cdad9,_0xcdc70e[_0x264968(0x155)]=_0x449b84,_0xcdc70e[_0x264968(0x123)]=_0xc34849,_0xcdc70e['note']=_0x288a2b,_0xcdc70e[_0x264968(0x149)]=_0x2c5b6d,_0xcdc70e[_0x264968(0x153)]=_0x57dea0;const _0x1b010b=await _0xcdc70e[_0x264968(0x14e)]();console[_0x264968(0x124)](_0x264968(0x11a),_0x1b010b);const _0x4eedec=await c_payment_data[_0x264968(0x146)]({'invoice':_0x36e1b8['body'][_0x264968(0x147)],'reason':_0x264968(0x120)});_0x4eedec[_0x264968(0x142)]=_0x36e1b8[_0x264968(0x13c)][_0x264968(0x142)],_0x4eedec['date']=_0x36e1b8[_0x264968(0x13c)][_0x264968(0x106)],await _0x4eedec['save'](),_0x36e1b8[_0x264968(0x12e)](_0x264968(0x137),_0x264968(0x13a)),_0x56ad9b['redirect'](_0x264968(0x10a));}catch(_0x840324){console[_0x264968(0x124)](_0x840324),_0x56ad9b[_0x264968(0x118)](0xc8)[_0x264968(0x156)]({'message':_0x840324['message']});}}),router[a0_0x42ca90(0x16c)]('/give_payment/:id',auth,async(_0x4c7775,_0x3f5f23)=>{var _0x2c67ca=a0_0x42ca90;try{const _0x41db6c=_0x4c7775[_0x2c67ca(0x135)]['id'],{invoice:_0x319ce0,customer:_0x5396f0,payable_to_customer:_0xd4500c,paid_amount:_0x274cce}=_0x4c7775['body'],_0x4b0966=await sales_return[_0x2c67ca(0x104)](_0x41db6c);console[_0x2c67ca(0x124)](_0x2c67ca(0x103),_0x4b0966),console['log'](_0xd4500c),console[_0x2c67ca(0x124)](_0x274cce);var _0x457047=_0xd4500c-_0x274cce;console[_0x2c67ca(0x124)](_0x2c67ca(0x14a),_0x457047),_0x4b0966[_0x2c67ca(0x15a)]=parseFloat(_0x274cce)+parseFloat(_0x4b0966[_0x2c67ca(0x15a)]),_0x4b0966['due_amount']=_0x457047,console[_0x2c67ca(0x124)](_0x4b0966);const _0x51104d=await _0x4b0966['save']();console[_0x2c67ca(0x124)](0x1b207);const _0x5ce7e3=await c_payment_data[_0x2c67ca(0x146)]({'invoice':_0x4c7775[_0x2c67ca(0x13c)][_0x2c67ca(0x147)],'reason':_0x2c67ca(0x120)});console[_0x2c67ca(0x124)](_0x2c67ca(0x14b),_0x5ce7e3),_0x5ce7e3[_0x2c67ca(0x172)]=_0x457047,await _0x5ce7e3[_0x2c67ca(0x14e)]();let _0x179790=new Date(),_0x5c29ac=('0'+_0x179790['getDate']())['slice'](-0x2),_0x173c87=('0'+(_0x179790[_0x2c67ca(0x15c)]()+0x1))[_0x2c67ca(0x105)](-0x2),_0x25bbce=_0x179790['getFullYear'](),_0xb9a2a1=_0x25bbce+'-'+_0x173c87+'-'+_0x5c29ac;const _0x281592=new customer_payment({'invoice':_0x319ce0,'date':_0x25bbce+'-'+_0x173c87+'-'+_0x5c29ac,'customer':_0x5396f0,'reason':_0x2c67ca(0x170),'amount':_0x274cce}),_0x444438=await _0x281592[_0x2c67ca(0x14e)]();_0x4c7775[_0x2c67ca(0x12e)](_0x2c67ca(0x137),_0x2c67ca(0x12c)),_0x3f5f23[_0x2c67ca(0x117)](_0x2c67ca(0x10a));}catch(_0x2399a6){console[_0x2c67ca(0x124)](_0x2399a6);}}),router['get'](a0_0x42ca90(0x151),auth,async(_0x3bd078,_0x2a7ee2)=>{var _0xb3fb3=a0_0x42ca90;try{const {username:_0x24df8d,email:_0x346c4b,role:_0x5ba06a}=_0x3bd078[_0xb3fb3(0x158)],_0x551c59=_0x3bd078[_0xb3fb3(0x158)],_0x49f82d=await profile['findOne']({'email':_0x551c59['email']}),_0x508dc3=await master_shop[_0xb3fb3(0x129)]();console[_0xb3fb3(0x124)](_0xb3fb3(0x169),_0x508dc3);const _0xab2f28=_0x3bd078[_0xb3fb3(0x135)]['id'],_0x4effe3=await sales_return[_0xb3fb3(0x104)](_0xab2f28);console[_0xb3fb3(0x124)](_0x4effe3);const _0x2b6b66=await customer[_0xb3fb3(0x146)]({'name':_0x4effe3[_0xb3fb3(0x13d)]});console[_0xb3fb3(0x124)](_0x2b6b66);if(_0x508dc3[0x0]['language']==_0xb3fb3(0x128)){var _0x42b70f=users[_0xb3fb3(0x110)];console[_0xb3fb3(0x124)](_0x42b70f);}else{if(_0x508dc3[0x0]['language']==_0xb3fb3(0x150))var _0x42b70f=users[_0xb3fb3(0x150)];else{if(_0x508dc3[0x0][_0xb3fb3(0x15b)]==_0xb3fb3(0x10c))var _0x42b70f=users[_0xb3fb3(0x10c)];else{if(_0x508dc3[0x0][_0xb3fb3(0x15b)]==_0xb3fb3(0x138))var _0x42b70f=users[_0xb3fb3(0x138)];else{if(_0x508dc3[0x0][_0xb3fb3(0x15b)]==_0xb3fb3(0x161))var _0x42b70f=users['French'];else{if(_0x508dc3[0x0][_0xb3fb3(0x15b)]==_0xb3fb3(0x176))var _0x42b70f=users[_0xb3fb3(0x11b)];else{if(_0x508dc3[0x0]['language']==_0xb3fb3(0x112))var _0x42b70f=users['Chinese'];else{if(_0x508dc3[0x0][_0xb3fb3(0x15b)]==_0xb3fb3(0x14f))var _0x42b70f=users['Arabic'];}}}}}}}_0x2a7ee2[_0xb3fb3(0x159)](_0xb3fb3(0x143),{'success':_0x3bd078[_0xb3fb3(0x12e)]('success'),'errors':_0x3bd078[_0xb3fb3(0x12e)](_0xb3fb3(0x171)),'role':_0x551c59,'profile':_0x49f82d,'master_shop':_0x508dc3,'customers':_0x2b6b66,'sales':_0x4effe3,'language':_0x42b70f});}catch(_0x1afce9){console[_0xb3fb3(0x124)](_0x1afce9);}}),module[a0_0x42ca90(0x114)]=router;