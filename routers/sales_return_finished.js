function a0_0x3b13(_0x38c334,_0x53dee2){var _0x5e5629=a0_0x5e56();return a0_0x3b13=function(_0x3b1304,_0x18977b){_0x3b1304=_0x3b1304-0x190;var _0x4d6046=_0x5e5629[_0x3b1304];return _0x4d6046;},a0_0x3b13(_0x38c334,_0x53dee2);}var a0_0x3ae3d5=a0_0x3b13;function a0_0x5e56(){var _0x3601bc=['Hindi','/invoice/:id','types','data','params','612UmQoww','Returned\x20Payment\x20For\x20Sale\x20Return','product_stock','German','sales_return_invoice','product_code','status','../models/all_models','Return\x20Rooms','customer_docs','amount','primary_code_QA','name','Sale\x20Return','body','$customer_docs','618361kxQzlH','2PyrMhn','return_sale_QA','save','getMonth','4897304fVLpzX','Enabled','bin','date','due_amount','back','findById','$product_details.storage','Portuguese\x20(BR)','French','product_details','Arabic\x20(ae)','$product_details.product_stock','express','note','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','2965425zMFlnG','post','slice','$product_details','return_qty_QA','$product_details._id','old_warehouse_data','email','type','sales_quantity','product_name_QA','$product_details.floorlevel','warehouse_name','Arabic','master','sale_qty','return_qty','Spanish','get','aggregate','$product_details.type','product_code_QA','$name','purchase\x20return\x20successfully','new\x20new_data','$product_details.primary_code','find','7109454gdbocU','English\x20(US)','stocks_QA','/view','suppliers','exports','customer','foreach\x20newproduct','invoice','json','stocks','22162PDhMsV','9ZnXLaN','QA\x20Warehouse','c_payment','$product_details.bay','for_categorize','string','Chinese','secondary_code','bay','message','render','success','primary_code','Portuguese','English','return_sale','/sales_return/view','ToRoom','flash','sales_quantity_QA','language','user','sales_return_finished','$product_details.bin','product_name','paid_amount','$product_details.product_code','300YCvKap','/sales_return_finished/view','payment\x20successfull','redirect','/view/:id','/give_payment/:id','743210YkARch','findOne','ToWarehouse','customers','getFullYear','forEach','../middleware/auth','floorlevel','25028vDPMhJ','stock','log','map','errors'];a0_0x5e56=function(){return _0x3601bc;};return a0_0x5e56();}(function(_0x13733f,_0x3b1290){var _0x35cc50=a0_0x3b13,_0x42d4ae=_0x13733f();while(!![]){try{var _0x3c41f2=parseInt(_0x35cc50(0x1c6))/0x1*(parseInt(_0x35cc50(0x1c7))/0x2)+-parseInt(_0x35cc50(0x19e))/0x3*(parseInt(_0x35cc50(0x1ac))/0x4)+parseInt(_0x35cc50(0x1db))/0x5+-parseInt(_0x35cc50(0x1b6))/0x6*(parseInt(_0x35cc50(0x201))/0x7)+parseInt(_0x35cc50(0x1cb))/0x8*(-parseInt(_0x35cc50(0x202))/0x9)+parseInt(_0x35cc50(0x1a4))/0xa+parseInt(_0x35cc50(0x1f6))/0xb;if(_0x3c41f2===_0x3b1290)break;else _0x42d4ae['push'](_0x42d4ae['shift']());}catch(_0x124974){_0x42d4ae['push'](_0x42d4ae['shift']());}}}(a0_0x5e56,0x5aa56));const express=require(a0_0x3ae3d5(0x1d8)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x3ae3d5(0x1bd)),auth=require(a0_0x3ae3d5(0x1aa)),users=require('../public/language/languages.json');router[a0_0x3ae3d5(0x1ed)](a0_0x3ae3d5(0x1f9),auth,async(_0x55223d,_0x1fe9f4)=>{var _0x2b8c29=a0_0x3ae3d5;try{const {username:_0x176667,email:_0xc5a07,role:_0x55fcde}=_0x55223d[_0x2b8c29(0x198)],_0x4e3bc6=_0x55223d['user'],_0x4272a1=await profile[_0x2b8c29(0x1a5)]({'email':_0x4e3bc6['email']}),_0x638c3f=await master_shop[_0x2b8c29(0x1f5)](),_0x5bc4ed=await sales_return_finished[_0x2b8c29(0x1ee)]([{'$lookup':{'from':_0x2b8c29(0x1a7),'localField':_0x2b8c29(0x1fc),'foreignField':_0x2b8c29(0x1c2),'as':_0x2b8c29(0x1bf)}},{'$unwind':_0x2b8c29(0x1c5)}]);if(_0x638c3f[0x0][_0x2b8c29(0x197)]=='English\x20(US)'){var _0x414c6f=users[_0x2b8c29(0x191)];console[_0x2b8c29(0x1ae)](_0x414c6f);}else{if(_0x638c3f[0x0]['language']==_0x2b8c29(0x1b1))var _0x414c6f=users[_0x2b8c29(0x1b1)];else{if(_0x638c3f[0x0][_0x2b8c29(0x197)]==_0x2b8c29(0x1b9))var _0x414c6f=users[_0x2b8c29(0x1b9)];else{if(_0x638c3f[0x0][_0x2b8c29(0x197)]==_0x2b8c29(0x1ec))var _0x414c6f=users[_0x2b8c29(0x1ec)];else{if(_0x638c3f[0x0]['language']=='French')var _0x414c6f=users['French'];else{if(_0x638c3f[0x0][_0x2b8c29(0x197)]==_0x2b8c29(0x1d3))var _0x414c6f=users[_0x2b8c29(0x190)];else{if(_0x638c3f[0x0][_0x2b8c29(0x197)]==_0x2b8c29(0x208))var _0x414c6f=users[_0x2b8c29(0x208)];else{if(_0x638c3f[0x0][_0x2b8c29(0x197)]=='Arabic\x20(ae)')var _0x414c6f=users[_0x2b8c29(0x1e8)];}}}}}}}_0x1fe9f4['render'](_0x2b8c29(0x199),{'success':_0x55223d['flash'](_0x2b8c29(0x20d)),'errors':_0x55223d[_0x2b8c29(0x195)](_0x2b8c29(0x1b0)),'role':_0x4e3bc6,'profile':_0x4272a1,'master_shop':_0x638c3f,'user':_0x5bc4ed,'language':_0x414c6f});}catch(_0x47194c){console[_0x2b8c29(0x1ae)](_0x47194c);}}),router[a0_0x3ae3d5(0x1ed)](a0_0x3ae3d5(0x1a2),auth,async(_0x7e384e,_0x10c9bd)=>{var _0x294eb9=a0_0x3ae3d5;try{const {username:_0x1d8ae8,email:_0x41543e,role:_0xd7bfed}=_0x7e384e['user'],_0x2ea4cc=_0x7e384e[_0x294eb9(0x198)],_0x2bb247=await profile['findOne']({'email':_0x2ea4cc[_0x294eb9(0x1e2)]}),_0x382df0=await master_shop[_0x294eb9(0x1f5)]();console[_0x294eb9(0x1ae)]('master',_0x382df0);const _0x343638=_0x7e384e[_0x294eb9(0x1b5)]['id'];console[_0x294eb9(0x1ae)](_0x343638);var _0x4ff293=[_0x294eb9(0x1be)];const _0x1a347f=await sales_return_finished[_0x294eb9(0x1d1)](_0x343638),_0x8ad7df=await warehouse[_0x294eb9(0x1ee)]([{'$match':{'name':_0x1a347f[_0x294eb9(0x1a6)],'room':_0x1a347f['ToRoom']}},{'$unwind':_0x294eb9(0x1de)},{'$group':{'_id':_0x294eb9(0x1e0),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x294eb9(0x1d7)},'bay':{'$first':_0x294eb9(0x205)},'bin':{'$first':_0x294eb9(0x19a)},'type':{'$first':_0x294eb9(0x1ef)},'floorlevel':{'$first':_0x294eb9(0x1e6)},'primary_code':{'$first':_0x294eb9(0x1f4)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x294eb9(0x19d)},'storage':{'$first':_0x294eb9(0x1d2)},'rack':{'$first':'$product_details.rack'}}}]);console[_0x294eb9(0x1ae)](_0x8ad7df);const _0x221701=await warehouse[_0x294eb9(0x1ee)]([{'$match':{'status':_0x294eb9(0x1cc),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x294eb9(0x1f1),'name':{'$first':_0x294eb9(0x1f1)}}},{'$sort':{'name':0x1}}]),_0xac6452=await warehouse[_0x294eb9(0x1ee)]([{'$match':{'status':_0x294eb9(0x1cc),'name':_0x294eb9(0x203)}},{'$group':{'_id':_0x294eb9(0x1f1),'name':{'$first':_0x294eb9(0x1f1)}}},{'$sort':{'name':0x1}}]),_0xd52e1b=await product[_0x294eb9(0x1f5)]({});if(_0x382df0[0x0]['language']==_0x294eb9(0x1f7)){var _0x3c4f01=users[_0x294eb9(0x191)];console[_0x294eb9(0x1ae)](_0x3c4f01);}else{if(_0x382df0[0x0][_0x294eb9(0x197)]==_0x294eb9(0x1b1))var _0x3c4f01=users[_0x294eb9(0x1b1)];else{if(_0x382df0[0x0][_0x294eb9(0x197)]==_0x294eb9(0x1b9))var _0x3c4f01=users[_0x294eb9(0x1b9)];else{if(_0x382df0[0x0][_0x294eb9(0x197)]=='Spanish')var _0x3c4f01=users[_0x294eb9(0x1ec)];else{if(_0x382df0[0x0][_0x294eb9(0x197)]==_0x294eb9(0x1d4))var _0x3c4f01=users[_0x294eb9(0x1d4)];else{if(_0x382df0[0x0][_0x294eb9(0x197)]==_0x294eb9(0x1d3))var _0x3c4f01=users[_0x294eb9(0x190)];else{if(_0x382df0[0x0][_0x294eb9(0x197)]==_0x294eb9(0x208))var _0x3c4f01=users[_0x294eb9(0x208)];else{if(_0x382df0[0x0]['language']==_0x294eb9(0x1d6))var _0x3c4f01=users[_0x294eb9(0x1e8)];}}}}}}}_0x10c9bd[_0x294eb9(0x20c)]('return_sale_edit_finished',{'success':_0x7e384e[_0x294eb9(0x195)](_0x294eb9(0x20d)),'errors':_0x7e384e['flash'](_0x294eb9(0x1b0)),'role':_0x2ea4cc,'profile':_0x2bb247,'master_shop':_0x382df0,'user':_0x1a347f,'stock':_0x8ad7df,'unit':_0xd52e1b,'language':_0x3c4f01,'warehouses':_0x221701,'rooms':_0x4ff293,'warehouse_QA':_0xac6452});}catch(_0x5a81be){console[_0x294eb9(0x1ae)](_0x5a81be);}}),router[a0_0x3ae3d5(0x1dc)](a0_0x3ae3d5(0x1a2),auth,async(_0x41f1ca,_0xdac871)=>{var _0x71ed59=a0_0x3ae3d5;if(_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x206)]=='QA')try{const _0x37dfa9=_0x41f1ca['params']['id'],_0x2e225a=await sales_return['findOne']({'invoice':_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1fe)]}),_0x531f02=await warehouse[_0x71ed59(0x1a5)]({'name':_0x2e225a['ToWarehouse'],'room':_0x2e225a[_0x71ed59(0x194)]}),{invoice:_0x3fe77d,customer:_0x24c0ad,date:_0x25cfef,warehouse_name:_0x572bfd,product_name:_0x686e68,primary_code:_0xd89f4b,secondary_code:_0x31a3c4,product_code:_0x15a1ed,sales_quantity:_0x160480,stocks:_0x5beb3a,return_qty:_0x3efb02,note:_0x5922e6,to_warehouse_name_QA:_0x2b7bd4,to_Room_name_QA:_0x1cb6d5}=_0x41f1ca[_0x71ed59(0x1c4)];if(typeof product_name_QA==_0x71ed59(0x207))var _0x17d0bc=[_0x41f1ca['body'][_0x71ed59(0x1e5)]],_0x5b0086=[_0x41f1ca['body'][_0x71ed59(0x1c1)]],_0x8af36d=[_0x41f1ca['body']['secondary_code_QA']],_0x3d3177=[_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1f0)]],_0xacbfa0=[_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x196)]],_0x1404cf=[_0x41f1ca[_0x71ed59(0x1c4)]['stocks_QA']],_0xce0873=[_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1df)]];else var _0x17d0bc=[..._0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1e5)]],_0x5b0086=[..._0x41f1ca['body'][_0x71ed59(0x1c1)]],_0x8af36d=[..._0x41f1ca[_0x71ed59(0x1c4)]['secondary_code_QA']],_0x3d3177=[..._0x41f1ca['body'][_0x71ed59(0x1f0)]],_0xacbfa0=[..._0x41f1ca[_0x71ed59(0x1c4)]['sales_quantity_QA']],_0x1404cf=[..._0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1f8)]],_0xce0873=[..._0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1df)]];const _0x4dc2b3=_0x17d0bc[_0x71ed59(0x1af)](_0x2de139=>{return _0x2de139={'product_name':_0x2de139};});_0x5b0086['forEach']((_0x1cb7ae,_0x1d2bc6)=>{var _0x16c5b4=_0x71ed59;_0x4dc2b3[_0x1d2bc6][_0x16c5b4(0x20e)]=_0x1cb7ae;}),_0x8af36d[_0x71ed59(0x1a9)]((_0x110f53,_0xfe263e)=>{_0x4dc2b3[_0xfe263e]['secondary_code']=_0x110f53;}),_0x3d3177[_0x71ed59(0x1a9)]((_0xa8da80,_0x197499)=>{_0x4dc2b3[_0x197499]['product_code']=_0xa8da80;}),_0xacbfa0[_0x71ed59(0x1a9)]((_0x2e6b11,_0x23c8e0)=>{var _0x45c8e1=_0x71ed59;_0x4dc2b3[_0x23c8e0][_0x45c8e1(0x1ea)]=_0x2e6b11;}),_0x1404cf['forEach']((_0x2727c1,_0xc445b4)=>{var _0x459b8a=_0x71ed59;_0x4dc2b3[_0xc445b4][_0x459b8a(0x1ad)]=_0x2727c1;}),_0xce0873[_0x71ed59(0x1a9)]((_0x46a572,_0x2fd492)=>{var _0x16eecf=_0x71ed59;_0x4dc2b3[_0x2fd492][_0x16eecf(0x1eb)]=_0x46a572;}),_0x2e225a[_0x71ed59(0x1c8)]['forEach'](_0x591976=>{var _0x1a667f=_0x71ed59;const _0x285033=_0x531f02['product_details'][_0x1a667f(0x1af)](_0x148755=>{var _0x188112=_0x1a667f;_0x148755[_0x188112(0x19b)]==_0x591976[_0x188112(0x19b)]&&(_0x148755[_0x188112(0x1b8)]=parseInt(_0x148755['product_stock'])+parseInt(_0x591976[_0x188112(0x1eb)]));});}),await _0x531f02[_0x71ed59(0x1c9)](),_0x2e225a[_0x71ed59(0x1fe)]=_0x3fe77d,_0x2e225a[_0x71ed59(0x1fc)]=_0x24c0ad,_0x2e225a[_0x71ed59(0x1ce)]=_0x25cfef,_0x2e225a['warehouse_name']=_0x572bfd,_0x2e225a['return_sale_QA']=_0x4dc2b3,_0x2e225a[_0x71ed59(0x1d9)]=_0x5922e6,_0x2e225a[_0x71ed59(0x1a6)]=_0x2b7bd4,_0x2e225a['ToRoom']=_0x1cb6d5;const _0xdd9fa9=await _0x2e225a[_0x71ed59(0x1c9)](),_0x256059=await c_payment_data['findOne']({'invoice':_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1fe)],'reason':'Sale\x20Return'});_0x256059[_0x71ed59(0x1fa)]=_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1fa)],_0x256059[_0x71ed59(0x1ce)]=_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1ce)],await _0x256059['save'](),_0x41f1ca['flash'](_0x71ed59(0x20d),_0x71ed59(0x1f2)),_0xdac871[_0x71ed59(0x1a1)](_0x71ed59(0x19f));}catch(_0x527a84){console[_0x71ed59(0x1ae)](_0x527a84),_0xdac871['status'](0xc8)[_0x71ed59(0x1ff)]({'message':_0x527a84[_0x71ed59(0x20b)]});}else try{const _0x7755ce=_0x41f1ca[_0x71ed59(0x1b5)]['id'];console[_0x71ed59(0x1ae)](_0x7755ce);const _0x174467=await sales_return[_0x71ed59(0x1a5)]({'invoice':_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1fe)]});console[_0x71ed59(0x1ae)]('old_data',_0x174467);const _0x40b5a9=await warehouse[_0x71ed59(0x1a5)]({'name':_0x174467[_0x71ed59(0x1a6)],'room':_0x174467[_0x71ed59(0x194)]});console['log'](_0x71ed59(0x1e1),_0x40b5a9);const {invoice:_0xfac80f,customer:_0x24a331,date:_0x112de2,warehouse_name:_0x3d39a9,product_name:_0x5e6272,primary_code:_0x16ec21,secondary_code:_0x452846,product_code:_0x358177,sales_quantity:_0x5cf8a7,stocks:_0x25a284,return_qty:_0x1c659d,note:_0x2a8ecf,to_warehouse_name:_0x4ebae2,to_Room_name:_0x3c21ce}=_0x41f1ca[_0x71ed59(0x1c4)];console['log'](_0x41f1ca[_0x71ed59(0x1c4)]);if(typeof _0x5e6272==_0x71ed59(0x207))var _0x17d0bc=[_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x19b)]],_0x5b0086=[_0x41f1ca[_0x71ed59(0x1c4)]['primary_code']],_0x8af36d=[_0x41f1ca['body'][_0x71ed59(0x209)]],_0x3d3177=[_0x41f1ca['body'][_0x71ed59(0x1bb)]],_0xacbfa0=[_0x41f1ca['body']['sales_quantity']],_0x1404cf=[_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x200)]],_0xce0873=[_0x41f1ca[_0x71ed59(0x1c4)]['return_qty']],_0x454320=[_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x20a)]],_0x48a298=[_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1cd)]],_0x14e2f0=[_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1b3)]],_0x8abd57=[_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1ab)]];else var _0x17d0bc=[..._0x41f1ca['body']['product_name']],_0x5b0086=[..._0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x20e)]],_0x8af36d=[..._0x41f1ca['body']['secondary_code']],_0x3d3177=[..._0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1bb)]],_0xacbfa0=[..._0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1e4)]],_0x1404cf=[..._0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x200)]],_0xce0873=[..._0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1eb)]],_0x454320=[..._0x41f1ca['body'][_0x71ed59(0x20a)]],_0x48a298=[..._0x41f1ca[_0x71ed59(0x1c4)]['bin']],_0x14e2f0=[..._0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1b3)]],_0x8abd57=[..._0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1ab)]];const _0x219cbc=_0x17d0bc[_0x71ed59(0x1af)](_0x35fdcf=>{return _0x35fdcf={'product_name':_0x35fdcf};});_0x5b0086[_0x71ed59(0x1a9)]((_0x4b562c,_0x40e26a)=>{var _0x1f72f9=_0x71ed59;_0x219cbc[_0x40e26a][_0x1f72f9(0x20e)]=_0x4b562c;}),_0x8af36d[_0x71ed59(0x1a9)]((_0x3b9491,_0x19e752)=>{var _0x32f3a7=_0x71ed59;_0x219cbc[_0x19e752][_0x32f3a7(0x209)]=_0x3b9491;}),_0x3d3177[_0x71ed59(0x1a9)]((_0x1612fb,_0xf0e66d)=>{_0x219cbc[_0xf0e66d]['product_code']=_0x1612fb;}),_0xacbfa0[_0x71ed59(0x1a9)]((_0x5170e9,_0x1bfa29)=>{_0x219cbc[_0x1bfa29]['sale_qty']=_0x5170e9;}),_0x1404cf[_0x71ed59(0x1a9)]((_0x139bfe,_0x253a69)=>{var _0x421237=_0x71ed59;_0x219cbc[_0x253a69][_0x421237(0x1ad)]=_0x139bfe;}),_0xce0873[_0x71ed59(0x1a9)]((_0x5afe33,_0x13cb45)=>{var _0x2ac25d=_0x71ed59;_0x219cbc[_0x13cb45][_0x2ac25d(0x1eb)]=_0x5afe33;}),_0x454320[_0x71ed59(0x1a9)]((_0x400114,_0x227a24)=>{_0x219cbc[_0x227a24]['bay']=_0x400114;}),_0x48a298[_0x71ed59(0x1a9)]((_0x3ae57e,_0xc9911a)=>{_0x219cbc[_0xc9911a]['bin']=_0x3ae57e;}),_0x14e2f0['forEach']((_0xfc6aa4,_0x4c1057)=>{var _0x24d9cd=_0x71ed59;_0x219cbc[_0x4c1057][_0x24d9cd(0x1e3)]=_0xfc6aa4;}),_0x8abd57[_0x71ed59(0x1a9)]((_0xed911b,_0x5759ad)=>{var _0x1ebffa=_0x71ed59;_0x219cbc[_0x5759ad][_0x1ebffa(0x1ab)]=_0xed911b;});var _0x533c8c=0x0;_0x219cbc['forEach'](_0x5ae477=>{var _0x5c27f3=_0x71ed59;console['log'](_0x5c27f3(0x1fd),_0x5ae477),(parseInt(_0x5ae477['sale_qty'])<parseInt(_0x5ae477[_0x5c27f3(0x1eb)])||parseInt(_0x5ae477[_0x5c27f3(0x1ad)])<parseInt(_0x5ae477['return_qty'])&&parseInt(_0x5ae477[_0x5c27f3(0x1ea)])>parseInt(_0x5ae477[_0x5c27f3(0x1eb)])||parseInt(_0x5ae477['return_qty'])==0x0)&&_0x533c8c++;});if(_0x533c8c!=0x0)return _0x41f1ca[_0x71ed59(0x195)](_0x71ed59(0x1b0),_0x71ed59(0x1da)),_0xdac871[_0x71ed59(0x1a1)](_0x71ed59(0x1d0));_0x174467['return_sale'][_0x71ed59(0x1a9)](_0x5e2ee1=>{var _0x16a3ed=_0x71ed59;const _0x5d00af=_0x40b5a9[_0x16a3ed(0x1d5)][_0x16a3ed(0x1af)](_0xa4cf4=>{var _0x5a416f=_0x16a3ed;_0xa4cf4['product_name']==_0x5e2ee1[_0x5a416f(0x19b)]&&_0xa4cf4[_0x5a416f(0x1ab)]==_0x5e2ee1[_0x5a416f(0x1ab)]&&_0xa4cf4[_0x5a416f(0x1e3)]==_0x5e2ee1[_0x5a416f(0x1e3)]&&_0xa4cf4['bin']==_0x5e2ee1[_0x5a416f(0x1cd)]&&_0xa4cf4[_0x5a416f(0x20a)]==_0x5e2ee1['bay']&&(_0xa4cf4[_0x5a416f(0x1b8)]=parseInt(_0xa4cf4[_0x5a416f(0x1b8)])+parseInt(_0x5e2ee1[_0x5a416f(0x1eb)]));});}),console[_0x71ed59(0x1ae)](_0x71ed59(0x1e1),_0x40b5a9),await _0x40b5a9['save'](),_0x174467[_0x71ed59(0x1fe)]=_0xfac80f,_0x174467[_0x71ed59(0x1fc)]=_0x24a331,_0x174467[_0x71ed59(0x1ce)]=_0x112de2,_0x174467[_0x71ed59(0x1e7)]=_0x3d39a9,_0x174467[_0x71ed59(0x192)]=_0x219cbc,_0x174467[_0x71ed59(0x1d9)]=_0x2a8ecf,_0x174467['ToWarehouse']=_0x4ebae2,_0x174467[_0x71ed59(0x194)]=_0x3c21ce;const _0x1783f5=await _0x174467['save']();console['log'](_0x71ed59(0x1f3),_0x1783f5);const _0x408083=await c_payment_data[_0x71ed59(0x1a5)]({'invoice':_0x41f1ca[_0x71ed59(0x1c4)]['invoice'],'reason':_0x71ed59(0x1c3)});_0x408083[_0x71ed59(0x1fa)]=_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1fa)],_0x408083[_0x71ed59(0x1ce)]=_0x41f1ca[_0x71ed59(0x1c4)][_0x71ed59(0x1ce)],await _0x408083[_0x71ed59(0x1c9)](),_0x41f1ca[_0x71ed59(0x195)]('success',_0x71ed59(0x1f2)),_0xdac871[_0x71ed59(0x1a1)](_0x71ed59(0x193));}catch(_0x335fb9){console['log'](_0x335fb9),_0xdac871[_0x71ed59(0x1bc)](0xc8)[_0x71ed59(0x1ff)]({'message':_0x335fb9[_0x71ed59(0x20b)]});}}),router[a0_0x3ae3d5(0x1dc)](a0_0x3ae3d5(0x1a3),auth,async(_0x99c593,_0x1a29bf)=>{var _0x39fdfc=a0_0x3ae3d5;try{const _0x37091b=_0x99c593[_0x39fdfc(0x1b5)]['id'],{invoice:_0x18da64,customer:_0x43f787,payable_to_customer:_0x5a01a7,paid_amount:_0x3c765f}=_0x99c593[_0x39fdfc(0x1c4)],_0x184e03=await sales_return[_0x39fdfc(0x1d1)](_0x37091b);console[_0x39fdfc(0x1ae)](_0x39fdfc(0x1b4),_0x184e03),console[_0x39fdfc(0x1ae)](_0x5a01a7),console[_0x39fdfc(0x1ae)](_0x3c765f);var _0x60fda5=_0x5a01a7-_0x3c765f;console[_0x39fdfc(0x1ae)]('subtract',_0x60fda5),_0x184e03[_0x39fdfc(0x19c)]=parseFloat(_0x3c765f)+parseFloat(_0x184e03[_0x39fdfc(0x19c)]),_0x184e03[_0x39fdfc(0x1cf)]=_0x60fda5,console[_0x39fdfc(0x1ae)](_0x184e03);const _0x4340a9=await _0x184e03[_0x39fdfc(0x1c9)]();console[_0x39fdfc(0x1ae)](0x1b207);const _0xa3ea0d=await c_payment_data[_0x39fdfc(0x1a5)]({'invoice':_0x99c593[_0x39fdfc(0x1c4)][_0x39fdfc(0x1fe)],'reason':'Sale\x20Return'});console[_0x39fdfc(0x1ae)](_0x39fdfc(0x204),_0xa3ea0d),_0xa3ea0d[_0x39fdfc(0x1c0)]=_0x60fda5,await _0xa3ea0d[_0x39fdfc(0x1c9)]();let _0x35c26c=new Date(),_0x2a98e5=('0'+_0x35c26c['getDate']())['slice'](-0x2),_0x191814=('0'+(_0x35c26c[_0x39fdfc(0x1ca)]()+0x1))[_0x39fdfc(0x1dd)](-0x2),_0x584a9a=_0x35c26c[_0x39fdfc(0x1a8)](),_0x5b1fb2=_0x584a9a+'-'+_0x191814+'-'+_0x2a98e5;const _0x508cc1=new customer_payment({'invoice':_0x18da64,'date':_0x584a9a+'-'+_0x191814+'-'+_0x2a98e5,'customer':_0x43f787,'reason':_0x39fdfc(0x1b7),'amount':_0x3c765f}),_0x9b814=await _0x508cc1[_0x39fdfc(0x1c9)]();_0x99c593['flash'](_0x39fdfc(0x20d),_0x39fdfc(0x1a0)),_0x1a29bf[_0x39fdfc(0x1a1)](_0x39fdfc(0x193));}catch(_0x4cf56f){console[_0x39fdfc(0x1ae)](_0x4cf56f);}}),router[a0_0x3ae3d5(0x1ed)](a0_0x3ae3d5(0x1b2),auth,async(_0x147152,_0xc6385f)=>{var _0x536c53=a0_0x3ae3d5;try{const {username:_0x140d3b,email:_0x24e5be,role:_0x52a8af}=_0x147152[_0x536c53(0x198)],_0x3cd62f=_0x147152['user'],_0x253179=await profile['findOne']({'email':_0x3cd62f[_0x536c53(0x1e2)]}),_0x1ebe1c=await master_shop[_0x536c53(0x1f5)]();console[_0x536c53(0x1ae)](_0x536c53(0x1e9),_0x1ebe1c);const _0x47e77f=_0x147152[_0x536c53(0x1b5)]['id'],_0x26335f=await sales_return[_0x536c53(0x1d1)](_0x47e77f);console[_0x536c53(0x1ae)](_0x26335f);const _0x5c80fe=await customer[_0x536c53(0x1a5)]({'name':_0x26335f[_0x536c53(0x1fc)]});console[_0x536c53(0x1ae)](_0x5c80fe);if(_0x1ebe1c[0x0][_0x536c53(0x197)]==_0x536c53(0x1f7)){var _0x3bb863=users[_0x536c53(0x191)];console['log'](_0x3bb863);}else{if(_0x1ebe1c[0x0]['language']==_0x536c53(0x1b1))var _0x3bb863=users[_0x536c53(0x1b1)];else{if(_0x1ebe1c[0x0][_0x536c53(0x197)]==_0x536c53(0x1b9))var _0x3bb863=users[_0x536c53(0x1b9)];else{if(_0x1ebe1c[0x0]['language']==_0x536c53(0x1ec))var _0x3bb863=users[_0x536c53(0x1ec)];else{if(_0x1ebe1c[0x0][_0x536c53(0x197)]==_0x536c53(0x1d4))var _0x3bb863=users['French'];else{if(_0x1ebe1c[0x0][_0x536c53(0x197)]==_0x536c53(0x1d3))var _0x3bb863=users[_0x536c53(0x190)];else{if(_0x1ebe1c[0x0][_0x536c53(0x197)]==_0x536c53(0x208))var _0x3bb863=users['Chinese'];else{if(_0x1ebe1c[0x0][_0x536c53(0x197)]==_0x536c53(0x1d6))var _0x3bb863=users[_0x536c53(0x1e8)];}}}}}}}_0xc6385f['render'](_0x536c53(0x1ba),{'success':_0x147152[_0x536c53(0x195)](_0x536c53(0x20d)),'errors':_0x147152[_0x536c53(0x195)](_0x536c53(0x1b0)),'role':_0x3cd62f,'profile':_0x253179,'master_shop':_0x1ebe1c,'customers':_0x5c80fe,'sales':_0x26335f,'language':_0x3bb863});}catch(_0x3126dd){console[_0x536c53(0x1ae)](_0x3126dd);}}),module[a0_0x3ae3d5(0x1fb)]=router;