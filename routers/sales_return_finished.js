var a0_0x24d63e=a0_0x1563;(function(_0x463ed1,_0x17194c){var _0x2b04c1=a0_0x1563,_0x31d177=_0x463ed1();while(!![]){try{var _0x1c1e85=-parseInt(_0x2b04c1(0x157))/0x1+-parseInt(_0x2b04c1(0x199))/0x2*(parseInt(_0x2b04c1(0x168))/0x3)+-parseInt(_0x2b04c1(0x17f))/0x4+-parseInt(_0x2b04c1(0x15f))/0x5*(-parseInt(_0x2b04c1(0x124))/0x6)+parseInt(_0x2b04c1(0x15d))/0x7+parseInt(_0x2b04c1(0x12a))/0x8*(-parseInt(_0x2b04c1(0x166))/0x9)+parseInt(_0x2b04c1(0x188))/0xa;if(_0x1c1e85===_0x17194c)break;else _0x31d177['push'](_0x31d177['shift']());}catch(_0x55ab8f){_0x31d177['push'](_0x31d177['shift']());}}}(a0_0x3af4,0x8d850));const express=require(a0_0x24d63e(0x12f)),app=express(),router=express[a0_0x24d63e(0x152)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x24d63e(0x17e)),auth=require(a0_0x24d63e(0x13d)),users=require(a0_0x24d63e(0x178));function a0_0x1563(_0x28fa9e,_0x4b2d9f){var _0x3af430=a0_0x3af4();return a0_0x1563=function(_0x1563b9,_0x293adc){_0x1563b9=_0x1563b9-0x123;var _0x57f6aa=_0x3af430[_0x1563b9];return _0x57f6aa;},a0_0x1563(_0x28fa9e,_0x4b2d9f);}function a0_0x3af4(){var _0xe72060=['primary_code','findOne','user','redirect','/view/:id','1648150swIpTy','product_name','3050WpCOfC','Portuguese','due_amount','getDate','language','Arabic','$product_details.secondary_code','1583046wXySvw','English\x20(US)','3eXRBlM','sales_quantity_QA','bay','product_stock','flash','$product_details.primary_code','paid_amount','status','Chinese','product_name_QA','QA\x20Warehouse','map','customers','return_sale_QA','French','$product_details.bin','../public/language/languages.json','ToRoom','return_qty','master','note','back','../models/all_models','3516852zuAPQT','sales_return_finished','Finished\x20Goods','sales_return_invoice','/invoice/:id','Spanish','stock','save','render','29511160AJhFzE','/sales_return/view','secondary_code','warehouse_name','for_categorize','slice','log','json','customer','Return\x20Rooms','$product_details.product_name','secondary_code_QA','forEach','type','exports','email','suppliers','231760hWCxhY','aggregate','old_data','sales_quantity','Enabled','foreach\x20newproduct','product_code_QA','types','body','960eXpANI','string','return_qty_QA','name','stocks','new\x20new_data','40YlzSDL','message','return_sale','getMonth','amount','express','$name','$product_details._id','Portuguese\x20(BR)','$product_details.rack','product_details','c_payment','English','floorlevel','stocks_QA','$product_details.storage','$product_details.floorlevel','$customer_docs','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','../middleware/auth','/give_payment/:id','product_code','$product_details.product_code','bin','date','purchase\x20return\x20successfully','Arabic\x20(ae)','errors','ToWarehouse','German','Sale\x20Return','old_warehouse_data','invoice','get','Hindi','customer_docs','$product_details.bay','success','params','sale_qty','Router','find','findById','$product_details','post','829939fYlAgm'];a0_0x3af4=function(){return _0xe72060;};return a0_0x3af4();}router[a0_0x24d63e(0x14b)]('/view',auth,async(_0x58640b,_0x53fb87)=>{var _0x2a5eaf=a0_0x24d63e;try{const {username:_0x3b178e,email:_0x31a42a,role:_0x2688be}=_0x58640b[_0x2a5eaf(0x15a)],_0x9e693e=_0x58640b['user'],_0x1c951b=await profile[_0x2a5eaf(0x159)]({'email':_0x9e693e[_0x2a5eaf(0x197)]}),_0x22232f=await master_shop['find'](),_0x4b0266=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x2a5eaf(0x174),'localField':'customer','foreignField':_0x2a5eaf(0x127),'as':_0x2a5eaf(0x14d)}},{'$unwind':_0x2a5eaf(0x13b)}]);if(_0x22232f[0x0][_0x2a5eaf(0x163)]==_0x2a5eaf(0x167)){var _0x5d4ade=users['English'];console[_0x2a5eaf(0x18e)](_0x5d4ade);}else{if(_0x22232f[0x0]['language']==_0x2a5eaf(0x14c))var _0x5d4ade=users['Hindi'];else{if(_0x22232f[0x0][_0x2a5eaf(0x163)]==_0x2a5eaf(0x147))var _0x5d4ade=users[_0x2a5eaf(0x147)];else{if(_0x22232f[0x0]['language']==_0x2a5eaf(0x184))var _0x5d4ade=users[_0x2a5eaf(0x184)];else{if(_0x22232f[0x0][_0x2a5eaf(0x163)]==_0x2a5eaf(0x176))var _0x5d4ade=users[_0x2a5eaf(0x176)];else{if(_0x22232f[0x0]['language']==_0x2a5eaf(0x132))var _0x5d4ade=users['Portuguese'];else{if(_0x22232f[0x0][_0x2a5eaf(0x163)]==_0x2a5eaf(0x170))var _0x5d4ade=users['Chinese'];else{if(_0x22232f[0x0][_0x2a5eaf(0x163)]=='Arabic\x20(ae)')var _0x5d4ade=users[_0x2a5eaf(0x164)];}}}}}}}_0x53fb87[_0x2a5eaf(0x187)](_0x2a5eaf(0x180),{'success':_0x58640b['flash'](_0x2a5eaf(0x14f)),'errors':_0x58640b[_0x2a5eaf(0x16c)](_0x2a5eaf(0x145)),'role':_0x9e693e,'profile':_0x1c951b,'master_shop':_0x22232f,'user':_0x4b0266,'language':_0x5d4ade});}catch(_0x2594c9){console[_0x2a5eaf(0x18e)](_0x2594c9);}}),router[a0_0x24d63e(0x14b)](a0_0x24d63e(0x15c),auth,async(_0x3051bf,_0x4f90e7)=>{var _0x359551=a0_0x24d63e;try{const {username:_0xefac26,email:_0x480bcf,role:_0xcca3cf}=_0x3051bf[_0x359551(0x15a)],_0x3f30df=_0x3051bf['user'],_0x3d9b57=await profile['findOne']({'email':_0x3f30df[_0x359551(0x197)]}),_0x1932f4=await master_shop[_0x359551(0x153)]();console[_0x359551(0x18e)](_0x359551(0x17b),_0x1932f4);const _0x33eccc=_0x3051bf[_0x359551(0x150)]['id'];console[_0x359551(0x18e)](_0x33eccc);var _0x6a6769=[_0x359551(0x191)];const _0x408135=await sales_return_finished[_0x359551(0x154)](_0x33eccc),_0x35e7be=await warehouse[_0x359551(0x19a)]([{'$match':{'name':_0x408135[_0x359551(0x146)],'room':_0x408135['ToRoom']}},{'$unwind':_0x359551(0x155)},{'$group':{'_id':_0x359551(0x131),'name':{'$first':_0x359551(0x192)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x359551(0x14e)},'bin':{'$first':_0x359551(0x177)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x359551(0x13a)},'primary_code':{'$first':_0x359551(0x16d)},'secondary_code':{'$first':_0x359551(0x165)},'product_code':{'$first':_0x359551(0x140)},'storage':{'$first':_0x359551(0x139)},'rack':{'$first':_0x359551(0x133)}}}]);console[_0x359551(0x18e)](_0x35e7be);const _0x1759ed=await warehouse[_0x359551(0x19a)]([{'$match':{'status':_0x359551(0x19d),'warehouse_category':_0x359551(0x181)}},{'$group':{'_id':_0x359551(0x130),'name':{'$first':_0x359551(0x130)}}},{'$sort':{'name':0x1}}]),_0x11e2c7=await warehouse[_0x359551(0x19a)]([{'$match':{'status':_0x359551(0x19d),'name':_0x359551(0x172)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x1737d5=await product['find']({});if(_0x1932f4[0x0]['language']==_0x359551(0x167)){var _0x50a2af=users[_0x359551(0x136)];console[_0x359551(0x18e)](_0x50a2af);}else{if(_0x1932f4[0x0]['language']==_0x359551(0x14c))var _0x50a2af=users[_0x359551(0x14c)];else{if(_0x1932f4[0x0][_0x359551(0x163)]==_0x359551(0x147))var _0x50a2af=users[_0x359551(0x147)];else{if(_0x1932f4[0x0]['language']==_0x359551(0x184))var _0x50a2af=users[_0x359551(0x184)];else{if(_0x1932f4[0x0][_0x359551(0x163)]==_0x359551(0x176))var _0x50a2af=users['French'];else{if(_0x1932f4[0x0][_0x359551(0x163)]==_0x359551(0x132))var _0x50a2af=users[_0x359551(0x160)];else{if(_0x1932f4[0x0]['language']==_0x359551(0x170))var _0x50a2af=users[_0x359551(0x170)];else{if(_0x1932f4[0x0]['language']==_0x359551(0x144))var _0x50a2af=users[_0x359551(0x164)];}}}}}}}_0x4f90e7[_0x359551(0x187)]('return_sale_edit_finished',{'success':_0x3051bf['flash']('success'),'errors':_0x3051bf[_0x359551(0x16c)](_0x359551(0x145)),'role':_0x3f30df,'profile':_0x3d9b57,'master_shop':_0x1932f4,'user':_0x408135,'stock':_0x35e7be,'unit':_0x1737d5,'language':_0x50a2af,'warehouses':_0x1759ed,'rooms':_0x6a6769,'warehouse_QA':_0x11e2c7});}catch(_0x5a03a0){console[_0x359551(0x18e)](_0x5a03a0);}}),router[a0_0x24d63e(0x156)]('/view/:id',auth,async(_0x24453c,_0x146fee)=>{var _0x585cb9=a0_0x24d63e;if(_0x24453c[_0x585cb9(0x123)][_0x585cb9(0x18c)]=='QA')try{const _0x150795=_0x24453c[_0x585cb9(0x150)]['id'],_0x2b5757=await sales_return[_0x585cb9(0x159)]({'invoice':_0x24453c['body'][_0x585cb9(0x14a)]}),_0x475a60=await warehouse[_0x585cb9(0x159)]({'name':_0x2b5757[_0x585cb9(0x146)],'room':_0x2b5757[_0x585cb9(0x179)]}),{invoice:_0x5f4752,customer:_0xafb64a,date:_0x73b3a8,warehouse_name:_0x31c8e1,product_name:_0x1db61d,primary_code:_0x4b7659,secondary_code:_0x2bfae2,product_code:_0x5c9eef,sales_quantity:_0x4bd05f,stocks:_0xe9ac04,return_qty:_0x56d05e,note:_0x58bd23,to_warehouse_name_QA:_0x221b60,to_Room_name_QA:_0x14f979}=_0x24453c['body'];if(typeof product_name_QA==_0x585cb9(0x125))var _0x797b8d=[_0x24453c[_0x585cb9(0x123)][_0x585cb9(0x171)]],_0x43b2b9=[_0x24453c[_0x585cb9(0x123)]['primary_code_QA']],_0x59662a=[_0x24453c['body'][_0x585cb9(0x193)]],_0x27627d=[_0x24453c['body'][_0x585cb9(0x19f)]],_0x58d4b8=[_0x24453c[_0x585cb9(0x123)][_0x585cb9(0x169)]],_0x39fa67=[_0x24453c['body']['stocks_QA']],_0x4cab21=[_0x24453c['body'][_0x585cb9(0x126)]];else var _0x797b8d=[..._0x24453c[_0x585cb9(0x123)][_0x585cb9(0x171)]],_0x43b2b9=[..._0x24453c[_0x585cb9(0x123)]['primary_code_QA']],_0x59662a=[..._0x24453c[_0x585cb9(0x123)][_0x585cb9(0x193)]],_0x27627d=[..._0x24453c[_0x585cb9(0x123)][_0x585cb9(0x19f)]],_0x58d4b8=[..._0x24453c[_0x585cb9(0x123)]['sales_quantity_QA']],_0x39fa67=[..._0x24453c[_0x585cb9(0x123)][_0x585cb9(0x138)]],_0x4cab21=[..._0x24453c[_0x585cb9(0x123)][_0x585cb9(0x126)]];const _0x540812=_0x797b8d[_0x585cb9(0x173)](_0x3d117b=>{return _0x3d117b={'product_name':_0x3d117b};});_0x43b2b9[_0x585cb9(0x194)]((_0x29942a,_0x148d40)=>{var _0x48e856=_0x585cb9;_0x540812[_0x148d40][_0x48e856(0x158)]=_0x29942a;}),_0x59662a['forEach']((_0x1f96ef,_0xfabb13)=>{var _0x1c5e35=_0x585cb9;_0x540812[_0xfabb13][_0x1c5e35(0x18a)]=_0x1f96ef;}),_0x27627d['forEach']((_0xedc41e,_0x3f5891)=>{var _0x18e350=_0x585cb9;_0x540812[_0x3f5891][_0x18e350(0x13f)]=_0xedc41e;}),_0x58d4b8[_0x585cb9(0x194)]((_0x25e67b,_0xa65cb1)=>{_0x540812[_0xa65cb1]['sale_qty']=_0x25e67b;}),_0x39fa67['forEach']((_0x33c4dc,_0x3eb347)=>{var _0x51c9d6=_0x585cb9;_0x540812[_0x3eb347][_0x51c9d6(0x185)]=_0x33c4dc;}),_0x4cab21[_0x585cb9(0x194)]((_0x420c55,_0x1b54ff)=>{_0x540812[_0x1b54ff]['return_qty']=_0x420c55;}),_0x2b5757['return_sale_QA'][_0x585cb9(0x194)](_0x355774=>{var _0x8995ef=_0x585cb9;const _0x8a2edd=_0x475a60[_0x8995ef(0x134)][_0x8995ef(0x173)](_0x197149=>{var _0x2f646f=_0x8995ef;_0x197149[_0x2f646f(0x15e)]==_0x355774[_0x2f646f(0x15e)]&&(_0x197149[_0x2f646f(0x16b)]=parseInt(_0x197149[_0x2f646f(0x16b)])+parseInt(_0x355774[_0x2f646f(0x17a)]));});}),await _0x475a60[_0x585cb9(0x186)](),_0x2b5757['invoice']=_0x5f4752,_0x2b5757[_0x585cb9(0x190)]=_0xafb64a,_0x2b5757[_0x585cb9(0x142)]=_0x73b3a8,_0x2b5757[_0x585cb9(0x18b)]=_0x31c8e1,_0x2b5757[_0x585cb9(0x175)]=_0x540812,_0x2b5757[_0x585cb9(0x17c)]=_0x58bd23,_0x2b5757[_0x585cb9(0x146)]=_0x221b60,_0x2b5757['ToRoom']=_0x14f979;const _0x3e849c=await _0x2b5757[_0x585cb9(0x186)](),_0x32b8bd=await c_payment_data[_0x585cb9(0x159)]({'invoice':_0x24453c[_0x585cb9(0x123)][_0x585cb9(0x14a)],'reason':_0x585cb9(0x148)});_0x32b8bd[_0x585cb9(0x198)]=_0x24453c['body'][_0x585cb9(0x198)],_0x32b8bd[_0x585cb9(0x142)]=_0x24453c['body'][_0x585cb9(0x142)],await _0x32b8bd[_0x585cb9(0x186)](),_0x24453c['flash'](_0x585cb9(0x14f),_0x585cb9(0x143)),_0x146fee[_0x585cb9(0x15b)]('/sales_return_finished/view');}catch(_0x5b2386){console[_0x585cb9(0x18e)](_0x5b2386),_0x146fee[_0x585cb9(0x16f)](0xc8)[_0x585cb9(0x18f)]({'message':_0x5b2386[_0x585cb9(0x12b)]});}else try{const _0x26862c=_0x24453c[_0x585cb9(0x150)]['id'];console[_0x585cb9(0x18e)](_0x26862c);const _0x332ddb=await sales_return[_0x585cb9(0x159)]({'invoice':_0x24453c[_0x585cb9(0x123)][_0x585cb9(0x14a)]});console[_0x585cb9(0x18e)](_0x585cb9(0x19b),_0x332ddb);const _0x233bdb=await warehouse[_0x585cb9(0x159)]({'name':_0x332ddb[_0x585cb9(0x146)],'room':_0x332ddb['ToRoom']});console[_0x585cb9(0x18e)](_0x585cb9(0x149),_0x233bdb);const {invoice:_0x5a86ea,customer:_0x5f54d2,date:_0x3e8598,warehouse_name:_0xa53299,product_name:_0x16d855,primary_code:_0x43fb62,secondary_code:_0x45488c,product_code:_0x527bd2,sales_quantity:_0x508280,stocks:_0xac064,return_qty:_0x1e3daa,note:_0x3b55bc,to_warehouse_name:_0x488deb,to_Room_name:_0x266d34}=_0x24453c['body'];console['log'](_0x24453c[_0x585cb9(0x123)]);if(typeof _0x16d855=='string')var _0x797b8d=[_0x24453c[_0x585cb9(0x123)][_0x585cb9(0x15e)]],_0x43b2b9=[_0x24453c['body'][_0x585cb9(0x158)]],_0x59662a=[_0x24453c['body']['secondary_code']],_0x27627d=[_0x24453c['body'][_0x585cb9(0x13f)]],_0x58d4b8=[_0x24453c['body'][_0x585cb9(0x19c)]],_0x39fa67=[_0x24453c['body'][_0x585cb9(0x128)]],_0x4cab21=[_0x24453c[_0x585cb9(0x123)][_0x585cb9(0x17a)]],_0x1f6174=[_0x24453c['body'][_0x585cb9(0x16a)]],_0x313560=[_0x24453c[_0x585cb9(0x123)][_0x585cb9(0x141)]],_0x3281ef=[_0x24453c[_0x585cb9(0x123)][_0x585cb9(0x1a0)]],_0x310183=[_0x24453c['body'][_0x585cb9(0x137)]];else var _0x797b8d=[..._0x24453c[_0x585cb9(0x123)][_0x585cb9(0x15e)]],_0x43b2b9=[..._0x24453c['body'][_0x585cb9(0x158)]],_0x59662a=[..._0x24453c['body'][_0x585cb9(0x18a)]],_0x27627d=[..._0x24453c[_0x585cb9(0x123)][_0x585cb9(0x13f)]],_0x58d4b8=[..._0x24453c[_0x585cb9(0x123)][_0x585cb9(0x19c)]],_0x39fa67=[..._0x24453c[_0x585cb9(0x123)][_0x585cb9(0x128)]],_0x4cab21=[..._0x24453c['body'][_0x585cb9(0x17a)]],_0x1f6174=[..._0x24453c['body']['bay']],_0x313560=[..._0x24453c['body'][_0x585cb9(0x141)]],_0x3281ef=[..._0x24453c[_0x585cb9(0x123)][_0x585cb9(0x1a0)]],_0x310183=[..._0x24453c[_0x585cb9(0x123)][_0x585cb9(0x137)]];const _0x83e22a=_0x797b8d[_0x585cb9(0x173)](_0x249702=>{return _0x249702={'product_name':_0x249702};});_0x43b2b9[_0x585cb9(0x194)]((_0x4e54a9,_0x7c3df5)=>{var _0x4c3055=_0x585cb9;_0x83e22a[_0x7c3df5][_0x4c3055(0x158)]=_0x4e54a9;}),_0x59662a[_0x585cb9(0x194)]((_0x5a47cc,_0x8c5fd2)=>{var _0x36c95f=_0x585cb9;_0x83e22a[_0x8c5fd2][_0x36c95f(0x18a)]=_0x5a47cc;}),_0x27627d['forEach']((_0x39423c,_0x5c384e)=>{var _0x1eb78f=_0x585cb9;_0x83e22a[_0x5c384e][_0x1eb78f(0x13f)]=_0x39423c;}),_0x58d4b8[_0x585cb9(0x194)]((_0x3ec989,_0x53e4b2)=>{var _0x31d33a=_0x585cb9;_0x83e22a[_0x53e4b2][_0x31d33a(0x151)]=_0x3ec989;}),_0x39fa67[_0x585cb9(0x194)]((_0x15872b,_0x3cd62a)=>{var _0xb98931=_0x585cb9;_0x83e22a[_0x3cd62a][_0xb98931(0x185)]=_0x15872b;}),_0x4cab21[_0x585cb9(0x194)]((_0x55a99c,_0x67ed4)=>{var _0x3f9f6f=_0x585cb9;_0x83e22a[_0x67ed4][_0x3f9f6f(0x17a)]=_0x55a99c;}),_0x1f6174[_0x585cb9(0x194)]((_0x57bbc8,_0x133b01)=>{var _0x30dda4=_0x585cb9;_0x83e22a[_0x133b01][_0x30dda4(0x16a)]=_0x57bbc8;}),_0x313560[_0x585cb9(0x194)]((_0x37a661,_0x5a2f22)=>{var _0x35b82c=_0x585cb9;_0x83e22a[_0x5a2f22][_0x35b82c(0x141)]=_0x37a661;}),_0x3281ef[_0x585cb9(0x194)]((_0xbd8f28,_0x45d270)=>{var _0x178677=_0x585cb9;_0x83e22a[_0x45d270][_0x178677(0x195)]=_0xbd8f28;}),_0x310183[_0x585cb9(0x194)]((_0x421fec,_0x49d82e)=>{var _0x227e72=_0x585cb9;_0x83e22a[_0x49d82e][_0x227e72(0x137)]=_0x421fec;});var _0x3a93aa=0x0;_0x83e22a[_0x585cb9(0x194)](_0x3f2783=>{var _0x5c00ef=_0x585cb9;console[_0x5c00ef(0x18e)](_0x5c00ef(0x19e),_0x3f2783),(parseInt(_0x3f2783[_0x5c00ef(0x151)])<parseInt(_0x3f2783[_0x5c00ef(0x17a)])||parseInt(_0x3f2783[_0x5c00ef(0x185)])<parseInt(_0x3f2783['return_qty'])&&parseInt(_0x3f2783[_0x5c00ef(0x151)])>parseInt(_0x3f2783[_0x5c00ef(0x17a)])||parseInt(_0x3f2783[_0x5c00ef(0x17a)])==0x0)&&_0x3a93aa++;});if(_0x3a93aa!=0x0)return _0x24453c['flash'](_0x585cb9(0x145),_0x585cb9(0x13c)),_0x146fee[_0x585cb9(0x15b)](_0x585cb9(0x17d));_0x332ddb['return_sale'][_0x585cb9(0x194)](_0x3f799c=>{var _0x1a86ae=_0x585cb9;const _0x5d460b=_0x233bdb[_0x1a86ae(0x134)][_0x1a86ae(0x173)](_0x4b0b23=>{var _0x15532d=_0x1a86ae;_0x4b0b23[_0x15532d(0x15e)]==_0x3f799c[_0x15532d(0x15e)]&&_0x4b0b23[_0x15532d(0x137)]==_0x3f799c[_0x15532d(0x137)]&&_0x4b0b23[_0x15532d(0x195)]==_0x3f799c[_0x15532d(0x195)]&&_0x4b0b23[_0x15532d(0x141)]==_0x3f799c[_0x15532d(0x141)]&&_0x4b0b23[_0x15532d(0x16a)]==_0x3f799c['bay']&&(_0x4b0b23['product_stock']=parseInt(_0x4b0b23[_0x15532d(0x16b)])+parseInt(_0x3f799c[_0x15532d(0x17a)]));});}),console[_0x585cb9(0x18e)](_0x585cb9(0x149),_0x233bdb),await _0x233bdb[_0x585cb9(0x186)](),_0x332ddb[_0x585cb9(0x14a)]=_0x5a86ea,_0x332ddb['customer']=_0x5f54d2,_0x332ddb[_0x585cb9(0x142)]=_0x3e8598,_0x332ddb[_0x585cb9(0x18b)]=_0xa53299,_0x332ddb[_0x585cb9(0x12c)]=_0x83e22a,_0x332ddb['note']=_0x3b55bc,_0x332ddb[_0x585cb9(0x146)]=_0x488deb,_0x332ddb['ToRoom']=_0x266d34;const _0x1a2136=await _0x332ddb['save']();console[_0x585cb9(0x18e)](_0x585cb9(0x129),_0x1a2136);const _0x304a39=await c_payment_data[_0x585cb9(0x159)]({'invoice':_0x24453c['body'][_0x585cb9(0x14a)],'reason':_0x585cb9(0x148)});_0x304a39[_0x585cb9(0x198)]=_0x24453c[_0x585cb9(0x123)]['suppliers'],_0x304a39[_0x585cb9(0x142)]=_0x24453c[_0x585cb9(0x123)][_0x585cb9(0x142)],await _0x304a39[_0x585cb9(0x186)](),_0x24453c[_0x585cb9(0x16c)](_0x585cb9(0x14f),_0x585cb9(0x143)),_0x146fee[_0x585cb9(0x15b)]('/sales_return/view');}catch(_0x53cb4d){console[_0x585cb9(0x18e)](_0x53cb4d),_0x146fee['status'](0xc8)[_0x585cb9(0x18f)]({'message':_0x53cb4d[_0x585cb9(0x12b)]});}}),router[a0_0x24d63e(0x156)](a0_0x24d63e(0x13e),auth,async(_0xfda234,_0x2dab16)=>{var _0x27bf66=a0_0x24d63e;try{const _0xb62a66=_0xfda234[_0x27bf66(0x150)]['id'],{invoice:_0x422b7f,customer:_0x250153,payable_to_customer:_0x2d6163,paid_amount:_0x2fb421}=_0xfda234['body'],_0xf7cd47=await sales_return['findById'](_0xb62a66);console[_0x27bf66(0x18e)]('data',_0xf7cd47),console[_0x27bf66(0x18e)](_0x2d6163),console[_0x27bf66(0x18e)](_0x2fb421);var _0x5e2d95=_0x2d6163-_0x2fb421;console[_0x27bf66(0x18e)]('subtract',_0x5e2d95),_0xf7cd47['paid_amount']=parseFloat(_0x2fb421)+parseFloat(_0xf7cd47[_0x27bf66(0x16e)]),_0xf7cd47[_0x27bf66(0x161)]=_0x5e2d95,console[_0x27bf66(0x18e)](_0xf7cd47);const _0x5a5fe2=await _0xf7cd47[_0x27bf66(0x186)]();console[_0x27bf66(0x18e)](0x1b207);const _0x5178d3=await c_payment_data[_0x27bf66(0x159)]({'invoice':_0xfda234['body'][_0x27bf66(0x14a)],'reason':'Sale\x20Return'});console['log'](_0x27bf66(0x135),_0x5178d3),_0x5178d3[_0x27bf66(0x12e)]=_0x5e2d95,await _0x5178d3[_0x27bf66(0x186)]();let _0x494865=new Date(),_0x1f0625=('0'+_0x494865[_0x27bf66(0x162)]())[_0x27bf66(0x18d)](-0x2),_0x53e826=('0'+(_0x494865[_0x27bf66(0x12d)]()+0x1))[_0x27bf66(0x18d)](-0x2),_0x1a2576=_0x494865['getFullYear'](),_0x408272=_0x1a2576+'-'+_0x53e826+'-'+_0x1f0625;const _0x964c0f=new customer_payment({'invoice':_0x422b7f,'date':_0x1a2576+'-'+_0x53e826+'-'+_0x1f0625,'customer':_0x250153,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x2fb421}),_0x35907e=await _0x964c0f[_0x27bf66(0x186)]();_0xfda234[_0x27bf66(0x16c)](_0x27bf66(0x14f),'payment\x20successfull'),_0x2dab16[_0x27bf66(0x15b)](_0x27bf66(0x189));}catch(_0x3aecf5){console[_0x27bf66(0x18e)](_0x3aecf5);}}),router['get'](a0_0x24d63e(0x183),auth,async(_0x687035,_0x2c7ccf)=>{var _0x4c1e3a=a0_0x24d63e;try{const {username:_0x441220,email:_0x6d1607,role:_0xac64ec}=_0x687035[_0x4c1e3a(0x15a)],_0x4dbf80=_0x687035[_0x4c1e3a(0x15a)],_0x3651d3=await profile['findOne']({'email':_0x4dbf80[_0x4c1e3a(0x197)]}),_0x1434e9=await master_shop[_0x4c1e3a(0x153)]();console[_0x4c1e3a(0x18e)](_0x4c1e3a(0x17b),_0x1434e9);const _0x338609=_0x687035[_0x4c1e3a(0x150)]['id'],_0x380f23=await sales_return[_0x4c1e3a(0x154)](_0x338609);console['log'](_0x380f23);const _0x2cfba2=await customer[_0x4c1e3a(0x159)]({'name':_0x380f23[_0x4c1e3a(0x190)]});console['log'](_0x2cfba2);if(_0x1434e9[0x0][_0x4c1e3a(0x163)]==_0x4c1e3a(0x167)){var _0x1b23e1=users[_0x4c1e3a(0x136)];console[_0x4c1e3a(0x18e)](_0x1b23e1);}else{if(_0x1434e9[0x0][_0x4c1e3a(0x163)]==_0x4c1e3a(0x14c))var _0x1b23e1=users[_0x4c1e3a(0x14c)];else{if(_0x1434e9[0x0]['language']==_0x4c1e3a(0x147))var _0x1b23e1=users[_0x4c1e3a(0x147)];else{if(_0x1434e9[0x0][_0x4c1e3a(0x163)]==_0x4c1e3a(0x184))var _0x1b23e1=users['Spanish'];else{if(_0x1434e9[0x0]['language']==_0x4c1e3a(0x176))var _0x1b23e1=users[_0x4c1e3a(0x176)];else{if(_0x1434e9[0x0]['language']==_0x4c1e3a(0x132))var _0x1b23e1=users[_0x4c1e3a(0x160)];else{if(_0x1434e9[0x0]['language']==_0x4c1e3a(0x170))var _0x1b23e1=users[_0x4c1e3a(0x170)];else{if(_0x1434e9[0x0]['language']==_0x4c1e3a(0x144))var _0x1b23e1=users[_0x4c1e3a(0x164)];}}}}}}}_0x2c7ccf['render'](_0x4c1e3a(0x182),{'success':_0x687035[_0x4c1e3a(0x16c)]('success'),'errors':_0x687035[_0x4c1e3a(0x16c)](_0x4c1e3a(0x145)),'role':_0x4dbf80,'profile':_0x3651d3,'master_shop':_0x1434e9,'customers':_0x2cfba2,'sales':_0x380f23,'language':_0x1b23e1});}catch(_0x1df7e9){console[_0x4c1e3a(0x18e)](_0x1df7e9);}}),module[a0_0x24d63e(0x196)]=router;