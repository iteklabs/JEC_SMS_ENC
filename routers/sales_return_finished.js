var a0_0x1d12a6=a0_0x1117;(function(_0x1571ad,_0x99b556){var _0x2d90b3=a0_0x1117,_0x2e466d=_0x1571ad();while(!![]){try{var _0x107e6b=-parseInt(_0x2d90b3(0x20b))/0x1+-parseInt(_0x2d90b3(0x21f))/0x2*(parseInt(_0x2d90b3(0x1e8))/0x3)+-parseInt(_0x2d90b3(0x21b))/0x4+parseInt(_0x2d90b3(0x1f5))/0x5*(-parseInt(_0x2d90b3(0x20d))/0x6)+parseInt(_0x2d90b3(0x1bd))/0x7+parseInt(_0x2d90b3(0x221))/0x8*(-parseInt(_0x2d90b3(0x20c))/0x9)+-parseInt(_0x2d90b3(0x213))/0xa*(-parseInt(_0x2d90b3(0x1d2))/0xb);if(_0x107e6b===_0x99b556)break;else _0x2e466d['push'](_0x2e466d['shift']());}catch(_0x5088ea){_0x2e466d['push'](_0x2e466d['shift']());}}}(a0_0x16d3,0x5e81f));const express=require(a0_0x1d12a6(0x202)),app=express(),router=express[a0_0x1d12a6(0x1f3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x1d12a6(0x1db)),auth=require('../middleware/auth'),users=require(a0_0x1d12a6(0x22b));router[a0_0x1d12a6(0x1d4)](a0_0x1d12a6(0x1e2),auth,async(_0x154b93,_0x598043)=>{var _0x387d82=a0_0x1d12a6;try{const {username:_0x2a7072,email:_0x1e414e,role:_0x2eb142}=_0x154b93['user'],_0x4b3753=_0x154b93[_0x387d82(0x1e9)],_0x579bab=await profile['findOne']({'email':_0x4b3753[_0x387d82(0x1c4)]}),_0x6795c0=await master_shop[_0x387d82(0x1fb)](),_0x24227e=await sales_return_finished[_0x387d82(0x1c9)]([{'$lookup':{'from':_0x387d82(0x1fe),'localField':_0x387d82(0x22a),'foreignField':_0x387d82(0x215),'as':_0x387d82(0x1f0)}},{'$unwind':_0x387d82(0x1f4)}]);if(_0x6795c0[0x0]['language']=='English\x20(US)'){var _0x45891d=users['English'];console['log'](_0x45891d);}else{if(_0x6795c0[0x0]['language']=='Hindi')var _0x45891d=users[_0x387d82(0x20a)];else{if(_0x6795c0[0x0]['language']==_0x387d82(0x218))var _0x45891d=users[_0x387d82(0x218)];else{if(_0x6795c0[0x0][_0x387d82(0x217)]==_0x387d82(0x233))var _0x45891d=users[_0x387d82(0x233)];else{if(_0x6795c0[0x0][_0x387d82(0x217)]==_0x387d82(0x1d1))var _0x45891d=users[_0x387d82(0x1d1)];else{if(_0x6795c0[0x0]['language']=='Portuguese\x20(BR)')var _0x45891d=users['Portuguese'];else{if(_0x6795c0[0x0][_0x387d82(0x217)]==_0x387d82(0x1cf))var _0x45891d=users[_0x387d82(0x1cf)];else{if(_0x6795c0[0x0][_0x387d82(0x217)]=='Arabic\x20(ae)')var _0x45891d=users[_0x387d82(0x1ee)];}}}}}}}_0x598043[_0x387d82(0x1d0)]('sales_return_finished',{'success':_0x154b93[_0x387d82(0x200)](_0x387d82(0x1f7)),'errors':_0x154b93[_0x387d82(0x200)]('errors'),'role':_0x4b3753,'profile':_0x579bab,'master_shop':_0x6795c0,'user':_0x24227e,'language':_0x45891d});}catch(_0x1b4579){console[_0x387d82(0x22c)](_0x1b4579);}}),router['get'](a0_0x1d12a6(0x222),auth,async(_0x4a836a,_0x5a3977)=>{var _0x3aa6d5=a0_0x1d12a6;try{const {username:_0x301592,email:_0x3472bf,role:_0x20a403}=_0x4a836a['user'],_0x4f59e7=_0x4a836a[_0x3aa6d5(0x1e9)],_0x21ab28=await profile[_0x3aa6d5(0x1fa)]({'email':_0x4f59e7['email']}),_0x3724e2=await master_shop[_0x3aa6d5(0x1fb)]();console[_0x3aa6d5(0x22c)](_0x3aa6d5(0x224),_0x3724e2);const _0x12dc86=_0x4a836a['params']['id'];console['log'](_0x12dc86);var _0x395fe2=[_0x3aa6d5(0x1cb)];const _0x8bb057=await sales_return_finished[_0x3aa6d5(0x226)](_0x12dc86),_0x9c574a=await warehouse[_0x3aa6d5(0x1c9)]([{'$match':{'name':_0x8bb057[_0x3aa6d5(0x1c7)],'room':_0x8bb057[_0x3aa6d5(0x1e0)]}},{'$unwind':_0x3aa6d5(0x207)},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x3aa6d5(0x1d3)},'bay':{'$first':_0x3aa6d5(0x216)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x3aa6d5(0x229)},'floorlevel':{'$first':_0x3aa6d5(0x223)},'primary_code':{'$first':_0x3aa6d5(0x1ea)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x3aa6d5(0x1c0)},'storage':{'$first':_0x3aa6d5(0x1fd)},'rack':{'$first':_0x3aa6d5(0x1e6)}}}]);console['log'](_0x9c574a);const _0x51b74b=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0x3aa6d5(0x1bf)}},{'$group':{'_id':'$name','name':{'$first':_0x3aa6d5(0x1c5)}}},{'$sort':{'name':0x1}}]),_0x1922a0=await warehouse['aggregate']([{'$match':{'status':_0x3aa6d5(0x21a),'name':_0x3aa6d5(0x220)}},{'$group':{'_id':_0x3aa6d5(0x1c5),'name':{'$first':_0x3aa6d5(0x1c5)}}},{'$sort':{'name':0x1}}]),_0x4672f6=await product[_0x3aa6d5(0x1fb)]({});if(_0x3724e2[0x0][_0x3aa6d5(0x217)]==_0x3aa6d5(0x1e1)){var _0x40c603=users[_0x3aa6d5(0x1f1)];console[_0x3aa6d5(0x22c)](_0x40c603);}else{if(_0x3724e2[0x0]['language']=='Hindi')var _0x40c603=users[_0x3aa6d5(0x20a)];else{if(_0x3724e2[0x0]['language']==_0x3aa6d5(0x218))var _0x40c603=users['German'];else{if(_0x3724e2[0x0][_0x3aa6d5(0x217)]==_0x3aa6d5(0x233))var _0x40c603=users[_0x3aa6d5(0x233)];else{if(_0x3724e2[0x0][_0x3aa6d5(0x217)]==_0x3aa6d5(0x1d1))var _0x40c603=users[_0x3aa6d5(0x1d1)];else{if(_0x3724e2[0x0]['language']==_0x3aa6d5(0x1ed))var _0x40c603=users['Portuguese'];else{if(_0x3724e2[0x0]['language']=='Chinese')var _0x40c603=users[_0x3aa6d5(0x1cf)];else{if(_0x3724e2[0x0][_0x3aa6d5(0x217)]==_0x3aa6d5(0x234))var _0x40c603=users[_0x3aa6d5(0x1ee)];}}}}}}}_0x5a3977[_0x3aa6d5(0x1d0)]('return_sale_edit_finished',{'success':_0x4a836a[_0x3aa6d5(0x200)]('success'),'errors':_0x4a836a['flash'](_0x3aa6d5(0x20e)),'role':_0x4f59e7,'profile':_0x21ab28,'master_shop':_0x3724e2,'user':_0x8bb057,'stock':_0x9c574a,'unit':_0x4672f6,'language':_0x40c603,'warehouses':_0x51b74b,'rooms':_0x395fe2,'warehouse_QA':_0x1922a0});}catch(_0x2b9d98){console[_0x3aa6d5(0x22c)](_0x2b9d98);}}),router['post']('/view/:id',auth,async(_0x207ff5,_0x7b1e6a)=>{var _0x9ccec8=a0_0x1d12a6;if(_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1ec)]=='QA')try{const _0x38802b=_0x207ff5[_0x9ccec8(0x1c6)]['id'],_0x5bbbd7=await sales_return[_0x9ccec8(0x1fa)]({'invoice':_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x206)]}),_0x51fd46=await warehouse[_0x9ccec8(0x1fa)]({'name':_0x5bbbd7[_0x9ccec8(0x1c7)],'room':_0x5bbbd7['ToRoom']}),{invoice:_0x5c8cfb,customer:_0x34002e,date:_0x14a951,warehouse_name:_0x12209c,product_name:_0x1caa73,primary_code:_0x3ce71f,secondary_code:_0x4a6b76,product_code:_0x2fab28,sales_quantity:_0x1e2593,stocks:_0x149e38,return_qty:_0x5d8b1a,note:_0x27fced,to_warehouse_name_QA:_0x5ab53e,to_Room_name_QA:_0x13c291}=_0x207ff5[_0x9ccec8(0x22d)];if(typeof product_name_QA==_0x9ccec8(0x1dd))var _0x1aa5a7=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x203)]],_0x4eb428=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1ce)]],_0x350a32=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1d5)]],_0x6fbed5=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x204)]],_0x10142b=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x201)]],_0x1f6deb=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x21d)]],_0xbadb79=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1da)]];else var _0x1aa5a7=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x203)]],_0x4eb428=[..._0x207ff5[_0x9ccec8(0x22d)]['primary_code_QA']],_0x350a32=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1d5)]],_0x6fbed5=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x204)]],_0x10142b=[..._0x207ff5['body']['sales_quantity_QA']],_0x1f6deb=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x21d)]],_0xbadb79=[..._0x207ff5[_0x9ccec8(0x22d)]['return_qty_QA']];const _0x32418f=_0x1aa5a7[_0x9ccec8(0x228)](_0x56b2ea=>{return _0x56b2ea={'product_name':_0x56b2ea};});_0x4eb428[_0x9ccec8(0x1f9)]((_0x2c4714,_0xeb7208)=>{_0x32418f[_0xeb7208]['primary_code']=_0x2c4714;}),_0x350a32['forEach']((_0x1e38d4,_0x2bdd76)=>{var _0x10e1f6=_0x9ccec8;_0x32418f[_0x2bdd76][_0x10e1f6(0x22f)]=_0x1e38d4;}),_0x6fbed5[_0x9ccec8(0x1f9)]((_0x1264a8,_0x3f0f3a)=>{var _0xd4f37e=_0x9ccec8;_0x32418f[_0x3f0f3a][_0xd4f37e(0x1eb)]=_0x1264a8;}),_0x10142b[_0x9ccec8(0x1f9)]((_0x1118aa,_0x50c811)=>{var _0x1a51d5=_0x9ccec8;_0x32418f[_0x50c811][_0x1a51d5(0x21e)]=_0x1118aa;}),_0x1f6deb[_0x9ccec8(0x1f9)]((_0x49c42a,_0x449765)=>{var _0x1dc7b9=_0x9ccec8;_0x32418f[_0x449765][_0x1dc7b9(0x1d8)]=_0x49c42a;}),_0xbadb79[_0x9ccec8(0x1f9)]((_0x1258a0,_0xd16f5f)=>{var _0x1eef4b=_0x9ccec8;_0x32418f[_0xd16f5f][_0x1eef4b(0x20f)]=_0x1258a0;}),_0x5bbbd7[_0x9ccec8(0x1c2)][_0x9ccec8(0x1f9)](_0x575af4=>{var _0x1b9bda=_0x9ccec8;const _0x2a8cb8=_0x51fd46[_0x1b9bda(0x1cd)][_0x1b9bda(0x228)](_0x1d5b79=>{var _0x58d8dd=_0x1b9bda;_0x1d5b79[_0x58d8dd(0x231)]==_0x575af4[_0x58d8dd(0x231)]&&(_0x1d5b79[_0x58d8dd(0x1c3)]=parseInt(_0x1d5b79['product_stock'])+parseInt(_0x575af4['return_qty']));});}),await _0x51fd46[_0x9ccec8(0x1df)](),_0x5bbbd7[_0x9ccec8(0x206)]=_0x5c8cfb,_0x5bbbd7['customer']=_0x34002e,_0x5bbbd7['date']=_0x14a951,_0x5bbbd7[_0x9ccec8(0x1de)]=_0x12209c,_0x5bbbd7[_0x9ccec8(0x1c2)]=_0x32418f,_0x5bbbd7[_0x9ccec8(0x22e)]=_0x27fced,_0x5bbbd7[_0x9ccec8(0x1c7)]=_0x5ab53e,_0x5bbbd7[_0x9ccec8(0x1e0)]=_0x13c291;const _0x4271ec=await _0x5bbbd7[_0x9ccec8(0x1df)](),_0x575874=await c_payment_data[_0x9ccec8(0x1fa)]({'invoice':_0x207ff5[_0x9ccec8(0x22d)]['invoice'],'reason':'Sale\x20Return'});_0x575874[_0x9ccec8(0x1cc)]=_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1cc)],_0x575874['date']=_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1f6)],await _0x575874['save'](),_0x207ff5[_0x9ccec8(0x200)](_0x9ccec8(0x1f7),'purchase\x20return\x20successfully'),_0x7b1e6a[_0x9ccec8(0x214)]('/sales_return_finished/view');}catch(_0x3d708d){console[_0x9ccec8(0x22c)](_0x3d708d),_0x7b1e6a[_0x9ccec8(0x1ca)](0xc8)[_0x9ccec8(0x1ff)]({'message':_0x3d708d[_0x9ccec8(0x1f8)]});}else try{const _0x4ceea0=_0x207ff5['params']['id'];console[_0x9ccec8(0x22c)](_0x4ceea0);const _0x57113b=await sales_return[_0x9ccec8(0x1fa)]({'invoice':_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x206)]});console[_0x9ccec8(0x22c)](_0x9ccec8(0x211),_0x57113b);const _0x3d77ad=await warehouse[_0x9ccec8(0x1fa)]({'name':_0x57113b[_0x9ccec8(0x1c7)],'room':_0x57113b[_0x9ccec8(0x1e0)]});console[_0x9ccec8(0x22c)](_0x9ccec8(0x1c8),_0x3d77ad);const {invoice:_0x44456a,customer:_0x22a55d,date:_0x1c4d3,warehouse_name:_0x229561,product_name:_0x5cd8fb,primary_code:_0x2c9f3c,secondary_code:_0x57f7af,product_code:_0x38bfe6,sales_quantity:_0x4e8899,stocks:_0x4d5d23,return_qty:_0x514270,note:_0x1f778d,to_warehouse_name:_0x27d2b1,to_Room_name:_0x139e78}=_0x207ff5[_0x9ccec8(0x22d)];console[_0x9ccec8(0x22c)](_0x207ff5['body']);if(typeof _0x5cd8fb==_0x9ccec8(0x1dd))var _0x1aa5a7=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x231)]],_0x4eb428=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x227)]],_0x350a32=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x22f)]],_0x6fbed5=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1eb)]],_0x10142b=[_0x207ff5[_0x9ccec8(0x22d)]['sales_quantity']],_0x1f6deb=[_0x207ff5['body'][_0x9ccec8(0x1d7)]],_0xbadb79=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x20f)]],_0x191007=[_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x208)]],_0x1ea1c3=[_0x207ff5['body']['bin']],_0xdc849c=[_0x207ff5['body'][_0x9ccec8(0x225)]],_0x473e52=[_0x207ff5['body'][_0x9ccec8(0x1be)]];else var _0x1aa5a7=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x231)]],_0x4eb428=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x227)]],_0x350a32=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x22f)]],_0x6fbed5=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1eb)]],_0x10142b=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1e4)]],_0x1f6deb=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1d7)]],_0xbadb79=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x20f)]],_0x191007=[..._0x207ff5[_0x9ccec8(0x22d)]['bay']],_0x1ea1c3=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x219)]],_0xdc849c=[..._0x207ff5[_0x9ccec8(0x22d)]['types']],_0x473e52=[..._0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1be)]];const _0x1378a4=_0x1aa5a7[_0x9ccec8(0x228)](_0x692553=>{return _0x692553={'product_name':_0x692553};});_0x4eb428[_0x9ccec8(0x1f9)]((_0x499539,_0x53e852)=>{var _0x53ea67=_0x9ccec8;_0x1378a4[_0x53e852][_0x53ea67(0x227)]=_0x499539;}),_0x350a32['forEach']((_0x1fa07c,_0x5877ba)=>{var _0xbaa41a=_0x9ccec8;_0x1378a4[_0x5877ba][_0xbaa41a(0x22f)]=_0x1fa07c;}),_0x6fbed5[_0x9ccec8(0x1f9)]((_0x5a7e44,_0x149f1d)=>{var _0x2f748c=_0x9ccec8;_0x1378a4[_0x149f1d][_0x2f748c(0x1eb)]=_0x5a7e44;}),_0x10142b[_0x9ccec8(0x1f9)]((_0x6baa16,_0x8125c5)=>{var _0x38a5a2=_0x9ccec8;_0x1378a4[_0x8125c5][_0x38a5a2(0x21e)]=_0x6baa16;}),_0x1f6deb[_0x9ccec8(0x1f9)]((_0x99727,_0x181fde)=>{var _0x5c0bdc=_0x9ccec8;_0x1378a4[_0x181fde][_0x5c0bdc(0x1d8)]=_0x99727;}),_0xbadb79[_0x9ccec8(0x1f9)]((_0x238fc0,_0x21a06f)=>{var _0x275eae=_0x9ccec8;_0x1378a4[_0x21a06f][_0x275eae(0x20f)]=_0x238fc0;}),_0x191007[_0x9ccec8(0x1f9)]((_0x28085c,_0x54a392)=>{var _0x55913e=_0x9ccec8;_0x1378a4[_0x54a392][_0x55913e(0x208)]=_0x28085c;}),_0x1ea1c3['forEach']((_0x59e23c,_0x154d61)=>{var _0x4658db=_0x9ccec8;_0x1378a4[_0x154d61][_0x4658db(0x219)]=_0x59e23c;}),_0xdc849c[_0x9ccec8(0x1f9)]((_0x2fb378,_0xc1d52e)=>{_0x1378a4[_0xc1d52e]['type']=_0x2fb378;}),_0x473e52[_0x9ccec8(0x1f9)]((_0x24a5ca,_0x48fc78)=>{var _0x420190=_0x9ccec8;_0x1378a4[_0x48fc78][_0x420190(0x1be)]=_0x24a5ca;});var _0x36679f=0x0;_0x1378a4[_0x9ccec8(0x1f9)](_0x1a84e5=>{var _0x3a6d87=_0x9ccec8;console[_0x3a6d87(0x22c)](_0x3a6d87(0x212),_0x1a84e5),(parseInt(_0x1a84e5['sale_qty'])<parseInt(_0x1a84e5[_0x3a6d87(0x20f)])||parseInt(_0x1a84e5['stock'])<parseInt(_0x1a84e5[_0x3a6d87(0x20f)])&&parseInt(_0x1a84e5[_0x3a6d87(0x21e)])>parseInt(_0x1a84e5[_0x3a6d87(0x20f)])||parseInt(_0x1a84e5[_0x3a6d87(0x20f)])==0x0)&&_0x36679f++;});if(_0x36679f!=0x0)return _0x207ff5[_0x9ccec8(0x200)](_0x9ccec8(0x20e),_0x9ccec8(0x1e5)),_0x7b1e6a[_0x9ccec8(0x214)]('back');_0x57113b[_0x9ccec8(0x205)][_0x9ccec8(0x1f9)](_0x4bccc5=>{var _0x41a60f=_0x9ccec8;const _0x26e622=_0x3d77ad['product_details'][_0x41a60f(0x228)](_0x538064=>{var _0x27a489=_0x41a60f;_0x538064[_0x27a489(0x231)]==_0x4bccc5['product_name']&&_0x538064['floorlevel']==_0x4bccc5[_0x27a489(0x1be)]&&_0x538064[_0x27a489(0x21c)]==_0x4bccc5['type']&&_0x538064[_0x27a489(0x219)]==_0x4bccc5[_0x27a489(0x219)]&&_0x538064[_0x27a489(0x208)]==_0x4bccc5['bay']&&(_0x538064[_0x27a489(0x1c3)]=parseInt(_0x538064['product_stock'])+parseInt(_0x4bccc5[_0x27a489(0x20f)]));});}),console[_0x9ccec8(0x22c)](_0x9ccec8(0x1c8),_0x3d77ad),await _0x3d77ad[_0x9ccec8(0x1df)](),_0x57113b['invoice']=_0x44456a,_0x57113b['customer']=_0x22a55d,_0x57113b[_0x9ccec8(0x1f6)]=_0x1c4d3,_0x57113b['warehouse_name']=_0x229561,_0x57113b['return_sale']=_0x1378a4,_0x57113b['note']=_0x1f778d,_0x57113b[_0x9ccec8(0x1c7)]=_0x27d2b1,_0x57113b['ToRoom']=_0x139e78;const _0x5d946b=await _0x57113b['save']();console[_0x9ccec8(0x22c)](_0x9ccec8(0x1dc),_0x5d946b);const _0x39fb21=await c_payment_data[_0x9ccec8(0x1fa)]({'invoice':_0x207ff5[_0x9ccec8(0x22d)]['invoice'],'reason':'Sale\x20Return'});_0x39fb21[_0x9ccec8(0x1cc)]=_0x207ff5[_0x9ccec8(0x22d)]['suppliers'],_0x39fb21['date']=_0x207ff5[_0x9ccec8(0x22d)][_0x9ccec8(0x1f6)],await _0x39fb21['save'](),_0x207ff5[_0x9ccec8(0x200)](_0x9ccec8(0x1f7),'purchase\x20return\x20successfully'),_0x7b1e6a[_0x9ccec8(0x214)](_0x9ccec8(0x1e3));}catch(_0xf81399){console['log'](_0xf81399),_0x7b1e6a[_0x9ccec8(0x1ca)](0xc8)[_0x9ccec8(0x1ff)]({'message':_0xf81399[_0x9ccec8(0x1f8)]});}}),router[a0_0x1d12a6(0x1fc)]('/give_payment/:id',auth,async(_0x541646,_0x47804f)=>{var _0x57dead=a0_0x1d12a6;try{const _0x3603be=_0x541646[_0x57dead(0x1c6)]['id'],{invoice:_0x276045,customer:_0x12b4b6,payable_to_customer:_0x6f2ec6,paid_amount:_0x1c9bb1}=_0x541646['body'],_0x134436=await sales_return[_0x57dead(0x226)](_0x3603be);console['log']('data',_0x134436),console[_0x57dead(0x22c)](_0x6f2ec6),console['log'](_0x1c9bb1);var _0x1fc1e1=_0x6f2ec6-_0x1c9bb1;console[_0x57dead(0x22c)](_0x57dead(0x1e7),_0x1fc1e1),_0x134436[_0x57dead(0x1d9)]=parseFloat(_0x1c9bb1)+parseFloat(_0x134436[_0x57dead(0x1d9)]),_0x134436[_0x57dead(0x232)]=_0x1fc1e1,console[_0x57dead(0x22c)](_0x134436);const _0x492421=await _0x134436[_0x57dead(0x1df)]();console[_0x57dead(0x22c)](0x1b207);const _0x140768=await c_payment_data['findOne']({'invoice':_0x541646['body'][_0x57dead(0x206)],'reason':_0x57dead(0x209)});console[_0x57dead(0x22c)]('c_payment',_0x140768),_0x140768['amount']=_0x1fc1e1,await _0x140768['save']();let _0x9d10f7=new Date(),_0x27b22b=('0'+_0x9d10f7[_0x57dead(0x1f2)]())[_0x57dead(0x210)](-0x2),_0x107b0c=('0'+(_0x9d10f7[_0x57dead(0x1c1)]()+0x1))[_0x57dead(0x210)](-0x2),_0x10ecd6=_0x9d10f7['getFullYear'](),_0x20c515=_0x10ecd6+'-'+_0x107b0c+'-'+_0x27b22b;const _0x50e501=new customer_payment({'invoice':_0x276045,'date':_0x10ecd6+'-'+_0x107b0c+'-'+_0x27b22b,'customer':_0x12b4b6,'reason':_0x57dead(0x230),'amount':_0x1c9bb1}),_0x3a82b1=await _0x50e501[_0x57dead(0x1df)]();_0x541646['flash'](_0x57dead(0x1f7),'payment\x20successfull'),_0x47804f[_0x57dead(0x214)](_0x57dead(0x1e3));}catch(_0x2b385f){console[_0x57dead(0x22c)](_0x2b385f);}}),router[a0_0x1d12a6(0x1d4)](a0_0x1d12a6(0x1d6),auth,async(_0x4c56f5,_0x53c89e)=>{var _0x4043fd=a0_0x1d12a6;try{const {username:_0x5c9f44,email:_0x46437e,role:_0xb07ff4}=_0x4c56f5['user'],_0x286bcc=_0x4c56f5[_0x4043fd(0x1e9)],_0x113d21=await profile[_0x4043fd(0x1fa)]({'email':_0x286bcc['email']}),_0x5eeba6=await master_shop[_0x4043fd(0x1fb)]();console['log'](_0x4043fd(0x224),_0x5eeba6);const _0x10aa57=_0x4c56f5['params']['id'],_0x255ded=await sales_return[_0x4043fd(0x226)](_0x10aa57);console[_0x4043fd(0x22c)](_0x255ded);const _0x2c3427=await customer[_0x4043fd(0x1fa)]({'name':_0x255ded[_0x4043fd(0x22a)]});console['log'](_0x2c3427);if(_0x5eeba6[0x0][_0x4043fd(0x217)]==_0x4043fd(0x1e1)){var _0x4bd299=users[_0x4043fd(0x1f1)];console[_0x4043fd(0x22c)](_0x4bd299);}else{if(_0x5eeba6[0x0][_0x4043fd(0x217)]==_0x4043fd(0x20a))var _0x4bd299=users[_0x4043fd(0x20a)];else{if(_0x5eeba6[0x0][_0x4043fd(0x217)]==_0x4043fd(0x218))var _0x4bd299=users[_0x4043fd(0x218)];else{if(_0x5eeba6[0x0]['language']==_0x4043fd(0x233))var _0x4bd299=users['Spanish'];else{if(_0x5eeba6[0x0][_0x4043fd(0x217)]==_0x4043fd(0x1d1))var _0x4bd299=users[_0x4043fd(0x1d1)];else{if(_0x5eeba6[0x0][_0x4043fd(0x217)]==_0x4043fd(0x1ed))var _0x4bd299=users[_0x4043fd(0x1ef)];else{if(_0x5eeba6[0x0]['language']==_0x4043fd(0x1cf))var _0x4bd299=users[_0x4043fd(0x1cf)];else{if(_0x5eeba6[0x0][_0x4043fd(0x217)]==_0x4043fd(0x234))var _0x4bd299=users[_0x4043fd(0x1ee)];}}}}}}}_0x53c89e[_0x4043fd(0x1d0)]('sales_return_invoice',{'success':_0x4c56f5[_0x4043fd(0x200)](_0x4043fd(0x1f7)),'errors':_0x4c56f5[_0x4043fd(0x200)](_0x4043fd(0x20e)),'role':_0x286bcc,'profile':_0x113d21,'master_shop':_0x5eeba6,'customers':_0x2c3427,'sales':_0x255ded,'language':_0x4bd299});}catch(_0x1e4af2){console[_0x4043fd(0x22c)](_0x1e4af2);}}),module['exports']=router;function a0_0x1117(_0x287bec,_0x399cd6){var _0x16d37f=a0_0x16d3();return a0_0x1117=function(_0x111716,_0x45ceac){_0x111716=_0x111716-0x1bd;var _0x4fc9e2=_0x16d37f[_0x111716];return _0x4fc9e2;},a0_0x1117(_0x287bec,_0x399cd6);}function a0_0x16d3(){var _0xc773cb=['5GBmeVS','date','success','message','forEach','findOne','find','post','$product_details.storage','customers','json','flash','sales_quantity_QA','express','product_name_QA','product_code_QA','return_sale','invoice','$product_details','bay','Sale\x20Return','Hindi','474557kZKbQZ','5366754xdBtKh','3260580pAlISr','errors','return_qty','slice','old_data','foreach\x20newproduct','70LURbjW','redirect','name','$product_details.bay','language','German','bin','Enabled','2241972EpHmlw','type','stocks_QA','sale_qty','70WcqwUh','QA\x20Warehouse','8BFETcv','/view/:id','$product_details.floorlevel','master','types','findById','primary_code','map','$product_details.type','customer','../public/language/languages.json','log','body','note','secondary_code','Returned\x20Payment\x20For\x20Sale\x20Return','product_name','due_amount','Spanish','Arabic\x20(ae)','1169686cILMGU','floorlevel','Finished\x20Goods','$product_details.product_code','getMonth','return_sale_QA','product_stock','email','$name','params','ToWarehouse','old_warehouse_data','aggregate','status','Return\x20Rooms','suppliers','product_details','primary_code_QA','Chinese','render','French','3924668SqFyAG','$product_details.product_stock','get','secondary_code_QA','/invoice/:id','stocks','stock','paid_amount','return_qty_QA','../models/all_models','new\x20new_data','string','warehouse_name','save','ToRoom','English\x20(US)','/view','/sales_return/view','sales_quantity','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','$product_details.rack','subtract','8805fvzRcS','user','$product_details.primary_code','product_code','for_categorize','Portuguese\x20(BR)','Arabic','Portuguese','customer_docs','English','getDate','Router','$customer_docs'];a0_0x16d3=function(){return _0xc773cb;};return a0_0x16d3();}