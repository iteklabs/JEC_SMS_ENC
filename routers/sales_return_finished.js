var a0_0x56079c=a0_0x56eb;function a0_0x56eb(_0x2d22d1,_0x5614a5){var _0x2daad5=a0_0x2daa();return a0_0x56eb=function(_0x56eba1,_0x789140){_0x56eba1=_0x56eba1-0x15f;var _0x20ed4c=_0x2daad5[_0x56eba1];return _0x20ed4c;},a0_0x56eb(_0x2d22d1,_0x5614a5);}(function(_0x3b3a19,_0x5ebc9d){var _0x31eccd=a0_0x56eb,_0x3d22d4=_0x3b3a19();while(!![]){try{var _0x180744=parseInt(_0x31eccd(0x1af))/0x1*(parseInt(_0x31eccd(0x19e))/0x2)+-parseInt(_0x31eccd(0x17a))/0x3*(-parseInt(_0x31eccd(0x16d))/0x4)+-parseInt(_0x31eccd(0x1d2))/0x5*(parseInt(_0x31eccd(0x1a9))/0x6)+-parseInt(_0x31eccd(0x1c7))/0x7*(parseInt(_0x31eccd(0x1ad))/0x8)+-parseInt(_0x31eccd(0x193))/0x9*(-parseInt(_0x31eccd(0x199))/0xa)+parseInt(_0x31eccd(0x168))/0xb*(-parseInt(_0x31eccd(0x160))/0xc)+-parseInt(_0x31eccd(0x1a4))/0xd*(-parseInt(_0x31eccd(0x1aa))/0xe);if(_0x180744===_0x5ebc9d)break;else _0x3d22d4['push'](_0x3d22d4['shift']());}catch(_0x283d97){_0x3d22d4['push'](_0x3d22d4['shift']());}}}(a0_0x2daa,0x484a5));const express=require(a0_0x56079c(0x175)),app=express(),router=express[a0_0x56079c(0x1ab)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x56079c(0x19f)),auth=require(a0_0x56079c(0x18e)),users=require(a0_0x56079c(0x169));router[a0_0x56079c(0x1c9)](a0_0x56079c(0x1c2),auth,async(_0x1a52d1,_0x30d6b9)=>{var _0x26c21a=a0_0x56079c;try{const {username:_0x508174,email:_0x3be47,role:_0x4a06a4}=_0x1a52d1[_0x26c21a(0x192)],_0x33a59a=_0x1a52d1['user'],_0x2fdcec=await profile['findOne']({'email':_0x33a59a[_0x26c21a(0x165)]}),_0x532003=await master_shop['find'](),_0x4e5833=await sales_return_finished[_0x26c21a(0x1a0)]([{'$lookup':{'from':'customers','localField':'customer','foreignField':'name','as':_0x26c21a(0x1a7)}},{'$unwind':'$customer_docs'}]);if(_0x532003[0x0][_0x26c21a(0x1ae)]==_0x26c21a(0x18b)){var _0x487965=users[_0x26c21a(0x1a6)];console[_0x26c21a(0x17d)](_0x487965);}else{if(_0x532003[0x0][_0x26c21a(0x1ae)]==_0x26c21a(0x1b2))var _0x487965=users['Hindi'];else{if(_0x532003[0x0][_0x26c21a(0x1ae)]==_0x26c21a(0x173))var _0x487965=users['German'];else{if(_0x532003[0x0][_0x26c21a(0x1ae)]=='Spanish')var _0x487965=users[_0x26c21a(0x1c0)];else{if(_0x532003[0x0]['language']==_0x26c21a(0x17e))var _0x487965=users[_0x26c21a(0x17e)];else{if(_0x532003[0x0][_0x26c21a(0x1ae)]==_0x26c21a(0x1cb))var _0x487965=users[_0x26c21a(0x17b)];else{if(_0x532003[0x0][_0x26c21a(0x1ae)]=='Chinese')var _0x487965=users[_0x26c21a(0x176)];else{if(_0x532003[0x0][_0x26c21a(0x1ae)]==_0x26c21a(0x1c1))var _0x487965=users[_0x26c21a(0x1d5)];}}}}}}}_0x30d6b9[_0x26c21a(0x1a1)]('sales_return_finished',{'success':_0x1a52d1[_0x26c21a(0x18d)]('success'),'errors':_0x1a52d1['flash']('errors'),'role':_0x33a59a,'profile':_0x2fdcec,'master_shop':_0x532003,'user':_0x4e5833,'language':_0x487965});}catch(_0x44f7a5){console['log'](_0x44f7a5);}}),router['get'](a0_0x56079c(0x194),auth,async(_0x17d27c,_0x1dcf88)=>{var _0x2c08c9=a0_0x56079c;try{const {username:_0x5945eb,email:_0x5b651a,role:_0x42f31c}=_0x17d27c[_0x2c08c9(0x192)],_0x198e12=_0x17d27c[_0x2c08c9(0x192)],_0x2536a0=await profile[_0x2c08c9(0x167)]({'email':_0x198e12[_0x2c08c9(0x165)]}),_0x3608d3=await master_shop[_0x2c08c9(0x1d7)]();console['log']('master',_0x3608d3);const _0x468041=_0x17d27c[_0x2c08c9(0x1b1)]['id'];console[_0x2c08c9(0x17d)](_0x468041);var _0x11afe1=['Return\x20Rooms'];const _0x47a83f=await sales_return_finished[_0x2c08c9(0x19d)](_0x468041),_0x58ff3e=await warehouse[_0x2c08c9(0x1a0)]([{'$match':{'name':_0x47a83f[_0x2c08c9(0x172)],'room':_0x47a83f['ToRoom']}},{'$unwind':_0x2c08c9(0x1be)},{'$group':{'_id':_0x2c08c9(0x1bb),'name':{'$first':_0x2c08c9(0x188)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x2c08c9(0x1b5)},'bin':{'$first':_0x2c08c9(0x1c5)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x2c08c9(0x195)},'primary_code':{'$first':_0x2c08c9(0x186)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x2c08c9(0x16b)},'rack':{'$first':_0x2c08c9(0x171)}}}]);console[_0x2c08c9(0x17d)](_0x58ff3e);const _0x3c9768=await warehouse['aggregate']([{'$match':{'status':_0x2c08c9(0x1bd),'warehouse_category':_0x2c08c9(0x162)}},{'$group':{'_id':_0x2c08c9(0x1b0),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0xd93ed9=await warehouse['aggregate']([{'$match':{'status':_0x2c08c9(0x1bd),'name':_0x2c08c9(0x164)}},{'$group':{'_id':_0x2c08c9(0x1b0),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x5b70fe=await product[_0x2c08c9(0x1d7)]({});if(_0x3608d3[0x0][_0x2c08c9(0x1ae)]==_0x2c08c9(0x18b)){var _0x183b52=users['English'];console[_0x2c08c9(0x17d)](_0x183b52);}else{if(_0x3608d3[0x0][_0x2c08c9(0x1ae)]=='Hindi')var _0x183b52=users[_0x2c08c9(0x1b2)];else{if(_0x3608d3[0x0][_0x2c08c9(0x1ae)]==_0x2c08c9(0x173))var _0x183b52=users[_0x2c08c9(0x173)];else{if(_0x3608d3[0x0][_0x2c08c9(0x1ae)]=='Spanish')var _0x183b52=users[_0x2c08c9(0x1c0)];else{if(_0x3608d3[0x0][_0x2c08c9(0x1ae)]==_0x2c08c9(0x17e))var _0x183b52=users[_0x2c08c9(0x17e)];else{if(_0x3608d3[0x0][_0x2c08c9(0x1ae)]==_0x2c08c9(0x1cb))var _0x183b52=users[_0x2c08c9(0x17b)];else{if(_0x3608d3[0x0][_0x2c08c9(0x1ae)]==_0x2c08c9(0x176))var _0x183b52=users[_0x2c08c9(0x176)];else{if(_0x3608d3[0x0]['language']==_0x2c08c9(0x1c1))var _0x183b52=users[_0x2c08c9(0x1d5)];}}}}}}}_0x1dcf88[_0x2c08c9(0x1a1)](_0x2c08c9(0x161),{'success':_0x17d27c[_0x2c08c9(0x18d)](_0x2c08c9(0x1ac)),'errors':_0x17d27c[_0x2c08c9(0x18d)]('errors'),'role':_0x198e12,'profile':_0x2536a0,'master_shop':_0x3608d3,'user':_0x47a83f,'stock':_0x58ff3e,'unit':_0x5b70fe,'language':_0x183b52,'warehouses':_0x3c9768,'rooms':_0x11afe1,'warehouse_QA':_0xd93ed9});}catch(_0x25932b){console[_0x2c08c9(0x17d)](_0x25932b);}}),router[a0_0x56079c(0x191)](a0_0x56079c(0x194),auth,async(_0x28b4a8,_0x1b2a09)=>{var _0x152a7d=a0_0x56079c;if(_0x28b4a8[_0x152a7d(0x1a2)]['for_categorize']=='QA')try{const _0x4c7c01=_0x28b4a8['params']['id'],_0x23eab9=await sales_return['findOne']({'invoice':_0x28b4a8[_0x152a7d(0x1a2)]['invoice']}),_0x4de700=await warehouse[_0x152a7d(0x167)]({'name':_0x23eab9[_0x152a7d(0x172)],'room':_0x23eab9[_0x152a7d(0x16a)]}),{invoice:_0x596af8,customer:_0x450953,date:_0x5d6705,warehouse_name:_0x13d6a4,product_name:_0x372491,primary_code:_0x31fd5c,secondary_code:_0x6f1645,product_code:_0x32fe7a,sales_quantity:_0x19f1b1,stocks:_0x2bccfc,return_qty:_0x19d062,note:_0xf3cc56,to_warehouse_name_QA:_0x3ab222,to_Room_name_QA:_0x3083eb}=_0x28b4a8[_0x152a7d(0x1a2)];if(typeof product_name_QA==_0x152a7d(0x174))var _0x14d786=[_0x28b4a8[_0x152a7d(0x1a2)]['product_name_QA']],_0x1d8d9c=[_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x190)]],_0x5d66c8=[_0x28b4a8['body']['secondary_code_QA']],_0xcb7fb6=[_0x28b4a8[_0x152a7d(0x1a2)]['product_code_QA']],_0x3b8eb8=[_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x1cd)]],_0x48b1cc=[_0x28b4a8['body'][_0x152a7d(0x170)]],_0x451aca=[_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x183)]];else var _0x14d786=[..._0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x187)]],_0x1d8d9c=[..._0x28b4a8[_0x152a7d(0x1a2)]['primary_code_QA']],_0x5d66c8=[..._0x28b4a8[_0x152a7d(0x1a2)]['secondary_code_QA']],_0xcb7fb6=[..._0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x1c8)]],_0x3b8eb8=[..._0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x1cd)]],_0x48b1cc=[..._0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x170)]],_0x451aca=[..._0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x183)]];const _0x2b4a3f=_0x14d786[_0x152a7d(0x1bc)](_0x406ba1=>{return _0x406ba1={'product_name':_0x406ba1};});_0x1d8d9c[_0x152a7d(0x1c4)]((_0x1f61df,_0x352400)=>{var _0x32e93a=_0x152a7d;_0x2b4a3f[_0x352400][_0x32e93a(0x185)]=_0x1f61df;}),_0x5d66c8[_0x152a7d(0x1c4)]((_0x157387,_0x5c4358)=>{var _0x328d48=_0x152a7d;_0x2b4a3f[_0x5c4358][_0x328d48(0x1bf)]=_0x157387;}),_0xcb7fb6['forEach']((_0x43e0be,_0x763eb)=>{_0x2b4a3f[_0x763eb]['product_code']=_0x43e0be;}),_0x3b8eb8[_0x152a7d(0x1c4)]((_0x1ffdea,_0x5e114e)=>{_0x2b4a3f[_0x5e114e]['sale_qty']=_0x1ffdea;}),_0x48b1cc[_0x152a7d(0x1c4)]((_0x48b807,_0x31117f)=>{var _0x3bef91=_0x152a7d;_0x2b4a3f[_0x31117f][_0x3bef91(0x1d0)]=_0x48b807;}),_0x451aca['forEach']((_0x5d8632,_0x474a67)=>{var _0x4bf97c=_0x152a7d;_0x2b4a3f[_0x474a67][_0x4bf97c(0x19c)]=_0x5d8632;}),_0x23eab9[_0x152a7d(0x182)][_0x152a7d(0x1c4)](_0x1c1c12=>{var _0x143733=_0x152a7d;const _0x4a8b4c=_0x4de700[_0x143733(0x1a5)]['map'](_0x237aed=>{var _0x472ee8=_0x143733;_0x237aed[_0x472ee8(0x1cc)]==_0x1c1c12['product_name']&&(_0x237aed[_0x472ee8(0x178)]=parseInt(_0x237aed[_0x472ee8(0x178)])+parseInt(_0x1c1c12[_0x472ee8(0x19c)]));});}),await _0x4de700[_0x152a7d(0x166)](),_0x23eab9[_0x152a7d(0x1b8)]=_0x596af8,_0x23eab9[_0x152a7d(0x18c)]=_0x450953,_0x23eab9[_0x152a7d(0x196)]=_0x5d6705,_0x23eab9[_0x152a7d(0x16c)]=_0x13d6a4,_0x23eab9[_0x152a7d(0x182)]=_0x2b4a3f,_0x23eab9[_0x152a7d(0x180)]=_0xf3cc56,_0x23eab9[_0x152a7d(0x172)]=_0x3ab222,_0x23eab9[_0x152a7d(0x16a)]=_0x3083eb;const _0x26164e=await _0x23eab9[_0x152a7d(0x166)](),_0x5ca965=await c_payment_data[_0x152a7d(0x167)]({'invoice':_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x1b8)],'reason':_0x152a7d(0x1b6)});_0x5ca965[_0x152a7d(0x1ca)]=_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x1ca)],_0x5ca965[_0x152a7d(0x196)]=_0x28b4a8[_0x152a7d(0x1a2)]['date'],await _0x5ca965['save'](),_0x28b4a8['flash']('success',_0x152a7d(0x1b7)),_0x1b2a09[_0x152a7d(0x17c)](_0x152a7d(0x18a));}catch(_0x59a3c5){console['log'](_0x59a3c5),_0x1b2a09[_0x152a7d(0x1ba)](0xc8)[_0x152a7d(0x18f)]({'message':_0x59a3c5[_0x152a7d(0x163)]});}else try{const _0x371e6b=_0x28b4a8['params']['id'];console[_0x152a7d(0x17d)](_0x371e6b);const _0x574fc0=await sales_return[_0x152a7d(0x167)]({'invoice':_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x1b8)]});console[_0x152a7d(0x17d)]('old_data',_0x574fc0);const _0x1e29ae=await warehouse[_0x152a7d(0x167)]({'name':_0x574fc0[_0x152a7d(0x172)],'room':_0x574fc0[_0x152a7d(0x16a)]});console['log'](_0x152a7d(0x1d1),_0x1e29ae);const {invoice:_0x1a5e49,customer:_0xfbd5ec,date:_0xea6980,warehouse_name:_0x532586,product_name:_0x2edbb5,primary_code:_0x3eb4a6,secondary_code:_0x558305,product_code:_0x23f91e,sales_quantity:_0x377103,stocks:_0x3dae4e,return_qty:_0x4167c8,note:_0x4d73f7,to_warehouse_name:_0x9590a3,to_Room_name:_0x284493}=_0x28b4a8[_0x152a7d(0x1a2)];console[_0x152a7d(0x17d)](_0x28b4a8['body']);if(typeof _0x2edbb5==_0x152a7d(0x174))var _0x14d786=[_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x1cc)]],_0x1d8d9c=[_0x28b4a8['body'][_0x152a7d(0x185)]],_0x5d66c8=[_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x1bf)]],_0xcb7fb6=[_0x28b4a8[_0x152a7d(0x1a2)]['product_code']],_0x3b8eb8=[_0x28b4a8[_0x152a7d(0x1a2)]['sales_quantity']],_0x48b1cc=[_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x1d4)]],_0x451aca=[_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x19c)]],_0x46880c=[_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x15f)]],_0x1cd151=[_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x184)]],_0x535dba=[_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x1b3)]],_0x2c49d1=[_0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x17f)]];else var _0x14d786=[..._0x28b4a8['body'][_0x152a7d(0x1cc)]],_0x1d8d9c=[..._0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x185)]],_0x5d66c8=[..._0x28b4a8['body'][_0x152a7d(0x1bf)]],_0xcb7fb6=[..._0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x181)]],_0x3b8eb8=[..._0x28b4a8['body'][_0x152a7d(0x1c3)]],_0x48b1cc=[..._0x28b4a8[_0x152a7d(0x1a2)]['stocks']],_0x451aca=[..._0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x19c)]],_0x46880c=[..._0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x15f)]],_0x1cd151=[..._0x28b4a8[_0x152a7d(0x1a2)]['bin']],_0x535dba=[..._0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x1b3)]],_0x2c49d1=[..._0x28b4a8[_0x152a7d(0x1a2)][_0x152a7d(0x17f)]];const _0x450698=_0x14d786[_0x152a7d(0x1bc)](_0x25bff6=>{return _0x25bff6={'product_name':_0x25bff6};});_0x1d8d9c[_0x152a7d(0x1c4)]((_0x67f86b,_0x1be1c5)=>{var _0x157af9=_0x152a7d;_0x450698[_0x1be1c5][_0x157af9(0x185)]=_0x67f86b;}),_0x5d66c8[_0x152a7d(0x1c4)]((_0x1a98cc,_0x3e5a80)=>{var _0x319eb7=_0x152a7d;_0x450698[_0x3e5a80][_0x319eb7(0x1bf)]=_0x1a98cc;}),_0xcb7fb6['forEach']((_0x5f182a,_0x3822d5)=>{var _0xdc6d17=_0x152a7d;_0x450698[_0x3822d5][_0xdc6d17(0x181)]=_0x5f182a;}),_0x3b8eb8[_0x152a7d(0x1c4)]((_0x4ac2c1,_0x2e2e6b)=>{var _0x26f0ad=_0x152a7d;_0x450698[_0x2e2e6b][_0x26f0ad(0x1d6)]=_0x4ac2c1;}),_0x48b1cc[_0x152a7d(0x1c4)]((_0x3f5f73,_0xd71653)=>{var _0x549633=_0x152a7d;_0x450698[_0xd71653][_0x549633(0x1d0)]=_0x3f5f73;}),_0x451aca[_0x152a7d(0x1c4)]((_0x3578ef,_0x116dba)=>{var _0x55920b=_0x152a7d;_0x450698[_0x116dba][_0x55920b(0x19c)]=_0x3578ef;}),_0x46880c[_0x152a7d(0x1c4)]((_0x3b7816,_0x5e6ff2)=>{var _0x1574da=_0x152a7d;_0x450698[_0x5e6ff2][_0x1574da(0x15f)]=_0x3b7816;}),_0x1cd151['forEach']((_0x341b2b,_0x3a7313)=>{_0x450698[_0x3a7313]['bin']=_0x341b2b;}),_0x535dba[_0x152a7d(0x1c4)]((_0x3bc9e9,_0x456c2a)=>{_0x450698[_0x456c2a]['type']=_0x3bc9e9;}),_0x2c49d1['forEach']((_0x3982f1,_0x2a4c5e)=>{var _0x135d7d=_0x152a7d;_0x450698[_0x2a4c5e][_0x135d7d(0x17f)]=_0x3982f1;});var _0x44be2f=0x0;_0x450698[_0x152a7d(0x1c4)](_0x42e35d=>{var _0x353de6=_0x152a7d;console[_0x353de6(0x17d)]('foreach\x20newproduct',_0x42e35d),(parseInt(_0x42e35d[_0x353de6(0x1d6)])<parseInt(_0x42e35d[_0x353de6(0x19c)])||parseInt(_0x42e35d[_0x353de6(0x1d0)])<parseInt(_0x42e35d[_0x353de6(0x19c)])&&parseInt(_0x42e35d[_0x353de6(0x1d6)])>parseInt(_0x42e35d['return_qty'])||parseInt(_0x42e35d[_0x353de6(0x19c)])==0x0)&&_0x44be2f++;});if(_0x44be2f!=0x0)return _0x28b4a8['flash'](_0x152a7d(0x16e),_0x152a7d(0x177)),_0x1b2a09['redirect']('back');_0x574fc0[_0x152a7d(0x1cf)][_0x152a7d(0x1c4)](_0x3de87a=>{var _0x599de7=_0x152a7d;const _0x33e49c=_0x1e29ae[_0x599de7(0x1a5)][_0x599de7(0x1bc)](_0x1068cf=>{var _0x23776b=_0x599de7;_0x1068cf[_0x23776b(0x1cc)]==_0x3de87a[_0x23776b(0x1cc)]&&_0x1068cf[_0x23776b(0x17f)]==_0x3de87a[_0x23776b(0x17f)]&&_0x1068cf['type']==_0x3de87a[_0x23776b(0x179)]&&_0x1068cf[_0x23776b(0x184)]==_0x3de87a[_0x23776b(0x184)]&&_0x1068cf[_0x23776b(0x15f)]==_0x3de87a[_0x23776b(0x15f)]&&(_0x1068cf[_0x23776b(0x178)]=parseInt(_0x1068cf[_0x23776b(0x178)])+parseInt(_0x3de87a[_0x23776b(0x19c)]));});}),console[_0x152a7d(0x17d)](_0x152a7d(0x1d1),_0x1e29ae),await _0x1e29ae[_0x152a7d(0x166)](),_0x574fc0[_0x152a7d(0x1b8)]=_0x1a5e49,_0x574fc0[_0x152a7d(0x18c)]=_0xfbd5ec,_0x574fc0['date']=_0xea6980,_0x574fc0[_0x152a7d(0x16c)]=_0x532586,_0x574fc0[_0x152a7d(0x1cf)]=_0x450698,_0x574fc0['note']=_0x4d73f7,_0x574fc0[_0x152a7d(0x172)]=_0x9590a3,_0x574fc0[_0x152a7d(0x16a)]=_0x284493;const _0x5e4e65=await _0x574fc0[_0x152a7d(0x166)]();console[_0x152a7d(0x17d)](_0x152a7d(0x197),_0x5e4e65);const _0x493242=await c_payment_data[_0x152a7d(0x167)]({'invoice':_0x28b4a8[_0x152a7d(0x1a2)]['invoice'],'reason':'Sale\x20Return'});_0x493242[_0x152a7d(0x1ca)]=_0x28b4a8['body'][_0x152a7d(0x1ca)],_0x493242[_0x152a7d(0x196)]=_0x28b4a8[_0x152a7d(0x1a2)]['date'],await _0x493242[_0x152a7d(0x166)](),_0x28b4a8[_0x152a7d(0x18d)](_0x152a7d(0x1ac),_0x152a7d(0x1b7)),_0x1b2a09[_0x152a7d(0x17c)](_0x152a7d(0x1a3));}catch(_0x5095e6){console['log'](_0x5095e6),_0x1b2a09[_0x152a7d(0x1ba)](0xc8)['json']({'message':_0x5095e6[_0x152a7d(0x163)]});}}),router[a0_0x56079c(0x191)]('/give_payment/:id',auth,async(_0x933efe,_0x2a6ae2)=>{var _0x3ad025=a0_0x56079c;try{const _0x3bb368=_0x933efe[_0x3ad025(0x1b1)]['id'],{invoice:_0x5462b8,customer:_0x4264d9,payable_to_customer:_0x262de1,paid_amount:_0x3acf9b}=_0x933efe[_0x3ad025(0x1a2)],_0x390502=await sales_return[_0x3ad025(0x19d)](_0x3bb368);console[_0x3ad025(0x17d)]('data',_0x390502),console[_0x3ad025(0x17d)](_0x262de1),console[_0x3ad025(0x17d)](_0x3acf9b);var _0x4eb2bc=_0x262de1-_0x3acf9b;console[_0x3ad025(0x17d)](_0x3ad025(0x198),_0x4eb2bc),_0x390502['paid_amount']=parseFloat(_0x3acf9b)+parseFloat(_0x390502['paid_amount']),_0x390502[_0x3ad025(0x1ce)]=_0x4eb2bc,console[_0x3ad025(0x17d)](_0x390502);const _0x476a4c=await _0x390502[_0x3ad025(0x166)]();console['log'](0x1b207);const _0x1d73a3=await c_payment_data[_0x3ad025(0x167)]({'invoice':_0x933efe[_0x3ad025(0x1a2)]['invoice'],'reason':_0x3ad025(0x1b6)});console[_0x3ad025(0x17d)]('c_payment',_0x1d73a3),_0x1d73a3['amount']=_0x4eb2bc,await _0x1d73a3['save']();let _0x46bc2c=new Date(),_0x353e3f=('0'+_0x46bc2c[_0x3ad025(0x1b9)]())[_0x3ad025(0x16f)](-0x2),_0x467137=('0'+(_0x46bc2c[_0x3ad025(0x189)]()+0x1))[_0x3ad025(0x16f)](-0x2),_0x16943d=_0x46bc2c['getFullYear'](),_0x3bdc76=_0x16943d+'-'+_0x467137+'-'+_0x353e3f;const _0x2d3869=new customer_payment({'invoice':_0x5462b8,'date':_0x16943d+'-'+_0x467137+'-'+_0x353e3f,'customer':_0x4264d9,'reason':_0x3ad025(0x19a),'amount':_0x3acf9b}),_0x538d11=await _0x2d3869['save']();_0x933efe[_0x3ad025(0x18d)](_0x3ad025(0x1ac),_0x3ad025(0x1b4)),_0x2a6ae2[_0x3ad025(0x17c)](_0x3ad025(0x1a3));}catch(_0x3358ae){console[_0x3ad025(0x17d)](_0x3358ae);}}),router['get'](a0_0x56079c(0x1d3),auth,async(_0x34d81d,_0x466e23)=>{var _0x72b77b=a0_0x56079c;try{const {username:_0x20924d,email:_0x389cb0,role:_0x4422f3}=_0x34d81d['user'],_0x1a053b=_0x34d81d['user'],_0x916ecf=await profile[_0x72b77b(0x167)]({'email':_0x1a053b[_0x72b77b(0x165)]}),_0x273dae=await master_shop[_0x72b77b(0x1d7)]();console[_0x72b77b(0x17d)](_0x72b77b(0x1a8),_0x273dae);const _0x4984b7=_0x34d81d[_0x72b77b(0x1b1)]['id'],_0x5d3880=await sales_return[_0x72b77b(0x19d)](_0x4984b7);console['log'](_0x5d3880);const _0x5a4401=await customer[_0x72b77b(0x167)]({'name':_0x5d3880[_0x72b77b(0x18c)]});console['log'](_0x5a4401);if(_0x273dae[0x0][_0x72b77b(0x1ae)]==_0x72b77b(0x18b)){var _0x19ce30=users['English'];console['log'](_0x19ce30);}else{if(_0x273dae[0x0][_0x72b77b(0x1ae)]==_0x72b77b(0x1b2))var _0x19ce30=users[_0x72b77b(0x1b2)];else{if(_0x273dae[0x0][_0x72b77b(0x1ae)]==_0x72b77b(0x173))var _0x19ce30=users['German'];else{if(_0x273dae[0x0][_0x72b77b(0x1ae)]==_0x72b77b(0x1c0))var _0x19ce30=users[_0x72b77b(0x1c0)];else{if(_0x273dae[0x0][_0x72b77b(0x1ae)]==_0x72b77b(0x17e))var _0x19ce30=users[_0x72b77b(0x17e)];else{if(_0x273dae[0x0][_0x72b77b(0x1ae)]=='Portuguese\x20(BR)')var _0x19ce30=users['Portuguese'];else{if(_0x273dae[0x0][_0x72b77b(0x1ae)]==_0x72b77b(0x176))var _0x19ce30=users['Chinese'];else{if(_0x273dae[0x0][_0x72b77b(0x1ae)]==_0x72b77b(0x1c1))var _0x19ce30=users['Arabic'];}}}}}}}_0x466e23[_0x72b77b(0x1a1)](_0x72b77b(0x19b),{'success':_0x34d81d['flash'](_0x72b77b(0x1ac)),'errors':_0x34d81d[_0x72b77b(0x18d)](_0x72b77b(0x16e)),'role':_0x1a053b,'profile':_0x916ecf,'master_shop':_0x273dae,'customers':_0x5a4401,'sales':_0x5d3880,'language':_0x19ce30});}catch(_0x33f3d9){console[_0x72b77b(0x17d)](_0x33f3d9);}}),module[a0_0x56079c(0x1c6)]=router;function a0_0x2daa(){var _0x261197=['find','bay','517764hozasE','return_sale_edit_finished','Finished\x20Goods','message','QA\x20Warehouse','email','save','findOne','143UyQZcz','../public/language/languages.json','ToRoom','$product_details.storage','warehouse_name','8PgwihQ','errors','slice','stocks_QA','$product_details.rack','ToWarehouse','German','string','express','Chinese','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','product_stock','type','771837VMDFQO','Portuguese','redirect','log','French','floorlevel','note','product_code','return_sale_QA','return_qty_QA','bin','primary_code','$product_details.primary_code','product_name_QA','$product_details.product_name','getMonth','/sales_return_finished/view','English\x20(US)','customer','flash','../middleware/auth','json','primary_code_QA','post','user','27aOEEcB','/view/:id','$product_details.floorlevel','date','new\x20new_data','subtract','53690QPiixJ','Returned\x20Payment\x20For\x20Sale\x20Return','sales_return_invoice','return_qty','findById','6526aEuMIK','../models/all_models','aggregate','render','body','/sales_return/view','52AVECml','product_details','English','customer_docs','master','12fWJMXz','2150176vRHfDy','Router','success','24jYrWUC','language','179XmTqqv','$name','params','Hindi','types','payment\x20successfull','$product_details.bay','Sale\x20Return','purchase\x20return\x20successfully','invoice','getDate','status','$product_details._id','map','Enabled','$product_details','secondary_code','Spanish','Arabic\x20(ae)','/view','sales_quantity','forEach','$product_details.bin','exports','1102458xhWfri','product_code_QA','get','suppliers','Portuguese\x20(BR)','product_name','sales_quantity_QA','due_amount','return_sale','stock','old_warehouse_data','998960htoGpk','/invoice/:id','stocks','Arabic','sale_qty'];a0_0x2daa=function(){return _0x261197;};return a0_0x2daa();}