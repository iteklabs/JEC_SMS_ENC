function a0_0x3336(){var _0x282116=['getFullYear','invoice','purchase\x20return\x20successfully','get','$product_details.rack','getMonth','Portuguese','2651892mqYAyg','return_qty','$product_details.product_code','string','new\x20new_data','amount','secondary_code','284392jyVDtn','Arabic','ToWarehouse','$product_details.type','Arabic\x20(ae)','errors','customer_docs','$product_details.primary_code','suppliers','Router','sale_qty','express','sales_return_finished','types','stocks','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','primary_code','email','$name','sales_quantity_QA','slice','$product_details.secondary_code','15KpiEcr','master','/view','4507785IGMSvS','old_warehouse_data','product_details','sales_quantity','Sale\x20Return','English\x20(US)','$customer_docs','French','Hindi','Returned\x20Payment\x20For\x20Sale\x20Return','warehouse_name','message','subtract','customer','product_name_QA','$product_details.bay','back','/sales_return/view','QA\x20Warehouse','forEach','product_name','success','payment\x20successfull','find','440906lGZWcg','stocks_QA','primary_code_QA','note','Chinese','$product_details._id','foreach\x20newproduct','../public/language/languages.json','return_qty_QA','secondary_code_QA','data','date','287uMPwdU','product_stock','return_sale_edit_finished','for_categorize','product_code','status','English','customers','3283224mFgDSa','stock','save','body','log','findOne','Enabled','language','/sales_return_finished/view','due_amount','/view/:id','paid_amount','10jIRkyM','type','redirect','map','return_sale_QA','findById','$product_details','post','Spanish','3067782jdFGNW','26159716ENpiQz','return_sale','/invoice/:id','bay','render','floorlevel','../models/all_models','bin','flash','aggregate','product_code_QA','3tPmHGc','json','German','ToRoom','user','Portuguese\x20(BR)','params'];a0_0x3336=function(){return _0x282116;};return a0_0x3336();}var a0_0x1d70e9=a0_0x1d01;function a0_0x1d01(_0x437bd7,_0x312a54){var _0x3336b1=a0_0x3336();return a0_0x1d01=function(_0x1d01d3,_0x256486){_0x1d01d3=_0x1d01d3-0x67;var _0x5e7cd4=_0x3336b1[_0x1d01d3];return _0x5e7cd4;},a0_0x1d01(_0x437bd7,_0x312a54);}(function(_0x2b6899,_0x2611ce){var _0xba79dd=a0_0x1d01,_0x1ecf5a=_0x2b6899();while(!![]){try{var _0x327ee9=parseInt(_0xba79dd(0xa7))/0x1+-parseInt(_0xba79dd(0xd0))/0x2*(-parseInt(_0xba79dd(0xdc))/0x3)+parseInt(_0xba79dd(0xbb))/0x4+parseInt(_0xba79dd(0x8c))/0x5*(parseInt(_0xba79dd(0x6f))/0x6)+-parseInt(_0xba79dd(0xb3))/0x7*(parseInt(_0xba79dd(0x76))/0x8)+parseInt(_0xba79dd(0x8f))/0x9*(parseInt(_0xba79dd(0xc7))/0xa)+-parseInt(_0xba79dd(0xd1))/0xb;if(_0x327ee9===_0x2611ce)break;else _0x1ecf5a['push'](_0x1ecf5a['shift']());}catch(_0x419e23){_0x1ecf5a['push'](_0x1ecf5a['shift']());}}}(a0_0x3336,0xc013d));const express=require(a0_0x1d70e9(0x81)),app=express(),router=express[a0_0x1d70e9(0x7f)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x1d70e9(0xd7)),auth=require('../middleware/auth'),users=require(a0_0x1d70e9(0xae));router['get'](a0_0x1d70e9(0x8e),auth,async(_0x33eff8,_0x493e6a)=>{var _0x460790=a0_0x1d70e9;try{const {username:_0x51cb75,email:_0x18f085,role:_0xd98806}=_0x33eff8[_0x460790(0xe0)],_0x9390b8=_0x33eff8[_0x460790(0xe0)],_0x5606a9=await profile['findOne']({'email':_0x9390b8['email']}),_0x574665=await master_shop[_0x460790(0xa6)](),_0x38b47d=await sales_return_finished[_0x460790(0xda)]([{'$lookup':{'from':_0x460790(0xba),'localField':_0x460790(0x9c),'foreignField':'name','as':_0x460790(0x7c)}},{'$unwind':_0x460790(0x95)}]);if(_0x574665[0x0][_0x460790(0xc2)]==_0x460790(0x94)){var _0x4bb2eb=users[_0x460790(0xb9)];console['log'](_0x4bb2eb);}else{if(_0x574665[0x0]['language']==_0x460790(0x97))var _0x4bb2eb=users[_0x460790(0x97)];else{if(_0x574665[0x0][_0x460790(0xc2)]==_0x460790(0xde))var _0x4bb2eb=users[_0x460790(0xde)];else{if(_0x574665[0x0][_0x460790(0xc2)]==_0x460790(0xcf))var _0x4bb2eb=users[_0x460790(0xcf)];else{if(_0x574665[0x0][_0x460790(0xc2)]=='French')var _0x4bb2eb=users['French'];else{if(_0x574665[0x0]['language']==_0x460790(0xe1))var _0x4bb2eb=users[_0x460790(0x6e)];else{if(_0x574665[0x0][_0x460790(0xc2)]=='Chinese')var _0x4bb2eb=users[_0x460790(0xab)];else{if(_0x574665[0x0][_0x460790(0xc2)]==_0x460790(0x7a))var _0x4bb2eb=users[_0x460790(0x77)];}}}}}}}_0x493e6a[_0x460790(0xd5)](_0x460790(0x82),{'success':_0x33eff8['flash'](_0x460790(0xa4)),'errors':_0x33eff8[_0x460790(0xd9)](_0x460790(0x7b)),'role':_0x9390b8,'profile':_0x5606a9,'master_shop':_0x574665,'user':_0x38b47d,'language':_0x4bb2eb});}catch(_0x4daf7a){console[_0x460790(0xbf)](_0x4daf7a);}}),router[a0_0x1d70e9(0x6b)]('/view/:id',auth,async(_0x3f3fbe,_0x42f6dd)=>{var _0x512d71=a0_0x1d70e9;try{const {username:_0x41d560,email:_0x4e7b3e,role:_0x2ce1d0}=_0x3f3fbe[_0x512d71(0xe0)],_0x4fc1d7=_0x3f3fbe[_0x512d71(0xe0)],_0x446d0e=await profile['findOne']({'email':_0x4fc1d7[_0x512d71(0x87)]}),_0x143a05=await master_shop['find']();console['log'](_0x512d71(0x8d),_0x143a05);const _0x9f4ba8=_0x3f3fbe[_0x512d71(0x67)]['id'];console[_0x512d71(0xbf)](_0x9f4ba8);var _0x327173=['Return\x20Rooms'];const _0x1e9bb0=await sales_return_finished[_0x512d71(0xcc)](_0x9f4ba8),_0x3cfff9=await warehouse[_0x512d71(0xda)]([{'$match':{'name':_0x1e9bb0['ToWarehouse'],'room':_0x1e9bb0[_0x512d71(0xdf)]}},{'$unwind':_0x512d71(0xcd)},{'$group':{'_id':_0x512d71(0xac),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x512d71(0x9e)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x512d71(0x79)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x512d71(0x7d)},'secondary_code':{'$first':_0x512d71(0x8b)},'product_code':{'$first':_0x512d71(0x71)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x512d71(0x6c)}}}]);console[_0x512d71(0xbf)](_0x3cfff9);const _0x2b866a=await warehouse['aggregate']([{'$match':{'status':_0x512d71(0xc1),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x512d71(0x88),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0xe4aa0f=await warehouse[_0x512d71(0xda)]([{'$match':{'status':_0x512d71(0xc1),'name':_0x512d71(0xa1)}},{'$group':{'_id':_0x512d71(0x88),'name':{'$first':_0x512d71(0x88)}}},{'$sort':{'name':0x1}}]),_0x38870c=await product[_0x512d71(0xa6)]({});if(_0x143a05[0x0]['language']==_0x512d71(0x94)){var _0x6c1659=users[_0x512d71(0xb9)];console[_0x512d71(0xbf)](_0x6c1659);}else{if(_0x143a05[0x0][_0x512d71(0xc2)]==_0x512d71(0x97))var _0x6c1659=users['Hindi'];else{if(_0x143a05[0x0][_0x512d71(0xc2)]==_0x512d71(0xde))var _0x6c1659=users['German'];else{if(_0x143a05[0x0][_0x512d71(0xc2)]==_0x512d71(0xcf))var _0x6c1659=users[_0x512d71(0xcf)];else{if(_0x143a05[0x0][_0x512d71(0xc2)]==_0x512d71(0x96))var _0x6c1659=users[_0x512d71(0x96)];else{if(_0x143a05[0x0][_0x512d71(0xc2)]==_0x512d71(0xe1))var _0x6c1659=users['Portuguese'];else{if(_0x143a05[0x0][_0x512d71(0xc2)]==_0x512d71(0xab))var _0x6c1659=users[_0x512d71(0xab)];else{if(_0x143a05[0x0][_0x512d71(0xc2)]==_0x512d71(0x7a))var _0x6c1659=users['Arabic'];}}}}}}}_0x42f6dd[_0x512d71(0xd5)](_0x512d71(0xb5),{'success':_0x3f3fbe[_0x512d71(0xd9)]('success'),'errors':_0x3f3fbe[_0x512d71(0xd9)](_0x512d71(0x7b)),'role':_0x4fc1d7,'profile':_0x446d0e,'master_shop':_0x143a05,'user':_0x1e9bb0,'stock':_0x3cfff9,'unit':_0x38870c,'language':_0x6c1659,'warehouses':_0x2b866a,'rooms':_0x327173,'warehouse_QA':_0xe4aa0f});}catch(_0x5bfc74){console[_0x512d71(0xbf)](_0x5bfc74);}}),router[a0_0x1d70e9(0xce)](a0_0x1d70e9(0xc5),auth,async(_0x7b0ba,_0x270c37)=>{var _0x1bf689=a0_0x1d70e9;if(_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xb6)]=='QA')try{const _0x5ec98f=_0x7b0ba[_0x1bf689(0x67)]['id'],_0x1c0c3e=await sales_return[_0x1bf689(0xc0)]({'invoice':_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x69)]}),_0x329f75=await warehouse[_0x1bf689(0xc0)]({'name':_0x1c0c3e[_0x1bf689(0x78)],'room':_0x1c0c3e[_0x1bf689(0xdf)]}),{invoice:_0x493a36,customer:_0x15fcd8,date:_0xf157e1,warehouse_name:_0x4b1e54,product_name:_0x2753c6,primary_code:_0x5ad483,secondary_code:_0x4f53b0,product_code:_0x270777,sales_quantity:_0x22f35a,stocks:_0x552012,return_qty:_0x27a404,note:_0xe26a17,to_warehouse_name_QA:_0xbd80aa,to_Room_name_QA:_0x2fa060}=_0x7b0ba[_0x1bf689(0xbe)];if(typeof product_name_QA==_0x1bf689(0x72))var _0x5d6049=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x9d)]],_0xf225bc=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xa9)]],_0x3633f0=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xb0)]],_0x1c420f=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xdb)]],_0x517962=[_0x7b0ba[_0x1bf689(0xbe)]['sales_quantity_QA']],_0x5da7aa=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xa8)]],_0x1e6d1b=[_0x7b0ba['body'][_0x1bf689(0xaf)]];else var _0x5d6049=[..._0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x9d)]],_0xf225bc=[..._0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xa9)]],_0x3633f0=[..._0x7b0ba['body'][_0x1bf689(0xb0)]],_0x1c420f=[..._0x7b0ba[_0x1bf689(0xbe)]['product_code_QA']],_0x517962=[..._0x7b0ba['body'][_0x1bf689(0x89)]],_0x5da7aa=[..._0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xa8)]],_0x1e6d1b=[..._0x7b0ba[_0x1bf689(0xbe)]['return_qty_QA']];const _0x14e4b2=_0x5d6049[_0x1bf689(0xca)](_0x334bb7=>{return _0x334bb7={'product_name':_0x334bb7};});_0xf225bc[_0x1bf689(0xa2)]((_0xaf26d2,_0x96a0ef)=>{_0x14e4b2[_0x96a0ef]['primary_code']=_0xaf26d2;}),_0x3633f0[_0x1bf689(0xa2)]((_0xa6361c,_0x28553c)=>{var _0x1b26d9=_0x1bf689;_0x14e4b2[_0x28553c][_0x1b26d9(0x75)]=_0xa6361c;}),_0x1c420f[_0x1bf689(0xa2)]((_0x1be08b,_0xfaf7dd)=>{_0x14e4b2[_0xfaf7dd]['product_code']=_0x1be08b;}),_0x517962['forEach']((_0x32fbe8,_0x192ccf)=>{var _0x5a79cf=_0x1bf689;_0x14e4b2[_0x192ccf][_0x5a79cf(0x80)]=_0x32fbe8;}),_0x5da7aa[_0x1bf689(0xa2)]((_0x10a086,_0x200b47)=>{var _0xf9c76=_0x1bf689;_0x14e4b2[_0x200b47][_0xf9c76(0xbc)]=_0x10a086;}),_0x1e6d1b[_0x1bf689(0xa2)]((_0x18b1a4,_0x42c763)=>{var _0xc8483b=_0x1bf689;_0x14e4b2[_0x42c763][_0xc8483b(0x70)]=_0x18b1a4;}),_0x1c0c3e[_0x1bf689(0xcb)][_0x1bf689(0xa2)](_0x463ed5=>{const _0x107f90=_0x329f75['product_details']['map'](_0x27bf86=>{var _0x39c600=a0_0x1d01;_0x27bf86[_0x39c600(0xa3)]==_0x463ed5[_0x39c600(0xa3)]&&(_0x27bf86['product_stock']=parseInt(_0x27bf86[_0x39c600(0xb4)])+parseInt(_0x463ed5[_0x39c600(0x70)]));});}),await _0x329f75[_0x1bf689(0xbd)](),_0x1c0c3e[_0x1bf689(0x69)]=_0x493a36,_0x1c0c3e[_0x1bf689(0x9c)]=_0x15fcd8,_0x1c0c3e[_0x1bf689(0xb2)]=_0xf157e1,_0x1c0c3e[_0x1bf689(0x99)]=_0x4b1e54,_0x1c0c3e[_0x1bf689(0xcb)]=_0x14e4b2,_0x1c0c3e[_0x1bf689(0xaa)]=_0xe26a17,_0x1c0c3e[_0x1bf689(0x78)]=_0xbd80aa,_0x1c0c3e['ToRoom']=_0x2fa060;const _0x1eb6d5=await _0x1c0c3e[_0x1bf689(0xbd)](),_0x585ea5=await c_payment_data[_0x1bf689(0xc0)]({'invoice':_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x69)],'reason':_0x1bf689(0x93)});_0x585ea5[_0x1bf689(0x7e)]=_0x7b0ba['body'][_0x1bf689(0x7e)],_0x585ea5['date']=_0x7b0ba['body'][_0x1bf689(0xb2)],await _0x585ea5[_0x1bf689(0xbd)](),_0x7b0ba[_0x1bf689(0xd9)]('success','purchase\x20return\x20successfully'),_0x270c37[_0x1bf689(0xc9)](_0x1bf689(0xc3));}catch(_0x112013){console[_0x1bf689(0xbf)](_0x112013),_0x270c37['status'](0xc8)[_0x1bf689(0xdd)]({'message':_0x112013[_0x1bf689(0x9a)]});}else try{const _0x1923ae=_0x7b0ba[_0x1bf689(0x67)]['id'];console[_0x1bf689(0xbf)](_0x1923ae);const _0x3d46a9=await sales_return[_0x1bf689(0xc0)]({'invoice':_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x69)]});console[_0x1bf689(0xbf)]('old_data',_0x3d46a9);const _0x1b6ac6=await warehouse[_0x1bf689(0xc0)]({'name':_0x3d46a9[_0x1bf689(0x78)],'room':_0x3d46a9['ToRoom']});console[_0x1bf689(0xbf)](_0x1bf689(0x90),_0x1b6ac6);const {invoice:_0x364987,customer:_0x112a52,date:_0x243702,warehouse_name:_0x791cb0,product_name:_0x4a70c4,primary_code:_0x57579d,secondary_code:_0x1c3729,product_code:_0x3d385a,sales_quantity:_0x317149,stocks:_0x2f1a90,return_qty:_0x3ae6a7,note:_0x1d525d,to_warehouse_name:_0x16e684,to_Room_name:_0x305cfc}=_0x7b0ba['body'];console[_0x1bf689(0xbf)](_0x7b0ba[_0x1bf689(0xbe)]);if(typeof _0x4a70c4==_0x1bf689(0x72))var _0x5d6049=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xa3)]],_0xf225bc=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x86)]],_0x3633f0=[_0x7b0ba['body']['secondary_code']],_0x1c420f=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xb7)]],_0x517962=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x92)]],_0x5da7aa=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x84)]],_0x1e6d1b=[_0x7b0ba[_0x1bf689(0xbe)]['return_qty']],_0x1943f8=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xd4)]],_0x4b003a=[_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xd8)]],_0x221321=[_0x7b0ba['body'][_0x1bf689(0x83)]],_0x3dc0be=[_0x7b0ba['body'][_0x1bf689(0xd6)]];else var _0x5d6049=[..._0x7b0ba['body'][_0x1bf689(0xa3)]],_0xf225bc=[..._0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x86)]],_0x3633f0=[..._0x7b0ba['body']['secondary_code']],_0x1c420f=[..._0x7b0ba['body'][_0x1bf689(0xb7)]],_0x517962=[..._0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x92)]],_0x5da7aa=[..._0x7b0ba[_0x1bf689(0xbe)]['stocks']],_0x1e6d1b=[..._0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x70)]],_0x1943f8=[..._0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xd4)]],_0x4b003a=[..._0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xd8)]],_0x221321=[..._0x7b0ba['body'][_0x1bf689(0x83)]],_0x3dc0be=[..._0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0xd6)]];const _0x2ee087=_0x5d6049[_0x1bf689(0xca)](_0x4b8f0d=>{return _0x4b8f0d={'product_name':_0x4b8f0d};});_0xf225bc[_0x1bf689(0xa2)]((_0x160393,_0x3b608b)=>{var _0x55393b=_0x1bf689;_0x2ee087[_0x3b608b][_0x55393b(0x86)]=_0x160393;}),_0x3633f0[_0x1bf689(0xa2)]((_0x394926,_0x354483)=>{_0x2ee087[_0x354483]['secondary_code']=_0x394926;}),_0x1c420f[_0x1bf689(0xa2)]((_0x22f18a,_0x54ef28)=>{_0x2ee087[_0x54ef28]['product_code']=_0x22f18a;}),_0x517962[_0x1bf689(0xa2)]((_0x43c7b8,_0x159d24)=>{var _0x415ec8=_0x1bf689;_0x2ee087[_0x159d24][_0x415ec8(0x80)]=_0x43c7b8;}),_0x5da7aa[_0x1bf689(0xa2)]((_0x1edc02,_0x3ef1b4)=>{var _0x32eadc=_0x1bf689;_0x2ee087[_0x3ef1b4][_0x32eadc(0xbc)]=_0x1edc02;}),_0x1e6d1b[_0x1bf689(0xa2)]((_0x2ae143,_0x1d93fc)=>{_0x2ee087[_0x1d93fc]['return_qty']=_0x2ae143;}),_0x1943f8['forEach']((_0x35dacc,_0x4b8e50)=>{_0x2ee087[_0x4b8e50]['bay']=_0x35dacc;}),_0x4b003a[_0x1bf689(0xa2)]((_0x3cee94,_0x396b25)=>{var _0xf53261=_0x1bf689;_0x2ee087[_0x396b25][_0xf53261(0xd8)]=_0x3cee94;}),_0x221321[_0x1bf689(0xa2)]((_0x4a9c74,_0x4634f1)=>{var _0x69a623=_0x1bf689;_0x2ee087[_0x4634f1][_0x69a623(0xc8)]=_0x4a9c74;}),_0x3dc0be['forEach']((_0x5f061b,_0x5ab5c0)=>{var _0x58d414=_0x1bf689;_0x2ee087[_0x5ab5c0][_0x58d414(0xd6)]=_0x5f061b;});var _0x48976e=0x0;_0x2ee087[_0x1bf689(0xa2)](_0x1a3a6e=>{var _0x21cc9c=_0x1bf689;console[_0x21cc9c(0xbf)](_0x21cc9c(0xad),_0x1a3a6e),(parseInt(_0x1a3a6e[_0x21cc9c(0x80)])<parseInt(_0x1a3a6e[_0x21cc9c(0x70)])||parseInt(_0x1a3a6e[_0x21cc9c(0xbc)])<parseInt(_0x1a3a6e[_0x21cc9c(0x70)])&&parseInt(_0x1a3a6e[_0x21cc9c(0x80)])>parseInt(_0x1a3a6e[_0x21cc9c(0x70)])||parseInt(_0x1a3a6e[_0x21cc9c(0x70)])==0x0)&&_0x48976e++;});if(_0x48976e!=0x0)return _0x7b0ba[_0x1bf689(0xd9)](_0x1bf689(0x7b),_0x1bf689(0x85)),_0x270c37['redirect'](_0x1bf689(0x9f));_0x3d46a9[_0x1bf689(0xd2)][_0x1bf689(0xa2)](_0xe6c1c9=>{var _0x16c524=_0x1bf689;const _0x3153c5=_0x1b6ac6[_0x16c524(0x91)][_0x16c524(0xca)](_0x1df62c=>{var _0x1821c1=_0x16c524;_0x1df62c['product_name']==_0xe6c1c9[_0x1821c1(0xa3)]&&_0x1df62c[_0x1821c1(0xd6)]==_0xe6c1c9[_0x1821c1(0xd6)]&&_0x1df62c[_0x1821c1(0xc8)]==_0xe6c1c9[_0x1821c1(0xc8)]&&_0x1df62c[_0x1821c1(0xd8)]==_0xe6c1c9['bin']&&_0x1df62c[_0x1821c1(0xd4)]==_0xe6c1c9[_0x1821c1(0xd4)]&&(_0x1df62c[_0x1821c1(0xb4)]=parseInt(_0x1df62c[_0x1821c1(0xb4)])+parseInt(_0xe6c1c9['return_qty']));});}),console[_0x1bf689(0xbf)](_0x1bf689(0x90),_0x1b6ac6),await _0x1b6ac6[_0x1bf689(0xbd)](),_0x3d46a9[_0x1bf689(0x69)]=_0x364987,_0x3d46a9[_0x1bf689(0x9c)]=_0x112a52,_0x3d46a9[_0x1bf689(0xb2)]=_0x243702,_0x3d46a9[_0x1bf689(0x99)]=_0x791cb0,_0x3d46a9[_0x1bf689(0xd2)]=_0x2ee087,_0x3d46a9['note']=_0x1d525d,_0x3d46a9[_0x1bf689(0x78)]=_0x16e684,_0x3d46a9[_0x1bf689(0xdf)]=_0x305cfc;const _0x34198f=await _0x3d46a9['save']();console['log'](_0x1bf689(0x73),_0x34198f);const _0x3e809c=await c_payment_data[_0x1bf689(0xc0)]({'invoice':_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x69)],'reason':_0x1bf689(0x93)});_0x3e809c[_0x1bf689(0x7e)]=_0x7b0ba[_0x1bf689(0xbe)][_0x1bf689(0x7e)],_0x3e809c['date']=_0x7b0ba[_0x1bf689(0xbe)]['date'],await _0x3e809c[_0x1bf689(0xbd)](),_0x7b0ba['flash'](_0x1bf689(0xa4),_0x1bf689(0x6a)),_0x270c37[_0x1bf689(0xc9)]('/sales_return/view');}catch(_0x59175e){console[_0x1bf689(0xbf)](_0x59175e),_0x270c37[_0x1bf689(0xb8)](0xc8)['json']({'message':_0x59175e[_0x1bf689(0x9a)]});}}),router[a0_0x1d70e9(0xce)]('/give_payment/:id',auth,async(_0x54e7dc,_0x5d5ed3)=>{var _0x52ce07=a0_0x1d70e9;try{const _0x3eb811=_0x54e7dc[_0x52ce07(0x67)]['id'],{invoice:_0xa687e1,customer:_0xe47d8b,payable_to_customer:_0x8fbd78,paid_amount:_0x4d53b9}=_0x54e7dc[_0x52ce07(0xbe)],_0x23b641=await sales_return['findById'](_0x3eb811);console[_0x52ce07(0xbf)](_0x52ce07(0xb1),_0x23b641),console[_0x52ce07(0xbf)](_0x8fbd78),console[_0x52ce07(0xbf)](_0x4d53b9);var _0x1758a=_0x8fbd78-_0x4d53b9;console[_0x52ce07(0xbf)](_0x52ce07(0x9b),_0x1758a),_0x23b641[_0x52ce07(0xc6)]=parseFloat(_0x4d53b9)+parseFloat(_0x23b641[_0x52ce07(0xc6)]),_0x23b641[_0x52ce07(0xc4)]=_0x1758a,console[_0x52ce07(0xbf)](_0x23b641);const _0x2a916e=await _0x23b641[_0x52ce07(0xbd)]();console[_0x52ce07(0xbf)](0x1b207);const _0x5ec59b=await c_payment_data[_0x52ce07(0xc0)]({'invoice':_0x54e7dc[_0x52ce07(0xbe)][_0x52ce07(0x69)],'reason':'Sale\x20Return'});console[_0x52ce07(0xbf)]('c_payment',_0x5ec59b),_0x5ec59b[_0x52ce07(0x74)]=_0x1758a,await _0x5ec59b[_0x52ce07(0xbd)]();let _0x5631a0=new Date(),_0x1af80e=('0'+_0x5631a0['getDate']())[_0x52ce07(0x8a)](-0x2),_0xf03a4b=('0'+(_0x5631a0[_0x52ce07(0x6d)]()+0x1))[_0x52ce07(0x8a)](-0x2),_0xa57b8b=_0x5631a0[_0x52ce07(0x68)](),_0x4334eb=_0xa57b8b+'-'+_0xf03a4b+'-'+_0x1af80e;const _0x32e080=new customer_payment({'invoice':_0xa687e1,'date':_0xa57b8b+'-'+_0xf03a4b+'-'+_0x1af80e,'customer':_0xe47d8b,'reason':_0x52ce07(0x98),'amount':_0x4d53b9}),_0x3a0f4a=await _0x32e080['save']();_0x54e7dc[_0x52ce07(0xd9)](_0x52ce07(0xa4),_0x52ce07(0xa5)),_0x5d5ed3[_0x52ce07(0xc9)](_0x52ce07(0xa0));}catch(_0x5b5e7b){console[_0x52ce07(0xbf)](_0x5b5e7b);}}),router[a0_0x1d70e9(0x6b)](a0_0x1d70e9(0xd3),auth,async(_0xee152,_0x19f36d)=>{var _0x1d739f=a0_0x1d70e9;try{const {username:_0x4f5c3d,email:_0x13a065,role:_0x2d6004}=_0xee152[_0x1d739f(0xe0)],_0x1213b9=_0xee152[_0x1d739f(0xe0)],_0x193fdd=await profile[_0x1d739f(0xc0)]({'email':_0x1213b9['email']}),_0x55bc2d=await master_shop[_0x1d739f(0xa6)]();console[_0x1d739f(0xbf)](_0x1d739f(0x8d),_0x55bc2d);const _0x4ad295=_0xee152[_0x1d739f(0x67)]['id'],_0x3986ca=await sales_return['findById'](_0x4ad295);console['log'](_0x3986ca);const _0x2d5f15=await customer[_0x1d739f(0xc0)]({'name':_0x3986ca[_0x1d739f(0x9c)]});console['log'](_0x2d5f15);if(_0x55bc2d[0x0][_0x1d739f(0xc2)]==_0x1d739f(0x94)){var _0xfd8ad8=users[_0x1d739f(0xb9)];console[_0x1d739f(0xbf)](_0xfd8ad8);}else{if(_0x55bc2d[0x0][_0x1d739f(0xc2)]==_0x1d739f(0x97))var _0xfd8ad8=users[_0x1d739f(0x97)];else{if(_0x55bc2d[0x0]['language']==_0x1d739f(0xde))var _0xfd8ad8=users[_0x1d739f(0xde)];else{if(_0x55bc2d[0x0][_0x1d739f(0xc2)]==_0x1d739f(0xcf))var _0xfd8ad8=users['Spanish'];else{if(_0x55bc2d[0x0][_0x1d739f(0xc2)]==_0x1d739f(0x96))var _0xfd8ad8=users[_0x1d739f(0x96)];else{if(_0x55bc2d[0x0][_0x1d739f(0xc2)]==_0x1d739f(0xe1))var _0xfd8ad8=users[_0x1d739f(0x6e)];else{if(_0x55bc2d[0x0][_0x1d739f(0xc2)]==_0x1d739f(0xab))var _0xfd8ad8=users['Chinese'];else{if(_0x55bc2d[0x0][_0x1d739f(0xc2)]=='Arabic\x20(ae)')var _0xfd8ad8=users[_0x1d739f(0x77)];}}}}}}}_0x19f36d[_0x1d739f(0xd5)]('sales_return_invoice',{'success':_0xee152[_0x1d739f(0xd9)](_0x1d739f(0xa4)),'errors':_0xee152['flash'](_0x1d739f(0x7b)),'role':_0x1213b9,'profile':_0x193fdd,'master_shop':_0x55bc2d,'customers':_0x2d5f15,'sales':_0x3986ca,'language':_0xfd8ad8});}catch(_0xc0b9c){console['log'](_0xc0b9c);}}),module['exports']=router;