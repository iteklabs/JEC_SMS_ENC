var a0_0x1bb9c2=a0_0x3c47;(function(_0x4a1b4a,_0x398d42){var _0x432292=a0_0x3c47,_0x1338c7=_0x4a1b4a();while(!![]){try{var _0x3eafba=parseInt(_0x432292(0x154))/0x1*(parseInt(_0x432292(0xe1))/0x2)+parseInt(_0x432292(0x12a))/0x3+-parseInt(_0x432292(0xf0))/0x4+-parseInt(_0x432292(0xf3))/0x5+parseInt(_0x432292(0xf2))/0x6*(parseInt(_0x432292(0x13b))/0x7)+parseInt(_0x432292(0x107))/0x8+parseInt(_0x432292(0x138))/0x9;if(_0x3eafba===_0x398d42)break;else _0x1338c7['push'](_0x1338c7['shift']());}catch(_0x244541){_0x1338c7['push'](_0x1338c7['shift']());}}}(a0_0x16c2,0xe28f3));const express=require('express'),app=express(),router=express[a0_0x1bb9c2(0xdf)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x1bb9c2(0x14d)),auth=require(a0_0x1bb9c2(0x104)),users=require(a0_0x1bb9c2(0x124));function a0_0x3c47(_0x60404c,_0x12f515){var _0x16c212=a0_0x16c2();return a0_0x3c47=function(_0x3c478a,_0x319f98){_0x3c478a=_0x3c478a-0xda;var _0x11b109=_0x16c212[_0x3c478a];return _0x11b109;},a0_0x3c47(_0x60404c,_0x12f515);}function a0_0x16c2(){var _0x25811c=['168lMaFXJ','stocks_QA','params','secondary_code_QA','paid_amount','master','ToWarehouse','return_qty_QA','/sales_return/view','$product_details._id','Arabic\x20(ae)','QA\x20Warehouse','for_categorize','new\x20new_data','$product_details.storage','6453896BdOAfb','sales_quantity','1827510GesFvj','6893815YuXmzr','product_code','$product_details.product_name','$name','render','customer_docs','Portuguese\x20(BR)','Arabic','$product_details.secondary_code','$product_details.bin','getDate','old_warehouse_data','Sale\x20Return','customer','$customer_docs','German','$product_details.type','../middleware/auth','redirect','primary_code','5612096KHxswz','string','stocks','amount','/sales_return_finished/view','bin','user','Enabled','Hindi','find','product_code_QA','body','customers','errors','$product_details.product_stock','map','type','findOne','$product_details.primary_code','language','/view/:id','save','subtract','date','sales_return_invoice','$product_details.floorlevel','aggregate','ToRoom','bay','../public/language/languages.json','/invoice/:id','Finished\x20Goods','email','data','stock','3108225PrGgoY','flash','get','$product_details','Chinese','sale_qty','back','invoice','exports','message','sales_return_finished','name','Spanish','log','12025503XaxgAF','secondary_code','$product_details.rack','14iasfmC','floorlevel','suppliers','json','product_stock','findById','Return\x20Rooms','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','product_name','English','types','success','return_sale_QA','post','product_details','status','English\x20(US)','product_name_QA','../models/all_models','warehouse_name','Portuguese','$product_details.bay','/view','purchase\x20return\x20successfully','c_payment','2825vnBoIF','note','return_qty','forEach','return_sale','French','slice','Router','primary_code_QA'];a0_0x16c2=function(){return _0x25811c;};return a0_0x16c2();}router[a0_0x1bb9c2(0x12c)](a0_0x1bb9c2(0x151),auth,async(_0x4d6e61,_0x207e96)=>{var _0x235b36=a0_0x1bb9c2;try{const {username:_0x33c986,email:_0x14cccd,role:_0x520e03}=_0x4d6e61['user'],_0x317e89=_0x4d6e61['user'],_0x517abc=await profile[_0x235b36(0x118)]({'email':_0x317e89[_0x235b36(0x127)]}),_0xca3c61=await master_shop[_0x235b36(0x110)](),_0x4244fe=await sales_return_finished[_0x235b36(0x121)]([{'$lookup':{'from':_0x235b36(0x113),'localField':_0x235b36(0x100),'foreignField':_0x235b36(0x135),'as':_0x235b36(0xf8)}},{'$unwind':_0x235b36(0x101)}]);if(_0xca3c61[0x0]['language']==_0x235b36(0x14b)){var _0x39e064=users[_0x235b36(0x144)];console[_0x235b36(0x137)](_0x39e064);}else{if(_0xca3c61[0x0][_0x235b36(0x11a)]=='Hindi')var _0x39e064=users[_0x235b36(0x10f)];else{if(_0xca3c61[0x0][_0x235b36(0x11a)]=='German')var _0x39e064=users[_0x235b36(0x102)];else{if(_0xca3c61[0x0]['language']==_0x235b36(0x136))var _0x39e064=users[_0x235b36(0x136)];else{if(_0xca3c61[0x0][_0x235b36(0x11a)]==_0x235b36(0xdd))var _0x39e064=users[_0x235b36(0xdd)];else{if(_0xca3c61[0x0][_0x235b36(0x11a)]==_0x235b36(0xf9))var _0x39e064=users[_0x235b36(0x14f)];else{if(_0xca3c61[0x0]['language']==_0x235b36(0x12e))var _0x39e064=users['Chinese'];else{if(_0xca3c61[0x0][_0x235b36(0x11a)]==_0x235b36(0xeb))var _0x39e064=users['Arabic'];}}}}}}}_0x207e96[_0x235b36(0xf7)](_0x235b36(0x134),{'success':_0x4d6e61[_0x235b36(0x12b)]('success'),'errors':_0x4d6e61[_0x235b36(0x12b)]('errors'),'role':_0x317e89,'profile':_0x517abc,'master_shop':_0xca3c61,'user':_0x4244fe,'language':_0x39e064});}catch(_0x22f17c){console[_0x235b36(0x137)](_0x22f17c);}}),router[a0_0x1bb9c2(0x12c)]('/view/:id',auth,async(_0x5c045c,_0x30d7b6)=>{var _0x5cecb1=a0_0x1bb9c2;try{const {username:_0x4deb0f,email:_0x39b54f,role:_0x3a9ad7}=_0x5c045c[_0x5cecb1(0x10d)],_0x87d655=_0x5c045c[_0x5cecb1(0x10d)],_0x35ef06=await profile['findOne']({'email':_0x87d655[_0x5cecb1(0x127)]}),_0x13b1a0=await master_shop['find']();console['log'](_0x5cecb1(0xe6),_0x13b1a0);const _0x1ddc97=_0x5c045c[_0x5cecb1(0xe3)]['id'];console[_0x5cecb1(0x137)](_0x1ddc97);var _0x2523fa=[_0x5cecb1(0x141)];const _0x38fd81=await sales_return_finished[_0x5cecb1(0x140)](_0x1ddc97),_0x279014=await warehouse[_0x5cecb1(0x121)]([{'$match':{'name':_0x38fd81['ToWarehouse'],'room':_0x38fd81['ToRoom']}},{'$unwind':_0x5cecb1(0x12d)},{'$group':{'_id':_0x5cecb1(0xea),'name':{'$first':_0x5cecb1(0xf5)},'product_stock':{'$first':_0x5cecb1(0x115)},'bay':{'$first':_0x5cecb1(0x150)},'bin':{'$first':_0x5cecb1(0xfc)},'type':{'$first':_0x5cecb1(0x103)},'floorlevel':{'$first':_0x5cecb1(0x120)},'primary_code':{'$first':_0x5cecb1(0x119)},'secondary_code':{'$first':_0x5cecb1(0xfb)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x5cecb1(0xef)},'rack':{'$first':_0x5cecb1(0x13a)}}}]);console['log'](_0x279014);const _0x413edc=await warehouse[_0x5cecb1(0x121)]([{'$match':{'status':_0x5cecb1(0x10e),'warehouse_category':_0x5cecb1(0x126)}},{'$group':{'_id':_0x5cecb1(0xf6),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x206e9=await warehouse[_0x5cecb1(0x121)]([{'$match':{'status':_0x5cecb1(0x10e),'name':_0x5cecb1(0xec)}},{'$group':{'_id':'$name','name':{'$first':_0x5cecb1(0xf6)}}},{'$sort':{'name':0x1}}]),_0x571a76=await product[_0x5cecb1(0x110)]({});if(_0x13b1a0[0x0]['language']==_0x5cecb1(0x14b)){var _0x2c5936=users[_0x5cecb1(0x144)];console['log'](_0x2c5936);}else{if(_0x13b1a0[0x0][_0x5cecb1(0x11a)]=='Hindi')var _0x2c5936=users[_0x5cecb1(0x10f)];else{if(_0x13b1a0[0x0]['language']==_0x5cecb1(0x102))var _0x2c5936=users[_0x5cecb1(0x102)];else{if(_0x13b1a0[0x0][_0x5cecb1(0x11a)]==_0x5cecb1(0x136))var _0x2c5936=users[_0x5cecb1(0x136)];else{if(_0x13b1a0[0x0][_0x5cecb1(0x11a)]==_0x5cecb1(0xdd))var _0x2c5936=users[_0x5cecb1(0xdd)];else{if(_0x13b1a0[0x0][_0x5cecb1(0x11a)]==_0x5cecb1(0xf9))var _0x2c5936=users[_0x5cecb1(0x14f)];else{if(_0x13b1a0[0x0][_0x5cecb1(0x11a)]=='Chinese')var _0x2c5936=users['Chinese'];else{if(_0x13b1a0[0x0][_0x5cecb1(0x11a)]==_0x5cecb1(0xeb))var _0x2c5936=users[_0x5cecb1(0xfa)];}}}}}}}_0x30d7b6[_0x5cecb1(0xf7)]('return_sale_edit_finished',{'success':_0x5c045c[_0x5cecb1(0x12b)]('success'),'errors':_0x5c045c[_0x5cecb1(0x12b)](_0x5cecb1(0x114)),'role':_0x87d655,'profile':_0x35ef06,'master_shop':_0x13b1a0,'user':_0x38fd81,'stock':_0x279014,'unit':_0x571a76,'language':_0x2c5936,'warehouses':_0x413edc,'rooms':_0x2523fa,'warehouse_QA':_0x206e9});}catch(_0x14a759){console[_0x5cecb1(0x137)](_0x14a759);}}),router[a0_0x1bb9c2(0x148)](a0_0x1bb9c2(0x11b),auth,async(_0x585864,_0x4c07d3)=>{var _0x85c04e=a0_0x1bb9c2;if(_0x585864[_0x85c04e(0x112)][_0x85c04e(0xed)]=='QA')try{const _0x2d402c=_0x585864[_0x85c04e(0xe3)]['id'],_0x3bde87=await sales_return[_0x85c04e(0x118)]({'invoice':_0x585864[_0x85c04e(0x112)][_0x85c04e(0x131)]}),_0x24ec80=await warehouse[_0x85c04e(0x118)]({'name':_0x3bde87[_0x85c04e(0xe7)],'room':_0x3bde87[_0x85c04e(0x122)]}),{invoice:_0x11257d,customer:_0x243a8d,date:_0x576114,warehouse_name:_0x3f24bb,product_name:_0x45e059,primary_code:_0x410e38,secondary_code:_0x4d97ac,product_code:_0x4ab2be,sales_quantity:_0x4f4eaf,stocks:_0x3dcb9d,return_qty:_0x50364d,note:_0x3771b3,to_warehouse_name_QA:_0x11bb61,to_Room_name_QA:_0xa48fca}=_0x585864[_0x85c04e(0x112)];if(typeof product_name_QA=='string')var _0x13473d=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0x14c)]],_0x65c189=[_0x585864['body'][_0x85c04e(0xe0)]],_0x200ddd=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0xe4)]],_0x453385=[_0x585864['body'][_0x85c04e(0x111)]],_0x4e4499=[_0x585864[_0x85c04e(0x112)]['sales_quantity_QA']],_0x1760aa=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0xe2)]],_0x31bfd4=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0xe8)]];else var _0x13473d=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0x14c)]],_0x65c189=[..._0x585864[_0x85c04e(0x112)]['primary_code_QA']],_0x200ddd=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0xe4)]],_0x453385=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0x111)]],_0x4e4499=[..._0x585864['body']['sales_quantity_QA']],_0x1760aa=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0xe2)]],_0x31bfd4=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0xe8)]];const _0x25149f=_0x13473d[_0x85c04e(0x116)](_0x586511=>{return _0x586511={'product_name':_0x586511};});_0x65c189[_0x85c04e(0xdb)]((_0x11a50b,_0x581fd3)=>{var _0x3859eb=_0x85c04e;_0x25149f[_0x581fd3][_0x3859eb(0x106)]=_0x11a50b;}),_0x200ddd[_0x85c04e(0xdb)]((_0x43ffe2,_0x490698)=>{_0x25149f[_0x490698]['secondary_code']=_0x43ffe2;}),_0x453385[_0x85c04e(0xdb)]((_0x2e6aef,_0x53919a)=>{var _0xdae2a2=_0x85c04e;_0x25149f[_0x53919a][_0xdae2a2(0xf4)]=_0x2e6aef;}),_0x4e4499[_0x85c04e(0xdb)]((_0x3f23b3,_0x3d9cdf)=>{var _0x344eeb=_0x85c04e;_0x25149f[_0x3d9cdf][_0x344eeb(0x12f)]=_0x3f23b3;}),_0x1760aa[_0x85c04e(0xdb)]((_0x4e15f4,_0x52a803)=>{var _0x190f6f=_0x85c04e;_0x25149f[_0x52a803][_0x190f6f(0x129)]=_0x4e15f4;}),_0x31bfd4[_0x85c04e(0xdb)]((_0x564bf8,_0x14b0f0)=>{_0x25149f[_0x14b0f0]['return_qty']=_0x564bf8;}),_0x3bde87[_0x85c04e(0x147)][_0x85c04e(0xdb)](_0x525145=>{const _0x3aece7=_0x24ec80['product_details']['map'](_0x3741a0=>{var _0x11f879=a0_0x3c47;_0x3741a0[_0x11f879(0x143)]==_0x525145[_0x11f879(0x143)]&&(_0x3741a0['product_stock']=parseInt(_0x3741a0[_0x11f879(0x13f)])+parseInt(_0x525145[_0x11f879(0xda)]));});}),await _0x24ec80[_0x85c04e(0x11c)](),_0x3bde87[_0x85c04e(0x131)]=_0x11257d,_0x3bde87[_0x85c04e(0x100)]=_0x243a8d,_0x3bde87[_0x85c04e(0x11e)]=_0x576114,_0x3bde87[_0x85c04e(0x14e)]=_0x3f24bb,_0x3bde87[_0x85c04e(0x147)]=_0x25149f,_0x3bde87[_0x85c04e(0x155)]=_0x3771b3,_0x3bde87[_0x85c04e(0xe7)]=_0x11bb61,_0x3bde87['ToRoom']=_0xa48fca;const _0x1e9a98=await _0x3bde87[_0x85c04e(0x11c)](),_0x378ecc=await c_payment_data[_0x85c04e(0x118)]({'invoice':_0x585864['body'][_0x85c04e(0x131)],'reason':_0x85c04e(0xff)});_0x378ecc['suppliers']=_0x585864[_0x85c04e(0x112)][_0x85c04e(0x13d)],_0x378ecc[_0x85c04e(0x11e)]=_0x585864[_0x85c04e(0x112)]['date'],await _0x378ecc[_0x85c04e(0x11c)](),_0x585864[_0x85c04e(0x12b)]('success',_0x85c04e(0x152)),_0x4c07d3['redirect'](_0x85c04e(0x10b));}catch(_0x310147){console['log'](_0x310147),_0x4c07d3[_0x85c04e(0x14a)](0xc8)[_0x85c04e(0x13e)]({'message':_0x310147[_0x85c04e(0x133)]});}else try{const _0x4e6921=_0x585864[_0x85c04e(0xe3)]['id'];console[_0x85c04e(0x137)](_0x4e6921);const _0x4d22a0=await sales_return[_0x85c04e(0x118)]({'invoice':_0x585864[_0x85c04e(0x112)][_0x85c04e(0x131)]});console[_0x85c04e(0x137)]('old_data',_0x4d22a0);const _0x28edc9=await warehouse[_0x85c04e(0x118)]({'name':_0x4d22a0['ToWarehouse'],'room':_0x4d22a0['ToRoom']});console['log'](_0x85c04e(0xfe),_0x28edc9);const {invoice:_0x34bd86,customer:_0x3956e7,date:_0x59e4be,warehouse_name:_0x70010,product_name:_0x36f3f2,primary_code:_0x3f1afd,secondary_code:_0x34441c,product_code:_0x42f071,sales_quantity:_0x180509,stocks:_0x2a2637,return_qty:_0x4c64cc,note:_0x53df44,to_warehouse_name:_0x1af20a,to_Room_name:_0x55b038}=_0x585864[_0x85c04e(0x112)];console['log'](_0x585864['body']);if(typeof _0x36f3f2==_0x85c04e(0x108))var _0x13473d=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0x143)]],_0x65c189=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0x106)]],_0x200ddd=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0x139)]],_0x453385=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0xf4)]],_0x4e4499=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0xf1)]],_0x1760aa=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0x109)]],_0x31bfd4=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0xda)]],_0xc7b091=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0x123)]],_0xa173ab=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0x10c)]],_0x480050=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0x145)]],_0x10971f=[_0x585864[_0x85c04e(0x112)][_0x85c04e(0x13c)]];else var _0x13473d=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0x143)]],_0x65c189=[..._0x585864['body'][_0x85c04e(0x106)]],_0x200ddd=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0x139)]],_0x453385=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0xf4)]],_0x4e4499=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0xf1)]],_0x1760aa=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0x109)]],_0x31bfd4=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0xda)]],_0xc7b091=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0x123)]],_0xa173ab=[..._0x585864[_0x85c04e(0x112)][_0x85c04e(0x10c)]],_0x480050=[..._0x585864['body'][_0x85c04e(0x145)]],_0x10971f=[..._0x585864[_0x85c04e(0x112)]['floorlevel']];const _0x515be8=_0x13473d[_0x85c04e(0x116)](_0x2a658f=>{return _0x2a658f={'product_name':_0x2a658f};});_0x65c189['forEach']((_0x14f985,_0x30d6cc)=>{var _0x45ffd5=_0x85c04e;_0x515be8[_0x30d6cc][_0x45ffd5(0x106)]=_0x14f985;}),_0x200ddd[_0x85c04e(0xdb)]((_0x314cf1,_0x53d70e)=>{_0x515be8[_0x53d70e]['secondary_code']=_0x314cf1;}),_0x453385[_0x85c04e(0xdb)]((_0x384fbe,_0x257ca8)=>{var _0x4f8f5c=_0x85c04e;_0x515be8[_0x257ca8][_0x4f8f5c(0xf4)]=_0x384fbe;}),_0x4e4499[_0x85c04e(0xdb)]((_0x52098f,_0x5e0344)=>{_0x515be8[_0x5e0344]['sale_qty']=_0x52098f;}),_0x1760aa[_0x85c04e(0xdb)]((_0x10c300,_0x117036)=>{var _0x545e22=_0x85c04e;_0x515be8[_0x117036][_0x545e22(0x129)]=_0x10c300;}),_0x31bfd4[_0x85c04e(0xdb)]((_0x1de6cd,_0x1fe5ca)=>{var _0x5e59ca=_0x85c04e;_0x515be8[_0x1fe5ca][_0x5e59ca(0xda)]=_0x1de6cd;}),_0xc7b091[_0x85c04e(0xdb)]((_0x24844b,_0xc26ac0)=>{_0x515be8[_0xc26ac0]['bay']=_0x24844b;}),_0xa173ab[_0x85c04e(0xdb)]((_0x52d7ab,_0x19e6de)=>{_0x515be8[_0x19e6de]['bin']=_0x52d7ab;}),_0x480050[_0x85c04e(0xdb)]((_0x16ea05,_0x184af8)=>{var _0x4599b1=_0x85c04e;_0x515be8[_0x184af8][_0x4599b1(0x117)]=_0x16ea05;}),_0x10971f[_0x85c04e(0xdb)]((_0x2b1a5f,_0x42a699)=>{var _0x3915e3=_0x85c04e;_0x515be8[_0x42a699][_0x3915e3(0x13c)]=_0x2b1a5f;});var _0x2c5f82=0x0;_0x515be8[_0x85c04e(0xdb)](_0x2de6a0=>{var _0x233bf7=_0x85c04e;console[_0x233bf7(0x137)]('foreach\x20newproduct',_0x2de6a0),(parseInt(_0x2de6a0[_0x233bf7(0x12f)])<parseInt(_0x2de6a0['return_qty'])||parseInt(_0x2de6a0[_0x233bf7(0x129)])<parseInt(_0x2de6a0[_0x233bf7(0xda)])&&parseInt(_0x2de6a0[_0x233bf7(0x12f)])>parseInt(_0x2de6a0[_0x233bf7(0xda)])||parseInt(_0x2de6a0[_0x233bf7(0xda)])==0x0)&&_0x2c5f82++;});if(_0x2c5f82!=0x0)return _0x585864[_0x85c04e(0x12b)](_0x85c04e(0x114),_0x85c04e(0x142)),_0x4c07d3[_0x85c04e(0x105)](_0x85c04e(0x130));_0x4d22a0[_0x85c04e(0xdc)][_0x85c04e(0xdb)](_0x2eec25=>{var _0x2810de=_0x85c04e;const _0x5ce551=_0x28edc9[_0x2810de(0x149)][_0x2810de(0x116)](_0x5e7125=>{var _0xf50295=_0x2810de;_0x5e7125[_0xf50295(0x143)]==_0x2eec25[_0xf50295(0x143)]&&_0x5e7125[_0xf50295(0x13c)]==_0x2eec25[_0xf50295(0x13c)]&&_0x5e7125['type']==_0x2eec25[_0xf50295(0x117)]&&_0x5e7125[_0xf50295(0x10c)]==_0x2eec25[_0xf50295(0x10c)]&&_0x5e7125['bay']==_0x2eec25['bay']&&(_0x5e7125[_0xf50295(0x13f)]=parseInt(_0x5e7125[_0xf50295(0x13f)])+parseInt(_0x2eec25[_0xf50295(0xda)]));});}),console[_0x85c04e(0x137)](_0x85c04e(0xfe),_0x28edc9),await _0x28edc9[_0x85c04e(0x11c)](),_0x4d22a0[_0x85c04e(0x131)]=_0x34bd86,_0x4d22a0[_0x85c04e(0x100)]=_0x3956e7,_0x4d22a0['date']=_0x59e4be,_0x4d22a0[_0x85c04e(0x14e)]=_0x70010,_0x4d22a0[_0x85c04e(0xdc)]=_0x515be8,_0x4d22a0[_0x85c04e(0x155)]=_0x53df44,_0x4d22a0['ToWarehouse']=_0x1af20a,_0x4d22a0[_0x85c04e(0x122)]=_0x55b038;const _0x27d2ba=await _0x4d22a0[_0x85c04e(0x11c)]();console[_0x85c04e(0x137)](_0x85c04e(0xee),_0x27d2ba);const _0x596d0a=await c_payment_data[_0x85c04e(0x118)]({'invoice':_0x585864[_0x85c04e(0x112)][_0x85c04e(0x131)],'reason':'Sale\x20Return'});_0x596d0a['suppliers']=_0x585864[_0x85c04e(0x112)]['suppliers'],_0x596d0a[_0x85c04e(0x11e)]=_0x585864[_0x85c04e(0x112)]['date'],await _0x596d0a[_0x85c04e(0x11c)](),_0x585864[_0x85c04e(0x12b)](_0x85c04e(0x146),'purchase\x20return\x20successfully'),_0x4c07d3[_0x85c04e(0x105)](_0x85c04e(0xe9));}catch(_0x4b9e47){console[_0x85c04e(0x137)](_0x4b9e47),_0x4c07d3[_0x85c04e(0x14a)](0xc8)[_0x85c04e(0x13e)]({'message':_0x4b9e47['message']});}}),router[a0_0x1bb9c2(0x148)]('/give_payment/:id',auth,async(_0x24b55a,_0x5bf2a4)=>{var _0xb3c302=a0_0x1bb9c2;try{const _0xe74cd8=_0x24b55a['params']['id'],{invoice:_0x4e6282,customer:_0x519103,payable_to_customer:_0x24fd86,paid_amount:_0x37551a}=_0x24b55a[_0xb3c302(0x112)],_0x16b5e2=await sales_return[_0xb3c302(0x140)](_0xe74cd8);console['log'](_0xb3c302(0x128),_0x16b5e2),console[_0xb3c302(0x137)](_0x24fd86),console[_0xb3c302(0x137)](_0x37551a);var _0x5a1118=_0x24fd86-_0x37551a;console[_0xb3c302(0x137)](_0xb3c302(0x11d),_0x5a1118),_0x16b5e2[_0xb3c302(0xe5)]=parseFloat(_0x37551a)+parseFloat(_0x16b5e2[_0xb3c302(0xe5)]),_0x16b5e2['due_amount']=_0x5a1118,console[_0xb3c302(0x137)](_0x16b5e2);const _0x178ab7=await _0x16b5e2[_0xb3c302(0x11c)]();console[_0xb3c302(0x137)](0x1b207);const _0x1642f4=await c_payment_data['findOne']({'invoice':_0x24b55a[_0xb3c302(0x112)][_0xb3c302(0x131)],'reason':_0xb3c302(0xff)});console[_0xb3c302(0x137)](_0xb3c302(0x153),_0x1642f4),_0x1642f4[_0xb3c302(0x10a)]=_0x5a1118,await _0x1642f4[_0xb3c302(0x11c)]();let _0x56b348=new Date(),_0x20964b=('0'+_0x56b348[_0xb3c302(0xfd)]())[_0xb3c302(0xde)](-0x2),_0x123c17=('0'+(_0x56b348['getMonth']()+0x1))[_0xb3c302(0xde)](-0x2),_0x30d8d0=_0x56b348['getFullYear'](),_0x3d7255=_0x30d8d0+'-'+_0x123c17+'-'+_0x20964b;const _0x47d76c=new customer_payment({'invoice':_0x4e6282,'date':_0x30d8d0+'-'+_0x123c17+'-'+_0x20964b,'customer':_0x519103,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x37551a}),_0x255c16=await _0x47d76c[_0xb3c302(0x11c)]();_0x24b55a['flash'](_0xb3c302(0x146),'payment\x20successfull'),_0x5bf2a4[_0xb3c302(0x105)](_0xb3c302(0xe9));}catch(_0x36a7f9){console[_0xb3c302(0x137)](_0x36a7f9);}}),router[a0_0x1bb9c2(0x12c)](a0_0x1bb9c2(0x125),auth,async(_0x273f25,_0x6bccd1)=>{var _0x3c6c1e=a0_0x1bb9c2;try{const {username:_0x1758f3,email:_0xa45d67,role:_0x494589}=_0x273f25['user'],_0x29ab34=_0x273f25[_0x3c6c1e(0x10d)],_0x1a9f61=await profile[_0x3c6c1e(0x118)]({'email':_0x29ab34[_0x3c6c1e(0x127)]}),_0x3f93cb=await master_shop[_0x3c6c1e(0x110)]();console[_0x3c6c1e(0x137)](_0x3c6c1e(0xe6),_0x3f93cb);const _0x439ada=_0x273f25[_0x3c6c1e(0xe3)]['id'],_0x3f2502=await sales_return[_0x3c6c1e(0x140)](_0x439ada);console[_0x3c6c1e(0x137)](_0x3f2502);const _0x1dea5a=await customer['findOne']({'name':_0x3f2502['customer']});console['log'](_0x1dea5a);if(_0x3f93cb[0x0][_0x3c6c1e(0x11a)]==_0x3c6c1e(0x14b)){var _0x1c40a5=users[_0x3c6c1e(0x144)];console[_0x3c6c1e(0x137)](_0x1c40a5);}else{if(_0x3f93cb[0x0]['language']==_0x3c6c1e(0x10f))var _0x1c40a5=users['Hindi'];else{if(_0x3f93cb[0x0]['language']==_0x3c6c1e(0x102))var _0x1c40a5=users['German'];else{if(_0x3f93cb[0x0][_0x3c6c1e(0x11a)]==_0x3c6c1e(0x136))var _0x1c40a5=users[_0x3c6c1e(0x136)];else{if(_0x3f93cb[0x0][_0x3c6c1e(0x11a)]==_0x3c6c1e(0xdd))var _0x1c40a5=users[_0x3c6c1e(0xdd)];else{if(_0x3f93cb[0x0]['language']==_0x3c6c1e(0xf9))var _0x1c40a5=users[_0x3c6c1e(0x14f)];else{if(_0x3f93cb[0x0]['language']=='Chinese')var _0x1c40a5=users[_0x3c6c1e(0x12e)];else{if(_0x3f93cb[0x0][_0x3c6c1e(0x11a)]=='Arabic\x20(ae)')var _0x1c40a5=users[_0x3c6c1e(0xfa)];}}}}}}}_0x6bccd1['render'](_0x3c6c1e(0x11f),{'success':_0x273f25[_0x3c6c1e(0x12b)](_0x3c6c1e(0x146)),'errors':_0x273f25[_0x3c6c1e(0x12b)](_0x3c6c1e(0x114)),'role':_0x29ab34,'profile':_0x1a9f61,'master_shop':_0x3f93cb,'customers':_0x1dea5a,'sales':_0x3f2502,'language':_0x1c40a5});}catch(_0x5b2b79){console['log'](_0x5b2b79);}}),module[a0_0x1bb9c2(0x132)]=router;