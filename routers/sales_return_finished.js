var a0_0x3c49a8=a0_0x2883;(function(_0x5d938a,_0x4f0c6c){var _0x48a92a=a0_0x2883,_0x2dbcc5=_0x5d938a();while(!![]){try{var _0x2e760b=parseInt(_0x48a92a(0x12a))/0x1*(-parseInt(_0x48a92a(0x128))/0x2)+-parseInt(_0x48a92a(0x10c))/0x3*(parseInt(_0x48a92a(0x103))/0x4)+parseInt(_0x48a92a(0xcd))/0x5+parseInt(_0x48a92a(0xe5))/0x6*(-parseInt(_0x48a92a(0x117))/0x7)+-parseInt(_0x48a92a(0x134))/0x8*(-parseInt(_0x48a92a(0xd1))/0x9)+parseInt(_0x48a92a(0x123))/0xa+-parseInt(_0x48a92a(0xe4))/0xb;if(_0x2e760b===_0x4f0c6c)break;else _0x2dbcc5['push'](_0x2dbcc5['shift']());}catch(_0xf9d31a){_0x2dbcc5['push'](_0x2dbcc5['shift']());}}}(a0_0x168d,0xa2c56));const express=require(a0_0x3c49a8(0x121)),app=express(),router=express[a0_0x3c49a8(0xca)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x3c49a8(0x105)),auth=require('../middleware/auth'),users=require(a0_0x3c49a8(0x106));function a0_0x2883(_0x500ef5,_0x307262){var _0x168d72=a0_0x168d();return a0_0x2883=function(_0x2883d7,_0x5c74e3){_0x2883d7=_0x2883d7-0xb8;var _0x100946=_0x168d72[_0x2883d7];return _0x100946;},a0_0x2883(_0x500ef5,_0x307262);}router[a0_0x3c49a8(0xce)](a0_0x3c49a8(0xc0),auth,async(_0x126ff1,_0x3668df)=>{var _0x274bac=a0_0x3c49a8;try{const {username:_0x3fe752,email:_0x205d2c,role:_0x513437}=_0x126ff1[_0x274bac(0xec)],_0x14206e=_0x126ff1[_0x274bac(0xec)],_0x2d8c94=await profile[_0x274bac(0xc9)]({'email':_0x14206e[_0x274bac(0xe7)]}),_0x20844d=await master_shop[_0x274bac(0xf3)](),_0x40bc80=await sales_return_finished['aggregate']([{'$lookup':{'from':'customers','localField':'customer','foreignField':'name','as':'customer_docs'}},{'$unwind':_0x274bac(0x114)}]);if(_0x20844d[0x0][_0x274bac(0x12b)]==_0x274bac(0xf0)){var _0xc7341e=users[_0x274bac(0x131)];console[_0x274bac(0xe8)](_0xc7341e);}else{if(_0x20844d[0x0][_0x274bac(0x12b)]==_0x274bac(0xb8))var _0xc7341e=users[_0x274bac(0xb8)];else{if(_0x20844d[0x0][_0x274bac(0x12b)]==_0x274bac(0xbb))var _0xc7341e=users['German'];else{if(_0x20844d[0x0]['language']==_0x274bac(0xde))var _0xc7341e=users['Spanish'];else{if(_0x20844d[0x0][_0x274bac(0x12b)]=='French')var _0xc7341e=users['French'];else{if(_0x20844d[0x0][_0x274bac(0x12b)]=='Portuguese\x20(BR)')var _0xc7341e=users[_0x274bac(0xea)];else{if(_0x20844d[0x0][_0x274bac(0x12b)]==_0x274bac(0xee))var _0xc7341e=users[_0x274bac(0xee)];else{if(_0x20844d[0x0]['language']==_0x274bac(0x129))var _0xc7341e=users[_0x274bac(0xe9)];}}}}}}}_0x3668df['render'](_0x274bac(0x110),{'success':_0x126ff1[_0x274bac(0xf5)]('success'),'errors':_0x126ff1[_0x274bac(0xf5)](_0x274bac(0x11d)),'role':_0x14206e,'profile':_0x2d8c94,'master_shop':_0x20844d,'user':_0x40bc80,'language':_0xc7341e});}catch(_0x49aa71){console[_0x274bac(0xe8)](_0x49aa71);}}),router[a0_0x3c49a8(0xce)](a0_0x3c49a8(0xcc),auth,async(_0x5587ef,_0x32dee8)=>{var _0x4c2372=a0_0x3c49a8;try{const {username:_0x40e967,email:_0x53b5b4,role:_0x44426e}=_0x5587ef['user'],_0x3797ba=_0x5587ef['user'],_0x3a7b9c=await profile[_0x4c2372(0xc9)]({'email':_0x3797ba[_0x4c2372(0xe7)]}),_0x1aa139=await master_shop[_0x4c2372(0xf3)]();console[_0x4c2372(0xe8)](_0x4c2372(0x11a),_0x1aa139);const _0x486c5a=_0x5587ef[_0x4c2372(0xff)]['id'];console[_0x4c2372(0xe8)](_0x486c5a);var _0x3ca04e=[_0x4c2372(0x104)];const _0x684a31=await sales_return_finished[_0x4c2372(0xc4)](_0x486c5a),_0x266d12=await warehouse[_0x4c2372(0xc5)]([{'$match':{'name':_0x684a31[_0x4c2372(0x101)],'room':_0x684a31['ToRoom']}},{'$unwind':_0x4c2372(0xed)},{'$group':{'_id':_0x4c2372(0x10b),'name':{'$first':_0x4c2372(0xc1)},'product_stock':{'$first':_0x4c2372(0x12c)},'bay':{'$first':_0x4c2372(0xcf)},'bin':{'$first':_0x4c2372(0x11c)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x4c2372(0x12d)},'primary_code':{'$first':_0x4c2372(0x107)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x4c2372(0x124)},'storage':{'$first':_0x4c2372(0x118)},'rack':{'$first':_0x4c2372(0xf2)}}}]);console[_0x4c2372(0xe8)](_0x266d12);const _0x46fc3f=await warehouse[_0x4c2372(0xc5)]([{'$match':{'status':_0x4c2372(0x130),'warehouse_category':_0x4c2372(0x125)}},{'$group':{'_id':_0x4c2372(0xf4),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0xcd0ac7=await warehouse[_0x4c2372(0xc5)]([{'$match':{'status':'Enabled','name':_0x4c2372(0xdd)}},{'$group':{'_id':_0x4c2372(0xf4),'name':{'$first':_0x4c2372(0xf4)}}},{'$sort':{'name':0x1}}]),_0x327b16=await product[_0x4c2372(0xf3)]({});if(_0x1aa139[0x0][_0x4c2372(0x12b)]=='English\x20(US)'){var _0x9ba496=users[_0x4c2372(0x131)];console[_0x4c2372(0xe8)](_0x9ba496);}else{if(_0x1aa139[0x0][_0x4c2372(0x12b)]==_0x4c2372(0xb8))var _0x9ba496=users[_0x4c2372(0xb8)];else{if(_0x1aa139[0x0][_0x4c2372(0x12b)]==_0x4c2372(0xbb))var _0x9ba496=users[_0x4c2372(0xbb)];else{if(_0x1aa139[0x0][_0x4c2372(0x12b)]==_0x4c2372(0xde))var _0x9ba496=users[_0x4c2372(0xde)];else{if(_0x1aa139[0x0]['language']==_0x4c2372(0x127))var _0x9ba496=users[_0x4c2372(0x127)];else{if(_0x1aa139[0x0][_0x4c2372(0x12b)]=='Portuguese\x20(BR)')var _0x9ba496=users[_0x4c2372(0xea)];else{if(_0x1aa139[0x0][_0x4c2372(0x12b)]=='Chinese')var _0x9ba496=users[_0x4c2372(0xee)];else{if(_0x1aa139[0x0][_0x4c2372(0x12b)]==_0x4c2372(0x129))var _0x9ba496=users['Arabic'];}}}}}}}_0x32dee8[_0x4c2372(0x12e)](_0x4c2372(0x11b),{'success':_0x5587ef['flash'](_0x4c2372(0xf9)),'errors':_0x5587ef[_0x4c2372(0xf5)](_0x4c2372(0x11d)),'role':_0x3797ba,'profile':_0x3a7b9c,'master_shop':_0x1aa139,'user':_0x684a31,'stock':_0x266d12,'unit':_0x327b16,'language':_0x9ba496,'warehouses':_0x46fc3f,'rooms':_0x3ca04e,'warehouse_QA':_0xcd0ac7});}catch(_0x2e43c6){console[_0x4c2372(0xe8)](_0x2e43c6);}}),router[a0_0x3c49a8(0xd0)](a0_0x3c49a8(0xcc),auth,async(_0x111719,_0x425f3b)=>{var _0x38ed01=a0_0x3c49a8;if(_0x111719[_0x38ed01(0xfd)]['for_categorize']=='QA')try{const _0xea2712=_0x111719['params']['id'],_0x44f7df=await sales_return[_0x38ed01(0xc9)]({'invoice':_0x111719[_0x38ed01(0xfd)][_0x38ed01(0xbe)]}),_0x42babf=await warehouse[_0x38ed01(0xc9)]({'name':_0x44f7df[_0x38ed01(0x101)],'room':_0x44f7df[_0x38ed01(0xdc)]}),{invoice:_0x4ee4b7,customer:_0x446212,date:_0x466657,warehouse_name:_0x529b90,product_name:_0x1bd185,primary_code:_0x591d69,secondary_code:_0x5e4668,product_code:_0x248a03,sales_quantity:_0x40bc24,stocks:_0x4ef0f2,return_qty:_0x1ded41,note:_0xce7585,to_warehouse_name_QA:_0x3f8fea,to_Room_name_QA:_0x59bfbc}=_0x111719['body'];if(typeof product_name_QA==_0x38ed01(0x126))var _0x5d1ae6=[_0x111719['body'][_0x38ed01(0xbf)]],_0x3f4530=[_0x111719['body'][_0x38ed01(0xfb)]],_0x45299e=[_0x111719['body'][_0x38ed01(0x132)]],_0x19cb6b=[_0x111719[_0x38ed01(0xfd)]['product_code_QA']],_0x29a222=[_0x111719[_0x38ed01(0xfd)][_0x38ed01(0x122)]],_0x5eb6bd=[_0x111719[_0x38ed01(0xfd)]['stocks_QA']],_0x483e01=[_0x111719[_0x38ed01(0xfd)][_0x38ed01(0xf7)]];else var _0x5d1ae6=[..._0x111719[_0x38ed01(0xfd)][_0x38ed01(0xbf)]],_0x3f4530=[..._0x111719[_0x38ed01(0xfd)]['primary_code_QA']],_0x45299e=[..._0x111719[_0x38ed01(0xfd)][_0x38ed01(0x132)]],_0x19cb6b=[..._0x111719['body'][_0x38ed01(0xbd)]],_0x29a222=[..._0x111719[_0x38ed01(0xfd)][_0x38ed01(0x122)]],_0x5eb6bd=[..._0x111719[_0x38ed01(0xfd)]['stocks_QA']],_0x483e01=[..._0x111719[_0x38ed01(0xfd)][_0x38ed01(0xf7)]];const _0x49a81f=_0x5d1ae6[_0x38ed01(0xfe)](_0x220c4f=>{return _0x220c4f={'product_name':_0x220c4f};});_0x3f4530[_0x38ed01(0xdf)]((_0x28adf7,_0x3240e2)=>{_0x49a81f[_0x3240e2]['primary_code']=_0x28adf7;}),_0x45299e['forEach']((_0x7c5d77,_0x362355)=>{var _0x3b66b2=_0x38ed01;_0x49a81f[_0x362355][_0x3b66b2(0x116)]=_0x7c5d77;}),_0x19cb6b[_0x38ed01(0xdf)]((_0x3dc439,_0x1eac52)=>{var _0x2c5d9a=_0x38ed01;_0x49a81f[_0x1eac52][_0x2c5d9a(0x10a)]=_0x3dc439;}),_0x29a222[_0x38ed01(0xdf)]((_0x80fefb,_0x1fd96e)=>{var _0x2082f7=_0x38ed01;_0x49a81f[_0x1fd96e][_0x2082f7(0x11e)]=_0x80fefb;}),_0x5eb6bd['forEach']((_0x4ac6bd,_0x49a67c)=>{_0x49a81f[_0x49a67c]['stock']=_0x4ac6bd;}),_0x483e01[_0x38ed01(0xdf)]((_0x593d75,_0x35d145)=>{var _0x18fd44=_0x38ed01;_0x49a81f[_0x35d145][_0x18fd44(0x111)]=_0x593d75;}),_0x44f7df[_0x38ed01(0xfc)][_0x38ed01(0xdf)](_0x1fc7e2=>{var _0x9b653a=_0x38ed01;const _0x354b04=_0x42babf[_0x9b653a(0xb9)][_0x9b653a(0xfe)](_0x37d352=>{var _0x8c8129=_0x9b653a;_0x37d352[_0x8c8129(0xc6)]==_0x1fc7e2[_0x8c8129(0xc6)]&&(_0x37d352['product_stock']=parseInt(_0x37d352[_0x8c8129(0xe0)])+parseInt(_0x1fc7e2[_0x8c8129(0x111)]));});}),await _0x42babf[_0x38ed01(0xd4)](),_0x44f7df[_0x38ed01(0xbe)]=_0x4ee4b7,_0x44f7df[_0x38ed01(0x12f)]=_0x446212,_0x44f7df[_0x38ed01(0x11f)]=_0x466657,_0x44f7df[_0x38ed01(0xba)]=_0x529b90,_0x44f7df['return_sale_QA']=_0x49a81f,_0x44f7df[_0x38ed01(0x10e)]=_0xce7585,_0x44f7df[_0x38ed01(0x101)]=_0x3f8fea,_0x44f7df[_0x38ed01(0xdc)]=_0x59bfbc;const _0x50efb9=await _0x44f7df[_0x38ed01(0xd4)](),_0x4ed517=await c_payment_data[_0x38ed01(0xc9)]({'invoice':_0x111719[_0x38ed01(0xfd)][_0x38ed01(0xbe)],'reason':_0x38ed01(0xf8)});_0x4ed517[_0x38ed01(0xbc)]=_0x111719[_0x38ed01(0xfd)][_0x38ed01(0xbc)],_0x4ed517['date']=_0x111719['body'][_0x38ed01(0x11f)],await _0x4ed517[_0x38ed01(0xd4)](),_0x111719[_0x38ed01(0xf5)](_0x38ed01(0xf9),_0x38ed01(0xc8)),_0x425f3b[_0x38ed01(0xe6)](_0x38ed01(0xda));}catch(_0x55b9b9){console[_0x38ed01(0xe8)](_0x55b9b9),_0x425f3b['status'](0xc8)['json']({'message':_0x55b9b9[_0x38ed01(0x137)]});}else try{const _0x4d54e1=_0x111719[_0x38ed01(0xff)]['id'];console['log'](_0x4d54e1);const _0x53f299=await sales_return[_0x38ed01(0xc9)]({'invoice':_0x111719[_0x38ed01(0xfd)][_0x38ed01(0xbe)]});console['log'](_0x38ed01(0xf1),_0x53f299);const _0x1237d3=await warehouse['findOne']({'name':_0x53f299[_0x38ed01(0x101)],'room':_0x53f299[_0x38ed01(0xdc)]});console[_0x38ed01(0xe8)](_0x38ed01(0x113),_0x1237d3);const {invoice:_0x555d72,customer:_0x54d1f1,date:_0x944bce,warehouse_name:_0x258290,product_name:_0x59fec1,primary_code:_0x292428,secondary_code:_0x57953d,product_code:_0x5128b4,sales_quantity:_0x50cbb9,stocks:_0x5ec700,return_qty:_0x541e11,note:_0x34e801,to_warehouse_name:_0x307d49,to_Room_name:_0x2df642}=_0x111719[_0x38ed01(0xfd)];console[_0x38ed01(0xe8)](_0x111719[_0x38ed01(0xfd)]);if(typeof _0x59fec1==_0x38ed01(0x126))var _0x5d1ae6=[_0x111719[_0x38ed01(0xfd)][_0x38ed01(0xc6)]],_0x3f4530=[_0x111719['body'][_0x38ed01(0x10f)]],_0x45299e=[_0x111719[_0x38ed01(0xfd)][_0x38ed01(0x116)]],_0x19cb6b=[_0x111719['body'][_0x38ed01(0x10a)]],_0x29a222=[_0x111719[_0x38ed01(0xfd)][_0x38ed01(0xc7)]],_0x5eb6bd=[_0x111719[_0x38ed01(0xfd)]['stocks']],_0x483e01=[_0x111719[_0x38ed01(0xfd)]['return_qty']],_0x3ab628=[_0x111719[_0x38ed01(0xfd)]['bay']],_0x171d03=[_0x111719[_0x38ed01(0xfd)]['bin']],_0xc5bcd5=[_0x111719[_0x38ed01(0xfd)][_0x38ed01(0x135)]],_0xfc5035=[_0x111719[_0x38ed01(0xfd)][_0x38ed01(0xfa)]];else var _0x5d1ae6=[..._0x111719[_0x38ed01(0xfd)]['product_name']],_0x3f4530=[..._0x111719[_0x38ed01(0xfd)]['primary_code']],_0x45299e=[..._0x111719[_0x38ed01(0xfd)][_0x38ed01(0x116)]],_0x19cb6b=[..._0x111719[_0x38ed01(0xfd)][_0x38ed01(0x10a)]],_0x29a222=[..._0x111719['body'][_0x38ed01(0xc7)]],_0x5eb6bd=[..._0x111719[_0x38ed01(0xfd)]['stocks']],_0x483e01=[..._0x111719[_0x38ed01(0xfd)][_0x38ed01(0x111)]],_0x3ab628=[..._0x111719[_0x38ed01(0xfd)][_0x38ed01(0xd8)]],_0x171d03=[..._0x111719[_0x38ed01(0xfd)][_0x38ed01(0xc2)]],_0xc5bcd5=[..._0x111719[_0x38ed01(0xfd)][_0x38ed01(0x135)]],_0xfc5035=[..._0x111719[_0x38ed01(0xfd)]['floorlevel']];const _0x27b210=_0x5d1ae6[_0x38ed01(0xfe)](_0x3feb53=>{return _0x3feb53={'product_name':_0x3feb53};});_0x3f4530[_0x38ed01(0xdf)]((_0x4b1c9e,_0x4a42e5)=>{var _0x14d4ad=_0x38ed01;_0x27b210[_0x4a42e5][_0x14d4ad(0x10f)]=_0x4b1c9e;}),_0x45299e[_0x38ed01(0xdf)]((_0x79e10d,_0x3a41b7)=>{var _0x52ac1c=_0x38ed01;_0x27b210[_0x3a41b7][_0x52ac1c(0x116)]=_0x79e10d;}),_0x19cb6b[_0x38ed01(0xdf)]((_0x3554f2,_0x456818)=>{var _0x35181a=_0x38ed01;_0x27b210[_0x456818][_0x35181a(0x10a)]=_0x3554f2;}),_0x29a222[_0x38ed01(0xdf)]((_0x4c6750,_0x568e98)=>{var _0x360ff1=_0x38ed01;_0x27b210[_0x568e98][_0x360ff1(0x11e)]=_0x4c6750;}),_0x5eb6bd[_0x38ed01(0xdf)]((_0x3e38cb,_0x4b6758)=>{var _0x3e99ef=_0x38ed01;_0x27b210[_0x4b6758][_0x3e99ef(0xd6)]=_0x3e38cb;}),_0x483e01[_0x38ed01(0xdf)]((_0x14c2c9,_0x247df1)=>{var _0x4cc126=_0x38ed01;_0x27b210[_0x247df1][_0x4cc126(0x111)]=_0x14c2c9;}),_0x3ab628['forEach']((_0xc9639,_0x3c3f68)=>{var _0x5d1e0b=_0x38ed01;_0x27b210[_0x3c3f68][_0x5d1e0b(0xd8)]=_0xc9639;}),_0x171d03['forEach']((_0x49921f,_0x2891fc)=>{var _0x42475c=_0x38ed01;_0x27b210[_0x2891fc][_0x42475c(0xc2)]=_0x49921f;}),_0xc5bcd5[_0x38ed01(0xdf)]((_0x2018e9,_0x4a814e)=>{var _0xb2a778=_0x38ed01;_0x27b210[_0x4a814e][_0xb2a778(0x108)]=_0x2018e9;}),_0xfc5035['forEach']((_0x5cfbed,_0x19f0aa)=>{_0x27b210[_0x19f0aa]['floorlevel']=_0x5cfbed;});var _0x2ccaff=0x0;_0x27b210[_0x38ed01(0xdf)](_0x5e929e=>{var _0x54cc4e=_0x38ed01;console['log'](_0x54cc4e(0x10d),_0x5e929e),(parseInt(_0x5e929e[_0x54cc4e(0x11e)])<parseInt(_0x5e929e['return_qty'])||parseInt(_0x5e929e['stock'])<parseInt(_0x5e929e[_0x54cc4e(0x111)])&&parseInt(_0x5e929e[_0x54cc4e(0x11e)])>parseInt(_0x5e929e['return_qty'])||parseInt(_0x5e929e[_0x54cc4e(0x111)])==0x0)&&_0x2ccaff++;});if(_0x2ccaff!=0x0)return _0x111719[_0x38ed01(0xf5)](_0x38ed01(0x11d),_0x38ed01(0xe1)),_0x425f3b[_0x38ed01(0xe6)](_0x38ed01(0x112));_0x53f299[_0x38ed01(0x102)][_0x38ed01(0xdf)](_0x10b272=>{var _0x4d751c=_0x38ed01;const _0x447a7f=_0x1237d3['product_details'][_0x4d751c(0xfe)](_0x78dcf=>{var _0x46d1b3=_0x4d751c;_0x78dcf[_0x46d1b3(0xc6)]==_0x10b272[_0x46d1b3(0xc6)]&&_0x78dcf[_0x46d1b3(0xfa)]==_0x10b272[_0x46d1b3(0xfa)]&&_0x78dcf[_0x46d1b3(0x108)]==_0x10b272['type']&&_0x78dcf[_0x46d1b3(0xc2)]==_0x10b272['bin']&&_0x78dcf[_0x46d1b3(0xd8)]==_0x10b272['bay']&&(_0x78dcf[_0x46d1b3(0xe0)]=parseInt(_0x78dcf[_0x46d1b3(0xe0)])+parseInt(_0x10b272[_0x46d1b3(0x111)]));});}),console[_0x38ed01(0xe8)](_0x38ed01(0x113),_0x1237d3),await _0x1237d3['save'](),_0x53f299[_0x38ed01(0xbe)]=_0x555d72,_0x53f299[_0x38ed01(0x12f)]=_0x54d1f1,_0x53f299['date']=_0x944bce,_0x53f299[_0x38ed01(0xba)]=_0x258290,_0x53f299['return_sale']=_0x27b210,_0x53f299[_0x38ed01(0x10e)]=_0x34e801,_0x53f299[_0x38ed01(0x101)]=_0x307d49,_0x53f299[_0x38ed01(0xdc)]=_0x2df642;const _0xffc02a=await _0x53f299['save']();console['log'](_0x38ed01(0xf6),_0xffc02a);const _0x40b9f1=await c_payment_data[_0x38ed01(0xc9)]({'invoice':_0x111719[_0x38ed01(0xfd)]['invoice'],'reason':_0x38ed01(0xf8)});_0x40b9f1[_0x38ed01(0xbc)]=_0x111719['body'][_0x38ed01(0xbc)],_0x40b9f1[_0x38ed01(0x11f)]=_0x111719['body'][_0x38ed01(0x11f)],await _0x40b9f1['save'](),_0x111719[_0x38ed01(0xf5)](_0x38ed01(0xf9),'purchase\x20return\x20successfully'),_0x425f3b['redirect'](_0x38ed01(0xcb));}catch(_0x33fe7e){console[_0x38ed01(0xe8)](_0x33fe7e),_0x425f3b[_0x38ed01(0x119)](0xc8)[_0x38ed01(0xe3)]({'message':_0x33fe7e['message']});}}),router[a0_0x3c49a8(0xd0)](a0_0x3c49a8(0xc3),auth,async(_0x2a3e37,_0x663939)=>{var _0x32bb6c=a0_0x3c49a8;try{const _0x2eb7fd=_0x2a3e37[_0x32bb6c(0xff)]['id'],{invoice:_0x385597,customer:_0xefe35f,payable_to_customer:_0x5319a2,paid_amount:_0x50cf85}=_0x2a3e37['body'],_0x238c7d=await sales_return[_0x32bb6c(0xc4)](_0x2eb7fd);console[_0x32bb6c(0xe8)](_0x32bb6c(0xef),_0x238c7d),console['log'](_0x5319a2),console[_0x32bb6c(0xe8)](_0x50cf85);var _0x3afc53=_0x5319a2-_0x50cf85;console[_0x32bb6c(0xe8)](_0x32bb6c(0xd2),_0x3afc53),_0x238c7d[_0x32bb6c(0x120)]=parseFloat(_0x50cf85)+parseFloat(_0x238c7d['paid_amount']),_0x238c7d[_0x32bb6c(0x109)]=_0x3afc53,console[_0x32bb6c(0xe8)](_0x238c7d);const _0x60db97=await _0x238c7d[_0x32bb6c(0xd4)]();console['log'](0x1b207);const _0x197f1a=await c_payment_data[_0x32bb6c(0xc9)]({'invoice':_0x2a3e37[_0x32bb6c(0xfd)][_0x32bb6c(0xbe)],'reason':_0x32bb6c(0xf8)});console['log'](_0x32bb6c(0x115),_0x197f1a),_0x197f1a[_0x32bb6c(0xeb)]=_0x3afc53,await _0x197f1a[_0x32bb6c(0xd4)]();let _0x564f0d=new Date(),_0x46bd12=('0'+_0x564f0d[_0x32bb6c(0x136)]())['slice'](-0x2),_0x49afc5=('0'+(_0x564f0d[_0x32bb6c(0xe2)]()+0x1))[_0x32bb6c(0xdb)](-0x2),_0x5eaa95=_0x564f0d[_0x32bb6c(0x100)](),_0x2e236d=_0x5eaa95+'-'+_0x49afc5+'-'+_0x46bd12;const _0x5596f8=new customer_payment({'invoice':_0x385597,'date':_0x5eaa95+'-'+_0x49afc5+'-'+_0x46bd12,'customer':_0xefe35f,'reason':_0x32bb6c(0xd3),'amount':_0x50cf85}),_0x4c4905=await _0x5596f8[_0x32bb6c(0xd4)]();_0x2a3e37[_0x32bb6c(0xf5)](_0x32bb6c(0xf9),_0x32bb6c(0x133)),_0x663939[_0x32bb6c(0xe6)](_0x32bb6c(0xcb));}catch(_0x3b5626){console[_0x32bb6c(0xe8)](_0x3b5626);}}),router[a0_0x3c49a8(0xce)](a0_0x3c49a8(0xd7),auth,async(_0x1b6b09,_0x5e3e6c)=>{var _0x4e3137=a0_0x3c49a8;try{const {username:_0x2ba55a,email:_0x26d4e6,role:_0x277358}=_0x1b6b09[_0x4e3137(0xec)],_0x5704dd=_0x1b6b09['user'],_0x1ae083=await profile[_0x4e3137(0xc9)]({'email':_0x5704dd[_0x4e3137(0xe7)]}),_0x780991=await master_shop[_0x4e3137(0xf3)]();console[_0x4e3137(0xe8)](_0x4e3137(0x11a),_0x780991);const _0xc3ccf2=_0x1b6b09[_0x4e3137(0xff)]['id'],_0x312c40=await sales_return[_0x4e3137(0xc4)](_0xc3ccf2);console['log'](_0x312c40);const _0x619d7b=await customer[_0x4e3137(0xc9)]({'name':_0x312c40['customer']});console['log'](_0x619d7b);if(_0x780991[0x0][_0x4e3137(0x12b)]==_0x4e3137(0xf0)){var _0x39f645=users[_0x4e3137(0x131)];console[_0x4e3137(0xe8)](_0x39f645);}else{if(_0x780991[0x0][_0x4e3137(0x12b)]==_0x4e3137(0xb8))var _0x39f645=users['Hindi'];else{if(_0x780991[0x0][_0x4e3137(0x12b)]==_0x4e3137(0xbb))var _0x39f645=users[_0x4e3137(0xbb)];else{if(_0x780991[0x0]['language']==_0x4e3137(0xde))var _0x39f645=users[_0x4e3137(0xde)];else{if(_0x780991[0x0][_0x4e3137(0x12b)]==_0x4e3137(0x127))var _0x39f645=users['French'];else{if(_0x780991[0x0][_0x4e3137(0x12b)]==_0x4e3137(0xd9))var _0x39f645=users['Portuguese'];else{if(_0x780991[0x0]['language']==_0x4e3137(0xee))var _0x39f645=users[_0x4e3137(0xee)];else{if(_0x780991[0x0][_0x4e3137(0x12b)]=='Arabic\x20(ae)')var _0x39f645=users[_0x4e3137(0xe9)];}}}}}}}_0x5e3e6c[_0x4e3137(0x12e)]('sales_return_invoice',{'success':_0x1b6b09[_0x4e3137(0xf5)](_0x4e3137(0xf9)),'errors':_0x1b6b09[_0x4e3137(0xf5)](_0x4e3137(0x11d)),'role':_0x5704dd,'profile':_0x1ae083,'master_shop':_0x780991,'customers':_0x619d7b,'sales':_0x312c40,'language':_0x39f645});}catch(_0xcee617){console['log'](_0xcee617);}}),module[a0_0x3c49a8(0xd5)]=router;function a0_0x168d(){var _0x1db263=['old_data','$product_details.rack','find','$name','flash','new\x20new_data','return_qty_QA','Sale\x20Return','success','floorlevel','primary_code_QA','return_sale_QA','body','map','params','getFullYear','ToWarehouse','return_sale','2294636mBCVtc','Return\x20Rooms','../models/all_models','../public/language/languages.json','$product_details.primary_code','type','due_amount','product_code','$product_details._id','3PIVDIJ','foreach\x20newproduct','note','primary_code','sales_return_finished','return_qty','back','old_warehouse_data','$customer_docs','c_payment','secondary_code','14XzwcSk','$product_details.storage','status','master','return_sale_edit_finished','$product_details.bin','errors','sale_qty','date','paid_amount','express','sales_quantity_QA','8489610AMwVDa','$product_details.product_code','Finished\x20Goods','string','French','190pLRoaI','Arabic\x20(ae)','3880kvmiAP','language','$product_details.product_stock','$product_details.floorlevel','render','customer','Enabled','English','secondary_code_QA','payment\x20successfull','92792OqzOeu','types','getDate','message','Hindi','product_details','warehouse_name','German','suppliers','product_code_QA','invoice','product_name_QA','/view','$product_details.product_name','bin','/give_payment/:id','findById','aggregate','product_name','sales_quantity','purchase\x20return\x20successfully','findOne','Router','/sales_return/view','/view/:id','5802685hhiJLz','get','$product_details.bay','post','63NNSoos','subtract','Returned\x20Payment\x20For\x20Sale\x20Return','save','exports','stock','/invoice/:id','bay','Portuguese\x20(BR)','/sales_return_finished/view','slice','ToRoom','QA\x20Warehouse','Spanish','forEach','product_stock','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','getMonth','json','4246660UXfwvK','286986JhyNkD','redirect','email','log','Arabic','Portuguese','amount','user','$product_details','Chinese','data','English\x20(US)'];a0_0x168d=function(){return _0x1db263;};return a0_0x168d();}