var a0_0x120052=a0_0x34e0;function a0_0x6b31(){var _0x2b4a45=['sale_qty','Arabic','Arabic\x20(ae)','master','subtract','return_sale_edit_finished','note','secondary_code','Spanish','purchase\x20return\x20successfully','forEach','stocks','1816950MgHmQm','../middleware/auth','floorlevel','return_sale_QA','../models/all_models','types','params','slice','findOne','sales_return_finished','ToWarehouse','old_warehouse_data','Portuguese\x20(BR)','return_sale','return_qty','date','ToRoom','customer','sales_quantity_QA','bay','/give_payment/:id','/sales_return_finished/view','post','$product_details.floorlevel','product_details','$customer_docs','product_code','product_code_QA','/view','user','email','data','render','/invoice/:id','old_data','exports','$product_details.product_code','findById','289546isbBJu','aggregate','English','stock','paid_amount','message','json','76FjMBFm','language','2495997umOYzC','Finished\x20Goods','German','$product_details.primary_code','1581656DauqiB','find','3136184hRIHnJ','redirect','save','$product_details.type','Chinese','product_name_QA','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','$product_details.bin','due_amount','$product_details','$name','Router','customer_docs','status','Sale\x20Return','primary_code','amount','$product_details.rack','13308xvjQtb','log','$product_details._id','product_name','success','name','stocks_QA','sales_return_invoice','invoice','for_categorize','Enabled','bin','return_qty_QA','/sales_return/view','foreach\x20newproduct','secondary_code_QA','get','/view/:id','French','errors','flash','Hindi','suppliers','Return\x20Rooms','sales_quantity','express','getMonth','type','body','new\x20new_data','English\x20(US)','primary_code_QA','payment\x20successfull','$product_details.bay','warehouse_name','map','product_stock','1557402HCNziR','Portuguese','string','customers','Returned\x20Payment\x20For\x20Sale\x20Return'];a0_0x6b31=function(){return _0x2b4a45;};return a0_0x6b31();}function a0_0x34e0(_0x2711bc,_0x15ae9e){var _0x6b31b8=a0_0x6b31();return a0_0x34e0=function(_0x34e091,_0x4f4482){_0x34e091=_0x34e091-0x1e3;var _0x4e4524=_0x6b31b8[_0x34e091];return _0x4e4524;},a0_0x34e0(_0x2711bc,_0x15ae9e);}(function(_0x2fb163,_0x930dd){var _0x1d0631=a0_0x34e0,_0x1cb8f4=_0x2fb163();while(!![]){try{var _0x480f00=-parseInt(_0x1d0631(0x215))/0x1+-parseInt(_0x1d0631(0x21c))/0x2*(-parseInt(_0x1d0631(0x236))/0x3)+parseInt(_0x1d0631(0x222))/0x4+-parseInt(_0x1d0631(0x1ef))/0x5+parseInt(_0x1d0631(0x25b))/0x6+-parseInt(_0x1d0631(0x21e))/0x7+parseInt(_0x1d0631(0x224))/0x8;if(_0x480f00===_0x930dd)break;else _0x1cb8f4['push'](_0x1cb8f4['shift']());}catch(_0x17debb){_0x1cb8f4['push'](_0x1cb8f4['shift']());}}}(a0_0x6b31,0x324f1));const express=require(a0_0x120052(0x24f)),app=express(),router=express[a0_0x120052(0x22f)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x120052(0x1f3)),auth=require(a0_0x120052(0x1f0)),users=require('../public/language/languages.json');router[a0_0x120052(0x246)](a0_0x120052(0x20b),auth,async(_0x5ee8b3,_0x47a3dc)=>{var _0x394017=a0_0x120052;try{const {username:_0x5d785e,email:_0x4bf5ea,role:_0x384297}=_0x5ee8b3['user'],_0xbdf361=_0x5ee8b3[_0x394017(0x20c)],_0x2108ba=await profile['findOne']({'email':_0xbdf361['email']}),_0x2c390f=await master_shop[_0x394017(0x223)](),_0x49e90d=await sales_return_finished[_0x394017(0x216)]([{'$lookup':{'from':_0x394017(0x25e),'localField':_0x394017(0x200),'foreignField':_0x394017(0x23b),'as':_0x394017(0x230)}},{'$unwind':_0x394017(0x208)}]);if(_0x2c390f[0x0]['language']==_0x394017(0x254)){var _0x74efe7=users[_0x394017(0x217)];console[_0x394017(0x237)](_0x74efe7);}else{if(_0x2c390f[0x0][_0x394017(0x21d)]==_0x394017(0x24b))var _0x74efe7=users[_0x394017(0x24b)];else{if(_0x2c390f[0x0]['language']==_0x394017(0x220))var _0x74efe7=users[_0x394017(0x220)];else{if(_0x2c390f[0x0][_0x394017(0x21d)]=='Spanish')var _0x74efe7=users['Spanish'];else{if(_0x2c390f[0x0]['language']==_0x394017(0x248))var _0x74efe7=users[_0x394017(0x248)];else{if(_0x2c390f[0x0][_0x394017(0x21d)]==_0x394017(0x1fb))var _0x74efe7=users['Portuguese'];else{if(_0x2c390f[0x0][_0x394017(0x21d)]==_0x394017(0x228))var _0x74efe7=users[_0x394017(0x228)];else{if(_0x2c390f[0x0][_0x394017(0x21d)]==_0x394017(0x1e5))var _0x74efe7=users[_0x394017(0x1e4)];}}}}}}}_0x47a3dc[_0x394017(0x20f)](_0x394017(0x1f8),{'success':_0x5ee8b3[_0x394017(0x24a)]('success'),'errors':_0x5ee8b3[_0x394017(0x24a)](_0x394017(0x249)),'role':_0xbdf361,'profile':_0x2108ba,'master_shop':_0x2c390f,'user':_0x49e90d,'language':_0x74efe7});}catch(_0x1e2ee7){console[_0x394017(0x237)](_0x1e2ee7);}}),router[a0_0x120052(0x246)](a0_0x120052(0x247),auth,async(_0x3d8f10,_0x4ce66d)=>{var _0x57a36e=a0_0x120052;try{const {username:_0x10e88a,email:_0x4c8cfd,role:_0x34f67d}=_0x3d8f10[_0x57a36e(0x20c)],_0x2c076b=_0x3d8f10[_0x57a36e(0x20c)],_0x4fb107=await profile['findOne']({'email':_0x2c076b[_0x57a36e(0x20d)]}),_0x33129c=await master_shop[_0x57a36e(0x223)]();console['log'](_0x57a36e(0x1e6),_0x33129c);const _0x3161a0=_0x3d8f10[_0x57a36e(0x1f5)]['id'];console[_0x57a36e(0x237)](_0x3161a0);var _0x1354f4=[_0x57a36e(0x24d)];const _0x4d0b99=await sales_return_finished[_0x57a36e(0x214)](_0x3161a0),_0x42540a=await warehouse[_0x57a36e(0x216)]([{'$match':{'name':_0x4d0b99[_0x57a36e(0x1f9)],'room':_0x4d0b99['ToRoom']}},{'$unwind':_0x57a36e(0x22d)},{'$group':{'_id':_0x57a36e(0x238),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x57a36e(0x257)},'bin':{'$first':_0x57a36e(0x22b)},'type':{'$first':_0x57a36e(0x227)},'floorlevel':{'$first':_0x57a36e(0x206)},'primary_code':{'$first':_0x57a36e(0x221)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x57a36e(0x213)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x57a36e(0x235)}}}]);console[_0x57a36e(0x237)](_0x42540a);const _0x201e0d=await warehouse[_0x57a36e(0x216)]([{'$match':{'status':'Enabled','warehouse_category':_0x57a36e(0x21f)}},{'$group':{'_id':'$name','name':{'$first':_0x57a36e(0x22e)}}},{'$sort':{'name':0x1}}]),_0x5b7bc2=await warehouse[_0x57a36e(0x216)]([{'$match':{'status':_0x57a36e(0x240),'name':'QA\x20Warehouse'}},{'$group':{'_id':_0x57a36e(0x22e),'name':{'$first':_0x57a36e(0x22e)}}},{'$sort':{'name':0x1}}]),_0xa0a2f3=await product[_0x57a36e(0x223)]({});if(_0x33129c[0x0][_0x57a36e(0x21d)]==_0x57a36e(0x254)){var _0x22a9a4=users[_0x57a36e(0x217)];console[_0x57a36e(0x237)](_0x22a9a4);}else{if(_0x33129c[0x0][_0x57a36e(0x21d)]==_0x57a36e(0x24b))var _0x22a9a4=users['Hindi'];else{if(_0x33129c[0x0][_0x57a36e(0x21d)]==_0x57a36e(0x220))var _0x22a9a4=users[_0x57a36e(0x220)];else{if(_0x33129c[0x0][_0x57a36e(0x21d)]==_0x57a36e(0x1eb))var _0x22a9a4=users['Spanish'];else{if(_0x33129c[0x0][_0x57a36e(0x21d)]==_0x57a36e(0x248))var _0x22a9a4=users[_0x57a36e(0x248)];else{if(_0x33129c[0x0][_0x57a36e(0x21d)]==_0x57a36e(0x1fb))var _0x22a9a4=users['Portuguese'];else{if(_0x33129c[0x0]['language']==_0x57a36e(0x228))var _0x22a9a4=users[_0x57a36e(0x228)];else{if(_0x33129c[0x0][_0x57a36e(0x21d)]=='Arabic\x20(ae)')var _0x22a9a4=users[_0x57a36e(0x1e4)];}}}}}}}_0x4ce66d[_0x57a36e(0x20f)](_0x57a36e(0x1e8),{'success':_0x3d8f10[_0x57a36e(0x24a)](_0x57a36e(0x23a)),'errors':_0x3d8f10['flash'](_0x57a36e(0x249)),'role':_0x2c076b,'profile':_0x4fb107,'master_shop':_0x33129c,'user':_0x4d0b99,'stock':_0x42540a,'unit':_0xa0a2f3,'language':_0x22a9a4,'warehouses':_0x201e0d,'rooms':_0x1354f4,'warehouse_QA':_0x5b7bc2});}catch(_0x876fc0){console[_0x57a36e(0x237)](_0x876fc0);}}),router['post'](a0_0x120052(0x247),auth,async(_0x3a723a,_0x5f423e)=>{var _0x36a90d=a0_0x120052;if(_0x3a723a['body'][_0x36a90d(0x23f)]=='QA')try{const _0x257c74=_0x3a723a[_0x36a90d(0x1f5)]['id'],_0x59556f=await sales_return[_0x36a90d(0x1f7)]({'invoice':_0x3a723a['body'][_0x36a90d(0x23e)]}),_0x4f0f18=await warehouse[_0x36a90d(0x1f7)]({'name':_0x59556f[_0x36a90d(0x1f9)],'room':_0x59556f[_0x36a90d(0x1ff)]}),{invoice:_0x3bafdd,customer:_0x3d5b02,date:_0x3ecc96,warehouse_name:_0x57d29f,product_name:_0x511a2a,primary_code:_0x560d30,secondary_code:_0x53f7b6,product_code:_0x18ed26,sales_quantity:_0x39b021,stocks:_0x2ee0f2,return_qty:_0x187200,note:_0xf82673,to_warehouse_name_QA:_0x2f557a,to_Room_name_QA:_0x2bef41}=_0x3a723a[_0x36a90d(0x252)];if(typeof product_name_QA==_0x36a90d(0x25d))var _0xeeb957=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x229)]],_0x8a5865=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x255)]],_0x329ea8=[_0x3a723a['body']['secondary_code_QA']],_0x486baa=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x20a)]],_0x1e71e4=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x201)]],_0x1672e5=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x23c)]],_0x4a2713=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x242)]];else var _0xeeb957=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x229)]],_0x8a5865=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x255)]],_0x329ea8=[..._0x3a723a['body'][_0x36a90d(0x245)]],_0x486baa=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x20a)]],_0x1e71e4=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x201)]],_0x1672e5=[..._0x3a723a['body'][_0x36a90d(0x23c)]],_0x4a2713=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x242)]];const _0x5df35f=_0xeeb957[_0x36a90d(0x259)](_0x52eaa2=>{return _0x52eaa2={'product_name':_0x52eaa2};});_0x8a5865['forEach']((_0x50177f,_0x30b8b4)=>{_0x5df35f[_0x30b8b4]['primary_code']=_0x50177f;}),_0x329ea8[_0x36a90d(0x1ed)]((_0x10e47a,_0x5a82ad)=>{var _0x2dca33=_0x36a90d;_0x5df35f[_0x5a82ad][_0x2dca33(0x1ea)]=_0x10e47a;}),_0x486baa['forEach']((_0x31c113,_0x1f570d)=>{var _0x51ce25=_0x36a90d;_0x5df35f[_0x1f570d][_0x51ce25(0x209)]=_0x31c113;}),_0x1e71e4[_0x36a90d(0x1ed)]((_0x292815,_0x1986bf)=>{_0x5df35f[_0x1986bf]['sale_qty']=_0x292815;}),_0x1672e5['forEach']((_0x727dd4,_0x54f505)=>{var _0x3187ce=_0x36a90d;_0x5df35f[_0x54f505][_0x3187ce(0x218)]=_0x727dd4;}),_0x4a2713[_0x36a90d(0x1ed)]((_0x34ce9c,_0x1a3989)=>{var _0x19fb23=_0x36a90d;_0x5df35f[_0x1a3989][_0x19fb23(0x1fd)]=_0x34ce9c;}),_0x59556f[_0x36a90d(0x1f2)][_0x36a90d(0x1ed)](_0x2f3976=>{var _0xea1677=_0x36a90d;const _0x31c4dd=_0x4f0f18[_0xea1677(0x207)][_0xea1677(0x259)](_0x1f8924=>{var _0x3c79f9=_0xea1677;_0x1f8924[_0x3c79f9(0x239)]==_0x2f3976[_0x3c79f9(0x239)]&&(_0x1f8924[_0x3c79f9(0x25a)]=parseInt(_0x1f8924[_0x3c79f9(0x25a)])+parseInt(_0x2f3976[_0x3c79f9(0x1fd)]));});}),await _0x4f0f18[_0x36a90d(0x226)](),_0x59556f[_0x36a90d(0x23e)]=_0x3bafdd,_0x59556f[_0x36a90d(0x200)]=_0x3d5b02,_0x59556f[_0x36a90d(0x1fe)]=_0x3ecc96,_0x59556f['warehouse_name']=_0x57d29f,_0x59556f[_0x36a90d(0x1f2)]=_0x5df35f,_0x59556f[_0x36a90d(0x1e9)]=_0xf82673,_0x59556f[_0x36a90d(0x1f9)]=_0x2f557a,_0x59556f[_0x36a90d(0x1ff)]=_0x2bef41;const _0x40ea08=await _0x59556f[_0x36a90d(0x226)](),_0xc4679f=await c_payment_data[_0x36a90d(0x1f7)]({'invoice':_0x3a723a['body']['invoice'],'reason':_0x36a90d(0x232)});_0xc4679f[_0x36a90d(0x24c)]=_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x24c)],_0xc4679f[_0x36a90d(0x1fe)]=_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x1fe)],await _0xc4679f[_0x36a90d(0x226)](),_0x3a723a['flash'](_0x36a90d(0x23a),'purchase\x20return\x20successfully'),_0x5f423e[_0x36a90d(0x225)](_0x36a90d(0x204));}catch(_0x57cf9a){console[_0x36a90d(0x237)](_0x57cf9a),_0x5f423e[_0x36a90d(0x231)](0xc8)['json']({'message':_0x57cf9a[_0x36a90d(0x21a)]});}else try{const _0x2be0e9=_0x3a723a[_0x36a90d(0x1f5)]['id'];console['log'](_0x2be0e9);const _0xe89d63=await sales_return[_0x36a90d(0x1f7)]({'invoice':_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x23e)]});console['log'](_0x36a90d(0x211),_0xe89d63);const _0x52f205=await warehouse[_0x36a90d(0x1f7)]({'name':_0xe89d63['ToWarehouse'],'room':_0xe89d63[_0x36a90d(0x1ff)]});console[_0x36a90d(0x237)](_0x36a90d(0x1fa),_0x52f205);const {invoice:_0x48d1d1,customer:_0x1f601e,date:_0x23f274,warehouse_name:_0x119bed,product_name:_0x53106c,primary_code:_0x3073f9,secondary_code:_0x5d3b99,product_code:_0x3cf203,sales_quantity:_0x537264,stocks:_0x937e7e,return_qty:_0x335a56,note:_0x20f0c9,to_warehouse_name:_0x28bdc1,to_Room_name:_0x503494}=_0x3a723a[_0x36a90d(0x252)];console['log'](_0x3a723a[_0x36a90d(0x252)]);if(typeof _0x53106c==_0x36a90d(0x25d))var _0xeeb957=[_0x3a723a['body'][_0x36a90d(0x239)]],_0x8a5865=[_0x3a723a[_0x36a90d(0x252)]['primary_code']],_0x329ea8=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x1ea)]],_0x486baa=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x209)]],_0x1e71e4=[_0x3a723a[_0x36a90d(0x252)]['sales_quantity']],_0x1672e5=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x1ee)]],_0x4a2713=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x1fd)]],_0x13165b=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x202)]],_0x4de96d=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x241)]],_0x44b41c=[_0x3a723a['body']['types']],_0x27c890=[_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x1f1)]];else var _0xeeb957=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x239)]],_0x8a5865=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x233)]],_0x329ea8=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x1ea)]],_0x486baa=[..._0x3a723a[_0x36a90d(0x252)]['product_code']],_0x1e71e4=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x24e)]],_0x1672e5=[..._0x3a723a['body'][_0x36a90d(0x1ee)]],_0x4a2713=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x1fd)]],_0x13165b=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x202)]],_0x4de96d=[..._0x3a723a[_0x36a90d(0x252)]['bin']],_0x44b41c=[..._0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x1f4)]],_0x27c890=[..._0x3a723a[_0x36a90d(0x252)]['floorlevel']];const _0x14e564=_0xeeb957[_0x36a90d(0x259)](_0x3ae37c=>{return _0x3ae37c={'product_name':_0x3ae37c};});_0x8a5865['forEach']((_0x5c6765,_0x3e11ad)=>{var _0x5c6823=_0x36a90d;_0x14e564[_0x3e11ad][_0x5c6823(0x233)]=_0x5c6765;}),_0x329ea8[_0x36a90d(0x1ed)]((_0x12338c,_0xa8a5f8)=>{_0x14e564[_0xa8a5f8]['secondary_code']=_0x12338c;}),_0x486baa[_0x36a90d(0x1ed)]((_0x4310a9,_0x20c3b)=>{var _0x31185f=_0x36a90d;_0x14e564[_0x20c3b][_0x31185f(0x209)]=_0x4310a9;}),_0x1e71e4[_0x36a90d(0x1ed)]((_0x3b7512,_0x43f37e)=>{var _0x57e02e=_0x36a90d;_0x14e564[_0x43f37e][_0x57e02e(0x1e3)]=_0x3b7512;}),_0x1672e5[_0x36a90d(0x1ed)]((_0x28bd97,_0x48ccdd)=>{var _0x33fb30=_0x36a90d;_0x14e564[_0x48ccdd][_0x33fb30(0x218)]=_0x28bd97;}),_0x4a2713[_0x36a90d(0x1ed)]((_0x3d4878,_0x58e203)=>{var _0x2cf11d=_0x36a90d;_0x14e564[_0x58e203][_0x2cf11d(0x1fd)]=_0x3d4878;}),_0x13165b[_0x36a90d(0x1ed)]((_0x4a2374,_0xf3b30a)=>{var _0x2d43cb=_0x36a90d;_0x14e564[_0xf3b30a][_0x2d43cb(0x202)]=_0x4a2374;}),_0x4de96d[_0x36a90d(0x1ed)]((_0x11252c,_0x576c02)=>{var _0x4180c0=_0x36a90d;_0x14e564[_0x576c02][_0x4180c0(0x241)]=_0x11252c;}),_0x44b41c['forEach']((_0xd72427,_0x17a6f1)=>{var _0x8bebaf=_0x36a90d;_0x14e564[_0x17a6f1][_0x8bebaf(0x251)]=_0xd72427;}),_0x27c890['forEach']((_0x29e756,_0x79839)=>{var _0xda7b1b=_0x36a90d;_0x14e564[_0x79839][_0xda7b1b(0x1f1)]=_0x29e756;});var _0x3211e9=0x0;_0x14e564[_0x36a90d(0x1ed)](_0x5bf79a=>{var _0x9ed76=_0x36a90d;console[_0x9ed76(0x237)](_0x9ed76(0x244),_0x5bf79a),(parseInt(_0x5bf79a[_0x9ed76(0x1e3)])<parseInt(_0x5bf79a[_0x9ed76(0x1fd)])||parseInt(_0x5bf79a[_0x9ed76(0x218)])<parseInt(_0x5bf79a['return_qty'])&&parseInt(_0x5bf79a['sale_qty'])>parseInt(_0x5bf79a[_0x9ed76(0x1fd)])||parseInt(_0x5bf79a[_0x9ed76(0x1fd)])==0x0)&&_0x3211e9++;});if(_0x3211e9!=0x0)return _0x3a723a['flash'](_0x36a90d(0x249),_0x36a90d(0x22a)),_0x5f423e[_0x36a90d(0x225)]('back');_0xe89d63[_0x36a90d(0x1fc)][_0x36a90d(0x1ed)](_0x302b9b=>{var _0x5ac348=_0x36a90d;const _0x5e2082=_0x52f205['product_details'][_0x5ac348(0x259)](_0x21f2bd=>{var _0x1e55fa=_0x5ac348;_0x21f2bd[_0x1e55fa(0x239)]==_0x302b9b[_0x1e55fa(0x239)]&&_0x21f2bd[_0x1e55fa(0x1f1)]==_0x302b9b['floorlevel']&&_0x21f2bd[_0x1e55fa(0x251)]==_0x302b9b[_0x1e55fa(0x251)]&&_0x21f2bd[_0x1e55fa(0x241)]==_0x302b9b[_0x1e55fa(0x241)]&&_0x21f2bd[_0x1e55fa(0x202)]==_0x302b9b[_0x1e55fa(0x202)]&&(_0x21f2bd['product_stock']=parseInt(_0x21f2bd[_0x1e55fa(0x25a)])+parseInt(_0x302b9b[_0x1e55fa(0x1fd)]));});}),console[_0x36a90d(0x237)](_0x36a90d(0x1fa),_0x52f205),await _0x52f205[_0x36a90d(0x226)](),_0xe89d63[_0x36a90d(0x23e)]=_0x48d1d1,_0xe89d63[_0x36a90d(0x200)]=_0x1f601e,_0xe89d63[_0x36a90d(0x1fe)]=_0x23f274,_0xe89d63[_0x36a90d(0x258)]=_0x119bed,_0xe89d63[_0x36a90d(0x1fc)]=_0x14e564,_0xe89d63[_0x36a90d(0x1e9)]=_0x20f0c9,_0xe89d63[_0x36a90d(0x1f9)]=_0x28bdc1,_0xe89d63[_0x36a90d(0x1ff)]=_0x503494;const _0x124595=await _0xe89d63['save']();console[_0x36a90d(0x237)](_0x36a90d(0x253),_0x124595);const _0x1d1e65=await c_payment_data[_0x36a90d(0x1f7)]({'invoice':_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x23e)],'reason':_0x36a90d(0x232)});_0x1d1e65[_0x36a90d(0x24c)]=_0x3a723a[_0x36a90d(0x252)]['suppliers'],_0x1d1e65[_0x36a90d(0x1fe)]=_0x3a723a[_0x36a90d(0x252)][_0x36a90d(0x1fe)],await _0x1d1e65['save'](),_0x3a723a[_0x36a90d(0x24a)](_0x36a90d(0x23a),_0x36a90d(0x1ec)),_0x5f423e['redirect'](_0x36a90d(0x243));}catch(_0x4e80c8){console[_0x36a90d(0x237)](_0x4e80c8),_0x5f423e[_0x36a90d(0x231)](0xc8)[_0x36a90d(0x21b)]({'message':_0x4e80c8[_0x36a90d(0x21a)]});}}),router[a0_0x120052(0x205)](a0_0x120052(0x203),auth,async(_0x3aa4d7,_0x4b20ed)=>{var _0x3b81de=a0_0x120052;try{const _0x272d53=_0x3aa4d7[_0x3b81de(0x1f5)]['id'],{invoice:_0x2bc2b4,customer:_0xb4cf47,payable_to_customer:_0x533957,paid_amount:_0x425422}=_0x3aa4d7[_0x3b81de(0x252)],_0x31e970=await sales_return['findById'](_0x272d53);console[_0x3b81de(0x237)](_0x3b81de(0x20e),_0x31e970),console[_0x3b81de(0x237)](_0x533957),console[_0x3b81de(0x237)](_0x425422);var _0xe858a2=_0x533957-_0x425422;console['log'](_0x3b81de(0x1e7),_0xe858a2),_0x31e970[_0x3b81de(0x219)]=parseFloat(_0x425422)+parseFloat(_0x31e970[_0x3b81de(0x219)]),_0x31e970[_0x3b81de(0x22c)]=_0xe858a2,console['log'](_0x31e970);const _0x5890d2=await _0x31e970[_0x3b81de(0x226)]();console[_0x3b81de(0x237)](0x1b207);const _0x382b3f=await c_payment_data['findOne']({'invoice':_0x3aa4d7['body'][_0x3b81de(0x23e)],'reason':'Sale\x20Return'});console[_0x3b81de(0x237)]('c_payment',_0x382b3f),_0x382b3f[_0x3b81de(0x234)]=_0xe858a2,await _0x382b3f['save']();let _0x1443c7=new Date(),_0x47ed79=('0'+_0x1443c7['getDate']())[_0x3b81de(0x1f6)](-0x2),_0x3a28b7=('0'+(_0x1443c7[_0x3b81de(0x250)]()+0x1))[_0x3b81de(0x1f6)](-0x2),_0x1dfee2=_0x1443c7['getFullYear'](),_0x451afa=_0x1dfee2+'-'+_0x3a28b7+'-'+_0x47ed79;const _0x79443f=new customer_payment({'invoice':_0x2bc2b4,'date':_0x1dfee2+'-'+_0x3a28b7+'-'+_0x47ed79,'customer':_0xb4cf47,'reason':_0x3b81de(0x25f),'amount':_0x425422}),_0xd4a844=await _0x79443f[_0x3b81de(0x226)]();_0x3aa4d7[_0x3b81de(0x24a)]('success',_0x3b81de(0x256)),_0x4b20ed[_0x3b81de(0x225)](_0x3b81de(0x243));}catch(_0x861f54){console[_0x3b81de(0x237)](_0x861f54);}}),router['get'](a0_0x120052(0x210),auth,async(_0x46d2f1,_0x18ef3c)=>{var _0x41fe8e=a0_0x120052;try{const {username:_0xab5692,email:_0x1682f6,role:_0x2589e2}=_0x46d2f1[_0x41fe8e(0x20c)],_0x53613e=_0x46d2f1[_0x41fe8e(0x20c)],_0x425b2e=await profile[_0x41fe8e(0x1f7)]({'email':_0x53613e[_0x41fe8e(0x20d)]}),_0x274ce3=await master_shop[_0x41fe8e(0x223)]();console['log'](_0x41fe8e(0x1e6),_0x274ce3);const _0x47b0ab=_0x46d2f1['params']['id'],_0xeb994e=await sales_return[_0x41fe8e(0x214)](_0x47b0ab);console[_0x41fe8e(0x237)](_0xeb994e);const _0x39eb43=await customer[_0x41fe8e(0x1f7)]({'name':_0xeb994e[_0x41fe8e(0x200)]});console[_0x41fe8e(0x237)](_0x39eb43);if(_0x274ce3[0x0][_0x41fe8e(0x21d)]=='English\x20(US)'){var _0x3ed38b=users[_0x41fe8e(0x217)];console[_0x41fe8e(0x237)](_0x3ed38b);}else{if(_0x274ce3[0x0][_0x41fe8e(0x21d)]=='Hindi')var _0x3ed38b=users[_0x41fe8e(0x24b)];else{if(_0x274ce3[0x0][_0x41fe8e(0x21d)]==_0x41fe8e(0x220))var _0x3ed38b=users['German'];else{if(_0x274ce3[0x0][_0x41fe8e(0x21d)]==_0x41fe8e(0x1eb))var _0x3ed38b=users[_0x41fe8e(0x1eb)];else{if(_0x274ce3[0x0][_0x41fe8e(0x21d)]==_0x41fe8e(0x248))var _0x3ed38b=users['French'];else{if(_0x274ce3[0x0]['language']==_0x41fe8e(0x1fb))var _0x3ed38b=users[_0x41fe8e(0x25c)];else{if(_0x274ce3[0x0][_0x41fe8e(0x21d)]==_0x41fe8e(0x228))var _0x3ed38b=users[_0x41fe8e(0x228)];else{if(_0x274ce3[0x0][_0x41fe8e(0x21d)]==_0x41fe8e(0x1e5))var _0x3ed38b=users[_0x41fe8e(0x1e4)];}}}}}}}_0x18ef3c[_0x41fe8e(0x20f)](_0x41fe8e(0x23d),{'success':_0x46d2f1['flash'](_0x41fe8e(0x23a)),'errors':_0x46d2f1['flash'](_0x41fe8e(0x249)),'role':_0x53613e,'profile':_0x425b2e,'master_shop':_0x274ce3,'customers':_0x39eb43,'sales':_0xeb994e,'language':_0x3ed38b});}catch(_0x40a54b){console[_0x41fe8e(0x237)](_0x40a54b);}}),module[a0_0x120052(0x212)]=router;