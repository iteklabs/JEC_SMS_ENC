function a0_0x4838(_0x200f4f,_0x20e4a8){var _0x2f152a=a0_0x2f15();return a0_0x4838=function(_0x483895,_0x2235fa){_0x483895=_0x483895-0x66;var _0x2e2503=_0x2f152a[_0x483895];return _0x2e2503;},a0_0x4838(_0x200f4f,_0x20e4a8);}function a0_0x2f15(){var _0x2e5674=['success','master','errors','invoice','3441364EEZqIQ','warehouse_name','foreach\x20newproduct','render','German','5RuoxoM','$product_details','sales_quantity','$name','return_sale_QA','payment\x20successfull','Return\x20Rooms','return_qty','amount','slice','get','639464dmfLYp','subtract','/invoice/:id','exports','$product_details.product_name','QA\x20Warehouse','6204hkIska','return_sale','Arabic\x20(ae)','Portuguese\x20(BR)','getFullYear','floorlevel','customer_docs','French','for_categorize','data','suppliers','log','$product_details.product_code','sales_quantity_QA','customer','product_details','note','redirect','type','json','sale_qty','bin','forEach','English\x20(US)','499449bgmfhs','types','$product_details.product_stock','findOne','343PDPmDL','purchase\x20return\x20successfully','/view/:id','return_sale_edit_finished','Finished\x20Goods','return_qty_QA','status','$product_details.floorlevel','../models/all_models','$product_details.bay','email','message','Returned\x20Payment\x20For\x20Sale\x20Return','Hindi','108yvgzxi','due_amount','Spanish','Chinese','Arabic','ToWarehouse','product_code_QA','secondary_code','find','$product_details.storage','save','sales_return_finished','product_name_QA','product_name','Portuguese','sales_return_invoice','$product_details.bin','date','Sale\x20Return','flash','primary_code','stocks','old_warehouse_data','body','language','c_payment','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','stock','string','post','Enabled','/view','ToRoom','findById','params','aggregate','user','back','1318930NBbKUH','map','primary_code_QA','product_stock','1189206tlaDwz','../public/language/languages.json','paid_amount','/sales_return_finished/view','bay','product_code','secondary_code_QA','English','old_data','/give_payment/:id','125607jdVjMe'];a0_0x2f15=function(){return _0x2e5674;};return a0_0x2f15();}var a0_0x34716e=a0_0x4838;(function(_0x24f2f5,_0x304fa2){var _0x170f1b=a0_0x4838,_0x242995=_0x24f2f5();while(!![]){try{var _0x48e4f8=parseInt(_0x170f1b(0x7a))/0x1+-parseInt(_0x170f1b(0xb6))/0x2+-parseInt(_0x170f1b(0xc0))/0x3+-parseInt(_0x170f1b(0xc5))/0x4*(parseInt(_0x170f1b(0xca))/0x5)+-parseInt(_0x170f1b(0xdb))/0x6*(-parseInt(_0x170f1b(0x7e))/0x7)+parseInt(_0x170f1b(0xd5))/0x8+-parseInt(_0x170f1b(0x8c))/0x9*(-parseInt(_0x170f1b(0xb2))/0xa);if(_0x48e4f8===_0x304fa2)break;else _0x242995['push'](_0x242995['shift']());}catch(_0x45afd8){_0x242995['push'](_0x242995['shift']());}}}(a0_0x2f15,0xaecaf));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x34716e(0x86)),auth=require('../middleware/auth'),users=require(a0_0x34716e(0xb7));router[a0_0x34716e(0xd4)](a0_0x34716e(0xab),auth,async(_0x3c6ae4,_0x4fabc7)=>{var _0x417d0a=a0_0x34716e;try{const {username:_0x29f8d2,email:_0x5f3084,role:_0x2e48ce}=_0x3c6ae4['user'],_0x252c9c=_0x3c6ae4[_0x417d0a(0xb0)],_0x37e535=await profile[_0x417d0a(0x7d)]({'email':_0x252c9c[_0x417d0a(0x88)]}),_0x47d7ba=await master_shop[_0x417d0a(0x94)](),_0x2d08c3=await sales_return_finished[_0x417d0a(0xaf)]([{'$lookup':{'from':'customers','localField':_0x417d0a(0x70),'foreignField':'name','as':_0x417d0a(0x68)}},{'$unwind':'$customer_docs'}]);if(_0x47d7ba[0x0][_0x417d0a(0xa4)]==_0x417d0a(0x79)){var _0x11a393=users[_0x417d0a(0xbd)];console[_0x417d0a(0x6d)](_0x11a393);}else{if(_0x47d7ba[0x0][_0x417d0a(0xa4)]=='Hindi')var _0x11a393=users[_0x417d0a(0x8b)];else{if(_0x47d7ba[0x0][_0x417d0a(0xa4)]==_0x417d0a(0xc9))var _0x11a393=users[_0x417d0a(0xc9)];else{if(_0x47d7ba[0x0][_0x417d0a(0xa4)]==_0x417d0a(0x8e))var _0x11a393=users['Spanish'];else{if(_0x47d7ba[0x0]['language']==_0x417d0a(0x69))var _0x11a393=users[_0x417d0a(0x69)];else{if(_0x47d7ba[0x0][_0x417d0a(0xa4)]==_0x417d0a(0xde))var _0x11a393=users[_0x417d0a(0x9a)];else{if(_0x47d7ba[0x0][_0x417d0a(0xa4)]==_0x417d0a(0x8f))var _0x11a393=users[_0x417d0a(0x8f)];else{if(_0x47d7ba[0x0][_0x417d0a(0xa4)]==_0x417d0a(0xdd))var _0x11a393=users[_0x417d0a(0x90)];}}}}}}}_0x4fabc7[_0x417d0a(0xc8)](_0x417d0a(0x97),{'success':_0x3c6ae4['flash'](_0x417d0a(0xc1)),'errors':_0x3c6ae4[_0x417d0a(0x9f)](_0x417d0a(0xc3)),'role':_0x252c9c,'profile':_0x37e535,'master_shop':_0x47d7ba,'user':_0x2d08c3,'language':_0x11a393});}catch(_0x51b90e){console['log'](_0x51b90e);}}),router['get'](a0_0x34716e(0x80),auth,async(_0x3ac3d0,_0x3357b0)=>{var _0x2f5d72=a0_0x34716e;try{const {username:_0x1480cc,email:_0x13e85d,role:_0x54c6e7}=_0x3ac3d0[_0x2f5d72(0xb0)],_0x1d78d3=_0x3ac3d0[_0x2f5d72(0xb0)],_0x42bb09=await profile[_0x2f5d72(0x7d)]({'email':_0x1d78d3[_0x2f5d72(0x88)]}),_0x3e26db=await master_shop[_0x2f5d72(0x94)]();console[_0x2f5d72(0x6d)](_0x2f5d72(0xc2),_0x3e26db);const _0x4ac823=_0x3ac3d0[_0x2f5d72(0xae)]['id'];console[_0x2f5d72(0x6d)](_0x4ac823);var _0x71a06d=[_0x2f5d72(0xd0)];const _0x21d2f6=await sales_return_finished[_0x2f5d72(0xad)](_0x4ac823),_0x5793c0=await warehouse['aggregate']([{'$match':{'name':_0x21d2f6[_0x2f5d72(0x91)],'room':_0x21d2f6[_0x2f5d72(0xac)]}},{'$unwind':_0x2f5d72(0xcb)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x2f5d72(0xd9)},'product_stock':{'$first':_0x2f5d72(0x7c)},'bay':{'$first':_0x2f5d72(0x87)},'bin':{'$first':_0x2f5d72(0x9c)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x2f5d72(0x85)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x2f5d72(0x6e)},'storage':{'$first':_0x2f5d72(0x95)},'rack':{'$first':'$product_details.rack'}}}]);console[_0x2f5d72(0x6d)](_0x5793c0);const _0x498dc4=await warehouse[_0x2f5d72(0xaf)]([{'$match':{'status':_0x2f5d72(0xaa),'warehouse_category':_0x2f5d72(0x82)}},{'$group':{'_id':'$name','name':{'$first':_0x2f5d72(0xcd)}}},{'$sort':{'name':0x1}}]),_0x30fa14=await warehouse[_0x2f5d72(0xaf)]([{'$match':{'status':_0x2f5d72(0xaa),'name':_0x2f5d72(0xda)}},{'$group':{'_id':_0x2f5d72(0xcd),'name':{'$first':_0x2f5d72(0xcd)}}},{'$sort':{'name':0x1}}]),_0x4683d3=await product[_0x2f5d72(0x94)]({});if(_0x3e26db[0x0][_0x2f5d72(0xa4)]==_0x2f5d72(0x79)){var _0x4eafe4=users[_0x2f5d72(0xbd)];console['log'](_0x4eafe4);}else{if(_0x3e26db[0x0][_0x2f5d72(0xa4)]==_0x2f5d72(0x8b))var _0x4eafe4=users[_0x2f5d72(0x8b)];else{if(_0x3e26db[0x0]['language']==_0x2f5d72(0xc9))var _0x4eafe4=users[_0x2f5d72(0xc9)];else{if(_0x3e26db[0x0]['language']==_0x2f5d72(0x8e))var _0x4eafe4=users[_0x2f5d72(0x8e)];else{if(_0x3e26db[0x0][_0x2f5d72(0xa4)]==_0x2f5d72(0x69))var _0x4eafe4=users[_0x2f5d72(0x69)];else{if(_0x3e26db[0x0]['language']==_0x2f5d72(0xde))var _0x4eafe4=users[_0x2f5d72(0x9a)];else{if(_0x3e26db[0x0][_0x2f5d72(0xa4)]==_0x2f5d72(0x8f))var _0x4eafe4=users['Chinese'];else{if(_0x3e26db[0x0][_0x2f5d72(0xa4)]=='Arabic\x20(ae)')var _0x4eafe4=users[_0x2f5d72(0x90)];}}}}}}}_0x3357b0[_0x2f5d72(0xc8)](_0x2f5d72(0x81),{'success':_0x3ac3d0[_0x2f5d72(0x9f)]('success'),'errors':_0x3ac3d0[_0x2f5d72(0x9f)](_0x2f5d72(0xc3)),'role':_0x1d78d3,'profile':_0x42bb09,'master_shop':_0x3e26db,'user':_0x21d2f6,'stock':_0x5793c0,'unit':_0x4683d3,'language':_0x4eafe4,'warehouses':_0x498dc4,'rooms':_0x71a06d,'warehouse_QA':_0x30fa14});}catch(_0x3ebb15){console[_0x2f5d72(0x6d)](_0x3ebb15);}}),router['post']('/view/:id',auth,async(_0x166abe,_0x263839)=>{var _0x5bb47b=a0_0x34716e;if(_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x6a)]=='QA')try{const _0x354f02=_0x166abe[_0x5bb47b(0xae)]['id'],_0x16a27f=await sales_return[_0x5bb47b(0x7d)]({'invoice':_0x166abe[_0x5bb47b(0xa3)]['invoice']}),_0x39d40d=await warehouse[_0x5bb47b(0x7d)]({'name':_0x16a27f[_0x5bb47b(0x91)],'room':_0x16a27f['ToRoom']}),{invoice:_0x367fba,customer:_0x34152e,date:_0x53dfcf,warehouse_name:_0x30e6dc,product_name:_0x490cbf,primary_code:_0x496331,secondary_code:_0x3b80b6,product_code:_0x3f49a0,sales_quantity:_0x240aac,stocks:_0x647f82,return_qty:_0x5c2b2e,note:_0x8c7cf5,to_warehouse_name_QA:_0xd5f0fb,to_Room_name_QA:_0x5fce67}=_0x166abe[_0x5bb47b(0xa3)];if(typeof product_name_QA==_0x5bb47b(0xa8))var _0x322843=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x98)]],_0xb10b7=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xb4)]],_0x1a66de=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xbc)]],_0x5743b0=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x92)]],_0x4df5f9=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x6f)]],_0x5ee98b=[_0x166abe['body']['stocks_QA']],_0x406b08=[_0x166abe['body'][_0x5bb47b(0x83)]];else var _0x322843=[..._0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x98)]],_0xb10b7=[..._0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xb4)]],_0x1a66de=[..._0x166abe[_0x5bb47b(0xa3)]['secondary_code_QA']],_0x5743b0=[..._0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x92)]],_0x4df5f9=[..._0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x6f)]],_0x5ee98b=[..._0x166abe[_0x5bb47b(0xa3)]['stocks_QA']],_0x406b08=[..._0x166abe['body']['return_qty_QA']];const _0x33c4e5=_0x322843[_0x5bb47b(0xb3)](_0xd70f26=>{return _0xd70f26={'product_name':_0xd70f26};});_0xb10b7[_0x5bb47b(0x78)]((_0x4a8ecc,_0x4b3c10)=>{var _0x27a8dc=_0x5bb47b;_0x33c4e5[_0x4b3c10][_0x27a8dc(0xa0)]=_0x4a8ecc;}),_0x1a66de[_0x5bb47b(0x78)]((_0x119245,_0x20098a)=>{var _0x4fd01c=_0x5bb47b;_0x33c4e5[_0x20098a][_0x4fd01c(0x93)]=_0x119245;}),_0x5743b0[_0x5bb47b(0x78)]((_0x5ed879,_0x594ade)=>{_0x33c4e5[_0x594ade]['product_code']=_0x5ed879;}),_0x4df5f9[_0x5bb47b(0x78)]((_0x14dcaa,_0x3a2960)=>{var _0x2a9e6f=_0x5bb47b;_0x33c4e5[_0x3a2960][_0x2a9e6f(0x76)]=_0x14dcaa;}),_0x5ee98b[_0x5bb47b(0x78)]((_0x28b1f9,_0x53047e)=>{var _0x2773b4=_0x5bb47b;_0x33c4e5[_0x53047e][_0x2773b4(0xa7)]=_0x28b1f9;}),_0x406b08[_0x5bb47b(0x78)]((_0x438c66,_0x219c6e)=>{var _0x1d11f4=_0x5bb47b;_0x33c4e5[_0x219c6e][_0x1d11f4(0xd1)]=_0x438c66;}),_0x16a27f[_0x5bb47b(0xce)]['forEach'](_0x4aaba4=>{var _0x32f7c1=_0x5bb47b;const _0x46390f=_0x39d40d[_0x32f7c1(0x71)]['map'](_0x5d3b6b=>{var _0x502eb5=_0x32f7c1;_0x5d3b6b[_0x502eb5(0x99)]==_0x4aaba4[_0x502eb5(0x99)]&&(_0x5d3b6b[_0x502eb5(0xb5)]=parseInt(_0x5d3b6b[_0x502eb5(0xb5)])+parseInt(_0x4aaba4[_0x502eb5(0xd1)]));});}),await _0x39d40d[_0x5bb47b(0x96)](),_0x16a27f[_0x5bb47b(0xc4)]=_0x367fba,_0x16a27f[_0x5bb47b(0x70)]=_0x34152e,_0x16a27f[_0x5bb47b(0x9d)]=_0x53dfcf,_0x16a27f['warehouse_name']=_0x30e6dc,_0x16a27f['return_sale_QA']=_0x33c4e5,_0x16a27f[_0x5bb47b(0x72)]=_0x8c7cf5,_0x16a27f[_0x5bb47b(0x91)]=_0xd5f0fb,_0x16a27f[_0x5bb47b(0xac)]=_0x5fce67;const _0x156ceb=await _0x16a27f['save'](),_0x377be4=await c_payment_data[_0x5bb47b(0x7d)]({'invoice':_0x166abe[_0x5bb47b(0xa3)]['invoice'],'reason':_0x5bb47b(0x9e)});_0x377be4[_0x5bb47b(0x6c)]=_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x6c)],_0x377be4[_0x5bb47b(0x9d)]=_0x166abe[_0x5bb47b(0xa3)]['date'],await _0x377be4['save'](),_0x166abe[_0x5bb47b(0x9f)](_0x5bb47b(0xc1),_0x5bb47b(0x7f)),_0x263839[_0x5bb47b(0x73)](_0x5bb47b(0xb9));}catch(_0x4f454b){console[_0x5bb47b(0x6d)](_0x4f454b),_0x263839[_0x5bb47b(0x84)](0xc8)[_0x5bb47b(0x75)]({'message':_0x4f454b[_0x5bb47b(0x89)]});}else try{const _0x518f45=_0x166abe[_0x5bb47b(0xae)]['id'];console[_0x5bb47b(0x6d)](_0x518f45);const _0x2fca84=await sales_return[_0x5bb47b(0x7d)]({'invoice':_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xc4)]});console[_0x5bb47b(0x6d)](_0x5bb47b(0xbe),_0x2fca84);const _0x5827d3=await warehouse[_0x5bb47b(0x7d)]({'name':_0x2fca84[_0x5bb47b(0x91)],'room':_0x2fca84[_0x5bb47b(0xac)]});console['log'](_0x5bb47b(0xa2),_0x5827d3);const {invoice:_0x1c6b73,customer:_0x4ed915,date:_0x48eb95,warehouse_name:_0x59307b,product_name:_0x272e5f,primary_code:_0x2720e4,secondary_code:_0x45755b,product_code:_0x4333b8,sales_quantity:_0x1e6b73,stocks:_0xbf1c0f,return_qty:_0x5b2dcc,note:_0x3ba36f,to_warehouse_name:_0x4c9190,to_Room_name:_0x539e93}=_0x166abe[_0x5bb47b(0xa3)];console[_0x5bb47b(0x6d)](_0x166abe['body']);if(typeof _0x272e5f==_0x5bb47b(0xa8))var _0x322843=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x99)]],_0xb10b7=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xa0)]],_0x1a66de=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x93)]],_0x5743b0=[_0x166abe['body'][_0x5bb47b(0xbb)]],_0x4df5f9=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xcc)]],_0x5ee98b=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xa1)]],_0x406b08=[_0x166abe[_0x5bb47b(0xa3)]['return_qty']],_0xc4a8f1=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xba)]],_0x195344=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x77)]],_0x13e2ab=[_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x7b)]],_0x40205b=[_0x166abe[_0x5bb47b(0xa3)]['floorlevel']];else var _0x322843=[..._0x166abe[_0x5bb47b(0xa3)]['product_name']],_0xb10b7=[..._0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xa0)]],_0x1a66de=[..._0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x93)]],_0x5743b0=[..._0x166abe[_0x5bb47b(0xa3)]['product_code']],_0x4df5f9=[..._0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xcc)]],_0x5ee98b=[..._0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xa1)]],_0x406b08=[..._0x166abe['body'][_0x5bb47b(0xd1)]],_0xc4a8f1=[..._0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xba)]],_0x195344=[..._0x166abe['body'][_0x5bb47b(0x77)]],_0x13e2ab=[..._0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x7b)]],_0x40205b=[..._0x166abe['body'][_0x5bb47b(0x67)]];const _0x5a35ff=_0x322843[_0x5bb47b(0xb3)](_0x4ed025=>{return _0x4ed025={'product_name':_0x4ed025};});_0xb10b7['forEach']((_0xc01b91,_0x2e3597)=>{_0x5a35ff[_0x2e3597]['primary_code']=_0xc01b91;}),_0x1a66de[_0x5bb47b(0x78)]((_0x15e001,_0x32a402)=>{var _0x54e23f=_0x5bb47b;_0x5a35ff[_0x32a402][_0x54e23f(0x93)]=_0x15e001;}),_0x5743b0['forEach']((_0x534329,_0x27acfb)=>{var _0x4d3354=_0x5bb47b;_0x5a35ff[_0x27acfb][_0x4d3354(0xbb)]=_0x534329;}),_0x4df5f9['forEach']((_0x3526f7,_0xb2f8c7)=>{var _0x2c5f57=_0x5bb47b;_0x5a35ff[_0xb2f8c7][_0x2c5f57(0x76)]=_0x3526f7;}),_0x5ee98b['forEach']((_0x242f50,_0x52fa1a)=>{var _0x567d32=_0x5bb47b;_0x5a35ff[_0x52fa1a][_0x567d32(0xa7)]=_0x242f50;}),_0x406b08[_0x5bb47b(0x78)]((_0xf8fbd2,_0x5934a2)=>{_0x5a35ff[_0x5934a2]['return_qty']=_0xf8fbd2;}),_0xc4a8f1[_0x5bb47b(0x78)]((_0x590486,_0x3e7475)=>{var _0x4eea46=_0x5bb47b;_0x5a35ff[_0x3e7475][_0x4eea46(0xba)]=_0x590486;}),_0x195344['forEach']((_0x4bdfce,_0x20486d)=>{var _0xdc9e5c=_0x5bb47b;_0x5a35ff[_0x20486d][_0xdc9e5c(0x77)]=_0x4bdfce;}),_0x13e2ab[_0x5bb47b(0x78)]((_0x35ba12,_0x11358d)=>{var _0x21d3e7=_0x5bb47b;_0x5a35ff[_0x11358d][_0x21d3e7(0x74)]=_0x35ba12;}),_0x40205b['forEach']((_0x10cb9e,_0xe18af0)=>{var _0x5a7658=_0x5bb47b;_0x5a35ff[_0xe18af0][_0x5a7658(0x67)]=_0x10cb9e;});var _0x46746c=0x0;_0x5a35ff['forEach'](_0x2cb49d=>{var _0x403fd6=_0x5bb47b;console['log'](_0x403fd6(0xc7),_0x2cb49d),(parseInt(_0x2cb49d[_0x403fd6(0x76)])<parseInt(_0x2cb49d['return_qty'])||parseInt(_0x2cb49d[_0x403fd6(0xa7)])<parseInt(_0x2cb49d['return_qty'])&&parseInt(_0x2cb49d[_0x403fd6(0x76)])>parseInt(_0x2cb49d[_0x403fd6(0xd1)])||parseInt(_0x2cb49d[_0x403fd6(0xd1)])==0x0)&&_0x46746c++;});if(_0x46746c!=0x0)return _0x166abe[_0x5bb47b(0x9f)](_0x5bb47b(0xc3),_0x5bb47b(0xa6)),_0x263839[_0x5bb47b(0x73)](_0x5bb47b(0xb1));_0x2fca84[_0x5bb47b(0xdc)][_0x5bb47b(0x78)](_0x40e2fc=>{var _0x46f888=_0x5bb47b;const _0x214335=_0x5827d3[_0x46f888(0x71)][_0x46f888(0xb3)](_0x4a2127=>{var _0x219e7f=_0x46f888;_0x4a2127[_0x219e7f(0x99)]==_0x40e2fc[_0x219e7f(0x99)]&&_0x4a2127[_0x219e7f(0x67)]==_0x40e2fc[_0x219e7f(0x67)]&&_0x4a2127['type']==_0x40e2fc[_0x219e7f(0x74)]&&_0x4a2127[_0x219e7f(0x77)]==_0x40e2fc['bin']&&_0x4a2127[_0x219e7f(0xba)]==_0x40e2fc['bay']&&(_0x4a2127[_0x219e7f(0xb5)]=parseInt(_0x4a2127['product_stock'])+parseInt(_0x40e2fc[_0x219e7f(0xd1)]));});}),console[_0x5bb47b(0x6d)](_0x5bb47b(0xa2),_0x5827d3),await _0x5827d3[_0x5bb47b(0x96)](),_0x2fca84[_0x5bb47b(0xc4)]=_0x1c6b73,_0x2fca84[_0x5bb47b(0x70)]=_0x4ed915,_0x2fca84[_0x5bb47b(0x9d)]=_0x48eb95,_0x2fca84[_0x5bb47b(0xc6)]=_0x59307b,_0x2fca84[_0x5bb47b(0xdc)]=_0x5a35ff,_0x2fca84['note']=_0x3ba36f,_0x2fca84[_0x5bb47b(0x91)]=_0x4c9190,_0x2fca84['ToRoom']=_0x539e93;const _0x38d27c=await _0x2fca84[_0x5bb47b(0x96)]();console[_0x5bb47b(0x6d)]('new\x20new_data',_0x38d27c);const _0xe62090=await c_payment_data[_0x5bb47b(0x7d)]({'invoice':_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0xc4)],'reason':_0x5bb47b(0x9e)});_0xe62090['suppliers']=_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x6c)],_0xe62090[_0x5bb47b(0x9d)]=_0x166abe[_0x5bb47b(0xa3)][_0x5bb47b(0x9d)],await _0xe62090[_0x5bb47b(0x96)](),_0x166abe['flash'](_0x5bb47b(0xc1),_0x5bb47b(0x7f)),_0x263839[_0x5bb47b(0x73)]('/sales_return/view');}catch(_0x5bf16b){console[_0x5bb47b(0x6d)](_0x5bf16b),_0x263839[_0x5bb47b(0x84)](0xc8)[_0x5bb47b(0x75)]({'message':_0x5bf16b['message']});}}),router[a0_0x34716e(0xa9)](a0_0x34716e(0xbf),auth,async(_0x3b4e3e,_0x2a6e25)=>{var _0x3d7856=a0_0x34716e;try{const _0x3245d8=_0x3b4e3e[_0x3d7856(0xae)]['id'],{invoice:_0x7f8cda,customer:_0x2551a9,payable_to_customer:_0x1aeaf2,paid_amount:_0x6fe2fd}=_0x3b4e3e['body'],_0x3f00a3=await sales_return['findById'](_0x3245d8);console[_0x3d7856(0x6d)](_0x3d7856(0x6b),_0x3f00a3),console[_0x3d7856(0x6d)](_0x1aeaf2),console[_0x3d7856(0x6d)](_0x6fe2fd);var _0x522f24=_0x1aeaf2-_0x6fe2fd;console[_0x3d7856(0x6d)](_0x3d7856(0xd6),_0x522f24),_0x3f00a3[_0x3d7856(0xb8)]=parseFloat(_0x6fe2fd)+parseFloat(_0x3f00a3[_0x3d7856(0xb8)]),_0x3f00a3[_0x3d7856(0x8d)]=_0x522f24,console['log'](_0x3f00a3);const _0x4a0209=await _0x3f00a3[_0x3d7856(0x96)]();console[_0x3d7856(0x6d)](0x1b207);const _0x272cf9=await c_payment_data[_0x3d7856(0x7d)]({'invoice':_0x3b4e3e[_0x3d7856(0xa3)]['invoice'],'reason':'Sale\x20Return'});console[_0x3d7856(0x6d)](_0x3d7856(0xa5),_0x272cf9),_0x272cf9[_0x3d7856(0xd2)]=_0x522f24,await _0x272cf9[_0x3d7856(0x96)]();let _0x5c3fa2=new Date(),_0x54b3e0=('0'+_0x5c3fa2['getDate']())[_0x3d7856(0xd3)](-0x2),_0x1db95a=('0'+(_0x5c3fa2['getMonth']()+0x1))[_0x3d7856(0xd3)](-0x2),_0x3637f1=_0x5c3fa2[_0x3d7856(0x66)](),_0x5617c5=_0x3637f1+'-'+_0x1db95a+'-'+_0x54b3e0;const _0x3cf9b8=new customer_payment({'invoice':_0x7f8cda,'date':_0x3637f1+'-'+_0x1db95a+'-'+_0x54b3e0,'customer':_0x2551a9,'reason':_0x3d7856(0x8a),'amount':_0x6fe2fd}),_0x5df9d8=await _0x3cf9b8[_0x3d7856(0x96)]();_0x3b4e3e[_0x3d7856(0x9f)](_0x3d7856(0xc1),_0x3d7856(0xcf)),_0x2a6e25['redirect']('/sales_return/view');}catch(_0x57ab7e){console[_0x3d7856(0x6d)](_0x57ab7e);}}),router[a0_0x34716e(0xd4)](a0_0x34716e(0xd7),auth,async(_0x2744c8,_0x36cb7b)=>{var _0x12b5a5=a0_0x34716e;try{const {username:_0x1e4685,email:_0x5bfdf1,role:_0x40e7a2}=_0x2744c8['user'],_0x3f5f4a=_0x2744c8[_0x12b5a5(0xb0)],_0x315ac4=await profile[_0x12b5a5(0x7d)]({'email':_0x3f5f4a[_0x12b5a5(0x88)]}),_0x3b6e7f=await master_shop[_0x12b5a5(0x94)]();console[_0x12b5a5(0x6d)](_0x12b5a5(0xc2),_0x3b6e7f);const _0x1dedfe=_0x2744c8[_0x12b5a5(0xae)]['id'],_0xc2b3b4=await sales_return['findById'](_0x1dedfe);console[_0x12b5a5(0x6d)](_0xc2b3b4);const _0x45952b=await customer[_0x12b5a5(0x7d)]({'name':_0xc2b3b4['customer']});console['log'](_0x45952b);if(_0x3b6e7f[0x0][_0x12b5a5(0xa4)]==_0x12b5a5(0x79)){var _0x52c90f=users['English'];console[_0x12b5a5(0x6d)](_0x52c90f);}else{if(_0x3b6e7f[0x0][_0x12b5a5(0xa4)]==_0x12b5a5(0x8b))var _0x52c90f=users[_0x12b5a5(0x8b)];else{if(_0x3b6e7f[0x0]['language']==_0x12b5a5(0xc9))var _0x52c90f=users[_0x12b5a5(0xc9)];else{if(_0x3b6e7f[0x0][_0x12b5a5(0xa4)]=='Spanish')var _0x52c90f=users[_0x12b5a5(0x8e)];else{if(_0x3b6e7f[0x0]['language']==_0x12b5a5(0x69))var _0x52c90f=users[_0x12b5a5(0x69)];else{if(_0x3b6e7f[0x0][_0x12b5a5(0xa4)]==_0x12b5a5(0xde))var _0x52c90f=users[_0x12b5a5(0x9a)];else{if(_0x3b6e7f[0x0][_0x12b5a5(0xa4)]==_0x12b5a5(0x8f))var _0x52c90f=users[_0x12b5a5(0x8f)];else{if(_0x3b6e7f[0x0]['language']==_0x12b5a5(0xdd))var _0x52c90f=users[_0x12b5a5(0x90)];}}}}}}}_0x36cb7b[_0x12b5a5(0xc8)](_0x12b5a5(0x9b),{'success':_0x2744c8['flash'](_0x12b5a5(0xc1)),'errors':_0x2744c8['flash'](_0x12b5a5(0xc3)),'role':_0x3f5f4a,'profile':_0x315ac4,'master_shop':_0x3b6e7f,'customers':_0x45952b,'sales':_0xc2b3b4,'language':_0x52c90f});}catch(_0x189f35){console[_0x12b5a5(0x6d)](_0x189f35);}}),module[a0_0x34716e(0xd8)]=router;