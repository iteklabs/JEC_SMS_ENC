var a0_0x20e425=a0_0x58aa;(function(_0x569ef0,_0x46956f){var _0x1d5920=a0_0x58aa,_0x1e5a03=_0x569ef0();while(!![]){try{var _0x4d9861=-parseInt(_0x1d5920(0xfa))/0x1+parseInt(_0x1d5920(0x11b))/0x2*(parseInt(_0x1d5920(0xab))/0x3)+parseInt(_0x1d5920(0xd0))/0x4*(parseInt(_0x1d5920(0xf4))/0x5)+-parseInt(_0x1d5920(0xad))/0x6*(-parseInt(_0x1d5920(0x112))/0x7)+parseInt(_0x1d5920(0xb0))/0x8*(parseInt(_0x1d5920(0xe3))/0x9)+-parseInt(_0x1d5920(0xc8))/0xa+parseInt(_0x1d5920(0x102))/0xb;if(_0x4d9861===_0x46956f)break;else _0x1e5a03['push'](_0x1e5a03['shift']());}catch(_0xc696b1){_0x1e5a03['push'](_0x1e5a03['shift']());}}}(a0_0xcb7b,0xa7014));const express=require(a0_0x20e425(0x125)),app=express(),router=express[a0_0x20e425(0xac)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x20e425(0x122)),auth=require(a0_0x20e425(0xd5)),users=require(a0_0x20e425(0xb1));function a0_0x58aa(_0x3962dc,_0x53d6c3){var _0xcb7b6b=a0_0xcb7b();return a0_0x58aa=function(_0x58aab2,_0xaee9e6){_0x58aab2=_0x58aab2-0xa9;var _0x262258=_0xcb7b6b[_0x58aab2];return _0x262258;},a0_0x58aa(_0x3962dc,_0x53d6c3);}function a0_0xcb7b(){var _0x39ffb7=['render','2354955aUsWKG','secondary_code','floorlevel','master','Finished\x20Goods','return_sale_edit_finished','920648hzeoIz','params','find','string','c_payment','exports','findOne','/invoice/:id','15293322lzPRtr','$product_details.primary_code','sales_return_invoice','/sales_return/view','get','product_name','name','English\x20(US)','stock','primary_code','foreach\x20newproduct','return_sale_QA','$product_details.product_stock','Hindi','bin','warehouse_name','598948mUwSQE','email','bay','secondary_code_QA','type','errors','slice','success','language','30OAUBus','save','getFullYear','ToRoom','suppliers','sales_quantity_QA','getMonth','../models/all_models','redirect','map','express','French','/view/:id','$product_details._id','48903KtrzYr','Router','12zCVioO','Enabled','Portuguese','1896iwLABs','../public/language/languages.json','sales_quantity','primary_code_QA','Portuguese\x20(BR)','subtract','product_code_QA','Chinese','$product_details.product_name','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','$product_details.storage','$customer_docs','flash','payment\x20successfull','post','return_qty','return_qty_QA','/sales_return_finished/view','/give_payment/:id','message','$product_details.type','Return\x20Rooms','$name','stocks_QA','7274570BCdccU','status','Arabic','product_code','forEach','product_name_QA','$product_details.product_code','getDate','4mIXvhb','Arabic\x20(ae)','$product_details.floorlevel','customer','product_stock','../middleware/auth','user','findById','English','due_amount','types','paid_amount','Spanish','body','purchase\x20return\x20successfully','German','invoice','old_data','return_sale','2097xQKtGg','QA\x20Warehouse','$product_details','ToWarehouse','old_warehouse_data','sale_qty','product_details','aggregate','date','json','Sale\x20Return','data','log','$product_details.secondary_code','customer_docs','customers'];a0_0xcb7b=function(){return _0x39ffb7;};return a0_0xcb7b();}router[a0_0x20e425(0x106)]('/view',auth,async(_0xb846c5,_0x3833ad)=>{var _0x2ab433=a0_0x20e425;try{const {username:_0x3cef52,email:_0x22e28e,role:_0xfd5837}=_0xb846c5[_0x2ab433(0xd6)],_0x4f6e34=_0xb846c5[_0x2ab433(0xd6)],_0x53548e=await profile['findOne']({'email':_0x4f6e34[_0x2ab433(0x113)]}),_0x194910=await master_shop['find'](),_0x321f01=await sales_return_finished[_0x2ab433(0xea)]([{'$lookup':{'from':_0x2ab433(0xf2),'localField':_0x2ab433(0xd3),'foreignField':_0x2ab433(0x108),'as':_0x2ab433(0xf1)}},{'$unwind':_0x2ab433(0xbb)}]);if(_0x194910[0x0][_0x2ab433(0x11a)]==_0x2ab433(0x109)){var _0x1cfb2d=users[_0x2ab433(0xd8)];console['log'](_0x1cfb2d);}else{if(_0x194910[0x0]['language']==_0x2ab433(0x10f))var _0x1cfb2d=users[_0x2ab433(0x10f)];else{if(_0x194910[0x0][_0x2ab433(0x11a)]==_0x2ab433(0xdf))var _0x1cfb2d=users[_0x2ab433(0xdf)];else{if(_0x194910[0x0][_0x2ab433(0x11a)]==_0x2ab433(0xdc))var _0x1cfb2d=users['Spanish'];else{if(_0x194910[0x0][_0x2ab433(0x11a)]==_0x2ab433(0x126))var _0x1cfb2d=users[_0x2ab433(0x126)];else{if(_0x194910[0x0][_0x2ab433(0x11a)]==_0x2ab433(0xb4))var _0x1cfb2d=users[_0x2ab433(0xaf)];else{if(_0x194910[0x0][_0x2ab433(0x11a)]==_0x2ab433(0xb7))var _0x1cfb2d=users['Chinese'];else{if(_0x194910[0x0][_0x2ab433(0x11a)]==_0x2ab433(0xd1))var _0x1cfb2d=users['Arabic'];}}}}}}}_0x3833ad[_0x2ab433(0xf3)]('sales_return_finished',{'success':_0xb846c5[_0x2ab433(0xbc)](_0x2ab433(0x119)),'errors':_0xb846c5['flash']('errors'),'role':_0x4f6e34,'profile':_0x53548e,'master_shop':_0x194910,'user':_0x321f01,'language':_0x1cfb2d});}catch(_0x3c0482){console[_0x2ab433(0xef)](_0x3c0482);}}),router[a0_0x20e425(0x106)](a0_0x20e425(0xa9),auth,async(_0x543a48,_0x3b7a37)=>{var _0x33dad9=a0_0x20e425;try{const {username:_0x2b7d5d,email:_0x352433,role:_0x1aa2df}=_0x543a48['user'],_0x227591=_0x543a48[_0x33dad9(0xd6)],_0x7bbc24=await profile[_0x33dad9(0x100)]({'email':_0x227591[_0x33dad9(0x113)]}),_0x7b62bf=await master_shop[_0x33dad9(0xfc)]();console[_0x33dad9(0xef)](_0x33dad9(0xf7),_0x7b62bf);const _0x1d0763=_0x543a48[_0x33dad9(0xfb)]['id'];console[_0x33dad9(0xef)](_0x1d0763);var _0x752e92=[_0x33dad9(0xc5)];const _0x1e1f8d=await sales_return_finished[_0x33dad9(0xd7)](_0x1d0763),_0x9177e2=await warehouse[_0x33dad9(0xea)]([{'$match':{'name':_0x1e1f8d[_0x33dad9(0xe6)],'room':_0x1e1f8d[_0x33dad9(0x11e)]}},{'$unwind':_0x33dad9(0xe5)},{'$group':{'_id':_0x33dad9(0xaa),'name':{'$first':_0x33dad9(0xb8)},'product_stock':{'$first':_0x33dad9(0x10e)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x33dad9(0xc4)},'floorlevel':{'$first':_0x33dad9(0xd2)},'primary_code':{'$first':_0x33dad9(0x103)},'secondary_code':{'$first':_0x33dad9(0xf0)},'product_code':{'$first':_0x33dad9(0xce)},'storage':{'$first':_0x33dad9(0xba)},'rack':{'$first':'$product_details.rack'}}}]);console[_0x33dad9(0xef)](_0x9177e2);const _0x564821=await warehouse[_0x33dad9(0xea)]([{'$match':{'status':'Enabled','warehouse_category':_0x33dad9(0xf8)}},{'$group':{'_id':_0x33dad9(0xc6),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x361a1d=await warehouse[_0x33dad9(0xea)]([{'$match':{'status':_0x33dad9(0xae),'name':_0x33dad9(0xe4)}},{'$group':{'_id':_0x33dad9(0xc6),'name':{'$first':_0x33dad9(0xc6)}}},{'$sort':{'name':0x1}}]),_0xba9f7f=await product['find']({});if(_0x7b62bf[0x0][_0x33dad9(0x11a)]==_0x33dad9(0x109)){var _0x2d10c6=users[_0x33dad9(0xd8)];console[_0x33dad9(0xef)](_0x2d10c6);}else{if(_0x7b62bf[0x0][_0x33dad9(0x11a)]==_0x33dad9(0x10f))var _0x2d10c6=users[_0x33dad9(0x10f)];else{if(_0x7b62bf[0x0][_0x33dad9(0x11a)]==_0x33dad9(0xdf))var _0x2d10c6=users[_0x33dad9(0xdf)];else{if(_0x7b62bf[0x0]['language']==_0x33dad9(0xdc))var _0x2d10c6=users[_0x33dad9(0xdc)];else{if(_0x7b62bf[0x0][_0x33dad9(0x11a)]==_0x33dad9(0x126))var _0x2d10c6=users[_0x33dad9(0x126)];else{if(_0x7b62bf[0x0]['language']=='Portuguese\x20(BR)')var _0x2d10c6=users[_0x33dad9(0xaf)];else{if(_0x7b62bf[0x0]['language']=='Chinese')var _0x2d10c6=users['Chinese'];else{if(_0x7b62bf[0x0][_0x33dad9(0x11a)]==_0x33dad9(0xd1))var _0x2d10c6=users[_0x33dad9(0xca)];}}}}}}}_0x3b7a37['render'](_0x33dad9(0xf9),{'success':_0x543a48[_0x33dad9(0xbc)]('success'),'errors':_0x543a48[_0x33dad9(0xbc)]('errors'),'role':_0x227591,'profile':_0x7bbc24,'master_shop':_0x7b62bf,'user':_0x1e1f8d,'stock':_0x9177e2,'unit':_0xba9f7f,'language':_0x2d10c6,'warehouses':_0x564821,'rooms':_0x752e92,'warehouse_QA':_0x361a1d});}catch(_0x16ae17){console[_0x33dad9(0xef)](_0x16ae17);}}),router[a0_0x20e425(0xbe)](a0_0x20e425(0xa9),auth,async(_0x2b1ec5,_0x4013d1)=>{var _0x1ba00c=a0_0x20e425;if(_0x2b1ec5['body']['for_categorize']=='QA')try{const _0x5e3f36=_0x2b1ec5[_0x1ba00c(0xfb)]['id'],_0x2414df=await sales_return[_0x1ba00c(0x100)]({'invoice':_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0xe0)]}),_0x3ed955=await warehouse[_0x1ba00c(0x100)]({'name':_0x2414df[_0x1ba00c(0xe6)],'room':_0x2414df[_0x1ba00c(0x11e)]}),{invoice:_0x464629,customer:_0x508849,date:_0x25d7da,warehouse_name:_0x11fe00,product_name:_0x19d876,primary_code:_0x4dc336,secondary_code:_0x5ce98a,product_code:_0x3f922a,sales_quantity:_0x4bd043,stocks:_0x16cd8e,return_qty:_0x557fc7,note:_0x2d1b0e,to_warehouse_name_QA:_0x14793c,to_Room_name_QA:_0x499b31}=_0x2b1ec5[_0x1ba00c(0xdd)];if(typeof product_name_QA==_0x1ba00c(0xfd))var _0x581d60=[_0x2b1ec5['body'][_0x1ba00c(0xcd)]],_0x59c7de=[_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0xb3)]],_0xe72ca0=[_0x2b1ec5['body']['secondary_code_QA']],_0x3fd534=[_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0xb6)]],_0x39ce65=[_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0x120)]],_0x40e5c5=[_0x2b1ec5[_0x1ba00c(0xdd)]['stocks_QA']],_0x7a25b9=[_0x2b1ec5['body'][_0x1ba00c(0xc0)]];else var _0x581d60=[..._0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0xcd)]],_0x59c7de=[..._0x2b1ec5[_0x1ba00c(0xdd)]['primary_code_QA']],_0xe72ca0=[..._0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0x115)]],_0x3fd534=[..._0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0xb6)]],_0x39ce65=[..._0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0x120)]],_0x40e5c5=[..._0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0xc7)]],_0x7a25b9=[..._0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0xc0)]];const _0x4fec16=_0x581d60[_0x1ba00c(0x124)](_0x5b4d77=>{return _0x5b4d77={'product_name':_0x5b4d77};});_0x59c7de[_0x1ba00c(0xcc)]((_0x25c880,_0xbcc407)=>{var _0x3413cf=_0x1ba00c;_0x4fec16[_0xbcc407][_0x3413cf(0x10b)]=_0x25c880;}),_0xe72ca0[_0x1ba00c(0xcc)]((_0x36106a,_0x5d7eb6)=>{var _0x3de35c=_0x1ba00c;_0x4fec16[_0x5d7eb6][_0x3de35c(0xf5)]=_0x36106a;}),_0x3fd534['forEach']((_0x3d5092,_0x262a68)=>{var _0x44a8ee=_0x1ba00c;_0x4fec16[_0x262a68][_0x44a8ee(0xcb)]=_0x3d5092;}),_0x39ce65[_0x1ba00c(0xcc)]((_0x51881c,_0x4c14c)=>{var _0xb7742e=_0x1ba00c;_0x4fec16[_0x4c14c][_0xb7742e(0xe8)]=_0x51881c;}),_0x40e5c5['forEach']((_0x4fd537,_0x319de8)=>{var _0x12eb9b=_0x1ba00c;_0x4fec16[_0x319de8][_0x12eb9b(0x10a)]=_0x4fd537;}),_0x7a25b9[_0x1ba00c(0xcc)]((_0xfbb28f,_0x22cc52)=>{var _0x5f27a9=_0x1ba00c;_0x4fec16[_0x22cc52][_0x5f27a9(0xbf)]=_0xfbb28f;}),_0x2414df['return_sale_QA'][_0x1ba00c(0xcc)](_0x1fc904=>{var _0x326f92=_0x1ba00c;const _0x65b1f5=_0x3ed955['product_details'][_0x326f92(0x124)](_0x2d22d0=>{var _0x28ac11=_0x326f92;_0x2d22d0['product_name']==_0x1fc904['product_name']&&(_0x2d22d0[_0x28ac11(0xd4)]=parseInt(_0x2d22d0[_0x28ac11(0xd4)])+parseInt(_0x1fc904[_0x28ac11(0xbf)]));});}),await _0x3ed955['save'](),_0x2414df['invoice']=_0x464629,_0x2414df[_0x1ba00c(0xd3)]=_0x508849,_0x2414df[_0x1ba00c(0xeb)]=_0x25d7da,_0x2414df[_0x1ba00c(0x111)]=_0x11fe00,_0x2414df[_0x1ba00c(0x10d)]=_0x4fec16,_0x2414df['note']=_0x2d1b0e,_0x2414df[_0x1ba00c(0xe6)]=_0x14793c,_0x2414df[_0x1ba00c(0x11e)]=_0x499b31;const _0x26e0a7=await _0x2414df[_0x1ba00c(0x11c)](),_0x5654f6=await c_payment_data[_0x1ba00c(0x100)]({'invoice':_0x2b1ec5['body'][_0x1ba00c(0xe0)],'reason':_0x1ba00c(0xed)});_0x5654f6[_0x1ba00c(0x11f)]=_0x2b1ec5['body']['suppliers'],_0x5654f6['date']=_0x2b1ec5['body'][_0x1ba00c(0xeb)],await _0x5654f6[_0x1ba00c(0x11c)](),_0x2b1ec5[_0x1ba00c(0xbc)](_0x1ba00c(0x119),_0x1ba00c(0xde)),_0x4013d1[_0x1ba00c(0x123)](_0x1ba00c(0xc1));}catch(_0x148404){console[_0x1ba00c(0xef)](_0x148404),_0x4013d1[_0x1ba00c(0xc9)](0xc8)['json']({'message':_0x148404[_0x1ba00c(0xc3)]});}else try{const _0x4fc540=_0x2b1ec5['params']['id'];console[_0x1ba00c(0xef)](_0x4fc540);const _0x1d25c3=await sales_return[_0x1ba00c(0x100)]({'invoice':_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0xe0)]});console['log'](_0x1ba00c(0xe1),_0x1d25c3);const _0x390569=await warehouse[_0x1ba00c(0x100)]({'name':_0x1d25c3['ToWarehouse'],'room':_0x1d25c3[_0x1ba00c(0x11e)]});console[_0x1ba00c(0xef)](_0x1ba00c(0xe7),_0x390569);const {invoice:_0xdd252e,customer:_0x28b327,date:_0x548ff5,warehouse_name:_0xd9d451,product_name:_0x12ef62,primary_code:_0x5b8f09,secondary_code:_0x5339ec,product_code:_0x1385e5,sales_quantity:_0x2656f2,stocks:_0x2d6f33,return_qty:_0x434161,note:_0x452f55,to_warehouse_name:_0x5cca73,to_Room_name:_0x44d2b4}=_0x2b1ec5[_0x1ba00c(0xdd)];console[_0x1ba00c(0xef)](_0x2b1ec5['body']);if(typeof _0x12ef62=='string')var _0x581d60=[_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0x107)]],_0x59c7de=[_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0x10b)]],_0xe72ca0=[_0x2b1ec5[_0x1ba00c(0xdd)]['secondary_code']],_0x3fd534=[_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0xcb)]],_0x39ce65=[_0x2b1ec5['body'][_0x1ba00c(0xb2)]],_0x40e5c5=[_0x2b1ec5[_0x1ba00c(0xdd)]['stocks']],_0x7a25b9=[_0x2b1ec5['body'][_0x1ba00c(0xbf)]],_0x52f3bb=[_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0x114)]],_0x53ecf6=[_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0x110)]],_0x40e988=[_0x2b1ec5[_0x1ba00c(0xdd)]['types']],_0x34f411=[_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0xf6)]];else var _0x581d60=[..._0x2b1ec5['body'][_0x1ba00c(0x107)]],_0x59c7de=[..._0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0x10b)]],_0xe72ca0=[..._0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0xf5)]],_0x3fd534=[..._0x2b1ec5[_0x1ba00c(0xdd)]['product_code']],_0x39ce65=[..._0x2b1ec5['body'][_0x1ba00c(0xb2)]],_0x40e5c5=[..._0x2b1ec5['body']['stocks']],_0x7a25b9=[..._0x2b1ec5['body'][_0x1ba00c(0xbf)]],_0x52f3bb=[..._0x2b1ec5['body'][_0x1ba00c(0x114)]],_0x53ecf6=[..._0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0x110)]],_0x40e988=[..._0x2b1ec5['body'][_0x1ba00c(0xda)]],_0x34f411=[..._0x2b1ec5[_0x1ba00c(0xdd)]['floorlevel']];const _0x5c6a23=_0x581d60[_0x1ba00c(0x124)](_0x1dc598=>{return _0x1dc598={'product_name':_0x1dc598};});_0x59c7de[_0x1ba00c(0xcc)]((_0x17b687,_0x7888aa)=>{var _0x45d0ae=_0x1ba00c;_0x5c6a23[_0x7888aa][_0x45d0ae(0x10b)]=_0x17b687;}),_0xe72ca0[_0x1ba00c(0xcc)]((_0x24c968,_0xba0c01)=>{var _0x5cbe9b=_0x1ba00c;_0x5c6a23[_0xba0c01][_0x5cbe9b(0xf5)]=_0x24c968;}),_0x3fd534[_0x1ba00c(0xcc)]((_0x214531,_0x31d4ad)=>{var _0x4b1af9=_0x1ba00c;_0x5c6a23[_0x31d4ad][_0x4b1af9(0xcb)]=_0x214531;}),_0x39ce65[_0x1ba00c(0xcc)]((_0x3a90f2,_0x5be2f5)=>{_0x5c6a23[_0x5be2f5]['sale_qty']=_0x3a90f2;}),_0x40e5c5[_0x1ba00c(0xcc)]((_0x3f192e,_0x20d21f)=>{var _0x5e0cff=_0x1ba00c;_0x5c6a23[_0x20d21f][_0x5e0cff(0x10a)]=_0x3f192e;}),_0x7a25b9[_0x1ba00c(0xcc)]((_0x4169ed,_0x5215f0)=>{var _0x35fe29=_0x1ba00c;_0x5c6a23[_0x5215f0][_0x35fe29(0xbf)]=_0x4169ed;}),_0x52f3bb[_0x1ba00c(0xcc)]((_0x42b92f,_0xcd3ac)=>{var _0x251d22=_0x1ba00c;_0x5c6a23[_0xcd3ac][_0x251d22(0x114)]=_0x42b92f;}),_0x53ecf6['forEach']((_0x3c62f4,_0x4d264b)=>{_0x5c6a23[_0x4d264b]['bin']=_0x3c62f4;}),_0x40e988[_0x1ba00c(0xcc)]((_0x52ac40,_0x16637c)=>{var _0x2e7eb9=_0x1ba00c;_0x5c6a23[_0x16637c][_0x2e7eb9(0x116)]=_0x52ac40;}),_0x34f411[_0x1ba00c(0xcc)]((_0x25bd6f,_0x8d9580)=>{var _0x4a7023=_0x1ba00c;_0x5c6a23[_0x8d9580][_0x4a7023(0xf6)]=_0x25bd6f;});var _0x3e6f5a=0x0;_0x5c6a23['forEach'](_0x209dc1=>{var _0x48f181=_0x1ba00c;console[_0x48f181(0xef)](_0x48f181(0x10c),_0x209dc1),(parseInt(_0x209dc1[_0x48f181(0xe8)])<parseInt(_0x209dc1[_0x48f181(0xbf)])||parseInt(_0x209dc1[_0x48f181(0x10a)])<parseInt(_0x209dc1[_0x48f181(0xbf)])&&parseInt(_0x209dc1[_0x48f181(0xe8)])>parseInt(_0x209dc1[_0x48f181(0xbf)])||parseInt(_0x209dc1[_0x48f181(0xbf)])==0x0)&&_0x3e6f5a++;});if(_0x3e6f5a!=0x0)return _0x2b1ec5[_0x1ba00c(0xbc)](_0x1ba00c(0x117),_0x1ba00c(0xb9)),_0x4013d1[_0x1ba00c(0x123)]('back');_0x1d25c3['return_sale']['forEach'](_0x2e1361=>{var _0x2fd66a=_0x1ba00c;const _0x5bef7a=_0x390569[_0x2fd66a(0xe9)][_0x2fd66a(0x124)](_0x450fda=>{var _0x4fa876=_0x2fd66a;_0x450fda[_0x4fa876(0x107)]==_0x2e1361[_0x4fa876(0x107)]&&_0x450fda[_0x4fa876(0xf6)]==_0x2e1361[_0x4fa876(0xf6)]&&_0x450fda[_0x4fa876(0x116)]==_0x2e1361['type']&&_0x450fda[_0x4fa876(0x110)]==_0x2e1361[_0x4fa876(0x110)]&&_0x450fda[_0x4fa876(0x114)]==_0x2e1361['bay']&&(_0x450fda[_0x4fa876(0xd4)]=parseInt(_0x450fda['product_stock'])+parseInt(_0x2e1361[_0x4fa876(0xbf)]));});}),console[_0x1ba00c(0xef)]('old_warehouse_data',_0x390569),await _0x390569[_0x1ba00c(0x11c)](),_0x1d25c3['invoice']=_0xdd252e,_0x1d25c3[_0x1ba00c(0xd3)]=_0x28b327,_0x1d25c3['date']=_0x548ff5,_0x1d25c3[_0x1ba00c(0x111)]=_0xd9d451,_0x1d25c3[_0x1ba00c(0xe2)]=_0x5c6a23,_0x1d25c3['note']=_0x452f55,_0x1d25c3[_0x1ba00c(0xe6)]=_0x5cca73,_0x1d25c3[_0x1ba00c(0x11e)]=_0x44d2b4;const _0x1d14d6=await _0x1d25c3[_0x1ba00c(0x11c)]();console['log']('new\x20new_data',_0x1d14d6);const _0x5109ed=await c_payment_data[_0x1ba00c(0x100)]({'invoice':_0x2b1ec5[_0x1ba00c(0xdd)]['invoice'],'reason':_0x1ba00c(0xed)});_0x5109ed[_0x1ba00c(0x11f)]=_0x2b1ec5[_0x1ba00c(0xdd)][_0x1ba00c(0x11f)],_0x5109ed[_0x1ba00c(0xeb)]=_0x2b1ec5[_0x1ba00c(0xdd)]['date'],await _0x5109ed[_0x1ba00c(0x11c)](),_0x2b1ec5[_0x1ba00c(0xbc)]('success',_0x1ba00c(0xde)),_0x4013d1[_0x1ba00c(0x123)](_0x1ba00c(0x105));}catch(_0x1af822){console[_0x1ba00c(0xef)](_0x1af822),_0x4013d1[_0x1ba00c(0xc9)](0xc8)[_0x1ba00c(0xec)]({'message':_0x1af822['message']});}}),router[a0_0x20e425(0xbe)](a0_0x20e425(0xc2),auth,async(_0x2ff1c9,_0x3a8987)=>{var _0x297cc2=a0_0x20e425;try{const _0x46b662=_0x2ff1c9['params']['id'],{invoice:_0x56520b,customer:_0x5daa8d,payable_to_customer:_0x118d00,paid_amount:_0x40ca53}=_0x2ff1c9[_0x297cc2(0xdd)],_0x419cb9=await sales_return[_0x297cc2(0xd7)](_0x46b662);console[_0x297cc2(0xef)](_0x297cc2(0xee),_0x419cb9),console[_0x297cc2(0xef)](_0x118d00),console[_0x297cc2(0xef)](_0x40ca53);var _0x5b27ea=_0x118d00-_0x40ca53;console[_0x297cc2(0xef)](_0x297cc2(0xb5),_0x5b27ea),_0x419cb9[_0x297cc2(0xdb)]=parseFloat(_0x40ca53)+parseFloat(_0x419cb9[_0x297cc2(0xdb)]),_0x419cb9[_0x297cc2(0xd9)]=_0x5b27ea,console[_0x297cc2(0xef)](_0x419cb9);const _0x1a5e33=await _0x419cb9[_0x297cc2(0x11c)]();console[_0x297cc2(0xef)](0x1b207);const _0x4e9051=await c_payment_data['findOne']({'invoice':_0x2ff1c9['body'][_0x297cc2(0xe0)],'reason':'Sale\x20Return'});console[_0x297cc2(0xef)](_0x297cc2(0xfe),_0x4e9051),_0x4e9051['amount']=_0x5b27ea,await _0x4e9051[_0x297cc2(0x11c)]();let _0x2d433b=new Date(),_0x17934d=('0'+_0x2d433b[_0x297cc2(0xcf)]())['slice'](-0x2),_0x19e423=('0'+(_0x2d433b[_0x297cc2(0x121)]()+0x1))[_0x297cc2(0x118)](-0x2),_0x5583f0=_0x2d433b[_0x297cc2(0x11d)](),_0xde2b8a=_0x5583f0+'-'+_0x19e423+'-'+_0x17934d;const _0x32d07b=new customer_payment({'invoice':_0x56520b,'date':_0x5583f0+'-'+_0x19e423+'-'+_0x17934d,'customer':_0x5daa8d,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x40ca53}),_0x5aea90=await _0x32d07b[_0x297cc2(0x11c)]();_0x2ff1c9[_0x297cc2(0xbc)](_0x297cc2(0x119),_0x297cc2(0xbd)),_0x3a8987['redirect'](_0x297cc2(0x105));}catch(_0x405bda){console['log'](_0x405bda);}}),router[a0_0x20e425(0x106)](a0_0x20e425(0x101),auth,async(_0x140a78,_0x2a6a44)=>{var _0x52d627=a0_0x20e425;try{const {username:_0x31916e,email:_0x12cd44,role:_0x47f637}=_0x140a78[_0x52d627(0xd6)],_0x21865f=_0x140a78[_0x52d627(0xd6)],_0xbcf063=await profile['findOne']({'email':_0x21865f[_0x52d627(0x113)]}),_0x1b3412=await master_shop[_0x52d627(0xfc)]();console[_0x52d627(0xef)]('master',_0x1b3412);const _0x337a07=_0x140a78['params']['id'],_0x4894bf=await sales_return[_0x52d627(0xd7)](_0x337a07);console[_0x52d627(0xef)](_0x4894bf);const _0x12c627=await customer[_0x52d627(0x100)]({'name':_0x4894bf[_0x52d627(0xd3)]});console['log'](_0x12c627);if(_0x1b3412[0x0][_0x52d627(0x11a)]==_0x52d627(0x109)){var _0x34dae1=users[_0x52d627(0xd8)];console[_0x52d627(0xef)](_0x34dae1);}else{if(_0x1b3412[0x0][_0x52d627(0x11a)]==_0x52d627(0x10f))var _0x34dae1=users[_0x52d627(0x10f)];else{if(_0x1b3412[0x0][_0x52d627(0x11a)]==_0x52d627(0xdf))var _0x34dae1=users[_0x52d627(0xdf)];else{if(_0x1b3412[0x0][_0x52d627(0x11a)]=='Spanish')var _0x34dae1=users[_0x52d627(0xdc)];else{if(_0x1b3412[0x0][_0x52d627(0x11a)]==_0x52d627(0x126))var _0x34dae1=users[_0x52d627(0x126)];else{if(_0x1b3412[0x0][_0x52d627(0x11a)]==_0x52d627(0xb4))var _0x34dae1=users[_0x52d627(0xaf)];else{if(_0x1b3412[0x0][_0x52d627(0x11a)]==_0x52d627(0xb7))var _0x34dae1=users[_0x52d627(0xb7)];else{if(_0x1b3412[0x0][_0x52d627(0x11a)]==_0x52d627(0xd1))var _0x34dae1=users['Arabic'];}}}}}}}_0x2a6a44[_0x52d627(0xf3)](_0x52d627(0x104),{'success':_0x140a78['flash'](_0x52d627(0x119)),'errors':_0x140a78['flash'](_0x52d627(0x117)),'role':_0x21865f,'profile':_0xbcf063,'master_shop':_0x1b3412,'customers':_0x12c627,'sales':_0x4894bf,'language':_0x34dae1});}catch(_0x3a4b35){console[_0x52d627(0xef)](_0x3a4b35);}}),module[a0_0x20e425(0xff)]=router;