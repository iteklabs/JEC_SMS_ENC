var a0_0x1cb909=a0_0x4a0d;function a0_0x4a0d(_0x2a977b,_0x571ca8){var _0x41b74c=a0_0x41b7();return a0_0x4a0d=function(_0x4a0dab,_0x2d0337){_0x4a0dab=_0x4a0dab-0xc7;var _0xd4d39b=_0x41b74c[_0x4a0dab];return _0xd4d39b;},a0_0x4a0d(_0x2a977b,_0x571ca8);}(function(_0x1450fa,_0x1da386){var _0x1fcc5f=a0_0x4a0d,_0x17d644=_0x1450fa();while(!![]){try{var _0x14b55f=parseInt(_0x1fcc5f(0xe5))/0x1*(parseInt(_0x1fcc5f(0xfa))/0x2)+-parseInt(_0x1fcc5f(0x135))/0x3+parseInt(_0x1fcc5f(0x112))/0x4+-parseInt(_0x1fcc5f(0x13b))/0x5+parseInt(_0x1fcc5f(0xf3))/0x6*(parseInt(_0x1fcc5f(0xd9))/0x7)+parseInt(_0x1fcc5f(0xca))/0x8*(parseInt(_0x1fcc5f(0xfc))/0x9)+-parseInt(_0x1fcc5f(0x119))/0xa;if(_0x14b55f===_0x1da386)break;else _0x17d644['push'](_0x17d644['shift']());}catch(_0xb9cfdd){_0x17d644['push'](_0x17d644['shift']());}}}(a0_0x41b7,0x7b26f));const express=require(a0_0x1cb909(0x108)),app=express(),router=express[a0_0x1cb909(0xeb)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x1cb909(0xd5)),auth=require(a0_0x1cb909(0x124)),users=require('../public/language/languages.json');router[a0_0x1cb909(0x12c)]('/view',auth,async(_0x904d9,_0x2f2341)=>{var _0x309d22=a0_0x1cb909;try{const {username:_0x318891,email:_0x5cf3ef,role:_0x2691d7}=_0x904d9['user'],_0x24d316=_0x904d9[_0x309d22(0xdb)],_0x57c595=await profile[_0x309d22(0xef)]({'email':_0x24d316[_0x309d22(0x110)]}),_0x44c40c=await master_shop['find'](),_0x44f580=await sales_return_finished['aggregate']([{'$lookup':{'from':'customers','localField':_0x309d22(0xf4),'foreignField':_0x309d22(0x109),'as':'customer_docs'}},{'$unwind':_0x309d22(0x11b)}]);if(_0x44c40c[0x0][_0x309d22(0xdd)]==_0x309d22(0x10c)){var _0x5cb1d9=users['English'];console[_0x309d22(0x127)](_0x5cb1d9);}else{if(_0x44c40c[0x0][_0x309d22(0xdd)]==_0x309d22(0xd4))var _0x5cb1d9=users[_0x309d22(0xd4)];else{if(_0x44c40c[0x0][_0x309d22(0xdd)]=='German')var _0x5cb1d9=users[_0x309d22(0x134)];else{if(_0x44c40c[0x0][_0x309d22(0xdd)]=='Spanish')var _0x5cb1d9=users[_0x309d22(0x12f)];else{if(_0x44c40c[0x0][_0x309d22(0xdd)]==_0x309d22(0x104))var _0x5cb1d9=users[_0x309d22(0x104)];else{if(_0x44c40c[0x0][_0x309d22(0xdd)]==_0x309d22(0x120))var _0x5cb1d9=users[_0x309d22(0x10f)];else{if(_0x44c40c[0x0][_0x309d22(0xdd)]==_0x309d22(0xdf))var _0x5cb1d9=users[_0x309d22(0xdf)];else{if(_0x44c40c[0x0][_0x309d22(0xdd)]==_0x309d22(0xfb))var _0x5cb1d9=users[_0x309d22(0xf5)];}}}}}}}_0x2f2341[_0x309d22(0xed)]('sales_return_finished',{'success':_0x904d9['flash'](_0x309d22(0x103)),'errors':_0x904d9[_0x309d22(0x10d)](_0x309d22(0x101)),'role':_0x24d316,'profile':_0x57c595,'master_shop':_0x44c40c,'user':_0x44f580,'language':_0x5cb1d9});}catch(_0x41bbf3){console[_0x309d22(0x127)](_0x41bbf3);}}),router['get'](a0_0x1cb909(0xd0),auth,async(_0x377372,_0x53723b)=>{var _0xd208a7=a0_0x1cb909;try{const {username:_0x3afcaf,email:_0x4e4b08,role:_0x37134f}=_0x377372[_0xd208a7(0xdb)],_0x50ac6e=_0x377372[_0xd208a7(0xdb)],_0x25c4bd=await profile[_0xd208a7(0xef)]({'email':_0x50ac6e[_0xd208a7(0x110)]}),_0x2ad5b8=await master_shop[_0xd208a7(0x130)]();console[_0xd208a7(0x127)](_0xd208a7(0x111),_0x2ad5b8);const _0x2367e2=_0x377372['params']['id'];console['log'](_0x2367e2);var _0x1edeb0=[_0xd208a7(0xc9)];const _0x425db2=await sales_return_finished[_0xd208a7(0x125)](_0x2367e2),_0x1f79e0=await warehouse[_0xd208a7(0x13d)]([{'$match':{'name':_0x425db2[_0xd208a7(0x139)],'room':_0x425db2[_0xd208a7(0xe4)]}},{'$unwind':_0xd208a7(0xf1)},{'$group':{'_id':_0xd208a7(0xf2),'name':{'$first':_0xd208a7(0xd2)},'product_stock':{'$first':_0xd208a7(0xec)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0xd208a7(0xe6)},'primary_code':{'$first':_0xd208a7(0x121)},'secondary_code':{'$first':_0xd208a7(0xde)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0xd208a7(0x11d)},'rack':{'$first':'$product_details.rack'}}}]);console[_0xd208a7(0x127)](_0x1f79e0);const _0x1ab199=await warehouse[_0xd208a7(0x13d)]([{'$match':{'status':_0xd208a7(0x128),'warehouse_category':_0xd208a7(0x106)}},{'$group':{'_id':_0xd208a7(0x114),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x4f34eb=await warehouse[_0xd208a7(0x13d)]([{'$match':{'status':_0xd208a7(0x128),'name':_0xd208a7(0x116)}},{'$group':{'_id':_0xd208a7(0x114),'name':{'$first':_0xd208a7(0x114)}}},{'$sort':{'name':0x1}}]),_0x4be799=await product[_0xd208a7(0x130)]({});if(_0x2ad5b8[0x0][_0xd208a7(0xdd)]==_0xd208a7(0x10c)){var _0xb22024=users['English'];console[_0xd208a7(0x127)](_0xb22024);}else{if(_0x2ad5b8[0x0][_0xd208a7(0xdd)]=='Hindi')var _0xb22024=users[_0xd208a7(0xd4)];else{if(_0x2ad5b8[0x0][_0xd208a7(0xdd)]=='German')var _0xb22024=users[_0xd208a7(0x134)];else{if(_0x2ad5b8[0x0][_0xd208a7(0xdd)]=='Spanish')var _0xb22024=users['Spanish'];else{if(_0x2ad5b8[0x0]['language']==_0xd208a7(0x104))var _0xb22024=users[_0xd208a7(0x104)];else{if(_0x2ad5b8[0x0]['language']==_0xd208a7(0x120))var _0xb22024=users[_0xd208a7(0x10f)];else{if(_0x2ad5b8[0x0]['language']==_0xd208a7(0xdf))var _0xb22024=users[_0xd208a7(0xdf)];else{if(_0x2ad5b8[0x0][_0xd208a7(0xdd)]==_0xd208a7(0xfb))var _0xb22024=users['Arabic'];}}}}}}}_0x53723b[_0xd208a7(0xed)](_0xd208a7(0xe2),{'success':_0x377372['flash'](_0xd208a7(0x103)),'errors':_0x377372[_0xd208a7(0x10d)](_0xd208a7(0x101)),'role':_0x50ac6e,'profile':_0x25c4bd,'master_shop':_0x2ad5b8,'user':_0x425db2,'stock':_0x1f79e0,'unit':_0x4be799,'language':_0xb22024,'warehouses':_0x1ab199,'rooms':_0x1edeb0,'warehouse_QA':_0x4f34eb});}catch(_0x4c7d41){console[_0xd208a7(0x127)](_0x4c7d41);}}),router[a0_0x1cb909(0xe8)](a0_0x1cb909(0xd0),auth,async(_0x31efab,_0x226697)=>{var _0x2445bd=a0_0x1cb909;if(_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xfd)]=='QA')try{const _0x464ba7=_0x31efab[_0x2445bd(0xee)]['id'],_0x107bcc=await sales_return['findOne']({'invoice':_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x12d)]}),_0x168ec7=await warehouse['findOne']({'name':_0x107bcc['ToWarehouse'],'room':_0x107bcc[_0x2445bd(0xe4)]}),{invoice:_0x38ea8c,customer:_0x4f3898,date:_0x47c5ed,warehouse_name:_0x13f853,product_name:_0x488219,primary_code:_0x44a20,secondary_code:_0x4a2e4c,product_code:_0x126117,sales_quantity:_0x29f68f,stocks:_0x23a6d7,return_qty:_0x35bdc7,note:_0xaa1f7f,to_warehouse_name_QA:_0xd1a46c,to_Room_name_QA:_0x508ad3}=_0x31efab[_0x2445bd(0xe3)];if(typeof product_name_QA==_0x2445bd(0x100))var _0x3ce899=[_0x31efab[_0x2445bd(0xe3)]['product_name_QA']],_0x352d27=[_0x31efab[_0x2445bd(0xe3)]['primary_code_QA']],_0x366bb2=[_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x122)]],_0x49ae75=[_0x31efab['body'][_0x2445bd(0x126)]],_0x208e14=[_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x13c)]],_0x4af281=[_0x31efab['body']['stocks_QA']],_0x28d57b=[_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xcf)]];else var _0x3ce899=[..._0x31efab[_0x2445bd(0xe3)]['product_name_QA']],_0x352d27=[..._0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xf0)]],_0x366bb2=[..._0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x122)]],_0x49ae75=[..._0x31efab['body'][_0x2445bd(0x126)]],_0x208e14=[..._0x31efab['body']['sales_quantity_QA']],_0x4af281=[..._0x31efab['body'][_0x2445bd(0xff)]],_0x28d57b=[..._0x31efab['body']['return_qty_QA']];const _0x5d9ba6=_0x3ce899['map'](_0x1470fb=>{return _0x1470fb={'product_name':_0x1470fb};});_0x352d27['forEach']((_0x222c11,_0x35e715)=>{var _0x40c4b7=_0x2445bd;_0x5d9ba6[_0x35e715][_0x40c4b7(0x10b)]=_0x222c11;}),_0x366bb2['forEach']((_0x5ba7d8,_0x39e2df)=>{_0x5d9ba6[_0x39e2df]['secondary_code']=_0x5ba7d8;}),_0x49ae75[_0x2445bd(0xe0)]((_0x1909d1,_0x326404)=>{var _0x3c7eeb=_0x2445bd;_0x5d9ba6[_0x326404][_0x3c7eeb(0x11c)]=_0x1909d1;}),_0x208e14[_0x2445bd(0xe0)]((_0x3cfffb,_0x2c409d)=>{var _0x11fcb5=_0x2445bd;_0x5d9ba6[_0x2c409d][_0x11fcb5(0x102)]=_0x3cfffb;}),_0x4af281[_0x2445bd(0xe0)]((_0x3baf06,_0xd51147)=>{var _0x4023e8=_0x2445bd;_0x5d9ba6[_0xd51147][_0x4023e8(0xd7)]=_0x3baf06;}),_0x28d57b[_0x2445bd(0xe0)]((_0x39c90d,_0x335722)=>{_0x5d9ba6[_0x335722]['return_qty']=_0x39c90d;}),_0x107bcc[_0x2445bd(0x132)][_0x2445bd(0xe0)](_0x53f3b0=>{const _0x19fdfa=_0x168ec7['product_details']['map'](_0x598bdb=>{var _0x8b3abf=a0_0x4a0d;_0x598bdb[_0x8b3abf(0xc7)]==_0x53f3b0[_0x8b3abf(0xc7)]&&(_0x598bdb['product_stock']=parseInt(_0x598bdb[_0x8b3abf(0xd3)])+parseInt(_0x53f3b0[_0x8b3abf(0x137)]));});}),await _0x168ec7[_0x2445bd(0xdc)](),_0x107bcc[_0x2445bd(0x12d)]=_0x38ea8c,_0x107bcc[_0x2445bd(0xf4)]=_0x4f3898,_0x107bcc[_0x2445bd(0xda)]=_0x47c5ed,_0x107bcc[_0x2445bd(0x129)]=_0x13f853,_0x107bcc[_0x2445bd(0x132)]=_0x5d9ba6,_0x107bcc[_0x2445bd(0xf9)]=_0xaa1f7f,_0x107bcc[_0x2445bd(0x139)]=_0xd1a46c,_0x107bcc[_0x2445bd(0xe4)]=_0x508ad3;const _0x5c59f6=await _0x107bcc[_0x2445bd(0xdc)](),_0x3d83fb=await c_payment_data['findOne']({'invoice':_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x12d)],'reason':_0x2445bd(0xd6)});_0x3d83fb[_0x2445bd(0x133)]=_0x31efab['body'][_0x2445bd(0x133)],_0x3d83fb[_0x2445bd(0xda)]=_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xda)],await _0x3d83fb[_0x2445bd(0xdc)](),_0x31efab['flash'](_0x2445bd(0x103),_0x2445bd(0x12e)),_0x226697[_0x2445bd(0xf7)](_0x2445bd(0x13a));}catch(_0x177d2e){console[_0x2445bd(0x127)](_0x177d2e),_0x226697['status'](0xc8)['json']({'message':_0x177d2e[_0x2445bd(0xe9)]});}else try{const _0x45078c=_0x31efab[_0x2445bd(0xee)]['id'];console['log'](_0x45078c);const _0x3c236e=await sales_return[_0x2445bd(0xef)]({'invoice':_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x12d)]});console[_0x2445bd(0x127)](_0x2445bd(0x123),_0x3c236e);const _0x50aebd=await warehouse[_0x2445bd(0xef)]({'name':_0x3c236e[_0x2445bd(0x139)],'room':_0x3c236e[_0x2445bd(0xe4)]});console[_0x2445bd(0x127)](_0x2445bd(0x12a),_0x50aebd);const {invoice:_0x344d78,customer:_0x16d46b,date:_0x358de7,warehouse_name:_0x298df6,product_name:_0x3269dd,primary_code:_0x29f350,secondary_code:_0x4d6150,product_code:_0x34f810,sales_quantity:_0x53c6cc,stocks:_0x214faa,return_qty:_0x51411f,note:_0x37555f,to_warehouse_name:_0x91056c,to_Room_name:_0x46f751}=_0x31efab[_0x2445bd(0xe3)];console['log'](_0x31efab[_0x2445bd(0xe3)]);if(typeof _0x3269dd==_0x2445bd(0x100))var _0x3ce899=[_0x31efab[_0x2445bd(0xe3)]['product_name']],_0x352d27=[_0x31efab[_0x2445bd(0xe3)]['primary_code']],_0x366bb2=[_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xcd)]],_0x49ae75=[_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x11c)]],_0x208e14=[_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x11a)]],_0x4af281=[_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xe7)]],_0x28d57b=[_0x31efab[_0x2445bd(0xe3)]['return_qty']],_0x4470c7=[_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xd1)]],_0x546b81=[_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xce)]],_0x2ef324=[_0x31efab['body'][_0x2445bd(0xe1)]],_0x11e50b=[_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xf8)]];else var _0x3ce899=[..._0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xc7)]],_0x352d27=[..._0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x10b)]],_0x366bb2=[..._0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xcd)]],_0x49ae75=[..._0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x11c)]],_0x208e14=[..._0x31efab[_0x2445bd(0xe3)]['sales_quantity']],_0x4af281=[..._0x31efab['body'][_0x2445bd(0xe7)]],_0x28d57b=[..._0x31efab['body'][_0x2445bd(0x137)]],_0x4470c7=[..._0x31efab['body'][_0x2445bd(0xd1)]],_0x546b81=[..._0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xce)]],_0x2ef324=[..._0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xe1)]],_0x11e50b=[..._0x31efab[_0x2445bd(0xe3)]['floorlevel']];const _0x1d6c4a=_0x3ce899[_0x2445bd(0xcb)](_0x482b62=>{return _0x482b62={'product_name':_0x482b62};});_0x352d27[_0x2445bd(0xe0)]((_0x532b87,_0x51f802)=>{var _0x373d4e=_0x2445bd;_0x1d6c4a[_0x51f802][_0x373d4e(0x10b)]=_0x532b87;}),_0x366bb2[_0x2445bd(0xe0)]((_0x51c01b,_0x5a817c)=>{var _0x5f3847=_0x2445bd;_0x1d6c4a[_0x5a817c][_0x5f3847(0xcd)]=_0x51c01b;}),_0x49ae75[_0x2445bd(0xe0)]((_0x314919,_0x2f92a8)=>{_0x1d6c4a[_0x2f92a8]['product_code']=_0x314919;}),_0x208e14[_0x2445bd(0xe0)]((_0x52947e,_0x5cc31c)=>{var _0x38014a=_0x2445bd;_0x1d6c4a[_0x5cc31c][_0x38014a(0x102)]=_0x52947e;}),_0x4af281[_0x2445bd(0xe0)]((_0x4b76a2,_0x28ed84)=>{var _0x213200=_0x2445bd;_0x1d6c4a[_0x28ed84][_0x213200(0xd7)]=_0x4b76a2;}),_0x28d57b['forEach']((_0x5158ff,_0x1b96dc)=>{var _0x5e9b51=_0x2445bd;_0x1d6c4a[_0x1b96dc][_0x5e9b51(0x137)]=_0x5158ff;}),_0x4470c7['forEach']((_0x3259e6,_0x597e9a)=>{var _0x3dc915=_0x2445bd;_0x1d6c4a[_0x597e9a][_0x3dc915(0xd1)]=_0x3259e6;}),_0x546b81['forEach']((_0x41d0b5,_0x77cf83)=>{_0x1d6c4a[_0x77cf83]['bin']=_0x41d0b5;}),_0x2ef324[_0x2445bd(0xe0)]((_0x5c6a82,_0x3d4866)=>{var _0x4155e7=_0x2445bd;_0x1d6c4a[_0x3d4866][_0x4155e7(0xfe)]=_0x5c6a82;}),_0x11e50b[_0x2445bd(0xe0)]((_0x313d6c,_0x4f8236)=>{var _0x254a41=_0x2445bd;_0x1d6c4a[_0x4f8236][_0x254a41(0xf8)]=_0x313d6c;});var _0x408a0f=0x0;_0x1d6c4a[_0x2445bd(0xe0)](_0x570b36=>{var _0x3d7f1b=_0x2445bd;console[_0x3d7f1b(0x127)]('foreach\x20newproduct',_0x570b36),(parseInt(_0x570b36[_0x3d7f1b(0x102)])<parseInt(_0x570b36['return_qty'])||parseInt(_0x570b36['stock'])<parseInt(_0x570b36[_0x3d7f1b(0x137)])&&parseInt(_0x570b36[_0x3d7f1b(0x102)])>parseInt(_0x570b36[_0x3d7f1b(0x137)])||parseInt(_0x570b36[_0x3d7f1b(0x137)])==0x0)&&_0x408a0f++;});if(_0x408a0f!=0x0)return _0x31efab[_0x2445bd(0x10d)](_0x2445bd(0x101),_0x2445bd(0x118)),_0x226697[_0x2445bd(0xf7)](_0x2445bd(0x117));_0x3c236e['return_sale'][_0x2445bd(0xe0)](_0x2e0bdc=>{var _0x325bf6=_0x2445bd;const _0xc5bf36=_0x50aebd[_0x325bf6(0x11f)][_0x325bf6(0xcb)](_0x3a4aab=>{var _0x50065c=_0x325bf6;_0x3a4aab[_0x50065c(0xc7)]==_0x2e0bdc[_0x50065c(0xc7)]&&_0x3a4aab[_0x50065c(0xf8)]==_0x2e0bdc[_0x50065c(0xf8)]&&_0x3a4aab[_0x50065c(0xfe)]==_0x2e0bdc[_0x50065c(0xfe)]&&_0x3a4aab[_0x50065c(0xce)]==_0x2e0bdc[_0x50065c(0xce)]&&_0x3a4aab[_0x50065c(0xd1)]==_0x2e0bdc[_0x50065c(0xd1)]&&(_0x3a4aab[_0x50065c(0xd3)]=parseInt(_0x3a4aab[_0x50065c(0xd3)])+parseInt(_0x2e0bdc[_0x50065c(0x137)]));});}),console[_0x2445bd(0x127)](_0x2445bd(0x12a),_0x50aebd),await _0x50aebd[_0x2445bd(0xdc)](),_0x3c236e[_0x2445bd(0x12d)]=_0x344d78,_0x3c236e[_0x2445bd(0xf4)]=_0x16d46b,_0x3c236e['date']=_0x358de7,_0x3c236e[_0x2445bd(0x129)]=_0x298df6,_0x3c236e[_0x2445bd(0x107)]=_0x1d6c4a,_0x3c236e[_0x2445bd(0xf9)]=_0x37555f,_0x3c236e[_0x2445bd(0x139)]=_0x91056c,_0x3c236e[_0x2445bd(0xe4)]=_0x46f751;const _0xe73054=await _0x3c236e[_0x2445bd(0xdc)]();console[_0x2445bd(0x127)](_0x2445bd(0x12b),_0xe73054);const _0x1f22e1=await c_payment_data[_0x2445bd(0xef)]({'invoice':_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x12d)],'reason':_0x2445bd(0xd6)});_0x1f22e1['suppliers']=_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0x133)],_0x1f22e1['date']=_0x31efab[_0x2445bd(0xe3)][_0x2445bd(0xda)],await _0x1f22e1[_0x2445bd(0xdc)](),_0x31efab[_0x2445bd(0x10d)]('success','purchase\x20return\x20successfully'),_0x226697['redirect'](_0x2445bd(0x10e));}catch(_0x98955d){console[_0x2445bd(0x127)](_0x98955d),_0x226697[_0x2445bd(0xea)](0xc8)[_0x2445bd(0x105)]({'message':_0x98955d['message']});}}),router[a0_0x1cb909(0xe8)]('/give_payment/:id',auth,async(_0x30cacf,_0x13f3ea)=>{var _0x1ecf8c=a0_0x1cb909;try{const _0x17ae87=_0x30cacf['params']['id'],{invoice:_0xa56a0e,customer:_0x26e324,payable_to_customer:_0x1d2953,paid_amount:_0x4402d5}=_0x30cacf['body'],_0x447de7=await sales_return[_0x1ecf8c(0x125)](_0x17ae87);console[_0x1ecf8c(0x127)](_0x1ecf8c(0x131),_0x447de7),console[_0x1ecf8c(0x127)](_0x1d2953),console[_0x1ecf8c(0x127)](_0x4402d5);var _0x2aa88b=_0x1d2953-_0x4402d5;console[_0x1ecf8c(0x127)](_0x1ecf8c(0x115),_0x2aa88b),_0x447de7[_0x1ecf8c(0xcc)]=parseFloat(_0x4402d5)+parseFloat(_0x447de7[_0x1ecf8c(0xcc)]),_0x447de7[_0x1ecf8c(0x138)]=_0x2aa88b,console[_0x1ecf8c(0x127)](_0x447de7);const _0x2dba17=await _0x447de7[_0x1ecf8c(0xdc)]();console['log'](0x1b207);const _0x43c974=await c_payment_data[_0x1ecf8c(0xef)]({'invoice':_0x30cacf[_0x1ecf8c(0xe3)]['invoice'],'reason':_0x1ecf8c(0xd6)});console[_0x1ecf8c(0x127)]('c_payment',_0x43c974),_0x43c974['amount']=_0x2aa88b,await _0x43c974[_0x1ecf8c(0xdc)]();let _0x432860=new Date(),_0x55b985=('0'+_0x432860[_0x1ecf8c(0x10a)]())[_0x1ecf8c(0x113)](-0x2),_0xc9b027=('0'+(_0x432860[_0x1ecf8c(0x136)]()+0x1))[_0x1ecf8c(0x113)](-0x2),_0x2d72b8=_0x432860[_0x1ecf8c(0x11e)](),_0x330014=_0x2d72b8+'-'+_0xc9b027+'-'+_0x55b985;const _0x52d740=new customer_payment({'invoice':_0xa56a0e,'date':_0x2d72b8+'-'+_0xc9b027+'-'+_0x55b985,'customer':_0x26e324,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x4402d5}),_0xd575c8=await _0x52d740[_0x1ecf8c(0xdc)]();_0x30cacf['flash'](_0x1ecf8c(0x103),_0x1ecf8c(0xd8)),_0x13f3ea['redirect'](_0x1ecf8c(0x10e));}catch(_0x1c8bd9){console[_0x1ecf8c(0x127)](_0x1c8bd9);}}),router[a0_0x1cb909(0x12c)](a0_0x1cb909(0xf6),auth,async(_0x582b10,_0x1b0664)=>{var _0x11f628=a0_0x1cb909;try{const {username:_0x1b1c46,email:_0x388dd3,role:_0x5f5d66}=_0x582b10['user'],_0x113059=_0x582b10[_0x11f628(0xdb)],_0x203eab=await profile[_0x11f628(0xef)]({'email':_0x113059['email']}),_0x82dabf=await master_shop['find']();console['log'](_0x11f628(0x111),_0x82dabf);const _0x385f19=_0x582b10[_0x11f628(0xee)]['id'],_0x5ba9e2=await sales_return['findById'](_0x385f19);console[_0x11f628(0x127)](_0x5ba9e2);const _0x1cab08=await customer[_0x11f628(0xef)]({'name':_0x5ba9e2['customer']});console[_0x11f628(0x127)](_0x1cab08);if(_0x82dabf[0x0][_0x11f628(0xdd)]==_0x11f628(0x10c)){var _0x1e799b=users[_0x11f628(0xc8)];console['log'](_0x1e799b);}else{if(_0x82dabf[0x0][_0x11f628(0xdd)]==_0x11f628(0xd4))var _0x1e799b=users[_0x11f628(0xd4)];else{if(_0x82dabf[0x0][_0x11f628(0xdd)]==_0x11f628(0x134))var _0x1e799b=users[_0x11f628(0x134)];else{if(_0x82dabf[0x0][_0x11f628(0xdd)]=='Spanish')var _0x1e799b=users['Spanish'];else{if(_0x82dabf[0x0][_0x11f628(0xdd)]==_0x11f628(0x104))var _0x1e799b=users[_0x11f628(0x104)];else{if(_0x82dabf[0x0][_0x11f628(0xdd)]=='Portuguese\x20(BR)')var _0x1e799b=users[_0x11f628(0x10f)];else{if(_0x82dabf[0x0][_0x11f628(0xdd)]==_0x11f628(0xdf))var _0x1e799b=users[_0x11f628(0xdf)];else{if(_0x82dabf[0x0]['language']==_0x11f628(0xfb))var _0x1e799b=users[_0x11f628(0xf5)];}}}}}}}_0x1b0664[_0x11f628(0xed)]('sales_return_invoice',{'success':_0x582b10[_0x11f628(0x10d)](_0x11f628(0x103)),'errors':_0x582b10[_0x11f628(0x10d)](_0x11f628(0x101)),'role':_0x113059,'profile':_0x203eab,'master_shop':_0x82dabf,'customers':_0x1cab08,'sales':_0x5ba9e2,'language':_0x1e799b});}catch(_0x2abb49){console['log'](_0x2abb49);}}),module['exports']=router;function a0_0x41b7(){var _0x457e6f=['findById','product_code_QA','log','Enabled','warehouse_name','old_warehouse_data','new\x20new_data','get','invoice','purchase\x20return\x20successfully','Spanish','find','data','return_sale_QA','suppliers','German','1037616DkhiWM','getMonth','return_qty','due_amount','ToWarehouse','/sales_return_finished/view','171670UIEKxo','sales_quantity_QA','aggregate','product_name','English','Return\x20Rooms','295072drkmRD','map','paid_amount','secondary_code','bin','return_qty_QA','/view/:id','bay','$product_details.product_name','product_stock','Hindi','../models/all_models','Sale\x20Return','stock','payment\x20successfull','7SPhZGq','date','user','save','language','$product_details.secondary_code','Chinese','forEach','types','return_sale_edit_finished','body','ToRoom','108121ATMHTB','$product_details.floorlevel','stocks','post','message','status','Router','$product_details.product_stock','render','params','findOne','primary_code_QA','$product_details','$product_details._id','3758634ExsHXE','customer','Arabic','/invoice/:id','redirect','floorlevel','note','2TgHJTq','Arabic\x20(ae)','144CInpNY','for_categorize','type','stocks_QA','string','errors','sale_qty','success','French','json','Finished\x20Goods','return_sale','express','name','getDate','primary_code','English\x20(US)','flash','/sales_return/view','Portuguese','email','master','1206908wqFoYY','slice','$name','subtract','QA\x20Warehouse','back','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','7417940Nogfbd','sales_quantity','$customer_docs','product_code','$product_details.storage','getFullYear','product_details','Portuguese\x20(BR)','$product_details.primary_code','secondary_code_QA','old_data','../middleware/auth'];a0_0x41b7=function(){return _0x457e6f;};return a0_0x41b7();}