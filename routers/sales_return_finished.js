var a0_0x12d938=a0_0x5261;(function(_0x3c1222,_0x314401){var _0x31dd2e=a0_0x5261,_0x10ce4d=_0x3c1222();while(!![]){try{var _0xd11c05=parseInt(_0x31dd2e(0x217))/0x1*(-parseInt(_0x31dd2e(0x23e))/0x2)+-parseInt(_0x31dd2e(0x216))/0x3*(-parseInt(_0x31dd2e(0x1fa))/0x4)+-parseInt(_0x31dd2e(0x223))/0x5+-parseInt(_0x31dd2e(0x23a))/0x6*(parseInt(_0x31dd2e(0x21c))/0x7)+parseInt(_0x31dd2e(0x212))/0x8+parseInt(_0x31dd2e(0x242))/0x9*(parseInt(_0x31dd2e(0x229))/0xa)+-parseInt(_0x31dd2e(0x1eb))/0xb*(-parseInt(_0x31dd2e(0x204))/0xc);if(_0xd11c05===_0x314401)break;else _0x10ce4d['push'](_0x10ce4d['shift']());}catch(_0x4dd61f){_0x10ce4d['push'](_0x10ce4d['shift']());}}}(a0_0x46a3,0x1b0d1));function a0_0x5261(_0x53454c,_0x2cd4e1){var _0x46a3eb=a0_0x46a3();return a0_0x5261=function(_0x5261f7,_0x181e4f){_0x5261f7=_0x5261f7-0x1d5;var _0x46a93e=_0x46a3eb[_0x5261f7];return _0x46a93e;},a0_0x5261(_0x53454c,_0x2cd4e1);}const express=require(a0_0x12d938(0x20a)),app=express(),router=express[a0_0x12d938(0x22e)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x12d938(0x234)),auth=require('../middleware/auth'),users=require('../public/language/languages.json');function a0_0x46a3(){var _0x24b0cd=['3080IBEQzu','French','$product_details.secondary_code','bay','string','product_stock','post','1103335fMKYvR','Portuguese','/view/:id','json','stocks','aggregate','156670mtrJWG','German','purchase\x20return\x20successfully','$product_details.primary_code','QA\x20Warehouse','Router','findOne','sales_return_finished','date','secondary_code','$name','../models/all_models','return_sale','customers','forEach','type','master','942CarVCt','find','$product_details.bay','payment\x20successfull','129586HVxAqX','/sales_return/view','stock','success','54GFwktm','Sale\x20Return','for_categorize','findById','get','product_name','secondary_code_QA','sales_return_invoice','foreach\x20newproduct','email','warehouse_name','$product_details.product_name','Chinese','/invoice/:id','sales_quantity_QA','amount','redirect','new\x20new_data','$product_details.type','Arabic','Hindi','save','ToRoom','language','flash','log','user','sales_quantity','primary_code_QA','ToWarehouse','product_code','render','return_qty','780989CgFNDb','$product_details.bin','errors','getDate','slice','English\x20(US)','/give_payment/:id','return_sale_QA','floorlevel','note','old_warehouse_data','Arabic\x20(ae)','Spanish','stocks_QA','sale_qty','2616kWkgvJ','product_details','message','body','/view','customer','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','exports','invoice','params','24PGJlXm','paid_amount','bin','back','Enabled','$product_details._id','express','English','c_payment','map','$product_details.rack','suppliers','product_code_QA','data','992376JayVpd','getMonth','due_amount','return_qty_QA','483SuMMao','1vzGFnp','$product_details.storage','$product_details.product_stock','Portuguese\x20(BR)','primary_code'];a0_0x46a3=function(){return _0x24b0cd;};return a0_0x46a3();}router[a0_0x12d938(0x246)](a0_0x12d938(0x1fe),auth,async(_0x3c657d,_0x470c6d)=>{var _0x2fc565=a0_0x12d938;try{const {username:_0x77bfe,email:_0x741c44,role:_0x571383}=_0x3c657d[_0x2fc565(0x1e4)],_0xcd9179=_0x3c657d[_0x2fc565(0x1e4)],_0x5a4077=await profile['findOne']({'email':_0xcd9179['email']}),_0x222605=await master_shop['find'](),_0x3bb378=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x2fc565(0x236),'localField':_0x2fc565(0x1ff),'foreignField':'name','as':'customer_docs'}},{'$unwind':'$customer_docs'}]);if(_0x222605[0x0][_0x2fc565(0x1e1)]=='English\x20(US)'){var _0x4e5bd1=users[_0x2fc565(0x20b)];console[_0x2fc565(0x1e3)](_0x4e5bd1);}else{if(_0x222605[0x0]['language']==_0x2fc565(0x1de))var _0x4e5bd1=users[_0x2fc565(0x1de)];else{if(_0x222605[0x0]['language']=='German')var _0x4e5bd1=users[_0x2fc565(0x22a)];else{if(_0x222605[0x0]['language']==_0x2fc565(0x1f7))var _0x4e5bd1=users[_0x2fc565(0x1f7)];else{if(_0x222605[0x0][_0x2fc565(0x1e1)]==_0x2fc565(0x21d))var _0x4e5bd1=users['French'];else{if(_0x222605[0x0][_0x2fc565(0x1e1)]==_0x2fc565(0x21a))var _0x4e5bd1=users['Portuguese'];else{if(_0x222605[0x0][_0x2fc565(0x1e1)]==_0x2fc565(0x1d6))var _0x4e5bd1=users[_0x2fc565(0x1d6)];else{if(_0x222605[0x0][_0x2fc565(0x1e1)]==_0x2fc565(0x1f6))var _0x4e5bd1=users['Arabic'];}}}}}}}_0x470c6d[_0x2fc565(0x1e9)](_0x2fc565(0x230),{'success':_0x3c657d[_0x2fc565(0x1e2)](_0x2fc565(0x241)),'errors':_0x3c657d[_0x2fc565(0x1e2)]('errors'),'role':_0xcd9179,'profile':_0x5a4077,'master_shop':_0x222605,'user':_0x3bb378,'language':_0x4e5bd1});}catch(_0x1db13a){console[_0x2fc565(0x1e3)](_0x1db13a);}}),router['get']('/view/:id',auth,async(_0x1b8ab2,_0x5b40fb)=>{var _0x52c785=a0_0x12d938;try{const {username:_0x257ab9,email:_0x5d5d89,role:_0x4b39b8}=_0x1b8ab2[_0x52c785(0x1e4)],_0x37d103=_0x1b8ab2[_0x52c785(0x1e4)],_0x173d20=await profile[_0x52c785(0x22f)]({'email':_0x37d103[_0x52c785(0x24b)]}),_0x25c952=await master_shop[_0x52c785(0x23b)]();console[_0x52c785(0x1e3)](_0x52c785(0x239),_0x25c952);const _0x3f1796=_0x1b8ab2['params']['id'];console['log'](_0x3f1796);var _0x4271c2=['Return\x20Rooms'];const _0x1e3ff9=await sales_return_finished[_0x52c785(0x245)](_0x3f1796),_0x2f718d=await warehouse[_0x52c785(0x228)]([{'$match':{'name':_0x1e3ff9[_0x52c785(0x1e7)],'room':_0x1e3ff9['ToRoom']}},{'$unwind':'$product_details'},{'$group':{'_id':_0x52c785(0x209),'name':{'$first':_0x52c785(0x1d5)},'product_stock':{'$first':_0x52c785(0x219)},'bay':{'$first':_0x52c785(0x23c)},'bin':{'$first':_0x52c785(0x1ec)},'type':{'$first':_0x52c785(0x1dc)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x52c785(0x22c)},'secondary_code':{'$first':_0x52c785(0x21e)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x52c785(0x218)},'rack':{'$first':_0x52c785(0x20e)}}}]);console[_0x52c785(0x1e3)](_0x2f718d);const _0x48501a=await warehouse[_0x52c785(0x228)]([{'$match':{'status':_0x52c785(0x208),'warehouse_category':'Finished\x20Goods'}},{'$group':{'_id':_0x52c785(0x233),'name':{'$first':_0x52c785(0x233)}}},{'$sort':{'name':0x1}}]),_0x5a645b=await warehouse[_0x52c785(0x228)]([{'$match':{'status':_0x52c785(0x208),'name':_0x52c785(0x22d)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x2ffa97=await product['find']({});if(_0x25c952[0x0][_0x52c785(0x1e1)]==_0x52c785(0x1f0)){var _0x4a604c=users[_0x52c785(0x20b)];console[_0x52c785(0x1e3)](_0x4a604c);}else{if(_0x25c952[0x0][_0x52c785(0x1e1)]==_0x52c785(0x1de))var _0x4a604c=users['Hindi'];else{if(_0x25c952[0x0][_0x52c785(0x1e1)]==_0x52c785(0x22a))var _0x4a604c=users[_0x52c785(0x22a)];else{if(_0x25c952[0x0][_0x52c785(0x1e1)]==_0x52c785(0x1f7))var _0x4a604c=users[_0x52c785(0x1f7)];else{if(_0x25c952[0x0][_0x52c785(0x1e1)]==_0x52c785(0x21d))var _0x4a604c=users[_0x52c785(0x21d)];else{if(_0x25c952[0x0][_0x52c785(0x1e1)]==_0x52c785(0x21a))var _0x4a604c=users[_0x52c785(0x224)];else{if(_0x25c952[0x0]['language']==_0x52c785(0x1d6))var _0x4a604c=users[_0x52c785(0x1d6)];else{if(_0x25c952[0x0]['language']==_0x52c785(0x1f6))var _0x4a604c=users[_0x52c785(0x1dd)];}}}}}}}_0x5b40fb[_0x52c785(0x1e9)]('return_sale_edit_finished',{'success':_0x1b8ab2[_0x52c785(0x1e2)](_0x52c785(0x241)),'errors':_0x1b8ab2['flash'](_0x52c785(0x1ed)),'role':_0x37d103,'profile':_0x173d20,'master_shop':_0x25c952,'user':_0x1e3ff9,'stock':_0x2f718d,'unit':_0x2ffa97,'language':_0x4a604c,'warehouses':_0x48501a,'rooms':_0x4271c2,'warehouse_QA':_0x5a645b});}catch(_0x4cb22e){console['log'](_0x4cb22e);}}),router[a0_0x12d938(0x222)](a0_0x12d938(0x225),auth,async(_0x44df72,_0x2d78db)=>{var _0x9376e3=a0_0x12d938;if(_0x44df72['body'][_0x9376e3(0x244)]=='QA')try{const _0x30fed3=_0x44df72[_0x9376e3(0x203)]['id'],_0x4fdb4f=await sales_return[_0x9376e3(0x22f)]({'invoice':_0x44df72['body'][_0x9376e3(0x202)]}),_0xeaa09d=await warehouse['findOne']({'name':_0x4fdb4f['ToWarehouse'],'room':_0x4fdb4f[_0x9376e3(0x1e0)]}),{invoice:_0x20d3f5,customer:_0x39d998,date:_0x4d7b33,warehouse_name:_0x44b5a3,product_name:_0x221496,primary_code:_0x9aa35b,secondary_code:_0xdd84d4,product_code:_0x3992e4,sales_quantity:_0xecd9c0,stocks:_0x494aa1,return_qty:_0x5af1c3,note:_0xab5479,to_warehouse_name_QA:_0x570b2c,to_Room_name_QA:_0x1f9d51}=_0x44df72['body'];if(typeof product_name_QA==_0x9376e3(0x220))var _0x174a4a=[_0x44df72[_0x9376e3(0x1fd)]['product_name_QA']],_0x4dd2d5=[_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x1e6)]],_0xdece84=[_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x248)]],_0xdb60c8=[_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x210)]],_0xf05bc=[_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x1d8)]],_0x391e6f=[_0x44df72['body'][_0x9376e3(0x1f8)]],_0x4d7989=[_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x215)]];else var _0x174a4a=[..._0x44df72['body']['product_name_QA']],_0x4dd2d5=[..._0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x1e6)]],_0xdece84=[..._0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x248)]],_0xdb60c8=[..._0x44df72['body'][_0x9376e3(0x210)]],_0xf05bc=[..._0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x1d8)]],_0x391e6f=[..._0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x1f8)]],_0x4d7989=[..._0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x215)]];const _0x44c3ef=_0x174a4a[_0x9376e3(0x20d)](_0x4e3930=>{return _0x4e3930={'product_name':_0x4e3930};});_0x4dd2d5['forEach']((_0x35c729,_0x206524)=>{_0x44c3ef[_0x206524]['primary_code']=_0x35c729;}),_0xdece84[_0x9376e3(0x237)]((_0x2c75cc,_0x3b1b0b)=>{var _0x1fba85=_0x9376e3;_0x44c3ef[_0x3b1b0b][_0x1fba85(0x232)]=_0x2c75cc;}),_0xdb60c8[_0x9376e3(0x237)]((_0x4fd394,_0x12c99a)=>{var _0x30ccb1=_0x9376e3;_0x44c3ef[_0x12c99a][_0x30ccb1(0x1e8)]=_0x4fd394;}),_0xf05bc['forEach']((_0x21db00,_0x3ae310)=>{var _0x15e404=_0x9376e3;_0x44c3ef[_0x3ae310][_0x15e404(0x1f9)]=_0x21db00;}),_0x391e6f[_0x9376e3(0x237)]((_0x3c6f08,_0x5c25e8)=>{_0x44c3ef[_0x5c25e8]['stock']=_0x3c6f08;}),_0x4d7989[_0x9376e3(0x237)]((_0x38b348,_0x5751f8)=>{var _0x4d428c=_0x9376e3;_0x44c3ef[_0x5751f8][_0x4d428c(0x1ea)]=_0x38b348;}),_0x4fdb4f[_0x9376e3(0x1f2)][_0x9376e3(0x237)](_0x5cdd91=>{var _0x30b2d5=_0x9376e3;const _0x2edc7b=_0xeaa09d[_0x30b2d5(0x1fb)][_0x30b2d5(0x20d)](_0x20f1dc=>{var _0x56a470=_0x30b2d5;_0x20f1dc['product_name']==_0x5cdd91['product_name']&&(_0x20f1dc[_0x56a470(0x221)]=parseInt(_0x20f1dc[_0x56a470(0x221)])+parseInt(_0x5cdd91[_0x56a470(0x1ea)]));});}),await _0xeaa09d[_0x9376e3(0x1df)](),_0x4fdb4f[_0x9376e3(0x202)]=_0x20d3f5,_0x4fdb4f[_0x9376e3(0x1ff)]=_0x39d998,_0x4fdb4f['date']=_0x4d7b33,_0x4fdb4f[_0x9376e3(0x24c)]=_0x44b5a3,_0x4fdb4f[_0x9376e3(0x1f2)]=_0x44c3ef,_0x4fdb4f['note']=_0xab5479,_0x4fdb4f[_0x9376e3(0x1e7)]=_0x570b2c,_0x4fdb4f[_0x9376e3(0x1e0)]=_0x1f9d51;const _0x3257d6=await _0x4fdb4f[_0x9376e3(0x1df)](),_0x49f5ea=await c_payment_data[_0x9376e3(0x22f)]({'invoice':_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x202)],'reason':_0x9376e3(0x243)});_0x49f5ea[_0x9376e3(0x20f)]=_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x20f)],_0x49f5ea['date']=_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x231)],await _0x49f5ea[_0x9376e3(0x1df)](),_0x44df72[_0x9376e3(0x1e2)](_0x9376e3(0x241),'purchase\x20return\x20successfully'),_0x2d78db[_0x9376e3(0x1da)]('/sales_return_finished/view');}catch(_0x45e76f){console['log'](_0x45e76f),_0x2d78db['status'](0xc8)[_0x9376e3(0x226)]({'message':_0x45e76f[_0x9376e3(0x1fc)]});}else try{const _0x11b8b4=_0x44df72[_0x9376e3(0x203)]['id'];console[_0x9376e3(0x1e3)](_0x11b8b4);const _0x97eeaf=await sales_return[_0x9376e3(0x22f)]({'invoice':_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x202)]});console[_0x9376e3(0x1e3)]('old_data',_0x97eeaf);const _0x7c7f34=await warehouse[_0x9376e3(0x22f)]({'name':_0x97eeaf[_0x9376e3(0x1e7)],'room':_0x97eeaf['ToRoom']});console[_0x9376e3(0x1e3)]('old_warehouse_data',_0x7c7f34);const {invoice:_0x1c77d0,customer:_0x5b33e3,date:_0x2e6ea9,warehouse_name:_0x2d7936,product_name:_0x274293,primary_code:_0x552a3a,secondary_code:_0x5b6ff4,product_code:_0x406867,sales_quantity:_0x380507,stocks:_0x41982f,return_qty:_0x2291c3,note:_0x3adb91,to_warehouse_name:_0x5db122,to_Room_name:_0x5948d2}=_0x44df72[_0x9376e3(0x1fd)];console[_0x9376e3(0x1e3)](_0x44df72[_0x9376e3(0x1fd)]);if(typeof _0x274293=='string')var _0x174a4a=[_0x44df72['body'][_0x9376e3(0x247)]],_0x4dd2d5=[_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x21b)]],_0xdece84=[_0x44df72['body'][_0x9376e3(0x232)]],_0xdb60c8=[_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x1e8)]],_0xf05bc=[_0x44df72['body'][_0x9376e3(0x1e5)]],_0x391e6f=[_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x227)]],_0x4d7989=[_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x1ea)]],_0x5b56a1=[_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x21f)]],_0x2b177e=[_0x44df72[_0x9376e3(0x1fd)]['bin']],_0x2716d2=[_0x44df72[_0x9376e3(0x1fd)]['types']],_0x350486=[_0x44df72['body']['floorlevel']];else var _0x174a4a=[..._0x44df72['body'][_0x9376e3(0x247)]],_0x4dd2d5=[..._0x44df72['body'][_0x9376e3(0x21b)]],_0xdece84=[..._0x44df72[_0x9376e3(0x1fd)]['secondary_code']],_0xdb60c8=[..._0x44df72['body'][_0x9376e3(0x1e8)]],_0xf05bc=[..._0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x1e5)]],_0x391e6f=[..._0x44df72['body']['stocks']],_0x4d7989=[..._0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x1ea)]],_0x5b56a1=[..._0x44df72['body']['bay']],_0x2b177e=[..._0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x206)]],_0x2716d2=[..._0x44df72[_0x9376e3(0x1fd)]['types']],_0x350486=[..._0x44df72['body'][_0x9376e3(0x1f3)]];const _0x176b96=_0x174a4a[_0x9376e3(0x20d)](_0x17799f=>{return _0x17799f={'product_name':_0x17799f};});_0x4dd2d5['forEach']((_0x32d746,_0x261e20)=>{var _0x28f126=_0x9376e3;_0x176b96[_0x261e20][_0x28f126(0x21b)]=_0x32d746;}),_0xdece84[_0x9376e3(0x237)]((_0x553c39,_0x320b8f)=>{var _0x4fd355=_0x9376e3;_0x176b96[_0x320b8f][_0x4fd355(0x232)]=_0x553c39;}),_0xdb60c8['forEach']((_0x1dc383,_0x360c63)=>{var _0x5340ac=_0x9376e3;_0x176b96[_0x360c63][_0x5340ac(0x1e8)]=_0x1dc383;}),_0xf05bc[_0x9376e3(0x237)]((_0x429a1b,_0x9e7a14)=>{var _0x57850d=_0x9376e3;_0x176b96[_0x9e7a14][_0x57850d(0x1f9)]=_0x429a1b;}),_0x391e6f[_0x9376e3(0x237)]((_0x28a91b,_0x3d3a1b)=>{var _0x21017b=_0x9376e3;_0x176b96[_0x3d3a1b][_0x21017b(0x240)]=_0x28a91b;}),_0x4d7989[_0x9376e3(0x237)]((_0x5973c2,_0xa1d6ab)=>{var _0x3a46ea=_0x9376e3;_0x176b96[_0xa1d6ab][_0x3a46ea(0x1ea)]=_0x5973c2;}),_0x5b56a1[_0x9376e3(0x237)]((_0x4b61e5,_0x2b260a)=>{var _0x3ff1e8=_0x9376e3;_0x176b96[_0x2b260a][_0x3ff1e8(0x21f)]=_0x4b61e5;}),_0x2b177e['forEach']((_0x3faf2c,_0x39e6bb)=>{var _0x5712a4=_0x9376e3;_0x176b96[_0x39e6bb][_0x5712a4(0x206)]=_0x3faf2c;}),_0x2716d2[_0x9376e3(0x237)]((_0x149957,_0x24d849)=>{_0x176b96[_0x24d849]['type']=_0x149957;}),_0x350486[_0x9376e3(0x237)]((_0x22e562,_0x403780)=>{var _0x221cc5=_0x9376e3;_0x176b96[_0x403780][_0x221cc5(0x1f3)]=_0x22e562;});var _0x12649f=0x0;_0x176b96[_0x9376e3(0x237)](_0x3bdd6d=>{var _0x4843b2=_0x9376e3;console[_0x4843b2(0x1e3)](_0x4843b2(0x24a),_0x3bdd6d),(parseInt(_0x3bdd6d[_0x4843b2(0x1f9)])<parseInt(_0x3bdd6d[_0x4843b2(0x1ea)])||parseInt(_0x3bdd6d[_0x4843b2(0x240)])<parseInt(_0x3bdd6d[_0x4843b2(0x1ea)])&&parseInt(_0x3bdd6d[_0x4843b2(0x1f9)])>parseInt(_0x3bdd6d[_0x4843b2(0x1ea)])||parseInt(_0x3bdd6d[_0x4843b2(0x1ea)])==0x0)&&_0x12649f++;});if(_0x12649f!=0x0)return _0x44df72[_0x9376e3(0x1e2)]('errors',_0x9376e3(0x200)),_0x2d78db[_0x9376e3(0x1da)](_0x9376e3(0x207));_0x97eeaf[_0x9376e3(0x235)][_0x9376e3(0x237)](_0x57d9b5=>{var _0x1d70ce=_0x9376e3;const _0x381f7c=_0x7c7f34[_0x1d70ce(0x1fb)]['map'](_0x3aa07c=>{var _0x569f07=_0x1d70ce;_0x3aa07c[_0x569f07(0x247)]==_0x57d9b5[_0x569f07(0x247)]&&_0x3aa07c[_0x569f07(0x1f3)]==_0x57d9b5[_0x569f07(0x1f3)]&&_0x3aa07c['type']==_0x57d9b5[_0x569f07(0x238)]&&_0x3aa07c[_0x569f07(0x206)]==_0x57d9b5[_0x569f07(0x206)]&&_0x3aa07c[_0x569f07(0x21f)]==_0x57d9b5[_0x569f07(0x21f)]&&(_0x3aa07c[_0x569f07(0x221)]=parseInt(_0x3aa07c[_0x569f07(0x221)])+parseInt(_0x57d9b5[_0x569f07(0x1ea)]));});}),console[_0x9376e3(0x1e3)](_0x9376e3(0x1f5),_0x7c7f34),await _0x7c7f34[_0x9376e3(0x1df)](),_0x97eeaf['invoice']=_0x1c77d0,_0x97eeaf[_0x9376e3(0x1ff)]=_0x5b33e3,_0x97eeaf[_0x9376e3(0x231)]=_0x2e6ea9,_0x97eeaf['warehouse_name']=_0x2d7936,_0x97eeaf[_0x9376e3(0x235)]=_0x176b96,_0x97eeaf[_0x9376e3(0x1f4)]=_0x3adb91,_0x97eeaf[_0x9376e3(0x1e7)]=_0x5db122,_0x97eeaf[_0x9376e3(0x1e0)]=_0x5948d2;const _0x258ecf=await _0x97eeaf['save']();console[_0x9376e3(0x1e3)](_0x9376e3(0x1db),_0x258ecf);const _0x4a5bf7=await c_payment_data[_0x9376e3(0x22f)]({'invoice':_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x202)],'reason':_0x9376e3(0x243)});_0x4a5bf7[_0x9376e3(0x20f)]=_0x44df72[_0x9376e3(0x1fd)][_0x9376e3(0x20f)],_0x4a5bf7[_0x9376e3(0x231)]=_0x44df72[_0x9376e3(0x1fd)]['date'],await _0x4a5bf7[_0x9376e3(0x1df)](),_0x44df72['flash'](_0x9376e3(0x241),_0x9376e3(0x22b)),_0x2d78db['redirect']('/sales_return/view');}catch(_0x8d024f){console[_0x9376e3(0x1e3)](_0x8d024f),_0x2d78db['status'](0xc8)[_0x9376e3(0x226)]({'message':_0x8d024f[_0x9376e3(0x1fc)]});}}),router[a0_0x12d938(0x222)](a0_0x12d938(0x1f1),auth,async(_0x5bcb4f,_0x2781c7)=>{var _0x397536=a0_0x12d938;try{const _0x489c38=_0x5bcb4f[_0x397536(0x203)]['id'],{invoice:_0x369b04,customer:_0x4402d3,payable_to_customer:_0x4b0b24,paid_amount:_0x401575}=_0x5bcb4f['body'],_0x1d0dc9=await sales_return[_0x397536(0x245)](_0x489c38);console['log'](_0x397536(0x211),_0x1d0dc9),console['log'](_0x4b0b24),console[_0x397536(0x1e3)](_0x401575);var _0x1073be=_0x4b0b24-_0x401575;console['log']('subtract',_0x1073be),_0x1d0dc9[_0x397536(0x205)]=parseFloat(_0x401575)+parseFloat(_0x1d0dc9[_0x397536(0x205)]),_0x1d0dc9[_0x397536(0x214)]=_0x1073be,console[_0x397536(0x1e3)](_0x1d0dc9);const _0x21a3a9=await _0x1d0dc9['save']();console[_0x397536(0x1e3)](0x1b207);const _0x6b6041=await c_payment_data[_0x397536(0x22f)]({'invoice':_0x5bcb4f[_0x397536(0x1fd)][_0x397536(0x202)],'reason':_0x397536(0x243)});console[_0x397536(0x1e3)](_0x397536(0x20c),_0x6b6041),_0x6b6041[_0x397536(0x1d9)]=_0x1073be,await _0x6b6041[_0x397536(0x1df)]();let _0x174776=new Date(),_0x42e5c0=('0'+_0x174776[_0x397536(0x1ee)]())[_0x397536(0x1ef)](-0x2),_0x1ffd61=('0'+(_0x174776[_0x397536(0x213)]()+0x1))['slice'](-0x2),_0x4ad9a7=_0x174776['getFullYear'](),_0x2e411f=_0x4ad9a7+'-'+_0x1ffd61+'-'+_0x42e5c0;const _0x1c4cb2=new customer_payment({'invoice':_0x369b04,'date':_0x4ad9a7+'-'+_0x1ffd61+'-'+_0x42e5c0,'customer':_0x4402d3,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x401575}),_0x226efc=await _0x1c4cb2[_0x397536(0x1df)]();_0x5bcb4f[_0x397536(0x1e2)]('success',_0x397536(0x23d)),_0x2781c7[_0x397536(0x1da)](_0x397536(0x23f));}catch(_0xe873a3){console[_0x397536(0x1e3)](_0xe873a3);}}),router[a0_0x12d938(0x246)](a0_0x12d938(0x1d7),auth,async(_0x483f10,_0x300957)=>{var _0x46882a=a0_0x12d938;try{const {username:_0x721ba6,email:_0x39cafa,role:_0xb532e0}=_0x483f10[_0x46882a(0x1e4)],_0x40d25c=_0x483f10[_0x46882a(0x1e4)],_0x560872=await profile[_0x46882a(0x22f)]({'email':_0x40d25c[_0x46882a(0x24b)]}),_0x28de90=await master_shop[_0x46882a(0x23b)]();console[_0x46882a(0x1e3)](_0x46882a(0x239),_0x28de90);const _0x1d7fcd=_0x483f10[_0x46882a(0x203)]['id'],_0x35ec5b=await sales_return[_0x46882a(0x245)](_0x1d7fcd);console['log'](_0x35ec5b);const _0xeb3fc4=await customer['findOne']({'name':_0x35ec5b['customer']});console[_0x46882a(0x1e3)](_0xeb3fc4);if(_0x28de90[0x0]['language']==_0x46882a(0x1f0)){var _0x5a343b=users[_0x46882a(0x20b)];console[_0x46882a(0x1e3)](_0x5a343b);}else{if(_0x28de90[0x0]['language']==_0x46882a(0x1de))var _0x5a343b=users['Hindi'];else{if(_0x28de90[0x0][_0x46882a(0x1e1)]=='German')var _0x5a343b=users[_0x46882a(0x22a)];else{if(_0x28de90[0x0][_0x46882a(0x1e1)]=='Spanish')var _0x5a343b=users[_0x46882a(0x1f7)];else{if(_0x28de90[0x0][_0x46882a(0x1e1)]=='French')var _0x5a343b=users[_0x46882a(0x21d)];else{if(_0x28de90[0x0]['language']==_0x46882a(0x21a))var _0x5a343b=users['Portuguese'];else{if(_0x28de90[0x0][_0x46882a(0x1e1)]==_0x46882a(0x1d6))var _0x5a343b=users['Chinese'];else{if(_0x28de90[0x0][_0x46882a(0x1e1)]==_0x46882a(0x1f6))var _0x5a343b=users['Arabic'];}}}}}}}_0x300957[_0x46882a(0x1e9)](_0x46882a(0x249),{'success':_0x483f10[_0x46882a(0x1e2)](_0x46882a(0x241)),'errors':_0x483f10[_0x46882a(0x1e2)]('errors'),'role':_0x40d25c,'profile':_0x560872,'master_shop':_0x28de90,'customers':_0xeb3fc4,'sales':_0x35ec5b,'language':_0x5a343b});}catch(_0x307e92){console[_0x46882a(0x1e3)](_0x307e92);}}),module[a0_0x12d938(0x201)]=router;