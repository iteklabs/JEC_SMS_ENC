function a0_0x1edb(_0x40c4d6,_0x247a26){var _0xb143d1=a0_0xb143();return a0_0x1edb=function(_0x1edb80,_0x355eb6){_0x1edb80=_0x1edb80-0x7e;var _0x3e30c8=_0xb143d1[_0x1edb80];return _0x3e30c8;},a0_0x1edb(_0x40c4d6,_0x247a26);}var a0_0x2504a7=a0_0x1edb;(function(_0x35ac9c,_0x3b2a8e){var _0x5d5676=a0_0x1edb,_0x1261da=_0x35ac9c();while(!![]){try{var _0x2f46b1=-parseInt(_0x5d5676(0xa7))/0x1+parseInt(_0x5d5676(0xf1))/0x2+parseInt(_0x5d5676(0x9d))/0x3*(parseInt(_0x5d5676(0xdd))/0x4)+parseInt(_0x5d5676(0x90))/0x5*(parseInt(_0x5d5676(0xb8))/0x6)+parseInt(_0x5d5676(0x8e))/0x7*(parseInt(_0x5d5676(0x84))/0x8)+parseInt(_0x5d5676(0xab))/0x9*(-parseInt(_0x5d5676(0xd1))/0xa)+parseInt(_0x5d5676(0x92))/0xb*(-parseInt(_0x5d5676(0x93))/0xc);if(_0x2f46b1===_0x3b2a8e)break;else _0x1261da['push'](_0x1261da['shift']());}catch(_0x118b89){_0x1261da['push'](_0x1261da['shift']());}}}(a0_0xb143,0xa6e2a));const express=require(a0_0x2504a7(0xaa)),app=express(),router=express[a0_0x2504a7(0xd4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x2504a7(0x88)),auth=require('../middleware/auth'),users=require(a0_0x2504a7(0xb3));router[a0_0x2504a7(0xcf)](a0_0x2504a7(0xd5),auth,async(_0x31801e,_0x52e9d5)=>{var _0x37bab4=a0_0x2504a7;try{const {username:_0x11ab44,email:_0x4b2997,role:_0x5d5e57}=_0x31801e[_0x37bab4(0xf7)],_0x2a427b=_0x31801e[_0x37bab4(0xf7)],_0x363a31=await profile['findOne']({'email':_0x2a427b[_0x37bab4(0xcd)]}),_0x3b6627=await master_shop[_0x37bab4(0xbe)](),_0x488ec5=await sales_return_finished[_0x37bab4(0xbd)]([{'$lookup':{'from':_0x37bab4(0xc3),'localField':_0x37bab4(0xec),'foreignField':'name','as':'customer_docs'}},{'$unwind':_0x37bab4(0xa0)}]);if(_0x3b6627[0x0][_0x37bab4(0xf8)]==_0x37bab4(0xd8)){var _0x51e000=users['English'];console[_0x37bab4(0x8f)](_0x51e000);}else{if(_0x3b6627[0x0][_0x37bab4(0xf8)]==_0x37bab4(0x9e))var _0x51e000=users[_0x37bab4(0x9e)];else{if(_0x3b6627[0x0][_0x37bab4(0xf8)]==_0x37bab4(0xd3))var _0x51e000=users[_0x37bab4(0xd3)];else{if(_0x3b6627[0x0][_0x37bab4(0xf8)]==_0x37bab4(0xf2))var _0x51e000=users[_0x37bab4(0xf2)];else{if(_0x3b6627[0x0][_0x37bab4(0xf8)]=='French')var _0x51e000=users['French'];else{if(_0x3b6627[0x0][_0x37bab4(0xf8)]=='Portuguese\x20(BR)')var _0x51e000=users[_0x37bab4(0x8b)];else{if(_0x3b6627[0x0][_0x37bab4(0xf8)]==_0x37bab4(0xe2))var _0x51e000=users['Chinese'];else{if(_0x3b6627[0x0][_0x37bab4(0xf8)]==_0x37bab4(0xc7))var _0x51e000=users['Arabic'];}}}}}}}_0x52e9d5[_0x37bab4(0xde)](_0x37bab4(0x98),{'success':_0x31801e[_0x37bab4(0xda)](_0x37bab4(0xa1)),'errors':_0x31801e[_0x37bab4(0xda)](_0x37bab4(0xdf)),'role':_0x2a427b,'profile':_0x363a31,'master_shop':_0x3b6627,'user':_0x488ec5,'language':_0x51e000});}catch(_0x428b05){console[_0x37bab4(0x8f)](_0x428b05);}}),router['get'](a0_0x2504a7(0x89),auth,async(_0x56b2aa,_0x4b665d)=>{var _0xd32efd=a0_0x2504a7;try{const {username:_0x32a6d5,email:_0x571264,role:_0x264293}=_0x56b2aa[_0xd32efd(0xf7)],_0x5257b4=_0x56b2aa[_0xd32efd(0xf7)],_0x49c7f6=await profile[_0xd32efd(0xc1)]({'email':_0x5257b4[_0xd32efd(0xcd)]}),_0x27585f=await master_shop[_0xd32efd(0xbe)]();console[_0xd32efd(0x8f)](_0xd32efd(0x8a),_0x27585f);const _0x55b34e=_0x56b2aa[_0xd32efd(0xd7)]['id'];console[_0xd32efd(0x8f)](_0x55b34e);var _0xfdceb3=[_0xd32efd(0xf0)];const _0xb0614=await sales_return_finished[_0xd32efd(0xc4)](_0x55b34e),_0x3b92a6=await warehouse['aggregate']([{'$match':{'name':_0xb0614['ToWarehouse'],'room':_0xb0614['ToRoom']}},{'$unwind':_0xd32efd(0xaf)},{'$group':{'_id':_0xd32efd(0x80),'name':{'$first':_0xd32efd(0xd9)},'product_stock':{'$first':_0xd32efd(0xf3)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0xd32efd(0xc6)},'type':{'$first':_0xd32efd(0xb4)},'floorlevel':{'$first':_0xd32efd(0xe4)},'primary_code':{'$first':_0xd32efd(0xa8)},'secondary_code':{'$first':_0xd32efd(0xa4)},'product_code':{'$first':_0xd32efd(0x95)},'storage':{'$first':_0xd32efd(0xe5)},'rack':{'$first':_0xd32efd(0xc0)}}}]);console['log'](_0x3b92a6);const _0x25ff66=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0xd32efd(0xbf)}},{'$group':{'_id':_0xd32efd(0xc8),'name':{'$first':_0xd32efd(0xc8)}}},{'$sort':{'name':0x1}}]),_0x26868b=await warehouse[_0xd32efd(0xbd)]([{'$match':{'status':'Enabled','name':'QA\x20Warehouse'}},{'$group':{'_id':_0xd32efd(0xc8),'name':{'$first':_0xd32efd(0xc8)}}},{'$sort':{'name':0x1}}]),_0x3e4554=await product[_0xd32efd(0xbe)]({});if(_0x27585f[0x0][_0xd32efd(0xf8)]=='English\x20(US)'){var _0x5ef115=users[_0xd32efd(0x9c)];console['log'](_0x5ef115);}else{if(_0x27585f[0x0][_0xd32efd(0xf8)]=='Hindi')var _0x5ef115=users[_0xd32efd(0x9e)];else{if(_0x27585f[0x0]['language']==_0xd32efd(0xd3))var _0x5ef115=users['German'];else{if(_0x27585f[0x0]['language']=='Spanish')var _0x5ef115=users[_0xd32efd(0xf2)];else{if(_0x27585f[0x0][_0xd32efd(0xf8)]=='French')var _0x5ef115=users[_0xd32efd(0xfa)];else{if(_0x27585f[0x0][_0xd32efd(0xf8)]==_0xd32efd(0xa9))var _0x5ef115=users['Portuguese'];else{if(_0x27585f[0x0][_0xd32efd(0xf8)]==_0xd32efd(0xe2))var _0x5ef115=users[_0xd32efd(0xe2)];else{if(_0x27585f[0x0][_0xd32efd(0xf8)]=='Arabic\x20(ae)')var _0x5ef115=users[_0xd32efd(0xba)];}}}}}}}_0x4b665d[_0xd32efd(0xde)](_0xd32efd(0x96),{'success':_0x56b2aa['flash'](_0xd32efd(0xa1)),'errors':_0x56b2aa[_0xd32efd(0xda)](_0xd32efd(0xdf)),'role':_0x5257b4,'profile':_0x49c7f6,'master_shop':_0x27585f,'user':_0xb0614,'stock':_0x3b92a6,'unit':_0x3e4554,'language':_0x5ef115,'warehouses':_0x25ff66,'rooms':_0xfdceb3,'warehouse_QA':_0x26868b});}catch(_0x4be0c7){console['log'](_0x4be0c7);}}),router['post'](a0_0x2504a7(0x89),auth,async(_0x2edcdd,_0x35ef73)=>{var _0x14ad20=a0_0x2504a7;if(_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xb2)]=='QA')try{const _0x4abffd=_0x2edcdd[_0x14ad20(0xd7)]['id'],_0x689054=await sales_return[_0x14ad20(0xc1)]({'invoice':_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x8d)]}),_0x597c56=await warehouse[_0x14ad20(0xc1)]({'name':_0x689054['ToWarehouse'],'room':_0x689054['ToRoom']}),{invoice:_0x25b39d,customer:_0x207412,date:_0x186b94,warehouse_name:_0x272aa3,product_name:_0x24312b,primary_code:_0x25edaa,secondary_code:_0x1594de,product_code:_0x1b7c74,sales_quantity:_0x287c38,stocks:_0x3153c7,return_qty:_0x39e59a,note:_0x4aab4f,to_warehouse_name_QA:_0x21b727,to_Room_name_QA:_0xd66bfc}=_0x2edcdd[_0x14ad20(0xf5)];if(typeof product_name_QA==_0x14ad20(0xed))var _0x44b36d=[_0x2edcdd['body'][_0x14ad20(0xcb)]],_0x592819=[_0x2edcdd['body'][_0x14ad20(0x86)]],_0x152b31=[_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xf9)]],_0xb05cd0=[_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x97)]],_0x304640=[_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xe0)]],_0xf5de13=[_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xf6)]],_0x429479=[_0x2edcdd[_0x14ad20(0xf5)]['return_qty_QA']];else var _0x44b36d=[..._0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xcb)]],_0x592819=[..._0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x86)]],_0x152b31=[..._0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xf9)]],_0xb05cd0=[..._0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x97)]],_0x304640=[..._0x2edcdd['body'][_0x14ad20(0xe0)]],_0xf5de13=[..._0x2edcdd['body'][_0x14ad20(0xf6)]],_0x429479=[..._0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x85)]];const _0x2a3088=_0x44b36d[_0x14ad20(0xb9)](_0x4e961a=>{return _0x4e961a={'product_name':_0x4e961a};});_0x592819['forEach']((_0xbf425c,_0x403013)=>{var _0x54bd5e=_0x14ad20;_0x2a3088[_0x403013][_0x54bd5e(0xc2)]=_0xbf425c;}),_0x152b31[_0x14ad20(0x7f)]((_0x2aca09,_0x17e0bf)=>{var _0x53caba=_0x14ad20;_0x2a3088[_0x17e0bf][_0x53caba(0xee)]=_0x2aca09;}),_0xb05cd0['forEach']((_0x475dc6,_0x10ffb4)=>{var _0x498695=_0x14ad20;_0x2a3088[_0x10ffb4][_0x498695(0xb1)]=_0x475dc6;}),_0x304640[_0x14ad20(0x7f)]((_0x249cf7,_0xc028a7)=>{var _0x9432d=_0x14ad20;_0x2a3088[_0xc028a7][_0x9432d(0xb7)]=_0x249cf7;}),_0xf5de13[_0x14ad20(0x7f)]((_0x3891ae,_0x23f9a6)=>{_0x2a3088[_0x23f9a6]['stock']=_0x3891ae;}),_0x429479[_0x14ad20(0x7f)]((_0xdcad2b,_0x20fd70)=>{var _0x1c1519=_0x14ad20;_0x2a3088[_0x20fd70][_0x1c1519(0x9a)]=_0xdcad2b;}),_0x689054[_0x14ad20(0xc5)][_0x14ad20(0x7f)](_0x1de93f=>{var _0x55f601=_0x14ad20;const _0xfc58ce=_0x597c56['product_details'][_0x55f601(0xb9)](_0x122a9d=>{var _0x57966f=_0x55f601;_0x122a9d[_0x57966f(0x81)]==_0x1de93f[_0x57966f(0x81)]&&(_0x122a9d[_0x57966f(0xad)]=parseInt(_0x122a9d[_0x57966f(0xad)])+parseInt(_0x1de93f[_0x57966f(0x9a)]));});}),await _0x597c56['save'](),_0x689054[_0x14ad20(0x8d)]=_0x25b39d,_0x689054['customer']=_0x207412,_0x689054[_0x14ad20(0xe3)]=_0x186b94,_0x689054['warehouse_name']=_0x272aa3,_0x689054[_0x14ad20(0xc5)]=_0x2a3088,_0x689054[_0x14ad20(0xca)]=_0x4aab4f,_0x689054[_0x14ad20(0x87)]=_0x21b727,_0x689054['ToRoom']=_0xd66bfc;const _0x244856=await _0x689054['save'](),_0x2f8d17=await c_payment_data[_0x14ad20(0xc1)]({'invoice':_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x8d)],'reason':_0x14ad20(0xce)});_0x2f8d17['suppliers']=_0x2edcdd['body'][_0x14ad20(0x8c)],_0x2f8d17[_0x14ad20(0xe3)]=_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xe3)],await _0x2f8d17[_0x14ad20(0xa6)](),_0x2edcdd[_0x14ad20(0xda)](_0x14ad20(0xa1),_0x14ad20(0xb6)),_0x35ef73[_0x14ad20(0xa3)](_0x14ad20(0xb5));}catch(_0x3481ba){console['log'](_0x3481ba),_0x35ef73[_0x14ad20(0x99)](0xc8)['json']({'message':_0x3481ba[_0x14ad20(0x9f)]});}else try{const _0x2d5acb=_0x2edcdd[_0x14ad20(0xd7)]['id'];console['log'](_0x2d5acb);const _0x138d54=await sales_return[_0x14ad20(0xc1)]({'invoice':_0x2edcdd[_0x14ad20(0xf5)]['invoice']});console[_0x14ad20(0x8f)](_0x14ad20(0xd2),_0x138d54);const _0x2ec020=await warehouse['findOne']({'name':_0x138d54['ToWarehouse'],'room':_0x138d54['ToRoom']});console[_0x14ad20(0x8f)](_0x14ad20(0xf4),_0x2ec020);const {invoice:_0x5825ba,customer:_0x589b64,date:_0x3185b8,warehouse_name:_0x2bab6e,product_name:_0x4752ee,primary_code:_0x1d59e7,secondary_code:_0x1e93f0,product_code:_0x2ffc8c,sales_quantity:_0xc9aca,stocks:_0x2743c4,return_qty:_0x1f39d4,note:_0x4abfdf,to_warehouse_name:_0x19892c,to_Room_name:_0xcd7dd3}=_0x2edcdd['body'];console[_0x14ad20(0x8f)](_0x2edcdd[_0x14ad20(0xf5)]);if(typeof _0x4752ee==_0x14ad20(0xed))var _0x44b36d=[_0x2edcdd[_0x14ad20(0xf5)]['product_name']],_0x592819=[_0x2edcdd[_0x14ad20(0xf5)]['primary_code']],_0x152b31=[_0x2edcdd['body'][_0x14ad20(0xee)]],_0xb05cd0=[_0x2edcdd['body'][_0x14ad20(0xb1)]],_0x304640=[_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x91)]],_0xf5de13=[_0x2edcdd['body'][_0x14ad20(0xef)]],_0x429479=[_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x9a)]],_0x5f117e=[_0x2edcdd[_0x14ad20(0xf5)]['bay']],_0x42c671=[_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x9b)]],_0x3f3f21=[_0x2edcdd[_0x14ad20(0xf5)]['types']],_0x5e4ef6=[_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xe9)]];else var _0x44b36d=[..._0x2edcdd[_0x14ad20(0xf5)]['product_name']],_0x592819=[..._0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xc2)]],_0x152b31=[..._0x2edcdd[_0x14ad20(0xf5)]['secondary_code']],_0xb05cd0=[..._0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xb1)]],_0x304640=[..._0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x91)]],_0xf5de13=[..._0x2edcdd['body'][_0x14ad20(0xef)]],_0x429479=[..._0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x9a)]],_0x5f117e=[..._0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xa2)]],_0x42c671=[..._0x2edcdd[_0x14ad20(0xf5)]['bin']],_0x3f3f21=[..._0x2edcdd[_0x14ad20(0xf5)]['types']],_0x5e4ef6=[..._0x2edcdd['body'][_0x14ad20(0xe9)]];const _0x17e031=_0x44b36d[_0x14ad20(0xb9)](_0x7069f8=>{return _0x7069f8={'product_name':_0x7069f8};});_0x592819[_0x14ad20(0x7f)]((_0x48eb3a,_0x11c9a7)=>{var _0xeb20c1=_0x14ad20;_0x17e031[_0x11c9a7][_0xeb20c1(0xc2)]=_0x48eb3a;}),_0x152b31[_0x14ad20(0x7f)]((_0x23a4d4,_0x18a341)=>{var _0x5db72c=_0x14ad20;_0x17e031[_0x18a341][_0x5db72c(0xee)]=_0x23a4d4;}),_0xb05cd0['forEach']((_0x5773c4,_0x4589dc)=>{var _0x390047=_0x14ad20;_0x17e031[_0x4589dc][_0x390047(0xb1)]=_0x5773c4;}),_0x304640[_0x14ad20(0x7f)]((_0x1332d8,_0x21def3)=>{var _0x50b25a=_0x14ad20;_0x17e031[_0x21def3][_0x50b25a(0xb7)]=_0x1332d8;}),_0xf5de13[_0x14ad20(0x7f)]((_0x1e3b26,_0x39209f)=>{var _0x315969=_0x14ad20;_0x17e031[_0x39209f][_0x315969(0xbc)]=_0x1e3b26;}),_0x429479['forEach']((_0x590126,_0x4a18ed)=>{_0x17e031[_0x4a18ed]['return_qty']=_0x590126;}),_0x5f117e[_0x14ad20(0x7f)]((_0x5edc57,_0x45b8e0)=>{var _0x626904=_0x14ad20;_0x17e031[_0x45b8e0][_0x626904(0xa2)]=_0x5edc57;}),_0x42c671['forEach']((_0x30196e,_0x256d01)=>{var _0x3c7d1a=_0x14ad20;_0x17e031[_0x256d01][_0x3c7d1a(0x9b)]=_0x30196e;}),_0x3f3f21[_0x14ad20(0x7f)]((_0x2dc221,_0x55457c)=>{var _0x41a426=_0x14ad20;_0x17e031[_0x55457c][_0x41a426(0xae)]=_0x2dc221;}),_0x5e4ef6[_0x14ad20(0x7f)]((_0x301579,_0x22a0d2)=>{_0x17e031[_0x22a0d2]['floorlevel']=_0x301579;});var _0x479193=0x0;_0x17e031[_0x14ad20(0x7f)](_0x4a0ec7=>{var _0x306e05=_0x14ad20;console[_0x306e05(0x8f)](_0x306e05(0xea),_0x4a0ec7),(parseInt(_0x4a0ec7[_0x306e05(0xb7)])<parseInt(_0x4a0ec7[_0x306e05(0x9a)])||parseInt(_0x4a0ec7[_0x306e05(0xbc)])<parseInt(_0x4a0ec7[_0x306e05(0x9a)])&&parseInt(_0x4a0ec7[_0x306e05(0xb7)])>parseInt(_0x4a0ec7[_0x306e05(0x9a)])||parseInt(_0x4a0ec7[_0x306e05(0x9a)])==0x0)&&_0x479193++;});if(_0x479193!=0x0)return _0x2edcdd[_0x14ad20(0xda)]('errors',_0x14ad20(0x7e)),_0x35ef73['redirect']('back');_0x138d54[_0x14ad20(0xbb)][_0x14ad20(0x7f)](_0x4202f9=>{var _0x2455de=_0x14ad20;const _0x305675=_0x2ec020[_0x2455de(0xdb)][_0x2455de(0xb9)](_0x2dc46a=>{var _0x45e4a0=_0x2455de;_0x2dc46a[_0x45e4a0(0x81)]==_0x4202f9['product_name']&&_0x2dc46a[_0x45e4a0(0xe9)]==_0x4202f9[_0x45e4a0(0xe9)]&&_0x2dc46a[_0x45e4a0(0xae)]==_0x4202f9[_0x45e4a0(0xae)]&&_0x2dc46a[_0x45e4a0(0x9b)]==_0x4202f9[_0x45e4a0(0x9b)]&&_0x2dc46a[_0x45e4a0(0xa2)]==_0x4202f9['bay']&&(_0x2dc46a[_0x45e4a0(0xad)]=parseInt(_0x2dc46a[_0x45e4a0(0xad)])+parseInt(_0x4202f9[_0x45e4a0(0x9a)]));});}),console[_0x14ad20(0x8f)](_0x14ad20(0xf4),_0x2ec020),await _0x2ec020[_0x14ad20(0xa6)](),_0x138d54['invoice']=_0x5825ba,_0x138d54[_0x14ad20(0xec)]=_0x589b64,_0x138d54[_0x14ad20(0xe3)]=_0x3185b8,_0x138d54[_0x14ad20(0xe6)]=_0x2bab6e,_0x138d54[_0x14ad20(0xbb)]=_0x17e031,_0x138d54[_0x14ad20(0xca)]=_0x4abfdf,_0x138d54['ToWarehouse']=_0x19892c,_0x138d54['ToRoom']=_0xcd7dd3;const _0x28ac11=await _0x138d54[_0x14ad20(0xa6)]();console[_0x14ad20(0x8f)](_0x14ad20(0xac),_0x28ac11);const _0x3bcffb=await c_payment_data['findOne']({'invoice':_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x8d)],'reason':'Sale\x20Return'});_0x3bcffb[_0x14ad20(0x8c)]=_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0x8c)],_0x3bcffb[_0x14ad20(0xe3)]=_0x2edcdd[_0x14ad20(0xf5)][_0x14ad20(0xe3)],await _0x3bcffb[_0x14ad20(0xa6)](),_0x2edcdd[_0x14ad20(0xda)]('success',_0x14ad20(0xb6)),_0x35ef73[_0x14ad20(0xa3)](_0x14ad20(0x83));}catch(_0x5eff99){console[_0x14ad20(0x8f)](_0x5eff99),_0x35ef73['status'](0xc8)[_0x14ad20(0xfb)]({'message':_0x5eff99[_0x14ad20(0x9f)]});}}),router[a0_0x2504a7(0xd0)](a0_0x2504a7(0xe8),auth,async(_0x40cd48,_0x136bcb)=>{var _0x14ba0b=a0_0x2504a7;try{const _0x6f1b1e=_0x40cd48[_0x14ba0b(0xd7)]['id'],{invoice:_0x262d86,customer:_0xad565b,payable_to_customer:_0x12039a,paid_amount:_0x8ce07a}=_0x40cd48[_0x14ba0b(0xf5)],_0x3c9f20=await sales_return[_0x14ba0b(0xc4)](_0x6f1b1e);console[_0x14ba0b(0x8f)](_0x14ba0b(0xb0),_0x3c9f20),console[_0x14ba0b(0x8f)](_0x12039a),console[_0x14ba0b(0x8f)](_0x8ce07a);var _0x194608=_0x12039a-_0x8ce07a;console[_0x14ba0b(0x8f)](_0x14ba0b(0xcc),_0x194608),_0x3c9f20['paid_amount']=parseFloat(_0x8ce07a)+parseFloat(_0x3c9f20[_0x14ba0b(0xe1)]),_0x3c9f20[_0x14ba0b(0x94)]=_0x194608,console['log'](_0x3c9f20);const _0x4d79e1=await _0x3c9f20['save']();console[_0x14ba0b(0x8f)](0x1b207);const _0x256be1=await c_payment_data[_0x14ba0b(0xc1)]({'invoice':_0x40cd48[_0x14ba0b(0xf5)][_0x14ba0b(0x8d)],'reason':'Sale\x20Return'});console[_0x14ba0b(0x8f)]('c_payment',_0x256be1),_0x256be1['amount']=_0x194608,await _0x256be1[_0x14ba0b(0xa6)]();let _0x5b915e=new Date(),_0x2ce8df=('0'+_0x5b915e[_0x14ba0b(0xe7)]())[_0x14ba0b(0xa5)](-0x2),_0x3d50d8=('0'+(_0x5b915e['getMonth']()+0x1))[_0x14ba0b(0xa5)](-0x2),_0x3b1ea9=_0x5b915e[_0x14ba0b(0xd6)](),_0x11f0f6=_0x3b1ea9+'-'+_0x3d50d8+'-'+_0x2ce8df;const _0x31692d=new customer_payment({'invoice':_0x262d86,'date':_0x3b1ea9+'-'+_0x3d50d8+'-'+_0x2ce8df,'customer':_0xad565b,'reason':_0x14ba0b(0x82),'amount':_0x8ce07a}),_0x45cbd3=await _0x31692d[_0x14ba0b(0xa6)]();_0x40cd48[_0x14ba0b(0xda)]('success',_0x14ba0b(0xeb)),_0x136bcb[_0x14ba0b(0xa3)](_0x14ba0b(0x83));}catch(_0x5c5c46){console['log'](_0x5c5c46);}}),router['get'](a0_0x2504a7(0xdc),auth,async(_0x2ab93c,_0xcbf43a)=>{var _0x283b0e=a0_0x2504a7;try{const {username:_0x675654,email:_0x36f514,role:_0x22b572}=_0x2ab93c['user'],_0x109ea8=_0x2ab93c[_0x283b0e(0xf7)],_0x26d704=await profile[_0x283b0e(0xc1)]({'email':_0x109ea8[_0x283b0e(0xcd)]}),_0x144e84=await master_shop[_0x283b0e(0xbe)]();console['log'](_0x283b0e(0x8a),_0x144e84);const _0x13e2e4=_0x2ab93c['params']['id'],_0x1130ef=await sales_return[_0x283b0e(0xc4)](_0x13e2e4);console[_0x283b0e(0x8f)](_0x1130ef);const _0x1485f7=await customer[_0x283b0e(0xc1)]({'name':_0x1130ef[_0x283b0e(0xec)]});console[_0x283b0e(0x8f)](_0x1485f7);if(_0x144e84[0x0]['language']==_0x283b0e(0xd8)){var _0x495e87=users[_0x283b0e(0x9c)];console[_0x283b0e(0x8f)](_0x495e87);}else{if(_0x144e84[0x0]['language']==_0x283b0e(0x9e))var _0x495e87=users[_0x283b0e(0x9e)];else{if(_0x144e84[0x0][_0x283b0e(0xf8)]==_0x283b0e(0xd3))var _0x495e87=users[_0x283b0e(0xd3)];else{if(_0x144e84[0x0][_0x283b0e(0xf8)]==_0x283b0e(0xf2))var _0x495e87=users[_0x283b0e(0xf2)];else{if(_0x144e84[0x0][_0x283b0e(0xf8)]==_0x283b0e(0xfa))var _0x495e87=users[_0x283b0e(0xfa)];else{if(_0x144e84[0x0][_0x283b0e(0xf8)]==_0x283b0e(0xa9))var _0x495e87=users[_0x283b0e(0x8b)];else{if(_0x144e84[0x0]['language']==_0x283b0e(0xe2))var _0x495e87=users[_0x283b0e(0xe2)];else{if(_0x144e84[0x0]['language']==_0x283b0e(0xc7))var _0x495e87=users[_0x283b0e(0xba)];}}}}}}}_0xcbf43a[_0x283b0e(0xde)](_0x283b0e(0xc9),{'success':_0x2ab93c[_0x283b0e(0xda)](_0x283b0e(0xa1)),'errors':_0x2ab93c[_0x283b0e(0xda)]('errors'),'role':_0x109ea8,'profile':_0x26d704,'master_shop':_0x144e84,'customers':_0x1485f7,'sales':_0x1130ef,'language':_0x495e87});}catch(_0x3e7624){console[_0x283b0e(0x8f)](_0x3e7624);}}),module['exports']=router;function a0_0xb143(){var _0x2b5f9b=['due_amount','$product_details.product_code','return_sale_edit_finished','product_code_QA','sales_return_finished','status','return_qty','bin','English','21069Krgrxm','Hindi','message','$customer_docs','success','bay','redirect','$product_details.secondary_code','slice','save','314327xzpkuv','$product_details.primary_code','Portuguese\x20(BR)','express','413631WJcJlU','new\x20new_data','product_stock','type','$product_details','data','product_code','for_categorize','../public/language/languages.json','$product_details.type','/sales_return_finished/view','purchase\x20return\x20successfully','sale_qty','125868HTKCOA','map','Arabic','return_sale','stock','aggregate','find','Finished\x20Goods','$product_details.rack','findOne','primary_code','customers','findById','return_sale_QA','$product_details.bin','Arabic\x20(ae)','$name','sales_return_invoice','note','product_name_QA','subtract','email','Sale\x20Return','get','post','160ngOJni','old_data','German','Router','/view','getFullYear','params','English\x20(US)','$product_details.product_name','flash','product_details','/invoice/:id','764Atljfh','render','errors','sales_quantity_QA','paid_amount','Chinese','date','$product_details.floorlevel','$product_details.storage','warehouse_name','getDate','/give_payment/:id','floorlevel','foreach\x20newproduct','payment\x20successfull','customer','string','secondary_code','stocks','Return\x20Rooms','2034728HOFFfy','Spanish','$product_details.product_stock','old_warehouse_data','body','stocks_QA','user','language','secondary_code_QA','French','json','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','forEach','$product_details._id','product_name','Returned\x20Payment\x20For\x20Sale\x20Return','/sales_return/view','92632wFghEw','return_qty_QA','primary_code_QA','ToWarehouse','../models/all_models','/view/:id','master','Portuguese','suppliers','invoice','175vpMtEO','log','285EmHIry','sales_quantity','663377MWzCiv','420qDtErl'];a0_0xb143=function(){return _0x2b5f9b;};return a0_0xb143();}