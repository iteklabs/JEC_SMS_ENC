function a0_0x4a1f(_0x1d76d6,_0x3b78e5){var _0x45a310=a0_0x45a3();return a0_0x4a1f=function(_0x4a1f47,_0xf3b88f){_0x4a1f47=_0x4a1f47-0xd4;var _0x2d0b28=_0x45a310[_0x4a1f47];return _0x2d0b28;},a0_0x4a1f(_0x1d76d6,_0x3b78e5);}function a0_0x45a3(){var _0x1333fa=['email','return_sale','types','customers','24349820hclNHt','/sales_return_finished/view','/sales_return/view','$product_details.product_code','old_warehouse_data','/view/:id','3puCDRa','note','invoice','stocks_QA','map','suppliers','Returned\x20Payment\x20For\x20Sale\x20Return','../public/language/languages.json','message','1903265ipCpaz','primary_code','language','../models/all_models','Finished\x20Goods','French','$product_details.bay','$product_details.storage','$product_details.floorlevel','German','new\x20new_data','product_name','findById','product_code','Arabic','type','276306NpoFjm','1843505DQTyZH','$customer_docs','Portuguese','post','subtract','customer_docs','bin','English','Chinese','8fCKnHC','return_qty_QA','save','get','8gzrJRO','purchase\x20return\x20successfully','English\x20(US)','QA\x20Warehouse','Arabic\x20(ae)','old_data','errors','slice','log','data','json','back','Portuguese\x20(BR)','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','Router','flash','primary_code_QA','aggregate','due_amount','$product_details.product_name','c_payment','paid_amount','2273438xdAtSS','secondary_code_QA','findOne','sales_return_finished','express','product_details','success','warehouse_name','$product_details.type','params','$product_details.product_stock','/view','exports','stock','ToRoom','product_stock','body','amount','stocks','10wVComg','521596yBspTT','forEach','$product_details.primary_code','Hindi','sale_qty','/give_payment/:id','product_code_QA','render','Sale\x20Return','getDate','payment\x20successfull','$product_details.bin','redirect','user','secondary_code','for_categorize','getFullYear','find','ToWarehouse','customer','2499219VUtovh','Spanish','$name','getMonth','bay','$product_details.secondary_code','return_sale_QA','date','floorlevel','sales_quantity','$product_details','return_qty','status','name','$product_details.rack','Enabled'];a0_0x45a3=function(){return _0x1333fa;};return a0_0x45a3();}var a0_0x459444=a0_0x4a1f;(function(_0x244750,_0x25af3c){var _0x4d2696=a0_0x4a1f,_0x3beb65=_0x244750();while(!![]){try{var _0x911079=parseInt(_0x4d2696(0x12f))/0x1+parseInt(_0x4d2696(0x11b))/0x2*(parseInt(_0x4d2696(0xde))/0x3)+-parseInt(_0x4d2696(0x105))/0x4*(-parseInt(_0x4d2696(0xf8))/0x5)+parseInt(_0x4d2696(0xf7))/0x6+parseInt(_0x4d2696(0xe7))/0x7+parseInt(_0x4d2696(0x101))/0x8*(parseInt(_0x4d2696(0x143))/0x9)+-parseInt(_0x4d2696(0x12e))/0xa*(parseInt(_0x4d2696(0xd8))/0xb);if(_0x911079===_0x25af3c)break;else _0x3beb65['push'](_0x3beb65['shift']());}catch(_0x516488){_0x3beb65['push'](_0x3beb65['shift']());}}}(a0_0x45a3,0xbde06));const express=require(a0_0x459444(0x11f)),app=express(),router=express[a0_0x459444(0x113)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x459444(0xea)),auth=require('../middleware/auth'),users=require(a0_0x459444(0xe5));router[a0_0x459444(0x104)](a0_0x459444(0x126),auth,async(_0x14884d,_0x21a1b4)=>{var _0x10c58a=a0_0x459444;try{const {username:_0x15aaa3,email:_0x37c677,role:_0x203704}=_0x14884d[_0x10c58a(0x13c)],_0x5ce2cd=_0x14884d[_0x10c58a(0x13c)],_0x13c1d1=await profile['findOne']({'email':_0x5ce2cd['email']}),_0x514d2=await master_shop[_0x10c58a(0x140)](),_0x325450=await sales_return_finished['aggregate']([{'$lookup':{'from':_0x10c58a(0xd7),'localField':_0x10c58a(0x142),'foreignField':_0x10c58a(0x150),'as':_0x10c58a(0xfd)}},{'$unwind':_0x10c58a(0xf9)}]);if(_0x514d2[0x0][_0x10c58a(0xe9)]=='English\x20(US)'){var _0x45c428=users[_0x10c58a(0xff)];console[_0x10c58a(0x10d)](_0x45c428);}else{if(_0x514d2[0x0][_0x10c58a(0xe9)]==_0x10c58a(0x132))var _0x45c428=users[_0x10c58a(0x132)];else{if(_0x514d2[0x0][_0x10c58a(0xe9)]==_0x10c58a(0xf0))var _0x45c428=users[_0x10c58a(0xf0)];else{if(_0x514d2[0x0][_0x10c58a(0xe9)]==_0x10c58a(0x144))var _0x45c428=users[_0x10c58a(0x144)];else{if(_0x514d2[0x0][_0x10c58a(0xe9)]=='French')var _0x45c428=users[_0x10c58a(0xec)];else{if(_0x514d2[0x0][_0x10c58a(0xe9)]=='Portuguese\x20(BR)')var _0x45c428=users[_0x10c58a(0xfa)];else{if(_0x514d2[0x0][_0x10c58a(0xe9)]=='Chinese')var _0x45c428=users[_0x10c58a(0x100)];else{if(_0x514d2[0x0]['language']==_0x10c58a(0x109))var _0x45c428=users[_0x10c58a(0xf5)];}}}}}}}_0x21a1b4[_0x10c58a(0x136)](_0x10c58a(0x11e),{'success':_0x14884d[_0x10c58a(0x114)](_0x10c58a(0x121)),'errors':_0x14884d[_0x10c58a(0x114)](_0x10c58a(0x10b)),'role':_0x5ce2cd,'profile':_0x13c1d1,'master_shop':_0x514d2,'user':_0x325450,'language':_0x45c428});}catch(_0x1be88e){console[_0x10c58a(0x10d)](_0x1be88e);}}),router['get'](a0_0x459444(0xdd),auth,async(_0xfce2f2,_0xad84b2)=>{var _0x390ea1=a0_0x459444;try{const {username:_0x479224,email:_0x80f723,role:_0x43d66a}=_0xfce2f2['user'],_0x4ed213=_0xfce2f2[_0x390ea1(0x13c)],_0x3a429e=await profile[_0x390ea1(0x11d)]({'email':_0x4ed213[_0x390ea1(0xd4)]}),_0xf7c3b2=await master_shop['find']();console[_0x390ea1(0x10d)]('master',_0xf7c3b2);const _0x41cd3d=_0xfce2f2['params']['id'];console['log'](_0x41cd3d);var _0x3afa6f=['Return\x20Rooms'];const _0x3df628=await sales_return_finished[_0x390ea1(0xf3)](_0x41cd3d),_0x177f69=await warehouse[_0x390ea1(0x116)]([{'$match':{'name':_0x3df628[_0x390ea1(0x141)],'room':_0x3df628[_0x390ea1(0x129)]}},{'$unwind':_0x390ea1(0x14d)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x390ea1(0x118)},'product_stock':{'$first':_0x390ea1(0x125)},'bay':{'$first':_0x390ea1(0xed)},'bin':{'$first':_0x390ea1(0x13a)},'type':{'$first':_0x390ea1(0x123)},'floorlevel':{'$first':_0x390ea1(0xef)},'primary_code':{'$first':_0x390ea1(0x131)},'secondary_code':{'$first':_0x390ea1(0x148)},'product_code':{'$first':_0x390ea1(0xdb)},'storage':{'$first':_0x390ea1(0xee)},'rack':{'$first':_0x390ea1(0x151)}}}]);console[_0x390ea1(0x10d)](_0x177f69);const _0x10dfd2=await warehouse[_0x390ea1(0x116)]([{'$match':{'status':_0x390ea1(0x152),'warehouse_category':_0x390ea1(0xeb)}},{'$group':{'_id':_0x390ea1(0x145),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x24d110=await warehouse['aggregate']([{'$match':{'status':_0x390ea1(0x152),'name':_0x390ea1(0x108)}},{'$group':{'_id':_0x390ea1(0x145),'name':{'$first':_0x390ea1(0x145)}}},{'$sort':{'name':0x1}}]),_0x46f2ed=await product['find']({});if(_0xf7c3b2[0x0][_0x390ea1(0xe9)]==_0x390ea1(0x107)){var _0xe53aae=users[_0x390ea1(0xff)];console[_0x390ea1(0x10d)](_0xe53aae);}else{if(_0xf7c3b2[0x0][_0x390ea1(0xe9)]==_0x390ea1(0x132))var _0xe53aae=users['Hindi'];else{if(_0xf7c3b2[0x0]['language']==_0x390ea1(0xf0))var _0xe53aae=users[_0x390ea1(0xf0)];else{if(_0xf7c3b2[0x0][_0x390ea1(0xe9)]==_0x390ea1(0x144))var _0xe53aae=users[_0x390ea1(0x144)];else{if(_0xf7c3b2[0x0][_0x390ea1(0xe9)]==_0x390ea1(0xec))var _0xe53aae=users[_0x390ea1(0xec)];else{if(_0xf7c3b2[0x0][_0x390ea1(0xe9)]=='Portuguese\x20(BR)')var _0xe53aae=users[_0x390ea1(0xfa)];else{if(_0xf7c3b2[0x0]['language']==_0x390ea1(0x100))var _0xe53aae=users[_0x390ea1(0x100)];else{if(_0xf7c3b2[0x0][_0x390ea1(0xe9)]==_0x390ea1(0x109))var _0xe53aae=users[_0x390ea1(0xf5)];}}}}}}}_0xad84b2[_0x390ea1(0x136)]('return_sale_edit_finished',{'success':_0xfce2f2['flash'](_0x390ea1(0x121)),'errors':_0xfce2f2[_0x390ea1(0x114)](_0x390ea1(0x10b)),'role':_0x4ed213,'profile':_0x3a429e,'master_shop':_0xf7c3b2,'user':_0x3df628,'stock':_0x177f69,'unit':_0x46f2ed,'language':_0xe53aae,'warehouses':_0x10dfd2,'rooms':_0x3afa6f,'warehouse_QA':_0x24d110});}catch(_0x35bde7){console['log'](_0x35bde7);}}),router[a0_0x459444(0xfb)](a0_0x459444(0xdd),auth,async(_0x55d91a,_0x5dd5b5)=>{var _0x5af5b8=a0_0x459444;if(_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x13e)]=='QA')try{const _0xd7252d=_0x55d91a[_0x5af5b8(0x124)]['id'],_0x516aa7=await sales_return[_0x5af5b8(0x11d)]({'invoice':_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xe0)]}),_0x345150=await warehouse['findOne']({'name':_0x516aa7[_0x5af5b8(0x141)],'room':_0x516aa7[_0x5af5b8(0x129)]}),{invoice:_0x210454,customer:_0x3f507e,date:_0x20e568,warehouse_name:_0x1f72d9,product_name:_0x4c3636,primary_code:_0x4c7c10,secondary_code:_0x19d34e,product_code:_0x25e09c,sales_quantity:_0x1af1ba,stocks:_0x555ca6,return_qty:_0x134882,note:_0x30b81c,to_warehouse_name_QA:_0x344565,to_Room_name_QA:_0x2cb896}=_0x55d91a[_0x5af5b8(0x12b)];if(typeof product_name_QA=='string')var _0x327881=[_0x55d91a[_0x5af5b8(0x12b)]['product_name_QA']],_0x1f0e91=[_0x55d91a[_0x5af5b8(0x12b)]['primary_code_QA']],_0x12410=[_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x11c)]],_0x4aead1=[_0x55d91a['body'][_0x5af5b8(0x135)]],_0xac8cc5=[_0x55d91a[_0x5af5b8(0x12b)]['sales_quantity_QA']],_0x1e62c4=[_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xe1)]],_0x1d22b3=[_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x102)]];else var _0x327881=[..._0x55d91a['body']['product_name_QA']],_0x1f0e91=[..._0x55d91a['body'][_0x5af5b8(0x115)]],_0x12410=[..._0x55d91a[_0x5af5b8(0x12b)]['secondary_code_QA']],_0x4aead1=[..._0x55d91a[_0x5af5b8(0x12b)]['product_code_QA']],_0xac8cc5=[..._0x55d91a[_0x5af5b8(0x12b)]['sales_quantity_QA']],_0x1e62c4=[..._0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xe1)]],_0x1d22b3=[..._0x55d91a['body'][_0x5af5b8(0x102)]];const _0x1b8b96=_0x327881[_0x5af5b8(0xe2)](_0x19bccd=>{return _0x19bccd={'product_name':_0x19bccd};});_0x1f0e91[_0x5af5b8(0x130)]((_0x27a361,_0x57e2c4)=>{var _0x22ceba=_0x5af5b8;_0x1b8b96[_0x57e2c4][_0x22ceba(0xe8)]=_0x27a361;}),_0x12410['forEach']((_0xe51b7f,_0x18b915)=>{var _0x56dd8d=_0x5af5b8;_0x1b8b96[_0x18b915][_0x56dd8d(0x13d)]=_0xe51b7f;}),_0x4aead1[_0x5af5b8(0x130)]((_0x364e7c,_0x2f0cce)=>{var _0x42add4=_0x5af5b8;_0x1b8b96[_0x2f0cce][_0x42add4(0xf4)]=_0x364e7c;}),_0xac8cc5['forEach']((_0x12de3d,_0x127f6a)=>{var _0xdc3866=_0x5af5b8;_0x1b8b96[_0x127f6a][_0xdc3866(0x133)]=_0x12de3d;}),_0x1e62c4[_0x5af5b8(0x130)]((_0x5735fd,_0x31eae7)=>{var _0xac3c83=_0x5af5b8;_0x1b8b96[_0x31eae7][_0xac3c83(0x128)]=_0x5735fd;}),_0x1d22b3[_0x5af5b8(0x130)]((_0x5bb94e,_0x51bba2)=>{var _0xc8f481=_0x5af5b8;_0x1b8b96[_0x51bba2][_0xc8f481(0x14e)]=_0x5bb94e;}),_0x516aa7[_0x5af5b8(0x149)][_0x5af5b8(0x130)](_0x3cff5b=>{var _0x596cdd=_0x5af5b8;const _0x5636f9=_0x345150[_0x596cdd(0x120)]['map'](_0x294c16=>{var _0x393130=_0x596cdd;_0x294c16[_0x393130(0xf2)]==_0x3cff5b[_0x393130(0xf2)]&&(_0x294c16[_0x393130(0x12a)]=parseInt(_0x294c16[_0x393130(0x12a)])+parseInt(_0x3cff5b[_0x393130(0x14e)]));});}),await _0x345150[_0x5af5b8(0x103)](),_0x516aa7[_0x5af5b8(0xe0)]=_0x210454,_0x516aa7[_0x5af5b8(0x142)]=_0x3f507e,_0x516aa7['date']=_0x20e568,_0x516aa7[_0x5af5b8(0x122)]=_0x1f72d9,_0x516aa7['return_sale_QA']=_0x1b8b96,_0x516aa7['note']=_0x30b81c,_0x516aa7['ToWarehouse']=_0x344565,_0x516aa7[_0x5af5b8(0x129)]=_0x2cb896;const _0x4d44f2=await _0x516aa7[_0x5af5b8(0x103)](),_0x165f7c=await c_payment_data[_0x5af5b8(0x11d)]({'invoice':_0x55d91a[_0x5af5b8(0x12b)]['invoice'],'reason':_0x5af5b8(0x137)});_0x165f7c[_0x5af5b8(0xe3)]=_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xe3)],_0x165f7c['date']=_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x14a)],await _0x165f7c['save'](),_0x55d91a[_0x5af5b8(0x114)](_0x5af5b8(0x121),_0x5af5b8(0x106)),_0x5dd5b5[_0x5af5b8(0x13b)](_0x5af5b8(0xd9));}catch(_0x342b5a){console[_0x5af5b8(0x10d)](_0x342b5a),_0x5dd5b5[_0x5af5b8(0x14f)](0xc8)[_0x5af5b8(0x10f)]({'message':_0x342b5a[_0x5af5b8(0xe6)]});}else try{const _0x5e6d55=_0x55d91a[_0x5af5b8(0x124)]['id'];console['log'](_0x5e6d55);const _0x105167=await sales_return[_0x5af5b8(0x11d)]({'invoice':_0x55d91a[_0x5af5b8(0x12b)]['invoice']});console[_0x5af5b8(0x10d)](_0x5af5b8(0x10a),_0x105167);const _0x5b9ea4=await warehouse[_0x5af5b8(0x11d)]({'name':_0x105167['ToWarehouse'],'room':_0x105167['ToRoom']});console['log'](_0x5af5b8(0xdc),_0x5b9ea4);const {invoice:_0x9f1a29,customer:_0x3f9c27,date:_0x476304,warehouse_name:_0x3622f7,product_name:_0x31c5da,primary_code:_0x49cf5e,secondary_code:_0x548eff,product_code:_0x28c4b0,sales_quantity:_0x4895f9,stocks:_0x3006fe,return_qty:_0x20b343,note:_0x1f9f2e,to_warehouse_name:_0x20037a,to_Room_name:_0x38169a}=_0x55d91a[_0x5af5b8(0x12b)];console[_0x5af5b8(0x10d)](_0x55d91a[_0x5af5b8(0x12b)]);if(typeof _0x31c5da=='string')var _0x327881=[_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xf2)]],_0x1f0e91=[_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xe8)]],_0x12410=[_0x55d91a['body'][_0x5af5b8(0x13d)]],_0x4aead1=[_0x55d91a['body'][_0x5af5b8(0xf4)]],_0xac8cc5=[_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x14c)]],_0x1e62c4=[_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x12d)]],_0x1d22b3=[_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x14e)]],_0x2317a5=[_0x55d91a['body'][_0x5af5b8(0x147)]],_0x203025=[_0x55d91a[_0x5af5b8(0x12b)]['bin']],_0x2c8346=[_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xd6)]],_0x246091=[_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x14b)]];else var _0x327881=[..._0x55d91a['body'][_0x5af5b8(0xf2)]],_0x1f0e91=[..._0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xe8)]],_0x12410=[..._0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x13d)]],_0x4aead1=[..._0x55d91a['body'][_0x5af5b8(0xf4)]],_0xac8cc5=[..._0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x14c)]],_0x1e62c4=[..._0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x12d)]],_0x1d22b3=[..._0x55d91a['body']['return_qty']],_0x2317a5=[..._0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x147)]],_0x203025=[..._0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xfe)]],_0x2c8346=[..._0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xd6)]],_0x246091=[..._0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x14b)]];const _0x2028db=_0x327881[_0x5af5b8(0xe2)](_0x5eb299=>{return _0x5eb299={'product_name':_0x5eb299};});_0x1f0e91['forEach']((_0x1c986f,_0x448f17)=>{_0x2028db[_0x448f17]['primary_code']=_0x1c986f;}),_0x12410['forEach']((_0x1c13be,_0x430108)=>{_0x2028db[_0x430108]['secondary_code']=_0x1c13be;}),_0x4aead1[_0x5af5b8(0x130)]((_0x34cbe9,_0x2669ab)=>{var _0x869851=_0x5af5b8;_0x2028db[_0x2669ab][_0x869851(0xf4)]=_0x34cbe9;}),_0xac8cc5[_0x5af5b8(0x130)]((_0x156d36,_0x1c9b03)=>{var _0x4d22ba=_0x5af5b8;_0x2028db[_0x1c9b03][_0x4d22ba(0x133)]=_0x156d36;}),_0x1e62c4[_0x5af5b8(0x130)]((_0x5cf8b2,_0x1afaa6)=>{_0x2028db[_0x1afaa6]['stock']=_0x5cf8b2;}),_0x1d22b3[_0x5af5b8(0x130)]((_0x323513,_0xe59bc5)=>{_0x2028db[_0xe59bc5]['return_qty']=_0x323513;}),_0x2317a5[_0x5af5b8(0x130)]((_0x4a3f78,_0x86ce83)=>{var _0x98829b=_0x5af5b8;_0x2028db[_0x86ce83][_0x98829b(0x147)]=_0x4a3f78;}),_0x203025[_0x5af5b8(0x130)]((_0x383935,_0x56ce92)=>{_0x2028db[_0x56ce92]['bin']=_0x383935;}),_0x2c8346['forEach']((_0x41a902,_0x14e013)=>{var _0x50d2d2=_0x5af5b8;_0x2028db[_0x14e013][_0x50d2d2(0xf6)]=_0x41a902;}),_0x246091[_0x5af5b8(0x130)]((_0x1db7d8,_0x4e4437)=>{var _0x5ae79a=_0x5af5b8;_0x2028db[_0x4e4437][_0x5ae79a(0x14b)]=_0x1db7d8;});var _0x1e4179=0x0;_0x2028db[_0x5af5b8(0x130)](_0xba1820=>{var _0x327da6=_0x5af5b8;console['log']('foreach\x20newproduct',_0xba1820),(parseInt(_0xba1820['sale_qty'])<parseInt(_0xba1820[_0x327da6(0x14e)])||parseInt(_0xba1820[_0x327da6(0x128)])<parseInt(_0xba1820[_0x327da6(0x14e)])&&parseInt(_0xba1820[_0x327da6(0x133)])>parseInt(_0xba1820[_0x327da6(0x14e)])||parseInt(_0xba1820['return_qty'])==0x0)&&_0x1e4179++;});if(_0x1e4179!=0x0)return _0x55d91a['flash'](_0x5af5b8(0x10b),_0x5af5b8(0x112)),_0x5dd5b5[_0x5af5b8(0x13b)](_0x5af5b8(0x110));_0x105167[_0x5af5b8(0xd5)][_0x5af5b8(0x130)](_0x1db7c6=>{var _0x1b192b=_0x5af5b8;const _0x22f7a8=_0x5b9ea4[_0x1b192b(0x120)][_0x1b192b(0xe2)](_0xb442b4=>{var _0x52f451=_0x1b192b;_0xb442b4[_0x52f451(0xf2)]==_0x1db7c6[_0x52f451(0xf2)]&&_0xb442b4[_0x52f451(0x14b)]==_0x1db7c6[_0x52f451(0x14b)]&&_0xb442b4[_0x52f451(0xf6)]==_0x1db7c6['type']&&_0xb442b4[_0x52f451(0xfe)]==_0x1db7c6[_0x52f451(0xfe)]&&_0xb442b4['bay']==_0x1db7c6[_0x52f451(0x147)]&&(_0xb442b4['product_stock']=parseInt(_0xb442b4['product_stock'])+parseInt(_0x1db7c6['return_qty']));});}),console[_0x5af5b8(0x10d)](_0x5af5b8(0xdc),_0x5b9ea4),await _0x5b9ea4[_0x5af5b8(0x103)](),_0x105167[_0x5af5b8(0xe0)]=_0x9f1a29,_0x105167[_0x5af5b8(0x142)]=_0x3f9c27,_0x105167[_0x5af5b8(0x14a)]=_0x476304,_0x105167[_0x5af5b8(0x122)]=_0x3622f7,_0x105167[_0x5af5b8(0xd5)]=_0x2028db,_0x105167[_0x5af5b8(0xdf)]=_0x1f9f2e,_0x105167['ToWarehouse']=_0x20037a,_0x105167['ToRoom']=_0x38169a;const _0x21fad4=await _0x105167['save']();console['log'](_0x5af5b8(0xf1),_0x21fad4);const _0x12ec47=await c_payment_data[_0x5af5b8(0x11d)]({'invoice':_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xe0)],'reason':_0x5af5b8(0x137)});_0x12ec47[_0x5af5b8(0xe3)]=_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0xe3)],_0x12ec47['date']=_0x55d91a[_0x5af5b8(0x12b)][_0x5af5b8(0x14a)],await _0x12ec47[_0x5af5b8(0x103)](),_0x55d91a[_0x5af5b8(0x114)](_0x5af5b8(0x121),_0x5af5b8(0x106)),_0x5dd5b5[_0x5af5b8(0x13b)](_0x5af5b8(0xda));}catch(_0x56287b){console[_0x5af5b8(0x10d)](_0x56287b),_0x5dd5b5[_0x5af5b8(0x14f)](0xc8)[_0x5af5b8(0x10f)]({'message':_0x56287b[_0x5af5b8(0xe6)]});}}),router[a0_0x459444(0xfb)](a0_0x459444(0x134),auth,async(_0x436287,_0x53d789)=>{var _0xcebb3c=a0_0x459444;try{const _0x271a10=_0x436287['params']['id'],{invoice:_0x5b1067,customer:_0x4cdda8,payable_to_customer:_0x32de42,paid_amount:_0x171408}=_0x436287['body'],_0x548666=await sales_return[_0xcebb3c(0xf3)](_0x271a10);console[_0xcebb3c(0x10d)](_0xcebb3c(0x10e),_0x548666),console[_0xcebb3c(0x10d)](_0x32de42),console[_0xcebb3c(0x10d)](_0x171408);var _0x1d04c1=_0x32de42-_0x171408;console['log'](_0xcebb3c(0xfc),_0x1d04c1),_0x548666[_0xcebb3c(0x11a)]=parseFloat(_0x171408)+parseFloat(_0x548666[_0xcebb3c(0x11a)]),_0x548666[_0xcebb3c(0x117)]=_0x1d04c1,console[_0xcebb3c(0x10d)](_0x548666);const _0x1a852b=await _0x548666[_0xcebb3c(0x103)]();console[_0xcebb3c(0x10d)](0x1b207);const _0x49551d=await c_payment_data[_0xcebb3c(0x11d)]({'invoice':_0x436287[_0xcebb3c(0x12b)][_0xcebb3c(0xe0)],'reason':'Sale\x20Return'});console[_0xcebb3c(0x10d)](_0xcebb3c(0x119),_0x49551d),_0x49551d[_0xcebb3c(0x12c)]=_0x1d04c1,await _0x49551d[_0xcebb3c(0x103)]();let _0x516d35=new Date(),_0x1c5d97=('0'+_0x516d35[_0xcebb3c(0x138)]())[_0xcebb3c(0x10c)](-0x2),_0x3a7b17=('0'+(_0x516d35[_0xcebb3c(0x146)]()+0x1))[_0xcebb3c(0x10c)](-0x2),_0x345bab=_0x516d35[_0xcebb3c(0x13f)](),_0x304470=_0x345bab+'-'+_0x3a7b17+'-'+_0x1c5d97;const _0x14b64c=new customer_payment({'invoice':_0x5b1067,'date':_0x345bab+'-'+_0x3a7b17+'-'+_0x1c5d97,'customer':_0x4cdda8,'reason':_0xcebb3c(0xe4),'amount':_0x171408}),_0x4e0558=await _0x14b64c[_0xcebb3c(0x103)]();_0x436287['flash'](_0xcebb3c(0x121),_0xcebb3c(0x139)),_0x53d789[_0xcebb3c(0x13b)](_0xcebb3c(0xda));}catch(_0x1c7149){console['log'](_0x1c7149);}}),router[a0_0x459444(0x104)]('/invoice/:id',auth,async(_0x19c51f,_0x406632)=>{var _0x48c8e6=a0_0x459444;try{const {username:_0xd05823,email:_0x4ae412,role:_0x1f1ac3}=_0x19c51f['user'],_0xdf2e24=_0x19c51f[_0x48c8e6(0x13c)],_0x94a1ac=await profile[_0x48c8e6(0x11d)]({'email':_0xdf2e24['email']}),_0x4ebc47=await master_shop[_0x48c8e6(0x140)]();console[_0x48c8e6(0x10d)]('master',_0x4ebc47);const _0x37337c=_0x19c51f[_0x48c8e6(0x124)]['id'],_0x97ad2b=await sales_return[_0x48c8e6(0xf3)](_0x37337c);console[_0x48c8e6(0x10d)](_0x97ad2b);const _0x43a809=await customer[_0x48c8e6(0x11d)]({'name':_0x97ad2b[_0x48c8e6(0x142)]});console[_0x48c8e6(0x10d)](_0x43a809);if(_0x4ebc47[0x0][_0x48c8e6(0xe9)]==_0x48c8e6(0x107)){var _0x8c5620=users[_0x48c8e6(0xff)];console['log'](_0x8c5620);}else{if(_0x4ebc47[0x0][_0x48c8e6(0xe9)]==_0x48c8e6(0x132))var _0x8c5620=users[_0x48c8e6(0x132)];else{if(_0x4ebc47[0x0][_0x48c8e6(0xe9)]==_0x48c8e6(0xf0))var _0x8c5620=users[_0x48c8e6(0xf0)];else{if(_0x4ebc47[0x0][_0x48c8e6(0xe9)]==_0x48c8e6(0x144))var _0x8c5620=users[_0x48c8e6(0x144)];else{if(_0x4ebc47[0x0][_0x48c8e6(0xe9)]==_0x48c8e6(0xec))var _0x8c5620=users[_0x48c8e6(0xec)];else{if(_0x4ebc47[0x0][_0x48c8e6(0xe9)]==_0x48c8e6(0x111))var _0x8c5620=users[_0x48c8e6(0xfa)];else{if(_0x4ebc47[0x0][_0x48c8e6(0xe9)]==_0x48c8e6(0x100))var _0x8c5620=users[_0x48c8e6(0x100)];else{if(_0x4ebc47[0x0]['language']==_0x48c8e6(0x109))var _0x8c5620=users['Arabic'];}}}}}}}_0x406632[_0x48c8e6(0x136)]('sales_return_invoice',{'success':_0x19c51f[_0x48c8e6(0x114)](_0x48c8e6(0x121)),'errors':_0x19c51f[_0x48c8e6(0x114)]('errors'),'role':_0xdf2e24,'profile':_0x94a1ac,'master_shop':_0x4ebc47,'customers':_0x43a809,'sales':_0x97ad2b,'language':_0x8c5620});}catch(_0x241dd5){console[_0x48c8e6(0x10d)](_0x241dd5);}}),module[a0_0x459444(0x127)]=router;