function a0_0xf180(){var _0x3e8858=['sales_return_invoice','$product_details.floorlevel','return_qty','user','English','new\x20new_data','return_qty_QA','forEach','ToWarehouse','5971506KMLdHI','redirect','Finished\x20Goods','product_details','paid_amount','stock','Sale\x20Return','/view','Arabic\x20(ae)','find','log','due_amount','bay','QA\x20Warehouse','string','save','$product_details.bin','Return\x20Rooms','/sales_return/view','for_categorize','foreach\x20newproduct','German','product_name','floorlevel','Router','date','success','product_stock','secondary_code','return_sale_edit_finished','/invoice/:id','warehouse_name','flash','aggregate','email','$product_details.bay','English\x20(US)','$product_details.storage','payment\x20successfull','subtract','$product_details.product_stock','sales_return_finished','product_name_QA','name','5DbBfoB','params','map','18wBuuPi','product_code','5482240FezyBb','body','Spanish','secondary_code_QA','22hmjWOp','slice','invoice','primary_code','3770655EcjKHA','2015877ODwLfs','25172020lOSrug','Chinese','exports','return_sale','Portuguese\x20(BR)','Arabic','$name','ToRoom','/give_payment/:id','customer_docs','$product_details.product_code','customer','bin','../models/all_models','$product_details.secondary_code','primary_code_QA','purchase\x20return\x20successfully','stocks','post','findById','errors','render','Hindi','stocks_QA','70538zIxqYC','express','status','Portuguese','getDate','master','French','product_code_QA','suppliers','return_sale_QA','/sales_return_finished/view','old_data','customers','$product_details.primary_code','old_warehouse_data','getMonth','$product_details.rack','language','../public/language/languages.json','sale_qty','Enabled','sales_quantity','getFullYear','235944DYxpPE','findOne','$product_details.product_name','data','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','$product_details.type','/view/:id','$customer_docs','types','note'];a0_0xf180=function(){return _0x3e8858;};return a0_0xf180();}function a0_0x3aac(_0x498dcc,_0x14fc76){var _0xf18099=a0_0xf180();return a0_0x3aac=function(_0x3aac7b,_0x544b61){_0x3aac7b=_0x3aac7b-0xf5;var _0x5b6ea0=_0xf18099[_0x3aac7b];return _0x5b6ea0;},a0_0x3aac(_0x498dcc,_0x14fc76);}var a0_0x5b3207=a0_0x3aac;(function(_0x4b4437,_0xe3e3bb){var _0x3d27f3=a0_0x3aac,_0x4058bc=_0x4b4437();while(!![]){try{var _0x537307=-parseInt(_0x3d27f3(0x123))/0x1*(-parseInt(_0x3d27f3(0x141))/0x2)+parseInt(_0x3d27f3(0x128))/0x3+parseInt(_0x3d27f3(0x11f))/0x4+parseInt(_0x3d27f3(0x11a))/0x5*(parseInt(_0x3d27f3(0x16b))/0x6)+-parseInt(_0x3d27f3(0x127))/0x7+-parseInt(_0x3d27f3(0x158))/0x8*(parseInt(_0x3d27f3(0x11d))/0x9)+-parseInt(_0x3d27f3(0x129))/0xa;if(_0x537307===_0xe3e3bb)break;else _0x4058bc['push'](_0x4058bc['shift']());}catch(_0x2f66bc){_0x4058bc['push'](_0x4058bc['shift']());}}}(a0_0xf180,0xaa9d3));const express=require(a0_0x5b3207(0x142)),app=express(),router=express[a0_0x5b3207(0x106)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require(a0_0x5b3207(0x136)),auth=require('../middleware/auth'),users=require(a0_0x5b3207(0x153));router['get'](a0_0x5b3207(0xf5),auth,async(_0x249f4d,_0x1f13d5)=>{var _0x407973=a0_0x5b3207;try{const {username:_0x294d10,email:_0xdabc01,role:_0xe5749e}=_0x249f4d['user'],_0xb61ae7=_0x249f4d[_0x407973(0x165)],_0xcbe8ef=await profile[_0x407973(0x159)]({'email':_0xb61ae7[_0x407973(0x110)]}),_0x2b8354=await master_shop['find'](),_0x2b0dc6=await sales_return_finished[_0x407973(0x10f)]([{'$lookup':{'from':_0x407973(0x14d),'localField':'customer','foreignField':_0x407973(0x119),'as':_0x407973(0x132)}},{'$unwind':_0x407973(0x15f)}]);if(_0x2b8354[0x0][_0x407973(0x152)]==_0x407973(0x112)){var _0x2de186=users[_0x407973(0x166)];console['log'](_0x2de186);}else{if(_0x2b8354[0x0]['language']=='Hindi')var _0x2de186=users[_0x407973(0x13f)];else{if(_0x2b8354[0x0][_0x407973(0x152)]==_0x407973(0x103))var _0x2de186=users[_0x407973(0x103)];else{if(_0x2b8354[0x0][_0x407973(0x152)]==_0x407973(0x121))var _0x2de186=users[_0x407973(0x121)];else{if(_0x2b8354[0x0][_0x407973(0x152)]==_0x407973(0x147))var _0x2de186=users['French'];else{if(_0x2b8354[0x0][_0x407973(0x152)]==_0x407973(0x12d))var _0x2de186=users[_0x407973(0x144)];else{if(_0x2b8354[0x0][_0x407973(0x152)]==_0x407973(0x12a))var _0x2de186=users[_0x407973(0x12a)];else{if(_0x2b8354[0x0][_0x407973(0x152)]=='Arabic\x20(ae)')var _0x2de186=users[_0x407973(0x12e)];}}}}}}}_0x1f13d5[_0x407973(0x13e)](_0x407973(0x117),{'success':_0x249f4d[_0x407973(0x10e)]('success'),'errors':_0x249f4d[_0x407973(0x10e)](_0x407973(0x13d)),'role':_0xb61ae7,'profile':_0xcbe8ef,'master_shop':_0x2b8354,'user':_0x2b0dc6,'language':_0x2de186});}catch(_0x46e11f){console[_0x407973(0xf8)](_0x46e11f);}}),router['get'](a0_0x5b3207(0x15e),auth,async(_0x53c855,_0x16442f)=>{var _0x50a02d=a0_0x5b3207;try{const {username:_0x13b3b3,email:_0x4b94d0,role:_0xc71c0a}=_0x53c855[_0x50a02d(0x165)],_0x2a85e7=_0x53c855[_0x50a02d(0x165)],_0x2f482=await profile[_0x50a02d(0x159)]({'email':_0x2a85e7[_0x50a02d(0x110)]}),_0x528a30=await master_shop['find']();console[_0x50a02d(0xf8)](_0x50a02d(0x146),_0x528a30);const _0x392c1f=_0x53c855[_0x50a02d(0x11b)]['id'];console[_0x50a02d(0xf8)](_0x392c1f);var _0x304c11=[_0x50a02d(0xff)];const _0x2f35ab=await sales_return_finished[_0x50a02d(0x13c)](_0x392c1f),_0x558a14=await warehouse['aggregate']([{'$match':{'name':_0x2f35ab[_0x50a02d(0x16a)],'room':_0x2f35ab[_0x50a02d(0x130)]}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x50a02d(0x15a)},'product_stock':{'$first':_0x50a02d(0x116)},'bay':{'$first':_0x50a02d(0x111)},'bin':{'$first':_0x50a02d(0xfe)},'type':{'$first':_0x50a02d(0x15d)},'floorlevel':{'$first':_0x50a02d(0x163)},'primary_code':{'$first':_0x50a02d(0x14e)},'secondary_code':{'$first':_0x50a02d(0x137)},'product_code':{'$first':_0x50a02d(0x133)},'storage':{'$first':_0x50a02d(0x113)},'rack':{'$first':_0x50a02d(0x151)}}}]);console[_0x50a02d(0xf8)](_0x558a14);const _0x423daf=await warehouse[_0x50a02d(0x10f)]([{'$match':{'status':_0x50a02d(0x155),'warehouse_category':_0x50a02d(0x16d)}},{'$group':{'_id':_0x50a02d(0x12f),'name':{'$first':_0x50a02d(0x12f)}}},{'$sort':{'name':0x1}}]),_0x4bea2e=await warehouse[_0x50a02d(0x10f)]([{'$match':{'status':_0x50a02d(0x155),'name':_0x50a02d(0xfb)}},{'$group':{'_id':_0x50a02d(0x12f),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),_0x34fd26=await product[_0x50a02d(0xf7)]({});if(_0x528a30[0x0][_0x50a02d(0x152)]==_0x50a02d(0x112)){var _0x397ec2=users[_0x50a02d(0x166)];console[_0x50a02d(0xf8)](_0x397ec2);}else{if(_0x528a30[0x0][_0x50a02d(0x152)]=='Hindi')var _0x397ec2=users['Hindi'];else{if(_0x528a30[0x0]['language']==_0x50a02d(0x103))var _0x397ec2=users[_0x50a02d(0x103)];else{if(_0x528a30[0x0][_0x50a02d(0x152)]==_0x50a02d(0x121))var _0x397ec2=users[_0x50a02d(0x121)];else{if(_0x528a30[0x0][_0x50a02d(0x152)]==_0x50a02d(0x147))var _0x397ec2=users[_0x50a02d(0x147)];else{if(_0x528a30[0x0]['language']==_0x50a02d(0x12d))var _0x397ec2=users['Portuguese'];else{if(_0x528a30[0x0]['language']=='Chinese')var _0x397ec2=users[_0x50a02d(0x12a)];else{if(_0x528a30[0x0]['language']==_0x50a02d(0xf6))var _0x397ec2=users[_0x50a02d(0x12e)];}}}}}}}_0x16442f['render'](_0x50a02d(0x10b),{'success':_0x53c855[_0x50a02d(0x10e)](_0x50a02d(0x108)),'errors':_0x53c855[_0x50a02d(0x10e)](_0x50a02d(0x13d)),'role':_0x2a85e7,'profile':_0x2f482,'master_shop':_0x528a30,'user':_0x2f35ab,'stock':_0x558a14,'unit':_0x34fd26,'language':_0x397ec2,'warehouses':_0x423daf,'rooms':_0x304c11,'warehouse_QA':_0x4bea2e});}catch(_0x379f03){console[_0x50a02d(0xf8)](_0x379f03);}}),router[a0_0x5b3207(0x13b)](a0_0x5b3207(0x15e),auth,async(_0xfa2d1e,_0xb7b8a4)=>{var _0x11999c=a0_0x5b3207;if(_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x101)]=='QA')try{const _0x1a6bdd=_0xfa2d1e[_0x11999c(0x11b)]['id'],_0x319944=await sales_return[_0x11999c(0x159)]({'invoice':_0xfa2d1e['body'][_0x11999c(0x125)]}),_0x185c67=await warehouse[_0x11999c(0x159)]({'name':_0x319944[_0x11999c(0x16a)],'room':_0x319944['ToRoom']}),{invoice:_0xab586b,customer:_0x11ef6b,date:_0x19067e,warehouse_name:_0x4bad09,product_name:_0x299f0e,primary_code:_0x2c08cd,secondary_code:_0x1fe857,product_code:_0x60cf26,sales_quantity:_0x1a0b4e,stocks:_0x544ac7,return_qty:_0x21d32e,note:_0x3d7424,to_warehouse_name_QA:_0x35a8cf,to_Room_name_QA:_0x4321fc}=_0xfa2d1e[_0x11999c(0x120)];if(typeof product_name_QA==_0x11999c(0xfc))var _0x35ffd5=[_0xfa2d1e['body'][_0x11999c(0x118)]],_0x3693c5=[_0xfa2d1e['body'][_0x11999c(0x138)]],_0x48856d=[_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x122)]],_0x5ceb03=[_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x148)]],_0x5c7401=[_0xfa2d1e[_0x11999c(0x120)]['sales_quantity_QA']],_0x20cb3f=[_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x140)]],_0x351ade=[_0xfa2d1e['body']['return_qty_QA']];else var _0x35ffd5=[..._0xfa2d1e['body'][_0x11999c(0x118)]],_0x3693c5=[..._0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x138)]],_0x48856d=[..._0xfa2d1e[_0x11999c(0x120)]['secondary_code_QA']],_0x5ceb03=[..._0xfa2d1e['body']['product_code_QA']],_0x5c7401=[..._0xfa2d1e[_0x11999c(0x120)]['sales_quantity_QA']],_0x20cb3f=[..._0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x140)]],_0x351ade=[..._0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x168)]];const _0x7ed7da=_0x35ffd5['map'](_0x123ff6=>{return _0x123ff6={'product_name':_0x123ff6};});_0x3693c5[_0x11999c(0x169)]((_0x13a713,_0x6e9409)=>{var _0x5e082e=_0x11999c;_0x7ed7da[_0x6e9409][_0x5e082e(0x126)]=_0x13a713;}),_0x48856d['forEach']((_0xf0dd01,_0x31668b)=>{var _0xb54abc=_0x11999c;_0x7ed7da[_0x31668b][_0xb54abc(0x10a)]=_0xf0dd01;}),_0x5ceb03[_0x11999c(0x169)]((_0x4f3006,_0x1fe8bc)=>{var _0x4db624=_0x11999c;_0x7ed7da[_0x1fe8bc][_0x4db624(0x11e)]=_0x4f3006;}),_0x5c7401[_0x11999c(0x169)]((_0x10ec52,_0x235dbd)=>{var _0x1ae18b=_0x11999c;_0x7ed7da[_0x235dbd][_0x1ae18b(0x154)]=_0x10ec52;}),_0x20cb3f['forEach']((_0x4cb10f,_0x436186)=>{var _0x5d81da=_0x11999c;_0x7ed7da[_0x436186][_0x5d81da(0x170)]=_0x4cb10f;}),_0x351ade['forEach']((_0x340a6e,_0x4837ff)=>{var _0x67547c=_0x11999c;_0x7ed7da[_0x4837ff][_0x67547c(0x164)]=_0x340a6e;}),_0x319944[_0x11999c(0x14a)][_0x11999c(0x169)](_0x5b0871=>{var _0x4d945f=_0x11999c;const _0x33c023=_0x185c67['product_details'][_0x4d945f(0x11c)](_0x32260f=>{var _0x2aba7b=_0x4d945f;_0x32260f[_0x2aba7b(0x104)]==_0x5b0871[_0x2aba7b(0x104)]&&(_0x32260f[_0x2aba7b(0x109)]=parseInt(_0x32260f[_0x2aba7b(0x109)])+parseInt(_0x5b0871[_0x2aba7b(0x164)]));});}),await _0x185c67[_0x11999c(0xfd)](),_0x319944[_0x11999c(0x125)]=_0xab586b,_0x319944[_0x11999c(0x134)]=_0x11ef6b,_0x319944[_0x11999c(0x107)]=_0x19067e,_0x319944[_0x11999c(0x10d)]=_0x4bad09,_0x319944[_0x11999c(0x14a)]=_0x7ed7da,_0x319944[_0x11999c(0x161)]=_0x3d7424,_0x319944['ToWarehouse']=_0x35a8cf,_0x319944[_0x11999c(0x130)]=_0x4321fc;const _0x47c62a=await _0x319944[_0x11999c(0xfd)](),_0x24d583=await c_payment_data[_0x11999c(0x159)]({'invoice':_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x125)],'reason':'Sale\x20Return'});_0x24d583[_0x11999c(0x149)]=_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x149)],_0x24d583[_0x11999c(0x107)]=_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x107)],await _0x24d583[_0x11999c(0xfd)](),_0xfa2d1e[_0x11999c(0x10e)](_0x11999c(0x108),'purchase\x20return\x20successfully'),_0xb7b8a4[_0x11999c(0x16c)](_0x11999c(0x14b));}catch(_0x567eb8){console[_0x11999c(0xf8)](_0x567eb8),_0xb7b8a4[_0x11999c(0x143)](0xc8)['json']({'message':_0x567eb8['message']});}else try{const _0xd30029=_0xfa2d1e[_0x11999c(0x11b)]['id'];console[_0x11999c(0xf8)](_0xd30029);const _0x1b9048=await sales_return[_0x11999c(0x159)]({'invoice':_0xfa2d1e['body'][_0x11999c(0x125)]});console['log'](_0x11999c(0x14c),_0x1b9048);const _0x566e22=await warehouse[_0x11999c(0x159)]({'name':_0x1b9048[_0x11999c(0x16a)],'room':_0x1b9048[_0x11999c(0x130)]});console[_0x11999c(0xf8)]('old_warehouse_data',_0x566e22);const {invoice:_0x422af1,customer:_0x354f76,date:_0x9fa99c,warehouse_name:_0x55bbd1,product_name:_0x4d2453,primary_code:_0x5cf0f4,secondary_code:_0x324b79,product_code:_0x418b94,sales_quantity:_0x3d870d,stocks:_0x28aa86,return_qty:_0x32956d,note:_0x398ed2,to_warehouse_name:_0xfa08bb,to_Room_name:_0x116e23}=_0xfa2d1e['body'];console[_0x11999c(0xf8)](_0xfa2d1e[_0x11999c(0x120)]);if(typeof _0x4d2453==_0x11999c(0xfc))var _0x35ffd5=[_0xfa2d1e['body'][_0x11999c(0x104)]],_0x3693c5=[_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x126)]],_0x48856d=[_0xfa2d1e[_0x11999c(0x120)]['secondary_code']],_0x5ceb03=[_0xfa2d1e[_0x11999c(0x120)]['product_code']],_0x5c7401=[_0xfa2d1e[_0x11999c(0x120)]['sales_quantity']],_0x20cb3f=[_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x13a)]],_0x351ade=[_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x164)]],_0x1f2c63=[_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0xfa)]],_0x528002=[_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x135)]],_0x539f9e=[_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x160)]],_0x54acc4=[_0xfa2d1e[_0x11999c(0x120)]['floorlevel']];else var _0x35ffd5=[..._0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x104)]],_0x3693c5=[..._0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x126)]],_0x48856d=[..._0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x10a)]],_0x5ceb03=[..._0xfa2d1e[_0x11999c(0x120)]['product_code']],_0x5c7401=[..._0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x156)]],_0x20cb3f=[..._0xfa2d1e[_0x11999c(0x120)]['stocks']],_0x351ade=[..._0xfa2d1e['body'][_0x11999c(0x164)]],_0x1f2c63=[..._0xfa2d1e[_0x11999c(0x120)]['bay']],_0x528002=[..._0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x135)]],_0x539f9e=[..._0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x160)]],_0x54acc4=[..._0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x105)]];const _0x23b8f2=_0x35ffd5[_0x11999c(0x11c)](_0x3ea576=>{return _0x3ea576={'product_name':_0x3ea576};});_0x3693c5[_0x11999c(0x169)]((_0xe9a5d,_0x33fc5f)=>{var _0x2cc8c1=_0x11999c;_0x23b8f2[_0x33fc5f][_0x2cc8c1(0x126)]=_0xe9a5d;}),_0x48856d[_0x11999c(0x169)]((_0x5210cb,_0x27fcdd)=>{var _0x1bbe05=_0x11999c;_0x23b8f2[_0x27fcdd][_0x1bbe05(0x10a)]=_0x5210cb;}),_0x5ceb03[_0x11999c(0x169)]((_0x5df11b,_0x787a26)=>{var _0x185af6=_0x11999c;_0x23b8f2[_0x787a26][_0x185af6(0x11e)]=_0x5df11b;}),_0x5c7401['forEach']((_0x343cb3,_0x232b8f)=>{var _0x4c9156=_0x11999c;_0x23b8f2[_0x232b8f][_0x4c9156(0x154)]=_0x343cb3;}),_0x20cb3f[_0x11999c(0x169)]((_0x481d7d,_0x182863)=>{var _0x4ce296=_0x11999c;_0x23b8f2[_0x182863][_0x4ce296(0x170)]=_0x481d7d;}),_0x351ade[_0x11999c(0x169)]((_0x26f6df,_0x571342)=>{var _0x442dd6=_0x11999c;_0x23b8f2[_0x571342][_0x442dd6(0x164)]=_0x26f6df;}),_0x1f2c63[_0x11999c(0x169)]((_0x2036ab,_0x47f325)=>{var _0x2cf834=_0x11999c;_0x23b8f2[_0x47f325][_0x2cf834(0xfa)]=_0x2036ab;}),_0x528002[_0x11999c(0x169)]((_0x498e5f,_0x551b84)=>{var _0x481a4e=_0x11999c;_0x23b8f2[_0x551b84][_0x481a4e(0x135)]=_0x498e5f;}),_0x539f9e[_0x11999c(0x169)]((_0x1bb409,_0x1dc562)=>{_0x23b8f2[_0x1dc562]['type']=_0x1bb409;}),_0x54acc4[_0x11999c(0x169)]((_0x5204c4,_0x148fae)=>{_0x23b8f2[_0x148fae]['floorlevel']=_0x5204c4;});var _0x3d6d7b=0x0;_0x23b8f2[_0x11999c(0x169)](_0x377f01=>{var _0x46d8fe=_0x11999c;console[_0x46d8fe(0xf8)](_0x46d8fe(0x102),_0x377f01),(parseInt(_0x377f01[_0x46d8fe(0x154)])<parseInt(_0x377f01[_0x46d8fe(0x164)])||parseInt(_0x377f01[_0x46d8fe(0x170)])<parseInt(_0x377f01[_0x46d8fe(0x164)])&&parseInt(_0x377f01[_0x46d8fe(0x154)])>parseInt(_0x377f01[_0x46d8fe(0x164)])||parseInt(_0x377f01[_0x46d8fe(0x164)])==0x0)&&_0x3d6d7b++;});if(_0x3d6d7b!=0x0)return _0xfa2d1e[_0x11999c(0x10e)](_0x11999c(0x13d),_0x11999c(0x15c)),_0xb7b8a4[_0x11999c(0x16c)]('back');_0x1b9048['return_sale'][_0x11999c(0x169)](_0x5e7479=>{var _0x13943b=_0x11999c;const _0x4a7cc2=_0x566e22[_0x13943b(0x16e)]['map'](_0x580be0=>{var _0xcf94f0=_0x13943b;_0x580be0[_0xcf94f0(0x104)]==_0x5e7479[_0xcf94f0(0x104)]&&_0x580be0[_0xcf94f0(0x105)]==_0x5e7479[_0xcf94f0(0x105)]&&_0x580be0['type']==_0x5e7479['type']&&_0x580be0[_0xcf94f0(0x135)]==_0x5e7479[_0xcf94f0(0x135)]&&_0x580be0[_0xcf94f0(0xfa)]==_0x5e7479[_0xcf94f0(0xfa)]&&(_0x580be0[_0xcf94f0(0x109)]=parseInt(_0x580be0['product_stock'])+parseInt(_0x5e7479[_0xcf94f0(0x164)]));});}),console[_0x11999c(0xf8)](_0x11999c(0x14f),_0x566e22),await _0x566e22[_0x11999c(0xfd)](),_0x1b9048[_0x11999c(0x125)]=_0x422af1,_0x1b9048[_0x11999c(0x134)]=_0x354f76,_0x1b9048[_0x11999c(0x107)]=_0x9fa99c,_0x1b9048[_0x11999c(0x10d)]=_0x55bbd1,_0x1b9048[_0x11999c(0x12c)]=_0x23b8f2,_0x1b9048[_0x11999c(0x161)]=_0x398ed2,_0x1b9048[_0x11999c(0x16a)]=_0xfa08bb,_0x1b9048['ToRoom']=_0x116e23;const _0x3aa10f=await _0x1b9048['save']();console[_0x11999c(0xf8)](_0x11999c(0x167),_0x3aa10f);const _0x184f39=await c_payment_data['findOne']({'invoice':_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x125)],'reason':_0x11999c(0x171)});_0x184f39['suppliers']=_0xfa2d1e[_0x11999c(0x120)][_0x11999c(0x149)],_0x184f39[_0x11999c(0x107)]=_0xfa2d1e[_0x11999c(0x120)]['date'],await _0x184f39[_0x11999c(0xfd)](),_0xfa2d1e[_0x11999c(0x10e)](_0x11999c(0x108),_0x11999c(0x139)),_0xb7b8a4[_0x11999c(0x16c)](_0x11999c(0x100));}catch(_0x2eb697){console[_0x11999c(0xf8)](_0x2eb697),_0xb7b8a4[_0x11999c(0x143)](0xc8)['json']({'message':_0x2eb697['message']});}}),router['post'](a0_0x5b3207(0x131),auth,async(_0x5bb69d,_0x1d08a5)=>{var _0x79f0e=a0_0x5b3207;try{const _0x3a8e9e=_0x5bb69d[_0x79f0e(0x11b)]['id'],{invoice:_0x4ac60f,customer:_0xee9349,payable_to_customer:_0x3f5052,paid_amount:_0x55d91d}=_0x5bb69d['body'],_0x51d3a3=await sales_return[_0x79f0e(0x13c)](_0x3a8e9e);console[_0x79f0e(0xf8)](_0x79f0e(0x15b),_0x51d3a3),console['log'](_0x3f5052),console[_0x79f0e(0xf8)](_0x55d91d);var _0xca363=_0x3f5052-_0x55d91d;console['log'](_0x79f0e(0x115),_0xca363),_0x51d3a3[_0x79f0e(0x16f)]=parseFloat(_0x55d91d)+parseFloat(_0x51d3a3[_0x79f0e(0x16f)]),_0x51d3a3[_0x79f0e(0xf9)]=_0xca363,console[_0x79f0e(0xf8)](_0x51d3a3);const _0x3f7af9=await _0x51d3a3[_0x79f0e(0xfd)]();console[_0x79f0e(0xf8)](0x1b207);const _0x25bcd9=await c_payment_data[_0x79f0e(0x159)]({'invoice':_0x5bb69d[_0x79f0e(0x120)][_0x79f0e(0x125)],'reason':'Sale\x20Return'});console['log']('c_payment',_0x25bcd9),_0x25bcd9['amount']=_0xca363,await _0x25bcd9['save']();let _0x57c693=new Date(),_0xab7ce9=('0'+_0x57c693[_0x79f0e(0x145)]())[_0x79f0e(0x124)](-0x2),_0x559ccd=('0'+(_0x57c693[_0x79f0e(0x150)]()+0x1))['slice'](-0x2),_0x2163ac=_0x57c693[_0x79f0e(0x157)](),_0x2be159=_0x2163ac+'-'+_0x559ccd+'-'+_0xab7ce9;const _0x555872=new customer_payment({'invoice':_0x4ac60f,'date':_0x2163ac+'-'+_0x559ccd+'-'+_0xab7ce9,'customer':_0xee9349,'reason':'Returned\x20Payment\x20For\x20Sale\x20Return','amount':_0x55d91d}),_0x5bc7b4=await _0x555872['save']();_0x5bb69d[_0x79f0e(0x10e)](_0x79f0e(0x108),_0x79f0e(0x114)),_0x1d08a5[_0x79f0e(0x16c)](_0x79f0e(0x100));}catch(_0x299d18){console['log'](_0x299d18);}}),router['get'](a0_0x5b3207(0x10c),auth,async(_0xd61e0d,_0x1f8df3)=>{var _0xc5d422=a0_0x5b3207;try{const {username:_0x33983f,email:_0x565af7,role:_0x928766}=_0xd61e0d[_0xc5d422(0x165)],_0x5eccd1=_0xd61e0d[_0xc5d422(0x165)],_0x3feab1=await profile[_0xc5d422(0x159)]({'email':_0x5eccd1[_0xc5d422(0x110)]}),_0x6d6221=await master_shop['find']();console[_0xc5d422(0xf8)](_0xc5d422(0x146),_0x6d6221);const _0x19be10=_0xd61e0d['params']['id'],_0xd560fd=await sales_return[_0xc5d422(0x13c)](_0x19be10);console[_0xc5d422(0xf8)](_0xd560fd);const _0x217334=await customer[_0xc5d422(0x159)]({'name':_0xd560fd[_0xc5d422(0x134)]});console[_0xc5d422(0xf8)](_0x217334);if(_0x6d6221[0x0][_0xc5d422(0x152)]=='English\x20(US)'){var _0x15ec8e=users[_0xc5d422(0x166)];console[_0xc5d422(0xf8)](_0x15ec8e);}else{if(_0x6d6221[0x0][_0xc5d422(0x152)]==_0xc5d422(0x13f))var _0x15ec8e=users[_0xc5d422(0x13f)];else{if(_0x6d6221[0x0][_0xc5d422(0x152)]==_0xc5d422(0x103))var _0x15ec8e=users['German'];else{if(_0x6d6221[0x0][_0xc5d422(0x152)]==_0xc5d422(0x121))var _0x15ec8e=users['Spanish'];else{if(_0x6d6221[0x0][_0xc5d422(0x152)]=='French')var _0x15ec8e=users['French'];else{if(_0x6d6221[0x0][_0xc5d422(0x152)]==_0xc5d422(0x12d))var _0x15ec8e=users[_0xc5d422(0x144)];else{if(_0x6d6221[0x0][_0xc5d422(0x152)]==_0xc5d422(0x12a))var _0x15ec8e=users[_0xc5d422(0x12a)];else{if(_0x6d6221[0x0][_0xc5d422(0x152)]==_0xc5d422(0xf6))var _0x15ec8e=users[_0xc5d422(0x12e)];}}}}}}}_0x1f8df3[_0xc5d422(0x13e)](_0xc5d422(0x162),{'success':_0xd61e0d[_0xc5d422(0x10e)](_0xc5d422(0x108)),'errors':_0xd61e0d['flash'](_0xc5d422(0x13d)),'role':_0x5eccd1,'profile':_0x3feab1,'master_shop':_0x6d6221,'customers':_0x217334,'sales':_0xd560fd,'language':_0x15ec8e});}catch(_0x45e5b3){console[_0xc5d422(0xf8)](_0x45e5b3);}}),module[a0_0x5b3207(0x12b)]=router;