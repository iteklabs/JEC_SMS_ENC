var a0_0x2a6212=a0_0x3d9d;(function(_0x4610b0,_0x32c5ec){var _0xfcbc67=a0_0x3d9d,_0x312f24=_0x4610b0();while(!![]){try{var _0xd60368=parseInt(_0xfcbc67(0x12a))/0x1*(-parseInt(_0xfcbc67(0x109))/0x2)+parseInt(_0xfcbc67(0x14c))/0x3*(parseInt(_0xfcbc67(0x135))/0x4)+parseInt(_0xfcbc67(0x114))/0x5+parseInt(_0xfcbc67(0x10b))/0x6*(parseInt(_0xfcbc67(0x139))/0x7)+parseInt(_0xfcbc67(0x146))/0x8+parseInt(_0xfcbc67(0x136))/0x9+-parseInt(_0xfcbc67(0x115))/0xa*(parseInt(_0xfcbc67(0xf1))/0xb);if(_0xd60368===_0x32c5ec)break;else _0x312f24['push'](_0x312f24['shift']());}catch(_0x10a625){_0x312f24['push'](_0x312f24['shift']());}}}(a0_0x37c7,0x43834));const express=require(a0_0x2a6212(0x147)),app=express(),router=express[a0_0x2a6212(0x11f)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,customer_payment,c_payment_data,sales_return_finished}=require('../models/all_models'),auth=require('../middleware/auth'),users=require('../public/language/languages.json');function a0_0x3d9d(_0x33ec4f,_0x567a84){var _0x37c7f8=a0_0x37c7();return a0_0x3d9d=function(_0x3d9df9,_0x5257dc){_0x3d9df9=_0x3d9df9-0xeb;var _0x25f364=_0x37c7f8[_0x3d9df9];return _0x25f364;},a0_0x3d9d(_0x33ec4f,_0x567a84);}function a0_0x37c7(){var _0x451af2=['product_stock','old_warehouse_data','return_sale','amount','product_details','getDate','warehouse_name','product_name','Finished\x20Goods','bay','Sale\x20Return','forEach','/invoice/:id','return_qty','exports','$product_details.storage','62gGanqY','customer_docs','78ykxZte','Chinese','render','old_data','success','English\x20(US)','user','return_sale_edit_finished','aggregate','2174535QkWSYH','261470KSPbbo','sale_qty','stock','ToRoom','sales_return_finished','Portuguese','ToWarehouse','language','foreach\x20newproduct','customer','Router','c_payment','$product_details.product_code','Hindi','log','$product_details','$product_details.primary_code','English','suppliers','email','stocks_QA','16313dhQBZB','product_name_QA','Returned\x20Payment\x20For\x20Sale\x20Return','save','$product_details.bin','Return\x20Rooms','Enabled','note','back','post','payment\x20successfull','8cBrHce','172251zBmpwq','Arabic','due_amount','188524cxveUD','secondary_code','Arabic\x20(ae)','return_sale_QA','type','German','body','/sales_return/view','product_code_QA','QA\x20Warehouse','stocks','/view/:id','for_categorize','1322136gceaQW','express','errors','/give_payment/:id','slice','sales_quantity','503619MlWJXy','return_qty_QA','Must\x20not\x20be\x20greater\x20than\x20sale\x20Qty','find','customers','French','primary_code_QA','bin','redirect','$product_details.rack','date','Spanish','sales_quantity_QA','floorlevel','primary_code','map','params','$product_details.product_name','/sales_return_finished/view','findById','$product_details.floorlevel','invoice','purchase\x20return\x20successfully','flash','string','status','master','product_code','message','$customer_docs','220LTgEml','get','secondary_code_QA','$product_details.type','$name','findOne','Portuguese\x20(BR)','json'];a0_0x37c7=function(){return _0x451af2;};return a0_0x37c7();}router['get']('/view',auth,async(_0x1359ba,_0x599895)=>{var _0x276140=a0_0x2a6212;try{const {username:_0x1e1a5c,email:_0x16e467,role:_0x2e287e}=_0x1359ba[_0x276140(0x111)],_0x4c8ae1=_0x1359ba['user'],_0x1c130f=await profile[_0x276140(0xf6)]({'email':_0x4c8ae1[_0x276140(0x128)]}),_0x42a561=await master_shop['find'](),_0x11261b=await sales_return_finished[_0x276140(0x113)]([{'$lookup':{'from':_0x276140(0x150),'localField':_0x276140(0x11e),'foreignField':'name','as':_0x276140(0x10a)}},{'$unwind':_0x276140(0xf0)}]);if(_0x42a561[0x0][_0x276140(0x11c)]=='English\x20(US)'){var _0x18d0e6=users[_0x276140(0x126)];console[_0x276140(0x123)](_0x18d0e6);}else{if(_0x42a561[0x0][_0x276140(0x11c)]==_0x276140(0x122))var _0x18d0e6=users[_0x276140(0x122)];else{if(_0x42a561[0x0][_0x276140(0x11c)]=='German')var _0x18d0e6=users[_0x276140(0x13e)];else{if(_0x42a561[0x0]['language']==_0x276140(0x157))var _0x18d0e6=users[_0x276140(0x157)];else{if(_0x42a561[0x0]['language']==_0x276140(0x151))var _0x18d0e6=users[_0x276140(0x151)];else{if(_0x42a561[0x0][_0x276140(0x11c)]=='Portuguese\x20(BR)')var _0x18d0e6=users['Portuguese'];else{if(_0x42a561[0x0][_0x276140(0x11c)]==_0x276140(0x10c))var _0x18d0e6=users[_0x276140(0x10c)];else{if(_0x42a561[0x0][_0x276140(0x11c)]==_0x276140(0x13b))var _0x18d0e6=users[_0x276140(0x137)];}}}}}}}_0x599895['render'](_0x276140(0x119),{'success':_0x1359ba[_0x276140(0x163)](_0x276140(0x10f)),'errors':_0x1359ba[_0x276140(0x163)]('errors'),'role':_0x4c8ae1,'profile':_0x1c130f,'master_shop':_0x42a561,'user':_0x11261b,'language':_0x18d0e6});}catch(_0x4583f7){console[_0x276140(0x123)](_0x4583f7);}}),router[a0_0x2a6212(0xf2)](a0_0x2a6212(0x144),auth,async(_0x2de87d,_0x50501e)=>{var _0x5894f5=a0_0x2a6212;try{const {username:_0x123364,email:_0x5e3d82,role:_0x35f014}=_0x2de87d['user'],_0x494be8=_0x2de87d[_0x5894f5(0x111)],_0x14f6c2=await profile['findOne']({'email':_0x494be8[_0x5894f5(0x128)]}),_0x1ffeb6=await master_shop[_0x5894f5(0x14f)]();console[_0x5894f5(0x123)](_0x5894f5(0xed),_0x1ffeb6);const _0x43e0bb=_0x2de87d[_0x5894f5(0x15c)]['id'];console[_0x5894f5(0x123)](_0x43e0bb);var _0x4caf61=[_0x5894f5(0x12f)];const _0x1658b9=await sales_return_finished[_0x5894f5(0x15f)](_0x43e0bb),_0x11ab4d=await warehouse[_0x5894f5(0x113)]([{'$match':{'name':_0x1658b9[_0x5894f5(0x11b)],'room':_0x1658b9[_0x5894f5(0x118)]}},{'$unwind':_0x5894f5(0x124)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5894f5(0x15d)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x5894f5(0x12e)},'type':{'$first':_0x5894f5(0xf4)},'floorlevel':{'$first':_0x5894f5(0x160)},'primary_code':{'$first':_0x5894f5(0x125)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x5894f5(0x121)},'storage':{'$first':_0x5894f5(0x108)},'rack':{'$first':_0x5894f5(0x155)}}}]);console[_0x5894f5(0x123)](_0x11ab4d);const _0x19fbed=await warehouse[_0x5894f5(0x113)]([{'$match':{'status':'Enabled','warehouse_category':_0x5894f5(0x101)}},{'$group':{'_id':_0x5894f5(0xf5),'name':{'$first':_0x5894f5(0xf5)}}},{'$sort':{'name':0x1}}]),_0x28b0f7=await warehouse[_0x5894f5(0x113)]([{'$match':{'status':_0x5894f5(0x130),'name':_0x5894f5(0x142)}},{'$group':{'_id':_0x5894f5(0xf5),'name':{'$first':_0x5894f5(0xf5)}}},{'$sort':{'name':0x1}}]),_0x1b9e8f=await product[_0x5894f5(0x14f)]({});if(_0x1ffeb6[0x0][_0x5894f5(0x11c)]=='English\x20(US)'){var _0x35a2fd=users[_0x5894f5(0x126)];console[_0x5894f5(0x123)](_0x35a2fd);}else{if(_0x1ffeb6[0x0]['language']==_0x5894f5(0x122))var _0x35a2fd=users[_0x5894f5(0x122)];else{if(_0x1ffeb6[0x0]['language']==_0x5894f5(0x13e))var _0x35a2fd=users['German'];else{if(_0x1ffeb6[0x0][_0x5894f5(0x11c)]==_0x5894f5(0x157))var _0x35a2fd=users['Spanish'];else{if(_0x1ffeb6[0x0][_0x5894f5(0x11c)]==_0x5894f5(0x151))var _0x35a2fd=users['French'];else{if(_0x1ffeb6[0x0][_0x5894f5(0x11c)]==_0x5894f5(0xf7))var _0x35a2fd=users['Portuguese'];else{if(_0x1ffeb6[0x0][_0x5894f5(0x11c)]==_0x5894f5(0x10c))var _0x35a2fd=users['Chinese'];else{if(_0x1ffeb6[0x0][_0x5894f5(0x11c)]==_0x5894f5(0x13b))var _0x35a2fd=users[_0x5894f5(0x137)];}}}}}}}_0x50501e[_0x5894f5(0x10d)](_0x5894f5(0x112),{'success':_0x2de87d[_0x5894f5(0x163)](_0x5894f5(0x10f)),'errors':_0x2de87d[_0x5894f5(0x163)](_0x5894f5(0x148)),'role':_0x494be8,'profile':_0x14f6c2,'master_shop':_0x1ffeb6,'user':_0x1658b9,'stock':_0x11ab4d,'unit':_0x1b9e8f,'language':_0x35a2fd,'warehouses':_0x19fbed,'rooms':_0x4caf61,'warehouse_QA':_0x28b0f7});}catch(_0x154fd8){console['log'](_0x154fd8);}}),router[a0_0x2a6212(0x133)]('/view/:id',auth,async(_0x325912,_0x5b745d)=>{var _0x1bd9ed=a0_0x2a6212;if(_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x145)]=='QA')try{const _0x57d21a=_0x325912[_0x1bd9ed(0x15c)]['id'],_0x46e70d=await sales_return['findOne']({'invoice':_0x325912[_0x1bd9ed(0x13f)]['invoice']}),_0x118878=await warehouse['findOne']({'name':_0x46e70d[_0x1bd9ed(0x11b)],'room':_0x46e70d['ToRoom']}),{invoice:_0x8d8ab8,customer:_0xc9f478,date:_0x57bfe6,warehouse_name:_0xbb9191,product_name:_0x3d110e,primary_code:_0x262bb4,secondary_code:_0x3a66a4,product_code:_0x5241a1,sales_quantity:_0x20fe7f,stocks:_0x365953,return_qty:_0x2f218f,note:_0x17b405,to_warehouse_name_QA:_0xda531d,to_Room_name_QA:_0x1b9e74}=_0x325912['body'];if(typeof product_name_QA==_0x1bd9ed(0xeb))var _0x21b521=[_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x12b)]],_0x1c1f9e=[_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x152)]],_0x1e9304=[_0x325912['body'][_0x1bd9ed(0xf3)]],_0x28d3d9=[_0x325912[_0x1bd9ed(0x13f)]['product_code_QA']],_0x58a733=[_0x325912[_0x1bd9ed(0x13f)]['sales_quantity_QA']],_0x5840f0=[_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x129)]],_0x2532f3=[_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x14d)]];else var _0x21b521=[..._0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x12b)]],_0x1c1f9e=[..._0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x152)]],_0x1e9304=[..._0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0xf3)]],_0x28d3d9=[..._0x325912['body'][_0x1bd9ed(0x141)]],_0x58a733=[..._0x325912['body'][_0x1bd9ed(0x158)]],_0x5840f0=[..._0x325912['body'][_0x1bd9ed(0x129)]],_0x2532f3=[..._0x325912[_0x1bd9ed(0x13f)]['return_qty_QA']];const _0x3b4090=_0x21b521[_0x1bd9ed(0x15b)](_0x44f62f=>{return _0x44f62f={'product_name':_0x44f62f};});_0x1c1f9e[_0x1bd9ed(0x104)]((_0x2ea984,_0x35deee)=>{var _0xf84db9=_0x1bd9ed;_0x3b4090[_0x35deee][_0xf84db9(0x15a)]=_0x2ea984;}),_0x1e9304[_0x1bd9ed(0x104)]((_0x44ed8e,_0x65ea35)=>{var _0x517f0b=_0x1bd9ed;_0x3b4090[_0x65ea35][_0x517f0b(0x13a)]=_0x44ed8e;}),_0x28d3d9[_0x1bd9ed(0x104)]((_0x5d29a5,_0x28136c)=>{var _0x10e67e=_0x1bd9ed;_0x3b4090[_0x28136c][_0x10e67e(0xee)]=_0x5d29a5;}),_0x58a733['forEach']((_0x52bcb9,_0x2909f8)=>{_0x3b4090[_0x2909f8]['sale_qty']=_0x52bcb9;}),_0x5840f0['forEach']((_0x1f3f46,_0x4b3cb2)=>{var _0x3b5314=_0x1bd9ed;_0x3b4090[_0x4b3cb2][_0x3b5314(0x117)]=_0x1f3f46;}),_0x2532f3['forEach']((_0x27c31c,_0x1bdfc7)=>{_0x3b4090[_0x1bdfc7]['return_qty']=_0x27c31c;}),_0x46e70d[_0x1bd9ed(0x13c)]['forEach'](_0x13c564=>{var _0x12b0d2=_0x1bd9ed;const _0x92f13e=_0x118878[_0x12b0d2(0xfd)][_0x12b0d2(0x15b)](_0x1383e9=>{var _0x4f9377=_0x12b0d2;_0x1383e9[_0x4f9377(0x100)]==_0x13c564[_0x4f9377(0x100)]&&(_0x1383e9[_0x4f9377(0xf9)]=parseInt(_0x1383e9[_0x4f9377(0xf9)])+parseInt(_0x13c564[_0x4f9377(0x106)]));});}),await _0x118878[_0x1bd9ed(0x12d)](),_0x46e70d['invoice']=_0x8d8ab8,_0x46e70d[_0x1bd9ed(0x11e)]=_0xc9f478,_0x46e70d[_0x1bd9ed(0x156)]=_0x57bfe6,_0x46e70d['warehouse_name']=_0xbb9191,_0x46e70d['return_sale_QA']=_0x3b4090,_0x46e70d[_0x1bd9ed(0x131)]=_0x17b405,_0x46e70d['ToWarehouse']=_0xda531d,_0x46e70d['ToRoom']=_0x1b9e74;const _0x1bdac4=await _0x46e70d[_0x1bd9ed(0x12d)](),_0x14a2d2=await c_payment_data[_0x1bd9ed(0xf6)]({'invoice':_0x325912['body']['invoice'],'reason':_0x1bd9ed(0x103)});_0x14a2d2[_0x1bd9ed(0x127)]=_0x325912[_0x1bd9ed(0x13f)]['suppliers'],_0x14a2d2[_0x1bd9ed(0x156)]=_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x156)],await _0x14a2d2[_0x1bd9ed(0x12d)](),_0x325912['flash']('success',_0x1bd9ed(0x162)),_0x5b745d['redirect'](_0x1bd9ed(0x15e));}catch(_0x469f86){console[_0x1bd9ed(0x123)](_0x469f86),_0x5b745d[_0x1bd9ed(0xec)](0xc8)[_0x1bd9ed(0xf8)]({'message':_0x469f86[_0x1bd9ed(0xef)]});}else try{const _0x4a5a96=_0x325912[_0x1bd9ed(0x15c)]['id'];console['log'](_0x4a5a96);const _0x383bfd=await sales_return[_0x1bd9ed(0xf6)]({'invoice':_0x325912[_0x1bd9ed(0x13f)]['invoice']});console[_0x1bd9ed(0x123)](_0x1bd9ed(0x10e),_0x383bfd);const _0x11e9ae=await warehouse['findOne']({'name':_0x383bfd[_0x1bd9ed(0x11b)],'room':_0x383bfd[_0x1bd9ed(0x118)]});console[_0x1bd9ed(0x123)](_0x1bd9ed(0xfa),_0x11e9ae);const {invoice:_0x166c3a,customer:_0x34f625,date:_0x74aa7f,warehouse_name:_0x5684c1,product_name:_0x800012,primary_code:_0x210cef,secondary_code:_0x53eee2,product_code:_0x5a356b,sales_quantity:_0x4598df,stocks:_0x2f2d44,return_qty:_0x3848d4,note:_0x4bd2f7,to_warehouse_name:_0x6364bf,to_Room_name:_0x5b9666}=_0x325912['body'];console[_0x1bd9ed(0x123)](_0x325912['body']);if(typeof _0x800012=='string')var _0x21b521=[_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x100)]],_0x1c1f9e=[_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x15a)]],_0x1e9304=[_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x13a)]],_0x28d3d9=[_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0xee)]],_0x58a733=[_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x14b)]],_0x5840f0=[_0x325912['body']['stocks']],_0x2532f3=[_0x325912['body']['return_qty']],_0x28fabf=[_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x102)]],_0x426376=[_0x325912['body']['bin']],_0x12f9f9=[_0x325912[_0x1bd9ed(0x13f)]['types']],_0x61a926=[_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x159)]];else var _0x21b521=[..._0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x100)]],_0x1c1f9e=[..._0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x15a)]],_0x1e9304=[..._0x325912['body'][_0x1bd9ed(0x13a)]],_0x28d3d9=[..._0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0xee)]],_0x58a733=[..._0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x14b)]],_0x5840f0=[..._0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x143)]],_0x2532f3=[..._0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x106)]],_0x28fabf=[..._0x325912[_0x1bd9ed(0x13f)]['bay']],_0x426376=[..._0x325912['body'][_0x1bd9ed(0x153)]],_0x12f9f9=[..._0x325912[_0x1bd9ed(0x13f)]['types']],_0x61a926=[..._0x325912['body'][_0x1bd9ed(0x159)]];const _0x2a3f1f=_0x21b521[_0x1bd9ed(0x15b)](_0x106502=>{return _0x106502={'product_name':_0x106502};});_0x1c1f9e[_0x1bd9ed(0x104)]((_0x1f7662,_0x56caaf)=>{var _0x45f3cc=_0x1bd9ed;_0x2a3f1f[_0x56caaf][_0x45f3cc(0x15a)]=_0x1f7662;}),_0x1e9304[_0x1bd9ed(0x104)]((_0x246a49,_0x163b4b)=>{_0x2a3f1f[_0x163b4b]['secondary_code']=_0x246a49;}),_0x28d3d9[_0x1bd9ed(0x104)]((_0x4cdc8c,_0x247534)=>{var _0xf41e36=_0x1bd9ed;_0x2a3f1f[_0x247534][_0xf41e36(0xee)]=_0x4cdc8c;}),_0x58a733[_0x1bd9ed(0x104)]((_0x48239f,_0x1e783a)=>{var _0x2a6d9d=_0x1bd9ed;_0x2a3f1f[_0x1e783a][_0x2a6d9d(0x116)]=_0x48239f;}),_0x5840f0[_0x1bd9ed(0x104)]((_0x4707df,_0x261470)=>{_0x2a3f1f[_0x261470]['stock']=_0x4707df;}),_0x2532f3[_0x1bd9ed(0x104)]((_0x5841fa,_0x4e2d2c)=>{var _0x5eed9a=_0x1bd9ed;_0x2a3f1f[_0x4e2d2c][_0x5eed9a(0x106)]=_0x5841fa;}),_0x28fabf[_0x1bd9ed(0x104)]((_0x222915,_0x45b5e0)=>{_0x2a3f1f[_0x45b5e0]['bay']=_0x222915;}),_0x426376[_0x1bd9ed(0x104)]((_0x389d26,_0x4458a2)=>{_0x2a3f1f[_0x4458a2]['bin']=_0x389d26;}),_0x12f9f9[_0x1bd9ed(0x104)]((_0x5311d9,_0x589cc4)=>{var _0x109819=_0x1bd9ed;_0x2a3f1f[_0x589cc4][_0x109819(0x13d)]=_0x5311d9;}),_0x61a926[_0x1bd9ed(0x104)]((_0x767698,_0x34cde0)=>{_0x2a3f1f[_0x34cde0]['floorlevel']=_0x767698;});var _0x477362=0x0;_0x2a3f1f['forEach'](_0x4a8997=>{var _0x1b276c=_0x1bd9ed;console['log'](_0x1b276c(0x11d),_0x4a8997),(parseInt(_0x4a8997[_0x1b276c(0x116)])<parseInt(_0x4a8997[_0x1b276c(0x106)])||parseInt(_0x4a8997[_0x1b276c(0x117)])<parseInt(_0x4a8997[_0x1b276c(0x106)])&&parseInt(_0x4a8997[_0x1b276c(0x116)])>parseInt(_0x4a8997['return_qty'])||parseInt(_0x4a8997[_0x1b276c(0x106)])==0x0)&&_0x477362++;});if(_0x477362!=0x0)return _0x325912[_0x1bd9ed(0x163)]('errors',_0x1bd9ed(0x14e)),_0x5b745d[_0x1bd9ed(0x154)](_0x1bd9ed(0x132));_0x383bfd[_0x1bd9ed(0xfb)]['forEach'](_0x3d2962=>{var _0x3c759d=_0x1bd9ed;const _0x2f67b7=_0x11e9ae['product_details'][_0x3c759d(0x15b)](_0x3b39cf=>{var _0x14a4ef=_0x3c759d;_0x3b39cf['product_name']==_0x3d2962['product_name']&&_0x3b39cf[_0x14a4ef(0x159)]==_0x3d2962[_0x14a4ef(0x159)]&&_0x3b39cf[_0x14a4ef(0x13d)]==_0x3d2962[_0x14a4ef(0x13d)]&&_0x3b39cf[_0x14a4ef(0x153)]==_0x3d2962[_0x14a4ef(0x153)]&&_0x3b39cf[_0x14a4ef(0x102)]==_0x3d2962[_0x14a4ef(0x102)]&&(_0x3b39cf['product_stock']=parseInt(_0x3b39cf[_0x14a4ef(0xf9)])+parseInt(_0x3d2962[_0x14a4ef(0x106)]));});}),console[_0x1bd9ed(0x123)](_0x1bd9ed(0xfa),_0x11e9ae),await _0x11e9ae[_0x1bd9ed(0x12d)](),_0x383bfd[_0x1bd9ed(0x161)]=_0x166c3a,_0x383bfd['customer']=_0x34f625,_0x383bfd['date']=_0x74aa7f,_0x383bfd[_0x1bd9ed(0xff)]=_0x5684c1,_0x383bfd[_0x1bd9ed(0xfb)]=_0x2a3f1f,_0x383bfd[_0x1bd9ed(0x131)]=_0x4bd2f7,_0x383bfd[_0x1bd9ed(0x11b)]=_0x6364bf,_0x383bfd[_0x1bd9ed(0x118)]=_0x5b9666;const _0x21f043=await _0x383bfd[_0x1bd9ed(0x12d)]();console[_0x1bd9ed(0x123)]('new\x20new_data',_0x21f043);const _0x289a70=await c_payment_data['findOne']({'invoice':_0x325912[_0x1bd9ed(0x13f)][_0x1bd9ed(0x161)],'reason':'Sale\x20Return'});_0x289a70[_0x1bd9ed(0x127)]=_0x325912[_0x1bd9ed(0x13f)]['suppliers'],_0x289a70[_0x1bd9ed(0x156)]=_0x325912[_0x1bd9ed(0x13f)]['date'],await _0x289a70[_0x1bd9ed(0x12d)](),_0x325912[_0x1bd9ed(0x163)](_0x1bd9ed(0x10f),_0x1bd9ed(0x162)),_0x5b745d['redirect'](_0x1bd9ed(0x140));}catch(_0x1440a6){console[_0x1bd9ed(0x123)](_0x1440a6),_0x5b745d[_0x1bd9ed(0xec)](0xc8)[_0x1bd9ed(0xf8)]({'message':_0x1440a6['message']});}}),router[a0_0x2a6212(0x133)](a0_0x2a6212(0x149),auth,async(_0x3cac74,_0x26e82c)=>{var _0x5582d5=a0_0x2a6212;try{const _0x5a9901=_0x3cac74[_0x5582d5(0x15c)]['id'],{invoice:_0x11f1e0,customer:_0x5eaf61,payable_to_customer:_0x41e160,paid_amount:_0x1169c4}=_0x3cac74['body'],_0x28e414=await sales_return[_0x5582d5(0x15f)](_0x5a9901);console[_0x5582d5(0x123)]('data',_0x28e414),console[_0x5582d5(0x123)](_0x41e160),console[_0x5582d5(0x123)](_0x1169c4);var _0x103297=_0x41e160-_0x1169c4;console[_0x5582d5(0x123)]('subtract',_0x103297),_0x28e414['paid_amount']=parseFloat(_0x1169c4)+parseFloat(_0x28e414['paid_amount']),_0x28e414[_0x5582d5(0x138)]=_0x103297,console[_0x5582d5(0x123)](_0x28e414);const _0x20bf1c=await _0x28e414[_0x5582d5(0x12d)]();console[_0x5582d5(0x123)](0x1b207);const _0x22c8d4=await c_payment_data[_0x5582d5(0xf6)]({'invoice':_0x3cac74[_0x5582d5(0x13f)]['invoice'],'reason':'Sale\x20Return'});console[_0x5582d5(0x123)](_0x5582d5(0x120),_0x22c8d4),_0x22c8d4[_0x5582d5(0xfc)]=_0x103297,await _0x22c8d4[_0x5582d5(0x12d)]();let _0x505311=new Date(),_0x473411=('0'+_0x505311[_0x5582d5(0xfe)]())[_0x5582d5(0x14a)](-0x2),_0x584f43=('0'+(_0x505311['getMonth']()+0x1))[_0x5582d5(0x14a)](-0x2),_0x5f3425=_0x505311['getFullYear'](),_0x1d490f=_0x5f3425+'-'+_0x584f43+'-'+_0x473411;const _0x24f8c9=new customer_payment({'invoice':_0x11f1e0,'date':_0x5f3425+'-'+_0x584f43+'-'+_0x473411,'customer':_0x5eaf61,'reason':_0x5582d5(0x12c),'amount':_0x1169c4}),_0x1338f9=await _0x24f8c9[_0x5582d5(0x12d)]();_0x3cac74['flash'](_0x5582d5(0x10f),_0x5582d5(0x134)),_0x26e82c['redirect'](_0x5582d5(0x140));}catch(_0x204149){console[_0x5582d5(0x123)](_0x204149);}}),router[a0_0x2a6212(0xf2)](a0_0x2a6212(0x105),auth,async(_0x3ea3b1,_0x266ebf)=>{var _0x204122=a0_0x2a6212;try{const {username:_0xd43b39,email:_0x2991de,role:_0x7c3bda}=_0x3ea3b1['user'],_0x5b2e70=_0x3ea3b1[_0x204122(0x111)],_0x512645=await profile[_0x204122(0xf6)]({'email':_0x5b2e70[_0x204122(0x128)]}),_0x3286c3=await master_shop['find']();console[_0x204122(0x123)](_0x204122(0xed),_0x3286c3);const _0x44c2b7=_0x3ea3b1[_0x204122(0x15c)]['id'],_0x424424=await sales_return[_0x204122(0x15f)](_0x44c2b7);console[_0x204122(0x123)](_0x424424);const _0x1b124c=await customer[_0x204122(0xf6)]({'name':_0x424424[_0x204122(0x11e)]});console['log'](_0x1b124c);if(_0x3286c3[0x0]['language']==_0x204122(0x110)){var _0x4e9313=users['English'];console[_0x204122(0x123)](_0x4e9313);}else{if(_0x3286c3[0x0]['language']=='Hindi')var _0x4e9313=users[_0x204122(0x122)];else{if(_0x3286c3[0x0][_0x204122(0x11c)]==_0x204122(0x13e))var _0x4e9313=users[_0x204122(0x13e)];else{if(_0x3286c3[0x0][_0x204122(0x11c)]==_0x204122(0x157))var _0x4e9313=users[_0x204122(0x157)];else{if(_0x3286c3[0x0]['language']==_0x204122(0x151))var _0x4e9313=users[_0x204122(0x151)];else{if(_0x3286c3[0x0][_0x204122(0x11c)]==_0x204122(0xf7))var _0x4e9313=users[_0x204122(0x11a)];else{if(_0x3286c3[0x0]['language']==_0x204122(0x10c))var _0x4e9313=users['Chinese'];else{if(_0x3286c3[0x0]['language']=='Arabic\x20(ae)')var _0x4e9313=users[_0x204122(0x137)];}}}}}}}_0x266ebf['render']('sales_return_invoice',{'success':_0x3ea3b1[_0x204122(0x163)]('success'),'errors':_0x3ea3b1[_0x204122(0x163)](_0x204122(0x148)),'role':_0x5b2e70,'profile':_0x512645,'master_shop':_0x3286c3,'customers':_0x1b124c,'sales':_0x424424,'language':_0x4e9313});}catch(_0x4a0cd1){console['log'](_0x4a0cd1);}}),module[a0_0x2a6212(0x107)]=router;