function a0_0x528d(_0x2852fd,_0x389d16){const _0x204641=a0_0x2046();return a0_0x528d=function(_0x528dc5,_0x50e793){_0x528dc5=_0x528dc5-0x11d;let _0x171ec1=_0x204641[_0x528dc5];return _0x171ec1;},a0_0x528d(_0x2852fd,_0x389d16);}const a0_0x8725dd=a0_0x528d;(function(_0x2b0b4b,_0x3172cd){const _0x53ef30=a0_0x528d,_0x17572e=_0x2b0b4b();while(!![]){try{const _0x1abc64=-parseInt(_0x53ef30(0x138))/0x1*(parseInt(_0x53ef30(0x16c))/0x2)+-parseInt(_0x53ef30(0x13b))/0x3+parseInt(_0x53ef30(0x12e))/0x4+-parseInt(_0x53ef30(0x13d))/0x5+parseInt(_0x53ef30(0x12d))/0x6*(parseInt(_0x53ef30(0x139))/0x7)+-parseInt(_0x53ef30(0x17b))/0x8+parseInt(_0x53ef30(0x158))/0x9;if(_0x1abc64===_0x3172cd)break;else _0x17572e['push'](_0x17572e['shift']());}catch(_0xee874e){_0x17572e['push'](_0x17572e['shift']());}}}(a0_0x2046,0xdc8a8));function a0_0x2046(){const _0x59a4f4=['Arabic\x20(ae)','isFG','totalPrice','11jcMGFR','1238993AlZbGW','/product_data','5358744VSUABo','tmpisFG','6858525oXTqKi','render','findOne','redirect','get','exports','true','all_sales_sa','errors','real_qty_unit_val','adj_dicount_price','body','log','price','Router','adj_discount','user','product_list','findById','Chinese','_id','mongoose','filename','post','save','quantity','diskStorage','28406430GlzNkM','padStart','$product_list','Portuguese','primary_code','Spanish','id_transaction_from','/add_sales','flash','language','prod_code','/getProductData','success','secondary_unit','unit','now','Invoice\x20created\x20with\x20incremented\x20start\x20value:','email','prod_name','getPrimUnitNo','199094dbwIJf','view_sales_sa','ObjectId','find','string','exceljs','invoice_starts','prod_cat','../models/all_models','conversion_unit','add_sales_sa','Types','xlsx','French','image','2004688VBpkvu','/product_list','/view_sales/:id','Sales\x20add\x20successfully','no_per_unit','English\x20(US)','Arabic','Hindi','forEach','express','aggregate','id_transaction','json','/volume_setup','English','/sales_sa/view_sales/','Portuguese\x20(BR)','file','36SdCoGW','4754512kFPCtH','/add_sales_notes','originalname','map','German','valueOf','toString'];a0_0x2046=function(){return _0x59a4f4;};return a0_0x2046();}const express=require(a0_0x8725dd(0x124)),app=express(),router=express[a0_0x8725dd(0x14b)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up,invoice_sa,sales_sa,discount_volume_db}=require(a0_0x8725dd(0x174)),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),excelJS=require(a0_0x8725dd(0x171)),xlsx=require(a0_0x8725dd(0x178)),mongoose=require(a0_0x8725dd(0x152)),multer=require('multer'),storage=multer[a0_0x8725dd(0x157)]({'destination':(_0x2bb97c,_0x18f8a9,_0x5993bc)=>{_0x5993bc(null,'./public/sales_invoice');},'filename':(_0x53026d,_0x2dd9a1,_0x44d0b0)=>{const _0x36361=a0_0x8725dd;_0x44d0b0(null,Date[_0x36361(0x167)]()+'~'+_0x2dd9a1[_0x36361(0x130)]);}}),upload=multer({'storage':storage});router['get']('/',auth,async(_0x45838d,_0x496e18)=>{const _0x4bc34d=a0_0x8725dd;try{const _0x486781=await master_shop[_0x4bc34d(0x16f)](),_0x2c8383=_0x45838d[_0x4bc34d(0x14d)],_0x46fa00=await profile[_0x4bc34d(0x13f)]({'email':_0x2c8383['email']}),_0x3ae957=await staff['findOne']({'email':_0x2c8383[_0x4bc34d(0x169)]}),_0x3df3c0=await sales_sa[_0x4bc34d(0x16f)]({'sales_staff_id':_0x3ae957[_0x4bc34d(0x151)]});if(_0x486781[0x0][_0x4bc34d(0x161)]=='English\x20(US)')var _0x35a9b6=users['English'];else{if(_0x486781[0x0][_0x4bc34d(0x161)]=='Hindi')var _0x35a9b6=users[_0x4bc34d(0x122)];else{if(_0x486781[0x0][_0x4bc34d(0x161)]==_0x4bc34d(0x132))var _0x35a9b6=users['German'];else{if(_0x486781[0x0]['language']==_0x4bc34d(0x15d))var _0x35a9b6=users[_0x4bc34d(0x15d)];else{if(_0x486781[0x0][_0x4bc34d(0x161)]==_0x4bc34d(0x179))var _0x35a9b6=users[_0x4bc34d(0x179)];else{if(_0x486781[0x0]['language']==_0x4bc34d(0x12b))var _0x35a9b6=users[_0x4bc34d(0x15b)];else{if(_0x486781[0x0][_0x4bc34d(0x161)]=='Chinese')var _0x35a9b6=users[_0x4bc34d(0x150)];else{if(_0x486781[0x0][_0x4bc34d(0x161)]=='Arabic\x20(ae)')var _0x35a9b6=users[_0x4bc34d(0x121)];}}}}}}}_0x496e18[_0x4bc34d(0x13e)](_0x4bc34d(0x144),{'success':_0x45838d['flash'](_0x4bc34d(0x164)),'errors':_0x45838d[_0x4bc34d(0x160)](_0x4bc34d(0x145)),'master_shop':_0x486781,'profile':_0x46fa00,'role':_0x2c8383,'language':_0x35a9b6,'product_list':_0x3ae957[_0x4bc34d(0x14e)],'sales_mine':_0x3df3c0,'staff_arr':_0x3ae957});}catch(_0x1bdf03){console[_0x4bc34d(0x149)](_0x1bdf03);}}),router['get']('/add_sales',auth,async(_0x286791,_0x25ca58)=>{const _0x393892=a0_0x8725dd;try{const _0x7902da=await master_shop[_0x393892(0x16f)](),_0x56ee97=_0x286791[_0x393892(0x14d)],_0x1e889c=await profile['findOne']({'email':_0x56ee97[_0x393892(0x169)]}),_0x56d0f8=await staff['findOne']({'email':_0x56ee97[_0x393892(0x169)]}),_0x1086d8=await customer[_0x393892(0x16f)]({'agent_id':_0x56d0f8[_0x393892(0x151)]});if(_0x7902da[0x0][_0x393892(0x161)]=='English\x20(US)')var _0x3efaa2=users[_0x393892(0x129)];else{if(_0x7902da[0x0][_0x393892(0x161)]==_0x393892(0x122))var _0x3efaa2=users[_0x393892(0x122)];else{if(_0x7902da[0x0][_0x393892(0x161)]==_0x393892(0x132))var _0x3efaa2=users[_0x393892(0x132)];else{if(_0x7902da[0x0][_0x393892(0x161)]=='Spanish')var _0x3efaa2=users[_0x393892(0x15d)];else{if(_0x7902da[0x0]['language']=='French')var _0x3efaa2=users[_0x393892(0x179)];else{if(_0x7902da[0x0][_0x393892(0x161)]==_0x393892(0x12b))var _0x3efaa2=users[_0x393892(0x15b)];else{if(_0x7902da[0x0]['language']==_0x393892(0x150))var _0x3efaa2=users[_0x393892(0x150)];else{if(_0x7902da[0x0]['language']=='Arabic\x20(ae)')var _0x3efaa2=users['Arabic'];}}}}}}}_0x25ca58['render'](_0x393892(0x176),{'success':_0x286791[_0x393892(0x160)](_0x393892(0x164)),'errors':_0x286791[_0x393892(0x160)](_0x393892(0x145)),'master_shop':_0x7902da,'profile':_0x1e889c,'role':_0x56ee97,'language':_0x3efaa2,'customer':_0x1086d8,'staff_arr':_0x56d0f8});}catch(_0x251b8f){console[_0x393892(0x149)](_0x251b8f);}}),router[a0_0x8725dd(0x141)](a0_0x8725dd(0x11d),auth,async(_0x44d5c5,_0x1f43eb)=>{const _0x23d46b=a0_0x8725dd;try{const _0x1e3617=await master_shop['find'](),_0x126948=_0x44d5c5[_0x23d46b(0x14d)],_0x1ff6ff=await profile[_0x23d46b(0x13f)]({'email':_0x126948['email']}),_0x184dca=await staff[_0x23d46b(0x13f)]({'email':_0x126948[_0x23d46b(0x169)]}),_0x20516b=await customer[_0x23d46b(0x16f)]({'agent_id':_0x184dca[_0x23d46b(0x151)]}),_0x3bda3a=_0x44d5c5['params']['id'],_0x560e19=await sales_sa[_0x23d46b(0x14f)](_0x3bda3a);if(_0x1e3617[0x0]['language']==_0x23d46b(0x120))var _0x5b3d9e=users[_0x23d46b(0x129)];else{if(_0x1e3617[0x0][_0x23d46b(0x161)]=='Hindi')var _0x5b3d9e=users[_0x23d46b(0x122)];else{if(_0x1e3617[0x0][_0x23d46b(0x161)]==_0x23d46b(0x132))var _0x5b3d9e=users[_0x23d46b(0x132)];else{if(_0x1e3617[0x0]['language']=='Spanish')var _0x5b3d9e=users[_0x23d46b(0x15d)];else{if(_0x1e3617[0x0][_0x23d46b(0x161)]==_0x23d46b(0x179))var _0x5b3d9e=users['French'];else{if(_0x1e3617[0x0]['language']==_0x23d46b(0x12b))var _0x5b3d9e=users[_0x23d46b(0x15b)];else{if(_0x1e3617[0x0][_0x23d46b(0x161)]==_0x23d46b(0x150))var _0x5b3d9e=users[_0x23d46b(0x150)];else{if(_0x1e3617[0x0][_0x23d46b(0x161)]==_0x23d46b(0x135))var _0x5b3d9e=users[_0x23d46b(0x121)];}}}}}}}_0x1f43eb[_0x23d46b(0x13e)](_0x23d46b(0x16d),{'success':_0x44d5c5[_0x23d46b(0x160)]('success'),'errors':_0x44d5c5['flash'](_0x23d46b(0x145)),'master_shop':_0x1e3617,'profile':_0x1ff6ff,'role':_0x126948,'language':_0x5b3d9e,'customer':_0x20516b,'sales_sa':_0x560e19,'staff_arr':_0x184dca});}catch(_0x4da9e0){console['log'](_0x4da9e0);}}),router[a0_0x8725dd(0x154)](a0_0x8725dd(0x15f),auth,upload['single'](a0_0x8725dd(0x17a)),async(_0xf85c86,_0x71956c)=>{const _0x39946d=a0_0x8725dd;try{const {customer:_0x3c12c6,date:_0x4b3e3e,prod_code:_0x5b1ab0,note:_0xa9cb09,paid_status:_0x99816f,DSI:_0x25b1b7,cash_amount:_0x26dd66,amount_data:_0x4998e7,bank_data:_0x3a6cc4,check_no:_0x2f3b49,due_date:_0x2f259d}=_0xf85c86[_0x39946d(0x148)],_0x2897e9=_0xf85c86[_0x39946d(0x12c)][_0x39946d(0x153)];if(typeof _0x5b1ab0==_0x39946d(0x170))var _0x5ab1b4=[_0xf85c86['body'][_0x39946d(0x162)]],_0x30bfd2=[_0xf85c86[_0x39946d(0x148)][_0x39946d(0x16a)]],_0x265598=[_0xf85c86[_0x39946d(0x148)][_0x39946d(0x15c)]],_0x4dd590=[_0xf85c86[_0x39946d(0x148)][_0x39946d(0x156)]],_0x197210=[_0xf85c86[_0x39946d(0x148)][_0x39946d(0x166)]],_0x344b1c=[_0xf85c86[_0x39946d(0x148)][_0x39946d(0x14a)]],_0x58fb1c=[_0xf85c86[_0x39946d(0x148)][_0x39946d(0x137)]],_0x1e8dab=[_0xf85c86[_0x39946d(0x148)][_0x39946d(0x126)]],_0x4f87b3=[_0xf85c86[_0x39946d(0x148)][_0x39946d(0x147)]],_0x547d6b=[_0xf85c86[_0x39946d(0x148)][_0x39946d(0x13c)]],_0x1e4d54=[_0xf85c86[_0x39946d(0x148)][_0x39946d(0x11f)]],_0x472fdd=[_0xf85c86['body']['getPrimUnitNo']],_0x2493ac=[_0xf85c86[_0x39946d(0x148)]['prod_cat']],_0x59763f=[_0xf85c86[_0x39946d(0x148)][_0x39946d(0x165)]],_0x2c0b8d=[_0xf85c86['body'][_0x39946d(0x175)]];else var _0x5ab1b4=[..._0xf85c86['body'][_0x39946d(0x162)]],_0x30bfd2=[..._0xf85c86[_0x39946d(0x148)][_0x39946d(0x16a)]],_0x265598=[..._0xf85c86['body']['primary_code']],_0x4dd590=[..._0xf85c86['body']['quantity']],_0x197210=[..._0xf85c86[_0x39946d(0x148)][_0x39946d(0x166)]],_0x344b1c=[..._0xf85c86['body'][_0x39946d(0x14a)]],_0x58fb1c=[..._0xf85c86[_0x39946d(0x148)][_0x39946d(0x137)]],_0x1e8dab=[..._0xf85c86[_0x39946d(0x148)]['id_transaction']],_0x4f87b3=[..._0xf85c86['body'][_0x39946d(0x147)]],_0x547d6b=[..._0xf85c86[_0x39946d(0x148)]['tmpisFG']],_0x1e4d54=[..._0xf85c86['body'][_0x39946d(0x11f)]],_0x472fdd=[..._0xf85c86['body'][_0x39946d(0x16b)]],_0x2493ac=[..._0xf85c86[_0x39946d(0x148)][_0x39946d(0x173)]],_0x59763f=[..._0xf85c86[_0x39946d(0x148)][_0x39946d(0x165)]],_0x2c0b8d=[..._0xf85c86[_0x39946d(0x148)]['conversion_unit']];const _0x3791d3=_0x5ab1b4[_0x39946d(0x131)](_0xbc5b50=>{return _0xbc5b50={'product_code':_0xbc5b50};});_0x30bfd2[_0x39946d(0x123)]((_0x1e4fbc,_0x5939c4)=>{_0x3791d3[_0x5939c4]['product_name']=_0x1e4fbc;}),_0x265598[_0x39946d(0x123)]((_0x536a64,_0x316bd5)=>{_0x3791d3[_0x316bd5]['primary_code']=_0x536a64;}),_0x1e4d54[_0x39946d(0x123)]((_0x128a8f,_0x518961)=>{_0x3791d3[_0x518961]['no_per_unit']=_0x128a8f;}),_0x4dd590['forEach']((_0x3986e4,_0x5842db)=>{const _0x3ef9cf=_0x39946d;_0x3791d3[_0x5842db][_0x3ef9cf(0x156)]=_0x3986e4;}),_0x197210[_0x39946d(0x123)]((_0x3747d2,_0x412ee4)=>{const _0x5ae21f=_0x39946d;_0x3791d3[_0x412ee4][_0x5ae21f(0x166)]=_0x3747d2;}),_0x344b1c[_0x39946d(0x123)]((_0x581093,_0x548e54)=>{_0x3791d3[_0x548e54]['price']=_0x581093;}),_0x58fb1c['forEach']((_0x51eace,_0xe81bd9)=>{_0x3791d3[_0xe81bd9]['totalprice']=_0x51eace;}),_0x1e8dab['forEach']((_0x2ba413,_0xfacac5)=>{const _0x1ab46d=_0x39946d;_0x3791d3[_0xfacac5][_0x1ab46d(0x15e)]=_0x2ba413;}),_0x4f87b3['forEach']((_0x44eebe,_0x2b6283)=>{const _0x10fc4d=_0x39946d;_0x3791d3[_0x2b6283][_0x10fc4d(0x14c)]=_0x44eebe;}),_0x547d6b[_0x39946d(0x123)]((_0x1938bb,_0xebf43e)=>{const _0x224c2d=_0x39946d;_0x3791d3[_0xebf43e][_0x224c2d(0x136)]=_0x1938bb;}),_0x59763f[_0x39946d(0x123)]((_0x15ac9e,_0x319be0)=>{_0x3791d3[_0x319be0]['secondary_unit']=_0x15ac9e;}),_0x472fdd[_0x39946d(0x123)]((_0x43f9c0,_0xf15d73)=>{const _0x573939=_0x39946d;_0x3791d3[_0xf15d73][_0x573939(0x146)]=_0x43f9c0;}),_0x2493ac[_0x39946d(0x123)]((_0x155446,_0x30dd7c)=>{const _0x16aa91=_0x39946d;_0x3791d3[_0x30dd7c][_0x16aa91(0x173)]=_0x155446;}),_0x2c0b8d[_0x39946d(0x123)]((_0x4b2404,_0x33d630)=>{_0x3791d3[_0x33d630]['conversion_data']=_0x4b2404;});const _0x4fead5=new invoice_sa();await _0x4fead5[_0x39946d(0x155)]();const _0x15e35e=_0xf85c86['user'],_0x6cba32=await staff[_0x39946d(0x13f)]({'email':_0x15e35e[_0x39946d(0x169)]}),_0x184aba=new sales_sa({'invoice':_0x4fead5[_0x39946d(0x172)][_0x39946d(0x134)]()[_0x39946d(0x159)](0x8,'0'),'customer':_0x3c12c6,'file':_0x2897e9,'date':_0x4b3e3e,'sale_product':_0x3791d3,'note':_0xa9cb09,'sales_staff_id':_0x6cba32['_id']['valueOf'](),'paid':_0x99816f,'dsi':_0x25b1b7,'cash':_0x26dd66,'amount':_0x4998e7,'bank':_0x3a6cc4,'check_no':_0x2f3b49,'due_date':_0x2f259d}),_0x501ff2=await _0x184aba[_0x39946d(0x155)]();console[_0x39946d(0x149)](_0x39946d(0x168),_0x4fead5[_0x39946d(0x172)][_0x39946d(0x134)]()[_0x39946d(0x159)](0x8,'0'));const _0x5a8362=mongoose['Types'][_0x39946d(0x16e)];_0xf85c86[_0x39946d(0x160)](_0x39946d(0x164),'Sales\x20add\x20successfully'),_0x71956c[_0x39946d(0x140)](_0x39946d(0x12a)+_0x501ff2[_0x39946d(0x151)]);}catch(_0x4ba014){console[_0x39946d(0x149)](_0x4ba014);}}),router[a0_0x8725dd(0x154)](a0_0x8725dd(0x12f),auth,async(_0x295d58,_0x4ba7ac)=>{const _0x40b511=a0_0x8725dd;try{const {date_data:_0x3910fa,note_data:_0xf09eb2,status_data:_0x88f1c0}=_0x295d58[_0x40b511(0x148)],_0x579593=new invoice_sa();await _0x579593[_0x40b511(0x155)]();const _0x3e253c=_0x295d58[_0x40b511(0x14d)],_0x1ddcce=await staff['findOne']({'email':_0x3e253c[_0x40b511(0x169)]}),_0xfbb298=new sales_sa({'invoice':_0x579593[_0x40b511(0x172)][_0x40b511(0x134)]()[_0x40b511(0x159)](0x8,'0'),'status_data':_0x88f1c0,'date':_0x3910fa,'note':_0xf09eb2,'sales_staff_id':_0x1ddcce[_0x40b511(0x151)][_0x40b511(0x133)]()}),_0x2a922b=await _0xfbb298[_0x40b511(0x155)]();console[_0x40b511(0x149)]('Invoice\x20created\x20with\x20incremented\x20start\x20value:',_0x579593['invoice_starts'][_0x40b511(0x134)]()[_0x40b511(0x159)](0x8,'0'));const _0x39c889=mongoose[_0x40b511(0x177)]['ObjectId'];_0x295d58[_0x40b511(0x160)]('success',_0x40b511(0x11e)),_0x4ba7ac['redirect'](_0x40b511(0x12a)+_0x2a922b[_0x40b511(0x151)]);}catch(_0x5e9fa9){console[_0x40b511(0x149)](_0x5e9fa9);}}),router['post'](a0_0x8725dd(0x17c),auth,async(_0x2a5a7c,_0x1b9e15)=>{const _0x1dc682=a0_0x8725dd;try{const _0x7be792=_0x2a5a7c[_0x1dc682(0x14d)],_0x30eb24=await profile['findOne']({'email':_0x7be792[_0x1dc682(0x169)]}),_0x20509d=await staff[_0x1dc682(0x125)]([{'$match':{'email':_0x7be792['email']}},{'$unwind':_0x1dc682(0x15a)},{'$match':{'product_list.isConfirm':_0x1dc682(0x143)}}]);_0x1b9e15[_0x1dc682(0x127)](_0x20509d);}catch(_0x2ed61a){}}),router[a0_0x8725dd(0x154)]('/customer_data',auth,async(_0x5b65f1,_0x48a41c)=>{const _0x3f313c=a0_0x8725dd;try{const {customer_name:_0x5ab3a8}=_0x5b65f1[_0x3f313c(0x148)],_0x45984a=await customer[_0x3f313c(0x13f)]({'name':_0x5ab3a8});_0x48a41c[_0x3f313c(0x127)](_0x45984a);}catch(_0x9853f3){}}),router[a0_0x8725dd(0x154)](a0_0x8725dd(0x13a),auth,async(_0x371e1e,_0x90e316)=>{const _0x3670df=a0_0x8725dd;try{const _0x45b0f7=_0x371e1e[_0x3670df(0x14d)],{id_data:_0x15d2d5}=_0x371e1e[_0x3670df(0x148)],_0x3e0761=await profile[_0x3670df(0x13f)]({'email':_0x45b0f7[_0x3670df(0x169)]}),_0x16bf4c=mongoose[_0x3670df(0x177)][_0x3670df(0x16e)];console['log'](_0x16bf4c(_0x15d2d5));var _0x54e942=_0x16bf4c(_0x15d2d5);const _0x3988ef=await staff[_0x3670df(0x125)]([{'$match':{'email':_0x45b0f7[_0x3670df(0x169)]}},{'$unwind':_0x3670df(0x15a)},{'$match':{'product_list.isConfirm':_0x3670df(0x143),'product_list._id':_0x54e942}}]);_0x90e316[_0x3670df(0x127)](_0x3988ef);}catch(_0x13d9a5){}}),router['post'](a0_0x8725dd(0x128),auth,async(_0x278a65,_0x2cc9f5)=>{const _0x17bc2a=a0_0x8725dd;try{const _0x25def9=await discount_volume_db[_0x17bc2a(0x13f)]();_0x2cc9f5[_0x17bc2a(0x127)](_0x25def9);}catch(_0xab3a31){}}),router[a0_0x8725dd(0x154)](a0_0x8725dd(0x163),auth,async(_0x947f0d,_0x37213d)=>{const _0xbe9c2b=a0_0x8725dd;try{const _0x1cc07c=await product[_0xbe9c2b(0x16f)]();_0x37213d['json'](_0x1cc07c);}catch(_0xb93377){}}),router[a0_0x8725dd(0x154)]('/product_data_id',auth,async(_0x4cea55,_0x5b6194)=>{const _0x22e9d0=a0_0x8725dd;try{const {id_data:_0x16ef51}=_0x4cea55[_0x22e9d0(0x148)],_0x3f8171=await product[_0x22e9d0(0x14f)](_0x16ef51);_0x5b6194[_0x22e9d0(0x127)](_0x3f8171);}catch(_0x4b3ca8){}}),module[a0_0x8725dd(0x142)]=router;