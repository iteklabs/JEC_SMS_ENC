function a0_0x5a5b(){const _0x267b7b=['unit','conversion_unit','now','no_per_unit','Invoice\x20created\x20with\x20incremented\x20start\x20value:','file','toString','205NVCKja','render','valueOf','$product_list','7488540MbesiN','Router','find','Chinese','English','totalprice','Arabic\x20(ae)','secondary_unit','/volume_setup','47626CIMUWQ','success','14AkrpfV','add_sales_sa','../models/all_models','post','mongoose','quantity','2365dPupFn','diskStorage','/getProductData','id_transaction','product_name','adj_dicount_price','isFG','/product_data_id','totalPrice','24468WStdFh','view_sales_sa','price','padStart','real_qty_unit_val','tmpisFG','French','redirect','body','email','exports','save','/add_sales','primary_code','prod_cat','all_sales_sa','id_transaction_from','getPrimUnitNo','true','findOne','/add_sales_notes','186057YgChKK','flash','errors','json','prod_code','conversion_data','findById','log','Spanish','Types','xlsx','Portuguese','Hindi','2316419oWzmcx','9780KtSFVR','map','../middleware/auth','6CiolbT','Arabic','adj_discount','German','language','/sales_sa/view_sales/','exceljs','user','prod_name','filename','./public/sales_invoice','Portuguese\x20(BR)','forEach','_id','/product_list','get','aggregate','ObjectId','string','multer','/view_sales/:id','invoice_starts','/customer_data','168lsJkAk','341301WFcrrr','English\x20(US)'];a0_0x5a5b=function(){return _0x267b7b;};return a0_0x5a5b();}const a0_0x47177f=a0_0x270d;(function(_0x410b22,_0xd90b2d){const _0x48e79b=a0_0x270d,_0x406780=_0x410b22();while(!![]){try{const _0x221471=parseInt(_0x48e79b(0xdd))/0x1*(-parseInt(_0x48e79b(0xdb))/0x2)+-parseInt(_0x48e79b(0xc5))/0x3+-parseInt(_0x48e79b(0xec))/0x4*(parseInt(_0x48e79b(0xce))/0x5)+-parseInt(_0x48e79b(0xad))/0x6*(parseInt(_0x48e79b(0xa9))/0x7)+-parseInt(_0x48e79b(0xc4))/0x8*(-parseInt(_0x48e79b(0x101))/0x9)+parseInt(_0x48e79b(0xaa))/0xa*(parseInt(_0x48e79b(0xe3))/0xb)+parseInt(_0x48e79b(0xd2))/0xc;if(_0x221471===_0xd90b2d)break;else _0x406780['push'](_0x406780['shift']());}catch(_0x5dcdcd){_0x406780['push'](_0x406780['shift']());}}}(a0_0x5a5b,0x3a7e1));const express=require('express'),app=express(),router=express[a0_0x47177f(0xd3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up,invoice_sa,sales_sa,discount_volume_db}=require(a0_0x47177f(0xdf)),auth=require(a0_0x47177f(0xac)),users=require('../public/language/languages.json'),excelJS=require(a0_0x47177f(0xb3)),xlsx=require(a0_0x47177f(0xa6)),mongoose=require(a0_0x47177f(0xe1)),multer=require(a0_0x47177f(0xc0)),storage=multer[a0_0x47177f(0xe4)]({'destination':(_0x429a98,_0x4fcc4c,_0x1de436)=>{const _0x272bf3=a0_0x47177f;_0x1de436(null,_0x272bf3(0xb7));},'filename':(_0x4a0d4e,_0x747f7a,_0x2da616)=>{const _0xc3d9a1=a0_0x47177f;_0x2da616(null,Date[_0xc3d9a1(0xc9)]()+'~'+_0x747f7a['originalname']);}}),upload=multer({'storage':storage});function a0_0x270d(_0x43ce6a,_0x49338d){const _0x5a5bca=a0_0x5a5b();return a0_0x270d=function(_0x270d47,_0x58845c){_0x270d47=_0x270d47-0xa1;let _0x2afa24=_0x5a5bca[_0x270d47];return _0x2afa24;},a0_0x270d(_0x43ce6a,_0x49338d);}router[a0_0x47177f(0xbc)]('/',auth,async(_0x532376,_0x5d0a81)=>{const _0x2a9e79=a0_0x47177f;try{const _0x6d51a9=await master_shop[_0x2a9e79(0xd4)](),_0x5b3a33=_0x532376[_0x2a9e79(0xb4)],_0x45c330=await profile[_0x2a9e79(0xff)]({'email':_0x5b3a33[_0x2a9e79(0xf5)]}),_0x32f91e=await staff[_0x2a9e79(0xff)]({'email':_0x5b3a33[_0x2a9e79(0xf5)]}),_0x25468b=await sales_sa['find']({'sales_staff_id':_0x32f91e[_0x2a9e79(0xba)]});if(_0x6d51a9[0x0]['language']==_0x2a9e79(0xc6))var _0x5e2fd6=users[_0x2a9e79(0xd6)];else{if(_0x6d51a9[0x0][_0x2a9e79(0xb1)]==_0x2a9e79(0xa8))var _0x5e2fd6=users[_0x2a9e79(0xa8)];else{if(_0x6d51a9[0x0]['language']==_0x2a9e79(0xb0))var _0x5e2fd6=users[_0x2a9e79(0xb0)];else{if(_0x6d51a9[0x0]['language']==_0x2a9e79(0xa4))var _0x5e2fd6=users[_0x2a9e79(0xa4)];else{if(_0x6d51a9[0x0]['language']==_0x2a9e79(0xf2))var _0x5e2fd6=users[_0x2a9e79(0xf2)];else{if(_0x6d51a9[0x0][_0x2a9e79(0xb1)]==_0x2a9e79(0xb8))var _0x5e2fd6=users[_0x2a9e79(0xa7)];else{if(_0x6d51a9[0x0][_0x2a9e79(0xb1)]==_0x2a9e79(0xd5))var _0x5e2fd6=users['Chinese'];else{if(_0x6d51a9[0x0]['language']==_0x2a9e79(0xd8))var _0x5e2fd6=users[_0x2a9e79(0xae)];}}}}}}}_0x5d0a81[_0x2a9e79(0xcf)](_0x2a9e79(0xfb),{'success':_0x532376['flash'](_0x2a9e79(0xdc)),'errors':_0x532376[_0x2a9e79(0x102)](_0x2a9e79(0x103)),'master_shop':_0x6d51a9,'profile':_0x45c330,'role':_0x5b3a33,'language':_0x5e2fd6,'product_list':_0x32f91e['product_list'],'sales_mine':_0x25468b,'staff_arr':_0x32f91e});}catch(_0x5e8801){console[_0x2a9e79(0xa3)](_0x5e8801);}}),router[a0_0x47177f(0xbc)]('/add_sales',auth,async(_0x337655,_0x4dfd79)=>{const _0x534507=a0_0x47177f;try{const _0x543ddf=await master_shop['find'](),_0x59f238=_0x337655['user'],_0x3676fe=await profile['findOne']({'email':_0x59f238['email']}),_0x2d82a7=await staff[_0x534507(0xff)]({'email':_0x59f238[_0x534507(0xf5)]}),_0x16c6d7=await customer[_0x534507(0xd4)]({'agent_id':_0x2d82a7[_0x534507(0xba)]});if(_0x543ddf[0x0][_0x534507(0xb1)]==_0x534507(0xc6))var _0x3164f4=users['English'];else{if(_0x543ddf[0x0][_0x534507(0xb1)]==_0x534507(0xa8))var _0x3164f4=users['Hindi'];else{if(_0x543ddf[0x0][_0x534507(0xb1)]==_0x534507(0xb0))var _0x3164f4=users[_0x534507(0xb0)];else{if(_0x543ddf[0x0][_0x534507(0xb1)]=='Spanish')var _0x3164f4=users[_0x534507(0xa4)];else{if(_0x543ddf[0x0][_0x534507(0xb1)]==_0x534507(0xf2))var _0x3164f4=users['French'];else{if(_0x543ddf[0x0][_0x534507(0xb1)]=='Portuguese\x20(BR)')var _0x3164f4=users['Portuguese'];else{if(_0x543ddf[0x0][_0x534507(0xb1)]=='Chinese')var _0x3164f4=users['Chinese'];else{if(_0x543ddf[0x0][_0x534507(0xb1)]==_0x534507(0xd8))var _0x3164f4=users['Arabic'];}}}}}}}_0x4dfd79[_0x534507(0xcf)](_0x534507(0xde),{'success':_0x337655[_0x534507(0x102)]('success'),'errors':_0x337655[_0x534507(0x102)]('errors'),'master_shop':_0x543ddf,'profile':_0x3676fe,'role':_0x59f238,'language':_0x3164f4,'customer':_0x16c6d7,'staff_arr':_0x2d82a7});}catch(_0x9b73dc){console[_0x534507(0xa3)](_0x9b73dc);}}),router[a0_0x47177f(0xbc)](a0_0x47177f(0xc1),auth,async(_0x2a3bf6,_0x516707)=>{const _0x36bde6=a0_0x47177f;try{const _0x22e501=await master_shop[_0x36bde6(0xd4)](),_0x399d3f=_0x2a3bf6[_0x36bde6(0xb4)],_0xc2f688=await profile[_0x36bde6(0xff)]({'email':_0x399d3f[_0x36bde6(0xf5)]}),_0x218b08=await staff[_0x36bde6(0xff)]({'email':_0x399d3f['email']}),_0x2d1e97=await customer[_0x36bde6(0xd4)]({'agent_id':_0x218b08['_id']}),_0x536d4f=_0x2a3bf6['params']['id'],_0x3ad21d=await sales_sa['findById'](_0x536d4f);if(_0x22e501[0x0][_0x36bde6(0xb1)]==_0x36bde6(0xc6))var _0x3d010b=users[_0x36bde6(0xd6)];else{if(_0x22e501[0x0][_0x36bde6(0xb1)]==_0x36bde6(0xa8))var _0x3d010b=users[_0x36bde6(0xa8)];else{if(_0x22e501[0x0]['language']==_0x36bde6(0xb0))var _0x3d010b=users[_0x36bde6(0xb0)];else{if(_0x22e501[0x0]['language']=='Spanish')var _0x3d010b=users[_0x36bde6(0xa4)];else{if(_0x22e501[0x0][_0x36bde6(0xb1)]==_0x36bde6(0xf2))var _0x3d010b=users[_0x36bde6(0xf2)];else{if(_0x22e501[0x0][_0x36bde6(0xb1)]=='Portuguese\x20(BR)')var _0x3d010b=users[_0x36bde6(0xa7)];else{if(_0x22e501[0x0]['language']==_0x36bde6(0xd5))var _0x3d010b=users[_0x36bde6(0xd5)];else{if(_0x22e501[0x0]['language']==_0x36bde6(0xd8))var _0x3d010b=users[_0x36bde6(0xae)];}}}}}}}_0x516707['render'](_0x36bde6(0xed),{'success':_0x2a3bf6[_0x36bde6(0x102)]('success'),'errors':_0x2a3bf6[_0x36bde6(0x102)](_0x36bde6(0x103)),'master_shop':_0x22e501,'profile':_0xc2f688,'role':_0x399d3f,'language':_0x3d010b,'customer':_0x2d1e97,'sales_sa':_0x3ad21d,'staff_arr':_0x218b08});}catch(_0x2528ec){console[_0x36bde6(0xa3)](_0x2528ec);}}),router[a0_0x47177f(0xe0)](a0_0x47177f(0xf8),auth,upload['single']('image'),async(_0x106629,_0x3f719d)=>{const _0xd60320=a0_0x47177f;try{const {customer:_0x4d334e,date:_0x16d592,prod_code:_0x17b7b2,note:_0x1e375d,paid_status:_0x2f1847,DSI:_0x4980d4,cash_amount:_0x10bafe,amount_data:_0x3f90cc,bank_data:_0x4045fb,check_no:_0x4b6fe5,due_date:_0x360824}=_0x106629[_0xd60320(0xf4)],_0xfbcb24=_0x106629[_0xd60320(0xcc)][_0xd60320(0xb6)];if(typeof _0x17b7b2==_0xd60320(0xbf))var _0x4862fa=[_0x106629[_0xd60320(0xf4)][_0xd60320(0x105)]],_0x36a585=[_0x106629[_0xd60320(0xf4)][_0xd60320(0xb5)]],_0x53019f=[_0x106629[_0xd60320(0xf4)][_0xd60320(0xf9)]],_0x24e821=[_0x106629['body']['quantity']],_0x3d22c6=[_0x106629[_0xd60320(0xf4)][_0xd60320(0xc7)]],_0x108309=[_0x106629[_0xd60320(0xf4)]['price']],_0x5ea364=[_0x106629[_0xd60320(0xf4)][_0xd60320(0xeb)]],_0x4cff8d=[_0x106629[_0xd60320(0xf4)][_0xd60320(0xe6)]],_0x5e08e8=[_0x106629[_0xd60320(0xf4)]['adj_dicount_price']],_0x6ed376=[_0x106629[_0xd60320(0xf4)][_0xd60320(0xf1)]],_0x2163f4=[_0x106629['body'][_0xd60320(0xca)]],_0x9368a4=[_0x106629[_0xd60320(0xf4)][_0xd60320(0xfd)]],_0x528cf7=[_0x106629[_0xd60320(0xf4)][_0xd60320(0xfa)]],_0x30d9a5=[_0x106629['body'][_0xd60320(0xd9)]],_0x6dc3dd=[_0x106629[_0xd60320(0xf4)][_0xd60320(0xc8)]];else var _0x4862fa=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0x105)]],_0x36a585=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0xb5)]],_0x53019f=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0xf9)]],_0x24e821=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0xe2)]],_0x3d22c6=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0xc7)]],_0x108309=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0xee)]],_0x5ea364=[..._0x106629[_0xd60320(0xf4)]['totalPrice']],_0x4cff8d=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0xe6)]],_0x5e08e8=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0xe8)]],_0x6ed376=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0xf1)]],_0x2163f4=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0xca)]],_0x9368a4=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0xfd)]],_0x528cf7=[..._0x106629['body'][_0xd60320(0xfa)]],_0x30d9a5=[..._0x106629[_0xd60320(0xf4)][_0xd60320(0xd9)]],_0x6dc3dd=[..._0x106629['body'][_0xd60320(0xc8)]];const _0x27536b=_0x4862fa[_0xd60320(0xab)](_0x3f6933=>{return _0x3f6933={'product_code':_0x3f6933};});_0x36a585[_0xd60320(0xb9)]((_0xc7375c,_0x5cb438)=>{const _0xb5b69b=_0xd60320;_0x27536b[_0x5cb438][_0xb5b69b(0xe7)]=_0xc7375c;}),_0x53019f[_0xd60320(0xb9)]((_0x3d36ad,_0x517274)=>{const _0xda4698=_0xd60320;_0x27536b[_0x517274][_0xda4698(0xf9)]=_0x3d36ad;}),_0x2163f4[_0xd60320(0xb9)]((_0x534bb5,_0x36c8c5)=>{_0x27536b[_0x36c8c5]['no_per_unit']=_0x534bb5;}),_0x24e821['forEach']((_0x322ec9,_0xd74cd7)=>{_0x27536b[_0xd74cd7]['quantity']=_0x322ec9;}),_0x3d22c6['forEach']((_0x53e094,_0x549d92)=>{_0x27536b[_0x549d92]['unit']=_0x53e094;}),_0x108309[_0xd60320(0xb9)]((_0x4e3ba6,_0x4ebb4a)=>{const _0x4505b8=_0xd60320;_0x27536b[_0x4ebb4a][_0x4505b8(0xee)]=_0x4e3ba6;}),_0x5ea364[_0xd60320(0xb9)]((_0x471eb0,_0x203019)=>{const _0x6e4c0b=_0xd60320;_0x27536b[_0x203019][_0x6e4c0b(0xd7)]=_0x471eb0;}),_0x4cff8d[_0xd60320(0xb9)]((_0xb05e9c,_0x1ab79f)=>{const _0x2c0dc1=_0xd60320;_0x27536b[_0x1ab79f][_0x2c0dc1(0xfc)]=_0xb05e9c;}),_0x5e08e8[_0xd60320(0xb9)]((_0x2c829c,_0x1a7dd7)=>{const _0x11fa06=_0xd60320;_0x27536b[_0x1a7dd7][_0x11fa06(0xaf)]=_0x2c829c;}),_0x6ed376[_0xd60320(0xb9)]((_0x487d4f,_0x35f622)=>{const _0x13d72f=_0xd60320;_0x27536b[_0x35f622][_0x13d72f(0xe9)]=_0x487d4f;}),_0x30d9a5[_0xd60320(0xb9)]((_0x3a87aa,_0x11c862)=>{const _0x48b26e=_0xd60320;_0x27536b[_0x11c862][_0x48b26e(0xd9)]=_0x3a87aa;}),_0x9368a4[_0xd60320(0xb9)]((_0x6dba4a,_0x3280ea)=>{const _0x7054fe=_0xd60320;_0x27536b[_0x3280ea][_0x7054fe(0xf0)]=_0x6dba4a;}),_0x528cf7[_0xd60320(0xb9)]((_0x35a3fd,_0x59a3f4)=>{const _0xe319be=_0xd60320;_0x27536b[_0x59a3f4][_0xe319be(0xfa)]=_0x35a3fd;}),_0x6dc3dd[_0xd60320(0xb9)]((_0xf7fa16,_0x14e2f6)=>{const _0x5f5f0d=_0xd60320;_0x27536b[_0x14e2f6][_0x5f5f0d(0xa1)]=_0xf7fa16;});const _0x155b4f=new invoice_sa();await _0x155b4f[_0xd60320(0xf7)]();const _0x17846a=_0x106629[_0xd60320(0xb4)],_0x48cf02=await staff[_0xd60320(0xff)]({'email':_0x17846a['email']}),_0x1c7489=new sales_sa({'invoice':_0x155b4f[_0xd60320(0xc2)][_0xd60320(0xcd)]()[_0xd60320(0xef)](0x8,'0'),'customer':_0x4d334e,'file':_0xfbcb24,'date':_0x16d592,'sale_product':_0x27536b,'note':_0x1e375d,'sales_staff_id':_0x48cf02[_0xd60320(0xba)][_0xd60320(0xd0)](),'paid':_0x2f1847,'dsi':_0x4980d4,'cash':_0x10bafe,'amount':_0x3f90cc,'bank':_0x4045fb,'check_no':_0x4b6fe5,'due_date':_0x360824}),_0x2d1fbb=await _0x1c7489[_0xd60320(0xf7)]();console[_0xd60320(0xa3)]('Invoice\x20created\x20with\x20incremented\x20start\x20value:',_0x155b4f[_0xd60320(0xc2)]['toString']()[_0xd60320(0xef)](0x8,'0'));const _0x12948f=mongoose[_0xd60320(0xa5)][_0xd60320(0xbe)];_0x106629[_0xd60320(0x102)]('success','Sales\x20add\x20successfully'),_0x3f719d['redirect'](_0xd60320(0xb2)+_0x2d1fbb['_id']);}catch(_0x2c3a82){console[_0xd60320(0xa3)](_0x2c3a82);}}),router[a0_0x47177f(0xe0)](a0_0x47177f(0x100),auth,async(_0x2a9c93,_0x2ae7e1)=>{const _0x32af27=a0_0x47177f;try{const {date_data:_0x584239,note_data:_0x1861df,status_data:_0x33a3ac}=_0x2a9c93['body'],_0x21ae43=new invoice_sa();await _0x21ae43['save']();const _0x4b3d11=_0x2a9c93[_0x32af27(0xb4)],_0x126175=await staff['findOne']({'email':_0x4b3d11[_0x32af27(0xf5)]}),_0x59c7dc=new sales_sa({'invoice':_0x21ae43[_0x32af27(0xc2)][_0x32af27(0xcd)]()[_0x32af27(0xef)](0x8,'0'),'status_data':_0x33a3ac,'date':_0x584239,'note':_0x1861df,'sales_staff_id':_0x126175['_id']['valueOf']()}),_0x5591f1=await _0x59c7dc['save']();console['log'](_0x32af27(0xcb),_0x21ae43[_0x32af27(0xc2)][_0x32af27(0xcd)]()[_0x32af27(0xef)](0x8,'0'));const _0x308dc5=mongoose['Types'][_0x32af27(0xbe)];_0x2a9c93[_0x32af27(0x102)]('success','Sales\x20add\x20successfully'),_0x2ae7e1[_0x32af27(0xf3)](_0x32af27(0xb2)+_0x5591f1[_0x32af27(0xba)]);}catch(_0x56c806){console['log'](_0x56c806);}}),router[a0_0x47177f(0xe0)](a0_0x47177f(0xbb),auth,async(_0x443e09,_0x5d78ef)=>{const _0x351757=a0_0x47177f;try{const _0x1cef87=_0x443e09['user'],_0xa62f55=await profile[_0x351757(0xff)]({'email':_0x1cef87[_0x351757(0xf5)]}),_0x1dbbf4=await staff[_0x351757(0xbd)]([{'$match':{'email':_0x1cef87[_0x351757(0xf5)]}},{'$unwind':_0x351757(0xd1)},{'$match':{'product_list.isConfirm':_0x351757(0xfe)}}]);_0x5d78ef[_0x351757(0x104)](_0x1dbbf4);}catch(_0x20e30){}}),router[a0_0x47177f(0xe0)](a0_0x47177f(0xc3),auth,async(_0x130bb3,_0x26a539)=>{const _0x4171df=a0_0x47177f;try{const {customer_name:_0x492e35}=_0x130bb3[_0x4171df(0xf4)],_0x3fece2=await customer[_0x4171df(0xff)]({'name':_0x492e35});_0x26a539[_0x4171df(0x104)](_0x3fece2);}catch(_0x579d34){}}),router['post']('/product_data',auth,async(_0x5b0f57,_0x10e07f)=>{const _0x5c076e=a0_0x47177f;try{const _0x5032c8=_0x5b0f57[_0x5c076e(0xb4)],{id_data:_0x25d29e}=_0x5b0f57[_0x5c076e(0xf4)],_0x47ca66=await profile[_0x5c076e(0xff)]({'email':_0x5032c8[_0x5c076e(0xf5)]}),_0xf05f14=mongoose[_0x5c076e(0xa5)][_0x5c076e(0xbe)];console[_0x5c076e(0xa3)](_0xf05f14(_0x25d29e));var _0x143810=_0xf05f14(_0x25d29e);const _0x204fcb=await staff[_0x5c076e(0xbd)]([{'$match':{'email':_0x5032c8[_0x5c076e(0xf5)]}},{'$unwind':_0x5c076e(0xd1)},{'$match':{'product_list.isConfirm':_0x5c076e(0xfe),'product_list._id':_0x143810}}]);_0x10e07f[_0x5c076e(0x104)](_0x204fcb);}catch(_0x4a12aa){}}),router[a0_0x47177f(0xe0)](a0_0x47177f(0xda),auth,async(_0x3a8e72,_0x24909c)=>{try{const _0x1b97e7=await discount_volume_db['findOne']();_0x24909c['json'](_0x1b97e7);}catch(_0x4de87b){}}),router[a0_0x47177f(0xe0)](a0_0x47177f(0xe5),auth,async(_0x266f0f,_0x4451a8)=>{const _0x2e4a70=a0_0x47177f;try{const _0x582baf=await product[_0x2e4a70(0xd4)]();_0x4451a8['json'](_0x582baf);}catch(_0x10eaef){}}),router[a0_0x47177f(0xe0)](a0_0x47177f(0xea),auth,async(_0x284913,_0x252c60)=>{const _0x2fb239=a0_0x47177f;try{const {id_data:_0x4edd08}=_0x284913[_0x2fb239(0xf4)],_0x52f3be=await product[_0x2fb239(0xa2)](_0x4edd08);_0x252c60[_0x2fb239(0x104)](_0x52f3be);}catch(_0x317af9){}}),module[a0_0x47177f(0xf6)]=router;