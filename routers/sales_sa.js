function a0_0x302c(){const _0x5719d3=['Invoice\x20created\x20with\x20incremented\x20start\x20value:','../middleware/auth','image','156ROTUiL','54032bWGich','body','xlsx','7553ZFXPIS','prod_name','Portuguese','find','price','78762XKuEAx','English','/view_sales/:id','getPrimUnitNo','Types','/getProductData','user','add_sales_sa','Chinese','valueOf','3496UVhUHb','save','12WWMBdn','conversion_unit','render','prod_cat','Portuguese\x20(BR)','id_transaction','Arabic','primary_code','_id','/product_list','/sales_sa/view_sales/','adj_discount','isFG','3437320JVjTmL','tmpisFG','Spanish','forEach','id_transaction_from','ObjectId','totalprice','flash','Arabic\x20(ae)','multer','Sales\x20add\x20successfully','/product_data','unit','diskStorage','secondary_unit','product_name','log','json','redirect','filename','success','findOne','prod_code','/add_sales','true','padStart','no_per_unit','French','language','totalPrice','email','single','express','22712943OoRdgZ','originalname','aggregate','73296uzjJtz','exports','adj_dicount_price','Router','invoice_starts','quantity','482836NkKqTw','60zIKfCl','$product_list','German','9RXCdMx','product_list','errors','English\x20(US)','get','all_sales_sa','Hindi','toString','post'];a0_0x302c=function(){return _0x5719d3;};return a0_0x302c();}const a0_0x808601=a0_0x5798;(function(_0x403e06,_0x5cebd8){const _0x28ac02=a0_0x5798,_0x262858=_0x403e06();while(!![]){try{const _0x1d08bb=-parseInt(_0x28ac02(0x15d))/0x1+-parseInt(_0x28ac02(0x144))/0x2+-parseInt(_0x28ac02(0x154))/0x3*(parseInt(_0x28ac02(0x155))/0x4)+-parseInt(_0x28ac02(0x145))/0x5*(-parseInt(_0x28ac02(0x13e))/0x6)+-parseInt(_0x28ac02(0x158))/0x7*(parseInt(_0x28ac02(0x167))/0x8)+-parseInt(_0x28ac02(0x148))/0x9*(parseInt(_0x28ac02(0x11a))/0xa)+-parseInt(_0x28ac02(0x13b))/0xb*(-parseInt(_0x28ac02(0x10d))/0xc);if(_0x1d08bb===_0x5cebd8)break;else _0x262858['push'](_0x262858['shift']());}catch(_0x3f4059){_0x262858['push'](_0x262858['shift']());}}}(a0_0x302c,0x5b332));const express=require(a0_0x808601(0x13a)),app=express(),router=express[a0_0x808601(0x141)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up,invoice_sa,sales_sa,discount_volume_db}=require('../models/all_models'),auth=require(a0_0x808601(0x152)),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require(a0_0x808601(0x157)),mongoose=require('mongoose'),multer=require(a0_0x808601(0x123)),storage=multer[a0_0x808601(0x127)]({'destination':(_0x519ba9,_0x265989,_0x2c0d1e)=>{_0x2c0d1e(null,'./public/sales_invoice');},'filename':(_0x33373a,_0x2ee572,_0x345027)=>{const _0x12b564=a0_0x808601;_0x345027(null,Date['now']()+'~'+_0x2ee572[_0x12b564(0x13c)]);}}),upload=multer({'storage':storage});function a0_0x5798(_0x478d94,_0xfd157){const _0x302c82=a0_0x302c();return a0_0x5798=function(_0x5798b3,_0x50239b){_0x5798b3=_0x5798b3-0x10c;let _0x480254=_0x302c82[_0x5798b3];return _0x480254;},a0_0x5798(_0x478d94,_0xfd157);}router['get']('/',auth,async(_0xcb3f2c,_0x244e6e)=>{const _0x205ef4=a0_0x808601;try{const _0xab585e=await master_shop[_0x205ef4(0x15b)](),_0x257233=_0xcb3f2c['user'],_0x350a45=await profile['findOne']({'email':_0x257233['email']}),_0x40e2a3=await staff[_0x205ef4(0x12f)]({'email':_0x257233[_0x205ef4(0x138)]}),_0x1e7b5c=await sales_sa['find']({'sales_staff_id':_0x40e2a3[_0x205ef4(0x115)]});if(_0xab585e[0x0][_0x205ef4(0x136)]==_0x205ef4(0x14b))var _0x166546=users['English'];else{if(_0xab585e[0x0][_0x205ef4(0x136)]==_0x205ef4(0x14e))var _0x166546=users[_0x205ef4(0x14e)];else{if(_0xab585e[0x0]['language']==_0x205ef4(0x147))var _0x166546=users[_0x205ef4(0x147)];else{if(_0xab585e[0x0][_0x205ef4(0x136)]==_0x205ef4(0x11c))var _0x166546=users['Spanish'];else{if(_0xab585e[0x0][_0x205ef4(0x136)]==_0x205ef4(0x135))var _0x166546=users[_0x205ef4(0x135)];else{if(_0xab585e[0x0][_0x205ef4(0x136)]==_0x205ef4(0x111))var _0x166546=users['Portuguese'];else{if(_0xab585e[0x0][_0x205ef4(0x136)]==_0x205ef4(0x165))var _0x166546=users[_0x205ef4(0x165)];else{if(_0xab585e[0x0]['language']==_0x205ef4(0x122))var _0x166546=users['Arabic'];}}}}}}}_0x244e6e[_0x205ef4(0x10f)](_0x205ef4(0x14d),{'success':_0xcb3f2c[_0x205ef4(0x121)](_0x205ef4(0x12e)),'errors':_0xcb3f2c[_0x205ef4(0x121)](_0x205ef4(0x14a)),'master_shop':_0xab585e,'profile':_0x350a45,'role':_0x257233,'language':_0x166546,'product_list':_0x40e2a3[_0x205ef4(0x149)],'sales_mine':_0x1e7b5c,'staff_arr':_0x40e2a3});}catch(_0x426f6e){console[_0x205ef4(0x12a)](_0x426f6e);}}),router[a0_0x808601(0x14c)](a0_0x808601(0x131),auth,async(_0x4acaa5,_0x5b77e1)=>{const _0x356520=a0_0x808601;try{const _0x2a4907=await master_shop[_0x356520(0x15b)](),_0x10c768=_0x4acaa5['user'],_0x342128=await profile[_0x356520(0x12f)]({'email':_0x10c768['email']}),_0x11f6b7=await staff['findOne']({'email':_0x10c768[_0x356520(0x138)]}),_0x16b273=await customer['find']({'agent_id':_0x11f6b7['_id']});if(_0x2a4907[0x0][_0x356520(0x136)]==_0x356520(0x14b))var _0x25e3ec=users[_0x356520(0x15e)];else{if(_0x2a4907[0x0]['language']=='Hindi')var _0x25e3ec=users[_0x356520(0x14e)];else{if(_0x2a4907[0x0][_0x356520(0x136)]==_0x356520(0x147))var _0x25e3ec=users[_0x356520(0x147)];else{if(_0x2a4907[0x0]['language']==_0x356520(0x11c))var _0x25e3ec=users['Spanish'];else{if(_0x2a4907[0x0]['language']==_0x356520(0x135))var _0x25e3ec=users['French'];else{if(_0x2a4907[0x0][_0x356520(0x136)]==_0x356520(0x111))var _0x25e3ec=users[_0x356520(0x15a)];else{if(_0x2a4907[0x0][_0x356520(0x136)]=='Chinese')var _0x25e3ec=users[_0x356520(0x165)];else{if(_0x2a4907[0x0][_0x356520(0x136)]=='Arabic\x20(ae)')var _0x25e3ec=users[_0x356520(0x113)];}}}}}}}_0x5b77e1[_0x356520(0x10f)](_0x356520(0x164),{'success':_0x4acaa5[_0x356520(0x121)](_0x356520(0x12e)),'errors':_0x4acaa5[_0x356520(0x121)](_0x356520(0x14a)),'master_shop':_0x2a4907,'profile':_0x342128,'role':_0x10c768,'language':_0x25e3ec,'customer':_0x16b273,'staff_arr':_0x11f6b7});}catch(_0x2d82b8){console[_0x356520(0x12a)](_0x2d82b8);}}),router[a0_0x808601(0x14c)](a0_0x808601(0x15f),auth,async(_0x5301bb,_0x1ec430)=>{const _0x2c06d4=a0_0x808601;try{const _0x1b5e07=await master_shop[_0x2c06d4(0x15b)](),_0x5ebf0b=_0x5301bb[_0x2c06d4(0x163)],_0x56c235=await profile[_0x2c06d4(0x12f)]({'email':_0x5ebf0b['email']}),_0x13233e=await staff[_0x2c06d4(0x12f)]({'email':_0x5ebf0b[_0x2c06d4(0x138)]}),_0x57a30f=await customer[_0x2c06d4(0x15b)]({'agent_id':_0x13233e[_0x2c06d4(0x115)]}),_0x5d73fc=_0x5301bb['params']['id'],_0x3c9711=await sales_sa['findById'](_0x5d73fc);if(_0x1b5e07[0x0][_0x2c06d4(0x136)]=='English\x20(US)')var _0x1878b1=users[_0x2c06d4(0x15e)];else{if(_0x1b5e07[0x0][_0x2c06d4(0x136)]==_0x2c06d4(0x14e))var _0x1878b1=users[_0x2c06d4(0x14e)];else{if(_0x1b5e07[0x0][_0x2c06d4(0x136)]=='German')var _0x1878b1=users[_0x2c06d4(0x147)];else{if(_0x1b5e07[0x0][_0x2c06d4(0x136)]==_0x2c06d4(0x11c))var _0x1878b1=users[_0x2c06d4(0x11c)];else{if(_0x1b5e07[0x0]['language']==_0x2c06d4(0x135))var _0x1878b1=users[_0x2c06d4(0x135)];else{if(_0x1b5e07[0x0][_0x2c06d4(0x136)]==_0x2c06d4(0x111))var _0x1878b1=users[_0x2c06d4(0x15a)];else{if(_0x1b5e07[0x0]['language']==_0x2c06d4(0x165))var _0x1878b1=users[_0x2c06d4(0x165)];else{if(_0x1b5e07[0x0][_0x2c06d4(0x136)]==_0x2c06d4(0x122))var _0x1878b1=users[_0x2c06d4(0x113)];}}}}}}}_0x1ec430[_0x2c06d4(0x10f)]('view_sales_sa',{'success':_0x5301bb['flash'](_0x2c06d4(0x12e)),'errors':_0x5301bb[_0x2c06d4(0x121)]('errors'),'master_shop':_0x1b5e07,'profile':_0x56c235,'role':_0x5ebf0b,'language':_0x1878b1,'customer':_0x57a30f,'sales_sa':_0x3c9711,'staff_arr':_0x13233e});}catch(_0x2f2934){console[_0x2c06d4(0x12a)](_0x2f2934);}}),router[a0_0x808601(0x150)](a0_0x808601(0x131),auth,upload[a0_0x808601(0x139)](a0_0x808601(0x153)),async(_0x1182b1,_0x1a3eee)=>{const _0x181075=a0_0x808601;try{const {customer:_0x1ab345,date:_0x2d3491,prod_code:_0xb1d577,note:_0x538d85,paid_status:_0xf4c11f,DSI:_0x1e4025,cash_amount:_0x22f49d,amount_data:_0x5d5f5a,bank_data:_0x36b661,check_no:_0x1a5147,due_date:_0x3005f3}=_0x1182b1[_0x181075(0x156)],_0x3e6b48=_0x1182b1['file'][_0x181075(0x12d)];if(typeof _0xb1d577=='string')var _0x576c81=[_0x1182b1[_0x181075(0x156)][_0x181075(0x130)]],_0x1fdae1=[_0x1182b1[_0x181075(0x156)][_0x181075(0x159)]],_0x161be3=[_0x1182b1[_0x181075(0x156)]['primary_code']],_0x58f129=[_0x1182b1[_0x181075(0x156)][_0x181075(0x143)]],_0x12d856=[_0x1182b1[_0x181075(0x156)][_0x181075(0x126)]],_0x320301=[_0x1182b1[_0x181075(0x156)][_0x181075(0x15c)]],_0x3475cc=[_0x1182b1['body'][_0x181075(0x137)]],_0x5b1297=[_0x1182b1[_0x181075(0x156)][_0x181075(0x112)]],_0x188323=[_0x1182b1['body'][_0x181075(0x140)]],_0x7fa227=[_0x1182b1['body'][_0x181075(0x11b)]],_0x203e7a=[_0x1182b1[_0x181075(0x156)]['no_per_unit']],_0x156b9c=[_0x1182b1['body']['getPrimUnitNo']],_0x4fadaf=[_0x1182b1[_0x181075(0x156)][_0x181075(0x110)]],_0x59cd18=[_0x1182b1['body']['secondary_unit']],_0x30c0b9=[_0x1182b1[_0x181075(0x156)][_0x181075(0x10e)]];else var _0x576c81=[..._0x1182b1[_0x181075(0x156)][_0x181075(0x130)]],_0x1fdae1=[..._0x1182b1['body'][_0x181075(0x159)]],_0x161be3=[..._0x1182b1['body'][_0x181075(0x114)]],_0x58f129=[..._0x1182b1[_0x181075(0x156)]['quantity']],_0x12d856=[..._0x1182b1['body']['unit']],_0x320301=[..._0x1182b1['body'][_0x181075(0x15c)]],_0x3475cc=[..._0x1182b1[_0x181075(0x156)]['totalPrice']],_0x5b1297=[..._0x1182b1['body'][_0x181075(0x112)]],_0x188323=[..._0x1182b1[_0x181075(0x156)][_0x181075(0x140)]],_0x7fa227=[..._0x1182b1[_0x181075(0x156)][_0x181075(0x11b)]],_0x203e7a=[..._0x1182b1[_0x181075(0x156)][_0x181075(0x134)]],_0x156b9c=[..._0x1182b1[_0x181075(0x156)][_0x181075(0x160)]],_0x4fadaf=[..._0x1182b1[_0x181075(0x156)]['prod_cat']],_0x59cd18=[..._0x1182b1[_0x181075(0x156)][_0x181075(0x128)]],_0x30c0b9=[..._0x1182b1[_0x181075(0x156)]['conversion_unit']];const _0x1c5c1e=_0x576c81['map'](_0x87344a=>{return _0x87344a={'product_code':_0x87344a};});_0x1fdae1[_0x181075(0x11d)]((_0x5156e8,_0x410f43)=>{const _0x48fb57=_0x181075;_0x1c5c1e[_0x410f43][_0x48fb57(0x129)]=_0x5156e8;}),_0x161be3[_0x181075(0x11d)]((_0x5207a7,_0xc15701)=>{const _0x22ff32=_0x181075;_0x1c5c1e[_0xc15701][_0x22ff32(0x114)]=_0x5207a7;}),_0x203e7a['forEach']((_0x1f5faf,_0x4cb0cb)=>{const _0x4aeeac=_0x181075;_0x1c5c1e[_0x4cb0cb][_0x4aeeac(0x134)]=_0x1f5faf;}),_0x58f129[_0x181075(0x11d)]((_0x240704,_0x6dff46)=>{const _0x54f5e5=_0x181075;_0x1c5c1e[_0x6dff46][_0x54f5e5(0x143)]=_0x240704;}),_0x12d856['forEach']((_0xc4ffd4,_0x560074)=>{const _0x3d4d9b=_0x181075;_0x1c5c1e[_0x560074][_0x3d4d9b(0x126)]=_0xc4ffd4;}),_0x320301['forEach']((_0x192eef,_0x15faa9)=>{const _0x12a259=_0x181075;_0x1c5c1e[_0x15faa9][_0x12a259(0x15c)]=_0x192eef;}),_0x3475cc[_0x181075(0x11d)]((_0x43bb3a,_0x2e0dae)=>{const _0x2a9121=_0x181075;_0x1c5c1e[_0x2e0dae][_0x2a9121(0x120)]=_0x43bb3a;}),_0x5b1297['forEach']((_0x291733,_0x14253e)=>{const _0x31862b=_0x181075;_0x1c5c1e[_0x14253e][_0x31862b(0x11e)]=_0x291733;}),_0x188323[_0x181075(0x11d)]((_0x3ee141,_0x2a0af5)=>{const _0x69776d=_0x181075;_0x1c5c1e[_0x2a0af5][_0x69776d(0x118)]=_0x3ee141;}),_0x7fa227['forEach']((_0x2ec282,_0x28e91a)=>{const _0x5879fc=_0x181075;_0x1c5c1e[_0x28e91a][_0x5879fc(0x119)]=_0x2ec282;}),_0x59cd18[_0x181075(0x11d)]((_0x542936,_0x39e587)=>{const _0x39ddfe=_0x181075;_0x1c5c1e[_0x39e587][_0x39ddfe(0x128)]=_0x542936;}),_0x156b9c[_0x181075(0x11d)]((_0x3fa69f,_0x49661a)=>{_0x1c5c1e[_0x49661a]['real_qty_unit_val']=_0x3fa69f;}),_0x4fadaf[_0x181075(0x11d)]((_0x501154,_0x316550)=>{_0x1c5c1e[_0x316550]['prod_cat']=_0x501154;}),_0x30c0b9[_0x181075(0x11d)]((_0x312a49,_0x189fc1)=>{_0x1c5c1e[_0x189fc1]['conversion_data']=_0x312a49;});const _0x38b8d8=new invoice_sa();await _0x38b8d8[_0x181075(0x10c)]();const _0x3e56b3=_0x1182b1[_0x181075(0x163)],_0x50ca11=await staff[_0x181075(0x12f)]({'email':_0x3e56b3[_0x181075(0x138)]}),_0x4aa573=new sales_sa({'invoice':_0x38b8d8[_0x181075(0x142)][_0x181075(0x14f)]()[_0x181075(0x133)](0x8,'0'),'customer':_0x1ab345,'file':_0x3e6b48,'date':_0x2d3491,'sale_product':_0x1c5c1e,'note':_0x538d85,'sales_staff_id':_0x50ca11[_0x181075(0x115)]['valueOf'](),'paid':_0xf4c11f,'dsi':_0x1e4025,'cash':_0x22f49d,'amount':_0x5d5f5a,'bank':_0x36b661,'check_no':_0x1a5147,'due_date':_0x3005f3}),_0x49b962=await _0x4aa573[_0x181075(0x10c)]();console[_0x181075(0x12a)]('Invoice\x20created\x20with\x20incremented\x20start\x20value:',_0x38b8d8[_0x181075(0x142)][_0x181075(0x14f)]()[_0x181075(0x133)](0x8,'0'));const _0x26b483=mongoose['Types'][_0x181075(0x11f)];_0x1182b1[_0x181075(0x121)]('success',_0x181075(0x124)),_0x1a3eee[_0x181075(0x12c)](_0x181075(0x117)+_0x49b962[_0x181075(0x115)]);}catch(_0x36281a){console[_0x181075(0x12a)](_0x36281a);}}),router[a0_0x808601(0x150)]('/add_sales_notes',auth,async(_0x51ed7d,_0x26ec92)=>{const _0x1ffe11=a0_0x808601;try{const {date_data:_0x1d4dd8,note_data:_0x596997,status_data:_0x554d83}=_0x51ed7d[_0x1ffe11(0x156)],_0x47c785=new invoice_sa();await _0x47c785[_0x1ffe11(0x10c)]();const _0x3b9884=_0x51ed7d[_0x1ffe11(0x163)],_0x3c0ddc=await staff[_0x1ffe11(0x12f)]({'email':_0x3b9884[_0x1ffe11(0x138)]}),_0x2b2efc=new sales_sa({'invoice':_0x47c785['invoice_starts'][_0x1ffe11(0x14f)]()[_0x1ffe11(0x133)](0x8,'0'),'status_data':_0x554d83,'date':_0x1d4dd8,'note':_0x596997,'sales_staff_id':_0x3c0ddc[_0x1ffe11(0x115)][_0x1ffe11(0x166)]()}),_0x54d2d3=await _0x2b2efc['save']();console[_0x1ffe11(0x12a)](_0x1ffe11(0x151),_0x47c785['invoice_starts'][_0x1ffe11(0x14f)]()['padStart'](0x8,'0'));const _0x5f2f91=mongoose[_0x1ffe11(0x161)][_0x1ffe11(0x11f)];_0x51ed7d[_0x1ffe11(0x121)](_0x1ffe11(0x12e),'Sales\x20add\x20successfully'),_0x26ec92[_0x1ffe11(0x12c)]('/sales_sa/view_sales/'+_0x54d2d3[_0x1ffe11(0x115)]);}catch(_0x3678f8){console[_0x1ffe11(0x12a)](_0x3678f8);}}),router['post'](a0_0x808601(0x116),auth,async(_0x4549f4,_0x3f808a)=>{const _0x98625e=a0_0x808601;try{const _0x6c236c=_0x4549f4['user'],_0x3f07f5=await profile[_0x98625e(0x12f)]({'email':_0x6c236c[_0x98625e(0x138)]}),_0x59d71d=await staff[_0x98625e(0x13d)]([{'$match':{'email':_0x6c236c['email']}},{'$unwind':_0x98625e(0x146)},{'$match':{'product_list.isConfirm':_0x98625e(0x132)}}]);_0x3f808a[_0x98625e(0x12b)](_0x59d71d);}catch(_0x2424ca){}}),router['post']('/customer_data',auth,async(_0x243ddd,_0x4059c8)=>{try{const {customer_name:_0xabaa0e}=_0x243ddd['body'],_0x4f868b=await customer['findOne']({'name':_0xabaa0e});_0x4059c8['json'](_0x4f868b);}catch(_0x42e08c){}}),router[a0_0x808601(0x150)](a0_0x808601(0x125),auth,async(_0x260dd5,_0x45fa66)=>{const _0x3dbf7e=a0_0x808601;try{const _0x433655=_0x260dd5['user'],{id_data:_0x441219}=_0x260dd5['body'],_0x247428=await profile['findOne']({'email':_0x433655['email']}),_0x12373d=mongoose[_0x3dbf7e(0x161)][_0x3dbf7e(0x11f)];console[_0x3dbf7e(0x12a)](_0x12373d(_0x441219));var _0x200358=_0x12373d(_0x441219);const _0x3f416f=await staff[_0x3dbf7e(0x13d)]([{'$match':{'email':_0x433655[_0x3dbf7e(0x138)]}},{'$unwind':_0x3dbf7e(0x146)},{'$match':{'product_list.isConfirm':_0x3dbf7e(0x132),'product_list._id':_0x200358}}]);_0x45fa66[_0x3dbf7e(0x12b)](_0x3f416f);}catch(_0xf40aa4){}}),router[a0_0x808601(0x150)]('/volume_setup',auth,async(_0x12b421,_0x5509b3)=>{const _0x3b6d34=a0_0x808601;try{const _0x5d45f1=await discount_volume_db[_0x3b6d34(0x12f)]();_0x5509b3[_0x3b6d34(0x12b)](_0x5d45f1);}catch(_0x3bbdce){}}),router[a0_0x808601(0x150)](a0_0x808601(0x162),auth,async(_0x3213d5,_0x1f1861)=>{const _0x2f973b=a0_0x808601;try{const _0x138e67=await product[_0x2f973b(0x15b)]();_0x1f1861['json'](_0x138e67);}catch(_0x450f50){}}),router['post']('/product_data_id',auth,async(_0x34532f,_0x166640)=>{const _0x3ba84f=a0_0x808601;try{const {id_data:_0x53e7c1}=_0x34532f[_0x3ba84f(0x156)],_0x2630fb=await product['findById'](_0x53e7c1);_0x166640[_0x3ba84f(0x12b)](_0x2630fb);}catch(_0x56927c){}}),module[a0_0x808601(0x13f)]=router;