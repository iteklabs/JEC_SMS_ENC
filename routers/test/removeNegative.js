const a0_0x13483b=a0_0x3870;(function(_0x5a731e,_0x1579b){const _0x5badd4=a0_0x3870,_0x385f16=_0x5a731e();while(!![]){try{const _0x11dd85=parseInt(_0x5badd4(0xc8))/0x1+-parseInt(_0x5badd4(0x9c))/0x2+-parseInt(_0x5badd4(0xa5))/0x3*(parseInt(_0x5badd4(0xa1))/0x4)+parseInt(_0x5badd4(0xb3))/0x5*(parseInt(_0x5badd4(0x9e))/0x6)+parseInt(_0x5badd4(0xbe))/0x7+parseInt(_0x5badd4(0xc5))/0x8+-parseInt(_0x5badd4(0xcd))/0x9*(parseInt(_0x5badd4(0xce))/0xa);if(_0x11dd85===_0x1579b)break;else _0x385f16['push'](_0x385f16['shift']());}catch(_0x56c2d4){_0x385f16['push'](_0x385f16['shift']());}}}(a0_0x15d9,0xbb634));const express=require(a0_0x13483b(0xc1)),app=express(),router=express[a0_0x13483b(0xbd)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');router[a0_0x13483b(0xaa)](a0_0x13483b(0xbb),async(_0x29f71a,_0x48878d)=>{const _0x382366=a0_0x13483b;try{const _0x383557=await warehouse[_0x382366(0xb1)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x48878d['json']({'status':_0x383557[_0x382366(0xb5)]+_0x382366(0xcc)});}catch(_0x5833c9){console[_0x382366(0xa3)](_0x382366(0xa0),_0x5833c9),_0x48878d[_0x382366(0xb8)](0xc8)['json']({'message':_0x5833c9[_0x382366(0xcb)]});}}),router[a0_0x13483b(0xaa)]('/checking',async(_0x2a371b,_0x56bd51)=>{const _0x2ac619=a0_0x13483b;try{const _0x111da4=await warehouse[_0x2ac619(0xb4)]([{'$unwind':'$product_details'},{'$match':{'product_details.invoice':_0x2ac619(0xc7),'product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x2ac619(0xa7),'room':_0x2ac619(0xa6)},'products':{'$push':_0x2ac619(0x98)}}}]);_0x56bd51[_0x2ac619(0xb6)](_0x111da4);}catch(_0x4fba88){console['log'](_0x2ac619(0xa0),_0x4fba88),_0x56bd51[_0x2ac619(0xb8)](0xc8)[_0x2ac619(0xb6)]({'message':_0x4fba88[_0x2ac619(0xcb)]});}}),router[a0_0x13483b(0xaa)](a0_0x13483b(0xd2),async(_0x29ef41,_0x1b45c7)=>{const _0xae51bd=a0_0x13483b;_0x1b45c7['render'](_0xae51bd(0xd5),{'success':_0x29ef41['flash']('success'),'errors':_0x29ef41[_0xae51bd(0x9a)](_0xae51bd(0x9f))});}),router['get'](a0_0x13483b(0xc6),async(_0xb03ba3,_0x3113c9)=>{const _0x4b412c=a0_0x13483b;var _0x199cd1=await purchases['aggregate']([{'$lookup':{'from':_0x4b412c(0xaf),'let':{'invoice':_0x4b412c(0xd4)},'pipeline':[{'$unwind':_0x4b412c(0x98)},{'$match':{'$expr':{'$eq':['$$invoice',_0x4b412c(0xbf)]}}},{'$project':{'_id':_0x4b412c(0xd3),'product_name':_0x4b412c(0x95),'product_code':'$product_details.product_code','quantity_available':_0x4b412c(0xd0),'warehouse_name':'$name','warehouse_room':_0x4b412c(0xa6),'invoice':_0x4b412c(0xbf)}}],'as':'warehouse_data'}}]);_0x199cd1[_0x4b412c(0xc9)]={},await Promise[_0x4b412c(0xbc)](_0x199cd1[_0x4b412c(0xab)](async _0x5c2353=>{const _0x1f6bc1=_0x4b412c;_0x199cd1['data_sales'][_0x5c2353[_0x1f6bc1(0xb0)]]=[],await Promise[_0x1f6bc1(0xbc)](_0x5c2353[_0x1f6bc1(0xca)][_0x1f6bc1(0xab)](async _0x52b041=>{const _0x1fd1c0=_0x1f6bc1,_0x229058=await sales['aggregate']([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x52b041[_0x1fd1c0(0xa2)]['valueOf'](),'sale_product.invoice':_0x52b041['invoice']}},{'$project':{'_id':_0x1fd1c0(0x96),'product_name':_0x1fd1c0(0xcf),'product_code':_0x1fd1c0(0x9b),'quantity_available':_0x1fd1c0(0xad),'warehouse_name':_0x1fd1c0(0xd6),'warehouse_room':_0x1fd1c0(0xac),'product_invoice':_0x1fd1c0(0xa9),'invoice':'$invoice','id_transaction_from':_0x1fd1c0(0xd7)}}]);_0x229058['length']>0x0&&_0x199cd1['data_sales'][_0x5c2353[_0x1fd1c0(0xb0)]][_0x1fd1c0(0x99)](..._0x229058);}));})),_0x199cd1['data_sales']=_0x199cd1['data_sales'],_0x199cd1[_0x4b412c(0xa4)]={},await Promise['all'](_0x199cd1[_0x4b412c(0xab)](async _0x7dfa1a=>{const _0xa19d63=_0x4b412c;_0x199cd1[_0xa19d63(0xa4)][_0x7dfa1a['invoice']]=[],await Promise[_0xa19d63(0xbc)](_0x7dfa1a[_0xa19d63(0xca)][_0xa19d63(0xab)](async _0x2162c0=>{const _0xf1970b=_0xa19d63,_0x416127=await adjustment[_0xf1970b(0xb4)]([{'$unwind':_0xf1970b(0xae)},{'$match':{'product.id_transaction_from':_0x2162c0[_0xf1970b(0xa2)][_0xf1970b(0xc4)](),'product.invoice':_0x2162c0['invoice']}},{'$project':{'_id':_0xf1970b(0xb2),'product_name':_0xf1970b(0xd1),'product_code':'$product.product_code','quantity_available':'$product.new_adjust_qty','warehouse_name':_0xf1970b(0xd6),'warehouse_room':_0xf1970b(0xb9),'product_invoice':_0xf1970b(0xc2),'invoice':'$invoice','id_transaction_from':'$product.id_transaction_from'}}]);_0x416127[_0xf1970b(0xc0)]>0x0&&_0x199cd1[_0xf1970b(0xa4)][_0x7dfa1a[_0xf1970b(0xb0)]][_0xf1970b(0x99)](..._0x416127);}));})),_0x199cd1[_0x4b412c(0x97)]={},await Promise[_0x4b412c(0xbc)](_0x199cd1[_0x4b412c(0xab)](async _0x3e8ea6=>{const _0x81161a=_0x4b412c;_0x199cd1[_0x81161a(0x97)][_0x3e8ea6['invoice']]=[],await Promise[_0x81161a(0xbc)](_0x3e8ea6['warehouse_data'][_0x81161a(0xab)](async _0x3ce157=>{const _0x1d33fe=_0x81161a,_0x4b0cc9=await transfers[_0x1d33fe(0xb4)]([{'$unwind':_0x1d33fe(0xae)},{'$match':{'product.id_transaction_id':_0x3ce157[_0x1d33fe(0xa2)][_0x1d33fe(0xc4)](),'product.To_invoice':_0x3ce157['invoice']}},{'$project':{'_id':_0x1d33fe(0xb2),'product_name':_0x1d33fe(0xd1),'product_code':'$product.product_code','quantity_available':_0x1d33fe(0xba),'warehouse_name':_0x1d33fe(0xb7),'warehouse_room':_0x1d33fe(0xb9),'product_invoice':_0x1d33fe(0xa8),'invoice':_0x1d33fe(0xd4),'id_transaction_id':_0x1d33fe(0x9d)}}]);console['log'](_0x4b0cc9),_0x4b0cc9[_0x1d33fe(0xc0)]>0x0&&_0x199cd1['data_transfer'][_0x3e8ea6[_0x1d33fe(0xb0)]][_0x1d33fe(0x99)](..._0x4b0cc9);}));})),_0x3113c9[_0x4b412c(0xb6)]({'purchases_warehouse':_0x199cd1,'data_sales':_0x199cd1[_0x4b412c(0xc9)],'data_adjustment':_0x199cd1[_0x4b412c(0xa4)],'data_transfer':_0x199cd1[_0x4b412c(0x97)]});}),module[a0_0x13483b(0xc3)]=router;function a0_0x3870(_0x2cc9c6,_0x1512d6){const _0x15d9fb=a0_0x15d9();return a0_0x3870=function(_0x387034,_0x4bbea1){_0x387034=_0x387034-0x95;let _0x4768a2=_0x15d9fb[_0x387034];return _0x4768a2;},a0_0x3870(_0x2cc9c6,_0x1512d6);}function a0_0x15d9(){const _0x152914=['3820vAOuEP','$sale_product.product_name','$product_details.product_stock','$product.product_name','/warehouse_monitor','$product_details._id','$invoice','monitor','$warehouse_name','$sale_product.id_transaction_from','$product_details.product_name','$sale_product._id','data_transfer','$product_details','push','flash','$sale_product.product_code','278320knzwOz','$product.id_transaction_id','65994bsnByn','errors','table\x20page','1408vLaRkG','_id','log','data_adjustment','1290qOqIel','$room','$name','$product.to_room_name','$sale_product.invoice','get','map','$sale_product.room_name','$sale_product.quantity','$product','warehouses','invoice','updateMany','$product._id','115kJZfWB','aggregate','modifiedCount','json','$to_warehouse','status','$product.room_names','$product.to_quantity','/negative','all','Router','3774393qnHGrY','$product_details.invoice','length','express','$product.invoice','exports','valueOf','3361600mDQKnf','/join','INCF-52068316','1149832XyympJ','data_sales','warehouse_data','message','\x20documents\x20updated','30726RhteJe'];a0_0x15d9=function(){return _0x152914;};return a0_0x15d9();}