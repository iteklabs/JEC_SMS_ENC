function a0_0x44b7(){const _0x140c23=['$sale_product._id','$product.product_name','message','$product.id_transaction_from','301377yusfrb','/join','push','../../models/all_models','data_transfer','$room','$product.invoice','$product.to_room_name','data_sales','_id','$product.id_transaction_id','160394vtqSOj','$invoice','$product.room_names','13393368cYidxo','flash','render','70WGPCHH','/warehouse_monitor','map','$warehouse_name','status','$product_details.invoice','length','4mIWJzE','14eSaNSO','$product_details','updateMany','$$invoice','\x20documents\x20updated','exports','warehouse_data','$product_details.product_stock','errors','14800005047429','/checking','INCF-52068316','valueOf','table\x20page','data_adjustment','578743ZafEnO','$product_details._id','$sale_product','get','$product_details.product_code','/negative','all','json','log','9762EeMQMp','3AjbNbC','1822465FMNMAl','$name','$product._id','Router','aggregate','express','$product.product_code','700376mtdGqc','invoice','$sale_product.invoice','27cvFECo'];a0_0x44b7=function(){return _0x140c23;};return a0_0x44b7();}const a0_0xd4a7c4=a0_0x38d1;function a0_0x38d1(_0x261345,_0x2a857e){const _0x44b72d=a0_0x44b7();return a0_0x38d1=function(_0x38d139,_0x220dd0){_0x38d139=_0x38d139-0x82;let _0x46829b=_0x44b72d[_0x38d139];return _0x46829b;},a0_0x38d1(_0x261345,_0x2a857e);}(function(_0x139b74,_0x20427a){const _0x2f2194=a0_0x38d1,_0x5a8f31=_0x139b74();while(!![]){try{const _0x179a16=parseInt(_0x2f2194(0x83))/0x1*(parseInt(_0x2f2194(0x9e))/0x2)+-parseInt(_0x2f2194(0x93))/0x3+parseInt(_0x2f2194(0xab))/0x4*(-parseInt(_0x2f2194(0x84))/0x5)+-parseInt(_0x2f2194(0x82))/0x6*(parseInt(_0x2f2194(0xac))/0x7)+-parseInt(_0x2f2194(0x8b))/0x8*(parseInt(_0x2f2194(0x8e))/0x9)+parseInt(_0x2f2194(0xa4))/0xa*(-parseInt(_0x2f2194(0xbb))/0xb)+parseInt(_0x2f2194(0xa1))/0xc;if(_0x179a16===_0x20427a)break;else _0x5a8f31['push'](_0x5a8f31['shift']());}catch(_0x12c0bf){_0x5a8f31['push'](_0x5a8f31['shift']());}}}(a0_0x44b7,0x3ee1f));const express=require(a0_0xd4a7c4(0x89)),app=express(),router=express[a0_0xd4a7c4(0x87)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0xd4a7c4(0x96));router[a0_0xd4a7c4(0xbe)](a0_0xd4a7c4(0xc0),async(_0x3d3a79,_0x5d47b5)=>{const _0x1b20b8=a0_0xd4a7c4;try{const _0x2bea8f=await warehouse[_0x1b20b8(0xae)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x5d47b5[_0x1b20b8(0xc2)]({'status':_0x2bea8f['modifiedCount']+_0x1b20b8(0xb0)});}catch(_0x143d96){console[_0x1b20b8(0xc3)](_0x1b20b8(0xb9),_0x143d96),_0x5d47b5[_0x1b20b8(0xa8)](0xc8)[_0x1b20b8(0xc2)]({'message':_0x143d96[_0x1b20b8(0x91)]});}}),router[a0_0xd4a7c4(0xbe)](a0_0xd4a7c4(0xb6),async(_0x13e34d,_0x5a678c)=>{const _0x24e7f1=a0_0xd4a7c4;try{const _0x17b628=await warehouse['aggregate']([{'$unwind':_0x24e7f1(0xad)},{'$match':{'product_details.invoice':_0x24e7f1(0xb7),'product_details.primary_code':_0x24e7f1(0xb5)}},{'$group':{'_id':{'name':_0x24e7f1(0x85),'room':_0x24e7f1(0x98)},'products':{'$push':_0x24e7f1(0xad)}}}]);_0x5a678c['json'](_0x17b628);}catch(_0x40ea7f){console[_0x24e7f1(0xc3)](_0x24e7f1(0xb9),_0x40ea7f),_0x5a678c[_0x24e7f1(0xa8)](0xc8)['json']({'message':_0x40ea7f[_0x24e7f1(0x91)]});}}),router[a0_0xd4a7c4(0xbe)](a0_0xd4a7c4(0xa5),async(_0x3adcb5,_0x2d558d)=>{const _0xe34e0b=a0_0xd4a7c4;_0x2d558d[_0xe34e0b(0xa3)]('monitor',{'success':_0x3adcb5[_0xe34e0b(0xa2)]('success'),'errors':_0x3adcb5[_0xe34e0b(0xa2)](_0xe34e0b(0xb4))});}),router[a0_0xd4a7c4(0xbe)](a0_0xd4a7c4(0x94),async(_0x3ce4e0,_0x509850)=>{const _0x2c2c5c=a0_0xd4a7c4;var _0x214af0=await purchases[_0x2c2c5c(0x88)]([{'$lookup':{'from':'warehouses','let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x2c2c5c(0xad)},{'$match':{'$expr':{'$eq':[_0x2c2c5c(0xaf),_0x2c2c5c(0xa9)]}}},{'$project':{'_id':_0x2c2c5c(0xbc),'product_name':'$product_details.product_name','product_code':_0x2c2c5c(0xbf),'quantity_available':_0x2c2c5c(0xb3),'warehouse_name':'$name','warehouse_room':_0x2c2c5c(0x98),'invoice':_0x2c2c5c(0xa9)}}],'as':'warehouse_data'}}]);_0x214af0[_0x2c2c5c(0x9b)]={},await Promise[_0x2c2c5c(0xc1)](_0x214af0[_0x2c2c5c(0xa6)](async _0x52af96=>{const _0x5e76b7=_0x2c2c5c;_0x214af0[_0x5e76b7(0x9b)][_0x52af96[_0x5e76b7(0x8c)]]=[],await Promise[_0x5e76b7(0xc1)](_0x52af96['warehouse_data'][_0x5e76b7(0xa6)](async _0x4ae0fb=>{const _0x1a24b3=_0x5e76b7,_0x3438fc=await sales[_0x1a24b3(0x88)]([{'$unwind':_0x1a24b3(0xbd)},{'$match':{'sale_product.id_transaction_from':_0x4ae0fb[_0x1a24b3(0x9c)][_0x1a24b3(0xb8)](),'sale_product.invoice':_0x4ae0fb[_0x1a24b3(0x8c)]}},{'$project':{'_id':_0x1a24b3(0x8f),'product_name':'$sale_product.product_name','product_code':'$sale_product.product_code','quantity_available':'$sale_product.quantity','warehouse_name':_0x1a24b3(0xa7),'warehouse_room':'$sale_product.room_name','product_invoice':_0x1a24b3(0x8d),'invoice':_0x1a24b3(0x9f),'id_transaction_from':'$sale_product.id_transaction_from'}}]);_0x3438fc['length']>0x0&&_0x214af0['data_sales'][_0x52af96[_0x1a24b3(0x8c)]][_0x1a24b3(0x95)](..._0x3438fc);}));})),_0x214af0[_0x2c2c5c(0x9b)]=_0x214af0[_0x2c2c5c(0x9b)],_0x214af0[_0x2c2c5c(0xba)]={},await Promise['all'](_0x214af0[_0x2c2c5c(0xa6)](async _0x522d24=>{const _0x2a8365=_0x2c2c5c;_0x214af0[_0x2a8365(0xba)][_0x522d24[_0x2a8365(0x8c)]]=[],await Promise[_0x2a8365(0xc1)](_0x522d24[_0x2a8365(0xb2)][_0x2a8365(0xa6)](async _0x1fece8=>{const _0x428f65=_0x2a8365,_0x3da0a6=await adjustment[_0x428f65(0x88)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x1fece8[_0x428f65(0x9c)][_0x428f65(0xb8)](),'product.invoice':_0x1fece8[_0x428f65(0x8c)]}},{'$project':{'_id':_0x428f65(0x86),'product_name':_0x428f65(0x90),'product_code':_0x428f65(0x8a),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x428f65(0xa7),'warehouse_room':_0x428f65(0xa0),'product_invoice':_0x428f65(0x99),'invoice':_0x428f65(0x9f),'id_transaction_from':_0x428f65(0x92)}}]);_0x3da0a6[_0x428f65(0xaa)]>0x0&&_0x214af0[_0x428f65(0xba)][_0x522d24[_0x428f65(0x8c)]][_0x428f65(0x95)](..._0x3da0a6);}));})),_0x214af0[_0x2c2c5c(0x97)]={},await Promise[_0x2c2c5c(0xc1)](_0x214af0['map'](async _0x2f282a=>{const _0x58bbfa=_0x2c2c5c;_0x214af0['data_transfer'][_0x2f282a['invoice']]=[],await Promise[_0x58bbfa(0xc1)](_0x2f282a[_0x58bbfa(0xb2)][_0x58bbfa(0xa6)](async _0x5d82e9=>{const _0x4f2f06=_0x58bbfa,_0x23663f=await transfers[_0x4f2f06(0x88)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x5d82e9[_0x4f2f06(0x9c)][_0x4f2f06(0xb8)](),'product.To_invoice':_0x5d82e9[_0x4f2f06(0x8c)]}},{'$project':{'_id':'$product._id','product_name':_0x4f2f06(0x90),'product_code':_0x4f2f06(0x8a),'quantity_available':'$product.to_quantity','warehouse_name':'$to_warehouse','warehouse_room':_0x4f2f06(0xa0),'product_invoice':_0x4f2f06(0x9a),'invoice':_0x4f2f06(0x9f),'id_transaction_id':_0x4f2f06(0x9d)}}]);console['log'](_0x23663f),_0x23663f[_0x4f2f06(0xaa)]>0x0&&_0x214af0[_0x4f2f06(0x97)][_0x2f282a[_0x4f2f06(0x8c)]][_0x4f2f06(0x95)](..._0x23663f);}));})),_0x509850[_0x2c2c5c(0xc2)]({'purchases_warehouse':_0x214af0,'data_sales':_0x214af0[_0x2c2c5c(0x9b)],'data_adjustment':_0x214af0['data_adjustment'],'data_transfer':_0x214af0[_0x2c2c5c(0x97)]});}),module[a0_0xd4a7c4(0xb1)]=router;