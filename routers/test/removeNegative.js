const a0_0x171c5e=a0_0xf0a4;(function(_0x5f173c,_0x43fd6b){const _0x1499ec=a0_0xf0a4,_0x1fab10=_0x5f173c();while(!![]){try{const _0x4cf560=parseInt(_0x1499ec(0x1a6))/0x1*(parseInt(_0x1499ec(0x185))/0x2)+parseInt(_0x1499ec(0x18b))/0x3*(parseInt(_0x1499ec(0x193))/0x4)+-parseInt(_0x1499ec(0x1c4))/0x5*(parseInt(_0x1499ec(0x189))/0x6)+parseInt(_0x1499ec(0x1b3))/0x7*(parseInt(_0x1499ec(0x18e))/0x8)+-parseInt(_0x1499ec(0x1b1))/0x9*(parseInt(_0x1499ec(0x1a5))/0xa)+-parseInt(_0x1499ec(0x18c))/0xb*(-parseInt(_0x1499ec(0x1b2))/0xc)+-parseInt(_0x1499ec(0x198))/0xd;if(_0x4cf560===_0x43fd6b)break;else _0x1fab10['push'](_0x1fab10['shift']());}catch(_0x2c39f){_0x1fab10['push'](_0x1fab10['shift']());}}}(a0_0x4008,0x47eda));function a0_0x4008(){const _0x2e0edd=['478429cMqpAN','$product._id','data_sales','all','$sale_product.product_code','$product.to_room_name','$product.product_code','success','data_adjustment','$product.product_name','map','valueOf','table\x20page','errors','modifiedCount','$product.room_names','14800005047429','2865DwVsJx','$product.invoice','$warehouse_name','$product','invoice','render','$product.id_transaction_id','warehouses','108chXrFd','updateMany','json','$invoice','3006pgXnIO','message','1821lGIsky','542102TYXlAR','$product.id_transaction_from','8wkLUdW','$$invoice','$product_details.product_name','_id','../../models/all_models','3708ecTBhs','warehouse_data','$sale_product.product_name','aggregate','exports','3702712fCLkHz','status','express','flash','/checking','$room','data_transfer','$to_warehouse','get','$sale_product.room_name','$product_details.invoice','monitor','$product_details','10kfFTMP','3650JwOPHk','Router','$sale_product','$product_details.product_code','$sale_product.id_transaction_from','$sale_product.quantity','$product.new_adjust_qty','$product_details.product_stock','push','length','log','98127bHDPaM','12qPHCLO'];a0_0x4008=function(){return _0x2e0edd;};return a0_0x4008();}function a0_0xf0a4(_0x470d39,_0x4c5c1d){const _0x400814=a0_0x4008();return a0_0xf0a4=function(_0xf0a4cf,_0x55cf55){_0xf0a4cf=_0xf0a4cf-0x184;let _0x5dad1f=_0x400814[_0xf0a4cf];return _0x5dad1f;},a0_0xf0a4(_0x470d39,_0x4c5c1d);}const express=require(a0_0x171c5e(0x19a)),app=express(),router=express[a0_0x171c5e(0x1a7)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x171c5e(0x192));router[a0_0x171c5e(0x1a0)]('/negative',async(_0x1e51e7,_0x1af42b)=>{const _0x397886=a0_0x171c5e;try{const _0x303627=await warehouse[_0x397886(0x186)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x1af42b[_0x397886(0x187)]({'status':_0x303627[_0x397886(0x1c1)]+'\x20documents\x20updated'});}catch(_0x51a5e2){console[_0x397886(0x1b0)]('table\x20page',_0x51a5e2),_0x1af42b[_0x397886(0x199)](0xc8)[_0x397886(0x187)]({'message':_0x51a5e2['message']});}}),router[a0_0x171c5e(0x1a0)](a0_0x171c5e(0x19c),async(_0x519c89,_0xa70012)=>{const _0x22e2f4=a0_0x171c5e;try{const _0x544113=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':_0x22e2f4(0x1c3)}},{'$group':{'_id':{'name':'$name','room':_0x22e2f4(0x19d)},'products':{'$push':_0x22e2f4(0x1a4)}}}]);_0xa70012[_0x22e2f4(0x187)](_0x544113);}catch(_0x5cd871){console['log'](_0x22e2f4(0x1bf),_0x5cd871),_0xa70012[_0x22e2f4(0x199)](0xc8)[_0x22e2f4(0x187)]({'message':_0x5cd871[_0x22e2f4(0x18a)]});}}),router[a0_0x171c5e(0x1a0)]('/warehouse_monitor',async(_0x4c7ce5,_0x8b17ec)=>{const _0x5616ce=a0_0x171c5e;_0x8b17ec[_0x5616ce(0x1c9)](_0x5616ce(0x1a3),{'success':_0x4c7ce5['flash'](_0x5616ce(0x1ba)),'errors':_0x4c7ce5[_0x5616ce(0x19b)](_0x5616ce(0x1c0))});}),router[a0_0x171c5e(0x1a0)]('/join',async(_0x3c86ac,_0x509637)=>{const _0x26dd2a=a0_0x171c5e;var _0x5ab8ae=await purchases['aggregate']([{'$lookup':{'from':_0x26dd2a(0x184),'let':{'invoice':_0x26dd2a(0x188)},'pipeline':[{'$unwind':_0x26dd2a(0x1a4)},{'$match':{'$expr':{'$eq':[_0x26dd2a(0x18f),_0x26dd2a(0x1a2)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x26dd2a(0x190),'product_code':_0x26dd2a(0x1a9),'quantity_available':_0x26dd2a(0x1ad),'warehouse_name':'$name','warehouse_room':_0x26dd2a(0x19d),'invoice':_0x26dd2a(0x1a2)}}],'as':_0x26dd2a(0x194)}}]);_0x5ab8ae['data_sales']={},await Promise['all'](_0x5ab8ae[_0x26dd2a(0x1bd)](async _0x4039d4=>{const _0x42323e=_0x26dd2a;_0x5ab8ae[_0x42323e(0x1b5)][_0x4039d4[_0x42323e(0x1c8)]]=[],await Promise[_0x42323e(0x1b6)](_0x4039d4['warehouse_data']['map'](async _0xfecee5=>{const _0x59df08=_0x42323e,_0x59caa1=await sales['aggregate']([{'$unwind':_0x59df08(0x1a8)},{'$match':{'sale_product.id_transaction_from':_0xfecee5[_0x59df08(0x191)][_0x59df08(0x1be)](),'sale_product.invoice':_0xfecee5[_0x59df08(0x1c8)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x59df08(0x195),'product_code':_0x59df08(0x1b7),'quantity_available':_0x59df08(0x1ab),'warehouse_name':_0x59df08(0x1c6),'warehouse_room':_0x59df08(0x1a1),'product_invoice':'$sale_product.invoice','invoice':_0x59df08(0x188),'id_transaction_from':_0x59df08(0x1aa)}}]);_0x59caa1[_0x59df08(0x1af)]>0x0&&_0x5ab8ae['data_sales'][_0x4039d4['invoice']][_0x59df08(0x1ae)](..._0x59caa1);}));})),_0x5ab8ae[_0x26dd2a(0x1b5)]=_0x5ab8ae[_0x26dd2a(0x1b5)],_0x5ab8ae[_0x26dd2a(0x1bb)]={},await Promise[_0x26dd2a(0x1b6)](_0x5ab8ae[_0x26dd2a(0x1bd)](async _0x847991=>{const _0x3c5aac=_0x26dd2a;_0x5ab8ae['data_adjustment'][_0x847991[_0x3c5aac(0x1c8)]]=[],await Promise['all'](_0x847991[_0x3c5aac(0x194)][_0x3c5aac(0x1bd)](async _0x1d33d1=>{const _0x11b8d6=_0x3c5aac,_0xf93230=await adjustment[_0x11b8d6(0x196)]([{'$unwind':_0x11b8d6(0x1c7)},{'$match':{'product.id_transaction_from':_0x1d33d1[_0x11b8d6(0x191)][_0x11b8d6(0x1be)](),'product.invoice':_0x1d33d1[_0x11b8d6(0x1c8)]}},{'$project':{'_id':'$product._id','product_name':_0x11b8d6(0x1bc),'product_code':_0x11b8d6(0x1b9),'quantity_available':_0x11b8d6(0x1ac),'warehouse_name':'$warehouse_name','warehouse_room':_0x11b8d6(0x1c2),'product_invoice':_0x11b8d6(0x1c5),'invoice':_0x11b8d6(0x188),'id_transaction_from':_0x11b8d6(0x18d)}}]);_0xf93230[_0x11b8d6(0x1af)]>0x0&&_0x5ab8ae[_0x11b8d6(0x1bb)][_0x847991[_0x11b8d6(0x1c8)]][_0x11b8d6(0x1ae)](..._0xf93230);}));})),_0x5ab8ae[_0x26dd2a(0x19e)]={},await Promise[_0x26dd2a(0x1b6)](_0x5ab8ae[_0x26dd2a(0x1bd)](async _0x2d4f61=>{const _0x247d0c=_0x26dd2a;_0x5ab8ae[_0x247d0c(0x19e)][_0x2d4f61[_0x247d0c(0x1c8)]]=[],await Promise[_0x247d0c(0x1b6)](_0x2d4f61[_0x247d0c(0x194)][_0x247d0c(0x1bd)](async _0xa9ee4b=>{const _0x2f5829=_0x247d0c,_0x27c2ce=await transfers[_0x2f5829(0x196)]([{'$unwind':_0x2f5829(0x1c7)},{'$match':{'product.id_transaction_id':_0xa9ee4b['_id'][_0x2f5829(0x1be)](),'product.To_invoice':_0xa9ee4b['invoice']}},{'$project':{'_id':_0x2f5829(0x1b4),'product_name':_0x2f5829(0x1bc),'product_code':'$product.product_code','quantity_available':'$product.to_quantity','warehouse_name':_0x2f5829(0x19f),'warehouse_room':_0x2f5829(0x1c2),'product_invoice':_0x2f5829(0x1b8),'invoice':_0x2f5829(0x188),'id_transaction_id':_0x2f5829(0x1ca)}}]);console[_0x2f5829(0x1b0)](_0x27c2ce),_0x27c2ce[_0x2f5829(0x1af)]>0x0&&_0x5ab8ae[_0x2f5829(0x19e)][_0x2d4f61[_0x2f5829(0x1c8)]][_0x2f5829(0x1ae)](..._0x27c2ce);}));})),_0x509637[_0x26dd2a(0x187)]({'purchases_warehouse':_0x5ab8ae,'data_sales':_0x5ab8ae[_0x26dd2a(0x1b5)],'data_adjustment':_0x5ab8ae[_0x26dd2a(0x1bb)],'data_transfer':_0x5ab8ae[_0x26dd2a(0x19e)]});}),module[a0_0x171c5e(0x197)]=router;