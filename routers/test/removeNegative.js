function a0_0x21e6(){const _0x461247=['700wlzZHl','warehouses','$product.product_code','48JbdBtD','$product._id','../../models/all_models','21355SjpHUS','$invoice','/checking','$product_details.invoice','2211015nGtGhp','$sale_product.product_name','/join','$to_warehouse','$product','warehouse_data','$sale_product.product_code','length','\x20documents\x20updated','data_adjustment','$product.invoice','$product_details','/negative','exports','data_sales','log','$name','330256asXSQQ','4CMzbPg','Router','data_transfer','push','json','render','errors','invoice','$product.id_transaction_id','$room','all','12249ojAyXN','status','$sale_product.quantity','1376dZCBMS','/warehouse_monitor','get','table\x20page','modifiedCount','303884xVIfnq','$sale_product.id_transaction_from','_id','$product.id_transaction_from','$$invoice','map','$product.to_quantity','valueOf','monitor','$product.product_name','$product_details.product_code','3509420gVoomm','success','INCF-52068316','$product_details._id','273449biHXRz','$sale_product','message','aggregate'];a0_0x21e6=function(){return _0x461247;};return a0_0x21e6();}const a0_0x287e42=a0_0x195b;(function(_0x5ddeaa,_0x3eb804){const _0x1ce73e=a0_0x195b,_0x53e777=_0x5ddeaa();while(!![]){try{const _0x65a99c=parseInt(_0x1ce73e(0xfe))/0x1*(parseInt(_0x1ce73e(0x114))/0x2)+parseInt(_0x1ce73e(0x102))/0x3+parseInt(_0x1ce73e(0x113))/0x4+parseInt(_0x1ce73e(0x132))/0x5+parseInt(_0x1ce73e(0xfb))/0x6*(parseInt(_0x1ce73e(0x127))/0x7)+parseInt(_0x1ce73e(0x122))/0x8*(parseInt(_0x1ce73e(0x11f))/0x9)+-parseInt(_0x1ce73e(0xf8))/0xa*(parseInt(_0x1ce73e(0x136))/0xb);if(_0x65a99c===_0x3eb804)break;else _0x53e777['push'](_0x53e777['shift']());}catch(_0x4f8eda){_0x53e777['push'](_0x53e777['shift']());}}}(a0_0x21e6,0x62fad));function a0_0x195b(_0x2d7185,_0x240115){const _0x21e6c4=a0_0x21e6();return a0_0x195b=function(_0x195b35,_0x1987af){_0x195b35=_0x195b35-0xf7;let _0x19eaa5=_0x21e6c4[_0x195b35];return _0x19eaa5;},a0_0x195b(_0x2d7185,_0x240115);}const express=require('express'),app=express(),router=express[a0_0x287e42(0x115)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x287e42(0xfd));router[a0_0x287e42(0x124)](a0_0x287e42(0x10e),async(_0x55286b,_0x313ade)=>{const _0x3fd5d7=a0_0x287e42;try{const _0x3bc02b=await warehouse['updateMany']({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x313ade[_0x3fd5d7(0x118)]({'status':_0x3bc02b[_0x3fd5d7(0x126)]+_0x3fd5d7(0x10a)});}catch(_0x5126bb){console['log'](_0x3fd5d7(0x125),_0x5126bb),_0x313ade['status'](0xc8)[_0x3fd5d7(0x118)]({'message':_0x5126bb[_0x3fd5d7(0x138)]});}}),router[a0_0x287e42(0x124)](a0_0x287e42(0x100),async(_0x413a91,_0x5010e6)=>{const _0x336796=a0_0x287e42;try{const _0x2bf04b=await warehouse[_0x336796(0xf7)]([{'$unwind':'$product_details'},{'$match':{'product_details.invoice':_0x336796(0x134),'product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x336796(0x112),'room':_0x336796(0x11d)},'products':{'$push':_0x336796(0x10d)}}}]);_0x5010e6[_0x336796(0x118)](_0x2bf04b);}catch(_0x305b38){console[_0x336796(0x111)]('table\x20page',_0x305b38),_0x5010e6[_0x336796(0x120)](0xc8)[_0x336796(0x118)]({'message':_0x305b38[_0x336796(0x138)]});}}),router[a0_0x287e42(0x124)](a0_0x287e42(0x123),async(_0x59e277,_0xe38398)=>{const _0x3b6058=a0_0x287e42;_0xe38398[_0x3b6058(0x119)](_0x3b6058(0x12f),{'success':_0x59e277['flash'](_0x3b6058(0x133)),'errors':_0x59e277['flash'](_0x3b6058(0x11a))});}),router[a0_0x287e42(0x124)](a0_0x287e42(0x104),async(_0x5a7c7b,_0xe1e06)=>{const _0x110d58=a0_0x287e42;var _0x4fd94a=await purchases[_0x110d58(0xf7)]([{'$lookup':{'from':_0x110d58(0xf9),'let':{'invoice':_0x110d58(0xff)},'pipeline':[{'$unwind':_0x110d58(0x10d)},{'$match':{'$expr':{'$eq':[_0x110d58(0x12b),'$product_details.invoice']}}},{'$project':{'_id':_0x110d58(0x135),'product_name':'$product_details.product_name','product_code':_0x110d58(0x131),'quantity_available':'$product_details.product_stock','warehouse_name':_0x110d58(0x112),'warehouse_room':_0x110d58(0x11d),'invoice':_0x110d58(0x101)}}],'as':_0x110d58(0x107)}}]);_0x4fd94a['data_sales']={},await Promise[_0x110d58(0x11e)](_0x4fd94a[_0x110d58(0x12c)](async _0xe3ea4b=>{const _0x209fdc=_0x110d58;_0x4fd94a[_0x209fdc(0x110)][_0xe3ea4b[_0x209fdc(0x11b)]]=[],await Promise['all'](_0xe3ea4b[_0x209fdc(0x107)][_0x209fdc(0x12c)](async _0x146df5=>{const _0xfbacc=_0x209fdc,_0x4905ae=await sales[_0xfbacc(0xf7)]([{'$unwind':_0xfbacc(0x137)},{'$match':{'sale_product.id_transaction_from':_0x146df5[_0xfbacc(0x129)][_0xfbacc(0x12e)](),'sale_product.invoice':_0x146df5[_0xfbacc(0x11b)]}},{'$project':{'_id':'$sale_product._id','product_name':_0xfbacc(0x103),'product_code':_0xfbacc(0x108),'quantity_available':_0xfbacc(0x121),'warehouse_name':'$warehouse_name','warehouse_room':'$sale_product.room_name','product_invoice':'$sale_product.invoice','invoice':_0xfbacc(0xff),'id_transaction_from':_0xfbacc(0x128)}}]);_0x4905ae[_0xfbacc(0x109)]>0x0&&_0x4fd94a['data_sales'][_0xe3ea4b['invoice']][_0xfbacc(0x117)](..._0x4905ae);}));})),_0x4fd94a['data_sales']=_0x4fd94a[_0x110d58(0x110)],_0x4fd94a[_0x110d58(0x10b)]={},await Promise[_0x110d58(0x11e)](_0x4fd94a[_0x110d58(0x12c)](async _0x424a4a=>{const _0x56f9be=_0x110d58;_0x4fd94a[_0x56f9be(0x10b)][_0x424a4a[_0x56f9be(0x11b)]]=[],await Promise[_0x56f9be(0x11e)](_0x424a4a[_0x56f9be(0x107)][_0x56f9be(0x12c)](async _0x48a163=>{const _0x4af020=_0x56f9be,_0x4c1679=await adjustment['aggregate']([{'$unwind':_0x4af020(0x106)},{'$match':{'product.id_transaction_from':_0x48a163['_id'][_0x4af020(0x12e)](),'product.invoice':_0x48a163[_0x4af020(0x11b)]}},{'$project':{'_id':_0x4af020(0xfc),'product_name':_0x4af020(0x130),'product_code':_0x4af020(0xfa),'quantity_available':'$product.new_adjust_qty','warehouse_name':'$warehouse_name','warehouse_room':'$product.room_names','product_invoice':_0x4af020(0x10c),'invoice':_0x4af020(0xff),'id_transaction_from':_0x4af020(0x12a)}}]);_0x4c1679[_0x4af020(0x109)]>0x0&&_0x4fd94a['data_adjustment'][_0x424a4a[_0x4af020(0x11b)]]['push'](..._0x4c1679);}));})),_0x4fd94a[_0x110d58(0x116)]={},await Promise[_0x110d58(0x11e)](_0x4fd94a[_0x110d58(0x12c)](async _0x3e976f=>{const _0x311f13=_0x110d58;_0x4fd94a[_0x311f13(0x116)][_0x3e976f[_0x311f13(0x11b)]]=[],await Promise[_0x311f13(0x11e)](_0x3e976f['warehouse_data'][_0x311f13(0x12c)](async _0x3c27b0=>{const _0x48e4c9=_0x311f13,_0x5a908b=await transfers[_0x48e4c9(0xf7)]([{'$unwind':_0x48e4c9(0x106)},{'$match':{'product.id_transaction_id':_0x3c27b0[_0x48e4c9(0x129)][_0x48e4c9(0x12e)](),'product.To_invoice':_0x3c27b0[_0x48e4c9(0x11b)]}},{'$project':{'_id':_0x48e4c9(0xfc),'product_name':_0x48e4c9(0x130),'product_code':_0x48e4c9(0xfa),'quantity_available':_0x48e4c9(0x12d),'warehouse_name':_0x48e4c9(0x105),'warehouse_room':'$product.room_names','product_invoice':'$product.to_room_name','invoice':'$invoice','id_transaction_id':_0x48e4c9(0x11c)}}]);console[_0x48e4c9(0x111)](_0x5a908b),_0x5a908b['length']>0x0&&_0x4fd94a[_0x48e4c9(0x116)][_0x3e976f[_0x48e4c9(0x11b)]]['push'](..._0x5a908b);}));})),_0xe1e06[_0x110d58(0x118)]({'purchases_warehouse':_0x4fd94a,'data_sales':_0x4fd94a[_0x110d58(0x110)],'data_adjustment':_0x4fd94a[_0x110d58(0x10b)],'data_transfer':_0x4fd94a['data_transfer']});}),module[a0_0x287e42(0x10f)]=router;