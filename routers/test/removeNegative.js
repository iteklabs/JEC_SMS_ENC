function a0_0x1733(_0x1b09fa,_0xe0172d){const _0x3a24d2=a0_0x3a24();return a0_0x1733=function(_0x1733cd,_0x3acd87){_0x1733cd=_0x1733cd-0x74;let _0x374aac=_0x3a24d2[_0x1733cd];return _0x374aac;},a0_0x1733(_0x1b09fa,_0xe0172d);}const a0_0x4550a9=a0_0x1733;function a0_0x3a24(){const _0x132340=['372425NiciIT','$product','$product.to_room_name','$invoice','express','4775610wSrXPM','push','warehouses','$name','exports','data_sales','monitor','get','$product_details.product_stock','60YFsFzC','$product_details','$product.new_adjust_qty','/negative','$product.to_quantity','invoice','errors','$sale_product.quantity','$product.invoice','1644993cGxAPc','$product._id','$sale_product.id_transaction_from','195dszrVt','4VRboEi','$product_details._id','$warehouse_name','updateMany','$sale_product','Router','12052292rJkiFf','$product_details.product_name','log','success','modifiedCount','map','length','2030151YFqANL','$product.room_names','14800005047429','aggregate','_id','$room','message','$product.product_name','$product.id_transaction_from','valueOf','2724711wYkldh','data_transfer','$product_details.invoice','$product.product_code','status','130748iEWMBP','warehouse_data','all','data_adjustment','json','$product_details.product_code','table\x20page','8rmubRh','$sale_product._id','render','\x20documents\x20updated','$sale_product.room_name'];a0_0x3a24=function(){return _0x132340;};return a0_0x3a24();}(function(_0x50496b,_0x36722d){const _0x2fa688=a0_0x1733,_0x1f0d67=_0x50496b();while(!![]){try{const _0x2c7808=parseInt(_0x2fa688(0x77))/0x1*(-parseInt(_0x2fa688(0x92))/0x2)+parseInt(_0x2fa688(0x9f))/0x3+parseInt(_0x2fa688(0xae))/0x4*(-parseInt(_0x2fa688(0x91))/0x5)+-parseInt(_0x2fa688(0x7c))/0x6+parseInt(_0x2fa688(0x98))/0x7+-parseInt(_0x2fa688(0xb5))/0x8*(parseInt(_0x2fa688(0x8e))/0x9)+parseInt(_0x2fa688(0x85))/0xa*(parseInt(_0x2fa688(0xa9))/0xb);if(_0x2c7808===_0x36722d)break;else _0x1f0d67['push'](_0x1f0d67['shift']());}catch(_0x27076b){_0x1f0d67['push'](_0x1f0d67['shift']());}}}(a0_0x3a24,0xd8634));const express=require(a0_0x4550a9(0x7b)),app=express(),router=express[a0_0x4550a9(0x97)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');router['get'](a0_0x4550a9(0x88),async(_0x117d4b,_0x1f3d5d)=>{const _0x29aa52=a0_0x4550a9;try{const _0x2b9e50=await warehouse[_0x29aa52(0x95)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x1f3d5d[_0x29aa52(0xb2)]({'status':_0x2b9e50[_0x29aa52(0x9c)]+_0x29aa52(0x75)});}catch(_0x1e6ba0){console[_0x29aa52(0x9a)](_0x29aa52(0xb4),_0x1e6ba0),_0x1f3d5d[_0x29aa52(0xad)](0xc8)[_0x29aa52(0xb2)]({'message':_0x1e6ba0[_0x29aa52(0xa5)]});}}),router[a0_0x4550a9(0x83)]('/checking',async(_0x485a15,_0x5cbc5a)=>{const _0x20c81b=a0_0x4550a9;try{const _0x3f5faf=await warehouse[_0x20c81b(0xa2)]([{'$unwind':_0x20c81b(0x86)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':_0x20c81b(0xa1)}},{'$group':{'_id':{'name':_0x20c81b(0x7f),'room':_0x20c81b(0xa4)},'products':{'$push':'$product_details'}}}]);_0x5cbc5a[_0x20c81b(0xb2)](_0x3f5faf);}catch(_0x5aca2f){console[_0x20c81b(0x9a)](_0x20c81b(0xb4),_0x5aca2f),_0x5cbc5a[_0x20c81b(0xad)](0xc8)[_0x20c81b(0xb2)]({'message':_0x5aca2f[_0x20c81b(0xa5)]});}}),router[a0_0x4550a9(0x83)]('/warehouse_monitor',async(_0x4072d1,_0x480126)=>{const _0x34278e=a0_0x4550a9;_0x480126[_0x34278e(0x74)](_0x34278e(0x82),{'success':_0x4072d1['flash'](_0x34278e(0x9b)),'errors':_0x4072d1['flash'](_0x34278e(0x8b))});}),router[a0_0x4550a9(0x83)]('/join',async(_0x960f65,_0x22f010)=>{const _0x4a12ad=a0_0x4550a9;var _0x7c0d9f=await purchases[_0x4a12ad(0xa2)]([{'$lookup':{'from':_0x4a12ad(0x7e),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x4a12ad(0x86)},{'$match':{'$expr':{'$eq':['$$invoice',_0x4a12ad(0xab)]}}},{'$project':{'_id':_0x4a12ad(0x93),'product_name':_0x4a12ad(0x99),'product_code':_0x4a12ad(0xb3),'quantity_available':_0x4a12ad(0x84),'warehouse_name':_0x4a12ad(0x7f),'warehouse_room':_0x4a12ad(0xa4),'invoice':_0x4a12ad(0xab)}}],'as':'warehouse_data'}}]);_0x7c0d9f['data_sales']={},await Promise[_0x4a12ad(0xb0)](_0x7c0d9f[_0x4a12ad(0x9d)](async _0xa40dea=>{const _0x59814a=_0x4a12ad;_0x7c0d9f[_0x59814a(0x81)][_0xa40dea[_0x59814a(0x8a)]]=[],await Promise['all'](_0xa40dea[_0x59814a(0xaf)][_0x59814a(0x9d)](async _0x3efc57=>{const _0xc52751=_0x59814a,_0x36cac5=await sales[_0xc52751(0xa2)]([{'$unwind':_0xc52751(0x96)},{'$match':{'sale_product.id_transaction_from':_0x3efc57['_id'][_0xc52751(0xa8)](),'sale_product.invoice':_0x3efc57[_0xc52751(0x8a)]}},{'$project':{'_id':_0xc52751(0xb6),'product_name':'$sale_product.product_name','product_code':'$sale_product.product_code','quantity_available':_0xc52751(0x8c),'warehouse_name':'$warehouse_name','warehouse_room':_0xc52751(0x76),'product_invoice':'$sale_product.invoice','invoice':_0xc52751(0x7a),'id_transaction_from':_0xc52751(0x90)}}]);_0x36cac5[_0xc52751(0x9e)]>0x0&&_0x7c0d9f[_0xc52751(0x81)][_0xa40dea[_0xc52751(0x8a)]][_0xc52751(0x7d)](..._0x36cac5);}));})),_0x7c0d9f[_0x4a12ad(0x81)]=_0x7c0d9f[_0x4a12ad(0x81)],_0x7c0d9f[_0x4a12ad(0xb1)]={},await Promise[_0x4a12ad(0xb0)](_0x7c0d9f[_0x4a12ad(0x9d)](async _0x4ea0ef=>{const _0x2a58be=_0x4a12ad;_0x7c0d9f['data_adjustment'][_0x4ea0ef[_0x2a58be(0x8a)]]=[],await Promise['all'](_0x4ea0ef['warehouse_data'][_0x2a58be(0x9d)](async _0x5ddfde=>{const _0x8fcbd0=_0x2a58be,_0x3e4170=await adjustment[_0x8fcbd0(0xa2)]([{'$unwind':_0x8fcbd0(0x78)},{'$match':{'product.id_transaction_from':_0x5ddfde['_id'][_0x8fcbd0(0xa8)](),'product.invoice':_0x5ddfde[_0x8fcbd0(0x8a)]}},{'$project':{'_id':_0x8fcbd0(0x8f),'product_name':'$product.product_name','product_code':_0x8fcbd0(0xac),'quantity_available':_0x8fcbd0(0x87),'warehouse_name':_0x8fcbd0(0x94),'warehouse_room':_0x8fcbd0(0xa0),'product_invoice':_0x8fcbd0(0x8d),'invoice':'$invoice','id_transaction_from':_0x8fcbd0(0xa7)}}]);_0x3e4170[_0x8fcbd0(0x9e)]>0x0&&_0x7c0d9f[_0x8fcbd0(0xb1)][_0x4ea0ef[_0x8fcbd0(0x8a)]]['push'](..._0x3e4170);}));})),_0x7c0d9f[_0x4a12ad(0xaa)]={},await Promise[_0x4a12ad(0xb0)](_0x7c0d9f['map'](async _0x2bb0b8=>{const _0x31f20e=_0x4a12ad;_0x7c0d9f[_0x31f20e(0xaa)][_0x2bb0b8[_0x31f20e(0x8a)]]=[],await Promise[_0x31f20e(0xb0)](_0x2bb0b8[_0x31f20e(0xaf)][_0x31f20e(0x9d)](async _0x461e45=>{const _0x412bab=_0x31f20e,_0x1005d7=await transfers[_0x412bab(0xa2)]([{'$unwind':_0x412bab(0x78)},{'$match':{'product.id_transaction_id':_0x461e45[_0x412bab(0xa3)][_0x412bab(0xa8)](),'product.To_invoice':_0x461e45[_0x412bab(0x8a)]}},{'$project':{'_id':_0x412bab(0x8f),'product_name':_0x412bab(0xa6),'product_code':_0x412bab(0xac),'quantity_available':_0x412bab(0x89),'warehouse_name':'$to_warehouse','warehouse_room':_0x412bab(0xa0),'product_invoice':_0x412bab(0x79),'invoice':_0x412bab(0x7a),'id_transaction_id':'$product.id_transaction_id'}}]);console[_0x412bab(0x9a)](_0x1005d7),_0x1005d7['length']>0x0&&_0x7c0d9f['data_transfer'][_0x2bb0b8[_0x412bab(0x8a)]][_0x412bab(0x7d)](..._0x1005d7);}));})),_0x22f010['json']({'purchases_warehouse':_0x7c0d9f,'data_sales':_0x7c0d9f['data_sales'],'data_adjustment':_0x7c0d9f['data_adjustment'],'data_transfer':_0x7c0d9f['data_transfer']});}),module[a0_0x4550a9(0x80)]=router;