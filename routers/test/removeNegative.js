const a0_0x488863=a0_0x50ad;(function(_0x4a2c85,_0xf4417f){const _0x5aa1ca=a0_0x50ad,_0x355ec6=_0x4a2c85();while(!![]){try{const _0xe44978=parseInt(_0x5aa1ca(0x19d))/0x1*(parseInt(_0x5aa1ca(0x1b4))/0x2)+-parseInt(_0x5aa1ca(0x1b9))/0x3+-parseInt(_0x5aa1ca(0x1ac))/0x4*(parseInt(_0x5aa1ca(0x1bb))/0x5)+-parseInt(_0x5aa1ca(0x1cc))/0x6+-parseInt(_0x5aa1ca(0x1c3))/0x7+-parseInt(_0x5aa1ca(0x1d3))/0x8+-parseInt(_0x5aa1ca(0x1a0))/0x9*(-parseInt(_0x5aa1ca(0x1a3))/0xa);if(_0xe44978===_0xf4417f)break;else _0x355ec6['push'](_0x355ec6['shift']());}catch(_0x3cbc19){_0x355ec6['push'](_0x355ec6['shift']());}}}(a0_0x293b,0xc7618));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x488863(0x1ca));router[a0_0x488863(0x1b2)]('/negative',async(_0x4db5b3,_0x34f059)=>{const _0x22c11b=a0_0x488863;try{const _0x434688=await warehouse[_0x22c11b(0x1b8)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x34f059['json']({'status':_0x434688['modifiedCount']+_0x22c11b(0x1aa)});}catch(_0x8b0805){console[_0x22c11b(0x1d0)](_0x22c11b(0x1a9),_0x8b0805),_0x34f059[_0x22c11b(0x1c2)](0xc8)[_0x22c11b(0x19f)]({'message':_0x8b0805[_0x22c11b(0x1ad)]});}}),router[a0_0x488863(0x1b2)](a0_0x488863(0x1be),async(_0x220e69,_0x5f91a1)=>{const _0x50d4bf=a0_0x488863;try{const _0x5ab9ca=await warehouse[_0x50d4bf(0x1ba)]([{'$unwind':_0x50d4bf(0x1cf)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':_0x50d4bf(0x1a8)}},{'$group':{'_id':{'name':_0x50d4bf(0x1ab),'room':_0x50d4bf(0x1ce)},'products':{'$push':'$product_details'}}}]);_0x5f91a1[_0x50d4bf(0x19f)](_0x5ab9ca);}catch(_0x41dea6){console['log']('table\x20page',_0x41dea6),_0x5f91a1[_0x50d4bf(0x1c2)](0xc8)['json']({'message':_0x41dea6[_0x50d4bf(0x1ad)]});}}),router[a0_0x488863(0x1b2)](a0_0x488863(0x1ae),async(_0x51d9db,_0x3a8084)=>{const _0x1245e1=a0_0x488863;_0x3a8084['render'](_0x1245e1(0x1af),{'success':_0x51d9db['flash'](_0x1245e1(0x1cb)),'errors':_0x51d9db['flash'](_0x1245e1(0x1d4))});}),router[a0_0x488863(0x1b2)](a0_0x488863(0x1b0),async(_0x47c3af,_0xb6877d)=>{const _0x4357c3=a0_0x488863;var _0x3e5a82=await purchases[_0x4357c3(0x1ba)]([{'$lookup':{'from':_0x4357c3(0x19c),'let':{'invoice':_0x4357c3(0x1d8)},'pipeline':[{'$unwind':_0x4357c3(0x1cf)},{'$match':{'$expr':{'$eq':[_0x4357c3(0x1c1),'$product_details.invoice']}}},{'$project':{'_id':_0x4357c3(0x1d5),'product_name':'$product_details.product_name','product_code':_0x4357c3(0x1c6),'quantity_available':'$product_details.product_stock','warehouse_name':'$name','warehouse_room':_0x4357c3(0x1ce),'invoice':_0x4357c3(0x1a6)}}],'as':_0x4357c3(0x1d2)}}]);_0x3e5a82[_0x4357c3(0x1a1)]={},await Promise['all'](_0x3e5a82[_0x4357c3(0x1c8)](async _0x172568=>{const _0x1be754=_0x4357c3;_0x3e5a82[_0x1be754(0x1a1)][_0x172568[_0x1be754(0x1cd)]]=[],await Promise['all'](_0x172568[_0x1be754(0x1d2)][_0x1be754(0x1c8)](async _0x432abd=>{const _0x59d002=_0x1be754,_0x108207=await sales['aggregate']([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x432abd['_id'][_0x59d002(0x19e)](),'sale_product.invoice':_0x432abd['invoice']}},{'$project':{'_id':_0x59d002(0x1a7),'product_name':'$sale_product.product_name','product_code':_0x59d002(0x1a4),'quantity_available':'$sale_product.quantity','warehouse_name':_0x59d002(0x1a5),'warehouse_room':_0x59d002(0x1bd),'product_invoice':_0x59d002(0x1a2),'invoice':_0x59d002(0x1d8),'id_transaction_from':_0x59d002(0x1c7)}}]);_0x108207[_0x59d002(0x1c9)]>0x0&&_0x3e5a82['data_sales'][_0x172568['invoice']][_0x59d002(0x1b6)](..._0x108207);}));})),_0x3e5a82[_0x4357c3(0x1a1)]=_0x3e5a82[_0x4357c3(0x1a1)],_0x3e5a82[_0x4357c3(0x1d1)]={},await Promise[_0x4357c3(0x1b5)](_0x3e5a82['map'](async _0x2369c8=>{const _0x5a7d59=_0x4357c3;_0x3e5a82['data_adjustment'][_0x2369c8['invoice']]=[],await Promise[_0x5a7d59(0x1b5)](_0x2369c8['warehouse_data']['map'](async _0x1f86e2=>{const _0x289682=_0x5a7d59,_0x1d519c=await adjustment[_0x289682(0x1ba)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x1f86e2['_id'][_0x289682(0x19e)](),'product.invoice':_0x1f86e2[_0x289682(0x1cd)]}},{'$project':{'_id':_0x289682(0x1b3),'product_name':_0x289682(0x1bc),'product_code':_0x289682(0x1c4),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x289682(0x1a5),'warehouse_room':_0x289682(0x1bf),'product_invoice':_0x289682(0x1d7),'invoice':_0x289682(0x1d8),'id_transaction_from':_0x289682(0x1c5)}}]);_0x1d519c[_0x289682(0x1c9)]>0x0&&_0x3e5a82[_0x289682(0x1d1)][_0x2369c8[_0x289682(0x1cd)]][_0x289682(0x1b6)](..._0x1d519c);}));})),_0x3e5a82['data_transfer']={},await Promise['all'](_0x3e5a82[_0x4357c3(0x1c8)](async _0x2d723b=>{const _0x230a63=_0x4357c3;_0x3e5a82['data_transfer'][_0x2d723b[_0x230a63(0x1cd)]]=[],await Promise[_0x230a63(0x1b5)](_0x2d723b[_0x230a63(0x1d2)][_0x230a63(0x1c8)](async _0xf99911=>{const _0x55e327=_0x230a63,_0x403a56=await transfers[_0x55e327(0x1ba)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0xf99911['_id']['valueOf'](),'product.To_invoice':_0xf99911[_0x55e327(0x1cd)]}},{'$project':{'_id':_0x55e327(0x1b3),'product_name':_0x55e327(0x1bc),'product_code':_0x55e327(0x1c4),'quantity_available':_0x55e327(0x1c0),'warehouse_name':_0x55e327(0x1d6),'warehouse_room':_0x55e327(0x1bf),'product_invoice':'$product.to_room_name','invoice':_0x55e327(0x1d8),'id_transaction_id':'$product.id_transaction_id'}}]);console[_0x55e327(0x1d0)](_0x403a56),_0x403a56['length']>0x0&&_0x3e5a82[_0x55e327(0x1b7)][_0x2d723b[_0x55e327(0x1cd)]][_0x55e327(0x1b6)](..._0x403a56);}));})),_0xb6877d[_0x4357c3(0x19f)]({'purchases_warehouse':_0x3e5a82,'data_sales':_0x3e5a82[_0x4357c3(0x1a1)],'data_adjustment':_0x3e5a82[_0x4357c3(0x1d1)],'data_transfer':_0x3e5a82[_0x4357c3(0x1b7)]});}),module[a0_0x488863(0x1b1)]=router;function a0_0x50ad(_0x289abe,_0x4730ff){const _0x293bf1=a0_0x293b();return a0_0x50ad=function(_0x50ad91,_0x261b2e){_0x50ad91=_0x50ad91-0x19c;let _0x199879=_0x293bf1[_0x50ad91];return _0x199879;},a0_0x50ad(_0x289abe,_0x4730ff);}function a0_0x293b(){const _0x3576db=['exports','get','$product._id','2IKuaBT','all','push','data_transfer','updateMany','2043015FbuTZd','aggregate','5TsTeol','$product.product_name','$sale_product.room_name','/checking','$product.room_names','$product.to_quantity','$$invoice','status','10069640joyTKQ','$product.product_code','$product.id_transaction_from','$product_details.product_code','$sale_product.id_transaction_from','map','length','../../models/all_models','success','6561378VZAVzb','invoice','$room','$product_details','log','data_adjustment','warehouse_data','8284640SBcmPJ','errors','$product_details._id','$to_warehouse','$product.invoice','$invoice','warehouses','1054799CcZNhU','valueOf','json','980388QrVjwy','data_sales','$sale_product.invoice','380XxyFBH','$sale_product.product_code','$warehouse_name','$product_details.invoice','$sale_product._id','14800005047429','table\x20page','\x20documents\x20updated','$name','515532hLuGhD','message','/warehouse_monitor','monitor','/join'];a0_0x293b=function(){return _0x3576db;};return a0_0x293b();}