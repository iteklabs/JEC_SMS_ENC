const a0_0x37ac35=a0_0x46ca;function a0_0x10e0(){const _0x46cffd=['/join','$sale_product.id_transaction_from','message','$product.product_name','$product.id_transaction_from','8ryJukp','invoice','1NjPziB','33xPPsSs','monitor','json','\x20documents\x20updated','data_transfer','Router','get','all','length','../../models/all_models','$sale_product._id','$product_details.product_stock','log','$product._id','22190148akMiRP','2050727hkRbOj','12915009hBqqLh','$room','$to_warehouse','$product_details.invoice','push','2689886wkMdjq','$product_details._id','/warehouse_monitor','$product.id_transaction_id','data_sales','9AUuLfm','$product.new_adjust_qty','INCF-52068316','$product.product_code','$name','6845xoHkjz','7734OQvZBS','warehouse_data','6883990nxupto','$sale_product.room_name','14800005047429','aggregate','render','$warehouse_name','$sale_product.quantity','/checking','valueOf','$invoice','flash','data_adjustment','$product_details.product_code','$sale_product.product_name','updateMany','status','success','warehouses','$product.room_names','express','exports','$product_details.product_name','_id','$product.invoice','$product_details','1148412xexOEc','modifiedCount','map'];a0_0x10e0=function(){return _0x46cffd;};return a0_0x10e0();}(function(_0xe41329,_0x4c032f){const _0x34bca6=a0_0x46ca,_0x201a26=_0xe41329();while(!![]){try{const _0x52388a=parseInt(_0x34bca6(0x173))/0x1*(-parseInt(_0x34bca6(0x189))/0x2)+parseInt(_0x34bca6(0x18e))/0x3*(parseInt(_0x34bca6(0x169))/0x4)+-parseInt(_0x34bca6(0x193))/0x5*(parseInt(_0x34bca6(0x194))/0x6)+-parseInt(_0x34bca6(0x183))/0x7+parseInt(_0x34bca6(0x171))/0x8*(-parseInt(_0x34bca6(0x184))/0x9)+-parseInt(_0x34bca6(0x196))/0xa+-parseInt(_0x34bca6(0x174))/0xb*(-parseInt(_0x34bca6(0x182))/0xc);if(_0x52388a===_0x4c032f)break;else _0x201a26['push'](_0x201a26['shift']());}catch(_0x45df82){_0x201a26['push'](_0x201a26['shift']());}}}(a0_0x10e0,0xd78d5));function a0_0x46ca(_0x13ce1f,_0x41445c){const _0x10e0e9=a0_0x10e0();return a0_0x46ca=function(_0x46cabf,_0x5af6e6){_0x46cabf=_0x46cabf-0x15d;let _0x393a50=_0x10e0e9[_0x46cabf];return _0x393a50;},a0_0x46ca(_0x13ce1f,_0x41445c);}const express=require(a0_0x37ac35(0x163)),app=express(),router=express[a0_0x37ac35(0x179)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x37ac35(0x17d));router[a0_0x37ac35(0x17a)]('/negative',async(_0x384c95,_0x125231)=>{const _0x1efced=a0_0x37ac35;try{const _0x451865=await warehouse[_0x1efced(0x15e)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x125231[_0x1efced(0x176)]({'status':_0x451865[_0x1efced(0x16a)]+_0x1efced(0x177)});}catch(_0x4eb43e){console[_0x1efced(0x180)]('table\x20page',_0x4eb43e),_0x125231[_0x1efced(0x15f)](0xc8)[_0x1efced(0x176)]({'message':_0x4eb43e[_0x1efced(0x16e)]});}}),router[a0_0x37ac35(0x17a)](a0_0x37ac35(0x19d),async(_0x33bd63,_0x41bd2b)=>{const _0x14b18f=a0_0x37ac35;try{const _0x15400b=await warehouse['aggregate']([{'$unwind':_0x14b18f(0x168)},{'$match':{'product_details.invoice':_0x14b18f(0x190),'product_details.primary_code':_0x14b18f(0x198)}},{'$group':{'_id':{'name':_0x14b18f(0x192),'room':_0x14b18f(0x185)},'products':{'$push':_0x14b18f(0x168)}}}]);_0x41bd2b['json'](_0x15400b);}catch(_0x1cbb42){console[_0x14b18f(0x180)]('table\x20page',_0x1cbb42),_0x41bd2b[_0x14b18f(0x15f)](0xc8)['json']({'message':_0x1cbb42[_0x14b18f(0x16e)]});}}),router[a0_0x37ac35(0x17a)](a0_0x37ac35(0x18b),async(_0x364448,_0x22517c)=>{const _0x213d4a=a0_0x37ac35;_0x22517c[_0x213d4a(0x19a)](_0x213d4a(0x175),{'success':_0x364448[_0x213d4a(0x1a0)](_0x213d4a(0x160)),'errors':_0x364448['flash']('errors')});}),router[a0_0x37ac35(0x17a)](a0_0x37ac35(0x16c),async(_0x58563b,_0xe2fceb)=>{const _0x1a39cd=a0_0x37ac35;var _0x181cc8=await purchases['aggregate']([{'$lookup':{'from':_0x1a39cd(0x161),'let':{'invoice':_0x1a39cd(0x19f)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':['$$invoice',_0x1a39cd(0x187)]}}},{'$project':{'_id':_0x1a39cd(0x18a),'product_name':_0x1a39cd(0x165),'product_code':_0x1a39cd(0x1a2),'quantity_available':_0x1a39cd(0x17f),'warehouse_name':_0x1a39cd(0x192),'warehouse_room':_0x1a39cd(0x185),'invoice':'$product_details.invoice'}}],'as':_0x1a39cd(0x195)}}]);_0x181cc8[_0x1a39cd(0x18d)]={},await Promise['all'](_0x181cc8['map'](async _0x14d6b7=>{const _0x4c6029=_0x1a39cd;_0x181cc8[_0x4c6029(0x18d)][_0x14d6b7[_0x4c6029(0x172)]]=[],await Promise[_0x4c6029(0x17b)](_0x14d6b7[_0x4c6029(0x195)][_0x4c6029(0x16b)](async _0x558326=>{const _0xb2fdc5=_0x4c6029,_0x53523c=await sales[_0xb2fdc5(0x199)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x558326[_0xb2fdc5(0x166)][_0xb2fdc5(0x19e)](),'sale_product.invoice':_0x558326[_0xb2fdc5(0x172)]}},{'$project':{'_id':_0xb2fdc5(0x17e),'product_name':_0xb2fdc5(0x15d),'product_code':'$sale_product.product_code','quantity_available':_0xb2fdc5(0x19c),'warehouse_name':'$warehouse_name','warehouse_room':_0xb2fdc5(0x197),'product_invoice':'$sale_product.invoice','invoice':_0xb2fdc5(0x19f),'id_transaction_from':_0xb2fdc5(0x16d)}}]);_0x53523c[_0xb2fdc5(0x17c)]>0x0&&_0x181cc8[_0xb2fdc5(0x18d)][_0x14d6b7[_0xb2fdc5(0x172)]][_0xb2fdc5(0x188)](..._0x53523c);}));})),_0x181cc8['data_sales']=_0x181cc8[_0x1a39cd(0x18d)],_0x181cc8[_0x1a39cd(0x1a1)]={},await Promise['all'](_0x181cc8['map'](async _0x47bf5e=>{const _0x4939f8=_0x1a39cd;_0x181cc8[_0x4939f8(0x1a1)][_0x47bf5e[_0x4939f8(0x172)]]=[],await Promise['all'](_0x47bf5e[_0x4939f8(0x195)][_0x4939f8(0x16b)](async _0x49d2dd=>{const _0x2efaaf=_0x4939f8,_0x3444d7=await adjustment[_0x2efaaf(0x199)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x49d2dd[_0x2efaaf(0x166)]['valueOf'](),'product.invoice':_0x49d2dd[_0x2efaaf(0x172)]}},{'$project':{'_id':_0x2efaaf(0x181),'product_name':_0x2efaaf(0x16f),'product_code':_0x2efaaf(0x191),'quantity_available':_0x2efaaf(0x18f),'warehouse_name':_0x2efaaf(0x19b),'warehouse_room':_0x2efaaf(0x162),'product_invoice':_0x2efaaf(0x167),'invoice':'$invoice','id_transaction_from':_0x2efaaf(0x170)}}]);_0x3444d7['length']>0x0&&_0x181cc8[_0x2efaaf(0x1a1)][_0x47bf5e[_0x2efaaf(0x172)]][_0x2efaaf(0x188)](..._0x3444d7);}));})),_0x181cc8[_0x1a39cd(0x178)]={},await Promise[_0x1a39cd(0x17b)](_0x181cc8['map'](async _0x1725f9=>{const _0x37cc58=_0x1a39cd;_0x181cc8[_0x37cc58(0x178)][_0x1725f9[_0x37cc58(0x172)]]=[],await Promise[_0x37cc58(0x17b)](_0x1725f9[_0x37cc58(0x195)][_0x37cc58(0x16b)](async _0xe93b9c=>{const _0x4f38f1=_0x37cc58,_0x240b89=await transfers[_0x4f38f1(0x199)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0xe93b9c[_0x4f38f1(0x166)]['valueOf'](),'product.To_invoice':_0xe93b9c['invoice']}},{'$project':{'_id':_0x4f38f1(0x181),'product_name':'$product.product_name','product_code':_0x4f38f1(0x191),'quantity_available':'$product.to_quantity','warehouse_name':_0x4f38f1(0x186),'warehouse_room':'$product.room_names','product_invoice':'$product.to_room_name','invoice':_0x4f38f1(0x19f),'id_transaction_id':_0x4f38f1(0x18c)}}]);console[_0x4f38f1(0x180)](_0x240b89),_0x240b89[_0x4f38f1(0x17c)]>0x0&&_0x181cc8[_0x4f38f1(0x178)][_0x1725f9[_0x4f38f1(0x172)]][_0x4f38f1(0x188)](..._0x240b89);}));})),_0xe2fceb[_0x1a39cd(0x176)]({'purchases_warehouse':_0x181cc8,'data_sales':_0x181cc8[_0x1a39cd(0x18d)],'data_adjustment':_0x181cc8[_0x1a39cd(0x1a1)],'data_transfer':_0x181cc8[_0x1a39cd(0x178)]});}),module[a0_0x37ac35(0x164)]=router;