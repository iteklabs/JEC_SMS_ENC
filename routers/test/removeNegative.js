function a0_0x31d3(_0x36aebd,_0x5df519){const _0x45952d=a0_0x4595();return a0_0x31d3=function(_0x31d399,_0x43af48){_0x31d399=_0x31d399-0x17e;let _0x52ebb3=_0x45952d[_0x31d399];return _0x52ebb3;},a0_0x31d3(_0x36aebd,_0x5df519);}function a0_0x4595(){const _0xba5e0d=['length','1148292xNkABk','status','data_adjustment','$sale_product.product_code','7818475iaccWc','2400325XtJNcn','9544rKRPls','11pkjckC','$sale_product','table\x20page','$product_details.invoice','$product_details','239102UiCDsj','push','$product._id','$sale_product.invoice','data_transfer','all','$$invoice','$product.room_names','express','$product','2352960rYDJUk','12aRijxi','invoice','/join','warehouse_data','get','$sale_product.quantity','$product.to_quantity','$product.invoice','render','$product.new_adjust_qty','updateMany','$to_warehouse','flash','1959XSWbxr','2493KRjrCi','errors','$warehouse_name','data_sales','map','$product.id_transaction_id','aggregate','_id','valueOf','$product_details.product_name','INCF-52068316','14800005047429','$product.id_transaction_from','exports','message','$invoice','$product_details.product_stock','Router','log','$product_details.product_code','$sale_product._id','$name','$product.product_code','\x20documents\x20updated','8308QjDDHv','../../models/all_models','264tTKSWk','$room','json','success','$product.product_name'];a0_0x4595=function(){return _0xba5e0d;};return a0_0x4595();}const a0_0x468177=a0_0x31d3;(function(_0x300d23,_0x12700e){const _0x53a82a=a0_0x31d3,_0x4d3d75=_0x300d23();while(!![]){try{const _0x2dcdca=parseInt(_0x53a82a(0x1b0))/0x1*(parseInt(_0x53a82a(0x1b5))/0x2)+parseInt(_0x53a82a(0x188))/0x3*(-parseInt(_0x53a82a(0x1a1))/0x4)+-parseInt(_0x53a82a(0x1ae))/0x5*(parseInt(_0x53a82a(0x1c0))/0x6)+-parseInt(_0x53a82a(0x1ad))/0x7+-parseInt(_0x53a82a(0x1af))/0x8*(-parseInt(_0x53a82a(0x189))/0x9)+parseInt(_0x53a82a(0x1bf))/0xa+parseInt(_0x53a82a(0x1a3))/0xb*(parseInt(_0x53a82a(0x1a9))/0xc);if(_0x2dcdca===_0x12700e)break;else _0x4d3d75['push'](_0x4d3d75['shift']());}catch(_0x2d473c){_0x4d3d75['push'](_0x4d3d75['shift']());}}}(a0_0x4595,0xb5a82));const express=require(a0_0x468177(0x1bd)),app=express(),router=express[a0_0x468177(0x19a)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x468177(0x1a2));router['get']('/negative',async(_0x140713,_0x455cda)=>{const _0xf42f=a0_0x468177;try{const _0x2cbf68=await warehouse[_0xf42f(0x185)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x455cda[_0xf42f(0x1a5)]({'status':_0x2cbf68['modifiedCount']+_0xf42f(0x1a0)});}catch(_0x558ca8){console['log'](_0xf42f(0x1b2),_0x558ca8),_0x455cda[_0xf42f(0x1aa)](0xc8)[_0xf42f(0x1a5)]({'message':_0x558ca8[_0xf42f(0x197)]});}}),router[a0_0x468177(0x17f)]('/checking',async(_0x4e3920,_0x54995c)=>{const _0x93e072=a0_0x468177;try{const _0x46fa26=await warehouse[_0x93e072(0x18f)]([{'$unwind':_0x93e072(0x1b4)},{'$match':{'product_details.invoice':_0x93e072(0x193),'product_details.primary_code':_0x93e072(0x194)}},{'$group':{'_id':{'name':_0x93e072(0x19e),'room':'$room'},'products':{'$push':'$product_details'}}}]);_0x54995c['json'](_0x46fa26);}catch(_0x1ab443){console[_0x93e072(0x19b)](_0x93e072(0x1b2),_0x1ab443),_0x54995c[_0x93e072(0x1aa)](0xc8)[_0x93e072(0x1a5)]({'message':_0x1ab443[_0x93e072(0x197)]});}}),router[a0_0x468177(0x17f)]('/warehouse_monitor',async(_0x411f9a,_0x5dcf12)=>{const _0x36bdf3=a0_0x468177;_0x5dcf12[_0x36bdf3(0x183)]('monitor',{'success':_0x411f9a[_0x36bdf3(0x187)](_0x36bdf3(0x1a6)),'errors':_0x411f9a[_0x36bdf3(0x187)](_0x36bdf3(0x18a))});}),router[a0_0x468177(0x17f)](a0_0x468177(0x1c2),async(_0x15bb35,_0xc9ff5f)=>{const _0x3675be=a0_0x468177;var _0x273544=await purchases[_0x3675be(0x18f)]([{'$lookup':{'from':'warehouses','let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x3675be(0x1b4)},{'$match':{'$expr':{'$eq':[_0x3675be(0x1bb),_0x3675be(0x1b3)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x3675be(0x192),'product_code':_0x3675be(0x19c),'quantity_available':_0x3675be(0x199),'warehouse_name':_0x3675be(0x19e),'warehouse_room':_0x3675be(0x1a4),'invoice':_0x3675be(0x1b3)}}],'as':_0x3675be(0x17e)}}]);_0x273544['data_sales']={},await Promise[_0x3675be(0x1ba)](_0x273544[_0x3675be(0x18d)](async _0x45862a=>{const _0x1d58f0=_0x3675be;_0x273544[_0x1d58f0(0x18c)][_0x45862a[_0x1d58f0(0x1c1)]]=[],await Promise['all'](_0x45862a[_0x1d58f0(0x17e)][_0x1d58f0(0x18d)](async _0x3bcd69=>{const _0x1445b9=_0x1d58f0,_0x5041ed=await sales['aggregate']([{'$unwind':_0x1445b9(0x1b1)},{'$match':{'sale_product.id_transaction_from':_0x3bcd69[_0x1445b9(0x190)][_0x1445b9(0x191)](),'sale_product.invoice':_0x3bcd69['invoice']}},{'$project':{'_id':_0x1445b9(0x19d),'product_name':'$sale_product.product_name','product_code':_0x1445b9(0x1ac),'quantity_available':_0x1445b9(0x180),'warehouse_name':'$warehouse_name','warehouse_room':'$sale_product.room_name','product_invoice':_0x1445b9(0x1b8),'invoice':_0x1445b9(0x198),'id_transaction_from':'$sale_product.id_transaction_from'}}]);_0x5041ed[_0x1445b9(0x1a8)]>0x0&&_0x273544[_0x1445b9(0x18c)][_0x45862a[_0x1445b9(0x1c1)]][_0x1445b9(0x1b6)](..._0x5041ed);}));})),_0x273544[_0x3675be(0x18c)]=_0x273544['data_sales'],_0x273544['data_adjustment']={},await Promise[_0x3675be(0x1ba)](_0x273544[_0x3675be(0x18d)](async _0x54a61a=>{const _0x1f85aa=_0x3675be;_0x273544[_0x1f85aa(0x1ab)][_0x54a61a[_0x1f85aa(0x1c1)]]=[],await Promise[_0x1f85aa(0x1ba)](_0x54a61a[_0x1f85aa(0x17e)][_0x1f85aa(0x18d)](async _0x288f2b=>{const _0x5cb7e3=_0x1f85aa,_0x4c080b=await adjustment[_0x5cb7e3(0x18f)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x288f2b['_id'][_0x5cb7e3(0x191)](),'product.invoice':_0x288f2b['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x5cb7e3(0x1a7),'product_code':_0x5cb7e3(0x19f),'quantity_available':_0x5cb7e3(0x184),'warehouse_name':_0x5cb7e3(0x18b),'warehouse_room':_0x5cb7e3(0x1bc),'product_invoice':_0x5cb7e3(0x182),'invoice':_0x5cb7e3(0x198),'id_transaction_from':_0x5cb7e3(0x195)}}]);_0x4c080b[_0x5cb7e3(0x1a8)]>0x0&&_0x273544[_0x5cb7e3(0x1ab)][_0x54a61a[_0x5cb7e3(0x1c1)]][_0x5cb7e3(0x1b6)](..._0x4c080b);}));})),_0x273544['data_transfer']={},await Promise['all'](_0x273544[_0x3675be(0x18d)](async _0x4d9347=>{const _0x5e77a0=_0x3675be;_0x273544[_0x5e77a0(0x1b9)][_0x4d9347['invoice']]=[],await Promise[_0x5e77a0(0x1ba)](_0x4d9347[_0x5e77a0(0x17e)][_0x5e77a0(0x18d)](async _0x22529c=>{const _0x4e0e87=_0x5e77a0,_0x299bf2=await transfers[_0x4e0e87(0x18f)]([{'$unwind':_0x4e0e87(0x1be)},{'$match':{'product.id_transaction_id':_0x22529c['_id'][_0x4e0e87(0x191)](),'product.To_invoice':_0x22529c[_0x4e0e87(0x1c1)]}},{'$project':{'_id':_0x4e0e87(0x1b7),'product_name':_0x4e0e87(0x1a7),'product_code':_0x4e0e87(0x19f),'quantity_available':_0x4e0e87(0x181),'warehouse_name':_0x4e0e87(0x186),'warehouse_room':_0x4e0e87(0x1bc),'product_invoice':'$product.to_room_name','invoice':_0x4e0e87(0x198),'id_transaction_id':_0x4e0e87(0x18e)}}]);console[_0x4e0e87(0x19b)](_0x299bf2),_0x299bf2['length']>0x0&&_0x273544['data_transfer'][_0x4d9347[_0x4e0e87(0x1c1)]][_0x4e0e87(0x1b6)](..._0x299bf2);}));})),_0xc9ff5f[_0x3675be(0x1a5)]({'purchases_warehouse':_0x273544,'data_sales':_0x273544[_0x3675be(0x18c)],'data_adjustment':_0x273544[_0x3675be(0x1ab)],'data_transfer':_0x273544[_0x3675be(0x1b9)]});}),module[a0_0x468177(0x196)]=router;