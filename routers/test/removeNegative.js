const a0_0x1d952c=a0_0x4b75;function a0_0x4b75(_0x54e8ad,_0x4ac14a){const _0x48f89e=a0_0x48f8();return a0_0x4b75=function(_0x4b756c,_0x33f905){_0x4b756c=_0x4b756c-0x1d0;let _0x470067=_0x48f89e[_0x4b756c];return _0x470067;},a0_0x4b75(_0x54e8ad,_0x4ac14a);}(function(_0x106c83,_0x4333a3){const _0x2174f2=a0_0x4b75,_0x2da77a=_0x106c83();while(!![]){try{const _0x501064=-parseInt(_0x2174f2(0x1d8))/0x1+-parseInt(_0x2174f2(0x202))/0x2*(-parseInt(_0x2174f2(0x1f7))/0x3)+-parseInt(_0x2174f2(0x1d5))/0x4*(parseInt(_0x2174f2(0x1d7))/0x5)+-parseInt(_0x2174f2(0x20f))/0x6+-parseInt(_0x2174f2(0x1d1))/0x7+parseInt(_0x2174f2(0x208))/0x8+parseInt(_0x2174f2(0x1e0))/0x9;if(_0x501064===_0x4333a3)break;else _0x2da77a['push'](_0x2da77a['shift']());}catch(_0x3c5884){_0x2da77a['push'](_0x2da77a['shift']());}}}(a0_0x48f8,0x61905));const express=require(a0_0x1d952c(0x20c)),app=express(),router=express[a0_0x1d952c(0x1e8)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');function a0_0x48f8(){const _0x1e8ffc=['express','$product','invoice','809478dGwrEl','$product_details._id','INCF-52068316','4594142vucrLX','/warehouse_monitor','$sale_product.product_code','$to_warehouse','2010812bpRELb','json','5tcGMKV','21093mvZhuv','warehouse_data','$invoice','$sale_product.product_name','$product.id_transaction_id','success','warehouses','push','6257790gJbfCZ','$sale_product.invoice','aggregate','table\x20page','$room','\x20documents\x20updated','$product.to_room_name','$sale_product.room_name','Router','all','render','status','log','$product.product_code','flash','$product.room_names','updateMany','$product_details.invoice','data_sales','$name','get','$product_details.product_stock','$$invoice','20361OyDFfJ','message','_id','$product._id','valueOf','monitor','modifiedCount','$product.invoice','$sale_product.quantity','/join','$product_details.product_name','194SATstJ','length','data_transfer','data_adjustment','$product_details','$sale_product','2887896lVXKaB','$product.to_quantity','$warehouse_name','map'];a0_0x48f8=function(){return _0x1e8ffc;};return a0_0x48f8();}router[a0_0x1d952c(0x1f4)]('/negative',async(_0x3a02b6,_0x29923e)=>{const _0x109f10=a0_0x1d952c;try{const _0x3dd35e=await warehouse[_0x109f10(0x1f0)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x29923e[_0x109f10(0x1d6)]({'status':_0x3dd35e[_0x109f10(0x1fd)]+_0x109f10(0x1e5)});}catch(_0x2298aa){console[_0x109f10(0x1ec)]('table\x20page',_0x2298aa),_0x29923e[_0x109f10(0x1eb)](0xc8)[_0x109f10(0x1d6)]({'message':_0x2298aa['message']});}}),router[a0_0x1d952c(0x1f4)]('/checking',async(_0x33d8a1,_0x2d2ff5)=>{const _0x5acb0f=a0_0x1d952c;try{const _0xce4ea0=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$match':{'product_details.invoice':_0x5acb0f(0x1d0),'product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x5acb0f(0x1f3),'room':_0x5acb0f(0x1e4)},'products':{'$push':'$product_details'}}}]);_0x2d2ff5[_0x5acb0f(0x1d6)](_0xce4ea0);}catch(_0x2f3c16){console['log'](_0x5acb0f(0x1e3),_0x2f3c16),_0x2d2ff5['status'](0xc8)[_0x5acb0f(0x1d6)]({'message':_0x2f3c16[_0x5acb0f(0x1f8)]});}}),router[a0_0x1d952c(0x1f4)](a0_0x1d952c(0x1d2),async(_0x37db15,_0x50ae52)=>{const _0x51c1d8=a0_0x1d952c;_0x50ae52[_0x51c1d8(0x1ea)](_0x51c1d8(0x1fc),{'success':_0x37db15['flash'](_0x51c1d8(0x1dd)),'errors':_0x37db15[_0x51c1d8(0x1ee)]('errors')});}),router[a0_0x1d952c(0x1f4)](a0_0x1d952c(0x200),async(_0x1b4012,_0x35109e)=>{const _0x2e7c4b=a0_0x1d952c;var _0x381c26=await purchases[_0x2e7c4b(0x1e2)]([{'$lookup':{'from':_0x2e7c4b(0x1de),'let':{'invoice':_0x2e7c4b(0x1da)},'pipeline':[{'$unwind':_0x2e7c4b(0x206)},{'$match':{'$expr':{'$eq':[_0x2e7c4b(0x1f6),_0x2e7c4b(0x1f1)]}}},{'$project':{'_id':_0x2e7c4b(0x210),'product_name':_0x2e7c4b(0x201),'product_code':'$product_details.product_code','quantity_available':_0x2e7c4b(0x1f5),'warehouse_name':_0x2e7c4b(0x1f3),'warehouse_room':_0x2e7c4b(0x1e4),'invoice':'$product_details.invoice'}}],'as':_0x2e7c4b(0x1d9)}}]);_0x381c26[_0x2e7c4b(0x1f2)]={},await Promise[_0x2e7c4b(0x1e9)](_0x381c26['map'](async _0x139b11=>{const _0x4ddb30=_0x2e7c4b;_0x381c26['data_sales'][_0x139b11[_0x4ddb30(0x20e)]]=[],await Promise[_0x4ddb30(0x1e9)](_0x139b11[_0x4ddb30(0x1d9)][_0x4ddb30(0x20b)](async _0x3733d8=>{const _0x1b348e=_0x4ddb30,_0x4dc9f9=await sales[_0x1b348e(0x1e2)]([{'$unwind':_0x1b348e(0x207)},{'$match':{'sale_product.id_transaction_from':_0x3733d8[_0x1b348e(0x1f9)][_0x1b348e(0x1fb)](),'sale_product.invoice':_0x3733d8[_0x1b348e(0x20e)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x1b348e(0x1db),'product_code':_0x1b348e(0x1d3),'quantity_available':_0x1b348e(0x1ff),'warehouse_name':'$warehouse_name','warehouse_room':_0x1b348e(0x1e7),'product_invoice':_0x1b348e(0x1e1),'invoice':_0x1b348e(0x1da),'id_transaction_from':'$sale_product.id_transaction_from'}}]);_0x4dc9f9[_0x1b348e(0x203)]>0x0&&_0x381c26[_0x1b348e(0x1f2)][_0x139b11[_0x1b348e(0x20e)]][_0x1b348e(0x1df)](..._0x4dc9f9);}));})),_0x381c26[_0x2e7c4b(0x1f2)]=_0x381c26[_0x2e7c4b(0x1f2)],_0x381c26[_0x2e7c4b(0x205)]={},await Promise[_0x2e7c4b(0x1e9)](_0x381c26['map'](async _0xc2140f=>{const _0x5d6bcb=_0x2e7c4b;_0x381c26[_0x5d6bcb(0x205)][_0xc2140f[_0x5d6bcb(0x20e)]]=[],await Promise[_0x5d6bcb(0x1e9)](_0xc2140f[_0x5d6bcb(0x1d9)]['map'](async _0x3db9f8=>{const _0x17c62e=_0x5d6bcb,_0x2386e5=await adjustment[_0x17c62e(0x1e2)]([{'$unwind':_0x17c62e(0x20d)},{'$match':{'product.id_transaction_from':_0x3db9f8[_0x17c62e(0x1f9)][_0x17c62e(0x1fb)](),'product.invoice':_0x3db9f8[_0x17c62e(0x20e)]}},{'$project':{'_id':_0x17c62e(0x1fa),'product_name':'$product.product_name','product_code':_0x17c62e(0x1ed),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x17c62e(0x20a),'warehouse_room':'$product.room_names','product_invoice':_0x17c62e(0x1fe),'invoice':_0x17c62e(0x1da),'id_transaction_from':'$product.id_transaction_from'}}]);_0x2386e5[_0x17c62e(0x203)]>0x0&&_0x381c26[_0x17c62e(0x205)][_0xc2140f[_0x17c62e(0x20e)]][_0x17c62e(0x1df)](..._0x2386e5);}));})),_0x381c26[_0x2e7c4b(0x204)]={},await Promise[_0x2e7c4b(0x1e9)](_0x381c26[_0x2e7c4b(0x20b)](async _0x1d5b57=>{const _0x16dae0=_0x2e7c4b;_0x381c26[_0x16dae0(0x204)][_0x1d5b57['invoice']]=[],await Promise[_0x16dae0(0x1e9)](_0x1d5b57[_0x16dae0(0x1d9)][_0x16dae0(0x20b)](async _0x57da63=>{const _0x974b67=_0x16dae0,_0x3c64ba=await transfers[_0x974b67(0x1e2)]([{'$unwind':_0x974b67(0x20d)},{'$match':{'product.id_transaction_id':_0x57da63[_0x974b67(0x1f9)][_0x974b67(0x1fb)](),'product.To_invoice':_0x57da63[_0x974b67(0x20e)]}},{'$project':{'_id':_0x974b67(0x1fa),'product_name':'$product.product_name','product_code':_0x974b67(0x1ed),'quantity_available':_0x974b67(0x209),'warehouse_name':_0x974b67(0x1d4),'warehouse_room':_0x974b67(0x1ef),'product_invoice':_0x974b67(0x1e6),'invoice':_0x974b67(0x1da),'id_transaction_id':_0x974b67(0x1dc)}}]);console[_0x974b67(0x1ec)](_0x3c64ba),_0x3c64ba[_0x974b67(0x203)]>0x0&&_0x381c26[_0x974b67(0x204)][_0x1d5b57['invoice']]['push'](..._0x3c64ba);}));})),_0x35109e[_0x2e7c4b(0x1d6)]({'purchases_warehouse':_0x381c26,'data_sales':_0x381c26[_0x2e7c4b(0x1f2)],'data_adjustment':_0x381c26[_0x2e7c4b(0x205)],'data_transfer':_0x381c26[_0x2e7c4b(0x204)]});}),module['exports']=router;