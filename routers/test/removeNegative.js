function a0_0x1a36(_0x5eb1be,_0x3feeee){const _0x3da375=a0_0x3da3();return a0_0x1a36=function(_0x1a36a2,_0x43003a){_0x1a36a2=_0x1a36a2-0x18c;let _0x4b0998=_0x3da375[_0x1a36a2];return _0x4b0998;},a0_0x1a36(_0x5eb1be,_0x3feeee);}const a0_0x451f96=a0_0x1a36;(function(_0x35839e,_0x2d9a8e){const _0x1934d9=a0_0x1a36,_0xd28ede=_0x35839e();while(!![]){try{const _0x4ab140=-parseInt(_0x1934d9(0x1c0))/0x1+-parseInt(_0x1934d9(0x198))/0x2*(-parseInt(_0x1934d9(0x199))/0x3)+parseInt(_0x1934d9(0x192))/0x4+parseInt(_0x1934d9(0x1ac))/0x5+-parseInt(_0x1934d9(0x193))/0x6+parseInt(_0x1934d9(0x1a8))/0x7*(parseInt(_0x1934d9(0x1b0))/0x8)+parseInt(_0x1934d9(0x1cb))/0x9*(-parseInt(_0x1934d9(0x1bb))/0xa);if(_0x4ab140===_0x2d9a8e)break;else _0xd28ede['push'](_0xd28ede['shift']());}catch(_0x5705ee){_0xd28ede['push'](_0xd28ede['shift']());}}}(a0_0x3da3,0x27afb));function a0_0x3da3(){const _0x2cc0ba=['$product.id_transaction_id','940384zEiPPm','179742UkMFFK','data_adjustment','flash','get','$product.product_code','38zokdsM','28722gOVtax','length','/negative','all','14800005047429','$product.to_quantity','data_transfer','log','../../models/all_models','$product.product_name','$product_details.product_code','$warehouse_name','/join','modifiedCount','success','79387pQmCqX','$sale_product.product_code','$product_details._id','exports','974515HQAluD','$invoice','$to_warehouse','updateMany','88jHYkkt','$product.invoice','warehouses','$product.to_room_name','_id','$product_details.product_stock','$product_details.product_name','$product.id_transaction_from','errors','$product_details','valueOf','80jfaMOo','\x20documents\x20updated','json','warehouse_data','$sale_product._id','69800EminFl','$room','map','$sale_product.quantity','monitor','/checking','$name','$sale_product.room_name','$sale_product.id_transaction_from','table\x20page','push','533637dHYaIM','aggregate','message','$product._id','data_sales','$sale_product','invoice','$product','render'];a0_0x3da3=function(){return _0x2cc0ba;};return a0_0x3da3();}const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x451f96(0x1a1));router[a0_0x451f96(0x196)](a0_0x451f96(0x19b),async(_0x37d35a,_0x199445)=>{const _0x281ade=a0_0x451f96;try{const _0x31f244=await warehouse[_0x281ade(0x1af)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x199445[_0x281ade(0x1bd)]({'status':_0x31f244[_0x281ade(0x1a6)]+_0x281ade(0x1bc)});}catch(_0x6d0576){console[_0x281ade(0x1a0)](_0x281ade(0x1c9),_0x6d0576),_0x199445['status'](0xc8)['json']({'message':_0x6d0576[_0x281ade(0x1cd)]});}}),router[a0_0x451f96(0x196)](a0_0x451f96(0x1c5),async(_0x47a185,_0x48b440)=>{const _0xe8195=a0_0x451f96;try{const _0x5cf6e9=await warehouse[_0xe8195(0x1cc)]([{'$unwind':_0xe8195(0x1b9)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':_0xe8195(0x19d)}},{'$group':{'_id':{'name':_0xe8195(0x1c6),'room':_0xe8195(0x1c1)},'products':{'$push':'$product_details'}}}]);_0x48b440['json'](_0x5cf6e9);}catch(_0x5810b4){console[_0xe8195(0x1a0)](_0xe8195(0x1c9),_0x5810b4),_0x48b440['status'](0xc8)[_0xe8195(0x1bd)]({'message':_0x5810b4[_0xe8195(0x1cd)]});}}),router['get']('/warehouse_monitor',async(_0x483ab6,_0x49e63c)=>{const _0x59556a=a0_0x451f96;_0x49e63c[_0x59556a(0x190)](_0x59556a(0x1c4),{'success':_0x483ab6['flash'](_0x59556a(0x1a7)),'errors':_0x483ab6[_0x59556a(0x195)](_0x59556a(0x1b8))});}),router[a0_0x451f96(0x196)](a0_0x451f96(0x1a5),async(_0x5eca38,_0x5aa0d3)=>{const _0x197619=a0_0x451f96;var _0x44e21b=await purchases[_0x197619(0x1cc)]([{'$lookup':{'from':_0x197619(0x1b2),'let':{'invoice':_0x197619(0x1ad)},'pipeline':[{'$unwind':'$product_details'},{'$match':{'$expr':{'$eq':['$$invoice','$product_details.invoice']}}},{'$project':{'_id':_0x197619(0x1aa),'product_name':_0x197619(0x1b6),'product_code':_0x197619(0x1a3),'quantity_available':_0x197619(0x1b5),'warehouse_name':_0x197619(0x1c6),'warehouse_room':_0x197619(0x1c1),'invoice':'$product_details.invoice'}}],'as':'warehouse_data'}}]);_0x44e21b[_0x197619(0x18c)]={},await Promise['all'](_0x44e21b['map'](async _0x1f8e82=>{const _0x54862e=_0x197619;_0x44e21b['data_sales'][_0x1f8e82[_0x54862e(0x18e)]]=[],await Promise[_0x54862e(0x19c)](_0x1f8e82[_0x54862e(0x1be)][_0x54862e(0x1c2)](async _0x507c51=>{const _0x4d7869=_0x54862e,_0x65c662=await sales[_0x4d7869(0x1cc)]([{'$unwind':_0x4d7869(0x18d)},{'$match':{'sale_product.id_transaction_from':_0x507c51[_0x4d7869(0x1b4)][_0x4d7869(0x1ba)](),'sale_product.invoice':_0x507c51['invoice']}},{'$project':{'_id':_0x4d7869(0x1bf),'product_name':'$sale_product.product_name','product_code':_0x4d7869(0x1a9),'quantity_available':_0x4d7869(0x1c3),'warehouse_name':_0x4d7869(0x1a4),'warehouse_room':_0x4d7869(0x1c7),'product_invoice':'$sale_product.invoice','invoice':_0x4d7869(0x1ad),'id_transaction_from':_0x4d7869(0x1c8)}}]);_0x65c662[_0x4d7869(0x19a)]>0x0&&_0x44e21b[_0x4d7869(0x18c)][_0x1f8e82[_0x4d7869(0x18e)]]['push'](..._0x65c662);}));})),_0x44e21b['data_sales']=_0x44e21b[_0x197619(0x18c)],_0x44e21b['data_adjustment']={},await Promise[_0x197619(0x19c)](_0x44e21b['map'](async _0x2fe94a=>{const _0x4282e6=_0x197619;_0x44e21b[_0x4282e6(0x194)][_0x2fe94a[_0x4282e6(0x18e)]]=[],await Promise['all'](_0x2fe94a[_0x4282e6(0x1be)][_0x4282e6(0x1c2)](async _0xf980ad=>{const _0x3ca7b9=_0x4282e6,_0x4a2e57=await adjustment[_0x3ca7b9(0x1cc)]([{'$unwind':_0x3ca7b9(0x18f)},{'$match':{'product.id_transaction_from':_0xf980ad[_0x3ca7b9(0x1b4)]['valueOf'](),'product.invoice':_0xf980ad[_0x3ca7b9(0x18e)]}},{'$project':{'_id':_0x3ca7b9(0x1ce),'product_name':_0x3ca7b9(0x1a2),'product_code':_0x3ca7b9(0x197),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x3ca7b9(0x1a4),'warehouse_room':'$product.room_names','product_invoice':_0x3ca7b9(0x1b1),'invoice':'$invoice','id_transaction_from':_0x3ca7b9(0x1b7)}}]);_0x4a2e57['length']>0x0&&_0x44e21b[_0x3ca7b9(0x194)][_0x2fe94a[_0x3ca7b9(0x18e)]][_0x3ca7b9(0x1ca)](..._0x4a2e57);}));})),_0x44e21b[_0x197619(0x19f)]={},await Promise[_0x197619(0x19c)](_0x44e21b[_0x197619(0x1c2)](async _0x56415b=>{const _0x4dd457=_0x197619;_0x44e21b[_0x4dd457(0x19f)][_0x56415b[_0x4dd457(0x18e)]]=[],await Promise[_0x4dd457(0x19c)](_0x56415b[_0x4dd457(0x1be)][_0x4dd457(0x1c2)](async _0xefdbcb=>{const _0x145851=_0x4dd457,_0x256047=await transfers[_0x145851(0x1cc)]([{'$unwind':_0x145851(0x18f)},{'$match':{'product.id_transaction_id':_0xefdbcb[_0x145851(0x1b4)]['valueOf'](),'product.To_invoice':_0xefdbcb[_0x145851(0x18e)]}},{'$project':{'_id':'$product._id','product_name':_0x145851(0x1a2),'product_code':_0x145851(0x197),'quantity_available':_0x145851(0x19e),'warehouse_name':_0x145851(0x1ae),'warehouse_room':'$product.room_names','product_invoice':_0x145851(0x1b3),'invoice':_0x145851(0x1ad),'id_transaction_id':_0x145851(0x191)}}]);console['log'](_0x256047),_0x256047['length']>0x0&&_0x44e21b[_0x145851(0x19f)][_0x56415b['invoice']][_0x145851(0x1ca)](..._0x256047);}));})),_0x5aa0d3[_0x197619(0x1bd)]({'purchases_warehouse':_0x44e21b,'data_sales':_0x44e21b['data_sales'],'data_adjustment':_0x44e21b[_0x197619(0x194)],'data_transfer':_0x44e21b['data_transfer']});}),module[a0_0x451f96(0x1ab)]=router;