function a0_0x4103(){const _0x288059=['\x20documents\x20updated','data_transfer','149140JXKADc','render','monitor','2453088zeuDoM','3oYFVeG','88PLTlqQ','length','message','967204nFuzkz','$product_details.invoice','warehouses','$product.room_names','$sale_product','$sale_product.quantity','invoice','$product.product_code','INCF-52068316','flash','$sale_product.product_code','230KbTJAx','$product_details.product_code','$warehouse_name','status','$product_details.product_stock','$$invoice','$product.product_name','log','$invoice','42cdGtRu','$product','../../models/all_models','/warehouse_monitor','warehouse_data','$sale_product.invoice','Router','100268RDFsNl','$sale_product.room_name','$product_details.product_name','get','push','$product_details._id','$product.new_adjust_qty','data_sales','$sale_product.id_transaction_from','24335BRSwCC','4048967HyxvNq','_id','33921FdaroC','map','aggregate','$product.id_transaction_id','$product.to_quantity','$product_details','12oPDyvF','success','errors','table\x20page','express','$product.to_room_name','$name','$product._id','json','/negative','14800005047429','valueOf','all','data_adjustment','4zdoSup'];a0_0x4103=function(){return _0x288059;};return a0_0x4103();}const a0_0x5c85f4=a0_0x5c03;(function(_0x14bde5,_0x18b56b){const _0x39ab17=a0_0x5c03,_0x4a6326=_0x14bde5();while(!![]){try{const _0x2b581c=parseInt(_0x39ab17(0x109))/0x1*(-parseInt(_0x39ab17(0xda))/0x2)+parseInt(_0x39ab17(0xe1))/0x3*(parseInt(_0x39ab17(0xe5))/0x4)+-parseInt(_0x39ab17(0xdd))/0x5*(parseInt(_0x39ab17(0xf9))/0x6)+-parseInt(_0x39ab17(0x100))/0x7*(-parseInt(_0x39ab17(0xe2))/0x8)+-parseInt(_0x39ab17(0x10c))/0x9*(-parseInt(_0x39ab17(0xf0))/0xa)+-parseInt(_0x39ab17(0xe0))/0xb*(-parseInt(_0x39ab17(0x112))/0xc)+-parseInt(_0x39ab17(0x10a))/0xd;if(_0x2b581c===_0x18b56b)break;else _0x4a6326['push'](_0x4a6326['shift']());}catch(_0x432cd7){_0x4a6326['push'](_0x4a6326['shift']());}}}(a0_0x4103,0x22367));function a0_0x5c03(_0x59caf9,_0x2f7253){const _0x410388=a0_0x4103();return a0_0x5c03=function(_0x5c0387,_0x1810ae){_0x5c0387=_0x5c0387-0xd7;let _0xc78f59=_0x410388[_0x5c0387];return _0xc78f59;},a0_0x5c03(_0x59caf9,_0x2f7253);}const express=require(a0_0x5c85f4(0x116)),app=express(),router=express[a0_0x5c85f4(0xff)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x5c85f4(0xfb));router[a0_0x5c85f4(0x103)](a0_0x5c85f4(0x11b),async(_0x357709,_0x2d22ad)=>{const _0x5ac2bd=a0_0x5c85f4;try{const _0x5b21b5=await warehouse['updateMany']({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x2d22ad[_0x5ac2bd(0x11a)]({'status':_0x5b21b5['modifiedCount']+_0x5ac2bd(0xdb)});}catch(_0x59e995){console['log'](_0x5ac2bd(0x115),_0x59e995),_0x2d22ad[_0x5ac2bd(0xf3)](0xc8)[_0x5ac2bd(0x11a)]({'message':_0x59e995[_0x5ac2bd(0xe4)]});}}),router[a0_0x5c85f4(0x103)]('/checking',async(_0x4479c5,_0x26ef06)=>{const _0x51d88e=a0_0x5c85f4;try{const _0x265151=await warehouse[_0x51d88e(0x10e)]([{'$unwind':_0x51d88e(0x111)},{'$match':{'product_details.invoice':_0x51d88e(0xed),'product_details.primary_code':_0x51d88e(0x11c)}},{'$group':{'_id':{'name':_0x51d88e(0x118),'room':'$room'},'products':{'$push':_0x51d88e(0x111)}}}]);_0x26ef06['json'](_0x265151);}catch(_0x578ea0){console[_0x51d88e(0xf7)](_0x51d88e(0x115),_0x578ea0),_0x26ef06[_0x51d88e(0xf3)](0xc8)[_0x51d88e(0x11a)]({'message':_0x578ea0[_0x51d88e(0xe4)]});}}),router[a0_0x5c85f4(0x103)](a0_0x5c85f4(0xfc),async(_0xd3b108,_0x21335b)=>{const _0x3cdd34=a0_0x5c85f4;_0x21335b[_0x3cdd34(0xde)](_0x3cdd34(0xdf),{'success':_0xd3b108[_0x3cdd34(0xee)](_0x3cdd34(0x113)),'errors':_0xd3b108[_0x3cdd34(0xee)](_0x3cdd34(0x114))});}),router[a0_0x5c85f4(0x103)]('/join',async(_0x2a23b8,_0x20666d)=>{const _0x1e4050=a0_0x5c85f4;var _0xb82366=await purchases[_0x1e4050(0x10e)]([{'$lookup':{'from':_0x1e4050(0xe7),'let':{'invoice':_0x1e4050(0xf8)},'pipeline':[{'$unwind':_0x1e4050(0x111)},{'$match':{'$expr':{'$eq':[_0x1e4050(0xf5),'$product_details.invoice']}}},{'$project':{'_id':_0x1e4050(0x105),'product_name':_0x1e4050(0x102),'product_code':_0x1e4050(0xf1),'quantity_available':_0x1e4050(0xf4),'warehouse_name':'$name','warehouse_room':'$room','invoice':_0x1e4050(0xe6)}}],'as':'warehouse_data'}}]);_0xb82366[_0x1e4050(0x107)]={},await Promise[_0x1e4050(0xd8)](_0xb82366[_0x1e4050(0x10d)](async _0x5d68c2=>{const _0x258527=_0x1e4050;_0xb82366['data_sales'][_0x5d68c2[_0x258527(0xeb)]]=[],await Promise[_0x258527(0xd8)](_0x5d68c2['warehouse_data']['map'](async _0x390ae6=>{const _0xae120=_0x258527,_0x46870b=await sales[_0xae120(0x10e)]([{'$unwind':_0xae120(0xe9)},{'$match':{'sale_product.id_transaction_from':_0x390ae6['_id'][_0xae120(0xd7)](),'sale_product.invoice':_0x390ae6['invoice']}},{'$project':{'_id':'$sale_product._id','product_name':'$sale_product.product_name','product_code':_0xae120(0xef),'quantity_available':_0xae120(0xea),'warehouse_name':_0xae120(0xf2),'warehouse_room':_0xae120(0x101),'product_invoice':_0xae120(0xfe),'invoice':'$invoice','id_transaction_from':_0xae120(0x108)}}]);_0x46870b[_0xae120(0xe3)]>0x0&&_0xb82366[_0xae120(0x107)][_0x5d68c2['invoice']][_0xae120(0x104)](..._0x46870b);}));})),_0xb82366['data_sales']=_0xb82366[_0x1e4050(0x107)],_0xb82366[_0x1e4050(0xd9)]={},await Promise[_0x1e4050(0xd8)](_0xb82366['map'](async _0xcdb80a=>{const _0xe9ce4e=_0x1e4050;_0xb82366[_0xe9ce4e(0xd9)][_0xcdb80a[_0xe9ce4e(0xeb)]]=[],await Promise[_0xe9ce4e(0xd8)](_0xcdb80a['warehouse_data'][_0xe9ce4e(0x10d)](async _0x5460b8=>{const _0x7aa066=_0xe9ce4e,_0x515d88=await adjustment[_0x7aa066(0x10e)]([{'$unwind':_0x7aa066(0xfa)},{'$match':{'product.id_transaction_from':_0x5460b8[_0x7aa066(0x10b)][_0x7aa066(0xd7)](),'product.invoice':_0x5460b8[_0x7aa066(0xeb)]}},{'$project':{'_id':_0x7aa066(0x119),'product_name':_0x7aa066(0xf6),'product_code':_0x7aa066(0xec),'quantity_available':_0x7aa066(0x106),'warehouse_name':_0x7aa066(0xf2),'warehouse_room':_0x7aa066(0xe8),'product_invoice':'$product.invoice','invoice':'$invoice','id_transaction_from':'$product.id_transaction_from'}}]);_0x515d88[_0x7aa066(0xe3)]>0x0&&_0xb82366[_0x7aa066(0xd9)][_0xcdb80a['invoice']][_0x7aa066(0x104)](..._0x515d88);}));})),_0xb82366[_0x1e4050(0xdc)]={},await Promise[_0x1e4050(0xd8)](_0xb82366['map'](async _0xe9ef15=>{const _0x53eaf3=_0x1e4050;_0xb82366[_0x53eaf3(0xdc)][_0xe9ef15[_0x53eaf3(0xeb)]]=[],await Promise[_0x53eaf3(0xd8)](_0xe9ef15[_0x53eaf3(0xfd)][_0x53eaf3(0x10d)](async _0x2c4dca=>{const _0x32cbc1=_0x53eaf3,_0x28baf7=await transfers[_0x32cbc1(0x10e)]([{'$unwind':_0x32cbc1(0xfa)},{'$match':{'product.id_transaction_id':_0x2c4dca[_0x32cbc1(0x10b)][_0x32cbc1(0xd7)](),'product.To_invoice':_0x2c4dca[_0x32cbc1(0xeb)]}},{'$project':{'_id':_0x32cbc1(0x119),'product_name':_0x32cbc1(0xf6),'product_code':_0x32cbc1(0xec),'quantity_available':_0x32cbc1(0x110),'warehouse_name':'$to_warehouse','warehouse_room':'$product.room_names','product_invoice':_0x32cbc1(0x117),'invoice':_0x32cbc1(0xf8),'id_transaction_id':_0x32cbc1(0x10f)}}]);console[_0x32cbc1(0xf7)](_0x28baf7),_0x28baf7[_0x32cbc1(0xe3)]>0x0&&_0xb82366[_0x32cbc1(0xdc)][_0xe9ef15[_0x32cbc1(0xeb)]]['push'](..._0x28baf7);}));})),_0x20666d['json']({'purchases_warehouse':_0xb82366,'data_sales':_0xb82366[_0x1e4050(0x107)],'data_adjustment':_0xb82366[_0x1e4050(0xd9)],'data_transfer':_0xb82366[_0x1e4050(0xdc)]});}),module['exports']=router;