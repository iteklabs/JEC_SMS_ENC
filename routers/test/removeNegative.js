function a0_0x1f71(_0xb957ce,_0x41f95f){const _0x11a511=a0_0x11a5();return a0_0x1f71=function(_0x1f7155,_0x2e35e5){_0x1f7155=_0x1f7155-0x1cf;let _0x1674d0=_0x11a511[_0x1f7155];return _0x1674d0;},a0_0x1f71(_0xb957ce,_0x41f95f);}const a0_0x3d0a6f=a0_0x1f71;function a0_0x11a5(){const _0x2eeda8=['render','22lzAIoW','$product.room_names','all','/negative','flash','invoice','monitor','$sale_product.room_name','$name','aggregate','$product_details','14800005047429','$sale_product','json','valueOf','_id','express','exports','24VcXpOx','table\x20page','$product_details.product_name','598496gTksnN','$sale_product.id_transaction_from','$room','$sale_product.product_code','885486CnSzyL','/warehouse_monitor','Router','439789saSqgu','$product.new_adjust_qty','data_sales','$warehouse_name','$product.to_quantity','10966977Ufflsh','$product.product_name','data_adjustment','$product','warehouses','success','message','$product_details.invoice','1198050YVqKUf','errors','warehouse_data','get','updateMany','log','$invoice','$$invoice','$product.product_code','status','$sale_product.product_name','321370gWhsrX','modifiedCount','push','data_transfer','$product.invoice','$sale_product._id','90972hYqZpN','length','$sale_product.invoice','map','$product_details.product_stock','$to_warehouse','$product.to_room_name'];a0_0x11a5=function(){return _0x2eeda8;};return a0_0x11a5();}(function(_0x2b307e,_0x5db84e){const _0x22ca60=a0_0x1f71,_0x4ab687=_0x2b307e();while(!![]){try{const _0x240f0e=-parseInt(_0x22ca60(0x1e0))/0x1+parseInt(_0x22ca60(0x209))/0x2*(-parseInt(_0x22ca60(0x201))/0x3)+parseInt(_0x22ca60(0x1dc))/0x4+parseInt(_0x22ca60(0x1fb))/0x5+parseInt(_0x22ca60(0x1f0))/0x6+-parseInt(_0x22ca60(0x1e3))/0x7*(-parseInt(_0x22ca60(0x1d9))/0x8)+parseInt(_0x22ca60(0x1e8))/0x9;if(_0x240f0e===_0x5db84e)break;else _0x4ab687['push'](_0x4ab687['shift']());}catch(_0x2a86b0){_0x4ab687['push'](_0x4ab687['shift']());}}}(a0_0x11a5,0x92dd5));const express=require(a0_0x3d0a6f(0x1d7)),app=express(),router=express[a0_0x3d0a6f(0x1e2)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');router[a0_0x3d0a6f(0x1f3)](a0_0x3d0a6f(0x20c),async(_0x214813,_0x2ae9b5)=>{const _0x2c441f=a0_0x3d0a6f;try{const _0x4c5246=await warehouse[_0x2c441f(0x1f4)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x2ae9b5[_0x2c441f(0x1d4)]({'status':_0x4c5246[_0x2c441f(0x1fc)]+'\x20documents\x20updated'});}catch(_0x254f51){console['log'](_0x2c441f(0x1da),_0x254f51),_0x2ae9b5[_0x2c441f(0x1f9)](0xc8)['json']({'message':_0x254f51['message']});}}),router['get']('/checking',async(_0x53b0c6,_0x394c67)=>{const _0x516332=a0_0x3d0a6f;try{const _0x4350be=await warehouse['aggregate']([{'$unwind':_0x516332(0x1d1)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':_0x516332(0x1d2)}},{'$group':{'_id':{'name':_0x516332(0x1cf),'room':_0x516332(0x1de)},'products':{'$push':_0x516332(0x1d1)}}}]);_0x394c67['json'](_0x4350be);}catch(_0x2e274f){console['log'](_0x516332(0x1da),_0x2e274f),_0x394c67['status'](0xc8)[_0x516332(0x1d4)]({'message':_0x2e274f[_0x516332(0x1ee)]});}}),router[a0_0x3d0a6f(0x1f3)](a0_0x3d0a6f(0x1e1),async(_0x410cef,_0x7bcc71)=>{const _0x4f2f7a=a0_0x3d0a6f;_0x7bcc71[_0x4f2f7a(0x208)](_0x4f2f7a(0x20f),{'success':_0x410cef[_0x4f2f7a(0x20d)](_0x4f2f7a(0x1ed)),'errors':_0x410cef[_0x4f2f7a(0x20d)](_0x4f2f7a(0x1f1))});}),router[a0_0x3d0a6f(0x1f3)]('/join',async(_0x1c028e,_0x1bed25)=>{const _0x3b1322=a0_0x3d0a6f;var _0x2a46e5=await purchases['aggregate']([{'$lookup':{'from':_0x3b1322(0x1ec),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x3b1322(0x1d1)},{'$match':{'$expr':{'$eq':[_0x3b1322(0x1f7),_0x3b1322(0x1ef)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x3b1322(0x1db),'product_code':'$product_details.product_code','quantity_available':_0x3b1322(0x205),'warehouse_name':'$name','warehouse_room':'$room','invoice':'$product_details.invoice'}}],'as':'warehouse_data'}}]);_0x2a46e5[_0x3b1322(0x1e5)]={},await Promise['all'](_0x2a46e5[_0x3b1322(0x204)](async _0x645d8=>{const _0xef52a1=_0x3b1322;_0x2a46e5[_0xef52a1(0x1e5)][_0x645d8[_0xef52a1(0x20e)]]=[],await Promise[_0xef52a1(0x20b)](_0x645d8['warehouse_data']['map'](async _0x310362=>{const _0x47ccaf=_0xef52a1,_0x4b4236=await sales[_0x47ccaf(0x1d0)]([{'$unwind':_0x47ccaf(0x1d3)},{'$match':{'sale_product.id_transaction_from':_0x310362[_0x47ccaf(0x1d6)][_0x47ccaf(0x1d5)](),'sale_product.invoice':_0x310362[_0x47ccaf(0x20e)]}},{'$project':{'_id':_0x47ccaf(0x200),'product_name':_0x47ccaf(0x1fa),'product_code':_0x47ccaf(0x1df),'quantity_available':'$sale_product.quantity','warehouse_name':_0x47ccaf(0x1e6),'warehouse_room':_0x47ccaf(0x210),'product_invoice':_0x47ccaf(0x203),'invoice':_0x47ccaf(0x1f6),'id_transaction_from':_0x47ccaf(0x1dd)}}]);_0x4b4236[_0x47ccaf(0x202)]>0x0&&_0x2a46e5[_0x47ccaf(0x1e5)][_0x645d8['invoice']]['push'](..._0x4b4236);}));})),_0x2a46e5[_0x3b1322(0x1e5)]=_0x2a46e5[_0x3b1322(0x1e5)],_0x2a46e5[_0x3b1322(0x1ea)]={},await Promise[_0x3b1322(0x20b)](_0x2a46e5[_0x3b1322(0x204)](async _0xcca802=>{const _0x3f1b1a=_0x3b1322;_0x2a46e5['data_adjustment'][_0xcca802[_0x3f1b1a(0x20e)]]=[],await Promise[_0x3f1b1a(0x20b)](_0xcca802[_0x3f1b1a(0x1f2)][_0x3f1b1a(0x204)](async _0xf0fc26=>{const _0x864c60=_0x3f1b1a,_0x5b82e7=await adjustment[_0x864c60(0x1d0)]([{'$unwind':_0x864c60(0x1eb)},{'$match':{'product.id_transaction_from':_0xf0fc26[_0x864c60(0x1d6)]['valueOf'](),'product.invoice':_0xf0fc26[_0x864c60(0x20e)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0x864c60(0x1f8),'quantity_available':_0x864c60(0x1e4),'warehouse_name':_0x864c60(0x1e6),'warehouse_room':_0x864c60(0x20a),'product_invoice':_0x864c60(0x1ff),'invoice':'$invoice','id_transaction_from':'$product.id_transaction_from'}}]);_0x5b82e7[_0x864c60(0x202)]>0x0&&_0x2a46e5['data_adjustment'][_0xcca802['invoice']][_0x864c60(0x1fd)](..._0x5b82e7);}));})),_0x2a46e5[_0x3b1322(0x1fe)]={},await Promise[_0x3b1322(0x20b)](_0x2a46e5[_0x3b1322(0x204)](async _0x176b97=>{const _0x3a0309=_0x3b1322;_0x2a46e5[_0x3a0309(0x1fe)][_0x176b97['invoice']]=[],await Promise[_0x3a0309(0x20b)](_0x176b97[_0x3a0309(0x1f2)]['map'](async _0x5e13bb=>{const _0x21a089=_0x3a0309,_0x46bb05=await transfers[_0x21a089(0x1d0)]([{'$unwind':_0x21a089(0x1eb)},{'$match':{'product.id_transaction_id':_0x5e13bb['_id'][_0x21a089(0x1d5)](),'product.To_invoice':_0x5e13bb['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x21a089(0x1e9),'product_code':_0x21a089(0x1f8),'quantity_available':_0x21a089(0x1e7),'warehouse_name':_0x21a089(0x206),'warehouse_room':_0x21a089(0x20a),'product_invoice':_0x21a089(0x207),'invoice':_0x21a089(0x1f6),'id_transaction_id':'$product.id_transaction_id'}}]);console[_0x21a089(0x1f5)](_0x46bb05),_0x46bb05[_0x21a089(0x202)]>0x0&&_0x2a46e5[_0x21a089(0x1fe)][_0x176b97[_0x21a089(0x20e)]]['push'](..._0x46bb05);}));})),_0x1bed25['json']({'purchases_warehouse':_0x2a46e5,'data_sales':_0x2a46e5[_0x3b1322(0x1e5)],'data_adjustment':_0x2a46e5[_0x3b1322(0x1ea)],'data_transfer':_0x2a46e5[_0x3b1322(0x1fe)]});}),module[a0_0x3d0a6f(0x1d8)]=router;