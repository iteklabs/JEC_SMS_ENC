function a0_0x296a(_0x8e2e9f,_0x39f0b4){const _0x48628f=a0_0x4862();return a0_0x296a=function(_0x296a03,_0x3ce353){_0x296a03=_0x296a03-0x148;let _0x4260a0=_0x48628f[_0x296a03];return _0x4260a0;},a0_0x296a(_0x8e2e9f,_0x39f0b4);}const a0_0x2ba986=a0_0x296a;(function(_0x44f589,_0x2a030d){const _0x2e25c5=a0_0x296a,_0x2b14ec=_0x44f589();while(!![]){try{const _0x12560f=-parseInt(_0x2e25c5(0x14e))/0x1+-parseInt(_0x2e25c5(0x161))/0x2*(-parseInt(_0x2e25c5(0x16d))/0x3)+-parseInt(_0x2e25c5(0x160))/0x4+parseInt(_0x2e25c5(0x156))/0x5+parseInt(_0x2e25c5(0x17a))/0x6*(-parseInt(_0x2e25c5(0x16f))/0x7)+-parseInt(_0x2e25c5(0x18a))/0x8*(parseInt(_0x2e25c5(0x15a))/0x9)+parseInt(_0x2e25c5(0x165))/0xa;if(_0x12560f===_0x2a030d)break;else _0x2b14ec['push'](_0x2b14ec['shift']());}catch(_0x531080){_0x2b14ec['push'](_0x2b14ec['shift']());}}}(a0_0x4862,0xf0abf));const express=require('express'),app=express(),router=express[a0_0x2ba986(0x159)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x2ba986(0x155));function a0_0x4862(){const _0x535528=['aggregate','exports','18lJvXgw','success','json','map','monitor','valueOf','data_adjustment','$sale_product.quantity','data_transfer','$name','$product.invoice','$$invoice','table\x20page','$product_details.product_code','status','$product.to_quantity','16GLOqyq','$product.id_transaction_from','push','flash','/warehouse_monitor','$product_details._id','/join','1443873ScSNtI','$product.id_transaction_id','$product_details.invoice','$product.new_adjust_qty','all','render','warehouse_data','../../models/all_models','9211020XhcEAX','data_sales','updateMany','Router','6825933WNuYOV','$sale_product.product_code','modifiedCount','$product_details','$product.to_room_name','length','3734000ewhktn','16BjGycN','warehouses','$sale_product.invoice','$product_details.product_stock','30198390yuZXba','invoice','$product.product_code','$warehouse_name','$product.product_name','/negative','log','$room','704625xCEhND','$to_warehouse','4342345uGHKbP','get','errors','$sale_product.product_name','$product.room_names','$invoice','$sale_product._id','message','$sale_product.id_transaction_from'];a0_0x4862=function(){return _0x535528;};return a0_0x4862();}router[a0_0x2ba986(0x170)](a0_0x2ba986(0x16a),async(_0x35f877,_0x597970)=>{const _0x43418a=a0_0x2ba986;try{const _0x800471=await warehouse[_0x43418a(0x158)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x597970['json']({'status':_0x800471[_0x43418a(0x15c)]+'\x20documents\x20updated'});}catch(_0x39500d){console['log'](_0x43418a(0x186),_0x39500d),_0x597970[_0x43418a(0x188)](0xc8)[_0x43418a(0x17c)]({'message':_0x39500d[_0x43418a(0x176)]});}}),router[a0_0x2ba986(0x170)]('/checking',async(_0x4d117b,_0x1c7260)=>{const _0x3aef4c=a0_0x2ba986;try{const _0x1ccc0e=await warehouse[_0x3aef4c(0x178)]([{'$unwind':_0x3aef4c(0x15d)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x3aef4c(0x183),'room':'$room'},'products':{'$push':_0x3aef4c(0x15d)}}}]);_0x1c7260[_0x3aef4c(0x17c)](_0x1ccc0e);}catch(_0x5da250){console[_0x3aef4c(0x16b)](_0x3aef4c(0x186),_0x5da250),_0x1c7260[_0x3aef4c(0x188)](0xc8)[_0x3aef4c(0x17c)]({'message':_0x5da250[_0x3aef4c(0x176)]});}}),router[a0_0x2ba986(0x170)](a0_0x2ba986(0x14b),async(_0x2a9962,_0x1c6292)=>{const _0x37637e=a0_0x2ba986;_0x1c6292[_0x37637e(0x153)](_0x37637e(0x17e),{'success':_0x2a9962['flash'](_0x37637e(0x17b)),'errors':_0x2a9962[_0x37637e(0x14a)](_0x37637e(0x171))});}),router[a0_0x2ba986(0x170)](a0_0x2ba986(0x14d),async(_0x36257a,_0x397fa7)=>{const _0x22e571=a0_0x2ba986;var _0x102c24=await purchases[_0x22e571(0x178)]([{'$lookup':{'from':_0x22e571(0x162),'let':{'invoice':_0x22e571(0x174)},'pipeline':[{'$unwind':_0x22e571(0x15d)},{'$match':{'$expr':{'$eq':[_0x22e571(0x185),_0x22e571(0x150)]}}},{'$project':{'_id':_0x22e571(0x14c),'product_name':'$product_details.product_name','product_code':_0x22e571(0x187),'quantity_available':_0x22e571(0x164),'warehouse_name':'$name','warehouse_room':_0x22e571(0x16c),'invoice':_0x22e571(0x150)}}],'as':_0x22e571(0x154)}}]);_0x102c24[_0x22e571(0x157)]={},await Promise[_0x22e571(0x152)](_0x102c24[_0x22e571(0x17d)](async _0x16c810=>{const _0x4f08f3=_0x22e571;_0x102c24[_0x4f08f3(0x157)][_0x16c810[_0x4f08f3(0x166)]]=[],await Promise['all'](_0x16c810[_0x4f08f3(0x154)][_0x4f08f3(0x17d)](async _0x20d97c=>{const _0xf54c64=_0x4f08f3,_0x4cd37b=await sales['aggregate']([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x20d97c['_id']['valueOf'](),'sale_product.invoice':_0x20d97c[_0xf54c64(0x166)]}},{'$project':{'_id':_0xf54c64(0x175),'product_name':_0xf54c64(0x172),'product_code':_0xf54c64(0x15b),'quantity_available':_0xf54c64(0x181),'warehouse_name':'$warehouse_name','warehouse_room':'$sale_product.room_name','product_invoice':_0xf54c64(0x163),'invoice':_0xf54c64(0x174),'id_transaction_from':_0xf54c64(0x177)}}]);_0x4cd37b['length']>0x0&&_0x102c24['data_sales'][_0x16c810[_0xf54c64(0x166)]][_0xf54c64(0x149)](..._0x4cd37b);}));})),_0x102c24['data_sales']=_0x102c24[_0x22e571(0x157)],_0x102c24[_0x22e571(0x180)]={},await Promise['all'](_0x102c24['map'](async _0x469e42=>{const _0x835b89=_0x22e571;_0x102c24[_0x835b89(0x180)][_0x469e42[_0x835b89(0x166)]]=[],await Promise['all'](_0x469e42[_0x835b89(0x154)][_0x835b89(0x17d)](async _0x8b04f5=>{const _0x503adb=_0x835b89,_0x2db6c2=await adjustment[_0x503adb(0x178)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x8b04f5['_id'][_0x503adb(0x17f)](),'product.invoice':_0x8b04f5[_0x503adb(0x166)]}},{'$project':{'_id':'$product._id','product_name':_0x503adb(0x169),'product_code':'$product.product_code','quantity_available':_0x503adb(0x151),'warehouse_name':_0x503adb(0x168),'warehouse_room':'$product.room_names','product_invoice':_0x503adb(0x184),'invoice':'$invoice','id_transaction_from':_0x503adb(0x148)}}]);_0x2db6c2['length']>0x0&&_0x102c24['data_adjustment'][_0x469e42[_0x503adb(0x166)]][_0x503adb(0x149)](..._0x2db6c2);}));})),_0x102c24[_0x22e571(0x182)]={},await Promise[_0x22e571(0x152)](_0x102c24[_0x22e571(0x17d)](async _0x4ec083=>{const _0x4bf402=_0x22e571;_0x102c24['data_transfer'][_0x4ec083[_0x4bf402(0x166)]]=[],await Promise[_0x4bf402(0x152)](_0x4ec083[_0x4bf402(0x154)]['map'](async _0x23a1b6=>{const _0x2ab358=_0x4bf402,_0x448877=await transfers[_0x2ab358(0x178)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x23a1b6['_id'][_0x2ab358(0x17f)](),'product.To_invoice':_0x23a1b6[_0x2ab358(0x166)]}},{'$project':{'_id':'$product._id','product_name':_0x2ab358(0x169),'product_code':_0x2ab358(0x167),'quantity_available':_0x2ab358(0x189),'warehouse_name':_0x2ab358(0x16e),'warehouse_room':_0x2ab358(0x173),'product_invoice':_0x2ab358(0x15e),'invoice':_0x2ab358(0x174),'id_transaction_id':_0x2ab358(0x14f)}}]);console['log'](_0x448877),_0x448877[_0x2ab358(0x15f)]>0x0&&_0x102c24[_0x2ab358(0x182)][_0x4ec083[_0x2ab358(0x166)]]['push'](..._0x448877);}));})),_0x397fa7[_0x22e571(0x17c)]({'purchases_warehouse':_0x102c24,'data_sales':_0x102c24[_0x22e571(0x157)],'data_adjustment':_0x102c24[_0x22e571(0x180)],'data_transfer':_0x102c24['data_transfer']});}),module[a0_0x2ba986(0x179)]=router;