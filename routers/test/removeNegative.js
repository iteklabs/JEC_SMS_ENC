function a0_0x5452(_0x5c533,_0x1f17b8){const _0x3f0ee6=a0_0x3f0e();return a0_0x5452=function(_0x545259,_0x39a80e){_0x545259=_0x545259-0xa0;let _0x412623=_0x3f0ee6[_0x545259];return _0x412623;},a0_0x5452(_0x5c533,_0x1f17b8);}function a0_0x3f0e(){const _0x1837f2=['\x20documents\x20updated','$product_details','$$invoice','table\x20page','1012xpoTHF','updateMany','$sale_product.invoice','invoice','861865yFPruX','valueOf','599753gVYuqS','status','14800005047429','/join','exports','12ANLtyX','90mzXgnx','_id','$sale_product.quantity','1658120Eevudj','data_sales','$product_details._id','$product.product_code','$sale_product._id','json','data_adjustment','data_transfer','$product.invoice','flash','$product_details.product_name','warehouses','$product.id_transaction_from','212122YZFWtI','$product.room_names','message','$sale_product.room_name','$product.product_name','monitor','warehouse_data','$product','aggregate','588nKdnPX','map','$product._id','length','$warehouse_name','$sale_product.product_name','/negative','modifiedCount','1059gICeeM','1wbiSPt','$product.new_adjust_qty','INCF-52068316','$sale_product.product_code','render','express','/checking','$product.to_room_name','get','$invoice','../../models/all_models','all','86556JaLTIh','$room','$name','log','398608wvMLtI','push','Router','success','$sale_product.id_transaction_from','$product_details.product_code','$product_details.product_stock'];a0_0x3f0e=function(){return _0x1837f2;};return a0_0x3f0e();}const a0_0x379974=a0_0x5452;(function(_0x13f03a,_0x5e4d2f){const _0x318e15=a0_0x5452,_0x2564bf=_0x13f03a();while(!![]){try{const _0x1a5c9d=-parseInt(_0x318e15(0xdd))/0x1*(-parseInt(_0x318e15(0xcb))/0x2)+parseInt(_0x318e15(0xdc))/0x3*(parseInt(_0x318e15(0xd4))/0x4)+parseInt(_0x318e15(0xb3))/0x5+-parseInt(_0x318e15(0xba))/0x6*(-parseInt(_0x318e15(0xb5))/0x7)+parseInt(_0x318e15(0xa4))/0x8*(-parseInt(_0x318e15(0xbb))/0x9)+-parseInt(_0x318e15(0xbe))/0xa+parseInt(_0x318e15(0xaf))/0xb*(parseInt(_0x318e15(0xa0))/0xc);if(_0x1a5c9d===_0x5e4d2f)break;else _0x2564bf['push'](_0x2564bf['shift']());}catch(_0x17b944){_0x2564bf['push'](_0x2564bf['shift']());}}}(a0_0x3f0e,0x7a5d7));const express=require(a0_0x379974(0xe2)),app=express(),router=express[a0_0x379974(0xa6)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x379974(0xe7));router[a0_0x379974(0xe5)](a0_0x379974(0xda),async(_0x5530eb,_0x2c2339)=>{const _0x1446c4=a0_0x379974;try{const _0x4f0395=await warehouse[_0x1446c4(0xb0)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x2c2339[_0x1446c4(0xc3)]({'status':_0x4f0395[_0x1446c4(0xdb)]+_0x1446c4(0xab)});}catch(_0x28901f){console['log']('table\x20page',_0x28901f),_0x2c2339[_0x1446c4(0xb6)](0xc8)[_0x1446c4(0xc3)]({'message':_0x28901f[_0x1446c4(0xcd)]});}}),router[a0_0x379974(0xe5)](a0_0x379974(0xe3),async(_0x3a5e27,_0x288665)=>{const _0xbbbd29=a0_0x379974;try{const _0x31e1cf=await warehouse[_0xbbbd29(0xd3)]([{'$unwind':_0xbbbd29(0xac)},{'$match':{'product_details.invoice':_0xbbbd29(0xdf),'product_details.primary_code':_0xbbbd29(0xb7)}},{'$group':{'_id':{'name':'$name','room':_0xbbbd29(0xa1)},'products':{'$push':'$product_details'}}}]);_0x288665[_0xbbbd29(0xc3)](_0x31e1cf);}catch(_0x2a069b){console[_0xbbbd29(0xa3)](_0xbbbd29(0xae),_0x2a069b),_0x288665[_0xbbbd29(0xb6)](0xc8)[_0xbbbd29(0xc3)]({'message':_0x2a069b[_0xbbbd29(0xcd)]});}}),router[a0_0x379974(0xe5)]('/warehouse_monitor',async(_0x2fa973,_0x2479f6)=>{const _0x14fcfd=a0_0x379974;_0x2479f6[_0x14fcfd(0xe1)](_0x14fcfd(0xd0),{'success':_0x2fa973['flash'](_0x14fcfd(0xa7)),'errors':_0x2fa973[_0x14fcfd(0xc7)]('errors')});}),router['get'](a0_0x379974(0xb8),async(_0x378e6a,_0x40b827)=>{const _0xa24cba=a0_0x379974;var _0x5c4d7f=await purchases[_0xa24cba(0xd3)]([{'$lookup':{'from':_0xa24cba(0xc9),'let':{'invoice':_0xa24cba(0xe6)},'pipeline':[{'$unwind':_0xa24cba(0xac)},{'$match':{'$expr':{'$eq':[_0xa24cba(0xad),'$product_details.invoice']}}},{'$project':{'_id':_0xa24cba(0xc0),'product_name':_0xa24cba(0xc8),'product_code':_0xa24cba(0xa9),'quantity_available':_0xa24cba(0xaa),'warehouse_name':_0xa24cba(0xa2),'warehouse_room':'$room','invoice':'$product_details.invoice'}}],'as':_0xa24cba(0xd1)}}]);_0x5c4d7f[_0xa24cba(0xbf)]={},await Promise[_0xa24cba(0xe8)](_0x5c4d7f['map'](async _0x458dd7=>{const _0x213722=_0xa24cba;_0x5c4d7f[_0x213722(0xbf)][_0x458dd7['invoice']]=[],await Promise[_0x213722(0xe8)](_0x458dd7[_0x213722(0xd1)]['map'](async _0x40a766=>{const _0x5d6766=_0x213722,_0x1e6d84=await sales[_0x5d6766(0xd3)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x40a766['_id'][_0x5d6766(0xb4)](),'sale_product.invoice':_0x40a766['invoice']}},{'$project':{'_id':_0x5d6766(0xc2),'product_name':_0x5d6766(0xd9),'product_code':_0x5d6766(0xe0),'quantity_available':_0x5d6766(0xbd),'warehouse_name':_0x5d6766(0xd8),'warehouse_room':_0x5d6766(0xce),'product_invoice':_0x5d6766(0xb1),'invoice':_0x5d6766(0xe6),'id_transaction_from':_0x5d6766(0xa8)}}]);_0x1e6d84[_0x5d6766(0xd7)]>0x0&&_0x5c4d7f[_0x5d6766(0xbf)][_0x458dd7['invoice']][_0x5d6766(0xa5)](..._0x1e6d84);}));})),_0x5c4d7f['data_sales']=_0x5c4d7f['data_sales'],_0x5c4d7f['data_adjustment']={},await Promise[_0xa24cba(0xe8)](_0x5c4d7f[_0xa24cba(0xd5)](async _0x581159=>{const _0x2a81e7=_0xa24cba;_0x5c4d7f[_0x2a81e7(0xc4)][_0x581159['invoice']]=[],await Promise['all'](_0x581159[_0x2a81e7(0xd1)]['map'](async _0x34a0e8=>{const _0x3588c7=_0x2a81e7,_0x348b76=await adjustment[_0x3588c7(0xd3)]([{'$unwind':_0x3588c7(0xd2)},{'$match':{'product.id_transaction_from':_0x34a0e8[_0x3588c7(0xbc)][_0x3588c7(0xb4)](),'product.invoice':_0x34a0e8['invoice']}},{'$project':{'_id':_0x3588c7(0xd6),'product_name':_0x3588c7(0xcf),'product_code':_0x3588c7(0xc1),'quantity_available':_0x3588c7(0xde),'warehouse_name':_0x3588c7(0xd8),'warehouse_room':_0x3588c7(0xcc),'product_invoice':_0x3588c7(0xc6),'invoice':_0x3588c7(0xe6),'id_transaction_from':_0x3588c7(0xca)}}]);_0x348b76[_0x3588c7(0xd7)]>0x0&&_0x5c4d7f[_0x3588c7(0xc4)][_0x581159['invoice']][_0x3588c7(0xa5)](..._0x348b76);}));})),_0x5c4d7f['data_transfer']={},await Promise[_0xa24cba(0xe8)](_0x5c4d7f[_0xa24cba(0xd5)](async _0x11fcef=>{const _0x416927=_0xa24cba;_0x5c4d7f[_0x416927(0xc5)][_0x11fcef[_0x416927(0xb2)]]=[],await Promise[_0x416927(0xe8)](_0x11fcef[_0x416927(0xd1)]['map'](async _0x369b1a=>{const _0x18d820=_0x416927,_0x4e23d1=await transfers[_0x18d820(0xd3)]([{'$unwind':_0x18d820(0xd2)},{'$match':{'product.id_transaction_id':_0x369b1a[_0x18d820(0xbc)][_0x18d820(0xb4)](),'product.To_invoice':_0x369b1a[_0x18d820(0xb2)]}},{'$project':{'_id':_0x18d820(0xd6),'product_name':_0x18d820(0xcf),'product_code':'$product.product_code','quantity_available':'$product.to_quantity','warehouse_name':'$to_warehouse','warehouse_room':_0x18d820(0xcc),'product_invoice':_0x18d820(0xe4),'invoice':_0x18d820(0xe6),'id_transaction_id':'$product.id_transaction_id'}}]);console[_0x18d820(0xa3)](_0x4e23d1),_0x4e23d1[_0x18d820(0xd7)]>0x0&&_0x5c4d7f[_0x18d820(0xc5)][_0x11fcef['invoice']][_0x18d820(0xa5)](..._0x4e23d1);}));})),_0x40b827['json']({'purchases_warehouse':_0x5c4d7f,'data_sales':_0x5c4d7f[_0xa24cba(0xbf)],'data_adjustment':_0x5c4d7f[_0xa24cba(0xc4)],'data_transfer':_0x5c4d7f[_0xa24cba(0xc5)]});}),module[a0_0x379974(0xb9)]=router;