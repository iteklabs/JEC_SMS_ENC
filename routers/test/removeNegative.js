function a0_0x34d8(_0x4febdd,_0x4b3083){const _0x2ed042=a0_0x2ed0();return a0_0x34d8=function(_0x34d800,_0x3eed40){_0x34d800=_0x34d800-0x17c;let _0x4eb58e=_0x2ed042[_0x34d800];return _0x4eb58e;},a0_0x34d8(_0x4febdd,_0x4b3083);}function a0_0x2ed0(){const _0x8b6c3c=['flash','$product.new_adjust_qty','json','warehouse_data','274321tnQVvb','updateMany','push','14800005047429','$product_details','log','$to_warehouse','data_transfer','monitor','$sale_product.quantity','/warehouse_monitor','1283800ySenXC','$product._id','448112oGCIjj','$product.invoice','INCF-52068316','all','$warehouse_name','map','Router','$invoice','/join','$sale_product.room_name','message','$sale_product._id','$product_details.product_stock','163704JfVAhx','_id','$product.id_transaction_id','1894753xXoMdw','status','$product.product_code','aggregate','$product_details.product_name','data_sales','1485024jkYHmt','success','$sale_product.product_name','6700552QjJLdE','$product.to_room_name','get','render','invoice','$sale_product.id_transaction_from','express','data_adjustment','$room','$name','../../models/all_models','$sale_product','$product_details.invoice','$product','length','/negative','valueOf','$product.room_names','errors','table\x20page','exports','3SJDTjY','$product.product_name'];a0_0x2ed0=function(){return _0x8b6c3c;};return a0_0x2ed0();}const a0_0x113324=a0_0x34d8;(function(_0x3205d6,_0x1a1125){const _0x33e996=a0_0x34d8,_0xd15f2e=_0x3205d6();while(!![]){try{const _0x5cee94=parseInt(_0x33e996(0x1a1))/0x1+-parseInt(_0x33e996(0x1bb))/0x2+-parseInt(_0x33e996(0x19b))/0x3*(parseInt(_0x33e996(0x1ae))/0x4)+-parseInt(_0x33e996(0x1ac))/0x5+-parseInt(_0x33e996(0x183))/0x6+-parseInt(_0x33e996(0x17d))/0x7+parseInt(_0x33e996(0x186))/0x8;if(_0x5cee94===_0x1a1125)break;else _0xd15f2e['push'](_0xd15f2e['shift']());}catch(_0x420a57){_0xd15f2e['push'](_0xd15f2e['shift']());}}}(a0_0x2ed0,0x22edb));const express=require(a0_0x113324(0x18c)),app=express(),router=express[a0_0x113324(0x1b4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x113324(0x190));router[a0_0x113324(0x188)](a0_0x113324(0x195),async(_0x3b330b,_0x2ef94d)=>{const _0x45c7b2=a0_0x113324;try{const _0x1a4086=await warehouse[_0x45c7b2(0x1a2)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x2ef94d[_0x45c7b2(0x19f)]({'status':_0x1a4086['modifiedCount']+'\x20documents\x20updated'});}catch(_0x5343b3){console[_0x45c7b2(0x1a6)](_0x45c7b2(0x199),_0x5343b3),_0x2ef94d[_0x45c7b2(0x17e)](0xc8)['json']({'message':_0x5343b3[_0x45c7b2(0x1b8)]});}}),router[a0_0x113324(0x188)]('/checking',async(_0x33ff3c,_0x43f6fd)=>{const _0x118407=a0_0x113324;try{const _0x5d1855=await warehouse[_0x118407(0x180)]([{'$unwind':_0x118407(0x1a5)},{'$match':{'product_details.invoice':_0x118407(0x1b0),'product_details.primary_code':_0x118407(0x1a4)}},{'$group':{'_id':{'name':_0x118407(0x18f),'room':_0x118407(0x18e)},'products':{'$push':_0x118407(0x1a5)}}}]);_0x43f6fd[_0x118407(0x19f)](_0x5d1855);}catch(_0x6540ae){console[_0x118407(0x1a6)](_0x118407(0x199),_0x6540ae),_0x43f6fd[_0x118407(0x17e)](0xc8)[_0x118407(0x19f)]({'message':_0x6540ae['message']});}}),router[a0_0x113324(0x188)](a0_0x113324(0x1ab),async(_0x3f81d9,_0x5b2bd2)=>{const _0x5ae056=a0_0x113324;_0x5b2bd2[_0x5ae056(0x189)](_0x5ae056(0x1a9),{'success':_0x3f81d9[_0x5ae056(0x19d)](_0x5ae056(0x184)),'errors':_0x3f81d9[_0x5ae056(0x19d)](_0x5ae056(0x198))});}),router['get'](a0_0x113324(0x1b6),async(_0x1164e8,_0x480e4d)=>{const _0x5af15c=a0_0x113324;var _0x37968d=await purchases[_0x5af15c(0x180)]([{'$lookup':{'from':'warehouses','let':{'invoice':_0x5af15c(0x1b5)},'pipeline':[{'$unwind':_0x5af15c(0x1a5)},{'$match':{'$expr':{'$eq':['$$invoice',_0x5af15c(0x192)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x5af15c(0x181),'product_code':'$product_details.product_code','quantity_available':_0x5af15c(0x1ba),'warehouse_name':'$name','warehouse_room':_0x5af15c(0x18e),'invoice':_0x5af15c(0x192)}}],'as':_0x5af15c(0x1a0)}}]);_0x37968d[_0x5af15c(0x182)]={},await Promise[_0x5af15c(0x1b1)](_0x37968d[_0x5af15c(0x1b3)](async _0x369900=>{const _0x99f03b=_0x5af15c;_0x37968d[_0x99f03b(0x182)][_0x369900[_0x99f03b(0x18a)]]=[],await Promise[_0x99f03b(0x1b1)](_0x369900[_0x99f03b(0x1a0)][_0x99f03b(0x1b3)](async _0x4e4049=>{const _0x1d3c67=_0x99f03b,_0x3ac036=await sales[_0x1d3c67(0x180)]([{'$unwind':_0x1d3c67(0x191)},{'$match':{'sale_product.id_transaction_from':_0x4e4049['_id'][_0x1d3c67(0x196)](),'sale_product.invoice':_0x4e4049[_0x1d3c67(0x18a)]}},{'$project':{'_id':_0x1d3c67(0x1b9),'product_name':_0x1d3c67(0x185),'product_code':'$sale_product.product_code','quantity_available':_0x1d3c67(0x1aa),'warehouse_name':'$warehouse_name','warehouse_room':_0x1d3c67(0x1b7),'product_invoice':'$sale_product.invoice','invoice':_0x1d3c67(0x1b5),'id_transaction_from':_0x1d3c67(0x18b)}}]);_0x3ac036[_0x1d3c67(0x194)]>0x0&&_0x37968d[_0x1d3c67(0x182)][_0x369900[_0x1d3c67(0x18a)]][_0x1d3c67(0x1a3)](..._0x3ac036);}));})),_0x37968d[_0x5af15c(0x182)]=_0x37968d['data_sales'],_0x37968d['data_adjustment']={},await Promise['all'](_0x37968d[_0x5af15c(0x1b3)](async _0x2a5fce=>{const _0xfe493f=_0x5af15c;_0x37968d[_0xfe493f(0x18d)][_0x2a5fce['invoice']]=[],await Promise[_0xfe493f(0x1b1)](_0x2a5fce[_0xfe493f(0x1a0)][_0xfe493f(0x1b3)](async _0x1415ff=>{const _0x247527=_0xfe493f,_0x11c0d6=await adjustment[_0x247527(0x180)]([{'$unwind':_0x247527(0x193)},{'$match':{'product.id_transaction_from':_0x1415ff[_0x247527(0x1bc)][_0x247527(0x196)](),'product.invoice':_0x1415ff['invoice']}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0x247527(0x17f),'quantity_available':_0x247527(0x19e),'warehouse_name':_0x247527(0x1b2),'warehouse_room':_0x247527(0x197),'product_invoice':_0x247527(0x1af),'invoice':_0x247527(0x1b5),'id_transaction_from':'$product.id_transaction_from'}}]);_0x11c0d6[_0x247527(0x194)]>0x0&&_0x37968d[_0x247527(0x18d)][_0x2a5fce[_0x247527(0x18a)]]['push'](..._0x11c0d6);}));})),_0x37968d[_0x5af15c(0x1a8)]={},await Promise[_0x5af15c(0x1b1)](_0x37968d['map'](async _0x41d023=>{const _0x1ad61a=_0x5af15c;_0x37968d[_0x1ad61a(0x1a8)][_0x41d023[_0x1ad61a(0x18a)]]=[],await Promise['all'](_0x41d023[_0x1ad61a(0x1a0)][_0x1ad61a(0x1b3)](async _0x4f5aa3=>{const _0x107ee3=_0x1ad61a,_0x133c87=await transfers['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x4f5aa3[_0x107ee3(0x1bc)]['valueOf'](),'product.To_invoice':_0x4f5aa3[_0x107ee3(0x18a)]}},{'$project':{'_id':_0x107ee3(0x1ad),'product_name':_0x107ee3(0x19c),'product_code':'$product.product_code','quantity_available':'$product.to_quantity','warehouse_name':_0x107ee3(0x1a7),'warehouse_room':'$product.room_names','product_invoice':_0x107ee3(0x187),'invoice':_0x107ee3(0x1b5),'id_transaction_id':_0x107ee3(0x17c)}}]);console[_0x107ee3(0x1a6)](_0x133c87),_0x133c87[_0x107ee3(0x194)]>0x0&&_0x37968d[_0x107ee3(0x1a8)][_0x41d023['invoice']][_0x107ee3(0x1a3)](..._0x133c87);}));})),_0x480e4d['json']({'purchases_warehouse':_0x37968d,'data_sales':_0x37968d['data_sales'],'data_adjustment':_0x37968d['data_adjustment'],'data_transfer':_0x37968d['data_transfer']});}),module[a0_0x113324(0x19a)]=router;