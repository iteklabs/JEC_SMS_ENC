function a0_0x27b7(_0x2e45bb,_0x40492d){const _0x80cd7a=a0_0x80cd();return a0_0x27b7=function(_0x27b7c6,_0x30508e){_0x27b7c6=_0x27b7c6-0x1c0;let _0x18fea0=_0x80cd7a[_0x27b7c6];return _0x18fea0;},a0_0x27b7(_0x2e45bb,_0x40492d);}const a0_0x2ff4d9=a0_0x27b7;(function(_0x444e98,_0x252ade){const _0x4c7e04=a0_0x27b7,_0x3fe0e1=_0x444e98();while(!![]){try{const _0x1e37b0=parseInt(_0x4c7e04(0x1db))/0x1*(parseInt(_0x4c7e04(0x1de))/0x2)+parseInt(_0x4c7e04(0x1ef))/0x3+-parseInt(_0x4c7e04(0x203))/0x4+parseInt(_0x4c7e04(0x200))/0x5*(parseInt(_0x4c7e04(0x1c1))/0x6)+-parseInt(_0x4c7e04(0x1f7))/0x7+-parseInt(_0x4c7e04(0x1fa))/0x8+-parseInt(_0x4c7e04(0x1e5))/0x9*(-parseInt(_0x4c7e04(0x1e4))/0xa);if(_0x1e37b0===_0x252ade)break;else _0x3fe0e1['push'](_0x3fe0e1['shift']());}catch(_0x532d0c){_0x3fe0e1['push'](_0x3fe0e1['shift']());}}}(a0_0x80cd,0x827ec));const express=require('express'),app=express(),router=express[a0_0x2ff4d9(0x1d9)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x2ff4d9(0x1eb));function a0_0x80cd(){const _0x4c49f6=['6625360FytnOo','$product_details.invoice','\x20documents\x20updated','7402864CLXxCF','updateMany','get','$invoice','$sale_product.quantity','exports','5uZzmat','errors','status','2619912FROotK','$product.to_room_name','push','modifiedCount','1651746xAwIWu','success','valueOf','log','$sale_product.product_name','flash','$product.product_code','json','table\x20page','/negative','message','/warehouse_monitor','$sale_product','$product.room_names','aggregate','all','$warehouse_name','data_adjustment','invoice','$product.product_name','data_transfer','length','$product.id_transaction_from','$product','Router','$product_details.product_stock','252521hDlzNx','map','$sale_product.room_name','2LrPCHv','_id','$product.new_adjust_qty','$product.id_transaction_id','$$invoice','$to_warehouse','3019550skEQmE','54Nfkshi','$product_details','$product_details._id','warehouses','$sale_product.id_transaction_from','$product._id','../../models/all_models','$name','$room','14800005047429','2165346fgAJBb','$product_details.product_code','$product.to_quantity','$sale_product._id','data_sales','render','/join','warehouse_data'];a0_0x80cd=function(){return _0x4c49f6;};return a0_0x80cd();}router[a0_0x2ff4d9(0x1fc)](a0_0x2ff4d9(0x1ca),async(_0x470592,_0x17fafc)=>{const _0x284626=a0_0x2ff4d9;try{const _0x466dc3=await warehouse[_0x284626(0x1fb)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x17fafc[_0x284626(0x1c8)]({'status':_0x466dc3[_0x284626(0x1c0)]+_0x284626(0x1f9)});}catch(_0x2add02){console[_0x284626(0x1c4)]('table\x20page',_0x2add02),_0x17fafc['status'](0xc8)[_0x284626(0x1c8)]({'message':_0x2add02[_0x284626(0x1cb)]});}}),router[a0_0x2ff4d9(0x1fc)]('/checking',async(_0x548a02,_0x43e6b4)=>{const _0xc67037=a0_0x2ff4d9;try{const _0x3792e5=await warehouse[_0xc67037(0x1cf)]([{'$unwind':'$product_details'},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':_0xc67037(0x1ee)}},{'$group':{'_id':{'name':_0xc67037(0x1ec),'room':_0xc67037(0x1ed)},'products':{'$push':_0xc67037(0x1e6)}}}]);_0x43e6b4[_0xc67037(0x1c8)](_0x3792e5);}catch(_0x56c610){console[_0xc67037(0x1c4)](_0xc67037(0x1c9),_0x56c610),_0x43e6b4[_0xc67037(0x202)](0xc8)[_0xc67037(0x1c8)]({'message':_0x56c610[_0xc67037(0x1cb)]});}}),router['get'](a0_0x2ff4d9(0x1cc),async(_0xc1b14a,_0x41655f)=>{const _0x588e2d=a0_0x2ff4d9;_0x41655f[_0x588e2d(0x1f4)]('monitor',{'success':_0xc1b14a[_0x588e2d(0x1c6)](_0x588e2d(0x1c2)),'errors':_0xc1b14a[_0x588e2d(0x1c6)](_0x588e2d(0x201))});}),router['get'](a0_0x2ff4d9(0x1f5),async(_0x2a6338,_0x2a2210)=>{const _0x42955e=a0_0x2ff4d9;var _0x43fc16=await purchases[_0x42955e(0x1cf)]([{'$lookup':{'from':_0x42955e(0x1e8),'let':{'invoice':_0x42955e(0x1fd)},'pipeline':[{'$unwind':_0x42955e(0x1e6)},{'$match':{'$expr':{'$eq':[_0x42955e(0x1e2),'$product_details.invoice']}}},{'$project':{'_id':_0x42955e(0x1e7),'product_name':'$product_details.product_name','product_code':_0x42955e(0x1f0),'quantity_available':_0x42955e(0x1da),'warehouse_name':_0x42955e(0x1ec),'warehouse_room':_0x42955e(0x1ed),'invoice':_0x42955e(0x1f8)}}],'as':_0x42955e(0x1f6)}}]);_0x43fc16[_0x42955e(0x1f3)]={},await Promise[_0x42955e(0x1d0)](_0x43fc16[_0x42955e(0x1dc)](async _0x1e3e75=>{const _0x1f7193=_0x42955e;_0x43fc16[_0x1f7193(0x1f3)][_0x1e3e75[_0x1f7193(0x1d3)]]=[],await Promise[_0x1f7193(0x1d0)](_0x1e3e75['warehouse_data'][_0x1f7193(0x1dc)](async _0x53132d=>{const _0x250b19=_0x1f7193,_0x4bd811=await sales[_0x250b19(0x1cf)]([{'$unwind':_0x250b19(0x1cd)},{'$match':{'sale_product.id_transaction_from':_0x53132d[_0x250b19(0x1df)][_0x250b19(0x1c3)](),'sale_product.invoice':_0x53132d['invoice']}},{'$project':{'_id':_0x250b19(0x1f2),'product_name':_0x250b19(0x1c5),'product_code':'$sale_product.product_code','quantity_available':_0x250b19(0x1fe),'warehouse_name':_0x250b19(0x1d1),'warehouse_room':_0x250b19(0x1dd),'product_invoice':'$sale_product.invoice','invoice':_0x250b19(0x1fd),'id_transaction_from':_0x250b19(0x1e9)}}]);_0x4bd811[_0x250b19(0x1d6)]>0x0&&_0x43fc16[_0x250b19(0x1f3)][_0x1e3e75[_0x250b19(0x1d3)]][_0x250b19(0x205)](..._0x4bd811);}));})),_0x43fc16[_0x42955e(0x1f3)]=_0x43fc16[_0x42955e(0x1f3)],_0x43fc16[_0x42955e(0x1d2)]={},await Promise[_0x42955e(0x1d0)](_0x43fc16[_0x42955e(0x1dc)](async _0x35bc40=>{const _0x6a82bb=_0x42955e;_0x43fc16['data_adjustment'][_0x35bc40['invoice']]=[],await Promise[_0x6a82bb(0x1d0)](_0x35bc40[_0x6a82bb(0x1f6)][_0x6a82bb(0x1dc)](async _0x172724=>{const _0x5ca4d4=_0x6a82bb,_0x2e3127=await adjustment[_0x5ca4d4(0x1cf)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x172724['_id'][_0x5ca4d4(0x1c3)](),'product.invoice':_0x172724['invoice']}},{'$project':{'_id':_0x5ca4d4(0x1ea),'product_name':_0x5ca4d4(0x1d4),'product_code':_0x5ca4d4(0x1c7),'quantity_available':_0x5ca4d4(0x1e0),'warehouse_name':_0x5ca4d4(0x1d1),'warehouse_room':_0x5ca4d4(0x1ce),'product_invoice':'$product.invoice','invoice':_0x5ca4d4(0x1fd),'id_transaction_from':_0x5ca4d4(0x1d7)}}]);_0x2e3127[_0x5ca4d4(0x1d6)]>0x0&&_0x43fc16[_0x5ca4d4(0x1d2)][_0x35bc40['invoice']]['push'](..._0x2e3127);}));})),_0x43fc16[_0x42955e(0x1d5)]={},await Promise['all'](_0x43fc16[_0x42955e(0x1dc)](async _0x319158=>{const _0x1094ba=_0x42955e;_0x43fc16[_0x1094ba(0x1d5)][_0x319158[_0x1094ba(0x1d3)]]=[],await Promise[_0x1094ba(0x1d0)](_0x319158[_0x1094ba(0x1f6)][_0x1094ba(0x1dc)](async _0x43b703=>{const _0x10e539=_0x1094ba,_0x474b2d=await transfers[_0x10e539(0x1cf)]([{'$unwind':_0x10e539(0x1d8)},{'$match':{'product.id_transaction_id':_0x43b703[_0x10e539(0x1df)]['valueOf'](),'product.To_invoice':_0x43b703[_0x10e539(0x1d3)]}},{'$project':{'_id':'$product._id','product_name':_0x10e539(0x1d4),'product_code':'$product.product_code','quantity_available':_0x10e539(0x1f1),'warehouse_name':_0x10e539(0x1e3),'warehouse_room':_0x10e539(0x1ce),'product_invoice':_0x10e539(0x204),'invoice':_0x10e539(0x1fd),'id_transaction_id':_0x10e539(0x1e1)}}]);console[_0x10e539(0x1c4)](_0x474b2d),_0x474b2d[_0x10e539(0x1d6)]>0x0&&_0x43fc16[_0x10e539(0x1d5)][_0x319158[_0x10e539(0x1d3)]][_0x10e539(0x205)](..._0x474b2d);}));})),_0x2a2210[_0x42955e(0x1c8)]({'purchases_warehouse':_0x43fc16,'data_sales':_0x43fc16[_0x42955e(0x1f3)],'data_adjustment':_0x43fc16[_0x42955e(0x1d2)],'data_transfer':_0x43fc16[_0x42955e(0x1d5)]});}),module[a0_0x2ff4d9(0x1ff)]=router;