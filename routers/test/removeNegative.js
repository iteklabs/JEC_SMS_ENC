function a0_0xcbad(){const _0x4e2db6=['errors','/join','$warehouse_name','$product.product_name','INCF-52068316','5hjJHdG','$product_details.product_stock','$invoice','monitor','$product_details._id','389902wvQEFG','get','data_sales','$product.invoice','$product_details.invoice','all','1762334zBmELu','$to_warehouse','2534624qZcJhW','table\x20page','$product.to_room_name','data_transfer','353690sJIIaN','$sale_product.product_name','$product.room_names','1746831WqZome','message','$product.new_adjust_qty','2VdPpQb','_id','$$invoice','json','$sale_product.room_name','express','flash','$product.to_quantity','$product_details.product_code','data_adjustment','invoice','success','exports','9FqAUje','render','warehouses','962048lkWoyt','143umzaMJ','$room','$name','/negative','aggregate','valueOf','warehouse_data','$product_details','Router','log','787986MBTTwF','$sale_product','map','$sale_product.quantity','modifiedCount','length','$sale_product._id','$sale_product.id_transaction_from','$product._id','push','$sale_product.invoice','$product','/warehouse_monitor','updateMany'];a0_0xcbad=function(){return _0x4e2db6;};return a0_0xcbad();}const a0_0x4c522c=a0_0x86e9;(function(_0xc63b44,_0x478354){const _0x3bee75=a0_0x86e9,_0x31fc0a=_0xc63b44();while(!![]){try{const _0xb2118b=parseInt(_0x3bee75(0x10f))/0x1+parseInt(_0x3bee75(0x121))/0x2*(parseInt(_0x3bee75(0x11e))/0x3)+-parseInt(_0x3bee75(0x117))/0x4*(parseInt(_0x3bee75(0x10a))/0x5)+parseInt(_0x3bee75(0xf7))/0x6+parseInt(_0x3bee75(0x115))/0x7+-parseInt(_0x3bee75(0xec))/0x8*(-parseInt(_0x3bee75(0xe9))/0x9)+-parseInt(_0x3bee75(0x11b))/0xa*(parseInt(_0x3bee75(0xed))/0xb);if(_0xb2118b===_0x478354)break;else _0x31fc0a['push'](_0x31fc0a['shift']());}catch(_0x3f1650){_0x31fc0a['push'](_0x31fc0a['shift']());}}}(a0_0xcbad,0x5d47b));const express=require(a0_0x4c522c(0x126)),app=express(),router=express[a0_0x4c522c(0xf5)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');function a0_0x86e9(_0xa56653,_0x4cf92f){const _0xcbad49=a0_0xcbad();return a0_0x86e9=function(_0x86e9dd,_0x213591){_0x86e9dd=_0x86e9dd-0xe8;let _0x57061d=_0xcbad49[_0x86e9dd];return _0x57061d;},a0_0x86e9(_0xa56653,_0x4cf92f);}router['get'](a0_0x4c522c(0xf0),async(_0x4d4e8c,_0x430730)=>{const _0x294c24=a0_0x4c522c;try{const _0x44bf88=await warehouse[_0x294c24(0x104)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x430730['json']({'status':_0x44bf88[_0x294c24(0xfb)]+'\x20documents\x20updated'});}catch(_0x2f08b0){console[_0x294c24(0xf6)]('table\x20page',_0x2f08b0),_0x430730['status'](0xc8)['json']({'message':_0x2f08b0[_0x294c24(0x11f)]});}}),router[a0_0x4c522c(0x110)]('/checking',async(_0x3f604e,_0x348572)=>{const _0xf3b33b=a0_0x4c522c;try{const _0x20f006=await warehouse['aggregate']([{'$unwind':_0xf3b33b(0xf4)},{'$match':{'product_details.invoice':_0xf3b33b(0x109),'product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0xf3b33b(0xef),'room':_0xf3b33b(0xee)},'products':{'$push':'$product_details'}}}]);_0x348572[_0xf3b33b(0x124)](_0x20f006);}catch(_0x4e527c){console[_0xf3b33b(0xf6)](_0xf3b33b(0x118),_0x4e527c),_0x348572['status'](0xc8)[_0xf3b33b(0x124)]({'message':_0x4e527c[_0xf3b33b(0x11f)]});}}),router[a0_0x4c522c(0x110)](a0_0x4c522c(0x103),async(_0x180f38,_0x3c30d3)=>{const _0xf5e628=a0_0x4c522c;_0x3c30d3[_0xf5e628(0xea)](_0xf5e628(0x10d),{'success':_0x180f38[_0xf5e628(0x127)](_0xf5e628(0x12c)),'errors':_0x180f38[_0xf5e628(0x127)](_0xf5e628(0x105))});}),router['get'](a0_0x4c522c(0x106),async(_0x2f5142,_0x7495af)=>{const _0x31d145=a0_0x4c522c;var _0x397cb7=await purchases[_0x31d145(0xf1)]([{'$lookup':{'from':_0x31d145(0xeb),'let':{'invoice':_0x31d145(0x10c)},'pipeline':[{'$unwind':_0x31d145(0xf4)},{'$match':{'$expr':{'$eq':[_0x31d145(0x123),'$product_details.invoice']}}},{'$project':{'_id':_0x31d145(0x10e),'product_name':'$product_details.product_name','product_code':_0x31d145(0x129),'quantity_available':_0x31d145(0x10b),'warehouse_name':_0x31d145(0xef),'warehouse_room':'$room','invoice':_0x31d145(0x113)}}],'as':_0x31d145(0xf3)}}]);_0x397cb7['data_sales']={},await Promise['all'](_0x397cb7[_0x31d145(0xf9)](async _0x2ba886=>{const _0x2e03e3=_0x31d145;_0x397cb7[_0x2e03e3(0x111)][_0x2ba886[_0x2e03e3(0x12b)]]=[],await Promise[_0x2e03e3(0x114)](_0x2ba886['warehouse_data'][_0x2e03e3(0xf9)](async _0x40c54a=>{const _0x5380af=_0x2e03e3,_0x29c8ae=await sales[_0x5380af(0xf1)]([{'$unwind':_0x5380af(0xf8)},{'$match':{'sale_product.id_transaction_from':_0x40c54a[_0x5380af(0x122)]['valueOf'](),'sale_product.invoice':_0x40c54a['invoice']}},{'$project':{'_id':_0x5380af(0xfd),'product_name':_0x5380af(0x11c),'product_code':'$sale_product.product_code','quantity_available':_0x5380af(0xfa),'warehouse_name':_0x5380af(0x107),'warehouse_room':_0x5380af(0x125),'product_invoice':_0x5380af(0x101),'invoice':_0x5380af(0x10c),'id_transaction_from':_0x5380af(0xfe)}}]);_0x29c8ae[_0x5380af(0xfc)]>0x0&&_0x397cb7[_0x5380af(0x111)][_0x2ba886[_0x5380af(0x12b)]][_0x5380af(0x100)](..._0x29c8ae);}));})),_0x397cb7['data_sales']=_0x397cb7[_0x31d145(0x111)],_0x397cb7[_0x31d145(0x12a)]={},await Promise[_0x31d145(0x114)](_0x397cb7[_0x31d145(0xf9)](async _0x2379a0=>{const _0x5a6ff0=_0x31d145;_0x397cb7[_0x5a6ff0(0x12a)][_0x2379a0[_0x5a6ff0(0x12b)]]=[],await Promise[_0x5a6ff0(0x114)](_0x2379a0[_0x5a6ff0(0xf3)][_0x5a6ff0(0xf9)](async _0x59cbfa=>{const _0x1995f9=_0x5a6ff0,_0xbb5f74=await adjustment[_0x1995f9(0xf1)]([{'$unwind':_0x1995f9(0x102)},{'$match':{'product.id_transaction_from':_0x59cbfa['_id'][_0x1995f9(0xf2)](),'product.invoice':_0x59cbfa[_0x1995f9(0x12b)]}},{'$project':{'_id':_0x1995f9(0xff),'product_name':'$product.product_name','product_code':'$product.product_code','quantity_available':_0x1995f9(0x120),'warehouse_name':_0x1995f9(0x107),'warehouse_room':_0x1995f9(0x11d),'product_invoice':_0x1995f9(0x112),'invoice':_0x1995f9(0x10c),'id_transaction_from':'$product.id_transaction_from'}}]);_0xbb5f74[_0x1995f9(0xfc)]>0x0&&_0x397cb7[_0x1995f9(0x12a)][_0x2379a0[_0x1995f9(0x12b)]][_0x1995f9(0x100)](..._0xbb5f74);}));})),_0x397cb7[_0x31d145(0x11a)]={},await Promise[_0x31d145(0x114)](_0x397cb7[_0x31d145(0xf9)](async _0x7ee1d0=>{const _0x3501d8=_0x31d145;_0x397cb7[_0x3501d8(0x11a)][_0x7ee1d0[_0x3501d8(0x12b)]]=[],await Promise[_0x3501d8(0x114)](_0x7ee1d0[_0x3501d8(0xf3)][_0x3501d8(0xf9)](async _0xc0822f=>{const _0x277812=_0x3501d8,_0x3de753=await transfers['aggregate']([{'$unwind':_0x277812(0x102)},{'$match':{'product.id_transaction_id':_0xc0822f['_id'][_0x277812(0xf2)](),'product.To_invoice':_0xc0822f[_0x277812(0x12b)]}},{'$project':{'_id':_0x277812(0xff),'product_name':_0x277812(0x108),'product_code':'$product.product_code','quantity_available':_0x277812(0x128),'warehouse_name':_0x277812(0x116),'warehouse_room':'$product.room_names','product_invoice':_0x277812(0x119),'invoice':_0x277812(0x10c),'id_transaction_id':'$product.id_transaction_id'}}]);console[_0x277812(0xf6)](_0x3de753),_0x3de753['length']>0x0&&_0x397cb7[_0x277812(0x11a)][_0x7ee1d0[_0x277812(0x12b)]][_0x277812(0x100)](..._0x3de753);}));})),_0x7495af[_0x31d145(0x124)]({'purchases_warehouse':_0x397cb7,'data_sales':_0x397cb7[_0x31d145(0x111)],'data_adjustment':_0x397cb7[_0x31d145(0x12a)],'data_transfer':_0x397cb7[_0x31d145(0x11a)]});}),module[a0_0x4c522c(0xe8)]=router;