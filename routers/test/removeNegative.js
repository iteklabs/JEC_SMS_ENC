function a0_0x2385(){const _0x15aeac=['1499422GCfeFo','6wdeipx','table\x20page','../../models/all_models','305217mkQbgM','render','$sale_product','$$invoice','INCF-52068316','$invoice','$product.to_room_name','aggregate','/warehouse_monitor','$product.to_quantity','/checking','$sale_product._id','modifiedCount','$product.product_code','length','$product.id_transaction_id','json','status','28168OVFErJ','warehouse_data','data_transfer','$product.new_adjust_qty','$product_details._id','760YrwRzV','3526625ZUjmaX','_id','2154224Ewtixl','flash','$sale_product.invoice','141417CPFbzH','3eJukpG','/join','$room','/negative','push','$product_details','success','monitor','errors','$sale_product.id_transaction_from','4821228gqDTPA','data_sales','105NoRhIZ','$name','valueOf','$sale_product.room_name','\x20documents\x20updated','$sale_product.product_code','Router','invoice','$product._id','$warehouse_name','all','$product.room_names','message','data_adjustment','$product','$product.product_name','log','map','$to_warehouse','warehouses','$product.id_transaction_from','get','$product_details.invoice','updateMany'];a0_0x2385=function(){return _0x15aeac;};return a0_0x2385();}function a0_0x51e2(_0x490ac4,_0x26e334){const _0x23853c=a0_0x2385();return a0_0x51e2=function(_0x51e2f8,_0x4df45c){_0x51e2f8=_0x51e2f8-0x1c2;let _0x3cede9=_0x23853c[_0x51e2f8];return _0x3cede9;},a0_0x51e2(_0x490ac4,_0x26e334);}const a0_0x1be9fe=a0_0x51e2;(function(_0x1c3e10,_0x24dc02){const _0x4b7b67=a0_0x51e2,_0x7beed7=_0x1c3e10();while(!![]){try{const _0x1caaa7=-parseInt(_0x4b7b67(0x1fb))/0x1+parseInt(_0x4b7b67(0x1da))/0x2*(-parseInt(_0x4b7b67(0x1fc))/0x3)+parseInt(_0x4b7b67(0x1f8))/0x4+parseInt(_0x4b7b67(0x1f6))/0x5*(-parseInt(_0x4b7b67(0x1db))/0x6)+parseInt(_0x4b7b67(0x1c2))/0x7*(-parseInt(_0x4b7b67(0x1f0))/0x8)+-parseInt(_0x4b7b67(0x206))/0x9+-parseInt(_0x4b7b67(0x1f5))/0xa*(-parseInt(_0x4b7b67(0x1de))/0xb);if(_0x1caaa7===_0x24dc02)break;else _0x7beed7['push'](_0x7beed7['shift']());}catch(_0x1c7ec8){_0x7beed7['push'](_0x7beed7['shift']());}}}(a0_0x2385,0x70e20));const express=require('express'),app=express(),router=express[a0_0x1be9fe(0x1c8)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x1be9fe(0x1dd));router[a0_0x1be9fe(0x1d7)](a0_0x1be9fe(0x1ff),async(_0x1d93a7,_0xee3b2)=>{const _0x454e36=a0_0x1be9fe;try{const _0x243814=await warehouse[_0x454e36(0x1d9)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0xee3b2[_0x454e36(0x1ee)]({'status':_0x243814[_0x454e36(0x1ea)]+_0x454e36(0x1c6)});}catch(_0x4e1a48){console['log'](_0x454e36(0x1dc),_0x4e1a48),_0xee3b2[_0x454e36(0x1ef)](0xc8)[_0x454e36(0x1ee)]({'message':_0x4e1a48[_0x454e36(0x1ce)]});}}),router['get'](a0_0x1be9fe(0x1e8),async(_0x1c52e8,_0x1ce311)=>{const _0x475e0b=a0_0x1be9fe;try{const _0x11a8bc=await warehouse[_0x475e0b(0x1e5)]([{'$unwind':_0x475e0b(0x201)},{'$match':{'product_details.invoice':_0x475e0b(0x1e2),'product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x475e0b(0x1c3),'room':'$room'},'products':{'$push':_0x475e0b(0x201)}}}]);_0x1ce311['json'](_0x11a8bc);}catch(_0x492968){console[_0x475e0b(0x1d2)](_0x475e0b(0x1dc),_0x492968),_0x1ce311[_0x475e0b(0x1ef)](0xc8)[_0x475e0b(0x1ee)]({'message':_0x492968['message']});}}),router[a0_0x1be9fe(0x1d7)](a0_0x1be9fe(0x1e6),async(_0x1aaefe,_0x49a28b)=>{const _0x2d7ed8=a0_0x1be9fe;_0x49a28b[_0x2d7ed8(0x1df)](_0x2d7ed8(0x203),{'success':_0x1aaefe['flash'](_0x2d7ed8(0x202)),'errors':_0x1aaefe[_0x2d7ed8(0x1f9)](_0x2d7ed8(0x204))});}),router['get'](a0_0x1be9fe(0x1fd),async(_0x3af060,_0x40ac03)=>{const _0x134526=a0_0x1be9fe;var _0x1b1efe=await purchases[_0x134526(0x1e5)]([{'$lookup':{'from':_0x134526(0x1d5),'let':{'invoice':_0x134526(0x1e3)},'pipeline':[{'$unwind':_0x134526(0x201)},{'$match':{'$expr':{'$eq':[_0x134526(0x1e1),_0x134526(0x1d8)]}}},{'$project':{'_id':_0x134526(0x1f4),'product_name':'$product_details.product_name','product_code':'$product_details.product_code','quantity_available':'$product_details.product_stock','warehouse_name':_0x134526(0x1c3),'warehouse_room':_0x134526(0x1fe),'invoice':_0x134526(0x1d8)}}],'as':_0x134526(0x1f1)}}]);_0x1b1efe[_0x134526(0x207)]={},await Promise['all'](_0x1b1efe[_0x134526(0x1d3)](async _0x59221c=>{const _0x1fb3b3=_0x134526;_0x1b1efe[_0x1fb3b3(0x207)][_0x59221c[_0x1fb3b3(0x1c9)]]=[],await Promise['all'](_0x59221c[_0x1fb3b3(0x1f1)][_0x1fb3b3(0x1d3)](async _0x5bb9f7=>{const _0x1e7bae=_0x1fb3b3,_0x11c5a0=await sales['aggregate']([{'$unwind':_0x1e7bae(0x1e0)},{'$match':{'sale_product.id_transaction_from':_0x5bb9f7['_id'][_0x1e7bae(0x1c4)](),'sale_product.invoice':_0x5bb9f7['invoice']}},{'$project':{'_id':_0x1e7bae(0x1e9),'product_name':'$sale_product.product_name','product_code':_0x1e7bae(0x1c7),'quantity_available':'$sale_product.quantity','warehouse_name':'$warehouse_name','warehouse_room':_0x1e7bae(0x1c5),'product_invoice':_0x1e7bae(0x1fa),'invoice':_0x1e7bae(0x1e3),'id_transaction_from':_0x1e7bae(0x205)}}]);_0x11c5a0[_0x1e7bae(0x1ec)]>0x0&&_0x1b1efe['data_sales'][_0x59221c[_0x1e7bae(0x1c9)]][_0x1e7bae(0x200)](..._0x11c5a0);}));})),_0x1b1efe[_0x134526(0x207)]=_0x1b1efe['data_sales'],_0x1b1efe[_0x134526(0x1cf)]={},await Promise['all'](_0x1b1efe[_0x134526(0x1d3)](async _0x53a387=>{const _0x282f5b=_0x134526;_0x1b1efe['data_adjustment'][_0x53a387[_0x282f5b(0x1c9)]]=[],await Promise[_0x282f5b(0x1cc)](_0x53a387['warehouse_data']['map'](async _0x427fb1=>{const _0x23b465=_0x282f5b,_0x500ce1=await adjustment[_0x23b465(0x1e5)]([{'$unwind':_0x23b465(0x1d0)},{'$match':{'product.id_transaction_from':_0x427fb1['_id'][_0x23b465(0x1c4)](),'product.invoice':_0x427fb1[_0x23b465(0x1c9)]}},{'$project':{'_id':'$product._id','product_name':_0x23b465(0x1d1),'product_code':_0x23b465(0x1eb),'quantity_available':_0x23b465(0x1f3),'warehouse_name':_0x23b465(0x1cb),'warehouse_room':_0x23b465(0x1cd),'product_invoice':'$product.invoice','invoice':_0x23b465(0x1e3),'id_transaction_from':_0x23b465(0x1d6)}}]);_0x500ce1[_0x23b465(0x1ec)]>0x0&&_0x1b1efe[_0x23b465(0x1cf)][_0x53a387[_0x23b465(0x1c9)]][_0x23b465(0x200)](..._0x500ce1);}));})),_0x1b1efe[_0x134526(0x1f2)]={},await Promise[_0x134526(0x1cc)](_0x1b1efe[_0x134526(0x1d3)](async _0x506bc4=>{const _0x332349=_0x134526;_0x1b1efe[_0x332349(0x1f2)][_0x506bc4[_0x332349(0x1c9)]]=[],await Promise[_0x332349(0x1cc)](_0x506bc4[_0x332349(0x1f1)][_0x332349(0x1d3)](async _0x48dec5=>{const _0x299d78=_0x332349,_0x2582e6=await transfers[_0x299d78(0x1e5)]([{'$unwind':_0x299d78(0x1d0)},{'$match':{'product.id_transaction_id':_0x48dec5[_0x299d78(0x1f7)][_0x299d78(0x1c4)](),'product.To_invoice':_0x48dec5['invoice']}},{'$project':{'_id':_0x299d78(0x1ca),'product_name':_0x299d78(0x1d1),'product_code':'$product.product_code','quantity_available':_0x299d78(0x1e7),'warehouse_name':_0x299d78(0x1d4),'warehouse_room':_0x299d78(0x1cd),'product_invoice':_0x299d78(0x1e4),'invoice':'$invoice','id_transaction_id':_0x299d78(0x1ed)}}]);console['log'](_0x2582e6),_0x2582e6[_0x299d78(0x1ec)]>0x0&&_0x1b1efe[_0x299d78(0x1f2)][_0x506bc4[_0x299d78(0x1c9)]]['push'](..._0x2582e6);}));})),_0x40ac03[_0x134526(0x1ee)]({'purchases_warehouse':_0x1b1efe,'data_sales':_0x1b1efe[_0x134526(0x207)],'data_adjustment':_0x1b1efe[_0x134526(0x1cf)],'data_transfer':_0x1b1efe[_0x134526(0x1f2)]});}),module['exports']=router;