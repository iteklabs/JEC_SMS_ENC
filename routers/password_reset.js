const a0_0x387dc6=a0_0x1524;function a0_0x8536(){const _0x1f1bb0=['image','redirect','Logo.png','</b></h1></p>','False','Password\x20Successfuly\x20Reset\x20-\x20','4602QNqhKT','site_title','find','182892LxgIyy','8YruDpT','flash','password','name','/forgotPassword/code/','<html><head><title></title>','Error\x20Occurs','floor','json','99leSVqh','8MGpGct','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','985MmLHNp','Password\x20Reset\x20-\x20','email','<!DOCTYPE\x20html>','isUsed','10004090eOTEDL','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','1152045BNeWWP','nodemailer','/code/','2346318hJpToT','5143320EAECQJ','<h5>','1YyIGrf','<strong>\x20Regards\x20</strong>','/login/','post','<p>Hello\x20','get','</h5>','code','error','/../public','random','/code_password/','hash','express','exports','</head><body>','</div>','log','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','<hr\x20class=\x22my-3\x22>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','createTransport','port',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','</body></html>','body','/forgotPassword/view','save','email_reset','render','sendMail','/upload/','620757WlHdjd','<div>','Email\x20sent\x20successfully','Router','/view','logo','findOne','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'];a0_0x8536=function(){return _0x1f1bb0;};return a0_0x8536();}(function(_0xe3a45f,_0x26818e){const _0x4f482a=a0_0x1524,_0x4e588b=_0xe3a45f();while(!![]){try{const _0x416dc8=-parseInt(_0x4f482a(0x91))/0x1*(-parseInt(_0x4f482a(0x8e))/0x2)+-parseInt(_0x4f482a(0x8b))/0x3*(parseInt(_0x4f482a(0x78))/0x4)+-parseInt(_0x4f482a(0x84))/0x5*(-parseInt(_0x4f482a(0x74))/0x6)+-parseInt(_0x4f482a(0x8f))/0x7+-parseInt(_0x4f482a(0x82))/0x8*(parseInt(_0x4f482a(0xb1))/0x9)+parseInt(_0x4f482a(0x89))/0xa+-parseInt(_0x4f482a(0x81))/0xb*(parseInt(_0x4f482a(0x77))/0xc);if(_0x416dc8===_0x26818e)break;else _0x4e588b['push'](_0x4e588b['shift']());}catch(_0x96144a){_0x4e588b['push'](_0x4e588b['shift']());}}}(a0_0x8536,0x96537));function a0_0x1524(_0x1acc14,_0x3a56ee){const _0x85362=a0_0x8536();return a0_0x1524=function(_0x1524a6,_0x23df1a){_0x1524a6=_0x1524a6-0x71;let _0x1929aa=_0x85362[_0x1524a6];return _0x1929aa;},a0_0x1524(_0x1acc14,_0x3a56ee);}const express=require(a0_0x387dc6(0x9e)),app=express(),router=express[a0_0x387dc6(0xb4)](),bcrypt=require('bcryptjs'),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require('../middleware/auth'),nodemailer=require(a0_0x387dc6(0x8c));router[a0_0x387dc6(0x96)](a0_0x387dc6(0xb5),async(_0x5c79aa,_0x1fe6cc)=>{const _0x26554d=a0_0x387dc6,_0x3c5cb7=await master_shop['find']();_0x1fe6cc[_0x26554d(0xae)](_0x26554d(0xad),{'success':_0x5c79aa[_0x26554d(0x79)]('success'),'errors':_0x5c79aa[_0x26554d(0x79)]('errors'),'master_shop':_0x3c5cb7});});function generateRandomAlphanumericString(_0x38f27c=0x6){const _0xceba18=a0_0x387dc6,_0x5f0b3a=_0xceba18(0x83);let _0x22dd09='';for(let _0x16bcad=0x0;_0x16bcad<_0x38f27c;_0x16bcad++){const _0x15bbe4=Math[_0xceba18(0x7f)](Math[_0xceba18(0x9b)]()*_0x5f0b3a['length']);_0x22dd09+=_0x5f0b3a[_0x15bbe4];}return _0x22dd09;}router[a0_0x387dc6(0x94)](a0_0x387dc6(0xb5),async(_0x3e798f,_0x14d464)=>{const _0x1acef7=a0_0x387dc6,{email:_0x5b5b7c}=_0x3e798f['body'],_0x3205ee=await sing_up[_0x1acef7(0xb7)]({'email':_0x5b5b7c});var _0x4d1de2=generateRandomAlphanumericString();const _0x9d06c5=await bcrypt['hash'](_0x4d1de2,0xa);if(_0x3205ee){_0x3205ee[_0x1acef7(0x98)]=_0x4d1de2,_0x3205ee[_0x1acef7(0x88)]=_0x1acef7(0x72);const _0x24b724=_0x3205ee[_0x1acef7(0xac)](),_0x360f3e=await master_shop[_0x1acef7(0x76)](),_0x117bff=await email_settings[_0x1acef7(0xb7)]();let _0x127fd1=nodemailer[_0x1acef7(0xa6)]({'host':_0x117bff['host'],'port':Number(_0x117bff['port']),'secure':![],'auth':{'user':_0x117bff['email'],'pass':_0x117bff[_0x1acef7(0x7a)]}}),_0x43b6e6={'from':_0x117bff[_0x1acef7(0x86)],'to':_0x3205ee['email'],'subject':_0x1acef7(0x85)+_0x360f3e[0x0][_0x1acef7(0x75)],'attachments':[{'filename':_0x1acef7(0xbb),'path':__dirname+_0x1acef7(0x9a)+_0x1acef7(0xb0)+_0x360f3e[0x0][_0x1acef7(0xb9)],'cid':_0x1acef7(0xb6)}],'html':_0x1acef7(0x87)+_0x1acef7(0x7d)+_0x1acef7(0xa0)+_0x1acef7(0xb2)+_0x1acef7(0xb8)+_0x1acef7(0xb2)+_0x1acef7(0xa5)+_0x1acef7(0xa1)+_0x1acef7(0xa1)+_0x1acef7(0xb2)+_0x1acef7(0xa3)+_0x4d1de2+_0x1acef7(0x71)+'</div>'+_0x1acef7(0xa4)+'<div>'+_0x1acef7(0x92)+_0x1acef7(0x90)+_0x360f3e[0x0][_0x1acef7(0x75)]+_0x1acef7(0x97)+'</div>'+_0x1acef7(0xa1)+_0x1acef7(0xa9)};_0x127fd1[_0x1acef7(0xaf)](_0x43b6e6,function(_0x12dde7,_0x2eeb53){const _0x209c00=_0x1acef7;_0x12dde7?(console['log'](_0x12dde7),console['log'](_0x209c00(0x7e))):console[_0x209c00(0xa2)](_0x209c00(0xb3));}),_0x14d464[_0x1acef7(0xba)](_0x1acef7(0x7c));}else _0x3e798f['flash'](_0x1acef7(0x99),_0x1acef7(0x8a)),_0x14d464['redirect'](_0x1acef7(0xab));}),router[a0_0x387dc6(0x96)](a0_0x387dc6(0x8d),async(_0x43c538,_0x196c89)=>{const _0x2b9639=a0_0x387dc6,_0x2e2aeb=await master_shop['find']();_0x196c89[_0x2b9639(0xae)]('email_code',{'success':_0x43c538['flash']('success'),'errors':_0x43c538[_0x2b9639(0x79)]('errors'),'master_shop':_0x2e2aeb});}),router['post'](a0_0x387dc6(0x8d),async(_0x595ab8,_0x538f70)=>{const _0x3a4258=a0_0x387dc6,{code:_0xf844dc}=_0x595ab8[_0x3a4258(0xaa)],_0x465a92=await sing_up[_0x3a4258(0x76)]({'code':_0xf844dc});console['log'](_0x465a92['length']),_0x538f70[_0x3a4258(0x80)](_0x465a92);}),router[a0_0x387dc6(0x94)](a0_0x387dc6(0x9c),async(_0x2598d5,_0x47d19d)=>{const _0x7311f8=a0_0x387dc6,{codex:_0x3cf888,password:_0x515ba6,cpassword:_0x3bc883,email:_0x369a67}=_0x2598d5['body'],_0x36f407=await sing_up[_0x7311f8(0xb7)]({'code':_0x3cf888,'email':_0x369a67,'isUsed':_0x7311f8(0x72)}),_0xbe1ff7=await bcrypt[_0x7311f8(0x9d)](_0x515ba6,0xa);if(_0x36f407){_0x36f407[_0x7311f8(0x7a)]=_0xbe1ff7,_0x36f407[_0x7311f8(0x88)]='True';const _0x2e8dfb=_0x36f407[_0x7311f8(0xac)](),_0x157cf1=await master_shop[_0x7311f8(0x76)](),_0x59020a=await email_settings[_0x7311f8(0xb7)]();let _0x377522=nodemailer[_0x7311f8(0xa6)]({'host':_0x59020a['host'],'port':Number(_0x59020a[_0x7311f8(0xa7)]),'secure':![],'auth':{'user':_0x59020a['email'],'pass':_0x59020a['password']}}),_0x3f1b7e={'from':_0x59020a[_0x7311f8(0x86)],'to':_0x36f407[_0x7311f8(0x86)],'subject':_0x7311f8(0x73)+_0x157cf1[0x0][_0x7311f8(0x75)],'attachments':[{'filename':_0x7311f8(0xbb),'path':__dirname+'/../public'+_0x7311f8(0xb0)+_0x157cf1[0x0][_0x7311f8(0xb9)],'cid':_0x7311f8(0xb6)}],'html':_0x7311f8(0x87)+_0x7311f8(0x7d)+_0x7311f8(0xa0)+'<div>'+_0x7311f8(0xb8)+_0x7311f8(0xb2)+_0x7311f8(0xa5)+_0x7311f8(0xa1)+_0x7311f8(0xa1)+_0x7311f8(0xb2)+_0x7311f8(0x95)+_0x36f407[_0x7311f8(0x7b)]+_0x7311f8(0xa8)+'</div>'+_0x7311f8(0xa4)+_0x7311f8(0xb2)+_0x7311f8(0x92)+_0x7311f8(0x90)+_0x157cf1[0x0]['site_title']+'</h5>'+_0x7311f8(0xa1)+_0x7311f8(0xa1)+_0x7311f8(0xa9)};_0x377522[_0x7311f8(0xaf)](_0x3f1b7e,function(_0x5167de,_0x33dfbe){const _0x5b7de7=_0x7311f8;_0x5167de?(console[_0x5b7de7(0xa2)](_0x5167de),console[_0x5b7de7(0xa2)](_0x5b7de7(0x7e))):console[_0x5b7de7(0xa2)](_0x5b7de7(0xb3));}),_0x47d19d[_0x7311f8(0xba)](_0x7311f8(0x93));}else _0x2598d5[_0x7311f8(0x79)](_0x7311f8(0x99),_0x7311f8(0x8a)),_0x47d19d['redirect']('/forgotPassword/code');}),module[a0_0x387dc6(0x9f)]=router;