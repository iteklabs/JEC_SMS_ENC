const a0_0x4ad2bb=a0_0x5361;(function(_0xf43d86,_0x579879){const _0x908d22=a0_0x5361,_0x44a80a=_0xf43d86();while(!![]){try{const _0x1ff7be=-parseInt(_0x908d22(0x16d))/0x1*(-parseInt(_0x908d22(0x145))/0x2)+-parseInt(_0x908d22(0x143))/0x3+parseInt(_0x908d22(0x172))/0x4*(-parseInt(_0x908d22(0x140))/0x5)+parseInt(_0x908d22(0x13e))/0x6*(-parseInt(_0x908d22(0x162))/0x7)+-parseInt(_0x908d22(0x134))/0x8*(parseInt(_0x908d22(0x16b))/0x9)+parseInt(_0x908d22(0x156))/0xa*(parseInt(_0x908d22(0x179))/0xb)+-parseInt(_0x908d22(0x147))/0xc*(-parseInt(_0x908d22(0x14b))/0xd);if(_0x1ff7be===_0x579879)break;else _0x44a80a['push'](_0x44a80a['shift']());}catch(_0x5ae2e8){_0x44a80a['push'](_0x44a80a['shift']());}}}(a0_0x3eb6,0x1f416));const express=require('express'),app=express(),router=express[a0_0x4ad2bb(0x171)](),bcrypt=require('bcryptjs'),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x4ad2bb(0x17c)),nodemailer=require(a0_0x4ad2bb(0x15b));function a0_0x5361(_0x10ff69,_0x111b70){const _0x3eb600=a0_0x3eb6();return a0_0x5361=function(_0x536148,_0x1cdc6b){_0x536148=_0x536148-0x131;let _0x2087cc=_0x3eb600[_0x536148];return _0x2087cc;},a0_0x5361(_0x10ff69,_0x111b70);}function a0_0x3eb6(){const _0x32366a=['password','/forgotPassword/code/','<html><head><title></title>','11KRefjq','/login/','/view','../middleware/auth','get','isUsed','email_code','errors','error','1390568NIAhAY','host','<p>Hello\x20','find','</div>','sendMail','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','body','False','exports','77448NbDzMW','/code_password/','1920SxcDuq','/forgotPassword/view','</body></html>','383043aZeKDs','/../public','242kcjpRb','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','5925732xOQyID','Password\x20Successfuly\x20Reset\x20-\x20','createTransport','log','13gEGRsn','json','length','/forgotPassword/code','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','<hr\x20class=\x22my-3\x22>','render','redirect','email_reset','</b></h1></p>','/code/','2130680prxoFP','<div>','Logo.png','code','port','nodemailer','Password\x20Reset\x20-\x20','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','Email\x20sent\x20successfully','success','Error\x20Occurs','flash','119iUGAti','<!DOCTYPE\x20html>','</head><body>','image',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','email','True','/upload/','<strong>\x20Regards\x20</strong>','9xzySMI','findOne','905GAbkeM','name','<h5>','post','Router','1744DDLxUE','</h5>','save','site_title'];a0_0x3eb6=function(){return _0x32366a;};return a0_0x3eb6();}router[a0_0x4ad2bb(0x17d)]('/view',async(_0x565126,_0x1e18e9)=>{const _0x3fd2fb=a0_0x4ad2bb,_0x57f6ad=await master_shop['find']();_0x1e18e9[_0x3fd2fb(0x151)](_0x3fd2fb(0x153),{'success':_0x565126['flash'](_0x3fd2fb(0x15f)),'errors':_0x565126[_0x3fd2fb(0x161)](_0x3fd2fb(0x132)),'master_shop':_0x57f6ad});});function generateRandomAlphanumericString(_0xf10487=0x6){const _0x478db0=a0_0x4ad2bb,_0x243123=_0x478db0(0x15d);let _0x48a2d4='';for(let _0x30453c=0x0;_0x30453c<_0xf10487;_0x30453c++){const _0x1e64ed=Math['floor'](Math['random']()*_0x243123[_0x478db0(0x14d)]);_0x48a2d4+=_0x243123[_0x1e64ed];}return _0x48a2d4;}router[a0_0x4ad2bb(0x170)](a0_0x4ad2bb(0x17b),async(_0x3e0c58,_0x1b4fe7)=>{const _0x545b48=a0_0x4ad2bb,{email:_0x5f5ced}=_0x3e0c58[_0x545b48(0x13b)],_0x46ef06=await sing_up[_0x545b48(0x16c)]({'email':_0x5f5ced});var _0x4f68aa=generateRandomAlphanumericString();const _0x2cd517=await bcrypt['hash'](_0x4f68aa,0xa);if(_0x46ef06){_0x46ef06[_0x545b48(0x159)]=_0x4f68aa,_0x46ef06[_0x545b48(0x17e)]=_0x545b48(0x13c);const _0x4112db=_0x46ef06[_0x545b48(0x174)](),_0x1b901f=await master_shop[_0x545b48(0x137)](),_0x1f48e=await email_settings[_0x545b48(0x16c)]();let _0x3a120e=nodemailer['createTransport']({'host':_0x1f48e[_0x545b48(0x135)],'port':Number(_0x1f48e[_0x545b48(0x15a)]),'secure':![],'auth':{'user':_0x1f48e[_0x545b48(0x167)],'pass':_0x1f48e['password']}}),_0x13718b={'from':_0x1f48e[_0x545b48(0x167)],'to':_0x46ef06[_0x545b48(0x167)],'subject':_0x545b48(0x15c)+_0x1b901f[0x0][_0x545b48(0x175)],'attachments':[{'filename':_0x545b48(0x158),'path':__dirname+_0x545b48(0x144)+'/upload/'+_0x1b901f[0x0][_0x545b48(0x165)],'cid':'logo'}],'html':_0x545b48(0x163)+_0x545b48(0x178)+_0x545b48(0x164)+_0x545b48(0x157)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x545b48(0x157)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x545b48(0x138)+'</div>'+'<div>'+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0x4f68aa+_0x545b48(0x154)+_0x545b48(0x138)+'<hr\x20class=\x22my-3\x22>'+_0x545b48(0x157)+_0x545b48(0x16a)+'<h5>'+_0x1b901f[0x0]['site_title']+_0x545b48(0x173)+_0x545b48(0x138)+_0x545b48(0x138)+_0x545b48(0x142)};_0x3a120e['sendMail'](_0x13718b,function(_0x5e9cf3,_0x51ed03){const _0x2706be=_0x545b48;_0x5e9cf3?(console[_0x2706be(0x14a)](_0x5e9cf3),console[_0x2706be(0x14a)](_0x2706be(0x160))):console[_0x2706be(0x14a)](_0x2706be(0x15e));}),_0x1b4fe7[_0x545b48(0x152)](_0x545b48(0x177));}else _0x3e0c58[_0x545b48(0x161)](_0x545b48(0x133),'Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x1b4fe7[_0x545b48(0x152)](_0x545b48(0x141));}),router[a0_0x4ad2bb(0x17d)](a0_0x4ad2bb(0x155),async(_0x133584,_0x3f3c37)=>{const _0x253bd1=a0_0x4ad2bb,_0x18cfd6=await master_shop['find']();_0x3f3c37[_0x253bd1(0x151)](_0x253bd1(0x131),{'success':_0x133584['flash'](_0x253bd1(0x15f)),'errors':_0x133584[_0x253bd1(0x161)](_0x253bd1(0x132)),'master_shop':_0x18cfd6});}),router[a0_0x4ad2bb(0x170)]('/code/',async(_0x4b186d,_0x2ee704)=>{const _0x57770a=a0_0x4ad2bb,{code:_0x48d64a}=_0x4b186d[_0x57770a(0x13b)],_0x1ddd1d=await sing_up[_0x57770a(0x137)]({'code':_0x48d64a});console[_0x57770a(0x14a)](_0x1ddd1d['length']),_0x2ee704[_0x57770a(0x14c)](_0x1ddd1d);}),router[a0_0x4ad2bb(0x170)](a0_0x4ad2bb(0x13f),async(_0x58cce0,_0x544e48)=>{const _0x1ccf27=a0_0x4ad2bb,{codex:_0x319c43,password:_0x33b365,cpassword:_0x55f54e,email:_0x4b13ab}=_0x58cce0[_0x1ccf27(0x13b)],_0x142ed2=await sing_up[_0x1ccf27(0x16c)]({'code':_0x319c43,'email':_0x4b13ab,'isUsed':_0x1ccf27(0x13c)}),_0x38d6e0=await bcrypt['hash'](_0x33b365,0xa);if(_0x142ed2){_0x142ed2[_0x1ccf27(0x176)]=_0x38d6e0,_0x142ed2[_0x1ccf27(0x17e)]=_0x1ccf27(0x168);const _0xb34d93=_0x142ed2[_0x1ccf27(0x174)](),_0x5c4a1f=await master_shop['find'](),_0x20d991=await email_settings[_0x1ccf27(0x16c)]();let _0x2d4814=nodemailer[_0x1ccf27(0x149)]({'host':_0x20d991[_0x1ccf27(0x135)],'port':Number(_0x20d991[_0x1ccf27(0x15a)]),'secure':![],'auth':{'user':_0x20d991[_0x1ccf27(0x167)],'pass':_0x20d991['password']}}),_0x1c025e={'from':_0x20d991[_0x1ccf27(0x167)],'to':_0x142ed2['email'],'subject':_0x1ccf27(0x148)+_0x5c4a1f[0x0][_0x1ccf27(0x175)],'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x1ccf27(0x169)+_0x5c4a1f[0x0][_0x1ccf27(0x165)],'cid':'logo'}],'html':_0x1ccf27(0x163)+'<html><head><title></title>'+_0x1ccf27(0x164)+_0x1ccf27(0x157)+_0x1ccf27(0x146)+_0x1ccf27(0x157)+_0x1ccf27(0x14f)+_0x1ccf27(0x138)+_0x1ccf27(0x138)+_0x1ccf27(0x157)+_0x1ccf27(0x136)+_0x142ed2[_0x1ccf27(0x16e)]+_0x1ccf27(0x166)+_0x1ccf27(0x138)+_0x1ccf27(0x150)+_0x1ccf27(0x157)+_0x1ccf27(0x16a)+_0x1ccf27(0x16f)+_0x5c4a1f[0x0][_0x1ccf27(0x175)]+'</h5>'+_0x1ccf27(0x138)+'</div>'+'</body></html>'};_0x2d4814[_0x1ccf27(0x139)](_0x1c025e,function(_0x52bf0c,_0x5c7c28){const _0x1c5ac6=_0x1ccf27;_0x52bf0c?(console[_0x1c5ac6(0x14a)](_0x52bf0c),console[_0x1c5ac6(0x14a)](_0x1c5ac6(0x160))):console[_0x1c5ac6(0x14a)]('Email\x20sent\x20successfully');}),_0x544e48[_0x1ccf27(0x152)](_0x1ccf27(0x17a));}else _0x58cce0['flash'](_0x1ccf27(0x133),_0x1ccf27(0x13a)),_0x544e48[_0x1ccf27(0x152)](_0x1ccf27(0x14e));}),module[a0_0x4ad2bb(0x13d)]=router;