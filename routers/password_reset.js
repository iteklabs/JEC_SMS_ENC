function a0_0x19e9(){const _0x40e679=['Email\x20sent\x20successfully','532599jaJQTE','Password\x20Reset\x20-\x20','351MBrwEK','exports','email','redirect','nodemailer','<div>','bcryptjs','length','38970EJqSQu','success','371oeaSWe','/code/','<p>Hello\x20','123507ogeQxp','/code_password/','sendMail','/../public','4HyYpDM','</head><body>','hash','floor','False','errors','random','email_code','error','124188CKamSA','/view','<!DOCTYPE\x20html>','body','Router','password','save','<h5>','/login/','Password\x20Successfuly\x20Reset\x20-\x20','1559496gHpPaw','62672iFNtyo','</h5>','</div>','/forgotPassword/view','email_reset','/upload/','name','24DDUCpF','5XCknAg','</body></html>','<strong>\x20Regards\x20</strong>','post','Logo.png','../middleware/auth','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','findOne','<html><head><title></title>','json','image','site_title','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','<hr\x20class=\x22my-3\x22>','log','True','flash','host','port','code','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','logo','find','createTransport','Error\x20Occurs','1732621yyFBcy','</b></h1></p>'];a0_0x19e9=function(){return _0x40e679;};return a0_0x19e9();}const a0_0x2e66ee=a0_0x5d15;function a0_0x5d15(_0x40a956,_0x2d2479){const _0x19e964=a0_0x19e9();return a0_0x5d15=function(_0x5d1567,_0x3dfc22){_0x5d1567=_0x5d1567-0xad;let _0x42f21c=_0x19e964[_0x5d1567];return _0x42f21c;},a0_0x5d15(_0x40a956,_0x2d2479);}(function(_0xcdc0b6,_0x35f117){const _0xa2b0e6=a0_0x5d15,_0x3c8686=_0xcdc0b6();while(!![]){try{const _0x3f01d3=-parseInt(_0xa2b0e6(0xf7))/0x1+-parseInt(_0xa2b0e6(0xaf))/0x2*(-parseInt(_0xa2b0e6(0xe8))/0x3)+parseInt(_0xa2b0e6(0xb8))/0x4+parseInt(_0xa2b0e6(0xcb))/0x5*(parseInt(_0xa2b0e6(0xc2))/0x6)+parseInt(_0xa2b0e6(0xf4))/0x7*(-parseInt(_0xa2b0e6(0xc3))/0x8)+-parseInt(_0xa2b0e6(0xea))/0x9*(parseInt(_0xa2b0e6(0xf2))/0xa)+-parseInt(_0xa2b0e6(0xe5))/0xb*(-parseInt(_0xa2b0e6(0xca))/0xc);if(_0x3f01d3===_0x35f117)break;else _0x3c8686['push'](_0x3c8686['shift']());}catch(_0x391220){_0x3c8686['push'](_0x3c8686['shift']());}}}(a0_0x19e9,0x42017));const express=require('express'),app=express(),router=express[a0_0x2e66ee(0xbc)](),bcrypt=require(a0_0x2e66ee(0xf0)),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x2e66ee(0xd0)),nodemailer=require(a0_0x2e66ee(0xee));router['get']('/view',async(_0x1c91ea,_0x420842)=>{const _0x27d988=a0_0x2e66ee,_0x301e43=await master_shop['find']();_0x420842['render'](_0x27d988(0xc7),{'success':_0x1c91ea[_0x27d988(0xdc)](_0x27d988(0xf3)),'errors':_0x1c91ea[_0x27d988(0xdc)](_0x27d988(0xb4)),'master_shop':_0x301e43});});function generateRandomAlphanumericString(_0x1f00cc=0x6){const _0x1d886c=a0_0x2e66ee,_0x48604c=_0x1d886c(0xd7);let _0x3e8eb8='';for(let _0x280674=0x0;_0x280674<_0x1f00cc;_0x280674++){const _0x1731ee=Math[_0x1d886c(0xb2)](Math[_0x1d886c(0xb5)]()*_0x48604c[_0x1d886c(0xf1)]);_0x3e8eb8+=_0x48604c[_0x1731ee];}return _0x3e8eb8;}router['post'](a0_0x2e66ee(0xb9),async(_0x4f8a08,_0x39ec84)=>{const _0x47bc0e=a0_0x2e66ee,{email:_0x100375}=_0x4f8a08[_0x47bc0e(0xbb)],_0x224322=await sing_up['findOne']({'email':_0x100375});var _0xde8b76=generateRandomAlphanumericString();const _0x412651=await bcrypt['hash'](_0xde8b76,0xa);if(_0x224322){_0x224322[_0x47bc0e(0xdf)]=_0xde8b76,_0x224322['isUsed']=_0x47bc0e(0xb3);const _0x1004d8=_0x224322[_0x47bc0e(0xbe)](),_0x2db0a9=await master_shop[_0x47bc0e(0xe2)](),_0x1467c4=await email_settings[_0x47bc0e(0xd2)]();let _0x357953=nodemailer['createTransport']({'host':_0x1467c4[_0x47bc0e(0xdd)],'port':Number(_0x1467c4[_0x47bc0e(0xde)]),'secure':![],'auth':{'user':_0x1467c4[_0x47bc0e(0xec)],'pass':_0x1467c4[_0x47bc0e(0xbd)]}}),_0x25bedf={'from':_0x1467c4['email'],'to':_0x224322[_0x47bc0e(0xec)],'subject':_0x47bc0e(0xe9)+_0x2db0a9[0x0][_0x47bc0e(0xd6)],'attachments':[{'filename':'Logo.png','path':__dirname+_0x47bc0e(0xae)+_0x47bc0e(0xc8)+_0x2db0a9[0x0][_0x47bc0e(0xd5)],'cid':_0x47bc0e(0xe1)}],'html':_0x47bc0e(0xba)+_0x47bc0e(0xd3)+_0x47bc0e(0xb0)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+_0x47bc0e(0xe0)+_0x47bc0e(0xc5)+_0x47bc0e(0xc5)+_0x47bc0e(0xef)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0xde8b76+_0x47bc0e(0xe6)+'</div>'+_0x47bc0e(0xd9)+'<div>'+_0x47bc0e(0xcd)+'<h5>'+_0x2db0a9[0x0][_0x47bc0e(0xd6)]+'</h5>'+_0x47bc0e(0xc5)+_0x47bc0e(0xc5)+_0x47bc0e(0xcc)};_0x357953[_0x47bc0e(0xad)](_0x25bedf,function(_0x8bbeac,_0x243473){const _0xfb8ff1=_0x47bc0e;_0x8bbeac?(console[_0xfb8ff1(0xda)](_0x8bbeac),console[_0xfb8ff1(0xda)]('Error\x20Occurs')):console[_0xfb8ff1(0xda)]('Email\x20sent\x20successfully');}),_0x39ec84[_0x47bc0e(0xed)]('/forgotPassword/code/');}else _0x4f8a08[_0x47bc0e(0xdc)](_0x47bc0e(0xb7),_0x47bc0e(0xd8)),_0x39ec84[_0x47bc0e(0xed)](_0x47bc0e(0xc6));}),router['get'](a0_0x2e66ee(0xf5),async(_0x19c844,_0x2d8595)=>{const _0x2c2d14=a0_0x2e66ee,_0x5c5a3a=await master_shop['find']();_0x2d8595['render'](_0x2c2d14(0xb6),{'success':_0x19c844[_0x2c2d14(0xdc)]('success'),'errors':_0x19c844['flash'](_0x2c2d14(0xb4)),'master_shop':_0x5c5a3a});}),router['post']('/code/',async(_0x5b0419,_0x36ac18)=>{const _0x2a9a45=a0_0x2e66ee,{code:_0xa53caa}=_0x5b0419[_0x2a9a45(0xbb)],_0x386433=await sing_up[_0x2a9a45(0xe2)]({'code':_0xa53caa});console[_0x2a9a45(0xda)](_0x386433[_0x2a9a45(0xf1)]),_0x36ac18[_0x2a9a45(0xd4)](_0x386433);}),router[a0_0x2e66ee(0xce)](a0_0x2e66ee(0xf8),async(_0x8a5e51,_0x4cf3af)=>{const _0x4fb958=a0_0x2e66ee,{codex:_0x277497,password:_0x33c73e,cpassword:_0xb74dce,email:_0x5ca934}=_0x8a5e51[_0x4fb958(0xbb)],_0x7780dd=await sing_up[_0x4fb958(0xd2)]({'code':_0x277497,'email':_0x5ca934,'isUsed':_0x4fb958(0xb3)}),_0x37a62e=await bcrypt[_0x4fb958(0xb1)](_0x33c73e,0xa);if(_0x7780dd){_0x7780dd[_0x4fb958(0xbd)]=_0x37a62e,_0x7780dd['isUsed']=_0x4fb958(0xdb);const _0x4bc7f1=_0x7780dd[_0x4fb958(0xbe)](),_0x16e1cc=await master_shop[_0x4fb958(0xe2)](),_0x20c28f=await email_settings[_0x4fb958(0xd2)]();let _0x1b2bc7=nodemailer[_0x4fb958(0xe3)]({'host':_0x20c28f[_0x4fb958(0xdd)],'port':Number(_0x20c28f[_0x4fb958(0xde)]),'secure':![],'auth':{'user':_0x20c28f['email'],'pass':_0x20c28f[_0x4fb958(0xbd)]}}),_0xe25ea={'from':_0x20c28f[_0x4fb958(0xec)],'to':_0x7780dd['email'],'subject':_0x4fb958(0xc1)+_0x16e1cc[0x0][_0x4fb958(0xd6)],'attachments':[{'filename':_0x4fb958(0xcf),'path':__dirname+_0x4fb958(0xae)+_0x4fb958(0xc8)+_0x16e1cc[0x0][_0x4fb958(0xd5)],'cid':_0x4fb958(0xe1)}],'html':'<!DOCTYPE\x20html>'+_0x4fb958(0xd3)+_0x4fb958(0xb0)+'<div>'+_0x4fb958(0xd1)+_0x4fb958(0xef)+_0x4fb958(0xe0)+_0x4fb958(0xc5)+_0x4fb958(0xc5)+'<div>'+_0x4fb958(0xf6)+_0x7780dd[_0x4fb958(0xc9)]+',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>'+_0x4fb958(0xc5)+_0x4fb958(0xd9)+_0x4fb958(0xef)+_0x4fb958(0xcd)+_0x4fb958(0xbf)+_0x16e1cc[0x0][_0x4fb958(0xd6)]+_0x4fb958(0xc4)+'</div>'+_0x4fb958(0xc5)+_0x4fb958(0xcc)};_0x1b2bc7[_0x4fb958(0xad)](_0xe25ea,function(_0x285393,_0x433643){const _0x1e24ae=_0x4fb958;_0x285393?(console[_0x1e24ae(0xda)](_0x285393),console[_0x1e24ae(0xda)](_0x1e24ae(0xe4))):console['log'](_0x1e24ae(0xe7));}),_0x4cf3af[_0x4fb958(0xed)](_0x4fb958(0xc0));}else _0x8a5e51[_0x4fb958(0xdc)](_0x4fb958(0xb7),_0x4fb958(0xd8)),_0x4cf3af[_0x4fb958(0xed)]('/forgotPassword/code');}),module[a0_0x2e66ee(0xeb)]=router;