const a0_0x446978=a0_0x5344;(function(_0x1f6128,_0x581623){const _0x5a0a32=a0_0x5344,_0x4182e8=_0x1f6128();while(!![]){try{const _0xb52ff5=-parseInt(_0x5a0a32(0xdd))/0x1+parseInt(_0x5a0a32(0xbf))/0x2*(parseInt(_0x5a0a32(0xa9))/0x3)+-parseInt(_0x5a0a32(0xb2))/0x4*(-parseInt(_0x5a0a32(0xcb))/0x5)+parseInt(_0x5a0a32(0xaa))/0x6*(-parseInt(_0x5a0a32(0xae))/0x7)+-parseInt(_0x5a0a32(0x9f))/0x8*(parseInt(_0x5a0a32(0xa1))/0x9)+parseInt(_0x5a0a32(0xe1))/0xa*(-parseInt(_0x5a0a32(0xd5))/0xb)+parseInt(_0x5a0a32(0xd2))/0xc*(parseInt(_0x5a0a32(0xb1))/0xd);if(_0xb52ff5===_0x581623)break;else _0x4182e8['push'](_0x4182e8['shift']());}catch(_0x106542){_0x4182e8['push'](_0x4182e8['shift']());}}}(a0_0x2e64,0xc1574));const express=require(a0_0x446978(0xe3)),app=express(),router=express['Router'](),bcrypt=require(a0_0x446978(0xbe)),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x446978(0xce)),nodemailer=require(a0_0x446978(0xd9));function a0_0x2e64(){const _0x569ae4=['errors','redirect','hash','exports','1194759GuCkne','4254onPhlh','password','length','find','4018iLzjkk','False','<!DOCTYPE\x20html>','52QtaTKs','7228hLbRmK','<hr\x20class=\x22my-3\x22>','<div>','body','/code/','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','port','success','image','/../public','createTransport','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','bcryptjs','6nqqjCQ','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','/login/','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','findOne','random','site_title','<p>Hello\x20','/upload/','</head><body>','json','</h5>','2035yHlNQo','True','/view','../middleware/auth','/forgotPassword/code','Error\x20Occurs','post','9060636AZZLfP','host','log','8499359bfaurY','/code_password/','Logo.png','Email\x20sent\x20successfully','nodemailer','<h5>','get','error','1087355TXoaKl',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','floor','sendMail','20SllJKZ','logo','express','<strong>\x20Regards\x20</strong>','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','render','Password\x20Reset\x20-\x20','email','</body></html>','flash','/forgotPassword/view','isUsed','8950696nRHCjL','</div>','9gfjXnq','</b></h1></p>','/forgotPassword/code/','email_code'];a0_0x2e64=function(){return _0x569ae4;};return a0_0x2e64();}router['get'](a0_0x446978(0xcd),async(_0x535bce,_0x4c64c3)=>{const _0x28da5d=a0_0x446978,_0x214b29=await master_shop[_0x28da5d(0xad)]();_0x4c64c3['render']('email_reset',{'success':_0x535bce[_0x28da5d(0xea)]('success'),'errors':_0x535bce[_0x28da5d(0xea)](_0x28da5d(0xa5)),'master_shop':_0x214b29});});function generateRandomAlphanumericString(_0x400d39=0x6){const _0x242fd9=a0_0x446978,_0x5aff50=_0x242fd9(0xe5);let _0x3882bd='';for(let _0x3fb270=0x0;_0x3fb270<_0x400d39;_0x3fb270++){const _0x317c4b=Math[_0x242fd9(0xdf)](Math[_0x242fd9(0xc4)]()*_0x5aff50[_0x242fd9(0xac)]);_0x3882bd+=_0x5aff50[_0x317c4b];}return _0x3882bd;}function a0_0x5344(_0x539e63,_0x239248){const _0x2e64a=a0_0x2e64();return a0_0x5344=function(_0x53442d,_0x553c5e){_0x53442d=_0x53442d-0x9f;let _0x5942a3=_0x2e64a[_0x53442d];return _0x5942a3;},a0_0x5344(_0x539e63,_0x239248);}router[a0_0x446978(0xd1)](a0_0x446978(0xcd),async(_0x32b286,_0xcd6e63)=>{const _0x2f5b20=a0_0x446978,{email:_0x5d8170}=_0x32b286[_0x2f5b20(0xb5)],_0x2084f4=await sing_up[_0x2f5b20(0xc3)]({'email':_0x5d8170});var _0x54865f=generateRandomAlphanumericString();const _0x1ae8b8=await bcrypt[_0x2f5b20(0xa7)](_0x54865f,0xa);if(_0x2084f4){_0x2084f4['code']=_0x54865f,_0x2084f4[_0x2f5b20(0xec)]=_0x2f5b20(0xaf);const _0x26dbde=_0x2084f4['save'](),_0xce7a7b=await master_shop[_0x2f5b20(0xad)](),_0x4696f2=await email_settings[_0x2f5b20(0xc3)]();let _0x100f7b=nodemailer[_0x2f5b20(0xbc)]({'host':_0x4696f2[_0x2f5b20(0xd3)],'port':Number(_0x4696f2['port']),'secure':![],'auth':{'user':_0x4696f2[_0x2f5b20(0xe8)],'pass':_0x4696f2[_0x2f5b20(0xab)]}}),_0x5dcda5={'from':_0x4696f2[_0x2f5b20(0xe8)],'to':_0x2084f4[_0x2f5b20(0xe8)],'subject':_0x2f5b20(0xe7)+_0xce7a7b[0x0]['site_title'],'attachments':[{'filename':_0x2f5b20(0xd7),'path':__dirname+_0x2f5b20(0xbb)+_0x2f5b20(0xc7)+_0xce7a7b[0x0]['image'],'cid':_0x2f5b20(0xe2)}],'html':_0x2f5b20(0xb0)+'<html><head><title></title>'+_0x2f5b20(0xc8)+_0x2f5b20(0xb4)+_0x2f5b20(0xc2)+_0x2f5b20(0xb4)+_0x2f5b20(0xc0)+_0x2f5b20(0xa0)+'</div>'+_0x2f5b20(0xb4)+_0x2f5b20(0xbd)+_0x54865f+_0x2f5b20(0xa2)+_0x2f5b20(0xa0)+_0x2f5b20(0xb3)+_0x2f5b20(0xb4)+_0x2f5b20(0xe4)+'<h5>'+_0xce7a7b[0x0][_0x2f5b20(0xc5)]+_0x2f5b20(0xca)+'</div>'+_0x2f5b20(0xa0)+_0x2f5b20(0xe9)};_0x100f7b['sendMail'](_0x5dcda5,function(_0x3b8a04,_0x16f194){const _0x262960=_0x2f5b20;_0x3b8a04?(console[_0x262960(0xd4)](_0x3b8a04),console[_0x262960(0xd4)](_0x262960(0xd0))):console['log'](_0x262960(0xd8));}),_0xcd6e63[_0x2f5b20(0xa6)](_0x2f5b20(0xa3));}else _0x32b286[_0x2f5b20(0xea)]('error',_0x2f5b20(0xb7)),_0xcd6e63[_0x2f5b20(0xa6)](_0x2f5b20(0xeb));}),router[a0_0x446978(0xdb)](a0_0x446978(0xb6),async(_0x5c626a,_0x5971ad)=>{const _0x430814=a0_0x446978,_0x22165f=await master_shop[_0x430814(0xad)]();_0x5971ad[_0x430814(0xe6)](_0x430814(0xa4),{'success':_0x5c626a[_0x430814(0xea)](_0x430814(0xb9)),'errors':_0x5c626a[_0x430814(0xea)](_0x430814(0xa5)),'master_shop':_0x22165f});}),router['post'](a0_0x446978(0xb6),async(_0x118419,_0xd6aed3)=>{const _0x2a2e76=a0_0x446978,{code:_0x54606a}=_0x118419[_0x2a2e76(0xb5)],_0x3ff78e=await sing_up[_0x2a2e76(0xad)]({'code':_0x54606a});console['log'](_0x3ff78e[_0x2a2e76(0xac)]),_0xd6aed3[_0x2a2e76(0xc9)](_0x3ff78e);}),router[a0_0x446978(0xd1)](a0_0x446978(0xd6),async(_0x418e66,_0x43a480)=>{const _0x4dc72e=a0_0x446978,{codex:_0x7ce784,password:_0x28b6d7,cpassword:_0x2831ad,email:_0x4a7d76}=_0x418e66[_0x4dc72e(0xb5)],_0x494435=await sing_up[_0x4dc72e(0xc3)]({'code':_0x7ce784,'email':_0x4a7d76,'isUsed':'False'}),_0xf5f7ab=await bcrypt['hash'](_0x28b6d7,0xa);if(_0x494435){_0x494435[_0x4dc72e(0xab)]=_0xf5f7ab,_0x494435[_0x4dc72e(0xec)]=_0x4dc72e(0xcc);const _0x30bbcb=_0x494435['save'](),_0x298c42=await master_shop['find'](),_0x5b6132=await email_settings[_0x4dc72e(0xc3)]();let _0x5f2b55=nodemailer[_0x4dc72e(0xbc)]({'host':_0x5b6132[_0x4dc72e(0xd3)],'port':Number(_0x5b6132[_0x4dc72e(0xb8)]),'secure':![],'auth':{'user':_0x5b6132[_0x4dc72e(0xe8)],'pass':_0x5b6132[_0x4dc72e(0xab)]}}),_0x54ae2a={'from':_0x5b6132['email'],'to':_0x494435[_0x4dc72e(0xe8)],'subject':'Password\x20Successfuly\x20Reset\x20-\x20'+_0x298c42[0x0]['site_title'],'attachments':[{'filename':_0x4dc72e(0xd7),'path':__dirname+_0x4dc72e(0xbb)+_0x4dc72e(0xc7)+_0x298c42[0x0][_0x4dc72e(0xba)],'cid':_0x4dc72e(0xe2)}],'html':_0x4dc72e(0xb0)+'<html><head><title></title>'+_0x4dc72e(0xc8)+_0x4dc72e(0xb4)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+_0x4dc72e(0xc0)+_0x4dc72e(0xa0)+_0x4dc72e(0xa0)+_0x4dc72e(0xb4)+_0x4dc72e(0xc6)+_0x494435['name']+_0x4dc72e(0xde)+_0x4dc72e(0xa0)+'<hr\x20class=\x22my-3\x22>'+_0x4dc72e(0xb4)+_0x4dc72e(0xe4)+_0x4dc72e(0xda)+_0x298c42[0x0]['site_title']+'</h5>'+_0x4dc72e(0xa0)+'</div>'+_0x4dc72e(0xe9)};_0x5f2b55[_0x4dc72e(0xe0)](_0x54ae2a,function(_0x271add,_0x492b7b){const _0x3c9431=_0x4dc72e;_0x271add?(console[_0x3c9431(0xd4)](_0x271add),console[_0x3c9431(0xd4)](_0x3c9431(0xd0))):console[_0x3c9431(0xd4)](_0x3c9431(0xd8));}),_0x43a480[_0x4dc72e(0xa6)](_0x4dc72e(0xc1));}else _0x418e66['flash'](_0x4dc72e(0xdc),'Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x43a480[_0x4dc72e(0xa6)](_0x4dc72e(0xcf));}),module[a0_0x446978(0xa8)]=router;