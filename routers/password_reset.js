const a0_0x96f014=a0_0x3b9a;(function(_0x22017e,_0x5eae00){const _0x2fa76a=a0_0x3b9a,_0x36f122=_0x22017e();while(!![]){try{const _0x3f08ae=-parseInt(_0x2fa76a(0x137))/0x1+-parseInt(_0x2fa76a(0x133))/0x2*(-parseInt(_0x2fa76a(0x119))/0x3)+-parseInt(_0x2fa76a(0x104))/0x4+-parseInt(_0x2fa76a(0x13d))/0x5*(parseInt(_0x2fa76a(0x13e))/0x6)+-parseInt(_0x2fa76a(0x11e))/0x7+-parseInt(_0x2fa76a(0x10e))/0x8+parseInt(_0x2fa76a(0x107))/0x9*(parseInt(_0x2fa76a(0x11f))/0xa);if(_0x3f08ae===_0x5eae00)break;else _0x36f122['push'](_0x36f122['shift']());}catch(_0x425fa9){_0x36f122['push'](_0x36f122['shift']());}}}(a0_0x3f2f,0x6621a));const express=require(a0_0x96f014(0xfc)),app=express(),router=express['Router'](),bcrypt=require('bcryptjs'),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x96f014(0x124)),auth=require(a0_0x96f014(0x103)),nodemailer=require(a0_0x96f014(0x106));function a0_0x3f2f(){const _0x57b09f=['<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','/code/','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','</body></html>','password','84JxGBHh','/forgotPassword/code','floor','createTransport','585439XuKiAc','/forgotPassword/view','Error\x20Occurs','get','hash','logo','904185BPztsL','6NygHAU','findOne','image','isUsed','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','length','json','email_reset','Logo.png','email','express','True','<strong>\x20Regards\x20</strong>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','<p>Hello\x20','name','redirect','../middleware/auth','1266848EyIbdU','save','nodemailer','362421DkmQvd','sendMail','render','errors','log','site_title','Password\x20Reset\x20-\x20','4706160rIGfSu','<!DOCTYPE\x20html>','random','code','</div>','</h5>','<html><head><title></title>','body','email_code','error','host','23016BXVytR','exports','<h5>','False','<div>','5387081eqBFgC','630IKeOkd','flash','/login/',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','/upload/','../models/all_models','</b></h1></p>','</head><body>','success','find','<hr\x20class=\x22my-3\x22>','port','post','/../public','/view'];a0_0x3f2f=function(){return _0x57b09f;};return a0_0x3f2f();}router[a0_0x96f014(0x13a)]('/view',async(_0x18ab38,_0x2cf36d)=>{const _0x1ae753=a0_0x96f014,_0x5659da=await master_shop[_0x1ae753(0x128)]();_0x2cf36d[_0x1ae753(0x109)](_0x1ae753(0x145),{'success':_0x18ab38[_0x1ae753(0x120)]('success'),'errors':_0x18ab38['flash']('errors'),'master_shop':_0x5659da});});function generateRandomAlphanumericString(_0x2ac633=0x6){const _0x402886=a0_0x96f014,_0x451f3c=_0x402886(0x130);let _0x3ee93c='';for(let _0x38803a=0x0;_0x38803a<_0x2ac633;_0x38803a++){const _0x58bdd3=Math[_0x402886(0x135)](Math[_0x402886(0x110)]()*_0x451f3c['length']);_0x3ee93c+=_0x451f3c[_0x58bdd3];}return _0x3ee93c;}function a0_0x3b9a(_0x4b15a4,_0x447f18){const _0x3f2fe1=a0_0x3f2f();return a0_0x3b9a=function(_0x3b9a73,_0x308ee6){_0x3b9a73=_0x3b9a73-0xfb;let _0x95a81d=_0x3f2fe1[_0x3b9a73];return _0x95a81d;},a0_0x3b9a(_0x4b15a4,_0x447f18);}router[a0_0x96f014(0x12b)](a0_0x96f014(0x12d),async(_0x306dd7,_0x32b71f)=>{const _0x61153a=a0_0x96f014,{email:_0x2807cb}=_0x306dd7['body'],_0x5e1636=await sing_up[_0x61153a(0x13f)]({'email':_0x2807cb});var _0x398727=generateRandomAlphanumericString();const _0x255221=await bcrypt[_0x61153a(0x13b)](_0x398727,0xa);if(_0x5e1636){_0x5e1636[_0x61153a(0x111)]=_0x398727,_0x5e1636[_0x61153a(0x141)]=_0x61153a(0x11c);const _0x247a31=_0x5e1636['save'](),_0x2a3403=await master_shop[_0x61153a(0x128)](),_0x3485a9=await email_settings[_0x61153a(0x13f)]();let _0x4415e4=nodemailer[_0x61153a(0x136)]({'host':_0x3485a9[_0x61153a(0x118)],'port':Number(_0x3485a9['port']),'secure':![],'auth':{'user':_0x3485a9['email'],'pass':_0x3485a9['password']}}),_0x2be3db={'from':_0x3485a9[_0x61153a(0xfb)],'to':_0x5e1636[_0x61153a(0xfb)],'subject':_0x61153a(0x10d)+_0x2a3403[0x0][_0x61153a(0x10c)],'attachments':[{'filename':_0x61153a(0x146),'path':__dirname+'/../public'+_0x61153a(0x123)+_0x2a3403[0x0][_0x61153a(0x140)],'cid':_0x61153a(0x13c)}],'html':_0x61153a(0x10f)+_0x61153a(0x114)+_0x61153a(0x126)+_0x61153a(0x11d)+_0x61153a(0x12e)+_0x61153a(0x11d)+_0x61153a(0xff)+'</div>'+'</div>'+'<div>'+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0x398727+_0x61153a(0x125)+_0x61153a(0x112)+_0x61153a(0x129)+_0x61153a(0x11d)+'<strong>\x20Regards\x20</strong>'+_0x61153a(0x11b)+_0x2a3403[0x0][_0x61153a(0x10c)]+'</h5>'+_0x61153a(0x112)+_0x61153a(0x112)+_0x61153a(0x131)};_0x4415e4[_0x61153a(0x108)](_0x2be3db,function(_0x530c41,_0x399eef){const _0x5b75fd=_0x61153a;_0x530c41?(console['log'](_0x530c41),console[_0x5b75fd(0x10b)](_0x5b75fd(0x139))):console[_0x5b75fd(0x10b)]('Email\x20sent\x20successfully');}),_0x32b71f[_0x61153a(0x102)]('/forgotPassword/code/');}else _0x306dd7[_0x61153a(0x120)](_0x61153a(0x117),_0x61153a(0x142)),_0x32b71f[_0x61153a(0x102)](_0x61153a(0x138));}),router[a0_0x96f014(0x13a)](a0_0x96f014(0x12f),async(_0x4d9f47,_0x23548a)=>{const _0x19a9e5=a0_0x96f014,_0x5ae03e=await master_shop['find']();_0x23548a['render'](_0x19a9e5(0x116),{'success':_0x4d9f47[_0x19a9e5(0x120)](_0x19a9e5(0x127)),'errors':_0x4d9f47[_0x19a9e5(0x120)](_0x19a9e5(0x10a)),'master_shop':_0x5ae03e});}),router[a0_0x96f014(0x12b)](a0_0x96f014(0x12f),async(_0x32a65c,_0x27fc59)=>{const _0x273595=a0_0x96f014,{code:_0x4bec2b}=_0x32a65c[_0x273595(0x115)],_0x8acf02=await sing_up[_0x273595(0x128)]({'code':_0x4bec2b});console[_0x273595(0x10b)](_0x8acf02[_0x273595(0x143)]),_0x27fc59[_0x273595(0x144)](_0x8acf02);}),router['post']('/code_password/',async(_0x277f60,_0x27d6f0)=>{const _0x359079=a0_0x96f014,{codex:_0x5a0a77,password:_0x4b393f,cpassword:_0x232e25,email:_0x861325}=_0x277f60[_0x359079(0x115)],_0x2c37e2=await sing_up['findOne']({'code':_0x5a0a77,'email':_0x861325,'isUsed':_0x359079(0x11c)}),_0x189f53=await bcrypt[_0x359079(0x13b)](_0x4b393f,0xa);if(_0x2c37e2){_0x2c37e2['password']=_0x189f53,_0x2c37e2[_0x359079(0x141)]=_0x359079(0xfd);const _0x460b82=_0x2c37e2[_0x359079(0x105)](),_0x5ea946=await master_shop[_0x359079(0x128)](),_0x5af560=await email_settings['findOne']();let _0x34200e=nodemailer['createTransport']({'host':_0x5af560['host'],'port':Number(_0x5af560[_0x359079(0x12a)]),'secure':![],'auth':{'user':_0x5af560['email'],'pass':_0x5af560[_0x359079(0x132)]}}),_0x18148f={'from':_0x5af560[_0x359079(0xfb)],'to':_0x2c37e2['email'],'subject':'Password\x20Successfuly\x20Reset\x20-\x20'+_0x5ea946[0x0]['site_title'],'attachments':[{'filename':_0x359079(0x146),'path':__dirname+_0x359079(0x12c)+_0x359079(0x123)+_0x5ea946[0x0][_0x359079(0x140)],'cid':_0x359079(0x13c)}],'html':_0x359079(0x10f)+_0x359079(0x114)+_0x359079(0x126)+_0x359079(0x11d)+_0x359079(0x12e)+'<div>'+_0x359079(0xff)+'</div>'+_0x359079(0x112)+'<div>'+_0x359079(0x100)+_0x2c37e2[_0x359079(0x101)]+_0x359079(0x122)+_0x359079(0x112)+_0x359079(0x129)+_0x359079(0x11d)+_0x359079(0xfe)+'<h5>'+_0x5ea946[0x0][_0x359079(0x10c)]+_0x359079(0x113)+_0x359079(0x112)+_0x359079(0x112)+'</body></html>'};_0x34200e[_0x359079(0x108)](_0x18148f,function(_0x26a719,_0x3eab49){const _0xc3f9f2=_0x359079;_0x26a719?(console[_0xc3f9f2(0x10b)](_0x26a719),console['log'](_0xc3f9f2(0x139))):console[_0xc3f9f2(0x10b)]('Email\x20sent\x20successfully');}),_0x27d6f0[_0x359079(0x102)](_0x359079(0x121));}else _0x277f60[_0x359079(0x120)](_0x359079(0x117),_0x359079(0x142)),_0x27d6f0[_0x359079(0x102)](_0x359079(0x134));}),module[a0_0x96f014(0x11a)]=router;