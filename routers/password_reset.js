const a0_0x2aa1ac=a0_0x464d;(function(_0x26054d,_0x41fd99){const _0x47f0e3=a0_0x464d,_0x17fe9a=_0x26054d();while(!![]){try{const _0x5024cb=-parseInt(_0x47f0e3(0x1cd))/0x1*(parseInt(_0x47f0e3(0x1e8))/0x2)+-parseInt(_0x47f0e3(0x1d3))/0x3+-parseInt(_0x47f0e3(0x1cb))/0x4*(parseInt(_0x47f0e3(0x1c1))/0x5)+parseInt(_0x47f0e3(0x1d0))/0x6+parseInt(_0x47f0e3(0x1c9))/0x7*(-parseInt(_0x47f0e3(0x1d6))/0x8)+-parseInt(_0x47f0e3(0x1cc))/0x9*(-parseInt(_0x47f0e3(0x1ba))/0xa)+-parseInt(_0x47f0e3(0x1ce))/0xb*(-parseInt(_0x47f0e3(0x1a4))/0xc);if(_0x5024cb===_0x41fd99)break;else _0x17fe9a['push'](_0x17fe9a['shift']());}catch(_0x57397a){_0x17fe9a['push'](_0x17fe9a['shift']());}}}(a0_0x5cd6,0x60f3c));const express=require('express'),app=express(),router=express['Router'](),bcrypt=require(a0_0x2aa1ac(0x1b0)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x2aa1ac(0x1e1)),auth=require(a0_0x2aa1ac(0x1e0)),nodemailer=require('nodemailer');router[a0_0x2aa1ac(0x1ae)](a0_0x2aa1ac(0x1e7),async(_0xb223fb,_0x2f8d95)=>{const _0x5a066c=a0_0x2aa1ac,_0x19d5df=await master_shop[_0x5a066c(0x1ac)]();_0x2f8d95['render'](_0x5a066c(0x1da),{'success':_0xb223fb['flash']('success'),'errors':_0xb223fb[_0x5a066c(0x1b9)](_0x5a066c(0x1db)),'master_shop':_0x19d5df});});function a0_0x5cd6(){const _0x52272e=['2920zMwKsw','</head><body>','<html><head><title></title>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','password','json','success','140qJiIOV','logo','host','code','hash','/login/','findOne','post','28SbjHmM','/forgotPassword/view','43372SVygbi','9279Zdazzf','118931ggfXSV','3743267InxIvc','/forgotPassword/code/','796122JSFBJA','exports','<h5>','720495zkVzkr','sendMail','floor','1199368Svhgdw','Password\x20Reset\x20-\x20','isUsed','Error\x20Occurs','email_reset','errors','Logo.png','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','False','/code/','../middleware/auth','../models/all_models','site_title','email','<div>','Password\x20Successfuly\x20Reset\x20-\x20','<!DOCTYPE\x20html>','/view','10WgzwPi','<p>Hello\x20','createTransport','email_code','render','/code_password/','length','body','60vdkOsN','Email\x20sent\x20successfully','redirect','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','</div>','<strong>\x20Regards\x20</strong>','/../public',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','find','save','get','image','bcryptjs','/upload/','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','port','</body></html>','</h5>','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','<hr\x20class=\x22my-3\x22>','log','flash'];a0_0x5cd6=function(){return _0x52272e;};return a0_0x5cd6();}function generateRandomAlphanumericString(_0x417dbb=0x6){const _0x1b3255=a0_0x2aa1ac,_0xb18c5c=_0x1b3255(0x1dd);let _0x335584='';for(let _0x1e5862=0x0;_0x1e5862<_0x417dbb;_0x1e5862++){const _0x5b8076=Math[_0x1b3255(0x1d5)](Math['random']()*_0xb18c5c['length']);_0x335584+=_0xb18c5c[_0x5b8076];}return _0x335584;}function a0_0x464d(_0x37ea16,_0x1a6c11){const _0x5cd6f7=a0_0x5cd6();return a0_0x464d=function(_0x464d24,_0xa2b888){_0x464d24=_0x464d24-0x19e;let _0x3db0e5=_0x5cd6f7[_0x464d24];return _0x3db0e5;},a0_0x464d(_0x37ea16,_0x1a6c11);}router['post'](a0_0x2aa1ac(0x1e7),async(_0x1f1aa5,_0x423db5)=>{const _0x56a57f=a0_0x2aa1ac,{email:_0x54dccc}=_0x1f1aa5[_0x56a57f(0x1a3)],_0x571bfd=await sing_up[_0x56a57f(0x1c7)]({'email':_0x54dccc});var _0x5dd3e8=generateRandomAlphanumericString();const _0x57785c=await bcrypt[_0x56a57f(0x1c5)](_0x5dd3e8,0xa);if(_0x571bfd){_0x571bfd[_0x56a57f(0x1c4)]=_0x5dd3e8,_0x571bfd[_0x56a57f(0x1d8)]=_0x56a57f(0x1de);const _0x4dc92e=_0x571bfd[_0x56a57f(0x1ad)](),_0x118bf2=await master_shop[_0x56a57f(0x1ac)](),_0x24ab6f=await email_settings[_0x56a57f(0x1c7)]();let _0x2626d3=nodemailer['createTransport']({'host':_0x24ab6f[_0x56a57f(0x1c3)],'port':Number(_0x24ab6f[_0x56a57f(0x1b3)]),'secure':![],'auth':{'user':_0x24ab6f[_0x56a57f(0x1e3)],'pass':_0x24ab6f[_0x56a57f(0x1be)]}}),_0x35f7f0={'from':_0x24ab6f['email'],'to':_0x571bfd[_0x56a57f(0x1e3)],'subject':_0x56a57f(0x1d7)+_0x118bf2[0x0][_0x56a57f(0x1e2)],'attachments':[{'filename':_0x56a57f(0x1dc),'path':__dirname+_0x56a57f(0x1aa)+_0x56a57f(0x1b1)+_0x118bf2[0x0][_0x56a57f(0x1af)],'cid':_0x56a57f(0x1c2)}],'html':_0x56a57f(0x1e6)+'<html><head><title></title>'+_0x56a57f(0x1bb)+_0x56a57f(0x1e4)+_0x56a57f(0x1bd)+_0x56a57f(0x1e4)+_0x56a57f(0x1b2)+_0x56a57f(0x1a8)+_0x56a57f(0x1a8)+_0x56a57f(0x1e4)+_0x56a57f(0x1b6)+_0x5dd3e8+'</b></h1></p>'+_0x56a57f(0x1a8)+_0x56a57f(0x1b7)+'<div>'+_0x56a57f(0x1a9)+_0x56a57f(0x1d2)+_0x118bf2[0x0][_0x56a57f(0x1e2)]+_0x56a57f(0x1b5)+_0x56a57f(0x1a8)+_0x56a57f(0x1a8)+'</body></html>'};_0x2626d3[_0x56a57f(0x1d4)](_0x35f7f0,function(_0x1f4c09,_0x3d92dc){const _0x59d772=_0x56a57f;_0x1f4c09?(console[_0x59d772(0x1b8)](_0x1f4c09),console[_0x59d772(0x1b8)]('Error\x20Occurs')):console[_0x59d772(0x1b8)]('Email\x20sent\x20successfully');}),_0x423db5[_0x56a57f(0x1a6)](_0x56a57f(0x1cf));}else _0x1f1aa5[_0x56a57f(0x1b9)]('error',_0x56a57f(0x1a7)),_0x423db5[_0x56a57f(0x1a6)](_0x56a57f(0x1ca));}),router[a0_0x2aa1ac(0x1ae)]('/code/',async(_0x5d4802,_0x4026a9)=>{const _0x2e2d26=a0_0x2aa1ac,_0x2f0c47=await master_shop[_0x2e2d26(0x1ac)]();_0x4026a9[_0x2e2d26(0x1a0)](_0x2e2d26(0x19f),{'success':_0x5d4802['flash'](_0x2e2d26(0x1c0)),'errors':_0x5d4802[_0x2e2d26(0x1b9)](_0x2e2d26(0x1db)),'master_shop':_0x2f0c47});}),router[a0_0x2aa1ac(0x1c8)](a0_0x2aa1ac(0x1df),async(_0x38b6a1,_0x17ec92)=>{const _0x55db1c=a0_0x2aa1ac,{code:_0x543707}=_0x38b6a1['body'],_0x89887e=await sing_up[_0x55db1c(0x1ac)]({'code':_0x543707});console['log'](_0x89887e[_0x55db1c(0x1a2)]),_0x17ec92[_0x55db1c(0x1bf)](_0x89887e);}),router[a0_0x2aa1ac(0x1c8)](a0_0x2aa1ac(0x1a1),async(_0x9c81a8,_0xa56c7)=>{const _0x49d67e=a0_0x2aa1ac,{codex:_0x35103b,password:_0x19eb6c,cpassword:_0x5ee6a8,email:_0x257412}=_0x9c81a8[_0x49d67e(0x1a3)],_0x386ca4=await sing_up['findOne']({'code':_0x35103b,'email':_0x257412,'isUsed':_0x49d67e(0x1de)}),_0x4c1160=await bcrypt[_0x49d67e(0x1c5)](_0x19eb6c,0xa);if(_0x386ca4){_0x386ca4['password']=_0x4c1160,_0x386ca4[_0x49d67e(0x1d8)]='True';const _0x5894aa=_0x386ca4[_0x49d67e(0x1ad)](),_0x3fcd2a=await master_shop[_0x49d67e(0x1ac)](),_0x459bb6=await email_settings[_0x49d67e(0x1c7)]();let _0x245558=nodemailer[_0x49d67e(0x19e)]({'host':_0x459bb6['host'],'port':Number(_0x459bb6[_0x49d67e(0x1b3)]),'secure':![],'auth':{'user':_0x459bb6['email'],'pass':_0x459bb6['password']}}),_0x9b4efe={'from':_0x459bb6[_0x49d67e(0x1e3)],'to':_0x386ca4[_0x49d67e(0x1e3)],'subject':_0x49d67e(0x1e5)+_0x3fcd2a[0x0]['site_title'],'attachments':[{'filename':_0x49d67e(0x1dc),'path':__dirname+_0x49d67e(0x1aa)+'/upload/'+_0x3fcd2a[0x0]['image'],'cid':_0x49d67e(0x1c2)}],'html':'<!DOCTYPE\x20html>'+_0x49d67e(0x1bc)+_0x49d67e(0x1bb)+_0x49d67e(0x1e4)+_0x49d67e(0x1bd)+'<div>'+_0x49d67e(0x1b2)+_0x49d67e(0x1a8)+_0x49d67e(0x1a8)+_0x49d67e(0x1e4)+_0x49d67e(0x1e9)+_0x386ca4['name']+_0x49d67e(0x1ab)+_0x49d67e(0x1a8)+_0x49d67e(0x1b7)+'<div>'+_0x49d67e(0x1a9)+_0x49d67e(0x1d2)+_0x3fcd2a[0x0][_0x49d67e(0x1e2)]+_0x49d67e(0x1b5)+_0x49d67e(0x1a8)+_0x49d67e(0x1a8)+_0x49d67e(0x1b4)};_0x245558[_0x49d67e(0x1d4)](_0x9b4efe,function(_0x15b618,_0x3bf044){const _0x1c2a20=_0x49d67e;_0x15b618?(console[_0x1c2a20(0x1b8)](_0x15b618),console[_0x1c2a20(0x1b8)](_0x1c2a20(0x1d9))):console[_0x1c2a20(0x1b8)](_0x1c2a20(0x1a5));}),_0xa56c7[_0x49d67e(0x1a6)](_0x49d67e(0x1c6));}else _0x9c81a8[_0x49d67e(0x1b9)]('error',_0x49d67e(0x1a7)),_0xa56c7['redirect']('/forgotPassword/code');}),module[a0_0x2aa1ac(0x1d1)]=router;