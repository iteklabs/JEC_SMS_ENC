const a0_0x29392d=a0_0x30cb;function a0_0x318f(){const _0x5cabb4=['render','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','nodemailer','</div>','logo','email_code','save','Error\x20Occurs','282528Oindpm','email_reset','sendMail','findOne','238pVyEkU','/forgotPassword/code','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','/upload/','code','</head><body>','password','createTransport','Email\x20sent\x20successfully','42WHqgYN','/../public','<h5>','Logo.png','32ZBwdnw','460757DaBlvB','396pOjKIe','8YJeoIn','210xzihxD','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','email','floor','1326476BtdHxJ','isUsed','/forgotPassword/code/','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','body','</body></html>','log','post','bcryptjs','length','name','<html><head><title></title>','hash','image','True','4796073GqcFnR','/code/','<div>','errors','success','56820QUNZle','/forgotPassword/view','/view','redirect','29958QxcTvW','find','Password\x20Successfuly\x20Reset\x20-\x20','/code_password/','Router','exports','False','<hr\x20class=\x22my-3\x22>','Password\x20Reset\x20-\x20','<strong>\x20Regards\x20</strong>','../middleware/auth','random','1591759gwxxyI','host','port','/login/','flash','<!DOCTYPE\x20html>','get','site_title'];a0_0x318f=function(){return _0x5cabb4;};return a0_0x318f();}(function(_0x11dba5,_0x2a19da){const _0x19654f=a0_0x30cb,_0x4f511e=_0x11dba5();while(!![]){try{const _0x4c4f74=-parseInt(_0x19654f(0x17c))/0x1+parseInt(_0x19654f(0x167))/0x2*(-parseInt(_0x19654f(0x194))/0x3)+-parseInt(_0x19654f(0x174))/0x4*(-parseInt(_0x19654f(0x190))/0x5)+parseInt(_0x19654f(0x163))/0x6*(-parseInt(_0x19654f(0x170))/0x7)+-parseInt(_0x19654f(0x177))/0x8*(-parseInt(_0x19654f(0x18b))/0x9)+-parseInt(_0x19654f(0x178))/0xa*(parseInt(_0x19654f(0x175))/0xb)+-parseInt(_0x19654f(0x176))/0xc*(-parseInt(_0x19654f(0x1a0))/0xd);if(_0x4c4f74===_0x2a19da)break;else _0x4f511e['push'](_0x4f511e['shift']());}catch(_0x455e50){_0x4f511e['push'](_0x4f511e['shift']());}}}(a0_0x318f,0xf1147));const express=require('express'),app=express(),router=express[a0_0x29392d(0x198)](),bcrypt=require(a0_0x29392d(0x184)),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x29392d(0x19e)),nodemailer=require(a0_0x29392d(0x15d));router[a0_0x29392d(0x1a6)](a0_0x29392d(0x192),async(_0x132d77,_0x284ce6)=>{const _0x1947eb=a0_0x29392d,_0xcba9ff=await master_shop[_0x1947eb(0x195)]();_0x284ce6[_0x1947eb(0x15b)](_0x1947eb(0x164),{'success':_0x132d77[_0x1947eb(0x1a4)](_0x1947eb(0x18f)),'errors':_0x132d77['flash'](_0x1947eb(0x18e)),'master_shop':_0xcba9ff});});function a0_0x30cb(_0x2140f8,_0x529657){const _0x318fa7=a0_0x318f();return a0_0x30cb=function(_0x30cb4d,_0x31f3d4){_0x30cb4d=_0x30cb4d-0x15b;let _0x47b922=_0x318fa7[_0x30cb4d];return _0x47b922;},a0_0x30cb(_0x2140f8,_0x529657);}function generateRandomAlphanumericString(_0x18afe3=0x6){const _0x140d16=a0_0x29392d,_0x1f289a=_0x140d16(0x17f);let _0x253a03='';for(let _0x54e6d7=0x0;_0x54e6d7<_0x18afe3;_0x54e6d7++){const _0x20a8e6=Math[_0x140d16(0x17b)](Math[_0x140d16(0x19f)]()*_0x1f289a[_0x140d16(0x185)]);_0x253a03+=_0x1f289a[_0x20a8e6];}return _0x253a03;}router[a0_0x29392d(0x183)](a0_0x29392d(0x192),async(_0x2b912c,_0x2b744e)=>{const _0x27aa87=a0_0x29392d,{email:_0x47bc06}=_0x2b912c[_0x27aa87(0x180)],_0x37b39e=await sing_up[_0x27aa87(0x166)]({'email':_0x47bc06});var _0x596d80=generateRandomAlphanumericString();const _0x524ea5=await bcrypt['hash'](_0x596d80,0xa);if(_0x37b39e){_0x37b39e[_0x27aa87(0x16b)]=_0x596d80,_0x37b39e[_0x27aa87(0x17d)]=_0x27aa87(0x19a);const _0xc74a56=_0x37b39e[_0x27aa87(0x161)](),_0x547897=await master_shop[_0x27aa87(0x195)](),_0x36ec2f=await email_settings['findOne']();let _0x107017=nodemailer[_0x27aa87(0x16e)]({'host':_0x36ec2f['host'],'port':Number(_0x36ec2f[_0x27aa87(0x1a2)]),'secure':![],'auth':{'user':_0x36ec2f[_0x27aa87(0x17a)],'pass':_0x36ec2f[_0x27aa87(0x16d)]}}),_0x5b3ec1={'from':_0x36ec2f['email'],'to':_0x37b39e[_0x27aa87(0x17a)],'subject':_0x27aa87(0x19c)+_0x547897[0x0]['site_title'],'attachments':[{'filename':_0x27aa87(0x173),'path':__dirname+_0x27aa87(0x171)+_0x27aa87(0x16a)+_0x547897[0x0][_0x27aa87(0x189)],'cid':_0x27aa87(0x15f)}],'html':_0x27aa87(0x1a5)+_0x27aa87(0x187)+_0x27aa87(0x16c)+_0x27aa87(0x18d)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+_0x27aa87(0x15c)+_0x27aa87(0x15e)+_0x27aa87(0x15e)+_0x27aa87(0x18d)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0x596d80+'</b></h1></p>'+_0x27aa87(0x15e)+_0x27aa87(0x19b)+_0x27aa87(0x18d)+_0x27aa87(0x19d)+_0x27aa87(0x172)+_0x547897[0x0][_0x27aa87(0x1a7)]+'</h5>'+_0x27aa87(0x15e)+_0x27aa87(0x15e)+'</body></html>'};_0x107017[_0x27aa87(0x165)](_0x5b3ec1,function(_0x2888cb,_0x6daca5){const _0x219533=_0x27aa87;_0x2888cb?(console[_0x219533(0x182)](_0x2888cb),console[_0x219533(0x182)](_0x219533(0x162))):console[_0x219533(0x182)](_0x219533(0x16f));}),_0x2b744e[_0x27aa87(0x193)](_0x27aa87(0x17e));}else _0x2b912c[_0x27aa87(0x1a4)]('error',_0x27aa87(0x169)),_0x2b744e[_0x27aa87(0x193)](_0x27aa87(0x191));}),router['get']('/code/',async(_0x4999e2,_0xc635c3)=>{const _0xd4caa7=a0_0x29392d,_0x5d326f=await master_shop[_0xd4caa7(0x195)]();_0xc635c3[_0xd4caa7(0x15b)](_0xd4caa7(0x160),{'success':_0x4999e2[_0xd4caa7(0x1a4)](_0xd4caa7(0x18f)),'errors':_0x4999e2[_0xd4caa7(0x1a4)]('errors'),'master_shop':_0x5d326f});}),router[a0_0x29392d(0x183)](a0_0x29392d(0x18c),async(_0x3ba2ff,_0x35754f)=>{const _0x5c8770=a0_0x29392d,{code:_0x104cf4}=_0x3ba2ff['body'],_0x2a538f=await sing_up['find']({'code':_0x104cf4});console[_0x5c8770(0x182)](_0x2a538f[_0x5c8770(0x185)]),_0x35754f['json'](_0x2a538f);}),router[a0_0x29392d(0x183)](a0_0x29392d(0x197),async(_0x3514ac,_0x1ffa38)=>{const _0x3a06e5=a0_0x29392d,{codex:_0x8c9ade,password:_0x3ff1a5,cpassword:_0xa330c6,email:_0x5a4d71}=_0x3514ac['body'],_0x43b836=await sing_up[_0x3a06e5(0x166)]({'code':_0x8c9ade,'email':_0x5a4d71,'isUsed':_0x3a06e5(0x19a)}),_0x2d0199=await bcrypt[_0x3a06e5(0x188)](_0x3ff1a5,0xa);if(_0x43b836){_0x43b836['password']=_0x2d0199,_0x43b836[_0x3a06e5(0x17d)]=_0x3a06e5(0x18a);const _0x2664ab=_0x43b836['save'](),_0x276de5=await master_shop[_0x3a06e5(0x195)](),_0x383f8b=await email_settings[_0x3a06e5(0x166)]();let _0x885a5c=nodemailer[_0x3a06e5(0x16e)]({'host':_0x383f8b[_0x3a06e5(0x1a1)],'port':Number(_0x383f8b[_0x3a06e5(0x1a2)]),'secure':![],'auth':{'user':_0x383f8b[_0x3a06e5(0x17a)],'pass':_0x383f8b[_0x3a06e5(0x16d)]}}),_0x4d8ce1={'from':_0x383f8b[_0x3a06e5(0x17a)],'to':_0x43b836[_0x3a06e5(0x17a)],'subject':_0x3a06e5(0x196)+_0x276de5[0x0][_0x3a06e5(0x1a7)],'attachments':[{'filename':'Logo.png','path':__dirname+_0x3a06e5(0x171)+_0x3a06e5(0x16a)+_0x276de5[0x0][_0x3a06e5(0x189)],'cid':_0x3a06e5(0x15f)}],'html':_0x3a06e5(0x1a5)+_0x3a06e5(0x187)+_0x3a06e5(0x16c)+_0x3a06e5(0x18d)+_0x3a06e5(0x179)+_0x3a06e5(0x18d)+_0x3a06e5(0x15c)+_0x3a06e5(0x15e)+_0x3a06e5(0x15e)+'<div>'+'<p>Hello\x20'+_0x43b836[_0x3a06e5(0x186)]+',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>'+_0x3a06e5(0x15e)+_0x3a06e5(0x19b)+_0x3a06e5(0x18d)+'<strong>\x20Regards\x20</strong>'+_0x3a06e5(0x172)+_0x276de5[0x0]['site_title']+'</h5>'+_0x3a06e5(0x15e)+'</div>'+_0x3a06e5(0x181)};_0x885a5c[_0x3a06e5(0x165)](_0x4d8ce1,function(_0x513266,_0x245f17){const _0x43f5a2=_0x3a06e5;_0x513266?(console['log'](_0x513266),console['log'](_0x43f5a2(0x162))):console[_0x43f5a2(0x182)](_0x43f5a2(0x16f));}),_0x1ffa38[_0x3a06e5(0x193)](_0x3a06e5(0x1a3));}else _0x3514ac[_0x3a06e5(0x1a4)]('error','Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x1ffa38['redirect'](_0x3a06e5(0x168));}),module[a0_0x29392d(0x199)]=router;