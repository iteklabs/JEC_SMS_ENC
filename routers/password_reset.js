const a0_0x6c8811=a0_0x3d24;(function(_0x187a90,_0x36b37b){const _0x4cfcb2=a0_0x3d24,_0x1b3211=_0x187a90();while(!![]){try{const _0x2946d4=parseInt(_0x4cfcb2(0xcd))/0x1+parseInt(_0x4cfcb2(0xd4))/0x2+-parseInt(_0x4cfcb2(0xbc))/0x3*(parseInt(_0x4cfcb2(0xda))/0x4)+-parseInt(_0x4cfcb2(0xa3))/0x5+parseInt(_0x4cfcb2(0xd5))/0x6+parseInt(_0x4cfcb2(0xb4))/0x7+-parseInt(_0x4cfcb2(0xb9))/0x8*(parseInt(_0x4cfcb2(0xd7))/0x9);if(_0x2946d4===_0x36b37b)break;else _0x1b3211['push'](_0x1b3211['shift']());}catch(_0x598d9e){_0x1b3211['push'](_0x1b3211['shift']());}}}(a0_0x2fc7,0xb3790));const express=require(a0_0x6c8811(0xa7)),app=express(),router=express[a0_0x6c8811(0xbe)](),bcrypt=require(a0_0x6c8811(0xa9)),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require('../middleware/auth'),nodemailer=require('nodemailer');function a0_0x2fc7(){const _0x28e3ea=['654404zYxODf','/login/','Password\x20Reset\x20-\x20','exports','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','<h5>','isUsed','2552666UQwdkF','2389554ImTXIa','<div>','1899SymAZt','redirect','Error\x20Occurs','1105308FVWkUz','</h5>','post','/code_password/','/forgotPassword/view','password','sendMail','Email\x20sent\x20successfully','render','<strong>\x20Regards\x20</strong>','length','find','<p>Hello\x20','random','save','/../public','</head><body>','email_code','json','3542770MLhKFt','<html><head><title></title>','<!DOCTYPE\x20html>','host','express','True','bcryptjs',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','success','</body></html>','/forgotPassword/code/','Logo.png','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','flash','</div>','/view','1180095VxTQgT','/upload/','logo','/forgotPassword/code','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','8528WDroSp','hash','createTransport','9qtYjJG','port','Router','error','log','site_title','</b></h1></p>','body','<hr\x20class=\x22my-3\x22>','findOne','email','/code/','image','Password\x20Successfuly\x20Reset\x20-\x20','email_reset','False','errors'];a0_0x2fc7=function(){return _0x28e3ea;};return a0_0x2fc7();}function a0_0x3d24(_0x5ca458,_0x8614e){const _0x2fc7bd=a0_0x2fc7();return a0_0x3d24=function(_0x3d2489,_0x549fcd){_0x3d2489=_0x3d2489-0x92;let _0x5f2900=_0x2fc7bd[_0x3d2489];return _0x5f2900;},a0_0x3d24(_0x5ca458,_0x8614e);}router['get']('/view',async(_0x43806c,_0x473f70)=>{const _0x36bfce=a0_0x6c8811,_0x256c6d=await master_shop['find']();_0x473f70['render'](_0x36bfce(0xca),{'success':_0x43806c[_0x36bfce(0xb1)](_0x36bfce(0xac)),'errors':_0x43806c['flash'](_0x36bfce(0xcc)),'master_shop':_0x256c6d});});function generateRandomAlphanumericString(_0x1a84be=0x6){const _0x2f0f52=a0_0x6c8811,_0x5ba326='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0x30eddf='';for(let _0x4b1327=0x0;_0x4b1327<_0x1a84be;_0x4b1327++){const _0x558456=Math['floor'](Math[_0x2f0f52(0x9d)]()*_0x5ba326[_0x2f0f52(0x9a)]);_0x30eddf+=_0x5ba326[_0x558456];}return _0x30eddf;}router[a0_0x6c8811(0x92)](a0_0x6c8811(0xb3),async(_0x5c6e9c,_0x4e9db1)=>{const _0x2062ea=a0_0x6c8811,{email:_0x844e81}=_0x5c6e9c['body'],_0x28e473=await sing_up[_0x2062ea(0xc5)]({'email':_0x844e81});var _0x56eba5=generateRandomAlphanumericString();const _0x2b9b58=await bcrypt['hash'](_0x56eba5,0xa);if(_0x28e473){_0x28e473['code']=_0x56eba5,_0x28e473[_0x2062ea(0xd3)]=_0x2062ea(0xcb);const _0x143ca0=_0x28e473[_0x2062ea(0x9e)](),_0xe298fc=await master_shop['find'](),_0x129a45=await email_settings['findOne']();let _0x41d9fe=nodemailer[_0x2062ea(0xbb)]({'host':_0x129a45[_0x2062ea(0xa6)],'port':Number(_0x129a45[_0x2062ea(0xbd)]),'secure':![],'auth':{'user':_0x129a45['email'],'pass':_0x129a45[_0x2062ea(0x95)]}}),_0x1fe135={'from':_0x129a45[_0x2062ea(0xc6)],'to':_0x28e473['email'],'subject':_0x2062ea(0xcf)+_0xe298fc[0x0][_0x2062ea(0xc1)],'attachments':[{'filename':_0x2062ea(0xaf),'path':__dirname+_0x2062ea(0x9f)+'/upload/'+_0xe298fc[0x0][_0x2062ea(0xc8)],'cid':_0x2062ea(0xb6)}],'html':_0x2062ea(0xa5)+_0x2062ea(0xa4)+'</head><body>'+_0x2062ea(0xd6)+_0x2062ea(0xab)+_0x2062ea(0xd6)+_0x2062ea(0xb8)+_0x2062ea(0xb2)+'</div>'+_0x2062ea(0xd6)+_0x2062ea(0xb0)+_0x56eba5+_0x2062ea(0xc2)+_0x2062ea(0xb2)+_0x2062ea(0xc4)+_0x2062ea(0xd6)+_0x2062ea(0x99)+_0x2062ea(0xd2)+_0xe298fc[0x0][_0x2062ea(0xc1)]+_0x2062ea(0xdb)+_0x2062ea(0xb2)+'</div>'+_0x2062ea(0xad)};_0x41d9fe[_0x2062ea(0x96)](_0x1fe135,function(_0x53c646,_0x1439f7){const _0x564a81=_0x2062ea;_0x53c646?(console[_0x564a81(0xc0)](_0x53c646),console[_0x564a81(0xc0)]('Error\x20Occurs')):console[_0x564a81(0xc0)](_0x564a81(0x97));}),_0x4e9db1[_0x2062ea(0xd8)](_0x2062ea(0xae));}else _0x5c6e9c[_0x2062ea(0xb1)](_0x2062ea(0xbf),_0x2062ea(0xd1)),_0x4e9db1['redirect'](_0x2062ea(0x94));}),router['get']('/code/',async(_0x1cddae,_0x29b35e)=>{const _0x3a310b=a0_0x6c8811,_0x255698=await master_shop[_0x3a310b(0x9b)]();_0x29b35e[_0x3a310b(0x98)](_0x3a310b(0xa1),{'success':_0x1cddae[_0x3a310b(0xb1)](_0x3a310b(0xac)),'errors':_0x1cddae['flash'](_0x3a310b(0xcc)),'master_shop':_0x255698});}),router[a0_0x6c8811(0x92)](a0_0x6c8811(0xc7),async(_0x27cde9,_0xd8d7d4)=>{const _0x3ce219=a0_0x6c8811,{code:_0x5ae515}=_0x27cde9[_0x3ce219(0xc3)],_0x38e0dd=await sing_up[_0x3ce219(0x9b)]({'code':_0x5ae515});console[_0x3ce219(0xc0)](_0x38e0dd[_0x3ce219(0x9a)]),_0xd8d7d4[_0x3ce219(0xa2)](_0x38e0dd);}),router[a0_0x6c8811(0x92)](a0_0x6c8811(0x93),async(_0x401950,_0x34762a)=>{const _0x5acf9d=a0_0x6c8811,{codex:_0x15e7d9,password:_0x3368cd,cpassword:_0x28a39e,email:_0x44bc27}=_0x401950[_0x5acf9d(0xc3)],_0x47c84a=await sing_up[_0x5acf9d(0xc5)]({'code':_0x15e7d9,'email':_0x44bc27,'isUsed':_0x5acf9d(0xcb)}),_0x4be112=await bcrypt[_0x5acf9d(0xba)](_0x3368cd,0xa);if(_0x47c84a){_0x47c84a[_0x5acf9d(0x95)]=_0x4be112,_0x47c84a[_0x5acf9d(0xd3)]=_0x5acf9d(0xa8);const _0x27d3ee=_0x47c84a[_0x5acf9d(0x9e)](),_0x2727d8=await master_shop[_0x5acf9d(0x9b)](),_0x94b739=await email_settings['findOne']();let _0x48c660=nodemailer[_0x5acf9d(0xbb)]({'host':_0x94b739[_0x5acf9d(0xa6)],'port':Number(_0x94b739[_0x5acf9d(0xbd)]),'secure':![],'auth':{'user':_0x94b739['email'],'pass':_0x94b739['password']}}),_0x38b3d3={'from':_0x94b739['email'],'to':_0x47c84a[_0x5acf9d(0xc6)],'subject':_0x5acf9d(0xc9)+_0x2727d8[0x0][_0x5acf9d(0xc1)],'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x5acf9d(0xb5)+_0x2727d8[0x0][_0x5acf9d(0xc8)],'cid':'logo'}],'html':_0x5acf9d(0xa5)+_0x5acf9d(0xa4)+_0x5acf9d(0xa0)+_0x5acf9d(0xd6)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x5acf9d(0xd6)+_0x5acf9d(0xb8)+_0x5acf9d(0xb2)+_0x5acf9d(0xb2)+_0x5acf9d(0xd6)+_0x5acf9d(0x9c)+_0x47c84a['name']+_0x5acf9d(0xaa)+_0x5acf9d(0xb2)+_0x5acf9d(0xc4)+'<div>'+_0x5acf9d(0x99)+_0x5acf9d(0xd2)+_0x2727d8[0x0][_0x5acf9d(0xc1)]+_0x5acf9d(0xdb)+_0x5acf9d(0xb2)+_0x5acf9d(0xb2)+_0x5acf9d(0xad)};_0x48c660['sendMail'](_0x38b3d3,function(_0x4d99fc,_0x33b793){const _0x1c3dbe=_0x5acf9d;_0x4d99fc?(console[_0x1c3dbe(0xc0)](_0x4d99fc),console[_0x1c3dbe(0xc0)](_0x1c3dbe(0xd9))):console[_0x1c3dbe(0xc0)](_0x1c3dbe(0x97));}),_0x34762a[_0x5acf9d(0xd8)](_0x5acf9d(0xce));}else _0x401950[_0x5acf9d(0xb1)](_0x5acf9d(0xbf),'Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x34762a['redirect'](_0x5acf9d(0xb7));}),module[a0_0x6c8811(0xd0)]=router;