const a0_0x10dfa6=a0_0x1c0e;(function(_0x461218,_0x5c6cd2){const _0x4d7c80=a0_0x1c0e,_0x2592ca=_0x461218();while(!![]){try{const _0x28c159=-parseInt(_0x4d7c80(0xfa))/0x1*(parseInt(_0x4d7c80(0x120))/0x2)+parseInt(_0x4d7c80(0x101))/0x3*(-parseInt(_0x4d7c80(0x114))/0x4)+-parseInt(_0x4d7c80(0xf2))/0x5*(parseInt(_0x4d7c80(0x113))/0x6)+-parseInt(_0x4d7c80(0xea))/0x7+-parseInt(_0x4d7c80(0xdd))/0x8*(-parseInt(_0x4d7c80(0x123))/0x9)+parseInt(_0x4d7c80(0x11d))/0xa*(-parseInt(_0x4d7c80(0xeb))/0xb)+parseInt(_0x4d7c80(0x11a))/0xc*(parseInt(_0x4d7c80(0x10b))/0xd);if(_0x28c159===_0x5c6cd2)break;else _0x2592ca['push'](_0x2592ca['shift']());}catch(_0x203f7e){_0x2592ca['push'](_0x2592ca['shift']());}}}(a0_0x21c8,0x1d44e));const express=require(a0_0x10dfa6(0xf6)),app=express(),router=express['Router'](),bcrypt=require('bcryptjs'),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x10dfa6(0xf7)),nodemailer=require('nodemailer');function a0_0x21c8(){const _0x27e015=['<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','15332cYPTmJ','email','Logo.png','host','length','<p>Hello\x20','createTransport','122964VxGuny','/forgotPassword/view','port','Email\x20sent\x20successfully','get','find','Password\x20Reset\x20-\x20','/upload/','Error\x20Occurs','error','13LwISYd','hash','site_title','sendMail','errors','body','findOne','Password\x20Successfuly\x20Reset\x20-\x20','693960lhUTWM','8FgCgTH',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','<strong>\x20Regards\x20</strong>','flash','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','isUsed','8456340XhScCm','password','exports','10eCcUPe','email_reset','json','2BegTeq','<!DOCTYPE\x20html>','random','18QhYPGB','/code/','</body></html>','<hr\x20class=\x22my-3\x22>','/code_password/','logo','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','<html><head><title></title>','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','code','134992oHVaYc','log','False','floor','/forgotPassword/code/','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','image','</h5>','</head><body>','/../public','save','success','/login/','1381268oiYrWe','2290915nCFJfe','True','</b></h1></p>','/forgotPassword/code','post','render','<h5>','5IXTzKP','</div>','/view','<div>','express','../middleware/auth','redirect'];a0_0x21c8=function(){return _0x27e015;};return a0_0x21c8();}function a0_0x1c0e(_0x4d8d64,_0x49f13f){const _0x21c8cf=a0_0x21c8();return a0_0x1c0e=function(_0x1c0e09,_0x5e945e){_0x1c0e09=_0x1c0e09-0xd9;let _0x77b23c=_0x21c8cf[_0x1c0e09];return _0x77b23c;},a0_0x1c0e(_0x4d8d64,_0x49f13f);}router[a0_0x10dfa6(0x105)](a0_0x10dfa6(0xf4),async(_0x56a3bf,_0xb1042e)=>{const _0x4e6127=a0_0x10dfa6,_0x51fef8=await master_shop[_0x4e6127(0x106)]();_0xb1042e['render'](_0x4e6127(0x11e),{'success':_0x56a3bf[_0x4e6127(0x117)](_0x4e6127(0xe8)),'errors':_0x56a3bf['flash']('errors'),'master_shop':_0x51fef8});});function generateRandomAlphanumericString(_0x5a2290=0x6){const _0x18641c=a0_0x10dfa6,_0x29ebe4=_0x18641c(0xdb);let _0x1526d5='';for(let _0x249cff=0x0;_0x249cff<_0x5a2290;_0x249cff++){const _0x4c5eb7=Math[_0x18641c(0xe0)](Math[_0x18641c(0x122)]()*_0x29ebe4['length']);_0x1526d5+=_0x29ebe4[_0x4c5eb7];}return _0x1526d5;}router[a0_0x10dfa6(0xef)](a0_0x10dfa6(0xf4),async(_0x57a061,_0x48a59e)=>{const _0x4f6f7c=a0_0x10dfa6,{email:_0xa6d7bb}=_0x57a061[_0x4f6f7c(0x110)],_0x257007=await sing_up[_0x4f6f7c(0x111)]({'email':_0xa6d7bb});var _0x43def5=generateRandomAlphanumericString();const _0xf4313c=await bcrypt[_0x4f6f7c(0x10c)](_0x43def5,0xa);if(_0x257007){_0x257007[_0x4f6f7c(0xdc)]=_0x43def5,_0x257007[_0x4f6f7c(0x119)]=_0x4f6f7c(0xdf);const _0x140f50=_0x257007[_0x4f6f7c(0xe7)](),_0x498458=await master_shop[_0x4f6f7c(0x106)](),_0x2acbbf=await email_settings['findOne']();let _0x526b99=nodemailer[_0x4f6f7c(0x100)]({'host':_0x2acbbf['host'],'port':Number(_0x2acbbf[_0x4f6f7c(0x103)]),'secure':![],'auth':{'user':_0x2acbbf[_0x4f6f7c(0xfb)],'pass':_0x2acbbf[_0x4f6f7c(0x11b)]}}),_0x3a7f66={'from':_0x2acbbf[_0x4f6f7c(0xfb)],'to':_0x257007[_0x4f6f7c(0xfb)],'subject':_0x4f6f7c(0x107)+_0x498458[0x0][_0x4f6f7c(0x10d)],'attachments':[{'filename':_0x4f6f7c(0xfc),'path':__dirname+_0x4f6f7c(0xe6)+_0x4f6f7c(0x108)+_0x498458[0x0][_0x4f6f7c(0xe3)],'cid':'logo'}],'html':_0x4f6f7c(0x121)+_0x4f6f7c(0xda)+_0x4f6f7c(0xe5)+'<div>'+_0x4f6f7c(0xd9)+_0x4f6f7c(0xf5)+_0x4f6f7c(0xf9)+_0x4f6f7c(0xf3)+_0x4f6f7c(0xf3)+'<div>'+_0x4f6f7c(0x118)+_0x43def5+_0x4f6f7c(0xed)+'</div>'+_0x4f6f7c(0x126)+_0x4f6f7c(0xf5)+_0x4f6f7c(0x116)+_0x4f6f7c(0xf1)+_0x498458[0x0]['site_title']+_0x4f6f7c(0xe4)+_0x4f6f7c(0xf3)+'</div>'+'</body></html>'};_0x526b99[_0x4f6f7c(0x10e)](_0x3a7f66,function(_0x2abeb8,_0x5ac667){const _0x5e02f4=_0x4f6f7c;_0x2abeb8?(console['log'](_0x2abeb8),console[_0x5e02f4(0xde)](_0x5e02f4(0x109))):console[_0x5e02f4(0xde)](_0x5e02f4(0x104));}),_0x48a59e[_0x4f6f7c(0xf8)](_0x4f6f7c(0xe1));}else _0x57a061[_0x4f6f7c(0x117)](_0x4f6f7c(0x10a),_0x4f6f7c(0xe2)),_0x48a59e[_0x4f6f7c(0xf8)](_0x4f6f7c(0x102));}),router['get'](a0_0x10dfa6(0x124),async(_0x4a5c23,_0x17b1cd)=>{const _0x46bb4a=a0_0x10dfa6,_0x596184=await master_shop[_0x46bb4a(0x106)]();_0x17b1cd[_0x46bb4a(0xf0)]('email_code',{'success':_0x4a5c23['flash']('success'),'errors':_0x4a5c23['flash'](_0x46bb4a(0x10f)),'master_shop':_0x596184});}),router[a0_0x10dfa6(0xef)]('/code/',async(_0x2006f0,_0x4e280c)=>{const _0x2d95fd=a0_0x10dfa6,{code:_0x29930e}=_0x2006f0[_0x2d95fd(0x110)],_0x3e0199=await sing_up[_0x2d95fd(0x106)]({'code':_0x29930e});console[_0x2d95fd(0xde)](_0x3e0199[_0x2d95fd(0xfe)]),_0x4e280c[_0x2d95fd(0x11f)](_0x3e0199);}),router[a0_0x10dfa6(0xef)](a0_0x10dfa6(0x127),async(_0x15ad4c,_0x29fd07)=>{const _0x729e8f=a0_0x10dfa6,{codex:_0x2bcd14,password:_0x208bb3,cpassword:_0x1ac693,email:_0x192b2a}=_0x15ad4c[_0x729e8f(0x110)],_0x38f9d0=await sing_up[_0x729e8f(0x111)]({'code':_0x2bcd14,'email':_0x192b2a,'isUsed':_0x729e8f(0xdf)}),_0x20d6a0=await bcrypt[_0x729e8f(0x10c)](_0x208bb3,0xa);if(_0x38f9d0){_0x38f9d0[_0x729e8f(0x11b)]=_0x20d6a0,_0x38f9d0['isUsed']=_0x729e8f(0xec);const _0x47dda0=_0x38f9d0[_0x729e8f(0xe7)](),_0x177ae4=await master_shop['find'](),_0x5653b0=await email_settings[_0x729e8f(0x111)]();let _0x56d6b6=nodemailer[_0x729e8f(0x100)]({'host':_0x5653b0[_0x729e8f(0xfd)],'port':Number(_0x5653b0[_0x729e8f(0x103)]),'secure':![],'auth':{'user':_0x5653b0[_0x729e8f(0xfb)],'pass':_0x5653b0[_0x729e8f(0x11b)]}}),_0xbb2928={'from':_0x5653b0['email'],'to':_0x38f9d0[_0x729e8f(0xfb)],'subject':_0x729e8f(0x112)+_0x177ae4[0x0][_0x729e8f(0x10d)],'attachments':[{'filename':_0x729e8f(0xfc),'path':__dirname+'/../public'+'/upload/'+_0x177ae4[0x0][_0x729e8f(0xe3)],'cid':_0x729e8f(0x128)}],'html':_0x729e8f(0x121)+_0x729e8f(0xda)+_0x729e8f(0xe5)+_0x729e8f(0xf5)+_0x729e8f(0xd9)+_0x729e8f(0xf5)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x729e8f(0xf3)+'</div>'+'<div>'+_0x729e8f(0xff)+_0x38f9d0['name']+_0x729e8f(0x115)+_0x729e8f(0xf3)+_0x729e8f(0x126)+_0x729e8f(0xf5)+_0x729e8f(0x116)+_0x729e8f(0xf1)+_0x177ae4[0x0][_0x729e8f(0x10d)]+_0x729e8f(0xe4)+_0x729e8f(0xf3)+_0x729e8f(0xf3)+_0x729e8f(0x125)};_0x56d6b6[_0x729e8f(0x10e)](_0xbb2928,function(_0x115870,_0x4798e5){const _0x1d91e3=_0x729e8f;_0x115870?(console['log'](_0x115870),console['log'](_0x1d91e3(0x109))):console[_0x1d91e3(0xde)]('Email\x20sent\x20successfully');}),_0x29fd07[_0x729e8f(0xf8)](_0x729e8f(0xe9));}else _0x15ad4c['flash'](_0x729e8f(0x10a),_0x729e8f(0xe2)),_0x29fd07[_0x729e8f(0xf8)](_0x729e8f(0xee));}),module[a0_0x10dfa6(0x11c)]=router;