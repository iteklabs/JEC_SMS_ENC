const a0_0x207e7b=a0_0x1af8;(function(_0x3d8d13,_0x30b90c){const _0x2f2315=a0_0x1af8,_0xc19b=_0x3d8d13();while(!![]){try{const _0x41e2ce=-parseInt(_0x2f2315(0x118))/0x1*(parseInt(_0x2f2315(0x139))/0x2)+-parseInt(_0x2f2315(0x147))/0x3+parseInt(_0x2f2315(0x145))/0x4+-parseInt(_0x2f2315(0x144))/0x5+parseInt(_0x2f2315(0x112))/0x6*(-parseInt(_0x2f2315(0x127))/0x7)+parseInt(_0x2f2315(0x12b))/0x8*(parseInt(_0x2f2315(0x143))/0x9)+-parseInt(_0x2f2315(0x13c))/0xa*(-parseInt(_0x2f2315(0x132))/0xb);if(_0x41e2ce===_0x30b90c)break;else _0xc19b['push'](_0xc19b['shift']());}catch(_0x174e20){_0xc19b['push'](_0xc19b['shift']());}}}(a0_0x3fd0,0x78026));function a0_0x3fd0(){const _0xf5b2aa=['password','<div>','../middleware/auth','error','225bdJnHy','False','save','</div>','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','post','site_title','/view','find','<strong>\x20Regards\x20</strong>','<!DOCTYPE\x20html>','<p>Hello\x20','/forgotPassword/code/','sendMail','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','119rwZQHY','</head><body>','errors','/code_password/','287128vWXNmn','log','isUsed','exports','logo','</h5>','host','9614aVpTzQ','redirect','</body></html>','body','flash','Logo.png','Error\x20Occurs','498rhUuVI','Password\x20Reset\x20-\x20','/upload/','7180qHJPlC','<h5>','</b></h1></p>','hash','get','/code/','email_code','9QUXCaB','386790upZHWn','1232916Wxxgdn','createTransport','805176KyuHic','<hr\x20class=\x22my-3\x22>','express','render','image','name','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','json','floor','random','Password\x20Successfuly\x20Reset\x20-\x20','findOne','<html><head><title></title>','Email\x20sent\x20successfully','length','bcryptjs','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','/login/','/../public','success','email','27642lOcmyV','port'];a0_0x3fd0=function(){return _0xf5b2aa;};return a0_0x3fd0();}function a0_0x1af8(_0x4db2ce,_0x417119){const _0x3fd053=a0_0x3fd0();return a0_0x1af8=function(_0x1af8d8,_0xd6cdb9){_0x1af8d8=_0x1af8d8-0x106;let _0x48faff=_0x3fd053[_0x1af8d8];return _0x48faff;},a0_0x1af8(_0x4db2ce,_0x417119);}const express=require(a0_0x207e7b(0x149)),app=express(),router=express['Router'](),bcrypt=require(a0_0x207e7b(0x10c)),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x207e7b(0x116)),nodemailer=require('nodemailer');router['get']('/view',async(_0x425e90,_0x6a4530)=>{const _0x5edb7=a0_0x207e7b,_0x41b3e1=await master_shop[_0x5edb7(0x120)]();_0x6a4530[_0x5edb7(0x14a)]('email_reset',{'success':_0x425e90[_0x5edb7(0x136)](_0x5edb7(0x110)),'errors':_0x425e90[_0x5edb7(0x136)](_0x5edb7(0x129)),'master_shop':_0x41b3e1});});function generateRandomAlphanumericString(_0x46c9aa=0x6){const _0x18ca70=a0_0x207e7b,_0x1fe254='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let _0x9e7128='';for(let _0x3e2edd=0x0;_0x3e2edd<_0x46c9aa;_0x3e2edd++){const _0x14f29e=Math[_0x18ca70(0x14f)](Math[_0x18ca70(0x106)]()*_0x1fe254[_0x18ca70(0x10b)]);_0x9e7128+=_0x1fe254[_0x14f29e];}return _0x9e7128;}router[a0_0x207e7b(0x11d)](a0_0x207e7b(0x11f),async(_0x6d7d64,_0xc4bc28)=>{const _0x63c847=a0_0x207e7b,{email:_0x497697}=_0x6d7d64['body'],_0x32013f=await sing_up[_0x63c847(0x108)]({'email':_0x497697});var _0x553675=generateRandomAlphanumericString();const _0x1ceea5=await bcrypt['hash'](_0x553675,0xa);if(_0x32013f){_0x32013f['code']=_0x553675,_0x32013f[_0x63c847(0x12d)]=_0x63c847(0x119);const _0x1c852a=_0x32013f[_0x63c847(0x11a)](),_0x37c286=await master_shop[_0x63c847(0x120)](),_0x5c396b=await email_settings[_0x63c847(0x108)]();let _0x307572=nodemailer[_0x63c847(0x146)]({'host':_0x5c396b[_0x63c847(0x131)],'port':Number(_0x5c396b[_0x63c847(0x113)]),'secure':![],'auth':{'user':_0x5c396b[_0x63c847(0x111)],'pass':_0x5c396b[_0x63c847(0x114)]}}),_0x329632={'from':_0x5c396b[_0x63c847(0x111)],'to':_0x32013f[_0x63c847(0x111)],'subject':_0x63c847(0x13a)+_0x37c286[0x0][_0x63c847(0x11e)],'attachments':[{'filename':_0x63c847(0x137),'path':__dirname+'/../public'+_0x63c847(0x13b)+_0x37c286[0x0][_0x63c847(0x14b)],'cid':_0x63c847(0x12f)}],'html':_0x63c847(0x122)+'<html><head><title></title>'+_0x63c847(0x128)+_0x63c847(0x115)+_0x63c847(0x10d)+_0x63c847(0x115)+_0x63c847(0x14d)+_0x63c847(0x11b)+'</div>'+_0x63c847(0x115)+_0x63c847(0x126)+_0x553675+_0x63c847(0x13e)+'</div>'+_0x63c847(0x148)+_0x63c847(0x115)+_0x63c847(0x121)+_0x63c847(0x13d)+_0x37c286[0x0]['site_title']+_0x63c847(0x130)+_0x63c847(0x11b)+_0x63c847(0x11b)+_0x63c847(0x134)};_0x307572['sendMail'](_0x329632,function(_0x52d128,_0x5e8364){const _0x42e881=_0x63c847;_0x52d128?(console[_0x42e881(0x12c)](_0x52d128),console[_0x42e881(0x12c)](_0x42e881(0x138))):console['log'](_0x42e881(0x10a));}),_0xc4bc28['redirect'](_0x63c847(0x124));}else _0x6d7d64['flash'](_0x63c847(0x117),_0x63c847(0x11c)),_0xc4bc28[_0x63c847(0x133)]('/forgotPassword/view');}),router[a0_0x207e7b(0x140)](a0_0x207e7b(0x141),async(_0x485bde,_0x4e1092)=>{const _0x4cbda7=a0_0x207e7b,_0x4fc6a6=await master_shop['find']();_0x4e1092[_0x4cbda7(0x14a)](_0x4cbda7(0x142),{'success':_0x485bde[_0x4cbda7(0x136)](_0x4cbda7(0x110)),'errors':_0x485bde[_0x4cbda7(0x136)](_0x4cbda7(0x129)),'master_shop':_0x4fc6a6});}),router[a0_0x207e7b(0x11d)](a0_0x207e7b(0x141),async(_0x68c252,_0x5c195a)=>{const _0x4d6e5c=a0_0x207e7b,{code:_0x4dad7b}=_0x68c252[_0x4d6e5c(0x135)],_0x1d9740=await sing_up[_0x4d6e5c(0x120)]({'code':_0x4dad7b});console[_0x4d6e5c(0x12c)](_0x1d9740['length']),_0x5c195a[_0x4d6e5c(0x14e)](_0x1d9740);}),router[a0_0x207e7b(0x11d)](a0_0x207e7b(0x12a),async(_0x54affb,_0x3b9f5b)=>{const _0x4c9d32=a0_0x207e7b,{codex:_0x1bbc5a,password:_0x561c28,cpassword:_0x522f7a,email:_0x9be417}=_0x54affb[_0x4c9d32(0x135)],_0x3c0523=await sing_up['findOne']({'code':_0x1bbc5a,'email':_0x9be417,'isUsed':_0x4c9d32(0x119)}),_0x12d9f9=await bcrypt[_0x4c9d32(0x13f)](_0x561c28,0xa);if(_0x3c0523){_0x3c0523['password']=_0x12d9f9,_0x3c0523[_0x4c9d32(0x12d)]='True';const _0x527edc=_0x3c0523[_0x4c9d32(0x11a)](),_0x36d5ea=await master_shop['find'](),_0x21b079=await email_settings['findOne']();let _0x514b98=nodemailer['createTransport']({'host':_0x21b079[_0x4c9d32(0x131)],'port':Number(_0x21b079[_0x4c9d32(0x113)]),'secure':![],'auth':{'user':_0x21b079[_0x4c9d32(0x111)],'pass':_0x21b079['password']}}),_0x39e47f={'from':_0x21b079[_0x4c9d32(0x111)],'to':_0x3c0523[_0x4c9d32(0x111)],'subject':_0x4c9d32(0x107)+_0x36d5ea[0x0][_0x4c9d32(0x11e)],'attachments':[{'filename':_0x4c9d32(0x137),'path':__dirname+_0x4c9d32(0x10f)+_0x4c9d32(0x13b)+_0x36d5ea[0x0][_0x4c9d32(0x14b)],'cid':_0x4c9d32(0x12f)}],'html':_0x4c9d32(0x122)+_0x4c9d32(0x109)+_0x4c9d32(0x128)+_0x4c9d32(0x115)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x4c9d32(0x115)+_0x4c9d32(0x14d)+_0x4c9d32(0x11b)+_0x4c9d32(0x11b)+_0x4c9d32(0x115)+_0x4c9d32(0x123)+_0x3c0523[_0x4c9d32(0x14c)]+',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>'+_0x4c9d32(0x11b)+_0x4c9d32(0x148)+_0x4c9d32(0x115)+'<strong>\x20Regards\x20</strong>'+_0x4c9d32(0x13d)+_0x36d5ea[0x0][_0x4c9d32(0x11e)]+_0x4c9d32(0x130)+_0x4c9d32(0x11b)+_0x4c9d32(0x11b)+'</body></html>'};_0x514b98[_0x4c9d32(0x125)](_0x39e47f,function(_0x3a80d7,_0x2dabef){const _0x1a0891=_0x4c9d32;_0x3a80d7?(console[_0x1a0891(0x12c)](_0x3a80d7),console[_0x1a0891(0x12c)](_0x1a0891(0x138))):console[_0x1a0891(0x12c)](_0x1a0891(0x10a));}),_0x3b9f5b[_0x4c9d32(0x133)](_0x4c9d32(0x10e));}else _0x54affb[_0x4c9d32(0x136)](_0x4c9d32(0x117),_0x4c9d32(0x11c)),_0x3b9f5b[_0x4c9d32(0x133)]('/forgotPassword/code');}),module[a0_0x207e7b(0x12e)]=router;