const a0_0x28d6aa=a0_0x24ae;(function(_0x2608e7,_0x4011e2){const _0x23a90e=a0_0x24ae,_0x536e97=_0x2608e7();while(!![]){try{const _0x34fb9f=parseInt(_0x23a90e(0x115))/0x1+parseInt(_0x23a90e(0x10b))/0x2*(-parseInt(_0x23a90e(0x14b))/0x3)+-parseInt(_0x23a90e(0x142))/0x4*(parseInt(_0x23a90e(0x110))/0x5)+parseInt(_0x23a90e(0x11a))/0x6+-parseInt(_0x23a90e(0x11f))/0x7+-parseInt(_0x23a90e(0x14c))/0x8+-parseInt(_0x23a90e(0x145))/0x9*(-parseInt(_0x23a90e(0x135))/0xa);if(_0x34fb9f===_0x4011e2)break;else _0x536e97['push'](_0x536e97['shift']());}catch(_0x109afc){_0x536e97['push'](_0x536e97['shift']());}}}(a0_0x16ae,0x44183));const express=require(a0_0x28d6aa(0x113)),app=express(),router=express['Router'](),bcrypt=require(a0_0x28d6aa(0x114)),{sing_up,staff,profile,master_shop,email_settings}=require('../models/all_models'),auth=require(a0_0x28d6aa(0x12f)),nodemailer=require(a0_0x28d6aa(0x11e));router[a0_0x28d6aa(0x140)](a0_0x28d6aa(0x127),async(_0x26778f,_0x116864)=>{const _0x4b6c8f=a0_0x28d6aa,_0x2e5615=await master_shop['find']();_0x116864[_0x4b6c8f(0x141)](_0x4b6c8f(0x107),{'success':_0x26778f[_0x4b6c8f(0x126)](_0x4b6c8f(0x12d)),'errors':_0x26778f[_0x4b6c8f(0x126)]('errors'),'master_shop':_0x2e5615});});function generateRandomAlphanumericString(_0x5398c5=0x6){const _0x30e11e=a0_0x28d6aa,_0x438bb2=_0x30e11e(0x129);let _0x3afaa0='';for(let _0x355b31=0x0;_0x355b31<_0x5398c5;_0x355b31++){const _0x47fc88=Math[_0x30e11e(0x125)](Math['random']()*_0x438bb2[_0x30e11e(0x112)]);_0x3afaa0+=_0x438bb2[_0x47fc88];}return _0x3afaa0;}function a0_0x24ae(_0x3e9c40,_0x1a7603){const _0x16aebe=a0_0x16ae();return a0_0x24ae=function(_0x24ae8b,_0x32c7ef){_0x24ae8b=_0x24ae8b-0x107;let _0x4d38b2=_0x16aebe[_0x24ae8b];return _0x4d38b2;},a0_0x24ae(_0x3e9c40,_0x1a7603);}router[a0_0x28d6aa(0x143)](a0_0x28d6aa(0x127),async(_0x44a836,_0x41111e)=>{const _0x37eb6a=a0_0x28d6aa,{email:_0x5b3b65}=_0x44a836[_0x37eb6a(0x11d)],_0x1b6548=await sing_up['findOne']({'email':_0x5b3b65});var _0x103233=generateRandomAlphanumericString();const _0x430641=await bcrypt['hash'](_0x103233,0xa);if(_0x1b6548){_0x1b6548[_0x37eb6a(0x133)]=_0x103233,_0x1b6548[_0x37eb6a(0x10d)]=_0x37eb6a(0x12e);const _0x50e9fb=_0x1b6548[_0x37eb6a(0x13a)](),_0x1dd45c=await master_shop[_0x37eb6a(0x124)](),_0x15669d=await email_settings[_0x37eb6a(0x10a)]();let _0x511d37=nodemailer[_0x37eb6a(0x11c)]({'host':_0x15669d[_0x37eb6a(0x13c)],'port':Number(_0x15669d[_0x37eb6a(0x118)]),'secure':![],'auth':{'user':_0x15669d[_0x37eb6a(0x147)],'pass':_0x15669d['password']}}),_0x6e1f17={'from':_0x15669d[_0x37eb6a(0x147)],'to':_0x1b6548[_0x37eb6a(0x147)],'subject':_0x37eb6a(0x131)+_0x1dd45c[0x0][_0x37eb6a(0x12b)],'attachments':[{'filename':_0x37eb6a(0x139),'path':__dirname+_0x37eb6a(0x13e)+_0x37eb6a(0x13d)+_0x1dd45c[0x0]['image'],'cid':_0x37eb6a(0x148)}],'html':_0x37eb6a(0x14e)+_0x37eb6a(0x117)+_0x37eb6a(0x119)+_0x37eb6a(0x12a)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x37eb6a(0x12a)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x37eb6a(0x13f)+_0x37eb6a(0x13f)+_0x37eb6a(0x12a)+_0x37eb6a(0x10c)+_0x103233+_0x37eb6a(0x12c)+_0x37eb6a(0x13f)+'<hr\x20class=\x22my-3\x22>'+_0x37eb6a(0x12a)+_0x37eb6a(0x121)+_0x37eb6a(0x136)+_0x1dd45c[0x0]['site_title']+_0x37eb6a(0x14a)+_0x37eb6a(0x13f)+_0x37eb6a(0x13f)+'</body></html>'};_0x511d37['sendMail'](_0x6e1f17,function(_0x477c6d,_0x3f9fda){const _0x2fe52b=_0x37eb6a;_0x477c6d?(console[_0x2fe52b(0x13b)](_0x477c6d),console[_0x2fe52b(0x13b)](_0x2fe52b(0x14d))):console[_0x2fe52b(0x13b)]('Email\x20sent\x20successfully');}),_0x41111e['redirect'](_0x37eb6a(0x116));}else _0x44a836[_0x37eb6a(0x126)](_0x37eb6a(0x132),'Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x41111e[_0x37eb6a(0x137)](_0x37eb6a(0x128));}),router[a0_0x28d6aa(0x140)](a0_0x28d6aa(0x108),async(_0x6e38f7,_0x3501ff)=>{const _0x43b1b4=a0_0x28d6aa,_0x4cfab8=await master_shop[_0x43b1b4(0x124)]();_0x3501ff[_0x43b1b4(0x141)](_0x43b1b4(0x111),{'success':_0x6e38f7[_0x43b1b4(0x126)](_0x43b1b4(0x12d)),'errors':_0x6e38f7[_0x43b1b4(0x126)](_0x43b1b4(0x149)),'master_shop':_0x4cfab8});}),router[a0_0x28d6aa(0x143)](a0_0x28d6aa(0x108),async(_0xab7309,_0x207bb3)=>{const _0x17c62c=a0_0x28d6aa,{code:_0x151af2}=_0xab7309[_0x17c62c(0x11d)],_0x42c3a0=await sing_up['find']({'code':_0x151af2});console[_0x17c62c(0x13b)](_0x42c3a0['length']),_0x207bb3['json'](_0x42c3a0);}),router[a0_0x28d6aa(0x143)](a0_0x28d6aa(0x109),async(_0x20610a,_0x5bf176)=>{const _0x5d558c=a0_0x28d6aa,{codex:_0x53df2e,password:_0x4a9fb8,cpassword:_0x4e6268,email:_0x4737b4}=_0x20610a[_0x5d558c(0x11d)],_0x1a883f=await sing_up[_0x5d558c(0x10a)]({'code':_0x53df2e,'email':_0x4737b4,'isUsed':_0x5d558c(0x12e)}),_0x34ab83=await bcrypt[_0x5d558c(0x10e)](_0x4a9fb8,0xa);if(_0x1a883f){_0x1a883f[_0x5d558c(0x130)]=_0x34ab83,_0x1a883f[_0x5d558c(0x10d)]='True';const _0x221245=_0x1a883f[_0x5d558c(0x13a)](),_0x6d1912=await master_shop[_0x5d558c(0x124)](),_0x12bbb9=await email_settings[_0x5d558c(0x10a)]();let _0x227885=nodemailer[_0x5d558c(0x11c)]({'host':_0x12bbb9[_0x5d558c(0x13c)],'port':Number(_0x12bbb9['port']),'secure':![],'auth':{'user':_0x12bbb9[_0x5d558c(0x147)],'pass':_0x12bbb9[_0x5d558c(0x130)]}}),_0x29a92f={'from':_0x12bbb9['email'],'to':_0x1a883f['email'],'subject':_0x5d558c(0x138)+_0x6d1912[0x0][_0x5d558c(0x12b)],'attachments':[{'filename':_0x5d558c(0x139),'path':__dirname+_0x5d558c(0x13e)+_0x5d558c(0x13d)+_0x6d1912[0x0]['image'],'cid':_0x5d558c(0x148)}],'html':_0x5d558c(0x14e)+'<html><head><title></title>'+_0x5d558c(0x119)+_0x5d558c(0x12a)+_0x5d558c(0x122)+_0x5d558c(0x12a)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x5d558c(0x13f)+_0x5d558c(0x13f)+'<div>'+_0x5d558c(0x123)+_0x1a883f[_0x5d558c(0x144)]+_0x5d558c(0x146)+_0x5d558c(0x13f)+'<hr\x20class=\x22my-3\x22>'+_0x5d558c(0x12a)+'<strong>\x20Regards\x20</strong>'+'<h5>'+_0x6d1912[0x0]['site_title']+'</h5>'+_0x5d558c(0x13f)+_0x5d558c(0x13f)+_0x5d558c(0x134)};_0x227885['sendMail'](_0x29a92f,function(_0x23f1ab,_0x57ac3f){const _0x487d2b=_0x5d558c;_0x23f1ab?(console[_0x487d2b(0x13b)](_0x23f1ab),console[_0x487d2b(0x13b)](_0x487d2b(0x14d))):console[_0x487d2b(0x13b)](_0x487d2b(0x120));}),_0x5bf176[_0x5d558c(0x137)](_0x5d558c(0x10f));}else _0x20610a[_0x5d558c(0x126)]('error','Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x5bf176['redirect'](_0x5d558c(0x11b));}),module['exports']=router;function a0_0x16ae(){const _0xdf2ef9=['Password\x20Reset\x20-\x20','error','code','</body></html>','10ORUoCW','<h5>','redirect','Password\x20Successfuly\x20Reset\x20-\x20','Logo.png','save','log','host','/upload/','/../public','</div>','get','render','53164vpztWI','post','name','4642047PJpbgy',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','email','logo','errors','</h5>','18453aoYllJ','266688lbhxnR','Error\x20Occurs','<!DOCTYPE\x20html>','email_reset','/code/','/code_password/','findOne','74ERpQPo','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','isUsed','hash','/login/','115ofgjxF','email_code','length','express','bcryptjs','451160RTqneB','/forgotPassword/code/','<html><head><title></title>','port','</head><body>','2586528JvxnrE','/forgotPassword/code','createTransport','body','nodemailer','3867500cRRVvM','Email\x20sent\x20successfully','<strong>\x20Regards\x20</strong>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','<p>Hello\x20','find','floor','flash','/view','/forgotPassword/view','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','<div>','site_title','</b></h1></p>','success','False','../middleware/auth','password'];a0_0x16ae=function(){return _0xdf2ef9;};return a0_0x16ae();}