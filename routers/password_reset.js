const a0_0x22969d=a0_0x1fbb;(function(_0x22435f,_0x55daed){const _0x206026=a0_0x1fbb,_0x24678d=_0x22435f();while(!![]){try{const _0x105db9=-parseInt(_0x206026(0xe1))/0x1*(-parseInt(_0x206026(0xd9))/0x2)+-parseInt(_0x206026(0xc1))/0x3*(parseInt(_0x206026(0xe3))/0x4)+-parseInt(_0x206026(0xca))/0x5+parseInt(_0x206026(0xc4))/0x6+-parseInt(_0x206026(0xee))/0x7+-parseInt(_0x206026(0xb8))/0x8+-parseInt(_0x206026(0xcd))/0x9*(-parseInt(_0x206026(0xce))/0xa);if(_0x105db9===_0x55daed)break;else _0x24678d['push'](_0x24678d['shift']());}catch(_0x27b174){_0x24678d['push'](_0x24678d['shift']());}}}(a0_0x316e,0xad4f6));function a0_0x1fbb(_0x28b9d7,_0x174a2d){const _0x316ed3=a0_0x316e();return a0_0x1fbb=function(_0x1fbb89,_0x35db89){_0x1fbb89=_0x1fbb89-0xb1;let _0x49e6b2=_0x316ed3[_0x1fbb89];return _0x49e6b2;},a0_0x1fbb(_0x28b9d7,_0x174a2d);}const express=require(a0_0x22969d(0xc5)),app=express(),router=express[a0_0x22969d(0xb9)](),bcrypt=require(a0_0x22969d(0xd4)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x22969d(0xe7)),auth=require(a0_0x22969d(0xc3)),nodemailer=require('nodemailer');router[a0_0x22969d(0xb6)](a0_0x22969d(0xb7),async(_0x100568,_0x3b6f66)=>{const _0x420e7b=a0_0x22969d,_0xbe5087=await master_shop[_0x420e7b(0xda)]();_0x3b6f66['render']('email_reset',{'success':_0x100568[_0x420e7b(0xbe)](_0x420e7b(0xd3)),'errors':_0x100568[_0x420e7b(0xbe)](_0x420e7b(0xd1)),'master_shop':_0xbe5087});});function a0_0x316e(){const _0x2c40d3=['site_title','findOne','get','/view','10900488MRXbDF','Router','Email\x20sent\x20successfully','port','random','</h5>','flash','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','exports','78napCab','sendMail','../middleware/auth','2772240NnCZlR','express','hash','/code_password/','</body></html>','code','1531500qTRZwe','password','Logo.png','171OoHGFF','1676620Tbijkp','post','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','errors','<hr\x20class=\x22my-3\x22>','success','bcryptjs','email','/../public','createTransport','<strong>\x20Regards\x20</strong>','2xsuUdO','find','</div>','<div>','False','logo','True','Password\x20Successfuly\x20Reset\x20-\x20','310444OOULBr','</head><body>','34424LtqWMc','/login/','render','<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>','../models/all_models','image','<h5>','log','error','body','email_code','9488969PbMyKl','<html><head><title></title>','<!DOCTYPE\x20html>','floor','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','redirect','json',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','save','host','Error\x20Occurs','</b></h1></p>','/upload/','length'];a0_0x316e=function(){return _0x2c40d3;};return a0_0x316e();}function generateRandomAlphanumericString(_0x5e9592=0x6){const _0x4b633e=a0_0x22969d,_0x51b5ad=_0x4b633e(0xf2);let _0x1652c7='';for(let _0x491fce=0x0;_0x491fce<_0x5e9592;_0x491fce++){const _0x5e2354=Math[_0x4b633e(0xf1)](Math[_0x4b633e(0xbc)]()*_0x51b5ad[_0x4b633e(0xb3)]);_0x1652c7+=_0x51b5ad[_0x5e2354];}return _0x1652c7;}router['post'](a0_0x22969d(0xb7),async(_0x7a9ec6,_0xc0529d)=>{const _0x14ac58=a0_0x22969d,{email:_0xf232a6}=_0x7a9ec6[_0x14ac58(0xec)],_0x22435e=await sing_up[_0x14ac58(0xb5)]({'email':_0xf232a6});var _0x32c89e=generateRandomAlphanumericString();const _0x28ee63=await bcrypt[_0x14ac58(0xc6)](_0x32c89e,0xa);if(_0x22435e){_0x22435e[_0x14ac58(0xc9)]=_0x32c89e,_0x22435e['isUsed']=_0x14ac58(0xdd);const _0x50f7d5=_0x22435e[_0x14ac58(0xf7)](),_0x51fb52=await master_shop[_0x14ac58(0xda)](),_0x4a0412=await email_settings['findOne']();let _0xd9f902=nodemailer[_0x14ac58(0xd7)]({'host':_0x4a0412['host'],'port':Number(_0x4a0412[_0x14ac58(0xbb)]),'secure':![],'auth':{'user':_0x4a0412[_0x14ac58(0xd5)],'pass':_0x4a0412[_0x14ac58(0xcb)]}}),_0x14f5ae={'from':_0x4a0412[_0x14ac58(0xd5)],'to':_0x22435e[_0x14ac58(0xd5)],'subject':'Password\x20Reset\x20-\x20'+_0x51fb52[0x0]['site_title'],'attachments':[{'filename':_0x14ac58(0xcc),'path':__dirname+_0x14ac58(0xd6)+_0x14ac58(0xb2)+_0x51fb52[0x0][_0x14ac58(0xe8)],'cid':_0x14ac58(0xde)}],'html':_0x14ac58(0xf0)+'<html><head><title></title>'+_0x14ac58(0xe2)+'<div>'+_0x14ac58(0xf3)+_0x14ac58(0xdc)+_0x14ac58(0xbf)+_0x14ac58(0xdb)+'</div>'+_0x14ac58(0xdc)+_0x14ac58(0xe6)+_0x32c89e+_0x14ac58(0xb1)+'</div>'+_0x14ac58(0xd2)+'<div>'+_0x14ac58(0xd8)+'<h5>'+_0x51fb52[0x0][_0x14ac58(0xb4)]+'</h5>'+_0x14ac58(0xdb)+'</div>'+_0x14ac58(0xc8)};_0xd9f902[_0x14ac58(0xc2)](_0x14f5ae,function(_0x238dc8,_0x1812b1){const _0x444c05=_0x14ac58;_0x238dc8?(console[_0x444c05(0xea)](_0x238dc8),console[_0x444c05(0xea)](_0x444c05(0xf9))):console['log'](_0x444c05(0xba));}),_0xc0529d[_0x14ac58(0xf4)]('/forgotPassword/code/');}else _0x7a9ec6[_0x14ac58(0xbe)](_0x14ac58(0xeb),_0x14ac58(0xd0)),_0xc0529d['redirect']('/forgotPassword/view');}),router[a0_0x22969d(0xb6)]('/code/',async(_0x2494ba,_0xa5cef)=>{const _0x54646b=a0_0x22969d,_0x140fab=await master_shop[_0x54646b(0xda)]();_0xa5cef[_0x54646b(0xe5)](_0x54646b(0xed),{'success':_0x2494ba[_0x54646b(0xbe)](_0x54646b(0xd3)),'errors':_0x2494ba[_0x54646b(0xbe)](_0x54646b(0xd1)),'master_shop':_0x140fab});}),router['post']('/code/',async(_0x1ae255,_0x40c045)=>{const _0x3453b3=a0_0x22969d,{code:_0x3f6dd5}=_0x1ae255[_0x3453b3(0xec)],_0x560aae=await sing_up[_0x3453b3(0xda)]({'code':_0x3f6dd5});console['log'](_0x560aae[_0x3453b3(0xb3)]),_0x40c045[_0x3453b3(0xf5)](_0x560aae);}),router[a0_0x22969d(0xcf)](a0_0x22969d(0xc7),async(_0x42b8c8,_0x155281)=>{const _0x5b3b76=a0_0x22969d,{codex:_0x5bf7d9,password:_0x45e6ff,cpassword:_0x43ac2d,email:_0x301184}=_0x42b8c8[_0x5b3b76(0xec)],_0x590b50=await sing_up['findOne']({'code':_0x5bf7d9,'email':_0x301184,'isUsed':'False'}),_0x132acf=await bcrypt['hash'](_0x45e6ff,0xa);if(_0x590b50){_0x590b50[_0x5b3b76(0xcb)]=_0x132acf,_0x590b50['isUsed']=_0x5b3b76(0xdf);const _0x27575a=_0x590b50[_0x5b3b76(0xf7)](),_0x53bce0=await master_shop[_0x5b3b76(0xda)](),_0x341165=await email_settings[_0x5b3b76(0xb5)]();let _0x4b887b=nodemailer[_0x5b3b76(0xd7)]({'host':_0x341165[_0x5b3b76(0xf8)],'port':Number(_0x341165[_0x5b3b76(0xbb)]),'secure':![],'auth':{'user':_0x341165[_0x5b3b76(0xd5)],'pass':_0x341165['password']}}),_0x54109b={'from':_0x341165[_0x5b3b76(0xd5)],'to':_0x590b50[_0x5b3b76(0xd5)],'subject':_0x5b3b76(0xe0)+_0x53bce0[0x0][_0x5b3b76(0xb4)],'attachments':[{'filename':'Logo.png','path':__dirname+_0x5b3b76(0xd6)+_0x5b3b76(0xb2)+_0x53bce0[0x0][_0x5b3b76(0xe8)],'cid':'logo'}],'html':_0x5b3b76(0xf0)+_0x5b3b76(0xef)+_0x5b3b76(0xe2)+'<div>'+_0x5b3b76(0xf3)+_0x5b3b76(0xdc)+_0x5b3b76(0xbf)+_0x5b3b76(0xdb)+_0x5b3b76(0xdb)+_0x5b3b76(0xdc)+'<p>Hello\x20'+_0x590b50['name']+_0x5b3b76(0xf6)+'</div>'+'<hr\x20class=\x22my-3\x22>'+_0x5b3b76(0xdc)+_0x5b3b76(0xd8)+_0x5b3b76(0xe9)+_0x53bce0[0x0][_0x5b3b76(0xb4)]+_0x5b3b76(0xbd)+'</div>'+'</div>'+'</body></html>'};_0x4b887b[_0x5b3b76(0xc2)](_0x54109b,function(_0x37896f,_0x265774){const _0x3977dd=_0x5b3b76;_0x37896f?(console[_0x3977dd(0xea)](_0x37896f),console[_0x3977dd(0xea)](_0x3977dd(0xf9))):console[_0x3977dd(0xea)](_0x3977dd(0xba));}),_0x155281[_0x5b3b76(0xf4)](_0x5b3b76(0xe4));}else _0x42b8c8['flash']('error','Email\x20Not\x20Found\x20please\x20check\x20your\x20email'),_0x155281[_0x5b3b76(0xf4)]('/forgotPassword/code');}),module[a0_0x22969d(0xc0)]=router;