function a0_0x19bf(_0x1bde7d,_0x2613f2){var _0x12ffa3=a0_0x12ff();return a0_0x19bf=function(_0x19bfbb,_0x195294){_0x19bfbb=_0x19bfbb-0x9a;var _0x2b0ef5=_0x12ffa3[_0x19bfbb];return _0x2b0ef5;},a0_0x19bf(_0x1bde7d,_0x2613f2);}var a0_0x6cf489=a0_0x19bf;function a0_0x12ff(){var _0x3074b8=['foreach\x20newproduct','return_purchase_edit','$product_details.product_stock','forEach','$product_details.rack','return_purchase_invoice','email','note','stock_quantity','$return_product.product_name','$supplier_docs','$return_product','900520Zoajsr','/view/:id','message','aggregate','14jmUHlg','197993ednVmx','$product_details.primary_code','isle','Arabic','purchase\x20return\x20successfully','$_id','product_stock','master','$product_details._id','/purchases_return/view','German','purchase_quantity','$product_details.floorlevel','return_product','Purchase\x20Return','$warehouse_name','due_amount','$product_details.product_name','getMonth','8dVJUxZ','Enabled','$supplier_docs.address','to_room','params','room','$invoice','primary_code_hide','flash','post','Router','../public/language/languages.json','$supplier_docs.email','$name','$date','../middleware/auth','$received','findById','/view','English','2969991zqVpGE','find','$note','product_name','stocks','language','$product_details.storage','Received\x20For\x20Purchase\x20Return','Portuguese','bin','$return_product.total','map','$suppliers','233265YFHlgl','Spanish','getDate','payment\x20successfull','Chinese','stock_data','level','/receive_payment/:id','1055346vVEEtu','redirect','supplier_docs','type','express','$product_details','bay','slice','to_Room_name','Raw\x20Materials','secondary_code_hide','5268760ZpizlJ','677342DlnGUF','$product_details.bay','render','floorlevel','$return_product.return_qty','$total_amount','$product_details.type','errors','invoice','20yjQKCG','Hindi','status','French','$product_details.product_code','old_data','amount','primary_code','save','product_code','body','/invoice/:id','product_details.return_qtyproduct_details.return_qty','$product_details.secondary_code','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','to_warehouse_name','$supplier_docs.mobile','success','pallet','product_details','suppliers','log','Portuguese\x20(BR)','return_qty','user','types','Arabic\x20(ae)','product_code_hide','name','Return\x20Goods','findOne','get'];a0_0x12ff=function(){return _0x3074b8;};return a0_0x12ff();}(function(_0x142a2f,_0x5503fd){var _0x199ee6=a0_0x19bf,_0x1c6e3c=_0x142a2f();while(!![]){try{var _0x281c36=-parseInt(_0x199ee6(0xc3))/0x1+parseInt(_0x199ee6(0x10b))/0x2+parseInt(_0x199ee6(0xf7))/0x3*(parseInt(_0x199ee6(0x114))/0x4)+-parseInt(_0x199ee6(0xbe))/0x5+parseInt(_0x199ee6(0xff))/0x6*(-parseInt(_0x199ee6(0xc2))/0x7)+parseInt(_0x199ee6(0xd6))/0x8*(-parseInt(_0x199ee6(0xea))/0x9)+parseInt(_0x199ee6(0x10a))/0xa;if(_0x281c36===_0x5503fd)break;else _0x1c6e3c['push'](_0x1c6e3c['shift']());}catch(_0x55ceeb){_0x1c6e3c['push'](_0x1c6e3c['shift']());}}}(a0_0x12ff,0x2f78c));const express=require(a0_0x6cf489(0x103)),app=express(),router=express[a0_0x6cf489(0xe0)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x6cf489(0xe5)),users=require(a0_0x6cf489(0xe1));router[a0_0x6cf489(0xb1)](a0_0x6cf489(0xe8),auth,async(_0x4dcc4c,_0x3ced51)=>{var _0x5a2680=a0_0x6cf489;try{const {username:_0x1f8a01,email:_0x3f9fd1,role:_0x2f8507}=_0x4dcc4c[_0x5a2680(0xaa)],_0x15dac2=_0x4dcc4c[_0x5a2680(0xaa)],_0x23af03=await profile['findOne']({'email':_0x15dac2[_0x5a2680(0xb8)]}),_0x246846=await master_shop[_0x5a2680(0xeb)]();console['log'](_0x5a2680(0xca),_0x246846);const _0x54274b=await purchases_return[_0x5a2680(0xc1)]([{'$lookup':{'from':'suppliers','localField':_0x5a2680(0xa6),'foreignField':_0x5a2680(0xae),'as':_0x5a2680(0x101)}},{'$unwind':_0x5a2680(0xbd)},{'$unwind':_0x5a2680(0xbc)},{'$group':{'_id':_0x5a2680(0xc8),'invoice':{'$first':_0x5a2680(0xdc)},'date':{'$first':_0x5a2680(0xe4)},'suppliers':{'$first':_0x5a2680(0xf6)},'warehouse_name':{'$first':_0x5a2680(0xd2)},'product_name':{'$first':_0x5a2680(0xbb)},'return_qty':{'$first':_0x5a2680(0x10f)},'price':{'$first':'$return_product.price'},'total':{'$sum':_0x5a2680(0xf4)},'note':{'$first':_0x5a2680(0xec)},'total_amount':{'$first':_0x5a2680(0x110)},'discount':{'$first':'$discount'},'receivable':{'$first':'$receivable'},'received':{'$first':_0x5a2680(0xe6)},'due_amount':{'$first':'$due_amount'},'mobile':{'$first':_0x5a2680(0xa2)},'email':{'$first':_0x5a2680(0xe2)},'address':{'$first':_0x5a2680(0xd8)},'return_sum_qty':{'$sum':_0x5a2680(0x10f)}}}]);console[_0x5a2680(0xa7)](_0x54274b);if(_0x246846[0x0][_0x5a2680(0xef)]=='English\x20(US)'){var _0x593f62=users[_0x5a2680(0xe9)];console['log'](_0x593f62);}else{if(_0x246846[0x0][_0x5a2680(0xef)]==_0x5a2680(0x115))var _0x593f62=users[_0x5a2680(0x115)];else{if(_0x246846[0x0][_0x5a2680(0xef)]==_0x5a2680(0xcd))var _0x593f62=users['German'];else{if(_0x246846[0x0][_0x5a2680(0xef)]==_0x5a2680(0xf8))var _0x593f62=users['Spanish'];else{if(_0x246846[0x0][_0x5a2680(0xef)]==_0x5a2680(0x117))var _0x593f62=users[_0x5a2680(0x117)];else{if(_0x246846[0x0]['language']==_0x5a2680(0xa8))var _0x593f62=users['Portuguese'];else{if(_0x246846[0x0][_0x5a2680(0xef)]==_0x5a2680(0xfb))var _0x593f62=users[_0x5a2680(0xfb)];else{if(_0x246846[0x0][_0x5a2680(0xef)]==_0x5a2680(0xac))var _0x593f62=users['Arabic'];}}}}}}}_0x3ced51[_0x5a2680(0x10d)]('purchases_return',{'success':_0x4dcc4c[_0x5a2680(0xde)](_0x5a2680(0xa3)),'errors':_0x4dcc4c['flash'](_0x5a2680(0x112)),'role':_0x15dac2,'profile':_0x23af03,'master_shop':_0x246846,'user':_0x54274b,'language':_0x593f62});}catch(_0x115148){console[_0x5a2680(0xa7)](_0x115148);}}),router['get'](a0_0x6cf489(0xbf),auth,async(_0x3572fa,_0x1c93e7)=>{var _0x396b7d=a0_0x6cf489;try{const {username:_0x9d85f,email:_0x2c45a8,role:_0x25e3ea}=_0x3572fa['user'],_0x4da9d9=_0x3572fa[_0x396b7d(0xaa)],_0x17935d=await profile[_0x396b7d(0xb0)]({'email':_0x4da9d9[_0x396b7d(0xb8)]}),_0xd96aa8=await product['find']({}),_0x409d27=await master_shop[_0x396b7d(0xeb)]();console[_0x396b7d(0xa7)](_0x396b7d(0xca),_0x409d27),console[_0x396b7d(0xa7)](_0x3572fa['body']);const _0x22ca1b=_0x3572fa[_0x396b7d(0xda)]['id'],_0x3f9bc8=await purchases_return[_0x396b7d(0xe7)](_0x22ca1b);console[_0x396b7d(0xa7)](_0x3f9bc8);const _0x2deab7=await warehouse[_0x396b7d(0xc1)]([{'$match':{'name':_0x3f9bc8['warehouse_name'],'room':_0x3f9bc8[_0x396b7d(0xdb)]}},{'$unwind':_0x396b7d(0x104)},{'$group':{'_id':_0x396b7d(0xcb),'name':{'$first':_0x396b7d(0xd4)},'product_stock':{'$first':_0x396b7d(0xb4)},'bay':{'$first':_0x396b7d(0x10c)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x396b7d(0x111)},'floorlevel':{'$first':_0x396b7d(0xcf)},'primary_code':{'$first':_0x396b7d(0xc4)},'secondary_code':{'$first':_0x396b7d(0x9f)},'product_code':{'$first':_0x396b7d(0x118)},'storage':{'$first':_0x396b7d(0xf0)},'rack':{'$first':_0x396b7d(0xb6)}}}]);warehouse_data=await warehouse[_0x396b7d(0xc1)]([{'$match':{'status':_0x396b7d(0xd7),'name':_0x396b7d(0xaf),'warehouse_category':_0x396b7d(0x108)}},{'$group':{'_id':_0x396b7d(0xe3),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),console[_0x396b7d(0xa7)](_0x396b7d(0xfc),_0x2deab7);if(_0x409d27[0x0][_0x396b7d(0xef)]=='English\x20(US)'){var _0x5d1adf=users[_0x396b7d(0xe9)];console[_0x396b7d(0xa7)](_0x5d1adf);}else{if(_0x409d27[0x0][_0x396b7d(0xef)]==_0x396b7d(0x115))var _0x5d1adf=users['Hindi'];else{if(_0x409d27[0x0][_0x396b7d(0xef)]==_0x396b7d(0xcd))var _0x5d1adf=users[_0x396b7d(0xcd)];else{if(_0x409d27[0x0][_0x396b7d(0xef)]==_0x396b7d(0xf8))var _0x5d1adf=users[_0x396b7d(0xf8)];else{if(_0x409d27[0x0][_0x396b7d(0xef)]==_0x396b7d(0x117))var _0x5d1adf=users['French'];else{if(_0x409d27[0x0][_0x396b7d(0xef)]==_0x396b7d(0xa8))var _0x5d1adf=users['Portuguese'];else{if(_0x409d27[0x0]['language']==_0x396b7d(0xfb))var _0x5d1adf=users[_0x396b7d(0xfb)];else{if(_0x409d27[0x0]['language']==_0x396b7d(0xac))var _0x5d1adf=users[_0x396b7d(0xc6)];}}}}}}}_0x1c93e7[_0x396b7d(0x10d)](_0x396b7d(0xb3),{'success':_0x3572fa[_0x396b7d(0xde)](_0x396b7d(0xa3)),'errors':_0x3572fa[_0x396b7d(0xde)](_0x396b7d(0x112)),'role':_0x4da9d9,'master_shop':_0x409d27,'profile':_0x17935d,'user':_0x3f9bc8,'stock':_0x2deab7,'product':_0xd96aa8,'language':_0x5d1adf,'warehouse':warehouse_data});}catch(_0x3a3235){console[_0x396b7d(0xa7)](_0x3a3235);}}),router[a0_0x6cf489(0xdf)](a0_0x6cf489(0xbf),auth,async(_0x2e8c33,_0x3ab01c)=>{var _0xdaf681=a0_0x6cf489;try{const _0x186f4d=_0x2e8c33['params']['id'];console[_0xdaf681(0xa7)](_0x186f4d);const _0x4bf49a=await purchases_return[_0xdaf681(0xb0)]({'invoice':_0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0x113)]});console['log'](_0xdaf681(0x119),_0x4bf49a);const _0x5249e1=await warehouse[_0xdaf681(0xb0)]({'name':_0x4bf49a[_0xdaf681(0xa1)],'room':_0x4bf49a[_0xdaf681(0xd9)]});console['log']('old_warehouse_data',_0x5249e1);const {invoice:_0x4f4617,suppliers:_0x15d48e,date:_0x4897d1,warehouse_name:_0x2980e1,product_name:_0x4ebafa,purchase_quantity:_0x355d43,stocks:_0x22049d,return_qty:_0x54687e,note:_0x4865e9,Room_name:_0x903b79,level:_0x3329a4,isle:_0x997a98,pallet:_0x3cf677,to_warehouse_name:_0x43ca06,to_Room_name:_0x208cdb}=_0x2e8c33['body'];if(typeof _0x4ebafa=='string')var _0x4275d0=[_0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0xed)]],_0x21df5c=[_0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0xce)]],_0x362c12=[_0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0xee)]],_0x45eb23=[_0x2e8c33[_0xdaf681(0x9c)]['return_qty']],_0x207b4e=[_0x2e8c33[_0xdaf681(0x9c)]['level']],_0x31463e=[_0x2e8c33[_0xdaf681(0x9c)]['isle']],_0xc40ca1=[_0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0xa4)]],_0x425c39=[_0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0xab)]],_0x4d1230=[_0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0xad)]],_0x10ca45=[_0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0xdd)]],_0x1a1095=[_0x2e8c33['body'][_0xdaf681(0x109)]];else var _0x4275d0=[..._0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0xed)]],_0x21df5c=[..._0x2e8c33['body']['purchase_quantity']],_0x362c12=[..._0x2e8c33[_0xdaf681(0x9c)]['stocks']],_0x45eb23=[..._0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0xa9)]],_0x207b4e=[..._0x2e8c33['body'][_0xdaf681(0xfd)]],_0x31463e=[..._0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0xc5)]],_0xc40ca1=[..._0x2e8c33['body'][_0xdaf681(0xa4)]],_0x4d1230=[..._0x2e8c33['body']['product_code_hide']],_0x10ca45=[..._0x2e8c33[_0xdaf681(0x9c)]['primary_code_hide']],_0x1a1095=[..._0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0x109)]],_0x425c39=[..._0x2e8c33['body'][_0xdaf681(0xab)]];const _0x224c44=_0x4275d0['map'](_0x2e34dd=>{return _0x2e34dd={'product_name':_0x2e34dd};});_0x21df5c[_0xdaf681(0xb5)]((_0xbbbba1,_0x548af6)=>{var _0x230cf4=_0xdaf681;_0x224c44[_0x548af6][_0x230cf4(0xce)]=_0xbbbba1;}),_0x362c12['forEach']((_0x43e261,_0xaf10d5)=>{var _0x35479c=_0xdaf681;_0x224c44[_0xaf10d5][_0x35479c(0xba)]=_0x43e261;}),_0x45eb23[_0xdaf681(0xb5)]((_0x5957f6,_0x287c1d)=>{_0x224c44[_0x287c1d]['return_qty']=_0x5957f6;}),_0x207b4e[_0xdaf681(0xb5)]((_0x443b29,_0x5de477)=>{var _0x34b4ae=_0xdaf681;_0x224c44[_0x5de477][_0x34b4ae(0x105)]=_0x443b29;}),_0x31463e['forEach']((_0x474bd0,_0x432bf0)=>{var _0x403178=_0xdaf681;_0x224c44[_0x432bf0][_0x403178(0xf3)]=_0x474bd0;}),_0xc40ca1[_0xdaf681(0xb5)]((_0x238c04,_0x42003a)=>{var _0x462ec8=_0xdaf681;_0x224c44[_0x42003a][_0x462ec8(0x10e)]=_0x238c04;}),_0x4d1230['forEach']((_0xa25abe,_0x853ddf)=>{var _0x259e04=_0xdaf681;_0x224c44[_0x853ddf][_0x259e04(0x9b)]=_0xa25abe;}),_0x10ca45[_0xdaf681(0xb5)]((_0x5c9282,_0x7d781a)=>{var _0x27bd18=_0xdaf681;_0x224c44[_0x7d781a][_0x27bd18(0x11b)]=_0x5c9282;}),_0x1a1095[_0xdaf681(0xb5)]((_0x46c2e2,_0x4864db)=>{_0x224c44[_0x4864db]['secondary_code']=_0x46c2e2;}),_0x425c39['forEach']((_0x507d21,_0x13b0b1)=>{_0x224c44[_0x13b0b1]['type']=_0x507d21;});var _0x545e6c=0x0;_0x224c44[_0xdaf681(0xb5)](_0x335f8e=>{var _0x347bf8=_0xdaf681;console['log'](_0x347bf8(0xb2),_0x335f8e),(parseInt(_0x335f8e[_0x347bf8(0xce)])<parseInt(_0x335f8e[_0x347bf8(0xa9)])||parseInt(_0x335f8e[_0x347bf8(0xba)])<parseInt(_0x335f8e[_0x347bf8(0xa9)])||parseInt(_0x335f8e[_0x347bf8(0xa9)])==0x0)&&_0x545e6c++;});if(_0x545e6c!=0x0)return _0x2e8c33[_0xdaf681(0xde)](_0xdaf681(0x112),_0xdaf681(0xa0)),_0x3ab01c['redirect']('back');_0x4bf49a['return_product'][_0xdaf681(0xb5)](_0x597583=>{var _0x2d6c81=_0xdaf681;const _0x582f29=_0x5249e1[_0x2d6c81(0xa5)][_0x2d6c81(0xf5)](_0x133ffa=>{var _0x3500e2=_0x2d6c81;_0x133ffa[_0x3500e2(0xed)]==_0x597583[_0x3500e2(0xed)]&&_0x133ffa[_0x3500e2(0x10e)]==_0x597583['floorlevel']&&_0x133ffa[_0x3500e2(0x102)]==_0x597583[_0x3500e2(0x102)]&&_0x133ffa[_0x3500e2(0xf3)]==_0x597583[_0x3500e2(0xf3)]&&_0x133ffa[_0x3500e2(0x105)]==_0x597583[_0x3500e2(0x105)]&&(_0x133ffa[_0x3500e2(0xc9)]=parseInt(_0x133ffa[_0x3500e2(0xc9)])+parseInt(_0x597583[_0x3500e2(0xa9)]));});}),console[_0xdaf681(0xa7)]('old_warehouse_data',_0x5249e1),await _0x5249e1[_0xdaf681(0x9a)](),_0x4bf49a[_0xdaf681(0x113)]=_0x4f4617,_0x4bf49a['suppliers']=_0x15d48e,_0x4bf49a['date']=_0x4897d1,_0x4bf49a['warehouse_name']=_0x2980e1,_0x4bf49a[_0xdaf681(0xd0)]=_0x224c44,_0x4bf49a[_0xdaf681(0xb9)]=_0x4865e9,_0x4bf49a[_0xdaf681(0xdb)]=_0x903b79,_0x4bf49a[_0xdaf681(0xa1)]=_0x43ca06,_0x4bf49a[_0xdaf681(0xd9)]=_0x208cdb;const _0x18d7e1=await _0x4bf49a['save'](),_0x474446=await purchases_return['findOne']({'invoice':_0x2e8c33['body'][_0xdaf681(0x113)]}),_0x4e5799=await warehouse[_0xdaf681(0xb0)]({'name':_0x2e8c33[_0xdaf681(0x9c)]['to_warehouse_name'],'room':_0x2e8c33[_0xdaf681(0x9c)][_0xdaf681(0x107)]});_0x474446['return_product']['forEach'](_0xb257fc=>{var _0x162677=_0xdaf681;_0x4e5799['product_details'][_0x162677(0xf5)](_0x485c0f=>{var _0x3f27fb=_0x162677;_0x485c0f[_0x3f27fb(0xed)]==_0xb257fc[_0x3f27fb(0xed)]&&_0x485c0f['pallet']==_0xb257fc['pallet']&&(_0x485c0f['product_stock']=parseInt(_0x485c0f['product_stock'])-parseInt(_0xb257fc[_0x3f27fb(0xa9)]),console[_0x3f27fb(0xa7)](_0x3f27fb(0x9e),_0xb257fc[_0x3f27fb(0xa9)]));});}),console['log']('final',_0x4e5799),await _0x4e5799[_0xdaf681(0x9a)]();const _0x220479=await s_payment_data[_0xdaf681(0xb0)]({'invoice':_0x2e8c33[_0xdaf681(0x9c)]['invoice'],'reason':_0xdaf681(0xd1)});await _0x220479[_0xdaf681(0x9a)](),_0x2e8c33[_0xdaf681(0xde)]('success',_0xdaf681(0xc7)),_0x3ab01c[_0xdaf681(0x100)](_0xdaf681(0xcc));}catch(_0x1cedea){console['log'](_0x1cedea),_0x3ab01c[_0xdaf681(0x116)](0xc8)['json']({'message':_0x1cedea[_0xdaf681(0xc0)]});}}),router['get'](a0_0x6cf489(0x9d),auth,async(_0x361c50,_0x14cf0e)=>{var _0x4386e5=a0_0x6cf489;try{const {username:_0x443dff,email:_0x4a2481,role:_0x4880f9}=_0x361c50['user'],_0x3f7d10=_0x361c50[_0x4386e5(0xaa)],_0x75639c=await profile[_0x4386e5(0xb0)]({'email':_0x3f7d10[_0x4386e5(0xb8)]}),_0x17fcdc=await master_shop[_0x4386e5(0xeb)]();console[_0x4386e5(0xa7)](_0x4386e5(0xca),_0x17fcdc);const _0x355de1=_0x361c50[_0x4386e5(0xda)]['id'],_0x290789=await purchases_return[_0x4386e5(0xe7)](_0x355de1);console[_0x4386e5(0xa7)](_0x290789);const _0x15d520=await suppliers[_0x4386e5(0xb0)]({'name':_0x290789['suppliers']});console['log'](_0x15d520);if(_0x17fcdc[0x0]['language']=='English\x20(US)'){var _0x2a494c=users['English'];console[_0x4386e5(0xa7)](_0x2a494c);}else{if(_0x17fcdc[0x0][_0x4386e5(0xef)]==_0x4386e5(0x115))var _0x2a494c=users[_0x4386e5(0x115)];else{if(_0x17fcdc[0x0][_0x4386e5(0xef)]==_0x4386e5(0xcd))var _0x2a494c=users[_0x4386e5(0xcd)];else{if(_0x17fcdc[0x0][_0x4386e5(0xef)]==_0x4386e5(0xf8))var _0x2a494c=users[_0x4386e5(0xf8)];else{if(_0x17fcdc[0x0][_0x4386e5(0xef)]==_0x4386e5(0x117))var _0x2a494c=users[_0x4386e5(0x117)];else{if(_0x17fcdc[0x0]['language']==_0x4386e5(0xa8))var _0x2a494c=users[_0x4386e5(0xf2)];else{if(_0x17fcdc[0x0][_0x4386e5(0xef)]=='Chinese')var _0x2a494c=users[_0x4386e5(0xfb)];else{if(_0x17fcdc[0x0]['language']==_0x4386e5(0xac))var _0x2a494c=users[_0x4386e5(0xc6)];}}}}}}}_0x14cf0e[_0x4386e5(0x10d)](_0x4386e5(0xb7),{'success':_0x361c50[_0x4386e5(0xde)](_0x4386e5(0xa3)),'errors':_0x361c50[_0x4386e5(0xde)](_0x4386e5(0x112)),'role':_0x3f7d10,'profile':_0x75639c,'master_shop':_0x17fcdc,'supplier':_0x15d520,'purchase':_0x290789,'language':_0x2a494c});}catch(_0x2258fd){console[_0x4386e5(0xa7)](_0x2258fd);}}),router[a0_0x6cf489(0xdf)](a0_0x6cf489(0xfe),auth,async(_0x47063a,_0x26818e)=>{var _0x47499a=a0_0x6cf489;try{const _0x1b9611=_0x47063a[_0x47499a(0xda)]['id'],{invoice:_0x3275b3,suppliers:_0x5cc645,receivable_amount:_0x210410,received_amount:_0x3e73a6}=_0x47063a[_0x47499a(0x9c)],_0x9ec9a9=await purchases_return[_0x47499a(0xe7)](_0x1b9611);console[_0x47499a(0xa7)](_0x9ec9a9);var _0x466ca7=_0x210410-_0x3e73a6;console[_0x47499a(0xa7)](_0x3e73a6),_0x9ec9a9['received']=parseFloat(_0x3e73a6)+parseFloat(_0x9ec9a9['received']),_0x9ec9a9[_0x47499a(0xd3)]=_0x466ca7,console['log'](_0x9ec9a9);const _0x281dd2=await _0x9ec9a9[_0x47499a(0x9a)](),_0x339ce0=await s_payment_data['findOne']({'invoice':_0x47063a['body'][_0x47499a(0x113)],'reason':_0x47499a(0xd1)});_0x339ce0[_0x47499a(0x11a)]=_0x466ca7,await _0x339ce0['save']();let _0x2ec53a=new Date(),_0x4d225c=('0'+_0x2ec53a[_0x47499a(0xf9)]())[_0x47499a(0x106)](-0x2),_0x476741=('0'+(_0x2ec53a[_0x47499a(0xd5)]()+0x1))[_0x47499a(0x106)](-0x2),_0xb9823b=_0x2ec53a['getFullYear'](),_0x333f88=_0xb9823b+'-'+_0x476741+'-'+_0x4d225c;const _0x11c73f=new suppliers_payment({'invoice':_0x3275b3,'date':_0xb9823b+'-'+_0x476741+'-'+_0x4d225c,'suppliers':_0x5cc645,'reason':_0x47499a(0xf1),'amount':_0x3e73a6}),_0x4e8f81=await _0x11c73f[_0x47499a(0x9a)]();_0x47063a[_0x47499a(0xde)](_0x47499a(0xa3),_0x47499a(0xfa)),_0x26818e[_0x47499a(0x100)](_0x47499a(0xcc));}catch(_0xd2ea70){console['log'](_0xd2ea70);}}),module['exports']=router;