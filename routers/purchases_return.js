var a0_0x255ba8=a0_0x2878;(function(_0x40974f,_0x14ff70){var _0x1903d0=a0_0x2878,_0x74090b=_0x40974f();while(!![]){try{var _0x134251=-parseInt(_0x1903d0(0x156))/0x1*(-parseInt(_0x1903d0(0xff))/0x2)+-parseInt(_0x1903d0(0x12e))/0x3+parseInt(_0x1903d0(0x164))/0x4*(parseInt(_0x1903d0(0x16c))/0x5)+parseInt(_0x1903d0(0x13a))/0x6+parseInt(_0x1903d0(0xf9))/0x7+-parseInt(_0x1903d0(0xfb))/0x8+-parseInt(_0x1903d0(0x170))/0x9;if(_0x134251===_0x14ff70)break;else _0x74090b['push'](_0x74090b['shift']());}catch(_0x1aff42){_0x74090b['push'](_0x74090b['shift']());}}}(a0_0x3673,0x32831));function a0_0x3673(){var _0x163803=['back','product_details','log','$note','product_stock','Received\x20For\x20Purchase\x20Return','message','to_Room_name','$receivable','$product_details.bin','forEach','Return\x20Goods','37669VljesV','$name','type','$total_amount','Spanish','$return_product.return_qty','aggregate','final','amount','/view/:id','$product_details.storage','warehouse_name','$return_product','Arabic\x20(ae)','64QjcFea','success','old_data','$product_details.primary_code','note','pallet','English\x20(US)','express','113520ZeLxqx','$supplier_docs.address','string','map','2938806QYfRhg','return_qty','Chinese','suppliers','Enabled','save','../public/language/languages.json','redirect','return_purchase_edit','$product_details.type','received','Raw\x20Materials','primary_code','583142zoDNif','$product_details.product_stock','199864PeXGCP','product_details.return_qtyproduct_details.return_qty','$invoice','level','8dxkKDP','floorlevel','flash','to_warehouse_name','English','$due_amount','old_warehouse_data','stocks','email','primary_code_hide','stock_quantity','../middleware/auth','Purchase\x20Return','isle','to_room','$warehouse_name','getDate','findById','user','/receive_payment/:id','Hindi','$suppliers','product_name','render','secondary_code','secondary_code_hide','supplier_docs','body','exports','getMonth','language','$discount','$received','return_product','Arabic','$product_details','get','$supplier_docs.mobile','$return_product.price','$product_details._id','Router','bay','stock_data','$product_details.product_code','../models/all_models','product_code_hide','types','840075JTYnbN','French','$supplier_docs.email','$product_details.rack','/view','params','return_purchase_invoice','product_code','German','/purchases_return/view','Portuguese\x20(BR)','invoice','1447158GlNcoJ','Portuguese','post','purchase_quantity','purchase\x20return\x20successfully','$product_details.product_name','json','findOne','$product_details.bay','$return_product.product_name','master','slice','status','bin','find','errors'];a0_0x3673=function(){return _0x163803;};return a0_0x3673();}const express=require(a0_0x255ba8(0x16b)),app=express(),router=express[a0_0x255ba8(0x127)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x255ba8(0x12b)),auth=require(a0_0x255ba8(0x10a)),users=require(a0_0x255ba8(0x176));function a0_0x2878(_0x57280f,_0x409fa4){var _0x3673cd=a0_0x3673();return a0_0x2878=function(_0x2878f0,_0x1e21ee){_0x2878f0=_0x2878f0-0xf7;var _0x2ea9c8=_0x3673cd[_0x2878f0];return _0x2ea9c8;},a0_0x2878(_0x57280f,_0x409fa4);}router[a0_0x255ba8(0x123)](a0_0x255ba8(0x132),auth,async(_0x1eacb1,_0x22ef31)=>{var _0x4c61c7=a0_0x255ba8;try{const {username:_0x39aa10,email:_0x1355d1,role:_0x2b5160}=_0x1eacb1['user'],_0x8dbb4c=_0x1eacb1[_0x4c61c7(0x111)],_0x5da6c3=await profile['findOne']({'email':_0x8dbb4c['email']}),_0x1e1c20=await master_shop[_0x4c61c7(0x148)]();console[_0x4c61c7(0x14c)](_0x4c61c7(0x144),_0x1e1c20);const _0x422813=await purchases_return[_0x4c61c7(0x15c)]([{'$lookup':{'from':_0x4c61c7(0x173),'localField':_0x4c61c7(0x173),'foreignField':'name','as':_0x4c61c7(0x119)}},{'$unwind':_0x4c61c7(0x162)},{'$unwind':'$supplier_docs'},{'$group':{'_id':'$_id','invoice':{'$first':_0x4c61c7(0xfd)},'date':{'$first':'$date'},'suppliers':{'$first':_0x4c61c7(0x114)},'warehouse_name':{'$first':_0x4c61c7(0x10e)},'product_name':{'$first':_0x4c61c7(0x143)},'return_qty':{'$first':_0x4c61c7(0x15b)},'price':{'$first':_0x4c61c7(0x125)},'total':{'$sum':'$return_product.total'},'note':{'$first':_0x4c61c7(0x14d)},'total_amount':{'$first':_0x4c61c7(0x159)},'discount':{'$first':_0x4c61c7(0x11e)},'receivable':{'$first':_0x4c61c7(0x152)},'received':{'$first':_0x4c61c7(0x11f)},'due_amount':{'$first':_0x4c61c7(0x104)},'mobile':{'$first':_0x4c61c7(0x124)},'email':{'$first':_0x4c61c7(0x130)},'address':{'$first':_0x4c61c7(0x16d)},'return_sum_qty':{'$sum':_0x4c61c7(0x15b)}}}]);console['log'](_0x422813);if(_0x1e1c20[0x0][_0x4c61c7(0x11d)]==_0x4c61c7(0x16a)){var _0x344198=users[_0x4c61c7(0x103)];console[_0x4c61c7(0x14c)](_0x344198);}else{if(_0x1e1c20[0x0][_0x4c61c7(0x11d)]==_0x4c61c7(0x113))var _0x344198=users[_0x4c61c7(0x113)];else{if(_0x1e1c20[0x0][_0x4c61c7(0x11d)]==_0x4c61c7(0x136))var _0x344198=users[_0x4c61c7(0x136)];else{if(_0x1e1c20[0x0]['language']==_0x4c61c7(0x15a))var _0x344198=users[_0x4c61c7(0x15a)];else{if(_0x1e1c20[0x0][_0x4c61c7(0x11d)]==_0x4c61c7(0x12f))var _0x344198=users['French'];else{if(_0x1e1c20[0x0]['language']=='Portuguese\x20(BR)')var _0x344198=users[_0x4c61c7(0x13b)];else{if(_0x1e1c20[0x0]['language']==_0x4c61c7(0x172))var _0x344198=users[_0x4c61c7(0x172)];else{if(_0x1e1c20[0x0][_0x4c61c7(0x11d)]==_0x4c61c7(0x163))var _0x344198=users[_0x4c61c7(0x121)];}}}}}}}_0x22ef31['render']('purchases_return',{'success':_0x1eacb1['flash'](_0x4c61c7(0x165)),'errors':_0x1eacb1[_0x4c61c7(0x101)](_0x4c61c7(0x149)),'role':_0x8dbb4c,'profile':_0x5da6c3,'master_shop':_0x1e1c20,'user':_0x422813,'language':_0x344198});}catch(_0x111b1e){console[_0x4c61c7(0x14c)](_0x111b1e);}}),router[a0_0x255ba8(0x123)](a0_0x255ba8(0x15f),auth,async(_0x3e457c,_0x4df9e9)=>{var _0x318562=a0_0x255ba8;try{const {username:_0x1599b1,email:_0xf7b350,role:_0x14857d}=_0x3e457c[_0x318562(0x111)],_0x40eb76=_0x3e457c[_0x318562(0x111)],_0x191959=await profile[_0x318562(0x141)]({'email':_0x40eb76['email']}),_0x3e91f5=await product[_0x318562(0x148)]({}),_0xb0919c=await master_shop[_0x318562(0x148)]();console[_0x318562(0x14c)](_0x318562(0x144),_0xb0919c),console['log'](_0x3e457c['body']);const _0xca4d4a=_0x3e457c[_0x318562(0x133)]['id'],_0x117b72=await purchases_return[_0x318562(0x110)](_0xca4d4a);console[_0x318562(0x14c)](_0x117b72);const _0xe38359=await warehouse[_0x318562(0x15c)]([{'$match':{'name':_0x117b72[_0x318562(0x161)],'room':_0x117b72['room']}},{'$unwind':_0x318562(0x122)},{'$group':{'_id':_0x318562(0x126),'name':{'$first':_0x318562(0x13f)},'product_stock':{'$first':_0x318562(0xfa)},'bay':{'$first':_0x318562(0x142)},'bin':{'$first':_0x318562(0x153)},'type':{'$first':_0x318562(0x179)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x318562(0x167)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x318562(0x12a)},'storage':{'$first':_0x318562(0x160)},'rack':{'$first':_0x318562(0x131)}}}]);warehouse_data=await warehouse[_0x318562(0x15c)]([{'$match':{'status':_0x318562(0x174),'name':_0x318562(0x155),'warehouse_category':_0x318562(0xf7)}},{'$group':{'_id':'$name','name':{'$first':_0x318562(0x157)}}},{'$sort':{'name':0x1}}]),console['log'](_0x318562(0x129),_0xe38359);if(_0xb0919c[0x0][_0x318562(0x11d)]==_0x318562(0x16a)){var _0x4798eb=users['English'];console[_0x318562(0x14c)](_0x4798eb);}else{if(_0xb0919c[0x0]['language']==_0x318562(0x113))var _0x4798eb=users[_0x318562(0x113)];else{if(_0xb0919c[0x0][_0x318562(0x11d)]==_0x318562(0x136))var _0x4798eb=users[_0x318562(0x136)];else{if(_0xb0919c[0x0][_0x318562(0x11d)]==_0x318562(0x15a))var _0x4798eb=users[_0x318562(0x15a)];else{if(_0xb0919c[0x0][_0x318562(0x11d)]=='French')var _0x4798eb=users[_0x318562(0x12f)];else{if(_0xb0919c[0x0]['language']==_0x318562(0x138))var _0x4798eb=users[_0x318562(0x13b)];else{if(_0xb0919c[0x0][_0x318562(0x11d)]==_0x318562(0x172))var _0x4798eb=users[_0x318562(0x172)];else{if(_0xb0919c[0x0]['language']=='Arabic\x20(ae)')var _0x4798eb=users[_0x318562(0x121)];}}}}}}}_0x4df9e9[_0x318562(0x116)](_0x318562(0x178),{'success':_0x3e457c[_0x318562(0x101)](_0x318562(0x165)),'errors':_0x3e457c[_0x318562(0x101)](_0x318562(0x149)),'role':_0x40eb76,'master_shop':_0xb0919c,'profile':_0x191959,'user':_0x117b72,'stock':_0xe38359,'product':_0x3e91f5,'language':_0x4798eb,'warehouse':warehouse_data});}catch(_0xf503da){console[_0x318562(0x14c)](_0xf503da);}}),router[a0_0x255ba8(0x13c)](a0_0x255ba8(0x15f),auth,async(_0x26d93e,_0xe5bd7d)=>{var _0x2a8c8d=a0_0x255ba8;try{const _0x5af83a=_0x26d93e[_0x2a8c8d(0x133)]['id'];console[_0x2a8c8d(0x14c)](_0x5af83a);const _0x1f0336=await purchases_return[_0x2a8c8d(0x141)]({'invoice':_0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x139)]});console[_0x2a8c8d(0x14c)](_0x2a8c8d(0x166),_0x1f0336);const _0x54888e=await warehouse['findOne']({'name':_0x1f0336[_0x2a8c8d(0x102)],'room':_0x1f0336[_0x2a8c8d(0x10d)]});console[_0x2a8c8d(0x14c)]('old_warehouse_data',_0x54888e);const {invoice:_0x1f3722,suppliers:_0x1d3d06,date:_0x392dc7,warehouse_name:_0x58530c,product_name:_0x47a2ba,purchase_quantity:_0x1f4844,stocks:_0x385045,return_qty:_0xb7ede0,note:_0x4f5ccd,Room_name:_0x3595bc,level:_0x5aa8bd,isle:_0x408c5d,pallet:_0x438377,to_warehouse_name:_0x4ef526,to_Room_name:_0x23ea9d}=_0x26d93e[_0x2a8c8d(0x11a)];if(typeof _0x47a2ba==_0x2a8c8d(0x16e))var _0x151e78=[_0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x115)]],_0x4db8ca=[_0x26d93e['body']['purchase_quantity']],_0x390d47=[_0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x106)]],_0x4ff29b=[_0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x171)]],_0x432c1e=[_0x26d93e['body'][_0x2a8c8d(0xfe)]],_0x5c94ad=[_0x26d93e['body'][_0x2a8c8d(0x10c)]],_0x5d404f=[_0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x169)]],_0x15d0e4=[_0x26d93e['body'][_0x2a8c8d(0x12d)]],_0x396d95=[_0x26d93e[_0x2a8c8d(0x11a)]['product_code_hide']],_0x3ad67b=[_0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x108)]],_0x27fc45=[_0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x118)]];else var _0x151e78=[..._0x26d93e[_0x2a8c8d(0x11a)]['product_name']],_0x4db8ca=[..._0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x13d)]],_0x390d47=[..._0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x106)]],_0x4ff29b=[..._0x26d93e[_0x2a8c8d(0x11a)]['return_qty']],_0x432c1e=[..._0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0xfe)]],_0x5c94ad=[..._0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x10c)]],_0x5d404f=[..._0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x169)]],_0x396d95=[..._0x26d93e['body'][_0x2a8c8d(0x12c)]],_0x3ad67b=[..._0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x108)]],_0x27fc45=[..._0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x118)]],_0x15d0e4=[..._0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x12d)]];const _0x10965b=_0x151e78[_0x2a8c8d(0x16f)](_0x204544=>{return _0x204544={'product_name':_0x204544};});_0x4db8ca[_0x2a8c8d(0x154)]((_0x3865a8,_0x577978)=>{_0x10965b[_0x577978]['purchase_quantity']=_0x3865a8;}),_0x390d47[_0x2a8c8d(0x154)]((_0x1d9308,_0x57023a)=>{var _0x3c24f1=_0x2a8c8d;_0x10965b[_0x57023a][_0x3c24f1(0x109)]=_0x1d9308;}),_0x4ff29b[_0x2a8c8d(0x154)]((_0x1df171,_0x114238)=>{_0x10965b[_0x114238]['return_qty']=_0x1df171;}),_0x432c1e[_0x2a8c8d(0x154)]((_0x175b76,_0x3a4957)=>{var _0x10782d=_0x2a8c8d;_0x10965b[_0x3a4957][_0x10782d(0x128)]=_0x175b76;}),_0x5c94ad['forEach']((_0x4bb800,_0x4c09bc)=>{var _0x4273a6=_0x2a8c8d;_0x10965b[_0x4c09bc][_0x4273a6(0x147)]=_0x4bb800;}),_0x5d404f[_0x2a8c8d(0x154)]((_0x5d01a2,_0x51b2c4)=>{var _0x421495=_0x2a8c8d;_0x10965b[_0x51b2c4][_0x421495(0x100)]=_0x5d01a2;}),_0x396d95['forEach']((_0x5d10b2,_0x1a46d2)=>{var _0x1f8e1c=_0x2a8c8d;_0x10965b[_0x1a46d2][_0x1f8e1c(0x135)]=_0x5d10b2;}),_0x3ad67b[_0x2a8c8d(0x154)]((_0x4f4c08,_0x1b1215)=>{var _0xf7536=_0x2a8c8d;_0x10965b[_0x1b1215][_0xf7536(0xf8)]=_0x4f4c08;}),_0x27fc45['forEach']((_0x44caaf,_0x4ecc43)=>{var _0x244c50=_0x2a8c8d;_0x10965b[_0x4ecc43][_0x244c50(0x117)]=_0x44caaf;}),_0x15d0e4[_0x2a8c8d(0x154)]((_0xc07546,_0x361934)=>{var _0x4309b7=_0x2a8c8d;_0x10965b[_0x361934][_0x4309b7(0x158)]=_0xc07546;});var _0x4b0d2d=0x0;_0x10965b['forEach'](_0x5ede19=>{var _0x986263=_0x2a8c8d;console['log']('foreach\x20newproduct',_0x5ede19),(parseInt(_0x5ede19[_0x986263(0x13d)])<parseInt(_0x5ede19[_0x986263(0x171)])||parseInt(_0x5ede19['stock_quantity'])<parseInt(_0x5ede19['return_qty'])||parseInt(_0x5ede19[_0x986263(0x171)])==0x0)&&_0x4b0d2d++;});if(_0x4b0d2d!=0x0)return _0x26d93e[_0x2a8c8d(0x101)]('errors','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty'),_0xe5bd7d['redirect'](_0x2a8c8d(0x14a));_0x1f0336['return_product']['forEach'](_0xf668b4=>{const _0x33186f=_0x54888e['product_details']['map'](_0x461f5f=>{var _0x30133b=a0_0x2878;_0x461f5f['product_name']==_0xf668b4['product_name']&&_0x461f5f[_0x30133b(0x100)]==_0xf668b4[_0x30133b(0x100)]&&_0x461f5f[_0x30133b(0x158)]==_0xf668b4[_0x30133b(0x158)]&&_0x461f5f['bin']==_0xf668b4[_0x30133b(0x147)]&&_0x461f5f[_0x30133b(0x128)]==_0xf668b4[_0x30133b(0x128)]&&(_0x461f5f[_0x30133b(0x14e)]=parseInt(_0x461f5f[_0x30133b(0x14e)])+parseInt(_0xf668b4[_0x30133b(0x171)]));});}),console['log'](_0x2a8c8d(0x105),_0x54888e),await _0x54888e['save'](),_0x1f0336[_0x2a8c8d(0x139)]=_0x1f3722,_0x1f0336[_0x2a8c8d(0x173)]=_0x1d3d06,_0x1f0336['date']=_0x392dc7,_0x1f0336['warehouse_name']=_0x58530c,_0x1f0336[_0x2a8c8d(0x120)]=_0x10965b,_0x1f0336[_0x2a8c8d(0x168)]=_0x4f5ccd,_0x1f0336['room']=_0x3595bc,_0x1f0336['to_warehouse_name']=_0x4ef526,_0x1f0336[_0x2a8c8d(0x10d)]=_0x23ea9d;const _0x2b425c=await _0x1f0336[_0x2a8c8d(0x175)](),_0x125c0e=await purchases_return['findOne']({'invoice':_0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x139)]}),_0x444659=await warehouse[_0x2a8c8d(0x141)]({'name':_0x26d93e['body'][_0x2a8c8d(0x102)],'room':_0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x151)]});_0x125c0e['return_product']['forEach'](_0x1e4b0b=>{var _0xde4cc4=_0x2a8c8d;_0x444659[_0xde4cc4(0x14b)][_0xde4cc4(0x16f)](_0x8928c=>{var _0x1e5017=_0xde4cc4;_0x8928c[_0x1e5017(0x115)]==_0x1e4b0b[_0x1e5017(0x115)]&&_0x8928c[_0x1e5017(0x169)]==_0x1e4b0b['pallet']&&(_0x8928c[_0x1e5017(0x14e)]=parseInt(_0x8928c[_0x1e5017(0x14e)])-parseInt(_0x1e4b0b[_0x1e5017(0x171)]),console['log'](_0x1e5017(0xfc),_0x1e4b0b['return_qty']));});}),console[_0x2a8c8d(0x14c)](_0x2a8c8d(0x15d),_0x444659),await _0x444659[_0x2a8c8d(0x175)]();const _0x5345ff=await s_payment_data['findOne']({'invoice':_0x26d93e[_0x2a8c8d(0x11a)][_0x2a8c8d(0x139)],'reason':_0x2a8c8d(0x10b)});await _0x5345ff[_0x2a8c8d(0x175)](),_0x26d93e[_0x2a8c8d(0x101)]('success',_0x2a8c8d(0x13e)),_0xe5bd7d[_0x2a8c8d(0x177)](_0x2a8c8d(0x137));}catch(_0x512b4b){console[_0x2a8c8d(0x14c)](_0x512b4b),_0xe5bd7d[_0x2a8c8d(0x146)](0xc8)[_0x2a8c8d(0x140)]({'message':_0x512b4b[_0x2a8c8d(0x150)]});}}),router[a0_0x255ba8(0x123)]('/invoice/:id',auth,async(_0x405be3,_0x2ebbd8)=>{var _0x13f386=a0_0x255ba8;try{const {username:_0x1bd49e,email:_0xe8a79b,role:_0x460ae0}=_0x405be3[_0x13f386(0x111)],_0x3db6e4=_0x405be3['user'],_0x8ee4d4=await profile['findOne']({'email':_0x3db6e4[_0x13f386(0x107)]}),_0x1e3a65=await master_shop[_0x13f386(0x148)]();console[_0x13f386(0x14c)](_0x13f386(0x144),_0x1e3a65);const _0x12eae1=_0x405be3[_0x13f386(0x133)]['id'],_0x58c9d0=await purchases_return['findById'](_0x12eae1);console[_0x13f386(0x14c)](_0x58c9d0);const _0x427777=await suppliers['findOne']({'name':_0x58c9d0[_0x13f386(0x173)]});console[_0x13f386(0x14c)](_0x427777);if(_0x1e3a65[0x0][_0x13f386(0x11d)]==_0x13f386(0x16a)){var _0x1cf220=users[_0x13f386(0x103)];console[_0x13f386(0x14c)](_0x1cf220);}else{if(_0x1e3a65[0x0][_0x13f386(0x11d)]=='Hindi')var _0x1cf220=users[_0x13f386(0x113)];else{if(_0x1e3a65[0x0]['language']=='German')var _0x1cf220=users[_0x13f386(0x136)];else{if(_0x1e3a65[0x0][_0x13f386(0x11d)]==_0x13f386(0x15a))var _0x1cf220=users[_0x13f386(0x15a)];else{if(_0x1e3a65[0x0][_0x13f386(0x11d)]==_0x13f386(0x12f))var _0x1cf220=users[_0x13f386(0x12f)];else{if(_0x1e3a65[0x0][_0x13f386(0x11d)]==_0x13f386(0x138))var _0x1cf220=users[_0x13f386(0x13b)];else{if(_0x1e3a65[0x0][_0x13f386(0x11d)]=='Chinese')var _0x1cf220=users[_0x13f386(0x172)];else{if(_0x1e3a65[0x0]['language']==_0x13f386(0x163))var _0x1cf220=users[_0x13f386(0x121)];}}}}}}}_0x2ebbd8[_0x13f386(0x116)](_0x13f386(0x134),{'success':_0x405be3['flash']('success'),'errors':_0x405be3[_0x13f386(0x101)](_0x13f386(0x149)),'role':_0x3db6e4,'profile':_0x8ee4d4,'master_shop':_0x1e3a65,'supplier':_0x427777,'purchase':_0x58c9d0,'language':_0x1cf220});}catch(_0x80fa39){console[_0x13f386(0x14c)](_0x80fa39);}}),router[a0_0x255ba8(0x13c)](a0_0x255ba8(0x112),auth,async(_0x5e5846,_0x38f6fe)=>{var _0x4f5a73=a0_0x255ba8;try{const _0x175ed2=_0x5e5846['params']['id'],{invoice:_0x2617e4,suppliers:_0x907de8,receivable_amount:_0xf96481,received_amount:_0x5ddb5a}=_0x5e5846[_0x4f5a73(0x11a)],_0x504cac=await purchases_return[_0x4f5a73(0x110)](_0x175ed2);console[_0x4f5a73(0x14c)](_0x504cac);var _0x2fffa6=_0xf96481-_0x5ddb5a;console[_0x4f5a73(0x14c)](_0x5ddb5a),_0x504cac[_0x4f5a73(0x17a)]=parseFloat(_0x5ddb5a)+parseFloat(_0x504cac[_0x4f5a73(0x17a)]),_0x504cac['due_amount']=_0x2fffa6,console[_0x4f5a73(0x14c)](_0x504cac);const _0x4f7de0=await _0x504cac[_0x4f5a73(0x175)](),_0xd7421f=await s_payment_data[_0x4f5a73(0x141)]({'invoice':_0x5e5846[_0x4f5a73(0x11a)]['invoice'],'reason':_0x4f5a73(0x10b)});_0xd7421f[_0x4f5a73(0x15e)]=_0x2fffa6,await _0xd7421f[_0x4f5a73(0x175)]();let _0x558bbc=new Date(),_0x3815cd=('0'+_0x558bbc[_0x4f5a73(0x10f)]())[_0x4f5a73(0x145)](-0x2),_0x2062a4=('0'+(_0x558bbc[_0x4f5a73(0x11c)]()+0x1))['slice'](-0x2),_0x418b54=_0x558bbc['getFullYear'](),_0x3cea9a=_0x418b54+'-'+_0x2062a4+'-'+_0x3815cd;const _0xc7f754=new suppliers_payment({'invoice':_0x2617e4,'date':_0x418b54+'-'+_0x2062a4+'-'+_0x3815cd,'suppliers':_0x907de8,'reason':_0x4f5a73(0x14f),'amount':_0x5ddb5a}),_0x345603=await _0xc7f754[_0x4f5a73(0x175)]();_0x5e5846[_0x4f5a73(0x101)]('success','payment\x20successfull'),_0x38f6fe[_0x4f5a73(0x177)](_0x4f5a73(0x137));}catch(_0x124916){console[_0x4f5a73(0x14c)](_0x124916);}}),module[a0_0x255ba8(0x11b)]=router;