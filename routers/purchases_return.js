var a0_0xc45f0b=a0_0x22bb;function a0_0x22bb(_0x12649c,_0x55d992){var _0x416ad0=a0_0x416a();return a0_0x22bb=function(_0x22bb42,_0x5f329e){_0x22bb42=_0x22bb42-0x83;var _0xd2efac=_0x416ad0[_0x22bb42];return _0xd2efac;},a0_0x22bb(_0x12649c,_0x55d992);}function a0_0x416a(){var _0x15d7db=['type','English','get','$return_product.price','$date','10ClJYJH','$return_product.return_qty','$product_details.bay','redirect','Portuguese\x20(BR)','bin','stock_quantity','purchases_return','name','42fhOBdW','errors','$note','$supplier_docs','primary_code','15733465gkowYg','received','suppliers','Purchase\x20Return','language','primary_code_hide','amount','isle','$total_amount','return_qty','exports','express','slice','/view/:id','to_warehouse_name','findById','Return\x20Goods','getMonth','master','old_warehouse_data','749652jbvnhK','/view','$supplier_docs.mobile','$product_details.product_code','664990puJnNq','note','$suppliers','$product_details._id','Arabic\x20(ae)','Hindi','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','$product_details.storage','../public/language/languages.json','user','save','$product_details.secondary_code','find','forEach','product_details.return_qtyproduct_details.return_qty','product_details','/invoice/:id','getDate','Router','4043095wjZlII','body','findOne','1562912uHQGjY','email','9JeRypX','final','to_room','aggregate','stock_data','secondary_code_hide','product_code','$_id','/purchases_return/view','$received','log','$product_details.product_name','Portuguese','German','$discount','purchase_quantity','supplier_docs','purchase\x20return\x20successfully','due_amount','old_data','params','French','floorlevel','pallet','Arabic','message','Spanish','success','1336072RIcJwV','2776aIyPfJ','6354vWWdNp','bay','Chinese','room','flash','stocks','$product_details.bin','return_product','secondary_code','product_stock','$warehouse_name','product_name','$product_details','$product_details.rack','post','$product_details.product_stock','types','level','render','map','invoice','json','English\x20(US)'];a0_0x416a=function(){return _0x15d7db;};return a0_0x416a();}(function(_0x411ea0,_0x131307){var _0x346a42=a0_0x22bb,_0x116389=_0x411ea0();while(!![]){try{var _0x337cf5=parseInt(_0x346a42(0x89))/0x1+parseInt(_0x346a42(0x9f))/0x2+-parseInt(_0x346a42(0xa1))/0x3*(parseInt(_0x346a42(0xbd))/0x4)+-parseInt(_0x346a42(0x9c))/0x5+-parseInt(_0x346a42(0x85))/0x6*(parseInt(_0x346a42(0xe4))/0x7)+-parseInt(_0x346a42(0xbe))/0x8*(-parseInt(_0x346a42(0xbf))/0x9)+parseInt(_0x346a42(0xdb))/0xa*(parseInt(_0x346a42(0xe9))/0xb);if(_0x337cf5===_0x131307)break;else _0x116389['push'](_0x116389['shift']());}catch(_0x3bca2a){_0x116389['push'](_0x116389['shift']());}}}(a0_0x416a,0x8910a));const express=require(a0_0xc45f0b(0xf4)),app=express(),router=express[a0_0xc45f0b(0x9b)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0xc45f0b(0x91));router[a0_0xc45f0b(0xd8)](a0_0xc45f0b(0x86),auth,async(_0x4f0dbb,_0x5b9f69)=>{var _0x3fafff=a0_0xc45f0b;try{const {username:_0x1657ac,email:_0x13c5ff,role:_0x5f3c7c}=_0x4f0dbb[_0x3fafff(0x92)],_0x1efa27=_0x4f0dbb['user'],_0x344405=await profile[_0x3fafff(0x9e)]({'email':_0x1efa27['email']}),_0x5eb2e6=await master_shop[_0x3fafff(0x95)]();console['log'](_0x3fafff(0x83),_0x5eb2e6);const _0x2c7940=await purchases_return[_0x3fafff(0xa4)]([{'$lookup':{'from':_0x3fafff(0xeb),'localField':_0x3fafff(0xeb),'foreignField':_0x3fafff(0xe3),'as':_0x3fafff(0xb1)}},{'$unwind':'$return_product'},{'$unwind':_0x3fafff(0xe7)},{'$group':{'_id':_0x3fafff(0xa8),'invoice':{'$first':'$invoice'},'date':{'$first':_0x3fafff(0xda)},'suppliers':{'$first':_0x3fafff(0x8b)},'warehouse_name':{'$first':_0x3fafff(0xc9)},'product_name':{'$first':'$return_product.product_name'},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':_0x3fafff(0xd9)},'total':{'$sum':'$return_product.total'},'note':{'$first':_0x3fafff(0xe6)},'total_amount':{'$first':_0x3fafff(0xf1)},'discount':{'$first':_0x3fafff(0xaf)},'receivable':{'$first':'$receivable'},'received':{'$first':_0x3fafff(0xaa)},'due_amount':{'$first':'$due_amount'},'mobile':{'$first':_0x3fafff(0x87)},'email':{'$first':'$supplier_docs.email'},'address':{'$first':'$supplier_docs.address'},'return_sum_qty':{'$sum':_0x3fafff(0xdc)}}}]);console[_0x3fafff(0xab)](_0x2c7940);if(_0x5eb2e6[0x0][_0x3fafff(0xed)]==_0x3fafff(0xd5)){var _0x5986ca=users[_0x3fafff(0xd7)];console[_0x3fafff(0xab)](_0x5986ca);}else{if(_0x5eb2e6[0x0][_0x3fafff(0xed)]=='Hindi')var _0x5986ca=users[_0x3fafff(0x8e)];else{if(_0x5eb2e6[0x0][_0x3fafff(0xed)]=='German')var _0x5986ca=users[_0x3fafff(0xae)];else{if(_0x5eb2e6[0x0][_0x3fafff(0xed)]==_0x3fafff(0xbb))var _0x5986ca=users[_0x3fafff(0xbb)];else{if(_0x5eb2e6[0x0]['language']==_0x3fafff(0xb6))var _0x5986ca=users['French'];else{if(_0x5eb2e6[0x0]['language']=='Portuguese\x20(BR)')var _0x5986ca=users[_0x3fafff(0xad)];else{if(_0x5eb2e6[0x0][_0x3fafff(0xed)]==_0x3fafff(0xc1))var _0x5986ca=users[_0x3fafff(0xc1)];else{if(_0x5eb2e6[0x0][_0x3fafff(0xed)]==_0x3fafff(0x8d))var _0x5986ca=users[_0x3fafff(0xb9)];}}}}}}}_0x5b9f69['render'](_0x3fafff(0xe2),{'success':_0x4f0dbb[_0x3fafff(0xc3)](_0x3fafff(0xbc)),'errors':_0x4f0dbb[_0x3fafff(0xc3)](_0x3fafff(0xe5)),'role':_0x1efa27,'profile':_0x344405,'master_shop':_0x5eb2e6,'user':_0x2c7940,'language':_0x5986ca});}catch(_0x2874e5){console[_0x3fafff(0xab)](_0x2874e5);}}),router['get'](a0_0xc45f0b(0xf6),auth,async(_0x2c28c1,_0x3d2f67)=>{var _0x29d328=a0_0xc45f0b;try{const {username:_0x37904c,email:_0xdd60cf,role:_0x5e31f7}=_0x2c28c1[_0x29d328(0x92)],_0x2dd9ef=_0x2c28c1[_0x29d328(0x92)],_0x2584af=await profile['findOne']({'email':_0x2dd9ef[_0x29d328(0xa0)]}),_0x245719=await product[_0x29d328(0x95)]({}),_0x4a3dd6=await master_shop[_0x29d328(0x95)]();console[_0x29d328(0xab)]('master',_0x4a3dd6),console[_0x29d328(0xab)](_0x2c28c1[_0x29d328(0x9d)]);const _0x3be63c=_0x2c28c1[_0x29d328(0xb5)]['id'],_0x16076b=await purchases_return[_0x29d328(0xf8)](_0x3be63c);console[_0x29d328(0xab)](_0x16076b);const _0xde9b87=await warehouse[_0x29d328(0xa4)]([{'$match':{'name':_0x16076b['warehouse_name'],'room':_0x16076b['room']}},{'$unwind':_0x29d328(0xcb)},{'$group':{'_id':_0x29d328(0x8c),'name':{'$first':_0x29d328(0xac)},'product_stock':{'$first':_0x29d328(0xce)},'bay':{'$first':_0x29d328(0xdd)},'bin':{'$first':_0x29d328(0xc5)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x29d328(0x94)},'product_code':{'$first':_0x29d328(0x88)},'storage':{'$first':_0x29d328(0x90)},'rack':{'$first':_0x29d328(0xcc)}}}]);warehouse_data=await warehouse[_0x29d328(0xa4)]([{'$match':{'status':'Enabled','name':_0x29d328(0xf9),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),console[_0x29d328(0xab)](_0x29d328(0xa5),_0xde9b87);if(_0x4a3dd6[0x0]['language']==_0x29d328(0xd5)){var _0x19940b=users[_0x29d328(0xd7)];console[_0x29d328(0xab)](_0x19940b);}else{if(_0x4a3dd6[0x0][_0x29d328(0xed)]==_0x29d328(0x8e))var _0x19940b=users[_0x29d328(0x8e)];else{if(_0x4a3dd6[0x0][_0x29d328(0xed)]=='German')var _0x19940b=users['German'];else{if(_0x4a3dd6[0x0][_0x29d328(0xed)]==_0x29d328(0xbb))var _0x19940b=users[_0x29d328(0xbb)];else{if(_0x4a3dd6[0x0]['language']==_0x29d328(0xb6))var _0x19940b=users[_0x29d328(0xb6)];else{if(_0x4a3dd6[0x0][_0x29d328(0xed)]==_0x29d328(0xdf))var _0x19940b=users['Portuguese'];else{if(_0x4a3dd6[0x0][_0x29d328(0xed)]==_0x29d328(0xc1))var _0x19940b=users[_0x29d328(0xc1)];else{if(_0x4a3dd6[0x0][_0x29d328(0xed)]==_0x29d328(0x8d))var _0x19940b=users['Arabic'];}}}}}}}_0x3d2f67[_0x29d328(0xd1)]('return_purchase_edit',{'success':_0x2c28c1['flash'](_0x29d328(0xbc)),'errors':_0x2c28c1['flash'](_0x29d328(0xe5)),'role':_0x2dd9ef,'master_shop':_0x4a3dd6,'profile':_0x2584af,'user':_0x16076b,'stock':_0xde9b87,'product':_0x245719,'language':_0x19940b,'warehouse':warehouse_data});}catch(_0x2bbd07){console[_0x29d328(0xab)](_0x2bbd07);}}),router[a0_0xc45f0b(0xcd)](a0_0xc45f0b(0xf6),auth,async(_0x4526c3,_0x1d036b)=>{var _0x40dbd0=a0_0xc45f0b;try{const _0x4814be=_0x4526c3['params']['id'];console[_0x40dbd0(0xab)](_0x4814be);const _0x50a548=await purchases_return[_0x40dbd0(0x9e)]({'invoice':_0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xd3)]});console['log'](_0x40dbd0(0xb4),_0x50a548);const _0xef7416=await warehouse['findOne']({'name':_0x50a548[_0x40dbd0(0xf7)],'room':_0x50a548[_0x40dbd0(0xa3)]});console[_0x40dbd0(0xab)](_0x40dbd0(0x84),_0xef7416);const {invoice:_0xb7d18,suppliers:_0x3fc218,date:_0x45dbab,warehouse_name:_0xa0bbd6,product_name:_0xb5ede7,purchase_quantity:_0x39f776,stocks:_0x47a43a,return_qty:_0xdc5448,note:_0x50636f,Room_name:_0x17c804,level:_0x5776bb,isle:_0x4ca7cc,pallet:_0x5da6e2,to_warehouse_name:_0x5152a6,to_Room_name:_0x59ad94}=_0x4526c3[_0x40dbd0(0x9d)];if(typeof _0xb5ede7=='string')var _0x533bc3=[_0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xca)]],_0x122433=[_0x4526c3[_0x40dbd0(0x9d)]['purchase_quantity']],_0x20ef2d=[_0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xc4)]],_0x10bdbf=[_0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xf2)]],_0x3b596c=[_0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xd0)]],_0x3f437f=[_0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xf0)]],_0x3a199b=[_0x4526c3['body'][_0x40dbd0(0xb8)]],_0x30ae99=[_0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xcf)]],_0x3a2954=[_0x4526c3[_0x40dbd0(0x9d)]['product_code_hide']],_0x202406=[_0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xee)]],_0x4165e8=[_0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xa6)]];else var _0x533bc3=[..._0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xca)]],_0x122433=[..._0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xb0)]],_0x20ef2d=[..._0x4526c3['body'][_0x40dbd0(0xc4)]],_0x10bdbf=[..._0x4526c3[_0x40dbd0(0x9d)]['return_qty']],_0x3b596c=[..._0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xd0)]],_0x3f437f=[..._0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xf0)]],_0x3a199b=[..._0x4526c3['body'][_0x40dbd0(0xb8)]],_0x3a2954=[..._0x4526c3[_0x40dbd0(0x9d)]['product_code_hide']],_0x202406=[..._0x4526c3['body'][_0x40dbd0(0xee)]],_0x4165e8=[..._0x4526c3[_0x40dbd0(0x9d)]['secondary_code_hide']],_0x30ae99=[..._0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xcf)]];const _0x35690d=_0x533bc3[_0x40dbd0(0xd2)](_0x234f87=>{return _0x234f87={'product_name':_0x234f87};});_0x122433[_0x40dbd0(0x96)]((_0x69239f,_0x4a8b2f)=>{var _0x4bc3cd=_0x40dbd0;_0x35690d[_0x4a8b2f][_0x4bc3cd(0xb0)]=_0x69239f;}),_0x20ef2d[_0x40dbd0(0x96)]((_0x50c394,_0x591485)=>{var _0x53d0c8=_0x40dbd0;_0x35690d[_0x591485][_0x53d0c8(0xe1)]=_0x50c394;}),_0x10bdbf[_0x40dbd0(0x96)]((_0x4907bc,_0x19dca2)=>{var _0x24d448=_0x40dbd0;_0x35690d[_0x19dca2][_0x24d448(0xf2)]=_0x4907bc;}),_0x3b596c['forEach']((_0x2cd430,_0x313533)=>{var _0x2faed5=_0x40dbd0;_0x35690d[_0x313533][_0x2faed5(0xc0)]=_0x2cd430;}),_0x3f437f['forEach']((_0x310acd,_0x27103d)=>{var _0x17e4c2=_0x40dbd0;_0x35690d[_0x27103d][_0x17e4c2(0xe0)]=_0x310acd;}),_0x3a199b[_0x40dbd0(0x96)]((_0x2aebb8,_0x5efba8)=>{var _0x35a191=_0x40dbd0;_0x35690d[_0x5efba8][_0x35a191(0xb7)]=_0x2aebb8;}),_0x3a2954[_0x40dbd0(0x96)]((_0xaf8ce4,_0x39470b)=>{var _0x2dd20b=_0x40dbd0;_0x35690d[_0x39470b][_0x2dd20b(0xa7)]=_0xaf8ce4;}),_0x202406[_0x40dbd0(0x96)]((_0xd468ef,_0x2efa98)=>{var _0x42c95b=_0x40dbd0;_0x35690d[_0x2efa98][_0x42c95b(0xe8)]=_0xd468ef;}),_0x4165e8['forEach']((_0x5e20c1,_0x4f4a38)=>{var _0x30e8e0=_0x40dbd0;_0x35690d[_0x4f4a38][_0x30e8e0(0xc7)]=_0x5e20c1;}),_0x30ae99[_0x40dbd0(0x96)]((_0x16b756,_0x2057e0)=>{var _0x29c9e7=_0x40dbd0;_0x35690d[_0x2057e0][_0x29c9e7(0xd6)]=_0x16b756;});var _0x4a13f0=0x0;_0x35690d['forEach'](_0x632d9b=>{var _0x3e86d1=_0x40dbd0;console[_0x3e86d1(0xab)]('foreach\x20newproduct',_0x632d9b),(parseInt(_0x632d9b[_0x3e86d1(0xb0)])<parseInt(_0x632d9b['return_qty'])||parseInt(_0x632d9b[_0x3e86d1(0xe1)])<parseInt(_0x632d9b['return_qty'])||parseInt(_0x632d9b[_0x3e86d1(0xf2)])==0x0)&&_0x4a13f0++;});if(_0x4a13f0!=0x0)return _0x4526c3['flash'](_0x40dbd0(0xe5),_0x40dbd0(0x8f)),_0x1d036b[_0x40dbd0(0xde)]('back');_0x50a548['return_product'][_0x40dbd0(0x96)](_0x454281=>{var _0x166d8a=_0x40dbd0;const _0x45ac9d=_0xef7416['product_details'][_0x166d8a(0xd2)](_0x49be07=>{var _0x14734e=_0x166d8a;_0x49be07[_0x14734e(0xca)]==_0x454281['product_name']&&_0x49be07[_0x14734e(0xb7)]==_0x454281[_0x14734e(0xb7)]&&_0x49be07['type']==_0x454281[_0x14734e(0xd6)]&&_0x49be07[_0x14734e(0xe0)]==_0x454281['bin']&&_0x49be07[_0x14734e(0xc0)]==_0x454281['bay']&&(_0x49be07[_0x14734e(0xc8)]=parseInt(_0x49be07[_0x14734e(0xc8)])+parseInt(_0x454281['return_qty']));});}),console[_0x40dbd0(0xab)](_0x40dbd0(0x84),_0xef7416),await _0xef7416[_0x40dbd0(0x93)](),_0x50a548[_0x40dbd0(0xd3)]=_0xb7d18,_0x50a548[_0x40dbd0(0xeb)]=_0x3fc218,_0x50a548['date']=_0x45dbab,_0x50a548['warehouse_name']=_0xa0bbd6,_0x50a548[_0x40dbd0(0xc6)]=_0x35690d,_0x50a548[_0x40dbd0(0x8a)]=_0x50636f,_0x50a548[_0x40dbd0(0xc2)]=_0x17c804,_0x50a548[_0x40dbd0(0xf7)]=_0x5152a6,_0x50a548[_0x40dbd0(0xa3)]=_0x59ad94;const _0x2512b0=await _0x50a548[_0x40dbd0(0x93)](),_0x28e14b=await purchases_return[_0x40dbd0(0x9e)]({'invoice':_0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xd3)]}),_0x368d30=await warehouse[_0x40dbd0(0x9e)]({'name':_0x4526c3[_0x40dbd0(0x9d)]['to_warehouse_name'],'room':_0x4526c3[_0x40dbd0(0x9d)]['to_Room_name']});_0x28e14b[_0x40dbd0(0xc6)][_0x40dbd0(0x96)](_0x2d7616=>{var _0x58f368=_0x40dbd0;_0x368d30[_0x58f368(0x98)][_0x58f368(0xd2)](_0x969b8d=>{var _0x205a66=_0x58f368;_0x969b8d[_0x205a66(0xca)]==_0x2d7616[_0x205a66(0xca)]&&_0x969b8d['pallet']==_0x2d7616[_0x205a66(0xb8)]&&(_0x969b8d['product_stock']=parseInt(_0x969b8d[_0x205a66(0xc8)])-parseInt(_0x2d7616['return_qty']),console[_0x205a66(0xab)](_0x205a66(0x97),_0x2d7616['return_qty']));});}),console[_0x40dbd0(0xab)](_0x40dbd0(0xa2),_0x368d30),await _0x368d30[_0x40dbd0(0x93)]();const _0x8ca50e=await s_payment_data[_0x40dbd0(0x9e)]({'invoice':_0x4526c3[_0x40dbd0(0x9d)][_0x40dbd0(0xd3)],'reason':_0x40dbd0(0xec)});await _0x8ca50e['save'](),_0x4526c3[_0x40dbd0(0xc3)](_0x40dbd0(0xbc),_0x40dbd0(0xb2)),_0x1d036b[_0x40dbd0(0xde)](_0x40dbd0(0xa9));}catch(_0x5a1083){console['log'](_0x5a1083),_0x1d036b['status'](0xc8)[_0x40dbd0(0xd4)]({'message':_0x5a1083[_0x40dbd0(0xba)]});}}),router[a0_0xc45f0b(0xd8)](a0_0xc45f0b(0x99),auth,async(_0x539e25,_0x4f8d29)=>{var _0x54d3fe=a0_0xc45f0b;try{const {username:_0x270413,email:_0xd8d7e2,role:_0x2991fe}=_0x539e25[_0x54d3fe(0x92)],_0x113f5e=_0x539e25['user'],_0x35eaf5=await profile[_0x54d3fe(0x9e)]({'email':_0x113f5e[_0x54d3fe(0xa0)]}),_0xd7b0da=await master_shop[_0x54d3fe(0x95)]();console[_0x54d3fe(0xab)]('master',_0xd7b0da);const _0x22bfcf=_0x539e25[_0x54d3fe(0xb5)]['id'],_0x572e53=await purchases_return[_0x54d3fe(0xf8)](_0x22bfcf);console['log'](_0x572e53);const _0x48b321=await suppliers[_0x54d3fe(0x9e)]({'name':_0x572e53[_0x54d3fe(0xeb)]});console[_0x54d3fe(0xab)](_0x48b321);if(_0xd7b0da[0x0]['language']==_0x54d3fe(0xd5)){var _0x39575b=users[_0x54d3fe(0xd7)];console[_0x54d3fe(0xab)](_0x39575b);}else{if(_0xd7b0da[0x0][_0x54d3fe(0xed)]=='Hindi')var _0x39575b=users[_0x54d3fe(0x8e)];else{if(_0xd7b0da[0x0][_0x54d3fe(0xed)]=='German')var _0x39575b=users[_0x54d3fe(0xae)];else{if(_0xd7b0da[0x0][_0x54d3fe(0xed)]==_0x54d3fe(0xbb))var _0x39575b=users[_0x54d3fe(0xbb)];else{if(_0xd7b0da[0x0][_0x54d3fe(0xed)]==_0x54d3fe(0xb6))var _0x39575b=users[_0x54d3fe(0xb6)];else{if(_0xd7b0da[0x0][_0x54d3fe(0xed)]==_0x54d3fe(0xdf))var _0x39575b=users[_0x54d3fe(0xad)];else{if(_0xd7b0da[0x0][_0x54d3fe(0xed)]==_0x54d3fe(0xc1))var _0x39575b=users[_0x54d3fe(0xc1)];else{if(_0xd7b0da[0x0][_0x54d3fe(0xed)]==_0x54d3fe(0x8d))var _0x39575b=users[_0x54d3fe(0xb9)];}}}}}}}_0x4f8d29[_0x54d3fe(0xd1)]('return_purchase_invoice',{'success':_0x539e25[_0x54d3fe(0xc3)](_0x54d3fe(0xbc)),'errors':_0x539e25['flash'](_0x54d3fe(0xe5)),'role':_0x113f5e,'profile':_0x35eaf5,'master_shop':_0xd7b0da,'supplier':_0x48b321,'purchase':_0x572e53,'language':_0x39575b});}catch(_0x2a1737){console[_0x54d3fe(0xab)](_0x2a1737);}}),router['post']('/receive_payment/:id',auth,async(_0x212bab,_0x33f2c0)=>{var _0x57a957=a0_0xc45f0b;try{const _0x389388=_0x212bab[_0x57a957(0xb5)]['id'],{invoice:_0x5272d8,suppliers:_0x6e5986,receivable_amount:_0x428b45,received_amount:_0x3b88c}=_0x212bab['body'],_0x98078a=await purchases_return[_0x57a957(0xf8)](_0x389388);console[_0x57a957(0xab)](_0x98078a);var _0x38b2b0=_0x428b45-_0x3b88c;console[_0x57a957(0xab)](_0x3b88c),_0x98078a[_0x57a957(0xea)]=parseFloat(_0x3b88c)+parseFloat(_0x98078a[_0x57a957(0xea)]),_0x98078a[_0x57a957(0xb3)]=_0x38b2b0,console[_0x57a957(0xab)](_0x98078a);const _0x2d2a99=await _0x98078a[_0x57a957(0x93)](),_0x16f8df=await s_payment_data[_0x57a957(0x9e)]({'invoice':_0x212bab[_0x57a957(0x9d)][_0x57a957(0xd3)],'reason':_0x57a957(0xec)});_0x16f8df[_0x57a957(0xef)]=_0x38b2b0,await _0x16f8df['save']();let _0x428e65=new Date(),_0xe407b8=('0'+_0x428e65[_0x57a957(0x9a)]())['slice'](-0x2),_0x4c2f17=('0'+(_0x428e65[_0x57a957(0xfa)]()+0x1))[_0x57a957(0xf5)](-0x2),_0x5b03d5=_0x428e65['getFullYear'](),_0x329caf=_0x5b03d5+'-'+_0x4c2f17+'-'+_0xe407b8;const _0x5a4bd6=new suppliers_payment({'invoice':_0x5272d8,'date':_0x5b03d5+'-'+_0x4c2f17+'-'+_0xe407b8,'suppliers':_0x6e5986,'reason':'Received\x20For\x20Purchase\x20Return','amount':_0x3b88c}),_0xe44e94=await _0x5a4bd6['save']();_0x212bab[_0x57a957(0xc3)]('success','payment\x20successfull'),_0x33f2c0['redirect'](_0x57a957(0xa9));}catch(_0x50c6d0){console[_0x57a957(0xab)](_0x50c6d0);}}),module[a0_0xc45f0b(0xf3)]=router;