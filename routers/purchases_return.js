function a0_0x416d(){var _0x20d3af=['findOne','get','type','bay','../public/language/languages.json','/view','floorlevel','/invoice/:id','4HcQkCq','$product_details.floorlevel','$invoice','../middleware/auth','errors','Raw\x20Materials','message','Purchase\x20Return','find','$suppliers','purchase\x20return\x20successfully','Received\x20For\x20Purchase\x20Return','$return_product','147960RsklTJ','product_stock','to_Room_name','2999916edAXdO','/purchases_return/view','back','$return_product.return_qty','English\x20(US)','$supplier_docs.mobile','1475322TPLVuN','1607275EhKryN','German','../models/all_models','Portuguese\x20(BR)','French','Return\x20Goods','map','slice','return_product','$due_amount','isle','secondary_code','old_warehouse_data','findById','string','received','$product_details.secondary_code','/view/:id','$product_details.rack','$supplier_docs.address','$product_details.type','84XoYfwQ','forEach','product_name','master','$return_product.product_name','$product_details','purchase_quantity','Arabic\x20(ae)','user','4879960HHQZbh','$return_product.price','350512XTptoE','Spanish','return_purchase_edit','email','stock_quantity','product_code','invoice','log','$warehouse_name','English','stock_data','exports','post','aggregate','$receivable','getDate','$name','suppliers','bin','body','product_details','Arabic','$date','2bAeJFQ','getMonth','$product_details.product_stock','product_code_hide','success','name','$product_details.storage','Enabled','$_id','stocks','$discount','note','payment\x20successfull','$product_details.bin','Portuguese','$return_product.total','primary_code_hide','Router','level','params','warehouse_name','due_amount','flash','return_qty','pallet','purchases_return','save','Chinese','redirect','Hindi','$product_details._id','$product_details.product_code','129496JAsVZl','express','$note','$product_details.bay','$total_amount','to_warehouse_name','language','render','secondary_code_hide'];a0_0x416d=function(){return _0x20d3af;};return a0_0x416d();}function a0_0x43b4(_0x401e3e,_0x5db6e6){var _0x416d7d=a0_0x416d();return a0_0x43b4=function(_0x43b45d,_0x1747cb){_0x43b45d=_0x43b45d-0x10f;var _0x437ee7=_0x416d7d[_0x43b45d];return _0x437ee7;},a0_0x43b4(_0x401e3e,_0x5db6e6);}var a0_0x14a3fe=a0_0x43b4;(function(_0x37aa70,_0x53c115){var _0x2e5c8f=a0_0x43b4,_0x1393cf=_0x37aa70();while(!![]){try{var _0x1d3be2=parseInt(_0x2e5c8f(0x156))/0x1*(-parseInt(_0x2e5c8f(0x13f))/0x2)+parseInt(_0x2e5c8f(0x115))/0x3+-parseInt(_0x2e5c8f(0x187))/0x4*(parseInt(_0x2e5c8f(0x11f))/0x5)+parseInt(_0x2e5c8f(0x11e))/0x6+parseInt(_0x2e5c8f(0x134))/0x7*(-parseInt(_0x2e5c8f(0x176))/0x8)+parseInt(_0x2e5c8f(0x118))/0x9+parseInt(_0x2e5c8f(0x13d))/0xa;if(_0x1d3be2===_0x53c115)break;else _0x1393cf['push'](_0x1393cf['shift']());}catch(_0x5f0a4d){_0x1393cf['push'](_0x1393cf['shift']());}}}(a0_0x416d,0x3d1cc));const express=require(a0_0x14a3fe(0x177)),app=express(),router=express[a0_0x14a3fe(0x167)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x14a3fe(0x121)),auth=require(a0_0x14a3fe(0x18a)),users=require(a0_0x14a3fe(0x183));router[a0_0x14a3fe(0x180)](a0_0x14a3fe(0x184),auth,async(_0x40a2bb,_0x5b22d0)=>{var _0x2b3bd5=a0_0x14a3fe;try{const {username:_0x47a88,email:_0x29239c,role:_0x7d379c}=_0x40a2bb[_0x2b3bd5(0x13c)],_0x247833=_0x40a2bb[_0x2b3bd5(0x13c)],_0x2bed5a=await profile[_0x2b3bd5(0x17f)]({'email':_0x247833[_0x2b3bd5(0x142)]}),_0x45390d=await master_shop[_0x2b3bd5(0x110)]();console[_0x2b3bd5(0x146)](_0x2b3bd5(0x137),_0x45390d);const _0x321839=await purchases_return[_0x2b3bd5(0x14c)]([{'$lookup':{'from':'suppliers','localField':'suppliers','foreignField':_0x2b3bd5(0x15b),'as':'supplier_docs'}},{'$unwind':_0x2b3bd5(0x114)},{'$unwind':'$supplier_docs'},{'$group':{'_id':_0x2b3bd5(0x15e),'invoice':{'$first':_0x2b3bd5(0x189)},'date':{'$first':_0x2b3bd5(0x155)},'suppliers':{'$first':_0x2b3bd5(0x111)},'warehouse_name':{'$first':_0x2b3bd5(0x147)},'product_name':{'$first':_0x2b3bd5(0x138)},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':_0x2b3bd5(0x13e)},'total':{'$sum':_0x2b3bd5(0x165)},'note':{'$first':_0x2b3bd5(0x178)},'total_amount':{'$first':_0x2b3bd5(0x17a)},'discount':{'$first':_0x2b3bd5(0x160)},'receivable':{'$first':_0x2b3bd5(0x14d)},'received':{'$first':'$received'},'due_amount':{'$first':_0x2b3bd5(0x128)},'mobile':{'$first':_0x2b3bd5(0x11d)},'email':{'$first':'$supplier_docs.email'},'address':{'$first':_0x2b3bd5(0x132)},'return_sum_qty':{'$sum':_0x2b3bd5(0x11b)}}}]);console[_0x2b3bd5(0x146)](_0x321839);if(_0x45390d[0x0][_0x2b3bd5(0x17c)]==_0x2b3bd5(0x11c)){var _0x1e9f80=users[_0x2b3bd5(0x148)];console[_0x2b3bd5(0x146)](_0x1e9f80);}else{if(_0x45390d[0x0][_0x2b3bd5(0x17c)]=='Hindi')var _0x1e9f80=users[_0x2b3bd5(0x173)];else{if(_0x45390d[0x0][_0x2b3bd5(0x17c)]==_0x2b3bd5(0x120))var _0x1e9f80=users[_0x2b3bd5(0x120)];else{if(_0x45390d[0x0][_0x2b3bd5(0x17c)]==_0x2b3bd5(0x140))var _0x1e9f80=users[_0x2b3bd5(0x140)];else{if(_0x45390d[0x0][_0x2b3bd5(0x17c)]==_0x2b3bd5(0x123))var _0x1e9f80=users[_0x2b3bd5(0x123)];else{if(_0x45390d[0x0][_0x2b3bd5(0x17c)]==_0x2b3bd5(0x122))var _0x1e9f80=users['Portuguese'];else{if(_0x45390d[0x0][_0x2b3bd5(0x17c)]=='Chinese')var _0x1e9f80=users[_0x2b3bd5(0x171)];else{if(_0x45390d[0x0]['language']==_0x2b3bd5(0x13b))var _0x1e9f80=users[_0x2b3bd5(0x154)];}}}}}}}_0x5b22d0['render'](_0x2b3bd5(0x16f),{'success':_0x40a2bb[_0x2b3bd5(0x16c)](_0x2b3bd5(0x15a)),'errors':_0x40a2bb[_0x2b3bd5(0x16c)](_0x2b3bd5(0x18b)),'role':_0x247833,'profile':_0x2bed5a,'master_shop':_0x45390d,'user':_0x321839,'language':_0x1e9f80});}catch(_0x25dda2){console[_0x2b3bd5(0x146)](_0x25dda2);}}),router[a0_0x14a3fe(0x180)](a0_0x14a3fe(0x130),auth,async(_0x5546d1,_0x1880ab)=>{var _0x38c858=a0_0x14a3fe;try{const {username:_0x4bfe1f,email:_0x55876e,role:_0x3eb3aa}=_0x5546d1[_0x38c858(0x13c)],_0x444996=_0x5546d1[_0x38c858(0x13c)],_0x574e93=await profile[_0x38c858(0x17f)]({'email':_0x444996[_0x38c858(0x142)]}),_0x499e01=await product[_0x38c858(0x110)]({}),_0x153392=await master_shop[_0x38c858(0x110)]();console[_0x38c858(0x146)]('master',_0x153392),console[_0x38c858(0x146)](_0x5546d1[_0x38c858(0x152)]);const _0x5c621c=_0x5546d1['params']['id'],_0x296091=await purchases_return[_0x38c858(0x12c)](_0x5c621c);console['log'](_0x296091);const _0x2f5021=await warehouse[_0x38c858(0x14c)]([{'$match':{'name':_0x296091['warehouse_name'],'room':_0x296091['room']}},{'$unwind':_0x38c858(0x139)},{'$group':{'_id':_0x38c858(0x174),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x38c858(0x158)},'bay':{'$first':_0x38c858(0x179)},'bin':{'$first':_0x38c858(0x163)},'type':{'$first':_0x38c858(0x133)},'floorlevel':{'$first':_0x38c858(0x188)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x38c858(0x12f)},'product_code':{'$first':_0x38c858(0x175)},'storage':{'$first':_0x38c858(0x15c)},'rack':{'$first':_0x38c858(0x131)}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':_0x38c858(0x15d),'name':_0x38c858(0x124),'warehouse_category':_0x38c858(0x18c)}},{'$group':{'_id':_0x38c858(0x14f),'name':{'$first':_0x38c858(0x14f)}}},{'$sort':{'name':0x1}}]),console[_0x38c858(0x146)](_0x38c858(0x149),_0x2f5021);if(_0x153392[0x0][_0x38c858(0x17c)]==_0x38c858(0x11c)){var _0x3b8c62=users[_0x38c858(0x148)];console[_0x38c858(0x146)](_0x3b8c62);}else{if(_0x153392[0x0][_0x38c858(0x17c)]==_0x38c858(0x173))var _0x3b8c62=users['Hindi'];else{if(_0x153392[0x0][_0x38c858(0x17c)]=='German')var _0x3b8c62=users[_0x38c858(0x120)];else{if(_0x153392[0x0]['language']==_0x38c858(0x140))var _0x3b8c62=users['Spanish'];else{if(_0x153392[0x0][_0x38c858(0x17c)]=='French')var _0x3b8c62=users[_0x38c858(0x123)];else{if(_0x153392[0x0]['language']==_0x38c858(0x122))var _0x3b8c62=users['Portuguese'];else{if(_0x153392[0x0][_0x38c858(0x17c)]=='Chinese')var _0x3b8c62=users[_0x38c858(0x171)];else{if(_0x153392[0x0][_0x38c858(0x17c)]==_0x38c858(0x13b))var _0x3b8c62=users[_0x38c858(0x154)];}}}}}}}_0x1880ab[_0x38c858(0x17d)](_0x38c858(0x141),{'success':_0x5546d1['flash'](_0x38c858(0x15a)),'errors':_0x5546d1['flash'](_0x38c858(0x18b)),'role':_0x444996,'master_shop':_0x153392,'profile':_0x574e93,'user':_0x296091,'stock':_0x2f5021,'product':_0x499e01,'language':_0x3b8c62,'warehouse':warehouse_data});}catch(_0x4e3270){console['log'](_0x4e3270);}}),router[a0_0x14a3fe(0x14b)](a0_0x14a3fe(0x130),auth,async(_0x98c887,_0x2ccafb)=>{var _0x3aafc2=a0_0x14a3fe;try{const _0x33bcd9=_0x98c887[_0x3aafc2(0x169)]['id'];console[_0x3aafc2(0x146)](_0x33bcd9);const _0x4f7188=await purchases_return['findOne']({'invoice':_0x98c887[_0x3aafc2(0x152)]['invoice']});console['log']('old_data',_0x4f7188);const _0x3d0573=await warehouse[_0x3aafc2(0x17f)]({'name':_0x4f7188[_0x3aafc2(0x17b)],'room':_0x4f7188['to_room']});console[_0x3aafc2(0x146)](_0x3aafc2(0x12b),_0x3d0573);const {invoice:_0x3f0057,suppliers:_0x36e8f6,date:_0x3fcd18,warehouse_name:_0x54415d,product_name:_0x15440f,purchase_quantity:_0x495f98,stocks:_0x3d3207,return_qty:_0x60df17,note:_0x414e10,Room_name:_0x4d26f4,level:_0x58624c,isle:_0x3fce3e,pallet:_0x243e01,to_warehouse_name:_0x16d869,to_Room_name:_0x46c48b}=_0x98c887[_0x3aafc2(0x152)];if(typeof _0x15440f==_0x3aafc2(0x12d))var _0x17aa99=[_0x98c887['body'][_0x3aafc2(0x136)]],_0x318f94=[_0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x13a)]],_0x2b5d19=[_0x98c887['body'][_0x3aafc2(0x15f)]],_0x4cf7e5=[_0x98c887[_0x3aafc2(0x152)]['return_qty']],_0x247bd5=[_0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x168)]],_0x1d5c86=[_0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x129)]],_0x18f515=[_0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x16e)]],_0x32c634=[_0x98c887[_0x3aafc2(0x152)]['types']],_0x472229=[_0x98c887['body'][_0x3aafc2(0x159)]],_0x20e784=[_0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x166)]],_0x427bfa=[_0x98c887[_0x3aafc2(0x152)]['secondary_code_hide']];else var _0x17aa99=[..._0x98c887['body'][_0x3aafc2(0x136)]],_0x318f94=[..._0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x13a)]],_0x2b5d19=[..._0x98c887['body'][_0x3aafc2(0x15f)]],_0x4cf7e5=[..._0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x16d)]],_0x247bd5=[..._0x98c887[_0x3aafc2(0x152)]['level']],_0x1d5c86=[..._0x98c887[_0x3aafc2(0x152)]['isle']],_0x18f515=[..._0x98c887['body'][_0x3aafc2(0x16e)]],_0x472229=[..._0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x159)]],_0x20e784=[..._0x98c887[_0x3aafc2(0x152)]['primary_code_hide']],_0x427bfa=[..._0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x17e)]],_0x32c634=[..._0x98c887[_0x3aafc2(0x152)]['types']];const _0x155048=_0x17aa99[_0x3aafc2(0x125)](_0x193c30=>{return _0x193c30={'product_name':_0x193c30};});_0x318f94['forEach']((_0x3822b7,_0x114eb3)=>{_0x155048[_0x114eb3]['purchase_quantity']=_0x3822b7;}),_0x2b5d19['forEach']((_0x25ff04,_0x4ced66)=>{var _0x38721e=_0x3aafc2;_0x155048[_0x4ced66][_0x38721e(0x143)]=_0x25ff04;}),_0x4cf7e5[_0x3aafc2(0x135)]((_0x357fa2,_0x5cb04c)=>{var _0x5ac72c=_0x3aafc2;_0x155048[_0x5cb04c][_0x5ac72c(0x16d)]=_0x357fa2;}),_0x247bd5[_0x3aafc2(0x135)]((_0x37bab8,_0x37ed40)=>{var _0x380b00=_0x3aafc2;_0x155048[_0x37ed40][_0x380b00(0x182)]=_0x37bab8;}),_0x1d5c86['forEach']((_0x33d113,_0x31c470)=>{var _0x38ea5f=_0x3aafc2;_0x155048[_0x31c470][_0x38ea5f(0x151)]=_0x33d113;}),_0x18f515[_0x3aafc2(0x135)]((_0x1e21ff,_0x4a2048)=>{var _0x2ea671=_0x3aafc2;_0x155048[_0x4a2048][_0x2ea671(0x185)]=_0x1e21ff;}),_0x472229[_0x3aafc2(0x135)]((_0x40d04b,_0x28d8d8)=>{var _0x2c938f=_0x3aafc2;_0x155048[_0x28d8d8][_0x2c938f(0x144)]=_0x40d04b;}),_0x20e784[_0x3aafc2(0x135)]((_0x1e9473,_0x2fb130)=>{_0x155048[_0x2fb130]['primary_code']=_0x1e9473;}),_0x427bfa[_0x3aafc2(0x135)]((_0xd4809e,_0x55efc2)=>{var _0x3afee1=_0x3aafc2;_0x155048[_0x55efc2][_0x3afee1(0x12a)]=_0xd4809e;}),_0x32c634[_0x3aafc2(0x135)]((_0xae747e,_0x219a41)=>{_0x155048[_0x219a41]['type']=_0xae747e;});var _0x5c6b5a=0x0;_0x155048['forEach'](_0x45c853=>{var _0x41c74f=_0x3aafc2;console[_0x41c74f(0x146)]('foreach\x20newproduct',_0x45c853),(parseInt(_0x45c853[_0x41c74f(0x13a)])<parseInt(_0x45c853[_0x41c74f(0x16d)])||parseInt(_0x45c853[_0x41c74f(0x143)])<parseInt(_0x45c853[_0x41c74f(0x16d)])||parseInt(_0x45c853['return_qty'])==0x0)&&_0x5c6b5a++;});if(_0x5c6b5a!=0x0)return _0x98c887[_0x3aafc2(0x16c)](_0x3aafc2(0x18b),'Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty'),_0x2ccafb['redirect'](_0x3aafc2(0x11a));_0x4f7188[_0x3aafc2(0x127)][_0x3aafc2(0x135)](_0xae1477=>{var _0x580523=_0x3aafc2;const _0x3b488e=_0x3d0573[_0x580523(0x153)]['map'](_0x5f4bd6=>{var _0x4bf6c5=_0x580523;_0x5f4bd6[_0x4bf6c5(0x136)]==_0xae1477[_0x4bf6c5(0x136)]&&_0x5f4bd6[_0x4bf6c5(0x185)]==_0xae1477[_0x4bf6c5(0x185)]&&_0x5f4bd6[_0x4bf6c5(0x181)]==_0xae1477[_0x4bf6c5(0x181)]&&_0x5f4bd6[_0x4bf6c5(0x151)]==_0xae1477[_0x4bf6c5(0x151)]&&_0x5f4bd6[_0x4bf6c5(0x182)]==_0xae1477[_0x4bf6c5(0x182)]&&(_0x5f4bd6[_0x4bf6c5(0x116)]=parseInt(_0x5f4bd6[_0x4bf6c5(0x116)])+parseInt(_0xae1477[_0x4bf6c5(0x16d)]));});}),console[_0x3aafc2(0x146)](_0x3aafc2(0x12b),_0x3d0573),await _0x3d0573[_0x3aafc2(0x170)](),_0x4f7188[_0x3aafc2(0x145)]=_0x3f0057,_0x4f7188['suppliers']=_0x36e8f6,_0x4f7188['date']=_0x3fcd18,_0x4f7188[_0x3aafc2(0x16a)]=_0x54415d,_0x4f7188['return_product']=_0x155048,_0x4f7188[_0x3aafc2(0x161)]=_0x414e10,_0x4f7188['room']=_0x4d26f4,_0x4f7188['to_warehouse_name']=_0x16d869,_0x4f7188['to_room']=_0x46c48b;const _0x5893f4=await _0x4f7188['save'](),_0x31226f=await purchases_return[_0x3aafc2(0x17f)]({'invoice':_0x98c887['body'][_0x3aafc2(0x145)]}),_0x38820c=await warehouse[_0x3aafc2(0x17f)]({'name':_0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x17b)],'room':_0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x117)]});_0x31226f[_0x3aafc2(0x127)]['forEach'](_0x37232b=>{_0x38820c['product_details']['map'](_0xe4501a=>{var _0x4c8c77=a0_0x43b4;_0xe4501a[_0x4c8c77(0x136)]==_0x37232b[_0x4c8c77(0x136)]&&_0xe4501a[_0x4c8c77(0x16e)]==_0x37232b[_0x4c8c77(0x16e)]&&(_0xe4501a['product_stock']=parseInt(_0xe4501a['product_stock'])-parseInt(_0x37232b['return_qty']),console[_0x4c8c77(0x146)]('product_details.return_qtyproduct_details.return_qty',_0x37232b[_0x4c8c77(0x16d)]));});}),console['log']('final',_0x38820c),await _0x38820c[_0x3aafc2(0x170)]();const _0x901ffa=await s_payment_data[_0x3aafc2(0x17f)]({'invoice':_0x98c887[_0x3aafc2(0x152)][_0x3aafc2(0x145)],'reason':'Purchase\x20Return'});await _0x901ffa[_0x3aafc2(0x170)](),_0x98c887['flash'](_0x3aafc2(0x15a),_0x3aafc2(0x112)),_0x2ccafb['redirect'](_0x3aafc2(0x119));}catch(_0x3c31be){console[_0x3aafc2(0x146)](_0x3c31be),_0x2ccafb['status'](0xc8)['json']({'message':_0x3c31be[_0x3aafc2(0x18d)]});}}),router[a0_0x14a3fe(0x180)](a0_0x14a3fe(0x186),auth,async(_0x56fd57,_0x440f67)=>{var _0x3a0af5=a0_0x14a3fe;try{const {username:_0x21369b,email:_0x252c47,role:_0x4c76e7}=_0x56fd57[_0x3a0af5(0x13c)],_0x37829e=_0x56fd57[_0x3a0af5(0x13c)],_0x4c8d73=await profile[_0x3a0af5(0x17f)]({'email':_0x37829e['email']}),_0x36085c=await master_shop[_0x3a0af5(0x110)]();console[_0x3a0af5(0x146)](_0x3a0af5(0x137),_0x36085c);const _0x2370e3=_0x56fd57[_0x3a0af5(0x169)]['id'],_0x29b900=await purchases_return['findById'](_0x2370e3);console[_0x3a0af5(0x146)](_0x29b900);const _0x59c4d2=await suppliers['findOne']({'name':_0x29b900[_0x3a0af5(0x150)]});console['log'](_0x59c4d2);if(_0x36085c[0x0][_0x3a0af5(0x17c)]==_0x3a0af5(0x11c)){var _0x11ece8=users[_0x3a0af5(0x148)];console[_0x3a0af5(0x146)](_0x11ece8);}else{if(_0x36085c[0x0][_0x3a0af5(0x17c)]==_0x3a0af5(0x173))var _0x11ece8=users[_0x3a0af5(0x173)];else{if(_0x36085c[0x0][_0x3a0af5(0x17c)]==_0x3a0af5(0x120))var _0x11ece8=users[_0x3a0af5(0x120)];else{if(_0x36085c[0x0][_0x3a0af5(0x17c)]==_0x3a0af5(0x140))var _0x11ece8=users['Spanish'];else{if(_0x36085c[0x0][_0x3a0af5(0x17c)]=='French')var _0x11ece8=users[_0x3a0af5(0x123)];else{if(_0x36085c[0x0][_0x3a0af5(0x17c)]==_0x3a0af5(0x122))var _0x11ece8=users[_0x3a0af5(0x164)];else{if(_0x36085c[0x0][_0x3a0af5(0x17c)]==_0x3a0af5(0x171))var _0x11ece8=users[_0x3a0af5(0x171)];else{if(_0x36085c[0x0][_0x3a0af5(0x17c)]==_0x3a0af5(0x13b))var _0x11ece8=users[_0x3a0af5(0x154)];}}}}}}}_0x440f67[_0x3a0af5(0x17d)]('return_purchase_invoice',{'success':_0x56fd57[_0x3a0af5(0x16c)](_0x3a0af5(0x15a)),'errors':_0x56fd57[_0x3a0af5(0x16c)](_0x3a0af5(0x18b)),'role':_0x37829e,'profile':_0x4c8d73,'master_shop':_0x36085c,'supplier':_0x59c4d2,'purchase':_0x29b900,'language':_0x11ece8});}catch(_0x10fbc5){console[_0x3a0af5(0x146)](_0x10fbc5);}}),router[a0_0x14a3fe(0x14b)]('/receive_payment/:id',auth,async(_0x40aecc,_0x22ad38)=>{var _0xba3910=a0_0x14a3fe;try{const _0x42a9ca=_0x40aecc[_0xba3910(0x169)]['id'],{invoice:_0x3d0cb3,suppliers:_0x4691b6,receivable_amount:_0x89ab03,received_amount:_0x59883b}=_0x40aecc[_0xba3910(0x152)],_0x3e0722=await purchases_return[_0xba3910(0x12c)](_0x42a9ca);console['log'](_0x3e0722);var _0x28cb5c=_0x89ab03-_0x59883b;console[_0xba3910(0x146)](_0x59883b),_0x3e0722[_0xba3910(0x12e)]=parseFloat(_0x59883b)+parseFloat(_0x3e0722[_0xba3910(0x12e)]),_0x3e0722[_0xba3910(0x16b)]=_0x28cb5c,console[_0xba3910(0x146)](_0x3e0722);const _0x2b7d53=await _0x3e0722[_0xba3910(0x170)](),_0x5c4b76=await s_payment_data[_0xba3910(0x17f)]({'invoice':_0x40aecc[_0xba3910(0x152)][_0xba3910(0x145)],'reason':_0xba3910(0x10f)});_0x5c4b76['amount']=_0x28cb5c,await _0x5c4b76[_0xba3910(0x170)]();let _0x35182b=new Date(),_0x24f180=('0'+_0x35182b[_0xba3910(0x14e)]())[_0xba3910(0x126)](-0x2),_0x1ebed8=('0'+(_0x35182b[_0xba3910(0x157)]()+0x1))['slice'](-0x2),_0x2c2af6=_0x35182b['getFullYear'](),_0x59860f=_0x2c2af6+'-'+_0x1ebed8+'-'+_0x24f180;const _0x2665e4=new suppliers_payment({'invoice':_0x3d0cb3,'date':_0x2c2af6+'-'+_0x1ebed8+'-'+_0x24f180,'suppliers':_0x4691b6,'reason':_0xba3910(0x113),'amount':_0x59883b}),_0x59c25d=await _0x2665e4['save']();_0x40aecc[_0xba3910(0x16c)](_0xba3910(0x15a),_0xba3910(0x162)),_0x22ad38[_0xba3910(0x172)](_0xba3910(0x119));}catch(_0x47887d){console[_0xba3910(0x146)](_0x47887d);}}),module[a0_0x14a3fe(0x14a)]=router;