var a0_0xc575e2=a0_0x55e4;function a0_0x5268(){var _0x12c12a=['3855820fMFlev','flash','$product_details.product_code','return_purchase_edit','return_product','$return_product.product_name','to_room','params','primary_code_hide','9343376ahESnf','return_purchase_invoice','map','$product_details.rack','Received\x20For\x20Purchase\x20Return','stock_quantity','forEach','Portuguese\x20(BR)','Chinese','Portuguese','to_warehouse_name','body','invoice','$product_details.bin','status','$invoice','post','final','language','$product_details.bay','user','2842848vJaQvg','product_stock','save','Raw\x20Materials','../middleware/auth','../models/all_models','Arabic','Spanish','$suppliers','redirect','/view','log','$warehouse_name','$due_amount','slice','product_details','French','product_code','purchases_return','amount','product_code_hide','find','$product_details._id','findOne','email','json','string','name','/purchases_return/view','type','/view/:id','errors','product_details.return_qtyproduct_details.return_qty','exports','Return\x20Goods','back','date','9031624LBTIls','old_warehouse_data','$discount','English\x20(US)','/invoice/:id','warehouse_name','14895680yZhwda','$name','pallet','Enabled','primary_code','$product_details.storage','$product_details.floorlevel','3004396NUDNJE','getDate','../public/language/languages.json','supplier_docs','$total_amount','Purchase\x20Return','bin','German','$received','9BAAFkU','floorlevel','/receive_payment/:id','get','aggregate','$product_details','$supplier_docs.mobile','bay','stocks','$product_details.secondary_code','suppliers','$receivable','room','English','received','return_qty','$return_product.total','success','getMonth','level','14517pgdNev','Arabic\x20(ae)','1348WTiREz','$product_details.product_stock','types','$product_details.product_name','due_amount','secondary_code_hide','to_Room_name','render','isle','product_name','$product_details.primary_code','message','findById','Hindi','purchase_quantity','$return_product.return_qty','secondary_code','$note','1WgPgGc','Router','master','$supplier_docs.email','$return_product'];a0_0x5268=function(){return _0x12c12a;};return a0_0x5268();}(function(_0x4076fd,_0x3651fa){var _0x33bbce=a0_0x55e4,_0x31c09d=_0x4076fd();while(!![]){try{var _0x534941=-parseInt(_0x33bbce(0x129))/0x1*(-parseInt(_0x33bbce(0xf8))/0x2)+-parseInt(_0x33bbce(0x115))/0x3*(parseInt(_0x33bbce(0x117))/0x4)+-parseInt(_0x33bbce(0x12e))/0x5+parseInt(_0x33bbce(0xc6))/0x6+-parseInt(_0x33bbce(0xeb))/0x7+-parseInt(_0x33bbce(0xb1))/0x8*(-parseInt(_0x33bbce(0x101))/0x9)+parseInt(_0x33bbce(0xf1))/0xa;if(_0x534941===_0x3651fa)break;else _0x31c09d['push'](_0x31c09d['shift']());}catch(_0x569c1e){_0x31c09d['push'](_0x31c09d['shift']());}}}(a0_0x5268,0xe5d2d));const express=require('express'),app=express(),router=express[a0_0xc575e2(0x12a)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0xc575e2(0xcb)),auth=require(a0_0xc575e2(0xca)),users=require(a0_0xc575e2(0xfa));function a0_0x55e4(_0x2d614f,_0x2104a7){var _0x5268c7=a0_0x5268();return a0_0x55e4=function(_0x55e463,_0x456e94){_0x55e463=_0x55e463-0xa9;var _0x13e8af=_0x5268c7[_0x55e463];return _0x13e8af;},a0_0x55e4(_0x2d614f,_0x2104a7);}router[a0_0xc575e2(0x104)](a0_0xc575e2(0xd0),auth,async(_0x567e0e,_0x203c74)=>{var _0x50c1f4=a0_0xc575e2;try{const {username:_0x23c0c4,email:_0x22ebd4,role:_0x1a5069}=_0x567e0e['user'],_0x1b17bb=_0x567e0e[_0x50c1f4(0xc5)],_0x20b66a=await profile[_0x50c1f4(0xdd)]({'email':_0x1b17bb[_0x50c1f4(0xde)]}),_0xb875d1=await master_shop['find']();console[_0x50c1f4(0xd1)](_0x50c1f4(0x12b),_0xb875d1);const _0x1fcac6=await purchases_return[_0x50c1f4(0x105)]([{'$lookup':{'from':_0x50c1f4(0x10b),'localField':'suppliers','foreignField':_0x50c1f4(0xe1),'as':_0x50c1f4(0xfb)}},{'$unwind':_0x50c1f4(0x12d)},{'$unwind':'$supplier_docs'},{'$group':{'_id':'$_id','invoice':{'$first':_0x50c1f4(0xc0)},'date':{'$first':'$date'},'suppliers':{'$first':_0x50c1f4(0xce)},'warehouse_name':{'$first':_0x50c1f4(0xd2)},'product_name':{'$first':_0x50c1f4(0xad)},'return_qty':{'$first':_0x50c1f4(0x126)},'price':{'$first':'$return_product.price'},'total':{'$sum':_0x50c1f4(0x111)},'note':{'$first':_0x50c1f4(0x128)},'total_amount':{'$first':_0x50c1f4(0xfc)},'discount':{'$first':_0x50c1f4(0xed)},'receivable':{'$first':_0x50c1f4(0x10c)},'received':{'$first':_0x50c1f4(0x100)},'due_amount':{'$first':_0x50c1f4(0xd3)},'mobile':{'$first':_0x50c1f4(0x107)},'email':{'$first':_0x50c1f4(0x12c)},'address':{'$first':'$supplier_docs.address'},'return_sum_qty':{'$sum':_0x50c1f4(0x126)}}}]);console[_0x50c1f4(0xd1)](_0x1fcac6);if(_0xb875d1[0x0][_0x50c1f4(0xc3)]=='English\x20(US)'){var _0x47317f=users[_0x50c1f4(0x10e)];console[_0x50c1f4(0xd1)](_0x47317f);}else{if(_0xb875d1[0x0][_0x50c1f4(0xc3)]==_0x50c1f4(0x124))var _0x47317f=users[_0x50c1f4(0x124)];else{if(_0xb875d1[0x0][_0x50c1f4(0xc3)]==_0x50c1f4(0xff))var _0x47317f=users['German'];else{if(_0xb875d1[0x0][_0x50c1f4(0xc3)]==_0x50c1f4(0xcd))var _0x47317f=users['Spanish'];else{if(_0xb875d1[0x0]['language']=='French')var _0x47317f=users[_0x50c1f4(0xd6)];else{if(_0xb875d1[0x0][_0x50c1f4(0xc3)]==_0x50c1f4(0xb8))var _0x47317f=users[_0x50c1f4(0xba)];else{if(_0xb875d1[0x0][_0x50c1f4(0xc3)]=='Chinese')var _0x47317f=users['Chinese'];else{if(_0xb875d1[0x0][_0x50c1f4(0xc3)]==_0x50c1f4(0x116))var _0x47317f=users[_0x50c1f4(0xcc)];}}}}}}}_0x203c74[_0x50c1f4(0x11e)](_0x50c1f4(0xd8),{'success':_0x567e0e[_0x50c1f4(0xa9)](_0x50c1f4(0x112)),'errors':_0x567e0e[_0x50c1f4(0xa9)](_0x50c1f4(0xe5)),'role':_0x1b17bb,'profile':_0x20b66a,'master_shop':_0xb875d1,'user':_0x1fcac6,'language':_0x47317f});}catch(_0x1a8c70){console[_0x50c1f4(0xd1)](_0x1a8c70);}}),router[a0_0xc575e2(0x104)](a0_0xc575e2(0xe4),auth,async(_0x749360,_0x11ed09)=>{var _0x4f82e7=a0_0xc575e2;try{const {username:_0x1d8987,email:_0x3a89e3,role:_0x3eec7a}=_0x749360['user'],_0x122d68=_0x749360['user'],_0x566295=await profile[_0x4f82e7(0xdd)]({'email':_0x122d68[_0x4f82e7(0xde)]}),_0x305f13=await product['find']({}),_0x2157ad=await master_shop[_0x4f82e7(0xdb)]();console[_0x4f82e7(0xd1)]('master',_0x2157ad),console['log'](_0x749360[_0x4f82e7(0xbc)]);const _0x5bda8e=_0x749360[_0x4f82e7(0xaf)]['id'],_0x1b244a=await purchases_return[_0x4f82e7(0x123)](_0x5bda8e);console[_0x4f82e7(0xd1)](_0x1b244a);const _0x232cbb=await warehouse[_0x4f82e7(0x105)]([{'$match':{'name':_0x1b244a[_0x4f82e7(0xf0)],'room':_0x1b244a[_0x4f82e7(0x10d)]}},{'$unwind':_0x4f82e7(0x106)},{'$group':{'_id':_0x4f82e7(0xdc),'name':{'$first':_0x4f82e7(0x11a)},'product_stock':{'$first':_0x4f82e7(0x118)},'bay':{'$first':_0x4f82e7(0xc4)},'bin':{'$first':_0x4f82e7(0xbe)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x4f82e7(0xf7)},'primary_code':{'$first':_0x4f82e7(0x121)},'secondary_code':{'$first':_0x4f82e7(0x10a)},'product_code':{'$first':_0x4f82e7(0xaa)},'storage':{'$first':_0x4f82e7(0xf6)},'rack':{'$first':_0x4f82e7(0xb4)}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':_0x4f82e7(0xf4),'name':_0x4f82e7(0xe8),'warehouse_category':_0x4f82e7(0xc9)}},{'$group':{'_id':_0x4f82e7(0xf2),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),console[_0x4f82e7(0xd1)]('stock_data',_0x232cbb);if(_0x2157ad[0x0][_0x4f82e7(0xc3)]==_0x4f82e7(0xee)){var _0x31e1e8=users[_0x4f82e7(0x10e)];console[_0x4f82e7(0xd1)](_0x31e1e8);}else{if(_0x2157ad[0x0][_0x4f82e7(0xc3)]==_0x4f82e7(0x124))var _0x31e1e8=users[_0x4f82e7(0x124)];else{if(_0x2157ad[0x0][_0x4f82e7(0xc3)]=='German')var _0x31e1e8=users['German'];else{if(_0x2157ad[0x0][_0x4f82e7(0xc3)]==_0x4f82e7(0xcd))var _0x31e1e8=users[_0x4f82e7(0xcd)];else{if(_0x2157ad[0x0]['language']==_0x4f82e7(0xd6))var _0x31e1e8=users['French'];else{if(_0x2157ad[0x0]['language']=='Portuguese\x20(BR)')var _0x31e1e8=users[_0x4f82e7(0xba)];else{if(_0x2157ad[0x0][_0x4f82e7(0xc3)]=='Chinese')var _0x31e1e8=users['Chinese'];else{if(_0x2157ad[0x0][_0x4f82e7(0xc3)]==_0x4f82e7(0x116))var _0x31e1e8=users[_0x4f82e7(0xcc)];}}}}}}}_0x11ed09[_0x4f82e7(0x11e)](_0x4f82e7(0xab),{'success':_0x749360['flash'](_0x4f82e7(0x112)),'errors':_0x749360[_0x4f82e7(0xa9)](_0x4f82e7(0xe5)),'role':_0x122d68,'master_shop':_0x2157ad,'profile':_0x566295,'user':_0x1b244a,'stock':_0x232cbb,'product':_0x305f13,'language':_0x31e1e8,'warehouse':warehouse_data});}catch(_0x1c923b){console['log'](_0x1c923b);}}),router[a0_0xc575e2(0xc1)](a0_0xc575e2(0xe4),auth,async(_0x42f6f2,_0xfb524e)=>{var _0x17c721=a0_0xc575e2;try{const _0x61dde2=_0x42f6f2[_0x17c721(0xaf)]['id'];console['log'](_0x61dde2);const _0x29afd1=await purchases_return[_0x17c721(0xdd)]({'invoice':_0x42f6f2[_0x17c721(0xbc)][_0x17c721(0xbd)]});console[_0x17c721(0xd1)]('old_data',_0x29afd1);const _0x1d8e9f=await warehouse['findOne']({'name':_0x29afd1[_0x17c721(0xbb)],'room':_0x29afd1[_0x17c721(0xae)]});console[_0x17c721(0xd1)](_0x17c721(0xec),_0x1d8e9f);const {invoice:_0x112725,suppliers:_0x8faf7e,date:_0x4e50ce,warehouse_name:_0x1844c1,product_name:_0xb8ad02,purchase_quantity:_0x4a23ff,stocks:_0x53e26d,return_qty:_0x4a9908,note:_0x248d03,Room_name:_0x2865c7,level:_0x5abaa8,isle:_0x58fb51,pallet:_0x1fe4b4,to_warehouse_name:_0x18c859,to_Room_name:_0x35de3d}=_0x42f6f2[_0x17c721(0xbc)];if(typeof _0xb8ad02==_0x17c721(0xe0))var _0x380508=[_0x42f6f2[_0x17c721(0xbc)][_0x17c721(0x120)]],_0x39b65b=[_0x42f6f2[_0x17c721(0xbc)][_0x17c721(0x125)]],_0x44628c=[_0x42f6f2['body'][_0x17c721(0x109)]],_0x2ad006=[_0x42f6f2['body'][_0x17c721(0x110)]],_0x391ca3=[_0x42f6f2[_0x17c721(0xbc)]['level']],_0x13c104=[_0x42f6f2['body'][_0x17c721(0x11f)]],_0xa687b=[_0x42f6f2[_0x17c721(0xbc)][_0x17c721(0xf3)]],_0x4b939a=[_0x42f6f2['body'][_0x17c721(0x119)]],_0x1a0cc9=[_0x42f6f2[_0x17c721(0xbc)][_0x17c721(0xda)]],_0x520cc3=[_0x42f6f2[_0x17c721(0xbc)][_0x17c721(0xb0)]],_0x104f54=[_0x42f6f2[_0x17c721(0xbc)][_0x17c721(0x11c)]];else var _0x380508=[..._0x42f6f2[_0x17c721(0xbc)][_0x17c721(0x120)]],_0x39b65b=[..._0x42f6f2[_0x17c721(0xbc)][_0x17c721(0x125)]],_0x44628c=[..._0x42f6f2['body'][_0x17c721(0x109)]],_0x2ad006=[..._0x42f6f2['body'][_0x17c721(0x110)]],_0x391ca3=[..._0x42f6f2[_0x17c721(0xbc)][_0x17c721(0x114)]],_0x13c104=[..._0x42f6f2[_0x17c721(0xbc)][_0x17c721(0x11f)]],_0xa687b=[..._0x42f6f2['body'][_0x17c721(0xf3)]],_0x1a0cc9=[..._0x42f6f2[_0x17c721(0xbc)][_0x17c721(0xda)]],_0x520cc3=[..._0x42f6f2[_0x17c721(0xbc)][_0x17c721(0xb0)]],_0x104f54=[..._0x42f6f2[_0x17c721(0xbc)][_0x17c721(0x11c)]],_0x4b939a=[..._0x42f6f2[_0x17c721(0xbc)][_0x17c721(0x119)]];const _0x441dca=_0x380508['map'](_0x5e094d=>{return _0x5e094d={'product_name':_0x5e094d};});_0x39b65b[_0x17c721(0xb7)]((_0x1bdccb,_0x2f913f)=>{_0x441dca[_0x2f913f]['purchase_quantity']=_0x1bdccb;}),_0x44628c[_0x17c721(0xb7)]((_0x429581,_0x12ed08)=>{_0x441dca[_0x12ed08]['stock_quantity']=_0x429581;}),_0x2ad006[_0x17c721(0xb7)]((_0x160e76,_0x25a185)=>{var _0x5ba2b1=_0x17c721;_0x441dca[_0x25a185][_0x5ba2b1(0x110)]=_0x160e76;}),_0x391ca3[_0x17c721(0xb7)]((_0x45c142,_0x82c66f)=>{var _0x275ac5=_0x17c721;_0x441dca[_0x82c66f][_0x275ac5(0x108)]=_0x45c142;}),_0x13c104[_0x17c721(0xb7)]((_0x49b2b8,_0x2ff161)=>{var _0x103e02=_0x17c721;_0x441dca[_0x2ff161][_0x103e02(0xfe)]=_0x49b2b8;}),_0xa687b[_0x17c721(0xb7)]((_0x53b4df,_0x54e9a0)=>{var _0x48263d=_0x17c721;_0x441dca[_0x54e9a0][_0x48263d(0x102)]=_0x53b4df;}),_0x1a0cc9['forEach']((_0x49e776,_0x2ea6b0)=>{var _0x406757=_0x17c721;_0x441dca[_0x2ea6b0][_0x406757(0xd7)]=_0x49e776;}),_0x520cc3['forEach']((_0x13e537,_0x2b3902)=>{var _0x457249=_0x17c721;_0x441dca[_0x2b3902][_0x457249(0xf5)]=_0x13e537;}),_0x104f54['forEach']((_0x188694,_0x59c3bf)=>{var _0x216081=_0x17c721;_0x441dca[_0x59c3bf][_0x216081(0x127)]=_0x188694;}),_0x4b939a['forEach']((_0x46dc15,_0x47af8c)=>{var _0x18ae90=_0x17c721;_0x441dca[_0x47af8c][_0x18ae90(0xe3)]=_0x46dc15;});var _0x37f8c4=0x0;_0x441dca[_0x17c721(0xb7)](_0x5dd0b2=>{var _0x23534c=_0x17c721;console[_0x23534c(0xd1)]('foreach\x20newproduct',_0x5dd0b2),(parseInt(_0x5dd0b2[_0x23534c(0x125)])<parseInt(_0x5dd0b2[_0x23534c(0x110)])||parseInt(_0x5dd0b2[_0x23534c(0xb6)])<parseInt(_0x5dd0b2[_0x23534c(0x110)])||parseInt(_0x5dd0b2[_0x23534c(0x110)])==0x0)&&_0x37f8c4++;});if(_0x37f8c4!=0x0)return _0x42f6f2[_0x17c721(0xa9)](_0x17c721(0xe5),'Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty'),_0xfb524e['redirect'](_0x17c721(0xe9));_0x29afd1[_0x17c721(0xac)]['forEach'](_0x324eeb=>{var _0x3111ef=_0x17c721;const _0x6b3712=_0x1d8e9f[_0x3111ef(0xd5)][_0x3111ef(0xb3)](_0x395f0f=>{var _0xd758f0=_0x3111ef;_0x395f0f[_0xd758f0(0x120)]==_0x324eeb[_0xd758f0(0x120)]&&_0x395f0f[_0xd758f0(0x102)]==_0x324eeb[_0xd758f0(0x102)]&&_0x395f0f['type']==_0x324eeb[_0xd758f0(0xe3)]&&_0x395f0f[_0xd758f0(0xfe)]==_0x324eeb['bin']&&_0x395f0f[_0xd758f0(0x108)]==_0x324eeb[_0xd758f0(0x108)]&&(_0x395f0f[_0xd758f0(0xc7)]=parseInt(_0x395f0f[_0xd758f0(0xc7)])+parseInt(_0x324eeb[_0xd758f0(0x110)]));});}),console['log'](_0x17c721(0xec),_0x1d8e9f),await _0x1d8e9f[_0x17c721(0xc8)](),_0x29afd1[_0x17c721(0xbd)]=_0x112725,_0x29afd1[_0x17c721(0x10b)]=_0x8faf7e,_0x29afd1[_0x17c721(0xea)]=_0x4e50ce,_0x29afd1['warehouse_name']=_0x1844c1,_0x29afd1['return_product']=_0x441dca,_0x29afd1['note']=_0x248d03,_0x29afd1[_0x17c721(0x10d)]=_0x2865c7,_0x29afd1[_0x17c721(0xbb)]=_0x18c859,_0x29afd1['to_room']=_0x35de3d;const _0x788485=await _0x29afd1[_0x17c721(0xc8)](),_0x2ed530=await purchases_return[_0x17c721(0xdd)]({'invoice':_0x42f6f2[_0x17c721(0xbc)][_0x17c721(0xbd)]}),_0x39ef33=await warehouse[_0x17c721(0xdd)]({'name':_0x42f6f2[_0x17c721(0xbc)][_0x17c721(0xbb)],'room':_0x42f6f2[_0x17c721(0xbc)][_0x17c721(0x11d)]});_0x2ed530['return_product'][_0x17c721(0xb7)](_0x3da50b=>{var _0x59f102=_0x17c721;_0x39ef33['product_details'][_0x59f102(0xb3)](_0x47457f=>{var _0x49dcaf=_0x59f102;_0x47457f['product_name']==_0x3da50b[_0x49dcaf(0x120)]&&_0x47457f['pallet']==_0x3da50b[_0x49dcaf(0xf3)]&&(_0x47457f[_0x49dcaf(0xc7)]=parseInt(_0x47457f[_0x49dcaf(0xc7)])-parseInt(_0x3da50b[_0x49dcaf(0x110)]),console['log'](_0x49dcaf(0xe6),_0x3da50b[_0x49dcaf(0x110)]));});}),console[_0x17c721(0xd1)](_0x17c721(0xc2),_0x39ef33),await _0x39ef33[_0x17c721(0xc8)]();const _0x1fcd62=await s_payment_data[_0x17c721(0xdd)]({'invoice':_0x42f6f2[_0x17c721(0xbc)]['invoice'],'reason':_0x17c721(0xfd)});await _0x1fcd62[_0x17c721(0xc8)](),_0x42f6f2[_0x17c721(0xa9)](_0x17c721(0x112),'purchase\x20return\x20successfully'),_0xfb524e[_0x17c721(0xcf)](_0x17c721(0xe2));}catch(_0x18f1af){console['log'](_0x18f1af),_0xfb524e[_0x17c721(0xbf)](0xc8)[_0x17c721(0xdf)]({'message':_0x18f1af[_0x17c721(0x122)]});}}),router[a0_0xc575e2(0x104)](a0_0xc575e2(0xef),auth,async(_0x1d0a17,_0xee3d70)=>{var _0x2106d4=a0_0xc575e2;try{const {username:_0x519466,email:_0x387b1,role:_0x4a19c6}=_0x1d0a17[_0x2106d4(0xc5)],_0x537b06=_0x1d0a17[_0x2106d4(0xc5)],_0x43e128=await profile[_0x2106d4(0xdd)]({'email':_0x537b06[_0x2106d4(0xde)]}),_0x3914d0=await master_shop['find']();console[_0x2106d4(0xd1)](_0x2106d4(0x12b),_0x3914d0);const _0x32e352=_0x1d0a17[_0x2106d4(0xaf)]['id'],_0x16183b=await purchases_return[_0x2106d4(0x123)](_0x32e352);console[_0x2106d4(0xd1)](_0x16183b);const _0x120d5b=await suppliers[_0x2106d4(0xdd)]({'name':_0x16183b[_0x2106d4(0x10b)]});console[_0x2106d4(0xd1)](_0x120d5b);if(_0x3914d0[0x0][_0x2106d4(0xc3)]==_0x2106d4(0xee)){var _0x27438d=users[_0x2106d4(0x10e)];console[_0x2106d4(0xd1)](_0x27438d);}else{if(_0x3914d0[0x0]['language']==_0x2106d4(0x124))var _0x27438d=users[_0x2106d4(0x124)];else{if(_0x3914d0[0x0][_0x2106d4(0xc3)]=='German')var _0x27438d=users[_0x2106d4(0xff)];else{if(_0x3914d0[0x0][_0x2106d4(0xc3)]==_0x2106d4(0xcd))var _0x27438d=users[_0x2106d4(0xcd)];else{if(_0x3914d0[0x0][_0x2106d4(0xc3)]==_0x2106d4(0xd6))var _0x27438d=users['French'];else{if(_0x3914d0[0x0][_0x2106d4(0xc3)]==_0x2106d4(0xb8))var _0x27438d=users[_0x2106d4(0xba)];else{if(_0x3914d0[0x0]['language']=='Chinese')var _0x27438d=users[_0x2106d4(0xb9)];else{if(_0x3914d0[0x0][_0x2106d4(0xc3)]==_0x2106d4(0x116))var _0x27438d=users[_0x2106d4(0xcc)];}}}}}}}_0xee3d70[_0x2106d4(0x11e)](_0x2106d4(0xb2),{'success':_0x1d0a17[_0x2106d4(0xa9)](_0x2106d4(0x112)),'errors':_0x1d0a17[_0x2106d4(0xa9)](_0x2106d4(0xe5)),'role':_0x537b06,'profile':_0x43e128,'master_shop':_0x3914d0,'supplier':_0x120d5b,'purchase':_0x16183b,'language':_0x27438d});}catch(_0x6cca20){console['log'](_0x6cca20);}}),router[a0_0xc575e2(0xc1)](a0_0xc575e2(0x103),auth,async(_0x11c705,_0x45dd46)=>{var _0x59b6c4=a0_0xc575e2;try{const _0x813a5b=_0x11c705['params']['id'],{invoice:_0x5864cb,suppliers:_0x554219,receivable_amount:_0x31e7d0,received_amount:_0x357692}=_0x11c705[_0x59b6c4(0xbc)],_0x3d9ad5=await purchases_return[_0x59b6c4(0x123)](_0x813a5b);console[_0x59b6c4(0xd1)](_0x3d9ad5);var _0xf8d126=_0x31e7d0-_0x357692;console['log'](_0x357692),_0x3d9ad5[_0x59b6c4(0x10f)]=parseFloat(_0x357692)+parseFloat(_0x3d9ad5[_0x59b6c4(0x10f)]),_0x3d9ad5[_0x59b6c4(0x11b)]=_0xf8d126,console[_0x59b6c4(0xd1)](_0x3d9ad5);const _0x5b1c6c=await _0x3d9ad5['save'](),_0x4799c7=await s_payment_data[_0x59b6c4(0xdd)]({'invoice':_0x11c705[_0x59b6c4(0xbc)][_0x59b6c4(0xbd)],'reason':_0x59b6c4(0xfd)});_0x4799c7[_0x59b6c4(0xd9)]=_0xf8d126,await _0x4799c7[_0x59b6c4(0xc8)]();let _0x32c382=new Date(),_0x58c07f=('0'+_0x32c382[_0x59b6c4(0xf9)]())[_0x59b6c4(0xd4)](-0x2),_0xc49868=('0'+(_0x32c382[_0x59b6c4(0x113)]()+0x1))[_0x59b6c4(0xd4)](-0x2),_0xf6d6fa=_0x32c382['getFullYear'](),_0x304a03=_0xf6d6fa+'-'+_0xc49868+'-'+_0x58c07f;const _0x237889=new suppliers_payment({'invoice':_0x5864cb,'date':_0xf6d6fa+'-'+_0xc49868+'-'+_0x58c07f,'suppliers':_0x554219,'reason':_0x59b6c4(0xb5),'amount':_0x357692}),_0x10b543=await _0x237889[_0x59b6c4(0xc8)]();_0x11c705[_0x59b6c4(0xa9)]('success','payment\x20successfull'),_0x45dd46['redirect'](_0x59b6c4(0xe2));}catch(_0x4e731a){console[_0x59b6c4(0xd1)](_0x4e731a);}}),module[a0_0xc575e2(0xe7)]=router;