var a0_0x277240=a0_0x40e1;function a0_0x379e(){var _0x431830=['$return_product.total','log','primary_code_hide','room','redirect','3187768heQhVy','Purchase\x20Return','Portuguese\x20(BR)','$name','stock_data','Portuguese','type','stocks','$due_amount','supplier_docs','invoice','German','message','secondary_code','params','to_room','product_details','old_warehouse_data','Received\x20For\x20Purchase\x20Return','$return_product.price','English','English\x20(US)','purchase\x20return\x20successfully','bay','$product_details.product_code','success','isle','exports','master','bin','318qXvFpp','string','product_code','412aNyYoc','back','get','old_data','body','json','$received','/view','$product_details.product_name','save','slice','purchase_quantity','Router','types','return_qty','Spanish','findById','/view/:id','Chinese','$product_details.type','suppliers','1874172DlgoQC','Return\x20Goods','payment\x20successfull','Raw\x20Materials','$suppliers','product_code_hide','return_product','$supplier_docs.mobile','$receivable','map','language','/purchases_return/view','secondary_code_hide','aggregate','to_warehouse_name','Arabic','158095crPVYx','599585satWwK','$date','find','warehouse_name','render','return_purchase_invoice','$product_details.secondary_code','received','$supplier_docs.address','return_purchase_edit','floorlevel','status','stock_quantity','forEach','$return_product','post','email','Arabic\x20(ae)','Hindi','$product_details.floorlevel','flash','findOne','note','French','$product_details.bin','$return_product.return_qty','getFullYear','../middleware/auth','user','14200461HLDHHe','$product_details.product_stock','name','product_details.return_qtyproduct_details.return_qty','/invoice/:id','product_name','$product_details.rack','errors','primary_code','30549fdhhnT','$discount','level','final','328978QxglJE','date','$invoice','due_amount','../public/language/languages.json','Enabled','$warehouse_name','product_stock','getMonth','pallet'];a0_0x379e=function(){return _0x431830;};return a0_0x379e();}(function(_0x112a7f,_0x4c1f9d){var _0x41ff31=a0_0x40e1,_0xd90d90=_0x112a7f();while(!![]){try{var _0x293b8c=parseInt(_0x41ff31(0x1bb))/0x1+-parseInt(_0x41ff31(0x200))/0x2+-parseInt(_0x41ff31(0x1b7))/0x3*(parseInt(_0x41ff31(0x1eb))/0x4)+-parseInt(_0x41ff31(0x211))/0x5+-parseInt(_0x41ff31(0x1e8))/0x6*(-parseInt(_0x41ff31(0x210))/0x7)+-parseInt(_0x41ff31(0x1ca))/0x8+parseInt(_0x41ff31(0x1ae))/0x9;if(_0x293b8c===_0x4c1f9d)break;else _0xd90d90['push'](_0xd90d90['shift']());}catch(_0x13720a){_0xd90d90['push'](_0xd90d90['shift']());}}}(a0_0x379e,0x925c1));const express=require('express'),app=express(),router=express[a0_0x277240(0x1f7)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x277240(0x1ac)),users=require(a0_0x277240(0x1bf));function a0_0x40e1(_0x40b058,_0x402692){var _0x379e53=a0_0x379e();return a0_0x40e1=function(_0x40e1dd,_0x3b14ee){_0x40e1dd=_0x40e1dd-0x1ac;var _0x32afa9=_0x379e53[_0x40e1dd];return _0x32afa9;},a0_0x40e1(_0x40b058,_0x402692);}router[a0_0x277240(0x1ed)](a0_0x277240(0x1f2),auth,async(_0x17e343,_0x5081f9)=>{var _0x52ef4e=a0_0x277240;try{const {username:_0x3859d6,email:_0xbefe65,role:_0xf02243}=_0x17e343['user'],_0x126cd8=_0x17e343[_0x52ef4e(0x1ad)],_0x2f579c=await profile[_0x52ef4e(0x226)]({'email':_0x126cd8['email']}),_0x4e43b7=await master_shop['find']();console['log']('master',_0x4e43b7);const _0x125de2=await purchases_return[_0x52ef4e(0x20d)]([{'$lookup':{'from':_0x52ef4e(0x1ff),'localField':_0x52ef4e(0x1ff),'foreignField':_0x52ef4e(0x1b0),'as':_0x52ef4e(0x1d3)}},{'$unwind':_0x52ef4e(0x21f)},{'$unwind':'$supplier_docs'},{'$group':{'_id':'$_id','invoice':{'$first':_0x52ef4e(0x1bd)},'date':{'$first':_0x52ef4e(0x212)},'suppliers':{'$first':_0x52ef4e(0x204)},'warehouse_name':{'$first':_0x52ef4e(0x1c1)},'product_name':{'$first':'$return_product.product_name'},'return_qty':{'$first':_0x52ef4e(0x22a)},'price':{'$first':_0x52ef4e(0x1dd)},'total':{'$sum':_0x52ef4e(0x1c5)},'note':{'$first':'$note'},'total_amount':{'$first':'$total_amount'},'discount':{'$first':_0x52ef4e(0x1b8)},'receivable':{'$first':_0x52ef4e(0x208)},'received':{'$first':_0x52ef4e(0x1f1)},'due_amount':{'$first':_0x52ef4e(0x1d2)},'mobile':{'$first':_0x52ef4e(0x207)},'email':{'$first':'$supplier_docs.email'},'address':{'$first':_0x52ef4e(0x219)},'return_sum_qty':{'$sum':_0x52ef4e(0x22a)}}}]);console[_0x52ef4e(0x1c6)](_0x125de2);if(_0x4e43b7[0x0]['language']=='English\x20(US)'){var _0x5552eb=users[_0x52ef4e(0x1de)];console[_0x52ef4e(0x1c6)](_0x5552eb);}else{if(_0x4e43b7[0x0]['language']==_0x52ef4e(0x223))var _0x5552eb=users['Hindi'];else{if(_0x4e43b7[0x0]['language']=='German')var _0x5552eb=users[_0x52ef4e(0x1d5)];else{if(_0x4e43b7[0x0][_0x52ef4e(0x20a)]==_0x52ef4e(0x1fa))var _0x5552eb=users['Spanish'];else{if(_0x4e43b7[0x0][_0x52ef4e(0x20a)]==_0x52ef4e(0x228))var _0x5552eb=users[_0x52ef4e(0x228)];else{if(_0x4e43b7[0x0]['language']==_0x52ef4e(0x1cc))var _0x5552eb=users[_0x52ef4e(0x1cf)];else{if(_0x4e43b7[0x0][_0x52ef4e(0x20a)]==_0x52ef4e(0x1fd))var _0x5552eb=users[_0x52ef4e(0x1fd)];else{if(_0x4e43b7[0x0][_0x52ef4e(0x20a)]==_0x52ef4e(0x222))var _0x5552eb=users[_0x52ef4e(0x20f)];}}}}}}}_0x5081f9[_0x52ef4e(0x215)]('purchases_return',{'success':_0x17e343[_0x52ef4e(0x225)](_0x52ef4e(0x1e3)),'errors':_0x17e343[_0x52ef4e(0x225)](_0x52ef4e(0x1b5)),'role':_0x126cd8,'profile':_0x2f579c,'master_shop':_0x4e43b7,'user':_0x125de2,'language':_0x5552eb});}catch(_0x50f47b){console[_0x52ef4e(0x1c6)](_0x50f47b);}}),router[a0_0x277240(0x1ed)](a0_0x277240(0x1fc),auth,async(_0x31f822,_0x3c6de3)=>{var _0x5bf22d=a0_0x277240;try{const {username:_0x58505a,email:_0x31c6a7,role:_0x14e5ad}=_0x31f822[_0x5bf22d(0x1ad)],_0x139e64=_0x31f822['user'],_0x4780b9=await profile[_0x5bf22d(0x226)]({'email':_0x139e64['email']}),_0x551d90=await product[_0x5bf22d(0x213)]({}),_0x3b535a=await master_shop[_0x5bf22d(0x213)]();console[_0x5bf22d(0x1c6)](_0x5bf22d(0x1e6),_0x3b535a),console['log'](_0x31f822[_0x5bf22d(0x1ef)]);const _0xc3fbf5=_0x31f822['params']['id'],_0x4b654d=await purchases_return[_0x5bf22d(0x1fb)](_0xc3fbf5);console[_0x5bf22d(0x1c6)](_0x4b654d);const _0x37e6a7=await warehouse[_0x5bf22d(0x20d)]([{'$match':{'name':_0x4b654d[_0x5bf22d(0x214)],'room':_0x4b654d[_0x5bf22d(0x1c8)]}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5bf22d(0x1f3)},'product_stock':{'$first':_0x5bf22d(0x1af)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x5bf22d(0x229)},'type':{'$first':_0x5bf22d(0x1fe)},'floorlevel':{'$first':_0x5bf22d(0x224)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x5bf22d(0x217)},'product_code':{'$first':_0x5bf22d(0x1e2)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x5bf22d(0x1b4)}}}]);warehouse_data=await warehouse[_0x5bf22d(0x20d)]([{'$match':{'status':_0x5bf22d(0x1c0),'name':_0x5bf22d(0x201),'warehouse_category':_0x5bf22d(0x203)}},{'$group':{'_id':_0x5bf22d(0x1cd),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),console[_0x5bf22d(0x1c6)](_0x5bf22d(0x1ce),_0x37e6a7);if(_0x3b535a[0x0][_0x5bf22d(0x20a)]==_0x5bf22d(0x1df)){var _0x4601e4=users[_0x5bf22d(0x1de)];console['log'](_0x4601e4);}else{if(_0x3b535a[0x0]['language']=='Hindi')var _0x4601e4=users[_0x5bf22d(0x223)];else{if(_0x3b535a[0x0]['language']==_0x5bf22d(0x1d5))var _0x4601e4=users[_0x5bf22d(0x1d5)];else{if(_0x3b535a[0x0][_0x5bf22d(0x20a)]=='Spanish')var _0x4601e4=users['Spanish'];else{if(_0x3b535a[0x0][_0x5bf22d(0x20a)]==_0x5bf22d(0x228))var _0x4601e4=users[_0x5bf22d(0x228)];else{if(_0x3b535a[0x0][_0x5bf22d(0x20a)]==_0x5bf22d(0x1cc))var _0x4601e4=users['Portuguese'];else{if(_0x3b535a[0x0][_0x5bf22d(0x20a)]=='Chinese')var _0x4601e4=users[_0x5bf22d(0x1fd)];else{if(_0x3b535a[0x0]['language']==_0x5bf22d(0x222))var _0x4601e4=users[_0x5bf22d(0x20f)];}}}}}}}_0x3c6de3[_0x5bf22d(0x215)](_0x5bf22d(0x21a),{'success':_0x31f822['flash']('success'),'errors':_0x31f822['flash']('errors'),'role':_0x139e64,'master_shop':_0x3b535a,'profile':_0x4780b9,'user':_0x4b654d,'stock':_0x37e6a7,'product':_0x551d90,'language':_0x4601e4,'warehouse':warehouse_data});}catch(_0x325cb1){console['log'](_0x325cb1);}}),router['post'](a0_0x277240(0x1fc),auth,async(_0x20f371,_0x1b22ee)=>{var _0x8619ab=a0_0x277240;try{const _0x54cc64=_0x20f371[_0x8619ab(0x1d8)]['id'];console[_0x8619ab(0x1c6)](_0x54cc64);const _0x2d6599=await purchases_return[_0x8619ab(0x226)]({'invoice':_0x20f371[_0x8619ab(0x1ef)]['invoice']});console[_0x8619ab(0x1c6)](_0x8619ab(0x1ee),_0x2d6599);const _0x2ce9ee=await warehouse[_0x8619ab(0x226)]({'name':_0x2d6599[_0x8619ab(0x20e)],'room':_0x2d6599[_0x8619ab(0x1d9)]});console[_0x8619ab(0x1c6)](_0x8619ab(0x1db),_0x2ce9ee);const {invoice:_0x3557a0,suppliers:_0x44c212,date:_0x1e5e5d,warehouse_name:_0x4db14b,product_name:_0x4639a1,purchase_quantity:_0x2469f8,stocks:_0x5457a6,return_qty:_0x5219ec,note:_0x540b4a,Room_name:_0x5ce7aa,level:_0x309db1,isle:_0x1b3613,pallet:_0x5e6f72,to_warehouse_name:_0x1c4cd1,to_Room_name:_0x2521d1}=_0x20f371[_0x8619ab(0x1ef)];if(typeof _0x4639a1==_0x8619ab(0x1e9))var _0x3774a1=[_0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1b3)]],_0x4c0aaa=[_0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1f6)]],_0x2b298f=[_0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1d1)]],_0x197613=[_0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1f9)]],_0x371f30=[_0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1b9)]],_0x41d453=[_0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1e4)]],_0x29786b=[_0x20f371[_0x8619ab(0x1ef)]['pallet']],_0x2a42b1=[_0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1f8)]],_0x4411b4=[_0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x205)]],_0x251aed=[_0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1c7)]],_0x476c15=[_0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x20c)]];else var _0x3774a1=[..._0x20f371['body'][_0x8619ab(0x1b3)]],_0x4c0aaa=[..._0x20f371['body'][_0x8619ab(0x1f6)]],_0x2b298f=[..._0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1d1)]],_0x197613=[..._0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1f9)]],_0x371f30=[..._0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1b9)]],_0x41d453=[..._0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1e4)]],_0x29786b=[..._0x20f371['body'][_0x8619ab(0x1c4)]],_0x4411b4=[..._0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x205)]],_0x251aed=[..._0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1c7)]],_0x476c15=[..._0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x20c)]],_0x2a42b1=[..._0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1f8)]];const _0x145ad2=_0x3774a1[_0x8619ab(0x209)](_0x187a03=>{return _0x187a03={'product_name':_0x187a03};});_0x4c0aaa[_0x8619ab(0x21e)]((_0x42fe16,_0x3312ca)=>{var _0x10ad78=_0x8619ab;_0x145ad2[_0x3312ca][_0x10ad78(0x1f6)]=_0x42fe16;}),_0x2b298f[_0x8619ab(0x21e)]((_0x5d7da2,_0x4838a3)=>{var _0x39d32c=_0x8619ab;_0x145ad2[_0x4838a3][_0x39d32c(0x21d)]=_0x5d7da2;}),_0x197613['forEach']((_0x49d5bc,_0x1bd0d8)=>{_0x145ad2[_0x1bd0d8]['return_qty']=_0x49d5bc;}),_0x371f30['forEach']((_0x1d3b9b,_0x4eb0b0)=>{_0x145ad2[_0x4eb0b0]['bay']=_0x1d3b9b;}),_0x41d453[_0x8619ab(0x21e)]((_0x540a39,_0x4ab546)=>{_0x145ad2[_0x4ab546]['bin']=_0x540a39;}),_0x29786b[_0x8619ab(0x21e)]((_0x21a516,_0x4b38f3)=>{var _0x55c0ad=_0x8619ab;_0x145ad2[_0x4b38f3][_0x55c0ad(0x21b)]=_0x21a516;}),_0x4411b4[_0x8619ab(0x21e)]((_0x136c88,_0x1c17e1)=>{var _0x3c90e3=_0x8619ab;_0x145ad2[_0x1c17e1][_0x3c90e3(0x1ea)]=_0x136c88;}),_0x251aed[_0x8619ab(0x21e)]((_0xfa3434,_0x392c72)=>{var _0x186480=_0x8619ab;_0x145ad2[_0x392c72][_0x186480(0x1b6)]=_0xfa3434;}),_0x476c15['forEach']((_0x520fa6,_0x4ade57)=>{var _0x715f6=_0x8619ab;_0x145ad2[_0x4ade57][_0x715f6(0x1d7)]=_0x520fa6;}),_0x2a42b1['forEach']((_0x30b623,_0x3c5497)=>{var _0x46fc58=_0x8619ab;_0x145ad2[_0x3c5497][_0x46fc58(0x1d0)]=_0x30b623;});var _0x8cba96=0x0;_0x145ad2[_0x8619ab(0x21e)](_0x4bdb89=>{var _0x1b4d60=_0x8619ab;console['log']('foreach\x20newproduct',_0x4bdb89),(parseInt(_0x4bdb89[_0x1b4d60(0x1f6)])<parseInt(_0x4bdb89[_0x1b4d60(0x1f9)])||parseInt(_0x4bdb89[_0x1b4d60(0x21d)])<parseInt(_0x4bdb89['return_qty'])||parseInt(_0x4bdb89[_0x1b4d60(0x1f9)])==0x0)&&_0x8cba96++;});if(_0x8cba96!=0x0)return _0x20f371[_0x8619ab(0x225)](_0x8619ab(0x1b5),'Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty'),_0x1b22ee[_0x8619ab(0x1c9)](_0x8619ab(0x1ec));_0x2d6599[_0x8619ab(0x206)][_0x8619ab(0x21e)](_0x3a4fcb=>{var _0x3e5d4f=_0x8619ab;const _0x73df4d=_0x2ce9ee[_0x3e5d4f(0x1da)][_0x3e5d4f(0x209)](_0x92a24f=>{var _0x4c7c43=_0x3e5d4f;_0x92a24f[_0x4c7c43(0x1b3)]==_0x3a4fcb[_0x4c7c43(0x1b3)]&&_0x92a24f[_0x4c7c43(0x21b)]==_0x3a4fcb[_0x4c7c43(0x21b)]&&_0x92a24f[_0x4c7c43(0x1d0)]==_0x3a4fcb[_0x4c7c43(0x1d0)]&&_0x92a24f[_0x4c7c43(0x1e7)]==_0x3a4fcb['bin']&&_0x92a24f['bay']==_0x3a4fcb[_0x4c7c43(0x1e1)]&&(_0x92a24f['product_stock']=parseInt(_0x92a24f[_0x4c7c43(0x1c2)])+parseInt(_0x3a4fcb[_0x4c7c43(0x1f9)]));});}),console['log'](_0x8619ab(0x1db),_0x2ce9ee),await _0x2ce9ee[_0x8619ab(0x1f4)](),_0x2d6599[_0x8619ab(0x1d4)]=_0x3557a0,_0x2d6599['suppliers']=_0x44c212,_0x2d6599[_0x8619ab(0x1bc)]=_0x1e5e5d,_0x2d6599[_0x8619ab(0x214)]=_0x4db14b,_0x2d6599[_0x8619ab(0x206)]=_0x145ad2,_0x2d6599[_0x8619ab(0x227)]=_0x540b4a,_0x2d6599[_0x8619ab(0x1c8)]=_0x5ce7aa,_0x2d6599['to_warehouse_name']=_0x1c4cd1,_0x2d6599[_0x8619ab(0x1d9)]=_0x2521d1;const _0x5b4a3c=await _0x2d6599['save'](),_0x1a4fa7=await purchases_return[_0x8619ab(0x226)]({'invoice':_0x20f371[_0x8619ab(0x1ef)]['invoice']}),_0x53a60f=await warehouse[_0x8619ab(0x226)]({'name':_0x20f371['body'][_0x8619ab(0x20e)],'room':_0x20f371['body']['to_Room_name']});_0x1a4fa7[_0x8619ab(0x206)][_0x8619ab(0x21e)](_0x23f322=>{var _0x35d142=_0x8619ab;_0x53a60f['product_details'][_0x35d142(0x209)](_0x682748=>{var _0x1a709e=_0x35d142;_0x682748[_0x1a709e(0x1b3)]==_0x23f322[_0x1a709e(0x1b3)]&&_0x682748[_0x1a709e(0x1c4)]==_0x23f322[_0x1a709e(0x1c4)]&&(_0x682748[_0x1a709e(0x1c2)]=parseInt(_0x682748[_0x1a709e(0x1c2)])-parseInt(_0x23f322[_0x1a709e(0x1f9)]),console[_0x1a709e(0x1c6)](_0x1a709e(0x1b1),_0x23f322[_0x1a709e(0x1f9)]));});}),console[_0x8619ab(0x1c6)](_0x8619ab(0x1ba),_0x53a60f),await _0x53a60f[_0x8619ab(0x1f4)]();const _0xa4f817=await s_payment_data[_0x8619ab(0x226)]({'invoice':_0x20f371[_0x8619ab(0x1ef)][_0x8619ab(0x1d4)],'reason':'Purchase\x20Return'});await _0xa4f817[_0x8619ab(0x1f4)](),_0x20f371['flash'](_0x8619ab(0x1e3),_0x8619ab(0x1e0)),_0x1b22ee[_0x8619ab(0x1c9)](_0x8619ab(0x20b));}catch(_0x57dffb){console[_0x8619ab(0x1c6)](_0x57dffb),_0x1b22ee[_0x8619ab(0x21c)](0xc8)[_0x8619ab(0x1f0)]({'message':_0x57dffb[_0x8619ab(0x1d6)]});}}),router[a0_0x277240(0x1ed)](a0_0x277240(0x1b2),auth,async(_0x54a3ee,_0x20cb91)=>{var _0x5c3edd=a0_0x277240;try{const {username:_0x4b21e4,email:_0x8233bd,role:_0x14a625}=_0x54a3ee['user'],_0x24600c=_0x54a3ee[_0x5c3edd(0x1ad)],_0x572ceb=await profile[_0x5c3edd(0x226)]({'email':_0x24600c[_0x5c3edd(0x221)]}),_0x1a03d3=await master_shop[_0x5c3edd(0x213)]();console[_0x5c3edd(0x1c6)](_0x5c3edd(0x1e6),_0x1a03d3);const _0x1ba2b2=_0x54a3ee['params']['id'],_0x2a0f59=await purchases_return[_0x5c3edd(0x1fb)](_0x1ba2b2);console[_0x5c3edd(0x1c6)](_0x2a0f59);const _0x48dbb1=await suppliers[_0x5c3edd(0x226)]({'name':_0x2a0f59[_0x5c3edd(0x1ff)]});console[_0x5c3edd(0x1c6)](_0x48dbb1);if(_0x1a03d3[0x0]['language']==_0x5c3edd(0x1df)){var _0x1af7b3=users[_0x5c3edd(0x1de)];console[_0x5c3edd(0x1c6)](_0x1af7b3);}else{if(_0x1a03d3[0x0][_0x5c3edd(0x20a)]==_0x5c3edd(0x223))var _0x1af7b3=users[_0x5c3edd(0x223)];else{if(_0x1a03d3[0x0]['language']==_0x5c3edd(0x1d5))var _0x1af7b3=users['German'];else{if(_0x1a03d3[0x0][_0x5c3edd(0x20a)]==_0x5c3edd(0x1fa))var _0x1af7b3=users['Spanish'];else{if(_0x1a03d3[0x0][_0x5c3edd(0x20a)]=='French')var _0x1af7b3=users['French'];else{if(_0x1a03d3[0x0][_0x5c3edd(0x20a)]=='Portuguese\x20(BR)')var _0x1af7b3=users[_0x5c3edd(0x1cf)];else{if(_0x1a03d3[0x0][_0x5c3edd(0x20a)]==_0x5c3edd(0x1fd))var _0x1af7b3=users[_0x5c3edd(0x1fd)];else{if(_0x1a03d3[0x0][_0x5c3edd(0x20a)]==_0x5c3edd(0x222))var _0x1af7b3=users[_0x5c3edd(0x20f)];}}}}}}}_0x20cb91[_0x5c3edd(0x215)](_0x5c3edd(0x216),{'success':_0x54a3ee['flash'](_0x5c3edd(0x1e3)),'errors':_0x54a3ee[_0x5c3edd(0x225)](_0x5c3edd(0x1b5)),'role':_0x24600c,'profile':_0x572ceb,'master_shop':_0x1a03d3,'supplier':_0x48dbb1,'purchase':_0x2a0f59,'language':_0x1af7b3});}catch(_0x477506){console[_0x5c3edd(0x1c6)](_0x477506);}}),router[a0_0x277240(0x220)]('/receive_payment/:id',auth,async(_0x2fa9b6,_0x5ddde0)=>{var _0x5aaf9b=a0_0x277240;try{const _0x2d44d7=_0x2fa9b6['params']['id'],{invoice:_0x55884c,suppliers:_0x494299,receivable_amount:_0x7bd738,received_amount:_0x418f25}=_0x2fa9b6[_0x5aaf9b(0x1ef)],_0x2e9ff8=await purchases_return[_0x5aaf9b(0x1fb)](_0x2d44d7);console[_0x5aaf9b(0x1c6)](_0x2e9ff8);var _0x41a6ce=_0x7bd738-_0x418f25;console[_0x5aaf9b(0x1c6)](_0x418f25),_0x2e9ff8[_0x5aaf9b(0x218)]=parseFloat(_0x418f25)+parseFloat(_0x2e9ff8['received']),_0x2e9ff8[_0x5aaf9b(0x1be)]=_0x41a6ce,console[_0x5aaf9b(0x1c6)](_0x2e9ff8);const _0x4e60aa=await _0x2e9ff8[_0x5aaf9b(0x1f4)](),_0xd641be=await s_payment_data[_0x5aaf9b(0x226)]({'invoice':_0x2fa9b6[_0x5aaf9b(0x1ef)][_0x5aaf9b(0x1d4)],'reason':_0x5aaf9b(0x1cb)});_0xd641be['amount']=_0x41a6ce,await _0xd641be[_0x5aaf9b(0x1f4)]();let _0x2f4309=new Date(),_0x235c8f=('0'+_0x2f4309['getDate']())['slice'](-0x2),_0x5eabb7=('0'+(_0x2f4309[_0x5aaf9b(0x1c3)]()+0x1))[_0x5aaf9b(0x1f5)](-0x2),_0x99722f=_0x2f4309[_0x5aaf9b(0x22b)](),_0x66349d=_0x99722f+'-'+_0x5eabb7+'-'+_0x235c8f;const _0x66a06e=new suppliers_payment({'invoice':_0x55884c,'date':_0x99722f+'-'+_0x5eabb7+'-'+_0x235c8f,'suppliers':_0x494299,'reason':_0x5aaf9b(0x1dc),'amount':_0x418f25}),_0x4f0310=await _0x66a06e[_0x5aaf9b(0x1f4)]();_0x2fa9b6[_0x5aaf9b(0x225)](_0x5aaf9b(0x1e3),_0x5aaf9b(0x202)),_0x5ddde0[_0x5aaf9b(0x1c9)](_0x5aaf9b(0x20b));}catch(_0x510cc0){console[_0x5aaf9b(0x1c6)](_0x510cc0);}}),module[a0_0x277240(0x1e5)]=router;