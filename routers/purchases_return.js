var a0_0x386d19=a0_0x2b3a;(function(_0x37fbed,_0x444961){var _0x3ca8b5=a0_0x2b3a,_0x2158c0=_0x37fbed();while(!![]){try{var _0x3e661f=parseInt(_0x3ca8b5(0x11c))/0x1+-parseInt(_0x3ca8b5(0x103))/0x2+parseInt(_0x3ca8b5(0x143))/0x3+-parseInt(_0x3ca8b5(0x14e))/0x4+parseInt(_0x3ca8b5(0x17a))/0x5*(-parseInt(_0x3ca8b5(0x158))/0x6)+-parseInt(_0x3ca8b5(0x106))/0x7+-parseInt(_0x3ca8b5(0x13d))/0x8*(-parseInt(_0x3ca8b5(0x14c))/0x9);if(_0x3e661f===_0x444961)break;else _0x2158c0['push'](_0x2158c0['shift']());}catch(_0x771a91){_0x2158c0['push'](_0x2158c0['shift']());}}}(a0_0x4418,0xdf5c0));function a0_0x4418(){var _0xa43e9c=['amount','Received\x20For\x20Purchase\x20Return','stocks','272148UdWcfv','English','product_details','redirect','$product_details.product_stock','to_warehouse_name','German','../models/all_models','Hindi','aggregate','$_id','bay','/purchases_return/view','purchases_return','product_code','$product_details.floorlevel','success','user','secondary_code','master','$receivable','floorlevel','Spanish','status','get','render','to_Room_name','$name','types','Portuguese\x20(BR)','French','language','$date','$product_details.product_code','170AyyUJD','due_amount','Enabled','findOne','product_name','type','Purchase\x20Return','return_purchase_invoice','1798888LYOAOj','$received','log','2042012cYRjAl','pallet','../public/language/languages.json','final','forEach','supplier_docs','foreach\x20newproduct','$product_details','product_stock','express','$product_details.product_name','English\x20(US)','level','$product_details.bay','body','purchase_quantity','note','/view','email','primary_code_hide','Arabic','Router','1055562iAvkKp','string','suppliers','$due_amount','findById','invoice','errors','$total_amount','find','room','isle','save','name','back','bin','post','$supplier_docs.mobile','received','map','product_code_hide','getDate','stock_quantity','$suppliers','$product_details.storage','old_warehouse_data','date','Return\x20Goods','purchase\x20return\x20successfully','/receive_payment/:id','Arabic\x20(ae)','$product_details.secondary_code','getFullYear','stock_data','8NSDhQC','$product_details._id','warehouse_name','message','$note','$warehouse_name','2250348HSgxWC','payment\x20successfull','return_qty','$return_product.product_name','$product_details.bin','$supplier_docs.address','to_room','Chinese','Portuguese','24895287exmISF','params','3694436rckJiT','primary_code','json','flash','/view/:id','secondary_code_hide','$return_product.price'];a0_0x4418=function(){return _0xa43e9c;};return a0_0x4418();}function a0_0x2b3a(_0x7b3da8,_0x2d7948){var _0x44189d=a0_0x4418();return a0_0x2b3a=function(_0x2b3a67,_0x4f79d3){_0x2b3a67=_0x2b3a67-0xfc;var _0x46b0d1=_0x44189d[_0x2b3a67];return _0x46b0d1;},a0_0x2b3a(_0x7b3da8,_0x2d7948);}const express=require(a0_0x386d19(0x10f)),app=express(),router=express[a0_0x386d19(0x11b)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x386d19(0x15f)),auth=require('../middleware/auth'),users=require(a0_0x386d19(0x108));router[a0_0x386d19(0x170)](a0_0x386d19(0x117),auth,async(_0x14d151,_0x369fc1)=>{var _0xede3c1=a0_0x386d19;try{const {username:_0x483a96,email:_0x59a76d,role:_0x2339c6}=_0x14d151[_0xede3c1(0x169)],_0x59eef6=_0x14d151[_0xede3c1(0x169)],_0x2e7c1f=await profile['findOne']({'email':_0x59eef6[_0xede3c1(0x118)]}),_0x105ca1=await master_shop[_0xede3c1(0x124)]();console[_0xede3c1(0x105)](_0xede3c1(0x16b),_0x105ca1);const _0x33dfe3=await purchases_return[_0xede3c1(0x161)]([{'$lookup':{'from':_0xede3c1(0x11e),'localField':_0xede3c1(0x11e),'foreignField':_0xede3c1(0x128),'as':_0xede3c1(0x10b)}},{'$unwind':'$return_product'},{'$unwind':'$supplier_docs'},{'$group':{'_id':_0xede3c1(0x162),'invoice':{'$first':'$invoice'},'date':{'$first':_0xede3c1(0x178)},'suppliers':{'$first':_0xede3c1(0x132)},'warehouse_name':{'$first':_0xede3c1(0x142)},'product_name':{'$first':_0xede3c1(0x146)},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':_0xede3c1(0x154)},'total':{'$sum':'$return_product.total'},'note':{'$first':_0xede3c1(0x141)},'total_amount':{'$first':_0xede3c1(0x123)},'discount':{'$first':'$discount'},'receivable':{'$first':_0xede3c1(0x16c)},'received':{'$first':_0xede3c1(0x104)},'due_amount':{'$first':_0xede3c1(0x11f)},'mobile':{'$first':_0xede3c1(0x12c)},'email':{'$first':'$supplier_docs.email'},'address':{'$first':_0xede3c1(0x148)},'return_sum_qty':{'$sum':'$return_product.return_qty'}}}]);console[_0xede3c1(0x105)](_0x33dfe3);if(_0x105ca1[0x0][_0xede3c1(0x177)]==_0xede3c1(0x111)){var _0x425e15=users[_0xede3c1(0x159)];console[_0xede3c1(0x105)](_0x425e15);}else{if(_0x105ca1[0x0][_0xede3c1(0x177)]==_0xede3c1(0x160))var _0x425e15=users[_0xede3c1(0x160)];else{if(_0x105ca1[0x0]['language']==_0xede3c1(0x15e))var _0x425e15=users[_0xede3c1(0x15e)];else{if(_0x105ca1[0x0][_0xede3c1(0x177)]==_0xede3c1(0x16e))var _0x425e15=users[_0xede3c1(0x16e)];else{if(_0x105ca1[0x0]['language']=='French')var _0x425e15=users[_0xede3c1(0x176)];else{if(_0x105ca1[0x0]['language']==_0xede3c1(0x175))var _0x425e15=users[_0xede3c1(0x14b)];else{if(_0x105ca1[0x0][_0xede3c1(0x177)]=='Chinese')var _0x425e15=users[_0xede3c1(0x14a)];else{if(_0x105ca1[0x0]['language']=='Arabic\x20(ae)')var _0x425e15=users['Arabic'];}}}}}}}_0x369fc1[_0xede3c1(0x171)](_0xede3c1(0x165),{'success':_0x14d151[_0xede3c1(0x151)]('success'),'errors':_0x14d151[_0xede3c1(0x151)](_0xede3c1(0x122)),'role':_0x59eef6,'profile':_0x2e7c1f,'master_shop':_0x105ca1,'user':_0x33dfe3,'language':_0x425e15});}catch(_0x1c1267){console['log'](_0x1c1267);}}),router[a0_0x386d19(0x170)]('/view/:id',auth,async(_0x1efad0,_0x368124)=>{var _0x27d09c=a0_0x386d19;try{const {username:_0x54a740,email:_0x30fda3,role:_0x54ebaa}=_0x1efad0[_0x27d09c(0x169)],_0x1f38e9=_0x1efad0[_0x27d09c(0x169)],_0x5b5838=await profile[_0x27d09c(0xfe)]({'email':_0x1f38e9[_0x27d09c(0x118)]}),_0x3c862=await product[_0x27d09c(0x124)]({}),_0x5e73aa=await master_shop[_0x27d09c(0x124)]();console[_0x27d09c(0x105)]('master',_0x5e73aa),console[_0x27d09c(0x105)](_0x1efad0[_0x27d09c(0x114)]);const _0x3e950f=_0x1efad0[_0x27d09c(0x14d)]['id'],_0x23748f=await purchases_return[_0x27d09c(0x120)](_0x3e950f);console['log'](_0x23748f);const _0xc222f0=await warehouse[_0x27d09c(0x161)]([{'$match':{'name':_0x23748f[_0x27d09c(0x13f)],'room':_0x23748f[_0x27d09c(0x125)]}},{'$unwind':_0x27d09c(0x10d)},{'$group':{'_id':_0x27d09c(0x13e),'name':{'$first':_0x27d09c(0x110)},'product_stock':{'$first':_0x27d09c(0x15c)},'bay':{'$first':_0x27d09c(0x113)},'bin':{'$first':_0x27d09c(0x147)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x27d09c(0x167)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x27d09c(0x13a)},'product_code':{'$first':_0x27d09c(0x179)},'storage':{'$first':_0x27d09c(0x133)},'rack':{'$first':'$product_details.rack'}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':_0x27d09c(0xfd),'name':_0x27d09c(0x136),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x27d09c(0x173),'name':{'$first':_0x27d09c(0x173)}}},{'$sort':{'name':0x1}}]),console[_0x27d09c(0x105)](_0x27d09c(0x13c),_0xc222f0);if(_0x5e73aa[0x0]['language']=='English\x20(US)'){var _0x510cd4=users[_0x27d09c(0x159)];console[_0x27d09c(0x105)](_0x510cd4);}else{if(_0x5e73aa[0x0][_0x27d09c(0x177)]==_0x27d09c(0x160))var _0x510cd4=users[_0x27d09c(0x160)];else{if(_0x5e73aa[0x0][_0x27d09c(0x177)]==_0x27d09c(0x15e))var _0x510cd4=users[_0x27d09c(0x15e)];else{if(_0x5e73aa[0x0][_0x27d09c(0x177)]==_0x27d09c(0x16e))var _0x510cd4=users[_0x27d09c(0x16e)];else{if(_0x5e73aa[0x0][_0x27d09c(0x177)]==_0x27d09c(0x176))var _0x510cd4=users['French'];else{if(_0x5e73aa[0x0][_0x27d09c(0x177)]=='Portuguese\x20(BR)')var _0x510cd4=users[_0x27d09c(0x14b)];else{if(_0x5e73aa[0x0][_0x27d09c(0x177)]=='Chinese')var _0x510cd4=users[_0x27d09c(0x14a)];else{if(_0x5e73aa[0x0][_0x27d09c(0x177)]==_0x27d09c(0x139))var _0x510cd4=users[_0x27d09c(0x11a)];}}}}}}}_0x368124['render']('return_purchase_edit',{'success':_0x1efad0['flash'](_0x27d09c(0x168)),'errors':_0x1efad0[_0x27d09c(0x151)](_0x27d09c(0x122)),'role':_0x1f38e9,'master_shop':_0x5e73aa,'profile':_0x5b5838,'user':_0x23748f,'stock':_0xc222f0,'product':_0x3c862,'language':_0x510cd4,'warehouse':warehouse_data});}catch(_0x743df8){console[_0x27d09c(0x105)](_0x743df8);}}),router['post'](a0_0x386d19(0x152),auth,async(_0x5d63b6,_0x59d4a3)=>{var _0x5003fc=a0_0x386d19;try{const _0x3565a4=_0x5d63b6[_0x5003fc(0x14d)]['id'];console[_0x5003fc(0x105)](_0x3565a4);const _0x1bf854=await purchases_return[_0x5003fc(0xfe)]({'invoice':_0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x121)]});console[_0x5003fc(0x105)]('old_data',_0x1bf854);const _0x4300d8=await warehouse[_0x5003fc(0xfe)]({'name':_0x1bf854[_0x5003fc(0x15d)],'room':_0x1bf854[_0x5003fc(0x149)]});console[_0x5003fc(0x105)](_0x5003fc(0x134),_0x4300d8);const {invoice:_0x50577d,suppliers:_0x59965d,date:_0x2ce5e9,warehouse_name:_0x1d0fdb,product_name:_0xf0f186,purchase_quantity:_0x2cc559,stocks:_0x59934c,return_qty:_0x3efd0a,note:_0x40a511,Room_name:_0x4c7bd8,level:_0x4a0604,isle:_0x24f133,pallet:_0xea5f4d,to_warehouse_name:_0x26c6f0,to_Room_name:_0x5139c8}=_0x5d63b6[_0x5003fc(0x114)];if(typeof _0xf0f186==_0x5003fc(0x11d))var _0x59be98=[_0x5d63b6['body'][_0x5003fc(0xff)]],_0x17b75b=[_0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x115)]],_0x4e4de0=[_0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x157)]],_0x1af8a1=[_0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x145)]],_0x1c51ba=[_0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x112)]],_0x34f665=[_0x5d63b6['body']['isle']],_0x3882ac=[_0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x107)]],_0xe03277=[_0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x174)]],_0x3f3229=[_0x5d63b6['body'][_0x5003fc(0x12f)]],_0x32ce4b=[_0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x119)]],_0xa270df=[_0x5d63b6['body'][_0x5003fc(0x153)]];else var _0x59be98=[..._0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0xff)]],_0x17b75b=[..._0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x115)]],_0x4e4de0=[..._0x5d63b6['body'][_0x5003fc(0x157)]],_0x1af8a1=[..._0x5d63b6['body'][_0x5003fc(0x145)]],_0x1c51ba=[..._0x5d63b6['body'][_0x5003fc(0x112)]],_0x34f665=[..._0x5d63b6['body'][_0x5003fc(0x126)]],_0x3882ac=[..._0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x107)]],_0x3f3229=[..._0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x12f)]],_0x32ce4b=[..._0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x119)]],_0xa270df=[..._0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x153)]],_0xe03277=[..._0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x174)]];const _0x43b2d0=_0x59be98['map'](_0x4e60e4=>{return _0x4e60e4={'product_name':_0x4e60e4};});_0x17b75b[_0x5003fc(0x10a)]((_0x3a2d9e,_0xb6927c)=>{_0x43b2d0[_0xb6927c]['purchase_quantity']=_0x3a2d9e;}),_0x4e4de0[_0x5003fc(0x10a)]((_0x2ff474,_0x493a71)=>{var _0x474c73=_0x5003fc;_0x43b2d0[_0x493a71][_0x474c73(0x131)]=_0x2ff474;}),_0x1af8a1[_0x5003fc(0x10a)]((_0x2f4a99,_0x3171f9)=>{var _0x461db1=_0x5003fc;_0x43b2d0[_0x3171f9][_0x461db1(0x145)]=_0x2f4a99;}),_0x1c51ba[_0x5003fc(0x10a)]((_0x2f3017,_0x2dc09f)=>{_0x43b2d0[_0x2dc09f]['bay']=_0x2f3017;}),_0x34f665[_0x5003fc(0x10a)]((_0x461938,_0x192619)=>{_0x43b2d0[_0x192619]['bin']=_0x461938;}),_0x3882ac[_0x5003fc(0x10a)]((_0x1a7a25,_0x328c6a)=>{var _0x580bf0=_0x5003fc;_0x43b2d0[_0x328c6a][_0x580bf0(0x16d)]=_0x1a7a25;}),_0x3f3229[_0x5003fc(0x10a)]((_0x2ac5af,_0x4a06fe)=>{var _0x30639e=_0x5003fc;_0x43b2d0[_0x4a06fe][_0x30639e(0x166)]=_0x2ac5af;}),_0x32ce4b['forEach']((_0x297265,_0x1ab94d)=>{var _0x1b99f4=_0x5003fc;_0x43b2d0[_0x1ab94d][_0x1b99f4(0x14f)]=_0x297265;}),_0xa270df[_0x5003fc(0x10a)]((_0x1965e,_0x457943)=>{var _0x12670d=_0x5003fc;_0x43b2d0[_0x457943][_0x12670d(0x16a)]=_0x1965e;}),_0xe03277['forEach']((_0x778996,_0x252c76)=>{var _0x2f0cb7=_0x5003fc;_0x43b2d0[_0x252c76][_0x2f0cb7(0x100)]=_0x778996;});var _0x242ae8=0x0;_0x43b2d0[_0x5003fc(0x10a)](_0x1f7c87=>{var _0x3aed19=_0x5003fc;console[_0x3aed19(0x105)](_0x3aed19(0x10c),_0x1f7c87),(parseInt(_0x1f7c87[_0x3aed19(0x115)])<parseInt(_0x1f7c87[_0x3aed19(0x145)])||parseInt(_0x1f7c87[_0x3aed19(0x131)])<parseInt(_0x1f7c87['return_qty'])||parseInt(_0x1f7c87[_0x3aed19(0x145)])==0x0)&&_0x242ae8++;});if(_0x242ae8!=0x0)return _0x5d63b6[_0x5003fc(0x151)](_0x5003fc(0x122),'Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty'),_0x59d4a3['redirect'](_0x5003fc(0x129));_0x1bf854['return_product'][_0x5003fc(0x10a)](_0x451351=>{var _0x241f6a=_0x5003fc;const _0x29d3ee=_0x4300d8[_0x241f6a(0x15a)][_0x241f6a(0x12e)](_0x4db758=>{var _0x349006=_0x241f6a;_0x4db758['product_name']==_0x451351['product_name']&&_0x4db758['floorlevel']==_0x451351[_0x349006(0x16d)]&&_0x4db758[_0x349006(0x100)]==_0x451351[_0x349006(0x100)]&&_0x4db758[_0x349006(0x12a)]==_0x451351[_0x349006(0x12a)]&&_0x4db758[_0x349006(0x163)]==_0x451351['bay']&&(_0x4db758[_0x349006(0x10e)]=parseInt(_0x4db758[_0x349006(0x10e)])+parseInt(_0x451351[_0x349006(0x145)]));});}),console[_0x5003fc(0x105)](_0x5003fc(0x134),_0x4300d8),await _0x4300d8[_0x5003fc(0x127)](),_0x1bf854[_0x5003fc(0x121)]=_0x50577d,_0x1bf854[_0x5003fc(0x11e)]=_0x59965d,_0x1bf854[_0x5003fc(0x135)]=_0x2ce5e9,_0x1bf854[_0x5003fc(0x13f)]=_0x1d0fdb,_0x1bf854['return_product']=_0x43b2d0,_0x1bf854[_0x5003fc(0x116)]=_0x40a511,_0x1bf854[_0x5003fc(0x125)]=_0x4c7bd8,_0x1bf854[_0x5003fc(0x15d)]=_0x26c6f0,_0x1bf854['to_room']=_0x5139c8;const _0x498bf1=await _0x1bf854[_0x5003fc(0x127)](),_0x1d32b3=await purchases_return['findOne']({'invoice':_0x5d63b6['body'][_0x5003fc(0x121)]}),_0x1f1be2=await warehouse['findOne']({'name':_0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x15d)],'room':_0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x172)]});_0x1d32b3['return_product']['forEach'](_0x42e6bc=>{var _0x1b241e=_0x5003fc;_0x1f1be2[_0x1b241e(0x15a)]['map'](_0x1e3479=>{var _0x2baf65=_0x1b241e;_0x1e3479['product_name']==_0x42e6bc[_0x2baf65(0xff)]&&_0x1e3479[_0x2baf65(0x107)]==_0x42e6bc[_0x2baf65(0x107)]&&(_0x1e3479[_0x2baf65(0x10e)]=parseInt(_0x1e3479['product_stock'])-parseInt(_0x42e6bc[_0x2baf65(0x145)]),console[_0x2baf65(0x105)]('product_details.return_qtyproduct_details.return_qty',_0x42e6bc[_0x2baf65(0x145)]));});}),console[_0x5003fc(0x105)](_0x5003fc(0x109),_0x1f1be2),await _0x1f1be2[_0x5003fc(0x127)]();const _0x363ce2=await s_payment_data[_0x5003fc(0xfe)]({'invoice':_0x5d63b6[_0x5003fc(0x114)][_0x5003fc(0x121)],'reason':'Purchase\x20Return'});await _0x363ce2[_0x5003fc(0x127)](),_0x5d63b6['flash'](_0x5003fc(0x168),_0x5003fc(0x137)),_0x59d4a3[_0x5003fc(0x15b)](_0x5003fc(0x164));}catch(_0x57746e){console[_0x5003fc(0x105)](_0x57746e),_0x59d4a3[_0x5003fc(0x16f)](0xc8)[_0x5003fc(0x150)]({'message':_0x57746e[_0x5003fc(0x140)]});}}),router[a0_0x386d19(0x170)]('/invoice/:id',auth,async(_0x342c60,_0x412be8)=>{var _0x26f808=a0_0x386d19;try{const {username:_0x31006d,email:_0x12659f,role:_0x4b6cfc}=_0x342c60[_0x26f808(0x169)],_0x42a782=_0x342c60[_0x26f808(0x169)],_0x1bb69a=await profile[_0x26f808(0xfe)]({'email':_0x42a782[_0x26f808(0x118)]}),_0x423335=await master_shop['find']();console[_0x26f808(0x105)]('master',_0x423335);const _0x3477e7=_0x342c60['params']['id'],_0x575b7b=await purchases_return[_0x26f808(0x120)](_0x3477e7);console[_0x26f808(0x105)](_0x575b7b);const _0x4511c4=await suppliers[_0x26f808(0xfe)]({'name':_0x575b7b['suppliers']});console[_0x26f808(0x105)](_0x4511c4);if(_0x423335[0x0]['language']=='English\x20(US)'){var _0x39b67e=users['English'];console[_0x26f808(0x105)](_0x39b67e);}else{if(_0x423335[0x0]['language']==_0x26f808(0x160))var _0x39b67e=users[_0x26f808(0x160)];else{if(_0x423335[0x0][_0x26f808(0x177)]==_0x26f808(0x15e))var _0x39b67e=users[_0x26f808(0x15e)];else{if(_0x423335[0x0]['language']==_0x26f808(0x16e))var _0x39b67e=users[_0x26f808(0x16e)];else{if(_0x423335[0x0][_0x26f808(0x177)]==_0x26f808(0x176))var _0x39b67e=users[_0x26f808(0x176)];else{if(_0x423335[0x0][_0x26f808(0x177)]==_0x26f808(0x175))var _0x39b67e=users[_0x26f808(0x14b)];else{if(_0x423335[0x0]['language']==_0x26f808(0x14a))var _0x39b67e=users[_0x26f808(0x14a)];else{if(_0x423335[0x0][_0x26f808(0x177)]=='Arabic\x20(ae)')var _0x39b67e=users['Arabic'];}}}}}}}_0x412be8['render'](_0x26f808(0x102),{'success':_0x342c60[_0x26f808(0x151)](_0x26f808(0x168)),'errors':_0x342c60['flash'](_0x26f808(0x122)),'role':_0x42a782,'profile':_0x1bb69a,'master_shop':_0x423335,'supplier':_0x4511c4,'purchase':_0x575b7b,'language':_0x39b67e});}catch(_0x3c1004){console[_0x26f808(0x105)](_0x3c1004);}}),router[a0_0x386d19(0x12b)](a0_0x386d19(0x138),auth,async(_0x1e202d,_0x4c26cb)=>{var _0x2f61f9=a0_0x386d19;try{const _0x24e065=_0x1e202d[_0x2f61f9(0x14d)]['id'],{invoice:_0x41219c,suppliers:_0x45169d,receivable_amount:_0x51cf57,received_amount:_0x4fe2fd}=_0x1e202d[_0x2f61f9(0x114)],_0x388cff=await purchases_return['findById'](_0x24e065);console[_0x2f61f9(0x105)](_0x388cff);var _0x2f973b=_0x51cf57-_0x4fe2fd;console['log'](_0x4fe2fd),_0x388cff[_0x2f61f9(0x12d)]=parseFloat(_0x4fe2fd)+parseFloat(_0x388cff[_0x2f61f9(0x12d)]),_0x388cff[_0x2f61f9(0xfc)]=_0x2f973b,console[_0x2f61f9(0x105)](_0x388cff);const _0x301528=await _0x388cff[_0x2f61f9(0x127)](),_0x4bc497=await s_payment_data[_0x2f61f9(0xfe)]({'invoice':_0x1e202d[_0x2f61f9(0x114)]['invoice'],'reason':_0x2f61f9(0x101)});_0x4bc497[_0x2f61f9(0x155)]=_0x2f973b,await _0x4bc497['save']();let _0x47405f=new Date(),_0x386478=('0'+_0x47405f[_0x2f61f9(0x130)]())['slice'](-0x2),_0x263539=('0'+(_0x47405f['getMonth']()+0x1))['slice'](-0x2),_0x3e0f8a=_0x47405f[_0x2f61f9(0x13b)](),_0x4f775a=_0x3e0f8a+'-'+_0x263539+'-'+_0x386478;const _0x143710=new suppliers_payment({'invoice':_0x41219c,'date':_0x3e0f8a+'-'+_0x263539+'-'+_0x386478,'suppliers':_0x45169d,'reason':_0x2f61f9(0x156),'amount':_0x4fe2fd}),_0x5a39d2=await _0x143710['save']();_0x1e202d['flash'](_0x2f61f9(0x168),_0x2f61f9(0x144)),_0x4c26cb[_0x2f61f9(0x15b)]('/purchases_return/view');}catch(_0x404750){console[_0x2f61f9(0x105)](_0x404750);}}),module['exports']=router;