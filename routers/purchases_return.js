function a0_0x3643(){var _0x141e64=['json','message','to_warehouse_name','errors','get','8vFfEhq','Raw\x20Materials','$supplier_docs','warehouse_name','types','return_qty','Hindi','$product_details.bin','master','12240750kOPsbB','$product_details.rack','Received\x20For\x20Purchase\x20Return','success','type','room','81995xyeTzA','find','$invoice','purchase_quantity','Purchase\x20Return','Portuguese','getDate','findById','$product_details.type','name','$received','$_id','$product_details.product_code','7ExEgJm','slice','English\x20(US)','primary_code','$product_details.storage','secondary_code','old_data','product_code_hide','87056woylJi','$product_details.primary_code','save','level','user','/view','forEach','primary_code_hide','$name','render','French','1139499rtgOwd','getMonth','bin','stocks','due_amount','suppliers','$supplier_docs.mobile','pallet','isle','bay','../models/all_models','product_name','map','body','status','$total_amount','Spanish','/view/:id','return_purchase_invoice','Router','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','back','email','findOne','final','payment\x20successfull','exports','$date','post','$return_product.return_qty','3217971ZHeQjb','flash','string','received','Return\x20Goods','German','Chinese','supplier_docs','old_warehouse_data','product_stock','aggregate','date','redirect','foreach\x20newproduct','purchases_return','stock_quantity','params','3043016EMtcOx','floorlevel','/purchases_return/view','3616302TZhKbE','$due_amount','$product_details.product_name','$suppliers','return_purchase_edit','return_product','language','../public/language/languages.json','Arabic\x20(ae)','invoice','/invoice/:id','$product_details.floorlevel','log','Portuguese\x20(BR)','$return_product.product_name','$warehouse_name','English','to_room','$product_details.bay','4UMhOJf','$product_details.secondary_code'];a0_0x3643=function(){return _0x141e64;};return a0_0x3643();}var a0_0x1a7422=a0_0xb6e2;(function(_0x12b41e,_0x23e976){var _0x2a563f=a0_0xb6e2,_0x905a4a=_0x12b41e();while(!![]){try{var _0x5578f5=parseInt(_0x2a563f(0x17a))/0x1*(parseInt(_0x2a563f(0x123))/0x2)+parseInt(_0x2a563f(0x14c))/0x3*(-parseInt(_0x2a563f(0x173))/0x4)+-parseInt(_0x2a563f(0x10e))/0x5+parseInt(_0x2a563f(0x160))/0x6*(parseInt(_0x2a563f(0x11b))/0x7)+-parseInt(_0x2a563f(0x15d))/0x8+-parseInt(_0x2a563f(0x12e))/0x9+parseInt(_0x2a563f(0x108))/0xa;if(_0x5578f5===_0x23e976)break;else _0x905a4a['push'](_0x905a4a['shift']());}catch(_0x371d92){_0x905a4a['push'](_0x905a4a['shift']());}}}(a0_0x3643,0x8d59c));const express=require('express'),app=express(),router=express[a0_0x1a7422(0x141)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x1a7422(0x138)),auth=require('../middleware/auth'),users=require(a0_0x1a7422(0x167));function a0_0xb6e2(_0x2a5d20,_0x4e3711){var _0x364371=a0_0x3643();return a0_0xb6e2=function(_0xb6e2ea,_0x508da9){_0xb6e2ea=_0xb6e2ea-0x104;var _0x3e7003=_0x364371[_0xb6e2ea];return _0x3e7003;},a0_0xb6e2(_0x2a5d20,_0x4e3711);}router['get'](a0_0x1a7422(0x128),auth,async(_0xbcfd2c,_0x13fb87)=>{var _0x4ed889=a0_0x1a7422;try{const {username:_0x40a7e5,email:_0x4b8348,role:_0x3599c0}=_0xbcfd2c[_0x4ed889(0x127)],_0x1e5ab5=_0xbcfd2c[_0x4ed889(0x127)],_0x22676c=await profile[_0x4ed889(0x145)]({'email':_0x1e5ab5[_0x4ed889(0x144)]}),_0x1f03d2=await master_shop[_0x4ed889(0x10f)]();console[_0x4ed889(0x16c)](_0x4ed889(0x107),_0x1f03d2);const _0x317c93=await purchases_return[_0x4ed889(0x156)]([{'$lookup':{'from':_0x4ed889(0x133),'localField':_0x4ed889(0x133),'foreignField':_0x4ed889(0x117),'as':_0x4ed889(0x153)}},{'$unwind':'$return_product'},{'$unwind':_0x4ed889(0x17c)},{'$group':{'_id':_0x4ed889(0x119),'invoice':{'$first':_0x4ed889(0x110)},'date':{'$first':_0x4ed889(0x149)},'suppliers':{'$first':_0x4ed889(0x163)},'warehouse_name':{'$first':_0x4ed889(0x16f)},'product_name':{'$first':_0x4ed889(0x16e)},'return_qty':{'$first':_0x4ed889(0x14b)},'price':{'$first':'$return_product.price'},'total':{'$sum':'$return_product.total'},'note':{'$first':'$note'},'total_amount':{'$first':_0x4ed889(0x13d)},'discount':{'$first':'$discount'},'receivable':{'$first':'$receivable'},'received':{'$first':_0x4ed889(0x118)},'due_amount':{'$first':_0x4ed889(0x161)},'mobile':{'$first':_0x4ed889(0x134)},'email':{'$first':'$supplier_docs.email'},'address':{'$first':'$supplier_docs.address'},'return_sum_qty':{'$sum':_0x4ed889(0x14b)}}}]);console[_0x4ed889(0x16c)](_0x317c93);if(_0x1f03d2[0x0][_0x4ed889(0x166)]=='English\x20(US)'){var _0x18bff3=users[_0x4ed889(0x170)];console[_0x4ed889(0x16c)](_0x18bff3);}else{if(_0x1f03d2[0x0][_0x4ed889(0x166)]==_0x4ed889(0x105))var _0x18bff3=users[_0x4ed889(0x105)];else{if(_0x1f03d2[0x0][_0x4ed889(0x166)]==_0x4ed889(0x151))var _0x18bff3=users['German'];else{if(_0x1f03d2[0x0][_0x4ed889(0x166)]=='Spanish')var _0x18bff3=users['Spanish'];else{if(_0x1f03d2[0x0][_0x4ed889(0x166)]=='French')var _0x18bff3=users['French'];else{if(_0x1f03d2[0x0][_0x4ed889(0x166)]=='Portuguese\x20(BR)')var _0x18bff3=users['Portuguese'];else{if(_0x1f03d2[0x0][_0x4ed889(0x166)]==_0x4ed889(0x152))var _0x18bff3=users[_0x4ed889(0x152)];else{if(_0x1f03d2[0x0][_0x4ed889(0x166)]==_0x4ed889(0x168))var _0x18bff3=users['Arabic'];}}}}}}}_0x13fb87[_0x4ed889(0x12c)](_0x4ed889(0x15a),{'success':_0xbcfd2c[_0x4ed889(0x14d)](_0x4ed889(0x10b)),'errors':_0xbcfd2c['flash']('errors'),'role':_0x1e5ab5,'profile':_0x22676c,'master_shop':_0x1f03d2,'user':_0x317c93,'language':_0x18bff3});}catch(_0x4d3594){console[_0x4ed889(0x16c)](_0x4d3594);}}),router[a0_0x1a7422(0x179)]('/view/:id',auth,async(_0x25671f,_0x294790)=>{var _0x363c80=a0_0x1a7422;try{const {username:_0x15efb0,email:_0x221edf,role:_0x3854b9}=_0x25671f[_0x363c80(0x127)],_0x5354d9=_0x25671f[_0x363c80(0x127)],_0xf72f34=await profile[_0x363c80(0x145)]({'email':_0x5354d9[_0x363c80(0x144)]}),_0x5aab26=await product['find']({}),_0x48ee56=await master_shop[_0x363c80(0x10f)]();console['log'](_0x363c80(0x107),_0x48ee56),console[_0x363c80(0x16c)](_0x25671f[_0x363c80(0x13b)]);const _0x5a277f=_0x25671f[_0x363c80(0x15c)]['id'],_0x51d80f=await purchases_return[_0x363c80(0x115)](_0x5a277f);console[_0x363c80(0x16c)](_0x51d80f);const _0x35917c=await warehouse[_0x363c80(0x156)]([{'$match':{'name':_0x51d80f[_0x363c80(0x17d)],'room':_0x51d80f[_0x363c80(0x10d)]}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x363c80(0x162)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x363c80(0x172)},'bin':{'$first':_0x363c80(0x106)},'type':{'$first':_0x363c80(0x116)},'floorlevel':{'$first':_0x363c80(0x16b)},'primary_code':{'$first':_0x363c80(0x124)},'secondary_code':{'$first':_0x363c80(0x174)},'product_code':{'$first':_0x363c80(0x11a)},'storage':{'$first':_0x363c80(0x11f)},'rack':{'$first':_0x363c80(0x109)}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x363c80(0x150),'warehouse_category':_0x363c80(0x17b)}},{'$group':{'_id':_0x363c80(0x12b),'name':{'$first':_0x363c80(0x12b)}}},{'$sort':{'name':0x1}}]),console['log']('stock_data',_0x35917c);if(_0x48ee56[0x0]['language']==_0x363c80(0x11d)){var _0x3f5d2b=users[_0x363c80(0x170)];console[_0x363c80(0x16c)](_0x3f5d2b);}else{if(_0x48ee56[0x0][_0x363c80(0x166)]==_0x363c80(0x105))var _0x3f5d2b=users[_0x363c80(0x105)];else{if(_0x48ee56[0x0][_0x363c80(0x166)]=='German')var _0x3f5d2b=users[_0x363c80(0x151)];else{if(_0x48ee56[0x0][_0x363c80(0x166)]==_0x363c80(0x13e))var _0x3f5d2b=users[_0x363c80(0x13e)];else{if(_0x48ee56[0x0][_0x363c80(0x166)]==_0x363c80(0x12d))var _0x3f5d2b=users[_0x363c80(0x12d)];else{if(_0x48ee56[0x0]['language']=='Portuguese\x20(BR)')var _0x3f5d2b=users[_0x363c80(0x113)];else{if(_0x48ee56[0x0]['language']==_0x363c80(0x152))var _0x3f5d2b=users['Chinese'];else{if(_0x48ee56[0x0]['language']==_0x363c80(0x168))var _0x3f5d2b=users['Arabic'];}}}}}}}_0x294790[_0x363c80(0x12c)](_0x363c80(0x164),{'success':_0x25671f[_0x363c80(0x14d)](_0x363c80(0x10b)),'errors':_0x25671f[_0x363c80(0x14d)](_0x363c80(0x178)),'role':_0x5354d9,'master_shop':_0x48ee56,'profile':_0xf72f34,'user':_0x51d80f,'stock':_0x35917c,'product':_0x5aab26,'language':_0x3f5d2b,'warehouse':warehouse_data});}catch(_0x1ebf7e){console[_0x363c80(0x16c)](_0x1ebf7e);}}),router[a0_0x1a7422(0x14a)](a0_0x1a7422(0x13f),auth,async(_0x4b069b,_0x437dce)=>{var _0x1c4295=a0_0x1a7422;try{const _0x1d0112=_0x4b069b['params']['id'];console[_0x1c4295(0x16c)](_0x1d0112);const _0x3d472e=await purchases_return[_0x1c4295(0x145)]({'invoice':_0x4b069b['body'][_0x1c4295(0x169)]});console[_0x1c4295(0x16c)](_0x1c4295(0x121),_0x3d472e);const _0xf3a62=await warehouse[_0x1c4295(0x145)]({'name':_0x3d472e[_0x1c4295(0x177)],'room':_0x3d472e[_0x1c4295(0x171)]});console['log'](_0x1c4295(0x154),_0xf3a62);const {invoice:_0x1ab36c,suppliers:_0x5622f6,date:_0x1bc2ea,warehouse_name:_0x13abd2,product_name:_0x59112e,purchase_quantity:_0x2d6e88,stocks:_0x486534,return_qty:_0x2a5c71,note:_0x56baf5,Room_name:_0x2af781,level:_0x516059,isle:_0x12e644,pallet:_0xd2a0ac,to_warehouse_name:_0x4cb77e,to_Room_name:_0x4be95f}=_0x4b069b[_0x1c4295(0x13b)];if(typeof _0x59112e==_0x1c4295(0x14e))var _0x2ad622=[_0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x139)]],_0x3a951e=[_0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x111)]],_0x22643c=[_0x4b069b[_0x1c4295(0x13b)]['stocks']],_0x359fc9=[_0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x104)]],_0x2c9e50=[_0x4b069b[_0x1c4295(0x13b)]['level']],_0x1c85b2=[_0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x136)]],_0xc95f77=[_0x4b069b[_0x1c4295(0x13b)]['pallet']],_0x29f61c=[_0x4b069b[_0x1c4295(0x13b)]['types']],_0x730b11=[_0x4b069b[_0x1c4295(0x13b)]['product_code_hide']],_0x18e4e0=[_0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x12a)]],_0x5bac95=[_0x4b069b[_0x1c4295(0x13b)]['secondary_code_hide']];else var _0x2ad622=[..._0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x139)]],_0x3a951e=[..._0x4b069b[_0x1c4295(0x13b)]['purchase_quantity']],_0x22643c=[..._0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x131)]],_0x359fc9=[..._0x4b069b['body'][_0x1c4295(0x104)]],_0x2c9e50=[..._0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x126)]],_0x1c85b2=[..._0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x136)]],_0xc95f77=[..._0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x135)]],_0x730b11=[..._0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x122)]],_0x18e4e0=[..._0x4b069b['body'][_0x1c4295(0x12a)]],_0x5bac95=[..._0x4b069b[_0x1c4295(0x13b)]['secondary_code_hide']],_0x29f61c=[..._0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x17e)]];const _0x46efe9=_0x2ad622[_0x1c4295(0x13a)](_0x59aa8d=>{return _0x59aa8d={'product_name':_0x59aa8d};});_0x3a951e[_0x1c4295(0x129)]((_0x11c294,_0xed43ef)=>{var _0x1f7a21=_0x1c4295;_0x46efe9[_0xed43ef][_0x1f7a21(0x111)]=_0x11c294;}),_0x22643c[_0x1c4295(0x129)]((_0x149e11,_0xd0acf)=>{_0x46efe9[_0xd0acf]['stock_quantity']=_0x149e11;}),_0x359fc9[_0x1c4295(0x129)]((_0x211752,_0x1339f9)=>{var _0x5f2124=_0x1c4295;_0x46efe9[_0x1339f9][_0x5f2124(0x104)]=_0x211752;}),_0x2c9e50[_0x1c4295(0x129)]((_0x197c41,_0x228dd1)=>{var _0x15aaec=_0x1c4295;_0x46efe9[_0x228dd1][_0x15aaec(0x137)]=_0x197c41;}),_0x1c85b2[_0x1c4295(0x129)]((_0x73d78c,_0x1d5c16)=>{var _0x58d14b=_0x1c4295;_0x46efe9[_0x1d5c16][_0x58d14b(0x130)]=_0x73d78c;}),_0xc95f77['forEach']((_0x270993,_0x5865ea)=>{var _0x43a05a=_0x1c4295;_0x46efe9[_0x5865ea][_0x43a05a(0x15e)]=_0x270993;}),_0x730b11[_0x1c4295(0x129)]((_0x416b5a,_0x5ac32b)=>{_0x46efe9[_0x5ac32b]['product_code']=_0x416b5a;}),_0x18e4e0[_0x1c4295(0x129)]((_0x180440,_0x499584)=>{var _0x2f7b18=_0x1c4295;_0x46efe9[_0x499584][_0x2f7b18(0x11e)]=_0x180440;}),_0x5bac95[_0x1c4295(0x129)]((_0x3a2b07,_0x41ab0b)=>{var _0x8b9b34=_0x1c4295;_0x46efe9[_0x41ab0b][_0x8b9b34(0x120)]=_0x3a2b07;}),_0x29f61c[_0x1c4295(0x129)]((_0x33047c,_0x28ff29)=>{var _0x2edc8b=_0x1c4295;_0x46efe9[_0x28ff29][_0x2edc8b(0x10c)]=_0x33047c;});var _0x10b863=0x0;_0x46efe9[_0x1c4295(0x129)](_0x3c8a69=>{var _0x2b6c24=_0x1c4295;console[_0x2b6c24(0x16c)](_0x2b6c24(0x159),_0x3c8a69),(parseInt(_0x3c8a69[_0x2b6c24(0x111)])<parseInt(_0x3c8a69[_0x2b6c24(0x104)])||parseInt(_0x3c8a69[_0x2b6c24(0x15b)])<parseInt(_0x3c8a69['return_qty'])||parseInt(_0x3c8a69[_0x2b6c24(0x104)])==0x0)&&_0x10b863++;});if(_0x10b863!=0x0)return _0x4b069b[_0x1c4295(0x14d)]('errors',_0x1c4295(0x142)),_0x437dce['redirect'](_0x1c4295(0x143));_0x3d472e['return_product']['forEach'](_0x3bf906=>{var _0x4b131d=_0x1c4295;const _0x40f2ee=_0xf3a62['product_details'][_0x4b131d(0x13a)](_0x57d0f9=>{var _0x1ce83b=_0x4b131d;_0x57d0f9['product_name']==_0x3bf906[_0x1ce83b(0x139)]&&_0x57d0f9[_0x1ce83b(0x15e)]==_0x3bf906[_0x1ce83b(0x15e)]&&_0x57d0f9[_0x1ce83b(0x10c)]==_0x3bf906[_0x1ce83b(0x10c)]&&_0x57d0f9[_0x1ce83b(0x130)]==_0x3bf906[_0x1ce83b(0x130)]&&_0x57d0f9[_0x1ce83b(0x137)]==_0x3bf906['bay']&&(_0x57d0f9[_0x1ce83b(0x155)]=parseInt(_0x57d0f9[_0x1ce83b(0x155)])+parseInt(_0x3bf906[_0x1ce83b(0x104)]));});}),console['log'](_0x1c4295(0x154),_0xf3a62),await _0xf3a62['save'](),_0x3d472e[_0x1c4295(0x169)]=_0x1ab36c,_0x3d472e[_0x1c4295(0x133)]=_0x5622f6,_0x3d472e[_0x1c4295(0x157)]=_0x1bc2ea,_0x3d472e[_0x1c4295(0x17d)]=_0x13abd2,_0x3d472e[_0x1c4295(0x165)]=_0x46efe9,_0x3d472e['note']=_0x56baf5,_0x3d472e[_0x1c4295(0x10d)]=_0x2af781,_0x3d472e['to_warehouse_name']=_0x4cb77e,_0x3d472e[_0x1c4295(0x171)]=_0x4be95f;const _0x2fbeed=await _0x3d472e[_0x1c4295(0x125)](),_0x4f37c4=await purchases_return['findOne']({'invoice':_0x4b069b[_0x1c4295(0x13b)][_0x1c4295(0x169)]}),_0x567f16=await warehouse['findOne']({'name':_0x4b069b['body'][_0x1c4295(0x177)],'room':_0x4b069b[_0x1c4295(0x13b)]['to_Room_name']});_0x4f37c4[_0x1c4295(0x165)]['forEach'](_0x1cf71d=>{var _0x503360=_0x1c4295;_0x567f16['product_details'][_0x503360(0x13a)](_0x2cbf66=>{var _0x5a94e0=_0x503360;_0x2cbf66[_0x5a94e0(0x139)]==_0x1cf71d[_0x5a94e0(0x139)]&&_0x2cbf66[_0x5a94e0(0x135)]==_0x1cf71d[_0x5a94e0(0x135)]&&(_0x2cbf66[_0x5a94e0(0x155)]=parseInt(_0x2cbf66[_0x5a94e0(0x155)])-parseInt(_0x1cf71d[_0x5a94e0(0x104)]),console[_0x5a94e0(0x16c)]('product_details.return_qtyproduct_details.return_qty',_0x1cf71d[_0x5a94e0(0x104)]));});}),console['log'](_0x1c4295(0x146),_0x567f16),await _0x567f16[_0x1c4295(0x125)]();const _0x2020c2=await s_payment_data[_0x1c4295(0x145)]({'invoice':_0x4b069b['body'][_0x1c4295(0x169)],'reason':_0x1c4295(0x112)});await _0x2020c2[_0x1c4295(0x125)](),_0x4b069b[_0x1c4295(0x14d)](_0x1c4295(0x10b),'purchase\x20return\x20successfully'),_0x437dce[_0x1c4295(0x158)]('/purchases_return/view');}catch(_0x507f91){console[_0x1c4295(0x16c)](_0x507f91),_0x437dce[_0x1c4295(0x13c)](0xc8)[_0x1c4295(0x175)]({'message':_0x507f91[_0x1c4295(0x176)]});}}),router[a0_0x1a7422(0x179)](a0_0x1a7422(0x16a),auth,async(_0x5b8110,_0x1b12b3)=>{var _0x192e7b=a0_0x1a7422;try{const {username:_0x1547e7,email:_0x321b3d,role:_0x331ed9}=_0x5b8110[_0x192e7b(0x127)],_0x5c7e6c=_0x5b8110[_0x192e7b(0x127)],_0x3570ee=await profile[_0x192e7b(0x145)]({'email':_0x5c7e6c[_0x192e7b(0x144)]}),_0x7c9cf4=await master_shop[_0x192e7b(0x10f)]();console['log'](_0x192e7b(0x107),_0x7c9cf4);const _0x2e1212=_0x5b8110[_0x192e7b(0x15c)]['id'],_0x5c8ed7=await purchases_return[_0x192e7b(0x115)](_0x2e1212);console[_0x192e7b(0x16c)](_0x5c8ed7);const _0x23b627=await suppliers['findOne']({'name':_0x5c8ed7['suppliers']});console['log'](_0x23b627);if(_0x7c9cf4[0x0][_0x192e7b(0x166)]==_0x192e7b(0x11d)){var _0x5023a3=users[_0x192e7b(0x170)];console[_0x192e7b(0x16c)](_0x5023a3);}else{if(_0x7c9cf4[0x0][_0x192e7b(0x166)]==_0x192e7b(0x105))var _0x5023a3=users[_0x192e7b(0x105)];else{if(_0x7c9cf4[0x0][_0x192e7b(0x166)]=='German')var _0x5023a3=users[_0x192e7b(0x151)];else{if(_0x7c9cf4[0x0][_0x192e7b(0x166)]==_0x192e7b(0x13e))var _0x5023a3=users[_0x192e7b(0x13e)];else{if(_0x7c9cf4[0x0]['language']=='French')var _0x5023a3=users[_0x192e7b(0x12d)];else{if(_0x7c9cf4[0x0][_0x192e7b(0x166)]==_0x192e7b(0x16d))var _0x5023a3=users[_0x192e7b(0x113)];else{if(_0x7c9cf4[0x0][_0x192e7b(0x166)]==_0x192e7b(0x152))var _0x5023a3=users[_0x192e7b(0x152)];else{if(_0x7c9cf4[0x0][_0x192e7b(0x166)]==_0x192e7b(0x168))var _0x5023a3=users['Arabic'];}}}}}}}_0x1b12b3[_0x192e7b(0x12c)](_0x192e7b(0x140),{'success':_0x5b8110[_0x192e7b(0x14d)](_0x192e7b(0x10b)),'errors':_0x5b8110[_0x192e7b(0x14d)](_0x192e7b(0x178)),'role':_0x5c7e6c,'profile':_0x3570ee,'master_shop':_0x7c9cf4,'supplier':_0x23b627,'purchase':_0x5c8ed7,'language':_0x5023a3});}catch(_0x105dab){console[_0x192e7b(0x16c)](_0x105dab);}}),router[a0_0x1a7422(0x14a)]('/receive_payment/:id',auth,async(_0x3153ce,_0x263183)=>{var _0x56c1bd=a0_0x1a7422;try{const _0x42dd77=_0x3153ce[_0x56c1bd(0x15c)]['id'],{invoice:_0x5c399c,suppliers:_0x448481,receivable_amount:_0x1dd951,received_amount:_0x3e7519}=_0x3153ce[_0x56c1bd(0x13b)],_0x48c77f=await purchases_return['findById'](_0x42dd77);console['log'](_0x48c77f);var _0x2d6570=_0x1dd951-_0x3e7519;console[_0x56c1bd(0x16c)](_0x3e7519),_0x48c77f[_0x56c1bd(0x14f)]=parseFloat(_0x3e7519)+parseFloat(_0x48c77f[_0x56c1bd(0x14f)]),_0x48c77f[_0x56c1bd(0x132)]=_0x2d6570,console[_0x56c1bd(0x16c)](_0x48c77f);const _0x25c93a=await _0x48c77f[_0x56c1bd(0x125)](),_0x5b500f=await s_payment_data[_0x56c1bd(0x145)]({'invoice':_0x3153ce[_0x56c1bd(0x13b)][_0x56c1bd(0x169)],'reason':_0x56c1bd(0x112)});_0x5b500f['amount']=_0x2d6570,await _0x5b500f[_0x56c1bd(0x125)]();let _0x14d513=new Date(),_0x167134=('0'+_0x14d513[_0x56c1bd(0x114)]())[_0x56c1bd(0x11c)](-0x2),_0xd6fc71=('0'+(_0x14d513[_0x56c1bd(0x12f)]()+0x1))[_0x56c1bd(0x11c)](-0x2),_0x1d1528=_0x14d513['getFullYear'](),_0x449f2c=_0x1d1528+'-'+_0xd6fc71+'-'+_0x167134;const _0x169be0=new suppliers_payment({'invoice':_0x5c399c,'date':_0x1d1528+'-'+_0xd6fc71+'-'+_0x167134,'suppliers':_0x448481,'reason':_0x56c1bd(0x10a),'amount':_0x3e7519}),_0x3ac811=await _0x169be0['save']();_0x3153ce[_0x56c1bd(0x14d)](_0x56c1bd(0x10b),_0x56c1bd(0x147)),_0x263183[_0x56c1bd(0x158)](_0x56c1bd(0x15f));}catch(_0x1a2610){console[_0x56c1bd(0x16c)](_0x1a2610);}}),module[a0_0x1a7422(0x148)]=router;