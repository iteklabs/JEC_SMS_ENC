function a0_0x2d81(){var _0x2da0d4=['find','purchases_return','16937115DCuyoA','$product_details','French','$warehouse_name','return_product','6801111EVIiNn','../middleware/auth','map','to_Room_name','$return_product.total','received','5248302HckIqB','purchase\x20return\x20successfully','78323EimKvV','20qfWMju','to_room','secondary_code','$due_amount','$product_details.product_stock','bay','$product_details.floorlevel','pallet','Spanish','stock_quantity','get','Purchase\x20Return','exports','getFullYear','Received\x20For\x20Purchase\x20Return','5pbnNhV','492KAoRvN','return_purchase_edit','post','types','back','stocks','body','$return_product.product_name','aggregate','findOne','$name','purchase_quantity','floorlevel','product_code_hide','$total_amount','express','$invoice','/purchases_return/view','amount','Arabic','1743528OlrFIJ','flash','render','getDate','$supplier_docs.email','room','slice','product_stock','warehouse_name','email','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','success','$_id','type','forEach','../public/language/languages.json','name','suppliers','../models/all_models','foreach\x20newproduct','$discount','errors','primary_code_hide','to_warehouse_name','date','437679DVayPf','$product_details.type','Hindi','payment\x20successfull','bin','redirect','language','9049UQkEvF','user','$suppliers','$return_product.price','$date','German','Portuguese','/receive_payment/:id','/view/:id','invoice','product_code','$return_product.return_qty','Portuguese\x20(BR)','stock_data','old_warehouse_data','json','Return\x20Goods','$supplier_docs.address','$product_details.product_code','save','$product_details.storage','message','$supplier_docs.mobile','/view','product_details','English','log','$received','return_qty','$return_product','findById','status','secondary_code_hide','$product_details._id','4PubzLV','Chinese','Arabic\x20(ae)','master','supplier_docs','params','$product_details.rack','note','36xCiGSu','40eLMuaZ','$supplier_docs','isle','product_name','$product_details.product_name'];a0_0x2d81=function(){return _0x2da0d4;};return a0_0x2d81();}var a0_0x4c5ef9=a0_0x4970;function a0_0x4970(_0x1aad9a,_0x5d0b85){var _0x2d810c=a0_0x2d81();return a0_0x4970=function(_0x4970be,_0x15a7a3){_0x4970be=_0x4970be-0x64;var _0x2376f0=_0x2d810c[_0x4970be];return _0x2376f0;},a0_0x4970(_0x1aad9a,_0x5d0b85);}(function(_0xd4d259,_0x42076e){var _0x4e4718=a0_0x4970,_0x11fcca=_0xd4d259();while(!![]){try{var _0x5e62ac=-parseInt(_0x4e4718(0xda))/0x1*(-parseInt(_0x4e4718(0x80))/0x2)+parseInt(_0x4e4718(0x93))/0x3*(parseInt(_0x4e4718(0x78))/0x4)+-parseInt(_0x4e4718(0xa5))/0x5*(-parseInt(_0x4e4718(0xba))/0x6)+parseInt(_0x4e4718(0x95))/0x7*(-parseInt(_0x4e4718(0x81))/0x8)+-parseInt(_0x4e4718(0x8d))/0x9*(parseInt(_0x4e4718(0x96))/0xa)+-parseInt(_0x4e4718(0xd3))/0xb*(-parseInt(_0x4e4718(0xa6))/0xc)+-parseInt(_0x4e4718(0x88))/0xd;if(_0x5e62ac===_0x42076e)break;else _0x11fcca['push'](_0x11fcca['shift']());}catch(_0x787b8f){_0x11fcca['push'](_0x11fcca['shift']());}}}(a0_0x2d81,0xeb5ff));const express=require(a0_0x4c5ef9(0xb5)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x4c5ef9(0xcc)),auth=require(a0_0x4c5ef9(0x8e)),users=require(a0_0x4c5ef9(0xc9));router[a0_0x4c5ef9(0xa0)](a0_0x4c5ef9(0x6d),auth,async(_0x11f17,_0x45946f)=>{var _0x1a5e8a=a0_0x4c5ef9;try{const {username:_0x497a6e,email:_0x370b61,role:_0x30da09}=_0x11f17[_0x1a5e8a(0xdb)],_0x478259=_0x11f17[_0x1a5e8a(0xdb)],_0x565eb1=await profile['findOne']({'email':_0x478259[_0x1a5e8a(0xc3)]}),_0x1195c2=await master_shop['find']();console[_0x1a5e8a(0x70)](_0x1a5e8a(0x7b),_0x1195c2);const _0x363649=await purchases_return['aggregate']([{'$lookup':{'from':_0x1a5e8a(0xcb),'localField':_0x1a5e8a(0xcb),'foreignField':_0x1a5e8a(0xca),'as':_0x1a5e8a(0x7c)}},{'$unwind':_0x1a5e8a(0x73)},{'$unwind':_0x1a5e8a(0x82)},{'$group':{'_id':_0x1a5e8a(0xc6),'invoice':{'$first':_0x1a5e8a(0xb6)},'date':{'$first':_0x1a5e8a(0xde)},'suppliers':{'$first':_0x1a5e8a(0xdc)},'warehouse_name':{'$first':_0x1a5e8a(0x8b)},'product_name':{'$first':_0x1a5e8a(0xad)},'return_qty':{'$first':_0x1a5e8a(0xe5)},'price':{'$first':_0x1a5e8a(0xdd)},'total':{'$sum':_0x1a5e8a(0x91)},'note':{'$first':'$note'},'total_amount':{'$first':_0x1a5e8a(0xb4)},'discount':{'$first':_0x1a5e8a(0xce)},'receivable':{'$first':'$receivable'},'received':{'$first':_0x1a5e8a(0x71)},'due_amount':{'$first':_0x1a5e8a(0x99)},'mobile':{'$first':_0x1a5e8a(0x6c)},'email':{'$first':_0x1a5e8a(0xbe)},'address':{'$first':_0x1a5e8a(0x67)},'return_sum_qty':{'$sum':_0x1a5e8a(0xe5)}}}]);console[_0x1a5e8a(0x70)](_0x363649);if(_0x1195c2[0x0][_0x1a5e8a(0xd9)]=='English\x20(US)'){var _0x5b5470=users[_0x1a5e8a(0x6f)];console[_0x1a5e8a(0x70)](_0x5b5470);}else{if(_0x1195c2[0x0][_0x1a5e8a(0xd9)]==_0x1a5e8a(0xd5))var _0x5b5470=users[_0x1a5e8a(0xd5)];else{if(_0x1195c2[0x0][_0x1a5e8a(0xd9)]==_0x1a5e8a(0xdf))var _0x5b5470=users['German'];else{if(_0x1195c2[0x0][_0x1a5e8a(0xd9)]=='Spanish')var _0x5b5470=users[_0x1a5e8a(0x9e)];else{if(_0x1195c2[0x0]['language']==_0x1a5e8a(0x8a))var _0x5b5470=users[_0x1a5e8a(0x8a)];else{if(_0x1195c2[0x0][_0x1a5e8a(0xd9)]==_0x1a5e8a(0xe6))var _0x5b5470=users[_0x1a5e8a(0xe0)];else{if(_0x1195c2[0x0][_0x1a5e8a(0xd9)]==_0x1a5e8a(0x79))var _0x5b5470=users[_0x1a5e8a(0x79)];else{if(_0x1195c2[0x0][_0x1a5e8a(0xd9)]==_0x1a5e8a(0x7a))var _0x5b5470=users['Arabic'];}}}}}}}_0x45946f[_0x1a5e8a(0xbc)](_0x1a5e8a(0x87),{'success':_0x11f17[_0x1a5e8a(0xbb)](_0x1a5e8a(0xc5)),'errors':_0x11f17['flash'](_0x1a5e8a(0xcf)),'role':_0x478259,'profile':_0x565eb1,'master_shop':_0x1195c2,'user':_0x363649,'language':_0x5b5470});}catch(_0x2ac77e){console[_0x1a5e8a(0x70)](_0x2ac77e);}}),router['get'](a0_0x4c5ef9(0xe2),auth,async(_0x2989c2,_0x276794)=>{var _0x50d9b9=a0_0x4c5ef9;try{const {username:_0x241318,email:_0x1a8236,role:_0x2eb170}=_0x2989c2[_0x50d9b9(0xdb)],_0x3bab6d=_0x2989c2[_0x50d9b9(0xdb)],_0x504788=await profile[_0x50d9b9(0xaf)]({'email':_0x3bab6d[_0x50d9b9(0xc3)]}),_0x3d98cd=await product[_0x50d9b9(0x86)]({}),_0x194b38=await master_shop['find']();console[_0x50d9b9(0x70)]('master',_0x194b38),console[_0x50d9b9(0x70)](_0x2989c2[_0x50d9b9(0xac)]);const _0x4adf67=_0x2989c2[_0x50d9b9(0x7d)]['id'],_0x2ac71c=await purchases_return[_0x50d9b9(0x74)](_0x4adf67);console[_0x50d9b9(0x70)](_0x2ac71c);const _0x2092aa=await warehouse[_0x50d9b9(0xae)]([{'$match':{'name':_0x2ac71c[_0x50d9b9(0xc2)],'room':_0x2ac71c['room']}},{'$unwind':_0x50d9b9(0x89)},{'$group':{'_id':_0x50d9b9(0x77),'name':{'$first':_0x50d9b9(0x85)},'product_stock':{'$first':_0x50d9b9(0x9a)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x50d9b9(0xd4)},'floorlevel':{'$first':_0x50d9b9(0x9c)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x50d9b9(0x68)},'storage':{'$first':_0x50d9b9(0x6a)},'rack':{'$first':_0x50d9b9(0x7e)}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x50d9b9(0x66),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':'$name','name':{'$first':_0x50d9b9(0xb0)}}},{'$sort':{'name':0x1}}]),console[_0x50d9b9(0x70)](_0x50d9b9(0xe7),_0x2092aa);if(_0x194b38[0x0]['language']=='English\x20(US)'){var _0x4764fd=users[_0x50d9b9(0x6f)];console[_0x50d9b9(0x70)](_0x4764fd);}else{if(_0x194b38[0x0][_0x50d9b9(0xd9)]==_0x50d9b9(0xd5))var _0x4764fd=users['Hindi'];else{if(_0x194b38[0x0][_0x50d9b9(0xd9)]==_0x50d9b9(0xdf))var _0x4764fd=users['German'];else{if(_0x194b38[0x0][_0x50d9b9(0xd9)]==_0x50d9b9(0x9e))var _0x4764fd=users['Spanish'];else{if(_0x194b38[0x0]['language']==_0x50d9b9(0x8a))var _0x4764fd=users[_0x50d9b9(0x8a)];else{if(_0x194b38[0x0][_0x50d9b9(0xd9)]==_0x50d9b9(0xe6))var _0x4764fd=users[_0x50d9b9(0xe0)];else{if(_0x194b38[0x0][_0x50d9b9(0xd9)]==_0x50d9b9(0x79))var _0x4764fd=users['Chinese'];else{if(_0x194b38[0x0][_0x50d9b9(0xd9)]==_0x50d9b9(0x7a))var _0x4764fd=users[_0x50d9b9(0xb9)];}}}}}}}_0x276794[_0x50d9b9(0xbc)](_0x50d9b9(0xa7),{'success':_0x2989c2[_0x50d9b9(0xbb)](_0x50d9b9(0xc5)),'errors':_0x2989c2['flash'](_0x50d9b9(0xcf)),'role':_0x3bab6d,'master_shop':_0x194b38,'profile':_0x504788,'user':_0x2ac71c,'stock':_0x2092aa,'product':_0x3d98cd,'language':_0x4764fd,'warehouse':warehouse_data});}catch(_0x577fda){console[_0x50d9b9(0x70)](_0x577fda);}}),router[a0_0x4c5ef9(0xa8)]('/view/:id',auth,async(_0x3e8b16,_0x2c8663)=>{var _0x17c8d5=a0_0x4c5ef9;try{const _0x3e3a3b=_0x3e8b16[_0x17c8d5(0x7d)]['id'];console[_0x17c8d5(0x70)](_0x3e3a3b);const _0x46764e=await purchases_return[_0x17c8d5(0xaf)]({'invoice':_0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0xe3)]});console[_0x17c8d5(0x70)]('old_data',_0x46764e);const _0x24fc12=await warehouse[_0x17c8d5(0xaf)]({'name':_0x46764e[_0x17c8d5(0xd1)],'room':_0x46764e[_0x17c8d5(0x97)]});console['log'](_0x17c8d5(0x64),_0x24fc12);const {invoice:_0x5d1476,suppliers:_0x4b033c,date:_0x4f20b4,warehouse_name:_0x2c99bf,product_name:_0x37b578,purchase_quantity:_0x1cb685,stocks:_0x27db0c,return_qty:_0x373e29,note:_0x1963d0,Room_name:_0x2a09d2,level:_0x4a5e14,isle:_0x3d714d,pallet:_0x2c0dc2,to_warehouse_name:_0x843a75,to_Room_name:_0x3a9622}=_0x3e8b16[_0x17c8d5(0xac)];if(typeof _0x37b578=='string')var _0x27ca2a=[_0x3e8b16['body']['product_name']],_0xc31fcd=[_0x3e8b16[_0x17c8d5(0xac)]['purchase_quantity']],_0x4f194e=[_0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0xab)]],_0x2857d7=[_0x3e8b16['body'][_0x17c8d5(0x72)]],_0x22909d=[_0x3e8b16[_0x17c8d5(0xac)]['level']],_0x5bcb34=[_0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0x83)]],_0x1488ed=[_0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0x9d)]],_0x51f7ea=[_0x3e8b16['body']['types']],_0x50f09d=[_0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0xb3)]],_0x31d1ee=[_0x3e8b16['body'][_0x17c8d5(0xd0)]],_0xddb11c=[_0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0x76)]];else var _0x27ca2a=[..._0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0x84)]],_0xc31fcd=[..._0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0xb1)]],_0x4f194e=[..._0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0xab)]],_0x2857d7=[..._0x3e8b16[_0x17c8d5(0xac)]['return_qty']],_0x22909d=[..._0x3e8b16['body']['level']],_0x5bcb34=[..._0x3e8b16['body'][_0x17c8d5(0x83)]],_0x1488ed=[..._0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0x9d)]],_0x50f09d=[..._0x3e8b16['body'][_0x17c8d5(0xb3)]],_0x31d1ee=[..._0x3e8b16['body'][_0x17c8d5(0xd0)]],_0xddb11c=[..._0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0x76)]],_0x51f7ea=[..._0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0xa9)]];const _0x245de7=_0x27ca2a[_0x17c8d5(0x8f)](_0x222584=>{return _0x222584={'product_name':_0x222584};});_0xc31fcd[_0x17c8d5(0xc8)]((_0x40f4f7,_0x2ee02b)=>{var _0x34d480=_0x17c8d5;_0x245de7[_0x2ee02b][_0x34d480(0xb1)]=_0x40f4f7;}),_0x4f194e[_0x17c8d5(0xc8)]((_0x6d353a,_0x10e65c)=>{var _0x3e2c96=_0x17c8d5;_0x245de7[_0x10e65c][_0x3e2c96(0x9f)]=_0x6d353a;}),_0x2857d7[_0x17c8d5(0xc8)]((_0x47b94b,_0x2a656e)=>{var _0x5d1cc2=_0x17c8d5;_0x245de7[_0x2a656e][_0x5d1cc2(0x72)]=_0x47b94b;}),_0x22909d[_0x17c8d5(0xc8)]((_0x96c744,_0x3f222f)=>{var _0xc2afa7=_0x17c8d5;_0x245de7[_0x3f222f][_0xc2afa7(0x9b)]=_0x96c744;}),_0x5bcb34[_0x17c8d5(0xc8)]((_0x55aa15,_0x126087)=>{var _0x1ed949=_0x17c8d5;_0x245de7[_0x126087][_0x1ed949(0xd7)]=_0x55aa15;}),_0x1488ed[_0x17c8d5(0xc8)]((_0x2b1710,_0x4eb88c)=>{_0x245de7[_0x4eb88c]['floorlevel']=_0x2b1710;}),_0x50f09d[_0x17c8d5(0xc8)]((_0x4c47b6,_0x3a5419)=>{var _0x4ad25b=_0x17c8d5;_0x245de7[_0x3a5419][_0x4ad25b(0xe4)]=_0x4c47b6;}),_0x31d1ee[_0x17c8d5(0xc8)]((_0x5444c2,_0x3e4d44)=>{_0x245de7[_0x3e4d44]['primary_code']=_0x5444c2;}),_0xddb11c[_0x17c8d5(0xc8)]((_0x3f5380,_0x273e9d)=>{var _0x3b3590=_0x17c8d5;_0x245de7[_0x273e9d][_0x3b3590(0x98)]=_0x3f5380;}),_0x51f7ea[_0x17c8d5(0xc8)]((_0x4d40f5,_0x18b6de)=>{var _0x5c43cf=_0x17c8d5;_0x245de7[_0x18b6de][_0x5c43cf(0xc7)]=_0x4d40f5;});var _0x3fbd3b=0x0;_0x245de7[_0x17c8d5(0xc8)](_0x5bce14=>{var _0x4c33c2=_0x17c8d5;console[_0x4c33c2(0x70)](_0x4c33c2(0xcd),_0x5bce14),(parseInt(_0x5bce14[_0x4c33c2(0xb1)])<parseInt(_0x5bce14[_0x4c33c2(0x72)])||parseInt(_0x5bce14[_0x4c33c2(0x9f)])<parseInt(_0x5bce14[_0x4c33c2(0x72)])||parseInt(_0x5bce14[_0x4c33c2(0x72)])==0x0)&&_0x3fbd3b++;});if(_0x3fbd3b!=0x0)return _0x3e8b16['flash'](_0x17c8d5(0xcf),_0x17c8d5(0xc4)),_0x2c8663['redirect'](_0x17c8d5(0xaa));_0x46764e['return_product'][_0x17c8d5(0xc8)](_0x16e1f9=>{var _0xa1dff6=_0x17c8d5;const _0x57c2b7=_0x24fc12[_0xa1dff6(0x6e)][_0xa1dff6(0x8f)](_0x40f6b6=>{var _0x46c8b8=_0xa1dff6;_0x40f6b6[_0x46c8b8(0x84)]==_0x16e1f9['product_name']&&_0x40f6b6['floorlevel']==_0x16e1f9[_0x46c8b8(0xb2)]&&_0x40f6b6[_0x46c8b8(0xc7)]==_0x16e1f9[_0x46c8b8(0xc7)]&&_0x40f6b6['bin']==_0x16e1f9[_0x46c8b8(0xd7)]&&_0x40f6b6[_0x46c8b8(0x9b)]==_0x16e1f9['bay']&&(_0x40f6b6[_0x46c8b8(0xc1)]=parseInt(_0x40f6b6[_0x46c8b8(0xc1)])+parseInt(_0x16e1f9[_0x46c8b8(0x72)]));});}),console['log'](_0x17c8d5(0x64),_0x24fc12),await _0x24fc12[_0x17c8d5(0x69)](),_0x46764e['invoice']=_0x5d1476,_0x46764e[_0x17c8d5(0xcb)]=_0x4b033c,_0x46764e[_0x17c8d5(0xd2)]=_0x4f20b4,_0x46764e[_0x17c8d5(0xc2)]=_0x2c99bf,_0x46764e[_0x17c8d5(0x8c)]=_0x245de7,_0x46764e[_0x17c8d5(0x7f)]=_0x1963d0,_0x46764e[_0x17c8d5(0xbf)]=_0x2a09d2,_0x46764e['to_warehouse_name']=_0x843a75,_0x46764e[_0x17c8d5(0x97)]=_0x3a9622;const _0x448a81=await _0x46764e[_0x17c8d5(0x69)](),_0x177cd1=await purchases_return[_0x17c8d5(0xaf)]({'invoice':_0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0xe3)]}),_0x349ad0=await warehouse[_0x17c8d5(0xaf)]({'name':_0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0xd1)],'room':_0x3e8b16[_0x17c8d5(0xac)][_0x17c8d5(0x90)]});_0x177cd1[_0x17c8d5(0x8c)][_0x17c8d5(0xc8)](_0x2c8455=>{var _0x3e39d0=_0x17c8d5;_0x349ad0[_0x3e39d0(0x6e)][_0x3e39d0(0x8f)](_0x624d76=>{var _0x6fc7a9=_0x3e39d0;_0x624d76[_0x6fc7a9(0x84)]==_0x2c8455[_0x6fc7a9(0x84)]&&_0x624d76['pallet']==_0x2c8455[_0x6fc7a9(0x9d)]&&(_0x624d76[_0x6fc7a9(0xc1)]=parseInt(_0x624d76[_0x6fc7a9(0xc1)])-parseInt(_0x2c8455[_0x6fc7a9(0x72)]),console['log']('product_details.return_qtyproduct_details.return_qty',_0x2c8455[_0x6fc7a9(0x72)]));});}),console[_0x17c8d5(0x70)]('final',_0x349ad0),await _0x349ad0[_0x17c8d5(0x69)]();const _0x3890e7=await s_payment_data[_0x17c8d5(0xaf)]({'invoice':_0x3e8b16[_0x17c8d5(0xac)]['invoice'],'reason':_0x17c8d5(0xa1)});await _0x3890e7[_0x17c8d5(0x69)](),_0x3e8b16[_0x17c8d5(0xbb)](_0x17c8d5(0xc5),_0x17c8d5(0x94)),_0x2c8663[_0x17c8d5(0xd8)](_0x17c8d5(0xb7));}catch(_0x24cfe8){console['log'](_0x24cfe8),_0x2c8663[_0x17c8d5(0x75)](0xc8)[_0x17c8d5(0x65)]({'message':_0x24cfe8[_0x17c8d5(0x6b)]});}}),router[a0_0x4c5ef9(0xa0)]('/invoice/:id',auth,async(_0x13ea6e,_0x3e3a7c)=>{var _0x139cec=a0_0x4c5ef9;try{const {username:_0x5a75c8,email:_0x3d516f,role:_0xd0c5ff}=_0x13ea6e[_0x139cec(0xdb)],_0x41e84e=_0x13ea6e[_0x139cec(0xdb)],_0x40b4b4=await profile[_0x139cec(0xaf)]({'email':_0x41e84e[_0x139cec(0xc3)]}),_0x3426a1=await master_shop[_0x139cec(0x86)]();console[_0x139cec(0x70)](_0x139cec(0x7b),_0x3426a1);const _0x50ca55=_0x13ea6e[_0x139cec(0x7d)]['id'],_0x2b6ef4=await purchases_return[_0x139cec(0x74)](_0x50ca55);console[_0x139cec(0x70)](_0x2b6ef4);const _0x3cdab1=await suppliers[_0x139cec(0xaf)]({'name':_0x2b6ef4['suppliers']});console[_0x139cec(0x70)](_0x3cdab1);if(_0x3426a1[0x0][_0x139cec(0xd9)]=='English\x20(US)'){var _0x146e87=users['English'];console['log'](_0x146e87);}else{if(_0x3426a1[0x0][_0x139cec(0xd9)]==_0x139cec(0xd5))var _0x146e87=users[_0x139cec(0xd5)];else{if(_0x3426a1[0x0][_0x139cec(0xd9)]==_0x139cec(0xdf))var _0x146e87=users[_0x139cec(0xdf)];else{if(_0x3426a1[0x0]['language']=='Spanish')var _0x146e87=users[_0x139cec(0x9e)];else{if(_0x3426a1[0x0][_0x139cec(0xd9)]=='French')var _0x146e87=users[_0x139cec(0x8a)];else{if(_0x3426a1[0x0]['language']=='Portuguese\x20(BR)')var _0x146e87=users['Portuguese'];else{if(_0x3426a1[0x0][_0x139cec(0xd9)]==_0x139cec(0x79))var _0x146e87=users[_0x139cec(0x79)];else{if(_0x3426a1[0x0][_0x139cec(0xd9)]==_0x139cec(0x7a))var _0x146e87=users[_0x139cec(0xb9)];}}}}}}}_0x3e3a7c['render']('return_purchase_invoice',{'success':_0x13ea6e[_0x139cec(0xbb)](_0x139cec(0xc5)),'errors':_0x13ea6e[_0x139cec(0xbb)](_0x139cec(0xcf)),'role':_0x41e84e,'profile':_0x40b4b4,'master_shop':_0x3426a1,'supplier':_0x3cdab1,'purchase':_0x2b6ef4,'language':_0x146e87});}catch(_0x530f1d){console[_0x139cec(0x70)](_0x530f1d);}}),router[a0_0x4c5ef9(0xa8)](a0_0x4c5ef9(0xe1),auth,async(_0x1a9004,_0xa25e3c)=>{var _0x19362b=a0_0x4c5ef9;try{const _0xa79eed=_0x1a9004[_0x19362b(0x7d)]['id'],{invoice:_0x32ad23,suppliers:_0x299361,receivable_amount:_0x1b08f6,received_amount:_0x207bd3}=_0x1a9004[_0x19362b(0xac)],_0x4aca8a=await purchases_return[_0x19362b(0x74)](_0xa79eed);console[_0x19362b(0x70)](_0x4aca8a);var _0x146fef=_0x1b08f6-_0x207bd3;console[_0x19362b(0x70)](_0x207bd3),_0x4aca8a[_0x19362b(0x92)]=parseFloat(_0x207bd3)+parseFloat(_0x4aca8a['received']),_0x4aca8a['due_amount']=_0x146fef,console[_0x19362b(0x70)](_0x4aca8a);const _0x646828=await _0x4aca8a['save'](),_0x24e7bd=await s_payment_data[_0x19362b(0xaf)]({'invoice':_0x1a9004[_0x19362b(0xac)][_0x19362b(0xe3)],'reason':_0x19362b(0xa1)});_0x24e7bd[_0x19362b(0xb8)]=_0x146fef,await _0x24e7bd['save']();let _0x4e5fe7=new Date(),_0x3eac82=('0'+_0x4e5fe7[_0x19362b(0xbd)]())[_0x19362b(0xc0)](-0x2),_0x5cfe2d=('0'+(_0x4e5fe7['getMonth']()+0x1))[_0x19362b(0xc0)](-0x2),_0x2ce4cc=_0x4e5fe7[_0x19362b(0xa3)](),_0x5a7a10=_0x2ce4cc+'-'+_0x5cfe2d+'-'+_0x3eac82;const _0x1ef5ce=new suppliers_payment({'invoice':_0x32ad23,'date':_0x2ce4cc+'-'+_0x5cfe2d+'-'+_0x3eac82,'suppliers':_0x299361,'reason':_0x19362b(0xa4),'amount':_0x207bd3}),_0x4e6027=await _0x1ef5ce['save']();_0x1a9004['flash'](_0x19362b(0xc5),_0x19362b(0xd6)),_0xa25e3c[_0x19362b(0xd8)](_0x19362b(0xb7));}catch(_0x362169){console[_0x19362b(0x70)](_0x362169);}}),module[a0_0x4c5ef9(0xa2)]=router;