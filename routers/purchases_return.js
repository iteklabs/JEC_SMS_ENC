var a0_0x89012c=a0_0x160b;function a0_0x24b4(){var _0x334d2c=['purchase\x20return\x20successfully','$date','findById','due_amount','$product_details.secondary_code','Hindi','old_warehouse_data','$return_product.product_name','Arabic\x20(ae)','to_warehouse_name','$name','Router','flash','isle','return_product','$received','type','product_details.return_qtyproduct_details.return_qty','36UpRNGh','bin','render','to_Room_name','3447384WxKWCz','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','884190sjuVXK','purchase_quantity','warehouse_name','received','$product_details.floorlevel','back','redirect','English\x20(US)','397998GmLFux','$product_details.product_name','stock_quantity','get','$invoice','1423669qQWaIa','email','post','express','$return_product.return_qty','findOne','floorlevel','return_purchase_invoice','log','68196biqXoR','user','$supplier_docs','6VAXzZg','Raw\x20Materials','aggregate','final','/invoice/:id','product_details','find','7185046CUyvZb','getMonth','foreach\x20newproduct','$product_details.storage','Chinese','/view/:id','body','map','stock_data','product_code_hide','English','amount','product_name','json','getDate','$return_product','stocks','$product_details._id','$total_amount','invoice','pallet','Arabic','level','$product_details','$product_details.bin','Received\x20For\x20Purchase\x20Return','/purchases_return/view','285ygeXJZ','old_data','$product_details.product_code','$product_details.rack','German','Spanish','$warehouse_name','success','suppliers','params','slice','$note','save','$supplier_docs.email','forEach','$product_details.bay','49RpzKpk','../models/all_models','260NHTpMq','997479BqvjRn','language','types','master','Portuguese\x20(BR)','purchases_return','errors','$discount','$return_product.price','payment\x20successfull','message','status','return_qty','French','$receivable','note','getFullYear','to_room','bay','product_code','primary_code_hide','room','Purchase\x20Return','secondary_code_hide','Portuguese','/receive_payment/:id','$suppliers','product_stock','/view','$_id'];a0_0x24b4=function(){return _0x334d2c;};return a0_0x24b4();}(function(_0x5186ea,_0x2a99b0){var _0xe2fd7b=a0_0x160b,_0x9000ed=_0x5186ea();while(!![]){try{var _0x381f2f=parseInt(_0xe2fd7b(0x15d))/0x1+parseInt(_0xe2fd7b(0x169))/0x2*(-parseInt(_0xe2fd7b(0x19e))/0x3)+-parseInt(_0xe2fd7b(0x166))/0x4*(-parseInt(_0xe2fd7b(0x18b))/0x5)+-parseInt(_0xe2fd7b(0x150))/0x6*(parseInt(_0xe2fd7b(0x19b))/0x7)+-parseInt(_0xe2fd7b(0x14e))/0x8+parseInt(_0xe2fd7b(0x158))/0x9*(-parseInt(_0xe2fd7b(0x19d))/0xa)+parseInt(_0xe2fd7b(0x170))/0xb*(parseInt(_0xe2fd7b(0x14a))/0xc);if(_0x381f2f===_0x2a99b0)break;else _0x9000ed['push'](_0x9000ed['shift']());}catch(_0x1ff10f){_0x9000ed['push'](_0x9000ed['shift']());}}}(a0_0x24b4,0xb5f4b));const express=require(a0_0x89012c(0x160)),app=express(),router=express[a0_0x89012c(0x143)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x89012c(0x19c)),auth=require('../middleware/auth'),users=require('../public/language/languages.json');function a0_0x160b(_0x683613,_0x2e662f){var _0x24b487=a0_0x24b4();return a0_0x160b=function(_0x160b47,_0x513b67){_0x160b47=_0x160b47-0x12e;var _0x391b86=_0x24b487[_0x160b47];return _0x391b86;},a0_0x160b(_0x683613,_0x2e662f);}router[a0_0x89012c(0x15b)](a0_0x89012c(0x136),auth,async(_0x4a9b68,_0xaa9c1f)=>{var _0xf2569a=a0_0x89012c;try{const {username:_0xa376b8,email:_0x13beeb,role:_0x1de2cd}=_0x4a9b68[_0xf2569a(0x167)],_0x3fd151=_0x4a9b68[_0xf2569a(0x167)],_0x41ce1b=await profile[_0xf2569a(0x162)]({'email':_0x3fd151[_0xf2569a(0x15e)]}),_0x23e026=await master_shop[_0xf2569a(0x16f)]();console['log'](_0xf2569a(0x1a1),_0x23e026);const _0x44160d=await purchases_return[_0xf2569a(0x16b)]([{'$lookup':{'from':_0xf2569a(0x193),'localField':_0xf2569a(0x193),'foreignField':'name','as':'supplier_docs'}},{'$unwind':_0xf2569a(0x17f)},{'$unwind':_0xf2569a(0x168)},{'$group':{'_id':_0xf2569a(0x137),'invoice':{'$first':_0xf2569a(0x15c)},'date':{'$first':_0xf2569a(0x139)},'suppliers':{'$first':_0xf2569a(0x134)},'warehouse_name':{'$first':_0xf2569a(0x191)},'product_name':{'$first':_0xf2569a(0x13f)},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':_0xf2569a(0x1a6)},'total':{'$sum':'$return_product.total'},'note':{'$first':_0xf2569a(0x196)},'total_amount':{'$first':_0xf2569a(0x182)},'discount':{'$first':_0xf2569a(0x1a5)},'receivable':{'$first':_0xf2569a(0x1ac)},'received':{'$first':_0xf2569a(0x147)},'due_amount':{'$first':'$due_amount'},'mobile':{'$first':'$supplier_docs.mobile'},'email':{'$first':_0xf2569a(0x198)},'address':{'$first':'$supplier_docs.address'},'return_sum_qty':{'$sum':_0xf2569a(0x161)}}}]);console[_0xf2569a(0x165)](_0x44160d);if(_0x23e026[0x0][_0xf2569a(0x19f)]==_0xf2569a(0x157)){var _0xf0dfa1=users['English'];console[_0xf2569a(0x165)](_0xf0dfa1);}else{if(_0x23e026[0x0]['language']==_0xf2569a(0x13d))var _0xf0dfa1=users[_0xf2569a(0x13d)];else{if(_0x23e026[0x0][_0xf2569a(0x19f)]==_0xf2569a(0x18f))var _0xf0dfa1=users[_0xf2569a(0x18f)];else{if(_0x23e026[0x0]['language']==_0xf2569a(0x190))var _0xf0dfa1=users[_0xf2569a(0x190)];else{if(_0x23e026[0x0][_0xf2569a(0x19f)]==_0xf2569a(0x1ab))var _0xf0dfa1=users['French'];else{if(_0x23e026[0x0][_0xf2569a(0x19f)]=='Portuguese\x20(BR)')var _0xf0dfa1=users[_0xf2569a(0x132)];else{if(_0x23e026[0x0]['language']==_0xf2569a(0x174))var _0xf0dfa1=users[_0xf2569a(0x174)];else{if(_0x23e026[0x0]['language']==_0xf2569a(0x140))var _0xf0dfa1=users[_0xf2569a(0x185)];}}}}}}}_0xaa9c1f[_0xf2569a(0x14c)](_0xf2569a(0x1a3),{'success':_0x4a9b68[_0xf2569a(0x144)](_0xf2569a(0x192)),'errors':_0x4a9b68[_0xf2569a(0x144)](_0xf2569a(0x1a4)),'role':_0x3fd151,'profile':_0x41ce1b,'master_shop':_0x23e026,'user':_0x44160d,'language':_0xf0dfa1});}catch(_0x4d20e1){console['log'](_0x4d20e1);}}),router[a0_0x89012c(0x15b)]('/view/:id',auth,async(_0x2a63ef,_0x591298)=>{var _0x1eb7da=a0_0x89012c;try{const {username:_0xeb21b6,email:_0x83b4b,role:_0x49cf68}=_0x2a63ef[_0x1eb7da(0x167)],_0x425427=_0x2a63ef['user'],_0x12cd15=await profile[_0x1eb7da(0x162)]({'email':_0x425427[_0x1eb7da(0x15e)]}),_0x4e30c5=await product[_0x1eb7da(0x16f)]({}),_0x2b2831=await master_shop['find']();console[_0x1eb7da(0x165)](_0x1eb7da(0x1a1),_0x2b2831),console[_0x1eb7da(0x165)](_0x2a63ef[_0x1eb7da(0x176)]);const _0x464de0=_0x2a63ef[_0x1eb7da(0x194)]['id'],_0x24ed07=await purchases_return['findById'](_0x464de0);console[_0x1eb7da(0x165)](_0x24ed07);const _0x343786=await warehouse[_0x1eb7da(0x16b)]([{'$match':{'name':_0x24ed07[_0x1eb7da(0x152)],'room':_0x24ed07[_0x1eb7da(0x12f)]}},{'$unwind':_0x1eb7da(0x187)},{'$group':{'_id':_0x1eb7da(0x181),'name':{'$first':_0x1eb7da(0x159)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x1eb7da(0x19a)},'bin':{'$first':_0x1eb7da(0x188)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x1eb7da(0x154)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x1eb7da(0x13c)},'product_code':{'$first':_0x1eb7da(0x18d)},'storage':{'$first':_0x1eb7da(0x173)},'rack':{'$first':_0x1eb7da(0x18e)}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':'Return\x20Goods','warehouse_category':_0x1eb7da(0x16a)}},{'$group':{'_id':_0x1eb7da(0x142),'name':{'$first':_0x1eb7da(0x142)}}},{'$sort':{'name':0x1}}]),console[_0x1eb7da(0x165)](_0x1eb7da(0x178),_0x343786);if(_0x2b2831[0x0][_0x1eb7da(0x19f)]==_0x1eb7da(0x157)){var _0xe0bf78=users[_0x1eb7da(0x17a)];console[_0x1eb7da(0x165)](_0xe0bf78);}else{if(_0x2b2831[0x0][_0x1eb7da(0x19f)]==_0x1eb7da(0x13d))var _0xe0bf78=users['Hindi'];else{if(_0x2b2831[0x0][_0x1eb7da(0x19f)]==_0x1eb7da(0x18f))var _0xe0bf78=users[_0x1eb7da(0x18f)];else{if(_0x2b2831[0x0][_0x1eb7da(0x19f)]=='Spanish')var _0xe0bf78=users[_0x1eb7da(0x190)];else{if(_0x2b2831[0x0][_0x1eb7da(0x19f)]=='French')var _0xe0bf78=users[_0x1eb7da(0x1ab)];else{if(_0x2b2831[0x0][_0x1eb7da(0x19f)]==_0x1eb7da(0x1a2))var _0xe0bf78=users[_0x1eb7da(0x132)];else{if(_0x2b2831[0x0][_0x1eb7da(0x19f)]==_0x1eb7da(0x174))var _0xe0bf78=users[_0x1eb7da(0x174)];else{if(_0x2b2831[0x0][_0x1eb7da(0x19f)]==_0x1eb7da(0x140))var _0xe0bf78=users[_0x1eb7da(0x185)];}}}}}}}_0x591298[_0x1eb7da(0x14c)]('return_purchase_edit',{'success':_0x2a63ef[_0x1eb7da(0x144)]('success'),'errors':_0x2a63ef[_0x1eb7da(0x144)](_0x1eb7da(0x1a4)),'role':_0x425427,'master_shop':_0x2b2831,'profile':_0x12cd15,'user':_0x24ed07,'stock':_0x343786,'product':_0x4e30c5,'language':_0xe0bf78,'warehouse':warehouse_data});}catch(_0x3857c1){console[_0x1eb7da(0x165)](_0x3857c1);}}),router[a0_0x89012c(0x15f)](a0_0x89012c(0x175),auth,async(_0xed25b8,_0x11dd35)=>{var _0x498a96=a0_0x89012c;try{const _0x2b094b=_0xed25b8[_0x498a96(0x194)]['id'];console[_0x498a96(0x165)](_0x2b094b);const _0x250c93=await purchases_return['findOne']({'invoice':_0xed25b8['body']['invoice']});console['log'](_0x498a96(0x18c),_0x250c93);const _0xd7f5c2=await warehouse[_0x498a96(0x162)]({'name':_0x250c93['to_warehouse_name'],'room':_0x250c93[_0x498a96(0x1af)]});console[_0x498a96(0x165)](_0x498a96(0x13e),_0xd7f5c2);const {invoice:_0x3bf329,suppliers:_0x18a099,date:_0x486ec,warehouse_name:_0x310bcb,product_name:_0x548d19,purchase_quantity:_0x41e865,stocks:_0x95e36c,return_qty:_0x5b8614,note:_0x555ff0,Room_name:_0x42882b,level:_0x236e7e,isle:_0x48a400,pallet:_0x350edd,to_warehouse_name:_0x2232f2,to_Room_name:_0x560c8c}=_0xed25b8[_0x498a96(0x176)];if(typeof _0x548d19=='string')var _0x1d4d3a=[_0xed25b8[_0x498a96(0x176)][_0x498a96(0x17c)]],_0x14f970=[_0xed25b8[_0x498a96(0x176)][_0x498a96(0x151)]],_0x5e95d9=[_0xed25b8[_0x498a96(0x176)][_0x498a96(0x180)]],_0x3df539=[_0xed25b8[_0x498a96(0x176)][_0x498a96(0x1aa)]],_0x53f5c0=[_0xed25b8[_0x498a96(0x176)][_0x498a96(0x186)]],_0x21bef4=[_0xed25b8[_0x498a96(0x176)]['isle']],_0x17a8a2=[_0xed25b8[_0x498a96(0x176)][_0x498a96(0x184)]],_0xad2d5d=[_0xed25b8[_0x498a96(0x176)][_0x498a96(0x1a0)]],_0x4a8296=[_0xed25b8[_0x498a96(0x176)][_0x498a96(0x179)]],_0x4d223d=[_0xed25b8['body'][_0x498a96(0x12e)]],_0x2409fd=[_0xed25b8[_0x498a96(0x176)][_0x498a96(0x131)]];else var _0x1d4d3a=[..._0xed25b8['body'][_0x498a96(0x17c)]],_0x14f970=[..._0xed25b8['body']['purchase_quantity']],_0x5e95d9=[..._0xed25b8[_0x498a96(0x176)][_0x498a96(0x180)]],_0x3df539=[..._0xed25b8[_0x498a96(0x176)][_0x498a96(0x1aa)]],_0x53f5c0=[..._0xed25b8[_0x498a96(0x176)]['level']],_0x21bef4=[..._0xed25b8[_0x498a96(0x176)][_0x498a96(0x145)]],_0x17a8a2=[..._0xed25b8['body'][_0x498a96(0x184)]],_0x4a8296=[..._0xed25b8[_0x498a96(0x176)][_0x498a96(0x179)]],_0x4d223d=[..._0xed25b8[_0x498a96(0x176)][_0x498a96(0x12e)]],_0x2409fd=[..._0xed25b8[_0x498a96(0x176)][_0x498a96(0x131)]],_0xad2d5d=[..._0xed25b8[_0x498a96(0x176)][_0x498a96(0x1a0)]];const _0x3fd853=_0x1d4d3a[_0x498a96(0x177)](_0x34564a=>{return _0x34564a={'product_name':_0x34564a};});_0x14f970[_0x498a96(0x199)]((_0x2d8c7d,_0x3b54c2)=>{var _0x81c8fb=_0x498a96;_0x3fd853[_0x3b54c2][_0x81c8fb(0x151)]=_0x2d8c7d;}),_0x5e95d9[_0x498a96(0x199)]((_0xaab986,_0x2b249d)=>{var _0x25e394=_0x498a96;_0x3fd853[_0x2b249d][_0x25e394(0x15a)]=_0xaab986;}),_0x3df539[_0x498a96(0x199)]((_0x5ad5f3,_0x3fbad6)=>{var _0xe10907=_0x498a96;_0x3fd853[_0x3fbad6][_0xe10907(0x1aa)]=_0x5ad5f3;}),_0x53f5c0[_0x498a96(0x199)]((_0x3bd022,_0x1c4548)=>{var _0x14121a=_0x498a96;_0x3fd853[_0x1c4548][_0x14121a(0x1b0)]=_0x3bd022;}),_0x21bef4[_0x498a96(0x199)]((_0x40e524,_0x6b60a)=>{var _0x139f58=_0x498a96;_0x3fd853[_0x6b60a][_0x139f58(0x14b)]=_0x40e524;}),_0x17a8a2[_0x498a96(0x199)]((_0x543d6c,_0x5cf53f)=>{var _0x957ddc=_0x498a96;_0x3fd853[_0x5cf53f][_0x957ddc(0x163)]=_0x543d6c;}),_0x4a8296[_0x498a96(0x199)]((_0x73884c,_0x4d5d6d)=>{var _0x2b1666=_0x498a96;_0x3fd853[_0x4d5d6d][_0x2b1666(0x1b1)]=_0x73884c;}),_0x4d223d['forEach']((_0x2846cb,_0x228644)=>{_0x3fd853[_0x228644]['primary_code']=_0x2846cb;}),_0x2409fd[_0x498a96(0x199)]((_0x511d12,_0x372553)=>{_0x3fd853[_0x372553]['secondary_code']=_0x511d12;}),_0xad2d5d[_0x498a96(0x199)]((_0x134390,_0x122d2f)=>{var _0x33def4=_0x498a96;_0x3fd853[_0x122d2f][_0x33def4(0x148)]=_0x134390;});var _0x1185ba=0x0;_0x3fd853[_0x498a96(0x199)](_0x5edebb=>{var _0x19d02f=_0x498a96;console['log'](_0x19d02f(0x172),_0x5edebb),(parseInt(_0x5edebb[_0x19d02f(0x151)])<parseInt(_0x5edebb[_0x19d02f(0x1aa)])||parseInt(_0x5edebb[_0x19d02f(0x15a)])<parseInt(_0x5edebb[_0x19d02f(0x1aa)])||parseInt(_0x5edebb['return_qty'])==0x0)&&_0x1185ba++;});if(_0x1185ba!=0x0)return _0xed25b8[_0x498a96(0x144)](_0x498a96(0x1a4),_0x498a96(0x14f)),_0x11dd35[_0x498a96(0x156)](_0x498a96(0x155));_0x250c93[_0x498a96(0x146)]['forEach'](_0x155071=>{var _0x29f19a=_0x498a96;const _0x37b44f=_0xd7f5c2['product_details'][_0x29f19a(0x177)](_0xd8a670=>{var _0x1c4fe7=_0x29f19a;_0xd8a670[_0x1c4fe7(0x17c)]==_0x155071[_0x1c4fe7(0x17c)]&&_0xd8a670[_0x1c4fe7(0x163)]==_0x155071['floorlevel']&&_0xd8a670[_0x1c4fe7(0x148)]==_0x155071[_0x1c4fe7(0x148)]&&_0xd8a670[_0x1c4fe7(0x14b)]==_0x155071[_0x1c4fe7(0x14b)]&&_0xd8a670[_0x1c4fe7(0x1b0)]==_0x155071[_0x1c4fe7(0x1b0)]&&(_0xd8a670[_0x1c4fe7(0x135)]=parseInt(_0xd8a670['product_stock'])+parseInt(_0x155071[_0x1c4fe7(0x1aa)]));});}),console[_0x498a96(0x165)](_0x498a96(0x13e),_0xd7f5c2),await _0xd7f5c2['save'](),_0x250c93['invoice']=_0x3bf329,_0x250c93[_0x498a96(0x193)]=_0x18a099,_0x250c93['date']=_0x486ec,_0x250c93['warehouse_name']=_0x310bcb,_0x250c93[_0x498a96(0x146)]=_0x3fd853,_0x250c93[_0x498a96(0x1ad)]=_0x555ff0,_0x250c93[_0x498a96(0x12f)]=_0x42882b,_0x250c93['to_warehouse_name']=_0x2232f2,_0x250c93['to_room']=_0x560c8c;const _0xfb6449=await _0x250c93[_0x498a96(0x197)](),_0x41d979=await purchases_return['findOne']({'invoice':_0xed25b8['body'][_0x498a96(0x183)]}),_0x3785c7=await warehouse[_0x498a96(0x162)]({'name':_0xed25b8[_0x498a96(0x176)][_0x498a96(0x141)],'room':_0xed25b8[_0x498a96(0x176)][_0x498a96(0x14d)]});_0x41d979[_0x498a96(0x146)][_0x498a96(0x199)](_0x520c29=>{var _0x169af1=_0x498a96;_0x3785c7[_0x169af1(0x16e)][_0x169af1(0x177)](_0x2bf606=>{var _0xe3e494=_0x169af1;_0x2bf606[_0xe3e494(0x17c)]==_0x520c29[_0xe3e494(0x17c)]&&_0x2bf606[_0xe3e494(0x184)]==_0x520c29['pallet']&&(_0x2bf606[_0xe3e494(0x135)]=parseInt(_0x2bf606['product_stock'])-parseInt(_0x520c29[_0xe3e494(0x1aa)]),console[_0xe3e494(0x165)](_0xe3e494(0x149),_0x520c29['return_qty']));});}),console[_0x498a96(0x165)](_0x498a96(0x16c),_0x3785c7),await _0x3785c7['save']();const _0x94fd4=await s_payment_data[_0x498a96(0x162)]({'invoice':_0xed25b8['body'][_0x498a96(0x183)],'reason':_0x498a96(0x130)});await _0x94fd4[_0x498a96(0x197)](),_0xed25b8['flash'](_0x498a96(0x192),_0x498a96(0x138)),_0x11dd35[_0x498a96(0x156)](_0x498a96(0x18a));}catch(_0x4a4d80){console[_0x498a96(0x165)](_0x4a4d80),_0x11dd35[_0x498a96(0x1a9)](0xc8)[_0x498a96(0x17d)]({'message':_0x4a4d80[_0x498a96(0x1a8)]});}}),router[a0_0x89012c(0x15b)](a0_0x89012c(0x16d),auth,async(_0x5b9218,_0x11fd66)=>{var _0x53db25=a0_0x89012c;try{const {username:_0x3950e2,email:_0x4371d5,role:_0x2eb85b}=_0x5b9218[_0x53db25(0x167)],_0x51f32b=_0x5b9218[_0x53db25(0x167)],_0x257eb1=await profile[_0x53db25(0x162)]({'email':_0x51f32b[_0x53db25(0x15e)]}),_0x3e25b4=await master_shop['find']();console[_0x53db25(0x165)](_0x53db25(0x1a1),_0x3e25b4);const _0x3e6263=_0x5b9218[_0x53db25(0x194)]['id'],_0x399629=await purchases_return['findById'](_0x3e6263);console[_0x53db25(0x165)](_0x399629);const _0xb7e668=await suppliers['findOne']({'name':_0x399629['suppliers']});console[_0x53db25(0x165)](_0xb7e668);if(_0x3e25b4[0x0]['language']==_0x53db25(0x157)){var _0x218263=users[_0x53db25(0x17a)];console['log'](_0x218263);}else{if(_0x3e25b4[0x0][_0x53db25(0x19f)]==_0x53db25(0x13d))var _0x218263=users[_0x53db25(0x13d)];else{if(_0x3e25b4[0x0][_0x53db25(0x19f)]==_0x53db25(0x18f))var _0x218263=users[_0x53db25(0x18f)];else{if(_0x3e25b4[0x0][_0x53db25(0x19f)]=='Spanish')var _0x218263=users[_0x53db25(0x190)];else{if(_0x3e25b4[0x0]['language']==_0x53db25(0x1ab))var _0x218263=users[_0x53db25(0x1ab)];else{if(_0x3e25b4[0x0][_0x53db25(0x19f)]==_0x53db25(0x1a2))var _0x218263=users[_0x53db25(0x132)];else{if(_0x3e25b4[0x0][_0x53db25(0x19f)]==_0x53db25(0x174))var _0x218263=users[_0x53db25(0x174)];else{if(_0x3e25b4[0x0][_0x53db25(0x19f)]=='Arabic\x20(ae)')var _0x218263=users[_0x53db25(0x185)];}}}}}}}_0x11fd66[_0x53db25(0x14c)](_0x53db25(0x164),{'success':_0x5b9218[_0x53db25(0x144)]('success'),'errors':_0x5b9218[_0x53db25(0x144)](_0x53db25(0x1a4)),'role':_0x51f32b,'profile':_0x257eb1,'master_shop':_0x3e25b4,'supplier':_0xb7e668,'purchase':_0x399629,'language':_0x218263});}catch(_0x3b9422){console[_0x53db25(0x165)](_0x3b9422);}}),router[a0_0x89012c(0x15f)](a0_0x89012c(0x133),auth,async(_0x1a9f1a,_0x1cb63b)=>{var _0x1c6c9d=a0_0x89012c;try{const _0x1c1d14=_0x1a9f1a[_0x1c6c9d(0x194)]['id'],{invoice:_0x2712a9,suppliers:_0x826157,receivable_amount:_0xd57a98,received_amount:_0x2cfb62}=_0x1a9f1a[_0x1c6c9d(0x176)],_0x44f727=await purchases_return[_0x1c6c9d(0x13a)](_0x1c1d14);console[_0x1c6c9d(0x165)](_0x44f727);var _0x4f1619=_0xd57a98-_0x2cfb62;console[_0x1c6c9d(0x165)](_0x2cfb62),_0x44f727['received']=parseFloat(_0x2cfb62)+parseFloat(_0x44f727[_0x1c6c9d(0x153)]),_0x44f727[_0x1c6c9d(0x13b)]=_0x4f1619,console['log'](_0x44f727);const _0x4ba449=await _0x44f727['save'](),_0x11b1ba=await s_payment_data[_0x1c6c9d(0x162)]({'invoice':_0x1a9f1a[_0x1c6c9d(0x176)][_0x1c6c9d(0x183)],'reason':'Purchase\x20Return'});_0x11b1ba[_0x1c6c9d(0x17b)]=_0x4f1619,await _0x11b1ba[_0x1c6c9d(0x197)]();let _0x548470=new Date(),_0x14e832=('0'+_0x548470[_0x1c6c9d(0x17e)]())[_0x1c6c9d(0x195)](-0x2),_0x34acd0=('0'+(_0x548470[_0x1c6c9d(0x171)]()+0x1))[_0x1c6c9d(0x195)](-0x2),_0x3b581d=_0x548470[_0x1c6c9d(0x1ae)](),_0x41fe22=_0x3b581d+'-'+_0x34acd0+'-'+_0x14e832;const _0x313776=new suppliers_payment({'invoice':_0x2712a9,'date':_0x3b581d+'-'+_0x34acd0+'-'+_0x14e832,'suppliers':_0x826157,'reason':_0x1c6c9d(0x189),'amount':_0x2cfb62}),_0x122055=await _0x313776[_0x1c6c9d(0x197)]();_0x1a9f1a[_0x1c6c9d(0x144)](_0x1c6c9d(0x192),_0x1c6c9d(0x1a7)),_0x1cb63b['redirect'](_0x1c6c9d(0x18a));}catch(_0x2b0311){console['log'](_0x2b0311);}}),module['exports']=router;