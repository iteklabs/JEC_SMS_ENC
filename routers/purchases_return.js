var a0_0x2cfb6d=a0_0x37b4;function a0_0x2672(){var _0x449e44=['stock_quantity','map','$note','$product_details.bin','product_name','Received\x20For\x20Purchase\x20Return','redirect','product_details','2202DqAEio','level','$name','suppliers','$suppliers','getDate','/receive_payment/:id','date','room','getMonth','log','$product_details.secondary_code','Arabic\x20(ae)','return_qty','$product_details._id','forEach','../public/language/languages.json','warehouse_name','/view/:id','to_warehouse_name','$return_product.return_qty','primary_code_hide','find','floorlevel','final','to_Room_name','Return\x20Goods','pallet','errors','primary_code','English','/purchases_return/view','$due_amount','7000UZusDt','findById','4928760LypyKc','master','old_warehouse_data','2049bOTLeK','purchase_quantity','French','type','$supplier_docs.address','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','secondary_code_hide','flash','$product_details.product_name','isle','2ssaJkA','aggregate','../models/all_models','json','stocks','return_product','product_stock','$_id','getFullYear','types','return_purchase_edit','$product_details.storage','bay','$total_amount','$product_details','payment\x20successfull','$product_details.floorlevel','purchases_return','$product_details.type','German','secondary_code','render','Spanish','$supplier_docs.email','success','string','foreach\x20newproduct','$date','701262MQbKzi','$warehouse_name','stock_data','Purchase\x20Return','Portuguese','$return_product.product_name','post','bin','name','$product_details.primary_code','language','English\x20(US)','save','4076919iHrzbL','body','express','get','return_purchase_invoice','invoice','amount','$product_details.product_stock','11560703BQeCuQ','$receivable','10535fQqwWb','user','product_code_hide','findOne','purchase\x20return\x20successfully','Hindi','$return_product','Chinese','email','params','exports','received','../middleware/auth','to_room','slice','product_code','back','Arabic','45110700gFwlJi','Portuguese\x20(BR)'];a0_0x2672=function(){return _0x449e44;};return a0_0x2672();}(function(_0x32b278,_0x2647ad){var _0x48e0cb=a0_0x37b4,_0x59b287=_0x32b278();while(!![]){try{var _0x14507b=-parseInt(_0x48e0cb(0x167))/0x1*(-parseInt(_0x48e0cb(0x104))/0x2)+parseInt(_0x48e0cb(0x15d))/0x3*(parseInt(_0x48e0cb(0x158))/0x4)+-parseInt(_0x48e0cb(0x11b))/0x5*(-parseInt(_0x48e0cb(0x137))/0x6)+parseInt(_0x48e0cb(0x119))/0x7+parseInt(_0x48e0cb(0x15a))/0x8+parseInt(_0x48e0cb(0x111))/0x9+-parseInt(_0x48e0cb(0x12d))/0xa;if(_0x14507b===_0x2647ad)break;else _0x59b287['push'](_0x59b287['shift']());}catch(_0x55947d){_0x59b287['push'](_0x59b287['shift']());}}}(a0_0x2672,0xd6ade));const express=require(a0_0x2cfb6d(0x113)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x2cfb6d(0x169)),auth=require(a0_0x2cfb6d(0x127)),users=require(a0_0x2cfb6d(0x147));function a0_0x37b4(_0x1976a2,_0x3df9f9){var _0x2672af=a0_0x2672();return a0_0x37b4=function(_0x37b48a,_0x421561){_0x37b48a=_0x37b48a-0x100;var _0x340e05=_0x2672af[_0x37b48a];return _0x340e05;},a0_0x37b4(_0x1976a2,_0x3df9f9);}router[a0_0x2cfb6d(0x114)]('/view',auth,async(_0x182d33,_0x827cad)=>{var _0x405d1a=a0_0x2cfb6d;try{const {username:_0x1b6e9a,email:_0x227a3a,role:_0x30acd1}=_0x182d33[_0x405d1a(0x11c)],_0x36e10b=_0x182d33[_0x405d1a(0x11c)],_0x30f4e1=await profile['findOne']({'email':_0x36e10b[_0x405d1a(0x123)]}),_0x5b2a3a=await master_shop[_0x405d1a(0x14d)]();console[_0x405d1a(0x141)]('master',_0x5b2a3a);const _0x24510a=await purchases_return[_0x405d1a(0x168)]([{'$lookup':{'from':'suppliers','localField':_0x405d1a(0x13a),'foreignField':_0x405d1a(0x10c),'as':'supplier_docs'}},{'$unwind':_0x405d1a(0x121)},{'$unwind':'$supplier_docs'},{'$group':{'_id':_0x405d1a(0x16e),'invoice':{'$first':'$invoice'},'date':{'$first':_0x405d1a(0x103)},'suppliers':{'$first':_0x405d1a(0x13b)},'warehouse_name':{'$first':_0x405d1a(0x105)},'product_name':{'$first':_0x405d1a(0x109)},'return_qty':{'$first':_0x405d1a(0x14b)},'price':{'$first':'$return_product.price'},'total':{'$sum':'$return_product.total'},'note':{'$first':_0x405d1a(0x131)},'total_amount':{'$first':_0x405d1a(0x174)},'discount':{'$first':'$discount'},'receivable':{'$first':_0x405d1a(0x11a)},'received':{'$first':'$received'},'due_amount':{'$first':_0x405d1a(0x157)},'mobile':{'$first':'$supplier_docs.mobile'},'email':{'$first':_0x405d1a(0x17e)},'address':{'$first':_0x405d1a(0x161)},'return_sum_qty':{'$sum':_0x405d1a(0x14b)}}}]);console[_0x405d1a(0x141)](_0x24510a);if(_0x5b2a3a[0x0][_0x405d1a(0x10e)]=='English\x20(US)'){var _0x4986cd=users[_0x405d1a(0x155)];console[_0x405d1a(0x141)](_0x4986cd);}else{if(_0x5b2a3a[0x0]['language']==_0x405d1a(0x120))var _0x4986cd=users['Hindi'];else{if(_0x5b2a3a[0x0][_0x405d1a(0x10e)]==_0x405d1a(0x17a))var _0x4986cd=users[_0x405d1a(0x17a)];else{if(_0x5b2a3a[0x0][_0x405d1a(0x10e)]==_0x405d1a(0x17d))var _0x4986cd=users[_0x405d1a(0x17d)];else{if(_0x5b2a3a[0x0][_0x405d1a(0x10e)]==_0x405d1a(0x15f))var _0x4986cd=users[_0x405d1a(0x15f)];else{if(_0x5b2a3a[0x0][_0x405d1a(0x10e)]==_0x405d1a(0x12e))var _0x4986cd=users[_0x405d1a(0x108)];else{if(_0x5b2a3a[0x0]['language']==_0x405d1a(0x122))var _0x4986cd=users[_0x405d1a(0x122)];else{if(_0x5b2a3a[0x0][_0x405d1a(0x10e)]==_0x405d1a(0x143))var _0x4986cd=users[_0x405d1a(0x12c)];}}}}}}}_0x827cad['render'](_0x405d1a(0x178),{'success':_0x182d33[_0x405d1a(0x164)](_0x405d1a(0x100)),'errors':_0x182d33[_0x405d1a(0x164)](_0x405d1a(0x153)),'role':_0x36e10b,'profile':_0x30f4e1,'master_shop':_0x5b2a3a,'user':_0x24510a,'language':_0x4986cd});}catch(_0x3ac967){console[_0x405d1a(0x141)](_0x3ac967);}}),router[a0_0x2cfb6d(0x114)](a0_0x2cfb6d(0x149),auth,async(_0x14696e,_0x455f32)=>{var _0x4b1b7f=a0_0x2cfb6d;try{const {username:_0x37823a,email:_0x1c58d2,role:_0x429219}=_0x14696e['user'],_0x5658fb=_0x14696e['user'],_0x1282bc=await profile[_0x4b1b7f(0x11e)]({'email':_0x5658fb['email']}),_0x29082a=await product[_0x4b1b7f(0x14d)]({}),_0x5d1151=await master_shop[_0x4b1b7f(0x14d)]();console['log'](_0x4b1b7f(0x15b),_0x5d1151),console[_0x4b1b7f(0x141)](_0x14696e[_0x4b1b7f(0x112)]);const _0x44204d=_0x14696e['params']['id'],_0x2644bd=await purchases_return[_0x4b1b7f(0x159)](_0x44204d);console[_0x4b1b7f(0x141)](_0x2644bd);const _0x2f9f2d=await warehouse['aggregate']([{'$match':{'name':_0x2644bd['warehouse_name'],'room':_0x2644bd[_0x4b1b7f(0x13f)]}},{'$unwind':_0x4b1b7f(0x175)},{'$group':{'_id':_0x4b1b7f(0x145),'name':{'$first':_0x4b1b7f(0x165)},'product_stock':{'$first':_0x4b1b7f(0x118)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x4b1b7f(0x132)},'type':{'$first':_0x4b1b7f(0x179)},'floorlevel':{'$first':_0x4b1b7f(0x177)},'primary_code':{'$first':_0x4b1b7f(0x10d)},'secondary_code':{'$first':_0x4b1b7f(0x142)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x4b1b7f(0x172)},'rack':{'$first':'$product_details.rack'}}}]);warehouse_data=await warehouse[_0x4b1b7f(0x168)]([{'$match':{'status':'Enabled','name':_0x4b1b7f(0x151),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x4b1b7f(0x139),'name':{'$first':_0x4b1b7f(0x139)}}},{'$sort':{'name':0x1}}]),console[_0x4b1b7f(0x141)](_0x4b1b7f(0x106),_0x2f9f2d);if(_0x5d1151[0x0][_0x4b1b7f(0x10e)]==_0x4b1b7f(0x10f)){var _0x4b9797=users[_0x4b1b7f(0x155)];console[_0x4b1b7f(0x141)](_0x4b9797);}else{if(_0x5d1151[0x0][_0x4b1b7f(0x10e)]==_0x4b1b7f(0x120))var _0x4b9797=users[_0x4b1b7f(0x120)];else{if(_0x5d1151[0x0][_0x4b1b7f(0x10e)]==_0x4b1b7f(0x17a))var _0x4b9797=users[_0x4b1b7f(0x17a)];else{if(_0x5d1151[0x0][_0x4b1b7f(0x10e)]==_0x4b1b7f(0x17d))var _0x4b9797=users[_0x4b1b7f(0x17d)];else{if(_0x5d1151[0x0][_0x4b1b7f(0x10e)]==_0x4b1b7f(0x15f))var _0x4b9797=users[_0x4b1b7f(0x15f)];else{if(_0x5d1151[0x0]['language']==_0x4b1b7f(0x12e))var _0x4b9797=users[_0x4b1b7f(0x108)];else{if(_0x5d1151[0x0][_0x4b1b7f(0x10e)]==_0x4b1b7f(0x122))var _0x4b9797=users[_0x4b1b7f(0x122)];else{if(_0x5d1151[0x0][_0x4b1b7f(0x10e)]==_0x4b1b7f(0x143))var _0x4b9797=users['Arabic'];}}}}}}}_0x455f32[_0x4b1b7f(0x17c)](_0x4b1b7f(0x171),{'success':_0x14696e[_0x4b1b7f(0x164)](_0x4b1b7f(0x100)),'errors':_0x14696e[_0x4b1b7f(0x164)](_0x4b1b7f(0x153)),'role':_0x5658fb,'master_shop':_0x5d1151,'profile':_0x1282bc,'user':_0x2644bd,'stock':_0x2f9f2d,'product':_0x29082a,'language':_0x4b9797,'warehouse':warehouse_data});}catch(_0x366e72){console[_0x4b1b7f(0x141)](_0x366e72);}}),router[a0_0x2cfb6d(0x10a)](a0_0x2cfb6d(0x149),auth,async(_0x32f963,_0x5f4b2a)=>{var _0x541827=a0_0x2cfb6d;try{const _0x131f64=_0x32f963['params']['id'];console['log'](_0x131f64);const _0x4f341a=await purchases_return[_0x541827(0x11e)]({'invoice':_0x32f963[_0x541827(0x112)][_0x541827(0x116)]});console['log']('old_data',_0x4f341a);const _0x322100=await warehouse['findOne']({'name':_0x4f341a[_0x541827(0x14a)],'room':_0x4f341a[_0x541827(0x128)]});console['log']('old_warehouse_data',_0x322100);const {invoice:_0x20c1ae,suppliers:_0x11c0d9,date:_0x2803c2,warehouse_name:_0x466335,product_name:_0x574690,purchase_quantity:_0x1a4e50,stocks:_0x18870a,return_qty:_0x195ad4,note:_0x31d50a,Room_name:_0x5713a9,level:_0x2100d2,isle:_0xe19c91,pallet:_0x1611f2,to_warehouse_name:_0x4bbd3f,to_Room_name:_0x12d1f4}=_0x32f963[_0x541827(0x112)];if(typeof _0x574690==_0x541827(0x101))var _0x2de70a=[_0x32f963[_0x541827(0x112)][_0x541827(0x133)]],_0x141c9b=[_0x32f963[_0x541827(0x112)][_0x541827(0x15e)]],_0x26bdb9=[_0x32f963[_0x541827(0x112)][_0x541827(0x16b)]],_0x383beb=[_0x32f963[_0x541827(0x112)][_0x541827(0x144)]],_0x2b7c0b=[_0x32f963['body'][_0x541827(0x138)]],_0x3630f0=[_0x32f963[_0x541827(0x112)][_0x541827(0x166)]],_0xf4b4ec=[_0x32f963[_0x541827(0x112)][_0x541827(0x152)]],_0x75efb4=[_0x32f963[_0x541827(0x112)]['types']],_0x31d1ef=[_0x32f963['body']['product_code_hide']],_0x239820=[_0x32f963[_0x541827(0x112)][_0x541827(0x14c)]],_0x43827a=[_0x32f963[_0x541827(0x112)][_0x541827(0x163)]];else var _0x2de70a=[..._0x32f963['body'][_0x541827(0x133)]],_0x141c9b=[..._0x32f963[_0x541827(0x112)][_0x541827(0x15e)]],_0x26bdb9=[..._0x32f963[_0x541827(0x112)]['stocks']],_0x383beb=[..._0x32f963[_0x541827(0x112)][_0x541827(0x144)]],_0x2b7c0b=[..._0x32f963[_0x541827(0x112)]['level']],_0x3630f0=[..._0x32f963[_0x541827(0x112)][_0x541827(0x166)]],_0xf4b4ec=[..._0x32f963['body'][_0x541827(0x152)]],_0x31d1ef=[..._0x32f963['body'][_0x541827(0x11d)]],_0x239820=[..._0x32f963[_0x541827(0x112)][_0x541827(0x14c)]],_0x43827a=[..._0x32f963[_0x541827(0x112)][_0x541827(0x163)]],_0x75efb4=[..._0x32f963[_0x541827(0x112)][_0x541827(0x170)]];const _0x1e51ba=_0x2de70a[_0x541827(0x130)](_0xe13c1=>{return _0xe13c1={'product_name':_0xe13c1};});_0x141c9b[_0x541827(0x146)]((_0x4ee2aa,_0x40f5e3)=>{var _0x216ccd=_0x541827;_0x1e51ba[_0x40f5e3][_0x216ccd(0x15e)]=_0x4ee2aa;}),_0x26bdb9[_0x541827(0x146)]((_0x194cc0,_0xccda2d)=>{var _0x56a629=_0x541827;_0x1e51ba[_0xccda2d][_0x56a629(0x12f)]=_0x194cc0;}),_0x383beb[_0x541827(0x146)]((_0x30bfa2,_0x23a2e2)=>{_0x1e51ba[_0x23a2e2]['return_qty']=_0x30bfa2;}),_0x2b7c0b[_0x541827(0x146)]((_0x5b0d49,_0x26de43)=>{var _0x5805f4=_0x541827;_0x1e51ba[_0x26de43][_0x5805f4(0x173)]=_0x5b0d49;}),_0x3630f0['forEach']((_0x11b22d,_0x5da045)=>{_0x1e51ba[_0x5da045]['bin']=_0x11b22d;}),_0xf4b4ec[_0x541827(0x146)]((_0xd59100,_0x4b518a)=>{var _0x33dbbd=_0x541827;_0x1e51ba[_0x4b518a][_0x33dbbd(0x14e)]=_0xd59100;}),_0x31d1ef[_0x541827(0x146)]((_0x356909,_0x2b216c)=>{var _0x7e540b=_0x541827;_0x1e51ba[_0x2b216c][_0x7e540b(0x12a)]=_0x356909;}),_0x239820['forEach']((_0x1bdaec,_0x4dc267)=>{var _0x4f93ad=_0x541827;_0x1e51ba[_0x4dc267][_0x4f93ad(0x154)]=_0x1bdaec;}),_0x43827a[_0x541827(0x146)]((_0x26f11d,_0x37035c)=>{var _0x41b51d=_0x541827;_0x1e51ba[_0x37035c][_0x41b51d(0x17b)]=_0x26f11d;}),_0x75efb4[_0x541827(0x146)]((_0x51b61b,_0x1edc48)=>{var _0x328bc8=_0x541827;_0x1e51ba[_0x1edc48][_0x328bc8(0x160)]=_0x51b61b;});var _0x5837d6=0x0;_0x1e51ba[_0x541827(0x146)](_0x4d1006=>{var _0x5e7e05=_0x541827;console[_0x5e7e05(0x141)](_0x5e7e05(0x102),_0x4d1006),(parseInt(_0x4d1006[_0x5e7e05(0x15e)])<parseInt(_0x4d1006['return_qty'])||parseInt(_0x4d1006[_0x5e7e05(0x12f)])<parseInt(_0x4d1006[_0x5e7e05(0x144)])||parseInt(_0x4d1006[_0x5e7e05(0x144)])==0x0)&&_0x5837d6++;});if(_0x5837d6!=0x0)return _0x32f963[_0x541827(0x164)](_0x541827(0x153),_0x541827(0x162)),_0x5f4b2a[_0x541827(0x135)](_0x541827(0x12b));_0x4f341a[_0x541827(0x16c)][_0x541827(0x146)](_0x70546a=>{var _0xbf96d7=_0x541827;const _0x6079a3=_0x322100[_0xbf96d7(0x136)][_0xbf96d7(0x130)](_0x43f5df=>{var _0x1f2463=_0xbf96d7;_0x43f5df[_0x1f2463(0x133)]==_0x70546a[_0x1f2463(0x133)]&&_0x43f5df['floorlevel']==_0x70546a[_0x1f2463(0x14e)]&&_0x43f5df[_0x1f2463(0x160)]==_0x70546a['type']&&_0x43f5df[_0x1f2463(0x10b)]==_0x70546a[_0x1f2463(0x10b)]&&_0x43f5df[_0x1f2463(0x173)]==_0x70546a[_0x1f2463(0x173)]&&(_0x43f5df['product_stock']=parseInt(_0x43f5df[_0x1f2463(0x16d)])+parseInt(_0x70546a[_0x1f2463(0x144)]));});}),console['log'](_0x541827(0x15c),_0x322100),await _0x322100[_0x541827(0x110)](),_0x4f341a[_0x541827(0x116)]=_0x20c1ae,_0x4f341a[_0x541827(0x13a)]=_0x11c0d9,_0x4f341a[_0x541827(0x13e)]=_0x2803c2,_0x4f341a[_0x541827(0x148)]=_0x466335,_0x4f341a[_0x541827(0x16c)]=_0x1e51ba,_0x4f341a['note']=_0x31d50a,_0x4f341a['room']=_0x5713a9,_0x4f341a['to_warehouse_name']=_0x4bbd3f,_0x4f341a['to_room']=_0x12d1f4;const _0x2a2373=await _0x4f341a[_0x541827(0x110)](),_0x4fae77=await purchases_return[_0x541827(0x11e)]({'invoice':_0x32f963[_0x541827(0x112)][_0x541827(0x116)]}),_0x717fde=await warehouse[_0x541827(0x11e)]({'name':_0x32f963[_0x541827(0x112)][_0x541827(0x14a)],'room':_0x32f963['body'][_0x541827(0x150)]});_0x4fae77['return_product'][_0x541827(0x146)](_0x9266bc=>{var _0xc7a7a8=_0x541827;_0x717fde['product_details'][_0xc7a7a8(0x130)](_0x69efc2=>{var _0xb26da4=_0xc7a7a8;_0x69efc2[_0xb26da4(0x133)]==_0x9266bc['product_name']&&_0x69efc2[_0xb26da4(0x152)]==_0x9266bc['pallet']&&(_0x69efc2[_0xb26da4(0x16d)]=parseInt(_0x69efc2[_0xb26da4(0x16d)])-parseInt(_0x9266bc[_0xb26da4(0x144)]),console[_0xb26da4(0x141)]('product_details.return_qtyproduct_details.return_qty',_0x9266bc[_0xb26da4(0x144)]));});}),console['log'](_0x541827(0x14f),_0x717fde),await _0x717fde['save']();const _0x386531=await s_payment_data[_0x541827(0x11e)]({'invoice':_0x32f963[_0x541827(0x112)][_0x541827(0x116)],'reason':_0x541827(0x107)});await _0x386531[_0x541827(0x110)](),_0x32f963[_0x541827(0x164)]('success',_0x541827(0x11f)),_0x5f4b2a[_0x541827(0x135)](_0x541827(0x156));}catch(_0xf99482){console[_0x541827(0x141)](_0xf99482),_0x5f4b2a['status'](0xc8)[_0x541827(0x16a)]({'message':_0xf99482['message']});}}),router['get']('/invoice/:id',auth,async(_0x3774b5,_0x2c23a8)=>{var _0x568d9c=a0_0x2cfb6d;try{const {username:_0x1459e5,email:_0x3a0f0c,role:_0x3dca5e}=_0x3774b5['user'],_0x10250f=_0x3774b5[_0x568d9c(0x11c)],_0x21e3c4=await profile['findOne']({'email':_0x10250f[_0x568d9c(0x123)]}),_0x2b9daf=await master_shop[_0x568d9c(0x14d)]();console[_0x568d9c(0x141)](_0x568d9c(0x15b),_0x2b9daf);const _0x4221cc=_0x3774b5[_0x568d9c(0x124)]['id'],_0x2ca3b8=await purchases_return['findById'](_0x4221cc);console[_0x568d9c(0x141)](_0x2ca3b8);const _0x58b064=await suppliers[_0x568d9c(0x11e)]({'name':_0x2ca3b8[_0x568d9c(0x13a)]});console[_0x568d9c(0x141)](_0x58b064);if(_0x2b9daf[0x0][_0x568d9c(0x10e)]==_0x568d9c(0x10f)){var _0x30a5be=users[_0x568d9c(0x155)];console[_0x568d9c(0x141)](_0x30a5be);}else{if(_0x2b9daf[0x0][_0x568d9c(0x10e)]=='Hindi')var _0x30a5be=users[_0x568d9c(0x120)];else{if(_0x2b9daf[0x0][_0x568d9c(0x10e)]==_0x568d9c(0x17a))var _0x30a5be=users[_0x568d9c(0x17a)];else{if(_0x2b9daf[0x0][_0x568d9c(0x10e)]=='Spanish')var _0x30a5be=users[_0x568d9c(0x17d)];else{if(_0x2b9daf[0x0][_0x568d9c(0x10e)]=='French')var _0x30a5be=users[_0x568d9c(0x15f)];else{if(_0x2b9daf[0x0][_0x568d9c(0x10e)]=='Portuguese\x20(BR)')var _0x30a5be=users[_0x568d9c(0x108)];else{if(_0x2b9daf[0x0]['language']==_0x568d9c(0x122))var _0x30a5be=users[_0x568d9c(0x122)];else{if(_0x2b9daf[0x0][_0x568d9c(0x10e)]==_0x568d9c(0x143))var _0x30a5be=users[_0x568d9c(0x12c)];}}}}}}}_0x2c23a8[_0x568d9c(0x17c)](_0x568d9c(0x115),{'success':_0x3774b5[_0x568d9c(0x164)]('success'),'errors':_0x3774b5[_0x568d9c(0x164)](_0x568d9c(0x153)),'role':_0x10250f,'profile':_0x21e3c4,'master_shop':_0x2b9daf,'supplier':_0x58b064,'purchase':_0x2ca3b8,'language':_0x30a5be});}catch(_0x498381){console[_0x568d9c(0x141)](_0x498381);}}),router[a0_0x2cfb6d(0x10a)](a0_0x2cfb6d(0x13d),auth,async(_0xd0bc85,_0x2933bb)=>{var _0x1f47fe=a0_0x2cfb6d;try{const _0x40efc7=_0xd0bc85[_0x1f47fe(0x124)]['id'],{invoice:_0x214e4c,suppliers:_0x2ef62e,receivable_amount:_0x5e2bcc,received_amount:_0x381402}=_0xd0bc85[_0x1f47fe(0x112)],_0x5d9bda=await purchases_return[_0x1f47fe(0x159)](_0x40efc7);console[_0x1f47fe(0x141)](_0x5d9bda);var _0x404915=_0x5e2bcc-_0x381402;console[_0x1f47fe(0x141)](_0x381402),_0x5d9bda[_0x1f47fe(0x126)]=parseFloat(_0x381402)+parseFloat(_0x5d9bda[_0x1f47fe(0x126)]),_0x5d9bda['due_amount']=_0x404915,console[_0x1f47fe(0x141)](_0x5d9bda);const _0x6b6355=await _0x5d9bda['save'](),_0xdee34a=await s_payment_data['findOne']({'invoice':_0xd0bc85[_0x1f47fe(0x112)][_0x1f47fe(0x116)],'reason':_0x1f47fe(0x107)});_0xdee34a[_0x1f47fe(0x117)]=_0x404915,await _0xdee34a[_0x1f47fe(0x110)]();let _0xf6a8f7=new Date(),_0xdd348f=('0'+_0xf6a8f7[_0x1f47fe(0x13c)]())['slice'](-0x2),_0x10a33a=('0'+(_0xf6a8f7[_0x1f47fe(0x140)]()+0x1))[_0x1f47fe(0x129)](-0x2),_0x11b022=_0xf6a8f7[_0x1f47fe(0x16f)](),_0x445e44=_0x11b022+'-'+_0x10a33a+'-'+_0xdd348f;const _0x277abd=new suppliers_payment({'invoice':_0x214e4c,'date':_0x11b022+'-'+_0x10a33a+'-'+_0xdd348f,'suppliers':_0x2ef62e,'reason':_0x1f47fe(0x134),'amount':_0x381402}),_0x27b70f=await _0x277abd['save']();_0xd0bc85[_0x1f47fe(0x164)](_0x1f47fe(0x100),_0x1f47fe(0x176)),_0x2933bb[_0x1f47fe(0x135)](_0x1f47fe(0x156));}catch(_0x3f68c9){console[_0x1f47fe(0x141)](_0x3f68c9);}}),module[a0_0x2cfb6d(0x125)]=router;