function a0_0x3882(){var _0x32e426=['$product_details.product_name','$total_amount','render','$note','to_Room_name','151101NeQuiv','json','isle','$due_amount','get','product_details.return_qtyproduct_details.return_qty','Spanish','email','$product_details.bin','product_details','English\x20(US)','Arabic\x20(ae)','redirect','name','foreach\x20newproduct','Hindi','getDate','bay','$received','return_qty','280LeJuXf','$name','type','$return_product.product_name','level','../middleware/auth','types','$product_details._id','German','floorlevel','$suppliers','/purchases_return/view','$product_details.product_stock','French','params','24qBKPQe','flash','log','amount','body','14232VjZuyk','Arabic','purchases_return','$receivable','to_warehouse_name','message','3188632beMCZf','$supplier_docs','warehouse_name','310712tFhRop','supplier_docs','English','return_purchase_invoice','invoice','$date','purchase\x20return\x20successfully','$_id','728ABfgyl','language','Portuguese\x20(BR)','$return_product','$return_product.price','Purchase\x20Return','stock_data','secondary_code','to_room','post','19692kjpTai','received','$product_details.primary_code','Router','success','old_warehouse_data','1777110lkMMdv','final','old_data','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','primary_code_hide','aggregate','date','$supplier_docs.mobile','payment\x20successfull','../public/language/languages.json','product_stock','1233471Wagnun','$product_details.rack','product_name','/receive_payment/:id','findOne','product_code_hide','product_code','secondary_code_hide','$product_details.type','$discount','$product_details.secondary_code','map','purchase_quantity','$product_details.storage','stock_quantity','$return_product.return_qty','$supplier_docs.address','master','status','back','bin','return_product','errors','findById','/invoice/:id','find','Received\x20For\x20Purchase\x20Return','express','Enabled','stocks','slice','user','save','due_amount','Chinese','getMonth','suppliers','/view/:id','$product_details','Portuguese','primary_code','forEach','$product_details.bay','note','pallet'];a0_0x3882=function(){return _0x32e426;};return a0_0x3882();}var a0_0x35fea3=a0_0x2741;function a0_0x2741(_0x5dfbb2,_0xf0c692){var _0x388294=a0_0x3882();return a0_0x2741=function(_0x27412c,_0x1951ab){_0x27412c=_0x27412c-0xe8;var _0x1cc5d5=_0x388294[_0x27412c];return _0x1cc5d5;},a0_0x2741(_0x5dfbb2,_0xf0c692);}(function(_0xabd80c,_0x450b2d){var _0x4cd2b0=a0_0x2741,_0x50a0e1=_0xabd80c();while(!![]){try{var _0x9bff34=-parseInt(_0x4cd2b0(0x125))/0x1*(parseInt(_0x4cd2b0(0x105))/0x2)+parseInt(_0x4cd2b0(0x136))/0x3+-parseInt(_0x4cd2b0(0x113))/0x4+parseInt(_0x4cd2b0(0x12b))/0x5+parseInt(_0x4cd2b0(0x10a))/0x6*(-parseInt(_0x4cd2b0(0x11b))/0x7)+-parseInt(_0x4cd2b0(0x110))/0x8+parseInt(_0x4cd2b0(0x168))/0x9*(parseInt(_0x4cd2b0(0xf6))/0xa);if(_0x9bff34===_0x450b2d)break;else _0x50a0e1['push'](_0x50a0e1['shift']());}catch(_0x181133){_0x50a0e1['push'](_0x50a0e1['shift']());}}}(a0_0x3882,0x43bae));const express=require(a0_0x35fea3(0x151)),app=express(),router=express[a0_0x35fea3(0x128)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x35fea3(0xfb)),users=require(a0_0x35fea3(0x134));router[a0_0x35fea3(0x16c)]('/view',auth,async(_0x587627,_0x782ee1)=>{var _0xa0a9b2=a0_0x35fea3;try{const {username:_0x30a194,email:_0x3d5ece,role:_0x3aad22}=_0x587627[_0xa0a9b2(0x155)],_0x78eb58=_0x587627[_0xa0a9b2(0x155)],_0x27e050=await profile['findOne']({'email':_0x78eb58[_0xa0a9b2(0xe9)]}),_0x2701c4=await master_shop['find']();console['log'](_0xa0a9b2(0x147),_0x2701c4);const _0x538d97=await purchases_return[_0xa0a9b2(0x130)]([{'$lookup':{'from':'suppliers','localField':'suppliers','foreignField':_0xa0a9b2(0xef),'as':_0xa0a9b2(0x114)}},{'$unwind':_0xa0a9b2(0x11e)},{'$unwind':_0xa0a9b2(0x111)},{'$group':{'_id':_0xa0a9b2(0x11a),'invoice':{'$first':'$invoice'},'date':{'$first':_0xa0a9b2(0x118)},'suppliers':{'$first':_0xa0a9b2(0x100)},'warehouse_name':{'$first':'$warehouse_name'},'product_name':{'$first':_0xa0a9b2(0xf9)},'return_qty':{'$first':_0xa0a9b2(0x145)},'price':{'$first':_0xa0a9b2(0x11f)},'total':{'$sum':'$return_product.total'},'note':{'$first':_0xa0a9b2(0x166)},'total_amount':{'$first':_0xa0a9b2(0x164)},'discount':{'$first':_0xa0a9b2(0x13f)},'receivable':{'$first':_0xa0a9b2(0x10d)},'received':{'$first':_0xa0a9b2(0xf4)},'due_amount':{'$first':_0xa0a9b2(0x16b)},'mobile':{'$first':_0xa0a9b2(0x132)},'email':{'$first':'$supplier_docs.email'},'address':{'$first':_0xa0a9b2(0x146)},'return_sum_qty':{'$sum':'$return_product.return_qty'}}}]);console['log'](_0x538d97);if(_0x2701c4[0x0]['language']==_0xa0a9b2(0xec)){var _0x17c93d=users['English'];console[_0xa0a9b2(0x107)](_0x17c93d);}else{if(_0x2701c4[0x0][_0xa0a9b2(0x11c)]=='Hindi')var _0x17c93d=users[_0xa0a9b2(0xf1)];else{if(_0x2701c4[0x0]['language']==_0xa0a9b2(0xfe))var _0x17c93d=users['German'];else{if(_0x2701c4[0x0][_0xa0a9b2(0x11c)]==_0xa0a9b2(0xe8))var _0x17c93d=users[_0xa0a9b2(0xe8)];else{if(_0x2701c4[0x0][_0xa0a9b2(0x11c)]==_0xa0a9b2(0x103))var _0x17c93d=users[_0xa0a9b2(0x103)];else{if(_0x2701c4[0x0][_0xa0a9b2(0x11c)]==_0xa0a9b2(0x11d))var _0x17c93d=users[_0xa0a9b2(0x15d)];else{if(_0x2701c4[0x0][_0xa0a9b2(0x11c)]==_0xa0a9b2(0x158))var _0x17c93d=users[_0xa0a9b2(0x158)];else{if(_0x2701c4[0x0][_0xa0a9b2(0x11c)]=='Arabic\x20(ae)')var _0x17c93d=users['Arabic'];}}}}}}}_0x782ee1[_0xa0a9b2(0x165)](_0xa0a9b2(0x10c),{'success':_0x587627['flash']('success'),'errors':_0x587627[_0xa0a9b2(0x106)](_0xa0a9b2(0x14c)),'role':_0x78eb58,'profile':_0x27e050,'master_shop':_0x2701c4,'user':_0x538d97,'language':_0x17c93d});}catch(_0x5a3998){console['log'](_0x5a3998);}}),router[a0_0x35fea3(0x16c)](a0_0x35fea3(0x15b),auth,async(_0x411107,_0x164bc9)=>{var _0x570b30=a0_0x35fea3;try{const {username:_0x3a595c,email:_0x5d99df,role:_0x486846}=_0x411107[_0x570b30(0x155)],_0x44139e=_0x411107[_0x570b30(0x155)],_0xb63f4=await profile[_0x570b30(0x13a)]({'email':_0x44139e[_0x570b30(0xe9)]}),_0x165b88=await product[_0x570b30(0x14f)]({}),_0x364724=await master_shop['find']();console[_0x570b30(0x107)](_0x570b30(0x147),_0x364724),console[_0x570b30(0x107)](_0x411107[_0x570b30(0x109)]);const _0x1f1574=_0x411107[_0x570b30(0x104)]['id'],_0xc635b3=await purchases_return[_0x570b30(0x14d)](_0x1f1574);console[_0x570b30(0x107)](_0xc635b3);const _0x4e8fb2=await warehouse[_0x570b30(0x130)]([{'$match':{'name':_0xc635b3[_0x570b30(0x112)],'room':_0xc635b3['room']}},{'$unwind':_0x570b30(0x15c)},{'$group':{'_id':_0x570b30(0xfd),'name':{'$first':_0x570b30(0x163)},'product_stock':{'$first':_0x570b30(0x102)},'bay':{'$first':_0x570b30(0x160)},'bin':{'$first':_0x570b30(0xea)},'type':{'$first':_0x570b30(0x13e)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x570b30(0x127)},'secondary_code':{'$first':_0x570b30(0x140)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x570b30(0x143)},'rack':{'$first':_0x570b30(0x137)}}}]);warehouse_data=await warehouse[_0x570b30(0x130)]([{'$match':{'status':_0x570b30(0x152),'name':'Return\x20Goods','warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x570b30(0xf7),'name':{'$first':_0x570b30(0xf7)}}},{'$sort':{'name':0x1}}]),console[_0x570b30(0x107)](_0x570b30(0x121),_0x4e8fb2);if(_0x364724[0x0][_0x570b30(0x11c)]==_0x570b30(0xec)){var _0x2d261f=users[_0x570b30(0x115)];console[_0x570b30(0x107)](_0x2d261f);}else{if(_0x364724[0x0][_0x570b30(0x11c)]==_0x570b30(0xf1))var _0x2d261f=users[_0x570b30(0xf1)];else{if(_0x364724[0x0][_0x570b30(0x11c)]==_0x570b30(0xfe))var _0x2d261f=users[_0x570b30(0xfe)];else{if(_0x364724[0x0][_0x570b30(0x11c)]=='Spanish')var _0x2d261f=users[_0x570b30(0xe8)];else{if(_0x364724[0x0][_0x570b30(0x11c)]==_0x570b30(0x103))var _0x2d261f=users[_0x570b30(0x103)];else{if(_0x364724[0x0][_0x570b30(0x11c)]==_0x570b30(0x11d))var _0x2d261f=users[_0x570b30(0x15d)];else{if(_0x364724[0x0]['language']=='Chinese')var _0x2d261f=users[_0x570b30(0x158)];else{if(_0x364724[0x0][_0x570b30(0x11c)]==_0x570b30(0xed))var _0x2d261f=users['Arabic'];}}}}}}}_0x164bc9[_0x570b30(0x165)]('return_purchase_edit',{'success':_0x411107[_0x570b30(0x106)](_0x570b30(0x129)),'errors':_0x411107['flash'](_0x570b30(0x14c)),'role':_0x44139e,'master_shop':_0x364724,'profile':_0xb63f4,'user':_0xc635b3,'stock':_0x4e8fb2,'product':_0x165b88,'language':_0x2d261f,'warehouse':warehouse_data});}catch(_0x1c73d2){console[_0x570b30(0x107)](_0x1c73d2);}}),router[a0_0x35fea3(0x124)]('/view/:id',auth,async(_0x4669dd,_0x916879)=>{var _0x458bf7=a0_0x35fea3;try{const _0x5a44fb=_0x4669dd[_0x458bf7(0x104)]['id'];console[_0x458bf7(0x107)](_0x5a44fb);const _0x41fc34=await purchases_return[_0x458bf7(0x13a)]({'invoice':_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0x117)]});console['log'](_0x458bf7(0x12d),_0x41fc34);const _0x113da4=await warehouse['findOne']({'name':_0x41fc34['to_warehouse_name'],'room':_0x41fc34[_0x458bf7(0x123)]});console[_0x458bf7(0x107)](_0x458bf7(0x12a),_0x113da4);const {invoice:_0x4eba16,suppliers:_0x4a20b0,date:_0x227256,warehouse_name:_0x398956,product_name:_0x4f3a52,purchase_quantity:_0x2c0e84,stocks:_0x2cec39,return_qty:_0x4e9923,note:_0x283beb,Room_name:_0x5b1f5b,level:_0x160bd9,isle:_0x4d47dc,pallet:_0x4f8389,to_warehouse_name:_0x920523,to_Room_name:_0x1af947}=_0x4669dd[_0x458bf7(0x109)];if(typeof _0x4f3a52=='string')var _0x47c4a2=[_0x4669dd['body']['product_name']],_0x2b3fa3=[_0x4669dd[_0x458bf7(0x109)]['purchase_quantity']],_0x234e46=[_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0x153)]],_0x1b6779=[_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0xf5)]],_0x59eb29=[_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0xfa)]],_0x5b84b9=[_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0x16a)]],_0x3e1c25=[_0x4669dd[_0x458bf7(0x109)]['pallet']],_0x24f64c=[_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0xfc)]],_0xfd286=[_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0x13b)]],_0x23ff9d=[_0x4669dd['body']['primary_code_hide']],_0x102286=[_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0x13d)]];else var _0x47c4a2=[..._0x4669dd[_0x458bf7(0x109)][_0x458bf7(0x138)]],_0x2b3fa3=[..._0x4669dd[_0x458bf7(0x109)][_0x458bf7(0x142)]],_0x234e46=[..._0x4669dd['body'][_0x458bf7(0x153)]],_0x1b6779=[..._0x4669dd[_0x458bf7(0x109)]['return_qty']],_0x59eb29=[..._0x4669dd[_0x458bf7(0x109)][_0x458bf7(0xfa)]],_0x5b84b9=[..._0x4669dd['body'][_0x458bf7(0x16a)]],_0x3e1c25=[..._0x4669dd['body'][_0x458bf7(0x162)]],_0xfd286=[..._0x4669dd['body']['product_code_hide']],_0x23ff9d=[..._0x4669dd['body'][_0x458bf7(0x12f)]],_0x102286=[..._0x4669dd['body'][_0x458bf7(0x13d)]],_0x24f64c=[..._0x4669dd[_0x458bf7(0x109)][_0x458bf7(0xfc)]];const _0x35585c=_0x47c4a2[_0x458bf7(0x141)](_0x5e519f=>{return _0x5e519f={'product_name':_0x5e519f};});_0x2b3fa3[_0x458bf7(0x15f)]((_0x2c1e3b,_0x5d5ac1)=>{var _0x5f049a=_0x458bf7;_0x35585c[_0x5d5ac1][_0x5f049a(0x142)]=_0x2c1e3b;}),_0x234e46[_0x458bf7(0x15f)]((_0x260848,_0x590e30)=>{var _0x3c19e9=_0x458bf7;_0x35585c[_0x590e30][_0x3c19e9(0x144)]=_0x260848;}),_0x1b6779['forEach']((_0x11ac2f,_0x255b87)=>{var _0x1f6333=_0x458bf7;_0x35585c[_0x255b87][_0x1f6333(0xf5)]=_0x11ac2f;}),_0x59eb29[_0x458bf7(0x15f)]((_0x8dc9bb,_0xb69aeb)=>{_0x35585c[_0xb69aeb]['bay']=_0x8dc9bb;}),_0x5b84b9[_0x458bf7(0x15f)]((_0x4d8744,_0x588314)=>{_0x35585c[_0x588314]['bin']=_0x4d8744;}),_0x3e1c25[_0x458bf7(0x15f)]((_0x197eb2,_0x4107da)=>{var _0x1c3ae2=_0x458bf7;_0x35585c[_0x4107da][_0x1c3ae2(0xff)]=_0x197eb2;}),_0xfd286[_0x458bf7(0x15f)]((_0x575095,_0x2fa652)=>{var _0x3e725f=_0x458bf7;_0x35585c[_0x2fa652][_0x3e725f(0x13c)]=_0x575095;}),_0x23ff9d[_0x458bf7(0x15f)]((_0x2c5c84,_0x3515ce)=>{var _0x52cee3=_0x458bf7;_0x35585c[_0x3515ce][_0x52cee3(0x15e)]=_0x2c5c84;}),_0x102286[_0x458bf7(0x15f)]((_0x46ca4c,_0x397218)=>{var _0xa8478c=_0x458bf7;_0x35585c[_0x397218][_0xa8478c(0x122)]=_0x46ca4c;}),_0x24f64c[_0x458bf7(0x15f)]((_0x12a77d,_0x35ec25)=>{var _0xc1d664=_0x458bf7;_0x35585c[_0x35ec25][_0xc1d664(0xf8)]=_0x12a77d;});var _0x2468a7=0x0;_0x35585c[_0x458bf7(0x15f)](_0x4b219c=>{var _0xa8bb9f=_0x458bf7;console[_0xa8bb9f(0x107)](_0xa8bb9f(0xf0),_0x4b219c),(parseInt(_0x4b219c[_0xa8bb9f(0x142)])<parseInt(_0x4b219c[_0xa8bb9f(0xf5)])||parseInt(_0x4b219c[_0xa8bb9f(0x144)])<parseInt(_0x4b219c[_0xa8bb9f(0xf5)])||parseInt(_0x4b219c[_0xa8bb9f(0xf5)])==0x0)&&_0x2468a7++;});if(_0x2468a7!=0x0)return _0x4669dd[_0x458bf7(0x106)](_0x458bf7(0x14c),_0x458bf7(0x12e)),_0x916879[_0x458bf7(0xee)](_0x458bf7(0x149));_0x41fc34[_0x458bf7(0x14b)][_0x458bf7(0x15f)](_0x2ffc81=>{var _0x47ce32=_0x458bf7;const _0x3452f4=_0x113da4[_0x47ce32(0xeb)][_0x47ce32(0x141)](_0x477cb5=>{var _0x10ed17=_0x47ce32;_0x477cb5[_0x10ed17(0x138)]==_0x2ffc81[_0x10ed17(0x138)]&&_0x477cb5[_0x10ed17(0xff)]==_0x2ffc81[_0x10ed17(0xff)]&&_0x477cb5['type']==_0x2ffc81['type']&&_0x477cb5[_0x10ed17(0x14a)]==_0x2ffc81[_0x10ed17(0x14a)]&&_0x477cb5[_0x10ed17(0xf3)]==_0x2ffc81[_0x10ed17(0xf3)]&&(_0x477cb5[_0x10ed17(0x135)]=parseInt(_0x477cb5[_0x10ed17(0x135)])+parseInt(_0x2ffc81['return_qty']));});}),console[_0x458bf7(0x107)]('old_warehouse_data',_0x113da4),await _0x113da4[_0x458bf7(0x156)](),_0x41fc34['invoice']=_0x4eba16,_0x41fc34[_0x458bf7(0x15a)]=_0x4a20b0,_0x41fc34[_0x458bf7(0x131)]=_0x227256,_0x41fc34['warehouse_name']=_0x398956,_0x41fc34[_0x458bf7(0x14b)]=_0x35585c,_0x41fc34[_0x458bf7(0x161)]=_0x283beb,_0x41fc34['room']=_0x5b1f5b,_0x41fc34['to_warehouse_name']=_0x920523,_0x41fc34['to_room']=_0x1af947;const _0x2e343e=await _0x41fc34[_0x458bf7(0x156)](),_0x4c98a1=await purchases_return[_0x458bf7(0x13a)]({'invoice':_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0x117)]}),_0x5256d4=await warehouse['findOne']({'name':_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0x10e)],'room':_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0x167)]});_0x4c98a1[_0x458bf7(0x14b)][_0x458bf7(0x15f)](_0x2620cf=>{var _0x2f2e34=_0x458bf7;_0x5256d4[_0x2f2e34(0xeb)][_0x2f2e34(0x141)](_0x320513=>{var _0x56b733=_0x2f2e34;_0x320513[_0x56b733(0x138)]==_0x2620cf[_0x56b733(0x138)]&&_0x320513[_0x56b733(0x162)]==_0x2620cf[_0x56b733(0x162)]&&(_0x320513[_0x56b733(0x135)]=parseInt(_0x320513[_0x56b733(0x135)])-parseInt(_0x2620cf[_0x56b733(0xf5)]),console[_0x56b733(0x107)](_0x56b733(0x16d),_0x2620cf[_0x56b733(0xf5)]));});}),console[_0x458bf7(0x107)](_0x458bf7(0x12c),_0x5256d4),await _0x5256d4[_0x458bf7(0x156)]();const _0x19b99f=await s_payment_data[_0x458bf7(0x13a)]({'invoice':_0x4669dd[_0x458bf7(0x109)][_0x458bf7(0x117)],'reason':_0x458bf7(0x120)});await _0x19b99f[_0x458bf7(0x156)](),_0x4669dd[_0x458bf7(0x106)](_0x458bf7(0x129),_0x458bf7(0x119)),_0x916879['redirect'](_0x458bf7(0x101));}catch(_0x321b9d){console[_0x458bf7(0x107)](_0x321b9d),_0x916879[_0x458bf7(0x148)](0xc8)[_0x458bf7(0x169)]({'message':_0x321b9d[_0x458bf7(0x10f)]});}}),router[a0_0x35fea3(0x16c)](a0_0x35fea3(0x14e),auth,async(_0x173a27,_0x514ff1)=>{var _0x131e48=a0_0x35fea3;try{const {username:_0x3cea46,email:_0x19af91,role:_0x239d36}=_0x173a27[_0x131e48(0x155)],_0xd1e2b8=_0x173a27[_0x131e48(0x155)],_0x2f0209=await profile[_0x131e48(0x13a)]({'email':_0xd1e2b8['email']}),_0x511a5a=await master_shop[_0x131e48(0x14f)]();console[_0x131e48(0x107)](_0x131e48(0x147),_0x511a5a);const _0x1a770c=_0x173a27[_0x131e48(0x104)]['id'],_0xe9c70a=await purchases_return[_0x131e48(0x14d)](_0x1a770c);console[_0x131e48(0x107)](_0xe9c70a);const _0x53e0a5=await suppliers[_0x131e48(0x13a)]({'name':_0xe9c70a[_0x131e48(0x15a)]});console[_0x131e48(0x107)](_0x53e0a5);if(_0x511a5a[0x0][_0x131e48(0x11c)]==_0x131e48(0xec)){var _0x1956ac=users['English'];console['log'](_0x1956ac);}else{if(_0x511a5a[0x0]['language']==_0x131e48(0xf1))var _0x1956ac=users['Hindi'];else{if(_0x511a5a[0x0][_0x131e48(0x11c)]==_0x131e48(0xfe))var _0x1956ac=users[_0x131e48(0xfe)];else{if(_0x511a5a[0x0][_0x131e48(0x11c)]==_0x131e48(0xe8))var _0x1956ac=users['Spanish'];else{if(_0x511a5a[0x0][_0x131e48(0x11c)]==_0x131e48(0x103))var _0x1956ac=users[_0x131e48(0x103)];else{if(_0x511a5a[0x0][_0x131e48(0x11c)]=='Portuguese\x20(BR)')var _0x1956ac=users[_0x131e48(0x15d)];else{if(_0x511a5a[0x0]['language']==_0x131e48(0x158))var _0x1956ac=users[_0x131e48(0x158)];else{if(_0x511a5a[0x0][_0x131e48(0x11c)]==_0x131e48(0xed))var _0x1956ac=users[_0x131e48(0x10b)];}}}}}}}_0x514ff1['render'](_0x131e48(0x116),{'success':_0x173a27[_0x131e48(0x106)]('success'),'errors':_0x173a27['flash'](_0x131e48(0x14c)),'role':_0xd1e2b8,'profile':_0x2f0209,'master_shop':_0x511a5a,'supplier':_0x53e0a5,'purchase':_0xe9c70a,'language':_0x1956ac});}catch(_0x7e8f65){console[_0x131e48(0x107)](_0x7e8f65);}}),router[a0_0x35fea3(0x124)](a0_0x35fea3(0x139),auth,async(_0x1efe08,_0x582155)=>{var _0x53280c=a0_0x35fea3;try{const _0x1b0904=_0x1efe08[_0x53280c(0x104)]['id'],{invoice:_0x14c96e,suppliers:_0x55bf9e,receivable_amount:_0x382810,received_amount:_0x1e9c59}=_0x1efe08['body'],_0x4c7453=await purchases_return[_0x53280c(0x14d)](_0x1b0904);console[_0x53280c(0x107)](_0x4c7453);var _0x3bf051=_0x382810-_0x1e9c59;console[_0x53280c(0x107)](_0x1e9c59),_0x4c7453['received']=parseFloat(_0x1e9c59)+parseFloat(_0x4c7453[_0x53280c(0x126)]),_0x4c7453[_0x53280c(0x157)]=_0x3bf051,console['log'](_0x4c7453);const _0x47668e=await _0x4c7453[_0x53280c(0x156)](),_0x481ee7=await s_payment_data['findOne']({'invoice':_0x1efe08[_0x53280c(0x109)][_0x53280c(0x117)],'reason':'Purchase\x20Return'});_0x481ee7[_0x53280c(0x108)]=_0x3bf051,await _0x481ee7[_0x53280c(0x156)]();let _0x5b2904=new Date(),_0x2aef9a=('0'+_0x5b2904[_0x53280c(0xf2)]())[_0x53280c(0x154)](-0x2),_0x79fbb8=('0'+(_0x5b2904[_0x53280c(0x159)]()+0x1))[_0x53280c(0x154)](-0x2),_0x571c74=_0x5b2904['getFullYear'](),_0x55151a=_0x571c74+'-'+_0x79fbb8+'-'+_0x2aef9a;const _0xc42040=new suppliers_payment({'invoice':_0x14c96e,'date':_0x571c74+'-'+_0x79fbb8+'-'+_0x2aef9a,'suppliers':_0x55bf9e,'reason':_0x53280c(0x150),'amount':_0x1e9c59}),_0x1bb25c=await _0xc42040[_0x53280c(0x156)]();_0x1efe08[_0x53280c(0x106)](_0x53280c(0x129),_0x53280c(0x133)),_0x582155['redirect']('/purchases_return/view');}catch(_0x1d867c){console[_0x53280c(0x107)](_0x1d867c);}}),module['exports']=router;