var a0_0x2d55b4=a0_0x4343;(function(_0x3748a1,_0x5e9985){var _0x3073f9=a0_0x4343,_0x31662d=_0x3748a1();while(!![]){try{var _0x2c1de5=-parseInt(_0x3073f9(0x171))/0x1+-parseInt(_0x3073f9(0x11a))/0x2+parseInt(_0x3073f9(0x129))/0x3*(parseInt(_0x3073f9(0x178))/0x4)+-parseInt(_0x3073f9(0x14f))/0x5*(-parseInt(_0x3073f9(0x112))/0x6)+parseInt(_0x3073f9(0x138))/0x7+parseInt(_0x3073f9(0x10c))/0x8+-parseInt(_0x3073f9(0x164))/0x9;if(_0x2c1de5===_0x5e9985)break;else _0x31662d['push'](_0x31662d['shift']());}catch(_0x501bb8){_0x31662d['push'](_0x31662d['shift']());}}}(a0_0x571f,0xd9b3e));const express=require(a0_0x2d55b4(0x153)),app=express(),router=express[a0_0x2d55b4(0x14c)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x2d55b4(0x180)),users=require(a0_0x2d55b4(0x181));function a0_0x571f(){var _0x28e0bc=['type','success','6326955orRdEL','Received\x20For\x20Purchase\x20Return','floorlevel','level','stock_data','render','json','Portuguese','$supplier_docs.email','product_details','slice','types','$product_details.bin','1529369HUNNOO','secondary_code_hide','stock_quantity','map','errors','Portuguese\x20(BR)','bay','12856QaqFiA','/view/:id','return_purchase_invoice','pallet','received','$due_amount','old_warehouse_data','$product_details.product_name','../middleware/auth','../public/language/languages.json','Enabled','Chinese','$product_details.product_code','master','user','product_details.return_qtyproduct_details.return_qty','2531768BniEIn','return_purchase_edit','room','$supplier_docs','return_qty','foreach\x20newproduct','2521578zCOfNQ','$received','stocks','note','$suppliers','product_name','Arabic\x20(ae)','$date','1805820TdNsnM','flash','to_warehouse_name','invoice','Arabic','redirect','/view','aggregate','$product_details.bay','product_stock','$invoice','product_code_hide','Purchase\x20Return','body','$name','597MqRFbv','getMonth','getDate','findOne','suppliers','findById','exports','$product_details.product_stock','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','Return\x20Goods','bin','/invoice/:id','English\x20(US)','$receivable','due_amount','9729125qwRgAI','email','$supplier_docs.address','save','log','get','find','$note','German','name','back','return_product','$product_details.floorlevel','French','purchase_quantity','forEach','date','isle','/purchases_return/view','purchases_return','Router','secondary_code','Hindi','20WTLRTE','to_Room_name','params','primary_code','express','final','Spanish','to_room','status','$return_product','$discount','language','getFullYear','supplier_docs','$product_details.type','string','$return_product.return_qty','purchase\x20return\x20successfully','warehouse_name'];a0_0x571f=function(){return _0x28e0bc;};return a0_0x571f();}function a0_0x4343(_0x587663,_0x54376c){var _0x571f01=a0_0x571f();return a0_0x4343=function(_0x43435c,_0x709a8f){_0x43435c=_0x43435c-0x108;var _0x409b8f=_0x571f01[_0x43435c];return _0x409b8f;},a0_0x4343(_0x587663,_0x54376c);}router[a0_0x2d55b4(0x13d)](a0_0x2d55b4(0x120),auth,async(_0x25effb,_0x5d0acd)=>{var _0x58926f=a0_0x2d55b4;try{const {username:_0x5b6c94,email:_0x1cbaca,role:_0xb7f9fb}=_0x25effb[_0x58926f(0x10a)],_0x2dda1b=_0x25effb[_0x58926f(0x10a)],_0x2a8c59=await profile[_0x58926f(0x12c)]({'email':_0x2dda1b[_0x58926f(0x139)]}),_0x32adca=await master_shop[_0x58926f(0x13e)]();console['log'](_0x58926f(0x109),_0x32adca);const _0x62eda6=await purchases_return[_0x58926f(0x121)]([{'$lookup':{'from':_0x58926f(0x12d),'localField':_0x58926f(0x12d),'foreignField':_0x58926f(0x141),'as':_0x58926f(0x15c)}},{'$unwind':_0x58926f(0x158)},{'$unwind':_0x58926f(0x10f)},{'$group':{'_id':'$_id','invoice':{'$first':_0x58926f(0x124)},'date':{'$first':_0x58926f(0x119)},'suppliers':{'$first':_0x58926f(0x116)},'warehouse_name':{'$first':'$warehouse_name'},'product_name':{'$first':'$return_product.product_name'},'return_qty':{'$first':_0x58926f(0x15f)},'price':{'$first':'$return_product.price'},'total':{'$sum':'$return_product.total'},'note':{'$first':_0x58926f(0x13f)},'total_amount':{'$first':'$total_amount'},'discount':{'$first':_0x58926f(0x159)},'receivable':{'$first':_0x58926f(0x136)},'received':{'$first':_0x58926f(0x113)},'due_amount':{'$first':_0x58926f(0x17d)},'mobile':{'$first':'$supplier_docs.mobile'},'email':{'$first':_0x58926f(0x16c)},'address':{'$first':_0x58926f(0x13a)},'return_sum_qty':{'$sum':'$return_product.return_qty'}}}]);console[_0x58926f(0x13c)](_0x62eda6);if(_0x32adca[0x0][_0x58926f(0x15a)]==_0x58926f(0x135)){var _0x3a1239=users['English'];console[_0x58926f(0x13c)](_0x3a1239);}else{if(_0x32adca[0x0][_0x58926f(0x15a)]==_0x58926f(0x14e))var _0x3a1239=users[_0x58926f(0x14e)];else{if(_0x32adca[0x0][_0x58926f(0x15a)]==_0x58926f(0x140))var _0x3a1239=users[_0x58926f(0x140)];else{if(_0x32adca[0x0][_0x58926f(0x15a)]==_0x58926f(0x155))var _0x3a1239=users[_0x58926f(0x155)];else{if(_0x32adca[0x0][_0x58926f(0x15a)]==_0x58926f(0x145))var _0x3a1239=users[_0x58926f(0x145)];else{if(_0x32adca[0x0][_0x58926f(0x15a)]==_0x58926f(0x176))var _0x3a1239=users[_0x58926f(0x16b)];else{if(_0x32adca[0x0]['language']==_0x58926f(0x183))var _0x3a1239=users['Chinese'];else{if(_0x32adca[0x0][_0x58926f(0x15a)]==_0x58926f(0x118))var _0x3a1239=users[_0x58926f(0x11e)];}}}}}}}_0x5d0acd[_0x58926f(0x169)](_0x58926f(0x14b),{'success':_0x25effb[_0x58926f(0x11b)]('success'),'errors':_0x25effb[_0x58926f(0x11b)](_0x58926f(0x175)),'role':_0x2dda1b,'profile':_0x2a8c59,'master_shop':_0x32adca,'user':_0x62eda6,'language':_0x3a1239});}catch(_0x2997a5){console[_0x58926f(0x13c)](_0x2997a5);}}),router[a0_0x2d55b4(0x13d)](a0_0x2d55b4(0x179),auth,async(_0x5ce7ae,_0x3e7384)=>{var _0x119654=a0_0x2d55b4;try{const {username:_0x308d74,email:_0x26ca51,role:_0x5befb9}=_0x5ce7ae[_0x119654(0x10a)],_0x4e275d=_0x5ce7ae[_0x119654(0x10a)],_0x3fb549=await profile[_0x119654(0x12c)]({'email':_0x4e275d['email']}),_0x8ad5e6=await product[_0x119654(0x13e)]({}),_0x4e6c17=await master_shop[_0x119654(0x13e)]();console[_0x119654(0x13c)](_0x119654(0x109),_0x4e6c17),console[_0x119654(0x13c)](_0x5ce7ae[_0x119654(0x127)]);const _0x53483c=_0x5ce7ae[_0x119654(0x151)]['id'],_0x2188a7=await purchases_return[_0x119654(0x12e)](_0x53483c);console[_0x119654(0x13c)](_0x2188a7);const _0x51b01e=await warehouse[_0x119654(0x121)]([{'$match':{'name':_0x2188a7[_0x119654(0x161)],'room':_0x2188a7[_0x119654(0x10e)]}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':_0x119654(0x17f)},'product_stock':{'$first':_0x119654(0x130)},'bay':{'$first':_0x119654(0x122)},'bin':{'$first':_0x119654(0x170)},'type':{'$first':_0x119654(0x15d)},'floorlevel':{'$first':_0x119654(0x144)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x119654(0x108)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'}}}]);warehouse_data=await warehouse['aggregate']([{'$match':{'status':_0x119654(0x182),'name':_0x119654(0x132),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x119654(0x128),'name':{'$first':'$name'}}},{'$sort':{'name':0x1}}]),console[_0x119654(0x13c)](_0x119654(0x168),_0x51b01e);if(_0x4e6c17[0x0][_0x119654(0x15a)]=='English\x20(US)'){var _0x2c1bce=users['English'];console[_0x119654(0x13c)](_0x2c1bce);}else{if(_0x4e6c17[0x0][_0x119654(0x15a)]=='Hindi')var _0x2c1bce=users[_0x119654(0x14e)];else{if(_0x4e6c17[0x0][_0x119654(0x15a)]==_0x119654(0x140))var _0x2c1bce=users[_0x119654(0x140)];else{if(_0x4e6c17[0x0][_0x119654(0x15a)]=='Spanish')var _0x2c1bce=users[_0x119654(0x155)];else{if(_0x4e6c17[0x0][_0x119654(0x15a)]=='French')var _0x2c1bce=users[_0x119654(0x145)];else{if(_0x4e6c17[0x0][_0x119654(0x15a)]==_0x119654(0x176))var _0x2c1bce=users['Portuguese'];else{if(_0x4e6c17[0x0]['language']==_0x119654(0x183))var _0x2c1bce=users['Chinese'];else{if(_0x4e6c17[0x0][_0x119654(0x15a)]==_0x119654(0x118))var _0x2c1bce=users['Arabic'];}}}}}}}_0x3e7384['render'](_0x119654(0x10d),{'success':_0x5ce7ae['flash']('success'),'errors':_0x5ce7ae[_0x119654(0x11b)](_0x119654(0x175)),'role':_0x4e275d,'master_shop':_0x4e6c17,'profile':_0x3fb549,'user':_0x2188a7,'stock':_0x51b01e,'product':_0x8ad5e6,'language':_0x2c1bce,'warehouse':warehouse_data});}catch(_0x1aacb0){console['log'](_0x1aacb0);}}),router['post'](a0_0x2d55b4(0x179),auth,async(_0x358de0,_0x22e666)=>{var _0x2a6a88=a0_0x2d55b4;try{const _0x174e02=_0x358de0['params']['id'];console[_0x2a6a88(0x13c)](_0x174e02);const _0x4f6546=await purchases_return[_0x2a6a88(0x12c)]({'invoice':_0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x11d)]});console[_0x2a6a88(0x13c)]('old_data',_0x4f6546);const _0x57d720=await warehouse[_0x2a6a88(0x12c)]({'name':_0x4f6546[_0x2a6a88(0x11c)],'room':_0x4f6546[_0x2a6a88(0x156)]});console[_0x2a6a88(0x13c)](_0x2a6a88(0x17e),_0x57d720);const {invoice:_0x44812d,suppliers:_0x525a6c,date:_0x332350,warehouse_name:_0x2bb325,product_name:_0x1ec703,purchase_quantity:_0x437c2c,stocks:_0xee3685,return_qty:_0x3f45cf,note:_0x4fccc9,Room_name:_0x3757ad,level:_0x2dbb2f,isle:_0x122413,pallet:_0x4bc54f,to_warehouse_name:_0x13b0cf,to_Room_name:_0x32331b}=_0x358de0[_0x2a6a88(0x127)];if(typeof _0x1ec703==_0x2a6a88(0x15e))var _0x1b8bd8=[_0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x117)]],_0x3a24ed=[_0x358de0[_0x2a6a88(0x127)]['purchase_quantity']],_0x2dc5bd=[_0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x114)]],_0x54e6bc=[_0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x110)]],_0x2d5cef=[_0x358de0[_0x2a6a88(0x127)]['level']],_0x34b8fd=[_0x358de0[_0x2a6a88(0x127)]['isle']],_0x5ad1bc=[_0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x17b)]],_0x15f717=[_0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x16f)]],_0x32b85a=[_0x358de0['body'][_0x2a6a88(0x125)]],_0x5e23a5=[_0x358de0[_0x2a6a88(0x127)]['primary_code_hide']],_0x48bf66=[_0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x172)]];else var _0x1b8bd8=[..._0x358de0['body'][_0x2a6a88(0x117)]],_0x3a24ed=[..._0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x146)]],_0x2dc5bd=[..._0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x114)]],_0x54e6bc=[..._0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x110)]],_0x2d5cef=[..._0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x167)]],_0x34b8fd=[..._0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x149)]],_0x5ad1bc=[..._0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x17b)]],_0x32b85a=[..._0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x125)]],_0x5e23a5=[..._0x358de0['body']['primary_code_hide']],_0x48bf66=[..._0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x172)]],_0x15f717=[..._0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x16f)]];const _0x36393e=_0x1b8bd8[_0x2a6a88(0x174)](_0x1fb988=>{return _0x1fb988={'product_name':_0x1fb988};});_0x3a24ed['forEach']((_0x535718,_0x3437c1)=>{var _0x4bbcb1=_0x2a6a88;_0x36393e[_0x3437c1][_0x4bbcb1(0x146)]=_0x535718;}),_0x2dc5bd[_0x2a6a88(0x147)]((_0x4a3580,_0x53d1a0)=>{var _0x5cb15b=_0x2a6a88;_0x36393e[_0x53d1a0][_0x5cb15b(0x173)]=_0x4a3580;}),_0x54e6bc[_0x2a6a88(0x147)]((_0x4b3937,_0x23da08)=>{var _0x1c28ff=_0x2a6a88;_0x36393e[_0x23da08][_0x1c28ff(0x110)]=_0x4b3937;}),_0x2d5cef['forEach']((_0x34de23,_0x20d77c)=>{var _0x2c13d2=_0x2a6a88;_0x36393e[_0x20d77c][_0x2c13d2(0x177)]=_0x34de23;}),_0x34b8fd[_0x2a6a88(0x147)]((_0x9f87de,_0x530335)=>{var _0x1ad04d=_0x2a6a88;_0x36393e[_0x530335][_0x1ad04d(0x133)]=_0x9f87de;}),_0x5ad1bc[_0x2a6a88(0x147)]((_0x5502d6,_0x462562)=>{var _0x30c21a=_0x2a6a88;_0x36393e[_0x462562][_0x30c21a(0x166)]=_0x5502d6;}),_0x32b85a[_0x2a6a88(0x147)]((_0x1eca16,_0x1e1d6e)=>{_0x36393e[_0x1e1d6e]['product_code']=_0x1eca16;}),_0x5e23a5[_0x2a6a88(0x147)]((_0x287620,_0x1bcf2c)=>{var _0x42f777=_0x2a6a88;_0x36393e[_0x1bcf2c][_0x42f777(0x152)]=_0x287620;}),_0x48bf66[_0x2a6a88(0x147)]((_0x2ddafc,_0x4bdac3)=>{var _0x2ef8dd=_0x2a6a88;_0x36393e[_0x4bdac3][_0x2ef8dd(0x14d)]=_0x2ddafc;}),_0x15f717[_0x2a6a88(0x147)]((_0x18615a,_0x8bce23)=>{var _0x3b7a31=_0x2a6a88;_0x36393e[_0x8bce23][_0x3b7a31(0x162)]=_0x18615a;});var _0x518925=0x0;_0x36393e[_0x2a6a88(0x147)](_0x2c0103=>{var _0x5d95af=_0x2a6a88;console[_0x5d95af(0x13c)](_0x5d95af(0x111),_0x2c0103),(parseInt(_0x2c0103[_0x5d95af(0x146)])<parseInt(_0x2c0103[_0x5d95af(0x110)])||parseInt(_0x2c0103['stock_quantity'])<parseInt(_0x2c0103[_0x5d95af(0x110)])||parseInt(_0x2c0103[_0x5d95af(0x110)])==0x0)&&_0x518925++;});if(_0x518925!=0x0)return _0x358de0[_0x2a6a88(0x11b)](_0x2a6a88(0x175),_0x2a6a88(0x131)),_0x22e666[_0x2a6a88(0x11f)](_0x2a6a88(0x142));_0x4f6546['return_product'][_0x2a6a88(0x147)](_0x551c34=>{var _0x3a8822=_0x2a6a88;const _0x48a6ce=_0x57d720[_0x3a8822(0x16d)][_0x3a8822(0x174)](_0x518641=>{var _0x1d5f3c=_0x3a8822;_0x518641[_0x1d5f3c(0x117)]==_0x551c34[_0x1d5f3c(0x117)]&&_0x518641[_0x1d5f3c(0x166)]==_0x551c34[_0x1d5f3c(0x166)]&&_0x518641['type']==_0x551c34[_0x1d5f3c(0x162)]&&_0x518641[_0x1d5f3c(0x133)]==_0x551c34[_0x1d5f3c(0x133)]&&_0x518641[_0x1d5f3c(0x177)]==_0x551c34[_0x1d5f3c(0x177)]&&(_0x518641[_0x1d5f3c(0x123)]=parseInt(_0x518641['product_stock'])+parseInt(_0x551c34['return_qty']));});}),console[_0x2a6a88(0x13c)](_0x2a6a88(0x17e),_0x57d720),await _0x57d720['save'](),_0x4f6546[_0x2a6a88(0x11d)]=_0x44812d,_0x4f6546['suppliers']=_0x525a6c,_0x4f6546[_0x2a6a88(0x148)]=_0x332350,_0x4f6546['warehouse_name']=_0x2bb325,_0x4f6546[_0x2a6a88(0x143)]=_0x36393e,_0x4f6546[_0x2a6a88(0x115)]=_0x4fccc9,_0x4f6546[_0x2a6a88(0x10e)]=_0x3757ad,_0x4f6546[_0x2a6a88(0x11c)]=_0x13b0cf,_0x4f6546['to_room']=_0x32331b;const _0x43d87b=await _0x4f6546[_0x2a6a88(0x13b)](),_0x36fbe9=await purchases_return['findOne']({'invoice':_0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x11d)]}),_0x2bcdc9=await warehouse['findOne']({'name':_0x358de0[_0x2a6a88(0x127)]['to_warehouse_name'],'room':_0x358de0[_0x2a6a88(0x127)][_0x2a6a88(0x150)]});_0x36fbe9[_0x2a6a88(0x143)]['forEach'](_0x4073ce=>{var _0x45e2f4=_0x2a6a88;_0x2bcdc9[_0x45e2f4(0x16d)][_0x45e2f4(0x174)](_0x16ed39=>{var _0x4ad4c7=_0x45e2f4;_0x16ed39[_0x4ad4c7(0x117)]==_0x4073ce[_0x4ad4c7(0x117)]&&_0x16ed39[_0x4ad4c7(0x17b)]==_0x4073ce['pallet']&&(_0x16ed39[_0x4ad4c7(0x123)]=parseInt(_0x16ed39[_0x4ad4c7(0x123)])-parseInt(_0x4073ce[_0x4ad4c7(0x110)]),console[_0x4ad4c7(0x13c)](_0x4ad4c7(0x10b),_0x4073ce[_0x4ad4c7(0x110)]));});}),console[_0x2a6a88(0x13c)](_0x2a6a88(0x154),_0x2bcdc9),await _0x2bcdc9[_0x2a6a88(0x13b)]();const _0x8343e4=await s_payment_data[_0x2a6a88(0x12c)]({'invoice':_0x358de0['body'][_0x2a6a88(0x11d)],'reason':_0x2a6a88(0x126)});await _0x8343e4[_0x2a6a88(0x13b)](),_0x358de0['flash'](_0x2a6a88(0x163),_0x2a6a88(0x160)),_0x22e666[_0x2a6a88(0x11f)]('/purchases_return/view');}catch(_0x8dee06){console[_0x2a6a88(0x13c)](_0x8dee06),_0x22e666[_0x2a6a88(0x157)](0xc8)[_0x2a6a88(0x16a)]({'message':_0x8dee06['message']});}}),router[a0_0x2d55b4(0x13d)](a0_0x2d55b4(0x134),auth,async(_0x2d29fd,_0xd5710f)=>{var _0x3893e0=a0_0x2d55b4;try{const {username:_0x592db1,email:_0x29f147,role:_0x17953e}=_0x2d29fd[_0x3893e0(0x10a)],_0x11ede9=_0x2d29fd['user'],_0x1d78c4=await profile[_0x3893e0(0x12c)]({'email':_0x11ede9[_0x3893e0(0x139)]}),_0x361aa4=await master_shop[_0x3893e0(0x13e)]();console[_0x3893e0(0x13c)]('master',_0x361aa4);const _0x1e996d=_0x2d29fd[_0x3893e0(0x151)]['id'],_0x35bcfa=await purchases_return[_0x3893e0(0x12e)](_0x1e996d);console[_0x3893e0(0x13c)](_0x35bcfa);const _0x5c1f5b=await suppliers[_0x3893e0(0x12c)]({'name':_0x35bcfa['suppliers']});console[_0x3893e0(0x13c)](_0x5c1f5b);if(_0x361aa4[0x0][_0x3893e0(0x15a)]==_0x3893e0(0x135)){var _0x19188f=users['English'];console[_0x3893e0(0x13c)](_0x19188f);}else{if(_0x361aa4[0x0][_0x3893e0(0x15a)]==_0x3893e0(0x14e))var _0x19188f=users[_0x3893e0(0x14e)];else{if(_0x361aa4[0x0][_0x3893e0(0x15a)]==_0x3893e0(0x140))var _0x19188f=users[_0x3893e0(0x140)];else{if(_0x361aa4[0x0][_0x3893e0(0x15a)]==_0x3893e0(0x155))var _0x19188f=users[_0x3893e0(0x155)];else{if(_0x361aa4[0x0]['language']=='French')var _0x19188f=users[_0x3893e0(0x145)];else{if(_0x361aa4[0x0][_0x3893e0(0x15a)]==_0x3893e0(0x176))var _0x19188f=users[_0x3893e0(0x16b)];else{if(_0x361aa4[0x0][_0x3893e0(0x15a)]=='Chinese')var _0x19188f=users['Chinese'];else{if(_0x361aa4[0x0][_0x3893e0(0x15a)]==_0x3893e0(0x118))var _0x19188f=users[_0x3893e0(0x11e)];}}}}}}}_0xd5710f[_0x3893e0(0x169)](_0x3893e0(0x17a),{'success':_0x2d29fd[_0x3893e0(0x11b)]('success'),'errors':_0x2d29fd[_0x3893e0(0x11b)](_0x3893e0(0x175)),'role':_0x11ede9,'profile':_0x1d78c4,'master_shop':_0x361aa4,'supplier':_0x5c1f5b,'purchase':_0x35bcfa,'language':_0x19188f});}catch(_0x6bf8c8){console[_0x3893e0(0x13c)](_0x6bf8c8);}}),router['post']('/receive_payment/:id',auth,async(_0x2b22e4,_0x215aa7)=>{var _0x362acf=a0_0x2d55b4;try{const _0x1e94d3=_0x2b22e4[_0x362acf(0x151)]['id'],{invoice:_0x4528fe,suppliers:_0x453ff3,receivable_amount:_0x385ec8,received_amount:_0x4914c9}=_0x2b22e4[_0x362acf(0x127)],_0xeb7e62=await purchases_return[_0x362acf(0x12e)](_0x1e94d3);console[_0x362acf(0x13c)](_0xeb7e62);var _0x170880=_0x385ec8-_0x4914c9;console[_0x362acf(0x13c)](_0x4914c9),_0xeb7e62[_0x362acf(0x17c)]=parseFloat(_0x4914c9)+parseFloat(_0xeb7e62[_0x362acf(0x17c)]),_0xeb7e62[_0x362acf(0x137)]=_0x170880,console[_0x362acf(0x13c)](_0xeb7e62);const _0x2fc8c6=await _0xeb7e62[_0x362acf(0x13b)](),_0x4a0b55=await s_payment_data[_0x362acf(0x12c)]({'invoice':_0x2b22e4[_0x362acf(0x127)]['invoice'],'reason':_0x362acf(0x126)});_0x4a0b55['amount']=_0x170880,await _0x4a0b55['save']();let _0xef5ddf=new Date(),_0x2e7dad=('0'+_0xef5ddf[_0x362acf(0x12b)]())[_0x362acf(0x16e)](-0x2),_0x519f7f=('0'+(_0xef5ddf[_0x362acf(0x12a)]()+0x1))[_0x362acf(0x16e)](-0x2),_0x3376ca=_0xef5ddf[_0x362acf(0x15b)](),_0x147285=_0x3376ca+'-'+_0x519f7f+'-'+_0x2e7dad;const _0x39f6ac=new suppliers_payment({'invoice':_0x4528fe,'date':_0x3376ca+'-'+_0x519f7f+'-'+_0x2e7dad,'suppliers':_0x453ff3,'reason':_0x362acf(0x165),'amount':_0x4914c9}),_0x1bf2a7=await _0x39f6ac[_0x362acf(0x13b)]();_0x2b22e4[_0x362acf(0x11b)](_0x362acf(0x163),'payment\x20successfull'),_0x215aa7[_0x362acf(0x11f)](_0x362acf(0x14a));}catch(_0x2ef4ff){console[_0x362acf(0x13c)](_0x2ef4ff);}}),module[a0_0x2d55b4(0x12f)]=router;