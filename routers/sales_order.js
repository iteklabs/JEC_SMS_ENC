var a0_0x40ebc5=a0_0x4515;function a0_0x44a3(){var _0x1579d0=['body','no_per_unit',';christian.villamer@jakagroup.com','wms_account_id','totalprice','\x22>Change\x20Status</a>','$sale_product','Types','conversion_unit','express','mongoose','valueOf','padStart','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','</b></span>\x20<br><br>','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','adjustment_discount','isFG','</b></span>\x20<br>','price','/accounting_approval/','discount','user','<div\x20style=\x22text-align:\x20center;\x22>','1286514PVElAa','../middleware/auth','</tbody>','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','<table\x20style=\x22width:\x20100%\x20!important;\x22>','staffs','$invoice','port','French','findOne','</div>','$member','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','<h2>\x20JEC\x20SMS\x20</h2>','<span>\x20Dear\x20<b>','nodemailer','exports','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','<div>','name','<span>\x20Requested\x20By:\x20<b>','protocol','<br><br><br>','real_qty_unit_val','ObjectId','<tr>','wms_data','<h5>\x20JEC\x20SMS\x20</h5>','Arabic','prod_code','<tbody\x20style=\x22text-align:\x20center;\x22>','English\x20(US)','sale_product','</td>','</body></html>','aggregate','../public/language/languages.json','language','_id','render','head_id_staff','unit','view_sales_order','save','Router','$_id','Arabic\x20(ae)','$member.name','primary_code','xlsx','<br><br>','8656640PrNQkO','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','headers','email','Portuguese','errors','prod_name','$wms_account_id','image','find','German','dicount_price_adjust','sales_category','Sales\x20Order\x20is\x20ongoing','3181675dTJbDH','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','sendMail','/upload/','flash','json','1QpyUHs','Portuguese\x20(BR)','log','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','secondary_unit','product_code','/view_sales/:id','/sales_order/view_sales/','invoice','date','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','$date','</table>','/product_data','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','getPrimUnitNo','conversion_data','map','10RzZBnt','Hindi','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','<span>\x20Request\x20ID:\x20<b>','add_sales_order','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','createTransport','product_list','Approval\x20for\x20','English','get','quantity','password','exceljs','<!DOCTYPE\x20html>','true','prod_cat','post','Chinese','$accounting_account_confirm','$sale_product.quantity','forEach','sttaff_id','success','$account_data','findById','396393PEGsnr','Spanish','tmpisFG','$wms_data','head_staff_info','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','params','662672Uyjrdr','$head_staff_info','product_name','host','Logo.png','16802685FOrOJp','/add_sales','1272748QBIrjj','product_id','logo','</head><body>','$JD','/../public','</tr>'];a0_0x44a3=function(){return _0x1579d0;};return a0_0x44a3();}function a0_0x4515(_0x3b17f1,_0x469bbd){var _0x44a32f=a0_0x44a3();return a0_0x4515=function(_0x451511,_0x5874bb){_0x451511=_0x451511-0x1a7;var _0x1cfd98=_0x44a32f[_0x451511];return _0x1cfd98;},a0_0x4515(_0x3b17f1,_0x469bbd);}(function(_0x4f971d,_0x52eee8){var _0x3122af=a0_0x4515,_0x4f4bd3=_0x4f971d();while(!![]){try{var _0x2346c7=-parseInt(_0x3122af(0x1e9))/0x1*(-parseInt(_0x3122af(0x223))/0x2)+-parseInt(_0x3122af(0x215))/0x3+parseInt(_0x3122af(0x21c))/0x4+parseInt(_0x3122af(0x1fb))/0x5*(-parseInt(_0x3122af(0x242))/0x6)+-parseInt(_0x3122af(0x1e3))/0x7+-parseInt(_0x3122af(0x1d5))/0x8+parseInt(_0x3122af(0x221))/0x9;if(_0x2346c7===_0x52eee8)break;else _0x4f4bd3['push'](_0x4f4bd3['shift']());}catch(_0x2f22ca){_0x4f4bd3['push'](_0x4f4bd3['shift']());}}}(a0_0x44a3,0x8b829));const express=require(a0_0x40ebc5(0x233)),app=express(),router=express[a0_0x40ebc5(0x1ce)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require('../models/all_models'),auth=require(a0_0x40ebc5(0x243)),users=require(a0_0x40ebc5(0x1c6)),excelJS=require(a0_0x40ebc5(0x208)),xlsx=require(a0_0x40ebc5(0x1d3)),mongoose=require(a0_0x40ebc5(0x234)),{ObjectId}=require('mongodb'),nodemailer=require(a0_0x40ebc5(0x1b1));router['get']('/',auth,async(_0x336a39,_0x226582)=>{var _0x1f08ac=a0_0x40ebc5;try{const _0x2eec17=await master_shop[_0x1f08ac(0x1de)](),_0xb0d239=_0x336a39[_0x1f08ac(0x240)],_0x3caa9e=await profile[_0x1f08ac(0x1ab)]({'email':_0xb0d239[_0x1f08ac(0x1d8)]}),_0x1f59a4=await staff[_0x1f08ac(0x1ab)]({'email':_0xb0d239[_0x1f08ac(0x1d8)]}),_0x4de12e=await sales_order['aggregate']([{'$match':{'sales_staff_id':_0x1f59a4[_0x1f08ac(0x1c8)][_0x1f08ac(0x235)]()}},{'$unwind':_0x1f08ac(0x230)},{'$group':{'_id':_0x1f08ac(0x1cf),'invoice':{'$first':_0x1f08ac(0x1a8)},'customer':{'$first':'$customer'},'date':{'$first':_0x1f08ac(0x1f4)},'JD':{'$first':_0x1f08ac(0x227)},'accounting_account_confirm':{'$first':_0x1f08ac(0x20e)},'wms_account_confirm':{'$first':'$wms_account_confirm'},'totalQTY':{'$sum':_0x1f08ac(0x20f)}}}]);if(_0x2eec17[0x0][_0x1f08ac(0x1c7)]==_0x1f08ac(0x1c1))var _0x32b6c1=users['English'];else{if(_0x2eec17[0x0]['language']==_0x1f08ac(0x1fc))var _0x32b6c1=users[_0x1f08ac(0x1fc)];else{if(_0x2eec17[0x0][_0x1f08ac(0x1c7)]==_0x1f08ac(0x1df))var _0x32b6c1=users[_0x1f08ac(0x1df)];else{if(_0x2eec17[0x0][_0x1f08ac(0x1c7)]==_0x1f08ac(0x216))var _0x32b6c1=users[_0x1f08ac(0x216)];else{if(_0x2eec17[0x0][_0x1f08ac(0x1c7)]==_0x1f08ac(0x1aa))var _0x32b6c1=users[_0x1f08ac(0x1aa)];else{if(_0x2eec17[0x0][_0x1f08ac(0x1c7)]=='Portuguese\x20(BR)')var _0x32b6c1=users[_0x1f08ac(0x1d9)];else{if(_0x2eec17[0x0][_0x1f08ac(0x1c7)]==_0x1f08ac(0x20d))var _0x32b6c1=users['Chinese'];else{if(_0x2eec17[0x0]['language']==_0x1f08ac(0x1d0))var _0x32b6c1=users[_0x1f08ac(0x1be)];}}}}}}}_0x226582[_0x1f08ac(0x1c9)]('all_sales_order',{'success':_0x336a39[_0x1f08ac(0x1e7)](_0x1f08ac(0x212)),'errors':_0x336a39[_0x1f08ac(0x1e7)](_0x1f08ac(0x1da)),'master_shop':_0x2eec17,'profile':_0x3caa9e,'role':_0xb0d239,'language':_0x32b6c1,'product_list':_0x1f59a4[_0x1f08ac(0x202)],'sales_mine':_0x4de12e,'staff_arr':_0x1f59a4});}catch(_0xa75a1a){console[_0x1f08ac(0x1eb)](_0xa75a1a);}}),router[a0_0x40ebc5(0x205)](a0_0x40ebc5(0x222),auth,async(_0x5efe9e,_0x164456)=>{var _0x276c80=a0_0x40ebc5;try{const _0x196e9a=await master_shop[_0x276c80(0x1de)](),_0x2b21d1=_0x5efe9e[_0x276c80(0x240)],_0x2af822=await profile[_0x276c80(0x1ab)]({'email':_0x2b21d1[_0x276c80(0x1d8)]}),_0x144aa9=await staff[_0x276c80(0x1ab)]({'email':_0x2b21d1[_0x276c80(0x1d8)]}),_0x2d9137=await customer[_0x276c80(0x1de)]({'agent_id':_0x144aa9[_0x276c80(0x1c8)]});if(_0x196e9a[0x0][_0x276c80(0x1c7)]==_0x276c80(0x1c1))var _0x1d5540=users[_0x276c80(0x204)];else{if(_0x196e9a[0x0]['language']==_0x276c80(0x1fc))var _0x1d5540=users['Hindi'];else{if(_0x196e9a[0x0][_0x276c80(0x1c7)]==_0x276c80(0x1df))var _0x1d5540=users[_0x276c80(0x1df)];else{if(_0x196e9a[0x0][_0x276c80(0x1c7)]==_0x276c80(0x216))var _0x1d5540=users['Spanish'];else{if(_0x196e9a[0x0][_0x276c80(0x1c7)]=='French')var _0x1d5540=users[_0x276c80(0x1aa)];else{if(_0x196e9a[0x0][_0x276c80(0x1c7)]==_0x276c80(0x1ea))var _0x1d5540=users['Portuguese'];else{if(_0x196e9a[0x0][_0x276c80(0x1c7)]==_0x276c80(0x20d))var _0x1d5540=users[_0x276c80(0x20d)];else{if(_0x196e9a[0x0]['language']==_0x276c80(0x1d0))var _0x1d5540=users[_0x276c80(0x1be)];}}}}}}}_0x164456[_0x276c80(0x1c9)](_0x276c80(0x1ff),{'success':_0x5efe9e['flash'](_0x276c80(0x212)),'errors':_0x5efe9e['flash'](_0x276c80(0x1da)),'master_shop':_0x196e9a,'profile':_0x2af822,'role':_0x2b21d1,'language':_0x1d5540,'customer':_0x2d9137,'staff_arr':_0x144aa9});}catch(_0x7cd57d){console[_0x276c80(0x1eb)](_0x7cd57d);}}),router[a0_0x40ebc5(0x205)](a0_0x40ebc5(0x1ef),auth,async(_0x3a762b,_0x3f7566)=>{var _0x384b26=a0_0x40ebc5;try{const _0x3ee19f=await master_shop[_0x384b26(0x1de)](),_0x1acf1f=_0x3a762b[_0x384b26(0x240)],_0x319741=await profile['findOne']({'email':_0x1acf1f[_0x384b26(0x1d8)]}),_0x571b57=await staff['findOne']({'email':_0x1acf1f[_0x384b26(0x1d8)]}),_0x30ba2c=await customer['find']({'agent_id':_0x571b57[_0x384b26(0x1c8)]}),_0x53ee81=mongoose[_0x384b26(0x231)][_0x384b26(0x1ba)],_0x304b07=_0x3a762b[_0x384b26(0x21b)]['id'],_0xa66d2d=await sales_order[_0x384b26(0x214)](_0x304b07),_0x1ed0bb=await sales_order[_0x384b26(0x1c5)]([{'$match':{'_id':_0x53ee81(_0x304b07)}},{'$addFields':{'accounting_account_id':{'$toObjectId':'$accounting_account_id'}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x384b26(0x1dc)}}},{'$lookup':{'from':_0x384b26(0x1a7),'localField':'accounting_account_id','foreignField':'_id','as':'account_data'}},{'$unwind':_0x384b26(0x213)},{'$lookup':{'from':_0x384b26(0x1a7),'localField':_0x384b26(0x22d),'foreignField':'_id','as':_0x384b26(0x1bc)}},{'$unwind':{'path':_0x384b26(0x218),'preserveNullAndEmptyArrays':!![]}}]);if(_0x3ee19f[0x0][_0x384b26(0x1c7)]==_0x384b26(0x1c1))var _0x26072c=users[_0x384b26(0x204)];else{if(_0x3ee19f[0x0][_0x384b26(0x1c7)]==_0x384b26(0x1fc))var _0x26072c=users[_0x384b26(0x1fc)];else{if(_0x3ee19f[0x0]['language']==_0x384b26(0x1df))var _0x26072c=users['German'];else{if(_0x3ee19f[0x0][_0x384b26(0x1c7)]==_0x384b26(0x216))var _0x26072c=users[_0x384b26(0x216)];else{if(_0x3ee19f[0x0][_0x384b26(0x1c7)]==_0x384b26(0x1aa))var _0x26072c=users['French'];else{if(_0x3ee19f[0x0][_0x384b26(0x1c7)]=='Portuguese\x20(BR)')var _0x26072c=users[_0x384b26(0x1d9)];else{if(_0x3ee19f[0x0][_0x384b26(0x1c7)]==_0x384b26(0x20d))var _0x26072c=users[_0x384b26(0x20d)];else{if(_0x3ee19f[0x0][_0x384b26(0x1c7)]==_0x384b26(0x1d0))var _0x26072c=users['Arabic'];}}}}}}}_0x3f7566[_0x384b26(0x1c9)](_0x384b26(0x1cc),{'success':_0x3a762b['flash']('success'),'errors':_0x3a762b[_0x384b26(0x1e7)](_0x384b26(0x1da)),'master_shop':_0x3ee19f,'profile':_0x319741,'role':_0x1acf1f,'language':_0x26072c,'customer':_0x30ba2c,'sales_sa':_0xa66d2d,'approvers':_0x1ed0bb[0x0],'staff_arr':_0x571b57});}catch(_0x2a858c){console[_0x384b26(0x1eb)](_0x2a858c);}}),router[a0_0x40ebc5(0x20c)](a0_0x40ebc5(0x222),auth,async(_0x27cba9,_0x2a1344)=>{var _0x48a44d=a0_0x40ebc5;try{const {customer:_0x1a0509,date:_0x370a7d,prod_code:_0x2ada9f,note:_0x310c86,paid_status:_0x5875cf,JD:_0x156323,po_number:_0x3bb221,desire_date:_0x293bff}=_0x27cba9[_0x48a44d(0x22a)];if(typeof _0x2ada9f=='string')var _0x42a742=[_0x27cba9[_0x48a44d(0x22a)]['prod_code']],_0x4c1432=[_0x27cba9[_0x48a44d(0x22a)]['prod_name']],_0x43bfe3=[_0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x1d2)]],_0x3fbdf3=[_0x27cba9['body'][_0x48a44d(0x206)]],_0x270ad6=[_0x27cba9['body'][_0x48a44d(0x1cb)]],_0x47e838=[_0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x224)]],_0x14118c=[_0x27cba9['body'][_0x48a44d(0x23d)]],_0x1ce2cf=[_0x27cba9[_0x48a44d(0x22a)]['totalPrice']],_0x5f4804=[_0x27cba9[_0x48a44d(0x22a)]['dicount_price']],_0x3e0c2f=[_0x27cba9['body'][_0x48a44d(0x217)]],_0x107d90=[_0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x1e0)]],_0x9df647=[_0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x22b)]],_0x86e10=[_0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x1f8)]],_0x1db5f2=[_0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x20b)]],_0x36066a=[_0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x1ed)]],_0x319902=[_0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x232)]];else var _0x42a742=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x1bf)]],_0x4c1432=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x1db)]],_0x43bfe3=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x1d2)]],_0x3fbdf3=[..._0x27cba9['body'][_0x48a44d(0x206)]],_0x270ad6=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x1cb)]],_0x47e838=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x224)]],_0x14118c=[..._0x27cba9[_0x48a44d(0x22a)]['price']],_0x1ce2cf=[..._0x27cba9[_0x48a44d(0x22a)]['totalPrice']],_0x5f4804=[..._0x27cba9['body']['dicount_price']],_0x3e0c2f=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x217)]],_0x107d90=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x1e0)]],_0x9df647=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x22b)]],_0x86e10=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x1f8)]],_0x1db5f2=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x20b)]],_0x36066a=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x1ed)]],_0x319902=[..._0x27cba9[_0x48a44d(0x22a)][_0x48a44d(0x232)]];const _0x547f18=_0x42a742[_0x48a44d(0x1fa)](_0x56b162=>{return _0x56b162={'product_code':_0x56b162};});_0x4c1432[_0x48a44d(0x210)]((_0x3ff99f,_0x3bdf9b)=>{_0x547f18[_0x3bdf9b]['product_name']=_0x3ff99f;}),_0x43bfe3['forEach']((_0x405cfd,_0x460d74)=>{var _0x274ea7=_0x48a44d;_0x547f18[_0x460d74][_0x274ea7(0x1d2)]=_0x405cfd;}),_0x3fbdf3['forEach']((_0x2ca7d2,_0x5bcf80)=>{var _0x25d712=_0x48a44d;_0x547f18[_0x5bcf80][_0x25d712(0x206)]=_0x2ca7d2;}),_0x270ad6[_0x48a44d(0x210)]((_0x227447,_0x44c388)=>{_0x547f18[_0x44c388]['unit']=_0x227447;}),_0x47e838[_0x48a44d(0x210)]((_0x2ce458,_0x3dfb38)=>{var _0x43cab8=_0x48a44d;_0x547f18[_0x3dfb38][_0x43cab8(0x224)]=_0x2ce458;}),_0x107d90['forEach']((_0x52c7dc,_0x547f71)=>{var _0x3853fe=_0x48a44d;_0x547f18[_0x547f71][_0x3853fe(0x23a)]=_0x52c7dc;}),_0x14118c['forEach']((_0x40f26b,_0x1b2994)=>{_0x547f18[_0x1b2994]['price']=_0x40f26b;}),_0x1ce2cf[_0x48a44d(0x210)]((_0x59d43c,_0x185087)=>{var _0x24a48a=_0x48a44d;_0x547f18[_0x185087][_0x24a48a(0x22e)]=_0x59d43c;}),_0x5f4804['forEach']((_0x47ce9e,_0x32d087)=>{var _0x516c00=_0x48a44d;_0x547f18[_0x32d087][_0x516c00(0x23f)]=_0x47ce9e;}),_0x3e0c2f[_0x48a44d(0x210)]((_0x48e6df,_0x5e418a)=>{var _0x2780da=_0x48a44d;_0x547f18[_0x5e418a][_0x2780da(0x23b)]=_0x48e6df;}),_0x36066a['forEach']((_0x571084,_0x244b68)=>{var _0x2bdd46=_0x48a44d;_0x547f18[_0x244b68][_0x2bdd46(0x1ed)]=_0x571084;}),_0x86e10['forEach']((_0x10546c,_0x789b00)=>{var _0x506099=_0x48a44d;_0x547f18[_0x789b00][_0x506099(0x1b9)]=_0x10546c;}),_0x1db5f2[_0x48a44d(0x210)]((_0x30fd70,_0x39e11d)=>{_0x547f18[_0x39e11d]['prod_cat']=_0x30fd70;}),_0x319902[_0x48a44d(0x210)]((_0x5c1bec,_0x49403f)=>{var _0x5c723e=_0x48a44d;_0x547f18[_0x49403f][_0x5c723e(0x1f9)]=_0x5c1bec;}),_0x9df647[_0x48a44d(0x210)]((_0x2d638f,_0x50183c)=>{_0x547f18[_0x50183c]['no_per_unit']=_0x2d638f;});const _0x3e973e=await approver_acct[_0x48a44d(0x1c5)]([{'$unwind':_0x48a44d(0x1ad)},{'$match':{'member.id_member':_0x27cba9[_0x48a44d(0x240)][_0x48a44d(0x211)]}},{'$group':{'_id':{'id_member':'$member.id_member','name':_0x48a44d(0x1d1)},'head_id_staff':{'$first':'$head_id_staff'}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':'$head_id_staff'}}},{'$lookup':{'from':_0x48a44d(0x1a7),'localField':'head_id_staff_id','foreignField':_0x48a44d(0x1c8),'as':_0x48a44d(0x219)}},{'$unwind':_0x48a44d(0x21d)}]),_0x5db77a=new invoice_for_sales_order();await _0x5db77a[_0x48a44d(0x1cd)]();const _0x4af0b7=_0x27cba9[_0x48a44d(0x240)],_0x489dd3=await staff[_0x48a44d(0x1ab)]({'email':_0x4af0b7[_0x48a44d(0x1d8)]}),_0x1f46b9=new sales_order({'invoice':_0x5db77a['invoice_init']['toString']()[_0x48a44d(0x236)](0x8,'0'),'customer':_0x1a0509,'date':_0x370a7d,'sale_product':_0x547f18,'note':_0x310c86,'sales_staff_id':_0x489dd3['_id'][_0x48a44d(0x235)](),'JD':_0x156323,'accounting_account_id':_0x3e973e[0x0][_0x48a44d(0x1ca)],'po_number':_0x3bb221,'desired_delivery':_0x293bff,'wms_account_confirm':_0x48a44d(0x20a),'accounting_account_confirm':_0x48a44d(0x20a)}),_0x87d199=await _0x1f46b9[_0x48a44d(0x1cd)]();var _0x496b72=_0x87d199[_0x48a44d(0x1c2)],_0x2e8841='',_0x4a2168,_0x31c639=0x0;for(_0x4a2168 in _0x496b72){_0x2e8841+='<tr>'+_0x48a44d(0x1b3)+_0x496b72[_0x4a2168][_0x48a44d(0x21e)]+_0x48a44d(0x1c3)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x496b72[_0x4a2168][_0x48a44d(0x1ee)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x496b72[_0x4a2168][_0x48a44d(0x206)]+_0x48a44d(0x1c3)+_0x48a44d(0x1b3)+_0x496b72[_0x4a2168][_0x48a44d(0x1cb)]+'</td>'+_0x48a44d(0x229),_0x31c639+=parseInt(_0x496b72[_0x4a2168]['quantity']);}const _0xe37880=await master_shop[_0x48a44d(0x1de)](),_0x4edd3b=await email_settings[_0x48a44d(0x1ab)]();let _0x24fa5c=nodemailer[_0x48a44d(0x201)]({'port':Number(_0x4edd3b[_0x48a44d(0x1a9)]),'secure':![],'auth':{'user':_0x4edd3b[_0x48a44d(0x1d8)],'pass':_0x4edd3b[_0x48a44d(0x207)]}});const _0x2efac2=_0x27cba9[_0x48a44d(0x1b7)]+'://'+_0x27cba9[_0x48a44d(0x1d7)][_0x48a44d(0x21f)];let _0x413b91={'from':_0x4edd3b['email'],'to':_0x3e973e[0x0][_0x48a44d(0x219)][_0x48a44d(0x1d8)]+_0x48a44d(0x22c),'subject':_0x48a44d(0x203)+_0x87d199[_0x48a44d(0x1f1)],'attachments':[{'filename':_0x48a44d(0x220),'path':__dirname+_0x48a44d(0x228)+_0x48a44d(0x1e6)+_0xe37880[0x0][_0x48a44d(0x1dd)],'cid':_0x48a44d(0x225)}],'html':_0x48a44d(0x209)+'<html><head><title></title>'+_0x48a44d(0x21a)+_0x48a44d(0x226)+_0x48a44d(0x1b4)+_0x48a44d(0x1fd)+'<div>'+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x48a44d(0x1ac)+_0x48a44d(0x1b4)+_0x48a44d(0x1af)+'</div>'+'</div>'+'<hr\x20class=\x22my-3\x22>'+_0x48a44d(0x1b4)+_0x48a44d(0x1b0)+_0x3e973e[0x0]['head_staff_info']['name']+'</b>,\x20</span><br>'+_0x48a44d(0x1ac)+_0x48a44d(0x1b4)+_0x48a44d(0x200)+'</div>'+_0x48a44d(0x1b4)+_0x48a44d(0x1fe)+_0x87d199['invoice']+_0x48a44d(0x23c)+_0x48a44d(0x1b6)+_0x489dd3[_0x48a44d(0x1b5)]+'</b></span>\x20<br>'+'<span>\x20Request\x20Date:\x20<b>'+_0x87d199[_0x48a44d(0x1f2)]+_0x48a44d(0x238)+_0x48a44d(0x1ac)+_0x48a44d(0x246)+_0x48a44d(0x245)+_0x48a44d(0x1bb)+_0x48a44d(0x1d6)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x48a44d(0x1ec)+_0x48a44d(0x1f3)+_0x48a44d(0x229)+'</thead>'+_0x48a44d(0x1c0)+'\x20'+_0x2e8841+'\x20'+_0x48a44d(0x244)+_0x48a44d(0x1f5)+_0x48a44d(0x1b4)+_0x48a44d(0x239)+_0x31c639+_0x48a44d(0x1f7)+_0x48a44d(0x237)+'<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>'+_0x48a44d(0x1b8)+_0x48a44d(0x1ac)+_0x48a44d(0x241)+_0x48a44d(0x1e4)+_0x2efac2+_0x48a44d(0x23e)+_0x87d199[_0x48a44d(0x1c8)]+_0x48a44d(0x22f)+_0x48a44d(0x1d4)+_0x48a44d(0x1ac)+_0x48a44d(0x1b4)+'<strong>\x20Regards\x20</strong>'+_0x48a44d(0x1bd)+'</div>'+'</div>'+_0x48a44d(0x1ae)+_0x48a44d(0x1c4)};_0x24fa5c[_0x48a44d(0x1e5)](_0x413b91,function(_0xee4596,_0x2fb10b){var _0xdccd4c=_0x48a44d;_0xee4596?(console[_0xdccd4c(0x1eb)](_0xee4596),console['log']('Error\x20Occurs')):console['log']('Email\x20sent\x20successfully');}),_0x27cba9[_0x48a44d(0x1e7)](_0x48a44d(0x212),_0x48a44d(0x1e2)),_0x2a1344['redirect'](_0x48a44d(0x1f0)+_0x87d199[_0x48a44d(0x1c8)]);}catch(_0x572c9f){}}),router[a0_0x40ebc5(0x20c)]('/product_list',auth,async(_0x4c2745,_0x1f5f89)=>{var _0x2783b4=a0_0x40ebc5;try{const _0x50d92b=_0x4c2745[_0x2783b4(0x240)],_0x16d6ea=await profile[_0x2783b4(0x1ab)]({'email':_0x50d92b[_0x2783b4(0x1d8)]}),_0x442a90=await product[_0x2783b4(0x1de)]({'sales_category':_0x50d92b[_0x2783b4(0x1e1)]});_0x1f5f89[_0x2783b4(0x1e8)](_0x442a90);}catch(_0xd9a9cc){}}),router[a0_0x40ebc5(0x20c)](a0_0x40ebc5(0x1f6),auth,async(_0x29b25c,_0x4b9b2d)=>{var _0x22306d=a0_0x40ebc5;try{const _0x524cba=_0x29b25c['user'],{id_data:_0x15d668}=_0x29b25c[_0x22306d(0x22a)],_0x48c0ad=await profile[_0x22306d(0x1ab)]({'email':_0x524cba[_0x22306d(0x1d8)]}),_0x472d11=mongoose[_0x22306d(0x231)]['ObjectId'];var _0x165ef0=_0x472d11(_0x15d668);const _0x352ee3=await product[_0x22306d(0x1de)]({'_id':_0x165ef0});_0x4b9b2d['json'](_0x352ee3);}catch(_0x58a6cc){}}),module[a0_0x40ebc5(0x1b2)]=router;