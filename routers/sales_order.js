var a0_0x5b2234=a0_0x1035;(function(_0x4b42d1,_0x33c450){var _0x1b9ebf=a0_0x1035,_0x35017d=_0x4b42d1();while(!![]){try{var _0x5d1623=-parseInt(_0x1b9ebf(0x1eb))/0x1+parseInt(_0x1b9ebf(0x1d0))/0x2+-parseInt(_0x1b9ebf(0x25b))/0x3*(parseInt(_0x1b9ebf(0x217))/0x4)+parseInt(_0x1b9ebf(0x232))/0x5+parseInt(_0x1b9ebf(0x220))/0x6+-parseInt(_0x1b9ebf(0x25e))/0x7+parseInt(_0x1b9ebf(0x207))/0x8;if(_0x5d1623===_0x33c450)break;else _0x35017d['push'](_0x35017d['shift']());}catch(_0x5e27c8){_0x35017d['push'](_0x35017d['shift']());}}}(a0_0x47cb,0xdca37));function a0_0x47cb(){var _0x57ff3e=['staffs','$account_data','add_sales_order','<span>\x20Request\x20Date:\x20<b>','unit','secondary_unit','log','928052MzHYSN','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','wms_account_id','totalPrice','Error\x20Occurs','xlsx','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','$head_staff_info','Arabic','<h5>\x20JEC\x20SMS\x20</h5>','wms_data','prod_cat','Chinese','</tbody>','true','toString','<tr>','<tbody\x20style=\x22text-align:\x20center;\x22>','Hindi','../models/all_models','<table\x20style=\x22width:\x20100%\x20!important;\x22>','mongoose','language','<div>','padStart','post','save','product_list','15867872SlAaIK','primary_code','map','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','isFG','</td>','</b></span>\x20<br><br>','$invoice','$_id','$wms_account_confirm','get','price','</div>','success','_id','createTransport','4TyeXFy','Approval\x20for\x20','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','</table>','Spanish','date','/product_data','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','://','8186406AwFlyo','$accounting_account_confirm','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','/product_list',';christian.villamer@jakagroup.com','head_staff_info','French','sttaff_id','conversion_data','no_per_unit','password','\x22>Change\x20Status</a>','Sales\x20Order\x20is\x20ongoing','Portuguese','<div\x20style=\x22text-align:\x20center;\x22>','express','dicount_price','German','1726655DJsirv','getPrimUnitNo','forEach','$JD','</thead>','json','<br><br>','port','head_id_staff','tmpisFG','Types','findOne','name','Arabic\x20(ae)','real_qty_unit_val','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','../public/language/languages.json','quantity','render','</body></html>','Portuguese\x20(BR)','body','view_sales_order','/accounting_approval/','product_name','protocol','../middleware/auth','<br><br><br>','sendMail','user','product_id','dicount_price_adjust','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','adjustment_discount','</b>,\x20</span><br>','invoice_init','<html><head><title></title>','<h2>\x20JEC\x20SMS\x20</h2>','aggregate','flash','</b></span>\x20<br>','4361196iqTKql','English','invoice','11286555lALzpl','discount','find','email','errors','prod_name','$accounting_account_id','image','<span>\x20Requested\x20By:\x20<b>','ObjectId','/upload/','English\x20(US)','exceljs','2409336pvlkGO','findById','totalprice','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','/add_sales','$wms_account_id','$member.id_member','sale_product','valueOf','</tr>','$head_id_staff','nodemailer','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','exports','$member','$sale_product','Email\x20sent\x20successfully','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','$member.name','product_code'];a0_0x47cb=function(){return _0x57ff3e;};return a0_0x47cb();}const express=require(a0_0x5b2234(0x22f)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x5b2234(0x1fe)),auth=require(a0_0x5b2234(0x24c)),users=require(a0_0x5b2234(0x242)),excelJS=require(a0_0x5b2234(0x26a)),xlsx=require(a0_0x5b2234(0x1f0)),mongoose=require(a0_0x5b2234(0x200)),{ObjectId}=require('mongodb'),nodemailer=require(a0_0x5b2234(0x1db));function a0_0x1035(_0x52d3b2,_0x2ba48b){var _0x47cb6c=a0_0x47cb();return a0_0x1035=function(_0x1035da,_0x1ef484){_0x1035da=_0x1035da-0x1d0;var _0x1e8107=_0x47cb6c[_0x1035da];return _0x1e8107;},a0_0x1035(_0x52d3b2,_0x2ba48b);}router[a0_0x5b2234(0x211)]('/',auth,async(_0x3b4931,_0x2e5e26)=>{var _0x1fc60d=a0_0x5b2234;try{const _0x453b4a=await master_shop['find'](),_0x2beb09=_0x3b4931[_0x1fc60d(0x24f)],_0x207f36=await profile[_0x1fc60d(0x23d)]({'email':_0x2beb09[_0x1fc60d(0x261)]}),_0x4108a8=await staff[_0x1fc60d(0x23d)]({'email':_0x2beb09['email']}),_0x48fcd1=await sales_order[_0x1fc60d(0x258)]([{'$match':{'sales_staff_id':_0x4108a8['_id'][_0x1fc60d(0x1d8)]()}},{'$unwind':_0x1fc60d(0x1df)},{'$group':{'_id':_0x1fc60d(0x20f),'invoice':{'$first':_0x1fc60d(0x20e)},'customer':{'$first':'$customer'},'date':{'$first':'$date'},'JD':{'$first':_0x1fc60d(0x235)},'accounting_account_confirm':{'$first':_0x1fc60d(0x221)},'wms_account_confirm':{'$first':_0x1fc60d(0x210)},'totalQTY':{'$sum':'$sale_product.quantity'}}}]);if(_0x453b4a[0x0][_0x1fc60d(0x201)]==_0x1fc60d(0x269))var _0x26dacc=users[_0x1fc60d(0x25c)];else{if(_0x453b4a[0x0]['language']==_0x1fc60d(0x1fd))var _0x26dacc=users[_0x1fc60d(0x1fd)];else{if(_0x453b4a[0x0][_0x1fc60d(0x201)]==_0x1fc60d(0x231))var _0x26dacc=users[_0x1fc60d(0x231)];else{if(_0x453b4a[0x0][_0x1fc60d(0x201)]=='Spanish')var _0x26dacc=users[_0x1fc60d(0x21b)];else{if(_0x453b4a[0x0][_0x1fc60d(0x201)]==_0x1fc60d(0x226))var _0x26dacc=users[_0x1fc60d(0x226)];else{if(_0x453b4a[0x0][_0x1fc60d(0x201)]=='Portuguese\x20(BR)')var _0x26dacc=users['Portuguese'];else{if(_0x453b4a[0x0][_0x1fc60d(0x201)]=='Chinese')var _0x26dacc=users['Chinese'];else{if(_0x453b4a[0x0][_0x1fc60d(0x201)]==_0x1fc60d(0x23f))var _0x26dacc=users[_0x1fc60d(0x1f3)];}}}}}}}_0x2e5e26[_0x1fc60d(0x244)]('all_sales_order',{'success':_0x3b4931[_0x1fc60d(0x259)](_0x1fc60d(0x214)),'errors':_0x3b4931[_0x1fc60d(0x259)]('errors'),'master_shop':_0x453b4a,'profile':_0x207f36,'role':_0x2beb09,'language':_0x26dacc,'product_list':_0x4108a8[_0x1fc60d(0x206)],'sales_mine':_0x48fcd1,'staff_arr':_0x4108a8});}catch(_0x30351d){console[_0x1fc60d(0x1ea)](_0x30351d);}}),router[a0_0x5b2234(0x211)](a0_0x5b2234(0x1d4),auth,async(_0x334c01,_0x42529f)=>{var _0x5f33cb=a0_0x5b2234;try{const _0x4be105=await master_shop[_0x5f33cb(0x260)](),_0x4e4ffc=_0x334c01['user'],_0x477499=await profile['findOne']({'email':_0x4e4ffc['email']}),_0x31b8ee=await staff[_0x5f33cb(0x23d)]({'email':_0x4e4ffc[_0x5f33cb(0x261)]}),_0x46afe3=await customer[_0x5f33cb(0x260)]({'agent_id':_0x31b8ee['_id']});if(_0x4be105[0x0]['language']==_0x5f33cb(0x269))var _0x280085=users['English'];else{if(_0x4be105[0x0][_0x5f33cb(0x201)]=='Hindi')var _0x280085=users[_0x5f33cb(0x1fd)];else{if(_0x4be105[0x0][_0x5f33cb(0x201)]=='German')var _0x280085=users[_0x5f33cb(0x231)];else{if(_0x4be105[0x0][_0x5f33cb(0x201)]==_0x5f33cb(0x21b))var _0x280085=users['Spanish'];else{if(_0x4be105[0x0][_0x5f33cb(0x201)]==_0x5f33cb(0x226))var _0x280085=users[_0x5f33cb(0x226)];else{if(_0x4be105[0x0][_0x5f33cb(0x201)]==_0x5f33cb(0x246))var _0x280085=users[_0x5f33cb(0x22d)];else{if(_0x4be105[0x0]['language']==_0x5f33cb(0x1f7))var _0x280085=users['Chinese'];else{if(_0x4be105[0x0][_0x5f33cb(0x201)]=='Arabic\x20(ae)')var _0x280085=users[_0x5f33cb(0x1f3)];}}}}}}}_0x42529f[_0x5f33cb(0x244)](_0x5f33cb(0x1e6),{'success':_0x334c01[_0x5f33cb(0x259)](_0x5f33cb(0x214)),'errors':_0x334c01[_0x5f33cb(0x259)](_0x5f33cb(0x262)),'master_shop':_0x4be105,'profile':_0x477499,'role':_0x4e4ffc,'language':_0x280085,'customer':_0x46afe3,'staff_arr':_0x31b8ee});}catch(_0x5b9708){console[_0x5f33cb(0x1ea)](_0x5b9708);}}),router['get']('/view_sales/:id',auth,async(_0x51bbf6,_0x327323)=>{var _0xfbe444=a0_0x5b2234;try{const _0x8b7cf0=await master_shop['find'](),_0x25409c=_0x51bbf6[_0xfbe444(0x24f)],_0x3ca72a=await profile[_0xfbe444(0x23d)]({'email':_0x25409c['email']}),_0x7dff6=await staff[_0xfbe444(0x23d)]({'email':_0x25409c[_0xfbe444(0x261)]}),_0x3b9d32=await customer['find']({'agent_id':_0x7dff6[_0xfbe444(0x215)]}),_0x336fba=mongoose['Types']['ObjectId'],_0x2d65a6=_0x51bbf6['params']['id'],_0x17bc81=await sales_order[_0xfbe444(0x1d1)](_0x2d65a6),_0x311fa9=await sales_order['aggregate']([{'$match':{'_id':_0x336fba(_0x2d65a6)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0xfbe444(0x264)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0xfbe444(0x1d5)}}},{'$lookup':{'from':_0xfbe444(0x1e4),'localField':'accounting_account_id','foreignField':'_id','as':'account_data'}},{'$unwind':_0xfbe444(0x1e5)},{'$lookup':{'from':_0xfbe444(0x1e4),'localField':_0xfbe444(0x1ed),'foreignField':_0xfbe444(0x215),'as':_0xfbe444(0x1f5)}},{'$unwind':{'path':'$wms_data','preserveNullAndEmptyArrays':!![]}}]);if(_0x8b7cf0[0x0][_0xfbe444(0x201)]==_0xfbe444(0x269))var _0x3612dc=users[_0xfbe444(0x25c)];else{if(_0x8b7cf0[0x0]['language']=='Hindi')var _0x3612dc=users['Hindi'];else{if(_0x8b7cf0[0x0][_0xfbe444(0x201)]==_0xfbe444(0x231))var _0x3612dc=users[_0xfbe444(0x231)];else{if(_0x8b7cf0[0x0]['language']==_0xfbe444(0x21b))var _0x3612dc=users['Spanish'];else{if(_0x8b7cf0[0x0][_0xfbe444(0x201)]==_0xfbe444(0x226))var _0x3612dc=users[_0xfbe444(0x226)];else{if(_0x8b7cf0[0x0]['language']==_0xfbe444(0x246))var _0x3612dc=users['Portuguese'];else{if(_0x8b7cf0[0x0]['language']==_0xfbe444(0x1f7))var _0x3612dc=users[_0xfbe444(0x1f7)];else{if(_0x8b7cf0[0x0][_0xfbe444(0x201)]=='Arabic\x20(ae)')var _0x3612dc=users[_0xfbe444(0x1f3)];}}}}}}}_0x327323[_0xfbe444(0x244)](_0xfbe444(0x248),{'success':_0x51bbf6[_0xfbe444(0x259)](_0xfbe444(0x214)),'errors':_0x51bbf6['flash'](_0xfbe444(0x262)),'master_shop':_0x8b7cf0,'profile':_0x3ca72a,'role':_0x25409c,'language':_0x3612dc,'customer':_0x3b9d32,'sales_sa':_0x17bc81,'approvers':_0x311fa9[0x0],'staff_arr':_0x7dff6});}catch(_0x8dca20){console[_0xfbe444(0x1ea)](_0x8dca20);}}),router[a0_0x5b2234(0x204)](a0_0x5b2234(0x1d4),auth,async(_0x515774,_0x41f91e)=>{var _0x127620=a0_0x5b2234;try{const {customer:_0x5ee50b,date:_0x5bfb26,prod_code:_0x4b13ae,note:_0x3a5919,paid_status:_0x4e4683,JD:_0xa0f310,po_number:_0x5a969e,desire_date:_0x1d3efb}=_0x515774['body'];if(typeof _0x4b13ae=='string')var _0xc82549=[_0x515774[_0x127620(0x247)]['prod_code']],_0x17fa84=[_0x515774['body'][_0x127620(0x263)]],_0x4a5323=[_0x515774[_0x127620(0x247)][_0x127620(0x208)]],_0x23f845=[_0x515774[_0x127620(0x247)][_0x127620(0x243)]],_0x30d803=[_0x515774['body']['unit']],_0x26633e=[_0x515774[_0x127620(0x247)][_0x127620(0x250)]],_0x543dce=[_0x515774['body'][_0x127620(0x212)]],_0x6e182b=[_0x515774[_0x127620(0x247)][_0x127620(0x1ee)]],_0x487c57=[_0x515774['body'][_0x127620(0x230)]],_0x2f8bac=[_0x515774['body'][_0x127620(0x23b)]],_0xac105b=[_0x515774[_0x127620(0x247)][_0x127620(0x251)]],_0xf14222=[_0x515774['body'][_0x127620(0x229)]],_0x23e0b3=[_0x515774[_0x127620(0x247)][_0x127620(0x233)]],_0x405c28=[_0x515774[_0x127620(0x247)][_0x127620(0x1f6)]],_0x25d9a9=[_0x515774[_0x127620(0x247)][_0x127620(0x1e9)]],_0x161df0=[_0x515774[_0x127620(0x247)]['conversion_unit']];else var _0xc82549=[..._0x515774[_0x127620(0x247)]['prod_code']],_0x17fa84=[..._0x515774[_0x127620(0x247)][_0x127620(0x263)]],_0x4a5323=[..._0x515774[_0x127620(0x247)][_0x127620(0x208)]],_0x23f845=[..._0x515774[_0x127620(0x247)][_0x127620(0x243)]],_0x30d803=[..._0x515774[_0x127620(0x247)][_0x127620(0x1e8)]],_0x26633e=[..._0x515774[_0x127620(0x247)]['product_id']],_0x543dce=[..._0x515774['body'][_0x127620(0x212)]],_0x6e182b=[..._0x515774['body'][_0x127620(0x1ee)]],_0x487c57=[..._0x515774[_0x127620(0x247)][_0x127620(0x230)]],_0x2f8bac=[..._0x515774[_0x127620(0x247)][_0x127620(0x23b)]],_0xac105b=[..._0x515774[_0x127620(0x247)][_0x127620(0x251)]],_0xf14222=[..._0x515774[_0x127620(0x247)][_0x127620(0x229)]],_0x23e0b3=[..._0x515774[_0x127620(0x247)][_0x127620(0x233)]],_0x405c28=[..._0x515774['body']['prod_cat']],_0x25d9a9=[..._0x515774[_0x127620(0x247)][_0x127620(0x1e9)]],_0x161df0=[..._0x515774[_0x127620(0x247)]['conversion_unit']];const _0x5f33f0=_0xc82549[_0x127620(0x209)](_0x1aead0=>{return _0x1aead0={'product_code':_0x1aead0};});_0x17fa84['forEach']((_0x674e2f,_0x5f9513)=>{var _0x4a13d3=_0x127620;_0x5f33f0[_0x5f9513][_0x4a13d3(0x24a)]=_0x674e2f;}),_0x4a5323[_0x127620(0x234)]((_0x3fc6f6,_0x4080d6)=>{_0x5f33f0[_0x4080d6]['primary_code']=_0x3fc6f6;}),_0x23f845['forEach']((_0x2aa548,_0x45a9dd)=>{var _0x1b10bf=_0x127620;_0x5f33f0[_0x45a9dd][_0x1b10bf(0x243)]=_0x2aa548;}),_0x30d803[_0x127620(0x234)]((_0x408874,_0x144fcb)=>{var _0x4af804=_0x127620;_0x5f33f0[_0x144fcb][_0x4af804(0x1e8)]=_0x408874;}),_0x26633e[_0x127620(0x234)]((_0x329aba,_0x52e815)=>{_0x5f33f0[_0x52e815]['product_id']=_0x329aba;}),_0xac105b['forEach']((_0x273209,_0x4ddc1f)=>{var _0x2ee838=_0x127620;_0x5f33f0[_0x4ddc1f][_0x2ee838(0x253)]=_0x273209;}),_0x543dce[_0x127620(0x234)]((_0x29aa76,_0x2705b0)=>{var _0x48a9b3=_0x127620;_0x5f33f0[_0x2705b0][_0x48a9b3(0x212)]=_0x29aa76;}),_0x6e182b['forEach']((_0x1637d6,_0x374008)=>{var _0x29e820=_0x127620;_0x5f33f0[_0x374008][_0x29e820(0x1d2)]=_0x1637d6;}),_0x487c57['forEach']((_0x510430,_0x1b44f9)=>{var _0x1b1d70=_0x127620;_0x5f33f0[_0x1b44f9][_0x1b1d70(0x25f)]=_0x510430;}),_0x2f8bac['forEach']((_0xb446bd,_0x549ece)=>{var _0x379b7a=_0x127620;_0x5f33f0[_0x549ece][_0x379b7a(0x20b)]=_0xb446bd;}),_0x25d9a9['forEach']((_0x3b4994,_0x41baf9)=>{var _0x5648f7=_0x127620;_0x5f33f0[_0x41baf9][_0x5648f7(0x1e9)]=_0x3b4994;}),_0x23e0b3[_0x127620(0x234)]((_0x530e2f,_0x3f5e4a)=>{var _0x3572b9=_0x127620;_0x5f33f0[_0x3f5e4a][_0x3572b9(0x240)]=_0x530e2f;}),_0x405c28[_0x127620(0x234)]((_0x22cb48,_0x4453cd)=>{var _0x55f03e=_0x127620;_0x5f33f0[_0x4453cd][_0x55f03e(0x1f6)]=_0x22cb48;}),_0x161df0[_0x127620(0x234)]((_0x28c9da,_0x4f4445)=>{var _0x139e13=_0x127620;_0x5f33f0[_0x4f4445][_0x139e13(0x228)]=_0x28c9da;}),_0xf14222[_0x127620(0x234)]((_0x180bea,_0x3a4202)=>{var _0x474dac=_0x127620;_0x5f33f0[_0x3a4202][_0x474dac(0x229)]=_0x180bea;});const _0x5a2657=await approver_acct[_0x127620(0x258)]([{'$unwind':_0x127620(0x1de)},{'$match':{'member.id_member':_0x515774[_0x127620(0x24f)][_0x127620(0x227)]}},{'$group':{'_id':{'id_member':_0x127620(0x1d6),'name':_0x127620(0x1e2)},'head_id_staff':{'$first':_0x127620(0x1da)}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x127620(0x1da)}}},{'$lookup':{'from':_0x127620(0x1e4),'localField':'head_id_staff_id','foreignField':_0x127620(0x215),'as':_0x127620(0x225)}},{'$unwind':_0x127620(0x1f2)}]),_0x3bd080=new invoice_for_sales_order();await _0x3bd080[_0x127620(0x205)]();const _0x1dcca3=_0x515774[_0x127620(0x24f)],_0x2be37f=await staff[_0x127620(0x23d)]({'email':_0x1dcca3[_0x127620(0x261)]}),_0x2aa19b=new sales_order({'invoice':_0x3bd080[_0x127620(0x255)][_0x127620(0x1fa)]()[_0x127620(0x203)](0x8,'0'),'customer':_0x5ee50b,'date':_0x5bfb26,'sale_product':_0x5f33f0,'note':_0x3a5919,'sales_staff_id':_0x2be37f[_0x127620(0x215)][_0x127620(0x1d8)](),'JD':_0xa0f310,'accounting_account_id':_0x5a2657[0x0][_0x127620(0x23a)],'po_number':_0x5a969e,'desired_delivery':_0x1d3efb,'wms_account_confirm':_0x127620(0x1f9),'accounting_account_confirm':_0x127620(0x1f9)}),_0x4a2a2e=await _0x2aa19b[_0x127620(0x205)]();var _0xb6b91a=_0x4a2a2e[_0x127620(0x1d7)],_0x41f984='',_0x2bc58d,_0x199c66=0x0;for(_0x2bc58d in _0xb6b91a){_0x41f984+=_0x127620(0x1fb)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xb6b91a[_0x2bc58d]['product_name']+_0x127620(0x20c)+_0x127620(0x241)+_0xb6b91a[_0x2bc58d][_0x127620(0x1e3)]+_0x127620(0x20c)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xb6b91a[_0x2bc58d][_0x127620(0x243)]+'</td>'+_0x127620(0x241)+_0xb6b91a[_0x2bc58d]['unit']+_0x127620(0x20c)+_0x127620(0x1d9),_0x199c66+=parseInt(_0xb6b91a[_0x2bc58d][_0x127620(0x243)]);}const _0x39bd11=await master_shop[_0x127620(0x260)](),_0x2ceaa1=await email_settings[_0x127620(0x23d)]();let _0x5c6970=nodemailer[_0x127620(0x216)]({'port':Number(_0x2ceaa1[_0x127620(0x239)]),'secure':![],'auth':{'user':_0x2ceaa1['email'],'pass':_0x2ceaa1[_0x127620(0x22a)]}});const _0x558c29=_0x515774[_0x127620(0x24b)]+_0x127620(0x21f)+_0x515774['headers']['host'];let _0xbddb1a={'from':_0x2ceaa1['email'],'to':_0x5a2657[0x0][_0x127620(0x225)][_0x127620(0x261)]+_0x127620(0x224),'subject':_0x127620(0x218)+_0x4a2a2e['invoice'],'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x127620(0x268)+_0x39bd11[0x0][_0x127620(0x265)],'cid':'logo'}],'html':'<!DOCTYPE\x20html>'+_0x127620(0x256)+_0x127620(0x1ec)+'</head><body>'+_0x127620(0x202)+_0x127620(0x1d3)+_0x127620(0x202)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x127620(0x213)+_0x127620(0x202)+_0x127620(0x257)+_0x127620(0x213)+_0x127620(0x213)+'<hr\x20class=\x22my-3\x22>'+'<div>'+'<span>\x20Dear\x20<b>'+_0x5a2657[0x0][_0x127620(0x225)][_0x127620(0x23e)]+_0x127620(0x254)+_0x127620(0x213)+_0x127620(0x202)+'<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>'+_0x127620(0x213)+_0x127620(0x202)+'<span>\x20Request\x20ID:\x20<b>'+_0x4a2a2e[_0x127620(0x25d)]+_0x127620(0x25a)+_0x127620(0x266)+_0x2be37f[_0x127620(0x23e)]+_0x127620(0x25a)+_0x127620(0x1e7)+_0x4a2a2e[_0x127620(0x21c)]+_0x127620(0x20d)+_0x127620(0x213)+_0x127620(0x1ff)+_0x127620(0x1f1)+'<tr>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+_0x127620(0x222)+_0x127620(0x20a)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x127620(0x1d9)+_0x127620(0x236)+_0x127620(0x1fc)+'\x20'+_0x41f984+'\x20'+_0x127620(0x1f8)+_0x127620(0x21a)+_0x127620(0x202)+_0x127620(0x1dc)+_0x199c66+'</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>'+_0x127620(0x21e)+_0x127620(0x252)+_0x127620(0x24d)+_0x127620(0x213)+_0x127620(0x22e)+_0x127620(0x219)+_0x558c29+_0x127620(0x249)+_0x4a2a2e[_0x127620(0x215)]+_0x127620(0x22b)+_0x127620(0x238)+_0x127620(0x213)+_0x127620(0x202)+'<strong>\x20Regards\x20</strong>'+_0x127620(0x1f4)+'</div>'+_0x127620(0x213)+_0x127620(0x1e1)+_0x127620(0x245)};_0x5c6970[_0x127620(0x24e)](_0xbddb1a,function(_0x28f6e7,_0x2b8e4d){var _0x520079=_0x127620;_0x28f6e7?(console[_0x520079(0x1ea)](_0x28f6e7),console[_0x520079(0x1ea)](_0x520079(0x1ef))):console[_0x520079(0x1ea)](_0x520079(0x1e0));}),_0x515774[_0x127620(0x259)]('success',_0x127620(0x22c)),_0x41f91e['redirect']('/sales_order/view_sales/'+_0x4a2a2e['_id']);}catch(_0x120a40){}}),router[a0_0x5b2234(0x204)](a0_0x5b2234(0x223),auth,async(_0x2e226c,_0x7c3c1)=>{var _0x3ab34b=a0_0x5b2234;try{const _0x2275c3=_0x2e226c[_0x3ab34b(0x24f)],_0xbd1030=await profile[_0x3ab34b(0x23d)]({'email':_0x2275c3[_0x3ab34b(0x261)]}),_0x3c2b43=await product[_0x3ab34b(0x260)]({'sales_category':_0x2275c3['sales_category']});_0x7c3c1[_0x3ab34b(0x237)](_0x3c2b43);}catch(_0x54dc0f){}}),router[a0_0x5b2234(0x204)](a0_0x5b2234(0x21d),auth,async(_0x1a0994,_0x250fa0)=>{var _0x460071=a0_0x5b2234;try{const _0x16b326=_0x1a0994[_0x460071(0x24f)],{id_data:_0x31b926}=_0x1a0994['body'],_0x227edb=await profile[_0x460071(0x23d)]({'email':_0x16b326[_0x460071(0x261)]}),_0x31661e=mongoose[_0x460071(0x23c)][_0x460071(0x267)];var _0x2bebe9=_0x31661e(_0x31b926);const _0x7f3c4c=await product[_0x460071(0x260)]({'_id':_0x2bebe9});_0x250fa0[_0x460071(0x237)](_0x7f3c4c);}catch(_0x57e8f5){}}),module[a0_0x5b2234(0x1dd)]=router;