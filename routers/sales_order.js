var a0_0x4db2ef=a0_0x485e;(function(_0x5057a5,_0x45e529){var _0x17f0f8=a0_0x485e,_0x4d3527=_0x5057a5();while(!![]){try{var _0x59e4bc=-parseInt(_0x17f0f8(0x1e9))/0x1+parseInt(_0x17f0f8(0x221))/0x2*(parseInt(_0x17f0f8(0x216))/0x3)+-parseInt(_0x17f0f8(0x1ba))/0x4+parseInt(_0x17f0f8(0x1a9))/0x5*(parseInt(_0x17f0f8(0x1cf))/0x6)+-parseInt(_0x17f0f8(0x227))/0x7+parseInt(_0x17f0f8(0x1ea))/0x8*(-parseInt(_0x17f0f8(0x193))/0x9)+parseInt(_0x17f0f8(0x1cc))/0xa;if(_0x59e4bc===_0x45e529)break;else _0x4d3527['push'](_0x4d3527['shift']());}catch(_0x63451e){_0x4d3527['push'](_0x4d3527['shift']());}}}(a0_0x3421,0x72bdb));function a0_0x3421(){var _0x1d9456=['get','<div\x20style=\x22text-align:\x20center;\x22>','German','staffs','errors','nodemailer','head_id_staff_id','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','</tbody>','</head><body>','ObjectId','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','no_per_unit','<br><br>','Approval\x20for\x20','prod_cat','$head_staff_info','25299670YktFly','host','true','30SFwLTq','sale_product','language','://','conversion_unit','</b></span>\x20<br>','xlsx','</td>','date','$member.id_member','view_sales_order','<div>','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','product_name','tmpisFG','exceljs','Router','$wms_data','<span>\x20Dear\x20<b>','wms_account_id','product_id','sttaff_id','/view_sales/:id','$accounting_account_confirm','price','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','228646nCJupc','5577008PqzpeC','../models/all_models','</tr>','findById','Types','<tr>','/product_data','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','Hindi','body','Portuguese\x20(BR)','find','Arabic\x20(ae)','password','/add_sales','\x22>Change\x20Status</a>','invoice','$wms_account_id','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','/product_list','/accounting_approval/','/sales_order/view_sales/','add_sales_order','_id','dicount_price_adjust','name',';christian.villamer@jakagroup.com','findOne','</b></span>\x20<br><br>','secondary_unit','user','exports','post','flash','image','mongodb','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','</body></html>','/../public','product_code','dicount_price','<!DOCTYPE\x20html>','../middleware/auth','valueOf','51ZGbxMh','redirect','</b>,\x20</span><br>','<table\x20style=\x22width:\x20100%\x20!important;\x22>','totalprice','$member','<span>\x20Requested\x20By:\x20<b>','unit','invoice_init','quantity','getPrimUnitNo','6038fWjKMb','</div>','log','<strong>\x20Regards\x20</strong>','<br><br><br>','wms_data','2331553fOtMqm','Error\x20Occurs','aggregate','$head_id_staff','prod_name','map','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','success','account_data','email','Logo.png','$account_data','render','isFG','9hxZvvV','English','$_id','primary_code','</table>','French','protocol','Arabic','head_staff_info','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','sendMail','$date','logo','</thead>','adjustment_discount','Spanish','params','<html><head><title></title>','save','<span>\x20Request\x20Date:\x20<b>','$accounting_account_id','product_list','84395qISHtX','discount','<h5>\x20JEC\x20SMS\x20</h5>','json','$member.name','createTransport','Chinese','padStart','<span>\x20Request\x20ID:\x20<b>','head_id_staff','mongoose','real_qty_unit_val','forEach','toString','Portuguese','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','English\x20(US)','3747420uAyCTs'];a0_0x3421=function(){return _0x1d9456;};return a0_0x3421();}function a0_0x485e(_0x1caabc,_0x21e0a9){var _0x34219f=a0_0x3421();return a0_0x485e=function(_0x485e05,_0x2c6b9a){_0x485e05=_0x485e05-0x190;var _0x310342=_0x34219f[_0x485e05];return _0x310342;},a0_0x485e(_0x1caabc,_0x21e0a9);}const express=require('express'),app=express(),router=express[a0_0x4db2ef(0x1df)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x4db2ef(0x1eb)),auth=require(a0_0x4db2ef(0x214)),users=require('../public/language/languages.json'),excelJS=require(a0_0x4db2ef(0x1de)),xlsx=require(a0_0x4db2ef(0x1d5)),mongoose=require(a0_0x4db2ef(0x1b3)),{ObjectId}=require(a0_0x4db2ef(0x20d)),nodemailer=require(a0_0x4db2ef(0x1c0));router[a0_0x4db2ef(0x1bb)]('/',auth,async(_0x1629b1,_0x1b67a5)=>{var _0x45fa6e=a0_0x4db2ef;try{const _0x79cd3f=await master_shop['find'](),_0x545c81=_0x1629b1[_0x45fa6e(0x208)],_0x2ee7c5=await profile['findOne']({'email':_0x545c81[_0x45fa6e(0x230)]}),_0x323178=await staff[_0x45fa6e(0x205)]({'email':_0x545c81[_0x45fa6e(0x230)]}),_0x13ad0a=await sales_order[_0x45fa6e(0x229)]([{'$match':{'sales_staff_id':_0x323178['_id'][_0x45fa6e(0x215)]()}},{'$unwind':'$sale_product'},{'$group':{'_id':_0x45fa6e(0x195),'invoice':{'$first':'$invoice'},'customer':{'$first':'$customer'},'date':{'$first':_0x45fa6e(0x19e)},'JD':{'$first':'$JD'},'accounting_account_confirm':{'$first':_0x45fa6e(0x1e6)},'wms_account_confirm':{'$first':'$wms_account_confirm'},'totalQTY':{'$sum':'$sale_product.quantity'}}}]);if(_0x79cd3f[0x0]['language']==_0x45fa6e(0x1b9))var _0x24d4d8=users[_0x45fa6e(0x194)];else{if(_0x79cd3f[0x0][_0x45fa6e(0x1d1)]==_0x45fa6e(0x1f2))var _0x24d4d8=users[_0x45fa6e(0x1f2)];else{if(_0x79cd3f[0x0][_0x45fa6e(0x1d1)]=='German')var _0x24d4d8=users['German'];else{if(_0x79cd3f[0x0][_0x45fa6e(0x1d1)]==_0x45fa6e(0x1a2))var _0x24d4d8=users['Spanish'];else{if(_0x79cd3f[0x0][_0x45fa6e(0x1d1)]=='French')var _0x24d4d8=users[_0x45fa6e(0x198)];else{if(_0x79cd3f[0x0][_0x45fa6e(0x1d1)]=='Portuguese\x20(BR)')var _0x24d4d8=users[_0x45fa6e(0x1b7)];else{if(_0x79cd3f[0x0][_0x45fa6e(0x1d1)]==_0x45fa6e(0x1af))var _0x24d4d8=users[_0x45fa6e(0x1af)];else{if(_0x79cd3f[0x0][_0x45fa6e(0x1d1)]==_0x45fa6e(0x1f6))var _0x24d4d8=users[_0x45fa6e(0x19a)];}}}}}}}_0x1b67a5[_0x45fa6e(0x191)]('all_sales_order',{'success':_0x1629b1[_0x45fa6e(0x20b)]('success'),'errors':_0x1629b1[_0x45fa6e(0x20b)](_0x45fa6e(0x1bf)),'master_shop':_0x79cd3f,'profile':_0x2ee7c5,'role':_0x545c81,'language':_0x24d4d8,'product_list':_0x323178[_0x45fa6e(0x1a8)],'sales_mine':_0x13ad0a,'staff_arr':_0x323178});}catch(_0x28fa26){console[_0x45fa6e(0x223)](_0x28fa26);}}),router[a0_0x4db2ef(0x1bb)]('/add_sales',auth,async(_0x178cdb,_0x2a5a34)=>{var _0x204a5c=a0_0x4db2ef;try{const _0xbec505=await master_shop[_0x204a5c(0x1f5)](),_0x1dc5c0=_0x178cdb[_0x204a5c(0x208)],_0x208628=await profile[_0x204a5c(0x205)]({'email':_0x1dc5c0[_0x204a5c(0x230)]}),_0x12a63e=await staff[_0x204a5c(0x205)]({'email':_0x1dc5c0['email']}),_0x1d1ca3=await customer['find']({'agent_id':_0x12a63e[_0x204a5c(0x201)]});if(_0xbec505[0x0][_0x204a5c(0x1d1)]==_0x204a5c(0x1b9))var _0x36bb71=users[_0x204a5c(0x194)];else{if(_0xbec505[0x0]['language']==_0x204a5c(0x1f2))var _0x36bb71=users[_0x204a5c(0x1f2)];else{if(_0xbec505[0x0][_0x204a5c(0x1d1)]==_0x204a5c(0x1bd))var _0x36bb71=users['German'];else{if(_0xbec505[0x0]['language']=='Spanish')var _0x36bb71=users[_0x204a5c(0x1a2)];else{if(_0xbec505[0x0][_0x204a5c(0x1d1)]==_0x204a5c(0x198))var _0x36bb71=users[_0x204a5c(0x198)];else{if(_0xbec505[0x0]['language']==_0x204a5c(0x1f4))var _0x36bb71=users[_0x204a5c(0x1b7)];else{if(_0xbec505[0x0][_0x204a5c(0x1d1)]=='Chinese')var _0x36bb71=users[_0x204a5c(0x1af)];else{if(_0xbec505[0x0][_0x204a5c(0x1d1)]==_0x204a5c(0x1f6))var _0x36bb71=users[_0x204a5c(0x19a)];}}}}}}}_0x2a5a34['render'](_0x204a5c(0x200),{'success':_0x178cdb[_0x204a5c(0x20b)](_0x204a5c(0x22e)),'errors':_0x178cdb['flash'](_0x204a5c(0x1bf)),'master_shop':_0xbec505,'profile':_0x208628,'role':_0x1dc5c0,'language':_0x36bb71,'customer':_0x1d1ca3,'staff_arr':_0x12a63e});}catch(_0x116036){console['log'](_0x116036);}}),router[a0_0x4db2ef(0x1bb)](a0_0x4db2ef(0x1e5),auth,async(_0x398383,_0x434873)=>{var _0x36005f=a0_0x4db2ef;try{const _0x21f1f2=await master_shop['find'](),_0x53afc9=_0x398383[_0x36005f(0x208)],_0x16df5c=await profile[_0x36005f(0x205)]({'email':_0x53afc9[_0x36005f(0x230)]}),_0x27494c=await staff[_0x36005f(0x205)]({'email':_0x53afc9[_0x36005f(0x230)]}),_0x6598c8=await customer[_0x36005f(0x1f5)]({'agent_id':_0x27494c[_0x36005f(0x201)]}),_0x3099cc=mongoose[_0x36005f(0x1ee)][_0x36005f(0x1c5)],_0x1beed8=_0x398383[_0x36005f(0x1a3)]['id'],_0x49a653=await sales_order[_0x36005f(0x1ed)](_0x1beed8),_0x264087=await sales_order['aggregate']([{'$match':{'_id':_0x3099cc(_0x1beed8)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x36005f(0x1a7)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x36005f(0x1fb)}}},{'$lookup':{'from':_0x36005f(0x1be),'localField':'accounting_account_id','foreignField':'_id','as':_0x36005f(0x22f)}},{'$unwind':_0x36005f(0x190)},{'$lookup':{'from':'staffs','localField':_0x36005f(0x1e2),'foreignField':'_id','as':_0x36005f(0x226)}},{'$unwind':{'path':_0x36005f(0x1e0),'preserveNullAndEmptyArrays':!![]}}]);if(_0x21f1f2[0x0]['language']==_0x36005f(0x1b9))var _0x44affa=users[_0x36005f(0x194)];else{if(_0x21f1f2[0x0][_0x36005f(0x1d1)]==_0x36005f(0x1f2))var _0x44affa=users[_0x36005f(0x1f2)];else{if(_0x21f1f2[0x0]['language']==_0x36005f(0x1bd))var _0x44affa=users[_0x36005f(0x1bd)];else{if(_0x21f1f2[0x0][_0x36005f(0x1d1)]==_0x36005f(0x1a2))var _0x44affa=users[_0x36005f(0x1a2)];else{if(_0x21f1f2[0x0][_0x36005f(0x1d1)]==_0x36005f(0x198))var _0x44affa=users[_0x36005f(0x198)];else{if(_0x21f1f2[0x0]['language']=='Portuguese\x20(BR)')var _0x44affa=users[_0x36005f(0x1b7)];else{if(_0x21f1f2[0x0][_0x36005f(0x1d1)]==_0x36005f(0x1af))var _0x44affa=users[_0x36005f(0x1af)];else{if(_0x21f1f2[0x0][_0x36005f(0x1d1)]==_0x36005f(0x1f6))var _0x44affa=users['Arabic'];}}}}}}}_0x434873[_0x36005f(0x191)](_0x36005f(0x1d9),{'success':_0x398383[_0x36005f(0x20b)](_0x36005f(0x22e)),'errors':_0x398383[_0x36005f(0x20b)]('errors'),'master_shop':_0x21f1f2,'profile':_0x16df5c,'role':_0x53afc9,'language':_0x44affa,'customer':_0x6598c8,'sales_sa':_0x49a653,'approvers':_0x264087[0x0],'staff_arr':_0x27494c});}catch(_0x4cff20){console[_0x36005f(0x223)](_0x4cff20);}}),router[a0_0x4db2ef(0x20a)](a0_0x4db2ef(0x1f8),auth,async(_0x38326b,_0xbe8ef9)=>{var _0x10d754=a0_0x4db2ef;try{const {customer:_0x2a6699,date:_0x26cd57,prod_code:_0x1559df,note:_0x344a83,paid_status:_0x1303aa,JD:_0x6e7db6,po_number:_0x18dd0f,desire_date:_0x503d51}=_0x38326b[_0x10d754(0x1f3)];if(typeof _0x1559df=='string')var _0x571fdc=[_0x38326b[_0x10d754(0x1f3)]['prod_code']],_0x5f2c0e=[_0x38326b['body'][_0x10d754(0x22b)]],_0x5c86c1=[_0x38326b[_0x10d754(0x1f3)][_0x10d754(0x196)]],_0x2ff534=[_0x38326b[_0x10d754(0x1f3)][_0x10d754(0x21f)]],_0x557580=[_0x38326b[_0x10d754(0x1f3)]['unit']],_0xd2e6e8=[_0x38326b[_0x10d754(0x1f3)][_0x10d754(0x1e3)]],_0x7414=[_0x38326b[_0x10d754(0x1f3)][_0x10d754(0x1e7)]],_0x47744c=[_0x38326b[_0x10d754(0x1f3)]['totalPrice']],_0x20b99d=[_0x38326b[_0x10d754(0x1f3)][_0x10d754(0x212)]],_0xff5754=[_0x38326b['body'][_0x10d754(0x1dd)]],_0x4d30a2=[_0x38326b[_0x10d754(0x1f3)][_0x10d754(0x202)]],_0x5646f3=[_0x38326b[_0x10d754(0x1f3)]['no_per_unit']],_0xf1d9db=[_0x38326b[_0x10d754(0x1f3)][_0x10d754(0x220)]],_0x5a18ca=[_0x38326b['body'][_0x10d754(0x1ca)]],_0x5a7ee2=[_0x38326b[_0x10d754(0x1f3)][_0x10d754(0x207)]],_0x46304c=[_0x38326b['body']['conversion_unit']];else var _0x571fdc=[..._0x38326b[_0x10d754(0x1f3)]['prod_code']],_0x5f2c0e=[..._0x38326b[_0x10d754(0x1f3)]['prod_name']],_0x5c86c1=[..._0x38326b[_0x10d754(0x1f3)][_0x10d754(0x196)]],_0x2ff534=[..._0x38326b[_0x10d754(0x1f3)][_0x10d754(0x21f)]],_0x557580=[..._0x38326b['body'][_0x10d754(0x21d)]],_0xd2e6e8=[..._0x38326b[_0x10d754(0x1f3)][_0x10d754(0x1e3)]],_0x7414=[..._0x38326b['body'][_0x10d754(0x1e7)]],_0x47744c=[..._0x38326b[_0x10d754(0x1f3)]['totalPrice']],_0x20b99d=[..._0x38326b['body'][_0x10d754(0x212)]],_0xff5754=[..._0x38326b[_0x10d754(0x1f3)]['tmpisFG']],_0x4d30a2=[..._0x38326b[_0x10d754(0x1f3)]['dicount_price_adjust']],_0x5646f3=[..._0x38326b[_0x10d754(0x1f3)][_0x10d754(0x1c7)]],_0xf1d9db=[..._0x38326b[_0x10d754(0x1f3)][_0x10d754(0x220)]],_0x5a18ca=[..._0x38326b[_0x10d754(0x1f3)]['prod_cat']],_0x5a7ee2=[..._0x38326b[_0x10d754(0x1f3)][_0x10d754(0x207)]],_0x46304c=[..._0x38326b[_0x10d754(0x1f3)][_0x10d754(0x1d3)]];const _0xa0a68b=_0x571fdc[_0x10d754(0x22c)](_0x3bc6cc=>{return _0x3bc6cc={'product_code':_0x3bc6cc};});_0x5f2c0e[_0x10d754(0x1b5)]((_0x54d318,_0x5094dc)=>{var _0x153daa=_0x10d754;_0xa0a68b[_0x5094dc][_0x153daa(0x1dc)]=_0x54d318;}),_0x5c86c1[_0x10d754(0x1b5)]((_0x2ab7fb,_0x3cdf4c)=>{var _0x2a4036=_0x10d754;_0xa0a68b[_0x3cdf4c][_0x2a4036(0x196)]=_0x2ab7fb;}),_0x2ff534[_0x10d754(0x1b5)]((_0x3e721b,_0x40bc13)=>{_0xa0a68b[_0x40bc13]['quantity']=_0x3e721b;}),_0x557580[_0x10d754(0x1b5)]((_0x269763,_0x276a9f)=>{var _0x219c66=_0x10d754;_0xa0a68b[_0x276a9f][_0x219c66(0x21d)]=_0x269763;}),_0xd2e6e8['forEach']((_0x58928b,_0x10ce69)=>{var _0x5ecaa2=_0x10d754;_0xa0a68b[_0x10ce69][_0x5ecaa2(0x1e3)]=_0x58928b;}),_0x4d30a2[_0x10d754(0x1b5)]((_0x506c41,_0x423ce1)=>{var _0x178e09=_0x10d754;_0xa0a68b[_0x423ce1][_0x178e09(0x1a1)]=_0x506c41;}),_0x7414[_0x10d754(0x1b5)]((_0x2ca15a,_0x4dcbaa)=>{_0xa0a68b[_0x4dcbaa]['price']=_0x2ca15a;}),_0x47744c['forEach']((_0x7d4ec4,_0x20d3b3)=>{var _0x1e7791=_0x10d754;_0xa0a68b[_0x20d3b3][_0x1e7791(0x21a)]=_0x7d4ec4;}),_0x20b99d[_0x10d754(0x1b5)]((_0x2a4a7d,_0x1dbbfc)=>{var _0x4154f5=_0x10d754;_0xa0a68b[_0x1dbbfc][_0x4154f5(0x1aa)]=_0x2a4a7d;}),_0xff5754[_0x10d754(0x1b5)]((_0x3b5f29,_0x246a44)=>{var _0xf5632b=_0x10d754;_0xa0a68b[_0x246a44][_0xf5632b(0x192)]=_0x3b5f29;}),_0x5a7ee2[_0x10d754(0x1b5)]((_0x3e00f9,_0x53438d)=>{var _0xa4ea3a=_0x10d754;_0xa0a68b[_0x53438d][_0xa4ea3a(0x207)]=_0x3e00f9;}),_0xf1d9db[_0x10d754(0x1b5)]((_0x523226,_0x55dd2c)=>{var _0x2c2a0c=_0x10d754;_0xa0a68b[_0x55dd2c][_0x2c2a0c(0x1b4)]=_0x523226;}),_0x5a18ca[_0x10d754(0x1b5)]((_0x212827,_0x468088)=>{var _0x5672d2=_0x10d754;_0xa0a68b[_0x468088][_0x5672d2(0x1ca)]=_0x212827;}),_0x46304c[_0x10d754(0x1b5)]((_0x5cbee9,_0xdfa4a9)=>{_0xa0a68b[_0xdfa4a9]['conversion_data']=_0x5cbee9;}),_0x5646f3[_0x10d754(0x1b5)]((_0x5613d6,_0x20fffc)=>{var _0x2137d3=_0x10d754;_0xa0a68b[_0x20fffc][_0x2137d3(0x1c7)]=_0x5613d6;});const _0x52baa6=await approver_acct[_0x10d754(0x229)]([{'$unwind':_0x10d754(0x21b)},{'$match':{'member.id_member':_0x38326b['user'][_0x10d754(0x1e4)]}},{'$group':{'_id':{'id_member':_0x10d754(0x1d8),'name':_0x10d754(0x1ad)},'head_id_staff':{'$first':'$head_id_staff'}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x10d754(0x22a)}}},{'$lookup':{'from':_0x10d754(0x1be),'localField':_0x10d754(0x1c1),'foreignField':_0x10d754(0x201),'as':_0x10d754(0x19b)}},{'$unwind':_0x10d754(0x1cb)}]),_0xf38ba1=new invoice_for_sales_order();await _0xf38ba1[_0x10d754(0x1a5)]();const _0x2c10c2=_0x38326b[_0x10d754(0x208)],_0x5e3772=await staff[_0x10d754(0x205)]({'email':_0x2c10c2[_0x10d754(0x230)]}),_0x1d946d=new sales_order({'invoice':_0xf38ba1[_0x10d754(0x21e)][_0x10d754(0x1b6)]()[_0x10d754(0x1b0)](0x8,'0'),'customer':_0x2a6699,'date':_0x26cd57,'sale_product':_0xa0a68b,'note':_0x344a83,'sales_staff_id':_0x5e3772['_id'][_0x10d754(0x215)](),'JD':_0x6e7db6,'accounting_account_id':_0x52baa6[0x0][_0x10d754(0x1b2)],'po_number':_0x18dd0f,'desired_delivery':_0x503d51,'wms_account_confirm':_0x10d754(0x1ce),'accounting_account_confirm':_0x10d754(0x1ce)}),_0x1f8a2b=await _0x1d946d[_0x10d754(0x1a5)]();var _0x5492a6=_0x1f8a2b[_0x10d754(0x1d0)],_0x5cd835='',_0x56c321,_0xb25409=0x0;for(_0x56c321 in _0x5492a6){_0x5cd835+=_0x10d754(0x1ef)+_0x10d754(0x1f1)+_0x5492a6[_0x56c321]['product_name']+'</td>'+_0x10d754(0x1f1)+_0x5492a6[_0x56c321][_0x10d754(0x211)]+_0x10d754(0x1d6)+_0x10d754(0x1f1)+_0x5492a6[_0x56c321][_0x10d754(0x21f)]+_0x10d754(0x1d6)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5492a6[_0x56c321][_0x10d754(0x21d)]+_0x10d754(0x1d6)+'</tr>',_0xb25409+=parseInt(_0x5492a6[_0x56c321][_0x10d754(0x21f)]);}const _0x4504ef=await master_shop[_0x10d754(0x1f5)](),_0x784b3d=await email_settings[_0x10d754(0x205)]();let _0x3aaea1=nodemailer[_0x10d754(0x1ae)]({'port':Number(_0x784b3d['port']),'secure':![],'auth':{'user':_0x784b3d[_0x10d754(0x230)],'pass':_0x784b3d[_0x10d754(0x1f7)]}});const _0x1835ea=_0x38326b[_0x10d754(0x199)]+_0x10d754(0x1d2)+_0x38326b['headers'][_0x10d754(0x1cd)];let _0x422ea6={'from':_0x784b3d['email'],'to':_0x52baa6[0x0][_0x10d754(0x19b)][_0x10d754(0x230)]+_0x10d754(0x204),'subject':_0x10d754(0x1c9)+_0x1f8a2b[_0x10d754(0x1fa)],'attachments':[{'filename':_0x10d754(0x231),'path':__dirname+_0x10d754(0x210)+'/upload/'+_0x4504ef[0x0][_0x10d754(0x20c)],'cid':_0x10d754(0x19f)}],'html':_0x10d754(0x213)+_0x10d754(0x1a4)+_0x10d754(0x1c2)+_0x10d754(0x1c4)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x10d754(0x1da)+_0x10d754(0x1fc)+_0x10d754(0x222)+_0x10d754(0x1da)+'<h2>\x20JEC\x20SMS\x20</h2>'+_0x10d754(0x222)+'</div>'+'<hr\x20class=\x22my-3\x22>'+_0x10d754(0x1da)+_0x10d754(0x1e1)+_0x52baa6[0x0][_0x10d754(0x19b)][_0x10d754(0x203)]+_0x10d754(0x218)+_0x10d754(0x222)+_0x10d754(0x1da)+'<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>'+'</div>'+_0x10d754(0x1da)+_0x10d754(0x1b1)+_0x1f8a2b['invoice']+_0x10d754(0x1d4)+_0x10d754(0x21c)+_0x5e3772[_0x10d754(0x203)]+_0x10d754(0x1d4)+_0x10d754(0x1a6)+_0x1f8a2b[_0x10d754(0x1d7)]+_0x10d754(0x206)+_0x10d754(0x222)+_0x10d754(0x219)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+'<tr>'+_0x10d754(0x1e8)+_0x10d754(0x22d)+_0x10d754(0x1c6)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x10d754(0x1ec)+_0x10d754(0x1a0)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x5cd835+'\x20'+_0x10d754(0x1c3)+_0x10d754(0x197)+'<div>'+'<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>'+_0xb25409+_0x10d754(0x1db)+'<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>'+_0x10d754(0x1b8)+_0x10d754(0x225)+'</div>'+_0x10d754(0x1bc)+_0x10d754(0x20e)+_0x1835ea+_0x10d754(0x1fe)+_0x1f8a2b[_0x10d754(0x201)]+_0x10d754(0x1f9)+_0x10d754(0x1c8)+_0x10d754(0x222)+'<div>'+_0x10d754(0x224)+_0x10d754(0x1ab)+_0x10d754(0x222)+'</div>'+_0x10d754(0x19c)+_0x10d754(0x20f)};_0x3aaea1[_0x10d754(0x19d)](_0x422ea6,function(_0x3f68dc,_0x46f25c){var _0x112e69=_0x10d754;_0x3f68dc?(console['log'](_0x3f68dc),console[_0x112e69(0x223)](_0x112e69(0x228))):console['log']('Email\x20sent\x20successfully');}),_0x38326b[_0x10d754(0x20b)](_0x10d754(0x22e),'Sales\x20Order\x20is\x20ongoing'),_0xbe8ef9[_0x10d754(0x217)](_0x10d754(0x1ff)+_0x1f8a2b[_0x10d754(0x201)]);}catch(_0x490101){}}),router[a0_0x4db2ef(0x20a)](a0_0x4db2ef(0x1fd),auth,async(_0xfd85f2,_0x2c81d6)=>{var _0x42cdad=a0_0x4db2ef;try{const _0x383132=_0xfd85f2[_0x42cdad(0x208)],_0x5a4cc6=await profile[_0x42cdad(0x205)]({'email':_0x383132[_0x42cdad(0x230)]}),_0x19ad4d=await product[_0x42cdad(0x1f5)]({'sales_category':_0x383132['sales_category']});_0x2c81d6[_0x42cdad(0x1ac)](_0x19ad4d);}catch(_0x463c8b){}}),router[a0_0x4db2ef(0x20a)](a0_0x4db2ef(0x1f0),auth,async(_0x408c14,_0x2b580d)=>{var _0x5a6f26=a0_0x4db2ef;try{const _0x15dc48=_0x408c14[_0x5a6f26(0x208)],{id_data:_0x1faa1f}=_0x408c14['body'],_0x682eba=await profile['findOne']({'email':_0x15dc48[_0x5a6f26(0x230)]}),_0x5aaf8e=mongoose['Types'][_0x5a6f26(0x1c5)];var _0x3616f9=_0x5aaf8e(_0x1faa1f);const _0x542114=await product[_0x5a6f26(0x1f5)]({'_id':_0x3616f9});_0x2b580d[_0x5a6f26(0x1ac)](_0x542114);}catch(_0x4d30a7){}}),module[a0_0x4db2ef(0x209)]=router;