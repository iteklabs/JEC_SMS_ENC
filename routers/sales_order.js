var a0_0x3aefa6=a0_0x2f86;function a0_0x2f86(_0x141622,_0x1b5c64){var _0x5b7327=a0_0x5b73();return a0_0x2f86=function(_0x2f86c3,_0x517a18){_0x2f86c3=_0x2f86c3-0x88;var _0x27b948=_0x5b7327[_0x2f86c3];return _0x27b948;},a0_0x2f86(_0x141622,_0x1b5c64);}(function(_0x2f9089,_0xf2cc4){var _0x233286=a0_0x2f86,_0x2b234a=_0x2f9089();while(!![]){try{var _0x30d352=parseInt(_0x233286(0xe2))/0x1+parseInt(_0x233286(0xab))/0x2+parseInt(_0x233286(0xe3))/0x3*(parseInt(_0x233286(0x109))/0x4)+-parseInt(_0x233286(0xe0))/0x5*(-parseInt(_0x233286(0x108))/0x6)+-parseInt(_0x233286(0x105))/0x7*(parseInt(_0x233286(0xd7))/0x8)+-parseInt(_0x233286(0xda))/0x9*(-parseInt(_0x233286(0xbb))/0xa)+parseInt(_0x233286(0xd3))/0xb*(-parseInt(_0x233286(0xdd))/0xc);if(_0x30d352===_0xf2cc4)break;else _0x2b234a['push'](_0x2b234a['shift']());}catch(_0x34a494){_0x2b234a['push'](_0x2b234a['shift']());}}}(a0_0x5b73,0xb13e3));function a0_0x5b73(){var _0x2ed172=['$sale_product.quantity','Spanish','post','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','425513EsLdNT','conversion_data','$wms_account_id','string','103048sIVOfF','English','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','9CCeARP','Logo.png','Sales\x20Order\x20is\x20ongoing','480eMDPXa','Email\x20sent\x20successfully','staffs','248345KlyPSR','password','375395AvHEvg','1543053vxPKNI','sales_category','view_sales_order','/product_list','logo','invoice','../public/language/languages.json','findOne','<span>\x20Request\x20ID:\x20<b>','</tbody>','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','save','sendMail','<tr>','nodemailer','render','valueOf','<h5>\x20JEC\x20SMS\x20</h5>','log','protocol','add_sales_order','getPrimUnitNo','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','isFG','secondary_unit','<br><br><br>','true','port','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','</td>','<h2>\x20JEC\x20SMS\x20</h2>','exports','<span>\x20Requested\x20By:\x20<b>','/upload/','679PmYVJu','</tr>','prod_code','156BkIKKp','4hPaEDW','language','errors','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','quantity','$head_id_staff','wms_account_id','French','://','</div>','forEach','Error\x20Occurs','Portuguese','adjustment_discount','product_list','<strong>\x20Regards\x20</strong>','totalPrice','_id','head_staff_info','invoice_init','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','date','/product_data','$date','$member.id_member','</thead>','email','conversion_unit','product_name','dicount_price','Chinese','<div>','xlsx','flash','find','$sale_product','dicount_price_adjust','<br><br>','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','$accounting_account_id','no_per_unit','mongoose','padStart','toString','name','headers','success','Arabic\x20(ae)','Hindi','$member','/accounting_approval/','ObjectId','tmpisFG','sale_product','totalprice','get','redirect','params','<span>\x20Request\x20Date:\x20<b>',';christian.villamer@jakagroup.com','unit','2078628EcztIM','$JD','mongodb','</b>,\x20</span><br>','prod_cat','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','user','German','</table>','</b></span>\x20<br><br>','$invoice','prod_name','aggregate','$accounting_account_confirm','json','$customer','3023100vLUsVf','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','</body></html>','product_id','primary_code','map','price','<html><head><title></title>','Types','$_id','$account_data','</b></span>\x20<br>','English\x20(US)','body','account_data','createTransport','/add_sales','<tbody\x20style=\x22text-align:\x20center;\x22>','exceljs','Portuguese\x20(BR)'];a0_0x5b73=function(){return _0x2ed172;};return a0_0x5b73();}const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x3aefa6(0xe9)),excelJS=require(a0_0x3aefa6(0xcd)),xlsx=require(a0_0x3aefa6(0x8e)),mongoose=require(a0_0x3aefa6(0x97)),{ObjectId}=require(a0_0x3aefa6(0xad)),nodemailer=require(a0_0x3aefa6(0xf1));router[a0_0x3aefa6(0xa5)]('/',auth,async(_0x1eae74,_0x21646f)=>{var _0x49d7ce=a0_0x3aefa6;try{const _0x23ae27=await master_shop[_0x49d7ce(0x90)](),_0x20f8ff=_0x1eae74['user'],_0x33d98c=await profile[_0x49d7ce(0xea)]({'email':_0x20f8ff[_0x49d7ce(0x88)]}),_0xfc669b=await staff[_0x49d7ce(0xea)]({'email':_0x20f8ff[_0x49d7ce(0x88)]}),_0x4650c1=await sales_order[_0x49d7ce(0xb7)]([{'$match':{'sales_staff_id':_0xfc669b[_0x49d7ce(0x11b)][_0x49d7ce(0xf3)]()}},{'$unwind':_0x49d7ce(0x91)},{'$group':{'_id':_0x49d7ce(0xc4),'invoice':{'$first':_0x49d7ce(0xb5)},'customer':{'$first':_0x49d7ce(0xba)},'date':{'$first':_0x49d7ce(0x121)},'JD':{'$first':_0x49d7ce(0xac)},'accounting_account_confirm':{'$first':_0x49d7ce(0xb8)},'wms_account_confirm':{'$first':'$wms_account_confirm'},'totalQTY':{'$sum':_0x49d7ce(0xcf)}}}]);if(_0x23ae27[0x0][_0x49d7ce(0x10a)]==_0x49d7ce(0xc7))var _0x2c5b4b=users[_0x49d7ce(0xd8)];else{if(_0x23ae27[0x0][_0x49d7ce(0x10a)]=='Hindi')var _0x2c5b4b=users[_0x49d7ce(0x9e)];else{if(_0x23ae27[0x0][_0x49d7ce(0x10a)]==_0x49d7ce(0xb2))var _0x2c5b4b=users['German'];else{if(_0x23ae27[0x0]['language']==_0x49d7ce(0xd0))var _0x2c5b4b=users['Spanish'];else{if(_0x23ae27[0x0][_0x49d7ce(0x10a)]==_0x49d7ce(0x111))var _0x2c5b4b=users[_0x49d7ce(0x111)];else{if(_0x23ae27[0x0][_0x49d7ce(0x10a)]==_0x49d7ce(0xce))var _0x2c5b4b=users[_0x49d7ce(0x116)];else{if(_0x23ae27[0x0][_0x49d7ce(0x10a)]=='Chinese')var _0x2c5b4b=users[_0x49d7ce(0x8c)];else{if(_0x23ae27[0x0][_0x49d7ce(0x10a)]=='Arabic\x20(ae)')var _0x2c5b4b=users['Arabic'];}}}}}}}_0x21646f['render']('all_sales_order',{'success':_0x1eae74['flash'](_0x49d7ce(0x9c)),'errors':_0x1eae74[_0x49d7ce(0x8f)](_0x49d7ce(0x10b)),'master_shop':_0x23ae27,'profile':_0x33d98c,'role':_0x20f8ff,'language':_0x2c5b4b,'product_list':_0xfc669b[_0x49d7ce(0x118)],'sales_mine':_0x4650c1,'staff_arr':_0xfc669b});}catch(_0x400c3e){console[_0x49d7ce(0xf5)](_0x400c3e);}}),router['get'](a0_0x3aefa6(0xcb),auth,async(_0x1b8385,_0x262299)=>{var _0x2e899b=a0_0x3aefa6;try{const _0x51e2fd=await master_shop['find'](),_0x176d22=_0x1b8385[_0x2e899b(0xb1)],_0x1cd51b=await profile[_0x2e899b(0xea)]({'email':_0x176d22['email']}),_0x15d599=await staff['findOne']({'email':_0x176d22['email']}),_0x2880d8=await customer['find']({'agent_id':_0x15d599['_id']});if(_0x51e2fd[0x0][_0x2e899b(0x10a)]==_0x2e899b(0xc7))var _0x422885=users['English'];else{if(_0x51e2fd[0x0][_0x2e899b(0x10a)]==_0x2e899b(0x9e))var _0x422885=users['Hindi'];else{if(_0x51e2fd[0x0][_0x2e899b(0x10a)]=='German')var _0x422885=users[_0x2e899b(0xb2)];else{if(_0x51e2fd[0x0][_0x2e899b(0x10a)]=='Spanish')var _0x422885=users[_0x2e899b(0xd0)];else{if(_0x51e2fd[0x0][_0x2e899b(0x10a)]=='French')var _0x422885=users['French'];else{if(_0x51e2fd[0x0][_0x2e899b(0x10a)]==_0x2e899b(0xce))var _0x422885=users['Portuguese'];else{if(_0x51e2fd[0x0]['language']==_0x2e899b(0x8c))var _0x422885=users[_0x2e899b(0x8c)];else{if(_0x51e2fd[0x0][_0x2e899b(0x10a)]==_0x2e899b(0x9d))var _0x422885=users['Arabic'];}}}}}}}_0x262299['render'](_0x2e899b(0xf7),{'success':_0x1b8385['flash'](_0x2e899b(0x9c)),'errors':_0x1b8385[_0x2e899b(0x8f)](_0x2e899b(0x10b)),'master_shop':_0x51e2fd,'profile':_0x1cd51b,'role':_0x176d22,'language':_0x422885,'customer':_0x2880d8,'staff_arr':_0x15d599});}catch(_0x34a3c7){console[_0x2e899b(0xf5)](_0x34a3c7);}}),router['get']('/view_sales/:id',auth,async(_0x4526c2,_0x11c565)=>{var _0x352dbf=a0_0x3aefa6;try{const _0x5bf045=await master_shop[_0x352dbf(0x90)](),_0x4019f7=_0x4526c2[_0x352dbf(0xb1)],_0x29ef5d=await profile['findOne']({'email':_0x4019f7[_0x352dbf(0x88)]}),_0x252f1b=await staff[_0x352dbf(0xea)]({'email':_0x4019f7[_0x352dbf(0x88)]}),_0xe87815=await customer['find']({'agent_id':_0x252f1b['_id']}),_0x34c1eb=mongoose[_0x352dbf(0xc3)][_0x352dbf(0xa1)],_0x5dd50a=_0x4526c2[_0x352dbf(0xa7)]['id'],_0xc6adbe=await sales_order['findById'](_0x5dd50a),_0x4f9dfb=await sales_order[_0x352dbf(0xb7)]([{'$match':{'_id':_0x34c1eb(_0x5dd50a)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x352dbf(0x95)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x352dbf(0xd5)}}},{'$lookup':{'from':_0x352dbf(0xdf),'localField':'accounting_account_id','foreignField':_0x352dbf(0x11b),'as':_0x352dbf(0xc9)}},{'$unwind':_0x352dbf(0xc5)},{'$lookup':{'from':_0x352dbf(0xdf),'localField':_0x352dbf(0x110),'foreignField':'_id','as':'wms_data'}},{'$unwind':{'path':'$wms_data','preserveNullAndEmptyArrays':!![]}}]);if(_0x5bf045[0x0]['language']==_0x352dbf(0xc7))var _0x2d6427=users[_0x352dbf(0xd8)];else{if(_0x5bf045[0x0]['language']==_0x352dbf(0x9e))var _0x2d6427=users[_0x352dbf(0x9e)];else{if(_0x5bf045[0x0][_0x352dbf(0x10a)]==_0x352dbf(0xb2))var _0x2d6427=users[_0x352dbf(0xb2)];else{if(_0x5bf045[0x0][_0x352dbf(0x10a)]=='Spanish')var _0x2d6427=users['Spanish'];else{if(_0x5bf045[0x0][_0x352dbf(0x10a)]==_0x352dbf(0x111))var _0x2d6427=users['French'];else{if(_0x5bf045[0x0]['language']=='Portuguese\x20(BR)')var _0x2d6427=users[_0x352dbf(0x116)];else{if(_0x5bf045[0x0][_0x352dbf(0x10a)]==_0x352dbf(0x8c))var _0x2d6427=users[_0x352dbf(0x8c)];else{if(_0x5bf045[0x0][_0x352dbf(0x10a)]==_0x352dbf(0x9d))var _0x2d6427=users['Arabic'];}}}}}}}_0x11c565[_0x352dbf(0xf2)](_0x352dbf(0xe5),{'success':_0x4526c2['flash'](_0x352dbf(0x9c)),'errors':_0x4526c2[_0x352dbf(0x8f)](_0x352dbf(0x10b)),'master_shop':_0x5bf045,'profile':_0x29ef5d,'role':_0x4019f7,'language':_0x2d6427,'customer':_0xe87815,'sales_sa':_0xc6adbe,'approvers':_0x4f9dfb[0x0],'staff_arr':_0x252f1b});}catch(_0x49a9a0){console[_0x352dbf(0xf5)](_0x49a9a0);}}),router[a0_0x3aefa6(0xd1)](a0_0x3aefa6(0xcb),auth,async(_0x39dd4d,_0x421a1e)=>{var _0x133896=a0_0x3aefa6;try{const {customer:_0x3d3bf9,date:_0x39dc9b,prod_code:_0x41a6fd,note:_0x13f06c,paid_status:_0x5047ae,JD:_0x3c3e24,po_number:_0x493249,desire_date:_0x4a4648}=_0x39dd4d[_0x133896(0xc8)];if(typeof _0x41a6fd==_0x133896(0xd6))var _0x22bce4=[_0x39dd4d[_0x133896(0xc8)][_0x133896(0x107)]],_0x3083d1=[_0x39dd4d[_0x133896(0xc8)][_0x133896(0xb6)]],_0x392383=[_0x39dd4d['body'][_0x133896(0xbf)]],_0x3195ac=[_0x39dd4d[_0x133896(0xc8)][_0x133896(0x10e)]],_0x336381=[_0x39dd4d['body'][_0x133896(0xaa)]],_0x1e6477=[_0x39dd4d[_0x133896(0xc8)][_0x133896(0xbe)]],_0x338035=[_0x39dd4d['body'][_0x133896(0xc1)]],_0x34493b=[_0x39dd4d[_0x133896(0xc8)][_0x133896(0x11a)]],_0x2edce5=[_0x39dd4d[_0x133896(0xc8)]['dicount_price']],_0x48cfb8=[_0x39dd4d[_0x133896(0xc8)][_0x133896(0xa2)]],_0x2edafd=[_0x39dd4d[_0x133896(0xc8)][_0x133896(0x92)]],_0xbe037e=[_0x39dd4d[_0x133896(0xc8)][_0x133896(0x96)]],_0x41ac18=[_0x39dd4d[_0x133896(0xc8)][_0x133896(0xf8)]],_0x5ae7b7=[_0x39dd4d[_0x133896(0xc8)][_0x133896(0xaf)]],_0x366493=[_0x39dd4d['body'][_0x133896(0xfb)]],_0x580cf3=[_0x39dd4d[_0x133896(0xc8)][_0x133896(0x89)]];else var _0x22bce4=[..._0x39dd4d['body'][_0x133896(0x107)]],_0x3083d1=[..._0x39dd4d[_0x133896(0xc8)]['prod_name']],_0x392383=[..._0x39dd4d[_0x133896(0xc8)]['primary_code']],_0x3195ac=[..._0x39dd4d['body'][_0x133896(0x10e)]],_0x336381=[..._0x39dd4d[_0x133896(0xc8)][_0x133896(0xaa)]],_0x1e6477=[..._0x39dd4d[_0x133896(0xc8)][_0x133896(0xbe)]],_0x338035=[..._0x39dd4d[_0x133896(0xc8)][_0x133896(0xc1)]],_0x34493b=[..._0x39dd4d[_0x133896(0xc8)][_0x133896(0x11a)]],_0x2edce5=[..._0x39dd4d[_0x133896(0xc8)][_0x133896(0x8b)]],_0x48cfb8=[..._0x39dd4d[_0x133896(0xc8)]['tmpisFG']],_0x2edafd=[..._0x39dd4d[_0x133896(0xc8)][_0x133896(0x92)]],_0xbe037e=[..._0x39dd4d[_0x133896(0xc8)][_0x133896(0x96)]],_0x41ac18=[..._0x39dd4d[_0x133896(0xc8)][_0x133896(0xf8)]],_0x5ae7b7=[..._0x39dd4d[_0x133896(0xc8)][_0x133896(0xaf)]],_0x366493=[..._0x39dd4d[_0x133896(0xc8)][_0x133896(0xfb)]],_0x580cf3=[..._0x39dd4d[_0x133896(0xc8)][_0x133896(0x89)]];const _0x197105=_0x22bce4[_0x133896(0xc0)](_0x2299c9=>{return _0x2299c9={'product_code':_0x2299c9};});_0x3083d1['forEach']((_0x4e7221,_0x3343ab)=>{_0x197105[_0x3343ab]['product_name']=_0x4e7221;}),_0x392383[_0x133896(0x114)]((_0xb76233,_0x54213c)=>{_0x197105[_0x54213c]['primary_code']=_0xb76233;}),_0x3195ac[_0x133896(0x114)]((_0x38e0d2,_0x5c2795)=>{var _0x2ce533=_0x133896;_0x197105[_0x5c2795][_0x2ce533(0x10e)]=_0x38e0d2;}),_0x336381[_0x133896(0x114)]((_0x5c5b41,_0x7717c2)=>{var _0x4054f5=_0x133896;_0x197105[_0x7717c2][_0x4054f5(0xaa)]=_0x5c5b41;}),_0x1e6477[_0x133896(0x114)]((_0x4708cb,_0x2fc227)=>{_0x197105[_0x2fc227]['product_id']=_0x4708cb;}),_0x2edafd['forEach']((_0x29d609,_0x5585ed)=>{var _0x2598db=_0x133896;_0x197105[_0x5585ed][_0x2598db(0x117)]=_0x29d609;}),_0x338035[_0x133896(0x114)]((_0x52d82c,_0x4811d1)=>{var _0x5d3640=_0x133896;_0x197105[_0x4811d1][_0x5d3640(0xc1)]=_0x52d82c;}),_0x34493b[_0x133896(0x114)]((_0x289a80,_0x4de491)=>{var _0x4d4dbd=_0x133896;_0x197105[_0x4de491][_0x4d4dbd(0xa4)]=_0x289a80;}),_0x2edce5['forEach']((_0x1b6c86,_0x223f50)=>{_0x197105[_0x223f50]['discount']=_0x1b6c86;}),_0x48cfb8[_0x133896(0x114)]((_0x5bc87d,_0x2c12ff)=>{var _0x2d5d1d=_0x133896;_0x197105[_0x2c12ff][_0x2d5d1d(0xfa)]=_0x5bc87d;}),_0x366493[_0x133896(0x114)]((_0x5bc1b6,_0x41bf6f)=>{var _0x21fce8=_0x133896;_0x197105[_0x41bf6f][_0x21fce8(0xfb)]=_0x5bc1b6;}),_0x41ac18['forEach']((_0x3feb0f,_0x49d7d4)=>{_0x197105[_0x49d7d4]['real_qty_unit_val']=_0x3feb0f;}),_0x5ae7b7[_0x133896(0x114)]((_0x1b0ec0,_0x2243a2)=>{var _0x8fe9e7=_0x133896;_0x197105[_0x2243a2][_0x8fe9e7(0xaf)]=_0x1b0ec0;}),_0x580cf3['forEach']((_0x3ab861,_0x5d12a6)=>{var _0x458ca7=_0x133896;_0x197105[_0x5d12a6][_0x458ca7(0xd4)]=_0x3ab861;}),_0xbe037e[_0x133896(0x114)]((_0x5c2afc,_0x83687a)=>{var _0x1d68bc=_0x133896;_0x197105[_0x83687a][_0x1d68bc(0x96)]=_0x5c2afc;});const _0x5d3f8d=await approver_acct[_0x133896(0xb7)]([{'$unwind':_0x133896(0x9f)},{'$match':{'member.id_member':_0x39dd4d[_0x133896(0xb1)]['sttaff_id']}},{'$group':{'_id':{'id_member':_0x133896(0x122),'name':'$member.name'},'head_id_staff':{'$first':_0x133896(0x10f)}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x133896(0x10f)}}},{'$lookup':{'from':_0x133896(0xdf),'localField':'head_id_staff_id','foreignField':_0x133896(0x11b),'as':_0x133896(0x11c)}},{'$unwind':'$head_staff_info'}]),_0x3392d7=new invoice_for_sales_order();await _0x3392d7[_0x133896(0xee)]();const _0x25ed83=_0x39dd4d[_0x133896(0xb1)],_0x2d5dbb=await staff[_0x133896(0xea)]({'email':_0x25ed83['email']}),_0x1f0701=new sales_order({'invoice':_0x3392d7[_0x133896(0x11d)][_0x133896(0x99)]()[_0x133896(0x98)](0x8,'0'),'customer':_0x3d3bf9,'date':_0x39dc9b,'sale_product':_0x197105,'note':_0x13f06c,'sales_staff_id':_0x2d5dbb['_id'][_0x133896(0xf3)](),'JD':_0x3c3e24,'accounting_account_id':_0x5d3f8d[0x0]['head_id_staff'],'po_number':_0x493249,'desired_delivery':_0x4a4648,'wms_account_confirm':_0x133896(0xfd),'accounting_account_confirm':_0x133896(0xfd)}),_0x12e963=await _0x1f0701['save']();var _0x23a70b=_0x12e963[_0x133896(0xa3)],_0x18bd4c='',_0x3810d1,_0x43de9f=0x0;for(_0x3810d1 in _0x23a70b){_0x18bd4c+=_0x133896(0xf0)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x23a70b[_0x3810d1][_0x133896(0x8a)]+_0x133896(0x100)+_0x133896(0x11e)+_0x23a70b[_0x3810d1]['product_code']+_0x133896(0x100)+_0x133896(0x11e)+_0x23a70b[_0x3810d1][_0x133896(0x10e)]+_0x133896(0x100)+_0x133896(0x11e)+_0x23a70b[_0x3810d1][_0x133896(0xaa)]+'</td>'+_0x133896(0x106),_0x43de9f+=parseInt(_0x23a70b[_0x3810d1][_0x133896(0x10e)]);}const _0x17aedf=await master_shop[_0x133896(0x90)](),_0x3e1f20=await email_settings[_0x133896(0xea)]();let _0x916a40=nodemailer[_0x133896(0xca)]({'port':Number(_0x3e1f20[_0x133896(0xfe)]),'secure':![],'auth':{'user':_0x3e1f20[_0x133896(0x88)],'pass':_0x3e1f20[_0x133896(0xe1)]}});const _0x57c99f=_0x39dd4d[_0x133896(0xf6)]+_0x133896(0x112)+_0x39dd4d[_0x133896(0x9b)]['host'];let _0x2102c2={'from':_0x3e1f20['email'],'to':_0x5d3f8d[0x0]['head_staff_info'][_0x133896(0x88)]+_0x133896(0xa9),'subject':'Approval\x20for\x20'+_0x12e963['invoice'],'attachments':[{'filename':_0x133896(0xdb),'path':__dirname+'/../public'+_0x133896(0x104)+_0x17aedf[0x0]['image'],'cid':_0x133896(0xe7)}],'html':'<!DOCTYPE\x20html>'+_0x133896(0xc2)+_0x133896(0x94)+'</head><body>'+_0x133896(0x8d)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x133896(0x8d)+_0x133896(0x10d)+_0x133896(0x113)+_0x133896(0x8d)+_0x133896(0x101)+_0x133896(0x113)+_0x133896(0x113)+'<hr\x20class=\x22my-3\x22>'+_0x133896(0x8d)+'<span>\x20Dear\x20<b>'+_0x5d3f8d[0x0]['head_staff_info'][_0x133896(0x9a)]+_0x133896(0xae)+_0x133896(0x113)+'<div>'+_0x133896(0xb0)+_0x133896(0x113)+_0x133896(0x8d)+_0x133896(0xeb)+_0x12e963[_0x133896(0xe8)]+'</b></span>\x20<br>'+_0x133896(0x103)+_0x2d5dbb[_0x133896(0x9a)]+_0x133896(0xc6)+_0x133896(0xa8)+_0x12e963[_0x133896(0x11f)]+_0x133896(0xb4)+_0x133896(0x113)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x133896(0xed)+_0x133896(0xf0)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x133896(0xff)+_0x133896(0xd2)+_0x133896(0x106)+_0x133896(0x123)+_0x133896(0xcc)+'\x20'+_0x18bd4c+'\x20'+_0x133896(0xec)+_0x133896(0xb3)+_0x133896(0x8d)+'<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>'+_0x43de9f+_0x133896(0xbc)+_0x133896(0xf9)+_0x133896(0x10c)+_0x133896(0xfc)+'</div>'+'<div\x20style=\x22text-align:\x20center;\x22>'+_0x133896(0xd9)+_0x57c99f+_0x133896(0xa0)+_0x12e963[_0x133896(0x11b)]+'\x22>Change\x20Status</a>'+_0x133896(0x93)+'</div>'+_0x133896(0x8d)+_0x133896(0x119)+_0x133896(0xf4)+_0x133896(0x113)+_0x133896(0x113)+'<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>'+_0x133896(0xbd)};_0x916a40[_0x133896(0xef)](_0x2102c2,function(_0x408627,_0x1f86cf){var _0x1d55f3=_0x133896;_0x408627?(console[_0x1d55f3(0xf5)](_0x408627),console[_0x1d55f3(0xf5)](_0x1d55f3(0x115))):console['log'](_0x1d55f3(0xde));}),_0x39dd4d['flash'](_0x133896(0x9c),_0x133896(0xdc)),_0x421a1e[_0x133896(0xa6)]('/sales_order/view_sales/'+_0x12e963['_id']);}catch(_0x1c0bb4){}}),router[a0_0x3aefa6(0xd1)](a0_0x3aefa6(0xe6),auth,async(_0x409a15,_0x31fffc)=>{var _0x1b1124=a0_0x3aefa6;try{const _0x321d0f=_0x409a15[_0x1b1124(0xb1)],_0x8c4376=await profile['findOne']({'email':_0x321d0f['email']}),_0x2d1527=await product[_0x1b1124(0x90)]({'sales_category':_0x321d0f[_0x1b1124(0xe4)]});_0x31fffc[_0x1b1124(0xb9)](_0x2d1527);}catch(_0x455707){}}),router[a0_0x3aefa6(0xd1)](a0_0x3aefa6(0x120),auth,async(_0x33db86,_0x7e60e3)=>{var _0x391601=a0_0x3aefa6;try{const _0x5c80a6=_0x33db86['user'],{id_data:_0x4fc9f8}=_0x33db86[_0x391601(0xc8)],_0x479c2a=await profile[_0x391601(0xea)]({'email':_0x5c80a6[_0x391601(0x88)]}),_0x5dcb9a=mongoose[_0x391601(0xc3)][_0x391601(0xa1)];var _0x21e264=_0x5dcb9a(_0x4fc9f8);const _0x58285f=await product[_0x391601(0x90)]({'_id':_0x21e264});_0x7e60e3[_0x391601(0xb9)](_0x58285f);}catch(_0x3cebdf){}}),module[a0_0x3aefa6(0x102)]=router;