var a0_0x392bd3=a0_0x2361;(function(_0x3f96ce,_0x24055b){var _0x5af053=a0_0x2361,_0x3f0b6c=_0x3f96ce();while(!![]){try{var _0x8de1b0=parseInt(_0x5af053(0xc8))/0x1+-parseInt(_0x5af053(0xaa))/0x2+-parseInt(_0x5af053(0xe8))/0x3+-parseInt(_0x5af053(0xc0))/0x4+parseInt(_0x5af053(0xb2))/0x5*(-parseInt(_0x5af053(0x75))/0x6)+-parseInt(_0x5af053(0x71))/0x7+parseInt(_0x5af053(0x7c))/0x8;if(_0x8de1b0===_0x24055b)break;else _0x3f0b6c['push'](_0x3f0b6c['shift']());}catch(_0x534cfa){_0x3f0b6c['push'](_0x3f0b6c['shift']());}}}(a0_0x78d9,0x21c3a));function a0_0x78d9(){var _0x2198c1=['$member','<br><br><br>','190646TojRHZ','price',';christian.villamer@jakagroup.com','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','all_sales_order','findById','findOne','Email\x20sent\x20successfully','390725byExMC','forEach','German','invoice','exceljs','dicount_price_adjust','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','</tbody>','nodemailer','prod_name','true','<span>\x20Requested\x20By:\x20<b>','headers','json','408188ARgVVn','$_id','invoice_init','product_list','dicount_price','Spanish','unit','Error\x20Occurs','163085FzmhOT','English\x20(US)','password','$invoice','_id','real_qty_unit_val','Arabic','tmpisFG','$JD','sales_category','view_sales_order','host','Approval\x20for\x20','Types','<span>\x20Dear\x20<b>','padStart','$member.id_member','get','quantity','body','Logo.png','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','adjustment_discount','wms_data','totalPrice','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','date','primary_code','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','wms_account_id','160572uonmpN','Portuguese\x20(BR)','prod_code','language','valueOf','product_name','$head_staff_info','sttaff_id','redirect','log','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','$head_id_staff','accounting_account_id','save','success','<table\x20style=\x22width:\x20100%\x20!important;\x22>','getPrimUnitNo','toString','account_data','<h2>\x20JEC\x20SMS\x20</h2>','<!DOCTYPE\x20html>','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','/product_list','user','Chinese','Portuguese','<h5>\x20JEC\x20SMS\x20</h5>','totalprice','English','no_per_unit','mongoose','</div>','secondary_unit','express','aggregate','624757UHNpGz','../public/language/languages.json','Arabic\x20(ae)','<tbody\x20style=\x22text-align:\x20center;\x22>','18uTQSNE','head_staff_info','exports','xlsx','string','<strong>\x20Regards\x20</strong>','<div>','4398344PBCTmw','/product_data','map','head_id_staff_id','<tr>','$sale_product','conversion_unit','createTransport','$accounting_account_confirm','render','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','$wms_account_confirm','/add_sales','name','sendMail','../middleware/auth','post','email','Router','flash','staffs','$wms_account_id','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','</b></span>\x20<br>','mongodb','$accounting_account_id','logo','discount','/../public','French','://','errors','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','$customer','ObjectId','<span>\x20Request\x20Date:\x20<b>','find','</td>','</tr>','add_sales_order','prod_cat','isFG','<hr\x20class=\x22my-3\x22>','Hindi'];a0_0x78d9=function(){return _0x2198c1;};return a0_0x78d9();}function a0_0x2361(_0x158869,_0xab735){var _0x78d927=a0_0x78d9();return a0_0x2361=function(_0x236104,_0x57af65){_0x236104=_0x236104-0x66;var _0x35a2e8=_0x78d927[_0x236104];return _0x35a2e8;},a0_0x2361(_0x158869,_0xab735);}const express=require(a0_0x392bd3(0x6f)),app=express(),router=express[a0_0x392bd3(0x8e)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require('../models/all_models'),auth=require(a0_0x392bd3(0x8b)),users=require(a0_0x392bd3(0x72)),excelJS=require(a0_0x392bd3(0xb6)),xlsx=require(a0_0x392bd3(0x78)),mongoose=require(a0_0x392bd3(0x6c)),{ObjectId}=require(a0_0x392bd3(0x94)),nodemailer=require(a0_0x392bd3(0xba));router[a0_0x392bd3(0xd9)]('/',auth,async(_0x404210,_0x5a0511)=>{var _0x3e605c=a0_0x392bd3;try{const _0x9fba16=await master_shop[_0x3e605c(0xa0)](),_0x111b4f=_0x404210['user'],_0x3ff721=await profile[_0x3e605c(0xb0)]({'email':_0x111b4f[_0x3e605c(0x8d)]}),_0x2ad37a=await staff['findOne']({'email':_0x111b4f[_0x3e605c(0x8d)]}),_0x1d016c=await sales_order[_0x3e605c(0x70)]([{'$match':{'sales_staff_id':_0x2ad37a[_0x3e605c(0xcc)][_0x3e605c(0xec)]()}},{'$unwind':_0x3e605c(0x81)},{'$group':{'_id':_0x3e605c(0xc1),'invoice':{'$first':_0x3e605c(0xcb)},'customer':{'$first':_0x3e605c(0x9d)},'date':{'$first':'$date'},'JD':{'$first':_0x3e605c(0xd0)},'accounting_account_confirm':{'$first':_0x3e605c(0x84)},'wms_account_confirm':{'$first':_0x3e605c(0x87)},'totalQTY':{'$sum':'$sale_product.quantity'}}}]);if(_0x9fba16[0x0]['language']==_0x3e605c(0xc9))var _0x3c0ac5=users[_0x3e605c(0x6a)];else{if(_0x9fba16[0x0]['language']==_0x3e605c(0xa7))var _0x3c0ac5=users[_0x3e605c(0xa7)];else{if(_0x9fba16[0x0][_0x3e605c(0xeb)]==_0x3e605c(0xb4))var _0x3c0ac5=users[_0x3e605c(0xb4)];else{if(_0x9fba16[0x0][_0x3e605c(0xeb)]==_0x3e605c(0xc5))var _0x3c0ac5=users[_0x3e605c(0xc5)];else{if(_0x9fba16[0x0][_0x3e605c(0xeb)]==_0x3e605c(0x99))var _0x3c0ac5=users['French'];else{if(_0x9fba16[0x0]['language']==_0x3e605c(0xe9))var _0x3c0ac5=users['Portuguese'];else{if(_0x9fba16[0x0][_0x3e605c(0xeb)]==_0x3e605c(0x66))var _0x3c0ac5=users[_0x3e605c(0x66)];else{if(_0x9fba16[0x0]['language']==_0x3e605c(0x73))var _0x3c0ac5=users[_0x3e605c(0xce)];}}}}}}}_0x5a0511[_0x3e605c(0x85)](_0x3e605c(0xae),{'success':_0x404210[_0x3e605c(0x8f)]('success'),'errors':_0x404210[_0x3e605c(0x8f)](_0x3e605c(0x9b)),'master_shop':_0x9fba16,'profile':_0x3ff721,'role':_0x111b4f,'language':_0x3c0ac5,'product_list':_0x2ad37a[_0x3e605c(0xc3)],'sales_mine':_0x1d016c,'staff_arr':_0x2ad37a});}catch(_0x1aae72){console[_0x3e605c(0xf1)](_0x1aae72);}}),router[a0_0x392bd3(0xd9)](a0_0x392bd3(0x88),auth,async(_0x329b1f,_0x3569c7)=>{var _0x26b2a1=a0_0x392bd3;try{const _0x3ce547=await master_shop[_0x26b2a1(0xa0)](),_0x4f111a=_0x329b1f['user'],_0xc9c2e6=await profile[_0x26b2a1(0xb0)]({'email':_0x4f111a[_0x26b2a1(0x8d)]}),_0x3dc72f=await staff[_0x26b2a1(0xb0)]({'email':_0x4f111a['email']}),_0x3113f1=await customer[_0x26b2a1(0xa0)]({'agent_id':_0x3dc72f['_id']});if(_0x3ce547[0x0][_0x26b2a1(0xeb)]==_0x26b2a1(0xc9))var _0x3a56d2=users[_0x26b2a1(0x6a)];else{if(_0x3ce547[0x0][_0x26b2a1(0xeb)]==_0x26b2a1(0xa7))var _0x3a56d2=users[_0x26b2a1(0xa7)];else{if(_0x3ce547[0x0][_0x26b2a1(0xeb)]==_0x26b2a1(0xb4))var _0x3a56d2=users[_0x26b2a1(0xb4)];else{if(_0x3ce547[0x0]['language']==_0x26b2a1(0xc5))var _0x3a56d2=users[_0x26b2a1(0xc5)];else{if(_0x3ce547[0x0][_0x26b2a1(0xeb)]==_0x26b2a1(0x99))var _0x3a56d2=users['French'];else{if(_0x3ce547[0x0][_0x26b2a1(0xeb)]==_0x26b2a1(0xe9))var _0x3a56d2=users[_0x26b2a1(0x67)];else{if(_0x3ce547[0x0]['language']=='Chinese')var _0x3a56d2=users[_0x26b2a1(0x66)];else{if(_0x3ce547[0x0][_0x26b2a1(0xeb)]==_0x26b2a1(0x73))var _0x3a56d2=users[_0x26b2a1(0xce)];}}}}}}}_0x3569c7[_0x26b2a1(0x85)](_0x26b2a1(0xa3),{'success':_0x329b1f[_0x26b2a1(0x8f)](_0x26b2a1(0xf6)),'errors':_0x329b1f['flash'](_0x26b2a1(0x9b)),'master_shop':_0x3ce547,'profile':_0xc9c2e6,'role':_0x4f111a,'language':_0x3a56d2,'customer':_0x3113f1,'staff_arr':_0x3dc72f});}catch(_0x3fe5ef){console[_0x26b2a1(0xf1)](_0x3fe5ef);}}),router[a0_0x392bd3(0xd9)]('/view_sales/:id',auth,async(_0x280243,_0x33f06d)=>{var _0xf7de7c=a0_0x392bd3;try{const _0x49f335=await master_shop[_0xf7de7c(0xa0)](),_0x3e7268=_0x280243[_0xf7de7c(0xff)],_0x203c90=await profile[_0xf7de7c(0xb0)]({'email':_0x3e7268[_0xf7de7c(0x8d)]}),_0x40ac44=await staff[_0xf7de7c(0xb0)]({'email':_0x3e7268[_0xf7de7c(0x8d)]}),_0x127f5c=await customer['find']({'agent_id':_0x40ac44[_0xf7de7c(0xcc)]}),_0x1e373e=mongoose[_0xf7de7c(0xd5)][_0xf7de7c(0x9e)],_0x385617=_0x280243['params']['id'],_0x3cc3fd=await sales_order[_0xf7de7c(0xaf)](_0x385617),_0xfb53f0=await sales_order['aggregate']([{'$match':{'_id':_0x1e373e(_0x385617)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0xf7de7c(0x95)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0xf7de7c(0x91)}}},{'$lookup':{'from':'staffs','localField':_0xf7de7c(0xf4),'foreignField':'_id','as':_0xf7de7c(0xfa)}},{'$unwind':'$account_data'},{'$lookup':{'from':'staffs','localField':_0xf7de7c(0xe7),'foreignField':_0xf7de7c(0xcc),'as':_0xf7de7c(0xe0)}},{'$unwind':{'path':'$wms_data','preserveNullAndEmptyArrays':!![]}}]);if(_0x49f335[0x0][_0xf7de7c(0xeb)]==_0xf7de7c(0xc9))var _0x567b54=users[_0xf7de7c(0x6a)];else{if(_0x49f335[0x0][_0xf7de7c(0xeb)]=='Hindi')var _0x567b54=users['Hindi'];else{if(_0x49f335[0x0][_0xf7de7c(0xeb)]==_0xf7de7c(0xb4))var _0x567b54=users['German'];else{if(_0x49f335[0x0][_0xf7de7c(0xeb)]==_0xf7de7c(0xc5))var _0x567b54=users[_0xf7de7c(0xc5)];else{if(_0x49f335[0x0]['language']==_0xf7de7c(0x99))var _0x567b54=users['French'];else{if(_0x49f335[0x0][_0xf7de7c(0xeb)]==_0xf7de7c(0xe9))var _0x567b54=users[_0xf7de7c(0x67)];else{if(_0x49f335[0x0][_0xf7de7c(0xeb)]==_0xf7de7c(0x66))var _0x567b54=users['Chinese'];else{if(_0x49f335[0x0][_0xf7de7c(0xeb)]==_0xf7de7c(0x73))var _0x567b54=users[_0xf7de7c(0xce)];}}}}}}}_0x33f06d[_0xf7de7c(0x85)](_0xf7de7c(0xd2),{'success':_0x280243[_0xf7de7c(0x8f)](_0xf7de7c(0xf6)),'errors':_0x280243[_0xf7de7c(0x8f)]('errors'),'master_shop':_0x49f335,'profile':_0x203c90,'role':_0x3e7268,'language':_0x567b54,'customer':_0x127f5c,'sales_sa':_0x3cc3fd,'approvers':_0xfb53f0[0x0],'staff_arr':_0x40ac44});}catch(_0x29465c){console[_0xf7de7c(0xf1)](_0x29465c);}}),router[a0_0x392bd3(0x8c)](a0_0x392bd3(0x88),auth,async(_0x24d052,_0x2231b2)=>{var _0x32cd74=a0_0x392bd3;try{const {customer:_0x260400,date:_0x2f66a5,prod_code:_0x629c74,note:_0x38b87d,paid_status:_0x2f2ee5,JD:_0x3ed968,po_number:_0x4729af,desire_date:_0x5ebb38}=_0x24d052[_0x32cd74(0xdb)];if(typeof _0x629c74==_0x32cd74(0x79))var _0xb989a6=[_0x24d052[_0x32cd74(0xdb)][_0x32cd74(0xea)]],_0x53ee3d=[_0x24d052[_0x32cd74(0xdb)][_0x32cd74(0xbb)]],_0x20167f=[_0x24d052[_0x32cd74(0xdb)][_0x32cd74(0xe5)]],_0x4e1a8d=[_0x24d052['body'][_0x32cd74(0xda)]],_0x24c648=[_0x24d052['body'][_0x32cd74(0xc6)]],_0x3ffb53=[_0x24d052['body']['product_id']],_0x266144=[_0x24d052[_0x32cd74(0xdb)][_0x32cd74(0xab)]],_0x2ed933=[_0x24d052['body']['totalPrice']],_0x39932d=[_0x24d052[_0x32cd74(0xdb)][_0x32cd74(0xc4)]],_0x122fde=[_0x24d052['body'][_0x32cd74(0xcf)]],_0x580de2=[_0x24d052[_0x32cd74(0xdb)][_0x32cd74(0xb7)]],_0x6a9616=[_0x24d052['body'][_0x32cd74(0x6b)]],_0x5ac0b5=[_0x24d052[_0x32cd74(0xdb)]['getPrimUnitNo']],_0x2aafcc=[_0x24d052[_0x32cd74(0xdb)][_0x32cd74(0xa4)]],_0x16558c=[_0x24d052['body'][_0x32cd74(0x6e)]],_0x2362bc=[_0x24d052['body'][_0x32cd74(0x82)]];else var _0xb989a6=[..._0x24d052[_0x32cd74(0xdb)][_0x32cd74(0xea)]],_0x53ee3d=[..._0x24d052[_0x32cd74(0xdb)][_0x32cd74(0xbb)]],_0x20167f=[..._0x24d052[_0x32cd74(0xdb)]['primary_code']],_0x4e1a8d=[..._0x24d052['body'][_0x32cd74(0xda)]],_0x24c648=[..._0x24d052[_0x32cd74(0xdb)]['unit']],_0x3ffb53=[..._0x24d052[_0x32cd74(0xdb)]['product_id']],_0x266144=[..._0x24d052['body']['price']],_0x2ed933=[..._0x24d052['body'][_0x32cd74(0xe1)]],_0x39932d=[..._0x24d052['body'][_0x32cd74(0xc4)]],_0x122fde=[..._0x24d052['body'][_0x32cd74(0xcf)]],_0x580de2=[..._0x24d052['body'][_0x32cd74(0xb7)]],_0x6a9616=[..._0x24d052['body'][_0x32cd74(0x6b)]],_0x5ac0b5=[..._0x24d052[_0x32cd74(0xdb)][_0x32cd74(0xf8)]],_0x2aafcc=[..._0x24d052['body']['prod_cat']],_0x16558c=[..._0x24d052['body'][_0x32cd74(0x6e)]],_0x2362bc=[..._0x24d052[_0x32cd74(0xdb)][_0x32cd74(0x82)]];const _0x47277b=_0xb989a6[_0x32cd74(0x7e)](_0x5562ab=>{return _0x5562ab={'product_code':_0x5562ab};});_0x53ee3d['forEach']((_0x3e3e7f,_0x24b316)=>{var _0x3683e6=_0x32cd74;_0x47277b[_0x24b316][_0x3683e6(0xed)]=_0x3e3e7f;}),_0x20167f[_0x32cd74(0xb3)]((_0x19af0c,_0x2a63db)=>{var _0xf7c740=_0x32cd74;_0x47277b[_0x2a63db][_0xf7c740(0xe5)]=_0x19af0c;}),_0x4e1a8d['forEach']((_0x14bc8b,_0xbf9b85)=>{var _0x572eb3=_0x32cd74;_0x47277b[_0xbf9b85][_0x572eb3(0xda)]=_0x14bc8b;}),_0x24c648['forEach']((_0x2fb084,_0x291f2f)=>{var _0x3a4628=_0x32cd74;_0x47277b[_0x291f2f][_0x3a4628(0xc6)]=_0x2fb084;}),_0x3ffb53[_0x32cd74(0xb3)]((_0x318dd2,_0xfb9049)=>{_0x47277b[_0xfb9049]['product_id']=_0x318dd2;}),_0x580de2[_0x32cd74(0xb3)]((_0x5d3208,_0x9af1b0)=>{var _0x2db1aa=_0x32cd74;_0x47277b[_0x9af1b0][_0x2db1aa(0xdf)]=_0x5d3208;}),_0x266144[_0x32cd74(0xb3)]((_0x261191,_0xa54a0b)=>{var _0x1f20d9=_0x32cd74;_0x47277b[_0xa54a0b][_0x1f20d9(0xab)]=_0x261191;}),_0x2ed933[_0x32cd74(0xb3)]((_0x17fb55,_0x1bbe5f)=>{var _0x5a42ff=_0x32cd74;_0x47277b[_0x1bbe5f][_0x5a42ff(0x69)]=_0x17fb55;}),_0x39932d[_0x32cd74(0xb3)]((_0x397e7f,_0x3628bd)=>{var _0x121cac=_0x32cd74;_0x47277b[_0x3628bd][_0x121cac(0x97)]=_0x397e7f;}),_0x122fde[_0x32cd74(0xb3)]((_0x4e7dac,_0x3ff8ee)=>{var _0xd20dd5=_0x32cd74;_0x47277b[_0x3ff8ee][_0xd20dd5(0xa5)]=_0x4e7dac;}),_0x16558c[_0x32cd74(0xb3)]((_0x18d1ce,_0x4f9069)=>{_0x47277b[_0x4f9069]['secondary_unit']=_0x18d1ce;}),_0x5ac0b5[_0x32cd74(0xb3)]((_0x68521f,_0x736a0)=>{var _0x4a6ee2=_0x32cd74;_0x47277b[_0x736a0][_0x4a6ee2(0xcd)]=_0x68521f;}),_0x2aafcc['forEach']((_0x32fe0c,_0x151608)=>{var _0x48397=_0x32cd74;_0x47277b[_0x151608][_0x48397(0xa4)]=_0x32fe0c;}),_0x2362bc[_0x32cd74(0xb3)]((_0x24f177,_0x26bfd3)=>{_0x47277b[_0x26bfd3]['conversion_data']=_0x24f177;}),_0x6a9616['forEach']((_0x697a54,_0x3ccd9a)=>{var _0x3e6415=_0x32cd74;_0x47277b[_0x3ccd9a][_0x3e6415(0x6b)]=_0x697a54;});const _0x1857b1=await approver_acct[_0x32cd74(0x70)]([{'$unwind':_0x32cd74(0xa8)},{'$match':{'member.id_member':_0x24d052[_0x32cd74(0xff)][_0x32cd74(0xef)]}},{'$group':{'_id':{'id_member':_0x32cd74(0xd8),'name':'$member.name'},'head_id_staff':{'$first':_0x32cd74(0xf3)}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x32cd74(0xf3)}}},{'$lookup':{'from':_0x32cd74(0x90),'localField':_0x32cd74(0x7f),'foreignField':_0x32cd74(0xcc),'as':_0x32cd74(0x76)}},{'$unwind':_0x32cd74(0xee)}]),_0x230137=new invoice_for_sales_order();await _0x230137[_0x32cd74(0xf5)]();const _0x1af778=_0x24d052[_0x32cd74(0xff)],_0x4030b2=await staff[_0x32cd74(0xb0)]({'email':_0x1af778[_0x32cd74(0x8d)]}),_0x3a0080=new sales_order({'invoice':_0x230137[_0x32cd74(0xc2)][_0x32cd74(0xf9)]()[_0x32cd74(0xd7)](0x8,'0'),'customer':_0x260400,'date':_0x2f66a5,'sale_product':_0x47277b,'note':_0x38b87d,'sales_staff_id':_0x4030b2[_0x32cd74(0xcc)][_0x32cd74(0xec)](),'JD':_0x3ed968,'accounting_account_id':_0x1857b1[0x0]['head_id_staff'],'po_number':_0x4729af,'desired_delivery':_0x5ebb38,'wms_account_confirm':_0x32cd74(0xbc),'accounting_account_confirm':_0x32cd74(0xbc)}),_0xd70d20=await _0x3a0080[_0x32cd74(0xf5)]();var _0x21d949=_0xd70d20['sale_product'],_0x5dcb99='',_0x15c042,_0x5a5185=0x0;for(_0x15c042 in _0x21d949){_0x5dcb99+=_0x32cd74(0x80)+_0x32cd74(0x9c)+_0x21d949[_0x15c042][_0x32cd74(0xed)]+_0x32cd74(0xa1)+_0x32cd74(0x9c)+_0x21d949[_0x15c042]['product_code']+_0x32cd74(0xa1)+_0x32cd74(0x9c)+_0x21d949[_0x15c042][_0x32cd74(0xda)]+'</td>'+_0x32cd74(0x9c)+_0x21d949[_0x15c042][_0x32cd74(0xc6)]+_0x32cd74(0xa1)+_0x32cd74(0xa2),_0x5a5185+=parseInt(_0x21d949[_0x15c042]['quantity']);}const _0x281174=await master_shop[_0x32cd74(0xa0)](),_0x6486d1=await email_settings['findOne']();let _0x4b9a1a=nodemailer[_0x32cd74(0x83)]({'port':Number(_0x6486d1['port']),'secure':![],'auth':{'user':_0x6486d1[_0x32cd74(0x8d)],'pass':_0x6486d1[_0x32cd74(0xca)]}});const _0xb451ab=_0x24d052['protocol']+_0x32cd74(0x9a)+_0x24d052[_0x32cd74(0xbe)][_0x32cd74(0xd3)];let _0x510ed9={'from':_0x6486d1[_0x32cd74(0x8d)],'to':_0x1857b1[0x0][_0x32cd74(0x76)]['email']+_0x32cd74(0xac),'subject':_0x32cd74(0xd4)+_0xd70d20[_0x32cd74(0xb5)],'attachments':[{'filename':_0x32cd74(0xdc),'path':__dirname+_0x32cd74(0x98)+'/upload/'+_0x281174[0x0]['image'],'cid':_0x32cd74(0x96)}],'html':_0x32cd74(0xfc)+'<html><head><title></title>'+_0x32cd74(0xb8)+'</head><body>'+_0x32cd74(0x7b)+_0x32cd74(0x92)+_0x32cd74(0x7b)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x32cd74(0x6d)+'<div>'+_0x32cd74(0xfb)+_0x32cd74(0x6d)+'</div>'+_0x32cd74(0xa6)+_0x32cd74(0x7b)+_0x32cd74(0xd6)+_0x1857b1[0x0][_0x32cd74(0x76)][_0x32cd74(0x89)]+'</b>,\x20</span><br>'+'</div>'+_0x32cd74(0x7b)+_0x32cd74(0xde)+_0x32cd74(0x6d)+'<div>'+'<span>\x20Request\x20ID:\x20<b>'+_0xd70d20[_0x32cd74(0xb5)]+_0x32cd74(0x93)+_0x32cd74(0xbd)+_0x4030b2[_0x32cd74(0x89)]+_0x32cd74(0x93)+_0x32cd74(0x9f)+_0xd70d20[_0x32cd74(0xe4)]+'</b></span>\x20<br><br>'+_0x32cd74(0x6d)+_0x32cd74(0xf7)+_0x32cd74(0xfd)+_0x32cd74(0x80)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x32cd74(0xad)+_0x32cd74(0xf2)+_0x32cd74(0xa2)+'</thead>'+_0x32cd74(0x74)+'\x20'+_0x5dcb99+'\x20'+_0x32cd74(0xb9)+'</table>'+_0x32cd74(0x7b)+_0x32cd74(0xe2)+_0x5a5185+_0x32cd74(0xe6)+_0x32cd74(0x86)+'<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>'+_0x32cd74(0xa9)+_0x32cd74(0x6d)+'<div\x20style=\x22text-align:\x20center;\x22>'+_0x32cd74(0xe3)+_0xb451ab+'/accounting_approval/'+_0xd70d20['_id']+'\x22>Change\x20Status</a>'+'<br><br>'+_0x32cd74(0x6d)+_0x32cd74(0x7b)+_0x32cd74(0x7a)+_0x32cd74(0x68)+_0x32cd74(0x6d)+_0x32cd74(0x6d)+_0x32cd74(0xdd)+'</body></html>'};_0x4b9a1a[_0x32cd74(0x8a)](_0x510ed9,function(_0x3b7f55,_0x36e969){var _0x2fb6b2=_0x32cd74;_0x3b7f55?(console[_0x2fb6b2(0xf1)](_0x3b7f55),console['log'](_0x2fb6b2(0xc7))):console['log'](_0x2fb6b2(0xb1));}),_0x24d052[_0x32cd74(0x8f)]('success','Sales\x20Order\x20is\x20ongoing'),_0x2231b2[_0x32cd74(0xf0)]('/sales_order/view_sales/'+_0xd70d20[_0x32cd74(0xcc)]);}catch(_0x413154){}}),router['post'](a0_0x392bd3(0xfe),auth,async(_0x879f8a,_0x2c8ff5)=>{var _0x4df394=a0_0x392bd3;try{const _0x589b40=_0x879f8a['user'],_0x427147=await profile[_0x4df394(0xb0)]({'email':_0x589b40['email']}),_0x397e77=await product[_0x4df394(0xa0)]({'sales_category':_0x589b40[_0x4df394(0xd1)]});_0x2c8ff5[_0x4df394(0xbf)](_0x397e77);}catch(_0x264351){}}),router[a0_0x392bd3(0x8c)](a0_0x392bd3(0x7d),auth,async(_0x60cb49,_0x3bc8a2)=>{var _0x53b251=a0_0x392bd3;try{const _0x1cd3d0=_0x60cb49['user'],{id_data:_0x379bb2}=_0x60cb49[_0x53b251(0xdb)],_0x86b5f=await profile[_0x53b251(0xb0)]({'email':_0x1cd3d0[_0x53b251(0x8d)]}),_0x1d80b9=mongoose[_0x53b251(0xd5)][_0x53b251(0x9e)];var _0x4853b8=_0x1d80b9(_0x379bb2);const _0xcd1d3b=await product[_0x53b251(0xa0)]({'_id':_0x4853b8});_0x3bc8a2[_0x53b251(0xbf)](_0xcd1d3b);}catch(_0x47ae0e){}}),module[a0_0x392bd3(0x77)]=router;