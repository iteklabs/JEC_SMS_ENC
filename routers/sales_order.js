function a0_0x2d13(_0x6c268,_0x45889f){var _0x5d510f=a0_0x5d51();return a0_0x2d13=function(_0x2d1383,_0x457320){_0x2d1383=_0x2d1383-0x88;var _0x2865a5=_0x5d510f[_0x2d1383];return _0x2865a5;},a0_0x2d13(_0x6c268,_0x45889f);}var a0_0x4698c9=a0_0x2d13;(function(_0x32d76a,_0x5dafb3){var _0x1bfee9=a0_0x2d13,_0x5cd4f3=_0x32d76a();while(!![]){try{var _0x32541a=-parseInt(_0x1bfee9(0xa0))/0x1*(-parseInt(_0x1bfee9(0x10b))/0x2)+parseInt(_0x1bfee9(0xca))/0x3*(-parseInt(_0x1bfee9(0xe2))/0x4)+-parseInt(_0x1bfee9(0xae))/0x5+-parseInt(_0x1bfee9(0xc3))/0x6+-parseInt(_0x1bfee9(0xc8))/0x7+-parseInt(_0x1bfee9(0xf9))/0x8+parseInt(_0x1bfee9(0x8b))/0x9;if(_0x32541a===_0x5dafb3)break;else _0x5cd4f3['push'](_0x5cd4f3['shift']());}catch(_0x45002c){_0x5cd4f3['push'](_0x5cd4f3['shift']());}}}(a0_0x5d51,0x7151e));function a0_0x5d51(){var _0x31b6f2=['prod_code','createTransport','<tbody\x20style=\x22text-align:\x20center;\x22>','sale_product','account_data','</td>','exceljs','head_id_staff','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','log','getPrimUnitNo','redirect','dicount_price_adjust','price','headers','<span>\x20Dear\x20<b>','<h5>\x20JEC\x20SMS\x20</h5>','43256ddVfsQ','<!DOCTYPE\x20html>','prod_cat','nodemailer','../models/all_models','primary_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','string','$JD','<strong>\x20Regards\x20</strong>','</tbody>','product_name','dicount_price','findOne','<span>\x20Requested\x20By:\x20<b>','$account_data','save','/sales_order/view_sales/','totalPrice','<html><head><title></title>','<h2>\x20JEC\x20SMS\x20</h2>','Approval\x20for\x20','get','unit','logo','</tr>','25149825FdEKUq','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','<br><br>','email','protocol','</b>,\x20</span><br>','<tr>','Arabic\x20(ae)','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','Arabic','Logo.png','<hr\x20class=\x22my-3\x22>','</thead>','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','</b></span>\x20<br>','head_staff_info','/accounting_approval/','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','errors','Hindi','discount','17dGAIPE','port','_id','invoice_init','padStart','Portuguese','$date','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','$wms_account_confirm','name','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','/product_list','ObjectId','isFG','3614305pjLOlw','post','find','all_sales_order','mongodb','user','exports','</div>','findById','/view_sales/:id','real_qty_unit_val','aggregate','/product_data','product_code','json','head_id_staff_id','French','prod_name','add_sales_order','secondary_unit','/upload/','3549852UirQPx','$invoice','mongoose','English','English\x20(US)','4395104sPZpAN','Spanish','34110Ffmwqu','render','language','$head_staff_info','staffs','accounting_account_id','params','conversion_unit','wms_account_id','Error\x20Occurs','xlsx','://','forEach','German','$_id','Types','Sales\x20Order\x20is\x20ongoing','Portuguese\x20(BR)','quantity','$head_id_staff','tmpisFG','wms_data','true','success','36BeoniR','Chinese','<div\x20style=\x22text-align:\x20center;\x22>','</table>','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','totalprice','</body></html>','flash','../public/language/languages.json','view_sales_order','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','valueOf','no_per_unit','/add_sales','<div>','invoice','$wms_data','conversion_data','$accounting_account_id','host','sttaff_id','body',';christian.villamer@jakagroup.com','5225904oMQtty'];a0_0x5d51=function(){return _0x31b6f2;};return a0_0x5d51();}const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x4698c9(0x10f)),auth=require('../middleware/auth'),users=require(a0_0x4698c9(0xea)),excelJS=require(a0_0x4698c9(0x100)),xlsx=require(a0_0x4698c9(0xd4)),mongoose=require(a0_0x4698c9(0xc5)),{ObjectId}=require(a0_0x4698c9(0xb2)),nodemailer=require(a0_0x4698c9(0x10e));router['get']('/',auth,async(_0x2a93ba,_0x5464eb)=>{var _0x46d636=a0_0x4698c9;try{const _0x4f7838=await master_shop[_0x46d636(0xb0)](),_0x3b94d8=_0x2a93ba['user'],_0x3238eb=await profile[_0x46d636(0x118)]({'email':_0x3b94d8[_0x46d636(0x8e)]}),_0x43500a=await staff['findOne']({'email':_0x3b94d8[_0x46d636(0x8e)]}),_0x1c61ac=await sales_order[_0x46d636(0xb9)]([{'$match':{'sales_staff_id':_0x43500a[_0x46d636(0xa2)]['valueOf']()}},{'$unwind':'$sale_product'},{'$group':{'_id':_0x46d636(0xd8),'invoice':{'$first':_0x46d636(0xc4)},'customer':{'$first':'$customer'},'date':{'$first':_0x46d636(0xa6)},'JD':{'$first':_0x46d636(0x113)},'accounting_account_confirm':{'$first':'$accounting_account_confirm'},'wms_account_confirm':{'$first':_0x46d636(0xa8)},'totalQTY':{'$sum':'$sale_product.quantity'}}}]);if(_0x4f7838[0x0][_0x46d636(0xcc)]==_0x46d636(0xc7))var _0x1359ff=users[_0x46d636(0xc6)];else{if(_0x4f7838[0x0][_0x46d636(0xcc)]=='Hindi')var _0x1359ff=users[_0x46d636(0x9e)];else{if(_0x4f7838[0x0][_0x46d636(0xcc)]==_0x46d636(0xd7))var _0x1359ff=users[_0x46d636(0xd7)];else{if(_0x4f7838[0x0][_0x46d636(0xcc)]==_0x46d636(0xc9))var _0x1359ff=users['Spanish'];else{if(_0x4f7838[0x0]['language']==_0x46d636(0xbe))var _0x1359ff=users['French'];else{if(_0x4f7838[0x0]['language']==_0x46d636(0xdb))var _0x1359ff=users[_0x46d636(0xa5)];else{if(_0x4f7838[0x0]['language']==_0x46d636(0xe3))var _0x1359ff=users[_0x46d636(0xe3)];else{if(_0x4f7838[0x0][_0x46d636(0xcc)]=='Arabic\x20(ae)')var _0x1359ff=users[_0x46d636(0x94)];}}}}}}}_0x5464eb[_0x46d636(0xcb)](_0x46d636(0xb1),{'success':_0x2a93ba[_0x46d636(0xe9)](_0x46d636(0xe1)),'errors':_0x2a93ba['flash'](_0x46d636(0x9d)),'master_shop':_0x4f7838,'profile':_0x3238eb,'role':_0x3b94d8,'language':_0x1359ff,'product_list':_0x43500a['product_list'],'sales_mine':_0x1c61ac,'staff_arr':_0x43500a});}catch(_0x26ac67){console[_0x46d636(0x103)](_0x26ac67);}}),router[a0_0x4698c9(0x121)](a0_0x4698c9(0xef),auth,async(_0xa02665,_0xcf5a2)=>{var _0x4a3cd8=a0_0x4698c9;try{const _0x3f2aba=await master_shop['find'](),_0x54afe5=_0xa02665['user'],_0x5cb460=await profile[_0x4a3cd8(0x118)]({'email':_0x54afe5[_0x4a3cd8(0x8e)]}),_0x1aff63=await staff['findOne']({'email':_0x54afe5[_0x4a3cd8(0x8e)]}),_0x1d36b0=await customer[_0x4a3cd8(0xb0)]({'agent_id':_0x1aff63[_0x4a3cd8(0xa2)]});if(_0x3f2aba[0x0][_0x4a3cd8(0xcc)]=='English\x20(US)')var _0x5eb9e0=users[_0x4a3cd8(0xc6)];else{if(_0x3f2aba[0x0][_0x4a3cd8(0xcc)]==_0x4a3cd8(0x9e))var _0x5eb9e0=users[_0x4a3cd8(0x9e)];else{if(_0x3f2aba[0x0][_0x4a3cd8(0xcc)]=='German')var _0x5eb9e0=users['German'];else{if(_0x3f2aba[0x0][_0x4a3cd8(0xcc)]==_0x4a3cd8(0xc9))var _0x5eb9e0=users[_0x4a3cd8(0xc9)];else{if(_0x3f2aba[0x0][_0x4a3cd8(0xcc)]==_0x4a3cd8(0xbe))var _0x5eb9e0=users[_0x4a3cd8(0xbe)];else{if(_0x3f2aba[0x0][_0x4a3cd8(0xcc)]==_0x4a3cd8(0xdb))var _0x5eb9e0=users[_0x4a3cd8(0xa5)];else{if(_0x3f2aba[0x0][_0x4a3cd8(0xcc)]==_0x4a3cd8(0xe3))var _0x5eb9e0=users['Chinese'];else{if(_0x3f2aba[0x0][_0x4a3cd8(0xcc)]=='Arabic\x20(ae)')var _0x5eb9e0=users['Arabic'];}}}}}}}_0xcf5a2['render'](_0x4a3cd8(0xc0),{'success':_0xa02665[_0x4a3cd8(0xe9)]('success'),'errors':_0xa02665[_0x4a3cd8(0xe9)](_0x4a3cd8(0x9d)),'master_shop':_0x3f2aba,'profile':_0x5cb460,'role':_0x54afe5,'language':_0x5eb9e0,'customer':_0x1d36b0,'staff_arr':_0x1aff63});}catch(_0x1ada82){console['log'](_0x1ada82);}}),router['get'](a0_0x4698c9(0xb7),auth,async(_0x58aaec,_0x30552c)=>{var _0xe56b11=a0_0x4698c9;try{const _0x1e7f6a=await master_shop[_0xe56b11(0xb0)](),_0x164ea3=_0x58aaec[_0xe56b11(0xb3)],_0x2fc0ba=await profile[_0xe56b11(0x118)]({'email':_0x164ea3['email']}),_0x59a124=await staff['findOne']({'email':_0x164ea3[_0xe56b11(0x8e)]}),_0x3739e6=await customer['find']({'agent_id':_0x59a124[_0xe56b11(0xa2)]}),_0x4c4bbc=mongoose[_0xe56b11(0xd9)]['ObjectId'],_0x4f0caf=_0x58aaec[_0xe56b11(0xd0)]['id'],_0x452922=await sales_order[_0xe56b11(0xb6)](_0x4f0caf),_0x7a9cfc=await sales_order['aggregate']([{'$match':{'_id':_0x4c4bbc(_0x4f0caf)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0xe56b11(0xf4)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':_0xe56b11(0xce),'localField':_0xe56b11(0xcf),'foreignField':'_id','as':_0xe56b11(0xfe)}},{'$unwind':_0xe56b11(0x11a)},{'$lookup':{'from':'staffs','localField':_0xe56b11(0xd2),'foreignField':_0xe56b11(0xa2),'as':_0xe56b11(0xdf)}},{'$unwind':{'path':_0xe56b11(0xf2),'preserveNullAndEmptyArrays':!![]}}]);if(_0x1e7f6a[0x0]['language']==_0xe56b11(0xc7))var _0x5dfeac=users[_0xe56b11(0xc6)];else{if(_0x1e7f6a[0x0][_0xe56b11(0xcc)]=='Hindi')var _0x5dfeac=users[_0xe56b11(0x9e)];else{if(_0x1e7f6a[0x0][_0xe56b11(0xcc)]==_0xe56b11(0xd7))var _0x5dfeac=users['German'];else{if(_0x1e7f6a[0x0]['language']==_0xe56b11(0xc9))var _0x5dfeac=users[_0xe56b11(0xc9)];else{if(_0x1e7f6a[0x0]['language']==_0xe56b11(0xbe))var _0x5dfeac=users[_0xe56b11(0xbe)];else{if(_0x1e7f6a[0x0][_0xe56b11(0xcc)]==_0xe56b11(0xdb))var _0x5dfeac=users[_0xe56b11(0xa5)];else{if(_0x1e7f6a[0x0][_0xe56b11(0xcc)]==_0xe56b11(0xe3))var _0x5dfeac=users[_0xe56b11(0xe3)];else{if(_0x1e7f6a[0x0][_0xe56b11(0xcc)]==_0xe56b11(0x92))var _0x5dfeac=users['Arabic'];}}}}}}}_0x30552c[_0xe56b11(0xcb)](_0xe56b11(0xeb),{'success':_0x58aaec['flash'](_0xe56b11(0xe1)),'errors':_0x58aaec['flash'](_0xe56b11(0x9d)),'master_shop':_0x1e7f6a,'profile':_0x2fc0ba,'role':_0x164ea3,'language':_0x5dfeac,'customer':_0x3739e6,'sales_sa':_0x452922,'approvers':_0x7a9cfc[0x0],'staff_arr':_0x59a124});}catch(_0x4034df){console['log'](_0x4034df);}}),router['post']('/add_sales',auth,async(_0x1bab5d,_0x5ae3ac)=>{var _0xdf51f9=a0_0x4698c9;try{const {customer:_0x5a120c,date:_0x2b2d8a,prod_code:_0x5796bb,note:_0x27610a,paid_status:_0x29d07e,JD:_0xbbc1a6,po_number:_0x444330,desire_date:_0x231f19}=_0x1bab5d[_0xdf51f9(0xf7)];if(typeof _0x5796bb==_0xdf51f9(0x112))var _0x7f2542=[_0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0xfa)]],_0x22df38=[_0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0xbf)]],_0xf086ed=[_0x1bab5d['body'][_0xdf51f9(0x110)]],_0x2f68b9=[_0x1bab5d['body'][_0xdf51f9(0xdc)]],_0x2c1f71=[_0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0x88)]],_0x2b5965=[_0x1bab5d[_0xdf51f9(0xf7)]['product_id']],_0xa63ff0=[_0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0x107)]],_0x2bad18=[_0x1bab5d[_0xdf51f9(0xf7)]['totalPrice']],_0x3496ac=[_0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0x117)]],_0x392bae=[_0x1bab5d['body'][_0xdf51f9(0xde)]],_0x47ead0=[_0x1bab5d[_0xdf51f9(0xf7)]['dicount_price_adjust']],_0x811bc3=[_0x1bab5d['body'][_0xdf51f9(0xee)]],_0x4b3a14=[_0x1bab5d[_0xdf51f9(0xf7)]['getPrimUnitNo']],_0x55a22a=[_0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0x10d)]],_0xbc476e=[_0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0xc1)]],_0xd9f4ee=[_0x1bab5d[_0xdf51f9(0xf7)]['conversion_unit']];else var _0x7f2542=[..._0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0xfa)]],_0x22df38=[..._0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0xbf)]],_0xf086ed=[..._0x1bab5d[_0xdf51f9(0xf7)]['primary_code']],_0x2f68b9=[..._0x1bab5d['body'][_0xdf51f9(0xdc)]],_0x2c1f71=[..._0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0x88)]],_0x2b5965=[..._0x1bab5d[_0xdf51f9(0xf7)]['product_id']],_0xa63ff0=[..._0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0x107)]],_0x2bad18=[..._0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0x11d)]],_0x3496ac=[..._0x1bab5d['body'][_0xdf51f9(0x117)]],_0x392bae=[..._0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0xde)]],_0x47ead0=[..._0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0x106)]],_0x811bc3=[..._0x1bab5d[_0xdf51f9(0xf7)]['no_per_unit']],_0x4b3a14=[..._0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0x104)]],_0x55a22a=[..._0x1bab5d[_0xdf51f9(0xf7)]['prod_cat']],_0xbc476e=[..._0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0xc1)]],_0xd9f4ee=[..._0x1bab5d[_0xdf51f9(0xf7)][_0xdf51f9(0xd1)]];const _0xa3349d=_0x7f2542['map'](_0x1aa13c=>{return _0x1aa13c={'product_code':_0x1aa13c};});_0x22df38['forEach']((_0x5eb26f,_0x4fa2c9)=>{var _0x4be039=_0xdf51f9;_0xa3349d[_0x4fa2c9][_0x4be039(0x116)]=_0x5eb26f;}),_0xf086ed['forEach']((_0x3dc2c1,_0x31c8b5)=>{var _0x1447f4=_0xdf51f9;_0xa3349d[_0x31c8b5][_0x1447f4(0x110)]=_0x3dc2c1;}),_0x2f68b9[_0xdf51f9(0xd6)]((_0x5d03f7,_0x24b1b9)=>{_0xa3349d[_0x24b1b9]['quantity']=_0x5d03f7;}),_0x2c1f71[_0xdf51f9(0xd6)]((_0x42b418,_0x254355)=>{var _0x2f8fcc=_0xdf51f9;_0xa3349d[_0x254355][_0x2f8fcc(0x88)]=_0x42b418;}),_0x2b5965[_0xdf51f9(0xd6)]((_0x4333f1,_0x7392fd)=>{_0xa3349d[_0x7392fd]['product_id']=_0x4333f1;}),_0x47ead0[_0xdf51f9(0xd6)]((_0x564e9b,_0x2a6a47)=>{_0xa3349d[_0x2a6a47]['adjustment_discount']=_0x564e9b;}),_0xa63ff0[_0xdf51f9(0xd6)]((_0x54d8da,_0x102040)=>{var _0x4fabb1=_0xdf51f9;_0xa3349d[_0x102040][_0x4fabb1(0x107)]=_0x54d8da;}),_0x2bad18[_0xdf51f9(0xd6)]((_0x4ee81a,_0x4adb97)=>{var _0x20334c=_0xdf51f9;_0xa3349d[_0x4adb97][_0x20334c(0xe7)]=_0x4ee81a;}),_0x3496ac[_0xdf51f9(0xd6)]((_0x108aca,_0x39e9eb)=>{var _0x2106a7=_0xdf51f9;_0xa3349d[_0x39e9eb][_0x2106a7(0x9f)]=_0x108aca;}),_0x392bae[_0xdf51f9(0xd6)]((_0x5c608a,_0x3e0f1c)=>{var _0x3f5ac1=_0xdf51f9;_0xa3349d[_0x3e0f1c][_0x3f5ac1(0xad)]=_0x5c608a;}),_0xbc476e[_0xdf51f9(0xd6)]((_0x4e3217,_0x4f42cf)=>{var _0x8267fb=_0xdf51f9;_0xa3349d[_0x4f42cf][_0x8267fb(0xc1)]=_0x4e3217;}),_0x4b3a14[_0xdf51f9(0xd6)]((_0x1a0782,_0x4ac0d8)=>{var _0x4cf8ce=_0xdf51f9;_0xa3349d[_0x4ac0d8][_0x4cf8ce(0xb8)]=_0x1a0782;}),_0x55a22a[_0xdf51f9(0xd6)]((_0x39ee77,_0x4bcdd4)=>{var _0xf00e94=_0xdf51f9;_0xa3349d[_0x4bcdd4][_0xf00e94(0x10d)]=_0x39ee77;}),_0xd9f4ee[_0xdf51f9(0xd6)]((_0x24b200,_0x42fba5)=>{var _0x26c612=_0xdf51f9;_0xa3349d[_0x42fba5][_0x26c612(0xf3)]=_0x24b200;}),_0x811bc3[_0xdf51f9(0xd6)]((_0x5a74a7,_0xd8ab5a)=>{var _0xd86cea=_0xdf51f9;_0xa3349d[_0xd8ab5a][_0xd86cea(0xee)]=_0x5a74a7;});const _0x4ee888=await approver_acct[_0xdf51f9(0xb9)]([{'$unwind':'$member'},{'$match':{'member.id_member':_0x1bab5d[_0xdf51f9(0xb3)][_0xdf51f9(0xf6)]}},{'$group':{'_id':{'id_member':'$member.id_member','name':'$member.name'},'head_id_staff':{'$first':_0xdf51f9(0xdd)}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0xdf51f9(0xdd)}}},{'$lookup':{'from':_0xdf51f9(0xce),'localField':_0xdf51f9(0xbd),'foreignField':_0xdf51f9(0xa2),'as':_0xdf51f9(0x9a)}},{'$unwind':_0xdf51f9(0xcd)}]),_0x6d9676=new invoice_for_sales_order();await _0x6d9676[_0xdf51f9(0x11b)]();const _0x35339e=_0x1bab5d[_0xdf51f9(0xb3)],_0x16cd1c=await staff[_0xdf51f9(0x118)]({'email':_0x35339e[_0xdf51f9(0x8e)]}),_0x299f96=new sales_order({'invoice':_0x6d9676[_0xdf51f9(0xa3)]['toString']()[_0xdf51f9(0xa4)](0x8,'0'),'customer':_0x5a120c,'date':_0x2b2d8a,'sale_product':_0xa3349d,'note':_0x27610a,'sales_staff_id':_0x16cd1c[_0xdf51f9(0xa2)][_0xdf51f9(0xed)](),'JD':_0xbbc1a6,'accounting_account_id':_0x4ee888[0x0][_0xdf51f9(0x101)],'po_number':_0x444330,'desired_delivery':_0x231f19,'wms_account_confirm':_0xdf51f9(0xe0),'accounting_account_confirm':_0xdf51f9(0xe0)}),_0x5c88d2=await _0x299f96[_0xdf51f9(0x11b)]();var _0x267eb6=_0x5c88d2[_0xdf51f9(0xfd)],_0xcc5d16='',_0x32af35,_0xa9a3f6=0x0;for(_0x32af35 in _0x267eb6){_0xcc5d16+=_0xdf51f9(0x91)+_0xdf51f9(0xe6)+_0x267eb6[_0x32af35][_0xdf51f9(0x116)]+_0xdf51f9(0xff)+_0xdf51f9(0xe6)+_0x267eb6[_0x32af35][_0xdf51f9(0xbb)]+_0xdf51f9(0xff)+_0xdf51f9(0xe6)+_0x267eb6[_0x32af35]['quantity']+_0xdf51f9(0xff)+_0xdf51f9(0xe6)+_0x267eb6[_0x32af35][_0xdf51f9(0x88)]+_0xdf51f9(0xff)+'</tr>',_0xa9a3f6+=parseInt(_0x267eb6[_0x32af35][_0xdf51f9(0xdc)]);}const _0x3b68d2=await master_shop['find'](),_0x487342=await email_settings[_0xdf51f9(0x118)]();let _0x43a27d=nodemailer[_0xdf51f9(0xfb)]({'port':Number(_0x487342[_0xdf51f9(0xa1)]),'secure':![],'auth':{'user':_0x487342[_0xdf51f9(0x8e)],'pass':_0x487342['password']}});const _0x3f1dad=_0x1bab5d[_0xdf51f9(0x8f)]+_0xdf51f9(0xd5)+_0x1bab5d[_0xdf51f9(0x108)][_0xdf51f9(0xf5)];let _0x4f0dc6={'from':_0x487342['email'],'to':_0x4ee888[0x0][_0xdf51f9(0x9a)][_0xdf51f9(0x8e)]+_0xdf51f9(0xf8),'subject':_0xdf51f9(0x120)+_0x5c88d2[_0xdf51f9(0xf1)],'attachments':[{'filename':_0xdf51f9(0x95),'path':__dirname+'/../public'+_0xdf51f9(0xc2)+_0x3b68d2[0x0]['image'],'cid':_0xdf51f9(0x89)}],'html':_0xdf51f9(0x10c)+_0xdf51f9(0x11e)+'<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>'+'</head><body>'+_0xdf51f9(0xf0)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0xdf51f9(0xf0)+_0xdf51f9(0xec)+_0xdf51f9(0xb5)+_0xdf51f9(0xf0)+_0xdf51f9(0x11f)+_0xdf51f9(0xb5)+_0xdf51f9(0xb5)+_0xdf51f9(0x96)+_0xdf51f9(0xf0)+_0xdf51f9(0x109)+_0x4ee888[0x0][_0xdf51f9(0x9a)][_0xdf51f9(0xa9)]+_0xdf51f9(0x90)+_0xdf51f9(0xb5)+_0xdf51f9(0xf0)+_0xdf51f9(0x98)+_0xdf51f9(0xb5)+_0xdf51f9(0xf0)+'<span>\x20Request\x20ID:\x20<b>'+_0x5c88d2[_0xdf51f9(0xf1)]+_0xdf51f9(0x99)+_0xdf51f9(0x119)+_0x16cd1c[_0xdf51f9(0xa9)]+_0xdf51f9(0x99)+'<span>\x20Request\x20Date:\x20<b>'+_0x5c88d2['date']+'</b></span>\x20<br><br>'+'</div>'+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0xdf51f9(0x93)+'<tr>'+_0xdf51f9(0x111)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0xdf51f9(0x8c)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0xdf51f9(0x8a)+_0xdf51f9(0x97)+_0xdf51f9(0xfc)+'\x20'+_0xcc5d16+'\x20'+_0xdf51f9(0x115)+_0xdf51f9(0xe5)+_0xdf51f9(0xf0)+_0xdf51f9(0x102)+_0xa9a3f6+'</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>'+_0xdf51f9(0xa7)+_0xdf51f9(0x9c)+'<br><br><br>'+'</div>'+_0xdf51f9(0xe4)+'<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22'+_0x3f1dad+_0xdf51f9(0x9b)+_0x5c88d2[_0xdf51f9(0xa2)]+'\x22>Change\x20Status</a>'+_0xdf51f9(0x8d)+_0xdf51f9(0xb5)+_0xdf51f9(0xf0)+_0xdf51f9(0x114)+_0xdf51f9(0x10a)+_0xdf51f9(0xb5)+'</div>'+_0xdf51f9(0xaa)+_0xdf51f9(0xe8)};_0x43a27d['sendMail'](_0x4f0dc6,function(_0x438cc7,_0x48b5db){var _0x49031e=_0xdf51f9;_0x438cc7?(console[_0x49031e(0x103)](_0x438cc7),console[_0x49031e(0x103)](_0x49031e(0xd3))):console['log']('Email\x20sent\x20successfully');}),_0x1bab5d[_0xdf51f9(0xe9)]('success',_0xdf51f9(0xda)),_0x5ae3ac[_0xdf51f9(0x105)](_0xdf51f9(0x11c)+_0x5c88d2[_0xdf51f9(0xa2)]);}catch(_0x357ac8){}}),router[a0_0x4698c9(0xaf)](a0_0x4698c9(0xab),auth,async(_0xba180,_0x3ee9dc)=>{var _0x482d84=a0_0x4698c9;try{const _0x5640a7=_0xba180[_0x482d84(0xb3)],_0x3eb976=await profile[_0x482d84(0x118)]({'email':_0x5640a7['email']}),_0x30b911=await product[_0x482d84(0xb0)]({'sales_category':_0x5640a7['sales_category']});_0x3ee9dc[_0x482d84(0xbc)](_0x30b911);}catch(_0x48a00b){}}),router['post'](a0_0x4698c9(0xba),auth,async(_0x5468f7,_0x331a1f)=>{var _0x16c280=a0_0x4698c9;try{const _0x523221=_0x5468f7[_0x16c280(0xb3)],{id_data:_0x39bce7}=_0x5468f7[_0x16c280(0xf7)],_0x3c159f=await profile[_0x16c280(0x118)]({'email':_0x523221[_0x16c280(0x8e)]}),_0x53e269=mongoose[_0x16c280(0xd9)][_0x16c280(0xac)];var _0x137be3=_0x53e269(_0x39bce7);const _0x43a52b=await product[_0x16c280(0xb0)]({'_id':_0x137be3});_0x331a1f[_0x16c280(0xbc)](_0x43a52b);}catch(_0x23ba37){}}),module[a0_0x4698c9(0xb4)]=router;