function a0_0x535a(_0x2efc99,_0x1e3e3e){var _0x308e49=a0_0x308e();return a0_0x535a=function(_0x535aca,_0x246df0){_0x535aca=_0x535aca-0xb6;var _0x33abb1=_0x308e49[_0x535aca];return _0x33abb1;},a0_0x535a(_0x2efc99,_0x1e3e3e);}var a0_0x41b53e=a0_0x535a;function a0_0x308e(){var _0x516d20=['<span>\x20Requested\x20By:\x20<b>','params','/accounting_approval/','ObjectId','/product_data','nodemailer','<span>\x20Request\x20Date:\x20<b>','get','Approval\x20for\x20','flash','email','_id','primary_code','</table>','no_per_unit','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','logo','all_sales_order','<span>\x20Dear\x20<b>',';christian.villamer@jakagroup.com','German','466252NJclnW','unit','4362205eBzUEt','log','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','$customer','dicount_price_adjust','password','</body></html>','9061171tHCXVk','date','<!DOCTYPE\x20html>','view_sales_order','../models/all_models','$head_id_staff','head_staff_info','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','string','4sCRicX','product_id','true','host','sales_category','Chinese','</b></span>\x20<br><br>','forEach','getPrimUnitNo','conversion_unit','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','headers','$head_staff_info','<tbody\x20style=\x22text-align:\x20center;\x22>','<h2>\x20JEC\x20SMS\x20</h2>','invoice','English','sale_product','Arabic','render','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','discount','</td>','sendMail','name','add_sales_order','json','user','mongoose','$account_data','find','<hr\x20class=\x22my-3\x22>','$accounting_account_id','sttaff_id','protocol','totalPrice','$member.id_member','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','post','accounting_account_id','<br><br><br>','valueOf','187857PLWbgS','dicount_price','2009361LltDsn','<span>\x20Request\x20ID:\x20<b>','$wms_account_confirm','<html><head><title></title>','product_code','body','</div>','</b>,\x20</span><br>','save','prod_code','Router','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','<div>','../middleware/auth','<br><br>','English\x20(US)','$member','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','errors','<strong>\x20Regards\x20</strong>','$sale_product','://','secondary_unit','aggregate','findOne','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','wms_data','Error\x20Occurs','$wms_account_id','mongodb','totalprice','French','/upload/','/../public','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','1750zqcRst','Portuguese\x20(BR)','head_id_staff','padStart','success','head_id_staff_id','Spanish','Portuguese','Hindi','Sales\x20Order\x20is\x20ongoing','<table\x20style=\x22width:\x20100%\x20!important;\x22>','1947293sedNfk','</tbody>','/sales_order/view_sales/','</tr>','8gNeMsZ','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','$wms_data','\x22>Change\x20Status</a>','createTransport','quantity','account_data','</head><body>','prod_cat','10496598SzenHS','language','product_name','map','price','Types','</b></span>\x20<br>','Arabic\x20(ae)','prod_name','exports','tmpisFG','staffs','$date'];a0_0x308e=function(){return _0x516d20;};return a0_0x308e();}(function(_0x3d3bd8,_0x6d6020){var _0xdd8224=a0_0x535a,_0x4add97=_0x3d3bd8();while(!![]){try{var _0x145062=parseInt(_0xdd8224(0xe3))/0x1+-parseInt(_0xdd8224(0x124))/0x2*(parseInt(_0xdd8224(0x150))/0x3)+parseInt(_0xdd8224(0x112))/0x4+parseInt(_0xdd8224(0x114))/0x5+parseInt(_0xdd8224(0xf0))/0x6+-parseInt(_0xdd8224(0x11b))/0x7*(-parseInt(_0xdd8224(0xe7))/0x8)+parseInt(_0xdd8224(0x14e))/0x9*(-parseInt(_0xdd8224(0xd8))/0xa);if(_0x145062===_0x6d6020)break;else _0x4add97['push'](_0x4add97['shift']());}catch(_0x5d84e1){_0x4add97['push'](_0x4add97['shift']());}}}(a0_0x308e,0xf12ba));const express=require('express'),app=express(),router=express[a0_0x41b53e(0xbf)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x41b53e(0x11f)),auth=require(a0_0x41b53e(0xc2)),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require('xlsx'),mongoose=require(a0_0x41b53e(0x140)),{ObjectId}=require(a0_0x41b53e(0xd2)),nodemailer=require(a0_0x41b53e(0x102));router[a0_0x41b53e(0x104)]('/',auth,async(_0x1dc9bb,_0x10eecd)=>{var _0x560a56=a0_0x41b53e;try{const _0xe87d9=await master_shop[_0x560a56(0x142)](),_0x57ec41=_0x1dc9bb['user'],_0x3ca1ea=await profile[_0x560a56(0xcd)]({'email':_0x57ec41[_0x560a56(0x107)]}),_0x275413=await staff['findOne']({'email':_0x57ec41['email']}),_0x1700a3=await sales_order[_0x560a56(0xcc)]([{'$match':{'sales_staff_id':_0x275413[_0x560a56(0x108)]['valueOf']()}},{'$unwind':_0x560a56(0xc9)},{'$group':{'_id':'$_id','invoice':{'$first':'$invoice'},'customer':{'$first':_0x560a56(0x117)},'date':{'$first':_0x560a56(0xfc)},'JD':{'$first':'$JD'},'accounting_account_confirm':{'$first':'$accounting_account_confirm'},'wms_account_confirm':{'$first':_0x560a56(0xb7)},'totalQTY':{'$sum':'$sale_product.quantity'}}}]);if(_0xe87d9[0x0]['language']==_0x560a56(0xc4))var _0x4e02d3=users[_0x560a56(0x134)];else{if(_0xe87d9[0x0][_0x560a56(0xf1)]=='Hindi')var _0x4e02d3=users[_0x560a56(0xe0)];else{if(_0xe87d9[0x0][_0x560a56(0xf1)]==_0x560a56(0x111))var _0x4e02d3=users['German'];else{if(_0xe87d9[0x0][_0x560a56(0xf1)]=='Spanish')var _0x4e02d3=users[_0x560a56(0xde)];else{if(_0xe87d9[0x0][_0x560a56(0xf1)]=='French')var _0x4e02d3=users[_0x560a56(0xd4)];else{if(_0xe87d9[0x0][_0x560a56(0xf1)]==_0x560a56(0xd9))var _0x4e02d3=users[_0x560a56(0xdf)];else{if(_0xe87d9[0x0][_0x560a56(0xf1)]=='Chinese')var _0x4e02d3=users['Chinese'];else{if(_0xe87d9[0x0]['language']==_0x560a56(0xf7))var _0x4e02d3=users[_0x560a56(0x136)];}}}}}}}_0x10eecd[_0x560a56(0x137)](_0x560a56(0x10e),{'success':_0x1dc9bb[_0x560a56(0x106)](_0x560a56(0xdc)),'errors':_0x1dc9bb[_0x560a56(0x106)]('errors'),'master_shop':_0xe87d9,'profile':_0x3ca1ea,'role':_0x57ec41,'language':_0x4e02d3,'product_list':_0x275413['product_list'],'sales_mine':_0x1700a3,'staff_arr':_0x275413});}catch(_0x13e77d){console[_0x560a56(0x115)](_0x13e77d);}}),router['get']('/add_sales',auth,async(_0x4f78fb,_0x2adf98)=>{var _0x43a225=a0_0x41b53e;try{const _0xc73ba2=await master_shop[_0x43a225(0x142)](),_0x1bf772=_0x4f78fb[_0x43a225(0x13f)],_0xbe16b6=await profile[_0x43a225(0xcd)]({'email':_0x1bf772[_0x43a225(0x107)]}),_0x5520a1=await staff[_0x43a225(0xcd)]({'email':_0x1bf772['email']}),_0x4a10ef=await customer[_0x43a225(0x142)]({'agent_id':_0x5520a1[_0x43a225(0x108)]});if(_0xc73ba2[0x0][_0x43a225(0xf1)]=='English\x20(US)')var _0x29094b=users[_0x43a225(0x134)];else{if(_0xc73ba2[0x0][_0x43a225(0xf1)]==_0x43a225(0xe0))var _0x29094b=users['Hindi'];else{if(_0xc73ba2[0x0][_0x43a225(0xf1)]==_0x43a225(0x111))var _0x29094b=users['German'];else{if(_0xc73ba2[0x0]['language']==_0x43a225(0xde))var _0x29094b=users[_0x43a225(0xde)];else{if(_0xc73ba2[0x0]['language']=='French')var _0x29094b=users[_0x43a225(0xd4)];else{if(_0xc73ba2[0x0][_0x43a225(0xf1)]==_0x43a225(0xd9))var _0x29094b=users[_0x43a225(0xdf)];else{if(_0xc73ba2[0x0][_0x43a225(0xf1)]==_0x43a225(0x129))var _0x29094b=users[_0x43a225(0x129)];else{if(_0xc73ba2[0x0]['language']==_0x43a225(0xf7))var _0x29094b=users[_0x43a225(0x136)];}}}}}}}_0x2adf98['render'](_0x43a225(0x13d),{'success':_0x4f78fb[_0x43a225(0x106)]('success'),'errors':_0x4f78fb[_0x43a225(0x106)](_0x43a225(0xc7)),'master_shop':_0xc73ba2,'profile':_0xbe16b6,'role':_0x1bf772,'language':_0x29094b,'customer':_0x4a10ef,'staff_arr':_0x5520a1});}catch(_0x1d384d){console['log'](_0x1d384d);}}),router[a0_0x41b53e(0x104)]('/view_sales/:id',auth,async(_0x107d50,_0x5c4530)=>{var _0x5844f4=a0_0x41b53e;try{const _0x14670b=await master_shop[_0x5844f4(0x142)](),_0x312783=_0x107d50[_0x5844f4(0x13f)],_0x334bde=await profile[_0x5844f4(0xcd)]({'email':_0x312783[_0x5844f4(0x107)]}),_0x2e1483=await staff[_0x5844f4(0xcd)]({'email':_0x312783['email']}),_0x3958cf=await customer[_0x5844f4(0x142)]({'agent_id':_0x2e1483[_0x5844f4(0x108)]}),_0x16c26d=mongoose['Types'][_0x5844f4(0x100)],_0xef016f=_0x107d50[_0x5844f4(0xfe)]['id'],_0x128d71=await sales_order['findById'](_0xef016f),_0x594f77=await sales_order['aggregate']([{'$match':{'_id':_0x16c26d(_0xef016f)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x5844f4(0x144)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x5844f4(0xd1)}}},{'$lookup':{'from':_0x5844f4(0xfb),'localField':_0x5844f4(0x14b),'foreignField':'_id','as':_0x5844f4(0xed)}},{'$unwind':_0x5844f4(0x141)},{'$lookup':{'from':'staffs','localField':'wms_account_id','foreignField':_0x5844f4(0x108),'as':_0x5844f4(0xcf)}},{'$unwind':{'path':_0x5844f4(0xe9),'preserveNullAndEmptyArrays':!![]}}]);if(_0x14670b[0x0][_0x5844f4(0xf1)]=='English\x20(US)')var _0x2bd793=users['English'];else{if(_0x14670b[0x0][_0x5844f4(0xf1)]==_0x5844f4(0xe0))var _0x2bd793=users[_0x5844f4(0xe0)];else{if(_0x14670b[0x0][_0x5844f4(0xf1)]==_0x5844f4(0x111))var _0x2bd793=users[_0x5844f4(0x111)];else{if(_0x14670b[0x0][_0x5844f4(0xf1)]==_0x5844f4(0xde))var _0x2bd793=users['Spanish'];else{if(_0x14670b[0x0][_0x5844f4(0xf1)]==_0x5844f4(0xd4))var _0x2bd793=users[_0x5844f4(0xd4)];else{if(_0x14670b[0x0][_0x5844f4(0xf1)]==_0x5844f4(0xd9))var _0x2bd793=users['Portuguese'];else{if(_0x14670b[0x0]['language']==_0x5844f4(0x129))var _0x2bd793=users['Chinese'];else{if(_0x14670b[0x0][_0x5844f4(0xf1)]==_0x5844f4(0xf7))var _0x2bd793=users[_0x5844f4(0x136)];}}}}}}}_0x5c4530[_0x5844f4(0x137)](_0x5844f4(0x11e),{'success':_0x107d50[_0x5844f4(0x106)](_0x5844f4(0xdc)),'errors':_0x107d50[_0x5844f4(0x106)](_0x5844f4(0xc7)),'master_shop':_0x14670b,'profile':_0x334bde,'role':_0x312783,'language':_0x2bd793,'customer':_0x3958cf,'sales_sa':_0x128d71,'approvers':_0x594f77[0x0],'staff_arr':_0x2e1483});}catch(_0x450dd3){console[_0x5844f4(0x115)](_0x450dd3);}}),router[a0_0x41b53e(0x14a)]('/add_sales',auth,async(_0x3a4917,_0x241e1d)=>{var _0x438dc2=a0_0x41b53e;try{const {customer:_0x269fda,date:_0x17ce4f,prod_code:_0x4b0e46,note:_0x35d09c,paid_status:_0x80a135,JD:_0x5c7454,po_number:_0x4cde35,desire_date:_0x4f0650}=_0x3a4917[_0x438dc2(0xba)];if(typeof _0x4b0e46==_0x438dc2(0x123))var _0x30667c=[_0x3a4917[_0x438dc2(0xba)][_0x438dc2(0xbe)]],_0x2b1b4e=[_0x3a4917[_0x438dc2(0xba)][_0x438dc2(0xf8)]],_0x723f71=[_0x3a4917[_0x438dc2(0xba)][_0x438dc2(0x109)]],_0x488e04=[_0x3a4917[_0x438dc2(0xba)][_0x438dc2(0xec)]],_0x2bce75=[_0x3a4917[_0x438dc2(0xba)]['unit']],_0x169cca=[_0x3a4917[_0x438dc2(0xba)]['product_id']],_0x2535fd=[_0x3a4917[_0x438dc2(0xba)][_0x438dc2(0xf4)]],_0x59ea32=[_0x3a4917['body'][_0x438dc2(0x147)]],_0xee1420=[_0x3a4917['body'][_0x438dc2(0x14f)]],_0x1a6b4b=[_0x3a4917[_0x438dc2(0xba)][_0x438dc2(0xfa)]],_0x350402=[_0x3a4917[_0x438dc2(0xba)][_0x438dc2(0x118)]],_0x1d0cc5=[_0x3a4917['body'][_0x438dc2(0x10b)]],_0x300848=[_0x3a4917[_0x438dc2(0xba)][_0x438dc2(0x12c)]],_0x4b6a67=[_0x3a4917['body'][_0x438dc2(0xef)]],_0x58bb1d=[_0x3a4917['body']['secondary_unit']],_0x4ae781=[_0x3a4917[_0x438dc2(0xba)][_0x438dc2(0x12d)]];else var _0x30667c=[..._0x3a4917['body'][_0x438dc2(0xbe)]],_0x2b1b4e=[..._0x3a4917[_0x438dc2(0xba)][_0x438dc2(0xf8)]],_0x723f71=[..._0x3a4917['body'][_0x438dc2(0x109)]],_0x488e04=[..._0x3a4917['body'][_0x438dc2(0xec)]],_0x2bce75=[..._0x3a4917[_0x438dc2(0xba)][_0x438dc2(0x113)]],_0x169cca=[..._0x3a4917[_0x438dc2(0xba)]['product_id']],_0x2535fd=[..._0x3a4917[_0x438dc2(0xba)][_0x438dc2(0xf4)]],_0x59ea32=[..._0x3a4917[_0x438dc2(0xba)][_0x438dc2(0x147)]],_0xee1420=[..._0x3a4917[_0x438dc2(0xba)][_0x438dc2(0x14f)]],_0x1a6b4b=[..._0x3a4917[_0x438dc2(0xba)][_0x438dc2(0xfa)]],_0x350402=[..._0x3a4917[_0x438dc2(0xba)][_0x438dc2(0x118)]],_0x1d0cc5=[..._0x3a4917[_0x438dc2(0xba)]['no_per_unit']],_0x300848=[..._0x3a4917[_0x438dc2(0xba)][_0x438dc2(0x12c)]],_0x4b6a67=[..._0x3a4917[_0x438dc2(0xba)][_0x438dc2(0xef)]],_0x58bb1d=[..._0x3a4917[_0x438dc2(0xba)][_0x438dc2(0xcb)]],_0x4ae781=[..._0x3a4917[_0x438dc2(0xba)][_0x438dc2(0x12d)]];const _0x215f9b=_0x30667c[_0x438dc2(0xf3)](_0x3bf55c=>{return _0x3bf55c={'product_code':_0x3bf55c};});_0x2b1b4e[_0x438dc2(0x12b)]((_0x38c86c,_0xd8265d)=>{var _0xf6ad4a=_0x438dc2;_0x215f9b[_0xd8265d][_0xf6ad4a(0xf2)]=_0x38c86c;}),_0x723f71[_0x438dc2(0x12b)]((_0x2a6589,_0x4008ef)=>{var _0x2fb9fb=_0x438dc2;_0x215f9b[_0x4008ef][_0x2fb9fb(0x109)]=_0x2a6589;}),_0x488e04['forEach']((_0x4d0987,_0x48e729)=>{var _0x283ea8=_0x438dc2;_0x215f9b[_0x48e729][_0x283ea8(0xec)]=_0x4d0987;}),_0x2bce75[_0x438dc2(0x12b)]((_0xd3cb76,_0x5cf61b)=>{var _0x575957=_0x438dc2;_0x215f9b[_0x5cf61b][_0x575957(0x113)]=_0xd3cb76;}),_0x169cca[_0x438dc2(0x12b)]((_0x6c52c9,_0x2b0752)=>{var _0x17b6c1=_0x438dc2;_0x215f9b[_0x2b0752][_0x17b6c1(0x125)]=_0x6c52c9;}),_0x350402[_0x438dc2(0x12b)]((_0x1c815e,_0x2ab327)=>{_0x215f9b[_0x2ab327]['adjustment_discount']=_0x1c815e;}),_0x2535fd[_0x438dc2(0x12b)]((_0x1a4744,_0x15c39d)=>{var _0x455c89=_0x438dc2;_0x215f9b[_0x15c39d][_0x455c89(0xf4)]=_0x1a4744;}),_0x59ea32['forEach']((_0x232c06,_0x44ce81)=>{var _0x63f948=_0x438dc2;_0x215f9b[_0x44ce81][_0x63f948(0xd3)]=_0x232c06;}),_0xee1420[_0x438dc2(0x12b)]((_0x14044b,_0x236e87)=>{var _0x200d8b=_0x438dc2;_0x215f9b[_0x236e87][_0x200d8b(0x139)]=_0x14044b;}),_0x1a6b4b[_0x438dc2(0x12b)]((_0x444e6f,_0x21b9bd)=>{_0x215f9b[_0x21b9bd]['isFG']=_0x444e6f;}),_0x58bb1d[_0x438dc2(0x12b)]((_0x4a47a5,_0xf42d83)=>{var _0x50dd67=_0x438dc2;_0x215f9b[_0xf42d83][_0x50dd67(0xcb)]=_0x4a47a5;}),_0x300848[_0x438dc2(0x12b)]((_0x3693f7,_0x5f336e)=>{_0x215f9b[_0x5f336e]['real_qty_unit_val']=_0x3693f7;}),_0x4b6a67[_0x438dc2(0x12b)]((_0x53428a,_0x3b09c9)=>{var _0x396783=_0x438dc2;_0x215f9b[_0x3b09c9][_0x396783(0xef)]=_0x53428a;}),_0x4ae781[_0x438dc2(0x12b)]((_0x5d34ce,_0xe45cc5)=>{_0x215f9b[_0xe45cc5]['conversion_data']=_0x5d34ce;}),_0x1d0cc5[_0x438dc2(0x12b)]((_0x50fbe0,_0x1e9300)=>{var _0x1f0ba1=_0x438dc2;_0x215f9b[_0x1e9300][_0x1f0ba1(0x10b)]=_0x50fbe0;});const _0x349add=await approver_acct[_0x438dc2(0xcc)]([{'$unwind':_0x438dc2(0xc5)},{'$match':{'member.id_member':_0x3a4917[_0x438dc2(0x13f)][_0x438dc2(0x145)]}},{'$group':{'_id':{'id_member':_0x438dc2(0x148),'name':'$member.name'},'head_id_staff':{'$first':_0x438dc2(0x120)}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x438dc2(0x120)}}},{'$lookup':{'from':_0x438dc2(0xfb),'localField':_0x438dc2(0xdd),'foreignField':_0x438dc2(0x108),'as':_0x438dc2(0x121)}},{'$unwind':_0x438dc2(0x130)}]),_0x7e3500=new invoice_for_sales_order();await _0x7e3500['save']();const _0x469269=_0x3a4917['user'],_0x31c740=await staff[_0x438dc2(0xcd)]({'email':_0x469269[_0x438dc2(0x107)]}),_0x592c1b=new sales_order({'invoice':_0x7e3500['invoice_init']['toString']()[_0x438dc2(0xdb)](0x8,'0'),'customer':_0x269fda,'date':_0x17ce4f,'sale_product':_0x215f9b,'note':_0x35d09c,'sales_staff_id':_0x31c740[_0x438dc2(0x108)][_0x438dc2(0x14d)](),'JD':_0x5c7454,'accounting_account_id':_0x349add[0x0][_0x438dc2(0xda)],'po_number':_0x4cde35,'desired_delivery':_0x4f0650,'wms_account_confirm':_0x438dc2(0x126),'accounting_account_confirm':'true'}),_0x57d3a1=await _0x592c1b[_0x438dc2(0xbd)]();var _0x5ada6e=_0x57d3a1[_0x438dc2(0x135)],_0x5d03eb='',_0x1734aa,_0x418ad9=0x0;for(_0x1734aa in _0x5ada6e){_0x5d03eb+='<tr>'+_0x438dc2(0xc0)+_0x5ada6e[_0x1734aa][_0x438dc2(0xf2)]+_0x438dc2(0x13a)+_0x438dc2(0xc0)+_0x5ada6e[_0x1734aa][_0x438dc2(0xb9)]+'</td>'+_0x438dc2(0xc0)+_0x5ada6e[_0x1734aa][_0x438dc2(0xec)]+_0x438dc2(0x13a)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5ada6e[_0x1734aa]['unit']+_0x438dc2(0x13a)+'</tr>',_0x418ad9+=parseInt(_0x5ada6e[_0x1734aa][_0x438dc2(0xec)]);}const _0x3077f7=await master_shop[_0x438dc2(0x142)](),_0x520a01=await email_settings[_0x438dc2(0xcd)]();let _0x37c7f0=nodemailer[_0x438dc2(0xeb)]({'port':Number(_0x520a01['port']),'secure':![],'auth':{'user':_0x520a01[_0x438dc2(0x107)],'pass':_0x520a01[_0x438dc2(0x119)]}});const _0x174815=_0x3a4917[_0x438dc2(0x146)]+_0x438dc2(0xca)+_0x3a4917[_0x438dc2(0x12f)][_0x438dc2(0x127)];let _0x26dc3b={'from':_0x520a01[_0x438dc2(0x107)],'to':_0x349add[0x0]['head_staff_info'][_0x438dc2(0x107)]+_0x438dc2(0x110),'subject':_0x438dc2(0x105)+_0x57d3a1[_0x438dc2(0x133)],'attachments':[{'filename':'Logo.png','path':__dirname+_0x438dc2(0xd6)+_0x438dc2(0xd5)+_0x3077f7[0x0]['image'],'cid':_0x438dc2(0x10d)}],'html':_0x438dc2(0x11d)+_0x438dc2(0xb8)+'<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>'+_0x438dc2(0xee)+_0x438dc2(0xc1)+_0x438dc2(0xce)+_0x438dc2(0xc1)+_0x438dc2(0x12e)+_0x438dc2(0xbb)+_0x438dc2(0xc1)+_0x438dc2(0x132)+_0x438dc2(0xbb)+_0x438dc2(0xbb)+_0x438dc2(0x143)+_0x438dc2(0xc1)+_0x438dc2(0x10f)+_0x349add[0x0][_0x438dc2(0x121)][_0x438dc2(0x13c)]+_0x438dc2(0xbc)+_0x438dc2(0xbb)+'<div>'+_0x438dc2(0x116)+_0x438dc2(0xbb)+_0x438dc2(0xc1)+_0x438dc2(0xb6)+_0x57d3a1['invoice']+_0x438dc2(0xf6)+_0x438dc2(0xfd)+_0x31c740[_0x438dc2(0x13c)]+'</b></span>\x20<br>'+_0x438dc2(0x103)+_0x57d3a1[_0x438dc2(0x11c)]+_0x438dc2(0x12a)+_0x438dc2(0xbb)+_0x438dc2(0xe2)+_0x438dc2(0x138)+'<tr>'+_0x438dc2(0x122)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x438dc2(0xc6)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x438dc2(0xe6)+'</thead>'+_0x438dc2(0x131)+'\x20'+_0x5d03eb+'\x20'+_0x438dc2(0xe4)+_0x438dc2(0x10a)+_0x438dc2(0xc1)+'<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>'+_0x418ad9+_0x438dc2(0x149)+_0x438dc2(0x10c)+_0x438dc2(0xe8)+_0x438dc2(0x14c)+_0x438dc2(0xbb)+'<div\x20style=\x22text-align:\x20center;\x22>'+_0x438dc2(0xd7)+_0x174815+_0x438dc2(0xff)+_0x57d3a1['_id']+_0x438dc2(0xea)+_0x438dc2(0xc3)+_0x438dc2(0xbb)+_0x438dc2(0xc1)+_0x438dc2(0xc8)+'<h5>\x20JEC\x20SMS\x20</h5>'+_0x438dc2(0xbb)+_0x438dc2(0xbb)+'<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>'+_0x438dc2(0x11a)};_0x37c7f0[_0x438dc2(0x13b)](_0x26dc3b,function(_0x228d7c,_0x56b720){var _0x1f780f=_0x438dc2;_0x228d7c?(console['log'](_0x228d7c),console[_0x1f780f(0x115)](_0x1f780f(0xd0))):console[_0x1f780f(0x115)]('Email\x20sent\x20successfully');}),_0x3a4917[_0x438dc2(0x106)](_0x438dc2(0xdc),_0x438dc2(0xe1)),_0x241e1d['redirect'](_0x438dc2(0xe5)+_0x57d3a1[_0x438dc2(0x108)]);}catch(_0x4a4885){}}),router[a0_0x41b53e(0x14a)]('/product_list',auth,async(_0x50d246,_0x2a7333)=>{var _0x49a3ca=a0_0x41b53e;try{const _0x19fa4a=_0x50d246['user'],_0x1b59de=await profile[_0x49a3ca(0xcd)]({'email':_0x19fa4a['email']}),_0x7b967a=await product[_0x49a3ca(0x142)]({'sales_category':_0x19fa4a[_0x49a3ca(0x128)]});_0x2a7333[_0x49a3ca(0x13e)](_0x7b967a);}catch(_0x18bee5){}}),router[a0_0x41b53e(0x14a)](a0_0x41b53e(0x101),auth,async(_0xef6912,_0x21a043)=>{var _0x3e3563=a0_0x41b53e;try{const _0x2a4516=_0xef6912[_0x3e3563(0x13f)],{id_data:_0x3d3235}=_0xef6912[_0x3e3563(0xba)],_0x269fbe=await profile['findOne']({'email':_0x2a4516[_0x3e3563(0x107)]}),_0x3c541a=mongoose[_0x3e3563(0xf5)]['ObjectId'];var _0x313f6e=_0x3c541a(_0x3d3235);const _0x1f6102=await product[_0x3e3563(0x142)]({'_id':_0x313f6e});_0x21a043['json'](_0x1f6102);}catch(_0x2856bf){}}),module[a0_0x41b53e(0xf9)]=router;