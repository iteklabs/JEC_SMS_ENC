function a0_0x25b8(_0x58b634,_0x139bc5){var _0x3764b0=a0_0x3764();return a0_0x25b8=function(_0x25b80c,_0x3db3c2){_0x25b80c=_0x25b80c-0xf0;var _0xf6f12f=_0x3764b0[_0x25b80c];return _0xf6f12f;},a0_0x25b8(_0x58b634,_0x139bc5);}var a0_0x358bf6=a0_0x25b8;(function(_0x3f191b,_0x2a6eee){var _0x38992d=a0_0x25b8,_0x299cc6=_0x3f191b();while(!![]){try{var _0x12f6bf=parseInt(_0x38992d(0x15b))/0x1+parseInt(_0x38992d(0x12f))/0x2+parseInt(_0x38992d(0x147))/0x3+parseInt(_0x38992d(0x163))/0x4*(-parseInt(_0x38992d(0x18d))/0x5)+-parseInt(_0x38992d(0x15c))/0x6*(parseInt(_0x38992d(0x11b))/0x7)+-parseInt(_0x38992d(0x133))/0x8*(-parseInt(_0x38992d(0x158))/0x9)+-parseInt(_0x38992d(0x10f))/0xa;if(_0x12f6bf===_0x2a6eee)break;else _0x299cc6['push'](_0x299cc6['shift']());}catch(_0x2cecd8){_0x299cc6['push'](_0x299cc6['shift']());}}}(a0_0x3764,0x5f5a3));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x358bf6(0x10a)),auth=require(a0_0x358bf6(0x13a)),users=require('../public/language/languages.json'),excelJS=require(a0_0x358bf6(0x172)),xlsx=require('xlsx'),mongoose=require(a0_0x358bf6(0x136)),{ObjectId}=require('mongodb'),nodemailer=require(a0_0x358bf6(0xf4));function a0_0x3764(){var _0x114178=['$wms_account_id','findOne','2133306DkEErI','\x22>Change\x20Status</a>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','render','isFG','$sale_product.quantity','accounting_account_id','flash','$member.id_member','<div>','unit','product_name','image','discount','</body></html>','English','post','/add_sales','forEach','prod_name','710342PJwuvQ','$JD','dicount_price','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','856DHaqFZ','findById','Arabic','mongoose','createTransport','$customer','Arabic\x20(ae)','../middleware/auth','$wms_account_confirm','ObjectId','$date','price','valueOf','errors',';christian.villamer@jakagroup.com','$head_staff_info','tmpisFG','user','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','params','1403262iXlxXC','prod_code','email','invoice','sendMail','<span>\x20Request\x20Date:\x20<b>','Email\x20sent\x20successfully','$wms_data','head_staff_info','<h2>\x20JEC\x20SMS\x20</h2>','</b>,\x20</span><br>','<hr\x20class=\x22my-3\x22>','Portuguese','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','true','German','getPrimUnitNo','56961wCsQpA','</td>','</div>','132137oiYHnA','6JOcXae','exports','name','host','prod_cat','<table\x20style=\x22width:\x20100%\x20!important;\x22>','invoice_init','1082572wzLGMk','redirect','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','English\x20(US)','account_data','/upload/','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','sales_category','French','$sale_product','Hindi','Error\x20Occurs','_id','Portuguese\x20(BR)','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','exceljs','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','</b></span>\x20<br><br>','<tr>','conversion_unit','$account_data','conversion_data','</tbody>','://','no_per_unit','view_sales_order','string','success','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','port','</b></span>\x20<br>','dicount_price_adjust','save','add_sales_order','/product_list','</table>','real_qty_unit_val','<tbody\x20style=\x22text-align:\x20center;\x22>','/product_data','Approval\x20for\x20','/view_sales/:id','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','10XzjsCt','/sales_order/view_sales/','<strong>\x20Regards\x20</strong>','adjustment_discount','$accounting_account_id','<h5>\x20JEC\x20SMS\x20</h5>','wms_account_id','</head><body>','nodemailer','staffs','language','<!DOCTYPE\x20html>','</tr>','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','$member.name','log','product_code','Spanish','Logo.png','Chinese','<span>\x20Request\x20ID:\x20<b>','date','padStart','<div\x20style=\x22text-align:\x20center;\x22>','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','find','$invoice','Types','totalprice','../models/all_models','aggregate','product_id','/accounting_approval/','head_id_staff','3956580IzBeNM','<span>\x20Requested\x20By:\x20<b>','protocol','get','primary_code','secondary_unit','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','quantity','body','sttaff_id'];a0_0x3764=function(){return _0x114178;};return a0_0x3764();}router[a0_0x358bf6(0x112)]('/',auth,async(_0x5c68ae,_0xb657d2)=>{var _0x473e4c=a0_0x358bf6;try{const _0xdb53bd=await master_shop['find'](),_0x3559af=_0x5c68ae[_0x473e4c(0x144)],_0x238eef=await profile[_0x473e4c(0x11a)]({'email':_0x3559af[_0x473e4c(0x149)]}),_0x20788f=await staff[_0x473e4c(0x11a)]({'email':_0x3559af[_0x473e4c(0x149)]}),_0x5bc0a1=await sales_order[_0x473e4c(0x10b)]([{'$match':{'sales_staff_id':_0x20788f['_id']['valueOf']()}},{'$unwind':_0x473e4c(0x16c)},{'$group':{'_id':'$_id','invoice':{'$first':_0x473e4c(0x107)},'customer':{'$first':_0x473e4c(0x138)},'date':{'$first':_0x473e4c(0x13d)},'JD':{'$first':_0x473e4c(0x130)},'accounting_account_confirm':{'$first':'$accounting_account_confirm'},'wms_account_confirm':{'$first':_0x473e4c(0x13b)},'totalQTY':{'$sum':_0x473e4c(0x120)}}}]);if(_0xdb53bd[0x0][_0x473e4c(0xf6)]==_0x473e4c(0x166))var _0x5e3a35=users[_0x473e4c(0x12a)];else{if(_0xdb53bd[0x0][_0x473e4c(0xf6)]==_0x473e4c(0x16d))var _0x5e3a35=users[_0x473e4c(0x16d)];else{if(_0xdb53bd[0x0]['language']==_0x473e4c(0x156))var _0x5e3a35=users[_0x473e4c(0x156)];else{if(_0xdb53bd[0x0][_0x473e4c(0xf6)]==_0x473e4c(0xfd))var _0x5e3a35=users['Spanish'];else{if(_0xdb53bd[0x0][_0x473e4c(0xf6)]==_0x473e4c(0x16b))var _0x5e3a35=users[_0x473e4c(0x16b)];else{if(_0xdb53bd[0x0]['language']==_0x473e4c(0x170))var _0x5e3a35=users[_0x473e4c(0x153)];else{if(_0xdb53bd[0x0][_0x473e4c(0xf6)]=='Chinese')var _0x5e3a35=users[_0x473e4c(0xff)];else{if(_0xdb53bd[0x0][_0x473e4c(0xf6)]==_0x473e4c(0x139))var _0x5e3a35=users[_0x473e4c(0x135)];}}}}}}}_0xb657d2[_0x473e4c(0x11e)]('all_sales_order',{'success':_0x5c68ae['flash']('success'),'errors':_0x5c68ae[_0x473e4c(0x122)](_0x473e4c(0x140)),'master_shop':_0xdb53bd,'profile':_0x238eef,'role':_0x3559af,'language':_0x5e3a35,'product_list':_0x20788f['product_list'],'sales_mine':_0x5bc0a1,'staff_arr':_0x20788f});}catch(_0x255bf8){console['log'](_0x255bf8);}}),router['get'](a0_0x358bf6(0x12c),auth,async(_0x55e2e6,_0x23b044)=>{var _0x11c92a=a0_0x358bf6;try{const _0x5ced03=await master_shop[_0x11c92a(0x106)](),_0x15bd2b=_0x55e2e6[_0x11c92a(0x144)],_0x546f29=await profile[_0x11c92a(0x11a)]({'email':_0x15bd2b['email']}),_0x508b8f=await staff['findOne']({'email':_0x15bd2b[_0x11c92a(0x149)]}),_0x5b899f=await customer[_0x11c92a(0x106)]({'agent_id':_0x508b8f[_0x11c92a(0x16f)]});if(_0x5ced03[0x0]['language']=='English\x20(US)')var _0x2e56f9=users[_0x11c92a(0x12a)];else{if(_0x5ced03[0x0][_0x11c92a(0xf6)]==_0x11c92a(0x16d))var _0x2e56f9=users[_0x11c92a(0x16d)];else{if(_0x5ced03[0x0][_0x11c92a(0xf6)]==_0x11c92a(0x156))var _0x2e56f9=users[_0x11c92a(0x156)];else{if(_0x5ced03[0x0][_0x11c92a(0xf6)]==_0x11c92a(0xfd))var _0x2e56f9=users[_0x11c92a(0xfd)];else{if(_0x5ced03[0x0][_0x11c92a(0xf6)]=='French')var _0x2e56f9=users[_0x11c92a(0x16b)];else{if(_0x5ced03[0x0][_0x11c92a(0xf6)]=='Portuguese\x20(BR)')var _0x2e56f9=users['Portuguese'];else{if(_0x5ced03[0x0][_0x11c92a(0xf6)]==_0x11c92a(0xff))var _0x2e56f9=users[_0x11c92a(0xff)];else{if(_0x5ced03[0x0][_0x11c92a(0xf6)]==_0x11c92a(0x139))var _0x2e56f9=users[_0x11c92a(0x135)];}}}}}}}_0x23b044['render'](_0x11c92a(0x184),{'success':_0x55e2e6['flash'](_0x11c92a(0x17e)),'errors':_0x55e2e6[_0x11c92a(0x122)](_0x11c92a(0x140)),'master_shop':_0x5ced03,'profile':_0x546f29,'role':_0x15bd2b,'language':_0x2e56f9,'customer':_0x5b899f,'staff_arr':_0x508b8f});}catch(_0x4b4098){console[_0x11c92a(0xfb)](_0x4b4098);}}),router[a0_0x358bf6(0x112)](a0_0x358bf6(0x18b),auth,async(_0x515290,_0x2a3eb7)=>{var _0x123b9b=a0_0x358bf6;try{const _0x136889=await master_shop['find'](),_0x908d84=_0x515290[_0x123b9b(0x144)],_0x103811=await profile[_0x123b9b(0x11a)]({'email':_0x908d84[_0x123b9b(0x149)]}),_0x5aaace=await staff[_0x123b9b(0x11a)]({'email':_0x908d84[_0x123b9b(0x149)]}),_0x1c021b=await customer[_0x123b9b(0x106)]({'agent_id':_0x5aaace[_0x123b9b(0x16f)]}),_0x316639=mongoose[_0x123b9b(0x108)][_0x123b9b(0x13c)],_0x5145fb=_0x515290[_0x123b9b(0x146)]['id'],_0x2378a1=await sales_order[_0x123b9b(0x134)](_0x5145fb),_0x132dd3=await sales_order[_0x123b9b(0x10b)]([{'$match':{'_id':_0x316639(_0x5145fb)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x123b9b(0xf0)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x123b9b(0x119)}}},{'$lookup':{'from':_0x123b9b(0xf5),'localField':_0x123b9b(0x121),'foreignField':_0x123b9b(0x16f),'as':_0x123b9b(0x167)}},{'$unwind':_0x123b9b(0x177)},{'$lookup':{'from':_0x123b9b(0xf5),'localField':_0x123b9b(0xf2),'foreignField':_0x123b9b(0x16f),'as':'wms_data'}},{'$unwind':{'path':_0x123b9b(0x14e),'preserveNullAndEmptyArrays':!![]}}]);if(_0x136889[0x0][_0x123b9b(0xf6)]=='English\x20(US)')var _0x18dc7d=users[_0x123b9b(0x12a)];else{if(_0x136889[0x0]['language']=='Hindi')var _0x18dc7d=users['Hindi'];else{if(_0x136889[0x0][_0x123b9b(0xf6)]==_0x123b9b(0x156))var _0x18dc7d=users[_0x123b9b(0x156)];else{if(_0x136889[0x0][_0x123b9b(0xf6)]==_0x123b9b(0xfd))var _0x18dc7d=users[_0x123b9b(0xfd)];else{if(_0x136889[0x0]['language']=='French')var _0x18dc7d=users[_0x123b9b(0x16b)];else{if(_0x136889[0x0]['language']==_0x123b9b(0x170))var _0x18dc7d=users[_0x123b9b(0x153)];else{if(_0x136889[0x0][_0x123b9b(0xf6)]==_0x123b9b(0xff))var _0x18dc7d=users[_0x123b9b(0xff)];else{if(_0x136889[0x0][_0x123b9b(0xf6)]=='Arabic\x20(ae)')var _0x18dc7d=users['Arabic'];}}}}}}}_0x2a3eb7[_0x123b9b(0x11e)](_0x123b9b(0x17c),{'success':_0x515290['flash'](_0x123b9b(0x17e)),'errors':_0x515290['flash'](_0x123b9b(0x140)),'master_shop':_0x136889,'profile':_0x103811,'role':_0x908d84,'language':_0x18dc7d,'customer':_0x1c021b,'sales_sa':_0x2378a1,'approvers':_0x132dd3[0x0],'staff_arr':_0x5aaace});}catch(_0x28a6a8){console[_0x123b9b(0xfb)](_0x28a6a8);}}),router['post'](a0_0x358bf6(0x12c),auth,async(_0x451c99,_0x3fb902)=>{var _0x47de8a=a0_0x358bf6;try{const {customer:_0x573623,date:_0x5c57a4,prod_code:_0x30a173,note:_0x67170c,paid_status:_0x5f2189,JD:_0x3de55a,po_number:_0x483e4e,desire_date:_0x54c4de}=_0x451c99[_0x47de8a(0x117)];if(typeof _0x30a173==_0x47de8a(0x17d))var _0x471bf0=[_0x451c99['body'][_0x47de8a(0x148)]],_0x55a6d6=[_0x451c99[_0x47de8a(0x117)][_0x47de8a(0x12e)]],_0x26f1d0=[_0x451c99['body']['primary_code']],_0x203178=[_0x451c99['body'][_0x47de8a(0x116)]],_0x132c66=[_0x451c99[_0x47de8a(0x117)][_0x47de8a(0x125)]],_0x3f5762=[_0x451c99[_0x47de8a(0x117)][_0x47de8a(0x10c)]],_0x3f8e84=[_0x451c99[_0x47de8a(0x117)][_0x47de8a(0x13e)]],_0xd41bd5=[_0x451c99[_0x47de8a(0x117)]['totalPrice']],_0x4ff53f=[_0x451c99[_0x47de8a(0x117)][_0x47de8a(0x131)]],_0x5b0666=[_0x451c99[_0x47de8a(0x117)][_0x47de8a(0x143)]],_0x117760=[_0x451c99['body']['dicount_price_adjust']],_0x343e3d=[_0x451c99[_0x47de8a(0x117)][_0x47de8a(0x17b)]],_0xbeed89=[_0x451c99[_0x47de8a(0x117)][_0x47de8a(0x157)]],_0x1ccb8f=[_0x451c99[_0x47de8a(0x117)]['prod_cat']],_0x4989e8=[_0x451c99[_0x47de8a(0x117)][_0x47de8a(0x114)]],_0x5d5fa2=[_0x451c99['body'][_0x47de8a(0x176)]];else var _0x471bf0=[..._0x451c99[_0x47de8a(0x117)]['prod_code']],_0x55a6d6=[..._0x451c99[_0x47de8a(0x117)][_0x47de8a(0x12e)]],_0x26f1d0=[..._0x451c99[_0x47de8a(0x117)][_0x47de8a(0x113)]],_0x203178=[..._0x451c99['body'][_0x47de8a(0x116)]],_0x132c66=[..._0x451c99[_0x47de8a(0x117)][_0x47de8a(0x125)]],_0x3f5762=[..._0x451c99['body'][_0x47de8a(0x10c)]],_0x3f8e84=[..._0x451c99[_0x47de8a(0x117)][_0x47de8a(0x13e)]],_0xd41bd5=[..._0x451c99['body']['totalPrice']],_0x4ff53f=[..._0x451c99[_0x47de8a(0x117)][_0x47de8a(0x131)]],_0x5b0666=[..._0x451c99[_0x47de8a(0x117)][_0x47de8a(0x143)]],_0x117760=[..._0x451c99[_0x47de8a(0x117)][_0x47de8a(0x182)]],_0x343e3d=[..._0x451c99[_0x47de8a(0x117)][_0x47de8a(0x17b)]],_0xbeed89=[..._0x451c99[_0x47de8a(0x117)][_0x47de8a(0x157)]],_0x1ccb8f=[..._0x451c99[_0x47de8a(0x117)][_0x47de8a(0x160)]],_0x4989e8=[..._0x451c99[_0x47de8a(0x117)][_0x47de8a(0x114)]],_0x5d5fa2=[..._0x451c99[_0x47de8a(0x117)]['conversion_unit']];const _0x514535=_0x471bf0['map'](_0x50e130=>{return _0x50e130={'product_code':_0x50e130};});_0x55a6d6[_0x47de8a(0x12d)]((_0x1dd057,_0x514e46)=>{var _0x47e648=_0x47de8a;_0x514535[_0x514e46][_0x47e648(0x126)]=_0x1dd057;}),_0x26f1d0['forEach']((_0x5a8c19,_0x1a7182)=>{var _0x3d515e=_0x47de8a;_0x514535[_0x1a7182][_0x3d515e(0x113)]=_0x5a8c19;}),_0x203178[_0x47de8a(0x12d)]((_0x9d81e9,_0x185bb3)=>{var _0x540f51=_0x47de8a;_0x514535[_0x185bb3][_0x540f51(0x116)]=_0x9d81e9;}),_0x132c66[_0x47de8a(0x12d)]((_0x355318,_0x175e39)=>{var _0x4b5b11=_0x47de8a;_0x514535[_0x175e39][_0x4b5b11(0x125)]=_0x355318;}),_0x3f5762[_0x47de8a(0x12d)]((_0x11938e,_0x29cb79)=>{_0x514535[_0x29cb79]['product_id']=_0x11938e;}),_0x117760[_0x47de8a(0x12d)]((_0x15e370,_0x1cc660)=>{var _0xf3e7c7=_0x47de8a;_0x514535[_0x1cc660][_0xf3e7c7(0x190)]=_0x15e370;}),_0x3f8e84[_0x47de8a(0x12d)]((_0x5ac346,_0xed0d1d)=>{var _0x42a9e0=_0x47de8a;_0x514535[_0xed0d1d][_0x42a9e0(0x13e)]=_0x5ac346;}),_0xd41bd5['forEach']((_0x1d1f9b,_0x332166)=>{var _0x512461=_0x47de8a;_0x514535[_0x332166][_0x512461(0x109)]=_0x1d1f9b;}),_0x4ff53f[_0x47de8a(0x12d)]((_0x111f0f,_0x1dbe4a)=>{var _0x5e3633=_0x47de8a;_0x514535[_0x1dbe4a][_0x5e3633(0x128)]=_0x111f0f;}),_0x5b0666[_0x47de8a(0x12d)]((_0x183458,_0x749ed9)=>{var _0x34414c=_0x47de8a;_0x514535[_0x749ed9][_0x34414c(0x11f)]=_0x183458;}),_0x4989e8['forEach']((_0x1b3415,_0x15f8ec)=>{var _0x2dd82a=_0x47de8a;_0x514535[_0x15f8ec][_0x2dd82a(0x114)]=_0x1b3415;}),_0xbeed89[_0x47de8a(0x12d)]((_0x5725d2,_0x30da22)=>{var _0x6c5f4d=_0x47de8a;_0x514535[_0x30da22][_0x6c5f4d(0x187)]=_0x5725d2;}),_0x1ccb8f[_0x47de8a(0x12d)]((_0x323d2c,_0x1a4ebe)=>{var _0x504888=_0x47de8a;_0x514535[_0x1a4ebe][_0x504888(0x160)]=_0x323d2c;}),_0x5d5fa2[_0x47de8a(0x12d)]((_0x5b61e6,_0x1acae2)=>{var _0x2ca4b3=_0x47de8a;_0x514535[_0x1acae2][_0x2ca4b3(0x178)]=_0x5b61e6;}),_0x343e3d[_0x47de8a(0x12d)]((_0x414312,_0x30ed65)=>{_0x514535[_0x30ed65]['no_per_unit']=_0x414312;});const _0x2cacef=await approver_acct[_0x47de8a(0x10b)]([{'$unwind':'$member'},{'$match':{'member.id_member':_0x451c99[_0x47de8a(0x144)][_0x47de8a(0x118)]}},{'$group':{'_id':{'id_member':_0x47de8a(0x123),'name':_0x47de8a(0xfa)},'head_id_staff':{'$first':'$head_id_staff'}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':'$head_id_staff'}}},{'$lookup':{'from':_0x47de8a(0xf5),'localField':'head_id_staff_id','foreignField':_0x47de8a(0x16f),'as':_0x47de8a(0x14f)}},{'$unwind':_0x47de8a(0x142)}]),_0x2f767d=new invoice_for_sales_order();await _0x2f767d['save']();const _0x49ed95=_0x451c99['user'],_0x566d7b=await staff['findOne']({'email':_0x49ed95[_0x47de8a(0x149)]}),_0x4554dd=new sales_order({'invoice':_0x2f767d[_0x47de8a(0x162)]['toString']()[_0x47de8a(0x102)](0x8,'0'),'customer':_0x573623,'date':_0x5c57a4,'sale_product':_0x514535,'note':_0x67170c,'sales_staff_id':_0x566d7b[_0x47de8a(0x16f)][_0x47de8a(0x13f)](),'JD':_0x3de55a,'accounting_account_id':_0x2cacef[0x0][_0x47de8a(0x10e)],'po_number':_0x483e4e,'desired_delivery':_0x54c4de,'wms_account_confirm':_0x47de8a(0x155),'accounting_account_confirm':_0x47de8a(0x155)}),_0x2697af=await _0x4554dd[_0x47de8a(0x183)]();var _0x116502=_0x2697af['sale_product'],_0x14e988='',_0x4eb287,_0x1a43b7=0x0;for(_0x4eb287 in _0x116502){_0x14e988+=_0x47de8a(0x175)+_0x47de8a(0x173)+_0x116502[_0x4eb287][_0x47de8a(0x126)]+'</td>'+_0x47de8a(0x173)+_0x116502[_0x4eb287][_0x47de8a(0xfc)]+_0x47de8a(0x159)+_0x47de8a(0x173)+_0x116502[_0x4eb287][_0x47de8a(0x116)]+_0x47de8a(0x159)+_0x47de8a(0x173)+_0x116502[_0x4eb287]['unit']+_0x47de8a(0x159)+'</tr>',_0x1a43b7+=parseInt(_0x116502[_0x4eb287][_0x47de8a(0x116)]);}const _0x3783e6=await master_shop[_0x47de8a(0x106)](),_0x1d2d28=await email_settings[_0x47de8a(0x11a)]();let _0x5b5fd1=nodemailer[_0x47de8a(0x137)]({'port':Number(_0x1d2d28[_0x47de8a(0x180)]),'secure':![],'auth':{'user':_0x1d2d28['email'],'pass':_0x1d2d28['password']}});const _0x1df444=_0x451c99[_0x47de8a(0x111)]+_0x47de8a(0x17a)+_0x451c99['headers'][_0x47de8a(0x15f)];let _0x16ba1d={'from':_0x1d2d28['email'],'to':_0x2cacef[0x0][_0x47de8a(0x14f)][_0x47de8a(0x149)]+_0x47de8a(0x141),'subject':_0x47de8a(0x18a)+_0x2697af[_0x47de8a(0x14a)],'attachments':[{'filename':_0x47de8a(0xfe),'path':__dirname+'/../public'+_0x47de8a(0x168)+_0x3783e6[0x0][_0x47de8a(0x127)],'cid':'logo'}],'html':_0x47de8a(0xf7)+'<html><head><title></title>'+_0x47de8a(0x132)+_0x47de8a(0xf3)+'<div>'+_0x47de8a(0x11d)+_0x47de8a(0x124)+_0x47de8a(0x165)+_0x47de8a(0x15a)+'<div>'+_0x47de8a(0x150)+'</div>'+'</div>'+_0x47de8a(0x152)+_0x47de8a(0x124)+'<span>\x20Dear\x20<b>'+_0x2cacef[0x0][_0x47de8a(0x14f)][_0x47de8a(0x15e)]+_0x47de8a(0x151)+_0x47de8a(0x15a)+_0x47de8a(0x124)+_0x47de8a(0x104)+_0x47de8a(0x15a)+'<div>'+_0x47de8a(0x100)+_0x2697af['invoice']+_0x47de8a(0x181)+_0x47de8a(0x110)+_0x566d7b[_0x47de8a(0x15e)]+'</b></span>\x20<br>'+_0x47de8a(0x14c)+_0x2697af[_0x47de8a(0x101)]+_0x47de8a(0x174)+_0x47de8a(0x15a)+_0x47de8a(0x161)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x47de8a(0x175)+_0x47de8a(0x145)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x47de8a(0x171)+_0x47de8a(0x17f)+_0x47de8a(0xf8)+'</thead>'+_0x47de8a(0x188)+'\x20'+_0x14e988+'\x20'+_0x47de8a(0x179)+_0x47de8a(0x186)+'<div>'+_0x47de8a(0x154)+_0x1a43b7+_0x47de8a(0x169)+_0x47de8a(0x18c)+_0x47de8a(0xf9)+'<br><br><br>'+_0x47de8a(0x15a)+_0x47de8a(0x103)+_0x47de8a(0x105)+_0x1df444+_0x47de8a(0x10d)+_0x2697af[_0x47de8a(0x16f)]+_0x47de8a(0x11c)+'<br><br>'+'</div>'+_0x47de8a(0x124)+_0x47de8a(0x18f)+_0x47de8a(0xf1)+_0x47de8a(0x15a)+_0x47de8a(0x15a)+_0x47de8a(0x115)+_0x47de8a(0x129)};_0x5b5fd1[_0x47de8a(0x14b)](_0x16ba1d,function(_0x36e4a8,_0x549ddc){var _0x196d82=_0x47de8a;_0x36e4a8?(console[_0x196d82(0xfb)](_0x36e4a8),console['log'](_0x196d82(0x16e))):console[_0x196d82(0xfb)](_0x196d82(0x14d));}),_0x451c99[_0x47de8a(0x122)](_0x47de8a(0x17e),'Sales\x20Order\x20is\x20ongoing'),_0x3fb902[_0x47de8a(0x164)](_0x47de8a(0x18e)+_0x2697af[_0x47de8a(0x16f)]);}catch(_0x50a595){}}),router[a0_0x358bf6(0x12b)](a0_0x358bf6(0x185),auth,async(_0x49b185,_0x336e1d)=>{var _0x38aae2=a0_0x358bf6;try{const _0x51a37b=_0x49b185['user'],_0xef6a3d=await profile['findOne']({'email':_0x51a37b[_0x38aae2(0x149)]}),_0x2dbbec=await product[_0x38aae2(0x106)]({'sales_category':_0x51a37b[_0x38aae2(0x16a)]});_0x336e1d['json'](_0x2dbbec);}catch(_0x43958a){}}),router['post'](a0_0x358bf6(0x189),auth,async(_0x299a7e,_0x257594)=>{var _0x207480=a0_0x358bf6;try{const _0x16821b=_0x299a7e[_0x207480(0x144)],{id_data:_0x1d621a}=_0x299a7e[_0x207480(0x117)],_0x5238c3=await profile[_0x207480(0x11a)]({'email':_0x16821b['email']}),_0x2d4ed2=mongoose[_0x207480(0x108)]['ObjectId'];var _0x25bd51=_0x2d4ed2(_0x1d621a);const _0x4ca018=await product[_0x207480(0x106)]({'_id':_0x25bd51});_0x257594['json'](_0x4ca018);}catch(_0x3b808a){}}),module[a0_0x358bf6(0x15d)]=router;