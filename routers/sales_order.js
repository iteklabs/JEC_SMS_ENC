var a0_0x2d294e=a0_0x3b33;(function(_0x3ce9f1,_0xc4ee8e){var _0x15660c=a0_0x3b33,_0x360e3b=_0x3ce9f1();while(!![]){try{var _0xfa8025=-parseInt(_0x15660c(0x157))/0x1*(parseInt(_0x15660c(0x11e))/0x2)+parseInt(_0x15660c(0xc7))/0x3*(parseInt(_0x15660c(0xe7))/0x4)+parseInt(_0x15660c(0x10e))/0x5+parseInt(_0x15660c(0xcf))/0x6*(parseInt(_0x15660c(0x10b))/0x7)+parseInt(_0x15660c(0xe1))/0x8*(parseInt(_0x15660c(0x105))/0x9)+parseInt(_0x15660c(0x10c))/0xa+-parseInt(_0x15660c(0x103))/0xb;if(_0xfa8025===_0xc4ee8e)break;else _0x360e3b['push'](_0x360e3b['shift']());}catch(_0xcddf9e){_0x360e3b['push'](_0x360e3b['shift']());}}}(a0_0x482f,0xda7c5));function a0_0x482f(){var _0x219114=['find','unit','Portuguese\x20(BR)','<html><head><title></title>','Types','<strong>\x20Regards\x20</strong>','render','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','<div>','discount','dicount_price','41914785ztpxNJ','Chinese','9JVDYOt','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','<br><br>','Arabic','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','$wms_account_confirm','497lnxYOi','9626710rDOMxw','image','6844240VWgobA','://','English','flash','name','accounting_account_id','French','head_id_staff','$head_staff_info','true','ObjectId','</tr>','exceljs','product_id','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','mongoose','410596cZmHEd','../middleware/auth','invoice_init','findOne','totalPrice',';christian.villamer@jakagroup.com','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','isFG','../models/all_models','$member','forEach','price','getPrimUnitNo','/product_list','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','all_sales_order','log','<!DOCTYPE\x20html>','</head><body>','conversion_data','findById','aggregate','body','$wms_data','dicount_price_adjust','sales_category','date','$member.id_member','<span>\x20Dear\x20<b>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','email','Hindi','</tbody>','</table>','prod_name','headers','totalprice','errors','nodemailer','success','primary_code','German','<span>\x20Requested\x20By:\x20<b>','$sale_product.quantity','padStart','</b></span>\x20<br>','$account_data','account_data','quantity','product_name','<span>\x20Request\x20Date:\x20<b>','host','_id','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','<h5>\x20JEC\x20SMS\x20</h5>','express','tmpisFG','8lEtKLH','/add_sales','<span>\x20Request\x20ID:\x20<b>','head_id_staff_id','$accounting_account_id','head_staff_info','Error\x20Occurs','prod_cat','English\x20(US)','Arabic\x20(ae)','secondary_unit','string','$invoice','</td>','prod_code','</body></html>','valueOf','160818vGRLPl','params','</div>','json','/sales_order/view_sales/','get','../public/language/languages.json','/upload/','100248neNzuQ','$customer','/view_sales/:id','wms_account_id','add_sales_order','real_qty_unit_val','Spanish','invoice','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','$sale_product','save','port','map','redirect','$wms_account_id','adjustment_discount','<tr>','/../public','11918392jNiCSh','Portuguese','<table\x20style=\x22width:\x20100%\x20!important;\x22>','no_per_unit','Router','post','100AdrWma','<h2>\x20JEC\x20SMS\x20</h2>','$date','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','language','view_sales_order','sttaff_id','Approval\x20for\x20','</thead>','Sales\x20Order\x20is\x20ongoing','/accounting_approval/','\x22>Change\x20Status</a>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','user','exports','$head_id_staff','staffs'];a0_0x482f=function(){return _0x219114;};return a0_0x482f();}const express=require(a0_0x2d294e(0x155)),app=express(),router=express[a0_0x2d294e(0xe5)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x2d294e(0x126)),auth=require(a0_0x2d294e(0x11f)),users=require(a0_0x2d294e(0xcd)),excelJS=require(a0_0x2d294e(0x11a)),xlsx=require('xlsx'),mongoose=require(a0_0x2d294e(0x11d)),{ObjectId}=require('mongodb'),nodemailer=require(a0_0x2d294e(0x144));function a0_0x3b33(_0x42539d,_0x3233ad){var _0x482f1c=a0_0x482f();return a0_0x3b33=function(_0x3b336b,_0x342044){_0x3b336b=_0x3b336b-0xc5;var _0x310465=_0x482f1c[_0x3b336b];return _0x310465;},a0_0x3b33(_0x42539d,_0x3233ad);}router[a0_0x2d294e(0xcc)]('/',auth,async(_0x2a34d6,_0x4bd78a)=>{var _0x392f28=a0_0x2d294e;try{const _0x5e77d1=await master_shop[_0x392f28(0xf8)](),_0x20b52a=_0x2a34d6[_0x392f28(0xf4)],_0x283bec=await profile['findOne']({'email':_0x20b52a[_0x392f28(0x13c)]}),_0x3a51e3=await staff[_0x392f28(0x121)]({'email':_0x20b52a[_0x392f28(0x13c)]}),_0x1d8c83=await sales_order[_0x392f28(0x133)]([{'$match':{'sales_staff_id':_0x3a51e3[_0x392f28(0x152)][_0x392f28(0xc6)]()}},{'$unwind':_0x392f28(0xd8)},{'$group':{'_id':'$_id','invoice':{'$first':_0x392f28(0x163)},'customer':{'$first':_0x392f28(0xd0)},'date':{'$first':_0x392f28(0xe9)},'JD':{'$first':'$JD'},'accounting_account_confirm':{'$first':'$accounting_account_confirm'},'wms_account_confirm':{'$first':_0x392f28(0x10a)},'totalQTY':{'$sum':_0x392f28(0x149)}}}]);if(_0x5e77d1[0x0][_0x392f28(0xeb)]==_0x392f28(0x15f))var _0x3142bb=users['English'];else{if(_0x5e77d1[0x0]['language']=='Hindi')var _0x3142bb=users[_0x392f28(0x13d)];else{if(_0x5e77d1[0x0][_0x392f28(0xeb)]==_0x392f28(0x147))var _0x3142bb=users[_0x392f28(0x147)];else{if(_0x5e77d1[0x0][_0x392f28(0xeb)]==_0x392f28(0xd5))var _0x3142bb=users[_0x392f28(0xd5)];else{if(_0x5e77d1[0x0]['language']==_0x392f28(0x114))var _0x3142bb=users[_0x392f28(0x114)];else{if(_0x5e77d1[0x0][_0x392f28(0xeb)]==_0x392f28(0xfa))var _0x3142bb=users[_0x392f28(0xe2)];else{if(_0x5e77d1[0x0][_0x392f28(0xeb)]==_0x392f28(0x104))var _0x3142bb=users['Chinese'];else{if(_0x5e77d1[0x0][_0x392f28(0xeb)]==_0x392f28(0x160))var _0x3142bb=users[_0x392f28(0x108)];}}}}}}}_0x4bd78a['render'](_0x392f28(0x12d),{'success':_0x2a34d6['flash'](_0x392f28(0x145)),'errors':_0x2a34d6['flash'](_0x392f28(0x143)),'master_shop':_0x5e77d1,'profile':_0x283bec,'role':_0x20b52a,'language':_0x3142bb,'product_list':_0x3a51e3['product_list'],'sales_mine':_0x1d8c83,'staff_arr':_0x3a51e3});}catch(_0xebf553){console['log'](_0xebf553);}}),router[a0_0x2d294e(0xcc)](a0_0x2d294e(0x158),auth,async(_0x48c252,_0x28f548)=>{var _0x1e943c=a0_0x2d294e;try{const _0x3d80c9=await master_shop[_0x1e943c(0xf8)](),_0x31d0f5=_0x48c252[_0x1e943c(0xf4)],_0x50bea7=await profile[_0x1e943c(0x121)]({'email':_0x31d0f5[_0x1e943c(0x13c)]}),_0x413358=await staff[_0x1e943c(0x121)]({'email':_0x31d0f5['email']}),_0x4db720=await customer[_0x1e943c(0xf8)]({'agent_id':_0x413358[_0x1e943c(0x152)]});if(_0x3d80c9[0x0][_0x1e943c(0xeb)]==_0x1e943c(0x15f))var _0x4c19ad=users[_0x1e943c(0x110)];else{if(_0x3d80c9[0x0][_0x1e943c(0xeb)]==_0x1e943c(0x13d))var _0x4c19ad=users[_0x1e943c(0x13d)];else{if(_0x3d80c9[0x0][_0x1e943c(0xeb)]=='German')var _0x4c19ad=users[_0x1e943c(0x147)];else{if(_0x3d80c9[0x0]['language']==_0x1e943c(0xd5))var _0x4c19ad=users[_0x1e943c(0xd5)];else{if(_0x3d80c9[0x0]['language']==_0x1e943c(0x114))var _0x4c19ad=users['French'];else{if(_0x3d80c9[0x0][_0x1e943c(0xeb)]=='Portuguese\x20(BR)')var _0x4c19ad=users[_0x1e943c(0xe2)];else{if(_0x3d80c9[0x0][_0x1e943c(0xeb)]==_0x1e943c(0x104))var _0x4c19ad=users[_0x1e943c(0x104)];else{if(_0x3d80c9[0x0][_0x1e943c(0xeb)]==_0x1e943c(0x160))var _0x4c19ad=users[_0x1e943c(0x108)];}}}}}}}_0x28f548['render'](_0x1e943c(0xd3),{'success':_0x48c252['flash'](_0x1e943c(0x145)),'errors':_0x48c252[_0x1e943c(0x111)](_0x1e943c(0x143)),'master_shop':_0x3d80c9,'profile':_0x50bea7,'role':_0x31d0f5,'language':_0x4c19ad,'customer':_0x4db720,'staff_arr':_0x413358});}catch(_0x424a41){console['log'](_0x424a41);}}),router['get'](a0_0x2d294e(0xd1),auth,async(_0x1a7bb7,_0x2078e5)=>{var _0x4ec0de=a0_0x2d294e;try{const _0x2d84c6=await master_shop[_0x4ec0de(0xf8)](),_0x2ec26f=_0x1a7bb7[_0x4ec0de(0xf4)],_0x42ad2a=await profile['findOne']({'email':_0x2ec26f[_0x4ec0de(0x13c)]}),_0x195210=await staff[_0x4ec0de(0x121)]({'email':_0x2ec26f[_0x4ec0de(0x13c)]}),_0xbb6f63=await customer[_0x4ec0de(0xf8)]({'agent_id':_0x195210[_0x4ec0de(0x152)]}),_0x27ff59=mongoose[_0x4ec0de(0xfc)][_0x4ec0de(0x118)],_0x4f483e=_0x1a7bb7[_0x4ec0de(0xc8)]['id'],_0x3cdd95=await sales_order[_0x4ec0de(0x132)](_0x4f483e),_0x530a3c=await sales_order[_0x4ec0de(0x133)]([{'$match':{'_id':_0x27ff59(_0x4f483e)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x4ec0de(0x15b)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x4ec0de(0xdd)}}},{'$lookup':{'from':_0x4ec0de(0xf7),'localField':_0x4ec0de(0x113),'foreignField':_0x4ec0de(0x152),'as':_0x4ec0de(0x14d)}},{'$unwind':_0x4ec0de(0x14c)},{'$lookup':{'from':'staffs','localField':_0x4ec0de(0xd2),'foreignField':_0x4ec0de(0x152),'as':'wms_data'}},{'$unwind':{'path':_0x4ec0de(0x135),'preserveNullAndEmptyArrays':!![]}}]);if(_0x2d84c6[0x0][_0x4ec0de(0xeb)]==_0x4ec0de(0x15f))var _0x20b259=users[_0x4ec0de(0x110)];else{if(_0x2d84c6[0x0][_0x4ec0de(0xeb)]=='Hindi')var _0x20b259=users[_0x4ec0de(0x13d)];else{if(_0x2d84c6[0x0][_0x4ec0de(0xeb)]==_0x4ec0de(0x147))var _0x20b259=users[_0x4ec0de(0x147)];else{if(_0x2d84c6[0x0][_0x4ec0de(0xeb)]=='Spanish')var _0x20b259=users[_0x4ec0de(0xd5)];else{if(_0x2d84c6[0x0]['language']==_0x4ec0de(0x114))var _0x20b259=users[_0x4ec0de(0x114)];else{if(_0x2d84c6[0x0][_0x4ec0de(0xeb)]==_0x4ec0de(0xfa))var _0x20b259=users[_0x4ec0de(0xe2)];else{if(_0x2d84c6[0x0][_0x4ec0de(0xeb)]=='Chinese')var _0x20b259=users[_0x4ec0de(0x104)];else{if(_0x2d84c6[0x0][_0x4ec0de(0xeb)]=='Arabic\x20(ae)')var _0x20b259=users['Arabic'];}}}}}}}_0x2078e5[_0x4ec0de(0xfe)](_0x4ec0de(0xec),{'success':_0x1a7bb7[_0x4ec0de(0x111)](_0x4ec0de(0x145)),'errors':_0x1a7bb7['flash'](_0x4ec0de(0x143)),'master_shop':_0x2d84c6,'profile':_0x42ad2a,'role':_0x2ec26f,'language':_0x20b259,'customer':_0xbb6f63,'sales_sa':_0x3cdd95,'approvers':_0x530a3c[0x0],'staff_arr':_0x195210});}catch(_0x5205e2){console[_0x4ec0de(0x12e)](_0x5205e2);}}),router['post']('/add_sales',auth,async(_0x56cccb,_0x583cf1)=>{var _0x18fd0e=a0_0x2d294e;try{const {customer:_0x23e518,date:_0xcfc48b,prod_code:_0x85b97a,note:_0x5dfb27,paid_status:_0xe09bc4,JD:_0x40b6b3,po_number:_0x2f317f,desire_date:_0x2851a5}=_0x56cccb[_0x18fd0e(0x134)];if(typeof _0x85b97a==_0x18fd0e(0x162))var _0x2d1142=[_0x56cccb[_0x18fd0e(0x134)]['prod_code']],_0x59b050=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x140)]],_0x76d1ca=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x146)]],_0x32b661=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x14e)]],_0x396b90=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0xf9)]],_0x4d5f3f=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x11b)]],_0xfeb815=[_0x56cccb['body']['price']],_0x1f6d0d=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x122)]],_0x393435=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x102)]],_0x2c509f=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x156)]],_0x565110=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x136)]],_0x127525=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0xe4)]],_0xe32ba8=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x12a)]],_0xa15da5=[_0x56cccb[_0x18fd0e(0x134)]['prod_cat']],_0x46d9b2=[_0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x161)]],_0x23f034=[_0x56cccb[_0x18fd0e(0x134)]['conversion_unit']];else var _0x2d1142=[..._0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x165)]],_0x59b050=[..._0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x140)]],_0x76d1ca=[..._0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x146)]],_0x32b661=[..._0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x14e)]],_0x396b90=[..._0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0xf9)]],_0x4d5f3f=[..._0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x11b)]],_0xfeb815=[..._0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x129)]],_0x1f6d0d=[..._0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x122)]],_0x393435=[..._0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x102)]],_0x2c509f=[..._0x56cccb['body'][_0x18fd0e(0x156)]],_0x565110=[..._0x56cccb['body']['dicount_price_adjust']],_0x127525=[..._0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0xe4)]],_0xe32ba8=[..._0x56cccb[_0x18fd0e(0x134)]['getPrimUnitNo']],_0xa15da5=[..._0x56cccb[_0x18fd0e(0x134)][_0x18fd0e(0x15e)]],_0x46d9b2=[..._0x56cccb[_0x18fd0e(0x134)]['secondary_unit']],_0x23f034=[..._0x56cccb[_0x18fd0e(0x134)]['conversion_unit']];const _0x4d889c=_0x2d1142[_0x18fd0e(0xdb)](_0x1932cf=>{return _0x1932cf={'product_code':_0x1932cf};});_0x59b050[_0x18fd0e(0x128)]((_0x528bda,_0x5f4f5c)=>{var _0x21e738=_0x18fd0e;_0x4d889c[_0x5f4f5c][_0x21e738(0x14f)]=_0x528bda;}),_0x76d1ca[_0x18fd0e(0x128)]((_0x29c1c8,_0x4b3024)=>{var _0x3951b7=_0x18fd0e;_0x4d889c[_0x4b3024][_0x3951b7(0x146)]=_0x29c1c8;}),_0x32b661[_0x18fd0e(0x128)]((_0x23e565,_0x4d1238)=>{var _0x288f4d=_0x18fd0e;_0x4d889c[_0x4d1238][_0x288f4d(0x14e)]=_0x23e565;}),_0x396b90[_0x18fd0e(0x128)]((_0x49f356,_0x1e109f)=>{var _0x40c0ce=_0x18fd0e;_0x4d889c[_0x1e109f][_0x40c0ce(0xf9)]=_0x49f356;}),_0x4d5f3f[_0x18fd0e(0x128)]((_0x5cf1f9,_0x2cea9e)=>{_0x4d889c[_0x2cea9e]['product_id']=_0x5cf1f9;}),_0x565110[_0x18fd0e(0x128)]((_0x4942ad,_0x5b32b2)=>{var _0x74ff24=_0x18fd0e;_0x4d889c[_0x5b32b2][_0x74ff24(0xde)]=_0x4942ad;}),_0xfeb815['forEach']((_0x4a7cf0,_0x539d9c)=>{_0x4d889c[_0x539d9c]['price']=_0x4a7cf0;}),_0x1f6d0d[_0x18fd0e(0x128)]((_0x4cbc81,_0xd2c4e8)=>{var _0x2023fc=_0x18fd0e;_0x4d889c[_0xd2c4e8][_0x2023fc(0x142)]=_0x4cbc81;}),_0x393435['forEach']((_0x147bed,_0x1f2bc0)=>{var _0x3618ef=_0x18fd0e;_0x4d889c[_0x1f2bc0][_0x3618ef(0x101)]=_0x147bed;}),_0x2c509f[_0x18fd0e(0x128)]((_0x23b974,_0x11af87)=>{var _0xab2400=_0x18fd0e;_0x4d889c[_0x11af87][_0xab2400(0x125)]=_0x23b974;}),_0x46d9b2['forEach']((_0xd770ce,_0x3a1f89)=>{var _0x5d82f3=_0x18fd0e;_0x4d889c[_0x3a1f89][_0x5d82f3(0x161)]=_0xd770ce;}),_0xe32ba8[_0x18fd0e(0x128)]((_0x52df00,_0x23e49f)=>{var _0x1f3040=_0x18fd0e;_0x4d889c[_0x23e49f][_0x1f3040(0xd4)]=_0x52df00;}),_0xa15da5[_0x18fd0e(0x128)]((_0xe266fe,_0x43d60a)=>{var _0x191496=_0x18fd0e;_0x4d889c[_0x43d60a][_0x191496(0x15e)]=_0xe266fe;}),_0x23f034[_0x18fd0e(0x128)]((_0x4bfc64,_0x2853c5)=>{var _0x38bff5=_0x18fd0e;_0x4d889c[_0x2853c5][_0x38bff5(0x131)]=_0x4bfc64;}),_0x127525[_0x18fd0e(0x128)]((_0x4a9f1c,_0x1073dc)=>{var _0x58c270=_0x18fd0e;_0x4d889c[_0x1073dc][_0x58c270(0xe4)]=_0x4a9f1c;});const _0xf8a279=await approver_acct[_0x18fd0e(0x133)]([{'$unwind':_0x18fd0e(0x127)},{'$match':{'member.id_member':_0x56cccb[_0x18fd0e(0xf4)][_0x18fd0e(0xed)]}},{'$group':{'_id':{'id_member':_0x18fd0e(0x139),'name':'$member.name'},'head_id_staff':{'$first':_0x18fd0e(0xf6)}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':'$head_id_staff'}}},{'$lookup':{'from':_0x18fd0e(0xf7),'localField':_0x18fd0e(0x15a),'foreignField':_0x18fd0e(0x152),'as':_0x18fd0e(0x15c)}},{'$unwind':_0x18fd0e(0x116)}]),_0x4b894f=new invoice_for_sales_order();await _0x4b894f[_0x18fd0e(0xd9)]();const _0x7c8811=_0x56cccb['user'],_0x57030b=await staff[_0x18fd0e(0x121)]({'email':_0x7c8811[_0x18fd0e(0x13c)]}),_0x5ab454=new sales_order({'invoice':_0x4b894f[_0x18fd0e(0x120)]['toString']()[_0x18fd0e(0x14a)](0x8,'0'),'customer':_0x23e518,'date':_0xcfc48b,'sale_product':_0x4d889c,'note':_0x5dfb27,'sales_staff_id':_0x57030b[_0x18fd0e(0x152)]['valueOf'](),'JD':_0x40b6b3,'accounting_account_id':_0xf8a279[0x0][_0x18fd0e(0x115)],'po_number':_0x2f317f,'desired_delivery':_0x2851a5,'wms_account_confirm':_0x18fd0e(0x117),'accounting_account_confirm':_0x18fd0e(0x117)}),_0x3e1323=await _0x5ab454[_0x18fd0e(0xd9)]();var _0xe3bb51=_0x3e1323['sale_product'],_0x1f5153='',_0x2674e7,_0x1c16db=0x0;for(_0x2674e7 in _0xe3bb51){_0x1f5153+=_0x18fd0e(0xdf)+_0x18fd0e(0x12c)+_0xe3bb51[_0x2674e7][_0x18fd0e(0x14f)]+_0x18fd0e(0x164)+_0x18fd0e(0x12c)+_0xe3bb51[_0x2674e7]['product_code']+'</td>'+_0x18fd0e(0x12c)+_0xe3bb51[_0x2674e7][_0x18fd0e(0x14e)]+_0x18fd0e(0x164)+_0x18fd0e(0x12c)+_0xe3bb51[_0x2674e7][_0x18fd0e(0xf9)]+_0x18fd0e(0x164)+_0x18fd0e(0x119),_0x1c16db+=parseInt(_0xe3bb51[_0x2674e7][_0x18fd0e(0x14e)]);}const _0x49b276=await master_shop[_0x18fd0e(0xf8)](),_0x352c08=await email_settings['findOne']();let _0xf5ccd=nodemailer['createTransport']({'port':Number(_0x352c08[_0x18fd0e(0xda)]),'secure':![],'auth':{'user':_0x352c08[_0x18fd0e(0x13c)],'pass':_0x352c08['password']}});const _0x49277f=_0x56cccb['protocol']+_0x18fd0e(0x10f)+_0x56cccb[_0x18fd0e(0x141)][_0x18fd0e(0x151)];let _0x3a2765={'from':_0x352c08[_0x18fd0e(0x13c)],'to':_0xf8a279[0x0][_0x18fd0e(0x15c)][_0x18fd0e(0x13c)]+_0x18fd0e(0x123),'subject':_0x18fd0e(0xee)+_0x3e1323['invoice'],'attachments':[{'filename':'Logo.png','path':__dirname+_0x18fd0e(0xe0)+_0x18fd0e(0xce)+_0x49b276[0x0][_0x18fd0e(0x10d)],'cid':'logo'}],'html':_0x18fd0e(0x12f)+_0x18fd0e(0xfb)+'<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>'+_0x18fd0e(0x130)+_0x18fd0e(0x100)+_0x18fd0e(0x13b)+'<div>'+_0x18fd0e(0xf3)+'</div>'+_0x18fd0e(0x100)+_0x18fd0e(0xe8)+_0x18fd0e(0xc9)+_0x18fd0e(0xc9)+'<hr\x20class=\x22my-3\x22>'+_0x18fd0e(0x100)+_0x18fd0e(0x13a)+_0xf8a279[0x0][_0x18fd0e(0x15c)]['name']+'</b>,\x20</span><br>'+_0x18fd0e(0xc9)+_0x18fd0e(0x100)+'<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>'+_0x18fd0e(0xc9)+_0x18fd0e(0x100)+_0x18fd0e(0x159)+_0x3e1323[_0x18fd0e(0xd6)]+_0x18fd0e(0x14b)+_0x18fd0e(0x148)+_0x57030b[_0x18fd0e(0x112)]+_0x18fd0e(0x14b)+_0x18fd0e(0x150)+_0x3e1323[_0x18fd0e(0x138)]+'</b></span>\x20<br><br>'+_0x18fd0e(0xc9)+_0x18fd0e(0xe3)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x18fd0e(0xdf)+_0x18fd0e(0xd7)+_0x18fd0e(0x109)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x18fd0e(0x11c)+_0x18fd0e(0x119)+_0x18fd0e(0xef)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x1f5153+'\x20'+_0x18fd0e(0x13e)+_0x18fd0e(0x13f)+_0x18fd0e(0x100)+'<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>'+_0x1c16db+_0x18fd0e(0x124)+_0x18fd0e(0x106)+_0x18fd0e(0xff)+'<br><br><br>'+_0x18fd0e(0xc9)+'<div\x20style=\x22text-align:\x20center;\x22>'+_0x18fd0e(0xea)+_0x49277f+_0x18fd0e(0xf1)+_0x3e1323[_0x18fd0e(0x152)]+_0x18fd0e(0xf2)+_0x18fd0e(0x107)+_0x18fd0e(0xc9)+'<div>'+_0x18fd0e(0xfd)+_0x18fd0e(0x154)+'</div>'+_0x18fd0e(0xc9)+_0x18fd0e(0x153)+_0x18fd0e(0xc5)};_0xf5ccd['sendMail'](_0x3a2765,function(_0x219ace,_0x14c157){var _0x39079d=_0x18fd0e;_0x219ace?(console['log'](_0x219ace),console[_0x39079d(0x12e)](_0x39079d(0x15d))):console['log']('Email\x20sent\x20successfully');}),_0x56cccb[_0x18fd0e(0x111)](_0x18fd0e(0x145),_0x18fd0e(0xf0)),_0x583cf1[_0x18fd0e(0xdc)](_0x18fd0e(0xcb)+_0x3e1323[_0x18fd0e(0x152)]);}catch(_0x205010){}}),router['post'](a0_0x2d294e(0x12b),auth,async(_0x1aa106,_0x408c55)=>{var _0x5895ee=a0_0x2d294e;try{const _0x226ad6=_0x1aa106[_0x5895ee(0xf4)],_0x2f07a7=await profile[_0x5895ee(0x121)]({'email':_0x226ad6[_0x5895ee(0x13c)]}),_0xe5a217=await product[_0x5895ee(0xf8)]({'sales_category':_0x226ad6[_0x5895ee(0x137)]});_0x408c55[_0x5895ee(0xca)](_0xe5a217);}catch(_0xfc968c){}}),router[a0_0x2d294e(0xe6)]('/product_data',auth,async(_0x4ea806,_0x5131aa)=>{var _0x49e5bb=a0_0x2d294e;try{const _0x4073fd=_0x4ea806[_0x49e5bb(0xf4)],{id_data:_0x3047a4}=_0x4ea806['body'],_0x39a378=await profile[_0x49e5bb(0x121)]({'email':_0x4073fd[_0x49e5bb(0x13c)]}),_0x2b7b8f=mongoose[_0x49e5bb(0xfc)][_0x49e5bb(0x118)];var _0x4f52a7=_0x2b7b8f(_0x3047a4);const _0x56f8f9=await product[_0x49e5bb(0xf8)]({'_id':_0x4f52a7});_0x5131aa[_0x49e5bb(0xca)](_0x56f8f9);}catch(_0x5d8d9d){}}),module[a0_0x2d294e(0xf5)]=router;