function a0_0x2072(){var _0x8ac9a9=['../models/all_models','</tr>','$wms_data','2020ReFkdm','../middleware/auth','$accounting_account_id','_id','28478YBJShQ','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','all_sales_order','price','Sales\x20Order\x20is\x20ongoing','product_id','/add_sales','<div\x20style=\x22text-align:\x20center;\x22>','json','sendMail','<tr>','../public/language/languages.json','</td>','adjustment_discount','errors','Hindi','</b></span>\x20<br>','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','staffs','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','tmpisFG','/../public','Portuguese','aggregate','\x22>Change\x20Status</a>','Portuguese\x20(BR)','discount','36qlOVGk','Types','</head><body>','<span>\x20Dear\x20<b>','head_staff_info','get','$member.name','$sale_product.quantity','exceljs','$wms_account_id','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','prod_name','map','createTransport','body','$sale_product','language','product_name','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','redirect','Arabic\x20(ae)','true','user','5048KqXyZk','<h5>\x20JEC\x20SMS\x20</h5>','host','add_sales_order','<tbody\x20style=\x22text-align:\x20center;\x22>','conversion_data','quantity','</table>','real_qty_unit_val','<br><br>','totalprice','params','<br><br><br>','exports','wms_data','Arabic','date','$head_id_staff','mongoose','$member','save','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','view_sales_order','email','2317ULpVmm','Approval\x20for\x20','name','$JD','5786NEKeVg','log','dicount_price','629004WrKioH','English\x20(US)','Chinese','no_per_unit','forEach','logo','product_list','6680EfjZaY','post','head_id_staff_id','Logo.png','81921IqrgoJ','/view_sales/:id','flash','success','French','find','secondary_unit','German','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','product_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','<table\x20style=\x22width:\x20100%\x20!important;\x22>','<div>','</div>','totalPrice','valueOf','</tbody>','findOne','611838TfVmrf','getPrimUnitNo','prod_code','$member.id_member','<html><head><title></title>','headers','sales_category','padStart','</body></html>','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','invoice','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','Email\x20sent\x20successfully','$_id','$wms_account_confirm',';christian.villamer@jakagroup.com','unit','Router','head_id_staff','render','prod_cat','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','$customer','<h2>\x20JEC\x20SMS\x20</h2>','dicount_price_adjust','<span>\x20Request\x20Date:\x20<b>','<span>\x20Request\x20ID:\x20<b>','sttaff_id','$head_staff_info','primary_code','$account_data','nodemailer','<span>\x20Requested\x20By:\x20<b>','English','Spanish','string','1KxSdfG','sale_product','ObjectId','/upload/','xlsx','$accounting_account_confirm'];a0_0x2072=function(){return _0x8ac9a9;};return a0_0x2072();}var a0_0x56b663=a0_0x4291;(function(_0x4d6ab4,_0x4b2ac9){var _0x4a6a34=a0_0x4291,_0x35da88=_0x4d6ab4();while(!![]){try{var _0x1a5693=parseInt(_0x4a6a34(0x1d7))/0x1*(parseInt(_0x4a6a34(0x1e4))/0x2)+parseInt(_0x4a6a34(0x1a1))/0x3+-parseInt(_0x4a6a34(0x1ff))/0x4*(-parseInt(_0x4a6a34(0x19d))/0x5)+parseInt(_0x4a6a34(0x196))/0x6+parseInt(_0x4a6a34(0x18f))/0x7*(-parseInt(_0x4a6a34(0x177))/0x8)+parseInt(_0x4a6a34(0x1b3))/0x9+parseInt(_0x4a6a34(0x1e0))/0xa*(parseInt(_0x4a6a34(0x193))/0xb);if(_0x1a5693===_0x4b2ac9)break;else _0x35da88['push'](_0x35da88['shift']());}catch(_0x594172){_0x35da88['push'](_0x35da88['shift']());}}}(a0_0x2072,0x1e381));function a0_0x4291(_0x17c8ae,_0x1f82db){var _0x207250=a0_0x2072();return a0_0x4291=function(_0x429191,_0x43cd04){_0x429191=_0x429191-0x16f;var _0x4f09ea=_0x207250[_0x429191];return _0x4f09ea;},a0_0x4291(_0x17c8ae,_0x1f82db);}const express=require('express'),app=express(),router=express[a0_0x56b663(0x1c4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x56b663(0x1dd)),auth=require(a0_0x56b663(0x1e1)),users=require(a0_0x56b663(0x1ef)),excelJS=require(a0_0x56b663(0x207)),xlsx=require(a0_0x56b663(0x1db)),mongoose=require(a0_0x56b663(0x189)),{ObjectId}=require('mongodb'),nodemailer=require(a0_0x56b663(0x1d2));router['get']('/',auth,async(_0x166fed,_0x3d1969)=>{var _0x1c375d=a0_0x56b663;try{const _0x89682b=await master_shop[_0x1c375d(0x1a6)](),_0x36df4a=_0x166fed[_0x1c375d(0x176)],_0x349259=await profile[_0x1c375d(0x1b2)]({'email':_0x36df4a[_0x1c375d(0x18e)]}),_0x3068d1=await staff[_0x1c375d(0x1b2)]({'email':_0x36df4a['email']}),_0x490da6=await sales_order['aggregate']([{'$match':{'sales_staff_id':_0x3068d1[_0x1c375d(0x1e3)][_0x1c375d(0x1b0)]()}},{'$unwind':_0x1c375d(0x16f)},{'$group':{'_id':_0x1c375d(0x1c0),'invoice':{'$first':'$invoice'},'customer':{'$first':_0x1c375d(0x1c9)},'date':{'$first':'$date'},'JD':{'$first':_0x1c375d(0x192)},'accounting_account_confirm':{'$first':_0x1c375d(0x1dc)},'wms_account_confirm':{'$first':_0x1c375d(0x1c1)},'totalQTY':{'$sum':_0x1c375d(0x206)}}}]);if(_0x89682b[0x0][_0x1c375d(0x170)]==_0x1c375d(0x197))var _0xd204c8=users[_0x1c375d(0x1d4)];else{if(_0x89682b[0x0][_0x1c375d(0x170)]==_0x1c375d(0x1f3))var _0xd204c8=users[_0x1c375d(0x1f3)];else{if(_0x89682b[0x0]['language']=='German')var _0xd204c8=users['German'];else{if(_0x89682b[0x0][_0x1c375d(0x170)]==_0x1c375d(0x1d5))var _0xd204c8=users['Spanish'];else{if(_0x89682b[0x0]['language']==_0x1c375d(0x1a5))var _0xd204c8=users['French'];else{if(_0x89682b[0x0][_0x1c375d(0x170)]==_0x1c375d(0x1fd))var _0xd204c8=users[_0x1c375d(0x1fa)];else{if(_0x89682b[0x0][_0x1c375d(0x170)]==_0x1c375d(0x198))var _0xd204c8=users['Chinese'];else{if(_0x89682b[0x0][_0x1c375d(0x170)]=='Arabic\x20(ae)')var _0xd204c8=users['Arabic'];}}}}}}}_0x3d1969[_0x1c375d(0x1c6)](_0x1c375d(0x1e6),{'success':_0x166fed[_0x1c375d(0x1a3)](_0x1c375d(0x1a4)),'errors':_0x166fed[_0x1c375d(0x1a3)](_0x1c375d(0x1f2)),'master_shop':_0x89682b,'profile':_0x349259,'role':_0x36df4a,'language':_0xd204c8,'product_list':_0x3068d1[_0x1c375d(0x19c)],'sales_mine':_0x490da6,'staff_arr':_0x3068d1});}catch(_0x7787dc){console[_0x1c375d(0x194)](_0x7787dc);}}),router[a0_0x56b663(0x204)]('/add_sales',auth,async(_0x505fa6,_0x3b4d44)=>{var _0x5105ea=a0_0x56b663;try{const _0x17daf4=await master_shop[_0x5105ea(0x1a6)](),_0x15fa5e=_0x505fa6[_0x5105ea(0x176)],_0x33a469=await profile[_0x5105ea(0x1b2)]({'email':_0x15fa5e['email']}),_0x303e27=await staff[_0x5105ea(0x1b2)]({'email':_0x15fa5e[_0x5105ea(0x18e)]}),_0x27f487=await customer[_0x5105ea(0x1a6)]({'agent_id':_0x303e27[_0x5105ea(0x1e3)]});if(_0x17daf4[0x0]['language']==_0x5105ea(0x197))var _0x318b5e=users[_0x5105ea(0x1d4)];else{if(_0x17daf4[0x0][_0x5105ea(0x170)]==_0x5105ea(0x1f3))var _0x318b5e=users[_0x5105ea(0x1f3)];else{if(_0x17daf4[0x0]['language']==_0x5105ea(0x1a8))var _0x318b5e=users['German'];else{if(_0x17daf4[0x0][_0x5105ea(0x170)]=='Spanish')var _0x318b5e=users[_0x5105ea(0x1d5)];else{if(_0x17daf4[0x0][_0x5105ea(0x170)]==_0x5105ea(0x1a5))var _0x318b5e=users[_0x5105ea(0x1a5)];else{if(_0x17daf4[0x0][_0x5105ea(0x170)]==_0x5105ea(0x1fd))var _0x318b5e=users[_0x5105ea(0x1fa)];else{if(_0x17daf4[0x0][_0x5105ea(0x170)]==_0x5105ea(0x198))var _0x318b5e=users[_0x5105ea(0x198)];else{if(_0x17daf4[0x0][_0x5105ea(0x170)]==_0x5105ea(0x174))var _0x318b5e=users['Arabic'];}}}}}}}_0x3b4d44[_0x5105ea(0x1c6)](_0x5105ea(0x17a),{'success':_0x505fa6[_0x5105ea(0x1a3)]('success'),'errors':_0x505fa6[_0x5105ea(0x1a3)]('errors'),'master_shop':_0x17daf4,'profile':_0x33a469,'role':_0x15fa5e,'language':_0x318b5e,'customer':_0x27f487,'staff_arr':_0x303e27});}catch(_0x4a732d){console['log'](_0x4a732d);}}),router[a0_0x56b663(0x204)](a0_0x56b663(0x1a2),auth,async(_0x16ee50,_0xa52fb7)=>{var _0x3c6140=a0_0x56b663;try{const _0x5346de=await master_shop[_0x3c6140(0x1a6)](),_0x146a26=_0x16ee50['user'],_0x9448d3=await profile[_0x3c6140(0x1b2)]({'email':_0x146a26[_0x3c6140(0x18e)]}),_0x1fcac5=await staff[_0x3c6140(0x1b2)]({'email':_0x146a26[_0x3c6140(0x18e)]}),_0x238cb0=await customer[_0x3c6140(0x1a6)]({'agent_id':_0x1fcac5[_0x3c6140(0x1e3)]}),_0x1bc027=mongoose['Types'][_0x3c6140(0x1d9)],_0x4c8ea1=_0x16ee50[_0x3c6140(0x182)]['id'],_0x39b57f=await sales_order['findById'](_0x4c8ea1),_0x554d4a=await sales_order[_0x3c6140(0x1fb)]([{'$match':{'_id':_0x1bc027(_0x4c8ea1)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x3c6140(0x1e2)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x3c6140(0x208)}}},{'$lookup':{'from':'staffs','localField':'accounting_account_id','foreignField':_0x3c6140(0x1e3),'as':'account_data'}},{'$unwind':_0x3c6140(0x1d1)},{'$lookup':{'from':_0x3c6140(0x1f6),'localField':'wms_account_id','foreignField':_0x3c6140(0x1e3),'as':_0x3c6140(0x185)}},{'$unwind':{'path':_0x3c6140(0x1df),'preserveNullAndEmptyArrays':!![]}}]);if(_0x5346de[0x0][_0x3c6140(0x170)]=='English\x20(US)')var _0x1d4b81=users[_0x3c6140(0x1d4)];else{if(_0x5346de[0x0]['language']==_0x3c6140(0x1f3))var _0x1d4b81=users[_0x3c6140(0x1f3)];else{if(_0x5346de[0x0]['language']==_0x3c6140(0x1a8))var _0x1d4b81=users[_0x3c6140(0x1a8)];else{if(_0x5346de[0x0][_0x3c6140(0x170)]=='Spanish')var _0x1d4b81=users[_0x3c6140(0x1d5)];else{if(_0x5346de[0x0]['language']==_0x3c6140(0x1a5))var _0x1d4b81=users['French'];else{if(_0x5346de[0x0]['language']=='Portuguese\x20(BR)')var _0x1d4b81=users[_0x3c6140(0x1fa)];else{if(_0x5346de[0x0][_0x3c6140(0x170)]==_0x3c6140(0x198))var _0x1d4b81=users[_0x3c6140(0x198)];else{if(_0x5346de[0x0]['language']=='Arabic\x20(ae)')var _0x1d4b81=users[_0x3c6140(0x186)];}}}}}}}_0xa52fb7[_0x3c6140(0x1c6)](_0x3c6140(0x18d),{'success':_0x16ee50['flash'](_0x3c6140(0x1a4)),'errors':_0x16ee50[_0x3c6140(0x1a3)]('errors'),'master_shop':_0x5346de,'profile':_0x9448d3,'role':_0x146a26,'language':_0x1d4b81,'customer':_0x238cb0,'sales_sa':_0x39b57f,'approvers':_0x554d4a[0x0],'staff_arr':_0x1fcac5});}catch(_0x2d9bae){console[_0x3c6140(0x194)](_0x2d9bae);}}),router['post'](a0_0x56b663(0x1ea),auth,async(_0x1c18b7,_0x3f8d87)=>{var _0x7f537a=a0_0x56b663;try{const {customer:_0x1eab90,date:_0x26dae2,prod_code:_0x59c121,note:_0x3cab11,paid_status:_0x580945,JD:_0x2c1ef5,po_number:_0xdecfe4,desire_date:_0x1f40bc}=_0x1c18b7[_0x7f537a(0x20d)];if(typeof _0x59c121==_0x7f537a(0x1d6))var _0x10e6ab=[_0x1c18b7[_0x7f537a(0x20d)]['prod_code']],_0x72f741=[_0x1c18b7['body'][_0x7f537a(0x20a)]],_0x4076e6=[_0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x1d0)]],_0x5271e6=[_0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x17d)]],_0x28f923=[_0x1c18b7['body'][_0x7f537a(0x1c3)]],_0x342967=[_0x1c18b7['body'][_0x7f537a(0x1e9)]],_0x269127=[_0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x1e7)]],_0x19b59a=[_0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x1af)]],_0x2b18c0=[_0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x195)]],_0x3898ed=[_0x1c18b7['body'][_0x7f537a(0x1f8)]],_0x2bad61=[_0x1c18b7[_0x7f537a(0x20d)]['dicount_price_adjust']],_0x3ae578=[_0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x199)]],_0x31e1ce=[_0x1c18b7['body']['getPrimUnitNo']],_0xc1a106=[_0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x1c7)]],_0x44686c=[_0x1c18b7['body'][_0x7f537a(0x1a7)]],_0x2e9417=[_0x1c18b7['body']['conversion_unit']];else var _0x10e6ab=[..._0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x1b5)]],_0x72f741=[..._0x1c18b7['body'][_0x7f537a(0x20a)]],_0x4076e6=[..._0x1c18b7['body'][_0x7f537a(0x1d0)]],_0x5271e6=[..._0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x17d)]],_0x28f923=[..._0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x1c3)]],_0x342967=[..._0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x1e9)]],_0x269127=[..._0x1c18b7['body'][_0x7f537a(0x1e7)]],_0x19b59a=[..._0x1c18b7['body'][_0x7f537a(0x1af)]],_0x2b18c0=[..._0x1c18b7[_0x7f537a(0x20d)]['dicount_price']],_0x3898ed=[..._0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x1f8)]],_0x2bad61=[..._0x1c18b7['body'][_0x7f537a(0x1cb)]],_0x3ae578=[..._0x1c18b7['body'][_0x7f537a(0x199)]],_0x31e1ce=[..._0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x1b4)]],_0xc1a106=[..._0x1c18b7[_0x7f537a(0x20d)]['prod_cat']],_0x44686c=[..._0x1c18b7[_0x7f537a(0x20d)][_0x7f537a(0x1a7)]],_0x2e9417=[..._0x1c18b7[_0x7f537a(0x20d)]['conversion_unit']];const _0x5b1feb=_0x10e6ab[_0x7f537a(0x20b)](_0x4b3b5e=>{return _0x4b3b5e={'product_code':_0x4b3b5e};});_0x72f741[_0x7f537a(0x19a)]((_0x4f898d,_0x35b50f)=>{var _0x2a6caf=_0x7f537a;_0x5b1feb[_0x35b50f][_0x2a6caf(0x171)]=_0x4f898d;}),_0x4076e6[_0x7f537a(0x19a)]((_0x4c7d0d,_0x81cc9f)=>{_0x5b1feb[_0x81cc9f]['primary_code']=_0x4c7d0d;}),_0x5271e6[_0x7f537a(0x19a)]((_0x429621,_0x32519c)=>{var _0x518976=_0x7f537a;_0x5b1feb[_0x32519c][_0x518976(0x17d)]=_0x429621;}),_0x28f923[_0x7f537a(0x19a)]((_0x1ff9e6,_0x1f54c7)=>{var _0x5115b5=_0x7f537a;_0x5b1feb[_0x1f54c7][_0x5115b5(0x1c3)]=_0x1ff9e6;}),_0x342967['forEach']((_0x3b6f8a,_0x451bbc)=>{var _0x1a5f43=_0x7f537a;_0x5b1feb[_0x451bbc][_0x1a5f43(0x1e9)]=_0x3b6f8a;}),_0x2bad61[_0x7f537a(0x19a)]((_0x66c4ba,_0x32838d)=>{var _0x9ddcf4=_0x7f537a;_0x5b1feb[_0x32838d][_0x9ddcf4(0x1f1)]=_0x66c4ba;}),_0x269127[_0x7f537a(0x19a)]((_0x4fa3a0,_0x584e0f)=>{var _0x20c833=_0x7f537a;_0x5b1feb[_0x584e0f][_0x20c833(0x1e7)]=_0x4fa3a0;}),_0x19b59a[_0x7f537a(0x19a)]((_0x2bcbec,_0x2455fa)=>{var _0x10e0df=_0x7f537a;_0x5b1feb[_0x2455fa][_0x10e0df(0x181)]=_0x2bcbec;}),_0x2b18c0['forEach']((_0x27b218,_0x170cc2)=>{var _0x2115b8=_0x7f537a;_0x5b1feb[_0x170cc2][_0x2115b8(0x1fe)]=_0x27b218;}),_0x3898ed['forEach']((_0x13d84f,_0xed8093)=>{_0x5b1feb[_0xed8093]['isFG']=_0x13d84f;}),_0x44686c['forEach']((_0x34ef5a,_0x127d5f)=>{var _0x37d05f=_0x7f537a;_0x5b1feb[_0x127d5f][_0x37d05f(0x1a7)]=_0x34ef5a;}),_0x31e1ce[_0x7f537a(0x19a)]((_0x2c2c9c,_0x12fff8)=>{var _0x5cbdfd=_0x7f537a;_0x5b1feb[_0x12fff8][_0x5cbdfd(0x17f)]=_0x2c2c9c;}),_0xc1a106[_0x7f537a(0x19a)]((_0x321a03,_0x325f30)=>{var _0x15c76c=_0x7f537a;_0x5b1feb[_0x325f30][_0x15c76c(0x1c7)]=_0x321a03;}),_0x2e9417[_0x7f537a(0x19a)]((_0x3fb19b,_0x61b53b)=>{var _0x3360a2=_0x7f537a;_0x5b1feb[_0x61b53b][_0x3360a2(0x17c)]=_0x3fb19b;}),_0x3ae578['forEach']((_0x52c382,_0x22b50b)=>{var _0xfb9a47=_0x7f537a;_0x5b1feb[_0x22b50b][_0xfb9a47(0x199)]=_0x52c382;});const _0x1a433d=await approver_acct['aggregate']([{'$unwind':_0x7f537a(0x18a)},{'$match':{'member.id_member':_0x1c18b7[_0x7f537a(0x176)][_0x7f537a(0x1ce)]}},{'$group':{'_id':{'id_member':_0x7f537a(0x1b6),'name':_0x7f537a(0x205)},'head_id_staff':{'$first':'$head_id_staff'}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x7f537a(0x188)}}},{'$lookup':{'from':_0x7f537a(0x1f6),'localField':_0x7f537a(0x19f),'foreignField':_0x7f537a(0x1e3),'as':_0x7f537a(0x203)}},{'$unwind':_0x7f537a(0x1cf)}]),_0x1b7cfd=new invoice_for_sales_order();await _0x1b7cfd[_0x7f537a(0x18b)]();const _0x301953=_0x1c18b7[_0x7f537a(0x176)],_0x1b0db4=await staff['findOne']({'email':_0x301953[_0x7f537a(0x18e)]}),_0x5f8f05=new sales_order({'invoice':_0x1b7cfd['invoice_init']['toString']()[_0x7f537a(0x1ba)](0x8,'0'),'customer':_0x1eab90,'date':_0x26dae2,'sale_product':_0x5b1feb,'note':_0x3cab11,'sales_staff_id':_0x1b0db4['_id']['valueOf'](),'JD':_0x2c1ef5,'accounting_account_id':_0x1a433d[0x0][_0x7f537a(0x1c5)],'po_number':_0xdecfe4,'desired_delivery':_0x1f40bc,'wms_account_confirm':_0x7f537a(0x175),'accounting_account_confirm':_0x7f537a(0x175)}),_0x1bc2fc=await _0x5f8f05['save']();var _0x10343a=_0x1bc2fc[_0x7f537a(0x1d8)],_0x1ef5a9='',_0x374e9a,_0x1fd0f1=0x0;for(_0x374e9a in _0x10343a){_0x1ef5a9+=_0x7f537a(0x1ee)+_0x7f537a(0x1e5)+_0x10343a[_0x374e9a][_0x7f537a(0x171)]+'</td>'+_0x7f537a(0x1e5)+_0x10343a[_0x374e9a][_0x7f537a(0x1aa)]+_0x7f537a(0x1f0)+_0x7f537a(0x1e5)+_0x10343a[_0x374e9a]['quantity']+_0x7f537a(0x1f0)+_0x7f537a(0x1e5)+_0x10343a[_0x374e9a]['unit']+_0x7f537a(0x1f0)+_0x7f537a(0x1de),_0x1fd0f1+=parseInt(_0x10343a[_0x374e9a][_0x7f537a(0x17d)]);}const _0x85e64f=await master_shop[_0x7f537a(0x1a6)](),_0x27f68c=await email_settings['findOne']();let _0x948664=nodemailer[_0x7f537a(0x20c)]({'port':Number(_0x27f68c['port']),'secure':![],'auth':{'user':_0x27f68c[_0x7f537a(0x18e)],'pass':_0x27f68c['password']}});const _0x742318=_0x1c18b7['protocol']+'://'+_0x1c18b7[_0x7f537a(0x1b8)][_0x7f537a(0x179)];let _0xc40c41={'from':_0x27f68c['email'],'to':_0x1a433d[0x0][_0x7f537a(0x203)][_0x7f537a(0x18e)]+_0x7f537a(0x1c2),'subject':_0x7f537a(0x190)+_0x1bc2fc[_0x7f537a(0x1bd)],'attachments':[{'filename':_0x7f537a(0x1a0),'path':__dirname+_0x7f537a(0x1f9)+_0x7f537a(0x1da)+_0x85e64f[0x0]['image'],'cid':_0x7f537a(0x19b)}],'html':'<!DOCTYPE\x20html>'+_0x7f537a(0x1b7)+_0x7f537a(0x1f5)+_0x7f537a(0x201)+'<div>'+_0x7f537a(0x18c)+_0x7f537a(0x1ad)+_0x7f537a(0x1bc)+'</div>'+'<div>'+_0x7f537a(0x1ca)+_0x7f537a(0x1ae)+'</div>'+'<hr\x20class=\x22my-3\x22>'+_0x7f537a(0x1ad)+_0x7f537a(0x202)+_0x1a433d[0x0][_0x7f537a(0x203)][_0x7f537a(0x191)]+'</b>,\x20</span><br>'+_0x7f537a(0x1ae)+_0x7f537a(0x1ad)+'<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>'+'</div>'+_0x7f537a(0x1ad)+_0x7f537a(0x1cd)+_0x1bc2fc[_0x7f537a(0x1bd)]+_0x7f537a(0x1f4)+_0x7f537a(0x1d3)+_0x1b0db4['name']+_0x7f537a(0x1f4)+_0x7f537a(0x1cc)+_0x1bc2fc[_0x7f537a(0x187)]+'</b></span>\x20<br><br>'+'</div>'+_0x7f537a(0x1ac)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x7f537a(0x1ee)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+_0x7f537a(0x1be)+_0x7f537a(0x1ab)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+'</tr>'+'</thead>'+_0x7f537a(0x17b)+'\x20'+_0x1ef5a9+'\x20'+_0x7f537a(0x1b1)+_0x7f537a(0x17e)+_0x7f537a(0x1ad)+_0x7f537a(0x1c8)+_0x1fd0f1+_0x7f537a(0x209)+'<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>'+_0x7f537a(0x172)+_0x7f537a(0x183)+_0x7f537a(0x1ae)+_0x7f537a(0x1eb)+_0x7f537a(0x1f7)+_0x742318+'/accounting_approval/'+_0x1bc2fc[_0x7f537a(0x1e3)]+_0x7f537a(0x1fc)+_0x7f537a(0x180)+_0x7f537a(0x1ae)+_0x7f537a(0x1ad)+'<strong>\x20Regards\x20</strong>'+_0x7f537a(0x178)+_0x7f537a(0x1ae)+'</div>'+_0x7f537a(0x1a9)+_0x7f537a(0x1bb)};_0x948664[_0x7f537a(0x1ed)](_0xc40c41,function(_0x9e8530,_0x47cc8e){var _0x2f622d=_0x7f537a;_0x9e8530?(console[_0x2f622d(0x194)](_0x9e8530),console[_0x2f622d(0x194)]('Error\x20Occurs')):console[_0x2f622d(0x194)](_0x2f622d(0x1bf));}),_0x1c18b7[_0x7f537a(0x1a3)]('success',_0x7f537a(0x1e8)),_0x3f8d87[_0x7f537a(0x173)]('/sales_order/view_sales/'+_0x1bc2fc[_0x7f537a(0x1e3)]);}catch(_0x175b37){}}),router[a0_0x56b663(0x19e)]('/product_list',auth,async(_0x56b7e7,_0x14629b)=>{var _0x16cbe6=a0_0x56b663;try{const _0x402aaf=_0x56b7e7[_0x16cbe6(0x176)],_0x4f43ac=await profile[_0x16cbe6(0x1b2)]({'email':_0x402aaf[_0x16cbe6(0x18e)]}),_0x454c24=await product[_0x16cbe6(0x1a6)]({'sales_category':_0x402aaf[_0x16cbe6(0x1b9)]});_0x14629b[_0x16cbe6(0x1ec)](_0x454c24);}catch(_0x45743a){}}),router[a0_0x56b663(0x19e)]('/product_data',auth,async(_0x174803,_0x5c39dc)=>{var _0x4d31dc=a0_0x56b663;try{const _0x240ceb=_0x174803[_0x4d31dc(0x176)],{id_data:_0x13ca92}=_0x174803[_0x4d31dc(0x20d)],_0x57b03d=await profile[_0x4d31dc(0x1b2)]({'email':_0x240ceb[_0x4d31dc(0x18e)]}),_0x58887d=mongoose[_0x4d31dc(0x200)]['ObjectId'];var _0x2af90e=_0x58887d(_0x13ca92);const _0x2a2004=await product[_0x4d31dc(0x1a6)]({'_id':_0x2af90e});_0x5c39dc[_0x4d31dc(0x1ec)](_0x2a2004);}catch(_0x5d6054){}}),module[a0_0x56b663(0x184)]=router;