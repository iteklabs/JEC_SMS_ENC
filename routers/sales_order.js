function a0_0x50c0(_0x4ee362,_0x22c956){var _0x45891d=a0_0x4589();return a0_0x50c0=function(_0x50c078,_0x65507c){_0x50c078=_0x50c078-0xde;var _0x30bfbc=_0x45891d[_0x50c078];return _0x30bfbc;},a0_0x50c0(_0x4ee362,_0x22c956);}var a0_0x27e3f6=a0_0x50c0;(function(_0x3c3e88,_0x3036cf){var _0x4ac00e=a0_0x50c0,_0x1ff874=_0x3c3e88();while(!![]){try{var _0x12b61e=parseInt(_0x4ac00e(0x168))/0x1+parseInt(_0x4ac00e(0x12e))/0x2+-parseInt(_0x4ac00e(0x120))/0x3+-parseInt(_0x4ac00e(0xfb))/0x4+parseInt(_0x4ac00e(0x176))/0x5*(-parseInt(_0x4ac00e(0x175))/0x6)+-parseInt(_0x4ac00e(0x15b))/0x7*(parseInt(_0x4ac00e(0x10d))/0x8)+parseInt(_0x4ac00e(0xea))/0x9*(parseInt(_0x4ac00e(0x138))/0xa);if(_0x12b61e===_0x3036cf)break;else _0x1ff874['push'](_0x1ff874['shift']());}catch(_0x2f11ea){_0x1ff874['push'](_0x1ff874['shift']());}}}(a0_0x4589,0x1ea10));const express=require(a0_0x27e3f6(0x132)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x27e3f6(0xe7)),auth=require(a0_0x27e3f6(0x14f)),users=require(a0_0x27e3f6(0x170)),excelJS=require(a0_0x27e3f6(0x15e)),xlsx=require(a0_0x27e3f6(0x10a)),mongoose=require(a0_0x27e3f6(0x15d)),{ObjectId}=require('mongodb'),nodemailer=require(a0_0x27e3f6(0x146));function a0_0x4589(){var _0x872b3c=['Logo.png','<br><br><br>','toString','name','language','<span>\x20Request\x20ID:\x20<b>','exports','wms_account_id','403917ELNtwX','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','$head_staff_info','primary_code','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','<!DOCTYPE\x20html>','findOne','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','$accounting_account_id','<span>\x20Dear\x20<b>','view_sales_order','head_staff_info','</body></html>','wms_data','213532MppVur','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','English\x20(US)','\x22>Change\x20Status</a>','express','://','date','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','$invoice','add_sales_order','207690VzsDmH','string','secondary_unit','ObjectId','product_code','staffs','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','/upload/','errors','dicount_price_adjust','Spanish','isFG','product_id','price','nodemailer','all_sales_order','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','<br><br>','user','$sale_product','</table>','getPrimUnitNo','<h5>\x20JEC\x20SMS\x20</h5>','../middleware/auth','logo','Hindi','accounting_account_id','French','render','$accounting_account_confirm','dicount_price','flash','<hr\x20class=\x22my-3\x22>','$JD','/view_sales/:id','5803NpAPcO','<span>\x20Request\x20Date:\x20<b>','mongoose','exceljs','product_list','Types','/sales_order/view_sales/','image','findById','<tr>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','/product_data','81331LvXnvV','$member.id_member','valueOf','</thead>','save','Arabic\x20(ae)','tmpisFG','Error\x20Occurs','../public/language/languages.json','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','log','$date','Chinese','714gSZwLZ','2345DyBVHD','conversion_unit','</head><body>','<div>','German','sttaff_id','protocol','unit','$account_data','$sale_product.quantity','<h2>\x20JEC\x20SMS\x20</h2>','Sales\x20Order\x20is\x20ongoing','prod_code','post','email','../models/all_models','</b></span>\x20<br><br>','/add_sales','207ggEklH','get','product_name','find','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','<span>\x20Requested\x20By:\x20<b>','aggregate','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','prod_name','</b></span>\x20<br>','Arabic','English','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','<div\x20style=\x22text-align:\x20center;\x22>','prod_cat','forEach','</tr>','583776XZorSc','port','$customer','head_id_staff_id','createTransport','$head_id_staff','$member','headers','discount','invoice','redirect','_id','no_per_unit','totalPrice','quantity','xlsx','sendMail','$_id','1968bjjmUY','password','success','</td>','true','body','conversion_data','Portuguese\x20(BR)','map','</div>','adjustment_discount'];a0_0x4589=function(){return _0x872b3c;};return a0_0x4589();}router['get']('/',auth,async(_0x4cfb85,_0x7e73aa)=>{var _0x499884=a0_0x27e3f6;try{const _0x36a614=await master_shop[_0x499884(0xed)](),_0x2947b7=_0x4cfb85[_0x499884(0x14a)],_0x100de2=await profile[_0x499884(0x126)]({'email':_0x2947b7[_0x499884(0xe6)]}),_0x537646=await staff['findOne']({'email':_0x2947b7[_0x499884(0xe6)]}),_0x135278=await sales_order[_0x499884(0xf0)]([{'$match':{'sales_staff_id':_0x537646['_id'][_0x499884(0x16a)]()}},{'$unwind':_0x499884(0x14b)},{'$group':{'_id':_0x499884(0x10c),'invoice':{'$first':_0x499884(0x136)},'customer':{'$first':_0x499884(0xfd)},'date':{'$first':_0x499884(0x173)},'JD':{'$first':_0x499884(0x159)},'accounting_account_confirm':{'$first':_0x499884(0x155)},'wms_account_confirm':{'$first':'$wms_account_confirm'},'totalQTY':{'$sum':_0x499884(0xe1)}}}]);if(_0x36a614[0x0][_0x499884(0x11c)]==_0x499884(0x130))var _0x112d0a=users[_0x499884(0xf5)];else{if(_0x36a614[0x0]['language']==_0x499884(0x151))var _0x112d0a=users['Hindi'];else{if(_0x36a614[0x0]['language']==_0x499884(0x17a))var _0x112d0a=users[_0x499884(0x17a)];else{if(_0x36a614[0x0]['language']==_0x499884(0x142))var _0x112d0a=users['Spanish'];else{if(_0x36a614[0x0][_0x499884(0x11c)]==_0x499884(0x153))var _0x112d0a=users[_0x499884(0x153)];else{if(_0x36a614[0x0][_0x499884(0x11c)]=='Portuguese\x20(BR)')var _0x112d0a=users['Portuguese'];else{if(_0x36a614[0x0]['language']==_0x499884(0x174))var _0x112d0a=users[_0x499884(0x174)];else{if(_0x36a614[0x0][_0x499884(0x11c)]==_0x499884(0x16d))var _0x112d0a=users['Arabic'];}}}}}}}_0x7e73aa[_0x499884(0x154)](_0x499884(0x147),{'success':_0x4cfb85[_0x499884(0x157)]('success'),'errors':_0x4cfb85[_0x499884(0x157)](_0x499884(0x140)),'master_shop':_0x36a614,'profile':_0x100de2,'role':_0x2947b7,'language':_0x112d0a,'product_list':_0x537646[_0x499884(0x15f)],'sales_mine':_0x135278,'staff_arr':_0x537646});}catch(_0x2fef85){console['log'](_0x2fef85);}}),router[a0_0x27e3f6(0xeb)](a0_0x27e3f6(0xe9),auth,async(_0x5b6a43,_0x38d32e)=>{var _0x22564d=a0_0x27e3f6;try{const _0x42fe4f=await master_shop[_0x22564d(0xed)](),_0x5cf7f9=_0x5b6a43[_0x22564d(0x14a)],_0x513272=await profile[_0x22564d(0x126)]({'email':_0x5cf7f9[_0x22564d(0xe6)]}),_0x12bd38=await staff[_0x22564d(0x126)]({'email':_0x5cf7f9[_0x22564d(0xe6)]}),_0x18f578=await customer['find']({'agent_id':_0x12bd38['_id']});if(_0x42fe4f[0x0][_0x22564d(0x11c)]=='English\x20(US)')var _0x43ac27=users['English'];else{if(_0x42fe4f[0x0]['language']==_0x22564d(0x151))var _0x43ac27=users[_0x22564d(0x151)];else{if(_0x42fe4f[0x0][_0x22564d(0x11c)]=='German')var _0x43ac27=users[_0x22564d(0x17a)];else{if(_0x42fe4f[0x0]['language']==_0x22564d(0x142))var _0x43ac27=users[_0x22564d(0x142)];else{if(_0x42fe4f[0x0][_0x22564d(0x11c)]==_0x22564d(0x153))var _0x43ac27=users['French'];else{if(_0x42fe4f[0x0][_0x22564d(0x11c)]==_0x22564d(0x114))var _0x43ac27=users['Portuguese'];else{if(_0x42fe4f[0x0]['language']==_0x22564d(0x174))var _0x43ac27=users[_0x22564d(0x174)];else{if(_0x42fe4f[0x0]['language']==_0x22564d(0x16d))var _0x43ac27=users[_0x22564d(0xf4)];}}}}}}}_0x38d32e[_0x22564d(0x154)](_0x22564d(0x137),{'success':_0x5b6a43[_0x22564d(0x157)](_0x22564d(0x10f)),'errors':_0x5b6a43[_0x22564d(0x157)]('errors'),'master_shop':_0x42fe4f,'profile':_0x513272,'role':_0x5cf7f9,'language':_0x43ac27,'customer':_0x18f578,'staff_arr':_0x12bd38});}catch(_0x12bb99){console['log'](_0x12bb99);}}),router['get'](a0_0x27e3f6(0x15a),auth,async(_0x1c9623,_0x1f8dbd)=>{var _0x1108d5=a0_0x27e3f6;try{const _0x5a5475=await master_shop[_0x1108d5(0xed)](),_0x4d4e06=_0x1c9623['user'],_0x223239=await profile[_0x1108d5(0x126)]({'email':_0x4d4e06[_0x1108d5(0xe6)]}),_0x58883b=await staff['findOne']({'email':_0x4d4e06['email']}),_0x1200f9=await customer[_0x1108d5(0xed)]({'agent_id':_0x58883b['_id']}),_0xb7c156=mongoose[_0x1108d5(0x160)][_0x1108d5(0x13b)],_0x2ff8f5=_0x1c9623['params']['id'],_0x34fcfa=await sales_order[_0x1108d5(0x163)](_0x2ff8f5),_0x7a06e=await sales_order[_0x1108d5(0xf0)]([{'$match':{'_id':_0xb7c156(_0x2ff8f5)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x1108d5(0x128)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':'staffs','localField':_0x1108d5(0x152),'foreignField':_0x1108d5(0x106),'as':'account_data'}},{'$unwind':_0x1108d5(0xe0)},{'$lookup':{'from':'staffs','localField':_0x1108d5(0x11f),'foreignField':_0x1108d5(0x106),'as':_0x1108d5(0x12d)}},{'$unwind':{'path':'$wms_data','preserveNullAndEmptyArrays':!![]}}]);if(_0x5a5475[0x0][_0x1108d5(0x11c)]==_0x1108d5(0x130))var _0x47edae=users[_0x1108d5(0xf5)];else{if(_0x5a5475[0x0][_0x1108d5(0x11c)]==_0x1108d5(0x151))var _0x47edae=users[_0x1108d5(0x151)];else{if(_0x5a5475[0x0][_0x1108d5(0x11c)]==_0x1108d5(0x17a))var _0x47edae=users[_0x1108d5(0x17a)];else{if(_0x5a5475[0x0][_0x1108d5(0x11c)]==_0x1108d5(0x142))var _0x47edae=users[_0x1108d5(0x142)];else{if(_0x5a5475[0x0][_0x1108d5(0x11c)]==_0x1108d5(0x153))var _0x47edae=users[_0x1108d5(0x153)];else{if(_0x5a5475[0x0][_0x1108d5(0x11c)]==_0x1108d5(0x114))var _0x47edae=users['Portuguese'];else{if(_0x5a5475[0x0][_0x1108d5(0x11c)]==_0x1108d5(0x174))var _0x47edae=users[_0x1108d5(0x174)];else{if(_0x5a5475[0x0][_0x1108d5(0x11c)]=='Arabic\x20(ae)')var _0x47edae=users['Arabic'];}}}}}}}_0x1f8dbd[_0x1108d5(0x154)](_0x1108d5(0x12a),{'success':_0x1c9623[_0x1108d5(0x157)](_0x1108d5(0x10f)),'errors':_0x1c9623['flash'](_0x1108d5(0x140)),'master_shop':_0x5a5475,'profile':_0x223239,'role':_0x4d4e06,'language':_0x47edae,'customer':_0x1200f9,'sales_sa':_0x34fcfa,'approvers':_0x7a06e[0x0],'staff_arr':_0x58883b});}catch(_0x21daa4){console[_0x1108d5(0x172)](_0x21daa4);}}),router[a0_0x27e3f6(0xe5)]('/add_sales',auth,async(_0x23458e,_0x51e4c9)=>{var _0x10cbbf=a0_0x27e3f6;try{const {customer:_0x3de55d,date:_0x397700,prod_code:_0x5cfe19,note:_0x350eb6,paid_status:_0x3a6c85,JD:_0x3029a5,po_number:_0x16baf2,desire_date:_0x1396d4}=_0x23458e[_0x10cbbf(0x112)];if(typeof _0x5cfe19==_0x10cbbf(0x139))var _0x20e1fb=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0xe4)]],_0x493c60=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0xf2)]],_0x59cab9=[_0x23458e['body'][_0x10cbbf(0x123)]],_0x1ce165=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x109)]],_0x57e5a5=[_0x23458e[_0x10cbbf(0x112)]['unit']],_0x53bf3b=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x144)]],_0x226ed0=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x145)]],_0x21475b=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x108)]],_0x4cecb4=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x156)]],_0x2e0a33=[_0x23458e[_0x10cbbf(0x112)]['tmpisFG']],_0x2205ae=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x141)]],_0x2c6e68=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x107)]],_0x2ced2d=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x14d)]],_0xb2bad1=[_0x23458e[_0x10cbbf(0x112)]['prod_cat']],_0x2343b5=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x13a)]],_0x5b7aad=[_0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x177)]];else var _0x20e1fb=[..._0x23458e['body'][_0x10cbbf(0xe4)]],_0x493c60=[..._0x23458e['body']['prod_name']],_0x59cab9=[..._0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x123)]],_0x1ce165=[..._0x23458e['body'][_0x10cbbf(0x109)]],_0x57e5a5=[..._0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0xdf)]],_0x53bf3b=[..._0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x144)]],_0x226ed0=[..._0x23458e['body'][_0x10cbbf(0x145)]],_0x21475b=[..._0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x108)]],_0x4cecb4=[..._0x23458e[_0x10cbbf(0x112)]['dicount_price']],_0x2e0a33=[..._0x23458e['body'][_0x10cbbf(0x16e)]],_0x2205ae=[..._0x23458e['body'][_0x10cbbf(0x141)]],_0x2c6e68=[..._0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x107)]],_0x2ced2d=[..._0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x14d)]],_0xb2bad1=[..._0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0xf8)]],_0x2343b5=[..._0x23458e[_0x10cbbf(0x112)][_0x10cbbf(0x13a)]],_0x5b7aad=[..._0x23458e[_0x10cbbf(0x112)]['conversion_unit']];const _0x75ff38=_0x20e1fb[_0x10cbbf(0x115)](_0x448f52=>{return _0x448f52={'product_code':_0x448f52};});_0x493c60[_0x10cbbf(0xf9)]((_0x54ef93,_0x4e523c)=>{var _0x273f86=_0x10cbbf;_0x75ff38[_0x4e523c][_0x273f86(0xec)]=_0x54ef93;}),_0x59cab9['forEach']((_0x2ad6bd,_0x4b7496)=>{var _0x3db996=_0x10cbbf;_0x75ff38[_0x4b7496][_0x3db996(0x123)]=_0x2ad6bd;}),_0x1ce165[_0x10cbbf(0xf9)]((_0x17c858,_0x188040)=>{var _0x1b057f=_0x10cbbf;_0x75ff38[_0x188040][_0x1b057f(0x109)]=_0x17c858;}),_0x57e5a5['forEach']((_0x47ba77,_0x33bbe4)=>{var _0x371158=_0x10cbbf;_0x75ff38[_0x33bbe4][_0x371158(0xdf)]=_0x47ba77;}),_0x53bf3b[_0x10cbbf(0xf9)]((_0x3df9f2,_0x1802aa)=>{_0x75ff38[_0x1802aa]['product_id']=_0x3df9f2;}),_0x2205ae['forEach']((_0x55101d,_0x24e827)=>{var _0x2b63d7=_0x10cbbf;_0x75ff38[_0x24e827][_0x2b63d7(0x117)]=_0x55101d;}),_0x226ed0['forEach']((_0x16e76c,_0x1cce95)=>{var _0x200525=_0x10cbbf;_0x75ff38[_0x1cce95][_0x200525(0x145)]=_0x16e76c;}),_0x21475b[_0x10cbbf(0xf9)]((_0xc03b7e,_0x57d956)=>{_0x75ff38[_0x57d956]['totalprice']=_0xc03b7e;}),_0x4cecb4[_0x10cbbf(0xf9)]((_0x381dab,_0x39ccb1)=>{var _0x30e4a3=_0x10cbbf;_0x75ff38[_0x39ccb1][_0x30e4a3(0x103)]=_0x381dab;}),_0x2e0a33[_0x10cbbf(0xf9)]((_0x3d1d75,_0x76621e)=>{var _0x4dc047=_0x10cbbf;_0x75ff38[_0x76621e][_0x4dc047(0x143)]=_0x3d1d75;}),_0x2343b5[_0x10cbbf(0xf9)]((_0x88d2b0,_0x13ec63)=>{_0x75ff38[_0x13ec63]['secondary_unit']=_0x88d2b0;}),_0x2ced2d[_0x10cbbf(0xf9)]((_0x58db7a,_0x27c7c0)=>{_0x75ff38[_0x27c7c0]['real_qty_unit_val']=_0x58db7a;}),_0xb2bad1['forEach']((_0x2934b4,_0x516d17)=>{var _0x1f6be9=_0x10cbbf;_0x75ff38[_0x516d17][_0x1f6be9(0xf8)]=_0x2934b4;}),_0x5b7aad[_0x10cbbf(0xf9)]((_0x36911a,_0x3b56fd)=>{var _0xd3cc74=_0x10cbbf;_0x75ff38[_0x3b56fd][_0xd3cc74(0x113)]=_0x36911a;}),_0x2c6e68[_0x10cbbf(0xf9)]((_0x44c997,_0x5a3591)=>{var _0x5ddbf1=_0x10cbbf;_0x75ff38[_0x5a3591][_0x5ddbf1(0x107)]=_0x44c997;});const _0x191e9c=await approver_acct[_0x10cbbf(0xf0)]([{'$unwind':_0x10cbbf(0x101)},{'$match':{'member.id_member':_0x23458e[_0x10cbbf(0x14a)][_0x10cbbf(0x17b)]}},{'$group':{'_id':{'id_member':_0x10cbbf(0x169),'name':'$member.name'},'head_id_staff':{'$first':_0x10cbbf(0x100)}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':'$head_id_staff'}}},{'$lookup':{'from':_0x10cbbf(0x13d),'localField':_0x10cbbf(0xfe),'foreignField':_0x10cbbf(0x106),'as':_0x10cbbf(0x12b)}},{'$unwind':_0x10cbbf(0x122)}]),_0x1dc8f9=new invoice_for_sales_order();await _0x1dc8f9[_0x10cbbf(0x16c)]();const _0x26a68c=_0x23458e[_0x10cbbf(0x14a)],_0x491bf7=await staff['findOne']({'email':_0x26a68c[_0x10cbbf(0xe6)]}),_0x554f47=new sales_order({'invoice':_0x1dc8f9['invoice_init'][_0x10cbbf(0x11a)]()['padStart'](0x8,'0'),'customer':_0x3de55d,'date':_0x397700,'sale_product':_0x75ff38,'note':_0x350eb6,'sales_staff_id':_0x491bf7[_0x10cbbf(0x106)]['valueOf'](),'JD':_0x3029a5,'accounting_account_id':_0x191e9c[0x0]['head_id_staff'],'po_number':_0x16baf2,'desired_delivery':_0x1396d4,'wms_account_confirm':_0x10cbbf(0x111),'accounting_account_confirm':_0x10cbbf(0x111)}),_0x1ca230=await _0x554f47[_0x10cbbf(0x16c)]();var _0x3fb3f6=_0x1ca230['sale_product'],_0x26659b='',_0x3eddc2,_0x2bb009=0x0;for(_0x3eddc2 in _0x3fb3f6){_0x26659b+=_0x10cbbf(0x164)+_0x10cbbf(0x13e)+_0x3fb3f6[_0x3eddc2]['product_name']+_0x10cbbf(0x110)+_0x10cbbf(0x13e)+_0x3fb3f6[_0x3eddc2][_0x10cbbf(0x13c)]+'</td>'+_0x10cbbf(0x13e)+_0x3fb3f6[_0x3eddc2]['quantity']+'</td>'+_0x10cbbf(0x13e)+_0x3fb3f6[_0x3eddc2][_0x10cbbf(0xdf)]+_0x10cbbf(0x110)+_0x10cbbf(0xfa),_0x2bb009+=parseInt(_0x3fb3f6[_0x3eddc2][_0x10cbbf(0x109)]);}const _0x2ea37e=await master_shop[_0x10cbbf(0xed)](),_0x42fd57=await email_settings[_0x10cbbf(0x126)]();let _0x5acfeb=nodemailer[_0x10cbbf(0xff)]({'port':Number(_0x42fd57[_0x10cbbf(0xfc)]),'secure':![],'auth':{'user':_0x42fd57['email'],'pass':_0x42fd57[_0x10cbbf(0x10e)]}});const _0x41f1c7=_0x23458e[_0x10cbbf(0xde)]+_0x10cbbf(0x133)+_0x23458e[_0x10cbbf(0x102)]['host'];let _0xabb246={'from':_0x42fd57[_0x10cbbf(0xe6)],'to':_0x191e9c[0x0][_0x10cbbf(0x12b)][_0x10cbbf(0xe6)]+';christian.villamer@jakagroup.com','subject':'Approval\x20for\x20'+_0x1ca230['invoice'],'attachments':[{'filename':_0x10cbbf(0x118),'path':__dirname+'/../public'+_0x10cbbf(0x13f)+_0x2ea37e[0x0][_0x10cbbf(0x162)],'cid':_0x10cbbf(0x150)}],'html':_0x10cbbf(0x125)+'<html><head><title></title>'+_0x10cbbf(0x135)+_0x10cbbf(0x178)+_0x10cbbf(0x179)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x10cbbf(0x179)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+_0x10cbbf(0x179)+_0x10cbbf(0xe2)+_0x10cbbf(0x116)+_0x10cbbf(0x116)+_0x10cbbf(0x158)+_0x10cbbf(0x179)+_0x10cbbf(0x129)+_0x191e9c[0x0][_0x10cbbf(0x12b)][_0x10cbbf(0x11b)]+'</b>,\x20</span><br>'+'</div>'+'<div>'+_0x10cbbf(0x148)+'</div>'+_0x10cbbf(0x179)+_0x10cbbf(0x11d)+_0x1ca230[_0x10cbbf(0x104)]+_0x10cbbf(0xf3)+_0x10cbbf(0xef)+_0x491bf7[_0x10cbbf(0x11b)]+_0x10cbbf(0xf3)+_0x10cbbf(0x15c)+_0x1ca230[_0x10cbbf(0x134)]+_0x10cbbf(0xe8)+'</div>'+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x10cbbf(0x124)+'<tr>'+_0x10cbbf(0x127)+_0x10cbbf(0x165)+_0x10cbbf(0xf6)+_0x10cbbf(0x121)+'</tr>'+_0x10cbbf(0x16b)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x26659b+'\x20'+'</tbody>'+_0x10cbbf(0x14c)+_0x10cbbf(0x179)+_0x10cbbf(0x166)+_0x2bb009+_0x10cbbf(0xf1)+'<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>'+_0x10cbbf(0xee)+_0x10cbbf(0x119)+_0x10cbbf(0x116)+_0x10cbbf(0xf7)+_0x10cbbf(0x171)+_0x41f1c7+'/accounting_approval/'+_0x1ca230[_0x10cbbf(0x106)]+_0x10cbbf(0x131)+_0x10cbbf(0x149)+_0x10cbbf(0x116)+_0x10cbbf(0x179)+'<strong>\x20Regards\x20</strong>'+_0x10cbbf(0x14e)+'</div>'+'</div>'+_0x10cbbf(0x12f)+_0x10cbbf(0x12c)};_0x5acfeb[_0x10cbbf(0x10b)](_0xabb246,function(_0x29ff24,_0x4c02cf){var _0x18ef5c=_0x10cbbf;_0x29ff24?(console[_0x18ef5c(0x172)](_0x29ff24),console[_0x18ef5c(0x172)](_0x18ef5c(0x16f))):console['log']('Email\x20sent\x20successfully');}),_0x23458e[_0x10cbbf(0x157)](_0x10cbbf(0x10f),_0x10cbbf(0xe3)),_0x51e4c9[_0x10cbbf(0x105)](_0x10cbbf(0x161)+_0x1ca230['_id']);}catch(_0x650b12){}}),router['post']('/product_list',auth,async(_0x3fcb97,_0x546522)=>{var _0xba309a=a0_0x27e3f6;try{const _0x44aadf=_0x3fcb97[_0xba309a(0x14a)],_0x282338=await profile[_0xba309a(0x126)]({'email':_0x44aadf[_0xba309a(0xe6)]}),_0x4b284c=await product['find']({'sales_category':_0x44aadf['sales_category']});_0x546522['json'](_0x4b284c);}catch(_0x40aa83){}}),router[a0_0x27e3f6(0xe5)](a0_0x27e3f6(0x167),auth,async(_0x5ec81d,_0xb7c3af)=>{var _0x1e74c7=a0_0x27e3f6;try{const _0x4abf49=_0x5ec81d['user'],{id_data:_0x19ae6c}=_0x5ec81d['body'],_0x421db0=await profile[_0x1e74c7(0x126)]({'email':_0x4abf49[_0x1e74c7(0xe6)]}),_0x4b8ae0=mongoose['Types'][_0x1e74c7(0x13b)];var _0x251759=_0x4b8ae0(_0x19ae6c);const _0x221edd=await product['find']({'_id':_0x251759});_0xb7c3af['json'](_0x221edd);}catch(_0x935dbc){}}),module[a0_0x27e3f6(0x11e)]=router;