var a0_0x1a2c68=a0_0x1dd4;(function(_0x139aef,_0x6300ba){var _0xeb2407=a0_0x1dd4,_0x434cdb=_0x139aef();while(!![]){try{var _0x4142c4=-parseInt(_0xeb2407(0x143))/0x1*(-parseInt(_0xeb2407(0x109))/0x2)+parseInt(_0xeb2407(0x133))/0x3*(-parseInt(_0xeb2407(0x16b))/0x4)+-parseInt(_0xeb2407(0xf3))/0x5+parseInt(_0xeb2407(0x15e))/0x6+-parseInt(_0xeb2407(0x14a))/0x7+-parseInt(_0xeb2407(0xea))/0x8*(parseInt(_0xeb2407(0x168))/0x9)+parseInt(_0xeb2407(0x11c))/0xa;if(_0x4142c4===_0x6300ba)break;else _0x434cdb['push'](_0x434cdb['shift']());}catch(_0x4ed7d2){_0x434cdb['push'](_0x434cdb['shift']());}}}(a0_0x4fc0,0x46a99));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x1a2c68(0xd9)),auth=require(a0_0x1a2c68(0x138)),users=require('../public/language/languages.json'),excelJS=require(a0_0x1a2c68(0x14b)),xlsx=require(a0_0x1a2c68(0x14e)),mongoose=require(a0_0x1a2c68(0x115)),{ObjectId}=require(a0_0x1a2c68(0x10b)),nodemailer=require(a0_0x1a2c68(0xde));function a0_0x4fc0(){var _0x6a2fd6=['<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','quantity','German','forEach','</td>','real_qty_unit_val','../models/all_models','$accounting_account_id','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','prod_name','product_name','nodemailer','primary_code','email','<br><br>','</thead>','errors','Portuguese','success','exports','<hr\x20class=\x22my-3\x22>','$member.id_member','view_sales_order','2852008XFArHc','port','/product_data','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','log','save','<span>\x20Dear\x20<b>','discount','$wms_data','394030StONym','<span>\x20Request\x20ID:\x20<b>','aggregate','post','getPrimUnitNo','<div\x20style=\x22text-align:\x20center;\x22>','body','string','add_sales_order','date','get','/add_sales','protocol','$JD','invoice_init','language','Types','Chinese','$head_staff_info','isFG','no_per_unit','findById','1074964dGLulY','\x22>Change\x20Status</a>','mongodb','image','<tr>','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','ObjectId','Portuguese\x20(BR)','<div>','$sale_product','$member','Error\x20Occurs','mongoose','://','toString','/product_list','Spanish','json','<table\x20style=\x22width:\x20100%\x20!important;\x22>','3344310zyPpNo','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','<br><br><br>','$customer','sales_category','headers','</b>,\x20</span><br>','all_sales_order','map','staffs','name','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','Hindi','valueOf','<h5>\x20JEC\x20SMS\x20</h5>','logo','head_id_staff_id','</b></span>\x20<br>','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','$accounting_account_confirm','user','<strong>\x20Regards\x20</strong>','account_data','208113nWEWaU','price','</head><body>','English','$account_data','../middleware/auth','tmpisFG','Arabic','<h2>\x20JEC\x20SMS\x20</h2>','Arabic\x20(ae)','prod_cat','$head_id_staff','French','<span>\x20Requested\x20By:\x20<b>',';christian.villamer@jakagroup.com','render','1KRuapY','true','secondary_unit','invoice','accounting_account_id','<html><head><title></title>','$date','3955518OXwJuz','exceljs','$invoice','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','xlsx','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','padStart','unit','prod_code','totalPrice','Approval\x20for\x20','params','conversion_unit','English\x20(US)','wms_data','dicount_price','product_id','wms_account_id','</div>','head_id_staff','2923632EOZVXZ','adjustment_discount','</table>','product_code','find','dicount_price_adjust','findOne','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','/view_sales/:id','createTransport','9mpkEQr','/upload/','</tr>','4mhgowq','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','/accounting_approval/','redirect','head_staff_info','sale_product','_id','$wms_account_id','flash'];a0_0x4fc0=function(){return _0x6a2fd6;};return a0_0x4fc0();}function a0_0x1dd4(_0x35586b,_0x278b4a){var _0x4fc011=a0_0x4fc0();return a0_0x1dd4=function(_0x1dd4b1,_0x2a0178){_0x1dd4b1=_0x1dd4b1-0xd5;var _0x30742f=_0x4fc011[_0x1dd4b1];return _0x30742f;},a0_0x1dd4(_0x35586b,_0x278b4a);}router[a0_0x1a2c68(0xfd)]('/',auth,async(_0x346f4c,_0x2a0d28)=>{var _0x216acf=a0_0x1a2c68;try{const _0x5f4909=await master_shop['find'](),_0x1504dc=_0x346f4c[_0x216acf(0x130)],_0x5e7e8e=await profile[_0x216acf(0x164)]({'email':_0x1504dc['email']}),_0x429ba7=await staff['findOne']({'email':_0x1504dc[_0x216acf(0xe0)]}),_0x7f0c16=await sales_order['aggregate']([{'$match':{'sales_staff_id':_0x429ba7['_id']['valueOf']()}},{'$unwind':_0x216acf(0x112)},{'$group':{'_id':'$_id','invoice':{'$first':_0x216acf(0x14c)},'customer':{'$first':_0x216acf(0x11f)},'date':{'$first':_0x216acf(0x149)},'JD':{'$first':_0x216acf(0x100)},'accounting_account_confirm':{'$first':_0x216acf(0x12f)},'wms_account_confirm':{'$first':'$wms_account_confirm'},'totalQTY':{'$sum':'$sale_product.quantity'}}}]);if(_0x5f4909[0x0]['language']==_0x216acf(0x157))var _0x5755a8=users[_0x216acf(0x136)];else{if(_0x5f4909[0x0]['language']==_0x216acf(0x128))var _0x5755a8=users[_0x216acf(0x128)];else{if(_0x5f4909[0x0][_0x216acf(0x102)]==_0x216acf(0xd5))var _0x5755a8=users[_0x216acf(0xd5)];else{if(_0x5f4909[0x0]['language']==_0x216acf(0x119))var _0x5755a8=users['Spanish'];else{if(_0x5f4909[0x0][_0x216acf(0x102)]==_0x216acf(0x13f))var _0x5755a8=users[_0x216acf(0x13f)];else{if(_0x5f4909[0x0][_0x216acf(0x102)]==_0x216acf(0x110))var _0x5755a8=users[_0x216acf(0xe4)];else{if(_0x5f4909[0x0]['language']=='Chinese')var _0x5755a8=users[_0x216acf(0x104)];else{if(_0x5f4909[0x0][_0x216acf(0x102)]=='Arabic\x20(ae)')var _0x5755a8=users[_0x216acf(0x13a)];}}}}}}}_0x2a0d28[_0x216acf(0x142)](_0x216acf(0x123),{'success':_0x346f4c[_0x216acf(0x173)](_0x216acf(0xe5)),'errors':_0x346f4c['flash'](_0x216acf(0xe3)),'master_shop':_0x5f4909,'profile':_0x5e7e8e,'role':_0x1504dc,'language':_0x5755a8,'product_list':_0x429ba7['product_list'],'sales_mine':_0x7f0c16,'staff_arr':_0x429ba7});}catch(_0xa1fb78){console['log'](_0xa1fb78);}}),router['get'](a0_0x1a2c68(0xfe),auth,async(_0x37f4a1,_0x8d40c3)=>{var _0x41103c=a0_0x1a2c68;try{const _0x153a55=await master_shop['find'](),_0x256f77=_0x37f4a1[_0x41103c(0x130)],_0x5c7b45=await profile[_0x41103c(0x164)]({'email':_0x256f77[_0x41103c(0xe0)]}),_0x2ea99f=await staff[_0x41103c(0x164)]({'email':_0x256f77['email']}),_0x371219=await customer[_0x41103c(0x162)]({'agent_id':_0x2ea99f[_0x41103c(0x171)]});if(_0x153a55[0x0][_0x41103c(0x102)]==_0x41103c(0x157))var _0x51ff44=users[_0x41103c(0x136)];else{if(_0x153a55[0x0]['language']==_0x41103c(0x128))var _0x51ff44=users['Hindi'];else{if(_0x153a55[0x0][_0x41103c(0x102)]==_0x41103c(0xd5))var _0x51ff44=users[_0x41103c(0xd5)];else{if(_0x153a55[0x0]['language']==_0x41103c(0x119))var _0x51ff44=users[_0x41103c(0x119)];else{if(_0x153a55[0x0][_0x41103c(0x102)]==_0x41103c(0x13f))var _0x51ff44=users[_0x41103c(0x13f)];else{if(_0x153a55[0x0]['language']=='Portuguese\x20(BR)')var _0x51ff44=users[_0x41103c(0xe4)];else{if(_0x153a55[0x0][_0x41103c(0x102)]==_0x41103c(0x104))var _0x51ff44=users[_0x41103c(0x104)];else{if(_0x153a55[0x0]['language']==_0x41103c(0x13c))var _0x51ff44=users['Arabic'];}}}}}}}_0x8d40c3['render'](_0x41103c(0xfb),{'success':_0x37f4a1[_0x41103c(0x173)](_0x41103c(0xe5)),'errors':_0x37f4a1[_0x41103c(0x173)]('errors'),'master_shop':_0x153a55,'profile':_0x5c7b45,'role':_0x256f77,'language':_0x51ff44,'customer':_0x371219,'staff_arr':_0x2ea99f});}catch(_0x15daf3){console[_0x41103c(0xee)](_0x15daf3);}}),router[a0_0x1a2c68(0xfd)](a0_0x1a2c68(0x166),auth,async(_0x5996f9,_0x3cb796)=>{var _0x3b7464=a0_0x1a2c68;try{const _0x2a8970=await master_shop[_0x3b7464(0x162)](),_0x206a1d=_0x5996f9[_0x3b7464(0x130)],_0xdceec=await profile[_0x3b7464(0x164)]({'email':_0x206a1d['email']}),_0x3bb35b=await staff[_0x3b7464(0x164)]({'email':_0x206a1d[_0x3b7464(0xe0)]}),_0x3b095a=await customer[_0x3b7464(0x162)]({'agent_id':_0x3bb35b[_0x3b7464(0x171)]}),_0xf1ca9e=mongoose[_0x3b7464(0x103)][_0x3b7464(0x10f)],_0x45c3f5=_0x5996f9[_0x3b7464(0x155)]['id'],_0x8c1504=await sales_order[_0x3b7464(0x108)](_0x45c3f5),_0x53b0c9=await sales_order['aggregate']([{'$match':{'_id':_0xf1ca9e(_0x45c3f5)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x3b7464(0xda)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x3b7464(0x172)}}},{'$lookup':{'from':'staffs','localField':_0x3b7464(0x147),'foreignField':_0x3b7464(0x171),'as':_0x3b7464(0x132)}},{'$unwind':_0x3b7464(0x137)},{'$lookup':{'from':_0x3b7464(0x125),'localField':_0x3b7464(0x15b),'foreignField':_0x3b7464(0x171),'as':_0x3b7464(0x158)}},{'$unwind':{'path':_0x3b7464(0xf2),'preserveNullAndEmptyArrays':!![]}}]);if(_0x2a8970[0x0][_0x3b7464(0x102)]==_0x3b7464(0x157))var _0xb24450=users[_0x3b7464(0x136)];else{if(_0x2a8970[0x0]['language']==_0x3b7464(0x128))var _0xb24450=users[_0x3b7464(0x128)];else{if(_0x2a8970[0x0]['language']=='German')var _0xb24450=users[_0x3b7464(0xd5)];else{if(_0x2a8970[0x0]['language']==_0x3b7464(0x119))var _0xb24450=users[_0x3b7464(0x119)];else{if(_0x2a8970[0x0][_0x3b7464(0x102)]=='French')var _0xb24450=users['French'];else{if(_0x2a8970[0x0]['language']==_0x3b7464(0x110))var _0xb24450=users['Portuguese'];else{if(_0x2a8970[0x0][_0x3b7464(0x102)]==_0x3b7464(0x104))var _0xb24450=users[_0x3b7464(0x104)];else{if(_0x2a8970[0x0][_0x3b7464(0x102)]==_0x3b7464(0x13c))var _0xb24450=users['Arabic'];}}}}}}}_0x3cb796[_0x3b7464(0x142)](_0x3b7464(0xe9),{'success':_0x5996f9['flash']('success'),'errors':_0x5996f9['flash'](_0x3b7464(0xe3)),'master_shop':_0x2a8970,'profile':_0xdceec,'role':_0x206a1d,'language':_0xb24450,'customer':_0x3b095a,'sales_sa':_0x8c1504,'approvers':_0x53b0c9[0x0],'staff_arr':_0x3bb35b});}catch(_0x40efeb){console[_0x3b7464(0xee)](_0x40efeb);}}),router[a0_0x1a2c68(0xf6)](a0_0x1a2c68(0xfe),auth,async(_0x1ccf94,_0x37c4b2)=>{var _0x4ddc35=a0_0x1a2c68;try{const {customer:_0xc64b1f,date:_0x1d1e10,prod_code:_0x24cfd9,note:_0x5a7905,paid_status:_0x43d718,JD:_0x2990c3,po_number:_0xfd0141,desire_date:_0x57487d}=_0x1ccf94['body'];if(typeof _0x24cfd9==_0x4ddc35(0xfa))var _0x10419e=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x152)]],_0x2853e3=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0xdc)]],_0xf41777=[_0x1ccf94['body'][_0x4ddc35(0xdf)]],_0x4a0b8b=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x175)]],_0x1747f=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x151)]],_0x28ff89=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x15a)]],_0x144de9=[_0x1ccf94['body']['price']],_0x70064c=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x153)]],_0x188d61=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x159)]],_0x5a21ef=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x139)]],_0x14aee7=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x163)]],_0x55a48c=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x107)]],_0x5d39c1=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0xf7)]],_0x196a34=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x13d)]],_0x1fcb5c=[_0x1ccf94['body']['secondary_unit']],_0x34b717=[_0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x156)]];else var _0x10419e=[..._0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x152)]],_0x2853e3=[..._0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0xdc)]],_0xf41777=[..._0x1ccf94['body'][_0x4ddc35(0xdf)]],_0x4a0b8b=[..._0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x175)]],_0x1747f=[..._0x1ccf94['body'][_0x4ddc35(0x151)]],_0x28ff89=[..._0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x15a)]],_0x144de9=[..._0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0x134)]],_0x70064c=[..._0x1ccf94['body'][_0x4ddc35(0x153)]],_0x188d61=[..._0x1ccf94[_0x4ddc35(0xf9)]['dicount_price']],_0x5a21ef=[..._0x1ccf94['body'][_0x4ddc35(0x139)]],_0x14aee7=[..._0x1ccf94[_0x4ddc35(0xf9)]['dicount_price_adjust']],_0x55a48c=[..._0x1ccf94[_0x4ddc35(0xf9)]['no_per_unit']],_0x5d39c1=[..._0x1ccf94[_0x4ddc35(0xf9)][_0x4ddc35(0xf7)]],_0x196a34=[..._0x1ccf94[_0x4ddc35(0xf9)]['prod_cat']],_0x1fcb5c=[..._0x1ccf94[_0x4ddc35(0xf9)]['secondary_unit']],_0x34b717=[..._0x1ccf94['body']['conversion_unit']];const _0x2a314a=_0x10419e[_0x4ddc35(0x124)](_0x514f0b=>{return _0x514f0b={'product_code':_0x514f0b};});_0x2853e3[_0x4ddc35(0xd6)]((_0x59342d,_0x3d7633)=>{var _0x16eaf4=_0x4ddc35;_0x2a314a[_0x3d7633][_0x16eaf4(0xdd)]=_0x59342d;}),_0xf41777[_0x4ddc35(0xd6)]((_0x541a25,_0x1a5553)=>{var _0xe6fe1c=_0x4ddc35;_0x2a314a[_0x1a5553][_0xe6fe1c(0xdf)]=_0x541a25;}),_0x4a0b8b[_0x4ddc35(0xd6)]((_0x239156,_0x220608)=>{_0x2a314a[_0x220608]['quantity']=_0x239156;}),_0x1747f['forEach']((_0x31bf8f,_0x47ed6f)=>{_0x2a314a[_0x47ed6f]['unit']=_0x31bf8f;}),_0x28ff89[_0x4ddc35(0xd6)]((_0x9a889e,_0x34d256)=>{var _0x38a390=_0x4ddc35;_0x2a314a[_0x34d256][_0x38a390(0x15a)]=_0x9a889e;}),_0x14aee7[_0x4ddc35(0xd6)]((_0x4b80f7,_0x180c33)=>{var _0x2611b3=_0x4ddc35;_0x2a314a[_0x180c33][_0x2611b3(0x15f)]=_0x4b80f7;}),_0x144de9[_0x4ddc35(0xd6)]((_0x471e73,_0x58b506)=>{var _0x221c03=_0x4ddc35;_0x2a314a[_0x58b506][_0x221c03(0x134)]=_0x471e73;}),_0x70064c[_0x4ddc35(0xd6)]((_0x5c0754,_0x406de2)=>{_0x2a314a[_0x406de2]['totalprice']=_0x5c0754;}),_0x188d61[_0x4ddc35(0xd6)]((_0xeb360c,_0x5e9256)=>{var _0x1f60f1=_0x4ddc35;_0x2a314a[_0x5e9256][_0x1f60f1(0xf1)]=_0xeb360c;}),_0x5a21ef[_0x4ddc35(0xd6)]((_0x2d5051,_0x3c821b)=>{var _0x27ec7d=_0x4ddc35;_0x2a314a[_0x3c821b][_0x27ec7d(0x106)]=_0x2d5051;}),_0x1fcb5c[_0x4ddc35(0xd6)]((_0x431768,_0x408c45)=>{var _0x2c2dfc=_0x4ddc35;_0x2a314a[_0x408c45][_0x2c2dfc(0x145)]=_0x431768;}),_0x5d39c1[_0x4ddc35(0xd6)]((_0x37a9d5,_0x37198b)=>{var _0xd3f336=_0x4ddc35;_0x2a314a[_0x37198b][_0xd3f336(0xd8)]=_0x37a9d5;}),_0x196a34[_0x4ddc35(0xd6)]((_0x14efcd,_0x2ce938)=>{var _0x1df720=_0x4ddc35;_0x2a314a[_0x2ce938][_0x1df720(0x13d)]=_0x14efcd;}),_0x34b717[_0x4ddc35(0xd6)]((_0x543c7e,_0x4d5362)=>{_0x2a314a[_0x4d5362]['conversion_data']=_0x543c7e;}),_0x55a48c[_0x4ddc35(0xd6)]((_0x385275,_0x436156)=>{var _0x51d7a2=_0x4ddc35;_0x2a314a[_0x436156][_0x51d7a2(0x107)]=_0x385275;});const _0x18ce9f=await approver_acct[_0x4ddc35(0xf5)]([{'$unwind':_0x4ddc35(0x113)},{'$match':{'member.id_member':_0x1ccf94[_0x4ddc35(0x130)]['sttaff_id']}},{'$group':{'_id':{'id_member':_0x4ddc35(0xe8),'name':'$member.name'},'head_id_staff':{'$first':_0x4ddc35(0x13e)}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x4ddc35(0x13e)}}},{'$lookup':{'from':_0x4ddc35(0x125),'localField':_0x4ddc35(0x12c),'foreignField':_0x4ddc35(0x171),'as':_0x4ddc35(0x16f)}},{'$unwind':_0x4ddc35(0x105)}]),_0x21a701=new invoice_for_sales_order();await _0x21a701['save']();const _0x10a30d=_0x1ccf94[_0x4ddc35(0x130)],_0x5178c3=await staff[_0x4ddc35(0x164)]({'email':_0x10a30d[_0x4ddc35(0xe0)]}),_0x2d4db7=new sales_order({'invoice':_0x21a701[_0x4ddc35(0x101)][_0x4ddc35(0x117)]()[_0x4ddc35(0x150)](0x8,'0'),'customer':_0xc64b1f,'date':_0x1d1e10,'sale_product':_0x2a314a,'note':_0x5a7905,'sales_staff_id':_0x5178c3[_0x4ddc35(0x171)][_0x4ddc35(0x129)](),'JD':_0x2990c3,'accounting_account_id':_0x18ce9f[0x0][_0x4ddc35(0x15d)],'po_number':_0xfd0141,'desired_delivery':_0x57487d,'wms_account_confirm':_0x4ddc35(0x144),'accounting_account_confirm':'true'}),_0x1a0264=await _0x2d4db7[_0x4ddc35(0xef)]();var _0x559364=_0x1a0264[_0x4ddc35(0x170)],_0x898b33='',_0x5bc60a,_0x4c16fa=0x0;for(_0x5bc60a in _0x559364){_0x898b33+='<tr>'+_0x4ddc35(0x14d)+_0x559364[_0x5bc60a][_0x4ddc35(0xdd)]+_0x4ddc35(0xd7)+_0x4ddc35(0x14d)+_0x559364[_0x5bc60a][_0x4ddc35(0x161)]+_0x4ddc35(0xd7)+_0x4ddc35(0x14d)+_0x559364[_0x5bc60a][_0x4ddc35(0x175)]+'</td>'+_0x4ddc35(0x14d)+_0x559364[_0x5bc60a]['unit']+_0x4ddc35(0xd7)+_0x4ddc35(0x16a),_0x4c16fa+=parseInt(_0x559364[_0x5bc60a][_0x4ddc35(0x175)]);}const _0x218229=await master_shop[_0x4ddc35(0x162)](),_0x5500a4=await email_settings['findOne']();let _0x2670d0=nodemailer[_0x4ddc35(0x167)]({'port':Number(_0x5500a4[_0x4ddc35(0xeb)]),'secure':![],'auth':{'user':_0x5500a4[_0x4ddc35(0xe0)],'pass':_0x5500a4['password']}});const _0x164f07=_0x1ccf94[_0x4ddc35(0xff)]+_0x4ddc35(0x116)+_0x1ccf94[_0x4ddc35(0x121)]['host'];let _0x5e072d={'from':_0x5500a4[_0x4ddc35(0xe0)],'to':_0x18ce9f[0x0][_0x4ddc35(0x16f)]['email']+_0x4ddc35(0x141),'subject':_0x4ddc35(0x154)+_0x1a0264[_0x4ddc35(0x146)],'attachments':[{'filename':'Logo.png','path':__dirname+'/../public'+_0x4ddc35(0x169)+_0x218229[0x0][_0x4ddc35(0x10c)],'cid':_0x4ddc35(0x12b)}],'html':'<!DOCTYPE\x20html>'+_0x4ddc35(0x148)+_0x4ddc35(0x16c)+_0x4ddc35(0x135)+_0x4ddc35(0x111)+_0x4ddc35(0x165)+'<div>'+_0x4ddc35(0x14f)+_0x4ddc35(0x15c)+'<div>'+_0x4ddc35(0x13b)+'</div>'+_0x4ddc35(0x15c)+_0x4ddc35(0xe7)+'<div>'+_0x4ddc35(0xf0)+_0x18ce9f[0x0][_0x4ddc35(0x16f)][_0x4ddc35(0x126)]+_0x4ddc35(0x122)+_0x4ddc35(0x15c)+_0x4ddc35(0x111)+_0x4ddc35(0xed)+_0x4ddc35(0x15c)+_0x4ddc35(0x111)+_0x4ddc35(0xf4)+_0x1a0264['invoice']+_0x4ddc35(0x12d)+_0x4ddc35(0x140)+_0x5178c3[_0x4ddc35(0x126)]+_0x4ddc35(0x12d)+'<span>\x20Request\x20Date:\x20<b>'+_0x1a0264[_0x4ddc35(0xfc)]+'</b></span>\x20<br><br>'+_0x4ddc35(0x15c)+_0x4ddc35(0x11b)+_0x4ddc35(0x11d)+_0x4ddc35(0x10d)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+_0x4ddc35(0x174)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x4ddc35(0x16a)+_0x4ddc35(0xe2)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x898b33+'\x20'+'</tbody>'+_0x4ddc35(0x160)+'<div>'+_0x4ddc35(0x12e)+_0x4c16fa+_0x4ddc35(0x127)+_0x4ddc35(0x10e)+'<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>'+_0x4ddc35(0x11e)+_0x4ddc35(0x15c)+_0x4ddc35(0xf8)+_0x4ddc35(0xdb)+_0x164f07+_0x4ddc35(0x16d)+_0x1a0264[_0x4ddc35(0x171)]+_0x4ddc35(0x10a)+_0x4ddc35(0xe1)+'</div>'+'<div>'+_0x4ddc35(0x131)+_0x4ddc35(0x12a)+_0x4ddc35(0x15c)+_0x4ddc35(0x15c)+'<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>'+'</body></html>'};_0x2670d0['sendMail'](_0x5e072d,function(_0x3e6979,_0x4c2f05){var _0x5315ec=_0x4ddc35;_0x3e6979?(console[_0x5315ec(0xee)](_0x3e6979),console['log'](_0x5315ec(0x114))):console[_0x5315ec(0xee)]('Email\x20sent\x20successfully');}),_0x1ccf94[_0x4ddc35(0x173)](_0x4ddc35(0xe5),'Sales\x20Order\x20is\x20ongoing'),_0x37c4b2[_0x4ddc35(0x16e)]('/sales_order/view_sales/'+_0x1a0264['_id']);}catch(_0x2f83e4){}}),router[a0_0x1a2c68(0xf6)](a0_0x1a2c68(0x118),auth,async(_0x4242ae,_0x49c559)=>{var _0x507a56=a0_0x1a2c68;try{const _0x7edf50=_0x4242ae[_0x507a56(0x130)],_0x58dce5=await profile['findOne']({'email':_0x7edf50['email']}),_0x1a04d4=await product[_0x507a56(0x162)]({'sales_category':_0x7edf50[_0x507a56(0x120)]});_0x49c559['json'](_0x1a04d4);}catch(_0x27958a){}}),router[a0_0x1a2c68(0xf6)](a0_0x1a2c68(0xec),auth,async(_0x3e81f2,_0x200217)=>{var _0x557131=a0_0x1a2c68;try{const _0x14cddf=_0x3e81f2['user'],{id_data:_0x4cb1f9}=_0x3e81f2[_0x557131(0xf9)],_0x1d161b=await profile[_0x557131(0x164)]({'email':_0x14cddf['email']}),_0x5bc73e=mongoose['Types'][_0x557131(0x10f)];var _0x84b052=_0x5bc73e(_0x4cb1f9);const _0x186669=await product['find']({'_id':_0x84b052});_0x200217[_0x557131(0x11a)](_0x186669);}catch(_0x1756d8){}}),module[a0_0x1a2c68(0xe6)]=router;