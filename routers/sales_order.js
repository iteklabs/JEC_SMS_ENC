var a0_0x199aaf=a0_0x103c;(function(_0x35e278,_0x1417e1){var _0x2d1d99=a0_0x103c,_0x19e037=_0x35e278();while(!![]){try{var _0x5f0c05=parseInt(_0x2d1d99(0x170))/0x1*(parseInt(_0x2d1d99(0x158))/0x2)+parseInt(_0x2d1d99(0x183))/0x3*(parseInt(_0x2d1d99(0x107))/0x4)+parseInt(_0x2d1d99(0x176))/0x5*(parseInt(_0x2d1d99(0x113))/0x6)+-parseInt(_0x2d1d99(0x189))/0x7+-parseInt(_0x2d1d99(0x116))/0x8*(-parseInt(_0x2d1d99(0x110))/0x9)+parseInt(_0x2d1d99(0x111))/0xa*(parseInt(_0x2d1d99(0x1a3))/0xb)+-parseInt(_0x2d1d99(0x172))/0xc;if(_0x5f0c05===_0x1417e1)break;else _0x19e037['push'](_0x19e037['shift']());}catch(_0x20dc81){_0x19e037['push'](_0x19e037['shift']());}}}(a0_0x364c,0xcccb4));function a0_0x103c(_0x5ccf2d,_0x2b640d){var _0x364c97=a0_0x364c();return a0_0x103c=function(_0x103cea,_0xaac26){_0x103cea=_0x103cea-0x101;var _0x404894=_0x364c97[_0x103cea];return _0x404894;},a0_0x103c(_0x5ccf2d,_0x2b640d);}const express=require(a0_0x199aaf(0x18c)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x199aaf(0x160)),auth=require(a0_0x199aaf(0x18f)),users=require(a0_0x199aaf(0x165)),excelJS=require(a0_0x199aaf(0x12e)),xlsx=require(a0_0x199aaf(0x15c)),mongoose=require('mongoose'),{ObjectId}=require(a0_0x199aaf(0x1a0)),nodemailer=require(a0_0x199aaf(0x194));function a0_0x364c(){var _0x6ad882=['flash','_id','English\x20(US)','conversion_data','Logo.png','product_code','redirect','tmpisFG','errors','adjustment_discount','mongodb','Approval\x20for\x20','ObjectId','737yUucxi','$head_id_staff','prod_code','Portuguese','forEach','<div>','totalPrice','English','body','2620IHELzG','find','<div\x20style=\x22text-align:\x20center;\x22>','prod_cat','prod_name','password','<!DOCTYPE\x20html>','</tr>','findOne','2899665NJvvan','67960noqQIa','Arabic\x20(ae)','6427248lEZElZ','logo','<tr>','8uFTCnX','log','/view_sales/:id','findById','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','dicount_price','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','<strong>\x20Regards\x20</strong>','\x22>Change\x20Status</a>','date','<h5>\x20JEC\x20SMS\x20</h5>','isFG','$_id','/accounting_approval/','product_name','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','<br><br>','<h2>\x20JEC\x20SMS\x20</h2>','staffs','secondary_unit','$accounting_account_confirm','<tbody\x20style=\x22text-align:\x20center;\x22>','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','getPrimUnitNo','exceljs','json','render','German','product_list','wms_account_id','valueOf','</b></span>\x20<br>','</b></span>\x20<br><br>','headers','Spanish','totalprice','</table>','/product_list','</thead>','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','map','price','no_per_unit','unit','Error\x20Occurs','$accounting_account_id','language','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','</head><body>','host','$date','/add_sales','quantity','email','<html><head><title></title>','success','createTransport','aggregate','<hr\x20class=\x22my-3\x22>','Types','$wms_account_id','name','invoice','post','dicount_price_adjust','conversion_unit','10XUjbGU','user','toString','French','xlsx','primary_code','/../public','<span>\x20Request\x20Date:\x20<b>','../models/all_models','$JD','/product_data','$account_data','view_sales_order','../public/language/languages.json','Sales\x20Order\x20is\x20ongoing','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','sttaff_id','$sale_product','://','</b>,\x20</span><br>','image','port','save','true','116082RiXUpC','Portuguese\x20(BR)','31718328xODakD','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','<span>\x20Dear\x20<b>','discount','5rmPBdm','string','Hindi','</div>','$member.id_member','get','real_qty_unit_val','</body></html>','head_staff_info','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','all_sales_order','account_data','sales_category','6669kOMWfN','params','$wms_account_confirm','$head_staff_info','Chinese','protocol','2822190wFokhk','<table\x20style=\x22width:\x20100%\x20!important;\x22>','$customer','express','add_sales_order','product_id','../middleware/auth','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','</td>','Arabic','nodemailer','padStart'];a0_0x364c=function(){return _0x6ad882;};return a0_0x364c();}router[a0_0x199aaf(0x17b)]('/',auth,async(_0xd0ba04,_0x21c4f7)=>{var _0x24acc5=a0_0x199aaf;try{const _0x46b406=await master_shop['find'](),_0x51b9b4=_0xd0ba04[_0x24acc5(0x159)],_0x54650e=await profile[_0x24acc5(0x10f)]({'email':_0x51b9b4[_0x24acc5(0x14b)]}),_0x35c71f=await staff[_0x24acc5(0x10f)]({'email':_0x51b9b4[_0x24acc5(0x14b)]}),_0x24c8fc=await sales_order[_0x24acc5(0x14f)]([{'$match':{'sales_staff_id':_0x35c71f[_0x24acc5(0x197)][_0x24acc5(0x134)]()}},{'$unwind':_0x24acc5(0x169)},{'$group':{'_id':_0x24acc5(0x122),'invoice':{'$first':'$invoice'},'customer':{'$first':_0x24acc5(0x18b)},'date':{'$first':_0x24acc5(0x148)},'JD':{'$first':_0x24acc5(0x161)},'accounting_account_confirm':{'$first':_0x24acc5(0x12a)},'wms_account_confirm':{'$first':_0x24acc5(0x185)},'totalQTY':{'$sum':'$sale_product.quantity'}}}]);if(_0x46b406[0x0][_0x24acc5(0x144)]=='English\x20(US)')var _0x4cbffe=users[_0x24acc5(0x105)];else{if(_0x46b406[0x0][_0x24acc5(0x144)]==_0x24acc5(0x178))var _0x4cbffe=users[_0x24acc5(0x178)];else{if(_0x46b406[0x0][_0x24acc5(0x144)]==_0x24acc5(0x131))var _0x4cbffe=users[_0x24acc5(0x131)];else{if(_0x46b406[0x0][_0x24acc5(0x144)]==_0x24acc5(0x138))var _0x4cbffe=users[_0x24acc5(0x138)];else{if(_0x46b406[0x0][_0x24acc5(0x144)]==_0x24acc5(0x15b))var _0x4cbffe=users['French'];else{if(_0x46b406[0x0][_0x24acc5(0x144)]=='Portuguese\x20(BR)')var _0x4cbffe=users['Portuguese'];else{if(_0x46b406[0x0][_0x24acc5(0x144)]==_0x24acc5(0x187))var _0x4cbffe=users['Chinese'];else{if(_0x46b406[0x0]['language']==_0x24acc5(0x112))var _0x4cbffe=users[_0x24acc5(0x193)];}}}}}}}_0x21c4f7[_0x24acc5(0x130)](_0x24acc5(0x180),{'success':_0xd0ba04[_0x24acc5(0x196)](_0x24acc5(0x14d)),'errors':_0xd0ba04[_0x24acc5(0x196)](_0x24acc5(0x19e)),'master_shop':_0x46b406,'profile':_0x54650e,'role':_0x51b9b4,'language':_0x4cbffe,'product_list':_0x35c71f[_0x24acc5(0x132)],'sales_mine':_0x24c8fc,'staff_arr':_0x35c71f});}catch(_0x52dbab){console['log'](_0x52dbab);}}),router[a0_0x199aaf(0x17b)](a0_0x199aaf(0x149),auth,async(_0x4325cd,_0x3f0204)=>{var _0x3fe99d=a0_0x199aaf;try{const _0x9e0fd1=await master_shop[_0x3fe99d(0x108)](),_0x591390=_0x4325cd[_0x3fe99d(0x159)],_0x2e3213=await profile[_0x3fe99d(0x10f)]({'email':_0x591390[_0x3fe99d(0x14b)]}),_0x17ab5a=await staff[_0x3fe99d(0x10f)]({'email':_0x591390[_0x3fe99d(0x14b)]}),_0x193ebf=await customer['find']({'agent_id':_0x17ab5a[_0x3fe99d(0x197)]});if(_0x9e0fd1[0x0][_0x3fe99d(0x144)]==_0x3fe99d(0x198))var _0x1fa735=users[_0x3fe99d(0x105)];else{if(_0x9e0fd1[0x0][_0x3fe99d(0x144)]=='Hindi')var _0x1fa735=users['Hindi'];else{if(_0x9e0fd1[0x0][_0x3fe99d(0x144)]==_0x3fe99d(0x131))var _0x1fa735=users[_0x3fe99d(0x131)];else{if(_0x9e0fd1[0x0][_0x3fe99d(0x144)]==_0x3fe99d(0x138))var _0x1fa735=users[_0x3fe99d(0x138)];else{if(_0x9e0fd1[0x0][_0x3fe99d(0x144)]==_0x3fe99d(0x15b))var _0x1fa735=users['French'];else{if(_0x9e0fd1[0x0][_0x3fe99d(0x144)]=='Portuguese\x20(BR)')var _0x1fa735=users[_0x3fe99d(0x101)];else{if(_0x9e0fd1[0x0]['language']==_0x3fe99d(0x187))var _0x1fa735=users['Chinese'];else{if(_0x9e0fd1[0x0]['language']=='Arabic\x20(ae)')var _0x1fa735=users[_0x3fe99d(0x193)];}}}}}}}_0x3f0204[_0x3fe99d(0x130)](_0x3fe99d(0x18d),{'success':_0x4325cd[_0x3fe99d(0x196)]('success'),'errors':_0x4325cd[_0x3fe99d(0x196)]('errors'),'master_shop':_0x9e0fd1,'profile':_0x2e3213,'role':_0x591390,'language':_0x1fa735,'customer':_0x193ebf,'staff_arr':_0x17ab5a});}catch(_0x34c53c){console[_0x3fe99d(0x117)](_0x34c53c);}}),router[a0_0x199aaf(0x17b)](a0_0x199aaf(0x118),auth,async(_0x163190,_0x34d7ed)=>{var _0x356bfc=a0_0x199aaf;try{const _0x491525=await master_shop[_0x356bfc(0x108)](),_0x3254e4=_0x163190[_0x356bfc(0x159)],_0x100906=await profile['findOne']({'email':_0x3254e4[_0x356bfc(0x14b)]}),_0x3f5746=await staff['findOne']({'email':_0x3254e4[_0x356bfc(0x14b)]}),_0x34123c=await customer[_0x356bfc(0x108)]({'agent_id':_0x3f5746[_0x356bfc(0x197)]}),_0x3cd330=mongoose['Types'][_0x356bfc(0x1a2)],_0x885d58=_0x163190[_0x356bfc(0x184)]['id'],_0x1917ce=await sales_order[_0x356bfc(0x119)](_0x885d58),_0x283a79=await sales_order[_0x356bfc(0x14f)]([{'$match':{'_id':_0x3cd330(_0x885d58)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x356bfc(0x143)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x356bfc(0x152)}}},{'$lookup':{'from':_0x356bfc(0x128),'localField':'accounting_account_id','foreignField':_0x356bfc(0x197),'as':_0x356bfc(0x181)}},{'$unwind':_0x356bfc(0x163)},{'$lookup':{'from':_0x356bfc(0x128),'localField':_0x356bfc(0x133),'foreignField':_0x356bfc(0x197),'as':'wms_data'}},{'$unwind':{'path':'$wms_data','preserveNullAndEmptyArrays':!![]}}]);if(_0x491525[0x0][_0x356bfc(0x144)]==_0x356bfc(0x198))var _0x24d9b4=users[_0x356bfc(0x105)];else{if(_0x491525[0x0][_0x356bfc(0x144)]==_0x356bfc(0x178))var _0x24d9b4=users[_0x356bfc(0x178)];else{if(_0x491525[0x0]['language']==_0x356bfc(0x131))var _0x24d9b4=users[_0x356bfc(0x131)];else{if(_0x491525[0x0][_0x356bfc(0x144)]==_0x356bfc(0x138))var _0x24d9b4=users[_0x356bfc(0x138)];else{if(_0x491525[0x0][_0x356bfc(0x144)]=='French')var _0x24d9b4=users[_0x356bfc(0x15b)];else{if(_0x491525[0x0][_0x356bfc(0x144)]==_0x356bfc(0x171))var _0x24d9b4=users[_0x356bfc(0x101)];else{if(_0x491525[0x0]['language']=='Chinese')var _0x24d9b4=users[_0x356bfc(0x187)];else{if(_0x491525[0x0][_0x356bfc(0x144)]=='Arabic\x20(ae)')var _0x24d9b4=users[_0x356bfc(0x193)];}}}}}}}_0x34d7ed[_0x356bfc(0x130)](_0x356bfc(0x164),{'success':_0x163190[_0x356bfc(0x196)]('success'),'errors':_0x163190[_0x356bfc(0x196)](_0x356bfc(0x19e)),'master_shop':_0x491525,'profile':_0x100906,'role':_0x3254e4,'language':_0x24d9b4,'customer':_0x34123c,'sales_sa':_0x1917ce,'approvers':_0x283a79[0x0],'staff_arr':_0x3f5746});}catch(_0x15a58f){console['log'](_0x15a58f);}}),router[a0_0x199aaf(0x155)](a0_0x199aaf(0x149),auth,async(_0x20f11d,_0x3ff1c4)=>{var _0x721ad3=a0_0x199aaf;try{const {customer:_0x212543,date:_0x45a2f3,prod_code:_0x41901e,note:_0x221728,paid_status:_0x4f6c07,JD:_0x24c9c9,po_number:_0x29d789,desire_date:_0x4b857a}=_0x20f11d[_0x721ad3(0x106)];if(typeof _0x41901e==_0x721ad3(0x177))var _0x55c19d=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x1a5)]],_0x1ede57=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x10b)]],_0x4259b6=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x15d)]],_0x583e74=[_0x20f11d[_0x721ad3(0x106)]['quantity']],_0x3c0270=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x141)]],_0x3e8933=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x18e)]],_0x228989=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x13f)]],_0x39a2b3=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x104)]],_0x14ae69=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x11b)]],_0x57df37=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x19d)]],_0x1fa3d5=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x156)]],_0x9c9e68=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x140)]],_0x5e51c1=[_0x20f11d['body'][_0x721ad3(0x12d)]],_0x233840=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x10a)]],_0x25b691=[_0x20f11d[_0x721ad3(0x106)]['secondary_unit']],_0x834e8a=[_0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x157)]];else var _0x55c19d=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x1a5)]],_0x1ede57=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x10b)]],_0x4259b6=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x15d)]],_0x583e74=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x14a)]],_0x3c0270=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x141)]],_0x3e8933=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x18e)]],_0x228989=[..._0x20f11d[_0x721ad3(0x106)]['price']],_0x39a2b3=[..._0x20f11d['body']['totalPrice']],_0x14ae69=[..._0x20f11d[_0x721ad3(0x106)]['dicount_price']],_0x57df37=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x19d)]],_0x1fa3d5=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x156)]],_0x9c9e68=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x140)]],_0x5e51c1=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x12d)]],_0x233840=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x10a)]],_0x25b691=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x129)]],_0x834e8a=[..._0x20f11d[_0x721ad3(0x106)][_0x721ad3(0x157)]];const _0x229714=_0x55c19d[_0x721ad3(0x13e)](_0x566ae2=>{return _0x566ae2={'product_code':_0x566ae2};});_0x1ede57['forEach']((_0x46d4cf,_0x471bc8)=>{var _0x37537b=_0x721ad3;_0x229714[_0x471bc8][_0x37537b(0x124)]=_0x46d4cf;}),_0x4259b6[_0x721ad3(0x102)]((_0xd4fc3f,_0x433372)=>{var _0x77f26c=_0x721ad3;_0x229714[_0x433372][_0x77f26c(0x15d)]=_0xd4fc3f;}),_0x583e74[_0x721ad3(0x102)]((_0x5ecc38,_0xca1ddc)=>{var _0x30e63b=_0x721ad3;_0x229714[_0xca1ddc][_0x30e63b(0x14a)]=_0x5ecc38;}),_0x3c0270[_0x721ad3(0x102)]((_0x218ee1,_0x4ebdb3)=>{var _0x2cb32a=_0x721ad3;_0x229714[_0x4ebdb3][_0x2cb32a(0x141)]=_0x218ee1;}),_0x3e8933['forEach']((_0x2205c6,_0x7a0fb)=>{_0x229714[_0x7a0fb]['product_id']=_0x2205c6;}),_0x1fa3d5[_0x721ad3(0x102)]((_0x2dd0e8,_0x62da16)=>{var _0x4e73a8=_0x721ad3;_0x229714[_0x62da16][_0x4e73a8(0x19f)]=_0x2dd0e8;}),_0x228989[_0x721ad3(0x102)]((_0x337b83,_0x3aaac1)=>{var _0x4154ad=_0x721ad3;_0x229714[_0x3aaac1][_0x4154ad(0x13f)]=_0x337b83;}),_0x39a2b3[_0x721ad3(0x102)]((_0x6e5fc0,_0x58f04e)=>{var _0x5c999f=_0x721ad3;_0x229714[_0x58f04e][_0x5c999f(0x139)]=_0x6e5fc0;}),_0x14ae69[_0x721ad3(0x102)]((_0x215c22,_0x194385)=>{var _0x4ca851=_0x721ad3;_0x229714[_0x194385][_0x4ca851(0x175)]=_0x215c22;}),_0x57df37['forEach']((_0x1e3505,_0x1d49af)=>{var _0x1e4ee6=_0x721ad3;_0x229714[_0x1d49af][_0x1e4ee6(0x121)]=_0x1e3505;}),_0x25b691[_0x721ad3(0x102)]((_0x2d0220,_0x3c4c73)=>{var _0x22bbdd=_0x721ad3;_0x229714[_0x3c4c73][_0x22bbdd(0x129)]=_0x2d0220;}),_0x5e51c1[_0x721ad3(0x102)]((_0x3b9d89,_0x4db914)=>{var _0x3cf6b2=_0x721ad3;_0x229714[_0x4db914][_0x3cf6b2(0x17c)]=_0x3b9d89;}),_0x233840['forEach']((_0x17155f,_0x234149)=>{var _0x37b870=_0x721ad3;_0x229714[_0x234149][_0x37b870(0x10a)]=_0x17155f;}),_0x834e8a[_0x721ad3(0x102)]((_0x3ab293,_0x5378ba)=>{var _0x12cf3f=_0x721ad3;_0x229714[_0x5378ba][_0x12cf3f(0x199)]=_0x3ab293;}),_0x9c9e68[_0x721ad3(0x102)]((_0x5adf03,_0x1ad58c)=>{var _0x217008=_0x721ad3;_0x229714[_0x1ad58c][_0x217008(0x140)]=_0x5adf03;});const _0x17ac99=await approver_acct[_0x721ad3(0x14f)]([{'$unwind':'$member'},{'$match':{'member.id_member':_0x20f11d[_0x721ad3(0x159)][_0x721ad3(0x168)]}},{'$group':{'_id':{'id_member':_0x721ad3(0x17a),'name':'$member.name'},'head_id_staff':{'$first':_0x721ad3(0x1a4)}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x721ad3(0x1a4)}}},{'$lookup':{'from':_0x721ad3(0x128),'localField':'head_id_staff_id','foreignField':_0x721ad3(0x197),'as':_0x721ad3(0x17e)}},{'$unwind':_0x721ad3(0x186)}]),_0x418b74=new invoice_for_sales_order();await _0x418b74['save']();const _0x4068a4=_0x20f11d[_0x721ad3(0x159)],_0x1a43e5=await staff[_0x721ad3(0x10f)]({'email':_0x4068a4[_0x721ad3(0x14b)]}),_0xcd62bd=new sales_order({'invoice':_0x418b74['invoice_init'][_0x721ad3(0x15a)]()[_0x721ad3(0x195)](0x8,'0'),'customer':_0x212543,'date':_0x45a2f3,'sale_product':_0x229714,'note':_0x221728,'sales_staff_id':_0x1a43e5[_0x721ad3(0x197)][_0x721ad3(0x134)](),'JD':_0x24c9c9,'accounting_account_id':_0x17ac99[0x0]['head_id_staff'],'po_number':_0x29d789,'desired_delivery':_0x4b857a,'wms_account_confirm':_0x721ad3(0x16f),'accounting_account_confirm':_0x721ad3(0x16f)}),_0x30b9ff=await _0xcd62bd[_0x721ad3(0x16e)]();var _0x110301=_0x30b9ff['sale_product'],_0x62e7b3='',_0x182843,_0x695315=0x0;for(_0x182843 in _0x110301){_0x62e7b3+=_0x721ad3(0x115)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x110301[_0x182843]['product_name']+_0x721ad3(0x192)+_0x721ad3(0x173)+_0x110301[_0x182843][_0x721ad3(0x19b)]+_0x721ad3(0x192)+_0x721ad3(0x173)+_0x110301[_0x182843][_0x721ad3(0x14a)]+'</td>'+_0x721ad3(0x173)+_0x110301[_0x182843][_0x721ad3(0x141)]+_0x721ad3(0x192)+_0x721ad3(0x10e),_0x695315+=parseInt(_0x110301[_0x182843][_0x721ad3(0x14a)]);}const _0x492006=await master_shop[_0x721ad3(0x108)](),_0x4ed52d=await email_settings['findOne']();let _0x5d2c8f=nodemailer[_0x721ad3(0x14e)]({'port':Number(_0x4ed52d[_0x721ad3(0x16d)]),'secure':![],'auth':{'user':_0x4ed52d['email'],'pass':_0x4ed52d[_0x721ad3(0x10c)]}});const _0x208d45=_0x20f11d[_0x721ad3(0x188)]+_0x721ad3(0x16a)+_0x20f11d[_0x721ad3(0x137)][_0x721ad3(0x147)];let _0x1e05a0={'from':_0x4ed52d[_0x721ad3(0x14b)],'to':_0x17ac99[0x0][_0x721ad3(0x17e)][_0x721ad3(0x14b)]+';christian.villamer@jakagroup.com','subject':_0x721ad3(0x1a1)+_0x30b9ff[_0x721ad3(0x154)],'attachments':[{'filename':_0x721ad3(0x19a),'path':__dirname+_0x721ad3(0x15e)+'/upload/'+_0x492006[0x0][_0x721ad3(0x16c)],'cid':_0x721ad3(0x114)}],'html':_0x721ad3(0x10d)+_0x721ad3(0x14c)+_0x721ad3(0x11c)+_0x721ad3(0x146)+_0x721ad3(0x103)+_0x721ad3(0x191)+_0x721ad3(0x103)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+_0x721ad3(0x103)+_0x721ad3(0x127)+_0x721ad3(0x179)+_0x721ad3(0x179)+_0x721ad3(0x150)+_0x721ad3(0x103)+_0x721ad3(0x174)+_0x17ac99[0x0]['head_staff_info'][_0x721ad3(0x153)]+_0x721ad3(0x16b)+_0x721ad3(0x179)+_0x721ad3(0x103)+_0x721ad3(0x11a)+'</div>'+'<div>'+'<span>\x20Request\x20ID:\x20<b>'+_0x30b9ff['invoice']+'</b></span>\x20<br>'+'<span>\x20Requested\x20By:\x20<b>'+_0x1a43e5[_0x721ad3(0x153)]+_0x721ad3(0x135)+_0x721ad3(0x15f)+_0x30b9ff[_0x721ad3(0x11f)]+_0x721ad3(0x136)+_0x721ad3(0x179)+_0x721ad3(0x18a)+_0x721ad3(0x17f)+_0x721ad3(0x115)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+_0x721ad3(0x145)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x721ad3(0x167)+_0x721ad3(0x10e)+_0x721ad3(0x13c)+_0x721ad3(0x12b)+'\x20'+_0x62e7b3+'\x20'+'</tbody>'+_0x721ad3(0x13a)+_0x721ad3(0x103)+_0x721ad3(0x12c)+_0x695315+_0x721ad3(0x125)+_0x721ad3(0x190)+'<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>'+'<br><br><br>'+_0x721ad3(0x179)+_0x721ad3(0x109)+_0x721ad3(0x13d)+_0x208d45+_0x721ad3(0x123)+_0x30b9ff[_0x721ad3(0x197)]+_0x721ad3(0x11e)+_0x721ad3(0x126)+_0x721ad3(0x179)+_0x721ad3(0x103)+_0x721ad3(0x11d)+_0x721ad3(0x120)+'</div>'+_0x721ad3(0x179)+'<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>'+_0x721ad3(0x17d)};_0x5d2c8f['sendMail'](_0x1e05a0,function(_0x1578df,_0x5f1317){var _0x31a280=_0x721ad3;_0x1578df?(console[_0x31a280(0x117)](_0x1578df),console['log'](_0x31a280(0x142))):console['log']('Email\x20sent\x20successfully');}),_0x20f11d['flash'](_0x721ad3(0x14d),_0x721ad3(0x166)),_0x3ff1c4[_0x721ad3(0x19c)]('/sales_order/view_sales/'+_0x30b9ff[_0x721ad3(0x197)]);}catch(_0x3f4a3c){}}),router[a0_0x199aaf(0x155)](a0_0x199aaf(0x13b),auth,async(_0x59dea0,_0x768201)=>{var _0x1f988a=a0_0x199aaf;try{const _0x1c1a6a=_0x59dea0[_0x1f988a(0x159)],_0x248c68=await profile[_0x1f988a(0x10f)]({'email':_0x1c1a6a[_0x1f988a(0x14b)]}),_0x119bf8=await product[_0x1f988a(0x108)]({'sales_category':_0x1c1a6a[_0x1f988a(0x182)]});_0x768201[_0x1f988a(0x12f)](_0x119bf8);}catch(_0x5bf5b2){}}),router[a0_0x199aaf(0x155)](a0_0x199aaf(0x162),auth,async(_0x10d54b,_0x403c2c)=>{var _0x3d06be=a0_0x199aaf;try{const _0x8b813c=_0x10d54b[_0x3d06be(0x159)],{id_data:_0x15f8e1}=_0x10d54b['body'],_0x5a9685=await profile[_0x3d06be(0x10f)]({'email':_0x8b813c[_0x3d06be(0x14b)]}),_0x342cd5=mongoose[_0x3d06be(0x151)][_0x3d06be(0x1a2)];var _0xaa7cb=_0x342cd5(_0x15f8e1);const _0x1d073c=await product[_0x3d06be(0x108)]({'_id':_0xaa7cb});_0x403c2c[_0x3d06be(0x12f)](_0x1d073c);}catch(_0x3b6e15){}}),module['exports']=router;