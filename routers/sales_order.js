function a0_0x487e(_0x261c83,_0x21073a){var _0x553c73=a0_0x553c();return a0_0x487e=function(_0x487ebb,_0xd8ae1e){_0x487ebb=_0x487ebb-0xb5;var _0x14eb1e=_0x553c73[_0x487ebb];return _0x14eb1e;},a0_0x487e(_0x261c83,_0x21073a);}var a0_0x147770=a0_0x487e;(function(_0x211eab,_0x3d5202){var _0x50fd82=a0_0x487e,_0x1dab11=_0x211eab();while(!![]){try{var _0x4cb770=parseInt(_0x50fd82(0xd5))/0x1+parseInt(_0x50fd82(0xba))/0x2+parseInt(_0x50fd82(0x11c))/0x3*(parseInt(_0x50fd82(0xb8))/0x4)+parseInt(_0x50fd82(0x111))/0x5+-parseInt(_0x50fd82(0xf8))/0x6*(-parseInt(_0x50fd82(0x14a))/0x7)+-parseInt(_0x50fd82(0x125))/0x8+parseInt(_0x50fd82(0xdd))/0x9*(-parseInt(_0x50fd82(0x132))/0xa);if(_0x4cb770===_0x3d5202)break;else _0x1dab11['push'](_0x1dab11['shift']());}catch(_0x2ebce9){_0x1dab11['push'](_0x1dab11['shift']());}}}(a0_0x553c,0xd832e));function a0_0x553c(){var _0x15e197=['language','</td>','totalprice','password','findOne','price',';christian.villamer@jakagroup.com','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','<tr>','Arabic\x20(ae)','prod_code','discount','../models/all_models','isFG','14351ASGGah','all_sales_order','params','secondary_unit','primary_code','$JD','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','save','18tehoom','sales_category','$member.name','sendMail','English\x20(US)','email','Sales\x20Order\x20is\x20ongoing','map','invoice','dicount_price_adjust','English','product_name','<table\x20style=\x22width:\x20100%\x20!important;\x22>','<strong>\x20Regards\x20</strong>','flash','_id','name','real_qty_unit_val','Hindi','add_sales_order','wms_account_id','$head_id_staff','prod_name','adjustment_discount','$member','/view_sales/:id','quantity','6isPajQ','</div>','<span>\x20Request\x20Date:\x20<b>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','prod_cat','<h2>\x20JEC\x20SMS\x20</h2>','<h5>\x20JEC\x20SMS\x20</h5>','\x22>Change\x20Status</a>','forEach','product_id','mongoose','sttaff_id','exports','<tbody\x20style=\x22text-align:\x20center;\x22>','$head_staff_info','<span>\x20Requested\x20By:\x20<b>','<span>\x20Dear\x20<b>','unit','$wms_account_confirm','totalPrice','dicount_price','</b>,\x20</span><br>','</body></html>','French','Error\x20Occurs','7727640JfdcLm','protocol','Arabic','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','find','<!DOCTYPE\x20html>','$date','$member.id_member','$wms_data','get','</table>','873561TbZSjA','Portuguese\x20(BR)','Types','$accounting_account_confirm','findById','product_list','getPrimUnitNo','/accounting_approval/','render','9303360XGIOmM','/product_data','$accounting_account_id','</b></span>\x20<br>','account_data','</thead>','ObjectId','sale_product','Logo.png','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','/../public','errors','$_id','11252210OSJnuy','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','invoice_init','date','body','headers','true','Chinese','log','head_id_staff','</tr>','json','logo','user','staffs','German','success','<br><br><br>','valueOf','/add_sales','tmpisFG','<div>','$invoice','Spanish','7677439RVqvhz','padStart','</b></span>\x20<br><br>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','toString','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','$wms_account_id','<br><br>','string','16piyxdl','no_per_unit','955016bcdMqt','Portuguese','Router','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','aggregate','head_staff_info','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','conversion_unit','post','mongodb','$sale_product.quantity','createTransport','</head><body>'];a0_0x553c=function(){return _0x15e197;};return a0_0x553c();}const express=require('express'),app=express(),router=express[a0_0x147770(0xbc)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x147770(0xd3)),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require('xlsx'),mongoose=require(a0_0x147770(0x102)),{ObjectId}=require(a0_0x147770(0xc3)),nodemailer=require('nodemailer');router['get']('/',auth,async(_0x54f05c,_0x363fb5)=>{var _0x1013a0=a0_0x147770;try{const _0x577a10=await master_shop[_0x1013a0(0x115)](),_0x5a098e=_0x54f05c[_0x1013a0(0x13f)],_0x56c689=await profile[_0x1013a0(0xcb)]({'email':_0x5a098e[_0x1013a0(0xe2)]}),_0x464a05=await staff[_0x1013a0(0xcb)]({'email':_0x5a098e[_0x1013a0(0xe2)]}),_0x3572da=await sales_order[_0x1013a0(0xbe)]([{'$match':{'sales_staff_id':_0x464a05[_0x1013a0(0xec)]['valueOf']()}},{'$unwind':'$sale_product'},{'$group':{'_id':_0x1013a0(0x131),'invoice':{'$first':_0x1013a0(0x148)},'customer':{'$first':'$customer'},'date':{'$first':_0x1013a0(0x117)},'JD':{'$first':_0x1013a0(0xda)},'accounting_account_confirm':{'$first':_0x1013a0(0x11f)},'wms_account_confirm':{'$first':_0x1013a0(0x10a)},'totalQTY':{'$sum':_0x1013a0(0xc4)}}}]);if(_0x577a10[0x0]['language']=='English\x20(US)')var _0x91b34e=users[_0x1013a0(0xe7)];else{if(_0x577a10[0x0][_0x1013a0(0xc7)]=='Hindi')var _0x91b34e=users[_0x1013a0(0xef)];else{if(_0x577a10[0x0][_0x1013a0(0xc7)]==_0x1013a0(0x141))var _0x91b34e=users[_0x1013a0(0x141)];else{if(_0x577a10[0x0]['language']==_0x1013a0(0x149))var _0x91b34e=users['Spanish'];else{if(_0x577a10[0x0]['language']==_0x1013a0(0x10f))var _0x91b34e=users[_0x1013a0(0x10f)];else{if(_0x577a10[0x0]['language']==_0x1013a0(0x11d))var _0x91b34e=users[_0x1013a0(0xbb)];else{if(_0x577a10[0x0]['language']==_0x1013a0(0x139))var _0x91b34e=users[_0x1013a0(0x139)];else{if(_0x577a10[0x0]['language']=='Arabic\x20(ae)')var _0x91b34e=users[_0x1013a0(0x113)];}}}}}}}_0x363fb5[_0x1013a0(0x124)](_0x1013a0(0xd6),{'success':_0x54f05c[_0x1013a0(0xeb)](_0x1013a0(0x142)),'errors':_0x54f05c['flash'](_0x1013a0(0x130)),'master_shop':_0x577a10,'profile':_0x56c689,'role':_0x5a098e,'language':_0x91b34e,'product_list':_0x464a05[_0x1013a0(0x121)],'sales_mine':_0x3572da,'staff_arr':_0x464a05});}catch(_0x8386d){console[_0x1013a0(0x13a)](_0x8386d);}}),router[a0_0x147770(0x11a)]('/add_sales',auth,async(_0x6f1100,_0x2dc961)=>{var _0x5ade13=a0_0x147770;try{const _0x3c9e98=await master_shop[_0x5ade13(0x115)](),_0x312751=_0x6f1100[_0x5ade13(0x13f)],_0x4b12a9=await profile['findOne']({'email':_0x312751[_0x5ade13(0xe2)]}),_0x4e7f97=await staff['findOne']({'email':_0x312751[_0x5ade13(0xe2)]}),_0x2f8419=await customer[_0x5ade13(0x115)]({'agent_id':_0x4e7f97[_0x5ade13(0xec)]});if(_0x3c9e98[0x0]['language']==_0x5ade13(0xe1))var _0x2e3042=users['English'];else{if(_0x3c9e98[0x0][_0x5ade13(0xc7)]==_0x5ade13(0xef))var _0x2e3042=users[_0x5ade13(0xef)];else{if(_0x3c9e98[0x0][_0x5ade13(0xc7)]==_0x5ade13(0x141))var _0x2e3042=users[_0x5ade13(0x141)];else{if(_0x3c9e98[0x0]['language']==_0x5ade13(0x149))var _0x2e3042=users['Spanish'];else{if(_0x3c9e98[0x0][_0x5ade13(0xc7)]==_0x5ade13(0x10f))var _0x2e3042=users['French'];else{if(_0x3c9e98[0x0]['language']==_0x5ade13(0x11d))var _0x2e3042=users[_0x5ade13(0xbb)];else{if(_0x3c9e98[0x0][_0x5ade13(0xc7)]=='Chinese')var _0x2e3042=users[_0x5ade13(0x139)];else{if(_0x3c9e98[0x0]['language']==_0x5ade13(0xd0))var _0x2e3042=users[_0x5ade13(0x113)];}}}}}}}_0x2dc961['render'](_0x5ade13(0xf0),{'success':_0x6f1100['flash'](_0x5ade13(0x142)),'errors':_0x6f1100[_0x5ade13(0xeb)](_0x5ade13(0x130)),'master_shop':_0x3c9e98,'profile':_0x4b12a9,'role':_0x312751,'language':_0x2e3042,'customer':_0x2f8419,'staff_arr':_0x4e7f97});}catch(_0x2105fa){console[_0x5ade13(0x13a)](_0x2105fa);}}),router[a0_0x147770(0x11a)](a0_0x147770(0xf6),auth,async(_0x5c4649,_0x7428d4)=>{var _0x21d1be=a0_0x147770;try{const _0x331059=await master_shop[_0x21d1be(0x115)](),_0xf832cb=_0x5c4649[_0x21d1be(0x13f)],_0x455152=await profile['findOne']({'email':_0xf832cb[_0x21d1be(0xe2)]}),_0x28610a=await staff[_0x21d1be(0xcb)]({'email':_0xf832cb['email']}),_0xd62914=await customer[_0x21d1be(0x115)]({'agent_id':_0x28610a[_0x21d1be(0xec)]}),_0x2ebf86=mongoose[_0x21d1be(0x11e)][_0x21d1be(0x12b)],_0x50dcd9=_0x5c4649[_0x21d1be(0xd7)]['id'],_0x4e3ac7=await sales_order[_0x21d1be(0x120)](_0x50dcd9),_0xd319a7=await sales_order[_0x21d1be(0xbe)]([{'$match':{'_id':_0x2ebf86(_0x50dcd9)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x21d1be(0x127)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x21d1be(0xb5)}}},{'$lookup':{'from':_0x21d1be(0x140),'localField':'accounting_account_id','foreignField':_0x21d1be(0xec),'as':_0x21d1be(0x129)}},{'$unwind':'$account_data'},{'$lookup':{'from':'staffs','localField':_0x21d1be(0xf1),'foreignField':'_id','as':'wms_data'}},{'$unwind':{'path':_0x21d1be(0x119),'preserveNullAndEmptyArrays':!![]}}]);if(_0x331059[0x0][_0x21d1be(0xc7)]==_0x21d1be(0xe1))var _0x46efd6=users[_0x21d1be(0xe7)];else{if(_0x331059[0x0][_0x21d1be(0xc7)]==_0x21d1be(0xef))var _0x46efd6=users[_0x21d1be(0xef)];else{if(_0x331059[0x0][_0x21d1be(0xc7)]==_0x21d1be(0x141))var _0x46efd6=users[_0x21d1be(0x141)];else{if(_0x331059[0x0][_0x21d1be(0xc7)]==_0x21d1be(0x149))var _0x46efd6=users['Spanish'];else{if(_0x331059[0x0][_0x21d1be(0xc7)]=='French')var _0x46efd6=users[_0x21d1be(0x10f)];else{if(_0x331059[0x0]['language']==_0x21d1be(0x11d))var _0x46efd6=users[_0x21d1be(0xbb)];else{if(_0x331059[0x0][_0x21d1be(0xc7)]==_0x21d1be(0x139))var _0x46efd6=users[_0x21d1be(0x139)];else{if(_0x331059[0x0][_0x21d1be(0xc7)]==_0x21d1be(0xd0))var _0x46efd6=users[_0x21d1be(0x113)];}}}}}}}_0x7428d4[_0x21d1be(0x124)]('view_sales_order',{'success':_0x5c4649['flash'](_0x21d1be(0x142)),'errors':_0x5c4649[_0x21d1be(0xeb)]('errors'),'master_shop':_0x331059,'profile':_0x455152,'role':_0xf832cb,'language':_0x46efd6,'customer':_0xd62914,'sales_sa':_0x4e3ac7,'approvers':_0xd319a7[0x0],'staff_arr':_0x28610a});}catch(_0xefb55f){console[_0x21d1be(0x13a)](_0xefb55f);}}),router['post'](a0_0x147770(0x145),auth,async(_0x1a0144,_0x123236)=>{var _0x26083d=a0_0x147770;try{const {customer:_0x74860d,date:_0x29cabb,prod_code:_0x7ebd05,note:_0x3808c3,paid_status:_0x483f92,JD:_0x4a5522,po_number:_0x5b937a,desire_date:_0x439a13}=_0x1a0144[_0x26083d(0x136)];if(typeof _0x7ebd05==_0x26083d(0xb7))var _0x31448a=[_0x1a0144[_0x26083d(0x136)]['prod_code']],_0x34198f=[_0x1a0144[_0x26083d(0x136)][_0x26083d(0xf3)]],_0x3e42cd=[_0x1a0144['body'][_0x26083d(0xd9)]],_0x523faf=[_0x1a0144['body']['quantity']],_0x265525=[_0x1a0144[_0x26083d(0x136)][_0x26083d(0x109)]],_0x45bea1=[_0x1a0144[_0x26083d(0x136)][_0x26083d(0x101)]],_0x39798d=[_0x1a0144['body'][_0x26083d(0xcc)]],_0x1116c8=[_0x1a0144[_0x26083d(0x136)]['totalPrice']],_0x17e579=[_0x1a0144['body'][_0x26083d(0x10c)]],_0x48f8df=[_0x1a0144['body'][_0x26083d(0x146)]],_0x565a42=[_0x1a0144['body'][_0x26083d(0xe6)]],_0x5ad611=[_0x1a0144[_0x26083d(0x136)][_0x26083d(0xb9)]],_0x29a906=[_0x1a0144[_0x26083d(0x136)][_0x26083d(0x122)]],_0x330315=[_0x1a0144[_0x26083d(0x136)]['prod_cat']],_0x552a3d=[_0x1a0144[_0x26083d(0x136)][_0x26083d(0xd8)]],_0x12ffe0=[_0x1a0144[_0x26083d(0x136)][_0x26083d(0xc1)]];else var _0x31448a=[..._0x1a0144[_0x26083d(0x136)][_0x26083d(0xd1)]],_0x34198f=[..._0x1a0144[_0x26083d(0x136)][_0x26083d(0xf3)]],_0x3e42cd=[..._0x1a0144['body'][_0x26083d(0xd9)]],_0x523faf=[..._0x1a0144[_0x26083d(0x136)][_0x26083d(0xf7)]],_0x265525=[..._0x1a0144[_0x26083d(0x136)]['unit']],_0x45bea1=[..._0x1a0144[_0x26083d(0x136)][_0x26083d(0x101)]],_0x39798d=[..._0x1a0144[_0x26083d(0x136)][_0x26083d(0xcc)]],_0x1116c8=[..._0x1a0144[_0x26083d(0x136)][_0x26083d(0x10b)]],_0x17e579=[..._0x1a0144['body']['dicount_price']],_0x48f8df=[..._0x1a0144[_0x26083d(0x136)][_0x26083d(0x146)]],_0x565a42=[..._0x1a0144[_0x26083d(0x136)]['dicount_price_adjust']],_0x5ad611=[..._0x1a0144[_0x26083d(0x136)]['no_per_unit']],_0x29a906=[..._0x1a0144['body']['getPrimUnitNo']],_0x330315=[..._0x1a0144[_0x26083d(0x136)]['prod_cat']],_0x552a3d=[..._0x1a0144[_0x26083d(0x136)][_0x26083d(0xd8)]],_0x12ffe0=[..._0x1a0144[_0x26083d(0x136)][_0x26083d(0xc1)]];const _0x2df22d=_0x31448a[_0x26083d(0xe4)](_0x490c5e=>{return _0x490c5e={'product_code':_0x490c5e};});_0x34198f[_0x26083d(0x100)]((_0x1e8ee0,_0x18c0f0)=>{_0x2df22d[_0x18c0f0]['product_name']=_0x1e8ee0;}),_0x3e42cd[_0x26083d(0x100)]((_0x5080d3,_0x370309)=>{_0x2df22d[_0x370309]['primary_code']=_0x5080d3;}),_0x523faf['forEach']((_0x324352,_0x230321)=>{var _0x8efd63=_0x26083d;_0x2df22d[_0x230321][_0x8efd63(0xf7)]=_0x324352;}),_0x265525[_0x26083d(0x100)]((_0x11bd40,_0x413126)=>{var _0x483760=_0x26083d;_0x2df22d[_0x413126][_0x483760(0x109)]=_0x11bd40;}),_0x45bea1[_0x26083d(0x100)]((_0xf1d2b2,_0x127593)=>{var _0x1f0aca=_0x26083d;_0x2df22d[_0x127593][_0x1f0aca(0x101)]=_0xf1d2b2;}),_0x565a42[_0x26083d(0x100)]((_0x429860,_0x422a85)=>{var _0x1d871f=_0x26083d;_0x2df22d[_0x422a85][_0x1d871f(0xf4)]=_0x429860;}),_0x39798d[_0x26083d(0x100)]((_0x2da8cf,_0xca6772)=>{_0x2df22d[_0xca6772]['price']=_0x2da8cf;}),_0x1116c8[_0x26083d(0x100)]((_0x4d1c8f,_0x1ec6be)=>{var _0x37a1f0=_0x26083d;_0x2df22d[_0x1ec6be][_0x37a1f0(0xc9)]=_0x4d1c8f;}),_0x17e579[_0x26083d(0x100)]((_0x39cb46,_0x2ffccc)=>{var _0x96c5f3=_0x26083d;_0x2df22d[_0x2ffccc][_0x96c5f3(0xd2)]=_0x39cb46;}),_0x48f8df[_0x26083d(0x100)]((_0x151b83,_0x535619)=>{var _0x288638=_0x26083d;_0x2df22d[_0x535619][_0x288638(0xd4)]=_0x151b83;}),_0x552a3d['forEach']((_0x57d454,_0x161723)=>{_0x2df22d[_0x161723]['secondary_unit']=_0x57d454;}),_0x29a906[_0x26083d(0x100)]((_0x382437,_0x22381b)=>{var _0x38a64a=_0x26083d;_0x2df22d[_0x22381b][_0x38a64a(0xee)]=_0x382437;}),_0x330315[_0x26083d(0x100)]((_0x3290f1,_0x59f507)=>{var _0x33415d=_0x26083d;_0x2df22d[_0x59f507][_0x33415d(0xfc)]=_0x3290f1;}),_0x12ffe0[_0x26083d(0x100)]((_0x48067e,_0x5723bf)=>{_0x2df22d[_0x5723bf]['conversion_data']=_0x48067e;}),_0x5ad611[_0x26083d(0x100)]((_0xaf23ec,_0x3c0e58)=>{var _0x4df66e=_0x26083d;_0x2df22d[_0x3c0e58][_0x4df66e(0xb9)]=_0xaf23ec;});const _0x832956=await approver_acct['aggregate']([{'$unwind':_0x26083d(0xf5)},{'$match':{'member.id_member':_0x1a0144[_0x26083d(0x13f)][_0x26083d(0x103)]}},{'$group':{'_id':{'id_member':_0x26083d(0x118),'name':_0x26083d(0xdf)},'head_id_staff':{'$first':_0x26083d(0xf2)}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x26083d(0xf2)}}},{'$lookup':{'from':'staffs','localField':'head_id_staff_id','foreignField':_0x26083d(0xec),'as':'head_staff_info'}},{'$unwind':_0x26083d(0x106)}]),_0xa51ca=new invoice_for_sales_order();await _0xa51ca[_0x26083d(0xdc)]();const _0x4beca3=_0x1a0144[_0x26083d(0x13f)],_0x2af504=await staff['findOne']({'email':_0x4beca3[_0x26083d(0xe2)]}),_0x40249a=new sales_order({'invoice':_0xa51ca[_0x26083d(0x134)][_0x26083d(0x14e)]()[_0x26083d(0x14b)](0x8,'0'),'customer':_0x74860d,'date':_0x29cabb,'sale_product':_0x2df22d,'note':_0x3808c3,'sales_staff_id':_0x2af504['_id'][_0x26083d(0x144)](),'JD':_0x4a5522,'accounting_account_id':_0x832956[0x0][_0x26083d(0x13b)],'po_number':_0x5b937a,'desired_delivery':_0x439a13,'wms_account_confirm':_0x26083d(0x138),'accounting_account_confirm':_0x26083d(0x138)}),_0x10ae38=await _0x40249a[_0x26083d(0xdc)]();var _0x320af8=_0x10ae38[_0x26083d(0x12c)],_0x499561='',_0xb7f8ca,_0x477d11=0x0;for(_0xb7f8ca in _0x320af8){_0x499561+='<tr>'+_0x26083d(0x114)+_0x320af8[_0xb7f8ca][_0x26083d(0xe8)]+'</td>'+_0x26083d(0x114)+_0x320af8[_0xb7f8ca]['product_code']+'</td>'+_0x26083d(0x114)+_0x320af8[_0xb7f8ca][_0x26083d(0xf7)]+_0x26083d(0xc8)+_0x26083d(0x114)+_0x320af8[_0xb7f8ca][_0x26083d(0x109)]+'</td>'+_0x26083d(0x13c),_0x477d11+=parseInt(_0x320af8[_0xb7f8ca][_0x26083d(0xf7)]);}const _0x44a577=await master_shop[_0x26083d(0x115)](),_0x3bccfb=await email_settings[_0x26083d(0xcb)]();let _0x2f553f=nodemailer[_0x26083d(0xc5)]({'port':Number(_0x3bccfb['port']),'secure':![],'auth':{'user':_0x3bccfb['email'],'pass':_0x3bccfb[_0x26083d(0xca)]}});const _0x1ff1d6=_0x1a0144[_0x26083d(0x112)]+'://'+_0x1a0144[_0x26083d(0x137)]['host'];let _0x3ea525={'from':_0x3bccfb[_0x26083d(0xe2)],'to':_0x832956[0x0][_0x26083d(0xbf)][_0x26083d(0xe2)]+_0x26083d(0xcd),'subject':'Approval\x20for\x20'+_0x10ae38[_0x26083d(0xe5)],'attachments':[{'filename':_0x26083d(0x12d),'path':__dirname+_0x26083d(0x12f)+'/upload/'+_0x44a577[0x0]['image'],'cid':_0x26083d(0x13e)}],'html':_0x26083d(0x116)+'<html><head><title></title>'+'<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>'+_0x26083d(0xc6)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x26083d(0x147)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x26083d(0xf9)+_0x26083d(0x147)+_0x26083d(0xfd)+_0x26083d(0xf9)+_0x26083d(0xf9)+'<hr\x20class=\x22my-3\x22>'+_0x26083d(0x147)+_0x26083d(0x108)+_0x832956[0x0][_0x26083d(0xbf)][_0x26083d(0xed)]+_0x26083d(0x10d)+_0x26083d(0xf9)+_0x26083d(0x147)+'<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>'+'</div>'+_0x26083d(0x147)+'<span>\x20Request\x20ID:\x20<b>'+_0x10ae38[_0x26083d(0xe5)]+_0x26083d(0x128)+_0x26083d(0x107)+_0x2af504[_0x26083d(0xed)]+_0x26083d(0x128)+_0x26083d(0xfa)+_0x10ae38[_0x26083d(0x135)]+_0x26083d(0x14c)+_0x26083d(0xf9)+_0x26083d(0xe9)+_0x26083d(0x14f)+_0x26083d(0xcf)+_0x26083d(0x14d)+_0x26083d(0xce)+_0x26083d(0xfb)+_0x26083d(0xc0)+_0x26083d(0x13c)+_0x26083d(0x12a)+_0x26083d(0x105)+'\x20'+_0x499561+'\x20'+'</tbody>'+_0x26083d(0x11b)+_0x26083d(0x147)+_0x26083d(0xdb)+_0x477d11+'</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>'+_0x26083d(0xbd)+'<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>'+_0x26083d(0x143)+'</div>'+'<div\x20style=\x22text-align:\x20center;\x22>'+_0x26083d(0x12e)+_0x1ff1d6+_0x26083d(0x123)+_0x10ae38[_0x26083d(0xec)]+_0x26083d(0xff)+_0x26083d(0xb6)+'</div>'+'<div>'+_0x26083d(0xea)+_0x26083d(0xfe)+_0x26083d(0xf9)+_0x26083d(0xf9)+_0x26083d(0x133)+_0x26083d(0x10e)};_0x2f553f[_0x26083d(0xe0)](_0x3ea525,function(_0x2116b6,_0x83dcbd){var _0x4defea=_0x26083d;_0x2116b6?(console[_0x4defea(0x13a)](_0x2116b6),console['log'](_0x4defea(0x110))):console[_0x4defea(0x13a)]('Email\x20sent\x20successfully');}),_0x1a0144[_0x26083d(0xeb)]('success',_0x26083d(0xe3)),_0x123236['redirect']('/sales_order/view_sales/'+_0x10ae38[_0x26083d(0xec)]);}catch(_0x17c2f1){}}),router[a0_0x147770(0xc2)]('/product_list',auth,async(_0x50354f,_0x5b8517)=>{var _0x192f78=a0_0x147770;try{const _0xa31623=_0x50354f['user'],_0x512b31=await profile[_0x192f78(0xcb)]({'email':_0xa31623['email']}),_0x1895de=await product[_0x192f78(0x115)]({'sales_category':_0xa31623[_0x192f78(0xde)]});_0x5b8517[_0x192f78(0x13d)](_0x1895de);}catch(_0x2c5af8){}}),router[a0_0x147770(0xc2)](a0_0x147770(0x126),auth,async(_0x254051,_0x5f4fb1)=>{var _0x30b8b8=a0_0x147770;try{const _0x1353ef=_0x254051[_0x30b8b8(0x13f)],{id_data:_0x43e458}=_0x254051['body'],_0xdf6af3=await profile[_0x30b8b8(0xcb)]({'email':_0x1353ef[_0x30b8b8(0xe2)]}),_0xc4b37c=mongoose['Types']['ObjectId'];var _0x3c2976=_0xc4b37c(_0x43e458);const _0x1559d7=await product['find']({'_id':_0x3c2976});_0x5f4fb1[_0x30b8b8(0x13d)](_0x1559d7);}catch(_0x1133d9){}}),module[a0_0x147770(0x104)]=router;