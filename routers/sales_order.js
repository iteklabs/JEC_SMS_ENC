var a0_0x41004f=a0_0xf593;(function(_0x5e21a6,_0x1c6562){var _0xf7d41=a0_0xf593,_0x933610=_0x5e21a6();while(!![]){try{var _0x529f55=parseInt(_0xf7d41(0x100))/0x1*(parseInt(_0xf7d41(0x106))/0x2)+parseInt(_0xf7d41(0xe9))/0x3+-parseInt(_0xf7d41(0xc2))/0x4*(-parseInt(_0xf7d41(0xf0))/0x5)+-parseInt(_0xf7d41(0xbf))/0x6*(-parseInt(_0xf7d41(0xe7))/0x7)+parseInt(_0xf7d41(0x10d))/0x8+parseInt(_0xf7d41(0xd9))/0x9+parseInt(_0xf7d41(0xe5))/0xa*(-parseInt(_0xf7d41(0xf9))/0xb);if(_0x529f55===_0x1c6562)break;else _0x933610['push'](_0x933610['shift']());}catch(_0x115c0a){_0x933610['push'](_0x933610['shift']());}}}(a0_0x2b6f,0xb3b2d));const express=require(a0_0x41004f(0xcb)),app=express(),router=express[a0_0x41004f(0x130)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x41004f(0x11f)),auth=require(a0_0x41004f(0x131)),users=require(a0_0x41004f(0x104)),excelJS=require(a0_0x41004f(0xbc)),xlsx=require(a0_0x41004f(0x138)),mongoose=require(a0_0x41004f(0xee)),{ObjectId}=require(a0_0x41004f(0xf7)),nodemailer=require(a0_0x41004f(0x12b));function a0_0xf593(_0x42633a,_0x4cd739){var _0x2b6f1b=a0_0x2b6f();return a0_0xf593=function(_0xf5935c,_0x49a247){_0xf5935c=_0xf5935c-0xb2;var _0x54a15d=_0x2b6f1b[_0xf5935c];return _0x54a15d;},a0_0xf593(_0x42633a,_0x4cd739);}function a0_0x2b6f(){var _0x15d143=['getPrimUnitNo','sales_category','</b></span>\x20<br><br>','$sale_product','logo','$member.name','email','log','dicount_price_adjust','Arabic\x20(ae)','Chinese','$member','/product_data','exceljs','</td>','<h2>\x20JEC\x20SMS\x20</h2>','336FXjaSM','<span>\x20Requested\x20By:\x20<b>','no_per_unit','165988PeaFEj','Sales\x20Order\x20is\x20ongoing','</tr>','wms_account_id','product_code','staffs','find','real_qty_unit_val','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','express','head_id_staff_id','<h5>\x20JEC\x20SMS\x20</h5>','$invoice','redirect','primary_code','true','Arabic','/product_list','totalPrice','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','invoice','conversion_data','Error\x20Occurs','1249326MTLagm','English','German','aggregate','all_sales_order','<hr\x20class=\x22my-3\x22>','$date','_id',';christian.villamer@jakagroup.com','body','conversion_unit','head_id_staff','50IHykAx','tmpisFG','149681TFvliO','Portuguese\x20(BR)','2196948AUTMGu','<span>\x20Request\x20Date:\x20<b>','isFG','string','<br><br><br>','mongoose','findById','20JCfhxj','json','ObjectId','Logo.png','account_data','</tbody>','</b>,\x20</span><br>','mongodb','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','7742273rChzWX','</table>','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','exports','<br><br>','/add_sales','image','31649MJOCXU','save','quantity','head_staff_info','../public/language/languages.json','render','68homkzZ','headers','<tr>','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','</div>','$wms_account_id','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','7557024zOhzYD','get','user','findOne','product_name','prod_cat','<!DOCTYPE\x20html>','$sale_product.quantity','product_list','valueOf','/sales_order/view_sales/','add_sales_order','Approval\x20for\x20','password','$_id','language','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','secondary_unit','../models/all_models','sttaff_id','$head_id_staff','product_id','post','price','errors','$JD','English\x20(US)','success','prod_name','<table\x20style=\x22width:\x20100%\x20!important;\x22>','nodemailer','<span>\x20Dear\x20<b>','port','sendMail','<div>','Router','../middleware/auth','sale_product','Hindi','map','$accounting_account_id','flash','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','xlsx','dicount_price','unit','padStart','Types','forEach','$wms_data','name','Portuguese','<span>\x20Request\x20ID:\x20<b>','discount','wms_data','</b></span>\x20<br>','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','params','Spanish','$account_data','prod_code','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','protocol','French'];a0_0x2b6f=function(){return _0x15d143;};return a0_0x2b6f();}router['get']('/',auth,async(_0x4db4f9,_0x364a0c)=>{var _0x4728a0=a0_0x41004f;try{const _0x44f8da=await master_shop[_0x4728a0(0xc8)](),_0x534fa6=_0x4db4f9[_0x4728a0(0x10f)],_0x4d169a=await profile[_0x4728a0(0x110)]({'email':_0x534fa6[_0x4728a0(0xb5)]}),_0x5e9cbf=await staff[_0x4728a0(0x110)]({'email':_0x534fa6[_0x4728a0(0xb5)]}),_0x5cc3e0=await sales_order['aggregate']([{'$match':{'sales_staff_id':_0x5e9cbf[_0x4728a0(0xe0)][_0x4728a0(0x116)]()}},{'$unwind':_0x4728a0(0xb2)},{'$group':{'_id':_0x4728a0(0x11b),'invoice':{'$first':_0x4728a0(0xce)},'customer':{'$first':'$customer'},'date':{'$first':_0x4728a0(0xdf)},'JD':{'$first':_0x4728a0(0x126)},'accounting_account_confirm':{'$first':'$accounting_account_confirm'},'wms_account_confirm':{'$first':'$wms_account_confirm'},'totalQTY':{'$sum':_0x4728a0(0x114)}}}]);if(_0x44f8da[0x0][_0x4728a0(0x11c)]==_0x4728a0(0x127))var _0x3695a3=users[_0x4728a0(0xda)];else{if(_0x44f8da[0x0]['language']==_0x4728a0(0x133))var _0x3695a3=users[_0x4728a0(0x133)];else{if(_0x44f8da[0x0]['language']==_0x4728a0(0xdb))var _0x3695a3=users['German'];else{if(_0x44f8da[0x0][_0x4728a0(0x11c)]==_0x4728a0(0x148))var _0x3695a3=users[_0x4728a0(0x148)];else{if(_0x44f8da[0x0][_0x4728a0(0x11c)]==_0x4728a0(0x14d))var _0x3695a3=users[_0x4728a0(0x14d)];else{if(_0x44f8da[0x0][_0x4728a0(0x11c)]=='Portuguese\x20(BR)')var _0x3695a3=users[_0x4728a0(0x140)];else{if(_0x44f8da[0x0][_0x4728a0(0x11c)]=='Chinese')var _0x3695a3=users[_0x4728a0(0xb9)];else{if(_0x44f8da[0x0][_0x4728a0(0x11c)]==_0x4728a0(0xb8))var _0x3695a3=users[_0x4728a0(0xd2)];}}}}}}}_0x364a0c[_0x4728a0(0x105)](_0x4728a0(0xdd),{'success':_0x4db4f9[_0x4728a0(0x136)](_0x4728a0(0x128)),'errors':_0x4db4f9['flash'](_0x4728a0(0x125)),'master_shop':_0x44f8da,'profile':_0x4d169a,'role':_0x534fa6,'language':_0x3695a3,'product_list':_0x5e9cbf[_0x4728a0(0x115)],'sales_mine':_0x5cc3e0,'staff_arr':_0x5e9cbf});}catch(_0x33c150){console[_0x4728a0(0xb6)](_0x33c150);}}),router[a0_0x41004f(0x10e)]('/add_sales',auth,async(_0x922c2b,_0x3102b2)=>{var _0x1fa9a3=a0_0x41004f;try{const _0x1e5c12=await master_shop['find'](),_0x34749a=_0x922c2b[_0x1fa9a3(0x10f)],_0x5bc489=await profile[_0x1fa9a3(0x110)]({'email':_0x34749a[_0x1fa9a3(0xb5)]}),_0x1a0812=await staff['findOne']({'email':_0x34749a['email']}),_0x2fabc1=await customer[_0x1fa9a3(0xc8)]({'agent_id':_0x1a0812['_id']});if(_0x1e5c12[0x0][_0x1fa9a3(0x11c)]==_0x1fa9a3(0x127))var _0x4530ba=users['English'];else{if(_0x1e5c12[0x0][_0x1fa9a3(0x11c)]=='Hindi')var _0x4530ba=users[_0x1fa9a3(0x133)];else{if(_0x1e5c12[0x0][_0x1fa9a3(0x11c)]==_0x1fa9a3(0xdb))var _0x4530ba=users[_0x1fa9a3(0xdb)];else{if(_0x1e5c12[0x0][_0x1fa9a3(0x11c)]==_0x1fa9a3(0x148))var _0x4530ba=users['Spanish'];else{if(_0x1e5c12[0x0]['language']=='French')var _0x4530ba=users[_0x1fa9a3(0x14d)];else{if(_0x1e5c12[0x0][_0x1fa9a3(0x11c)]==_0x1fa9a3(0xe8))var _0x4530ba=users[_0x1fa9a3(0x140)];else{if(_0x1e5c12[0x0][_0x1fa9a3(0x11c)]==_0x1fa9a3(0xb9))var _0x4530ba=users[_0x1fa9a3(0xb9)];else{if(_0x1e5c12[0x0][_0x1fa9a3(0x11c)]==_0x1fa9a3(0xb8))var _0x4530ba=users['Arabic'];}}}}}}}_0x3102b2[_0x1fa9a3(0x105)](_0x1fa9a3(0x118),{'success':_0x922c2b[_0x1fa9a3(0x136)]('success'),'errors':_0x922c2b[_0x1fa9a3(0x136)](_0x1fa9a3(0x125)),'master_shop':_0x1e5c12,'profile':_0x5bc489,'role':_0x34749a,'language':_0x4530ba,'customer':_0x2fabc1,'staff_arr':_0x1a0812});}catch(_0x187a4a){console['log'](_0x187a4a);}}),router['get']('/view_sales/:id',auth,async(_0x271158,_0x41265f)=>{var _0x2443d6=a0_0x41004f;try{const _0x351ca3=await master_shop[_0x2443d6(0xc8)](),_0x3f59f7=_0x271158[_0x2443d6(0x10f)],_0x264642=await profile[_0x2443d6(0x110)]({'email':_0x3f59f7['email']}),_0x393241=await staff[_0x2443d6(0x110)]({'email':_0x3f59f7[_0x2443d6(0xb5)]}),_0x32e546=await customer[_0x2443d6(0xc8)]({'agent_id':_0x393241['_id']}),_0x54997b=mongoose[_0x2443d6(0x13c)][_0x2443d6(0xf2)],_0x4d3949=_0x271158[_0x2443d6(0x147)]['id'],_0x21cc2b=await sales_order[_0x2443d6(0xef)](_0x4d3949),_0x4f4ef5=await sales_order[_0x2443d6(0xdc)]([{'$match':{'_id':_0x54997b(_0x4d3949)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x2443d6(0x135)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x2443d6(0x10b)}}},{'$lookup':{'from':_0x2443d6(0xc7),'localField':'accounting_account_id','foreignField':_0x2443d6(0xe0),'as':_0x2443d6(0xf4)}},{'$unwind':_0x2443d6(0x149)},{'$lookup':{'from':_0x2443d6(0xc7),'localField':_0x2443d6(0xc5),'foreignField':_0x2443d6(0xe0),'as':_0x2443d6(0x143)}},{'$unwind':{'path':_0x2443d6(0x13e),'preserveNullAndEmptyArrays':!![]}}]);if(_0x351ca3[0x0][_0x2443d6(0x11c)]=='English\x20(US)')var _0x448b68=users[_0x2443d6(0xda)];else{if(_0x351ca3[0x0][_0x2443d6(0x11c)]==_0x2443d6(0x133))var _0x448b68=users[_0x2443d6(0x133)];else{if(_0x351ca3[0x0][_0x2443d6(0x11c)]==_0x2443d6(0xdb))var _0x448b68=users[_0x2443d6(0xdb)];else{if(_0x351ca3[0x0][_0x2443d6(0x11c)]=='Spanish')var _0x448b68=users[_0x2443d6(0x148)];else{if(_0x351ca3[0x0][_0x2443d6(0x11c)]==_0x2443d6(0x14d))var _0x448b68=users[_0x2443d6(0x14d)];else{if(_0x351ca3[0x0]['language']=='Portuguese\x20(BR)')var _0x448b68=users[_0x2443d6(0x140)];else{if(_0x351ca3[0x0][_0x2443d6(0x11c)]==_0x2443d6(0xb9))var _0x448b68=users['Chinese'];else{if(_0x351ca3[0x0][_0x2443d6(0x11c)]=='Arabic\x20(ae)')var _0x448b68=users[_0x2443d6(0xd2)];}}}}}}}_0x41265f['render']('view_sales_order',{'success':_0x271158[_0x2443d6(0x136)](_0x2443d6(0x128)),'errors':_0x271158[_0x2443d6(0x136)](_0x2443d6(0x125)),'master_shop':_0x351ca3,'profile':_0x264642,'role':_0x3f59f7,'language':_0x448b68,'customer':_0x32e546,'sales_sa':_0x21cc2b,'approvers':_0x4f4ef5[0x0],'staff_arr':_0x393241});}catch(_0x191a6b){console[_0x2443d6(0xb6)](_0x191a6b);}}),router[a0_0x41004f(0x123)](a0_0x41004f(0xfe),auth,async(_0x3ed6a3,_0x2f3128)=>{var _0x343d26=a0_0x41004f;try{const {customer:_0x40ae52,date:_0x5e9771,prod_code:_0x4d01a0,note:_0x4ee967,paid_status:_0x3e26f4,JD:_0x497127,po_number:_0x45c75e,desire_date:_0x1ee953}=_0x3ed6a3['body'];if(typeof _0x4d01a0==_0x343d26(0xec))var _0x552ebb=[_0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0x14a)]],_0x5a551b=[_0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0x129)]],_0x34cf14=[_0x3ed6a3['body']['primary_code']],_0x552649=[_0x3ed6a3[_0x343d26(0xe2)]['quantity']],_0x1fb11f=[_0x3ed6a3['body']['unit']],_0x3e79e4=[_0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0x122)]],_0x4827bc=[_0x3ed6a3['body'][_0x343d26(0x124)]],_0x403cfa=[_0x3ed6a3[_0x343d26(0xe2)]['totalPrice']],_0x57c9df=[_0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0x139)]],_0x533c99=[_0x3ed6a3[_0x343d26(0xe2)]['tmpisFG']],_0xde1a18=[_0x3ed6a3['body'][_0x343d26(0xb7)]],_0x56f721=[_0x3ed6a3[_0x343d26(0xe2)]['no_per_unit']],_0xc708fe=[_0x3ed6a3[_0x343d26(0xe2)]['getPrimUnitNo']],_0x20cb65=[_0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0x112)]],_0x5d5483=[_0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0x11e)]],_0x1bc5b2=[_0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0xe3)]];else var _0x552ebb=[..._0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0x14a)]],_0x5a551b=[..._0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0x129)]],_0x34cf14=[..._0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0xd0)]],_0x552649=[..._0x3ed6a3['body'][_0x343d26(0x102)]],_0x1fb11f=[..._0x3ed6a3['body'][_0x343d26(0x13a)]],_0x3e79e4=[..._0x3ed6a3['body'][_0x343d26(0x122)]],_0x4827bc=[..._0x3ed6a3['body'][_0x343d26(0x124)]],_0x403cfa=[..._0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0xd4)]],_0x57c9df=[..._0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0x139)]],_0x533c99=[..._0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0xe6)]],_0xde1a18=[..._0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0xb7)]],_0x56f721=[..._0x3ed6a3['body']['no_per_unit']],_0xc708fe=[..._0x3ed6a3['body'][_0x343d26(0x14e)]],_0x20cb65=[..._0x3ed6a3[_0x343d26(0xe2)][_0x343d26(0x112)]],_0x5d5483=[..._0x3ed6a3['body'][_0x343d26(0x11e)]],_0x1bc5b2=[..._0x3ed6a3[_0x343d26(0xe2)]['conversion_unit']];const _0x1b153b=_0x552ebb[_0x343d26(0x134)](_0x5c70dd=>{return _0x5c70dd={'product_code':_0x5c70dd};});_0x5a551b['forEach']((_0x46535c,_0x537e11)=>{var _0x28638a=_0x343d26;_0x1b153b[_0x537e11][_0x28638a(0x111)]=_0x46535c;}),_0x34cf14[_0x343d26(0x13d)]((_0xb8a601,_0x179bfb)=>{_0x1b153b[_0x179bfb]['primary_code']=_0xb8a601;}),_0x552649[_0x343d26(0x13d)]((_0x242f99,_0x54d342)=>{_0x1b153b[_0x54d342]['quantity']=_0x242f99;}),_0x1fb11f[_0x343d26(0x13d)]((_0x5a09b9,_0x46d1c4)=>{var _0x75de94=_0x343d26;_0x1b153b[_0x46d1c4][_0x75de94(0x13a)]=_0x5a09b9;}),_0x3e79e4[_0x343d26(0x13d)]((_0x5d2764,_0x4f3daa)=>{_0x1b153b[_0x4f3daa]['product_id']=_0x5d2764;}),_0xde1a18[_0x343d26(0x13d)]((_0x349e8c,_0x162189)=>{_0x1b153b[_0x162189]['adjustment_discount']=_0x349e8c;}),_0x4827bc['forEach']((_0x1822c1,_0x268cd9)=>{var _0x7f3fde=_0x343d26;_0x1b153b[_0x268cd9][_0x7f3fde(0x124)]=_0x1822c1;}),_0x403cfa[_0x343d26(0x13d)]((_0x3d3cf4,_0x5a9424)=>{_0x1b153b[_0x5a9424]['totalprice']=_0x3d3cf4;}),_0x57c9df[_0x343d26(0x13d)]((_0x38e3a3,_0x4738aa)=>{var _0x1c30b1=_0x343d26;_0x1b153b[_0x4738aa][_0x1c30b1(0x142)]=_0x38e3a3;}),_0x533c99[_0x343d26(0x13d)]((_0x26eba9,_0x1509e2)=>{var _0x1b55f4=_0x343d26;_0x1b153b[_0x1509e2][_0x1b55f4(0xeb)]=_0x26eba9;}),_0x5d5483[_0x343d26(0x13d)]((_0xebdb6,_0x51f458)=>{var _0x4a1426=_0x343d26;_0x1b153b[_0x51f458][_0x4a1426(0x11e)]=_0xebdb6;}),_0xc708fe[_0x343d26(0x13d)]((_0x2e9dc5,_0x1c16bf)=>{var _0x373aea=_0x343d26;_0x1b153b[_0x1c16bf][_0x373aea(0xc9)]=_0x2e9dc5;}),_0x20cb65[_0x343d26(0x13d)]((_0x334c24,_0x15e16a)=>{var _0x4ecc7d=_0x343d26;_0x1b153b[_0x15e16a][_0x4ecc7d(0x112)]=_0x334c24;}),_0x1bc5b2['forEach']((_0x510362,_0xf17d2e)=>{var _0x3f4086=_0x343d26;_0x1b153b[_0xf17d2e][_0x3f4086(0xd7)]=_0x510362;}),_0x56f721[_0x343d26(0x13d)]((_0x1b8937,_0x3e5f76)=>{var _0x270b99=_0x343d26;_0x1b153b[_0x3e5f76][_0x270b99(0xc1)]=_0x1b8937;});const _0x5366cc=await approver_acct[_0x343d26(0xdc)]([{'$unwind':_0x343d26(0xba)},{'$match':{'member.id_member':_0x3ed6a3['user'][_0x343d26(0x120)]}},{'$group':{'_id':{'id_member':'$member.id_member','name':_0x343d26(0xb4)},'head_id_staff':{'$first':'$head_id_staff'}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x343d26(0x121)}}},{'$lookup':{'from':'staffs','localField':_0x343d26(0xcc),'foreignField':_0x343d26(0xe0),'as':_0x343d26(0x103)}},{'$unwind':'$head_staff_info'}]),_0x2b56b0=new invoice_for_sales_order();await _0x2b56b0['save']();const _0x3e61d0=_0x3ed6a3[_0x343d26(0x10f)],_0x128409=await staff['findOne']({'email':_0x3e61d0[_0x343d26(0xb5)]}),_0x333475=new sales_order({'invoice':_0x2b56b0['invoice_init']['toString']()[_0x343d26(0x13b)](0x8,'0'),'customer':_0x40ae52,'date':_0x5e9771,'sale_product':_0x1b153b,'note':_0x4ee967,'sales_staff_id':_0x128409[_0x343d26(0xe0)][_0x343d26(0x116)](),'JD':_0x497127,'accounting_account_id':_0x5366cc[0x0][_0x343d26(0xe4)],'po_number':_0x45c75e,'desired_delivery':_0x1ee953,'wms_account_confirm':'true','accounting_account_confirm':_0x343d26(0xd1)}),_0x66484d=await _0x333475[_0x343d26(0x101)]();var _0x5618e6=_0x66484d[_0x343d26(0x132)],_0x22b015='',_0x1ca360,_0x290750=0x0;for(_0x1ca360 in _0x5618e6){_0x22b015+='<tr>'+_0x343d26(0xca)+_0x5618e6[_0x1ca360][_0x343d26(0x111)]+_0x343d26(0xbd)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5618e6[_0x1ca360][_0x343d26(0xc6)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5618e6[_0x1ca360][_0x343d26(0x102)]+_0x343d26(0xbd)+_0x343d26(0xca)+_0x5618e6[_0x1ca360][_0x343d26(0x13a)]+_0x343d26(0xbd)+_0x343d26(0xc4),_0x290750+=parseInt(_0x5618e6[_0x1ca360][_0x343d26(0x102)]);}const _0x196c1e=await master_shop[_0x343d26(0xc8)](),_0x44646c=await email_settings[_0x343d26(0x110)]();let _0x2a1923=nodemailer['createTransport']({'port':Number(_0x44646c[_0x343d26(0x12d)]),'secure':![],'auth':{'user':_0x44646c[_0x343d26(0xb5)],'pass':_0x44646c[_0x343d26(0x11a)]}});const _0x2c8582=_0x3ed6a3[_0x343d26(0x14c)]+'://'+_0x3ed6a3[_0x343d26(0x107)]['host'];let _0x2ae5bb={'from':_0x44646c[_0x343d26(0xb5)],'to':_0x5366cc[0x0][_0x343d26(0x103)]['email']+_0x343d26(0xe1),'subject':_0x343d26(0x119)+_0x66484d[_0x343d26(0xd6)],'attachments':[{'filename':_0x343d26(0xf3),'path':__dirname+'/../public'+'/upload/'+_0x196c1e[0x0][_0x343d26(0xff)],'cid':_0x343d26(0xb3)}],'html':_0x343d26(0x113)+'<html><head><title></title>'+_0x343d26(0x145)+'</head><body>'+_0x343d26(0x12f)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x343d26(0x12f)+_0x343d26(0xf8)+_0x343d26(0x10a)+_0x343d26(0x12f)+_0x343d26(0xbe)+_0x343d26(0x10a)+'</div>'+_0x343d26(0xde)+_0x343d26(0x12f)+_0x343d26(0x12c)+_0x5366cc[0x0][_0x343d26(0x103)][_0x343d26(0x13f)]+_0x343d26(0xf6)+_0x343d26(0x10a)+'<div>'+_0x343d26(0xd5)+_0x343d26(0x10a)+_0x343d26(0x12f)+_0x343d26(0x141)+_0x66484d['invoice']+_0x343d26(0x144)+_0x343d26(0xc0)+_0x128409[_0x343d26(0x13f)]+'</b></span>\x20<br>'+_0x343d26(0xea)+_0x66484d['date']+_0x343d26(0x150)+'</div>'+_0x343d26(0x12a)+_0x343d26(0x146)+_0x343d26(0x108)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x343d26(0x137)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x343d26(0xc4)+'</thead>'+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x22b015+'\x20'+_0x343d26(0xf5)+_0x343d26(0xfa)+_0x343d26(0x12f)+_0x343d26(0x10c)+_0x290750+_0x343d26(0x14b)+_0x343d26(0x11d)+_0x343d26(0xfb)+_0x343d26(0xed)+'</div>'+'<div\x20style=\x22text-align:\x20center;\x22>'+_0x343d26(0x109)+_0x2c8582+'/accounting_approval/'+_0x66484d[_0x343d26(0xe0)]+'\x22>Change\x20Status</a>'+_0x343d26(0xfd)+'</div>'+_0x343d26(0x12f)+'<strong>\x20Regards\x20</strong>'+_0x343d26(0xcd)+'</div>'+_0x343d26(0x10a)+'<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>'+'</body></html>'};_0x2a1923[_0x343d26(0x12e)](_0x2ae5bb,function(_0x37c0f9,_0x4f0edb){var _0x405eef=_0x343d26;_0x37c0f9?(console[_0x405eef(0xb6)](_0x37c0f9),console[_0x405eef(0xb6)](_0x405eef(0xd8))):console[_0x405eef(0xb6)]('Email\x20sent\x20successfully');}),_0x3ed6a3[_0x343d26(0x136)](_0x343d26(0x128),_0x343d26(0xc3)),_0x2f3128[_0x343d26(0xcf)](_0x343d26(0x117)+_0x66484d['_id']);}catch(_0x10f7b5){}}),router['post'](a0_0x41004f(0xd3),auth,async(_0x4dcf1a,_0x517210)=>{var _0x54ba29=a0_0x41004f;try{const _0x3fd02c=_0x4dcf1a[_0x54ba29(0x10f)],_0x3e9670=await profile[_0x54ba29(0x110)]({'email':_0x3fd02c[_0x54ba29(0xb5)]}),_0x2b5fa9=await product[_0x54ba29(0xc8)]({'sales_category':_0x3fd02c[_0x54ba29(0x14f)]});_0x517210[_0x54ba29(0xf1)](_0x2b5fa9);}catch(_0x8dbf80){}}),router['post'](a0_0x41004f(0xbb),auth,async(_0x72fcd,_0x2a6393)=>{var _0x3923e8=a0_0x41004f;try{const _0x2d7957=_0x72fcd[_0x3923e8(0x10f)],{id_data:_0x50d2a3}=_0x72fcd[_0x3923e8(0xe2)],_0xb9019a=await profile[_0x3923e8(0x110)]({'email':_0x2d7957[_0x3923e8(0xb5)]}),_0x3a449f=mongoose['Types'][_0x3923e8(0xf2)];var _0x2bfd85=_0x3a449f(_0x50d2a3);const _0x129f1f=await product[_0x3923e8(0xc8)]({'_id':_0x2bfd85});_0x2a6393[_0x3923e8(0xf1)](_0x129f1f);}catch(_0xbc1e61){}}),module[a0_0x41004f(0xfc)]=router;