function a0_0x20d4(){var _0x3f8bcd=['/product_list','date','password','head_id_staff','staffs','Spanish','mongodb','8882mJwYUx','Chinese','string','$head_id_staff','$JD','$customer','$wms_account_id','$invoice','$wms_data','ObjectId','<tr>','<h2>\x20JEC\x20SMS\x20</h2>','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','post','findById','$date','totalprice','product_name','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','quantity','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','110WkfCqi','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','discount','find','864572guuFJW','</b></span>\x20<br><br>','/product_data','email','</body></html>','name','/accounting_approval/','wms_data','/view_sales/:id','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','get','Hindi','no_per_unit','host','save','log','findOne','<div>','errors','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','padStart','sttaff_id','German','sendMail','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','Arabic\x20(ae)','</table>','prod_cat','Email\x20sent\x20successfully','<strong>\x20Regards\x20</strong>','\x22>Change\x20Status</a>','Portuguese\x20(BR)','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','body','<br><br><br>','../models/all_models','</tr>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','xlsx','adjustment_discount','English','$member','$member.id_member','head_staff_info',';christian.villamer@jakagroup.com','language','mongoose','<span>\x20Request\x20ID:\x20<b>','redirect','primary_code','exceljs','unit','$sale_product','</tbody>','headers','_id','168931AfxphN','getPrimUnitNo','Portuguese','tmpisFG','$wms_account_confirm','express','true','map','<div\x20style=\x22text-align:\x20center;\x22>','forEach','sales_category','valueOf','aggregate','<tbody\x20style=\x22text-align:\x20center;\x22>','</div>','totalPrice','/upload/','French','<span>\x20Requested\x20By:\x20<b>','13110160uCSJEi','<!DOCTYPE\x20html>','invoice','Error\x20Occurs','/../public','$account_data','</td>','add_sales_order','$member.name','276OYEgEF','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','dicount_price','Arabic','/sales_order/view_sales/','Types','prod_code','nodemailer','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','../public/language/languages.json','head_id_staff_id','2306907EPVjTL','view_sales_order','<span>\x20Request\x20Date:\x20<b>','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','accounting_account_id','English\x20(US)','all_sales_order','exports','conversion_unit','flash','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','</head><body>','price','render','isFG','/add_sales','<table\x20style=\x22width:\x20100%\x20!important;\x22>','<h5>\x20JEC\x20SMS\x20</h5>','5FHTcYT','14735310znBJgH','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','4537449WhvHRV','$accounting_account_confirm','secondary_unit','user','$accounting_account_id','product_id','success','product_list','<html><head><title></title>'];a0_0x20d4=function(){return _0x3f8bcd;};return a0_0x20d4();}function a0_0x368c(_0x3835f2,_0x5a5ac0){var _0x20d459=a0_0x20d4();return a0_0x368c=function(_0x368c63,_0x167b80){_0x368c63=_0x368c63-0x18b;var _0x51512b=_0x20d459[_0x368c63];return _0x51512b;},a0_0x368c(_0x3835f2,_0x5a5ac0);}var a0_0x52e786=a0_0x368c;(function(_0x27edc2,_0x41b0cc){var _0x38200c=a0_0x368c,_0x270c55=_0x27edc2();while(!![]){try{var _0x2c3368=-parseInt(_0x38200c(0x1e1))/0x1*(parseInt(_0x38200c(0x1cc))/0x2)+parseInt(_0x38200c(0x1a7))/0x3+-parseInt(_0x38200c(0x1e5))/0x4*(parseInt(_0x38200c(0x1b9))/0x5)+parseInt(_0x38200c(0x19c))/0x6*(parseInt(_0x38200c(0x21d))/0x7)+parseInt(_0x38200c(0x193))/0x8+-parseInt(_0x38200c(0x1bc))/0x9+-parseInt(_0x38200c(0x1ba))/0xa;if(_0x2c3368===_0x41b0cc)break;else _0x270c55['push'](_0x270c55['shift']());}catch(_0x346c9c){_0x270c55['push'](_0x270c55['shift']());}}}(a0_0x20d4,0xcbfb8));const express=require(a0_0x52e786(0x222)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x52e786(0x208)),auth=require('../middleware/auth'),users=require(a0_0x52e786(0x1a5)),excelJS=require(a0_0x52e786(0x217)),xlsx=require(a0_0x52e786(0x20b)),mongoose=require(a0_0x52e786(0x213)),{ObjectId}=require(a0_0x52e786(0x1cb)),nodemailer=require(a0_0x52e786(0x1a3));router[a0_0x52e786(0x1ef)]('/',auth,async(_0x36e7a2,_0x2ab2fa)=>{var _0x4e2281=a0_0x52e786;try{const _0x31571e=await master_shop[_0x4e2281(0x1e4)](),_0x24516c=_0x36e7a2[_0x4e2281(0x1bf)],_0x3c2f95=await profile[_0x4e2281(0x1f5)]({'email':_0x24516c[_0x4e2281(0x1e8)]}),_0x333078=await staff['findOne']({'email':_0x24516c[_0x4e2281(0x1e8)]}),_0x389d77=await sales_order[_0x4e2281(0x18c)]([{'$match':{'sales_staff_id':_0x333078[_0x4e2281(0x21c)][_0x4e2281(0x18b)]()}},{'$unwind':_0x4e2281(0x219)},{'$group':{'_id':'$_id','invoice':{'$first':_0x4e2281(0x1d3)},'customer':{'$first':_0x4e2281(0x1d1)},'date':{'$first':_0x4e2281(0x1db)},'JD':{'$first':_0x4e2281(0x1d0)},'accounting_account_confirm':{'$first':_0x4e2281(0x1bd)},'wms_account_confirm':{'$first':_0x4e2281(0x221)},'totalQTY':{'$sum':'$sale_product.quantity'}}}]);if(_0x31571e[0x0][_0x4e2281(0x212)]==_0x4e2281(0x1ac))var _0xcbdc=users['English'];else{if(_0x31571e[0x0][_0x4e2281(0x212)]==_0x4e2281(0x1f0))var _0xcbdc=users[_0x4e2281(0x1f0)];else{if(_0x31571e[0x0]['language']=='German')var _0xcbdc=users[_0x4e2281(0x1fb)];else{if(_0x31571e[0x0][_0x4e2281(0x212)]==_0x4e2281(0x1ca))var _0xcbdc=users[_0x4e2281(0x1ca)];else{if(_0x31571e[0x0][_0x4e2281(0x212)]=='French')var _0xcbdc=users[_0x4e2281(0x191)];else{if(_0x31571e[0x0][_0x4e2281(0x212)]==_0x4e2281(0x204))var _0xcbdc=users[_0x4e2281(0x21f)];else{if(_0x31571e[0x0]['language']==_0x4e2281(0x1cd))var _0xcbdc=users[_0x4e2281(0x1cd)];else{if(_0x31571e[0x0]['language']==_0x4e2281(0x1fe))var _0xcbdc=users['Arabic'];}}}}}}}_0x2ab2fa[_0x4e2281(0x1b4)](_0x4e2281(0x1ad),{'success':_0x36e7a2['flash'](_0x4e2281(0x1c2)),'errors':_0x36e7a2['flash']('errors'),'master_shop':_0x31571e,'profile':_0x3c2f95,'role':_0x24516c,'language':_0xcbdc,'product_list':_0x333078[_0x4e2281(0x1c3)],'sales_mine':_0x389d77,'staff_arr':_0x333078});}catch(_0x77a74){console[_0x4e2281(0x1f4)](_0x77a74);}}),router[a0_0x52e786(0x1ef)](a0_0x52e786(0x1b6),auth,async(_0xc85097,_0x33505f)=>{var _0x42beb8=a0_0x52e786;try{const _0x27f3d9=await master_shop['find'](),_0xf42ec1=_0xc85097[_0x42beb8(0x1bf)],_0x289d09=await profile[_0x42beb8(0x1f5)]({'email':_0xf42ec1[_0x42beb8(0x1e8)]}),_0x564dff=await staff[_0x42beb8(0x1f5)]({'email':_0xf42ec1[_0x42beb8(0x1e8)]}),_0x41580b=await customer[_0x42beb8(0x1e4)]({'agent_id':_0x564dff[_0x42beb8(0x21c)]});if(_0x27f3d9[0x0][_0x42beb8(0x212)]==_0x42beb8(0x1ac))var _0x28e3ae=users[_0x42beb8(0x20d)];else{if(_0x27f3d9[0x0][_0x42beb8(0x212)]==_0x42beb8(0x1f0))var _0x28e3ae=users[_0x42beb8(0x1f0)];else{if(_0x27f3d9[0x0]['language']==_0x42beb8(0x1fb))var _0x28e3ae=users[_0x42beb8(0x1fb)];else{if(_0x27f3d9[0x0][_0x42beb8(0x212)]==_0x42beb8(0x1ca))var _0x28e3ae=users[_0x42beb8(0x1ca)];else{if(_0x27f3d9[0x0][_0x42beb8(0x212)]==_0x42beb8(0x191))var _0x28e3ae=users[_0x42beb8(0x191)];else{if(_0x27f3d9[0x0][_0x42beb8(0x212)]==_0x42beb8(0x204))var _0x28e3ae=users[_0x42beb8(0x21f)];else{if(_0x27f3d9[0x0][_0x42beb8(0x212)]=='Chinese')var _0x28e3ae=users[_0x42beb8(0x1cd)];else{if(_0x27f3d9[0x0][_0x42beb8(0x212)]==_0x42beb8(0x1fe))var _0x28e3ae=users[_0x42beb8(0x19f)];}}}}}}}_0x33505f[_0x42beb8(0x1b4)](_0x42beb8(0x19a),{'success':_0xc85097[_0x42beb8(0x1b0)](_0x42beb8(0x1c2)),'errors':_0xc85097[_0x42beb8(0x1b0)](_0x42beb8(0x1f7)),'master_shop':_0x27f3d9,'profile':_0x289d09,'role':_0xf42ec1,'language':_0x28e3ae,'customer':_0x41580b,'staff_arr':_0x564dff});}catch(_0x50ce44){console['log'](_0x50ce44);}}),router[a0_0x52e786(0x1ef)](a0_0x52e786(0x1ed),auth,async(_0x4852c8,_0x125f2c)=>{var _0x28bdbc=a0_0x52e786;try{const _0x20ac42=await master_shop[_0x28bdbc(0x1e4)](),_0x1c5e6b=_0x4852c8[_0x28bdbc(0x1bf)],_0x12f963=await profile[_0x28bdbc(0x1f5)]({'email':_0x1c5e6b['email']}),_0x40f09d=await staff[_0x28bdbc(0x1f5)]({'email':_0x1c5e6b[_0x28bdbc(0x1e8)]}),_0x374028=await customer[_0x28bdbc(0x1e4)]({'agent_id':_0x40f09d['_id']}),_0x206e9e=mongoose[_0x28bdbc(0x1a1)][_0x28bdbc(0x1d5)],_0x51ba9c=_0x4852c8['params']['id'],_0x28baec=await sales_order[_0x28bdbc(0x1da)](_0x51ba9c),_0x55bd79=await sales_order[_0x28bdbc(0x18c)]([{'$match':{'_id':_0x206e9e(_0x51ba9c)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x28bdbc(0x1c0)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x28bdbc(0x1d2)}}},{'$lookup':{'from':_0x28bdbc(0x1c9),'localField':_0x28bdbc(0x1ab),'foreignField':'_id','as':'account_data'}},{'$unwind':_0x28bdbc(0x198)},{'$lookup':{'from':_0x28bdbc(0x1c9),'localField':'wms_account_id','foreignField':_0x28bdbc(0x21c),'as':_0x28bdbc(0x1ec)}},{'$unwind':{'path':_0x28bdbc(0x1d4),'preserveNullAndEmptyArrays':!![]}}]);if(_0x20ac42[0x0][_0x28bdbc(0x212)]==_0x28bdbc(0x1ac))var _0x4182e7=users[_0x28bdbc(0x20d)];else{if(_0x20ac42[0x0]['language']==_0x28bdbc(0x1f0))var _0x4182e7=users[_0x28bdbc(0x1f0)];else{if(_0x20ac42[0x0][_0x28bdbc(0x212)]==_0x28bdbc(0x1fb))var _0x4182e7=users[_0x28bdbc(0x1fb)];else{if(_0x20ac42[0x0]['language']==_0x28bdbc(0x1ca))var _0x4182e7=users[_0x28bdbc(0x1ca)];else{if(_0x20ac42[0x0][_0x28bdbc(0x212)]==_0x28bdbc(0x191))var _0x4182e7=users[_0x28bdbc(0x191)];else{if(_0x20ac42[0x0][_0x28bdbc(0x212)]==_0x28bdbc(0x204))var _0x4182e7=users[_0x28bdbc(0x21f)];else{if(_0x20ac42[0x0]['language']==_0x28bdbc(0x1cd))var _0x4182e7=users[_0x28bdbc(0x1cd)];else{if(_0x20ac42[0x0][_0x28bdbc(0x212)]==_0x28bdbc(0x1fe))var _0x4182e7=users[_0x28bdbc(0x19f)];}}}}}}}_0x125f2c[_0x28bdbc(0x1b4)](_0x28bdbc(0x1a8),{'success':_0x4852c8[_0x28bdbc(0x1b0)](_0x28bdbc(0x1c2)),'errors':_0x4852c8['flash']('errors'),'master_shop':_0x20ac42,'profile':_0x12f963,'role':_0x1c5e6b,'language':_0x4182e7,'customer':_0x374028,'sales_sa':_0x28baec,'approvers':_0x55bd79[0x0],'staff_arr':_0x40f09d});}catch(_0x52159a){console[_0x28bdbc(0x1f4)](_0x52159a);}}),router[a0_0x52e786(0x1d9)](a0_0x52e786(0x1b6),auth,async(_0x47718e,_0x48fae7)=>{var _0x488a9d=a0_0x52e786;try{const {customer:_0x3b118e,date:_0x26fe0f,prod_code:_0xdc387c,note:_0x550913,paid_status:_0x2bce40,JD:_0x2357ce,po_number:_0x4d9e64,desire_date:_0x304420}=_0x47718e[_0x488a9d(0x206)];if(typeof _0xdc387c==_0x488a9d(0x1ce))var _0x2a2cf0=[_0x47718e[_0x488a9d(0x206)][_0x488a9d(0x1a2)]],_0x226fa6=[_0x47718e[_0x488a9d(0x206)]['prod_name']],_0x3554cd=[_0x47718e[_0x488a9d(0x206)]['primary_code']],_0x529974=[_0x47718e[_0x488a9d(0x206)]['quantity']],_0xace525=[_0x47718e[_0x488a9d(0x206)]['unit']],_0x106e38=[_0x47718e[_0x488a9d(0x206)]['product_id']],_0x40b12c=[_0x47718e[_0x488a9d(0x206)][_0x488a9d(0x1b3)]],_0x51bd22=[_0x47718e['body'][_0x488a9d(0x18f)]],_0x5ac26=[_0x47718e[_0x488a9d(0x206)][_0x488a9d(0x19e)]],_0x19b576=[_0x47718e[_0x488a9d(0x206)][_0x488a9d(0x220)]],_0x1ed1b4=[_0x47718e['body']['dicount_price_adjust']],_0x183a6b=[_0x47718e[_0x488a9d(0x206)]['no_per_unit']],_0x1e465d=[_0x47718e[_0x488a9d(0x206)][_0x488a9d(0x21e)]],_0x2b8cc6=[_0x47718e[_0x488a9d(0x206)][_0x488a9d(0x200)]],_0x14af77=[_0x47718e[_0x488a9d(0x206)][_0x488a9d(0x1be)]],_0x13cebb=[_0x47718e['body'][_0x488a9d(0x1af)]];else var _0x2a2cf0=[..._0x47718e['body']['prod_code']],_0x226fa6=[..._0x47718e[_0x488a9d(0x206)]['prod_name']],_0x3554cd=[..._0x47718e[_0x488a9d(0x206)][_0x488a9d(0x216)]],_0x529974=[..._0x47718e[_0x488a9d(0x206)][_0x488a9d(0x1df)]],_0xace525=[..._0x47718e[_0x488a9d(0x206)]['unit']],_0x106e38=[..._0x47718e[_0x488a9d(0x206)][_0x488a9d(0x1c1)]],_0x40b12c=[..._0x47718e[_0x488a9d(0x206)][_0x488a9d(0x1b3)]],_0x51bd22=[..._0x47718e[_0x488a9d(0x206)]['totalPrice']],_0x5ac26=[..._0x47718e[_0x488a9d(0x206)][_0x488a9d(0x19e)]],_0x19b576=[..._0x47718e['body'][_0x488a9d(0x220)]],_0x1ed1b4=[..._0x47718e['body']['dicount_price_adjust']],_0x183a6b=[..._0x47718e[_0x488a9d(0x206)][_0x488a9d(0x1f1)]],_0x1e465d=[..._0x47718e['body'][_0x488a9d(0x21e)]],_0x2b8cc6=[..._0x47718e['body'][_0x488a9d(0x200)]],_0x14af77=[..._0x47718e[_0x488a9d(0x206)][_0x488a9d(0x1be)]],_0x13cebb=[..._0x47718e[_0x488a9d(0x206)][_0x488a9d(0x1af)]];const _0x5f4867=_0x2a2cf0[_0x488a9d(0x224)](_0x141f26=>{return _0x141f26={'product_code':_0x141f26};});_0x226fa6[_0x488a9d(0x226)]((_0x2d7342,_0x2fc603)=>{var _0x344e01=_0x488a9d;_0x5f4867[_0x2fc603][_0x344e01(0x1dd)]=_0x2d7342;}),_0x3554cd[_0x488a9d(0x226)]((_0xb4de51,_0x1e98e6)=>{_0x5f4867[_0x1e98e6]['primary_code']=_0xb4de51;}),_0x529974['forEach']((_0x47c658,_0x89a92e)=>{var _0x15b7f4=_0x488a9d;_0x5f4867[_0x89a92e][_0x15b7f4(0x1df)]=_0x47c658;}),_0xace525[_0x488a9d(0x226)]((_0x16be75,_0x1bd113)=>{var _0x182e22=_0x488a9d;_0x5f4867[_0x1bd113][_0x182e22(0x218)]=_0x16be75;}),_0x106e38[_0x488a9d(0x226)]((_0x41d0d3,_0x56e633)=>{_0x5f4867[_0x56e633]['product_id']=_0x41d0d3;}),_0x1ed1b4[_0x488a9d(0x226)]((_0x5be04e,_0x5be3a2)=>{var _0x3e2065=_0x488a9d;_0x5f4867[_0x5be3a2][_0x3e2065(0x20c)]=_0x5be04e;}),_0x40b12c[_0x488a9d(0x226)]((_0x161116,_0x5012b1)=>{_0x5f4867[_0x5012b1]['price']=_0x161116;}),_0x51bd22[_0x488a9d(0x226)]((_0x41b141,_0x2cbaf5)=>{var _0x524309=_0x488a9d;_0x5f4867[_0x2cbaf5][_0x524309(0x1dc)]=_0x41b141;}),_0x5ac26[_0x488a9d(0x226)]((_0x4b456c,_0x3c8c65)=>{var _0xc9c9f6=_0x488a9d;_0x5f4867[_0x3c8c65][_0xc9c9f6(0x1e3)]=_0x4b456c;}),_0x19b576[_0x488a9d(0x226)]((_0x410be8,_0xa5caf1)=>{var _0x1f6e8b=_0x488a9d;_0x5f4867[_0xa5caf1][_0x1f6e8b(0x1b5)]=_0x410be8;}),_0x14af77[_0x488a9d(0x226)]((_0x4c3bd2,_0x3e5350)=>{var _0x391834=_0x488a9d;_0x5f4867[_0x3e5350][_0x391834(0x1be)]=_0x4c3bd2;}),_0x1e465d[_0x488a9d(0x226)]((_0x2fbccd,_0xa4cf8e)=>{_0x5f4867[_0xa4cf8e]['real_qty_unit_val']=_0x2fbccd;}),_0x2b8cc6[_0x488a9d(0x226)]((_0xa771a8,_0x1b58bb)=>{var _0x4437e8=_0x488a9d;_0x5f4867[_0x1b58bb][_0x4437e8(0x200)]=_0xa771a8;}),_0x13cebb[_0x488a9d(0x226)]((_0x8cde39,_0x2fd927)=>{_0x5f4867[_0x2fd927]['conversion_data']=_0x8cde39;}),_0x183a6b[_0x488a9d(0x226)]((_0x88de8e,_0x5871d5)=>{var _0x1181d0=_0x488a9d;_0x5f4867[_0x5871d5][_0x1181d0(0x1f1)]=_0x88de8e;});const _0x2cb5f5=await approver_acct[_0x488a9d(0x18c)]([{'$unwind':_0x488a9d(0x20e)},{'$match':{'member.id_member':_0x47718e[_0x488a9d(0x1bf)][_0x488a9d(0x1fa)]}},{'$group':{'_id':{'id_member':_0x488a9d(0x20f),'name':_0x488a9d(0x19b)},'head_id_staff':{'$first':_0x488a9d(0x1cf)}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x488a9d(0x1cf)}}},{'$lookup':{'from':_0x488a9d(0x1c9),'localField':_0x488a9d(0x1a6),'foreignField':'_id','as':_0x488a9d(0x210)}},{'$unwind':'$head_staff_info'}]),_0x22036f=new invoice_for_sales_order();await _0x22036f['save']();const _0x3f14e9=_0x47718e[_0x488a9d(0x1bf)],_0x238861=await staff[_0x488a9d(0x1f5)]({'email':_0x3f14e9[_0x488a9d(0x1e8)]}),_0x1ebc31=new sales_order({'invoice':_0x22036f['invoice_init']['toString']()[_0x488a9d(0x1f9)](0x8,'0'),'customer':_0x3b118e,'date':_0x26fe0f,'sale_product':_0x5f4867,'note':_0x550913,'sales_staff_id':_0x238861[_0x488a9d(0x21c)]['valueOf'](),'JD':_0x2357ce,'accounting_account_id':_0x2cb5f5[0x0][_0x488a9d(0x1c8)],'po_number':_0x4d9e64,'desired_delivery':_0x304420,'wms_account_confirm':_0x488a9d(0x223),'accounting_account_confirm':_0x488a9d(0x223)}),_0x1b6dfb=await _0x1ebc31[_0x488a9d(0x1f3)]();var _0x5bc637=_0x1b6dfb['sale_product'],_0x34d0a0='',_0x2c208b,_0x432676=0x0;for(_0x2c208b in _0x5bc637){_0x34d0a0+=_0x488a9d(0x1d6)+_0x488a9d(0x1b1)+_0x5bc637[_0x2c208b]['product_name']+_0x488a9d(0x199)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5bc637[_0x2c208b]['product_code']+_0x488a9d(0x199)+_0x488a9d(0x1b1)+_0x5bc637[_0x2c208b]['quantity']+_0x488a9d(0x199)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5bc637[_0x2c208b][_0x488a9d(0x218)]+_0x488a9d(0x199)+_0x488a9d(0x209),_0x432676+=parseInt(_0x5bc637[_0x2c208b][_0x488a9d(0x1df)]);}const _0x518953=await master_shop['find'](),_0x26d6b7=await email_settings[_0x488a9d(0x1f5)]();let _0x1ca718=nodemailer['createTransport']({'port':Number(_0x26d6b7['port']),'secure':![],'auth':{'user':_0x26d6b7['email'],'pass':_0x26d6b7[_0x488a9d(0x1c7)]}});const _0x44c8d8=_0x47718e['protocol']+'://'+_0x47718e[_0x488a9d(0x21b)][_0x488a9d(0x1f2)];let _0x2a394a={'from':_0x26d6b7[_0x488a9d(0x1e8)],'to':_0x2cb5f5[0x0][_0x488a9d(0x210)][_0x488a9d(0x1e8)]+_0x488a9d(0x211),'subject':'Approval\x20for\x20'+_0x1b6dfb[_0x488a9d(0x195)],'attachments':[{'filename':'Logo.png','path':__dirname+_0x488a9d(0x197)+_0x488a9d(0x190)+_0x518953[0x0]['image'],'cid':'logo'}],'html':_0x488a9d(0x194)+_0x488a9d(0x1c4)+'<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>'+_0x488a9d(0x1b2)+_0x488a9d(0x1f6)+_0x488a9d(0x1d8)+'<div>'+_0x488a9d(0x1e0)+'</div>'+_0x488a9d(0x1f6)+_0x488a9d(0x1d7)+_0x488a9d(0x18e)+_0x488a9d(0x18e)+'<hr\x20class=\x22my-3\x22>'+_0x488a9d(0x1f6)+'<span>\x20Dear\x20<b>'+_0x2cb5f5[0x0]['head_staff_info']['name']+'</b>,\x20</span><br>'+'</div>'+_0x488a9d(0x1f6)+_0x488a9d(0x1a4)+_0x488a9d(0x18e)+_0x488a9d(0x1f6)+_0x488a9d(0x214)+_0x1b6dfb[_0x488a9d(0x195)]+'</b></span>\x20<br>'+_0x488a9d(0x192)+_0x238861[_0x488a9d(0x1ea)]+'</b></span>\x20<br>'+_0x488a9d(0x1a9)+_0x1b6dfb[_0x488a9d(0x1c6)]+_0x488a9d(0x1e6)+_0x488a9d(0x18e)+_0x488a9d(0x1b7)+_0x488a9d(0x205)+_0x488a9d(0x1d6)+_0x488a9d(0x1bb)+_0x488a9d(0x20a)+_0x488a9d(0x19d)+_0x488a9d(0x1fd)+'</tr>'+'</thead>'+_0x488a9d(0x18d)+'\x20'+_0x34d0a0+'\x20'+_0x488a9d(0x21a)+_0x488a9d(0x1ff)+'<div>'+_0x488a9d(0x1de)+_0x432676+_0x488a9d(0x1f8)+'<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>'+_0x488a9d(0x1e2)+_0x488a9d(0x207)+_0x488a9d(0x18e)+_0x488a9d(0x225)+_0x488a9d(0x1aa)+_0x44c8d8+_0x488a9d(0x1eb)+_0x1b6dfb[_0x488a9d(0x21c)]+_0x488a9d(0x203)+'<br><br>'+_0x488a9d(0x18e)+_0x488a9d(0x1f6)+_0x488a9d(0x202)+_0x488a9d(0x1b8)+_0x488a9d(0x18e)+_0x488a9d(0x18e)+_0x488a9d(0x1ee)+_0x488a9d(0x1e9)};_0x1ca718[_0x488a9d(0x1fc)](_0x2a394a,function(_0x5ef624,_0x49ccae){var _0x5d1477=_0x488a9d;_0x5ef624?(console['log'](_0x5ef624),console['log'](_0x5d1477(0x196))):console[_0x5d1477(0x1f4)](_0x5d1477(0x201));}),_0x47718e[_0x488a9d(0x1b0)](_0x488a9d(0x1c2),'Sales\x20Order\x20is\x20ongoing'),_0x48fae7[_0x488a9d(0x215)](_0x488a9d(0x1a0)+_0x1b6dfb['_id']);}catch(_0x37a5da){}}),router[a0_0x52e786(0x1d9)](a0_0x52e786(0x1c5),auth,async(_0x12c682,_0x38ccd7)=>{var _0xa87e26=a0_0x52e786;try{const _0x331058=_0x12c682['user'],_0x2dbc4c=await profile[_0xa87e26(0x1f5)]({'email':_0x331058[_0xa87e26(0x1e8)]}),_0x21c2d8=await product[_0xa87e26(0x1e4)]({'sales_category':_0x331058[_0xa87e26(0x227)]});_0x38ccd7['json'](_0x21c2d8);}catch(_0xf11a47){}}),router[a0_0x52e786(0x1d9)](a0_0x52e786(0x1e7),auth,async(_0x2312e8,_0x547b47)=>{var _0x343f5d=a0_0x52e786;try{const _0x55a363=_0x2312e8['user'],{id_data:_0x421993}=_0x2312e8[_0x343f5d(0x206)],_0x2c4607=await profile[_0x343f5d(0x1f5)]({'email':_0x55a363[_0x343f5d(0x1e8)]}),_0x33a5ab=mongoose[_0x343f5d(0x1a1)][_0x343f5d(0x1d5)];var _0x1031df=_0x33a5ab(_0x421993);const _0x561769=await product[_0x343f5d(0x1e4)]({'_id':_0x1031df});_0x547b47['json'](_0x561769);}catch(_0x171648){}}),module[a0_0x52e786(0x1ae)]=router;