var a0_0x378919=a0_0x44de;function a0_0x44de(_0xb46320,_0x43aafc){var _0x54f562=a0_0x54f5();return a0_0x44de=function(_0x44de47,_0x252eca){_0x44de47=_0x44de47-0xcb;var _0x26eb87=_0x54f562[_0x44de47];return _0x26eb87;},a0_0x44de(_0xb46320,_0x43aafc);}(function(_0x31eafe,_0x58de0e){var _0x4b571a=a0_0x44de,_0x63cee7=_0x31eafe();while(!![]){try{var _0x278712=parseInt(_0x4b571a(0x12f))/0x1*(-parseInt(_0x4b571a(0x10b))/0x2)+parseInt(_0x4b571a(0x11c))/0x3+parseInt(_0x4b571a(0x167))/0x4+-parseInt(_0x4b571a(0xec))/0x5*(-parseInt(_0x4b571a(0x118))/0x6)+-parseInt(_0x4b571a(0x163))/0x7+-parseInt(_0x4b571a(0x154))/0x8*(parseInt(_0x4b571a(0x11e))/0x9)+parseInt(_0x4b571a(0x101))/0xa*(-parseInt(_0x4b571a(0x107))/0xb);if(_0x278712===_0x58de0e)break;else _0x63cee7['push'](_0x63cee7['shift']());}catch(_0x5b22c8){_0x63cee7['push'](_0x63cee7['shift']());}}}(a0_0x54f5,0x4654b));const express=require(a0_0x378919(0x15e)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x378919(0x11f)),auth=require('../middleware/auth'),users=require(a0_0x378919(0xe1)),excelJS=require(a0_0x378919(0x142)),xlsx=require(a0_0x378919(0xd7)),mongoose=require(a0_0x378919(0xcd)),{ObjectId}=require('mongodb'),nodemailer=require('nodemailer');router[a0_0x378919(0x113)]('/',auth,async(_0x6d047b,_0x5c305a)=>{var _0x56146d=a0_0x378919;try{const _0xf9e639=await master_shop[_0x56146d(0x13a)](),_0x19c7c4=_0x6d047b[_0x56146d(0xed)],_0x2e4c2a=await profile['findOne']({'email':_0x19c7c4[_0x56146d(0x126)]}),_0x4515a6=await staff[_0x56146d(0x134)]({'email':_0x19c7c4[_0x56146d(0x126)]}),_0x3b825f=await sales_order[_0x56146d(0x122)]([{'$match':{'sales_staff_id':_0x4515a6[_0x56146d(0x150)]['valueOf']()}},{'$unwind':_0x56146d(0xf4)},{'$group':{'_id':_0x56146d(0x164),'invoice':{'$first':'$invoice'},'customer':{'$first':'$customer'},'date':{'$first':_0x56146d(0x152)},'JD':{'$first':_0x56146d(0x10c)},'accounting_account_confirm':{'$first':_0x56146d(0x146)},'wms_account_confirm':{'$first':_0x56146d(0x153)},'totalQTY':{'$sum':_0x56146d(0xfb)}}}]);if(_0xf9e639[0x0]['language']=='English\x20(US)')var _0x487f5f=users[_0x56146d(0x16f)];else{if(_0xf9e639[0x0][_0x56146d(0x15c)]==_0x56146d(0x151))var _0x487f5f=users[_0x56146d(0x151)];else{if(_0xf9e639[0x0][_0x56146d(0x15c)]==_0x56146d(0xef))var _0x487f5f=users[_0x56146d(0xef)];else{if(_0xf9e639[0x0][_0x56146d(0x15c)]==_0x56146d(0xe2))var _0x487f5f=users[_0x56146d(0xe2)];else{if(_0xf9e639[0x0][_0x56146d(0x15c)]==_0x56146d(0x11d))var _0x487f5f=users[_0x56146d(0x11d)];else{if(_0xf9e639[0x0][_0x56146d(0x15c)]==_0x56146d(0xd1))var _0x487f5f=users['Portuguese'];else{if(_0xf9e639[0x0]['language']==_0x56146d(0x124))var _0x487f5f=users[_0x56146d(0x124)];else{if(_0xf9e639[0x0]['language']==_0x56146d(0x14a))var _0x487f5f=users[_0x56146d(0xe9)];}}}}}}}_0x5c305a[_0x56146d(0x139)](_0x56146d(0x161),{'success':_0x6d047b[_0x56146d(0x109)](_0x56146d(0xd0)),'errors':_0x6d047b[_0x56146d(0x109)](_0x56146d(0xfc)),'master_shop':_0xf9e639,'profile':_0x2e4c2a,'role':_0x19c7c4,'language':_0x487f5f,'product_list':_0x4515a6[_0x56146d(0x15a)],'sales_mine':_0x3b825f,'staff_arr':_0x4515a6});}catch(_0x3d85fb){console[_0x56146d(0xe4)](_0x3d85fb);}}),router[a0_0x378919(0x113)]('/add_sales',auth,async(_0x297172,_0x270583)=>{var _0x15f15c=a0_0x378919;try{const _0x10fc62=await master_shop['find'](),_0x4c504b=_0x297172[_0x15f15c(0xed)],_0x582fb2=await profile[_0x15f15c(0x134)]({'email':_0x4c504b[_0x15f15c(0x126)]}),_0x34e41b=await staff[_0x15f15c(0x134)]({'email':_0x4c504b[_0x15f15c(0x126)]}),_0xf0604b=await customer[_0x15f15c(0x13a)]({'agent_id':_0x34e41b[_0x15f15c(0x150)]});if(_0x10fc62[0x0][_0x15f15c(0x15c)]==_0x15f15c(0x129))var _0x3d2da9=users[_0x15f15c(0x16f)];else{if(_0x10fc62[0x0]['language']==_0x15f15c(0x151))var _0x3d2da9=users['Hindi'];else{if(_0x10fc62[0x0]['language']=='German')var _0x3d2da9=users[_0x15f15c(0xef)];else{if(_0x10fc62[0x0][_0x15f15c(0x15c)]=='Spanish')var _0x3d2da9=users[_0x15f15c(0xe2)];else{if(_0x10fc62[0x0][_0x15f15c(0x15c)]==_0x15f15c(0x11d))var _0x3d2da9=users[_0x15f15c(0x11d)];else{if(_0x10fc62[0x0][_0x15f15c(0x15c)]=='Portuguese\x20(BR)')var _0x3d2da9=users[_0x15f15c(0xf1)];else{if(_0x10fc62[0x0][_0x15f15c(0x15c)]==_0x15f15c(0x124))var _0x3d2da9=users['Chinese'];else{if(_0x10fc62[0x0][_0x15f15c(0x15c)]==_0x15f15c(0x14a))var _0x3d2da9=users[_0x15f15c(0xe9)];}}}}}}}_0x270583[_0x15f15c(0x139)](_0x15f15c(0x10a),{'success':_0x297172['flash'](_0x15f15c(0xd0)),'errors':_0x297172[_0x15f15c(0x109)](_0x15f15c(0xfc)),'master_shop':_0x10fc62,'profile':_0x582fb2,'role':_0x4c504b,'language':_0x3d2da9,'customer':_0xf0604b,'staff_arr':_0x34e41b});}catch(_0x4574f7){console[_0x15f15c(0xe4)](_0x4574f7);}}),router[a0_0x378919(0x113)](a0_0x378919(0x15b),auth,async(_0x13eee0,_0x12ab0d)=>{var _0x994b95=a0_0x378919;try{const _0x356a7f=await master_shop['find'](),_0xa1776b=_0x13eee0[_0x994b95(0xed)],_0x143bce=await profile[_0x994b95(0x134)]({'email':_0xa1776b['email']}),_0x4bc06f=await staff[_0x994b95(0x134)]({'email':_0xa1776b[_0x994b95(0x126)]}),_0x40660a=await customer['find']({'agent_id':_0x4bc06f[_0x994b95(0x150)]}),_0x1f2839=mongoose[_0x994b95(0xdb)][_0x994b95(0x130)],_0x583b5e=_0x13eee0[_0x994b95(0xcf)]['id'],_0x4c0f98=await sales_order[_0x994b95(0xf6)](_0x583b5e),_0x3f5fa3=await sales_order[_0x994b95(0x122)]([{'$match':{'_id':_0x1f2839(_0x583b5e)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x994b95(0x160)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x994b95(0x119)}}},{'$lookup':{'from':'staffs','localField':_0x994b95(0xd6),'foreignField':_0x994b95(0x150),'as':_0x994b95(0x14e)}},{'$unwind':_0x994b95(0x165)},{'$lookup':{'from':_0x994b95(0x120),'localField':_0x994b95(0x11b),'foreignField':'_id','as':'wms_data'}},{'$unwind':{'path':_0x994b95(0x138),'preserveNullAndEmptyArrays':!![]}}]);if(_0x356a7f[0x0][_0x994b95(0x15c)]==_0x994b95(0x129))var _0x359ff6=users[_0x994b95(0x16f)];else{if(_0x356a7f[0x0]['language']==_0x994b95(0x151))var _0x359ff6=users[_0x994b95(0x151)];else{if(_0x356a7f[0x0]['language']==_0x994b95(0xef))var _0x359ff6=users[_0x994b95(0xef)];else{if(_0x356a7f[0x0][_0x994b95(0x15c)]==_0x994b95(0xe2))var _0x359ff6=users[_0x994b95(0xe2)];else{if(_0x356a7f[0x0][_0x994b95(0x15c)]==_0x994b95(0x11d))var _0x359ff6=users[_0x994b95(0x11d)];else{if(_0x356a7f[0x0][_0x994b95(0x15c)]=='Portuguese\x20(BR)')var _0x359ff6=users[_0x994b95(0xf1)];else{if(_0x356a7f[0x0]['language']==_0x994b95(0x124))var _0x359ff6=users[_0x994b95(0x124)];else{if(_0x356a7f[0x0][_0x994b95(0x15c)]==_0x994b95(0x14a))var _0x359ff6=users[_0x994b95(0xe9)];}}}}}}}_0x12ab0d[_0x994b95(0x139)](_0x994b95(0x14f),{'success':_0x13eee0['flash'](_0x994b95(0xd0)),'errors':_0x13eee0[_0x994b95(0x109)](_0x994b95(0xfc)),'master_shop':_0x356a7f,'profile':_0x143bce,'role':_0xa1776b,'language':_0x359ff6,'customer':_0x40660a,'sales_sa':_0x4c0f98,'approvers':_0x3f5fa3[0x0],'staff_arr':_0x4bc06f});}catch(_0x372eec){console['log'](_0x372eec);}}),router[a0_0x378919(0x10d)](a0_0x378919(0xf7),auth,async(_0x30ddef,_0x499845)=>{var _0x420fb2=a0_0x378919;try{const {customer:_0x5abb68,date:_0x6320db,prod_code:_0x4287dc,note:_0x86974d,paid_status:_0x2d27bf,JD:_0x45f25a,po_number:_0x31a5c6,desire_date:_0x59c0a8}=_0x30ddef[_0x420fb2(0x133)];if(typeof _0x4287dc==_0x420fb2(0x15d))var _0x2351ce=[_0x30ddef[_0x420fb2(0x133)][_0x420fb2(0xd4)]],_0x3ec2b8=[_0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x117)]],_0x340407=[_0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x145)]],_0x41a4ee=[_0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x13d)]],_0x45ef2c=[_0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x115)]],_0x4bd1a2=[_0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x100)]],_0x89d836=[_0x30ddef['body'][_0x420fb2(0x127)]],_0x306ad2=[_0x30ddef['body'][_0x420fb2(0x12a)]],_0x1f2f64=[_0x30ddef['body'][_0x420fb2(0x156)]],_0x5f0261=[_0x30ddef['body'][_0x420fb2(0xf2)]],_0x65a5ff=[_0x30ddef['body'][_0x420fb2(0x136)]],_0x851b19=[_0x30ddef[_0x420fb2(0x133)]['no_per_unit']],_0x477bd4=[_0x30ddef[_0x420fb2(0x133)][_0x420fb2(0xd8)]],_0x38ea23=[_0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x155)]],_0x420480=[_0x30ddef[_0x420fb2(0x133)][_0x420fb2(0xdf)]],_0x5e5d68=[_0x30ddef['body'][_0x420fb2(0x166)]];else var _0x2351ce=[..._0x30ddef[_0x420fb2(0x133)][_0x420fb2(0xd4)]],_0x3ec2b8=[..._0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x117)]],_0x340407=[..._0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x145)]],_0x41a4ee=[..._0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x13d)]],_0x45ef2c=[..._0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x115)]],_0x4bd1a2=[..._0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x100)]],_0x89d836=[..._0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x127)]],_0x306ad2=[..._0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x12a)]],_0x1f2f64=[..._0x30ddef[_0x420fb2(0x133)]['dicount_price']],_0x5f0261=[..._0x30ddef[_0x420fb2(0x133)][_0x420fb2(0xf2)]],_0x65a5ff=[..._0x30ddef['body'][_0x420fb2(0x136)]],_0x851b19=[..._0x30ddef[_0x420fb2(0x133)]['no_per_unit']],_0x477bd4=[..._0x30ddef[_0x420fb2(0x133)]['getPrimUnitNo']],_0x38ea23=[..._0x30ddef[_0x420fb2(0x133)]['prod_cat']],_0x420480=[..._0x30ddef[_0x420fb2(0x133)][_0x420fb2(0xdf)]],_0x5e5d68=[..._0x30ddef[_0x420fb2(0x133)][_0x420fb2(0x166)]];const _0x2a74c2=_0x2351ce[_0x420fb2(0x103)](_0x3c4d48=>{return _0x3c4d48={'product_code':_0x3c4d48};});_0x3ec2b8[_0x420fb2(0x143)]((_0x5d30ec,_0xd7b55f)=>{var _0x47d686=_0x420fb2;_0x2a74c2[_0xd7b55f][_0x47d686(0x13b)]=_0x5d30ec;}),_0x340407['forEach']((_0x1d0c13,_0x2cd300)=>{_0x2a74c2[_0x2cd300]['primary_code']=_0x1d0c13;}),_0x41a4ee['forEach']((_0x1fcf31,_0x5a218c)=>{_0x2a74c2[_0x5a218c]['quantity']=_0x1fcf31;}),_0x45ef2c['forEach']((_0x53355b,_0x3cc611)=>{_0x2a74c2[_0x3cc611]['unit']=_0x53355b;}),_0x4bd1a2[_0x420fb2(0x143)]((_0x4c40cc,_0x4d84b0)=>{var _0x4030cc=_0x420fb2;_0x2a74c2[_0x4d84b0][_0x4030cc(0x100)]=_0x4c40cc;}),_0x65a5ff[_0x420fb2(0x143)]((_0x3fbefa,_0x35892f)=>{var _0x23bb37=_0x420fb2;_0x2a74c2[_0x35892f][_0x23bb37(0xe8)]=_0x3fbefa;}),_0x89d836['forEach']((_0x2651e0,_0x59bac0)=>{var _0x2b321d=_0x420fb2;_0x2a74c2[_0x59bac0][_0x2b321d(0x127)]=_0x2651e0;}),_0x306ad2[_0x420fb2(0x143)]((_0x4671dd,_0x173cd8)=>{var _0x59b6cb=_0x420fb2;_0x2a74c2[_0x173cd8][_0x59b6cb(0xeb)]=_0x4671dd;}),_0x1f2f64[_0x420fb2(0x143)]((_0x2d1581,_0x51b30f)=>{var _0x2d6f6b=_0x420fb2;_0x2a74c2[_0x51b30f][_0x2d6f6b(0xdd)]=_0x2d1581;}),_0x5f0261[_0x420fb2(0x143)]((_0x54abaf,_0x4f2d24)=>{_0x2a74c2[_0x4f2d24]['isFG']=_0x54abaf;}),_0x420480[_0x420fb2(0x143)]((_0x15db8d,_0x1d29f8)=>{_0x2a74c2[_0x1d29f8]['secondary_unit']=_0x15db8d;}),_0x477bd4[_0x420fb2(0x143)]((_0x5c4095,_0x49a174)=>{var _0x58aa1b=_0x420fb2;_0x2a74c2[_0x49a174][_0x58aa1b(0x128)]=_0x5c4095;}),_0x38ea23['forEach']((_0x34807f,_0x307c55)=>{var _0xfac805=_0x420fb2;_0x2a74c2[_0x307c55][_0xfac805(0x155)]=_0x34807f;}),_0x5e5d68[_0x420fb2(0x143)]((_0x32ea47,_0x221875)=>{var _0x1e44b8=_0x420fb2;_0x2a74c2[_0x221875][_0x1e44b8(0x135)]=_0x32ea47;}),_0x851b19['forEach']((_0x3c7030,_0x4e6c80)=>{var _0x5b2fdf=_0x420fb2;_0x2a74c2[_0x4e6c80][_0x5b2fdf(0xfe)]=_0x3c7030;});const _0xe8265=await approver_acct['aggregate']([{'$unwind':_0x420fb2(0xf0)},{'$match':{'member.id_member':_0x30ddef[_0x420fb2(0xed)][_0x420fb2(0x106)]}},{'$group':{'_id':{'id_member':_0x420fb2(0xd5),'name':_0x420fb2(0xea)},'head_id_staff':{'$first':'$head_id_staff'}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':_0x420fb2(0x16d)}}},{'$lookup':{'from':_0x420fb2(0x120),'localField':_0x420fb2(0x131),'foreignField':_0x420fb2(0x150),'as':_0x420fb2(0x12b)}},{'$unwind':'$head_staff_info'}]),_0x395390=new invoice_for_sales_order();await _0x395390[_0x420fb2(0x148)]();const _0x1e9746=_0x30ddef[_0x420fb2(0xed)],_0x14f69f=await staff[_0x420fb2(0x134)]({'email':_0x1e9746[_0x420fb2(0x126)]}),_0x5bdd8b=new sales_order({'invoice':_0x395390[_0x420fb2(0x112)][_0x420fb2(0xcc)]()[_0x420fb2(0xf5)](0x8,'0'),'customer':_0x5abb68,'date':_0x6320db,'sale_product':_0x2a74c2,'note':_0x86974d,'sales_staff_id':_0x14f69f['_id'][_0x420fb2(0x12e)](),'JD':_0x45f25a,'accounting_account_id':_0xe8265[0x0][_0x420fb2(0xfa)],'po_number':_0x31a5c6,'desired_delivery':_0x59c0a8,'wms_account_confirm':_0x420fb2(0xde),'accounting_account_confirm':_0x420fb2(0xde)}),_0x3de639=await _0x5bdd8b['save']();var _0x37266a=_0x3de639[_0x420fb2(0x16c)],_0x1db42a='',_0x228e80,_0xa53eb5=0x0;for(_0x228e80 in _0x37266a){_0x1db42a+=_0x420fb2(0xee)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x37266a[_0x228e80][_0x420fb2(0x13b)]+_0x420fb2(0x16e)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x37266a[_0x228e80][_0x420fb2(0xcb)]+_0x420fb2(0x16e)+_0x420fb2(0x114)+_0x37266a[_0x228e80]['quantity']+'</td>'+_0x420fb2(0x114)+_0x37266a[_0x228e80][_0x420fb2(0x115)]+'</td>'+'</tr>',_0xa53eb5+=parseInt(_0x37266a[_0x228e80][_0x420fb2(0x13d)]);}const _0x3cc8b8=await master_shop[_0x420fb2(0x13a)](),_0x3e7044=await email_settings[_0x420fb2(0x134)]();let _0x5c788b=nodemailer['createTransport']({'port':Number(_0x3e7044[_0x420fb2(0x102)]),'secure':![],'auth':{'user':_0x3e7044[_0x420fb2(0x126)],'pass':_0x3e7044['password']}});const _0x210221=_0x30ddef[_0x420fb2(0x13e)]+_0x420fb2(0x13f)+_0x30ddef[_0x420fb2(0x137)][_0x420fb2(0x132)];let _0x5adc1c={'from':_0x3e7044[_0x420fb2(0x126)],'to':_0xe8265[0x0][_0x420fb2(0x12b)][_0x420fb2(0x126)]+_0x420fb2(0x116),'subject':_0x420fb2(0x14b)+_0x3de639[_0x420fb2(0x10e)],'attachments':[{'filename':_0x420fb2(0x11a),'path':__dirname+_0x420fb2(0x13c)+'/upload/'+_0x3cc8b8[0x0][_0x420fb2(0xe6)],'cid':_0x420fb2(0xce)}],'html':_0x420fb2(0x158)+_0x420fb2(0x141)+_0x420fb2(0x144)+_0x420fb2(0x105)+_0x420fb2(0x162)+_0x420fb2(0x108)+_0x420fb2(0x162)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x420fb2(0x110)+_0x420fb2(0x162)+_0x420fb2(0xd3)+_0x420fb2(0x110)+_0x420fb2(0x110)+_0x420fb2(0x16b)+_0x420fb2(0x162)+_0x420fb2(0x140)+_0xe8265[0x0][_0x420fb2(0x12b)][_0x420fb2(0x12c)]+'</b>,\x20</span><br>'+_0x420fb2(0x110)+_0x420fb2(0x162)+_0x420fb2(0xf9)+'</div>'+_0x420fb2(0x162)+_0x420fb2(0xfd)+_0x3de639[_0x420fb2(0x10e)]+_0x420fb2(0xd2)+_0x420fb2(0x14c)+_0x14f69f['name']+_0x420fb2(0xd2)+_0x420fb2(0x125)+_0x3de639[_0x420fb2(0x157)]+_0x420fb2(0x14d)+_0x420fb2(0x110)+_0x420fb2(0x123)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x420fb2(0xee)+_0x420fb2(0x104)+_0x420fb2(0xe5)+_0x420fb2(0x12d)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x420fb2(0xe0)+_0x420fb2(0xd9)+_0x420fb2(0x168)+'\x20'+_0x1db42a+'\x20'+'</tbody>'+'</table>'+_0x420fb2(0x162)+_0x420fb2(0x15f)+_0xa53eb5+_0x420fb2(0xff)+'<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>'+_0x420fb2(0x169)+_0x420fb2(0x121)+_0x420fb2(0x110)+_0x420fb2(0x111)+_0x420fb2(0xf3)+_0x210221+_0x420fb2(0x147)+_0x3de639[_0x420fb2(0x150)]+_0x420fb2(0x10f)+_0x420fb2(0x149)+_0x420fb2(0x110)+'<div>'+'<strong>\x20Regards\x20</strong>'+_0x420fb2(0xda)+_0x420fb2(0x110)+_0x420fb2(0x110)+'<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>'+_0x420fb2(0x159)};_0x5c788b[_0x420fb2(0x16a)](_0x5adc1c,function(_0xa1791c,_0x1bfef9){var _0x33c7ec=_0x420fb2;_0xa1791c?(console['log'](_0xa1791c),console[_0x33c7ec(0xe4)]('Error\x20Occurs')):console[_0x33c7ec(0xe4)](_0x33c7ec(0xf8));}),_0x30ddef[_0x420fb2(0x109)]('success',_0x420fb2(0xe3)),_0x499845[_0x420fb2(0xe7)]('/sales_order/view_sales/'+_0x3de639['_id']);}catch(_0x5c2151){}}),router[a0_0x378919(0x10d)]('/product_list',auth,async(_0x23a1b4,_0x3d251f)=>{var _0x435695=a0_0x378919;try{const _0x264466=_0x23a1b4[_0x435695(0xed)],_0x4a2cfb=await profile['findOne']({'email':_0x264466[_0x435695(0x126)]}),_0xefd0ff=await product[_0x435695(0x13a)]({'sales_category':_0x264466['sales_category']});_0x3d251f[_0x435695(0xdc)](_0xefd0ff);}catch(_0x3e7cf3){}}),router[a0_0x378919(0x10d)]('/product_data',auth,async(_0xd5c8b9,_0xf8c4ee)=>{var _0x3a1cac=a0_0x378919;try{const _0x44fed8=_0xd5c8b9[_0x3a1cac(0xed)],{id_data:_0x16bb4d}=_0xd5c8b9[_0x3a1cac(0x133)],_0x2fc373=await profile[_0x3a1cac(0x134)]({'email':_0x44fed8[_0x3a1cac(0x126)]}),_0x328289=mongoose[_0x3a1cac(0xdb)][_0x3a1cac(0x130)];var _0x7c3bdb=_0x328289(_0x16bb4d);const _0x86f4c0=await product[_0x3a1cac(0x13a)]({'_id':_0x7c3bdb});_0xf8c4ee[_0x3a1cac(0xdc)](_0x86f4c0);}catch(_0x15ef4a){}}),module['exports']=router;function a0_0x54f5(){var _0x317c47=['conversion_unit','1550592pIJVFh','<tbody\x20style=\x22text-align:\x20center;\x22>','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','sendMail','<hr\x20class=\x22my-3\x22>','sale_product','$head_id_staff','</td>','English','product_code','toString','mongoose','logo','params','success','Portuguese\x20(BR)','</b></span>\x20<br>','<h2>\x20JEC\x20SMS\x20</h2>','prod_code','$member.id_member','accounting_account_id','xlsx','getPrimUnitNo','</thead>','<h5>\x20JEC\x20SMS\x20</h5>','Types','json','discount','true','secondary_unit','</tr>','../public/language/languages.json','Spanish','Sales\x20Order\x20is\x20ongoing','log','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','image','redirect','adjustment_discount','Arabic','$member.name','totalprice','94565XGemOc','user','<tr>','German','$member','Portuguese','tmpisFG','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','$sale_product','padStart','findById','/add_sales','Email\x20sent\x20successfully','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','head_id_staff','$sale_product.quantity','errors','<span>\x20Request\x20ID:\x20<b>','no_per_unit','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','product_id','430BgDTSL','port','map','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','</head><body>','sttaff_id','35651xDDRZE','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','flash','add_sales_order','958qozjcd','$JD','post','invoice','\x22>Change\x20Status</a>','</div>','<div\x20style=\x22text-align:\x20center;\x22>','invoice_init','get','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','unit',';christian.villamer@jakagroup.com','prod_name','18KhMItL','$wms_account_id','Logo.png','wms_account_id','1389747THhWKL','French','9CbwaPx','../models/all_models','staffs','<br><br><br>','aggregate','<table\x20style=\x22width:\x20100%\x20!important;\x22>','Chinese','<span>\x20Request\x20Date:\x20<b>','email','price','real_qty_unit_val','English\x20(US)','totalPrice','head_staff_info','name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','valueOf','21btZsfd','ObjectId','head_id_staff_id','host','body','findOne','conversion_data','dicount_price_adjust','headers','$wms_data','render','find','product_name','/../public','quantity','protocol','://','<span>\x20Dear\x20<b>','<html><head><title></title>','exceljs','forEach','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','primary_code','$accounting_account_confirm','/accounting_approval/','save','<br><br>','Arabic\x20(ae)','Approval\x20for\x20','<span>\x20Requested\x20By:\x20<b>','</b></span>\x20<br><br>','account_data','view_sales_order','_id','Hindi','$date','$wms_account_confirm','3574248KdVVKT','prod_cat','dicount_price','date','<!DOCTYPE\x20html>','</body></html>','product_list','/view_sales/:id','language','string','express','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','$accounting_account_id','all_sales_order','<div>','163506RvNvvB','$_id','$account_data'];a0_0x54f5=function(){return _0x317c47;};return a0_0x54f5();}