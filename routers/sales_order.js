var a0_0x107067=a0_0x36b7;(function(_0x4d3e5a,_0x55b0e9){var _0x51d038=a0_0x36b7,_0x373e21=_0x4d3e5a();while(!![]){try{var _0x55b779=-parseInt(_0x51d038(0x6e))/0x1+-parseInt(_0x51d038(0x7f))/0x2*(-parseInt(_0x51d038(0x73))/0x3)+parseInt(_0x51d038(0x80))/0x4*(-parseInt(_0x51d038(0xbf))/0x5)+-parseInt(_0x51d038(0x83))/0x6+parseInt(_0x51d038(0x82))/0x7+-parseInt(_0x51d038(0xd0))/0x8+parseInt(_0x51d038(0xa1))/0x9;if(_0x55b779===_0x55b0e9)break;else _0x373e21['push'](_0x373e21['shift']());}catch(_0x245fda){_0x373e21['push'](_0x373e21['shift']());}}}(a0_0x4bcf,0x58e4b));function a0_0x4bcf(){var _0x3d52cc=['316556EXaqoN','4hhhoym','../middleware/auth','3860094XKFkjb','583440TtonVS','$accounting_account_id','email','/upload/','exports','prod_code','totalPrice','<tr>','exceljs','date','aggregate','product_id','express','getPrimUnitNo','product_list','user','conversion_data','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','prod_cat','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','flash','</thead>','$JD','findOne','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','Error\x20Occurs','Portuguese\x20(BR)','padStart','map','$head_staff_info','692460erEQqf','$date','dicount_price_adjust','name','<hr\x20class=\x22my-3\x22>','../public/language/languages.json','</b>.\x20These\x20products\x20are\x20essential\x20to\x20improve\x20our\x20warehouse\x20efficiency\x20and\x20ensure\x20smooth\x20operations.\x20</span>','forEach','language','json','<span>\x20Request\x20Date:\x20<b>','<tbody\x20style=\x22text-align:\x20center;\x22>','<a\x20style=\x22background-color:\x20#007bff;\x20color:\x20#ffffff;\x20border:\x20none;\x20padding:\x2010px\x2020px;\x20border-radius:\x205px;\x22\x20href=\x22','find','string','$invoice','accounting_account_id','ObjectId','Chinese','French','/product_list','$member.name','_id','head_id_staff_id','nodemailer','image','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','</td>','wms_data','invoice_init','1154765bgbsZO','../models/all_models','xlsx','/sales_order/view_sales/','<span>\x20Requested\x20By:\x20<b>','<html><head><title></title>','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','</head><body>','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','logo','discount','protocol','</b>,\x20</span><br>','log','<div>','English\x20(US)','isFG','1915376inmUyo','</div>','totalprice','price','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','product_code','sttaff_id','unit','errors','invoice','dicount_price','Portuguese','wms_account_id','Arabic','render','Hindi','valueOf','host','port','<br><br>','/accounting_approval/','\x22>Change\x20Status</a>','mongodb','Spanish','<h5>\x20JEC\x20SMS\x20</h5>','English','</b></span>\x20<br>','Types','<table\x20style=\x22width:\x20100%\x20!important;\x22>','sales_category','true','createTransport','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','<strong>\x20Regards\x20</strong>','<br><br><br>','sale_product','/view_sales/:id','headers','$wms_data','Logo.png','primary_code','Arabic\x20(ae)','body','all_sales_order','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','Approval\x20for\x20','$_id','/add_sales','no_per_unit','get','<span>\x20Request\x20ID:\x20<b>','toString','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','$member','account_data','redirect','$wms_account_id','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','</table>','<!DOCTYPE\x20html>','<br><br><span>\x20The\x20total\x20quantity\x20for\x20these\x20items\x20is\x20<b>','329772mItggj','</body></html>','product_name','success','German','12WcUsUC','conversion_unit','secondary_unit','password',';christian.villamer@jakagroup.com','real_qty_unit_val','quantity','prod_name','staffs','</tr>','$customer','post'];a0_0x4bcf=function(){return _0x3d52cc;};return a0_0x4bcf();}const express=require(a0_0x107067(0x8f)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings}=require(a0_0x107067(0xc0)),auth=require(a0_0x107067(0x81)),users=require(a0_0x107067(0xa6)),excelJS=require(a0_0x107067(0x8b)),xlsx=require(a0_0x107067(0xc1)),mongoose=require('mongoose'),{ObjectId}=require(a0_0x107067(0xe6)),nodemailer=require(a0_0x107067(0xb9));function a0_0x36b7(_0x22283f,_0xc573b5){var _0x4bcf9f=a0_0x4bcf();return a0_0x36b7=function(_0x36b7d2,_0x424791){_0x36b7d2=_0x36b7d2-0x67;var _0x286c7=_0x4bcf9f[_0x36b7d2];return _0x286c7;},a0_0x36b7(_0x22283f,_0xc573b5);}router[a0_0x107067(0x101)]('/',auth,async(_0x569164,_0x2a41e9)=>{var _0x44f4d3=a0_0x107067;try{const _0x5beeff=await master_shop[_0x44f4d3(0xae)](),_0x59ae6f=_0x569164[_0x44f4d3(0x92)],_0x3d8f07=await profile['findOne']({'email':_0x59ae6f['email']}),_0x165e62=await staff['findOne']({'email':_0x59ae6f['email']}),_0x8308b7=await sales_order[_0x44f4d3(0x8d)]([{'$match':{'sales_staff_id':_0x165e62['_id'][_0x44f4d3(0xe0)]()}},{'$unwind':'$sale_product'},{'$group':{'_id':_0x44f4d3(0xfe),'invoice':{'$first':_0x44f4d3(0xb0)},'customer':{'$first':_0x44f4d3(0x7d)},'date':{'$first':_0x44f4d3(0xa2)},'JD':{'$first':_0x44f4d3(0x99)},'accounting_account_confirm':{'$first':'$accounting_account_confirm'},'wms_account_confirm':{'$first':'$wms_account_confirm'},'totalQTY':{'$sum':'$sale_product.quantity'}}}]);if(_0x5beeff[0x0][_0x44f4d3(0xa9)]==_0x44f4d3(0xce))var _0x2b7a13=users[_0x44f4d3(0xe9)];else{if(_0x5beeff[0x0][_0x44f4d3(0xa9)]==_0x44f4d3(0xdf))var _0x2b7a13=users[_0x44f4d3(0xdf)];else{if(_0x5beeff[0x0][_0x44f4d3(0xa9)]==_0x44f4d3(0x72))var _0x2b7a13=users['German'];else{if(_0x5beeff[0x0][_0x44f4d3(0xa9)]==_0x44f4d3(0xe7))var _0x2b7a13=users['Spanish'];else{if(_0x5beeff[0x0]['language']=='French')var _0x2b7a13=users['French'];else{if(_0x5beeff[0x0]['language']==_0x44f4d3(0x9d))var _0x2b7a13=users['Portuguese'];else{if(_0x5beeff[0x0][_0x44f4d3(0xa9)]==_0x44f4d3(0xb3))var _0x2b7a13=users[_0x44f4d3(0xb3)];else{if(_0x5beeff[0x0]['language']==_0x44f4d3(0xf9))var _0x2b7a13=users[_0x44f4d3(0xdd)];}}}}}}}_0x2a41e9[_0x44f4d3(0xde)](_0x44f4d3(0xfb),{'success':_0x569164[_0x44f4d3(0x97)](_0x44f4d3(0x71)),'errors':_0x569164[_0x44f4d3(0x97)]('errors'),'master_shop':_0x5beeff,'profile':_0x3d8f07,'role':_0x59ae6f,'language':_0x2b7a13,'product_list':_0x165e62[_0x44f4d3(0x91)],'sales_mine':_0x8308b7,'staff_arr':_0x165e62});}catch(_0x237f4d){console['log'](_0x237f4d);}}),router['get'](a0_0x107067(0xff),auth,async(_0x4e9304,_0x1a5e2c)=>{var _0x5b07a1=a0_0x107067;try{const _0x45ea9e=await master_shop[_0x5b07a1(0xae)](),_0x3f60b6=_0x4e9304[_0x5b07a1(0x92)],_0x4dd519=await profile[_0x5b07a1(0x9a)]({'email':_0x3f60b6['email']}),_0x18d2fa=await staff[_0x5b07a1(0x9a)]({'email':_0x3f60b6[_0x5b07a1(0x85)]}),_0x710867=await customer['find']({'agent_id':_0x18d2fa[_0x5b07a1(0xb7)]});if(_0x45ea9e[0x0][_0x5b07a1(0xa9)]==_0x5b07a1(0xce))var _0x5b032a=users['English'];else{if(_0x45ea9e[0x0][_0x5b07a1(0xa9)]==_0x5b07a1(0xdf))var _0x5b032a=users[_0x5b07a1(0xdf)];else{if(_0x45ea9e[0x0][_0x5b07a1(0xa9)]==_0x5b07a1(0x72))var _0x5b032a=users[_0x5b07a1(0x72)];else{if(_0x45ea9e[0x0]['language']=='Spanish')var _0x5b032a=users[_0x5b07a1(0xe7)];else{if(_0x45ea9e[0x0][_0x5b07a1(0xa9)]=='French')var _0x5b032a=users[_0x5b07a1(0xb4)];else{if(_0x45ea9e[0x0]['language']=='Portuguese\x20(BR)')var _0x5b032a=users[_0x5b07a1(0xdb)];else{if(_0x45ea9e[0x0][_0x5b07a1(0xa9)]==_0x5b07a1(0xb3))var _0x5b032a=users[_0x5b07a1(0xb3)];else{if(_0x45ea9e[0x0][_0x5b07a1(0xa9)]==_0x5b07a1(0xf9))var _0x5b032a=users['Arabic'];}}}}}}}_0x1a5e2c['render']('add_sales_order',{'success':_0x4e9304['flash'](_0x5b07a1(0x71)),'errors':_0x4e9304[_0x5b07a1(0x97)](_0x5b07a1(0xd8)),'master_shop':_0x45ea9e,'profile':_0x4dd519,'role':_0x3f60b6,'language':_0x5b032a,'customer':_0x710867,'staff_arr':_0x18d2fa});}catch(_0x1b986b){console['log'](_0x1b986b);}}),router[a0_0x107067(0x101)](a0_0x107067(0xf4),auth,async(_0x42dd7b,_0x2c51a9)=>{var _0x233d6a=a0_0x107067;try{const _0x3347e2=await master_shop[_0x233d6a(0xae)](),_0x4675bc=_0x42dd7b[_0x233d6a(0x92)],_0x586335=await profile[_0x233d6a(0x9a)]({'email':_0x4675bc[_0x233d6a(0x85)]}),_0x51d128=await staff['findOne']({'email':_0x4675bc['email']}),_0x1d53f8=await customer[_0x233d6a(0xae)]({'agent_id':_0x51d128[_0x233d6a(0xb7)]}),_0x24adec=mongoose[_0x233d6a(0xeb)][_0x233d6a(0xb2)],_0x2e1c22=_0x42dd7b['params']['id'],_0x34eee9=await sales_order['findById'](_0x2e1c22),_0x51fe85=await sales_order[_0x233d6a(0x8d)]([{'$match':{'_id':_0x24adec(_0x2e1c22)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x233d6a(0x84)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x233d6a(0x69)}}},{'$lookup':{'from':_0x233d6a(0x7b),'localField':_0x233d6a(0xb1),'foreignField':_0x233d6a(0xb7),'as':_0x233d6a(0x67)}},{'$unwind':'$account_data'},{'$lookup':{'from':'staffs','localField':_0x233d6a(0xdc),'foreignField':_0x233d6a(0xb7),'as':_0x233d6a(0xbd)}},{'$unwind':{'path':_0x233d6a(0xf6),'preserveNullAndEmptyArrays':!![]}}]);if(_0x3347e2[0x0][_0x233d6a(0xa9)]=='English\x20(US)')var _0x38a37f=users['English'];else{if(_0x3347e2[0x0][_0x233d6a(0xa9)]==_0x233d6a(0xdf))var _0x38a37f=users[_0x233d6a(0xdf)];else{if(_0x3347e2[0x0]['language']==_0x233d6a(0x72))var _0x38a37f=users[_0x233d6a(0x72)];else{if(_0x3347e2[0x0][_0x233d6a(0xa9)]=='Spanish')var _0x38a37f=users[_0x233d6a(0xe7)];else{if(_0x3347e2[0x0][_0x233d6a(0xa9)]==_0x233d6a(0xb4))var _0x38a37f=users[_0x233d6a(0xb4)];else{if(_0x3347e2[0x0][_0x233d6a(0xa9)]=='Portuguese\x20(BR)')var _0x38a37f=users[_0x233d6a(0xdb)];else{if(_0x3347e2[0x0][_0x233d6a(0xa9)]=='Chinese')var _0x38a37f=users[_0x233d6a(0xb3)];else{if(_0x3347e2[0x0][_0x233d6a(0xa9)]==_0x233d6a(0xf9))var _0x38a37f=users[_0x233d6a(0xdd)];}}}}}}}_0x2c51a9[_0x233d6a(0xde)]('view_sales_order',{'success':_0x42dd7b[_0x233d6a(0x97)]('success'),'errors':_0x42dd7b[_0x233d6a(0x97)](_0x233d6a(0xd8)),'master_shop':_0x3347e2,'profile':_0x586335,'role':_0x4675bc,'language':_0x38a37f,'customer':_0x1d53f8,'sales_sa':_0x34eee9,'approvers':_0x51fe85[0x0],'staff_arr':_0x51d128});}catch(_0xd6c3bd){console[_0x233d6a(0xcc)](_0xd6c3bd);}}),router[a0_0x107067(0x7e)]('/add_sales',auth,async(_0x3b704a,_0x2d3a68)=>{var _0x187786=a0_0x107067;try{const {customer:_0x379e38,date:_0x29b2b6,prod_code:_0x1d41b7,note:_0x4b714d,paid_status:_0x4f74cb,JD:_0x29ea26,po_number:_0x2d4757,desire_date:_0x1ec6a3}=_0x3b704a[_0x187786(0xfa)];if(typeof _0x1d41b7==_0x187786(0xaf))var _0x4ec03d=[_0x3b704a['body'][_0x187786(0x88)]],_0x2bc8f8=[_0x3b704a[_0x187786(0xfa)][_0x187786(0x7a)]],_0x2cbe0e=[_0x3b704a[_0x187786(0xfa)][_0x187786(0xf8)]],_0x387bd3=[_0x3b704a[_0x187786(0xfa)]['quantity']],_0x163bee=[_0x3b704a[_0x187786(0xfa)][_0x187786(0xd7)]],_0x33197d=[_0x3b704a[_0x187786(0xfa)][_0x187786(0x8e)]],_0x283634=[_0x3b704a[_0x187786(0xfa)][_0x187786(0xd3)]],_0x3007d1=[_0x3b704a['body']['totalPrice']],_0x4f7014=[_0x3b704a[_0x187786(0xfa)][_0x187786(0xda)]],_0x51931a=[_0x3b704a[_0x187786(0xfa)]['tmpisFG']],_0x13605e=[_0x3b704a[_0x187786(0xfa)][_0x187786(0xa3)]],_0x2a444d=[_0x3b704a[_0x187786(0xfa)][_0x187786(0x100)]],_0x4472e4=[_0x3b704a[_0x187786(0xfa)][_0x187786(0x90)]],_0x567446=[_0x3b704a[_0x187786(0xfa)][_0x187786(0x95)]],_0x420607=[_0x3b704a['body']['secondary_unit']],_0x465ece=[_0x3b704a[_0x187786(0xfa)][_0x187786(0x74)]];else var _0x4ec03d=[..._0x3b704a[_0x187786(0xfa)][_0x187786(0x88)]],_0x2bc8f8=[..._0x3b704a[_0x187786(0xfa)]['prod_name']],_0x2cbe0e=[..._0x3b704a[_0x187786(0xfa)][_0x187786(0xf8)]],_0x387bd3=[..._0x3b704a[_0x187786(0xfa)][_0x187786(0x79)]],_0x163bee=[..._0x3b704a[_0x187786(0xfa)]['unit']],_0x33197d=[..._0x3b704a[_0x187786(0xfa)][_0x187786(0x8e)]],_0x283634=[..._0x3b704a['body'][_0x187786(0xd3)]],_0x3007d1=[..._0x3b704a[_0x187786(0xfa)][_0x187786(0x89)]],_0x4f7014=[..._0x3b704a['body'][_0x187786(0xda)]],_0x51931a=[..._0x3b704a['body']['tmpisFG']],_0x13605e=[..._0x3b704a[_0x187786(0xfa)][_0x187786(0xa3)]],_0x2a444d=[..._0x3b704a[_0x187786(0xfa)][_0x187786(0x100)]],_0x4472e4=[..._0x3b704a[_0x187786(0xfa)][_0x187786(0x90)]],_0x567446=[..._0x3b704a[_0x187786(0xfa)]['prod_cat']],_0x420607=[..._0x3b704a['body']['secondary_unit']],_0x465ece=[..._0x3b704a[_0x187786(0xfa)]['conversion_unit']];const _0x1cbfd6=_0x4ec03d[_0x187786(0x9f)](_0x3e5431=>{return _0x3e5431={'product_code':_0x3e5431};});_0x2bc8f8[_0x187786(0xa8)]((_0x55a9f3,_0x20c741)=>{var _0x27ee44=_0x187786;_0x1cbfd6[_0x20c741][_0x27ee44(0x70)]=_0x55a9f3;}),_0x2cbe0e[_0x187786(0xa8)]((_0x410bf4,_0xe36e44)=>{var _0x4a4087=_0x187786;_0x1cbfd6[_0xe36e44][_0x4a4087(0xf8)]=_0x410bf4;}),_0x387bd3[_0x187786(0xa8)]((_0x496261,_0x13edd6)=>{_0x1cbfd6[_0x13edd6]['quantity']=_0x496261;}),_0x163bee['forEach']((_0x2fafc2,_0x20bb55)=>{var _0xe70c89=_0x187786;_0x1cbfd6[_0x20bb55][_0xe70c89(0xd7)]=_0x2fafc2;}),_0x33197d['forEach']((_0xa337a4,_0x2e8e27)=>{_0x1cbfd6[_0x2e8e27]['product_id']=_0xa337a4;}),_0x13605e[_0x187786(0xa8)]((_0x147cdb,_0x271ebf)=>{_0x1cbfd6[_0x271ebf]['adjustment_discount']=_0x147cdb;}),_0x283634[_0x187786(0xa8)]((_0x5b3b38,_0x17e28d)=>{var _0x2588bd=_0x187786;_0x1cbfd6[_0x17e28d][_0x2588bd(0xd3)]=_0x5b3b38;}),_0x3007d1[_0x187786(0xa8)]((_0x3e5ead,_0x32e4fc)=>{var _0x5e99e6=_0x187786;_0x1cbfd6[_0x32e4fc][_0x5e99e6(0xd2)]=_0x3e5ead;}),_0x4f7014['forEach']((_0x1855b9,_0x529a5c)=>{var _0x1ca981=_0x187786;_0x1cbfd6[_0x529a5c][_0x1ca981(0xc9)]=_0x1855b9;}),_0x51931a[_0x187786(0xa8)]((_0x433f09,_0x5b6e57)=>{var _0x40a197=_0x187786;_0x1cbfd6[_0x5b6e57][_0x40a197(0xcf)]=_0x433f09;}),_0x420607[_0x187786(0xa8)]((_0x4fb120,_0x93e5bd)=>{var _0x262d6a=_0x187786;_0x1cbfd6[_0x93e5bd][_0x262d6a(0x75)]=_0x4fb120;}),_0x4472e4['forEach']((_0x2a3e5d,_0xc56bcb)=>{var _0x18482e=_0x187786;_0x1cbfd6[_0xc56bcb][_0x18482e(0x78)]=_0x2a3e5d;}),_0x567446[_0x187786(0xa8)]((_0x576b42,_0x14e9ca)=>{var _0x175f45=_0x187786;_0x1cbfd6[_0x14e9ca][_0x175f45(0x95)]=_0x576b42;}),_0x465ece[_0x187786(0xa8)]((_0x272438,_0x335bfc)=>{var _0x325a80=_0x187786;_0x1cbfd6[_0x335bfc][_0x325a80(0x93)]=_0x272438;}),_0x2a444d[_0x187786(0xa8)]((_0x512646,_0xd92348)=>{var _0x20760a=_0x187786;_0x1cbfd6[_0xd92348][_0x20760a(0x100)]=_0x512646;});const _0x2b4f81=await approver_acct['aggregate']([{'$unwind':_0x187786(0x105)},{'$match':{'member.id_member':_0x3b704a[_0x187786(0x92)][_0x187786(0xd6)]}},{'$group':{'_id':{'id_member':'$member.id_member','name':_0x187786(0xb6)},'head_id_staff':{'$first':'$head_id_staff'}}},{'$addFields':{'head_id_staff_id':{'$toObjectId':'$head_id_staff'}}},{'$lookup':{'from':_0x187786(0x7b),'localField':_0x187786(0xb8),'foreignField':_0x187786(0xb7),'as':'head_staff_info'}},{'$unwind':_0x187786(0xa0)}]),_0x5e7361=new invoice_for_sales_order();await _0x5e7361['save']();const _0x509742=_0x3b704a['user'],_0x5b281c=await staff['findOne']({'email':_0x509742[_0x187786(0x85)]}),_0x286943=new sales_order({'invoice':_0x5e7361[_0x187786(0xbe)][_0x187786(0x103)]()[_0x187786(0x9e)](0x8,'0'),'customer':_0x379e38,'date':_0x29b2b6,'sale_product':_0x1cbfd6,'note':_0x4b714d,'sales_staff_id':_0x5b281c[_0x187786(0xb7)]['valueOf'](),'JD':_0x29ea26,'accounting_account_id':_0x2b4f81[0x0]['head_id_staff'],'po_number':_0x2d4757,'desired_delivery':_0x1ec6a3,'wms_account_confirm':'true','accounting_account_confirm':_0x187786(0xee)}),_0x48e149=await _0x286943['save']();var _0x3e391f=_0x48e149[_0x187786(0xf3)],_0x15dd62='',_0x1ae2f4,_0x2d5017=0x0;for(_0x1ae2f4 in _0x3e391f){_0x15dd62+=_0x187786(0x8a)+_0x187786(0xc5)+_0x3e391f[_0x1ae2f4]['product_name']+_0x187786(0xbc)+_0x187786(0xc5)+_0x3e391f[_0x1ae2f4][_0x187786(0xd5)]+_0x187786(0xbc)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x3e391f[_0x1ae2f4][_0x187786(0x79)]+_0x187786(0xbc)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x3e391f[_0x1ae2f4][_0x187786(0xd7)]+_0x187786(0xbc)+_0x187786(0x7c),_0x2d5017+=parseInt(_0x3e391f[_0x1ae2f4][_0x187786(0x79)]);}const _0x3a189a=await master_shop[_0x187786(0xae)](),_0x590d2a=await email_settings[_0x187786(0x9a)]();let _0x2a8785=nodemailer[_0x187786(0xef)]({'port':Number(_0x590d2a[_0x187786(0xe2)]),'secure':![],'auth':{'user':_0x590d2a[_0x187786(0x85)],'pass':_0x590d2a[_0x187786(0x76)]}});const _0x591216=_0x3b704a[_0x187786(0xca)]+'://'+_0x3b704a[_0x187786(0xf5)][_0x187786(0xe1)];let _0x382b46={'from':_0x590d2a[_0x187786(0x85)],'to':_0x2b4f81[0x0]['head_staff_info'][_0x187786(0x85)]+_0x187786(0x77),'subject':_0x187786(0xfd)+_0x48e149['invoice'],'attachments':[{'filename':_0x187786(0xf7),'path':__dirname+'/../public'+_0x187786(0x86)+_0x3a189a[0x0][_0x187786(0xba)],'cid':_0x187786(0xc8)}],'html':_0x187786(0x6c)+_0x187786(0xc4)+'<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>'+_0x187786(0xc6)+_0x187786(0xcd)+_0x187786(0x104)+_0x187786(0xcd)+_0x187786(0x94)+_0x187786(0xd1)+_0x187786(0xcd)+'<h2>\x20JEC\x20SMS\x20</h2>'+_0x187786(0xd1)+'</div>'+_0x187786(0xa5)+_0x187786(0xcd)+'<span>\x20Dear\x20<b>'+_0x2b4f81[0x0]['head_staff_info'][_0x187786(0xa4)]+_0x187786(0xcb)+'</div>'+_0x187786(0xcd)+_0x187786(0xfc)+_0x187786(0xd1)+_0x187786(0xcd)+_0x187786(0x102)+_0x48e149[_0x187786(0xd9)]+_0x187786(0xea)+_0x187786(0xc3)+_0x5b281c[_0x187786(0xa4)]+_0x187786(0xea)+_0x187786(0xab)+_0x48e149[_0x187786(0x8c)]+'</b></span>\x20<br><br>'+_0x187786(0xd1)+_0x187786(0xec)+_0x187786(0xc7)+_0x187786(0x8a)+_0x187786(0xf0)+_0x187786(0x6a)+_0x187786(0xd4)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x187786(0x7c)+_0x187786(0x98)+_0x187786(0xac)+'\x20'+_0x15dd62+'\x20'+'</tbody>'+_0x187786(0x6b)+'<div>'+_0x187786(0x6d)+_0x2d5017+_0x187786(0xa7)+_0x187786(0x96)+_0x187786(0xbb)+_0x187786(0xf2)+'</div>'+'<div\x20style=\x22text-align:\x20center;\x22>'+_0x187786(0xad)+_0x591216+_0x187786(0xe4)+_0x48e149[_0x187786(0xb7)]+_0x187786(0xe5)+_0x187786(0xe3)+_0x187786(0xd1)+'<div>'+_0x187786(0xf1)+_0x187786(0xe8)+_0x187786(0xd1)+_0x187786(0xd1)+_0x187786(0x9b)+_0x187786(0x6f)};_0x2a8785['sendMail'](_0x382b46,function(_0x4d1c2e,_0x101816){var _0x53f27c=_0x187786;_0x4d1c2e?(console[_0x53f27c(0xcc)](_0x4d1c2e),console[_0x53f27c(0xcc)](_0x53f27c(0x9c))):console['log']('Email\x20sent\x20successfully');}),_0x3b704a[_0x187786(0x97)](_0x187786(0x71),'Sales\x20Order\x20is\x20ongoing'),_0x2d3a68[_0x187786(0x68)](_0x187786(0xc2)+_0x48e149[_0x187786(0xb7)]);}catch(_0x3b8130){}}),router[a0_0x107067(0x7e)](a0_0x107067(0xb5),auth,async(_0x3a421b,_0xd364f7)=>{var _0x4a3149=a0_0x107067;try{const _0x2a3b49=_0x3a421b['user'],_0x7e6611=await profile['findOne']({'email':_0x2a3b49[_0x4a3149(0x85)]}),_0x1892df=await product['find']({'sales_category':_0x2a3b49[_0x4a3149(0xed)]});_0xd364f7['json'](_0x1892df);}catch(_0x897074){}}),router[a0_0x107067(0x7e)]('/product_data',auth,async(_0x53ed48,_0x1b90eb)=>{var _0x74650f=a0_0x107067;try{const _0x1034fa=_0x53ed48[_0x74650f(0x92)],{id_data:_0x33c023}=_0x53ed48[_0x74650f(0xfa)],_0x389dcd=await profile['findOne']({'email':_0x1034fa[_0x74650f(0x85)]}),_0x479dd1=mongoose['Types'][_0x74650f(0xb2)];var _0x5353bf=_0x479dd1(_0x33c023);const _0x35d79b=await product[_0x74650f(0xae)]({'_id':_0x5353bf});_0x1b90eb[_0x74650f(0xaa)](_0x35d79b);}catch(_0x53b6aa){}}),module[a0_0x107067(0x87)]=router;