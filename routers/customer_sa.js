function a0_0xf9c3(_0x4aa896,_0x1ed8f0){const _0x30e27f=a0_0x30e2();return a0_0xf9c3=function(_0xf9c337,_0x46f98e){_0xf9c337=_0xf9c337-0x11e;let _0x43a1df=_0x30e27f[_0xf9c337];return _0x43a1df;},a0_0xf9c3(_0x4aa896,_0x1ed8f0);}const a0_0x558b72=a0_0xf9c3;function a0_0x30e2(){const _0x39fb2f=['columns','Content-Type','amount','Arabic\x20(ae)','find','post','English\x20(US)','Router','flash','errors','addWorksheet','findOne','customer_docs','terms_of_payments','Sale\x20Return','aggregate','language','mobile','/customer_import_migrate_file','customer\x20update\x20successfully','customer_discount','data','diskStorage','setHeader','render','now','payable','Workbook','business_start_year','$amount','sale_return','type_organization','email','customer','1732840wxMhkB','customer\x20add\x20successfully','Spanish','map','log','5sZqtLK','6mkExtl','file','get','\x20Failed','landline','body','redirect','success','Hindi','save','19740919eYPxsz','../middleware/auth','Portuguese','address','English','findById','Arabic','public/Migration/','sheet_to_json','express','element','26ZIHHof','less_percent_edit','name','4050788sVBRjD','filename','receivable','Chinese','$reason','less_percent','Portuguese\x20(BR)','valueOf','314744vcZlJE','36cZmkFm','/view/:id','single','334131MGCIXi','SalesmanName','payable_sum','master','Name','../public/language/languages.json','German','error','_id','French','xlsx','1163728KNwxHW','Content-Disposition','credit_limit','/customer_sa/view','Sale','3416889aajGGV','public/Migration','SalesmanCode','\x20added\x20successfully','12RNOeNB','sale','write','send','customer_product_fule','/view','status','multer','message','customer_sa','/view/payment/:id','Customers','PUnits','params','forEach','user'];a0_0x30e2=function(){return _0x39fb2f;};return a0_0x30e2();}(function(_0x1d7b63,_0x571b33){const _0x560265=a0_0xf9c3,_0x40b570=_0x1d7b63();while(!![]){try{const _0x6edc42=-parseInt(_0x560265(0x156))/0x1+parseInt(_0x560265(0x14b))/0x2*(-parseInt(_0x560265(0x15a))/0x3)+parseInt(_0x560265(0x14e))/0x4*(parseInt(_0x560265(0x135))/0x5)+parseInt(_0x560265(0x136))/0x6*(parseInt(_0x560265(0x16a))/0x7)+-parseInt(_0x560265(0x165))/0x8*(parseInt(_0x560265(0x157))/0x9)+-parseInt(_0x560265(0x130))/0xa+-parseInt(_0x560265(0x140))/0xb*(-parseInt(_0x560265(0x16e))/0xc);if(_0x6edc42===_0x571b33)break;else _0x40b570['push'](_0x40b570['shift']());}catch(_0xe36cb){_0x40b570['push'](_0x40b570['shift']());}}}(a0_0x30e2,0xbddbc));const express=require(a0_0x558b72(0x149)),app=express(),router=express[a0_0x558b72(0x185)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require('../models/all_models'),auth=require(a0_0x558b72(0x141)),users=require(a0_0x558b72(0x15f)),excelJS=require('exceljs'),xlsx=require(a0_0x558b72(0x164)),multer=require(a0_0x558b72(0x175));router[a0_0x558b72(0x138)](a0_0x558b72(0x173),auth,async(_0x5ebbbf,_0xf5fd2a)=>{const _0x299b60=a0_0x558b72;try{const {username:_0xc65fa9,email:_0x5e2ce8,role:_0x274926}=_0x5ebbbf['user'],_0x249534=_0x5ebbbf['user'],_0x3785c6=await profile[_0x299b60(0x189)]({'email':_0x249534[_0x299b60(0x12e)]}),_0x4f9e5c=await master_shop[_0x299b60(0x182)](),_0xfea9d4=await staff['findOne']({'email':_0x249534['email']}),_0x344a3c=await customer[_0x299b60(0x182)]({'agent_id':_0xfea9d4['_id']}),_0x3ea88f=await customer[_0x299b60(0x18d)]([{'$match':{'agent_id':_0xfea9d4['_id'][_0x299b60(0x155)]()}},{'$lookup':{'from':'c_payments','localField':'name','foreignField':_0x299b60(0x12f),'as':_0x299b60(0x18a)}}]),_0x55b139=_0x3ea88f[_0x299b60(0x133)](_0x471431=>{const _0x5a92c9=_0x299b60;console[_0x5a92c9(0x134)](_0x5a92c9(0x123),_0x471431);var _0x1ff8a5=0x0,_0x5c03c8=0x0;return _0x471431[_0x5a92c9(0x18a)][_0x5a92c9(0x17c)](_0xae6893=>{const _0x160df7=_0x5a92c9;console[_0x160df7(0x134)](_0x160df7(0x14a),_0xae6893),_0xae6893['reason']==_0x160df7(0x169)?_0x1ff8a5+=_0xae6893[_0x160df7(0x180)]:_0x5c03c8+=_0xae6893[_0x160df7(0x180)];}),_0x471431[_0x5a92c9(0x16f)]=parseFloat(_0x1ff8a5)+0x0,_0x471431[_0x5a92c9(0x12c)]=parseFloat(_0x5c03c8)+0x0,_0x471431;});if(_0x4f9e5c[0x0][_0x299b60(0x11e)]=='English\x20(US)'){var _0x58b9f4=users[_0x299b60(0x144)];console[_0x299b60(0x134)](_0x58b9f4);}else{if(_0x4f9e5c[0x0][_0x299b60(0x11e)]=='Hindi')var _0x58b9f4=users['Hindi'];else{if(_0x4f9e5c[0x0][_0x299b60(0x11e)]=='German')var _0x58b9f4=users['German'];else{if(_0x4f9e5c[0x0][_0x299b60(0x11e)]==_0x299b60(0x132))var _0x58b9f4=users['Spanish'];else{if(_0x4f9e5c[0x0]['language']==_0x299b60(0x163))var _0x58b9f4=users[_0x299b60(0x163)];else{if(_0x4f9e5c[0x0][_0x299b60(0x11e)]==_0x299b60(0x154))var _0x58b9f4=users['Portuguese'];else{if(_0x4f9e5c[0x0][_0x299b60(0x11e)]==_0x299b60(0x151))var _0x58b9f4=users['Chinese'];else{if(_0x4f9e5c[0x0]['language']=='Arabic\x20(ae)')var _0x58b9f4=users[_0x299b60(0x146)];}}}}}}}_0xf5fd2a[_0x299b60(0x126)](_0x299b60(0x177),{'success':_0x5ebbbf[_0x299b60(0x186)](_0x299b60(0x13d)),'errors':_0x5ebbbf['flash'](_0x299b60(0x187)),'user':_0x344a3c,'role':_0x249534,'profile':_0x3785c6,'master_shop':_0x4f9e5c,'language':_0x58b9f4,'agent_id':_0xfea9d4[_0x299b60(0x162)],'payment':_0x55b139,'staff_arr':_0xfea9d4});}catch(_0x1a8651){console[_0x299b60(0x134)](_0x1a8651);}}),router[a0_0x558b72(0x183)](a0_0x558b72(0x173),auth,async(_0x3dca0d,_0x18902a)=>{const _0x2bf232=a0_0x558b72;try{const {name:_0x4c977a,address:_0xa3636f,mobile:_0x453a8f,email:_0x246238,receivable:_0x48c6ed,payable:_0x597fe3,contactperson:_0x54b20f,landline:_0x45ec3e,agent_id:_0x31eb29,less_percent:_0x56fcc3,type_org:_0x3e74de,res_address:_0x4951ac,business_start_year:_0x586948,credit_limit:_0x2c5019,term_pay:_0x39a44b}=_0x3dca0d[_0x2bf232(0x13b)];if(typeof _0x56fcc3=='string')var _0x3f4cc8=[_0x3dca0d[_0x2bf232(0x13b)][_0x2bf232(0x153)]];else var _0x3f4cc8=[..._0x3dca0d['body'][_0x2bf232(0x153)]];const _0x20d1fe=_0x3f4cc8[_0x2bf232(0x133)](_0x4f3d5d=>{return _0x4f3d5d={'less':_0x4f3d5d};}),_0x2175eb=new customer({'name':_0x4c977a,'address':_0xa3636f,'mobile':_0x453a8f,'email':_0x246238,'receivable':_0x48c6ed,'payable':_0x597fe3,'customer_discount':_0x20d1fe,'contactperson':_0x54b20f,'landline':_0x45ec3e,'agent_id':_0x31eb29,'res_address':_0x4951ac,'type_organization':_0x3e74de,'business_start_year':_0x586948,'credit_limit':_0x2c5019,'terms_of_payments':_0x39a44b}),_0x22c94d=await _0x2175eb[_0x2bf232(0x13f)]();_0x3dca0d[_0x2bf232(0x186)](_0x2bf232(0x13d),_0x2bf232(0x131)),_0x18902a[_0x2bf232(0x13c)](_0x2bf232(0x168));}catch(_0x481c0a){console[_0x2bf232(0x134)](_0x481c0a);}}),router[a0_0x558b72(0x138)](a0_0x558b72(0x158),auth,async(_0x5ace6a,_0x29f5bc)=>{const _0x50c75a=a0_0x558b72;try{const {username:_0x3f0893,email:_0x5b389e,role:_0x456252}=_0x5ace6a[_0x50c75a(0x17d)],_0x2a5587=_0x5ace6a['user'],_0xbc78f8=await profile[_0x50c75a(0x189)]({'email':_0x2a5587[_0x50c75a(0x12e)]}),_0x2bde4f=await master_shop[_0x50c75a(0x182)]();console[_0x50c75a(0x134)](_0x50c75a(0x15d),_0x2bde4f);const _0x2707ad=_0x5ace6a['params']['id'],_0x4f96a6=await customer[_0x50c75a(0x145)](_0x2707ad);console[_0x50c75a(0x134)](_0x4f96a6);if(_0x2bde4f[0x0][_0x50c75a(0x11e)]==_0x50c75a(0x184)){var _0x1f99e2=users['English'];console[_0x50c75a(0x134)](_0x1f99e2);}else{if(_0x2bde4f[0x0][_0x50c75a(0x11e)]==_0x50c75a(0x13e))var _0x1f99e2=users[_0x50c75a(0x13e)];else{if(_0x2bde4f[0x0][_0x50c75a(0x11e)]==_0x50c75a(0x160))var _0x1f99e2=users[_0x50c75a(0x160)];else{if(_0x2bde4f[0x0]['language']=='Spanish')var _0x1f99e2=users[_0x50c75a(0x132)];else{if(_0x2bde4f[0x0]['language']=='French')var _0x1f99e2=users[_0x50c75a(0x163)];else{if(_0x2bde4f[0x0]['language']==_0x50c75a(0x154))var _0x1f99e2=users[_0x50c75a(0x142)];else{if(_0x2bde4f[0x0][_0x50c75a(0x11e)]==_0x50c75a(0x151))var _0x1f99e2=users['Chinese'];else{if(_0x2bde4f[0x0]['language']==_0x50c75a(0x181))var _0x1f99e2=users[_0x50c75a(0x146)];}}}}}}}_0x29f5bc[_0x50c75a(0x126)](_0x50c75a(0x177),{'success':_0x5ace6a[_0x50c75a(0x186)](_0x50c75a(0x13d)),'errors':_0x5ace6a[_0x50c75a(0x186)](_0x50c75a(0x187)),'role':_0x2a5587,'profile':_0xbc78f8,'user':_0x4f96a6,'master_shop':_0x2bde4f,'language':_0x1f99e2});}catch(_0x4225ea){console[_0x50c75a(0x134)](_0x4225ea);}}),router[a0_0x558b72(0x183)]('/view/:id',auth,async(_0x160d4a,_0x59fea9)=>{const _0x2b1ff3=a0_0x558b72;try{const _0x574610=_0x160d4a['params']['id'],_0x3fef0b=await customer[_0x2b1ff3(0x145)](_0x574610),{name:_0x390881,address:_0x1e6206,mobile:_0x4eb5b0,email:_0x2967d6,receivable:_0x2f43ea,payable:_0x474d99,contactperson:_0x1a67f4,landline:_0x587664,less_percent_edit:_0x2be81d,edit_type_org:_0x27f688,edit_res_address:_0x54ba47,edit_business_start_year:_0x2a073f,edit_credit_limit:_0x347c36,edit_term_pay:_0x3b72c7}=_0x160d4a[_0x2b1ff3(0x13b)];if(typeof _0x2be81d=='string')var _0x156278=[_0x160d4a[_0x2b1ff3(0x13b)][_0x2b1ff3(0x14c)]];else var _0x156278=[..._0x160d4a[_0x2b1ff3(0x13b)][_0x2b1ff3(0x14c)]];const _0x4f9ecd=_0x156278[_0x2b1ff3(0x133)](_0x1bfe60=>{return _0x1bfe60={'less':_0x1bfe60};});_0x3fef0b[_0x2b1ff3(0x14d)]=_0x390881,_0x3fef0b['address']=_0x1e6206,_0x3fef0b[_0x2b1ff3(0x11f)]=_0x4eb5b0,_0x3fef0b[_0x2b1ff3(0x12e)]=_0x2967d6,_0x3fef0b[_0x2b1ff3(0x150)]=_0x2f43ea,_0x3fef0b[_0x2b1ff3(0x128)]=_0x474d99,_0x3fef0b['contactperson']=_0x1a67f4,_0x3fef0b[_0x2b1ff3(0x13a)]=_0x587664,_0x3fef0b[_0x2b1ff3(0x122)]=_0x4f9ecd,_0x3fef0b[_0x2b1ff3(0x12d)]=_0x27f688,_0x3fef0b[_0x2b1ff3(0x12a)]=_0x2a073f,_0x3fef0b[_0x2b1ff3(0x167)]=_0x347c36,_0x3fef0b[_0x2b1ff3(0x18b)]=_0x3b72c7,_0x3fef0b['res_address']=_0x54ba47;const _0x4f554c=await _0x3fef0b[_0x2b1ff3(0x13f)]();_0x160d4a[_0x2b1ff3(0x186)](_0x2b1ff3(0x13d),_0x2b1ff3(0x121)),_0x59fea9[_0x2b1ff3(0x13c)]('/customer_sa/view');}catch(_0x574c82){console[_0x2b1ff3(0x134)](_0x574c82);}}),router[a0_0x558b72(0x138)](a0_0x558b72(0x178),auth,async(_0x55a7d3,_0x592914)=>{const _0x375718=a0_0x558b72;try{const {username:_0x499019,email:_0x1f3c04,role:_0x43c8c9}=_0x55a7d3[_0x375718(0x17d)],_0x2113a0=_0x55a7d3[_0x375718(0x17d)],_0x58e4aa=await profile[_0x375718(0x189)]({'email':_0x2113a0['email']}),_0x28e8bc=await master_shop[_0x375718(0x182)]();console['log'](_0x375718(0x15d),_0x28e8bc),console[_0x375718(0x134)](_0x55a7d3[_0x375718(0x17b)]['id']);const _0x36d10d=await customer['findOne']({'_id':_0x55a7d3[_0x375718(0x17b)]['id']});console[_0x375718(0x134)]('customer_data',_0x36d10d);const _0xfcd03c=await c_payment_data['find']({'customer':_0x36d10d['name']});console['log'](_0xfcd03c);const _0x469685=await c_payment_data[_0x375718(0x18d)]([{'$match':{'customer':_0x36d10d[_0x375718(0x14d)]}},{'$match':{'reason':_0x375718(0x169)}},{'$group':{'_id':'$reason','sum':{'$sum':_0x375718(0x12b)}}}]);console[_0x375718(0x134)](_0x375718(0x15c),_0x469685);const _0x38d5b7=await c_payment_data[_0x375718(0x18d)]([{'$match':{'customer':_0x36d10d[_0x375718(0x14d)]}},{'$match':{'reason':_0x375718(0x18c)}},{'$group':{'_id':_0x375718(0x152),'sum':{'$sum':_0x375718(0x12b)}}}]);console[_0x375718(0x134)]('receivable_sum',_0x38d5b7);if(_0x28e8bc[0x0]['language']==_0x375718(0x184)){var _0x239a8e=users[_0x375718(0x144)];console[_0x375718(0x134)](_0x239a8e);}else{if(_0x28e8bc[0x0][_0x375718(0x11e)]==_0x375718(0x13e))var _0x239a8e=users['Hindi'];else{if(_0x28e8bc[0x0][_0x375718(0x11e)]==_0x375718(0x160))var _0x239a8e=users['German'];else{if(_0x28e8bc[0x0][_0x375718(0x11e)]==_0x375718(0x132))var _0x239a8e=users[_0x375718(0x132)];else{if(_0x28e8bc[0x0][_0x375718(0x11e)]=='French')var _0x239a8e=users[_0x375718(0x163)];else{if(_0x28e8bc[0x0]['language']==_0x375718(0x154))var _0x239a8e=users['Portuguese'];else{if(_0x28e8bc[0x0]['language']==_0x375718(0x151))var _0x239a8e=users[_0x375718(0x151)];else{if(_0x28e8bc[0x0]['language']=='Arabic\x20(ae)')var _0x239a8e=users[_0x375718(0x146)];}}}}}}}_0x592914[_0x375718(0x126)]('customer_payment',{'success':_0x55a7d3[_0x375718(0x186)]('success'),'errors':_0x55a7d3['flash'](_0x375718(0x187)),'role':_0x2113a0,'profile':_0x58e4aa,'payment':_0xfcd03c,'payable':_0x469685,'receivable':_0x38d5b7,'master_shop':_0x28e8bc,'language':_0x239a8e});}catch(_0x36408a){console[_0x375718(0x134)](_0x36408a);}}),router['get']('/products_export_migrate_file',auth,async(_0x574992,_0x56f0a3)=>{const _0x2a9565=a0_0x558b72;try{const _0x16420b=new excelJS[(_0x2a9565(0x129))](),_0x70cba2=_0x16420b[_0x2a9565(0x188)](_0x2a9565(0x179));return _0x70cba2[_0x2a9565(0x17e)]=[{'header':'ID','key':'PName','width':0xa},{'header':_0x2a9565(0x15e),'key':'PBrands','width':0xa},{'header':'SalesmanCode','key':_0x2a9565(0x17a),'width':0xa},{'header':_0x2a9565(0x15b),'key':_0x2a9565(0x15b),'width':0xa},{'header':'address','key':_0x2a9565(0x143),'width':0xa},{'header':'mobile','key':_0x2a9565(0x11f),'width':0xa},{'header':_0x2a9565(0x12e),'key':'email','width':0xa}],_0x56f0a3[_0x2a9565(0x125)](_0x2a9565(0x17f),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x56f0a3[_0x2a9565(0x125)](_0x2a9565(0x166),'attachment;\x20filename=customer_Migration_File.xlsx'),_0x16420b[_0x2a9565(0x164)][_0x2a9565(0x170)](_0x56f0a3)['then'](()=>{_0x56f0a3['status'](0xc8);});}catch(_0x39a806){_0x56f0a3[_0x2a9565(0x174)](0x190)[_0x2a9565(0x171)]({'errors':_0x39a806[_0x2a9565(0x176)]});}});const storage1=multer[a0_0x558b72(0x124)]({'destination':(_0x4c2df5,_0xcdc556,_0x3a8881)=>{const _0x5447a7=a0_0x558b72;_0x3a8881(null,_0x5447a7(0x16b));},'filename':(_0xc1453,_0x32d2ab,_0xfc9a97)=>{const _0x852697=a0_0x558b72;_0xfc9a97(null,Date[_0x852697(0x127)]()+_0x32d2ab['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x558b72(0x183)](a0_0x558b72(0x120),auth,uploadMigrate[a0_0x558b72(0x159)](a0_0x558b72(0x172)),async(_0x3b19bc,_0x5e8bff)=>{const _0xcb1b8b=a0_0x558b72,_0x19aa75=_0x3b19bc[_0xcb1b8b(0x137)][_0xcb1b8b(0x14f)],_0x52220d=await xlsx['readFile'](_0xcb1b8b(0x147)+_0x19aa75);let _0x2af075=_0x52220d['SheetNames'],_0x1a4cad=xlsx['utils'][_0xcb1b8b(0x148)](_0x52220d['Sheets'][_0x2af075[0x0]]);for(const _0x29e0d4 of _0x1a4cad){const _0x545751=_0x29e0d4['ID'],_0x9c42f4=_0x29e0d4['Name'],_0xc01b1c=_0x29e0d4[_0xcb1b8b(0x16c)],_0x2a74f5=_0x29e0d4['SalesmanName'],_0x3b33ef=_0x29e0d4[_0xcb1b8b(0x143)],_0x3d19ee=_0x29e0d4[_0xcb1b8b(0x11f)],_0x3e3077=_0x29e0d4[_0xcb1b8b(0x12e)];try{let _0x13854a=await customer['findOne']({'name':_0x9c42f4});if(!_0x13854a){const _0x55e465=new customer({'name':_0x9c42f4,'ID':_0x545751,'SalesmanCode':_0xc01b1c,'SalesmanName':_0x2a74f5,'address':_0x3b33ef,'mobile':_0x3d19ee,'email':_0x3e3077});_0x13854a=await _0x55e465['save'](),_0x3b19bc[_0xcb1b8b(0x186)](_0xcb1b8b(0x13d),_0x9c42f4+_0xcb1b8b(0x16d));}else _0x3b19bc[_0xcb1b8b(0x186)](_0xcb1b8b(0x161),_0x9c42f4+_0xcb1b8b(0x139));}catch(_0xe75ff5){_0x5e8bff[_0xcb1b8b(0x174)](0x1f4)['json']({'proderror':_0xe75ff5['message'],'aproduct':ProductName});}}_0x5e8bff[_0xcb1b8b(0x13c)](_0xcb1b8b(0x168));}),module['exports']=router;