function a0_0x4fc8(){const _0xcfd3ed=['write','Customers','status','valueOf','2307600jmmTLF','body','params','2684rrYfLe','7liogpk','originalname','diskStorage','file','filename','element','exceljs','attachment;\x20filename=customer_Migration_File.xlsx','customer_product_fule','public/Migration','flash','Arabic','save','message','redirect','less_percent','sheet_to_json','SalesmanCode','findOne','language','\x20added\x20successfully','express','Chinese','Sheets','payable','amount','address','customer_payment','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','addWorksheet','45880TBOmZz','Arabic\x20(ae)','Hindi','name','findById','Portuguese\x20(BR)','customer_discount','German','3773376wcwoyZ','json','9hnskZS','then','aggregate','/customer_import_migrate_file','PUnits','email','2022436EdOvpn','customer','receivable','French','Portuguese','English','Sale','receivable_sum','customer_data','user','_id','readFile','../models/all_models','utils','mobile','errors','xlsx','customer\x20update\x20successfully','Spanish','/customer_sa/view','data','PBrands','post','10WeBUhc','/view/payment/:id','\x20Failed','now','payable_sum','4487576zmoHbM','Content-Type','map','3173970bsXcDZ','2DLwVRc','c_payments','Sale\x20Return','less_percent_edit','Name','landline','Content-Disposition','sale','success','/view/:id','master','credit_limit','SalesmanName','reason','public/Migration/','find','terms_of_payments','render','get','Router','customer_docs','res_address','652342XfENwr','business_start_year','English\x20(US)','customer_sa','PName','string','forEach','contactperson','$amount','log','$reason'];a0_0x4fc8=function(){return _0xcfd3ed;};return a0_0x4fc8();}function a0_0x3c6c(_0x7bcdd1,_0x4dd0c9){const _0x4fc8bc=a0_0x4fc8();return a0_0x3c6c=function(_0x3c6cc7,_0x562abd){_0x3c6cc7=_0x3c6cc7-0x152;let _0x27b831=_0x4fc8bc[_0x3c6cc7];return _0x27b831;},a0_0x3c6c(_0x7bcdd1,_0x4dd0c9);}const a0_0xc30d14=a0_0x3c6c;(function(_0x8ddd7e,_0x28308c){const _0x43d21b=a0_0x3c6c,_0x39a4d1=_0x8ddd7e();while(!![]){try{const _0x3eecb2=-parseInt(_0x43d21b(0x1c7))/0x1+parseInt(_0x43d21b(0x1b1))/0x2*(parseInt(_0x43d21b(0x189))/0x3)+-parseInt(_0x43d21b(0x191))/0x4*(-parseInt(_0x43d21b(0x1a8))/0x5)+parseInt(_0x43d21b(0x1b0))/0x6*(-parseInt(_0x43d21b(0x163))/0x7)+-parseInt(_0x43d21b(0x1ad))/0x8*(-parseInt(_0x43d21b(0x18b))/0x9)+-parseInt(_0x43d21b(0x181))/0xa*(parseInt(_0x43d21b(0x162))/0xb)+parseInt(_0x43d21b(0x15f))/0xc;if(_0x3eecb2===_0x28308c)break;else _0x39a4d1['push'](_0x39a4d1['shift']());}catch(_0xc58898){_0x39a4d1['push'](_0x39a4d1['shift']());}}}(a0_0x4fc8,0xb0228));const express=require(a0_0xc30d14(0x178)),app=express(),router=express[a0_0xc30d14(0x1c4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require(a0_0xc30d14(0x19d)),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),excelJS=require(a0_0xc30d14(0x169)),xlsx=require('xlsx'),multer=require('multer');router[a0_0xc30d14(0x1c3)]('/view',auth,async(_0x51bb05,_0x474cd9)=>{const _0x278925=a0_0xc30d14;try{const {username:_0x40b74e,email:_0x5ac5e7,role:_0x2f1f61}=_0x51bb05[_0x278925(0x19a)],_0x17ae0d=_0x51bb05[_0x278925(0x19a)],_0x5aec2e=await profile[_0x278925(0x175)]({'email':_0x17ae0d[_0x278925(0x190)]}),_0x2a470d=await master_shop['find'](),_0x417736=await staff[_0x278925(0x175)]({'email':_0x17ae0d[_0x278925(0x190)]}),_0x3c1bf9=await customer[_0x278925(0x1c0)]({'agent_id':_0x417736[_0x278925(0x19b)]}),_0x286a1a=await customer[_0x278925(0x18d)]([{'$match':{'agent_id':_0x417736[_0x278925(0x19b)][_0x278925(0x15e)]()}},{'$lookup':{'from':_0x278925(0x1b2),'localField':_0x278925(0x184),'foreignField':_0x278925(0x192),'as':'customer_docs'}}]),_0x59eab2=_0x286a1a[_0x278925(0x1af)](_0x278dbe=>{const _0x31cc3b=_0x278925;console[_0x31cc3b(0x159)](_0x31cc3b(0x1a5),_0x278dbe);var _0x4bf3b1=0x0,_0x324224=0x0;return _0x278dbe[_0x31cc3b(0x1c5)][_0x31cc3b(0x156)](_0x25ef02=>{const _0x4d5971=_0x31cc3b;console[_0x4d5971(0x159)](_0x4d5971(0x168),_0x25ef02),_0x25ef02[_0x4d5971(0x1be)]==_0x4d5971(0x197)?_0x4bf3b1+=_0x25ef02['amount']:_0x324224+=_0x25ef02[_0x4d5971(0x17c)];}),_0x278dbe[_0x31cc3b(0x1b8)]=parseFloat(_0x4bf3b1)+0x0,_0x278dbe['sale_return']=parseFloat(_0x324224)+0x0,_0x278dbe;});if(_0x2a470d[0x0][_0x278925(0x176)]==_0x278925(0x152)){var _0x8e613b=users[_0x278925(0x196)];console[_0x278925(0x159)](_0x8e613b);}else{if(_0x2a470d[0x0]['language']=='Hindi')var _0x8e613b=users[_0x278925(0x183)];else{if(_0x2a470d[0x0][_0x278925(0x176)]=='German')var _0x8e613b=users[_0x278925(0x188)];else{if(_0x2a470d[0x0][_0x278925(0x176)]==_0x278925(0x1a3))var _0x8e613b=users[_0x278925(0x1a3)];else{if(_0x2a470d[0x0][_0x278925(0x176)]==_0x278925(0x194))var _0x8e613b=users[_0x278925(0x194)];else{if(_0x2a470d[0x0][_0x278925(0x176)]==_0x278925(0x186))var _0x8e613b=users[_0x278925(0x195)];else{if(_0x2a470d[0x0][_0x278925(0x176)]==_0x278925(0x179))var _0x8e613b=users['Chinese'];else{if(_0x2a470d[0x0]['language']==_0x278925(0x182))var _0x8e613b=users[_0x278925(0x16e)];}}}}}}}_0x474cd9[_0x278925(0x1c2)]('customer_sa',{'success':_0x51bb05['flash']('success'),'errors':_0x51bb05[_0x278925(0x16d)]('errors'),'user':_0x3c1bf9,'role':_0x17ae0d,'profile':_0x5aec2e,'master_shop':_0x2a470d,'language':_0x8e613b,'agent_id':_0x417736[_0x278925(0x19b)],'payment':_0x59eab2,'staff_arr':_0x417736});}catch(_0x4a7a73){console['log'](_0x4a7a73);}}),router['post']('/view',auth,async(_0x4b8867,_0x1853b5)=>{const _0x58e310=a0_0xc30d14;try{const {name:_0x3f96de,address:_0x35daf6,mobile:_0x1dcf2,email:_0x4851f6,receivable:_0x595472,payable:_0x40f6bc,contactperson:_0x5e8834,landline:_0x212ba7,agent_id:_0x5541fe,less_percent:_0x42b0c2,type_org:_0x543344,res_address:_0x33d173,business_start_year:_0x5a61c2,credit_limit:_0x5d1e7d,term_pay:_0x39d4d9}=_0x4b8867[_0x58e310(0x160)];if(typeof _0x42b0c2==_0x58e310(0x155))var _0x8bb96a=[_0x4b8867[_0x58e310(0x160)][_0x58e310(0x172)]];else var _0x8bb96a=[..._0x4b8867[_0x58e310(0x160)][_0x58e310(0x172)]];const _0x43ac0e=_0x8bb96a['map'](_0x5399ec=>{return _0x5399ec={'less':_0x5399ec};}),_0x13fba6=new customer({'name':_0x3f96de,'address':_0x35daf6,'mobile':_0x1dcf2,'email':_0x4851f6,'receivable':_0x595472,'payable':_0x40f6bc,'customer_discount':_0x43ac0e,'contactperson':_0x5e8834,'landline':_0x212ba7,'agent_id':_0x5541fe,'res_address':_0x33d173,'type_organization':_0x543344,'business_start_year':_0x5a61c2,'credit_limit':_0x5d1e7d,'terms_of_payments':_0x39d4d9}),_0x882232=await _0x13fba6[_0x58e310(0x16f)]();_0x4b8867[_0x58e310(0x16d)](_0x58e310(0x1b9),'customer\x20add\x20successfully'),_0x1853b5['redirect'](_0x58e310(0x1a4));}catch(_0x3ce06b){console['log'](_0x3ce06b);}}),router[a0_0xc30d14(0x1c3)](a0_0xc30d14(0x1ba),auth,async(_0x29bac5,_0x4091bd)=>{const _0x2608cd=a0_0xc30d14;try{const {username:_0x488913,email:_0x42a415,role:_0x5b9da7}=_0x29bac5[_0x2608cd(0x19a)],_0x206b34=_0x29bac5['user'],_0x18c89a=await profile[_0x2608cd(0x175)]({'email':_0x206b34['email']}),_0x2b3a1b=await master_shop[_0x2608cd(0x1c0)]();console['log'](_0x2608cd(0x1bb),_0x2b3a1b);const _0x1c1401=_0x29bac5[_0x2608cd(0x161)]['id'],_0x5aed33=await customer[_0x2608cd(0x185)](_0x1c1401);console[_0x2608cd(0x159)](_0x5aed33);if(_0x2b3a1b[0x0][_0x2608cd(0x176)]==_0x2608cd(0x152)){var _0x2eb0a9=users[_0x2608cd(0x196)];console['log'](_0x2eb0a9);}else{if(_0x2b3a1b[0x0][_0x2608cd(0x176)]=='Hindi')var _0x2eb0a9=users[_0x2608cd(0x183)];else{if(_0x2b3a1b[0x0][_0x2608cd(0x176)]==_0x2608cd(0x188))var _0x2eb0a9=users['German'];else{if(_0x2b3a1b[0x0][_0x2608cd(0x176)]==_0x2608cd(0x1a3))var _0x2eb0a9=users['Spanish'];else{if(_0x2b3a1b[0x0][_0x2608cd(0x176)]==_0x2608cd(0x194))var _0x2eb0a9=users['French'];else{if(_0x2b3a1b[0x0][_0x2608cd(0x176)]==_0x2608cd(0x186))var _0x2eb0a9=users[_0x2608cd(0x195)];else{if(_0x2b3a1b[0x0][_0x2608cd(0x176)]==_0x2608cd(0x179))var _0x2eb0a9=users[_0x2608cd(0x179)];else{if(_0x2b3a1b[0x0][_0x2608cd(0x176)]==_0x2608cd(0x182))var _0x2eb0a9=users['Arabic'];}}}}}}}_0x4091bd[_0x2608cd(0x1c2)](_0x2608cd(0x153),{'success':_0x29bac5[_0x2608cd(0x16d)](_0x2608cd(0x1b9)),'errors':_0x29bac5[_0x2608cd(0x16d)](_0x2608cd(0x1a0)),'role':_0x206b34,'profile':_0x18c89a,'user':_0x5aed33,'master_shop':_0x2b3a1b,'language':_0x2eb0a9});}catch(_0x108e43){console['log'](_0x108e43);}}),router['post'](a0_0xc30d14(0x1ba),auth,async(_0x377b06,_0x11bb7f)=>{const _0x3d2b30=a0_0xc30d14;try{const _0x40d12c=_0x377b06[_0x3d2b30(0x161)]['id'],_0x1b0931=await customer[_0x3d2b30(0x185)](_0x40d12c),{name:_0x42bec8,address:_0x39260c,mobile:_0x3b0a9d,email:_0x1cc1ed,receivable:_0x292804,payable:_0x19a53e,contactperson:_0x59b36e,landline:_0x221cf5,less_percent_edit:_0x430ad4,edit_type_org:_0x4bf1fa,edit_res_address:_0x5e9f5f,edit_business_start_year:_0xbeb790,edit_credit_limit:_0x32c406,edit_term_pay:_0x4db5cf}=_0x377b06['body'];if(typeof _0x430ad4==_0x3d2b30(0x155))var _0x343c73=[_0x377b06['body'][_0x3d2b30(0x1b4)]];else var _0x343c73=[..._0x377b06[_0x3d2b30(0x160)][_0x3d2b30(0x1b4)]];const _0x1fdbf3=_0x343c73[_0x3d2b30(0x1af)](_0x4aa5f3=>{return _0x4aa5f3={'less':_0x4aa5f3};});_0x1b0931[_0x3d2b30(0x184)]=_0x42bec8,_0x1b0931[_0x3d2b30(0x17d)]=_0x39260c,_0x1b0931[_0x3d2b30(0x19f)]=_0x3b0a9d,_0x1b0931[_0x3d2b30(0x190)]=_0x1cc1ed,_0x1b0931[_0x3d2b30(0x193)]=_0x292804,_0x1b0931[_0x3d2b30(0x17b)]=_0x19a53e,_0x1b0931[_0x3d2b30(0x157)]=_0x59b36e,_0x1b0931[_0x3d2b30(0x1b6)]=_0x221cf5,_0x1b0931[_0x3d2b30(0x187)]=_0x1fdbf3,_0x1b0931['type_organization']=_0x4bf1fa,_0x1b0931[_0x3d2b30(0x1c8)]=_0xbeb790,_0x1b0931[_0x3d2b30(0x1bc)]=_0x32c406,_0x1b0931[_0x3d2b30(0x1c1)]=_0x4db5cf,_0x1b0931[_0x3d2b30(0x1c6)]=_0x5e9f5f;const _0x83ad01=await _0x1b0931['save']();_0x377b06['flash'](_0x3d2b30(0x1b9),_0x3d2b30(0x1a2)),_0x11bb7f[_0x3d2b30(0x171)]('/customer_sa/view');}catch(_0x1f4138){console[_0x3d2b30(0x159)](_0x1f4138);}}),router[a0_0xc30d14(0x1c3)](a0_0xc30d14(0x1a9),auth,async(_0x5f00e7,_0x17c509)=>{const _0x2cc82d=a0_0xc30d14;try{const {username:_0x220ff3,email:_0x295e7c,role:_0x9a4ae3}=_0x5f00e7['user'],_0x209e50=_0x5f00e7[_0x2cc82d(0x19a)],_0xfe2e88=await profile[_0x2cc82d(0x175)]({'email':_0x209e50[_0x2cc82d(0x190)]}),_0x5cb0d8=await master_shop[_0x2cc82d(0x1c0)]();console[_0x2cc82d(0x159)](_0x2cc82d(0x1bb),_0x5cb0d8),console[_0x2cc82d(0x159)](_0x5f00e7['params']['id']);const _0x3568f9=await customer['findOne']({'_id':_0x5f00e7[_0x2cc82d(0x161)]['id']});console[_0x2cc82d(0x159)](_0x2cc82d(0x199),_0x3568f9);const _0x5034e1=await c_payment_data[_0x2cc82d(0x1c0)]({'customer':_0x3568f9['name']});console[_0x2cc82d(0x159)](_0x5034e1);const _0x3e2734=await c_payment_data['aggregate']([{'$match':{'customer':_0x3568f9[_0x2cc82d(0x184)]}},{'$match':{'reason':'Sale'}},{'$group':{'_id':_0x2cc82d(0x15a),'sum':{'$sum':_0x2cc82d(0x158)}}}]);console[_0x2cc82d(0x159)](_0x2cc82d(0x1ac),_0x3e2734);const _0x2e7982=await c_payment_data['aggregate']([{'$match':{'customer':_0x3568f9[_0x2cc82d(0x184)]}},{'$match':{'reason':_0x2cc82d(0x1b3)}},{'$group':{'_id':_0x2cc82d(0x15a),'sum':{'$sum':'$amount'}}}]);console[_0x2cc82d(0x159)](_0x2cc82d(0x198),_0x2e7982);if(_0x5cb0d8[0x0]['language']==_0x2cc82d(0x152)){var _0x2e2613=users[_0x2cc82d(0x196)];console[_0x2cc82d(0x159)](_0x2e2613);}else{if(_0x5cb0d8[0x0][_0x2cc82d(0x176)]=='Hindi')var _0x2e2613=users[_0x2cc82d(0x183)];else{if(_0x5cb0d8[0x0][_0x2cc82d(0x176)]==_0x2cc82d(0x188))var _0x2e2613=users[_0x2cc82d(0x188)];else{if(_0x5cb0d8[0x0][_0x2cc82d(0x176)]==_0x2cc82d(0x1a3))var _0x2e2613=users['Spanish'];else{if(_0x5cb0d8[0x0]['language']=='French')var _0x2e2613=users[_0x2cc82d(0x194)];else{if(_0x5cb0d8[0x0][_0x2cc82d(0x176)]==_0x2cc82d(0x186))var _0x2e2613=users[_0x2cc82d(0x195)];else{if(_0x5cb0d8[0x0]['language']=='Chinese')var _0x2e2613=users[_0x2cc82d(0x179)];else{if(_0x5cb0d8[0x0]['language']==_0x2cc82d(0x182))var _0x2e2613=users[_0x2cc82d(0x16e)];}}}}}}}_0x17c509[_0x2cc82d(0x1c2)](_0x2cc82d(0x17e),{'success':_0x5f00e7[_0x2cc82d(0x16d)]('success'),'errors':_0x5f00e7[_0x2cc82d(0x16d)](_0x2cc82d(0x1a0)),'role':_0x209e50,'profile':_0xfe2e88,'payment':_0x5034e1,'payable':_0x3e2734,'receivable':_0x2e7982,'master_shop':_0x5cb0d8,'language':_0x2e2613});}catch(_0x46ebdc){console[_0x2cc82d(0x159)](_0x46ebdc);}}),router[a0_0xc30d14(0x1c3)]('/products_export_migrate_file',auth,async(_0x4f8b1b,_0x46f014)=>{const _0x3ab742=a0_0xc30d14;try{const _0x2e1b95=new excelJS['Workbook'](),_0x41e944=_0x2e1b95[_0x3ab742(0x180)](_0x3ab742(0x15c));return _0x41e944['columns']=[{'header':'ID','key':_0x3ab742(0x154),'width':0xa},{'header':'Name','key':_0x3ab742(0x1a6),'width':0xa},{'header':_0x3ab742(0x174),'key':_0x3ab742(0x18f),'width':0xa},{'header':_0x3ab742(0x1bd),'key':'SalesmanName','width':0xa},{'header':'address','key':_0x3ab742(0x17d),'width':0xa},{'header':'mobile','key':_0x3ab742(0x19f),'width':0xa},{'header':_0x3ab742(0x190),'key':'email','width':0xa}],_0x46f014['setHeader'](_0x3ab742(0x1ae),_0x3ab742(0x17f)),_0x46f014['setHeader'](_0x3ab742(0x1b7),_0x3ab742(0x16a)),_0x2e1b95[_0x3ab742(0x1a1)][_0x3ab742(0x15b)](_0x46f014)[_0x3ab742(0x18c)](()=>{const _0x49f26f=_0x3ab742;_0x46f014[_0x49f26f(0x15d)](0xc8);});}catch(_0x1fd277){_0x46f014['status'](0x190)['send']({'errors':_0x1fd277['message']});}});const storage1=multer[a0_0xc30d14(0x165)]({'destination':(_0x462eea,_0x2dc89f,_0x276a53)=>{const _0x43177d=a0_0xc30d14;_0x276a53(null,_0x43177d(0x16c));},'filename':(_0xa9ebdb,_0x38d4bc,_0x3fa480)=>{const _0x2330ce=a0_0xc30d14;_0x3fa480(null,Date[_0x2330ce(0x1ab)]()+_0x38d4bc[_0x2330ce(0x164)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0xc30d14(0x1a7)](a0_0xc30d14(0x18e),auth,uploadMigrate['single'](a0_0xc30d14(0x16b)),async(_0x2857f7,_0x2bc515)=>{const _0xe09979=a0_0xc30d14,_0x13594d=_0x2857f7[_0xe09979(0x166)][_0xe09979(0x167)],_0x23674e=await xlsx[_0xe09979(0x19c)](_0xe09979(0x1bf)+_0x13594d);let _0x1d065b=_0x23674e['SheetNames'],_0x456d75=xlsx[_0xe09979(0x19e)][_0xe09979(0x173)](_0x23674e[_0xe09979(0x17a)][_0x1d065b[0x0]]);for(const _0x4340fb of _0x456d75){const _0x350e52=_0x4340fb['ID'],_0x1643aa=_0x4340fb[_0xe09979(0x1b5)],_0x4a9ad8=_0x4340fb[_0xe09979(0x174)],_0x3dbebe=_0x4340fb['SalesmanName'],_0x22dcb6=_0x4340fb[_0xe09979(0x17d)],_0x2d7b91=_0x4340fb[_0xe09979(0x19f)],_0x60d8e=_0x4340fb[_0xe09979(0x190)];try{let _0x5f5a81=await customer[_0xe09979(0x175)]({'name':_0x1643aa});if(!_0x5f5a81){const _0x4da630=new customer({'name':_0x1643aa,'ID':_0x350e52,'SalesmanCode':_0x4a9ad8,'SalesmanName':_0x3dbebe,'address':_0x22dcb6,'mobile':_0x2d7b91,'email':_0x60d8e});_0x5f5a81=await _0x4da630[_0xe09979(0x16f)](),_0x2857f7[_0xe09979(0x16d)](_0xe09979(0x1b9),_0x1643aa+_0xe09979(0x177));}else _0x2857f7[_0xe09979(0x16d)]('error',_0x1643aa+_0xe09979(0x1aa));}catch(_0x5d2d8c){_0x2bc515[_0xe09979(0x15d)](0x1f4)[_0xe09979(0x18a)]({'proderror':_0x5d2d8c[_0xe09979(0x170)],'aproduct':ProductName});}}_0x2bc515[_0xe09979(0x171)](_0xe09979(0x1a4));}),module['exports']=router;