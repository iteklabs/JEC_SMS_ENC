function a0_0x52cb(_0x2f553c,_0x30d258){const _0x2f1f30=a0_0x2f1f();return a0_0x52cb=function(_0x52cbd5,_0x585ddf){_0x52cbd5=_0x52cbd5-0x1e3;let _0x33df1b=_0x2f1f30[_0x52cbd5];return _0x33df1b;},a0_0x52cb(_0x2f553c,_0x30d258);}function a0_0x2f1f(){const _0x1b31d7=['name','../models/all_models','PBrands','status','find','customer_product_fule','Content-Type','c_payments','params','utils','columns','SalesmanCode','language','aggregate','Customers','post','867072GPKXul','address','string','963648RsPVsF','findById','French','write','customer_payment','diskStorage','map','9smPmNy','payable','2613996bRfgoj','Sale\x20Return','1029304dYtbNG','type_organization','\x20added\x20successfully','body','\x20Failed','6bACZMe','redirect','SalesmanName','filename','payable_sum','credit_limit','Chinese','exceljs','amount','sale_return','email','customer_docs','xlsx','customer_data','landline','send','user','Arabic\x20(ae)','findOne','less_percent_edit','Hindi','459132DvCySY','data','customer','customer_discount','Arabic','flash','contactperson','/customer_import_migrate_file','log','/customer_sa/view','German','message','error','multer','readFile','Spanish','2693690jPVXKV','Router','master','less_percent','single','exports','Sheets','setHeader','public/Migration/','Name','customer\x20update\x20successfully','/view/:id','receivable_sum','render','terms_of_payments','$reason','/products_export_migrate_file','customer_sa','/view/payment/:id','Portuguese\x20(BR)','English','$amount','mobile','get','Workbook','English\x20(US)','5roVfiD','435346yukmfj','success','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','_id','../public/language/languages.json','element','sale','public/Migration','Portuguese','attachment;\x20filename=customer_Migration_File.xlsx','business_start_year','PUnits','receivable','errors'];a0_0x2f1f=function(){return _0x1b31d7;};return a0_0x2f1f();}const a0_0x30ee3d=a0_0x52cb;(function(_0x1306a6,_0x562616){const _0x4aabdc=a0_0x52cb,_0x28cc4a=_0x1306a6();while(!![]){try{const _0x2ffbdd=-parseInt(_0x4aabdc(0x222))/0x1+parseInt(_0x4aabdc(0x24d))/0x2*(parseInt(_0x4aabdc(0x20d))/0x3)+parseInt(_0x4aabdc(0x208))/0x4*(-parseInt(_0x4aabdc(0x24c))/0x5)+parseInt(_0x4aabdc(0x1fa))/0x6+parseInt(_0x4aabdc(0x206))/0x7+-parseInt(_0x4aabdc(0x1fd))/0x8+-parseInt(_0x4aabdc(0x204))/0x9*(-parseInt(_0x4aabdc(0x232))/0xa);if(_0x2ffbdd===_0x562616)break;else _0x28cc4a['push'](_0x28cc4a['shift']());}catch(_0x1679a0){_0x28cc4a['push'](_0x28cc4a['shift']());}}}(a0_0x2f1f,0x5e2cd));const express=require('express'),app=express(),router=express[a0_0x30ee3d(0x233)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require(a0_0x30ee3d(0x1eb)),auth=require('../middleware/auth'),users=require(a0_0x30ee3d(0x251)),excelJS=require(a0_0x30ee3d(0x214)),xlsx=require(a0_0x30ee3d(0x219)),multer=require(a0_0x30ee3d(0x22f));router['get']('/view',auth,async(_0x398e7a,_0x1f9ad6)=>{const _0xcd22a7=a0_0x30ee3d;try{const {username:_0x394cc1,email:_0x5442ba,role:_0x1010e5}=_0x398e7a[_0xcd22a7(0x21d)],_0x19d3eb=_0x398e7a[_0xcd22a7(0x21d)],_0x318090=await profile[_0xcd22a7(0x21f)]({'email':_0x19d3eb[_0xcd22a7(0x217)]}),_0x431369=await master_shop[_0xcd22a7(0x1ee)](),_0xf83b78=await staff[_0xcd22a7(0x21f)]({'email':_0x19d3eb[_0xcd22a7(0x217)]}),_0x30a5a9=await customer['find']({'agent_id':_0xf83b78[_0xcd22a7(0x250)]}),_0x484f55=await customer['aggregate']([{'$match':{'agent_id':_0xf83b78[_0xcd22a7(0x250)]['valueOf']()}},{'$lookup':{'from':_0xcd22a7(0x1f1),'localField':_0xcd22a7(0x1ea),'foreignField':_0xcd22a7(0x224),'as':_0xcd22a7(0x218)}}]),_0x5e5ef1=_0x484f55[_0xcd22a7(0x203)](_0x41a8b7=>{const _0x232eec=_0xcd22a7;console['log'](_0x232eec(0x223),_0x41a8b7);var _0x4f8672=0x0,_0x5d49d9=0x0;return _0x41a8b7['customer_docs']['forEach'](_0x29e39a=>{const _0x3fb875=_0x232eec;console['log'](_0x3fb875(0x252),_0x29e39a),_0x29e39a['reason']=='Sale'?_0x4f8672+=_0x29e39a[_0x3fb875(0x215)]:_0x5d49d9+=_0x29e39a[_0x3fb875(0x215)];}),_0x41a8b7[_0x232eec(0x253)]=parseFloat(_0x4f8672)+0x0,_0x41a8b7[_0x232eec(0x216)]=parseFloat(_0x5d49d9)+0x0,_0x41a8b7;});if(_0x431369[0x0][_0xcd22a7(0x1f6)]==_0xcd22a7(0x24b)){var _0x5437e0=users[_0xcd22a7(0x246)];console[_0xcd22a7(0x22a)](_0x5437e0);}else{if(_0x431369[0x0][_0xcd22a7(0x1f6)]==_0xcd22a7(0x221))var _0x5437e0=users[_0xcd22a7(0x221)];else{if(_0x431369[0x0][_0xcd22a7(0x1f6)]==_0xcd22a7(0x22c))var _0x5437e0=users[_0xcd22a7(0x22c)];else{if(_0x431369[0x0][_0xcd22a7(0x1f6)]==_0xcd22a7(0x231))var _0x5437e0=users[_0xcd22a7(0x231)];else{if(_0x431369[0x0]['language']=='French')var _0x5437e0=users[_0xcd22a7(0x1ff)];else{if(_0x431369[0x0][_0xcd22a7(0x1f6)]==_0xcd22a7(0x245))var _0x5437e0=users[_0xcd22a7(0x1e4)];else{if(_0x431369[0x0]['language']=='Chinese')var _0x5437e0=users[_0xcd22a7(0x213)];else{if(_0x431369[0x0][_0xcd22a7(0x1f6)]==_0xcd22a7(0x21e))var _0x5437e0=users[_0xcd22a7(0x226)];}}}}}}}_0x1f9ad6[_0xcd22a7(0x23f)](_0xcd22a7(0x243),{'success':_0x398e7a[_0xcd22a7(0x227)]('success'),'errors':_0x398e7a[_0xcd22a7(0x227)](_0xcd22a7(0x1e9)),'user':_0x30a5a9,'role':_0x19d3eb,'profile':_0x318090,'master_shop':_0x431369,'language':_0x5437e0,'agent_id':_0xf83b78[_0xcd22a7(0x250)],'payment':_0x5e5ef1,'staff_arr':_0xf83b78});}catch(_0x32e0e1){console[_0xcd22a7(0x22a)](_0x32e0e1);}}),router[a0_0x30ee3d(0x1f9)]('/view',auth,async(_0x47c532,_0x51f95a)=>{const _0x1e44d6=a0_0x30ee3d;try{const {name:_0x2363e0,address:_0x199d7d,mobile:_0x39892d,email:_0x4e1af0,receivable:_0x36ba5e,payable:_0x4f8534,contactperson:_0x35a97d,landline:_0x38afd8,agent_id:_0x18c269,less_percent:_0x39de0b,type_org:_0x10b6c3,res_address:_0x46378a,business_start_year:_0x5e06ab,credit_limit:_0x3966a0,term_pay:_0x4c22b6}=_0x47c532['body'];if(typeof _0x39de0b==_0x1e44d6(0x1fc))var _0x542cbd=[_0x47c532['body'][_0x1e44d6(0x235)]];else var _0x542cbd=[..._0x47c532[_0x1e44d6(0x20b)][_0x1e44d6(0x235)]];const _0x2ca8ac=_0x542cbd[_0x1e44d6(0x203)](_0x351677=>{return _0x351677={'less':_0x351677};}),_0x163038=new customer({'name':_0x2363e0,'address':_0x199d7d,'mobile':_0x39892d,'email':_0x4e1af0,'receivable':_0x36ba5e,'payable':_0x4f8534,'customer_discount':_0x2ca8ac,'contactperson':_0x35a97d,'landline':_0x38afd8,'agent_id':_0x18c269,'res_address':_0x46378a,'type_organization':_0x10b6c3,'business_start_year':_0x5e06ab,'credit_limit':_0x3966a0,'terms_of_payments':_0x4c22b6}),_0x4b989c=await _0x163038['save']();_0x47c532[_0x1e44d6(0x227)](_0x1e44d6(0x24e),'customer\x20add\x20successfully'),_0x51f95a[_0x1e44d6(0x20e)](_0x1e44d6(0x22b));}catch(_0x35db70){console[_0x1e44d6(0x22a)](_0x35db70);}}),router[a0_0x30ee3d(0x249)](a0_0x30ee3d(0x23d),auth,async(_0x5b71cf,_0x436045)=>{const _0x1b8b76=a0_0x30ee3d;try{const {username:_0x2e1de1,email:_0x10b32b,role:_0x3b84d6}=_0x5b71cf[_0x1b8b76(0x21d)],_0x7768c6=_0x5b71cf[_0x1b8b76(0x21d)],_0x1c1204=await profile['findOne']({'email':_0x7768c6[_0x1b8b76(0x217)]}),_0x4226ca=await master_shop[_0x1b8b76(0x1ee)]();console[_0x1b8b76(0x22a)]('master',_0x4226ca);const _0x1a514f=_0x5b71cf[_0x1b8b76(0x1f2)]['id'],_0x2bf66f=await customer[_0x1b8b76(0x1fe)](_0x1a514f);console['log'](_0x2bf66f);if(_0x4226ca[0x0][_0x1b8b76(0x1f6)]=='English\x20(US)'){var _0x578937=users[_0x1b8b76(0x246)];console[_0x1b8b76(0x22a)](_0x578937);}else{if(_0x4226ca[0x0][_0x1b8b76(0x1f6)]==_0x1b8b76(0x221))var _0x578937=users[_0x1b8b76(0x221)];else{if(_0x4226ca[0x0]['language']==_0x1b8b76(0x22c))var _0x578937=users[_0x1b8b76(0x22c)];else{if(_0x4226ca[0x0][_0x1b8b76(0x1f6)]==_0x1b8b76(0x231))var _0x578937=users['Spanish'];else{if(_0x4226ca[0x0][_0x1b8b76(0x1f6)]=='French')var _0x578937=users[_0x1b8b76(0x1ff)];else{if(_0x4226ca[0x0][_0x1b8b76(0x1f6)]==_0x1b8b76(0x245))var _0x578937=users[_0x1b8b76(0x1e4)];else{if(_0x4226ca[0x0][_0x1b8b76(0x1f6)]=='Chinese')var _0x578937=users['Chinese'];else{if(_0x4226ca[0x0][_0x1b8b76(0x1f6)]=='Arabic\x20(ae)')var _0x578937=users[_0x1b8b76(0x226)];}}}}}}}_0x436045['render']('customer_sa',{'success':_0x5b71cf['flash'](_0x1b8b76(0x24e)),'errors':_0x5b71cf[_0x1b8b76(0x227)](_0x1b8b76(0x1e9)),'role':_0x7768c6,'profile':_0x1c1204,'user':_0x2bf66f,'master_shop':_0x4226ca,'language':_0x578937});}catch(_0x30cce7){console[_0x1b8b76(0x22a)](_0x30cce7);}}),router[a0_0x30ee3d(0x1f9)](a0_0x30ee3d(0x23d),auth,async(_0x3f1fc3,_0xae4cc9)=>{const _0x421906=a0_0x30ee3d;try{const _0x36b502=_0x3f1fc3[_0x421906(0x1f2)]['id'],_0x1b40e5=await customer['findById'](_0x36b502),{name:_0x3769f6,address:_0x56b7a8,mobile:_0x5479ef,email:_0x33cfd2,receivable:_0x3b0200,payable:_0x87fadd,contactperson:_0x2cf943,landline:_0xbc67d5,less_percent_edit:_0x21020a,edit_type_org:_0x19ce24,edit_res_address:_0x5400e0,edit_business_start_year:_0x3d439f,edit_credit_limit:_0x2d8683,edit_term_pay:_0x1b76d7}=_0x3f1fc3[_0x421906(0x20b)];if(typeof _0x21020a==_0x421906(0x1fc))var _0x46fe15=[_0x3f1fc3[_0x421906(0x20b)][_0x421906(0x220)]];else var _0x46fe15=[..._0x3f1fc3[_0x421906(0x20b)]['less_percent_edit']];const _0x19c0f3=_0x46fe15[_0x421906(0x203)](_0x8f0f3e=>{return _0x8f0f3e={'less':_0x8f0f3e};});_0x1b40e5['name']=_0x3769f6,_0x1b40e5[_0x421906(0x1fb)]=_0x56b7a8,_0x1b40e5[_0x421906(0x248)]=_0x5479ef,_0x1b40e5['email']=_0x33cfd2,_0x1b40e5[_0x421906(0x1e8)]=_0x3b0200,_0x1b40e5[_0x421906(0x205)]=_0x87fadd,_0x1b40e5[_0x421906(0x228)]=_0x2cf943,_0x1b40e5[_0x421906(0x21b)]=_0xbc67d5,_0x1b40e5[_0x421906(0x225)]=_0x19c0f3,_0x1b40e5[_0x421906(0x209)]=_0x19ce24,_0x1b40e5[_0x421906(0x1e6)]=_0x3d439f,_0x1b40e5[_0x421906(0x212)]=_0x2d8683,_0x1b40e5[_0x421906(0x240)]=_0x1b76d7,_0x1b40e5['res_address']=_0x5400e0;const _0x40ca23=await _0x1b40e5['save']();_0x3f1fc3[_0x421906(0x227)]('success',_0x421906(0x23c)),_0xae4cc9[_0x421906(0x20e)](_0x421906(0x22b));}catch(_0x25b11f){console[_0x421906(0x22a)](_0x25b11f);}}),router['get'](a0_0x30ee3d(0x244),auth,async(_0x120b98,_0x513e2a)=>{const _0x1570ba=a0_0x30ee3d;try{const {username:_0x428848,email:_0x4fc085,role:_0x4ec572}=_0x120b98[_0x1570ba(0x21d)],_0x330eef=_0x120b98[_0x1570ba(0x21d)],_0x5915fe=await profile['findOne']({'email':_0x330eef[_0x1570ba(0x217)]}),_0x17a70a=await master_shop[_0x1570ba(0x1ee)]();console[_0x1570ba(0x22a)](_0x1570ba(0x234),_0x17a70a),console[_0x1570ba(0x22a)](_0x120b98[_0x1570ba(0x1f2)]['id']);const _0xc702c8=await customer[_0x1570ba(0x21f)]({'_id':_0x120b98[_0x1570ba(0x1f2)]['id']});console[_0x1570ba(0x22a)](_0x1570ba(0x21a),_0xc702c8);const _0x3e80a9=await c_payment_data['find']({'customer':_0xc702c8[_0x1570ba(0x1ea)]});console[_0x1570ba(0x22a)](_0x3e80a9);const _0x3fc627=await c_payment_data[_0x1570ba(0x1f7)]([{'$match':{'customer':_0xc702c8['name']}},{'$match':{'reason':'Sale'}},{'$group':{'_id':_0x1570ba(0x241),'sum':{'$sum':_0x1570ba(0x247)}}}]);console[_0x1570ba(0x22a)](_0x1570ba(0x211),_0x3fc627);const _0x382d12=await c_payment_data[_0x1570ba(0x1f7)]([{'$match':{'customer':_0xc702c8[_0x1570ba(0x1ea)]}},{'$match':{'reason':_0x1570ba(0x207)}},{'$group':{'_id':_0x1570ba(0x241),'sum':{'$sum':_0x1570ba(0x247)}}}]);console['log'](_0x1570ba(0x23e),_0x382d12);if(_0x17a70a[0x0][_0x1570ba(0x1f6)]==_0x1570ba(0x24b)){var _0x3c6cd6=users[_0x1570ba(0x246)];console['log'](_0x3c6cd6);}else{if(_0x17a70a[0x0][_0x1570ba(0x1f6)]==_0x1570ba(0x221))var _0x3c6cd6=users['Hindi'];else{if(_0x17a70a[0x0][_0x1570ba(0x1f6)]=='German')var _0x3c6cd6=users[_0x1570ba(0x22c)];else{if(_0x17a70a[0x0][_0x1570ba(0x1f6)]==_0x1570ba(0x231))var _0x3c6cd6=users[_0x1570ba(0x231)];else{if(_0x17a70a[0x0][_0x1570ba(0x1f6)]==_0x1570ba(0x1ff))var _0x3c6cd6=users[_0x1570ba(0x1ff)];else{if(_0x17a70a[0x0][_0x1570ba(0x1f6)]==_0x1570ba(0x245))var _0x3c6cd6=users['Portuguese'];else{if(_0x17a70a[0x0]['language']=='Chinese')var _0x3c6cd6=users[_0x1570ba(0x213)];else{if(_0x17a70a[0x0][_0x1570ba(0x1f6)]=='Arabic\x20(ae)')var _0x3c6cd6=users['Arabic'];}}}}}}}_0x513e2a[_0x1570ba(0x23f)](_0x1570ba(0x201),{'success':_0x120b98[_0x1570ba(0x227)](_0x1570ba(0x24e)),'errors':_0x120b98[_0x1570ba(0x227)](_0x1570ba(0x1e9)),'role':_0x330eef,'profile':_0x5915fe,'payment':_0x3e80a9,'payable':_0x3fc627,'receivable':_0x382d12,'master_shop':_0x17a70a,'language':_0x3c6cd6});}catch(_0x374e59){console[_0x1570ba(0x22a)](_0x374e59);}}),router['get'](a0_0x30ee3d(0x242),auth,async(_0x30c0a8,_0x1cf257)=>{const _0x16289f=a0_0x30ee3d;try{const _0x539377=new excelJS[(_0x16289f(0x24a))](),_0x257e11=_0x539377['addWorksheet'](_0x16289f(0x1f8));return _0x257e11[_0x16289f(0x1f4)]=[{'header':'ID','key':'PName','width':0xa},{'header':_0x16289f(0x23b),'key':_0x16289f(0x1ec),'width':0xa},{'header':_0x16289f(0x1f5),'key':_0x16289f(0x1e7),'width':0xa},{'header':_0x16289f(0x20f),'key':'SalesmanName','width':0xa},{'header':_0x16289f(0x1fb),'key':'address','width':0xa},{'header':_0x16289f(0x248),'key':_0x16289f(0x248),'width':0xa},{'header':_0x16289f(0x217),'key':'email','width':0xa}],_0x1cf257['setHeader'](_0x16289f(0x1f0),_0x16289f(0x24f)),_0x1cf257[_0x16289f(0x239)]('Content-Disposition',_0x16289f(0x1e5)),_0x539377['xlsx'][_0x16289f(0x200)](_0x1cf257)['then'](()=>{const _0x1444ab=_0x16289f;_0x1cf257[_0x1444ab(0x1ed)](0xc8);});}catch(_0x4690c0){_0x1cf257[_0x16289f(0x1ed)](0x190)[_0x16289f(0x21c)]({'errors':_0x4690c0[_0x16289f(0x22d)]});}});const storage1=multer[a0_0x30ee3d(0x202)]({'destination':(_0x4117b3,_0x463099,_0x2a070c)=>{const _0x13414d=a0_0x30ee3d;_0x2a070c(null,_0x13414d(0x1e3));},'filename':(_0x24fd4d,_0x45f9e3,_0x496ece)=>{_0x496ece(null,Date['now']()+_0x45f9e3['originalname']);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x30ee3d(0x1f9)](a0_0x30ee3d(0x229),auth,uploadMigrate[a0_0x30ee3d(0x236)](a0_0x30ee3d(0x1ef)),async(_0x57827d,_0xb78c5c)=>{const _0x21de70=a0_0x30ee3d,_0x2f1c4e=_0x57827d['file'][_0x21de70(0x210)],_0xae02fe=await xlsx[_0x21de70(0x230)](_0x21de70(0x23a)+_0x2f1c4e);let _0xf073eb=_0xae02fe['SheetNames'],_0xc15432=xlsx[_0x21de70(0x1f3)]['sheet_to_json'](_0xae02fe[_0x21de70(0x238)][_0xf073eb[0x0]]);for(const _0x4d8908 of _0xc15432){const _0x57aa7c=_0x4d8908['ID'],_0x4778db=_0x4d8908[_0x21de70(0x23b)],_0x46661a=_0x4d8908[_0x21de70(0x1f5)],_0x3b172f=_0x4d8908[_0x21de70(0x20f)],_0x6f096a=_0x4d8908[_0x21de70(0x1fb)],_0xdb64fe=_0x4d8908[_0x21de70(0x248)],_0x309675=_0x4d8908[_0x21de70(0x217)];try{let _0x4dee55=await customer[_0x21de70(0x21f)]({'name':_0x4778db});if(!_0x4dee55){const _0x4baf66=new customer({'name':_0x4778db,'ID':_0x57aa7c,'SalesmanCode':_0x46661a,'SalesmanName':_0x3b172f,'address':_0x6f096a,'mobile':_0xdb64fe,'email':_0x309675});_0x4dee55=await _0x4baf66['save'](),_0x57827d['flash']('success',_0x4778db+_0x21de70(0x20a));}else _0x57827d[_0x21de70(0x227)](_0x21de70(0x22e),_0x4778db+_0x21de70(0x20c));}catch(_0x3e7b50){_0xb78c5c[_0x21de70(0x1ed)](0x1f4)['json']({'proderror':_0x3e7b50[_0x21de70(0x22d)],'aproduct':ProductName});}}_0xb78c5c[_0x21de70(0x20e)](_0x21de70(0x22b));}),module[a0_0x30ee3d(0x237)]=router;