function a0_0x197c(){const _0x3058cb=['email','res_address','params','Content-Disposition','language','status','findById','receivable_sum','Customers','3875HYDpPD','receivable','$reason','SalesmanCode','Arabic\x20(ae)','3940064mEIOWq','setHeader','Arabic','customer_data','user','type_organization','mobile','save','write','customer\x20add\x20successfully','name','PUnits','now','data','map','then','French','26jkeZcq','aggregate','attachment;\x20filename=customer_Migration_File.xlsx','flash','error','customer_docs','less_percent','reason','SalesmanName','Portuguese\x20(BR)','SheetNames','forEach','/customer_sa/view','c_payments','46200kOPTuY','public/Migration','filename','find','public/Migration/','Sheets','render','originalname','valueOf','get','findOne','errors','message','$amount','less_percent_edit','../middleware/auth','Sale','sheet_to_json','/view/payment/:id','master','Portuguese','PBrands','\x20Failed','English','/customer_import_migrate_file','Content-Type','\x20added\x20successfully','express','1338801DMCGkB','/products_export_migrate_file','Chinese','string','3534225OPmFSd','/view','diskStorage','Router','German','English\x20(US)','element','address','json','success','Name','_id','customer_payment','contactperson','utils','exports','body','single','log','customer','redirect','columns','/view/:id','customer_product_fule','send','1089090FiHKYr','amount','business_start_year','customer_discount','Hindi','post','xlsx','182860EtDGry','sale_return','Spanish'];a0_0x197c=function(){return _0x3058cb;};return a0_0x197c();}const a0_0x45dd54=a0_0x25e8;(function(_0x4f8688,_0xfabc2){const _0x286c06=a0_0x25e8,_0x21316e=_0x4f8688();while(!![]){try{const _0x1b13db=-parseInt(_0x286c06(0x245))/0x1*(parseInt(_0x286c06(0x1eb))/0x2)+parseInt(_0x286c06(0x215))/0x3+parseInt(_0x286c06(0x239))/0x4+parseInt(_0x286c06(0x219))/0x5+-parseInt(_0x286c06(0x232))/0x6+parseInt(_0x286c06(0x1f9))/0x7+-parseInt(_0x286c06(0x24a))/0x8;if(_0x1b13db===_0xfabc2)break;else _0x21316e['push'](_0x21316e['shift']());}catch(_0x2c01fc){_0x21316e['push'](_0x21316e['shift']());}}}(a0_0x197c,0x75705));const express=require(a0_0x45dd54(0x214)),app=express(),router=express[a0_0x45dd54(0x21c)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require('../models/all_models'),auth=require(a0_0x45dd54(0x208)),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require(a0_0x45dd54(0x238)),multer=require('multer');router[a0_0x45dd54(0x202)](a0_0x45dd54(0x21a),auth,async(_0x40bd01,_0x2194b9)=>{const _0x143276=a0_0x45dd54;try{const {username:_0x5647a7,email:_0x51e707,role:_0x2de6fd}=_0x40bd01[_0x143276(0x24e)],_0x448405=_0x40bd01[_0x143276(0x24e)],_0x3ce68c=await profile['findOne']({'email':_0x448405[_0x143276(0x23c)]}),_0x2dd398=await master_shop['find'](),_0x4566f0=await staff['findOne']({'email':_0x448405[_0x143276(0x23c)]}),_0x5e8362=await customer[_0x143276(0x1fc)]({'agent_id':_0x4566f0['_id']}),_0x4121c8=await customer['aggregate']([{'$match':{'agent_id':_0x4566f0[_0x143276(0x224)][_0x143276(0x201)]()}},{'$lookup':{'from':_0x143276(0x1f8),'localField':_0x143276(0x1e4),'foreignField':_0x143276(0x22c),'as':_0x143276(0x1f0)}}]),_0x449fb5=_0x4121c8[_0x143276(0x1e8)](_0x360d66=>{const _0x41a8a5=_0x143276;console[_0x41a8a5(0x22b)](_0x41a8a5(0x1e7),_0x360d66);var _0x2f21ee=0x0,_0x53eceb=0x0;return _0x360d66[_0x41a8a5(0x1f0)][_0x41a8a5(0x1f6)](_0x185c6b=>{const _0x4e9384=_0x41a8a5;console[_0x4e9384(0x22b)](_0x4e9384(0x21f),_0x185c6b),_0x185c6b[_0x4e9384(0x1f2)]==_0x4e9384(0x209)?_0x2f21ee+=_0x185c6b['amount']:_0x53eceb+=_0x185c6b[_0x4e9384(0x233)];}),_0x360d66['sale']=parseFloat(_0x2f21ee)+0x0,_0x360d66[_0x41a8a5(0x23a)]=parseFloat(_0x53eceb)+0x0,_0x360d66;});if(_0x2dd398[0x0][_0x143276(0x240)]==_0x143276(0x21e)){var _0x5284a9=users[_0x143276(0x210)];console[_0x143276(0x22b)](_0x5284a9);}else{if(_0x2dd398[0x0][_0x143276(0x240)]==_0x143276(0x236))var _0x5284a9=users['Hindi'];else{if(_0x2dd398[0x0][_0x143276(0x240)]==_0x143276(0x21d))var _0x5284a9=users[_0x143276(0x21d)];else{if(_0x2dd398[0x0][_0x143276(0x240)]==_0x143276(0x23b))var _0x5284a9=users[_0x143276(0x23b)];else{if(_0x2dd398[0x0][_0x143276(0x240)]==_0x143276(0x1ea))var _0x5284a9=users['French'];else{if(_0x2dd398[0x0][_0x143276(0x240)]==_0x143276(0x1f4))var _0x5284a9=users[_0x143276(0x20d)];else{if(_0x2dd398[0x0]['language']=='Chinese')var _0x5284a9=users['Chinese'];else{if(_0x2dd398[0x0][_0x143276(0x240)]==_0x143276(0x249))var _0x5284a9=users[_0x143276(0x24c)];}}}}}}}_0x2194b9[_0x143276(0x1ff)]('customer_sa',{'success':_0x40bd01['flash'](_0x143276(0x222)),'errors':_0x40bd01['flash'](_0x143276(0x204)),'user':_0x5e8362,'role':_0x448405,'profile':_0x3ce68c,'master_shop':_0x2dd398,'language':_0x5284a9,'agent_id':_0x4566f0[_0x143276(0x224)],'payment':_0x449fb5,'staff_arr':_0x4566f0});}catch(_0x2e9d94){console[_0x143276(0x22b)](_0x2e9d94);}}),router['post'](a0_0x45dd54(0x21a),auth,async(_0x35ab67,_0x4ba4e)=>{const _0x5b252d=a0_0x45dd54;try{const {name:_0x195ed5,address:_0x27651b,mobile:_0x486960,email:_0x830e22,receivable:_0x3c6ac1,payable:_0x365a25,contactperson:_0x25a24b,landline:_0x1e025b,agent_id:_0x2c084c,less_percent:_0x315781,type_org:_0x36dad2,res_address:_0x48064a,business_start_year:_0x5d9aee,credit_limit:_0x44561f,term_pay:_0x28c1a1}=_0x35ab67['body'];if(typeof _0x315781==_0x5b252d(0x218))var _0x5f2eb0=[_0x35ab67['body'][_0x5b252d(0x1f1)]];else var _0x5f2eb0=[..._0x35ab67['body'][_0x5b252d(0x1f1)]];const _0x8715d9=_0x5f2eb0[_0x5b252d(0x1e8)](_0x3a3476=>{return _0x3a3476={'less':_0x3a3476};}),_0x21288e=new customer({'name':_0x195ed5,'address':_0x27651b,'mobile':_0x486960,'email':_0x830e22,'receivable':_0x3c6ac1,'payable':_0x365a25,'customer_discount':_0x8715d9,'contactperson':_0x25a24b,'landline':_0x1e025b,'agent_id':_0x2c084c,'res_address':_0x48064a,'type_organization':_0x36dad2,'business_start_year':_0x5d9aee,'credit_limit':_0x44561f,'terms_of_payments':_0x28c1a1}),_0xea57ea=await _0x21288e['save']();_0x35ab67[_0x5b252d(0x1ee)]('success',_0x5b252d(0x1e3)),_0x4ba4e['redirect'](_0x5b252d(0x1f7));}catch(_0x2c9317){console['log'](_0x2c9317);}}),router[a0_0x45dd54(0x202)](a0_0x45dd54(0x22f),auth,async(_0x46b6c2,_0x1ab8e1)=>{const _0x2e0cb2=a0_0x45dd54;try{const {username:_0x46e2c2,email:_0x9431f0,role:_0x505b2c}=_0x46b6c2[_0x2e0cb2(0x24e)],_0x44edbe=_0x46b6c2['user'],_0x55c7d2=await profile[_0x2e0cb2(0x203)]({'email':_0x44edbe[_0x2e0cb2(0x23c)]}),_0x2c2526=await master_shop[_0x2e0cb2(0x1fc)]();console[_0x2e0cb2(0x22b)](_0x2e0cb2(0x20c),_0x2c2526);const _0x327b12=_0x46b6c2[_0x2e0cb2(0x23e)]['id'],_0x423478=await customer[_0x2e0cb2(0x242)](_0x327b12);console[_0x2e0cb2(0x22b)](_0x423478);if(_0x2c2526[0x0][_0x2e0cb2(0x240)]==_0x2e0cb2(0x21e)){var _0x4fe35b=users[_0x2e0cb2(0x210)];console[_0x2e0cb2(0x22b)](_0x4fe35b);}else{if(_0x2c2526[0x0][_0x2e0cb2(0x240)]=='Hindi')var _0x4fe35b=users['Hindi'];else{if(_0x2c2526[0x0]['language']=='German')var _0x4fe35b=users['German'];else{if(_0x2c2526[0x0][_0x2e0cb2(0x240)]==_0x2e0cb2(0x23b))var _0x4fe35b=users[_0x2e0cb2(0x23b)];else{if(_0x2c2526[0x0][_0x2e0cb2(0x240)]==_0x2e0cb2(0x1ea))var _0x4fe35b=users[_0x2e0cb2(0x1ea)];else{if(_0x2c2526[0x0][_0x2e0cb2(0x240)]==_0x2e0cb2(0x1f4))var _0x4fe35b=users['Portuguese'];else{if(_0x2c2526[0x0][_0x2e0cb2(0x240)]==_0x2e0cb2(0x217))var _0x4fe35b=users['Chinese'];else{if(_0x2c2526[0x0][_0x2e0cb2(0x240)]==_0x2e0cb2(0x249))var _0x4fe35b=users[_0x2e0cb2(0x24c)];}}}}}}}_0x1ab8e1[_0x2e0cb2(0x1ff)]('customer_sa',{'success':_0x46b6c2['flash'](_0x2e0cb2(0x222)),'errors':_0x46b6c2['flash'](_0x2e0cb2(0x204)),'role':_0x44edbe,'profile':_0x55c7d2,'user':_0x423478,'master_shop':_0x2c2526,'language':_0x4fe35b});}catch(_0x569345){console[_0x2e0cb2(0x22b)](_0x569345);}}),router[a0_0x45dd54(0x237)]('/view/:id',auth,async(_0x3248f1,_0x290546)=>{const _0x584619=a0_0x45dd54;try{const _0x2ff5eb=_0x3248f1['params']['id'],_0xbe9ea9=await customer['findById'](_0x2ff5eb),{name:_0x3990d4,address:_0x1d9ff6,mobile:_0x2d56e3,email:_0x4ba23f,receivable:_0xa3e2d5,payable:_0x5bd57d,contactperson:_0x31412a,landline:_0x1736be,less_percent_edit:_0x5cf757,edit_type_org:_0x35319a,edit_res_address:_0x2803e3,edit_business_start_year:_0x85f35e,edit_credit_limit:_0x42a2a2,edit_term_pay:_0x43623d}=_0x3248f1['body'];if(typeof _0x5cf757==_0x584619(0x218))var _0x1ce588=[_0x3248f1[_0x584619(0x229)][_0x584619(0x207)]];else var _0x1ce588=[..._0x3248f1[_0x584619(0x229)][_0x584619(0x207)]];const _0x4f1236=_0x1ce588[_0x584619(0x1e8)](_0x3b3daf=>{return _0x3b3daf={'less':_0x3b3daf};});_0xbe9ea9[_0x584619(0x1e4)]=_0x3990d4,_0xbe9ea9['address']=_0x1d9ff6,_0xbe9ea9[_0x584619(0x1e0)]=_0x2d56e3,_0xbe9ea9[_0x584619(0x23c)]=_0x4ba23f,_0xbe9ea9[_0x584619(0x246)]=_0xa3e2d5,_0xbe9ea9['payable']=_0x5bd57d,_0xbe9ea9[_0x584619(0x226)]=_0x31412a,_0xbe9ea9['landline']=_0x1736be,_0xbe9ea9[_0x584619(0x235)]=_0x4f1236,_0xbe9ea9[_0x584619(0x1df)]=_0x35319a,_0xbe9ea9[_0x584619(0x234)]=_0x85f35e,_0xbe9ea9['credit_limit']=_0x42a2a2,_0xbe9ea9['terms_of_payments']=_0x43623d,_0xbe9ea9[_0x584619(0x23d)]=_0x2803e3;const _0xd7a6ed=await _0xbe9ea9[_0x584619(0x1e1)]();_0x3248f1['flash']('success','customer\x20update\x20successfully'),_0x290546['redirect'](_0x584619(0x1f7));}catch(_0x4c0cc6){console[_0x584619(0x22b)](_0x4c0cc6);}}),router[a0_0x45dd54(0x202)](a0_0x45dd54(0x20b),auth,async(_0x5b1c14,_0x494f9b)=>{const _0x2e1dba=a0_0x45dd54;try{const {username:_0x4b270f,email:_0x37049e,role:_0x382080}=_0x5b1c14[_0x2e1dba(0x24e)],_0x4fb476=_0x5b1c14[_0x2e1dba(0x24e)],_0x292dac=await profile['findOne']({'email':_0x4fb476['email']}),_0x23054e=await master_shop[_0x2e1dba(0x1fc)]();console[_0x2e1dba(0x22b)](_0x2e1dba(0x20c),_0x23054e),console['log'](_0x5b1c14[_0x2e1dba(0x23e)]['id']);const _0x2de878=await customer[_0x2e1dba(0x203)]({'_id':_0x5b1c14[_0x2e1dba(0x23e)]['id']});console[_0x2e1dba(0x22b)](_0x2e1dba(0x24d),_0x2de878);const _0x325841=await c_payment_data[_0x2e1dba(0x1fc)]({'customer':_0x2de878['name']});console[_0x2e1dba(0x22b)](_0x325841);const _0x1d8781=await c_payment_data[_0x2e1dba(0x1ec)]([{'$match':{'customer':_0x2de878[_0x2e1dba(0x1e4)]}},{'$match':{'reason':'Sale'}},{'$group':{'_id':_0x2e1dba(0x247),'sum':{'$sum':_0x2e1dba(0x206)}}}]);console[_0x2e1dba(0x22b)]('payable_sum',_0x1d8781);const _0x3bc790=await c_payment_data['aggregate']([{'$match':{'customer':_0x2de878[_0x2e1dba(0x1e4)]}},{'$match':{'reason':'Sale\x20Return'}},{'$group':{'_id':'$reason','sum':{'$sum':_0x2e1dba(0x206)}}}]);console[_0x2e1dba(0x22b)](_0x2e1dba(0x243),_0x3bc790);if(_0x23054e[0x0][_0x2e1dba(0x240)]==_0x2e1dba(0x21e)){var _0x1de39c=users[_0x2e1dba(0x210)];console[_0x2e1dba(0x22b)](_0x1de39c);}else{if(_0x23054e[0x0][_0x2e1dba(0x240)]==_0x2e1dba(0x236))var _0x1de39c=users[_0x2e1dba(0x236)];else{if(_0x23054e[0x0]['language']==_0x2e1dba(0x21d))var _0x1de39c=users[_0x2e1dba(0x21d)];else{if(_0x23054e[0x0]['language']==_0x2e1dba(0x23b))var _0x1de39c=users['Spanish'];else{if(_0x23054e[0x0][_0x2e1dba(0x240)]==_0x2e1dba(0x1ea))var _0x1de39c=users['French'];else{if(_0x23054e[0x0][_0x2e1dba(0x240)]==_0x2e1dba(0x1f4))var _0x1de39c=users[_0x2e1dba(0x20d)];else{if(_0x23054e[0x0][_0x2e1dba(0x240)]=='Chinese')var _0x1de39c=users[_0x2e1dba(0x217)];else{if(_0x23054e[0x0][_0x2e1dba(0x240)]==_0x2e1dba(0x249))var _0x1de39c=users['Arabic'];}}}}}}}_0x494f9b[_0x2e1dba(0x1ff)](_0x2e1dba(0x225),{'success':_0x5b1c14['flash'](_0x2e1dba(0x222)),'errors':_0x5b1c14[_0x2e1dba(0x1ee)](_0x2e1dba(0x204)),'role':_0x4fb476,'profile':_0x292dac,'payment':_0x325841,'payable':_0x1d8781,'receivable':_0x3bc790,'master_shop':_0x23054e,'language':_0x1de39c});}catch(_0x3ce139){console[_0x2e1dba(0x22b)](_0x3ce139);}}),router[a0_0x45dd54(0x202)](a0_0x45dd54(0x216),auth,async(_0x2d72b8,_0x1cc41f)=>{const _0x1a54cf=a0_0x45dd54;try{const _0x156d17=new excelJS['Workbook'](),_0x5d2793=_0x156d17['addWorksheet'](_0x1a54cf(0x244));return _0x5d2793[_0x1a54cf(0x22e)]=[{'header':'ID','key':'PName','width':0xa},{'header':'Name','key':_0x1a54cf(0x20e),'width':0xa},{'header':_0x1a54cf(0x248),'key':_0x1a54cf(0x1e5),'width':0xa},{'header':_0x1a54cf(0x1f3),'key':_0x1a54cf(0x1f3),'width':0xa},{'header':_0x1a54cf(0x220),'key':_0x1a54cf(0x220),'width':0xa},{'header':_0x1a54cf(0x1e0),'key':_0x1a54cf(0x1e0),'width':0xa},{'header':'email','key':_0x1a54cf(0x23c),'width':0xa}],_0x1cc41f[_0x1a54cf(0x24b)](_0x1a54cf(0x212),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x1cc41f['setHeader'](_0x1a54cf(0x23f),_0x1a54cf(0x1ed)),_0x156d17[_0x1a54cf(0x238)][_0x1a54cf(0x1e2)](_0x1cc41f)[_0x1a54cf(0x1e9)](()=>{_0x1cc41f['status'](0xc8);});}catch(_0x155034){_0x1cc41f[_0x1a54cf(0x241)](0x190)[_0x1a54cf(0x231)]({'errors':_0x155034[_0x1a54cf(0x205)]});}});function a0_0x25e8(_0x576840,_0x391ca8){const _0x197cba=a0_0x197c();return a0_0x25e8=function(_0x25e882,_0x26d01a){_0x25e882=_0x25e882-0x1df;let _0x56e8ba=_0x197cba[_0x25e882];return _0x56e8ba;},a0_0x25e8(_0x576840,_0x391ca8);}const storage1=multer[a0_0x45dd54(0x21b)]({'destination':(_0x44554e,_0x36b63c,_0x21b999)=>{const _0x696b33=a0_0x45dd54;_0x21b999(null,_0x696b33(0x1fa));},'filename':(_0x4e1227,_0x19407c,_0xedaf1f)=>{const _0x47158=a0_0x45dd54;_0xedaf1f(null,Date[_0x47158(0x1e6)]()+_0x19407c[_0x47158(0x200)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x45dd54(0x237)](a0_0x45dd54(0x211),auth,uploadMigrate[a0_0x45dd54(0x22a)](a0_0x45dd54(0x230)),async(_0x552b53,_0x16b972)=>{const _0x3bb180=a0_0x45dd54,_0x4b8a60=_0x552b53['file'][_0x3bb180(0x1fb)],_0x460128=await xlsx['readFile'](_0x3bb180(0x1fd)+_0x4b8a60);let _0xe2f294=_0x460128[_0x3bb180(0x1f5)],_0x1be854=xlsx[_0x3bb180(0x227)][_0x3bb180(0x20a)](_0x460128[_0x3bb180(0x1fe)][_0xe2f294[0x0]]);for(const _0x17fcc3 of _0x1be854){const _0x30346e=_0x17fcc3['ID'],_0x447f67=_0x17fcc3[_0x3bb180(0x223)],_0x554249=_0x17fcc3[_0x3bb180(0x248)],_0x1cbcd3=_0x17fcc3[_0x3bb180(0x1f3)],_0x445f69=_0x17fcc3[_0x3bb180(0x220)],_0x37f5f5=_0x17fcc3[_0x3bb180(0x1e0)],_0x58b214=_0x17fcc3['email'];try{let _0x594ea7=await customer[_0x3bb180(0x203)]({'name':_0x447f67});if(!_0x594ea7){const _0x162138=new customer({'name':_0x447f67,'ID':_0x30346e,'SalesmanCode':_0x554249,'SalesmanName':_0x1cbcd3,'address':_0x445f69,'mobile':_0x37f5f5,'email':_0x58b214});_0x594ea7=await _0x162138[_0x3bb180(0x1e1)](),_0x552b53[_0x3bb180(0x1ee)](_0x3bb180(0x222),_0x447f67+_0x3bb180(0x213));}else _0x552b53[_0x3bb180(0x1ee)](_0x3bb180(0x1ef),_0x447f67+_0x3bb180(0x20f));}catch(_0x4df5bf){_0x16b972[_0x3bb180(0x241)](0x1f4)[_0x3bb180(0x221)]({'proderror':_0x4df5bf['message'],'aproduct':ProductName});}}_0x16b972[_0x3bb180(0x22d)](_0x3bb180(0x1f7));}),module[a0_0x45dd54(0x228)]=router;