const a0_0x16d01d=a0_0x4450;(function(_0x16d326,_0x52b057){const _0x4e5c52=a0_0x4450,_0x1786e0=_0x16d326();while(!![]){try{const _0x34163a=-parseInt(_0x4e5c52(0x138))/0x1*(-parseInt(_0x4e5c52(0x119))/0x2)+-parseInt(_0x4e5c52(0x150))/0x3+-parseInt(_0x4e5c52(0x116))/0x4*(parseInt(_0x4e5c52(0x14e))/0x5)+parseInt(_0x4e5c52(0x149))/0x6*(-parseInt(_0x4e5c52(0x12b))/0x7)+parseInt(_0x4e5c52(0x12c))/0x8*(-parseInt(_0x4e5c52(0x141))/0x9)+-parseInt(_0x4e5c52(0x140))/0xa*(parseInt(_0x4e5c52(0x13c))/0xb)+parseInt(_0x4e5c52(0x133))/0xc*(parseInt(_0x4e5c52(0x13b))/0xd);if(_0x34163a===_0x52b057)break;else _0x1786e0['push'](_0x1786e0['shift']());}catch(_0x5b0355){_0x1786e0['push'](_0x1786e0['shift']());}}}(a0_0x38b4,0xc87c5));function a0_0x38b4(){const _0x2274af=['jsonwebtoken','../models/all_models','../middleware/auth','password','/login','Router','sign','secret_key','express','env','7TttyKV','2200xkqmlI','login\x20successfully','role','render','log','type_of_acc_cat','warehouse','36oPzFtY','get','account_category','compare','body','39580vVSgKg','staff','findOne','17219033dthniz','82115yGZIyb','/staff/view','status','params','170uybDCY','36081RqDhKm','bcryptjs','validate','errors','clearCookie','post','exports','login','1546926kSnIgf','redirect','username','/index','your\x20email\x20is\x20not\x20register','17285jSovlE','Disabled','3590796criSFv','/staff/:id','find','jwt','1412cszUYw','findById','email','38EMmBni','flash','cookie','success','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','_id','/logout','warehouse_category'];a0_0x38b4=function(){return _0x2274af;};return a0_0x38b4();}const express=require(a0_0x16d01d(0x129)),app=express(),router=express[a0_0x16d01d(0x126)](),{sing_up,staff,profile,master_shop}=require(a0_0x16d01d(0x122)),bcrypt=require(a0_0x16d01d(0x142)),jwt=require(a0_0x16d01d(0x121)),auth=require(a0_0x16d01d(0x123));function a0_0x4450(_0x4357dc,_0x21a95b){const _0x38b43e=a0_0x38b4();return a0_0x4450=function(_0x4450f0,_0xa894fe){_0x4450f0=_0x4450f0-0x116;let _0x10f763=_0x38b43e[_0x4450f0];return _0x10f763;},a0_0x4450(_0x4357dc,_0x21a95b);}router[a0_0x16d01d(0x134)]('/',async(_0x155356,_0x591664)=>{const _0x1204a8=a0_0x16d01d;try{const _0x30203d=await master_shop['find']();_0x591664[_0x1204a8(0x12f)](_0x1204a8(0x148),{'success':_0x155356[_0x1204a8(0x11a)](_0x1204a8(0x11c)),'errors':_0x155356[_0x1204a8(0x11a)](_0x1204a8(0x144)),'master_shop':_0x30203d});}catch(_0x136adc){console[_0x1204a8(0x130)](_0x136adc);}}),router[a0_0x16d01d(0x134)]('/validate',async(_0x5bdaea,_0x8b6737)=>{const _0x49f156=a0_0x16d01d;try{const _0x21bc6a=await master_shop[_0x49f156(0x152)]();_0x8b6737[_0x49f156(0x12f)](_0x49f156(0x143),{'success':_0x5bdaea[_0x49f156(0x11a)]('success'),'errors':_0x5bdaea[_0x49f156(0x11a)](_0x49f156(0x144)),'master_shop':_0x21bc6a});}catch(_0x260cb2){console[_0x49f156(0x130)](_0x260cb2);}}),router[a0_0x16d01d(0x134)](a0_0x16d01d(0x125),async(_0x36be59,_0xe0a548)=>{const _0x47a10e=a0_0x16d01d;try{const _0x45fde9=await master_shop[_0x47a10e(0x152)]();console[_0x47a10e(0x130)]('login\x20master',_0x45fde9),_0xe0a548['render'](_0x47a10e(0x148),{'success':_0x36be59[_0x47a10e(0x11a)]('success'),'errors':_0x36be59[_0x47a10e(0x11a)](_0x47a10e(0x144)),'master_shop':_0x45fde9});}catch(_0x14693f){console['log'](_0x14693f);}}),router[a0_0x16d01d(0x146)]('/login',async(_0x51d52a,_0x49e975)=>{const _0x8ca165=a0_0x16d01d;try{const _0xb682cb=_0x51d52a[_0x8ca165(0x137)][_0x8ca165(0x118)],_0x3c083f=await sing_up[_0x8ca165(0x13a)]({'email':_0xb682cb});if(!_0x3c083f)return _0x51d52a[_0x8ca165(0x11a)](_0x8ca165(0x144),_0x8ca165(0x14d)),_0x49e975[_0x8ca165(0x14a)](_0x8ca165(0x125));const _0x3646e7=await staff[_0x8ca165(0x13a)]({'email':_0x3c083f[_0x8ca165(0x118)]});var _0x3b394c=_0x3646e7[_0x8ca165(0x135)],_0x5ea875=_0x3646e7['type_of_acc_cat'],_0x389ddd=_0x3646e7[_0x8ca165(0x11e)],_0x31dcd7=_0x3646e7[_0x8ca165(0x132)];if(_0x3c083f[_0x8ca165(0x12e)]==_0x8ca165(0x139)){const _0x5af9ae=await staff[_0x8ca165(0x13a)]({'email':_0x3c083f[_0x8ca165(0x118)]});if(_0x5af9ae[_0x8ca165(0x13e)]==_0x8ca165(0x14f))return _0x51d52a[_0x8ca165(0x11a)]('errors',_0x8ca165(0x11d)),_0x49e975[_0x8ca165(0x14a)](_0x8ca165(0x125));_0x3b394c=_0x5af9ae[_0x8ca165(0x135)],_0x5ea875=_0x5af9ae[_0x8ca165(0x131)],_0x389ddd=_0x5af9ae[_0x8ca165(0x11e)],_0x31dcd7=_0x5af9ae[_0x8ca165(0x132)];}const _0x3c45d0=_0x51d52a[_0x8ca165(0x137)][_0x8ca165(0x124)],_0x3c5d21=await bcrypt[_0x8ca165(0x136)](_0x3c45d0,_0x3c083f['password']);if(_0x3c5d21==![])return _0x51d52a['flash']('errors','your\x20password\x20is\x20wrong'),_0x49e975[_0x8ca165(0x14a)]('/login');const _0x44460a=jwt[_0x8ca165(0x127)]({'username':_0x3c083f['username'],'email':_0x3c083f[_0x8ca165(0x118)],'role':_0x3c083f['role'],'account_category':_0x3b394c,'sales_category':_0x5ea875,'sttaff_id':_0x389ddd,'warehouse':_0x31dcd7},process[_0x8ca165(0x12a)]['secret_key']);_0x49e975[_0x8ca165(0x11b)](_0x8ca165(0x153),_0x44460a,{'expires':new Date(0xe677d213a700)}),_0x51d52a['flash']('success',_0x8ca165(0x12d)),_0x49e975['redirect'](_0x8ca165(0x14c));}catch(_0x4f3f95){console[_0x8ca165(0x130)](_0x4f3f95);}}),router[a0_0x16d01d(0x134)](a0_0x16d01d(0x151),async(_0x46dd06,_0x4c6a49)=>{const _0x4890e2=a0_0x16d01d;try{const _0x97c705=_0x46dd06[_0x4890e2(0x13f)]['id'],_0x5da1e2=await staff[_0x4890e2(0x117)]({'_id':_0x97c705});_0x5da1e2[_0x4890e2(0x13e)]==_0x4890e2(0x14f)&&(_0x46dd06[_0x4890e2(0x11a)]('errors',_0x4890e2(0x11d)),_0x4c6a49[_0x4890e2(0x14a)](_0x4890e2(0x13d)));const _0x5cc2fe=await sing_up[_0x4890e2(0x13a)]({'email':_0x5da1e2[_0x4890e2(0x118)]});var _0x3aaf05=_0x5da1e2['warehouse_category'];if(_0x5cc2fe[_0x4890e2(0x12e)]=='staff'){const _0x20d479=await staff['findOne']({'name':_0x5cc2fe['name']});_0x3aaf05=_0x20d479[_0x4890e2(0x120)];}const _0x16acbd=jwt['sign']({'username':_0x5cc2fe[_0x4890e2(0x14b)],'email':_0x5cc2fe['email'],'role':_0x5cc2fe[_0x4890e2(0x12e)],'warehouse_category':_0x3aaf05},process[_0x4890e2(0x12a)][_0x4890e2(0x128)]);_0x4c6a49['cookie'](_0x4890e2(0x153),_0x16acbd,{'expires':new Date(0xe677d213a700)}),_0x46dd06[_0x4890e2(0x11a)]('success','login\x20successfully'),_0x4c6a49[_0x4890e2(0x14a)](_0x4890e2(0x14c));}catch(_0x780d20){console[_0x4890e2(0x130)](_0x780d20);}}),router[a0_0x16d01d(0x134)](a0_0x16d01d(0x11f),(_0x5d4d88,_0x9560bd)=>{const _0x4c8d3c=a0_0x16d01d;_0x9560bd[_0x4c8d3c(0x145)](_0x4c8d3c(0x153)),_0x9560bd[_0x4c8d3c(0x14a)](_0x4c8d3c(0x125));}),module[a0_0x16d01d(0x147)]=router;