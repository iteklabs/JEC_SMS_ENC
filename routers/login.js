const a0_0x3f8916=a0_0x9a85;(function(_0xd26961,_0xec0bb1){const _0x3de06a=a0_0x9a85,_0x215c28=_0xd26961();while(!![]){try{const _0x509cdf=parseInt(_0x3de06a(0x213))/0x1+parseInt(_0x3de06a(0x1fe))/0x2+-parseInt(_0x3de06a(0x1f6))/0x3+parseInt(_0x3de06a(0x1f5))/0x4+parseInt(_0x3de06a(0x1ed))/0x5*(parseInt(_0x3de06a(0x1f7))/0x6)+-parseInt(_0x3de06a(0x1f2))/0x7*(parseInt(_0x3de06a(0x201))/0x8)+-parseInt(_0x3de06a(0x225))/0x9*(parseInt(_0x3de06a(0x1fd))/0xa);if(_0x509cdf===_0xec0bb1)break;else _0x215c28['push'](_0x215c28['shift']());}catch(_0x4e92c3){_0x215c28['push'](_0x215c28['shift']());}}}(a0_0x4358,0xd5471));const express=require(a0_0x3f8916(0x20e)),app=express(),router=express[a0_0x3f8916(0x1f1)](),{sing_up,staff,profile,master_shop}=require('../models/all_models'),bcrypt=require(a0_0x3f8916(0x215)),jwt=require('jsonwebtoken'),auth=require('../middleware/auth');function a0_0x9a85(_0x1a9221,_0x3ebd19){const _0x435885=a0_0x4358();return a0_0x9a85=function(_0x9a8500,_0x5c31fb){_0x9a8500=_0x9a8500-0x1ec;let _0x1422bb=_0x435885[_0x9a8500];return _0x1422bb;},a0_0x9a85(_0x1a9221,_0x3ebd19);}function a0_0x4358(){const _0x28411d=['express','post','your\x20password\x20is\x20wrong','render','_id','1309166TAffzO','secret_key','bcryptjs','email','env','warehouse','redirect','username','findOne','account_category','clearCookie','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','staff','cookie','login\x20successfully','sign','errors','/login','2355057FLiwNJ','get','warehouse_category','171455UrgGyF','find','exports','your\x20email\x20is\x20not\x20register','Router','10155999JLCmVr','/staff/:id','flash','6893624GkEPaM','71232QrhPIt','6PwYKcs','role','success','body','findById','name','30paOmji','132684SXppRn','Disabled','/validate','8xMNjGd','log','type_of_acc_cat','/logout','password','jwt','login\x20master','/staff/view','status','params','/index','login','validate'];a0_0x4358=function(){return _0x28411d;};return a0_0x4358();}router['get']('/',async(_0x103fde,_0x4acc51)=>{const _0x57859d=a0_0x3f8916;try{const _0x309161=await master_shop[_0x57859d(0x1ee)]();_0x4acc51[_0x57859d(0x211)]('login',{'success':_0x103fde[_0x57859d(0x1f4)](_0x57859d(0x1f9)),'errors':_0x103fde[_0x57859d(0x1f4)]('errors'),'master_shop':_0x309161});}catch(_0x4f9e7f){console[_0x57859d(0x202)](_0x4f9e7f);}}),router['get'](a0_0x3f8916(0x200),async(_0x123492,_0x29904c)=>{const _0x43a816=a0_0x3f8916;try{const _0x3219b9=await master_shop[_0x43a816(0x1ee)]();_0x29904c[_0x43a816(0x211)](_0x43a816(0x20d),{'success':_0x123492[_0x43a816(0x1f4)](_0x43a816(0x1f9)),'errors':_0x123492[_0x43a816(0x1f4)](_0x43a816(0x223)),'master_shop':_0x3219b9});}catch(_0x451329){console[_0x43a816(0x202)](_0x451329);}}),router[a0_0x3f8916(0x226)]('/login',async(_0x114aee,_0x400aaf)=>{const _0x31c569=a0_0x3f8916;try{const _0x4f171b=await master_shop['find']();console['log'](_0x31c569(0x207),_0x4f171b),_0x400aaf[_0x31c569(0x211)](_0x31c569(0x20c),{'success':_0x114aee[_0x31c569(0x1f4)]('success'),'errors':_0x114aee[_0x31c569(0x1f4)](_0x31c569(0x223)),'master_shop':_0x4f171b});}catch(_0x283cd8){console['log'](_0x283cd8);}}),router[a0_0x3f8916(0x20f)](a0_0x3f8916(0x224),async(_0x3c4682,_0x36e44c)=>{const _0x13827a=a0_0x3f8916;try{const _0x4815eb=_0x3c4682[_0x13827a(0x1fa)][_0x13827a(0x216)],_0x44d534=await sing_up[_0x13827a(0x21b)]({'email':_0x4815eb});if(!_0x44d534)return _0x3c4682['flash'](_0x13827a(0x223),_0x13827a(0x1f0)),_0x36e44c[_0x13827a(0x219)](_0x13827a(0x224));const _0x872ba=await staff[_0x13827a(0x21b)]({'email':_0x44d534[_0x13827a(0x216)]});var _0x55b0a1=_0x872ba[_0x13827a(0x21c)],_0x58342d=_0x872ba[_0x13827a(0x203)],_0x5244ca=_0x872ba[_0x13827a(0x212)],_0x9ffc00=_0x872ba[_0x13827a(0x218)];if(_0x44d534['role']==_0x13827a(0x21f)){const _0x168f8f=await staff[_0x13827a(0x21b)]({'email':_0x44d534[_0x13827a(0x216)]});if(_0x168f8f[_0x13827a(0x209)]==_0x13827a(0x1ff))return _0x3c4682['flash'](_0x13827a(0x223),_0x13827a(0x21e)),_0x36e44c[_0x13827a(0x219)](_0x13827a(0x224));_0x55b0a1=_0x168f8f[_0x13827a(0x21c)],_0x58342d=_0x168f8f['type_of_acc_cat'],_0x5244ca=_0x168f8f['_id'],_0x9ffc00=_0x168f8f[_0x13827a(0x218)];}const _0x24062a=_0x3c4682['body'][_0x13827a(0x205)],_0x3c583c=await bcrypt['compare'](_0x24062a,_0x44d534[_0x13827a(0x205)]);if(_0x3c583c==![])return _0x3c4682[_0x13827a(0x1f4)](_0x13827a(0x223),_0x13827a(0x210)),_0x36e44c['redirect'](_0x13827a(0x224));const _0x2490f5=jwt[_0x13827a(0x222)]({'username':_0x44d534[_0x13827a(0x21a)],'email':_0x44d534[_0x13827a(0x216)],'role':_0x44d534[_0x13827a(0x1f8)],'account_category':_0x55b0a1,'sales_category':_0x58342d,'sttaff_id':_0x5244ca,'warehouse':_0x9ffc00},process['env'][_0x13827a(0x214)]);_0x36e44c[_0x13827a(0x220)](_0x13827a(0x206),_0x2490f5,{'expires':new Date(0xe677d213a700)}),_0x3c4682[_0x13827a(0x1f4)](_0x13827a(0x1f9),_0x13827a(0x221)),_0x36e44c['redirect'](_0x13827a(0x20b));}catch(_0x569370){console[_0x13827a(0x202)](_0x569370);}}),router[a0_0x3f8916(0x226)](a0_0x3f8916(0x1f3),async(_0xe9aa1,_0x574383)=>{const _0x27554b=a0_0x3f8916;try{const _0x59fa5a=_0xe9aa1[_0x27554b(0x20a)]['id'],_0x5391e0=await staff[_0x27554b(0x1fb)]({'_id':_0x59fa5a});_0x5391e0[_0x27554b(0x209)]==_0x27554b(0x1ff)&&(_0xe9aa1[_0x27554b(0x1f4)](_0x27554b(0x223),_0x27554b(0x21e)),_0x574383[_0x27554b(0x219)](_0x27554b(0x208)));const _0x3b682e=await sing_up['findOne']({'email':_0x5391e0[_0x27554b(0x216)]});var _0xc4dc06=_0x5391e0[_0x27554b(0x1ec)];if(_0x3b682e[_0x27554b(0x1f8)]==_0x27554b(0x21f)){const _0x16ab05=await staff['findOne']({'name':_0x3b682e[_0x27554b(0x1fc)]});_0xc4dc06=_0x16ab05[_0x27554b(0x1ec)];}const _0x50500a=jwt[_0x27554b(0x222)]({'username':_0x3b682e[_0x27554b(0x21a)],'email':_0x3b682e[_0x27554b(0x216)],'role':_0x3b682e[_0x27554b(0x1f8)],'warehouse_category':_0xc4dc06},process[_0x27554b(0x217)][_0x27554b(0x214)]);_0x574383[_0x27554b(0x220)](_0x27554b(0x206),_0x50500a,{'expires':new Date(0xe677d213a700)}),_0xe9aa1[_0x27554b(0x1f4)](_0x27554b(0x1f9),_0x27554b(0x221)),_0x574383[_0x27554b(0x219)](_0x27554b(0x20b));}catch(_0x252904){console[_0x27554b(0x202)](_0x252904);}}),router['get'](a0_0x3f8916(0x204),(_0x1193e8,_0x39c4d0)=>{const _0x24d40f=a0_0x3f8916;_0x39c4d0[_0x24d40f(0x21d)](_0x24d40f(0x206)),_0x39c4d0[_0x24d40f(0x219)](_0x24d40f(0x224));}),module[a0_0x3f8916(0x1ef)]=router;