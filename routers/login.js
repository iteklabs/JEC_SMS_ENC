const a0_0x4a8c77=a0_0x15c6;function a0_0x15c6(_0x2b8011,_0x3e330c){const _0x57caab=a0_0x57ca();return a0_0x15c6=function(_0x15c63f,_0x1ee61a){_0x15c63f=_0x15c63f-0xae;let _0x17fdc8=_0x57caab[_0x15c63f];return _0x17fdc8;},a0_0x15c6(_0x2b8011,_0x3e330c);}(function(_0x102761,_0x52031e){const _0x534199=a0_0x15c6,_0x2eebad=_0x102761();while(!![]){try{const _0xd28626=parseInt(_0x534199(0xe0))/0x1*(-parseInt(_0x534199(0xd4))/0x2)+parseInt(_0x534199(0xb4))/0x3*(-parseInt(_0x534199(0xb1))/0x4)+parseInt(_0x534199(0xce))/0x5+parseInt(_0x534199(0xc5))/0x6*(-parseInt(_0x534199(0xc3))/0x7)+parseInt(_0x534199(0xbc))/0x8+-parseInt(_0x534199(0xc1))/0x9+parseInt(_0x534199(0xbb))/0xa;if(_0xd28626===_0x52031e)break;else _0x2eebad['push'](_0x2eebad['shift']());}catch(_0x21f3cd){_0x2eebad['push'](_0x2eebad['shift']());}}}(a0_0x57ca,0x48e45));function a0_0x57ca(){const _0x3c1274=['login\x20staff','type_of_acc_cat','../models/all_models','2188265oeGSFT','secret_key','success','account_category','status','cookie','2TCDTfx','exports','log','params','bcryptjs','username','jsonwebtoken','redirect','get','password','render','login','249468JyjKqD','errors','findById','validate','login\x20successfully','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','express','find','31156SPgJiG','/index','Disabled','219dDlULP','_id','/login','your\x20email\x20is\x20not\x20register','role','body','sign','5867420tMokpU','3662072BnOzyr','flash','findOne','/staff/:id','jwt','2554632CStjyX','env','14dhjXHo','post','245028ccdCsg','clearCookie','Router','login\x20master','warehouse','email'];a0_0x57ca=function(){return _0x3c1274;};return a0_0x57ca();}const express=require(a0_0x4a8c77(0xaf)),app=express(),router=express[a0_0x4a8c77(0xc7)](),{sing_up,staff,profile,master_shop}=require(a0_0x4a8c77(0xcd)),bcrypt=require(a0_0x4a8c77(0xd8)),jwt=require(a0_0x4a8c77(0xda)),auth=require('../middleware/auth');router[a0_0x4a8c77(0xdc)]('/',async(_0x22939b,_0x38b74e)=>{const _0x119431=a0_0x4a8c77;try{const _0x316f03=await master_shop[_0x119431(0xb0)]();_0x38b74e['render'](_0x119431(0xdf),{'success':_0x22939b[_0x119431(0xbd)](_0x119431(0xd0)),'errors':_0x22939b[_0x119431(0xbd)](_0x119431(0xe1)),'master_shop':_0x316f03});}catch(_0x5bc0e0){console['log'](_0x5bc0e0);}}),router[a0_0x4a8c77(0xdc)]('/validate',async(_0x324a70,_0x15dc59)=>{const _0x91b5e7=a0_0x4a8c77;try{const _0x1475d2=await master_shop['find']();_0x15dc59[_0x91b5e7(0xde)](_0x91b5e7(0xe3),{'success':_0x324a70[_0x91b5e7(0xbd)]('success'),'errors':_0x324a70['flash']('errors'),'master_shop':_0x1475d2});}catch(_0x15cbfe){console[_0x91b5e7(0xd6)](_0x15cbfe);}}),router['get'](a0_0x4a8c77(0xb6),async(_0x549ed9,_0x473e6d)=>{const _0x7e8d12=a0_0x4a8c77;try{const _0x592b46=await master_shop[_0x7e8d12(0xb0)]();console[_0x7e8d12(0xd6)](_0x7e8d12(0xc8),_0x592b46),_0x473e6d[_0x7e8d12(0xde)]('login',{'success':_0x549ed9[_0x7e8d12(0xbd)]('success'),'errors':_0x549ed9['flash'](_0x7e8d12(0xe1)),'master_shop':_0x592b46});}catch(_0x125711){console['log'](_0x125711);}}),router[a0_0x4a8c77(0xc4)]('/login',async(_0x3a697d,_0x1a3d3b)=>{const _0x2d7cab=a0_0x4a8c77;try{const _0x4a7715=_0x3a697d[_0x2d7cab(0xb9)][_0x2d7cab(0xca)],_0x5a971f=await sing_up['findOne']({'email':_0x4a7715});if(!_0x5a971f)return _0x3a697d[_0x2d7cab(0xbd)](_0x2d7cab(0xe1),_0x2d7cab(0xb7)),_0x1a3d3b[_0x2d7cab(0xdb)](_0x2d7cab(0xb6));const _0x404c18=await staff['findOne']({'email':_0x5a971f[_0x2d7cab(0xca)]});var _0x9eff8e=_0x404c18[_0x2d7cab(0xd1)],_0xb7e9c7=_0x404c18[_0x2d7cab(0xcc)],_0x4e53e9=_0x404c18['_id'],_0x4281e5=_0x404c18[_0x2d7cab(0xc9)];if(_0x5a971f['role']=='staff'){const _0x42a77b=await staff[_0x2d7cab(0xbe)]({'email':_0x5a971f['email']});if(_0x42a77b[_0x2d7cab(0xd2)]==_0x2d7cab(0xb3))return _0x3a697d['flash'](_0x2d7cab(0xe1),_0x2d7cab(0xae)),_0x1a3d3b[_0x2d7cab(0xdb)]('/login');_0x9eff8e=_0x42a77b[_0x2d7cab(0xd1)],_0xb7e9c7=_0x42a77b[_0x2d7cab(0xcc)],_0x4e53e9=_0x42a77b['_id'],_0x4281e5=_0x42a77b[_0x2d7cab(0xc9)];}const _0x5b3059=_0x3a697d[_0x2d7cab(0xb9)][_0x2d7cab(0xdd)],_0x3c5878=await bcrypt['compare'](_0x5b3059,_0x5a971f[_0x2d7cab(0xdd)]);if(_0x3c5878==![])return _0x3a697d[_0x2d7cab(0xbd)](_0x2d7cab(0xe1),'your\x20password\x20is\x20wrong'),_0x1a3d3b[_0x2d7cab(0xdb)](_0x2d7cab(0xb6));const _0x5488a2=jwt[_0x2d7cab(0xba)]({'username':_0x5a971f[_0x2d7cab(0xd9)],'email':_0x5a971f['email'],'role':_0x5a971f[_0x2d7cab(0xb8)],'account_category':_0x9eff8e,'sales_category':_0xb7e9c7,'sttaff_id':_0x4e53e9,'warehouse':_0x4281e5},process[_0x2d7cab(0xc2)][_0x2d7cab(0xcf)]);_0x1a3d3b[_0x2d7cab(0xd3)](_0x2d7cab(0xc0),_0x5488a2,{'expires':new Date(0xe677d213a700)}),_0x3a697d[_0x2d7cab(0xbd)](_0x2d7cab(0xd0),_0x2d7cab(0xe4)),_0x1a3d3b['redirect'](_0x2d7cab(0xb2));}catch(_0x4d2310){console[_0x2d7cab(0xd6)](_0x4d2310);}}),router[a0_0x4a8c77(0xdc)](a0_0x4a8c77(0xbf),async(_0x389be3,_0x10909e)=>{const _0x33224b=a0_0x4a8c77;try{const _0x285486=_0x389be3[_0x33224b(0xd7)]['id'],_0x7fcf98=await staff[_0x33224b(0xe2)]({'_id':_0x285486});console[_0x33224b(0xd6)](_0x33224b(0xcb),_0x7fcf98);const _0x3e8f47=await staff[_0x33224b(0xbe)]({'email':_0x7fcf98[_0x33224b(0xca)]}),_0x20f873=await sing_up[_0x33224b(0xbe)]({'email':_0x7fcf98['email']});var _0x48dace=_0x3e8f47[_0x33224b(0xd1)],_0x3bde87=_0x3e8f47[_0x33224b(0xcc)],_0x31c283=_0x3e8f47[_0x33224b(0xb5)],_0xeaeaf8=_0x3e8f47[_0x33224b(0xc9)];if(_0x20f873['role']=='staff'){const _0x4b416e=await staff['findOne']({'email':_0x20f873[_0x33224b(0xca)]});if(_0x4b416e['status']==_0x33224b(0xb3))return _0x389be3[_0x33224b(0xbd)](_0x33224b(0xe1),_0x33224b(0xae)),_0x10909e[_0x33224b(0xdb)]('/staff/view');_0x48dace=_0x4b416e['account_category'],_0x3bde87=_0x4b416e[_0x33224b(0xcc)],_0x31c283=_0x4b416e['_id'],_0xeaeaf8=_0x4b416e[_0x33224b(0xc9)];}const _0x24998c=jwt[_0x33224b(0xba)]({'username':_0x20f873[_0x33224b(0xd9)],'email':_0x20f873[_0x33224b(0xca)],'role':_0x20f873[_0x33224b(0xb8)],'account_category':_0x48dace,'sales_category':_0x3bde87,'sttaff_id':_0x31c283,'warehouse':_0xeaeaf8},process[_0x33224b(0xc2)][_0x33224b(0xcf)]);_0x10909e[_0x33224b(0xd3)](_0x33224b(0xc0),_0x24998c,{'expires':new Date(0xe677d213a700)}),_0x389be3['flash'](_0x33224b(0xd0),_0x33224b(0xe4)),_0x10909e[_0x33224b(0xdb)]('/index');}catch(_0x4655f9){console[_0x33224b(0xd6)](_0x4655f9);}}),router[a0_0x4a8c77(0xdc)]('/logout',(_0x2a6022,_0x35a873)=>{const _0x3c30be=a0_0x4a8c77;_0x35a873[_0x3c30be(0xc6)](_0x3c30be(0xc0)),_0x35a873[_0x3c30be(0xdb)]('/login');}),module[a0_0x4a8c77(0xd5)]=router;