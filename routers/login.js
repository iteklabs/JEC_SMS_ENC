function a0_0x145b(){const _0xcfc4a7=['findOne','type_of_acc_cat','validate','login','2tqMuGK','../middleware/auth','get','clearCookie','login\x20master','staff','cookie','175600RRWaSa','1878520cdplXD','username','/login','flash','find','redirect','success','jwt','333pDBzVh','login\x20successfully','470988ZKSeFa','secret_key','role','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','account_category','login\x20staff','9858wLSMil','exports','/staff/:id','_id','jsonwebtoken','Disabled','post','your\x20email\x20is\x20not\x20register','express','your\x20password\x20is\x20wrong','1067864CYCkvs','errors','warehouse','Router','status','findById','body','render','230977FwUUgU','sign','password','email','470ZpThGt','725784pNoTsr','/index','env','log'];a0_0x145b=function(){return _0xcfc4a7;};return a0_0x145b();}const a0_0x3b35f2=a0_0x345f;(function(_0x1d47d3,_0x15797b){const _0x426d4d=a0_0x345f,_0x2bfab3=_0x1d47d3();while(!![]){try{const _0x19e1d2=-parseInt(_0x426d4d(0x12c))/0x1*(-parseInt(_0x426d4d(0x139))/0x2)+parseInt(_0x426d4d(0x131))/0x3+parseInt(_0x426d4d(0x14b))/0x4+-parseInt(_0x426d4d(0x130))/0x5*(parseInt(_0x426d4d(0x11a))/0x6)+parseInt(_0x426d4d(0x141))/0x7+parseInt(_0x426d4d(0x124))/0x8+parseInt(_0x426d4d(0x149))/0x9*(-parseInt(_0x426d4d(0x140))/0xa);if(_0x19e1d2===_0x15797b)break;else _0x2bfab3['push'](_0x2bfab3['shift']());}catch(_0x4de31b){_0x2bfab3['push'](_0x2bfab3['shift']());}}}(a0_0x145b,0x2dfad));function a0_0x345f(_0x19f892,_0x5c912a){const _0x145b63=a0_0x145b();return a0_0x345f=function(_0x345fc8,_0x2d4ae6){_0x345fc8=_0x345fc8-0x118;let _0x6bb8bc=_0x145b63[_0x345fc8];return _0x6bb8bc;},a0_0x345f(_0x19f892,_0x5c912a);}const express=require(a0_0x3b35f2(0x122)),app=express(),router=express[a0_0x3b35f2(0x127)](),{sing_up,staff,profile,master_shop}=require('../models/all_models'),bcrypt=require('bcryptjs'),jwt=require(a0_0x3b35f2(0x11e)),auth=require(a0_0x3b35f2(0x13a));router[a0_0x3b35f2(0x13b)]('/',async(_0x171114,_0x5a9ee3)=>{const _0x572416=a0_0x3b35f2;try{const _0x1ea7ab=await master_shop[_0x572416(0x145)]();_0x5a9ee3[_0x572416(0x12b)](_0x572416(0x138),{'success':_0x171114[_0x572416(0x144)](_0x572416(0x147)),'errors':_0x171114['flash'](_0x572416(0x125)),'master_shop':_0x1ea7ab});}catch(_0x15295f){console['log'](_0x15295f);}}),router[a0_0x3b35f2(0x13b)]('/validate',async(_0x3e11fd,_0x5cfb0b)=>{const _0xd738a8=a0_0x3b35f2;try{const _0x430536=await master_shop[_0xd738a8(0x145)]();_0x5cfb0b[_0xd738a8(0x12b)](_0xd738a8(0x137),{'success':_0x3e11fd[_0xd738a8(0x144)](_0xd738a8(0x147)),'errors':_0x3e11fd['flash'](_0xd738a8(0x125)),'master_shop':_0x430536});}catch(_0x5b6428){console[_0xd738a8(0x134)](_0x5b6428);}}),router[a0_0x3b35f2(0x13b)](a0_0x3b35f2(0x143),async(_0x407c1d,_0x54238d)=>{const _0x4a5419=a0_0x3b35f2;try{const _0x40c4a8=await master_shop[_0x4a5419(0x145)]();console[_0x4a5419(0x134)](_0x4a5419(0x13d),_0x40c4a8),_0x54238d['render']('login',{'success':_0x407c1d[_0x4a5419(0x144)](_0x4a5419(0x147)),'errors':_0x407c1d[_0x4a5419(0x144)](_0x4a5419(0x125)),'master_shop':_0x40c4a8});}catch(_0x4bad32){console[_0x4a5419(0x134)](_0x4bad32);}}),router[a0_0x3b35f2(0x120)](a0_0x3b35f2(0x143),async(_0x335586,_0xf98418)=>{const _0x6937cf=a0_0x3b35f2;try{const _0x5c3356=_0x335586[_0x6937cf(0x12a)]['email'],_0x2e7286=await sing_up[_0x6937cf(0x135)]({'email':_0x5c3356});if(!_0x2e7286)return _0x335586[_0x6937cf(0x144)]('errors',_0x6937cf(0x121)),_0xf98418[_0x6937cf(0x146)](_0x6937cf(0x143));const _0x54add3=await staff['findOne']({'email':_0x2e7286[_0x6937cf(0x12f)]});var _0x595990=_0x54add3['account_category'],_0x43ec92=_0x54add3[_0x6937cf(0x136)],_0x124015=_0x54add3[_0x6937cf(0x11d)],_0x24aae6=_0x54add3[_0x6937cf(0x126)];if(_0x2e7286['role']==_0x6937cf(0x13e)){const _0x8ee87d=await staff['findOne']({'email':_0x2e7286[_0x6937cf(0x12f)]});if(_0x8ee87d[_0x6937cf(0x128)]==_0x6937cf(0x11f))return _0x335586[_0x6937cf(0x144)](_0x6937cf(0x125),_0x6937cf(0x14e)),_0xf98418[_0x6937cf(0x146)](_0x6937cf(0x143));_0x595990=_0x8ee87d[_0x6937cf(0x118)],_0x43ec92=_0x8ee87d[_0x6937cf(0x136)],_0x124015=_0x8ee87d['_id'],_0x24aae6=_0x8ee87d[_0x6937cf(0x126)];}const _0x2ed1d8=_0x335586[_0x6937cf(0x12a)][_0x6937cf(0x12e)],_0x21a0e5=await bcrypt['compare'](_0x2ed1d8,_0x2e7286[_0x6937cf(0x12e)]);if(_0x21a0e5==![])return _0x335586['flash'](_0x6937cf(0x125),_0x6937cf(0x123)),_0xf98418[_0x6937cf(0x146)](_0x6937cf(0x143));const _0xea5cbe=jwt[_0x6937cf(0x12d)]({'username':_0x2e7286[_0x6937cf(0x142)],'email':_0x2e7286[_0x6937cf(0x12f)],'role':_0x2e7286[_0x6937cf(0x14d)],'account_category':_0x595990,'sales_category':_0x43ec92,'sttaff_id':_0x124015,'warehouse':_0x24aae6},process[_0x6937cf(0x133)]['secret_key']);_0xf98418[_0x6937cf(0x13f)](_0x6937cf(0x148),_0xea5cbe,{'expires':new Date(0xe677d213a700)}),_0x335586[_0x6937cf(0x144)](_0x6937cf(0x147),'login\x20successfully'),_0xf98418[_0x6937cf(0x146)](_0x6937cf(0x132));}catch(_0x40c250){console[_0x6937cf(0x134)](_0x40c250);}}),router[a0_0x3b35f2(0x13b)](a0_0x3b35f2(0x11c),async(_0xb0a3bc,_0x26f458)=>{const _0x19feab=a0_0x3b35f2;try{const _0x28d1c5=_0xb0a3bc['params']['id'],_0x3c84c1=await staff[_0x19feab(0x129)]({'_id':_0x28d1c5});console['log'](_0x19feab(0x119),_0x3c84c1);const _0x894793=await staff['findOne']({'email':_0x3c84c1[_0x19feab(0x12f)]}),_0x330444=await sing_up[_0x19feab(0x135)]({'email':_0x3c84c1[_0x19feab(0x12f)]});var _0x414de2=_0x894793[_0x19feab(0x118)],_0xe187e0=_0x894793['type_of_acc_cat'],_0x1c8625=_0x894793['_id'],_0x2e3aa4=_0x894793[_0x19feab(0x126)];if(_0x330444['role']=='staff'){const _0x3d88a6=await staff['findOne']({'email':_0x330444[_0x19feab(0x12f)]});if(_0x3d88a6[_0x19feab(0x128)]==_0x19feab(0x11f))return _0xb0a3bc[_0x19feab(0x144)](_0x19feab(0x125),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x26f458['redirect']('/staff/view');_0x414de2=_0x3d88a6[_0x19feab(0x118)],_0xe187e0=_0x3d88a6['type_of_acc_cat'],_0x1c8625=_0x3d88a6[_0x19feab(0x11d)],_0x2e3aa4=_0x3d88a6[_0x19feab(0x126)];}const _0xa56108=jwt[_0x19feab(0x12d)]({'username':_0x330444[_0x19feab(0x142)],'email':_0x330444[_0x19feab(0x12f)],'role':_0x330444['role'],'account_category':_0x414de2,'sales_category':_0xe187e0,'sttaff_id':_0x1c8625,'warehouse':_0x2e3aa4},process['env'][_0x19feab(0x14c)]);_0x26f458['cookie'](_0x19feab(0x148),_0xa56108,{'expires':new Date(0xe677d213a700)}),_0xb0a3bc[_0x19feab(0x144)]('success',_0x19feab(0x14a)),_0x26f458[_0x19feab(0x146)]('/index');}catch(_0x5b10e2){console['log'](_0x5b10e2);}}),router['get']('/logout',(_0x16e927,_0x5271f8)=>{const _0x4d9c20=a0_0x3b35f2;_0x5271f8[_0x4d9c20(0x13c)](_0x4d9c20(0x148)),_0x5271f8['redirect'](_0x4d9c20(0x143));}),module[a0_0x3b35f2(0x11b)]=router;