const a0_0x400afb=a0_0xe798;function a0_0xe798(_0x474f01,_0x41973d){const _0x240dcc=a0_0x240d();return a0_0xe798=function(_0xe79893,_0x41e24c){_0xe79893=_0xe79893-0x6c;let _0x52ea40=_0x240dcc[_0xe79893];return _0x52ea40;},a0_0xe798(_0x474f01,_0x41973d);}function a0_0x240d(){const _0x668eaf=['login','413nOdreq','_id','email','findById','password','661926XEqCwt','env','120573fDkNkF','render','flash','status','jwt','type_of_acc_cat','2412384KvoPsN','164196xIaugW','login\x20staff','redirect','findOne','bcryptjs','log','/staff/:id','/staff/view','/login','321290cOjorx','secret_key','get','errors','37956wOjysZ','820854dMIczZ','account_category','express','20OvVqNW','find','login\x20master','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','cookie','your\x20password\x20is\x20wrong','jsonwebtoken','validate','Disabled','success','compare','clearCookie','/index','staff','8sARLEk','Router','../middleware/auth','/validate','role','../models/all_models','body'];a0_0x240d=function(){return _0x668eaf;};return a0_0x240d();}(function(_0x3e7521,_0x475b87){const _0x2e3618=a0_0xe798,_0x44f634=_0x3e7521();while(!![]){try{const _0x4069d7=parseInt(_0x2e3618(0x7f))/0x1+-parseInt(_0x2e3618(0x96))/0x2+-parseInt(_0x2e3618(0x81))/0x3*(-parseInt(_0x2e3618(0x72))/0x4)+-parseInt(_0x2e3618(0x91))/0x5+parseInt(_0x2e3618(0x95))/0x6*(parseInt(_0x2e3618(0x7a))/0x7)+-parseInt(_0x2e3618(0x87))/0x8+-parseInt(_0x2e3618(0x88))/0x9*(-parseInt(_0x2e3618(0x99))/0xa);if(_0x4069d7===_0x475b87)break;else _0x44f634['push'](_0x44f634['shift']());}catch(_0x48443d){_0x44f634['push'](_0x44f634['shift']());}}}(a0_0x240d,0x5bbf5));const express=require(a0_0x400afb(0x98)),app=express(),router=express[a0_0x400afb(0x73)](),{sing_up,staff,profile,master_shop}=require(a0_0x400afb(0x77)),bcrypt=require(a0_0x400afb(0x8c)),jwt=require(a0_0x400afb(0x9f)),auth=require(a0_0x400afb(0x74));router[a0_0x400afb(0x93)]('/',async(_0x345b96,_0x163871)=>{const _0x5209be=a0_0x400afb;try{const _0x37f6e6=await master_shop[_0x5209be(0x9a)]();_0x163871[_0x5209be(0x82)](_0x5209be(0x79),{'success':_0x345b96['flash']('success'),'errors':_0x345b96[_0x5209be(0x83)](_0x5209be(0x94)),'master_shop':_0x37f6e6});}catch(_0x56693a){console[_0x5209be(0x8d)](_0x56693a);}}),router['get'](a0_0x400afb(0x75),async(_0x536c26,_0x5ddf45)=>{const _0x4f3c85=a0_0x400afb;try{const _0x4ea4b1=await master_shop[_0x4f3c85(0x9a)]();_0x5ddf45[_0x4f3c85(0x82)](_0x4f3c85(0xa0),{'success':_0x536c26['flash'](_0x4f3c85(0x6d)),'errors':_0x536c26[_0x4f3c85(0x83)]('errors'),'master_shop':_0x4ea4b1});}catch(_0x3f7e2b){console[_0x4f3c85(0x8d)](_0x3f7e2b);}}),router[a0_0x400afb(0x93)](a0_0x400afb(0x90),async(_0x21a99b,_0x3569f5)=>{const _0x3f823d=a0_0x400afb;try{const _0x7e8889=await master_shop['find']();console[_0x3f823d(0x8d)](_0x3f823d(0x9b),_0x7e8889),_0x3569f5['render'](_0x3f823d(0x79),{'success':_0x21a99b['flash'](_0x3f823d(0x6d)),'errors':_0x21a99b['flash'](_0x3f823d(0x94)),'master_shop':_0x7e8889});}catch(_0x698c61){console[_0x3f823d(0x8d)](_0x698c61);}}),router['post'](a0_0x400afb(0x90),async(_0x2d6ec9,_0x3f3cc6)=>{const _0x363c81=a0_0x400afb;try{const _0x43900d=_0x2d6ec9[_0x363c81(0x78)][_0x363c81(0x7c)],_0x30fe5b=await sing_up[_0x363c81(0x8b)]({'email':_0x43900d});if(!_0x30fe5b)return _0x2d6ec9[_0x363c81(0x83)]('errors','your\x20email\x20is\x20not\x20register'),_0x3f3cc6[_0x363c81(0x8a)](_0x363c81(0x90));const _0x45f776=await staff[_0x363c81(0x8b)]({'email':_0x30fe5b[_0x363c81(0x7c)]});var _0x47fe88=_0x45f776[_0x363c81(0x97)],_0x38fae1=_0x45f776[_0x363c81(0x86)],_0x162223=_0x45f776[_0x363c81(0x7b)],_0x2462c4=_0x45f776['warehouse'];if(_0x30fe5b[_0x363c81(0x76)]=='staff'){const _0x48015c=await staff[_0x363c81(0x8b)]({'email':_0x30fe5b[_0x363c81(0x7c)]});if(_0x48015c[_0x363c81(0x84)]==_0x363c81(0x6c))return _0x2d6ec9[_0x363c81(0x83)](_0x363c81(0x94),_0x363c81(0x9c)),_0x3f3cc6[_0x363c81(0x8a)](_0x363c81(0x90));_0x47fe88=_0x48015c[_0x363c81(0x97)],_0x38fae1=_0x48015c[_0x363c81(0x86)],_0x162223=_0x48015c['_id'],_0x2462c4=_0x48015c['warehouse'];}const _0x3f8032=_0x2d6ec9[_0x363c81(0x78)][_0x363c81(0x7e)],_0x1686f2=await bcrypt[_0x363c81(0x6e)](_0x3f8032,_0x30fe5b['password']);if(_0x1686f2==![])return _0x2d6ec9[_0x363c81(0x83)](_0x363c81(0x94),_0x363c81(0x9e)),_0x3f3cc6[_0x363c81(0x8a)](_0x363c81(0x90));const _0x5e452f=jwt['sign']({'username':_0x30fe5b['username'],'email':_0x30fe5b[_0x363c81(0x7c)],'role':_0x30fe5b[_0x363c81(0x76)],'account_category':_0x47fe88,'sales_category':_0x38fae1,'sttaff_id':_0x162223,'warehouse':_0x2462c4},process[_0x363c81(0x80)][_0x363c81(0x92)]);_0x3f3cc6[_0x363c81(0x9d)](_0x363c81(0x85),_0x5e452f,{'expires':new Date(0xe677d213a700)}),_0x2d6ec9[_0x363c81(0x83)](_0x363c81(0x6d),'login\x20successfully'),_0x3f3cc6[_0x363c81(0x8a)](_0x363c81(0x70));}catch(_0x47dfde){console['log'](_0x47dfde);}}),router[a0_0x400afb(0x93)](a0_0x400afb(0x8e),async(_0x1f60f9,_0x3355e9)=>{const _0x581117=a0_0x400afb;try{const _0x359251=_0x1f60f9['params']['id'],_0x456e69=await staff[_0x581117(0x7d)]({'_id':_0x359251});console[_0x581117(0x8d)](_0x581117(0x89),_0x456e69);const _0x5d6191=await staff[_0x581117(0x8b)]({'email':_0x456e69[_0x581117(0x7c)]}),_0x5be5ac=await sing_up[_0x581117(0x8b)]({'email':_0x456e69[_0x581117(0x7c)]});var _0x3870d1=_0x5d6191[_0x581117(0x97)],_0x4865e4=_0x5d6191['type_of_acc_cat'],_0x14497c=_0x5d6191['_id'],_0x134eac=_0x5d6191['warehouse'];if(_0x5be5ac[_0x581117(0x76)]==_0x581117(0x71)){const _0x42e92d=await staff[_0x581117(0x8b)]({'email':_0x5be5ac[_0x581117(0x7c)]});if(_0x42e92d[_0x581117(0x84)]=='Disabled')return _0x1f60f9['flash'](_0x581117(0x94),_0x581117(0x9c)),_0x3355e9[_0x581117(0x8a)](_0x581117(0x8f));_0x3870d1=_0x42e92d[_0x581117(0x97)],_0x4865e4=_0x42e92d[_0x581117(0x86)],_0x14497c=_0x42e92d[_0x581117(0x7b)],_0x134eac=_0x42e92d['warehouse'];}const _0x42998f=jwt['sign']({'username':_0x5be5ac['username'],'email':_0x5be5ac['email'],'role':_0x5be5ac['role'],'account_category':_0x3870d1,'sales_category':_0x4865e4,'sttaff_id':_0x14497c,'warehouse':_0x134eac},process[_0x581117(0x80)][_0x581117(0x92)]);_0x3355e9[_0x581117(0x9d)](_0x581117(0x85),_0x42998f,{'expires':new Date(0xe677d213a700)}),_0x1f60f9['flash'](_0x581117(0x6d),'login\x20successfully'),_0x3355e9[_0x581117(0x8a)]('/index');}catch(_0x1aa357){console[_0x581117(0x8d)](_0x1aa357);}}),router[a0_0x400afb(0x93)]('/logout',(_0x45bfbf,_0x2502ee)=>{const _0x4e4036=a0_0x400afb;_0x2502ee[_0x4e4036(0x6f)](_0x4e4036(0x85)),_0x2502ee['redirect'](_0x4e4036(0x90));}),module['exports']=router;