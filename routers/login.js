const a0_0x18efdb=a0_0x259f;(function(_0x5ea7ff,_0x18f04f){const _0x481b16=a0_0x259f,_0x2197d3=_0x5ea7ff();while(!![]){try{const _0x5ce2b5=-parseInt(_0x481b16(0x9a))/0x1*(-parseInt(_0x481b16(0xad))/0x2)+-parseInt(_0x481b16(0x8a))/0x3*(-parseInt(_0x481b16(0x86))/0x4)+parseInt(_0x481b16(0xaf))/0x5*(-parseInt(_0x481b16(0xb0))/0x6)+parseInt(_0x481b16(0x95))/0x7+-parseInt(_0x481b16(0x83))/0x8+parseInt(_0x481b16(0x9c))/0x9+-parseInt(_0x481b16(0xa8))/0xa;if(_0x5ce2b5===_0x18f04f)break;else _0x2197d3['push'](_0x2197d3['shift']());}catch(_0x4e773d){_0x2197d3['push'](_0x2197d3['shift']());}}}(a0_0x1c0f,0xf2fd6));const express=require(a0_0x18efdb(0xa5)),app=express(),router=express[a0_0x18efdb(0x9f)](),{sing_up,staff,profile,master_shop}=require(a0_0x18efdb(0x99)),bcrypt=require(a0_0x18efdb(0xaa)),jwt=require(a0_0x18efdb(0x93)),auth=require(a0_0x18efdb(0x96));function a0_0x259f(_0x340c16,_0x5dcc3f){const _0x1c0f3a=a0_0x1c0f();return a0_0x259f=function(_0x259f49,_0x5c69d1){_0x259f49=_0x259f49-0x81;let _0x17a892=_0x1c0f3a[_0x259f49];return _0x17a892;},a0_0x259f(_0x340c16,_0x5dcc3f);}router[a0_0x18efdb(0xac)]('/',async(_0x1bdb7e,_0x4f6fcb)=>{const _0x46b749=a0_0x18efdb;try{const _0x26951f=await master_shop['find']();_0x4f6fcb['render'](_0x46b749(0x97),{'success':_0x1bdb7e[_0x46b749(0xb3)](_0x46b749(0xb1)),'errors':_0x1bdb7e[_0x46b749(0xb3)]('errors'),'master_shop':_0x26951f});}catch(_0x4a06a5){console[_0x46b749(0xb6)](_0x4a06a5);}}),router[a0_0x18efdb(0xac)](a0_0x18efdb(0xa6),async(_0x472348,_0x4859c0)=>{const _0x8210e3=a0_0x18efdb;try{const _0x555160=await master_shop[_0x8210e3(0x91)]();_0x4859c0[_0x8210e3(0xb8)](_0x8210e3(0x82),{'success':_0x472348['flash'](_0x8210e3(0xb1)),'errors':_0x472348[_0x8210e3(0xb3)](_0x8210e3(0xa0)),'master_shop':_0x555160});}catch(_0x1d977f){console[_0x8210e3(0xb6)](_0x1d977f);}}),router['get']('/login',async(_0x3ee9bd,_0x570746)=>{const _0x5825bc=a0_0x18efdb;try{const _0xd02af0=await master_shop[_0x5825bc(0x91)]();console[_0x5825bc(0xb6)]('login\x20master',_0xd02af0),_0x570746[_0x5825bc(0xb8)](_0x5825bc(0x97),{'success':_0x3ee9bd[_0x5825bc(0xb3)](_0x5825bc(0xb1)),'errors':_0x3ee9bd[_0x5825bc(0xb3)](_0x5825bc(0xa0)),'master_shop':_0xd02af0});}catch(_0x34cfbb){console[_0x5825bc(0xb6)](_0x34cfbb);}}),router['post'](a0_0x18efdb(0x90),async(_0x7fb9a6,_0x146bd7)=>{const _0x28b323=a0_0x18efdb;try{const _0x1af7db=_0x7fb9a6[_0x28b323(0xa3)][_0x28b323(0x8e)],_0x30c6c9=await sing_up['findOne']({'email':_0x1af7db});if(!_0x30c6c9)return _0x7fb9a6[_0x28b323(0xb3)]('errors',_0x28b323(0x85)),_0x146bd7['redirect'](_0x28b323(0x90));const _0x10a39d=await staff[_0x28b323(0xa4)]({'email':_0x30c6c9[_0x28b323(0x8e)]});var _0x3dc249=_0x10a39d[_0x28b323(0xb4)],_0x3eb5a6=_0x10a39d[_0x28b323(0xb9)],_0x37ad8d=_0x10a39d['_id'],_0xf979c6=_0x10a39d[_0x28b323(0x9e)];if(_0x30c6c9[_0x28b323(0x98)]==_0x28b323(0x8b)){const _0x358f5d=await staff['findOne']({'email':_0x30c6c9[_0x28b323(0x8e)]});if(_0x358f5d[_0x28b323(0x92)]==_0x28b323(0x8f))return _0x7fb9a6[_0x28b323(0xb3)](_0x28b323(0xa0),_0x28b323(0xae)),_0x146bd7['redirect'](_0x28b323(0x90));_0x3dc249=_0x358f5d['account_category'],_0x3eb5a6=_0x358f5d[_0x28b323(0xb9)],_0x37ad8d=_0x358f5d[_0x28b323(0x84)],_0xf979c6=_0x358f5d[_0x28b323(0x9e)];}const _0x428b27=_0x7fb9a6['body'][_0x28b323(0x94)],_0x5ac8db=await bcrypt[_0x28b323(0xa9)](_0x428b27,_0x30c6c9['password']);if(_0x5ac8db==![])return _0x7fb9a6[_0x28b323(0xb3)](_0x28b323(0xa0),_0x28b323(0xa7)),_0x146bd7[_0x28b323(0x88)](_0x28b323(0x90));const _0x8a24e4=jwt['sign']({'username':_0x30c6c9['username'],'email':_0x30c6c9['email'],'role':_0x30c6c9[_0x28b323(0x98)],'account_category':_0x3dc249,'sales_category':_0x3eb5a6,'sttaff_id':_0x37ad8d,'warehouse':_0xf979c6},process[_0x28b323(0xa1)][_0x28b323(0x89)]);_0x146bd7[_0x28b323(0xb5)](_0x28b323(0xb7),_0x8a24e4,{'expires':new Date(0xe677d213a700)}),_0x7fb9a6['flash'](_0x28b323(0xb1),_0x28b323(0x9b)),_0x146bd7[_0x28b323(0x88)](_0x28b323(0x87));}catch(_0x3dfc42){console['log'](_0x3dfc42);}}),router[a0_0x18efdb(0xac)]('/staff/:id',async(_0x5446da,_0x40df34)=>{const _0x8ed43f=a0_0x18efdb;try{const _0x253a5f=_0x5446da[_0x8ed43f(0x8d)]['id'],_0x1db6d3=await staff[_0x8ed43f(0xb2)]({'_id':_0x253a5f});console['log'](_0x8ed43f(0x81),_0x1db6d3);const _0x1cbf5f=await staff[_0x8ed43f(0xa4)]({'email':_0x1db6d3['email']}),_0x500a30=await sing_up['findOne']({'email':_0x1db6d3[_0x8ed43f(0x8e)]});var _0x706930=_0x1cbf5f['account_category'],_0x399493=_0x1cbf5f['type_of_acc_cat'],_0x5f3e02=_0x1cbf5f['_id'],_0x5d3d8b=_0x1cbf5f['warehouse'];if(_0x500a30[_0x8ed43f(0x98)]==_0x8ed43f(0x8b)){const _0x2a1683=await staff['findOne']({'email':_0x500a30[_0x8ed43f(0x8e)]});if(_0x2a1683[_0x8ed43f(0x92)]=='Disabled')return _0x5446da[_0x8ed43f(0xb3)]('errors',_0x8ed43f(0xae)),_0x40df34[_0x8ed43f(0x88)]('/staff/view');_0x706930=_0x2a1683[_0x8ed43f(0xb4)],_0x399493=_0x2a1683['type_of_acc_cat'],_0x5f3e02=_0x2a1683[_0x8ed43f(0x84)],_0x5d3d8b=_0x2a1683[_0x8ed43f(0x9e)];}const _0x2b97fc=jwt[_0x8ed43f(0xa2)]({'username':_0x500a30[_0x8ed43f(0x8c)],'email':_0x500a30[_0x8ed43f(0x8e)],'role':_0x500a30[_0x8ed43f(0x98)],'account_category':_0x706930,'sales_category':_0x399493,'sttaff_id':_0x5f3e02,'warehouse':_0x5d3d8b},process[_0x8ed43f(0xa1)][_0x8ed43f(0x89)]);_0x40df34['cookie'](_0x8ed43f(0xb7),_0x2b97fc,{'expires':new Date(0xe677d213a700)}),_0x5446da[_0x8ed43f(0xb3)](_0x8ed43f(0xb1),_0x8ed43f(0x9b)),_0x40df34[_0x8ed43f(0x88)](_0x8ed43f(0x87));}catch(_0x1d99f3){console[_0x8ed43f(0xb6)](_0x1d99f3);}}),router['get'](a0_0x18efdb(0xab),(_0x2d942d,_0x518b24)=>{const _0x375b36=a0_0x18efdb;_0x518b24[_0x375b36(0x9d)](_0x375b36(0xb7)),_0x518b24[_0x375b36(0x88)](_0x375b36(0x90));}),module['exports']=router;function a0_0x1c0f(){const _0x4abd7d=['secret_key','3UYnhRW','staff','username','params','email','Disabled','/login','find','status','jsonwebtoken','password','12827682dAtCUG','../middleware/auth','login','role','../models/all_models','2502ssTOGr','login\x20successfully','9690759ZHhOsh','clearCookie','warehouse','Router','errors','env','sign','body','findOne','express','/validate','your\x20password\x20is\x20wrong','27189640PYkFdw','compare','bcryptjs','/logout','get','1086gmSiuD','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','28665SkNglP','252NHpkRz','success','findById','flash','account_category','cookie','log','jwt','render','type_of_acc_cat','login\x20staff','validate','13735296fnhpGA','_id','your\x20email\x20is\x20not\x20register','5616340UiDRkz','/index','redirect'];a0_0x1c0f=function(){return _0x4abd7d;};return a0_0x1c0f();}