const a0_0x1d396d=a0_0x2f0d;(function(_0x4d8d3b,_0x5a016a){const _0x58f38c=a0_0x2f0d,_0x418a1f=_0x4d8d3b();while(!![]){try{const _0x3028d3=-parseInt(_0x58f38c(0x1a3))/0x1*(-parseInt(_0x58f38c(0x183))/0x2)+parseInt(_0x58f38c(0x1ab))/0x3*(parseInt(_0x58f38c(0x197))/0x4)+parseInt(_0x58f38c(0x190))/0x5*(parseInt(_0x58f38c(0x1ac))/0x6)+-parseInt(_0x58f38c(0x192))/0x7*(parseInt(_0x58f38c(0x191))/0x8)+-parseInt(_0x58f38c(0x198))/0x9+parseInt(_0x58f38c(0x19f))/0xa+parseInt(_0x58f38c(0x195))/0xb*(-parseInt(_0x58f38c(0x184))/0xc);if(_0x3028d3===_0x5a016a)break;else _0x418a1f['push'](_0x418a1f['shift']());}catch(_0xf2ac0d){_0x418a1f['push'](_0x418a1f['shift']());}}}(a0_0x16c8,0x30457));function a0_0x16c8(){const _0x4ee160=['../middleware/auth','4SdlGoe','1404ycakKb','sign','compare','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','login','jwt','flash','your\x20password\x20is\x20wrong','/validate','/logout','clearCookie','cookie','25kDEkLc','67576HzqjVS','63IxpvhQ','env','password','52459NAsppd','/login','1427740ViuIfr','747063qTAGsI','bcryptjs','redirect','exports','secret_key','warehouse','login\x20successfully','3568540kMafbH','express','body','errors','100409WEPWUv','staff','find','username','log','Router','type_of_acc_cat','_id','3sJJjlb','138UyCuEH','../models/all_models','account_category','get','render','Disabled','validate','role','login\x20staff','success','jsonwebtoken','post','findOne','email'];a0_0x16c8=function(){return _0x4ee160;};return a0_0x16c8();}function a0_0x2f0d(_0x5b37ca,_0x14c2e0){const _0x16c8d1=a0_0x16c8();return a0_0x2f0d=function(_0x2f0d06,_0x5333ee){_0x2f0d06=_0x2f0d06-0x176;let _0x57e85e=_0x16c8d1[_0x2f0d06];return _0x57e85e;},a0_0x2f0d(_0x5b37ca,_0x14c2e0);}const express=require(a0_0x1d396d(0x1a0)),app=express(),router=express[a0_0x1d396d(0x1a8)](),{sing_up,staff,profile,master_shop}=require(a0_0x1d396d(0x1ad)),bcrypt=require(a0_0x1d396d(0x199)),jwt=require(a0_0x1d396d(0x17e)),auth=require(a0_0x1d396d(0x182));router[a0_0x1d396d(0x177)]('/',async(_0x3c736b,_0x288501)=>{const _0x57a942=a0_0x1d396d;try{const _0x2cbef2=await master_shop[_0x57a942(0x1a5)]();_0x288501[_0x57a942(0x178)](_0x57a942(0x188),{'success':_0x3c736b[_0x57a942(0x18a)](_0x57a942(0x17d)),'errors':_0x3c736b[_0x57a942(0x18a)](_0x57a942(0x1a2)),'master_shop':_0x2cbef2});}catch(_0x39ab0e){console['log'](_0x39ab0e);}}),router[a0_0x1d396d(0x177)](a0_0x1d396d(0x18c),async(_0x26a295,_0xeec2a9)=>{const _0x250291=a0_0x1d396d;try{const _0x435285=await master_shop[_0x250291(0x1a5)]();_0xeec2a9[_0x250291(0x178)](_0x250291(0x17a),{'success':_0x26a295[_0x250291(0x18a)](_0x250291(0x17d)),'errors':_0x26a295[_0x250291(0x18a)](_0x250291(0x1a2)),'master_shop':_0x435285});}catch(_0x4b807a){console['log'](_0x4b807a);}}),router[a0_0x1d396d(0x177)]('/login',async(_0x108048,_0x574443)=>{const _0x415913=a0_0x1d396d;try{const _0x118721=await master_shop[_0x415913(0x1a5)]();console['log']('login\x20master',_0x118721),_0x574443[_0x415913(0x178)](_0x415913(0x188),{'success':_0x108048[_0x415913(0x18a)](_0x415913(0x17d)),'errors':_0x108048[_0x415913(0x18a)](_0x415913(0x1a2)),'master_shop':_0x118721});}catch(_0x20955a){console[_0x415913(0x1a7)](_0x20955a);}}),router[a0_0x1d396d(0x17f)](a0_0x1d396d(0x196),async(_0x320802,_0x1c84aa)=>{const _0x336584=a0_0x1d396d;try{const _0x53fb0b=_0x320802[_0x336584(0x1a1)]['email'],_0x3e00c4=await sing_up[_0x336584(0x180)]({'email':_0x53fb0b});if(!_0x3e00c4)return _0x320802[_0x336584(0x18a)](_0x336584(0x1a2),'your\x20email\x20is\x20not\x20register'),_0x1c84aa[_0x336584(0x19a)](_0x336584(0x196));const _0x390b8a=await staff[_0x336584(0x180)]({'email':_0x3e00c4['email']});var _0x229af8=_0x390b8a[_0x336584(0x176)],_0x43deb8=_0x390b8a[_0x336584(0x1a9)],_0x16e136=_0x390b8a[_0x336584(0x1aa)],_0x45cccf=_0x390b8a[_0x336584(0x19d)];if(_0x3e00c4[_0x336584(0x17b)]==_0x336584(0x1a4)){const _0x1a7b14=await staff['findOne']({'email':_0x3e00c4[_0x336584(0x181)]});if(_0x1a7b14['status']==_0x336584(0x179))return _0x320802[_0x336584(0x18a)]('errors','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x1c84aa[_0x336584(0x19a)](_0x336584(0x196));_0x229af8=_0x1a7b14[_0x336584(0x176)],_0x43deb8=_0x1a7b14['type_of_acc_cat'],_0x16e136=_0x1a7b14[_0x336584(0x1aa)],_0x45cccf=_0x1a7b14['warehouse'];}const _0x86f8d5=_0x320802[_0x336584(0x1a1)][_0x336584(0x194)],_0x15f9e1=await bcrypt[_0x336584(0x186)](_0x86f8d5,_0x3e00c4[_0x336584(0x194)]);if(_0x15f9e1==![])return _0x320802[_0x336584(0x18a)](_0x336584(0x1a2),_0x336584(0x18b)),_0x1c84aa[_0x336584(0x19a)](_0x336584(0x196));const _0x4373e6=jwt[_0x336584(0x185)]({'username':_0x3e00c4[_0x336584(0x1a6)],'email':_0x3e00c4['email'],'role':_0x3e00c4['role'],'account_category':_0x229af8,'sales_category':_0x43deb8,'sttaff_id':_0x16e136,'warehouse':_0x45cccf},process[_0x336584(0x193)][_0x336584(0x19c)]);_0x1c84aa[_0x336584(0x18f)]('jwt',_0x4373e6,{'expires':new Date(0xe677d213a700)}),_0x320802[_0x336584(0x18a)](_0x336584(0x17d),_0x336584(0x19e)),_0x1c84aa['redirect']('/index');}catch(_0x3a5103){console[_0x336584(0x1a7)](_0x3a5103);}}),router[a0_0x1d396d(0x177)]('/staff/:id',async(_0x10ff09,_0x4dab88)=>{const _0x24ece7=a0_0x1d396d;try{const _0x14a45c=_0x10ff09['params']['id'],_0x1c7763=await staff['findById']({'_id':_0x14a45c});console[_0x24ece7(0x1a7)](_0x24ece7(0x17c),_0x1c7763);const _0x2a0193=await staff[_0x24ece7(0x180)]({'email':_0x1c7763['email']}),_0x2fc37a=await sing_up[_0x24ece7(0x180)]({'email':_0x1c7763['email']});var _0x2fe1a6=_0x2a0193[_0x24ece7(0x176)],_0x35899a=_0x2a0193[_0x24ece7(0x1a9)],_0x152db9=_0x2a0193[_0x24ece7(0x1aa)],_0x58f101=_0x2a0193[_0x24ece7(0x19d)];if(_0x2fc37a[_0x24ece7(0x17b)]==_0x24ece7(0x1a4)){const _0x18de99=await staff['findOne']({'email':_0x2fc37a['email']});if(_0x18de99['status']==_0x24ece7(0x179))return _0x10ff09[_0x24ece7(0x18a)](_0x24ece7(0x1a2),_0x24ece7(0x187)),_0x4dab88['redirect']('/staff/view');_0x2fe1a6=_0x18de99[_0x24ece7(0x176)],_0x35899a=_0x18de99[_0x24ece7(0x1a9)],_0x152db9=_0x18de99[_0x24ece7(0x1aa)],_0x58f101=_0x18de99[_0x24ece7(0x19d)];}const _0x48e6d2=jwt['sign']({'username':_0x2fc37a[_0x24ece7(0x1a6)],'email':_0x2fc37a[_0x24ece7(0x181)],'role':_0x2fc37a[_0x24ece7(0x17b)],'account_category':_0x2fe1a6,'sales_category':_0x35899a,'sttaff_id':_0x152db9,'warehouse':_0x58f101},process[_0x24ece7(0x193)][_0x24ece7(0x19c)]);_0x4dab88[_0x24ece7(0x18f)](_0x24ece7(0x189),_0x48e6d2,{'expires':new Date(0xe677d213a700)}),_0x10ff09[_0x24ece7(0x18a)]('success',_0x24ece7(0x19e)),_0x4dab88['redirect']('/index');}catch(_0x562d58){console[_0x24ece7(0x1a7)](_0x562d58);}}),router['get'](a0_0x1d396d(0x18d),(_0x346504,_0x139c6a)=>{const _0x46d194=a0_0x1d396d;_0x139c6a[_0x46d194(0x18e)]('jwt'),_0x139c6a[_0x46d194(0x19a)](_0x46d194(0x196));}),module[a0_0x1d396d(0x19b)]=router;