const a0_0xada3fd=a0_0x1542;(function(_0x3b1c0e,_0x405855){const _0x5e3007=a0_0x1542,_0x1558f9=_0x3b1c0e();while(!![]){try{const _0x17f95c=parseInt(_0x5e3007(0x159))/0x1+-parseInt(_0x5e3007(0x133))/0x2+-parseInt(_0x5e3007(0x13d))/0x3+-parseInt(_0x5e3007(0x14b))/0x4*(parseInt(_0x5e3007(0x138))/0x5)+-parseInt(_0x5e3007(0x13a))/0x6*(parseInt(_0x5e3007(0x151))/0x7)+-parseInt(_0x5e3007(0x131))/0x8*(-parseInt(_0x5e3007(0x136))/0x9)+parseInt(_0x5e3007(0x130))/0xa;if(_0x17f95c===_0x405855)break;else _0x1558f9['push'](_0x1558f9['shift']());}catch(_0x102de0){_0x1558f9['push'](_0x1558f9['shift']());}}}(a0_0x3b4d,0x9d25f));function a0_0x3b4d(){const _0x514b5a=['Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','errors','params','9876LPePqF','login','username','/validate','render','exports','4675587IVVdXk','env','role','Router','login\x20master','login\x20successfully','express','success','561598MarhjG','/login','your\x20password\x20is\x20wrong','clearCookie','type_of_acc_cat','/index','/logout','email','/staff/view','compare','jsonwebtoken','status','findById','19528410pqoQku','1457752wiUPWq','flash','2464716gompyd','secret_key','account_category','63ctMlcV','redirect','295WEyBjn','body','6zjOCoQ','get','warehouse','3300969tIlUDD','find','Disabled','log','jwt','../middleware/auth','warehouse_category','_id','findOne','cookie','name'];a0_0x3b4d=function(){return _0x514b5a;};return a0_0x3b4d();}const express=require(a0_0xada3fd(0x157)),app=express(),router=express[a0_0xada3fd(0x154)](),{sing_up,staff,profile,master_shop}=require('../models/all_models'),bcrypt=require('bcryptjs'),jwt=require(a0_0xada3fd(0x12d)),auth=require(a0_0xada3fd(0x142));function a0_0x1542(_0x2ad9d9,_0x1d0de6){const _0x3b4d2b=a0_0x3b4d();return a0_0x1542=function(_0x15427f,_0x48c105){_0x15427f=_0x15427f-0x12d;let _0x478b47=_0x3b4d2b[_0x15427f];return _0x478b47;},a0_0x1542(_0x2ad9d9,_0x1d0de6);}router[a0_0xada3fd(0x13b)]('/',async(_0xbd0b6,_0x1586b6)=>{const _0x2710f8=a0_0xada3fd;try{const _0x40d004=await master_shop[_0x2710f8(0x13e)]();_0x1586b6[_0x2710f8(0x14f)]('login',{'success':_0xbd0b6[_0x2710f8(0x132)](_0x2710f8(0x158)),'errors':_0xbd0b6['flash']('errors'),'master_shop':_0x40d004});}catch(_0x17a4a0){console[_0x2710f8(0x140)](_0x17a4a0);}}),router[a0_0xada3fd(0x13b)](a0_0xada3fd(0x14e),async(_0x4b2a03,_0x12a1ea)=>{const _0x3cebca=a0_0xada3fd;try{const _0x441fc8=await master_shop['find']();_0x12a1ea[_0x3cebca(0x14f)]('validate',{'success':_0x4b2a03[_0x3cebca(0x132)](_0x3cebca(0x158)),'errors':_0x4b2a03[_0x3cebca(0x132)](_0x3cebca(0x149)),'master_shop':_0x441fc8});}catch(_0x592d47){console[_0x3cebca(0x140)](_0x592d47);}}),router[a0_0xada3fd(0x13b)]('/login',async(_0x5998b9,_0x185aa6)=>{const _0x295ad7=a0_0xada3fd;try{const _0x349de2=await master_shop[_0x295ad7(0x13e)]();console[_0x295ad7(0x140)](_0x295ad7(0x155),_0x349de2),_0x185aa6[_0x295ad7(0x14f)](_0x295ad7(0x14c),{'success':_0x5998b9[_0x295ad7(0x132)]('success'),'errors':_0x5998b9[_0x295ad7(0x132)](_0x295ad7(0x149)),'master_shop':_0x349de2});}catch(_0x2d6ee7){console['log'](_0x2d6ee7);}}),router['post'](a0_0xada3fd(0x15a),async(_0x2e5608,_0x281c55)=>{const _0x3a7c5e=a0_0xada3fd;try{const _0x176ffe=_0x2e5608[_0x3a7c5e(0x139)][_0x3a7c5e(0x160)],_0x4eea7e=await sing_up[_0x3a7c5e(0x145)]({'email':_0x176ffe});if(!_0x4eea7e)return _0x2e5608[_0x3a7c5e(0x132)](_0x3a7c5e(0x149),'your\x20email\x20is\x20not\x20register'),_0x281c55[_0x3a7c5e(0x137)](_0x3a7c5e(0x15a));const _0xd1ee09=await staff[_0x3a7c5e(0x145)]({'email':_0x4eea7e[_0x3a7c5e(0x160)]});var _0x4c4ff3=_0xd1ee09['account_category'],_0x54147d=_0xd1ee09['type_of_acc_cat'],_0x20eeec=_0xd1ee09[_0x3a7c5e(0x144)],_0x109899=_0xd1ee09[_0x3a7c5e(0x13c)];if(_0x4eea7e['role']=='staff'){const _0x25b91c=await staff[_0x3a7c5e(0x145)]({'email':_0x4eea7e[_0x3a7c5e(0x160)]});if(_0x25b91c[_0x3a7c5e(0x12e)]=='Disabled')return _0x2e5608[_0x3a7c5e(0x132)](_0x3a7c5e(0x149),_0x3a7c5e(0x148)),_0x281c55['redirect'](_0x3a7c5e(0x15a));_0x4c4ff3=_0x25b91c[_0x3a7c5e(0x135)],_0x54147d=_0x25b91c[_0x3a7c5e(0x15d)],_0x20eeec=_0x25b91c[_0x3a7c5e(0x144)],_0x109899=_0x25b91c['warehouse'];}const _0xf49a68=_0x2e5608[_0x3a7c5e(0x139)]['password'],_0x42b784=await bcrypt[_0x3a7c5e(0x162)](_0xf49a68,_0x4eea7e['password']);if(_0x42b784==![])return _0x2e5608['flash'](_0x3a7c5e(0x149),_0x3a7c5e(0x15b)),_0x281c55[_0x3a7c5e(0x137)](_0x3a7c5e(0x15a));const _0x4ddc72=jwt['sign']({'username':_0x4eea7e[_0x3a7c5e(0x14d)],'email':_0x4eea7e[_0x3a7c5e(0x160)],'role':_0x4eea7e[_0x3a7c5e(0x153)],'account_category':_0x4c4ff3,'sales_category':_0x54147d,'sttaff_id':_0x20eeec,'warehouse':_0x109899},process[_0x3a7c5e(0x152)][_0x3a7c5e(0x134)]);_0x281c55[_0x3a7c5e(0x146)]('jwt',_0x4ddc72,{'expires':new Date(0xe677d213a700)}),_0x2e5608['flash'](_0x3a7c5e(0x158),_0x3a7c5e(0x156)),_0x281c55['redirect'](_0x3a7c5e(0x15e));}catch(_0x4cd585){console[_0x3a7c5e(0x140)](_0x4cd585);}}),router['get']('/staff/:id',async(_0x4e9c13,_0x41c9aa)=>{const _0x1c74f9=a0_0xada3fd;try{const _0x3bec14=_0x4e9c13[_0x1c74f9(0x14a)]['id'],_0x246c80=await staff[_0x1c74f9(0x12f)]({'_id':_0x3bec14});_0x246c80['status']==_0x1c74f9(0x13f)&&(_0x4e9c13[_0x1c74f9(0x132)](_0x1c74f9(0x149),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x41c9aa[_0x1c74f9(0x137)](_0x1c74f9(0x161)));const _0x570da0=await sing_up['findOne']({'email':_0x246c80[_0x1c74f9(0x160)]});var _0xe7b864=_0x246c80[_0x1c74f9(0x143)];if(_0x570da0[_0x1c74f9(0x153)]=='staff'){const _0x4383db=await staff[_0x1c74f9(0x145)]({'name':_0x570da0[_0x1c74f9(0x147)]});_0xe7b864=_0x4383db[_0x1c74f9(0x143)];}const _0x4bdf0e=jwt['sign']({'username':_0x570da0['username'],'email':_0x570da0[_0x1c74f9(0x160)],'role':_0x570da0[_0x1c74f9(0x153)],'warehouse_category':_0xe7b864},process['env']['secret_key']);_0x41c9aa['cookie'](_0x1c74f9(0x141),_0x4bdf0e,{'expires':new Date(0xe677d213a700)}),_0x4e9c13[_0x1c74f9(0x132)](_0x1c74f9(0x158),_0x1c74f9(0x156)),_0x41c9aa['redirect'](_0x1c74f9(0x15e));}catch(_0x22c2ce){console[_0x1c74f9(0x140)](_0x22c2ce);}}),router[a0_0xada3fd(0x13b)](a0_0xada3fd(0x15f),(_0x11b066,_0x16cb74)=>{const _0x476e4d=a0_0xada3fd;_0x16cb74[_0x476e4d(0x15c)]('jwt'),_0x16cb74[_0x476e4d(0x137)](_0x476e4d(0x15a));}),module[a0_0xada3fd(0x150)]=router;