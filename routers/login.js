const a0_0x4d59be=a0_0x1c6d;(function(_0x47ba25,_0x4a7c16){const _0x3fa434=a0_0x1c6d,_0x67ba72=_0x47ba25();while(!![]){try{const _0x5480c7=parseInt(_0x3fa434(0x196))/0x1+-parseInt(_0x3fa434(0x1aa))/0x2+parseInt(_0x3fa434(0x1a0))/0x3+parseInt(_0x3fa434(0x193))/0x4+parseInt(_0x3fa434(0x1be))/0x5+parseInt(_0x3fa434(0x1b6))/0x6+parseInt(_0x3fa434(0x1c4))/0x7*(-parseInt(_0x3fa434(0x18e))/0x8);if(_0x5480c7===_0x4a7c16)break;else _0x67ba72['push'](_0x67ba72['shift']());}catch(_0x2a3564){_0x67ba72['push'](_0x67ba72['shift']());}}}(a0_0x503a,0x5d3c9));const express=require('express'),app=express(),router=express[a0_0x4d59be(0x1b4)](),{sing_up,staff,profile,master_shop}=require(a0_0x4d59be(0x1b8)),bcrypt=require('bcryptjs'),jwt=require(a0_0x4d59be(0x1b2)),auth=require(a0_0x4d59be(0x1ad));function a0_0x1c6d(_0x312c80,_0x3ecf4f){const _0x503a12=a0_0x503a();return a0_0x1c6d=function(_0x1c6dfa,_0x17da9){_0x1c6dfa=_0x1c6dfa-0x18e;let _0x1b9b40=_0x503a12[_0x1c6dfa];return _0x1b9b40;},a0_0x1c6d(_0x312c80,_0x3ecf4f);}router[a0_0x4d59be(0x197)]('/',async(_0x134ae5,_0x5b52a5)=>{const _0x47d3ed=a0_0x4d59be;try{const _0x21354b=await master_shop[_0x47d3ed(0x198)]();_0x5b52a5['render']('login',{'success':_0x134ae5[_0x47d3ed(0x1c3)](_0x47d3ed(0x19a)),'errors':_0x134ae5[_0x47d3ed(0x1c3)](_0x47d3ed(0x1a8)),'master_shop':_0x21354b});}catch(_0x596ba3){console['log'](_0x596ba3);}}),router[a0_0x4d59be(0x197)](a0_0x4d59be(0x1c1),async(_0xd21ff5,_0x36b845)=>{const _0x2d795f=a0_0x4d59be;try{const _0x56602d=await master_shop[_0x2d795f(0x198)]();_0x36b845[_0x2d795f(0x1a9)](_0x2d795f(0x19b),{'success':_0xd21ff5[_0x2d795f(0x1c3)](_0x2d795f(0x19a)),'errors':_0xd21ff5[_0x2d795f(0x1c3)](_0x2d795f(0x1a8)),'master_shop':_0x56602d});}catch(_0x4e5c6d){console[_0x2d795f(0x199)](_0x4e5c6d);}}),router[a0_0x4d59be(0x197)](a0_0x4d59be(0x1a5),async(_0x591a66,_0x3047fa)=>{const _0x1f74ed=a0_0x4d59be;try{const _0x4c94e1=await master_shop[_0x1f74ed(0x198)]();console[_0x1f74ed(0x199)](_0x1f74ed(0x19c),_0x4c94e1),_0x3047fa[_0x1f74ed(0x1a9)](_0x1f74ed(0x1ab),{'success':_0x591a66[_0x1f74ed(0x1c3)](_0x1f74ed(0x19a)),'errors':_0x591a66[_0x1f74ed(0x1c3)]('errors'),'master_shop':_0x4c94e1});}catch(_0x270d08){console['log'](_0x270d08);}}),router['post'](a0_0x4d59be(0x1a5),async(_0x44f61c,_0x5e4590)=>{const _0x4a9f94=a0_0x4d59be;try{const _0x4beac6=_0x44f61c[_0x4a9f94(0x195)][_0x4a9f94(0x1ba)],_0x43e3fb=await sing_up[_0x4a9f94(0x190)]({'email':_0x4beac6});if(!_0x43e3fb)return _0x44f61c[_0x4a9f94(0x1c3)](_0x4a9f94(0x1a8),_0x4a9f94(0x19d)),_0x5e4590[_0x4a9f94(0x1a6)]('/login');const _0x4a696b=await staff[_0x4a9f94(0x190)]({'email':_0x43e3fb[_0x4a9f94(0x1ba)]});var _0x599029=_0x4a696b[_0x4a9f94(0x1b9)],_0x33b74e=_0x4a696b[_0x4a9f94(0x1bf)],_0x4c852e=_0x4a696b[_0x4a9f94(0x1b0)],_0x3addc1=_0x4a696b[_0x4a9f94(0x1c2)];if(_0x43e3fb[_0x4a9f94(0x18f)]=='staff'){const _0x37a77d=await staff[_0x4a9f94(0x190)]({'email':_0x43e3fb[_0x4a9f94(0x1ba)]});if(_0x37a77d[_0x4a9f94(0x194)]==_0x4a9f94(0x1a3))return _0x44f61c[_0x4a9f94(0x1c3)](_0x4a9f94(0x1a8),_0x4a9f94(0x1ae)),_0x5e4590['redirect'](_0x4a9f94(0x1a5));_0x599029=_0x37a77d[_0x4a9f94(0x1b9)],_0x33b74e=_0x37a77d[_0x4a9f94(0x1bf)],_0x4c852e=_0x37a77d[_0x4a9f94(0x1b0)],_0x3addc1=_0x37a77d['warehouse'];}const _0x38aa8c=_0x44f61c[_0x4a9f94(0x195)][_0x4a9f94(0x1bc)],_0x417d66=await bcrypt[_0x4a9f94(0x1c0)](_0x38aa8c,_0x43e3fb[_0x4a9f94(0x1bc)]);if(_0x417d66==![])return _0x44f61c['flash'](_0x4a9f94(0x1a8),_0x4a9f94(0x1af)),_0x5e4590[_0x4a9f94(0x1a6)](_0x4a9f94(0x1a5));const _0x208003=jwt[_0x4a9f94(0x1ac)]({'username':_0x43e3fb[_0x4a9f94(0x1bb)],'email':_0x43e3fb[_0x4a9f94(0x1ba)],'role':_0x43e3fb[_0x4a9f94(0x18f)],'account_category':_0x599029,'sales_category':_0x33b74e,'sttaff_id':_0x4c852e,'warehouse':_0x3addc1},process[_0x4a9f94(0x191)][_0x4a9f94(0x192)]);_0x5e4590['cookie'](_0x4a9f94(0x1a4),_0x208003,{'expires':new Date(0xe677d213a700)}),_0x44f61c[_0x4a9f94(0x1c3)](_0x4a9f94(0x19a),_0x4a9f94(0x1a7)),_0x5e4590[_0x4a9f94(0x1a6)](_0x4a9f94(0x1b3));}catch(_0x497709){console['log'](_0x497709);}}),router[a0_0x4d59be(0x197)](a0_0x4d59be(0x1a2),async(_0x4ad31f,_0x5e5af8)=>{const _0x425900=a0_0x4d59be;try{const _0x20cb1=_0x4ad31f[_0x425900(0x1b1)]['id'],_0x472112=await staff[_0x425900(0x1b5)]({'_id':_0x20cb1});_0x472112[_0x425900(0x194)]=='Disabled'&&(_0x4ad31f[_0x425900(0x1c3)](_0x425900(0x1a8),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x5e5af8[_0x425900(0x1a6)](_0x425900(0x1b7)));const _0x1a139a=await sing_up['findOne']({'email':_0x472112[_0x425900(0x1ba)]});var _0x362114=_0x472112[_0x425900(0x1bd)];if(_0x1a139a[_0x425900(0x18f)]=='staff'){const _0x52e65e=await staff[_0x425900(0x190)]({'name':_0x1a139a[_0x425900(0x1a1)]});_0x362114=_0x52e65e[_0x425900(0x1bd)];}const _0x106f7e=jwt['sign']({'username':_0x1a139a['username'],'email':_0x1a139a[_0x425900(0x1ba)],'role':_0x1a139a['role'],'warehouse_category':_0x362114},process[_0x425900(0x191)][_0x425900(0x192)]);_0x5e5af8[_0x425900(0x19f)](_0x425900(0x1a4),_0x106f7e,{'expires':new Date(0xe677d213a700)}),_0x4ad31f[_0x425900(0x1c3)](_0x425900(0x19a),'login\x20successfully'),_0x5e5af8['redirect'](_0x425900(0x1b3));}catch(_0x527400){console[_0x425900(0x199)](_0x527400);}}),router['get'](a0_0x4d59be(0x19e),(_0x134272,_0x4e6fe2)=>{const _0x240427=a0_0x4d59be;_0x4e6fe2['clearCookie']('jwt'),_0x4e6fe2[_0x240427(0x1a6)](_0x240427(0x1a5));}),module['exports']=router;function a0_0x503a(){const _0x4f87ad=['/index','Router','findById','2211684NUAIrC','/staff/view','../models/all_models','account_category','email','username','password','warehouse_category','3069140ENroMT','type_of_acc_cat','compare','/validate','warehouse','flash','895447OLUdQy','104AxgjEH','role','findOne','env','secret_key','116612ZRbzLX','status','body','628771HKhpQK','get','find','log','success','validate','login\x20master','your\x20email\x20is\x20not\x20register','/logout','cookie','1432017qTWoMy','name','/staff/:id','Disabled','jwt','/login','redirect','login\x20successfully','errors','render','145670OGwnES','login','sign','../middleware/auth','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','your\x20password\x20is\x20wrong','_id','params','jsonwebtoken'];a0_0x503a=function(){return _0x4f87ad;};return a0_0x503a();}