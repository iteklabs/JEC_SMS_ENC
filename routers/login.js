const a0_0x54a1fb=a0_0x2695;(function(_0x4ee9e3,_0x5a6d88){const _0x30466=a0_0x2695,_0x278e62=_0x4ee9e3();while(!![]){try{const _0x217609=parseInt(_0x30466(0xf0))/0x1*(-parseInt(_0x30466(0xf2))/0x2)+-parseInt(_0x30466(0xe5))/0x3+-parseInt(_0x30466(0xe9))/0x4+-parseInt(_0x30466(0xe1))/0x5+-parseInt(_0x30466(0x107))/0x6+parseInt(_0x30466(0xe4))/0x7+parseInt(_0x30466(0x108))/0x8*(parseInt(_0x30466(0xeb))/0x9);if(_0x217609===_0x5a6d88)break;else _0x278e62['push'](_0x278e62['shift']());}catch(_0x18252e){_0x278e62['push'](_0x278e62['shift']());}}}(a0_0x4a4f,0x63ff7));function a0_0x2695(_0xa4e89c,_0x4479c7){const _0x4a4f59=a0_0x4a4f();return a0_0x2695=function(_0x269538,_0x1c5ceb){_0x269538=_0x269538-0xd9;let _0x17c045=_0x4a4f59[_0x269538];return _0x17c045;},a0_0x2695(_0xa4e89c,_0x4479c7);}function a0_0x4a4f(){const _0x27f1fc=['your\x20email\x20is\x20not\x20register','email','render','/validate','redirect','express','staff','success','1299438AqwNXO','8CSZdgX','username','login\x20successfully','/index','params','errors','get','flash','role','secret_key','clearCookie','/login','status','log','/logout','sign','compare','1286490KuhjbY','env','account_category','2680125WCddDG','284478BZuonG','warehouse','jsonwebtoken','find','3058420aDAPTL','post','12531042nKbGMV','Router','cookie','_id','../models/all_models','32IsoIEM','/staff/:id','2020ITPTSh','validate','Disabled','login\x20master','body','password','findById','findOne','jwt','login\x20staff','login','exports','type_of_acc_cat'];a0_0x4a4f=function(){return _0x27f1fc;};return a0_0x4a4f();}const express=require(a0_0x54a1fb(0x104)),app=express(),router=express[a0_0x54a1fb(0xec)](),{sing_up,staff,profile,master_shop}=require(a0_0x54a1fb(0xef)),bcrypt=require('bcryptjs'),jwt=require(a0_0x54a1fb(0xe7)),auth=require('../middleware/auth');router['get']('/',async(_0x183166,_0x1cd6c9)=>{const _0x419b49=a0_0x54a1fb;try{const _0x45e3d2=await master_shop[_0x419b49(0xe8)]();_0x1cd6c9[_0x419b49(0x101)](_0x419b49(0xfc),{'success':_0x183166[_0x419b49(0x10f)](_0x419b49(0x106)),'errors':_0x183166[_0x419b49(0x10f)](_0x419b49(0x10d)),'master_shop':_0x45e3d2});}catch(_0x1f040c){console[_0x419b49(0xdd)](_0x1f040c);}}),router[a0_0x54a1fb(0x10e)](a0_0x54a1fb(0x102),async(_0x3bd79e,_0x253f09)=>{const _0x299107=a0_0x54a1fb;try{const _0x176d92=await master_shop[_0x299107(0xe8)]();_0x253f09[_0x299107(0x101)](_0x299107(0xf3),{'success':_0x3bd79e[_0x299107(0x10f)](_0x299107(0x106)),'errors':_0x3bd79e[_0x299107(0x10f)](_0x299107(0x10d)),'master_shop':_0x176d92});}catch(_0x5c2e90){console['log'](_0x5c2e90);}}),router[a0_0x54a1fb(0x10e)](a0_0x54a1fb(0xdb),async(_0x12cf08,_0xd56aff)=>{const _0x572d8e=a0_0x54a1fb;try{const _0x47e237=await master_shop[_0x572d8e(0xe8)]();console[_0x572d8e(0xdd)](_0x572d8e(0xf5),_0x47e237),_0xd56aff[_0x572d8e(0x101)](_0x572d8e(0xfc),{'success':_0x12cf08['flash'](_0x572d8e(0x106)),'errors':_0x12cf08[_0x572d8e(0x10f)]('errors'),'master_shop':_0x47e237});}catch(_0x41eef0){console[_0x572d8e(0xdd)](_0x41eef0);}}),router[a0_0x54a1fb(0xea)]('/login',async(_0x8820b8,_0xf076ae)=>{const _0x544d54=a0_0x54a1fb;try{const _0x543a0b=_0x8820b8[_0x544d54(0xf6)][_0x544d54(0x100)],_0x2a202d=await sing_up[_0x544d54(0xf9)]({'email':_0x543a0b});if(!_0x2a202d)return _0x8820b8[_0x544d54(0x10f)]('errors',_0x544d54(0xff)),_0xf076ae['redirect'](_0x544d54(0xdb));const _0x57d8f1=await staff[_0x544d54(0xf9)]({'email':_0x2a202d[_0x544d54(0x100)]});var _0x7ecfff=_0x57d8f1['account_category'],_0x3e58a3=_0x57d8f1[_0x544d54(0xfe)],_0x4ee680=_0x57d8f1['_id'],_0x148b60=_0x57d8f1['warehouse'];if(_0x2a202d[_0x544d54(0x110)]==_0x544d54(0x105)){const _0x22836c=await staff[_0x544d54(0xf9)]({'email':_0x2a202d[_0x544d54(0x100)]});if(_0x22836c[_0x544d54(0xdc)]=='Disabled')return _0x8820b8[_0x544d54(0x10f)](_0x544d54(0x10d),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0xf076ae[_0x544d54(0x103)]('/login');_0x7ecfff=_0x22836c['account_category'],_0x3e58a3=_0x22836c[_0x544d54(0xfe)],_0x4ee680=_0x22836c[_0x544d54(0xee)],_0x148b60=_0x22836c[_0x544d54(0xe6)];}const _0x56d240=_0x8820b8[_0x544d54(0xf6)][_0x544d54(0xf7)],_0x58fe28=await bcrypt[_0x544d54(0xe0)](_0x56d240,_0x2a202d[_0x544d54(0xf7)]);if(_0x58fe28==![])return _0x8820b8['flash']('errors','your\x20password\x20is\x20wrong'),_0xf076ae[_0x544d54(0x103)](_0x544d54(0xdb));const _0x5737cf=jwt[_0x544d54(0xdf)]({'username':_0x2a202d[_0x544d54(0x109)],'email':_0x2a202d[_0x544d54(0x100)],'role':_0x2a202d[_0x544d54(0x110)],'account_category':_0x7ecfff,'sales_category':_0x3e58a3,'sttaff_id':_0x4ee680,'warehouse':_0x148b60},process[_0x544d54(0xe2)]['secret_key']);_0xf076ae['cookie'](_0x544d54(0xfa),_0x5737cf,{'expires':new Date(0xe677d213a700)}),_0x8820b8[_0x544d54(0x10f)]('success',_0x544d54(0x10a)),_0xf076ae[_0x544d54(0x103)](_0x544d54(0x10b));}catch(_0x534c6c){console[_0x544d54(0xdd)](_0x534c6c);}}),router[a0_0x54a1fb(0x10e)](a0_0x54a1fb(0xf1),async(_0x227b73,_0x21bae3)=>{const _0x45be4d=a0_0x54a1fb;try{const _0x1f2156=_0x227b73[_0x45be4d(0x10c)]['id'],_0x4014f1=await staff[_0x45be4d(0xf8)]({'_id':_0x1f2156});console[_0x45be4d(0xdd)](_0x45be4d(0xfb),_0x4014f1);const _0x5f2056=await staff[_0x45be4d(0xf9)]({'email':_0x4014f1[_0x45be4d(0x100)]}),_0x48263b=await sing_up[_0x45be4d(0xf9)]({'email':_0x4014f1[_0x45be4d(0x100)]});var _0x122a1a=_0x5f2056[_0x45be4d(0xe3)],_0x199860=_0x5f2056['type_of_acc_cat'],_0x2090c1=_0x5f2056['_id'],_0x73c6e8=_0x5f2056[_0x45be4d(0xe6)];if(_0x48263b[_0x45be4d(0x110)]==_0x45be4d(0x105)){const _0x5e51cb=await staff[_0x45be4d(0xf9)]({'email':_0x48263b[_0x45be4d(0x100)]});if(_0x5e51cb['status']==_0x45be4d(0xf4))return _0x227b73['flash'](_0x45be4d(0x10d),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x21bae3[_0x45be4d(0x103)]('/staff/view');_0x122a1a=_0x5e51cb['account_category'],_0x199860=_0x5e51cb[_0x45be4d(0xfe)],_0x2090c1=_0x5e51cb[_0x45be4d(0xee)],_0x73c6e8=_0x5e51cb['warehouse'];}const _0x18b757=jwt[_0x45be4d(0xdf)]({'username':_0x48263b[_0x45be4d(0x109)],'email':_0x48263b[_0x45be4d(0x100)],'role':_0x48263b['role'],'account_category':_0x122a1a,'sales_category':_0x199860,'sttaff_id':_0x2090c1,'warehouse':_0x73c6e8},process[_0x45be4d(0xe2)][_0x45be4d(0xd9)]);_0x21bae3[_0x45be4d(0xed)](_0x45be4d(0xfa),_0x18b757,{'expires':new Date(0xe677d213a700)}),_0x227b73[_0x45be4d(0x10f)](_0x45be4d(0x106),_0x45be4d(0x10a)),_0x21bae3['redirect'](_0x45be4d(0x10b));}catch(_0x8d3edf){console[_0x45be4d(0xdd)](_0x8d3edf);}}),router[a0_0x54a1fb(0x10e)](a0_0x54a1fb(0xde),(_0x5a0187,_0x4fc1a1)=>{const _0x105977=a0_0x54a1fb;_0x4fc1a1[_0x105977(0xda)](_0x105977(0xfa)),_0x4fc1a1['redirect'](_0x105977(0xdb));}),module[a0_0x54a1fb(0xfd)]=router;