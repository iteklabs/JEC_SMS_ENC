const a0_0x1692cb=a0_0x423d;function a0_0x423d(_0x29b263,_0x21ed8e){const _0x1254b8=a0_0x1254();return a0_0x423d=function(_0x423d66,_0x178fb3){_0x423d66=_0x423d66-0x14d;let _0x38d879=_0x1254b8[_0x423d66];return _0x38d879;},a0_0x423d(_0x29b263,_0x21ed8e);}(function(_0x3f7613,_0x43328e){const _0x5c7840=a0_0x423d,_0x226a7c=_0x3f7613();while(!![]){try{const _0x59a71b=parseInt(_0x5c7840(0x14d))/0x1+-parseInt(_0x5c7840(0x178))/0x2+parseInt(_0x5c7840(0x176))/0x3+-parseInt(_0x5c7840(0x15c))/0x4+parseInt(_0x5c7840(0x169))/0x5+-parseInt(_0x5c7840(0x152))/0x6+parseInt(_0x5c7840(0x15a))/0x7;if(_0x59a71b===_0x43328e)break;else _0x226a7c['push'](_0x226a7c['shift']());}catch(_0x5a2efe){_0x226a7c['push'](_0x226a7c['shift']());}}}(a0_0x1254,0xacccb));const express=require('express'),app=express(),router=express[a0_0x1692cb(0x166)](),{sing_up,staff,profile,master_shop}=require('../models/all_models'),bcrypt=require(a0_0x1692cb(0x163)),jwt=require(a0_0x1692cb(0x179)),auth=require(a0_0x1692cb(0x180));router[a0_0x1692cb(0x151)]('/',async(_0x11441a,_0x152581)=>{const _0x35abd6=a0_0x1692cb;try{const _0x1bfea9=await master_shop[_0x35abd6(0x161)]();_0x152581['render'](_0x35abd6(0x157),{'success':_0x11441a[_0x35abd6(0x17c)](_0x35abd6(0x153)),'errors':_0x11441a[_0x35abd6(0x17c)](_0x35abd6(0x15e)),'master_shop':_0x1bfea9});}catch(_0xb6ddf8){console[_0x35abd6(0x16e)](_0xb6ddf8);}}),router['get'](a0_0x1692cb(0x17d),async(_0x52eaaf,_0x559b29)=>{const _0x274bbe=a0_0x1692cb;try{const _0x460d88=await master_shop[_0x274bbe(0x161)]();_0x559b29['render'](_0x274bbe(0x15d),{'success':_0x52eaaf[_0x274bbe(0x17c)](_0x274bbe(0x153)),'errors':_0x52eaaf[_0x274bbe(0x17c)](_0x274bbe(0x15e)),'master_shop':_0x460d88});}catch(_0xc01f62){console[_0x274bbe(0x16e)](_0xc01f62);}}),router['get'](a0_0x1692cb(0x15b),async(_0x5a8ebe,_0x5d0c72)=>{const _0x55d5ad=a0_0x1692cb;try{const _0x8a4bef=await master_shop[_0x55d5ad(0x161)]();console['log'](_0x55d5ad(0x177),_0x8a4bef),_0x5d0c72[_0x55d5ad(0x159)](_0x55d5ad(0x157),{'success':_0x5a8ebe[_0x55d5ad(0x17c)](_0x55d5ad(0x153)),'errors':_0x5a8ebe['flash'](_0x55d5ad(0x15e)),'master_shop':_0x8a4bef});}catch(_0x18f570){console[_0x55d5ad(0x16e)](_0x18f570);}}),router[a0_0x1692cb(0x164)](a0_0x1692cb(0x15b),async(_0x61e8e,_0x5167ab)=>{const _0xe8c632=a0_0x1692cb;try{const _0x25f0b9=_0x61e8e[_0xe8c632(0x174)][_0xe8c632(0x173)],_0x2d56f5=await sing_up[_0xe8c632(0x168)]({'email':_0x25f0b9});if(!_0x2d56f5)return _0x61e8e['flash'](_0xe8c632(0x15e),'your\x20email\x20is\x20not\x20register'),_0x5167ab[_0xe8c632(0x172)](_0xe8c632(0x15b));const _0x2ddc30=await staff['findOne']({'email':_0x2d56f5['email']});var _0x972385=_0x2ddc30[_0xe8c632(0x15f)],_0x1602f7=_0x2ddc30['type_of_acc_cat'],_0x19398d=_0x2ddc30[_0xe8c632(0x16b)],_0x25fd9a=_0x2ddc30['warehouse'];if(_0x2d56f5[_0xe8c632(0x170)]=='staff'){const _0x56af9b=await staff['findOne']({'email':_0x2d56f5[_0xe8c632(0x173)]});if(_0x56af9b[_0xe8c632(0x16d)]==_0xe8c632(0x175))return _0x61e8e[_0xe8c632(0x17c)](_0xe8c632(0x15e),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x5167ab[_0xe8c632(0x172)](_0xe8c632(0x15b));_0x972385=_0x56af9b[_0xe8c632(0x15f)],_0x1602f7=_0x56af9b['type_of_acc_cat'],_0x19398d=_0x56af9b[_0xe8c632(0x16b)],_0x25fd9a=_0x56af9b[_0xe8c632(0x171)];}const _0x3de1b6=_0x61e8e[_0xe8c632(0x174)][_0xe8c632(0x160)],_0x2115f0=await bcrypt['compare'](_0x3de1b6,_0x2d56f5['password']);if(_0x2115f0==![])return _0x61e8e[_0xe8c632(0x17c)](_0xe8c632(0x15e),_0xe8c632(0x167)),_0x5167ab['redirect']('/login');const _0x30cd60=jwt['sign']({'username':_0x2d56f5[_0xe8c632(0x14f)],'email':_0x2d56f5[_0xe8c632(0x173)],'role':_0x2d56f5[_0xe8c632(0x170)],'account_category':_0x972385,'sales_category':_0x1602f7,'sttaff_id':_0x19398d,'warehouse':_0x25fd9a},process['env']['secret_key']);_0x5167ab['cookie'](_0xe8c632(0x154),_0x30cd60,{'expires':new Date(0xe677d213a700)}),_0x61e8e[_0xe8c632(0x17c)](_0xe8c632(0x153),_0xe8c632(0x14e)),_0x5167ab['redirect'](_0xe8c632(0x17e));}catch(_0x96d55){console['log'](_0x96d55);}}),router['get']('/staff/:id',async(_0x31443f,_0x50c7a8)=>{const _0x2d1de7=a0_0x1692cb;try{const _0x5cdeda=_0x31443f[_0x2d1de7(0x17b)]['id'],_0x57b6dd=await staff[_0x2d1de7(0x17a)]({'_id':_0x5cdeda});_0x57b6dd[_0x2d1de7(0x16d)]==_0x2d1de7(0x175)&&(_0x31443f[_0x2d1de7(0x17c)]('errors',_0x2d1de7(0x162)),_0x50c7a8[_0x2d1de7(0x172)]('/staff/view'));const _0x49c038=await sing_up[_0x2d1de7(0x168)]({'email':_0x57b6dd['email']});var _0x1ae160=_0x57b6dd[_0x2d1de7(0x165)];if(_0x49c038['role']==_0x2d1de7(0x150)){const _0x4505ad=await staff[_0x2d1de7(0x168)]({'name':_0x49c038[_0x2d1de7(0x16f)]});_0x1ae160=_0x4505ad[_0x2d1de7(0x165)];}const _0x3cb559=jwt[_0x2d1de7(0x16a)]({'username':_0x49c038[_0x2d1de7(0x14f)],'email':_0x49c038[_0x2d1de7(0x173)],'role':_0x49c038[_0x2d1de7(0x170)],'warehouse_category':_0x1ae160},process[_0x2d1de7(0x16c)][_0x2d1de7(0x17f)]);_0x50c7a8[_0x2d1de7(0x155)](_0x2d1de7(0x154),_0x3cb559,{'expires':new Date(0xe677d213a700)}),_0x31443f['flash'](_0x2d1de7(0x153),_0x2d1de7(0x14e)),_0x50c7a8['redirect'](_0x2d1de7(0x17e));}catch(_0x41efd4){console[_0x2d1de7(0x16e)](_0x41efd4);}}),router[a0_0x1692cb(0x151)](a0_0x1692cb(0x156),(_0x20691b,_0x3c19f4)=>{const _0xeb1bd6=a0_0x1692cb;_0x3c19f4[_0xeb1bd6(0x158)](_0xeb1bd6(0x154)),_0x3c19f4['redirect']('/login');}),module[a0_0x1692cb(0x181)]=router;function a0_0x1254(){const _0x4488a2=['params','flash','/validate','/index','secret_key','../middleware/auth','exports','902427FDTUvF','login\x20successfully','username','staff','get','5670522mwYVam','success','jwt','cookie','/logout','login','clearCookie','render','6120268pAfZQL','/login','2629740XlROMp','validate','errors','account_category','password','find','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','bcryptjs','post','warehouse_category','Router','your\x20password\x20is\x20wrong','findOne','546470vmuQZz','sign','_id','env','status','log','name','role','warehouse','redirect','email','body','Disabled','2587230oJsGBO','login\x20master','876292kCcGum','jsonwebtoken','findById'];a0_0x1254=function(){return _0x4488a2;};return a0_0x1254();}