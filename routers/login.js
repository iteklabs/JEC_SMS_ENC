const a0_0x205627=a0_0x58df;function a0_0x58df(_0x260fcf,_0xdae696){const _0x1a62c3=a0_0x1a62();return a0_0x58df=function(_0x58dfbc,_0x222337){_0x58dfbc=_0x58dfbc-0xa7;let _0xb76aaf=_0x1a62c3[_0x58dfbc];return _0xb76aaf;},a0_0x58df(_0x260fcf,_0xdae696);}(function(_0x50c745,_0x15633d){const _0x35296f=a0_0x58df,_0x5d6898=_0x50c745();while(!![]){try{const _0x57fe81=-parseInt(_0x35296f(0xb3))/0x1+parseInt(_0x35296f(0xbc))/0x2+-parseInt(_0x35296f(0xb9))/0x3*(-parseInt(_0x35296f(0xd9))/0x4)+parseInt(_0x35296f(0xdd))/0x5+parseInt(_0x35296f(0xc7))/0x6*(-parseInt(_0x35296f(0xdc))/0x7)+-parseInt(_0x35296f(0xaa))/0x8+-parseInt(_0x35296f(0xcd))/0x9*(parseInt(_0x35296f(0xb6))/0xa);if(_0x57fe81===_0x15633d)break;else _0x5d6898['push'](_0x5d6898['shift']());}catch(_0x30cc2b){_0x5d6898['push'](_0x5d6898['shift']());}}}(a0_0x1a62,0x82b88));const express=require(a0_0x205627(0xd3)),app=express(),router=express[a0_0x205627(0xaf)](),{sing_up,staff,profile,master_shop}=require(a0_0x205627(0xd7)),bcrypt=require(a0_0x205627(0xce)),jwt=require(a0_0x205627(0xdf)),auth=require(a0_0x205627(0xda));router[a0_0x205627(0xdb)]('/',async(_0x7f5e7a,_0x294a00)=>{const _0x546333=a0_0x205627;try{const _0xd96de6=await master_shop[_0x546333(0xc8)]();_0x294a00[_0x546333(0xd6)](_0x546333(0xa9),{'success':_0x7f5e7a[_0x546333(0xb2)]('success'),'errors':_0x7f5e7a['flash'](_0x546333(0xd8)),'master_shop':_0xd96de6});}catch(_0x335b72){console[_0x546333(0xd1)](_0x335b72);}}),router['get'](a0_0x205627(0xae),async(_0x52817a,_0x11c4ff)=>{const _0x541e8d=a0_0x205627;try{const _0x40be7e=await master_shop['find']();_0x11c4ff[_0x541e8d(0xd6)](_0x541e8d(0xac),{'success':_0x52817a[_0x541e8d(0xb2)]('success'),'errors':_0x52817a[_0x541e8d(0xb2)](_0x541e8d(0xd8)),'master_shop':_0x40be7e});}catch(_0x23ab80){console['log'](_0x23ab80);}}),router[a0_0x205627(0xdb)]('/login',async(_0x3ddf80,_0xb9764d)=>{const _0x4bb43c=a0_0x205627;try{const _0x3bd0ab=await master_shop[_0x4bb43c(0xc8)]();console['log'](_0x4bb43c(0xc0),_0x3bd0ab),_0xb9764d['render'](_0x4bb43c(0xa9),{'success':_0x3ddf80[_0x4bb43c(0xb2)]('success'),'errors':_0x3ddf80[_0x4bb43c(0xb2)]('errors'),'master_shop':_0x3bd0ab});}catch(_0x37caae){console['log'](_0x37caae);}}),router[a0_0x205627(0xbd)](a0_0x205627(0xa7),async(_0x4e3389,_0x555108)=>{const _0x543991=a0_0x205627;try{const _0x5786dd=_0x4e3389[_0x543991(0xc6)][_0x543991(0xb7)],_0x9c45b6=await sing_up[_0x543991(0xa8)]({'email':_0x5786dd});if(!_0x9c45b6)return _0x4e3389[_0x543991(0xb2)](_0x543991(0xd8),_0x543991(0xab)),_0x555108[_0x543991(0xb1)](_0x543991(0xa7));const _0x49253d=await staff['findOne']({'email':_0x9c45b6[_0x543991(0xb7)]});var _0x2cba20=_0x49253d[_0x543991(0xe3)],_0x570bce=_0x49253d['type_of_acc_cat'],_0x6054dc=_0x49253d['_id'],_0x133321=_0x49253d[_0x543991(0xd2)];if(_0x9c45b6[_0x543991(0xba)]==_0x543991(0xbf)){const _0x90b69f=await staff[_0x543991(0xa8)]({'email':_0x9c45b6[_0x543991(0xb7)]});if(_0x90b69f[_0x543991(0xde)]=='Disabled')return _0x4e3389[_0x543991(0xb2)]('errors',_0x543991(0xd0)),_0x555108[_0x543991(0xb1)]('/login');_0x2cba20=_0x90b69f[_0x543991(0xe3)],_0x570bce=_0x90b69f['type_of_acc_cat'],_0x6054dc=_0x90b69f[_0x543991(0xc2)],_0x133321=_0x90b69f[_0x543991(0xd2)];}const _0x3c989b=_0x4e3389[_0x543991(0xc6)]['password'],_0x2278ee=await bcrypt[_0x543991(0xe1)](_0x3c989b,_0x9c45b6[_0x543991(0xc3)]);if(_0x2278ee==![])return _0x4e3389[_0x543991(0xb2)](_0x543991(0xd8),_0x543991(0xc9)),_0x555108[_0x543991(0xb1)](_0x543991(0xa7));const _0x40c27e=jwt['sign']({'username':_0x9c45b6['username'],'email':_0x9c45b6[_0x543991(0xb7)],'role':_0x9c45b6[_0x543991(0xba)],'account_category':_0x2cba20,'sales_category':_0x570bce,'sttaff_id':_0x6054dc,'warehouse':_0x133321},process['env'][_0x543991(0xc4)]);_0x555108[_0x543991(0xcf)]('jwt',_0x40c27e,{'expires':new Date(0xe677d213a700)}),_0x4e3389['flash'](_0x543991(0xc1),_0x543991(0xb8)),_0x555108[_0x543991(0xb1)](_0x543991(0xb0));}catch(_0x3f0865){console[_0x543991(0xd1)](_0x3f0865);}}),router[a0_0x205627(0xdb)](a0_0x205627(0xd4),async(_0xfa1637,_0x172e6b)=>{const _0xcf7a09=a0_0x205627;try{const _0x281145=_0xfa1637[_0xcf7a09(0xe2)]['id'],_0x163882=await staff[_0xcf7a09(0xbe)]({'_id':_0x281145});console['log'](_0xcf7a09(0xcc),_0x163882);const _0x463f08=await staff[_0xcf7a09(0xa8)]({'email':_0x163882['email']}),_0xd372c9=await sing_up['findOne']({'email':_0x163882[_0xcf7a09(0xb7)]});var _0x5e0cc3=_0x463f08[_0xcf7a09(0xe3)],_0xc7b2a6=_0x463f08['type_of_acc_cat'],_0x32d906=_0x463f08[_0xcf7a09(0xc2)],_0x2ba0e4=_0x463f08[_0xcf7a09(0xd2)];if(_0xd372c9['role']==_0xcf7a09(0xbf)){const _0x3e95cc=await staff[_0xcf7a09(0xa8)]({'email':_0xd372c9[_0xcf7a09(0xb7)]});if(_0x3e95cc[_0xcf7a09(0xde)]==_0xcf7a09(0xe0))return _0xfa1637[_0xcf7a09(0xb2)](_0xcf7a09(0xd8),_0xcf7a09(0xd0)),_0x172e6b[_0xcf7a09(0xb1)](_0xcf7a09(0xd5));_0x5e0cc3=_0x3e95cc[_0xcf7a09(0xe3)],_0xc7b2a6=_0x3e95cc[_0xcf7a09(0xb4)],_0x32d906=_0x3e95cc['_id'],_0x2ba0e4=_0x3e95cc[_0xcf7a09(0xd2)];}const _0x56bc54=jwt[_0xcf7a09(0xcb)]({'username':_0xd372c9[_0xcf7a09(0xe4)],'email':_0xd372c9['email'],'role':_0xd372c9[_0xcf7a09(0xba)],'account_category':_0x5e0cc3,'sales_category':_0xc7b2a6,'sttaff_id':_0x32d906,'warehouse':_0x2ba0e4},process[_0xcf7a09(0xb5)][_0xcf7a09(0xc4)]);_0x172e6b[_0xcf7a09(0xcf)](_0xcf7a09(0xbb),_0x56bc54,{'expires':new Date(0xe677d213a700)}),_0xfa1637[_0xcf7a09(0xb2)](_0xcf7a09(0xc1),_0xcf7a09(0xb8)),_0x172e6b[_0xcf7a09(0xb1)](_0xcf7a09(0xb0));}catch(_0x540cbb){console[_0xcf7a09(0xd1)](_0x540cbb);}}),router[a0_0x205627(0xdb)](a0_0x205627(0xad),(_0x13d755,_0x5d4d4d)=>{const _0x1a9d2e=a0_0x205627;_0x5d4d4d[_0x1a9d2e(0xca)](_0x1a9d2e(0xbb)),_0x5d4d4d[_0x1a9d2e(0xb1)](_0x1a9d2e(0xa7));}),module[a0_0x205627(0xc5)]=router;function a0_0x1a62(){const _0x24b964=['jsonwebtoken','Disabled','compare','params','account_category','username','/login','findOne','login','4730144zqqRlQ','your\x20email\x20is\x20not\x20register','validate','/logout','/validate','Router','/index','redirect','flash','41129Xobyth','type_of_acc_cat','env','40EVjVpY','email','login\x20successfully','24LaQJTH','role','jwt','2001004TcXlga','post','findById','staff','login\x20master','success','_id','password','secret_key','exports','body','6kWTJGU','find','your\x20password\x20is\x20wrong','clearCookie','sign','login\x20staff','2614995JlEcJJ','bcryptjs','cookie','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','log','warehouse','express','/staff/:id','/staff/view','render','../models/all_models','errors','385788KJFSUC','../middleware/auth','get','736813jCNrIG','3316150KPtIfm','status'];a0_0x1a62=function(){return _0x24b964;};return a0_0x1a62();}