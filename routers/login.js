function a0_0x5016(_0x5320da,_0x195357){const _0x45cbbd=a0_0x45cb();return a0_0x5016=function(_0x50166b,_0x39801e){_0x50166b=_0x50166b-0xa7;let _0x439017=_0x45cbbd[_0x50166b];return _0x439017;},a0_0x5016(_0x5320da,_0x195357);}const a0_0x5a1f69=a0_0x5016;(function(_0x58195c,_0x1d8a8c){const _0x39ff63=a0_0x5016,_0x5eda0c=_0x58195c();while(!![]){try{const _0x8e08a0=parseInt(_0x39ff63(0xb7))/0x1*(-parseInt(_0x39ff63(0xac))/0x2)+-parseInt(_0x39ff63(0xd5))/0x3+-parseInt(_0x39ff63(0xb6))/0x4+-parseInt(_0x39ff63(0xc8))/0x5*(parseInt(_0x39ff63(0xbb))/0x6)+-parseInt(_0x39ff63(0xc9))/0x7*(parseInt(_0x39ff63(0xaf))/0x8)+-parseInt(_0x39ff63(0xdd))/0x9+parseInt(_0x39ff63(0xbe))/0xa*(parseInt(_0x39ff63(0xd2))/0xb);if(_0x8e08a0===_0x1d8a8c)break;else _0x5eda0c['push'](_0x5eda0c['shift']());}catch(_0x31fe85){_0x5eda0c['push'](_0x5eda0c['shift']());}}}(a0_0x45cb,0x5dc7f));const express=require('express'),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require('../models/all_models'),bcrypt=require(a0_0x5a1f69(0xba)),jwt=require(a0_0x5a1f69(0xa9)),auth=require(a0_0x5a1f69(0xb1));router[a0_0x5a1f69(0xd0)]('/',async(_0x11ec7e,_0x5c4e27)=>{const _0xc9a653=a0_0x5a1f69;try{const _0x28f705=await master_shop['find']();_0x5c4e27[_0xc9a653(0xcd)](_0xc9a653(0xd3),{'success':_0x11ec7e[_0xc9a653(0xae)](_0xc9a653(0xbc)),'errors':_0x11ec7e[_0xc9a653(0xae)](_0xc9a653(0xd6)),'master_shop':_0x28f705});}catch(_0x1e8e80){console['log'](_0x1e8e80);}}),router[a0_0x5a1f69(0xd0)](a0_0x5a1f69(0xc3),async(_0x33d07b,_0x2b8d95)=>{const _0x5dd24f=a0_0x5a1f69;try{const _0x171032=await master_shop['find']();_0x2b8d95[_0x5dd24f(0xcd)](_0x5dd24f(0xc5),{'success':_0x33d07b['flash'](_0x5dd24f(0xbc)),'errors':_0x33d07b[_0x5dd24f(0xae)]('errors'),'master_shop':_0x171032});}catch(_0x5c010f){console['log'](_0x5c010f);}}),router['get'](a0_0x5a1f69(0xb8),async(_0x4b648d,_0x4cf8af)=>{const _0x349ebe=a0_0x5a1f69;try{const _0x135eb4=await master_shop[_0x349ebe(0xd1)]();console[_0x349ebe(0xad)](_0x349ebe(0xb3),_0x135eb4),_0x4cf8af['render'](_0x349ebe(0xd3),{'success':_0x4b648d[_0x349ebe(0xae)]('success'),'errors':_0x4b648d[_0x349ebe(0xae)]('errors'),'master_shop':_0x135eb4});}catch(_0x33c195){console[_0x349ebe(0xad)](_0x33c195);}}),router['post']('/login',async(_0x56964b,_0x23facd)=>{const _0x152f17=a0_0x5a1f69;try{const _0x48bfe1=_0x56964b[_0x152f17(0xab)][_0x152f17(0xc6)],_0x58ba32=await sing_up[_0x152f17(0xdb)]({'email':_0x48bfe1});if(!_0x58ba32)return _0x56964b[_0x152f17(0xae)](_0x152f17(0xd6),'your\x20email\x20is\x20not\x20register'),_0x23facd[_0x152f17(0xc1)](_0x152f17(0xb8));const _0x2fe7a3=await staff[_0x152f17(0xdb)]({'email':_0x58ba32[_0x152f17(0xc6)]});var _0x55ba02=_0x2fe7a3[_0x152f17(0xc0)],_0x409ad3=_0x2fe7a3[_0x152f17(0xc7)],_0x37f58d=_0x2fe7a3[_0x152f17(0xcc)],_0x29fe2d=_0x2fe7a3[_0x152f17(0xcf)];if(_0x58ba32[_0x152f17(0xd4)]=='staff'){const _0x4e3581=await staff[_0x152f17(0xdb)]({'email':_0x58ba32[_0x152f17(0xc6)]});if(_0x4e3581[_0x152f17(0xde)]==_0x152f17(0xd7))return _0x56964b[_0x152f17(0xae)](_0x152f17(0xd6),_0x152f17(0xb4)),_0x23facd['redirect']('/login');_0x55ba02=_0x4e3581[_0x152f17(0xc0)],_0x409ad3=_0x4e3581[_0x152f17(0xc7)],_0x37f58d=_0x4e3581[_0x152f17(0xcc)],_0x29fe2d=_0x4e3581[_0x152f17(0xcf)];}const _0x4c8592=_0x56964b[_0x152f17(0xab)]['password'],_0x556e28=await bcrypt[_0x152f17(0xb5)](_0x4c8592,_0x58ba32['password']);if(_0x556e28==![])return _0x56964b[_0x152f17(0xae)]('errors',_0x152f17(0xb2)),_0x23facd[_0x152f17(0xc1)](_0x152f17(0xb8));const _0x502f2f=jwt['sign']({'username':_0x58ba32['username'],'email':_0x58ba32['email'],'role':_0x58ba32[_0x152f17(0xd4)],'account_category':_0x55ba02,'sales_category':_0x409ad3,'sttaff_id':_0x37f58d,'warehouse':_0x29fe2d},process[_0x152f17(0xbd)][_0x152f17(0xd9)]);_0x23facd[_0x152f17(0xa8)](_0x152f17(0xca),_0x502f2f,{'expires':new Date(0xe677d213a700)}),_0x56964b['flash']('success',_0x152f17(0xb0)),_0x23facd[_0x152f17(0xc1)](_0x152f17(0xa7));}catch(_0x11669a){console[_0x152f17(0xad)](_0x11669a);}}),router[a0_0x5a1f69(0xd0)](a0_0x5a1f69(0xc4),async(_0x4ca53f,_0x25c070)=>{const _0x66d710=a0_0x5a1f69;try{const _0x456f79=_0x4ca53f[_0x66d710(0xc2)]['id'],_0x285ffd=await staff[_0x66d710(0xd8)]({'_id':_0x456f79});_0x285ffd[_0x66d710(0xde)]==_0x66d710(0xd7)&&(_0x4ca53f['flash'](_0x66d710(0xd6),'Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x25c070[_0x66d710(0xc1)](_0x66d710(0xdc)));const _0x3350a9=await sing_up[_0x66d710(0xdb)]({'email':_0x285ffd['email']});var _0x33eb8f=_0x285ffd[_0x66d710(0xb9)];if(_0x3350a9['role']=='staff'){const _0x5a79c1=await staff[_0x66d710(0xdb)]({'name':_0x3350a9['name']});_0x33eb8f=_0x5a79c1['warehouse_category'];}const _0x516182=jwt[_0x66d710(0xce)]({'username':_0x3350a9[_0x66d710(0xcb)],'email':_0x3350a9[_0x66d710(0xc6)],'role':_0x3350a9[_0x66d710(0xd4)],'warehouse_category':_0x33eb8f},process[_0x66d710(0xbd)][_0x66d710(0xd9)]);_0x25c070[_0x66d710(0xa8)](_0x66d710(0xca),_0x516182,{'expires':new Date(0xe677d213a700)}),_0x4ca53f['flash'](_0x66d710(0xbc),_0x66d710(0xb0)),_0x25c070[_0x66d710(0xc1)](_0x66d710(0xa7));}catch(_0x3f04ba){console[_0x66d710(0xad)](_0x3f04ba);}}),router[a0_0x5a1f69(0xd0)](a0_0x5a1f69(0xda),(_0x3e0b2a,_0x51050b)=>{const _0x53df29=a0_0x5a1f69;_0x51050b[_0x53df29(0xbf)](_0x53df29(0xca)),_0x51050b[_0x53df29(0xc1)]('/login');}),module[a0_0x5a1f69(0xaa)]=router;function a0_0x45cb(){const _0x255f8e=['secret_key','/logout','findOne','/staff/view','4254741PXYydC','status','/index','cookie','jsonwebtoken','exports','body','669122xCYVyB','log','flash','3080976CcpXie','login\x20successfully','../middleware/auth','your\x20password\x20is\x20wrong','login\x20master','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','compare','2491276TcIxPQ','1ujpmxB','/login','warehouse_category','bcryptjs','292662JGYUkV','success','env','34018990cyWLqw','clearCookie','account_category','redirect','params','/validate','/staff/:id','validate','email','type_of_acc_cat','45epewcw','7VhLFjE','jwt','username','_id','render','sign','warehouse','get','find','11rLKOdu','login','role','2290584JGEKLw','errors','Disabled','findById'];a0_0x45cb=function(){return _0x255f8e;};return a0_0x45cb();}