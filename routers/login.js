const a0_0x5ad51c=a0_0x33fe;(function(_0x24a856,_0x30c9cc){const _0x3dce70=a0_0x33fe,_0x42c31b=_0x24a856();while(!![]){try{const _0x3b7f95=parseInt(_0x3dce70(0x1b2))/0x1+-parseInt(_0x3dce70(0x1a5))/0x2+parseInt(_0x3dce70(0x1ab))/0x3+-parseInt(_0x3dce70(0x1bf))/0x4*(parseInt(_0x3dce70(0x1b1))/0x5)+parseInt(_0x3dce70(0x1be))/0x6*(-parseInt(_0x3dce70(0x1a0))/0x7)+-parseInt(_0x3dce70(0x196))/0x8*(-parseInt(_0x3dce70(0x1c3))/0x9)+-parseInt(_0x3dce70(0x1a2))/0xa*(-parseInt(_0x3dce70(0x194))/0xb);if(_0x3b7f95===_0x30c9cc)break;else _0x42c31b['push'](_0x42c31b['shift']());}catch(_0x49bb2c){_0x42c31b['push'](_0x42c31b['shift']());}}}(a0_0x326f,0xd767c));const express=require(a0_0x5ad51c(0x190)),app=express(),router=express[a0_0x5ad51c(0x1bd)](),{sing_up,staff,profile,master_shop}=require(a0_0x5ad51c(0x1aa)),bcrypt=require('bcryptjs'),jwt=require(a0_0x5ad51c(0x1a6)),auth=require(a0_0x5ad51c(0x1b6));router[a0_0x5ad51c(0x1a3)]('/',async(_0x505dd2,_0x3f516d)=>{const _0x5b3b54=a0_0x5ad51c;try{const _0x5bd0a7=await master_shop[_0x5b3b54(0x1af)]();_0x3f516d[_0x5b3b54(0x197)](_0x5b3b54(0x19d),{'success':_0x505dd2[_0x5b3b54(0x18e)]('success'),'errors':_0x505dd2[_0x5b3b54(0x18e)](_0x5b3b54(0x1b5)),'master_shop':_0x5bd0a7});}catch(_0x1c1ef3){console['log'](_0x1c1ef3);}}),router[a0_0x5ad51c(0x1a3)]('/validate',async(_0x1fbead,_0x1f422f)=>{const _0x1fb519=a0_0x5ad51c;try{const _0x118229=await master_shop[_0x1fb519(0x1af)]();_0x1f422f[_0x1fb519(0x197)](_0x1fb519(0x1ba),{'success':_0x1fbead[_0x1fb519(0x18e)](_0x1fb519(0x1a8)),'errors':_0x1fbead[_0x1fb519(0x18e)](_0x1fb519(0x1b5)),'master_shop':_0x118229});}catch(_0x215861){console['log'](_0x215861);}}),router[a0_0x5ad51c(0x1a3)](a0_0x5ad51c(0x198),async(_0x552629,_0x3faa24)=>{const _0xaae3ad=a0_0x5ad51c;try{const _0x5ab923=await master_shop['find']();console[_0xaae3ad(0x19b)]('login\x20master',_0x5ab923),_0x3faa24['render'](_0xaae3ad(0x19d),{'success':_0x552629[_0xaae3ad(0x18e)](_0xaae3ad(0x1a8)),'errors':_0x552629[_0xaae3ad(0x18e)]('errors'),'master_shop':_0x5ab923});}catch(_0x534975){console['log'](_0x534975);}}),router[a0_0x5ad51c(0x1bb)]('/login',async(_0x1e20dd,_0x49ca75)=>{const _0x3338cb=a0_0x5ad51c;try{const _0x1e37f0=_0x1e20dd[_0x3338cb(0x1c0)][_0x3338cb(0x1c1)],_0x47a1d5=await sing_up[_0x3338cb(0x19f)]({'email':_0x1e37f0});if(!_0x47a1d5)return _0x1e20dd[_0x3338cb(0x18e)](_0x3338cb(0x1b5),_0x3338cb(0x192)),_0x49ca75['redirect'](_0x3338cb(0x198));const _0xce9c21=await staff[_0x3338cb(0x19f)]({'email':_0x47a1d5['email']});var _0xf3cd65=_0xce9c21[_0x3338cb(0x1ad)],_0x3ef0fc=_0xce9c21[_0x3338cb(0x19e)],_0xd208af=_0xce9c21[_0x3338cb(0x1b9)],_0x416392=_0xce9c21[_0x3338cb(0x1a7)];if(_0x47a1d5['role']=='staff'){const _0x7ba81a=await staff[_0x3338cb(0x19f)]({'email':_0x47a1d5['email']});if(_0x7ba81a['status']==_0x3338cb(0x199))return _0x1e20dd[_0x3338cb(0x18e)](_0x3338cb(0x1b5),_0x3338cb(0x1bc)),_0x49ca75[_0x3338cb(0x1b8)](_0x3338cb(0x198));_0xf3cd65=_0x7ba81a[_0x3338cb(0x1ad)],_0x3ef0fc=_0x7ba81a['type_of_acc_cat'],_0xd208af=_0x7ba81a[_0x3338cb(0x1b9)],_0x416392=_0x7ba81a[_0x3338cb(0x1a7)];}const _0x3d7bac=_0x1e20dd['body'][_0x3338cb(0x1ac)],_0x165b92=await bcrypt[_0x3338cb(0x18d)](_0x3d7bac,_0x47a1d5['password']);if(_0x165b92==![])return _0x1e20dd[_0x3338cb(0x18e)](_0x3338cb(0x1b5),_0x3338cb(0x193)),_0x49ca75[_0x3338cb(0x1b8)](_0x3338cb(0x198));const _0x20266b=jwt[_0x3338cb(0x195)]({'username':_0x47a1d5[_0x3338cb(0x1a1)],'email':_0x47a1d5[_0x3338cb(0x1c1)],'role':_0x47a1d5[_0x3338cb(0x19c)],'account_category':_0xf3cd65,'sales_category':_0x3ef0fc,'sttaff_id':_0xd208af,'warehouse':_0x416392},process[_0x3338cb(0x1b0)][_0x3338cb(0x1a4)]);_0x49ca75[_0x3338cb(0x1ae)](_0x3338cb(0x18c),_0x20266b,{'expires':new Date(0xe677d213a700)}),_0x1e20dd[_0x3338cb(0x18e)](_0x3338cb(0x1a8),_0x3338cb(0x1b7)),_0x49ca75[_0x3338cb(0x1b8)](_0x3338cb(0x19a));}catch(_0x2a921c){console[_0x3338cb(0x19b)](_0x2a921c);}}),router[a0_0x5ad51c(0x1a3)](a0_0x5ad51c(0x1b3),async(_0x3ad641,_0x14bd9a)=>{const _0x209912=a0_0x5ad51c;try{const _0x1133c=_0x3ad641[_0x209912(0x1c2)]['id'],_0x2aac95=await staff['findById']({'_id':_0x1133c});console[_0x209912(0x19b)]('login\x20staff',_0x2aac95);const _0x4e6484=await staff[_0x209912(0x19f)]({'email':_0x2aac95[_0x209912(0x1c1)]}),_0x3fa888=await sing_up[_0x209912(0x19f)]({'email':_0x2aac95[_0x209912(0x1c1)]});var _0x59b7d2=_0x4e6484[_0x209912(0x1ad)],_0x2879c4=_0x4e6484[_0x209912(0x19e)],_0x19aae2=_0x4e6484['_id'],_0x3af75d=_0x4e6484[_0x209912(0x1a7)];if(_0x3fa888['role']==_0x209912(0x1b4)){const _0x25a306=await staff[_0x209912(0x19f)]({'email':_0x3fa888[_0x209912(0x1c1)]});if(_0x25a306[_0x209912(0x1a9)]==_0x209912(0x199))return _0x3ad641[_0x209912(0x18e)]('errors','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.'),_0x14bd9a[_0x209912(0x1b8)]('/staff/view');_0x59b7d2=_0x25a306[_0x209912(0x1ad)],_0x2879c4=_0x25a306[_0x209912(0x19e)],_0x19aae2=_0x25a306['_id'],_0x3af75d=_0x25a306[_0x209912(0x1a7)];}const _0x38bba7=jwt['sign']({'username':_0x3fa888[_0x209912(0x1a1)],'email':_0x3fa888[_0x209912(0x1c1)],'role':_0x3fa888[_0x209912(0x19c)],'account_category':_0x59b7d2,'sales_category':_0x2879c4,'sttaff_id':_0x19aae2,'warehouse':_0x3af75d},process[_0x209912(0x1b0)][_0x209912(0x1a4)]);_0x14bd9a['cookie'](_0x209912(0x18c),_0x38bba7,{'expires':new Date(0xe677d213a700)}),_0x3ad641[_0x209912(0x18e)](_0x209912(0x1a8),_0x209912(0x1b7)),_0x14bd9a[_0x209912(0x1b8)]('/index');}catch(_0x4c97dc){console['log'](_0x4c97dc);}}),router[a0_0x5ad51c(0x1a3)](a0_0x5ad51c(0x191),(_0x32ce32,_0x242fb1)=>{const _0x3b608f=a0_0x5ad51c;_0x242fb1[_0x3b608f(0x18f)](_0x3b608f(0x18c)),_0x242fb1['redirect']('/login');}),module['exports']=router;function a0_0x33fe(_0x6b5c36,_0x4678d3){const _0x326f50=a0_0x326f();return a0_0x33fe=function(_0x33fe47,_0x44d4f1){_0x33fe47=_0x33fe47-0x18c;let _0x198a85=_0x326f50[_0x33fe47];return _0x198a85;},a0_0x33fe(_0x6b5c36,_0x4678d3);}function a0_0x326f(){const _0x182efa=['get','secret_key','1650810gzkAZG','jsonwebtoken','warehouse','success','status','../models/all_models','1988352SqOYdA','password','account_category','cookie','find','env','5290xXaBGf','899814aEQRXi','/staff/:id','staff','errors','../middleware/auth','login\x20successfully','redirect','_id','validate','post','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','Router','8828682BiiROU','3104pFEIcL','body','email','params','758169qxqDyn','jwt','compare','flash','clearCookie','express','/logout','your\x20email\x20is\x20not\x20register','your\x20password\x20is\x20wrong','1362449OdkPVV','sign','8XQPkSK','render','/login','Disabled','/index','log','role','login','type_of_acc_cat','findOne','7aarVpB','username','190HCeFoX'];a0_0x326f=function(){return _0x182efa;};return a0_0x326f();}