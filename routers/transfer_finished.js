function a0_0x1085(_0x59b231,_0x4c5268){var _0x2c0c05=a0_0x2c0c();return a0_0x1085=function(_0x1085a4,_0x3efed6){_0x1085a4=_0x1085a4-0x184;var _0x492d63=_0x2c0c05[_0x1085a4];return _0x492d63;},a0_0x1085(_0x59b231,_0x4c5268);}var a0_0x29d042=a0_0x1085;function a0_0x2c0c(){var _0x1466a0=['ToRoomAssigned','$_id','246BoOIoV','TRF-','nodemailer','$product_details.expiry_date','to_room_name','/view','from_quantity','TRFF-','LOG-TRF-','padStart','findById','to_room','string','8UIoBHx','maxProducts','from_invoice','$product_details.level','$product_details.maxPerUnit','product_code','/barcode_scanner','exports','FROZEN\x20GOODS','own','$product_details.product_code','To\x20An\x20error\x20occurred\x20while\x20saving\x20data.','location2location','/picking_list/PDF_transfer/','</td>','length','undefined','prod_cat','staff','map','from_bay','$product_details','json','finalize','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','getMonth','random','$from_warehouse','$product_details.bay','getFullYear','from_prod_level','message','German','$product_details.secondary_code','$product_details.storage','log','logs','redirect','793244vIqHew','\x20<=>\x20','$product','split','email','choos_transfer_logs','transfer_finished_logs','product_code3','secondary_code','findOne','$room','$to_warehouse','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','from_prod_qty','to_bay','batch_code','789260gIaArR','$product_details.batch_code','to_prod_qty','secondary_unit','/view/:id','/view_logs','</tr>','/transfer_finished/view','params','$product_details.rack','<tr>','MaxStocks_data2','$product_details.invoice','match','$product_details.secondary_unit','role','3310TwkKWh','back','MaxStocks_data','New_Qty_Converted','unit','Arabic\x20(ae)','$product_details._id','French','Transfer\x20Finalize\x20Successfully','toString','$product_details.product_stock','Spanish','language','primary_code','abs','transfer_finished','max','user','render','error','45665620VBDWrg','English','transfer_data','Hindi','Enabled','to_floorlevel','English\x20(US)','invoice_init','../models/all_models','Arabic','/transfer_finished/preview/','1934808WbCPYk','find','../middleware/auth','Chinese','id_transaction','An\x20error\x20occurred.','maxPerUnit','bin2bin','success','here2','invoice','RoomAssigned','/view/add_transfer','flash','concat','$invoice','/preview/:id','forEach','to_prod_level','To_invoice','/transfer/view','product','137885yOScXM','product_stock','Finished\x20Goods','warehouse','slice','$product_details.maxProducts','primary_unit','/CheckingWarehouse','bay','$product_details.unit','/view/addlog','An\x20error\x20occurred\x20while\x20saving\x20data.','Ambient','$product_details.production_date','edit_transfer_finished','4935632KDQzio','$product.to_room_name','$product_details.product_name','type_of_process','to_quantity','date','product_name','post','then','express','product_date','Product\x20Transfer\x20successfully','get','all','aggregate','/view/add_transfer_logs','floor','from_warehouse','Transfer\x20Edit\x20Successfully','_id','Portuguese','expiry_date','production_date','errors','$date','to_warehouse','filter','True','$product_details.type','body','/view/add_transfer_loc','prod_name','save','Portuguese\x20(BR)','/view/choose','$product_details.primary_code','$product_details.floorlevel','Rack\x201','updateOne','There\x27s\x20a\x20error\x20in\x20this\x20transaction','choos_transfer','status','catch','7AMtkgq','$finalize','$name','/view/choose_logs','product_details','from_room','from_level','$product.from_room_name','to_level','from_prod_level2','from_room_name','17811BizLQy','push'];a0_0x2c0c=function(){return _0x1466a0;};return a0_0x2c0c();}(function(_0xed2a26,_0x2e2d60){var _0x9228b5=a0_0x1085,_0x33c87e=_0xed2a26();while(!![]){try{var _0x3986ee=parseInt(_0x9228b5(0x1d2))/0x1+-parseInt(_0x9228b5(0x1c2))/0x2+parseInt(_0x9228b5(0x201))/0x3*(-parseInt(_0x9228b5(0x19c))/0x4)+parseInt(_0x9228b5(0x217))/0x5*(-parseInt(_0x9228b5(0x18f))/0x6)+-parseInt(_0x9228b5(0x251))/0x7*(parseInt(_0x9228b5(0x226))/0x8)+parseInt(_0x9228b5(0x18b))/0x9*(-parseInt(_0x9228b5(0x1e2))/0xa)+parseInt(_0x9228b5(0x1f6))/0xb;if(_0x3986ee===_0x2e2d60)break;else _0x33c87e['push'](_0x33c87e['shift']());}catch(_0x2e23a0){_0x33c87e['push'](_0x33c87e['shift']());}}}(a0_0x2c0c,0xcfe46));const express=require(a0_0x29d042(0x22f)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,invoice_for_transfer,transfers_logs}=require(a0_0x29d042(0x1fe)),auth=require(a0_0x29d042(0x203)),users=require('../public/language/languages.json'),nodemailer=require(a0_0x29d042(0x191));router[a0_0x29d042(0x232)](a0_0x29d042(0x194),auth,async(_0x5069fa,_0x437658)=>{var _0x335e28=a0_0x29d042;try{const {username:_0x4efe8f,email:_0x5872e3,role:_0x22e3b4}=_0x5069fa[_0x335e28(0x1f3)],_0x5da76c=_0x5069fa['user'],_0x197f22=await profile[_0x335e28(0x1cb)]({'email':_0x5da76c[_0x335e28(0x1c6)]}),_0x23c4dc=await master_shop['find']();let _0x3ab1f0;if(_0x5da76c[_0x335e28(0x1e1)]=='staff'){const _0x59eff5=await staff[_0x335e28(0x1cb)]({'email':_0x5da76c[_0x335e28(0x1c6)]});_0x3ab1f0=await transfers_finished[_0x335e28(0x202)]({'from_warehouse':_0x59eff5[_0x335e28(0x21a)]});}else _0x3ab1f0=await transfers_finished[_0x335e28(0x234)]([{'$match':{'type_of_transaction':_0x335e28(0x1a5)}},{'$unwind':_0x335e28(0x1c4)},{'$group':{'_id':_0x335e28(0x18e),'invoice':{'$first':_0x335e28(0x210)},'date':{'$first':_0x335e28(0x23e)},'from_warehouse':{'$first':'$from_warehouse'},'to_warehouse':{'$first':_0x335e28(0x1cd)},'from_room_name':{'$addToSet':_0x335e28(0x187)},'to_room_name':{'$addToSet':'$product.to_room_name'},'finalize':{'$first':_0x335e28(0x252)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x23c4dc[0x0][_0x335e28(0x1ee)]==_0x335e28(0x1fc))var _0x341335=users[_0x335e28(0x1f7)];else{if(_0x23c4dc[0x0]['language']==_0x335e28(0x1f9))var _0x341335=users[_0x335e28(0x1f9)];else{if(_0x23c4dc[0x0][_0x335e28(0x1ee)]=='German')var _0x341335=users[_0x335e28(0x1bc)];else{if(_0x23c4dc[0x0]['language']=='Spanish')var _0x341335=users[_0x335e28(0x1ed)];else{if(_0x23c4dc[0x0][_0x335e28(0x1ee)]==_0x335e28(0x1e9))var _0x341335=users[_0x335e28(0x1e9)];else{if(_0x23c4dc[0x0]['language']=='Portuguese\x20(BR)')var _0x341335=users['Portuguese'];else{if(_0x23c4dc[0x0][_0x335e28(0x1ee)]==_0x335e28(0x204))var _0x341335=users[_0x335e28(0x204)];else{if(_0x23c4dc[0x0]['language']==_0x335e28(0x1e7))var _0x341335=users[_0x335e28(0x1ff)];}}}}}}}_0x437658['render'](_0x335e28(0x1f1),{'success':_0x5069fa[_0x335e28(0x20e)](_0x335e28(0x209)),'errors':_0x5069fa[_0x335e28(0x20e)](_0x335e28(0x23d)),'role':_0x5da76c,'profile':_0x197f22,'master_shop':_0x23c4dc,'transfer':_0x3ab1f0,'language':_0x341335});}catch(_0x2328fa){console['log'](_0x2328fa);}}),router[a0_0x29d042(0x232)](a0_0x29d042(0x1d7),auth,async(_0x1bd3a7,_0x5b0332)=>{var _0x142068=a0_0x29d042;try{const {username:_0x323a93,email:_0x46947b,role:_0x48196e}=_0x1bd3a7[_0x142068(0x1f3)],_0x2999d7=_0x1bd3a7[_0x142068(0x1f3)],_0x5f4753=await profile['findOne']({'email':_0x2999d7[_0x142068(0x1c6)]}),_0x120a68=await master_shop['find']();let _0x32b273;if(_0x2999d7['role']==_0x142068(0x1ae)){const _0x3a242b=await staff[_0x142068(0x1cb)]({'email':_0x2999d7['email']});_0x32b273=await transfers_finished[_0x142068(0x202)]({'from_warehouse':_0x3a242b['warehouse']});}else _0x32b273=await transfers_finished[_0x142068(0x234)]([{'$match':{'type_of_transaction':_0x142068(0x1c0)}},{'$unwind':'$product'},{'$group':{'_id':'$_id','invoice':{'$first':'$invoice'},'date':{'$first':_0x142068(0x23e)},'from_warehouse':{'$first':_0x142068(0x1b7)},'to_warehouse':{'$first':_0x142068(0x1cd)},'from_room_name':{'$addToSet':_0x142068(0x187)},'to_room_name':{'$addToSet':_0x142068(0x227)},'finalize':{'$first':_0x142068(0x252)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x120a68[0x0]['language']==_0x142068(0x1fc))var _0x5d31cf=users[_0x142068(0x1f7)];else{if(_0x120a68[0x0][_0x142068(0x1ee)]==_0x142068(0x1f9))var _0x5d31cf=users[_0x142068(0x1f9)];else{if(_0x120a68[0x0][_0x142068(0x1ee)]==_0x142068(0x1bc))var _0x5d31cf=users[_0x142068(0x1bc)];else{if(_0x120a68[0x0][_0x142068(0x1ee)]==_0x142068(0x1ed))var _0x5d31cf=users[_0x142068(0x1ed)];else{if(_0x120a68[0x0][_0x142068(0x1ee)]==_0x142068(0x1e9))var _0x5d31cf=users[_0x142068(0x1e9)];else{if(_0x120a68[0x0][_0x142068(0x1ee)]==_0x142068(0x247))var _0x5d31cf=users[_0x142068(0x23a)];else{if(_0x120a68[0x0][_0x142068(0x1ee)]==_0x142068(0x204))var _0x5d31cf=users[_0x142068(0x204)];else{if(_0x120a68[0x0][_0x142068(0x1ee)]=='Arabic\x20(ae)')var _0x5d31cf=users[_0x142068(0x1ff)];}}}}}}}_0x5b0332[_0x142068(0x1f4)](_0x142068(0x1c8),{'success':_0x1bd3a7[_0x142068(0x20e)]('success'),'errors':_0x1bd3a7['flash']('errors'),'role':_0x2999d7,'profile':_0x5f4753,'master_shop':_0x120a68,'transfer':_0x32b273,'language':_0x5d31cf});}catch(_0xef2c66){console[_0x142068(0x1bf)](_0xef2c66);}});async function getRandom8DigitNumber(){var _0x5a13cd=a0_0x29d042;const _0x262490=0x989680,_0x54092b=0x5f5e0ff,_0x66b8cb=Math[_0x5a13cd(0x236)](Math[_0x5a13cd(0x1b6)]()*(_0x54092b-_0x262490+0x1))+_0x262490;var _0x5e4c9a;const _0x59d719=await transfers_finished[_0x5a13cd(0x1cb)]({'invoice':'TRFF-'+_0x66b8cb});return _0x59d719&&_0x59d719[_0x5a13cd(0x1ab)]>0x0?_0x5e4c9a=_0x5a13cd(0x196)+_0x66b8cb:_0x5e4c9a=_0x5a13cd(0x196)+_0x66b8cb,_0x5e4c9a;}router[a0_0x29d042(0x232)]('/view/add_transfer',auth,async(_0x153fd3,_0x49444e)=>{var _0x38acc4=a0_0x29d042;try{const {username:_0x2a6cc6,email:_0x236f4b,role:_0x59a648}=_0x153fd3['user'],_0x3d46c3=_0x153fd3[_0x38acc4(0x1f3)],_0x14e0bc=await profile['findOne']({'email':_0x3d46c3[_0x38acc4(0x1c6)]}),_0x10f58a=await master_shop[_0x38acc4(0x202)]();let _0x59f2a6;if(_0x3d46c3[_0x38acc4(0x1e1)]==_0x38acc4(0x1ae)){const _0x58497a=await staff[_0x38acc4(0x1cb)]({'email':_0x3d46c3[_0x38acc4(0x1c6)]});_0x59f2a6=await warehouse[_0x38acc4(0x234)]([{'$match':{'status':'Enabled','name':_0x58497a['warehouse']}},{'$group':{'_id':_0x38acc4(0x253),'name':{'$first':'$name'}}}]);}else _0x59f2a6=await warehouse[_0x38acc4(0x234)]([{'$match':{'status':_0x38acc4(0x1fa)}},{'$group':{'_id':'$name','name':{'$first':_0x38acc4(0x253)}}}]);const _0x4fffe8=await transfers_finished['find']({}),_0x2a5253=_0x4fffe8['length']+0x1,_0x33ce32=_0x38acc4(0x196)+_0x2a5253[_0x38acc4(0x1eb)]()[_0x38acc4(0x198)](0x5,'0');if(_0x10f58a[0x0][_0x38acc4(0x1ee)]=='English\x20(US)')var _0x4331e8=users['English'];else{if(_0x10f58a[0x0][_0x38acc4(0x1ee)]=='Hindi')var _0x4331e8=users[_0x38acc4(0x1f9)];else{if(_0x10f58a[0x0][_0x38acc4(0x1ee)]==_0x38acc4(0x1bc))var _0x4331e8=users[_0x38acc4(0x1bc)];else{if(_0x10f58a[0x0][_0x38acc4(0x1ee)]==_0x38acc4(0x1ed))var _0x4331e8=users[_0x38acc4(0x1ed)];else{if(_0x10f58a[0x0][_0x38acc4(0x1ee)]==_0x38acc4(0x1e9))var _0x4331e8=users[_0x38acc4(0x1e9)];else{if(_0x10f58a[0x0][_0x38acc4(0x1ee)]==_0x38acc4(0x247))var _0x4331e8=users['Portuguese'];else{if(_0x10f58a[0x0]['language']=='Chinese')var _0x4331e8=users[_0x38acc4(0x204)];else{if(_0x10f58a[0x0]['language']=='Arabic\x20(ae)')var _0x4331e8=users[_0x38acc4(0x1ff)];}}}}}}}const _0x4f44dd=getRandom8DigitNumber();_0x4f44dd['then'](_0x12d358=>{var _0x4e8c9b=_0x38acc4;_0x49444e['render']('add_transfer_finished',{'success':_0x153fd3[_0x4e8c9b(0x20e)](_0x4e8c9b(0x209)),'errors':_0x153fd3[_0x4e8c9b(0x20e)]('errors'),'role':_0x3d46c3,'profile':_0x14e0bc,'master_shop':_0x10f58a,'warehouse':_0x59f2a6,'language':_0x4331e8,'invoice':_0x12d358});})['catch'](_0x429ecc=>{var _0x4b741b=_0x38acc4;_0x153fd3['flash'](_0x4b741b(0x23d),_0x4b741b(0x24d)),_0x49444e[_0x4b741b(0x1c1)]('/transfer/view');});}catch(_0x7cf9ec){console[_0x38acc4(0x1bf)](_0x7cf9ec);}}),router[a0_0x29d042(0x232)](a0_0x29d042(0x248),auth,async(_0x51c3c8,_0xa9ea4d)=>{var _0x22968d=a0_0x29d042;try{const {username:_0x3e8449,email:_0x56260c,role:_0x89f620}=_0x51c3c8[_0x22968d(0x1f3)],_0x57bdce=_0x51c3c8[_0x22968d(0x1f3)],_0x488289=await profile['findOne']({'email':_0x57bdce[_0x22968d(0x1c6)]}),_0x2aba34=await master_shop['find']();let _0x285339;if(_0x57bdce['role']==_0x22968d(0x1ae)){const _0x2bce4f=await staff[_0x22968d(0x1cb)]({'email':_0x57bdce[_0x22968d(0x1c6)]});_0x285339=await warehouse[_0x22968d(0x234)]([{'$match':{'status':'Enabled','name':_0x2bce4f[_0x22968d(0x21a)]}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);}else _0x285339=await warehouse['aggregate']([{'$match':{'status':_0x22968d(0x1fa)}},{'$group':{'_id':_0x22968d(0x253),'name':{'$first':_0x22968d(0x253)}}}]);const _0x35edcf=await transfers_finished[_0x22968d(0x202)]({}),_0xba620e=_0x35edcf[_0x22968d(0x1ab)]+0x1,_0x52df96=_0x22968d(0x196)+_0xba620e[_0x22968d(0x1eb)]()[_0x22968d(0x198)](0x5,'0');if(_0x2aba34[0x0][_0x22968d(0x1ee)]==_0x22968d(0x1fc))var _0x585497=users[_0x22968d(0x1f7)];else{if(_0x2aba34[0x0][_0x22968d(0x1ee)]==_0x22968d(0x1f9))var _0x585497=users['Hindi'];else{if(_0x2aba34[0x0][_0x22968d(0x1ee)]==_0x22968d(0x1bc))var _0x585497=users[_0x22968d(0x1bc)];else{if(_0x2aba34[0x0]['language']==_0x22968d(0x1ed))var _0x585497=users[_0x22968d(0x1ed)];else{if(_0x2aba34[0x0][_0x22968d(0x1ee)]==_0x22968d(0x1e9))var _0x585497=users['French'];else{if(_0x2aba34[0x0][_0x22968d(0x1ee)]==_0x22968d(0x247))var _0x585497=users[_0x22968d(0x23a)];else{if(_0x2aba34[0x0][_0x22968d(0x1ee)]==_0x22968d(0x204))var _0x585497=users[_0x22968d(0x204)];else{if(_0x2aba34[0x0][_0x22968d(0x1ee)]=='Arabic\x20(ae)')var _0x585497=users[_0x22968d(0x1ff)];}}}}}}}const _0x595be1=getRandom8DigitNumber();_0x595be1['then'](_0x16f804=>{var _0x39ccf0=_0x22968d;_0xa9ea4d[_0x39ccf0(0x1f4)](_0x39ccf0(0x24e),{'success':_0x51c3c8[_0x39ccf0(0x20e)](_0x39ccf0(0x209)),'errors':_0x51c3c8[_0x39ccf0(0x20e)](_0x39ccf0(0x23d)),'role':_0x57bdce,'profile':_0x488289,'master_shop':_0x2aba34,'warehouse':_0x285339,'language':_0x585497,'invoice':_0x16f804});})['catch'](_0x5c334b=>{var _0xbd6dad=_0x22968d;_0x51c3c8[_0xbd6dad(0x20e)]('errors',_0xbd6dad(0x24d)),_0xa9ea4d[_0xbd6dad(0x1c1)](_0xbd6dad(0x215));});}catch(_0x4129d4){console[_0x22968d(0x1bf)](_0x4129d4);}}),router[a0_0x29d042(0x232)](a0_0x29d042(0x254),auth,async(_0x1f97a5,_0x38ddf1)=>{var _0x126d9f=a0_0x29d042;try{const {username:_0x24a247,email:_0x138517,role:_0x1ffdfc}=_0x1f97a5[_0x126d9f(0x1f3)],_0x380fe3=_0x1f97a5[_0x126d9f(0x1f3)],_0x1a7fc4=await profile[_0x126d9f(0x1cb)]({'email':_0x380fe3[_0x126d9f(0x1c6)]}),_0x46db22=await master_shop[_0x126d9f(0x202)]();let _0x3de955;if(_0x380fe3[_0x126d9f(0x1e1)]=='staff'){const _0x5a6c06=await staff[_0x126d9f(0x1cb)]({'email':_0x380fe3[_0x126d9f(0x1c6)]});_0x3de955=await warehouse[_0x126d9f(0x234)]([{'$match':{'status':_0x126d9f(0x1fa),'name':_0x5a6c06['warehouse']}},{'$group':{'_id':_0x126d9f(0x253),'name':{'$first':_0x126d9f(0x253)}}}]);}else _0x3de955=await warehouse[_0x126d9f(0x234)]([{'$match':{'status':_0x126d9f(0x1fa)}},{'$group':{'_id':_0x126d9f(0x253),'name':{'$first':'$name'}}}]);const _0x30dd8c=await transfers_finished[_0x126d9f(0x202)]({}),_0x1c8990=_0x30dd8c[_0x126d9f(0x1ab)]+0x1,_0x28f6e3='TRFF-'+_0x1c8990[_0x126d9f(0x1eb)]()['padStart'](0x5,'0');if(_0x46db22[0x0]['language']==_0x126d9f(0x1fc))var _0x75d31e=users['English'];else{if(_0x46db22[0x0][_0x126d9f(0x1ee)]==_0x126d9f(0x1f9))var _0x75d31e=users[_0x126d9f(0x1f9)];else{if(_0x46db22[0x0][_0x126d9f(0x1ee)]==_0x126d9f(0x1bc))var _0x75d31e=users[_0x126d9f(0x1bc)];else{if(_0x46db22[0x0][_0x126d9f(0x1ee)]==_0x126d9f(0x1ed))var _0x75d31e=users[_0x126d9f(0x1ed)];else{if(_0x46db22[0x0]['language']==_0x126d9f(0x1e9))var _0x75d31e=users[_0x126d9f(0x1e9)];else{if(_0x46db22[0x0]['language']==_0x126d9f(0x247))var _0x75d31e=users[_0x126d9f(0x23a)];else{if(_0x46db22[0x0][_0x126d9f(0x1ee)]==_0x126d9f(0x204))var _0x75d31e=users[_0x126d9f(0x204)];else{if(_0x46db22[0x0][_0x126d9f(0x1ee)]==_0x126d9f(0x1e7))var _0x75d31e=users[_0x126d9f(0x1ff)];}}}}}}}const _0x8a184a=getRandom8DigitNumber();_0x8a184a['then'](_0x5415a2=>{var _0x5072d9=_0x126d9f;_0x38ddf1[_0x5072d9(0x1f4)](_0x5072d9(0x1c7),{'success':_0x1f97a5[_0x5072d9(0x20e)](_0x5072d9(0x209)),'errors':_0x1f97a5[_0x5072d9(0x20e)]('errors'),'role':_0x380fe3,'profile':_0x1a7fc4,'master_shop':_0x46db22,'warehouse':_0x3de955,'language':_0x75d31e,'invoice':_0x5415a2});})['catch'](_0x1bb382=>{var _0x596e72=_0x126d9f;_0x1f97a5['flash']('errors',_0x596e72(0x24d)),_0x38ddf1['redirect'](_0x596e72(0x215));});}catch(_0x5090c8){console[_0x126d9f(0x1bf)](_0x5090c8);}}),router['post'](a0_0x29d042(0x235),auth,async(_0x1f66b9,_0xc6383b)=>{var _0x4a7eff=a0_0x29d042;try{const {date:_0x4de36b,from_warehouse:_0x881c0b,FromRoom_name:_0x5296e6,to_warehouse:_0xb6befe,ToRoom_name:_0x2553b6,prod_name:_0x2ad029,from_prod_qty:_0xcafa74,from_prod_level:_0x4f91cd,from_prod_isle:_0x3c555a,from_prod_pallet:_0x194b5c,to_prod_qty:_0x5e6c7b,to_prod_level:_0x2d3223,to_prod_isle:_0x51d5a6,to_prod_pallet:_0x35c3a1,primary_code:_0x20c651,secondary_code:_0x128a8a,product_code3:_0x39ef15,note:_0x302a13,MaxStocks_data2:_0x4b4222,invoice:_0x5850fd,expiry_date:_0x3dba42,PO_number:_0x54073c,ReqBy:_0x5e13ab,dateofreq:_0x27e1d9,typeservicesData:_0x1c41d5,destination:_0x338da2,deliverydate:_0x27374e,driver:_0x1d6500,plate:_0x1d901b,van:_0x40a16e,DRSI:_0x40de68,typevehicle:_0x1f7815,TSU:_0x47fb5b,TFU:_0x5c86ba}=_0x1f66b9[_0x4a7eff(0x243)];if(typeof _0x2ad029==_0x4a7eff(0x19b))var _0x4b9b7c=[_0x1f66b9[_0x4a7eff(0x243)]['prod_name']],_0x190b8f=[_0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1cf)]],_0x519d71=[_0x1f66b9['body']['from_prod_level2']],_0x37285c=[_0x1f66b9['body'][_0x4a7eff(0x1e5)]],_0x33a0f5=[_0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x213)]],_0xb0fd4b=[_0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1ef)]],_0x5deb2e=[_0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1ca)]],_0x3a899a=[_0x1f66b9['body'][_0x4a7eff(0x1c9)]],_0x4c24cb=[_0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1dd)]],_0x350692=[_0x1f66b9[_0x4a7eff(0x243)]['primary_unit']],_0x106a14=[_0x1f66b9['body'][_0x4a7eff(0x1d5)]],_0x4e364c=[_0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1d1)]],_0x2afded=[_0x1f66b9['body'][_0x4a7eff(0x23b)]],_0x20c527=[_0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x230)]],_0x534973=[_0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1e4)]],_0x39d961=[_0x1f66b9[_0x4a7eff(0x243)]['maxPerUnit']],_0x50421a=[_0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1ad)]],_0x2fdc42=[_0x1f66b9[_0x4a7eff(0x243)]['RoomAssigned']],_0x1e7591=[_0x1f66b9['body'][_0x4a7eff(0x18d)]],_0x367804=[_0x1f66b9[_0x4a7eff(0x243)]['from_invoice']],_0x41fcf8=[_0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x205)]];else var _0x4b9b7c=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x245)]],_0x190b8f=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1cf)]],_0x519d71=[..._0x1f66b9['body'][_0x4a7eff(0x189)]],_0x37285c=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1e5)]],_0x33a0f5=[..._0x1f66b9['body'][_0x4a7eff(0x213)]],_0xb0fd4b=[..._0x1f66b9[_0x4a7eff(0x243)]['primary_code']],_0x5deb2e=[..._0x1f66b9[_0x4a7eff(0x243)]['secondary_code']],_0x3a899a=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1c9)]],_0x4c24cb=[..._0x1f66b9[_0x4a7eff(0x243)]['MaxStocks_data2']],_0x350692=[..._0x1f66b9['body'][_0x4a7eff(0x21d)]],_0x106a14=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1d5)]],_0x4e364c=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1d1)]],_0x2afded=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x23b)]],_0x20c527=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x230)]],_0x534973=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1e4)]],_0x39d961=[..._0x1f66b9['body'][_0x4a7eff(0x207)]],_0x50421a=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x1ad)]],_0x2fdc42=[..._0x1f66b9['body'][_0x4a7eff(0x20c)]],_0x1e7591=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x18d)]],_0x367804=[..._0x1f66b9[_0x4a7eff(0x243)][_0x4a7eff(0x19e)]],_0x41fcf8=[..._0x1f66b9['body']['id_transaction']];const _0x34bbc4=_0x4b9b7c[_0x4a7eff(0x1af)](_0x8bad8d=>{return _0x8bad8d={'product_name':_0x8bad8d};});_0x190b8f[_0x4a7eff(0x212)]((_0x1dd845,_0x4c2ca5)=>{_0x34bbc4[_0x4c2ca5]['from_quantity']=_0x1dd845;}),_0x519d71['forEach']((_0x59e959,_0x455ce4)=>{var _0x18c8be=_0x4a7eff,_0x425ac8=_0x59e959[_0x18c8be(0x1df)](/[A-Za-z]+/)[0x0],_0x4de545=parseInt(_0x59e959[_0x18c8be(0x1df)](/\d+/)[0x0]);_0x34bbc4[_0x455ce4][_0x18c8be(0x1b0)]=_0x4de545,_0x34bbc4[_0x455ce4][_0x18c8be(0x186)]=_0x425ac8;}),_0x41fcf8[_0x4a7eff(0x212)]((_0x51fc8a,_0x35ec07)=>{var _0x8910b8=_0x4a7eff;_0x34bbc4[_0x35ec07][_0x8910b8(0x205)]=_0x51fc8a;}),_0x367804['forEach']((_0x727839,_0x27fad4)=>{var _0x43f2cd=_0x4a7eff;_0x34bbc4[_0x27fad4][_0x43f2cd(0x19e)]=_0x727839;}),_0x37285c[_0x4a7eff(0x212)]((_0x175646,_0x192e43)=>{var _0x12ccaf=_0x4a7eff;_0x34bbc4[_0x192e43][_0x12ccaf(0x22a)]=_0x175646;}),_0x33a0f5[_0x4a7eff(0x212)]((_0x4c8c48,_0x492168)=>{var _0x5bbf70=_0x4a7eff,_0x485c28=_0x4c8c48['match'](/[A-Za-z]+/)[0x0],_0x2dfa12=parseInt(_0x4c8c48[_0x5bbf70(0x1df)](/\d+/)[0x0]);_0x34bbc4[_0x492168]['to_level']=_0x485c28,_0x34bbc4[_0x492168][_0x5bbf70(0x1d0)]=_0x2dfa12;}),_0xb0fd4b[_0x4a7eff(0x212)]((_0x2061ba,_0xaada3a)=>{var _0x209db6=_0x4a7eff;_0x34bbc4[_0xaada3a][_0x209db6(0x1ef)]=_0x2061ba;}),_0x5deb2e[_0x4a7eff(0x212)]((_0x196d78,_0x3f57cd)=>{var _0xe049a2=_0x4a7eff;_0x34bbc4[_0x3f57cd][_0xe049a2(0x1ca)]=_0x196d78;}),_0x3a899a[_0x4a7eff(0x212)]((_0x14d51e,_0x238776)=>{var _0x407f7d=_0x4a7eff;_0x34bbc4[_0x238776][_0x407f7d(0x1a1)]=_0x14d51e;}),_0x4c24cb[_0x4a7eff(0x212)]((_0x1f60e0,_0x59c1c4)=>{var _0x2c65d9=_0x4a7eff;_0x34bbc4[_0x59c1c4][_0x2c65d9(0x19d)]=_0x1f60e0;}),_0x350692[_0x4a7eff(0x212)]((_0x7c9286,_0x529fe4)=>{var _0x216d01=_0x4a7eff;_0x34bbc4[_0x529fe4][_0x216d01(0x1e6)]=_0x7c9286;}),_0x106a14[_0x4a7eff(0x212)]((_0x369e53,_0x1cffab)=>{var _0x441074=_0x4a7eff;_0x34bbc4[_0x1cffab][_0x441074(0x1d5)]=_0x369e53;}),_0x4e364c[_0x4a7eff(0x212)]((_0x266b1b,_0x20f56b)=>{var _0x276d76=_0x4a7eff;_0x34bbc4[_0x20f56b][_0x276d76(0x1d1)]=_0x266b1b;}),_0x2afded['forEach']((_0x247865,_0x1360d3)=>{var _0x3c0571=_0x4a7eff;_0x34bbc4[_0x1360d3][_0x3c0571(0x23b)]=_0x247865;}),_0x20c527['forEach']((_0x3b3692,_0x4ee491)=>{_0x34bbc4[_0x4ee491]['production_date']=_0x3b3692;}),_0x534973[_0x4a7eff(0x212)]((_0x41a650,_0x38d83c)=>{var _0x36a1bb=_0x4a7eff;_0x34bbc4[_0x38d83c][_0x36a1bb(0x19d)]=_0x41a650;}),_0x39d961['forEach']((_0x31b942,_0x11ac19)=>{var _0x386e05=_0x4a7eff;_0x34bbc4[_0x11ac19][_0x386e05(0x207)]=_0x31b942;}),_0x50421a[_0x4a7eff(0x212)]((_0x34afeb,_0x1ea597)=>{var _0xf8f62c=_0x4a7eff;_0x34bbc4[_0x1ea597][_0xf8f62c(0x1ad)]=_0x34afeb;}),_0x2fdc42[_0x4a7eff(0x212)]((_0x7ab018,_0x1e72c2)=>{var _0x1c26cf=_0x4a7eff;_0x34bbc4[_0x1e72c2][_0x1c26cf(0x18a)]=_0x7ab018;}),_0x1e7591['forEach']((_0x1848e0,_0x2e0f2b)=>{var _0x43cf6a=_0x4a7eff;_0x34bbc4[_0x2e0f2b][_0x43cf6a(0x193)]=_0x1848e0;});const _0xddba14=_0x34bbc4[_0x4a7eff(0x240)](_0x38bdeb=>_0x38bdeb[_0x4a7eff(0x22a)]!=='0'&&_0x38bdeb[_0x4a7eff(0x22a)]!==''||_0x38bdeb[_0x4a7eff(0x1fb)]!=='0'&&_0x38bdeb[_0x4a7eff(0x1fb)]!=='');var _0x355b58=0x0;_0xddba14['forEach'](_0x25c6f3=>{var _0x10dfa6=_0x4a7eff;parseInt(_0x25c6f3[_0x10dfa6(0x195)])<parseInt(_0x25c6f3[_0x10dfa6(0x22a)])&&_0x355b58++;});if(_0x355b58!=0x0)return _0x1f66b9[_0x4a7eff(0x20e)](_0x4a7eff(0x23d),_0x4a7eff(0x1ce)),_0xc6383b[_0x4a7eff(0x1c1)]('back');const _0x17c244=new transfers_logs();await _0x17c244['save']();for(let _0x14e357=0x0;_0x14e357<=_0x1e7591[_0x4a7eff(0x1ab)]-0x1;_0x14e357++){_0x34bbc4[_0x14e357][_0x4a7eff(0x214)]=_0x4a7eff(0x197)+_0x17c244[_0x4a7eff(0x1fd)][_0x4a7eff(0x1eb)]()['padStart'](0x8,'0');}const _0x142b44=new transfers_finished({'date':_0x4de36b,'from_warehouse':_0x881c0b,'to_warehouse':_0x881c0b,'product':_0xddba14,'note':_0x302a13,'invoice':_0x4a7eff(0x197)+_0x17c244[_0x4a7eff(0x1fd)][_0x4a7eff(0x1eb)]()['padStart'](0x8,'0'),'type_of_process':'bin2bin','type_of_transaction':_0x4a7eff(0x1c0),'PO_number':_0x54073c,'RequestedBy':_0x5e13ab,'DateofRequest':_0x27e1d9,'typeservices':_0x1c41d5,'destination':_0x338da2,'deliverydate':_0x27374e,'driver':_0x1d6500,'plate':_0x1d901b,'van':_0x40a16e,'DRSI':_0x40de68,'typevehicle':_0x1f7815,'TSU':_0x47fb5b,'TFU':_0x5c86ba}),_0x49a486=await _0x142b44[_0x4a7eff(0x246)]();_0x1f66b9['flash'](_0x4a7eff(0x209),_0x4a7eff(0x231)),_0xc6383b[_0x4a7eff(0x1c1)](_0x4a7eff(0x200)+_0x49a486[_0x4a7eff(0x239)]);}catch(_0x50e6f1){console[_0x4a7eff(0x1bf)](_0x50e6f1),_0xc6383b[_0x4a7eff(0x24f)](0xc8)[_0x4a7eff(0x1b2)]({'errorMessage':_0x50e6f1[_0x4a7eff(0x1bb)]});}}),router['post'](a0_0x29d042(0x221),auth,async(_0x3cd2ed,_0x3a150b)=>{var _0x82b4ff=a0_0x29d042;try{const {date:_0x4459f9,from_warehouse:_0x4ed9e6,FromRoom_name:_0x2e21eb,to_warehouse:_0x253ad7,ToRoom_name:_0x1d30c0,prod_name:_0x3b739f,from_prod_qty:_0x3acf19,from_prod_level:_0x1fd02e,from_prod_isle:_0x1b849a,from_prod_pallet:_0x48417d,to_prod_qty:_0x2f8653,to_prod_level:_0xcdf415,to_prod_isle:_0xc7a0dc,to_prod_pallet:_0x26de06,primary_code:_0x1040d0,secondary_code:_0x47dcb8,product_code3:_0x5949e6,note:_0x3fee1b,MaxStocks_data2:_0x26ae09,invoice:_0x4ba4f3,expiry_date:_0x14222d,PO_number_loc:_0x5cf05f,ReqBy_loc:_0x4f9ae6,dateofreq_loc:_0x436c16,typeservices_loc_Data:_0x513d43,destination_loc:_0x48cfdf,deliverydate_loc:_0x1939df,driver_loc:_0x108446,plate_loc:_0x3b53a2,van_loc:_0x265481,DRSI_loc:_0x427174,typevehicle_loc:_0xc0807c,TSU_loc:_0x4c08ae,TFU_loc:_0x112109}=_0x3cd2ed[_0x82b4ff(0x243)];if(typeof _0x3b739f==_0x82b4ff(0x19b))var _0x2d405c=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x245)]],_0xe65982=[_0x3cd2ed['body']['from_prod_qty']],_0xb4ad04=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x189)]],_0x5e268f=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x1e5)]],_0x3a660f=[_0x3cd2ed['body'][_0x82b4ff(0x213)]],_0x55ca17=[_0x3cd2ed['body'][_0x82b4ff(0x1ef)]],_0x10d951=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x1ca)]],_0x306611=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x1c9)]],_0x37cdbf=[_0x3cd2ed['body'][_0x82b4ff(0x1dd)]],_0x302f0d=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x21d)]],_0x147253=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x1d5)]],_0x126547=[_0x3cd2ed['body']['batch_code']],_0x34ca3a=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x23b)]],_0x1e1579=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x230)]],_0x685f51=[_0x3cd2ed['body'][_0x82b4ff(0x1e4)]],_0x4a186f=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x207)]],_0x462c42=[_0x3cd2ed[_0x82b4ff(0x243)]['prod_cat']],_0xca3466=[_0x3cd2ed[_0x82b4ff(0x243)]['RoomAssigned']],_0x10225f=[_0x3cd2ed[_0x82b4ff(0x243)]['ToRoomAssigned']],_0xa21145=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x19e)]],_0x48f000=[_0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x205)]];else var _0x2d405c=[..._0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x245)]],_0xe65982=[..._0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x1cf)]],_0xb4ad04=[..._0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x189)]],_0x5e268f=[..._0x3cd2ed['body'][_0x82b4ff(0x1e5)]],_0x3a660f=[..._0x3cd2ed['body']['to_prod_level']],_0x55ca17=[..._0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x1ef)]],_0x10d951=[..._0x3cd2ed[_0x82b4ff(0x243)]['secondary_code']],_0x306611=[..._0x3cd2ed['body'][_0x82b4ff(0x1c9)]],_0x37cdbf=[..._0x3cd2ed['body'][_0x82b4ff(0x1dd)]],_0x302f0d=[..._0x3cd2ed[_0x82b4ff(0x243)]['primary_unit']],_0x147253=[..._0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x1d5)]],_0x126547=[..._0x3cd2ed['body'][_0x82b4ff(0x1d1)]],_0x34ca3a=[..._0x3cd2ed['body'][_0x82b4ff(0x23b)]],_0x1e1579=[..._0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x230)]],_0x685f51=[..._0x3cd2ed['body']['MaxStocks_data']],_0x4a186f=[..._0x3cd2ed[_0x82b4ff(0x243)]['maxPerUnit']],_0x462c42=[..._0x3cd2ed['body'][_0x82b4ff(0x1ad)]],_0xca3466=[..._0x3cd2ed[_0x82b4ff(0x243)]['RoomAssigned']],_0x10225f=[..._0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x18d)]],_0xa21145=[..._0x3cd2ed[_0x82b4ff(0x243)][_0x82b4ff(0x19e)]],_0x48f000=[..._0x3cd2ed['body'][_0x82b4ff(0x205)]];const _0x5933ad=_0x2d405c[_0x82b4ff(0x1af)](_0x3b96bf=>{return _0x3b96bf={'product_name':_0x3b96bf};});_0xe65982['forEach']((_0x18d319,_0x5f2263)=>{var _0x5b6dbd=_0x82b4ff;_0x5933ad[_0x5f2263][_0x5b6dbd(0x195)]=_0x18d319;}),_0xb4ad04[_0x82b4ff(0x212)]((_0x1bae15,_0x3d402d)=>{var _0x4133d4=_0x82b4ff,_0x20c36b=_0x1bae15['match'](/[A-Za-z]+/)[0x0],_0x281046=parseInt(_0x1bae15['match'](/\d+/)[0x0]);_0x5933ad[_0x3d402d][_0x4133d4(0x1b0)]=_0x281046,_0x5933ad[_0x3d402d]['from_level']=_0x20c36b;}),_0x48f000[_0x82b4ff(0x212)]((_0x51b685,_0x1f7179)=>{var _0x3e2c92=_0x82b4ff;_0x5933ad[_0x1f7179][_0x3e2c92(0x205)]=_0x51b685;}),_0xa21145['forEach']((_0x5e872f,_0x47245c)=>{var _0x125a9b=_0x82b4ff;_0x5933ad[_0x47245c][_0x125a9b(0x19e)]=_0x5e872f;}),_0x5e268f[_0x82b4ff(0x212)]((_0x594193,_0x2e268f)=>{var _0x467b99=_0x82b4ff;_0x5933ad[_0x2e268f][_0x467b99(0x22a)]=_0x594193;}),_0x3a660f[_0x82b4ff(0x212)]((_0x45b840,_0x52fb1f)=>{var _0xa84df5=_0x82b4ff,_0xce4c80=_0x45b840[_0xa84df5(0x1df)](/[A-Za-z]+/)[0x0],_0x2a6113=parseInt(_0x45b840['match'](/\d+/)[0x0]);_0x5933ad[_0x52fb1f][_0xa84df5(0x188)]=_0xce4c80,_0x5933ad[_0x52fb1f][_0xa84df5(0x1d0)]=_0x2a6113;}),_0x55ca17[_0x82b4ff(0x212)]((_0x334bf5,_0x373e31)=>{var _0x57b594=_0x82b4ff;_0x5933ad[_0x373e31][_0x57b594(0x1ef)]=_0x334bf5;}),_0x10d951[_0x82b4ff(0x212)]((_0x176547,_0x4583be)=>{var _0x42611c=_0x82b4ff;_0x5933ad[_0x4583be][_0x42611c(0x1ca)]=_0x176547;}),_0x306611[_0x82b4ff(0x212)]((_0x5b87c7,_0x32c8bf)=>{_0x5933ad[_0x32c8bf]['product_code']=_0x5b87c7;}),_0x37cdbf['forEach']((_0x5ccf5f,_0x1b5db3)=>{var _0x4160f1=_0x82b4ff;_0x5933ad[_0x1b5db3][_0x4160f1(0x19d)]=_0x5ccf5f;}),_0x302f0d[_0x82b4ff(0x212)]((_0x1119c6,_0xaee673)=>{var _0x4f6563=_0x82b4ff;_0x5933ad[_0xaee673][_0x4f6563(0x1e6)]=_0x1119c6;}),_0x147253[_0x82b4ff(0x212)]((_0x1e0276,_0x205633)=>{var _0x4dd283=_0x82b4ff;_0x5933ad[_0x205633][_0x4dd283(0x1d5)]=_0x1e0276;}),_0x126547[_0x82b4ff(0x212)]((_0x46cae4,_0x863013)=>{var _0x4794c0=_0x82b4ff;_0x5933ad[_0x863013][_0x4794c0(0x1d1)]=_0x46cae4;}),_0x34ca3a[_0x82b4ff(0x212)]((_0x3bc8d7,_0x264a4d)=>{var _0x4ad775=_0x82b4ff;_0x5933ad[_0x264a4d][_0x4ad775(0x23b)]=_0x3bc8d7;}),_0x1e1579['forEach']((_0xac26ba,_0x5c8e8)=>{var _0x253075=_0x82b4ff;_0x5933ad[_0x5c8e8][_0x253075(0x23c)]=_0xac26ba;}),_0x685f51[_0x82b4ff(0x212)]((_0x29654d,_0x1c53ce)=>{var _0x1257f2=_0x82b4ff;_0x5933ad[_0x1c53ce][_0x1257f2(0x19d)]=_0x29654d;}),_0x4a186f[_0x82b4ff(0x212)]((_0x10e08f,_0x5b12a5)=>{_0x5933ad[_0x5b12a5]['maxPerUnit']=_0x10e08f;}),_0x462c42[_0x82b4ff(0x212)]((_0x17c5c5,_0x5437cb)=>{var _0x5230c2=_0x82b4ff;_0x5933ad[_0x5437cb][_0x5230c2(0x1ad)]=_0x17c5c5;}),_0xca3466[_0x82b4ff(0x212)]((_0x4a03e4,_0x3e29b4)=>{_0x5933ad[_0x3e29b4]['from_room_name']=_0x4a03e4;}),_0x10225f['forEach']((_0x3d745b,_0x338968)=>{var _0x4537f9=_0x82b4ff;_0x5933ad[_0x338968][_0x4537f9(0x193)]=_0x3d745b;});const _0x272947=_0x5933ad[_0x82b4ff(0x240)](_0x5682b8=>_0x5682b8['to_quantity']!=='0'&&_0x5682b8['to_quantity']!==''||_0x5682b8[_0x82b4ff(0x1fb)]!=='0'&&_0x5682b8[_0x82b4ff(0x1fb)]!=='');var _0x7a87fd=0x0;_0x272947['forEach'](_0x32ba4a=>{var _0x2ec646=_0x82b4ff;parseInt(_0x32ba4a[_0x2ec646(0x195)])<parseInt(_0x32ba4a[_0x2ec646(0x22a)])&&_0x7a87fd++;});if(_0x7a87fd!=0x0)return _0x3cd2ed[_0x82b4ff(0x20e)](_0x82b4ff(0x23d),_0x82b4ff(0x1ce)),_0x3a150b['redirect'](_0x82b4ff(0x1e3));const _0x224370=new transfers_logs();await _0x224370[_0x82b4ff(0x246)]();for(let _0x4d8668=0x0;_0x4d8668<=_0x10225f[_0x82b4ff(0x1ab)]-0x1;_0x4d8668++){_0x5933ad[_0x4d8668][_0x82b4ff(0x214)]=_0x82b4ff(0x197)+_0x224370['invoice_init'][_0x82b4ff(0x1eb)]()[_0x82b4ff(0x198)](0x8,'0');}const _0x527bee=new transfers_finished({'date':_0x4459f9,'from_warehouse':_0x4ed9e6,'to_warehouse':_0x253ad7,'product':_0x272947,'note':_0x3fee1b,'invoice':'LOG-TRF-'+_0x224370[_0x82b4ff(0x1fd)][_0x82b4ff(0x1eb)]()[_0x82b4ff(0x198)](0x8,'0'),'type_of_transaction':_0x82b4ff(0x1c0),'type_of_process':_0x82b4ff(0x1a8),'PO_number':_0x5cf05f,'RequestedBy':_0x4f9ae6,'DateofRequest':_0x436c16,'typeservices':_0x513d43,'destination':_0x48cfdf,'deliverydate':_0x1939df,'driver':_0x108446,'plate':_0x3b53a2,'van':_0x265481,'DRSI':_0x427174,'typevehicle':_0xc0807c,'TSU':_0x4c08ae,'TFU':_0x112109}),_0x34d5a8=await _0x527bee[_0x82b4ff(0x246)]();_0x3cd2ed[_0x82b4ff(0x20e)](_0x82b4ff(0x209),_0x82b4ff(0x231)),_0x3a150b[_0x82b4ff(0x1c1)](_0x82b4ff(0x200)+_0x34d5a8[_0x82b4ff(0x239)]);}catch(_0x383208){console[_0x82b4ff(0x1bf)](_0x383208),_0x3a150b[_0x82b4ff(0x24f)](0xc8)[_0x82b4ff(0x1b2)]({'errorMessage':_0x383208[_0x82b4ff(0x1bb)]});}}),router[a0_0x29d042(0x22d)](a0_0x29d042(0x20d),auth,async(_0xc69924,_0x29dd3d)=>{var _0x3416d3=a0_0x29d042;try{const {date:_0xed2b42,from_warehouse:_0x54546f,FromRoom_name:_0x16f084,to_warehouse:_0x1f75a0,ToRoom_name:_0x45c6eb,prod_name:_0x1a1353,from_prod_qty:_0x2610e4,from_prod_level:_0x853473,from_prod_isle:_0x362da4,from_prod_pallet:_0x2da0c6,to_prod_qty:_0x3318d1,to_prod_level:_0x31bdae,to_prod_isle:_0x162469,to_prod_pallet:_0x361333,primary_code:_0x226a4b,secondary_code:_0x1c8ef3,product_code3:_0x33490c,note:_0x10d2f1,MaxStocks_data2:_0x3809f1,invoice:_0x2d4487,expiry_date:_0x95c0f1,PO_number:_0x1f8886,ReqBy:_0x514699,dateofreq:_0x827f07,typeservicesData:_0x5e5c5c,destination:_0x2eade8,deliverydate:_0x318128,driver:_0xb26e39,plate:_0x2c961f,van:_0x2c36ce,DRSI:_0x37ddf9,typevehicle:_0x89082a,TSU:_0x4891b8,TFU:_0x24cc93}=_0xc69924[_0x3416d3(0x243)];if(typeof _0x1a1353==_0x3416d3(0x19b))var _0x3136b6=[_0xc69924[_0x3416d3(0x243)]['prod_name']],_0x18414d=[_0xc69924[_0x3416d3(0x243)][_0x3416d3(0x1cf)]],_0x3c285a=[_0xc69924[_0x3416d3(0x243)][_0x3416d3(0x189)]],_0x58b466=[_0xc69924[_0x3416d3(0x243)][_0x3416d3(0x1e5)]],_0xa1b613=[_0xc69924[_0x3416d3(0x243)][_0x3416d3(0x213)]],_0x178228=[_0xc69924['body']['primary_code']],_0x480b50=[_0xc69924[_0x3416d3(0x243)][_0x3416d3(0x1ca)]],_0x326539=[_0xc69924['body'][_0x3416d3(0x1c9)]],_0x511973=[_0xc69924['body'][_0x3416d3(0x1dd)]],_0x55df35=[_0xc69924['body'][_0x3416d3(0x21d)]],_0x44bbbc=[_0xc69924[_0x3416d3(0x243)][_0x3416d3(0x1d5)]],_0x2893c1=[_0xc69924['body']['batch_code']],_0x213bdb=[_0xc69924[_0x3416d3(0x243)][_0x3416d3(0x23b)]],_0x2583e3=[_0xc69924['body'][_0x3416d3(0x230)]],_0x1f3862=[_0xc69924[_0x3416d3(0x243)][_0x3416d3(0x1e4)]],_0x195590=[_0xc69924[_0x3416d3(0x243)][_0x3416d3(0x207)]],_0x198370=[_0xc69924[_0x3416d3(0x243)]['prod_cat']],_0x168537=[_0xc69924[_0x3416d3(0x243)]['RoomAssigned']],_0x304fb8=[_0xc69924[_0x3416d3(0x243)][_0x3416d3(0x18d)]],_0x335442=[_0xc69924[_0x3416d3(0x243)]['from_invoice']],_0x2c95a5=[_0xc69924['body'][_0x3416d3(0x205)]];else var _0x3136b6=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x245)]],_0x18414d=[..._0xc69924['body']['from_prod_qty']],_0x3c285a=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x189)]],_0x58b466=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x1e5)]],_0xa1b613=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x213)]],_0x178228=[..._0xc69924[_0x3416d3(0x243)]['primary_code']],_0x480b50=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x1ca)]],_0x326539=[..._0xc69924[_0x3416d3(0x243)]['product_code3']],_0x511973=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x1dd)]],_0x55df35=[..._0xc69924[_0x3416d3(0x243)]['primary_unit']],_0x44bbbc=[..._0xc69924[_0x3416d3(0x243)]['secondary_unit']],_0x2893c1=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x1d1)]],_0x213bdb=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x23b)]],_0x2583e3=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x230)]],_0x1f3862=[..._0xc69924['body']['MaxStocks_data']],_0x195590=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x207)]],_0x198370=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x1ad)]],_0x168537=[..._0xc69924['body'][_0x3416d3(0x20c)]],_0x304fb8=[..._0xc69924[_0x3416d3(0x243)]['ToRoomAssigned']],_0x335442=[..._0xc69924['body'][_0x3416d3(0x19e)]],_0x2c95a5=[..._0xc69924[_0x3416d3(0x243)][_0x3416d3(0x205)]];const _0x13df4b=_0x3136b6['map'](_0x927ae2=>{return _0x927ae2={'product_name':_0x927ae2};});_0x18414d[_0x3416d3(0x212)]((_0x236d55,_0x3e0b2f)=>{_0x13df4b[_0x3e0b2f]['from_quantity']=_0x236d55;}),_0x3c285a[_0x3416d3(0x212)]((_0x5b2f2f,_0x29aeec)=>{var _0x5644e6=_0x3416d3,_0x2cee51=_0x5b2f2f[_0x5644e6(0x1df)](/[A-Za-z]+/)[0x0],_0x44f7ff=parseInt(_0x5b2f2f['match'](/\d+/)[0x0]);_0x13df4b[_0x29aeec][_0x5644e6(0x1b0)]=_0x44f7ff,_0x13df4b[_0x29aeec][_0x5644e6(0x186)]=_0x2cee51;}),_0x2c95a5[_0x3416d3(0x212)]((_0x59ca95,_0x2a22bf)=>{_0x13df4b[_0x2a22bf]['id_transaction']=_0x59ca95;}),_0x335442[_0x3416d3(0x212)]((_0xfa1052,_0xfa89ff)=>{var _0x461e3b=_0x3416d3;_0x13df4b[_0xfa89ff][_0x461e3b(0x19e)]=_0xfa1052;}),_0x58b466[_0x3416d3(0x212)]((_0x142f31,_0x1870ab)=>{var _0x7b2bf9=_0x3416d3;_0x13df4b[_0x1870ab][_0x7b2bf9(0x22a)]=_0x142f31;}),_0xa1b613[_0x3416d3(0x212)]((_0x13dedb,_0x2b498d)=>{var _0x3bac63=_0x3416d3,_0x1f028d=_0x13dedb[_0x3bac63(0x1df)](/[A-Za-z]+/)[0x0],_0x303cdf=parseInt(_0x13dedb[_0x3bac63(0x1df)](/\d+/)[0x0]);_0x13df4b[_0x2b498d][_0x3bac63(0x188)]=_0x1f028d,_0x13df4b[_0x2b498d][_0x3bac63(0x1d0)]=_0x303cdf;}),_0x178228[_0x3416d3(0x212)]((_0x56ccb2,_0x4d7e59)=>{var _0x1e3b5f=_0x3416d3;_0x13df4b[_0x4d7e59][_0x1e3b5f(0x1ef)]=_0x56ccb2;}),_0x480b50[_0x3416d3(0x212)]((_0x32d71b,_0x4293d4)=>{var _0x139136=_0x3416d3;_0x13df4b[_0x4293d4][_0x139136(0x1ca)]=_0x32d71b;}),_0x326539['forEach']((_0x10bb04,_0x42e879)=>{var _0xa95a9e=_0x3416d3;_0x13df4b[_0x42e879][_0xa95a9e(0x1a1)]=_0x10bb04;}),_0x511973[_0x3416d3(0x212)]((_0x259997,_0x29f695)=>{var _0x391e89=_0x3416d3;_0x13df4b[_0x29f695][_0x391e89(0x19d)]=_0x259997;}),_0x55df35['forEach']((_0x17c603,_0x3bc15b)=>{var _0x363a69=_0x3416d3;_0x13df4b[_0x3bc15b][_0x363a69(0x1e6)]=_0x17c603;}),_0x44bbbc[_0x3416d3(0x212)]((_0x2af6e8,_0x2f9ef4)=>{var _0x38a441=_0x3416d3;_0x13df4b[_0x2f9ef4][_0x38a441(0x1d5)]=_0x2af6e8;}),_0x2893c1[_0x3416d3(0x212)]((_0x1c8655,_0x57b4d8)=>{var _0x1511a4=_0x3416d3;_0x13df4b[_0x57b4d8][_0x1511a4(0x1d1)]=_0x1c8655;}),_0x213bdb[_0x3416d3(0x212)]((_0x5c3746,_0x43635c)=>{_0x13df4b[_0x43635c]['expiry_date']=_0x5c3746;}),_0x2583e3[_0x3416d3(0x212)]((_0x29d458,_0x4f457e)=>{var _0x2fbbef=_0x3416d3;_0x13df4b[_0x4f457e][_0x2fbbef(0x23c)]=_0x29d458;}),_0x1f3862[_0x3416d3(0x212)]((_0x47f1ed,_0x5b2c43)=>{_0x13df4b[_0x5b2c43]['maxProducts']=_0x47f1ed;}),_0x195590[_0x3416d3(0x212)]((_0x243070,_0x355846)=>{var _0x146673=_0x3416d3;_0x13df4b[_0x355846][_0x146673(0x207)]=_0x243070;}),_0x198370['forEach']((_0x4f7432,_0x5ace07)=>{var _0x3b091e=_0x3416d3;_0x13df4b[_0x5ace07][_0x3b091e(0x1ad)]=_0x4f7432;}),_0x168537['forEach']((_0x369f70,_0x596e32)=>{var _0x1be187=_0x3416d3;_0x13df4b[_0x596e32][_0x1be187(0x18a)]=_0x369f70;}),_0x304fb8[_0x3416d3(0x212)]((_0x4cda19,_0x33011e)=>{_0x13df4b[_0x33011e]['to_room_name']=_0x4cda19;});const _0x180240=_0x13df4b[_0x3416d3(0x240)](_0x5c51a9=>_0x5c51a9[_0x3416d3(0x22a)]!=='0'&&_0x5c51a9[_0x3416d3(0x22a)]!==''||_0x5c51a9[_0x3416d3(0x1fb)]!=='0'&&_0x5c51a9['to_floorlevel']!=='');var _0x4a87ff=0x0;_0x180240[_0x3416d3(0x212)](_0x35e9cb=>{parseInt(_0x35e9cb['from_quantity'])<parseInt(_0x35e9cb['to_quantity'])&&_0x4a87ff++;});if(_0x4a87ff!=0x0)return _0xc69924[_0x3416d3(0x20e)](_0x3416d3(0x23d),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x29dd3d[_0x3416d3(0x1c1)](_0x3416d3(0x1e3));const _0x3050cf=new invoice_for_transfer();await _0x3050cf['save']();for(let _0x37952e=0x0;_0x37952e<=_0x304fb8['length']-0x1;_0x37952e++){_0x13df4b[_0x37952e]['To_invoice']=_0x3416d3(0x190)+_0x3050cf[_0x3416d3(0x1fd)][_0x3416d3(0x1eb)]()[_0x3416d3(0x198)](0x8,'0');}const _0x58229b=new transfers_finished({'date':_0xed2b42,'from_warehouse':_0x54546f,'to_warehouse':_0x54546f,'product':_0x180240,'note':_0x10d2f1,'invoice':_0x3416d3(0x190)+_0x3050cf[_0x3416d3(0x1fd)][_0x3416d3(0x1eb)]()[_0x3416d3(0x198)](0x8,'0'),'type_of_process':_0x3416d3(0x208),'type_of_transaction':_0x3416d3(0x1a5),'PO_number':_0x1f8886,'RequestedBy':_0x514699,'DateofRequest':_0x827f07,'typeservices':_0x5e5c5c,'destination':_0x2eade8,'deliverydate':_0x318128,'driver':_0xb26e39,'plate':_0x2c961f,'van':_0x2c36ce,'DRSI':_0x37ddf9,'typevehicle':_0x89082a,'TSU':_0x4891b8,'TFU':_0x24cc93}),_0x4eb9ff=await _0x58229b[_0x3416d3(0x246)]();_0xc69924[_0x3416d3(0x20e)]('success','Product\x20Transfer\x20successfully'),_0x29dd3d['redirect'](_0x3416d3(0x200)+_0x4eb9ff[_0x3416d3(0x239)]);}catch(_0x441ad4){console[_0x3416d3(0x1bf)](_0x441ad4),_0x29dd3d[_0x3416d3(0x24f)](0xc8)[_0x3416d3(0x1b2)]({'errorMessage':_0x441ad4[_0x3416d3(0x1bb)]});}}),router['post'](a0_0x29d042(0x244),auth,async(_0x6c8025,_0x320179)=>{var _0x245558=a0_0x29d042;try{const {date:_0x300eb5,from_warehouse:_0x1e456f,FromRoom_name:_0x5312e5,to_warehouse:_0x234745,ToRoom_name:_0x1dbad2,prod_name:_0x2c9556,from_prod_qty:_0x23f420,from_prod_level:_0x5d97e2,from_prod_isle:_0x323747,from_prod_pallet:_0xbd8216,to_prod_qty:_0x2e8300,to_prod_level:_0x4880a9,to_prod_isle:_0x3d48d0,to_prod_pallet:_0x39f420,primary_code:_0x33e5fe,secondary_code:_0x440d98,product_code3:_0x25eded,note:_0x3eaf84,MaxStocks_data2:_0x2cf8f1,invoice:_0x5964d3,expiry_date:_0x3892ae,PO_number_loc:_0x11ab1a,ReqBy_loc:_0x45dc21,dateofreq_loc:_0x3b6b40,typeservices_loc_Data:_0x234378,destination_loc:_0x39434c,deliverydate_loc:_0xa2f244,driver_loc:_0x561e38,plate_loc:_0x1777f6,van_loc:_0x2f9d27,DRSI_loc:_0x4670e6,typevehicle_loc:_0xd9f239,TSU_loc:_0x19e4a2,TFU_loc:_0x319087}=_0x6c8025[_0x245558(0x243)];if(typeof _0x2c9556==_0x245558(0x19b))var _0x246418=[_0x6c8025[_0x245558(0x243)][_0x245558(0x245)]],_0x299ef5=[_0x6c8025['body'][_0x245558(0x1cf)]],_0x234850=[_0x6c8025[_0x245558(0x243)][_0x245558(0x189)]],_0x2d2131=[_0x6c8025[_0x245558(0x243)][_0x245558(0x1e5)]],_0x2eb231=[_0x6c8025[_0x245558(0x243)][_0x245558(0x213)]],_0x5a76a5=[_0x6c8025[_0x245558(0x243)][_0x245558(0x1ef)]],_0x1435bc=[_0x6c8025[_0x245558(0x243)][_0x245558(0x1ca)]],_0x57f77c=[_0x6c8025[_0x245558(0x243)][_0x245558(0x1c9)]],_0x36f53c=[_0x6c8025['body'][_0x245558(0x1dd)]],_0xbcba62=[_0x6c8025[_0x245558(0x243)][_0x245558(0x21d)]],_0x172c01=[_0x6c8025[_0x245558(0x243)][_0x245558(0x1d5)]],_0x8f7bce=[_0x6c8025[_0x245558(0x243)][_0x245558(0x1d1)]],_0x4005fb=[_0x6c8025[_0x245558(0x243)][_0x245558(0x23b)]],_0x485df5=[_0x6c8025['body'][_0x245558(0x230)]],_0x5cec18=[_0x6c8025['body'][_0x245558(0x1e4)]],_0x184dcb=[_0x6c8025['body'][_0x245558(0x207)]],_0x33fe01=[_0x6c8025['body'][_0x245558(0x1ad)]],_0x22d9f3=[_0x6c8025[_0x245558(0x243)][_0x245558(0x20c)]],_0x25542b=[_0x6c8025[_0x245558(0x243)][_0x245558(0x18d)]],_0x203c02=[_0x6c8025['body'][_0x245558(0x19e)]],_0x496f09=[_0x6c8025[_0x245558(0x243)][_0x245558(0x205)]];else var _0x246418=[..._0x6c8025[_0x245558(0x243)]['prod_name']],_0x299ef5=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x1cf)]],_0x234850=[..._0x6c8025[_0x245558(0x243)]['from_prod_level2']],_0x2d2131=[..._0x6c8025['body']['New_Qty_Converted']],_0x2eb231=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x213)]],_0x5a76a5=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x1ef)]],_0x1435bc=[..._0x6c8025['body']['secondary_code']],_0x57f77c=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x1c9)]],_0x36f53c=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x1dd)]],_0xbcba62=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x21d)]],_0x172c01=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x1d5)]],_0x8f7bce=[..._0x6c8025[_0x245558(0x243)]['batch_code']],_0x4005fb=[..._0x6c8025['body'][_0x245558(0x23b)]],_0x485df5=[..._0x6c8025['body'][_0x245558(0x230)]],_0x5cec18=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x1e4)]],_0x184dcb=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x207)]],_0x33fe01=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x1ad)]],_0x22d9f3=[..._0x6c8025['body'][_0x245558(0x20c)]],_0x25542b=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x18d)]],_0x203c02=[..._0x6c8025[_0x245558(0x243)][_0x245558(0x19e)]],_0x496f09=[..._0x6c8025['body'][_0x245558(0x205)]];const _0x226942=_0x246418['map'](_0x24fec4=>{return _0x24fec4={'product_name':_0x24fec4};});_0x299ef5['forEach']((_0x1d387f,_0x3e3432)=>{var _0x5dbf9c=_0x245558;_0x226942[_0x3e3432][_0x5dbf9c(0x195)]=_0x1d387f;}),_0x234850['forEach']((_0x14dc13,_0xc28535)=>{var _0x71532d=_0x245558,_0x512e88=_0x14dc13['match'](/[A-Za-z]+/)[0x0],_0x1ea0ca=parseInt(_0x14dc13[_0x71532d(0x1df)](/\d+/)[0x0]);_0x226942[_0xc28535][_0x71532d(0x1b0)]=_0x1ea0ca,_0x226942[_0xc28535][_0x71532d(0x186)]=_0x512e88;}),_0x496f09[_0x245558(0x212)]((_0x2d1938,_0xf18555)=>{_0x226942[_0xf18555]['id_transaction']=_0x2d1938;}),_0x203c02['forEach']((_0x469e78,_0x2dc0b5)=>{var _0x818ab6=_0x245558;_0x226942[_0x2dc0b5][_0x818ab6(0x19e)]=_0x469e78;}),_0x2d2131[_0x245558(0x212)]((_0x4e9575,_0x118c44)=>{var _0x1257ef=_0x245558;_0x226942[_0x118c44][_0x1257ef(0x22a)]=_0x4e9575;}),_0x2eb231[_0x245558(0x212)]((_0x2f58fa,_0x4bd852)=>{var _0x4b6d05=_0x245558,_0x3e468c=_0x2f58fa[_0x4b6d05(0x1df)](/[A-Za-z]+/)[0x0],_0x2a7135=parseInt(_0x2f58fa[_0x4b6d05(0x1df)](/\d+/)[0x0]);_0x226942[_0x4bd852][_0x4b6d05(0x188)]=_0x3e468c,_0x226942[_0x4bd852][_0x4b6d05(0x1d0)]=_0x2a7135;}),_0x5a76a5['forEach']((_0x4f78e0,_0x2ea886)=>{var _0x2a8593=_0x245558;_0x226942[_0x2ea886][_0x2a8593(0x1ef)]=_0x4f78e0;}),_0x1435bc[_0x245558(0x212)]((_0x2ef3a8,_0x37cb08)=>{var _0x58e370=_0x245558;_0x226942[_0x37cb08][_0x58e370(0x1ca)]=_0x2ef3a8;}),_0x57f77c[_0x245558(0x212)]((_0x54b126,_0x2d052f)=>{var _0x6eb64d=_0x245558;_0x226942[_0x2d052f][_0x6eb64d(0x1a1)]=_0x54b126;}),_0x36f53c[_0x245558(0x212)]((_0x498038,_0x1c747d)=>{var _0x4da43b=_0x245558;_0x226942[_0x1c747d][_0x4da43b(0x19d)]=_0x498038;}),_0xbcba62[_0x245558(0x212)]((_0x20e1d6,_0x507ebf)=>{var _0x4d8a8a=_0x245558;_0x226942[_0x507ebf][_0x4d8a8a(0x1e6)]=_0x20e1d6;}),_0x172c01[_0x245558(0x212)]((_0x43abe3,_0x4a70d9)=>{var _0x143323=_0x245558;_0x226942[_0x4a70d9][_0x143323(0x1d5)]=_0x43abe3;}),_0x8f7bce['forEach']((_0x57d4b9,_0x524e79)=>{_0x226942[_0x524e79]['batch_code']=_0x57d4b9;}),_0x4005fb[_0x245558(0x212)]((_0x5a502e,_0x26e4c4)=>{var _0x504700=_0x245558;_0x226942[_0x26e4c4][_0x504700(0x23b)]=_0x5a502e;}),_0x485df5[_0x245558(0x212)]((_0x3b4e68,_0x38b948)=>{var _0x428d20=_0x245558;_0x226942[_0x38b948][_0x428d20(0x23c)]=_0x3b4e68;}),_0x5cec18[_0x245558(0x212)]((_0x13481d,_0x475cdc)=>{var _0x53053f=_0x245558;_0x226942[_0x475cdc][_0x53053f(0x19d)]=_0x13481d;}),_0x184dcb['forEach']((_0x5bc1a3,_0x13e39e)=>{_0x226942[_0x13e39e]['maxPerUnit']=_0x5bc1a3;}),_0x33fe01['forEach']((_0x31d196,_0x570fa7)=>{var _0x4f7efc=_0x245558;_0x226942[_0x570fa7][_0x4f7efc(0x1ad)]=_0x31d196;}),_0x22d9f3[_0x245558(0x212)]((_0x41815c,_0xbadd7)=>{_0x226942[_0xbadd7]['from_room_name']=_0x41815c;}),_0x25542b['forEach']((_0xfd2aa4,_0x21d292)=>{var _0x2eae50=_0x245558;_0x226942[_0x21d292][_0x2eae50(0x193)]=_0xfd2aa4;});const _0x2f27e3=_0x226942['filter'](_0x566084=>_0x566084[_0x245558(0x22a)]!=='0'&&_0x566084[_0x245558(0x22a)]!==''||_0x566084['to_floorlevel']!=='0'&&_0x566084[_0x245558(0x1fb)]!=='');var _0x215378=0x0;_0x2f27e3[_0x245558(0x212)](_0x1754ee=>{var _0x1d4702=_0x245558;parseInt(_0x1754ee[_0x1d4702(0x195)])<parseInt(_0x1754ee[_0x1d4702(0x22a)])&&_0x215378++;});if(_0x215378!=0x0)return _0x6c8025[_0x245558(0x20e)]('errors',_0x245558(0x1ce)),_0x320179[_0x245558(0x1c1)](_0x245558(0x1e3));const _0x145eb8=new invoice_for_transfer();await _0x145eb8[_0x245558(0x246)]();for(let _0x51c913=0x0;_0x51c913<=_0x25542b[_0x245558(0x1ab)]-0x1;_0x51c913++){_0x226942[_0x51c913]['To_invoice']=_0x245558(0x190)+_0x145eb8['invoice_init'][_0x245558(0x1eb)]()['padStart'](0x8,'0');}const _0x3819ae=new transfers_finished({'date':_0x300eb5,'from_warehouse':_0x1e456f,'to_warehouse':_0x234745,'product':_0x2f27e3,'note':_0x3eaf84,'invoice':_0x245558(0x190)+_0x145eb8[_0x245558(0x1fd)][_0x245558(0x1eb)]()[_0x245558(0x198)](0x8,'0'),'type_of_transaction':_0x245558(0x1a5),'type_of_process':_0x245558(0x1a8),'PO_number':_0x11ab1a,'RequestedBy':_0x45dc21,'DateofRequest':_0x3b6b40,'typeservices':_0x234378,'destination':_0x39434c,'deliverydate':_0xa2f244,'driver':_0x561e38,'plate':_0x1777f6,'van':_0x2f9d27,'DRSI':_0x4670e6,'typevehicle':_0xd9f239,'TSU':_0x19e4a2,'TFU':_0x319087}),_0x1a4087=await _0x3819ae[_0x245558(0x246)]();_0x6c8025[_0x245558(0x20e)](_0x245558(0x209),_0x245558(0x231)),_0x320179[_0x245558(0x1c1)](_0x245558(0x200)+_0x1a4087[_0x245558(0x239)]);}catch(_0x1bd1c1){console[_0x245558(0x1bf)](_0x1bd1c1),_0x320179[_0x245558(0x24f)](0xc8)[_0x245558(0x1b2)]({'errorMessage':_0x1bd1c1[_0x245558(0x1bb)]});}}),router[a0_0x29d042(0x232)](a0_0x29d042(0x211),auth,async(_0x418480,_0x206736)=>{var _0x30e8d0=a0_0x29d042;try{const {username:_0x15fedf,email:_0x547940,role:_0x452419}=_0x418480[_0x30e8d0(0x1f3)],_0x2ef71b=_0x418480[_0x30e8d0(0x1f3)],_0x1f38bd=await profile['findOne']({'email':_0x2ef71b[_0x30e8d0(0x1c6)]}),_0xb64003=await master_shop[_0x30e8d0(0x202)](),_0x5239a8=await transfers_finished[_0x30e8d0(0x199)](_0x418480[_0x30e8d0(0x1da)]['id']);let _0x35841d;if(_0x2ef71b[_0x30e8d0(0x1e1)]==_0x30e8d0(0x1ae)){const _0x2d013b=await staff[_0x30e8d0(0x1cb)]({'email':_0x2ef71b['email']});_0x35841d=await warehouse[_0x30e8d0(0x202)]({'status':_0x30e8d0(0x1fa),'name':_0x2d013b[_0x30e8d0(0x21a)],'warehouse_category':'Finished\x20Goods'});}else _0x35841d=await warehouse[_0x30e8d0(0x202)]({'status':_0x30e8d0(0x1fa),'warehouse_category':_0x30e8d0(0x219)});const _0x438d57=await warehouse[_0x30e8d0(0x234)]([{'$match':{'name':_0x5239a8[_0x30e8d0(0x237)],'warehouse_category':_0x30e8d0(0x219)}},{'$unwind':_0x30e8d0(0x1b1)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x30e8d0(0x228)},'product_stock':{'$first':_0x30e8d0(0x1ec)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x30e8d0(0x242)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x30e8d0(0x1a6)},'storage':{'$first':_0x30e8d0(0x1be)},'rack':{'$first':_0x30e8d0(0x1db)},'expiry_date':{'$first':_0x30e8d0(0x192)},'production_date':{'$first':_0x30e8d0(0x224)},'room':{'$first':_0x30e8d0(0x1cc)},'warehoue_name':{'$first':_0x30e8d0(0x253)}}}]),_0x238364=await product[_0x30e8d0(0x202)]({});if(_0xb64003[0x0][_0x30e8d0(0x1ee)]==_0x30e8d0(0x1fc)){var _0x3784ef=users[_0x30e8d0(0x1f7)];console[_0x30e8d0(0x1bf)](_0x3784ef);}else{if(_0xb64003[0x0][_0x30e8d0(0x1ee)]==_0x30e8d0(0x1f9))var _0x3784ef=users['Hindi'];else{if(_0xb64003[0x0]['language']==_0x30e8d0(0x1bc))var _0x3784ef=users[_0x30e8d0(0x1bc)];else{if(_0xb64003[0x0]['language']==_0x30e8d0(0x1ed))var _0x3784ef=users[_0x30e8d0(0x1ed)];else{if(_0xb64003[0x0][_0x30e8d0(0x1ee)]=='French')var _0x3784ef=users[_0x30e8d0(0x1e9)];else{if(_0xb64003[0x0][_0x30e8d0(0x1ee)]==_0x30e8d0(0x247))var _0x3784ef=users[_0x30e8d0(0x23a)];else{if(_0xb64003[0x0][_0x30e8d0(0x1ee)]==_0x30e8d0(0x204))var _0x3784ef=users[_0x30e8d0(0x204)];else{if(_0xb64003[0x0][_0x30e8d0(0x1ee)]==_0x30e8d0(0x1e7))var _0x3784ef=users['Arabic'];}}}}}}}_0x206736[_0x30e8d0(0x1f4)]('edit_transfer_finished_view',{'success':_0x418480[_0x30e8d0(0x20e)](_0x30e8d0(0x209)),'errors':_0x418480[_0x30e8d0(0x20e)](_0x30e8d0(0x23d)),'role':_0x2ef71b,'profile':_0x1f38bd,'master_shop':_0xb64003,'warehouse':_0x35841d,'transfer':_0x5239a8,'stock':_0x438d57,'unit':_0x238364,'language':_0x3784ef});}catch(_0x15055f){console[_0x30e8d0(0x1bf)](_0x15055f);}}),router[a0_0x29d042(0x22d)](a0_0x29d042(0x211),auth,async(_0x4c38f9,_0x406264)=>{var _0x5a98ec=a0_0x29d042;try{const {invoice:_0x54a851,from_warehouse:_0x24bf78,FromRoom_name:_0x12f43a,to_warehouse:_0x1de3b9,ToRoom_name:_0x37329f}=_0x4c38f9['body'],_0x4825ac=await transfers_finished[_0x5a98ec(0x199)](_0x4c38f9[_0x5a98ec(0x1da)]['id']),_0x19f06c=_0x4825ac[_0x5a98ec(0x216)][_0x5a98ec(0x1af)](async _0x2c88fa=>{var _0x1f0d4b=_0x5a98ec;if(_0x2c88fa[_0x1f0d4b(0x22a)]>0x0){var _0x50e467=await warehouse[_0x1f0d4b(0x1cb)]({'name':_0x24bf78,'room':_0x2c88fa[_0x1f0d4b(0x18a)]});const _0x3ed644=_0x50e467[_0x1f0d4b(0x184)][_0x1f0d4b(0x1af)](_0x57a542=>{var _0x2ad41c=_0x1f0d4b;_0x57a542[_0x2ad41c(0x239)]==_0x2c88fa[_0x2ad41c(0x205)]&&(_0x57a542[_0x2ad41c(0x218)]=Math[_0x2ad41c(0x1f2)](0x0,Math[_0x2ad41c(0x1f0)](_0x57a542[_0x2ad41c(0x218)])-Math[_0x2ad41c(0x1f0)](_0x2c88fa[_0x2ad41c(0x22a)])),console['log'](_0x57a542[_0x2ad41c(0x218)]));});}return _0x50e467;});Promise[_0x5a98ec(0x233)](_0x19f06c)['then'](async _0xdeca4b=>{var _0x1fa5b5=_0x5a98ec;try{for(const _0x4bd37a of _0xdeca4b){await _0x4bd37a[_0x1fa5b5(0x246)]();}const _0x434f26=_0x4825ac[_0x1fa5b5(0x216)][_0x1fa5b5(0x1af)](async _0x3e66bd=>{var _0x24a1f3=_0x1fa5b5,_0x2477f1=await warehouse[_0x24a1f3(0x1cb)]({'name':_0x1de3b9,'room':_0x3e66bd['to_room_name']});if(_0x3e66bd[_0x24a1f3(0x22a)]>0x0){var _0x20ae75=0x0;const _0xc8fbc8=_0x2477f1[_0x24a1f3(0x184)][_0x24a1f3(0x1af)](_0x260cc3=>{var _0x378014=_0x24a1f3;_0x260cc3[_0x378014(0x22c)]==_0x3e66bd[_0x378014(0x22c)]&&_0x260cc3[_0x378014(0x21f)]==_0x3e66bd['to_bay']&&_0x260cc3['expiry_date']==_0x3e66bd[_0x378014(0x23b)]&&_0x260cc3[_0x378014(0x23c)]==_0x3e66bd['production_date']&&_0x260cc3[_0x378014(0x1d1)]==_0x3e66bd[_0x378014(0x1d1)]&&_0x260cc3[_0x378014(0x20b)]==_0x3e66bd['To_invoice']&&(typeof _0x3e66bd[_0x378014(0x205)]==_0x378014(0x1ac)?(console['log'](_0x378014(0x20a),_0x260cc3[_0x378014(0x218)]+'\x20<>\x20'+_0x260cc3['_id']+_0x378014(0x1c3)+Math[_0x378014(0x1f0)](_0x260cc3[_0x378014(0x218)])+Math['abs'](_0x3e66bd['to_quantity'])),_0x260cc3['product_stock']=Math[_0x378014(0x1f0)](_0x260cc3[_0x378014(0x218)])+Math['abs'](_0x3e66bd[_0x378014(0x22a)])):_0x260cc3[_0x378014(0x218)]=Math[_0x378014(0x1f0)](_0x260cc3[_0x378014(0x218)])+Math[_0x378014(0x1f0)](_0x3e66bd[_0x378014(0x22a)]),_0x20ae75++);});_0x20ae75=='0'&&(_0x2477f1[_0x24a1f3(0x184)]=_0x2477f1[_0x24a1f3(0x184)][_0x24a1f3(0x20f)]({'product_name':_0x3e66bd[_0x24a1f3(0x22c)],'product_stock':_0x3e66bd['to_quantity'],'bay':_0x3e66bd[_0x24a1f3(0x1d0)],'level':_0x3e66bd[_0x24a1f3(0x188)],'product_code':_0x3e66bd[_0x24a1f3(0x1a1)],'primary_code':_0x3e66bd[_0x24a1f3(0x1ef)],'secondary_code':_0x3e66bd[_0x24a1f3(0x1ca)],'expiry_date':_0x3e66bd[_0x24a1f3(0x23b)],'production_date':_0x3e66bd[_0x24a1f3(0x23c)],'maxProducts':_0x3e66bd[_0x24a1f3(0x19d)],'batch_code':_0x3e66bd[_0x24a1f3(0x1d1)],'secondary_unit':_0x3e66bd[_0x24a1f3(0x1d5)],'unit':_0x3e66bd[_0x24a1f3(0x1e6)],'maxProducts':_0x3e66bd[_0x24a1f3(0x19d)],'maxPerUnit':_0x3e66bd[_0x24a1f3(0x207)],'invoice':_0x3e66bd[_0x24a1f3(0x214)]}));}return _0x2477f1;});Promise[_0x1fa5b5(0x233)](_0x434f26)[_0x1fa5b5(0x22e)](async _0x48b645=>{var _0x32c7a4=_0x1fa5b5;try{console[_0x32c7a4(0x1bf)](_0x4825ac[_0x32c7a4(0x229)]);if(_0x4825ac['type_of_process']!=_0x32c7a4(0x1a8))for(const _0x3f262d of _0x48b645){await warehouse[_0x32c7a4(0x24c)]({'_id':_0x3f262d[_0x32c7a4(0x239)]},{'$addToSet':{'product_details':{'$each':_0x3f262d['product_details']}}});}_0x4825ac[_0x32c7a4(0x1b3)]=_0x32c7a4(0x241);const _0x4e44db=await _0x4825ac[_0x32c7a4(0x246)](),_0x3777f8=await master_shop['find'](),_0x3172e8=await email_settings['findOne'](),_0xf565e=await supervisor_settings[_0x32c7a4(0x202)]();var _0x289eaa=_0x4825ac[_0x32c7a4(0x216)],_0x18931d='',_0x2a34f5;for(_0x2a34f5 in _0x289eaa){var _0x166e08='FG';_0x4825ac[_0x32c7a4(0x23f)]=='DRY\x20GOODS'&&(_0x166e08='DG'),_0x18931d+=_0x32c7a4(0x1dc)+_0x32c7a4(0x1b4)+_0x289eaa[_0x2a34f5]['product_name']+_0x32c7a4(0x1aa)+_0x32c7a4(0x1b4)+_0x289eaa[_0x2a34f5][_0x32c7a4(0x1a1)]+_0x32c7a4(0x1aa)+_0x32c7a4(0x1b4)+_0x289eaa[_0x2a34f5]['to_quantity']+_0x32c7a4(0x1aa)+_0x32c7a4(0x1b4)+_0x289eaa[_0x2a34f5]['unit']+_0x32c7a4(0x1aa)+_0x32c7a4(0x1b4)+_0x289eaa[_0x2a34f5][_0x32c7a4(0x1d5)]+'</td>'+_0x32c7a4(0x1b4)+_0x4825ac[_0x32c7a4(0x23f)]+_0x32c7a4(0x1aa)+_0x32c7a4(0x1b4)+_0x289eaa[_0x2a34f5][_0x32c7a4(0x193)]+_0x32c7a4(0x1aa)+_0x32c7a4(0x1b4)+_0x166e08+_0x289eaa[_0x2a34f5][_0x32c7a4(0x1d0)]+'</td>'+_0x32c7a4(0x1d8);}_0x4c38f9[_0x32c7a4(0x20e)](_0x32c7a4(0x209),_0x32c7a4(0x1ea)),_0x406264[_0x32c7a4(0x1c1)](_0x32c7a4(0x1a9)+_0x4e44db[_0x32c7a4(0x239)]);}catch(_0x14cb6d){console[_0x32c7a4(0x1f5)](_0x14cb6d),_0x406264[_0x32c7a4(0x24f)](0x1f4)[_0x32c7a4(0x1b2)]({'error':_0x32c7a4(0x1a7)});}})['catch'](_0x3eb1e5=>{var _0x163280=_0x1fa5b5;console[_0x163280(0x1f5)](_0x3eb1e5),_0x406264['status'](0x1f4)['json']({'error':_0x163280(0x206)});});}catch(_0x26df32){console[_0x1fa5b5(0x1f5)](_0x26df32),_0x406264[_0x1fa5b5(0x24f)](0x1f4)[_0x1fa5b5(0x1b2)]({'error':_0x1fa5b5(0x222)});}})[_0x5a98ec(0x250)](_0x1bbf31=>{var _0x3765bb=_0x5a98ec;console['error'](_0x1bbf31),_0x406264[_0x3765bb(0x24f)](0x1f4)[_0x3765bb(0x1b2)]({'error':_0x3765bb(0x206)});});}catch(_0x12de39){_0x406264['json']({'message':_0x12de39[_0x5a98ec(0x1bb)]});}});function BayBinSelected(_0x423378,_0x4a6779){var _0x2d81f3=a0_0x29d042,_0x18866b=[];let _0x4a5eca=[];var _0x3fde2d=[];if(_0x423378=='DRY\x20GOODS'){switch(_0x4a6779){case _0x2d81f3(0x24b):_0x18866b=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10];break;case'Rack\x202':_0x18866b=[0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20];break;}_0x3fde2d=['DG'];}else{if(_0x423378==_0x2d81f3(0x1a4)){switch(_0x4a6779){case'Rack\x201':_0x18866b=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9];break;case'Rack\x202':_0x18866b=[0xa,0xb,0xc,0xd,0xe,0xf,0x10,0x11,0x12];break;}_0x3fde2d=['FG'];}}return{'levels':_0x18866b,'identify':_0x3fde2d};}router[a0_0x29d042(0x232)](a0_0x29d042(0x1d6),auth,async(_0x5243b0,_0x286870)=>{var _0x4538ed=a0_0x29d042;try{const {username:_0x364ab5,email:_0x3ee847,role:_0x16da7f}=_0x5243b0[_0x4538ed(0x1f3)],_0x1242b9=_0x5243b0[_0x4538ed(0x1f3)],_0x31949d=await profile[_0x4538ed(0x1cb)]({'email':_0x1242b9[_0x4538ed(0x1c6)]}),_0x51f15e=await master_shop[_0x4538ed(0x202)](),_0x162a5a=await transfers_finished[_0x4538ed(0x199)](_0x5243b0[_0x4538ed(0x1da)]['id']);let _0x368aea=new Date(_0x162a5a[_0x4538ed(0x23b)]),_0x5a773e=('0'+_0x368aea['getDate']())[_0x4538ed(0x21b)](-0x2),_0x2c0346=('0'+(_0x368aea[_0x4538ed(0x1b5)]()+0x1))[_0x4538ed(0x21b)](-0x2),_0x2b9252=_0x368aea[_0x4538ed(0x1b9)](),_0x1cca2a=_0x2b9252+'-'+_0x2c0346+'-'+_0x5a773e,_0x27bd67;if(_0x1242b9[_0x4538ed(0x1e1)]==_0x4538ed(0x1ae)){const _0x38bfa3=await staff[_0x4538ed(0x1cb)]({'email':_0x1242b9[_0x4538ed(0x1c6)]});_0x27bd67=await warehouse[_0x4538ed(0x202)]({'status':_0x4538ed(0x1fa),'name':_0x38bfa3[_0x4538ed(0x21a)],'warehouse_category':_0x4538ed(0x219)});}else _0x27bd67=await warehouse[_0x4538ed(0x202)]({'status':'Enabled','warehouse_category':'Finished\x20Goods'});const _0x5d86b4=await warehouse[_0x4538ed(0x234)]([{'$match':{'name':_0x162a5a[_0x4538ed(0x237)],'room':_0x162a5a[_0x4538ed(0x185)]}},{'$unwind':_0x4538ed(0x1b1)},{'$group':{'_id':_0x4538ed(0x1e8),'name':{'$first':_0x4538ed(0x228)},'product_stock':{'$first':_0x4538ed(0x1ec)},'bay':{'$first':_0x4538ed(0x1b8)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x4538ed(0x242)},'floorlevel':{'$first':_0x4538ed(0x24a)},'primary_code':{'$first':_0x4538ed(0x249)},'secondary_code':{'$first':_0x4538ed(0x1bd)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x4538ed(0x1be)},'rack':{'$first':_0x4538ed(0x1db)}}}]);var _0x40d6a2=[0x1,0x2,0x3,0x4],_0x18898a=['A','B','C','D','E','F','G','H','I','J'],_0x492600=[_0x4538ed(0x223),'Enclosed'];const _0x5f1cc0=await product['find']({}),_0x428ae3=BayBinSelected(_0x162a5a[_0x4538ed(0x23f)],_0x162a5a[_0x4538ed(0x19a)]);if(_0x51f15e[0x0][_0x4538ed(0x1ee)]==_0x4538ed(0x1fc)){var _0x1d9863=users[_0x4538ed(0x1f7)];console[_0x4538ed(0x1bf)](_0x1d9863);}else{if(_0x51f15e[0x0][_0x4538ed(0x1ee)]==_0x4538ed(0x1f9))var _0x1d9863=users[_0x4538ed(0x1f9)];else{if(_0x51f15e[0x0]['language']=='German')var _0x1d9863=users[_0x4538ed(0x1bc)];else{if(_0x51f15e[0x0][_0x4538ed(0x1ee)]==_0x4538ed(0x1ed))var _0x1d9863=users[_0x4538ed(0x1ed)];else{if(_0x51f15e[0x0][_0x4538ed(0x1ee)]=='French')var _0x1d9863=users[_0x4538ed(0x1e9)];else{if(_0x51f15e[0x0]['language']==_0x4538ed(0x247))var _0x1d9863=users[_0x4538ed(0x23a)];else{if(_0x51f15e[0x0][_0x4538ed(0x1ee)]==_0x4538ed(0x204))var _0x1d9863=users[_0x4538ed(0x204)];else{if(_0x51f15e[0x0][_0x4538ed(0x1ee)]=='Arabic\x20(ae)')var _0x1d9863=users['Arabic'];}}}}}}}_0x286870[_0x4538ed(0x1f4)](_0x4538ed(0x225),{'success':_0x5243b0[_0x4538ed(0x20e)](_0x4538ed(0x209)),'errors':_0x5243b0[_0x4538ed(0x20e)](_0x4538ed(0x23d)),'role':_0x1242b9,'profile':_0x31949d,'master_shop':_0x51f15e,'warehouse':_0x27bd67,'transfer':_0x162a5a,'stock':_0x5d86b4,'unit':_0x5f1cc0,'language':_0x1d9863,'levels':_0x40d6a2,'Isle':_0x18898a,'rooms_data':_0x492600,'ed_fullDate':_0x1cca2a,'dataSelected':_0x428ae3});}catch(_0x119251){console[_0x4538ed(0x1bf)](_0x119251);}}),router[a0_0x29d042(0x22d)](a0_0x29d042(0x1d6),auth,async(_0x556e44,_0x18244d)=>{var _0x44d020=a0_0x29d042;try{const _0x1e6b9f=_0x556e44[_0x44d020(0x1da)]['id'];console[_0x44d020(0x1bf)](_0x556e44[_0x44d020(0x243)]);const _0x182d45=await transfers_finished[_0x44d020(0x199)](_0x1e6b9f);console['log'](_0x44d020(0x1f8),_0x182d45);const {date:_0x572cfb,from_warehouse:_0x78b506,FromRoom_name:_0x24e3ee,to_warehouse:_0x5a390d,ToRoom_name:_0x2613fa,prod_name:_0x45ce3d,from_prod_qty:_0x37c422,from_prod_level:_0x78669c,from_prod_isle:_0x130ca7,from_prod_pallet:_0x1343da,to_prod_qty:_0xa9f15a,to_prod_level:_0x40157e,to_prod_isle:_0x525ca2,to_prod_pallet:_0x5a3f6d,primary_code:_0x3d79fa,secondary_code:_0x18f4a7,product_code3:_0x3b214c,note:_0x2cdac4,invoice:_0xbd0033,expiry_date:_0x47785e}=_0x556e44[_0x44d020(0x243)];if(typeof _0x45ce3d==_0x44d020(0x19b))var _0x31306c=[_0x556e44[_0x44d020(0x243)][_0x44d020(0x245)]],_0x18674b=[_0x556e44[_0x44d020(0x243)][_0x44d020(0x1cf)]],_0x53e1b4=[_0x556e44[_0x44d020(0x243)][_0x44d020(0x1ba)]],_0x43ae94=[_0x556e44[_0x44d020(0x243)][_0x44d020(0x1d4)]],_0xde3354=[_0x556e44[_0x44d020(0x243)]['to_prod_level']],_0x2698dc=[_0x556e44[_0x44d020(0x243)]['primary_code']],_0x3394a5=[_0x556e44['body'][_0x44d020(0x1ca)]],_0x48f0b7=[_0x556e44['body'][_0x44d020(0x1c9)]],_0x1ec027=[_0x556e44['body']['MaxStocks_data2']],_0x2ccdc1=[_0x556e44['body']['unit']],_0x4be98a=[_0x556e44[_0x44d020(0x243)][_0x44d020(0x1d5)]],_0x493aef=[_0x556e44[_0x44d020(0x243)]['batch_code']],_0x4b082d=[_0x556e44['body'][_0x44d020(0x23b)]];else var _0x31306c=[..._0x556e44[_0x44d020(0x243)]['prod_name']],_0x18674b=[..._0x556e44[_0x44d020(0x243)][_0x44d020(0x1cf)]],_0x53e1b4=[..._0x556e44[_0x44d020(0x243)][_0x44d020(0x1ba)]],_0x43ae94=[..._0x556e44['body'][_0x44d020(0x1d4)]],_0xde3354=[..._0x556e44[_0x44d020(0x243)][_0x44d020(0x213)]],_0x2698dc=[..._0x556e44[_0x44d020(0x243)][_0x44d020(0x1ef)]],_0x3394a5=[..._0x556e44[_0x44d020(0x243)][_0x44d020(0x1ca)]],_0x48f0b7=[..._0x556e44['body'][_0x44d020(0x1c9)]],_0x1ec027=[..._0x556e44[_0x44d020(0x243)]['MaxStocks_data2']],_0x2ccdc1=[..._0x556e44[_0x44d020(0x243)][_0x44d020(0x1e6)]],_0x4be98a=[..._0x556e44['body'][_0x44d020(0x1d5)]],_0x493aef=[..._0x556e44[_0x44d020(0x243)][_0x44d020(0x1d1)]],_0x4b082d=[..._0x556e44['body'][_0x44d020(0x23b)]];const _0x175df2=_0x31306c[_0x44d020(0x1af)](_0x42eb96=>{return _0x42eb96={'product_name':_0x42eb96};});_0x18674b[_0x44d020(0x212)]((_0x4fe4a7,_0x42f680)=>{_0x175df2[_0x42f680]['from_quantity']=_0x4fe4a7;}),_0x53e1b4['forEach']((_0x4ab481,_0x165d11)=>{var _0x2fec0c=_0x44d020;_0x175df2[_0x165d11][_0x2fec0c(0x1b0)]=_0x4ab481;}),_0x43ae94[_0x44d020(0x212)]((_0x51bace,_0x1f5e10)=>{_0x175df2[_0x1f5e10]['to_quantity']=_0x51bace;}),_0xde3354[_0x44d020(0x212)]((_0x25539b,_0xd453c7)=>{_0x175df2[_0xd453c7]['to_bay']=_0x25539b;}),_0x2698dc[_0x44d020(0x212)]((_0x57892b,_0x5a60ce)=>{var _0x6b971d=_0x44d020;_0x175df2[_0x5a60ce][_0x6b971d(0x1ef)]=_0x57892b;}),_0x3394a5[_0x44d020(0x212)]((_0x4b7ab3,_0x29a25c)=>{_0x175df2[_0x29a25c]['secondary_code']=_0x4b7ab3;}),_0x48f0b7['forEach']((_0x2a66c2,_0x22bbb4)=>{var _0x471ded=_0x44d020;_0x175df2[_0x22bbb4][_0x471ded(0x1a1)]=_0x2a66c2;}),_0x1ec027[_0x44d020(0x212)]((_0x4d9fcc,_0x4c7416)=>{_0x175df2[_0x4c7416]['maxProducts']=_0x4d9fcc;}),_0x2ccdc1[_0x44d020(0x212)]((_0x15cd49,_0x4117a8)=>{var _0x46c47b=_0x44d020;_0x175df2[_0x4117a8][_0x46c47b(0x1e6)]=_0x15cd49;}),_0x4be98a[_0x44d020(0x212)]((_0x58a8ec,_0x1970a0)=>{var _0x2da31f=_0x44d020;_0x175df2[_0x1970a0][_0x2da31f(0x1d5)]=_0x58a8ec;}),_0x493aef[_0x44d020(0x212)]((_0x1c1694,_0x24e946)=>{_0x175df2[_0x24e946]['batch_code']=_0x1c1694;}),_0x4b082d['forEach']((_0x199fbc,_0x31ea54)=>{var _0x408edf=_0x44d020;_0x175df2[_0x31ea54][_0x408edf(0x23b)]=_0x199fbc;});const _0x734959=_0x175df2[_0x44d020(0x240)](_0x258966=>_0x258966[_0x44d020(0x22a)]!=='0'&&_0x258966[_0x44d020(0x22a)]!==''||_0x258966['to_floorlevel']!=='0'&&_0x258966[_0x44d020(0x1fb)]!=='');var _0x4cae89=0x0;_0x734959[_0x44d020(0x212)](_0x1fc088=>{var _0x162d37=_0x44d020;parseInt(_0x1fc088[_0x162d37(0x195)])<parseInt(_0x1fc088[_0x162d37(0x22a)])&&_0x4cae89++;});if(_0x4cae89!=0x0)return _0x556e44[_0x44d020(0x20e)](_0x44d020(0x23d),_0x44d020(0x1ce)),_0x18244d[_0x44d020(0x1c1)](_0x44d020(0x1e3));const _0x21e13d=await warehouse[_0x44d020(0x1cb)]({'name':_0x182d45[_0x44d020(0x237)],'room':_0x182d45['from_room']});_0x182d45['product'][_0x44d020(0x212)](_0x5b1d29=>{var _0x17b50f=_0x44d020;if(_0x5b1d29[_0x17b50f(0x22a)]>0x0){const _0x38d6f7=_0x21e13d[_0x17b50f(0x184)][_0x17b50f(0x1af)](_0x4a175d=>{var _0x32310c=_0x17b50f;_0x4a175d[_0x32310c(0x22c)]==_0x5b1d29['product_name']&&_0x4a175d[_0x32310c(0x21f)]==_0x5b1d29['from_bay']&&(_0x4a175d['product_stock']=parseInt(_0x4a175d[_0x32310c(0x218)])+parseInt(_0x5b1d29[_0x32310c(0x22a)]));});}}),await _0x21e13d['save']();const _0x554c8d=await warehouse['findOne']({'name':_0x182d45[_0x44d020(0x23f)],'room':_0x182d45[_0x44d020(0x19a)]});_0x182d45['product']['forEach'](_0x52a9a3=>{var _0x53821a=_0x44d020;if(_0x52a9a3['to_quantity']>0x0){const _0x349c2f=_0x554c8d[_0x53821a(0x184)][_0x53821a(0x1af)](_0x470289=>{var _0x23b793=_0x53821a;_0x470289[_0x23b793(0x22c)]==_0x52a9a3[_0x23b793(0x22c)]&&_0x470289['bay']==_0x52a9a3['to_bay']&&(_0x470289[_0x23b793(0x218)]=parseInt(_0x470289[_0x23b793(0x218)])-parseInt(_0x52a9a3[_0x23b793(0x22a)]));});}}),await _0x554c8d[_0x44d020(0x246)](),_0x182d45[_0x44d020(0x22b)]=_0x572cfb,_0x182d45[_0x44d020(0x237)]=_0x78b506,_0x182d45['to_warehouse']=_0x5a390d,_0x182d45[_0x44d020(0x216)]=_0x734959,_0x182d45['note']=_0x2cdac4,_0x182d45['invoice']=_0xbd0033;const _0x26b004=await _0x182d45['save'](),_0x4f96bd=await warehouse['findOne']({'name':_0x78b506,'room':_0x24e3ee});_0x26b004[_0x44d020(0x216)][_0x44d020(0x212)](_0x37981b=>{var _0x2a80ba=_0x44d020;if(_0x37981b['to_quantity']>0x0){const _0x236953=_0x4f96bd[_0x2a80ba(0x184)][_0x2a80ba(0x1af)](_0x3a0917=>{var _0x2294c0=_0x2a80ba;_0x3a0917[_0x2294c0(0x22c)]==_0x37981b['product_name']&&_0x3a0917[_0x2294c0(0x21f)]==_0x37981b[_0x2294c0(0x1b0)]&&(_0x3a0917[_0x2294c0(0x218)]=parseInt(_0x3a0917[_0x2294c0(0x218)])-parseInt(_0x37981b[_0x2294c0(0x22a)]));});}}),await _0x4f96bd[_0x44d020(0x246)]();const _0x3c48a8=await warehouse[_0x44d020(0x1cb)]({'name':_0x5a390d,'room':_0x2613fa});_0x26b004[_0x44d020(0x216)][_0x44d020(0x212)](_0x549e30=>{var _0x2eb574=_0x44d020;if(_0x549e30[_0x2eb574(0x22a)]>0x0){var _0x26c559=0x0;const _0x3ac6b4=_0x3c48a8[_0x2eb574(0x184)][_0x2eb574(0x1af)](_0x9b0077=>{var _0x308be3=_0x2eb574;_0x9b0077['product_name']==_0x549e30[_0x308be3(0x22c)]&&_0x9b0077['bay']==_0x549e30['to_bay']&&(_0x9b0077['product_stock']=parseInt(_0x9b0077['product_stock'])+parseInt(_0x549e30[_0x308be3(0x22a)]),_0x26c559++);});_0x26c559=='0'&&(_0x3c48a8[_0x2eb574(0x184)]=_0x3c48a8['product_details'][_0x2eb574(0x20f)]({'product_name':_0x549e30['product_name'],'product_stock':_0x549e30[_0x2eb574(0x22a)],'bay':_0x549e30['to_bay'],'product_code':_0x549e30[_0x2eb574(0x1a1)],'primary_code':_0x549e30[_0x2eb574(0x1ef)],'secondary_code':_0x549e30['secondary_code'],'maxProducts':_0x549e30[_0x2eb574(0x19d)]}));}}),await _0x3c48a8['save'](),_0x556e44[_0x44d020(0x20e)]('success',_0x44d020(0x238)),_0x18244d[_0x44d020(0x1c1)](_0x44d020(0x1d9));}catch(_0x2802b7){console['log'](_0x2802b7);}}),router[a0_0x29d042(0x22d)](a0_0x29d042(0x1a2),async(_0x5e45e7,_0x382acb)=>{var _0x26c2b9=a0_0x29d042;const {FromWareHouse:_0x338ee5,FromRoom:_0x43f1ab,ToWarehouse:_0x162330,ToRoom:_0x21ac6f,primary_code:_0x30a787,Roomslist:_0x2cf534}=_0x5e45e7[_0x26c2b9(0x243)],_0x5c110b=_0x2cf534[_0x26c2b9(0x1c5)](','),_0x275208=[];async function _0x37630f(_0x5e83cd){var _0x31d993=_0x26c2b9;const _0x55e68a=await warehouse[_0x31d993(0x234)]([{'$match':{'name':_0x338ee5,'room':_0x5e83cd}},{'$unwind':_0x31d993(0x1b1)},{'$match':{'product_details.primary_code':_0x30a787}},{'$group':{'_id':_0x31d993(0x1e8),'name':{'$first':_0x31d993(0x228)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x31d993(0x249)},'secondary_code':{'$first':_0x31d993(0x1bd)},'product_code':{'$first':'$product_details.product_code'},'bay':{'$first':_0x31d993(0x1b8)},'level':{'$first':_0x31d993(0x19f)},'type':{'$first':_0x31d993(0x242)},'pallet':{'$first':_0x31d993(0x24a)},'unit':{'$first':_0x31d993(0x220)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0x31d993(0x1be)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x31d993(0x192)},'production_date':{'$first':_0x31d993(0x224)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x31d993(0x1a0)},'roomNamed':{'$first':'$room'},'prod_cat':{'$first':'P'},'invoice':{'$first':_0x31d993(0x1de)}}}]),_0x161e0c=await warehouse[_0x31d993(0x234)]([{'$match':{'name':_0x338ee5,'room':_0x5e83cd}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0x30a787}},{'$group':{'_id':_0x31d993(0x1e8),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x31d993(0x1ec)},'primary_code':{'$first':_0x31d993(0x249)},'secondary_code':{'$first':_0x31d993(0x1bd)},'product_code':{'$first':'$product_details.product_code'},'bay':{'$first':_0x31d993(0x1b8)},'level':{'$first':_0x31d993(0x19f)},'type':{'$first':_0x31d993(0x242)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x31d993(0x1e0)},'storage':{'$first':_0x31d993(0x1be)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x31d993(0x192)},'production_date':{'$first':_0x31d993(0x224)},'batch_code':{'$first':_0x31d993(0x1d3)},'maxPerUnit':{'$first':_0x31d993(0x1a0)},'roomNamed':{'$first':_0x31d993(0x1cc)},'prod_cat':{'$first':'S'},'invoice':{'$first':_0x31d993(0x1de)}}}]);if(_0x55e68a['length']>0x0)_0x275208[_0x31d993(0x18c)](_0x55e68a);else _0x161e0c[_0x31d993(0x1ab)]>0x0&&_0x275208[_0x31d993(0x18c)](_0x161e0c);}const _0x577ae7=_0x5c110b['map'](_0x4ec87b=>_0x37630f(_0x4ec87b));await Promise[_0x26c2b9(0x233)](_0x577ae7),_0x382acb['json'](_0x275208);}),router[a0_0x29d042(0x22d)](a0_0x29d042(0x21e),async(_0x298405,_0x51b11d)=>{var _0x43380c=a0_0x29d042;const {productCode:_0x5ea001,bay:_0x23b4a8,warehouses:_0xec2649,room:_0x10aa0f}=_0x298405[_0x43380c(0x243)];console[_0x43380c(0x1bf)](_0x298405[_0x43380c(0x243)]);try{const _0x419be7=await warehouse[_0x43380c(0x234)]([{'$match':{'name':_0xec2649,'room':_0x10aa0f}},{'$unwind':_0x43380c(0x1b1)},{'$match':{'product_details.bay':parseInt(_0x23b4a8)}},{'$group':{'_id':_0x43380c(0x1e8),'name':{'$first':_0x43380c(0x228)},'product_stock':{'$first':_0x43380c(0x1ec)},'bay':{'$first':'$product_details.bay'},'maxProducts':{'$first':_0x43380c(0x21c)}}}]);_0x51b11d[_0x43380c(0x24f)](0xc8)[_0x43380c(0x1b2)](_0x419be7);}catch(_0x22c091){_0x51b11d[_0x43380c(0x24f)](0x194)['json']({'message':_0x22c091[_0x43380c(0x1bb)]});}}),module[a0_0x29d042(0x1a3)]=router;