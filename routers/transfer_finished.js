var a0_0x1ab990=a0_0x2cf4;(function(_0x4ff328,_0x39d199){var _0x39a9fd=a0_0x2cf4,_0x58c8d6=_0x4ff328();while(!![]){try{var _0x563a08=-parseInt(_0x39a9fd(0xc5))/0x1*(-parseInt(_0x39a9fd(0x12c))/0x2)+parseInt(_0x39a9fd(0x97))/0x3+-parseInt(_0x39a9fd(0x85))/0x4*(-parseInt(_0x39a9fd(0x95))/0x5)+parseInt(_0x39a9fd(0x147))/0x6*(parseInt(_0x39a9fd(0xf1))/0x7)+-parseInt(_0x39a9fd(0x89))/0x8*(-parseInt(_0x39a9fd(0xc2))/0x9)+parseInt(_0x39a9fd(0x100))/0xa+parseInt(_0x39a9fd(0xd4))/0xb*(-parseInt(_0x39a9fd(0xc6))/0xc);if(_0x563a08===_0x39d199)break;else _0x58c8d6['push'](_0x58c8d6['shift']());}catch(_0x1c1622){_0x58c8d6['push'](_0x58c8d6['shift']());}}}(a0_0x33a9,0x7e40d));const express=require(a0_0x1ab990(0x143)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,invoice_for_transfer,transfers_logs}=require(a0_0x1ab990(0x11d)),auth=require(a0_0x1ab990(0x128)),users=require(a0_0x1ab990(0x120)),nodemailer=require('nodemailer');router[a0_0x1ab990(0xa5)]('/view',auth,async(_0xc6b7e9,_0x32a7c2)=>{var _0x496d5e=a0_0x1ab990;try{const {username:_0x543927,email:_0x4e56d5,role:_0x239c88}=_0xc6b7e9[_0x496d5e(0xb9)],_0x2c6bf2=_0xc6b7e9[_0x496d5e(0xb9)],_0x2f1597=await profile[_0x496d5e(0xdc)]({'email':_0x2c6bf2['email']}),_0x43aa14=await master_shop[_0x496d5e(0x8e)]();let _0xbc019a;if(_0x2c6bf2[_0x496d5e(0x81)]==_0x496d5e(0xfd)){const _0x1637ac=await staff[_0x496d5e(0xdc)]({'email':_0x2c6bf2['email']});_0xbc019a=await transfers_finished[_0x496d5e(0x8e)]({'from_warehouse':_0x1637ac[_0x496d5e(0x11c)]});}else _0xbc019a=await transfers_finished['aggregate']([{'$match':{'type_of_transaction':_0x496d5e(0xb5)}},{'$unwind':_0x496d5e(0x7c)},{'$group':{'_id':_0x496d5e(0xd6),'invoice':{'$first':_0x496d5e(0xe7)},'date':{'$first':_0x496d5e(0x9b)},'from_warehouse':{'$first':_0x496d5e(0x119)},'to_warehouse':{'$first':_0x496d5e(0xc8)},'from_room_name':{'$addToSet':'$product.from_room_name'},'to_room_name':{'$addToSet':_0x496d5e(0x102)},'finalize':{'$first':_0x496d5e(0xdd)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x43aa14[0x0][_0x496d5e(0xe6)]==_0x496d5e(0x13d))var _0x465247=users[_0x496d5e(0xe1)];else{if(_0x43aa14[0x0][_0x496d5e(0xe6)]==_0x496d5e(0xa2))var _0x465247=users[_0x496d5e(0xa2)];else{if(_0x43aa14[0x0]['language']=='German')var _0x465247=users[_0x496d5e(0x118)];else{if(_0x43aa14[0x0][_0x496d5e(0xe6)]=='Spanish')var _0x465247=users[_0x496d5e(0xbf)];else{if(_0x43aa14[0x0][_0x496d5e(0xe6)]==_0x496d5e(0xad))var _0x465247=users[_0x496d5e(0xad)];else{if(_0x43aa14[0x0]['language']=='Portuguese\x20(BR)')var _0x465247=users['Portuguese'];else{if(_0x43aa14[0x0]['language']==_0x496d5e(0xe3))var _0x465247=users[_0x496d5e(0xe3)];else{if(_0x43aa14[0x0][_0x496d5e(0xe6)]=='Arabic\x20(ae)')var _0x465247=users[_0x496d5e(0xaf)];}}}}}}}_0x32a7c2[_0x496d5e(0x139)]('transfer_finished',{'success':_0xc6b7e9[_0x496d5e(0xf0)](_0x496d5e(0x13a)),'errors':_0xc6b7e9[_0x496d5e(0xf0)](_0x496d5e(0x145)),'role':_0x2c6bf2,'profile':_0x2f1597,'master_shop':_0x43aa14,'transfer':_0xbc019a,'language':_0x465247});}catch(_0x4177c5){console[_0x496d5e(0x10c)](_0x4177c5);}}),router[a0_0x1ab990(0xa5)](a0_0x1ab990(0xc7),auth,async(_0x353bb2,_0x52dc5e)=>{var _0x62c1be=a0_0x1ab990;try{const {username:_0x48bdc5,email:_0x52a42e,role:_0x5e215b}=_0x353bb2['user'],_0xb44eb8=_0x353bb2[_0x62c1be(0xb9)],_0x4415e8=await profile[_0x62c1be(0xdc)]({'email':_0xb44eb8[_0x62c1be(0xa6)]}),_0x2e30af=await master_shop[_0x62c1be(0x8e)]();let _0x2b625d;if(_0xb44eb8[_0x62c1be(0x81)]==_0x62c1be(0xfd)){const _0x178e4b=await staff[_0x62c1be(0xdc)]({'email':_0xb44eb8['email']});_0x2b625d=await transfers_finished[_0x62c1be(0x8e)]({'from_warehouse':_0x178e4b[_0x62c1be(0x11c)]});}else _0x2b625d=await transfers_finished['aggregate']([{'$match':{'type_of_transaction':'logs'}},{'$unwind':_0x62c1be(0x7c)},{'$group':{'_id':_0x62c1be(0xd6),'invoice':{'$first':_0x62c1be(0xe7)},'date':{'$first':_0x62c1be(0x9b)},'from_warehouse':{'$first':'$from_warehouse'},'to_warehouse':{'$first':_0x62c1be(0xc8)},'from_room_name':{'$addToSet':_0x62c1be(0x127)},'to_room_name':{'$addToSet':_0x62c1be(0x102)},'finalize':{'$first':_0x62c1be(0xdd)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x2e30af[0x0][_0x62c1be(0xe6)]==_0x62c1be(0x13d))var _0x326004=users['English'];else{if(_0x2e30af[0x0]['language']=='Hindi')var _0x326004=users[_0x62c1be(0xa2)];else{if(_0x2e30af[0x0][_0x62c1be(0xe6)]==_0x62c1be(0x118))var _0x326004=users[_0x62c1be(0x118)];else{if(_0x2e30af[0x0][_0x62c1be(0xe6)]==_0x62c1be(0xbf))var _0x326004=users['Spanish'];else{if(_0x2e30af[0x0]['language']==_0x62c1be(0xad))var _0x326004=users[_0x62c1be(0xad)];else{if(_0x2e30af[0x0]['language']=='Portuguese\x20(BR)')var _0x326004=users[_0x62c1be(0xe2)];else{if(_0x2e30af[0x0][_0x62c1be(0xe6)]==_0x62c1be(0xe3))var _0x326004=users['Chinese'];else{if(_0x2e30af[0x0][_0x62c1be(0xe6)]=='Arabic\x20(ae)')var _0x326004=users[_0x62c1be(0xaf)];}}}}}}}_0x52dc5e[_0x62c1be(0x139)](_0x62c1be(0xc1),{'success':_0x353bb2['flash'](_0x62c1be(0x13a)),'errors':_0x353bb2['flash'](_0x62c1be(0x145)),'role':_0xb44eb8,'profile':_0x4415e8,'master_shop':_0x2e30af,'transfer':_0x2b625d,'language':_0x326004});}catch(_0x135834){console[_0x62c1be(0x10c)](_0x135834);}});async function getRandom8DigitNumber(){var _0x44c274=a0_0x1ab990;const _0x4c4fad=0x989680,_0x41aded=0x5f5e0ff,_0x233c4e=Math['floor'](Math[_0x44c274(0x108)]()*(_0x41aded-_0x4c4fad+0x1))+_0x4c4fad;var _0x1cf7d2;const _0x278311=await transfers_finished[_0x44c274(0xdc)]({'invoice':_0x44c274(0xff)+_0x233c4e});return _0x278311&&_0x278311[_0x44c274(0xaa)]>0x0?_0x1cf7d2=_0x44c274(0xff)+_0x233c4e:_0x1cf7d2='TRFF-'+_0x233c4e,_0x1cf7d2;}function a0_0x33a9(){var _0x26b9f3=['back','$room','id_transaction','$date','ToRoomAssigned','toString','An\x20error\x20occurred.','/transfer_finished/view','from_room_name','MaxStocks_data2','Hindi','getDate','from_level','get','email','To_invoice','secondary_code','abs','length','add_transfer_finished','Product\x20Transfer\x20successfully','French','params','Arabic','product_date','message','here2','from_prod_level2','True','own','$name','post','product_code','user','push','$product_details.secondary_unit','$product_details.invoice','batch_code','/barcode_scanner','Spanish','expiry_date','transfer_finished_logs','9XLESjL','invoice_init','primary_unit','1LIBuza','72mHTNFn','/view_logs','$to_warehouse','/view/:id','type_of_process','/view/add_transfer_logs','TRF-','To\x20An\x20error\x20occurred\x20while\x20saving\x20data.','undefined','LOG-TRF-','logs','FROZEN\x20GOODS','forEach','$product_details','5470707XzlEad','$product_details._id','$_id','$product_details.production_date','to_room_name','aggregate','prod_name','filter','findOne','$finalize','split','$product_details.batch_code','$product_details.level','English','Portuguese','Chinese','to_quantity','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','language','$invoice','$product_details.product_code','prod_cat','product_details','product_name','redirect','to_warehouse','_id','from_quantity','flash','7bBUMWk','$product_details.storage','DRY\x20GOODS','\x20<=>\x20','from_warehouse','</tr>','edit_transfer_finished_view','$product_details.secondary_code','from_invoice','padStart','$product_details.bin','maxProducts','staff','from_prod_qty','TRFF-','5524210aZgxvv','product','$product.to_room_name','$product_details.bay','primary_code','match','then','Arabic\x20(ae)','random','max','bin2bin','catch','log','$product_details.rack','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','$product_details.floorlevel','MaxStocks_data','to_level','to_bay','There\x27s\x20a\x20error\x20in\x20this\x20transaction','to_floorlevel','/CheckingWarehouse','from_room','error','German','$from_warehouse','secondary_unit','body','warehouse','../models/all_models','/picking_list/PDF_transfer/','findById','../public/language/languages.json','/transfer/view','RoomAssigned','/transfer_finished/preview/','production_date','invoice','Finished\x20Goods','$product.from_room_name','../middleware/auth','from_prod_level','to_prod_qty','New_Qty_Converted','127586ljTGwW','location2location','\x20<>\x20','/view/add_transfer_loc','Ambient','Portuguese\x20(BR)','string','$product_details.primary_code','product_stock','save','bay','choos_transfer','$product_details.product_name','render','success','/view/addlog','all','English\x20(US)','Rack\x202','concat','</td>','getMonth','/view/add_transfer','express','Transfer\x20Finalize\x20Successfully','errors','$product_details.product_stock','4281294cPuGaX','/view/choose','slice','status','to_prod_level','json','$product','$product_details.unit','exports','Enclosed','$product_details.type','role','transfer_data','/preview/:id','Enabled','932AEMkiw','An\x20error\x20occurred\x20while\x20saving\x20data.','getFullYear','$product_details.maxPerUnit','7968840MqOQun','Rack\x201','$product_details.maxProducts','finalize','map','find','maxPerUnit','unit','note','from_bay','product_code3','$product_details.expiry_date','12235HZjbrb','Transfer\x20Edit\x20Successfully','1815408JPIgai'];a0_0x33a9=function(){return _0x26b9f3;};return a0_0x33a9();}router[a0_0x1ab990(0xa5)](a0_0x1ab990(0x142),auth,async(_0x348d31,_0x29b401)=>{var _0x3b0719=a0_0x1ab990;try{const {username:_0x779494,email:_0x54a0e6,role:_0x590c58}=_0x348d31[_0x3b0719(0xb9)],_0x306873=_0x348d31[_0x3b0719(0xb9)],_0x558c05=await profile[_0x3b0719(0xdc)]({'email':_0x306873[_0x3b0719(0xa6)]}),_0x4451db=await master_shop['find']();let _0x4e0c0e;if(_0x306873[_0x3b0719(0x81)]==_0x3b0719(0xfd)){const _0x33c81a=await staff[_0x3b0719(0xdc)]({'email':_0x306873[_0x3b0719(0xa6)]});_0x4e0c0e=await warehouse[_0x3b0719(0xd9)]([{'$match':{'status':_0x3b0719(0x84),'name':_0x33c81a[_0x3b0719(0x11c)]}},{'$group':{'_id':_0x3b0719(0xb6),'name':{'$first':_0x3b0719(0xb6)}}}]);}else _0x4e0c0e=await warehouse[_0x3b0719(0xd9)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x3b0719(0xb6),'name':{'$first':'$name'}}}]);const _0x260579=await transfers_finished[_0x3b0719(0x8e)]({}),_0x4cf355=_0x260579['length']+0x1,_0x58d52e=_0x3b0719(0xff)+_0x4cf355[_0x3b0719(0x9d)]()[_0x3b0719(0xfa)](0x5,'0');if(_0x4451db[0x0]['language']==_0x3b0719(0x13d))var _0x32c7a5=users['English'];else{if(_0x4451db[0x0]['language']==_0x3b0719(0xa2))var _0x32c7a5=users['Hindi'];else{if(_0x4451db[0x0]['language']==_0x3b0719(0x118))var _0x32c7a5=users[_0x3b0719(0x118)];else{if(_0x4451db[0x0][_0x3b0719(0xe6)]==_0x3b0719(0xbf))var _0x32c7a5=users[_0x3b0719(0xbf)];else{if(_0x4451db[0x0][_0x3b0719(0xe6)]=='French')var _0x32c7a5=users['French'];else{if(_0x4451db[0x0]['language']==_0x3b0719(0x131))var _0x32c7a5=users[_0x3b0719(0xe2)];else{if(_0x4451db[0x0][_0x3b0719(0xe6)]=='Chinese')var _0x32c7a5=users[_0x3b0719(0xe3)];else{if(_0x4451db[0x0][_0x3b0719(0xe6)]==_0x3b0719(0x107))var _0x32c7a5=users[_0x3b0719(0xaf)];}}}}}}}const _0x4824f9=getRandom8DigitNumber();_0x4824f9[_0x3b0719(0x106)](_0x536561=>{var _0x412e66=_0x3b0719;_0x29b401[_0x412e66(0x139)](_0x412e66(0xab),{'success':_0x348d31[_0x412e66(0xf0)](_0x412e66(0x13a)),'errors':_0x348d31[_0x412e66(0xf0)]('errors'),'role':_0x306873,'profile':_0x558c05,'master_shop':_0x4451db,'warehouse':_0x4e0c0e,'language':_0x32c7a5,'invoice':_0x536561});})[_0x3b0719(0x10b)](_0x4f5c4c=>{var _0x3cd5ca=_0x3b0719;_0x348d31[_0x3cd5ca(0xf0)]('errors','There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x29b401[_0x3cd5ca(0xec)]('/transfer/view');});}catch(_0xbe37d){console[_0x3b0719(0x10c)](_0xbe37d);}}),router[a0_0x1ab990(0xa5)](a0_0x1ab990(0x148),auth,async(_0x2059b3,_0x3c9978)=>{var _0x3cd198=a0_0x1ab990;try{const {username:_0x424b32,email:_0x261e2d,role:_0x43ef2f}=_0x2059b3[_0x3cd198(0xb9)],_0x199ce4=_0x2059b3['user'],_0x308af7=await profile[_0x3cd198(0xdc)]({'email':_0x199ce4[_0x3cd198(0xa6)]}),_0x493d65=await master_shop['find']();let _0x4c816b;if(_0x199ce4[_0x3cd198(0x81)]=='staff'){const _0x40afff=await staff['findOne']({'email':_0x199ce4['email']});_0x4c816b=await warehouse[_0x3cd198(0xd9)]([{'$match':{'status':_0x3cd198(0x84),'name':_0x40afff[_0x3cd198(0x11c)]}},{'$group':{'_id':_0x3cd198(0xb6),'name':{'$first':_0x3cd198(0xb6)}}}]);}else _0x4c816b=await warehouse[_0x3cd198(0xd9)]([{'$match':{'status':_0x3cd198(0x84)}},{'$group':{'_id':_0x3cd198(0xb6),'name':{'$first':_0x3cd198(0xb6)}}}]);const _0x5ebdbe=await transfers_finished[_0x3cd198(0x8e)]({}),_0x23f40b=_0x5ebdbe[_0x3cd198(0xaa)]+0x1,_0x1e05b7='TRFF-'+_0x23f40b[_0x3cd198(0x9d)]()[_0x3cd198(0xfa)](0x5,'0');if(_0x493d65[0x0][_0x3cd198(0xe6)]==_0x3cd198(0x13d))var _0x493a82=users[_0x3cd198(0xe1)];else{if(_0x493d65[0x0]['language']==_0x3cd198(0xa2))var _0x493a82=users[_0x3cd198(0xa2)];else{if(_0x493d65[0x0][_0x3cd198(0xe6)]=='German')var _0x493a82=users['German'];else{if(_0x493d65[0x0]['language']==_0x3cd198(0xbf))var _0x493a82=users[_0x3cd198(0xbf)];else{if(_0x493d65[0x0][_0x3cd198(0xe6)]=='French')var _0x493a82=users['French'];else{if(_0x493d65[0x0]['language']==_0x3cd198(0x131))var _0x493a82=users[_0x3cd198(0xe2)];else{if(_0x493d65[0x0]['language']==_0x3cd198(0xe3))var _0x493a82=users[_0x3cd198(0xe3)];else{if(_0x493d65[0x0]['language']==_0x3cd198(0x107))var _0x493a82=users[_0x3cd198(0xaf)];}}}}}}}const _0x4fc913=getRandom8DigitNumber();_0x4fc913[_0x3cd198(0x106)](_0x386856=>{var _0x2c0f57=_0x3cd198;_0x3c9978['render'](_0x2c0f57(0x137),{'success':_0x2059b3[_0x2c0f57(0xf0)](_0x2c0f57(0x13a)),'errors':_0x2059b3['flash'](_0x2c0f57(0x145)),'role':_0x199ce4,'profile':_0x308af7,'master_shop':_0x493d65,'warehouse':_0x4c816b,'language':_0x493a82,'invoice':_0x386856});})[_0x3cd198(0x10b)](_0x18d594=>{var _0x74b1c4=_0x3cd198;_0x2059b3[_0x74b1c4(0xf0)](_0x74b1c4(0x145),_0x74b1c4(0x113)),_0x3c9978[_0x74b1c4(0xec)](_0x74b1c4(0x121));});}catch(_0x2a130c){console[_0x3cd198(0x10c)](_0x2a130c);}}),router[a0_0x1ab990(0xa5)]('/view/choose_logs',auth,async(_0x1ecc37,_0x5d768c)=>{var _0xfbd597=a0_0x1ab990;try{const {username:_0x33ba39,email:_0x5251da,role:_0x14ec67}=_0x1ecc37[_0xfbd597(0xb9)],_0x3b8f7e=_0x1ecc37[_0xfbd597(0xb9)],_0xd0aa26=await profile[_0xfbd597(0xdc)]({'email':_0x3b8f7e[_0xfbd597(0xa6)]}),_0x2e9f2f=await master_shop['find']();let _0xa79e18;if(_0x3b8f7e[_0xfbd597(0x81)]==_0xfbd597(0xfd)){const _0x47fef5=await staff[_0xfbd597(0xdc)]({'email':_0x3b8f7e[_0xfbd597(0xa6)]});_0xa79e18=await warehouse[_0xfbd597(0xd9)]([{'$match':{'status':_0xfbd597(0x84),'name':_0x47fef5['warehouse']}},{'$group':{'_id':_0xfbd597(0xb6),'name':{'$first':_0xfbd597(0xb6)}}}]);}else _0xa79e18=await warehouse[_0xfbd597(0xd9)]([{'$match':{'status':_0xfbd597(0x84)}},{'$group':{'_id':_0xfbd597(0xb6),'name':{'$first':'$name'}}}]);const _0xa10d42=await transfers_finished['find']({}),_0x5d033d=_0xa10d42[_0xfbd597(0xaa)]+0x1,_0x2b5fd3=_0xfbd597(0xff)+_0x5d033d[_0xfbd597(0x9d)]()[_0xfbd597(0xfa)](0x5,'0');if(_0x2e9f2f[0x0][_0xfbd597(0xe6)]=='English\x20(US)')var _0x576588=users[_0xfbd597(0xe1)];else{if(_0x2e9f2f[0x0][_0xfbd597(0xe6)]==_0xfbd597(0xa2))var _0x576588=users[_0xfbd597(0xa2)];else{if(_0x2e9f2f[0x0][_0xfbd597(0xe6)]==_0xfbd597(0x118))var _0x576588=users[_0xfbd597(0x118)];else{if(_0x2e9f2f[0x0]['language']==_0xfbd597(0xbf))var _0x576588=users[_0xfbd597(0xbf)];else{if(_0x2e9f2f[0x0][_0xfbd597(0xe6)]=='French')var _0x576588=users['French'];else{if(_0x2e9f2f[0x0]['language']==_0xfbd597(0x131))var _0x576588=users[_0xfbd597(0xe2)];else{if(_0x2e9f2f[0x0][_0xfbd597(0xe6)]==_0xfbd597(0xe3))var _0x576588=users[_0xfbd597(0xe3)];else{if(_0x2e9f2f[0x0]['language']==_0xfbd597(0x107))var _0x576588=users['Arabic'];}}}}}}}const _0x2f7017=getRandom8DigitNumber();_0x2f7017[_0xfbd597(0x106)](_0x11f2ad=>{var _0x3be020=_0xfbd597;_0x5d768c[_0x3be020(0x139)]('choos_transfer_logs',{'success':_0x1ecc37[_0x3be020(0xf0)](_0x3be020(0x13a)),'errors':_0x1ecc37[_0x3be020(0xf0)](_0x3be020(0x145)),'role':_0x3b8f7e,'profile':_0xd0aa26,'master_shop':_0x2e9f2f,'warehouse':_0xa79e18,'language':_0x576588,'invoice':_0x11f2ad});})[_0xfbd597(0x10b)](_0x266cd1=>{var _0x42f3d8=_0xfbd597;_0x1ecc37['flash'](_0x42f3d8(0x145),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x5d768c[_0x42f3d8(0xec)](_0x42f3d8(0x121));});}catch(_0x180936){console[_0xfbd597(0x10c)](_0x180936);}}),router[a0_0x1ab990(0xb7)](a0_0x1ab990(0xcb),auth,async(_0x595a0f,_0x4495cf)=>{var _0x3dacee=a0_0x1ab990;try{const {date:_0xb1bbc3,from_warehouse:_0x3c2215,FromRoom_name:_0x694ab9,to_warehouse:_0x447237,ToRoom_name:_0x22feb0,prod_name:_0x2184f4,from_prod_qty:_0x31f30c,from_prod_level:_0x46124f,from_prod_isle:_0x4e14bd,from_prod_pallet:_0x35aaff,to_prod_qty:_0x38bc78,to_prod_level:_0x1a4e29,to_prod_isle:_0x2d48a1,to_prod_pallet:_0x5f0d66,primary_code:_0x5e9475,secondary_code:_0x40f693,product_code3:_0x4f2c98,note:_0x438d17,MaxStocks_data2:_0x24c73f,invoice:_0x1cbe8d,expiry_date:_0x34e00a,PO_number:_0x316970,ReqBy:_0x3a1e0d,dateofreq:_0x48f322,typeservicesData:_0x59acd0,destination:_0x29cb02,deliverydate:_0x412b09,driver:_0x28a90e,plate:_0x70478b,van:_0x441481,DRSI:_0x32c167,typevehicle:_0x4bfa64,TSU:_0x1725c5,TFU:_0x4d7847}=_0x595a0f['body'];if(typeof _0x2184f4=='string')var _0x2692ea=[_0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xda)]],_0x2a44e2=[_0x595a0f[_0x3dacee(0x11b)]['from_prod_qty']],_0x1b751f=[_0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xb3)]],_0x368297=[_0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0x12b)]],_0x4b38d9=[_0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0x7a)]],_0x4668bc=[_0x595a0f[_0x3dacee(0x11b)]['primary_code']],_0x20dcbe=[_0x595a0f[_0x3dacee(0x11b)]['secondary_code']],_0x271ce9=[_0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0x93)]],_0x31eacf=[_0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xa1)]],_0x23174b=[_0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xc4)]],_0x58dcd3=[_0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0x11a)]],_0x4a942e=[_0x595a0f[_0x3dacee(0x11b)]['batch_code']],_0x5d8e36=[_0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xc0)]],_0x550ba3=[_0x595a0f['body'][_0x3dacee(0xb0)]],_0x5a7444=[_0x595a0f[_0x3dacee(0x11b)]['MaxStocks_data']],_0x5343cf=[_0x595a0f[_0x3dacee(0x11b)]['maxPerUnit']],_0x39ed99=[_0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xe9)]],_0x4233be=[_0x595a0f['body']['RoomAssigned']],_0x6ea107=[_0x595a0f[_0x3dacee(0x11b)]['ToRoomAssigned']],_0x1e8f2=[_0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xf9)]],_0x2ef540=[_0x595a0f['body'][_0x3dacee(0x9a)]];else var _0x2692ea=[..._0x595a0f['body']['prod_name']],_0x2a44e2=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xfe)]],_0x1b751f=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xb3)]],_0x368297=[..._0x595a0f[_0x3dacee(0x11b)]['New_Qty_Converted']],_0x4b38d9=[..._0x595a0f['body']['to_prod_level']],_0x4668bc=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0x104)]],_0x20dcbe=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xa8)]],_0x271ce9=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0x93)]],_0x31eacf=[..._0x595a0f[_0x3dacee(0x11b)]['MaxStocks_data2']],_0x23174b=[..._0x595a0f['body']['primary_unit']],_0x58dcd3=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0x11a)]],_0x4a942e=[..._0x595a0f['body'][_0x3dacee(0xbd)]],_0x5d8e36=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xc0)]],_0x550ba3=[..._0x595a0f['body']['product_date']],_0x5a7444=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0x110)]],_0x5343cf=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0x8f)]],_0x39ed99=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xe9)]],_0x4233be=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0x122)]],_0x6ea107=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0x9c)]],_0x1e8f2=[..._0x595a0f[_0x3dacee(0x11b)][_0x3dacee(0xf9)]],_0x2ef540=[..._0x595a0f['body']['id_transaction']];const _0x1ad913=_0x2692ea[_0x3dacee(0x8d)](_0x320bfd=>{return _0x320bfd={'product_name':_0x320bfd};});_0x2a44e2[_0x3dacee(0xd2)]((_0x507f0b,_0x445d63)=>{_0x1ad913[_0x445d63]['from_quantity']=_0x507f0b;}),_0x1b751f[_0x3dacee(0xd2)]((_0x10a3a3,_0x174ee8)=>{var _0x2b786b=_0x3dacee,_0x5c1d4b=_0x10a3a3['match'](/[A-Za-z]+/)[0x0],_0x277fba=parseInt(_0x10a3a3[_0x2b786b(0x105)](/\d+/)[0x0]);_0x1ad913[_0x174ee8][_0x2b786b(0x92)]=_0x277fba,_0x1ad913[_0x174ee8][_0x2b786b(0xa4)]=_0x5c1d4b;}),_0x2ef540[_0x3dacee(0xd2)]((_0x312592,_0x4787ec)=>{var _0x2d0902=_0x3dacee;_0x1ad913[_0x4787ec][_0x2d0902(0x9a)]=_0x312592;}),_0x1e8f2[_0x3dacee(0xd2)]((_0x4a6830,_0x49d047)=>{_0x1ad913[_0x49d047]['from_invoice']=_0x4a6830;}),_0x368297[_0x3dacee(0xd2)]((_0x2628fb,_0x3c415d)=>{_0x1ad913[_0x3c415d]['to_quantity']=_0x2628fb;}),_0x4b38d9[_0x3dacee(0xd2)]((_0x2ecfd7,_0x2746c0)=>{var _0xd7ba1d=_0x3dacee,_0x464caa=_0x2ecfd7[_0xd7ba1d(0x105)](/[A-Za-z]+/)[0x0],_0x31aeed=parseInt(_0x2ecfd7[_0xd7ba1d(0x105)](/\d+/)[0x0]);_0x1ad913[_0x2746c0][_0xd7ba1d(0x111)]=_0x464caa,_0x1ad913[_0x2746c0][_0xd7ba1d(0x112)]=_0x31aeed;}),_0x4668bc['forEach']((_0x1ac6b8,_0x1e6be0)=>{var _0x174c85=_0x3dacee;_0x1ad913[_0x1e6be0][_0x174c85(0x104)]=_0x1ac6b8;}),_0x20dcbe[_0x3dacee(0xd2)]((_0x3c310f,_0x1a1131)=>{var _0xff11c7=_0x3dacee;_0x1ad913[_0x1a1131][_0xff11c7(0xa8)]=_0x3c310f;}),_0x271ce9[_0x3dacee(0xd2)]((_0x2425e6,_0x5bc11a)=>{var _0x44fc3c=_0x3dacee;_0x1ad913[_0x5bc11a][_0x44fc3c(0xb8)]=_0x2425e6;}),_0x31eacf[_0x3dacee(0xd2)]((_0xddd2b6,_0x3a1664)=>{var _0x19a517=_0x3dacee;_0x1ad913[_0x3a1664][_0x19a517(0xfc)]=_0xddd2b6;}),_0x23174b[_0x3dacee(0xd2)]((_0x2d723a,_0x3eb993)=>{_0x1ad913[_0x3eb993]['unit']=_0x2d723a;}),_0x58dcd3[_0x3dacee(0xd2)]((_0x27fa72,_0x41c1b7)=>{var _0x1161dd=_0x3dacee;_0x1ad913[_0x41c1b7][_0x1161dd(0x11a)]=_0x27fa72;}),_0x4a942e[_0x3dacee(0xd2)]((_0x15e8ea,_0x155c4d)=>{var _0x231760=_0x3dacee;_0x1ad913[_0x155c4d][_0x231760(0xbd)]=_0x15e8ea;}),_0x5d8e36[_0x3dacee(0xd2)]((_0x106eb7,_0x3c6c25)=>{var _0x3e0a9e=_0x3dacee;_0x1ad913[_0x3c6c25][_0x3e0a9e(0xc0)]=_0x106eb7;}),_0x550ba3[_0x3dacee(0xd2)]((_0x2d85fb,_0x4a657d)=>{var _0x22739b=_0x3dacee;_0x1ad913[_0x4a657d][_0x22739b(0x124)]=_0x2d85fb;}),_0x5a7444['forEach']((_0xb3afd6,_0x73d379)=>{var _0x2c9c95=_0x3dacee;_0x1ad913[_0x73d379][_0x2c9c95(0xfc)]=_0xb3afd6;}),_0x5343cf[_0x3dacee(0xd2)]((_0x4e9bd5,_0x1ffdb3)=>{var _0x540abc=_0x3dacee;_0x1ad913[_0x1ffdb3][_0x540abc(0x8f)]=_0x4e9bd5;}),_0x39ed99['forEach']((_0x327587,_0x30f16f)=>{_0x1ad913[_0x30f16f]['prod_cat']=_0x327587;}),_0x4233be[_0x3dacee(0xd2)]((_0x4e573a,_0x576e80)=>{var _0xc583eb=_0x3dacee;_0x1ad913[_0x576e80][_0xc583eb(0xa0)]=_0x4e573a;}),_0x6ea107[_0x3dacee(0xd2)]((_0x45c977,_0x50d3af)=>{var _0x348957=_0x3dacee;_0x1ad913[_0x50d3af][_0x348957(0xd8)]=_0x45c977;});const _0x541443=_0x1ad913[_0x3dacee(0xdb)](_0x18da88=>_0x18da88[_0x3dacee(0xe4)]!=='0'&&_0x18da88[_0x3dacee(0xe4)]!==''||_0x18da88[_0x3dacee(0x114)]!=='0'&&_0x18da88['to_floorlevel']!=='');var _0x52e760=0x0;_0x541443[_0x3dacee(0xd2)](_0x28bfdc=>{parseInt(_0x28bfdc['from_quantity'])<parseInt(_0x28bfdc['to_quantity'])&&_0x52e760++;});if(_0x52e760!=0x0)return _0x595a0f['flash'](_0x3dacee(0x145),_0x3dacee(0xe5)),_0x4495cf[_0x3dacee(0xec)]('back');const _0x2475c5=new transfers_logs();await _0x2475c5[_0x3dacee(0x135)]();for(let _0x1b7a09=0x0;_0x1b7a09<=_0x6ea107['length']-0x1;_0x1b7a09++){_0x1ad913[_0x1b7a09][_0x3dacee(0xa7)]=_0x3dacee(0xcf)+_0x2475c5[_0x3dacee(0xc3)][_0x3dacee(0x9d)]()[_0x3dacee(0xfa)](0x8,'0');}const _0x409008=new transfers_finished({'date':_0xb1bbc3,'from_warehouse':_0x3c2215,'to_warehouse':_0x3c2215,'product':_0x541443,'note':_0x438d17,'invoice':_0x3dacee(0xcf)+_0x2475c5[_0x3dacee(0xc3)][_0x3dacee(0x9d)]()['padStart'](0x8,'0'),'type_of_process':_0x3dacee(0x10a),'type_of_transaction':_0x3dacee(0xd0),'PO_number':_0x316970,'RequestedBy':_0x3a1e0d,'DateofRequest':_0x48f322,'typeservices':_0x59acd0,'destination':_0x29cb02,'deliverydate':_0x412b09,'driver':_0x28a90e,'plate':_0x70478b,'van':_0x441481,'DRSI':_0x32c167,'typevehicle':_0x4bfa64,'TSU':_0x1725c5,'TFU':_0x4d7847}),_0x29d502=await _0x409008[_0x3dacee(0x135)]();_0x595a0f['flash'](_0x3dacee(0x13a),_0x3dacee(0xac)),_0x4495cf[_0x3dacee(0xec)](_0x3dacee(0x123)+_0x29d502[_0x3dacee(0xee)]);}catch(_0x49c919){console[_0x3dacee(0x10c)](_0x49c919),_0x4495cf['status'](0xc8)[_0x3dacee(0x7b)]({'errorMessage':_0x49c919[_0x3dacee(0xb1)]});}}),router[a0_0x1ab990(0xb7)](a0_0x1ab990(0x13b),auth,async(_0x29d3c1,_0x4cf6a7)=>{var _0x10d8cc=a0_0x1ab990;try{const {date:_0xf3ffde,from_warehouse:_0x57f5ac,FromRoom_name:_0x302c2f,to_warehouse:_0x41efb4,ToRoom_name:_0x381a11,prod_name:_0x5ca94c,from_prod_qty:_0x7774e7,from_prod_level:_0x2d9799,from_prod_isle:_0x5794b5,from_prod_pallet:_0x4b7a2f,to_prod_qty:_0x2bf767,to_prod_level:_0x20443e,to_prod_isle:_0x5f48d1,to_prod_pallet:_0x5382da,primary_code:_0x5007a0,secondary_code:_0x121529,product_code3:_0x441898,note:_0x779669,MaxStocks_data2:_0x1b9f8a,invoice:_0x326390,expiry_date:_0x14232a,PO_number_loc:_0x3199e5,ReqBy_loc:_0x199878,dateofreq_loc:_0x4848eb,typeservices_loc_Data:_0x3f9654,destination_loc:_0x5e0be3,deliverydate_loc:_0x731667,driver_loc:_0x3573f8,plate_loc:_0x5369a4,van_loc:_0xce7248,DRSI_loc:_0x57f8eb,typevehicle_loc:_0x4175b1,TSU_loc:_0x2db72f,TFU_loc:_0x157e6d}=_0x29d3c1[_0x10d8cc(0x11b)];if(typeof _0x5ca94c==_0x10d8cc(0x132))var _0x4a85f2=[_0x29d3c1[_0x10d8cc(0x11b)]['prod_name']],_0x39a542=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0xfe)]],_0x5e3c92=[_0x29d3c1['body'][_0x10d8cc(0xb3)]],_0x5c9b42=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0x12b)]],_0x3c8f23=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0x7a)]],_0x3ef2c9=[_0x29d3c1['body'][_0x10d8cc(0x104)]],_0x520365=[_0x29d3c1['body']['secondary_code']],_0x33ecf9=[_0x29d3c1[_0x10d8cc(0x11b)]['product_code3']],_0x4fabbe=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0xa1)]],_0x5176a1=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0xc4)]],_0x53fab9=[_0x29d3c1['body'][_0x10d8cc(0x11a)]],_0x15e1d4=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0xbd)]],_0x1c068b=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0xc0)]],_0xf7c4b1=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0xb0)]],_0xbf821e=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0x110)]],_0x5c7a1c=[_0x29d3c1['body'][_0x10d8cc(0x8f)]],_0x383cbd=[_0x29d3c1['body'][_0x10d8cc(0xe9)]],_0xc76719=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0x122)]],_0x5c72c8=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0x9c)]],_0x14a71d=[_0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0xf9)]],_0x6f8201=[_0x29d3c1['body'][_0x10d8cc(0x9a)]];else var _0x4a85f2=[..._0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0xda)]],_0x39a542=[..._0x29d3c1[_0x10d8cc(0x11b)]['from_prod_qty']],_0x5e3c92=[..._0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0xb3)]],_0x5c9b42=[..._0x29d3c1[_0x10d8cc(0x11b)]['New_Qty_Converted']],_0x3c8f23=[..._0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0x7a)]],_0x3ef2c9=[..._0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0x104)]],_0x520365=[..._0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0xa8)]],_0x33ecf9=[..._0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0x93)]],_0x4fabbe=[..._0x29d3c1['body']['MaxStocks_data2']],_0x5176a1=[..._0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0xc4)]],_0x53fab9=[..._0x29d3c1['body'][_0x10d8cc(0x11a)]],_0x15e1d4=[..._0x29d3c1[_0x10d8cc(0x11b)]['batch_code']],_0x1c068b=[..._0x29d3c1[_0x10d8cc(0x11b)]['expiry_date']],_0xf7c4b1=[..._0x29d3c1[_0x10d8cc(0x11b)]['product_date']],_0xbf821e=[..._0x29d3c1['body'][_0x10d8cc(0x110)]],_0x5c7a1c=[..._0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0x8f)]],_0x383cbd=[..._0x29d3c1['body'][_0x10d8cc(0xe9)]],_0xc76719=[..._0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0x122)]],_0x5c72c8=[..._0x29d3c1['body'][_0x10d8cc(0x9c)]],_0x14a71d=[..._0x29d3c1[_0x10d8cc(0x11b)]['from_invoice']],_0x6f8201=[..._0x29d3c1[_0x10d8cc(0x11b)][_0x10d8cc(0x9a)]];const _0x15e103=_0x4a85f2[_0x10d8cc(0x8d)](_0x47e036=>{return _0x47e036={'product_name':_0x47e036};});_0x39a542[_0x10d8cc(0xd2)]((_0x2cd2af,_0x21a898)=>{var _0x183da2=_0x10d8cc;_0x15e103[_0x21a898][_0x183da2(0xef)]=_0x2cd2af;}),_0x5e3c92[_0x10d8cc(0xd2)]((_0x3c75be,_0xafda6b)=>{var _0x2ea47f=_0x10d8cc,_0x3b9e6e=_0x3c75be[_0x2ea47f(0x105)](/[A-Za-z]+/)[0x0],_0x1051a3=parseInt(_0x3c75be[_0x2ea47f(0x105)](/\d+/)[0x0]);_0x15e103[_0xafda6b][_0x2ea47f(0x92)]=_0x1051a3,_0x15e103[_0xafda6b][_0x2ea47f(0xa4)]=_0x3b9e6e;}),_0x6f8201['forEach']((_0x436643,_0x13ffa9)=>{var _0x205e6f=_0x10d8cc;_0x15e103[_0x13ffa9][_0x205e6f(0x9a)]=_0x436643;}),_0x14a71d[_0x10d8cc(0xd2)]((_0x4474f7,_0x18bd4f)=>{var _0x22765a=_0x10d8cc;_0x15e103[_0x18bd4f][_0x22765a(0xf9)]=_0x4474f7;}),_0x5c9b42[_0x10d8cc(0xd2)]((_0x1f6a85,_0x337db7)=>{var _0x5e3242=_0x10d8cc;_0x15e103[_0x337db7][_0x5e3242(0xe4)]=_0x1f6a85;}),_0x3c8f23[_0x10d8cc(0xd2)]((_0x2474f9,_0x58c4a4)=>{var _0x5b27e4=_0x10d8cc,_0x4d388e=_0x2474f9[_0x5b27e4(0x105)](/[A-Za-z]+/)[0x0],_0x549ded=parseInt(_0x2474f9[_0x5b27e4(0x105)](/\d+/)[0x0]);_0x15e103[_0x58c4a4][_0x5b27e4(0x111)]=_0x4d388e,_0x15e103[_0x58c4a4][_0x5b27e4(0x112)]=_0x549ded;}),_0x3ef2c9['forEach']((_0x573d6f,_0x35ad96)=>{var _0x27b8b2=_0x10d8cc;_0x15e103[_0x35ad96][_0x27b8b2(0x104)]=_0x573d6f;}),_0x520365[_0x10d8cc(0xd2)]((_0x599c70,_0x27414e)=>{var _0x34f337=_0x10d8cc;_0x15e103[_0x27414e][_0x34f337(0xa8)]=_0x599c70;}),_0x33ecf9['forEach']((_0x2dbda8,_0x422468)=>{_0x15e103[_0x422468]['product_code']=_0x2dbda8;}),_0x4fabbe['forEach']((_0x25244a,_0x398611)=>{var _0x53d5b7=_0x10d8cc;_0x15e103[_0x398611][_0x53d5b7(0xfc)]=_0x25244a;}),_0x5176a1[_0x10d8cc(0xd2)]((_0x3c9757,_0x3fed35)=>{var _0x529cd1=_0x10d8cc;_0x15e103[_0x3fed35][_0x529cd1(0x90)]=_0x3c9757;}),_0x53fab9[_0x10d8cc(0xd2)]((_0x1b13f3,_0x171f09)=>{_0x15e103[_0x171f09]['secondary_unit']=_0x1b13f3;}),_0x15e1d4[_0x10d8cc(0xd2)]((_0x242db2,_0x2515c8)=>{var _0x453a11=_0x10d8cc;_0x15e103[_0x2515c8][_0x453a11(0xbd)]=_0x242db2;}),_0x1c068b['forEach']((_0x223cb4,_0x4e4f28)=>{var _0x21372a=_0x10d8cc;_0x15e103[_0x4e4f28][_0x21372a(0xc0)]=_0x223cb4;}),_0xf7c4b1[_0x10d8cc(0xd2)]((_0x485a46,_0x243941)=>{var _0x345430=_0x10d8cc;_0x15e103[_0x243941][_0x345430(0x124)]=_0x485a46;}),_0xbf821e['forEach']((_0x47e340,_0x5954f8)=>{_0x15e103[_0x5954f8]['maxProducts']=_0x47e340;}),_0x5c7a1c[_0x10d8cc(0xd2)]((_0x2843a8,_0x3c508e)=>{var _0x405408=_0x10d8cc;_0x15e103[_0x3c508e][_0x405408(0x8f)]=_0x2843a8;}),_0x383cbd[_0x10d8cc(0xd2)]((_0x94b8e0,_0x5879b8)=>{_0x15e103[_0x5879b8]['prod_cat']=_0x94b8e0;}),_0xc76719[_0x10d8cc(0xd2)]((_0x12577b,_0xcd0ba0)=>{var _0x466590=_0x10d8cc;_0x15e103[_0xcd0ba0][_0x466590(0xa0)]=_0x12577b;}),_0x5c72c8[_0x10d8cc(0xd2)]((_0x2d365e,_0x1b7b32)=>{_0x15e103[_0x1b7b32]['to_room_name']=_0x2d365e;});const _0x132ea8=_0x15e103[_0x10d8cc(0xdb)](_0x3863ea=>_0x3863ea[_0x10d8cc(0xe4)]!=='0'&&_0x3863ea[_0x10d8cc(0xe4)]!==''||_0x3863ea['to_floorlevel']!=='0'&&_0x3863ea['to_floorlevel']!=='');var _0x4fa52d=0x0;_0x132ea8[_0x10d8cc(0xd2)](_0x545280=>{var _0x215284=_0x10d8cc;parseInt(_0x545280['from_quantity'])<parseInt(_0x545280[_0x215284(0xe4)])&&_0x4fa52d++;});if(_0x4fa52d!=0x0)return _0x29d3c1[_0x10d8cc(0xf0)](_0x10d8cc(0x145),_0x10d8cc(0xe5)),_0x4cf6a7[_0x10d8cc(0xec)](_0x10d8cc(0x98));const _0x1e7dbf=new transfers_logs();await _0x1e7dbf[_0x10d8cc(0x135)]();for(let _0x40a8ea=0x0;_0x40a8ea<=_0x5c72c8[_0x10d8cc(0xaa)]-0x1;_0x40a8ea++){_0x15e103[_0x40a8ea][_0x10d8cc(0xa7)]=_0x10d8cc(0xcf)+_0x1e7dbf[_0x10d8cc(0xc3)][_0x10d8cc(0x9d)]()[_0x10d8cc(0xfa)](0x8,'0');}const _0x4f94b2=new transfers_finished({'date':_0xf3ffde,'from_warehouse':_0x57f5ac,'to_warehouse':_0x41efb4,'product':_0x132ea8,'note':_0x779669,'invoice':_0x10d8cc(0xcf)+_0x1e7dbf[_0x10d8cc(0xc3)][_0x10d8cc(0x9d)]()[_0x10d8cc(0xfa)](0x8,'0'),'type_of_transaction':_0x10d8cc(0xd0),'type_of_process':_0x10d8cc(0x12d),'PO_number':_0x3199e5,'RequestedBy':_0x199878,'DateofRequest':_0x4848eb,'typeservices':_0x3f9654,'destination':_0x5e0be3,'deliverydate':_0x731667,'driver':_0x3573f8,'plate':_0x5369a4,'van':_0xce7248,'DRSI':_0x57f8eb,'typevehicle':_0x4175b1,'TSU':_0x2db72f,'TFU':_0x157e6d}),_0x368a6a=await _0x4f94b2[_0x10d8cc(0x135)]();_0x29d3c1[_0x10d8cc(0xf0)](_0x10d8cc(0x13a),_0x10d8cc(0xac)),_0x4cf6a7[_0x10d8cc(0xec)](_0x10d8cc(0x123)+_0x368a6a[_0x10d8cc(0xee)]);}catch(_0x2beeb2){console[_0x10d8cc(0x10c)](_0x2beeb2),_0x4cf6a7['status'](0xc8)[_0x10d8cc(0x7b)]({'errorMessage':_0x2beeb2['message']});}}),router[a0_0x1ab990(0xb7)](a0_0x1ab990(0x142),auth,async(_0x27a5a5,_0x4cc381)=>{var _0x7156cd=a0_0x1ab990;try{const {date:_0x4e285d,from_warehouse:_0x58cce4,FromRoom_name:_0x158d88,to_warehouse:_0xf653a1,ToRoom_name:_0x13da11,prod_name:_0x2f6ca4,from_prod_qty:_0x5b07ea,from_prod_level:_0x161186,from_prod_isle:_0x2bf1b8,from_prod_pallet:_0x43f663,to_prod_qty:_0x31b4fc,to_prod_level:_0x298c42,to_prod_isle:_0x42b44d,to_prod_pallet:_0x2fc864,primary_code:_0x19fba0,secondary_code:_0x5ba62f,product_code3:_0x2ea3eb,note:_0x2f52be,MaxStocks_data2:_0x472945,invoice:_0x5d0c16,expiry_date:_0x4d61ee,PO_number:_0x4e740e,ReqBy:_0x5ebbd7,dateofreq:_0x452c69,typeservicesData:_0x1ff676,destination:_0xc23578,deliverydate:_0x53d550,driver:_0x52cde2,plate:_0x584490,van:_0x25feeb,DRSI:_0x4e1a0e,typevehicle:_0x5d27b3,TSU:_0x270145,TFU:_0x29e0a5}=_0x27a5a5[_0x7156cd(0x11b)];if(typeof _0x2f6ca4==_0x7156cd(0x132))var _0x4463ef=[_0x27a5a5['body'][_0x7156cd(0xda)]],_0x1338fa=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xfe)]],_0x10d992=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xb3)]],_0x128d65=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x12b)]],_0x5c5c76=[_0x27a5a5[_0x7156cd(0x11b)]['to_prod_level']],_0x5890aa=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x104)]],_0x19e67d=[_0x27a5a5['body'][_0x7156cd(0xa8)]],_0x3acc7e=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x93)]],_0x432b78=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xa1)]],_0x38fea5=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xc4)]],_0x1fb462=[_0x27a5a5[_0x7156cd(0x11b)]['secondary_unit']],_0x50a77f=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xbd)]],_0x193a92=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xc0)]],_0x1a2392=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xb0)]],_0x4f4478=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x110)]],_0x5355c1=[_0x27a5a5['body'][_0x7156cd(0x8f)]],_0x3400be=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xe9)]],_0x25be1c=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x122)]],_0x3d41a2=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x9c)]],_0x51fab0=[_0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xf9)]],_0x464d24=[_0x27a5a5['body'][_0x7156cd(0x9a)]];else var _0x4463ef=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xda)]],_0x1338fa=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xfe)]],_0x10d992=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xb3)]],_0x128d65=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x12b)]],_0x5c5c76=[..._0x27a5a5[_0x7156cd(0x11b)]['to_prod_level']],_0x5890aa=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x104)]],_0x19e67d=[..._0x27a5a5[_0x7156cd(0x11b)]['secondary_code']],_0x3acc7e=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x93)]],_0x432b78=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xa1)]],_0x38fea5=[..._0x27a5a5[_0x7156cd(0x11b)]['primary_unit']],_0x1fb462=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x11a)]],_0x50a77f=[..._0x27a5a5['body'][_0x7156cd(0xbd)]],_0x193a92=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xc0)]],_0x1a2392=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xb0)]],_0x4f4478=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x110)]],_0x5355c1=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x8f)]],_0x3400be=[..._0x27a5a5['body'][_0x7156cd(0xe9)]],_0x25be1c=[..._0x27a5a5['body'][_0x7156cd(0x122)]],_0x3d41a2=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0x9c)]],_0x51fab0=[..._0x27a5a5[_0x7156cd(0x11b)][_0x7156cd(0xf9)]],_0x464d24=[..._0x27a5a5['body']['id_transaction']];const _0x52da63=_0x4463ef[_0x7156cd(0x8d)](_0x169887=>{return _0x169887={'product_name':_0x169887};});_0x1338fa[_0x7156cd(0xd2)]((_0x37f916,_0x494067)=>{_0x52da63[_0x494067]['from_quantity']=_0x37f916;}),_0x10d992[_0x7156cd(0xd2)]((_0x3748c8,_0x564030)=>{var _0x3a5af8=_0x7156cd,_0x195d83=_0x3748c8['match'](/[A-Za-z]+/)[0x0],_0x3622c5=parseInt(_0x3748c8[_0x3a5af8(0x105)](/\d+/)[0x0]);_0x52da63[_0x564030][_0x3a5af8(0x92)]=_0x3622c5,_0x52da63[_0x564030]['from_level']=_0x195d83;}),_0x464d24['forEach']((_0x590c9c,_0x13784e)=>{var _0x589c27=_0x7156cd;_0x52da63[_0x13784e][_0x589c27(0x9a)]=_0x590c9c;}),_0x51fab0[_0x7156cd(0xd2)]((_0x1834fb,_0x2eede4)=>{var _0x35ee8f=_0x7156cd;_0x52da63[_0x2eede4][_0x35ee8f(0xf9)]=_0x1834fb;}),_0x128d65[_0x7156cd(0xd2)]((_0x1d09de,_0x391ec0)=>{_0x52da63[_0x391ec0]['to_quantity']=_0x1d09de;}),_0x5c5c76[_0x7156cd(0xd2)]((_0x367027,_0x48faaa)=>{var _0x1bf02a=_0x7156cd,_0x58fd6e=_0x367027['match'](/[A-Za-z]+/)[0x0],_0xa162e3=parseInt(_0x367027[_0x1bf02a(0x105)](/\d+/)[0x0]);_0x52da63[_0x48faaa][_0x1bf02a(0x111)]=_0x58fd6e,_0x52da63[_0x48faaa][_0x1bf02a(0x112)]=_0xa162e3;}),_0x5890aa[_0x7156cd(0xd2)]((_0xc40c82,_0x2b8d40)=>{var _0xc7cbad=_0x7156cd;_0x52da63[_0x2b8d40][_0xc7cbad(0x104)]=_0xc40c82;}),_0x19e67d[_0x7156cd(0xd2)]((_0x18c697,_0x4fe17b)=>{var _0x5b7190=_0x7156cd;_0x52da63[_0x4fe17b][_0x5b7190(0xa8)]=_0x18c697;}),_0x3acc7e[_0x7156cd(0xd2)]((_0xd4e0c6,_0x5b9411)=>{var _0x121b99=_0x7156cd;_0x52da63[_0x5b9411][_0x121b99(0xb8)]=_0xd4e0c6;}),_0x432b78[_0x7156cd(0xd2)]((_0x51f03d,_0x1dd8d6)=>{_0x52da63[_0x1dd8d6]['maxProducts']=_0x51f03d;}),_0x38fea5['forEach']((_0xf7def5,_0x4b694f)=>{var _0x4ff460=_0x7156cd;_0x52da63[_0x4b694f][_0x4ff460(0x90)]=_0xf7def5;}),_0x1fb462[_0x7156cd(0xd2)]((_0x35ea65,_0x346b9e)=>{_0x52da63[_0x346b9e]['secondary_unit']=_0x35ea65;}),_0x50a77f[_0x7156cd(0xd2)]((_0x5710c1,_0x415d38)=>{var _0x726aa8=_0x7156cd;_0x52da63[_0x415d38][_0x726aa8(0xbd)]=_0x5710c1;}),_0x193a92[_0x7156cd(0xd2)]((_0x5957b3,_0x24ad6)=>{_0x52da63[_0x24ad6]['expiry_date']=_0x5957b3;}),_0x1a2392['forEach']((_0x260292,_0x55a4e1)=>{_0x52da63[_0x55a4e1]['production_date']=_0x260292;}),_0x4f4478[_0x7156cd(0xd2)]((_0x16cd38,_0x3232d2)=>{_0x52da63[_0x3232d2]['maxProducts']=_0x16cd38;}),_0x5355c1[_0x7156cd(0xd2)]((_0x395ad4,_0x26621c)=>{var _0x2a8c9d=_0x7156cd;_0x52da63[_0x26621c][_0x2a8c9d(0x8f)]=_0x395ad4;}),_0x3400be['forEach']((_0x51b97d,_0x44a460)=>{_0x52da63[_0x44a460]['prod_cat']=_0x51b97d;}),_0x25be1c[_0x7156cd(0xd2)]((_0x174612,_0x5d1296)=>{var _0x55948e=_0x7156cd;_0x52da63[_0x5d1296][_0x55948e(0xa0)]=_0x174612;}),_0x3d41a2[_0x7156cd(0xd2)]((_0x234117,_0x17dba3)=>{var _0x2b5b84=_0x7156cd;_0x52da63[_0x17dba3][_0x2b5b84(0xd8)]=_0x234117;});const _0x3a5fc9=_0x52da63['filter'](_0x11c165=>_0x11c165[_0x7156cd(0xe4)]!=='0'&&_0x11c165[_0x7156cd(0xe4)]!==''||_0x11c165[_0x7156cd(0x114)]!=='0'&&_0x11c165[_0x7156cd(0x114)]!=='');var _0x50e3e5=0x0;_0x3a5fc9[_0x7156cd(0xd2)](_0x62a3c6=>{var _0x4b5a6f=_0x7156cd;parseInt(_0x62a3c6[_0x4b5a6f(0xef)])<parseInt(_0x62a3c6[_0x4b5a6f(0xe4)])&&_0x50e3e5++;});if(_0x50e3e5!=0x0)return _0x27a5a5[_0x7156cd(0xf0)](_0x7156cd(0x145),_0x7156cd(0xe5)),_0x4cc381[_0x7156cd(0xec)](_0x7156cd(0x98));const _0xee3212=new invoice_for_transfer();await _0xee3212[_0x7156cd(0x135)]();for(let _0xb98846=0x0;_0xb98846<=_0x3d41a2[_0x7156cd(0xaa)]-0x1;_0xb98846++){_0x52da63[_0xb98846]['To_invoice']=_0x7156cd(0xcc)+_0xee3212[_0x7156cd(0xc3)][_0x7156cd(0x9d)]()[_0x7156cd(0xfa)](0x8,'0');}const _0x3b619a=new transfers_finished({'date':_0x4e285d,'from_warehouse':_0x58cce4,'to_warehouse':_0x58cce4,'product':_0x3a5fc9,'note':_0x2f52be,'invoice':_0x7156cd(0xcc)+_0xee3212[_0x7156cd(0xc3)][_0x7156cd(0x9d)]()[_0x7156cd(0xfa)](0x8,'0'),'type_of_process':_0x7156cd(0x10a),'type_of_transaction':'own','PO_number':_0x4e740e,'RequestedBy':_0x5ebbd7,'DateofRequest':_0x452c69,'typeservices':_0x1ff676,'destination':_0xc23578,'deliverydate':_0x53d550,'driver':_0x52cde2,'plate':_0x584490,'van':_0x25feeb,'DRSI':_0x4e1a0e,'typevehicle':_0x5d27b3,'TSU':_0x270145,'TFU':_0x29e0a5}),_0x169ed1=await _0x3b619a[_0x7156cd(0x135)]();_0x27a5a5[_0x7156cd(0xf0)](_0x7156cd(0x13a),'Product\x20Transfer\x20successfully'),_0x4cc381[_0x7156cd(0xec)](_0x7156cd(0x123)+_0x169ed1[_0x7156cd(0xee)]);}catch(_0xaef89c){console[_0x7156cd(0x10c)](_0xaef89c),_0x4cc381[_0x7156cd(0x14a)](0xc8)[_0x7156cd(0x7b)]({'errorMessage':_0xaef89c[_0x7156cd(0xb1)]});}}),router[a0_0x1ab990(0xb7)](a0_0x1ab990(0x12f),auth,async(_0x4d637d,_0x5cd45f)=>{var _0x3ebae7=a0_0x1ab990;try{const {date:_0x3cffa2,from_warehouse:_0x36df21,FromRoom_name:_0x3ebc0b,to_warehouse:_0x350641,ToRoom_name:_0x5bccea,prod_name:_0x5ee15a,from_prod_qty:_0x9d667d,from_prod_level:_0x5e6a3c,from_prod_isle:_0x4e6b03,from_prod_pallet:_0x88e7f9,to_prod_qty:_0x4dd6f5,to_prod_level:_0x4dce33,to_prod_isle:_0x2edc86,to_prod_pallet:_0x32eba5,primary_code:_0x55a8ab,secondary_code:_0x22fd2d,product_code3:_0x4ff76f,note:_0x25d0cf,MaxStocks_data2:_0x6280bc,invoice:_0x5e9ad7,expiry_date:_0xc8843f,PO_number_loc:_0x538b79,ReqBy_loc:_0x581aec,dateofreq_loc:_0x5caebc,typeservices_loc_Data:_0x3582a0,destination_loc:_0x5dfdb5,deliverydate_loc:_0x57a0de,driver_loc:_0x473976,plate_loc:_0x3f388b,van_loc:_0x5eb39c,DRSI_loc:_0x3b9dda,typevehicle_loc:_0xb97afb,TSU_loc:_0x535fae,TFU_loc:_0x31a730}=_0x4d637d[_0x3ebae7(0x11b)];if(typeof _0x5ee15a==_0x3ebae7(0x132))var _0x36299b=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xda)]],_0x2c3a55=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xfe)]],_0x40ba78=[_0x4d637d['body'][_0x3ebae7(0xb3)]],_0x503c5e=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x12b)]],_0x2b9732=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x7a)]],_0x49caaa=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x104)]],_0x2bf9c1=[_0x4d637d[_0x3ebae7(0x11b)]['secondary_code']],_0x12a489=[_0x4d637d[_0x3ebae7(0x11b)]['product_code3']],_0x33512d=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xa1)]],_0x583bdc=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xc4)]],_0x5e1dea=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x11a)]],_0x29fc1d=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xbd)]],_0x2db8fa=[_0x4d637d['body']['expiry_date']],_0xcd9332=[_0x4d637d['body'][_0x3ebae7(0xb0)]],_0x4f7b9d=[_0x4d637d['body']['MaxStocks_data']],_0x3ce927=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x8f)]],_0x451399=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xe9)]],_0x5ad0b4=[_0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x122)]],_0x3a8010=[_0x4d637d[_0x3ebae7(0x11b)]['ToRoomAssigned']],_0x39dde0=[_0x4d637d['body'][_0x3ebae7(0xf9)]],_0x473a50=[_0x4d637d['body'][_0x3ebae7(0x9a)]];else var _0x36299b=[..._0x4d637d[_0x3ebae7(0x11b)]['prod_name']],_0x2c3a55=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xfe)]],_0x40ba78=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xb3)]],_0x503c5e=[..._0x4d637d[_0x3ebae7(0x11b)]['New_Qty_Converted']],_0x2b9732=[..._0x4d637d[_0x3ebae7(0x11b)]['to_prod_level']],_0x49caaa=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x104)]],_0x2bf9c1=[..._0x4d637d[_0x3ebae7(0x11b)]['secondary_code']],_0x12a489=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x93)]],_0x33512d=[..._0x4d637d['body']['MaxStocks_data2']],_0x583bdc=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xc4)]],_0x5e1dea=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x11a)]],_0x29fc1d=[..._0x4d637d[_0x3ebae7(0x11b)]['batch_code']],_0x2db8fa=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xc0)]],_0xcd9332=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xb0)]],_0x4f7b9d=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x110)]],_0x3ce927=[..._0x4d637d[_0x3ebae7(0x11b)]['maxPerUnit']],_0x451399=[..._0x4d637d['body'][_0x3ebae7(0xe9)]],_0x5ad0b4=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x122)]],_0x3a8010=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0x9c)]],_0x39dde0=[..._0x4d637d[_0x3ebae7(0x11b)][_0x3ebae7(0xf9)]],_0x473a50=[..._0x4d637d['body'][_0x3ebae7(0x9a)]];const _0x3a60ad=_0x36299b[_0x3ebae7(0x8d)](_0x9913d9=>{return _0x9913d9={'product_name':_0x9913d9};});_0x2c3a55[_0x3ebae7(0xd2)]((_0x355d97,_0x5481be)=>{_0x3a60ad[_0x5481be]['from_quantity']=_0x355d97;}),_0x40ba78['forEach']((_0x4a8bc3,_0x330e81)=>{var _0x4e7ac0=_0x3ebae7,_0x3b52b3=_0x4a8bc3[_0x4e7ac0(0x105)](/[A-Za-z]+/)[0x0],_0x3a36b0=parseInt(_0x4a8bc3[_0x4e7ac0(0x105)](/\d+/)[0x0]);_0x3a60ad[_0x330e81][_0x4e7ac0(0x92)]=_0x3a36b0,_0x3a60ad[_0x330e81]['from_level']=_0x3b52b3;}),_0x473a50[_0x3ebae7(0xd2)]((_0x40ea28,_0x34469b)=>{_0x3a60ad[_0x34469b]['id_transaction']=_0x40ea28;}),_0x39dde0[_0x3ebae7(0xd2)]((_0x410d94,_0x495f6b)=>{var _0x360f5c=_0x3ebae7;_0x3a60ad[_0x495f6b][_0x360f5c(0xf9)]=_0x410d94;}),_0x503c5e[_0x3ebae7(0xd2)]((_0x1225ae,_0x651381)=>{var _0x120253=_0x3ebae7;_0x3a60ad[_0x651381][_0x120253(0xe4)]=_0x1225ae;}),_0x2b9732[_0x3ebae7(0xd2)]((_0x543e38,_0x185d2c)=>{var _0x4c764d=_0x3ebae7,_0x2b4b20=_0x543e38[_0x4c764d(0x105)](/[A-Za-z]+/)[0x0],_0x1a0438=parseInt(_0x543e38[_0x4c764d(0x105)](/\d+/)[0x0]);_0x3a60ad[_0x185d2c]['to_level']=_0x2b4b20,_0x3a60ad[_0x185d2c]['to_bay']=_0x1a0438;}),_0x49caaa[_0x3ebae7(0xd2)]((_0x4f3393,_0x2cda0f)=>{var _0x2a5b77=_0x3ebae7;_0x3a60ad[_0x2cda0f][_0x2a5b77(0x104)]=_0x4f3393;}),_0x2bf9c1['forEach']((_0x120162,_0x500fc6)=>{var _0x3dd886=_0x3ebae7;_0x3a60ad[_0x500fc6][_0x3dd886(0xa8)]=_0x120162;}),_0x12a489[_0x3ebae7(0xd2)]((_0x39551f,_0x2b789c)=>{var _0x44b2fb=_0x3ebae7;_0x3a60ad[_0x2b789c][_0x44b2fb(0xb8)]=_0x39551f;}),_0x33512d['forEach']((_0x339fd6,_0x5e2b66)=>{var _0x17b15d=_0x3ebae7;_0x3a60ad[_0x5e2b66][_0x17b15d(0xfc)]=_0x339fd6;}),_0x583bdc[_0x3ebae7(0xd2)]((_0x1ff1bf,_0x3ec867)=>{_0x3a60ad[_0x3ec867]['unit']=_0x1ff1bf;}),_0x5e1dea[_0x3ebae7(0xd2)]((_0x44dc9d,_0x39205a)=>{var _0x5a4bcd=_0x3ebae7;_0x3a60ad[_0x39205a][_0x5a4bcd(0x11a)]=_0x44dc9d;}),_0x29fc1d[_0x3ebae7(0xd2)]((_0x57e85e,_0x3eb921)=>{var _0x4c7012=_0x3ebae7;_0x3a60ad[_0x3eb921][_0x4c7012(0xbd)]=_0x57e85e;}),_0x2db8fa[_0x3ebae7(0xd2)]((_0x5e1761,_0xf04a8f)=>{_0x3a60ad[_0xf04a8f]['expiry_date']=_0x5e1761;}),_0xcd9332['forEach']((_0x5925e8,_0x3afd1b)=>{var _0x93cc9=_0x3ebae7;_0x3a60ad[_0x3afd1b][_0x93cc9(0x124)]=_0x5925e8;}),_0x4f7b9d[_0x3ebae7(0xd2)]((_0x518e03,_0x30b3d1)=>{var _0x2f7b6b=_0x3ebae7;_0x3a60ad[_0x30b3d1][_0x2f7b6b(0xfc)]=_0x518e03;}),_0x3ce927[_0x3ebae7(0xd2)]((_0x4e692b,_0x2104fb)=>{var _0x14c264=_0x3ebae7;_0x3a60ad[_0x2104fb][_0x14c264(0x8f)]=_0x4e692b;}),_0x451399[_0x3ebae7(0xd2)]((_0x47aa7b,_0x2b6fba)=>{_0x3a60ad[_0x2b6fba]['prod_cat']=_0x47aa7b;}),_0x5ad0b4[_0x3ebae7(0xd2)]((_0x49b659,_0x4a6358)=>{var _0x358b27=_0x3ebae7;_0x3a60ad[_0x4a6358][_0x358b27(0xa0)]=_0x49b659;}),_0x3a8010[_0x3ebae7(0xd2)]((_0x3243c3,_0x2e30f3)=>{_0x3a60ad[_0x2e30f3]['to_room_name']=_0x3243c3;});const _0x57e60=_0x3a60ad[_0x3ebae7(0xdb)](_0x301e27=>_0x301e27[_0x3ebae7(0xe4)]!=='0'&&_0x301e27[_0x3ebae7(0xe4)]!==''||_0x301e27[_0x3ebae7(0x114)]!=='0'&&_0x301e27['to_floorlevel']!=='');var _0x1ee627=0x0;_0x57e60[_0x3ebae7(0xd2)](_0x22c798=>{var _0x1776df=_0x3ebae7;parseInt(_0x22c798['from_quantity'])<parseInt(_0x22c798[_0x1776df(0xe4)])&&_0x1ee627++;});if(_0x1ee627!=0x0)return _0x4d637d['flash'](_0x3ebae7(0x145),_0x3ebae7(0xe5)),_0x5cd45f['redirect'](_0x3ebae7(0x98));const _0x3055c9=new invoice_for_transfer();await _0x3055c9['save']();for(let _0x5256ed=0x0;_0x5256ed<=_0x3a8010[_0x3ebae7(0xaa)]-0x1;_0x5256ed++){_0x3a60ad[_0x5256ed]['To_invoice']=_0x3ebae7(0xcc)+_0x3055c9[_0x3ebae7(0xc3)]['toString']()[_0x3ebae7(0xfa)](0x8,'0');}const _0x124bc8=new transfers_finished({'date':_0x3cffa2,'from_warehouse':_0x36df21,'to_warehouse':_0x350641,'product':_0x57e60,'note':_0x25d0cf,'invoice':_0x3ebae7(0xcc)+_0x3055c9['invoice_init'][_0x3ebae7(0x9d)]()[_0x3ebae7(0xfa)](0x8,'0'),'type_of_transaction':_0x3ebae7(0xb5),'type_of_process':_0x3ebae7(0x12d),'PO_number':_0x538b79,'RequestedBy':_0x581aec,'DateofRequest':_0x5caebc,'typeservices':_0x3582a0,'destination':_0x5dfdb5,'deliverydate':_0x57a0de,'driver':_0x473976,'plate':_0x3f388b,'van':_0x5eb39c,'DRSI':_0x3b9dda,'typevehicle':_0xb97afb,'TSU':_0x535fae,'TFU':_0x31a730}),_0x1709e5=await _0x124bc8[_0x3ebae7(0x135)]();_0x4d637d[_0x3ebae7(0xf0)]('success',_0x3ebae7(0xac)),_0x5cd45f[_0x3ebae7(0xec)](_0x3ebae7(0x123)+_0x1709e5[_0x3ebae7(0xee)]);}catch(_0x4efeb9){console[_0x3ebae7(0x10c)](_0x4efeb9),_0x5cd45f[_0x3ebae7(0x14a)](0xc8)[_0x3ebae7(0x7b)]({'errorMessage':_0x4efeb9[_0x3ebae7(0xb1)]});}}),router['get'](a0_0x1ab990(0x83),auth,async(_0x59ffe6,_0x191979)=>{var _0x14fb3d=a0_0x1ab990;try{const {username:_0x73618e,email:_0x30a321,role:_0x12e0bd}=_0x59ffe6['user'],_0x19dee2=_0x59ffe6[_0x14fb3d(0xb9)],_0x2511e1=await profile['findOne']({'email':_0x19dee2[_0x14fb3d(0xa6)]}),_0x2a5779=await master_shop[_0x14fb3d(0x8e)](),_0x618932=await transfers_finished[_0x14fb3d(0x11f)](_0x59ffe6[_0x14fb3d(0xae)]['id']);let _0x25f9af;if(_0x19dee2['role']==_0x14fb3d(0xfd)){const _0x194b0a=await staff[_0x14fb3d(0xdc)]({'email':_0x19dee2[_0x14fb3d(0xa6)]});_0x25f9af=await warehouse['find']({'status':_0x14fb3d(0x84),'name':_0x194b0a[_0x14fb3d(0x11c)],'warehouse_category':'Finished\x20Goods'});}else _0x25f9af=await warehouse[_0x14fb3d(0x8e)]({'status':_0x14fb3d(0x84),'warehouse_category':_0x14fb3d(0x126)});const _0x1a698e=await warehouse[_0x14fb3d(0xd9)]([{'$match':{'name':_0x618932['from_warehouse'],'warehouse_category':'Finished\x20Goods'}},{'$unwind':_0x14fb3d(0xd3)},{'$group':{'_id':_0x14fb3d(0xd5),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x14fb3d(0x146)},'bay':{'$first':_0x14fb3d(0x103)},'bin':{'$first':_0x14fb3d(0xfb)},'type':{'$first':_0x14fb3d(0x80)},'floorlevel':{'$first':_0x14fb3d(0x10f)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x14fb3d(0xf8)},'product_code':{'$first':_0x14fb3d(0xe8)},'storage':{'$first':_0x14fb3d(0xf2)},'rack':{'$first':_0x14fb3d(0x10d)},'expiry_date':{'$first':_0x14fb3d(0x94)},'production_date':{'$first':_0x14fb3d(0xd7)},'room':{'$first':_0x14fb3d(0x99)},'warehoue_name':{'$first':_0x14fb3d(0xb6)}}}]),_0x2dc875=await product[_0x14fb3d(0x8e)]({});if(_0x2a5779[0x0][_0x14fb3d(0xe6)]=='English\x20(US)'){var _0x1bffd5=users['English'];console[_0x14fb3d(0x10c)](_0x1bffd5);}else{if(_0x2a5779[0x0][_0x14fb3d(0xe6)]=='Hindi')var _0x1bffd5=users[_0x14fb3d(0xa2)];else{if(_0x2a5779[0x0][_0x14fb3d(0xe6)]==_0x14fb3d(0x118))var _0x1bffd5=users[_0x14fb3d(0x118)];else{if(_0x2a5779[0x0][_0x14fb3d(0xe6)]==_0x14fb3d(0xbf))var _0x1bffd5=users[_0x14fb3d(0xbf)];else{if(_0x2a5779[0x0][_0x14fb3d(0xe6)]==_0x14fb3d(0xad))var _0x1bffd5=users['French'];else{if(_0x2a5779[0x0][_0x14fb3d(0xe6)]=='Portuguese\x20(BR)')var _0x1bffd5=users[_0x14fb3d(0xe2)];else{if(_0x2a5779[0x0][_0x14fb3d(0xe6)]=='Chinese')var _0x1bffd5=users[_0x14fb3d(0xe3)];else{if(_0x2a5779[0x0][_0x14fb3d(0xe6)]=='Arabic\x20(ae)')var _0x1bffd5=users[_0x14fb3d(0xaf)];}}}}}}}_0x191979[_0x14fb3d(0x139)](_0x14fb3d(0xf7),{'success':_0x59ffe6[_0x14fb3d(0xf0)]('success'),'errors':_0x59ffe6[_0x14fb3d(0xf0)](_0x14fb3d(0x145)),'role':_0x19dee2,'profile':_0x2511e1,'master_shop':_0x2a5779,'warehouse':_0x25f9af,'transfer':_0x618932,'stock':_0x1a698e,'unit':_0x2dc875,'language':_0x1bffd5});}catch(_0x4ab407){console[_0x14fb3d(0x10c)](_0x4ab407);}}),router[a0_0x1ab990(0xb7)](a0_0x1ab990(0x83),auth,async(_0x5c2cc7,_0x3c2697)=>{var _0xb1a1a1=a0_0x1ab990;try{const {invoice:_0x4d39e3,from_warehouse:_0x32cd71,FromRoom_name:_0xfcd33b,to_warehouse:_0x52abe7,ToRoom_name:_0x2d1d38}=_0x5c2cc7[_0xb1a1a1(0x11b)],_0x50bad0=await transfers_finished[_0xb1a1a1(0x11f)](_0x5c2cc7[_0xb1a1a1(0xae)]['id']),_0x1fdb53=_0x50bad0[_0xb1a1a1(0x101)][_0xb1a1a1(0x8d)](async _0x1718ad=>{var _0x498b47=_0xb1a1a1;if(_0x1718ad[_0x498b47(0xe4)]>0x0){var _0x474146=await warehouse[_0x498b47(0xdc)]({'name':_0x32cd71,'room':_0x1718ad['from_room_name']});const _0x4b1ae3=_0x474146[_0x498b47(0xea)][_0x498b47(0x8d)](_0x40df17=>{var _0x4239ab=_0x498b47;_0x40df17[_0x4239ab(0xee)]==_0x1718ad[_0x4239ab(0x9a)]&&(_0x40df17['product_stock']=Math[_0x4239ab(0x109)](0x0,Math[_0x4239ab(0xa9)](_0x40df17['product_stock'])-Math[_0x4239ab(0xa9)](_0x1718ad[_0x4239ab(0xe4)])),console[_0x4239ab(0x10c)](_0x40df17[_0x4239ab(0x134)]));});}return _0x474146;});Promise['all'](_0x1fdb53)[_0xb1a1a1(0x106)](async _0x1c700d=>{var _0x56952c=_0xb1a1a1;try{for(const _0x4184bd of _0x1c700d){await _0x4184bd[_0x56952c(0x135)]();}const _0x2edec6=_0x50bad0[_0x56952c(0x101)][_0x56952c(0x8d)](async _0x574a54=>{var _0x3b3dec=_0x56952c,_0x9b1bd4=await warehouse['findOne']({'name':_0x52abe7,'room':_0x574a54[_0x3b3dec(0xd8)]});if(_0x574a54['to_quantity']>0x0){var _0x94f117=0x0;const _0x5ad5f8=_0x9b1bd4[_0x3b3dec(0xea)][_0x3b3dec(0x8d)](_0x1a7c7a=>{var _0x328f32=_0x3b3dec;_0x1a7c7a[_0x328f32(0xeb)]==_0x574a54['product_name']&&_0x1a7c7a['bay']==_0x574a54[_0x328f32(0x112)]&&_0x1a7c7a[_0x328f32(0xc0)]==_0x574a54[_0x328f32(0xc0)]&&_0x1a7c7a[_0x328f32(0x124)]==_0x574a54[_0x328f32(0x124)]&&_0x1a7c7a['batch_code']==_0x574a54['batch_code']&&_0x1a7c7a[_0x328f32(0x125)]==_0x574a54[_0x328f32(0xa7)]&&(typeof _0x574a54[_0x328f32(0x9a)]==_0x328f32(0xce)?(console['log'](_0x328f32(0xb2),_0x1a7c7a[_0x328f32(0x134)]+_0x328f32(0x12e)+_0x1a7c7a[_0x328f32(0xee)]+_0x328f32(0xf4)+Math[_0x328f32(0xa9)](_0x1a7c7a['product_stock'])+Math[_0x328f32(0xa9)](_0x574a54[_0x328f32(0xe4)])),_0x1a7c7a[_0x328f32(0x134)]=Math[_0x328f32(0xa9)](_0x1a7c7a[_0x328f32(0x134)])+Math['abs'](_0x574a54[_0x328f32(0xe4)])):_0x1a7c7a[_0x328f32(0x134)]=Math[_0x328f32(0xa9)](_0x1a7c7a[_0x328f32(0x134)])+Math[_0x328f32(0xa9)](_0x574a54[_0x328f32(0xe4)]),_0x94f117++);});_0x94f117=='0'&&(_0x9b1bd4[_0x3b3dec(0xea)]=_0x9b1bd4[_0x3b3dec(0xea)][_0x3b3dec(0x13f)]({'product_name':_0x574a54[_0x3b3dec(0xeb)],'product_stock':_0x574a54[_0x3b3dec(0xe4)],'bay':_0x574a54['to_bay'],'level':_0x574a54['to_level'],'product_code':_0x574a54[_0x3b3dec(0xb8)],'primary_code':_0x574a54[_0x3b3dec(0x104)],'secondary_code':_0x574a54[_0x3b3dec(0xa8)],'expiry_date':_0x574a54[_0x3b3dec(0xc0)],'production_date':_0x574a54[_0x3b3dec(0x124)],'maxProducts':_0x574a54['maxProducts'],'batch_code':_0x574a54['batch_code'],'secondary_unit':_0x574a54[_0x3b3dec(0x11a)],'unit':_0x574a54[_0x3b3dec(0x90)],'maxProducts':_0x574a54[_0x3b3dec(0xfc)],'maxPerUnit':_0x574a54[_0x3b3dec(0x8f)],'invoice':_0x574a54[_0x3b3dec(0xa7)]}));}return _0x9b1bd4;});Promise[_0x56952c(0x13c)](_0x2edec6)[_0x56952c(0x106)](async _0x342b39=>{var _0x34af1b=_0x56952c;try{console['log'](_0x50bad0['type_of_process']);if(_0x50bad0[_0x34af1b(0xca)]!=_0x34af1b(0x12d))for(const _0x185f53 of _0x342b39){await warehouse['updateOne']({'_id':_0x185f53['_id']},{'$addToSet':{'product_details':{'$each':_0x185f53[_0x34af1b(0xea)]}}});}_0x50bad0[_0x34af1b(0x8c)]=_0x34af1b(0xb4);const _0x46270f=await _0x50bad0[_0x34af1b(0x135)](),_0x1bbdd5=await master_shop['find'](),_0x38aefc=await email_settings[_0x34af1b(0xdc)](),_0x1c5101=await supervisor_settings['find']();var _0x271ce2=_0x50bad0[_0x34af1b(0x101)],_0x4563e7='',_0x4db902;for(_0x4db902 in _0x271ce2){var _0x2de01b='FG';_0x50bad0[_0x34af1b(0xed)]==_0x34af1b(0xf3)&&(_0x2de01b='DG'),_0x4563e7+='<tr>'+_0x34af1b(0x10e)+_0x271ce2[_0x4db902]['product_name']+_0x34af1b(0x140)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x271ce2[_0x4db902][_0x34af1b(0xb8)]+_0x34af1b(0x140)+_0x34af1b(0x10e)+_0x271ce2[_0x4db902][_0x34af1b(0xe4)]+_0x34af1b(0x140)+_0x34af1b(0x10e)+_0x271ce2[_0x4db902][_0x34af1b(0x90)]+_0x34af1b(0x140)+_0x34af1b(0x10e)+_0x271ce2[_0x4db902][_0x34af1b(0x11a)]+'</td>'+_0x34af1b(0x10e)+_0x50bad0['to_warehouse']+_0x34af1b(0x140)+_0x34af1b(0x10e)+_0x271ce2[_0x4db902][_0x34af1b(0xd8)]+_0x34af1b(0x140)+_0x34af1b(0x10e)+_0x2de01b+_0x271ce2[_0x4db902][_0x34af1b(0x112)]+_0x34af1b(0x140)+_0x34af1b(0xf6);}_0x5c2cc7[_0x34af1b(0xf0)]('success',_0x34af1b(0x144)),_0x3c2697[_0x34af1b(0xec)](_0x34af1b(0x11e)+_0x46270f[_0x34af1b(0xee)]);}catch(_0x179547){console['error'](_0x179547),_0x3c2697[_0x34af1b(0x14a)](0x1f4)[_0x34af1b(0x7b)]({'error':_0x34af1b(0xcd)});}})[_0x56952c(0x10b)](_0x58868a=>{var _0x45587c=_0x56952c;console[_0x45587c(0x117)](_0x58868a),_0x3c2697[_0x45587c(0x14a)](0x1f4)['json']({'error':_0x45587c(0x9e)});});}catch(_0x47166f){console['error'](_0x47166f),_0x3c2697[_0x56952c(0x14a)](0x1f4)[_0x56952c(0x7b)]({'error':_0x56952c(0x86)});}})['catch'](_0x4f653d=>{var _0x398eff=_0xb1a1a1;console[_0x398eff(0x117)](_0x4f653d),_0x3c2697[_0x398eff(0x14a)](0x1f4)[_0x398eff(0x7b)]({'error':_0x398eff(0x9e)});});}catch(_0xb1526d){_0x3c2697['json']({'message':_0xb1526d[_0xb1a1a1(0xb1)]});}});function BayBinSelected(_0x4be7ea,_0x21ca24){var _0x414f92=a0_0x1ab990,_0x14d08e=[];let _0x39f9a0=[];var _0x2273c5=[];if(_0x4be7ea==_0x414f92(0xf3)){switch(_0x21ca24){case _0x414f92(0x8a):_0x14d08e=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10];break;case'Rack\x202':_0x14d08e=[0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20];break;}_0x2273c5=['DG'];}else{if(_0x4be7ea==_0x414f92(0xd1)){switch(_0x21ca24){case'Rack\x201':_0x14d08e=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9];break;case _0x414f92(0x13e):_0x14d08e=[0xa,0xb,0xc,0xd,0xe,0xf,0x10,0x11,0x12];break;}_0x2273c5=['FG'];}}return{'levels':_0x14d08e,'identify':_0x2273c5};}function a0_0x2cf4(_0x13cc91,_0x426047){var _0x33a954=a0_0x33a9();return a0_0x2cf4=function(_0x2cf477,_0x356130){_0x2cf477=_0x2cf477-0x7a;var _0x176c5a=_0x33a954[_0x2cf477];return _0x176c5a;},a0_0x2cf4(_0x13cc91,_0x426047);}router[a0_0x1ab990(0xa5)](a0_0x1ab990(0xc9),auth,async(_0x3be2ba,_0x1edc5c)=>{var _0x30dc8d=a0_0x1ab990;try{const {username:_0x187b2b,email:_0x358ea1,role:_0x494786}=_0x3be2ba[_0x30dc8d(0xb9)],_0x39b456=_0x3be2ba['user'],_0x950d66=await profile[_0x30dc8d(0xdc)]({'email':_0x39b456['email']}),_0x53ca22=await master_shop[_0x30dc8d(0x8e)](),_0x3c36c4=await transfers_finished[_0x30dc8d(0x11f)](_0x3be2ba[_0x30dc8d(0xae)]['id']);let _0x4efe96=new Date(_0x3c36c4[_0x30dc8d(0xc0)]),_0xf64da8=('0'+_0x4efe96[_0x30dc8d(0xa3)]())['slice'](-0x2),_0x3e35d2=('0'+(_0x4efe96[_0x30dc8d(0x141)]()+0x1))[_0x30dc8d(0x149)](-0x2),_0xddc69b=_0x4efe96[_0x30dc8d(0x87)](),_0x2a543a=_0xddc69b+'-'+_0x3e35d2+'-'+_0xf64da8,_0x3e9f37;if(_0x39b456[_0x30dc8d(0x81)]=='staff'){const _0x17a813=await staff[_0x30dc8d(0xdc)]({'email':_0x39b456[_0x30dc8d(0xa6)]});_0x3e9f37=await warehouse[_0x30dc8d(0x8e)]({'status':'Enabled','name':_0x17a813[_0x30dc8d(0x11c)],'warehouse_category':_0x30dc8d(0x126)});}else _0x3e9f37=await warehouse[_0x30dc8d(0x8e)]({'status':'Enabled','warehouse_category':_0x30dc8d(0x126)});const _0x201a0a=await warehouse['aggregate']([{'$match':{'name':_0x3c36c4[_0x30dc8d(0xf5)],'room':_0x3c36c4['from_room']}},{'$unwind':_0x30dc8d(0xd3)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x30dc8d(0x138)},'product_stock':{'$first':_0x30dc8d(0x146)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x30dc8d(0xfb)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x30dc8d(0x10f)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x30dc8d(0xf8)},'product_code':{'$first':_0x30dc8d(0xe8)},'storage':{'$first':_0x30dc8d(0xf2)},'rack':{'$first':_0x30dc8d(0x10d)}}}]);var _0x348a3f=[0x1,0x2,0x3,0x4],_0x25bc78=['A','B','C','D','E','F','G','H','I','J'],_0x1fe13a=[_0x30dc8d(0x130),_0x30dc8d(0x7f)];const _0x155d7c=await product[_0x30dc8d(0x8e)]({}),_0x5d2df3=BayBinSelected(_0x3c36c4['to_warehouse'],_0x3c36c4['to_room']);if(_0x53ca22[0x0][_0x30dc8d(0xe6)]==_0x30dc8d(0x13d)){var _0x434ac5=users['English'];console['log'](_0x434ac5);}else{if(_0x53ca22[0x0][_0x30dc8d(0xe6)]==_0x30dc8d(0xa2))var _0x434ac5=users[_0x30dc8d(0xa2)];else{if(_0x53ca22[0x0][_0x30dc8d(0xe6)]==_0x30dc8d(0x118))var _0x434ac5=users[_0x30dc8d(0x118)];else{if(_0x53ca22[0x0][_0x30dc8d(0xe6)]==_0x30dc8d(0xbf))var _0x434ac5=users[_0x30dc8d(0xbf)];else{if(_0x53ca22[0x0][_0x30dc8d(0xe6)]==_0x30dc8d(0xad))var _0x434ac5=users['French'];else{if(_0x53ca22[0x0][_0x30dc8d(0xe6)]=='Portuguese\x20(BR)')var _0x434ac5=users['Portuguese'];else{if(_0x53ca22[0x0]['language']=='Chinese')var _0x434ac5=users[_0x30dc8d(0xe3)];else{if(_0x53ca22[0x0][_0x30dc8d(0xe6)]==_0x30dc8d(0x107))var _0x434ac5=users[_0x30dc8d(0xaf)];}}}}}}}_0x1edc5c[_0x30dc8d(0x139)]('edit_transfer_finished',{'success':_0x3be2ba['flash'](_0x30dc8d(0x13a)),'errors':_0x3be2ba[_0x30dc8d(0xf0)](_0x30dc8d(0x145)),'role':_0x39b456,'profile':_0x950d66,'master_shop':_0x53ca22,'warehouse':_0x3e9f37,'transfer':_0x3c36c4,'stock':_0x201a0a,'unit':_0x155d7c,'language':_0x434ac5,'levels':_0x348a3f,'Isle':_0x25bc78,'rooms_data':_0x1fe13a,'ed_fullDate':_0x2a543a,'dataSelected':_0x5d2df3});}catch(_0x21ff5d){console[_0x30dc8d(0x10c)](_0x21ff5d);}}),router[a0_0x1ab990(0xb7)](a0_0x1ab990(0xc9),auth,async(_0xd8a22,_0x3d1edc)=>{var _0x16541d=a0_0x1ab990;try{const _0x5453fd=_0xd8a22[_0x16541d(0xae)]['id'];console['log'](_0xd8a22[_0x16541d(0x11b)]);const _0x1c27c0=await transfers_finished[_0x16541d(0x11f)](_0x5453fd);console[_0x16541d(0x10c)](_0x16541d(0x82),_0x1c27c0);const {date:_0x3cc648,from_warehouse:_0x345f80,FromRoom_name:_0x3ad7ea,to_warehouse:_0x15f13c,ToRoom_name:_0x3bb5f7,prod_name:_0x16e39d,from_prod_qty:_0x449e93,from_prod_level:_0x5321aa,from_prod_isle:_0x179f1b,from_prod_pallet:_0x23107b,to_prod_qty:_0x179af0,to_prod_level:_0x3f7976,to_prod_isle:_0x21fcaf,to_prod_pallet:_0x2e0a73,primary_code:_0x34672c,secondary_code:_0x168dcc,product_code3:_0xc197c5,note:_0x3d9746,invoice:_0xd17077,expiry_date:_0x156ef9}=_0xd8a22[_0x16541d(0x11b)];if(typeof _0x16e39d==_0x16541d(0x132))var _0x584d9f=[_0xd8a22['body'][_0x16541d(0xda)]],_0x299d51=[_0xd8a22['body'][_0x16541d(0xfe)]],_0x3f830b=[_0xd8a22[_0x16541d(0x11b)][_0x16541d(0x129)]],_0x16bdb0=[_0xd8a22['body'][_0x16541d(0x12a)]],_0x5842cf=[_0xd8a22[_0x16541d(0x11b)][_0x16541d(0x7a)]],_0x34d26c=[_0xd8a22['body'][_0x16541d(0x104)]],_0x3a010d=[_0xd8a22[_0x16541d(0x11b)][_0x16541d(0xa8)]],_0x35b8bd=[_0xd8a22['body'][_0x16541d(0x93)]],_0x2526b0=[_0xd8a22[_0x16541d(0x11b)][_0x16541d(0xa1)]],_0x26524c=[_0xd8a22[_0x16541d(0x11b)][_0x16541d(0x90)]],_0x98f3c2=[_0xd8a22['body'][_0x16541d(0x11a)]],_0x126248=[_0xd8a22[_0x16541d(0x11b)]['batch_code']],_0x32c558=[_0xd8a22[_0x16541d(0x11b)][_0x16541d(0xc0)]];else var _0x584d9f=[..._0xd8a22[_0x16541d(0x11b)][_0x16541d(0xda)]],_0x299d51=[..._0xd8a22[_0x16541d(0x11b)][_0x16541d(0xfe)]],_0x3f830b=[..._0xd8a22[_0x16541d(0x11b)][_0x16541d(0x129)]],_0x16bdb0=[..._0xd8a22[_0x16541d(0x11b)]['to_prod_qty']],_0x5842cf=[..._0xd8a22[_0x16541d(0x11b)][_0x16541d(0x7a)]],_0x34d26c=[..._0xd8a22[_0x16541d(0x11b)]['primary_code']],_0x3a010d=[..._0xd8a22[_0x16541d(0x11b)][_0x16541d(0xa8)]],_0x35b8bd=[..._0xd8a22[_0x16541d(0x11b)][_0x16541d(0x93)]],_0x2526b0=[..._0xd8a22[_0x16541d(0x11b)][_0x16541d(0xa1)]],_0x26524c=[..._0xd8a22['body'][_0x16541d(0x90)]],_0x98f3c2=[..._0xd8a22[_0x16541d(0x11b)][_0x16541d(0x11a)]],_0x126248=[..._0xd8a22[_0x16541d(0x11b)][_0x16541d(0xbd)]],_0x32c558=[..._0xd8a22['body'][_0x16541d(0xc0)]];const _0x52e1ad=_0x584d9f[_0x16541d(0x8d)](_0x4b34eb=>{return _0x4b34eb={'product_name':_0x4b34eb};});_0x299d51[_0x16541d(0xd2)]((_0x4cf7b5,_0x40903b)=>{var _0x24007c=_0x16541d;_0x52e1ad[_0x40903b][_0x24007c(0xef)]=_0x4cf7b5;}),_0x3f830b['forEach']((_0x3ca1fd,_0x3f0f34)=>{var _0x750e3e=_0x16541d;_0x52e1ad[_0x3f0f34][_0x750e3e(0x92)]=_0x3ca1fd;}),_0x16bdb0[_0x16541d(0xd2)]((_0x38483c,_0x4ae59c)=>{var _0xb60746=_0x16541d;_0x52e1ad[_0x4ae59c][_0xb60746(0xe4)]=_0x38483c;}),_0x5842cf[_0x16541d(0xd2)]((_0x4f36cb,_0x356fb9)=>{var _0x4c2dda=_0x16541d;_0x52e1ad[_0x356fb9][_0x4c2dda(0x112)]=_0x4f36cb;}),_0x34d26c[_0x16541d(0xd2)]((_0x5ca2cf,_0x4ddc49)=>{var _0x326f2c=_0x16541d;_0x52e1ad[_0x4ddc49][_0x326f2c(0x104)]=_0x5ca2cf;}),_0x3a010d[_0x16541d(0xd2)]((_0x1f09cc,_0x3e9036)=>{_0x52e1ad[_0x3e9036]['secondary_code']=_0x1f09cc;}),_0x35b8bd['forEach']((_0x422722,_0x215d9e)=>{var _0x43e15c=_0x16541d;_0x52e1ad[_0x215d9e][_0x43e15c(0xb8)]=_0x422722;}),_0x2526b0[_0x16541d(0xd2)]((_0x2feaf2,_0x47fa41)=>{var _0x1bdcde=_0x16541d;_0x52e1ad[_0x47fa41][_0x1bdcde(0xfc)]=_0x2feaf2;}),_0x26524c[_0x16541d(0xd2)]((_0x3c975d,_0x28e80c)=>{var _0x252c9b=_0x16541d;_0x52e1ad[_0x28e80c][_0x252c9b(0x90)]=_0x3c975d;}),_0x98f3c2['forEach']((_0x2caee6,_0x4ec27d)=>{_0x52e1ad[_0x4ec27d]['secondary_unit']=_0x2caee6;}),_0x126248[_0x16541d(0xd2)]((_0x323dda,_0x1e2d3e)=>{var _0x3088c4=_0x16541d;_0x52e1ad[_0x1e2d3e][_0x3088c4(0xbd)]=_0x323dda;}),_0x32c558[_0x16541d(0xd2)]((_0x41405,_0x2359a4)=>{var _0x1ee039=_0x16541d;_0x52e1ad[_0x2359a4][_0x1ee039(0xc0)]=_0x41405;});const _0x1b9437=_0x52e1ad[_0x16541d(0xdb)](_0x34491a=>_0x34491a['to_quantity']!=='0'&&_0x34491a['to_quantity']!==''||_0x34491a[_0x16541d(0x114)]!=='0'&&_0x34491a['to_floorlevel']!=='');var _0x3c205a=0x0;_0x1b9437['forEach'](_0x51599d=>{var _0x285b13=_0x16541d;parseInt(_0x51599d[_0x285b13(0xef)])<parseInt(_0x51599d[_0x285b13(0xe4)])&&_0x3c205a++;});if(_0x3c205a!=0x0)return _0xd8a22[_0x16541d(0xf0)](_0x16541d(0x145),_0x16541d(0xe5)),_0x3d1edc[_0x16541d(0xec)]('back');const _0x2706f2=await warehouse[_0x16541d(0xdc)]({'name':_0x1c27c0[_0x16541d(0xf5)],'room':_0x1c27c0[_0x16541d(0x116)]});_0x1c27c0[_0x16541d(0x101)][_0x16541d(0xd2)](_0x1c7d28=>{var _0x53c2b8=_0x16541d;if(_0x1c7d28['to_quantity']>0x0){const _0x57156a=_0x2706f2[_0x53c2b8(0xea)][_0x53c2b8(0x8d)](_0x959a27=>{var _0x49e31b=_0x53c2b8;_0x959a27['product_name']==_0x1c7d28['product_name']&&_0x959a27[_0x49e31b(0x136)]==_0x1c7d28[_0x49e31b(0x92)]&&(_0x959a27[_0x49e31b(0x134)]=parseInt(_0x959a27[_0x49e31b(0x134)])+parseInt(_0x1c7d28[_0x49e31b(0xe4)]));});}}),await _0x2706f2['save']();const _0x2fdddc=await warehouse[_0x16541d(0xdc)]({'name':_0x1c27c0[_0x16541d(0xed)],'room':_0x1c27c0['to_room']});_0x1c27c0[_0x16541d(0x101)][_0x16541d(0xd2)](_0x81693e=>{var _0x5673fa=_0x16541d;if(_0x81693e[_0x5673fa(0xe4)]>0x0){const _0x53e0ab=_0x2fdddc[_0x5673fa(0xea)][_0x5673fa(0x8d)](_0xd6d006=>{var _0xd6a95b=_0x5673fa;_0xd6d006[_0xd6a95b(0xeb)]==_0x81693e[_0xd6a95b(0xeb)]&&_0xd6d006[_0xd6a95b(0x136)]==_0x81693e[_0xd6a95b(0x112)]&&(_0xd6d006[_0xd6a95b(0x134)]=parseInt(_0xd6d006['product_stock'])-parseInt(_0x81693e[_0xd6a95b(0xe4)]));});}}),await _0x2fdddc[_0x16541d(0x135)](),_0x1c27c0['date']=_0x3cc648,_0x1c27c0[_0x16541d(0xf5)]=_0x345f80,_0x1c27c0[_0x16541d(0xed)]=_0x15f13c,_0x1c27c0[_0x16541d(0x101)]=_0x1b9437,_0x1c27c0[_0x16541d(0x91)]=_0x3d9746,_0x1c27c0[_0x16541d(0x125)]=_0xd17077;const _0xff068=await _0x1c27c0[_0x16541d(0x135)](),_0x4b823c=await warehouse[_0x16541d(0xdc)]({'name':_0x345f80,'room':_0x3ad7ea});_0xff068[_0x16541d(0x101)][_0x16541d(0xd2)](_0x1ae09e=>{var _0x1e4615=_0x16541d;if(_0x1ae09e[_0x1e4615(0xe4)]>0x0){const _0x591152=_0x4b823c[_0x1e4615(0xea)][_0x1e4615(0x8d)](_0x16d40e=>{var _0x2f8e0e=_0x1e4615;_0x16d40e[_0x2f8e0e(0xeb)]==_0x1ae09e['product_name']&&_0x16d40e[_0x2f8e0e(0x136)]==_0x1ae09e[_0x2f8e0e(0x92)]&&(_0x16d40e[_0x2f8e0e(0x134)]=parseInt(_0x16d40e[_0x2f8e0e(0x134)])-parseInt(_0x1ae09e[_0x2f8e0e(0xe4)]));});}}),await _0x4b823c[_0x16541d(0x135)]();const _0x5462e=await warehouse[_0x16541d(0xdc)]({'name':_0x15f13c,'room':_0x3bb5f7});_0xff068[_0x16541d(0x101)][_0x16541d(0xd2)](_0x2d3010=>{var _0x59dfd5=_0x16541d;if(_0x2d3010['to_quantity']>0x0){var _0x14cf03=0x0;const _0x55ef7e=_0x5462e[_0x59dfd5(0xea)]['map'](_0x479c7e=>{var _0x35f1d8=_0x59dfd5;_0x479c7e[_0x35f1d8(0xeb)]==_0x2d3010[_0x35f1d8(0xeb)]&&_0x479c7e['bay']==_0x2d3010[_0x35f1d8(0x112)]&&(_0x479c7e[_0x35f1d8(0x134)]=parseInt(_0x479c7e[_0x35f1d8(0x134)])+parseInt(_0x2d3010[_0x35f1d8(0xe4)]),_0x14cf03++);});_0x14cf03=='0'&&(_0x5462e[_0x59dfd5(0xea)]=_0x5462e[_0x59dfd5(0xea)][_0x59dfd5(0x13f)]({'product_name':_0x2d3010[_0x59dfd5(0xeb)],'product_stock':_0x2d3010[_0x59dfd5(0xe4)],'bay':_0x2d3010['to_bay'],'product_code':_0x2d3010[_0x59dfd5(0xb8)],'primary_code':_0x2d3010['primary_code'],'secondary_code':_0x2d3010[_0x59dfd5(0xa8)],'maxProducts':_0x2d3010[_0x59dfd5(0xfc)]}));}}),await _0x5462e[_0x16541d(0x135)](),_0xd8a22[_0x16541d(0xf0)]('success',_0x16541d(0x96)),_0x3d1edc[_0x16541d(0xec)](_0x16541d(0x9f));}catch(_0x12d947){console[_0x16541d(0x10c)](_0x12d947);}}),router[a0_0x1ab990(0xb7)](a0_0x1ab990(0xbe),async(_0x93449e,_0x14eaee)=>{var _0x439b66=a0_0x1ab990;const {FromWareHouse:_0x4bccdf,FromRoom:_0x3c39b8,ToWarehouse:_0x383c25,ToRoom:_0xd49940,primary_code:_0x7a753e,Roomslist:_0x56ef5f}=_0x93449e[_0x439b66(0x11b)],_0x1ecceb=_0x56ef5f[_0x439b66(0xde)](','),_0x55d31b=[];async function _0x52d2d9(_0x3ee062){var _0x2290b1=_0x439b66;const _0xb6f1bc=await warehouse['aggregate']([{'$match':{'name':_0x4bccdf,'room':_0x3ee062}},{'$unwind':_0x2290b1(0xd3)},{'$match':{'product_details.primary_code':_0x7a753e}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x2290b1(0x138)},'instock':{'$first':_0x2290b1(0x146)},'primary_code':{'$first':_0x2290b1(0x133)},'secondary_code':{'$first':_0x2290b1(0xf8)},'product_code':{'$first':_0x2290b1(0xe8)},'bay':{'$first':_0x2290b1(0x103)},'level':{'$first':'$product_details.level'},'type':{'$first':_0x2290b1(0x80)},'pallet':{'$first':_0x2290b1(0x10f)},'unit':{'$first':_0x2290b1(0x7d)},'secondary_unit':{'$first':_0x2290b1(0xbb)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x2290b1(0x10d)},'expiry_date':{'$first':_0x2290b1(0x94)},'production_date':{'$first':_0x2290b1(0xd7)},'batch_code':{'$first':_0x2290b1(0xdf)},'maxPerUnit':{'$first':_0x2290b1(0x88)},'roomNamed':{'$first':_0x2290b1(0x99)},'prod_cat':{'$first':'P'},'invoice':{'$first':'$product_details.invoice'}}}]),_0x3b807a=await warehouse[_0x2290b1(0xd9)]([{'$match':{'name':_0x4bccdf,'room':_0x3ee062}},{'$unwind':_0x2290b1(0xd3)},{'$match':{'product_details.secondary_code':_0x7a753e}},{'$group':{'_id':_0x2290b1(0xd5),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x2290b1(0x146)},'primary_code':{'$first':_0x2290b1(0x133)},'secondary_code':{'$first':_0x2290b1(0xf8)},'product_code':{'$first':'$product_details.product_code'},'bay':{'$first':'$product_details.bay'},'level':{'$first':_0x2290b1(0xe0)},'type':{'$first':_0x2290b1(0x80)},'pallet':{'$first':_0x2290b1(0x10f)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0x2290b1(0xf2)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x2290b1(0x94)},'production_date':{'$first':_0x2290b1(0xd7)},'batch_code':{'$first':_0x2290b1(0xdf)},'maxPerUnit':{'$first':_0x2290b1(0x88)},'roomNamed':{'$first':_0x2290b1(0x99)},'prod_cat':{'$first':'S'},'invoice':{'$first':_0x2290b1(0xbc)}}}]);if(_0xb6f1bc[_0x2290b1(0xaa)]>0x0)_0x55d31b[_0x2290b1(0xba)](_0xb6f1bc);else _0x3b807a[_0x2290b1(0xaa)]>0x0&&_0x55d31b[_0x2290b1(0xba)](_0x3b807a);}const _0x2ad049=_0x1ecceb['map'](_0x55092b=>_0x52d2d9(_0x55092b));await Promise[_0x439b66(0x13c)](_0x2ad049),_0x14eaee[_0x439b66(0x7b)](_0x55d31b);}),router[a0_0x1ab990(0xb7)](a0_0x1ab990(0x115),async(_0x392d9c,_0x19d1a3)=>{var _0x4d99b5=a0_0x1ab990;const {productCode:_0x3eda30,bay:_0x1879da,warehouses:_0x2b3c7c,room:_0x1d0099}=_0x392d9c['body'];console[_0x4d99b5(0x10c)](_0x392d9c[_0x4d99b5(0x11b)]);try{const _0x3ad10c=await warehouse['aggregate']([{'$match':{'name':_0x2b3c7c,'room':_0x1d0099}},{'$unwind':_0x4d99b5(0xd3)},{'$match':{'product_details.bay':parseInt(_0x1879da)}},{'$group':{'_id':_0x4d99b5(0xd5),'name':{'$first':_0x4d99b5(0x138)},'product_stock':{'$first':_0x4d99b5(0x146)},'bay':{'$first':_0x4d99b5(0x103)},'maxProducts':{'$first':_0x4d99b5(0x8b)}}}]);_0x19d1a3[_0x4d99b5(0x14a)](0xc8)[_0x4d99b5(0x7b)](_0x3ad10c);}catch(_0x549f86){_0x19d1a3[_0x4d99b5(0x14a)](0x194)[_0x4d99b5(0x7b)]({'message':_0x549f86[_0x4d99b5(0xb1)]});}}),module[a0_0x1ab990(0x7e)]=router;