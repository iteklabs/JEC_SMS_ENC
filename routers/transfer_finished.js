var a0_0x360bc9=a0_0x2bdd;(function(_0x5e4db8,_0xe499bc){var _0x33a270=a0_0x2bdd,_0x4abad0=_0x5e4db8();while(!![]){try{var _0x5f3ea6=-parseInt(_0x33a270(0x22b))/0x1*(-parseInt(_0x33a270(0x186))/0x2)+parseInt(_0x33a270(0x1d3))/0x3+parseInt(_0x33a270(0x1b2))/0x4*(parseInt(_0x33a270(0x1e5))/0x5)+-parseInt(_0x33a270(0x1d2))/0x6*(-parseInt(_0x33a270(0x1ee))/0x7)+parseInt(_0x33a270(0x210))/0x8+parseInt(_0x33a270(0x1bd))/0x9+parseInt(_0x33a270(0x1ac))/0xa*(-parseInt(_0x33a270(0x182))/0xb);if(_0x5f3ea6===_0xe499bc)break;else _0x4abad0['push'](_0x4abad0['shift']());}catch(_0x1dd7ff){_0x4abad0['push'](_0x4abad0['shift']());}}}(a0_0x4391,0x91ad9));const express=require(a0_0x360bc9(0x1dd)),app=express(),router=express[a0_0x360bc9(0x230)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,invoice_for_transfer,transfers_logs}=require(a0_0x360bc9(0x21e)),auth=require(a0_0x360bc9(0x239)),users=require(a0_0x360bc9(0x22a)),nodemailer=require(a0_0x360bc9(0x1d4));function a0_0x4391(){var _0x423996=['to_bay','to_prod_level','match','$from_warehouse','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','/view/:id','To_invoice','log','express','to_level','$product_details.type','flash','updateOne','from_warehouse','product_name','</td>','51565ptjghQ','then','here2','$product_details.product_stock','to_warehouse','\x20<=>\x20','Transfer\x20Edit\x20Successfully','$product_details.bin','product_details','169960SCsEXN','message','Rack\x202','invoice','MaxStocks_data','email','concat','LOG-TRF-','primary_code','$product','$product_details.primary_code','findOne','$invoice','unit','There\x27s\x20a\x20error\x20in\x20this\x20transaction','location2location','product_date','/transfer/view','Enabled','Portuguese','An\x20error\x20occurred\x20while\x20saving\x20data.','/transfer_finished/preview/','/view_logs','back','$room','bin2bin','aggregate','choos_transfer_logs','to_room_name','primary_unit','from_prod_level2','random','to_room','secondary_unit','1633696QPGRyK','getDate','catch','find','prod_cat','</tr>','$product_details','error','German','$product_details.product_code','$product_details.batch_code','exports','to_floorlevel','/view/add_transfer','../models/all_models','$product_details.production_date','transfer_finished_logs','staff','logs','/preview/:id','/picking_list/PDF_transfer/','length','To\x20An\x20error\x20occurred\x20while\x20saving\x20data.','edit_transfer_finished_view','RoomAssigned','$product_details.bay','../public/language/languages.json','38hyqYil','TRFF-','French','Enclosed','_id','Router','DRY\x20GOODS','toString','warehouse','product_code3','from_level','getFullYear','product_stock','transfer_finished','../middleware/auth','params','invoice_init','from_prod_qty','id_transaction','role','$product_details.expiry_date','True','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','$product_details.floorlevel','/transfer_finished/view','padStart','ToRoomAssigned','$product_details.invoice','expiry_date','from_room','all','$product_details.product_name','$product_details.maxPerUnit','floor','batch_code','map','11PDyxpV','save','slice','production_date','2kTgoDu','render','New_Qty_Converted','choos_transfer','English','redirect','Chinese','body','product_code','TRF-','/CheckingWarehouse','$product_details.secondary_unit','$name','English\x20(US)','push','note','$product_details.unit','\x20<>\x20','Finished\x20Goods','split','$product_details.rack','filter','abs','type_of_process','$product_details._id','$to_warehouse','bay','$product.to_room_name','to_quantity','FROZEN\x20GOODS','product','string','Portuguese\x20(BR)','prod_name','$product_details.secondary_code','$product.from_room_name','Hindi','post','2387270QTlGaY','from_prod_level','secondary_code','own','forEach','$product_details.level','36WxiJup','MaxStocks_data2','/view/choose','$finalize','json','maxPerUnit','get','from_room_name','Arabic\x20(ae)','Spanish','findById','2139948jUCoRx','success','$product_details.storage','from_invoice','maxProducts','from_quantity','$date','Product\x20Transfer\x20successfully','edit_transfer_finished','from_bay','language','/view/add_transfer_logs','to_prod_qty','user','$_id','transfer_data','Arabic','An\x20error\x20occurred.','errors','status','Rack\x201','72ysRnaZ','27675SogTZl','nodemailer'];a0_0x4391=function(){return _0x423996;};return a0_0x4391();}router[a0_0x360bc9(0x1b8)]('/view',auth,async(_0x509b6f,_0x26cc72)=>{var _0x58b4f9=a0_0x360bc9;try{const {username:_0x39cce5,email:_0xea7be9,role:_0x519b74}=_0x509b6f[_0x58b4f9(0x1ca)],_0x182c10=_0x509b6f[_0x58b4f9(0x1ca)],_0x42c89d=await profile[_0x58b4f9(0x1f9)]({'email':_0x182c10[_0x58b4f9(0x1f3)]}),_0x1e6a6d=await master_shop[_0x58b4f9(0x213)]();let _0x3e7bea;if(_0x182c10[_0x58b4f9(0x23e)]==_0x58b4f9(0x221)){const _0x25ff12=await staff['findOne']({'email':_0x182c10[_0x58b4f9(0x1f3)]});_0x3e7bea=await transfers_finished['find']({'from_warehouse':_0x25ff12[_0x58b4f9(0x233)]});}else _0x3e7bea=await transfers_finished[_0x58b4f9(0x208)]([{'$match':{'type_of_transaction':_0x58b4f9(0x1af)}},{'$unwind':'$product'},{'$group':{'_id':'$_id','invoice':{'$first':_0x58b4f9(0x1fa)},'date':{'$first':_0x58b4f9(0x1c3)},'from_warehouse':{'$first':_0x58b4f9(0x1d8)},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x58b4f9(0x1a9)},'to_room_name':{'$addToSet':_0x58b4f9(0x1a1)},'finalize':{'$first':_0x58b4f9(0x1b5)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x1e6a6d[0x0][_0x58b4f9(0x1c7)]=='English\x20(US)')var _0x35281a=users[_0x58b4f9(0x18a)];else{if(_0x1e6a6d[0x0][_0x58b4f9(0x1c7)]==_0x58b4f9(0x1aa))var _0x35281a=users[_0x58b4f9(0x1aa)];else{if(_0x1e6a6d[0x0][_0x58b4f9(0x1c7)]=='German')var _0x35281a=users[_0x58b4f9(0x218)];else{if(_0x1e6a6d[0x0][_0x58b4f9(0x1c7)]==_0x58b4f9(0x1bb))var _0x35281a=users[_0x58b4f9(0x1bb)];else{if(_0x1e6a6d[0x0]['language']==_0x58b4f9(0x22d))var _0x35281a=users[_0x58b4f9(0x22d)];else{if(_0x1e6a6d[0x0]['language']==_0x58b4f9(0x1a6))var _0x35281a=users[_0x58b4f9(0x201)];else{if(_0x1e6a6d[0x0]['language']==_0x58b4f9(0x18c))var _0x35281a=users[_0x58b4f9(0x18c)];else{if(_0x1e6a6d[0x0][_0x58b4f9(0x1c7)]=='Arabic\x20(ae)')var _0x35281a=users[_0x58b4f9(0x1cd)];}}}}}}}_0x26cc72[_0x58b4f9(0x187)](_0x58b4f9(0x238),{'success':_0x509b6f['flash'](_0x58b4f9(0x1be)),'errors':_0x509b6f[_0x58b4f9(0x1e0)](_0x58b4f9(0x1cf)),'role':_0x182c10,'profile':_0x42c89d,'master_shop':_0x1e6a6d,'transfer':_0x3e7bea,'language':_0x35281a});}catch(_0xf97111){console[_0x58b4f9(0x1dc)](_0xf97111);}}),router[a0_0x360bc9(0x1b8)](a0_0x360bc9(0x204),auth,async(_0x59936f,_0x3410f2)=>{var _0x475e68=a0_0x360bc9;try{const {username:_0x27734b,email:_0x4ba513,role:_0x57b766}=_0x59936f['user'],_0x5d2aee=_0x59936f[_0x475e68(0x1ca)],_0x322b58=await profile['findOne']({'email':_0x5d2aee[_0x475e68(0x1f3)]}),_0x43c7c0=await master_shop[_0x475e68(0x213)]();let _0x13403c;if(_0x5d2aee['role']=='staff'){const _0x39aaf6=await staff[_0x475e68(0x1f9)]({'email':_0x5d2aee['email']});_0x13403c=await transfers_finished[_0x475e68(0x213)]({'from_warehouse':_0x39aaf6[_0x475e68(0x233)]});}else _0x13403c=await transfers_finished['aggregate']([{'$match':{'type_of_transaction':'logs'}},{'$unwind':_0x475e68(0x1f7)},{'$group':{'_id':_0x475e68(0x1cb),'invoice':{'$first':_0x475e68(0x1fa)},'date':{'$first':_0x475e68(0x1c3)},'from_warehouse':{'$first':'$from_warehouse'},'to_warehouse':{'$first':_0x475e68(0x19f)},'from_room_name':{'$addToSet':_0x475e68(0x1a9)},'to_room_name':{'$addToSet':_0x475e68(0x1a1)},'finalize':{'$first':_0x475e68(0x1b5)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x43c7c0[0x0][_0x475e68(0x1c7)]=='English\x20(US)')var _0x2a9fcd=users[_0x475e68(0x18a)];else{if(_0x43c7c0[0x0][_0x475e68(0x1c7)]==_0x475e68(0x1aa))var _0x2a9fcd=users['Hindi'];else{if(_0x43c7c0[0x0][_0x475e68(0x1c7)]==_0x475e68(0x218))var _0x2a9fcd=users[_0x475e68(0x218)];else{if(_0x43c7c0[0x0][_0x475e68(0x1c7)]==_0x475e68(0x1bb))var _0x2a9fcd=users[_0x475e68(0x1bb)];else{if(_0x43c7c0[0x0]['language']==_0x475e68(0x22d))var _0x2a9fcd=users[_0x475e68(0x22d)];else{if(_0x43c7c0[0x0]['language']==_0x475e68(0x1a6))var _0x2a9fcd=users[_0x475e68(0x201)];else{if(_0x43c7c0[0x0][_0x475e68(0x1c7)]==_0x475e68(0x18c))var _0x2a9fcd=users['Chinese'];else{if(_0x43c7c0[0x0]['language']==_0x475e68(0x1ba))var _0x2a9fcd=users['Arabic'];}}}}}}}_0x3410f2['render'](_0x475e68(0x220),{'success':_0x59936f['flash'](_0x475e68(0x1be)),'errors':_0x59936f['flash'](_0x475e68(0x1cf)),'role':_0x5d2aee,'profile':_0x322b58,'master_shop':_0x43c7c0,'transfer':_0x13403c,'language':_0x2a9fcd});}catch(_0x4aef2e){console[_0x475e68(0x1dc)](_0x4aef2e);}});async function getRandom8DigitNumber(){var _0x5cbb80=a0_0x360bc9;const _0x388050=0x989680,_0x5885bd=0x5f5e0ff,_0x716e47=Math[_0x5cbb80(0x24c)](Math[_0x5cbb80(0x20d)]()*(_0x5885bd-_0x388050+0x1))+_0x388050;var _0x12fd26;const _0x4c04a7=await transfers_finished['findOne']({'invoice':'TRFF-'+_0x716e47});return _0x4c04a7&&_0x4c04a7[_0x5cbb80(0x225)]>0x0?_0x12fd26=_0x5cbb80(0x22c)+_0x716e47:_0x12fd26=_0x5cbb80(0x22c)+_0x716e47,_0x12fd26;}function a0_0x2bdd(_0x5443b3,_0x168b9d){var _0x4391cb=a0_0x4391();return a0_0x2bdd=function(_0x2bdddb,_0x128e64){_0x2bdddb=_0x2bdddb-0x182;var _0x12a064=_0x4391cb[_0x2bdddb];return _0x12a064;},a0_0x2bdd(_0x5443b3,_0x168b9d);}router[a0_0x360bc9(0x1b8)](a0_0x360bc9(0x21d),auth,async(_0x3da1dc,_0x16a507)=>{var _0x17e261=a0_0x360bc9;try{const {username:_0x5a0827,email:_0xa1bc60,role:_0xa18f76}=_0x3da1dc[_0x17e261(0x1ca)],_0x57118b=_0x3da1dc['user'],_0x277812=await profile[_0x17e261(0x1f9)]({'email':_0x57118b[_0x17e261(0x1f3)]}),_0x340140=await master_shop[_0x17e261(0x213)]();let _0x6feec0;if(_0x57118b['role']==_0x17e261(0x221)){const _0x4f6b78=await staff[_0x17e261(0x1f9)]({'email':_0x57118b[_0x17e261(0x1f3)]});_0x6feec0=await warehouse[_0x17e261(0x208)]([{'$match':{'status':_0x17e261(0x200),'name':_0x4f6b78[_0x17e261(0x233)]}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);}else _0x6feec0=await warehouse[_0x17e261(0x208)]([{'$match':{'status':_0x17e261(0x200)}},{'$group':{'_id':'$name','name':{'$first':_0x17e261(0x192)}}}]);const _0x31975f=await transfers_finished[_0x17e261(0x213)]({}),_0x9fd973=_0x31975f[_0x17e261(0x225)]+0x1,_0x3ad844='TRFF-'+_0x9fd973[_0x17e261(0x232)]()[_0x17e261(0x244)](0x5,'0');if(_0x340140[0x0]['language']==_0x17e261(0x193))var _0x4f6f2a=users[_0x17e261(0x18a)];else{if(_0x340140[0x0]['language']==_0x17e261(0x1aa))var _0x4f6f2a=users[_0x17e261(0x1aa)];else{if(_0x340140[0x0][_0x17e261(0x1c7)]==_0x17e261(0x218))var _0x4f6f2a=users[_0x17e261(0x218)];else{if(_0x340140[0x0][_0x17e261(0x1c7)]==_0x17e261(0x1bb))var _0x4f6f2a=users[_0x17e261(0x1bb)];else{if(_0x340140[0x0]['language']==_0x17e261(0x22d))var _0x4f6f2a=users['French'];else{if(_0x340140[0x0][_0x17e261(0x1c7)]=='Portuguese\x20(BR)')var _0x4f6f2a=users[_0x17e261(0x201)];else{if(_0x340140[0x0][_0x17e261(0x1c7)]==_0x17e261(0x18c))var _0x4f6f2a=users['Chinese'];else{if(_0x340140[0x0][_0x17e261(0x1c7)]=='Arabic\x20(ae)')var _0x4f6f2a=users[_0x17e261(0x1cd)];}}}}}}}const _0x41a906=getRandom8DigitNumber();_0x41a906[_0x17e261(0x1e6)](_0x151586=>{var _0x3155a6=_0x17e261;_0x16a507[_0x3155a6(0x187)]('add_transfer_finished',{'success':_0x3da1dc[_0x3155a6(0x1e0)](_0x3155a6(0x1be)),'errors':_0x3da1dc['flash'](_0x3155a6(0x1cf)),'role':_0x57118b,'profile':_0x277812,'master_shop':_0x340140,'warehouse':_0x6feec0,'language':_0x4f6f2a,'invoice':_0x151586});})[_0x17e261(0x212)](_0x29be62=>{var _0x6eebaf=_0x17e261;_0x3da1dc['flash']('errors',_0x6eebaf(0x1fc)),_0x16a507[_0x6eebaf(0x18b)](_0x6eebaf(0x1ff));});}catch(_0xc560d0){console[_0x17e261(0x1dc)](_0xc560d0);}}),router['get'](a0_0x360bc9(0x1b4),auth,async(_0x2088ba,_0x2f4b77)=>{var _0x17d393=a0_0x360bc9;try{const {username:_0x618038,email:_0x1e8ba1,role:_0x37548a}=_0x2088ba['user'],_0x4b21ae=_0x2088ba['user'],_0x1353ee=await profile[_0x17d393(0x1f9)]({'email':_0x4b21ae[_0x17d393(0x1f3)]}),_0x16b2d8=await master_shop[_0x17d393(0x213)]();let _0x4c4aa2;if(_0x4b21ae[_0x17d393(0x23e)]==_0x17d393(0x221)){const _0x199597=await staff[_0x17d393(0x1f9)]({'email':_0x4b21ae[_0x17d393(0x1f3)]});_0x4c4aa2=await warehouse[_0x17d393(0x208)]([{'$match':{'status':'Enabled','name':_0x199597[_0x17d393(0x233)]}},{'$group':{'_id':_0x17d393(0x192),'name':{'$first':_0x17d393(0x192)}}}]);}else _0x4c4aa2=await warehouse[_0x17d393(0x208)]([{'$match':{'status':_0x17d393(0x200)}},{'$group':{'_id':_0x17d393(0x192),'name':{'$first':_0x17d393(0x192)}}}]);const _0x20a349=await transfers_finished[_0x17d393(0x213)]({}),_0x22df7a=_0x20a349[_0x17d393(0x225)]+0x1,_0x5e9f03=_0x17d393(0x22c)+_0x22df7a[_0x17d393(0x232)]()['padStart'](0x5,'0');if(_0x16b2d8[0x0]['language']==_0x17d393(0x193))var _0x1f1e14=users[_0x17d393(0x18a)];else{if(_0x16b2d8[0x0]['language']=='Hindi')var _0x1f1e14=users[_0x17d393(0x1aa)];else{if(_0x16b2d8[0x0][_0x17d393(0x1c7)]==_0x17d393(0x218))var _0x1f1e14=users[_0x17d393(0x218)];else{if(_0x16b2d8[0x0][_0x17d393(0x1c7)]==_0x17d393(0x1bb))var _0x1f1e14=users['Spanish'];else{if(_0x16b2d8[0x0]['language']==_0x17d393(0x22d))var _0x1f1e14=users[_0x17d393(0x22d)];else{if(_0x16b2d8[0x0][_0x17d393(0x1c7)]=='Portuguese\x20(BR)')var _0x1f1e14=users[_0x17d393(0x201)];else{if(_0x16b2d8[0x0][_0x17d393(0x1c7)]==_0x17d393(0x18c))var _0x1f1e14=users[_0x17d393(0x18c)];else{if(_0x16b2d8[0x0][_0x17d393(0x1c7)]==_0x17d393(0x1ba))var _0x1f1e14=users['Arabic'];}}}}}}}const _0x4997df=getRandom8DigitNumber();_0x4997df[_0x17d393(0x1e6)](_0x31c92a=>{var _0x2f6a83=_0x17d393;_0x2f4b77[_0x2f6a83(0x187)](_0x2f6a83(0x189),{'success':_0x2088ba[_0x2f6a83(0x1e0)]('success'),'errors':_0x2088ba[_0x2f6a83(0x1e0)](_0x2f6a83(0x1cf)),'role':_0x4b21ae,'profile':_0x1353ee,'master_shop':_0x16b2d8,'warehouse':_0x4c4aa2,'language':_0x1f1e14,'invoice':_0x31c92a});})[_0x17d393(0x212)](_0x171ece=>{var _0x482fd9=_0x17d393;_0x2088ba[_0x482fd9(0x1e0)](_0x482fd9(0x1cf),_0x482fd9(0x1fc)),_0x2f4b77[_0x482fd9(0x18b)](_0x482fd9(0x1ff));});}catch(_0x29f3e9){console['log'](_0x29f3e9);}}),router[a0_0x360bc9(0x1b8)]('/view/choose_logs',auth,async(_0x1acaf1,_0x3532d2)=>{var _0x508b22=a0_0x360bc9;try{const {username:_0x1ba0b5,email:_0x41dfdc,role:_0x2976bb}=_0x1acaf1['user'],_0x16fe5d=_0x1acaf1['user'],_0x25aebd=await profile[_0x508b22(0x1f9)]({'email':_0x16fe5d[_0x508b22(0x1f3)]}),_0x115a40=await master_shop['find']();let _0x241619;if(_0x16fe5d[_0x508b22(0x23e)]==_0x508b22(0x221)){const _0x9f9ec2=await staff[_0x508b22(0x1f9)]({'email':_0x16fe5d[_0x508b22(0x1f3)]});_0x241619=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x9f9ec2[_0x508b22(0x233)]}},{'$group':{'_id':_0x508b22(0x192),'name':{'$first':_0x508b22(0x192)}}}]);}else _0x241619=await warehouse[_0x508b22(0x208)]([{'$match':{'status':_0x508b22(0x200)}},{'$group':{'_id':_0x508b22(0x192),'name':{'$first':_0x508b22(0x192)}}}]);const _0x748c2e=await transfers_finished[_0x508b22(0x213)]({}),_0x3efda9=_0x748c2e['length']+0x1,_0x543901=_0x508b22(0x22c)+_0x3efda9['toString']()['padStart'](0x5,'0');if(_0x115a40[0x0][_0x508b22(0x1c7)]==_0x508b22(0x193))var _0x29bb28=users['English'];else{if(_0x115a40[0x0][_0x508b22(0x1c7)]==_0x508b22(0x1aa))var _0x29bb28=users['Hindi'];else{if(_0x115a40[0x0][_0x508b22(0x1c7)]=='German')var _0x29bb28=users[_0x508b22(0x218)];else{if(_0x115a40[0x0][_0x508b22(0x1c7)]==_0x508b22(0x1bb))var _0x29bb28=users[_0x508b22(0x1bb)];else{if(_0x115a40[0x0]['language']==_0x508b22(0x22d))var _0x29bb28=users['French'];else{if(_0x115a40[0x0][_0x508b22(0x1c7)]==_0x508b22(0x1a6))var _0x29bb28=users[_0x508b22(0x201)];else{if(_0x115a40[0x0][_0x508b22(0x1c7)]==_0x508b22(0x18c))var _0x29bb28=users[_0x508b22(0x18c)];else{if(_0x115a40[0x0][_0x508b22(0x1c7)]==_0x508b22(0x1ba))var _0x29bb28=users[_0x508b22(0x1cd)];}}}}}}}const _0x571a59=getRandom8DigitNumber();_0x571a59[_0x508b22(0x1e6)](_0x1123e9=>{var _0x2a4418=_0x508b22;_0x3532d2[_0x2a4418(0x187)](_0x2a4418(0x209),{'success':_0x1acaf1['flash'](_0x2a4418(0x1be)),'errors':_0x1acaf1['flash'](_0x2a4418(0x1cf)),'role':_0x16fe5d,'profile':_0x25aebd,'master_shop':_0x115a40,'warehouse':_0x241619,'language':_0x29bb28,'invoice':_0x1123e9});})[_0x508b22(0x212)](_0x561a52=>{var _0x195123=_0x508b22;_0x1acaf1['flash'](_0x195123(0x1cf),_0x195123(0x1fc)),_0x3532d2['redirect'](_0x195123(0x1ff));});}catch(_0x36c24a){console[_0x508b22(0x1dc)](_0x36c24a);}}),router[a0_0x360bc9(0x1ab)](a0_0x360bc9(0x1c8),auth,async(_0x4433e3,_0x3993a8)=>{var _0x3f5772=a0_0x360bc9;try{const {date:_0x38258b,from_warehouse:_0x5a6ed9,FromRoom_name:_0x355dc7,to_warehouse:_0x4551d8,ToRoom_name:_0x236a96,prod_name:_0xe7062d,from_prod_qty:_0x618e6,from_prod_level:_0x28d4da,from_prod_isle:_0x1494f9,from_prod_pallet:_0x5cd61a,to_prod_qty:_0x17d0dd,to_prod_level:_0x38b3fd,to_prod_isle:_0x554fdc,to_prod_pallet:_0x2369b4,primary_code:_0x2a59a9,secondary_code:_0x3683c8,product_code3:_0x597b3d,note:_0x38773c,MaxStocks_data2:_0x381d23,invoice:_0x588d9b,expiry_date:_0xbf0440,PO_number:_0x4059a3,ReqBy:_0x1ea251,dateofreq:_0x225a0c,typeservicesData:_0x49c44a,destination:_0x217add,deliverydate:_0x41c2d4,driver:_0xcfd24,plate:_0x28cf74,van:_0x142f1b,DRSI:_0x3dc75a,typevehicle:_0x337ec2,TSU:_0x4ece57,TFU:_0x240aec}=_0x4433e3[_0x3f5772(0x18d)];if(typeof _0xe7062d==_0x3f5772(0x1a5))var _0x18cb74=[_0x4433e3['body'][_0x3f5772(0x1a7)]],_0x5bb2c7=[_0x4433e3[_0x3f5772(0x18d)]['from_prod_qty']],_0x40ed18=[_0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x20c)]],_0x48079a=[_0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x188)]],_0x265c12=[_0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x1d6)]],_0x2cfc5c=[_0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x1f6)]],_0x179299=[_0x4433e3['body'][_0x3f5772(0x1ae)]],_0x478e6b=[_0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x234)]],_0x3c9b99=[_0x4433e3['body'][_0x3f5772(0x1b3)]],_0x9154fa=[_0x4433e3[_0x3f5772(0x18d)]['primary_unit']],_0x4ae013=[_0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x20f)]],_0x1274af=[_0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x24d)]],_0x482bf4=[_0x4433e3[_0x3f5772(0x18d)]['expiry_date']],_0x352e8c=[_0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x1fe)]],_0xc40ef3=[_0x4433e3['body']['MaxStocks_data']],_0x2fb768=[_0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x1b7)]],_0x3b82a5=[_0x4433e3['body'][_0x3f5772(0x214)]],_0x506d79=[_0x4433e3['body'][_0x3f5772(0x228)]],_0x54500d=[_0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x245)]],_0x706eb7=[_0x4433e3[_0x3f5772(0x18d)]['from_invoice']],_0x2b3c85=[_0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x23d)]];else var _0x18cb74=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x1a7)]],_0x5bb2c7=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x23c)]],_0x40ed18=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x20c)]],_0x48079a=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x188)]],_0x265c12=[..._0x4433e3['body'][_0x3f5772(0x1d6)]],_0x2cfc5c=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x1f6)]],_0x179299=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x1ae)]],_0x478e6b=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x234)]],_0x3c9b99=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x1b3)]],_0x9154fa=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x20b)]],_0x4ae013=[..._0x4433e3['body'][_0x3f5772(0x20f)]],_0x1274af=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x24d)]],_0x482bf4=[..._0x4433e3['body'][_0x3f5772(0x247)]],_0x352e8c=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x1fe)]],_0xc40ef3=[..._0x4433e3[_0x3f5772(0x18d)]['MaxStocks_data']],_0x2fb768=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x1b7)]],_0x3b82a5=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x214)]],_0x506d79=[..._0x4433e3[_0x3f5772(0x18d)][_0x3f5772(0x228)]],_0x54500d=[..._0x4433e3['body'][_0x3f5772(0x245)]],_0x706eb7=[..._0x4433e3['body']['from_invoice']],_0x2b3c85=[..._0x4433e3[_0x3f5772(0x18d)]['id_transaction']];const _0xcd5975=_0x18cb74[_0x3f5772(0x24e)](_0x3b2d0e=>{return _0x3b2d0e={'product_name':_0x3b2d0e};});_0x5bb2c7['forEach']((_0x7f094,_0x65cad6)=>{_0xcd5975[_0x65cad6]['from_quantity']=_0x7f094;}),_0x40ed18[_0x3f5772(0x1b0)]((_0x884ef8,_0x34e06e)=>{var _0x32783c=_0x3f5772,_0x174950=_0x884ef8[_0x32783c(0x1d7)](/[A-Za-z]+/)[0x0],_0x3644bd=parseInt(_0x884ef8[_0x32783c(0x1d7)](/\d+/)[0x0]);_0xcd5975[_0x34e06e]['from_bay']=_0x3644bd,_0xcd5975[_0x34e06e][_0x32783c(0x235)]=_0x174950;}),_0x2b3c85[_0x3f5772(0x1b0)]((_0x35b9ea,_0x418d48)=>{_0xcd5975[_0x418d48]['id_transaction']=_0x35b9ea;}),_0x706eb7[_0x3f5772(0x1b0)]((_0x1a5271,_0x53f955)=>{var _0x479d29=_0x3f5772;_0xcd5975[_0x53f955][_0x479d29(0x1c0)]=_0x1a5271;}),_0x48079a[_0x3f5772(0x1b0)]((_0x1a3d75,_0xcc280a)=>{var _0x648235=_0x3f5772;_0xcd5975[_0xcc280a][_0x648235(0x1a2)]=_0x1a3d75;}),_0x265c12[_0x3f5772(0x1b0)]((_0x433055,_0x34fff7)=>{var _0x1a2fca=_0x3f5772,_0x384955=_0x433055[_0x1a2fca(0x1d7)](/[A-Za-z]+/)[0x0],_0xe680d1=parseInt(_0x433055['match'](/\d+/)[0x0]);_0xcd5975[_0x34fff7][_0x1a2fca(0x1de)]=_0x384955,_0xcd5975[_0x34fff7][_0x1a2fca(0x1d5)]=_0xe680d1;}),_0x2cfc5c[_0x3f5772(0x1b0)]((_0x3e5f41,_0x432be4)=>{var _0x2cee5e=_0x3f5772;_0xcd5975[_0x432be4][_0x2cee5e(0x1f6)]=_0x3e5f41;}),_0x179299[_0x3f5772(0x1b0)]((_0x3ec7b5,_0x1c0380)=>{var _0x2bc5fa=_0x3f5772;_0xcd5975[_0x1c0380][_0x2bc5fa(0x1ae)]=_0x3ec7b5;}),_0x478e6b[_0x3f5772(0x1b0)]((_0x3a431e,_0x48854e)=>{_0xcd5975[_0x48854e]['product_code']=_0x3a431e;}),_0x3c9b99['forEach']((_0x2a752d,_0x286710)=>{var _0x537592=_0x3f5772;_0xcd5975[_0x286710][_0x537592(0x1c1)]=_0x2a752d;}),_0x9154fa[_0x3f5772(0x1b0)]((_0x219a43,_0x41f909)=>{_0xcd5975[_0x41f909]['unit']=_0x219a43;}),_0x4ae013[_0x3f5772(0x1b0)]((_0x22ead2,_0x5cfbb7)=>{_0xcd5975[_0x5cfbb7]['secondary_unit']=_0x22ead2;}),_0x1274af[_0x3f5772(0x1b0)]((_0x3a744c,_0x16e3c9)=>{var _0x5c9c1a=_0x3f5772;_0xcd5975[_0x16e3c9][_0x5c9c1a(0x24d)]=_0x3a744c;}),_0x482bf4['forEach']((_0x48c02a,_0x4ef4d5)=>{_0xcd5975[_0x4ef4d5]['expiry_date']=_0x48c02a;}),_0x352e8c[_0x3f5772(0x1b0)]((_0x4ab169,_0x5f35f9)=>{var _0xff2151=_0x3f5772;_0xcd5975[_0x5f35f9][_0xff2151(0x185)]=_0x4ab169;}),_0xc40ef3[_0x3f5772(0x1b0)]((_0x414870,_0xb8fd9c)=>{var _0x3ee0ff=_0x3f5772;_0xcd5975[_0xb8fd9c][_0x3ee0ff(0x1c1)]=_0x414870;}),_0x2fb768[_0x3f5772(0x1b0)]((_0x45b134,_0x58aede)=>{var _0x471b72=_0x3f5772;_0xcd5975[_0x58aede][_0x471b72(0x1b7)]=_0x45b134;}),_0x3b82a5[_0x3f5772(0x1b0)]((_0x946df5,_0x1e99ff)=>{_0xcd5975[_0x1e99ff]['prod_cat']=_0x946df5;}),_0x506d79['forEach']((_0x42cb09,_0x403a2)=>{var _0x136c82=_0x3f5772;_0xcd5975[_0x403a2][_0x136c82(0x1b9)]=_0x42cb09;}),_0x54500d[_0x3f5772(0x1b0)]((_0x29eca4,_0xc501ee)=>{_0xcd5975[_0xc501ee]['to_room_name']=_0x29eca4;});const _0x5d3ac5=_0xcd5975['filter'](_0x57bb04=>_0x57bb04[_0x3f5772(0x1a2)]!=='0'&&_0x57bb04[_0x3f5772(0x1a2)]!==''||_0x57bb04[_0x3f5772(0x21c)]!=='0'&&_0x57bb04[_0x3f5772(0x21c)]!=='');var _0x58c9fb=0x0;_0x5d3ac5[_0x3f5772(0x1b0)](_0x4c97ef=>{var _0x6763d5=_0x3f5772;parseInt(_0x4c97ef[_0x6763d5(0x1c2)])<parseInt(_0x4c97ef[_0x6763d5(0x1a2)])&&_0x58c9fb++;});if(_0x58c9fb!=0x0)return _0x4433e3[_0x3f5772(0x1e0)](_0x3f5772(0x1cf),_0x3f5772(0x241)),_0x3993a8[_0x3f5772(0x18b)](_0x3f5772(0x205));const _0x5d0955=new transfers_logs();await _0x5d0955[_0x3f5772(0x183)]();for(let _0x587ebb=0x0;_0x587ebb<=_0x54500d[_0x3f5772(0x225)]-0x1;_0x587ebb++){_0xcd5975[_0x587ebb]['To_invoice']=_0x3f5772(0x1f5)+_0x5d0955[_0x3f5772(0x23b)][_0x3f5772(0x232)]()[_0x3f5772(0x244)](0x8,'0');}const _0x88e6ff=new transfers_finished({'date':_0x38258b,'from_warehouse':_0x5a6ed9,'to_warehouse':_0x5a6ed9,'product':_0x5d3ac5,'note':_0x38773c,'invoice':_0x3f5772(0x1f5)+_0x5d0955[_0x3f5772(0x23b)]['toString']()[_0x3f5772(0x244)](0x8,'0'),'type_of_process':_0x3f5772(0x207),'type_of_transaction':_0x3f5772(0x222),'PO_number':_0x4059a3,'RequestedBy':_0x1ea251,'DateofRequest':_0x225a0c,'typeservices':_0x49c44a,'destination':_0x217add,'deliverydate':_0x41c2d4,'driver':_0xcfd24,'plate':_0x28cf74,'van':_0x142f1b,'DRSI':_0x3dc75a,'typevehicle':_0x337ec2,'TSU':_0x4ece57,'TFU':_0x240aec}),_0x138a15=await _0x88e6ff['save']();_0x4433e3['flash'](_0x3f5772(0x1be),'Product\x20Transfer\x20successfully'),_0x3993a8[_0x3f5772(0x18b)](_0x3f5772(0x203)+_0x138a15['_id']);}catch(_0x43ddca){console[_0x3f5772(0x1dc)](_0x43ddca),_0x3993a8[_0x3f5772(0x1d0)](0xc8)[_0x3f5772(0x1b6)]({'errorMessage':_0x43ddca[_0x3f5772(0x1ef)]});}}),router[a0_0x360bc9(0x1ab)]('/view/addlog',auth,async(_0x34278e,_0x5df6f3)=>{var _0x972e5=a0_0x360bc9;try{const {date:_0x5f41cb,from_warehouse:_0x41e743,FromRoom_name:_0x54ed3f,to_warehouse:_0x441e5e,ToRoom_name:_0x328e1d,prod_name:_0x127072,from_prod_qty:_0x3a919d,from_prod_level:_0xd3b2da,from_prod_isle:_0x2ab7b6,from_prod_pallet:_0x351327,to_prod_qty:_0xf983b5,to_prod_level:_0x5bf5d9,to_prod_isle:_0x46ed3f,to_prod_pallet:_0x2e17db,primary_code:_0x2f3d93,secondary_code:_0x1234b8,product_code3:_0x497bfa,note:_0x30736c,MaxStocks_data2:_0x1fbcd7,invoice:_0x1ebfff,expiry_date:_0x5ebbf6,PO_number_loc:_0xe7aba9,ReqBy_loc:_0x51b5d4,dateofreq_loc:_0x28fe30,typeservices_loc_Data:_0x47fde5,destination_loc:_0x482a4c,deliverydate_loc:_0xd7a7fe,driver_loc:_0x5ba621,plate_loc:_0x20169e,van_loc:_0x1b7f07,DRSI_loc:_0x1feddf,typevehicle_loc:_0x1243f0,TSU_loc:_0x110eff,TFU_loc:_0x1a6a92}=_0x34278e[_0x972e5(0x18d)];if(typeof _0x127072==_0x972e5(0x1a5))var _0xf82b0b=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x1a7)]],_0xc81ce4=[_0x34278e['body'][_0x972e5(0x23c)]],_0x3a3cfa=[_0x34278e['body'][_0x972e5(0x20c)]],_0x263b84=[_0x34278e[_0x972e5(0x18d)]['New_Qty_Converted']],_0x27aa81=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x1d6)]],_0x175fb5=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x1f6)]],_0xf27339=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x1ae)]],_0x5c3322=[_0x34278e['body'][_0x972e5(0x234)]],_0xd9fb29=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x1b3)]],_0xb093f6=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x20b)]],_0x412527=[_0x34278e['body'][_0x972e5(0x20f)]],_0x25acc8=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x24d)]],_0x501e8c=[_0x34278e[_0x972e5(0x18d)]['expiry_date']],_0x3c0889=[_0x34278e[_0x972e5(0x18d)]['product_date']],_0x198dbe=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x1f2)]],_0x18a936=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x1b7)]],_0x403bee=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x214)]],_0x5418f2=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x228)]],_0xfa2fcb=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x245)]],_0x29ead3=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x1c0)]],_0x3601af=[_0x34278e[_0x972e5(0x18d)][_0x972e5(0x23d)]];else var _0xf82b0b=[..._0x34278e['body']['prod_name']],_0xc81ce4=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x23c)]],_0x3a3cfa=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x20c)]],_0x263b84=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x188)]],_0x27aa81=[..._0x34278e[_0x972e5(0x18d)]['to_prod_level']],_0x175fb5=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x1f6)]],_0xf27339=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x1ae)]],_0x5c3322=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x234)]],_0xd9fb29=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x1b3)]],_0xb093f6=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x20b)]],_0x412527=[..._0x34278e[_0x972e5(0x18d)]['secondary_unit']],_0x25acc8=[..._0x34278e['body'][_0x972e5(0x24d)]],_0x501e8c=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x247)]],_0x3c0889=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x1fe)]],_0x198dbe=[..._0x34278e[_0x972e5(0x18d)]['MaxStocks_data']],_0x18a936=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x1b7)]],_0x403bee=[..._0x34278e[_0x972e5(0x18d)]['prod_cat']],_0x5418f2=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x228)]],_0xfa2fcb=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x245)]],_0x29ead3=[..._0x34278e[_0x972e5(0x18d)]['from_invoice']],_0x3601af=[..._0x34278e[_0x972e5(0x18d)][_0x972e5(0x23d)]];const _0x2d8d2a=_0xf82b0b['map'](_0x1ed188=>{return _0x1ed188={'product_name':_0x1ed188};});_0xc81ce4[_0x972e5(0x1b0)]((_0x5ee1f4,_0xc4c1e1)=>{var _0x14a2f4=_0x972e5;_0x2d8d2a[_0xc4c1e1][_0x14a2f4(0x1c2)]=_0x5ee1f4;}),_0x3a3cfa['forEach']((_0x258e5f,_0x4e5d80)=>{var _0x55d57d=_0x972e5,_0x13e454=_0x258e5f[_0x55d57d(0x1d7)](/[A-Za-z]+/)[0x0],_0x47ae0b=parseInt(_0x258e5f[_0x55d57d(0x1d7)](/\d+/)[0x0]);_0x2d8d2a[_0x4e5d80][_0x55d57d(0x1c6)]=_0x47ae0b,_0x2d8d2a[_0x4e5d80]['from_level']=_0x13e454;}),_0x3601af['forEach']((_0xe79fad,_0xbc827e)=>{var _0x1db592=_0x972e5;_0x2d8d2a[_0xbc827e][_0x1db592(0x23d)]=_0xe79fad;}),_0x29ead3['forEach']((_0x552b4e,_0x3a5ec3)=>{var _0x154bc0=_0x972e5;_0x2d8d2a[_0x3a5ec3][_0x154bc0(0x1c0)]=_0x552b4e;}),_0x263b84[_0x972e5(0x1b0)]((_0x5f224a,_0x3cfaa8)=>{var _0x5c5703=_0x972e5;_0x2d8d2a[_0x3cfaa8][_0x5c5703(0x1a2)]=_0x5f224a;}),_0x27aa81[_0x972e5(0x1b0)]((_0x2f84eb,_0x18a8cf)=>{var _0x2a7230=_0x972e5,_0x5aa14c=_0x2f84eb['match'](/[A-Za-z]+/)[0x0],_0x2564da=parseInt(_0x2f84eb['match'](/\d+/)[0x0]);_0x2d8d2a[_0x18a8cf][_0x2a7230(0x1de)]=_0x5aa14c,_0x2d8d2a[_0x18a8cf][_0x2a7230(0x1d5)]=_0x2564da;}),_0x175fb5[_0x972e5(0x1b0)]((_0x59bc43,_0x2346cf)=>{_0x2d8d2a[_0x2346cf]['primary_code']=_0x59bc43;}),_0xf27339['forEach']((_0x5446cd,_0x156a8e)=>{var _0xd382af=_0x972e5;_0x2d8d2a[_0x156a8e][_0xd382af(0x1ae)]=_0x5446cd;}),_0x5c3322[_0x972e5(0x1b0)]((_0x31ec5b,_0x1b0b8)=>{var _0x2d32b3=_0x972e5;_0x2d8d2a[_0x1b0b8][_0x2d32b3(0x18e)]=_0x31ec5b;}),_0xd9fb29['forEach']((_0x64c390,_0x1e5997)=>{var _0x498489=_0x972e5;_0x2d8d2a[_0x1e5997][_0x498489(0x1c1)]=_0x64c390;}),_0xb093f6[_0x972e5(0x1b0)]((_0x32e523,_0x4240c3)=>{_0x2d8d2a[_0x4240c3]['unit']=_0x32e523;}),_0x412527['forEach']((_0x10b5e2,_0x53829d)=>{_0x2d8d2a[_0x53829d]['secondary_unit']=_0x10b5e2;}),_0x25acc8[_0x972e5(0x1b0)]((_0x1b3547,_0x1cf258)=>{var _0x2e354c=_0x972e5;_0x2d8d2a[_0x1cf258][_0x2e354c(0x24d)]=_0x1b3547;}),_0x501e8c['forEach']((_0x3e2bbc,_0x46aee1)=>{var _0x512f02=_0x972e5;_0x2d8d2a[_0x46aee1][_0x512f02(0x247)]=_0x3e2bbc;}),_0x3c0889[_0x972e5(0x1b0)]((_0x18e082,_0x116590)=>{_0x2d8d2a[_0x116590]['production_date']=_0x18e082;}),_0x198dbe[_0x972e5(0x1b0)]((_0x42a875,_0x185050)=>{var _0x9ac305=_0x972e5;_0x2d8d2a[_0x185050][_0x9ac305(0x1c1)]=_0x42a875;}),_0x18a936[_0x972e5(0x1b0)]((_0xec8454,_0x2935a5)=>{var _0x1d3b19=_0x972e5;_0x2d8d2a[_0x2935a5][_0x1d3b19(0x1b7)]=_0xec8454;}),_0x403bee[_0x972e5(0x1b0)]((_0x1a883e,_0x253a6c)=>{_0x2d8d2a[_0x253a6c]['prod_cat']=_0x1a883e;}),_0x5418f2[_0x972e5(0x1b0)]((_0x1ebacf,_0x364b96)=>{var _0x3cad43=_0x972e5;_0x2d8d2a[_0x364b96][_0x3cad43(0x1b9)]=_0x1ebacf;}),_0xfa2fcb[_0x972e5(0x1b0)]((_0x519905,_0x166120)=>{var _0x132b8c=_0x972e5;_0x2d8d2a[_0x166120][_0x132b8c(0x20a)]=_0x519905;});const _0x50bbd5=_0x2d8d2a[_0x972e5(0x19b)](_0xac8391=>_0xac8391[_0x972e5(0x1a2)]!=='0'&&_0xac8391[_0x972e5(0x1a2)]!==''||_0xac8391[_0x972e5(0x21c)]!=='0'&&_0xac8391[_0x972e5(0x21c)]!=='');var _0x5513f4=0x0;_0x50bbd5['forEach'](_0x5ca507=>{var _0x67b0f=_0x972e5;parseInt(_0x5ca507[_0x67b0f(0x1c2)])<parseInt(_0x5ca507['to_quantity'])&&_0x5513f4++;});if(_0x5513f4!=0x0)return _0x34278e['flash'](_0x972e5(0x1cf),_0x972e5(0x241)),_0x5df6f3[_0x972e5(0x18b)](_0x972e5(0x205));const _0x157c34=new transfers_logs();await _0x157c34[_0x972e5(0x183)]();for(let _0x30f8fd=0x0;_0x30f8fd<=_0xfa2fcb[_0x972e5(0x225)]-0x1;_0x30f8fd++){_0x2d8d2a[_0x30f8fd]['To_invoice']=_0x972e5(0x1f5)+_0x157c34[_0x972e5(0x23b)][_0x972e5(0x232)]()[_0x972e5(0x244)](0x8,'0');}const _0x2531e5=new transfers_finished({'date':_0x5f41cb,'from_warehouse':_0x41e743,'to_warehouse':_0x441e5e,'product':_0x50bbd5,'note':_0x30736c,'invoice':_0x972e5(0x1f5)+_0x157c34[_0x972e5(0x23b)][_0x972e5(0x232)]()[_0x972e5(0x244)](0x8,'0'),'type_of_transaction':'logs','type_of_process':_0x972e5(0x1fd),'PO_number':_0xe7aba9,'RequestedBy':_0x51b5d4,'DateofRequest':_0x28fe30,'typeservices':_0x47fde5,'destination':_0x482a4c,'deliverydate':_0xd7a7fe,'driver':_0x5ba621,'plate':_0x20169e,'van':_0x1b7f07,'DRSI':_0x1feddf,'typevehicle':_0x1243f0,'TSU':_0x110eff,'TFU':_0x1a6a92}),_0x2be16e=await _0x2531e5['save']();_0x34278e['flash'](_0x972e5(0x1be),_0x972e5(0x1c4)),_0x5df6f3['redirect'](_0x972e5(0x203)+_0x2be16e[_0x972e5(0x22f)]);}catch(_0x32aeb6){console[_0x972e5(0x1dc)](_0x32aeb6),_0x5df6f3['status'](0xc8)[_0x972e5(0x1b6)]({'errorMessage':_0x32aeb6['message']});}}),router[a0_0x360bc9(0x1ab)](a0_0x360bc9(0x21d),auth,async(_0x53e756,_0x40ec5a)=>{var _0x3b049b=a0_0x360bc9;try{const {date:_0x9c83d7,from_warehouse:_0x3fd84a,FromRoom_name:_0x1b5201,to_warehouse:_0x19c958,ToRoom_name:_0x467bf0,prod_name:_0x5f4b66,from_prod_qty:_0x3aa354,from_prod_level:_0x599024,from_prod_isle:_0x32ca30,from_prod_pallet:_0x46c4f6,to_prod_qty:_0x28f613,to_prod_level:_0x4053c0,to_prod_isle:_0x2cd825,to_prod_pallet:_0x23021d,primary_code:_0x43be6a,secondary_code:_0x566c11,product_code3:_0x1c367c,note:_0x544925,MaxStocks_data2:_0x5855dd,invoice:_0x3c7b02,expiry_date:_0x5d1ca1,PO_number:_0x2e90de,ReqBy:_0x11f93c,dateofreq:_0x116f87,typeservicesData:_0xa678d3,destination:_0x1650aa,deliverydate:_0x1cdd04,driver:_0x3d9ae1,plate:_0x3f0d6b,van:_0x219bd6,DRSI:_0x31d2e7,typevehicle:_0x4ead94,TSU:_0xef807c,TFU:_0x17629e}=_0x53e756[_0x3b049b(0x18d)];if(typeof _0x5f4b66==_0x3b049b(0x1a5))var _0x2daf53=[_0x53e756['body']['prod_name']],_0x1841c5=[_0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x23c)]],_0xc9d8bb=[_0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x20c)]],_0x445563=[_0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x188)]],_0x10e92b=[_0x53e756['body'][_0x3b049b(0x1d6)]],_0x110c8f=[_0x53e756['body'][_0x3b049b(0x1f6)]],_0x30350c=[_0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x1ae)]],_0x452214=[_0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x234)]],_0x4d7823=[_0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x1b3)]],_0x16e013=[_0x53e756[_0x3b049b(0x18d)]['primary_unit']],_0x567652=[_0x53e756['body'][_0x3b049b(0x20f)]],_0xcc092b=[_0x53e756[_0x3b049b(0x18d)]['batch_code']],_0x23a363=[_0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x247)]],_0x5f3dd3=[_0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x1fe)]],_0x31c3c7=[_0x53e756[_0x3b049b(0x18d)]['MaxStocks_data']],_0x34e351=[_0x53e756['body'][_0x3b049b(0x1b7)]],_0x10b3a9=[_0x53e756['body']['prod_cat']],_0x4c8998=[_0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x228)]],_0x38a315=[_0x53e756['body'][_0x3b049b(0x245)]],_0x3724ff=[_0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x1c0)]],_0x32640c=[_0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x23d)]];else var _0x2daf53=[..._0x53e756['body'][_0x3b049b(0x1a7)]],_0x1841c5=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x23c)]],_0xc9d8bb=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x20c)]],_0x445563=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x188)]],_0x10e92b=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x1d6)]],_0x110c8f=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x1f6)]],_0x30350c=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x1ae)]],_0x452214=[..._0x53e756['body']['product_code3']],_0x4d7823=[..._0x53e756[_0x3b049b(0x18d)]['MaxStocks_data2']],_0x16e013=[..._0x53e756[_0x3b049b(0x18d)]['primary_unit']],_0x567652=[..._0x53e756['body'][_0x3b049b(0x20f)]],_0xcc092b=[..._0x53e756[_0x3b049b(0x18d)]['batch_code']],_0x23a363=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x247)]],_0x5f3dd3=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x1fe)]],_0x31c3c7=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x1f2)]],_0x34e351=[..._0x53e756[_0x3b049b(0x18d)]['maxPerUnit']],_0x10b3a9=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x214)]],_0x4c8998=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x228)]],_0x38a315=[..._0x53e756[_0x3b049b(0x18d)]['ToRoomAssigned']],_0x3724ff=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x1c0)]],_0x32640c=[..._0x53e756[_0x3b049b(0x18d)][_0x3b049b(0x23d)]];const _0x592ba4=_0x2daf53['map'](_0xe9d1b=>{return _0xe9d1b={'product_name':_0xe9d1b};});_0x1841c5['forEach']((_0x112c2b,_0x1334e9)=>{_0x592ba4[_0x1334e9]['from_quantity']=_0x112c2b;}),_0xc9d8bb['forEach']((_0x3bea50,_0x3222a7)=>{var _0x50eed0=_0x3b049b,_0xa791c8=_0x3bea50[_0x50eed0(0x1d7)](/[A-Za-z]+/)[0x0],_0x4879f9=parseInt(_0x3bea50[_0x50eed0(0x1d7)](/\d+/)[0x0]);_0x592ba4[_0x3222a7][_0x50eed0(0x1c6)]=_0x4879f9,_0x592ba4[_0x3222a7][_0x50eed0(0x235)]=_0xa791c8;}),_0x32640c['forEach']((_0x23a66c,_0x50b461)=>{var _0x4886fd=_0x3b049b;_0x592ba4[_0x50b461][_0x4886fd(0x23d)]=_0x23a66c;}),_0x3724ff['forEach']((_0x19fc40,_0x3ec420)=>{var _0x4bcb5b=_0x3b049b;_0x592ba4[_0x3ec420][_0x4bcb5b(0x1c0)]=_0x19fc40;}),_0x445563[_0x3b049b(0x1b0)]((_0x2966f2,_0xc944c9)=>{var _0x96dce=_0x3b049b;_0x592ba4[_0xc944c9][_0x96dce(0x1a2)]=_0x2966f2;}),_0x10e92b[_0x3b049b(0x1b0)]((_0xd10a71,_0x59e142)=>{var _0x458b2b=_0x3b049b,_0x1b3cc4=_0xd10a71['match'](/[A-Za-z]+/)[0x0],_0x4b1d6e=parseInt(_0xd10a71['match'](/\d+/)[0x0]);_0x592ba4[_0x59e142][_0x458b2b(0x1de)]=_0x1b3cc4,_0x592ba4[_0x59e142][_0x458b2b(0x1d5)]=_0x4b1d6e;}),_0x110c8f[_0x3b049b(0x1b0)]((_0x468d1d,_0x4a5ffa)=>{var _0x22881d=_0x3b049b;_0x592ba4[_0x4a5ffa][_0x22881d(0x1f6)]=_0x468d1d;}),_0x30350c[_0x3b049b(0x1b0)]((_0x59385f,_0x308b87)=>{var _0x5dc792=_0x3b049b;_0x592ba4[_0x308b87][_0x5dc792(0x1ae)]=_0x59385f;}),_0x452214[_0x3b049b(0x1b0)]((_0x1c33af,_0x3bd9cd)=>{var _0x3b9be4=_0x3b049b;_0x592ba4[_0x3bd9cd][_0x3b9be4(0x18e)]=_0x1c33af;}),_0x4d7823[_0x3b049b(0x1b0)]((_0x1eba84,_0x27d877)=>{_0x592ba4[_0x27d877]['maxProducts']=_0x1eba84;}),_0x16e013[_0x3b049b(0x1b0)]((_0x47f151,_0x4b429f)=>{var _0x200354=_0x3b049b;_0x592ba4[_0x4b429f][_0x200354(0x1fb)]=_0x47f151;}),_0x567652['forEach']((_0x3426a5,_0x358ca9)=>{var _0x38457a=_0x3b049b;_0x592ba4[_0x358ca9][_0x38457a(0x20f)]=_0x3426a5;}),_0xcc092b[_0x3b049b(0x1b0)]((_0x5a709e,_0x54b7be)=>{var _0xc14372=_0x3b049b;_0x592ba4[_0x54b7be][_0xc14372(0x24d)]=_0x5a709e;}),_0x23a363[_0x3b049b(0x1b0)]((_0x3cd21b,_0x5cbfee)=>{var _0x16cfa5=_0x3b049b;_0x592ba4[_0x5cbfee][_0x16cfa5(0x247)]=_0x3cd21b;}),_0x5f3dd3[_0x3b049b(0x1b0)]((_0x456e8f,_0x1d6d34)=>{var _0x4851da=_0x3b049b;_0x592ba4[_0x1d6d34][_0x4851da(0x185)]=_0x456e8f;}),_0x31c3c7['forEach']((_0x384d13,_0x1b1e68)=>{var _0x4c561c=_0x3b049b;_0x592ba4[_0x1b1e68][_0x4c561c(0x1c1)]=_0x384d13;}),_0x34e351[_0x3b049b(0x1b0)]((_0x52e678,_0x5086a3)=>{var _0x1926d8=_0x3b049b;_0x592ba4[_0x5086a3][_0x1926d8(0x1b7)]=_0x52e678;}),_0x10b3a9[_0x3b049b(0x1b0)]((_0x261fa6,_0x3064bd)=>{var _0x115105=_0x3b049b;_0x592ba4[_0x3064bd][_0x115105(0x214)]=_0x261fa6;}),_0x4c8998[_0x3b049b(0x1b0)]((_0x42f893,_0x52222c)=>{var _0x1128c2=_0x3b049b;_0x592ba4[_0x52222c][_0x1128c2(0x1b9)]=_0x42f893;}),_0x38a315[_0x3b049b(0x1b0)]((_0x252d9e,_0x237045)=>{_0x592ba4[_0x237045]['to_room_name']=_0x252d9e;});const _0x127b7d=_0x592ba4[_0x3b049b(0x19b)](_0x6bd5a8=>_0x6bd5a8[_0x3b049b(0x1a2)]!=='0'&&_0x6bd5a8[_0x3b049b(0x1a2)]!==''||_0x6bd5a8[_0x3b049b(0x21c)]!=='0'&&_0x6bd5a8[_0x3b049b(0x21c)]!=='');var _0x569497=0x0;_0x127b7d['forEach'](_0x182e38=>{var _0x1fa04a=_0x3b049b;parseInt(_0x182e38[_0x1fa04a(0x1c2)])<parseInt(_0x182e38[_0x1fa04a(0x1a2)])&&_0x569497++;});if(_0x569497!=0x0)return _0x53e756[_0x3b049b(0x1e0)](_0x3b049b(0x1cf),_0x3b049b(0x241)),_0x40ec5a[_0x3b049b(0x18b)]('back');const _0x4f4d1d=new invoice_for_transfer();await _0x4f4d1d[_0x3b049b(0x183)]();for(let _0xc12bdb=0x0;_0xc12bdb<=_0x38a315['length']-0x1;_0xc12bdb++){_0x592ba4[_0xc12bdb]['To_invoice']='TRF-'+_0x4f4d1d[_0x3b049b(0x23b)]['toString']()[_0x3b049b(0x244)](0x8,'0');}const _0x20323d=new transfers_finished({'date':_0x9c83d7,'from_warehouse':_0x3fd84a,'to_warehouse':_0x3fd84a,'product':_0x127b7d,'note':_0x544925,'invoice':_0x3b049b(0x18f)+_0x4f4d1d[_0x3b049b(0x23b)]['toString']()['padStart'](0x8,'0'),'type_of_process':_0x3b049b(0x207),'type_of_transaction':_0x3b049b(0x1af),'PO_number':_0x2e90de,'RequestedBy':_0x11f93c,'DateofRequest':_0x116f87,'typeservices':_0xa678d3,'destination':_0x1650aa,'deliverydate':_0x1cdd04,'driver':_0x3d9ae1,'plate':_0x3f0d6b,'van':_0x219bd6,'DRSI':_0x31d2e7,'typevehicle':_0x4ead94,'TSU':_0xef807c,'TFU':_0x17629e}),_0x1f36f1=await _0x20323d[_0x3b049b(0x183)]();_0x53e756[_0x3b049b(0x1e0)]('success','Product\x20Transfer\x20successfully'),_0x40ec5a[_0x3b049b(0x18b)](_0x3b049b(0x203)+_0x1f36f1[_0x3b049b(0x22f)]);}catch(_0x52420e){console[_0x3b049b(0x1dc)](_0x52420e),_0x40ec5a[_0x3b049b(0x1d0)](0xc8)['json']({'errorMessage':_0x52420e[_0x3b049b(0x1ef)]});}}),router['post']('/view/add_transfer_loc',auth,async(_0x1d765c,_0x48b79b)=>{var _0x1d3f07=a0_0x360bc9;try{const {date:_0x5cb5d9,from_warehouse:_0x36d2b4,FromRoom_name:_0x3baa77,to_warehouse:_0x390f70,ToRoom_name:_0x27061c,prod_name:_0xe68c71,from_prod_qty:_0x5c6af4,from_prod_level:_0x225e4c,from_prod_isle:_0x40c3fb,from_prod_pallet:_0x22ecbd,to_prod_qty:_0x2f23a5,to_prod_level:_0x5412eb,to_prod_isle:_0x4ca10d,to_prod_pallet:_0x4acfb9,primary_code:_0x55cdad,secondary_code:_0x10d210,product_code3:_0x4aea18,note:_0x2780b8,MaxStocks_data2:_0x3ff537,invoice:_0xe1fd06,expiry_date:_0xf041c6,PO_number_loc:_0x18aef8,ReqBy_loc:_0x4c788d,dateofreq_loc:_0x5d68da,typeservices_loc_Data:_0x45f7f0,destination_loc:_0xd67f97,deliverydate_loc:_0x8153f2,driver_loc:_0x4545ea,plate_loc:_0x3616d0,van_loc:_0x25a7cd,DRSI_loc:_0x4e5f22,typevehicle_loc:_0x50179b,TSU_loc:_0x44fd5f,TFU_loc:_0x3ff060}=_0x1d765c[_0x1d3f07(0x18d)];if(typeof _0xe68c71==_0x1d3f07(0x1a5))var _0x25eb53=[_0x1d765c[_0x1d3f07(0x18d)]['prod_name']],_0x45a00c=[_0x1d765c['body'][_0x1d3f07(0x23c)]],_0x161279=[_0x1d765c['body'][_0x1d3f07(0x20c)]],_0x6550f3=[_0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x188)]],_0x3f6304=[_0x1d765c['body'][_0x1d3f07(0x1d6)]],_0x722e7e=[_0x1d765c['body']['primary_code']],_0x349aaf=[_0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x1ae)]],_0x3eb2ce=[_0x1d765c['body']['product_code3']],_0x382f6d=[_0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x1b3)]],_0x4ea97b=[_0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x20b)]],_0x2fa86a=[_0x1d765c[_0x1d3f07(0x18d)]['secondary_unit']],_0x2a33b2=[_0x1d765c[_0x1d3f07(0x18d)]['batch_code']],_0x47b968=[_0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x247)]],_0x17f2a5=[_0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x1fe)]],_0x1c0777=[_0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x1f2)]],_0x44bd03=[_0x1d765c['body'][_0x1d3f07(0x1b7)]],_0x178449=[_0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x214)]],_0x36681e=[_0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x228)]],_0x5883e4=[_0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x245)]],_0x267c9a=[_0x1d765c[_0x1d3f07(0x18d)]['from_invoice']],_0x4faeb6=[_0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x23d)]];else var _0x25eb53=[..._0x1d765c[_0x1d3f07(0x18d)]['prod_name']],_0x45a00c=[..._0x1d765c['body']['from_prod_qty']],_0x161279=[..._0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x20c)]],_0x6550f3=[..._0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x188)]],_0x3f6304=[..._0x1d765c['body'][_0x1d3f07(0x1d6)]],_0x722e7e=[..._0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x1f6)]],_0x349aaf=[..._0x1d765c['body'][_0x1d3f07(0x1ae)]],_0x3eb2ce=[..._0x1d765c[_0x1d3f07(0x18d)]['product_code3']],_0x382f6d=[..._0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x1b3)]],_0x4ea97b=[..._0x1d765c['body'][_0x1d3f07(0x20b)]],_0x2fa86a=[..._0x1d765c['body'][_0x1d3f07(0x20f)]],_0x2a33b2=[..._0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x24d)]],_0x47b968=[..._0x1d765c['body'][_0x1d3f07(0x247)]],_0x17f2a5=[..._0x1d765c[_0x1d3f07(0x18d)]['product_date']],_0x1c0777=[..._0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x1f2)]],_0x44bd03=[..._0x1d765c['body'][_0x1d3f07(0x1b7)]],_0x178449=[..._0x1d765c[_0x1d3f07(0x18d)]['prod_cat']],_0x36681e=[..._0x1d765c['body'][_0x1d3f07(0x228)]],_0x5883e4=[..._0x1d765c[_0x1d3f07(0x18d)][_0x1d3f07(0x245)]],_0x267c9a=[..._0x1d765c['body'][_0x1d3f07(0x1c0)]],_0x4faeb6=[..._0x1d765c[_0x1d3f07(0x18d)]['id_transaction']];const _0x3c6365=_0x25eb53['map'](_0x2dd12a=>{return _0x2dd12a={'product_name':_0x2dd12a};});_0x45a00c[_0x1d3f07(0x1b0)]((_0x4dd063,_0x1bfc80)=>{var _0x7fc04a=_0x1d3f07;_0x3c6365[_0x1bfc80][_0x7fc04a(0x1c2)]=_0x4dd063;}),_0x161279[_0x1d3f07(0x1b0)]((_0x214b70,_0x3a94ae)=>{var _0x518bde=_0x1d3f07,_0x1d96c4=_0x214b70[_0x518bde(0x1d7)](/[A-Za-z]+/)[0x0],_0x67d26d=parseInt(_0x214b70[_0x518bde(0x1d7)](/\d+/)[0x0]);_0x3c6365[_0x3a94ae][_0x518bde(0x1c6)]=_0x67d26d,_0x3c6365[_0x3a94ae][_0x518bde(0x235)]=_0x1d96c4;}),_0x4faeb6[_0x1d3f07(0x1b0)]((_0x344b7b,_0x3e26ae)=>{var _0x407340=_0x1d3f07;_0x3c6365[_0x3e26ae][_0x407340(0x23d)]=_0x344b7b;}),_0x267c9a[_0x1d3f07(0x1b0)]((_0x3be725,_0x14a1aa)=>{var _0x5c000f=_0x1d3f07;_0x3c6365[_0x14a1aa][_0x5c000f(0x1c0)]=_0x3be725;}),_0x6550f3[_0x1d3f07(0x1b0)]((_0x384218,_0x482b5b)=>{_0x3c6365[_0x482b5b]['to_quantity']=_0x384218;}),_0x3f6304[_0x1d3f07(0x1b0)]((_0x356800,_0x4898bb)=>{var _0x2e1431=_0x1d3f07,_0x1c4ff6=_0x356800[_0x2e1431(0x1d7)](/[A-Za-z]+/)[0x0],_0x545667=parseInt(_0x356800[_0x2e1431(0x1d7)](/\d+/)[0x0]);_0x3c6365[_0x4898bb][_0x2e1431(0x1de)]=_0x1c4ff6,_0x3c6365[_0x4898bb][_0x2e1431(0x1d5)]=_0x545667;}),_0x722e7e['forEach']((_0x51df86,_0x16b612)=>{var _0x320a1e=_0x1d3f07;_0x3c6365[_0x16b612][_0x320a1e(0x1f6)]=_0x51df86;}),_0x349aaf[_0x1d3f07(0x1b0)]((_0x577fc1,_0x5b0fb3)=>{var _0x1669c=_0x1d3f07;_0x3c6365[_0x5b0fb3][_0x1669c(0x1ae)]=_0x577fc1;}),_0x3eb2ce[_0x1d3f07(0x1b0)]((_0xfce338,_0x9e42c2)=>{_0x3c6365[_0x9e42c2]['product_code']=_0xfce338;}),_0x382f6d[_0x1d3f07(0x1b0)]((_0x1f5e4f,_0x2f8d0b)=>{var _0x4ebbc2=_0x1d3f07;_0x3c6365[_0x2f8d0b][_0x4ebbc2(0x1c1)]=_0x1f5e4f;}),_0x4ea97b[_0x1d3f07(0x1b0)]((_0x37b810,_0x17d9b2)=>{var _0x20802f=_0x1d3f07;_0x3c6365[_0x17d9b2][_0x20802f(0x1fb)]=_0x37b810;}),_0x2fa86a[_0x1d3f07(0x1b0)]((_0x314e0d,_0xe6c8ed)=>{var _0x4ae11f=_0x1d3f07;_0x3c6365[_0xe6c8ed][_0x4ae11f(0x20f)]=_0x314e0d;}),_0x2a33b2['forEach']((_0x1e497a,_0x1715f1)=>{_0x3c6365[_0x1715f1]['batch_code']=_0x1e497a;}),_0x47b968[_0x1d3f07(0x1b0)]((_0x2f4c94,_0x3fc41f)=>{var _0x3221e1=_0x1d3f07;_0x3c6365[_0x3fc41f][_0x3221e1(0x247)]=_0x2f4c94;}),_0x17f2a5[_0x1d3f07(0x1b0)]((_0x58e0a8,_0x20f3c5)=>{var _0x19887a=_0x1d3f07;_0x3c6365[_0x20f3c5][_0x19887a(0x185)]=_0x58e0a8;}),_0x1c0777[_0x1d3f07(0x1b0)]((_0x44956d,_0xb4bb7)=>{_0x3c6365[_0xb4bb7]['maxProducts']=_0x44956d;}),_0x44bd03[_0x1d3f07(0x1b0)]((_0x55a5b6,_0x2383fe)=>{_0x3c6365[_0x2383fe]['maxPerUnit']=_0x55a5b6;}),_0x178449[_0x1d3f07(0x1b0)]((_0x23a8cb,_0x314f4d)=>{var _0x4bd011=_0x1d3f07;_0x3c6365[_0x314f4d][_0x4bd011(0x214)]=_0x23a8cb;}),_0x36681e['forEach']((_0x38b7e0,_0x1903f8)=>{_0x3c6365[_0x1903f8]['from_room_name']=_0x38b7e0;}),_0x5883e4[_0x1d3f07(0x1b0)]((_0x43259f,_0x1b18fc)=>{var _0x5a2311=_0x1d3f07;_0x3c6365[_0x1b18fc][_0x5a2311(0x20a)]=_0x43259f;});const _0x307139=_0x3c6365[_0x1d3f07(0x19b)](_0x5f30f5=>_0x5f30f5[_0x1d3f07(0x1a2)]!=='0'&&_0x5f30f5[_0x1d3f07(0x1a2)]!==''||_0x5f30f5[_0x1d3f07(0x21c)]!=='0'&&_0x5f30f5[_0x1d3f07(0x21c)]!=='');var _0x13057a=0x0;_0x307139[_0x1d3f07(0x1b0)](_0x39c327=>{var _0x18331a=_0x1d3f07;parseInt(_0x39c327[_0x18331a(0x1c2)])<parseInt(_0x39c327[_0x18331a(0x1a2)])&&_0x13057a++;});if(_0x13057a!=0x0)return _0x1d765c['flash'](_0x1d3f07(0x1cf),_0x1d3f07(0x241)),_0x48b79b[_0x1d3f07(0x18b)]('back');const _0x5201e2=new invoice_for_transfer();await _0x5201e2[_0x1d3f07(0x183)]();for(let _0x599263=0x0;_0x599263<=_0x5883e4['length']-0x1;_0x599263++){_0x3c6365[_0x599263][_0x1d3f07(0x1db)]='TRF-'+_0x5201e2[_0x1d3f07(0x23b)]['toString']()[_0x1d3f07(0x244)](0x8,'0');}const _0x3bce4f=new transfers_finished({'date':_0x5cb5d9,'from_warehouse':_0x36d2b4,'to_warehouse':_0x390f70,'product':_0x307139,'note':_0x2780b8,'invoice':_0x1d3f07(0x18f)+_0x5201e2[_0x1d3f07(0x23b)][_0x1d3f07(0x232)]()[_0x1d3f07(0x244)](0x8,'0'),'type_of_transaction':_0x1d3f07(0x1af),'type_of_process':'location2location','PO_number':_0x18aef8,'RequestedBy':_0x4c788d,'DateofRequest':_0x5d68da,'typeservices':_0x45f7f0,'destination':_0xd67f97,'deliverydate':_0x8153f2,'driver':_0x4545ea,'plate':_0x3616d0,'van':_0x25a7cd,'DRSI':_0x4e5f22,'typevehicle':_0x50179b,'TSU':_0x44fd5f,'TFU':_0x3ff060}),_0x39f2c7=await _0x3bce4f[_0x1d3f07(0x183)]();_0x1d765c[_0x1d3f07(0x1e0)](_0x1d3f07(0x1be),_0x1d3f07(0x1c4)),_0x48b79b[_0x1d3f07(0x18b)](_0x1d3f07(0x203)+_0x39f2c7[_0x1d3f07(0x22f)]);}catch(_0x3f8b7e){console['log'](_0x3f8b7e),_0x48b79b[_0x1d3f07(0x1d0)](0xc8)[_0x1d3f07(0x1b6)]({'errorMessage':_0x3f8b7e[_0x1d3f07(0x1ef)]});}}),router['get'](a0_0x360bc9(0x223),auth,async(_0x3ae3fe,_0x4280a0)=>{var _0x2bf560=a0_0x360bc9;try{const {username:_0x3f29e6,email:_0x4fc353,role:_0x41d350}=_0x3ae3fe[_0x2bf560(0x1ca)],_0xfac168=_0x3ae3fe[_0x2bf560(0x1ca)],_0x51bc1c=await profile[_0x2bf560(0x1f9)]({'email':_0xfac168[_0x2bf560(0x1f3)]}),_0x313a46=await master_shop[_0x2bf560(0x213)](),_0x4fc5b4=await transfers_finished['findById'](_0x3ae3fe[_0x2bf560(0x23a)]['id']);let _0x3cd179;if(_0xfac168[_0x2bf560(0x23e)]==_0x2bf560(0x221)){const _0x3d6546=await staff['findOne']({'email':_0xfac168[_0x2bf560(0x1f3)]});_0x3cd179=await warehouse[_0x2bf560(0x213)]({'status':_0x2bf560(0x200),'name':_0x3d6546[_0x2bf560(0x233)],'warehouse_category':_0x2bf560(0x198)});}else _0x3cd179=await warehouse[_0x2bf560(0x213)]({'status':'Enabled','warehouse_category':'Finished\x20Goods'});const _0x4921e1=await warehouse[_0x2bf560(0x208)]([{'$match':{'name':_0x4fc5b4[_0x2bf560(0x1e2)],'warehouse_category':_0x2bf560(0x198)}},{'$unwind':_0x2bf560(0x216)},{'$group':{'_id':_0x2bf560(0x19e),'name':{'$first':_0x2bf560(0x24a)},'product_stock':{'$first':_0x2bf560(0x1e8)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x2bf560(0x1ec)},'type':{'$first':_0x2bf560(0x1df)},'floorlevel':{'$first':_0x2bf560(0x242)},'primary_code':{'$first':_0x2bf560(0x1f8)},'secondary_code':{'$first':_0x2bf560(0x1a8)},'product_code':{'$first':_0x2bf560(0x219)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x2bf560(0x19a)},'expiry_date':{'$first':_0x2bf560(0x23f)},'production_date':{'$first':_0x2bf560(0x21f)},'room':{'$first':_0x2bf560(0x206)},'warehoue_name':{'$first':_0x2bf560(0x192)}}}]),_0x1ba2a5=await product[_0x2bf560(0x213)]({});if(_0x313a46[0x0][_0x2bf560(0x1c7)]==_0x2bf560(0x193)){var _0x191d47=users[_0x2bf560(0x18a)];console[_0x2bf560(0x1dc)](_0x191d47);}else{if(_0x313a46[0x0][_0x2bf560(0x1c7)]==_0x2bf560(0x1aa))var _0x191d47=users['Hindi'];else{if(_0x313a46[0x0]['language']==_0x2bf560(0x218))var _0x191d47=users[_0x2bf560(0x218)];else{if(_0x313a46[0x0][_0x2bf560(0x1c7)]=='Spanish')var _0x191d47=users['Spanish'];else{if(_0x313a46[0x0][_0x2bf560(0x1c7)]==_0x2bf560(0x22d))var _0x191d47=users[_0x2bf560(0x22d)];else{if(_0x313a46[0x0]['language']=='Portuguese\x20(BR)')var _0x191d47=users[_0x2bf560(0x201)];else{if(_0x313a46[0x0][_0x2bf560(0x1c7)]==_0x2bf560(0x18c))var _0x191d47=users['Chinese'];else{if(_0x313a46[0x0][_0x2bf560(0x1c7)]=='Arabic\x20(ae)')var _0x191d47=users[_0x2bf560(0x1cd)];}}}}}}}_0x4280a0[_0x2bf560(0x187)](_0x2bf560(0x227),{'success':_0x3ae3fe['flash'](_0x2bf560(0x1be)),'errors':_0x3ae3fe[_0x2bf560(0x1e0)](_0x2bf560(0x1cf)),'role':_0xfac168,'profile':_0x51bc1c,'master_shop':_0x313a46,'warehouse':_0x3cd179,'transfer':_0x4fc5b4,'stock':_0x4921e1,'unit':_0x1ba2a5,'language':_0x191d47});}catch(_0x5e3907){console[_0x2bf560(0x1dc)](_0x5e3907);}}),router[a0_0x360bc9(0x1ab)](a0_0x360bc9(0x223),auth,async(_0x3a4fc9,_0x730cb9)=>{var _0x3000cf=a0_0x360bc9;try{const {invoice:_0x313a81,from_warehouse:_0x31556a,FromRoom_name:_0x4ee941,to_warehouse:_0x38886e,ToRoom_name:_0x151c74}=_0x3a4fc9['body'],_0x45aad1=await transfers_finished['findById'](_0x3a4fc9[_0x3000cf(0x23a)]['id']),_0x2f675=_0x45aad1[_0x3000cf(0x1a4)][_0x3000cf(0x24e)](async _0x2f8c77=>{var _0xb50fc0=_0x3000cf;if(_0x2f8c77[_0xb50fc0(0x1a2)]>0x0){var _0x4f5640=await warehouse['findOne']({'name':_0x31556a,'room':_0x2f8c77[_0xb50fc0(0x1b9)]});const _0x79b42c=_0x4f5640[_0xb50fc0(0x1ed)][_0xb50fc0(0x24e)](_0xdc8728=>{var _0x4719b1=_0xb50fc0;_0xdc8728[_0x4719b1(0x22f)]==_0x2f8c77[_0x4719b1(0x23d)]&&(_0xdc8728['product_stock']=Math['max'](0x0,Math[_0x4719b1(0x19c)](_0xdc8728['product_stock'])-Math[_0x4719b1(0x19c)](_0x2f8c77['to_quantity'])),console[_0x4719b1(0x1dc)](_0xdc8728[_0x4719b1(0x237)]));});}return _0x4f5640;});Promise[_0x3000cf(0x249)](_0x2f675)['then'](async _0x2973df=>{var _0x1242e8=_0x3000cf;try{for(const _0x3fa598 of _0x2973df){await _0x3fa598[_0x1242e8(0x183)]();}const _0x4a620b=_0x45aad1[_0x1242e8(0x1a4)]['map'](async _0xef07b0=>{var _0x589457=_0x1242e8,_0x38089e=await warehouse[_0x589457(0x1f9)]({'name':_0x38886e,'room':_0xef07b0[_0x589457(0x20a)]});if(_0xef07b0['to_quantity']>0x0){var _0x5c5087=0x0;const _0x2decd3=_0x38089e[_0x589457(0x1ed)][_0x589457(0x24e)](_0x1a45ea=>{var _0x5b13b6=_0x589457;_0x1a45ea['product_name']==_0xef07b0[_0x5b13b6(0x1e3)]&&_0x1a45ea[_0x5b13b6(0x1a0)]==_0xef07b0[_0x5b13b6(0x1d5)]&&_0x1a45ea[_0x5b13b6(0x247)]==_0xef07b0[_0x5b13b6(0x247)]&&_0x1a45ea[_0x5b13b6(0x185)]==_0xef07b0[_0x5b13b6(0x185)]&&_0x1a45ea[_0x5b13b6(0x24d)]==_0xef07b0[_0x5b13b6(0x24d)]&&_0x1a45ea[_0x5b13b6(0x1f1)]==_0xef07b0[_0x5b13b6(0x1db)]&&(typeof _0xef07b0['id_transaction']=='undefined'?(console[_0x5b13b6(0x1dc)](_0x5b13b6(0x1e7),_0x1a45ea[_0x5b13b6(0x237)]+_0x5b13b6(0x197)+_0x1a45ea['_id']+_0x5b13b6(0x1ea)+Math[_0x5b13b6(0x19c)](_0x1a45ea[_0x5b13b6(0x237)])+Math[_0x5b13b6(0x19c)](_0xef07b0[_0x5b13b6(0x1a2)])),_0x1a45ea['product_stock']=Math[_0x5b13b6(0x19c)](_0x1a45ea[_0x5b13b6(0x237)])+Math[_0x5b13b6(0x19c)](_0xef07b0[_0x5b13b6(0x1a2)])):_0x1a45ea[_0x5b13b6(0x237)]=Math[_0x5b13b6(0x19c)](_0x1a45ea[_0x5b13b6(0x237)])+Math[_0x5b13b6(0x19c)](_0xef07b0['to_quantity']),_0x5c5087++);});_0x5c5087=='0'&&(_0x38089e[_0x589457(0x1ed)]=_0x38089e[_0x589457(0x1ed)][_0x589457(0x1f4)]({'product_name':_0xef07b0[_0x589457(0x1e3)],'product_stock':_0xef07b0[_0x589457(0x1a2)],'bay':_0xef07b0[_0x589457(0x1d5)],'level':_0xef07b0['to_level'],'product_code':_0xef07b0[_0x589457(0x18e)],'primary_code':_0xef07b0[_0x589457(0x1f6)],'secondary_code':_0xef07b0[_0x589457(0x1ae)],'expiry_date':_0xef07b0[_0x589457(0x247)],'production_date':_0xef07b0[_0x589457(0x185)],'maxProducts':_0xef07b0[_0x589457(0x1c1)],'batch_code':_0xef07b0[_0x589457(0x24d)],'secondary_unit':_0xef07b0[_0x589457(0x20f)],'unit':_0xef07b0[_0x589457(0x1fb)],'maxProducts':_0xef07b0[_0x589457(0x1c1)],'maxPerUnit':_0xef07b0[_0x589457(0x1b7)],'invoice':_0xef07b0[_0x589457(0x1db)]}));}return _0x38089e;});Promise[_0x1242e8(0x249)](_0x4a620b)['then'](async _0x16cae0=>{var _0x44d92a=_0x1242e8;try{console[_0x44d92a(0x1dc)](_0x45aad1[_0x44d92a(0x19d)]);if(_0x45aad1[_0x44d92a(0x19d)]!=_0x44d92a(0x1fd))for(const _0x5e49af of _0x16cae0){await warehouse[_0x44d92a(0x1e1)]({'_id':_0x5e49af['_id']},{'$addToSet':{'product_details':{'$each':_0x5e49af['product_details']}}});}_0x45aad1['finalize']=_0x44d92a(0x240);const _0x2eadf8=await _0x45aad1['save'](),_0x589666=await master_shop[_0x44d92a(0x213)](),_0xa452b8=await email_settings[_0x44d92a(0x1f9)](),_0x539a00=await supervisor_settings[_0x44d92a(0x213)]();var _0x2d679e=_0x45aad1[_0x44d92a(0x1a4)],_0x561f78='',_0x37ac49;for(_0x37ac49 in _0x2d679e){var _0x206935='FG';_0x45aad1['to_warehouse']=='DRY\x20GOODS'&&(_0x206935='DG'),_0x561f78+='<tr>'+_0x44d92a(0x1d9)+_0x2d679e[_0x37ac49]['product_name']+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2d679e[_0x37ac49]['product_code']+_0x44d92a(0x1e4)+_0x44d92a(0x1d9)+_0x2d679e[_0x37ac49][_0x44d92a(0x1a2)]+'</td>'+_0x44d92a(0x1d9)+_0x2d679e[_0x37ac49][_0x44d92a(0x1fb)]+_0x44d92a(0x1e4)+_0x44d92a(0x1d9)+_0x2d679e[_0x37ac49]['secondary_unit']+_0x44d92a(0x1e4)+_0x44d92a(0x1d9)+_0x45aad1[_0x44d92a(0x1e9)]+_0x44d92a(0x1e4)+_0x44d92a(0x1d9)+_0x2d679e[_0x37ac49]['to_room_name']+_0x44d92a(0x1e4)+_0x44d92a(0x1d9)+_0x206935+_0x2d679e[_0x37ac49][_0x44d92a(0x1d5)]+'</td>'+_0x44d92a(0x215);}_0x3a4fc9[_0x44d92a(0x1e0)](_0x44d92a(0x1be),'Transfer\x20Finalize\x20Successfully'),_0x730cb9[_0x44d92a(0x18b)](_0x44d92a(0x224)+_0x2eadf8[_0x44d92a(0x22f)]);}catch(_0x40e6cd){console[_0x44d92a(0x217)](_0x40e6cd),_0x730cb9[_0x44d92a(0x1d0)](0x1f4)[_0x44d92a(0x1b6)]({'error':_0x44d92a(0x226)});}})[_0x1242e8(0x212)](_0x2f0de9=>{var _0x4448d1=_0x1242e8;console[_0x4448d1(0x217)](_0x2f0de9),_0x730cb9['status'](0x1f4)[_0x4448d1(0x1b6)]({'error':'An\x20error\x20occurred.'});});}catch(_0x398883){console[_0x1242e8(0x217)](_0x398883),_0x730cb9[_0x1242e8(0x1d0)](0x1f4)[_0x1242e8(0x1b6)]({'error':_0x1242e8(0x202)});}})[_0x3000cf(0x212)](_0xaeb125=>{var _0x378f41=_0x3000cf;console[_0x378f41(0x217)](_0xaeb125),_0x730cb9[_0x378f41(0x1d0)](0x1f4)['json']({'error':_0x378f41(0x1ce)});});}catch(_0x5ba51a){_0x730cb9[_0x3000cf(0x1b6)]({'message':_0x5ba51a[_0x3000cf(0x1ef)]});}});function BayBinSelected(_0x5a22f9,_0x453a9c){var _0x2327b1=a0_0x360bc9,_0x4e8fe7=[];let _0x1955be=[];var _0x397892=[];if(_0x5a22f9==_0x2327b1(0x231)){switch(_0x453a9c){case _0x2327b1(0x1d1):_0x4e8fe7=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10];break;case _0x2327b1(0x1f0):_0x4e8fe7=[0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20];break;}_0x397892=['DG'];}else{if(_0x5a22f9==_0x2327b1(0x1a3)){switch(_0x453a9c){case _0x2327b1(0x1d1):_0x4e8fe7=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9];break;case _0x2327b1(0x1f0):_0x4e8fe7=[0xa,0xb,0xc,0xd,0xe,0xf,0x10,0x11,0x12];break;}_0x397892=['FG'];}}return{'levels':_0x4e8fe7,'identify':_0x397892};}router[a0_0x360bc9(0x1b8)](a0_0x360bc9(0x1da),auth,async(_0x4c100f,_0x5c43ea)=>{var _0x4dad1e=a0_0x360bc9;try{const {username:_0x5d2201,email:_0x52c049,role:_0x16b235}=_0x4c100f[_0x4dad1e(0x1ca)],_0x4e2094=_0x4c100f['user'],_0x394a2a=await profile[_0x4dad1e(0x1f9)]({'email':_0x4e2094[_0x4dad1e(0x1f3)]}),_0x3878fc=await master_shop['find'](),_0x2fde7b=await transfers_finished[_0x4dad1e(0x1bc)](_0x4c100f[_0x4dad1e(0x23a)]['id']);let _0x43f4e2=new Date(_0x2fde7b[_0x4dad1e(0x247)]),_0x5d93b7=('0'+_0x43f4e2[_0x4dad1e(0x211)]())[_0x4dad1e(0x184)](-0x2),_0x348309=('0'+(_0x43f4e2['getMonth']()+0x1))[_0x4dad1e(0x184)](-0x2),_0x4637bb=_0x43f4e2[_0x4dad1e(0x236)](),_0x4a66b0=_0x4637bb+'-'+_0x348309+'-'+_0x5d93b7,_0x409eb6;if(_0x4e2094['role']==_0x4dad1e(0x221)){const _0x31ff51=await staff[_0x4dad1e(0x1f9)]({'email':_0x4e2094[_0x4dad1e(0x1f3)]});_0x409eb6=await warehouse[_0x4dad1e(0x213)]({'status':'Enabled','name':_0x31ff51[_0x4dad1e(0x233)],'warehouse_category':_0x4dad1e(0x198)});}else _0x409eb6=await warehouse[_0x4dad1e(0x213)]({'status':'Enabled','warehouse_category':_0x4dad1e(0x198)});const _0x10dfd9=await warehouse['aggregate']([{'$match':{'name':_0x2fde7b[_0x4dad1e(0x1e2)],'room':_0x2fde7b[_0x4dad1e(0x248)]}},{'$unwind':_0x4dad1e(0x216)},{'$group':{'_id':_0x4dad1e(0x19e),'name':{'$first':_0x4dad1e(0x24a)},'product_stock':{'$first':_0x4dad1e(0x1e8)},'bay':{'$first':_0x4dad1e(0x229)},'bin':{'$first':_0x4dad1e(0x1ec)},'type':{'$first':_0x4dad1e(0x1df)},'floorlevel':{'$first':_0x4dad1e(0x242)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x4dad1e(0x1a8)},'product_code':{'$first':_0x4dad1e(0x219)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x4dad1e(0x19a)}}}]);var _0x4b79e7=[0x1,0x2,0x3,0x4],_0x1ac65e=['A','B','C','D','E','F','G','H','I','J'],_0x4c3dcc=['Ambient',_0x4dad1e(0x22e)];const _0x2214e1=await product['find']({}),_0x1538ed=BayBinSelected(_0x2fde7b['to_warehouse'],_0x2fde7b[_0x4dad1e(0x20e)]);if(_0x3878fc[0x0]['language']=='English\x20(US)'){var _0x27a25b=users[_0x4dad1e(0x18a)];console[_0x4dad1e(0x1dc)](_0x27a25b);}else{if(_0x3878fc[0x0][_0x4dad1e(0x1c7)]==_0x4dad1e(0x1aa))var _0x27a25b=users[_0x4dad1e(0x1aa)];else{if(_0x3878fc[0x0][_0x4dad1e(0x1c7)]=='German')var _0x27a25b=users[_0x4dad1e(0x218)];else{if(_0x3878fc[0x0][_0x4dad1e(0x1c7)]==_0x4dad1e(0x1bb))var _0x27a25b=users[_0x4dad1e(0x1bb)];else{if(_0x3878fc[0x0][_0x4dad1e(0x1c7)]==_0x4dad1e(0x22d))var _0x27a25b=users['French'];else{if(_0x3878fc[0x0][_0x4dad1e(0x1c7)]==_0x4dad1e(0x1a6))var _0x27a25b=users[_0x4dad1e(0x201)];else{if(_0x3878fc[0x0][_0x4dad1e(0x1c7)]==_0x4dad1e(0x18c))var _0x27a25b=users['Chinese'];else{if(_0x3878fc[0x0][_0x4dad1e(0x1c7)]==_0x4dad1e(0x1ba))var _0x27a25b=users[_0x4dad1e(0x1cd)];}}}}}}}_0x5c43ea[_0x4dad1e(0x187)](_0x4dad1e(0x1c5),{'success':_0x4c100f[_0x4dad1e(0x1e0)](_0x4dad1e(0x1be)),'errors':_0x4c100f[_0x4dad1e(0x1e0)](_0x4dad1e(0x1cf)),'role':_0x4e2094,'profile':_0x394a2a,'master_shop':_0x3878fc,'warehouse':_0x409eb6,'transfer':_0x2fde7b,'stock':_0x10dfd9,'unit':_0x2214e1,'language':_0x27a25b,'levels':_0x4b79e7,'Isle':_0x1ac65e,'rooms_data':_0x4c3dcc,'ed_fullDate':_0x4a66b0,'dataSelected':_0x1538ed});}catch(_0x23e188){console[_0x4dad1e(0x1dc)](_0x23e188);}}),router[a0_0x360bc9(0x1ab)](a0_0x360bc9(0x1da),auth,async(_0x24bdd5,_0x1ad36e)=>{var _0x7ff428=a0_0x360bc9;try{const _0x9205da=_0x24bdd5[_0x7ff428(0x23a)]['id'];console['log'](_0x24bdd5[_0x7ff428(0x18d)]);const _0x2776ed=await transfers_finished['findById'](_0x9205da);console[_0x7ff428(0x1dc)](_0x7ff428(0x1cc),_0x2776ed);const {date:_0x37ceeb,from_warehouse:_0xb96f28,FromRoom_name:_0x319e12,to_warehouse:_0x4340f5,ToRoom_name:_0x521a44,prod_name:_0x3bc674,from_prod_qty:_0x4a58f8,from_prod_level:_0x368aa4,from_prod_isle:_0x2f5705,from_prod_pallet:_0x2f54e6,to_prod_qty:_0x32f12d,to_prod_level:_0x5da757,to_prod_isle:_0xd261bb,to_prod_pallet:_0x24a87f,primary_code:_0x32d647,secondary_code:_0x29f0bd,product_code3:_0xbe0054,note:_0x15232b,invoice:_0x5be6ed,expiry_date:_0x28063e}=_0x24bdd5['body'];if(typeof _0x3bc674=='string')var _0x3ba390=[_0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x1a7)]],_0x1b9f85=[_0x24bdd5['body']['from_prod_qty']],_0x599cdc=[_0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x1ad)]],_0x1fbcb2=[_0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x1c9)]],_0x504e15=[_0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x1d6)]],_0xcdade4=[_0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x1f6)]],_0x5327ba=[_0x24bdd5[_0x7ff428(0x18d)]['secondary_code']],_0x19ab82=[_0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x234)]],_0x8e3eb0=[_0x24bdd5['body']['MaxStocks_data2']],_0x354b9c=[_0x24bdd5['body']['unit']],_0x554133=[_0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x20f)]],_0x5eddf5=[_0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x24d)]],_0x37790d=[_0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x247)]];else var _0x3ba390=[..._0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x1a7)]],_0x1b9f85=[..._0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x23c)]],_0x599cdc=[..._0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x1ad)]],_0x1fbcb2=[..._0x24bdd5['body'][_0x7ff428(0x1c9)]],_0x504e15=[..._0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x1d6)]],_0xcdade4=[..._0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x1f6)]],_0x5327ba=[..._0x24bdd5['body'][_0x7ff428(0x1ae)]],_0x19ab82=[..._0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x234)]],_0x8e3eb0=[..._0x24bdd5['body'][_0x7ff428(0x1b3)]],_0x354b9c=[..._0x24bdd5['body'][_0x7ff428(0x1fb)]],_0x554133=[..._0x24bdd5[_0x7ff428(0x18d)]['secondary_unit']],_0x5eddf5=[..._0x24bdd5[_0x7ff428(0x18d)][_0x7ff428(0x24d)]],_0x37790d=[..._0x24bdd5[_0x7ff428(0x18d)]['expiry_date']];const _0x4c8cf6=_0x3ba390[_0x7ff428(0x24e)](_0x2fc9e8=>{return _0x2fc9e8={'product_name':_0x2fc9e8};});_0x1b9f85[_0x7ff428(0x1b0)]((_0x3ae7c1,_0x7f9c49)=>{var _0x3e64d9=_0x7ff428;_0x4c8cf6[_0x7f9c49][_0x3e64d9(0x1c2)]=_0x3ae7c1;}),_0x599cdc[_0x7ff428(0x1b0)]((_0x10020d,_0x2a2831)=>{var _0x212dca=_0x7ff428;_0x4c8cf6[_0x2a2831][_0x212dca(0x1c6)]=_0x10020d;}),_0x1fbcb2[_0x7ff428(0x1b0)]((_0x5ea376,_0x50864e)=>{var _0x8d014a=_0x7ff428;_0x4c8cf6[_0x50864e][_0x8d014a(0x1a2)]=_0x5ea376;}),_0x504e15[_0x7ff428(0x1b0)]((_0x3f572f,_0x269f7b)=>{_0x4c8cf6[_0x269f7b]['to_bay']=_0x3f572f;}),_0xcdade4[_0x7ff428(0x1b0)]((_0x50433f,_0x5729f0)=>{var _0xf9606f=_0x7ff428;_0x4c8cf6[_0x5729f0][_0xf9606f(0x1f6)]=_0x50433f;}),_0x5327ba['forEach']((_0x5767d5,_0x5905eb)=>{var _0x5f09d8=_0x7ff428;_0x4c8cf6[_0x5905eb][_0x5f09d8(0x1ae)]=_0x5767d5;}),_0x19ab82[_0x7ff428(0x1b0)]((_0x2fbc5c,_0x419b1a)=>{var _0x2480a5=_0x7ff428;_0x4c8cf6[_0x419b1a][_0x2480a5(0x18e)]=_0x2fbc5c;}),_0x8e3eb0[_0x7ff428(0x1b0)]((_0x907c84,_0xeec382)=>{var _0x42c466=_0x7ff428;_0x4c8cf6[_0xeec382][_0x42c466(0x1c1)]=_0x907c84;}),_0x354b9c[_0x7ff428(0x1b0)]((_0x13c03d,_0x560cc9)=>{_0x4c8cf6[_0x560cc9]['unit']=_0x13c03d;}),_0x554133[_0x7ff428(0x1b0)]((_0x378287,_0x576166)=>{_0x4c8cf6[_0x576166]['secondary_unit']=_0x378287;}),_0x5eddf5[_0x7ff428(0x1b0)]((_0xbd6692,_0x2a80cc)=>{var _0x200815=_0x7ff428;_0x4c8cf6[_0x2a80cc][_0x200815(0x24d)]=_0xbd6692;}),_0x37790d[_0x7ff428(0x1b0)]((_0x38a783,_0x385f81)=>{var _0xdaf28e=_0x7ff428;_0x4c8cf6[_0x385f81][_0xdaf28e(0x247)]=_0x38a783;});const _0x324c12=_0x4c8cf6[_0x7ff428(0x19b)](_0xf49a94=>_0xf49a94['to_quantity']!=='0'&&_0xf49a94[_0x7ff428(0x1a2)]!==''||_0xf49a94['to_floorlevel']!=='0'&&_0xf49a94[_0x7ff428(0x21c)]!=='');var _0x21978d=0x0;_0x324c12['forEach'](_0x2f35cb=>{var _0x39e841=_0x7ff428;parseInt(_0x2f35cb['from_quantity'])<parseInt(_0x2f35cb[_0x39e841(0x1a2)])&&_0x21978d++;});if(_0x21978d!=0x0)return _0x24bdd5[_0x7ff428(0x1e0)]('errors','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x1ad36e[_0x7ff428(0x18b)]('back');const _0x326ffc=await warehouse[_0x7ff428(0x1f9)]({'name':_0x2776ed['from_warehouse'],'room':_0x2776ed[_0x7ff428(0x248)]});_0x2776ed[_0x7ff428(0x1a4)][_0x7ff428(0x1b0)](_0x3869a8=>{var _0x1685ad=_0x7ff428;if(_0x3869a8[_0x1685ad(0x1a2)]>0x0){const _0x519b8a=_0x326ffc[_0x1685ad(0x1ed)][_0x1685ad(0x24e)](_0x15bba4=>{var _0x32d642=_0x1685ad;_0x15bba4[_0x32d642(0x1e3)]==_0x3869a8['product_name']&&_0x15bba4[_0x32d642(0x1a0)]==_0x3869a8[_0x32d642(0x1c6)]&&(_0x15bba4['product_stock']=parseInt(_0x15bba4[_0x32d642(0x237)])+parseInt(_0x3869a8['to_quantity']));});}}),await _0x326ffc[_0x7ff428(0x183)]();const _0x4f426e=await warehouse[_0x7ff428(0x1f9)]({'name':_0x2776ed['to_warehouse'],'room':_0x2776ed[_0x7ff428(0x20e)]});_0x2776ed[_0x7ff428(0x1a4)][_0x7ff428(0x1b0)](_0x4c8bf1=>{var _0x6d4fa7=_0x7ff428;if(_0x4c8bf1[_0x6d4fa7(0x1a2)]>0x0){const _0x350140=_0x4f426e['product_details'][_0x6d4fa7(0x24e)](_0x5c1867=>{var _0x50f653=_0x6d4fa7;_0x5c1867[_0x50f653(0x1e3)]==_0x4c8bf1[_0x50f653(0x1e3)]&&_0x5c1867[_0x50f653(0x1a0)]==_0x4c8bf1[_0x50f653(0x1d5)]&&(_0x5c1867[_0x50f653(0x237)]=parseInt(_0x5c1867[_0x50f653(0x237)])-parseInt(_0x4c8bf1['to_quantity']));});}}),await _0x4f426e[_0x7ff428(0x183)](),_0x2776ed['date']=_0x37ceeb,_0x2776ed[_0x7ff428(0x1e2)]=_0xb96f28,_0x2776ed[_0x7ff428(0x1e9)]=_0x4340f5,_0x2776ed[_0x7ff428(0x1a4)]=_0x324c12,_0x2776ed[_0x7ff428(0x195)]=_0x15232b,_0x2776ed['invoice']=_0x5be6ed;const _0x20b238=await _0x2776ed[_0x7ff428(0x183)](),_0xba68fa=await warehouse[_0x7ff428(0x1f9)]({'name':_0xb96f28,'room':_0x319e12});_0x20b238['product'][_0x7ff428(0x1b0)](_0x425a1d=>{var _0x25a18c=_0x7ff428;if(_0x425a1d[_0x25a18c(0x1a2)]>0x0){const _0x4c0daa=_0xba68fa['product_details']['map'](_0x52d95e=>{var _0x4caafe=_0x25a18c;_0x52d95e[_0x4caafe(0x1e3)]==_0x425a1d['product_name']&&_0x52d95e['bay']==_0x425a1d[_0x4caafe(0x1c6)]&&(_0x52d95e[_0x4caafe(0x237)]=parseInt(_0x52d95e[_0x4caafe(0x237)])-parseInt(_0x425a1d[_0x4caafe(0x1a2)]));});}}),await _0xba68fa[_0x7ff428(0x183)]();const _0x4ec8c5=await warehouse[_0x7ff428(0x1f9)]({'name':_0x4340f5,'room':_0x521a44});_0x20b238[_0x7ff428(0x1a4)]['forEach'](_0x226ab8=>{var _0x1c0ef5=_0x7ff428;if(_0x226ab8[_0x1c0ef5(0x1a2)]>0x0){var _0x4562ad=0x0;const _0x1c90cc=_0x4ec8c5[_0x1c0ef5(0x1ed)][_0x1c0ef5(0x24e)](_0x1552d4=>{var _0x1537ab=_0x1c0ef5;_0x1552d4[_0x1537ab(0x1e3)]==_0x226ab8[_0x1537ab(0x1e3)]&&_0x1552d4[_0x1537ab(0x1a0)]==_0x226ab8[_0x1537ab(0x1d5)]&&(_0x1552d4[_0x1537ab(0x237)]=parseInt(_0x1552d4['product_stock'])+parseInt(_0x226ab8[_0x1537ab(0x1a2)]),_0x4562ad++);});_0x4562ad=='0'&&(_0x4ec8c5[_0x1c0ef5(0x1ed)]=_0x4ec8c5[_0x1c0ef5(0x1ed)][_0x1c0ef5(0x1f4)]({'product_name':_0x226ab8[_0x1c0ef5(0x1e3)],'product_stock':_0x226ab8['to_quantity'],'bay':_0x226ab8[_0x1c0ef5(0x1d5)],'product_code':_0x226ab8['product_code'],'primary_code':_0x226ab8['primary_code'],'secondary_code':_0x226ab8[_0x1c0ef5(0x1ae)],'maxProducts':_0x226ab8[_0x1c0ef5(0x1c1)]}));}}),await _0x4ec8c5[_0x7ff428(0x183)](),_0x24bdd5[_0x7ff428(0x1e0)](_0x7ff428(0x1be),_0x7ff428(0x1eb)),_0x1ad36e[_0x7ff428(0x18b)](_0x7ff428(0x243));}catch(_0x12c04d){console[_0x7ff428(0x1dc)](_0x12c04d);}}),router[a0_0x360bc9(0x1ab)]('/barcode_scanner',async(_0x44be70,_0x1711a6)=>{var _0xa160a3=a0_0x360bc9;const {FromWareHouse:_0x22379c,FromRoom:_0x140ed9,ToWarehouse:_0x27c843,ToRoom:_0x3e3080,primary_code:_0x201382,Roomslist:_0x154ecc}=_0x44be70[_0xa160a3(0x18d)],_0x433d9c=_0x154ecc[_0xa160a3(0x199)](','),_0x50bf99=[];async function _0x39b2c6(_0x3d7a3a){var _0x3cd503=_0xa160a3;const _0x53e8b0=await warehouse[_0x3cd503(0x208)]([{'$match':{'name':_0x22379c,'room':_0x3d7a3a}},{'$unwind':_0x3cd503(0x216)},{'$match':{'product_details.primary_code':_0x201382}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x3cd503(0x1a8)},'product_code':{'$first':_0x3cd503(0x219)},'bay':{'$first':_0x3cd503(0x229)},'level':{'$first':_0x3cd503(0x1b1)},'type':{'$first':_0x3cd503(0x1df)},'pallet':{'$first':_0x3cd503(0x242)},'unit':{'$first':_0x3cd503(0x196)},'secondary_unit':{'$first':_0x3cd503(0x191)},'storage':{'$first':_0x3cd503(0x1bf)},'rack':{'$first':_0x3cd503(0x19a)},'expiry_date':{'$first':_0x3cd503(0x23f)},'production_date':{'$first':_0x3cd503(0x21f)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x3cd503(0x24b)},'roomNamed':{'$first':'$room'},'prod_cat':{'$first':'P'},'invoice':{'$first':_0x3cd503(0x246)}}}]),_0x188718=await warehouse[_0x3cd503(0x208)]([{'$match':{'name':_0x22379c,'room':_0x3d7a3a}},{'$unwind':_0x3cd503(0x216)},{'$match':{'product_details.secondary_code':_0x201382}},{'$group':{'_id':_0x3cd503(0x19e),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x3cd503(0x1e8)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x3cd503(0x1a8)},'product_code':{'$first':'$product_details.product_code'},'bay':{'$first':_0x3cd503(0x229)},'level':{'$first':_0x3cd503(0x1b1)},'type':{'$first':_0x3cd503(0x1df)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x3cd503(0x196)},'secondary_unit':{'$first':_0x3cd503(0x191)},'storage':{'$first':_0x3cd503(0x1bf)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x3cd503(0x23f)},'production_date':{'$first':_0x3cd503(0x21f)},'batch_code':{'$first':_0x3cd503(0x21a)},'maxPerUnit':{'$first':_0x3cd503(0x24b)},'roomNamed':{'$first':_0x3cd503(0x206)},'prod_cat':{'$first':'S'},'invoice':{'$first':_0x3cd503(0x246)}}}]);if(_0x53e8b0['length']>0x0)_0x50bf99[_0x3cd503(0x194)](_0x53e8b0);else _0x188718['length']>0x0&&_0x50bf99['push'](_0x188718);}const _0x502519=_0x433d9c[_0xa160a3(0x24e)](_0x1fcacf=>_0x39b2c6(_0x1fcacf));await Promise[_0xa160a3(0x249)](_0x502519),_0x1711a6[_0xa160a3(0x1b6)](_0x50bf99);}),router['post'](a0_0x360bc9(0x190),async(_0x4fa36,_0xfc33fb)=>{var _0x58ad78=a0_0x360bc9;const {productCode:_0x405174,bay:_0x51129a,warehouses:_0x14993e,room:_0x48611a}=_0x4fa36[_0x58ad78(0x18d)];console[_0x58ad78(0x1dc)](_0x4fa36['body']);try{const _0x2f7e03=await warehouse['aggregate']([{'$match':{'name':_0x14993e,'room':_0x48611a}},{'$unwind':_0x58ad78(0x216)},{'$match':{'product_details.bay':parseInt(_0x51129a)}},{'$group':{'_id':_0x58ad78(0x19e),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x58ad78(0x1e8)},'bay':{'$first':_0x58ad78(0x229)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0xfc33fb[_0x58ad78(0x1d0)](0xc8)[_0x58ad78(0x1b6)](_0x2f7e03);}catch(_0x383134){_0xfc33fb[_0x58ad78(0x1d0)](0x194)[_0x58ad78(0x1b6)]({'message':_0x383134[_0x58ad78(0x1ef)]});}}),module[a0_0x360bc9(0x21b)]=router;