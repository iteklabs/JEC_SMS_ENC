function a0_0x16cb(){var _0x24d006=['$product_details.bin','$product_details.unit','concat','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','error','then','_id','product_details','secondary_code','117954OTHWfX','/view/choose','$product.from_room_name','$from_warehouse','Transfer\x20Edit\x20Successfully','updateOne','prod_cat','from_quantity','express','render','redirect','</td>','secondary_unit','random','to_room_name','maxPerUnit','maxProducts','$product_details.invoice','product_date','DRY\x20GOODS','279IJiueM','edit_transfer_finished','$_id','abs','log','/barcode_scanner','product_code3','<tr>','French','/view','$to_warehouse','136aJEqSC','role','errors','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','to_prod_level','bay','../middleware/auth','$finalize','status','split','getDate','Finished\x20Goods','$product.to_room_name','$product_details.maxPerUnit','An\x20error\x20occurred.','RoomAssigned','Arabic','length','TRFF-','flash','$product_details.product_stock','finalize','filter','Hindi','$name','English','$product_details','transfer_data','product','body','json','warehouse','$product_details.secondary_unit','prod_name','from_prod_level2','$product_details._id','catch','TRF-','8762621pOoXQq','string','/view/:id','/view_logs','nodemailer','$product','post','/view/addlog','Portuguese\x20(BR)','forEach','$product_details.product_name','params','to_room','$product_details.bay','$product_details.storage','product_code','edit_transfer_finished_view','invoice','Enclosed','push','$invoice','English\x20(US)','date','unit','Spanish','findById','Enabled','52035iZCSJw','Portuguese','\x20<>\x20','expiry_date','$product_details.secondary_code','primary_unit','get','New_Qty_Converted','$product_details.production_date','62400zJNyra','150824Disnve','id_transaction','to_bay','/view/add_transfer_logs','from_level','user','from_invoice','/preview/:id','to_quantity','ToRoomAssigned','German','success','message','product_stock','primary_code','$date','bin2bin','back','match','to_warehouse','to_prod_qty','44FgGaRY','$product_details.product_code','/CheckingWarehouse','staff','/view/add_transfer_loc','/transfer_finished/preview/','$product_details.level','find','Product\x20Transfer\x20successfully','5142156mFcXtM','transfer_finished_logs','../models/all_models','batch_code','$product_details.type','$product_details.expiry_date','slice','transfer_finished','exports','production_date','/transfer_finished/view','Ambient','toString','to_floorlevel','/view/add_transfer','getFullYear','../public/language/languages.json','20154140NMIXCP','map','getMonth','$product_details.rack','There\x27s\x20a\x20error\x20in\x20this\x20transaction','aggregate','$room','padStart','findOne','$product_details.floorlevel','save','from_room_name','To_invoice','Chinese','email','Rack\x202','logs','choos_transfer','to_level','from_warehouse','location2location','MaxStocks_data','from_prod_qty','$product_details.primary_code','own','max','language','Arabic\x20(ae)','\x20<=>\x20','undefined','type_of_process','LOG-TRF-','/transfer/view','MaxStocks_data2','all','from_bay','product_name','from_prod_level','invoice_init'];a0_0x16cb=function(){return _0x24d006;};return a0_0x16cb();}function a0_0x2752(_0x29d027,_0x1e0d12){var _0x16cba9=a0_0x16cb();return a0_0x2752=function(_0x27520e,_0x4f00a6){_0x27520e=_0x27520e-0x191;var _0x5bd183=_0x16cba9[_0x27520e];return _0x5bd183;},a0_0x2752(_0x29d027,_0x1e0d12);}var a0_0x11fff5=a0_0x2752;(function(_0x68a7f4,_0x58c9f8){var _0x4e6de9=a0_0x2752,_0x1a8310=_0x68a7f4();while(!![]){try{var _0x5aedaa=parseInt(_0x4e6de9(0x20d))/0x1+parseInt(_0x4e6de9(0x22c))/0x2*(parseInt(_0x4e6de9(0x1a4))/0x3)+parseInt(_0x4e6de9(0x1c3))/0x4*(-parseInt(_0x4e6de9(0x1ad))/0x5)+parseInt(_0x4e6de9(0x1cc))/0x6+parseInt(_0x4e6de9(0x252))/0x7+-parseInt(_0x4e6de9(0x1ae))/0x8*(parseInt(_0x4e6de9(0x221))/0x9)+-parseInt(_0x4e6de9(0x1dd))/0xa;if(_0x5aedaa===_0x58c9f8)break;else _0x1a8310['push'](_0x1a8310['shift']());}catch(_0x3d6c72){_0x1a8310['push'](_0x1a8310['shift']());}}}(a0_0x16cb,0xa35b2));const express=require(a0_0x11fff5(0x215)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,invoice_for_transfer,transfers_logs}=require(a0_0x11fff5(0x1ce)),auth=require(a0_0x11fff5(0x232)),users=require(a0_0x11fff5(0x1dc)),nodemailer=require(a0_0x11fff5(0x256));router['get'](a0_0x11fff5(0x22a),auth,async(_0x5e984a,_0x97f96f)=>{var _0x44a2b5=a0_0x11fff5;try{const {username:_0x168f64,email:_0x18abf5,role:_0x2386e3}=_0x5e984a[_0x44a2b5(0x1b3)],_0x193493=_0x5e984a[_0x44a2b5(0x1b3)],_0x2e6e6f=await profile[_0x44a2b5(0x1e5)]({'email':_0x193493[_0x44a2b5(0x1eb)]}),_0xc79b76=await master_shop[_0x44a2b5(0x1ca)]();let _0x5d4576;if(_0x193493['role']==_0x44a2b5(0x1c6)){const _0x229b36=await staff[_0x44a2b5(0x1e5)]({'email':_0x193493[_0x44a2b5(0x1eb)]});_0x5d4576=await transfers_finished[_0x44a2b5(0x1ca)]({'from_warehouse':_0x229b36[_0x44a2b5(0x24b)]});}else _0x5d4576=await transfers_finished[_0x44a2b5(0x1e2)]([{'$match':{'type_of_transaction':_0x44a2b5(0x1f5)}},{'$unwind':_0x44a2b5(0x257)},{'$group':{'_id':_0x44a2b5(0x223),'invoice':{'$first':_0x44a2b5(0x19d)},'date':{'$first':_0x44a2b5(0x1bd)},'from_warehouse':{'$first':_0x44a2b5(0x210)},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x44a2b5(0x20f)},'to_room_name':{'$addToSet':'$product.to_room_name'},'finalize':{'$first':_0x44a2b5(0x233)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0xc79b76[0x0][_0x44a2b5(0x1f7)]=='English\x20(US)')var _0x4a178f=users['English'];else{if(_0xc79b76[0x0][_0x44a2b5(0x1f7)]==_0x44a2b5(0x243))var _0x4a178f=users[_0x44a2b5(0x243)];else{if(_0xc79b76[0x0]['language']==_0x44a2b5(0x1b8))var _0x4a178f=users['German'];else{if(_0xc79b76[0x0][_0x44a2b5(0x1f7)]=='Spanish')var _0x4a178f=users[_0x44a2b5(0x1a1)];else{if(_0xc79b76[0x0]['language']=='French')var _0x4a178f=users[_0x44a2b5(0x229)];else{if(_0xc79b76[0x0]['language']==_0x44a2b5(0x191))var _0x4a178f=users[_0x44a2b5(0x1a5)];else{if(_0xc79b76[0x0]['language']==_0x44a2b5(0x1ea))var _0x4a178f=users[_0x44a2b5(0x1ea)];else{if(_0xc79b76[0x0]['language']==_0x44a2b5(0x1f8))var _0x4a178f=users['Arabic'];}}}}}}}_0x97f96f[_0x44a2b5(0x216)](_0x44a2b5(0x1d3),{'success':_0x5e984a[_0x44a2b5(0x23f)]('success'),'errors':_0x5e984a[_0x44a2b5(0x23f)]('errors'),'role':_0x193493,'profile':_0x2e6e6f,'master_shop':_0xc79b76,'transfer':_0x5d4576,'language':_0x4a178f});}catch(_0x1962ad){console['log'](_0x1962ad);}}),router[a0_0x11fff5(0x1aa)](a0_0x11fff5(0x255),auth,async(_0x54006a,_0x1bb9e0)=>{var _0x241412=a0_0x11fff5;try{const {username:_0x534e62,email:_0x3332dc,role:_0x16a5cb}=_0x54006a[_0x241412(0x1b3)],_0x2f23e0=_0x54006a[_0x241412(0x1b3)],_0x382a8f=await profile[_0x241412(0x1e5)]({'email':_0x2f23e0[_0x241412(0x1eb)]}),_0x201106=await master_shop['find']();let _0x507572;if(_0x2f23e0[_0x241412(0x22d)]==_0x241412(0x1c6)){const _0x58d12e=await staff[_0x241412(0x1e5)]({'email':_0x2f23e0[_0x241412(0x1eb)]});_0x507572=await transfers_finished[_0x241412(0x1ca)]({'from_warehouse':_0x58d12e['warehouse']});}else _0x507572=await transfers_finished[_0x241412(0x1e2)]([{'$match':{'type_of_transaction':_0x241412(0x1ed)}},{'$unwind':_0x241412(0x257)},{'$group':{'_id':'$_id','invoice':{'$first':_0x241412(0x19d)},'date':{'$first':_0x241412(0x1bd)},'from_warehouse':{'$first':_0x241412(0x210)},'to_warehouse':{'$first':_0x241412(0x22b)},'from_room_name':{'$addToSet':'$product.from_room_name'},'to_room_name':{'$addToSet':_0x241412(0x238)},'finalize':{'$first':_0x241412(0x233)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x201106[0x0][_0x241412(0x1f7)]==_0x241412(0x19e))var _0x38f1f0=users[_0x241412(0x245)];else{if(_0x201106[0x0][_0x241412(0x1f7)]==_0x241412(0x243))var _0x38f1f0=users[_0x241412(0x243)];else{if(_0x201106[0x0][_0x241412(0x1f7)]==_0x241412(0x1b8))var _0x38f1f0=users['German'];else{if(_0x201106[0x0][_0x241412(0x1f7)]==_0x241412(0x1a1))var _0x38f1f0=users[_0x241412(0x1a1)];else{if(_0x201106[0x0]['language']==_0x241412(0x229))var _0x38f1f0=users[_0x241412(0x229)];else{if(_0x201106[0x0]['language']==_0x241412(0x191))var _0x38f1f0=users[_0x241412(0x1a5)];else{if(_0x201106[0x0][_0x241412(0x1f7)]==_0x241412(0x1ea))var _0x38f1f0=users['Chinese'];else{if(_0x201106[0x0][_0x241412(0x1f7)]==_0x241412(0x1f8))var _0x38f1f0=users[_0x241412(0x23c)];}}}}}}}_0x1bb9e0[_0x241412(0x216)](_0x241412(0x1cd),{'success':_0x54006a[_0x241412(0x23f)]('success'),'errors':_0x54006a[_0x241412(0x23f)](_0x241412(0x22e)),'role':_0x2f23e0,'profile':_0x382a8f,'master_shop':_0x201106,'transfer':_0x507572,'language':_0x38f1f0});}catch(_0x54e58a){console['log'](_0x54e58a);}});async function getRandom8DigitNumber(){var _0x1a26a4=a0_0x11fff5;const _0x1e5ab5=0x989680,_0x2afa41=0x5f5e0ff,_0x42253c=Math['floor'](Math[_0x1a26a4(0x21a)]()*(_0x2afa41-_0x1e5ab5+0x1))+_0x1e5ab5;var _0x390c39;const _0xdea7de=await transfers_finished[_0x1a26a4(0x1e5)]({'invoice':_0x1a26a4(0x23e)+_0x42253c});return _0xdea7de&&_0xdea7de[_0x1a26a4(0x23d)]>0x0?_0x390c39=_0x1a26a4(0x23e)+_0x42253c:_0x390c39=_0x1a26a4(0x23e)+_0x42253c,_0x390c39;}router['get'](a0_0x11fff5(0x1da),auth,async(_0x139488,_0x4b6a7e)=>{var _0xeb33a8=a0_0x11fff5;try{const {username:_0xb66b38,email:_0x1008b1,role:_0x5f1cb4}=_0x139488[_0xeb33a8(0x1b3)],_0x2f319a=_0x139488[_0xeb33a8(0x1b3)],_0x1ded2b=await profile[_0xeb33a8(0x1e5)]({'email':_0x2f319a[_0xeb33a8(0x1eb)]}),_0x3e0ad0=await master_shop[_0xeb33a8(0x1ca)]();let _0xa803b9;if(_0x2f319a[_0xeb33a8(0x22d)]==_0xeb33a8(0x1c6)){const _0x1a3f06=await staff[_0xeb33a8(0x1e5)]({'email':_0x2f319a[_0xeb33a8(0x1eb)]});_0xa803b9=await warehouse[_0xeb33a8(0x1e2)]([{'$match':{'status':'Enabled','name':_0x1a3f06['warehouse']}},{'$group':{'_id':_0xeb33a8(0x244),'name':{'$first':_0xeb33a8(0x244)}}}]);}else _0xa803b9=await warehouse['aggregate']([{'$match':{'status':_0xeb33a8(0x1a3)}},{'$group':{'_id':_0xeb33a8(0x244),'name':{'$first':'$name'}}}]);const _0x22fc02=await transfers_finished['find']({}),_0x1bf59c=_0x22fc02['length']+0x1,_0x1b3075=_0xeb33a8(0x23e)+_0x1bf59c['toString']()[_0xeb33a8(0x1e4)](0x5,'0');if(_0x3e0ad0[0x0]['language']==_0xeb33a8(0x19e))var _0xdb124d=users[_0xeb33a8(0x245)];else{if(_0x3e0ad0[0x0][_0xeb33a8(0x1f7)]==_0xeb33a8(0x243))var _0xdb124d=users[_0xeb33a8(0x243)];else{if(_0x3e0ad0[0x0]['language']==_0xeb33a8(0x1b8))var _0xdb124d=users[_0xeb33a8(0x1b8)];else{if(_0x3e0ad0[0x0][_0xeb33a8(0x1f7)]==_0xeb33a8(0x1a1))var _0xdb124d=users[_0xeb33a8(0x1a1)];else{if(_0x3e0ad0[0x0][_0xeb33a8(0x1f7)]==_0xeb33a8(0x229))var _0xdb124d=users[_0xeb33a8(0x229)];else{if(_0x3e0ad0[0x0][_0xeb33a8(0x1f7)]==_0xeb33a8(0x191))var _0xdb124d=users['Portuguese'];else{if(_0x3e0ad0[0x0][_0xeb33a8(0x1f7)]==_0xeb33a8(0x1ea))var _0xdb124d=users[_0xeb33a8(0x1ea)];else{if(_0x3e0ad0[0x0]['language']=='Arabic\x20(ae)')var _0xdb124d=users[_0xeb33a8(0x23c)];}}}}}}}const _0x3464b4=getRandom8DigitNumber();_0x3464b4['then'](_0x430b63=>{var _0x30db35=_0xeb33a8;_0x4b6a7e[_0x30db35(0x216)]('add_transfer_finished',{'success':_0x139488['flash']('success'),'errors':_0x139488[_0x30db35(0x23f)](_0x30db35(0x22e)),'role':_0x2f319a,'profile':_0x1ded2b,'master_shop':_0x3e0ad0,'warehouse':_0xa803b9,'language':_0xdb124d,'invoice':_0x430b63});})['catch'](_0x2d77ef=>{var _0x31adbf=_0xeb33a8;_0x139488[_0x31adbf(0x23f)]('errors',_0x31adbf(0x1e1)),_0x4b6a7e[_0x31adbf(0x217)]('/transfer/view');});}catch(_0x5c7745){console['log'](_0x5c7745);}}),router[a0_0x11fff5(0x1aa)](a0_0x11fff5(0x20e),auth,async(_0x2d87e7,_0x4ce60c)=>{var _0x2dcacd=a0_0x11fff5;try{const {username:_0x2ca9dc,email:_0x207d65,role:_0x3bfa18}=_0x2d87e7[_0x2dcacd(0x1b3)],_0x5d9223=_0x2d87e7[_0x2dcacd(0x1b3)],_0xfa1cc0=await profile[_0x2dcacd(0x1e5)]({'email':_0x5d9223['email']}),_0x22d88e=await master_shop[_0x2dcacd(0x1ca)]();let _0x4d6a6f;if(_0x5d9223[_0x2dcacd(0x22d)]==_0x2dcacd(0x1c6)){const _0x103302=await staff[_0x2dcacd(0x1e5)]({'email':_0x5d9223[_0x2dcacd(0x1eb)]});_0x4d6a6f=await warehouse[_0x2dcacd(0x1e2)]([{'$match':{'status':_0x2dcacd(0x1a3),'name':_0x103302[_0x2dcacd(0x24b)]}},{'$group':{'_id':_0x2dcacd(0x244),'name':{'$first':_0x2dcacd(0x244)}}}]);}else _0x4d6a6f=await warehouse[_0x2dcacd(0x1e2)]([{'$match':{'status':_0x2dcacd(0x1a3)}},{'$group':{'_id':_0x2dcacd(0x244),'name':{'$first':_0x2dcacd(0x244)}}}]);const _0x2ed2c9=await transfers_finished['find']({}),_0x4f65cb=_0x2ed2c9[_0x2dcacd(0x23d)]+0x1,_0x1fe268=_0x2dcacd(0x23e)+_0x4f65cb[_0x2dcacd(0x1d8)]()[_0x2dcacd(0x1e4)](0x5,'0');if(_0x22d88e[0x0][_0x2dcacd(0x1f7)]=='English\x20(US)')var _0x4e9cbb=users[_0x2dcacd(0x245)];else{if(_0x22d88e[0x0][_0x2dcacd(0x1f7)]==_0x2dcacd(0x243))var _0x4e9cbb=users['Hindi'];else{if(_0x22d88e[0x0][_0x2dcacd(0x1f7)]=='German')var _0x4e9cbb=users[_0x2dcacd(0x1b8)];else{if(_0x22d88e[0x0][_0x2dcacd(0x1f7)]==_0x2dcacd(0x1a1))var _0x4e9cbb=users['Spanish'];else{if(_0x22d88e[0x0]['language']=='French')var _0x4e9cbb=users[_0x2dcacd(0x229)];else{if(_0x22d88e[0x0][_0x2dcacd(0x1f7)]==_0x2dcacd(0x191))var _0x4e9cbb=users['Portuguese'];else{if(_0x22d88e[0x0][_0x2dcacd(0x1f7)]==_0x2dcacd(0x1ea))var _0x4e9cbb=users[_0x2dcacd(0x1ea)];else{if(_0x22d88e[0x0][_0x2dcacd(0x1f7)]==_0x2dcacd(0x1f8))var _0x4e9cbb=users[_0x2dcacd(0x23c)];}}}}}}}const _0x3daa59=getRandom8DigitNumber();_0x3daa59[_0x2dcacd(0x209)](_0x3cba41=>{var _0x4716c8=_0x2dcacd;_0x4ce60c[_0x4716c8(0x216)](_0x4716c8(0x1ee),{'success':_0x2d87e7['flash'](_0x4716c8(0x1b9)),'errors':_0x2d87e7[_0x4716c8(0x23f)](_0x4716c8(0x22e)),'role':_0x5d9223,'profile':_0xfa1cc0,'master_shop':_0x22d88e,'warehouse':_0x4d6a6f,'language':_0x4e9cbb,'invoice':_0x3cba41});})['catch'](_0x1f9401=>{var _0x1992d3=_0x2dcacd;_0x2d87e7[_0x1992d3(0x23f)](_0x1992d3(0x22e),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x4ce60c[_0x1992d3(0x217)](_0x1992d3(0x1fd));});}catch(_0x6c3f1d){console[_0x2dcacd(0x225)](_0x6c3f1d);}}),router['get']('/view/choose_logs',auth,async(_0x9dd49e,_0x12d399)=>{var _0x3c5c9f=a0_0x11fff5;try{const {username:_0x1c48eb,email:_0x3ba201,role:_0x1280c8}=_0x9dd49e[_0x3c5c9f(0x1b3)],_0x412bce=_0x9dd49e[_0x3c5c9f(0x1b3)],_0x3086af=await profile[_0x3c5c9f(0x1e5)]({'email':_0x412bce[_0x3c5c9f(0x1eb)]}),_0xf489a0=await master_shop[_0x3c5c9f(0x1ca)]();let _0x3c9f24;if(_0x412bce[_0x3c5c9f(0x22d)]==_0x3c5c9f(0x1c6)){const _0x600d6=await staff[_0x3c5c9f(0x1e5)]({'email':_0x412bce[_0x3c5c9f(0x1eb)]});_0x3c9f24=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x600d6[_0x3c5c9f(0x24b)]}},{'$group':{'_id':_0x3c5c9f(0x244),'name':{'$first':'$name'}}}]);}else _0x3c9f24=await warehouse[_0x3c5c9f(0x1e2)]([{'$match':{'status':_0x3c5c9f(0x1a3)}},{'$group':{'_id':_0x3c5c9f(0x244),'name':{'$first':_0x3c5c9f(0x244)}}}]);const _0x107f77=await transfers_finished['find']({}),_0xa951da=_0x107f77['length']+0x1,_0x5cad4c='TRFF-'+_0xa951da[_0x3c5c9f(0x1d8)]()['padStart'](0x5,'0');if(_0xf489a0[0x0][_0x3c5c9f(0x1f7)]=='English\x20(US)')var _0x1840b1=users['English'];else{if(_0xf489a0[0x0]['language']==_0x3c5c9f(0x243))var _0x1840b1=users[_0x3c5c9f(0x243)];else{if(_0xf489a0[0x0]['language']=='German')var _0x1840b1=users['German'];else{if(_0xf489a0[0x0][_0x3c5c9f(0x1f7)]==_0x3c5c9f(0x1a1))var _0x1840b1=users[_0x3c5c9f(0x1a1)];else{if(_0xf489a0[0x0][_0x3c5c9f(0x1f7)]==_0x3c5c9f(0x229))var _0x1840b1=users[_0x3c5c9f(0x229)];else{if(_0xf489a0[0x0][_0x3c5c9f(0x1f7)]==_0x3c5c9f(0x191))var _0x1840b1=users[_0x3c5c9f(0x1a5)];else{if(_0xf489a0[0x0][_0x3c5c9f(0x1f7)]==_0x3c5c9f(0x1ea))var _0x1840b1=users[_0x3c5c9f(0x1ea)];else{if(_0xf489a0[0x0][_0x3c5c9f(0x1f7)]==_0x3c5c9f(0x1f8))var _0x1840b1=users['Arabic'];}}}}}}}const _0x57ef65=getRandom8DigitNumber();_0x57ef65[_0x3c5c9f(0x209)](_0x385497=>{var _0x4c86fc=_0x3c5c9f;_0x12d399[_0x4c86fc(0x216)]('choos_transfer_logs',{'success':_0x9dd49e['flash'](_0x4c86fc(0x1b9)),'errors':_0x9dd49e['flash'](_0x4c86fc(0x22e)),'role':_0x412bce,'profile':_0x3086af,'master_shop':_0xf489a0,'warehouse':_0x3c9f24,'language':_0x1840b1,'invoice':_0x385497});})[_0x3c5c9f(0x250)](_0x422404=>{var _0x5a2157=_0x3c5c9f;_0x9dd49e['flash'](_0x5a2157(0x22e),_0x5a2157(0x1e1)),_0x12d399[_0x5a2157(0x217)](_0x5a2157(0x1fd));});}catch(_0x2d1b67){console[_0x3c5c9f(0x225)](_0x2d1b67);}}),router['post'](a0_0x11fff5(0x1b1),auth,async(_0x33f01b,_0x25f044)=>{var _0x35bad1=a0_0x11fff5;try{const {date:_0x3d3505,from_warehouse:_0x299029,FromRoom_name:_0xb444bb,to_warehouse:_0x3fbcb7,ToRoom_name:_0x415b15,prod_name:_0x155b10,from_prod_qty:_0x1a7832,from_prod_level:_0x50abe7,from_prod_isle:_0x186341,from_prod_pallet:_0x5d92d2,to_prod_qty:_0x407416,to_prod_level:_0xeecf3e,to_prod_isle:_0x555175,to_prod_pallet:_0x228872,primary_code:_0x29df76,secondary_code:_0x15fb23,product_code3:_0x1de30a,note:_0x433b0f,MaxStocks_data2:_0x50fbb0,invoice:_0x2719ac,expiry_date:_0x1e7141,PO_number:_0x594118,ReqBy:_0x366a1d,dateofreq:_0x39c4ea,typeservicesData:_0x4bd78e,destination:_0xe1fd0b,deliverydate:_0x5f24f2,driver:_0x4170d1,plate:_0x531a01,van:_0x509310,DRSI:_0x649206,typevehicle:_0x533a1c,TSU:_0x2b3a6f,TFU:_0x22e838}=_0x33f01b[_0x35bad1(0x249)];if(typeof _0x155b10==_0x35bad1(0x253))var _0x2e713e=[_0x33f01b['body'][_0x35bad1(0x24d)]],_0x1d22c8=[_0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x1f3)]],_0x308861=[_0x33f01b[_0x35bad1(0x249)]['from_prod_level2']],_0x243c38=[_0x33f01b['body'][_0x35bad1(0x1ab)]],_0x1cd570=[_0x33f01b[_0x35bad1(0x249)]['to_prod_level']],_0x456c92=[_0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x1bc)]],_0x17b6ca=[_0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x20c)]],_0x542469=[_0x33f01b[_0x35bad1(0x249)]['product_code3']],_0x1bb93b=[_0x33f01b['body'][_0x35bad1(0x1fe)]],_0x53784f=[_0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x1a9)]],_0x4251fe=[_0x33f01b['body'][_0x35bad1(0x219)]],_0x5ae98a=[_0x33f01b['body'][_0x35bad1(0x1cf)]],_0x16cbbc=[_0x33f01b['body'][_0x35bad1(0x1a7)]],_0x8c24c7=[_0x33f01b[_0x35bad1(0x249)]['product_date']],_0x5ae463=[_0x33f01b['body']['MaxStocks_data']],_0x46c2a9=[_0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x21c)]],_0x3a4545=[_0x33f01b['body'][_0x35bad1(0x213)]],_0x3ce573=[_0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x23b)]],_0x16fe70=[_0x33f01b[_0x35bad1(0x249)]['ToRoomAssigned']],_0x61ea6d=[_0x33f01b['body'][_0x35bad1(0x1b4)]],_0x5bf509=[_0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x1af)]];else var _0x2e713e=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x24d)]],_0x1d22c8=[..._0x33f01b['body'][_0x35bad1(0x1f3)]],_0x308861=[..._0x33f01b[_0x35bad1(0x249)]['from_prod_level2']],_0x243c38=[..._0x33f01b['body']['New_Qty_Converted']],_0x1cd570=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x230)]],_0x456c92=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x1bc)]],_0x17b6ca=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x20c)]],_0x542469=[..._0x33f01b['body'][_0x35bad1(0x227)]],_0x1bb93b=[..._0x33f01b[_0x35bad1(0x249)]['MaxStocks_data2']],_0x53784f=[..._0x33f01b[_0x35bad1(0x249)]['primary_unit']],_0x4251fe=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x219)]],_0x5ae98a=[..._0x33f01b[_0x35bad1(0x249)]['batch_code']],_0x16cbbc=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x1a7)]],_0x8c24c7=[..._0x33f01b[_0x35bad1(0x249)]['product_date']],_0x5ae463=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x1f2)]],_0x46c2a9=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x21c)]],_0x3a4545=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x213)]],_0x3ce573=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x23b)]],_0x16fe70=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x1b7)]],_0x61ea6d=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x1b4)]],_0x5bf509=[..._0x33f01b[_0x35bad1(0x249)][_0x35bad1(0x1af)]];const _0x137634=_0x2e713e['map'](_0x1e2575=>{return _0x1e2575={'product_name':_0x1e2575};});_0x1d22c8['forEach']((_0x5804ee,_0xcaced3)=>{_0x137634[_0xcaced3]['from_quantity']=_0x5804ee;}),_0x308861['forEach']((_0x5c84fb,_0xcec451)=>{var _0x576de7=_0x35bad1,_0x2744e5=_0x5c84fb[_0x576de7(0x1c0)](/[A-Za-z]+/)[0x0],_0x14bdde=parseInt(_0x5c84fb['match'](/\d+/)[0x0]);_0x137634[_0xcec451]['from_bay']=_0x14bdde,_0x137634[_0xcec451][_0x576de7(0x1b2)]=_0x2744e5;}),_0x5bf509['forEach']((_0x12eadc,_0x47742f)=>{_0x137634[_0x47742f]['id_transaction']=_0x12eadc;}),_0x61ea6d[_0x35bad1(0x192)]((_0x3f6927,_0x4a3111)=>{var _0x3e0f71=_0x35bad1;_0x137634[_0x4a3111][_0x3e0f71(0x1b4)]=_0x3f6927;}),_0x243c38['forEach']((_0x8e8a0b,_0x582216)=>{var _0x3721b6=_0x35bad1;_0x137634[_0x582216][_0x3721b6(0x1b6)]=_0x8e8a0b;}),_0x1cd570['forEach']((_0x3b4fd7,_0x5eebd0)=>{var _0x2c5c4b=_0x35bad1,_0x5db4f1=_0x3b4fd7[_0x2c5c4b(0x1c0)](/[A-Za-z]+/)[0x0],_0x7bb4ba=parseInt(_0x3b4fd7[_0x2c5c4b(0x1c0)](/\d+/)[0x0]);_0x137634[_0x5eebd0][_0x2c5c4b(0x1ef)]=_0x5db4f1,_0x137634[_0x5eebd0]['to_bay']=_0x7bb4ba;}),_0x456c92[_0x35bad1(0x192)]((_0x53e99e,_0x12526d)=>{var _0x1e5a1d=_0x35bad1;_0x137634[_0x12526d][_0x1e5a1d(0x1bc)]=_0x53e99e;}),_0x17b6ca['forEach']((_0x967f69,_0x20439c)=>{_0x137634[_0x20439c]['secondary_code']=_0x967f69;}),_0x542469[_0x35bad1(0x192)]((_0x1bb0ea,_0x48db77)=>{_0x137634[_0x48db77]['product_code']=_0x1bb0ea;}),_0x1bb93b[_0x35bad1(0x192)]((_0x4441fc,_0xde52a6)=>{_0x137634[_0xde52a6]['maxProducts']=_0x4441fc;}),_0x53784f[_0x35bad1(0x192)]((_0x2c10f0,_0x500719)=>{var _0x3977eb=_0x35bad1;_0x137634[_0x500719][_0x3977eb(0x1a0)]=_0x2c10f0;}),_0x4251fe[_0x35bad1(0x192)]((_0x226e0c,_0x5908fd)=>{var _0x11438f=_0x35bad1;_0x137634[_0x5908fd][_0x11438f(0x219)]=_0x226e0c;}),_0x5ae98a[_0x35bad1(0x192)]((_0x425a01,_0x2e43d0)=>{var _0x22dd3b=_0x35bad1;_0x137634[_0x2e43d0][_0x22dd3b(0x1cf)]=_0x425a01;}),_0x16cbbc[_0x35bad1(0x192)]((_0x1d4c8b,_0x500ead)=>{var _0x4de801=_0x35bad1;_0x137634[_0x500ead][_0x4de801(0x1a7)]=_0x1d4c8b;}),_0x8c24c7[_0x35bad1(0x192)]((_0x2a5bba,_0x1141e5)=>{_0x137634[_0x1141e5]['production_date']=_0x2a5bba;}),_0x5ae463[_0x35bad1(0x192)]((_0x41d9c3,_0x2aef9a)=>{_0x137634[_0x2aef9a]['maxProducts']=_0x41d9c3;}),_0x46c2a9[_0x35bad1(0x192)]((_0x3b5f19,_0x253e59)=>{var _0x4d5c9d=_0x35bad1;_0x137634[_0x253e59][_0x4d5c9d(0x21c)]=_0x3b5f19;}),_0x3a4545[_0x35bad1(0x192)]((_0x1fc159,_0x8349f0)=>{var _0x27d80d=_0x35bad1;_0x137634[_0x8349f0][_0x27d80d(0x213)]=_0x1fc159;}),_0x3ce573[_0x35bad1(0x192)]((_0x564278,_0x31fe84)=>{var _0x5dd55b=_0x35bad1;_0x137634[_0x31fe84][_0x5dd55b(0x1e8)]=_0x564278;}),_0x16fe70[_0x35bad1(0x192)]((_0x29ab61,_0x41f1da)=>{var _0xcf5f97=_0x35bad1;_0x137634[_0x41f1da][_0xcf5f97(0x21b)]=_0x29ab61;});const _0x3dec74=_0x137634['filter'](_0x9eee38=>_0x9eee38[_0x35bad1(0x1b6)]!=='0'&&_0x9eee38[_0x35bad1(0x1b6)]!==''||_0x9eee38['to_floorlevel']!=='0'&&_0x9eee38[_0x35bad1(0x1d9)]!=='');var _0x513940=0x0;_0x3dec74[_0x35bad1(0x192)](_0x12863b=>{var _0x10a578=_0x35bad1;parseInt(_0x12863b[_0x10a578(0x214)])<parseInt(_0x12863b['to_quantity'])&&_0x513940++;});if(_0x513940!=0x0)return _0x33f01b[_0x35bad1(0x23f)](_0x35bad1(0x22e),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x25f044[_0x35bad1(0x217)](_0x35bad1(0x1bf));const _0x1b0a74=new transfers_logs();await _0x1b0a74[_0x35bad1(0x1e7)]();for(let _0x1783fc=0x0;_0x1783fc<=_0x16fe70[_0x35bad1(0x23d)]-0x1;_0x1783fc++){_0x137634[_0x1783fc][_0x35bad1(0x1e9)]='LOG-TRF-'+_0x1b0a74[_0x35bad1(0x203)][_0x35bad1(0x1d8)]()['padStart'](0x8,'0');}const _0xeee4d6=new transfers_finished({'date':_0x3d3505,'from_warehouse':_0x299029,'to_warehouse':_0x299029,'product':_0x3dec74,'note':_0x433b0f,'invoice':_0x35bad1(0x1fc)+_0x1b0a74[_0x35bad1(0x203)][_0x35bad1(0x1d8)]()[_0x35bad1(0x1e4)](0x8,'0'),'type_of_process':_0x35bad1(0x1be),'type_of_transaction':_0x35bad1(0x1ed),'PO_number':_0x594118,'RequestedBy':_0x366a1d,'DateofRequest':_0x39c4ea,'typeservices':_0x4bd78e,'destination':_0xe1fd0b,'deliverydate':_0x5f24f2,'driver':_0x4170d1,'plate':_0x531a01,'van':_0x509310,'DRSI':_0x649206,'typevehicle':_0x533a1c,'TSU':_0x2b3a6f,'TFU':_0x22e838}),_0x38123a=await _0xeee4d6['save']();_0x33f01b[_0x35bad1(0x23f)](_0x35bad1(0x1b9),'Product\x20Transfer\x20successfully'),_0x25f044[_0x35bad1(0x217)]('/transfer_finished/preview/'+_0x38123a['_id']);}catch(_0x48c55a){console[_0x35bad1(0x225)](_0x48c55a),_0x25f044['status'](0xc8)[_0x35bad1(0x24a)]({'errorMessage':_0x48c55a[_0x35bad1(0x1ba)]});}}),router[a0_0x11fff5(0x258)](a0_0x11fff5(0x259),auth,async(_0x536000,_0x30f7d9)=>{var _0x25abe1=a0_0x11fff5;try{const {date:_0x44bed2,from_warehouse:_0x364e1a,FromRoom_name:_0xe7945e,to_warehouse:_0x467ae9,ToRoom_name:_0x251ed6,prod_name:_0xef4a58,from_prod_qty:_0x565ad9,from_prod_level:_0x4ca084,from_prod_isle:_0x3a14bc,from_prod_pallet:_0x3a2e88,to_prod_qty:_0x162b4e,to_prod_level:_0x3311eb,to_prod_isle:_0x5c89de,to_prod_pallet:_0x4b45c3,primary_code:_0x2d7961,secondary_code:_0x325beb,product_code3:_0x2d658f,note:_0x4cca91,MaxStocks_data2:_0x55892c,invoice:_0x4e58fd,expiry_date:_0x312683,PO_number_loc:_0x433c60,ReqBy_loc:_0x5b3ed3,dateofreq_loc:_0xcc414d,typeservices_loc_Data:_0x2207bf,destination_loc:_0x11dd34,deliverydate_loc:_0x23613d,driver_loc:_0x1114d4,plate_loc:_0x2a4fb9,van_loc:_0x32619a,DRSI_loc:_0x247df9,typevehicle_loc:_0x14cdfb,TSU_loc:_0x553758,TFU_loc:_0x2bdc46}=_0x536000[_0x25abe1(0x249)];if(typeof _0xef4a58==_0x25abe1(0x253))var _0x2a4c38=[_0x536000['body']['prod_name']],_0x3803ba=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x1f3)]],_0x920336=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x24e)]],_0xc07753=[_0x536000[_0x25abe1(0x249)]['New_Qty_Converted']],_0x3f29ad=[_0x536000[_0x25abe1(0x249)]['to_prod_level']],_0x25bbca=[_0x536000[_0x25abe1(0x249)]['primary_code']],_0x3fdc7f=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x20c)]],_0x282175=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x227)]],_0x22bd4e=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x1fe)]],_0x266165=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x1a9)]],_0xe00dbe=[_0x536000[_0x25abe1(0x249)]['secondary_unit']],_0x10ad8c=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x1cf)]],_0x2efa91=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x1a7)]],_0x28369a=[_0x536000[_0x25abe1(0x249)]['product_date']],_0x478712=[_0x536000[_0x25abe1(0x249)]['MaxStocks_data']],_0x23046c=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x21c)]],_0x5ee34e=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x213)]],_0x533736=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x23b)]],_0x4086ca=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x1b7)]],_0x1d973e=[_0x536000[_0x25abe1(0x249)]['from_invoice']],_0x59f614=[_0x536000[_0x25abe1(0x249)][_0x25abe1(0x1af)]];else var _0x2a4c38=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x24d)]],_0x3803ba=[..._0x536000['body'][_0x25abe1(0x1f3)]],_0x920336=[..._0x536000['body']['from_prod_level2']],_0xc07753=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x1ab)]],_0x3f29ad=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x230)]],_0x25bbca=[..._0x536000['body']['primary_code']],_0x3fdc7f=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x20c)]],_0x282175=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x227)]],_0x22bd4e=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x1fe)]],_0x266165=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x1a9)]],_0xe00dbe=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x219)]],_0x10ad8c=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x1cf)]],_0x2efa91=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x1a7)]],_0x28369a=[..._0x536000['body'][_0x25abe1(0x21f)]],_0x478712=[..._0x536000['body'][_0x25abe1(0x1f2)]],_0x23046c=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x21c)]],_0x5ee34e=[..._0x536000['body']['prod_cat']],_0x533736=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x23b)]],_0x4086ca=[..._0x536000[_0x25abe1(0x249)]['ToRoomAssigned']],_0x1d973e=[..._0x536000['body'][_0x25abe1(0x1b4)]],_0x59f614=[..._0x536000[_0x25abe1(0x249)][_0x25abe1(0x1af)]];const _0x185cbb=_0x2a4c38['map'](_0x4b8908=>{return _0x4b8908={'product_name':_0x4b8908};});_0x3803ba[_0x25abe1(0x192)]((_0x181487,_0x53c3aa)=>{_0x185cbb[_0x53c3aa]['from_quantity']=_0x181487;}),_0x920336[_0x25abe1(0x192)]((_0xe4f820,_0x33b912)=>{var _0x385a45=_0x25abe1,_0x3751c5=_0xe4f820[_0x385a45(0x1c0)](/[A-Za-z]+/)[0x0],_0xe36cd7=parseInt(_0xe4f820[_0x385a45(0x1c0)](/\d+/)[0x0]);_0x185cbb[_0x33b912]['from_bay']=_0xe36cd7,_0x185cbb[_0x33b912]['from_level']=_0x3751c5;}),_0x59f614['forEach']((_0x3efb76,_0x18e5f8)=>{_0x185cbb[_0x18e5f8]['id_transaction']=_0x3efb76;}),_0x1d973e['forEach']((_0x475247,_0x35c5bc)=>{var _0x1c225a=_0x25abe1;_0x185cbb[_0x35c5bc][_0x1c225a(0x1b4)]=_0x475247;}),_0xc07753[_0x25abe1(0x192)]((_0x2bff5f,_0x3b3d92)=>{var _0x355055=_0x25abe1;_0x185cbb[_0x3b3d92][_0x355055(0x1b6)]=_0x2bff5f;}),_0x3f29ad[_0x25abe1(0x192)]((_0x1a9a0b,_0x2ab902)=>{var _0x4b0942=_0x25abe1,_0x58c8b7=_0x1a9a0b[_0x4b0942(0x1c0)](/[A-Za-z]+/)[0x0],_0x1b380f=parseInt(_0x1a9a0b[_0x4b0942(0x1c0)](/\d+/)[0x0]);_0x185cbb[_0x2ab902][_0x4b0942(0x1ef)]=_0x58c8b7,_0x185cbb[_0x2ab902][_0x4b0942(0x1b0)]=_0x1b380f;}),_0x25bbca['forEach']((_0x1e3ec0,_0xe351d7)=>{_0x185cbb[_0xe351d7]['primary_code']=_0x1e3ec0;}),_0x3fdc7f[_0x25abe1(0x192)]((_0x5b7604,_0x262026)=>{var _0x5b73e6=_0x25abe1;_0x185cbb[_0x262026][_0x5b73e6(0x20c)]=_0x5b7604;}),_0x282175['forEach']((_0x1ef708,_0x34e438)=>{var _0x3384db=_0x25abe1;_0x185cbb[_0x34e438][_0x3384db(0x198)]=_0x1ef708;}),_0x22bd4e[_0x25abe1(0x192)]((_0x47b6c3,_0x2cbfc7)=>{var _0x4b3a97=_0x25abe1;_0x185cbb[_0x2cbfc7][_0x4b3a97(0x21d)]=_0x47b6c3;}),_0x266165['forEach']((_0x5b02d2,_0x11c6c6)=>{var _0x254daf=_0x25abe1;_0x185cbb[_0x11c6c6][_0x254daf(0x1a0)]=_0x5b02d2;}),_0xe00dbe[_0x25abe1(0x192)]((_0x3863be,_0x866bc2)=>{_0x185cbb[_0x866bc2]['secondary_unit']=_0x3863be;}),_0x10ad8c['forEach']((_0x3c1d10,_0xad7770)=>{var _0x3c862e=_0x25abe1;_0x185cbb[_0xad7770][_0x3c862e(0x1cf)]=_0x3c1d10;}),_0x2efa91[_0x25abe1(0x192)]((_0x234bcc,_0xce9ac4)=>{_0x185cbb[_0xce9ac4]['expiry_date']=_0x234bcc;}),_0x28369a['forEach']((_0x4f5c46,_0x2dd53a)=>{var _0x573c97=_0x25abe1;_0x185cbb[_0x2dd53a][_0x573c97(0x1d5)]=_0x4f5c46;}),_0x478712[_0x25abe1(0x192)]((_0x321cb8,_0x101325)=>{var _0x5dca4a=_0x25abe1;_0x185cbb[_0x101325][_0x5dca4a(0x21d)]=_0x321cb8;}),_0x23046c[_0x25abe1(0x192)]((_0x2ddc5f,_0x3ff6fe)=>{var _0x34ff59=_0x25abe1;_0x185cbb[_0x3ff6fe][_0x34ff59(0x21c)]=_0x2ddc5f;}),_0x5ee34e[_0x25abe1(0x192)]((_0x2cf1c3,_0xd53a5d)=>{_0x185cbb[_0xd53a5d]['prod_cat']=_0x2cf1c3;}),_0x533736[_0x25abe1(0x192)]((_0x573fcc,_0x1dde2d)=>{_0x185cbb[_0x1dde2d]['from_room_name']=_0x573fcc;}),_0x4086ca[_0x25abe1(0x192)]((_0x28dfa8,_0x51ee0c)=>{var _0x1c5359=_0x25abe1;_0x185cbb[_0x51ee0c][_0x1c5359(0x21b)]=_0x28dfa8;});const _0x177c1f=_0x185cbb[_0x25abe1(0x242)](_0x4eaa0e=>_0x4eaa0e[_0x25abe1(0x1b6)]!=='0'&&_0x4eaa0e['to_quantity']!==''||_0x4eaa0e['to_floorlevel']!=='0'&&_0x4eaa0e[_0x25abe1(0x1d9)]!=='');var _0x36dbdf=0x0;_0x177c1f[_0x25abe1(0x192)](_0x4b0730=>{var _0x2a5064=_0x25abe1;parseInt(_0x4b0730[_0x2a5064(0x214)])<parseInt(_0x4b0730[_0x2a5064(0x1b6)])&&_0x36dbdf++;});if(_0x36dbdf!=0x0)return _0x536000[_0x25abe1(0x23f)](_0x25abe1(0x22e),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x30f7d9[_0x25abe1(0x217)](_0x25abe1(0x1bf));const _0x18035b=new transfers_logs();await _0x18035b[_0x25abe1(0x1e7)]();for(let _0x4415da=0x0;_0x4415da<=_0x4086ca['length']-0x1;_0x4415da++){_0x185cbb[_0x4415da][_0x25abe1(0x1e9)]='LOG-TRF-'+_0x18035b['invoice_init'][_0x25abe1(0x1d8)]()[_0x25abe1(0x1e4)](0x8,'0');}const _0x33478d=new transfers_finished({'date':_0x44bed2,'from_warehouse':_0x364e1a,'to_warehouse':_0x467ae9,'product':_0x177c1f,'note':_0x4cca91,'invoice':'LOG-TRF-'+_0x18035b['invoice_init'][_0x25abe1(0x1d8)]()[_0x25abe1(0x1e4)](0x8,'0'),'type_of_transaction':'logs','type_of_process':_0x25abe1(0x1f1),'PO_number':_0x433c60,'RequestedBy':_0x5b3ed3,'DateofRequest':_0xcc414d,'typeservices':_0x2207bf,'destination':_0x11dd34,'deliverydate':_0x23613d,'driver':_0x1114d4,'plate':_0x2a4fb9,'van':_0x32619a,'DRSI':_0x247df9,'typevehicle':_0x14cdfb,'TSU':_0x553758,'TFU':_0x2bdc46}),_0x50ca4a=await _0x33478d[_0x25abe1(0x1e7)]();_0x536000[_0x25abe1(0x23f)](_0x25abe1(0x1b9),_0x25abe1(0x1cb)),_0x30f7d9[_0x25abe1(0x217)](_0x25abe1(0x1c8)+_0x50ca4a['_id']);}catch(_0x34536b){console[_0x25abe1(0x225)](_0x34536b),_0x30f7d9['status'](0xc8)[_0x25abe1(0x24a)]({'errorMessage':_0x34536b[_0x25abe1(0x1ba)]});}}),router[a0_0x11fff5(0x258)](a0_0x11fff5(0x1da),auth,async(_0x356e7a,_0x26d90c)=>{var _0x3fda64=a0_0x11fff5;try{const {date:_0x5aecda,from_warehouse:_0x5c4fdf,FromRoom_name:_0x340f4c,to_warehouse:_0x349709,ToRoom_name:_0x5185b1,prod_name:_0x1e315f,from_prod_qty:_0x242759,from_prod_level:_0x31145f,from_prod_isle:_0x3ef632,from_prod_pallet:_0x31d418,to_prod_qty:_0x3d50a1,to_prod_level:_0x2a4b61,to_prod_isle:_0x50d25f,to_prod_pallet:_0x24188a,primary_code:_0x5859e3,secondary_code:_0x3698b7,product_code3:_0x2acc92,note:_0x8f2c6b,MaxStocks_data2:_0x443710,invoice:_0x11595f,expiry_date:_0x1ea4bb,PO_number:_0x2936b3,ReqBy:_0x43cf68,dateofreq:_0x3ce268,typeservicesData:_0x4f1de0,destination:_0x3faa4f,deliverydate:_0x3a969c,driver:_0x16e0b3,plate:_0x1f5d9c,van:_0x49f5c4,DRSI:_0x419f5f,typevehicle:_0x235f7e,TSU:_0x1cb377,TFU:_0x4f3a2b}=_0x356e7a[_0x3fda64(0x249)];if(typeof _0x1e315f==_0x3fda64(0x253))var _0x1b3870=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x24d)]],_0x3c25bd=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1f3)]],_0x7cade8=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x24e)]],_0x3585b3=[_0x356e7a['body']['New_Qty_Converted']],_0x2b6b44=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x230)]],_0x1cfda1=[_0x356e7a[_0x3fda64(0x249)]['primary_code']],_0x27031a=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x20c)]],_0xe53c82=[_0x356e7a['body'][_0x3fda64(0x227)]],_0x3f5655=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1fe)]],_0x1ece27=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1a9)]],_0x38f96c=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x219)]],_0x488503=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1cf)]],_0x1775b0=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1a7)]],_0x6ccc44=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x21f)]],_0x17aa8f=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1f2)]],_0x146eb0=[_0x356e7a[_0x3fda64(0x249)]['maxPerUnit']],_0x4d18fd=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x213)]],_0x5d4496=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x23b)]],_0x1d10bf=[_0x356e7a['body'][_0x3fda64(0x1b7)]],_0x37c317=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1b4)]],_0x157c09=[_0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1af)]];else var _0x1b3870=[..._0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x24d)]],_0x3c25bd=[..._0x356e7a[_0x3fda64(0x249)]['from_prod_qty']],_0x7cade8=[..._0x356e7a['body'][_0x3fda64(0x24e)]],_0x3585b3=[..._0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1ab)]],_0x2b6b44=[..._0x356e7a['body'][_0x3fda64(0x230)]],_0x1cfda1=[..._0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1bc)]],_0x27031a=[..._0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x20c)]],_0xe53c82=[..._0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x227)]],_0x3f5655=[..._0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1fe)]],_0x1ece27=[..._0x356e7a[_0x3fda64(0x249)]['primary_unit']],_0x38f96c=[..._0x356e7a[_0x3fda64(0x249)]['secondary_unit']],_0x488503=[..._0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1cf)]],_0x1775b0=[..._0x356e7a['body']['expiry_date']],_0x6ccc44=[..._0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x21f)]],_0x17aa8f=[..._0x356e7a[_0x3fda64(0x249)]['MaxStocks_data']],_0x146eb0=[..._0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x21c)]],_0x4d18fd=[..._0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x213)]],_0x5d4496=[..._0x356e7a['body']['RoomAssigned']],_0x1d10bf=[..._0x356e7a['body'][_0x3fda64(0x1b7)]],_0x37c317=[..._0x356e7a[_0x3fda64(0x249)][_0x3fda64(0x1b4)]],_0x157c09=[..._0x356e7a['body'][_0x3fda64(0x1af)]];const _0x1dd93e=_0x1b3870[_0x3fda64(0x1de)](_0x2ecca1=>{return _0x2ecca1={'product_name':_0x2ecca1};});_0x3c25bd['forEach']((_0x50ba7c,_0xbb0463)=>{var _0x451358=_0x3fda64;_0x1dd93e[_0xbb0463][_0x451358(0x214)]=_0x50ba7c;}),_0x7cade8[_0x3fda64(0x192)]((_0x1bd381,_0x26702d)=>{var _0x1505fb=_0x3fda64,_0x2a5f37=_0x1bd381[_0x1505fb(0x1c0)](/[A-Za-z]+/)[0x0],_0x236784=parseInt(_0x1bd381[_0x1505fb(0x1c0)](/\d+/)[0x0]);_0x1dd93e[_0x26702d]['from_bay']=_0x236784,_0x1dd93e[_0x26702d][_0x1505fb(0x1b2)]=_0x2a5f37;}),_0x157c09[_0x3fda64(0x192)]((_0xbb4b3d,_0x2537d7)=>{var _0x3f235a=_0x3fda64;_0x1dd93e[_0x2537d7][_0x3f235a(0x1af)]=_0xbb4b3d;}),_0x37c317['forEach']((_0x499fc8,_0x333b65)=>{var _0x539945=_0x3fda64;_0x1dd93e[_0x333b65][_0x539945(0x1b4)]=_0x499fc8;}),_0x3585b3[_0x3fda64(0x192)]((_0x2d7c5b,_0x4a373e)=>{var _0x127790=_0x3fda64;_0x1dd93e[_0x4a373e][_0x127790(0x1b6)]=_0x2d7c5b;}),_0x2b6b44[_0x3fda64(0x192)]((_0x5eac3e,_0x3d1b40)=>{var _0x178cc4=_0x3fda64,_0x3a5bbe=_0x5eac3e['match'](/[A-Za-z]+/)[0x0],_0x4f503f=parseInt(_0x5eac3e[_0x178cc4(0x1c0)](/\d+/)[0x0]);_0x1dd93e[_0x3d1b40][_0x178cc4(0x1ef)]=_0x3a5bbe,_0x1dd93e[_0x3d1b40][_0x178cc4(0x1b0)]=_0x4f503f;}),_0x1cfda1['forEach']((_0x95a956,_0x327c0a)=>{var _0x2f9b4a=_0x3fda64;_0x1dd93e[_0x327c0a][_0x2f9b4a(0x1bc)]=_0x95a956;}),_0x27031a[_0x3fda64(0x192)]((_0x33b6a3,_0x58ec15)=>{_0x1dd93e[_0x58ec15]['secondary_code']=_0x33b6a3;}),_0xe53c82[_0x3fda64(0x192)]((_0x2a7d8c,_0x1fb63e)=>{var _0x4dd94c=_0x3fda64;_0x1dd93e[_0x1fb63e][_0x4dd94c(0x198)]=_0x2a7d8c;}),_0x3f5655[_0x3fda64(0x192)]((_0x3e8b13,_0x7160c6)=>{var _0x386590=_0x3fda64;_0x1dd93e[_0x7160c6][_0x386590(0x21d)]=_0x3e8b13;}),_0x1ece27[_0x3fda64(0x192)]((_0x283933,_0x487a2b)=>{var _0x16ac63=_0x3fda64;_0x1dd93e[_0x487a2b][_0x16ac63(0x1a0)]=_0x283933;}),_0x38f96c[_0x3fda64(0x192)]((_0x418f21,_0x54cc4f)=>{var _0x352619=_0x3fda64;_0x1dd93e[_0x54cc4f][_0x352619(0x219)]=_0x418f21;}),_0x488503[_0x3fda64(0x192)]((_0x5a1b1f,_0x2e4c52)=>{var _0x6aa01f=_0x3fda64;_0x1dd93e[_0x2e4c52][_0x6aa01f(0x1cf)]=_0x5a1b1f;}),_0x1775b0['forEach']((_0x22e095,_0xb2497a)=>{var _0x1f7847=_0x3fda64;_0x1dd93e[_0xb2497a][_0x1f7847(0x1a7)]=_0x22e095;}),_0x6ccc44[_0x3fda64(0x192)]((_0x4a6569,_0x37a4c9)=>{var _0x317a6c=_0x3fda64;_0x1dd93e[_0x37a4c9][_0x317a6c(0x1d5)]=_0x4a6569;}),_0x17aa8f['forEach']((_0x23d29a,_0x4ee8d4)=>{var _0x45de2b=_0x3fda64;_0x1dd93e[_0x4ee8d4][_0x45de2b(0x21d)]=_0x23d29a;}),_0x146eb0[_0x3fda64(0x192)]((_0x28d6dd,_0xaea3e6)=>{var _0x14c39c=_0x3fda64;_0x1dd93e[_0xaea3e6][_0x14c39c(0x21c)]=_0x28d6dd;}),_0x4d18fd[_0x3fda64(0x192)]((_0x44b2f1,_0x56c35b)=>{var _0x26da12=_0x3fda64;_0x1dd93e[_0x56c35b][_0x26da12(0x213)]=_0x44b2f1;}),_0x5d4496[_0x3fda64(0x192)]((_0x2c733a,_0x578ad1)=>{var _0x11f121=_0x3fda64;_0x1dd93e[_0x578ad1][_0x11f121(0x1e8)]=_0x2c733a;}),_0x1d10bf[_0x3fda64(0x192)]((_0x4a3ef0,_0x3b5680)=>{_0x1dd93e[_0x3b5680]['to_room_name']=_0x4a3ef0;});const _0x417277=_0x1dd93e[_0x3fda64(0x242)](_0x4513aa=>_0x4513aa[_0x3fda64(0x1b6)]!=='0'&&_0x4513aa[_0x3fda64(0x1b6)]!==''||_0x4513aa[_0x3fda64(0x1d9)]!=='0'&&_0x4513aa[_0x3fda64(0x1d9)]!=='');var _0x1b7951=0x0;_0x417277[_0x3fda64(0x192)](_0x290dc6=>{var _0x4df2e7=_0x3fda64;parseInt(_0x290dc6[_0x4df2e7(0x214)])<parseInt(_0x290dc6['to_quantity'])&&_0x1b7951++;});if(_0x1b7951!=0x0)return _0x356e7a['flash'](_0x3fda64(0x22e),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x26d90c[_0x3fda64(0x217)](_0x3fda64(0x1bf));const _0x345c11=new invoice_for_transfer();await _0x345c11[_0x3fda64(0x1e7)]();for(let _0x2e441d=0x0;_0x2e441d<=_0x1d10bf[_0x3fda64(0x23d)]-0x1;_0x2e441d++){_0x1dd93e[_0x2e441d][_0x3fda64(0x1e9)]=_0x3fda64(0x251)+_0x345c11[_0x3fda64(0x203)][_0x3fda64(0x1d8)]()[_0x3fda64(0x1e4)](0x8,'0');}const _0x336e43=new transfers_finished({'date':_0x5aecda,'from_warehouse':_0x5c4fdf,'to_warehouse':_0x5c4fdf,'product':_0x417277,'note':_0x8f2c6b,'invoice':_0x3fda64(0x251)+_0x345c11[_0x3fda64(0x203)]['toString']()[_0x3fda64(0x1e4)](0x8,'0'),'type_of_process':_0x3fda64(0x1be),'type_of_transaction':'own','PO_number':_0x2936b3,'RequestedBy':_0x43cf68,'DateofRequest':_0x3ce268,'typeservices':_0x4f1de0,'destination':_0x3faa4f,'deliverydate':_0x3a969c,'driver':_0x16e0b3,'plate':_0x1f5d9c,'van':_0x49f5c4,'DRSI':_0x419f5f,'typevehicle':_0x235f7e,'TSU':_0x1cb377,'TFU':_0x4f3a2b}),_0x238243=await _0x336e43[_0x3fda64(0x1e7)]();_0x356e7a[_0x3fda64(0x23f)]('success',_0x3fda64(0x1cb)),_0x26d90c[_0x3fda64(0x217)](_0x3fda64(0x1c8)+_0x238243[_0x3fda64(0x20a)]);}catch(_0x140792){console[_0x3fda64(0x225)](_0x140792),_0x26d90c[_0x3fda64(0x234)](0xc8)[_0x3fda64(0x24a)]({'errorMessage':_0x140792[_0x3fda64(0x1ba)]});}}),router[a0_0x11fff5(0x258)](a0_0x11fff5(0x1c7),auth,async(_0x31f12d,_0x4fd283)=>{var _0x40f57d=a0_0x11fff5;try{const {date:_0x58ee10,from_warehouse:_0x524571,FromRoom_name:_0x5bf0ab,to_warehouse:_0x43e811,ToRoom_name:_0x39e504,prod_name:_0x18cc82,from_prod_qty:_0x510934,from_prod_level:_0x10176d,from_prod_isle:_0x5f305f,from_prod_pallet:_0x44f939,to_prod_qty:_0x31aaef,to_prod_level:_0x42896d,to_prod_isle:_0x562f7c,to_prod_pallet:_0x37dfad,primary_code:_0x5e6a2f,secondary_code:_0x3caaf9,product_code3:_0x5aec30,note:_0x48c304,MaxStocks_data2:_0x1ca4f9,invoice:_0x3f5d7d,expiry_date:_0x452978,PO_number_loc:_0x57d591,ReqBy_loc:_0x5b9820,dateofreq_loc:_0x343683,typeservices_loc_Data:_0x464cdb,destination_loc:_0x398324,deliverydate_loc:_0x6b617b,driver_loc:_0x14ce16,plate_loc:_0xb4496,van_loc:_0x578f7e,DRSI_loc:_0x326759,typevehicle_loc:_0x357d0d,TSU_loc:_0x105618,TFU_loc:_0x9dd873}=_0x31f12d[_0x40f57d(0x249)];if(typeof _0x18cc82==_0x40f57d(0x253))var _0xd01c40=[_0x31f12d['body']['prod_name']],_0x50968b=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1f3)]],_0x919445=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x24e)]],_0x149f98=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1ab)]],_0x271e47=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x230)]],_0xb27f14=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1bc)]],_0x5b0440=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x20c)]],_0x3012e1=[_0x31f12d['body'][_0x40f57d(0x227)]],_0x5e9f3d=[_0x31f12d['body'][_0x40f57d(0x1fe)]],_0x45313d=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1a9)]],_0x3aefa2=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x219)]],_0x2918ae=[_0x31f12d[_0x40f57d(0x249)]['batch_code']],_0x25c944=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1a7)]],_0x2bf244=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x21f)]],_0x543d68=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1f2)]],_0x5aa90e=[_0x31f12d[_0x40f57d(0x249)]['maxPerUnit']],_0x1eaec1=[_0x31f12d['body']['prod_cat']],_0x49af3d=[_0x31f12d['body'][_0x40f57d(0x23b)]],_0x3a1bea=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1b7)]],_0x2b1573=[_0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1b4)]],_0xc9c762=[_0x31f12d['body'][_0x40f57d(0x1af)]];else var _0xd01c40=[..._0x31f12d['body']['prod_name']],_0x50968b=[..._0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1f3)]],_0x919445=[..._0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x24e)]],_0x149f98=[..._0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1ab)]],_0x271e47=[..._0x31f12d['body'][_0x40f57d(0x230)]],_0xb27f14=[..._0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1bc)]],_0x5b0440=[..._0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x20c)]],_0x3012e1=[..._0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x227)]],_0x5e9f3d=[..._0x31f12d[_0x40f57d(0x249)]['MaxStocks_data2']],_0x45313d=[..._0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1a9)]],_0x3aefa2=[..._0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x219)]],_0x2918ae=[..._0x31f12d[_0x40f57d(0x249)]['batch_code']],_0x25c944=[..._0x31f12d['body'][_0x40f57d(0x1a7)]],_0x2bf244=[..._0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x21f)]],_0x543d68=[..._0x31f12d['body'][_0x40f57d(0x1f2)]],_0x5aa90e=[..._0x31f12d['body'][_0x40f57d(0x21c)]],_0x1eaec1=[..._0x31f12d[_0x40f57d(0x249)]['prod_cat']],_0x49af3d=[..._0x31f12d[_0x40f57d(0x249)]['RoomAssigned']],_0x3a1bea=[..._0x31f12d[_0x40f57d(0x249)]['ToRoomAssigned']],_0x2b1573=[..._0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1b4)]],_0xc9c762=[..._0x31f12d[_0x40f57d(0x249)][_0x40f57d(0x1af)]];const _0xba33ff=_0xd01c40['map'](_0x5232a9=>{return _0x5232a9={'product_name':_0x5232a9};});_0x50968b['forEach']((_0x58b30d,_0x125793)=>{var _0x17f8fc=_0x40f57d;_0xba33ff[_0x125793][_0x17f8fc(0x214)]=_0x58b30d;}),_0x919445[_0x40f57d(0x192)]((_0x3e137e,_0x3bcb76)=>{var _0x4c1786=_0x40f57d,_0xf937d0=_0x3e137e[_0x4c1786(0x1c0)](/[A-Za-z]+/)[0x0],_0x4d197b=parseInt(_0x3e137e[_0x4c1786(0x1c0)](/\d+/)[0x0]);_0xba33ff[_0x3bcb76]['from_bay']=_0x4d197b,_0xba33ff[_0x3bcb76][_0x4c1786(0x1b2)]=_0xf937d0;}),_0xc9c762[_0x40f57d(0x192)]((_0x57fbec,_0x5b9170)=>{var _0xfafc66=_0x40f57d;_0xba33ff[_0x5b9170][_0xfafc66(0x1af)]=_0x57fbec;}),_0x2b1573['forEach']((_0x43a9ff,_0x2214f5)=>{_0xba33ff[_0x2214f5]['from_invoice']=_0x43a9ff;}),_0x149f98[_0x40f57d(0x192)]((_0x4ac82e,_0x32d6c5)=>{var _0x3bdf1a=_0x40f57d;_0xba33ff[_0x32d6c5][_0x3bdf1a(0x1b6)]=_0x4ac82e;}),_0x271e47[_0x40f57d(0x192)]((_0x5e3fb9,_0x396341)=>{var _0x48b8ca=_0x40f57d,_0x593457=_0x5e3fb9[_0x48b8ca(0x1c0)](/[A-Za-z]+/)[0x0],_0x52fa73=parseInt(_0x5e3fb9[_0x48b8ca(0x1c0)](/\d+/)[0x0]);_0xba33ff[_0x396341]['to_level']=_0x593457,_0xba33ff[_0x396341][_0x48b8ca(0x1b0)]=_0x52fa73;}),_0xb27f14['forEach']((_0x271714,_0x702525)=>{var _0x2eda6d=_0x40f57d;_0xba33ff[_0x702525][_0x2eda6d(0x1bc)]=_0x271714;}),_0x5b0440['forEach']((_0x507eb0,_0x3342dc)=>{var _0x4a05ca=_0x40f57d;_0xba33ff[_0x3342dc][_0x4a05ca(0x20c)]=_0x507eb0;}),_0x3012e1['forEach']((_0x44a86a,_0x44715f)=>{var _0x9436a5=_0x40f57d;_0xba33ff[_0x44715f][_0x9436a5(0x198)]=_0x44a86a;}),_0x5e9f3d[_0x40f57d(0x192)]((_0x501469,_0x316122)=>{_0xba33ff[_0x316122]['maxProducts']=_0x501469;}),_0x45313d[_0x40f57d(0x192)]((_0x190582,_0x53797a)=>{var _0x461cb2=_0x40f57d;_0xba33ff[_0x53797a][_0x461cb2(0x1a0)]=_0x190582;}),_0x3aefa2['forEach']((_0x399ddc,_0x1233d7)=>{_0xba33ff[_0x1233d7]['secondary_unit']=_0x399ddc;}),_0x2918ae[_0x40f57d(0x192)]((_0x34c53c,_0x23bb0e)=>{var _0x1bd962=_0x40f57d;_0xba33ff[_0x23bb0e][_0x1bd962(0x1cf)]=_0x34c53c;}),_0x25c944[_0x40f57d(0x192)]((_0x3b32f7,_0x5c92c7)=>{_0xba33ff[_0x5c92c7]['expiry_date']=_0x3b32f7;}),_0x2bf244[_0x40f57d(0x192)]((_0x5e7bde,_0x44a4b)=>{var _0x7f470a=_0x40f57d;_0xba33ff[_0x44a4b][_0x7f470a(0x1d5)]=_0x5e7bde;}),_0x543d68[_0x40f57d(0x192)]((_0x35bb67,_0x3842a4)=>{_0xba33ff[_0x3842a4]['maxProducts']=_0x35bb67;}),_0x5aa90e[_0x40f57d(0x192)]((_0x300fb9,_0x193846)=>{var _0x4cde64=_0x40f57d;_0xba33ff[_0x193846][_0x4cde64(0x21c)]=_0x300fb9;}),_0x1eaec1[_0x40f57d(0x192)]((_0x1f3c48,_0x5ba306)=>{var _0x2f9888=_0x40f57d;_0xba33ff[_0x5ba306][_0x2f9888(0x213)]=_0x1f3c48;}),_0x49af3d[_0x40f57d(0x192)]((_0xb08861,_0x16a930)=>{var _0x4dadf5=_0x40f57d;_0xba33ff[_0x16a930][_0x4dadf5(0x1e8)]=_0xb08861;}),_0x3a1bea['forEach']((_0x5f3fc0,_0x22d3bc)=>{var _0x32164e=_0x40f57d;_0xba33ff[_0x22d3bc][_0x32164e(0x21b)]=_0x5f3fc0;});const _0x47928c=_0xba33ff['filter'](_0x555caa=>_0x555caa[_0x40f57d(0x1b6)]!=='0'&&_0x555caa[_0x40f57d(0x1b6)]!==''||_0x555caa[_0x40f57d(0x1d9)]!=='0'&&_0x555caa[_0x40f57d(0x1d9)]!=='');var _0x2c0993=0x0;_0x47928c[_0x40f57d(0x192)](_0x46963d=>{var _0x293a0a=_0x40f57d;parseInt(_0x46963d[_0x293a0a(0x214)])<parseInt(_0x46963d['to_quantity'])&&_0x2c0993++;});if(_0x2c0993!=0x0)return _0x31f12d[_0x40f57d(0x23f)](_0x40f57d(0x22e),_0x40f57d(0x22f)),_0x4fd283[_0x40f57d(0x217)](_0x40f57d(0x1bf));const _0x17840d=new invoice_for_transfer();await _0x17840d[_0x40f57d(0x1e7)]();for(let _0x2d8893=0x0;_0x2d8893<=_0x3a1bea[_0x40f57d(0x23d)]-0x1;_0x2d8893++){_0xba33ff[_0x2d8893][_0x40f57d(0x1e9)]='TRF-'+_0x17840d[_0x40f57d(0x203)][_0x40f57d(0x1d8)]()['padStart'](0x8,'0');}const _0x27ec64=new transfers_finished({'date':_0x58ee10,'from_warehouse':_0x524571,'to_warehouse':_0x43e811,'product':_0x47928c,'note':_0x48c304,'invoice':_0x40f57d(0x251)+_0x17840d['invoice_init'][_0x40f57d(0x1d8)]()['padStart'](0x8,'0'),'type_of_transaction':_0x40f57d(0x1f5),'type_of_process':_0x40f57d(0x1f1),'PO_number':_0x57d591,'RequestedBy':_0x5b9820,'DateofRequest':_0x343683,'typeservices':_0x464cdb,'destination':_0x398324,'deliverydate':_0x6b617b,'driver':_0x14ce16,'plate':_0xb4496,'van':_0x578f7e,'DRSI':_0x326759,'typevehicle':_0x357d0d,'TSU':_0x105618,'TFU':_0x9dd873}),_0x4d3890=await _0x27ec64[_0x40f57d(0x1e7)]();_0x31f12d[_0x40f57d(0x23f)](_0x40f57d(0x1b9),_0x40f57d(0x1cb)),_0x4fd283['redirect'](_0x40f57d(0x1c8)+_0x4d3890[_0x40f57d(0x20a)]);}catch(_0x4d0fea){console[_0x40f57d(0x225)](_0x4d0fea),_0x4fd283[_0x40f57d(0x234)](0xc8)[_0x40f57d(0x24a)]({'errorMessage':_0x4d0fea[_0x40f57d(0x1ba)]});}}),router['get'](a0_0x11fff5(0x1b5),auth,async(_0x50d446,_0x4bede5)=>{var _0x4f4a55=a0_0x11fff5;try{const {username:_0x313caa,email:_0x363bca,role:_0x53124f}=_0x50d446['user'],_0x1a3371=_0x50d446[_0x4f4a55(0x1b3)],_0x570a22=await profile[_0x4f4a55(0x1e5)]({'email':_0x1a3371[_0x4f4a55(0x1eb)]}),_0x544c9c=await master_shop[_0x4f4a55(0x1ca)](),_0x207e0f=await transfers_finished['findById'](_0x50d446[_0x4f4a55(0x194)]['id']);let _0x86eb53;if(_0x1a3371[_0x4f4a55(0x22d)]=='staff'){const _0x10d7b7=await staff[_0x4f4a55(0x1e5)]({'email':_0x1a3371[_0x4f4a55(0x1eb)]});_0x86eb53=await warehouse[_0x4f4a55(0x1ca)]({'status':_0x4f4a55(0x1a3),'name':_0x10d7b7[_0x4f4a55(0x24b)],'warehouse_category':_0x4f4a55(0x237)});}else _0x86eb53=await warehouse[_0x4f4a55(0x1ca)]({'status':_0x4f4a55(0x1a3),'warehouse_category':'Finished\x20Goods'});const _0x1ecbe8=await warehouse[_0x4f4a55(0x1e2)]([{'$match':{'name':_0x207e0f[_0x4f4a55(0x1f0)],'warehouse_category':_0x4f4a55(0x237)}},{'$unwind':_0x4f4a55(0x246)},{'$group':{'_id':_0x4f4a55(0x24f),'name':{'$first':_0x4f4a55(0x193)},'product_stock':{'$first':_0x4f4a55(0x240)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x4f4a55(0x204)},'type':{'$first':_0x4f4a55(0x1d0)},'floorlevel':{'$first':_0x4f4a55(0x1e6)},'primary_code':{'$first':_0x4f4a55(0x1f4)},'secondary_code':{'$first':_0x4f4a55(0x1a8)},'product_code':{'$first':_0x4f4a55(0x1c4)},'storage':{'$first':_0x4f4a55(0x197)},'rack':{'$first':_0x4f4a55(0x1e0)},'expiry_date':{'$first':_0x4f4a55(0x1d1)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x4f4a55(0x1e3)},'warehoue_name':{'$first':'$name'}}}]),_0x310152=await product[_0x4f4a55(0x1ca)]({});if(_0x544c9c[0x0][_0x4f4a55(0x1f7)]==_0x4f4a55(0x19e)){var _0x3955cc=users[_0x4f4a55(0x245)];console[_0x4f4a55(0x225)](_0x3955cc);}else{if(_0x544c9c[0x0][_0x4f4a55(0x1f7)]==_0x4f4a55(0x243))var _0x3955cc=users[_0x4f4a55(0x243)];else{if(_0x544c9c[0x0]['language']==_0x4f4a55(0x1b8))var _0x3955cc=users[_0x4f4a55(0x1b8)];else{if(_0x544c9c[0x0][_0x4f4a55(0x1f7)]=='Spanish')var _0x3955cc=users[_0x4f4a55(0x1a1)];else{if(_0x544c9c[0x0][_0x4f4a55(0x1f7)]=='French')var _0x3955cc=users[_0x4f4a55(0x229)];else{if(_0x544c9c[0x0][_0x4f4a55(0x1f7)]=='Portuguese\x20(BR)')var _0x3955cc=users['Portuguese'];else{if(_0x544c9c[0x0][_0x4f4a55(0x1f7)]==_0x4f4a55(0x1ea))var _0x3955cc=users[_0x4f4a55(0x1ea)];else{if(_0x544c9c[0x0]['language']==_0x4f4a55(0x1f8))var _0x3955cc=users[_0x4f4a55(0x23c)];}}}}}}}_0x4bede5[_0x4f4a55(0x216)](_0x4f4a55(0x199),{'success':_0x50d446[_0x4f4a55(0x23f)](_0x4f4a55(0x1b9)),'errors':_0x50d446[_0x4f4a55(0x23f)](_0x4f4a55(0x22e)),'role':_0x1a3371,'profile':_0x570a22,'master_shop':_0x544c9c,'warehouse':_0x86eb53,'transfer':_0x207e0f,'stock':_0x1ecbe8,'unit':_0x310152,'language':_0x3955cc});}catch(_0x168b4d){console[_0x4f4a55(0x225)](_0x168b4d);}}),router[a0_0x11fff5(0x258)](a0_0x11fff5(0x1b5),auth,async(_0x2d2cdf,_0x692956)=>{var _0x1f6a9c=a0_0x11fff5;try{const {invoice:_0x193327,from_warehouse:_0x1993c5,FromRoom_name:_0x4d361b,to_warehouse:_0x4845a6,ToRoom_name:_0x43e057}=_0x2d2cdf['body'],_0x196427=await transfers_finished['findById'](_0x2d2cdf[_0x1f6a9c(0x194)]['id']),_0x4a1e65=_0x196427[_0x1f6a9c(0x248)]['map'](async _0x1b2f3a=>{var _0x162ad2=_0x1f6a9c;if(_0x1b2f3a[_0x162ad2(0x1b6)]>0x0){var _0x3e24b7=await warehouse[_0x162ad2(0x1e5)]({'name':_0x1993c5,'room':_0x1b2f3a[_0x162ad2(0x1e8)]});const _0xc77404=_0x3e24b7[_0x162ad2(0x20b)][_0x162ad2(0x1de)](_0x446f86=>{var _0x53dba5=_0x162ad2;_0x446f86[_0x53dba5(0x20a)]==_0x1b2f3a['id_transaction']&&(_0x446f86['product_stock']=Math[_0x53dba5(0x1f6)](0x0,Math[_0x53dba5(0x224)](_0x446f86[_0x53dba5(0x1bb)])-Math[_0x53dba5(0x224)](_0x1b2f3a[_0x53dba5(0x1b6)])),console['log'](_0x446f86[_0x53dba5(0x1bb)]));});}return _0x3e24b7;});Promise[_0x1f6a9c(0x1ff)](_0x4a1e65)[_0x1f6a9c(0x209)](async _0x4d5e5d=>{var _0x400967=_0x1f6a9c;try{for(const _0x4ebe6e of _0x4d5e5d){await _0x4ebe6e['save']();}const _0x567758=_0x196427[_0x400967(0x248)][_0x400967(0x1de)](async _0x17b8fe=>{var _0x566840=_0x400967,_0x9f89b0=await warehouse[_0x566840(0x1e5)]({'name':_0x4845a6,'room':_0x17b8fe[_0x566840(0x21b)]});if(_0x17b8fe['to_quantity']>0x0){var _0x5a8efa=0x0;const _0x4fb72a=_0x9f89b0[_0x566840(0x20b)][_0x566840(0x1de)](_0x3ed0d4=>{var _0x42e8cc=_0x566840;_0x3ed0d4[_0x42e8cc(0x201)]==_0x17b8fe[_0x42e8cc(0x201)]&&_0x3ed0d4[_0x42e8cc(0x231)]==_0x17b8fe[_0x42e8cc(0x1b0)]&&_0x3ed0d4[_0x42e8cc(0x1a7)]==_0x17b8fe[_0x42e8cc(0x1a7)]&&_0x3ed0d4['production_date']==_0x17b8fe[_0x42e8cc(0x1d5)]&&_0x3ed0d4['batch_code']==_0x17b8fe[_0x42e8cc(0x1cf)]&&_0x3ed0d4[_0x42e8cc(0x19a)]==_0x17b8fe[_0x42e8cc(0x1e9)]&&(typeof _0x17b8fe[_0x42e8cc(0x1af)]==_0x42e8cc(0x1fa)?(console['log']('here2',_0x3ed0d4[_0x42e8cc(0x1bb)]+_0x42e8cc(0x1a6)+_0x3ed0d4[_0x42e8cc(0x20a)]+_0x42e8cc(0x1f9)+Math['abs'](_0x3ed0d4['product_stock'])+Math['abs'](_0x17b8fe['to_quantity'])),_0x3ed0d4[_0x42e8cc(0x1bb)]=Math[_0x42e8cc(0x224)](_0x3ed0d4['product_stock'])+Math['abs'](_0x17b8fe[_0x42e8cc(0x1b6)])):_0x3ed0d4['product_stock']=Math['abs'](_0x3ed0d4['product_stock'])+Math['abs'](_0x17b8fe[_0x42e8cc(0x1b6)]),_0x5a8efa++);});_0x5a8efa=='0'&&(_0x9f89b0[_0x566840(0x20b)]=_0x9f89b0[_0x566840(0x20b)][_0x566840(0x206)]({'product_name':_0x17b8fe[_0x566840(0x201)],'product_stock':_0x17b8fe['to_quantity'],'bay':_0x17b8fe[_0x566840(0x1b0)],'level':_0x17b8fe[_0x566840(0x1ef)],'product_code':_0x17b8fe[_0x566840(0x198)],'primary_code':_0x17b8fe[_0x566840(0x1bc)],'secondary_code':_0x17b8fe[_0x566840(0x20c)],'expiry_date':_0x17b8fe[_0x566840(0x1a7)],'production_date':_0x17b8fe['production_date'],'maxProducts':_0x17b8fe['maxProducts'],'batch_code':_0x17b8fe['batch_code'],'secondary_unit':_0x17b8fe[_0x566840(0x219)],'unit':_0x17b8fe['unit'],'maxProducts':_0x17b8fe['maxProducts'],'maxPerUnit':_0x17b8fe[_0x566840(0x21c)],'invoice':_0x17b8fe[_0x566840(0x1e9)]}));}return _0x9f89b0;});Promise[_0x400967(0x1ff)](_0x567758)[_0x400967(0x209)](async _0x27c9f8=>{var _0x452c43=_0x400967;try{console['log'](_0x196427[_0x452c43(0x1fb)]);if(_0x196427[_0x452c43(0x1fb)]!=_0x452c43(0x1f1))for(const _0x1704d7 of _0x27c9f8){await warehouse[_0x452c43(0x212)]({'_id':_0x1704d7['_id']},{'$addToSet':{'product_details':{'$each':_0x1704d7[_0x452c43(0x20b)]}}});}_0x196427[_0x452c43(0x241)]='True';const _0x4803b8=await _0x196427['save'](),_0x481b05=await master_shop[_0x452c43(0x1ca)](),_0x517d6a=await email_settings[_0x452c43(0x1e5)](),_0xa4f160=await supervisor_settings[_0x452c43(0x1ca)]();var _0x360592=_0x196427[_0x452c43(0x248)],_0x197101='',_0x143106;for(_0x143106 in _0x360592){var _0x83d97b='FG';_0x196427[_0x452c43(0x1c1)]=='DRY\x20GOODS'&&(_0x83d97b='DG'),_0x197101+=_0x452c43(0x228)+_0x452c43(0x207)+_0x360592[_0x143106][_0x452c43(0x201)]+_0x452c43(0x218)+_0x452c43(0x207)+_0x360592[_0x143106][_0x452c43(0x198)]+_0x452c43(0x218)+_0x452c43(0x207)+_0x360592[_0x143106][_0x452c43(0x1b6)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x360592[_0x143106]['unit']+_0x452c43(0x218)+_0x452c43(0x207)+_0x360592[_0x143106]['secondary_unit']+_0x452c43(0x218)+_0x452c43(0x207)+_0x196427[_0x452c43(0x1c1)]+_0x452c43(0x218)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x360592[_0x143106]['to_room_name']+_0x452c43(0x218)+_0x452c43(0x207)+_0x83d97b+_0x360592[_0x143106]['to_bay']+_0x452c43(0x218)+'</tr>';}_0x2d2cdf[_0x452c43(0x23f)](_0x452c43(0x1b9),'Transfer\x20Finalize\x20Successfully'),_0x692956[_0x452c43(0x217)]('/picking_list/PDF_transfer/'+_0x4803b8[_0x452c43(0x20a)]);}catch(_0xc7b3d4){console[_0x452c43(0x208)](_0xc7b3d4),_0x692956[_0x452c43(0x234)](0x1f4)['json']({'error':'To\x20An\x20error\x20occurred\x20while\x20saving\x20data.'});}})[_0x400967(0x250)](_0xe4acfe=>{var _0x227b53=_0x400967;console['error'](_0xe4acfe),_0x692956[_0x227b53(0x234)](0x1f4)[_0x227b53(0x24a)]({'error':_0x227b53(0x23a)});});}catch(_0x4a844c){console['error'](_0x4a844c),_0x692956[_0x400967(0x234)](0x1f4)['json']({'error':'An\x20error\x20occurred\x20while\x20saving\x20data.'});}})[_0x1f6a9c(0x250)](_0x4b9b20=>{var _0x36f800=_0x1f6a9c;console[_0x36f800(0x208)](_0x4b9b20),_0x692956[_0x36f800(0x234)](0x1f4)[_0x36f800(0x24a)]({'error':'An\x20error\x20occurred.'});});}catch(_0x258f3b){_0x692956[_0x1f6a9c(0x24a)]({'message':_0x258f3b[_0x1f6a9c(0x1ba)]});}});function BayBinSelected(_0x1aff52,_0x51d52b){var _0x2ae801=a0_0x11fff5,_0x4e3b50=[];let _0x3296d5=[];var _0x4d6ef9=[];if(_0x1aff52==_0x2ae801(0x220)){switch(_0x51d52b){case'Rack\x201':_0x4e3b50=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10];break;case _0x2ae801(0x1ec):_0x4e3b50=[0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20];break;}_0x4d6ef9=['DG'];}else{if(_0x1aff52=='FROZEN\x20GOODS'){switch(_0x51d52b){case'Rack\x201':_0x4e3b50=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9];break;case _0x2ae801(0x1ec):_0x4e3b50=[0xa,0xb,0xc,0xd,0xe,0xf,0x10,0x11,0x12];break;}_0x4d6ef9=['FG'];}}return{'levels':_0x4e3b50,'identify':_0x4d6ef9};}router[a0_0x11fff5(0x1aa)](a0_0x11fff5(0x254),auth,async(_0x3164ba,_0x55bba9)=>{var _0x41ebbe=a0_0x11fff5;try{const {username:_0x29ae21,email:_0x2fa596,role:_0x4d9ef8}=_0x3164ba[_0x41ebbe(0x1b3)],_0x1713e4=_0x3164ba[_0x41ebbe(0x1b3)],_0x3fabc5=await profile[_0x41ebbe(0x1e5)]({'email':_0x1713e4[_0x41ebbe(0x1eb)]}),_0x4819e7=await master_shop[_0x41ebbe(0x1ca)](),_0x32c632=await transfers_finished[_0x41ebbe(0x1a2)](_0x3164ba[_0x41ebbe(0x194)]['id']);let _0xdb70d=new Date(_0x32c632[_0x41ebbe(0x1a7)]),_0x4eb06e=('0'+_0xdb70d[_0x41ebbe(0x236)]())[_0x41ebbe(0x1d2)](-0x2),_0x311917=('0'+(_0xdb70d[_0x41ebbe(0x1df)]()+0x1))[_0x41ebbe(0x1d2)](-0x2),_0x2caf75=_0xdb70d[_0x41ebbe(0x1db)](),_0x25e04a=_0x2caf75+'-'+_0x311917+'-'+_0x4eb06e,_0x36d717;if(_0x1713e4[_0x41ebbe(0x22d)]==_0x41ebbe(0x1c6)){const _0x4e07aa=await staff[_0x41ebbe(0x1e5)]({'email':_0x1713e4['email']});_0x36d717=await warehouse['find']({'status':_0x41ebbe(0x1a3),'name':_0x4e07aa['warehouse'],'warehouse_category':_0x41ebbe(0x237)});}else _0x36d717=await warehouse['find']({'status':_0x41ebbe(0x1a3),'warehouse_category':_0x41ebbe(0x237)});const _0x2c83ba=await warehouse[_0x41ebbe(0x1e2)]([{'$match':{'name':_0x32c632[_0x41ebbe(0x1f0)],'room':_0x32c632['from_room']}},{'$unwind':_0x41ebbe(0x246)},{'$group':{'_id':_0x41ebbe(0x24f),'name':{'$first':_0x41ebbe(0x193)},'product_stock':{'$first':_0x41ebbe(0x240)},'bay':{'$first':_0x41ebbe(0x196)},'bin':{'$first':_0x41ebbe(0x204)},'type':{'$first':_0x41ebbe(0x1d0)},'floorlevel':{'$first':_0x41ebbe(0x1e6)},'primary_code':{'$first':_0x41ebbe(0x1f4)},'secondary_code':{'$first':_0x41ebbe(0x1a8)},'product_code':{'$first':_0x41ebbe(0x1c4)},'storage':{'$first':_0x41ebbe(0x197)},'rack':{'$first':'$product_details.rack'}}}]);var _0x782aba=[0x1,0x2,0x3,0x4],_0x378633=['A','B','C','D','E','F','G','H','I','J'],_0x23db80=[_0x41ebbe(0x1d7),_0x41ebbe(0x19b)];const _0x1b3692=await product[_0x41ebbe(0x1ca)]({}),_0x3128bd=BayBinSelected(_0x32c632['to_warehouse'],_0x32c632[_0x41ebbe(0x195)]);if(_0x4819e7[0x0]['language']=='English\x20(US)'){var _0x4ca631=users[_0x41ebbe(0x245)];console[_0x41ebbe(0x225)](_0x4ca631);}else{if(_0x4819e7[0x0]['language']=='Hindi')var _0x4ca631=users['Hindi'];else{if(_0x4819e7[0x0][_0x41ebbe(0x1f7)]==_0x41ebbe(0x1b8))var _0x4ca631=users['German'];else{if(_0x4819e7[0x0][_0x41ebbe(0x1f7)]==_0x41ebbe(0x1a1))var _0x4ca631=users[_0x41ebbe(0x1a1)];else{if(_0x4819e7[0x0]['language']==_0x41ebbe(0x229))var _0x4ca631=users[_0x41ebbe(0x229)];else{if(_0x4819e7[0x0][_0x41ebbe(0x1f7)]==_0x41ebbe(0x191))var _0x4ca631=users[_0x41ebbe(0x1a5)];else{if(_0x4819e7[0x0]['language']==_0x41ebbe(0x1ea))var _0x4ca631=users[_0x41ebbe(0x1ea)];else{if(_0x4819e7[0x0][_0x41ebbe(0x1f7)]==_0x41ebbe(0x1f8))var _0x4ca631=users[_0x41ebbe(0x23c)];}}}}}}}_0x55bba9['render'](_0x41ebbe(0x222),{'success':_0x3164ba['flash'](_0x41ebbe(0x1b9)),'errors':_0x3164ba[_0x41ebbe(0x23f)](_0x41ebbe(0x22e)),'role':_0x1713e4,'profile':_0x3fabc5,'master_shop':_0x4819e7,'warehouse':_0x36d717,'transfer':_0x32c632,'stock':_0x2c83ba,'unit':_0x1b3692,'language':_0x4ca631,'levels':_0x782aba,'Isle':_0x378633,'rooms_data':_0x23db80,'ed_fullDate':_0x25e04a,'dataSelected':_0x3128bd});}catch(_0x450489){console[_0x41ebbe(0x225)](_0x450489);}}),router[a0_0x11fff5(0x258)](a0_0x11fff5(0x254),auth,async(_0x387407,_0x2f57ca)=>{var _0x32db44=a0_0x11fff5;try{const _0x908984=_0x387407[_0x32db44(0x194)]['id'];console['log'](_0x387407[_0x32db44(0x249)]);const _0xa65c9a=await transfers_finished[_0x32db44(0x1a2)](_0x908984);console[_0x32db44(0x225)](_0x32db44(0x247),_0xa65c9a);const {date:_0x5ec705,from_warehouse:_0x816460,FromRoom_name:_0xe5c5f2,to_warehouse:_0x45de7b,ToRoom_name:_0xb61d5e,prod_name:_0x194b0c,from_prod_qty:_0x4db56d,from_prod_level:_0x500f76,from_prod_isle:_0x3273dd,from_prod_pallet:_0x4a7c48,to_prod_qty:_0x4b82f6,to_prod_level:_0x3a24c9,to_prod_isle:_0x1745ab,to_prod_pallet:_0x22d78a,primary_code:_0x2c78b6,secondary_code:_0x161eee,product_code3:_0x486e2c,note:_0x4b7296,invoice:_0x53a647,expiry_date:_0x668ba3}=_0x387407[_0x32db44(0x249)];if(typeof _0x194b0c==_0x32db44(0x253))var _0x36ce17=[_0x387407[_0x32db44(0x249)][_0x32db44(0x24d)]],_0x2412b8=[_0x387407['body'][_0x32db44(0x1f3)]],_0x147fca=[_0x387407[_0x32db44(0x249)]['from_prod_level']],_0x43b211=[_0x387407[_0x32db44(0x249)][_0x32db44(0x1c2)]],_0x2c8c9b=[_0x387407[_0x32db44(0x249)]['to_prod_level']],_0x1dfffa=[_0x387407[_0x32db44(0x249)][_0x32db44(0x1bc)]],_0x38d436=[_0x387407[_0x32db44(0x249)][_0x32db44(0x20c)]],_0x4611ef=[_0x387407[_0x32db44(0x249)][_0x32db44(0x227)]],_0x5f2ed3=[_0x387407[_0x32db44(0x249)]['MaxStocks_data2']],_0x34b09c=[_0x387407['body'][_0x32db44(0x1a0)]],_0x261154=[_0x387407[_0x32db44(0x249)][_0x32db44(0x219)]],_0x358b5b=[_0x387407[_0x32db44(0x249)][_0x32db44(0x1cf)]],_0x1fe6fb=[_0x387407[_0x32db44(0x249)][_0x32db44(0x1a7)]];else var _0x36ce17=[..._0x387407[_0x32db44(0x249)][_0x32db44(0x24d)]],_0x2412b8=[..._0x387407[_0x32db44(0x249)][_0x32db44(0x1f3)]],_0x147fca=[..._0x387407[_0x32db44(0x249)][_0x32db44(0x202)]],_0x43b211=[..._0x387407[_0x32db44(0x249)]['to_prod_qty']],_0x2c8c9b=[..._0x387407['body']['to_prod_level']],_0x1dfffa=[..._0x387407[_0x32db44(0x249)][_0x32db44(0x1bc)]],_0x38d436=[..._0x387407['body'][_0x32db44(0x20c)]],_0x4611ef=[..._0x387407['body'][_0x32db44(0x227)]],_0x5f2ed3=[..._0x387407[_0x32db44(0x249)][_0x32db44(0x1fe)]],_0x34b09c=[..._0x387407[_0x32db44(0x249)][_0x32db44(0x1a0)]],_0x261154=[..._0x387407['body'][_0x32db44(0x219)]],_0x358b5b=[..._0x387407[_0x32db44(0x249)][_0x32db44(0x1cf)]],_0x1fe6fb=[..._0x387407[_0x32db44(0x249)][_0x32db44(0x1a7)]];const _0x24920b=_0x36ce17['map'](_0x5cbae9=>{return _0x5cbae9={'product_name':_0x5cbae9};});_0x2412b8[_0x32db44(0x192)]((_0x53600b,_0x4124e1)=>{var _0x44cb16=_0x32db44;_0x24920b[_0x4124e1][_0x44cb16(0x214)]=_0x53600b;}),_0x147fca['forEach']((_0x510658,_0x1a2421)=>{var _0x53136a=_0x32db44;_0x24920b[_0x1a2421][_0x53136a(0x200)]=_0x510658;}),_0x43b211[_0x32db44(0x192)]((_0x2fdbfd,_0x557258)=>{var _0xc3b6a=_0x32db44;_0x24920b[_0x557258][_0xc3b6a(0x1b6)]=_0x2fdbfd;}),_0x2c8c9b[_0x32db44(0x192)]((_0x3830d8,_0xaed1c7)=>{var _0x3dfaef=_0x32db44;_0x24920b[_0xaed1c7][_0x3dfaef(0x1b0)]=_0x3830d8;}),_0x1dfffa[_0x32db44(0x192)]((_0x59514f,_0x182958)=>{var _0x435cf2=_0x32db44;_0x24920b[_0x182958][_0x435cf2(0x1bc)]=_0x59514f;}),_0x38d436[_0x32db44(0x192)]((_0x3b8fe2,_0x380803)=>{_0x24920b[_0x380803]['secondary_code']=_0x3b8fe2;}),_0x4611ef[_0x32db44(0x192)]((_0x1fe99c,_0x33f4a8)=>{_0x24920b[_0x33f4a8]['product_code']=_0x1fe99c;}),_0x5f2ed3[_0x32db44(0x192)]((_0x585869,_0x551dbf)=>{var _0x930680=_0x32db44;_0x24920b[_0x551dbf][_0x930680(0x21d)]=_0x585869;}),_0x34b09c['forEach']((_0x41e8ec,_0xe5d3e0)=>{var _0x4a3a4a=_0x32db44;_0x24920b[_0xe5d3e0][_0x4a3a4a(0x1a0)]=_0x41e8ec;}),_0x261154[_0x32db44(0x192)]((_0x275185,_0x17c3a8)=>{var _0x1b0b95=_0x32db44;_0x24920b[_0x17c3a8][_0x1b0b95(0x219)]=_0x275185;}),_0x358b5b[_0x32db44(0x192)]((_0x1e6c83,_0xd0afb8)=>{var _0x372831=_0x32db44;_0x24920b[_0xd0afb8][_0x372831(0x1cf)]=_0x1e6c83;}),_0x1fe6fb['forEach']((_0x1f3141,_0x56b5ab)=>{var _0x3e1ac1=_0x32db44;_0x24920b[_0x56b5ab][_0x3e1ac1(0x1a7)]=_0x1f3141;});const _0x480338=_0x24920b[_0x32db44(0x242)](_0x5070d0=>_0x5070d0[_0x32db44(0x1b6)]!=='0'&&_0x5070d0['to_quantity']!==''||_0x5070d0[_0x32db44(0x1d9)]!=='0'&&_0x5070d0[_0x32db44(0x1d9)]!=='');var _0x58f810=0x0;_0x480338[_0x32db44(0x192)](_0x2b92f4=>{var _0x1b1357=_0x32db44;parseInt(_0x2b92f4[_0x1b1357(0x214)])<parseInt(_0x2b92f4['to_quantity'])&&_0x58f810++;});if(_0x58f810!=0x0)return _0x387407[_0x32db44(0x23f)](_0x32db44(0x22e),_0x32db44(0x22f)),_0x2f57ca[_0x32db44(0x217)](_0x32db44(0x1bf));const _0x4ee573=await warehouse[_0x32db44(0x1e5)]({'name':_0xa65c9a['from_warehouse'],'room':_0xa65c9a['from_room']});_0xa65c9a['product']['forEach'](_0xa0f53d=>{var _0x395555=_0x32db44;if(_0xa0f53d[_0x395555(0x1b6)]>0x0){const _0x1939b8=_0x4ee573[_0x395555(0x20b)][_0x395555(0x1de)](_0x2b0125=>{var _0x174a51=_0x395555;_0x2b0125['product_name']==_0xa0f53d[_0x174a51(0x201)]&&_0x2b0125[_0x174a51(0x231)]==_0xa0f53d[_0x174a51(0x200)]&&(_0x2b0125[_0x174a51(0x1bb)]=parseInt(_0x2b0125['product_stock'])+parseInt(_0xa0f53d[_0x174a51(0x1b6)]));});}}),await _0x4ee573[_0x32db44(0x1e7)]();const _0x393156=await warehouse[_0x32db44(0x1e5)]({'name':_0xa65c9a[_0x32db44(0x1c1)],'room':_0xa65c9a[_0x32db44(0x195)]});_0xa65c9a[_0x32db44(0x248)]['forEach'](_0x26bf26=>{var _0x56002d=_0x32db44;if(_0x26bf26[_0x56002d(0x1b6)]>0x0){const _0x34c04f=_0x393156[_0x56002d(0x20b)][_0x56002d(0x1de)](_0x2d9129=>{var _0x1dd84b=_0x56002d;_0x2d9129[_0x1dd84b(0x201)]==_0x26bf26[_0x1dd84b(0x201)]&&_0x2d9129['bay']==_0x26bf26['to_bay']&&(_0x2d9129['product_stock']=parseInt(_0x2d9129[_0x1dd84b(0x1bb)])-parseInt(_0x26bf26[_0x1dd84b(0x1b6)]));});}}),await _0x393156[_0x32db44(0x1e7)](),_0xa65c9a[_0x32db44(0x19f)]=_0x5ec705,_0xa65c9a[_0x32db44(0x1f0)]=_0x816460,_0xa65c9a[_0x32db44(0x1c1)]=_0x45de7b,_0xa65c9a[_0x32db44(0x248)]=_0x480338,_0xa65c9a['note']=_0x4b7296,_0xa65c9a[_0x32db44(0x19a)]=_0x53a647;const _0xbedd84=await _0xa65c9a['save'](),_0x4eadcd=await warehouse[_0x32db44(0x1e5)]({'name':_0x816460,'room':_0xe5c5f2});_0xbedd84[_0x32db44(0x248)][_0x32db44(0x192)](_0x2aed2a=>{var _0x5295d9=_0x32db44;if(_0x2aed2a[_0x5295d9(0x1b6)]>0x0){const _0x620667=_0x4eadcd[_0x5295d9(0x20b)][_0x5295d9(0x1de)](_0x4db8a1=>{var _0x7078c7=_0x5295d9;_0x4db8a1[_0x7078c7(0x201)]==_0x2aed2a[_0x7078c7(0x201)]&&_0x4db8a1[_0x7078c7(0x231)]==_0x2aed2a[_0x7078c7(0x200)]&&(_0x4db8a1[_0x7078c7(0x1bb)]=parseInt(_0x4db8a1[_0x7078c7(0x1bb)])-parseInt(_0x2aed2a[_0x7078c7(0x1b6)]));});}}),await _0x4eadcd[_0x32db44(0x1e7)]();const _0x24ebd4=await warehouse['findOne']({'name':_0x45de7b,'room':_0xb61d5e});_0xbedd84[_0x32db44(0x248)][_0x32db44(0x192)](_0x2d7488=>{var _0x2f070a=_0x32db44;if(_0x2d7488[_0x2f070a(0x1b6)]>0x0){var _0x3059f6=0x0;const _0x817b33=_0x24ebd4[_0x2f070a(0x20b)][_0x2f070a(0x1de)](_0x1bcc69=>{var _0x4f256f=_0x2f070a;_0x1bcc69[_0x4f256f(0x201)]==_0x2d7488['product_name']&&_0x1bcc69[_0x4f256f(0x231)]==_0x2d7488[_0x4f256f(0x1b0)]&&(_0x1bcc69[_0x4f256f(0x1bb)]=parseInt(_0x1bcc69[_0x4f256f(0x1bb)])+parseInt(_0x2d7488[_0x4f256f(0x1b6)]),_0x3059f6++);});_0x3059f6=='0'&&(_0x24ebd4['product_details']=_0x24ebd4[_0x2f070a(0x20b)][_0x2f070a(0x206)]({'product_name':_0x2d7488['product_name'],'product_stock':_0x2d7488[_0x2f070a(0x1b6)],'bay':_0x2d7488[_0x2f070a(0x1b0)],'product_code':_0x2d7488['product_code'],'primary_code':_0x2d7488[_0x2f070a(0x1bc)],'secondary_code':_0x2d7488[_0x2f070a(0x20c)],'maxProducts':_0x2d7488[_0x2f070a(0x21d)]}));}}),await _0x24ebd4['save'](),_0x387407[_0x32db44(0x23f)](_0x32db44(0x1b9),_0x32db44(0x211)),_0x2f57ca[_0x32db44(0x217)](_0x32db44(0x1d6));}catch(_0x287b2d){console[_0x32db44(0x225)](_0x287b2d);}}),router[a0_0x11fff5(0x258)](a0_0x11fff5(0x226),async(_0x388ff8,_0x5a0efc)=>{var _0x777fa7=a0_0x11fff5;const {FromWareHouse:_0x3249cf,FromRoom:_0xeded9d,ToWarehouse:_0x16869f,ToRoom:_0x460598,primary_code:_0x45c37c,Roomslist:_0x54a324}=_0x388ff8[_0x777fa7(0x249)],_0x4f6ceb=_0x54a324[_0x777fa7(0x235)](','),_0x5ae030=[];async function _0x4c5a80(_0x2ac3f7){var _0xa58936=_0x777fa7;const _0x3b8c4d=await warehouse[_0xa58936(0x1e2)]([{'$match':{'name':_0x3249cf,'room':_0x2ac3f7}},{'$unwind':_0xa58936(0x246)},{'$match':{'product_details.primary_code':_0x45c37c}},{'$group':{'_id':_0xa58936(0x24f),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0xa58936(0x240)},'primary_code':{'$first':_0xa58936(0x1f4)},'secondary_code':{'$first':_0xa58936(0x1a8)},'product_code':{'$first':_0xa58936(0x1c4)},'bay':{'$first':_0xa58936(0x196)},'level':{'$first':_0xa58936(0x1c9)},'type':{'$first':_0xa58936(0x1d0)},'pallet':{'$first':_0xa58936(0x1e6)},'unit':{'$first':_0xa58936(0x205)},'secondary_unit':{'$first':_0xa58936(0x24c)},'storage':{'$first':_0xa58936(0x197)},'rack':{'$first':_0xa58936(0x1e0)},'expiry_date':{'$first':_0xa58936(0x1d1)},'production_date':{'$first':_0xa58936(0x1ac)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'roomNamed':{'$first':'$room'},'prod_cat':{'$first':'P'},'invoice':{'$first':_0xa58936(0x21e)}}}]),_0x409a74=await warehouse[_0xa58936(0x1e2)]([{'$match':{'name':_0x3249cf,'room':_0x2ac3f7}},{'$unwind':_0xa58936(0x246)},{'$match':{'product_details.secondary_code':_0x45c37c}},{'$group':{'_id':_0xa58936(0x24f),'name':{'$first':_0xa58936(0x193)},'instock':{'$first':_0xa58936(0x240)},'primary_code':{'$first':_0xa58936(0x1f4)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'bay':{'$first':_0xa58936(0x196)},'level':{'$first':_0xa58936(0x1c9)},'type':{'$first':_0xa58936(0x1d0)},'pallet':{'$first':_0xa58936(0x1e6)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0xa58936(0x24c)},'storage':{'$first':_0xa58936(0x197)},'rack':{'$first':_0xa58936(0x1e0)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0xa58936(0x1ac)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0xa58936(0x239)},'roomNamed':{'$first':_0xa58936(0x1e3)},'prod_cat':{'$first':'S'},'invoice':{'$first':_0xa58936(0x21e)}}}]);if(_0x3b8c4d[_0xa58936(0x23d)]>0x0)_0x5ae030[_0xa58936(0x19c)](_0x3b8c4d);else _0x409a74[_0xa58936(0x23d)]>0x0&&_0x5ae030[_0xa58936(0x19c)](_0x409a74);}const _0x3b31fd=_0x4f6ceb['map'](_0x13bb3b=>_0x4c5a80(_0x13bb3b));await Promise[_0x777fa7(0x1ff)](_0x3b31fd),_0x5a0efc['json'](_0x5ae030);}),router['post'](a0_0x11fff5(0x1c5),async(_0x56d815,_0x5b71ed)=>{var _0x26b5f4=a0_0x11fff5;const {productCode:_0x46cba3,bay:_0x128324,warehouses:_0x2c7798,room:_0x18f886}=_0x56d815[_0x26b5f4(0x249)];console[_0x26b5f4(0x225)](_0x56d815['body']);try{const _0x4dc57e=await warehouse[_0x26b5f4(0x1e2)]([{'$match':{'name':_0x2c7798,'room':_0x18f886}},{'$unwind':_0x26b5f4(0x246)},{'$match':{'product_details.bay':parseInt(_0x128324)}},{'$group':{'_id':_0x26b5f4(0x24f),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x26b5f4(0x240)},'bay':{'$first':_0x26b5f4(0x196)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x5b71ed[_0x26b5f4(0x234)](0xc8)[_0x26b5f4(0x24a)](_0x4dc57e);}catch(_0x253d49){_0x5b71ed[_0x26b5f4(0x234)](0x194)[_0x26b5f4(0x24a)]({'message':_0x253d49[_0x26b5f4(0x1ba)]});}}),module[a0_0x11fff5(0x1d4)]=router;