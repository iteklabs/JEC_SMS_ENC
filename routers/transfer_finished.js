var a0_0x2a34f6=a0_0xb772;(function(_0x57bd0a,_0x3f3cf6){var _0x50da43=a0_0xb772,_0x1ca577=_0x57bd0a();while(!![]){try{var _0x1a6017=-parseInt(_0x50da43(0x244))/0x1*(-parseInt(_0x50da43(0x1f2))/0x2)+-parseInt(_0x50da43(0x18c))/0x3+parseInt(_0x50da43(0x219))/0x4*(-parseInt(_0x50da43(0x1c2))/0x5)+-parseInt(_0x50da43(0x1ce))/0x6*(parseInt(_0x50da43(0x19f))/0x7)+parseInt(_0x50da43(0x1a5))/0x8*(parseInt(_0x50da43(0x1c5))/0x9)+parseInt(_0x50da43(0x1d0))/0xa+parseInt(_0x50da43(0x185))/0xb;if(_0x1a6017===_0x3f3cf6)break;else _0x1ca577['push'](_0x1ca577['shift']());}catch(_0x332a2d){_0x1ca577['push'](_0x1ca577['shift']());}}}(a0_0x402c,0xd2952));const express=require(a0_0x2a34f6(0x24c)),app=express(),router=express[a0_0x2a34f6(0x1ea)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,invoice_for_transfer,transfers_logs}=require(a0_0x2a34f6(0x208)),auth=require(a0_0x2a34f6(0x1b7)),users=require(a0_0x2a34f6(0x1d1)),nodemailer=require(a0_0x2a34f6(0x1fb));router[a0_0x2a34f6(0x228)](a0_0x2a34f6(0x1c7),auth,async(_0x20f267,_0x4a6e79)=>{var _0x815fd7=a0_0x2a34f6;try{const {username:_0x6a5ba0,email:_0x58282f,role:_0x573d72}=_0x20f267['user'],_0x29bc4c=_0x20f267[_0x815fd7(0x1ef)],_0x48ee9e=await profile[_0x815fd7(0x195)]({'email':_0x29bc4c['email']}),_0x4a8835=await master_shop[_0x815fd7(0x204)]();let _0xefb9d7;if(_0x29bc4c[_0x815fd7(0x20c)]=='staff'){const _0x57b48e=await staff[_0x815fd7(0x195)]({'email':_0x29bc4c[_0x815fd7(0x19d)]});_0xefb9d7=await transfers_finished[_0x815fd7(0x204)]({'from_warehouse':_0x57b48e['warehouse']});}else _0xefb9d7=await transfers_finished[_0x815fd7(0x1b9)]([{'$match':{'type_of_transaction':_0x815fd7(0x21f)}},{'$unwind':_0x815fd7(0x1da)},{'$group':{'_id':'$_id','invoice':{'$first':_0x815fd7(0x247)},'date':{'$first':_0x815fd7(0x229)},'from_warehouse':{'$first':_0x815fd7(0x1fc)},'to_warehouse':{'$first':_0x815fd7(0x22c)},'from_room_name':{'$addToSet':_0x815fd7(0x18e)},'to_room_name':{'$addToSet':_0x815fd7(0x1f0)},'finalize':{'$first':_0x815fd7(0x1ad)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x4a8835[0x0]['language']==_0x815fd7(0x23c))var _0x27f38d=users[_0x815fd7(0x1e2)];else{if(_0x4a8835[0x0][_0x815fd7(0x1a8)]==_0x815fd7(0x1d9))var _0x27f38d=users[_0x815fd7(0x1d9)];else{if(_0x4a8835[0x0][_0x815fd7(0x1a8)]=='German')var _0x27f38d=users[_0x815fd7(0x225)];else{if(_0x4a8835[0x0][_0x815fd7(0x1a8)]=='Spanish')var _0x27f38d=users[_0x815fd7(0x216)];else{if(_0x4a8835[0x0][_0x815fd7(0x1a8)]==_0x815fd7(0x194))var _0x27f38d=users['French'];else{if(_0x4a8835[0x0][_0x815fd7(0x1a8)]==_0x815fd7(0x227))var _0x27f38d=users[_0x815fd7(0x1e6)];else{if(_0x4a8835[0x0][_0x815fd7(0x1a8)]==_0x815fd7(0x20d))var _0x27f38d=users[_0x815fd7(0x20d)];else{if(_0x4a8835[0x0][_0x815fd7(0x1a8)]==_0x815fd7(0x1bd))var _0x27f38d=users['Arabic'];}}}}}}}_0x4a6e79[_0x815fd7(0x248)](_0x815fd7(0x1f3),{'success':_0x20f267[_0x815fd7(0x1f9)]('success'),'errors':_0x20f267['flash'](_0x815fd7(0x193)),'role':_0x29bc4c,'profile':_0x48ee9e,'master_shop':_0x4a8835,'transfer':_0xefb9d7,'language':_0x27f38d});}catch(_0x141e64){console[_0x815fd7(0x200)](_0x141e64);}}),router[a0_0x2a34f6(0x228)](a0_0x2a34f6(0x1a0),auth,async(_0x19e0df,_0x4e4971)=>{var _0x2754e4=a0_0x2a34f6;try{const {username:_0x340f6c,email:_0x5b7164,role:_0x315166}=_0x19e0df[_0x2754e4(0x1ef)],_0x2f1232=_0x19e0df['user'],_0x2db9c6=await profile[_0x2754e4(0x195)]({'email':_0x2f1232[_0x2754e4(0x19d)]}),_0x1e2599=await master_shop[_0x2754e4(0x204)]();let _0x2b8bd8;if(_0x2f1232['role']==_0x2754e4(0x209)){const _0x295880=await staff[_0x2754e4(0x195)]({'email':_0x2f1232[_0x2754e4(0x19d)]});_0x2b8bd8=await transfers_finished['find']({'from_warehouse':_0x295880['warehouse']});}else _0x2b8bd8=await transfers_finished[_0x2754e4(0x1b9)]([{'$match':{'type_of_transaction':_0x2754e4(0x1f4)}},{'$unwind':_0x2754e4(0x1da)},{'$group':{'_id':_0x2754e4(0x254),'invoice':{'$first':_0x2754e4(0x247)},'date':{'$first':_0x2754e4(0x229)},'from_warehouse':{'$first':_0x2754e4(0x1fc)},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x2754e4(0x18e)},'to_room_name':{'$addToSet':_0x2754e4(0x1f0)},'finalize':{'$first':_0x2754e4(0x1ad)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x1e2599[0x0][_0x2754e4(0x1a8)]=='English\x20(US)')var _0x5077a4=users[_0x2754e4(0x1e2)];else{if(_0x1e2599[0x0][_0x2754e4(0x1a8)]==_0x2754e4(0x1d9))var _0x5077a4=users[_0x2754e4(0x1d9)];else{if(_0x1e2599[0x0]['language']==_0x2754e4(0x225))var _0x5077a4=users['German'];else{if(_0x1e2599[0x0][_0x2754e4(0x1a8)]=='Spanish')var _0x5077a4=users[_0x2754e4(0x216)];else{if(_0x1e2599[0x0][_0x2754e4(0x1a8)]==_0x2754e4(0x194))var _0x5077a4=users[_0x2754e4(0x194)];else{if(_0x1e2599[0x0][_0x2754e4(0x1a8)]==_0x2754e4(0x227))var _0x5077a4=users[_0x2754e4(0x1e6)];else{if(_0x1e2599[0x0][_0x2754e4(0x1a8)]==_0x2754e4(0x20d))var _0x5077a4=users[_0x2754e4(0x20d)];else{if(_0x1e2599[0x0][_0x2754e4(0x1a8)]==_0x2754e4(0x1bd))var _0x5077a4=users['Arabic'];}}}}}}}_0x4e4971[_0x2754e4(0x248)](_0x2754e4(0x239),{'success':_0x19e0df[_0x2754e4(0x1f9)](_0x2754e4(0x252)),'errors':_0x19e0df[_0x2754e4(0x1f9)]('errors'),'role':_0x2f1232,'profile':_0x2db9c6,'master_shop':_0x1e2599,'transfer':_0x2b8bd8,'language':_0x5077a4});}catch(_0x540a8d){console[_0x2754e4(0x200)](_0x540a8d);}});async function getRandom8DigitNumber(){var _0x2b48a5=a0_0x2a34f6;const _0x31cba2=0x989680,_0x3b6362=0x5f5e0ff,_0x30c524=Math[_0x2b48a5(0x196)](Math['random']()*(_0x3b6362-_0x31cba2+0x1))+_0x31cba2;var _0x19b368;const _0x2dff0b=await transfers_finished[_0x2b48a5(0x195)]({'invoice':_0x2b48a5(0x1c9)+_0x30c524});return _0x2dff0b&&_0x2dff0b['length']>0x0?_0x19b368='TRFF-'+_0x30c524:_0x19b368=_0x2b48a5(0x1c9)+_0x30c524,_0x19b368;}function a0_0xb772(_0x20368a,_0x241595){var _0x402c2c=a0_0x402c();return a0_0xb772=function(_0xb77236,_0x3b13ee){_0xb77236=_0xb77236-0x184;var _0x4261c4=_0x402c2c[_0xb77236];return _0x4261c4;},a0_0xb772(_0x20368a,_0x241595);}router['get']('/view/add_transfer',auth,async(_0x359c4d,_0x22cd68)=>{var _0x4232e2=a0_0x2a34f6;try{const {username:_0x3f8dc3,email:_0x5e24ad,role:_0x352849}=_0x359c4d[_0x4232e2(0x1ef)],_0x1987ce=_0x359c4d[_0x4232e2(0x1ef)],_0x36ee68=await profile[_0x4232e2(0x195)]({'email':_0x1987ce[_0x4232e2(0x19d)]}),_0x315550=await master_shop['find']();let _0x23ae3f;if(_0x1987ce[_0x4232e2(0x20c)]==_0x4232e2(0x209)){const _0x28830f=await staff[_0x4232e2(0x195)]({'email':_0x1987ce[_0x4232e2(0x19d)]});_0x23ae3f=await warehouse[_0x4232e2(0x1b9)]([{'$match':{'status':_0x4232e2(0x191),'name':_0x28830f[_0x4232e2(0x1ba)]}},{'$group':{'_id':_0x4232e2(0x1cd),'name':{'$first':_0x4232e2(0x1cd)}}}]);}else _0x23ae3f=await warehouse[_0x4232e2(0x1b9)]([{'$match':{'status':_0x4232e2(0x191)}},{'$group':{'_id':_0x4232e2(0x1cd),'name':{'$first':_0x4232e2(0x1cd)}}}]);const _0x122408=await transfers_finished['find']({}),_0x2b5998=_0x122408[_0x4232e2(0x199)]+0x1,_0x24ba25=_0x4232e2(0x1c9)+_0x2b5998[_0x4232e2(0x1a1)]()[_0x4232e2(0x1a9)](0x5,'0');if(_0x315550[0x0][_0x4232e2(0x1a8)]==_0x4232e2(0x23c))var _0x1d0689=users[_0x4232e2(0x1e2)];else{if(_0x315550[0x0][_0x4232e2(0x1a8)]==_0x4232e2(0x1d9))var _0x1d0689=users['Hindi'];else{if(_0x315550[0x0]['language']==_0x4232e2(0x225))var _0x1d0689=users[_0x4232e2(0x225)];else{if(_0x315550[0x0][_0x4232e2(0x1a8)]=='Spanish')var _0x1d0689=users[_0x4232e2(0x216)];else{if(_0x315550[0x0][_0x4232e2(0x1a8)]==_0x4232e2(0x194))var _0x1d0689=users[_0x4232e2(0x194)];else{if(_0x315550[0x0][_0x4232e2(0x1a8)]==_0x4232e2(0x227))var _0x1d0689=users[_0x4232e2(0x1e6)];else{if(_0x315550[0x0][_0x4232e2(0x1a8)]==_0x4232e2(0x20d))var _0x1d0689=users['Chinese'];else{if(_0x315550[0x0][_0x4232e2(0x1a8)]==_0x4232e2(0x1bd))var _0x1d0689=users['Arabic'];}}}}}}}const _0x597dd0=getRandom8DigitNumber();_0x597dd0[_0x4232e2(0x1ac)](_0x33d849=>{var _0x17e288=_0x4232e2;_0x22cd68['render'](_0x17e288(0x212),{'success':_0x359c4d[_0x17e288(0x1f9)](_0x17e288(0x252)),'errors':_0x359c4d['flash'](_0x17e288(0x193)),'role':_0x1987ce,'profile':_0x36ee68,'master_shop':_0x315550,'warehouse':_0x23ae3f,'language':_0x1d0689,'invoice':_0x33d849});})['catch'](_0xcbf5ff=>{var _0x50e9d0=_0x4232e2;_0x359c4d[_0x50e9d0(0x1f9)]('errors',_0x50e9d0(0x24a)),_0x22cd68[_0x50e9d0(0x1b1)](_0x50e9d0(0x250));});}catch(_0x5a8b6e){console[_0x4232e2(0x200)](_0x5a8b6e);}}),router['get'](a0_0x2a34f6(0x203),auth,async(_0x297928,_0x783d7f)=>{var _0x30c7d4=a0_0x2a34f6;try{const {username:_0xfbfbad,email:_0xf1dfe6,role:_0x2b5c13}=_0x297928[_0x30c7d4(0x1ef)],_0x1ce514=_0x297928[_0x30c7d4(0x1ef)],_0x9b2941=await profile['findOne']({'email':_0x1ce514[_0x30c7d4(0x19d)]}),_0x4fa4a1=await master_shop[_0x30c7d4(0x204)]();let _0x2da94b;if(_0x1ce514['role']=='staff'){const _0x166d32=await staff[_0x30c7d4(0x195)]({'email':_0x1ce514['email']});_0x2da94b=await warehouse[_0x30c7d4(0x1b9)]([{'$match':{'status':'Enabled','name':_0x166d32[_0x30c7d4(0x1ba)]}},{'$group':{'_id':_0x30c7d4(0x1cd),'name':{'$first':'$name'}}}]);}else _0x2da94b=await warehouse[_0x30c7d4(0x1b9)]([{'$match':{'status':_0x30c7d4(0x191)}},{'$group':{'_id':_0x30c7d4(0x1cd),'name':{'$first':_0x30c7d4(0x1cd)}}}]);const _0x436013=await transfers_finished[_0x30c7d4(0x204)]({}),_0x2e356e=_0x436013[_0x30c7d4(0x199)]+0x1,_0x321b9a=_0x30c7d4(0x1c9)+_0x2e356e[_0x30c7d4(0x1a1)]()[_0x30c7d4(0x1a9)](0x5,'0');if(_0x4fa4a1[0x0][_0x30c7d4(0x1a8)]==_0x30c7d4(0x23c))var _0x10decb=users[_0x30c7d4(0x1e2)];else{if(_0x4fa4a1[0x0][_0x30c7d4(0x1a8)]=='Hindi')var _0x10decb=users[_0x30c7d4(0x1d9)];else{if(_0x4fa4a1[0x0][_0x30c7d4(0x1a8)]==_0x30c7d4(0x225))var _0x10decb=users[_0x30c7d4(0x225)];else{if(_0x4fa4a1[0x0]['language']==_0x30c7d4(0x216))var _0x10decb=users[_0x30c7d4(0x216)];else{if(_0x4fa4a1[0x0][_0x30c7d4(0x1a8)]==_0x30c7d4(0x194))var _0x10decb=users[_0x30c7d4(0x194)];else{if(_0x4fa4a1[0x0][_0x30c7d4(0x1a8)]==_0x30c7d4(0x227))var _0x10decb=users[_0x30c7d4(0x1e6)];else{if(_0x4fa4a1[0x0][_0x30c7d4(0x1a8)]==_0x30c7d4(0x20d))var _0x10decb=users[_0x30c7d4(0x20d)];else{if(_0x4fa4a1[0x0]['language']==_0x30c7d4(0x1bd))var _0x10decb=users[_0x30c7d4(0x18b)];}}}}}}}const _0x105b95=getRandom8DigitNumber();_0x105b95[_0x30c7d4(0x1ac)](_0x24f36b=>{var _0x4b317b=_0x30c7d4;_0x783d7f[_0x4b317b(0x248)](_0x4b317b(0x224),{'success':_0x297928[_0x4b317b(0x1f9)]('success'),'errors':_0x297928[_0x4b317b(0x1f9)](_0x4b317b(0x193)),'role':_0x1ce514,'profile':_0x9b2941,'master_shop':_0x4fa4a1,'warehouse':_0x2da94b,'language':_0x10decb,'invoice':_0x24f36b});})[_0x30c7d4(0x222)](_0x24eb7f=>{var _0x27988b=_0x30c7d4;_0x297928['flash'](_0x27988b(0x193),_0x27988b(0x24a)),_0x783d7f['redirect'](_0x27988b(0x250));});}catch(_0x5aff02){console[_0x30c7d4(0x200)](_0x5aff02);}}),router[a0_0x2a34f6(0x228)]('/view/choose_logs',auth,async(_0x3d93d9,_0x21b27b)=>{var _0x4d3e08=a0_0x2a34f6;try{const {username:_0x208bea,email:_0x2dca69,role:_0x53219a}=_0x3d93d9[_0x4d3e08(0x1ef)],_0x42584e=_0x3d93d9['user'],_0x441c39=await profile[_0x4d3e08(0x195)]({'email':_0x42584e[_0x4d3e08(0x19d)]}),_0x1d04c0=await master_shop[_0x4d3e08(0x204)]();let _0x2fcead;if(_0x42584e['role']=='staff'){const _0xe716d9=await staff[_0x4d3e08(0x195)]({'email':_0x42584e[_0x4d3e08(0x19d)]});_0x2fcead=await warehouse[_0x4d3e08(0x1b9)]([{'$match':{'status':_0x4d3e08(0x191),'name':_0xe716d9['warehouse']}},{'$group':{'_id':_0x4d3e08(0x1cd),'name':{'$first':_0x4d3e08(0x1cd)}}}]);}else _0x2fcead=await warehouse['aggregate']([{'$match':{'status':_0x4d3e08(0x191)}},{'$group':{'_id':_0x4d3e08(0x1cd),'name':{'$first':_0x4d3e08(0x1cd)}}}]);const _0x5011b7=await transfers_finished[_0x4d3e08(0x204)]({}),_0x3235a4=_0x5011b7['length']+0x1,_0x57a161=_0x4d3e08(0x1c9)+_0x3235a4[_0x4d3e08(0x1a1)]()[_0x4d3e08(0x1a9)](0x5,'0');if(_0x1d04c0[0x0][_0x4d3e08(0x1a8)]=='English\x20(US)')var _0x81d2e3=users[_0x4d3e08(0x1e2)];else{if(_0x1d04c0[0x0][_0x4d3e08(0x1a8)]==_0x4d3e08(0x1d9))var _0x81d2e3=users['Hindi'];else{if(_0x1d04c0[0x0][_0x4d3e08(0x1a8)]==_0x4d3e08(0x225))var _0x81d2e3=users[_0x4d3e08(0x225)];else{if(_0x1d04c0[0x0][_0x4d3e08(0x1a8)]==_0x4d3e08(0x216))var _0x81d2e3=users['Spanish'];else{if(_0x1d04c0[0x0]['language']==_0x4d3e08(0x194))var _0x81d2e3=users[_0x4d3e08(0x194)];else{if(_0x1d04c0[0x0][_0x4d3e08(0x1a8)]==_0x4d3e08(0x227))var _0x81d2e3=users[_0x4d3e08(0x1e6)];else{if(_0x1d04c0[0x0]['language']==_0x4d3e08(0x20d))var _0x81d2e3=users[_0x4d3e08(0x20d)];else{if(_0x1d04c0[0x0][_0x4d3e08(0x1a8)]==_0x4d3e08(0x1bd))var _0x81d2e3=users['Arabic'];}}}}}}}const _0x116a99=getRandom8DigitNumber();_0x116a99['then'](_0x496e90=>{var _0xe60eee=_0x4d3e08;_0x21b27b[_0xe60eee(0x248)](_0xe60eee(0x1c1),{'success':_0x3d93d9[_0xe60eee(0x1f9)](_0xe60eee(0x252)),'errors':_0x3d93d9[_0xe60eee(0x1f9)](_0xe60eee(0x193)),'role':_0x42584e,'profile':_0x441c39,'master_shop':_0x1d04c0,'warehouse':_0x2fcead,'language':_0x81d2e3,'invoice':_0x496e90});})[_0x4d3e08(0x222)](_0x925caf=>{var _0x7261ab=_0x4d3e08;_0x3d93d9['flash']('errors','There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x21b27b[_0x7261ab(0x1b1)](_0x7261ab(0x250));});}catch(_0x40af31){console[_0x4d3e08(0x200)](_0x40af31);}}),router[a0_0x2a34f6(0x214)](a0_0x2a34f6(0x24b),auth,async(_0x336e95,_0x4fb7fd)=>{var _0x2db09c=a0_0x2a34f6;try{const {date:_0x2bfbc2,from_warehouse:_0x3441c5,FromRoom_name:_0xa7a964,to_warehouse:_0x1385cf,ToRoom_name:_0x1620fb,prod_name:_0x2570e2,from_prod_qty:_0x3edef5,from_prod_level:_0x1b7cb3,from_prod_isle:_0x5a1e73,from_prod_pallet:_0x85fe95,to_prod_qty:_0x2da6eb,to_prod_level:_0x38c48e,to_prod_isle:_0x39522d,to_prod_pallet:_0x17d5af,primary_code:_0x2e7285,secondary_code:_0x543aba,product_code3:_0x3827ca,note:_0x2d7011,MaxStocks_data2:_0x5f5c2f,invoice:_0x429f67,expiry_date:_0x4c4a47,PO_number:_0x4d79a3,ReqBy:_0x4ed6e7,dateofreq:_0x57834d,typeservicesData:_0x12e442,destination:_0x4bee5c,deliverydate:_0x13a56b,driver:_0x211a01,plate:_0x3f5c83,van:_0x1cb2c,DRSI:_0x19e0a0,typevehicle:_0x1c4f0c,TSU:_0x47f1e3,TFU:_0x1dfacb}=_0x336e95[_0x2db09c(0x18d)];if(typeof _0x2570e2==_0x2db09c(0x1f5))var _0x1802ef=[_0x336e95[_0x2db09c(0x18d)]['prod_name']],_0x44ba7b=[_0x336e95['body'][_0x2db09c(0x1be)]],_0x10d895=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x246)]],_0x4f8b72=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x1bb)]],_0x2c1853=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x1a3)]],_0x1b183c=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x23a)]],_0x390d61=[_0x336e95[_0x2db09c(0x18d)]['secondary_code']],_0x43b78f=[_0x336e95['body']['product_code3']],_0x530d6f=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x23f)]],_0x16c191=[_0x336e95['body'][_0x2db09c(0x19e)]],_0x3993b1=[_0x336e95[_0x2db09c(0x18d)]['secondary_unit']],_0x185a80=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x1fe)]],_0x396443=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x256)]],_0x1b7344=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x221)]],_0xd5f0d2=[_0x336e95['body'][_0x2db09c(0x186)]],_0x38effc=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x1db)]],_0x58ea13=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x253)]],_0x2cad6f=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x201)]],_0x1bb61d=[_0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x1fd)]],_0x88a03=[_0x336e95[_0x2db09c(0x18d)]['from_invoice']],_0x17261f=[_0x336e95[_0x2db09c(0x18d)]['id_transaction']];else var _0x1802ef=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x237)]],_0x44ba7b=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x1be)]],_0x10d895=[..._0x336e95['body'][_0x2db09c(0x246)]],_0x4f8b72=[..._0x336e95['body']['New_Qty_Converted']],_0x2c1853=[..._0x336e95['body'][_0x2db09c(0x1a3)]],_0x1b183c=[..._0x336e95['body'][_0x2db09c(0x23a)]],_0x390d61=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x258)]],_0x43b78f=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x1e4)]],_0x530d6f=[..._0x336e95[_0x2db09c(0x18d)]['MaxStocks_data2']],_0x16c191=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x19e)]],_0x3993b1=[..._0x336e95['body'][_0x2db09c(0x1d4)]],_0x185a80=[..._0x336e95[_0x2db09c(0x18d)]['batch_code']],_0x396443=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x256)]],_0x1b7344=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x221)]],_0xd5f0d2=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x186)]],_0x38effc=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x1db)]],_0x58ea13=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x253)]],_0x2cad6f=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x201)]],_0x1bb61d=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x1fd)]],_0x88a03=[..._0x336e95[_0x2db09c(0x18d)]['from_invoice']],_0x17261f=[..._0x336e95[_0x2db09c(0x18d)][_0x2db09c(0x1ec)]];const _0x5186be=_0x1802ef[_0x2db09c(0x1ee)](_0x5d3b5c=>{return _0x5d3b5c={'product_name':_0x5d3b5c};});_0x44ba7b[_0x2db09c(0x243)]((_0xe04b6,_0x2e53b4)=>{var _0x559460=_0x2db09c;_0x5186be[_0x2e53b4][_0x559460(0x22a)]=_0xe04b6;}),_0x10d895[_0x2db09c(0x243)]((_0x142d74,_0x4c039c)=>{var _0x54ec48=_0x2db09c,_0x2d0293=_0x142d74['match'](/[A-Za-z]+/)[0x0],_0xa3ba95=parseInt(_0x142d74[_0x54ec48(0x1d5)](/\d+/)[0x0]);_0x5186be[_0x4c039c][_0x54ec48(0x1c0)]=_0xa3ba95,_0x5186be[_0x4c039c][_0x54ec48(0x215)]=_0x2d0293;}),_0x17261f['forEach']((_0x37ed64,_0x3bd506)=>{_0x5186be[_0x3bd506]['id_transaction']=_0x37ed64;}),_0x88a03[_0x2db09c(0x243)]((_0x500e28,_0x410e52)=>{_0x5186be[_0x410e52]['from_invoice']=_0x500e28;}),_0x4f8b72[_0x2db09c(0x243)]((_0x5b480a,_0x5edf45)=>{var _0x2daee9=_0x2db09c;_0x5186be[_0x5edf45][_0x2daee9(0x189)]=_0x5b480a;}),_0x2c1853[_0x2db09c(0x243)]((_0x5a7925,_0x714db2)=>{var _0x3bdc63=_0x2db09c,_0x3ba384=_0x5a7925['match'](/[A-Za-z]+/)[0x0],_0xdd9fd9=parseInt(_0x5a7925[_0x3bdc63(0x1d5)](/\d+/)[0x0]);_0x5186be[_0x714db2][_0x3bdc63(0x19b)]=_0x3ba384,_0x5186be[_0x714db2][_0x3bdc63(0x1bc)]=_0xdd9fd9;}),_0x1b183c[_0x2db09c(0x243)]((_0x49add8,_0x2b9ea1)=>{var _0x174576=_0x2db09c;_0x5186be[_0x2b9ea1][_0x174576(0x23a)]=_0x49add8;}),_0x390d61['forEach']((_0xe76ee0,_0x3ced96)=>{var _0x266e04=_0x2db09c;_0x5186be[_0x3ced96][_0x266e04(0x258)]=_0xe76ee0;}),_0x43b78f[_0x2db09c(0x243)]((_0xca4c71,_0x51d5f5)=>{var _0x58b335=_0x2db09c;_0x5186be[_0x51d5f5][_0x58b335(0x24f)]=_0xca4c71;}),_0x530d6f[_0x2db09c(0x243)]((_0x3487ef,_0x22cbb3)=>{var _0xd1ab8c=_0x2db09c;_0x5186be[_0x22cbb3][_0xd1ab8c(0x190)]=_0x3487ef;}),_0x16c191['forEach']((_0x4396d2,_0x12909b)=>{var _0x1f9a1e=_0x2db09c;_0x5186be[_0x12909b][_0x1f9a1e(0x187)]=_0x4396d2;}),_0x3993b1['forEach']((_0x133d61,_0x53c36c)=>{var _0x1a3541=_0x2db09c;_0x5186be[_0x53c36c][_0x1a3541(0x1d4)]=_0x133d61;}),_0x185a80[_0x2db09c(0x243)]((_0x4d6905,_0x3f7ab7)=>{_0x5186be[_0x3f7ab7]['batch_code']=_0x4d6905;}),_0x396443[_0x2db09c(0x243)]((_0x84aa9d,_0x246635)=>{var _0x571e66=_0x2db09c;_0x5186be[_0x246635][_0x571e66(0x256)]=_0x84aa9d;}),_0x1b7344[_0x2db09c(0x243)]((_0x3df2c7,_0x3f38ec)=>{_0x5186be[_0x3f38ec]['production_date']=_0x3df2c7;}),_0xd5f0d2[_0x2db09c(0x243)]((_0x2d658c,_0x26948f)=>{_0x5186be[_0x26948f]['maxProducts']=_0x2d658c;}),_0x38effc[_0x2db09c(0x243)]((_0x2ca4ff,_0xd01034)=>{var _0x50b95f=_0x2db09c;_0x5186be[_0xd01034][_0x50b95f(0x1db)]=_0x2ca4ff;}),_0x58ea13['forEach']((_0x1a8150,_0x3ed5b1)=>{_0x5186be[_0x3ed5b1]['prod_cat']=_0x1a8150;}),_0x2cad6f[_0x2db09c(0x243)]((_0xfb71e7,_0x15fd4f)=>{var _0x12f366=_0x2db09c;_0x5186be[_0x15fd4f][_0x12f366(0x257)]=_0xfb71e7;}),_0x1bb61d[_0x2db09c(0x243)]((_0x2c8f34,_0x5c23ce)=>{var _0x3c325f=_0x2db09c;_0x5186be[_0x5c23ce][_0x3c325f(0x1e8)]=_0x2c8f34;});const _0xcf8ad0=_0x5186be[_0x2db09c(0x1aa)](_0x34d277=>_0x34d277[_0x2db09c(0x189)]!=='0'&&_0x34d277[_0x2db09c(0x189)]!==''||_0x34d277['to_floorlevel']!=='0'&&_0x34d277[_0x2db09c(0x1b6)]!=='');var _0x374da5=0x0;_0xcf8ad0[_0x2db09c(0x243)](_0x318bfa=>{var _0x1f3dfb=_0x2db09c;parseInt(_0x318bfa[_0x1f3dfb(0x22a)])<parseInt(_0x318bfa[_0x1f3dfb(0x189)])&&_0x374da5++;});if(_0x374da5!=0x0)return _0x336e95[_0x2db09c(0x1f9)](_0x2db09c(0x193),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x4fb7fd[_0x2db09c(0x1b1)](_0x2db09c(0x1c8));const _0x31ed16=new transfers_logs();await _0x31ed16[_0x2db09c(0x22b)]();for(let _0x4a8e15=0x0;_0x4a8e15<=_0x1bb61d[_0x2db09c(0x199)]-0x1;_0x4a8e15++){_0x5186be[_0x4a8e15][_0x2db09c(0x1b0)]='LOG-TRF-'+_0x31ed16[_0x2db09c(0x1ae)][_0x2db09c(0x1a1)]()[_0x2db09c(0x1a9)](0x8,'0');}const _0x268779=new transfers_finished({'date':_0x2bfbc2,'from_warehouse':_0x3441c5,'to_warehouse':_0x3441c5,'product':_0xcf8ad0,'note':_0x2d7011,'invoice':_0x2db09c(0x23b)+_0x31ed16['invoice_init'][_0x2db09c(0x1a1)]()['padStart'](0x8,'0'),'type_of_process':'bin2bin','type_of_transaction':'logs','PO_number':_0x4d79a3,'RequestedBy':_0x4ed6e7,'DateofRequest':_0x57834d,'typeservices':_0x12e442,'destination':_0x4bee5c,'deliverydate':_0x13a56b,'driver':_0x211a01,'plate':_0x3f5c83,'van':_0x1cb2c,'DRSI':_0x19e0a0,'typevehicle':_0x1c4f0c,'TSU':_0x47f1e3,'TFU':_0x1dfacb}),_0xbafd4c=await _0x268779[_0x2db09c(0x22b)]();_0x336e95[_0x2db09c(0x1f9)](_0x2db09c(0x252),_0x2db09c(0x238)),_0x4fb7fd[_0x2db09c(0x1b1)](_0x2db09c(0x1de)+_0xbafd4c[_0x2db09c(0x1a7)]);}catch(_0x1d35fa){console[_0x2db09c(0x200)](_0x1d35fa),_0x4fb7fd['status'](0xc8)['json']({'errorMessage':_0x1d35fa['message']});}}),router['post'](a0_0x2a34f6(0x242),auth,async(_0x20c8bf,_0x51dbe5)=>{var _0x7e6646=a0_0x2a34f6;try{const {date:_0x4f684d,from_warehouse:_0x5c483f,FromRoom_name:_0x52d9a5,to_warehouse:_0x2cbe5f,ToRoom_name:_0x1810ea,prod_name:_0x44b69c,from_prod_qty:_0xab7477,from_prod_level:_0x4ea2b4,from_prod_isle:_0x78532f,from_prod_pallet:_0x53ee66,to_prod_qty:_0x25ef91,to_prod_level:_0x4d0e1a,to_prod_isle:_0x550241,to_prod_pallet:_0x3f1be0,primary_code:_0x82bb17,secondary_code:_0x558d79,product_code3:_0x284d8f,note:_0x347fda,MaxStocks_data2:_0x4dd87a,invoice:_0x3364a1,expiry_date:_0x3293b6,PO_number_loc:_0x4ccf20,ReqBy_loc:_0x625e90,dateofreq_loc:_0x33be74,typeservices_loc_Data:_0x4b1a14,destination_loc:_0x5ecb42,deliverydate_loc:_0x1d3d1e,driver_loc:_0x4d9be4,plate_loc:_0x2272e9,van_loc:_0x50ec60,DRSI_loc:_0x2fa23a,typevehicle_loc:_0x549fdb,TSU_loc:_0xf61af7,TFU_loc:_0x3ef06a}=_0x20c8bf[_0x7e6646(0x18d)];if(typeof _0x44b69c==_0x7e6646(0x1f5))var _0x37f03c=[_0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x237)]],_0x5de8db=[_0x20c8bf[_0x7e6646(0x18d)]['from_prod_qty']],_0x4e54ad=[_0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x246)]],_0x2a67c3=[_0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x1bb)]],_0x129aab=[_0x20c8bf['body'][_0x7e6646(0x1a3)]],_0x28f611=[_0x20c8bf['body']['primary_code']],_0x28e920=[_0x20c8bf['body'][_0x7e6646(0x258)]],_0xc53eda=[_0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x1e4)]],_0xd7637d=[_0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x23f)]],_0x5b02c2=[_0x20c8bf[_0x7e6646(0x18d)]['primary_unit']],_0x46c554=[_0x20c8bf[_0x7e6646(0x18d)]['secondary_unit']],_0x77caba=[_0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x1fe)]],_0x2a7132=[_0x20c8bf['body'][_0x7e6646(0x256)]],_0x5df95c=[_0x20c8bf[_0x7e6646(0x18d)]['product_date']],_0x4704fd=[_0x20c8bf['body'][_0x7e6646(0x186)]],_0x2ff225=[_0x20c8bf[_0x7e6646(0x18d)]['maxPerUnit']],_0x4194f4=[_0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x253)]],_0x482e39=[_0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x201)]],_0x122a76=[_0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x1fd)]],_0x586240=[_0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x21e)]],_0x117612=[_0x20c8bf['body'][_0x7e6646(0x1ec)]];else var _0x37f03c=[..._0x20c8bf['body']['prod_name']],_0x5de8db=[..._0x20c8bf['body'][_0x7e6646(0x1be)]],_0x4e54ad=[..._0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x246)]],_0x2a67c3=[..._0x20c8bf['body']['New_Qty_Converted']],_0x129aab=[..._0x20c8bf[_0x7e6646(0x18d)]['to_prod_level']],_0x28f611=[..._0x20c8bf['body']['primary_code']],_0x28e920=[..._0x20c8bf[_0x7e6646(0x18d)]['secondary_code']],_0xc53eda=[..._0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x1e4)]],_0xd7637d=[..._0x20c8bf[_0x7e6646(0x18d)]['MaxStocks_data2']],_0x5b02c2=[..._0x20c8bf['body'][_0x7e6646(0x19e)]],_0x46c554=[..._0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x1d4)]],_0x77caba=[..._0x20c8bf['body'][_0x7e6646(0x1fe)]],_0x2a7132=[..._0x20c8bf['body'][_0x7e6646(0x256)]],_0x5df95c=[..._0x20c8bf['body'][_0x7e6646(0x221)]],_0x4704fd=[..._0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x186)]],_0x2ff225=[..._0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x1db)]],_0x4194f4=[..._0x20c8bf['body'][_0x7e6646(0x253)]],_0x482e39=[..._0x20c8bf['body'][_0x7e6646(0x201)]],_0x122a76=[..._0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x1fd)]],_0x586240=[..._0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x21e)]],_0x117612=[..._0x20c8bf[_0x7e6646(0x18d)][_0x7e6646(0x1ec)]];const _0x59607c=_0x37f03c[_0x7e6646(0x1ee)](_0x52c589=>{return _0x52c589={'product_name':_0x52c589};});_0x5de8db[_0x7e6646(0x243)]((_0x4c74e0,_0x468d27)=>{var _0x49498f=_0x7e6646;_0x59607c[_0x468d27][_0x49498f(0x22a)]=_0x4c74e0;}),_0x4e54ad[_0x7e6646(0x243)]((_0xc3fa6a,_0x2c5786)=>{var _0x570d2f=_0x7e6646,_0x43fe96=_0xc3fa6a['match'](/[A-Za-z]+/)[0x0],_0x4c264f=parseInt(_0xc3fa6a[_0x570d2f(0x1d5)](/\d+/)[0x0]);_0x59607c[_0x2c5786]['from_bay']=_0x4c264f,_0x59607c[_0x2c5786]['from_level']=_0x43fe96;}),_0x117612[_0x7e6646(0x243)]((_0x2c16fb,_0x537132)=>{_0x59607c[_0x537132]['id_transaction']=_0x2c16fb;}),_0x586240[_0x7e6646(0x243)]((_0xde40cc,_0x1bd6ca)=>{var _0x193543=_0x7e6646;_0x59607c[_0x1bd6ca][_0x193543(0x21e)]=_0xde40cc;}),_0x2a67c3[_0x7e6646(0x243)]((_0x56648c,_0x293d3a)=>{var _0x59b766=_0x7e6646;_0x59607c[_0x293d3a][_0x59b766(0x189)]=_0x56648c;}),_0x129aab[_0x7e6646(0x243)]((_0xf14a6,_0x1ee5a7)=>{var _0x3bd12d=_0x7e6646,_0xeba97b=_0xf14a6['match'](/[A-Za-z]+/)[0x0],_0xda17b7=parseInt(_0xf14a6['match'](/\d+/)[0x0]);_0x59607c[_0x1ee5a7][_0x3bd12d(0x19b)]=_0xeba97b,_0x59607c[_0x1ee5a7]['to_bay']=_0xda17b7;}),_0x28f611['forEach']((_0x48deb1,_0xe1140b)=>{var _0xc0118f=_0x7e6646;_0x59607c[_0xe1140b][_0xc0118f(0x23a)]=_0x48deb1;}),_0x28e920[_0x7e6646(0x243)]((_0x2e27a3,_0x176928)=>{var _0x48cb02=_0x7e6646;_0x59607c[_0x176928][_0x48cb02(0x258)]=_0x2e27a3;}),_0xc53eda[_0x7e6646(0x243)]((_0x4ef8ad,_0x5b6102)=>{var _0x346768=_0x7e6646;_0x59607c[_0x5b6102][_0x346768(0x24f)]=_0x4ef8ad;}),_0xd7637d[_0x7e6646(0x243)]((_0x5330dc,_0xb7596)=>{_0x59607c[_0xb7596]['maxProducts']=_0x5330dc;}),_0x5b02c2[_0x7e6646(0x243)]((_0x1b9364,_0x7ef07b)=>{var _0x24041e=_0x7e6646;_0x59607c[_0x7ef07b][_0x24041e(0x187)]=_0x1b9364;}),_0x46c554[_0x7e6646(0x243)]((_0x3c4f38,_0x2dbd1f)=>{var _0x3f8100=_0x7e6646;_0x59607c[_0x2dbd1f][_0x3f8100(0x1d4)]=_0x3c4f38;}),_0x77caba[_0x7e6646(0x243)]((_0x43b5ae,_0x8fa779)=>{var _0x831a1c=_0x7e6646;_0x59607c[_0x8fa779][_0x831a1c(0x1fe)]=_0x43b5ae;}),_0x2a7132[_0x7e6646(0x243)]((_0x3b32c3,_0x429be2)=>{var _0x5505f7=_0x7e6646;_0x59607c[_0x429be2][_0x5505f7(0x256)]=_0x3b32c3;}),_0x5df95c['forEach']((_0x470a76,_0x34aefc)=>{_0x59607c[_0x34aefc]['production_date']=_0x470a76;}),_0x4704fd[_0x7e6646(0x243)]((_0x39bf78,_0xa9210f)=>{var _0x2ef106=_0x7e6646;_0x59607c[_0xa9210f][_0x2ef106(0x190)]=_0x39bf78;}),_0x2ff225[_0x7e6646(0x243)]((_0x1094f9,_0x4cf8a5)=>{var _0x57b0ef=_0x7e6646;_0x59607c[_0x4cf8a5][_0x57b0ef(0x1db)]=_0x1094f9;}),_0x4194f4[_0x7e6646(0x243)]((_0x5e3517,_0x340054)=>{var _0x38a4bf=_0x7e6646;_0x59607c[_0x340054][_0x38a4bf(0x253)]=_0x5e3517;}),_0x482e39[_0x7e6646(0x243)]((_0x40ec19,_0x5185f8)=>{_0x59607c[_0x5185f8]['from_room_name']=_0x40ec19;}),_0x122a76[_0x7e6646(0x243)]((_0x5240f7,_0x1449f5)=>{var _0x5ae52b=_0x7e6646;_0x59607c[_0x1449f5][_0x5ae52b(0x1e8)]=_0x5240f7;});const _0x502e52=_0x59607c[_0x7e6646(0x1aa)](_0x3a63d3=>_0x3a63d3[_0x7e6646(0x189)]!=='0'&&_0x3a63d3[_0x7e6646(0x189)]!==''||_0x3a63d3[_0x7e6646(0x1b6)]!=='0'&&_0x3a63d3[_0x7e6646(0x1b6)]!=='');var _0x36c363=0x0;_0x502e52[_0x7e6646(0x243)](_0x1c1296=>{var _0x3266b6=_0x7e6646;parseInt(_0x1c1296[_0x3266b6(0x22a)])<parseInt(_0x1c1296[_0x3266b6(0x189)])&&_0x36c363++;});if(_0x36c363!=0x0)return _0x20c8bf[_0x7e6646(0x1f9)](_0x7e6646(0x193),_0x7e6646(0x1d8)),_0x51dbe5[_0x7e6646(0x1b1)]('back');const _0x357b0e=new transfers_logs();await _0x357b0e[_0x7e6646(0x22b)]();for(let _0x250331=0x0;_0x250331<=_0x122a76[_0x7e6646(0x199)]-0x1;_0x250331++){_0x59607c[_0x250331][_0x7e6646(0x1b0)]=_0x7e6646(0x23b)+_0x357b0e[_0x7e6646(0x1ae)][_0x7e6646(0x1a1)]()[_0x7e6646(0x1a9)](0x8,'0');}const _0x1cf6db=new transfers_finished({'date':_0x4f684d,'from_warehouse':_0x5c483f,'to_warehouse':_0x2cbe5f,'product':_0x502e52,'note':_0x347fda,'invoice':'LOG-TRF-'+_0x357b0e[_0x7e6646(0x1ae)][_0x7e6646(0x1a1)]()[_0x7e6646(0x1a9)](0x8,'0'),'type_of_transaction':_0x7e6646(0x1f4),'type_of_process':'location2location','PO_number':_0x4ccf20,'RequestedBy':_0x625e90,'DateofRequest':_0x33be74,'typeservices':_0x4b1a14,'destination':_0x5ecb42,'deliverydate':_0x1d3d1e,'driver':_0x4d9be4,'plate':_0x2272e9,'van':_0x50ec60,'DRSI':_0x2fa23a,'typevehicle':_0x549fdb,'TSU':_0xf61af7,'TFU':_0x3ef06a}),_0x205ce0=await _0x1cf6db['save']();_0x20c8bf[_0x7e6646(0x1f9)](_0x7e6646(0x252),_0x7e6646(0x238)),_0x51dbe5[_0x7e6646(0x1b1)](_0x7e6646(0x1de)+_0x205ce0[_0x7e6646(0x1a7)]);}catch(_0x23b085){console['log'](_0x23b085),_0x51dbe5[_0x7e6646(0x21a)](0xc8)[_0x7e6646(0x232)]({'errorMessage':_0x23b085[_0x7e6646(0x1b4)]});}}),router['post'](a0_0x2a34f6(0x249),auth,async(_0x26f6f6,_0x4f76a9)=>{var _0x529c9f=a0_0x2a34f6;try{const {date:_0x497f57,from_warehouse:_0xf2c948,FromRoom_name:_0x105132,to_warehouse:_0xc7b160,ToRoom_name:_0xcddfba,prod_name:_0x4cbb21,from_prod_qty:_0x7201c3,from_prod_level:_0x5d3470,from_prod_isle:_0x9a3e61,from_prod_pallet:_0x4fe1e3,to_prod_qty:_0x312e17,to_prod_level:_0x46ab3e,to_prod_isle:_0x20370a,to_prod_pallet:_0xac2300,primary_code:_0x2e90a7,secondary_code:_0x18d321,product_code3:_0x55a1d8,note:_0x1ee4c9,MaxStocks_data2:_0x59b4e6,invoice:_0x4716ae,expiry_date:_0x2e1f9a,PO_number:_0x2bbc7b,ReqBy:_0x4920df,dateofreq:_0x2815e2,typeservicesData:_0x27f198,destination:_0x18bc75,deliverydate:_0x344a42,driver:_0x4189d9,plate:_0x57425e,van:_0x46a7eb,DRSI:_0x2875c5,typevehicle:_0x41ebaa,TSU:_0x101cdb,TFU:_0x6ff56e}=_0x26f6f6[_0x529c9f(0x18d)];if(typeof _0x4cbb21=='string')var _0x352010=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x237)]],_0x136bb5=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x1be)]],_0x20fcd6=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x246)]],_0x4a98fd=[_0x26f6f6['body']['New_Qty_Converted']],_0x20ce7c=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x1a3)]],_0x274027=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x23a)]],_0x7e9d25=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x258)]],_0x37b996=[_0x26f6f6['body'][_0x529c9f(0x1e4)]],_0x18fa55=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x23f)]],_0x33bdee=[_0x26f6f6[_0x529c9f(0x18d)]['primary_unit']],_0x1143c1=[_0x26f6f6[_0x529c9f(0x18d)]['secondary_unit']],_0x1926fc=[_0x26f6f6['body'][_0x529c9f(0x1fe)]],_0x1aa986=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x256)]],_0x216c70=[_0x26f6f6['body'][_0x529c9f(0x221)]],_0x3bfb41=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x186)]],_0x4aa394=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x1db)]],_0x569285=[_0x26f6f6[_0x529c9f(0x18d)]['prod_cat']],_0x52e70b=[_0x26f6f6['body'][_0x529c9f(0x201)]],_0x246f18=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x1fd)]],_0x18f990=[_0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x21e)]],_0x30abc7=[_0x26f6f6['body'][_0x529c9f(0x1ec)]];else var _0x352010=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x237)]],_0x136bb5=[..._0x26f6f6['body'][_0x529c9f(0x1be)]],_0x20fcd6=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x246)]],_0x4a98fd=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x1bb)]],_0x20ce7c=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x1a3)]],_0x274027=[..._0x26f6f6['body'][_0x529c9f(0x23a)]],_0x7e9d25=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x258)]],_0x37b996=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x1e4)]],_0x18fa55=[..._0x26f6f6[_0x529c9f(0x18d)]['MaxStocks_data2']],_0x33bdee=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x19e)]],_0x1143c1=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x1d4)]],_0x1926fc=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x1fe)]],_0x1aa986=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x256)]],_0x216c70=[..._0x26f6f6['body'][_0x529c9f(0x221)]],_0x3bfb41=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x186)]],_0x4aa394=[..._0x26f6f6[_0x529c9f(0x18d)]['maxPerUnit']],_0x569285=[..._0x26f6f6['body'][_0x529c9f(0x253)]],_0x52e70b=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x201)]],_0x246f18=[..._0x26f6f6['body'][_0x529c9f(0x1fd)]],_0x18f990=[..._0x26f6f6[_0x529c9f(0x18d)][_0x529c9f(0x21e)]],_0x30abc7=[..._0x26f6f6['body'][_0x529c9f(0x1ec)]];const _0x2fb444=_0x352010[_0x529c9f(0x1ee)](_0xbc482e=>{return _0xbc482e={'product_name':_0xbc482e};});_0x136bb5[_0x529c9f(0x243)]((_0x46d245,_0x5feee0)=>{_0x2fb444[_0x5feee0]['from_quantity']=_0x46d245;}),_0x20fcd6[_0x529c9f(0x243)]((_0x143f23,_0x4ab7ef)=>{var _0x52f98d=_0x529c9f,_0xe0e84e=_0x143f23[_0x52f98d(0x1d5)](/[A-Za-z]+/)[0x0],_0xad3221=parseInt(_0x143f23['match'](/\d+/)[0x0]);_0x2fb444[_0x4ab7ef][_0x52f98d(0x1c0)]=_0xad3221,_0x2fb444[_0x4ab7ef][_0x52f98d(0x215)]=_0xe0e84e;}),_0x30abc7[_0x529c9f(0x243)]((_0x53f6a5,_0x56a233)=>{var _0x5cbdd1=_0x529c9f;_0x2fb444[_0x56a233][_0x5cbdd1(0x1ec)]=_0x53f6a5;}),_0x18f990[_0x529c9f(0x243)]((_0x5042cf,_0xebcdb1)=>{var _0x398e0a=_0x529c9f;_0x2fb444[_0xebcdb1][_0x398e0a(0x21e)]=_0x5042cf;}),_0x4a98fd[_0x529c9f(0x243)]((_0xacd8f5,_0x443519)=>{_0x2fb444[_0x443519]['to_quantity']=_0xacd8f5;}),_0x20ce7c[_0x529c9f(0x243)]((_0x4feec5,_0x4d5e40)=>{var _0x2ddba8=_0x529c9f,_0x42352a=_0x4feec5[_0x2ddba8(0x1d5)](/[A-Za-z]+/)[0x0],_0x1612f4=parseInt(_0x4feec5[_0x2ddba8(0x1d5)](/\d+/)[0x0]);_0x2fb444[_0x4d5e40][_0x2ddba8(0x19b)]=_0x42352a,_0x2fb444[_0x4d5e40]['to_bay']=_0x1612f4;}),_0x274027[_0x529c9f(0x243)]((_0x58af48,_0xf8e6e3)=>{_0x2fb444[_0xf8e6e3]['primary_code']=_0x58af48;}),_0x7e9d25[_0x529c9f(0x243)]((_0x3c6fe0,_0x255680)=>{var _0x5907fa=_0x529c9f;_0x2fb444[_0x255680][_0x5907fa(0x258)]=_0x3c6fe0;}),_0x37b996[_0x529c9f(0x243)]((_0x3c4da6,_0x2a094a)=>{var _0x5701c9=_0x529c9f;_0x2fb444[_0x2a094a][_0x5701c9(0x24f)]=_0x3c4da6;}),_0x18fa55[_0x529c9f(0x243)]((_0x3dfb6c,_0x514cf6)=>{var _0x2a8e06=_0x529c9f;_0x2fb444[_0x514cf6][_0x2a8e06(0x190)]=_0x3dfb6c;}),_0x33bdee[_0x529c9f(0x243)]((_0x5aaf2e,_0x3bf22b)=>{var _0x44cc21=_0x529c9f;_0x2fb444[_0x3bf22b][_0x44cc21(0x187)]=_0x5aaf2e;}),_0x1143c1[_0x529c9f(0x243)]((_0x16eba6,_0xe27513)=>{var _0x195601=_0x529c9f;_0x2fb444[_0xe27513][_0x195601(0x1d4)]=_0x16eba6;}),_0x1926fc[_0x529c9f(0x243)]((_0x6acf0a,_0x4514b6)=>{var _0x351b25=_0x529c9f;_0x2fb444[_0x4514b6][_0x351b25(0x1fe)]=_0x6acf0a;}),_0x1aa986[_0x529c9f(0x243)]((_0x5a0e76,_0x55a284)=>{_0x2fb444[_0x55a284]['expiry_date']=_0x5a0e76;}),_0x216c70[_0x529c9f(0x243)]((_0x4022d6,_0xf9405)=>{var _0x3018bd=_0x529c9f;_0x2fb444[_0xf9405][_0x3018bd(0x230)]=_0x4022d6;}),_0x3bfb41[_0x529c9f(0x243)]((_0x4b05ad,_0x3031ae)=>{_0x2fb444[_0x3031ae]['maxProducts']=_0x4b05ad;}),_0x4aa394[_0x529c9f(0x243)]((_0x45f89f,_0x126fd4)=>{_0x2fb444[_0x126fd4]['maxPerUnit']=_0x45f89f;}),_0x569285[_0x529c9f(0x243)]((_0x42543b,_0x155693)=>{var _0x3b4b8b=_0x529c9f;_0x2fb444[_0x155693][_0x3b4b8b(0x253)]=_0x42543b;}),_0x52e70b['forEach']((_0x21c219,_0x4c319e)=>{_0x2fb444[_0x4c319e]['from_room_name']=_0x21c219;}),_0x246f18['forEach']((_0x509316,_0x49925e)=>{var _0xfa0406=_0x529c9f;_0x2fb444[_0x49925e][_0xfa0406(0x1e8)]=_0x509316;});const _0xf76fcd=_0x2fb444['filter'](_0x2bf629=>_0x2bf629['to_quantity']!=='0'&&_0x2bf629[_0x529c9f(0x189)]!==''||_0x2bf629[_0x529c9f(0x1b6)]!=='0'&&_0x2bf629[_0x529c9f(0x1b6)]!=='');var _0x446c13=0x0;_0xf76fcd[_0x529c9f(0x243)](_0x1fdd32=>{var _0x43f571=_0x529c9f;parseInt(_0x1fdd32['from_quantity'])<parseInt(_0x1fdd32[_0x43f571(0x189)])&&_0x446c13++;});if(_0x446c13!=0x0)return _0x26f6f6[_0x529c9f(0x1f9)]('errors',_0x529c9f(0x1d8)),_0x4f76a9[_0x529c9f(0x1b1)]('back');const _0xabc919=new invoice_for_transfer();await _0xabc919[_0x529c9f(0x22b)]();for(let _0x5b7a24=0x0;_0x5b7a24<=_0x246f18[_0x529c9f(0x199)]-0x1;_0x5b7a24++){_0x2fb444[_0x5b7a24][_0x529c9f(0x1b0)]=_0x529c9f(0x23d)+_0xabc919[_0x529c9f(0x1ae)]['toString']()['padStart'](0x8,'0');}const _0x1fa36c=new transfers_finished({'date':_0x497f57,'from_warehouse':_0xf2c948,'to_warehouse':_0xf2c948,'product':_0xf76fcd,'note':_0x1ee4c9,'invoice':_0x529c9f(0x23d)+_0xabc919[_0x529c9f(0x1ae)]['toString']()[_0x529c9f(0x1a9)](0x8,'0'),'type_of_process':_0x529c9f(0x213),'type_of_transaction':_0x529c9f(0x21f),'PO_number':_0x2bbc7b,'RequestedBy':_0x4920df,'DateofRequest':_0x2815e2,'typeservices':_0x27f198,'destination':_0x18bc75,'deliverydate':_0x344a42,'driver':_0x4189d9,'plate':_0x57425e,'van':_0x46a7eb,'DRSI':_0x2875c5,'typevehicle':_0x41ebaa,'TSU':_0x101cdb,'TFU':_0x6ff56e}),_0x1ce673=await _0x1fa36c[_0x529c9f(0x22b)]();_0x26f6f6[_0x529c9f(0x1f9)](_0x529c9f(0x252),_0x529c9f(0x238)),_0x4f76a9[_0x529c9f(0x1b1)](_0x529c9f(0x1de)+_0x1ce673[_0x529c9f(0x1a7)]);}catch(_0x24caff){console[_0x529c9f(0x200)](_0x24caff),_0x4f76a9[_0x529c9f(0x21a)](0xc8)[_0x529c9f(0x232)]({'errorMessage':_0x24caff[_0x529c9f(0x1b4)]});}}),router[a0_0x2a34f6(0x214)](a0_0x2a34f6(0x20a),auth,async(_0x337872,_0x1168bd)=>{var _0x243e57=a0_0x2a34f6;try{const {date:_0x3172a2,from_warehouse:_0x3cf43b,FromRoom_name:_0x2f4838,to_warehouse:_0x54d0b8,ToRoom_name:_0xa903c0,prod_name:_0x2bff6c,from_prod_qty:_0x2adf98,from_prod_level:_0x59762e,from_prod_isle:_0x332afb,from_prod_pallet:_0x4d4a89,to_prod_qty:_0x2f1bc2,to_prod_level:_0x4fe899,to_prod_isle:_0x44dd69,to_prod_pallet:_0x115e8d,primary_code:_0x2620d5,secondary_code:_0xa1af2a,product_code3:_0x543d45,note:_0x5ce7b2,MaxStocks_data2:_0x1feccc,invoice:_0x44556e,expiry_date:_0x3fb8da,PO_number_loc:_0x5f1f61,ReqBy_loc:_0x316ab0,dateofreq_loc:_0x3e0883,typeservices_loc_Data:_0x2ca19c,destination_loc:_0x3c9b98,deliverydate_loc:_0x480c53,driver_loc:_0x2f8941,plate_loc:_0x59b406,van_loc:_0x4bc739,DRSI_loc:_0x421092,typevehicle_loc:_0x3f641e,TSU_loc:_0x3b81be,TFU_loc:_0x29dd2b}=_0x337872[_0x243e57(0x18d)];if(typeof _0x2bff6c==_0x243e57(0x1f5))var _0x362231=[_0x337872[_0x243e57(0x18d)]['prod_name']],_0x4bf7a3=[_0x337872[_0x243e57(0x18d)][_0x243e57(0x1be)]],_0x24e404=[_0x337872[_0x243e57(0x18d)][_0x243e57(0x246)]],_0x38b09b=[_0x337872['body']['New_Qty_Converted']],_0x1c9372=[_0x337872[_0x243e57(0x18d)][_0x243e57(0x1a3)]],_0x542b9a=[_0x337872[_0x243e57(0x18d)]['primary_code']],_0x10da93=[_0x337872[_0x243e57(0x18d)]['secondary_code']],_0x356358=[_0x337872['body']['product_code3']],_0x429f01=[_0x337872[_0x243e57(0x18d)][_0x243e57(0x23f)]],_0x201c01=[_0x337872[_0x243e57(0x18d)][_0x243e57(0x19e)]],_0x48b7a9=[_0x337872['body'][_0x243e57(0x1d4)]],_0x28f6f2=[_0x337872[_0x243e57(0x18d)][_0x243e57(0x1fe)]],_0x3a4263=[_0x337872['body'][_0x243e57(0x256)]],_0x3d4bec=[_0x337872['body']['product_date']],_0x119ce8=[_0x337872[_0x243e57(0x18d)]['MaxStocks_data']],_0x331c1e=[_0x337872[_0x243e57(0x18d)][_0x243e57(0x1db)]],_0x41ef66=[_0x337872[_0x243e57(0x18d)][_0x243e57(0x253)]],_0x9da0c5=[_0x337872['body']['RoomAssigned']],_0x2211ef=[_0x337872[_0x243e57(0x18d)][_0x243e57(0x1fd)]],_0x4b5bcd=[_0x337872[_0x243e57(0x18d)][_0x243e57(0x21e)]],_0x180761=[_0x337872['body'][_0x243e57(0x1ec)]];else var _0x362231=[..._0x337872['body'][_0x243e57(0x237)]],_0x4bf7a3=[..._0x337872[_0x243e57(0x18d)][_0x243e57(0x1be)]],_0x24e404=[..._0x337872[_0x243e57(0x18d)][_0x243e57(0x246)]],_0x38b09b=[..._0x337872['body'][_0x243e57(0x1bb)]],_0x1c9372=[..._0x337872[_0x243e57(0x18d)]['to_prod_level']],_0x542b9a=[..._0x337872[_0x243e57(0x18d)][_0x243e57(0x23a)]],_0x10da93=[..._0x337872[_0x243e57(0x18d)][_0x243e57(0x258)]],_0x356358=[..._0x337872['body'][_0x243e57(0x1e4)]],_0x429f01=[..._0x337872[_0x243e57(0x18d)]['MaxStocks_data2']],_0x201c01=[..._0x337872['body'][_0x243e57(0x19e)]],_0x48b7a9=[..._0x337872[_0x243e57(0x18d)][_0x243e57(0x1d4)]],_0x28f6f2=[..._0x337872[_0x243e57(0x18d)]['batch_code']],_0x3a4263=[..._0x337872[_0x243e57(0x18d)][_0x243e57(0x256)]],_0x3d4bec=[..._0x337872[_0x243e57(0x18d)][_0x243e57(0x221)]],_0x119ce8=[..._0x337872['body'][_0x243e57(0x186)]],_0x331c1e=[..._0x337872[_0x243e57(0x18d)][_0x243e57(0x1db)]],_0x41ef66=[..._0x337872[_0x243e57(0x18d)][_0x243e57(0x253)]],_0x9da0c5=[..._0x337872[_0x243e57(0x18d)]['RoomAssigned']],_0x2211ef=[..._0x337872[_0x243e57(0x18d)][_0x243e57(0x1fd)]],_0x4b5bcd=[..._0x337872[_0x243e57(0x18d)]['from_invoice']],_0x180761=[..._0x337872[_0x243e57(0x18d)][_0x243e57(0x1ec)]];const _0x31a0e3=_0x362231[_0x243e57(0x1ee)](_0x222ab0=>{return _0x222ab0={'product_name':_0x222ab0};});_0x4bf7a3[_0x243e57(0x243)]((_0x46a406,_0x3f6b5f)=>{var _0x42a279=_0x243e57;_0x31a0e3[_0x3f6b5f][_0x42a279(0x22a)]=_0x46a406;}),_0x24e404[_0x243e57(0x243)]((_0x3aa268,_0x1ad79c)=>{var _0x522e22=_0x243e57,_0x869e2e=_0x3aa268[_0x522e22(0x1d5)](/[A-Za-z]+/)[0x0],_0x2f868e=parseInt(_0x3aa268['match'](/\d+/)[0x0]);_0x31a0e3[_0x1ad79c][_0x522e22(0x1c0)]=_0x2f868e,_0x31a0e3[_0x1ad79c][_0x522e22(0x215)]=_0x869e2e;}),_0x180761['forEach']((_0x4608b4,_0x22a6a2)=>{var _0x391e0d=_0x243e57;_0x31a0e3[_0x22a6a2][_0x391e0d(0x1ec)]=_0x4608b4;}),_0x4b5bcd[_0x243e57(0x243)]((_0x26ef91,_0x2d9228)=>{_0x31a0e3[_0x2d9228]['from_invoice']=_0x26ef91;}),_0x38b09b['forEach']((_0x12e2b9,_0x2d333e)=>{var _0x9769b9=_0x243e57;_0x31a0e3[_0x2d333e][_0x9769b9(0x189)]=_0x12e2b9;}),_0x1c9372[_0x243e57(0x243)]((_0x5d89c5,_0x365c19)=>{var _0x5d96d7=_0x243e57,_0x27f416=_0x5d89c5[_0x5d96d7(0x1d5)](/[A-Za-z]+/)[0x0],_0x243a1b=parseInt(_0x5d89c5['match'](/\d+/)[0x0]);_0x31a0e3[_0x365c19][_0x5d96d7(0x19b)]=_0x27f416,_0x31a0e3[_0x365c19]['to_bay']=_0x243a1b;}),_0x542b9a[_0x243e57(0x243)]((_0x1904ea,_0x4aabfe)=>{var _0x2dd56d=_0x243e57;_0x31a0e3[_0x4aabfe][_0x2dd56d(0x23a)]=_0x1904ea;}),_0x10da93['forEach']((_0x15eb15,_0x344a16)=>{_0x31a0e3[_0x344a16]['secondary_code']=_0x15eb15;}),_0x356358[_0x243e57(0x243)]((_0x20dc01,_0x2f7364)=>{var _0x2cb809=_0x243e57;_0x31a0e3[_0x2f7364][_0x2cb809(0x24f)]=_0x20dc01;}),_0x429f01[_0x243e57(0x243)]((_0x315e71,_0x19137a)=>{var _0xe07cff=_0x243e57;_0x31a0e3[_0x19137a][_0xe07cff(0x190)]=_0x315e71;}),_0x201c01[_0x243e57(0x243)]((_0x51d316,_0x516bc0)=>{_0x31a0e3[_0x516bc0]['unit']=_0x51d316;}),_0x48b7a9[_0x243e57(0x243)]((_0x43a6da,_0xfa0b59)=>{var _0x3bfc01=_0x243e57;_0x31a0e3[_0xfa0b59][_0x3bfc01(0x1d4)]=_0x43a6da;}),_0x28f6f2[_0x243e57(0x243)]((_0x1422df,_0x2ea836)=>{_0x31a0e3[_0x2ea836]['batch_code']=_0x1422df;}),_0x3a4263[_0x243e57(0x243)]((_0x518271,_0x1a67fb)=>{var _0x4540ca=_0x243e57;_0x31a0e3[_0x1a67fb][_0x4540ca(0x256)]=_0x518271;}),_0x3d4bec[_0x243e57(0x243)]((_0x40c298,_0x5cc3ed)=>{var _0x4ad48e=_0x243e57;_0x31a0e3[_0x5cc3ed][_0x4ad48e(0x230)]=_0x40c298;}),_0x119ce8[_0x243e57(0x243)]((_0x41dac9,_0x5256ef)=>{_0x31a0e3[_0x5256ef]['maxProducts']=_0x41dac9;}),_0x331c1e[_0x243e57(0x243)]((_0x40a6d2,_0x48d194)=>{var _0x3dd51f=_0x243e57;_0x31a0e3[_0x48d194][_0x3dd51f(0x1db)]=_0x40a6d2;}),_0x41ef66[_0x243e57(0x243)]((_0x5ca15b,_0x495487)=>{var _0x567e1f=_0x243e57;_0x31a0e3[_0x495487][_0x567e1f(0x253)]=_0x5ca15b;}),_0x9da0c5[_0x243e57(0x243)]((_0x39e768,_0x262318)=>{var _0x49f9db=_0x243e57;_0x31a0e3[_0x262318][_0x49f9db(0x257)]=_0x39e768;}),_0x2211ef[_0x243e57(0x243)]((_0x288784,_0x5cfdd5)=>{var _0x8a9a16=_0x243e57;_0x31a0e3[_0x5cfdd5][_0x8a9a16(0x1e8)]=_0x288784;});const _0xce000d=_0x31a0e3[_0x243e57(0x1aa)](_0x3801c1=>_0x3801c1[_0x243e57(0x189)]!=='0'&&_0x3801c1[_0x243e57(0x189)]!==''||_0x3801c1[_0x243e57(0x1b6)]!=='0'&&_0x3801c1[_0x243e57(0x1b6)]!=='');var _0x483a57=0x0;_0xce000d[_0x243e57(0x243)](_0x5a5e9b=>{var _0x419915=_0x243e57;parseInt(_0x5a5e9b[_0x419915(0x22a)])<parseInt(_0x5a5e9b[_0x419915(0x189)])&&_0x483a57++;});if(_0x483a57!=0x0)return _0x337872[_0x243e57(0x1f9)]('errors',_0x243e57(0x1d8)),_0x1168bd[_0x243e57(0x1b1)](_0x243e57(0x1c8));const _0x30387b=new invoice_for_transfer();await _0x30387b['save']();for(let _0x1a0b1f=0x0;_0x1a0b1f<=_0x2211ef[_0x243e57(0x199)]-0x1;_0x1a0b1f++){_0x31a0e3[_0x1a0b1f]['To_invoice']=_0x243e57(0x23d)+_0x30387b[_0x243e57(0x1ae)]['toString']()[_0x243e57(0x1a9)](0x8,'0');}const _0x3ca8ee=new transfers_finished({'date':_0x3172a2,'from_warehouse':_0x3cf43b,'to_warehouse':_0x54d0b8,'product':_0xce000d,'note':_0x5ce7b2,'invoice':_0x243e57(0x23d)+_0x30387b[_0x243e57(0x1ae)][_0x243e57(0x1a1)]()[_0x243e57(0x1a9)](0x8,'0'),'type_of_transaction':_0x243e57(0x21f),'type_of_process':_0x243e57(0x1ed),'PO_number':_0x5f1f61,'RequestedBy':_0x316ab0,'DateofRequest':_0x3e0883,'typeservices':_0x2ca19c,'destination':_0x3c9b98,'deliverydate':_0x480c53,'driver':_0x2f8941,'plate':_0x59b406,'van':_0x4bc739,'DRSI':_0x421092,'typevehicle':_0x3f641e,'TSU':_0x3b81be,'TFU':_0x29dd2b}),_0x101549=await _0x3ca8ee[_0x243e57(0x22b)]();_0x337872[_0x243e57(0x1f9)](_0x243e57(0x252),_0x243e57(0x238)),_0x1168bd['redirect'](_0x243e57(0x1de)+_0x101549['_id']);}catch(_0x56ca5e){console[_0x243e57(0x200)](_0x56ca5e),_0x1168bd[_0x243e57(0x21a)](0xc8)[_0x243e57(0x232)]({'errorMessage':_0x56ca5e[_0x243e57(0x1b4)]});}}),router[a0_0x2a34f6(0x228)]('/preview/:id',auth,async(_0x5eed34,_0x37a998)=>{var _0x4db5eb=a0_0x2a34f6;try{const {username:_0xf99a0c,email:_0x49c354,role:_0x3461ed}=_0x5eed34[_0x4db5eb(0x1ef)],_0x366ad5=_0x5eed34[_0x4db5eb(0x1ef)],_0x1f7edf=await profile[_0x4db5eb(0x195)]({'email':_0x366ad5[_0x4db5eb(0x19d)]}),_0x34bb25=await master_shop[_0x4db5eb(0x204)](),_0x1df219=await transfers_finished['findById'](_0x5eed34[_0x4db5eb(0x231)]['id']);let _0x220f5d;if(_0x366ad5[_0x4db5eb(0x20c)]=='staff'){const _0x3858b0=await staff[_0x4db5eb(0x195)]({'email':_0x366ad5[_0x4db5eb(0x19d)]});_0x220f5d=await warehouse[_0x4db5eb(0x204)]({'status':'Enabled','name':_0x3858b0['warehouse'],'warehouse_category':_0x4db5eb(0x24d)});}else _0x220f5d=await warehouse['find']({'status':'Enabled','warehouse_category':_0x4db5eb(0x24d)});const _0x61bb46=await warehouse[_0x4db5eb(0x1b9)]([{'$match':{'name':_0x1df219[_0x4db5eb(0x223)],'warehouse_category':_0x4db5eb(0x24d)}},{'$unwind':_0x4db5eb(0x234)},{'$group':{'_id':_0x4db5eb(0x22d),'name':{'$first':_0x4db5eb(0x1dc)},'product_stock':{'$first':_0x4db5eb(0x20f)},'bay':{'$first':_0x4db5eb(0x20e)},'bin':{'$first':_0x4db5eb(0x1cb)},'type':{'$first':_0x4db5eb(0x1cc)},'floorlevel':{'$first':_0x4db5eb(0x1ff)},'primary_code':{'$first':_0x4db5eb(0x1b3)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x4db5eb(0x20b)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x4db5eb(0x1b5)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0x4db5eb(0x240)},'warehoue_name':{'$first':_0x4db5eb(0x1cd)}}}]),_0x2e5407=await product[_0x4db5eb(0x204)]({});if(_0x34bb25[0x0][_0x4db5eb(0x1a8)]==_0x4db5eb(0x23c)){var _0x1abdcd=users[_0x4db5eb(0x1e2)];console[_0x4db5eb(0x200)](_0x1abdcd);}else{if(_0x34bb25[0x0][_0x4db5eb(0x1a8)]=='Hindi')var _0x1abdcd=users['Hindi'];else{if(_0x34bb25[0x0][_0x4db5eb(0x1a8)]=='German')var _0x1abdcd=users[_0x4db5eb(0x225)];else{if(_0x34bb25[0x0][_0x4db5eb(0x1a8)]=='Spanish')var _0x1abdcd=users[_0x4db5eb(0x216)];else{if(_0x34bb25[0x0][_0x4db5eb(0x1a8)]=='French')var _0x1abdcd=users[_0x4db5eb(0x194)];else{if(_0x34bb25[0x0]['language']==_0x4db5eb(0x227))var _0x1abdcd=users[_0x4db5eb(0x1e6)];else{if(_0x34bb25[0x0][_0x4db5eb(0x1a8)]==_0x4db5eb(0x20d))var _0x1abdcd=users['Chinese'];else{if(_0x34bb25[0x0][_0x4db5eb(0x1a8)]==_0x4db5eb(0x1bd))var _0x1abdcd=users['Arabic'];}}}}}}}_0x37a998['render'](_0x4db5eb(0x198),{'success':_0x5eed34[_0x4db5eb(0x1f9)](_0x4db5eb(0x252)),'errors':_0x5eed34[_0x4db5eb(0x1f9)]('errors'),'role':_0x366ad5,'profile':_0x1f7edf,'master_shop':_0x34bb25,'warehouse':_0x220f5d,'transfer':_0x1df219,'stock':_0x61bb46,'unit':_0x2e5407,'language':_0x1abdcd});}catch(_0x3d16e2){console[_0x4db5eb(0x200)](_0x3d16e2);}}),router['post'](a0_0x2a34f6(0x1fa),auth,async(_0x279626,_0x4abd6c)=>{var _0x177229=a0_0x2a34f6;try{const {invoice:_0xd4d162,from_warehouse:_0x5486c4,FromRoom_name:_0x270977,to_warehouse:_0x5d9a00,ToRoom_name:_0x38981e}=_0x279626[_0x177229(0x18d)],_0x4de214=await transfers_finished[_0x177229(0x210)](_0x279626[_0x177229(0x231)]['id']),_0x1a4f32=_0x4de214['product'][_0x177229(0x1ee)](async _0x1db00c=>{var _0xb2ed22=_0x177229;if(_0x1db00c[_0xb2ed22(0x189)]>0x0){var _0x3c0488=await warehouse['findOne']({'name':_0x5486c4,'room':_0x1db00c[_0xb2ed22(0x257)]});const _0x3bcf1a=_0x3c0488[_0xb2ed22(0x19c)]['map'](_0xf6d19e=>{var _0x50916c=_0xb2ed22;_0xf6d19e[_0x50916c(0x1a7)]==_0x1db00c['id_transaction']&&(_0xf6d19e[_0x50916c(0x1dd)]=Math[_0x50916c(0x1c3)](0x0,Math['abs'](_0xf6d19e[_0x50916c(0x1dd)])-Math['abs'](_0x1db00c[_0x50916c(0x189)])),console[_0x50916c(0x200)](_0xf6d19e['product_stock']));});}return _0x3c0488;});Promise['all'](_0x1a4f32)[_0x177229(0x1ac)](async _0x3c1200=>{var _0x3bb77d=_0x177229;try{for(const _0x288b43 of _0x3c1200){await _0x288b43['save']();}const _0x473e9d=_0x4de214[_0x3bb77d(0x1b2)]['map'](async _0x13ca2a=>{var _0x2322c9=_0x3bb77d,_0x3e6610=await warehouse[_0x2322c9(0x195)]({'name':_0x5d9a00,'room':_0x13ca2a[_0x2322c9(0x1e8)]});if(_0x13ca2a[_0x2322c9(0x189)]>0x0){var _0x1fd2e2=0x0;const _0x3ba606=_0x3e6610['product_details'][_0x2322c9(0x1ee)](_0x3fd27e=>{var _0x285a94=_0x2322c9;_0x3fd27e[_0x285a94(0x1a2)]==_0x13ca2a[_0x285a94(0x1a2)]&&_0x3fd27e[_0x285a94(0x1e3)]==_0x13ca2a[_0x285a94(0x1bc)]&&_0x3fd27e['expiry_date']==_0x13ca2a[_0x285a94(0x256)]&&_0x3fd27e[_0x285a94(0x230)]==_0x13ca2a[_0x285a94(0x230)]&&_0x3fd27e['batch_code']==_0x13ca2a[_0x285a94(0x1fe)]&&_0x3fd27e['invoice']==_0x13ca2a[_0x285a94(0x1b0)]&&(typeof _0x13ca2a[_0x285a94(0x1ec)]==_0x285a94(0x1ab)?(console[_0x285a94(0x200)](_0x285a94(0x24e),_0x3fd27e['product_stock']+_0x285a94(0x1e0)+_0x3fd27e[_0x285a94(0x1a7)]+_0x285a94(0x1e1)+Math['abs'](_0x3fd27e[_0x285a94(0x1dd)])+Math[_0x285a94(0x1e9)](_0x13ca2a[_0x285a94(0x189)])),_0x3fd27e[_0x285a94(0x1dd)]=Math[_0x285a94(0x1e9)](_0x3fd27e['product_stock'])+Math['abs'](_0x13ca2a['to_quantity'])):_0x3fd27e[_0x285a94(0x1dd)]=Math[_0x285a94(0x1e9)](_0x3fd27e[_0x285a94(0x1dd)])+Math[_0x285a94(0x1e9)](_0x13ca2a['to_quantity']),_0x1fd2e2++);});_0x1fd2e2=='0'&&(_0x3e6610[_0x2322c9(0x19c)]=_0x3e6610[_0x2322c9(0x19c)][_0x2322c9(0x206)]({'product_name':_0x13ca2a['product_name'],'product_stock':_0x13ca2a[_0x2322c9(0x189)],'bay':_0x13ca2a[_0x2322c9(0x1bc)],'level':_0x13ca2a[_0x2322c9(0x19b)],'product_code':_0x13ca2a[_0x2322c9(0x24f)],'primary_code':_0x13ca2a[_0x2322c9(0x23a)],'secondary_code':_0x13ca2a['secondary_code'],'expiry_date':_0x13ca2a[_0x2322c9(0x256)],'production_date':_0x13ca2a['production_date'],'maxProducts':_0x13ca2a[_0x2322c9(0x190)],'batch_code':_0x13ca2a['batch_code'],'secondary_unit':_0x13ca2a['secondary_unit'],'unit':_0x13ca2a['unit'],'maxProducts':_0x13ca2a[_0x2322c9(0x190)],'maxPerUnit':_0x13ca2a['maxPerUnit'],'invoice':_0x13ca2a['To_invoice']}));}return _0x3e6610;});Promise[_0x3bb77d(0x226)](_0x473e9d)['then'](async _0xa0684b=>{var _0x2897b0=_0x3bb77d;try{console[_0x2897b0(0x200)](_0x4de214[_0x2897b0(0x241)]);if(_0x4de214[_0x2897b0(0x241)]!=_0x2897b0(0x1ed))for(const _0x50d5b7 of _0xa0684b){await warehouse[_0x2897b0(0x235)]({'_id':_0x50d5b7['_id']},{'$addToSet':{'product_details':{'$each':_0x50d5b7[_0x2897b0(0x19c)]}}});}_0x4de214[_0x2897b0(0x202)]=_0x2897b0(0x21b);const _0x368938=await _0x4de214['save'](),_0xa846ef=await master_shop[_0x2897b0(0x204)](),_0x227c28=await email_settings[_0x2897b0(0x195)](),_0x1d6cb1=await supervisor_settings['find']();var _0xed90a4=_0x4de214['product'],_0x35361b='',_0x223eea;for(_0x223eea in _0xed90a4){var _0x93a8b8='FG';_0x4de214[_0x2897b0(0x236)]==_0x2897b0(0x1af)&&(_0x93a8b8='DG'),_0x35361b+='<tr>'+_0x2897b0(0x205)+_0xed90a4[_0x223eea][_0x2897b0(0x1a2)]+_0x2897b0(0x233)+_0x2897b0(0x205)+_0xed90a4[_0x223eea][_0x2897b0(0x24f)]+'</td>'+_0x2897b0(0x205)+_0xed90a4[_0x223eea][_0x2897b0(0x189)]+_0x2897b0(0x233)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xed90a4[_0x223eea][_0x2897b0(0x187)]+_0x2897b0(0x233)+_0x2897b0(0x205)+_0xed90a4[_0x223eea][_0x2897b0(0x1d4)]+_0x2897b0(0x233)+_0x2897b0(0x205)+_0x4de214[_0x2897b0(0x236)]+_0x2897b0(0x233)+_0x2897b0(0x205)+_0xed90a4[_0x223eea][_0x2897b0(0x1e8)]+_0x2897b0(0x233)+_0x2897b0(0x205)+_0x93a8b8+_0xed90a4[_0x223eea][_0x2897b0(0x1bc)]+_0x2897b0(0x233)+_0x2897b0(0x255);}_0x279626[_0x2897b0(0x1f9)]('success',_0x2897b0(0x1cf)),_0x4abd6c['redirect'](_0x2897b0(0x211)+_0x368938[_0x2897b0(0x1a7)]);}catch(_0x5366f5){console['error'](_0x5366f5),_0x4abd6c[_0x2897b0(0x21a)](0x1f4)['json']({'error':_0x2897b0(0x18f)});}})[_0x3bb77d(0x222)](_0x5a9ca1=>{var _0x23a51f=_0x3bb77d;console['error'](_0x5a9ca1),_0x4abd6c['status'](0x1f4)['json']({'error':_0x23a51f(0x1a6)});});}catch(_0x2ea9f8){console[_0x3bb77d(0x1b8)](_0x2ea9f8),_0x4abd6c[_0x3bb77d(0x21a)](0x1f4)[_0x3bb77d(0x232)]({'error':_0x3bb77d(0x1f1)});}})[_0x177229(0x222)](_0x4338e1=>{var _0xd101aa=_0x177229;console[_0xd101aa(0x1b8)](_0x4338e1),_0x4abd6c[_0xd101aa(0x21a)](0x1f4)['json']({'error':_0xd101aa(0x1a6)});});}catch(_0x49ae22){_0x4abd6c[_0x177229(0x232)]({'message':_0x49ae22[_0x177229(0x1b4)]});}});function a0_0x402c(){var _0x37ed0e=['forEach','22601dhMstZ','Rack\x202','from_prod_level2','$invoice','render','/view/add_transfer','There\x27s\x20a\x20error\x20in\x20this\x20transaction','/view/add_transfer_logs','express','Finished\x20Goods','here2','product_code','/transfer/view','exports','success','prod_cat','$_id','</tr>','expiry_date','from_room_name','secondary_code','Rack\x201','22313456nGovow','MaxStocks_data','unit','$product_details.unit','to_quantity','$product_details.secondary_code','Arabic','4469244woMcDb','body','$product.from_room_name','To\x20An\x20error\x20occurred\x20while\x20saving\x20data.','maxProducts','Enabled','/transfer_finished/view','errors','French','findOne','floor','split','edit_transfer_finished_view','length','$product_details.batch_code','to_level','product_details','email','primary_unit','7iMvzwv','/view_logs','toString','product_name','to_prod_level','$product_details.secondary_unit','991784QXziRX','An\x20error\x20occurred.','_id','language','padStart','filter','undefined','then','$finalize','invoice_init','DRY\x20GOODS','To_invoice','redirect','product','$product_details.primary_code','message','$product_details.rack','to_floorlevel','../middleware/auth','error','aggregate','warehouse','New_Qty_Converted','to_bay','Arabic\x20(ae)','from_prod_qty','invoice','from_bay','choos_transfer_logs','415xfhcdw','max','$product_details.invoice','9NVgHOE','/CheckingWarehouse','/view','back','TRFF-','to_room','$product_details.bin','$product_details.type','$name','6892566fcoljO','Transfer\x20Finalize\x20Successfully','12070410mdSlNc','../public/language/languages.json','/barcode_scanner','Enclosed','secondary_unit','match','$product_details.maxPerUnit','from_prod_level','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','Hindi','$product','maxPerUnit','$product_details.product_name','product_stock','/transfer_finished/preview/','/view/:id','\x20<>\x20','\x20<=>\x20','English','bay','product_code3','getMonth','Portuguese','$product_details.expiry_date','to_room_name','abs','Router','date','id_transaction','location2location','map','user','$product.to_room_name','An\x20error\x20occurred\x20while\x20saving\x20data.','102STzsMF','transfer_finished','logs','string','slice','$product_details.production_date','$product_details.level','flash','/preview/:id','nodemailer','$from_warehouse','ToRoomAssigned','batch_code','$product_details.floorlevel','log','RoomAssigned','finalize','/view/choose','find','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','concat','push','../models/all_models','staff','/view/add_transfer_loc','$product_details.product_code','role','Chinese','$product_details.bay','$product_details.product_stock','findById','/picking_list/PDF_transfer/','add_transfer_finished','bin2bin','post','from_level','Spanish','Transfer\x20Edit\x20Successfully','$product_details.storage','48728pwdHDV','status','True','from_room','to_prod_qty','from_invoice','own','note','product_date','catch','from_warehouse','choos_transfer','German','all','Portuguese\x20(BR)','get','$date','from_quantity','save','$to_warehouse','$product_details._id','FROZEN\x20GOODS','edit_transfer_finished','production_date','params','json','</td>','$product_details','updateOne','to_warehouse','prod_name','Product\x20Transfer\x20successfully','transfer_finished_logs','primary_code','LOG-TRF-','English\x20(US)','TRF-','transfer_data','MaxStocks_data2','$room','type_of_process','/view/addlog'];a0_0x402c=function(){return _0x37ed0e;};return a0_0x402c();}function BayBinSelected(_0x528359,_0x172750){var _0x225d55=a0_0x2a34f6,_0x53e949=[];let _0x16c1e2=[];var _0x3441ab=[];if(_0x528359=='DRY\x20GOODS'){switch(_0x172750){case _0x225d55(0x184):_0x53e949=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10];break;case _0x225d55(0x245):_0x53e949=[0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20];break;}_0x3441ab=['DG'];}else{if(_0x528359==_0x225d55(0x22e)){switch(_0x172750){case _0x225d55(0x184):_0x53e949=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9];break;case _0x225d55(0x245):_0x53e949=[0xa,0xb,0xc,0xd,0xe,0xf,0x10,0x11,0x12];break;}_0x3441ab=['FG'];}}return{'levels':_0x53e949,'identify':_0x3441ab};}router[a0_0x2a34f6(0x228)](a0_0x2a34f6(0x1df),auth,async(_0x1ad230,_0x130906)=>{var _0x18bec5=a0_0x2a34f6;try{const {username:_0x2fe488,email:_0x462f33,role:_0x29cb25}=_0x1ad230[_0x18bec5(0x1ef)],_0x507af3=_0x1ad230[_0x18bec5(0x1ef)],_0x539ed=await profile[_0x18bec5(0x195)]({'email':_0x507af3['email']}),_0x2faefb=await master_shop[_0x18bec5(0x204)](),_0xb537be=await transfers_finished[_0x18bec5(0x210)](_0x1ad230[_0x18bec5(0x231)]['id']);let _0x4b1da6=new Date(_0xb537be['expiry_date']),_0x134395=('0'+_0x4b1da6['getDate']())[_0x18bec5(0x1f6)](-0x2),_0x215fa8=('0'+(_0x4b1da6[_0x18bec5(0x1e5)]()+0x1))['slice'](-0x2),_0x3ca168=_0x4b1da6['getFullYear'](),_0x287f3d=_0x3ca168+'-'+_0x215fa8+'-'+_0x134395,_0x5ba2be;if(_0x507af3[_0x18bec5(0x20c)]==_0x18bec5(0x209)){const _0x5f0d45=await staff[_0x18bec5(0x195)]({'email':_0x507af3[_0x18bec5(0x19d)]});_0x5ba2be=await warehouse[_0x18bec5(0x204)]({'status':'Enabled','name':_0x5f0d45[_0x18bec5(0x1ba)],'warehouse_category':_0x18bec5(0x24d)});}else _0x5ba2be=await warehouse[_0x18bec5(0x204)]({'status':_0x18bec5(0x191),'warehouse_category':_0x18bec5(0x24d)});const _0x29f9ff=await warehouse[_0x18bec5(0x1b9)]([{'$match':{'name':_0xb537be[_0x18bec5(0x223)],'room':_0xb537be[_0x18bec5(0x21c)]}},{'$unwind':_0x18bec5(0x234)},{'$group':{'_id':_0x18bec5(0x22d),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x18bec5(0x20f)},'bay':{'$first':_0x18bec5(0x20e)},'bin':{'$first':_0x18bec5(0x1cb)},'type':{'$first':_0x18bec5(0x1cc)},'floorlevel':{'$first':_0x18bec5(0x1ff)},'primary_code':{'$first':_0x18bec5(0x1b3)},'secondary_code':{'$first':_0x18bec5(0x18a)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x18bec5(0x218)},'rack':{'$first':_0x18bec5(0x1b5)}}}]);var _0x323d9a=[0x1,0x2,0x3,0x4],_0x5b4ccb=['A','B','C','D','E','F','G','H','I','J'],_0x595f4f=['Ambient',_0x18bec5(0x1d3)];const _0x14dc83=await product[_0x18bec5(0x204)]({}),_0x373d0f=BayBinSelected(_0xb537be['to_warehouse'],_0xb537be['to_room']);if(_0x2faefb[0x0][_0x18bec5(0x1a8)]==_0x18bec5(0x23c)){var _0x560b86=users[_0x18bec5(0x1e2)];console[_0x18bec5(0x200)](_0x560b86);}else{if(_0x2faefb[0x0][_0x18bec5(0x1a8)]==_0x18bec5(0x1d9))var _0x560b86=users[_0x18bec5(0x1d9)];else{if(_0x2faefb[0x0][_0x18bec5(0x1a8)]==_0x18bec5(0x225))var _0x560b86=users[_0x18bec5(0x225)];else{if(_0x2faefb[0x0][_0x18bec5(0x1a8)]==_0x18bec5(0x216))var _0x560b86=users[_0x18bec5(0x216)];else{if(_0x2faefb[0x0][_0x18bec5(0x1a8)]==_0x18bec5(0x194))var _0x560b86=users[_0x18bec5(0x194)];else{if(_0x2faefb[0x0]['language']=='Portuguese\x20(BR)')var _0x560b86=users[_0x18bec5(0x1e6)];else{if(_0x2faefb[0x0]['language']==_0x18bec5(0x20d))var _0x560b86=users[_0x18bec5(0x20d)];else{if(_0x2faefb[0x0][_0x18bec5(0x1a8)]==_0x18bec5(0x1bd))var _0x560b86=users[_0x18bec5(0x18b)];}}}}}}}_0x130906[_0x18bec5(0x248)](_0x18bec5(0x22f),{'success':_0x1ad230[_0x18bec5(0x1f9)]('success'),'errors':_0x1ad230['flash']('errors'),'role':_0x507af3,'profile':_0x539ed,'master_shop':_0x2faefb,'warehouse':_0x5ba2be,'transfer':_0xb537be,'stock':_0x29f9ff,'unit':_0x14dc83,'language':_0x560b86,'levels':_0x323d9a,'Isle':_0x5b4ccb,'rooms_data':_0x595f4f,'ed_fullDate':_0x287f3d,'dataSelected':_0x373d0f});}catch(_0x317366){console[_0x18bec5(0x200)](_0x317366);}}),router[a0_0x2a34f6(0x214)](a0_0x2a34f6(0x1df),auth,async(_0x5bad3a,_0x1bd931)=>{var _0x408525=a0_0x2a34f6;try{const _0x37edaf=_0x5bad3a[_0x408525(0x231)]['id'];console[_0x408525(0x200)](_0x5bad3a[_0x408525(0x18d)]);const _0x89fe0a=await transfers_finished[_0x408525(0x210)](_0x37edaf);console['log'](_0x408525(0x23e),_0x89fe0a);const {date:_0x14b5e3,from_warehouse:_0x2a6bdc,FromRoom_name:_0x195965,to_warehouse:_0x3cbc00,ToRoom_name:_0x8abd87,prod_name:_0x192b7c,from_prod_qty:_0x22e2e7,from_prod_level:_0x518bba,from_prod_isle:_0x3bdf46,from_prod_pallet:_0xb44e45,to_prod_qty:_0x5978e2,to_prod_level:_0x1c0d29,to_prod_isle:_0x3325ee,to_prod_pallet:_0x191d7d,primary_code:_0x522be0,secondary_code:_0x2c522a,product_code3:_0x3100d3,note:_0x3f010c,invoice:_0xfe10f7,expiry_date:_0x473417}=_0x5bad3a[_0x408525(0x18d)];if(typeof _0x192b7c==_0x408525(0x1f5))var _0x279239=[_0x5bad3a[_0x408525(0x18d)][_0x408525(0x237)]],_0x27b677=[_0x5bad3a[_0x408525(0x18d)][_0x408525(0x1be)]],_0x3fe840=[_0x5bad3a[_0x408525(0x18d)][_0x408525(0x1d7)]],_0x2b4395=[_0x5bad3a[_0x408525(0x18d)][_0x408525(0x21d)]],_0xe56bfc=[_0x5bad3a[_0x408525(0x18d)][_0x408525(0x1a3)]],_0xfa21d8=[_0x5bad3a[_0x408525(0x18d)]['primary_code']],_0x2290eb=[_0x5bad3a['body'][_0x408525(0x258)]],_0x31af1b=[_0x5bad3a[_0x408525(0x18d)][_0x408525(0x1e4)]],_0x412407=[_0x5bad3a[_0x408525(0x18d)]['MaxStocks_data2']],_0x37d264=[_0x5bad3a[_0x408525(0x18d)][_0x408525(0x187)]],_0x18c1e8=[_0x5bad3a['body'][_0x408525(0x1d4)]],_0x26769b=[_0x5bad3a[_0x408525(0x18d)][_0x408525(0x1fe)]],_0x2bcfc7=[_0x5bad3a[_0x408525(0x18d)][_0x408525(0x256)]];else var _0x279239=[..._0x5bad3a['body'][_0x408525(0x237)]],_0x27b677=[..._0x5bad3a['body']['from_prod_qty']],_0x3fe840=[..._0x5bad3a[_0x408525(0x18d)][_0x408525(0x1d7)]],_0x2b4395=[..._0x5bad3a[_0x408525(0x18d)]['to_prod_qty']],_0xe56bfc=[..._0x5bad3a[_0x408525(0x18d)][_0x408525(0x1a3)]],_0xfa21d8=[..._0x5bad3a['body'][_0x408525(0x23a)]],_0x2290eb=[..._0x5bad3a['body'][_0x408525(0x258)]],_0x31af1b=[..._0x5bad3a['body']['product_code3']],_0x412407=[..._0x5bad3a['body'][_0x408525(0x23f)]],_0x37d264=[..._0x5bad3a[_0x408525(0x18d)][_0x408525(0x187)]],_0x18c1e8=[..._0x5bad3a[_0x408525(0x18d)][_0x408525(0x1d4)]],_0x26769b=[..._0x5bad3a[_0x408525(0x18d)][_0x408525(0x1fe)]],_0x2bcfc7=[..._0x5bad3a[_0x408525(0x18d)][_0x408525(0x256)]];const _0x20dba2=_0x279239[_0x408525(0x1ee)](_0x442f08=>{return _0x442f08={'product_name':_0x442f08};});_0x27b677[_0x408525(0x243)]((_0x279a83,_0x3045f6)=>{var _0x59dcd4=_0x408525;_0x20dba2[_0x3045f6][_0x59dcd4(0x22a)]=_0x279a83;}),_0x3fe840[_0x408525(0x243)]((_0xc4c63e,_0x455dab)=>{var _0x2afd28=_0x408525;_0x20dba2[_0x455dab][_0x2afd28(0x1c0)]=_0xc4c63e;}),_0x2b4395[_0x408525(0x243)]((_0x44d5e6,_0x27445f)=>{var _0x544c72=_0x408525;_0x20dba2[_0x27445f][_0x544c72(0x189)]=_0x44d5e6;}),_0xe56bfc['forEach']((_0x3d12f6,_0x8e68f0)=>{var _0x2adfec=_0x408525;_0x20dba2[_0x8e68f0][_0x2adfec(0x1bc)]=_0x3d12f6;}),_0xfa21d8[_0x408525(0x243)]((_0x8bf849,_0x4260d1)=>{var _0x2fb669=_0x408525;_0x20dba2[_0x4260d1][_0x2fb669(0x23a)]=_0x8bf849;}),_0x2290eb[_0x408525(0x243)]((_0x20e00e,_0x14906a)=>{var _0x46b40a=_0x408525;_0x20dba2[_0x14906a][_0x46b40a(0x258)]=_0x20e00e;}),_0x31af1b['forEach']((_0x50bc63,_0x479e44)=>{var _0x411823=_0x408525;_0x20dba2[_0x479e44][_0x411823(0x24f)]=_0x50bc63;}),_0x412407[_0x408525(0x243)]((_0x42db05,_0x21b05b)=>{var _0x2d0e14=_0x408525;_0x20dba2[_0x21b05b][_0x2d0e14(0x190)]=_0x42db05;}),_0x37d264[_0x408525(0x243)]((_0x40abb8,_0x24b5f4)=>{_0x20dba2[_0x24b5f4]['unit']=_0x40abb8;}),_0x18c1e8[_0x408525(0x243)]((_0x55e05f,_0x3607f9)=>{var _0x5d5118=_0x408525;_0x20dba2[_0x3607f9][_0x5d5118(0x1d4)]=_0x55e05f;}),_0x26769b['forEach']((_0x1fefd3,_0x2c5e5a)=>{var _0xab5a75=_0x408525;_0x20dba2[_0x2c5e5a][_0xab5a75(0x1fe)]=_0x1fefd3;}),_0x2bcfc7[_0x408525(0x243)]((_0x2ada88,_0x2d6d88)=>{var _0x16c9d0=_0x408525;_0x20dba2[_0x2d6d88][_0x16c9d0(0x256)]=_0x2ada88;});const _0x575657=_0x20dba2[_0x408525(0x1aa)](_0x346975=>_0x346975[_0x408525(0x189)]!=='0'&&_0x346975[_0x408525(0x189)]!==''||_0x346975[_0x408525(0x1b6)]!=='0'&&_0x346975[_0x408525(0x1b6)]!=='');var _0x3bdb3b=0x0;_0x575657['forEach'](_0xc61863=>{var _0x55b94b=_0x408525;parseInt(_0xc61863['from_quantity'])<parseInt(_0xc61863[_0x55b94b(0x189)])&&_0x3bdb3b++;});if(_0x3bdb3b!=0x0)return _0x5bad3a['flash'](_0x408525(0x193),_0x408525(0x1d8)),_0x1bd931[_0x408525(0x1b1)](_0x408525(0x1c8));const _0x2e0c12=await warehouse[_0x408525(0x195)]({'name':_0x89fe0a[_0x408525(0x223)],'room':_0x89fe0a[_0x408525(0x21c)]});_0x89fe0a[_0x408525(0x1b2)][_0x408525(0x243)](_0x2bfaa2=>{if(_0x2bfaa2['to_quantity']>0x0){const _0x14606d=_0x2e0c12['product_details']['map'](_0x1d0bed=>{var _0x8f48d8=a0_0xb772;_0x1d0bed[_0x8f48d8(0x1a2)]==_0x2bfaa2[_0x8f48d8(0x1a2)]&&_0x1d0bed['bay']==_0x2bfaa2['from_bay']&&(_0x1d0bed['product_stock']=parseInt(_0x1d0bed['product_stock'])+parseInt(_0x2bfaa2['to_quantity']));});}}),await _0x2e0c12[_0x408525(0x22b)]();const _0x2da4e0=await warehouse['findOne']({'name':_0x89fe0a[_0x408525(0x236)],'room':_0x89fe0a[_0x408525(0x1ca)]});_0x89fe0a[_0x408525(0x1b2)][_0x408525(0x243)](_0x1f14e8=>{var _0x1e9b20=_0x408525;if(_0x1f14e8['to_quantity']>0x0){const _0xe6d271=_0x2da4e0[_0x1e9b20(0x19c)][_0x1e9b20(0x1ee)](_0x4df04d=>{var _0x140ed8=_0x1e9b20;_0x4df04d[_0x140ed8(0x1a2)]==_0x1f14e8[_0x140ed8(0x1a2)]&&_0x4df04d['bay']==_0x1f14e8[_0x140ed8(0x1bc)]&&(_0x4df04d[_0x140ed8(0x1dd)]=parseInt(_0x4df04d['product_stock'])-parseInt(_0x1f14e8['to_quantity']));});}}),await _0x2da4e0[_0x408525(0x22b)](),_0x89fe0a[_0x408525(0x1eb)]=_0x14b5e3,_0x89fe0a['from_warehouse']=_0x2a6bdc,_0x89fe0a[_0x408525(0x236)]=_0x3cbc00,_0x89fe0a[_0x408525(0x1b2)]=_0x575657,_0x89fe0a[_0x408525(0x220)]=_0x3f010c,_0x89fe0a[_0x408525(0x1bf)]=_0xfe10f7;const _0x550c91=await _0x89fe0a[_0x408525(0x22b)](),_0x16a1e3=await warehouse[_0x408525(0x195)]({'name':_0x2a6bdc,'room':_0x195965});_0x550c91[_0x408525(0x1b2)][_0x408525(0x243)](_0x48d3cc=>{var _0x1be5e1=_0x408525;if(_0x48d3cc[_0x1be5e1(0x189)]>0x0){const _0x4f9833=_0x16a1e3[_0x1be5e1(0x19c)][_0x1be5e1(0x1ee)](_0x6a5ca8=>{var _0x34d71b=_0x1be5e1;_0x6a5ca8[_0x34d71b(0x1a2)]==_0x48d3cc[_0x34d71b(0x1a2)]&&_0x6a5ca8[_0x34d71b(0x1e3)]==_0x48d3cc['from_bay']&&(_0x6a5ca8[_0x34d71b(0x1dd)]=parseInt(_0x6a5ca8[_0x34d71b(0x1dd)])-parseInt(_0x48d3cc['to_quantity']));});}}),await _0x16a1e3[_0x408525(0x22b)]();const _0x2656c0=await warehouse[_0x408525(0x195)]({'name':_0x3cbc00,'room':_0x8abd87});_0x550c91[_0x408525(0x1b2)][_0x408525(0x243)](_0x5b4143=>{var _0x3338dd=_0x408525;if(_0x5b4143['to_quantity']>0x0){var _0x110a48=0x0;const _0x56a6e5=_0x2656c0[_0x3338dd(0x19c)]['map'](_0x158b4f=>{var _0x4b8770=_0x3338dd;_0x158b4f[_0x4b8770(0x1a2)]==_0x5b4143[_0x4b8770(0x1a2)]&&_0x158b4f['bay']==_0x5b4143['to_bay']&&(_0x158b4f[_0x4b8770(0x1dd)]=parseInt(_0x158b4f[_0x4b8770(0x1dd)])+parseInt(_0x5b4143[_0x4b8770(0x189)]),_0x110a48++);});_0x110a48=='0'&&(_0x2656c0['product_details']=_0x2656c0[_0x3338dd(0x19c)]['concat']({'product_name':_0x5b4143[_0x3338dd(0x1a2)],'product_stock':_0x5b4143['to_quantity'],'bay':_0x5b4143['to_bay'],'product_code':_0x5b4143[_0x3338dd(0x24f)],'primary_code':_0x5b4143['primary_code'],'secondary_code':_0x5b4143[_0x3338dd(0x258)],'maxProducts':_0x5b4143[_0x3338dd(0x190)]}));}}),await _0x2656c0[_0x408525(0x22b)](),_0x5bad3a[_0x408525(0x1f9)](_0x408525(0x252),_0x408525(0x217)),_0x1bd931['redirect'](_0x408525(0x192));}catch(_0x3b28da){console['log'](_0x3b28da);}}),router['post'](a0_0x2a34f6(0x1d2),async(_0x10fe63,_0x492cd6)=>{var _0x27c388=a0_0x2a34f6;const {FromWareHouse:_0xa9fe44,FromRoom:_0x978b7f,ToWarehouse:_0x3f5775,ToRoom:_0x2fbbb1,primary_code:_0x506efe,Roomslist:_0xdd96f}=_0x10fe63[_0x27c388(0x18d)],_0x3e14fa=_0xdd96f[_0x27c388(0x197)](','),_0x9bc270=[];async function _0x5846c4(_0x4cf0f1){var _0x57a13b=_0x27c388;const _0x5cb91c=await warehouse[_0x57a13b(0x1b9)]([{'$match':{'name':_0xa9fe44,'room':_0x4cf0f1}},{'$unwind':_0x57a13b(0x234)},{'$match':{'product_details.primary_code':_0x506efe}},{'$group':{'_id':_0x57a13b(0x22d),'name':{'$first':_0x57a13b(0x1dc)},'instock':{'$first':_0x57a13b(0x20f)},'primary_code':{'$first':_0x57a13b(0x1b3)},'secondary_code':{'$first':_0x57a13b(0x18a)},'product_code':{'$first':_0x57a13b(0x20b)},'bay':{'$first':_0x57a13b(0x20e)},'level':{'$first':_0x57a13b(0x1f8)},'type':{'$first':_0x57a13b(0x1cc)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x57a13b(0x188)},'secondary_unit':{'$first':_0x57a13b(0x1a4)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x57a13b(0x1b5)},'expiry_date':{'$first':_0x57a13b(0x1e7)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x57a13b(0x19a)},'maxPerUnit':{'$first':_0x57a13b(0x1d6)},'roomNamed':{'$first':_0x57a13b(0x240)},'prod_cat':{'$first':'P'},'invoice':{'$first':_0x57a13b(0x1c4)}}}]),_0x130d5a=await warehouse[_0x57a13b(0x1b9)]([{'$match':{'name':_0xa9fe44,'room':_0x4cf0f1}},{'$unwind':_0x57a13b(0x234)},{'$match':{'product_details.secondary_code':_0x506efe}},{'$group':{'_id':_0x57a13b(0x22d),'name':{'$first':_0x57a13b(0x1dc)},'instock':{'$first':_0x57a13b(0x20f)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x57a13b(0x18a)},'product_code':{'$first':_0x57a13b(0x20b)},'bay':{'$first':'$product_details.bay'},'level':{'$first':'$product_details.level'},'type':{'$first':_0x57a13b(0x1cc)},'pallet':{'$first':_0x57a13b(0x1ff)},'unit':{'$first':_0x57a13b(0x188)},'secondary_unit':{'$first':_0x57a13b(0x1a4)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x57a13b(0x1e7)},'production_date':{'$first':_0x57a13b(0x1f7)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x57a13b(0x1d6)},'roomNamed':{'$first':_0x57a13b(0x240)},'prod_cat':{'$first':'S'},'invoice':{'$first':'$product_details.invoice'}}}]);if(_0x5cb91c[_0x57a13b(0x199)]>0x0)_0x9bc270[_0x57a13b(0x207)](_0x5cb91c);else _0x130d5a[_0x57a13b(0x199)]>0x0&&_0x9bc270[_0x57a13b(0x207)](_0x130d5a);}const _0x44bc0e=_0x3e14fa[_0x27c388(0x1ee)](_0x20d53f=>_0x5846c4(_0x20d53f));await Promise[_0x27c388(0x226)](_0x44bc0e),_0x492cd6['json'](_0x9bc270);}),router[a0_0x2a34f6(0x214)](a0_0x2a34f6(0x1c6),async(_0x24de31,_0x5d9c5a)=>{var _0x1c4dbc=a0_0x2a34f6;const {productCode:_0x84345d,bay:_0x2cde8d,warehouses:_0x2f3460,room:_0x40f0a4}=_0x24de31[_0x1c4dbc(0x18d)];console[_0x1c4dbc(0x200)](_0x24de31[_0x1c4dbc(0x18d)]);try{const _0x3d14b8=await warehouse[_0x1c4dbc(0x1b9)]([{'$match':{'name':_0x2f3460,'room':_0x40f0a4}},{'$unwind':_0x1c4dbc(0x234)},{'$match':{'product_details.bay':parseInt(_0x2cde8d)}},{'$group':{'_id':_0x1c4dbc(0x22d),'name':{'$first':_0x1c4dbc(0x1dc)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x1c4dbc(0x20e)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x5d9c5a[_0x1c4dbc(0x21a)](0xc8)[_0x1c4dbc(0x232)](_0x3d14b8);}catch(_0x34dfcc){_0x5d9c5a[_0x1c4dbc(0x21a)](0x194)[_0x1c4dbc(0x232)]({'message':_0x34dfcc[_0x1c4dbc(0x1b4)]});}}),module[a0_0x2a34f6(0x251)]=router;