function a0_0x24db(){var _0x359977=['\x20<>\x20','$product_details.level','Rack\x202','bay','status','product','</tr>','/view/choose','\x20<=>\x20','to_room_name','choos_transfer','random','language','staff','from_prod_qty','/view/add_transfer_loc','to_floorlevel','json','to_room','TRF-','unit','product_name','$product_details.product_stock','id_transaction','_id','RoomAssigned','1560453qZUnKi','$product_details.type','exports','primary_code','ToRoomAssigned','findById','To\x20An\x20error\x20occurred\x20while\x20saving\x20data.','from_prod_level','back','batch_code','abs','$product_details.production_date','from_bay','$product_details.invoice','post','message','user','$product_details.secondary_code','edit_transfer_finished','2162181RBGkJq','$product_details.batch_code','$product_details._id','Arabic','from_quantity','getFullYear','$product_details.product_code','$product_details.product_name','$product_details.bay','MaxStocks_data2','slice','floor','product_details','production_date','English','Arabic\x20(ae)','Hindi','French','<tr>','../models/all_models','$product_details.secondary_unit','$product','match','body','/view/add_transfer_logs','Router','product_date','DRY\x20GOODS','aggregate','date','params','padStart','transfer_data','Transfer\x20Edit\x20Successfully','getDate','German','Enclosed','all','Enabled','$product_details.maxProducts','string','length','flash','redirect','Transfer\x20Finalize\x20Successfully','from_warehouse','role','errors','Rack\x201','bin2bin','$product.to_room_name','/CheckingWarehouse','nodemailer','An\x20error\x20occurred\x20while\x20saving\x20data.','undefined','/preview/:id','to_prod_qty','primary_unit','New_Qty_Converted','product_code','from_invoice','$finalize','findOne','True','Chinese','$name','product_stock','find','/transfer_finished/view','expiry_date','to_quantity','from_level','toString','$product_details.bin','updateOne','own','../middleware/auth','to_warehouse','$product_details.rack','../public/language/languages.json','MaxStocks_data','maxProducts','here2','map','note','type_of_process','concat','2306812iDkhhd','getMonth','38275210VoDxJp','secondary_unit','Ambient','filter','/barcode_scanner','$_id','$product_details.floorlevel','finalize','secondary_code','success','log','transfer_finished','$product_details.expiry_date','$room','$product_details.unit','LOG-TRF-','product_code3','$product_details.primary_code','forEach','$date','9qMjsZS','then','to_bay','$product_details.storage','error','add_transfer_finished','$product_details','prod_cat','Finished\x20Goods','/view/:id','$invoice','choos_transfer_logs','location2location','save','1503282IbuvZP','invoice','push','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','To_invoice','from_room','$product.from_room_name','email','prod_name','Product\x20Transfer\x20successfully','/transfer_finished/preview/','/transfer/view','8peToCh','24SGmTkO','</td>','to_prod_level','Spanish','Portuguese\x20(BR)','6014275tjBDWP','An\x20error\x20occurred.','$to_warehouse','warehouse','catch','498710nRLLGG','Portuguese','from_room_name','TRFF-','English\x20(US)','render','logs','from_prod_level2','$from_warehouse','$product_details.maxPerUnit','to_level','maxPerUnit','invoice_init','get','/view/add_transfer','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'];a0_0x24db=function(){return _0x359977;};return a0_0x24db();}function a0_0x2d49(_0x649917,_0x3e14f2){var _0x24db65=a0_0x24db();return a0_0x2d49=function(_0x2d49d3,_0x50c91e){_0x2d49d3=_0x2d49d3-0x1f2;var _0x4a9570=_0x24db65[_0x2d49d3];return _0x4a9570;},a0_0x2d49(_0x649917,_0x3e14f2);}var a0_0x182f95=a0_0x2d49;(function(_0x4d9edf,_0x1afefd){var _0x32c90b=a0_0x2d49,_0x25c4ce=_0x4d9edf();while(!![]){try{var _0x27d223=-parseInt(_0x32c90b(0x263))/0x1+-parseInt(_0x32c90b(0x228))/0x2+-parseInt(_0x32c90b(0x28d))/0x3*(parseInt(_0x32c90b(0x258))/0x4)+-parseInt(_0x32c90b(0x25e))/0x5+-parseInt(_0x32c90b(0x24c))/0x6+parseInt(_0x32c90b(0x2a0))/0x7*(parseInt(_0x32c90b(0x259))/0x8)+-parseInt(_0x32c90b(0x23e))/0x9*(-parseInt(_0x32c90b(0x22a))/0xa);if(_0x27d223===_0x1afefd)break;else _0x25c4ce['push'](_0x25c4ce['shift']());}catch(_0x25e4ce){_0x25c4ce['push'](_0x25c4ce['shift']());}}}(a0_0x24db,0x9485e));const express=require('express'),app=express(),router=express[a0_0x182f95(0x2b9)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,invoice_for_transfer,transfers_logs}=require(a0_0x182f95(0x2b3)),auth=require(a0_0x182f95(0x21d)),users=require(a0_0x182f95(0x220)),nodemailer=require(a0_0x182f95(0x205));router[a0_0x182f95(0x270)]('/view',auth,async(_0x5018a2,_0x348a54)=>{var _0x47ad53=a0_0x182f95;try{const {username:_0x41e0f9,email:_0x16a83a,role:_0x428ffd}=_0x5018a2[_0x47ad53(0x29d)],_0x42eadc=_0x5018a2[_0x47ad53(0x29d)],_0x1736c7=await profile[_0x47ad53(0x20f)]({'email':_0x42eadc[_0x47ad53(0x253)]}),_0x2f103c=await master_shop['find']();let _0x36d28e;if(_0x42eadc['role']==_0x47ad53(0x280)){const _0x20a948=await staff[_0x47ad53(0x20f)]({'email':_0x42eadc[_0x47ad53(0x253)]});_0x36d28e=await transfers_finished[_0x47ad53(0x214)]({'from_warehouse':_0x20a948[_0x47ad53(0x261)]});}else _0x36d28e=await transfers_finished['aggregate']([{'$match':{'type_of_transaction':_0x47ad53(0x21c)}},{'$unwind':_0x47ad53(0x2b5)},{'$group':{'_id':_0x47ad53(0x22f),'invoice':{'$first':_0x47ad53(0x248)},'date':{'$first':'$date'},'from_warehouse':{'$first':_0x47ad53(0x26b)},'to_warehouse':{'$first':_0x47ad53(0x260)},'from_room_name':{'$addToSet':_0x47ad53(0x252)},'to_room_name':{'$addToSet':_0x47ad53(0x203)},'finalize':{'$first':_0x47ad53(0x20e)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x2f103c[0x0]['language']==_0x47ad53(0x267))var _0x46df26=users[_0x47ad53(0x2ae)];else{if(_0x2f103c[0x0][_0x47ad53(0x27f)]==_0x47ad53(0x2b0))var _0x46df26=users[_0x47ad53(0x2b0)];else{if(_0x2f103c[0x0]['language']=='German')var _0x46df26=users[_0x47ad53(0x1f4)];else{if(_0x2f103c[0x0][_0x47ad53(0x27f)]==_0x47ad53(0x25c))var _0x46df26=users[_0x47ad53(0x25c)];else{if(_0x2f103c[0x0][_0x47ad53(0x27f)]==_0x47ad53(0x2b1))var _0x46df26=users[_0x47ad53(0x2b1)];else{if(_0x2f103c[0x0][_0x47ad53(0x27f)]==_0x47ad53(0x25d))var _0x46df26=users[_0x47ad53(0x264)];else{if(_0x2f103c[0x0][_0x47ad53(0x27f)]==_0x47ad53(0x211))var _0x46df26=users['Chinese'];else{if(_0x2f103c[0x0]['language']=='Arabic\x20(ae)')var _0x46df26=users[_0x47ad53(0x2a3)];}}}}}}}_0x348a54[_0x47ad53(0x268)](_0x47ad53(0x235),{'success':_0x5018a2[_0x47ad53(0x1fb)](_0x47ad53(0x233)),'errors':_0x5018a2[_0x47ad53(0x1fb)](_0x47ad53(0x200)),'role':_0x42eadc,'profile':_0x1736c7,'master_shop':_0x2f103c,'transfer':_0x36d28e,'language':_0x46df26});}catch(_0x56c63d){console[_0x47ad53(0x234)](_0x56c63d);}}),router['get']('/view_logs',auth,async(_0x3abb16,_0x18bc07)=>{var _0x1c1739=a0_0x182f95;try{const {username:_0x56dbed,email:_0x2a86ca,role:_0x5b02e3}=_0x3abb16[_0x1c1739(0x29d)],_0xe6b597=_0x3abb16[_0x1c1739(0x29d)],_0x545b9a=await profile[_0x1c1739(0x20f)]({'email':_0xe6b597[_0x1c1739(0x253)]}),_0x352a87=await master_shop[_0x1c1739(0x214)]();let _0x5a47b1;if(_0xe6b597[_0x1c1739(0x1ff)]==_0x1c1739(0x280)){const _0x52ee35=await staff[_0x1c1739(0x20f)]({'email':_0xe6b597[_0x1c1739(0x253)]});_0x5a47b1=await transfers_finished['find']({'from_warehouse':_0x52ee35[_0x1c1739(0x261)]});}else _0x5a47b1=await transfers_finished['aggregate']([{'$match':{'type_of_transaction':_0x1c1739(0x269)}},{'$unwind':'$product'},{'$group':{'_id':_0x1c1739(0x22f),'invoice':{'$first':_0x1c1739(0x248)},'date':{'$first':_0x1c1739(0x23d)},'from_warehouse':{'$first':'$from_warehouse'},'to_warehouse':{'$first':_0x1c1739(0x260)},'from_room_name':{'$addToSet':_0x1c1739(0x252)},'to_room_name':{'$addToSet':_0x1c1739(0x203)},'finalize':{'$first':_0x1c1739(0x20e)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x352a87[0x0]['language']==_0x1c1739(0x267))var _0x18da0e=users[_0x1c1739(0x2ae)];else{if(_0x352a87[0x0]['language']==_0x1c1739(0x2b0))var _0x18da0e=users[_0x1c1739(0x2b0)];else{if(_0x352a87[0x0][_0x1c1739(0x27f)]==_0x1c1739(0x1f4))var _0x18da0e=users[_0x1c1739(0x1f4)];else{if(_0x352a87[0x0][_0x1c1739(0x27f)]==_0x1c1739(0x25c))var _0x18da0e=users[_0x1c1739(0x25c)];else{if(_0x352a87[0x0][_0x1c1739(0x27f)]=='French')var _0x18da0e=users['French'];else{if(_0x352a87[0x0]['language']==_0x1c1739(0x25d))var _0x18da0e=users['Portuguese'];else{if(_0x352a87[0x0][_0x1c1739(0x27f)]=='Chinese')var _0x18da0e=users[_0x1c1739(0x211)];else{if(_0x352a87[0x0][_0x1c1739(0x27f)]=='Arabic\x20(ae)')var _0x18da0e=users[_0x1c1739(0x2a3)];}}}}}}}_0x18bc07['render']('transfer_finished_logs',{'success':_0x3abb16[_0x1c1739(0x1fb)]('success'),'errors':_0x3abb16[_0x1c1739(0x1fb)](_0x1c1739(0x200)),'role':_0xe6b597,'profile':_0x545b9a,'master_shop':_0x352a87,'transfer':_0x5a47b1,'language':_0x18da0e});}catch(_0x5adb1d){console[_0x1c1739(0x234)](_0x5adb1d);}});async function getRandom8DigitNumber(){var _0x2ad4f1=a0_0x182f95;const _0x59fed4=0x989680,_0x4f7dad=0x5f5e0ff,_0x4281ca=Math[_0x2ad4f1(0x2ab)](Math[_0x2ad4f1(0x27e)]()*(_0x4f7dad-_0x59fed4+0x1))+_0x59fed4;var _0x3743fe;const _0x3a3de1=await transfers_finished[_0x2ad4f1(0x20f)]({'invoice':_0x2ad4f1(0x266)+_0x4281ca});return _0x3a3de1&&_0x3a3de1[_0x2ad4f1(0x1fa)]>0x0?_0x3743fe='TRFF-'+_0x4281ca:_0x3743fe=_0x2ad4f1(0x266)+_0x4281ca,_0x3743fe;}router[a0_0x182f95(0x270)](a0_0x182f95(0x271),auth,async(_0x286b11,_0x3c4daf)=>{var _0x39d723=a0_0x182f95;try{const {username:_0x3a9aca,email:_0x2ecb95,role:_0x316d8e}=_0x286b11[_0x39d723(0x29d)],_0x57932b=_0x286b11[_0x39d723(0x29d)],_0x1099a1=await profile[_0x39d723(0x20f)]({'email':_0x57932b[_0x39d723(0x253)]}),_0x262193=await master_shop[_0x39d723(0x214)]();let _0x123a0e;if(_0x57932b[_0x39d723(0x1ff)]==_0x39d723(0x280)){const _0x1a6f39=await staff[_0x39d723(0x20f)]({'email':_0x57932b[_0x39d723(0x253)]});_0x123a0e=await warehouse['aggregate']([{'$match':{'status':_0x39d723(0x1f7),'name':_0x1a6f39[_0x39d723(0x261)]}},{'$group':{'_id':_0x39d723(0x212),'name':{'$first':_0x39d723(0x212)}}}]);}else _0x123a0e=await warehouse[_0x39d723(0x2bc)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x39d723(0x212),'name':{'$first':'$name'}}}]);const _0x91fdc0=await transfers_finished[_0x39d723(0x214)]({}),_0x2e2a06=_0x91fdc0[_0x39d723(0x1fa)]+0x1,_0x2478a7=_0x39d723(0x266)+_0x2e2a06[_0x39d723(0x219)]()[_0x39d723(0x2bf)](0x5,'0');if(_0x262193[0x0]['language']==_0x39d723(0x267))var _0x421fe2=users[_0x39d723(0x2ae)];else{if(_0x262193[0x0]['language']=='Hindi')var _0x421fe2=users[_0x39d723(0x2b0)];else{if(_0x262193[0x0][_0x39d723(0x27f)]==_0x39d723(0x1f4))var _0x421fe2=users[_0x39d723(0x1f4)];else{if(_0x262193[0x0][_0x39d723(0x27f)]==_0x39d723(0x25c))var _0x421fe2=users['Spanish'];else{if(_0x262193[0x0][_0x39d723(0x27f)]=='French')var _0x421fe2=users['French'];else{if(_0x262193[0x0][_0x39d723(0x27f)]==_0x39d723(0x25d))var _0x421fe2=users['Portuguese'];else{if(_0x262193[0x0]['language']==_0x39d723(0x211))var _0x421fe2=users['Chinese'];else{if(_0x262193[0x0][_0x39d723(0x27f)]==_0x39d723(0x2af))var _0x421fe2=users[_0x39d723(0x2a3)];}}}}}}}const _0x3518a2=getRandom8DigitNumber();_0x3518a2['then'](_0x11fe71=>{var _0x17095c=_0x39d723;_0x3c4daf['render'](_0x17095c(0x243),{'success':_0x286b11[_0x17095c(0x1fb)](_0x17095c(0x233)),'errors':_0x286b11['flash'](_0x17095c(0x200)),'role':_0x57932b,'profile':_0x1099a1,'master_shop':_0x262193,'warehouse':_0x123a0e,'language':_0x421fe2,'invoice':_0x11fe71});})[_0x39d723(0x262)](_0x3790f2=>{var _0x31831d=_0x39d723;_0x286b11[_0x31831d(0x1fb)](_0x31831d(0x200),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x3c4daf[_0x31831d(0x1fc)](_0x31831d(0x257));});}catch(_0x369fd2){console['log'](_0x369fd2);}}),router[a0_0x182f95(0x270)](a0_0x182f95(0x27a),auth,async(_0x4625cb,_0x3f0de7)=>{var _0x2fa775=a0_0x182f95;try{const {username:_0x3060ed,email:_0x2ccbbe,role:_0x4438b6}=_0x4625cb['user'],_0x1dafe8=_0x4625cb[_0x2fa775(0x29d)],_0x312eb2=await profile[_0x2fa775(0x20f)]({'email':_0x1dafe8[_0x2fa775(0x253)]}),_0x10253a=await master_shop[_0x2fa775(0x214)]();let _0x3361d7;if(_0x1dafe8[_0x2fa775(0x1ff)]==_0x2fa775(0x280)){const _0x1dc4b2=await staff[_0x2fa775(0x20f)]({'email':_0x1dafe8[_0x2fa775(0x253)]});_0x3361d7=await warehouse[_0x2fa775(0x2bc)]([{'$match':{'status':_0x2fa775(0x1f7),'name':_0x1dc4b2[_0x2fa775(0x261)]}},{'$group':{'_id':_0x2fa775(0x212),'name':{'$first':_0x2fa775(0x212)}}}]);}else _0x3361d7=await warehouse[_0x2fa775(0x2bc)]([{'$match':{'status':_0x2fa775(0x1f7)}},{'$group':{'_id':_0x2fa775(0x212),'name':{'$first':_0x2fa775(0x212)}}}]);const _0x349ab7=await transfers_finished[_0x2fa775(0x214)]({}),_0x22ca2b=_0x349ab7[_0x2fa775(0x1fa)]+0x1,_0x2ff9af=_0x2fa775(0x266)+_0x22ca2b['toString']()[_0x2fa775(0x2bf)](0x5,'0');if(_0x10253a[0x0][_0x2fa775(0x27f)]=='English\x20(US)')var _0x59d5d9=users[_0x2fa775(0x2ae)];else{if(_0x10253a[0x0][_0x2fa775(0x27f)]==_0x2fa775(0x2b0))var _0x59d5d9=users[_0x2fa775(0x2b0)];else{if(_0x10253a[0x0][_0x2fa775(0x27f)]==_0x2fa775(0x1f4))var _0x59d5d9=users[_0x2fa775(0x1f4)];else{if(_0x10253a[0x0][_0x2fa775(0x27f)]=='Spanish')var _0x59d5d9=users[_0x2fa775(0x25c)];else{if(_0x10253a[0x0][_0x2fa775(0x27f)]==_0x2fa775(0x2b1))var _0x59d5d9=users[_0x2fa775(0x2b1)];else{if(_0x10253a[0x0][_0x2fa775(0x27f)]==_0x2fa775(0x25d))var _0x59d5d9=users[_0x2fa775(0x264)];else{if(_0x10253a[0x0]['language']==_0x2fa775(0x211))var _0x59d5d9=users[_0x2fa775(0x211)];else{if(_0x10253a[0x0][_0x2fa775(0x27f)]==_0x2fa775(0x2af))var _0x59d5d9=users[_0x2fa775(0x2a3)];}}}}}}}const _0x1740f3=getRandom8DigitNumber();_0x1740f3[_0x2fa775(0x23f)](_0x1d310e=>{var _0x28cb95=_0x2fa775;_0x3f0de7[_0x28cb95(0x268)](_0x28cb95(0x27d),{'success':_0x4625cb[_0x28cb95(0x1fb)](_0x28cb95(0x233)),'errors':_0x4625cb['flash'](_0x28cb95(0x200)),'role':_0x1dafe8,'profile':_0x312eb2,'master_shop':_0x10253a,'warehouse':_0x3361d7,'language':_0x59d5d9,'invoice':_0x1d310e});})[_0x2fa775(0x262)](_0x36b7ab=>{var _0x1ccb1e=_0x2fa775;_0x4625cb['flash'](_0x1ccb1e(0x200),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x3f0de7[_0x1ccb1e(0x1fc)](_0x1ccb1e(0x257));});}catch(_0x1a764d){console['log'](_0x1a764d);}}),router['get']('/view/choose_logs',auth,async(_0x57469a,_0x239161)=>{var _0x2f4563=a0_0x182f95;try{const {username:_0x182a25,email:_0x46c1d2,role:_0x8800cc}=_0x57469a['user'],_0x3fd7a8=_0x57469a['user'],_0x4e3bd0=await profile[_0x2f4563(0x20f)]({'email':_0x3fd7a8['email']}),_0x215d71=await master_shop['find']();let _0x3681ad;if(_0x3fd7a8['role']==_0x2f4563(0x280)){const _0x2414c9=await staff['findOne']({'email':_0x3fd7a8[_0x2f4563(0x253)]});_0x3681ad=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x2414c9['warehouse']}},{'$group':{'_id':_0x2f4563(0x212),'name':{'$first':'$name'}}}]);}else _0x3681ad=await warehouse[_0x2f4563(0x2bc)]([{'$match':{'status':_0x2f4563(0x1f7)}},{'$group':{'_id':_0x2f4563(0x212),'name':{'$first':_0x2f4563(0x212)}}}]);const _0x32b40e=await transfers_finished['find']({}),_0x420b92=_0x32b40e['length']+0x1,_0x10699b=_0x2f4563(0x266)+_0x420b92[_0x2f4563(0x219)]()[_0x2f4563(0x2bf)](0x5,'0');if(_0x215d71[0x0][_0x2f4563(0x27f)]=='English\x20(US)')var _0x44c23d=users[_0x2f4563(0x2ae)];else{if(_0x215d71[0x0][_0x2f4563(0x27f)]=='Hindi')var _0x44c23d=users[_0x2f4563(0x2b0)];else{if(_0x215d71[0x0]['language']==_0x2f4563(0x1f4))var _0x44c23d=users[_0x2f4563(0x1f4)];else{if(_0x215d71[0x0][_0x2f4563(0x27f)]==_0x2f4563(0x25c))var _0x44c23d=users[_0x2f4563(0x25c)];else{if(_0x215d71[0x0][_0x2f4563(0x27f)]==_0x2f4563(0x2b1))var _0x44c23d=users['French'];else{if(_0x215d71[0x0][_0x2f4563(0x27f)]==_0x2f4563(0x25d))var _0x44c23d=users['Portuguese'];else{if(_0x215d71[0x0][_0x2f4563(0x27f)]==_0x2f4563(0x211))var _0x44c23d=users[_0x2f4563(0x211)];else{if(_0x215d71[0x0][_0x2f4563(0x27f)]==_0x2f4563(0x2af))var _0x44c23d=users[_0x2f4563(0x2a3)];}}}}}}}const _0x1a5da9=getRandom8DigitNumber();_0x1a5da9[_0x2f4563(0x23f)](_0x376c38=>{var _0x3d1622=_0x2f4563;_0x239161[_0x3d1622(0x268)](_0x3d1622(0x249),{'success':_0x57469a[_0x3d1622(0x1fb)](_0x3d1622(0x233)),'errors':_0x57469a[_0x3d1622(0x1fb)](_0x3d1622(0x200)),'role':_0x3fd7a8,'profile':_0x4e3bd0,'master_shop':_0x215d71,'warehouse':_0x3681ad,'language':_0x44c23d,'invoice':_0x376c38});})[_0x2f4563(0x262)](_0x42bd31=>{var _0x4ba7c8=_0x2f4563;_0x57469a[_0x4ba7c8(0x1fb)](_0x4ba7c8(0x200),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x239161[_0x4ba7c8(0x1fc)](_0x4ba7c8(0x257));});}catch(_0x27fe3a){console[_0x2f4563(0x234)](_0x27fe3a);}}),router[a0_0x182f95(0x29b)](a0_0x182f95(0x2b8),auth,async(_0x15098c,_0xeddc4)=>{var _0x3114b6=a0_0x182f95;try{const {date:_0xbdb668,from_warehouse:_0x38975e,FromRoom_name:_0x57ec2a,to_warehouse:_0x3c4d2e,ToRoom_name:_0x3b2aa0,prod_name:_0x46270b,from_prod_qty:_0x14b43d,from_prod_level:_0xab8002,from_prod_isle:_0x206ba2,from_prod_pallet:_0x234724,to_prod_qty:_0x453439,to_prod_level:_0x7ac7e0,to_prod_isle:_0x5d80e7,to_prod_pallet:_0x133682,primary_code:_0x961489,secondary_code:_0x27dc43,product_code3:_0x4478d3,note:_0x576796,MaxStocks_data2:_0x5c4307,invoice:_0x27e4f0,expiry_date:_0x354e1a,PO_number:_0x241bc0,ReqBy:_0xee828b,dateofreq:_0x3dfa18,typeservicesData:_0x5cb2a3,destination:_0x6a49db,deliverydate:_0xc5c557,driver:_0x1ae9d6,plate:_0x255154,van:_0x4ed24d,DRSI:_0x385837,typevehicle:_0x51af77,TSU:_0x12c4ba,TFU:_0x4b68ba}=_0x15098c[_0x3114b6(0x2b7)];if(typeof _0x46270b==_0x3114b6(0x1f9))var _0x4f2d09=[_0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x254)]],_0x5060c5=[_0x15098c[_0x3114b6(0x2b7)]['from_prod_qty']],_0x4ac92b=[_0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x26a)]],_0xe2b15e=[_0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x20b)]],_0x5730dd=[_0x15098c[_0x3114b6(0x2b7)]['to_prod_level']],_0x5c862c=[_0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x290)]],_0x95c012=[_0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x232)]],_0x3cace4=[_0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x23a)]],_0x3e8469=[_0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x2a9)]],_0x8c19e6=[_0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x20a)]],_0x1658ee=[_0x15098c[_0x3114b6(0x2b7)]['secondary_unit']],_0x263d4a=[_0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x296)]],_0x41edd4=[_0x15098c[_0x3114b6(0x2b7)]['expiry_date']],_0x430a0c=[_0x15098c[_0x3114b6(0x2b7)]['product_date']],_0x5e43db=[_0x15098c[_0x3114b6(0x2b7)]['MaxStocks_data']],_0x5633d8=[_0x15098c[_0x3114b6(0x2b7)]['maxPerUnit']],_0x456581=[_0x15098c['body'][_0x3114b6(0x245)]],_0x749856=[_0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x28c)]],_0x525801=[_0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x291)]],_0x15379f=[_0x15098c[_0x3114b6(0x2b7)]['from_invoice']],_0x5206b5=[_0x15098c['body']['id_transaction']];else var _0x4f2d09=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x254)]],_0x5060c5=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x281)]],_0x4ac92b=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x26a)]],_0xe2b15e=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x20b)]],_0x5730dd=[..._0x15098c['body'][_0x3114b6(0x25b)]],_0x5c862c=[..._0x15098c['body']['primary_code']],_0x95c012=[..._0x15098c['body']['secondary_code']],_0x3cace4=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x23a)]],_0x3e8469=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x2a9)]],_0x8c19e6=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x20a)]],_0x1658ee=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x22b)]],_0x263d4a=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x296)]],_0x41edd4=[..._0x15098c['body'][_0x3114b6(0x216)]],_0x430a0c=[..._0x15098c['body'][_0x3114b6(0x2ba)]],_0x5e43db=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x221)]],_0x5633d8=[..._0x15098c['body'][_0x3114b6(0x26e)]],_0x456581=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x245)]],_0x749856=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x28c)]],_0x525801=[..._0x15098c['body'][_0x3114b6(0x291)]],_0x15379f=[..._0x15098c[_0x3114b6(0x2b7)][_0x3114b6(0x20d)]],_0x5206b5=[..._0x15098c['body'][_0x3114b6(0x28a)]];const _0x399e52=_0x4f2d09['map'](_0x2a89ad=>{return _0x2a89ad={'product_name':_0x2a89ad};});_0x5060c5[_0x3114b6(0x23c)]((_0x490600,_0x5df5a3)=>{_0x399e52[_0x5df5a3]['from_quantity']=_0x490600;}),_0x4ac92b[_0x3114b6(0x23c)]((_0x46a50c,_0x9f2b50)=>{var _0x436a26=_0x3114b6,_0x3b89be=_0x46a50c[_0x436a26(0x2b6)](/[A-Za-z]+/)[0x0],_0x183bc0=parseInt(_0x46a50c[_0x436a26(0x2b6)](/\d+/)[0x0]);_0x399e52[_0x9f2b50][_0x436a26(0x299)]=_0x183bc0,_0x399e52[_0x9f2b50][_0x436a26(0x218)]=_0x3b89be;}),_0x5206b5['forEach']((_0x136027,_0x2bcb21)=>{var _0x3d16d2=_0x3114b6;_0x399e52[_0x2bcb21][_0x3d16d2(0x28a)]=_0x136027;}),_0x15379f[_0x3114b6(0x23c)]((_0x247558,_0x28479f)=>{var _0x374f10=_0x3114b6;_0x399e52[_0x28479f][_0x374f10(0x20d)]=_0x247558;}),_0xe2b15e[_0x3114b6(0x23c)]((_0x2020cc,_0x5a109a)=>{var _0x1ded4d=_0x3114b6;_0x399e52[_0x5a109a][_0x1ded4d(0x217)]=_0x2020cc;}),_0x5730dd[_0x3114b6(0x23c)]((_0x10f245,_0x3c420f)=>{var _0x4ca7d8=_0x3114b6,_0x2133d9=_0x10f245['match'](/[A-Za-z]+/)[0x0],_0x5e0b1c=parseInt(_0x10f245[_0x4ca7d8(0x2b6)](/\d+/)[0x0]);_0x399e52[_0x3c420f][_0x4ca7d8(0x26d)]=_0x2133d9,_0x399e52[_0x3c420f][_0x4ca7d8(0x240)]=_0x5e0b1c;}),_0x5c862c[_0x3114b6(0x23c)]((_0x6c298,_0x3a244a)=>{var _0x44769e=_0x3114b6;_0x399e52[_0x3a244a][_0x44769e(0x290)]=_0x6c298;}),_0x95c012['forEach']((_0x370441,_0x55d752)=>{var _0x38d813=_0x3114b6;_0x399e52[_0x55d752][_0x38d813(0x232)]=_0x370441;}),_0x3cace4['forEach']((_0x24c061,_0x122663)=>{var _0x244f41=_0x3114b6;_0x399e52[_0x122663][_0x244f41(0x20c)]=_0x24c061;}),_0x3e8469[_0x3114b6(0x23c)]((_0x1b385e,_0x644a18)=>{_0x399e52[_0x644a18]['maxProducts']=_0x1b385e;}),_0x8c19e6[_0x3114b6(0x23c)]((_0x4095ae,_0x52e3d4)=>{var _0x5f58a2=_0x3114b6;_0x399e52[_0x52e3d4][_0x5f58a2(0x287)]=_0x4095ae;}),_0x1658ee[_0x3114b6(0x23c)]((_0x2f31f7,_0x1a9205)=>{var _0x1bbc46=_0x3114b6;_0x399e52[_0x1a9205][_0x1bbc46(0x22b)]=_0x2f31f7;}),_0x263d4a[_0x3114b6(0x23c)]((_0x383e14,_0x206c02)=>{_0x399e52[_0x206c02]['batch_code']=_0x383e14;}),_0x41edd4['forEach']((_0xeec48d,_0x11110f)=>{var _0xd82eaa=_0x3114b6;_0x399e52[_0x11110f][_0xd82eaa(0x216)]=_0xeec48d;}),_0x430a0c[_0x3114b6(0x23c)]((_0x1b4497,_0x145899)=>{var _0x2ec835=_0x3114b6;_0x399e52[_0x145899][_0x2ec835(0x2ad)]=_0x1b4497;}),_0x5e43db[_0x3114b6(0x23c)]((_0x506b60,_0x12f0c6)=>{var _0x579111=_0x3114b6;_0x399e52[_0x12f0c6][_0x579111(0x222)]=_0x506b60;}),_0x5633d8['forEach']((_0x319579,_0x2b8428)=>{var _0x568caf=_0x3114b6;_0x399e52[_0x2b8428][_0x568caf(0x26e)]=_0x319579;}),_0x456581['forEach']((_0x264f53,_0x348f2c)=>{var _0x5c9d00=_0x3114b6;_0x399e52[_0x348f2c][_0x5c9d00(0x245)]=_0x264f53;}),_0x749856[_0x3114b6(0x23c)]((_0x5500b2,_0x5b0c7c)=>{_0x399e52[_0x5b0c7c]['from_room_name']=_0x5500b2;}),_0x525801[_0x3114b6(0x23c)]((_0x34508d,_0x4b0d3b)=>{_0x399e52[_0x4b0d3b]['to_room_name']=_0x34508d;});const _0x3f2b00=_0x399e52[_0x3114b6(0x22d)](_0x278b1b=>_0x278b1b[_0x3114b6(0x217)]!=='0'&&_0x278b1b['to_quantity']!==''||_0x278b1b['to_floorlevel']!=='0'&&_0x278b1b[_0x3114b6(0x283)]!=='');var _0x2f4f9e=0x0;_0x3f2b00[_0x3114b6(0x23c)](_0x284546=>{var _0x488b29=_0x3114b6;parseInt(_0x284546[_0x488b29(0x2a4)])<parseInt(_0x284546[_0x488b29(0x217)])&&_0x2f4f9e++;});if(_0x2f4f9e!=0x0)return _0x15098c[_0x3114b6(0x1fb)](_0x3114b6(0x200),_0x3114b6(0x272)),_0xeddc4['redirect'](_0x3114b6(0x295));const _0x2efa2e=new transfers_logs();await _0x2efa2e['save']();for(let _0x2bedd1=0x0;_0x2bedd1<=_0x525801[_0x3114b6(0x1fa)]-0x1;_0x2bedd1++){_0x399e52[_0x2bedd1][_0x3114b6(0x250)]='LOG-TRF-'+_0x2efa2e['invoice_init']['toString']()[_0x3114b6(0x2bf)](0x8,'0');}const _0x3d0483=new transfers_finished({'date':_0xbdb668,'from_warehouse':_0x38975e,'to_warehouse':_0x38975e,'product':_0x3f2b00,'note':_0x576796,'invoice':_0x3114b6(0x239)+_0x2efa2e['invoice_init'][_0x3114b6(0x219)]()[_0x3114b6(0x2bf)](0x8,'0'),'type_of_process':_0x3114b6(0x202),'type_of_transaction':_0x3114b6(0x269),'PO_number':_0x241bc0,'RequestedBy':_0xee828b,'DateofRequest':_0x3dfa18,'typeservices':_0x5cb2a3,'destination':_0x6a49db,'deliverydate':_0xc5c557,'driver':_0x1ae9d6,'plate':_0x255154,'van':_0x4ed24d,'DRSI':_0x385837,'typevehicle':_0x51af77,'TSU':_0x12c4ba,'TFU':_0x4b68ba}),_0x3dfce4=await _0x3d0483['save']();_0x15098c['flash'](_0x3114b6(0x233),_0x3114b6(0x255)),_0xeddc4[_0x3114b6(0x1fc)](_0x3114b6(0x256)+_0x3dfce4['_id']);}catch(_0x196f3f){console['log'](_0x196f3f),_0xeddc4[_0x3114b6(0x277)](0xc8)[_0x3114b6(0x284)]({'errorMessage':_0x196f3f[_0x3114b6(0x29c)]});}}),router[a0_0x182f95(0x29b)]('/view/addlog',auth,async(_0xc35310,_0xfc0b37)=>{var _0x55325b=a0_0x182f95;try{const {date:_0x2251a3,from_warehouse:_0x16e489,FromRoom_name:_0x29d30a,to_warehouse:_0x164587,ToRoom_name:_0x43b799,prod_name:_0x1c0469,from_prod_qty:_0xb65601,from_prod_level:_0x10b80f,from_prod_isle:_0x168cf5,from_prod_pallet:_0x12f1ac,to_prod_qty:_0x1d1ec3,to_prod_level:_0x1e96f3,to_prod_isle:_0x151bc4,to_prod_pallet:_0x2ffc02,primary_code:_0x3d61ae,secondary_code:_0x5497ac,product_code3:_0x55075d,note:_0x2e7716,MaxStocks_data2:_0x26b346,invoice:_0x4e4a32,expiry_date:_0x1e2037,PO_number_loc:_0x232661,ReqBy_loc:_0x1974cf,dateofreq_loc:_0x5de48d,typeservices_loc_Data:_0x4b52c5,destination_loc:_0x44c3ba,deliverydate_loc:_0x4ac5ab,driver_loc:_0x41cabc,plate_loc:_0x2f39cb,van_loc:_0xa8d13f,DRSI_loc:_0xebdbd7,typevehicle_loc:_0x374745,TSU_loc:_0x4fdfe2,TFU_loc:_0x1260f2}=_0xc35310[_0x55325b(0x2b7)];if(typeof _0x1c0469==_0x55325b(0x1f9))var _0x53fba7=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x254)]],_0x5c8558=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x281)]],_0x3cf148=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x26a)]],_0x30f5dd=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x20b)]],_0x234b47=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x25b)]],_0x235d13=[_0xc35310[_0x55325b(0x2b7)]['primary_code']],_0x131824=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x232)]],_0x1b913c=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x23a)]],_0xf9cc1b=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x2a9)]],_0x31fdcd=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x20a)]],_0x2bda02=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x22b)]],_0x1d1e13=[_0xc35310[_0x55325b(0x2b7)]['batch_code']],_0x3ab9e1=[_0xc35310[_0x55325b(0x2b7)]['expiry_date']],_0x23359e=[_0xc35310['body'][_0x55325b(0x2ba)]],_0x3a85ee=[_0xc35310[_0x55325b(0x2b7)]['MaxStocks_data']],_0x43448e=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x26e)]],_0xc80645=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x245)]],_0xa277e0=[_0xc35310[_0x55325b(0x2b7)]['RoomAssigned']],_0xbf952c=[_0xc35310['body'][_0x55325b(0x291)]],_0x48578f=[_0xc35310[_0x55325b(0x2b7)]['from_invoice']],_0x294fae=[_0xc35310[_0x55325b(0x2b7)][_0x55325b(0x28a)]];else var _0x53fba7=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x254)]],_0x5c8558=[..._0xc35310['body'][_0x55325b(0x281)]],_0x3cf148=[..._0xc35310['body'][_0x55325b(0x26a)]],_0x30f5dd=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x20b)]],_0x234b47=[..._0xc35310['body']['to_prod_level']],_0x235d13=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x290)]],_0x131824=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x232)]],_0x1b913c=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x23a)]],_0xf9cc1b=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x2a9)]],_0x31fdcd=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x20a)]],_0x2bda02=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x22b)]],_0x1d1e13=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x296)]],_0x3ab9e1=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x216)]],_0x23359e=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x2ba)]],_0x3a85ee=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x221)]],_0x43448e=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x26e)]],_0xc80645=[..._0xc35310['body']['prod_cat']],_0xa277e0=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x28c)]],_0xbf952c=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x291)]],_0x48578f=[..._0xc35310[_0x55325b(0x2b7)]['from_invoice']],_0x294fae=[..._0xc35310[_0x55325b(0x2b7)][_0x55325b(0x28a)]];const _0x1d4cb4=_0x53fba7[_0x55325b(0x224)](_0x34b602=>{return _0x34b602={'product_name':_0x34b602};});_0x5c8558[_0x55325b(0x23c)]((_0x460e3c,_0x3bf903)=>{var _0x2dcb38=_0x55325b;_0x1d4cb4[_0x3bf903][_0x2dcb38(0x2a4)]=_0x460e3c;}),_0x3cf148[_0x55325b(0x23c)]((_0x45f16f,_0x25462e)=>{var _0xbbf92b=_0x55325b,_0x4e4601=_0x45f16f[_0xbbf92b(0x2b6)](/[A-Za-z]+/)[0x0],_0x15f39e=parseInt(_0x45f16f[_0xbbf92b(0x2b6)](/\d+/)[0x0]);_0x1d4cb4[_0x25462e][_0xbbf92b(0x299)]=_0x15f39e,_0x1d4cb4[_0x25462e]['from_level']=_0x4e4601;}),_0x294fae[_0x55325b(0x23c)]((_0x36b759,_0x12e008)=>{var _0x2d4ae4=_0x55325b;_0x1d4cb4[_0x12e008][_0x2d4ae4(0x28a)]=_0x36b759;}),_0x48578f[_0x55325b(0x23c)]((_0x15c4e1,_0x1f20e3)=>{var _0x3aa04e=_0x55325b;_0x1d4cb4[_0x1f20e3][_0x3aa04e(0x20d)]=_0x15c4e1;}),_0x30f5dd[_0x55325b(0x23c)]((_0x9e58a0,_0x126d98)=>{var _0x511c6e=_0x55325b;_0x1d4cb4[_0x126d98][_0x511c6e(0x217)]=_0x9e58a0;}),_0x234b47[_0x55325b(0x23c)]((_0x1cd165,_0x2172a5)=>{var _0xbb63ff=_0x55325b,_0x2d91a8=_0x1cd165[_0xbb63ff(0x2b6)](/[A-Za-z]+/)[0x0],_0x35c278=parseInt(_0x1cd165[_0xbb63ff(0x2b6)](/\d+/)[0x0]);_0x1d4cb4[_0x2172a5]['to_level']=_0x2d91a8,_0x1d4cb4[_0x2172a5]['to_bay']=_0x35c278;}),_0x235d13[_0x55325b(0x23c)]((_0x53ba97,_0x1f6f7b)=>{var _0x176b69=_0x55325b;_0x1d4cb4[_0x1f6f7b][_0x176b69(0x290)]=_0x53ba97;}),_0x131824[_0x55325b(0x23c)]((_0x24164e,_0xff4a43)=>{_0x1d4cb4[_0xff4a43]['secondary_code']=_0x24164e;}),_0x1b913c['forEach']((_0x45cfdc,_0x120021)=>{var _0x1f07fe=_0x55325b;_0x1d4cb4[_0x120021][_0x1f07fe(0x20c)]=_0x45cfdc;}),_0xf9cc1b[_0x55325b(0x23c)]((_0x193f6c,_0x2ce024)=>{var _0x29806f=_0x55325b;_0x1d4cb4[_0x2ce024][_0x29806f(0x222)]=_0x193f6c;}),_0x31fdcd[_0x55325b(0x23c)]((_0x112348,_0x488aa9)=>{var _0x1b8013=_0x55325b;_0x1d4cb4[_0x488aa9][_0x1b8013(0x287)]=_0x112348;}),_0x2bda02[_0x55325b(0x23c)]((_0x262d9d,_0x5255c8)=>{var _0x23037c=_0x55325b;_0x1d4cb4[_0x5255c8][_0x23037c(0x22b)]=_0x262d9d;}),_0x1d1e13[_0x55325b(0x23c)]((_0x13ff92,_0x1bc93e)=>{var _0xb88bcb=_0x55325b;_0x1d4cb4[_0x1bc93e][_0xb88bcb(0x296)]=_0x13ff92;}),_0x3ab9e1['forEach']((_0xe10d79,_0x5ee656)=>{var _0x2519f0=_0x55325b;_0x1d4cb4[_0x5ee656][_0x2519f0(0x216)]=_0xe10d79;}),_0x23359e[_0x55325b(0x23c)]((_0x4c2a15,_0x264875)=>{_0x1d4cb4[_0x264875]['production_date']=_0x4c2a15;}),_0x3a85ee[_0x55325b(0x23c)]((_0x46cfc5,_0x4ab144)=>{_0x1d4cb4[_0x4ab144]['maxProducts']=_0x46cfc5;}),_0x43448e[_0x55325b(0x23c)]((_0x5b1b57,_0x5ce5c2)=>{_0x1d4cb4[_0x5ce5c2]['maxPerUnit']=_0x5b1b57;}),_0xc80645[_0x55325b(0x23c)]((_0x3577ae,_0x238ced)=>{var _0x484c18=_0x55325b;_0x1d4cb4[_0x238ced][_0x484c18(0x245)]=_0x3577ae;}),_0xa277e0[_0x55325b(0x23c)]((_0x17e2da,_0x3c894b)=>{_0x1d4cb4[_0x3c894b]['from_room_name']=_0x17e2da;}),_0xbf952c[_0x55325b(0x23c)]((_0x23c5b2,_0x1ca13d)=>{var _0x5124e3=_0x55325b;_0x1d4cb4[_0x1ca13d][_0x5124e3(0x27c)]=_0x23c5b2;});const _0x207b7b=_0x1d4cb4[_0x55325b(0x22d)](_0x45e9bc=>_0x45e9bc[_0x55325b(0x217)]!=='0'&&_0x45e9bc['to_quantity']!==''||_0x45e9bc[_0x55325b(0x283)]!=='0'&&_0x45e9bc['to_floorlevel']!=='');var _0x1d409c=0x0;_0x207b7b[_0x55325b(0x23c)](_0x5f06bd=>{var _0x10f33b=_0x55325b;parseInt(_0x5f06bd[_0x10f33b(0x2a4)])<parseInt(_0x5f06bd[_0x10f33b(0x217)])&&_0x1d409c++;});if(_0x1d409c!=0x0)return _0xc35310[_0x55325b(0x1fb)](_0x55325b(0x200),_0x55325b(0x272)),_0xfc0b37[_0x55325b(0x1fc)](_0x55325b(0x295));const _0x5ecc98=new transfers_logs();await _0x5ecc98[_0x55325b(0x24b)]();for(let _0x5d523d=0x0;_0x5d523d<=_0xbf952c[_0x55325b(0x1fa)]-0x1;_0x5d523d++){_0x1d4cb4[_0x5d523d][_0x55325b(0x250)]='LOG-TRF-'+_0x5ecc98['invoice_init'][_0x55325b(0x219)]()['padStart'](0x8,'0');}const _0x3b7420=new transfers_finished({'date':_0x2251a3,'from_warehouse':_0x16e489,'to_warehouse':_0x164587,'product':_0x207b7b,'note':_0x2e7716,'invoice':_0x55325b(0x239)+_0x5ecc98['invoice_init']['toString']()[_0x55325b(0x2bf)](0x8,'0'),'type_of_transaction':_0x55325b(0x269),'type_of_process':_0x55325b(0x24a),'PO_number':_0x232661,'RequestedBy':_0x1974cf,'DateofRequest':_0x5de48d,'typeservices':_0x4b52c5,'destination':_0x44c3ba,'deliverydate':_0x4ac5ab,'driver':_0x41cabc,'plate':_0x2f39cb,'van':_0xa8d13f,'DRSI':_0xebdbd7,'typevehicle':_0x374745,'TSU':_0x4fdfe2,'TFU':_0x1260f2}),_0x5e0944=await _0x3b7420[_0x55325b(0x24b)]();_0xc35310[_0x55325b(0x1fb)](_0x55325b(0x233),_0x55325b(0x255)),_0xfc0b37[_0x55325b(0x1fc)](_0x55325b(0x256)+_0x5e0944['_id']);}catch(_0x122ae4){console['log'](_0x122ae4),_0xfc0b37[_0x55325b(0x277)](0xc8)[_0x55325b(0x284)]({'errorMessage':_0x122ae4['message']});}}),router[a0_0x182f95(0x29b)](a0_0x182f95(0x271),auth,async(_0x5225c5,_0x26c65e)=>{var _0x3323f6=a0_0x182f95;try{const {date:_0x3c607d,from_warehouse:_0x15fd2d,FromRoom_name:_0x55642d,to_warehouse:_0x5bfae1,ToRoom_name:_0x24ad23,prod_name:_0x2b2a4d,from_prod_qty:_0x121b69,from_prod_level:_0x1ea6e6,from_prod_isle:_0x2b7970,from_prod_pallet:_0x5d6b6b,to_prod_qty:_0x22d03b,to_prod_level:_0x47ca6,to_prod_isle:_0x333d52,to_prod_pallet:_0x2dc54d,primary_code:_0x4233d6,secondary_code:_0x5be2df,product_code3:_0x8372c,note:_0x4d051c,MaxStocks_data2:_0x4560a8,invoice:_0x2b24ad,expiry_date:_0x2889af,PO_number:_0x4d333c,ReqBy:_0x34a5dd,dateofreq:_0x2c4ed1,typeservicesData:_0x5d6f93,destination:_0x3b37c4,deliverydate:_0x406409,driver:_0x4e0ea3,plate:_0x163986,van:_0x5d87fe,DRSI:_0x51b127,typevehicle:_0x1061b3,TSU:_0x2850b2,TFU:_0x5293d0}=_0x5225c5[_0x3323f6(0x2b7)];if(typeof _0x2b2a4d=='string')var _0x1305b6=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x254)]],_0x1e5682=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x281)]],_0x1814b3=[_0x5225c5['body'][_0x3323f6(0x26a)]],_0x5d5db9=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x20b)]],_0x5ae718=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x25b)]],_0x3a2bbc=[_0x5225c5['body'][_0x3323f6(0x290)]],_0x4233a1=[_0x5225c5[_0x3323f6(0x2b7)]['secondary_code']],_0x5502fe=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x23a)]],_0x2f8ade=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x2a9)]],_0x543a19=[_0x5225c5['body'][_0x3323f6(0x20a)]],_0x232a9b=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x22b)]],_0x246a8f=[_0x5225c5[_0x3323f6(0x2b7)]['batch_code']],_0x33562e=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x216)]],_0x3ef0f1=[_0x5225c5['body'][_0x3323f6(0x2ba)]],_0x56e091=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x221)]],_0x2c49cb=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x26e)]],_0x47bf7a=[_0x5225c5['body'][_0x3323f6(0x245)]],_0x514e92=[_0x5225c5['body'][_0x3323f6(0x28c)]],_0xc0fd5a=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x291)]],_0x50ba7e=[_0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x20d)]],_0x3c6b17=[_0x5225c5[_0x3323f6(0x2b7)]['id_transaction']];else var _0x1305b6=[..._0x5225c5[_0x3323f6(0x2b7)]['prod_name']],_0x1e5682=[..._0x5225c5['body'][_0x3323f6(0x281)]],_0x1814b3=[..._0x5225c5[_0x3323f6(0x2b7)]['from_prod_level2']],_0x5d5db9=[..._0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x20b)]],_0x5ae718=[..._0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x25b)]],_0x3a2bbc=[..._0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x290)]],_0x4233a1=[..._0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x232)]],_0x5502fe=[..._0x5225c5['body'][_0x3323f6(0x23a)]],_0x2f8ade=[..._0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x2a9)]],_0x543a19=[..._0x5225c5['body']['primary_unit']],_0x232a9b=[..._0x5225c5[_0x3323f6(0x2b7)]['secondary_unit']],_0x246a8f=[..._0x5225c5[_0x3323f6(0x2b7)]['batch_code']],_0x33562e=[..._0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x216)]],_0x3ef0f1=[..._0x5225c5[_0x3323f6(0x2b7)]['product_date']],_0x56e091=[..._0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x221)]],_0x2c49cb=[..._0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x26e)]],_0x47bf7a=[..._0x5225c5[_0x3323f6(0x2b7)]['prod_cat']],_0x514e92=[..._0x5225c5['body'][_0x3323f6(0x28c)]],_0xc0fd5a=[..._0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x291)]],_0x50ba7e=[..._0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x20d)]],_0x3c6b17=[..._0x5225c5[_0x3323f6(0x2b7)][_0x3323f6(0x28a)]];const _0x56de15=_0x1305b6[_0x3323f6(0x224)](_0x5ad7d9=>{return _0x5ad7d9={'product_name':_0x5ad7d9};});_0x1e5682[_0x3323f6(0x23c)]((_0x4f4d07,_0x12b358)=>{_0x56de15[_0x12b358]['from_quantity']=_0x4f4d07;}),_0x1814b3[_0x3323f6(0x23c)]((_0x22de51,_0x49381e)=>{var _0x51b2e3=_0x3323f6,_0x2f93e6=_0x22de51[_0x51b2e3(0x2b6)](/[A-Za-z]+/)[0x0],_0x30307f=parseInt(_0x22de51[_0x51b2e3(0x2b6)](/\d+/)[0x0]);_0x56de15[_0x49381e]['from_bay']=_0x30307f,_0x56de15[_0x49381e][_0x51b2e3(0x218)]=_0x2f93e6;}),_0x3c6b17[_0x3323f6(0x23c)]((_0x220081,_0x3ce280)=>{var _0x13ff6a=_0x3323f6;_0x56de15[_0x3ce280][_0x13ff6a(0x28a)]=_0x220081;}),_0x50ba7e[_0x3323f6(0x23c)]((_0x1514e1,_0x366975)=>{var _0xe53073=_0x3323f6;_0x56de15[_0x366975][_0xe53073(0x20d)]=_0x1514e1;}),_0x5d5db9['forEach']((_0xaaee68,_0x305dff)=>{_0x56de15[_0x305dff]['to_quantity']=_0xaaee68;}),_0x5ae718['forEach']((_0x55cc2d,_0xe23f0a)=>{var _0x5164e5=_0x3323f6,_0x335450=_0x55cc2d[_0x5164e5(0x2b6)](/[A-Za-z]+/)[0x0],_0x1d01e6=parseInt(_0x55cc2d[_0x5164e5(0x2b6)](/\d+/)[0x0]);_0x56de15[_0xe23f0a][_0x5164e5(0x26d)]=_0x335450,_0x56de15[_0xe23f0a][_0x5164e5(0x240)]=_0x1d01e6;}),_0x3a2bbc[_0x3323f6(0x23c)]((_0x54e7aa,_0x16eca8)=>{var _0x494453=_0x3323f6;_0x56de15[_0x16eca8][_0x494453(0x290)]=_0x54e7aa;}),_0x4233a1[_0x3323f6(0x23c)]((_0x5a3462,_0x447676)=>{var _0x178aa6=_0x3323f6;_0x56de15[_0x447676][_0x178aa6(0x232)]=_0x5a3462;}),_0x5502fe[_0x3323f6(0x23c)]((_0x189035,_0x198316)=>{_0x56de15[_0x198316]['product_code']=_0x189035;}),_0x2f8ade[_0x3323f6(0x23c)]((_0x109794,_0x51c83b)=>{var _0x48e218=_0x3323f6;_0x56de15[_0x51c83b][_0x48e218(0x222)]=_0x109794;}),_0x543a19[_0x3323f6(0x23c)]((_0x317261,_0x38e41f)=>{_0x56de15[_0x38e41f]['unit']=_0x317261;}),_0x232a9b[_0x3323f6(0x23c)]((_0x2dbeac,_0x3bd9b0)=>{_0x56de15[_0x3bd9b0]['secondary_unit']=_0x2dbeac;}),_0x246a8f[_0x3323f6(0x23c)]((_0x4dd3db,_0x1226b2)=>{var _0xbe16d3=_0x3323f6;_0x56de15[_0x1226b2][_0xbe16d3(0x296)]=_0x4dd3db;}),_0x33562e[_0x3323f6(0x23c)]((_0x5e7ad2,_0x3049be)=>{var _0x1ca704=_0x3323f6;_0x56de15[_0x3049be][_0x1ca704(0x216)]=_0x5e7ad2;}),_0x3ef0f1['forEach']((_0x1b98c2,_0x43108a)=>{var _0x4a3f51=_0x3323f6;_0x56de15[_0x43108a][_0x4a3f51(0x2ad)]=_0x1b98c2;}),_0x56e091['forEach']((_0x22ccc1,_0x47e668)=>{var _0x39b8b4=_0x3323f6;_0x56de15[_0x47e668][_0x39b8b4(0x222)]=_0x22ccc1;}),_0x2c49cb[_0x3323f6(0x23c)]((_0x1c2f7e,_0x55d2a7)=>{var _0x2fc7d5=_0x3323f6;_0x56de15[_0x55d2a7][_0x2fc7d5(0x26e)]=_0x1c2f7e;}),_0x47bf7a[_0x3323f6(0x23c)]((_0x1e9f38,_0x44ca28)=>{var _0xa9ca1a=_0x3323f6;_0x56de15[_0x44ca28][_0xa9ca1a(0x245)]=_0x1e9f38;}),_0x514e92[_0x3323f6(0x23c)]((_0x2fa562,_0x5db0b1)=>{var _0x3ba7b9=_0x3323f6;_0x56de15[_0x5db0b1][_0x3ba7b9(0x265)]=_0x2fa562;}),_0xc0fd5a[_0x3323f6(0x23c)]((_0x203bd4,_0x18230e)=>{_0x56de15[_0x18230e]['to_room_name']=_0x203bd4;});const _0x3d8dd8=_0x56de15['filter'](_0x254675=>_0x254675[_0x3323f6(0x217)]!=='0'&&_0x254675['to_quantity']!==''||_0x254675[_0x3323f6(0x283)]!=='0'&&_0x254675[_0x3323f6(0x283)]!=='');var _0x3fce8b=0x0;_0x3d8dd8[_0x3323f6(0x23c)](_0x12bffa=>{var _0x56f434=_0x3323f6;parseInt(_0x12bffa['from_quantity'])<parseInt(_0x12bffa[_0x56f434(0x217)])&&_0x3fce8b++;});if(_0x3fce8b!=0x0)return _0x5225c5['flash']('errors',_0x3323f6(0x272)),_0x26c65e[_0x3323f6(0x1fc)](_0x3323f6(0x295));const _0x18b8d6=new invoice_for_transfer();await _0x18b8d6[_0x3323f6(0x24b)]();for(let _0xbe8e00=0x0;_0xbe8e00<=_0xc0fd5a[_0x3323f6(0x1fa)]-0x1;_0xbe8e00++){_0x56de15[_0xbe8e00]['To_invoice']=_0x3323f6(0x286)+_0x18b8d6['invoice_init'][_0x3323f6(0x219)]()[_0x3323f6(0x2bf)](0x8,'0');}const _0x55af4c=new transfers_finished({'date':_0x3c607d,'from_warehouse':_0x15fd2d,'to_warehouse':_0x15fd2d,'product':_0x3d8dd8,'note':_0x4d051c,'invoice':_0x3323f6(0x286)+_0x18b8d6[_0x3323f6(0x26f)][_0x3323f6(0x219)]()[_0x3323f6(0x2bf)](0x8,'0'),'type_of_process':'bin2bin','type_of_transaction':_0x3323f6(0x21c),'PO_number':_0x4d333c,'RequestedBy':_0x34a5dd,'DateofRequest':_0x2c4ed1,'typeservices':_0x5d6f93,'destination':_0x3b37c4,'deliverydate':_0x406409,'driver':_0x4e0ea3,'plate':_0x163986,'van':_0x5d87fe,'DRSI':_0x51b127,'typevehicle':_0x1061b3,'TSU':_0x2850b2,'TFU':_0x5293d0}),_0x58aa71=await _0x55af4c['save']();_0x5225c5[_0x3323f6(0x1fb)](_0x3323f6(0x233),_0x3323f6(0x255)),_0x26c65e[_0x3323f6(0x1fc)](_0x3323f6(0x256)+_0x58aa71[_0x3323f6(0x28b)]);}catch(_0x3c75dd){console[_0x3323f6(0x234)](_0x3c75dd),_0x26c65e[_0x3323f6(0x277)](0xc8)[_0x3323f6(0x284)]({'errorMessage':_0x3c75dd['message']});}}),router[a0_0x182f95(0x29b)](a0_0x182f95(0x282),auth,async(_0x820a3e,_0x1ef077)=>{var _0x16a8be=a0_0x182f95;try{const {date:_0x16292a,from_warehouse:_0x1d594c,FromRoom_name:_0x57679c,to_warehouse:_0x3eab82,ToRoom_name:_0x3042f3,prod_name:_0x1ff9a9,from_prod_qty:_0x188b6d,from_prod_level:_0x2e7311,from_prod_isle:_0x3fc232,from_prod_pallet:_0x4ad633,to_prod_qty:_0x331a7b,to_prod_level:_0x48a51f,to_prod_isle:_0x593d6a,to_prod_pallet:_0x21696b,primary_code:_0x3a0969,secondary_code:_0x5c341a,product_code3:_0x201928,note:_0x3b368a,MaxStocks_data2:_0x2b9773,invoice:_0x5f4e01,expiry_date:_0xdfefee,PO_number_loc:_0x38e8f9,ReqBy_loc:_0x14dec8,dateofreq_loc:_0x2dc95e,typeservices_loc_Data:_0x5a312e,destination_loc:_0xbff0d3,deliverydate_loc:_0x49c447,driver_loc:_0x559d16,plate_loc:_0x2287e3,van_loc:_0x38dec1,DRSI_loc:_0xb3588f,typevehicle_loc:_0x509429,TSU_loc:_0x408753,TFU_loc:_0x4f3ffc}=_0x820a3e[_0x16a8be(0x2b7)];if(typeof _0x1ff9a9==_0x16a8be(0x1f9))var _0x20fb51=[_0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x254)]],_0x2e9ff8=[_0x820a3e[_0x16a8be(0x2b7)]['from_prod_qty']],_0x5bdc2e=[_0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x26a)]],_0x2cd8f4=[_0x820a3e['body'][_0x16a8be(0x20b)]],_0x4bfba2=[_0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x25b)]],_0x5d87ac=[_0x820a3e[_0x16a8be(0x2b7)]['primary_code']],_0x3e1097=[_0x820a3e[_0x16a8be(0x2b7)]['secondary_code']],_0x23211f=[_0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x23a)]],_0x5e4200=[_0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x2a9)]],_0x28bfed=[_0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x20a)]],_0x45f3bc=[_0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x22b)]],_0x9a236=[_0x820a3e[_0x16a8be(0x2b7)]['batch_code']],_0x41586f=[_0x820a3e['body'][_0x16a8be(0x216)]],_0x3adc37=[_0x820a3e[_0x16a8be(0x2b7)]['product_date']],_0x5e83a7=[_0x820a3e['body']['MaxStocks_data']],_0x3bb282=[_0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x26e)]],_0x33fe90=[_0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x245)]],_0x576af8=[_0x820a3e['body'][_0x16a8be(0x28c)]],_0x52f254=[_0x820a3e[_0x16a8be(0x2b7)]['ToRoomAssigned']],_0x319c63=[_0x820a3e['body'][_0x16a8be(0x20d)]],_0x223b67=[_0x820a3e['body'][_0x16a8be(0x28a)]];else var _0x20fb51=[..._0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x254)]],_0x2e9ff8=[..._0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x281)]],_0x5bdc2e=[..._0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x26a)]],_0x2cd8f4=[..._0x820a3e['body']['New_Qty_Converted']],_0x4bfba2=[..._0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x25b)]],_0x5d87ac=[..._0x820a3e[_0x16a8be(0x2b7)]['primary_code']],_0x3e1097=[..._0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x232)]],_0x23211f=[..._0x820a3e[_0x16a8be(0x2b7)]['product_code3']],_0x5e4200=[..._0x820a3e['body'][_0x16a8be(0x2a9)]],_0x28bfed=[..._0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x20a)]],_0x45f3bc=[..._0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x22b)]],_0x9a236=[..._0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x296)]],_0x41586f=[..._0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x216)]],_0x3adc37=[..._0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x2ba)]],_0x5e83a7=[..._0x820a3e[_0x16a8be(0x2b7)]['MaxStocks_data']],_0x3bb282=[..._0x820a3e['body'][_0x16a8be(0x26e)]],_0x33fe90=[..._0x820a3e['body'][_0x16a8be(0x245)]],_0x576af8=[..._0x820a3e[_0x16a8be(0x2b7)][_0x16a8be(0x28c)]],_0x52f254=[..._0x820a3e['body'][_0x16a8be(0x291)]],_0x319c63=[..._0x820a3e[_0x16a8be(0x2b7)]['from_invoice']],_0x223b67=[..._0x820a3e['body'][_0x16a8be(0x28a)]];const _0x5d8502=_0x20fb51[_0x16a8be(0x224)](_0x47cfae=>{return _0x47cfae={'product_name':_0x47cfae};});_0x2e9ff8[_0x16a8be(0x23c)]((_0x108a48,_0x182761)=>{var _0xad24b1=_0x16a8be;_0x5d8502[_0x182761][_0xad24b1(0x2a4)]=_0x108a48;}),_0x5bdc2e[_0x16a8be(0x23c)]((_0x3adbfb,_0x43a19a)=>{var _0x55c563=_0x16a8be,_0x1b42df=_0x3adbfb[_0x55c563(0x2b6)](/[A-Za-z]+/)[0x0],_0x17b9af=parseInt(_0x3adbfb[_0x55c563(0x2b6)](/\d+/)[0x0]);_0x5d8502[_0x43a19a][_0x55c563(0x299)]=_0x17b9af,_0x5d8502[_0x43a19a][_0x55c563(0x218)]=_0x1b42df;}),_0x223b67['forEach']((_0x2ece14,_0x4c669f)=>{var _0x187e78=_0x16a8be;_0x5d8502[_0x4c669f][_0x187e78(0x28a)]=_0x2ece14;}),_0x319c63[_0x16a8be(0x23c)]((_0x1f985d,_0x168b30)=>{var _0x9e21c7=_0x16a8be;_0x5d8502[_0x168b30][_0x9e21c7(0x20d)]=_0x1f985d;}),_0x2cd8f4[_0x16a8be(0x23c)]((_0x561385,_0x569469)=>{var _0x3f3ae5=_0x16a8be;_0x5d8502[_0x569469][_0x3f3ae5(0x217)]=_0x561385;}),_0x4bfba2['forEach']((_0x56d13c,_0xddf39e)=>{var _0x4e20a4=_0x16a8be,_0x50042b=_0x56d13c[_0x4e20a4(0x2b6)](/[A-Za-z]+/)[0x0],_0x586338=parseInt(_0x56d13c[_0x4e20a4(0x2b6)](/\d+/)[0x0]);_0x5d8502[_0xddf39e]['to_level']=_0x50042b,_0x5d8502[_0xddf39e]['to_bay']=_0x586338;}),_0x5d87ac['forEach']((_0x3834f8,_0x36e94d)=>{_0x5d8502[_0x36e94d]['primary_code']=_0x3834f8;}),_0x3e1097[_0x16a8be(0x23c)]((_0x61d82,_0x5f3dee)=>{_0x5d8502[_0x5f3dee]['secondary_code']=_0x61d82;}),_0x23211f[_0x16a8be(0x23c)]((_0x26b6d5,_0xb8d05d)=>{var _0x2d7f81=_0x16a8be;_0x5d8502[_0xb8d05d][_0x2d7f81(0x20c)]=_0x26b6d5;}),_0x5e4200[_0x16a8be(0x23c)]((_0xfe17ee,_0x172f5b)=>{_0x5d8502[_0x172f5b]['maxProducts']=_0xfe17ee;}),_0x28bfed[_0x16a8be(0x23c)]((_0x3b91c3,_0x371031)=>{_0x5d8502[_0x371031]['unit']=_0x3b91c3;}),_0x45f3bc['forEach']((_0x39ce79,_0xe2e068)=>{_0x5d8502[_0xe2e068]['secondary_unit']=_0x39ce79;}),_0x9a236[_0x16a8be(0x23c)]((_0x1a508e,_0x8aac22)=>{var _0x52d7e2=_0x16a8be;_0x5d8502[_0x8aac22][_0x52d7e2(0x296)]=_0x1a508e;}),_0x41586f[_0x16a8be(0x23c)]((_0x5cecff,_0x341f9c)=>{var _0xd3079b=_0x16a8be;_0x5d8502[_0x341f9c][_0xd3079b(0x216)]=_0x5cecff;}),_0x3adc37['forEach']((_0x35d0b3,_0x355d64)=>{var _0x2d2ebd=_0x16a8be;_0x5d8502[_0x355d64][_0x2d2ebd(0x2ad)]=_0x35d0b3;}),_0x5e83a7[_0x16a8be(0x23c)]((_0x25c970,_0x5b1661)=>{_0x5d8502[_0x5b1661]['maxProducts']=_0x25c970;}),_0x3bb282['forEach']((_0xd3b9a7,_0x4a2af6)=>{_0x5d8502[_0x4a2af6]['maxPerUnit']=_0xd3b9a7;}),_0x33fe90[_0x16a8be(0x23c)]((_0x3e6ef1,_0x2c7357)=>{var _0x51f77c=_0x16a8be;_0x5d8502[_0x2c7357][_0x51f77c(0x245)]=_0x3e6ef1;}),_0x576af8[_0x16a8be(0x23c)]((_0x4a28c5,_0x210f14)=>{_0x5d8502[_0x210f14]['from_room_name']=_0x4a28c5;}),_0x52f254[_0x16a8be(0x23c)]((_0x51e503,_0x49f1cc)=>{_0x5d8502[_0x49f1cc]['to_room_name']=_0x51e503;});const _0x53dbf6=_0x5d8502['filter'](_0x3ca89b=>_0x3ca89b[_0x16a8be(0x217)]!=='0'&&_0x3ca89b[_0x16a8be(0x217)]!==''||_0x3ca89b[_0x16a8be(0x283)]!=='0'&&_0x3ca89b[_0x16a8be(0x283)]!=='');var _0x45722a=0x0;_0x53dbf6['forEach'](_0x17bd16=>{var _0x4725dc=_0x16a8be;parseInt(_0x17bd16[_0x4725dc(0x2a4)])<parseInt(_0x17bd16[_0x4725dc(0x217)])&&_0x45722a++;});if(_0x45722a!=0x0)return _0x820a3e[_0x16a8be(0x1fb)](_0x16a8be(0x200),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x1ef077[_0x16a8be(0x1fc)]('back');const _0x51812c=new invoice_for_transfer();await _0x51812c[_0x16a8be(0x24b)]();for(let _0x5425f6=0x0;_0x5425f6<=_0x52f254[_0x16a8be(0x1fa)]-0x1;_0x5425f6++){_0x5d8502[_0x5425f6][_0x16a8be(0x250)]=_0x16a8be(0x286)+_0x51812c[_0x16a8be(0x26f)][_0x16a8be(0x219)]()['padStart'](0x8,'0');}const _0xafbcb0=new transfers_finished({'date':_0x16292a,'from_warehouse':_0x1d594c,'to_warehouse':_0x3eab82,'product':_0x53dbf6,'note':_0x3b368a,'invoice':_0x16a8be(0x286)+_0x51812c[_0x16a8be(0x26f)][_0x16a8be(0x219)]()[_0x16a8be(0x2bf)](0x8,'0'),'type_of_transaction':_0x16a8be(0x21c),'type_of_process':_0x16a8be(0x24a),'PO_number':_0x38e8f9,'RequestedBy':_0x14dec8,'DateofRequest':_0x2dc95e,'typeservices':_0x5a312e,'destination':_0xbff0d3,'deliverydate':_0x49c447,'driver':_0x559d16,'plate':_0x2287e3,'van':_0x38dec1,'DRSI':_0xb3588f,'typevehicle':_0x509429,'TSU':_0x408753,'TFU':_0x4f3ffc}),_0x51b252=await _0xafbcb0['save']();_0x820a3e[_0x16a8be(0x1fb)]('success',_0x16a8be(0x255)),_0x1ef077[_0x16a8be(0x1fc)](_0x16a8be(0x256)+_0x51b252[_0x16a8be(0x28b)]);}catch(_0x3ca248){console['log'](_0x3ca248),_0x1ef077[_0x16a8be(0x277)](0xc8)['json']({'errorMessage':_0x3ca248[_0x16a8be(0x29c)]});}}),router[a0_0x182f95(0x270)](a0_0x182f95(0x208),auth,async(_0x1acda7,_0x4b804a)=>{var _0x54caf8=a0_0x182f95;try{const {username:_0x18807e,email:_0x1d9522,role:_0xa3307b}=_0x1acda7[_0x54caf8(0x29d)],_0x5a40c4=_0x1acda7[_0x54caf8(0x29d)],_0x3b30f1=await profile[_0x54caf8(0x20f)]({'email':_0x5a40c4[_0x54caf8(0x253)]}),_0x2608e9=await master_shop[_0x54caf8(0x214)](),_0x22ba8d=await transfers_finished[_0x54caf8(0x292)](_0x1acda7[_0x54caf8(0x2be)]['id']);let _0x542f2a;if(_0x5a40c4[_0x54caf8(0x1ff)]=='staff'){const _0x1fdaed=await staff[_0x54caf8(0x20f)]({'email':_0x5a40c4[_0x54caf8(0x253)]});_0x542f2a=await warehouse['find']({'status':'Enabled','name':_0x1fdaed[_0x54caf8(0x261)],'warehouse_category':_0x54caf8(0x246)});}else _0x542f2a=await warehouse[_0x54caf8(0x214)]({'status':_0x54caf8(0x1f7),'warehouse_category':_0x54caf8(0x246)});const _0x2ce6d2=await warehouse[_0x54caf8(0x2bc)]([{'$match':{'name':_0x22ba8d['from_warehouse'],'warehouse_category':_0x54caf8(0x246)}},{'$unwind':_0x54caf8(0x244)},{'$group':{'_id':_0x54caf8(0x2a2),'name':{'$first':_0x54caf8(0x2a7)},'product_stock':{'$first':_0x54caf8(0x289)},'bay':{'$first':_0x54caf8(0x2a8)},'bin':{'$first':_0x54caf8(0x21a)},'type':{'$first':_0x54caf8(0x28e)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x54caf8(0x29e)},'product_code':{'$first':_0x54caf8(0x2a6)},'storage':{'$first':_0x54caf8(0x241)},'rack':{'$first':_0x54caf8(0x21f)},'expiry_date':{'$first':_0x54caf8(0x236)},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':'$room'},'warehoue_name':{'$first':'$name'}}}]),_0x37ac35=await product['find']({});if(_0x2608e9[0x0][_0x54caf8(0x27f)]==_0x54caf8(0x267)){var _0x446d1f=users[_0x54caf8(0x2ae)];console[_0x54caf8(0x234)](_0x446d1f);}else{if(_0x2608e9[0x0]['language']=='Hindi')var _0x446d1f=users[_0x54caf8(0x2b0)];else{if(_0x2608e9[0x0]['language']==_0x54caf8(0x1f4))var _0x446d1f=users[_0x54caf8(0x1f4)];else{if(_0x2608e9[0x0]['language']=='Spanish')var _0x446d1f=users['Spanish'];else{if(_0x2608e9[0x0][_0x54caf8(0x27f)]==_0x54caf8(0x2b1))var _0x446d1f=users[_0x54caf8(0x2b1)];else{if(_0x2608e9[0x0][_0x54caf8(0x27f)]==_0x54caf8(0x25d))var _0x446d1f=users[_0x54caf8(0x264)];else{if(_0x2608e9[0x0][_0x54caf8(0x27f)]==_0x54caf8(0x211))var _0x446d1f=users['Chinese'];else{if(_0x2608e9[0x0][_0x54caf8(0x27f)]==_0x54caf8(0x2af))var _0x446d1f=users['Arabic'];}}}}}}}_0x4b804a['render']('edit_transfer_finished_view',{'success':_0x1acda7['flash']('success'),'errors':_0x1acda7[_0x54caf8(0x1fb)](_0x54caf8(0x200)),'role':_0x5a40c4,'profile':_0x3b30f1,'master_shop':_0x2608e9,'warehouse':_0x542f2a,'transfer':_0x22ba8d,'stock':_0x2ce6d2,'unit':_0x37ac35,'language':_0x446d1f});}catch(_0x5e7492){console[_0x54caf8(0x234)](_0x5e7492);}}),router['post'](a0_0x182f95(0x208),auth,async(_0x6827ed,_0x426d61)=>{var _0x3876e1=a0_0x182f95;try{const {invoice:_0x1e5986,from_warehouse:_0x5f1cb3,FromRoom_name:_0x3826d3,to_warehouse:_0x228886,ToRoom_name:_0x562788}=_0x6827ed['body'],_0x2cab6b=await transfers_finished['findById'](_0x6827ed[_0x3876e1(0x2be)]['id']),_0x5e0834=_0x2cab6b[_0x3876e1(0x278)][_0x3876e1(0x224)](async _0x3b9e26=>{var _0x3fc945=_0x3876e1;if(_0x3b9e26[_0x3fc945(0x217)]>0x0){var _0x52188a=await warehouse[_0x3fc945(0x20f)]({'name':_0x5f1cb3,'room':_0x3b9e26[_0x3fc945(0x265)]});const _0x20ac47=_0x52188a['product_details'][_0x3fc945(0x224)](_0x4f3241=>{var _0x2b6959=_0x3fc945;_0x4f3241[_0x2b6959(0x28b)]==_0x3b9e26['id_transaction']&&(_0x4f3241[_0x2b6959(0x213)]=Math['max'](0x0,Math[_0x2b6959(0x297)](_0x4f3241['product_stock'])-Math[_0x2b6959(0x297)](_0x3b9e26['to_quantity'])),console[_0x2b6959(0x234)](_0x4f3241[_0x2b6959(0x213)]));});}return _0x52188a;});Promise[_0x3876e1(0x1f6)](_0x5e0834)['then'](async _0x2bf901=>{var _0x329be5=_0x3876e1;try{for(const _0x3fa945 of _0x2bf901){await _0x3fa945[_0x329be5(0x24b)]();}const _0x5a7d7a=_0x2cab6b[_0x329be5(0x278)][_0x329be5(0x224)](async _0x144c06=>{var _0xafdcbc=_0x329be5,_0x5a79d0=await warehouse[_0xafdcbc(0x20f)]({'name':_0x228886,'room':_0x144c06[_0xafdcbc(0x27c)]});if(_0x144c06['to_quantity']>0x0){var _0x39223b=0x0;const _0x48bdd9=_0x5a79d0['product_details']['map'](_0x148f48=>{var _0x40babb=_0xafdcbc;_0x148f48['product_name']==_0x144c06['product_name']&&_0x148f48[_0x40babb(0x276)]==_0x144c06[_0x40babb(0x240)]&&_0x148f48[_0x40babb(0x216)]==_0x144c06[_0x40babb(0x216)]&&_0x148f48[_0x40babb(0x2ad)]==_0x144c06[_0x40babb(0x2ad)]&&_0x148f48['batch_code']==_0x144c06[_0x40babb(0x296)]&&_0x148f48[_0x40babb(0x24d)]==_0x144c06[_0x40babb(0x250)]&&(typeof _0x144c06[_0x40babb(0x28a)]==_0x40babb(0x207)?(console['log'](_0x40babb(0x223),_0x148f48['product_stock']+_0x40babb(0x273)+_0x148f48[_0x40babb(0x28b)]+_0x40babb(0x27b)+Math[_0x40babb(0x297)](_0x148f48['product_stock'])+Math[_0x40babb(0x297)](_0x144c06[_0x40babb(0x217)])),_0x148f48[_0x40babb(0x213)]=Math[_0x40babb(0x297)](_0x148f48[_0x40babb(0x213)])+Math[_0x40babb(0x297)](_0x144c06[_0x40babb(0x217)])):_0x148f48['product_stock']=Math[_0x40babb(0x297)](_0x148f48[_0x40babb(0x213)])+Math[_0x40babb(0x297)](_0x144c06[_0x40babb(0x217)]),_0x39223b++);});_0x39223b=='0'&&(_0x5a79d0[_0xafdcbc(0x2ac)]=_0x5a79d0[_0xafdcbc(0x2ac)][_0xafdcbc(0x227)]({'product_name':_0x144c06[_0xafdcbc(0x288)],'product_stock':_0x144c06[_0xafdcbc(0x217)],'bay':_0x144c06['to_bay'],'level':_0x144c06['to_level'],'product_code':_0x144c06[_0xafdcbc(0x20c)],'primary_code':_0x144c06[_0xafdcbc(0x290)],'secondary_code':_0x144c06[_0xafdcbc(0x232)],'expiry_date':_0x144c06[_0xafdcbc(0x216)],'production_date':_0x144c06['production_date'],'maxProducts':_0x144c06[_0xafdcbc(0x222)],'batch_code':_0x144c06[_0xafdcbc(0x296)],'secondary_unit':_0x144c06['secondary_unit'],'unit':_0x144c06[_0xafdcbc(0x287)],'maxProducts':_0x144c06['maxProducts'],'maxPerUnit':_0x144c06[_0xafdcbc(0x26e)],'invoice':_0x144c06[_0xafdcbc(0x250)]}));}return _0x5a79d0;});Promise[_0x329be5(0x1f6)](_0x5a7d7a)[_0x329be5(0x23f)](async _0x23c9aa=>{var _0x41c7f1=_0x329be5;try{console[_0x41c7f1(0x234)](_0x2cab6b['type_of_process']);if(_0x2cab6b[_0x41c7f1(0x226)]!=_0x41c7f1(0x24a))for(const _0xf56eb8 of _0x23c9aa){await warehouse[_0x41c7f1(0x21b)]({'_id':_0xf56eb8[_0x41c7f1(0x28b)]},{'$addToSet':{'product_details':{'$each':_0xf56eb8[_0x41c7f1(0x2ac)]}}});}_0x2cab6b[_0x41c7f1(0x231)]=_0x41c7f1(0x210);const _0xa9f98=await _0x2cab6b[_0x41c7f1(0x24b)](),_0x388cb6=await master_shop[_0x41c7f1(0x214)](),_0x541595=await email_settings[_0x41c7f1(0x20f)](),_0x463994=await supervisor_settings['find']();var _0x35ca1a=_0x2cab6b[_0x41c7f1(0x278)],_0x39cf6e='',_0x9692ba;for(_0x9692ba in _0x35ca1a){var _0x2daaf9='FG';_0x2cab6b[_0x41c7f1(0x21e)]==_0x41c7f1(0x2bb)&&(_0x2daaf9='DG'),_0x39cf6e+=_0x41c7f1(0x2b2)+_0x41c7f1(0x24f)+_0x35ca1a[_0x9692ba][_0x41c7f1(0x288)]+_0x41c7f1(0x25a)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x35ca1a[_0x9692ba][_0x41c7f1(0x20c)]+_0x41c7f1(0x25a)+_0x41c7f1(0x24f)+_0x35ca1a[_0x9692ba][_0x41c7f1(0x217)]+'</td>'+_0x41c7f1(0x24f)+_0x35ca1a[_0x9692ba][_0x41c7f1(0x287)]+_0x41c7f1(0x25a)+_0x41c7f1(0x24f)+_0x35ca1a[_0x9692ba][_0x41c7f1(0x22b)]+_0x41c7f1(0x25a)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2cab6b[_0x41c7f1(0x21e)]+_0x41c7f1(0x25a)+_0x41c7f1(0x24f)+_0x35ca1a[_0x9692ba]['to_room_name']+_0x41c7f1(0x25a)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2daaf9+_0x35ca1a[_0x9692ba]['to_bay']+_0x41c7f1(0x25a)+_0x41c7f1(0x279);}_0x6827ed[_0x41c7f1(0x1fb)]('success',_0x41c7f1(0x1fd)),_0x426d61[_0x41c7f1(0x1fc)]('/picking_list/PDF_transfer/'+_0xa9f98[_0x41c7f1(0x28b)]);}catch(_0x262fff){console[_0x41c7f1(0x242)](_0x262fff),_0x426d61[_0x41c7f1(0x277)](0x1f4)[_0x41c7f1(0x284)]({'error':_0x41c7f1(0x293)});}})[_0x329be5(0x262)](_0x1d7d6c=>{var _0x53a517=_0x329be5;console['error'](_0x1d7d6c),_0x426d61['status'](0x1f4)[_0x53a517(0x284)]({'error':_0x53a517(0x25f)});});}catch(_0x4325af){console['error'](_0x4325af),_0x426d61[_0x329be5(0x277)](0x1f4)[_0x329be5(0x284)]({'error':_0x329be5(0x206)});}})[_0x3876e1(0x262)](_0x38f0c1=>{var _0x13027b=_0x3876e1;console[_0x13027b(0x242)](_0x38f0c1),_0x426d61[_0x13027b(0x277)](0x1f4)[_0x13027b(0x284)]({'error':_0x13027b(0x25f)});});}catch(_0x509d24){_0x426d61[_0x3876e1(0x284)]({'message':_0x509d24[_0x3876e1(0x29c)]});}});function BayBinSelected(_0x2f7fd3,_0x5de23d){var _0x416ff5=a0_0x182f95,_0xe2d312=[];let _0x105d4e=[];var _0x351d87=[];if(_0x2f7fd3=='DRY\x20GOODS'){switch(_0x5de23d){case _0x416ff5(0x201):_0xe2d312=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10];break;case _0x416ff5(0x275):_0xe2d312=[0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20];break;}_0x351d87=['DG'];}else{if(_0x2f7fd3=='FROZEN\x20GOODS'){switch(_0x5de23d){case _0x416ff5(0x201):_0xe2d312=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9];break;case _0x416ff5(0x275):_0xe2d312=[0xa,0xb,0xc,0xd,0xe,0xf,0x10,0x11,0x12];break;}_0x351d87=['FG'];}}return{'levels':_0xe2d312,'identify':_0x351d87};}router['get'](a0_0x182f95(0x247),auth,async(_0x283642,_0xea215a)=>{var _0x57bed2=a0_0x182f95;try{const {username:_0x2fc2d3,email:_0xfe636f,role:_0x54a664}=_0x283642[_0x57bed2(0x29d)],_0x94541c=_0x283642[_0x57bed2(0x29d)],_0x4e4eac=await profile[_0x57bed2(0x20f)]({'email':_0x94541c['email']}),_0x2a549a=await master_shop[_0x57bed2(0x214)](),_0x14bc26=await transfers_finished[_0x57bed2(0x292)](_0x283642[_0x57bed2(0x2be)]['id']);let _0x466fa8=new Date(_0x14bc26['expiry_date']),_0x41a34e=('0'+_0x466fa8[_0x57bed2(0x1f3)]())[_0x57bed2(0x2aa)](-0x2),_0x5180d5=('0'+(_0x466fa8[_0x57bed2(0x229)]()+0x1))[_0x57bed2(0x2aa)](-0x2),_0x1ab9fe=_0x466fa8[_0x57bed2(0x2a5)](),_0x38110f=_0x1ab9fe+'-'+_0x5180d5+'-'+_0x41a34e,_0x3b0047;if(_0x94541c[_0x57bed2(0x1ff)]=='staff'){const _0x14e0ae=await staff[_0x57bed2(0x20f)]({'email':_0x94541c[_0x57bed2(0x253)]});_0x3b0047=await warehouse[_0x57bed2(0x214)]({'status':_0x57bed2(0x1f7),'name':_0x14e0ae[_0x57bed2(0x261)],'warehouse_category':'Finished\x20Goods'});}else _0x3b0047=await warehouse[_0x57bed2(0x214)]({'status':_0x57bed2(0x1f7),'warehouse_category':_0x57bed2(0x246)});const _0x139aa4=await warehouse[_0x57bed2(0x2bc)]([{'$match':{'name':_0x14bc26[_0x57bed2(0x1fe)],'room':_0x14bc26[_0x57bed2(0x251)]}},{'$unwind':_0x57bed2(0x244)},{'$group':{'_id':_0x57bed2(0x2a2),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x57bed2(0x289)},'bay':{'$first':_0x57bed2(0x2a8)},'bin':{'$first':_0x57bed2(0x21a)},'type':{'$first':_0x57bed2(0x28e)},'floorlevel':{'$first':_0x57bed2(0x230)},'primary_code':{'$first':_0x57bed2(0x23b)},'secondary_code':{'$first':_0x57bed2(0x29e)},'product_code':{'$first':_0x57bed2(0x2a6)},'storage':{'$first':_0x57bed2(0x241)},'rack':{'$first':_0x57bed2(0x21f)}}}]);var _0x2aaf4b=[0x1,0x2,0x3,0x4],_0xdc9605=['A','B','C','D','E','F','G','H','I','J'],_0x557419=[_0x57bed2(0x22c),_0x57bed2(0x1f5)];const _0x244711=await product[_0x57bed2(0x214)]({}),_0xb8db4c=BayBinSelected(_0x14bc26[_0x57bed2(0x21e)],_0x14bc26[_0x57bed2(0x285)]);if(_0x2a549a[0x0][_0x57bed2(0x27f)]==_0x57bed2(0x267)){var _0x97b7cf=users['English'];console[_0x57bed2(0x234)](_0x97b7cf);}else{if(_0x2a549a[0x0][_0x57bed2(0x27f)]=='Hindi')var _0x97b7cf=users[_0x57bed2(0x2b0)];else{if(_0x2a549a[0x0][_0x57bed2(0x27f)]==_0x57bed2(0x1f4))var _0x97b7cf=users[_0x57bed2(0x1f4)];else{if(_0x2a549a[0x0][_0x57bed2(0x27f)]==_0x57bed2(0x25c))var _0x97b7cf=users[_0x57bed2(0x25c)];else{if(_0x2a549a[0x0]['language']==_0x57bed2(0x2b1))var _0x97b7cf=users[_0x57bed2(0x2b1)];else{if(_0x2a549a[0x0]['language']=='Portuguese\x20(BR)')var _0x97b7cf=users['Portuguese'];else{if(_0x2a549a[0x0][_0x57bed2(0x27f)]==_0x57bed2(0x211))var _0x97b7cf=users[_0x57bed2(0x211)];else{if(_0x2a549a[0x0][_0x57bed2(0x27f)]==_0x57bed2(0x2af))var _0x97b7cf=users[_0x57bed2(0x2a3)];}}}}}}}_0xea215a[_0x57bed2(0x268)](_0x57bed2(0x29f),{'success':_0x283642[_0x57bed2(0x1fb)](_0x57bed2(0x233)),'errors':_0x283642['flash']('errors'),'role':_0x94541c,'profile':_0x4e4eac,'master_shop':_0x2a549a,'warehouse':_0x3b0047,'transfer':_0x14bc26,'stock':_0x139aa4,'unit':_0x244711,'language':_0x97b7cf,'levels':_0x2aaf4b,'Isle':_0xdc9605,'rooms_data':_0x557419,'ed_fullDate':_0x38110f,'dataSelected':_0xb8db4c});}catch(_0x22540b){console[_0x57bed2(0x234)](_0x22540b);}}),router[a0_0x182f95(0x29b)]('/view/:id',auth,async(_0x11b793,_0x33109d)=>{var _0x183e09=a0_0x182f95;try{const _0x1abbaa=_0x11b793[_0x183e09(0x2be)]['id'];console[_0x183e09(0x234)](_0x11b793[_0x183e09(0x2b7)]);const _0x1b6857=await transfers_finished[_0x183e09(0x292)](_0x1abbaa);console['log'](_0x183e09(0x2c0),_0x1b6857);const {date:_0xc5e2c8,from_warehouse:_0xb26c0e,FromRoom_name:_0x47ebc9,to_warehouse:_0x148e14,ToRoom_name:_0x536f28,prod_name:_0x5aeca2,from_prod_qty:_0x5bbbd3,from_prod_level:_0x1c05f9,from_prod_isle:_0x4588d5,from_prod_pallet:_0x4499fd,to_prod_qty:_0x1fbd26,to_prod_level:_0x5443d6,to_prod_isle:_0x2a5078,to_prod_pallet:_0x565430,primary_code:_0xdd6aef,secondary_code:_0x137548,product_code3:_0x577d77,note:_0xa38ba8,invoice:_0x366ec6,expiry_date:_0x28a848}=_0x11b793['body'];if(typeof _0x5aeca2==_0x183e09(0x1f9))var _0x3b7d78=[_0x11b793[_0x183e09(0x2b7)]['prod_name']],_0x2ccf8b=[_0x11b793[_0x183e09(0x2b7)][_0x183e09(0x281)]],_0x3076f0=[_0x11b793[_0x183e09(0x2b7)][_0x183e09(0x294)]],_0x2f069a=[_0x11b793[_0x183e09(0x2b7)][_0x183e09(0x209)]],_0x18d7b8=[_0x11b793[_0x183e09(0x2b7)][_0x183e09(0x25b)]],_0x5a76ac=[_0x11b793[_0x183e09(0x2b7)][_0x183e09(0x290)]],_0x2fb9a9=[_0x11b793['body']['secondary_code']],_0x584f84=[_0x11b793[_0x183e09(0x2b7)][_0x183e09(0x23a)]],_0x24a990=[_0x11b793[_0x183e09(0x2b7)][_0x183e09(0x2a9)]],_0x5a8830=[_0x11b793[_0x183e09(0x2b7)][_0x183e09(0x287)]],_0x192f5f=[_0x11b793[_0x183e09(0x2b7)][_0x183e09(0x22b)]],_0xb33da2=[_0x11b793[_0x183e09(0x2b7)]['batch_code']],_0x14fc88=[_0x11b793[_0x183e09(0x2b7)]['expiry_date']];else var _0x3b7d78=[..._0x11b793[_0x183e09(0x2b7)][_0x183e09(0x254)]],_0x2ccf8b=[..._0x11b793[_0x183e09(0x2b7)][_0x183e09(0x281)]],_0x3076f0=[..._0x11b793['body'][_0x183e09(0x294)]],_0x2f069a=[..._0x11b793[_0x183e09(0x2b7)][_0x183e09(0x209)]],_0x18d7b8=[..._0x11b793['body']['to_prod_level']],_0x5a76ac=[..._0x11b793[_0x183e09(0x2b7)][_0x183e09(0x290)]],_0x2fb9a9=[..._0x11b793[_0x183e09(0x2b7)]['secondary_code']],_0x584f84=[..._0x11b793[_0x183e09(0x2b7)][_0x183e09(0x23a)]],_0x24a990=[..._0x11b793[_0x183e09(0x2b7)]['MaxStocks_data2']],_0x5a8830=[..._0x11b793[_0x183e09(0x2b7)][_0x183e09(0x287)]],_0x192f5f=[..._0x11b793[_0x183e09(0x2b7)]['secondary_unit']],_0xb33da2=[..._0x11b793[_0x183e09(0x2b7)][_0x183e09(0x296)]],_0x14fc88=[..._0x11b793[_0x183e09(0x2b7)][_0x183e09(0x216)]];const _0x24fae6=_0x3b7d78['map'](_0x2679a3=>{return _0x2679a3={'product_name':_0x2679a3};});_0x2ccf8b[_0x183e09(0x23c)]((_0x396dda,_0x5461ca)=>{var _0x1edf45=_0x183e09;_0x24fae6[_0x5461ca][_0x1edf45(0x2a4)]=_0x396dda;}),_0x3076f0[_0x183e09(0x23c)]((_0x5f0589,_0x45859c)=>{_0x24fae6[_0x45859c]['from_bay']=_0x5f0589;}),_0x2f069a[_0x183e09(0x23c)]((_0x9ddd24,_0x3f5cc9)=>{var _0x4e4569=_0x183e09;_0x24fae6[_0x3f5cc9][_0x4e4569(0x217)]=_0x9ddd24;}),_0x18d7b8[_0x183e09(0x23c)]((_0xd7370f,_0x31ad0d)=>{_0x24fae6[_0x31ad0d]['to_bay']=_0xd7370f;}),_0x5a76ac[_0x183e09(0x23c)]((_0x5940d2,_0x148533)=>{_0x24fae6[_0x148533]['primary_code']=_0x5940d2;}),_0x2fb9a9[_0x183e09(0x23c)]((_0x330fc7,_0x41363b)=>{var _0x25d7b1=_0x183e09;_0x24fae6[_0x41363b][_0x25d7b1(0x232)]=_0x330fc7;}),_0x584f84[_0x183e09(0x23c)]((_0x1ab6c8,_0x1d3bcd)=>{var _0x55ee52=_0x183e09;_0x24fae6[_0x1d3bcd][_0x55ee52(0x20c)]=_0x1ab6c8;}),_0x24a990[_0x183e09(0x23c)]((_0x4fe48a,_0x3c18fc)=>{var _0x579806=_0x183e09;_0x24fae6[_0x3c18fc][_0x579806(0x222)]=_0x4fe48a;}),_0x5a8830['forEach']((_0x3b62d5,_0x1be9eb)=>{var _0x3819f8=_0x183e09;_0x24fae6[_0x1be9eb][_0x3819f8(0x287)]=_0x3b62d5;}),_0x192f5f[_0x183e09(0x23c)]((_0x23cb79,_0x158359)=>{var _0x2d3c43=_0x183e09;_0x24fae6[_0x158359][_0x2d3c43(0x22b)]=_0x23cb79;}),_0xb33da2[_0x183e09(0x23c)]((_0x35f8f0,_0x33b087)=>{var _0x494fcf=_0x183e09;_0x24fae6[_0x33b087][_0x494fcf(0x296)]=_0x35f8f0;}),_0x14fc88['forEach']((_0x42ac22,_0x5b953d)=>{_0x24fae6[_0x5b953d]['expiry_date']=_0x42ac22;});const _0x30248d=_0x24fae6[_0x183e09(0x22d)](_0x5f0ddc=>_0x5f0ddc[_0x183e09(0x217)]!=='0'&&_0x5f0ddc[_0x183e09(0x217)]!==''||_0x5f0ddc[_0x183e09(0x283)]!=='0'&&_0x5f0ddc[_0x183e09(0x283)]!=='');var _0x4b6c08=0x0;_0x30248d[_0x183e09(0x23c)](_0x23527c=>{var _0x32ba0a=_0x183e09;parseInt(_0x23527c[_0x32ba0a(0x2a4)])<parseInt(_0x23527c[_0x32ba0a(0x217)])&&_0x4b6c08++;});if(_0x4b6c08!=0x0)return _0x11b793[_0x183e09(0x1fb)](_0x183e09(0x200),_0x183e09(0x272)),_0x33109d[_0x183e09(0x1fc)]('back');const _0xbcef56=await warehouse[_0x183e09(0x20f)]({'name':_0x1b6857[_0x183e09(0x1fe)],'room':_0x1b6857[_0x183e09(0x251)]});_0x1b6857[_0x183e09(0x278)][_0x183e09(0x23c)](_0x4ef7ac=>{var _0x58763c=_0x183e09;if(_0x4ef7ac[_0x58763c(0x217)]>0x0){const _0x1f4fbe=_0xbcef56[_0x58763c(0x2ac)]['map'](_0x4234c8=>{var _0x1fa7dc=_0x58763c;_0x4234c8['product_name']==_0x4ef7ac[_0x1fa7dc(0x288)]&&_0x4234c8[_0x1fa7dc(0x276)]==_0x4ef7ac[_0x1fa7dc(0x299)]&&(_0x4234c8[_0x1fa7dc(0x213)]=parseInt(_0x4234c8[_0x1fa7dc(0x213)])+parseInt(_0x4ef7ac[_0x1fa7dc(0x217)]));});}}),await _0xbcef56[_0x183e09(0x24b)]();const _0x494ea3=await warehouse[_0x183e09(0x20f)]({'name':_0x1b6857[_0x183e09(0x21e)],'room':_0x1b6857[_0x183e09(0x285)]});_0x1b6857['product'][_0x183e09(0x23c)](_0xc5e4e8=>{var _0x50426c=_0x183e09;if(_0xc5e4e8[_0x50426c(0x217)]>0x0){const _0x2e4d4e=_0x494ea3[_0x50426c(0x2ac)][_0x50426c(0x224)](_0xad1f40=>{var _0x1ac2af=_0x50426c;_0xad1f40[_0x1ac2af(0x288)]==_0xc5e4e8[_0x1ac2af(0x288)]&&_0xad1f40[_0x1ac2af(0x276)]==_0xc5e4e8[_0x1ac2af(0x240)]&&(_0xad1f40[_0x1ac2af(0x213)]=parseInt(_0xad1f40[_0x1ac2af(0x213)])-parseInt(_0xc5e4e8[_0x1ac2af(0x217)]));});}}),await _0x494ea3[_0x183e09(0x24b)](),_0x1b6857[_0x183e09(0x2bd)]=_0xc5e2c8,_0x1b6857[_0x183e09(0x1fe)]=_0xb26c0e,_0x1b6857[_0x183e09(0x21e)]=_0x148e14,_0x1b6857[_0x183e09(0x278)]=_0x30248d,_0x1b6857[_0x183e09(0x225)]=_0xa38ba8,_0x1b6857[_0x183e09(0x24d)]=_0x366ec6;const _0x441338=await _0x1b6857[_0x183e09(0x24b)](),_0x3e0619=await warehouse['findOne']({'name':_0xb26c0e,'room':_0x47ebc9});_0x441338[_0x183e09(0x278)][_0x183e09(0x23c)](_0x4c4a8a=>{var _0x2ea002=_0x183e09;if(_0x4c4a8a['to_quantity']>0x0){const _0x120c69=_0x3e0619[_0x2ea002(0x2ac)][_0x2ea002(0x224)](_0x467cf7=>{var _0x13d7e7=_0x2ea002;_0x467cf7[_0x13d7e7(0x288)]==_0x4c4a8a['product_name']&&_0x467cf7[_0x13d7e7(0x276)]==_0x4c4a8a['from_bay']&&(_0x467cf7[_0x13d7e7(0x213)]=parseInt(_0x467cf7[_0x13d7e7(0x213)])-parseInt(_0x4c4a8a[_0x13d7e7(0x217)]));});}}),await _0x3e0619[_0x183e09(0x24b)]();const _0x4ed5e6=await warehouse['findOne']({'name':_0x148e14,'room':_0x536f28});_0x441338[_0x183e09(0x278)][_0x183e09(0x23c)](_0x255b8c=>{var _0x2cc217=_0x183e09;if(_0x255b8c['to_quantity']>0x0){var _0x2fe2d0=0x0;const _0x4be4ee=_0x4ed5e6[_0x2cc217(0x2ac)][_0x2cc217(0x224)](_0x12ebfa=>{var _0x2f232b=_0x2cc217;_0x12ebfa['product_name']==_0x255b8c[_0x2f232b(0x288)]&&_0x12ebfa[_0x2f232b(0x276)]==_0x255b8c[_0x2f232b(0x240)]&&(_0x12ebfa[_0x2f232b(0x213)]=parseInt(_0x12ebfa[_0x2f232b(0x213)])+parseInt(_0x255b8c['to_quantity']),_0x2fe2d0++);});_0x2fe2d0=='0'&&(_0x4ed5e6[_0x2cc217(0x2ac)]=_0x4ed5e6[_0x2cc217(0x2ac)]['concat']({'product_name':_0x255b8c[_0x2cc217(0x288)],'product_stock':_0x255b8c[_0x2cc217(0x217)],'bay':_0x255b8c[_0x2cc217(0x240)],'product_code':_0x255b8c[_0x2cc217(0x20c)],'primary_code':_0x255b8c[_0x2cc217(0x290)],'secondary_code':_0x255b8c[_0x2cc217(0x232)],'maxProducts':_0x255b8c[_0x2cc217(0x222)]}));}}),await _0x4ed5e6[_0x183e09(0x24b)](),_0x11b793[_0x183e09(0x1fb)]('success',_0x183e09(0x1f2)),_0x33109d['redirect'](_0x183e09(0x215));}catch(_0x17ac92){console['log'](_0x17ac92);}}),router[a0_0x182f95(0x29b)](a0_0x182f95(0x22e),async(_0x4cd04b,_0x5e0c0c)=>{var _0x13aeb6=a0_0x182f95;const {FromWareHouse:_0x3b0b55,FromRoom:_0xa3f81f,ToWarehouse:_0x267989,ToRoom:_0x113ead,primary_code:_0x1cd6d4,Roomslist:_0x25fb23}=_0x4cd04b[_0x13aeb6(0x2b7)],_0x94a8ed=_0x25fb23['split'](','),_0x5f01be=[];async function _0x2d62eb(_0xf61e08){var _0x44b24a=_0x13aeb6;const _0x59140b=await warehouse['aggregate']([{'$match':{'name':_0x3b0b55,'room':_0xf61e08}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x1cd6d4}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x44b24a(0x2a7)},'instock':{'$first':_0x44b24a(0x289)},'primary_code':{'$first':_0x44b24a(0x23b)},'secondary_code':{'$first':_0x44b24a(0x29e)},'product_code':{'$first':'$product_details.product_code'},'bay':{'$first':_0x44b24a(0x2a8)},'level':{'$first':'$product_details.level'},'type':{'$first':_0x44b24a(0x28e)},'pallet':{'$first':_0x44b24a(0x230)},'unit':{'$first':_0x44b24a(0x238)},'secondary_unit':{'$first':_0x44b24a(0x2b4)},'storage':{'$first':_0x44b24a(0x241)},'rack':{'$first':_0x44b24a(0x21f)},'expiry_date':{'$first':_0x44b24a(0x236)},'production_date':{'$first':_0x44b24a(0x298)},'batch_code':{'$first':_0x44b24a(0x2a1)},'maxPerUnit':{'$first':_0x44b24a(0x26c)},'roomNamed':{'$first':_0x44b24a(0x237)},'prod_cat':{'$first':'P'},'invoice':{'$first':_0x44b24a(0x29a)}}}]),_0x152007=await warehouse['aggregate']([{'$match':{'name':_0x3b0b55,'room':_0xf61e08}},{'$unwind':_0x44b24a(0x244)},{'$match':{'product_details.secondary_code':_0x1cd6d4}},{'$group':{'_id':_0x44b24a(0x2a2),'name':{'$first':_0x44b24a(0x2a7)},'instock':{'$first':_0x44b24a(0x289)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x44b24a(0x29e)},'product_code':{'$first':_0x44b24a(0x2a6)},'bay':{'$first':'$product_details.bay'},'level':{'$first':_0x44b24a(0x274)},'type':{'$first':_0x44b24a(0x28e)},'pallet':{'$first':_0x44b24a(0x230)},'unit':{'$first':_0x44b24a(0x238)},'secondary_unit':{'$first':_0x44b24a(0x2b4)},'storage':{'$first':_0x44b24a(0x241)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x44b24a(0x236)},'production_date':{'$first':_0x44b24a(0x298)},'batch_code':{'$first':_0x44b24a(0x2a1)},'maxPerUnit':{'$first':_0x44b24a(0x26c)},'roomNamed':{'$first':_0x44b24a(0x237)},'prod_cat':{'$first':'S'},'invoice':{'$first':_0x44b24a(0x29a)}}}]);if(_0x59140b[_0x44b24a(0x1fa)]>0x0)_0x5f01be[_0x44b24a(0x24e)](_0x59140b);else _0x152007['length']>0x0&&_0x5f01be[_0x44b24a(0x24e)](_0x152007);}const _0x4f3dd5=_0x94a8ed['map'](_0x29961a=>_0x2d62eb(_0x29961a));await Promise[_0x13aeb6(0x1f6)](_0x4f3dd5),_0x5e0c0c['json'](_0x5f01be);}),router[a0_0x182f95(0x29b)](a0_0x182f95(0x204),async(_0x408835,_0x5a3a21)=>{var _0x3dc8e8=a0_0x182f95;const {productCode:_0x49b3f3,bay:_0x1c06fb,warehouses:_0x3ada60,room:_0x1e1545}=_0x408835[_0x3dc8e8(0x2b7)];console[_0x3dc8e8(0x234)](_0x408835[_0x3dc8e8(0x2b7)]);try{const _0x37a1c3=await warehouse[_0x3dc8e8(0x2bc)]([{'$match':{'name':_0x3ada60,'room':_0x1e1545}},{'$unwind':'$product_details'},{'$match':{'product_details.bay':parseInt(_0x1c06fb)}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x3dc8e8(0x2a7)},'product_stock':{'$first':_0x3dc8e8(0x289)},'bay':{'$first':'$product_details.bay'},'maxProducts':{'$first':_0x3dc8e8(0x1f8)}}}]);_0x5a3a21[_0x3dc8e8(0x277)](0xc8)[_0x3dc8e8(0x284)](_0x37a1c3);}catch(_0x1195fc){_0x5a3a21[_0x3dc8e8(0x277)](0x194)[_0x3dc8e8(0x284)]({'message':_0x1195fc[_0x3dc8e8(0x29c)]});}}),module[a0_0x182f95(0x28f)]=router;