function a0_0x50ea(){var _0x33f474=['\x20<=>\x20','from_invoice','from_prod_level2','user','/transfer_finished/view','250368aFGdTA','$product_details.unit','body','Spanish','to_floorlevel','edit_transfer_finished','expiry_date','Chinese','An\x20error\x20occurred.','Portuguese\x20(BR)','New_Qty_Converted','from_room_name','from_prod_qty','to_prod_level','express','</td>','$product_details._id','There\x27s\x20a\x20error\x20in\x20this\x20transaction','$product_details.product_code','find','Rack\x202','invoice_init','product_code','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','match','../middleware/auth','findById','Arabic\x20(ae)','Finished\x20Goods','$product_details.maxProducts','German','$product_details.primary_code','role','French','$product_details.product_stock','params','maxProducts','$_id','push','back','aggregate','findOne','product_stock','$to_warehouse','$date','$product_details','$product.from_room_name','getMonth','forEach','</tr>','Hindi','redirect','$product_details.type','FROZEN\x20GOODS','all','$name','424846AGcHiM','$finalize','flash','catch','staff','from_warehouse','2746098OjDoUC','to_bay','$product_details.batch_code','to_room_name','/view/add_transfer_loc','$product.to_room_name','render','DRY\x20GOODS','floor','id_transaction','TRFF-','Enclosed','map','secondary_unit','type_of_process','/view/add_transfer','TRF-','/view_logs','save','../models/all_models','production_date','transfer_finished_logs','/view/choose_logs','add_transfer_finished','7775536NJOAKT','length','$product_details.secondary_code','product','/preview/:id','status','slice','bay','concat','$product_details.bin','Arabic','edit_transfer_finished_view','English','then','success','LOG-TRF-','Product\x20Transfer\x20successfully','to_warehouse','undefined','warehouse','log','finalize','to_room','$product_details.maxPerUnit','/transfer_finished/preview/','transfer_finished','/picking_list/PDF_transfer/','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','$product_details.rack','product_date','$product_details.product_name','message','split','10qKjktC','date','$product','email','$product_details.production_date','invoice','MaxStocks_data','error','to_quantity','own','maxPerUnit','product_code3','location2location','unit','$product_details.invoice','filter','string','/view/:id','An\x20error\x20occurred\x20while\x20saving\x20data.','padStart','2186331iRsqPz','primary_unit','primary_code','here2','toString','$product_details.expiry_date','random','post','abs','json','843878ALGlUk','from_level','secondary_code','/view','product_details','$product_details.storage','logs','exports','$product_details.bay','English\x20(US)','/barcode_scanner','Transfer\x20Edit\x20Successfully','prod_name','$invoice','note','$product_details.floorlevel','$product_details.secondary_unit','$from_warehouse','prod_cat','from_bay','from_prod_level','bin2bin','Ambient','Portuguese','product_name','/transfer/view','$room','RoomAssigned','transfer_data','batch_code','ToRoomAssigned','get','from_room','_id','MaxStocks_data2','from_quantity','to_level','choos_transfer','Rack\x201','Enabled','../public/language/languages.json','1092668tFTeFR','nodemailer','errors','To_invoice','getDate','$product_details.level','language'];a0_0x50ea=function(){return _0x33f474;};return a0_0x50ea();}var a0_0x41a076=a0_0x6327;(function(_0x21dbb5,_0x2b8531){var _0x8b242e=a0_0x6327,_0x16944f=_0x21dbb5();while(!![]){try{var _0x30c5f7=-parseInt(_0x8b242e(0x19e))/0x1+-parseInt(_0x8b242e(0x131))/0x2+-parseInt(_0x8b242e(0x166))/0x3+parseInt(_0x8b242e(0x15a))/0x4*(parseInt(_0x8b242e(0x113))/0x5)+-parseInt(_0x8b242e(0x1a4))/0x6+parseInt(_0x8b242e(0x127))/0x7+parseInt(_0x8b242e(0x1bc))/0x8;if(_0x30c5f7===_0x2b8531)break;else _0x16944f['push'](_0x16944f['shift']());}catch(_0x2535ba){_0x16944f['push'](_0x16944f['shift']());}}}(a0_0x50ea,0x6c13d));const express=require(a0_0x41a076(0x174)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,invoice_for_transfer,transfers_logs}=require(a0_0x41a076(0x1b7)),auth=require(a0_0x41a076(0x17f)),users=require(a0_0x41a076(0x159)),nodemailer=require(a0_0x41a076(0x15b));router[a0_0x41a076(0x150)](a0_0x41a076(0x134),auth,async(_0x3bc4e3,_0x362ccf)=>{var _0x195e77=a0_0x41a076;try{const {username:_0x8cf92c,email:_0x5717f1,role:_0x43390f}=_0x3bc4e3['user'],_0x4cd5a0=_0x3bc4e3['user'],_0x135876=await profile['findOne']({'email':_0x4cd5a0[_0x195e77(0x116)]}),_0x1ff751=await master_shop[_0x195e77(0x179)]();let _0x5575b6;if(_0x4cd5a0['role']=='staff'){const _0x4553e4=await staff[_0x195e77(0x18f)]({'email':_0x4cd5a0[_0x195e77(0x116)]});_0x5575b6=await transfers_finished[_0x195e77(0x179)]({'from_warehouse':_0x4553e4[_0x195e77(0x105)]});}else _0x5575b6=await transfers_finished[_0x195e77(0x18e)]([{'$match':{'type_of_transaction':_0x195e77(0x11c)}},{'$unwind':_0x195e77(0x115)},{'$group':{'_id':_0x195e77(0x18b),'invoice':{'$first':'$invoice'},'date':{'$first':_0x195e77(0x192)},'from_warehouse':{'$first':_0x195e77(0x142)},'to_warehouse':{'$first':_0x195e77(0x191)},'from_room_name':{'$addToSet':_0x195e77(0x194)},'to_room_name':{'$addToSet':_0x195e77(0x1a9)},'finalize':{'$first':_0x195e77(0x19f)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x1ff751[0x0][_0x195e77(0x160)]==_0x195e77(0x13a))var _0x1021dd=users['English'];else{if(_0x1ff751[0x0]['language']==_0x195e77(0x198))var _0x1021dd=users[_0x195e77(0x198)];else{if(_0x1ff751[0x0][_0x195e77(0x160)]=='German')var _0x1021dd=users[_0x195e77(0x184)];else{if(_0x1ff751[0x0]['language']==_0x195e77(0x169))var _0x1021dd=users[_0x195e77(0x169)];else{if(_0x1ff751[0x0][_0x195e77(0x160)]==_0x195e77(0x187))var _0x1021dd=users[_0x195e77(0x187)];else{if(_0x1ff751[0x0][_0x195e77(0x160)]==_0x195e77(0x16f))var _0x1021dd=users[_0x195e77(0x148)];else{if(_0x1ff751[0x0][_0x195e77(0x160)]==_0x195e77(0x16d))var _0x1021dd=users['Chinese'];else{if(_0x1ff751[0x0][_0x195e77(0x160)]=='Arabic\x20(ae)')var _0x1021dd=users['Arabic'];}}}}}}}_0x362ccf[_0x195e77(0x1aa)](_0x195e77(0x10b),{'success':_0x3bc4e3['flash'](_0x195e77(0x100)),'errors':_0x3bc4e3[_0x195e77(0x1a0)](_0x195e77(0x15c)),'role':_0x4cd5a0,'profile':_0x135876,'master_shop':_0x1ff751,'transfer':_0x5575b6,'language':_0x1021dd});}catch(_0x552014){console[_0x195e77(0x106)](_0x552014);}}),router[a0_0x41a076(0x150)](a0_0x41a076(0x1b5),auth,async(_0x5801aa,_0x582720)=>{var _0x1b4603=a0_0x41a076;try{const {username:_0x53e559,email:_0x351c67,role:_0x563845}=_0x5801aa['user'],_0x55f605=_0x5801aa[_0x1b4603(0x164)],_0x1efc38=await profile[_0x1b4603(0x18f)]({'email':_0x55f605['email']}),_0x3e8d39=await master_shop['find']();let _0x190286;if(_0x55f605[_0x1b4603(0x186)]==_0x1b4603(0x1a2)){const _0x1ed63f=await staff[_0x1b4603(0x18f)]({'email':_0x55f605[_0x1b4603(0x116)]});_0x190286=await transfers_finished['find']({'from_warehouse':_0x1ed63f['warehouse']});}else _0x190286=await transfers_finished[_0x1b4603(0x18e)]([{'$match':{'type_of_transaction':_0x1b4603(0x137)}},{'$unwind':_0x1b4603(0x115)},{'$group':{'_id':_0x1b4603(0x18b),'invoice':{'$first':_0x1b4603(0x13e)},'date':{'$first':_0x1b4603(0x192)},'from_warehouse':{'$first':_0x1b4603(0x142)},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x1b4603(0x194)},'to_room_name':{'$addToSet':_0x1b4603(0x1a9)},'finalize':{'$first':_0x1b4603(0x19f)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x3e8d39[0x0][_0x1b4603(0x160)]=='English\x20(US)')var _0x4cfa18=users['English'];else{if(_0x3e8d39[0x0][_0x1b4603(0x160)]==_0x1b4603(0x198))var _0x4cfa18=users[_0x1b4603(0x198)];else{if(_0x3e8d39[0x0][_0x1b4603(0x160)]==_0x1b4603(0x184))var _0x4cfa18=users[_0x1b4603(0x184)];else{if(_0x3e8d39[0x0]['language']==_0x1b4603(0x169))var _0x4cfa18=users[_0x1b4603(0x169)];else{if(_0x3e8d39[0x0][_0x1b4603(0x160)]==_0x1b4603(0x187))var _0x4cfa18=users[_0x1b4603(0x187)];else{if(_0x3e8d39[0x0][_0x1b4603(0x160)]==_0x1b4603(0x16f))var _0x4cfa18=users[_0x1b4603(0x148)];else{if(_0x3e8d39[0x0][_0x1b4603(0x160)]==_0x1b4603(0x16d))var _0x4cfa18=users[_0x1b4603(0x16d)];else{if(_0x3e8d39[0x0]['language']==_0x1b4603(0x181))var _0x4cfa18=users[_0x1b4603(0x1c6)];}}}}}}}_0x582720[_0x1b4603(0x1aa)](_0x1b4603(0x1b9),{'success':_0x5801aa[_0x1b4603(0x1a0)](_0x1b4603(0x100)),'errors':_0x5801aa[_0x1b4603(0x1a0)]('errors'),'role':_0x55f605,'profile':_0x1efc38,'master_shop':_0x3e8d39,'transfer':_0x190286,'language':_0x4cfa18});}catch(_0x11af3d){console[_0x1b4603(0x106)](_0x11af3d);}});function a0_0x6327(_0x561119,_0x150aec){var _0x50eaa3=a0_0x50ea();return a0_0x6327=function(_0x6327d9,_0x25f9ca){_0x6327d9=_0x6327d9-0xfe;var _0x1357f4=_0x50eaa3[_0x6327d9];return _0x1357f4;},a0_0x6327(_0x561119,_0x150aec);}async function getRandom8DigitNumber(){var _0x27a7c0=a0_0x41a076;const _0x4d155f=0x989680,_0x3852d7=0x5f5e0ff,_0x3b9741=Math[_0x27a7c0(0x1ac)](Math[_0x27a7c0(0x12d)]()*(_0x3852d7-_0x4d155f+0x1))+_0x4d155f;var _0x117883;const _0x6ea8fb=await transfers_finished['findOne']({'invoice':_0x27a7c0(0x1ae)+_0x3b9741});return _0x6ea8fb&&_0x6ea8fb[_0x27a7c0(0x1bd)]>0x0?_0x117883=_0x27a7c0(0x1ae)+_0x3b9741:_0x117883=_0x27a7c0(0x1ae)+_0x3b9741,_0x117883;}router[a0_0x41a076(0x150)](a0_0x41a076(0x1b3),auth,async(_0x4e25b2,_0x24459b)=>{var _0x4c3bd6=a0_0x41a076;try{const {username:_0x548312,email:_0x2bed8d,role:_0x114bf7}=_0x4e25b2[_0x4c3bd6(0x164)],_0x2bb16e=_0x4e25b2['user'],_0x57a655=await profile[_0x4c3bd6(0x18f)]({'email':_0x2bb16e[_0x4c3bd6(0x116)]}),_0x58a137=await master_shop[_0x4c3bd6(0x179)]();let _0x42343e;if(_0x2bb16e[_0x4c3bd6(0x186)]==_0x4c3bd6(0x1a2)){const _0x1d46e1=await staff[_0x4c3bd6(0x18f)]({'email':_0x2bb16e[_0x4c3bd6(0x116)]});_0x42343e=await warehouse[_0x4c3bd6(0x18e)]([{'$match':{'status':_0x4c3bd6(0x158),'name':_0x1d46e1[_0x4c3bd6(0x105)]}},{'$group':{'_id':_0x4c3bd6(0x19d),'name':{'$first':_0x4c3bd6(0x19d)}}}]);}else _0x42343e=await warehouse[_0x4c3bd6(0x18e)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':'$name','name':{'$first':_0x4c3bd6(0x19d)}}}]);const _0x23a6cf=await transfers_finished['find']({}),_0xf6d4a1=_0x23a6cf[_0x4c3bd6(0x1bd)]+0x1,_0x2efb9b=_0x4c3bd6(0x1ae)+_0xf6d4a1[_0x4c3bd6(0x12b)]()[_0x4c3bd6(0x126)](0x5,'0');if(_0x58a137[0x0][_0x4c3bd6(0x160)]==_0x4c3bd6(0x13a))var _0x23d2b8=users[_0x4c3bd6(0xfe)];else{if(_0x58a137[0x0][_0x4c3bd6(0x160)]==_0x4c3bd6(0x198))var _0x23d2b8=users[_0x4c3bd6(0x198)];else{if(_0x58a137[0x0]['language']=='German')var _0x23d2b8=users[_0x4c3bd6(0x184)];else{if(_0x58a137[0x0]['language']==_0x4c3bd6(0x169))var _0x23d2b8=users[_0x4c3bd6(0x169)];else{if(_0x58a137[0x0][_0x4c3bd6(0x160)]==_0x4c3bd6(0x187))var _0x23d2b8=users[_0x4c3bd6(0x187)];else{if(_0x58a137[0x0][_0x4c3bd6(0x160)]==_0x4c3bd6(0x16f))var _0x23d2b8=users[_0x4c3bd6(0x148)];else{if(_0x58a137[0x0][_0x4c3bd6(0x160)]==_0x4c3bd6(0x16d))var _0x23d2b8=users[_0x4c3bd6(0x16d)];else{if(_0x58a137[0x0]['language']==_0x4c3bd6(0x181))var _0x23d2b8=users[_0x4c3bd6(0x1c6)];}}}}}}}const _0xd5df81=getRandom8DigitNumber();_0xd5df81[_0x4c3bd6(0xff)](_0x4ead41=>{var _0x2f719e=_0x4c3bd6;_0x24459b[_0x2f719e(0x1aa)](_0x2f719e(0x1bb),{'success':_0x4e25b2[_0x2f719e(0x1a0)](_0x2f719e(0x100)),'errors':_0x4e25b2[_0x2f719e(0x1a0)](_0x2f719e(0x15c)),'role':_0x2bb16e,'profile':_0x57a655,'master_shop':_0x58a137,'warehouse':_0x42343e,'language':_0x23d2b8,'invoice':_0x4ead41});})[_0x4c3bd6(0x1a1)](_0x3cc624=>{var _0x3e1057=_0x4c3bd6;_0x4e25b2[_0x3e1057(0x1a0)](_0x3e1057(0x15c),_0x3e1057(0x177)),_0x24459b[_0x3e1057(0x199)](_0x3e1057(0x14a));});}catch(_0x2833c8){console[_0x4c3bd6(0x106)](_0x2833c8);}}),router[a0_0x41a076(0x150)]('/view/choose',auth,async(_0x30e9f5,_0x38ceef)=>{var _0x54ce66=a0_0x41a076;try{const {username:_0x4559f6,email:_0x25eef3,role:_0x25a932}=_0x30e9f5['user'],_0x520973=_0x30e9f5['user'],_0x17516b=await profile['findOne']({'email':_0x520973[_0x54ce66(0x116)]}),_0x3cfbcb=await master_shop[_0x54ce66(0x179)]();let _0xeaee3;if(_0x520973[_0x54ce66(0x186)]==_0x54ce66(0x1a2)){const _0x307465=await staff[_0x54ce66(0x18f)]({'email':_0x520973['email']});_0xeaee3=await warehouse[_0x54ce66(0x18e)]([{'$match':{'status':_0x54ce66(0x158),'name':_0x307465[_0x54ce66(0x105)]}},{'$group':{'_id':_0x54ce66(0x19d),'name':{'$first':_0x54ce66(0x19d)}}}]);}else _0xeaee3=await warehouse[_0x54ce66(0x18e)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x54ce66(0x19d),'name':{'$first':_0x54ce66(0x19d)}}}]);const _0x15ebbf=await transfers_finished[_0x54ce66(0x179)]({}),_0x26f8fd=_0x15ebbf['length']+0x1,_0x40f874=_0x54ce66(0x1ae)+_0x26f8fd[_0x54ce66(0x12b)]()['padStart'](0x5,'0');if(_0x3cfbcb[0x0][_0x54ce66(0x160)]=='English\x20(US)')var _0x535e4f=users[_0x54ce66(0xfe)];else{if(_0x3cfbcb[0x0]['language']==_0x54ce66(0x198))var _0x535e4f=users[_0x54ce66(0x198)];else{if(_0x3cfbcb[0x0][_0x54ce66(0x160)]==_0x54ce66(0x184))var _0x535e4f=users[_0x54ce66(0x184)];else{if(_0x3cfbcb[0x0][_0x54ce66(0x160)]=='Spanish')var _0x535e4f=users[_0x54ce66(0x169)];else{if(_0x3cfbcb[0x0][_0x54ce66(0x160)]=='French')var _0x535e4f=users[_0x54ce66(0x187)];else{if(_0x3cfbcb[0x0][_0x54ce66(0x160)]==_0x54ce66(0x16f))var _0x535e4f=users['Portuguese'];else{if(_0x3cfbcb[0x0][_0x54ce66(0x160)]==_0x54ce66(0x16d))var _0x535e4f=users[_0x54ce66(0x16d)];else{if(_0x3cfbcb[0x0][_0x54ce66(0x160)]==_0x54ce66(0x181))var _0x535e4f=users['Arabic'];}}}}}}}const _0x35d1c1=getRandom8DigitNumber();_0x35d1c1[_0x54ce66(0xff)](_0x559cf9=>{var _0x58d319=_0x54ce66;_0x38ceef['render'](_0x58d319(0x156),{'success':_0x30e9f5[_0x58d319(0x1a0)]('success'),'errors':_0x30e9f5[_0x58d319(0x1a0)](_0x58d319(0x15c)),'role':_0x520973,'profile':_0x17516b,'master_shop':_0x3cfbcb,'warehouse':_0xeaee3,'language':_0x535e4f,'invoice':_0x559cf9});})['catch'](_0x4e582c=>{var _0x5b2046=_0x54ce66;_0x30e9f5[_0x5b2046(0x1a0)]('errors',_0x5b2046(0x177)),_0x38ceef['redirect'](_0x5b2046(0x14a));});}catch(_0x4eaae1){console['log'](_0x4eaae1);}}),router['get'](a0_0x41a076(0x1ba),auth,async(_0x403db7,_0x43c5c5)=>{var _0x421c15=a0_0x41a076;try{const {username:_0x388d9b,email:_0xf8522b,role:_0x1acc3e}=_0x403db7[_0x421c15(0x164)],_0x53f622=_0x403db7[_0x421c15(0x164)],_0x5e741c=await profile[_0x421c15(0x18f)]({'email':_0x53f622[_0x421c15(0x116)]}),_0x5c6f99=await master_shop['find']();let _0x491552;if(_0x53f622[_0x421c15(0x186)]=='staff'){const _0x207a49=await staff['findOne']({'email':_0x53f622[_0x421c15(0x116)]});_0x491552=await warehouse[_0x421c15(0x18e)]([{'$match':{'status':_0x421c15(0x158),'name':_0x207a49[_0x421c15(0x105)]}},{'$group':{'_id':'$name','name':{'$first':_0x421c15(0x19d)}}}]);}else _0x491552=await warehouse[_0x421c15(0x18e)]([{'$match':{'status':_0x421c15(0x158)}},{'$group':{'_id':_0x421c15(0x19d),'name':{'$first':_0x421c15(0x19d)}}}]);const _0x472973=await transfers_finished['find']({}),_0x19fcd8=_0x472973[_0x421c15(0x1bd)]+0x1,_0x2b68f9=_0x421c15(0x1ae)+_0x19fcd8[_0x421c15(0x12b)]()[_0x421c15(0x126)](0x5,'0');if(_0x5c6f99[0x0][_0x421c15(0x160)]=='English\x20(US)')var _0x5ae94c=users[_0x421c15(0xfe)];else{if(_0x5c6f99[0x0][_0x421c15(0x160)]==_0x421c15(0x198))var _0x5ae94c=users['Hindi'];else{if(_0x5c6f99[0x0][_0x421c15(0x160)]==_0x421c15(0x184))var _0x5ae94c=users[_0x421c15(0x184)];else{if(_0x5c6f99[0x0][_0x421c15(0x160)]=='Spanish')var _0x5ae94c=users['Spanish'];else{if(_0x5c6f99[0x0]['language']==_0x421c15(0x187))var _0x5ae94c=users['French'];else{if(_0x5c6f99[0x0][_0x421c15(0x160)]==_0x421c15(0x16f))var _0x5ae94c=users[_0x421c15(0x148)];else{if(_0x5c6f99[0x0][_0x421c15(0x160)]=='Chinese')var _0x5ae94c=users[_0x421c15(0x16d)];else{if(_0x5c6f99[0x0][_0x421c15(0x160)]==_0x421c15(0x181))var _0x5ae94c=users[_0x421c15(0x1c6)];}}}}}}}const _0x24f37f=getRandom8DigitNumber();_0x24f37f[_0x421c15(0xff)](_0x47c948=>{var _0xe55be4=_0x421c15;_0x43c5c5[_0xe55be4(0x1aa)]('choos_transfer_logs',{'success':_0x403db7[_0xe55be4(0x1a0)](_0xe55be4(0x100)),'errors':_0x403db7['flash'](_0xe55be4(0x15c)),'role':_0x53f622,'profile':_0x5e741c,'master_shop':_0x5c6f99,'warehouse':_0x491552,'language':_0x5ae94c,'invoice':_0x47c948});})[_0x421c15(0x1a1)](_0x5aeb99=>{var _0x382959=_0x421c15;_0x403db7[_0x382959(0x1a0)](_0x382959(0x15c),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x43c5c5['redirect'](_0x382959(0x14a));});}catch(_0x27cbcb){console['log'](_0x27cbcb);}}),router[a0_0x41a076(0x12e)]('/view/add_transfer_logs',auth,async(_0x569939,_0x319d06)=>{var _0x543b48=a0_0x41a076;try{const {date:_0x2aa94c,from_warehouse:_0x144a9f,FromRoom_name:_0x342be6,to_warehouse:_0x5901ec,ToRoom_name:_0x382901,prod_name:_0x727300,from_prod_qty:_0x348d68,from_prod_level:_0x248ea9,from_prod_isle:_0xe1ffa9,from_prod_pallet:_0x333e09,to_prod_qty:_0x5b2960,to_prod_level:_0x43fb9f,to_prod_isle:_0x24d3bf,to_prod_pallet:_0x53c3aa,primary_code:_0x1adc02,secondary_code:_0x1c2ecb,product_code3:_0x30aff9,note:_0x30c8f4,MaxStocks_data2:_0x200f92,invoice:_0x43cda8,expiry_date:_0x65f2cc,PO_number:_0x1af2de,ReqBy:_0x118d8f,dateofreq:_0x32ee9d,typeservicesData:_0x48f3e7,destination:_0x2710fc,deliverydate:_0x2ae5db,driver:_0x659e66,plate:_0x56bc43,van:_0x1f3a20,DRSI:_0x452091,typevehicle:_0x3df221,TSU:_0x2f8c92,TFU:_0x1e3b4d}=_0x569939[_0x543b48(0x168)];if(typeof _0x727300=='string')var _0x10fac5=[_0x569939[_0x543b48(0x168)][_0x543b48(0x13d)]],_0x54a669=[_0x569939[_0x543b48(0x168)][_0x543b48(0x172)]],_0x48f6c8=[_0x569939[_0x543b48(0x168)][_0x543b48(0x163)]],_0x2e39c3=[_0x569939['body'][_0x543b48(0x170)]],_0x2acacf=[_0x569939[_0x543b48(0x168)][_0x543b48(0x173)]],_0x46421f=[_0x569939[_0x543b48(0x168)][_0x543b48(0x129)]],_0x233c13=[_0x569939[_0x543b48(0x168)]['secondary_code']],_0x1c1831=[_0x569939[_0x543b48(0x168)][_0x543b48(0x11e)]],_0x16ef97=[_0x569939[_0x543b48(0x168)][_0x543b48(0x153)]],_0xe80ac2=[_0x569939[_0x543b48(0x168)]['primary_unit']],_0x3b895a=[_0x569939[_0x543b48(0x168)][_0x543b48(0x1b1)]],_0x37804f=[_0x569939['body'][_0x543b48(0x14e)]],_0xefa71f=[_0x569939[_0x543b48(0x168)][_0x543b48(0x16c)]],_0x2133ee=[_0x569939[_0x543b48(0x168)][_0x543b48(0x10f)]],_0x526348=[_0x569939[_0x543b48(0x168)][_0x543b48(0x119)]],_0x3c7646=[_0x569939['body'][_0x543b48(0x11d)]],_0x18f5f5=[_0x569939[_0x543b48(0x168)][_0x543b48(0x143)]],_0x3e64a9=[_0x569939[_0x543b48(0x168)][_0x543b48(0x14c)]],_0xafd95b=[_0x569939['body'][_0x543b48(0x14f)]],_0x43d6de=[_0x569939['body'][_0x543b48(0x162)]],_0x4c84db=[_0x569939['body']['id_transaction']];else var _0x10fac5=[..._0x569939[_0x543b48(0x168)][_0x543b48(0x13d)]],_0x54a669=[..._0x569939[_0x543b48(0x168)]['from_prod_qty']],_0x48f6c8=[..._0x569939['body'][_0x543b48(0x163)]],_0x2e39c3=[..._0x569939['body'][_0x543b48(0x170)]],_0x2acacf=[..._0x569939['body']['to_prod_level']],_0x46421f=[..._0x569939[_0x543b48(0x168)][_0x543b48(0x129)]],_0x233c13=[..._0x569939[_0x543b48(0x168)][_0x543b48(0x133)]],_0x1c1831=[..._0x569939['body']['product_code3']],_0x16ef97=[..._0x569939[_0x543b48(0x168)]['MaxStocks_data2']],_0xe80ac2=[..._0x569939[_0x543b48(0x168)][_0x543b48(0x128)]],_0x3b895a=[..._0x569939[_0x543b48(0x168)][_0x543b48(0x1b1)]],_0x37804f=[..._0x569939[_0x543b48(0x168)]['batch_code']],_0xefa71f=[..._0x569939[_0x543b48(0x168)][_0x543b48(0x16c)]],_0x2133ee=[..._0x569939['body']['product_date']],_0x526348=[..._0x569939['body'][_0x543b48(0x119)]],_0x3c7646=[..._0x569939[_0x543b48(0x168)][_0x543b48(0x11d)]],_0x18f5f5=[..._0x569939[_0x543b48(0x168)]['prod_cat']],_0x3e64a9=[..._0x569939[_0x543b48(0x168)][_0x543b48(0x14c)]],_0xafd95b=[..._0x569939['body'][_0x543b48(0x14f)]],_0x43d6de=[..._0x569939['body'][_0x543b48(0x162)]],_0x4c84db=[..._0x569939['body'][_0x543b48(0x1ad)]];const _0x2266d0=_0x10fac5[_0x543b48(0x1b0)](_0x305d88=>{return _0x305d88={'product_name':_0x305d88};});_0x54a669[_0x543b48(0x196)]((_0x2a40a1,_0x59e02c)=>{var _0x122835=_0x543b48;_0x2266d0[_0x59e02c][_0x122835(0x154)]=_0x2a40a1;}),_0x48f6c8['forEach']((_0x204a5e,_0x5e7ef7)=>{var _0x242cd3=_0x543b48,_0x521725=_0x204a5e['match'](/[A-Za-z]+/)[0x0],_0x5ee942=parseInt(_0x204a5e[_0x242cd3(0x17e)](/\d+/)[0x0]);_0x2266d0[_0x5e7ef7]['from_bay']=_0x5ee942,_0x2266d0[_0x5e7ef7][_0x242cd3(0x132)]=_0x521725;}),_0x4c84db[_0x543b48(0x196)]((_0x71583b,_0x379940)=>{var _0x5963da=_0x543b48;_0x2266d0[_0x379940][_0x5963da(0x1ad)]=_0x71583b;}),_0x43d6de[_0x543b48(0x196)]((_0x3c66ad,_0x4986d9)=>{var _0x27b7f3=_0x543b48;_0x2266d0[_0x4986d9][_0x27b7f3(0x162)]=_0x3c66ad;}),_0x2e39c3[_0x543b48(0x196)]((_0x1cb251,_0x1c579a)=>{var _0x1c440a=_0x543b48;_0x2266d0[_0x1c579a][_0x1c440a(0x11b)]=_0x1cb251;}),_0x2acacf[_0x543b48(0x196)]((_0x13d93d,_0x30f7b9)=>{var _0x1fbbd9=_0x543b48,_0x2997ea=_0x13d93d[_0x1fbbd9(0x17e)](/[A-Za-z]+/)[0x0],_0x289bed=parseInt(_0x13d93d[_0x1fbbd9(0x17e)](/\d+/)[0x0]);_0x2266d0[_0x30f7b9][_0x1fbbd9(0x155)]=_0x2997ea,_0x2266d0[_0x30f7b9][_0x1fbbd9(0x1a5)]=_0x289bed;}),_0x46421f[_0x543b48(0x196)]((_0x2caf34,_0x29a360)=>{var _0x4451cc=_0x543b48;_0x2266d0[_0x29a360][_0x4451cc(0x129)]=_0x2caf34;}),_0x233c13[_0x543b48(0x196)]((_0x3554da,_0x1b1870)=>{var _0x34698f=_0x543b48;_0x2266d0[_0x1b1870][_0x34698f(0x133)]=_0x3554da;}),_0x1c1831[_0x543b48(0x196)]((_0x117955,_0x19c576)=>{var _0x5483b1=_0x543b48;_0x2266d0[_0x19c576][_0x5483b1(0x17c)]=_0x117955;}),_0x16ef97[_0x543b48(0x196)]((_0x1223d2,_0x5f1e99)=>{var _0x47c1f2=_0x543b48;_0x2266d0[_0x5f1e99][_0x47c1f2(0x18a)]=_0x1223d2;}),_0xe80ac2['forEach']((_0x48227e,_0x30d805)=>{var _0x289df4=_0x543b48;_0x2266d0[_0x30d805][_0x289df4(0x120)]=_0x48227e;}),_0x3b895a[_0x543b48(0x196)]((_0x56fdc2,_0x4a3f03)=>{_0x2266d0[_0x4a3f03]['secondary_unit']=_0x56fdc2;}),_0x37804f[_0x543b48(0x196)]((_0x2ed730,_0x308c4b)=>{var _0x4a88b4=_0x543b48;_0x2266d0[_0x308c4b][_0x4a88b4(0x14e)]=_0x2ed730;}),_0xefa71f[_0x543b48(0x196)]((_0x4e0abd,_0x397c7e)=>{var _0x1e35cd=_0x543b48;_0x2266d0[_0x397c7e][_0x1e35cd(0x16c)]=_0x4e0abd;}),_0x2133ee[_0x543b48(0x196)]((_0x55f4cb,_0x470176)=>{var _0x2b962c=_0x543b48;_0x2266d0[_0x470176][_0x2b962c(0x1b8)]=_0x55f4cb;}),_0x526348[_0x543b48(0x196)]((_0x5310eb,_0x1fd263)=>{var _0x27c864=_0x543b48;_0x2266d0[_0x1fd263][_0x27c864(0x18a)]=_0x5310eb;}),_0x3c7646[_0x543b48(0x196)]((_0x44fd67,_0x5943fa)=>{var _0x25172c=_0x543b48;_0x2266d0[_0x5943fa][_0x25172c(0x11d)]=_0x44fd67;}),_0x18f5f5['forEach']((_0x3adc93,_0x3f7694)=>{var _0xed8f3=_0x543b48;_0x2266d0[_0x3f7694][_0xed8f3(0x143)]=_0x3adc93;}),_0x3e64a9[_0x543b48(0x196)]((_0x327ede,_0x4834ca)=>{var _0x1b77f8=_0x543b48;_0x2266d0[_0x4834ca][_0x1b77f8(0x171)]=_0x327ede;}),_0xafd95b[_0x543b48(0x196)]((_0x11f526,_0x3bfa6e)=>{_0x2266d0[_0x3bfa6e]['to_room_name']=_0x11f526;});const _0x37c82b=_0x2266d0['filter'](_0x36a2c5=>_0x36a2c5['to_quantity']!=='0'&&_0x36a2c5[_0x543b48(0x11b)]!==''||_0x36a2c5[_0x543b48(0x16a)]!=='0'&&_0x36a2c5[_0x543b48(0x16a)]!=='');var _0x30d366=0x0;_0x37c82b[_0x543b48(0x196)](_0x53609c=>{var _0xc2ebe2=_0x543b48;parseInt(_0x53609c[_0xc2ebe2(0x154)])<parseInt(_0x53609c[_0xc2ebe2(0x11b)])&&_0x30d366++;});if(_0x30d366!=0x0)return _0x569939[_0x543b48(0x1a0)](_0x543b48(0x15c),_0x543b48(0x17d)),_0x319d06[_0x543b48(0x199)](_0x543b48(0x18d));const _0x12b4c5=new transfers_logs();await _0x12b4c5[_0x543b48(0x1b6)]();for(let _0x53b39b=0x0;_0x53b39b<=_0xafd95b['length']-0x1;_0x53b39b++){_0x2266d0[_0x53b39b][_0x543b48(0x15d)]=_0x543b48(0x101)+_0x12b4c5['invoice_init'][_0x543b48(0x12b)]()[_0x543b48(0x126)](0x8,'0');}const _0x7aa1a9=new transfers_finished({'date':_0x2aa94c,'from_warehouse':_0x144a9f,'to_warehouse':_0x144a9f,'product':_0x37c82b,'note':_0x30c8f4,'invoice':_0x543b48(0x101)+_0x12b4c5[_0x543b48(0x17b)]['toString']()[_0x543b48(0x126)](0x8,'0'),'type_of_process':_0x543b48(0x146),'type_of_transaction':'logs','PO_number':_0x1af2de,'RequestedBy':_0x118d8f,'DateofRequest':_0x32ee9d,'typeservices':_0x48f3e7,'destination':_0x2710fc,'deliverydate':_0x2ae5db,'driver':_0x659e66,'plate':_0x56bc43,'van':_0x1f3a20,'DRSI':_0x452091,'typevehicle':_0x3df221,'TSU':_0x2f8c92,'TFU':_0x1e3b4d}),_0x525e99=await _0x7aa1a9[_0x543b48(0x1b6)]();_0x569939['flash'](_0x543b48(0x100),_0x543b48(0x102)),_0x319d06['redirect'](_0x543b48(0x10a)+_0x525e99[_0x543b48(0x152)]);}catch(_0x359e4e){console['log'](_0x359e4e),_0x319d06[_0x543b48(0x1c1)](0xc8)[_0x543b48(0x130)]({'errorMessage':_0x359e4e[_0x543b48(0x111)]});}}),router[a0_0x41a076(0x12e)]('/view/addlog',auth,async(_0x59325a,_0x2a3570)=>{var _0x18f15e=a0_0x41a076;try{const {date:_0x248cb5,from_warehouse:_0x2714e9,FromRoom_name:_0x595883,to_warehouse:_0x4df878,ToRoom_name:_0x1119a5,prod_name:_0x3837ce,from_prod_qty:_0x3d9545,from_prod_level:_0x90de64,from_prod_isle:_0x247d05,from_prod_pallet:_0x5a7e0f,to_prod_qty:_0x3e7f14,to_prod_level:_0x2bcd13,to_prod_isle:_0x286e2d,to_prod_pallet:_0x214c9a,primary_code:_0x1519ed,secondary_code:_0x38252f,product_code3:_0x2d181c,note:_0x3e67ef,MaxStocks_data2:_0x511199,invoice:_0x1d8cd3,expiry_date:_0x3b3932,PO_number_loc:_0x44315b,ReqBy_loc:_0x55581d,dateofreq_loc:_0x3b9110,typeservices_loc_Data:_0x2a20b5,destination_loc:_0x23677f,deliverydate_loc:_0x34ec2a,driver_loc:_0x13973f,plate_loc:_0x37d254,van_loc:_0x46157f,DRSI_loc:_0x6adb9a,typevehicle_loc:_0x571d68,TSU_loc:_0x326fe6,TFU_loc:_0x201c8a}=_0x59325a[_0x18f15e(0x168)];if(typeof _0x3837ce=='string')var _0x4d397d=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x13d)]],_0x1773b0=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x172)]],_0x1a3e1e=[_0x59325a['body'][_0x18f15e(0x163)]],_0xa2e2e1=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x170)]],_0x581229=[_0x59325a[_0x18f15e(0x168)]['to_prod_level']],_0x3efc0b=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x129)]],_0x3c4a48=[_0x59325a[_0x18f15e(0x168)]['secondary_code']],_0x496212=[_0x59325a['body'][_0x18f15e(0x11e)]],_0x139724=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x153)]],_0x4dbd25=[_0x59325a['body'][_0x18f15e(0x128)]],_0x12a8b2=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x1b1)]],_0x4755f4=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x14e)]],_0x2e9f60=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x16c)]],_0x4030b7=[_0x59325a['body']['product_date']],_0x4dda2c=[_0x59325a['body'][_0x18f15e(0x119)]],_0xf638=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x11d)]],_0x3a26f8=[_0x59325a[_0x18f15e(0x168)]['prod_cat']],_0x37b5be=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x14c)]],_0x4ceadc=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x14f)]],_0x1004a7=[_0x59325a['body'][_0x18f15e(0x162)]],_0x143db5=[_0x59325a[_0x18f15e(0x168)][_0x18f15e(0x1ad)]];else var _0x4d397d=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x13d)]],_0x1773b0=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x172)]],_0x1a3e1e=[..._0x59325a['body'][_0x18f15e(0x163)]],_0xa2e2e1=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x170)]],_0x581229=[..._0x59325a[_0x18f15e(0x168)]['to_prod_level']],_0x3efc0b=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x129)]],_0x3c4a48=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x133)]],_0x496212=[..._0x59325a[_0x18f15e(0x168)]['product_code3']],_0x139724=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x153)]],_0x4dbd25=[..._0x59325a['body']['primary_unit']],_0x12a8b2=[..._0x59325a[_0x18f15e(0x168)]['secondary_unit']],_0x4755f4=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x14e)]],_0x2e9f60=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x16c)]],_0x4030b7=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x10f)]],_0x4dda2c=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x119)]],_0xf638=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x11d)]],_0x3a26f8=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x143)]],_0x37b5be=[..._0x59325a['body']['RoomAssigned']],_0x4ceadc=[..._0x59325a['body'][_0x18f15e(0x14f)]],_0x1004a7=[..._0x59325a[_0x18f15e(0x168)]['from_invoice']],_0x143db5=[..._0x59325a[_0x18f15e(0x168)][_0x18f15e(0x1ad)]];const _0x28a1ab=_0x4d397d['map'](_0x5b15e2=>{return _0x5b15e2={'product_name':_0x5b15e2};});_0x1773b0[_0x18f15e(0x196)]((_0x24b8a7,_0xee133c)=>{var _0x4dd333=_0x18f15e;_0x28a1ab[_0xee133c][_0x4dd333(0x154)]=_0x24b8a7;}),_0x1a3e1e[_0x18f15e(0x196)]((_0x48f606,_0x53b90f)=>{var _0x300cc3=_0x18f15e,_0x179430=_0x48f606[_0x300cc3(0x17e)](/[A-Za-z]+/)[0x0],_0x41152e=parseInt(_0x48f606[_0x300cc3(0x17e)](/\d+/)[0x0]);_0x28a1ab[_0x53b90f]['from_bay']=_0x41152e,_0x28a1ab[_0x53b90f]['from_level']=_0x179430;}),_0x143db5[_0x18f15e(0x196)]((_0x5e597b,_0x58419d)=>{var _0x342cd4=_0x18f15e;_0x28a1ab[_0x58419d][_0x342cd4(0x1ad)]=_0x5e597b;}),_0x1004a7['forEach']((_0x541b0f,_0x15f38e)=>{var _0x242145=_0x18f15e;_0x28a1ab[_0x15f38e][_0x242145(0x162)]=_0x541b0f;}),_0xa2e2e1['forEach']((_0x25f409,_0x296cdd)=>{var _0x3e758f=_0x18f15e;_0x28a1ab[_0x296cdd][_0x3e758f(0x11b)]=_0x25f409;}),_0x581229['forEach']((_0x56218b,_0x461eff)=>{var _0x4c10c7=_0x18f15e,_0x477104=_0x56218b[_0x4c10c7(0x17e)](/[A-Za-z]+/)[0x0],_0xd52a23=parseInt(_0x56218b['match'](/\d+/)[0x0]);_0x28a1ab[_0x461eff][_0x4c10c7(0x155)]=_0x477104,_0x28a1ab[_0x461eff][_0x4c10c7(0x1a5)]=_0xd52a23;}),_0x3efc0b['forEach']((_0x46511d,_0x2799fa)=>{var _0x12a6a0=_0x18f15e;_0x28a1ab[_0x2799fa][_0x12a6a0(0x129)]=_0x46511d;}),_0x3c4a48[_0x18f15e(0x196)]((_0x2fb7df,_0x25f19f)=>{var _0x4e8169=_0x18f15e;_0x28a1ab[_0x25f19f][_0x4e8169(0x133)]=_0x2fb7df;}),_0x496212[_0x18f15e(0x196)]((_0x5c8724,_0x30b44c)=>{_0x28a1ab[_0x30b44c]['product_code']=_0x5c8724;}),_0x139724[_0x18f15e(0x196)]((_0x516599,_0x1db8c2)=>{_0x28a1ab[_0x1db8c2]['maxProducts']=_0x516599;}),_0x4dbd25[_0x18f15e(0x196)]((_0x2ab56d,_0x2aba09)=>{_0x28a1ab[_0x2aba09]['unit']=_0x2ab56d;}),_0x12a8b2[_0x18f15e(0x196)]((_0xd6fa6e,_0x3f2ef8)=>{var _0x303c54=_0x18f15e;_0x28a1ab[_0x3f2ef8][_0x303c54(0x1b1)]=_0xd6fa6e;}),_0x4755f4[_0x18f15e(0x196)]((_0x3191f5,_0x3c2cdb)=>{var _0x375a2e=_0x18f15e;_0x28a1ab[_0x3c2cdb][_0x375a2e(0x14e)]=_0x3191f5;}),_0x2e9f60[_0x18f15e(0x196)]((_0x36be8e,_0x557a51)=>{var _0x3e5fa7=_0x18f15e;_0x28a1ab[_0x557a51][_0x3e5fa7(0x16c)]=_0x36be8e;}),_0x4030b7[_0x18f15e(0x196)]((_0x253e43,_0x4adf56)=>{var _0x31ae27=_0x18f15e;_0x28a1ab[_0x4adf56][_0x31ae27(0x1b8)]=_0x253e43;}),_0x4dda2c[_0x18f15e(0x196)]((_0x3a988f,_0x4c2609)=>{var _0x1ae756=_0x18f15e;_0x28a1ab[_0x4c2609][_0x1ae756(0x18a)]=_0x3a988f;}),_0xf638['forEach']((_0x4de565,_0x4f8e35)=>{_0x28a1ab[_0x4f8e35]['maxPerUnit']=_0x4de565;}),_0x3a26f8[_0x18f15e(0x196)]((_0x20da9e,_0x1cf598)=>{var _0x41f156=_0x18f15e;_0x28a1ab[_0x1cf598][_0x41f156(0x143)]=_0x20da9e;}),_0x37b5be[_0x18f15e(0x196)]((_0x25ca61,_0x2dea77)=>{var _0x1b060d=_0x18f15e;_0x28a1ab[_0x2dea77][_0x1b060d(0x171)]=_0x25ca61;}),_0x4ceadc[_0x18f15e(0x196)]((_0x5c4e81,_0x179a2e)=>{var _0x5472b8=_0x18f15e;_0x28a1ab[_0x179a2e][_0x5472b8(0x1a7)]=_0x5c4e81;});const _0x3d4f47=_0x28a1ab[_0x18f15e(0x122)](_0x21b317=>_0x21b317['to_quantity']!=='0'&&_0x21b317['to_quantity']!==''||_0x21b317[_0x18f15e(0x16a)]!=='0'&&_0x21b317[_0x18f15e(0x16a)]!=='');var _0x1a782a=0x0;_0x3d4f47[_0x18f15e(0x196)](_0x38ab6b=>{var _0x49fb12=_0x18f15e;parseInt(_0x38ab6b['from_quantity'])<parseInt(_0x38ab6b[_0x49fb12(0x11b)])&&_0x1a782a++;});if(_0x1a782a!=0x0)return _0x59325a[_0x18f15e(0x1a0)](_0x18f15e(0x15c),_0x18f15e(0x17d)),_0x2a3570[_0x18f15e(0x199)](_0x18f15e(0x18d));const _0x5cad16=new transfers_logs();await _0x5cad16[_0x18f15e(0x1b6)]();for(let _0x31dd1e=0x0;_0x31dd1e<=_0x4ceadc[_0x18f15e(0x1bd)]-0x1;_0x31dd1e++){_0x28a1ab[_0x31dd1e][_0x18f15e(0x15d)]=_0x18f15e(0x101)+_0x5cad16['invoice_init'][_0x18f15e(0x12b)]()[_0x18f15e(0x126)](0x8,'0');}const _0xca27b3=new transfers_finished({'date':_0x248cb5,'from_warehouse':_0x2714e9,'to_warehouse':_0x4df878,'product':_0x3d4f47,'note':_0x3e67ef,'invoice':'LOG-TRF-'+_0x5cad16['invoice_init']['toString']()[_0x18f15e(0x126)](0x8,'0'),'type_of_transaction':'logs','type_of_process':_0x18f15e(0x11f),'PO_number':_0x44315b,'RequestedBy':_0x55581d,'DateofRequest':_0x3b9110,'typeservices':_0x2a20b5,'destination':_0x23677f,'deliverydate':_0x34ec2a,'driver':_0x13973f,'plate':_0x37d254,'van':_0x46157f,'DRSI':_0x6adb9a,'typevehicle':_0x571d68,'TSU':_0x326fe6,'TFU':_0x201c8a}),_0x59f709=await _0xca27b3[_0x18f15e(0x1b6)]();_0x59325a[_0x18f15e(0x1a0)](_0x18f15e(0x100),_0x18f15e(0x102)),_0x2a3570[_0x18f15e(0x199)](_0x18f15e(0x10a)+_0x59f709[_0x18f15e(0x152)]);}catch(_0x33dfa9){console['log'](_0x33dfa9),_0x2a3570[_0x18f15e(0x1c1)](0xc8)['json']({'errorMessage':_0x33dfa9['message']});}}),router[a0_0x41a076(0x12e)](a0_0x41a076(0x1b3),auth,async(_0x225a82,_0x307bf3)=>{var _0x30e8bd=a0_0x41a076;try{const {date:_0x1ff1ea,from_warehouse:_0xf49bc2,FromRoom_name:_0x944de6,to_warehouse:_0x188aaa,ToRoom_name:_0x1fefa6,prod_name:_0x13123d,from_prod_qty:_0x5bc1c3,from_prod_level:_0xab7181,from_prod_isle:_0x1bfdda,from_prod_pallet:_0x585a43,to_prod_qty:_0x14a318,to_prod_level:_0x4c53b0,to_prod_isle:_0x3f2ad6,to_prod_pallet:_0x18700c,primary_code:_0x2a6b7a,secondary_code:_0x536ebe,product_code3:_0x58fcc4,note:_0x251cb2,MaxStocks_data2:_0x481081,invoice:_0x32692d,expiry_date:_0x3c1c3c,PO_number:_0x324a65,ReqBy:_0x834d21,dateofreq:_0x258bf3,typeservicesData:_0x5e893d,destination:_0x2e2030,deliverydate:_0x70153a,driver:_0x37d6a8,plate:_0x51ebd5,van:_0x14c01a,DRSI:_0x218fe9,typevehicle:_0xb1b92c,TSU:_0x2fc3db,TFU:_0x2d4669}=_0x225a82[_0x30e8bd(0x168)];if(typeof _0x13123d==_0x30e8bd(0x123))var _0x54c318=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x13d)]],_0x2fab6d=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x172)]],_0x5133dd=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x163)]],_0xb494f8=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x170)]],_0x42f513=[_0x225a82[_0x30e8bd(0x168)]['to_prod_level']],_0x5e8daf=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x129)]],_0x32b250=[_0x225a82['body']['secondary_code']],_0x26008c=[_0x225a82[_0x30e8bd(0x168)]['product_code3']],_0xcb0a98=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x153)]],_0x1d851d=[_0x225a82['body'][_0x30e8bd(0x128)]],_0x3525d4=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x1b1)]],_0x24e462=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x14e)]],_0xc12e6f=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x16c)]],_0x4cb8b5=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x10f)]],_0x17c202=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x119)]],_0x5155eb=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x11d)]],_0x37b7d1=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x143)]],_0x3fcdea=[_0x225a82[_0x30e8bd(0x168)]['RoomAssigned']],_0x32ceaf=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x14f)]],_0x3fa1a8=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x162)]],_0x102793=[_0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x1ad)]];else var _0x54c318=[..._0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x13d)]],_0x2fab6d=[..._0x225a82['body']['from_prod_qty']],_0x5133dd=[..._0x225a82[_0x30e8bd(0x168)]['from_prod_level2']],_0xb494f8=[..._0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x170)]],_0x42f513=[..._0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x173)]],_0x5e8daf=[..._0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x129)]],_0x32b250=[..._0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x133)]],_0x26008c=[..._0x225a82['body']['product_code3']],_0xcb0a98=[..._0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x153)]],_0x1d851d=[..._0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x128)]],_0x3525d4=[..._0x225a82[_0x30e8bd(0x168)]['secondary_unit']],_0x24e462=[..._0x225a82['body'][_0x30e8bd(0x14e)]],_0xc12e6f=[..._0x225a82['body'][_0x30e8bd(0x16c)]],_0x4cb8b5=[..._0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x10f)]],_0x17c202=[..._0x225a82['body'][_0x30e8bd(0x119)]],_0x5155eb=[..._0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x11d)]],_0x37b7d1=[..._0x225a82['body'][_0x30e8bd(0x143)]],_0x3fcdea=[..._0x225a82['body'][_0x30e8bd(0x14c)]],_0x32ceaf=[..._0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x14f)]],_0x3fa1a8=[..._0x225a82[_0x30e8bd(0x168)][_0x30e8bd(0x162)]],_0x102793=[..._0x225a82[_0x30e8bd(0x168)]['id_transaction']];const _0x568b05=_0x54c318['map'](_0xa77415=>{return _0xa77415={'product_name':_0xa77415};});_0x2fab6d[_0x30e8bd(0x196)]((_0x2596d7,_0x3375c4)=>{var _0x46a2e0=_0x30e8bd;_0x568b05[_0x3375c4][_0x46a2e0(0x154)]=_0x2596d7;}),_0x5133dd[_0x30e8bd(0x196)]((_0x3a6e21,_0x443684)=>{var _0x25c328=_0x30e8bd,_0x11e8e5=_0x3a6e21['match'](/[A-Za-z]+/)[0x0],_0x58569d=parseInt(_0x3a6e21[_0x25c328(0x17e)](/\d+/)[0x0]);_0x568b05[_0x443684]['from_bay']=_0x58569d,_0x568b05[_0x443684][_0x25c328(0x132)]=_0x11e8e5;}),_0x102793['forEach']((_0x4d17cf,_0x2a428c)=>{var _0x493fdf=_0x30e8bd;_0x568b05[_0x2a428c][_0x493fdf(0x1ad)]=_0x4d17cf;}),_0x3fa1a8[_0x30e8bd(0x196)]((_0x30fdc9,_0x25d287)=>{var _0xfc5b65=_0x30e8bd;_0x568b05[_0x25d287][_0xfc5b65(0x162)]=_0x30fdc9;}),_0xb494f8[_0x30e8bd(0x196)]((_0x3d190a,_0x13ea13)=>{var _0x5bbc5d=_0x30e8bd;_0x568b05[_0x13ea13][_0x5bbc5d(0x11b)]=_0x3d190a;}),_0x42f513[_0x30e8bd(0x196)]((_0x12e9b2,_0x50e215)=>{var _0x400900=_0x30e8bd,_0x44a4d9=_0x12e9b2[_0x400900(0x17e)](/[A-Za-z]+/)[0x0],_0x303fe7=parseInt(_0x12e9b2[_0x400900(0x17e)](/\d+/)[0x0]);_0x568b05[_0x50e215]['to_level']=_0x44a4d9,_0x568b05[_0x50e215][_0x400900(0x1a5)]=_0x303fe7;}),_0x5e8daf[_0x30e8bd(0x196)]((_0x19c2ae,_0x196680)=>{_0x568b05[_0x196680]['primary_code']=_0x19c2ae;}),_0x32b250[_0x30e8bd(0x196)]((_0x383271,_0x80f80)=>{var _0x346c82=_0x30e8bd;_0x568b05[_0x80f80][_0x346c82(0x133)]=_0x383271;}),_0x26008c['forEach']((_0x4e8755,_0x353a54)=>{var _0x298717=_0x30e8bd;_0x568b05[_0x353a54][_0x298717(0x17c)]=_0x4e8755;}),_0xcb0a98[_0x30e8bd(0x196)]((_0x2e22aa,_0x4ec738)=>{var _0x378189=_0x30e8bd;_0x568b05[_0x4ec738][_0x378189(0x18a)]=_0x2e22aa;}),_0x1d851d[_0x30e8bd(0x196)]((_0x52bcb6,_0x44ae61)=>{var _0x58ca8c=_0x30e8bd;_0x568b05[_0x44ae61][_0x58ca8c(0x120)]=_0x52bcb6;}),_0x3525d4[_0x30e8bd(0x196)]((_0x4ecec7,_0xc8eff4)=>{var _0x405c47=_0x30e8bd;_0x568b05[_0xc8eff4][_0x405c47(0x1b1)]=_0x4ecec7;}),_0x24e462[_0x30e8bd(0x196)]((_0x349069,_0x27d87c)=>{var _0x4a2fb6=_0x30e8bd;_0x568b05[_0x27d87c][_0x4a2fb6(0x14e)]=_0x349069;}),_0xc12e6f['forEach']((_0x340e32,_0x205e8a)=>{var _0xdaa17a=_0x30e8bd;_0x568b05[_0x205e8a][_0xdaa17a(0x16c)]=_0x340e32;}),_0x4cb8b5[_0x30e8bd(0x196)]((_0x5e2fc4,_0x347f00)=>{var _0x281dc6=_0x30e8bd;_0x568b05[_0x347f00][_0x281dc6(0x1b8)]=_0x5e2fc4;}),_0x17c202[_0x30e8bd(0x196)]((_0x578021,_0x2f74dc)=>{var _0x396b75=_0x30e8bd;_0x568b05[_0x2f74dc][_0x396b75(0x18a)]=_0x578021;}),_0x5155eb[_0x30e8bd(0x196)]((_0x1302cb,_0x23c0b2)=>{var _0x3a9077=_0x30e8bd;_0x568b05[_0x23c0b2][_0x3a9077(0x11d)]=_0x1302cb;}),_0x37b7d1['forEach']((_0x27fcdb,_0x3b6f93)=>{var _0x3efe9d=_0x30e8bd;_0x568b05[_0x3b6f93][_0x3efe9d(0x143)]=_0x27fcdb;}),_0x3fcdea[_0x30e8bd(0x196)]((_0x161a38,_0x4ab0bb)=>{_0x568b05[_0x4ab0bb]['from_room_name']=_0x161a38;}),_0x32ceaf[_0x30e8bd(0x196)]((_0x4dfa14,_0x17d852)=>{var _0x1e574b=_0x30e8bd;_0x568b05[_0x17d852][_0x1e574b(0x1a7)]=_0x4dfa14;});const _0x2e5ec5=_0x568b05[_0x30e8bd(0x122)](_0x38e052=>_0x38e052[_0x30e8bd(0x11b)]!=='0'&&_0x38e052[_0x30e8bd(0x11b)]!==''||_0x38e052[_0x30e8bd(0x16a)]!=='0'&&_0x38e052[_0x30e8bd(0x16a)]!=='');var _0x22dd6c=0x0;_0x2e5ec5[_0x30e8bd(0x196)](_0x972656=>{var _0x29d18c=_0x30e8bd;parseInt(_0x972656[_0x29d18c(0x154)])<parseInt(_0x972656[_0x29d18c(0x11b)])&&_0x22dd6c++;});if(_0x22dd6c!=0x0)return _0x225a82[_0x30e8bd(0x1a0)](_0x30e8bd(0x15c),_0x30e8bd(0x17d)),_0x307bf3[_0x30e8bd(0x199)](_0x30e8bd(0x18d));const _0x12a737=new invoice_for_transfer();await _0x12a737[_0x30e8bd(0x1b6)]();for(let _0x1698c6=0x0;_0x1698c6<=_0x32ceaf['length']-0x1;_0x1698c6++){_0x568b05[_0x1698c6][_0x30e8bd(0x15d)]='TRF-'+_0x12a737[_0x30e8bd(0x17b)]['toString']()[_0x30e8bd(0x126)](0x8,'0');}const _0x5e7080=new transfers_finished({'date':_0x1ff1ea,'from_warehouse':_0xf49bc2,'to_warehouse':_0xf49bc2,'product':_0x2e5ec5,'note':_0x251cb2,'invoice':_0x30e8bd(0x1b4)+_0x12a737[_0x30e8bd(0x17b)][_0x30e8bd(0x12b)]()[_0x30e8bd(0x126)](0x8,'0'),'type_of_process':_0x30e8bd(0x146),'type_of_transaction':_0x30e8bd(0x11c),'PO_number':_0x324a65,'RequestedBy':_0x834d21,'DateofRequest':_0x258bf3,'typeservices':_0x5e893d,'destination':_0x2e2030,'deliverydate':_0x70153a,'driver':_0x37d6a8,'plate':_0x51ebd5,'van':_0x14c01a,'DRSI':_0x218fe9,'typevehicle':_0xb1b92c,'TSU':_0x2fc3db,'TFU':_0x2d4669}),_0x51e90e=await _0x5e7080[_0x30e8bd(0x1b6)]();_0x225a82[_0x30e8bd(0x1a0)](_0x30e8bd(0x100),'Product\x20Transfer\x20successfully'),_0x307bf3[_0x30e8bd(0x199)](_0x30e8bd(0x10a)+_0x51e90e['_id']);}catch(_0x2dfea8){console['log'](_0x2dfea8),_0x307bf3[_0x30e8bd(0x1c1)](0xc8)[_0x30e8bd(0x130)]({'errorMessage':_0x2dfea8[_0x30e8bd(0x111)]});}}),router[a0_0x41a076(0x12e)](a0_0x41a076(0x1a8),auth,async(_0x40167f,_0x5143af)=>{var _0x3e27ec=a0_0x41a076;try{const {date:_0x11da6c,from_warehouse:_0x5c6108,FromRoom_name:_0x500334,to_warehouse:_0x523899,ToRoom_name:_0x51a5d3,prod_name:_0x535959,from_prod_qty:_0x45b3ef,from_prod_level:_0x347714,from_prod_isle:_0x40c38d,from_prod_pallet:_0xfd9224,to_prod_qty:_0x1aab5e,to_prod_level:_0x1f631a,to_prod_isle:_0x56151e,to_prod_pallet:_0x57dae2,primary_code:_0x366148,secondary_code:_0x55e9eb,product_code3:_0x1d9661,note:_0x3b3b0e,MaxStocks_data2:_0x573bdc,invoice:_0x5db9b6,expiry_date:_0x9ed33a,PO_number_loc:_0x1a8118,ReqBy_loc:_0x13411a,dateofreq_loc:_0x34506f,typeservices_loc_Data:_0x3a56c2,destination_loc:_0x17f957,deliverydate_loc:_0x2a4b37,driver_loc:_0x40e140,plate_loc:_0x2915fe,van_loc:_0xc0fec6,DRSI_loc:_0x573c4c,typevehicle_loc:_0x1f1d3b,TSU_loc:_0x314d08,TFU_loc:_0x2b9232}=_0x40167f[_0x3e27ec(0x168)];if(typeof _0x535959==_0x3e27ec(0x123))var _0x2aa15a=[_0x40167f['body']['prod_name']],_0xaf218d=[_0x40167f[_0x3e27ec(0x168)]['from_prod_qty']],_0x171ddc=[_0x40167f[_0x3e27ec(0x168)]['from_prod_level2']],_0x1912df=[_0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x170)]],_0x240238=[_0x40167f['body'][_0x3e27ec(0x173)]],_0xc2a91b=[_0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x129)]],_0x32b61e=[_0x40167f[_0x3e27ec(0x168)]['secondary_code']],_0xf3e750=[_0x40167f[_0x3e27ec(0x168)]['product_code3']],_0x40b2f3=[_0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x153)]],_0x5ea557=[_0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x128)]],_0x5a5c9c=[_0x40167f['body']['secondary_unit']],_0x564f42=[_0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x14e)]],_0xd6c5ec=[_0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x16c)]],_0x5d7c8d=[_0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x10f)]],_0x241bea=[_0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x119)]],_0x580d06=[_0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x11d)]],_0x27875e=[_0x40167f[_0x3e27ec(0x168)]['prod_cat']],_0x3433c4=[_0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x14c)]],_0xc2685b=[_0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x14f)]],_0x11cff9=[_0x40167f['body'][_0x3e27ec(0x162)]],_0x22e2d3=[_0x40167f['body'][_0x3e27ec(0x1ad)]];else var _0x2aa15a=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x13d)]],_0xaf218d=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x172)]],_0x171ddc=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x163)]],_0x1912df=[..._0x40167f['body'][_0x3e27ec(0x170)]],_0x240238=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x173)]],_0xc2a91b=[..._0x40167f['body'][_0x3e27ec(0x129)]],_0x32b61e=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x133)]],_0xf3e750=[..._0x40167f['body'][_0x3e27ec(0x11e)]],_0x40b2f3=[..._0x40167f[_0x3e27ec(0x168)]['MaxStocks_data2']],_0x5ea557=[..._0x40167f['body'][_0x3e27ec(0x128)]],_0x5a5c9c=[..._0x40167f['body']['secondary_unit']],_0x564f42=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x14e)]],_0xd6c5ec=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x16c)]],_0x5d7c8d=[..._0x40167f[_0x3e27ec(0x168)]['product_date']],_0x241bea=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x119)]],_0x580d06=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x11d)]],_0x27875e=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x143)]],_0x3433c4=[..._0x40167f[_0x3e27ec(0x168)]['RoomAssigned']],_0xc2685b=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x14f)]],_0x11cff9=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x162)]],_0x22e2d3=[..._0x40167f[_0x3e27ec(0x168)][_0x3e27ec(0x1ad)]];const _0x528880=_0x2aa15a[_0x3e27ec(0x1b0)](_0x34d8fe=>{return _0x34d8fe={'product_name':_0x34d8fe};});_0xaf218d['forEach']((_0x5b59df,_0x36d8a1)=>{var _0xc945e=_0x3e27ec;_0x528880[_0x36d8a1][_0xc945e(0x154)]=_0x5b59df;}),_0x171ddc['forEach']((_0x2fbb9b,_0x27eaff)=>{var _0x19ce9f=_0x3e27ec,_0x1e032c=_0x2fbb9b['match'](/[A-Za-z]+/)[0x0],_0x174241=parseInt(_0x2fbb9b[_0x19ce9f(0x17e)](/\d+/)[0x0]);_0x528880[_0x27eaff]['from_bay']=_0x174241,_0x528880[_0x27eaff][_0x19ce9f(0x132)]=_0x1e032c;}),_0x22e2d3[_0x3e27ec(0x196)]((_0x8b269e,_0x1452c8)=>{_0x528880[_0x1452c8]['id_transaction']=_0x8b269e;}),_0x11cff9[_0x3e27ec(0x196)]((_0x32f806,_0x632c8d)=>{var _0x244bf8=_0x3e27ec;_0x528880[_0x632c8d][_0x244bf8(0x162)]=_0x32f806;}),_0x1912df['forEach']((_0x1cffea,_0x26cfb6)=>{var _0x1c31d7=_0x3e27ec;_0x528880[_0x26cfb6][_0x1c31d7(0x11b)]=_0x1cffea;}),_0x240238[_0x3e27ec(0x196)]((_0x128e97,_0x232a77)=>{var _0x11148c=_0x3e27ec,_0x573065=_0x128e97[_0x11148c(0x17e)](/[A-Za-z]+/)[0x0],_0x4bd504=parseInt(_0x128e97[_0x11148c(0x17e)](/\d+/)[0x0]);_0x528880[_0x232a77]['to_level']=_0x573065,_0x528880[_0x232a77][_0x11148c(0x1a5)]=_0x4bd504;}),_0xc2a91b[_0x3e27ec(0x196)]((_0x272686,_0x477098)=>{var _0x1105d5=_0x3e27ec;_0x528880[_0x477098][_0x1105d5(0x129)]=_0x272686;}),_0x32b61e['forEach']((_0x1081ae,_0x49f324)=>{_0x528880[_0x49f324]['secondary_code']=_0x1081ae;}),_0xf3e750[_0x3e27ec(0x196)]((_0x296adf,_0x1e23ba)=>{var _0x5e5a97=_0x3e27ec;_0x528880[_0x1e23ba][_0x5e5a97(0x17c)]=_0x296adf;}),_0x40b2f3[_0x3e27ec(0x196)]((_0x3c8a8c,_0x1c3a79)=>{var _0x5755c5=_0x3e27ec;_0x528880[_0x1c3a79][_0x5755c5(0x18a)]=_0x3c8a8c;}),_0x5ea557[_0x3e27ec(0x196)]((_0x43f299,_0x3b113d)=>{_0x528880[_0x3b113d]['unit']=_0x43f299;}),_0x5a5c9c['forEach']((_0x13c131,_0x58dc21)=>{_0x528880[_0x58dc21]['secondary_unit']=_0x13c131;}),_0x564f42[_0x3e27ec(0x196)]((_0x333737,_0x242a61)=>{var _0x1e51ba=_0x3e27ec;_0x528880[_0x242a61][_0x1e51ba(0x14e)]=_0x333737;}),_0xd6c5ec['forEach']((_0x1d3a87,_0x349fc4)=>{var _0x1a2d56=_0x3e27ec;_0x528880[_0x349fc4][_0x1a2d56(0x16c)]=_0x1d3a87;}),_0x5d7c8d[_0x3e27ec(0x196)]((_0x19f665,_0x1611d5)=>{_0x528880[_0x1611d5]['production_date']=_0x19f665;}),_0x241bea[_0x3e27ec(0x196)]((_0x3f0d3f,_0x5ba16d)=>{_0x528880[_0x5ba16d]['maxProducts']=_0x3f0d3f;}),_0x580d06[_0x3e27ec(0x196)]((_0xe579f9,_0x215657)=>{var _0x5ae05e=_0x3e27ec;_0x528880[_0x215657][_0x5ae05e(0x11d)]=_0xe579f9;}),_0x27875e[_0x3e27ec(0x196)]((_0x51481a,_0x59911b)=>{var _0x50d9f5=_0x3e27ec;_0x528880[_0x59911b][_0x50d9f5(0x143)]=_0x51481a;}),_0x3433c4['forEach']((_0x466818,_0x35393a)=>{var _0x3c4a41=_0x3e27ec;_0x528880[_0x35393a][_0x3c4a41(0x171)]=_0x466818;}),_0xc2685b['forEach']((_0x54bcf5,_0x3550b1)=>{var _0x3938ed=_0x3e27ec;_0x528880[_0x3550b1][_0x3938ed(0x1a7)]=_0x54bcf5;});const _0x32fc3e=_0x528880[_0x3e27ec(0x122)](_0x2840cd=>_0x2840cd[_0x3e27ec(0x11b)]!=='0'&&_0x2840cd[_0x3e27ec(0x11b)]!==''||_0x2840cd[_0x3e27ec(0x16a)]!=='0'&&_0x2840cd['to_floorlevel']!=='');var _0x587e40=0x0;_0x32fc3e['forEach'](_0x35d181=>{var _0xca6a49=_0x3e27ec;parseInt(_0x35d181[_0xca6a49(0x154)])<parseInt(_0x35d181[_0xca6a49(0x11b)])&&_0x587e40++;});if(_0x587e40!=0x0)return _0x40167f[_0x3e27ec(0x1a0)](_0x3e27ec(0x15c),_0x3e27ec(0x17d)),_0x5143af[_0x3e27ec(0x199)](_0x3e27ec(0x18d));const _0x5eeada=new invoice_for_transfer();await _0x5eeada['save']();for(let _0x8bc3a4=0x0;_0x8bc3a4<=_0xc2685b[_0x3e27ec(0x1bd)]-0x1;_0x8bc3a4++){_0x528880[_0x8bc3a4][_0x3e27ec(0x15d)]='TRF-'+_0x5eeada[_0x3e27ec(0x17b)][_0x3e27ec(0x12b)]()[_0x3e27ec(0x126)](0x8,'0');}const _0x32f7cb=new transfers_finished({'date':_0x11da6c,'from_warehouse':_0x5c6108,'to_warehouse':_0x523899,'product':_0x32fc3e,'note':_0x3b3b0e,'invoice':'TRF-'+_0x5eeada[_0x3e27ec(0x17b)][_0x3e27ec(0x12b)]()[_0x3e27ec(0x126)](0x8,'0'),'type_of_transaction':_0x3e27ec(0x11c),'type_of_process':_0x3e27ec(0x11f),'PO_number':_0x1a8118,'RequestedBy':_0x13411a,'DateofRequest':_0x34506f,'typeservices':_0x3a56c2,'destination':_0x17f957,'deliverydate':_0x2a4b37,'driver':_0x40e140,'plate':_0x2915fe,'van':_0xc0fec6,'DRSI':_0x573c4c,'typevehicle':_0x1f1d3b,'TSU':_0x314d08,'TFU':_0x2b9232}),_0xd8737=await _0x32f7cb['save']();_0x40167f[_0x3e27ec(0x1a0)](_0x3e27ec(0x100),_0x3e27ec(0x102)),_0x5143af[_0x3e27ec(0x199)](_0x3e27ec(0x10a)+_0xd8737[_0x3e27ec(0x152)]);}catch(_0x48c6ba){console[_0x3e27ec(0x106)](_0x48c6ba),_0x5143af['status'](0xc8)[_0x3e27ec(0x130)]({'errorMessage':_0x48c6ba[_0x3e27ec(0x111)]});}}),router[a0_0x41a076(0x150)](a0_0x41a076(0x1c0),auth,async(_0x42f2bd,_0x1de851)=>{var _0x4234ee=a0_0x41a076;try{const {username:_0x165257,email:_0x4d5e44,role:_0x25900e}=_0x42f2bd[_0x4234ee(0x164)],_0x5320a7=_0x42f2bd['user'],_0x195230=await profile['findOne']({'email':_0x5320a7['email']}),_0x5da8c3=await master_shop['find'](),_0x40e7e6=await transfers_finished['findById'](_0x42f2bd['params']['id']);let _0x411211;if(_0x5320a7['role']==_0x4234ee(0x1a2)){const _0x171a97=await staff['findOne']({'email':_0x5320a7['email']});_0x411211=await warehouse[_0x4234ee(0x179)]({'status':_0x4234ee(0x158),'name':_0x171a97[_0x4234ee(0x105)],'warehouse_category':_0x4234ee(0x182)});}else _0x411211=await warehouse[_0x4234ee(0x179)]({'status':'Enabled','warehouse_category':_0x4234ee(0x182)});const _0x14a50d=await warehouse[_0x4234ee(0x18e)]([{'$match':{'name':_0x40e7e6[_0x4234ee(0x1a3)],'warehouse_category':_0x4234ee(0x182)}},{'$unwind':_0x4234ee(0x193)},{'$group':{'_id':_0x4234ee(0x176),'name':{'$first':_0x4234ee(0x110)},'product_stock':{'$first':_0x4234ee(0x188)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x4234ee(0x1c5)},'type':{'$first':_0x4234ee(0x19a)},'floorlevel':{'$first':_0x4234ee(0x140)},'primary_code':{'$first':_0x4234ee(0x185)},'secondary_code':{'$first':_0x4234ee(0x1be)},'product_code':{'$first':_0x4234ee(0x178)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x4234ee(0x10e)},'expiry_date':{'$first':_0x4234ee(0x12c)},'production_date':{'$first':_0x4234ee(0x117)},'room':{'$first':_0x4234ee(0x14b)},'warehoue_name':{'$first':'$name'}}}]),_0x28d7ad=await product[_0x4234ee(0x179)]({});if(_0x5da8c3[0x0][_0x4234ee(0x160)]=='English\x20(US)'){var _0x3827f3=users[_0x4234ee(0xfe)];console[_0x4234ee(0x106)](_0x3827f3);}else{if(_0x5da8c3[0x0][_0x4234ee(0x160)]=='Hindi')var _0x3827f3=users[_0x4234ee(0x198)];else{if(_0x5da8c3[0x0][_0x4234ee(0x160)]==_0x4234ee(0x184))var _0x3827f3=users[_0x4234ee(0x184)];else{if(_0x5da8c3[0x0]['language']==_0x4234ee(0x169))var _0x3827f3=users['Spanish'];else{if(_0x5da8c3[0x0][_0x4234ee(0x160)]==_0x4234ee(0x187))var _0x3827f3=users[_0x4234ee(0x187)];else{if(_0x5da8c3[0x0][_0x4234ee(0x160)]==_0x4234ee(0x16f))var _0x3827f3=users[_0x4234ee(0x148)];else{if(_0x5da8c3[0x0]['language']==_0x4234ee(0x16d))var _0x3827f3=users[_0x4234ee(0x16d)];else{if(_0x5da8c3[0x0][_0x4234ee(0x160)]=='Arabic\x20(ae)')var _0x3827f3=users['Arabic'];}}}}}}}_0x1de851[_0x4234ee(0x1aa)](_0x4234ee(0x1c7),{'success':_0x42f2bd['flash'](_0x4234ee(0x100)),'errors':_0x42f2bd[_0x4234ee(0x1a0)](_0x4234ee(0x15c)),'role':_0x5320a7,'profile':_0x195230,'master_shop':_0x5da8c3,'warehouse':_0x411211,'transfer':_0x40e7e6,'stock':_0x14a50d,'unit':_0x28d7ad,'language':_0x3827f3});}catch(_0x1d69af){console[_0x4234ee(0x106)](_0x1d69af);}}),router[a0_0x41a076(0x12e)]('/preview/:id',auth,async(_0xb1a744,_0x524eb7)=>{var _0x54de35=a0_0x41a076;try{const {invoice:_0x19e413,from_warehouse:_0x3f6b89,FromRoom_name:_0x5b35e3,to_warehouse:_0x203ae7,ToRoom_name:_0x421081}=_0xb1a744[_0x54de35(0x168)],_0x5c83f1=await transfers_finished[_0x54de35(0x180)](_0xb1a744[_0x54de35(0x189)]['id']),_0x3d0183=_0x5c83f1[_0x54de35(0x1bf)][_0x54de35(0x1b0)](async _0x3bd4c0=>{var _0x3b9303=_0x54de35;if(_0x3bd4c0['to_quantity']>0x0){var _0xc38704=await warehouse[_0x3b9303(0x18f)]({'name':_0x3f6b89,'room':_0x3bd4c0[_0x3b9303(0x171)]});const _0x4530b7=_0xc38704[_0x3b9303(0x135)][_0x3b9303(0x1b0)](_0x404e33=>{var _0xf5822d=_0x3b9303;_0x404e33[_0xf5822d(0x152)]==_0x3bd4c0[_0xf5822d(0x1ad)]&&(_0x404e33[_0xf5822d(0x190)]=Math['max'](0x0,Math['abs'](_0x404e33['product_stock'])-Math[_0xf5822d(0x12f)](_0x3bd4c0[_0xf5822d(0x11b)])),console[_0xf5822d(0x106)](_0x404e33['product_stock']));});}return _0xc38704;});Promise[_0x54de35(0x19c)](_0x3d0183)[_0x54de35(0xff)](async _0x386bab=>{var _0x187eb4=_0x54de35;try{for(const _0x48c113 of _0x386bab){await _0x48c113['save']();}const _0x425da8=_0x5c83f1[_0x187eb4(0x1bf)]['map'](async _0x519558=>{var _0x18f1ee=_0x187eb4,_0x55009e=await warehouse[_0x18f1ee(0x18f)]({'name':_0x203ae7,'room':_0x519558[_0x18f1ee(0x1a7)]});if(_0x519558[_0x18f1ee(0x11b)]>0x0){var _0x3841a8=0x0;const _0x12aad6=_0x55009e[_0x18f1ee(0x135)]['map'](_0x304bcd=>{var _0x209fc0=_0x18f1ee;_0x304bcd[_0x209fc0(0x149)]==_0x519558['product_name']&&_0x304bcd[_0x209fc0(0x1c3)]==_0x519558[_0x209fc0(0x1a5)]&&_0x304bcd[_0x209fc0(0x16c)]==_0x519558['expiry_date']&&_0x304bcd[_0x209fc0(0x1b8)]==_0x519558[_0x209fc0(0x1b8)]&&_0x304bcd[_0x209fc0(0x14e)]==_0x519558['batch_code']&&_0x304bcd[_0x209fc0(0x118)]==_0x519558['To_invoice']&&(typeof _0x519558[_0x209fc0(0x1ad)]==_0x209fc0(0x104)?(console[_0x209fc0(0x106)](_0x209fc0(0x12a),_0x304bcd[_0x209fc0(0x190)]+'\x20<>\x20'+_0x304bcd[_0x209fc0(0x152)]+_0x209fc0(0x161)+Math[_0x209fc0(0x12f)](_0x304bcd[_0x209fc0(0x190)])+Math[_0x209fc0(0x12f)](_0x519558[_0x209fc0(0x11b)])),_0x304bcd['product_stock']=Math[_0x209fc0(0x12f)](_0x304bcd[_0x209fc0(0x190)])+Math[_0x209fc0(0x12f)](_0x519558[_0x209fc0(0x11b)])):_0x304bcd[_0x209fc0(0x190)]=Math[_0x209fc0(0x12f)](_0x304bcd[_0x209fc0(0x190)])+Math[_0x209fc0(0x12f)](_0x519558[_0x209fc0(0x11b)]),_0x3841a8++);});_0x3841a8=='0'&&(_0x55009e[_0x18f1ee(0x135)]=_0x55009e[_0x18f1ee(0x135)][_0x18f1ee(0x1c4)]({'product_name':_0x519558[_0x18f1ee(0x149)],'product_stock':_0x519558[_0x18f1ee(0x11b)],'bay':_0x519558[_0x18f1ee(0x1a5)],'level':_0x519558[_0x18f1ee(0x155)],'product_code':_0x519558[_0x18f1ee(0x17c)],'primary_code':_0x519558[_0x18f1ee(0x129)],'secondary_code':_0x519558[_0x18f1ee(0x133)],'expiry_date':_0x519558[_0x18f1ee(0x16c)],'production_date':_0x519558[_0x18f1ee(0x1b8)],'maxProducts':_0x519558[_0x18f1ee(0x18a)],'batch_code':_0x519558['batch_code'],'secondary_unit':_0x519558[_0x18f1ee(0x1b1)],'unit':_0x519558[_0x18f1ee(0x120)],'maxProducts':_0x519558[_0x18f1ee(0x18a)],'maxPerUnit':_0x519558[_0x18f1ee(0x11d)],'invoice':_0x519558['To_invoice']}));}return _0x55009e;});Promise[_0x187eb4(0x19c)](_0x425da8)[_0x187eb4(0xff)](async _0x2b5caa=>{var _0x4b214b=_0x187eb4;try{console[_0x4b214b(0x106)](_0x5c83f1[_0x4b214b(0x1b2)]);if(_0x5c83f1['type_of_process']!=_0x4b214b(0x11f))for(const _0x2e7b26 of _0x2b5caa){await warehouse['updateOne']({'_id':_0x2e7b26['_id']},{'$addToSet':{'product_details':{'$each':_0x2e7b26['product_details']}}});}_0x5c83f1[_0x4b214b(0x107)]='True';const _0x566ea2=await _0x5c83f1[_0x4b214b(0x1b6)](),_0x2c1586=await master_shop[_0x4b214b(0x179)](),_0x5973e2=await email_settings[_0x4b214b(0x18f)](),_0x6f9963=await supervisor_settings['find']();var _0x389f89=_0x5c83f1['product'],_0x52f5a8='',_0x339ec3;for(_0x339ec3 in _0x389f89){var _0x103201='FG';_0x5c83f1['to_warehouse']=='DRY\x20GOODS'&&(_0x103201='DG'),_0x52f5a8+='<tr>'+_0x4b214b(0x10d)+_0x389f89[_0x339ec3][_0x4b214b(0x149)]+_0x4b214b(0x175)+_0x4b214b(0x10d)+_0x389f89[_0x339ec3]['product_code']+_0x4b214b(0x175)+_0x4b214b(0x10d)+_0x389f89[_0x339ec3][_0x4b214b(0x11b)]+_0x4b214b(0x175)+_0x4b214b(0x10d)+_0x389f89[_0x339ec3][_0x4b214b(0x120)]+_0x4b214b(0x175)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x389f89[_0x339ec3][_0x4b214b(0x1b1)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x5c83f1['to_warehouse']+'</td>'+_0x4b214b(0x10d)+_0x389f89[_0x339ec3][_0x4b214b(0x1a7)]+_0x4b214b(0x175)+_0x4b214b(0x10d)+_0x103201+_0x389f89[_0x339ec3][_0x4b214b(0x1a5)]+_0x4b214b(0x175)+_0x4b214b(0x197);}_0xb1a744['flash'](_0x4b214b(0x100),'Transfer\x20Finalize\x20Successfully'),_0x524eb7['redirect'](_0x4b214b(0x10c)+_0x566ea2[_0x4b214b(0x152)]);}catch(_0x531458){console[_0x4b214b(0x11a)](_0x531458),_0x524eb7['status'](0x1f4)[_0x4b214b(0x130)]({'error':'To\x20An\x20error\x20occurred\x20while\x20saving\x20data.'});}})[_0x187eb4(0x1a1)](_0x3731df=>{var _0x174c81=_0x187eb4;console['error'](_0x3731df),_0x524eb7[_0x174c81(0x1c1)](0x1f4)[_0x174c81(0x130)]({'error':_0x174c81(0x16e)});});}catch(_0x306fda){console[_0x187eb4(0x11a)](_0x306fda),_0x524eb7['status'](0x1f4)[_0x187eb4(0x130)]({'error':_0x187eb4(0x125)});}})[_0x54de35(0x1a1)](_0x232495=>{var _0x30e55d=_0x54de35;console[_0x30e55d(0x11a)](_0x232495),_0x524eb7[_0x30e55d(0x1c1)](0x1f4)[_0x30e55d(0x130)]({'error':_0x30e55d(0x16e)});});}catch(_0x11dd81){_0x524eb7[_0x54de35(0x130)]({'message':_0x11dd81[_0x54de35(0x111)]});}});function BayBinSelected(_0x1b829f,_0x13d728){var _0x1a67c0=a0_0x41a076,_0x34f281=[];let _0x5494c4=[];var _0xc174=[];if(_0x1b829f==_0x1a67c0(0x1ab)){switch(_0x13d728){case _0x1a67c0(0x157):_0x34f281=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10];break;case'Rack\x202':_0x34f281=[0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20];break;}_0xc174=['DG'];}else{if(_0x1b829f==_0x1a67c0(0x19b)){switch(_0x13d728){case _0x1a67c0(0x157):_0x34f281=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9];break;case _0x1a67c0(0x17a):_0x34f281=[0xa,0xb,0xc,0xd,0xe,0xf,0x10,0x11,0x12];break;}_0xc174=['FG'];}}return{'levels':_0x34f281,'identify':_0xc174};}router[a0_0x41a076(0x150)](a0_0x41a076(0x124),auth,async(_0xa4be23,_0x16c7f0)=>{var _0x20b7de=a0_0x41a076;try{const {username:_0x2500da,email:_0x885aab,role:_0x9129f6}=_0xa4be23[_0x20b7de(0x164)],_0x20251e=_0xa4be23[_0x20b7de(0x164)],_0x1e3509=await profile['findOne']({'email':_0x20251e['email']}),_0x223590=await master_shop[_0x20b7de(0x179)](),_0x3a8b88=await transfers_finished['findById'](_0xa4be23[_0x20b7de(0x189)]['id']);let _0xe3bd6a=new Date(_0x3a8b88[_0x20b7de(0x16c)]),_0x5a121f=('0'+_0xe3bd6a[_0x20b7de(0x15e)]())[_0x20b7de(0x1c2)](-0x2),_0xc3fb96=('0'+(_0xe3bd6a[_0x20b7de(0x195)]()+0x1))[_0x20b7de(0x1c2)](-0x2),_0x207c66=_0xe3bd6a['getFullYear'](),_0xf205dc=_0x207c66+'-'+_0xc3fb96+'-'+_0x5a121f,_0x180455;if(_0x20251e[_0x20b7de(0x186)]==_0x20b7de(0x1a2)){const _0x284132=await staff[_0x20b7de(0x18f)]({'email':_0x20251e['email']});_0x180455=await warehouse['find']({'status':'Enabled','name':_0x284132[_0x20b7de(0x105)],'warehouse_category':_0x20b7de(0x182)});}else _0x180455=await warehouse[_0x20b7de(0x179)]({'status':_0x20b7de(0x158),'warehouse_category':'Finished\x20Goods'});const _0x504b61=await warehouse[_0x20b7de(0x18e)]([{'$match':{'name':_0x3a8b88[_0x20b7de(0x1a3)],'room':_0x3a8b88[_0x20b7de(0x151)]}},{'$unwind':_0x20b7de(0x193)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x20b7de(0x110)},'product_stock':{'$first':_0x20b7de(0x188)},'bay':{'$first':_0x20b7de(0x139)},'bin':{'$first':_0x20b7de(0x1c5)},'type':{'$first':_0x20b7de(0x19a)},'floorlevel':{'$first':_0x20b7de(0x140)},'primary_code':{'$first':_0x20b7de(0x185)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x20b7de(0x136)},'rack':{'$first':'$product_details.rack'}}}]);var _0x3a6e65=[0x1,0x2,0x3,0x4],_0x2ffb3b=['A','B','C','D','E','F','G','H','I','J'],_0x38dfd0=[_0x20b7de(0x147),_0x20b7de(0x1af)];const _0x1691af=await product[_0x20b7de(0x179)]({}),_0xffe235=BayBinSelected(_0x3a8b88[_0x20b7de(0x103)],_0x3a8b88[_0x20b7de(0x108)]);if(_0x223590[0x0]['language']==_0x20b7de(0x13a)){var _0x312eea=users[_0x20b7de(0xfe)];console[_0x20b7de(0x106)](_0x312eea);}else{if(_0x223590[0x0]['language']=='Hindi')var _0x312eea=users[_0x20b7de(0x198)];else{if(_0x223590[0x0]['language']==_0x20b7de(0x184))var _0x312eea=users[_0x20b7de(0x184)];else{if(_0x223590[0x0][_0x20b7de(0x160)]=='Spanish')var _0x312eea=users[_0x20b7de(0x169)];else{if(_0x223590[0x0]['language']==_0x20b7de(0x187))var _0x312eea=users['French'];else{if(_0x223590[0x0][_0x20b7de(0x160)]==_0x20b7de(0x16f))var _0x312eea=users[_0x20b7de(0x148)];else{if(_0x223590[0x0][_0x20b7de(0x160)]==_0x20b7de(0x16d))var _0x312eea=users[_0x20b7de(0x16d)];else{if(_0x223590[0x0][_0x20b7de(0x160)]==_0x20b7de(0x181))var _0x312eea=users['Arabic'];}}}}}}}_0x16c7f0[_0x20b7de(0x1aa)](_0x20b7de(0x16b),{'success':_0xa4be23[_0x20b7de(0x1a0)](_0x20b7de(0x100)),'errors':_0xa4be23[_0x20b7de(0x1a0)](_0x20b7de(0x15c)),'role':_0x20251e,'profile':_0x1e3509,'master_shop':_0x223590,'warehouse':_0x180455,'transfer':_0x3a8b88,'stock':_0x504b61,'unit':_0x1691af,'language':_0x312eea,'levels':_0x3a6e65,'Isle':_0x2ffb3b,'rooms_data':_0x38dfd0,'ed_fullDate':_0xf205dc,'dataSelected':_0xffe235});}catch(_0x2065cf){console[_0x20b7de(0x106)](_0x2065cf);}}),router[a0_0x41a076(0x12e)](a0_0x41a076(0x124),auth,async(_0x33cc3b,_0x5f853e)=>{var _0x30e4d6=a0_0x41a076;try{const _0xeb6ff2=_0x33cc3b[_0x30e4d6(0x189)]['id'];console[_0x30e4d6(0x106)](_0x33cc3b[_0x30e4d6(0x168)]);const _0x2da0da=await transfers_finished[_0x30e4d6(0x180)](_0xeb6ff2);console['log'](_0x30e4d6(0x14d),_0x2da0da);const {date:_0x57195b,from_warehouse:_0x4ec709,FromRoom_name:_0x2b7e17,to_warehouse:_0x1e5146,ToRoom_name:_0x3f104f,prod_name:_0x33a63a,from_prod_qty:_0x46f161,from_prod_level:_0x3674df,from_prod_isle:_0x2d5cf6,from_prod_pallet:_0x18ab0f,to_prod_qty:_0x147833,to_prod_level:_0xde0b8e,to_prod_isle:_0x3ef807,to_prod_pallet:_0x432fca,primary_code:_0x1c0e1c,secondary_code:_0x4c1900,product_code3:_0x2e0728,note:_0x2ec2ca,invoice:_0x103fee,expiry_date:_0x11e804}=_0x33cc3b['body'];if(typeof _0x33a63a=='string')var _0x29ad7d=[_0x33cc3b['body'][_0x30e4d6(0x13d)]],_0xa0069b=[_0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x172)]],_0xc81ccb=[_0x33cc3b['body'][_0x30e4d6(0x145)]],_0x49ede2=[_0x33cc3b[_0x30e4d6(0x168)]['to_prod_qty']],_0x4a0397=[_0x33cc3b['body'][_0x30e4d6(0x173)]],_0xa050f6=[_0x33cc3b[_0x30e4d6(0x168)]['primary_code']],_0x402843=[_0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x133)]],_0x1d9b01=[_0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x11e)]],_0x17dbad=[_0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x153)]],_0x57310f=[_0x33cc3b['body'][_0x30e4d6(0x120)]],_0x3c1cb4=[_0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x1b1)]],_0x581cda=[_0x33cc3b['body']['batch_code']],_0x2677b6=[_0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x16c)]];else var _0x29ad7d=[..._0x33cc3b['body'][_0x30e4d6(0x13d)]],_0xa0069b=[..._0x33cc3b['body'][_0x30e4d6(0x172)]],_0xc81ccb=[..._0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x145)]],_0x49ede2=[..._0x33cc3b[_0x30e4d6(0x168)]['to_prod_qty']],_0x4a0397=[..._0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x173)]],_0xa050f6=[..._0x33cc3b['body'][_0x30e4d6(0x129)]],_0x402843=[..._0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x133)]],_0x1d9b01=[..._0x33cc3b[_0x30e4d6(0x168)]['product_code3']],_0x17dbad=[..._0x33cc3b[_0x30e4d6(0x168)]['MaxStocks_data2']],_0x57310f=[..._0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x120)]],_0x3c1cb4=[..._0x33cc3b[_0x30e4d6(0x168)]['secondary_unit']],_0x581cda=[..._0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x14e)]],_0x2677b6=[..._0x33cc3b[_0x30e4d6(0x168)][_0x30e4d6(0x16c)]];const _0x3a6a58=_0x29ad7d[_0x30e4d6(0x1b0)](_0x334d4f=>{return _0x334d4f={'product_name':_0x334d4f};});_0xa0069b[_0x30e4d6(0x196)]((_0x3466a2,_0x124b3b)=>{_0x3a6a58[_0x124b3b]['from_quantity']=_0x3466a2;}),_0xc81ccb[_0x30e4d6(0x196)]((_0x27c903,_0x32f983)=>{var _0x94fda2=_0x30e4d6;_0x3a6a58[_0x32f983][_0x94fda2(0x144)]=_0x27c903;}),_0x49ede2['forEach']((_0x34dd72,_0x4d4a30)=>{_0x3a6a58[_0x4d4a30]['to_quantity']=_0x34dd72;}),_0x4a0397['forEach']((_0xe50972,_0x58f053)=>{var _0x2fecb2=_0x30e4d6;_0x3a6a58[_0x58f053][_0x2fecb2(0x1a5)]=_0xe50972;}),_0xa050f6[_0x30e4d6(0x196)]((_0x5bbb32,_0x3a2869)=>{var _0x593a65=_0x30e4d6;_0x3a6a58[_0x3a2869][_0x593a65(0x129)]=_0x5bbb32;}),_0x402843['forEach']((_0x195f13,_0x3ec82c)=>{var _0x458e9d=_0x30e4d6;_0x3a6a58[_0x3ec82c][_0x458e9d(0x133)]=_0x195f13;}),_0x1d9b01[_0x30e4d6(0x196)]((_0x2a5545,_0x33e79d)=>{var _0x376c3d=_0x30e4d6;_0x3a6a58[_0x33e79d][_0x376c3d(0x17c)]=_0x2a5545;}),_0x17dbad[_0x30e4d6(0x196)]((_0x10e549,_0x451716)=>{var _0x3be5f9=_0x30e4d6;_0x3a6a58[_0x451716][_0x3be5f9(0x18a)]=_0x10e549;}),_0x57310f[_0x30e4d6(0x196)]((_0x4ae60c,_0x5c7468)=>{var _0x421963=_0x30e4d6;_0x3a6a58[_0x5c7468][_0x421963(0x120)]=_0x4ae60c;}),_0x3c1cb4[_0x30e4d6(0x196)]((_0x4e6217,_0x46e306)=>{var _0x472c0f=_0x30e4d6;_0x3a6a58[_0x46e306][_0x472c0f(0x1b1)]=_0x4e6217;}),_0x581cda[_0x30e4d6(0x196)]((_0x3a9a75,_0xa8ca68)=>{var _0x573dff=_0x30e4d6;_0x3a6a58[_0xa8ca68][_0x573dff(0x14e)]=_0x3a9a75;}),_0x2677b6[_0x30e4d6(0x196)]((_0x472be2,_0x5742ca)=>{_0x3a6a58[_0x5742ca]['expiry_date']=_0x472be2;});const _0x90d657=_0x3a6a58[_0x30e4d6(0x122)](_0x2ad4cb=>_0x2ad4cb[_0x30e4d6(0x11b)]!=='0'&&_0x2ad4cb[_0x30e4d6(0x11b)]!==''||_0x2ad4cb[_0x30e4d6(0x16a)]!=='0'&&_0x2ad4cb[_0x30e4d6(0x16a)]!=='');var _0x5e42c5=0x0;_0x90d657[_0x30e4d6(0x196)](_0xe6eeec=>{var _0x38aaaf=_0x30e4d6;parseInt(_0xe6eeec[_0x38aaaf(0x154)])<parseInt(_0xe6eeec[_0x38aaaf(0x11b)])&&_0x5e42c5++;});if(_0x5e42c5!=0x0)return _0x33cc3b[_0x30e4d6(0x1a0)](_0x30e4d6(0x15c),_0x30e4d6(0x17d)),_0x5f853e[_0x30e4d6(0x199)](_0x30e4d6(0x18d));const _0xdd0b69=await warehouse['findOne']({'name':_0x2da0da[_0x30e4d6(0x1a3)],'room':_0x2da0da[_0x30e4d6(0x151)]});_0x2da0da[_0x30e4d6(0x1bf)][_0x30e4d6(0x196)](_0x4c5b32=>{var _0x5b7e7c=_0x30e4d6;if(_0x4c5b32[_0x5b7e7c(0x11b)]>0x0){const _0x446f6c=_0xdd0b69[_0x5b7e7c(0x135)][_0x5b7e7c(0x1b0)](_0x14091b=>{var _0x11c633=_0x5b7e7c;_0x14091b[_0x11c633(0x149)]==_0x4c5b32[_0x11c633(0x149)]&&_0x14091b[_0x11c633(0x1c3)]==_0x4c5b32[_0x11c633(0x144)]&&(_0x14091b[_0x11c633(0x190)]=parseInt(_0x14091b[_0x11c633(0x190)])+parseInt(_0x4c5b32[_0x11c633(0x11b)]));});}}),await _0xdd0b69[_0x30e4d6(0x1b6)]();const _0x2b3a85=await warehouse[_0x30e4d6(0x18f)]({'name':_0x2da0da[_0x30e4d6(0x103)],'room':_0x2da0da[_0x30e4d6(0x108)]});_0x2da0da[_0x30e4d6(0x1bf)]['forEach'](_0x142055=>{var _0x4b8080=_0x30e4d6;if(_0x142055[_0x4b8080(0x11b)]>0x0){const _0x1bd865=_0x2b3a85[_0x4b8080(0x135)][_0x4b8080(0x1b0)](_0x911966=>{var _0x338ff5=_0x4b8080;_0x911966[_0x338ff5(0x149)]==_0x142055[_0x338ff5(0x149)]&&_0x911966[_0x338ff5(0x1c3)]==_0x142055[_0x338ff5(0x1a5)]&&(_0x911966[_0x338ff5(0x190)]=parseInt(_0x911966['product_stock'])-parseInt(_0x142055[_0x338ff5(0x11b)]));});}}),await _0x2b3a85[_0x30e4d6(0x1b6)](),_0x2da0da[_0x30e4d6(0x114)]=_0x57195b,_0x2da0da['from_warehouse']=_0x4ec709,_0x2da0da['to_warehouse']=_0x1e5146,_0x2da0da[_0x30e4d6(0x1bf)]=_0x90d657,_0x2da0da[_0x30e4d6(0x13f)]=_0x2ec2ca,_0x2da0da[_0x30e4d6(0x118)]=_0x103fee;const _0x38ad8b=await _0x2da0da[_0x30e4d6(0x1b6)](),_0x2d9199=await warehouse[_0x30e4d6(0x18f)]({'name':_0x4ec709,'room':_0x2b7e17});_0x38ad8b[_0x30e4d6(0x1bf)]['forEach'](_0x284f9e=>{var _0x5d899c=_0x30e4d6;if(_0x284f9e[_0x5d899c(0x11b)]>0x0){const _0x360d38=_0x2d9199[_0x5d899c(0x135)][_0x5d899c(0x1b0)](_0x409f5f=>{var _0x4ccfe1=_0x5d899c;_0x409f5f[_0x4ccfe1(0x149)]==_0x284f9e[_0x4ccfe1(0x149)]&&_0x409f5f[_0x4ccfe1(0x1c3)]==_0x284f9e[_0x4ccfe1(0x144)]&&(_0x409f5f[_0x4ccfe1(0x190)]=parseInt(_0x409f5f['product_stock'])-parseInt(_0x284f9e['to_quantity']));});}}),await _0x2d9199[_0x30e4d6(0x1b6)]();const _0x36cd90=await warehouse[_0x30e4d6(0x18f)]({'name':_0x1e5146,'room':_0x3f104f});_0x38ad8b[_0x30e4d6(0x1bf)]['forEach'](_0xb08b15=>{var _0x57abde=_0x30e4d6;if(_0xb08b15[_0x57abde(0x11b)]>0x0){var _0x33c61b=0x0;const _0xf3d8d0=_0x36cd90[_0x57abde(0x135)][_0x57abde(0x1b0)](_0x89da0d=>{var _0x4a5e23=_0x57abde;_0x89da0d[_0x4a5e23(0x149)]==_0xb08b15[_0x4a5e23(0x149)]&&_0x89da0d['bay']==_0xb08b15[_0x4a5e23(0x1a5)]&&(_0x89da0d[_0x4a5e23(0x190)]=parseInt(_0x89da0d[_0x4a5e23(0x190)])+parseInt(_0xb08b15[_0x4a5e23(0x11b)]),_0x33c61b++);});_0x33c61b=='0'&&(_0x36cd90[_0x57abde(0x135)]=_0x36cd90[_0x57abde(0x135)]['concat']({'product_name':_0xb08b15[_0x57abde(0x149)],'product_stock':_0xb08b15[_0x57abde(0x11b)],'bay':_0xb08b15[_0x57abde(0x1a5)],'product_code':_0xb08b15['product_code'],'primary_code':_0xb08b15[_0x57abde(0x129)],'secondary_code':_0xb08b15['secondary_code'],'maxProducts':_0xb08b15[_0x57abde(0x18a)]}));}}),await _0x36cd90[_0x30e4d6(0x1b6)](),_0x33cc3b['flash'](_0x30e4d6(0x100),_0x30e4d6(0x13c)),_0x5f853e[_0x30e4d6(0x199)](_0x30e4d6(0x165));}catch(_0x47c315){console[_0x30e4d6(0x106)](_0x47c315);}}),router[a0_0x41a076(0x12e)](a0_0x41a076(0x13b),async(_0x29fca9,_0x21229d)=>{var _0xf00577=a0_0x41a076;const {FromWareHouse:_0x51b651,FromRoom:_0x4a7e3b,ToWarehouse:_0x339c60,ToRoom:_0x5c296,primary_code:_0x15e91c,Roomslist:_0x10b87a}=_0x29fca9[_0xf00577(0x168)],_0x171f1c=_0x10b87a[_0xf00577(0x112)](','),_0x2e1be3=[];async function _0x5ee3cd(_0x53bb83){var _0x20f72d=_0xf00577;const _0x3f3bfa=await warehouse[_0x20f72d(0x18e)]([{'$match':{'name':_0x51b651,'room':_0x53bb83}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x15e91c}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x20f72d(0x188)},'primary_code':{'$first':_0x20f72d(0x185)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x20f72d(0x178)},'bay':{'$first':_0x20f72d(0x139)},'level':{'$first':_0x20f72d(0x15f)},'type':{'$first':'$product_details.type'},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x20f72d(0x167)},'secondary_unit':{'$first':_0x20f72d(0x141)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x20f72d(0x10e)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x20f72d(0x109)},'roomNamed':{'$first':_0x20f72d(0x14b)},'prod_cat':{'$first':'P'},'invoice':{'$first':_0x20f72d(0x121)}}}]),_0x7c9180=await warehouse['aggregate']([{'$match':{'name':_0x51b651,'room':_0x53bb83}},{'$unwind':_0x20f72d(0x193)},{'$match':{'product_details.secondary_code':_0x15e91c}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x20f72d(0x110)},'instock':{'$first':_0x20f72d(0x188)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x20f72d(0x1be)},'product_code':{'$first':_0x20f72d(0x178)},'bay':{'$first':_0x20f72d(0x139)},'level':{'$first':'$product_details.level'},'type':{'$first':_0x20f72d(0x19a)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x20f72d(0x167)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0x20f72d(0x136)},'rack':{'$first':_0x20f72d(0x10e)},'expiry_date':{'$first':_0x20f72d(0x12c)},'production_date':{'$first':_0x20f72d(0x117)},'batch_code':{'$first':_0x20f72d(0x1a6)},'maxPerUnit':{'$first':_0x20f72d(0x109)},'roomNamed':{'$first':_0x20f72d(0x14b)},'prod_cat':{'$first':'S'},'invoice':{'$first':_0x20f72d(0x121)}}}]);if(_0x3f3bfa[_0x20f72d(0x1bd)]>0x0)_0x2e1be3[_0x20f72d(0x18c)](_0x3f3bfa);else _0x7c9180['length']>0x0&&_0x2e1be3[_0x20f72d(0x18c)](_0x7c9180);}const _0x5d7441=_0x171f1c[_0xf00577(0x1b0)](_0xa0373b=>_0x5ee3cd(_0xa0373b));await Promise[_0xf00577(0x19c)](_0x5d7441),_0x21229d[_0xf00577(0x130)](_0x2e1be3);}),router['post']('/CheckingWarehouse',async(_0x1f5926,_0x152ece)=>{var _0x172ff9=a0_0x41a076;const {productCode:_0x5ba3a7,bay:_0xae034b,warehouses:_0x433a27,room:_0x4f7f7c}=_0x1f5926[_0x172ff9(0x168)];console[_0x172ff9(0x106)](_0x1f5926[_0x172ff9(0x168)]);try{const _0x58cf9f=await warehouse[_0x172ff9(0x18e)]([{'$match':{'name':_0x433a27,'room':_0x4f7f7c}},{'$unwind':_0x172ff9(0x193)},{'$match':{'product_details.bay':parseInt(_0xae034b)}},{'$group':{'_id':_0x172ff9(0x176),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x172ff9(0x188)},'bay':{'$first':_0x172ff9(0x139)},'maxProducts':{'$first':_0x172ff9(0x183)}}}]);_0x152ece[_0x172ff9(0x1c1)](0xc8)[_0x172ff9(0x130)](_0x58cf9f);}catch(_0x43a9b9){_0x152ece[_0x172ff9(0x1c1)](0x194)[_0x172ff9(0x130)]({'message':_0x43a9b9['message']});}}),module[a0_0x41a076(0x138)]=router;