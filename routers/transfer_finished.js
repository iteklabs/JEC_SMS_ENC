function a0_0xd190(){var _0x41389a=['English\x20(US)','45395rxkNxi','2284722emiCsr','primary_unit','undefined','forEach','DRY\x20GOODS','all','$product_details.expiry_date','back','to_floorlevel','transfer_finished_logs','$product_details.maxPerUnit','True','\x20<=>\x20','push','Finished\x20Goods','choos_transfer','MaxStocks_data2','transfer_data','prod_name','then','to_prod_qty','staff','random','prod_cat','edit_transfer_finished_view','Enclosed','maxProducts','$product.from_room_name','$product.to_room_name','aggregate','$finalize','Ambient','success','An\x20error\x20occurred\x20while\x20saving\x20data.','toString','/CheckingWarehouse','1495400fjDpXO','concat','post','$invoice','40ULSslg','find','420YTrsGt','$room','$product_details.invoice','$product_details.product_stock','from_level','from_warehouse','German','$product_details.production_date','$product_details.level','$product_details.rack','$product_details.product_code','padStart','New_Qty_Converted','Spanish','$product_details.storage','Hindi','add_transfer_finished','from_prod_level2','/view/:id','from_quantity','date','save','308391nqLOPG','/view/addlog','to_bay','$product_details.primary_code','Arabic\x20(ae)','floor','invoice_init','product_stock','render','../middleware/auth','Arabic','/view/add_transfer_logs','Transfer\x20Edit\x20Successfully','to_prod_level','Portuguese','Rack\x202','To\x20An\x20error\x20occurred\x20while\x20saving\x20data.','There\x27s\x20a\x20error\x20in\x20this\x20transaction','findById','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','unit','to_room','id_transaction','$_id','secondary_unit','product_date','product_details','\x20<>\x20','to_quantity','TRFF-','377096evzYpf','Router','$product_details.unit','MaxStocks_data','Transfer\x20Finalize\x20Successfully','map','$product','/transfer_finished/preview/','_id','production_date','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','Enabled','catch','French','note','expiry_date','</td>','/view_logs','An\x20error\x20occurred.','$product_details.secondary_code','$product_details.floorlevel','product_code','/transfer_finished/view','/transfer/view','Product\x20Transfer\x20successfully','here2','to_room_name','$product_details._id','$product_details','secondary_code','196903YAeWsI','RoomAssigned','FROZEN\x20GOODS','body','message','$product_details.product_name','$from_warehouse','json','/view/choose_logs','errors','max','filter','/view','express','product','error','/preview/:id','../public/language/languages.json','bay','$product_details.bay','match','product_name','to_warehouse','$product_details.maxProducts','own','LOG-TRF-','</tr>','logs','flash','Chinese','getDate','bin2bin','to_level','length','from_bay','To_invoice','from_room_name','180249rHLPOa','slice','redirect','$date','abs','$product_details.secondary_unit','status','params','getMonth','TRF-','email','findOne','maxPerUnit','updateOne','nodemailer','language','$product_details.type','from_prod_qty','<tr>','10PidrgZ','primary_code','/picking_list/PDF_transfer/','/view/add_transfer','location2location','get','$name','log','../models/all_models','/view/add_transfer_loc','$product_details.bin','ToRoomAssigned','warehouse','from_invoice','Portuguese\x20(BR)','English','string','from_room','type_of_process','batch_code','product_code3','edit_transfer_finished','role','Rack\x201','user'];a0_0xd190=function(){return _0x41389a;};return a0_0xd190();}var a0_0x5e2619=a0_0xfe8d;function a0_0xfe8d(_0x7549b9,_0x2585e8){var _0xd19059=a0_0xd190();return a0_0xfe8d=function(_0xfe8dd2,_0x2580a4){_0xfe8dd2=_0xfe8dd2-0xb9;var _0x1d715a=_0xd19059[_0xfe8dd2];return _0x1d715a;},a0_0xfe8d(_0x7549b9,_0x2585e8);}(function(_0x1dc778,_0x124a0d){var _0x1199a4=a0_0xfe8d,_0x1113aa=_0x1dc778();while(!![]){try{var _0x24b085=-parseInt(_0x1199a4(0xf4))/0x1+parseInt(_0x1199a4(0x107))/0x2*(parseInt(_0x1199a4(0x162))/0x3)+parseInt(_0x1199a4(0x180))/0x4+parseInt(_0x1199a4(0x121))/0x5*(-parseInt(_0x1199a4(0x14c))/0x6)+-parseInt(_0x1199a4(0xcf))/0x7+-parseInt(_0x1199a4(0x146))/0x8+-parseInt(_0x1199a4(0x122))/0x9*(-parseInt(_0x1199a4(0x14a))/0xa);if(_0x24b085===_0x124a0d)break;else _0x1113aa['push'](_0x1113aa['shift']());}catch(_0x50215d){_0x1113aa['push'](_0x1113aa['shift']());}}}(a0_0xd190,0x90bda));const express=require(a0_0x5e2619(0xdc)),app=express(),router=express[a0_0x5e2619(0x181)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,invoice_for_transfer,transfers_logs}=require(a0_0x5e2619(0x10f)),auth=require(a0_0x5e2619(0x16b)),users=require(a0_0x5e2619(0xe0)),nodemailer=require(a0_0x5e2619(0x102));router[a0_0x5e2619(0x10c)](a0_0x5e2619(0xdb),auth,async(_0x300243,_0x422cd3)=>{var _0x2e0ac8=a0_0x5e2619;try{const {username:_0x69f84f,email:_0x2f229d,role:_0x308ac3}=_0x300243[_0x2e0ac8(0x11f)],_0x3eff29=_0x300243[_0x2e0ac8(0x11f)],_0x261105=await profile[_0x2e0ac8(0xff)]({'email':_0x3eff29[_0x2e0ac8(0xfe)]}),_0x27141c=await master_shop['find']();let _0x1b37aa;if(_0x3eff29[_0x2e0ac8(0x11d)]==_0x2e0ac8(0x137)){const _0x57bd41=await staff['findOne']({'email':_0x3eff29[_0x2e0ac8(0xfe)]});_0x1b37aa=await transfers_finished[_0x2e0ac8(0x14b)]({'from_warehouse':_0x57bd41[_0x2e0ac8(0x113)]});}else _0x1b37aa=await transfers_finished[_0x2e0ac8(0x13f)]([{'$match':{'type_of_transaction':'own'}},{'$unwind':'$product'},{'$group':{'_id':_0x2e0ac8(0x179),'invoice':{'$first':'$invoice'},'date':{'$first':_0x2e0ac8(0xf7)},'from_warehouse':{'$first':_0x2e0ac8(0xd5)},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x2e0ac8(0x13d)},'to_room_name':{'$addToSet':_0x2e0ac8(0x13e)},'finalize':{'$first':'$finalize'}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x27141c[0x0][_0x2e0ac8(0x103)]==_0x2e0ac8(0x120))var _0xfb7738=users[_0x2e0ac8(0x116)];else{if(_0x27141c[0x0][_0x2e0ac8(0x103)]==_0x2e0ac8(0x15b))var _0xfb7738=users[_0x2e0ac8(0x15b)];else{if(_0x27141c[0x0]['language']==_0x2e0ac8(0x152))var _0xfb7738=users[_0x2e0ac8(0x152)];else{if(_0x27141c[0x0][_0x2e0ac8(0x103)]==_0x2e0ac8(0x159))var _0xfb7738=users[_0x2e0ac8(0x159)];else{if(_0x27141c[0x0]['language']==_0x2e0ac8(0xbe))var _0xfb7738=users[_0x2e0ac8(0xbe)];else{if(_0x27141c[0x0][_0x2e0ac8(0x103)]==_0x2e0ac8(0x115))var _0xfb7738=users[_0x2e0ac8(0x170)];else{if(_0x27141c[0x0]['language']==_0x2e0ac8(0xec))var _0xfb7738=users[_0x2e0ac8(0xec)];else{if(_0x27141c[0x0][_0x2e0ac8(0x103)]==_0x2e0ac8(0x166))var _0xfb7738=users['Arabic'];}}}}}}}_0x422cd3[_0x2e0ac8(0x16a)]('transfer_finished',{'success':_0x300243['flash']('success'),'errors':_0x300243['flash'](_0x2e0ac8(0xd8)),'role':_0x3eff29,'profile':_0x261105,'master_shop':_0x27141c,'transfer':_0x1b37aa,'language':_0xfb7738});}catch(_0x292252){console[_0x2e0ac8(0x10e)](_0x292252);}}),router[a0_0x5e2619(0x10c)](a0_0x5e2619(0xc2),auth,async(_0xbc59a9,_0x5a269f)=>{var _0x3faa26=a0_0x5e2619;try{const {username:_0x2095d6,email:_0x1c4a8c,role:_0x2c3b4d}=_0xbc59a9[_0x3faa26(0x11f)],_0x192a6a=_0xbc59a9[_0x3faa26(0x11f)],_0x429284=await profile[_0x3faa26(0xff)]({'email':_0x192a6a['email']}),_0x505b65=await master_shop['find']();let _0x1afa7a;if(_0x192a6a['role']==_0x3faa26(0x137)){const _0x29027b=await staff[_0x3faa26(0xff)]({'email':_0x192a6a['email']});_0x1afa7a=await transfers_finished['find']({'from_warehouse':_0x29027b['warehouse']});}else _0x1afa7a=await transfers_finished['aggregate']([{'$match':{'type_of_transaction':'logs'}},{'$unwind':_0x3faa26(0x186)},{'$group':{'_id':_0x3faa26(0x179),'invoice':{'$first':_0x3faa26(0x149)},'date':{'$first':_0x3faa26(0xf7)},'from_warehouse':{'$first':'$from_warehouse'},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x3faa26(0x13d)},'to_room_name':{'$addToSet':_0x3faa26(0x13e)},'finalize':{'$first':_0x3faa26(0x140)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x505b65[0x0][_0x3faa26(0x103)]==_0x3faa26(0x120))var _0x21d3fe=users[_0x3faa26(0x116)];else{if(_0x505b65[0x0]['language']==_0x3faa26(0x15b))var _0x21d3fe=users[_0x3faa26(0x15b)];else{if(_0x505b65[0x0][_0x3faa26(0x103)]=='German')var _0x21d3fe=users[_0x3faa26(0x152)];else{if(_0x505b65[0x0][_0x3faa26(0x103)]==_0x3faa26(0x159))var _0x21d3fe=users[_0x3faa26(0x159)];else{if(_0x505b65[0x0][_0x3faa26(0x103)]==_0x3faa26(0xbe))var _0x21d3fe=users['French'];else{if(_0x505b65[0x0][_0x3faa26(0x103)]==_0x3faa26(0x115))var _0x21d3fe=users[_0x3faa26(0x170)];else{if(_0x505b65[0x0][_0x3faa26(0x103)]=='Chinese')var _0x21d3fe=users[_0x3faa26(0xec)];else{if(_0x505b65[0x0][_0x3faa26(0x103)]==_0x3faa26(0x166))var _0x21d3fe=users[_0x3faa26(0x16c)];}}}}}}}_0x5a269f[_0x3faa26(0x16a)](_0x3faa26(0x12b),{'success':_0xbc59a9[_0x3faa26(0xeb)](_0x3faa26(0x142)),'errors':_0xbc59a9[_0x3faa26(0xeb)](_0x3faa26(0xd8)),'role':_0x192a6a,'profile':_0x429284,'master_shop':_0x505b65,'transfer':_0x1afa7a,'language':_0x21d3fe});}catch(_0x1d288){console[_0x3faa26(0x10e)](_0x1d288);}});async function getRandom8DigitNumber(){var _0x2c7f72=a0_0x5e2619;const _0x1231f0=0x989680,_0x56e68c=0x5f5e0ff,_0x35725a=Math[_0x2c7f72(0x167)](Math[_0x2c7f72(0x138)]()*(_0x56e68c-_0x1231f0+0x1))+_0x1231f0;var _0x22b388;const _0x213569=await transfers_finished[_0x2c7f72(0xff)]({'invoice':_0x2c7f72(0x17f)+_0x35725a});return _0x213569&&_0x213569['length']>0x0?_0x22b388=_0x2c7f72(0x17f)+_0x35725a:_0x22b388=_0x2c7f72(0x17f)+_0x35725a,_0x22b388;}router[a0_0x5e2619(0x10c)](a0_0x5e2619(0x10a),auth,async(_0x2c0bd9,_0x2b9a74)=>{var _0x196413=a0_0x5e2619;try{const {username:_0x2014ce,email:_0x4457dc,role:_0x4d0d9e}=_0x2c0bd9['user'],_0x2148a9=_0x2c0bd9[_0x196413(0x11f)],_0x1f28ac=await profile[_0x196413(0xff)]({'email':_0x2148a9[_0x196413(0xfe)]}),_0x264f43=await master_shop[_0x196413(0x14b)]();let _0x25ccdd;if(_0x2148a9[_0x196413(0x11d)]==_0x196413(0x137)){const _0x4034e2=await staff['findOne']({'email':_0x2148a9['email']});_0x25ccdd=await warehouse['aggregate']([{'$match':{'status':_0x196413(0xbc),'name':_0x4034e2['warehouse']}},{'$group':{'_id':_0x196413(0x10d),'name':{'$first':_0x196413(0x10d)}}}]);}else _0x25ccdd=await warehouse[_0x196413(0x13f)]([{'$match':{'status':_0x196413(0xbc)}},{'$group':{'_id':_0x196413(0x10d),'name':{'$first':_0x196413(0x10d)}}}]);const _0x13029a=await transfers_finished[_0x196413(0x14b)]({}),_0x58b60a=_0x13029a['length']+0x1,_0x112d20=_0x196413(0x17f)+_0x58b60a[_0x196413(0x144)]()['padStart'](0x5,'0');if(_0x264f43[0x0]['language']=='English\x20(US)')var _0xf713c1=users['English'];else{if(_0x264f43[0x0]['language']==_0x196413(0x15b))var _0xf713c1=users['Hindi'];else{if(_0x264f43[0x0][_0x196413(0x103)]=='German')var _0xf713c1=users[_0x196413(0x152)];else{if(_0x264f43[0x0][_0x196413(0x103)]==_0x196413(0x159))var _0xf713c1=users[_0x196413(0x159)];else{if(_0x264f43[0x0]['language']==_0x196413(0xbe))var _0xf713c1=users[_0x196413(0xbe)];else{if(_0x264f43[0x0][_0x196413(0x103)]==_0x196413(0x115))var _0xf713c1=users[_0x196413(0x170)];else{if(_0x264f43[0x0][_0x196413(0x103)]==_0x196413(0xec))var _0xf713c1=users[_0x196413(0xec)];else{if(_0x264f43[0x0]['language']==_0x196413(0x166))var _0xf713c1=users[_0x196413(0x16c)];}}}}}}}const _0x9a13c1=getRandom8DigitNumber();_0x9a13c1[_0x196413(0x135)](_0x4ddb5c=>{var _0x1b2d9c=_0x196413;_0x2b9a74[_0x1b2d9c(0x16a)](_0x1b2d9c(0x15c),{'success':_0x2c0bd9[_0x1b2d9c(0xeb)](_0x1b2d9c(0x142)),'errors':_0x2c0bd9[_0x1b2d9c(0xeb)](_0x1b2d9c(0xd8)),'role':_0x2148a9,'profile':_0x1f28ac,'master_shop':_0x264f43,'warehouse':_0x25ccdd,'language':_0xf713c1,'invoice':_0x4ddb5c});})[_0x196413(0xbd)](_0x29c423=>{var _0xd85831=_0x196413;_0x2c0bd9[_0xd85831(0xeb)]('errors',_0xd85831(0x173)),_0x2b9a74[_0xd85831(0xf6)]('/transfer/view');});}catch(_0x1b7abb){console[_0x196413(0x10e)](_0x1b7abb);}}),router[a0_0x5e2619(0x10c)]('/view/choose',auth,async(_0x257fdd,_0xcfe96f)=>{var _0x708641=a0_0x5e2619;try{const {username:_0x17f935,email:_0x5a1cf0,role:_0x1e8a81}=_0x257fdd[_0x708641(0x11f)],_0x266ce9=_0x257fdd[_0x708641(0x11f)],_0x27b959=await profile[_0x708641(0xff)]({'email':_0x266ce9['email']}),_0x8a2b0e=await master_shop[_0x708641(0x14b)]();let _0x3e1f1d;if(_0x266ce9[_0x708641(0x11d)]=='staff'){const _0x5911e2=await staff[_0x708641(0xff)]({'email':_0x266ce9[_0x708641(0xfe)]});_0x3e1f1d=await warehouse[_0x708641(0x13f)]([{'$match':{'status':_0x708641(0xbc),'name':_0x5911e2['warehouse']}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);}else _0x3e1f1d=await warehouse[_0x708641(0x13f)]([{'$match':{'status':_0x708641(0xbc)}},{'$group':{'_id':_0x708641(0x10d),'name':{'$first':_0x708641(0x10d)}}}]);const _0xe30f8c=await transfers_finished[_0x708641(0x14b)]({}),_0x14ee99=_0xe30f8c[_0x708641(0xf0)]+0x1,_0x58dde0='TRFF-'+_0x14ee99[_0x708641(0x144)]()[_0x708641(0x157)](0x5,'0');if(_0x8a2b0e[0x0][_0x708641(0x103)]==_0x708641(0x120))var _0x8f25be=users['English'];else{if(_0x8a2b0e[0x0][_0x708641(0x103)]==_0x708641(0x15b))var _0x8f25be=users[_0x708641(0x15b)];else{if(_0x8a2b0e[0x0][_0x708641(0x103)]==_0x708641(0x152))var _0x8f25be=users['German'];else{if(_0x8a2b0e[0x0]['language']=='Spanish')var _0x8f25be=users[_0x708641(0x159)];else{if(_0x8a2b0e[0x0][_0x708641(0x103)]==_0x708641(0xbe))var _0x8f25be=users[_0x708641(0xbe)];else{if(_0x8a2b0e[0x0][_0x708641(0x103)]==_0x708641(0x115))var _0x8f25be=users[_0x708641(0x170)];else{if(_0x8a2b0e[0x0][_0x708641(0x103)]==_0x708641(0xec))var _0x8f25be=users[_0x708641(0xec)];else{if(_0x8a2b0e[0x0][_0x708641(0x103)]==_0x708641(0x166))var _0x8f25be=users[_0x708641(0x16c)];}}}}}}}const _0x51ff4c=getRandom8DigitNumber();_0x51ff4c[_0x708641(0x135)](_0x4d4fdc=>{var _0x586ae5=_0x708641;_0xcfe96f[_0x586ae5(0x16a)](_0x586ae5(0x131),{'success':_0x257fdd[_0x586ae5(0xeb)](_0x586ae5(0x142)),'errors':_0x257fdd['flash'](_0x586ae5(0xd8)),'role':_0x266ce9,'profile':_0x27b959,'master_shop':_0x8a2b0e,'warehouse':_0x3e1f1d,'language':_0x8f25be,'invoice':_0x4d4fdc});})[_0x708641(0xbd)](_0x300552=>{var _0x577d53=_0x708641;_0x257fdd[_0x577d53(0xeb)](_0x577d53(0xd8),_0x577d53(0x173)),_0xcfe96f[_0x577d53(0xf6)](_0x577d53(0xc8));});}catch(_0x140ba4){console[_0x708641(0x10e)](_0x140ba4);}}),router[a0_0x5e2619(0x10c)](a0_0x5e2619(0xd7),auth,async(_0x704a00,_0x510185)=>{var _0x3278dc=a0_0x5e2619;try{const {username:_0x4c4c23,email:_0x462cdb,role:_0x247d34}=_0x704a00['user'],_0x4df21b=_0x704a00['user'],_0x1ec3fd=await profile[_0x3278dc(0xff)]({'email':_0x4df21b['email']}),_0x1de5b4=await master_shop[_0x3278dc(0x14b)]();let _0x2a6137;if(_0x4df21b[_0x3278dc(0x11d)]==_0x3278dc(0x137)){const _0x2389f3=await staff[_0x3278dc(0xff)]({'email':_0x4df21b['email']});_0x2a6137=await warehouse[_0x3278dc(0x13f)]([{'$match':{'status':_0x3278dc(0xbc),'name':_0x2389f3[_0x3278dc(0x113)]}},{'$group':{'_id':_0x3278dc(0x10d),'name':{'$first':'$name'}}}]);}else _0x2a6137=await warehouse[_0x3278dc(0x13f)]([{'$match':{'status':_0x3278dc(0xbc)}},{'$group':{'_id':'$name','name':{'$first':_0x3278dc(0x10d)}}}]);const _0x3a9746=await transfers_finished[_0x3278dc(0x14b)]({}),_0x4bc32f=_0x3a9746[_0x3278dc(0xf0)]+0x1,_0x14f855=_0x3278dc(0x17f)+_0x4bc32f['toString']()[_0x3278dc(0x157)](0x5,'0');if(_0x1de5b4[0x0]['language']==_0x3278dc(0x120))var _0x47e90f=users['English'];else{if(_0x1de5b4[0x0][_0x3278dc(0x103)]==_0x3278dc(0x15b))var _0x47e90f=users[_0x3278dc(0x15b)];else{if(_0x1de5b4[0x0]['language']==_0x3278dc(0x152))var _0x47e90f=users[_0x3278dc(0x152)];else{if(_0x1de5b4[0x0][_0x3278dc(0x103)]==_0x3278dc(0x159))var _0x47e90f=users[_0x3278dc(0x159)];else{if(_0x1de5b4[0x0]['language']=='French')var _0x47e90f=users['French'];else{if(_0x1de5b4[0x0][_0x3278dc(0x103)]==_0x3278dc(0x115))var _0x47e90f=users['Portuguese'];else{if(_0x1de5b4[0x0][_0x3278dc(0x103)]==_0x3278dc(0xec))var _0x47e90f=users[_0x3278dc(0xec)];else{if(_0x1de5b4[0x0][_0x3278dc(0x103)]=='Arabic\x20(ae)')var _0x47e90f=users[_0x3278dc(0x16c)];}}}}}}}const _0x4dfac3=getRandom8DigitNumber();_0x4dfac3[_0x3278dc(0x135)](_0x5c3ece=>{var _0x349c9c=_0x3278dc;_0x510185['render']('choos_transfer_logs',{'success':_0x704a00['flash'](_0x349c9c(0x142)),'errors':_0x704a00['flash'](_0x349c9c(0xd8)),'role':_0x4df21b,'profile':_0x1ec3fd,'master_shop':_0x1de5b4,'warehouse':_0x2a6137,'language':_0x47e90f,'invoice':_0x5c3ece});})[_0x3278dc(0xbd)](_0x10e30a=>{var _0x519a71=_0x3278dc;_0x704a00[_0x519a71(0xeb)]('errors',_0x519a71(0x173)),_0x510185[_0x519a71(0xf6)](_0x519a71(0xc8));});}catch(_0x177976){console[_0x3278dc(0x10e)](_0x177976);}}),router[a0_0x5e2619(0x148)](a0_0x5e2619(0x16d),auth,async(_0x778795,_0x32a68f)=>{var _0xfa2982=a0_0x5e2619;try{const {date:_0x104971,from_warehouse:_0xb84010,FromRoom_name:_0x5546a4,to_warehouse:_0x2c7b70,ToRoom_name:_0xadf811,prod_name:_0x24f520,from_prod_qty:_0x48014b,from_prod_level:_0x1e25d3,from_prod_isle:_0x34a282,from_prod_pallet:_0x6791be,to_prod_qty:_0x3bbe9f,to_prod_level:_0x488c31,to_prod_isle:_0xa1718c,to_prod_pallet:_0x4a547b,primary_code:_0x2dfeff,secondary_code:_0x545a2f,product_code3:_0xee9087,note:_0x2883fd,MaxStocks_data2:_0x3d9ae9,invoice:_0x1667a6,expiry_date:_0x20fa87,PO_number:_0x2919b6,ReqBy:_0x34db7d,dateofreq:_0x492c7e,typeservicesData:_0xdc5294,destination:_0x17dc0f,deliverydate:_0x27af6e,driver:_0x59754e,plate:_0xb85b81,van:_0x4c2f62,DRSI:_0xcda0e9,typevehicle:_0x5eac67,TSU:_0x2964c8,TFU:_0x5c7ed4}=_0x778795[_0xfa2982(0xd2)];if(typeof _0x24f520==_0xfa2982(0x117))var _0x353e1a=[_0x778795[_0xfa2982(0xd2)][_0xfa2982(0x134)]],_0x45aa07=[_0x778795['body'][_0xfa2982(0x105)]],_0x5117be=[_0x778795[_0xfa2982(0xd2)][_0xfa2982(0x15d)]],_0x3fe0de=[_0x778795[_0xfa2982(0xd2)][_0xfa2982(0x158)]],_0x40ff2c=[_0x778795[_0xfa2982(0xd2)][_0xfa2982(0x16f)]],_0x165ee6=[_0x778795['body'][_0xfa2982(0x108)]],_0x47e9b9=[_0x778795[_0xfa2982(0xd2)]['secondary_code']],_0x266384=[_0x778795[_0xfa2982(0xd2)][_0xfa2982(0x11b)]],_0x34ceee=[_0x778795['body']['MaxStocks_data2']],_0x3df98b=[_0x778795[_0xfa2982(0xd2)][_0xfa2982(0x123)]],_0x4b70c5=[_0x778795[_0xfa2982(0xd2)]['secondary_unit']],_0x21577f=[_0x778795[_0xfa2982(0xd2)]['batch_code']],_0x5503ff=[_0x778795[_0xfa2982(0xd2)][_0xfa2982(0xc0)]],_0x2af58f=[_0x778795[_0xfa2982(0xd2)]['product_date']],_0x573d87=[_0x778795[_0xfa2982(0xd2)][_0xfa2982(0x183)]],_0x55116c=[_0x778795['body'][_0xfa2982(0x100)]],_0x2217d1=[_0x778795['body'][_0xfa2982(0x139)]],_0x73de9f=[_0x778795[_0xfa2982(0xd2)]['RoomAssigned']],_0x4e6dd7=[_0x778795[_0xfa2982(0xd2)]['ToRoomAssigned']],_0x588a40=[_0x778795[_0xfa2982(0xd2)]['from_invoice']],_0xa087c6=[_0x778795[_0xfa2982(0xd2)]['id_transaction']];else var _0x353e1a=[..._0x778795[_0xfa2982(0xd2)]['prod_name']],_0x45aa07=[..._0x778795[_0xfa2982(0xd2)][_0xfa2982(0x105)]],_0x5117be=[..._0x778795[_0xfa2982(0xd2)][_0xfa2982(0x15d)]],_0x3fe0de=[..._0x778795[_0xfa2982(0xd2)][_0xfa2982(0x158)]],_0x40ff2c=[..._0x778795['body'][_0xfa2982(0x16f)]],_0x165ee6=[..._0x778795['body'][_0xfa2982(0x108)]],_0x47e9b9=[..._0x778795[_0xfa2982(0xd2)]['secondary_code']],_0x266384=[..._0x778795[_0xfa2982(0xd2)]['product_code3']],_0x34ceee=[..._0x778795[_0xfa2982(0xd2)][_0xfa2982(0x132)]],_0x3df98b=[..._0x778795[_0xfa2982(0xd2)][_0xfa2982(0x123)]],_0x4b70c5=[..._0x778795[_0xfa2982(0xd2)][_0xfa2982(0x17a)]],_0x21577f=[..._0x778795['body'][_0xfa2982(0x11a)]],_0x5503ff=[..._0x778795['body'][_0xfa2982(0xc0)]],_0x2af58f=[..._0x778795[_0xfa2982(0xd2)][_0xfa2982(0x17b)]],_0x573d87=[..._0x778795[_0xfa2982(0xd2)][_0xfa2982(0x183)]],_0x55116c=[..._0x778795[_0xfa2982(0xd2)]['maxPerUnit']],_0x2217d1=[..._0x778795['body'][_0xfa2982(0x139)]],_0x73de9f=[..._0x778795['body']['RoomAssigned']],_0x4e6dd7=[..._0x778795['body'][_0xfa2982(0x112)]],_0x588a40=[..._0x778795[_0xfa2982(0xd2)][_0xfa2982(0x114)]],_0xa087c6=[..._0x778795[_0xfa2982(0xd2)]['id_transaction']];const _0x19b4c8=_0x353e1a[_0xfa2982(0x185)](_0x25d235=>{return _0x25d235={'product_name':_0x25d235};});_0x45aa07[_0xfa2982(0x125)]((_0x5d6824,_0x450a56)=>{var _0x5dbd5e=_0xfa2982;_0x19b4c8[_0x450a56][_0x5dbd5e(0x15f)]=_0x5d6824;}),_0x5117be[_0xfa2982(0x125)]((_0x2cd862,_0x49f8de)=>{var _0x1c9c4c=_0xfa2982,_0x56b96e=_0x2cd862[_0x1c9c4c(0xe3)](/[A-Za-z]+/)[0x0],_0x3b1277=parseInt(_0x2cd862['match'](/\d+/)[0x0]);_0x19b4c8[_0x49f8de][_0x1c9c4c(0xf1)]=_0x3b1277,_0x19b4c8[_0x49f8de][_0x1c9c4c(0x150)]=_0x56b96e;}),_0xa087c6['forEach']((_0x616506,_0x18f413)=>{_0x19b4c8[_0x18f413]['id_transaction']=_0x616506;}),_0x588a40[_0xfa2982(0x125)]((_0x56728e,_0x29fa5d)=>{var _0x4cff73=_0xfa2982;_0x19b4c8[_0x29fa5d][_0x4cff73(0x114)]=_0x56728e;}),_0x3fe0de[_0xfa2982(0x125)]((_0x758dec,_0x1283b3)=>{_0x19b4c8[_0x1283b3]['to_quantity']=_0x758dec;}),_0x40ff2c[_0xfa2982(0x125)]((_0x585bb3,_0x513178)=>{var _0x44f3b0=_0xfa2982,_0x31adb1=_0x585bb3[_0x44f3b0(0xe3)](/[A-Za-z]+/)[0x0],_0x4b1ee1=parseInt(_0x585bb3[_0x44f3b0(0xe3)](/\d+/)[0x0]);_0x19b4c8[_0x513178][_0x44f3b0(0xef)]=_0x31adb1,_0x19b4c8[_0x513178][_0x44f3b0(0x164)]=_0x4b1ee1;}),_0x165ee6[_0xfa2982(0x125)]((_0x4bcb0c,_0x307250)=>{var _0x47dbea=_0xfa2982;_0x19b4c8[_0x307250][_0x47dbea(0x108)]=_0x4bcb0c;}),_0x47e9b9[_0xfa2982(0x125)]((_0x5f1262,_0x2c5d76)=>{var _0x23c10a=_0xfa2982;_0x19b4c8[_0x2c5d76][_0x23c10a(0xce)]=_0x5f1262;}),_0x266384[_0xfa2982(0x125)]((_0x4c64ae,_0x3c6488)=>{_0x19b4c8[_0x3c6488]['product_code']=_0x4c64ae;}),_0x34ceee[_0xfa2982(0x125)]((_0x3ac4ce,_0x3dc247)=>{var _0x581d37=_0xfa2982;_0x19b4c8[_0x3dc247][_0x581d37(0x13c)]=_0x3ac4ce;}),_0x3df98b['forEach']((_0x152510,_0x49b9ca)=>{_0x19b4c8[_0x49b9ca]['unit']=_0x152510;}),_0x4b70c5[_0xfa2982(0x125)]((_0x3329f9,_0x50fb2c)=>{var _0x2edcf7=_0xfa2982;_0x19b4c8[_0x50fb2c][_0x2edcf7(0x17a)]=_0x3329f9;}),_0x21577f[_0xfa2982(0x125)]((_0x11bce1,_0x18abe7)=>{var _0x250145=_0xfa2982;_0x19b4c8[_0x18abe7][_0x250145(0x11a)]=_0x11bce1;}),_0x5503ff[_0xfa2982(0x125)]((_0x3ed328,_0x5961e5)=>{var _0x5440f9=_0xfa2982;_0x19b4c8[_0x5961e5][_0x5440f9(0xc0)]=_0x3ed328;}),_0x2af58f[_0xfa2982(0x125)]((_0x430aff,_0x3a61d8)=>{var _0x21df7b=_0xfa2982;_0x19b4c8[_0x3a61d8][_0x21df7b(0xba)]=_0x430aff;}),_0x573d87[_0xfa2982(0x125)]((_0x2c9f83,_0x579696)=>{var _0x18ba4c=_0xfa2982;_0x19b4c8[_0x579696][_0x18ba4c(0x13c)]=_0x2c9f83;}),_0x55116c[_0xfa2982(0x125)]((_0x1b55f8,_0x4f4887)=>{var _0x576083=_0xfa2982;_0x19b4c8[_0x4f4887][_0x576083(0x100)]=_0x1b55f8;}),_0x2217d1['forEach']((_0x1f5322,_0x43636b)=>{var _0x275521=_0xfa2982;_0x19b4c8[_0x43636b][_0x275521(0x139)]=_0x1f5322;}),_0x73de9f[_0xfa2982(0x125)]((_0x12aae6,_0x21da08)=>{_0x19b4c8[_0x21da08]['from_room_name']=_0x12aae6;}),_0x4e6dd7[_0xfa2982(0x125)]((_0x36b20c,_0x30c2ea)=>{_0x19b4c8[_0x30c2ea]['to_room_name']=_0x36b20c;});const _0x13ee77=_0x19b4c8[_0xfa2982(0xda)](_0xd9cf08=>_0xd9cf08[_0xfa2982(0x17e)]!=='0'&&_0xd9cf08['to_quantity']!==''||_0xd9cf08[_0xfa2982(0x12a)]!=='0'&&_0xd9cf08[_0xfa2982(0x12a)]!=='');var _0x1ff430=0x0;_0x13ee77[_0xfa2982(0x125)](_0xe537f=>{var _0x164069=_0xfa2982;parseInt(_0xe537f[_0x164069(0x15f)])<parseInt(_0xe537f[_0x164069(0x17e)])&&_0x1ff430++;});if(_0x1ff430!=0x0)return _0x778795['flash'](_0xfa2982(0xd8),_0xfa2982(0x175)),_0x32a68f['redirect'](_0xfa2982(0x129));const _0x5d01d4=new transfers_logs();await _0x5d01d4[_0xfa2982(0x161)]();for(let _0x29ff89=0x0;_0x29ff89<=_0x4e6dd7['length']-0x1;_0x29ff89++){_0x19b4c8[_0x29ff89][_0xfa2982(0xf2)]='LOG-TRF-'+_0x5d01d4[_0xfa2982(0x168)][_0xfa2982(0x144)]()[_0xfa2982(0x157)](0x8,'0');}const _0xd54a70=new transfers_finished({'date':_0x104971,'from_warehouse':_0xb84010,'to_warehouse':_0xb84010,'product':_0x13ee77,'note':_0x2883fd,'invoice':_0xfa2982(0xe8)+_0x5d01d4[_0xfa2982(0x168)]['toString']()[_0xfa2982(0x157)](0x8,'0'),'type_of_process':_0xfa2982(0xee),'type_of_transaction':_0xfa2982(0xea),'PO_number':_0x2919b6,'RequestedBy':_0x34db7d,'DateofRequest':_0x492c7e,'typeservices':_0xdc5294,'destination':_0x17dc0f,'deliverydate':_0x27af6e,'driver':_0x59754e,'plate':_0xb85b81,'van':_0x4c2f62,'DRSI':_0xcda0e9,'typevehicle':_0x5eac67,'TSU':_0x2964c8,'TFU':_0x5c7ed4}),_0x12d36d=await _0xd54a70[_0xfa2982(0x161)]();_0x778795['flash'](_0xfa2982(0x142),_0xfa2982(0xc9)),_0x32a68f[_0xfa2982(0xf6)]('/transfer_finished/preview/'+_0x12d36d[_0xfa2982(0xb9)]);}catch(_0x4f9957){console[_0xfa2982(0x10e)](_0x4f9957),_0x32a68f[_0xfa2982(0xfa)](0xc8)['json']({'errorMessage':_0x4f9957[_0xfa2982(0xd3)]});}}),router[a0_0x5e2619(0x148)](a0_0x5e2619(0x163),auth,async(_0x26b869,_0x32f272)=>{var _0xac8ef9=a0_0x5e2619;try{const {date:_0x4d285b,from_warehouse:_0x3a1083,FromRoom_name:_0x1683c0,to_warehouse:_0x512714,ToRoom_name:_0x1d7daf,prod_name:_0x1e2e07,from_prod_qty:_0x8a3d0e,from_prod_level:_0x561f93,from_prod_isle:_0x279834,from_prod_pallet:_0x442cda,to_prod_qty:_0x581996,to_prod_level:_0x5888ff,to_prod_isle:_0x113d4b,to_prod_pallet:_0x5d4175,primary_code:_0x3d4aaf,secondary_code:_0x3b7cc5,product_code3:_0x5cd632,note:_0x314724,MaxStocks_data2:_0x4bf381,invoice:_0x5ea3cc,expiry_date:_0x432d88,PO_number_loc:_0x8d21e,ReqBy_loc:_0x4caa7d,dateofreq_loc:_0x26c9ba,typeservices_loc_Data:_0x15eac5,destination_loc:_0x2c85b7,deliverydate_loc:_0x4e8b4d,driver_loc:_0x28e8d9,plate_loc:_0x459522,van_loc:_0xdc119d,DRSI_loc:_0x22d4aa,typevehicle_loc:_0xa74842,TSU_loc:_0x3b8cfc,TFU_loc:_0x18905e}=_0x26b869[_0xac8ef9(0xd2)];if(typeof _0x1e2e07==_0xac8ef9(0x117))var _0x4a20f3=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x134)]],_0x5a618a=[_0x26b869['body'][_0xac8ef9(0x105)]],_0x1518f7=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x15d)]],_0x5c05a1=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x158)]],_0x507905=[_0x26b869['body']['to_prod_level']],_0x2736c0=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x108)]],_0x10b111=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0xce)]],_0x39e2d5=[_0x26b869['body'][_0xac8ef9(0x11b)]],_0x27e9eb=[_0x26b869['body']['MaxStocks_data2']],_0x253e83=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x123)]],_0x222534=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x17a)]],_0x123cd8=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x11a)]],_0x8775c3=[_0x26b869['body'][_0xac8ef9(0xc0)]],_0x239640=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x17b)]],_0xd2973a=[_0x26b869[_0xac8ef9(0xd2)]['MaxStocks_data']],_0x3936f0=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x100)]],_0x157657=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x139)]],_0x4dfec7=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0xd0)]],_0x54ce05=[_0x26b869['body'][_0xac8ef9(0x112)]],_0x47008a=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x114)]],_0x2c440d=[_0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x178)]];else var _0x4a20f3=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x134)]],_0x5a618a=[..._0x26b869['body'][_0xac8ef9(0x105)]],_0x1518f7=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x15d)]],_0x5c05a1=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x158)]],_0x507905=[..._0x26b869[_0xac8ef9(0xd2)]['to_prod_level']],_0x2736c0=[..._0x26b869['body'][_0xac8ef9(0x108)]],_0x10b111=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0xce)]],_0x39e2d5=[..._0x26b869['body'][_0xac8ef9(0x11b)]],_0x27e9eb=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x132)]],_0x253e83=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x123)]],_0x222534=[..._0x26b869[_0xac8ef9(0xd2)]['secondary_unit']],_0x123cd8=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x11a)]],_0x8775c3=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0xc0)]],_0x239640=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x17b)]],_0xd2973a=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x183)]],_0x3936f0=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x100)]],_0x157657=[..._0x26b869['body'][_0xac8ef9(0x139)]],_0x4dfec7=[..._0x26b869['body'][_0xac8ef9(0xd0)]],_0x54ce05=[..._0x26b869[_0xac8ef9(0xd2)]['ToRoomAssigned']],_0x47008a=[..._0x26b869[_0xac8ef9(0xd2)][_0xac8ef9(0x114)]],_0x2c440d=[..._0x26b869['body'][_0xac8ef9(0x178)]];const _0x2c0561=_0x4a20f3[_0xac8ef9(0x185)](_0x248daf=>{return _0x248daf={'product_name':_0x248daf};});_0x5a618a[_0xac8ef9(0x125)]((_0x58be6c,_0x3e59c8)=>{var _0x5f5790=_0xac8ef9;_0x2c0561[_0x3e59c8][_0x5f5790(0x15f)]=_0x58be6c;}),_0x1518f7[_0xac8ef9(0x125)]((_0x127239,_0x3ec953)=>{var _0xe46da0=_0xac8ef9,_0x3634e2=_0x127239['match'](/[A-Za-z]+/)[0x0],_0x119e94=parseInt(_0x127239['match'](/\d+/)[0x0]);_0x2c0561[_0x3ec953]['from_bay']=_0x119e94,_0x2c0561[_0x3ec953][_0xe46da0(0x150)]=_0x3634e2;}),_0x2c440d[_0xac8ef9(0x125)]((_0x397646,_0x22d2ee)=>{var _0x5c8c48=_0xac8ef9;_0x2c0561[_0x22d2ee][_0x5c8c48(0x178)]=_0x397646;}),_0x47008a[_0xac8ef9(0x125)]((_0xf5efc9,_0x2cf0a8)=>{var _0x5c1c33=_0xac8ef9;_0x2c0561[_0x2cf0a8][_0x5c1c33(0x114)]=_0xf5efc9;}),_0x5c05a1[_0xac8ef9(0x125)]((_0x41d825,_0x557345)=>{var _0x5e340f=_0xac8ef9;_0x2c0561[_0x557345][_0x5e340f(0x17e)]=_0x41d825;}),_0x507905[_0xac8ef9(0x125)]((_0x1a4f91,_0x23ce25)=>{var _0x485417=_0xac8ef9,_0x54fb44=_0x1a4f91[_0x485417(0xe3)](/[A-Za-z]+/)[0x0],_0xe6a22a=parseInt(_0x1a4f91[_0x485417(0xe3)](/\d+/)[0x0]);_0x2c0561[_0x23ce25][_0x485417(0xef)]=_0x54fb44,_0x2c0561[_0x23ce25][_0x485417(0x164)]=_0xe6a22a;}),_0x2736c0[_0xac8ef9(0x125)]((_0x2d8ebb,_0x20e634)=>{_0x2c0561[_0x20e634]['primary_code']=_0x2d8ebb;}),_0x10b111[_0xac8ef9(0x125)]((_0x4eae33,_0x388126)=>{var _0x1fa232=_0xac8ef9;_0x2c0561[_0x388126][_0x1fa232(0xce)]=_0x4eae33;}),_0x39e2d5[_0xac8ef9(0x125)]((_0x1c47f1,_0x19cedb)=>{var _0x467f24=_0xac8ef9;_0x2c0561[_0x19cedb][_0x467f24(0xc6)]=_0x1c47f1;}),_0x27e9eb[_0xac8ef9(0x125)]((_0x5f0fdc,_0x3c44ff)=>{var _0x25a4ca=_0xac8ef9;_0x2c0561[_0x3c44ff][_0x25a4ca(0x13c)]=_0x5f0fdc;}),_0x253e83['forEach']((_0x1220e8,_0x4c6fb0)=>{_0x2c0561[_0x4c6fb0]['unit']=_0x1220e8;}),_0x222534[_0xac8ef9(0x125)]((_0x491305,_0x4f0217)=>{var _0x19038e=_0xac8ef9;_0x2c0561[_0x4f0217][_0x19038e(0x17a)]=_0x491305;}),_0x123cd8[_0xac8ef9(0x125)]((_0x5a99f1,_0x3378bf)=>{var _0x2dc540=_0xac8ef9;_0x2c0561[_0x3378bf][_0x2dc540(0x11a)]=_0x5a99f1;}),_0x8775c3[_0xac8ef9(0x125)]((_0x532b82,_0x509305)=>{var _0x489875=_0xac8ef9;_0x2c0561[_0x509305][_0x489875(0xc0)]=_0x532b82;}),_0x239640[_0xac8ef9(0x125)]((_0x58ce2f,_0x4e1670)=>{var _0x594612=_0xac8ef9;_0x2c0561[_0x4e1670][_0x594612(0xba)]=_0x58ce2f;}),_0xd2973a[_0xac8ef9(0x125)]((_0x584255,_0x22ac0f)=>{_0x2c0561[_0x22ac0f]['maxProducts']=_0x584255;}),_0x3936f0[_0xac8ef9(0x125)]((_0xefb5bb,_0x6d8139)=>{var _0x4e7254=_0xac8ef9;_0x2c0561[_0x6d8139][_0x4e7254(0x100)]=_0xefb5bb;}),_0x157657['forEach']((_0x2f4055,_0x3406ff)=>{var _0x5f4a37=_0xac8ef9;_0x2c0561[_0x3406ff][_0x5f4a37(0x139)]=_0x2f4055;}),_0x4dfec7['forEach']((_0xfc65f3,_0x652319)=>{var _0x449e37=_0xac8ef9;_0x2c0561[_0x652319][_0x449e37(0xf3)]=_0xfc65f3;}),_0x54ce05['forEach']((_0x387deb,_0x403297)=>{var _0x379c21=_0xac8ef9;_0x2c0561[_0x403297][_0x379c21(0xcb)]=_0x387deb;});const _0x578a5a=_0x2c0561[_0xac8ef9(0xda)](_0x52614f=>_0x52614f[_0xac8ef9(0x17e)]!=='0'&&_0x52614f['to_quantity']!==''||_0x52614f[_0xac8ef9(0x12a)]!=='0'&&_0x52614f[_0xac8ef9(0x12a)]!=='');var _0x516377=0x0;_0x578a5a[_0xac8ef9(0x125)](_0x38f58b=>{var _0x4106c5=_0xac8ef9;parseInt(_0x38f58b[_0x4106c5(0x15f)])<parseInt(_0x38f58b[_0x4106c5(0x17e)])&&_0x516377++;});if(_0x516377!=0x0)return _0x26b869[_0xac8ef9(0xeb)](_0xac8ef9(0xd8),_0xac8ef9(0x175)),_0x32f272[_0xac8ef9(0xf6)]('back');const _0x1a2f89=new transfers_logs();await _0x1a2f89[_0xac8ef9(0x161)]();for(let _0x4c4e09=0x0;_0x4c4e09<=_0x54ce05[_0xac8ef9(0xf0)]-0x1;_0x4c4e09++){_0x2c0561[_0x4c4e09][_0xac8ef9(0xf2)]=_0xac8ef9(0xe8)+_0x1a2f89[_0xac8ef9(0x168)][_0xac8ef9(0x144)]()[_0xac8ef9(0x157)](0x8,'0');}const _0x34882a=new transfers_finished({'date':_0x4d285b,'from_warehouse':_0x3a1083,'to_warehouse':_0x512714,'product':_0x578a5a,'note':_0x314724,'invoice':'LOG-TRF-'+_0x1a2f89[_0xac8ef9(0x168)][_0xac8ef9(0x144)]()['padStart'](0x8,'0'),'type_of_transaction':_0xac8ef9(0xea),'type_of_process':'location2location','PO_number':_0x8d21e,'RequestedBy':_0x4caa7d,'DateofRequest':_0x26c9ba,'typeservices':_0x15eac5,'destination':_0x2c85b7,'deliverydate':_0x4e8b4d,'driver':_0x28e8d9,'plate':_0x459522,'van':_0xdc119d,'DRSI':_0x22d4aa,'typevehicle':_0xa74842,'TSU':_0x3b8cfc,'TFU':_0x18905e}),_0xe678fb=await _0x34882a[_0xac8ef9(0x161)]();_0x26b869['flash']('success','Product\x20Transfer\x20successfully'),_0x32f272[_0xac8ef9(0xf6)](_0xac8ef9(0x187)+_0xe678fb[_0xac8ef9(0xb9)]);}catch(_0x1aacd4){console[_0xac8ef9(0x10e)](_0x1aacd4),_0x32f272[_0xac8ef9(0xfa)](0xc8)[_0xac8ef9(0xd6)]({'errorMessage':_0x1aacd4['message']});}}),router[a0_0x5e2619(0x148)](a0_0x5e2619(0x10a),auth,async(_0x2f18e7,_0x41c5de)=>{var _0x2ebf71=a0_0x5e2619;try{const {date:_0x57278a,from_warehouse:_0x4f65b2,FromRoom_name:_0x1d4e04,to_warehouse:_0x5a1b97,ToRoom_name:_0x2e0c3b,prod_name:_0x12e211,from_prod_qty:_0x538933,from_prod_level:_0xde9b87,from_prod_isle:_0x3816d5,from_prod_pallet:_0x28cb91,to_prod_qty:_0x2c0878,to_prod_level:_0x26c747,to_prod_isle:_0x157a82,to_prod_pallet:_0xd17c43,primary_code:_0x11bb5d,secondary_code:_0xeca5c2,product_code3:_0x1b82bb,note:_0x52e8c0,MaxStocks_data2:_0x27c88e,invoice:_0x860aa5,expiry_date:_0x19ee6a,PO_number:_0x599689,ReqBy:_0x3ff7a7,dateofreq:_0x14478f,typeservicesData:_0x4e1c82,destination:_0x31edac,deliverydate:_0x2792b9,driver:_0x441536,plate:_0x5a1425,van:_0x49aae7,DRSI:_0x4c3b6c,typevehicle:_0x277cbc,TSU:_0x38db85,TFU:_0x29a14e}=_0x2f18e7[_0x2ebf71(0xd2)];if(typeof _0x12e211==_0x2ebf71(0x117))var _0x399187=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x134)]],_0x3659e7=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x105)]],_0x3e4702=[_0x2f18e7['body']['from_prod_level2']],_0x347615=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x158)]],_0x3df0f0=[_0x2f18e7['body'][_0x2ebf71(0x16f)]],_0x4f78f0=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x108)]],_0x4db6ed=[_0x2f18e7[_0x2ebf71(0xd2)]['secondary_code']],_0x107248=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x11b)]],_0x453748=[_0x2f18e7['body'][_0x2ebf71(0x132)]],_0x134fdd=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x123)]],_0x7a33bd=[_0x2f18e7['body'][_0x2ebf71(0x17a)]],_0x43a15b=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x11a)]],_0x41a348=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0xc0)]],_0x5cb91e=[_0x2f18e7['body'][_0x2ebf71(0x17b)]],_0x1f48eb=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x183)]],_0x1ae853=[_0x2f18e7['body'][_0x2ebf71(0x100)]],_0x286d0f=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x139)]],_0xeb57ba=[_0x2f18e7['body'][_0x2ebf71(0xd0)]],_0x3626c4=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x112)]],_0x355d0c=[_0x2f18e7[_0x2ebf71(0xd2)]['from_invoice']],_0x5a8acd=[_0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x178)]];else var _0x399187=[..._0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x134)]],_0x3659e7=[..._0x2f18e7[_0x2ebf71(0xd2)]['from_prod_qty']],_0x3e4702=[..._0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x15d)]],_0x347615=[..._0x2f18e7[_0x2ebf71(0xd2)]['New_Qty_Converted']],_0x3df0f0=[..._0x2f18e7[_0x2ebf71(0xd2)]['to_prod_level']],_0x4f78f0=[..._0x2f18e7[_0x2ebf71(0xd2)]['primary_code']],_0x4db6ed=[..._0x2f18e7['body']['secondary_code']],_0x107248=[..._0x2f18e7[_0x2ebf71(0xd2)]['product_code3']],_0x453748=[..._0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x132)]],_0x134fdd=[..._0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x123)]],_0x7a33bd=[..._0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x17a)]],_0x43a15b=[..._0x2f18e7[_0x2ebf71(0xd2)]['batch_code']],_0x41a348=[..._0x2f18e7[_0x2ebf71(0xd2)]['expiry_date']],_0x5cb91e=[..._0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x17b)]],_0x1f48eb=[..._0x2f18e7[_0x2ebf71(0xd2)]['MaxStocks_data']],_0x1ae853=[..._0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x100)]],_0x286d0f=[..._0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0x139)]],_0xeb57ba=[..._0x2f18e7[_0x2ebf71(0xd2)][_0x2ebf71(0xd0)]],_0x3626c4=[..._0x2f18e7['body']['ToRoomAssigned']],_0x355d0c=[..._0x2f18e7[_0x2ebf71(0xd2)]['from_invoice']],_0x5a8acd=[..._0x2f18e7[_0x2ebf71(0xd2)]['id_transaction']];const _0x455c21=_0x399187[_0x2ebf71(0x185)](_0x5a255a=>{return _0x5a255a={'product_name':_0x5a255a};});_0x3659e7['forEach']((_0x2bb510,_0x22c294)=>{var _0x57fa11=_0x2ebf71;_0x455c21[_0x22c294][_0x57fa11(0x15f)]=_0x2bb510;}),_0x3e4702[_0x2ebf71(0x125)]((_0x50c860,_0x31528e)=>{var _0x96354=_0x2ebf71,_0x104657=_0x50c860['match'](/[A-Za-z]+/)[0x0],_0x24509a=parseInt(_0x50c860[_0x96354(0xe3)](/\d+/)[0x0]);_0x455c21[_0x31528e]['from_bay']=_0x24509a,_0x455c21[_0x31528e][_0x96354(0x150)]=_0x104657;}),_0x5a8acd[_0x2ebf71(0x125)]((_0x3c5a27,_0x314e19)=>{var _0x1f0e9e=_0x2ebf71;_0x455c21[_0x314e19][_0x1f0e9e(0x178)]=_0x3c5a27;}),_0x355d0c[_0x2ebf71(0x125)]((_0x32b009,_0x595149)=>{var _0x317bef=_0x2ebf71;_0x455c21[_0x595149][_0x317bef(0x114)]=_0x32b009;}),_0x347615[_0x2ebf71(0x125)]((_0x3f6758,_0xb5876a)=>{var _0x31e614=_0x2ebf71;_0x455c21[_0xb5876a][_0x31e614(0x17e)]=_0x3f6758;}),_0x3df0f0['forEach']((_0x2f6d58,_0x5ce7b4)=>{var _0x356c8f=_0x2ebf71,_0x5e10af=_0x2f6d58[_0x356c8f(0xe3)](/[A-Za-z]+/)[0x0],_0x42d259=parseInt(_0x2f6d58[_0x356c8f(0xe3)](/\d+/)[0x0]);_0x455c21[_0x5ce7b4][_0x356c8f(0xef)]=_0x5e10af,_0x455c21[_0x5ce7b4][_0x356c8f(0x164)]=_0x42d259;}),_0x4f78f0[_0x2ebf71(0x125)]((_0x4f4c2c,_0x26c61d)=>{var _0x3a4d46=_0x2ebf71;_0x455c21[_0x26c61d][_0x3a4d46(0x108)]=_0x4f4c2c;}),_0x4db6ed[_0x2ebf71(0x125)]((_0x5be15e,_0x5c52da)=>{var _0x5bdf53=_0x2ebf71;_0x455c21[_0x5c52da][_0x5bdf53(0xce)]=_0x5be15e;}),_0x107248[_0x2ebf71(0x125)]((_0x4b6087,_0x436e90)=>{var _0xf99e2a=_0x2ebf71;_0x455c21[_0x436e90][_0xf99e2a(0xc6)]=_0x4b6087;}),_0x453748['forEach']((_0x1a973b,_0x102fea)=>{var _0x48b4a6=_0x2ebf71;_0x455c21[_0x102fea][_0x48b4a6(0x13c)]=_0x1a973b;}),_0x134fdd[_0x2ebf71(0x125)]((_0x1aa5ce,_0x4a2684)=>{var _0x3ec5a0=_0x2ebf71;_0x455c21[_0x4a2684][_0x3ec5a0(0x176)]=_0x1aa5ce;}),_0x7a33bd['forEach']((_0x4683ff,_0x2084d6)=>{var _0xe1cb09=_0x2ebf71;_0x455c21[_0x2084d6][_0xe1cb09(0x17a)]=_0x4683ff;}),_0x43a15b[_0x2ebf71(0x125)]((_0x19fcf6,_0x4c4611)=>{_0x455c21[_0x4c4611]['batch_code']=_0x19fcf6;}),_0x41a348[_0x2ebf71(0x125)]((_0x1d95ff,_0x22419a)=>{var _0x38c3c8=_0x2ebf71;_0x455c21[_0x22419a][_0x38c3c8(0xc0)]=_0x1d95ff;}),_0x5cb91e['forEach']((_0x41dd9b,_0x41bcaf)=>{var _0x781beb=_0x2ebf71;_0x455c21[_0x41bcaf][_0x781beb(0xba)]=_0x41dd9b;}),_0x1f48eb[_0x2ebf71(0x125)]((_0x226b15,_0x480c3a)=>{var _0x42125d=_0x2ebf71;_0x455c21[_0x480c3a][_0x42125d(0x13c)]=_0x226b15;}),_0x1ae853[_0x2ebf71(0x125)]((_0x2360a1,_0x2d289b)=>{_0x455c21[_0x2d289b]['maxPerUnit']=_0x2360a1;}),_0x286d0f[_0x2ebf71(0x125)]((_0x48e3ce,_0x50c448)=>{var _0x3247c6=_0x2ebf71;_0x455c21[_0x50c448][_0x3247c6(0x139)]=_0x48e3ce;}),_0xeb57ba[_0x2ebf71(0x125)]((_0x3ee90f,_0x3ccb49)=>{var _0x54badf=_0x2ebf71;_0x455c21[_0x3ccb49][_0x54badf(0xf3)]=_0x3ee90f;}),_0x3626c4[_0x2ebf71(0x125)]((_0x2b10b0,_0x3dcb20)=>{var _0x6b41e4=_0x2ebf71;_0x455c21[_0x3dcb20][_0x6b41e4(0xcb)]=_0x2b10b0;});const _0xedf2ba=_0x455c21[_0x2ebf71(0xda)](_0x3fcc11=>_0x3fcc11[_0x2ebf71(0x17e)]!=='0'&&_0x3fcc11[_0x2ebf71(0x17e)]!==''||_0x3fcc11[_0x2ebf71(0x12a)]!=='0'&&_0x3fcc11['to_floorlevel']!=='');var _0x3ae1b3=0x0;_0xedf2ba[_0x2ebf71(0x125)](_0x141e78=>{var _0x42af13=_0x2ebf71;parseInt(_0x141e78[_0x42af13(0x15f)])<parseInt(_0x141e78['to_quantity'])&&_0x3ae1b3++;});if(_0x3ae1b3!=0x0)return _0x2f18e7['flash'](_0x2ebf71(0xd8),_0x2ebf71(0x175)),_0x41c5de[_0x2ebf71(0xf6)](_0x2ebf71(0x129));const _0x556422=new invoice_for_transfer();await _0x556422['save']();for(let _0x15abad=0x0;_0x15abad<=_0x3626c4[_0x2ebf71(0xf0)]-0x1;_0x15abad++){_0x455c21[_0x15abad][_0x2ebf71(0xf2)]='TRF-'+_0x556422[_0x2ebf71(0x168)]['toString']()[_0x2ebf71(0x157)](0x8,'0');}const _0x8fe92d=new transfers_finished({'date':_0x57278a,'from_warehouse':_0x4f65b2,'to_warehouse':_0x4f65b2,'product':_0xedf2ba,'note':_0x52e8c0,'invoice':_0x2ebf71(0xfd)+_0x556422[_0x2ebf71(0x168)]['toString']()[_0x2ebf71(0x157)](0x8,'0'),'type_of_process':_0x2ebf71(0xee),'type_of_transaction':_0x2ebf71(0xe7),'PO_number':_0x599689,'RequestedBy':_0x3ff7a7,'DateofRequest':_0x14478f,'typeservices':_0x4e1c82,'destination':_0x31edac,'deliverydate':_0x2792b9,'driver':_0x441536,'plate':_0x5a1425,'van':_0x49aae7,'DRSI':_0x4c3b6c,'typevehicle':_0x277cbc,'TSU':_0x38db85,'TFU':_0x29a14e}),_0x59bce3=await _0x8fe92d[_0x2ebf71(0x161)]();_0x2f18e7[_0x2ebf71(0xeb)](_0x2ebf71(0x142),'Product\x20Transfer\x20successfully'),_0x41c5de[_0x2ebf71(0xf6)]('/transfer_finished/preview/'+_0x59bce3[_0x2ebf71(0xb9)]);}catch(_0x178bc4){console['log'](_0x178bc4),_0x41c5de['status'](0xc8)[_0x2ebf71(0xd6)]({'errorMessage':_0x178bc4[_0x2ebf71(0xd3)]});}}),router[a0_0x5e2619(0x148)](a0_0x5e2619(0x110),auth,async(_0x2c0b87,_0x39c6a6)=>{var _0x5ccd93=a0_0x5e2619;try{const {date:_0x51a920,from_warehouse:_0x21f630,FromRoom_name:_0x48b595,to_warehouse:_0x17c01c,ToRoom_name:_0x333aac,prod_name:_0x50ccd7,from_prod_qty:_0x20e7cc,from_prod_level:_0x57e475,from_prod_isle:_0x5146c5,from_prod_pallet:_0x197c44,to_prod_qty:_0x4ac509,to_prod_level:_0x5dfe62,to_prod_isle:_0x4863d4,to_prod_pallet:_0xb6e2d2,primary_code:_0x33633c,secondary_code:_0x415c69,product_code3:_0x2b0233,note:_0x4b2ff4,MaxStocks_data2:_0x218452,invoice:_0x566319,expiry_date:_0x439f57,PO_number_loc:_0x4e5e56,ReqBy_loc:_0x23a421,dateofreq_loc:_0x305236,typeservices_loc_Data:_0x4e4c8b,destination_loc:_0x3f2fda,deliverydate_loc:_0x2c2264,driver_loc:_0x3fa856,plate_loc:_0x149def,van_loc:_0x1ab79b,DRSI_loc:_0x43ce15,typevehicle_loc:_0x1440ab,TSU_loc:_0x544390,TFU_loc:_0x4d55a6}=_0x2c0b87['body'];if(typeof _0x50ccd7==_0x5ccd93(0x117))var _0x317b02=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x134)]],_0x4341a1=[_0x2c0b87['body'][_0x5ccd93(0x105)]],_0x559f03=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x15d)]],_0x9e1ee2=[_0x2c0b87['body'][_0x5ccd93(0x158)]],_0x670576=[_0x2c0b87[_0x5ccd93(0xd2)]['to_prod_level']],_0x624d9b=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x108)]],_0x3e36f8=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0xce)]],_0x51270c=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x11b)]],_0x51e41b=[_0x2c0b87[_0x5ccd93(0xd2)]['MaxStocks_data2']],_0x14cbc8=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x123)]],_0x38c7f3=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x17a)]],_0x21e014=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x11a)]],_0x51646f=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0xc0)]],_0x5b19f6=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x17b)]],_0x9c13c6=[_0x2c0b87['body']['MaxStocks_data']],_0x528da5=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x100)]],_0x5ba99f=[_0x2c0b87[_0x5ccd93(0xd2)]['prod_cat']],_0x2d32e3=[_0x2c0b87[_0x5ccd93(0xd2)]['RoomAssigned']],_0x20ab0b=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x112)]],_0x459277=[_0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x114)]],_0x28b33f=[_0x2c0b87[_0x5ccd93(0xd2)]['id_transaction']];else var _0x317b02=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x134)]],_0x4341a1=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x105)]],_0x559f03=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x15d)]],_0x9e1ee2=[..._0x2c0b87[_0x5ccd93(0xd2)]['New_Qty_Converted']],_0x670576=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x16f)]],_0x624d9b=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x108)]],_0x3e36f8=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0xce)]],_0x51270c=[..._0x2c0b87['body'][_0x5ccd93(0x11b)]],_0x51e41b=[..._0x2c0b87[_0x5ccd93(0xd2)]['MaxStocks_data2']],_0x14cbc8=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x123)]],_0x38c7f3=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x17a)]],_0x21e014=[..._0x2c0b87['body'][_0x5ccd93(0x11a)]],_0x51646f=[..._0x2c0b87[_0x5ccd93(0xd2)]['expiry_date']],_0x5b19f6=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x17b)]],_0x9c13c6=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x183)]],_0x528da5=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x100)]],_0x5ba99f=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x139)]],_0x2d32e3=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0xd0)]],_0x20ab0b=[..._0x2c0b87['body']['ToRoomAssigned']],_0x459277=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x114)]],_0x28b33f=[..._0x2c0b87[_0x5ccd93(0xd2)][_0x5ccd93(0x178)]];const _0x5975f7=_0x317b02[_0x5ccd93(0x185)](_0x2c7eec=>{return _0x2c7eec={'product_name':_0x2c7eec};});_0x4341a1[_0x5ccd93(0x125)]((_0x572705,_0x2c0ff9)=>{var _0x2c8063=_0x5ccd93;_0x5975f7[_0x2c0ff9][_0x2c8063(0x15f)]=_0x572705;}),_0x559f03[_0x5ccd93(0x125)]((_0x27cb4e,_0x22d62b)=>{var _0x35644a=_0x5ccd93,_0x405bfd=_0x27cb4e[_0x35644a(0xe3)](/[A-Za-z]+/)[0x0],_0x471832=parseInt(_0x27cb4e[_0x35644a(0xe3)](/\d+/)[0x0]);_0x5975f7[_0x22d62b]['from_bay']=_0x471832,_0x5975f7[_0x22d62b][_0x35644a(0x150)]=_0x405bfd;}),_0x28b33f[_0x5ccd93(0x125)]((_0x4817ca,_0x465a27)=>{var _0x14ec8d=_0x5ccd93;_0x5975f7[_0x465a27][_0x14ec8d(0x178)]=_0x4817ca;}),_0x459277[_0x5ccd93(0x125)]((_0x360194,_0xa21c70)=>{var _0x571bfa=_0x5ccd93;_0x5975f7[_0xa21c70][_0x571bfa(0x114)]=_0x360194;}),_0x9e1ee2['forEach']((_0x34872b,_0x449a4e)=>{var _0x5993f8=_0x5ccd93;_0x5975f7[_0x449a4e][_0x5993f8(0x17e)]=_0x34872b;}),_0x670576[_0x5ccd93(0x125)]((_0x34f0db,_0x36aed7)=>{var _0x2b94cf=_0x5ccd93,_0x27c9cb=_0x34f0db[_0x2b94cf(0xe3)](/[A-Za-z]+/)[0x0],_0x4e9e90=parseInt(_0x34f0db[_0x2b94cf(0xe3)](/\d+/)[0x0]);_0x5975f7[_0x36aed7]['to_level']=_0x27c9cb,_0x5975f7[_0x36aed7]['to_bay']=_0x4e9e90;}),_0x624d9b[_0x5ccd93(0x125)]((_0x471116,_0x16aecc)=>{var _0x2afcaf=_0x5ccd93;_0x5975f7[_0x16aecc][_0x2afcaf(0x108)]=_0x471116;}),_0x3e36f8['forEach']((_0x39fa92,_0x1aadc5)=>{_0x5975f7[_0x1aadc5]['secondary_code']=_0x39fa92;}),_0x51270c[_0x5ccd93(0x125)]((_0x1b0d86,_0x3eb531)=>{var _0x58ce67=_0x5ccd93;_0x5975f7[_0x3eb531][_0x58ce67(0xc6)]=_0x1b0d86;}),_0x51e41b['forEach']((_0x345937,_0x2b1698)=>{var _0x3672fd=_0x5ccd93;_0x5975f7[_0x2b1698][_0x3672fd(0x13c)]=_0x345937;}),_0x14cbc8['forEach']((_0x373764,_0x3c9e5e)=>{var _0x3e6fe3=_0x5ccd93;_0x5975f7[_0x3c9e5e][_0x3e6fe3(0x176)]=_0x373764;}),_0x38c7f3[_0x5ccd93(0x125)]((_0x12ab40,_0x1fe1a2)=>{var _0x9b8dfc=_0x5ccd93;_0x5975f7[_0x1fe1a2][_0x9b8dfc(0x17a)]=_0x12ab40;}),_0x21e014[_0x5ccd93(0x125)]((_0x3cfc82,_0xefb45a)=>{var _0x52387d=_0x5ccd93;_0x5975f7[_0xefb45a][_0x52387d(0x11a)]=_0x3cfc82;}),_0x51646f['forEach']((_0x523a5c,_0x41c9d3)=>{_0x5975f7[_0x41c9d3]['expiry_date']=_0x523a5c;}),_0x5b19f6[_0x5ccd93(0x125)]((_0x559ca2,_0x3b41e9)=>{var _0x1e6a47=_0x5ccd93;_0x5975f7[_0x3b41e9][_0x1e6a47(0xba)]=_0x559ca2;}),_0x9c13c6[_0x5ccd93(0x125)]((_0x5a0424,_0x12cf83)=>{var _0x73a7b4=_0x5ccd93;_0x5975f7[_0x12cf83][_0x73a7b4(0x13c)]=_0x5a0424;}),_0x528da5[_0x5ccd93(0x125)]((_0x8fde16,_0x4f1836)=>{_0x5975f7[_0x4f1836]['maxPerUnit']=_0x8fde16;}),_0x5ba99f['forEach']((_0x4db0f4,_0x4096ea)=>{_0x5975f7[_0x4096ea]['prod_cat']=_0x4db0f4;}),_0x2d32e3['forEach']((_0x5e0d2c,_0x2c11e5)=>{var _0x29dcac=_0x5ccd93;_0x5975f7[_0x2c11e5][_0x29dcac(0xf3)]=_0x5e0d2c;}),_0x20ab0b[_0x5ccd93(0x125)]((_0x58968f,_0x2022f2)=>{var _0x225913=_0x5ccd93;_0x5975f7[_0x2022f2][_0x225913(0xcb)]=_0x58968f;});const _0x44f96b=_0x5975f7['filter'](_0x1b7f5f=>_0x1b7f5f['to_quantity']!=='0'&&_0x1b7f5f[_0x5ccd93(0x17e)]!==''||_0x1b7f5f[_0x5ccd93(0x12a)]!=='0'&&_0x1b7f5f['to_floorlevel']!=='');var _0x374efc=0x0;_0x44f96b[_0x5ccd93(0x125)](_0x72e251=>{var _0x2adbdc=_0x5ccd93;parseInt(_0x72e251[_0x2adbdc(0x15f)])<parseInt(_0x72e251[_0x2adbdc(0x17e)])&&_0x374efc++;});if(_0x374efc!=0x0)return _0x2c0b87[_0x5ccd93(0xeb)]('errors',_0x5ccd93(0x175)),_0x39c6a6[_0x5ccd93(0xf6)](_0x5ccd93(0x129));const _0x2a8dfa=new invoice_for_transfer();await _0x2a8dfa['save']();for(let _0x1ba621=0x0;_0x1ba621<=_0x20ab0b[_0x5ccd93(0xf0)]-0x1;_0x1ba621++){_0x5975f7[_0x1ba621][_0x5ccd93(0xf2)]=_0x5ccd93(0xfd)+_0x2a8dfa[_0x5ccd93(0x168)]['toString']()[_0x5ccd93(0x157)](0x8,'0');}const _0x1b4c63=new transfers_finished({'date':_0x51a920,'from_warehouse':_0x21f630,'to_warehouse':_0x17c01c,'product':_0x44f96b,'note':_0x4b2ff4,'invoice':'TRF-'+_0x2a8dfa['invoice_init'][_0x5ccd93(0x144)]()[_0x5ccd93(0x157)](0x8,'0'),'type_of_transaction':'own','type_of_process':_0x5ccd93(0x10b),'PO_number':_0x4e5e56,'RequestedBy':_0x23a421,'DateofRequest':_0x305236,'typeservices':_0x4e4c8b,'destination':_0x3f2fda,'deliverydate':_0x2c2264,'driver':_0x3fa856,'plate':_0x149def,'van':_0x1ab79b,'DRSI':_0x43ce15,'typevehicle':_0x1440ab,'TSU':_0x544390,'TFU':_0x4d55a6}),_0x22a844=await _0x1b4c63['save']();_0x2c0b87[_0x5ccd93(0xeb)](_0x5ccd93(0x142),_0x5ccd93(0xc9)),_0x39c6a6['redirect'](_0x5ccd93(0x187)+_0x22a844[_0x5ccd93(0xb9)]);}catch(_0x4c3c65){console[_0x5ccd93(0x10e)](_0x4c3c65),_0x39c6a6[_0x5ccd93(0xfa)](0xc8)[_0x5ccd93(0xd6)]({'errorMessage':_0x4c3c65[_0x5ccd93(0xd3)]});}}),router[a0_0x5e2619(0x10c)](a0_0x5e2619(0xdf),auth,async(_0x12590d,_0x59646f)=>{var _0x271af4=a0_0x5e2619;try{const {username:_0x18b04e,email:_0x1fe2b9,role:_0x15251f}=_0x12590d[_0x271af4(0x11f)],_0x1f25fa=_0x12590d[_0x271af4(0x11f)],_0x4c3b4d=await profile[_0x271af4(0xff)]({'email':_0x1f25fa[_0x271af4(0xfe)]}),_0x31cb42=await master_shop[_0x271af4(0x14b)](),_0x2c0884=await transfers_finished['findById'](_0x12590d[_0x271af4(0xfb)]['id']);let _0x5ca5e6;if(_0x1f25fa[_0x271af4(0x11d)]==_0x271af4(0x137)){const _0x56ddd1=await staff[_0x271af4(0xff)]({'email':_0x1f25fa[_0x271af4(0xfe)]});_0x5ca5e6=await warehouse[_0x271af4(0x14b)]({'status':_0x271af4(0xbc),'name':_0x56ddd1['warehouse'],'warehouse_category':_0x271af4(0x130)});}else _0x5ca5e6=await warehouse['find']({'status':_0x271af4(0xbc),'warehouse_category':'Finished\x20Goods'});const _0xda5300=await warehouse['aggregate']([{'$match':{'name':_0x2c0884[_0x271af4(0x151)],'warehouse_category':_0x271af4(0x130)}},{'$unwind':_0x271af4(0xcd)},{'$group':{'_id':_0x271af4(0xcc),'name':{'$first':_0x271af4(0xd4)},'product_stock':{'$first':_0x271af4(0x14f)},'bay':{'$first':_0x271af4(0xe2)},'bin':{'$first':_0x271af4(0x111)},'type':{'$first':_0x271af4(0x104)},'floorlevel':{'$first':_0x271af4(0xc5)},'primary_code':{'$first':_0x271af4(0x165)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x271af4(0x15a)},'rack':{'$first':_0x271af4(0x155)},'expiry_date':{'$first':_0x271af4(0x128)},'production_date':{'$first':_0x271af4(0x153)},'room':{'$first':_0x271af4(0x14d)},'warehoue_name':{'$first':'$name'}}}]),_0x136368=await product[_0x271af4(0x14b)]({});if(_0x31cb42[0x0][_0x271af4(0x103)]==_0x271af4(0x120)){var _0x23868b=users[_0x271af4(0x116)];console[_0x271af4(0x10e)](_0x23868b);}else{if(_0x31cb42[0x0][_0x271af4(0x103)]==_0x271af4(0x15b))var _0x23868b=users[_0x271af4(0x15b)];else{if(_0x31cb42[0x0][_0x271af4(0x103)]==_0x271af4(0x152))var _0x23868b=users[_0x271af4(0x152)];else{if(_0x31cb42[0x0]['language']=='Spanish')var _0x23868b=users[_0x271af4(0x159)];else{if(_0x31cb42[0x0]['language']==_0x271af4(0xbe))var _0x23868b=users['French'];else{if(_0x31cb42[0x0][_0x271af4(0x103)]==_0x271af4(0x115))var _0x23868b=users[_0x271af4(0x170)];else{if(_0x31cb42[0x0][_0x271af4(0x103)]==_0x271af4(0xec))var _0x23868b=users['Chinese'];else{if(_0x31cb42[0x0][_0x271af4(0x103)]==_0x271af4(0x166))var _0x23868b=users[_0x271af4(0x16c)];}}}}}}}_0x59646f[_0x271af4(0x16a)](_0x271af4(0x13a),{'success':_0x12590d[_0x271af4(0xeb)](_0x271af4(0x142)),'errors':_0x12590d[_0x271af4(0xeb)](_0x271af4(0xd8)),'role':_0x1f25fa,'profile':_0x4c3b4d,'master_shop':_0x31cb42,'warehouse':_0x5ca5e6,'transfer':_0x2c0884,'stock':_0xda5300,'unit':_0x136368,'language':_0x23868b});}catch(_0x46418e){console[_0x271af4(0x10e)](_0x46418e);}}),router[a0_0x5e2619(0x148)](a0_0x5e2619(0xdf),auth,async(_0x376152,_0x4efc5f)=>{var _0x45b90e=a0_0x5e2619;try{const {invoice:_0x51b358,from_warehouse:_0x53743f,FromRoom_name:_0x5556e0,to_warehouse:_0x511d74,ToRoom_name:_0x2793f0}=_0x376152[_0x45b90e(0xd2)],_0x59438d=await transfers_finished[_0x45b90e(0x174)](_0x376152['params']['id']),_0x5161a3=_0x59438d[_0x45b90e(0xdd)]['map'](async _0x5d6eb5=>{var _0x35ce12=_0x45b90e;if(_0x5d6eb5[_0x35ce12(0x17e)]>0x0){var _0x16bb04=await warehouse[_0x35ce12(0xff)]({'name':_0x53743f,'room':_0x5d6eb5[_0x35ce12(0xf3)]});const _0x2603d6=_0x16bb04[_0x35ce12(0x17c)][_0x35ce12(0x185)](_0x102c52=>{var _0x28e7ba=_0x35ce12;_0x102c52[_0x28e7ba(0xb9)]==_0x5d6eb5[_0x28e7ba(0x178)]&&(_0x102c52[_0x28e7ba(0x169)]=Math[_0x28e7ba(0xd9)](0x0,Math[_0x28e7ba(0xf8)](_0x102c52['product_stock'])-Math[_0x28e7ba(0xf8)](_0x5d6eb5['to_quantity'])),console[_0x28e7ba(0x10e)](_0x102c52[_0x28e7ba(0x169)]));});}return _0x16bb04;});Promise[_0x45b90e(0x127)](_0x5161a3)[_0x45b90e(0x135)](async _0x7c0e15=>{var _0x1acc6f=_0x45b90e;try{for(const _0x96960d of _0x7c0e15){await _0x96960d[_0x1acc6f(0x161)]();}const _0x206bf3=_0x59438d[_0x1acc6f(0xdd)]['map'](async _0x3447cc=>{var _0x67b59e=_0x1acc6f,_0x87332=await warehouse[_0x67b59e(0xff)]({'name':_0x511d74,'room':_0x3447cc[_0x67b59e(0xcb)]});if(_0x3447cc[_0x67b59e(0x17e)]>0x0){var _0x3d0254=0x0;const _0x386f65=_0x87332['product_details'][_0x67b59e(0x185)](_0x3c4542=>{var _0x2a4c02=_0x67b59e;_0x3c4542[_0x2a4c02(0xe4)]==_0x3447cc[_0x2a4c02(0xe4)]&&_0x3c4542[_0x2a4c02(0xe1)]==_0x3447cc['to_bay']&&_0x3c4542[_0x2a4c02(0xc0)]==_0x3447cc[_0x2a4c02(0xc0)]&&_0x3c4542[_0x2a4c02(0xba)]==_0x3447cc['production_date']&&_0x3c4542[_0x2a4c02(0x11a)]==_0x3447cc['batch_code']&&_0x3c4542['invoice']==_0x3447cc[_0x2a4c02(0xf2)]&&(typeof _0x3447cc[_0x2a4c02(0x178)]==_0x2a4c02(0x124)?(console['log'](_0x2a4c02(0xca),_0x3c4542[_0x2a4c02(0x169)]+_0x2a4c02(0x17d)+_0x3c4542[_0x2a4c02(0xb9)]+_0x2a4c02(0x12e)+Math['abs'](_0x3c4542[_0x2a4c02(0x169)])+Math[_0x2a4c02(0xf8)](_0x3447cc[_0x2a4c02(0x17e)])),_0x3c4542[_0x2a4c02(0x169)]=Math['abs'](_0x3c4542[_0x2a4c02(0x169)])+Math[_0x2a4c02(0xf8)](_0x3447cc[_0x2a4c02(0x17e)])):_0x3c4542['product_stock']=Math[_0x2a4c02(0xf8)](_0x3c4542[_0x2a4c02(0x169)])+Math[_0x2a4c02(0xf8)](_0x3447cc['to_quantity']),_0x3d0254++);});_0x3d0254=='0'&&(_0x87332[_0x67b59e(0x17c)]=_0x87332['product_details'][_0x67b59e(0x147)]({'product_name':_0x3447cc['product_name'],'product_stock':_0x3447cc['to_quantity'],'bay':_0x3447cc['to_bay'],'level':_0x3447cc[_0x67b59e(0xef)],'product_code':_0x3447cc[_0x67b59e(0xc6)],'primary_code':_0x3447cc[_0x67b59e(0x108)],'secondary_code':_0x3447cc[_0x67b59e(0xce)],'expiry_date':_0x3447cc['expiry_date'],'production_date':_0x3447cc[_0x67b59e(0xba)],'maxProducts':_0x3447cc['maxProducts'],'batch_code':_0x3447cc[_0x67b59e(0x11a)],'secondary_unit':_0x3447cc[_0x67b59e(0x17a)],'unit':_0x3447cc['unit'],'maxProducts':_0x3447cc['maxProducts'],'maxPerUnit':_0x3447cc[_0x67b59e(0x100)],'invoice':_0x3447cc['To_invoice']}));}return _0x87332;});Promise[_0x1acc6f(0x127)](_0x206bf3)[_0x1acc6f(0x135)](async _0x518309=>{var _0x276fe3=_0x1acc6f;try{console['log'](_0x59438d[_0x276fe3(0x119)]);if(_0x59438d['type_of_process']!=_0x276fe3(0x10b))for(const _0x5f4716 of _0x518309){await warehouse[_0x276fe3(0x101)]({'_id':_0x5f4716[_0x276fe3(0xb9)]},{'$addToSet':{'product_details':{'$each':_0x5f4716[_0x276fe3(0x17c)]}}});}_0x59438d['finalize']=_0x276fe3(0x12d);const _0x590753=await _0x59438d[_0x276fe3(0x161)](),_0x56e4f6=await master_shop[_0x276fe3(0x14b)](),_0x84c5a0=await email_settings[_0x276fe3(0xff)](),_0x1a34ed=await supervisor_settings[_0x276fe3(0x14b)]();var _0x54d6c5=_0x59438d[_0x276fe3(0xdd)],_0x5202f8='',_0x3e81fe;for(_0x3e81fe in _0x54d6c5){var _0x29c34a='FG';_0x59438d[_0x276fe3(0xe5)]==_0x276fe3(0x126)&&(_0x29c34a='DG'),_0x5202f8+=_0x276fe3(0x106)+_0x276fe3(0xbb)+_0x54d6c5[_0x3e81fe][_0x276fe3(0xe4)]+_0x276fe3(0xc1)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x54d6c5[_0x3e81fe]['product_code']+'</td>'+_0x276fe3(0xbb)+_0x54d6c5[_0x3e81fe][_0x276fe3(0x17e)]+_0x276fe3(0xc1)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x54d6c5[_0x3e81fe][_0x276fe3(0x176)]+_0x276fe3(0xc1)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x54d6c5[_0x3e81fe][_0x276fe3(0x17a)]+_0x276fe3(0xc1)+_0x276fe3(0xbb)+_0x59438d[_0x276fe3(0xe5)]+_0x276fe3(0xc1)+_0x276fe3(0xbb)+_0x54d6c5[_0x3e81fe]['to_room_name']+_0x276fe3(0xc1)+_0x276fe3(0xbb)+_0x29c34a+_0x54d6c5[_0x3e81fe]['to_bay']+_0x276fe3(0xc1)+_0x276fe3(0xe9);}_0x376152[_0x276fe3(0xeb)](_0x276fe3(0x142),_0x276fe3(0x184)),_0x4efc5f[_0x276fe3(0xf6)](_0x276fe3(0x109)+_0x590753[_0x276fe3(0xb9)]);}catch(_0x3fb5af){console[_0x276fe3(0xde)](_0x3fb5af),_0x4efc5f[_0x276fe3(0xfa)](0x1f4)[_0x276fe3(0xd6)]({'error':_0x276fe3(0x172)});}})[_0x1acc6f(0xbd)](_0x3584b9=>{var _0x30576f=_0x1acc6f;console['error'](_0x3584b9),_0x4efc5f[_0x30576f(0xfa)](0x1f4)['json']({'error':_0x30576f(0xc3)});});}catch(_0xdce12c){console[_0x1acc6f(0xde)](_0xdce12c),_0x4efc5f[_0x1acc6f(0xfa)](0x1f4)['json']({'error':_0x1acc6f(0x143)});}})['catch'](_0x5b1b56=>{var _0x1a6e86=_0x45b90e;console[_0x1a6e86(0xde)](_0x5b1b56),_0x4efc5f['status'](0x1f4)['json']({'error':'An\x20error\x20occurred.'});});}catch(_0x3b3575){_0x4efc5f[_0x45b90e(0xd6)]({'message':_0x3b3575[_0x45b90e(0xd3)]});}});function BayBinSelected(_0x350cf8,_0x1a5220){var _0x16e6c1=a0_0x5e2619,_0x33e7c4=[];let _0x5b4990=[];var _0x26bf6e=[];if(_0x350cf8=='DRY\x20GOODS'){switch(_0x1a5220){case _0x16e6c1(0x11e):_0x33e7c4=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10];break;case _0x16e6c1(0x171):_0x33e7c4=[0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20];break;}_0x26bf6e=['DG'];}else{if(_0x350cf8==_0x16e6c1(0xd1)){switch(_0x1a5220){case _0x16e6c1(0x11e):_0x33e7c4=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9];break;case'Rack\x202':_0x33e7c4=[0xa,0xb,0xc,0xd,0xe,0xf,0x10,0x11,0x12];break;}_0x26bf6e=['FG'];}}return{'levels':_0x33e7c4,'identify':_0x26bf6e};}router[a0_0x5e2619(0x10c)]('/view/:id',auth,async(_0x29a071,_0x1012a6)=>{var _0x55a110=a0_0x5e2619;try{const {username:_0xb8ffd6,email:_0x2d5348,role:_0x483944}=_0x29a071[_0x55a110(0x11f)],_0x300701=_0x29a071[_0x55a110(0x11f)],_0xed41d8=await profile[_0x55a110(0xff)]({'email':_0x300701[_0x55a110(0xfe)]}),_0x541893=await master_shop[_0x55a110(0x14b)](),_0x48cb70=await transfers_finished[_0x55a110(0x174)](_0x29a071[_0x55a110(0xfb)]['id']);let _0x1b5fe0=new Date(_0x48cb70['expiry_date']),_0x49a3f1=('0'+_0x1b5fe0[_0x55a110(0xed)]())[_0x55a110(0xf5)](-0x2),_0x17d2ec=('0'+(_0x1b5fe0[_0x55a110(0xfc)]()+0x1))[_0x55a110(0xf5)](-0x2),_0x813ee6=_0x1b5fe0['getFullYear'](),_0x85b148=_0x813ee6+'-'+_0x17d2ec+'-'+_0x49a3f1,_0x3b3157;if(_0x300701[_0x55a110(0x11d)]=='staff'){const _0xbab1e9=await staff[_0x55a110(0xff)]({'email':_0x300701[_0x55a110(0xfe)]});_0x3b3157=await warehouse[_0x55a110(0x14b)]({'status':_0x55a110(0xbc),'name':_0xbab1e9[_0x55a110(0x113)],'warehouse_category':_0x55a110(0x130)});}else _0x3b3157=await warehouse[_0x55a110(0x14b)]({'status':_0x55a110(0xbc),'warehouse_category':_0x55a110(0x130)});const _0xb5e24c=await warehouse['aggregate']([{'$match':{'name':_0x48cb70[_0x55a110(0x151)],'room':_0x48cb70[_0x55a110(0x118)]}},{'$unwind':_0x55a110(0xcd)},{'$group':{'_id':_0x55a110(0xcc),'name':{'$first':_0x55a110(0xd4)},'product_stock':{'$first':_0x55a110(0x14f)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x55a110(0x111)},'type':{'$first':_0x55a110(0x104)},'floorlevel':{'$first':_0x55a110(0xc5)},'primary_code':{'$first':_0x55a110(0x165)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x55a110(0x156)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x55a110(0x155)}}}]);var _0x3e9e4b=[0x1,0x2,0x3,0x4],_0x1e41ad=['A','B','C','D','E','F','G','H','I','J'],_0x324389=[_0x55a110(0x141),_0x55a110(0x13b)];const _0xfb7b93=await product['find']({}),_0x2296c7=BayBinSelected(_0x48cb70[_0x55a110(0xe5)],_0x48cb70[_0x55a110(0x177)]);if(_0x541893[0x0][_0x55a110(0x103)]==_0x55a110(0x120)){var _0x2cc979=users[_0x55a110(0x116)];console[_0x55a110(0x10e)](_0x2cc979);}else{if(_0x541893[0x0][_0x55a110(0x103)]==_0x55a110(0x15b))var _0x2cc979=users[_0x55a110(0x15b)];else{if(_0x541893[0x0]['language']==_0x55a110(0x152))var _0x2cc979=users[_0x55a110(0x152)];else{if(_0x541893[0x0][_0x55a110(0x103)]==_0x55a110(0x159))var _0x2cc979=users['Spanish'];else{if(_0x541893[0x0]['language']==_0x55a110(0xbe))var _0x2cc979=users[_0x55a110(0xbe)];else{if(_0x541893[0x0][_0x55a110(0x103)]==_0x55a110(0x115))var _0x2cc979=users[_0x55a110(0x170)];else{if(_0x541893[0x0][_0x55a110(0x103)]==_0x55a110(0xec))var _0x2cc979=users['Chinese'];else{if(_0x541893[0x0][_0x55a110(0x103)]==_0x55a110(0x166))var _0x2cc979=users['Arabic'];}}}}}}}_0x1012a6[_0x55a110(0x16a)](_0x55a110(0x11c),{'success':_0x29a071[_0x55a110(0xeb)](_0x55a110(0x142)),'errors':_0x29a071[_0x55a110(0xeb)]('errors'),'role':_0x300701,'profile':_0xed41d8,'master_shop':_0x541893,'warehouse':_0x3b3157,'transfer':_0x48cb70,'stock':_0xb5e24c,'unit':_0xfb7b93,'language':_0x2cc979,'levels':_0x3e9e4b,'Isle':_0x1e41ad,'rooms_data':_0x324389,'ed_fullDate':_0x85b148,'dataSelected':_0x2296c7});}catch(_0x31eba8){console[_0x55a110(0x10e)](_0x31eba8);}}),router['post'](a0_0x5e2619(0x15e),auth,async(_0x2b120d,_0x16a203)=>{var _0x446bd4=a0_0x5e2619;try{const _0x2ca551=_0x2b120d['params']['id'];console[_0x446bd4(0x10e)](_0x2b120d['body']);const _0x45a3a7=await transfers_finished[_0x446bd4(0x174)](_0x2ca551);console['log'](_0x446bd4(0x133),_0x45a3a7);const {date:_0x332e8d,from_warehouse:_0x437f82,FromRoom_name:_0x129a37,to_warehouse:_0xa8f769,ToRoom_name:_0x53d5c8,prod_name:_0x421bd9,from_prod_qty:_0x3ab015,from_prod_level:_0x8fd3ec,from_prod_isle:_0x5ed307,from_prod_pallet:_0xfa3351,to_prod_qty:_0x22bb1e,to_prod_level:_0x3f19cb,to_prod_isle:_0x312e51,to_prod_pallet:_0x5e44ef,primary_code:_0x544907,secondary_code:_0xf480e1,product_code3:_0x5b6898,note:_0x561455,invoice:_0x300186,expiry_date:_0x95ce97}=_0x2b120d[_0x446bd4(0xd2)];if(typeof _0x421bd9=='string')var _0x2fefef=[_0x2b120d['body'][_0x446bd4(0x134)]],_0x239d72=[_0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x105)]],_0x893e3a=[_0x2b120d[_0x446bd4(0xd2)]['from_prod_level']],_0x22f698=[_0x2b120d['body'][_0x446bd4(0x136)]],_0x4f4fc9=[_0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x16f)]],_0x726e5b=[_0x2b120d[_0x446bd4(0xd2)]['primary_code']],_0x2af2bf=[_0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0xce)]],_0x4be41c=[_0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x11b)]],_0x3a992c=[_0x2b120d['body'][_0x446bd4(0x132)]],_0x404239=[_0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x176)]],_0x522531=[_0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x17a)]],_0x28caef=[_0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x11a)]],_0x26383d=[_0x2b120d['body'][_0x446bd4(0xc0)]];else var _0x2fefef=[..._0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x134)]],_0x239d72=[..._0x2b120d['body'][_0x446bd4(0x105)]],_0x893e3a=[..._0x2b120d['body']['from_prod_level']],_0x22f698=[..._0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x136)]],_0x4f4fc9=[..._0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x16f)]],_0x726e5b=[..._0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x108)]],_0x2af2bf=[..._0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0xce)]],_0x4be41c=[..._0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x11b)]],_0x3a992c=[..._0x2b120d[_0x446bd4(0xd2)][_0x446bd4(0x132)]],_0x404239=[..._0x2b120d[_0x446bd4(0xd2)]['unit']],_0x522531=[..._0x2b120d['body'][_0x446bd4(0x17a)]],_0x28caef=[..._0x2b120d['body'][_0x446bd4(0x11a)]],_0x26383d=[..._0x2b120d[_0x446bd4(0xd2)]['expiry_date']];const _0x17db0e=_0x2fefef[_0x446bd4(0x185)](_0x2c9d23=>{return _0x2c9d23={'product_name':_0x2c9d23};});_0x239d72[_0x446bd4(0x125)]((_0x3c9013,_0x492e5e)=>{var _0x2b788b=_0x446bd4;_0x17db0e[_0x492e5e][_0x2b788b(0x15f)]=_0x3c9013;}),_0x893e3a['forEach']((_0x14cb72,_0x3a057f)=>{var _0x4f4ef4=_0x446bd4;_0x17db0e[_0x3a057f][_0x4f4ef4(0xf1)]=_0x14cb72;}),_0x22f698[_0x446bd4(0x125)]((_0x9786d5,_0x5ed0a4)=>{_0x17db0e[_0x5ed0a4]['to_quantity']=_0x9786d5;}),_0x4f4fc9['forEach']((_0x55d1de,_0x103e9c)=>{_0x17db0e[_0x103e9c]['to_bay']=_0x55d1de;}),_0x726e5b[_0x446bd4(0x125)]((_0x3c3ce5,_0x25b428)=>{_0x17db0e[_0x25b428]['primary_code']=_0x3c3ce5;}),_0x2af2bf[_0x446bd4(0x125)]((_0x4e4fea,_0x2c1c84)=>{var _0x2e7d6c=_0x446bd4;_0x17db0e[_0x2c1c84][_0x2e7d6c(0xce)]=_0x4e4fea;}),_0x4be41c[_0x446bd4(0x125)]((_0x3630f6,_0x54125c)=>{var _0x56b06a=_0x446bd4;_0x17db0e[_0x54125c][_0x56b06a(0xc6)]=_0x3630f6;}),_0x3a992c[_0x446bd4(0x125)]((_0x5ca381,_0x1f4177)=>{var _0x49296d=_0x446bd4;_0x17db0e[_0x1f4177][_0x49296d(0x13c)]=_0x5ca381;}),_0x404239[_0x446bd4(0x125)]((_0x1edd1b,_0x4edfd0)=>{var _0x1d0608=_0x446bd4;_0x17db0e[_0x4edfd0][_0x1d0608(0x176)]=_0x1edd1b;}),_0x522531[_0x446bd4(0x125)]((_0x2ef619,_0x192da8)=>{var _0x674d10=_0x446bd4;_0x17db0e[_0x192da8][_0x674d10(0x17a)]=_0x2ef619;}),_0x28caef[_0x446bd4(0x125)]((_0x1e0f33,_0x107e14)=>{var _0x41a03d=_0x446bd4;_0x17db0e[_0x107e14][_0x41a03d(0x11a)]=_0x1e0f33;}),_0x26383d[_0x446bd4(0x125)]((_0x3c7c2e,_0x1d8466)=>{var _0x4d2065=_0x446bd4;_0x17db0e[_0x1d8466][_0x4d2065(0xc0)]=_0x3c7c2e;});const _0xf0ac52=_0x17db0e[_0x446bd4(0xda)](_0x5db8f3=>_0x5db8f3['to_quantity']!=='0'&&_0x5db8f3[_0x446bd4(0x17e)]!==''||_0x5db8f3[_0x446bd4(0x12a)]!=='0'&&_0x5db8f3[_0x446bd4(0x12a)]!=='');var _0x4da96d=0x0;_0xf0ac52[_0x446bd4(0x125)](_0x3e99d4=>{var _0x21bc68=_0x446bd4;parseInt(_0x3e99d4[_0x21bc68(0x15f)])<parseInt(_0x3e99d4[_0x21bc68(0x17e)])&&_0x4da96d++;});if(_0x4da96d!=0x0)return _0x2b120d['flash'](_0x446bd4(0xd8),_0x446bd4(0x175)),_0x16a203[_0x446bd4(0xf6)]('back');const _0x2bcfcd=await warehouse[_0x446bd4(0xff)]({'name':_0x45a3a7[_0x446bd4(0x151)],'room':_0x45a3a7['from_room']});_0x45a3a7[_0x446bd4(0xdd)][_0x446bd4(0x125)](_0x39ee94=>{var _0x50fee4=_0x446bd4;if(_0x39ee94[_0x50fee4(0x17e)]>0x0){const _0xc6175a=_0x2bcfcd[_0x50fee4(0x17c)][_0x50fee4(0x185)](_0x2c7807=>{var _0x543a28=_0x50fee4;_0x2c7807[_0x543a28(0xe4)]==_0x39ee94[_0x543a28(0xe4)]&&_0x2c7807[_0x543a28(0xe1)]==_0x39ee94[_0x543a28(0xf1)]&&(_0x2c7807[_0x543a28(0x169)]=parseInt(_0x2c7807['product_stock'])+parseInt(_0x39ee94[_0x543a28(0x17e)]));});}}),await _0x2bcfcd[_0x446bd4(0x161)]();const _0x2b6c85=await warehouse[_0x446bd4(0xff)]({'name':_0x45a3a7[_0x446bd4(0xe5)],'room':_0x45a3a7[_0x446bd4(0x177)]});_0x45a3a7[_0x446bd4(0xdd)]['forEach'](_0xa7dd57=>{var _0x4a4749=_0x446bd4;if(_0xa7dd57[_0x4a4749(0x17e)]>0x0){const _0x169bec=_0x2b6c85['product_details'][_0x4a4749(0x185)](_0x19bbf7=>{var _0x1ec6d5=_0x4a4749;_0x19bbf7['product_name']==_0xa7dd57[_0x1ec6d5(0xe4)]&&_0x19bbf7[_0x1ec6d5(0xe1)]==_0xa7dd57[_0x1ec6d5(0x164)]&&(_0x19bbf7['product_stock']=parseInt(_0x19bbf7[_0x1ec6d5(0x169)])-parseInt(_0xa7dd57[_0x1ec6d5(0x17e)]));});}}),await _0x2b6c85[_0x446bd4(0x161)](),_0x45a3a7[_0x446bd4(0x160)]=_0x332e8d,_0x45a3a7[_0x446bd4(0x151)]=_0x437f82,_0x45a3a7[_0x446bd4(0xe5)]=_0xa8f769,_0x45a3a7[_0x446bd4(0xdd)]=_0xf0ac52,_0x45a3a7[_0x446bd4(0xbf)]=_0x561455,_0x45a3a7['invoice']=_0x300186;const _0x2f8de6=await _0x45a3a7[_0x446bd4(0x161)](),_0x57bc65=await warehouse[_0x446bd4(0xff)]({'name':_0x437f82,'room':_0x129a37});_0x2f8de6[_0x446bd4(0xdd)]['forEach'](_0x4875b8=>{var _0x491539=_0x446bd4;if(_0x4875b8[_0x491539(0x17e)]>0x0){const _0x3188c2=_0x57bc65[_0x491539(0x17c)][_0x491539(0x185)](_0x448846=>{var _0x524b0d=_0x491539;_0x448846['product_name']==_0x4875b8[_0x524b0d(0xe4)]&&_0x448846['bay']==_0x4875b8[_0x524b0d(0xf1)]&&(_0x448846[_0x524b0d(0x169)]=parseInt(_0x448846[_0x524b0d(0x169)])-parseInt(_0x4875b8[_0x524b0d(0x17e)]));});}}),await _0x57bc65['save']();const _0x14d782=await warehouse[_0x446bd4(0xff)]({'name':_0xa8f769,'room':_0x53d5c8});_0x2f8de6['product'][_0x446bd4(0x125)](_0x3cfc5b=>{var _0x28e984=_0x446bd4;if(_0x3cfc5b['to_quantity']>0x0){var _0x3dc3d6=0x0;const _0x46fab8=_0x14d782[_0x28e984(0x17c)][_0x28e984(0x185)](_0x50a6a2=>{var _0x14f702=_0x28e984;_0x50a6a2[_0x14f702(0xe4)]==_0x3cfc5b['product_name']&&_0x50a6a2[_0x14f702(0xe1)]==_0x3cfc5b['to_bay']&&(_0x50a6a2[_0x14f702(0x169)]=parseInt(_0x50a6a2[_0x14f702(0x169)])+parseInt(_0x3cfc5b[_0x14f702(0x17e)]),_0x3dc3d6++);});_0x3dc3d6=='0'&&(_0x14d782[_0x28e984(0x17c)]=_0x14d782[_0x28e984(0x17c)][_0x28e984(0x147)]({'product_name':_0x3cfc5b[_0x28e984(0xe4)],'product_stock':_0x3cfc5b[_0x28e984(0x17e)],'bay':_0x3cfc5b[_0x28e984(0x164)],'product_code':_0x3cfc5b[_0x28e984(0xc6)],'primary_code':_0x3cfc5b[_0x28e984(0x108)],'secondary_code':_0x3cfc5b[_0x28e984(0xce)],'maxProducts':_0x3cfc5b[_0x28e984(0x13c)]}));}}),await _0x14d782[_0x446bd4(0x161)](),_0x2b120d['flash']('success',_0x446bd4(0x16e)),_0x16a203[_0x446bd4(0xf6)](_0x446bd4(0xc7));}catch(_0x1ea4ee){console['log'](_0x1ea4ee);}}),router['post']('/barcode_scanner',async(_0x13897d,_0x417452)=>{var _0x511c90=a0_0x5e2619;const {FromWareHouse:_0xfe675d,FromRoom:_0x737378,ToWarehouse:_0x5d50f4,ToRoom:_0x1a8710,primary_code:_0x2c935d,Roomslist:_0x577eb5}=_0x13897d[_0x511c90(0xd2)],_0x2f57ae=_0x577eb5['split'](','),_0x9228c4=[];async function _0x7ae854(_0x722bcb){var _0x206d5e=_0x511c90;const _0x588f3f=await warehouse[_0x206d5e(0x13f)]([{'$match':{'name':_0xfe675d,'room':_0x722bcb}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x2c935d}},{'$group':{'_id':_0x206d5e(0xcc),'name':{'$first':_0x206d5e(0xd4)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x206d5e(0xc4)},'product_code':{'$first':_0x206d5e(0x156)},'bay':{'$first':_0x206d5e(0xe2)},'level':{'$first':_0x206d5e(0x154)},'type':{'$first':_0x206d5e(0x104)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x206d5e(0x182)},'secondary_unit':{'$first':_0x206d5e(0xf9)},'storage':{'$first':_0x206d5e(0x15a)},'rack':{'$first':_0x206d5e(0x155)},'expiry_date':{'$first':_0x206d5e(0x128)},'production_date':{'$first':_0x206d5e(0x153)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x206d5e(0x12c)},'roomNamed':{'$first':'$room'},'prod_cat':{'$first':'P'},'invoice':{'$first':_0x206d5e(0x14e)}}}]),_0x2bf8ba=await warehouse[_0x206d5e(0x13f)]([{'$match':{'name':_0xfe675d,'room':_0x722bcb}},{'$unwind':_0x206d5e(0xcd)},{'$match':{'product_details.secondary_code':_0x2c935d}},{'$group':{'_id':_0x206d5e(0xcc),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x206d5e(0x14f)},'primary_code':{'$first':_0x206d5e(0x165)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x206d5e(0x156)},'bay':{'$first':'$product_details.bay'},'level':{'$first':_0x206d5e(0x154)},'type':{'$first':_0x206d5e(0x104)},'pallet':{'$first':_0x206d5e(0xc5)},'unit':{'$first':_0x206d5e(0x182)},'secondary_unit':{'$first':_0x206d5e(0xf9)},'storage':{'$first':_0x206d5e(0x15a)},'rack':{'$first':_0x206d5e(0x155)},'expiry_date':{'$first':_0x206d5e(0x128)},'production_date':{'$first':_0x206d5e(0x153)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'roomNamed':{'$first':_0x206d5e(0x14d)},'prod_cat':{'$first':'S'},'invoice':{'$first':'$product_details.invoice'}}}]);if(_0x588f3f[_0x206d5e(0xf0)]>0x0)_0x9228c4[_0x206d5e(0x12f)](_0x588f3f);else _0x2bf8ba['length']>0x0&&_0x9228c4['push'](_0x2bf8ba);}const _0x5a1efc=_0x2f57ae['map'](_0x56eab1=>_0x7ae854(_0x56eab1));await Promise[_0x511c90(0x127)](_0x5a1efc),_0x417452['json'](_0x9228c4);}),router[a0_0x5e2619(0x148)](a0_0x5e2619(0x145),async(_0x1fac0a,_0x51fd73)=>{var _0x5eb65c=a0_0x5e2619;const {productCode:_0x113c72,bay:_0x2b01e8,warehouses:_0x1c16af,room:_0x34b965}=_0x1fac0a[_0x5eb65c(0xd2)];console[_0x5eb65c(0x10e)](_0x1fac0a[_0x5eb65c(0xd2)]);try{const _0x3a1a0f=await warehouse['aggregate']([{'$match':{'name':_0x1c16af,'room':_0x34b965}},{'$unwind':'$product_details'},{'$match':{'product_details.bay':parseInt(_0x2b01e8)}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5eb65c(0xd4)},'product_stock':{'$first':_0x5eb65c(0x14f)},'bay':{'$first':_0x5eb65c(0xe2)},'maxProducts':{'$first':_0x5eb65c(0xe6)}}}]);_0x51fd73[_0x5eb65c(0xfa)](0xc8)['json'](_0x3a1a0f);}catch(_0x40dc20){_0x51fd73[_0x5eb65c(0xfa)](0x194)['json']({'message':_0x40dc20['message']});}}),module['exports']=router;