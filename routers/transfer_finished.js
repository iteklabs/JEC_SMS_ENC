function a0_0x2afd(){var _0x395bed=['errors','from_quantity','save','edit_transfer_finished','to_level','invoice_init','prod_cat','$product_details.expiry_date','$product.to_room_name','choos_transfer_logs','$product_details.unit','$product_details.floorlevel','transfer_data','unit','product_code3','express','warehouse','/transfer_finished/view','\x20<>\x20','Portuguese\x20(BR)','English','$product_details.invoice','language','id_transaction','product_date','product','$product_details.rack','forEach','from_prod_level','redirect','574490Hayiur','location2location','/view/choose_logs','_id','status','toString','from_warehouse','$product_details.bin','$finalize','own','German','/preview/:id','/barcode_scanner','/CheckingWarehouse','post','$_id','890653FzjSSH','get','Enabled','from_invoice','To\x20An\x20error\x20occurred\x20while\x20saving\x20data.','date','RoomAssigned','split','to_floorlevel','logs','$product_details','TRF-','invoice','$to_warehouse','/picking_list/PDF_transfer/','then','2NLdRzE','$room','string','params','Portuguese','product_name','Spanish','getFullYear','filter','slice','from_room_name','type_of_process','An\x20error\x20occurred\x20while\x20saving\x20data.','success','to_room_name','New_Qty_Converted','$product','from_prod_level2','finalize','ToRoomAssigned','$product_details.storage','expiry_date','$product_details.production_date','maxPerUnit','to_room','There\x27s\x20a\x20error\x20in\x20this\x20transaction','$product_details.primary_code','to_quantity','user','4343310kuWFGu','render','</tr>','/transfer_finished/preview/','Rack\x201','</td>','to_prod_qty','True','abs','length','436mFPlZA','match','secondary_code','transfer_finished','/view_logs','maxProducts','49195awaNEC','Hindi','1506159ccKiwy','production_date','primary_code','note','log','Router','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','prod_name','primary_unit','TRFF-','French','padStart','find','secondary_unit','MaxStocks_data','email','map','choos_transfer','$product_details.batch_code','message','back','bay','LOG-TRF-','48RQbTxU','<tr>','$date','../models/all_models','bin2bin','$product.from_room_name','41523280lfKXvL','An\x20error\x20occurred.','all','catch','transfer_finished_logs','from_room','role','$invoice','from_bay','body','flash','Finished\x20Goods','Rack\x202','getDate','Enclosed','/view','$product_details.product_code','/view/add_transfer_logs','MaxStocks_data2','Transfer\x20Edit\x20Successfully','max','$product_details.bay','$product_details.type','updateOne','Arabic\x20(ae)','$product_details._id','Product\x20Transfer\x20successfully','To_invoice','batch_code','aggregate','staff','to_warehouse','$name','from_level','../middleware/auth','/transfer/view','Arabic','exports','to_bay','$from_warehouse','edit_transfer_finished_view','$product_details.level','to_prod_level','$product_details.maxPerUnit','json','product_code','product_details','3568995lEgUtd','product_stock','add_transfer_finished','$product_details.secondary_code','$product_details.secondary_unit','/view/addlog','$product_details.product_name','English\x20(US)','floor','from_prod_qty','/view/add_transfer','Chinese','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','/view/:id','$product_details.product_stock','push','findOne','error','findById'];a0_0x2afd=function(){return _0x395bed;};return a0_0x2afd();}var a0_0x4ee114=a0_0x3ca8;(function(_0x454dc1,_0x5c8330){var _0x1486e6=a0_0x3ca8,_0x364e75=_0x454dc1();while(!![]){try{var _0xbfd641=parseInt(_0x1486e6(0x1dc))/0x1*(-parseInt(_0x1486e6(0x1ec))/0x2)+-parseInt(_0x1486e6(0x19b))/0x3+parseInt(_0x1486e6(0x213))/0x4*(-parseInt(_0x1486e6(0x219))/0x5)+parseInt(_0x1486e6(0x209))/0x6+-parseInt(_0x1486e6(0x1cc))/0x7+-parseInt(_0x1486e6(0x232))/0x8*(parseInt(_0x1486e6(0x21b))/0x9)+parseInt(_0x1486e6(0x238))/0xa;if(_0xbfd641===_0x5c8330)break;else _0x364e75['push'](_0x364e75['shift']());}catch(_0x5f1c6c){_0x364e75['push'](_0x364e75['shift']());}}}(a0_0x2afd,0x9b954));function a0_0x3ca8(_0x35c459,_0x13cfdc){var _0x2afdab=a0_0x2afd();return a0_0x3ca8=function(_0x3ca8ed,_0x3d7cc3){_0x3ca8ed=_0x3ca8ed-0x192;var _0x194113=_0x2afdab[_0x3ca8ed];return _0x194113;},a0_0x3ca8(_0x35c459,_0x13cfdc);}const express=require(a0_0x4ee114(0x1bd)),app=express(),router=express[a0_0x4ee114(0x220)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,transfers_finished,email_settings,supervisor_settings,invoice_for_transfer,transfers_logs}=require(a0_0x4ee114(0x235)),auth=require(a0_0x4ee114(0x25a)),users=require('../public/language/languages.json'),nodemailer=require('nodemailer');router[a0_0x4ee114(0x1dd)](a0_0x4ee114(0x247),auth,async(_0x4c4664,_0x5a8906)=>{var _0x39218e=a0_0x4ee114;try{const {username:_0x35039c,email:_0x60f29f,role:_0x510b4c}=_0x4c4664[_0x39218e(0x208)],_0x283764=_0x4c4664['user'],_0x141db2=await profile['findOne']({'email':_0x283764['email']}),_0x3836df=await master_shop[_0x39218e(0x227)]();let _0x2b3796;if(_0x283764[_0x39218e(0x23e)]==_0x39218e(0x256)){const _0x3420d1=await staff[_0x39218e(0x1ab)]({'email':_0x283764['email']});_0x2b3796=await transfers_finished[_0x39218e(0x227)]({'from_warehouse':_0x3420d1[_0x39218e(0x1be)]});}else _0x2b3796=await transfers_finished[_0x39218e(0x255)]([{'$match':{'type_of_transaction':'own'}},{'$unwind':_0x39218e(0x1fc)},{'$group':{'_id':_0x39218e(0x1db),'invoice':{'$first':_0x39218e(0x23f)},'date':{'$first':_0x39218e(0x234)},'from_warehouse':{'$first':_0x39218e(0x193)},'to_warehouse':{'$first':_0x39218e(0x1e9)},'from_room_name':{'$addToSet':_0x39218e(0x237)},'to_room_name':{'$addToSet':_0x39218e(0x1b6)},'finalize':{'$first':'$finalize'}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x3836df[0x0][_0x39218e(0x1c4)]==_0x39218e(0x1a2))var _0x21b3c5=users[_0x39218e(0x1c2)];else{if(_0x3836df[0x0][_0x39218e(0x1c4)]==_0x39218e(0x21a))var _0x21b3c5=users[_0x39218e(0x21a)];else{if(_0x3836df[0x0][_0x39218e(0x1c4)]==_0x39218e(0x1d6))var _0x21b3c5=users[_0x39218e(0x1d6)];else{if(_0x3836df[0x0][_0x39218e(0x1c4)]==_0x39218e(0x1f2))var _0x21b3c5=users[_0x39218e(0x1f2)];else{if(_0x3836df[0x0]['language']==_0x39218e(0x225))var _0x21b3c5=users[_0x39218e(0x225)];else{if(_0x3836df[0x0][_0x39218e(0x1c4)]==_0x39218e(0x1c1))var _0x21b3c5=users[_0x39218e(0x1f0)];else{if(_0x3836df[0x0]['language']==_0x39218e(0x1a6))var _0x21b3c5=users[_0x39218e(0x1a6)];else{if(_0x3836df[0x0][_0x39218e(0x1c4)]==_0x39218e(0x250))var _0x21b3c5=users[_0x39218e(0x25c)];}}}}}}}_0x5a8906[_0x39218e(0x20a)](_0x39218e(0x216),{'success':_0x4c4664[_0x39218e(0x242)]('success'),'errors':_0x4c4664[_0x39218e(0x242)]('errors'),'role':_0x283764,'profile':_0x141db2,'master_shop':_0x3836df,'transfer':_0x2b3796,'language':_0x21b3c5});}catch(_0x24dc0b){console[_0x39218e(0x21f)](_0x24dc0b);}}),router[a0_0x4ee114(0x1dd)](a0_0x4ee114(0x217),auth,async(_0x553e48,_0x3c2046)=>{var _0x80e075=a0_0x4ee114;try{const {username:_0xeabff4,email:_0x48bfbc,role:_0x18b8f5}=_0x553e48['user'],_0x11804d=_0x553e48[_0x80e075(0x208)],_0x3de69e=await profile['findOne']({'email':_0x11804d[_0x80e075(0x22a)]}),_0x49c073=await master_shop[_0x80e075(0x227)]();let _0x28718c;if(_0x11804d[_0x80e075(0x23e)]==_0x80e075(0x256)){const _0x17c10d=await staff[_0x80e075(0x1ab)]({'email':_0x11804d['email']});_0x28718c=await transfers_finished[_0x80e075(0x227)]({'from_warehouse':_0x17c10d[_0x80e075(0x1be)]});}else _0x28718c=await transfers_finished[_0x80e075(0x255)]([{'$match':{'type_of_transaction':_0x80e075(0x1e5)}},{'$unwind':_0x80e075(0x1fc)},{'$group':{'_id':_0x80e075(0x1db),'invoice':{'$first':_0x80e075(0x23f)},'date':{'$first':'$date'},'from_warehouse':{'$first':_0x80e075(0x193)},'to_warehouse':{'$first':_0x80e075(0x1e9)},'from_room_name':{'$addToSet':'$product.from_room_name'},'to_room_name':{'$addToSet':'$product.to_room_name'},'finalize':{'$first':_0x80e075(0x1d4)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x49c073[0x0]['language']==_0x80e075(0x1a2))var _0x144794=users['English'];else{if(_0x49c073[0x0][_0x80e075(0x1c4)]==_0x80e075(0x21a))var _0x144794=users[_0x80e075(0x21a)];else{if(_0x49c073[0x0][_0x80e075(0x1c4)]==_0x80e075(0x1d6))var _0x144794=users[_0x80e075(0x1d6)];else{if(_0x49c073[0x0][_0x80e075(0x1c4)]=='Spanish')var _0x144794=users[_0x80e075(0x1f2)];else{if(_0x49c073[0x0][_0x80e075(0x1c4)]==_0x80e075(0x225))var _0x144794=users['French'];else{if(_0x49c073[0x0][_0x80e075(0x1c4)]==_0x80e075(0x1c1))var _0x144794=users[_0x80e075(0x1f0)];else{if(_0x49c073[0x0]['language']==_0x80e075(0x1a6))var _0x144794=users[_0x80e075(0x1a6)];else{if(_0x49c073[0x0][_0x80e075(0x1c4)]==_0x80e075(0x250))var _0x144794=users[_0x80e075(0x25c)];}}}}}}}_0x3c2046[_0x80e075(0x20a)](_0x80e075(0x23c),{'success':_0x553e48[_0x80e075(0x242)](_0x80e075(0x1f9)),'errors':_0x553e48[_0x80e075(0x242)](_0x80e075(0x1ae)),'role':_0x11804d,'profile':_0x3de69e,'master_shop':_0x49c073,'transfer':_0x28718c,'language':_0x144794});}catch(_0x40253f){console[_0x80e075(0x21f)](_0x40253f);}});async function getRandom8DigitNumber(){var _0x248fe9=a0_0x4ee114;const _0x1e5387=0x989680,_0x514444=0x5f5e0ff,_0x15fd9b=Math[_0x248fe9(0x1a3)](Math['random']()*(_0x514444-_0x1e5387+0x1))+_0x1e5387;var _0x50ee7d;const _0x4b2bf2=await transfers_finished[_0x248fe9(0x1ab)]({'invoice':_0x248fe9(0x224)+_0x15fd9b});return _0x4b2bf2&&_0x4b2bf2[_0x248fe9(0x212)]>0x0?_0x50ee7d=_0x248fe9(0x224)+_0x15fd9b:_0x50ee7d=_0x248fe9(0x224)+_0x15fd9b,_0x50ee7d;}router['get'](a0_0x4ee114(0x1a5),auth,async(_0x4156c9,_0x26bed6)=>{var _0x5096f7=a0_0x4ee114;try{const {username:_0x3e30ae,email:_0x90b0d,role:_0x29e5b8}=_0x4156c9['user'],_0x1fdd7=_0x4156c9[_0x5096f7(0x208)],_0x12cfff=await profile[_0x5096f7(0x1ab)]({'email':_0x1fdd7[_0x5096f7(0x22a)]}),_0x1aaa62=await master_shop[_0x5096f7(0x227)]();let _0x449123;if(_0x1fdd7[_0x5096f7(0x23e)]==_0x5096f7(0x256)){const _0x508b04=await staff[_0x5096f7(0x1ab)]({'email':_0x1fdd7[_0x5096f7(0x22a)]});_0x449123=await warehouse[_0x5096f7(0x255)]([{'$match':{'status':_0x5096f7(0x1de),'name':_0x508b04[_0x5096f7(0x1be)]}},{'$group':{'_id':_0x5096f7(0x258),'name':{'$first':_0x5096f7(0x258)}}}]);}else _0x449123=await warehouse[_0x5096f7(0x255)]([{'$match':{'status':_0x5096f7(0x1de)}},{'$group':{'_id':_0x5096f7(0x258),'name':{'$first':'$name'}}}]);const _0x2a733a=await transfers_finished[_0x5096f7(0x227)]({}),_0x30b199=_0x2a733a[_0x5096f7(0x212)]+0x1,_0x41358d=_0x5096f7(0x224)+_0x30b199[_0x5096f7(0x1d1)]()['padStart'](0x5,'0');if(_0x1aaa62[0x0]['language']==_0x5096f7(0x1a2))var _0x20fe51=users['English'];else{if(_0x1aaa62[0x0][_0x5096f7(0x1c4)]=='Hindi')var _0x20fe51=users[_0x5096f7(0x21a)];else{if(_0x1aaa62[0x0][_0x5096f7(0x1c4)]=='German')var _0x20fe51=users[_0x5096f7(0x1d6)];else{if(_0x1aaa62[0x0][_0x5096f7(0x1c4)]==_0x5096f7(0x1f2))var _0x20fe51=users[_0x5096f7(0x1f2)];else{if(_0x1aaa62[0x0][_0x5096f7(0x1c4)]==_0x5096f7(0x225))var _0x20fe51=users[_0x5096f7(0x225)];else{if(_0x1aaa62[0x0][_0x5096f7(0x1c4)]==_0x5096f7(0x1c1))var _0x20fe51=users[_0x5096f7(0x1f0)];else{if(_0x1aaa62[0x0][_0x5096f7(0x1c4)]==_0x5096f7(0x1a6))var _0x20fe51=users['Chinese'];else{if(_0x1aaa62[0x0][_0x5096f7(0x1c4)]==_0x5096f7(0x250))var _0x20fe51=users['Arabic'];}}}}}}}const _0x5e6794=getRandom8DigitNumber();_0x5e6794[_0x5096f7(0x1eb)](_0x48cb65=>{var _0x2dc19e=_0x5096f7;_0x26bed6[_0x2dc19e(0x20a)](_0x2dc19e(0x19d),{'success':_0x4156c9['flash']('success'),'errors':_0x4156c9[_0x2dc19e(0x242)]('errors'),'role':_0x1fdd7,'profile':_0x12cfff,'master_shop':_0x1aaa62,'warehouse':_0x449123,'language':_0x20fe51,'invoice':_0x48cb65});})['catch'](_0x124b63=>{var _0x4d20fb=_0x5096f7;_0x4156c9[_0x4d20fb(0x242)](_0x4d20fb(0x1ae),_0x4d20fb(0x205)),_0x26bed6['redirect']('/transfer/view');});}catch(_0x4991b3){console[_0x5096f7(0x21f)](_0x4991b3);}}),router[a0_0x4ee114(0x1dd)]('/view/choose',auth,async(_0x29c8b6,_0x25bfa3)=>{var _0x2cd394=a0_0x4ee114;try{const {username:_0x457336,email:_0x578057,role:_0xf1b2f8}=_0x29c8b6[_0x2cd394(0x208)],_0x1d6cf1=_0x29c8b6[_0x2cd394(0x208)],_0x85be79=await profile[_0x2cd394(0x1ab)]({'email':_0x1d6cf1['email']}),_0x61a890=await master_shop['find']();let _0x291ff6;if(_0x1d6cf1[_0x2cd394(0x23e)]==_0x2cd394(0x256)){const _0x573bb6=await staff[_0x2cd394(0x1ab)]({'email':_0x1d6cf1[_0x2cd394(0x22a)]});_0x291ff6=await warehouse[_0x2cd394(0x255)]([{'$match':{'status':_0x2cd394(0x1de),'name':_0x573bb6[_0x2cd394(0x1be)]}},{'$group':{'_id':_0x2cd394(0x258),'name':{'$first':_0x2cd394(0x258)}}}]);}else _0x291ff6=await warehouse[_0x2cd394(0x255)]([{'$match':{'status':_0x2cd394(0x1de)}},{'$group':{'_id':_0x2cd394(0x258),'name':{'$first':_0x2cd394(0x258)}}}]);const _0x52cc13=await transfers_finished['find']({}),_0x5c64cb=_0x52cc13['length']+0x1,_0x111d53=_0x2cd394(0x224)+_0x5c64cb[_0x2cd394(0x1d1)]()[_0x2cd394(0x226)](0x5,'0');if(_0x61a890[0x0][_0x2cd394(0x1c4)]==_0x2cd394(0x1a2))var _0x515297=users[_0x2cd394(0x1c2)];else{if(_0x61a890[0x0][_0x2cd394(0x1c4)]==_0x2cd394(0x21a))var _0x515297=users[_0x2cd394(0x21a)];else{if(_0x61a890[0x0][_0x2cd394(0x1c4)]==_0x2cd394(0x1d6))var _0x515297=users[_0x2cd394(0x1d6)];else{if(_0x61a890[0x0]['language']==_0x2cd394(0x1f2))var _0x515297=users[_0x2cd394(0x1f2)];else{if(_0x61a890[0x0]['language']==_0x2cd394(0x225))var _0x515297=users[_0x2cd394(0x225)];else{if(_0x61a890[0x0][_0x2cd394(0x1c4)]==_0x2cd394(0x1c1))var _0x515297=users[_0x2cd394(0x1f0)];else{if(_0x61a890[0x0]['language']==_0x2cd394(0x1a6))var _0x515297=users[_0x2cd394(0x1a6)];else{if(_0x61a890[0x0]['language']==_0x2cd394(0x250))var _0x515297=users[_0x2cd394(0x25c)];}}}}}}}const _0x3b4f68=getRandom8DigitNumber();_0x3b4f68[_0x2cd394(0x1eb)](_0x1c062a=>{var _0xfbe485=_0x2cd394;_0x25bfa3[_0xfbe485(0x20a)](_0xfbe485(0x22c),{'success':_0x29c8b6[_0xfbe485(0x242)](_0xfbe485(0x1f9)),'errors':_0x29c8b6[_0xfbe485(0x242)](_0xfbe485(0x1ae)),'role':_0x1d6cf1,'profile':_0x85be79,'master_shop':_0x61a890,'warehouse':_0x291ff6,'language':_0x515297,'invoice':_0x1c062a});})['catch'](_0x20e34c=>{var _0xcad976=_0x2cd394;_0x29c8b6[_0xcad976(0x242)](_0xcad976(0x1ae),_0xcad976(0x205)),_0x25bfa3[_0xcad976(0x1cb)](_0xcad976(0x25b));});}catch(_0x359c35){console['log'](_0x359c35);}}),router['get'](a0_0x4ee114(0x1ce),auth,async(_0x3ebf88,_0x37aaa4)=>{var _0x1cf462=a0_0x4ee114;try{const {username:_0x4c9c62,email:_0x594380,role:_0x3ca597}=_0x3ebf88['user'],_0x556439=_0x3ebf88[_0x1cf462(0x208)],_0x52feeb=await profile[_0x1cf462(0x1ab)]({'email':_0x556439['email']}),_0x4ac135=await master_shop['find']();let _0x42c122;if(_0x556439[_0x1cf462(0x23e)]=='staff'){const _0x2c43e6=await staff[_0x1cf462(0x1ab)]({'email':_0x556439[_0x1cf462(0x22a)]});_0x42c122=await warehouse[_0x1cf462(0x255)]([{'$match':{'status':_0x1cf462(0x1de),'name':_0x2c43e6[_0x1cf462(0x1be)]}},{'$group':{'_id':'$name','name':{'$first':_0x1cf462(0x258)}}}]);}else _0x42c122=await warehouse['aggregate']([{'$match':{'status':_0x1cf462(0x1de)}},{'$group':{'_id':_0x1cf462(0x258),'name':{'$first':'$name'}}}]);const _0x5e3669=await transfers_finished['find']({}),_0x1d0a8f=_0x5e3669[_0x1cf462(0x212)]+0x1,_0x4c79c3=_0x1cf462(0x224)+_0x1d0a8f[_0x1cf462(0x1d1)]()[_0x1cf462(0x226)](0x5,'0');if(_0x4ac135[0x0][_0x1cf462(0x1c4)]==_0x1cf462(0x1a2))var _0x39f45c=users[_0x1cf462(0x1c2)];else{if(_0x4ac135[0x0][_0x1cf462(0x1c4)]==_0x1cf462(0x21a))var _0x39f45c=users[_0x1cf462(0x21a)];else{if(_0x4ac135[0x0][_0x1cf462(0x1c4)]=='German')var _0x39f45c=users[_0x1cf462(0x1d6)];else{if(_0x4ac135[0x0][_0x1cf462(0x1c4)]=='Spanish')var _0x39f45c=users[_0x1cf462(0x1f2)];else{if(_0x4ac135[0x0][_0x1cf462(0x1c4)]==_0x1cf462(0x225))var _0x39f45c=users[_0x1cf462(0x225)];else{if(_0x4ac135[0x0][_0x1cf462(0x1c4)]==_0x1cf462(0x1c1))var _0x39f45c=users[_0x1cf462(0x1f0)];else{if(_0x4ac135[0x0][_0x1cf462(0x1c4)]==_0x1cf462(0x1a6))var _0x39f45c=users[_0x1cf462(0x1a6)];else{if(_0x4ac135[0x0][_0x1cf462(0x1c4)]==_0x1cf462(0x250))var _0x39f45c=users[_0x1cf462(0x25c)];}}}}}}}const _0x25dee1=getRandom8DigitNumber();_0x25dee1[_0x1cf462(0x1eb)](_0x575783=>{var _0x1f8068=_0x1cf462;_0x37aaa4[_0x1f8068(0x20a)](_0x1f8068(0x1b7),{'success':_0x3ebf88[_0x1f8068(0x242)](_0x1f8068(0x1f9)),'errors':_0x3ebf88['flash'](_0x1f8068(0x1ae)),'role':_0x556439,'profile':_0x52feeb,'master_shop':_0x4ac135,'warehouse':_0x42c122,'language':_0x39f45c,'invoice':_0x575783});})['catch'](_0x4f09a8=>{var _0x3e549e=_0x1cf462;_0x3ebf88[_0x3e549e(0x242)](_0x3e549e(0x1ae),_0x3e549e(0x205)),_0x37aaa4['redirect'](_0x3e549e(0x25b));});}catch(_0x267a3e){console[_0x1cf462(0x21f)](_0x267a3e);}}),router['post'](a0_0x4ee114(0x249),auth,async(_0x340c01,_0x5c921f)=>{var _0x19f78b=a0_0x4ee114;try{const {date:_0x5eb5f2,from_warehouse:_0xc1f4c0,FromRoom_name:_0x1f23f4,to_warehouse:_0xa1c8ae,ToRoom_name:_0x2e3130,prod_name:_0x49f5d9,from_prod_qty:_0x10cbd6,from_prod_level:_0x34ebf1,from_prod_isle:_0xd9f83d,from_prod_pallet:_0x5abef7,to_prod_qty:_0x2e2d94,to_prod_level:_0x525d02,to_prod_isle:_0x295bd7,to_prod_pallet:_0x551594,primary_code:_0x2c2d5a,secondary_code:_0x40dbea,product_code3:_0x1ae1c0,note:_0x4df7e0,MaxStocks_data2:_0x4f3265,invoice:_0xd332a2,expiry_date:_0xa6ecf5,PO_number:_0x47ef21,ReqBy:_0xe484aa,dateofreq:_0x2ff96f,typeservicesData:_0x578e70,destination:_0xf80fde,deliverydate:_0x46fccc,driver:_0x12404a,plate:_0x4569ed,van:_0x414ea0,DRSI:_0x4f4bac,typevehicle:_0x2d6e2f,TSU:_0x31b9b1,TFU:_0x4017b9}=_0x340c01[_0x19f78b(0x241)];if(typeof _0x49f5d9=='string')var _0x548000=[_0x340c01['body'][_0x19f78b(0x222)]],_0x222765=[_0x340c01[_0x19f78b(0x241)][_0x19f78b(0x1a4)]],_0x2565fe=[_0x340c01['body'][_0x19f78b(0x1fd)]],_0x5e96a5=[_0x340c01['body'][_0x19f78b(0x1fb)]],_0x5a28ac=[_0x340c01['body']['to_prod_level']],_0x161c83=[_0x340c01[_0x19f78b(0x241)][_0x19f78b(0x21d)]],_0x53bc62=[_0x340c01['body'][_0x19f78b(0x215)]],_0xd30e94=[_0x340c01['body'][_0x19f78b(0x1bc)]],_0x3ae216=[_0x340c01[_0x19f78b(0x241)][_0x19f78b(0x24a)]],_0xbed047=[_0x340c01[_0x19f78b(0x241)][_0x19f78b(0x223)]],_0x225d9a=[_0x340c01[_0x19f78b(0x241)][_0x19f78b(0x228)]],_0x1ebc5f=[_0x340c01[_0x19f78b(0x241)][_0x19f78b(0x254)]],_0x2173d5=[_0x340c01[_0x19f78b(0x241)][_0x19f78b(0x201)]],_0x4997a5=[_0x340c01[_0x19f78b(0x241)][_0x19f78b(0x1c6)]],_0x2657e1=[_0x340c01[_0x19f78b(0x241)][_0x19f78b(0x229)]],_0x3c5803=[_0x340c01[_0x19f78b(0x241)][_0x19f78b(0x203)]],_0x1b27b3=[_0x340c01['body'][_0x19f78b(0x1b4)]],_0x1db01c=[_0x340c01[_0x19f78b(0x241)][_0x19f78b(0x1e2)]],_0x1aea15=[_0x340c01['body']['ToRoomAssigned']],_0x19f8ce=[_0x340c01['body'][_0x19f78b(0x1df)]],_0x771fe2=[_0x340c01[_0x19f78b(0x241)]['id_transaction']];else var _0x548000=[..._0x340c01['body'][_0x19f78b(0x222)]],_0x222765=[..._0x340c01[_0x19f78b(0x241)][_0x19f78b(0x1a4)]],_0x2565fe=[..._0x340c01['body'][_0x19f78b(0x1fd)]],_0x5e96a5=[..._0x340c01[_0x19f78b(0x241)][_0x19f78b(0x1fb)]],_0x5a28ac=[..._0x340c01[_0x19f78b(0x241)][_0x19f78b(0x196)]],_0x161c83=[..._0x340c01[_0x19f78b(0x241)][_0x19f78b(0x21d)]],_0x53bc62=[..._0x340c01[_0x19f78b(0x241)][_0x19f78b(0x215)]],_0xd30e94=[..._0x340c01[_0x19f78b(0x241)][_0x19f78b(0x1bc)]],_0x3ae216=[..._0x340c01[_0x19f78b(0x241)]['MaxStocks_data2']],_0xbed047=[..._0x340c01[_0x19f78b(0x241)]['primary_unit']],_0x225d9a=[..._0x340c01[_0x19f78b(0x241)][_0x19f78b(0x228)]],_0x1ebc5f=[..._0x340c01[_0x19f78b(0x241)][_0x19f78b(0x254)]],_0x2173d5=[..._0x340c01[_0x19f78b(0x241)][_0x19f78b(0x201)]],_0x4997a5=[..._0x340c01['body'][_0x19f78b(0x1c6)]],_0x2657e1=[..._0x340c01['body'][_0x19f78b(0x229)]],_0x3c5803=[..._0x340c01[_0x19f78b(0x241)][_0x19f78b(0x203)]],_0x1b27b3=[..._0x340c01[_0x19f78b(0x241)]['prod_cat']],_0x1db01c=[..._0x340c01[_0x19f78b(0x241)][_0x19f78b(0x1e2)]],_0x1aea15=[..._0x340c01['body'][_0x19f78b(0x1ff)]],_0x19f8ce=[..._0x340c01[_0x19f78b(0x241)]['from_invoice']],_0x771fe2=[..._0x340c01[_0x19f78b(0x241)]['id_transaction']];const _0xbbfcce=_0x548000[_0x19f78b(0x22b)](_0x3a03fb=>{return _0x3a03fb={'product_name':_0x3a03fb};});_0x222765[_0x19f78b(0x1c9)]((_0x241096,_0x266bc6)=>{_0xbbfcce[_0x266bc6]['from_quantity']=_0x241096;}),_0x2565fe[_0x19f78b(0x1c9)]((_0x436239,_0x559a93)=>{var _0x3c41a0=_0x19f78b,_0x1524a6=_0x436239['match'](/[A-Za-z]+/)[0x0],_0x45f700=parseInt(_0x436239[_0x3c41a0(0x214)](/\d+/)[0x0]);_0xbbfcce[_0x559a93][_0x3c41a0(0x240)]=_0x45f700,_0xbbfcce[_0x559a93][_0x3c41a0(0x259)]=_0x1524a6;}),_0x771fe2[_0x19f78b(0x1c9)]((_0x1d818e,_0xe5fa1a)=>{var _0x15d7b8=_0x19f78b;_0xbbfcce[_0xe5fa1a][_0x15d7b8(0x1c5)]=_0x1d818e;}),_0x19f8ce[_0x19f78b(0x1c9)]((_0x4ff8a3,_0x2f8860)=>{var _0x35e2c4=_0x19f78b;_0xbbfcce[_0x2f8860][_0x35e2c4(0x1df)]=_0x4ff8a3;}),_0x5e96a5[_0x19f78b(0x1c9)]((_0x4e97ad,_0xb700e4)=>{_0xbbfcce[_0xb700e4]['to_quantity']=_0x4e97ad;}),_0x5a28ac[_0x19f78b(0x1c9)]((_0x5ab4b3,_0x377d86)=>{var _0x1011a2=_0x19f78b,_0x46fb6a=_0x5ab4b3[_0x1011a2(0x214)](/[A-Za-z]+/)[0x0],_0xf6cd24=parseInt(_0x5ab4b3[_0x1011a2(0x214)](/\d+/)[0x0]);_0xbbfcce[_0x377d86]['to_level']=_0x46fb6a,_0xbbfcce[_0x377d86]['to_bay']=_0xf6cd24;}),_0x161c83[_0x19f78b(0x1c9)]((_0x2ee41a,_0x14e6a3)=>{var _0x258196=_0x19f78b;_0xbbfcce[_0x14e6a3][_0x258196(0x21d)]=_0x2ee41a;}),_0x53bc62[_0x19f78b(0x1c9)]((_0x5de965,_0x59209e)=>{var _0x31eb78=_0x19f78b;_0xbbfcce[_0x59209e][_0x31eb78(0x215)]=_0x5de965;}),_0xd30e94['forEach']((_0x56e8ca,_0x172e78)=>{var _0x723952=_0x19f78b;_0xbbfcce[_0x172e78][_0x723952(0x199)]=_0x56e8ca;}),_0x3ae216['forEach']((_0x17fba8,_0xbf54a1)=>{var _0x497c89=_0x19f78b;_0xbbfcce[_0xbf54a1][_0x497c89(0x218)]=_0x17fba8;}),_0xbed047[_0x19f78b(0x1c9)]((_0x20eb4e,_0x4f5220)=>{var _0x474f95=_0x19f78b;_0xbbfcce[_0x4f5220][_0x474f95(0x1bb)]=_0x20eb4e;}),_0x225d9a[_0x19f78b(0x1c9)]((_0x4464f4,_0x5b3315)=>{var _0x52bd82=_0x19f78b;_0xbbfcce[_0x5b3315][_0x52bd82(0x228)]=_0x4464f4;}),_0x1ebc5f[_0x19f78b(0x1c9)]((_0xcee637,_0x2783c0)=>{var _0x1d5159=_0x19f78b;_0xbbfcce[_0x2783c0][_0x1d5159(0x254)]=_0xcee637;}),_0x2173d5[_0x19f78b(0x1c9)]((_0x3ebc94,_0x30c06e)=>{_0xbbfcce[_0x30c06e]['expiry_date']=_0x3ebc94;}),_0x4997a5[_0x19f78b(0x1c9)]((_0x172206,_0x11b022)=>{var _0x428896=_0x19f78b;_0xbbfcce[_0x11b022][_0x428896(0x21c)]=_0x172206;}),_0x2657e1['forEach']((_0x929d4,_0x5c8688)=>{var _0x481507=_0x19f78b;_0xbbfcce[_0x5c8688][_0x481507(0x218)]=_0x929d4;}),_0x3c5803['forEach']((_0x180635,_0x1c1fcf)=>{var _0x4d2775=_0x19f78b;_0xbbfcce[_0x1c1fcf][_0x4d2775(0x203)]=_0x180635;}),_0x1b27b3[_0x19f78b(0x1c9)]((_0x5f522c,_0x3511d3)=>{_0xbbfcce[_0x3511d3]['prod_cat']=_0x5f522c;}),_0x1db01c['forEach']((_0x4f2466,_0xa3452c)=>{_0xbbfcce[_0xa3452c]['from_room_name']=_0x4f2466;}),_0x1aea15[_0x19f78b(0x1c9)]((_0x1c6b83,_0xa97d3)=>{var _0x4f0d9f=_0x19f78b;_0xbbfcce[_0xa97d3][_0x4f0d9f(0x1fa)]=_0x1c6b83;});const _0x1ab155=_0xbbfcce['filter'](_0x79a61b=>_0x79a61b[_0x19f78b(0x207)]!=='0'&&_0x79a61b['to_quantity']!==''||_0x79a61b[_0x19f78b(0x1e4)]!=='0'&&_0x79a61b[_0x19f78b(0x1e4)]!=='');var _0xeaeb1f=0x0;_0x1ab155[_0x19f78b(0x1c9)](_0x13e5f4=>{var _0x1e33ac=_0x19f78b;parseInt(_0x13e5f4[_0x1e33ac(0x1af)])<parseInt(_0x13e5f4[_0x1e33ac(0x207)])&&_0xeaeb1f++;});if(_0xeaeb1f!=0x0)return _0x340c01['flash'](_0x19f78b(0x1ae),_0x19f78b(0x1a7)),_0x5c921f[_0x19f78b(0x1cb)](_0x19f78b(0x22f));const _0x493136=new transfers_logs();await _0x493136[_0x19f78b(0x1b0)]();for(let _0x2c4eef=0x0;_0x2c4eef<=_0x1aea15[_0x19f78b(0x212)]-0x1;_0x2c4eef++){_0xbbfcce[_0x2c4eef][_0x19f78b(0x253)]=_0x19f78b(0x231)+_0x493136[_0x19f78b(0x1b3)][_0x19f78b(0x1d1)]()[_0x19f78b(0x226)](0x8,'0');}const _0x18ed12=new transfers_finished({'date':_0x5eb5f2,'from_warehouse':_0xc1f4c0,'to_warehouse':_0xc1f4c0,'product':_0x1ab155,'note':_0x4df7e0,'invoice':_0x19f78b(0x231)+_0x493136[_0x19f78b(0x1b3)][_0x19f78b(0x1d1)]()[_0x19f78b(0x226)](0x8,'0'),'type_of_process':_0x19f78b(0x236),'type_of_transaction':_0x19f78b(0x1e5),'PO_number':_0x47ef21,'RequestedBy':_0xe484aa,'DateofRequest':_0x2ff96f,'typeservices':_0x578e70,'destination':_0xf80fde,'deliverydate':_0x46fccc,'driver':_0x12404a,'plate':_0x4569ed,'van':_0x414ea0,'DRSI':_0x4f4bac,'typevehicle':_0x2d6e2f,'TSU':_0x31b9b1,'TFU':_0x4017b9}),_0x9b9f74=await _0x18ed12[_0x19f78b(0x1b0)]();_0x340c01['flash'](_0x19f78b(0x1f9),_0x19f78b(0x252)),_0x5c921f[_0x19f78b(0x1cb)](_0x19f78b(0x20c)+_0x9b9f74[_0x19f78b(0x1cf)]);}catch(_0x1fd15a){console[_0x19f78b(0x21f)](_0x1fd15a),_0x5c921f['status'](0xc8)['json']({'errorMessage':_0x1fd15a[_0x19f78b(0x22e)]});}}),router[a0_0x4ee114(0x1da)](a0_0x4ee114(0x1a0),auth,async(_0x246c80,_0x4a5a62)=>{var _0x4259c6=a0_0x4ee114;try{const {date:_0x647ee,from_warehouse:_0x4e35e2,FromRoom_name:_0x55d8bf,to_warehouse:_0x2efff6,ToRoom_name:_0x17b200,prod_name:_0x3cb4cc,from_prod_qty:_0x3de3bf,from_prod_level:_0x3e852a,from_prod_isle:_0x106596,from_prod_pallet:_0x21c7df,to_prod_qty:_0x76aec4,to_prod_level:_0x9ee1ea,to_prod_isle:_0x28ef48,to_prod_pallet:_0x46829c,primary_code:_0x3f93bc,secondary_code:_0x1e1381,product_code3:_0x2a584a,note:_0x17fd09,MaxStocks_data2:_0x1b67de,invoice:_0x561029,expiry_date:_0x531008,PO_number_loc:_0x39fbcb,ReqBy_loc:_0x31b474,dateofreq_loc:_0x2717a2,typeservices_loc_Data:_0x3bf4ad,destination_loc:_0x22ff51,deliverydate_loc:_0x5a60bc,driver_loc:_0x3c3d00,plate_loc:_0x105ec7,van_loc:_0xce883,DRSI_loc:_0x1e942d,typevehicle_loc:_0x5ea847,TSU_loc:_0x3f45f2,TFU_loc:_0x495bff}=_0x246c80[_0x4259c6(0x241)];if(typeof _0x3cb4cc==_0x4259c6(0x1ee))var _0x2c6230=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x222)]],_0x50752d=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1a4)]],_0x28d48b=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1fd)]],_0x28cc83=[_0x246c80[_0x4259c6(0x241)]['New_Qty_Converted']],_0x41fcdb=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x196)]],_0x20b680=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x21d)]],_0x2b0dd2=[_0x246c80[_0x4259c6(0x241)]['secondary_code']],_0x23fc66=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1bc)]],_0x1e7432=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x24a)]],_0x29d4e0=[_0x246c80['body']['primary_unit']],_0x3d74e6=[_0x246c80[_0x4259c6(0x241)]['secondary_unit']],_0x268f71=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x254)]],_0x2aa146=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x201)]],_0x246d3f=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1c6)]],_0x236131=[_0x246c80['body']['MaxStocks_data']],_0x499a53=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x203)]],_0x2424f7=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1b4)]],_0x2dbd19=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1e2)]],_0x1a0ffe=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1ff)]],_0x227e8f=[_0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1df)]],_0x1826cd=[_0x246c80['body'][_0x4259c6(0x1c5)]];else var _0x2c6230=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x222)]],_0x50752d=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1a4)]],_0x28d48b=[..._0x246c80['body'][_0x4259c6(0x1fd)]],_0x28cc83=[..._0x246c80['body']['New_Qty_Converted']],_0x41fcdb=[..._0x246c80[_0x4259c6(0x241)]['to_prod_level']],_0x20b680=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x21d)]],_0x2b0dd2=[..._0x246c80['body'][_0x4259c6(0x215)]],_0x23fc66=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1bc)]],_0x1e7432=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x24a)]],_0x29d4e0=[..._0x246c80['body'][_0x4259c6(0x223)]],_0x3d74e6=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x228)]],_0x268f71=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x254)]],_0x2aa146=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x201)]],_0x246d3f=[..._0x246c80[_0x4259c6(0x241)]['product_date']],_0x236131=[..._0x246c80['body'][_0x4259c6(0x229)]],_0x499a53=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x203)]],_0x2424f7=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1b4)]],_0x2dbd19=[..._0x246c80['body'][_0x4259c6(0x1e2)]],_0x1a0ffe=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1ff)]],_0x227e8f=[..._0x246c80[_0x4259c6(0x241)]['from_invoice']],_0x1826cd=[..._0x246c80[_0x4259c6(0x241)][_0x4259c6(0x1c5)]];const _0x3c578a=_0x2c6230['map'](_0x21b888=>{return _0x21b888={'product_name':_0x21b888};});_0x50752d[_0x4259c6(0x1c9)]((_0x3660de,_0x227c50)=>{var _0x77a1cf=_0x4259c6;_0x3c578a[_0x227c50][_0x77a1cf(0x1af)]=_0x3660de;}),_0x28d48b[_0x4259c6(0x1c9)]((_0x658bc2,_0x490fe6)=>{var _0x263bad=_0x4259c6,_0x323ec4=_0x658bc2[_0x263bad(0x214)](/[A-Za-z]+/)[0x0],_0x4efc9a=parseInt(_0x658bc2['match'](/\d+/)[0x0]);_0x3c578a[_0x490fe6][_0x263bad(0x240)]=_0x4efc9a,_0x3c578a[_0x490fe6][_0x263bad(0x259)]=_0x323ec4;}),_0x1826cd[_0x4259c6(0x1c9)]((_0x5d0817,_0x4848d2)=>{var _0x3b493a=_0x4259c6;_0x3c578a[_0x4848d2][_0x3b493a(0x1c5)]=_0x5d0817;}),_0x227e8f[_0x4259c6(0x1c9)]((_0x340844,_0x2f214d)=>{_0x3c578a[_0x2f214d]['from_invoice']=_0x340844;}),_0x28cc83[_0x4259c6(0x1c9)]((_0x1e88b8,_0x4dab7f)=>{var _0x242854=_0x4259c6;_0x3c578a[_0x4dab7f][_0x242854(0x207)]=_0x1e88b8;}),_0x41fcdb['forEach']((_0x473d40,_0x5610d1)=>{var _0x552f92=_0x4259c6,_0x43f85d=_0x473d40[_0x552f92(0x214)](/[A-Za-z]+/)[0x0],_0x3d95d6=parseInt(_0x473d40[_0x552f92(0x214)](/\d+/)[0x0]);_0x3c578a[_0x5610d1][_0x552f92(0x1b2)]=_0x43f85d,_0x3c578a[_0x5610d1][_0x552f92(0x192)]=_0x3d95d6;}),_0x20b680[_0x4259c6(0x1c9)]((_0x4c0712,_0x18082a)=>{var _0x2d0816=_0x4259c6;_0x3c578a[_0x18082a][_0x2d0816(0x21d)]=_0x4c0712;}),_0x2b0dd2['forEach']((_0xd6f35,_0x4212cc)=>{_0x3c578a[_0x4212cc]['secondary_code']=_0xd6f35;}),_0x23fc66[_0x4259c6(0x1c9)]((_0x1a0578,_0x3fd0e0)=>{var _0x2fc09e=_0x4259c6;_0x3c578a[_0x3fd0e0][_0x2fc09e(0x199)]=_0x1a0578;}),_0x1e7432['forEach']((_0x515eb3,_0x354045)=>{var _0x3b17c8=_0x4259c6;_0x3c578a[_0x354045][_0x3b17c8(0x218)]=_0x515eb3;}),_0x29d4e0['forEach']((_0x30be52,_0x43fb98)=>{_0x3c578a[_0x43fb98]['unit']=_0x30be52;}),_0x3d74e6[_0x4259c6(0x1c9)]((_0x51ada9,_0x289f3b)=>{var _0x3f5d25=_0x4259c6;_0x3c578a[_0x289f3b][_0x3f5d25(0x228)]=_0x51ada9;}),_0x268f71[_0x4259c6(0x1c9)]((_0x20829a,_0x14daae)=>{var _0x1a3893=_0x4259c6;_0x3c578a[_0x14daae][_0x1a3893(0x254)]=_0x20829a;}),_0x2aa146['forEach']((_0x303253,_0xcf739c)=>{var _0x3c9192=_0x4259c6;_0x3c578a[_0xcf739c][_0x3c9192(0x201)]=_0x303253;}),_0x246d3f[_0x4259c6(0x1c9)]((_0x43a9d3,_0x329ef0)=>{var _0x25bcc2=_0x4259c6;_0x3c578a[_0x329ef0][_0x25bcc2(0x21c)]=_0x43a9d3;}),_0x236131[_0x4259c6(0x1c9)]((_0x29ea56,_0x4e4977)=>{var _0x1ff3d9=_0x4259c6;_0x3c578a[_0x4e4977][_0x1ff3d9(0x218)]=_0x29ea56;}),_0x499a53[_0x4259c6(0x1c9)]((_0x24d16e,_0x239dc6)=>{_0x3c578a[_0x239dc6]['maxPerUnit']=_0x24d16e;}),_0x2424f7[_0x4259c6(0x1c9)]((_0x4cead2,_0x27bf11)=>{var _0x5e1f2d=_0x4259c6;_0x3c578a[_0x27bf11][_0x5e1f2d(0x1b4)]=_0x4cead2;}),_0x2dbd19[_0x4259c6(0x1c9)]((_0x56f49a,_0x4d7f38)=>{var _0x5dc3a8=_0x4259c6;_0x3c578a[_0x4d7f38][_0x5dc3a8(0x1f6)]=_0x56f49a;}),_0x1a0ffe[_0x4259c6(0x1c9)]((_0x13acc8,_0x1bfc5b)=>{var _0x44cb44=_0x4259c6;_0x3c578a[_0x1bfc5b][_0x44cb44(0x1fa)]=_0x13acc8;});const _0x1f3e33=_0x3c578a[_0x4259c6(0x1f4)](_0x36e536=>_0x36e536[_0x4259c6(0x207)]!=='0'&&_0x36e536['to_quantity']!==''||_0x36e536[_0x4259c6(0x1e4)]!=='0'&&_0x36e536[_0x4259c6(0x1e4)]!=='');var _0x5c2b16=0x0;_0x1f3e33[_0x4259c6(0x1c9)](_0x2802c8=>{var _0x32cce9=_0x4259c6;parseInt(_0x2802c8[_0x32cce9(0x1af)])<parseInt(_0x2802c8[_0x32cce9(0x207)])&&_0x5c2b16++;});if(_0x5c2b16!=0x0)return _0x246c80[_0x4259c6(0x242)]('errors',_0x4259c6(0x1a7)),_0x4a5a62['redirect'](_0x4259c6(0x22f));const _0x3a1559=new transfers_logs();await _0x3a1559['save']();for(let _0x3786b9=0x0;_0x3786b9<=_0x1a0ffe['length']-0x1;_0x3786b9++){_0x3c578a[_0x3786b9][_0x4259c6(0x253)]=_0x4259c6(0x231)+_0x3a1559['invoice_init'][_0x4259c6(0x1d1)]()['padStart'](0x8,'0');}const _0x12bed2=new transfers_finished({'date':_0x647ee,'from_warehouse':_0x4e35e2,'to_warehouse':_0x2efff6,'product':_0x1f3e33,'note':_0x17fd09,'invoice':_0x4259c6(0x231)+_0x3a1559['invoice_init'][_0x4259c6(0x1d1)]()['padStart'](0x8,'0'),'type_of_transaction':_0x4259c6(0x1e5),'type_of_process':_0x4259c6(0x1cd),'PO_number':_0x39fbcb,'RequestedBy':_0x31b474,'DateofRequest':_0x2717a2,'typeservices':_0x3bf4ad,'destination':_0x22ff51,'deliverydate':_0x5a60bc,'driver':_0x3c3d00,'plate':_0x105ec7,'van':_0xce883,'DRSI':_0x1e942d,'typevehicle':_0x5ea847,'TSU':_0x3f45f2,'TFU':_0x495bff}),_0x2bd4e5=await _0x12bed2[_0x4259c6(0x1b0)]();_0x246c80['flash'](_0x4259c6(0x1f9),_0x4259c6(0x252)),_0x4a5a62[_0x4259c6(0x1cb)](_0x4259c6(0x20c)+_0x2bd4e5[_0x4259c6(0x1cf)]);}catch(_0x39a8c9){console['log'](_0x39a8c9),_0x4a5a62[_0x4259c6(0x1d0)](0xc8)[_0x4259c6(0x198)]({'errorMessage':_0x39a8c9[_0x4259c6(0x22e)]});}}),router[a0_0x4ee114(0x1da)](a0_0x4ee114(0x1a5),auth,async(_0x44b7ca,_0x14f477)=>{var _0x3359a8=a0_0x4ee114;try{const {date:_0x2267be,from_warehouse:_0xc33b07,FromRoom_name:_0x39969e,to_warehouse:_0xd1efcc,ToRoom_name:_0x23a200,prod_name:_0x44706c,from_prod_qty:_0x3d46e1,from_prod_level:_0x5b6caf,from_prod_isle:_0x130652,from_prod_pallet:_0x41036d,to_prod_qty:_0x594542,to_prod_level:_0x6c4f42,to_prod_isle:_0x2e4830,to_prod_pallet:_0x47377e,primary_code:_0x541c56,secondary_code:_0x14f3bc,product_code3:_0x10edcd,note:_0x1982bb,MaxStocks_data2:_0x59c0b4,invoice:_0x23d262,expiry_date:_0xbdf30d,PO_number:_0x4c8c9a,ReqBy:_0x5b4284,dateofreq:_0x249fb2,typeservicesData:_0x345533,destination:_0x347c4e,deliverydate:_0x1c71fb,driver:_0x1ab1aa,plate:_0x550fb2,van:_0x2980d7,DRSI:_0x5905c5,typevehicle:_0x31d469,TSU:_0x2886d1,TFU:_0x32847a}=_0x44b7ca[_0x3359a8(0x241)];if(typeof _0x44706c=='string')var _0x4d5723=[_0x44b7ca[_0x3359a8(0x241)]['prod_name']],_0x8206c2=[_0x44b7ca['body'][_0x3359a8(0x1a4)]],_0x1b27a6=[_0x44b7ca['body'][_0x3359a8(0x1fd)]],_0x52da91=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x1fb)]],_0x526b9b=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x196)]],_0x3d567c=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x21d)]],_0x34540a=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x215)]],_0x320662=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x1bc)]],_0x295780=[_0x44b7ca['body'][_0x3359a8(0x24a)]],_0x579269=[_0x44b7ca['body'][_0x3359a8(0x223)]],_0x4ae7fa=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x228)]],_0x316687=[_0x44b7ca['body'][_0x3359a8(0x254)]],_0x1f06b2=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x201)]],_0x2a54c1=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x1c6)]],_0x1a4be8=[_0x44b7ca[_0x3359a8(0x241)]['MaxStocks_data']],_0x3a741a=[_0x44b7ca['body'][_0x3359a8(0x203)]],_0xc08896=[_0x44b7ca[_0x3359a8(0x241)]['prod_cat']],_0x5758ed=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x1e2)]],_0x75915a=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x1ff)]],_0x137500=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x1df)]],_0x21d4e3=[_0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x1c5)]];else var _0x4d5723=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x222)]],_0x8206c2=[..._0x44b7ca['body'][_0x3359a8(0x1a4)]],_0x1b27a6=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x1fd)]],_0x52da91=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x1fb)]],_0x526b9b=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x196)]],_0x3d567c=[..._0x44b7ca['body']['primary_code']],_0x34540a=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x215)]],_0x320662=[..._0x44b7ca['body']['product_code3']],_0x295780=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x24a)]],_0x579269=[..._0x44b7ca[_0x3359a8(0x241)]['primary_unit']],_0x4ae7fa=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x228)]],_0x316687=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x254)]],_0x1f06b2=[..._0x44b7ca['body'][_0x3359a8(0x201)]],_0x2a54c1=[..._0x44b7ca[_0x3359a8(0x241)]['product_date']],_0x1a4be8=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x229)]],_0x3a741a=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x203)]],_0xc08896=[..._0x44b7ca[_0x3359a8(0x241)]['prod_cat']],_0x5758ed=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x1e2)]],_0x75915a=[..._0x44b7ca[_0x3359a8(0x241)][_0x3359a8(0x1ff)]],_0x137500=[..._0x44b7ca[_0x3359a8(0x241)]['from_invoice']],_0x21d4e3=[..._0x44b7ca['body'][_0x3359a8(0x1c5)]];const _0x1af125=_0x4d5723['map'](_0x189711=>{return _0x189711={'product_name':_0x189711};});_0x8206c2[_0x3359a8(0x1c9)]((_0x137c90,_0x4096d1)=>{var _0x48a15c=_0x3359a8;_0x1af125[_0x4096d1][_0x48a15c(0x1af)]=_0x137c90;}),_0x1b27a6[_0x3359a8(0x1c9)]((_0x5731c9,_0x388c42)=>{var _0x422dba=_0x3359a8,_0x3399db=_0x5731c9[_0x422dba(0x214)](/[A-Za-z]+/)[0x0],_0x4f2c40=parseInt(_0x5731c9[_0x422dba(0x214)](/\d+/)[0x0]);_0x1af125[_0x388c42][_0x422dba(0x240)]=_0x4f2c40,_0x1af125[_0x388c42]['from_level']=_0x3399db;}),_0x21d4e3[_0x3359a8(0x1c9)]((_0x5092ea,_0xb13532)=>{_0x1af125[_0xb13532]['id_transaction']=_0x5092ea;}),_0x137500[_0x3359a8(0x1c9)]((_0x5cef56,_0x3d1089)=>{var _0x368310=_0x3359a8;_0x1af125[_0x3d1089][_0x368310(0x1df)]=_0x5cef56;}),_0x52da91[_0x3359a8(0x1c9)]((_0x4f0625,_0x33b3ca)=>{var _0x24acbe=_0x3359a8;_0x1af125[_0x33b3ca][_0x24acbe(0x207)]=_0x4f0625;}),_0x526b9b[_0x3359a8(0x1c9)]((_0x45de27,_0x3c8cb1)=>{var _0x5c2abb=_0x3359a8,_0x98130b=_0x45de27[_0x5c2abb(0x214)](/[A-Za-z]+/)[0x0],_0x483601=parseInt(_0x45de27[_0x5c2abb(0x214)](/\d+/)[0x0]);_0x1af125[_0x3c8cb1][_0x5c2abb(0x1b2)]=_0x98130b,_0x1af125[_0x3c8cb1][_0x5c2abb(0x192)]=_0x483601;}),_0x3d567c[_0x3359a8(0x1c9)]((_0x1ae7d1,_0xbe9fa1)=>{var _0x45018e=_0x3359a8;_0x1af125[_0xbe9fa1][_0x45018e(0x21d)]=_0x1ae7d1;}),_0x34540a[_0x3359a8(0x1c9)]((_0x1af8cc,_0x2a5a47)=>{_0x1af125[_0x2a5a47]['secondary_code']=_0x1af8cc;}),_0x320662[_0x3359a8(0x1c9)]((_0x23029b,_0x459273)=>{var _0x42fc21=_0x3359a8;_0x1af125[_0x459273][_0x42fc21(0x199)]=_0x23029b;}),_0x295780[_0x3359a8(0x1c9)]((_0x441b5c,_0x518bee)=>{var _0x1c006b=_0x3359a8;_0x1af125[_0x518bee][_0x1c006b(0x218)]=_0x441b5c;}),_0x579269[_0x3359a8(0x1c9)]((_0x1de594,_0x3d8ee3)=>{var _0x5bd075=_0x3359a8;_0x1af125[_0x3d8ee3][_0x5bd075(0x1bb)]=_0x1de594;}),_0x4ae7fa[_0x3359a8(0x1c9)]((_0x4132c5,_0x5028d2)=>{var _0xf22bda=_0x3359a8;_0x1af125[_0x5028d2][_0xf22bda(0x228)]=_0x4132c5;}),_0x316687['forEach']((_0x4c9a99,_0x664ddf)=>{var _0x3487bb=_0x3359a8;_0x1af125[_0x664ddf][_0x3487bb(0x254)]=_0x4c9a99;}),_0x1f06b2['forEach']((_0x3e4704,_0x8b01d0)=>{_0x1af125[_0x8b01d0]['expiry_date']=_0x3e4704;}),_0x2a54c1['forEach']((_0x546a8d,_0x58bfea)=>{var _0xa4b152=_0x3359a8;_0x1af125[_0x58bfea][_0xa4b152(0x21c)]=_0x546a8d;}),_0x1a4be8[_0x3359a8(0x1c9)]((_0x1e899f,_0x1e1b7d)=>{_0x1af125[_0x1e1b7d]['maxProducts']=_0x1e899f;}),_0x3a741a[_0x3359a8(0x1c9)]((_0x6fb786,_0xd0f728)=>{var _0x8ed4d4=_0x3359a8;_0x1af125[_0xd0f728][_0x8ed4d4(0x203)]=_0x6fb786;}),_0xc08896[_0x3359a8(0x1c9)]((_0x2debb0,_0x36cc8f)=>{var _0x23bc5d=_0x3359a8;_0x1af125[_0x36cc8f][_0x23bc5d(0x1b4)]=_0x2debb0;}),_0x5758ed[_0x3359a8(0x1c9)]((_0x2d285d,_0x8ba122)=>{var _0x442d12=_0x3359a8;_0x1af125[_0x8ba122][_0x442d12(0x1f6)]=_0x2d285d;}),_0x75915a['forEach']((_0x4f036e,_0x3b52c7)=>{var _0x2098e9=_0x3359a8;_0x1af125[_0x3b52c7][_0x2098e9(0x1fa)]=_0x4f036e;});const _0x4cebab=_0x1af125[_0x3359a8(0x1f4)](_0x7d9789=>_0x7d9789[_0x3359a8(0x207)]!=='0'&&_0x7d9789[_0x3359a8(0x207)]!==''||_0x7d9789[_0x3359a8(0x1e4)]!=='0'&&_0x7d9789['to_floorlevel']!=='');var _0x2f811b=0x0;_0x4cebab[_0x3359a8(0x1c9)](_0x21cb6f=>{var _0x3b9be0=_0x3359a8;parseInt(_0x21cb6f[_0x3b9be0(0x1af)])<parseInt(_0x21cb6f[_0x3b9be0(0x207)])&&_0x2f811b++;});if(_0x2f811b!=0x0)return _0x44b7ca[_0x3359a8(0x242)](_0x3359a8(0x1ae),_0x3359a8(0x1a7)),_0x14f477[_0x3359a8(0x1cb)](_0x3359a8(0x22f));const _0x1d1178=new invoice_for_transfer();await _0x1d1178[_0x3359a8(0x1b0)]();for(let _0xe3bab7=0x0;_0xe3bab7<=_0x75915a[_0x3359a8(0x212)]-0x1;_0xe3bab7++){_0x1af125[_0xe3bab7][_0x3359a8(0x253)]=_0x3359a8(0x1e7)+_0x1d1178[_0x3359a8(0x1b3)][_0x3359a8(0x1d1)]()[_0x3359a8(0x226)](0x8,'0');}const _0x5d459e=new transfers_finished({'date':_0x2267be,'from_warehouse':_0xc33b07,'to_warehouse':_0xc33b07,'product':_0x4cebab,'note':_0x1982bb,'invoice':_0x3359a8(0x1e7)+_0x1d1178[_0x3359a8(0x1b3)]['toString']()[_0x3359a8(0x226)](0x8,'0'),'type_of_process':_0x3359a8(0x236),'type_of_transaction':_0x3359a8(0x1d5),'PO_number':_0x4c8c9a,'RequestedBy':_0x5b4284,'DateofRequest':_0x249fb2,'typeservices':_0x345533,'destination':_0x347c4e,'deliverydate':_0x1c71fb,'driver':_0x1ab1aa,'plate':_0x550fb2,'van':_0x2980d7,'DRSI':_0x5905c5,'typevehicle':_0x31d469,'TSU':_0x2886d1,'TFU':_0x32847a}),_0x3d62ea=await _0x5d459e[_0x3359a8(0x1b0)]();_0x44b7ca[_0x3359a8(0x242)](_0x3359a8(0x1f9),'Product\x20Transfer\x20successfully'),_0x14f477[_0x3359a8(0x1cb)](_0x3359a8(0x20c)+_0x3d62ea['_id']);}catch(_0x30a3e6){console['log'](_0x30a3e6),_0x14f477['status'](0xc8)[_0x3359a8(0x198)]({'errorMessage':_0x30a3e6[_0x3359a8(0x22e)]});}}),router[a0_0x4ee114(0x1da)]('/view/add_transfer_loc',auth,async(_0x164436,_0x24c637)=>{var _0x30824d=a0_0x4ee114;try{const {date:_0x5cf337,from_warehouse:_0x448d23,FromRoom_name:_0xa60657,to_warehouse:_0x3f18b7,ToRoom_name:_0x3b7593,prod_name:_0x1d9584,from_prod_qty:_0x1f7ac7,from_prod_level:_0x341e80,from_prod_isle:_0x1f9301,from_prod_pallet:_0x44f4ed,to_prod_qty:_0x21c58a,to_prod_level:_0x410f45,to_prod_isle:_0x73861,to_prod_pallet:_0x118b53,primary_code:_0x235322,secondary_code:_0x142eed,product_code3:_0x107789,note:_0x803ef,MaxStocks_data2:_0x39d9c3,invoice:_0x2194fd,expiry_date:_0x46231c,PO_number_loc:_0x1e7090,ReqBy_loc:_0x190139,dateofreq_loc:_0x3113bd,typeservices_loc_Data:_0xb52fb0,destination_loc:_0x429616,deliverydate_loc:_0x34a486,driver_loc:_0xe76e12,plate_loc:_0x5cc2a7,van_loc:_0x53f4b9,DRSI_loc:_0x3974c3,typevehicle_loc:_0x46a66b,TSU_loc:_0x5411a7,TFU_loc:_0x31dfa4}=_0x164436[_0x30824d(0x241)];if(typeof _0x1d9584==_0x30824d(0x1ee))var _0x5f4f6f=[_0x164436['body'][_0x30824d(0x222)]],_0x12afeb=[_0x164436['body'][_0x30824d(0x1a4)]],_0x6cdbb4=[_0x164436[_0x30824d(0x241)][_0x30824d(0x1fd)]],_0x79af6d=[_0x164436[_0x30824d(0x241)][_0x30824d(0x1fb)]],_0x1930c3=[_0x164436[_0x30824d(0x241)][_0x30824d(0x196)]],_0x51960d=[_0x164436['body'][_0x30824d(0x21d)]],_0x4781f9=[_0x164436['body'][_0x30824d(0x215)]],_0x197efb=[_0x164436[_0x30824d(0x241)][_0x30824d(0x1bc)]],_0x5c7df3=[_0x164436[_0x30824d(0x241)][_0x30824d(0x24a)]],_0x1f0c29=[_0x164436[_0x30824d(0x241)][_0x30824d(0x223)]],_0x4f0777=[_0x164436['body'][_0x30824d(0x228)]],_0x42d37d=[_0x164436[_0x30824d(0x241)]['batch_code']],_0x2a7b24=[_0x164436[_0x30824d(0x241)][_0x30824d(0x201)]],_0x2770da=[_0x164436[_0x30824d(0x241)][_0x30824d(0x1c6)]],_0x3c0607=[_0x164436[_0x30824d(0x241)]['MaxStocks_data']],_0x5020df=[_0x164436[_0x30824d(0x241)][_0x30824d(0x203)]],_0x3e983b=[_0x164436[_0x30824d(0x241)][_0x30824d(0x1b4)]],_0x1346a7=[_0x164436[_0x30824d(0x241)][_0x30824d(0x1e2)]],_0x4be477=[_0x164436[_0x30824d(0x241)]['ToRoomAssigned']],_0x32cad6=[_0x164436['body']['from_invoice']],_0xaef20f=[_0x164436['body'][_0x30824d(0x1c5)]];else var _0x5f4f6f=[..._0x164436['body'][_0x30824d(0x222)]],_0x12afeb=[..._0x164436['body'][_0x30824d(0x1a4)]],_0x6cdbb4=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x1fd)]],_0x79af6d=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x1fb)]],_0x1930c3=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x196)]],_0x51960d=[..._0x164436['body'][_0x30824d(0x21d)]],_0x4781f9=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x215)]],_0x197efb=[..._0x164436[_0x30824d(0x241)]['product_code3']],_0x5c7df3=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x24a)]],_0x1f0c29=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x223)]],_0x4f0777=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x228)]],_0x42d37d=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x254)]],_0x2a7b24=[..._0x164436['body']['expiry_date']],_0x2770da=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x1c6)]],_0x3c0607=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x229)]],_0x5020df=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x203)]],_0x3e983b=[..._0x164436['body'][_0x30824d(0x1b4)]],_0x1346a7=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x1e2)]],_0x4be477=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x1ff)]],_0x32cad6=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x1df)]],_0xaef20f=[..._0x164436[_0x30824d(0x241)][_0x30824d(0x1c5)]];const _0xcf13f9=_0x5f4f6f[_0x30824d(0x22b)](_0x4bf172=>{return _0x4bf172={'product_name':_0x4bf172};});_0x12afeb['forEach']((_0x1a3873,_0x3ba036)=>{var _0x53d19f=_0x30824d;_0xcf13f9[_0x3ba036][_0x53d19f(0x1af)]=_0x1a3873;}),_0x6cdbb4[_0x30824d(0x1c9)]((_0x462499,_0x424e0f)=>{var _0x4e09d4=_0x30824d,_0x12fbf7=_0x462499[_0x4e09d4(0x214)](/[A-Za-z]+/)[0x0],_0x531333=parseInt(_0x462499[_0x4e09d4(0x214)](/\d+/)[0x0]);_0xcf13f9[_0x424e0f]['from_bay']=_0x531333,_0xcf13f9[_0x424e0f][_0x4e09d4(0x259)]=_0x12fbf7;}),_0xaef20f[_0x30824d(0x1c9)]((_0x108032,_0xf6cb06)=>{_0xcf13f9[_0xf6cb06]['id_transaction']=_0x108032;}),_0x32cad6[_0x30824d(0x1c9)]((_0x30b0b8,_0x131f60)=>{var _0xcd007e=_0x30824d;_0xcf13f9[_0x131f60][_0xcd007e(0x1df)]=_0x30b0b8;}),_0x79af6d[_0x30824d(0x1c9)]((_0x378ef0,_0x455f9f)=>{_0xcf13f9[_0x455f9f]['to_quantity']=_0x378ef0;}),_0x1930c3[_0x30824d(0x1c9)]((_0x45236d,_0x11c456)=>{var _0x325f20=_0x30824d,_0x4a3123=_0x45236d[_0x325f20(0x214)](/[A-Za-z]+/)[0x0],_0x193269=parseInt(_0x45236d[_0x325f20(0x214)](/\d+/)[0x0]);_0xcf13f9[_0x11c456][_0x325f20(0x1b2)]=_0x4a3123,_0xcf13f9[_0x11c456][_0x325f20(0x192)]=_0x193269;}),_0x51960d[_0x30824d(0x1c9)]((_0x209fc1,_0x3079d3)=>{var _0x3299ee=_0x30824d;_0xcf13f9[_0x3079d3][_0x3299ee(0x21d)]=_0x209fc1;}),_0x4781f9[_0x30824d(0x1c9)]((_0xd81977,_0x2c6b53)=>{_0xcf13f9[_0x2c6b53]['secondary_code']=_0xd81977;}),_0x197efb[_0x30824d(0x1c9)]((_0x8bbb51,_0x2701d7)=>{var _0x555ec8=_0x30824d;_0xcf13f9[_0x2701d7][_0x555ec8(0x199)]=_0x8bbb51;}),_0x5c7df3[_0x30824d(0x1c9)]((_0x44b1b4,_0x3dd458)=>{var _0x4d5d20=_0x30824d;_0xcf13f9[_0x3dd458][_0x4d5d20(0x218)]=_0x44b1b4;}),_0x1f0c29[_0x30824d(0x1c9)]((_0x7e1241,_0x57aacd)=>{var _0x4d7174=_0x30824d;_0xcf13f9[_0x57aacd][_0x4d7174(0x1bb)]=_0x7e1241;}),_0x4f0777[_0x30824d(0x1c9)]((_0x2657e0,_0x521a20)=>{_0xcf13f9[_0x521a20]['secondary_unit']=_0x2657e0;}),_0x42d37d[_0x30824d(0x1c9)]((_0x4ece3d,_0xd54cd8)=>{var _0x22c877=_0x30824d;_0xcf13f9[_0xd54cd8][_0x22c877(0x254)]=_0x4ece3d;}),_0x2a7b24[_0x30824d(0x1c9)]((_0x1d8c6d,_0x26f0c3)=>{var _0x36aa64=_0x30824d;_0xcf13f9[_0x26f0c3][_0x36aa64(0x201)]=_0x1d8c6d;}),_0x2770da[_0x30824d(0x1c9)]((_0x50ebca,_0x2b9e9e)=>{var _0x37536f=_0x30824d;_0xcf13f9[_0x2b9e9e][_0x37536f(0x21c)]=_0x50ebca;}),_0x3c0607[_0x30824d(0x1c9)]((_0x536932,_0x458799)=>{var _0x64a20=_0x30824d;_0xcf13f9[_0x458799][_0x64a20(0x218)]=_0x536932;}),_0x5020df[_0x30824d(0x1c9)]((_0x3903c3,_0x4c1b0e)=>{var _0x242a8d=_0x30824d;_0xcf13f9[_0x4c1b0e][_0x242a8d(0x203)]=_0x3903c3;}),_0x3e983b['forEach']((_0x1f56d5,_0x374104)=>{var _0x1376ca=_0x30824d;_0xcf13f9[_0x374104][_0x1376ca(0x1b4)]=_0x1f56d5;}),_0x1346a7[_0x30824d(0x1c9)]((_0x33acaf,_0x34fbd4)=>{var _0x1f6893=_0x30824d;_0xcf13f9[_0x34fbd4][_0x1f6893(0x1f6)]=_0x33acaf;}),_0x4be477[_0x30824d(0x1c9)]((_0xc23eaf,_0x3cccc8)=>{var _0x1bf298=_0x30824d;_0xcf13f9[_0x3cccc8][_0x1bf298(0x1fa)]=_0xc23eaf;});const _0x54c07d=_0xcf13f9[_0x30824d(0x1f4)](_0x1ab062=>_0x1ab062[_0x30824d(0x207)]!=='0'&&_0x1ab062[_0x30824d(0x207)]!==''||_0x1ab062[_0x30824d(0x1e4)]!=='0'&&_0x1ab062[_0x30824d(0x1e4)]!=='');var _0x495dcb=0x0;_0x54c07d[_0x30824d(0x1c9)](_0x3ff0f2=>{var _0xc9ee5a=_0x30824d;parseInt(_0x3ff0f2['from_quantity'])<parseInt(_0x3ff0f2[_0xc9ee5a(0x207)])&&_0x495dcb++;});if(_0x495dcb!=0x0)return _0x164436[_0x30824d(0x242)]('errors',_0x30824d(0x1a7)),_0x24c637[_0x30824d(0x1cb)](_0x30824d(0x22f));const _0x11906a=new invoice_for_transfer();await _0x11906a['save']();for(let _0xb6a750=0x0;_0xb6a750<=_0x4be477[_0x30824d(0x212)]-0x1;_0xb6a750++){_0xcf13f9[_0xb6a750][_0x30824d(0x253)]=_0x30824d(0x1e7)+_0x11906a[_0x30824d(0x1b3)][_0x30824d(0x1d1)]()['padStart'](0x8,'0');}const _0x57d534=new transfers_finished({'date':_0x5cf337,'from_warehouse':_0x448d23,'to_warehouse':_0x3f18b7,'product':_0x54c07d,'note':_0x803ef,'invoice':_0x30824d(0x1e7)+_0x11906a[_0x30824d(0x1b3)][_0x30824d(0x1d1)]()[_0x30824d(0x226)](0x8,'0'),'type_of_transaction':_0x30824d(0x1d5),'type_of_process':_0x30824d(0x1cd),'PO_number':_0x1e7090,'RequestedBy':_0x190139,'DateofRequest':_0x3113bd,'typeservices':_0xb52fb0,'destination':_0x429616,'deliverydate':_0x34a486,'driver':_0xe76e12,'plate':_0x5cc2a7,'van':_0x53f4b9,'DRSI':_0x3974c3,'typevehicle':_0x46a66b,'TSU':_0x5411a7,'TFU':_0x31dfa4}),_0x58cc10=await _0x57d534[_0x30824d(0x1b0)]();_0x164436[_0x30824d(0x242)](_0x30824d(0x1f9),'Product\x20Transfer\x20successfully'),_0x24c637['redirect'](_0x30824d(0x20c)+_0x58cc10[_0x30824d(0x1cf)]);}catch(_0x423ec9){console['log'](_0x423ec9),_0x24c637[_0x30824d(0x1d0)](0xc8)[_0x30824d(0x198)]({'errorMessage':_0x423ec9[_0x30824d(0x22e)]});}}),router['get'](a0_0x4ee114(0x1d7),auth,async(_0xad30e5,_0x4787e3)=>{var _0x5e0a2c=a0_0x4ee114;try{const {username:_0x412b0d,email:_0x4a4c0d,role:_0x99722f}=_0xad30e5[_0x5e0a2c(0x208)],_0x2b5bfc=_0xad30e5[_0x5e0a2c(0x208)],_0x5d23c2=await profile[_0x5e0a2c(0x1ab)]({'email':_0x2b5bfc[_0x5e0a2c(0x22a)]}),_0x43c843=await master_shop[_0x5e0a2c(0x227)](),_0x2174cb=await transfers_finished['findById'](_0xad30e5[_0x5e0a2c(0x1ef)]['id']);let _0x452ea0;if(_0x2b5bfc[_0x5e0a2c(0x23e)]==_0x5e0a2c(0x256)){const _0x104125=await staff['findOne']({'email':_0x2b5bfc[_0x5e0a2c(0x22a)]});_0x452ea0=await warehouse[_0x5e0a2c(0x227)]({'status':_0x5e0a2c(0x1de),'name':_0x104125['warehouse'],'warehouse_category':_0x5e0a2c(0x243)});}else _0x452ea0=await warehouse[_0x5e0a2c(0x227)]({'status':_0x5e0a2c(0x1de),'warehouse_category':_0x5e0a2c(0x243)});const _0x51642f=await warehouse['aggregate']([{'$match':{'name':_0x2174cb[_0x5e0a2c(0x1d2)],'warehouse_category':_0x5e0a2c(0x243)}},{'$unwind':_0x5e0a2c(0x1e6)},{'$group':{'_id':_0x5e0a2c(0x251),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x5e0a2c(0x1a9)},'bay':{'$first':_0x5e0a2c(0x24d)},'bin':{'$first':_0x5e0a2c(0x1d3)},'type':{'$first':_0x5e0a2c(0x24e)},'floorlevel':{'$first':_0x5e0a2c(0x1b9)},'primary_code':{'$first':_0x5e0a2c(0x206)},'secondary_code':{'$first':_0x5e0a2c(0x19e)},'product_code':{'$first':_0x5e0a2c(0x248)},'storage':{'$first':_0x5e0a2c(0x200)},'rack':{'$first':_0x5e0a2c(0x1c8)},'expiry_date':{'$first':_0x5e0a2c(0x1b5)},'production_date':{'$first':_0x5e0a2c(0x202)},'room':{'$first':'$room'},'warehoue_name':{'$first':_0x5e0a2c(0x258)}}}]),_0x171b5a=await product[_0x5e0a2c(0x227)]({});if(_0x43c843[0x0][_0x5e0a2c(0x1c4)]==_0x5e0a2c(0x1a2)){var _0xb9a996=users[_0x5e0a2c(0x1c2)];console[_0x5e0a2c(0x21f)](_0xb9a996);}else{if(_0x43c843[0x0][_0x5e0a2c(0x1c4)]==_0x5e0a2c(0x21a))var _0xb9a996=users[_0x5e0a2c(0x21a)];else{if(_0x43c843[0x0][_0x5e0a2c(0x1c4)]==_0x5e0a2c(0x1d6))var _0xb9a996=users[_0x5e0a2c(0x1d6)];else{if(_0x43c843[0x0][_0x5e0a2c(0x1c4)]==_0x5e0a2c(0x1f2))var _0xb9a996=users[_0x5e0a2c(0x1f2)];else{if(_0x43c843[0x0][_0x5e0a2c(0x1c4)]==_0x5e0a2c(0x225))var _0xb9a996=users['French'];else{if(_0x43c843[0x0][_0x5e0a2c(0x1c4)]==_0x5e0a2c(0x1c1))var _0xb9a996=users[_0x5e0a2c(0x1f0)];else{if(_0x43c843[0x0]['language']==_0x5e0a2c(0x1a6))var _0xb9a996=users[_0x5e0a2c(0x1a6)];else{if(_0x43c843[0x0]['language']==_0x5e0a2c(0x250))var _0xb9a996=users[_0x5e0a2c(0x25c)];}}}}}}}_0x4787e3['render'](_0x5e0a2c(0x194),{'success':_0xad30e5[_0x5e0a2c(0x242)](_0x5e0a2c(0x1f9)),'errors':_0xad30e5['flash'](_0x5e0a2c(0x1ae)),'role':_0x2b5bfc,'profile':_0x5d23c2,'master_shop':_0x43c843,'warehouse':_0x452ea0,'transfer':_0x2174cb,'stock':_0x51642f,'unit':_0x171b5a,'language':_0xb9a996});}catch(_0x51daa9){console['log'](_0x51daa9);}}),router[a0_0x4ee114(0x1da)](a0_0x4ee114(0x1d7),auth,async(_0x362199,_0x289e2c)=>{var _0x41cafb=a0_0x4ee114;try{const {invoice:_0x13c19e,from_warehouse:_0x5922c6,FromRoom_name:_0x5b3857,to_warehouse:_0x489755,ToRoom_name:_0x520cde}=_0x362199[_0x41cafb(0x241)],_0x22f393=await transfers_finished[_0x41cafb(0x1ad)](_0x362199[_0x41cafb(0x1ef)]['id']),_0xd00e0a=_0x22f393['product'][_0x41cafb(0x22b)](async _0x245e56=>{var _0x3c51e7=_0x41cafb;if(_0x245e56[_0x3c51e7(0x207)]>0x0){var _0x36da8b=await warehouse[_0x3c51e7(0x1ab)]({'name':_0x5922c6,'room':_0x245e56[_0x3c51e7(0x1f6)]});const _0xf27bac=_0x36da8b[_0x3c51e7(0x19a)][_0x3c51e7(0x22b)](_0x4d7239=>{var _0x2e2022=_0x3c51e7;_0x4d7239[_0x2e2022(0x1cf)]==_0x245e56[_0x2e2022(0x1c5)]&&(_0x4d7239[_0x2e2022(0x19c)]=Math[_0x2e2022(0x24c)](0x0,Math[_0x2e2022(0x211)](_0x4d7239['product_stock'])-Math[_0x2e2022(0x211)](_0x245e56['to_quantity'])),console[_0x2e2022(0x21f)](_0x4d7239[_0x2e2022(0x19c)]));});}return _0x36da8b;});Promise[_0x41cafb(0x23a)](_0xd00e0a)['then'](async _0x2e714f=>{var _0x3607cb=_0x41cafb;try{for(const _0x1c69fa of _0x2e714f){await _0x1c69fa[_0x3607cb(0x1b0)]();}const _0x2a4ef3=_0x22f393[_0x3607cb(0x1c7)]['map'](async _0x539327=>{var _0x5e6f57=_0x3607cb,_0x2b69de=await warehouse[_0x5e6f57(0x1ab)]({'name':_0x489755,'room':_0x539327[_0x5e6f57(0x1fa)]});if(_0x539327[_0x5e6f57(0x207)]>0x0){var _0xd76d94=0x0;const _0x27de32=_0x2b69de[_0x5e6f57(0x19a)][_0x5e6f57(0x22b)](_0x334ecf=>{var _0x37283a=_0x5e6f57;_0x334ecf['product_name']==_0x539327[_0x37283a(0x1f1)]&&_0x334ecf[_0x37283a(0x230)]==_0x539327[_0x37283a(0x192)]&&_0x334ecf['expiry_date']==_0x539327[_0x37283a(0x201)]&&_0x334ecf[_0x37283a(0x21c)]==_0x539327[_0x37283a(0x21c)]&&_0x334ecf[_0x37283a(0x254)]==_0x539327['batch_code']&&_0x334ecf[_0x37283a(0x1e8)]==_0x539327[_0x37283a(0x253)]&&(typeof _0x539327[_0x37283a(0x1c5)]=='undefined'?(console['log']('here2',_0x334ecf[_0x37283a(0x19c)]+_0x37283a(0x1c0)+_0x334ecf[_0x37283a(0x1cf)]+'\x20<=>\x20'+Math[_0x37283a(0x211)](_0x334ecf[_0x37283a(0x19c)])+Math[_0x37283a(0x211)](_0x539327[_0x37283a(0x207)])),_0x334ecf[_0x37283a(0x19c)]=Math[_0x37283a(0x211)](_0x334ecf[_0x37283a(0x19c)])+Math[_0x37283a(0x211)](_0x539327[_0x37283a(0x207)])):_0x334ecf[_0x37283a(0x19c)]=Math[_0x37283a(0x211)](_0x334ecf[_0x37283a(0x19c)])+Math[_0x37283a(0x211)](_0x539327[_0x37283a(0x207)]),_0xd76d94++);});_0xd76d94=='0'&&(_0x2b69de[_0x5e6f57(0x19a)]=_0x2b69de['product_details']['concat']({'product_name':_0x539327[_0x5e6f57(0x1f1)],'product_stock':_0x539327[_0x5e6f57(0x207)],'bay':_0x539327[_0x5e6f57(0x192)],'level':_0x539327[_0x5e6f57(0x1b2)],'product_code':_0x539327['product_code'],'primary_code':_0x539327['primary_code'],'secondary_code':_0x539327[_0x5e6f57(0x215)],'expiry_date':_0x539327[_0x5e6f57(0x201)],'production_date':_0x539327[_0x5e6f57(0x21c)],'maxProducts':_0x539327[_0x5e6f57(0x218)],'batch_code':_0x539327[_0x5e6f57(0x254)],'secondary_unit':_0x539327['secondary_unit'],'unit':_0x539327[_0x5e6f57(0x1bb)],'maxProducts':_0x539327['maxProducts'],'maxPerUnit':_0x539327[_0x5e6f57(0x203)],'invoice':_0x539327[_0x5e6f57(0x253)]}));}return _0x2b69de;});Promise['all'](_0x2a4ef3)[_0x3607cb(0x1eb)](async _0x34c58d=>{var _0x584295=_0x3607cb;try{console[_0x584295(0x21f)](_0x22f393[_0x584295(0x1f7)]);if(_0x22f393[_0x584295(0x1f7)]!=_0x584295(0x1cd))for(const _0x4290fc of _0x34c58d){await warehouse[_0x584295(0x24f)]({'_id':_0x4290fc[_0x584295(0x1cf)]},{'$addToSet':{'product_details':{'$each':_0x4290fc['product_details']}}});}_0x22f393[_0x584295(0x1fe)]=_0x584295(0x210);const _0x27bf0d=await _0x22f393[_0x584295(0x1b0)](),_0xfacb9d=await master_shop[_0x584295(0x227)](),_0x15fb69=await email_settings['findOne'](),_0x4caf11=await supervisor_settings[_0x584295(0x227)]();var _0x1ea77b=_0x22f393[_0x584295(0x1c7)],_0x189574='',_0x57be14;for(_0x57be14 in _0x1ea77b){var _0x3fe5a6='FG';_0x22f393[_0x584295(0x257)]=='DRY\x20GOODS'&&(_0x3fe5a6='DG'),_0x189574+=_0x584295(0x233)+_0x584295(0x221)+_0x1ea77b[_0x57be14][_0x584295(0x1f1)]+_0x584295(0x20e)+_0x584295(0x221)+_0x1ea77b[_0x57be14]['product_code']+_0x584295(0x20e)+_0x584295(0x221)+_0x1ea77b[_0x57be14][_0x584295(0x207)]+_0x584295(0x20e)+_0x584295(0x221)+_0x1ea77b[_0x57be14]['unit']+_0x584295(0x20e)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x1ea77b[_0x57be14][_0x584295(0x228)]+_0x584295(0x20e)+_0x584295(0x221)+_0x22f393[_0x584295(0x257)]+_0x584295(0x20e)+_0x584295(0x221)+_0x1ea77b[_0x57be14]['to_room_name']+_0x584295(0x20e)+_0x584295(0x221)+_0x3fe5a6+_0x1ea77b[_0x57be14][_0x584295(0x192)]+_0x584295(0x20e)+_0x584295(0x20b);}_0x362199[_0x584295(0x242)](_0x584295(0x1f9),'Transfer\x20Finalize\x20Successfully'),_0x289e2c[_0x584295(0x1cb)](_0x584295(0x1ea)+_0x27bf0d['_id']);}catch(_0xdb103c){console[_0x584295(0x1ac)](_0xdb103c),_0x289e2c['status'](0x1f4)['json']({'error':_0x584295(0x1e0)});}})['catch'](_0x14c0a9=>{var _0x2a414d=_0x3607cb;console[_0x2a414d(0x1ac)](_0x14c0a9),_0x289e2c[_0x2a414d(0x1d0)](0x1f4)[_0x2a414d(0x198)]({'error':_0x2a414d(0x239)});});}catch(_0x582da2){console['error'](_0x582da2),_0x289e2c[_0x3607cb(0x1d0)](0x1f4)[_0x3607cb(0x198)]({'error':_0x3607cb(0x1f8)});}})[_0x41cafb(0x23b)](_0x12b345=>{var _0x435eeb=_0x41cafb;console['error'](_0x12b345),_0x289e2c[_0x435eeb(0x1d0)](0x1f4)[_0x435eeb(0x198)]({'error':_0x435eeb(0x239)});});}catch(_0x324cb3){_0x289e2c['json']({'message':_0x324cb3[_0x41cafb(0x22e)]});}});function BayBinSelected(_0x249863,_0x2903f6){var _0x410172=a0_0x4ee114,_0x2b9111=[];let _0x75af13=[];var _0x18ebc=[];if(_0x249863=='DRY\x20GOODS'){switch(_0x2903f6){case _0x410172(0x20d):_0x2b9111=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10];break;case _0x410172(0x244):_0x2b9111=[0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20];break;}_0x18ebc=['DG'];}else{if(_0x249863=='FROZEN\x20GOODS'){switch(_0x2903f6){case _0x410172(0x20d):_0x2b9111=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9];break;case _0x410172(0x244):_0x2b9111=[0xa,0xb,0xc,0xd,0xe,0xf,0x10,0x11,0x12];break;}_0x18ebc=['FG'];}}return{'levels':_0x2b9111,'identify':_0x18ebc};}router[a0_0x4ee114(0x1dd)](a0_0x4ee114(0x1a8),auth,async(_0x1664b6,_0x2ebe7c)=>{var _0x35099b=a0_0x4ee114;try{const {username:_0x25ca56,email:_0x1c3df7,role:_0x5db452}=_0x1664b6[_0x35099b(0x208)],_0x32da61=_0x1664b6['user'],_0x2e703f=await profile[_0x35099b(0x1ab)]({'email':_0x32da61[_0x35099b(0x22a)]}),_0x17905c=await master_shop[_0x35099b(0x227)](),_0x3dcf77=await transfers_finished['findById'](_0x1664b6[_0x35099b(0x1ef)]['id']);let _0x1db33e=new Date(_0x3dcf77['expiry_date']),_0x5381cc=('0'+_0x1db33e[_0x35099b(0x245)]())['slice'](-0x2),_0x59cd1f=('0'+(_0x1db33e['getMonth']()+0x1))[_0x35099b(0x1f5)](-0x2),_0x1645ac=_0x1db33e[_0x35099b(0x1f3)](),_0x15f95d=_0x1645ac+'-'+_0x59cd1f+'-'+_0x5381cc,_0x3eb70e;if(_0x32da61[_0x35099b(0x23e)]=='staff'){const _0x5667b4=await staff['findOne']({'email':_0x32da61['email']});_0x3eb70e=await warehouse[_0x35099b(0x227)]({'status':_0x35099b(0x1de),'name':_0x5667b4[_0x35099b(0x1be)],'warehouse_category':_0x35099b(0x243)});}else _0x3eb70e=await warehouse[_0x35099b(0x227)]({'status':_0x35099b(0x1de),'warehouse_category':'Finished\x20Goods'});const _0x292ab4=await warehouse[_0x35099b(0x255)]([{'$match':{'name':_0x3dcf77[_0x35099b(0x1d2)],'room':_0x3dcf77[_0x35099b(0x23d)]}},{'$unwind':_0x35099b(0x1e6)},{'$group':{'_id':_0x35099b(0x251),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x35099b(0x1a9)},'bay':{'$first':_0x35099b(0x24d)},'bin':{'$first':_0x35099b(0x1d3)},'type':{'$first':_0x35099b(0x24e)},'floorlevel':{'$first':_0x35099b(0x1b9)},'primary_code':{'$first':_0x35099b(0x206)},'secondary_code':{'$first':_0x35099b(0x19e)},'product_code':{'$first':_0x35099b(0x248)},'storage':{'$first':_0x35099b(0x200)},'rack':{'$first':'$product_details.rack'}}}]);var _0x31f3de=[0x1,0x2,0x3,0x4],_0x590cda=['A','B','C','D','E','F','G','H','I','J'],_0x4df6ad=['Ambient',_0x35099b(0x246)];const _0x5a06bf=await product[_0x35099b(0x227)]({}),_0x1a7e8f=BayBinSelected(_0x3dcf77[_0x35099b(0x257)],_0x3dcf77[_0x35099b(0x204)]);if(_0x17905c[0x0][_0x35099b(0x1c4)]==_0x35099b(0x1a2)){var _0x26f3bd=users[_0x35099b(0x1c2)];console['log'](_0x26f3bd);}else{if(_0x17905c[0x0]['language']==_0x35099b(0x21a))var _0x26f3bd=users[_0x35099b(0x21a)];else{if(_0x17905c[0x0]['language']==_0x35099b(0x1d6))var _0x26f3bd=users[_0x35099b(0x1d6)];else{if(_0x17905c[0x0][_0x35099b(0x1c4)]==_0x35099b(0x1f2))var _0x26f3bd=users[_0x35099b(0x1f2)];else{if(_0x17905c[0x0][_0x35099b(0x1c4)]==_0x35099b(0x225))var _0x26f3bd=users[_0x35099b(0x225)];else{if(_0x17905c[0x0][_0x35099b(0x1c4)]==_0x35099b(0x1c1))var _0x26f3bd=users[_0x35099b(0x1f0)];else{if(_0x17905c[0x0][_0x35099b(0x1c4)]==_0x35099b(0x1a6))var _0x26f3bd=users['Chinese'];else{if(_0x17905c[0x0][_0x35099b(0x1c4)]==_0x35099b(0x250))var _0x26f3bd=users[_0x35099b(0x25c)];}}}}}}}_0x2ebe7c[_0x35099b(0x20a)](_0x35099b(0x1b1),{'success':_0x1664b6[_0x35099b(0x242)](_0x35099b(0x1f9)),'errors':_0x1664b6[_0x35099b(0x242)](_0x35099b(0x1ae)),'role':_0x32da61,'profile':_0x2e703f,'master_shop':_0x17905c,'warehouse':_0x3eb70e,'transfer':_0x3dcf77,'stock':_0x292ab4,'unit':_0x5a06bf,'language':_0x26f3bd,'levels':_0x31f3de,'Isle':_0x590cda,'rooms_data':_0x4df6ad,'ed_fullDate':_0x15f95d,'dataSelected':_0x1a7e8f});}catch(_0x4e6654){console[_0x35099b(0x21f)](_0x4e6654);}}),router[a0_0x4ee114(0x1da)](a0_0x4ee114(0x1a8),auth,async(_0xf5cb3c,_0x5efff7)=>{var _0x35d098=a0_0x4ee114;try{const _0x3d63fa=_0xf5cb3c['params']['id'];console['log'](_0xf5cb3c[_0x35d098(0x241)]);const _0x4a0708=await transfers_finished[_0x35d098(0x1ad)](_0x3d63fa);console[_0x35d098(0x21f)](_0x35d098(0x1ba),_0x4a0708);const {date:_0x3c6397,from_warehouse:_0x2a3995,FromRoom_name:_0xb8b4dc,to_warehouse:_0x5435b8,ToRoom_name:_0x4f6545,prod_name:_0x5e460d,from_prod_qty:_0x43e254,from_prod_level:_0x188c2d,from_prod_isle:_0x19e583,from_prod_pallet:_0x25f733,to_prod_qty:_0x53d7cb,to_prod_level:_0x5edadb,to_prod_isle:_0x53782e,to_prod_pallet:_0x33c087,primary_code:_0x5b9db9,secondary_code:_0x2a1c5a,product_code3:_0x1fbe0c,note:_0xd13de,invoice:_0x515288,expiry_date:_0x15ab56}=_0xf5cb3c[_0x35d098(0x241)];if(typeof _0x5e460d==_0x35d098(0x1ee))var _0x399633=[_0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x222)]],_0x181b1a=[_0xf5cb3c[_0x35d098(0x241)]['from_prod_qty']],_0x2ca17e=[_0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x1ca)]],_0x5b40b8=[_0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x20f)]],_0x1eaabb=[_0xf5cb3c['body'][_0x35d098(0x196)]],_0x46e8fc=[_0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x21d)]],_0x3ffcb1=[_0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x215)]],_0x1c2fb3=[_0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x1bc)]],_0x392e6=[_0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x24a)]],_0x16cacc=[_0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x1bb)]],_0x5aa47e=[_0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x228)]],_0x521624=[_0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x254)]],_0x26d743=[_0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x201)]];else var _0x399633=[..._0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x222)]],_0x181b1a=[..._0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x1a4)]],_0x2ca17e=[..._0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x1ca)]],_0x5b40b8=[..._0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x20f)]],_0x1eaabb=[..._0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x196)]],_0x46e8fc=[..._0xf5cb3c['body'][_0x35d098(0x21d)]],_0x3ffcb1=[..._0xf5cb3c[_0x35d098(0x241)]['secondary_code']],_0x1c2fb3=[..._0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x1bc)]],_0x392e6=[..._0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x24a)]],_0x16cacc=[..._0xf5cb3c[_0x35d098(0x241)][_0x35d098(0x1bb)]],_0x5aa47e=[..._0xf5cb3c[_0x35d098(0x241)]['secondary_unit']],_0x521624=[..._0xf5cb3c['body']['batch_code']],_0x26d743=[..._0xf5cb3c[_0x35d098(0x241)]['expiry_date']];const _0x20e722=_0x399633['map'](_0xb59f04=>{return _0xb59f04={'product_name':_0xb59f04};});_0x181b1a[_0x35d098(0x1c9)]((_0xc1d36c,_0xbacf39)=>{var _0x298d34=_0x35d098;_0x20e722[_0xbacf39][_0x298d34(0x1af)]=_0xc1d36c;}),_0x2ca17e[_0x35d098(0x1c9)]((_0x2e1a90,_0x2429f8)=>{var _0x2cbd15=_0x35d098;_0x20e722[_0x2429f8][_0x2cbd15(0x240)]=_0x2e1a90;}),_0x5b40b8[_0x35d098(0x1c9)]((_0x39ccfc,_0x5778aa)=>{_0x20e722[_0x5778aa]['to_quantity']=_0x39ccfc;}),_0x1eaabb[_0x35d098(0x1c9)]((_0x2aef1c,_0x4efbd9)=>{var _0x25c03d=_0x35d098;_0x20e722[_0x4efbd9][_0x25c03d(0x192)]=_0x2aef1c;}),_0x46e8fc['forEach']((_0x224857,_0x438225)=>{var _0x5c4db5=_0x35d098;_0x20e722[_0x438225][_0x5c4db5(0x21d)]=_0x224857;}),_0x3ffcb1['forEach']((_0x2c0140,_0x4d41c3)=>{var _0x41e18c=_0x35d098;_0x20e722[_0x4d41c3][_0x41e18c(0x215)]=_0x2c0140;}),_0x1c2fb3[_0x35d098(0x1c9)]((_0x4b84ae,_0x58a25a)=>{var _0x581be5=_0x35d098;_0x20e722[_0x58a25a][_0x581be5(0x199)]=_0x4b84ae;}),_0x392e6[_0x35d098(0x1c9)]((_0x16f4c0,_0x495a98)=>{var _0x481d93=_0x35d098;_0x20e722[_0x495a98][_0x481d93(0x218)]=_0x16f4c0;}),_0x16cacc[_0x35d098(0x1c9)]((_0x48fd7d,_0x49d25b)=>{var _0x479567=_0x35d098;_0x20e722[_0x49d25b][_0x479567(0x1bb)]=_0x48fd7d;}),_0x5aa47e[_0x35d098(0x1c9)]((_0x342aec,_0x5bc08e)=>{var _0x4ea011=_0x35d098;_0x20e722[_0x5bc08e][_0x4ea011(0x228)]=_0x342aec;}),_0x521624[_0x35d098(0x1c9)]((_0x5c8b35,_0x78c473)=>{_0x20e722[_0x78c473]['batch_code']=_0x5c8b35;}),_0x26d743[_0x35d098(0x1c9)]((_0x162dca,_0x181394)=>{var _0x5674d3=_0x35d098;_0x20e722[_0x181394][_0x5674d3(0x201)]=_0x162dca;});const _0x1624d4=_0x20e722[_0x35d098(0x1f4)](_0xd2da89=>_0xd2da89[_0x35d098(0x207)]!=='0'&&_0xd2da89[_0x35d098(0x207)]!==''||_0xd2da89[_0x35d098(0x1e4)]!=='0'&&_0xd2da89[_0x35d098(0x1e4)]!=='');var _0x243cde=0x0;_0x1624d4[_0x35d098(0x1c9)](_0x1245a9=>{var _0x1c9f1e=_0x35d098;parseInt(_0x1245a9['from_quantity'])<parseInt(_0x1245a9[_0x1c9f1e(0x207)])&&_0x243cde++;});if(_0x243cde!=0x0)return _0xf5cb3c[_0x35d098(0x242)](_0x35d098(0x1ae),_0x35d098(0x1a7)),_0x5efff7[_0x35d098(0x1cb)]('back');const _0x20f223=await warehouse[_0x35d098(0x1ab)]({'name':_0x4a0708[_0x35d098(0x1d2)],'room':_0x4a0708['from_room']});_0x4a0708[_0x35d098(0x1c7)][_0x35d098(0x1c9)](_0x7a42f8=>{var _0xf8afe5=_0x35d098;if(_0x7a42f8['to_quantity']>0x0){const _0x31ab89=_0x20f223[_0xf8afe5(0x19a)]['map'](_0x5cad1f=>{var _0xf78a49=_0xf8afe5;_0x5cad1f[_0xf78a49(0x1f1)]==_0x7a42f8[_0xf78a49(0x1f1)]&&_0x5cad1f[_0xf78a49(0x230)]==_0x7a42f8[_0xf78a49(0x240)]&&(_0x5cad1f[_0xf78a49(0x19c)]=parseInt(_0x5cad1f[_0xf78a49(0x19c)])+parseInt(_0x7a42f8[_0xf78a49(0x207)]));});}}),await _0x20f223[_0x35d098(0x1b0)]();const _0x461209=await warehouse[_0x35d098(0x1ab)]({'name':_0x4a0708['to_warehouse'],'room':_0x4a0708[_0x35d098(0x204)]});_0x4a0708[_0x35d098(0x1c7)][_0x35d098(0x1c9)](_0x3e5117=>{var _0x83f5e2=_0x35d098;if(_0x3e5117[_0x83f5e2(0x207)]>0x0){const _0x4e780d=_0x461209[_0x83f5e2(0x19a)][_0x83f5e2(0x22b)](_0x4d015e=>{var _0x2d74ea=_0x83f5e2;_0x4d015e[_0x2d74ea(0x1f1)]==_0x3e5117[_0x2d74ea(0x1f1)]&&_0x4d015e['bay']==_0x3e5117[_0x2d74ea(0x192)]&&(_0x4d015e[_0x2d74ea(0x19c)]=parseInt(_0x4d015e[_0x2d74ea(0x19c)])-parseInt(_0x3e5117[_0x2d74ea(0x207)]));});}}),await _0x461209[_0x35d098(0x1b0)](),_0x4a0708[_0x35d098(0x1e1)]=_0x3c6397,_0x4a0708[_0x35d098(0x1d2)]=_0x2a3995,_0x4a0708[_0x35d098(0x257)]=_0x5435b8,_0x4a0708['product']=_0x1624d4,_0x4a0708[_0x35d098(0x21e)]=_0xd13de,_0x4a0708['invoice']=_0x515288;const _0x3b17cf=await _0x4a0708[_0x35d098(0x1b0)](),_0x540748=await warehouse[_0x35d098(0x1ab)]({'name':_0x2a3995,'room':_0xb8b4dc});_0x3b17cf['product'][_0x35d098(0x1c9)](_0x1b7fbb=>{var _0x25bc42=_0x35d098;if(_0x1b7fbb[_0x25bc42(0x207)]>0x0){const _0x43d9bc=_0x540748['product_details'][_0x25bc42(0x22b)](_0x270dc3=>{var _0x3d9a00=_0x25bc42;_0x270dc3[_0x3d9a00(0x1f1)]==_0x1b7fbb['product_name']&&_0x270dc3[_0x3d9a00(0x230)]==_0x1b7fbb[_0x3d9a00(0x240)]&&(_0x270dc3[_0x3d9a00(0x19c)]=parseInt(_0x270dc3[_0x3d9a00(0x19c)])-parseInt(_0x1b7fbb[_0x3d9a00(0x207)]));});}}),await _0x540748[_0x35d098(0x1b0)]();const _0x364f83=await warehouse[_0x35d098(0x1ab)]({'name':_0x5435b8,'room':_0x4f6545});_0x3b17cf[_0x35d098(0x1c7)][_0x35d098(0x1c9)](_0x35a0ab=>{var _0x93f3fb=_0x35d098;if(_0x35a0ab['to_quantity']>0x0){var _0x2af860=0x0;const _0x4f5779=_0x364f83[_0x93f3fb(0x19a)][_0x93f3fb(0x22b)](_0x597a0c=>{var _0x53851f=_0x93f3fb;_0x597a0c[_0x53851f(0x1f1)]==_0x35a0ab['product_name']&&_0x597a0c['bay']==_0x35a0ab[_0x53851f(0x192)]&&(_0x597a0c['product_stock']=parseInt(_0x597a0c[_0x53851f(0x19c)])+parseInt(_0x35a0ab['to_quantity']),_0x2af860++);});_0x2af860=='0'&&(_0x364f83[_0x93f3fb(0x19a)]=_0x364f83['product_details']['concat']({'product_name':_0x35a0ab['product_name'],'product_stock':_0x35a0ab[_0x93f3fb(0x207)],'bay':_0x35a0ab[_0x93f3fb(0x192)],'product_code':_0x35a0ab[_0x93f3fb(0x199)],'primary_code':_0x35a0ab[_0x93f3fb(0x21d)],'secondary_code':_0x35a0ab[_0x93f3fb(0x215)],'maxProducts':_0x35a0ab[_0x93f3fb(0x218)]}));}}),await _0x364f83[_0x35d098(0x1b0)](),_0xf5cb3c[_0x35d098(0x242)](_0x35d098(0x1f9),_0x35d098(0x24b)),_0x5efff7[_0x35d098(0x1cb)](_0x35d098(0x1bf));}catch(_0x300f48){console[_0x35d098(0x21f)](_0x300f48);}}),router[a0_0x4ee114(0x1da)](a0_0x4ee114(0x1d8),async(_0x513a69,_0x4d00fa)=>{var _0x28de84=a0_0x4ee114;const {FromWareHouse:_0x3b8c35,FromRoom:_0xc45c79,ToWarehouse:_0x405592,ToRoom:_0x4dfae5,primary_code:_0x122a49,Roomslist:_0x17a361}=_0x513a69['body'],_0x522af0=_0x17a361[_0x28de84(0x1e3)](','),_0x582bef=[];async function _0x57700a(_0x1afee7){var _0x4c236e=_0x28de84;const _0x24cb97=await warehouse[_0x4c236e(0x255)]([{'$match':{'name':_0x3b8c35,'room':_0x1afee7}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x122a49}},{'$group':{'_id':_0x4c236e(0x251),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x4c236e(0x1a9)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x4c236e(0x19e)},'product_code':{'$first':_0x4c236e(0x248)},'bay':{'$first':_0x4c236e(0x24d)},'level':{'$first':_0x4c236e(0x195)},'type':{'$first':_0x4c236e(0x24e)},'pallet':{'$first':_0x4c236e(0x1b9)},'unit':{'$first':_0x4c236e(0x1b8)},'secondary_unit':{'$first':_0x4c236e(0x19f)},'storage':{'$first':_0x4c236e(0x200)},'rack':{'$first':_0x4c236e(0x1c8)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x4c236e(0x202)},'batch_code':{'$first':_0x4c236e(0x22d)},'maxPerUnit':{'$first':_0x4c236e(0x197)},'roomNamed':{'$first':_0x4c236e(0x1ed)},'prod_cat':{'$first':'P'},'invoice':{'$first':'$product_details.invoice'}}}]),_0x59ea3a=await warehouse[_0x4c236e(0x255)]([{'$match':{'name':_0x3b8c35,'room':_0x1afee7}},{'$unwind':_0x4c236e(0x1e6)},{'$match':{'product_details.secondary_code':_0x122a49}},{'$group':{'_id':_0x4c236e(0x251),'name':{'$first':_0x4c236e(0x1a1)},'instock':{'$first':_0x4c236e(0x1a9)},'primary_code':{'$first':_0x4c236e(0x206)},'secondary_code':{'$first':_0x4c236e(0x19e)},'product_code':{'$first':_0x4c236e(0x248)},'bay':{'$first':'$product_details.bay'},'level':{'$first':'$product_details.level'},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x4c236e(0x1b9)},'unit':{'$first':_0x4c236e(0x1b8)},'secondary_unit':{'$first':_0x4c236e(0x19f)},'storage':{'$first':_0x4c236e(0x200)},'rack':{'$first':_0x4c236e(0x1c8)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x4c236e(0x202)},'batch_code':{'$first':_0x4c236e(0x22d)},'maxPerUnit':{'$first':_0x4c236e(0x197)},'roomNamed':{'$first':_0x4c236e(0x1ed)},'prod_cat':{'$first':'S'},'invoice':{'$first':_0x4c236e(0x1c3)}}}]);if(_0x24cb97['length']>0x0)_0x582bef[_0x4c236e(0x1aa)](_0x24cb97);else _0x59ea3a[_0x4c236e(0x212)]>0x0&&_0x582bef[_0x4c236e(0x1aa)](_0x59ea3a);}const _0x363f10=_0x522af0[_0x28de84(0x22b)](_0x4ab7e7=>_0x57700a(_0x4ab7e7));await Promise[_0x28de84(0x23a)](_0x363f10),_0x4d00fa['json'](_0x582bef);}),router['post'](a0_0x4ee114(0x1d9),async(_0x3adadd,_0x266f26)=>{var _0x296c7c=a0_0x4ee114;const {productCode:_0x4b6233,bay:_0xa8987b,warehouses:_0x4a91ae,room:_0x6a2503}=_0x3adadd[_0x296c7c(0x241)];console['log'](_0x3adadd[_0x296c7c(0x241)]);try{const _0x322724=await warehouse[_0x296c7c(0x255)]([{'$match':{'name':_0x4a91ae,'room':_0x6a2503}},{'$unwind':_0x296c7c(0x1e6)},{'$match':{'product_details.bay':parseInt(_0xa8987b)}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x296c7c(0x24d)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x266f26[_0x296c7c(0x1d0)](0xc8)[_0x296c7c(0x198)](_0x322724);}catch(_0x3092d8){_0x266f26[_0x296c7c(0x1d0)](0x194)[_0x296c7c(0x198)]({'message':_0x3092d8[_0x296c7c(0x22e)]});}}),module[a0_0x4ee114(0x25d)]=router;