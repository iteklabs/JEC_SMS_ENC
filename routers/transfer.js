function a0_0x4969(){var _0x5f4119=['<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','There\x27s\x20a\x20error\x20in\x20this\x20transaction','sendMail','</td>','$product_details.production_date','host','redirect','Arabic\x20(ae)','from_types','from_rack','from_invoice','message','post','to_room','map','to_floorlevel','random','errors','edit_transfer_view','type','<tbody\x20style=\x22text-align:\x20center;\x22>','id_transaction','batch_code','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','Rack\x20C','$product_details.floorlevel','Enabled','string','$product_details','_id','RoomAssigned','maxperunit','save','prod_cat','Rack\x20E','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','json','params','render','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','<tr>','English','log','An\x20error\x20occurred\x20while\x20saving\x20data.','warehouse','$product.from_room_name','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','Arabic','error','<strong>\x20Regards\x20</strong>','rak','$product_details.batch_code','</tr>','concat','bay','secondary_unit','prod_name','Transfer\x20Mail','Rack\x20B','/picking_list/PDF_transfer_rm/','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','<h5>','$product_details.secondary_code','../middleware/auth','DRY\x20STORAGE','$invoice','findOne','flash','$to_warehouse','\x20<>\x20','$product_details.bin','aggregate','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','product_stock','/view/add_transfer','filter','createTransport','German','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','find','Portuguese\x20(BR)','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','Chinese','Router','\x20</h2>','from_warehouse','to_types','get','$product_details.level','to_invoice','to_prod_qty','to_prod_isle','product_name','</thead>','Logo.png','$product_details.product_name','</div>','/../public','findById','$product_details.type','exports','Spanish','image','6WFgYxY','COLD\x20STORAGE','/transfer/view','$product_details.maxProducts','Product\x20Transfer\x20successfully','/preview/:id','/view','5307470OlDtYM','/barcode_scanner2','maxProducts','user','from_quantity','from_room_name','primary_unit','/transfer/preview/','to_warehouse','7LGSfab','/barcode_scanner3','$isAllowEdit','4055416pKfrnu','9QpPQDQ','catch','from_prod_level','$product_details.bay','Shelves','site_title','invoice','English\x20(US)','product_code3','/barcode_scanner','$name','2612055xOFxHH','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','</h5>','all','forEach','primary_code','toString','Floor','</body></html>','back','to_room_name','rack','language','695106vaeocQ','$product_details.unit','248650gyQpvH','../public/language/languages.json','$from_warehouse','from_prod_qty','<h5\x20style=\x22text-align:\x20left;\x22>','Transfer\x20Edit\x20Successfully','$product_details.maxPerUnit','Enclosed','master','updateOne','New_Qty_Converted','to_quantity','to_prod_pallet','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','Receiving\x20Area','staff','floor','TRF-','$product_details.storage','<table\x20style=\x22width:\x20100%\x20!important;\x22>','</tbody>','Rack\x20A','expiry_date','<html><head><title></title>','$product_details.secondary_unit','floorlevel','\x20Order\x20Date\x20:\x20','</span>','125064hlxYFZ','here','Raw\x20Materials','from_storage','$product_details.rack','$product_details.product_stock','status','from_bin','slice','<!DOCTYPE\x20html>','port','padStart','length','Level','password','An\x20error\x20occurred.','body','unit','$room','2535864ObryYr','storage','Hindi','Portuguese','$product_details._id','\x20Order\x20Number\x20:\x20','from_bay','date','Ambient','$product_details.pallet','bin','$_id','$finalize','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','edit_transfer','$product_details.expiry_date','$product_details.product_code','secondary_code','role','from_rak','success','<div>','getFullYear','MaxStocks_data2','id_transaction_id','to_bin','$product_details.primary_code','<h2>\x20','$product_details.isle','from_prod_isle','product_code','email','To_invoice','production_date','product_details','express','then','push','$date','to_bay','French','product','to_prod_level','from_floorlevel'];a0_0x4969=function(){return _0x5f4119;};return a0_0x4969();}function a0_0x3097(_0x1c2835,_0x4348f2){var _0x496988=a0_0x4969();return a0_0x3097=function(_0x30974b,_0x541e96){_0x30974b=_0x30974b-0x95;var _0x9a4867=_0x496988[_0x30974b];return _0x9a4867;},a0_0x3097(_0x1c2835,_0x4348f2);}var a0_0x100128=a0_0x3097;(function(_0x51502a,_0x29ad2b){var _0x54b6a9=a0_0x3097,_0x28cd7d=_0x51502a();while(!![]){try{var _0x57f42a=-parseInt(_0x54b6a9(0x134))/0x1+parseInt(_0x54b6a9(0x136))/0x2+-parseInt(_0x54b6a9(0x152))/0x3+parseInt(_0x54b6a9(0x165))/0x4+parseInt(_0x54b6a9(0x127))/0x5*(parseInt(_0x54b6a9(0x108))/0x6)+parseInt(_0x54b6a9(0x118))/0x7*(-parseInt(_0x54b6a9(0x11b))/0x8)+parseInt(_0x54b6a9(0x11c))/0x9*(parseInt(_0x54b6a9(0x10f))/0xa);if(_0x57f42a===_0x29ad2b)break;else _0x28cd7d['push'](_0x28cd7d['shift']());}catch(_0x32f22d){_0x28cd7d['push'](_0x28cd7d['shift']());}}}(a0_0x4969,0x8a9b0));const express=require(a0_0x100128(0x98)),app=express(),router=express[a0_0x100128(0xf4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require('../models/all_models'),auth=require(a0_0x100128(0xe0)),users=require(a0_0x100128(0x137)),nodemailer=require('nodemailer');router['get'](a0_0x100128(0x10e),auth,async(_0xb1a4a2,_0x295b67)=>{var _0x564fa9=a0_0x100128;try{const {username:_0x1ec7e1,email:_0x360d92,role:_0x4a5677}=_0xb1a4a2['user'],_0x4bb13d=_0xb1a4a2[_0x564fa9(0x112)],_0x51edf8=await profile[_0x564fa9(0xe3)]({'email':_0x4bb13d[_0x564fa9(0x184)]}),_0x2b3553=await master_shop[_0x564fa9(0xf0)]();console[_0x564fa9(0xcb)](_0x564fa9(0x13e),_0x2b3553);let _0x1979f5;if(_0x4bb13d[_0x564fa9(0x177)]=='staff'){const _0x2023ec=await staff[_0x564fa9(0xe3)]({'email':_0x4bb13d[_0x564fa9(0x184)]});_0x1979f5=await transfers[_0x564fa9(0xf0)]({'from_warehouse':_0x2023ec[_0x564fa9(0xcd)]});}else _0x1979f5=await transfers[_0x564fa9(0xe8)]([{'$unwind':'$product'},{'$group':{'_id':_0x564fa9(0x170),'invoice':{'$first':_0x564fa9(0xe2)},'date':{'$first':_0x564fa9(0x9b)},'from_warehouse':{'$first':_0x564fa9(0x138)},'to_warehouse':{'$first':_0x564fa9(0xe5)},'from_room_name':{'$addToSet':_0x564fa9(0xce)},'to_room_name':{'$addToSet':'$product.to_room_name'},'finalize':{'$first':_0x564fa9(0x171)},'isAllowEdit':{'$first':_0x564fa9(0x11a)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x2b3553[0x0]['language']==_0x564fa9(0x123)){var _0x566d65=users['English'];console['log'](_0x566d65);}else{if(_0x2b3553[0x0][_0x564fa9(0x133)]=='Hindi')var _0x566d65=users['Hindi'];else{if(_0x2b3553[0x0][_0x564fa9(0x133)]==_0x564fa9(0xee))var _0x566d65=users['German'];else{if(_0x2b3553[0x0][_0x564fa9(0x133)]=='Spanish')var _0x566d65=users['Spanish'];else{if(_0x2b3553[0x0][_0x564fa9(0x133)]==_0x564fa9(0x9d))var _0x566d65=users[_0x564fa9(0x9d)];else{if(_0x2b3553[0x0]['language']=='Portuguese\x20(BR)')var _0x566d65=users['Portuguese'];else{if(_0x2b3553[0x0][_0x564fa9(0x133)]==_0x564fa9(0xf3))var _0x566d65=users['Chinese'];else{if(_0x2b3553[0x0][_0x564fa9(0x133)]==_0x564fa9(0xa8))var _0x566d65=users[_0x564fa9(0xd0)];}}}}}}}_0x295b67[_0x564fa9(0xc7)]('transfer',{'success':_0xb1a4a2[_0x564fa9(0xe4)](_0x564fa9(0x179)),'errors':_0xb1a4a2[_0x564fa9(0xe4)](_0x564fa9(0xb2)),'role':_0x4bb13d,'profile':_0x51edf8,'master_shop':_0x2b3553,'transfer':_0x1979f5,'language':_0x566d65});}catch(_0x21c287){console[_0x564fa9(0xcb)](_0x21c287);}});async function getRandom8DigitNumber(){var _0x5e8665=a0_0x100128;const _0x26371b=0x989680,_0x5043f3=0x5f5e0ff,_0x5934dd=Math[_0x5e8665(0x146)](Math[_0x5e8665(0xb1)]()*(_0x5043f3-_0x26371b+0x1))+_0x26371b;var _0x4a5272;const _0x33008c=await transfers[_0x5e8665(0xe3)]({'invoice':_0x5e8665(0x147)+_0x5934dd});return _0x33008c&&_0x33008c['length']>0x0?_0x4a5272=_0x5e8665(0x147)+_0x5934dd:_0x4a5272=_0x5e8665(0x147)+_0x5934dd,_0x4a5272;}router[a0_0x100128(0xf8)]('/view/add_transfer',auth,async(_0x5dcb1e,_0x5a8a5e)=>{var _0x152fc7=a0_0x100128;try{const {username:_0x1c3877,email:_0xd7de,role:_0x3e594d}=_0x5dcb1e['user'],_0x1dee20=_0x5dcb1e[_0x152fc7(0x112)],_0x436c5b=await profile[_0x152fc7(0xe3)]({'email':_0x1dee20[_0x152fc7(0x184)]}),_0x2f0a32=await master_shop[_0x152fc7(0xf0)]();console[_0x152fc7(0xcb)](_0x152fc7(0x13e),_0x2f0a32);let _0x4ec0bd;if(_0x1dee20[_0x152fc7(0x177)]==_0x152fc7(0x145)){const _0x14888b=await staff[_0x152fc7(0xe3)]({'email':_0x1dee20[_0x152fc7(0x184)]});_0x4ec0bd=await warehouse[_0x152fc7(0xe8)]([{'$match':{'status':_0x152fc7(0xbb),'name':_0x14888b[_0x152fc7(0xcd)],'warehouse_category':_0x152fc7(0x154)}},{'$group':{'_id':_0x152fc7(0x126),'name':{'$first':_0x152fc7(0x126)}}}]);}else _0x4ec0bd=await warehouse[_0x152fc7(0xe8)]([{'$match':{'status':_0x152fc7(0xbb),'warehouse_category':_0x152fc7(0x154)}},{'$group':{'_id':_0x152fc7(0x126),'name':{'$first':_0x152fc7(0x126)}}}]);var _0x23d149=[_0x152fc7(0x16d),_0x152fc7(0x13d),'Return\x20Rooms'];const _0x4d716b=await transfers[_0x152fc7(0xf0)]({}),_0x2f68f0=_0x4d716b['length']+0x1,_0x24a24c=_0x152fc7(0x147)+_0x2f68f0[_0x152fc7(0x12d)]()[_0x152fc7(0x15d)](0x5,'0');if(_0x2f0a32[0x0][_0x152fc7(0x133)]=='English\x20(US)'){var _0x18050c=users['English'];console[_0x152fc7(0xcb)](_0x18050c);}else{if(_0x2f0a32[0x0][_0x152fc7(0x133)]==_0x152fc7(0x167))var _0x18050c=users[_0x152fc7(0x167)];else{if(_0x2f0a32[0x0][_0x152fc7(0x133)]==_0x152fc7(0xee))var _0x18050c=users['German'];else{if(_0x2f0a32[0x0][_0x152fc7(0x133)]==_0x152fc7(0x106))var _0x18050c=users[_0x152fc7(0x106)];else{if(_0x2f0a32[0x0][_0x152fc7(0x133)]=='French')var _0x18050c=users[_0x152fc7(0x9d)];else{if(_0x2f0a32[0x0][_0x152fc7(0x133)]==_0x152fc7(0xf1))var _0x18050c=users[_0x152fc7(0x168)];else{if(_0x2f0a32[0x0][_0x152fc7(0x133)]==_0x152fc7(0xf3))var _0x18050c=users[_0x152fc7(0xf3)];else{if(_0x2f0a32[0x0]['language']==_0x152fc7(0xa8))var _0x18050c=users[_0x152fc7(0xd0)];}}}}}}}const _0x5f5392=getRandom8DigitNumber();_0x5f5392[_0x152fc7(0x99)](_0x178356=>{var _0x2aaef3=_0x152fc7;_0x5a8a5e['render']('add_transfer',{'success':_0x5dcb1e[_0x2aaef3(0xe4)](_0x2aaef3(0x179)),'errors':_0x5dcb1e[_0x2aaef3(0xe4)](_0x2aaef3(0xb2)),'role':_0x1dee20,'profile':_0x436c5b,'master_shop':_0x2f0a32,'warehouse':_0x4ec0bd,'language':_0x18050c,'rooms_data':_0x23d149,'invoice':_0x178356});})['catch'](_0x34759e=>{var _0x13d615=_0x152fc7;_0x5dcb1e[_0x13d615(0xe4)](_0x13d615(0xb2),_0x13d615(0xa2)),_0x5a8a5e[_0x13d615(0xa7)](_0x13d615(0x10a));});}catch(_0x62a1b4){console[_0x152fc7(0xcb)](_0x62a1b4);}}),router['post'](a0_0x100128(0xeb),auth,async(_0x174850,_0x3cc4ce)=>{var _0x34a41c=a0_0x100128;try{console[_0x34a41c(0xcb)](_0x174850[_0x34a41c(0x162)]);const {date:_0x201d49,from_warehouse:_0x193f0f,FromRoom_name:_0x233fe7,to_warehouse:_0x44604b,ToRoom_name:_0x29d4c3,prod_name:_0x2994ff,from_prod_qty:_0x3c34e3,from_prod_level:_0x5972d5,from_prod_isle:_0x59cfbc,from_prod_pallet:_0x45fde4,to_prod_qty:_0x56070d,to_prod_level:_0x2e3af9,to_prod_isle:_0x2891e6,to_prod_pallet:_0x5abc3e,primary_code:_0x4a1338,secondary_code:_0x40e290,product_code3:_0x27d69d,note:_0x16d58d,MaxStocks_data2:_0x3a94c6,invoice:_0x4206e1,expiry_date:_0x159699}=_0x174850[_0x34a41c(0x162)];if(typeof _0x2994ff==_0x34a41c(0xbc))var _0x1d1a44=[_0x174850[_0x34a41c(0x162)][_0x34a41c(0xd9)]],_0x3f5739=[_0x174850[_0x34a41c(0x162)][_0x34a41c(0x139)]],_0x1a0f62=[_0x174850[_0x34a41c(0x162)]['from_prod_level']],_0x28ce28=[_0x174850[_0x34a41c(0x162)][_0x34a41c(0x140)]],_0x13952f=[_0x174850['body']['to_prod_level']],_0x2ae81b=[_0x174850[_0x34a41c(0x162)][_0x34a41c(0x12c)]],_0x520350=[_0x174850[_0x34a41c(0x162)][_0x34a41c(0x176)]],_0x2afee2=[_0x174850[_0x34a41c(0x162)][_0x34a41c(0x124)]],_0x209f25=[_0x174850[_0x34a41c(0x162)][_0x34a41c(0x17c)]],_0x13ff78=[_0x174850[_0x34a41c(0x162)][_0x34a41c(0x115)]],_0x426f78=[_0x174850[_0x34a41c(0x162)][_0x34a41c(0xd8)]],_0x168c76=[_0x174850[_0x34a41c(0x162)]['batch_code']],_0x4acb2f=[_0x174850[_0x34a41c(0x162)]['expiry_date']],_0x28fdbf=[_0x174850[_0x34a41c(0x162)]['max_per_unit']],_0x220203=[_0x174850['body']['production_date']],_0x1b785f=[_0x174850['body'][_0x34a41c(0xc2)]],_0x2911c0=[_0x174850['body'][_0x34a41c(0xbf)]],_0x30e713=[_0x174850[_0x34a41c(0x162)]['ToRoomAssigned']],_0x582fc4=[_0x174850[_0x34a41c(0x162)][_0x34a41c(0xab)]],_0x134001=[_0x174850['body'][_0x34a41c(0xfa)]],_0x140831=[_0x174850[_0x34a41c(0x162)]['id_transaction']];else var _0x1d1a44=[..._0x174850[_0x34a41c(0x162)][_0x34a41c(0xd9)]],_0x3f5739=[..._0x174850[_0x34a41c(0x162)]['from_prod_qty']],_0x1a0f62=[..._0x174850[_0x34a41c(0x162)][_0x34a41c(0x11e)]],_0x28ce28=[..._0x174850[_0x34a41c(0x162)]['New_Qty_Converted']],_0x13952f=[..._0x174850[_0x34a41c(0x162)][_0x34a41c(0x9f)]],_0x2ae81b=[..._0x174850['body']['primary_code']],_0x520350=[..._0x174850['body'][_0x34a41c(0x176)]],_0x2afee2=[..._0x174850[_0x34a41c(0x162)][_0x34a41c(0x124)]],_0x209f25=[..._0x174850[_0x34a41c(0x162)][_0x34a41c(0x17c)]],_0x13ff78=[..._0x174850[_0x34a41c(0x162)][_0x34a41c(0x115)]],_0x426f78=[..._0x174850[_0x34a41c(0x162)]['secondary_unit']],_0x168c76=[..._0x174850[_0x34a41c(0x162)][_0x34a41c(0xb7)]],_0x4acb2f=[..._0x174850[_0x34a41c(0x162)][_0x34a41c(0x14c)]],_0x28fdbf=[..._0x174850[_0x34a41c(0x162)]['max_per_unit']],_0x220203=[..._0x174850['body'][_0x34a41c(0x96)]],_0x1b785f=[..._0x174850[_0x34a41c(0x162)][_0x34a41c(0xc2)]],_0x2911c0=[..._0x174850[_0x34a41c(0x162)]['RoomAssigned']],_0x30e713=[..._0x174850[_0x34a41c(0x162)]['ToRoomAssigned']],_0x582fc4=[..._0x174850[_0x34a41c(0x162)][_0x34a41c(0xab)]],_0x134001=[..._0x174850[_0x34a41c(0x162)][_0x34a41c(0xfa)]],_0x140831=[..._0x174850['body'][_0x34a41c(0xb6)]];const _0x55a055=_0x1d1a44['map'](_0x362b1f=>{return _0x362b1f={'product_name':_0x362b1f};});_0x3f5739[_0x34a41c(0x12b)]((_0x397508,_0x366a67)=>{var _0x4915c2=_0x34a41c;_0x55a055[_0x366a67][_0x4915c2(0x113)]=_0x397508;}),_0x582fc4['forEach']((_0x2e8da2,_0x3c8339)=>{var _0x55f945=_0x34a41c;_0x55a055[_0x3c8339][_0x55f945(0xab)]=_0x2e8da2;}),_0x134001[_0x34a41c(0x12b)]((_0x448d42,_0x2d4b08)=>{var _0x339895=_0x34a41c;_0x55a055[_0x2d4b08][_0x339895(0x95)]=_0x448d42;}),_0x140831[_0x34a41c(0x12b)]((_0x3a8fc6,_0x282f35)=>{_0x55a055[_0x282f35]['id_transaction_id']=_0x3a8fc6;}),_0x1a0f62[_0x34a41c(0x12b)]((_0x15df8b,_0x7dd1ef)=>{_0x2911c0['forEach']((_0x12da10,_0x2c5471)=>{var _0x5f583d=a0_0x3097;if(_0x12da10==_0x5f583d(0x144)&&_0x7dd1ef==_0x2c5471){var _0x142aab=_0x15df8b[_0x5f583d(0x15a)](0x3);_0x55a055[_0x7dd1ef][_0x5f583d(0x155)]=_0x15df8b[0x0],_0x55a055[_0x7dd1ef][_0x5f583d(0xaa)]=_0x15df8b[0x1],_0x55a055[_0x7dd1ef]['from_bay']=0x0,_0x55a055[_0x7dd1ef][_0x5f583d(0x159)]=0x0,_0x55a055[_0x7dd1ef][_0x5f583d(0xa9)]=_0x5f583d(0x12e),_0x55a055[_0x7dd1ef][_0x5f583d(0xa0)]=_0x142aab;}else{if(_0x12da10=='Shelves'&&_0x7dd1ef==_0x2c5471){var _0x142aab=_0x15df8b[_0x5f583d(0x15a)](0x3);_0x55a055[_0x7dd1ef][_0x5f583d(0x155)]=_0x15df8b[0x0],_0x55a055[_0x7dd1ef][_0x5f583d(0xaa)]=_0x15df8b[0x1],_0x55a055[_0x7dd1ef][_0x5f583d(0x16b)]=0x0,_0x55a055[_0x7dd1ef][_0x5f583d(0x159)]=0x0,_0x55a055[_0x7dd1ef][_0x5f583d(0xa9)]=_0x5f583d(0x12e),_0x55a055[_0x7dd1ef]['from_floorlevel']=_0x15df8b[0x5];}else{if(_0x7dd1ef==_0x2c5471){if(_0x15df8b[0x0]=='A'&&_0x15df8b[0x1]=='L'&&_0x15df8b[0x2]=='L')console['log'](_0x12da10+_0x5f583d(0xe6)+_0x7dd1ef+_0x5f583d(0xe6)+_0x2c5471+_0x5f583d(0xe6)+_0x15df8b+_0x5f583d(0x153)),_0x55a055[_0x7dd1ef][_0x5f583d(0x155)]=_0x15df8b[0x0],_0x55a055[_0x7dd1ef][_0x5f583d(0xaa)]=_0x15df8b[0x1],_0x55a055[_0x7dd1ef][_0x5f583d(0x16b)]=0x0,_0x55a055[_0x7dd1ef][_0x5f583d(0x159)]=0x0,_0x55a055[_0x7dd1ef][_0x5f583d(0xa9)]=_0x5f583d(0x12e),_0x55a055[_0x7dd1ef][_0x5f583d(0xa0)]=_0x15df8b[0x3];else{var _0x33b504;if(_0x15df8b[0x4]=='L')_0x33b504=_0x5f583d(0x15f);else _0x15df8b[0x4]=='F'&&(_0x33b504=_0x5f583d(0x12e));_0x55a055[_0x7dd1ef][_0x5f583d(0x155)]=_0x15df8b[0x0],_0x55a055[_0x7dd1ef][_0x5f583d(0xaa)]=_0x15df8b[0x1],_0x55a055[_0x7dd1ef][_0x5f583d(0x16b)]=_0x15df8b[0x2],_0x55a055[_0x7dd1ef][_0x5f583d(0x159)]=_0x15df8b[0x3],_0x55a055[_0x7dd1ef][_0x5f583d(0xa9)]=_0x33b504,_0x55a055[_0x7dd1ef][_0x5f583d(0xa0)]=_0x15df8b[0x5];}}}}});}),_0x28ce28['forEach']((_0x3beab5,_0x48d3bc)=>{var _0x30e433=_0x34a41c;_0x55a055[_0x48d3bc][_0x30e433(0x141)]=_0x3beab5;}),_0x13952f[_0x34a41c(0x12b)]((_0x5cca4c,_0x562843)=>{_0x30e713['forEach']((_0x10eab6,_0x3b758e)=>{var _0x1c0ac5=a0_0x3097;if(_0x10eab6==_0x1c0ac5(0x144)&&_0x562843==_0x3b758e){var _0x18aa52=_0x5cca4c[_0x1c0ac5(0x15a)](0x3);_0x55a055[_0x562843][_0x1c0ac5(0x166)]=_0x5cca4c[0x0],_0x55a055[_0x562843][_0x1c0ac5(0x132)]=_0x5cca4c[0x1],_0x55a055[_0x562843][_0x1c0ac5(0x9c)]=0x0,_0x55a055[_0x562843][_0x1c0ac5(0x17e)]=0x0,_0x55a055[_0x562843][_0x1c0ac5(0xf7)]=_0x1c0ac5(0x12e),_0x55a055[_0x562843]['to_floorlevel']=_0x18aa52;}else{if(_0x10eab6==_0x1c0ac5(0x120)&&_0x562843==_0x3b758e){var _0x18aa52=_0x5cca4c[_0x1c0ac5(0x15a)](0x3);_0x55a055[_0x562843][_0x1c0ac5(0x166)]=_0x5cca4c[0x0],_0x55a055[_0x562843][_0x1c0ac5(0x132)]=_0x5cca4c[0x1],_0x55a055[_0x562843][_0x1c0ac5(0x9c)]=0x0,_0x55a055[_0x562843][_0x1c0ac5(0x17e)]=0x0,_0x55a055[_0x562843][_0x1c0ac5(0xf7)]='Floor',_0x55a055[_0x562843][_0x1c0ac5(0xb0)]=_0x5cca4c[0x5];}else{if(_0x562843==_0x3b758e){if(_0x5cca4c[0x0]=='A'&&_0x5cca4c[0x1]=='L'&&_0x5cca4c[0x2]=='L')console[_0x1c0ac5(0xcb)](_0x10eab6+_0x1c0ac5(0xe6)+_0x562843+_0x1c0ac5(0xe6)+_0x3b758e+_0x1c0ac5(0xe6)+_0x5cca4c+_0x1c0ac5(0x153)),_0x55a055[_0x562843][_0x1c0ac5(0x166)]=_0x5cca4c[0x0],_0x55a055[_0x562843][_0x1c0ac5(0x132)]=_0x5cca4c[0x1],_0x55a055[_0x562843][_0x1c0ac5(0x9c)]=0x0,_0x55a055[_0x562843][_0x1c0ac5(0x17e)]=0x0,_0x55a055[_0x562843][_0x1c0ac5(0xf7)]=_0x1c0ac5(0x12e),_0x55a055[_0x562843][_0x1c0ac5(0xb0)]=_0x5cca4c[0x3];else{var _0x26acfc;if(_0x5cca4c[0x4]=='L')_0x26acfc=_0x1c0ac5(0x15f);else _0x5cca4c[0x4]=='F'&&(_0x26acfc=_0x1c0ac5(0x12e));_0x55a055[_0x562843][_0x1c0ac5(0x166)]=_0x5cca4c[0x0],_0x55a055[_0x562843][_0x1c0ac5(0x132)]=_0x5cca4c[0x1],_0x55a055[_0x562843][_0x1c0ac5(0x9c)]=_0x5cca4c[0x2],_0x55a055[_0x562843]['to_bin']=_0x5cca4c[0x3],_0x55a055[_0x562843][_0x1c0ac5(0xf7)]=_0x26acfc,_0x55a055[_0x562843]['to_floorlevel']=_0x5cca4c[0x5];}}}}});}),_0x2ae81b['forEach']((_0x1482a1,_0x500e51)=>{var _0x359f11=_0x34a41c;_0x55a055[_0x500e51][_0x359f11(0x12c)]=_0x1482a1;}),_0x520350[_0x34a41c(0x12b)]((_0x450060,_0xd864bc)=>{var _0x39f523=_0x34a41c;_0x55a055[_0xd864bc][_0x39f523(0x176)]=_0x450060;}),_0x2afee2[_0x34a41c(0x12b)]((_0x5f3a45,_0x129f0c)=>{_0x55a055[_0x129f0c]['product_code']=_0x5f3a45;}),_0x209f25[_0x34a41c(0x12b)]((_0x39438e,_0x389ba9)=>{var _0x2a32c0=_0x34a41c;_0x55a055[_0x389ba9][_0x2a32c0(0x111)]=_0x39438e;}),_0x13ff78[_0x34a41c(0x12b)]((_0x3dba8f,_0x87eaeb)=>{var _0x19053e=_0x34a41c;_0x55a055[_0x87eaeb][_0x19053e(0x163)]=_0x3dba8f;}),_0x426f78[_0x34a41c(0x12b)]((_0x245834,_0x3d230d)=>{_0x55a055[_0x3d230d]['secondary_unit']=_0x245834;}),_0x168c76[_0x34a41c(0x12b)]((_0x355d3e,_0x28c4c8)=>{var _0x4ed9ef=_0x34a41c;_0x55a055[_0x28c4c8][_0x4ed9ef(0xb7)]=_0x355d3e;}),_0x4acb2f[_0x34a41c(0x12b)]((_0x56341a,_0x209d4c)=>{var _0x37e133=_0x34a41c;_0x55a055[_0x209d4c][_0x37e133(0x14c)]=_0x56341a;}),_0x28fdbf['forEach']((_0x226c25,_0xda5d71)=>{var _0x1ef45b=_0x34a41c;_0x55a055[_0xda5d71][_0x1ef45b(0xc0)]=_0x226c25;}),_0x220203[_0x34a41c(0x12b)]((_0x558919,_0x5014f6)=>{_0x55a055[_0x5014f6]['production_date']=_0x558919;}),_0x1b785f[_0x34a41c(0x12b)]((_0x5bc485,_0x333801)=>{var _0x3739d5=_0x34a41c;_0x55a055[_0x333801][_0x3739d5(0xc2)]=_0x5bc485;}),_0x2911c0['forEach']((_0x379172,_0x35b36a)=>{_0x55a055[_0x35b36a]['from_room_name']=_0x379172;}),_0x30e713[_0x34a41c(0x12b)]((_0x36e9b4,_0x1471e5)=>{_0x55a055[_0x1471e5]['to_room_name']=_0x36e9b4;});const _0xe6dcbd=_0x55a055[_0x34a41c(0xec)](_0x1f6c19=>_0x1f6c19[_0x34a41c(0x141)]!=='0'&&_0x1f6c19[_0x34a41c(0x141)]!==''||_0x1f6c19[_0x34a41c(0xb0)]!=='0'&&_0x1f6c19[_0x34a41c(0xb0)]!==''),_0x4999c7=new transfers({'date':_0x201d49,'from_warehouse':_0x193f0f,'to_warehouse':_0x44604b,'product':_0xe6dcbd,'note':_0x16d58d,'invoice':_0x4206e1}),_0xd0420f=await _0x4999c7['save']();_0x174850[_0x34a41c(0xe4)]('success',_0x34a41c(0x10c)),_0x3cc4ce['redirect'](_0x34a41c(0x116)+_0xd0420f['_id']);}catch(_0xc3b774){console[_0x34a41c(0xcb)](_0xc3b774),_0x3cc4ce[_0x34a41c(0x158)](0xc8)[_0x34a41c(0xc5)]({'errorMessage':_0xc3b774[_0x34a41c(0xac)]});}}),router[a0_0x100128(0xf8)](a0_0x100128(0x10d),auth,async(_0x2d0800,_0x112cb7)=>{var _0x5cc367=a0_0x100128;try{const {username:_0xfa29c2,email:_0x422e7f,role:_0x1d68de}=_0x2d0800['user'],_0x2ea9e6=_0x2d0800[_0x5cc367(0x112)],_0x55b227=await profile[_0x5cc367(0xe3)]({'email':_0x2ea9e6[_0x5cc367(0x184)]}),_0x2ebca4=await master_shop[_0x5cc367(0xf0)]();console[_0x5cc367(0xcb)](_0x5cc367(0x13e),_0x2ebca4);const _0x4542b6=await transfers[_0x5cc367(0x103)](_0x2d0800['params']['id']);let _0x5a50a1=new Date(_0x4542b6[_0x5cc367(0x14c)]),_0x5678e4=('0'+_0x5a50a1['getDate']())[_0x5cc367(0x15a)](-0x2),_0x3af404=('0'+(_0x5a50a1['getMonth']()+0x1))['slice'](-0x2),_0x392d1e=_0x5a50a1[_0x5cc367(0x17b)](),_0x368dd0=_0x392d1e+'-'+_0x3af404+'-'+_0x5678e4,_0x30b977;if(_0x2ea9e6[_0x5cc367(0x177)]==_0x5cc367(0x145)){const _0x4ce63e=await staff[_0x5cc367(0xe3)]({'email':_0x2ea9e6[_0x5cc367(0x184)]});_0x30b977=await warehouse[_0x5cc367(0xf0)]({'status':_0x5cc367(0xbb),'name':_0x4ce63e[_0x5cc367(0xcd)],'warehouse_category':'Raw\x20Materials'});}else _0x30b977=await warehouse['find']({'status':_0x5cc367(0xbb),'warehouse_category':_0x5cc367(0x154)});const _0x7f5bf2=await warehouse[_0x5cc367(0xe8)]([{'$match':{'name':_0x4542b6[_0x5cc367(0xf6)]}},{'$unwind':_0x5cc367(0xbd)},{'$group':{'_id':_0x5cc367(0x169),'name':{'$first':_0x5cc367(0x100)},'product_stock':{'$first':_0x5cc367(0x157)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x5cc367(0xe7)},'type':{'$first':_0x5cc367(0x104)},'floorlevel':{'$first':_0x5cc367(0xba)},'primary_code':{'$first':_0x5cc367(0x17f)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x5cc367(0x175)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x5cc367(0x156)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x5cc367(0xa5)},'room':{'$first':'$room'}}}]);if(_0x2ebca4[0x0][_0x5cc367(0x133)]==_0x5cc367(0x123)){var _0xa63cd7=users[_0x5cc367(0xca)];console[_0x5cc367(0xcb)](_0xa63cd7);}else{if(_0x2ebca4[0x0][_0x5cc367(0x133)]==_0x5cc367(0x167))var _0xa63cd7=users['Hindi'];else{if(_0x2ebca4[0x0][_0x5cc367(0x133)]==_0x5cc367(0xee))var _0xa63cd7=users['German'];else{if(_0x2ebca4[0x0][_0x5cc367(0x133)]=='Spanish')var _0xa63cd7=users[_0x5cc367(0x106)];else{if(_0x2ebca4[0x0]['language']==_0x5cc367(0x9d))var _0xa63cd7=users[_0x5cc367(0x9d)];else{if(_0x2ebca4[0x0][_0x5cc367(0x133)]=='Portuguese\x20(BR)')var _0xa63cd7=users[_0x5cc367(0x168)];else{if(_0x2ebca4[0x0][_0x5cc367(0x133)]=='Chinese')var _0xa63cd7=users[_0x5cc367(0xf3)];else{if(_0x2ebca4[0x0][_0x5cc367(0x133)]=='Arabic\x20(ae)')var _0xa63cd7=users['Arabic'];}}}}}}}_0x112cb7[_0x5cc367(0xc7)](_0x5cc367(0xb3),{'success':_0x2d0800[_0x5cc367(0xe4)](_0x5cc367(0x179)),'errors':_0x2d0800[_0x5cc367(0xe4)](_0x5cc367(0xb2)),'role':_0x2ea9e6,'profile':_0x55b227,'master_shop':_0x2ebca4,'warehouse':_0x30b977,'transfer':_0x4542b6,'stock':_0x7f5bf2,'language':_0xa63cd7});}catch(_0x4b83ee){console[_0x5cc367(0xcb)](_0x4b83ee);}}),router[a0_0x100128(0xad)](a0_0x100128(0x10d),auth,async(_0x2a2925,_0x5b87ff)=>{var _0x532363=a0_0x100128;try{const _0x4feaba=_0x2a2925[_0x532363(0xc6)]['id'],{from_warehouse:_0x277eb3,FromRoom_name:_0x466275,to_warehouse:_0x7fff55,ToRoom_name:_0xe35706}=_0x2a2925['body'],_0x3676ad=await transfers[_0x532363(0x103)]({'_id':_0x4feaba}),_0x287cfc=_0x3676ad[_0x532363(0x9e)]['map'](async _0x1f1b23=>{var _0x2227cf=_0x532363;if(_0x1f1b23[_0x2227cf(0x141)]>0x0){var _0x48a03e=await warehouse[_0x2227cf(0xe3)]({'name':_0x3676ad[_0x2227cf(0xf6)],'room':_0x1f1b23[_0x2227cf(0x114)],'warehouse_category':_0x2227cf(0x154)});const _0x32c509=_0x48a03e['product_details'][_0x2227cf(0xaf)](_0x5ace44=>{var _0x11acba=_0x2227cf;_0x5ace44[_0x11acba(0xfd)]==_0x1f1b23[_0x11acba(0xfd)]&&_0x5ace44[_0x11acba(0x14f)]==_0x1f1b23[_0x11acba(0xa0)]&&_0x5ace44[_0x11acba(0xb4)]==_0x1f1b23[_0x11acba(0xa9)]&&_0x5ace44[_0x11acba(0x16f)]==_0x1f1b23[_0x11acba(0x159)]&&_0x5ace44[_0x11acba(0xd7)]==_0x1f1b23['from_bay']&&_0x5ace44[_0x11acba(0x132)]==_0x1f1b23[_0x11acba(0xaa)]&&_0x5ace44[_0x11acba(0x166)]==_0x1f1b23[_0x11acba(0x155)]&&_0x5ace44[_0x11acba(0x14c)]==_0x1f1b23['expiry_date']&&_0x5ace44[_0x11acba(0xb7)]==_0x1f1b23['batch_code']&&_0x5ace44['production_date']==_0x1f1b23[_0x11acba(0x96)]&&_0x5ace44[_0x11acba(0x122)]==_0x1f1b23[_0x11acba(0xab)]&&_0x5ace44['_id']==_0x1f1b23[_0x11acba(0x17d)]&&(_0x5ace44[_0x11acba(0xea)]=_0x5ace44[_0x11acba(0xea)]-_0x1f1b23[_0x11acba(0x141)]);});}return _0x48a03e;});Promise[_0x532363(0x12a)](_0x287cfc)[_0x532363(0x99)](async _0x5ebf09=>{var _0x2acc96=_0x532363;try{for(const _0x16c135 of _0x5ebf09){await _0x16c135[_0x2acc96(0xc1)]();}try{const _0x1719dd=_0x3676ad[_0x2acc96(0x9e)][_0x2acc96(0xaf)](async _0x2c5e61=>{var _0x303e28=_0x2acc96;if(_0x2c5e61[_0x303e28(0x141)]>0x0){var _0x10d0c7=await warehouse[_0x303e28(0xe3)]({'name':_0x3676ad[_0x303e28(0x117)],'room':_0x2c5e61[_0x303e28(0x131)],'warehouse_category':_0x303e28(0x154)}),_0x5eb257=0x0;const _0x5a9aa8=_0x10d0c7['product_details'][_0x303e28(0xaf)](_0x2627cf=>{var _0xedef4e=_0x303e28;_0x2627cf['product_name']==_0x2c5e61[_0xedef4e(0xfd)]&&_0x2627cf[_0xedef4e(0x14f)]==_0x2c5e61[_0xedef4e(0xb0)]&&_0x2627cf[_0xedef4e(0xb4)]==_0x2c5e61[_0xedef4e(0xf7)]&&_0x2627cf[_0xedef4e(0x16f)]==_0x2c5e61[_0xedef4e(0x17e)]&&_0x2627cf[_0xedef4e(0xd7)]==_0x2c5e61['to_bay']&&_0x2627cf[_0xedef4e(0x132)]==_0x2c5e61[_0xedef4e(0x132)]&&_0x2627cf['storage']==_0x2c5e61[_0xedef4e(0x166)]&&_0x2627cf[_0xedef4e(0x14c)]==_0x2c5e61[_0xedef4e(0x14c)]&&_0x2627cf['batch_code']==_0x2c5e61[_0xedef4e(0xb7)]&&_0x2627cf[_0xedef4e(0x96)]==_0x2c5e61['production_date']&&_0x2627cf['invoice']==_0x2c5e61['To_invoice']&&(_0x2627cf[_0xedef4e(0xea)]=_0x2627cf[_0xedef4e(0xea)]+_0x2c5e61[_0xedef4e(0x141)],_0x5eb257++);});_0x5eb257=='0'&&(_0x10d0c7[_0x303e28(0x97)]=_0x10d0c7['product_details'][_0x303e28(0xd6)]({'product_name':_0x2c5e61[_0x303e28(0xfd)],'product_stock':_0x2c5e61[_0x303e28(0x141)],'bay':_0x2c5e61[_0x303e28(0x9c)],'bin':_0x2c5e61[_0x303e28(0x17e)],'type':_0x2c5e61['to_types'],'floorlevel':_0x2c5e61[_0x303e28(0xb0)],'storage':_0x2c5e61[_0x303e28(0x166)],'rack':_0x2c5e61['rack'],'product_code':_0x2c5e61[_0x303e28(0x183)],'primary_code':_0x2c5e61[_0x303e28(0x12c)],'secondary_code':_0x2c5e61[_0x303e28(0x176)],'maxProducts':_0x2c5e61[_0x303e28(0x111)],'storage':_0x2c5e61['storage'],'rack':_0x2c5e61[_0x303e28(0x132)],'expiry_date':_0x2c5e61['expiry_date'],'maxPerUnit':_0x2c5e61[_0x303e28(0xc0)],'batch_code':_0x2c5e61[_0x303e28(0xb7)],'production_date':_0x2c5e61[_0x303e28(0x96)]}));}return _0x10d0c7;});Promise[_0x2acc96(0x12a)](_0x1719dd)[_0x2acc96(0x99)](async _0x56fad6=>{var _0x1e47da=_0x2acc96;try{for(const _0x4aaee8 of _0x56fad6){await warehouse[_0x1e47da(0x13f)]({'_id':_0x4aaee8[_0x1e47da(0xbe)]},{'$addToSet':{'product_details':{'$each':_0x4aaee8[_0x1e47da(0x97)]}}});}_0x3676ad['finalize']='True';const _0x47b8fa=await _0x3676ad[_0x1e47da(0xc1)](),_0x1d0919=await master_shop[_0x1e47da(0xf0)](),_0x34b7d9=await email_settings[_0x1e47da(0xe3)](),_0x46349b=await supervisor_settings[_0x1e47da(0xf0)]();var _0x4665ce=_0x3676ad['product'],_0x11336a='',_0x1f933d;for(_0x1f933d in _0x4665ce){_0x11336a+='<tr>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4665ce[_0x1f933d][_0x1e47da(0xfd)]+_0x1e47da(0xa4)+_0x1e47da(0xcf)+_0x4665ce[_0x1f933d][_0x1e47da(0x183)]+_0x1e47da(0xa4)+_0x1e47da(0xcf)+_0x4665ce[_0x1f933d][_0x1e47da(0x141)]+'</td>'+_0x1e47da(0xcf)+_0x4665ce[_0x1f933d][_0x1e47da(0x163)]+_0x1e47da(0xa4)+_0x1e47da(0xcf)+_0x4665ce[_0x1f933d][_0x1e47da(0xd8)]+_0x1e47da(0xa4)+_0x1e47da(0xcf)+_0x3676ad[_0x1e47da(0x117)]+'</td>'+_0x1e47da(0xcf)+_0x4665ce[_0x1f933d][_0x1e47da(0x131)]+_0x1e47da(0xa4)+_0x1e47da(0xcf)+_0x4665ce[_0x1f933d][_0x1e47da(0x166)]+_0x4665ce[_0x1f933d][_0x1e47da(0x132)]+_0x4665ce[_0x1f933d][_0x1e47da(0x9c)]+_0x4665ce[_0x1f933d][_0x1e47da(0x17e)]+_0x4665ce[_0x1f933d]['to_types'][0x0]+_0x4665ce[_0x1f933d][_0x1e47da(0xb0)]+_0x1e47da(0xa4),_0x1e47da(0xd5);}let _0x420d0c=nodemailer[_0x1e47da(0xed)]({'host':_0x34b7d9[_0x1e47da(0xa6)],'port':Number(_0x34b7d9[_0x1e47da(0x15c)]),'secure':![],'auth':{'user':_0x34b7d9['email'],'pass':_0x34b7d9[_0x1e47da(0x160)]}}),_0x22a100={'from':_0x34b7d9[_0x1e47da(0x184)],'to':_0x46349b[0x0]['RMSEmail'],'subject':_0x1e47da(0xda),'attachments':[{'filename':_0x1e47da(0xff),'path':__dirname+_0x1e47da(0x102)+'/upload/'+_0x1d0919[0x0][_0x1e47da(0x107)],'cid':'logo'}],'html':_0x1e47da(0x15b)+_0x1e47da(0x14d)+'</head><body>'+_0x1e47da(0x17a)+_0x1e47da(0xb8)+_0x1e47da(0x17a)+_0x1e47da(0xc4)+_0x1e47da(0x101)+_0x1e47da(0x17a)+_0x1e47da(0x180)+_0x1d0919[0x0][_0x1e47da(0x121)]+_0x1e47da(0xf5)+_0x1e47da(0x101)+_0x1e47da(0x101)+'<hr\x20class=\x22my-3\x22>'+_0x1e47da(0x17a)+_0x1e47da(0x13a)+_0x1e47da(0x16a)+_0x3676ad[_0x1e47da(0x122)]+'\x20'+'<span\x20style=\x22float:\x20right;\x22>'+_0x1e47da(0x150)+_0x3676ad[_0x1e47da(0x16c)]+'\x20'+_0x1e47da(0x151)+_0x1e47da(0x129)+'</div>'+_0x1e47da(0x149)+_0x1e47da(0x128)+_0x1e47da(0xc9)+_0x1e47da(0xdd)+_0x1e47da(0xc8)+_0x1e47da(0x143)+_0x1e47da(0xe9)+_0x1e47da(0x172)+_0x1e47da(0xef)+_0x1e47da(0xa1)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>'+_0x1e47da(0xd5)+_0x1e47da(0xfe)+_0x1e47da(0xb5)+'\x20'+_0x11336a+'\x20'+_0x1e47da(0x14a)+'</table>'+_0x1e47da(0x17a)+_0x1e47da(0xd2)+_0x1e47da(0xde)+_0x1d0919[0x0][_0x1e47da(0x121)]+'</h5>'+'</div>'+_0x1e47da(0x101)+_0x1e47da(0x12f)};_0x420d0c[_0x1e47da(0xa3)](_0x22a100,function(_0x2b481d,_0xb1c008){var _0x57b0dd=_0x1e47da;_0x2b481d?(console['log'](_0x2b481d),console['log']('Error\x20Occurs')):console[_0x57b0dd(0xcb)]('Email\x20sent\x20successfully');}),_0x2a2925['flash'](_0x1e47da(0x179),'Transfer\x20Finalize\x20Successfully'),_0x5b87ff[_0x1e47da(0xa7)](_0x1e47da(0xdc)+_0x47b8fa[_0x1e47da(0xbe)]);}catch(_0x793cfd){console[_0x1e47da(0xd1)](_0x793cfd),_0x5b87ff['status'](0x1f4)[_0x1e47da(0xc5)]({'Perror':_0x1e47da(0xcc),'message':_0x793cfd[_0x1e47da(0xac)]});}})['catch'](_0x141b7c=>{var _0x1aa24a=_0x2acc96;console[_0x1aa24a(0xd1)](_0x141b7c),_0x5b87ff[_0x1aa24a(0x158)](0x1f4)['json']({'Perror':'An\x20error\x20occurred.'});});}catch(_0x42d878){_0x5b87ff['json'](_0x42d878);}}catch(_0x38d027){console[_0x2acc96(0xd1)](_0x38d027),_0x5b87ff['status'](0x1f4)[_0x2acc96(0xc5)]({'Merror':'An\x20error\x20occurred\x20while\x20saving\x20data.','Message':_0x38d027['message']});}})[_0x532363(0x11d)](_0x5b8fc0=>{var _0x5d8730=_0x532363;console['error'](_0x5b8fc0),_0x5b87ff[_0x5d8730(0x158)](0x1f4)[_0x5d8730(0xc5)]({'Merror':_0x5d8730(0x161)});});}catch(_0x10e2b5){console[_0x532363(0xcb)](_0x10e2b5);}});function BayBinSelected(_0x509dc1,_0x141c79){var _0x2107cf=a0_0x100128,_0xfa04b=[],_0x385b00=[],_0x3e8221=[],_0x63ff87=[],_0x199dfa=[],_0x4d3a92=[];let _0x2ffbc1=[];if(_0x509dc1==_0x2107cf(0xe1))switch(_0x141c79){case _0x2107cf(0x14b):_0xfa04b=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x385b00=[0x1,0x2],_0x63ff87=[0x1,0x2,0x3,0x4,0x5],_0x3e8221=[_0x2107cf(0x15f),_0x2107cf(0x12e)],_0x199dfa=['D'],_0x4d3a92=['A'];break;case _0x2107cf(0xdb):_0xfa04b=[0x6,0x5,0x4,0x3,0x2,0x1],_0x385b00=[0x1,0x2],_0x63ff87=[0x1,0x2,0x3,0x4,0x5],_0x3e8221=['Level',_0x2107cf(0x12e)],_0x199dfa=['D'],_0x4d3a92=['B'];break;case'Shelves':_0xfa04b=[0x0],_0x385b00=[0x0],_0x63ff87=[0x1,0x2,0x3,0x4,0x5],_0x3e8221=['Floor'],_0x199dfa=['D'],_0x4d3a92=['S'];break;case _0x2107cf(0x144):_0xfa04b=[0x0],_0x385b00=[0x0],_0x63ff87=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x3e8221=[_0x2107cf(0x12e)],_0x199dfa=['D'],_0x4d3a92=['R'];break;}else{if(_0x509dc1==_0x2107cf(0x109))switch(_0x141c79){case'Rack\x20A':_0xfa04b=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x385b00=['B','F'],_0x63ff87=[0x1,0x2,0x3,0x4,0x5],_0x3e8221=['Level','Floor'],_0x199dfa=['C'],_0x4d3a92=['A'];break;case _0x2107cf(0xdb):_0xfa04b=[0x5,0x4,0x3,0x2,0x1],_0x385b00=['F','B','S'],_0x63ff87=[0x1,0x2,0x3,0x4,0x5],_0x3e8221=[_0x2107cf(0x15f),_0x2107cf(0x12e)],_0x199dfa=['C'],_0x4d3a92=['B'];break;case _0x2107cf(0xb9):_0xfa04b=[0x1,0x2,0x3,0x4,0x5],_0x385b00=['B','F','S'],_0x63ff87=[0x5,0x4,0x3,0x2,0x1],_0x3e8221=[_0x2107cf(0x15f),_0x2107cf(0x12e)],_0x199dfa=['C'],_0x4d3a92=['C'];break;case'Rack\x20D':_0xfa04b=[0x5,0x4,0x3,0x2,0x1],_0x385b00=['F','B','S'],_0x63ff87=[0x1,0x2,0x3,0x4,0x5],_0x3e8221=[_0x2107cf(0x15f),_0x2107cf(0x12e)],_0x199dfa=['C'],_0x4d3a92=['D'];break;case _0x2107cf(0xc3):_0xfa04b=[0x4,0x3,0x2,0x1],_0x385b00=[0x1,0x2],_0x63ff87=[0x1,0x2,0x3,0x4,0x5],_0x3e8221=[_0x2107cf(0x15f),_0x2107cf(0x12e)],_0x199dfa=['C'],_0x4d3a92=['E'];break;case'Rack\x20F':_0xfa04b=[0x1,0x2,0x3],_0x385b00=[0x1,0x2],_0x63ff87=[0x1,0x2,0x3,0x4,0x5],_0x3e8221=[_0x2107cf(0x15f)],_0x199dfa=['C'],_0x4d3a92=['F'];break;}}return{'levels':_0xfa04b,'Isle':_0x385b00,'rack':_0x63ff87,'type':_0x3e8221,'storage':_0x199dfa,'rak':_0x4d3a92};}router['get']('/view/:id',auth,async(_0x4ea35d,_0x3004e2)=>{var _0x5c3be8=a0_0x100128;try{const {username:_0x1d60b7,email:_0x5084ce,role:_0x3adca8}=_0x4ea35d[_0x5c3be8(0x112)],_0x2758a3=_0x4ea35d['user'],_0x4bbde7=await profile[_0x5c3be8(0xe3)]({'email':_0x2758a3[_0x5c3be8(0x184)]}),_0x553014=await master_shop[_0x5c3be8(0xf0)](),_0x56dbc8=await transfers[_0x5c3be8(0x103)](_0x4ea35d[_0x5c3be8(0xc6)]['id']);let _0x443b13;if(_0x2758a3[_0x5c3be8(0x177)]==_0x5c3be8(0x145)){const _0x348966=await staff[_0x5c3be8(0xe3)]({'email':_0x2758a3[_0x5c3be8(0x184)]});_0x443b13=await warehouse['aggregate']([{'$match':{'status':'Enabled','name':_0x348966[_0x5c3be8(0xcd)],'warehouse_category':_0x5c3be8(0x154)}},{'$group':{'_id':_0x5c3be8(0x126),'name':{'$first':_0x5c3be8(0x126)}}}]);}else _0x443b13=await warehouse[_0x5c3be8(0xe8)]([{'$match':{'status':_0x5c3be8(0xbb),'warehouse_category':_0x5c3be8(0x154)}},{'$group':{'_id':_0x5c3be8(0x126),'name':{'$first':_0x5c3be8(0x126)}}}]);const _0x3e0474=await warehouse[_0x5c3be8(0xe8)]([{'$match':{'name':_0x56dbc8[_0x5c3be8(0xf6)],'warehouse_category':_0x5c3be8(0x154)}},{'$unwind':_0x5c3be8(0xbd)},{'$group':{'_id':_0x5c3be8(0x169),'name':{'$first':_0x5c3be8(0x100)},'product_stock':{'$first':_0x5c3be8(0x157)},'bay':{'$first':_0x5c3be8(0x11f)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x5c3be8(0x104)},'floorlevel':{'$first':_0x5c3be8(0xba)},'primary_code':{'$first':_0x5c3be8(0x17f)},'secondary_code':{'$first':_0x5c3be8(0xdf)},'product_code':{'$first':_0x5c3be8(0x175)},'storage':{'$first':_0x5c3be8(0x148)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x5c3be8(0x174)},'production_date':{'$first':_0x5c3be8(0xa5)},'room':{'$first':_0x5c3be8(0x164)}}}]),_0x29bb47=await product['find']({}),_0x4d4129=BayBinSelected(_0x56dbc8[_0x5c3be8(0x117)],_0x56dbc8['to_room']);if(_0x553014[0x0][_0x5c3be8(0x133)]==_0x5c3be8(0x123)){var _0x3f4bf1=users['English'];console['log'](_0x3f4bf1);}else{if(_0x553014[0x0][_0x5c3be8(0x133)]==_0x5c3be8(0x167))var _0x3f4bf1=users['Hindi'];else{if(_0x553014[0x0][_0x5c3be8(0x133)]==_0x5c3be8(0xee))var _0x3f4bf1=users[_0x5c3be8(0xee)];else{if(_0x553014[0x0][_0x5c3be8(0x133)]==_0x5c3be8(0x106))var _0x3f4bf1=users[_0x5c3be8(0x106)];else{if(_0x553014[0x0][_0x5c3be8(0x133)]==_0x5c3be8(0x9d))var _0x3f4bf1=users['French'];else{if(_0x553014[0x0][_0x5c3be8(0x133)]==_0x5c3be8(0xf1))var _0x3f4bf1=users[_0x5c3be8(0x168)];else{if(_0x553014[0x0][_0x5c3be8(0x133)]==_0x5c3be8(0xf3))var _0x3f4bf1=users[_0x5c3be8(0xf3)];else{if(_0x553014[0x0][_0x5c3be8(0x133)]==_0x5c3be8(0xa8))var _0x3f4bf1=users['Arabic'];}}}}}}}_0x3004e2[_0x5c3be8(0xc7)](_0x5c3be8(0x173),{'success':_0x4ea35d['flash'](_0x5c3be8(0x179)),'errors':_0x4ea35d[_0x5c3be8(0xe4)]('errors'),'role':_0x2758a3,'profile':_0x4bbde7,'master_shop':_0x553014,'warehouse':_0x443b13,'transfer':_0x56dbc8,'stock':_0x3e0474,'unit':_0x29bb47,'language':_0x3f4bf1});}catch(_0x5036e0){console[_0x5c3be8(0xcb)](_0x5036e0);}}),router[a0_0x100128(0xad)]('/view/:id',auth,async(_0x148ce4,_0x44a1e7)=>{var _0x3f256a=a0_0x100128;try{const _0x5ded4c=_0x148ce4[_0x3f256a(0xc6)]['id'],_0x15ef7a=await transfers[_0x3f256a(0x103)](_0x5ded4c);_0x44a1e7['json'](_0x148ce4[_0x3f256a(0x162)]);return;const {date:_0x14ffa3,from_warehouse:_0x320739,FromRoom_name:_0x689bab,to_warehouse:_0x5d17f5,ToRoom_name:_0x282d93,prod_name:_0x1026f7,from_prod_qty:_0x25fa80,from_prod_level:_0x5f3643,from_prod_isle:_0x1a50a7,from_prod_pallet:_0x10f0ec,to_prod_qty:_0x54cad2,to_prod_level:_0x18a07f,to_prod_isle:_0x779f77,to_prod_pallet:_0x49a790,primary_code:_0x2a05d4,secondary_code:_0x57cb02,product_code3:_0x33c88d,note:_0x2662d8,invoice:_0x128a03,expiry_date:_0x4fbdc6}=_0x148ce4[_0x3f256a(0x162)];if(typeof _0x1026f7==_0x3f256a(0xbc))var _0x3b402d=[_0x148ce4[_0x3f256a(0x162)][_0x3f256a(0xd9)]],_0x4d6156=[_0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x139)]],_0x566ba9=[_0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x11e)]],_0x2dd0f2=[_0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x182)]],_0x503f05=[_0x148ce4['body']['from_prod_pallet']],_0x10487a=[_0x148ce4[_0x3f256a(0x162)][_0x3f256a(0xa9)]],_0x132564=[_0x148ce4[_0x3f256a(0x162)]['to_prod_qty']],_0xdecfa8=[_0x148ce4[_0x3f256a(0x162)]['to_prod_level']],_0x1d43df=[_0x148ce4[_0x3f256a(0x162)][_0x3f256a(0xfc)]],_0x358378=[_0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x142)]],_0xa3d231=[_0x148ce4[_0x3f256a(0x162)]['to_types']],_0xe41445=[_0x148ce4[_0x3f256a(0x162)]['storage']],_0x29b78f=[_0x148ce4['body'][_0x3f256a(0xd3)]],_0x5abb33=[_0x148ce4[_0x3f256a(0x162)]['primary_code']],_0xa4467=[_0x148ce4[_0x3f256a(0x162)]['secondary_code']],_0x261ec7=[_0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x124)]],_0x4ad21b=[_0x148ce4['body'][_0x3f256a(0x17c)]],_0x3a3a7=[_0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x163)]],_0x12a8e1=[_0x148ce4['body'][_0x3f256a(0xd8)]],_0x64b126=[_0x148ce4['body'][_0x3f256a(0xb7)]],_0x4dc970=[_0x148ce4[_0x3f256a(0x162)]['expiry_date']],_0x4ccc75=[_0x148ce4['body'][_0x3f256a(0x155)]],_0x39554e=[_0x148ce4['body'][_0x3f256a(0x178)]];else var _0x3b402d=[..._0x148ce4[_0x3f256a(0x162)]['prod_name']],_0xe41445=[..._0x148ce4[_0x3f256a(0x162)]['storage']],_0x29b78f=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0xd3)]],_0x10487a=[..._0x148ce4[_0x3f256a(0x162)]['from_types']],_0xa3d231=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0xf7)]],_0x4d6156=[..._0x148ce4[_0x3f256a(0x162)]['from_prod_qty']],_0x566ba9=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x11e)]],_0x2dd0f2=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x182)]],_0x503f05=[..._0x148ce4[_0x3f256a(0x162)]['from_prod_pallet']],_0x132564=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0xfb)]],_0xdecfa8=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x9f)]],_0x1d43df=[..._0x148ce4['body'][_0x3f256a(0xfc)]],_0x358378=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x142)]],_0x5abb33=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x12c)]],_0xa4467=[..._0x148ce4['body']['secondary_code']],_0x261ec7=[..._0x148ce4['body'][_0x3f256a(0x124)]],_0x4ad21b=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x17c)]],_0x3a3a7=[..._0x148ce4[_0x3f256a(0x162)]['unit']],_0x12a8e1=[..._0x148ce4['body']['secondary_unit']],_0x64b126=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0xb7)]],_0x4dc970=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x14c)]],_0x4ccc75=[..._0x148ce4['body'][_0x3f256a(0x155)]],_0x39554e=[..._0x148ce4[_0x3f256a(0x162)][_0x3f256a(0x178)]];const _0x3a9644=_0x3b402d[_0x3f256a(0xaf)](_0x134859=>{return _0x134859={'product_name':_0x134859};});_0x4d6156['forEach']((_0x50e0b1,_0x3f1cf8)=>{var _0x3910b4=_0x3f256a;_0x3a9644[_0x3f1cf8][_0x3910b4(0x113)]=_0x50e0b1;}),_0x566ba9[_0x3f256a(0x12b)]((_0x31efd9,_0x32de37)=>{var _0x1938eb=_0x3f256a;_0x3a9644[_0x32de37][_0x1938eb(0x16b)]=_0x31efd9;}),_0x2dd0f2[_0x3f256a(0x12b)]((_0x1f643a,_0x59d8e5)=>{var _0x2c6fb2=_0x3f256a;_0x3a9644[_0x59d8e5][_0x2c6fb2(0x159)]=_0x1f643a;}),_0x503f05[_0x3f256a(0x12b)]((_0x17c2bd,_0x24ba44)=>{_0x3a9644[_0x24ba44]['from_floorlevel']=_0x17c2bd;}),_0x132564[_0x3f256a(0x12b)]((_0x536230,_0x1eaa80)=>{var _0x2bff4e=_0x3f256a;_0x3a9644[_0x1eaa80][_0x2bff4e(0x141)]=_0x536230;}),_0xdecfa8[_0x3f256a(0x12b)]((_0x5410c1,_0x19a9a9)=>{var _0x2bfb23=_0x3f256a;_0x3a9644[_0x19a9a9][_0x2bfb23(0x9c)]=_0x5410c1;}),_0x1d43df[_0x3f256a(0x12b)]((_0x258a6d,_0x3b3db9)=>{var _0x441e61=_0x3f256a;_0x3a9644[_0x3b3db9][_0x441e61(0x17e)]=_0x258a6d;}),_0x358378[_0x3f256a(0x12b)]((_0x10d018,_0x4a842c)=>{var _0xef392a=_0x3f256a;_0x3a9644[_0x4a842c][_0xef392a(0xb0)]=_0x10d018;}),_0x5abb33[_0x3f256a(0x12b)]((_0x2174aa,_0x544fca)=>{var _0x36cfaa=_0x3f256a;_0x3a9644[_0x544fca][_0x36cfaa(0x12c)]=_0x2174aa;}),_0xa4467[_0x3f256a(0x12b)]((_0x28762c,_0x39579e)=>{var _0x1ca788=_0x3f256a;_0x3a9644[_0x39579e][_0x1ca788(0x176)]=_0x28762c;}),_0x261ec7[_0x3f256a(0x12b)]((_0xc059fd,_0x3bdcaa)=>{_0x3a9644[_0x3bdcaa]['product_code']=_0xc059fd;}),_0x4ad21b[_0x3f256a(0x12b)]((_0x53030f,_0x3da722)=>{var _0xe5d549=_0x3f256a;_0x3a9644[_0x3da722][_0xe5d549(0x111)]=_0x53030f;}),_0x3a3a7[_0x3f256a(0x12b)]((_0x1db964,_0x44fdcd)=>{var _0x4b2217=_0x3f256a;_0x3a9644[_0x44fdcd][_0x4b2217(0x163)]=_0x1db964;}),_0x12a8e1[_0x3f256a(0x12b)]((_0x29c452,_0x2ea0a3)=>{var _0x1d7e5d=_0x3f256a;_0x3a9644[_0x2ea0a3][_0x1d7e5d(0xd8)]=_0x29c452;}),_0x64b126['forEach']((_0x2fb8eb,_0x975ba)=>{var _0x21d532=_0x3f256a;_0x3a9644[_0x975ba][_0x21d532(0xb7)]=_0x2fb8eb;}),_0x4dc970[_0x3f256a(0x12b)]((_0x24fd84,_0xddb18)=>{_0x3a9644[_0xddb18]['expiry_date']=_0x24fd84;}),_0xe41445[_0x3f256a(0x12b)]((_0x53b02f,_0x16137a)=>{var _0x4a555c=_0x3f256a;_0x3a9644[_0x16137a][_0x4a555c(0x166)]=_0x53b02f;}),_0x29b78f[_0x3f256a(0x12b)]((_0x179cd5,_0x14c518)=>{var _0x22f7a3=_0x3f256a;_0x3a9644[_0x14c518][_0x22f7a3(0x132)]=_0x179cd5;}),_0x10487a['forEach']((_0x273d02,_0x5b1fab)=>{_0x3a9644[_0x5b1fab]['from_types']=_0x273d02;}),_0xa3d231[_0x3f256a(0x12b)]((_0x4fa1ad,_0x53d95d)=>{var _0x4c41d2=_0x3f256a;_0x3a9644[_0x53d95d][_0x4c41d2(0xf7)]=_0x4fa1ad;}),_0x4ccc75[_0x3f256a(0x12b)]((_0x3fe4fb,_0x16ffd5)=>{_0x3a9644[_0x16ffd5]['from_storage']=_0x3fe4fb;}),_0x39554e[_0x3f256a(0x12b)]((_0xc1f30f,_0x39c666)=>{var _0x2b4672=_0x3f256a;_0x3a9644[_0x39c666][_0x2b4672(0xaa)]=_0xc1f30f;});const _0x276f0a=_0x3a9644[_0x3f256a(0xec)](_0x236af8=>_0x236af8[_0x3f256a(0x141)]!=='0'&&_0x236af8[_0x3f256a(0x141)]!==''||_0x236af8[_0x3f256a(0xb0)]!=='0'&&_0x236af8[_0x3f256a(0xb0)]!=='');var _0x1b713b=0x0;_0x276f0a[_0x3f256a(0x12b)](_0x399c49=>{var _0x1d362a=_0x3f256a;parseInt(_0x399c49[_0x1d362a(0x113)])<parseInt(_0x399c49['to_quantity'])&&_0x1b713b++;});if(_0x1b713b!=0x0)return _0x148ce4[_0x3f256a(0xe4)](_0x3f256a(0xb2),_0x3f256a(0xf2)),_0x44a1e7['redirect'](_0x3f256a(0x130));const _0x46c65c=await warehouse[_0x3f256a(0xe3)]({'name':_0x15ef7a[_0x3f256a(0xf6)],'room':_0x15ef7a['from_room']});_0x15ef7a['product'][_0x3f256a(0x12b)](_0x569006=>{var _0x4e9569=_0x3f256a;if(_0x569006['to_quantity']>0x0){const _0x3ad2d1=_0x46c65c[_0x4e9569(0x97)]['map'](_0x327771=>{var _0x1d0233=_0x4e9569;_0x327771[_0x1d0233(0xfd)]==_0x569006['product_name']&&_0x327771[_0x1d0233(0x14f)]==_0x569006['from_floorlevel']&&_0x327771[_0x1d0233(0xb4)]==_0x569006[_0x1d0233(0xa9)]&&_0x327771[_0x1d0233(0x16f)]==_0x569006[_0x1d0233(0x159)]&&_0x327771['bay']==_0x569006[_0x1d0233(0x16b)]&&_0x327771[_0x1d0233(0x132)]==_0x569006['from_rack']&&_0x327771[_0x1d0233(0x166)]==_0x569006[_0x1d0233(0x155)]&&(_0x327771[_0x1d0233(0xea)]=parseInt(_0x327771[_0x1d0233(0xea)])+parseInt(_0x569006['to_quantity']));});}}),await _0x46c65c[_0x3f256a(0xc1)]();const _0x35e53f=await warehouse[_0x3f256a(0xe3)]({'name':_0x15ef7a['to_warehouse'],'room':_0x15ef7a[_0x3f256a(0xae)]});_0x15ef7a[_0x3f256a(0x9e)][_0x3f256a(0x12b)](_0x1920c5=>{var _0x2f0867=_0x3f256a;if(_0x1920c5[_0x2f0867(0x141)]>0x0){const _0x6d0080=_0x35e53f['product_details'][_0x2f0867(0xaf)](_0x429df4=>{var _0x34555d=_0x2f0867;_0x429df4[_0x34555d(0xfd)]==_0x1920c5[_0x34555d(0xfd)]&&_0x429df4['floorlevel']==_0x1920c5[_0x34555d(0xb0)]&&_0x429df4[_0x34555d(0xb4)]==_0x1920c5['to_types']&&_0x429df4[_0x34555d(0x16f)]==_0x1920c5[_0x34555d(0x17e)]&&_0x429df4[_0x34555d(0xd7)]==_0x1920c5[_0x34555d(0x9c)]&&_0x429df4[_0x34555d(0x132)]==_0x1920c5['rack']&&_0x429df4['storage']==_0x1920c5[_0x34555d(0x166)]&&(_0x429df4[_0x34555d(0xea)]=parseInt(_0x429df4[_0x34555d(0xea)])-parseInt(_0x1920c5['to_quantity']));});}}),await _0x35e53f['save'](),_0x15ef7a[_0x3f256a(0x16c)]=_0x14ffa3,_0x15ef7a[_0x3f256a(0xf6)]=_0x320739,_0x15ef7a['to_warehouse']=_0x5d17f5,_0x15ef7a[_0x3f256a(0x9e)]=_0x276f0a,_0x15ef7a['note']=_0x2662d8,_0x15ef7a[_0x3f256a(0x122)]=_0x128a03;const _0x173a30=await _0x15ef7a[_0x3f256a(0xc1)]();console[_0x3f256a(0xcb)](_0x173a30);const _0x59ff84=await warehouse[_0x3f256a(0xe3)]({'name':_0x320739,'room':_0x689bab});_0x173a30[_0x3f256a(0x9e)][_0x3f256a(0x12b)](_0x1f3803=>{var _0x46c53f=_0x3f256a;if(_0x1f3803[_0x46c53f(0x141)]>0x0){const _0x43c70a=_0x59ff84[_0x46c53f(0x97)][_0x46c53f(0xaf)](_0x475793=>{var _0x1c95ae=_0x46c53f;_0x475793[_0x1c95ae(0xfd)]==_0x1f3803[_0x1c95ae(0xfd)]&&_0x475793[_0x1c95ae(0x14f)]==_0x1f3803[_0x1c95ae(0xa0)]&&_0x475793[_0x1c95ae(0xb4)]==_0x1f3803[_0x1c95ae(0xa9)]&&_0x475793[_0x1c95ae(0x16f)]==_0x1f3803['from_bin']&&_0x475793[_0x1c95ae(0xd7)]==_0x1f3803[_0x1c95ae(0x16b)]&&_0x475793[_0x1c95ae(0x132)]==_0x1f3803['from_rack']&&_0x475793[_0x1c95ae(0x166)]==_0x1f3803[_0x1c95ae(0x155)]&&(_0x475793[_0x1c95ae(0xea)]=parseInt(_0x475793[_0x1c95ae(0xea)])-parseInt(_0x1f3803[_0x1c95ae(0x141)]));});}}),await _0x59ff84[_0x3f256a(0xc1)]();const _0x85018e=await warehouse[_0x3f256a(0xe3)]({'name':_0x5d17f5,'room':_0x282d93});_0x173a30[_0x3f256a(0x9e)][_0x3f256a(0x12b)](_0x17a8f3=>{var _0x36eb51=_0x3f256a;if(_0x17a8f3[_0x36eb51(0x141)]>0x0){var _0x566e15=0x0;const _0x46af69=_0x85018e[_0x36eb51(0x97)][_0x36eb51(0xaf)](_0x3167ba=>{var _0x3bb0bc=_0x36eb51;_0x3167ba[_0x3bb0bc(0xfd)]==_0x17a8f3[_0x3bb0bc(0xfd)]&&_0x3167ba[_0x3bb0bc(0x14f)]==_0x17a8f3[_0x3bb0bc(0xb0)]&&_0x3167ba[_0x3bb0bc(0xb4)]==_0x17a8f3['to_types']&&_0x3167ba['bin']==_0x17a8f3[_0x3bb0bc(0x17e)]&&_0x3167ba[_0x3bb0bc(0xd7)]==_0x17a8f3['to_bay']&&_0x3167ba[_0x3bb0bc(0x132)]==_0x17a8f3[_0x3bb0bc(0x132)]&&_0x3167ba[_0x3bb0bc(0x166)]==_0x17a8f3[_0x3bb0bc(0x166)]&&(_0x3167ba[_0x3bb0bc(0xea)]=parseInt(_0x3167ba[_0x3bb0bc(0xea)])+parseInt(_0x17a8f3[_0x3bb0bc(0x141)]),_0x566e15++);});_0x566e15=='0'&&(_0x85018e[_0x36eb51(0x97)]=_0x85018e['product_details'][_0x36eb51(0xd6)]({'product_name':_0x17a8f3[_0x36eb51(0xfd)],'product_stock':_0x17a8f3['to_quantity'],'bay':_0x17a8f3[_0x36eb51(0x9c)],'bin':_0x17a8f3[_0x36eb51(0x17e)],'type':_0x17a8f3[_0x36eb51(0xf7)],'floorlevel':_0x17a8f3[_0x36eb51(0xb0)],'storage':_0x17a8f3[_0x36eb51(0x166)],'rack':_0x17a8f3['rack'],'product_code':_0x17a8f3[_0x36eb51(0x183)],'primary_code':_0x17a8f3['primary_code'],'secondary_code':_0x17a8f3[_0x36eb51(0x176)],'maxProducts':_0x17a8f3[_0x36eb51(0x111)],'storage':_0x17a8f3[_0x36eb51(0x166)],'rack':_0x17a8f3[_0x36eb51(0x132)]}));}}),await _0x85018e[_0x3f256a(0xc1)](),_0x148ce4[_0x3f256a(0xe4)](_0x3f256a(0x179),_0x3f256a(0x13b)),_0x44a1e7['redirect'](_0x3f256a(0x10a));}catch(_0x54e9b5){console['log'](_0x54e9b5);}}),router[a0_0x100128(0xad)](a0_0x100128(0x125),async(_0x5c7a7a,_0x4bf097)=>{var _0x105faa=a0_0x100128;const {FromWareHouse:_0x4a1a13,FromRoom:_0x35fd08,ToWarehouse:_0x214eb5,ToRoom:_0x186c8d,primary_code:_0x187e86,Roomslist:_0x4bcc42}=_0x5c7a7a['body'],_0x49f1d3=_0x4bcc42['split'](','),_0x487793=[];async function _0x3db9a0(_0x4ed2d0){var _0x1cac55=a0_0x3097;const _0x12b605=await warehouse[_0x1cac55(0xe8)]([{'$match':{'name':_0x4a1a13,'room':_0x4ed2d0}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x187e86}},{'$group':{'_id':_0x1cac55(0x169),'name':{'$first':_0x1cac55(0x100)},'instock':{'$first':_0x1cac55(0x157)},'primary_code':{'$first':_0x1cac55(0x17f)},'secondary_code':{'$first':_0x1cac55(0xdf)},'product_code':{'$first':_0x1cac55(0x175)},'level':{'$first':_0x1cac55(0x11f)},'isle':{'$first':_0x1cac55(0xe7)},'type':{'$first':_0x1cac55(0x104)},'pallet':{'$first':_0x1cac55(0xba)},'unit':{'$first':_0x1cac55(0x135)},'secondary_unit':{'$first':_0x1cac55(0x14e)},'storage':{'$first':_0x1cac55(0x148)},'rack':{'$first':_0x1cac55(0x156)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x1cac55(0xa5)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0x1cac55(0x13c)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x1cac55(0x164)},'maxProducts':{'$first':'$product_details.maxProducts'},'invoice_product':{'$first':'$product_details.invoice'}}}]),_0x25cd2e=await warehouse[_0x1cac55(0xe8)]([{'$match':{'name':_0x4a1a13,'room':_0x4ed2d0}},{'$unwind':_0x1cac55(0xbd)},{'$match':{'product_details.secondary_code':_0x187e86}},{'$group':{'_id':_0x1cac55(0x169),'name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x1cac55(0x157)},'primary_code':{'$first':_0x1cac55(0x17f)},'secondary_code':{'$first':_0x1cac55(0xdf)},'product_code':{'$first':_0x1cac55(0x175)},'level':{'$first':_0x1cac55(0x11f)},'isle':{'$first':'$product_details.bin'},'type':{'$first':_0x1cac55(0x104)},'pallet':{'$first':_0x1cac55(0xba)},'unit':{'$first':_0x1cac55(0x135)},'secondary_unit':{'$first':_0x1cac55(0x14e)},'storage':{'$first':_0x1cac55(0x148)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x1cac55(0xa5)},'batch_code':{'$first':_0x1cac55(0xd4)},'maxPerUnit':{'$first':_0x1cac55(0x13c)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x1cac55(0x164)},'maxProducts':{'$first':_0x1cac55(0x10b)},'invoice_product':{'$first':'$product_details.invoice'}}}]);if(_0x12b605[_0x1cac55(0x15e)]>0x0)_0x487793['push'](_0x12b605);else _0x25cd2e['length']>0x0&&_0x487793[_0x1cac55(0x9a)](_0x25cd2e);}const _0x252aa7=_0x49f1d3['map'](_0x46daae=>_0x3db9a0(_0x46daae));await Promise['all'](_0x252aa7),_0x4bf097[_0x105faa(0xc5)](_0x487793);}),router[a0_0x100128(0xad)](a0_0x100128(0x110),async(_0x2a03c8,_0x1e845c)=>{var _0x1bb0ec=a0_0x100128;try{const {FromWareHouse:_0xdf1397,FromRoom:_0x54639a,ToWarehouse:_0x2d3b9d,ToRoom:_0x5904f5,secondary_code:_0x5b0a61}=_0x2a03c8[_0x1bb0ec(0x162)],_0x248893=await warehouse[_0x1bb0ec(0xe8)]([{'$match':{'name':_0xdf1397}},{'$unwind':_0x1bb0ec(0xbd)},{'$match':{'product_details.secondary_code':_0x5b0a61}},{'$group':{'_id':_0x1bb0ec(0x169),'name':{'$first':_0x1bb0ec(0x100)},'primary_code':{'$first':_0x1bb0ec(0x17f)},'secondary_code':{'$first':_0x1bb0ec(0xdf)},'product_code':{'$first':_0x1bb0ec(0x175)},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':_0x1bb0ec(0x126)},'level':{'$first':_0x1bb0ec(0xf9)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x1bb0ec(0x135)}}}]);_0x1e845c[_0x1bb0ec(0x158)](0xc8)['json'](_0x248893);}catch(_0x319662){_0x1e845c['status'](0x194)[_0x1bb0ec(0xc5)]({'message':_0x319662['message']});}}),router[a0_0x100128(0xad)](a0_0x100128(0x119),async(_0x313647,_0x1c5b67)=>{var _0x4a9687=a0_0x100128;try{const {FromWareHouse:_0x5e38e8,FromRoom:_0x21a9ac,ToWarehouse:_0x21963c,ToRoom:_0x5a09ec,product_code:_0x1966d6}=_0x313647[_0x4a9687(0x162)],_0x362d49=await warehouse['aggregate']([{'$match':{'name':_0x5e38e8}},{'$unwind':_0x4a9687(0xbd)},{'$match':{'product_details.product_code':_0x1966d6}},{'$group':{'_id':_0x4a9687(0x169),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x4a9687(0xdf)},'product_code':{'$first':_0x4a9687(0x175)},'instock':{'$first':_0x4a9687(0x157)},'warehouse':{'$first':_0x4a9687(0x126)},'level':{'$first':_0x4a9687(0xf9)},'isle':{'$first':_0x4a9687(0x181)},'pallet':{'$first':_0x4a9687(0x16e)},'maxProducts':{'$first':_0x4a9687(0x10b)},'unit':{'$first':_0x4a9687(0x135)}}}]);_0x1c5b67[_0x4a9687(0x158)](0xc8)[_0x4a9687(0xc5)](_0x362d49);}catch(_0x375882){_0x1c5b67[_0x4a9687(0x158)](0x194)[_0x4a9687(0xc5)]({'message':_0x375882['message']});}}),router[a0_0x100128(0xad)]('/CheckingWarehouse',async(_0x2304cb,_0x227101)=>{var _0x2d1ee6=a0_0x100128;const {level:_0x3771bf,isle:_0x589c55,pallet:_0x23f987,warehouses:_0x4b9006,room:_0x62c2bc}=_0x2304cb[_0x2d1ee6(0x162)];try{const _0x482e28=await warehouse[_0x2d1ee6(0xe8)]([{'$match':{'name':_0x4b9006,'room':_0x62c2bc}},{'$unwind':_0x2d1ee6(0xbd)},{'$match':{'product_details.level':parseInt(_0x3771bf),'product_details.isle':_0x589c55,'product_details.pallet':parseInt(_0x23f987)}},{'$group':{'_id':_0x2d1ee6(0x169),'name':{'$first':_0x2d1ee6(0x100)},'product_stock':{'$first':_0x2d1ee6(0x157)},'level':{'$first':_0x2d1ee6(0xf9)},'isle':{'$first':_0x2d1ee6(0x181)},'pallet':{'$first':_0x2d1ee6(0x16e)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x227101[_0x2d1ee6(0x158)](0xc8)[_0x2d1ee6(0xc5)](_0x482e28);}catch(_0x1badb3){_0x227101[_0x2d1ee6(0x158)](0x194)[_0x2d1ee6(0xc5)]({'message':_0x1badb3[_0x2d1ee6(0xac)]});}}),module[a0_0x100128(0x105)]=router;