var a0_0x1e630d=a0_0x5462;(function(_0x1b560f,_0x44fd2c){var _0x2f8f78=a0_0x5462,_0x3d35d6=_0x1b560f();while(!![]){try{var _0x567203=-parseInt(_0x2f8f78(0x15a))/0x1*(parseInt(_0x2f8f78(0x1b5))/0x2)+-parseInt(_0x2f8f78(0x160))/0x3*(parseInt(_0x2f8f78(0x1d7))/0x4)+-parseInt(_0x2f8f78(0x17a))/0x5*(parseInt(_0x2f8f78(0x1b3))/0x6)+-parseInt(_0x2f8f78(0x189))/0x7*(parseInt(_0x2f8f78(0x1af))/0x8)+parseInt(_0x2f8f78(0x15b))/0x9*(-parseInt(_0x2f8f78(0x1f4))/0xa)+-parseInt(_0x2f8f78(0x1a5))/0xb*(-parseInt(_0x2f8f78(0x1c3))/0xc)+parseInt(_0x2f8f78(0x1ff))/0xd;if(_0x567203===_0x44fd2c)break;else _0x3d35d6['push'](_0x3d35d6['shift']());}catch(_0x5d5288){_0x3d35d6['push'](_0x3d35d6['shift']());}}}(a0_0xe124,0x4dcc0));const express=require(a0_0x1e630d(0x1ea)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x1e630d(0x1df)),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),nodemailer=require(a0_0x1e630d(0x1ae));router[a0_0x1e630d(0x172)](a0_0x1e630d(0x12e),auth,async(_0x41bb8a,_0xfdc40d)=>{var _0x5ccf37=a0_0x1e630d;try{const {username:_0x1a2355,email:_0x45bb5f,role:_0x2b82d8}=_0x41bb8a[_0x5ccf37(0x216)],_0x5b9800=_0x41bb8a[_0x5ccf37(0x216)],_0x228a50=await profile[_0x5ccf37(0x13e)]({'email':_0x5b9800[_0x5ccf37(0x17e)]}),_0x2ff5f1=await master_shop[_0x5ccf37(0x205)]();console[_0x5ccf37(0x18e)](_0x5ccf37(0x164),_0x2ff5f1);let _0x303f1f;if(_0x5b9800[_0x5ccf37(0x130)]=='staff'){const _0xfdc9bb=await staff[_0x5ccf37(0x13e)]({'email':_0x5b9800[_0x5ccf37(0x17e)]});_0x303f1f=await transfers[_0x5ccf37(0x205)]({'from_warehouse':_0xfdc9bb[_0x5ccf37(0x1aa)]});}else _0x303f1f=await transfers['aggregate']([{'$unwind':_0x5ccf37(0x21f)},{'$group':{'_id':_0x5ccf37(0x1dc),'invoice':{'$first':_0x5ccf37(0x14e)},'date':{'$first':_0x5ccf37(0x1ab)},'from_warehouse':{'$first':_0x5ccf37(0x212)},'to_warehouse':{'$first':'$to_warehouse'},'from_room_name':{'$addToSet':_0x5ccf37(0x18d)},'to_room_name':{'$addToSet':_0x5ccf37(0x180)},'finalize':{'$first':_0x5ccf37(0x12c)},'isAllowEdit':{'$first':'$isAllowEdit'}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x2ff5f1[0x0][_0x5ccf37(0x1c5)]==_0x5ccf37(0x159)){var _0x5b5aec=users[_0x5ccf37(0x16e)];console['log'](_0x5b5aec);}else{if(_0x2ff5f1[0x0][_0x5ccf37(0x1c5)]==_0x5ccf37(0x1a1))var _0x5b5aec=users[_0x5ccf37(0x1a1)];else{if(_0x2ff5f1[0x0][_0x5ccf37(0x1c5)]==_0x5ccf37(0x139))var _0x5b5aec=users[_0x5ccf37(0x139)];else{if(_0x2ff5f1[0x0][_0x5ccf37(0x1c5)]=='Spanish')var _0x5b5aec=users[_0x5ccf37(0x19b)];else{if(_0x2ff5f1[0x0][_0x5ccf37(0x1c5)]=='French')var _0x5b5aec=users[_0x5ccf37(0x1ba)];else{if(_0x2ff5f1[0x0][_0x5ccf37(0x1c5)]==_0x5ccf37(0x211))var _0x5b5aec=users[_0x5ccf37(0x208)];else{if(_0x2ff5f1[0x0][_0x5ccf37(0x1c5)]==_0x5ccf37(0x166))var _0x5b5aec=users['Chinese'];else{if(_0x2ff5f1[0x0]['language']==_0x5ccf37(0x149))var _0x5b5aec=users[_0x5ccf37(0x13c)];}}}}}}}_0xfdc40d[_0x5ccf37(0x1cb)](_0x5ccf37(0x155),{'success':_0x41bb8a[_0x5ccf37(0x1d8)](_0x5ccf37(0x184)),'errors':_0x41bb8a[_0x5ccf37(0x1d8)](_0x5ccf37(0x1cc)),'role':_0x5b9800,'profile':_0x228a50,'master_shop':_0x2ff5f1,'transfer':_0x303f1f,'language':_0x5b5aec});}catch(_0x427eeb){console[_0x5ccf37(0x18e)](_0x427eeb);}});async function getRandom8DigitNumber(){var _0x530bf4=a0_0x1e630d;const _0x4d3a3a=0x989680,_0x32aa90=0x5f5e0ff,_0x1eb50=Math[_0x530bf4(0x191)](Math[_0x530bf4(0x1d5)]()*(_0x32aa90-_0x4d3a3a+0x1))+_0x4d3a3a;var _0x524f9c;const _0x582fa7=await transfers[_0x530bf4(0x13e)]({'invoice':'TRF-'+_0x1eb50});return _0x582fa7&&_0x582fa7[_0x530bf4(0x19c)]>0x0?_0x524f9c=_0x530bf4(0x17b)+_0x1eb50:_0x524f9c='TRF-'+_0x1eb50,_0x524f9c;}router[a0_0x1e630d(0x172)](a0_0x1e630d(0x20c),auth,async(_0x5edaaa,_0x386d18)=>{var _0x5637db=a0_0x1e630d;try{const {username:_0x57d259,email:_0x5c1799,role:_0x31225a}=_0x5edaaa['user'],_0x23c9a9=_0x5edaaa[_0x5637db(0x216)],_0xeac914=await profile[_0x5637db(0x13e)]({'email':_0x23c9a9['email']}),_0x253b2d=await master_shop['find']();console[_0x5637db(0x18e)](_0x5637db(0x164),_0x253b2d);let _0x19554a;if(_0x23c9a9[_0x5637db(0x130)]==_0x5637db(0x1fb)){const _0x4445c0=await staff['findOne']({'email':_0x23c9a9[_0x5637db(0x17e)]});_0x19554a=await warehouse[_0x5637db(0x15d)]([{'$match':{'status':_0x5637db(0x1dd),'name':_0x4445c0[_0x5637db(0x1aa)],'warehouse_category':_0x5637db(0x147)}},{'$group':{'_id':'$name','name':{'$first':_0x5637db(0x187)}}}]);}else _0x19554a=await warehouse[_0x5637db(0x15d)]([{'$match':{'status':_0x5637db(0x1dd),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x5637db(0x187),'name':{'$first':_0x5637db(0x187)}}}]);var _0x5d75f3=[_0x5637db(0x171),_0x5637db(0x1f3),_0x5637db(0x1f7)];const _0x5c505b=await transfers['find']({}),_0x457ebc=_0x5c505b[_0x5637db(0x19c)]+0x1,_0x45606b=_0x5637db(0x17b)+_0x457ebc[_0x5637db(0x1e6)]()[_0x5637db(0x132)](0x5,'0');if(_0x253b2d[0x0][_0x5637db(0x1c5)]=='English\x20(US)'){var _0x80edb0=users[_0x5637db(0x16e)];console[_0x5637db(0x18e)](_0x80edb0);}else{if(_0x253b2d[0x0][_0x5637db(0x1c5)]==_0x5637db(0x1a1))var _0x80edb0=users[_0x5637db(0x1a1)];else{if(_0x253b2d[0x0][_0x5637db(0x1c5)]==_0x5637db(0x139))var _0x80edb0=users[_0x5637db(0x139)];else{if(_0x253b2d[0x0]['language']==_0x5637db(0x19b))var _0x80edb0=users[_0x5637db(0x19b)];else{if(_0x253b2d[0x0][_0x5637db(0x1c5)]==_0x5637db(0x1ba))var _0x80edb0=users['French'];else{if(_0x253b2d[0x0]['language']==_0x5637db(0x211))var _0x80edb0=users[_0x5637db(0x208)];else{if(_0x253b2d[0x0][_0x5637db(0x1c5)]==_0x5637db(0x166))var _0x80edb0=users[_0x5637db(0x166)];else{if(_0x253b2d[0x0][_0x5637db(0x1c5)]==_0x5637db(0x149))var _0x80edb0=users[_0x5637db(0x13c)];}}}}}}}const _0x31a024=getRandom8DigitNumber();_0x31a024['then'](_0x1a53ba=>{var _0x2bc1f8=_0x5637db;_0x386d18[_0x2bc1f8(0x1cb)](_0x2bc1f8(0x1f9),{'success':_0x5edaaa[_0x2bc1f8(0x1d8)](_0x2bc1f8(0x184)),'errors':_0x5edaaa['flash'](_0x2bc1f8(0x1cc)),'role':_0x23c9a9,'profile':_0xeac914,'master_shop':_0x253b2d,'warehouse':_0x19554a,'language':_0x80edb0,'rooms_data':_0x5d75f3,'invoice':_0x1a53ba});})[_0x5637db(0x20e)](_0x32c84a=>{var _0x2c97cb=_0x5637db;_0x5edaaa['flash'](_0x2c97cb(0x1cc),'There\x27s\x20a\x20error\x20in\x20this\x20transaction'),_0x386d18[_0x2c97cb(0x1f8)](_0x2c97cb(0x14b));});}catch(_0x4c1124){console['log'](_0x4c1124);}}),router['post']('/view/add_transfer',auth,async(_0x52a8db,_0x4eb17a)=>{var _0x10d7b4=a0_0x1e630d;try{console[_0x10d7b4(0x18e)](_0x52a8db[_0x10d7b4(0x193)]);const {date:_0x1052c8,from_warehouse:_0x3626c7,FromRoom_name:_0x14e0b3,to_warehouse:_0xffa1b5,ToRoom_name:_0x5b2980,prod_name:_0x4178d8,from_prod_qty:_0x2b31b2,from_prod_level:_0x48b0f8,from_prod_isle:_0x29551e,from_prod_pallet:_0x3f79ee,to_prod_qty:_0x1b17cf,to_prod_level:_0x3de9c8,to_prod_isle:_0x5203e5,to_prod_pallet:_0x162483,primary_code:_0x45a1dd,secondary_code:_0x1305a0,product_code3:_0x5ea1a9,note:_0x5dc3f5,MaxStocks_data2:_0x198fcf,invoice:_0x5f3934,expiry_date:_0x598a34}=_0x52a8db[_0x10d7b4(0x193)];if(typeof _0x4178d8==_0x10d7b4(0x21d))var _0x1edb2f=[_0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x14a)]],_0x23beb9=[_0x52a8db['body'][_0x10d7b4(0x1e2)]],_0x4fdd26=[_0x52a8db['body'][_0x10d7b4(0x1a0)]],_0x460e0f=[_0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x175)]],_0x3c6ba2=[_0x52a8db['body']['to_prod_level']],_0x290937=[_0x52a8db['body'][_0x10d7b4(0x1fe)]],_0x2ab785=[_0x52a8db[_0x10d7b4(0x193)]['secondary_code']],_0x2a2332=[_0x52a8db['body'][_0x10d7b4(0x181)]],_0x305af4=[_0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x140)]],_0x3b2c68=[_0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x1bc)]],_0x11d441=[_0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x152)]],_0x2d035d=[_0x52a8db['body'][_0x10d7b4(0x218)]],_0x345e0b=[_0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x15e)]],_0x3f4339=[_0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x1d6)]],_0x57f9d9=[_0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x12d)]],_0x13d600=[_0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x137)]],_0xaf03c6=[_0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x18b)]],_0x48d0b3=[_0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x1a6)]],_0x373a29=[_0x52a8db[_0x10d7b4(0x193)]['from_invoice']],_0x18bc6e=[_0x52a8db['body']['to_invoice']],_0x9a4e8=[_0x52a8db['body'][_0x10d7b4(0x176)]];else var _0x1edb2f=[..._0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x14a)]],_0x23beb9=[..._0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x1e2)]],_0x4fdd26=[..._0x52a8db['body'][_0x10d7b4(0x1a0)]],_0x460e0f=[..._0x52a8db[_0x10d7b4(0x193)]['New_Qty_Converted']],_0x3c6ba2=[..._0x52a8db['body'][_0x10d7b4(0x186)]],_0x290937=[..._0x52a8db['body'][_0x10d7b4(0x1fe)]],_0x2ab785=[..._0x52a8db[_0x10d7b4(0x193)]['secondary_code']],_0x2a2332=[..._0x52a8db['body'][_0x10d7b4(0x181)]],_0x305af4=[..._0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x140)]],_0x3b2c68=[..._0x52a8db['body']['primary_unit']],_0x11d441=[..._0x52a8db[_0x10d7b4(0x193)]['secondary_unit']],_0x2d035d=[..._0x52a8db['body'][_0x10d7b4(0x218)]],_0x345e0b=[..._0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x15e)]],_0x3f4339=[..._0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x1d6)]],_0x57f9d9=[..._0x52a8db[_0x10d7b4(0x193)]['production_date']],_0x13d600=[..._0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x137)]],_0xaf03c6=[..._0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x18b)]],_0x48d0b3=[..._0x52a8db[_0x10d7b4(0x193)]['ToRoomAssigned']],_0x373a29=[..._0x52a8db[_0x10d7b4(0x193)]['from_invoice']],_0x18bc6e=[..._0x52a8db['body'][_0x10d7b4(0x1de)]],_0x9a4e8=[..._0x52a8db[_0x10d7b4(0x193)][_0x10d7b4(0x176)]];const _0x3bca5d=_0x1edb2f[_0x10d7b4(0x131)](_0x3f0b41=>{return _0x3f0b41={'product_name':_0x3f0b41};});_0x23beb9[_0x10d7b4(0x20a)]((_0x157c3f,_0x37d8a3)=>{_0x3bca5d[_0x37d8a3]['from_quantity']=_0x157c3f;}),_0x373a29['forEach']((_0x86851f,_0x2cf00f)=>{var _0x5d23bf=_0x10d7b4;_0x3bca5d[_0x2cf00f][_0x5d23bf(0x141)]=_0x86851f;}),_0x18bc6e['forEach']((_0x1ba0e9,_0x5d1c90)=>{var _0x330a39=_0x10d7b4;_0x3bca5d[_0x5d1c90][_0x330a39(0x215)]=_0x1ba0e9;}),_0x9a4e8[_0x10d7b4(0x20a)]((_0x24a378,_0x2228b8)=>{var _0x461a8e=_0x10d7b4;_0x3bca5d[_0x2228b8][_0x461a8e(0x1b0)]=_0x24a378;}),_0x4fdd26[_0x10d7b4(0x20a)]((_0x57b8ab,_0xe350d2)=>{var _0x12e5d2=_0x10d7b4;_0xaf03c6[_0x12e5d2(0x20a)]((_0x388e26,_0x599f86)=>{var _0x5ea620=_0x12e5d2;if(_0x388e26=='Receiving\x20Area'&&_0xe350d2==_0x599f86){var _0x585b72=_0x57b8ab[_0x5ea620(0x168)](0x3);_0x3bca5d[_0xe350d2][_0x5ea620(0x1b6)]=_0x57b8ab[0x0],_0x3bca5d[_0xe350d2][_0x5ea620(0x1fa)]=_0x57b8ab[0x1],_0x3bca5d[_0xe350d2][_0x5ea620(0x1ed)]=0x0,_0x3bca5d[_0xe350d2][_0x5ea620(0x146)]=0x0,_0x3bca5d[_0xe350d2][_0x5ea620(0x1b4)]='Floor',_0x3bca5d[_0xe350d2][_0x5ea620(0x138)]=_0x585b72;}else{if(_0x388e26==_0x5ea620(0x13d)&&_0xe350d2==_0x599f86){var _0x585b72=_0x57b8ab['slice'](0x3);_0x3bca5d[_0xe350d2][_0x5ea620(0x1b6)]=_0x57b8ab[0x0],_0x3bca5d[_0xe350d2][_0x5ea620(0x1fa)]=_0x57b8ab[0x1],_0x3bca5d[_0xe350d2][_0x5ea620(0x1ed)]=0x0,_0x3bca5d[_0xe350d2][_0x5ea620(0x146)]=0x0,_0x3bca5d[_0xe350d2][_0x5ea620(0x1b4)]=_0x5ea620(0x154),_0x3bca5d[_0xe350d2][_0x5ea620(0x138)]=_0x57b8ab[0x5];}else{if(_0xe350d2==_0x599f86){if(_0x57b8ab[0x0]=='A'&&_0x57b8ab[0x1]=='L'&&_0x57b8ab[0x2]=='L')console[_0x5ea620(0x18e)](_0x388e26+'\x20<>\x20'+_0xe350d2+'\x20<>\x20'+_0x599f86+_0x5ea620(0x15c)+_0x57b8ab+_0x5ea620(0x1c2)),_0x3bca5d[_0xe350d2][_0x5ea620(0x1b6)]=_0x57b8ab[0x0],_0x3bca5d[_0xe350d2]['from_rack']=_0x57b8ab[0x1],_0x3bca5d[_0xe350d2][_0x5ea620(0x1ed)]=0x0,_0x3bca5d[_0xe350d2][_0x5ea620(0x146)]=0x0,_0x3bca5d[_0xe350d2][_0x5ea620(0x1b4)]=_0x5ea620(0x154),_0x3bca5d[_0xe350d2]['from_floorlevel']=_0x57b8ab[0x3];else{var _0x48646a;if(_0x57b8ab[0x4]=='L')_0x48646a=_0x5ea620(0x1f0);else _0x57b8ab[0x4]=='F'&&(_0x48646a=_0x5ea620(0x154));_0x3bca5d[_0xe350d2][_0x5ea620(0x1b6)]=_0x57b8ab[0x0],_0x3bca5d[_0xe350d2]['from_rack']=_0x57b8ab[0x1],_0x3bca5d[_0xe350d2][_0x5ea620(0x1ed)]=_0x57b8ab[0x2],_0x3bca5d[_0xe350d2][_0x5ea620(0x146)]=_0x57b8ab[0x3],_0x3bca5d[_0xe350d2][_0x5ea620(0x1b4)]=_0x48646a,_0x3bca5d[_0xe350d2][_0x5ea620(0x138)]=_0x57b8ab[0x5];}}}}});}),_0x460e0f[_0x10d7b4(0x20a)]((_0x2f22e8,_0x3e51ec)=>{var _0xa0d6e1=_0x10d7b4;_0x3bca5d[_0x3e51ec][_0xa0d6e1(0x204)]=_0x2f22e8;}),_0x3c6ba2['forEach']((_0x53fad0,_0x1e3732)=>{_0x48d0b3['forEach']((_0x21074e,_0xb4a454)=>{var _0x3d1892=a0_0x5462;if(_0x21074e==_0x3d1892(0x1eb)&&_0x1e3732==_0xb4a454){var _0xc16efc=_0x53fad0[_0x3d1892(0x168)](0x3);_0x3bca5d[_0x1e3732][_0x3d1892(0x20f)]=_0x53fad0[0x0],_0x3bca5d[_0x1e3732][_0x3d1892(0x1ce)]=_0x53fad0[0x1],_0x3bca5d[_0x1e3732][_0x3d1892(0x151)]=0x0,_0x3bca5d[_0x1e3732][_0x3d1892(0x136)]=0x0,_0x3bca5d[_0x1e3732]['to_types']=_0x3d1892(0x154),_0x3bca5d[_0x1e3732]['to_floorlevel']=_0xc16efc;}else{if(_0x21074e==_0x3d1892(0x13d)&&_0x1e3732==_0xb4a454){var _0xc16efc=_0x53fad0[_0x3d1892(0x168)](0x3);_0x3bca5d[_0x1e3732][_0x3d1892(0x20f)]=_0x53fad0[0x0],_0x3bca5d[_0x1e3732][_0x3d1892(0x1ce)]=_0x53fad0[0x1],_0x3bca5d[_0x1e3732][_0x3d1892(0x151)]=0x0,_0x3bca5d[_0x1e3732][_0x3d1892(0x136)]=0x0,_0x3bca5d[_0x1e3732][_0x3d1892(0x1c7)]='Floor',_0x3bca5d[_0x1e3732][_0x3d1892(0x1da)]=_0x53fad0[0x5];}else{if(_0x1e3732==_0xb4a454){if(_0x53fad0[0x0]=='A'&&_0x53fad0[0x1]=='L'&&_0x53fad0[0x2]=='L')console[_0x3d1892(0x18e)](_0x21074e+'\x20<>\x20'+_0x1e3732+_0x3d1892(0x15c)+_0xb4a454+_0x3d1892(0x15c)+_0x53fad0+'here'),_0x3bca5d[_0x1e3732][_0x3d1892(0x20f)]=_0x53fad0[0x0],_0x3bca5d[_0x1e3732][_0x3d1892(0x1ce)]=_0x53fad0[0x1],_0x3bca5d[_0x1e3732][_0x3d1892(0x151)]=0x0,_0x3bca5d[_0x1e3732]['to_bin']=0x0,_0x3bca5d[_0x1e3732][_0x3d1892(0x1c7)]='Floor',_0x3bca5d[_0x1e3732]['to_floorlevel']=_0x53fad0[0x3];else{var _0x159b35;if(_0x53fad0[0x4]=='L')_0x159b35='Level';else _0x53fad0[0x4]=='F'&&(_0x159b35=_0x3d1892(0x154));_0x3bca5d[_0x1e3732][_0x3d1892(0x20f)]=_0x53fad0[0x0],_0x3bca5d[_0x1e3732][_0x3d1892(0x1ce)]=_0x53fad0[0x1],_0x3bca5d[_0x1e3732]['to_bay']=_0x53fad0[0x2],_0x3bca5d[_0x1e3732][_0x3d1892(0x136)]=_0x53fad0[0x3],_0x3bca5d[_0x1e3732][_0x3d1892(0x1c7)]=_0x159b35,_0x3bca5d[_0x1e3732][_0x3d1892(0x1da)]=_0x53fad0[0x5];}}}}});}),_0x290937[_0x10d7b4(0x20a)]((_0x437426,_0x3f14c0)=>{var _0x55e876=_0x10d7b4;_0x3bca5d[_0x3f14c0][_0x55e876(0x1fe)]=_0x437426;}),_0x2ab785[_0x10d7b4(0x20a)]((_0x4dc41e,_0x8af60e)=>{var _0x518033=_0x10d7b4;_0x3bca5d[_0x8af60e][_0x518033(0x1e4)]=_0x4dc41e;}),_0x2a2332[_0x10d7b4(0x20a)]((_0x614a6d,_0x3982a5)=>{var _0x4966ec=_0x10d7b4;_0x3bca5d[_0x3982a5][_0x4966ec(0x1bb)]=_0x614a6d;}),_0x305af4['forEach']((_0xef2d98,_0x23b105)=>{var _0x21b1ad=_0x10d7b4;_0x3bca5d[_0x23b105][_0x21b1ad(0x157)]=_0xef2d98;}),_0x3b2c68[_0x10d7b4(0x20a)]((_0x48dc54,_0x4188e5)=>{_0x3bca5d[_0x4188e5]['unit']=_0x48dc54;}),_0x11d441[_0x10d7b4(0x20a)]((_0x4030ca,_0x106fc1)=>{_0x3bca5d[_0x106fc1]['secondary_unit']=_0x4030ca;}),_0x2d035d[_0x10d7b4(0x20a)]((_0x4f05db,_0x13e6c4)=>{var _0x4e56f0=_0x10d7b4;_0x3bca5d[_0x13e6c4][_0x4e56f0(0x218)]=_0x4f05db;}),_0x345e0b[_0x10d7b4(0x20a)]((_0x10e841,_0x35716b)=>{var _0x2ecb98=_0x10d7b4;_0x3bca5d[_0x35716b][_0x2ecb98(0x15e)]=_0x10e841;}),_0x3f4339[_0x10d7b4(0x20a)]((_0x41f566,_0x597925)=>{var _0x4a6c1d=_0x10d7b4;_0x3bca5d[_0x597925][_0x4a6c1d(0x207)]=_0x41f566;}),_0x57f9d9['forEach']((_0x16200d,_0x430ce4)=>{_0x3bca5d[_0x430ce4]['production_date']=_0x16200d;}),_0x13d600[_0x10d7b4(0x20a)]((_0x1bfd2d,_0x5653e3)=>{_0x3bca5d[_0x5653e3]['prod_cat']=_0x1bfd2d;}),_0xaf03c6[_0x10d7b4(0x20a)]((_0xa54702,_0x329837)=>{var _0x3d121c=_0x10d7b4;_0x3bca5d[_0x329837][_0x3d121c(0x1bd)]=_0xa54702;}),_0x48d0b3[_0x10d7b4(0x20a)]((_0x5f3513,_0x3bf762)=>{var _0xa5dfde=_0x10d7b4;_0x3bca5d[_0x3bf762][_0xa5dfde(0x199)]=_0x5f3513;});const _0x427304=_0x3bca5d[_0x10d7b4(0x17d)](_0x327695=>_0x327695[_0x10d7b4(0x204)]!=='0'&&_0x327695[_0x10d7b4(0x204)]!==''||_0x327695['to_floorlevel']!=='0'&&_0x327695[_0x10d7b4(0x1da)]!==''),_0x56be53=new transfers({'date':_0x1052c8,'from_warehouse':_0x3626c7,'to_warehouse':_0xffa1b5,'product':_0x427304,'note':_0x5dc3f5,'invoice':_0x5f3934}),_0x2675b3=await _0x56be53[_0x10d7b4(0x1ad)]();_0x52a8db[_0x10d7b4(0x1d8)](_0x10d7b4(0x184),_0x10d7b4(0x13a)),_0x4eb17a['redirect'](_0x10d7b4(0x1a8)+_0x2675b3[_0x10d7b4(0x1a2)]);}catch(_0x1ff455){console[_0x10d7b4(0x18e)](_0x1ff455),_0x4eb17a[_0x10d7b4(0x20d)](0xc8)[_0x10d7b4(0x1d3)]({'errorMessage':_0x1ff455[_0x10d7b4(0x21b)]});}}),router[a0_0x1e630d(0x172)](a0_0x1e630d(0x202),auth,async(_0x4a4cb1,_0x39ee2b)=>{var _0xb30c2f=a0_0x1e630d;try{const {username:_0x1a71bb,email:_0x1791b0,role:_0x124cf8}=_0x4a4cb1['user'],_0x32ee85=_0x4a4cb1[_0xb30c2f(0x216)],_0x175d07=await profile['findOne']({'email':_0x32ee85[_0xb30c2f(0x17e)]}),_0x12c4e6=await master_shop[_0xb30c2f(0x205)]();console['log'](_0xb30c2f(0x164),_0x12c4e6);const _0x2b7893=await transfers[_0xb30c2f(0x1a9)](_0x4a4cb1['params']['id']);let _0x3fabe8=new Date(_0x2b7893[_0xb30c2f(0x15e)]),_0x3b0efc=('0'+_0x3fabe8[_0xb30c2f(0x198)]())['slice'](-0x2),_0x25860f=('0'+(_0x3fabe8['getMonth']()+0x1))[_0xb30c2f(0x168)](-0x2),_0x54ff8e=_0x3fabe8['getFullYear'](),_0x399566=_0x54ff8e+'-'+_0x25860f+'-'+_0x3b0efc,_0x2b3ea8;if(_0x32ee85['role']==_0xb30c2f(0x1fb)){const _0x123b2a=await staff[_0xb30c2f(0x13e)]({'email':_0x32ee85['email']});_0x2b3ea8=await warehouse[_0xb30c2f(0x205)]({'status':_0xb30c2f(0x1dd),'name':_0x123b2a[_0xb30c2f(0x1aa)],'warehouse_category':_0xb30c2f(0x147)});}else _0x2b3ea8=await warehouse[_0xb30c2f(0x205)]({'status':_0xb30c2f(0x1dd),'warehouse_category':_0xb30c2f(0x147)});const _0x373a09=await warehouse[_0xb30c2f(0x15d)]([{'$match':{'name':_0x2b7893[_0xb30c2f(0x21c)]}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0xb30c2f(0x177)},'type':{'$first':_0xb30c2f(0x17f)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0xb30c2f(0x1e3)},'product_code':{'$first':_0xb30c2f(0x15f)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0xb30c2f(0x165)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'room':{'$first':_0xb30c2f(0x1ee)}}}]);if(_0x12c4e6[0x0][_0xb30c2f(0x1c5)]==_0xb30c2f(0x159)){var _0x3c46a1=users['English'];console['log'](_0x3c46a1);}else{if(_0x12c4e6[0x0]['language']==_0xb30c2f(0x1a1))var _0x3c46a1=users[_0xb30c2f(0x1a1)];else{if(_0x12c4e6[0x0][_0xb30c2f(0x1c5)]==_0xb30c2f(0x139))var _0x3c46a1=users['German'];else{if(_0x12c4e6[0x0]['language']==_0xb30c2f(0x19b))var _0x3c46a1=users[_0xb30c2f(0x19b)];else{if(_0x12c4e6[0x0]['language']==_0xb30c2f(0x1ba))var _0x3c46a1=users[_0xb30c2f(0x1ba)];else{if(_0x12c4e6[0x0][_0xb30c2f(0x1c5)]==_0xb30c2f(0x211))var _0x3c46a1=users[_0xb30c2f(0x208)];else{if(_0x12c4e6[0x0][_0xb30c2f(0x1c5)]=='Chinese')var _0x3c46a1=users['Chinese'];else{if(_0x12c4e6[0x0][_0xb30c2f(0x1c5)]==_0xb30c2f(0x149))var _0x3c46a1=users[_0xb30c2f(0x13c)];}}}}}}}_0x39ee2b[_0xb30c2f(0x1cb)]('edit_transfer_view',{'success':_0x4a4cb1[_0xb30c2f(0x1d8)](_0xb30c2f(0x184)),'errors':_0x4a4cb1['flash'](_0xb30c2f(0x1cc)),'role':_0x32ee85,'profile':_0x175d07,'master_shop':_0x12c4e6,'warehouse':_0x2b3ea8,'transfer':_0x2b7893,'stock':_0x373a09,'language':_0x3c46a1});}catch(_0x40393b){console[_0xb30c2f(0x18e)](_0x40393b);}}),router[a0_0x1e630d(0x167)]('/preview/:id',auth,async(_0x54fac9,_0x4c9c3b)=>{var _0x57676d=a0_0x1e630d;try{const _0x49d8dd=_0x54fac9[_0x57676d(0x1b9)]['id'],{from_warehouse:_0x1f86ed,FromRoom_name:_0x42a8e3,to_warehouse:_0x3080db,ToRoom_name:_0x3b667f}=_0x54fac9['body'],_0x481258=await transfers['findById']({'_id':_0x49d8dd}),_0x476cc2=_0x481258['product']['map'](async _0x34f664=>{var _0x304c67=_0x57676d;if(_0x34f664[_0x304c67(0x204)]>0x0){var _0x204d90=await warehouse['findOne']({'name':_0x481258['from_warehouse'],'room':_0x34f664[_0x304c67(0x1bd)],'warehouse_category':'Raw\x20Materials'});const _0x2bfc6b=_0x204d90[_0x304c67(0x214)][_0x304c67(0x131)](_0x5d7283=>{var _0x19b6a4=_0x304c67;_0x5d7283[_0x19b6a4(0x1a3)]==_0x34f664[_0x19b6a4(0x1a3)]&&_0x5d7283['floorlevel']==_0x34f664[_0x19b6a4(0x138)]&&_0x5d7283[_0x19b6a4(0x19e)]==_0x34f664[_0x19b6a4(0x1b4)]&&_0x5d7283[_0x19b6a4(0x1cf)]==_0x34f664['from_bin']&&_0x5d7283['bay']==_0x34f664['from_bay']&&_0x5d7283['rack']==_0x34f664[_0x19b6a4(0x1fa)]&&_0x5d7283[_0x19b6a4(0x20f)]==_0x34f664[_0x19b6a4(0x1b6)]&&_0x5d7283[_0x19b6a4(0x15e)]==_0x34f664[_0x19b6a4(0x15e)]&&_0x5d7283[_0x19b6a4(0x218)]==_0x34f664[_0x19b6a4(0x218)]&&_0x5d7283['production_date']==_0x34f664[_0x19b6a4(0x12d)]&&_0x5d7283[_0x19b6a4(0x133)]==_0x34f664['from_invoice']&&_0x5d7283[_0x19b6a4(0x1a2)]==_0x34f664[_0x19b6a4(0x1b0)]&&(_0x5d7283[_0x19b6a4(0x20b)]=_0x5d7283[_0x19b6a4(0x20b)]-_0x34f664['to_quantity']);});}return _0x204d90;});Promise[_0x57676d(0x1cd)](_0x476cc2)['then'](async _0xfb6552=>{var _0x3b48f0=_0x57676d;try{for(const _0x26d9d0 of _0xfb6552){await _0x26d9d0['save']();}try{const _0x4b4220=_0x481258['product'][_0x3b48f0(0x131)](async _0x44299e=>{var _0x55db5c=_0x3b48f0;if(_0x44299e[_0x55db5c(0x204)]>0x0){var _0x9382=await warehouse[_0x55db5c(0x13e)]({'name':_0x481258['to_warehouse'],'room':_0x44299e[_0x55db5c(0x199)],'warehouse_category':_0x55db5c(0x147)}),_0xb5cace=0x0;const _0x3515bb=_0x9382[_0x55db5c(0x214)][_0x55db5c(0x131)](_0x32d250=>{var _0x234f90=_0x55db5c;_0x32d250[_0x234f90(0x1a3)]==_0x44299e['product_name']&&_0x32d250[_0x234f90(0x1d0)]==_0x44299e['to_floorlevel']&&_0x32d250[_0x234f90(0x19e)]==_0x44299e[_0x234f90(0x1c7)]&&_0x32d250[_0x234f90(0x1cf)]==_0x44299e['to_bin']&&_0x32d250[_0x234f90(0x13f)]==_0x44299e[_0x234f90(0x151)]&&_0x32d250[_0x234f90(0x1ce)]==_0x44299e['rack']&&_0x32d250['storage']==_0x44299e[_0x234f90(0x20f)]&&_0x32d250[_0x234f90(0x15e)]==_0x44299e[_0x234f90(0x15e)]&&_0x32d250[_0x234f90(0x218)]==_0x44299e[_0x234f90(0x218)]&&_0x32d250[_0x234f90(0x12d)]==_0x44299e['production_date']&&_0x32d250['invoice']==_0x44299e[_0x234f90(0x215)]&&(_0x32d250[_0x234f90(0x20b)]=_0x32d250[_0x234f90(0x20b)]+_0x44299e[_0x234f90(0x204)],_0xb5cace++);});_0xb5cace=='0'&&(_0x9382[_0x55db5c(0x214)]=_0x9382[_0x55db5c(0x214)][_0x55db5c(0x197)]({'product_name':_0x44299e['product_name'],'product_stock':_0x44299e[_0x55db5c(0x204)],'bay':_0x44299e['to_bay'],'bin':_0x44299e[_0x55db5c(0x136)],'type':_0x44299e['to_types'],'floorlevel':_0x44299e[_0x55db5c(0x1da)],'storage':_0x44299e[_0x55db5c(0x20f)],'rack':_0x44299e[_0x55db5c(0x1ce)],'product_code':_0x44299e[_0x55db5c(0x1bb)],'primary_code':_0x44299e[_0x55db5c(0x1fe)],'secondary_code':_0x44299e['secondary_code'],'maxProducts':_0x44299e[_0x55db5c(0x157)],'storage':_0x44299e[_0x55db5c(0x20f)],'rack':_0x44299e['rack'],'expiry_date':_0x44299e['expiry_date'],'maxPerUnit':_0x44299e[_0x55db5c(0x207)],'batch_code':_0x44299e[_0x55db5c(0x218)],'production_date':_0x44299e[_0x55db5c(0x12d)]}));}return _0x9382;});Promise[_0x3b48f0(0x1cd)](_0x4b4220)[_0x3b48f0(0x143)](async _0x1f4624=>{var _0x8f012b=_0x3b48f0;try{for(const _0x21c0f2 of _0x1f4624){await warehouse[_0x8f012b(0x1b7)]({'_id':_0x21c0f2[_0x8f012b(0x1a2)]},{'$addToSet':{'product_details':{'$each':_0x21c0f2[_0x8f012b(0x214)]}}});}_0x481258[_0x8f012b(0x173)]=_0x8f012b(0x1f2);const _0x234f81=await _0x481258[_0x8f012b(0x1ad)](),_0x476ded=await master_shop[_0x8f012b(0x205)](),_0x4baccf=await email_settings[_0x8f012b(0x13e)](),_0x4db4a2=await supervisor_settings[_0x8f012b(0x205)]();var _0x2b2491=_0x481258[_0x8f012b(0x16d)],_0xb8cbb9='',_0x4b206e;for(_0x4b206e in _0x2b2491){_0xb8cbb9+=_0x8f012b(0x1f6)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2b2491[_0x4b206e]['product_name']+_0x8f012b(0x14d)+_0x8f012b(0x161)+_0x2b2491[_0x4b206e][_0x8f012b(0x1bb)]+'</td>'+_0x8f012b(0x161)+_0x2b2491[_0x4b206e][_0x8f012b(0x204)]+_0x8f012b(0x14d)+_0x8f012b(0x161)+_0x2b2491[_0x4b206e][_0x8f012b(0x201)]+_0x8f012b(0x14d)+_0x8f012b(0x161)+_0x2b2491[_0x4b206e]['secondary_unit']+_0x8f012b(0x14d)+_0x8f012b(0x161)+_0x481258[_0x8f012b(0x185)]+_0x8f012b(0x14d)+_0x8f012b(0x161)+_0x2b2491[_0x4b206e][_0x8f012b(0x199)]+_0x8f012b(0x14d)+_0x8f012b(0x161)+_0x2b2491[_0x4b206e][_0x8f012b(0x20f)]+_0x2b2491[_0x4b206e][_0x8f012b(0x1ce)]+_0x2b2491[_0x4b206e]['to_bay']+_0x2b2491[_0x4b206e]['to_bin']+_0x2b2491[_0x4b206e][_0x8f012b(0x1c7)][0x0]+_0x2b2491[_0x4b206e][_0x8f012b(0x1da)]+_0x8f012b(0x14d),'</tr>';}let _0x15dfe8=nodemailer['createTransport']({'host':_0x4baccf[_0x8f012b(0x1f5)],'port':Number(_0x4baccf['port']),'secure':![],'auth':{'user':_0x4baccf[_0x8f012b(0x17e)],'pass':_0x4baccf[_0x8f012b(0x1b2)]}}),_0x3cac7d={'from':_0x4baccf[_0x8f012b(0x17e)],'to':_0x4db4a2[0x0]['RMSEmail'],'subject':_0x8f012b(0x163),'attachments':[{'filename':'Logo.png','path':__dirname+_0x8f012b(0x1db)+'/upload/'+_0x476ded[0x0]['image'],'cid':_0x8f012b(0x1bf)}],'html':_0x8f012b(0x1d2)+_0x8f012b(0x18c)+_0x8f012b(0x1a4)+_0x8f012b(0x13b)+_0x8f012b(0x1e5)+'<div>'+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+_0x8f012b(0x13b)+'<h2>\x20'+_0x476ded[0x0]['site_title']+_0x8f012b(0x1b8)+_0x8f012b(0x1c9)+_0x8f012b(0x1c9)+_0x8f012b(0x1ec)+'<div>'+_0x8f012b(0x1c8)+'\x20Order\x20Number\x20:\x20'+_0x481258[_0x8f012b(0x133)]+'\x20'+_0x8f012b(0x1be)+_0x8f012b(0x200)+_0x481258[_0x8f012b(0x148)]+'\x20'+'</span>'+'</h5>'+_0x8f012b(0x1c9)+_0x8f012b(0x1c4)+_0x8f012b(0x19f)+_0x8f012b(0x1f6)+_0x8f012b(0x156)+_0x8f012b(0x194)+_0x8f012b(0x14f)+_0x8f012b(0x1c6)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>'+_0x8f012b(0x1e1)+_0x8f012b(0x16a)+'</thead>'+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0xb8cbb9+'\x20'+_0x8f012b(0x18a)+_0x8f012b(0x16f)+_0x8f012b(0x13b)+_0x8f012b(0x1e7)+_0x8f012b(0x21e)+_0x476ded[0x0][_0x8f012b(0x145)]+_0x8f012b(0x1e0)+'</div>'+'</div>'+_0x8f012b(0x196)};_0x15dfe8[_0x8f012b(0x213)](_0x3cac7d,function(_0x5b4857,_0x1c33f6){var _0x147542=_0x8f012b;_0x5b4857?(console[_0x147542(0x18e)](_0x5b4857),console[_0x147542(0x18e)](_0x147542(0x1fd))):console['log'](_0x147542(0x210));}),_0x54fac9[_0x8f012b(0x1d8)](_0x8f012b(0x184),_0x8f012b(0x209)),_0x4c9c3b['redirect'](_0x8f012b(0x142)+_0x234f81[_0x8f012b(0x1a2)]);}catch(_0x5e0b12){console[_0x8f012b(0x135)](_0x5e0b12),_0x4c9c3b[_0x8f012b(0x20d)](0x1f4)['json']({'Perror':'An\x20error\x20occurred\x20while\x20saving\x20data.','message':_0x5e0b12[_0x8f012b(0x21b)]});}})[_0x3b48f0(0x20e)](_0x27e22d=>{var _0x48b9ea=_0x3b48f0;console['error'](_0x27e22d),_0x4c9c3b[_0x48b9ea(0x20d)](0x1f4)['json']({'Perror':_0x48b9ea(0x134)});});}catch(_0x54ad7f){_0x4c9c3b[_0x3b48f0(0x1d3)](_0x54ad7f);}}catch(_0x40fa1d){console['error'](_0x40fa1d),_0x4c9c3b[_0x3b48f0(0x20d)](0x1f4)[_0x3b48f0(0x1d3)]({'Merror':_0x3b48f0(0x1d9),'Message':_0x40fa1d[_0x3b48f0(0x21b)]});}})['catch'](_0x1d3908=>{var _0x21d101=_0x57676d;console[_0x21d101(0x135)](_0x1d3908),_0x4c9c3b['status'](0x1f4)[_0x21d101(0x1d3)]({'Merror':'An\x20error\x20occurred.'});});}catch(_0x393b1d){console['log'](_0x393b1d);}});function a0_0x5462(_0x4b10b2,_0x352d2f){var _0xe12495=a0_0xe124();return a0_0x5462=function(_0x5462ed,_0x3e87f3){_0x5462ed=_0x5462ed-0x12c;var _0x45e09e=_0xe12495[_0x5462ed];return _0x45e09e;},a0_0x5462(_0x4b10b2,_0x352d2f);}function BayBinSelected(_0x3b372d,_0x515b36){var _0x4a9f4b=a0_0x1e630d,_0x1b1707=[],_0x1ee464=[],_0x40a458=[],_0x37e873=[],_0x1fc251=[],_0x1d3376=[];let _0x535721=[];if(_0x3b372d==_0x4a9f4b(0x14c))switch(_0x515b36){case'Rack\x20A':_0x1b1707=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x1ee464=[0x1,0x2],_0x37e873=[0x1,0x2,0x3,0x4,0x5],_0x40a458=[_0x4a9f4b(0x1f0),'Floor'],_0x1fc251=['D'],_0x1d3376=['A'];break;case'Rack\x20B':_0x1b1707=[0x6,0x5,0x4,0x3,0x2,0x1],_0x1ee464=[0x1,0x2],_0x37e873=[0x1,0x2,0x3,0x4,0x5],_0x40a458=[_0x4a9f4b(0x1f0),_0x4a9f4b(0x154)],_0x1fc251=['D'],_0x1d3376=['B'];break;case _0x4a9f4b(0x13d):_0x1b1707=[0x0],_0x1ee464=[0x0],_0x37e873=[0x1,0x2,0x3,0x4,0x5],_0x40a458=[_0x4a9f4b(0x154)],_0x1fc251=['D'],_0x1d3376=['S'];break;case _0x4a9f4b(0x1eb):_0x1b1707=[0x0],_0x1ee464=[0x0],_0x37e873=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x40a458=[_0x4a9f4b(0x154)],_0x1fc251=['D'],_0x1d3376=['R'];break;}else{if(_0x3b372d=='COLD\x20STORAGE')switch(_0x515b36){case _0x4a9f4b(0x1ca):_0x1b1707=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x1ee464=['B','F'],_0x37e873=[0x1,0x2,0x3,0x4,0x5],_0x40a458=['Level',_0x4a9f4b(0x154)],_0x1fc251=['C'],_0x1d3376=['A'];break;case _0x4a9f4b(0x1d1):_0x1b1707=[0x5,0x4,0x3,0x2,0x1],_0x1ee464=['F','B','S'],_0x37e873=[0x1,0x2,0x3,0x4,0x5],_0x40a458=[_0x4a9f4b(0x1f0),_0x4a9f4b(0x154)],_0x1fc251=['C'],_0x1d3376=['B'];break;case _0x4a9f4b(0x1f1):_0x1b1707=[0x1,0x2,0x3,0x4,0x5],_0x1ee464=['B','F','S'],_0x37e873=[0x5,0x4,0x3,0x2,0x1],_0x40a458=[_0x4a9f4b(0x1f0),_0x4a9f4b(0x154)],_0x1fc251=['C'],_0x1d3376=['C'];break;case'Rack\x20D':_0x1b1707=[0x5,0x4,0x3,0x2,0x1],_0x1ee464=['F','B','S'],_0x37e873=[0x1,0x2,0x3,0x4,0x5],_0x40a458=[_0x4a9f4b(0x1f0),_0x4a9f4b(0x154)],_0x1fc251=['C'],_0x1d3376=['D'];break;case _0x4a9f4b(0x169):_0x1b1707=[0x4,0x3,0x2,0x1],_0x1ee464=[0x1,0x2],_0x37e873=[0x1,0x2,0x3,0x4,0x5],_0x40a458=[_0x4a9f4b(0x1f0),_0x4a9f4b(0x154)],_0x1fc251=['C'],_0x1d3376=['E'];break;case _0x4a9f4b(0x1ef):_0x1b1707=[0x1,0x2,0x3],_0x1ee464=[0x1,0x2],_0x37e873=[0x1,0x2,0x3,0x4,0x5],_0x40a458=['Level'],_0x1fc251=['C'],_0x1d3376=['F'];break;}}return{'levels':_0x1b1707,'Isle':_0x1ee464,'rack':_0x37e873,'type':_0x40a458,'storage':_0x1fc251,'rak':_0x1d3376};}router['get'](a0_0x1e630d(0x162),auth,async(_0xbfd3cd,_0x4eecf4)=>{var _0x204745=a0_0x1e630d;try{const {username:_0x459296,email:_0x297a19,role:_0x54d031}=_0xbfd3cd['user'],_0x16d866=_0xbfd3cd[_0x204745(0x216)],_0xd39e48=await profile[_0x204745(0x13e)]({'email':_0x16d866[_0x204745(0x17e)]}),_0xa045a1=await master_shop['find'](),_0x1a2268=await transfers[_0x204745(0x1a9)](_0xbfd3cd[_0x204745(0x1b9)]['id']);let _0x41b8b4;if(_0x16d866[_0x204745(0x130)]==_0x204745(0x1fb)){const _0x4e70d2=await staff[_0x204745(0x13e)]({'email':_0x16d866[_0x204745(0x17e)]});_0x41b8b4=await warehouse[_0x204745(0x15d)]([{'$match':{'status':'Enabled','name':_0x4e70d2[_0x204745(0x1aa)],'warehouse_category':_0x204745(0x147)}},{'$group':{'_id':_0x204745(0x187),'name':{'$first':_0x204745(0x187)}}}]);}else _0x41b8b4=await warehouse['aggregate']([{'$match':{'status':'Enabled','warehouse_category':_0x204745(0x147)}},{'$group':{'_id':'$name','name':{'$first':_0x204745(0x187)}}}]);const _0x4f29c2=await warehouse[_0x204745(0x15d)]([{'$match':{'name':_0x1a2268[_0x204745(0x21c)],'warehouse_category':_0x204745(0x147)}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x204745(0x144)},'bay':{'$first':_0x204745(0x18f)},'bin':{'$first':_0x204745(0x177)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x204745(0x170)},'primary_code':{'$first':_0x204745(0x150)},'secondary_code':{'$first':_0x204745(0x1e3)},'product_code':{'$first':_0x204745(0x15f)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x204745(0x165)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x204745(0x1a7)},'room':{'$first':'$room'}}}]),_0x2f365f=await product['find']({}),_0x5d2a39=BayBinSelected(_0x1a2268[_0x204745(0x185)],_0x1a2268['to_room']);if(_0xa045a1[0x0]['language']==_0x204745(0x159)){var _0x4b82b5=users[_0x204745(0x16e)];console[_0x204745(0x18e)](_0x4b82b5);}else{if(_0xa045a1[0x0][_0x204745(0x1c5)]==_0x204745(0x1a1))var _0x4b82b5=users[_0x204745(0x1a1)];else{if(_0xa045a1[0x0][_0x204745(0x1c5)]==_0x204745(0x139))var _0x4b82b5=users['German'];else{if(_0xa045a1[0x0]['language']==_0x204745(0x19b))var _0x4b82b5=users['Spanish'];else{if(_0xa045a1[0x0][_0x204745(0x1c5)]==_0x204745(0x1ba))var _0x4b82b5=users[_0x204745(0x1ba)];else{if(_0xa045a1[0x0][_0x204745(0x1c5)]==_0x204745(0x211))var _0x4b82b5=users[_0x204745(0x208)];else{if(_0xa045a1[0x0][_0x204745(0x1c5)]==_0x204745(0x166))var _0x4b82b5=users[_0x204745(0x166)];else{if(_0xa045a1[0x0][_0x204745(0x1c5)]==_0x204745(0x149))var _0x4b82b5=users[_0x204745(0x13c)];}}}}}}}_0x4eecf4[_0x204745(0x1cb)](_0x204745(0x17c),{'success':_0xbfd3cd[_0x204745(0x1d8)](_0x204745(0x184)),'errors':_0xbfd3cd[_0x204745(0x1d8)](_0x204745(0x1cc)),'role':_0x16d866,'profile':_0xd39e48,'master_shop':_0xa045a1,'warehouse':_0x41b8b4,'transfer':_0x1a2268,'stock':_0x4f29c2,'unit':_0x2f365f,'language':_0x4b82b5});}catch(_0x3ee9ed){console[_0x204745(0x18e)](_0x3ee9ed);}}),router['post'](a0_0x1e630d(0x162),auth,async(_0x258648,_0x3770d7)=>{var _0x279e61=a0_0x1e630d;try{const _0x22c82f=_0x258648[_0x279e61(0x1b9)]['id'],_0x17f600=await transfers[_0x279e61(0x1a9)](_0x22c82f);_0x3770d7[_0x279e61(0x1d3)](_0x258648[_0x279e61(0x193)]);return;const {date:_0x5b6320,from_warehouse:_0x5e79cd,FromRoom_name:_0x2705e4,to_warehouse:_0x5ef1f4,ToRoom_name:_0x526706,prod_name:_0x68ffb3,from_prod_qty:_0x3c7689,from_prod_level:_0x2bf39c,from_prod_isle:_0x2c1a0b,from_prod_pallet:_0x124faa,to_prod_qty:_0x874a7b,to_prod_level:_0x10644a,to_prod_isle:_0xea1b38,to_prod_pallet:_0x36d998,primary_code:_0x4309ed,secondary_code:_0x18dba0,product_code3:_0x2add4d,note:_0x19cc6f,invoice:_0x3a03e6,expiry_date:_0x397444}=_0x258648[_0x279e61(0x193)];if(typeof _0x68ffb3=='string')var _0x4197a5=[_0x258648['body'][_0x279e61(0x14a)]],_0x32059e=[_0x258648[_0x279e61(0x193)]['from_prod_qty']],_0x5a5433=[_0x258648[_0x279e61(0x193)][_0x279e61(0x1a0)]],_0x219e98=[_0x258648[_0x279e61(0x193)]['from_prod_isle']],_0x503c17=[_0x258648[_0x279e61(0x193)][_0x279e61(0x217)]],_0x445b4d=[_0x258648[_0x279e61(0x193)]['from_types']],_0x36617c=[_0x258648['body'][_0x279e61(0x19d)]],_0x7bc13d=[_0x258648[_0x279e61(0x193)][_0x279e61(0x186)]],_0x56b3e0=[_0x258648['body'][_0x279e61(0x1e8)]],_0x392dfb=[_0x258648[_0x279e61(0x193)]['to_prod_pallet']],_0x12a11c=[_0x258648[_0x279e61(0x193)][_0x279e61(0x1c7)]],_0x2cb844=[_0x258648[_0x279e61(0x193)][_0x279e61(0x20f)]],_0x56d9f9=[_0x258648[_0x279e61(0x193)][_0x279e61(0x1d4)]],_0x30bd2a=[_0x258648[_0x279e61(0x193)][_0x279e61(0x1fe)]],_0x497c0b=[_0x258648[_0x279e61(0x193)][_0x279e61(0x1e4)]],_0x2d7fd9=[_0x258648[_0x279e61(0x193)][_0x279e61(0x181)]],_0xcef53c=[_0x258648[_0x279e61(0x193)][_0x279e61(0x140)]],_0x16824e=[_0x258648[_0x279e61(0x193)]['unit']],_0x26c167=[_0x258648[_0x279e61(0x193)][_0x279e61(0x152)]],_0x5d22bc=[_0x258648[_0x279e61(0x193)][_0x279e61(0x218)]],_0x255312=[_0x258648[_0x279e61(0x193)][_0x279e61(0x15e)]],_0xf0d324=[_0x258648[_0x279e61(0x193)][_0x279e61(0x1b6)]],_0x4f5b20=[_0x258648[_0x279e61(0x193)][_0x279e61(0x179)]];else var _0x4197a5=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x14a)]],_0x2cb844=[..._0x258648[_0x279e61(0x193)]['storage']],_0x56d9f9=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x1d4)]],_0x445b4d=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x1b4)]],_0x12a11c=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x1c7)]],_0x32059e=[..._0x258648['body']['from_prod_qty']],_0x5a5433=[..._0x258648[_0x279e61(0x193)]['from_prod_level']],_0x219e98=[..._0x258648[_0x279e61(0x193)]['from_prod_isle']],_0x503c17=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x217)]],_0x36617c=[..._0x258648[_0x279e61(0x193)]['to_prod_qty']],_0x7bc13d=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x186)]],_0x56b3e0=[..._0x258648[_0x279e61(0x193)]['to_prod_isle']],_0x392dfb=[..._0x258648[_0x279e61(0x193)]['to_prod_pallet']],_0x30bd2a=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x1fe)]],_0x497c0b=[..._0x258648['body'][_0x279e61(0x1e4)]],_0x2d7fd9=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x181)]],_0xcef53c=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x140)]],_0x16824e=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x201)]],_0x26c167=[..._0x258648['body'][_0x279e61(0x152)]],_0x5d22bc=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x218)]],_0x255312=[..._0x258648[_0x279e61(0x193)]['expiry_date']],_0xf0d324=[..._0x258648[_0x279e61(0x193)][_0x279e61(0x1b6)]],_0x4f5b20=[..._0x258648[_0x279e61(0x193)]['from_rak']];const _0x50790e=_0x4197a5[_0x279e61(0x131)](_0x57e396=>{return _0x57e396={'product_name':_0x57e396};});_0x32059e['forEach']((_0x422b5c,_0x212290)=>{var _0x5ce4cd=_0x279e61;_0x50790e[_0x212290][_0x5ce4cd(0x1ac)]=_0x422b5c;}),_0x5a5433[_0x279e61(0x20a)]((_0x44486d,_0x1d7f0f)=>{_0x50790e[_0x1d7f0f]['from_bay']=_0x44486d;}),_0x219e98[_0x279e61(0x20a)]((_0x5cfc5f,_0x125e27)=>{var _0x184f10=_0x279e61;_0x50790e[_0x125e27][_0x184f10(0x146)]=_0x5cfc5f;}),_0x503c17[_0x279e61(0x20a)]((_0x3e8084,_0xe94ac8)=>{_0x50790e[_0xe94ac8]['from_floorlevel']=_0x3e8084;}),_0x36617c[_0x279e61(0x20a)]((_0x461df6,_0x3f9712)=>{var _0x1049e9=_0x279e61;_0x50790e[_0x3f9712][_0x1049e9(0x204)]=_0x461df6;}),_0x7bc13d[_0x279e61(0x20a)]((_0x5e24ec,_0x5e373d)=>{var _0x3ba512=_0x279e61;_0x50790e[_0x5e373d][_0x3ba512(0x151)]=_0x5e24ec;}),_0x56b3e0[_0x279e61(0x20a)]((_0x4f26bc,_0x392a59)=>{var _0x504088=_0x279e61;_0x50790e[_0x392a59][_0x504088(0x136)]=_0x4f26bc;}),_0x392dfb[_0x279e61(0x20a)]((_0x1b42e5,_0x1678c8)=>{var _0x636dbb=_0x279e61;_0x50790e[_0x1678c8][_0x636dbb(0x1da)]=_0x1b42e5;}),_0x30bd2a[_0x279e61(0x20a)]((_0x517624,_0x2a2529)=>{var _0x29a953=_0x279e61;_0x50790e[_0x2a2529][_0x29a953(0x1fe)]=_0x517624;}),_0x497c0b['forEach']((_0x4e5cec,_0x2c3999)=>{var _0x5e9add=_0x279e61;_0x50790e[_0x2c3999][_0x5e9add(0x1e4)]=_0x4e5cec;}),_0x2d7fd9[_0x279e61(0x20a)]((_0x1295bb,_0x5346c4)=>{var _0x256670=_0x279e61;_0x50790e[_0x5346c4][_0x256670(0x1bb)]=_0x1295bb;}),_0xcef53c[_0x279e61(0x20a)]((_0x3272d8,_0xf64a34)=>{var _0x453a6f=_0x279e61;_0x50790e[_0xf64a34][_0x453a6f(0x157)]=_0x3272d8;}),_0x16824e[_0x279e61(0x20a)]((_0x19821a,_0x5e09ef)=>{var _0x46f6b7=_0x279e61;_0x50790e[_0x5e09ef][_0x46f6b7(0x201)]=_0x19821a;}),_0x26c167[_0x279e61(0x20a)]((_0xf827b6,_0x5d3bc9)=>{_0x50790e[_0x5d3bc9]['secondary_unit']=_0xf827b6;}),_0x5d22bc[_0x279e61(0x20a)]((_0x29785f,_0x3aae1b)=>{var _0x5bb697=_0x279e61;_0x50790e[_0x3aae1b][_0x5bb697(0x218)]=_0x29785f;}),_0x255312['forEach']((_0x4e91ce,_0x1cc4e7)=>{var _0xa58985=_0x279e61;_0x50790e[_0x1cc4e7][_0xa58985(0x15e)]=_0x4e91ce;}),_0x2cb844[_0x279e61(0x20a)]((_0x3eb088,_0x374107)=>{_0x50790e[_0x374107]['storage']=_0x3eb088;}),_0x56d9f9['forEach']((_0x4e0ee3,_0x8aca82)=>{var _0x2a2335=_0x279e61;_0x50790e[_0x8aca82][_0x2a2335(0x1ce)]=_0x4e0ee3;}),_0x445b4d[_0x279e61(0x20a)]((_0x8cf41f,_0x2d32e5)=>{var _0x31225f=_0x279e61;_0x50790e[_0x2d32e5][_0x31225f(0x1b4)]=_0x8cf41f;}),_0x12a11c[_0x279e61(0x20a)]((_0x58e36e,_0x4a3245)=>{var _0x3737a5=_0x279e61;_0x50790e[_0x4a3245][_0x3737a5(0x1c7)]=_0x58e36e;}),_0xf0d324[_0x279e61(0x20a)]((_0x21034a,_0x344388)=>{var _0x31ff4e=_0x279e61;_0x50790e[_0x344388][_0x31ff4e(0x1b6)]=_0x21034a;}),_0x4f5b20[_0x279e61(0x20a)]((_0x216c35,_0x5a75fb)=>{_0x50790e[_0x5a75fb]['from_rack']=_0x216c35;});const _0x4c1f52=_0x50790e[_0x279e61(0x17d)](_0x5dfd42=>_0x5dfd42[_0x279e61(0x204)]!=='0'&&_0x5dfd42[_0x279e61(0x204)]!==''||_0x5dfd42[_0x279e61(0x1da)]!=='0'&&_0x5dfd42[_0x279e61(0x1da)]!=='');var _0x4b2c29=0x0;_0x4c1f52[_0x279e61(0x20a)](_0x4af67c=>{var _0x19211a=_0x279e61;parseInt(_0x4af67c[_0x19211a(0x1ac)])<parseInt(_0x4af67c[_0x19211a(0x204)])&&_0x4b2c29++;});if(_0x4b2c29!=0x0)return _0x258648['flash']('errors','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x3770d7['redirect'](_0x279e61(0x174));const _0x1341fa=await warehouse[_0x279e61(0x13e)]({'name':_0x17f600[_0x279e61(0x21c)],'room':_0x17f600[_0x279e61(0x12f)]});_0x17f600[_0x279e61(0x16d)][_0x279e61(0x20a)](_0xd8f634=>{var _0x310dc4=_0x279e61;if(_0xd8f634[_0x310dc4(0x204)]>0x0){const _0x4c422c=_0x1341fa[_0x310dc4(0x214)][_0x310dc4(0x131)](_0x1d797b=>{var _0x1889c5=_0x310dc4;_0x1d797b[_0x1889c5(0x1a3)]==_0xd8f634[_0x1889c5(0x1a3)]&&_0x1d797b[_0x1889c5(0x1d0)]==_0xd8f634['from_floorlevel']&&_0x1d797b['type']==_0xd8f634[_0x1889c5(0x1b4)]&&_0x1d797b[_0x1889c5(0x1cf)]==_0xd8f634['from_bin']&&_0x1d797b[_0x1889c5(0x13f)]==_0xd8f634[_0x1889c5(0x1ed)]&&_0x1d797b['rack']==_0xd8f634[_0x1889c5(0x1fa)]&&_0x1d797b[_0x1889c5(0x20f)]==_0xd8f634[_0x1889c5(0x1b6)]&&(_0x1d797b[_0x1889c5(0x20b)]=parseInt(_0x1d797b[_0x1889c5(0x20b)])+parseInt(_0xd8f634[_0x1889c5(0x204)]));});}}),await _0x1341fa[_0x279e61(0x1ad)]();const _0x82b2a1=await warehouse['findOne']({'name':_0x17f600[_0x279e61(0x185)],'room':_0x17f600[_0x279e61(0x190)]});_0x17f600[_0x279e61(0x16d)][_0x279e61(0x20a)](_0x16492b=>{var _0x4b7098=_0x279e61;if(_0x16492b[_0x4b7098(0x204)]>0x0){const _0x2d1c73=_0x82b2a1[_0x4b7098(0x214)][_0x4b7098(0x131)](_0xe3f70=>{var _0x4a483d=_0x4b7098;_0xe3f70[_0x4a483d(0x1a3)]==_0x16492b[_0x4a483d(0x1a3)]&&_0xe3f70[_0x4a483d(0x1d0)]==_0x16492b[_0x4a483d(0x1da)]&&_0xe3f70[_0x4a483d(0x19e)]==_0x16492b[_0x4a483d(0x1c7)]&&_0xe3f70[_0x4a483d(0x1cf)]==_0x16492b[_0x4a483d(0x136)]&&_0xe3f70[_0x4a483d(0x13f)]==_0x16492b['to_bay']&&_0xe3f70['rack']==_0x16492b['rack']&&_0xe3f70[_0x4a483d(0x20f)]==_0x16492b[_0x4a483d(0x20f)]&&(_0xe3f70[_0x4a483d(0x20b)]=parseInt(_0xe3f70['product_stock'])-parseInt(_0x16492b[_0x4a483d(0x204)]));});}}),await _0x82b2a1[_0x279e61(0x1ad)](),_0x17f600[_0x279e61(0x148)]=_0x5b6320,_0x17f600[_0x279e61(0x21c)]=_0x5e79cd,_0x17f600[_0x279e61(0x185)]=_0x5ef1f4,_0x17f600['product']=_0x4c1f52,_0x17f600['note']=_0x19cc6f,_0x17f600['invoice']=_0x3a03e6;const _0x5879ec=await _0x17f600[_0x279e61(0x1ad)]();console[_0x279e61(0x18e)](_0x5879ec);const _0x42e425=await warehouse['findOne']({'name':_0x5e79cd,'room':_0x2705e4});_0x5879ec[_0x279e61(0x16d)]['forEach'](_0x3029e2=>{var _0x5a5dd9=_0x279e61;if(_0x3029e2['to_quantity']>0x0){const _0x166236=_0x42e425[_0x5a5dd9(0x214)][_0x5a5dd9(0x131)](_0x546ebe=>{var _0x4327bd=_0x5a5dd9;_0x546ebe[_0x4327bd(0x1a3)]==_0x3029e2[_0x4327bd(0x1a3)]&&_0x546ebe['floorlevel']==_0x3029e2['from_floorlevel']&&_0x546ebe[_0x4327bd(0x19e)]==_0x3029e2['from_types']&&_0x546ebe['bin']==_0x3029e2[_0x4327bd(0x146)]&&_0x546ebe[_0x4327bd(0x13f)]==_0x3029e2['from_bay']&&_0x546ebe['rack']==_0x3029e2[_0x4327bd(0x1fa)]&&_0x546ebe['storage']==_0x3029e2[_0x4327bd(0x1b6)]&&(_0x546ebe['product_stock']=parseInt(_0x546ebe['product_stock'])-parseInt(_0x3029e2[_0x4327bd(0x204)]));});}}),await _0x42e425[_0x279e61(0x1ad)]();const _0x240142=await warehouse['findOne']({'name':_0x5ef1f4,'room':_0x526706});_0x5879ec[_0x279e61(0x16d)][_0x279e61(0x20a)](_0x330d87=>{var _0x2e633e=_0x279e61;if(_0x330d87[_0x2e633e(0x204)]>0x0){var _0x283333=0x0;const _0x3c117f=_0x240142[_0x2e633e(0x214)][_0x2e633e(0x131)](_0x4dd04e=>{var _0x115922=_0x2e633e;_0x4dd04e[_0x115922(0x1a3)]==_0x330d87[_0x115922(0x1a3)]&&_0x4dd04e[_0x115922(0x1d0)]==_0x330d87['to_floorlevel']&&_0x4dd04e[_0x115922(0x19e)]==_0x330d87[_0x115922(0x1c7)]&&_0x4dd04e['bin']==_0x330d87['to_bin']&&_0x4dd04e[_0x115922(0x13f)]==_0x330d87[_0x115922(0x151)]&&_0x4dd04e[_0x115922(0x1ce)]==_0x330d87[_0x115922(0x1ce)]&&_0x4dd04e[_0x115922(0x20f)]==_0x330d87[_0x115922(0x20f)]&&(_0x4dd04e[_0x115922(0x20b)]=parseInt(_0x4dd04e[_0x115922(0x20b)])+parseInt(_0x330d87['to_quantity']),_0x283333++);});_0x283333=='0'&&(_0x240142[_0x2e633e(0x214)]=_0x240142[_0x2e633e(0x214)][_0x2e633e(0x197)]({'product_name':_0x330d87[_0x2e633e(0x1a3)],'product_stock':_0x330d87['to_quantity'],'bay':_0x330d87['to_bay'],'bin':_0x330d87['to_bin'],'type':_0x330d87['to_types'],'floorlevel':_0x330d87[_0x2e633e(0x1da)],'storage':_0x330d87[_0x2e633e(0x20f)],'rack':_0x330d87[_0x2e633e(0x1ce)],'product_code':_0x330d87[_0x2e633e(0x1bb)],'primary_code':_0x330d87[_0x2e633e(0x1fe)],'secondary_code':_0x330d87[_0x2e633e(0x1e4)],'maxProducts':_0x330d87[_0x2e633e(0x157)],'storage':_0x330d87['storage'],'rack':_0x330d87[_0x2e633e(0x1ce)]}));}}),await _0x240142[_0x279e61(0x1ad)](),_0x258648[_0x279e61(0x1d8)](_0x279e61(0x184),_0x279e61(0x1b1)),_0x3770d7[_0x279e61(0x1f8)](_0x279e61(0x14b));}catch(_0x836bbf){console[_0x279e61(0x18e)](_0x836bbf);}}),router['post']('/barcode_scanner',async(_0x316843,_0x3e2fad)=>{var _0x1576ca=a0_0x1e630d;const {FromWareHouse:_0x30c267,FromRoom:_0x22c462,ToWarehouse:_0x24f265,ToRoom:_0x28a54c,primary_code:_0x13b226,Roomslist:_0x1d032e}=_0x316843[_0x1576ca(0x193)],_0x2ddf17=_0x1d032e[_0x1576ca(0x158)](','),_0x4cf677=[];async function _0x5b03e6(_0x413f5e){var _0x2d8ac4=_0x1576ca;const _0x3b0bed=await warehouse[_0x2d8ac4(0x15d)]([{'$match':{'name':_0x30c267,'room':_0x413f5e}},{'$unwind':_0x2d8ac4(0x153)},{'$match':{'product_details.primary_code':_0x13b226}},{'$group':{'_id':_0x2d8ac4(0x21a),'name':{'$first':_0x2d8ac4(0x195)},'instock':{'$first':_0x2d8ac4(0x144)},'primary_code':{'$first':_0x2d8ac4(0x150)},'secondary_code':{'$first':_0x2d8ac4(0x1e3)},'product_code':{'$first':_0x2d8ac4(0x15f)},'level':{'$first':_0x2d8ac4(0x18f)},'isle':{'$first':_0x2d8ac4(0x177)},'type':{'$first':_0x2d8ac4(0x17f)},'pallet':{'$first':_0x2d8ac4(0x170)},'unit':{'$first':_0x2d8ac4(0x183)},'secondary_unit':{'$first':_0x2d8ac4(0x16c)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x2d8ac4(0x165)},'expiry_date':{'$first':_0x2d8ac4(0x1e9)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x2d8ac4(0x178)},'maxPerUnit':{'$first':_0x2d8ac4(0x1c1)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':'$product_details.maxProducts'},'invoice_product':{'$first':_0x2d8ac4(0x219)}}}]),_0x5ef064=await warehouse[_0x2d8ac4(0x15d)]([{'$match':{'name':_0x30c267,'room':_0x413f5e}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0x13b226}},{'$group':{'_id':_0x2d8ac4(0x21a),'name':{'$first':'$product_details.product_name'},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x2d8ac4(0x150)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x2d8ac4(0x15f)},'level':{'$first':_0x2d8ac4(0x18f)},'isle':{'$first':_0x2d8ac4(0x177)},'type':{'$first':_0x2d8ac4(0x17f)},'pallet':{'$first':_0x2d8ac4(0x170)},'unit':{'$first':_0x2d8ac4(0x183)},'secondary_unit':{'$first':_0x2d8ac4(0x16c)},'storage':{'$first':_0x2d8ac4(0x188)},'rack':{'$first':_0x2d8ac4(0x165)},'expiry_date':{'$first':_0x2d8ac4(0x1e9)},'production_date':{'$first':_0x2d8ac4(0x1a7)},'batch_code':{'$first':_0x2d8ac4(0x178)},'maxPerUnit':{'$first':_0x2d8ac4(0x1c1)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':'$room'},'maxProducts':{'$first':'$product_details.maxProducts'},'invoice_product':{'$first':_0x2d8ac4(0x219)}}}]);if(_0x3b0bed['length']>0x0)_0x4cf677[_0x2d8ac4(0x182)](_0x3b0bed);else _0x5ef064['length']>0x0&&_0x4cf677[_0x2d8ac4(0x182)](_0x5ef064);}const _0x2d69d6=_0x2ddf17['map'](_0x35d9e3=>_0x5b03e6(_0x35d9e3));await Promise[_0x1576ca(0x1cd)](_0x2d69d6),_0x3e2fad[_0x1576ca(0x1d3)](_0x4cf677);}),router[a0_0x1e630d(0x167)]('/barcode_scanner2',async(_0x1976d,_0x55643e)=>{var _0x38cfe7=a0_0x1e630d;try{const {FromWareHouse:_0x19aadc,FromRoom:_0x4dde03,ToWarehouse:_0x5e6fd7,ToRoom:_0x5705bd,secondary_code:_0x2233dd}=_0x1976d['body'],_0x29bc74=await warehouse[_0x38cfe7(0x15d)]([{'$match':{'name':_0x19aadc}},{'$unwind':_0x38cfe7(0x153)},{'$match':{'product_details.secondary_code':_0x2233dd}},{'$group':{'_id':_0x38cfe7(0x21a),'name':{'$first':_0x38cfe7(0x195)},'primary_code':{'$first':_0x38cfe7(0x150)},'secondary_code':{'$first':_0x38cfe7(0x1e3)},'product_code':{'$first':'$product_details.product_code'},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':_0x38cfe7(0x187)},'level':{'$first':_0x38cfe7(0x203)},'isle':{'$first':_0x38cfe7(0x1fc)},'pallet':{'$first':_0x38cfe7(0x19a)},'maxProducts':{'$first':'$product_details.maxProducts'},'unit':{'$first':_0x38cfe7(0x183)}}}]);_0x55643e['status'](0xc8)[_0x38cfe7(0x1d3)](_0x29bc74);}catch(_0x571c61){_0x55643e['status'](0x194)['json']({'message':_0x571c61['message']});}}),router[a0_0x1e630d(0x167)](a0_0x1e630d(0x192),async(_0x1a51c9,_0x52c2d2)=>{var _0x2b4142=a0_0x1e630d;try{const {FromWareHouse:_0x33691c,FromRoom:_0x53fd52,ToWarehouse:_0x4d1b2c,ToRoom:_0x506019,product_code:_0x1e0f3d}=_0x1a51c9[_0x2b4142(0x193)],_0x454b39=await warehouse[_0x2b4142(0x15d)]([{'$match':{'name':_0x33691c}},{'$unwind':_0x2b4142(0x153)},{'$match':{'product_details.product_code':_0x1e0f3d}},{'$group':{'_id':_0x2b4142(0x21a),'name':{'$first':_0x2b4142(0x195)},'primary_code':{'$first':_0x2b4142(0x150)},'secondary_code':{'$first':_0x2b4142(0x1e3)},'product_code':{'$first':_0x2b4142(0x15f)},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':'$name'},'level':{'$first':_0x2b4142(0x203)},'isle':{'$first':_0x2b4142(0x1fc)},'pallet':{'$first':_0x2b4142(0x19a)},'maxProducts':{'$first':_0x2b4142(0x16b)},'unit':{'$first':_0x2b4142(0x183)}}}]);_0x52c2d2['status'](0xc8)[_0x2b4142(0x1d3)](_0x454b39);}catch(_0x397174){_0x52c2d2[_0x2b4142(0x20d)](0x194)[_0x2b4142(0x1d3)]({'message':_0x397174[_0x2b4142(0x21b)]});}}),router[a0_0x1e630d(0x167)](a0_0x1e630d(0x206),async(_0x1ec3aa,_0x3010d3)=>{var _0x33951f=a0_0x1e630d;const {level:_0x54f32b,isle:_0x439e76,pallet:_0x18e5f1,warehouses:_0x3e85b8,room:_0x155e23}=_0x1ec3aa[_0x33951f(0x193)];try{const _0x4a7fe3=await warehouse[_0x33951f(0x15d)]([{'$match':{'name':_0x3e85b8,'room':_0x155e23}},{'$unwind':'$product_details'},{'$match':{'product_details.level':parseInt(_0x54f32b),'product_details.isle':_0x439e76,'product_details.pallet':parseInt(_0x18e5f1)}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':'$product_details.product_stock'},'level':{'$first':_0x33951f(0x203)},'isle':{'$first':_0x33951f(0x1fc)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x33951f(0x16b)}}}]);_0x3010d3[_0x33951f(0x20d)](0xc8)[_0x33951f(0x1d3)](_0x4a7fe3);}catch(_0x2c66f3){_0x3010d3[_0x33951f(0x20d)](0x194)[_0x33951f(0x1d3)]({'message':_0x2c66f3['message']});}}),module[a0_0x1e630d(0x1c0)]=router;function a0_0xe124(){var _0x15bf9f=['product_name','</head><body>','77ijUnkS','ToRoomAssigned','$product_details.production_date','/transfer/preview/','findById','warehouse','$date','from_quantity','save','nodemailer','8hbmQBb','id_transaction_id','Transfer\x20Edit\x20Successfully','password','852FuXUZB','from_types','2rCFYDJ','from_storage','updateOne','\x20</h2>','params','French','product_code','primary_unit','from_room_name','<span\x20style=\x22float:\x20right;\x22>','logo','exports','$product_details.maxPerUnit','here','24816KYncIN','<table\x20style=\x22width:\x20100%\x20!important;\x22>','language','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','to_types','<h5\x20style=\x22text-align:\x20left;\x22>','</div>','Rack\x20A','render','errors','all','rack','bin','floorlevel','Rack\x20B','<!DOCTYPE\x20html>','json','rak','random','max_per_unit','4hwIWwR','flash','An\x20error\x20occurred\x20while\x20saving\x20data.','to_floorlevel','/../public','$_id','Enabled','to_invoice','../models/all_models','</h5>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','from_prod_qty','$product_details.secondary_code','secondary_code','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','toString','<strong>\x20Regards\x20</strong>','to_prod_isle','$product_details.expiry_date','express','Receiving\x20Area','<hr\x20class=\x22my-3\x22>','from_bay','$room','Rack\x20F','Level','Rack\x20C','True','Enclosed','100AsZpXY','host','<tr>','Return\x20Rooms','redirect','add_transfer','from_rack','staff','$product_details.isle','Error\x20Occurs','primary_code','25931295cEYbGv','\x20Order\x20Date\x20:\x20','unit','/preview/:id','$product_details.level','to_quantity','find','/CheckingWarehouse','maxperunit','Portuguese','Transfer\x20Finalize\x20Successfully','forEach','product_stock','/view/add_transfer','status','catch','storage','Email\x20sent\x20successfully','Portuguese\x20(BR)','$from_warehouse','sendMail','product_details','To_invoice','user','from_prod_pallet','batch_code','$product_details.invoice','$product_details._id','message','from_warehouse','string','<h5>','$product','$finalize','production_date','/view','from_room','role','map','padStart','invoice','An\x20error\x20occurred.','error','to_bin','prod_cat','from_floorlevel','German','Product\x20Transfer\x20successfully','<div>','Arabic','Shelves','findOne','bay','MaxStocks_data2','from_invoice','/picking_list/PDF_transfer_rm/','then','$product_details.product_stock','site_title','from_bin','Raw\x20Materials','date','Arabic\x20(ae)','prod_name','/transfer/view','DRY\x20STORAGE','</td>','$invoice','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','$product_details.primary_code','to_bay','secondary_unit','$product_details','Floor','transfer','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','maxProducts','split','English\x20(US)','468046OEMdMT','387279FlGaaJ','\x20<>\x20','aggregate','expiry_date','$product_details.product_code','1073679NvRvcv','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','/view/:id','Transfer\x20Mail','master','$product_details.rack','Chinese','post','slice','Rack\x20E','</tr>','$product_details.maxProducts','$product_details.secondary_unit','product','English','</table>','$product_details.floorlevel','Ambient','get','finalize','back','New_Qty_Converted','id_transaction','$product_details.bin','$product_details.batch_code','from_rak','10475AnzsdA','TRF-','edit_transfer','filter','email','$product_details.type','$product.to_room_name','product_code3','push','$product_details.unit','success','to_warehouse','to_prod_level','$name','$product_details.storage','957572UoIzZK','</tbody>','RoomAssigned','<html><head><title></title>','$product.from_room_name','log','$product_details.bay','to_room','floor','/barcode_scanner3','body','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','$product_details.product_name','</body></html>','concat','getDate','to_room_name','$product_details.pallet','Spanish','length','to_prod_qty','type','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','from_prod_level','Hindi','_id'];a0_0xe124=function(){return _0x15bf9f;};return a0_0xe124();}