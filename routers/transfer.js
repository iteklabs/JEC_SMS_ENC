function a0_0x2fad(_0xf0412f,_0x32bb38){var _0x1a2b91=a0_0x1a2b();return a0_0x2fad=function(_0x2fad19,_0xbd1f3c){_0x2fad19=_0x2fad19-0x151;var _0x3bc35f=_0x1a2b91[_0x2fad19];return _0x3bc35f;},a0_0x2fad(_0xf0412f,_0x32bb38);}function a0_0x1a2b(){var _0x520d21=['product_details','nodemailer','$product_details.secondary_code','errors','<tr>','host','To_invoice','/view/:id','Transfer\x20Mail','production_date','from_bin','id_transaction_id','role','to_room','Receiving\x20Area','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','log','$product_details.batch_code','find','to_bin','save','<h2>\x20','params','$from_warehouse','findOne','/picking_list/PDF_transfer_rm/','$date','password','to_prod_qty','RoomAssigned','/transfer/view','<tbody\x20style=\x22text-align:\x20center;\x22>','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','Rack\x20B','language','product_code3','$product_details.product_name','Portuguese','all','Spanish','split','/view/add_transfer','Logo.png','/upload/','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','to_prod_level','$product_details.level','aggregate','slice','message','catch','There\x27s\x20a\x20error\x20in\x20this\x20transaction','Raw\x20Materials','Rack\x20C','from_bay','flash','/barcode_scanner3','from_rack','storage','unit','primary_code','1820394sZGKLH','$product_details.bay','max_per_unit','_id','from_warehouse','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','prod_cat','from_prod_isle','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','German','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','findById','logo','email','Hindi','$product_details.unit','2399096HklIWq','from_prod_pallet','Arabic','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','\x20Order\x20Number\x20:\x20','to_floorlevel','</thead>','length','<strong>\x20Regards\x20</strong>','<html><head><title></title>','id_transaction','success','maxperunit','<!DOCTYPE\x20html>','English\x20(US)','map','product_code','master','exports','An\x20error\x20occurred\x20while\x20saving\x20data.','Level','from_prod_level','$invoice','bin','staff','user','TRF-','$product_details.isle','to_prod_isle','ToRoomAssigned','concat','../public/language/languages.json','$product_details.product_stock','$name','redirect','render','from_storage','$_id','from_prod_qty','getMonth','$product_details.floorlevel','body','date','$product_details.rack','</body></html>','here','Arabic\x20(ae)','6aXSnnl','to_invoice','json','Transfer\x20Finalize\x20Successfully','An\x20error\x20occurred.','Product\x20Transfer\x20successfully','floor','../models/all_models','from_invoice','$product_details.pallet','to_bay','transfer','Chinese','maxProducts','English','rak','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','MaxStocks_data2','product_stock','Floor','to_quantity','\x20Order\x20Date\x20:\x20','error','$product_details.maxProducts','Router','sendMail','334616qhWCiW','COLD\x20STORAGE','from_rak','warehouse','push','</tr>','690816boiGwN','$product.from_room_name','New_Qty_Converted','RMSEmail','2258960GkHFVK','<span\x20style=\x22float:\x20right;\x22>','</td>','status','$product_details._id','/view','from_floorlevel','$product_details.primary_code','Rack\x20D','rack','expiry_date','back','$product_details.maxPerUnit','to_room_name','from_types','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','type','string','bay','primary_unit','</span>','$product_details.bin','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','secondary_unit','then','toString','prod_name','product_name','$to_warehouse','French','683508ePvifP','padStart','$product_details.storage','$product.to_room_name','image','post','to_warehouse','$product','Transfer\x20Edit\x20Successfully','</h5>','$product_details.type','note','3940115yWjIAq','$product_details.product_code','filter','Portuguese\x20(BR)','/transfer/preview/','True','$product_details.production_date','add_transfer','$isAllowEdit','Email\x20sent\x20successfully','/barcode_scanner','$product_details','Return\x20Rooms','$room','</div>','forEach','to_types','get','invoice','finalize','edit_transfer_view','Enabled','to_prod_pallet','secondary_code','floorlevel','batch_code','port','$product_details.invoice','<div>','product','$product_details.secondary_unit','Error\x20Occurs','from_quantity','\x20<>\x20','getFullYear','Shelves','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','site_title'];a0_0x1a2b=function(){return _0x520d21;};return a0_0x1a2b();}var a0_0x334c04=a0_0x2fad;(function(_0xdce0cc,_0x543c18){var _0x45b07e=a0_0x2fad,_0x4662c8=_0xdce0cc();while(!![]){try{var _0x48bb5d=parseInt(_0x45b07e(0x1a3))/0x1+-parseInt(_0x45b07e(0x1a9))/0x2+parseInt(_0x45b07e(0x23a))/0x3+-parseInt(_0x45b07e(0x15a))/0x4+parseInt(_0x45b07e(0x1d7))/0x5*(parseInt(_0x45b07e(0x189))/0x6)+-parseInt(_0x45b07e(0x1cb))/0x7+-parseInt(_0x45b07e(0x1ad))/0x8;if(_0x48bb5d===_0x543c18)break;else _0x4662c8['push'](_0x4662c8['shift']());}catch(_0x111f08){_0x4662c8['push'](_0x4662c8['shift']());}}}(a0_0x1a2b,0x62b11));const express=require('express'),app=express(),router=express[a0_0x334c04(0x1a1)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x334c04(0x190)),auth=require('../middleware/auth'),users=require(a0_0x334c04(0x179)),nodemailer=require(a0_0x334c04(0x1fe));router[a0_0x334c04(0x1e8)](a0_0x334c04(0x1b2),auth,async(_0x37cba8,_0x317fd9)=>{var _0x3a1d4b=a0_0x334c04;try{const {username:_0x22eb7c,email:_0x1948a4,role:_0x7c476f}=_0x37cba8['user'],_0x420fab=_0x37cba8[_0x3a1d4b(0x173)],_0x4cd4f0=await profile[_0x3a1d4b(0x215)]({'email':_0x420fab[_0x3a1d4b(0x157)]}),_0x514d7a=await master_shop['find']();console['log'](_0x3a1d4b(0x16b),_0x514d7a);let _0x1aea46;if(_0x420fab['role']==_0x3a1d4b(0x172)){const _0x4d687c=await staff[_0x3a1d4b(0x215)]({'email':_0x420fab[_0x3a1d4b(0x157)]});_0x1aea46=await transfers[_0x3a1d4b(0x20f)]({'from_warehouse':_0x4d687c[_0x3a1d4b(0x1a6)]});}else _0x1aea46=await transfers[_0x3a1d4b(0x22c)]([{'$unwind':_0x3a1d4b(0x1d2)},{'$group':{'_id':_0x3a1d4b(0x17f),'invoice':{'$first':_0x3a1d4b(0x170)},'date':{'$first':_0x3a1d4b(0x217)},'from_warehouse':{'$first':_0x3a1d4b(0x214)},'to_warehouse':{'$first':_0x3a1d4b(0x1c9)},'from_room_name':{'$addToSet':_0x3a1d4b(0x1aa)},'to_room_name':{'$addToSet':_0x3a1d4b(0x1ce)},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':_0x3a1d4b(0x1df)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x514d7a[0x0][_0x3a1d4b(0x21f)]==_0x3a1d4b(0x168)){var _0x1d41e9=users[_0x3a1d4b(0x197)];console[_0x3a1d4b(0x20d)](_0x1d41e9);}else{if(_0x514d7a[0x0][_0x3a1d4b(0x21f)]=='Hindi')var _0x1d41e9=users[_0x3a1d4b(0x158)];else{if(_0x514d7a[0x0][_0x3a1d4b(0x21f)]==_0x3a1d4b(0x153))var _0x1d41e9=users[_0x3a1d4b(0x153)];else{if(_0x514d7a[0x0][_0x3a1d4b(0x21f)]==_0x3a1d4b(0x224))var _0x1d41e9=users[_0x3a1d4b(0x224)];else{if(_0x514d7a[0x0][_0x3a1d4b(0x21f)]==_0x3a1d4b(0x1ca))var _0x1d41e9=users[_0x3a1d4b(0x1ca)];else{if(_0x514d7a[0x0][_0x3a1d4b(0x21f)]==_0x3a1d4b(0x1da))var _0x1d41e9=users[_0x3a1d4b(0x222)];else{if(_0x514d7a[0x0][_0x3a1d4b(0x21f)]==_0x3a1d4b(0x195))var _0x1d41e9=users[_0x3a1d4b(0x195)];else{if(_0x514d7a[0x0][_0x3a1d4b(0x21f)]=='Arabic\x20(ae)')var _0x1d41e9=users['Arabic'];}}}}}}}_0x317fd9['render'](_0x3a1d4b(0x194),{'success':_0x37cba8['flash'](_0x3a1d4b(0x165)),'errors':_0x37cba8[_0x3a1d4b(0x234)](_0x3a1d4b(0x200)),'role':_0x420fab,'profile':_0x4cd4f0,'master_shop':_0x514d7a,'transfer':_0x1aea46,'language':_0x1d41e9});}catch(_0x4ef04c){console['log'](_0x4ef04c);}});async function getRandom8DigitNumber(){var _0x1d2c46=a0_0x334c04;const _0x59b22c=0x989680,_0xdc23b8=0x5f5e0ff,_0x50d2a8=Math[_0x1d2c46(0x18f)](Math['random']()*(_0xdc23b8-_0x59b22c+0x1))+_0x59b22c;var _0x15569f;const _0x56940b=await transfers[_0x1d2c46(0x215)]({'invoice':_0x1d2c46(0x174)+_0x50d2a8});return _0x56940b&&_0x56940b['length']>0x0?_0x15569f='TRF-'+_0x50d2a8:_0x15569f=_0x1d2c46(0x174)+_0x50d2a8,_0x15569f;}router[a0_0x334c04(0x1e8)](a0_0x334c04(0x226),auth,async(_0x5ad6fd,_0x353ee4)=>{var _0x434f25=a0_0x334c04;try{const {username:_0x31ac8d,email:_0x8351eb,role:_0x32d41e}=_0x5ad6fd[_0x434f25(0x173)],_0x1c8159=_0x5ad6fd[_0x434f25(0x173)],_0x219193=await profile[_0x434f25(0x215)]({'email':_0x1c8159[_0x434f25(0x157)]}),_0x3dcbd6=await master_shop['find']();console[_0x434f25(0x20d)](_0x434f25(0x16b),_0x3dcbd6);let _0x2cc3ca;if(_0x1c8159[_0x434f25(0x209)]==_0x434f25(0x172)){const _0x5d823d=await staff[_0x434f25(0x215)]({'email':_0x1c8159[_0x434f25(0x157)]});_0x2cc3ca=await warehouse[_0x434f25(0x22c)]([{'$match':{'status':_0x434f25(0x1ec),'name':_0x5d823d['warehouse'],'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x434f25(0x17b),'name':{'$first':_0x434f25(0x17b)}}}]);}else _0x2cc3ca=await warehouse[_0x434f25(0x22c)]([{'$match':{'status':_0x434f25(0x1ec),'warehouse_category':_0x434f25(0x231)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);var _0x1ce09e=['Ambient','Enclosed',_0x434f25(0x1e3)];const _0x14b393=await transfers[_0x434f25(0x20f)]({}),_0xfd379c=_0x14b393[_0x434f25(0x161)]+0x1,_0x24b3cc='TRF-'+_0xfd379c[_0x434f25(0x1c6)]()[_0x434f25(0x1cc)](0x5,'0');if(_0x3dcbd6[0x0][_0x434f25(0x21f)]==_0x434f25(0x168)){var _0x6ef064=users[_0x434f25(0x197)];console[_0x434f25(0x20d)](_0x6ef064);}else{if(_0x3dcbd6[0x0][_0x434f25(0x21f)]==_0x434f25(0x158))var _0x6ef064=users['Hindi'];else{if(_0x3dcbd6[0x0][_0x434f25(0x21f)]==_0x434f25(0x153))var _0x6ef064=users[_0x434f25(0x153)];else{if(_0x3dcbd6[0x0]['language']=='Spanish')var _0x6ef064=users['Spanish'];else{if(_0x3dcbd6[0x0]['language']==_0x434f25(0x1ca))var _0x6ef064=users['French'];else{if(_0x3dcbd6[0x0][_0x434f25(0x21f)]=='Portuguese\x20(BR)')var _0x6ef064=users[_0x434f25(0x222)];else{if(_0x3dcbd6[0x0][_0x434f25(0x21f)]=='Chinese')var _0x6ef064=users[_0x434f25(0x195)];else{if(_0x3dcbd6[0x0]['language']==_0x434f25(0x188))var _0x6ef064=users[_0x434f25(0x15c)];}}}}}}}const _0x3309a1=getRandom8DigitNumber();_0x3309a1[_0x434f25(0x1c5)](_0x1b1bfb=>{var _0x25b4b8=_0x434f25;_0x353ee4[_0x25b4b8(0x17d)](_0x25b4b8(0x1de),{'success':_0x5ad6fd[_0x25b4b8(0x234)](_0x25b4b8(0x165)),'errors':_0x5ad6fd[_0x25b4b8(0x234)](_0x25b4b8(0x200)),'role':_0x1c8159,'profile':_0x219193,'master_shop':_0x3dcbd6,'warehouse':_0x2cc3ca,'language':_0x6ef064,'rooms_data':_0x1ce09e,'invoice':_0x1b1bfb});})['catch'](_0x11b523=>{var _0x217ac1=_0x434f25;_0x5ad6fd[_0x217ac1(0x234)](_0x217ac1(0x200),_0x217ac1(0x230)),_0x353ee4[_0x217ac1(0x17c)](_0x217ac1(0x21b));});}catch(_0xf904e2){console['log'](_0xf904e2);}}),router[a0_0x334c04(0x1d0)]('/view/add_transfer',auth,async(_0x24f01a,_0x2fc7c4)=>{var _0x1ba757=a0_0x334c04;try{console[_0x1ba757(0x20d)](_0x24f01a[_0x1ba757(0x183)]);const {date:_0x5a18fc,from_warehouse:_0x23aa73,FromRoom_name:_0xce4023,to_warehouse:_0x28c954,ToRoom_name:_0xac30ec,prod_name:_0xf5a547,from_prod_qty:_0xa1b35e,from_prod_level:_0x5aeb51,from_prod_isle:_0x2ed52c,from_prod_pallet:_0x13416a,to_prod_qty:_0x36a446,to_prod_level:_0x5dd965,to_prod_isle:_0x453fd4,to_prod_pallet:_0x315943,primary_code:_0x34d7d8,secondary_code:_0x1e7f2d,product_code3:_0x4f8ee6,note:_0x6299aa,MaxStocks_data2:_0x52fb27,invoice:_0x2805e2,expiry_date:_0x6fb9f2}=_0x24f01a[_0x1ba757(0x183)];if(typeof _0xf5a547==_0x1ba757(0x1be))var _0x4978cc=[_0x24f01a['body'][_0x1ba757(0x1c7)]],_0x4305f6=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x180)]],_0x5449ec=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x16f)]],_0x5bf816=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x1ab)]],_0x3e7870=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x22a)]],_0x4a9ab0=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x239)]],_0x193aa5=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x1ee)]],_0x2991f5=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x220)]],_0x26383e=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x19a)]],_0x2bcfba=[_0x24f01a['body'][_0x1ba757(0x1c0)]],_0x51b2b6=[_0x24f01a['body'][_0x1ba757(0x1c4)]],_0x255054=[_0x24f01a['body']['batch_code']],_0x45ff76=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x1b7)]],_0x56837a=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x23c)]],_0x4b87f9=[_0x24f01a['body'][_0x1ba757(0x206)]],_0x54be44=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x240)]],_0x2c57f9=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x21a)]],_0x1c8fbd=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x177)]],_0x314e0e=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x191)]],_0x1b67fb=[_0x24f01a[_0x1ba757(0x183)]['to_invoice']],_0x40ce13=[_0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x164)]];else var _0x4978cc=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x1c7)]],_0x4305f6=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x180)]],_0x5449ec=[..._0x24f01a['body']['from_prod_level']],_0x5bf816=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x1ab)]],_0x3e7870=[..._0x24f01a['body'][_0x1ba757(0x22a)]],_0x4a9ab0=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x239)]],_0x193aa5=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x1ee)]],_0x2991f5=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x220)]],_0x26383e=[..._0x24f01a['body']['MaxStocks_data2']],_0x2bcfba=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x1c0)]],_0x51b2b6=[..._0x24f01a['body'][_0x1ba757(0x1c4)]],_0x255054=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x1f0)]],_0x45ff76=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x1b7)]],_0x56837a=[..._0x24f01a['body'][_0x1ba757(0x23c)]],_0x4b87f9=[..._0x24f01a[_0x1ba757(0x183)]['production_date']],_0x54be44=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x240)]],_0x2c57f9=[..._0x24f01a[_0x1ba757(0x183)]['RoomAssigned']],_0x1c8fbd=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x177)]],_0x314e0e=[..._0x24f01a[_0x1ba757(0x183)]['from_invoice']],_0x1b67fb=[..._0x24f01a[_0x1ba757(0x183)][_0x1ba757(0x18a)]],_0x40ce13=[..._0x24f01a['body'][_0x1ba757(0x164)]];const _0x29cb99=_0x4978cc['map'](_0x3e0cf4=>{return _0x3e0cf4={'product_name':_0x3e0cf4};});_0x4305f6[_0x1ba757(0x1e6)]((_0x4dbd86,_0x17bd77)=>{_0x29cb99[_0x17bd77]['from_quantity']=_0x4dbd86;}),_0x314e0e[_0x1ba757(0x1e6)]((_0x1ab3d3,_0x19e638)=>{_0x29cb99[_0x19e638]['from_invoice']=_0x1ab3d3;}),_0x1b67fb[_0x1ba757(0x1e6)]((_0x3b84d5,_0x1dd712)=>{var _0x31d1db=_0x1ba757;_0x29cb99[_0x1dd712][_0x31d1db(0x203)]=_0x3b84d5;}),_0x40ce13['forEach']((_0x234bbe,_0xd31637)=>{var _0x1c36bf=_0x1ba757;_0x29cb99[_0xd31637][_0x1c36bf(0x208)]=_0x234bbe;}),_0x5449ec[_0x1ba757(0x1e6)]((_0x479982,_0x4dc501)=>{var _0x50b4d0=_0x1ba757;_0x2c57f9[_0x50b4d0(0x1e6)]((_0x369d26,_0x1060b7)=>{var _0x18c85c=_0x50b4d0;if(_0x369d26==_0x18c85c(0x20b)&&_0x4dc501==_0x1060b7){var _0x3098d9=_0x479982['slice'](0x3);_0x29cb99[_0x4dc501][_0x18c85c(0x17e)]=_0x479982[0x0],_0x29cb99[_0x4dc501][_0x18c85c(0x236)]=_0x479982[0x1],_0x29cb99[_0x4dc501][_0x18c85c(0x233)]=0x0,_0x29cb99[_0x4dc501]['from_bin']=0x0,_0x29cb99[_0x4dc501][_0x18c85c(0x1bb)]=_0x18c85c(0x19c),_0x29cb99[_0x4dc501][_0x18c85c(0x1b3)]=_0x3098d9;}else{if(_0x369d26==_0x18c85c(0x1fa)&&_0x4dc501==_0x1060b7){var _0x3098d9=_0x479982[_0x18c85c(0x22d)](0x3);_0x29cb99[_0x4dc501][_0x18c85c(0x17e)]=_0x479982[0x0],_0x29cb99[_0x4dc501][_0x18c85c(0x236)]=_0x479982[0x1],_0x29cb99[_0x4dc501][_0x18c85c(0x233)]=0x0,_0x29cb99[_0x4dc501][_0x18c85c(0x207)]=0x0,_0x29cb99[_0x4dc501]['from_types']=_0x18c85c(0x19c),_0x29cb99[_0x4dc501][_0x18c85c(0x1b3)]=_0x479982[0x5];}else{if(_0x4dc501==_0x1060b7){if(_0x479982[0x0]=='A'&&_0x479982[0x1]=='L'&&_0x479982[0x2]=='L')console['log'](_0x369d26+_0x18c85c(0x1f8)+_0x4dc501+_0x18c85c(0x1f8)+_0x1060b7+_0x18c85c(0x1f8)+_0x479982+_0x18c85c(0x187)),_0x29cb99[_0x4dc501][_0x18c85c(0x17e)]=_0x479982[0x0],_0x29cb99[_0x4dc501][_0x18c85c(0x236)]=_0x479982[0x1],_0x29cb99[_0x4dc501][_0x18c85c(0x233)]=0x0,_0x29cb99[_0x4dc501][_0x18c85c(0x207)]=0x0,_0x29cb99[_0x4dc501][_0x18c85c(0x1bb)]=_0x18c85c(0x19c),_0x29cb99[_0x4dc501][_0x18c85c(0x1b3)]=_0x479982[0x3];else{var _0x96d58e;if(_0x479982[0x4]=='L')_0x96d58e=_0x18c85c(0x16e);else _0x479982[0x4]=='F'&&(_0x96d58e=_0x18c85c(0x19c));_0x29cb99[_0x4dc501]['from_storage']=_0x479982[0x0],_0x29cb99[_0x4dc501]['from_rack']=_0x479982[0x1],_0x29cb99[_0x4dc501][_0x18c85c(0x233)]=_0x479982[0x2],_0x29cb99[_0x4dc501][_0x18c85c(0x207)]=_0x479982[0x3],_0x29cb99[_0x4dc501][_0x18c85c(0x1bb)]=_0x96d58e,_0x29cb99[_0x4dc501]['from_floorlevel']=_0x479982[0x5];}}}}});}),_0x5bf816[_0x1ba757(0x1e6)]((_0x343675,_0x39afe8)=>{var _0x5d47aa=_0x1ba757;_0x29cb99[_0x39afe8][_0x5d47aa(0x19d)]=_0x343675;}),_0x3e7870['forEach']((_0xaba05c,_0xfc7984)=>{var _0x541072=_0x1ba757;_0x1c8fbd[_0x541072(0x1e6)]((_0x2a4200,_0x170212)=>{var _0x357936=_0x541072;if(_0x2a4200=='Receiving\x20Area'&&_0xfc7984==_0x170212){var _0x1c7360=_0xaba05c[_0x357936(0x22d)](0x3);_0x29cb99[_0xfc7984]['storage']=_0xaba05c[0x0],_0x29cb99[_0xfc7984][_0x357936(0x1b6)]=_0xaba05c[0x1],_0x29cb99[_0xfc7984][_0x357936(0x193)]=0x0,_0x29cb99[_0xfc7984][_0x357936(0x210)]=0x0,_0x29cb99[_0xfc7984][_0x357936(0x1e7)]=_0x357936(0x19c),_0x29cb99[_0xfc7984]['to_floorlevel']=_0x1c7360;}else{if(_0x2a4200==_0x357936(0x1fa)&&_0xfc7984==_0x170212){var _0x1c7360=_0xaba05c['slice'](0x3);_0x29cb99[_0xfc7984]['storage']=_0xaba05c[0x0],_0x29cb99[_0xfc7984][_0x357936(0x1b6)]=_0xaba05c[0x1],_0x29cb99[_0xfc7984][_0x357936(0x193)]=0x0,_0x29cb99[_0xfc7984][_0x357936(0x210)]=0x0,_0x29cb99[_0xfc7984][_0x357936(0x1e7)]=_0x357936(0x19c),_0x29cb99[_0xfc7984][_0x357936(0x15f)]=_0xaba05c[0x5];}else{if(_0xfc7984==_0x170212){if(_0xaba05c[0x0]=='A'&&_0xaba05c[0x1]=='L'&&_0xaba05c[0x2]=='L')console[_0x357936(0x20d)](_0x2a4200+_0x357936(0x1f8)+_0xfc7984+_0x357936(0x1f8)+_0x170212+_0x357936(0x1f8)+_0xaba05c+_0x357936(0x187)),_0x29cb99[_0xfc7984][_0x357936(0x237)]=_0xaba05c[0x0],_0x29cb99[_0xfc7984][_0x357936(0x1b6)]=_0xaba05c[0x1],_0x29cb99[_0xfc7984][_0x357936(0x193)]=0x0,_0x29cb99[_0xfc7984][_0x357936(0x210)]=0x0,_0x29cb99[_0xfc7984]['to_types']='Floor',_0x29cb99[_0xfc7984]['to_floorlevel']=_0xaba05c[0x3];else{var _0x221101;if(_0xaba05c[0x4]=='L')_0x221101=_0x357936(0x16e);else _0xaba05c[0x4]=='F'&&(_0x221101=_0x357936(0x19c));_0x29cb99[_0xfc7984][_0x357936(0x237)]=_0xaba05c[0x0],_0x29cb99[_0xfc7984][_0x357936(0x1b6)]=_0xaba05c[0x1],_0x29cb99[_0xfc7984][_0x357936(0x193)]=_0xaba05c[0x2],_0x29cb99[_0xfc7984]['to_bin']=_0xaba05c[0x3],_0x29cb99[_0xfc7984][_0x357936(0x1e7)]=_0x221101,_0x29cb99[_0xfc7984][_0x357936(0x15f)]=_0xaba05c[0x5];}}}}});}),_0x4a9ab0['forEach']((_0x2a8986,_0x2009e4)=>{var _0x597352=_0x1ba757;_0x29cb99[_0x2009e4][_0x597352(0x239)]=_0x2a8986;}),_0x193aa5['forEach']((_0xfafe8b,_0x40dec0)=>{var _0xe5e9ec=_0x1ba757;_0x29cb99[_0x40dec0][_0xe5e9ec(0x1ee)]=_0xfafe8b;}),_0x2991f5[_0x1ba757(0x1e6)]((_0x41702,_0x38af93)=>{var _0x463df1=_0x1ba757;_0x29cb99[_0x38af93][_0x463df1(0x16a)]=_0x41702;}),_0x26383e[_0x1ba757(0x1e6)]((_0x2c1ac7,_0x1a7dd6)=>{var _0x2246c1=_0x1ba757;_0x29cb99[_0x1a7dd6][_0x2246c1(0x196)]=_0x2c1ac7;}),_0x2bcfba[_0x1ba757(0x1e6)]((_0x30202b,_0x52820b)=>{var _0x22d61b=_0x1ba757;_0x29cb99[_0x52820b][_0x22d61b(0x238)]=_0x30202b;}),_0x51b2b6['forEach']((_0x272543,_0x4d6c5e)=>{var _0x4e8892=_0x1ba757;_0x29cb99[_0x4d6c5e][_0x4e8892(0x1c4)]=_0x272543;}),_0x255054[_0x1ba757(0x1e6)]((_0x2b118b,_0x59cdbc)=>{_0x29cb99[_0x59cdbc]['batch_code']=_0x2b118b;}),_0x45ff76[_0x1ba757(0x1e6)]((_0x5de010,_0x306f32)=>{var _0x2253a8=_0x1ba757;_0x29cb99[_0x306f32][_0x2253a8(0x1b7)]=_0x5de010;}),_0x56837a[_0x1ba757(0x1e6)]((_0xca4eaf,_0x182d16)=>{var _0x19cf08=_0x1ba757;_0x29cb99[_0x182d16][_0x19cf08(0x166)]=_0xca4eaf;}),_0x4b87f9[_0x1ba757(0x1e6)]((_0x3bb1fa,_0x3cfd1d)=>{var _0x9e2e25=_0x1ba757;_0x29cb99[_0x3cfd1d][_0x9e2e25(0x206)]=_0x3bb1fa;}),_0x54be44[_0x1ba757(0x1e6)]((_0x4f1e3c,_0x769b24)=>{var _0x4eee25=_0x1ba757;_0x29cb99[_0x769b24][_0x4eee25(0x240)]=_0x4f1e3c;}),_0x2c57f9[_0x1ba757(0x1e6)]((_0x2bdd3f,_0x2e7fdf)=>{_0x29cb99[_0x2e7fdf]['from_room_name']=_0x2bdd3f;}),_0x1c8fbd['forEach']((_0x2c6874,_0x339464)=>{var _0x54bbc1=_0x1ba757;_0x29cb99[_0x339464][_0x54bbc1(0x1ba)]=_0x2c6874;});const _0x38215a=_0x29cb99['filter'](_0x4c7582=>_0x4c7582[_0x1ba757(0x19d)]!=='0'&&_0x4c7582[_0x1ba757(0x19d)]!==''||_0x4c7582[_0x1ba757(0x15f)]!=='0'&&_0x4c7582['to_floorlevel']!==''),_0x4461c4=new transfers({'date':_0x5a18fc,'from_warehouse':_0x23aa73,'to_warehouse':_0x28c954,'product':_0x38215a,'note':_0x6299aa,'invoice':_0x2805e2}),_0x5666cd=await _0x4461c4[_0x1ba757(0x211)]();_0x24f01a['flash'](_0x1ba757(0x165),_0x1ba757(0x18e)),_0x2fc7c4['redirect'](_0x1ba757(0x1db)+_0x5666cd[_0x1ba757(0x23d)]);}catch(_0x44fc30){console[_0x1ba757(0x20d)](_0x44fc30),_0x2fc7c4[_0x1ba757(0x1b0)](0xc8)[_0x1ba757(0x18b)]({'errorMessage':_0x44fc30[_0x1ba757(0x22e)]});}}),router[a0_0x334c04(0x1e8)]('/preview/:id',auth,async(_0x20d5ca,_0x130185)=>{var _0x2e4b2a=a0_0x334c04;try{const {username:_0x445b8c,email:_0x438edd,role:_0x1d2a10}=_0x20d5ca[_0x2e4b2a(0x173)],_0x446eb7=_0x20d5ca[_0x2e4b2a(0x173)],_0x120d9d=await profile[_0x2e4b2a(0x215)]({'email':_0x446eb7['email']}),_0x4dce64=await master_shop[_0x2e4b2a(0x20f)]();console[_0x2e4b2a(0x20d)](_0x2e4b2a(0x16b),_0x4dce64);const _0x421257=await transfers['findById'](_0x20d5ca['params']['id']);let _0x5a68b1=new Date(_0x421257[_0x2e4b2a(0x1b7)]),_0x16b9ec=('0'+_0x5a68b1['getDate']())[_0x2e4b2a(0x22d)](-0x2),_0x16c731=('0'+(_0x5a68b1[_0x2e4b2a(0x181)]()+0x1))[_0x2e4b2a(0x22d)](-0x2),_0x4c0238=_0x5a68b1[_0x2e4b2a(0x1f9)](),_0x860d69=_0x4c0238+'-'+_0x16c731+'-'+_0x16b9ec,_0xbb1cda;if(_0x446eb7[_0x2e4b2a(0x209)]==_0x2e4b2a(0x172)){const _0x354bdb=await staff['findOne']({'email':_0x446eb7['email']});_0xbb1cda=await warehouse[_0x2e4b2a(0x20f)]({'status':_0x2e4b2a(0x1ec),'name':_0x354bdb[_0x2e4b2a(0x1a6)],'warehouse_category':_0x2e4b2a(0x231)});}else _0xbb1cda=await warehouse[_0x2e4b2a(0x20f)]({'status':_0x2e4b2a(0x1ec),'warehouse_category':_0x2e4b2a(0x231)});const _0x286ae6=await warehouse[_0x2e4b2a(0x22c)]([{'$match':{'name':_0x421257[_0x2e4b2a(0x23e)]}},{'$unwind':_0x2e4b2a(0x1e2)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x2e4b2a(0x221)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x2e4b2a(0x1c2)},'type':{'$first':_0x2e4b2a(0x1d5)},'floorlevel':{'$first':_0x2e4b2a(0x182)},'primary_code':{'$first':_0x2e4b2a(0x1b4)},'secondary_code':{'$first':_0x2e4b2a(0x1ff)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x2e4b2a(0x1cd)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x2e4b2a(0x1dd)},'room':{'$first':_0x2e4b2a(0x1e4)}}}]);if(_0x4dce64[0x0][_0x2e4b2a(0x21f)]==_0x2e4b2a(0x168)){var _0x54d9ab=users[_0x2e4b2a(0x197)];console['log'](_0x54d9ab);}else{if(_0x4dce64[0x0][_0x2e4b2a(0x21f)]=='Hindi')var _0x54d9ab=users['Hindi'];else{if(_0x4dce64[0x0]['language']=='German')var _0x54d9ab=users[_0x2e4b2a(0x153)];else{if(_0x4dce64[0x0][_0x2e4b2a(0x21f)]==_0x2e4b2a(0x224))var _0x54d9ab=users[_0x2e4b2a(0x224)];else{if(_0x4dce64[0x0][_0x2e4b2a(0x21f)]=='French')var _0x54d9ab=users[_0x2e4b2a(0x1ca)];else{if(_0x4dce64[0x0]['language']=='Portuguese\x20(BR)')var _0x54d9ab=users['Portuguese'];else{if(_0x4dce64[0x0][_0x2e4b2a(0x21f)]==_0x2e4b2a(0x195))var _0x54d9ab=users['Chinese'];else{if(_0x4dce64[0x0][_0x2e4b2a(0x21f)]==_0x2e4b2a(0x188))var _0x54d9ab=users[_0x2e4b2a(0x15c)];}}}}}}}_0x130185[_0x2e4b2a(0x17d)](_0x2e4b2a(0x1eb),{'success':_0x20d5ca[_0x2e4b2a(0x234)]('success'),'errors':_0x20d5ca['flash'](_0x2e4b2a(0x200)),'role':_0x446eb7,'profile':_0x120d9d,'master_shop':_0x4dce64,'warehouse':_0xbb1cda,'transfer':_0x421257,'stock':_0x286ae6,'language':_0x54d9ab});}catch(_0x34744c){console[_0x2e4b2a(0x20d)](_0x34744c);}}),router[a0_0x334c04(0x1d0)]('/preview/:id',auth,async(_0x4704f7,_0x6918d2)=>{var _0x2a7f67=a0_0x334c04;try{const _0x36409b=_0x4704f7['params']['id'],{from_warehouse:_0x92e73d,FromRoom_name:_0x4026c7,to_warehouse:_0x5cfbdd,ToRoom_name:_0x26e8d3}=_0x4704f7[_0x2a7f67(0x183)],_0x91b1fd=await transfers[_0x2a7f67(0x155)]({'_id':_0x36409b}),_0x3a8cb5=_0x91b1fd['product'][_0x2a7f67(0x169)](async _0x4c35b1=>{var _0x418752=_0x2a7f67;if(_0x4c35b1[_0x418752(0x19d)]>0x0){var _0x60539d=await warehouse[_0x418752(0x215)]({'name':_0x91b1fd['from_warehouse'],'room':_0x4c35b1['from_room_name'],'warehouse_category':_0x418752(0x231)});const _0xfbeaf6=_0x60539d['product_details'][_0x418752(0x169)](_0x214d70=>{var _0x1b7970=_0x418752;_0x214d70['product_name']==_0x4c35b1[_0x1b7970(0x1c8)]&&_0x214d70[_0x1b7970(0x1ef)]==_0x4c35b1[_0x1b7970(0x1b3)]&&_0x214d70['type']==_0x4c35b1[_0x1b7970(0x1bb)]&&_0x214d70[_0x1b7970(0x171)]==_0x4c35b1['from_bin']&&_0x214d70['bay']==_0x4c35b1[_0x1b7970(0x233)]&&_0x214d70[_0x1b7970(0x1b6)]==_0x4c35b1[_0x1b7970(0x236)]&&_0x214d70['storage']==_0x4c35b1[_0x1b7970(0x17e)]&&_0x214d70[_0x1b7970(0x1b7)]==_0x4c35b1['expiry_date']&&_0x214d70[_0x1b7970(0x1f0)]==_0x4c35b1['batch_code']&&_0x214d70[_0x1b7970(0x206)]==_0x4c35b1[_0x1b7970(0x206)]&&_0x214d70[_0x1b7970(0x1e9)]==_0x4c35b1[_0x1b7970(0x191)]&&_0x214d70[_0x1b7970(0x23d)]==_0x4c35b1['id_transaction_id']&&(_0x214d70[_0x1b7970(0x19b)]=_0x214d70['product_stock']-_0x4c35b1['to_quantity']);});}return _0x60539d;});Promise[_0x2a7f67(0x223)](_0x3a8cb5)[_0x2a7f67(0x1c5)](async _0x1b4ec5=>{var _0x3c9fe5=_0x2a7f67;try{for(const _0x27c0b4 of _0x1b4ec5){await _0x27c0b4[_0x3c9fe5(0x211)]();}try{const _0x220276=_0x91b1fd[_0x3c9fe5(0x1f4)][_0x3c9fe5(0x169)](async _0x369b62=>{var _0x5cf87e=_0x3c9fe5;if(_0x369b62['to_quantity']>0x0){var _0x222fff=await warehouse[_0x5cf87e(0x215)]({'name':_0x91b1fd[_0x5cf87e(0x1d1)],'room':_0x369b62[_0x5cf87e(0x1ba)],'warehouse_category':_0x5cf87e(0x231)}),_0x598500=0x0;const _0x5c97d2=_0x222fff[_0x5cf87e(0x1fd)][_0x5cf87e(0x169)](_0x2947a3=>{var _0x27996a=_0x5cf87e;_0x2947a3[_0x27996a(0x1c8)]==_0x369b62[_0x27996a(0x1c8)]&&_0x2947a3[_0x27996a(0x1ef)]==_0x369b62[_0x27996a(0x15f)]&&_0x2947a3[_0x27996a(0x1bd)]==_0x369b62[_0x27996a(0x1e7)]&&_0x2947a3[_0x27996a(0x171)]==_0x369b62[_0x27996a(0x210)]&&_0x2947a3[_0x27996a(0x1bf)]==_0x369b62[_0x27996a(0x193)]&&_0x2947a3[_0x27996a(0x1b6)]==_0x369b62[_0x27996a(0x1b6)]&&_0x2947a3[_0x27996a(0x237)]==_0x369b62['storage']&&_0x2947a3[_0x27996a(0x1b7)]==_0x369b62[_0x27996a(0x1b7)]&&_0x2947a3[_0x27996a(0x1f0)]==_0x369b62[_0x27996a(0x1f0)]&&_0x2947a3[_0x27996a(0x206)]==_0x369b62['production_date']&&_0x2947a3[_0x27996a(0x1e9)]==_0x369b62['To_invoice']&&(_0x2947a3[_0x27996a(0x19b)]=_0x2947a3['product_stock']+_0x369b62[_0x27996a(0x19d)],_0x598500++);});_0x598500=='0'&&(_0x222fff['product_details']=_0x222fff[_0x5cf87e(0x1fd)][_0x5cf87e(0x178)]({'product_name':_0x369b62['product_name'],'product_stock':_0x369b62[_0x5cf87e(0x19d)],'bay':_0x369b62['to_bay'],'bin':_0x369b62[_0x5cf87e(0x210)],'type':_0x369b62[_0x5cf87e(0x1e7)],'floorlevel':_0x369b62[_0x5cf87e(0x15f)],'storage':_0x369b62[_0x5cf87e(0x237)],'rack':_0x369b62[_0x5cf87e(0x1b6)],'product_code':_0x369b62[_0x5cf87e(0x16a)],'primary_code':_0x369b62[_0x5cf87e(0x239)],'secondary_code':_0x369b62[_0x5cf87e(0x1ee)],'maxProducts':_0x369b62[_0x5cf87e(0x196)],'storage':_0x369b62[_0x5cf87e(0x237)],'rack':_0x369b62[_0x5cf87e(0x1b6)],'expiry_date':_0x369b62[_0x5cf87e(0x1b7)],'maxPerUnit':_0x369b62[_0x5cf87e(0x166)],'batch_code':_0x369b62[_0x5cf87e(0x1f0)],'production_date':_0x369b62['production_date']}));}return _0x222fff;});Promise[_0x3c9fe5(0x223)](_0x220276)[_0x3c9fe5(0x1c5)](async _0x4c45d4=>{var _0x21b904=_0x3c9fe5;try{for(const _0x4fb112 of _0x4c45d4){await warehouse['updateOne']({'_id':_0x4fb112[_0x21b904(0x23d)]},{'$addToSet':{'product_details':{'$each':_0x4fb112[_0x21b904(0x1fd)]}}});}_0x91b1fd[_0x21b904(0x1ea)]=_0x21b904(0x1dc);const _0x1c209f=await _0x91b1fd[_0x21b904(0x211)](),_0x300a8b=await master_shop[_0x21b904(0x20f)](),_0x320a96=await email_settings[_0x21b904(0x215)](),_0x9a44b4=await supervisor_settings['find']();var _0xc672e5=_0x91b1fd['product'],_0x1d65e9='',_0x465eef;for(_0x465eef in _0xc672e5){_0x1d65e9+=_0x21b904(0x201)+_0x21b904(0x21d)+_0xc672e5[_0x465eef][_0x21b904(0x1c8)]+_0x21b904(0x1af)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xc672e5[_0x465eef][_0x21b904(0x16a)]+_0x21b904(0x1af)+_0x21b904(0x21d)+_0xc672e5[_0x465eef][_0x21b904(0x19d)]+_0x21b904(0x1af)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xc672e5[_0x465eef][_0x21b904(0x238)]+_0x21b904(0x1af)+_0x21b904(0x21d)+_0xc672e5[_0x465eef][_0x21b904(0x1c4)]+_0x21b904(0x1af)+_0x21b904(0x21d)+_0x91b1fd[_0x21b904(0x1d1)]+_0x21b904(0x1af)+_0x21b904(0x21d)+_0xc672e5[_0x465eef]['to_room_name']+_0x21b904(0x1af)+_0x21b904(0x21d)+_0xc672e5[_0x465eef][_0x21b904(0x237)]+_0xc672e5[_0x465eef]['rack']+_0xc672e5[_0x465eef][_0x21b904(0x193)]+_0xc672e5[_0x465eef][_0x21b904(0x210)]+_0xc672e5[_0x465eef][_0x21b904(0x1e7)][0x0]+_0xc672e5[_0x465eef]['to_floorlevel']+_0x21b904(0x1af),_0x21b904(0x1a8);}let _0x9d5eb6=nodemailer['createTransport']({'host':_0x320a96[_0x21b904(0x202)],'port':Number(_0x320a96[_0x21b904(0x1f1)]),'secure':![],'auth':{'user':_0x320a96[_0x21b904(0x157)],'pass':_0x320a96[_0x21b904(0x218)]}}),_0x270331={'from':_0x320a96[_0x21b904(0x157)],'to':_0x9a44b4[0x0][_0x21b904(0x1ac)],'subject':_0x21b904(0x205),'attachments':[{'filename':_0x21b904(0x227),'path':__dirname+'/../public'+_0x21b904(0x228)+_0x300a8b[0x0][_0x21b904(0x1cf)],'cid':_0x21b904(0x156)}],'html':_0x21b904(0x167)+_0x21b904(0x163)+'</head><body>'+_0x21b904(0x1f3)+_0x21b904(0x229)+_0x21b904(0x1f3)+_0x21b904(0x15d)+_0x21b904(0x1e5)+'<div>'+_0x21b904(0x212)+_0x300a8b[0x0][_0x21b904(0x1fc)]+'\x20</h2>'+_0x21b904(0x1e5)+_0x21b904(0x1e5)+'<hr\x20class=\x22my-3\x22>'+_0x21b904(0x1f3)+'<h5\x20style=\x22text-align:\x20left;\x22>'+_0x21b904(0x15e)+_0x91b1fd[_0x21b904(0x1e9)]+'\x20'+_0x21b904(0x1ae)+_0x21b904(0x19e)+_0x91b1fd[_0x21b904(0x184)]+'\x20'+_0x21b904(0x1c1)+_0x21b904(0x1d4)+'</div>'+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x21b904(0x154)+_0x21b904(0x201)+_0x21b904(0x20c)+_0x21b904(0x1c3)+_0x21b904(0x23f)+_0x21b904(0x1fb)+_0x21b904(0x199)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0x21b904(0x152)+_0x21b904(0x1bc)+'</tr>'+_0x21b904(0x160)+_0x21b904(0x21c)+'\x20'+_0x1d65e9+'\x20'+'</tbody>'+'</table>'+_0x21b904(0x1f3)+_0x21b904(0x162)+'<h5>'+_0x300a8b[0x0][_0x21b904(0x1fc)]+'</h5>'+'</div>'+_0x21b904(0x1e5)+_0x21b904(0x186)};_0x9d5eb6[_0x21b904(0x1a2)](_0x270331,function(_0x2452e4,_0x548ee3){var _0x41944a=_0x21b904;_0x2452e4?(console[_0x41944a(0x20d)](_0x2452e4),console[_0x41944a(0x20d)](_0x41944a(0x1f6))):console[_0x41944a(0x20d)](_0x41944a(0x1e0));}),_0x4704f7['flash'](_0x21b904(0x165),_0x21b904(0x18c)),_0x6918d2[_0x21b904(0x17c)](_0x21b904(0x216)+_0x1c209f[_0x21b904(0x23d)]);}catch(_0x4fea9c){console[_0x21b904(0x19f)](_0x4fea9c),_0x6918d2[_0x21b904(0x1b0)](0x1f4)[_0x21b904(0x18b)]({'Perror':_0x21b904(0x16d),'message':_0x4fea9c[_0x21b904(0x22e)]});}})[_0x3c9fe5(0x22f)](_0x2a2ab6=>{var _0x4afbcc=_0x3c9fe5;console[_0x4afbcc(0x19f)](_0x2a2ab6),_0x6918d2['status'](0x1f4)['json']({'Perror':_0x4afbcc(0x18d)});});}catch(_0x8852ac){_0x6918d2['json'](_0x8852ac);}}catch(_0x3667ca){console[_0x3c9fe5(0x19f)](_0x3667ca),_0x6918d2[_0x3c9fe5(0x1b0)](0x1f4)[_0x3c9fe5(0x18b)]({'Merror':'An\x20error\x20occurred\x20while\x20saving\x20data.','Message':_0x3667ca[_0x3c9fe5(0x22e)]});}})[_0x2a7f67(0x22f)](_0x426e3f=>{var _0x5dbc4c=_0x2a7f67;console[_0x5dbc4c(0x19f)](_0x426e3f),_0x6918d2[_0x5dbc4c(0x1b0)](0x1f4)[_0x5dbc4c(0x18b)]({'Merror':'An\x20error\x20occurred.'});});}catch(_0x560084){console['log'](_0x560084);}});function BayBinSelected(_0x11b8c0,_0x3090ee){var _0x1725a3=a0_0x334c04,_0x31c04e=[],_0x53332a=[],_0x3d17af=[],_0x17627b=[],_0x1b986e=[],_0x33a06a=[];let _0x4bfb68=[];if(_0x11b8c0=='DRY\x20STORAGE')switch(_0x3090ee){case'Rack\x20A':_0x31c04e=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x53332a=[0x1,0x2],_0x17627b=[0x1,0x2,0x3,0x4,0x5],_0x3d17af=[_0x1725a3(0x16e),'Floor'],_0x1b986e=['D'],_0x33a06a=['A'];break;case _0x1725a3(0x21e):_0x31c04e=[0x6,0x5,0x4,0x3,0x2,0x1],_0x53332a=[0x1,0x2],_0x17627b=[0x1,0x2,0x3,0x4,0x5],_0x3d17af=[_0x1725a3(0x16e),_0x1725a3(0x19c)],_0x1b986e=['D'],_0x33a06a=['B'];break;case _0x1725a3(0x1fa):_0x31c04e=[0x0],_0x53332a=[0x0],_0x17627b=[0x1,0x2,0x3,0x4,0x5],_0x3d17af=[_0x1725a3(0x19c)],_0x1b986e=['D'],_0x33a06a=['S'];break;case'Receiving\x20Area':_0x31c04e=[0x0],_0x53332a=[0x0],_0x17627b=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x3d17af=['Floor'],_0x1b986e=['D'],_0x33a06a=['R'];break;}else{if(_0x11b8c0==_0x1725a3(0x1a4))switch(_0x3090ee){case'Rack\x20A':_0x31c04e=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x53332a=['B','F'],_0x17627b=[0x1,0x2,0x3,0x4,0x5],_0x3d17af=[_0x1725a3(0x16e),'Floor'],_0x1b986e=['C'],_0x33a06a=['A'];break;case _0x1725a3(0x21e):_0x31c04e=[0x5,0x4,0x3,0x2,0x1],_0x53332a=['F','B','S'],_0x17627b=[0x1,0x2,0x3,0x4,0x5],_0x3d17af=[_0x1725a3(0x16e),_0x1725a3(0x19c)],_0x1b986e=['C'],_0x33a06a=['B'];break;case _0x1725a3(0x232):_0x31c04e=[0x1,0x2,0x3,0x4,0x5],_0x53332a=['B','F','S'],_0x17627b=[0x5,0x4,0x3,0x2,0x1],_0x3d17af=[_0x1725a3(0x16e),_0x1725a3(0x19c)],_0x1b986e=['C'],_0x33a06a=['C'];break;case _0x1725a3(0x1b5):_0x31c04e=[0x5,0x4,0x3,0x2,0x1],_0x53332a=['F','B','S'],_0x17627b=[0x1,0x2,0x3,0x4,0x5],_0x3d17af=['Level','Floor'],_0x1b986e=['C'],_0x33a06a=['D'];break;case'Rack\x20E':_0x31c04e=[0x4,0x3,0x2,0x1],_0x53332a=[0x1,0x2],_0x17627b=[0x1,0x2,0x3,0x4,0x5],_0x3d17af=[_0x1725a3(0x16e),'Floor'],_0x1b986e=['C'],_0x33a06a=['E'];break;case'Rack\x20F':_0x31c04e=[0x1,0x2,0x3],_0x53332a=[0x1,0x2],_0x17627b=[0x1,0x2,0x3,0x4,0x5],_0x3d17af=[_0x1725a3(0x16e)],_0x1b986e=['C'],_0x33a06a=['F'];break;}}return{'levels':_0x31c04e,'Isle':_0x53332a,'rack':_0x17627b,'type':_0x3d17af,'storage':_0x1b986e,'rak':_0x33a06a};}router[a0_0x334c04(0x1e8)]('/view/:id',auth,async(_0x520d34,_0x251f6c)=>{var _0x45ef01=a0_0x334c04;try{const {username:_0xdf3797,email:_0x4addd2,role:_0x421d7f}=_0x520d34[_0x45ef01(0x173)],_0x3af645=_0x520d34['user'],_0x8f226c=await profile[_0x45ef01(0x215)]({'email':_0x3af645[_0x45ef01(0x157)]}),_0x5a74e6=await master_shop[_0x45ef01(0x20f)](),_0x34fae1=await transfers['findById'](_0x520d34[_0x45ef01(0x213)]['id']);let _0x1eb6ca;if(_0x3af645[_0x45ef01(0x209)]==_0x45ef01(0x172)){const _0x32639d=await staff['findOne']({'email':_0x3af645[_0x45ef01(0x157)]});_0x1eb6ca=await warehouse[_0x45ef01(0x22c)]([{'$match':{'status':_0x45ef01(0x1ec),'name':_0x32639d[_0x45ef01(0x1a6)],'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x45ef01(0x17b),'name':{'$first':_0x45ef01(0x17b)}}}]);}else _0x1eb6ca=await warehouse[_0x45ef01(0x22c)]([{'$match':{'status':_0x45ef01(0x1ec),'warehouse_category':_0x45ef01(0x231)}},{'$group':{'_id':'$name','name':{'$first':_0x45ef01(0x17b)}}}]);const _0x4975b7=await warehouse[_0x45ef01(0x22c)]([{'$match':{'name':_0x34fae1['from_warehouse'],'warehouse_category':_0x45ef01(0x231)}},{'$unwind':'$product_details'},{'$group':{'_id':_0x45ef01(0x1b1),'name':{'$first':_0x45ef01(0x221)},'product_stock':{'$first':_0x45ef01(0x17a)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x45ef01(0x182)},'primary_code':{'$first':_0x45ef01(0x1b4)},'secondary_code':{'$first':_0x45ef01(0x1ff)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x45ef01(0x1cd)},'rack':{'$first':_0x45ef01(0x185)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x45ef01(0x1dd)},'room':{'$first':'$room'}}}]),_0x160e10=await product[_0x45ef01(0x20f)]({}),_0x54c81c=BayBinSelected(_0x34fae1[_0x45ef01(0x1d1)],_0x34fae1[_0x45ef01(0x20a)]);if(_0x5a74e6[0x0][_0x45ef01(0x21f)]=='English\x20(US)'){var _0x240867=users[_0x45ef01(0x197)];console['log'](_0x240867);}else{if(_0x5a74e6[0x0][_0x45ef01(0x21f)]==_0x45ef01(0x158))var _0x240867=users[_0x45ef01(0x158)];else{if(_0x5a74e6[0x0]['language']==_0x45ef01(0x153))var _0x240867=users[_0x45ef01(0x153)];else{if(_0x5a74e6[0x0][_0x45ef01(0x21f)]==_0x45ef01(0x224))var _0x240867=users[_0x45ef01(0x224)];else{if(_0x5a74e6[0x0]['language']==_0x45ef01(0x1ca))var _0x240867=users[_0x45ef01(0x1ca)];else{if(_0x5a74e6[0x0]['language']==_0x45ef01(0x1da))var _0x240867=users['Portuguese'];else{if(_0x5a74e6[0x0][_0x45ef01(0x21f)]=='Chinese')var _0x240867=users[_0x45ef01(0x195)];else{if(_0x5a74e6[0x0][_0x45ef01(0x21f)]==_0x45ef01(0x188))var _0x240867=users['Arabic'];}}}}}}}_0x251f6c[_0x45ef01(0x17d)]('edit_transfer',{'success':_0x520d34['flash'](_0x45ef01(0x165)),'errors':_0x520d34['flash'](_0x45ef01(0x200)),'role':_0x3af645,'profile':_0x8f226c,'master_shop':_0x5a74e6,'warehouse':_0x1eb6ca,'transfer':_0x34fae1,'stock':_0x4975b7,'unit':_0x160e10,'language':_0x240867});}catch(_0x357bc1){console[_0x45ef01(0x20d)](_0x357bc1);}}),router['post'](a0_0x334c04(0x204),auth,async(_0x5706e2,_0xe83e94)=>{var _0x8ea90a=a0_0x334c04;try{const _0x1bb67b=_0x5706e2[_0x8ea90a(0x213)]['id'],_0x67e5ea=await transfers[_0x8ea90a(0x155)](_0x1bb67b);_0xe83e94[_0x8ea90a(0x18b)](_0x5706e2[_0x8ea90a(0x183)]);return;const {date:_0x472f3f,from_warehouse:_0x4e189a,FromRoom_name:_0x3405a1,to_warehouse:_0x45bc42,ToRoom_name:_0x85562,prod_name:_0x3b64df,from_prod_qty:_0x5c8928,from_prod_level:_0x3e94e4,from_prod_isle:_0x178d2b,from_prod_pallet:_0x5e5436,to_prod_qty:_0x13ad72,to_prod_level:_0x2103f1,to_prod_isle:_0x317854,to_prod_pallet:_0x4d7fbc,primary_code:_0x54f061,secondary_code:_0xf65824,product_code3:_0x3db0d7,note:_0x2f5535,invoice:_0x13db90,expiry_date:_0x2022a5}=_0x5706e2['body'];if(typeof _0x3b64df==_0x8ea90a(0x1be))var _0x3b8d14=[_0x5706e2['body'][_0x8ea90a(0x1c7)]],_0xae6ca=[_0x5706e2[_0x8ea90a(0x183)]['from_prod_qty']],_0x5ef84f=[_0x5706e2['body'][_0x8ea90a(0x16f)]],_0x48e705=[_0x5706e2['body'][_0x8ea90a(0x151)]],_0x5ebb60=[_0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x15b)]],_0x31752e=[_0x5706e2[_0x8ea90a(0x183)]['from_types']],_0x264315=[_0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x219)]],_0x366b71=[_0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x22a)]],_0x279669=[_0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x176)]],_0x26035a=[_0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x1ed)]],_0x24e2ef=[_0x5706e2[_0x8ea90a(0x183)]['to_types']],_0x5c0ba2=[_0x5706e2['body'][_0x8ea90a(0x237)]],_0x2e1209=[_0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x198)]],_0x474a37=[_0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x239)]],_0x4ee5c8=[_0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x1ee)]],_0x35574c=[_0x5706e2['body'][_0x8ea90a(0x220)]],_0x7210ba=[_0x5706e2['body']['MaxStocks_data2']],_0x3fe961=[_0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x238)]],_0x45bce6=[_0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x1c4)]],_0x3036e9=[_0x5706e2[_0x8ea90a(0x183)]['batch_code']],_0x7a9d63=[_0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x1b7)]],_0x3ae291=[_0x5706e2[_0x8ea90a(0x183)]['from_storage']],_0x34ed1b=[_0x5706e2['body'][_0x8ea90a(0x1a5)]];else var _0x3b8d14=[..._0x5706e2['body'][_0x8ea90a(0x1c7)]],_0x5c0ba2=[..._0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x237)]],_0x2e1209=[..._0x5706e2['body'][_0x8ea90a(0x198)]],_0x31752e=[..._0x5706e2['body']['from_types']],_0x24e2ef=[..._0x5706e2[_0x8ea90a(0x183)]['to_types']],_0xae6ca=[..._0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x180)]],_0x5ef84f=[..._0x5706e2[_0x8ea90a(0x183)]['from_prod_level']],_0x48e705=[..._0x5706e2['body'][_0x8ea90a(0x151)]],_0x5ebb60=[..._0x5706e2['body'][_0x8ea90a(0x15b)]],_0x264315=[..._0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x219)]],_0x366b71=[..._0x5706e2['body'][_0x8ea90a(0x22a)]],_0x279669=[..._0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x176)]],_0x26035a=[..._0x5706e2[_0x8ea90a(0x183)]['to_prod_pallet']],_0x474a37=[..._0x5706e2['body'][_0x8ea90a(0x239)]],_0x4ee5c8=[..._0x5706e2['body'][_0x8ea90a(0x1ee)]],_0x35574c=[..._0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x220)]],_0x7210ba=[..._0x5706e2[_0x8ea90a(0x183)]['MaxStocks_data2']],_0x3fe961=[..._0x5706e2['body'][_0x8ea90a(0x238)]],_0x45bce6=[..._0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x1c4)]],_0x3036e9=[..._0x5706e2[_0x8ea90a(0x183)][_0x8ea90a(0x1f0)]],_0x7a9d63=[..._0x5706e2['body'][_0x8ea90a(0x1b7)]],_0x3ae291=[..._0x5706e2['body']['from_storage']],_0x34ed1b=[..._0x5706e2[_0x8ea90a(0x183)]['from_rak']];const _0x30a0a8=_0x3b8d14['map'](_0x312c3b=>{return _0x312c3b={'product_name':_0x312c3b};});_0xae6ca[_0x8ea90a(0x1e6)]((_0x2609c1,_0x5dd148)=>{_0x30a0a8[_0x5dd148]['from_quantity']=_0x2609c1;}),_0x5ef84f[_0x8ea90a(0x1e6)]((_0x5366b1,_0x4596b2)=>{var _0x37662b=_0x8ea90a;_0x30a0a8[_0x4596b2][_0x37662b(0x233)]=_0x5366b1;}),_0x48e705['forEach']((_0x1ebe39,_0x10b0e2)=>{_0x30a0a8[_0x10b0e2]['from_bin']=_0x1ebe39;}),_0x5ebb60[_0x8ea90a(0x1e6)]((_0x7594a2,_0x450cf5)=>{_0x30a0a8[_0x450cf5]['from_floorlevel']=_0x7594a2;}),_0x264315[_0x8ea90a(0x1e6)]((_0x416f8b,_0x3ce2e2)=>{var _0x10ceac=_0x8ea90a;_0x30a0a8[_0x3ce2e2][_0x10ceac(0x19d)]=_0x416f8b;}),_0x366b71['forEach']((_0x3405b4,_0x32851a)=>{_0x30a0a8[_0x32851a]['to_bay']=_0x3405b4;}),_0x279669[_0x8ea90a(0x1e6)]((_0x50ed2e,_0x5c4ccf)=>{var _0x273221=_0x8ea90a;_0x30a0a8[_0x5c4ccf][_0x273221(0x210)]=_0x50ed2e;}),_0x26035a['forEach']((_0x22dd5c,_0xbc623)=>{_0x30a0a8[_0xbc623]['to_floorlevel']=_0x22dd5c;}),_0x474a37[_0x8ea90a(0x1e6)]((_0x888687,_0x102e82)=>{var _0x207166=_0x8ea90a;_0x30a0a8[_0x102e82][_0x207166(0x239)]=_0x888687;}),_0x4ee5c8[_0x8ea90a(0x1e6)]((_0x2a4318,_0xead2c2)=>{_0x30a0a8[_0xead2c2]['secondary_code']=_0x2a4318;}),_0x35574c[_0x8ea90a(0x1e6)]((_0x20ba0e,_0x24dcbe)=>{var _0x438700=_0x8ea90a;_0x30a0a8[_0x24dcbe][_0x438700(0x16a)]=_0x20ba0e;}),_0x7210ba[_0x8ea90a(0x1e6)]((_0x3a7b80,_0x268d86)=>{_0x30a0a8[_0x268d86]['maxProducts']=_0x3a7b80;}),_0x3fe961[_0x8ea90a(0x1e6)]((_0x3828db,_0xb02583)=>{var _0x1db088=_0x8ea90a;_0x30a0a8[_0xb02583][_0x1db088(0x238)]=_0x3828db;}),_0x45bce6[_0x8ea90a(0x1e6)]((_0x2de189,_0x584785)=>{_0x30a0a8[_0x584785]['secondary_unit']=_0x2de189;}),_0x3036e9['forEach']((_0x28de1a,_0x19cac6)=>{var _0x26354c=_0x8ea90a;_0x30a0a8[_0x19cac6][_0x26354c(0x1f0)]=_0x28de1a;}),_0x7a9d63[_0x8ea90a(0x1e6)]((_0x192061,_0x59120a)=>{_0x30a0a8[_0x59120a]['expiry_date']=_0x192061;}),_0x5c0ba2[_0x8ea90a(0x1e6)]((_0x17d30b,_0x4ee58a)=>{_0x30a0a8[_0x4ee58a]['storage']=_0x17d30b;}),_0x2e1209['forEach']((_0xc38858,_0x2b1768)=>{var _0x15c433=_0x8ea90a;_0x30a0a8[_0x2b1768][_0x15c433(0x1b6)]=_0xc38858;}),_0x31752e[_0x8ea90a(0x1e6)]((_0xbda383,_0x29dd71)=>{var _0x1e8699=_0x8ea90a;_0x30a0a8[_0x29dd71][_0x1e8699(0x1bb)]=_0xbda383;}),_0x24e2ef[_0x8ea90a(0x1e6)]((_0x134f53,_0x1e5c6d)=>{var _0x71ec84=_0x8ea90a;_0x30a0a8[_0x1e5c6d][_0x71ec84(0x1e7)]=_0x134f53;}),_0x3ae291['forEach']((_0x3cf0f1,_0x11c263)=>{var _0x38cc94=_0x8ea90a;_0x30a0a8[_0x11c263][_0x38cc94(0x17e)]=_0x3cf0f1;}),_0x34ed1b['forEach']((_0x4b03dd,_0x18c7d4)=>{var _0x2dd8ba=_0x8ea90a;_0x30a0a8[_0x18c7d4][_0x2dd8ba(0x236)]=_0x4b03dd;});const _0x30e264=_0x30a0a8[_0x8ea90a(0x1d9)](_0x29a31f=>_0x29a31f[_0x8ea90a(0x19d)]!=='0'&&_0x29a31f[_0x8ea90a(0x19d)]!==''||_0x29a31f[_0x8ea90a(0x15f)]!=='0'&&_0x29a31f[_0x8ea90a(0x15f)]!=='');var _0xd89610=0x0;_0x30e264[_0x8ea90a(0x1e6)](_0x597981=>{var _0x3741aa=_0x8ea90a;parseInt(_0x597981[_0x3741aa(0x1f7)])<parseInt(_0x597981['to_quantity'])&&_0xd89610++;});if(_0xd89610!=0x0)return _0x5706e2[_0x8ea90a(0x234)]('errors','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0xe83e94[_0x8ea90a(0x17c)](_0x8ea90a(0x1b8));const _0x47b949=await warehouse[_0x8ea90a(0x215)]({'name':_0x67e5ea['from_warehouse'],'room':_0x67e5ea['from_room']});_0x67e5ea[_0x8ea90a(0x1f4)][_0x8ea90a(0x1e6)](_0x2e3e2f=>{var _0x24dfa5=_0x8ea90a;if(_0x2e3e2f[_0x24dfa5(0x19d)]>0x0){const _0x22e74c=_0x47b949[_0x24dfa5(0x1fd)][_0x24dfa5(0x169)](_0x157312=>{var _0x7a5e95=_0x24dfa5;_0x157312[_0x7a5e95(0x1c8)]==_0x2e3e2f[_0x7a5e95(0x1c8)]&&_0x157312['floorlevel']==_0x2e3e2f[_0x7a5e95(0x1b3)]&&_0x157312[_0x7a5e95(0x1bd)]==_0x2e3e2f['from_types']&&_0x157312[_0x7a5e95(0x171)]==_0x2e3e2f['from_bin']&&_0x157312[_0x7a5e95(0x1bf)]==_0x2e3e2f[_0x7a5e95(0x233)]&&_0x157312[_0x7a5e95(0x1b6)]==_0x2e3e2f['from_rack']&&_0x157312['storage']==_0x2e3e2f['from_storage']&&(_0x157312[_0x7a5e95(0x19b)]=parseInt(_0x157312[_0x7a5e95(0x19b)])+parseInt(_0x2e3e2f[_0x7a5e95(0x19d)]));});}}),await _0x47b949[_0x8ea90a(0x211)]();const _0x3f42cd=await warehouse[_0x8ea90a(0x215)]({'name':_0x67e5ea[_0x8ea90a(0x1d1)],'room':_0x67e5ea['to_room']});_0x67e5ea[_0x8ea90a(0x1f4)][_0x8ea90a(0x1e6)](_0x7923b5=>{var _0x470e94=_0x8ea90a;if(_0x7923b5['to_quantity']>0x0){const _0x4bdbe8=_0x3f42cd[_0x470e94(0x1fd)][_0x470e94(0x169)](_0x3dd7dc=>{var _0xdeba22=_0x470e94;_0x3dd7dc[_0xdeba22(0x1c8)]==_0x7923b5['product_name']&&_0x3dd7dc['floorlevel']==_0x7923b5[_0xdeba22(0x15f)]&&_0x3dd7dc[_0xdeba22(0x1bd)]==_0x7923b5[_0xdeba22(0x1e7)]&&_0x3dd7dc[_0xdeba22(0x171)]==_0x7923b5[_0xdeba22(0x210)]&&_0x3dd7dc[_0xdeba22(0x1bf)]==_0x7923b5[_0xdeba22(0x193)]&&_0x3dd7dc[_0xdeba22(0x1b6)]==_0x7923b5[_0xdeba22(0x1b6)]&&_0x3dd7dc[_0xdeba22(0x237)]==_0x7923b5[_0xdeba22(0x237)]&&(_0x3dd7dc['product_stock']=parseInt(_0x3dd7dc['product_stock'])-parseInt(_0x7923b5[_0xdeba22(0x19d)]));});}}),await _0x3f42cd[_0x8ea90a(0x211)](),_0x67e5ea[_0x8ea90a(0x184)]=_0x472f3f,_0x67e5ea[_0x8ea90a(0x23e)]=_0x4e189a,_0x67e5ea[_0x8ea90a(0x1d1)]=_0x45bc42,_0x67e5ea['product']=_0x30e264,_0x67e5ea[_0x8ea90a(0x1d6)]=_0x2f5535,_0x67e5ea[_0x8ea90a(0x1e9)]=_0x13db90;const _0x4527b0=await _0x67e5ea[_0x8ea90a(0x211)]();console['log'](_0x4527b0);const _0x3d23b2=await warehouse[_0x8ea90a(0x215)]({'name':_0x4e189a,'room':_0x3405a1});_0x4527b0['product']['forEach'](_0x5e8d7e=>{var _0x5ea5f0=_0x8ea90a;if(_0x5e8d7e['to_quantity']>0x0){const _0x2907dd=_0x3d23b2[_0x5ea5f0(0x1fd)][_0x5ea5f0(0x169)](_0x19d8a0=>{var _0x3260df=_0x5ea5f0;_0x19d8a0[_0x3260df(0x1c8)]==_0x5e8d7e[_0x3260df(0x1c8)]&&_0x19d8a0[_0x3260df(0x1ef)]==_0x5e8d7e[_0x3260df(0x1b3)]&&_0x19d8a0[_0x3260df(0x1bd)]==_0x5e8d7e['from_types']&&_0x19d8a0[_0x3260df(0x171)]==_0x5e8d7e['from_bin']&&_0x19d8a0[_0x3260df(0x1bf)]==_0x5e8d7e[_0x3260df(0x233)]&&_0x19d8a0[_0x3260df(0x1b6)]==_0x5e8d7e[_0x3260df(0x236)]&&_0x19d8a0['storage']==_0x5e8d7e[_0x3260df(0x17e)]&&(_0x19d8a0[_0x3260df(0x19b)]=parseInt(_0x19d8a0[_0x3260df(0x19b)])-parseInt(_0x5e8d7e[_0x3260df(0x19d)]));});}}),await _0x3d23b2[_0x8ea90a(0x211)]();const _0xbf373d=await warehouse[_0x8ea90a(0x215)]({'name':_0x45bc42,'room':_0x85562});_0x4527b0['product']['forEach'](_0x39baaa=>{var _0x2ead56=_0x8ea90a;if(_0x39baaa[_0x2ead56(0x19d)]>0x0){var _0x593c04=0x0;const _0x5b6ce6=_0xbf373d['product_details']['map'](_0xc66af9=>{var _0x2e7344=_0x2ead56;_0xc66af9[_0x2e7344(0x1c8)]==_0x39baaa[_0x2e7344(0x1c8)]&&_0xc66af9[_0x2e7344(0x1ef)]==_0x39baaa[_0x2e7344(0x15f)]&&_0xc66af9[_0x2e7344(0x1bd)]==_0x39baaa[_0x2e7344(0x1e7)]&&_0xc66af9['bin']==_0x39baaa[_0x2e7344(0x210)]&&_0xc66af9[_0x2e7344(0x1bf)]==_0x39baaa['to_bay']&&_0xc66af9['rack']==_0x39baaa[_0x2e7344(0x1b6)]&&_0xc66af9[_0x2e7344(0x237)]==_0x39baaa[_0x2e7344(0x237)]&&(_0xc66af9['product_stock']=parseInt(_0xc66af9['product_stock'])+parseInt(_0x39baaa[_0x2e7344(0x19d)]),_0x593c04++);});_0x593c04=='0'&&(_0xbf373d[_0x2ead56(0x1fd)]=_0xbf373d[_0x2ead56(0x1fd)][_0x2ead56(0x178)]({'product_name':_0x39baaa[_0x2ead56(0x1c8)],'product_stock':_0x39baaa[_0x2ead56(0x19d)],'bay':_0x39baaa[_0x2ead56(0x193)],'bin':_0x39baaa[_0x2ead56(0x210)],'type':_0x39baaa['to_types'],'floorlevel':_0x39baaa[_0x2ead56(0x15f)],'storage':_0x39baaa[_0x2ead56(0x237)],'rack':_0x39baaa['rack'],'product_code':_0x39baaa[_0x2ead56(0x16a)],'primary_code':_0x39baaa[_0x2ead56(0x239)],'secondary_code':_0x39baaa[_0x2ead56(0x1ee)],'maxProducts':_0x39baaa[_0x2ead56(0x196)],'storage':_0x39baaa[_0x2ead56(0x237)],'rack':_0x39baaa['rack']}));}}),await _0xbf373d[_0x8ea90a(0x211)](),_0x5706e2[_0x8ea90a(0x234)](_0x8ea90a(0x165),_0x8ea90a(0x1d3)),_0xe83e94[_0x8ea90a(0x17c)]('/transfer/view');}catch(_0x447cd6){console[_0x8ea90a(0x20d)](_0x447cd6);}}),router['post'](a0_0x334c04(0x1e1),async(_0x38953b,_0x53c7a6)=>{var _0x2c04dc=a0_0x334c04;const {FromWareHouse:_0x2584a5,FromRoom:_0x34887c,ToWarehouse:_0x275893,ToRoom:_0x14c5eb,primary_code:_0x4bae56,Roomslist:_0x21eb32}=_0x38953b[_0x2c04dc(0x183)],_0xd5206f=_0x21eb32[_0x2c04dc(0x225)](','),_0x27593a=[];async function _0x2eefe9(_0x6861f0){var _0xd8af97=_0x2c04dc;const _0x185347=await warehouse[_0xd8af97(0x22c)]([{'$match':{'name':_0x2584a5,'room':_0x6861f0}},{'$unwind':_0xd8af97(0x1e2)},{'$match':{'product_details.primary_code':_0x4bae56}},{'$group':{'_id':_0xd8af97(0x1b1),'name':{'$first':_0xd8af97(0x221)},'instock':{'$first':_0xd8af97(0x17a)},'primary_code':{'$first':_0xd8af97(0x1b4)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0xd8af97(0x1d8)},'level':{'$first':'$product_details.bay'},'isle':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0xd8af97(0x182)},'unit':{'$first':_0xd8af97(0x159)},'secondary_unit':{'$first':_0xd8af97(0x1f5)},'storage':{'$first':_0xd8af97(0x1cd)},'rack':{'$first':_0xd8af97(0x185)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0xd8af97(0x1dd)},'batch_code':{'$first':_0xd8af97(0x20e)},'maxPerUnit':{'$first':_0xd8af97(0x1b9)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0xd8af97(0x1e4)},'maxProducts':{'$first':_0xd8af97(0x1a0)},'invoice_product':{'$first':_0xd8af97(0x1f2)}}}]),_0x22092f=await warehouse['aggregate']([{'$match':{'name':_0x2584a5,'room':_0x6861f0}},{'$unwind':_0xd8af97(0x1e2)},{'$match':{'product_details.secondary_code':_0x4bae56}},{'$group':{'_id':_0xd8af97(0x1b1),'name':{'$first':_0xd8af97(0x221)},'instock':{'$first':_0xd8af97(0x17a)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0xd8af97(0x1ff)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0xd8af97(0x23b)},'isle':{'$first':_0xd8af97(0x1c2)},'type':{'$first':_0xd8af97(0x1d5)},'pallet':{'$first':_0xd8af97(0x182)},'unit':{'$first':_0xd8af97(0x159)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0xd8af97(0x1cd)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0xd8af97(0x1dd)},'batch_code':{'$first':'$product_details.batch_code'},'maxPerUnit':{'$first':_0xd8af97(0x1b9)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0xd8af97(0x1e4)},'maxProducts':{'$first':_0xd8af97(0x1a0)},'invoice_product':{'$first':_0xd8af97(0x1f2)}}}]);if(_0x185347['length']>0x0)_0x27593a['push'](_0x185347);else _0x22092f['length']>0x0&&_0x27593a[_0xd8af97(0x1a7)](_0x22092f);}const _0x192b55=_0xd5206f[_0x2c04dc(0x169)](_0x270d22=>_0x2eefe9(_0x270d22));await Promise[_0x2c04dc(0x223)](_0x192b55),_0x53c7a6[_0x2c04dc(0x18b)](_0x27593a);}),router[a0_0x334c04(0x1d0)]('/barcode_scanner2',async(_0x472a64,_0x31ed65)=>{var _0x28f1b5=a0_0x334c04;try{const {FromWareHouse:_0x519968,FromRoom:_0x225f31,ToWarehouse:_0x8a997e,ToRoom:_0x1e9344,secondary_code:_0x158668}=_0x472a64[_0x28f1b5(0x183)],_0xcfb591=await warehouse[_0x28f1b5(0x22c)]([{'$match':{'name':_0x519968}},{'$unwind':_0x28f1b5(0x1e2)},{'$match':{'product_details.secondary_code':_0x158668}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x28f1b5(0x221)},'primary_code':{'$first':_0x28f1b5(0x1b4)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x28f1b5(0x1d8)},'instock':{'$first':_0x28f1b5(0x17a)},'warehouse':{'$first':_0x28f1b5(0x17b)},'level':{'$first':'$product_details.level'},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x28f1b5(0x192)},'maxProducts':{'$first':_0x28f1b5(0x1a0)},'unit':{'$first':_0x28f1b5(0x159)}}}]);_0x31ed65[_0x28f1b5(0x1b0)](0xc8)[_0x28f1b5(0x18b)](_0xcfb591);}catch(_0x1110bb){_0x31ed65['status'](0x194)[_0x28f1b5(0x18b)]({'message':_0x1110bb[_0x28f1b5(0x22e)]});}}),router[a0_0x334c04(0x1d0)](a0_0x334c04(0x235),async(_0x762354,_0x1c49f6)=>{var _0x1c071c=a0_0x334c04;try{const {FromWareHouse:_0xbb8e4c,FromRoom:_0x4dd8dd,ToWarehouse:_0x1958c4,ToRoom:_0x5ef7a9,product_code:_0x28de6d}=_0x762354[_0x1c071c(0x183)],_0x201227=await warehouse[_0x1c071c(0x22c)]([{'$match':{'name':_0xbb8e4c}},{'$unwind':_0x1c071c(0x1e2)},{'$match':{'product_details.product_code':_0x28de6d}},{'$group':{'_id':_0x1c071c(0x1b1),'name':{'$first':'$product_details.product_name'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x1c071c(0x1ff)},'product_code':{'$first':_0x1c071c(0x1d8)},'instock':{'$first':_0x1c071c(0x17a)},'warehouse':{'$first':'$name'},'level':{'$first':_0x1c071c(0x22b)},'isle':{'$first':_0x1c071c(0x175)},'pallet':{'$first':_0x1c071c(0x192)},'maxProducts':{'$first':_0x1c071c(0x1a0)},'unit':{'$first':_0x1c071c(0x159)}}}]);_0x1c49f6['status'](0xc8)[_0x1c071c(0x18b)](_0x201227);}catch(_0x43aaaf){_0x1c49f6[_0x1c071c(0x1b0)](0x194)[_0x1c071c(0x18b)]({'message':_0x43aaaf[_0x1c071c(0x22e)]});}}),router[a0_0x334c04(0x1d0)]('/CheckingWarehouse',async(_0x3c2f56,_0x1e1b0e)=>{var _0x3a71b1=a0_0x334c04;const {level:_0x58162d,isle:_0x4174d7,pallet:_0x35c6f5,warehouses:_0x5cde60,room:_0x2b3dee}=_0x3c2f56[_0x3a71b1(0x183)];try{const _0x523c76=await warehouse[_0x3a71b1(0x22c)]([{'$match':{'name':_0x5cde60,'room':_0x2b3dee}},{'$unwind':_0x3a71b1(0x1e2)},{'$match':{'product_details.level':parseInt(_0x58162d),'product_details.isle':_0x4174d7,'product_details.pallet':parseInt(_0x35c6f5)}},{'$group':{'_id':_0x3a71b1(0x1b1),'name':{'$first':_0x3a71b1(0x221)},'product_stock':{'$first':_0x3a71b1(0x17a)},'level':{'$first':_0x3a71b1(0x22b)},'isle':{'$first':_0x3a71b1(0x175)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x3a71b1(0x1a0)}}}]);_0x1e1b0e[_0x3a71b1(0x1b0)](0xc8)[_0x3a71b1(0x18b)](_0x523c76);}catch(_0x5f44e5){_0x1e1b0e[_0x3a71b1(0x1b0)](0x194)[_0x3a71b1(0x18b)]({'message':_0x5f44e5[_0x3a71b1(0x22e)]});}}),module[a0_0x334c04(0x16c)]=router;