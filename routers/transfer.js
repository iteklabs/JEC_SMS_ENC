var a0_0x2e4f7e=a0_0x64e2;(function(_0x561f93,_0x4e965f){var _0x19d450=a0_0x64e2,_0x4ecb14=_0x561f93();while(!![]){try{var _0x2925db=parseInt(_0x19d450(0x1ac))/0x1+parseInt(_0x19d450(0x184))/0x2*(parseInt(_0x19d450(0x17d))/0x3)+parseInt(_0x19d450(0x169))/0x4*(parseInt(_0x19d450(0x1da))/0x5)+-parseInt(_0x19d450(0x1ae))/0x6+-parseInt(_0x19d450(0x1e2))/0x7*(parseInt(_0x19d450(0x1b1))/0x8)+parseInt(_0x19d450(0x12e))/0x9+-parseInt(_0x19d450(0x196))/0xa;if(_0x2925db===_0x4e965f)break;else _0x4ecb14['push'](_0x4ecb14['shift']());}catch(_0xe28890){_0x4ecb14['push'](_0x4ecb14['shift']());}}}(a0_0xa09f,0xa03a9));const express=require(a0_0x2e4f7e(0x117)),app=express(),router=express[a0_0x2e4f7e(0x204)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers,email_settings,supervisor_settings}=require(a0_0x2e4f7e(0x1d1)),auth=require(a0_0x2e4f7e(0x199)),users=require(a0_0x2e4f7e(0x188)),nodemailer=require(a0_0x2e4f7e(0x126));router[a0_0x2e4f7e(0x124)](a0_0x2e4f7e(0x14e),auth,async(_0x92b695,_0xeaeeb0)=>{var _0x184817=a0_0x2e4f7e;try{const {username:_0x59a4e0,email:_0x243b0e,role:_0x5f15b7}=_0x92b695[_0x184817(0x1e7)],_0x4ddec0=_0x92b695[_0x184817(0x1e7)],_0x1e76fd=await profile[_0x184817(0x1db)]({'email':_0x4ddec0[_0x184817(0x18a)]}),_0x2e452f=await master_shop[_0x184817(0x1cc)]();console[_0x184817(0x16a)](_0x184817(0x145),_0x2e452f);let _0x10d50e;if(_0x4ddec0[_0x184817(0x1fa)]==_0x184817(0x208)){const _0x32ec90=await staff[_0x184817(0x1db)]({'email':_0x4ddec0['email']});_0x10d50e=await transfers[_0x184817(0x1cc)]({'from_warehouse':_0x32ec90[_0x184817(0x189)]});}else _0x10d50e=await transfers['aggregate']([{'$unwind':_0x184817(0x160)},{'$group':{'_id':_0x184817(0x129),'invoice':{'$first':'$invoice'},'date':{'$first':'$date'},'from_warehouse':{'$first':_0x184817(0x1ff)},'to_warehouse':{'$first':_0x184817(0x1c9)},'from_room_name':{'$addToSet':_0x184817(0x1c1)},'to_room_name':{'$addToSet':'$product.to_room_name'},'finalize':{'$first':_0x184817(0x18d)},'isAllowEdit':{'$first':_0x184817(0x1b5)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x2e452f[0x0][_0x184817(0x1a6)]==_0x184817(0x1d3)){var _0x43a7c0=users[_0x184817(0x1cd)];console[_0x184817(0x16a)](_0x43a7c0);}else{if(_0x2e452f[0x0][_0x184817(0x1a6)]==_0x184817(0x11d))var _0x43a7c0=users['Hindi'];else{if(_0x2e452f[0x0][_0x184817(0x1a6)]=='German')var _0x43a7c0=users[_0x184817(0x201)];else{if(_0x2e452f[0x0][_0x184817(0x1a6)]==_0x184817(0x12d))var _0x43a7c0=users[_0x184817(0x12d)];else{if(_0x2e452f[0x0][_0x184817(0x1a6)]=='French')var _0x43a7c0=users[_0x184817(0x1f8)];else{if(_0x2e452f[0x0][_0x184817(0x1a6)]==_0x184817(0x1d8))var _0x43a7c0=users['Portuguese'];else{if(_0x2e452f[0x0][_0x184817(0x1a6)]=='Chinese')var _0x43a7c0=users[_0x184817(0x174)];else{if(_0x2e452f[0x0]['language']==_0x184817(0x1a9))var _0x43a7c0=users['Arabic'];}}}}}}}_0xeaeeb0[_0x184817(0x153)](_0x184817(0x1de),{'success':_0x92b695[_0x184817(0x1f6)](_0x184817(0x167)),'errors':_0x92b695[_0x184817(0x1f6)]('errors'),'role':_0x4ddec0,'profile':_0x1e76fd,'master_shop':_0x2e452f,'transfer':_0x10d50e,'language':_0x43a7c0});}catch(_0x52426b){console[_0x184817(0x16a)](_0x52426b);}});async function getRandom8DigitNumber(){var _0x5a9152=a0_0x2e4f7e;const _0x11936b=0x989680,_0x1ceeb1=0x5f5e0ff,_0xb73c2b=Math[_0x5a9152(0x18e)](Math[_0x5a9152(0x144)]()*(_0x1ceeb1-_0x11936b+0x1))+_0x11936b;var _0x170afb;const _0x574fcd=await transfers[_0x5a9152(0x1db)]({'invoice':_0x5a9152(0x152)+_0xb73c2b});return _0x574fcd&&_0x574fcd[_0x5a9152(0x120)]>0x0?_0x170afb=_0x5a9152(0x152)+_0xb73c2b:_0x170afb=_0x5a9152(0x152)+_0xb73c2b,_0x170afb;}function a0_0x64e2(_0x3ba6c2,_0x27112b){var _0xa09f9e=a0_0xa09f();return a0_0x64e2=function(_0x64e26f,_0x12d478){_0x64e26f=_0x64e26f-0x117;var _0x4a7272=_0xa09f9e[_0x64e26f];return _0x4a7272;},a0_0x64e2(_0x3ba6c2,_0x27112b);}router[a0_0x2e4f7e(0x124)]('/view/add_transfer',auth,async(_0x351f76,_0x29c24f)=>{var _0x112fb6=a0_0x2e4f7e;try{const {username:_0x4a871f,email:_0x5003a0,role:_0x436e84}=_0x351f76['user'],_0x213907=_0x351f76[_0x112fb6(0x1e7)],_0x51487b=await profile[_0x112fb6(0x1db)]({'email':_0x213907[_0x112fb6(0x18a)]}),_0x44e81d=await master_shop[_0x112fb6(0x1cc)]();console[_0x112fb6(0x16a)]('master',_0x44e81d);let _0x578c1a;if(_0x213907[_0x112fb6(0x1fa)]==_0x112fb6(0x208)){const _0x44542c=await staff['findOne']({'email':_0x213907[_0x112fb6(0x18a)]});_0x578c1a=await warehouse[_0x112fb6(0x13e)]([{'$match':{'status':_0x112fb6(0x194),'name':_0x44542c['warehouse'],'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x112fb6(0x1fe),'name':{'$first':_0x112fb6(0x1fe)}}}]);}else _0x578c1a=await warehouse[_0x112fb6(0x13e)]([{'$match':{'status':'Enabled','warehouse_category':_0x112fb6(0x1d4)}},{'$group':{'_id':'$name','name':{'$first':_0x112fb6(0x1fe)}}}]);var _0x178407=[_0x112fb6(0x171),_0x112fb6(0x14f),_0x112fb6(0x146)];const _0x30523d=await transfers[_0x112fb6(0x1cc)]({}),_0x42042b=_0x30523d[_0x112fb6(0x120)]+0x1,_0x337bf4=_0x112fb6(0x152)+_0x42042b[_0x112fb6(0x1be)]()[_0x112fb6(0x19f)](0x5,'0');if(_0x44e81d[0x0][_0x112fb6(0x1a6)]=='English\x20(US)'){var _0xf80a5d=users[_0x112fb6(0x1cd)];console[_0x112fb6(0x16a)](_0xf80a5d);}else{if(_0x44e81d[0x0]['language']==_0x112fb6(0x11d))var _0xf80a5d=users['Hindi'];else{if(_0x44e81d[0x0][_0x112fb6(0x1a6)]==_0x112fb6(0x201))var _0xf80a5d=users[_0x112fb6(0x201)];else{if(_0x44e81d[0x0]['language']==_0x112fb6(0x12d))var _0xf80a5d=users[_0x112fb6(0x12d)];else{if(_0x44e81d[0x0][_0x112fb6(0x1a6)]==_0x112fb6(0x1f8))var _0xf80a5d=users[_0x112fb6(0x1f8)];else{if(_0x44e81d[0x0]['language']=='Portuguese\x20(BR)')var _0xf80a5d=users[_0x112fb6(0x18f)];else{if(_0x44e81d[0x0][_0x112fb6(0x1a6)]==_0x112fb6(0x174))var _0xf80a5d=users['Chinese'];else{if(_0x44e81d[0x0][_0x112fb6(0x1a6)]==_0x112fb6(0x1a9))var _0xf80a5d=users['Arabic'];}}}}}}}const _0x7aa84d=getRandom8DigitNumber();_0x7aa84d[_0x112fb6(0x186)](_0x3659b5=>{var _0x45e59e=_0x112fb6;_0x29c24f[_0x45e59e(0x153)](_0x45e59e(0x1a1),{'success':_0x351f76[_0x45e59e(0x1f6)](_0x45e59e(0x167)),'errors':_0x351f76['flash'](_0x45e59e(0x1c2)),'role':_0x213907,'profile':_0x51487b,'master_shop':_0x44e81d,'warehouse':_0x578c1a,'language':_0xf80a5d,'rooms_data':_0x178407,'invoice':_0x3659b5});})[_0x112fb6(0x14b)](_0x1f8e8c=>{var _0x53948b=_0x112fb6;_0x351f76['flash']('errors',_0x53948b(0x119)),_0x29c24f[_0x53948b(0x16e)](_0x53948b(0x1a8));});}catch(_0x45fb7d){console[_0x112fb6(0x16a)](_0x45fb7d);}}),router[a0_0x2e4f7e(0x20d)]('/view/add_transfer',auth,async(_0x448c42,_0x423f50)=>{var _0x39d4f8=a0_0x2e4f7e;try{console[_0x39d4f8(0x16a)](_0x448c42[_0x39d4f8(0x149)]);const {date:_0x1f6db8,from_warehouse:_0x2884fa,FromRoom_name:_0x3f9b1b,to_warehouse:_0x34b7d3,ToRoom_name:_0x5bb032,prod_name:_0x50eeb9,from_prod_qty:_0x41caaf,from_prod_level:_0x1c092c,from_prod_isle:_0xf10985,from_prod_pallet:_0x385ee5,to_prod_qty:_0x101427,to_prod_level:_0x34944b,to_prod_isle:_0xe44eb0,to_prod_pallet:_0xc67be1,primary_code:_0x32ccb8,secondary_code:_0x493569,product_code3:_0x22a968,note:_0x1a345e,MaxStocks_data2:_0xca3226,invoice:_0x462acc,expiry_date:_0x2a1e9d}=_0x448c42[_0x39d4f8(0x149)];if(typeof _0x50eeb9==_0x39d4f8(0x17b))var _0x15f8cb=[_0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x11b)]],_0xd86753=[_0x448c42[_0x39d4f8(0x149)]['from_prod_qty']],_0x4375d7=[_0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x1bd)]],_0x24e476=[_0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x151)]],_0x1ed66f=[_0x448c42[_0x39d4f8(0x149)]['to_prod_level']],_0x1a52a5=[_0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x1e4)]],_0x591c36=[_0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x1b0)]],_0x5662f2=[_0x448c42[_0x39d4f8(0x149)]['product_code3']],_0x464906=[_0x448c42['body'][_0x39d4f8(0x1a4)]],_0xba90ef=[_0x448c42['body']['primary_unit']],_0x3580ab=[_0x448c42['body'][_0x39d4f8(0x19a)]],_0x2777e8=[_0x448c42['body'][_0x39d4f8(0x1dc)]],_0x314c5c=[_0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x16d)]],_0x4a6a7f=[_0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x1e6)]],_0x290432=[_0x448c42[_0x39d4f8(0x149)]['production_date']],_0x29f03b=[_0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x163)]],_0x17417e=[_0x448c42[_0x39d4f8(0x149)]['RoomAssigned']],_0x105819=[_0x448c42[_0x39d4f8(0x149)]['ToRoomAssigned']],_0x310357=[_0x448c42[_0x39d4f8(0x149)]['from_invoice']],_0x1180e1=[_0x448c42['body'][_0x39d4f8(0x1ec)]],_0x3800da=[_0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x121)]];else var _0x15f8cb=[..._0x448c42[_0x39d4f8(0x149)]['prod_name']],_0xd86753=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x155)]],_0x4375d7=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x1bd)]],_0x24e476=[..._0x448c42['body'][_0x39d4f8(0x151)]],_0x1ed66f=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x161)]],_0x1a52a5=[..._0x448c42[_0x39d4f8(0x149)]['primary_code']],_0x591c36=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x1b0)]],_0x5662f2=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x137)]],_0x464906=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x1a4)]],_0xba90ef=[..._0x448c42[_0x39d4f8(0x149)]['primary_unit']],_0x3580ab=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x19a)]],_0x2777e8=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x1dc)]],_0x314c5c=[..._0x448c42['body']['expiry_date']],_0x4a6a7f=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x1e6)]],_0x290432=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x14a)]],_0x29f03b=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x163)]],_0x17417e=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x134)]],_0x105819=[..._0x448c42['body']['ToRoomAssigned']],_0x310357=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x1ee)]],_0x1180e1=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x1ec)]],_0x3800da=[..._0x448c42[_0x39d4f8(0x149)][_0x39d4f8(0x121)]];const _0x25875c=_0x15f8cb[_0x39d4f8(0x1aa)](_0x35da09=>{return _0x35da09={'product_name':_0x35da09};});_0xd86753[_0x39d4f8(0x1a2)]((_0x49cf01,_0x32cf11)=>{var _0x169b57=_0x39d4f8;_0x25875c[_0x32cf11][_0x169b57(0x15f)]=_0x49cf01;}),_0x310357[_0x39d4f8(0x1a2)]((_0xc22d2,_0x1cddf7)=>{var _0x518358=_0x39d4f8;_0x25875c[_0x1cddf7][_0x518358(0x1ee)]=_0xc22d2;}),_0x1180e1[_0x39d4f8(0x1a2)]((_0x276200,_0xed1541)=>{_0x25875c[_0xed1541]['To_invoice']=_0x276200;}),_0x3800da[_0x39d4f8(0x1a2)]((_0x5db20f,_0x1c1ecc)=>{var _0x3a5c17=_0x39d4f8;_0x25875c[_0x1c1ecc][_0x3a5c17(0x16f)]=_0x5db20f;}),_0x4375d7['forEach']((_0x583331,_0x2c63d3)=>{var _0x3f2325=_0x39d4f8;_0x17417e[_0x3f2325(0x1a2)]((_0x463493,_0x6bf827)=>{var _0x43a5ab=_0x3f2325;if(_0x463493=='Receiving\x20Area'&&_0x2c63d3==_0x6bf827){var _0x1235db=_0x583331[_0x43a5ab(0x1af)](0x3);_0x25875c[_0x2c63d3][_0x43a5ab(0x1f4)]=_0x583331[0x0],_0x25875c[_0x2c63d3][_0x43a5ab(0x179)]=_0x583331[0x1],_0x25875c[_0x2c63d3][_0x43a5ab(0x158)]=0x0,_0x25875c[_0x2c63d3][_0x43a5ab(0x11f)]=0x0,_0x25875c[_0x2c63d3][_0x43a5ab(0x148)]=_0x43a5ab(0x178),_0x25875c[_0x2c63d3][_0x43a5ab(0x131)]=_0x1235db;}else{if(_0x463493==_0x43a5ab(0x1bf)&&_0x2c63d3==_0x6bf827){var _0x1235db=_0x583331[_0x43a5ab(0x1af)](0x3);_0x25875c[_0x2c63d3][_0x43a5ab(0x1f4)]=_0x583331[0x0],_0x25875c[_0x2c63d3][_0x43a5ab(0x179)]=_0x583331[0x1],_0x25875c[_0x2c63d3][_0x43a5ab(0x158)]=0x0,_0x25875c[_0x2c63d3][_0x43a5ab(0x11f)]=0x0,_0x25875c[_0x2c63d3][_0x43a5ab(0x148)]=_0x43a5ab(0x178),_0x25875c[_0x2c63d3][_0x43a5ab(0x131)]=_0x583331[0x5];}else{if(_0x2c63d3==_0x6bf827){if(_0x583331[0x0]=='A'&&_0x583331[0x1]=='L'&&_0x583331[0x2]=='L')console[_0x43a5ab(0x16a)](_0x463493+_0x43a5ab(0x20a)+_0x2c63d3+_0x43a5ab(0x20a)+_0x6bf827+_0x43a5ab(0x20a)+_0x583331+'here'),_0x25875c[_0x2c63d3][_0x43a5ab(0x1f4)]=_0x583331[0x0],_0x25875c[_0x2c63d3]['from_rack']=_0x583331[0x1],_0x25875c[_0x2c63d3]['from_bay']=0x0,_0x25875c[_0x2c63d3][_0x43a5ab(0x11f)]=0x0,_0x25875c[_0x2c63d3][_0x43a5ab(0x148)]=_0x43a5ab(0x178),_0x25875c[_0x2c63d3][_0x43a5ab(0x131)]=_0x583331[0x3];else{var _0x19784f;if(_0x583331[0x4]=='L')_0x19784f=_0x43a5ab(0x1e9);else _0x583331[0x4]=='F'&&(_0x19784f=_0x43a5ab(0x178));_0x25875c[_0x2c63d3][_0x43a5ab(0x1f4)]=_0x583331[0x0],_0x25875c[_0x2c63d3][_0x43a5ab(0x179)]=_0x583331[0x1],_0x25875c[_0x2c63d3]['from_bay']=_0x583331[0x2],_0x25875c[_0x2c63d3][_0x43a5ab(0x11f)]=_0x583331[0x3],_0x25875c[_0x2c63d3][_0x43a5ab(0x148)]=_0x19784f,_0x25875c[_0x2c63d3][_0x43a5ab(0x131)]=_0x583331[0x5];}}}}});}),_0x24e476[_0x39d4f8(0x1a2)]((_0x619fc0,_0x42ac05)=>{var _0x504a5b=_0x39d4f8;_0x25875c[_0x42ac05][_0x504a5b(0x1dd)]=_0x619fc0;}),_0x1ed66f[_0x39d4f8(0x1a2)]((_0xaf3341,_0x2a711a)=>{var _0x5dcb35=_0x39d4f8;_0x105819[_0x5dcb35(0x1a2)]((_0x279400,_0x432784)=>{var _0x5c1270=_0x5dcb35;if(_0x279400=='Receiving\x20Area'&&_0x2a711a==_0x432784){var _0x27af4b=_0xaf3341['slice'](0x3);_0x25875c[_0x2a711a][_0x5c1270(0x1a0)]=_0xaf3341[0x0],_0x25875c[_0x2a711a][_0x5c1270(0x168)]=_0xaf3341[0x1],_0x25875c[_0x2a711a]['to_bay']=0x0,_0x25875c[_0x2a711a][_0x5c1270(0x1e5)]=0x0,_0x25875c[_0x2a711a]['to_types']=_0x5c1270(0x178),_0x25875c[_0x2a711a][_0x5c1270(0x1a7)]=_0x27af4b;}else{if(_0x279400==_0x5c1270(0x1bf)&&_0x2a711a==_0x432784){var _0x27af4b=_0xaf3341[_0x5c1270(0x1af)](0x3);_0x25875c[_0x2a711a]['storage']=_0xaf3341[0x0],_0x25875c[_0x2a711a][_0x5c1270(0x168)]=_0xaf3341[0x1],_0x25875c[_0x2a711a][_0x5c1270(0x132)]=0x0,_0x25875c[_0x2a711a][_0x5c1270(0x1e5)]=0x0,_0x25875c[_0x2a711a][_0x5c1270(0x1d2)]=_0x5c1270(0x178),_0x25875c[_0x2a711a][_0x5c1270(0x1a7)]=_0xaf3341[0x5];}else{if(_0x2a711a==_0x432784){if(_0xaf3341[0x0]=='A'&&_0xaf3341[0x1]=='L'&&_0xaf3341[0x2]=='L')console['log'](_0x279400+_0x5c1270(0x20a)+_0x2a711a+_0x5c1270(0x20a)+_0x432784+_0x5c1270(0x20a)+_0xaf3341+_0x5c1270(0x1d6)),_0x25875c[_0x2a711a][_0x5c1270(0x1a0)]=_0xaf3341[0x0],_0x25875c[_0x2a711a]['rack']=_0xaf3341[0x1],_0x25875c[_0x2a711a][_0x5c1270(0x132)]=0x0,_0x25875c[_0x2a711a][_0x5c1270(0x1e5)]=0x0,_0x25875c[_0x2a711a]['to_types']=_0x5c1270(0x178),_0x25875c[_0x2a711a][_0x5c1270(0x1a7)]=_0xaf3341[0x3];else{var _0x423b4e;if(_0xaf3341[0x4]=='L')_0x423b4e=_0x5c1270(0x1e9);else _0xaf3341[0x4]=='F'&&(_0x423b4e=_0x5c1270(0x178));_0x25875c[_0x2a711a][_0x5c1270(0x1a0)]=_0xaf3341[0x0],_0x25875c[_0x2a711a]['rack']=_0xaf3341[0x1],_0x25875c[_0x2a711a][_0x5c1270(0x132)]=_0xaf3341[0x2],_0x25875c[_0x2a711a][_0x5c1270(0x1e5)]=_0xaf3341[0x3],_0x25875c[_0x2a711a][_0x5c1270(0x1d2)]=_0x423b4e,_0x25875c[_0x2a711a][_0x5c1270(0x1a7)]=_0xaf3341[0x5];}}}}});}),_0x1a52a5[_0x39d4f8(0x1a2)]((_0x3425e7,_0x5ac046)=>{var _0x1dbcb4=_0x39d4f8;_0x25875c[_0x5ac046][_0x1dbcb4(0x1e4)]=_0x3425e7;}),_0x591c36[_0x39d4f8(0x1a2)]((_0xee6e86,_0x33e67d)=>{_0x25875c[_0x33e67d]['secondary_code']=_0xee6e86;}),_0x5662f2[_0x39d4f8(0x1a2)]((_0x1ee7f2,_0x383576)=>{var _0x398976=_0x39d4f8;_0x25875c[_0x383576][_0x398976(0x185)]=_0x1ee7f2;}),_0x464906[_0x39d4f8(0x1a2)]((_0x1a6679,_0x222ec5)=>{_0x25875c[_0x222ec5]['maxProducts']=_0x1a6679;}),_0xba90ef[_0x39d4f8(0x1a2)]((_0x292436,_0x53e850)=>{_0x25875c[_0x53e850]['unit']=_0x292436;}),_0x3580ab['forEach']((_0x4b803b,_0x98c4ff)=>{var _0x3f15ad=_0x39d4f8;_0x25875c[_0x98c4ff][_0x3f15ad(0x19a)]=_0x4b803b;}),_0x2777e8['forEach']((_0x8c70f1,_0x17a118)=>{var _0x23eb0b=_0x39d4f8;_0x25875c[_0x17a118][_0x23eb0b(0x1dc)]=_0x8c70f1;}),_0x314c5c['forEach']((_0x287fd9,_0x396b56)=>{var _0x5081ba=_0x39d4f8;_0x25875c[_0x396b56][_0x5081ba(0x16d)]=_0x287fd9;}),_0x4a6a7f[_0x39d4f8(0x1a2)]((_0xd9f135,_0x479767)=>{var _0x15593c=_0x39d4f8;_0x25875c[_0x479767][_0x15593c(0x159)]=_0xd9f135;}),_0x290432[_0x39d4f8(0x1a2)]((_0x2b4e52,_0x25630d)=>{var _0xcb9810=_0x39d4f8;_0x25875c[_0x25630d][_0xcb9810(0x14a)]=_0x2b4e52;}),_0x29f03b['forEach']((_0x2ebbf1,_0x1b7ee8)=>{var _0x5247de=_0x39d4f8;_0x25875c[_0x1b7ee8][_0x5247de(0x163)]=_0x2ebbf1;}),_0x17417e['forEach']((_0x290f25,_0x45a050)=>{_0x25875c[_0x45a050]['from_room_name']=_0x290f25;}),_0x105819['forEach']((_0x19f006,_0x5bbeb2)=>{var _0x24fe7c=_0x39d4f8;_0x25875c[_0x5bbeb2][_0x24fe7c(0x156)]=_0x19f006;});const _0x140401=_0x25875c[_0x39d4f8(0x125)](_0x2b9311=>_0x2b9311[_0x39d4f8(0x1dd)]!=='0'&&_0x2b9311[_0x39d4f8(0x1dd)]!==''||_0x2b9311['to_floorlevel']!=='0'&&_0x2b9311[_0x39d4f8(0x1a7)]!==''),_0x5e3511=new transfers({'date':_0x1f6db8,'from_warehouse':_0x2884fa,'to_warehouse':_0x34b7d3,'product':_0x140401,'note':_0x1a345e,'invoice':_0x462acc}),_0x4c422b=await _0x5e3511['save']();_0x448c42['flash'](_0x39d4f8(0x167),_0x39d4f8(0x164)),_0x423f50[_0x39d4f8(0x16e)](_0x39d4f8(0x19e)+_0x4c422b[_0x39d4f8(0x17f)]);}catch(_0x1d1589){console[_0x39d4f8(0x16a)](_0x1d1589),_0x423f50[_0x39d4f8(0x191)](0xc8)[_0x39d4f8(0x181)]({'errorMessage':_0x1d1589['message']});}}),router['get']('/preview/:id',auth,async(_0x1a7fe2,_0x51a11d)=>{var _0x22fc84=a0_0x2e4f7e;try{const {username:_0x565b60,email:_0x5736e2,role:_0xae0ed1}=_0x1a7fe2[_0x22fc84(0x1e7)],_0xf234ba=_0x1a7fe2[_0x22fc84(0x1e7)],_0x2ea225=await profile['findOne']({'email':_0xf234ba[_0x22fc84(0x18a)]}),_0x1896e1=await master_shop[_0x22fc84(0x1cc)]();console[_0x22fc84(0x16a)](_0x22fc84(0x145),_0x1896e1);const _0x183094=await transfers[_0x22fc84(0x1eb)](_0x1a7fe2[_0x22fc84(0x162)]['id']);let _0x3a3c21=new Date(_0x183094[_0x22fc84(0x16d)]),_0x1e305c=('0'+_0x3a3c21[_0x22fc84(0x19b)]())[_0x22fc84(0x1af)](-0x2),_0x29e05d=('0'+(_0x3a3c21['getMonth']()+0x1))[_0x22fc84(0x1af)](-0x2),_0x8f601=_0x3a3c21[_0x22fc84(0x1f1)](),_0x18ced4=_0x8f601+'-'+_0x29e05d+'-'+_0x1e305c,_0x52ef6f;if(_0xf234ba[_0x22fc84(0x1fa)]==_0x22fc84(0x208)){const _0x35ea86=await staff[_0x22fc84(0x1db)]({'email':_0xf234ba['email']});_0x52ef6f=await warehouse[_0x22fc84(0x1cc)]({'status':_0x22fc84(0x194),'name':_0x35ea86[_0x22fc84(0x189)],'warehouse_category':_0x22fc84(0x1d4)});}else _0x52ef6f=await warehouse[_0x22fc84(0x1cc)]({'status':_0x22fc84(0x194),'warehouse_category':'Raw\x20Materials'});const _0x255290=await warehouse[_0x22fc84(0x13e)]([{'$match':{'name':_0x183094[_0x22fc84(0x1fb)]}},{'$unwind':_0x22fc84(0x13a)},{'$group':{'_id':_0x22fc84(0x133),'name':{'$first':_0x22fc84(0x1c6)},'product_stock':{'$first':_0x22fc84(0x123)},'bay':{'$first':_0x22fc84(0x140)},'bin':{'$first':_0x22fc84(0x193)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x22fc84(0x130)},'secondary_code':{'$first':_0x22fc84(0x141)},'product_code':{'$first':_0x22fc84(0x1b4)},'storage':{'$first':_0x22fc84(0x1e8)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x22fc84(0x1df)},'production_date':{'$first':_0x22fc84(0x166)},'room':{'$first':_0x22fc84(0x14c)}}}]);if(_0x1896e1[0x0]['language']==_0x22fc84(0x1d3)){var _0x59fdb5=users[_0x22fc84(0x1cd)];console[_0x22fc84(0x16a)](_0x59fdb5);}else{if(_0x1896e1[0x0][_0x22fc84(0x1a6)]==_0x22fc84(0x11d))var _0x59fdb5=users[_0x22fc84(0x11d)];else{if(_0x1896e1[0x0][_0x22fc84(0x1a6)]==_0x22fc84(0x201))var _0x59fdb5=users[_0x22fc84(0x201)];else{if(_0x1896e1[0x0][_0x22fc84(0x1a6)]==_0x22fc84(0x12d))var _0x59fdb5=users[_0x22fc84(0x12d)];else{if(_0x1896e1[0x0][_0x22fc84(0x1a6)]==_0x22fc84(0x1f8))var _0x59fdb5=users[_0x22fc84(0x1f8)];else{if(_0x1896e1[0x0][_0x22fc84(0x1a6)]==_0x22fc84(0x1d8))var _0x59fdb5=users[_0x22fc84(0x18f)];else{if(_0x1896e1[0x0][_0x22fc84(0x1a6)]=='Chinese')var _0x59fdb5=users[_0x22fc84(0x174)];else{if(_0x1896e1[0x0][_0x22fc84(0x1a6)]==_0x22fc84(0x1a9))var _0x59fdb5=users[_0x22fc84(0x17e)];}}}}}}}_0x51a11d[_0x22fc84(0x153)](_0x22fc84(0x195),{'success':_0x1a7fe2[_0x22fc84(0x1f6)]('success'),'errors':_0x1a7fe2[_0x22fc84(0x1f6)](_0x22fc84(0x1c2)),'role':_0xf234ba,'profile':_0x2ea225,'master_shop':_0x1896e1,'warehouse':_0x52ef6f,'transfer':_0x183094,'stock':_0x255290,'language':_0x59fdb5});}catch(_0x490c6b){console['log'](_0x490c6b);}}),router['post']('/preview/:id',auth,async(_0x2202ab,_0x5529c7)=>{var _0x1b05ae=a0_0x2e4f7e;try{const _0x370c41=_0x2202ab['params']['id'],{from_warehouse:_0x459d9d,FromRoom_name:_0xd43cbf,to_warehouse:_0x1e02cb,ToRoom_name:_0x3055b5}=_0x2202ab[_0x1b05ae(0x149)],_0x4d7c24=await transfers[_0x1b05ae(0x1eb)]({'_id':_0x370c41}),_0x7bfcf4=_0x4d7c24['product'][_0x1b05ae(0x1aa)](async _0x3ee3c4=>{var _0x45f33d=_0x1b05ae;if(_0x3ee3c4[_0x45f33d(0x1dd)]>0x0){var _0x14f26b=await warehouse[_0x45f33d(0x1db)]({'name':_0x4d7c24[_0x45f33d(0x1fb)],'room':_0x3ee3c4[_0x45f33d(0x1bb)],'warehouse_category':_0x45f33d(0x1d4)});const _0x2f56ff=_0x14f26b['product_details'][_0x45f33d(0x1aa)](_0x1f0c88=>{var _0x536cbc=_0x45f33d;_0x1f0c88[_0x536cbc(0x1d7)]==_0x3ee3c4[_0x536cbc(0x1d7)]&&_0x1f0c88[_0x536cbc(0x1ea)]==_0x3ee3c4['from_floorlevel']&&_0x1f0c88[_0x536cbc(0x1d0)]==_0x3ee3c4['from_types']&&_0x1f0c88['bin']==_0x3ee3c4[_0x536cbc(0x11f)]&&_0x1f0c88[_0x536cbc(0x1b7)]==_0x3ee3c4[_0x536cbc(0x158)]&&_0x1f0c88[_0x536cbc(0x168)]==_0x3ee3c4[_0x536cbc(0x179)]&&_0x1f0c88[_0x536cbc(0x1a0)]==_0x3ee3c4[_0x536cbc(0x1f4)]&&_0x1f0c88[_0x536cbc(0x16d)]==_0x3ee3c4['expiry_date']&&_0x1f0c88[_0x536cbc(0x1dc)]==_0x3ee3c4[_0x536cbc(0x1dc)]&&_0x1f0c88[_0x536cbc(0x14a)]==_0x3ee3c4[_0x536cbc(0x14a)]&&_0x1f0c88[_0x536cbc(0x13b)]==_0x3ee3c4[_0x536cbc(0x1ee)]&&_0x1f0c88[_0x536cbc(0x17f)]==_0x3ee3c4['id_transaction_id']&&(_0x1f0c88[_0x536cbc(0x15d)]=_0x1f0c88[_0x536cbc(0x15d)]-_0x3ee3c4[_0x536cbc(0x1dd)]);});}return _0x14f26b;});Promise['all'](_0x7bfcf4)['then'](async _0x4f1cf5=>{var _0x50d648=_0x1b05ae;try{for(const _0x341b1d of _0x4f1cf5){await _0x341b1d[_0x50d648(0x198)]();}try{const _0x48c376=_0x4d7c24[_0x50d648(0x18b)][_0x50d648(0x1aa)](async _0x1e8271=>{var _0x5ef344=_0x50d648;if(_0x1e8271[_0x5ef344(0x1dd)]>0x0){var _0x149523=await warehouse[_0x5ef344(0x1db)]({'name':_0x4d7c24['to_warehouse'],'room':_0x1e8271[_0x5ef344(0x156)],'warehouse_category':_0x5ef344(0x1d4)}),_0x207b56=0x0;const _0x523634=_0x149523[_0x5ef344(0x1e0)][_0x5ef344(0x1aa)](_0x32dc5d=>{var _0xc7db3e=_0x5ef344;_0x32dc5d[_0xc7db3e(0x1d7)]==_0x1e8271[_0xc7db3e(0x1d7)]&&_0x32dc5d[_0xc7db3e(0x1ea)]==_0x1e8271[_0xc7db3e(0x1a7)]&&_0x32dc5d[_0xc7db3e(0x1d0)]==_0x1e8271['to_types']&&_0x32dc5d[_0xc7db3e(0x1b2)]==_0x1e8271[_0xc7db3e(0x1e5)]&&_0x32dc5d[_0xc7db3e(0x1b7)]==_0x1e8271[_0xc7db3e(0x132)]&&_0x32dc5d[_0xc7db3e(0x168)]==_0x1e8271['rack']&&_0x32dc5d[_0xc7db3e(0x1a0)]==_0x1e8271['storage']&&_0x32dc5d[_0xc7db3e(0x16d)]==_0x1e8271[_0xc7db3e(0x16d)]&&_0x32dc5d[_0xc7db3e(0x1dc)]==_0x1e8271[_0xc7db3e(0x1dc)]&&_0x32dc5d[_0xc7db3e(0x14a)]==_0x1e8271['production_date']&&_0x32dc5d['invoice']==_0x1e8271[_0xc7db3e(0x127)]&&(_0x32dc5d['product_stock']=_0x32dc5d[_0xc7db3e(0x15d)]+_0x1e8271[_0xc7db3e(0x1dd)],_0x207b56++);});_0x207b56=='0'&&(_0x149523[_0x5ef344(0x1e0)]=_0x149523[_0x5ef344(0x1e0)][_0x5ef344(0x136)]({'product_name':_0x1e8271[_0x5ef344(0x1d7)],'product_stock':_0x1e8271['to_quantity'],'bay':_0x1e8271[_0x5ef344(0x132)],'bin':_0x1e8271[_0x5ef344(0x1e5)],'type':_0x1e8271[_0x5ef344(0x1d2)],'floorlevel':_0x1e8271[_0x5ef344(0x1a7)],'storage':_0x1e8271[_0x5ef344(0x1a0)],'rack':_0x1e8271['rack'],'product_code':_0x1e8271['product_code'],'primary_code':_0x1e8271[_0x5ef344(0x1e4)],'secondary_code':_0x1e8271[_0x5ef344(0x1b0)],'maxProducts':_0x1e8271[_0x5ef344(0x157)],'storage':_0x1e8271[_0x5ef344(0x1a0)],'rack':_0x1e8271['rack'],'expiry_date':_0x1e8271[_0x5ef344(0x16d)],'maxPerUnit':_0x1e8271[_0x5ef344(0x159)],'batch_code':_0x1e8271[_0x5ef344(0x1dc)],'production_date':_0x1e8271[_0x5ef344(0x14a)]}));}return _0x149523;});Promise[_0x50d648(0x175)](_0x48c376)[_0x50d648(0x186)](async _0x358c79=>{var _0x136f37=_0x50d648;try{for(const _0x553ce0 of _0x358c79){await warehouse[_0x136f37(0x1c7)]({'_id':_0x553ce0['_id']},{'$addToSet':{'product_details':{'$each':_0x553ce0[_0x136f37(0x1e0)]}}});}_0x4d7c24['finalize']=_0x136f37(0x1c8);const _0x47d1e1=await _0x4d7c24[_0x136f37(0x198)](),_0x9a838b=await master_shop[_0x136f37(0x1cc)](),_0x38c680=await email_settings[_0x136f37(0x1db)](),_0x4e492b=await supervisor_settings[_0x136f37(0x1cc)]();var _0x568503=_0x4d7c24['product'],_0x4480f8='',_0x533198;for(_0x533198 in _0x568503){_0x4480f8+='<tr>'+_0x136f37(0x19d)+_0x568503[_0x533198][_0x136f37(0x1d7)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x568503[_0x533198]['product_code']+'</td>'+_0x136f37(0x19d)+_0x568503[_0x533198][_0x136f37(0x1dd)]+_0x136f37(0x1cf)+_0x136f37(0x19d)+_0x568503[_0x533198][_0x136f37(0x1c3)]+_0x136f37(0x1cf)+_0x136f37(0x19d)+_0x568503[_0x533198][_0x136f37(0x19a)]+_0x136f37(0x1cf)+_0x136f37(0x19d)+_0x4d7c24[_0x136f37(0x13d)]+_0x136f37(0x1cf)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x568503[_0x533198][_0x136f37(0x156)]+_0x136f37(0x1cf)+_0x136f37(0x19d)+_0x568503[_0x533198][_0x136f37(0x1a0)]+_0x568503[_0x533198][_0x136f37(0x168)]+_0x568503[_0x533198][_0x136f37(0x132)]+_0x568503[_0x533198][_0x136f37(0x1e5)]+_0x568503[_0x533198][_0x136f37(0x1d2)][0x0]+_0x568503[_0x533198][_0x136f37(0x1a7)]+_0x136f37(0x1cf),_0x136f37(0x1ba);}let _0x2c2aec=nodemailer[_0x136f37(0x18c)]({'host':_0x38c680[_0x136f37(0x15b)],'port':Number(_0x38c680['port']),'secure':![],'auth':{'user':_0x38c680[_0x136f37(0x18a)],'pass':_0x38c680[_0x136f37(0x202)]}}),_0x374b1f={'from':_0x38c680[_0x136f37(0x18a)],'to':_0x4e492b[0x0][_0x136f37(0x17c)],'subject':_0x136f37(0x143),'attachments':[{'filename':_0x136f37(0x12f),'path':__dirname+'/../public'+_0x136f37(0x1f0)+_0x9a838b[0x0][_0x136f37(0x147)],'cid':_0x136f37(0x1f5)}],'html':'<!DOCTYPE\x20html>'+_0x136f37(0x206)+_0x136f37(0x1c4)+'<div>'+_0x136f37(0x1f9)+_0x136f37(0x1a5)+_0x136f37(0x1bc)+_0x136f37(0x1fd)+_0x136f37(0x1a5)+'<h2>\x20'+_0x9a838b[0x0][_0x136f37(0x1f7)]+_0x136f37(0x165)+'</div>'+_0x136f37(0x1fd)+_0x136f37(0x1cb)+_0x136f37(0x1a5)+_0x136f37(0x1ca)+_0x136f37(0x200)+_0x4d7c24[_0x136f37(0x13b)]+'\x20'+_0x136f37(0x11a)+_0x136f37(0x11e)+_0x4d7c24[_0x136f37(0x1fc)]+'\x20'+'</span>'+'</h5>'+_0x136f37(0x1fd)+_0x136f37(0x13c)+_0x136f37(0x170)+_0x136f37(0x142)+_0x136f37(0x192)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x136f37(0x1ad)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>'+_0x136f37(0x1c5)+_0x136f37(0x203)+_0x136f37(0x1ba)+_0x136f37(0x197)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x4480f8+'\x20'+_0x136f37(0x12c)+_0x136f37(0x14d)+'<div>'+_0x136f37(0x1ce)+_0x136f37(0x135)+_0x9a838b[0x0][_0x136f37(0x1f7)]+_0x136f37(0x15a)+_0x136f37(0x1fd)+_0x136f37(0x1fd)+_0x136f37(0x1f2)};_0x2c2aec['sendMail'](_0x374b1f,function(_0x2b0189,_0x521e86){var _0x5b6f7b=_0x136f37;_0x2b0189?(console[_0x5b6f7b(0x16a)](_0x2b0189),console[_0x5b6f7b(0x16a)](_0x5b6f7b(0x1c0))):console['log'](_0x5b6f7b(0x12b));}),_0x2202ab[_0x136f37(0x1f6)](_0x136f37(0x167),'Transfer\x20Finalize\x20Successfully'),_0x5529c7[_0x136f37(0x16e)](_0x136f37(0x1ed)+_0x47d1e1[_0x136f37(0x17f)]);}catch(_0x164e98){console['error'](_0x164e98),_0x5529c7['status'](0x1f4)[_0x136f37(0x181)]({'Perror':_0x136f37(0x176),'message':_0x164e98['message']});}})[_0x50d648(0x14b)](_0x3c5b9c=>{var _0x4f62c8=_0x50d648;console[_0x4f62c8(0x11c)](_0x3c5b9c),_0x5529c7[_0x4f62c8(0x191)](0x1f4)[_0x4f62c8(0x181)]({'Perror':_0x4f62c8(0x205)});});}catch(_0x57eaff){_0x5529c7[_0x50d648(0x181)](_0x57eaff);}}catch(_0x2f0420){console[_0x50d648(0x11c)](_0x2f0420),_0x5529c7[_0x50d648(0x191)](0x1f4)[_0x50d648(0x181)]({'Merror':_0x50d648(0x176),'Message':_0x2f0420['message']});}})['catch'](_0xb93aa3=>{var _0x39c880=_0x1b05ae;console[_0x39c880(0x11c)](_0xb93aa3),_0x5529c7['status'](0x1f4)[_0x39c880(0x181)]({'Merror':_0x39c880(0x205)});});}catch(_0xba6afa){console[_0x1b05ae(0x16a)](_0xba6afa);}});function BayBinSelected(_0x3dce57,_0x550145){var _0x483e9d=a0_0x2e4f7e,_0x38956d=[],_0x6911bb=[],_0x43d6a6=[],_0xdba2aa=[],_0x1fc1ad=[],_0x69125f=[];let _0x854e7f=[];if(_0x3dce57=='DRY\x20STORAGE')switch(_0x550145){case _0x483e9d(0x1d9):_0x38956d=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x6911bb=[0x1,0x2],_0xdba2aa=[0x1,0x2,0x3,0x4,0x5],_0x43d6a6=['Level',_0x483e9d(0x178)],_0x1fc1ad=['D'],_0x69125f=['A'];break;case'Rack\x20B':_0x38956d=[0x6,0x5,0x4,0x3,0x2,0x1],_0x6911bb=[0x1,0x2],_0xdba2aa=[0x1,0x2,0x3,0x4,0x5],_0x43d6a6=[_0x483e9d(0x1e9),'Floor'],_0x1fc1ad=['D'],_0x69125f=['B'];break;case _0x483e9d(0x1bf):_0x38956d=[0x0],_0x6911bb=[0x0],_0xdba2aa=[0x1,0x2,0x3,0x4,0x5],_0x43d6a6=[_0x483e9d(0x178)],_0x1fc1ad=['D'],_0x69125f=['S'];break;case _0x483e9d(0x13f):_0x38956d=[0x0],_0x6911bb=[0x0],_0xdba2aa=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x43d6a6=['Floor'],_0x1fc1ad=['D'],_0x69125f=['R'];break;}else{if(_0x3dce57==_0x483e9d(0x15e))switch(_0x550145){case'Rack\x20A':_0x38956d=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x6911bb=['B','F'],_0xdba2aa=[0x1,0x2,0x3,0x4,0x5],_0x43d6a6=['Level',_0x483e9d(0x178)],_0x1fc1ad=['C'],_0x69125f=['A'];break;case _0x483e9d(0x1b6):_0x38956d=[0x5,0x4,0x3,0x2,0x1],_0x6911bb=['F','B','S'],_0xdba2aa=[0x1,0x2,0x3,0x4,0x5],_0x43d6a6=['Level',_0x483e9d(0x178)],_0x1fc1ad=['C'],_0x69125f=['B'];break;case _0x483e9d(0x182):_0x38956d=[0x1,0x2,0x3,0x4,0x5],_0x6911bb=['B','F','S'],_0xdba2aa=[0x5,0x4,0x3,0x2,0x1],_0x43d6a6=[_0x483e9d(0x1e9),_0x483e9d(0x178)],_0x1fc1ad=['C'],_0x69125f=['C'];break;case _0x483e9d(0x20c):_0x38956d=[0x5,0x4,0x3,0x2,0x1],_0x6911bb=['F','B','S'],_0xdba2aa=[0x1,0x2,0x3,0x4,0x5],_0x43d6a6=[_0x483e9d(0x1e9),'Floor'],_0x1fc1ad=['C'],_0x69125f=['D'];break;case'Rack\x20E':_0x38956d=[0x4,0x3,0x2,0x1],_0x6911bb=[0x1,0x2],_0xdba2aa=[0x1,0x2,0x3,0x4,0x5],_0x43d6a6=['Level',_0x483e9d(0x178)],_0x1fc1ad=['C'],_0x69125f=['E'];break;case _0x483e9d(0x1b9):_0x38956d=[0x1,0x2,0x3],_0x6911bb=[0x1,0x2],_0xdba2aa=[0x1,0x2,0x3,0x4,0x5],_0x43d6a6=[_0x483e9d(0x1e9)],_0x1fc1ad=['C'],_0x69125f=['F'];break;}}return{'levels':_0x38956d,'Isle':_0x6911bb,'rack':_0xdba2aa,'type':_0x43d6a6,'storage':_0x1fc1ad,'rak':_0x69125f};}router['get']('/view/:id',auth,async(_0x506697,_0x51ce9b)=>{var _0x2abe96=a0_0x2e4f7e;try{const {username:_0x44afcd,email:_0x10e469,role:_0x119ba2}=_0x506697[_0x2abe96(0x1e7)],_0x4f6933=_0x506697[_0x2abe96(0x1e7)],_0x50943f=await profile[_0x2abe96(0x1db)]({'email':_0x4f6933['email']}),_0x4bc10d=await master_shop[_0x2abe96(0x1cc)](),_0x1ed713=await transfers['findById'](_0x506697['params']['id']);let _0x1755e0;if(_0x4f6933['role']==_0x2abe96(0x208)){const _0x3773b6=await staff[_0x2abe96(0x1db)]({'email':_0x4f6933[_0x2abe96(0x18a)]});_0x1755e0=await warehouse[_0x2abe96(0x13e)]([{'$match':{'status':_0x2abe96(0x194),'name':_0x3773b6[_0x2abe96(0x189)],'warehouse_category':_0x2abe96(0x1d4)}},{'$group':{'_id':_0x2abe96(0x1fe),'name':{'$first':'$name'}}}]);}else _0x1755e0=await warehouse[_0x2abe96(0x13e)]([{'$match':{'status':_0x2abe96(0x194),'warehouse_category':_0x2abe96(0x1d4)}},{'$group':{'_id':_0x2abe96(0x1fe),'name':{'$first':_0x2abe96(0x1fe)}}}]);const _0x37cc33=await warehouse[_0x2abe96(0x13e)]([{'$match':{'name':_0x1ed713[_0x2abe96(0x1fb)],'warehouse_category':_0x2abe96(0x1d4)}},{'$unwind':'$product_details'},{'$group':{'_id':_0x2abe96(0x133),'name':{'$first':_0x2abe96(0x1c6)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x2abe96(0x140)},'bin':{'$first':_0x2abe96(0x193)},'type':{'$first':_0x2abe96(0x19c)},'floorlevel':{'$first':_0x2abe96(0x1f3)},'primary_code':{'$first':_0x2abe96(0x130)},'secondary_code':{'$first':_0x2abe96(0x141)},'product_code':{'$first':_0x2abe96(0x1b4)},'storage':{'$first':_0x2abe96(0x1e8)},'rack':{'$first':_0x2abe96(0x1b3)},'expiry_date':{'$first':_0x2abe96(0x1df)},'production_date':{'$first':_0x2abe96(0x166)},'room':{'$first':_0x2abe96(0x14c)}}}]),_0x3e694a=await product[_0x2abe96(0x1cc)]({}),_0x48dbe3=BayBinSelected(_0x1ed713[_0x2abe96(0x13d)],_0x1ed713[_0x2abe96(0x173)]);if(_0x4bc10d[0x0][_0x2abe96(0x1a6)]==_0x2abe96(0x1d3)){var _0x288b52=users['English'];console[_0x2abe96(0x16a)](_0x288b52);}else{if(_0x4bc10d[0x0]['language']==_0x2abe96(0x11d))var _0x288b52=users[_0x2abe96(0x11d)];else{if(_0x4bc10d[0x0][_0x2abe96(0x1a6)]=='German')var _0x288b52=users[_0x2abe96(0x201)];else{if(_0x4bc10d[0x0][_0x2abe96(0x1a6)]==_0x2abe96(0x12d))var _0x288b52=users['Spanish'];else{if(_0x4bc10d[0x0][_0x2abe96(0x1a6)]==_0x2abe96(0x1f8))var _0x288b52=users['French'];else{if(_0x4bc10d[0x0][_0x2abe96(0x1a6)]==_0x2abe96(0x1d8))var _0x288b52=users[_0x2abe96(0x18f)];else{if(_0x4bc10d[0x0][_0x2abe96(0x1a6)]==_0x2abe96(0x174))var _0x288b52=users[_0x2abe96(0x174)];else{if(_0x4bc10d[0x0]['language']=='Arabic\x20(ae)')var _0x288b52=users[_0x2abe96(0x17e)];}}}}}}}_0x51ce9b[_0x2abe96(0x153)](_0x2abe96(0x1a3),{'success':_0x506697[_0x2abe96(0x1f6)](_0x2abe96(0x167)),'errors':_0x506697['flash']('errors'),'role':_0x4f6933,'profile':_0x50943f,'master_shop':_0x4bc10d,'warehouse':_0x1755e0,'transfer':_0x1ed713,'stock':_0x37cc33,'unit':_0x3e694a,'language':_0x288b52});}catch(_0x2028d9){console[_0x2abe96(0x16a)](_0x2028d9);}}),router['post']('/view/:id',auth,async(_0x4c7030,_0x3a76a9)=>{var _0x2889a6=a0_0x2e4f7e;try{const _0x23c67d=_0x4c7030[_0x2889a6(0x162)]['id'],_0x2c2e96=await transfers['findById'](_0x23c67d);_0x3a76a9[_0x2889a6(0x181)](_0x4c7030[_0x2889a6(0x149)]);return;const {date:_0x2b3455,from_warehouse:_0x1faf75,FromRoom_name:_0x50e901,to_warehouse:_0x3b1433,ToRoom_name:_0x22e253,prod_name:_0x21d59f,from_prod_qty:_0x186cdb,from_prod_level:_0x385020,from_prod_isle:_0x31f1ef,from_prod_pallet:_0x3ab043,to_prod_qty:_0x80efec,to_prod_level:_0x3d4412,to_prod_isle:_0x334545,to_prod_pallet:_0x2f171d,primary_code:_0x3bfe65,secondary_code:_0x132bd8,product_code3:_0x30c5c8,note:_0x4f0f6c,invoice:_0x42a0b4,expiry_date:_0x109259}=_0x4c7030[_0x2889a6(0x149)];if(typeof _0x21d59f==_0x2889a6(0x17b))var _0x2b980e=[_0x4c7030['body'][_0x2889a6(0x11b)]],_0x371845=[_0x4c7030[_0x2889a6(0x149)]['from_prod_qty']],_0x51c6e0=[_0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1bd)]],_0x17072b=[_0x4c7030['body'][_0x2889a6(0x1ef)]],_0x4a5e2c=[_0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1b8)]],_0x5c3387=[_0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x148)]],_0xf3f1b5=[_0x4c7030[_0x2889a6(0x149)]['to_prod_qty']],_0x55c26f=[_0x4c7030['body'][_0x2889a6(0x161)]],_0x3183f5=[_0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1d5)]],_0x57e367=[_0x4c7030[_0x2889a6(0x149)]['to_prod_pallet']],_0x3928f9=[_0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1d2)]],_0x35a1b6=[_0x4c7030['body']['storage']],_0x26b613=[_0x4c7030[_0x2889a6(0x149)]['rak']],_0x6e9a72=[_0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1e4)]],_0x194953=[_0x4c7030[_0x2889a6(0x149)]['secondary_code']],_0x289857=[_0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x137)]],_0x5aac07=[_0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1a4)]],_0xcf6644=[_0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1c3)]],_0x2f4833=[_0x4c7030['body']['secondary_unit']],_0x4ae562=[_0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1dc)]],_0x1ea9f8=[_0x4c7030['body'][_0x2889a6(0x16d)]],_0x16feb2=[_0x4c7030['body']['from_storage']],_0x4539e4=[_0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x20b)]];else var _0x2b980e=[..._0x4c7030['body'][_0x2889a6(0x11b)]],_0x35a1b6=[..._0x4c7030['body'][_0x2889a6(0x1a0)]],_0x26b613=[..._0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x187)]],_0x5c3387=[..._0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x148)]],_0x3928f9=[..._0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1d2)]],_0x371845=[..._0x4c7030['body'][_0x2889a6(0x155)]],_0x51c6e0=[..._0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1bd)]],_0x17072b=[..._0x4c7030['body']['from_prod_isle']],_0x4a5e2c=[..._0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1b8)]],_0xf3f1b5=[..._0x4c7030['body'][_0x2889a6(0x139)]],_0x55c26f=[..._0x4c7030['body'][_0x2889a6(0x161)]],_0x3183f5=[..._0x4c7030['body'][_0x2889a6(0x1d5)]],_0x57e367=[..._0x4c7030['body'][_0x2889a6(0x122)]],_0x6e9a72=[..._0x4c7030['body'][_0x2889a6(0x1e4)]],_0x194953=[..._0x4c7030['body'][_0x2889a6(0x1b0)]],_0x289857=[..._0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x137)]],_0x5aac07=[..._0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1a4)]],_0xcf6644=[..._0x4c7030['body'][_0x2889a6(0x1c3)]],_0x2f4833=[..._0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x19a)]],_0x4ae562=[..._0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1dc)]],_0x1ea9f8=[..._0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x16d)]],_0x16feb2=[..._0x4c7030[_0x2889a6(0x149)][_0x2889a6(0x1f4)]],_0x4539e4=[..._0x4c7030[_0x2889a6(0x149)]['from_rak']];const _0x25b981=_0x2b980e[_0x2889a6(0x1aa)](_0x1a4f8a=>{return _0x1a4f8a={'product_name':_0x1a4f8a};});_0x371845[_0x2889a6(0x1a2)]((_0x4a46e9,_0x83ab7c)=>{var _0x2eafd2=_0x2889a6;_0x25b981[_0x83ab7c][_0x2eafd2(0x15f)]=_0x4a46e9;}),_0x51c6e0[_0x2889a6(0x1a2)]((_0x18d00b,_0x13b843)=>{var _0x2bad98=_0x2889a6;_0x25b981[_0x13b843][_0x2bad98(0x158)]=_0x18d00b;}),_0x17072b[_0x2889a6(0x1a2)]((_0x18db37,_0x2ba285)=>{_0x25b981[_0x2ba285]['from_bin']=_0x18db37;}),_0x4a5e2c[_0x2889a6(0x1a2)]((_0x12a7b8,_0x366fce)=>{var _0xaf360=_0x2889a6;_0x25b981[_0x366fce][_0xaf360(0x131)]=_0x12a7b8;}),_0xf3f1b5[_0x2889a6(0x1a2)]((_0x3547b4,_0x3d98fa)=>{var _0x3a390f=_0x2889a6;_0x25b981[_0x3d98fa][_0x3a390f(0x1dd)]=_0x3547b4;}),_0x55c26f[_0x2889a6(0x1a2)]((_0x2f7353,_0x2ad210)=>{var _0x57b982=_0x2889a6;_0x25b981[_0x2ad210][_0x57b982(0x132)]=_0x2f7353;}),_0x3183f5['forEach']((_0xfc5b3d,_0x58d25d)=>{var _0x2de864=_0x2889a6;_0x25b981[_0x58d25d][_0x2de864(0x1e5)]=_0xfc5b3d;}),_0x57e367[_0x2889a6(0x1a2)]((_0x1593ec,_0x92eba)=>{var _0x64d850=_0x2889a6;_0x25b981[_0x92eba][_0x64d850(0x1a7)]=_0x1593ec;}),_0x6e9a72[_0x2889a6(0x1a2)]((_0x190bcc,_0x17d18d)=>{var _0x36991e=_0x2889a6;_0x25b981[_0x17d18d][_0x36991e(0x1e4)]=_0x190bcc;}),_0x194953[_0x2889a6(0x1a2)]((_0x4e5019,_0xc4d472)=>{_0x25b981[_0xc4d472]['secondary_code']=_0x4e5019;}),_0x289857[_0x2889a6(0x1a2)]((_0x44cc09,_0x412c7d)=>{var _0xf13225=_0x2889a6;_0x25b981[_0x412c7d][_0xf13225(0x185)]=_0x44cc09;}),_0x5aac07['forEach']((_0x59111c,_0x511a4a)=>{_0x25b981[_0x511a4a]['maxProducts']=_0x59111c;}),_0xcf6644[_0x2889a6(0x1a2)]((_0x11f436,_0x11358b)=>{var _0x4769f3=_0x2889a6;_0x25b981[_0x11358b][_0x4769f3(0x1c3)]=_0x11f436;}),_0x2f4833[_0x2889a6(0x1a2)]((_0x110d95,_0x10060a)=>{var _0x487745=_0x2889a6;_0x25b981[_0x10060a][_0x487745(0x19a)]=_0x110d95;}),_0x4ae562[_0x2889a6(0x1a2)]((_0x3ecaef,_0x3f8ab9)=>{_0x25b981[_0x3f8ab9]['batch_code']=_0x3ecaef;}),_0x1ea9f8['forEach']((_0x2f6d0d,_0x395d26)=>{var _0x24250a=_0x2889a6;_0x25b981[_0x395d26][_0x24250a(0x16d)]=_0x2f6d0d;}),_0x35a1b6['forEach']((_0x16ae6f,_0x6d7a95)=>{var _0x1f675f=_0x2889a6;_0x25b981[_0x6d7a95][_0x1f675f(0x1a0)]=_0x16ae6f;}),_0x26b613[_0x2889a6(0x1a2)]((_0x15f9e9,_0x221f61)=>{var _0x225dd7=_0x2889a6;_0x25b981[_0x221f61][_0x225dd7(0x168)]=_0x15f9e9;}),_0x5c3387[_0x2889a6(0x1a2)]((_0x2d32b5,_0x119d25)=>{var _0x5c12da=_0x2889a6;_0x25b981[_0x119d25][_0x5c12da(0x148)]=_0x2d32b5;}),_0x3928f9[_0x2889a6(0x1a2)]((_0x7d3a44,_0x7f73ac)=>{var _0xc8e048=_0x2889a6;_0x25b981[_0x7f73ac][_0xc8e048(0x1d2)]=_0x7d3a44;}),_0x16feb2[_0x2889a6(0x1a2)]((_0x16d2a0,_0x5d3f0f)=>{_0x25b981[_0x5d3f0f]['from_storage']=_0x16d2a0;}),_0x4539e4[_0x2889a6(0x1a2)]((_0x1ef820,_0x29b386)=>{var _0x8b7e2e=_0x2889a6;_0x25b981[_0x29b386][_0x8b7e2e(0x179)]=_0x1ef820;});const _0x2817e5=_0x25b981[_0x2889a6(0x125)](_0x23b060=>_0x23b060[_0x2889a6(0x1dd)]!=='0'&&_0x23b060[_0x2889a6(0x1dd)]!==''||_0x23b060['to_floorlevel']!=='0'&&_0x23b060[_0x2889a6(0x1a7)]!=='');var _0x3053e7=0x0;_0x2817e5[_0x2889a6(0x1a2)](_0xef9976=>{var _0x1a0da9=_0x2889a6;parseInt(_0xef9976[_0x1a0da9(0x15f)])<parseInt(_0xef9976[_0x1a0da9(0x1dd)])&&_0x3053e7++;});if(_0x3053e7!=0x0)return _0x4c7030[_0x2889a6(0x1f6)](_0x2889a6(0x1c2),_0x2889a6(0x183)),_0x3a76a9[_0x2889a6(0x16e)](_0x2889a6(0x1e3));const _0x5ea4be=await warehouse[_0x2889a6(0x1db)]({'name':_0x2c2e96['from_warehouse'],'room':_0x2c2e96[_0x2889a6(0x1e1)]});_0x2c2e96['product'][_0x2889a6(0x1a2)](_0x143fcf=>{var _0x49e100=_0x2889a6;if(_0x143fcf[_0x49e100(0x1dd)]>0x0){const _0x3dab92=_0x5ea4be[_0x49e100(0x1e0)][_0x49e100(0x1aa)](_0x9f504a=>{var _0xbc07fa=_0x49e100;_0x9f504a[_0xbc07fa(0x1d7)]==_0x143fcf['product_name']&&_0x9f504a[_0xbc07fa(0x1ea)]==_0x143fcf['from_floorlevel']&&_0x9f504a['type']==_0x143fcf[_0xbc07fa(0x148)]&&_0x9f504a[_0xbc07fa(0x1b2)]==_0x143fcf[_0xbc07fa(0x11f)]&&_0x9f504a[_0xbc07fa(0x1b7)]==_0x143fcf['from_bay']&&_0x9f504a[_0xbc07fa(0x168)]==_0x143fcf['from_rack']&&_0x9f504a[_0xbc07fa(0x1a0)]==_0x143fcf[_0xbc07fa(0x1f4)]&&(_0x9f504a['product_stock']=parseInt(_0x9f504a[_0xbc07fa(0x15d)])+parseInt(_0x143fcf[_0xbc07fa(0x1dd)]));});}}),await _0x5ea4be[_0x2889a6(0x198)]();const _0x4aa64e=await warehouse['findOne']({'name':_0x2c2e96[_0x2889a6(0x13d)],'room':_0x2c2e96[_0x2889a6(0x173)]});_0x2c2e96['product']['forEach'](_0x30a042=>{var _0xeca25e=_0x2889a6;if(_0x30a042[_0xeca25e(0x1dd)]>0x0){const _0x1df5dd=_0x4aa64e['product_details'][_0xeca25e(0x1aa)](_0xbc8417=>{var _0xabd99a=_0xeca25e;_0xbc8417['product_name']==_0x30a042['product_name']&&_0xbc8417[_0xabd99a(0x1ea)]==_0x30a042['to_floorlevel']&&_0xbc8417[_0xabd99a(0x1d0)]==_0x30a042[_0xabd99a(0x1d2)]&&_0xbc8417[_0xabd99a(0x1b2)]==_0x30a042[_0xabd99a(0x1e5)]&&_0xbc8417[_0xabd99a(0x1b7)]==_0x30a042[_0xabd99a(0x132)]&&_0xbc8417[_0xabd99a(0x168)]==_0x30a042[_0xabd99a(0x168)]&&_0xbc8417[_0xabd99a(0x1a0)]==_0x30a042['storage']&&(_0xbc8417['product_stock']=parseInt(_0xbc8417[_0xabd99a(0x15d)])-parseInt(_0x30a042[_0xabd99a(0x1dd)]));});}}),await _0x4aa64e[_0x2889a6(0x198)](),_0x2c2e96[_0x2889a6(0x1fc)]=_0x2b3455,_0x2c2e96[_0x2889a6(0x1fb)]=_0x1faf75,_0x2c2e96['to_warehouse']=_0x3b1433,_0x2c2e96[_0x2889a6(0x18b)]=_0x2817e5,_0x2c2e96[_0x2889a6(0x12a)]=_0x4f0f6c,_0x2c2e96[_0x2889a6(0x13b)]=_0x42a0b4;const _0xdf1314=await _0x2c2e96[_0x2889a6(0x198)]();console[_0x2889a6(0x16a)](_0xdf1314);const _0x1e85be=await warehouse['findOne']({'name':_0x1faf75,'room':_0x50e901});_0xdf1314[_0x2889a6(0x18b)][_0x2889a6(0x1a2)](_0xa225c3=>{var _0x5707d3=_0x2889a6;if(_0xa225c3[_0x5707d3(0x1dd)]>0x0){const _0x31fcb3=_0x1e85be['product_details'][_0x5707d3(0x1aa)](_0x4bc0f5=>{var _0x1f35be=_0x5707d3;_0x4bc0f5[_0x1f35be(0x1d7)]==_0xa225c3[_0x1f35be(0x1d7)]&&_0x4bc0f5[_0x1f35be(0x1ea)]==_0xa225c3[_0x1f35be(0x131)]&&_0x4bc0f5[_0x1f35be(0x1d0)]==_0xa225c3['from_types']&&_0x4bc0f5[_0x1f35be(0x1b2)]==_0xa225c3['from_bin']&&_0x4bc0f5[_0x1f35be(0x1b7)]==_0xa225c3['from_bay']&&_0x4bc0f5[_0x1f35be(0x168)]==_0xa225c3[_0x1f35be(0x179)]&&_0x4bc0f5[_0x1f35be(0x1a0)]==_0xa225c3[_0x1f35be(0x1f4)]&&(_0x4bc0f5[_0x1f35be(0x15d)]=parseInt(_0x4bc0f5[_0x1f35be(0x15d)])-parseInt(_0xa225c3[_0x1f35be(0x1dd)]));});}}),await _0x1e85be[_0x2889a6(0x198)]();const _0x5d4886=await warehouse['findOne']({'name':_0x3b1433,'room':_0x22e253});_0xdf1314[_0x2889a6(0x18b)][_0x2889a6(0x1a2)](_0xbbb258=>{var _0x3e64ae=_0x2889a6;if(_0xbbb258['to_quantity']>0x0){var _0x107c00=0x0;const _0x220cc2=_0x5d4886[_0x3e64ae(0x1e0)][_0x3e64ae(0x1aa)](_0x284ec2=>{var _0x3c1008=_0x3e64ae;_0x284ec2[_0x3c1008(0x1d7)]==_0xbbb258['product_name']&&_0x284ec2['floorlevel']==_0xbbb258[_0x3c1008(0x1a7)]&&_0x284ec2[_0x3c1008(0x1d0)]==_0xbbb258[_0x3c1008(0x1d2)]&&_0x284ec2['bin']==_0xbbb258['to_bin']&&_0x284ec2[_0x3c1008(0x1b7)]==_0xbbb258['to_bay']&&_0x284ec2[_0x3c1008(0x168)]==_0xbbb258[_0x3c1008(0x168)]&&_0x284ec2['storage']==_0xbbb258['storage']&&(_0x284ec2[_0x3c1008(0x15d)]=parseInt(_0x284ec2['product_stock'])+parseInt(_0xbbb258['to_quantity']),_0x107c00++);});_0x107c00=='0'&&(_0x5d4886[_0x3e64ae(0x1e0)]=_0x5d4886[_0x3e64ae(0x1e0)][_0x3e64ae(0x136)]({'product_name':_0xbbb258[_0x3e64ae(0x1d7)],'product_stock':_0xbbb258[_0x3e64ae(0x1dd)],'bay':_0xbbb258[_0x3e64ae(0x132)],'bin':_0xbbb258[_0x3e64ae(0x1e5)],'type':_0xbbb258[_0x3e64ae(0x1d2)],'floorlevel':_0xbbb258[_0x3e64ae(0x1a7)],'storage':_0xbbb258[_0x3e64ae(0x1a0)],'rack':_0xbbb258[_0x3e64ae(0x168)],'product_code':_0xbbb258['product_code'],'primary_code':_0xbbb258['primary_code'],'secondary_code':_0xbbb258[_0x3e64ae(0x1b0)],'maxProducts':_0xbbb258[_0x3e64ae(0x157)],'storage':_0xbbb258[_0x3e64ae(0x1a0)],'rack':_0xbbb258[_0x3e64ae(0x168)]}));}}),await _0x5d4886[_0x2889a6(0x198)](),_0x4c7030[_0x2889a6(0x1f6)](_0x2889a6(0x167),_0x2889a6(0x1ab)),_0x3a76a9[_0x2889a6(0x16e)](_0x2889a6(0x1a8));}catch(_0x4728fd){console[_0x2889a6(0x16a)](_0x4728fd);}}),router[a0_0x2e4f7e(0x20d)](a0_0x2e4f7e(0x128),async(_0x459bc2,_0x202188)=>{var _0x86a549=a0_0x2e4f7e;const {FromWareHouse:_0x47de95,FromRoom:_0x242aa6,ToWarehouse:_0x463966,ToRoom:_0x251767,primary_code:_0x1321a9,Roomslist:_0x908cd9}=_0x459bc2[_0x86a549(0x149)],_0x56d591=_0x908cd9[_0x86a549(0x190)](','),_0x2a6e99=[];async function _0x583b1c(_0x41b877){var _0x21613b=_0x86a549;const _0x253e10=await warehouse[_0x21613b(0x13e)]([{'$match':{'name':_0x47de95,'room':_0x41b877}},{'$unwind':_0x21613b(0x13a)},{'$match':{'product_details.primary_code':_0x1321a9}},{'$group':{'_id':_0x21613b(0x133),'name':{'$first':_0x21613b(0x1c6)},'instock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x21613b(0x130)},'secondary_code':{'$first':_0x21613b(0x141)},'product_code':{'$first':_0x21613b(0x1b4)},'level':{'$first':_0x21613b(0x140)},'isle':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x21613b(0x1f3)},'unit':{'$first':_0x21613b(0x177)},'secondary_unit':{'$first':_0x21613b(0x150)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x21613b(0x1b3)},'expiry_date':{'$first':_0x21613b(0x1df)},'production_date':{'$first':_0x21613b(0x166)},'batch_code':{'$first':_0x21613b(0x154)},'maxPerUnit':{'$first':_0x21613b(0x209)},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x21613b(0x14c)},'maxProducts':{'$first':_0x21613b(0x15c)},'invoice_product':{'$first':'$product_details.invoice'}}}]),_0x43c8e4=await warehouse[_0x21613b(0x13e)]([{'$match':{'name':_0x47de95,'room':_0x41b877}},{'$unwind':_0x21613b(0x13a)},{'$match':{'product_details.secondary_code':_0x1321a9}},{'$group':{'_id':_0x21613b(0x133),'name':{'$first':_0x21613b(0x1c6)},'instock':{'$first':_0x21613b(0x123)},'primary_code':{'$first':_0x21613b(0x130)},'secondary_code':{'$first':_0x21613b(0x141)},'product_code':{'$first':_0x21613b(0x1b4)},'level':{'$first':_0x21613b(0x140)},'isle':{'$first':_0x21613b(0x193)},'type':{'$first':_0x21613b(0x19c)},'pallet':{'$first':_0x21613b(0x1f3)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x21613b(0x1df)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x21613b(0x154)},'maxPerUnit':{'$first':_0x21613b(0x209)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x21613b(0x14c)},'maxProducts':{'$first':_0x21613b(0x15c)},'invoice_product':{'$first':_0x21613b(0x118)}}}]);if(_0x253e10[_0x21613b(0x120)]>0x0)_0x2a6e99['push'](_0x253e10);else _0x43c8e4['length']>0x0&&_0x2a6e99['push'](_0x43c8e4);}const _0x56984d=_0x56d591['map'](_0x1b51f4=>_0x583b1c(_0x1b51f4));await Promise[_0x86a549(0x175)](_0x56984d),_0x202188[_0x86a549(0x181)](_0x2a6e99);}),router[a0_0x2e4f7e(0x20d)]('/barcode_scanner2',async(_0x379537,_0x3c2592)=>{var _0x2c37bb=a0_0x2e4f7e;try{const {FromWareHouse:_0x24cec8,FromRoom:_0x6aa499,ToWarehouse:_0x4c7f2f,ToRoom:_0x59f68b,secondary_code:_0x12847a}=_0x379537['body'],_0x47c079=await warehouse[_0x2c37bb(0x13e)]([{'$match':{'name':_0x24cec8}},{'$unwind':_0x2c37bb(0x13a)},{'$match':{'product_details.secondary_code':_0x12847a}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x2c37bb(0x1c6)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x2c37bb(0x141)},'product_code':{'$first':_0x2c37bb(0x1b4)},'instock':{'$first':_0x2c37bb(0x123)},'warehouse':{'$first':'$name'},'level':{'$first':_0x2c37bb(0x207)},'isle':{'$first':_0x2c37bb(0x138)},'pallet':{'$first':_0x2c37bb(0x180)},'maxProducts':{'$first':_0x2c37bb(0x15c)},'unit':{'$first':_0x2c37bb(0x177)}}}]);_0x3c2592[_0x2c37bb(0x191)](0xc8)[_0x2c37bb(0x181)](_0x47c079);}catch(_0xe83066){_0x3c2592['status'](0x194)[_0x2c37bb(0x181)]({'message':_0xe83066[_0x2c37bb(0x172)]});}}),router[a0_0x2e4f7e(0x20d)](a0_0x2e4f7e(0x16b),async(_0x246a87,_0x5521f9)=>{var _0xd0318a=a0_0x2e4f7e;try{const {FromWareHouse:_0x265f70,FromRoom:_0x2e80d3,ToWarehouse:_0x326d2d,ToRoom:_0x307421,product_code:_0x4b9ab6}=_0x246a87[_0xd0318a(0x149)],_0x57c589=await warehouse['aggregate']([{'$match':{'name':_0x265f70}},{'$unwind':_0xd0318a(0x13a)},{'$match':{'product_details.product_code':_0x4b9ab6}},{'$group':{'_id':_0xd0318a(0x133),'name':{'$first':_0xd0318a(0x1c6)},'primary_code':{'$first':_0xd0318a(0x130)},'secondary_code':{'$first':_0xd0318a(0x141)},'product_code':{'$first':_0xd0318a(0x1b4)},'instock':{'$first':_0xd0318a(0x123)},'warehouse':{'$first':'$name'},'level':{'$first':'$product_details.level'},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0xd0318a(0x180)},'maxProducts':{'$first':_0xd0318a(0x15c)},'unit':{'$first':_0xd0318a(0x177)}}}]);_0x5521f9[_0xd0318a(0x191)](0xc8)['json'](_0x57c589);}catch(_0x5f0cc4){_0x5521f9[_0xd0318a(0x191)](0x194)[_0xd0318a(0x181)]({'message':_0x5f0cc4[_0xd0318a(0x172)]});}}),router[a0_0x2e4f7e(0x20d)](a0_0x2e4f7e(0x16c),async(_0x5b6af9,_0x30b880)=>{var _0x3f58d9=a0_0x2e4f7e;const {level:_0x185176,isle:_0x55ef36,pallet:_0x22ad64,warehouses:_0x42b56f,room:_0x5138e9}=_0x5b6af9[_0x3f58d9(0x149)];try{const _0x2665fc=await warehouse[_0x3f58d9(0x13e)]([{'$match':{'name':_0x42b56f,'room':_0x5138e9}},{'$unwind':_0x3f58d9(0x13a)},{'$match':{'product_details.level':parseInt(_0x185176),'product_details.isle':_0x55ef36,'product_details.pallet':parseInt(_0x22ad64)}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x3f58d9(0x1c6)},'product_stock':{'$first':_0x3f58d9(0x123)},'level':{'$first':_0x3f58d9(0x207)},'isle':{'$first':_0x3f58d9(0x138)},'pallet':{'$first':_0x3f58d9(0x180)},'maxProducts':{'$first':_0x3f58d9(0x15c)}}}]);_0x30b880['status'](0xc8)[_0x3f58d9(0x181)](_0x2665fc);}catch(_0xbdbba7){_0x30b880[_0x3f58d9(0x191)](0x194)[_0x3f58d9(0x181)]({'message':_0xbdbba7[_0x3f58d9(0x172)]});}}),module[a0_0x2e4f7e(0x17a)]=router;function a0_0xa09f(){var _0x4fce75=['<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','1490214CrOhSl','slice','secondary_code','288gnEcnA','bin','$product_details.rack','$product_details.product_code','$isAllowEdit','Rack\x20B','bay','from_prod_pallet','Rack\x20F','</tr>','from_room_name','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','from_prod_level','toString','Shelves','Error\x20Occurs','$product.from_room_name','errors','unit','</head><body>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','$product_details.product_name','updateOne','True','$to_warehouse','<h5\x20style=\x22text-align:\x20left;\x22>','<hr\x20class=\x22my-3\x22>','find','English','<strong>\x20Regards\x20</strong>','</td>','type','../models/all_models','to_types','English\x20(US)','Raw\x20Materials','to_prod_isle','here','product_name','Portuguese\x20(BR)','Rack\x20A','1195pqOhaw','findOne','batch_code','to_quantity','transfer','$product_details.expiry_date','product_details','from_room','123865mLTAjG','back','primary_code','to_bin','max_per_unit','user','$product_details.storage','Level','floorlevel','findById','to_invoice','/picking_list/PDF_transfer_rm/','from_invoice','from_prod_isle','/upload/','getFullYear','</body></html>','$product_details.floorlevel','from_storage','logo','flash','site_title','French','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','role','from_warehouse','date','</div>','$name','$from_warehouse','\x20Order\x20Number\x20:\x20','German','password','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','Router','An\x20error\x20occurred.','<html><head><title></title>','$product_details.level','staff','$product_details.maxPerUnit','\x20<>\x20','from_rak','Rack\x20D','post','express','$product_details.invoice','There\x27s\x20a\x20error\x20in\x20this\x20transaction','<span\x20style=\x22float:\x20right;\x22>','prod_name','error','Hindi','\x20Order\x20Date\x20:\x20','from_bin','length','id_transaction','to_prod_pallet','$product_details.product_stock','get','filter','nodemailer','To_invoice','/barcode_scanner','$_id','note','Email\x20sent\x20successfully','</tbody>','Spanish','6222933YizOYY','Logo.png','$product_details.primary_code','from_floorlevel','to_bay','$product_details._id','RoomAssigned','<h5>','concat','product_code3','$product_details.isle','to_prod_qty','$product_details','invoice','<table\x20style=\x22width:\x20100%\x20!important;\x22>','to_warehouse','aggregate','Receiving\x20Area','$product_details.bay','$product_details.secondary_code','<tr>','Transfer\x20Mail','random','master','Return\x20Rooms','image','from_types','body','production_date','catch','$room','</table>','/view','Enclosed','$product_details.secondary_unit','New_Qty_Converted','TRF-','render','$product_details.batch_code','from_prod_qty','to_room_name','maxProducts','from_bay','maxperunit','</h5>','host','$product_details.maxProducts','product_stock','COLD\x20STORAGE','from_quantity','$product','to_prod_level','params','prod_cat','Product\x20Transfer\x20successfully','\x20</h2>','$product_details.production_date','success','rack','14884lpMedo','log','/barcode_scanner3','/CheckingWarehouse','expiry_date','redirect','id_transaction_id','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','Ambient','message','to_room','Chinese','all','An\x20error\x20occurred\x20while\x20saving\x20data.','$product_details.unit','Floor','from_rack','exports','string','RMSEmail','1158915YuDFiB','Arabic','_id','$product_details.pallet','json','Rack\x20C','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','6TBQuev','product_code','then','rak','../public/language/languages.json','warehouse','email','product','createTransport','$finalize','floor','Portuguese','split','status','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','$product_details.bin','Enabled','edit_transfer_view','16935540hTpbFH','</thead>','save','../middleware/auth','secondary_unit','getDate','$product_details.type','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','/transfer/preview/','padStart','storage','add_transfer','forEach','edit_transfer','MaxStocks_data2','<div>','language','to_floorlevel','/transfer/view','Arabic\x20(ae)','map','Transfer\x20Edit\x20Successfully','495569LZXQoS'];a0_0xa09f=function(){return _0x4fce75;};return a0_0xa09f();}