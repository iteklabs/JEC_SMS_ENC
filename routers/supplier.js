const a0_0x24bedf=a0_0xc0b9;(function(_0x2e5c45,_0x13fe61){const _0x13d2d0=a0_0xc0b9,_0x4b21dd=_0x2e5c45();while(!![]){try{const _0x366558=parseInt(_0x13d2d0(0x88))/0x1+-parseInt(_0x13d2d0(0x9b))/0x2*(parseInt(_0x13d2d0(0x9d))/0x3)+parseInt(_0x13d2d0(0xc1))/0x4*(parseInt(_0x13d2d0(0xb1))/0x5)+parseInt(_0x13d2d0(0xbd))/0x6*(parseInt(_0x13d2d0(0x8a))/0x7)+-parseInt(_0x13d2d0(0x8e))/0x8*(parseInt(_0x13d2d0(0xc7))/0x9)+-parseInt(_0x13d2d0(0xb4))/0xa*(parseInt(_0x13d2d0(0xb2))/0xb)+parseInt(_0x13d2d0(0xc6))/0xc*(parseInt(_0x13d2d0(0xb5))/0xd);if(_0x366558===_0x13fe61)break;else _0x4b21dd['push'](_0x4b21dd['shift']());}catch(_0x10fafc){_0x4b21dd['push'](_0x4b21dd['shift']());}}}(a0_0x5c84,0xc689b));function a0_0x5c84(){const _0x4fdec2=['readFile','Purchase\x20Return','exceljs','data','findById','sheet_to_json','success','Arabic\x20(ae)','Company_Name','save','xlsx','\x20added\x20successfully','$amount','Spanish','French','$reason','landline','s_payments','public/Migration','1349234PrCows','English\x20(US)','17129qAYWAW','English','/view/:id','Content-Type','712EDhimo','get','Workbook','express','addWorksheet','log','supplier_product_file','findOne','Arabic','../middleware/auth','payable_sum','status','supplier','1331326UtJQSL','send','3sZtdhT','Purchase','payable','setHeader','company','Mobile_number','redirect','PBrands','suppliers_docs','columns','purchase_return','SalesmanName','forEach','Supplier_Code','amount','Portuguese\x20(BR)','user','attachment;\x20filename=supplier_Migration_File.xlsx','utils','find','65995TDpQPL','3339523samzOm','params','10XCVnxj','13KgADDN','aggregate','write','/supplier/view','reason','body','exports','Router','2598sjLyZP','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','/view','now','156ImozVV','mobile','German','Content-Disposition','../models/all_models','3567000mhCvTj','145449wFFbrA','doc','suppliers','master','email','error','receivable_sum','map','post','diskStorage','file','supplier\x20data\x20update\x20successfully','Hindi','suppliers_code','supplier.js\x20payment_data','address','Name','name','\x20Failed','originalname','render','language','public/Migration/','Chinese','Email','supplier_payment','receivable','Portuguese','flash','errors','supplier\x20data\x20add\x20successfully'];a0_0x5c84=function(){return _0x4fdec2;};return a0_0x5c84();}function a0_0xc0b9(_0xf3cdd2,_0x7af6bf){const _0x5c8451=a0_0x5c84();return a0_0xc0b9=function(_0xc0b973,_0xceeeed){_0xc0b973=_0xc0b973-0x7e;let _0x37b416=_0x5c8451[_0xc0b973];return _0x37b416;},a0_0xc0b9(_0xf3cdd2,_0x7af6bf);}const express=require(a0_0x24bedf(0x91)),app=express(),router=express[a0_0x24bedf(0xbc)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x24bedf(0xc5)),auth=require(a0_0x24bedf(0x97)),users=require('../public/language/languages.json'),excelJS=require(a0_0x24bedf(0xe8)),xlsx=require(a0_0x24bedf(0x7f)),multer=require('multer');router['get'](a0_0x24bedf(0xbf),auth,async(_0x3ac4ef,_0x3a905e)=>{const _0x3561c7=a0_0x24bedf;try{const {username:_0x12c558,email:_0x4d8002,role:_0x41e7e5}=_0x3ac4ef[_0x3561c7(0xad)],_0xdccef6=_0x3ac4ef['user'],_0x15a5a8=await profile[_0x3561c7(0x95)]({'email':_0xdccef6[_0x3561c7(0xcb)]}),_0x9fec35=await master_shop[_0x3561c7(0xb0)]();console[_0x3561c7(0x93)](_0x3561c7(0xca),_0x9fec35);const _0x334923=await suppliers[_0x3561c7(0xb0)]();console[_0x3561c7(0x93)](_0x334923);const _0x15afaf=await suppliers[_0x3561c7(0xb6)]([{'$lookup':{'from':_0x3561c7(0x86),'localField':_0x3561c7(0xd8),'foreignField':_0x3561c7(0xc9),'as':_0x3561c7(0xa5)}}]),_0x5774c4=_0x15afaf[_0x3561c7(0xce)](_0x29ad20=>{const _0x41b764=_0x3561c7;console['log'](_0x41b764(0xe9),_0x29ad20);var _0x4e99b8=0x0,_0x269391=0x0;return _0x29ad20[_0x41b764(0xa5)][_0x41b764(0xa9)](_0x4e91a2=>{const _0x284d73=_0x41b764;console[_0x284d73(0x93)](_0x284d73(0xc8),_0x4e91a2),_0x4e91a2[_0x284d73(0xb9)]==_0x284d73(0x9e)?_0x4e99b8+=_0x4e91a2[_0x284d73(0xab)]:_0x269391+=_0x4e91a2[_0x284d73(0xab)];}),_0x29ad20['purchase']=_0x4e99b8,_0x29ad20[_0x41b764(0xa7)]=_0x269391,_0x29ad20;});console[_0x3561c7(0x93)](_0x3561c7(0xd5),_0x5774c4);if(_0x9fec35[0x0]['language']=='English\x20(US)'){var _0x234d4f=users[_0x3561c7(0x8b)];console[_0x3561c7(0x93)](_0x234d4f);}else{if(_0x9fec35[0x0][_0x3561c7(0xdc)]=='Hindi')var _0x234d4f=users[_0x3561c7(0xd3)];else{if(_0x9fec35[0x0][_0x3561c7(0xdc)]==_0x3561c7(0xc3))var _0x234d4f=users[_0x3561c7(0xc3)];else{if(_0x9fec35[0x0][_0x3561c7(0xdc)]==_0x3561c7(0x82))var _0x234d4f=users[_0x3561c7(0x82)];else{if(_0x9fec35[0x0][_0x3561c7(0xdc)]==_0x3561c7(0x83))var _0x234d4f=users[_0x3561c7(0x83)];else{if(_0x9fec35[0x0][_0x3561c7(0xdc)]=='Portuguese\x20(BR)')var _0x234d4f=users[_0x3561c7(0xe2)];else{if(_0x9fec35[0x0][_0x3561c7(0xdc)]==_0x3561c7(0xde))var _0x234d4f=users['Chinese'];else{if(_0x9fec35[0x0][_0x3561c7(0xdc)]==_0x3561c7(0xed))var _0x234d4f=users[_0x3561c7(0x96)];}}}}}}}_0x3a905e['render']('supplier',{'success':_0x3ac4ef[_0x3561c7(0xe3)](_0x3561c7(0xec)),'errors':_0x3ac4ef[_0x3561c7(0xe3)](_0x3561c7(0xe4)),'user':_0x334923,'profile':_0x15a5a8,'master_shop':_0x9fec35,'role':_0xdccef6,'payment':_0x5774c4,'language':_0x234d4f});}catch(_0x787c57){console[_0x3561c7(0x93)](_0x787c57);}}),router[a0_0x24bedf(0xcf)](a0_0x24bedf(0xbf),auth,async(_0xa48c15,_0x3df0ad)=>{const _0x3edadb=a0_0x24bedf;try{const {name:_0x5d56c4,email:_0x2a5fb1,mobile:_0x124464,company:_0x5e426a,address:_0x592ea8,receivable:_0xae815c,payable:_0x15d0f6,code:_0x4d870a,contactperson:_0x62ebdb,landline:_0x4cf7e9}=_0xa48c15[_0x3edadb(0xba)],_0x5b1168=new suppliers({'name':_0x5d56c4,'email':_0x2a5fb1,'mobile':_0x124464,'company':_0x5e426a,'address':_0x592ea8,'receivable':_0xae815c,'payable':_0x15d0f6,'suppliers_code':_0x4d870a,'contactperson':_0x62ebdb,'landline':_0x4cf7e9}),_0x3789e6=await _0x5b1168[_0x3edadb(0x7e)]();_0xa48c15[_0x3edadb(0xe3)](_0x3edadb(0xec),_0x3edadb(0xe5)),_0x3df0ad[_0x3edadb(0xa3)](_0x3edadb(0xb8));}catch(_0xabcace){console[_0x3edadb(0x93)](_0xabcace);}}),router['get'](a0_0x24bedf(0x8c),auth,async(_0x193e28,_0x50ca55)=>{const _0x42d72a=a0_0x24bedf;try{const {username:_0x450a5,email:_0x2ce560,role:_0x1be306}=_0x193e28['user'],_0x4e8650=_0x193e28[_0x42d72a(0xad)],_0x3c7d0d=await profile[_0x42d72a(0x95)]({'email':_0x4e8650[_0x42d72a(0xcb)]}),_0x51155c=await master_shop[_0x42d72a(0xb0)]();console['log'](_0x42d72a(0xca),_0x51155c);const _0x4f0f65=_0x193e28[_0x42d72a(0xb3)]['id'],_0x44cee3=await suppliers[_0x42d72a(0xea)](_0x4f0f65);console[_0x42d72a(0x93)](_0x44cee3);if(_0x51155c[0x0][_0x42d72a(0xdc)]=='English\x20(US)'){var _0x309d4b=users[_0x42d72a(0x8b)];console[_0x42d72a(0x93)](_0x309d4b);}else{if(_0x51155c[0x0][_0x42d72a(0xdc)]==_0x42d72a(0xd3))var _0x309d4b=users[_0x42d72a(0xd3)];else{if(_0x51155c[0x0][_0x42d72a(0xdc)]==_0x42d72a(0xc3))var _0x309d4b=users[_0x42d72a(0xc3)];else{if(_0x51155c[0x0]['language']==_0x42d72a(0x82))var _0x309d4b=users[_0x42d72a(0x82)];else{if(_0x51155c[0x0][_0x42d72a(0xdc)]==_0x42d72a(0x83))var _0x309d4b=users[_0x42d72a(0x83)];else{if(_0x51155c[0x0][_0x42d72a(0xdc)]==_0x42d72a(0xac))var _0x309d4b=users[_0x42d72a(0xe2)];else{if(_0x51155c[0x0][_0x42d72a(0xdc)]==_0x42d72a(0xde))var _0x309d4b=users[_0x42d72a(0xde)];else{if(_0x51155c[0x0][_0x42d72a(0xdc)]==_0x42d72a(0xed))var _0x309d4b=users['Arabic'];}}}}}}}_0x50ca55['render'](_0x42d72a(0x9a),{'success':_0x193e28['flash'](_0x42d72a(0xec)),'errors':_0x193e28[_0x42d72a(0xe3)](_0x42d72a(0xe4)),'role':_0x4e8650,'profile':_0x3c7d0d,'master_shop':_0x51155c,'user':_0x44cee3,'language':_0x309d4b});}catch(_0x1faa86){console[_0x42d72a(0x93)](_0x1faa86);}}),router['post'](a0_0x24bedf(0x8c),auth,async(_0x5c9dac,_0x5ecabe)=>{const _0x40841e=a0_0x24bedf;try{const _0x479476=_0x5c9dac[_0x40841e(0xb3)]['id'],_0x1ee019=await suppliers[_0x40841e(0xea)](_0x479476),{name:_0x4514a1,email:_0x35c117,mobile:_0x33e84b,company:_0x300da0,address:_0x521b44,receivable:_0x3e4835,payable:_0x3aba2d,code:_0xce5cea,contactperson:_0x4aad54,landline:_0x5b1c40}=_0x5c9dac[_0x40841e(0xba)];_0x1ee019['name']=_0x4514a1,_0x1ee019[_0x40841e(0xcb)]=_0x35c117,_0x1ee019[_0x40841e(0xc2)]=_0x33e84b,_0x1ee019[_0x40841e(0xa1)]=_0x300da0,_0x1ee019[_0x40841e(0xd6)]=_0x521b44,_0x1ee019[_0x40841e(0xe1)]=_0x3e4835,_0x1ee019[_0x40841e(0x9f)]=_0x3aba2d,_0x1ee019[_0x40841e(0xd4)]=_0xce5cea,_0x1ee019['contactperson']=_0x4aad54,_0x1ee019[_0x40841e(0x85)]=_0x5b1c40;const _0x1e8105=await _0x1ee019[_0x40841e(0x7e)]();_0x5c9dac['flash'](_0x40841e(0xec),_0x40841e(0xd2)),_0x5ecabe['redirect'](_0x40841e(0xb8));}catch(_0x4f95a6){console[_0x40841e(0x93)](_0x4f95a6);}}),router[a0_0x24bedf(0x8f)]('/view/payment/:id',auth,async(_0x13c99a,_0x2d5be1)=>{const _0x28ea2b=a0_0x24bedf;try{const {username:_0x2b50ee,email:_0x3d7400,role:_0x1995b0}=_0x13c99a[_0x28ea2b(0xad)],_0x1f2c85=_0x13c99a[_0x28ea2b(0xad)],_0x445c05=await profile[_0x28ea2b(0x95)]({'email':_0x1f2c85['email']}),_0x5607c5=await master_shop[_0x28ea2b(0xb0)]();console[_0x28ea2b(0x93)](_0x28ea2b(0xca),_0x5607c5),console[_0x28ea2b(0x93)](_0x13c99a[_0x28ea2b(0xb3)]['id']);const _0x5982b8=await suppliers[_0x28ea2b(0x95)]({'_id':_0x13c99a[_0x28ea2b(0xb3)]['id']});console[_0x28ea2b(0x93)](_0x5982b8);const _0x159863=await s_payment_data[_0x28ea2b(0xb0)]({'suppliers':_0x5982b8[_0x28ea2b(0xd8)]});console['log'](_0x159863);const _0x578ccc=await s_payment_data[_0x28ea2b(0xb6)]([{'$match':{'suppliers':_0x5982b8[_0x28ea2b(0xd8)]}},{'$match':{'reason':'Purchase'}},{'$group':{'_id':_0x28ea2b(0x84),'sum':{'$sum':_0x28ea2b(0x81)}}}]);console[_0x28ea2b(0x93)](_0x28ea2b(0x98),_0x578ccc);const _0x586f37=await s_payment_data['aggregate']([{'$match':{'suppliers':_0x5982b8['name']}},{'$match':{'reason':_0x28ea2b(0xe7)}},{'$group':{'_id':_0x28ea2b(0x84),'sum':{'$sum':'$amount'}}}]);console[_0x28ea2b(0x93)](_0x28ea2b(0xcd),_0x586f37);if(_0x5607c5[0x0][_0x28ea2b(0xdc)]==_0x28ea2b(0x89)){var _0x2e611f=users[_0x28ea2b(0x8b)];console[_0x28ea2b(0x93)](_0x2e611f);}else{if(_0x5607c5[0x0][_0x28ea2b(0xdc)]==_0x28ea2b(0xd3))var _0x2e611f=users[_0x28ea2b(0xd3)];else{if(_0x5607c5[0x0][_0x28ea2b(0xdc)]==_0x28ea2b(0xc3))var _0x2e611f=users[_0x28ea2b(0xc3)];else{if(_0x5607c5[0x0][_0x28ea2b(0xdc)]=='Spanish')var _0x2e611f=users[_0x28ea2b(0x82)];else{if(_0x5607c5[0x0][_0x28ea2b(0xdc)]=='French')var _0x2e611f=users[_0x28ea2b(0x83)];else{if(_0x5607c5[0x0][_0x28ea2b(0xdc)]==_0x28ea2b(0xac))var _0x2e611f=users['Portuguese'];else{if(_0x5607c5[0x0]['language']==_0x28ea2b(0xde))var _0x2e611f=users['Chinese'];else{if(_0x5607c5[0x0]['language']==_0x28ea2b(0xed))var _0x2e611f=users['Arabic'];}}}}}}}_0x2d5be1[_0x28ea2b(0xdb)](_0x28ea2b(0xe0),{'success':_0x13c99a[_0x28ea2b(0xe3)]('success'),'errors':_0x13c99a[_0x28ea2b(0xe3)](_0x28ea2b(0xe4)),'role':_0x1f2c85,'profile':_0x445c05,'master_shop':_0x5607c5,'payment':_0x159863,'payable':_0x578ccc,'receivable':_0x586f37,'language':_0x2e611f});}catch(_0x492491){console[_0x28ea2b(0x93)](_0x492491);}}),router[a0_0x24bedf(0x8f)]('/products_export_migrate_file',auth,async(_0x3c11a7,_0x5eba21)=>{const _0x302ee3=a0_0x24bedf;try{const _0x38ce6d=new excelJS[(_0x302ee3(0x90))](),_0x534d6c=_0x38ce6d[_0x302ee3(0x92)]('Customers');return _0x534d6c[_0x302ee3(0xa6)]=[{'header':_0x302ee3(0xd7),'key':_0x302ee3(0xa4),'width':0xa},{'header':_0x302ee3(0xaa),'key':'PUnits','width':0xa},{'header':_0x302ee3(0xdf),'key':_0x302ee3(0xa8),'width':0xa},{'header':_0x302ee3(0xa2),'key':_0x302ee3(0xd6),'width':0xa},{'header':_0x302ee3(0xee),'key':_0x302ee3(0xc2),'width':0xa},{'header':'address','key':_0x302ee3(0xcb),'width':0xa}],_0x5eba21[_0x302ee3(0xa0)](_0x302ee3(0x8d),_0x302ee3(0xbe)),_0x5eba21[_0x302ee3(0xa0)](_0x302ee3(0xc4),_0x302ee3(0xae)),_0x38ce6d[_0x302ee3(0x7f)][_0x302ee3(0xb7)](_0x5eba21)['then'](()=>{_0x5eba21['status'](0xc8);});}catch(_0xe5c807){_0x5eba21[_0x302ee3(0x99)](0x190)[_0x302ee3(0x9c)]({'errors':_0xe5c807['message']});}});const storage1=multer[a0_0x24bedf(0xd0)]({'destination':(_0x566cb8,_0x3d4b68,_0x192184)=>{const _0x301025=a0_0x24bedf;_0x192184(null,_0x301025(0x87));},'filename':(_0x137eab,_0x581fdd,_0x161a1f)=>{const _0x1e231c=a0_0x24bedf;_0x161a1f(null,Date[_0x1e231c(0xc0)]()+_0x581fdd[_0x1e231c(0xda)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x24bedf(0xcf)]('/supplier_import_migrate_file',auth,uploadMigrate['single'](a0_0x24bedf(0x94)),async(_0x394a37,_0x253987)=>{const _0x5bbf3b=a0_0x24bedf,_0x2c5787=_0x394a37[_0x5bbf3b(0xd1)]['filename'],_0x433046=await xlsx[_0x5bbf3b(0xe6)](_0x5bbf3b(0xdd)+_0x2c5787);let _0x5488b5=_0x433046['SheetNames'],_0x481b51=xlsx[_0x5bbf3b(0xaf)][_0x5bbf3b(0xeb)](_0x433046['Sheets'][_0x5488b5[0x0]]);for(const _0x3da006 of _0x481b51){const _0x3d7fbb=_0x3da006[_0x5bbf3b(0xd7)],_0xe48522=_0x3da006[_0x5bbf3b(0xaa)],_0x4e490e=_0x3da006['address'],_0x24c9c6=_0x3da006[_0x5bbf3b(0xa2)],_0xa197c2=_0x3da006['Email'],_0x5bd66c=_0x3da006['Company_Name'];try{let _0x26c1f9=await suppliers[_0x5bbf3b(0x95)]({'name':_0x3d7fbb});if(!_0x26c1f9){const _0x47c89b=new suppliers({'name':_0x3d7fbb,'suppliers_code':_0xe48522,'address':_0x4e490e,'mobile':_0x24c9c6,'email':_0xa197c2,'company':_0x5bd66c});_0x26c1f9=await _0x47c89b['save'](),_0x394a37[_0x5bbf3b(0xe3)]('success',_0x3d7fbb+_0x5bbf3b(0x80));}else _0x394a37[_0x5bbf3b(0xe3)](_0x5bbf3b(0xcc),_0x3d7fbb+_0x5bbf3b(0xd9));}catch(_0x1ab60b){_0x253987[_0x5bbf3b(0x99)](0x1f4)['json']({'proderror':_0x1ab60b['message'],'aproduct':ProductName});}}_0x253987[_0x5bbf3b(0xa3)](_0x5bbf3b(0xb8));}),module[a0_0x24bedf(0xbb)]=router;