function a0_0x5270(_0x338b9f,_0x1e3023){const _0x251985=a0_0x2519();return a0_0x5270=function(_0x5270a3,_0x298ebc){_0x5270a3=_0x5270a3-0xde;let _0x24e938=_0x251985[_0x5270a3];return _0x24e938;},a0_0x5270(_0x338b9f,_0x1e3023);}const a0_0x269f3c=a0_0x5270;(function(_0x23751e,_0x2378c5){const _0x18c20c=a0_0x5270,_0x2d1139=_0x23751e();while(!![]){try{const _0x47be0f=parseInt(_0x18c20c(0xec))/0x1*(parseInt(_0x18c20c(0x10d))/0x2)+parseInt(_0x18c20c(0x146))/0x3+-parseInt(_0x18c20c(0x112))/0x4*(-parseInt(_0x18c20c(0xeb))/0x5)+-parseInt(_0x18c20c(0x101))/0x6+-parseInt(_0x18c20c(0xfc))/0x7+-parseInt(_0x18c20c(0x12c))/0x8*(parseInt(_0x18c20c(0x10b))/0x9)+-parseInt(_0x18c20c(0x11d))/0xa;if(_0x47be0f===_0x2378c5)break;else _0x2d1139['push'](_0x2d1139['shift']());}catch(_0x4af17f){_0x2d1139['push'](_0x2d1139['shift']());}}}(a0_0x2519,0x880e8));const express=require('express'),app=express(),router=express[a0_0x269f3c(0xf9)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0x269f3c(0xef)),users=require(a0_0x269f3c(0x104)),excelJS=require(a0_0x269f3c(0x109)),xlsx=require(a0_0x269f3c(0x13a)),multer=require(a0_0x269f3c(0x113));function a0_0x2519(){const _0x1e63aa=['then','/view/:id','attachment;\x20filename=supplier_Migration_File.xlsx','3293915npTxzf','59XElxpV','receivable_sum','Spanish','../middleware/auth','English','supplier\x20data\x20add\x20successfully','status','sheet_to_json','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','single','columns','save','payable','Router','master','readFile','614544uJRycO','Arabic','now','doc','Workbook','6092574lIfhGd','forEach','setHeader','../public/language/languages.json','Company_Name','aggregate','success','post','exceljs','language','9clqeGg','email','35264jfDtxG','SalesmanName','filename','PBrands','Purchase\x20Return','4HJtXop','multer','Portuguese\x20(BR)','errors','\x20added\x20successfully','redirect','$amount','/view','public/Migration','English\x20(US)','map','5411210UkpMgE','supplier.js\x20payment_data','Portuguese','originalname','findOne','message','Name','findById','body','s_payments','receivable','suppliers_docs','amount','supplier','Chinese','3249144RVvHgp','user','purchase','log','Customers','Mobile_number','\x20Failed','French','get','Hindi','file','params','address','Content-Type','xlsx','German','reason','/supplier_import_migrate_file','$reason','SheetNames','Supplier_Code','suppliers_code','flash','name','/supplier/view','Purchase','2726106iVPpEk','company','find','Arabic\x20(ae)','public/Migration/','suppliers','Email','write','utils','supplier_payment','payable_sum','render'];a0_0x2519=function(){return _0x1e63aa;};return a0_0x2519();}router[a0_0x269f3c(0x134)](a0_0x269f3c(0x119),auth,async(_0x42da4e,_0x51d664)=>{const _0x13a1f3=a0_0x269f3c;try{const {username:_0x541d7d,email:_0x6dd40d,role:_0x44c0a3}=_0x42da4e[_0x13a1f3(0x12d)],_0xbcbfc1=_0x42da4e[_0x13a1f3(0x12d)],_0x2043b=await profile[_0x13a1f3(0x121)]({'email':_0xbcbfc1['email']}),_0xc8ddaf=await master_shop['find']();console[_0x13a1f3(0x12f)](_0x13a1f3(0xfa),_0xc8ddaf);const _0x3374cf=await suppliers[_0x13a1f3(0xde)]();console[_0x13a1f3(0x12f)](_0x3374cf);const _0x3a68ac=await suppliers[_0x13a1f3(0x106)]([{'$lookup':{'from':_0x13a1f3(0x126),'localField':_0x13a1f3(0x143),'foreignField':_0x13a1f3(0xe1),'as':'suppliers_docs'}}]),_0x344628=_0x3a68ac[_0x13a1f3(0x11c)](_0x230197=>{const _0x113ca8=_0x13a1f3;console[_0x113ca8(0x12f)]('data',_0x230197);var _0xe4e468=0x0,_0x1ab023=0x0;return _0x230197[_0x113ca8(0x128)][_0x113ca8(0x102)](_0x4caa8e=>{const _0x1694ab=_0x113ca8;console[_0x1694ab(0x12f)](_0x1694ab(0xff),_0x4caa8e),_0x4caa8e[_0x1694ab(0x13c)]==_0x1694ab(0x145)?_0xe4e468+=_0x4caa8e[_0x1694ab(0x129)]:_0x1ab023+=_0x4caa8e[_0x1694ab(0x129)];}),_0x230197[_0x113ca8(0x12e)]=_0xe4e468,_0x230197['purchase_return']=_0x1ab023,_0x230197;});console[_0x13a1f3(0x12f)](_0x13a1f3(0x11e),_0x344628);if(_0xc8ddaf[0x0][_0x13a1f3(0x10a)]==_0x13a1f3(0x11b)){var _0x3415f6=users[_0x13a1f3(0xf0)];console[_0x13a1f3(0x12f)](_0x3415f6);}else{if(_0xc8ddaf[0x0][_0x13a1f3(0x10a)]=='Hindi')var _0x3415f6=users[_0x13a1f3(0x135)];else{if(_0xc8ddaf[0x0][_0x13a1f3(0x10a)]=='German')var _0x3415f6=users[_0x13a1f3(0x13b)];else{if(_0xc8ddaf[0x0][_0x13a1f3(0x10a)]==_0x13a1f3(0xee))var _0x3415f6=users[_0x13a1f3(0xee)];else{if(_0xc8ddaf[0x0][_0x13a1f3(0x10a)]==_0x13a1f3(0x133))var _0x3415f6=users[_0x13a1f3(0x133)];else{if(_0xc8ddaf[0x0][_0x13a1f3(0x10a)]==_0x13a1f3(0x114))var _0x3415f6=users[_0x13a1f3(0x11f)];else{if(_0xc8ddaf[0x0][_0x13a1f3(0x10a)]=='Chinese')var _0x3415f6=users[_0x13a1f3(0x12b)];else{if(_0xc8ddaf[0x0][_0x13a1f3(0x10a)]==_0x13a1f3(0xdf))var _0x3415f6=users[_0x13a1f3(0xfd)];}}}}}}}_0x51d664[_0x13a1f3(0xe7)](_0x13a1f3(0x12a),{'success':_0x42da4e['flash'](_0x13a1f3(0x107)),'errors':_0x42da4e['flash'](_0x13a1f3(0x115)),'user':_0x3374cf,'profile':_0x2043b,'master_shop':_0xc8ddaf,'role':_0xbcbfc1,'payment':_0x344628,'language':_0x3415f6});}catch(_0x113996){console[_0x13a1f3(0x12f)](_0x113996);}}),router[a0_0x269f3c(0x108)](a0_0x269f3c(0x119),auth,async(_0x5d6bec,_0x568b04)=>{const _0x344c5d=a0_0x269f3c;try{const {name:_0x31d85b,email:_0x39a069,mobile:_0x38e70b,company:_0x554abb,address:_0xf3ce37,receivable:_0x4a47cc,payable:_0x35d57c,code:_0x2f7fbd,contactperson:_0x48c3d6,landline:_0x108b22}=_0x5d6bec[_0x344c5d(0x125)],_0x4e4f2e=new suppliers({'name':_0x31d85b,'email':_0x39a069,'mobile':_0x38e70b,'company':_0x554abb,'address':_0xf3ce37,'receivable':_0x4a47cc,'payable':_0x35d57c,'suppliers_code':_0x2f7fbd,'contactperson':_0x48c3d6,'landline':_0x108b22}),_0x3239b3=await _0x4e4f2e[_0x344c5d(0xf7)]();_0x5d6bec['flash'](_0x344c5d(0x107),_0x344c5d(0xf1)),_0x568b04[_0x344c5d(0x117)]('/supplier/view');}catch(_0x5ab9f9){console[_0x344c5d(0x12f)](_0x5ab9f9);}}),router[a0_0x269f3c(0x134)](a0_0x269f3c(0xe9),auth,async(_0x2730fb,_0x3d66b8)=>{const _0x157dd0=a0_0x269f3c;try{const {username:_0x3b1117,email:_0x43bb6f,role:_0x823501}=_0x2730fb['user'],_0x2b4757=_0x2730fb[_0x157dd0(0x12d)],_0x1404b0=await profile[_0x157dd0(0x121)]({'email':_0x2b4757[_0x157dd0(0x10c)]}),_0x2afcbb=await master_shop['find']();console[_0x157dd0(0x12f)](_0x157dd0(0xfa),_0x2afcbb);const _0x37bdf2=_0x2730fb[_0x157dd0(0x137)]['id'],_0x31f55f=await suppliers['findById'](_0x37bdf2);console['log'](_0x31f55f);if(_0x2afcbb[0x0]['language']==_0x157dd0(0x11b)){var _0x200614=users[_0x157dd0(0xf0)];console['log'](_0x200614);}else{if(_0x2afcbb[0x0][_0x157dd0(0x10a)]==_0x157dd0(0x135))var _0x200614=users['Hindi'];else{if(_0x2afcbb[0x0][_0x157dd0(0x10a)]==_0x157dd0(0x13b))var _0x200614=users[_0x157dd0(0x13b)];else{if(_0x2afcbb[0x0][_0x157dd0(0x10a)]=='Spanish')var _0x200614=users[_0x157dd0(0xee)];else{if(_0x2afcbb[0x0][_0x157dd0(0x10a)]==_0x157dd0(0x133))var _0x200614=users[_0x157dd0(0x133)];else{if(_0x2afcbb[0x0][_0x157dd0(0x10a)]==_0x157dd0(0x114))var _0x200614=users[_0x157dd0(0x11f)];else{if(_0x2afcbb[0x0][_0x157dd0(0x10a)]==_0x157dd0(0x12b))var _0x200614=users['Chinese'];else{if(_0x2afcbb[0x0][_0x157dd0(0x10a)]=='Arabic\x20(ae)')var _0x200614=users['Arabic'];}}}}}}}_0x3d66b8[_0x157dd0(0xe7)]('supplier',{'success':_0x2730fb[_0x157dd0(0x142)](_0x157dd0(0x107)),'errors':_0x2730fb[_0x157dd0(0x142)](_0x157dd0(0x115)),'role':_0x2b4757,'profile':_0x1404b0,'master_shop':_0x2afcbb,'user':_0x31f55f,'language':_0x200614});}catch(_0x4a01af){console[_0x157dd0(0x12f)](_0x4a01af);}}),router[a0_0x269f3c(0x108)](a0_0x269f3c(0xe9),auth,async(_0x2d0315,_0x2f4bd4)=>{const _0x24e9fc=a0_0x269f3c;try{const _0x152a7d=_0x2d0315[_0x24e9fc(0x137)]['id'],_0x116a59=await suppliers[_0x24e9fc(0x124)](_0x152a7d),{name:_0x390f0a,email:_0x22d2d3,mobile:_0x1747a7,company:_0x43a047,address:_0x594e6e,receivable:_0x44a7c3,payable:_0x58d6b5,code:_0x509e1a,contactperson:_0x422275,landline:_0x3b72f2}=_0x2d0315['body'];_0x116a59[_0x24e9fc(0x143)]=_0x390f0a,_0x116a59['email']=_0x22d2d3,_0x116a59['mobile']=_0x1747a7,_0x116a59[_0x24e9fc(0x147)]=_0x43a047,_0x116a59[_0x24e9fc(0x138)]=_0x594e6e,_0x116a59[_0x24e9fc(0x127)]=_0x44a7c3,_0x116a59[_0x24e9fc(0xf8)]=_0x58d6b5,_0x116a59[_0x24e9fc(0x141)]=_0x509e1a,_0x116a59['contactperson']=_0x422275,_0x116a59['landline']=_0x3b72f2;const _0x4ab0de=await _0x116a59[_0x24e9fc(0xf7)]();_0x2d0315[_0x24e9fc(0x142)]('success','supplier\x20data\x20update\x20successfully'),_0x2f4bd4[_0x24e9fc(0x117)](_0x24e9fc(0x144));}catch(_0x4da970){console[_0x24e9fc(0x12f)](_0x4da970);}}),router[a0_0x269f3c(0x134)]('/view/payment/:id',auth,async(_0xb8c1b3,_0x13b123)=>{const _0x11ca94=a0_0x269f3c;try{const {username:_0x19befa,email:_0x13759a,role:_0x498161}=_0xb8c1b3[_0x11ca94(0x12d)],_0x12ad21=_0xb8c1b3[_0x11ca94(0x12d)],_0x111750=await profile[_0x11ca94(0x121)]({'email':_0x12ad21[_0x11ca94(0x10c)]}),_0x239c2a=await master_shop['find']();console[_0x11ca94(0x12f)](_0x11ca94(0xfa),_0x239c2a),console[_0x11ca94(0x12f)](_0xb8c1b3[_0x11ca94(0x137)]['id']);const _0x1ee1b4=await suppliers[_0x11ca94(0x121)]({'_id':_0xb8c1b3[_0x11ca94(0x137)]['id']});console[_0x11ca94(0x12f)](_0x1ee1b4);const _0x57a44f=await s_payment_data['find']({'suppliers':_0x1ee1b4[_0x11ca94(0x143)]});console['log'](_0x57a44f);const _0x27e288=await s_payment_data[_0x11ca94(0x106)]([{'$match':{'suppliers':_0x1ee1b4[_0x11ca94(0x143)]}},{'$match':{'reason':_0x11ca94(0x145)}},{'$group':{'_id':_0x11ca94(0x13e),'sum':{'$sum':_0x11ca94(0x118)}}}]);console[_0x11ca94(0x12f)](_0x11ca94(0xe6),_0x27e288);const _0x147f4e=await s_payment_data[_0x11ca94(0x106)]([{'$match':{'suppliers':_0x1ee1b4[_0x11ca94(0x143)]}},{'$match':{'reason':_0x11ca94(0x111)}},{'$group':{'_id':_0x11ca94(0x13e),'sum':{'$sum':_0x11ca94(0x118)}}}]);console[_0x11ca94(0x12f)](_0x11ca94(0xed),_0x147f4e);if(_0x239c2a[0x0][_0x11ca94(0x10a)]=='English\x20(US)'){var _0x447f91=users['English'];console[_0x11ca94(0x12f)](_0x447f91);}else{if(_0x239c2a[0x0][_0x11ca94(0x10a)]==_0x11ca94(0x135))var _0x447f91=users[_0x11ca94(0x135)];else{if(_0x239c2a[0x0][_0x11ca94(0x10a)]==_0x11ca94(0x13b))var _0x447f91=users[_0x11ca94(0x13b)];else{if(_0x239c2a[0x0][_0x11ca94(0x10a)]==_0x11ca94(0xee))var _0x447f91=users[_0x11ca94(0xee)];else{if(_0x239c2a[0x0]['language']==_0x11ca94(0x133))var _0x447f91=users[_0x11ca94(0x133)];else{if(_0x239c2a[0x0]['language']=='Portuguese\x20(BR)')var _0x447f91=users[_0x11ca94(0x11f)];else{if(_0x239c2a[0x0][_0x11ca94(0x10a)]==_0x11ca94(0x12b))var _0x447f91=users[_0x11ca94(0x12b)];else{if(_0x239c2a[0x0][_0x11ca94(0x10a)]==_0x11ca94(0xdf))var _0x447f91=users[_0x11ca94(0xfd)];}}}}}}}_0x13b123['render'](_0x11ca94(0xe5),{'success':_0xb8c1b3['flash'](_0x11ca94(0x107)),'errors':_0xb8c1b3[_0x11ca94(0x142)](_0x11ca94(0x115)),'role':_0x12ad21,'profile':_0x111750,'master_shop':_0x239c2a,'payment':_0x57a44f,'payable':_0x27e288,'receivable':_0x147f4e,'language':_0x447f91});}catch(_0x46c196){console[_0x11ca94(0x12f)](_0x46c196);}}),router[a0_0x269f3c(0x134)]('/products_export_migrate_file',auth,async(_0x258fe8,_0x28d7cf)=>{const _0x2d9793=a0_0x269f3c;try{const _0x49cd23=new excelJS[(_0x2d9793(0x100))](),_0x2ebf39=_0x49cd23['addWorksheet'](_0x2d9793(0x130));return _0x2ebf39[_0x2d9793(0xf6)]=[{'header':_0x2d9793(0x123),'key':_0x2d9793(0x110),'width':0xa},{'header':'Supplier_Code','key':'PUnits','width':0xa},{'header':'Email','key':_0x2d9793(0x10e),'width':0xa},{'header':'Mobile_number','key':_0x2d9793(0x138),'width':0xa},{'header':_0x2d9793(0x105),'key':'mobile','width':0xa},{'header':_0x2d9793(0x138),'key':'email','width':0xa}],_0x28d7cf['setHeader'](_0x2d9793(0x139),_0x2d9793(0xf4)),_0x28d7cf[_0x2d9793(0x103)]('Content-Disposition',_0x2d9793(0xea)),_0x49cd23[_0x2d9793(0x13a)][_0x2d9793(0xe3)](_0x28d7cf)[_0x2d9793(0xe8)](()=>{const _0x4fb6bb=_0x2d9793;_0x28d7cf[_0x4fb6bb(0xf2)](0xc8);});}catch(_0xf37018){_0x28d7cf[_0x2d9793(0xf2)](0x190)['send']({'errors':_0xf37018[_0x2d9793(0x122)]});}});const storage1=multer['diskStorage']({'destination':(_0x559501,_0x571cf9,_0x494cb8)=>{const _0x3cf87a=a0_0x269f3c;_0x494cb8(null,_0x3cf87a(0x11a));},'filename':(_0x514347,_0x22b0c0,_0xb31726)=>{const _0x5ae472=a0_0x269f3c;_0xb31726(null,Date[_0x5ae472(0xfe)]()+_0x22b0c0[_0x5ae472(0x120)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x269f3c(0x108)](a0_0x269f3c(0x13d),auth,uploadMigrate[a0_0x269f3c(0xf5)]('supplier_product_file'),async(_0x1573b0,_0xd77f7d)=>{const _0x420184=a0_0x269f3c,_0x5dc61e=_0x1573b0[_0x420184(0x136)][_0x420184(0x10f)],_0x3dcd18=await xlsx[_0x420184(0xfb)](_0x420184(0xe0)+_0x5dc61e);let _0x1366a9=_0x3dcd18[_0x420184(0x13f)],_0x2a2f1c=xlsx[_0x420184(0xe4)][_0x420184(0xf3)](_0x3dcd18['Sheets'][_0x1366a9[0x0]]);for(const _0x40f55e of _0x2a2f1c){const _0x22546e=_0x40f55e[_0x420184(0x123)],_0x13228c=_0x40f55e[_0x420184(0x140)],_0xd5ea88=_0x40f55e[_0x420184(0x138)],_0x4bc28b=_0x40f55e[_0x420184(0x131)],_0x6f1043=_0x40f55e[_0x420184(0xe2)],_0x5369cd=_0x40f55e[_0x420184(0x105)];try{let _0x3fdf15=await suppliers[_0x420184(0x121)]({'name':_0x22546e});if(!_0x3fdf15){const _0x4b31f0=new suppliers({'name':_0x22546e,'suppliers_code':_0x13228c,'address':_0xd5ea88,'mobile':_0x4bc28b,'email':_0x6f1043,'company':_0x5369cd});_0x3fdf15=await _0x4b31f0[_0x420184(0xf7)](),_0x1573b0[_0x420184(0x142)](_0x420184(0x107),_0x22546e+_0x420184(0x116));}else _0x1573b0[_0x420184(0x142)]('error',_0x22546e+_0x420184(0x132));}catch(_0x1e4468){_0xd77f7d[_0x420184(0xf2)](0x1f4)['json']({'proderror':_0x1e4468[_0x420184(0x122)],'aproduct':ProductName});}}_0xd77f7d[_0x420184(0x117)](_0x420184(0x144));}),module['exports']=router;