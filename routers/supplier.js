const a0_0x67d7b4=a0_0x41a6;function a0_0x41a6(_0x528036,_0x4cd211){const _0x3efd41=a0_0x3efd();return a0_0x41a6=function(_0x41a648,_0x4490e3){_0x41a648=_0x41a648-0x11d;let _0x30b65d=_0x3efd41[_0x41a648];return _0x30b65d;},a0_0x41a6(_0x528036,_0x4cd211);}(function(_0x2e550c,_0x5e13f2){const _0x54384c=a0_0x41a6,_0x1a1dc3=_0x2e550c();while(!![]){try{const _0xd7bd0d=-parseInt(_0x54384c(0x156))/0x1+-parseInt(_0x54384c(0x15f))/0x2*(-parseInt(_0x54384c(0x123))/0x3)+parseInt(_0x54384c(0x155))/0x4*(-parseInt(_0x54384c(0x131))/0x5)+parseInt(_0x54384c(0x15c))/0x6+parseInt(_0x54384c(0x178))/0x7+-parseInt(_0x54384c(0x13d))/0x8+-parseInt(_0x54384c(0x164))/0x9*(parseInt(_0x54384c(0x18a))/0xa);if(_0xd7bd0d===_0x5e13f2)break;else _0x1a1dc3['push'](_0x1a1dc3['shift']());}catch(_0x26d4e0){_0x1a1dc3['push'](_0x1a1dc3['shift']());}}}(a0_0x3efd,0xb0df0));const express=require(a0_0x67d7b4(0x14a)),app=express(),router=express[a0_0x67d7b4(0x132)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x67d7b4(0x125)),auth=require(a0_0x67d7b4(0x185)),users=require(a0_0x67d7b4(0x16e)),excelJS=require(a0_0x67d7b4(0x187)),xlsx=require(a0_0x67d7b4(0x147)),multer=require('multer');router[a0_0x67d7b4(0x173)](a0_0x67d7b4(0x179),auth,async(_0x51ba17,_0x2801ae)=>{const _0x2ec1ee=a0_0x67d7b4;try{const {username:_0x5f367e,email:_0x506d91,role:_0x1f3791}=_0x51ba17[_0x2ec1ee(0x12d)],_0x5317b3=_0x51ba17['user'],_0x574965=await profile['findOne']({'email':_0x5317b3['email']}),_0x5c182d=await master_shop[_0x2ec1ee(0x152)]();console[_0x2ec1ee(0x181)]('master',_0x5c182d);const _0x40dc06=await suppliers[_0x2ec1ee(0x152)]();console[_0x2ec1ee(0x181)](_0x40dc06);const _0x4a0c0e=await suppliers[_0x2ec1ee(0x133)]([{'$lookup':{'from':_0x2ec1ee(0x144),'localField':_0x2ec1ee(0x176),'foreignField':_0x2ec1ee(0x188),'as':_0x2ec1ee(0x159)}}]),_0xa75923=_0x4a0c0e['map'](_0x5437ed=>{const _0x886bb=_0x2ec1ee;console['log'](_0x886bb(0x121),_0x5437ed);var _0x29bd04=0x0,_0x5525ed=0x0;return _0x5437ed[_0x886bb(0x159)][_0x886bb(0x13b)](_0x51a8b8=>{const _0x3a27a1=_0x886bb;console[_0x3a27a1(0x181)](_0x3a27a1(0x15d),_0x51a8b8),_0x51a8b8[_0x3a27a1(0x166)]==_0x3a27a1(0x122)?_0x29bd04+=_0x51a8b8[_0x3a27a1(0x182)]:_0x5525ed+=_0x51a8b8[_0x3a27a1(0x182)];}),_0x5437ed[_0x886bb(0x18f)]=_0x29bd04,_0x5437ed[_0x886bb(0x189)]=_0x5525ed,_0x5437ed;});console['log'](_0x2ec1ee(0x18e),_0xa75923);if(_0x5c182d[0x0][_0x2ec1ee(0x136)]==_0x2ec1ee(0x17c)){var _0x241e1d=users[_0x2ec1ee(0x145)];console['log'](_0x241e1d);}else{if(_0x5c182d[0x0][_0x2ec1ee(0x136)]==_0x2ec1ee(0x148))var _0x241e1d=users['Hindi'];else{if(_0x5c182d[0x0][_0x2ec1ee(0x136)]==_0x2ec1ee(0x126))var _0x241e1d=users[_0x2ec1ee(0x126)];else{if(_0x5c182d[0x0][_0x2ec1ee(0x136)]=='Spanish')var _0x241e1d=users[_0x2ec1ee(0x17d)];else{if(_0x5c182d[0x0]['language']=='French')var _0x241e1d=users[_0x2ec1ee(0x151)];else{if(_0x5c182d[0x0][_0x2ec1ee(0x136)]==_0x2ec1ee(0x13c))var _0x241e1d=users[_0x2ec1ee(0x18d)];else{if(_0x5c182d[0x0][_0x2ec1ee(0x136)]==_0x2ec1ee(0x16f))var _0x241e1d=users['Chinese'];else{if(_0x5c182d[0x0][_0x2ec1ee(0x136)]=='Arabic\x20(ae)')var _0x241e1d=users[_0x2ec1ee(0x186)];}}}}}}}_0x2801ae[_0x2ec1ee(0x120)](_0x2ec1ee(0x17a),{'success':_0x51ba17[_0x2ec1ee(0x129)](_0x2ec1ee(0x11e)),'errors':_0x51ba17['flash'](_0x2ec1ee(0x130)),'user':_0x40dc06,'profile':_0x574965,'master_shop':_0x5c182d,'role':_0x5317b3,'payment':_0xa75923,'language':_0x241e1d});}catch(_0x3e9083){console['log'](_0x3e9083);}}),router[a0_0x67d7b4(0x15a)](a0_0x67d7b4(0x179),auth,async(_0x3009ec,_0x27a0ce)=>{const _0x3bc78b=a0_0x67d7b4;try{const {name:_0x365d94,email:_0x12c425,mobile:_0x1fe91f,company:_0x5188c5,address:_0x54d6f6,receivable:_0x2356b7,payable:_0x15c664,code:_0x567e4b,contactperson:_0x2052c1,landline:_0x131838}=_0x3009ec[_0x3bc78b(0x165)],_0x69e3ba=new suppliers({'name':_0x365d94,'email':_0x12c425,'mobile':_0x1fe91f,'company':_0x5188c5,'address':_0x54d6f6,'receivable':_0x2356b7,'payable':_0x15c664,'suppliers_code':_0x567e4b,'contactperson':_0x2052c1,'landline':_0x131838}),_0x175a96=await _0x69e3ba[_0x3bc78b(0x16b)]();_0x3009ec[_0x3bc78b(0x129)](_0x3bc78b(0x11e),'supplier\x20data\x20add\x20successfully'),_0x27a0ce[_0x3bc78b(0x135)]('/supplier/view');}catch(_0x160366){console[_0x3bc78b(0x181)](_0x160366);}}),router[a0_0x67d7b4(0x173)](a0_0x67d7b4(0x12b),auth,async(_0x4f4a3e,_0x421e77)=>{const _0xc01d88=a0_0x67d7b4;try{const {username:_0x1b4458,email:_0x27c8f0,role:_0x17e029}=_0x4f4a3e['user'],_0x52f3db=_0x4f4a3e['user'],_0x571bf2=await profile[_0xc01d88(0x17f)]({'email':_0x52f3db[_0xc01d88(0x12c)]}),_0x2f1903=await master_shop[_0xc01d88(0x152)]();console[_0xc01d88(0x181)](_0xc01d88(0x12f),_0x2f1903);const _0x333f96=_0x4f4a3e[_0xc01d88(0x14c)]['id'],_0x2edbc8=await suppliers[_0xc01d88(0x146)](_0x333f96);console[_0xc01d88(0x181)](_0x2edbc8);if(_0x2f1903[0x0]['language']==_0xc01d88(0x17c)){var _0x1f9d3e=users['English'];console[_0xc01d88(0x181)](_0x1f9d3e);}else{if(_0x2f1903[0x0]['language']=='Hindi')var _0x1f9d3e=users[_0xc01d88(0x148)];else{if(_0x2f1903[0x0]['language']=='German')var _0x1f9d3e=users[_0xc01d88(0x126)];else{if(_0x2f1903[0x0][_0xc01d88(0x136)]==_0xc01d88(0x17d))var _0x1f9d3e=users['Spanish'];else{if(_0x2f1903[0x0][_0xc01d88(0x136)]==_0xc01d88(0x151))var _0x1f9d3e=users['French'];else{if(_0x2f1903[0x0][_0xc01d88(0x136)]=='Portuguese\x20(BR)')var _0x1f9d3e=users[_0xc01d88(0x18d)];else{if(_0x2f1903[0x0][_0xc01d88(0x136)]=='Chinese')var _0x1f9d3e=users[_0xc01d88(0x16f)];else{if(_0x2f1903[0x0][_0xc01d88(0x136)]=='Arabic\x20(ae)')var _0x1f9d3e=users[_0xc01d88(0x186)];}}}}}}}_0x421e77['render'](_0xc01d88(0x17a),{'success':_0x4f4a3e[_0xc01d88(0x129)](_0xc01d88(0x11e)),'errors':_0x4f4a3e['flash']('errors'),'role':_0x52f3db,'profile':_0x571bf2,'master_shop':_0x2f1903,'user':_0x2edbc8,'language':_0x1f9d3e});}catch(_0x1aeb1b){console[_0xc01d88(0x181)](_0x1aeb1b);}}),router['post'](a0_0x67d7b4(0x12b),auth,async(_0x20f297,_0x3b21d0)=>{const _0x314c36=a0_0x67d7b4;try{const _0x560c86=_0x20f297[_0x314c36(0x14c)]['id'],_0x449986=await suppliers[_0x314c36(0x146)](_0x560c86),{name:_0x5aef12,email:_0x63e6cb,mobile:_0x54a8b3,company:_0x44b36c,address:_0x4b4568,receivable:_0x13c8d2,payable:_0x300bc8,code:_0x3120ab,contactperson:_0x18863a,landline:_0x3ec153}=_0x20f297[_0x314c36(0x165)];_0x449986['name']=_0x5aef12,_0x449986[_0x314c36(0x12c)]=_0x63e6cb,_0x449986['mobile']=_0x54a8b3,_0x449986[_0x314c36(0x143)]=_0x44b36c,_0x449986[_0x314c36(0x175)]=_0x4b4568,_0x449986['receivable']=_0x13c8d2,_0x449986[_0x314c36(0x17e)]=_0x300bc8,_0x449986[_0x314c36(0x154)]=_0x3120ab,_0x449986[_0x314c36(0x14f)]=_0x18863a,_0x449986['landline']=_0x3ec153;const _0x43ae9d=await _0x449986['save']();_0x20f297[_0x314c36(0x129)](_0x314c36(0x11e),_0x314c36(0x149)),_0x3b21d0[_0x314c36(0x135)](_0x314c36(0x153));}catch(_0x52af04){console[_0x314c36(0x181)](_0x52af04);}}),router['get'](a0_0x67d7b4(0x15e),auth,async(_0x466a55,_0x472a58)=>{const _0x9a3bf6=a0_0x67d7b4;try{const {username:_0x440567,email:_0x32aed5,role:_0x4ffbdc}=_0x466a55[_0x9a3bf6(0x12d)],_0x4d7176=_0x466a55[_0x9a3bf6(0x12d)],_0x4c4536=await profile['findOne']({'email':_0x4d7176['email']}),_0x435cf7=await master_shop[_0x9a3bf6(0x152)]();console[_0x9a3bf6(0x181)](_0x9a3bf6(0x12f),_0x435cf7),console[_0x9a3bf6(0x181)](_0x466a55[_0x9a3bf6(0x14c)]['id']);const _0x1cf742=await suppliers['findOne']({'_id':_0x466a55[_0x9a3bf6(0x14c)]['id']});console[_0x9a3bf6(0x181)](_0x1cf742);const _0x20d664=await s_payment_data[_0x9a3bf6(0x152)]({'suppliers':_0x1cf742[_0x9a3bf6(0x176)]});console['log'](_0x20d664);const _0x991acf=await s_payment_data[_0x9a3bf6(0x133)]([{'$match':{'suppliers':_0x1cf742[_0x9a3bf6(0x176)]}},{'$match':{'reason':_0x9a3bf6(0x122)}},{'$group':{'_id':_0x9a3bf6(0x18b),'sum':{'$sum':'$amount'}}}]);console[_0x9a3bf6(0x181)](_0x9a3bf6(0x167),_0x991acf);const _0x4e9e0d=await s_payment_data[_0x9a3bf6(0x133)]([{'$match':{'suppliers':_0x1cf742[_0x9a3bf6(0x176)]}},{'$match':{'reason':_0x9a3bf6(0x168)}},{'$group':{'_id':_0x9a3bf6(0x18b),'sum':{'$sum':_0x9a3bf6(0x162)}}}]);console['log'](_0x9a3bf6(0x172),_0x4e9e0d);if(_0x435cf7[0x0][_0x9a3bf6(0x136)]==_0x9a3bf6(0x17c)){var _0xb79a01=users[_0x9a3bf6(0x145)];console[_0x9a3bf6(0x181)](_0xb79a01);}else{if(_0x435cf7[0x0][_0x9a3bf6(0x136)]=='Hindi')var _0xb79a01=users[_0x9a3bf6(0x148)];else{if(_0x435cf7[0x0]['language']=='German')var _0xb79a01=users[_0x9a3bf6(0x126)];else{if(_0x435cf7[0x0]['language']==_0x9a3bf6(0x17d))var _0xb79a01=users[_0x9a3bf6(0x17d)];else{if(_0x435cf7[0x0][_0x9a3bf6(0x136)]==_0x9a3bf6(0x151))var _0xb79a01=users['French'];else{if(_0x435cf7[0x0][_0x9a3bf6(0x136)]==_0x9a3bf6(0x13c))var _0xb79a01=users[_0x9a3bf6(0x18d)];else{if(_0x435cf7[0x0][_0x9a3bf6(0x136)]==_0x9a3bf6(0x16f))var _0xb79a01=users[_0x9a3bf6(0x16f)];else{if(_0x435cf7[0x0][_0x9a3bf6(0x136)]==_0x9a3bf6(0x124))var _0xb79a01=users[_0x9a3bf6(0x186)];}}}}}}}_0x472a58[_0x9a3bf6(0x120)](_0x9a3bf6(0x142),{'success':_0x466a55[_0x9a3bf6(0x129)](_0x9a3bf6(0x11e)),'errors':_0x466a55[_0x9a3bf6(0x129)](_0x9a3bf6(0x130)),'role':_0x4d7176,'profile':_0x4c4536,'master_shop':_0x435cf7,'payment':_0x20d664,'payable':_0x991acf,'receivable':_0x4e9e0d,'language':_0xb79a01});}catch(_0x25583d){console[_0x9a3bf6(0x181)](_0x25583d);}}),router[a0_0x67d7b4(0x173)](a0_0x67d7b4(0x171),auth,async(_0xa0fc0c,_0x5427e6)=>{const _0x35e884=a0_0x67d7b4;try{const _0x28c737=new excelJS['Workbook'](),_0x5e6173=_0x28c737[_0x35e884(0x163)](_0x35e884(0x137));return _0x5e6173[_0x35e884(0x158)]=[{'header':'Name','key':_0x35e884(0x169),'width':0xa},{'header':_0x35e884(0x183),'key':_0x35e884(0x15b),'width':0xa},{'header':_0x35e884(0x157),'key':_0x35e884(0x139),'width':0xa},{'header':_0x35e884(0x14e),'key':_0x35e884(0x175),'width':0xa},{'header':_0x35e884(0x16c),'key':'mobile','width':0xa},{'header':_0x35e884(0x175),'key':_0x35e884(0x12c),'width':0xa}],_0x5427e6[_0x35e884(0x13f)](_0x35e884(0x14b),_0x35e884(0x161)),_0x5427e6[_0x35e884(0x13f)](_0x35e884(0x127),_0x35e884(0x128)),_0x28c737[_0x35e884(0x147)][_0x35e884(0x13a)](_0x5427e6)[_0x35e884(0x12e)](()=>{const _0x1fbaf8=_0x35e884;_0x5427e6[_0x1fbaf8(0x184)](0xc8);});}catch(_0x7487f3){_0x5427e6[_0x35e884(0x184)](0x190)['send']({'errors':_0x7487f3[_0x35e884(0x13e)]});}});const storage1=multer[a0_0x67d7b4(0x174)]({'destination':(_0x166979,_0x49181e,_0x4985a0)=>{const _0x1ca513=a0_0x67d7b4;_0x4985a0(null,_0x1ca513(0x141));},'filename':(_0x1f289a,_0x224802,_0x39792d)=>{const _0x363b21=a0_0x67d7b4;_0x39792d(null,Date['now']()+_0x224802[_0x363b21(0x138)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x3efd(){const _0x322e28=['contactperson','sheet_to_json','French','find','/supplier/view','suppliers_code','4uqvJCk','981810sDTEXZ','Email','columns','suppliers_docs','post','PUnits','8024304nFJZfn','doc','/view/payment/:id','2368892qortQD','readFile','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','$amount','addWorksheet','7362BkILkS','body','reason','payable_sum','Purchase\x20Return','PBrands','\x20Failed','save','Company_Name','Sheets','../public/language/languages.json','Chinese','utils','/products_export_migrate_file','receivable_sum','get','diskStorage','address','name','file','8489705WLzTRP','/view','supplier','error','English\x20(US)','Spanish','payable','findOne','/supplier_import_migrate_file','log','amount','Supplier_Code','status','../middleware/auth','Arabic','exceljs','suppliers','purchase_return','6910RVtCxw','$reason','Name','Portuguese','supplier.js\x20payment_data','purchase','exports','success','filename','render','data','Purchase','3Rtnmbt','Arabic\x20(ae)','../models/all_models','German','Content-Disposition','attachment;\x20filename=supplier_Migration_File.xlsx','flash','\x20added\x20successfully','/view/:id','email','user','then','master','errors','5531465colmko','Router','aggregate','supplier_product_file','redirect','language','Customers','originalname','SalesmanName','write','forEach','Portuguese\x20(BR)','2854720wFpodH','message','setHeader','json','public/Migration','supplier_payment','company','s_payments','English','findById','xlsx','Hindi','supplier\x20data\x20update\x20successfully','express','Content-Type','params','SheetNames','Mobile_number'];a0_0x3efd=function(){return _0x322e28;};return a0_0x3efd();}router['post'](a0_0x67d7b4(0x180),auth,uploadMigrate['single'](a0_0x67d7b4(0x134)),async(_0x377688,_0xc71d1e)=>{const _0xeef2c5=a0_0x67d7b4,_0x1525d0=_0x377688[_0xeef2c5(0x177)][_0xeef2c5(0x11f)],_0x3f4832=await xlsx[_0xeef2c5(0x160)]('public/Migration/'+_0x1525d0);let _0x88bb9c=_0x3f4832[_0xeef2c5(0x14d)],_0x2b5a05=xlsx[_0xeef2c5(0x170)][_0xeef2c5(0x150)](_0x3f4832[_0xeef2c5(0x16d)][_0x88bb9c[0x0]]);for(const _0x26d1b of _0x2b5a05){const _0x1c6343=_0x26d1b[_0xeef2c5(0x18c)],_0x486f1d=_0x26d1b[_0xeef2c5(0x183)],_0x5d7ab7=_0x26d1b[_0xeef2c5(0x175)],_0x8c9187=_0x26d1b[_0xeef2c5(0x14e)],_0x1442bd=_0x26d1b[_0xeef2c5(0x157)],_0x22370b=_0x26d1b[_0xeef2c5(0x16c)];try{let _0xc9eaa=await suppliers[_0xeef2c5(0x17f)]({'name':_0x1c6343});if(!_0xc9eaa){const _0x46b018=new suppliers({'name':_0x1c6343,'suppliers_code':_0x486f1d,'address':_0x5d7ab7,'mobile':_0x8c9187,'email':_0x1442bd,'company':_0x22370b});_0xc9eaa=await _0x46b018['save'](),_0x377688['flash']('success',_0x1c6343+_0xeef2c5(0x12a));}else _0x377688[_0xeef2c5(0x129)](_0xeef2c5(0x17b),_0x1c6343+_0xeef2c5(0x16a));}catch(_0x132604){_0xc71d1e[_0xeef2c5(0x184)](0x1f4)[_0xeef2c5(0x140)]({'proderror':_0x132604[_0xeef2c5(0x13e)],'aproduct':ProductName});}}_0xc71d1e['redirect'](_0xeef2c5(0x153));}),module[a0_0x67d7b4(0x11d)]=router;