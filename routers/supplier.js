function a0_0x17ae(_0x4204d0,_0x3eddaa){const _0x406036=a0_0x4060();return a0_0x17ae=function(_0x17ae25,_0x128b83){_0x17ae25=_0x17ae25-0x1a2;let _0x42e5fe=_0x406036[_0x17ae25];return _0x42e5fe;},a0_0x17ae(_0x4204d0,_0x3eddaa);}const a0_0x5bf212=a0_0x17ae;(function(_0x3c0153,_0x445dbf){const _0x1cd390=a0_0x17ae,_0xcdb98f=_0x3c0153();while(!![]){try{const _0x1500dd=-parseInt(_0x1cd390(0x209))/0x1*(-parseInt(_0x1cd390(0x1c1))/0x2)+-parseInt(_0x1cd390(0x1be))/0x3+-parseInt(_0x1cd390(0x1e1))/0x4*(-parseInt(_0x1cd390(0x1d9))/0x5)+parseInt(_0x1cd390(0x1f5))/0x6+parseInt(_0x1cd390(0x1f6))/0x7+parseInt(_0x1cd390(0x1b3))/0x8+-parseInt(_0x1cd390(0x207))/0x9;if(_0x1500dd===_0x445dbf)break;else _0xcdb98f['push'](_0xcdb98f['shift']());}catch(_0x4b5f4c){_0xcdb98f['push'](_0xcdb98f['shift']());}}}(a0_0x4060,0xb2732));const express=require('express'),app=express(),router=express[a0_0x5bf212(0x1d0)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x5bf212(0x1d7)),auth=require(a0_0x5bf212(0x1cb)),users=require(a0_0x5bf212(0x1b6)),excelJS=require(a0_0x5bf212(0x1d8)),xlsx=require(a0_0x5bf212(0x1df)),multer=require(a0_0x5bf212(0x1c9));router['get'](a0_0x5bf212(0x1ce),auth,async(_0x20542e,_0x5ddc62)=>{const _0x511627=a0_0x5bf212;try{const {username:_0x1600cd,email:_0x5f0c07,role:_0x1914f8}=_0x20542e[_0x511627(0x1ea)],_0x521fc9=_0x20542e[_0x511627(0x1ea)],_0x413880=await profile[_0x511627(0x1a3)]({'email':_0x521fc9[_0x511627(0x1ac)]}),_0x2b9bfa=await master_shop[_0x511627(0x1b5)]();console[_0x511627(0x1ae)](_0x511627(0x1bc),_0x2b9bfa);const _0x55a365=await suppliers['find']();console[_0x511627(0x1ae)](_0x55a365);const _0x126953=await suppliers[_0x511627(0x1fb)]([{'$lookup':{'from':_0x511627(0x1fc),'localField':_0x511627(0x1de),'foreignField':_0x511627(0x1d5),'as':_0x511627(0x1dd)}}]),_0x2a0d74=_0x126953[_0x511627(0x201)](_0x126ad6=>{const _0x451049=_0x511627;console['log'](_0x451049(0x1f7),_0x126ad6);var _0x48ca4b=0x0,_0x1be55c=0x0;return _0x126ad6[_0x451049(0x1dd)][_0x451049(0x1c2)](_0x59ab5f=>{const _0x4bb2b6=_0x451049;console[_0x4bb2b6(0x1ae)]('doc',_0x59ab5f),_0x59ab5f[_0x4bb2b6(0x1a4)]==_0x4bb2b6(0x1bd)?_0x48ca4b+=_0x59ab5f[_0x4bb2b6(0x1a8)]:_0x1be55c+=_0x59ab5f[_0x4bb2b6(0x1a8)];}),_0x126ad6[_0x451049(0x1f2)]=_0x48ca4b,_0x126ad6['purchase_return']=_0x1be55c,_0x126ad6;});console[_0x511627(0x1ae)]('supplier.js\x20payment_data',_0x2a0d74);if(_0x2b9bfa[0x0][_0x511627(0x1e4)]==_0x511627(0x1b2)){var _0x34e128=users[_0x511627(0x1e6)];console[_0x511627(0x1ae)](_0x34e128);}else{if(_0x2b9bfa[0x0]['language']==_0x511627(0x20c))var _0x34e128=users['Hindi'];else{if(_0x2b9bfa[0x0][_0x511627(0x1e4)]==_0x511627(0x206))var _0x34e128=users[_0x511627(0x206)];else{if(_0x2b9bfa[0x0][_0x511627(0x1e4)]==_0x511627(0x1c5))var _0x34e128=users['Spanish'];else{if(_0x2b9bfa[0x0][_0x511627(0x1e4)]==_0x511627(0x1dc))var _0x34e128=users['French'];else{if(_0x2b9bfa[0x0][_0x511627(0x1e4)]==_0x511627(0x1a5))var _0x34e128=users[_0x511627(0x1e9)];else{if(_0x2b9bfa[0x0][_0x511627(0x1e4)]==_0x511627(0x1f1))var _0x34e128=users[_0x511627(0x1f1)];else{if(_0x2b9bfa[0x0][_0x511627(0x1e4)]==_0x511627(0x1ef))var _0x34e128=users['Arabic'];}}}}}}}_0x5ddc62[_0x511627(0x1f3)](_0x511627(0x1b1),{'success':_0x20542e['flash'](_0x511627(0x1e0)),'errors':_0x20542e[_0x511627(0x1c0)](_0x511627(0x1fd)),'user':_0x55a365,'profile':_0x413880,'master_shop':_0x2b9bfa,'role':_0x521fc9,'payment':_0x2a0d74,'language':_0x34e128});}catch(_0x383550){console['log'](_0x383550);}}),router[a0_0x5bf212(0x1db)](a0_0x5bf212(0x1ce),auth,async(_0x556365,_0xc15893)=>{const _0x1c31c1=a0_0x5bf212;try{const {name:_0x34653a,email:_0x2b54f8,mobile:_0x545e48,company:_0x1c5b49,address:_0x31a0a4,receivable:_0x4798f9,payable:_0x57dfad,code:_0x4b2b49,contactperson:_0x5108a2,landline:_0x514c13}=_0x556365[_0x1c31c1(0x1c4)],_0x403149=new suppliers({'name':_0x34653a,'email':_0x2b54f8,'mobile':_0x545e48,'company':_0x1c5b49,'address':_0x31a0a4,'receivable':_0x4798f9,'payable':_0x57dfad,'suppliers_code':_0x4b2b49,'contactperson':_0x5108a2,'landline':_0x514c13}),_0x5c0a70=await _0x403149[_0x1c31c1(0x1a2)]();_0x556365[_0x1c31c1(0x1c0)](_0x1c31c1(0x1e0),'supplier\x20data\x20add\x20successfully'),_0xc15893[_0x1c31c1(0x1c8)](_0x1c31c1(0x1af));}catch(_0x281608){console[_0x1c31c1(0x1ae)](_0x281608);}}),router['get'](a0_0x5bf212(0x1cf),auth,async(_0x536f58,_0x17121c)=>{const _0x2c4c8d=a0_0x5bf212;try{const {username:_0x1ba87e,email:_0x267439,role:_0x53db76}=_0x536f58[_0x2c4c8d(0x1ea)],_0x5970e6=_0x536f58['user'],_0x4cd330=await profile[_0x2c4c8d(0x1a3)]({'email':_0x5970e6[_0x2c4c8d(0x1ac)]}),_0x3fc096=await master_shop[_0x2c4c8d(0x1b5)]();console[_0x2c4c8d(0x1ae)](_0x2c4c8d(0x1bc),_0x3fc096);const _0x23e5cf=_0x536f58[_0x2c4c8d(0x205)]['id'],_0x2bfd9c=await suppliers[_0x2c4c8d(0x1a9)](_0x23e5cf);console[_0x2c4c8d(0x1ae)](_0x2bfd9c);if(_0x3fc096[0x0][_0x2c4c8d(0x1e4)]=='English\x20(US)'){var _0x5b1686=users[_0x2c4c8d(0x1e6)];console[_0x2c4c8d(0x1ae)](_0x5b1686);}else{if(_0x3fc096[0x0][_0x2c4c8d(0x1e4)]==_0x2c4c8d(0x20c))var _0x5b1686=users['Hindi'];else{if(_0x3fc096[0x0][_0x2c4c8d(0x1e4)]=='German')var _0x5b1686=users['German'];else{if(_0x3fc096[0x0][_0x2c4c8d(0x1e4)]==_0x2c4c8d(0x1c5))var _0x5b1686=users[_0x2c4c8d(0x1c5)];else{if(_0x3fc096[0x0][_0x2c4c8d(0x1e4)]==_0x2c4c8d(0x1dc))var _0x5b1686=users[_0x2c4c8d(0x1dc)];else{if(_0x3fc096[0x0][_0x2c4c8d(0x1e4)]==_0x2c4c8d(0x1a5))var _0x5b1686=users[_0x2c4c8d(0x1e9)];else{if(_0x3fc096[0x0]['language']==_0x2c4c8d(0x1f1))var _0x5b1686=users[_0x2c4c8d(0x1f1)];else{if(_0x3fc096[0x0][_0x2c4c8d(0x1e4)]==_0x2c4c8d(0x1ef))var _0x5b1686=users[_0x2c4c8d(0x20d)];}}}}}}}_0x17121c['render'](_0x2c4c8d(0x1b1),{'success':_0x536f58[_0x2c4c8d(0x1c0)](_0x2c4c8d(0x1e0)),'errors':_0x536f58[_0x2c4c8d(0x1c0)](_0x2c4c8d(0x1fd)),'role':_0x5970e6,'profile':_0x4cd330,'master_shop':_0x3fc096,'user':_0x2bfd9c,'language':_0x5b1686});}catch(_0x2e8e23){console[_0x2c4c8d(0x1ae)](_0x2e8e23);}}),router[a0_0x5bf212(0x1db)](a0_0x5bf212(0x1cf),auth,async(_0x2c0b1e,_0xff4a57)=>{const _0x928e9=a0_0x5bf212;try{const _0x49f597=_0x2c0b1e[_0x928e9(0x205)]['id'],_0xf23e18=await suppliers[_0x928e9(0x1a9)](_0x49f597),{name:_0x21345e,email:_0x4da3d7,mobile:_0x27e378,company:_0x3b1bf1,address:_0x1e2b9d,receivable:_0x30afd6,payable:_0x40743c,code:_0x1235ee,contactperson:_0x498a49,landline:_0x57d357}=_0x2c0b1e[_0x928e9(0x1c4)];_0xf23e18['name']=_0x21345e,_0xf23e18[_0x928e9(0x1ac)]=_0x4da3d7,_0xf23e18[_0x928e9(0x1eb)]=_0x27e378,_0xf23e18[_0x928e9(0x1fa)]=_0x3b1bf1,_0xf23e18[_0x928e9(0x20a)]=_0x1e2b9d,_0xf23e18['receivable']=_0x30afd6,_0xf23e18[_0x928e9(0x1ed)]=_0x40743c,_0xf23e18[_0x928e9(0x1a6)]=_0x1235ee,_0xf23e18[_0x928e9(0x1fe)]=_0x498a49,_0xf23e18[_0x928e9(0x1aa)]=_0x57d357;const _0x4c0ae1=await _0xf23e18[_0x928e9(0x1a2)]();_0x2c0b1e[_0x928e9(0x1c0)](_0x928e9(0x1e0),_0x928e9(0x1b4)),_0xff4a57[_0x928e9(0x1c8)](_0x928e9(0x1af));}catch(_0x4d9ce1){console[_0x928e9(0x1ae)](_0x4d9ce1);}}),router[a0_0x5bf212(0x1b8)]('/view/payment/:id',auth,async(_0x295e23,_0x8fbc3d)=>{const _0x13dbfa=a0_0x5bf212;try{const {username:_0x5c2dcc,email:_0x946414,role:_0x3a22fd}=_0x295e23[_0x13dbfa(0x1ea)],_0x11f3a0=_0x295e23[_0x13dbfa(0x1ea)],_0x4dac19=await profile['findOne']({'email':_0x11f3a0['email']}),_0xd27f8f=await master_shop[_0x13dbfa(0x1b5)]();console[_0x13dbfa(0x1ae)](_0x13dbfa(0x1bc),_0xd27f8f),console[_0x13dbfa(0x1ae)](_0x295e23['params']['id']);const _0x675121=await suppliers['findOne']({'_id':_0x295e23['params']['id']});console['log'](_0x675121);const _0x1cd1cf=await s_payment_data[_0x13dbfa(0x1b5)]({'suppliers':_0x675121[_0x13dbfa(0x1de)]});console[_0x13dbfa(0x1ae)](_0x1cd1cf);const _0x5d7498=await s_payment_data[_0x13dbfa(0x1fb)]([{'$match':{'suppliers':_0x675121[_0x13dbfa(0x1de)]}},{'$match':{'reason':_0x13dbfa(0x1bd)}},{'$group':{'_id':_0x13dbfa(0x204),'sum':{'$sum':'$amount'}}}]);console[_0x13dbfa(0x1ae)](_0x13dbfa(0x1d1),_0x5d7498);const _0xebb69d=await s_payment_data[_0x13dbfa(0x1fb)]([{'$match':{'suppliers':_0x675121[_0x13dbfa(0x1de)]}},{'$match':{'reason':_0x13dbfa(0x1e2)}},{'$group':{'_id':_0x13dbfa(0x204),'sum':{'$sum':_0x13dbfa(0x1ba)}}}]);console[_0x13dbfa(0x1ae)]('receivable_sum',_0xebb69d);if(_0xd27f8f[0x0][_0x13dbfa(0x1e4)]==_0x13dbfa(0x1b2)){var _0x445dc2=users[_0x13dbfa(0x1e6)];console[_0x13dbfa(0x1ae)](_0x445dc2);}else{if(_0xd27f8f[0x0][_0x13dbfa(0x1e4)]==_0x13dbfa(0x20c))var _0x445dc2=users[_0x13dbfa(0x20c)];else{if(_0xd27f8f[0x0][_0x13dbfa(0x1e4)]==_0x13dbfa(0x206))var _0x445dc2=users['German'];else{if(_0xd27f8f[0x0][_0x13dbfa(0x1e4)]==_0x13dbfa(0x1c5))var _0x445dc2=users[_0x13dbfa(0x1c5)];else{if(_0xd27f8f[0x0]['language']=='French')var _0x445dc2=users[_0x13dbfa(0x1dc)];else{if(_0xd27f8f[0x0][_0x13dbfa(0x1e4)]==_0x13dbfa(0x1a5))var _0x445dc2=users[_0x13dbfa(0x1e9)];else{if(_0xd27f8f[0x0][_0x13dbfa(0x1e4)]==_0x13dbfa(0x1f1))var _0x445dc2=users[_0x13dbfa(0x1f1)];else{if(_0xd27f8f[0x0][_0x13dbfa(0x1e4)]=='Arabic\x20(ae)')var _0x445dc2=users['Arabic'];}}}}}}}_0x8fbc3d[_0x13dbfa(0x1f3)](_0x13dbfa(0x1ab),{'success':_0x295e23[_0x13dbfa(0x1c0)](_0x13dbfa(0x1e0)),'errors':_0x295e23[_0x13dbfa(0x1c0)]('errors'),'role':_0x11f3a0,'profile':_0x4dac19,'master_shop':_0xd27f8f,'payment':_0x1cd1cf,'payable':_0x5d7498,'receivable':_0xebb69d,'language':_0x445dc2});}catch(_0x21e24b){console[_0x13dbfa(0x1ae)](_0x21e24b);}}),router['get']('/products_export_migrate_file',auth,async(_0x3b9887,_0x591785)=>{const _0x2301e5=a0_0x5bf212;try{const _0x2fe71b=new excelJS['Workbook'](),_0x5c0fff=_0x2fe71b[_0x2301e5(0x1ec)]('Customers');return _0x5c0fff[_0x2301e5(0x208)]=[{'header':_0x2301e5(0x1e5),'key':_0x2301e5(0x203),'width':0xa},{'header':_0x2301e5(0x202),'key':_0x2301e5(0x1b7),'width':0xa},{'header':_0x2301e5(0x1e8),'key':_0x2301e5(0x1c3),'width':0xa},{'header':_0x2301e5(0x1da),'key':'address','width':0xa},{'header':_0x2301e5(0x1cc),'key':_0x2301e5(0x1eb),'width':0xa},{'header':_0x2301e5(0x20a),'key':_0x2301e5(0x1ac),'width':0xa}],_0x591785[_0x2301e5(0x20b)](_0x2301e5(0x1f9),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x591785[_0x2301e5(0x20b)]('Content-Disposition',_0x2301e5(0x1d3)),_0x2fe71b[_0x2301e5(0x1df)][_0x2301e5(0x1ff)](_0x591785)[_0x2301e5(0x1ad)](()=>{const _0x59a88f=_0x2301e5;_0x591785[_0x59a88f(0x1d4)](0xc8);});}catch(_0x4e69c7){_0x591785['status'](0x190)['send']({'errors':_0x4e69c7['message']});}});function a0_0x4060(){const _0x41b5bd=['../public/language/languages.json','PUnits','get','message','$amount','\x20Failed','master','Purchase','3000042cCUnyE','supplier_product_file','flash','1606502biqRJD','forEach','SalesmanName','body','Spanish','public/Migration','diskStorage','redirect','multer','readFile','../middleware/auth','Company_Name','SheetNames','/view','/view/:id','Router','payable_sum','file','attachment;\x20filename=supplier_Migration_File.xlsx','status','suppliers','json','../models/all_models','exceljs','55kyqaap','Mobile_number','post','French','suppliers_docs','name','xlsx','success','348356eAllDi','Purchase\x20Return','sheet_to_json','language','Name','English','now','Email','Portuguese','user','mobile','addWorksheet','payable','utils','Arabic\x20(ae)','\x20added\x20successfully','Chinese','purchase','render','/supplier_import_migrate_file','4688676AuXhBX','1934681hJLUkn','data','single','Content-Type','company','aggregate','s_payments','errors','contactperson','write','filename','map','Supplier_Code','PBrands','$reason','params','German','22028562QlZQKO','columns','1vUDisu','address','setHeader','Hindi','Arabic','save','findOne','reason','Portuguese\x20(BR)','suppliers_code','Sheets','amount','findById','landline','supplier_payment','email','then','log','/supplier/view','public/Migration/','supplier','English\x20(US)','10876024OjhhFh','supplier\x20data\x20update\x20successfully','find'];a0_0x4060=function(){return _0x41b5bd;};return a0_0x4060();}const storage1=multer[a0_0x5bf212(0x1c7)]({'destination':(_0x1546ee,_0xf88e01,_0x146da7)=>{const _0x2c44f9=a0_0x5bf212;_0x146da7(null,_0x2c44f9(0x1c6));},'filename':(_0x3f982d,_0x1ddb48,_0x7a236)=>{const _0x266024=a0_0x5bf212;_0x7a236(null,Date[_0x266024(0x1e7)]()+_0x1ddb48['originalname']);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x5bf212(0x1f4),auth,uploadMigrate[a0_0x5bf212(0x1f8)](a0_0x5bf212(0x1bf)),async(_0xbea788,_0x1f64be)=>{const _0xdf2946=a0_0x5bf212,_0x59ad6a=_0xbea788[_0xdf2946(0x1d2)][_0xdf2946(0x200)],_0x2ec130=await xlsx[_0xdf2946(0x1ca)](_0xdf2946(0x1b0)+_0x59ad6a);let _0x2f5738=_0x2ec130[_0xdf2946(0x1cd)],_0x45b14e=xlsx[_0xdf2946(0x1ee)][_0xdf2946(0x1e3)](_0x2ec130[_0xdf2946(0x1a7)][_0x2f5738[0x0]]);for(const _0x54e797 of _0x45b14e){const _0x4351d3=_0x54e797['Name'],_0x3a08bf=_0x54e797[_0xdf2946(0x202)],_0x509cd9=_0x54e797[_0xdf2946(0x20a)],_0x516b61=_0x54e797[_0xdf2946(0x1da)],_0x40389a=_0x54e797[_0xdf2946(0x1e8)],_0x465bd4=_0x54e797['Company_Name'];try{let _0x13a955=await suppliers[_0xdf2946(0x1a3)]({'name':_0x4351d3});if(!_0x13a955){const _0x1a9d89=new suppliers({'name':_0x4351d3,'suppliers_code':_0x3a08bf,'address':_0x509cd9,'mobile':_0x516b61,'email':_0x40389a,'company':_0x465bd4});_0x13a955=await _0x1a9d89[_0xdf2946(0x1a2)](),_0xbea788[_0xdf2946(0x1c0)](_0xdf2946(0x1e0),_0x4351d3+_0xdf2946(0x1f0));}else _0xbea788[_0xdf2946(0x1c0)]('error',_0x4351d3+_0xdf2946(0x1bb));}catch(_0x54b156){_0x1f64be[_0xdf2946(0x1d4)](0x1f4)[_0xdf2946(0x1d6)]({'proderror':_0x54b156[_0xdf2946(0x1b9)],'aproduct':ProductName});}}_0x1f64be['redirect'](_0xdf2946(0x1af));}),module['exports']=router;