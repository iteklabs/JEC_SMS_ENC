function a0_0x26be(){const _0x3d0779=['now','originalname','flash','status','language','body','Spanish','120uHtyuv','Arabic','suppliers_code','German','amount','18423394LpzEIF','Mobile_number','SalesmanName','columns','company','11569840AMEomf','supplier\x20data\x20add\x20successfully','exports','9726HJCjEb','mobile','aggregate','params','payable_sum','9073589rKGpcx','xlsx','json','Content-Disposition','Portuguese','supplier_payment','../public/language/languages.json','post','French','Router','supplier','Company_Name','log','error','email','\x20added\x20successfully','suppliers','/supplier/view','Purchase\x20Return','Name','receivable','doc','English','Purchase','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','../middleware/auth','suppliers_docs','$amount','write','388HlFigk','Chinese','PUnits','readFile','addWorksheet','master','success','1119114uolRrK','Portuguese\x20(BR)','sheet_to_json','/supplier_import_migrate_file','/products_export_migrate_file','map','name','Workbook','multer','purchase','English\x20(US)','Arabic\x20(ae)','message','Email','6wiFwGs','setHeader','errors','express','address','5332095kIPBsp','data','user','supplier_product_file','s_payments','2267gkCQgi','forEach','find','filename','redirect','render','SheetNames','findOne','reason','contactperson','Supplier_Code','save','$reason','get','attachment;\x20filename=supplier_Migration_File.xlsx','Hindi','Content-Type','diskStorage','public/Migration','80ZIxNNp','send'];a0_0x26be=function(){return _0x3d0779;};return a0_0x26be();}const a0_0xf887e4=a0_0x3e44;function a0_0x3e44(_0x2515b1,_0x5537d1){const _0x26be58=a0_0x26be();return a0_0x3e44=function(_0x3e446f,_0x4e9d05){_0x3e446f=_0x3e446f-0x1c3;let _0x37ada2=_0x26be58[_0x3e446f];return _0x37ada2;},a0_0x3e44(_0x2515b1,_0x5537d1);}(function(_0x3a5169,_0x5c40c3){const _0x25ca81=a0_0x3e44,_0x137168=_0x3a5169();while(!![]){try{const _0x5182a5=parseInt(_0x25ca81(0x216))/0x1*(parseInt(_0x25ca81(0x1f7))/0x2)+-parseInt(_0x25ca81(0x1d5))/0x3*(parseInt(_0x25ca81(0x1c8))/0x4)+parseInt(_0x25ca81(0x211))/0x5+-parseInt(_0x25ca81(0x20c))/0x6*(parseInt(_0x25ca81(0x1da))/0x7)+-parseInt(_0x25ca81(0x229))/0x8*(-parseInt(_0x25ca81(0x1fe))/0x9)+parseInt(_0x25ca81(0x1d2))/0xa+-parseInt(_0x25ca81(0x1cd))/0xb;if(_0x5182a5===_0x5c40c3)break;else _0x137168['push'](_0x137168['shift']());}catch(_0x405505){_0x137168['push'](_0x137168['shift']());}}}(a0_0x26be,0xccab0));const express=require(a0_0xf887e4(0x20f)),app=express(),router=express[a0_0xf887e4(0x1e3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require('../models/all_models'),auth=require(a0_0xf887e4(0x1f3)),users=require(a0_0xf887e4(0x1e0)),excelJS=require('exceljs'),xlsx=require(a0_0xf887e4(0x1db)),multer=require(a0_0xf887e4(0x206));router[a0_0xf887e4(0x223)]('/view',auth,async(_0x289d7a,_0x25254c)=>{const _0x151bac=a0_0xf887e4;try{const {username:_0x1b55eb,email:_0x4daa83,role:_0x4ac9ac}=_0x289d7a[_0x151bac(0x213)],_0x502220=_0x289d7a[_0x151bac(0x213)],_0x437255=await profile['findOne']({'email':_0x502220[_0x151bac(0x1e8)]}),_0x3176fc=await master_shop[_0x151bac(0x218)]();console[_0x151bac(0x1e6)]('master',_0x3176fc);const _0xa24416=await suppliers['find']();console[_0x151bac(0x1e6)](_0xa24416);const _0x4b8e72=await suppliers[_0x151bac(0x1d7)]([{'$lookup':{'from':_0x151bac(0x215),'localField':_0x151bac(0x204),'foreignField':_0x151bac(0x1ea),'as':'suppliers_docs'}}]),_0x2e15e5=_0x4b8e72[_0x151bac(0x203)](_0x1c7d9b=>{const _0x4df0d5=_0x151bac;console[_0x4df0d5(0x1e6)](_0x4df0d5(0x212),_0x1c7d9b);var _0x15e0e4=0x0,_0x4e1e96=0x0;return _0x1c7d9b[_0x4df0d5(0x1f4)][_0x4df0d5(0x217)](_0x545045=>{const _0x238f80=_0x4df0d5;console[_0x238f80(0x1e6)](_0x238f80(0x1ef),_0x545045),_0x545045[_0x238f80(0x21e)]==_0x238f80(0x1f1)?_0x15e0e4+=_0x545045[_0x238f80(0x1cc)]:_0x4e1e96+=_0x545045['amount'];}),_0x1c7d9b[_0x4df0d5(0x207)]=_0x15e0e4,_0x1c7d9b['purchase_return']=_0x4e1e96,_0x1c7d9b;});console['log']('supplier.js\x20payment_data',_0x2e15e5);if(_0x3176fc[0x0][_0x151bac(0x1c5)]==_0x151bac(0x208)){var _0x156018=users[_0x151bac(0x1f0)];console['log'](_0x156018);}else{if(_0x3176fc[0x0]['language']==_0x151bac(0x225))var _0x156018=users[_0x151bac(0x225)];else{if(_0x3176fc[0x0][_0x151bac(0x1c5)]=='German')var _0x156018=users['German'];else{if(_0x3176fc[0x0][_0x151bac(0x1c5)]=='Spanish')var _0x156018=users[_0x151bac(0x1c7)];else{if(_0x3176fc[0x0]['language']==_0x151bac(0x1e2))var _0x156018=users[_0x151bac(0x1e2)];else{if(_0x3176fc[0x0][_0x151bac(0x1c5)]==_0x151bac(0x1ff))var _0x156018=users[_0x151bac(0x1de)];else{if(_0x3176fc[0x0]['language']=='Chinese')var _0x156018=users[_0x151bac(0x1f8)];else{if(_0x3176fc[0x0][_0x151bac(0x1c5)]==_0x151bac(0x209))var _0x156018=users['Arabic'];}}}}}}}_0x25254c[_0x151bac(0x21b)](_0x151bac(0x1e4),{'success':_0x289d7a['flash'](_0x151bac(0x1fd)),'errors':_0x289d7a['flash'](_0x151bac(0x20e)),'user':_0xa24416,'profile':_0x437255,'master_shop':_0x3176fc,'role':_0x502220,'payment':_0x2e15e5,'language':_0x156018});}catch(_0x348536){console[_0x151bac(0x1e6)](_0x348536);}}),router[a0_0xf887e4(0x1e1)]('/view',auth,async(_0x3b217c,_0x5cf87a)=>{const _0x3db0e1=a0_0xf887e4;try{const {name:_0x123998,email:_0x599fbc,mobile:_0x305294,company:_0x416204,address:_0x48ee97,receivable:_0x1f3bf5,payable:_0x418f25,code:_0x343c27,contactperson:_0x53bcbe,landline:_0x1ed225}=_0x3b217c['body'],_0x32d580=new suppliers({'name':_0x123998,'email':_0x599fbc,'mobile':_0x305294,'company':_0x416204,'address':_0x48ee97,'receivable':_0x1f3bf5,'payable':_0x418f25,'suppliers_code':_0x343c27,'contactperson':_0x53bcbe,'landline':_0x1ed225}),_0x2e2fad=await _0x32d580[_0x3db0e1(0x221)]();_0x3b217c['flash'](_0x3db0e1(0x1fd),_0x3db0e1(0x1d3)),_0x5cf87a[_0x3db0e1(0x21a)]('/supplier/view');}catch(_0x2bd4a2){console['log'](_0x2bd4a2);}}),router[a0_0xf887e4(0x223)]('/view/:id',auth,async(_0x13955e,_0x51a1c0)=>{const _0xbf0c94=a0_0xf887e4;try{const {username:_0x502507,email:_0x537d43,role:_0x538c5e}=_0x13955e[_0xbf0c94(0x213)],_0x437170=_0x13955e[_0xbf0c94(0x213)],_0x3f1ffd=await profile[_0xbf0c94(0x21d)]({'email':_0x437170[_0xbf0c94(0x1e8)]}),_0x57a742=await master_shop[_0xbf0c94(0x218)]();console[_0xbf0c94(0x1e6)](_0xbf0c94(0x1fc),_0x57a742);const _0x2df555=_0x13955e[_0xbf0c94(0x1d8)]['id'],_0x4c0825=await suppliers['findById'](_0x2df555);console[_0xbf0c94(0x1e6)](_0x4c0825);if(_0x57a742[0x0][_0xbf0c94(0x1c5)]==_0xbf0c94(0x208)){var _0x12028e=users['English'];console['log'](_0x12028e);}else{if(_0x57a742[0x0][_0xbf0c94(0x1c5)]=='Hindi')var _0x12028e=users['Hindi'];else{if(_0x57a742[0x0][_0xbf0c94(0x1c5)]==_0xbf0c94(0x1cb))var _0x12028e=users[_0xbf0c94(0x1cb)];else{if(_0x57a742[0x0][_0xbf0c94(0x1c5)]=='Spanish')var _0x12028e=users[_0xbf0c94(0x1c7)];else{if(_0x57a742[0x0][_0xbf0c94(0x1c5)]=='French')var _0x12028e=users[_0xbf0c94(0x1e2)];else{if(_0x57a742[0x0][_0xbf0c94(0x1c5)]==_0xbf0c94(0x1ff))var _0x12028e=users['Portuguese'];else{if(_0x57a742[0x0][_0xbf0c94(0x1c5)]==_0xbf0c94(0x1f8))var _0x12028e=users[_0xbf0c94(0x1f8)];else{if(_0x57a742[0x0][_0xbf0c94(0x1c5)]==_0xbf0c94(0x209))var _0x12028e=users[_0xbf0c94(0x1c9)];}}}}}}}_0x51a1c0[_0xbf0c94(0x21b)](_0xbf0c94(0x1e4),{'success':_0x13955e[_0xbf0c94(0x1c3)](_0xbf0c94(0x1fd)),'errors':_0x13955e[_0xbf0c94(0x1c3)]('errors'),'role':_0x437170,'profile':_0x3f1ffd,'master_shop':_0x57a742,'user':_0x4c0825,'language':_0x12028e});}catch(_0x315f12){console[_0xbf0c94(0x1e6)](_0x315f12);}}),router[a0_0xf887e4(0x1e1)]('/view/:id',auth,async(_0x1fc79e,_0x30a1dc)=>{const _0xe54577=a0_0xf887e4;try{const _0x23c379=_0x1fc79e[_0xe54577(0x1d8)]['id'],_0x2ca25b=await suppliers['findById'](_0x23c379),{name:_0x510da5,email:_0x227de0,mobile:_0x18af74,company:_0x31517f,address:_0x4eef18,receivable:_0x3c63d9,payable:_0x240e49,code:_0x3cb8f9,contactperson:_0x2f0154,landline:_0x39dc0a}=_0x1fc79e[_0xe54577(0x1c6)];_0x2ca25b[_0xe54577(0x204)]=_0x510da5,_0x2ca25b[_0xe54577(0x1e8)]=_0x227de0,_0x2ca25b[_0xe54577(0x1d6)]=_0x18af74,_0x2ca25b[_0xe54577(0x1d1)]=_0x31517f,_0x2ca25b['address']=_0x4eef18,_0x2ca25b[_0xe54577(0x1ee)]=_0x3c63d9,_0x2ca25b['payable']=_0x240e49,_0x2ca25b[_0xe54577(0x1ca)]=_0x3cb8f9,_0x2ca25b[_0xe54577(0x21f)]=_0x2f0154,_0x2ca25b['landline']=_0x39dc0a;const _0x276889=await _0x2ca25b[_0xe54577(0x221)]();_0x1fc79e[_0xe54577(0x1c3)]('success','supplier\x20data\x20update\x20successfully'),_0x30a1dc['redirect']('/supplier/view');}catch(_0xd80bcf){console['log'](_0xd80bcf);}}),router[a0_0xf887e4(0x223)]('/view/payment/:id',auth,async(_0xe50bbb,_0x4065eb)=>{const _0x2a0069=a0_0xf887e4;try{const {username:_0x26716e,email:_0x1a3696,role:_0x24b1c7}=_0xe50bbb[_0x2a0069(0x213)],_0x33a158=_0xe50bbb['user'],_0x5b9feb=await profile[_0x2a0069(0x21d)]({'email':_0x33a158['email']}),_0x374483=await master_shop[_0x2a0069(0x218)]();console[_0x2a0069(0x1e6)](_0x2a0069(0x1fc),_0x374483),console[_0x2a0069(0x1e6)](_0xe50bbb[_0x2a0069(0x1d8)]['id']);const _0x5e96a2=await suppliers[_0x2a0069(0x21d)]({'_id':_0xe50bbb[_0x2a0069(0x1d8)]['id']});console[_0x2a0069(0x1e6)](_0x5e96a2);const _0x23150e=await s_payment_data['find']({'suppliers':_0x5e96a2[_0x2a0069(0x204)]});console[_0x2a0069(0x1e6)](_0x23150e);const _0x3252dd=await s_payment_data[_0x2a0069(0x1d7)]([{'$match':{'suppliers':_0x5e96a2[_0x2a0069(0x204)]}},{'$match':{'reason':_0x2a0069(0x1f1)}},{'$group':{'_id':'$reason','sum':{'$sum':_0x2a0069(0x1f5)}}}]);console[_0x2a0069(0x1e6)](_0x2a0069(0x1d9),_0x3252dd);const _0x11fb6d=await s_payment_data[_0x2a0069(0x1d7)]([{'$match':{'suppliers':_0x5e96a2[_0x2a0069(0x204)]}},{'$match':{'reason':_0x2a0069(0x1ec)}},{'$group':{'_id':_0x2a0069(0x222),'sum':{'$sum':_0x2a0069(0x1f5)}}}]);console[_0x2a0069(0x1e6)]('receivable_sum',_0x11fb6d);if(_0x374483[0x0][_0x2a0069(0x1c5)]==_0x2a0069(0x208)){var _0xef7a83=users[_0x2a0069(0x1f0)];console[_0x2a0069(0x1e6)](_0xef7a83);}else{if(_0x374483[0x0][_0x2a0069(0x1c5)]==_0x2a0069(0x225))var _0xef7a83=users['Hindi'];else{if(_0x374483[0x0][_0x2a0069(0x1c5)]==_0x2a0069(0x1cb))var _0xef7a83=users[_0x2a0069(0x1cb)];else{if(_0x374483[0x0][_0x2a0069(0x1c5)]==_0x2a0069(0x1c7))var _0xef7a83=users['Spanish'];else{if(_0x374483[0x0][_0x2a0069(0x1c5)]==_0x2a0069(0x1e2))var _0xef7a83=users[_0x2a0069(0x1e2)];else{if(_0x374483[0x0][_0x2a0069(0x1c5)]=='Portuguese\x20(BR)')var _0xef7a83=users[_0x2a0069(0x1de)];else{if(_0x374483[0x0][_0x2a0069(0x1c5)]=='Chinese')var _0xef7a83=users[_0x2a0069(0x1f8)];else{if(_0x374483[0x0][_0x2a0069(0x1c5)]==_0x2a0069(0x209))var _0xef7a83=users['Arabic'];}}}}}}}_0x4065eb[_0x2a0069(0x21b)](_0x2a0069(0x1df),{'success':_0xe50bbb[_0x2a0069(0x1c3)](_0x2a0069(0x1fd)),'errors':_0xe50bbb[_0x2a0069(0x1c3)](_0x2a0069(0x20e)),'role':_0x33a158,'profile':_0x5b9feb,'master_shop':_0x374483,'payment':_0x23150e,'payable':_0x3252dd,'receivable':_0x11fb6d,'language':_0xef7a83});}catch(_0x56ea3a){console[_0x2a0069(0x1e6)](_0x56ea3a);}}),router['get'](a0_0xf887e4(0x202),auth,async(_0x53fa42,_0x1a863b)=>{const _0x35506e=a0_0xf887e4;try{const _0x6a6103=new excelJS[(_0x35506e(0x205))](),_0x548447=_0x6a6103[_0x35506e(0x1fb)]('Customers');return _0x548447[_0x35506e(0x1d0)]=[{'header':_0x35506e(0x1ed),'key':'PBrands','width':0xa},{'header':_0x35506e(0x220),'key':_0x35506e(0x1f9),'width':0xa},{'header':_0x35506e(0x20b),'key':_0x35506e(0x1cf),'width':0xa},{'header':_0x35506e(0x1ce),'key':_0x35506e(0x210),'width':0xa},{'header':_0x35506e(0x1e5),'key':'mobile','width':0xa},{'header':'address','key':'email','width':0xa}],_0x1a863b[_0x35506e(0x20d)](_0x35506e(0x226),_0x35506e(0x1f2)),_0x1a863b[_0x35506e(0x20d)](_0x35506e(0x1dd),_0x35506e(0x224)),_0x6a6103[_0x35506e(0x1db)][_0x35506e(0x1f6)](_0x1a863b)['then'](()=>{const _0x348566=_0x35506e;_0x1a863b[_0x348566(0x1c4)](0xc8);});}catch(_0x3d0bc6){_0x1a863b['status'](0x190)[_0x35506e(0x22a)]({'errors':_0x3d0bc6['message']});}});const storage1=multer[a0_0xf887e4(0x227)]({'destination':(_0x30a561,_0x61ed4d,_0x3f9fde)=>{const _0x48b80d=a0_0xf887e4;_0x3f9fde(null,_0x48b80d(0x228));},'filename':(_0x12e017,_0x4c44e6,_0x265569)=>{const _0x29299=a0_0xf887e4;_0x265569(null,Date[_0x29299(0x22b)]()+_0x4c44e6[_0x29299(0x22c)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0xf887e4(0x1e1)](a0_0xf887e4(0x201),auth,uploadMigrate['single'](a0_0xf887e4(0x214)),async(_0x228fbd,_0x2a8b23)=>{const _0x301d5c=a0_0xf887e4,_0x4d3167=_0x228fbd['file'][_0x301d5c(0x219)],_0x35797a=await xlsx[_0x301d5c(0x1fa)]('public/Migration/'+_0x4d3167);let _0x25aed=_0x35797a[_0x301d5c(0x21c)],_0xc1eaa5=xlsx['utils'][_0x301d5c(0x200)](_0x35797a['Sheets'][_0x25aed[0x0]]);for(const _0x7d99a0 of _0xc1eaa5){const _0x26e5ad=_0x7d99a0[_0x301d5c(0x1ed)],_0x59e4a3=_0x7d99a0[_0x301d5c(0x220)],_0x596129=_0x7d99a0['address'],_0x3e7fc0=_0x7d99a0[_0x301d5c(0x1ce)],_0x35da5e=_0x7d99a0[_0x301d5c(0x20b)],_0x4c188d=_0x7d99a0[_0x301d5c(0x1e5)];try{let _0x3e2ecc=await suppliers[_0x301d5c(0x21d)]({'name':_0x26e5ad});if(!_0x3e2ecc){const _0x3a1c1e=new suppliers({'name':_0x26e5ad,'suppliers_code':_0x59e4a3,'address':_0x596129,'mobile':_0x3e7fc0,'email':_0x35da5e,'company':_0x4c188d});_0x3e2ecc=await _0x3a1c1e[_0x301d5c(0x221)](),_0x228fbd[_0x301d5c(0x1c3)](_0x301d5c(0x1fd),_0x26e5ad+_0x301d5c(0x1e9));}else _0x228fbd[_0x301d5c(0x1c3)](_0x301d5c(0x1e7),_0x26e5ad+'\x20Failed');}catch(_0x42f4c5){_0x2a8b23[_0x301d5c(0x1c4)](0x1f4)[_0x301d5c(0x1dc)]({'proderror':_0x42f4c5[_0x301d5c(0x20a)],'aproduct':ProductName});}}_0x2a8b23[_0x301d5c(0x21a)](_0x301d5c(0x1eb));}),module[a0_0xf887e4(0x1d4)]=router;