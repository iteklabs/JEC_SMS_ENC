const a0_0x42eb9c=a0_0x4469;(function(_0x1a6939,_0x29888c){const _0x5cbcdc=a0_0x4469,_0x31ceb1=_0x1a6939();while(!![]){try{const _0x2bb2d6=parseInt(_0x5cbcdc(0x139))/0x1*(-parseInt(_0x5cbcdc(0x13e))/0x2)+-parseInt(_0x5cbcdc(0x16d))/0x3+-parseInt(_0x5cbcdc(0x111))/0x4*(parseInt(_0x5cbcdc(0x13f))/0x5)+-parseInt(_0x5cbcdc(0x13b))/0x6+-parseInt(_0x5cbcdc(0x177))/0x7*(-parseInt(_0x5cbcdc(0x12e))/0x8)+-parseInt(_0x5cbcdc(0x116))/0x9+parseInt(_0x5cbcdc(0x12f))/0xa*(parseInt(_0x5cbcdc(0x174))/0xb);if(_0x2bb2d6===_0x29888c)break;else _0x31ceb1['push'](_0x31ceb1['shift']());}catch(_0x47e363){_0x31ceb1['push'](_0x31ceb1['shift']());}}}(a0_0x29df,0xa5f05));const express=require(a0_0x42eb9c(0x144)),app=express(),router=express[a0_0x42eb9c(0x168)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x42eb9c(0x119)),auth=require(a0_0x42eb9c(0x122)),users=require(a0_0x42eb9c(0x11d)),excelJS=require(a0_0x42eb9c(0x109)),xlsx=require(a0_0x42eb9c(0x160)),multer=require('multer');function a0_0x4469(_0x42d044,_0x262fa8){const _0x29df42=a0_0x29df();return a0_0x4469=function(_0x446912,_0x371037){_0x446912=_0x446912-0x109;let _0x1f7864=_0x29df42[_0x446912];return _0x1f7864;},a0_0x4469(_0x42d044,_0x262fa8);}function a0_0x29df(){const _0x4ae070=['suppliers_code','Chinese','errors','company','findById','supplier_product_file','62WmeOhe','body','1816902lfRyQE','amount','receivable','19540WPQwtX','5dStWJd','SheetNames','error','Supplier_Code','public/Migration','express','/view','Purchase','Portuguese','aggregate','filename','Mobile_number','Arabic\x20(ae)','receivable_sum','send','Company_Name','PBrands','flash','name','Content-Disposition','Arabic','public/Migration/','German','params','landline','save','render','$reason','write','/supplier/view','message','log','contactperson','xlsx','file','$amount','success','json','get','find','master','Router','addWorksheet','/view/payment/:id','post','setHeader','1163784ZdaOxQ','English','supplier','sheet_to_json','readFile','then','email','151657pTgadX','diskStorage','Purchase\x20Return','637HSlKDa','suppliers_docs','attachment;\x20filename=supplier_Migration_File.xlsx','exceljs','purchase','map','Portuguese\x20(BR)','PUnits','exports','findOne','Hindi','702652RdYfaQ','\x20Failed','Content-Type','\x20added\x20successfully','supplier.js\x20payment_data','3662946ZfhhHg','/view/:id','payable_sum','../models/all_models','redirect','status','supplier\x20data\x20update\x20successfully','../public/language/languages.json','French','purchase_return','user','language','../middleware/auth','doc','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Email','Name','English\x20(US)','mobile','originalname','Sheets','s_payments','supplier\x20data\x20add\x20successfully','Spanish','9208vLjmzB','1780ZrXNHM','address','forEach','supplier_payment'];a0_0x29df=function(){return _0x4ae070;};return a0_0x29df();}router['get'](a0_0x42eb9c(0x145),auth,async(_0x44f73b,_0x558249)=>{const _0x1ad7f1=a0_0x42eb9c;try{const {username:_0x3805ef,email:_0x26371a,role:_0x2b742a}=_0x44f73b[_0x1ad7f1(0x120)],_0x11288e=_0x44f73b['user'],_0x2c1522=await profile[_0x1ad7f1(0x10f)]({'email':_0x11288e['email']}),_0x1f4c9b=await master_shop['find']();console['log'](_0x1ad7f1(0x167),_0x1f4c9b);const _0xb2ba95=await suppliers[_0x1ad7f1(0x166)]();console['log'](_0xb2ba95);const _0x27026d=await suppliers[_0x1ad7f1(0x148)]([{'$lookup':{'from':_0x1ad7f1(0x12b),'localField':_0x1ad7f1(0x151),'foreignField':'suppliers','as':'suppliers_docs'}}]),_0x465a07=_0x27026d[_0x1ad7f1(0x10b)](_0x3ed0bf=>{const _0x54fa86=_0x1ad7f1;console[_0x54fa86(0x15e)]('data',_0x3ed0bf);var _0x1a76a8=0x0,_0x23be04=0x0;return _0x3ed0bf[_0x54fa86(0x178)][_0x54fa86(0x131)](_0x107e9e=>{const _0x10abba=_0x54fa86;console[_0x10abba(0x15e)](_0x10abba(0x123),_0x107e9e),_0x107e9e['reason']==_0x10abba(0x146)?_0x1a76a8+=_0x107e9e[_0x10abba(0x13c)]:_0x23be04+=_0x107e9e[_0x10abba(0x13c)];}),_0x3ed0bf[_0x54fa86(0x10a)]=_0x1a76a8,_0x3ed0bf[_0x54fa86(0x11f)]=_0x23be04,_0x3ed0bf;});console['log'](_0x1ad7f1(0x115),_0x465a07);if(_0x1f4c9b[0x0][_0x1ad7f1(0x121)]==_0x1ad7f1(0x127)){var _0x14ea16=users[_0x1ad7f1(0x16e)];console[_0x1ad7f1(0x15e)](_0x14ea16);}else{if(_0x1f4c9b[0x0][_0x1ad7f1(0x121)]==_0x1ad7f1(0x110))var _0x14ea16=users['Hindi'];else{if(_0x1f4c9b[0x0][_0x1ad7f1(0x121)]==_0x1ad7f1(0x155))var _0x14ea16=users[_0x1ad7f1(0x155)];else{if(_0x1f4c9b[0x0]['language']==_0x1ad7f1(0x12d))var _0x14ea16=users[_0x1ad7f1(0x12d)];else{if(_0x1f4c9b[0x0]['language']==_0x1ad7f1(0x11e))var _0x14ea16=users[_0x1ad7f1(0x11e)];else{if(_0x1f4c9b[0x0][_0x1ad7f1(0x121)]==_0x1ad7f1(0x10c))var _0x14ea16=users[_0x1ad7f1(0x147)];else{if(_0x1f4c9b[0x0][_0x1ad7f1(0x121)]==_0x1ad7f1(0x134))var _0x14ea16=users['Chinese'];else{if(_0x1f4c9b[0x0][_0x1ad7f1(0x121)]==_0x1ad7f1(0x14b))var _0x14ea16=users[_0x1ad7f1(0x153)];}}}}}}}_0x558249['render'](_0x1ad7f1(0x16f),{'success':_0x44f73b[_0x1ad7f1(0x150)]('success'),'errors':_0x44f73b['flash'](_0x1ad7f1(0x135)),'user':_0xb2ba95,'profile':_0x2c1522,'master_shop':_0x1f4c9b,'role':_0x11288e,'payment':_0x465a07,'language':_0x14ea16});}catch(_0x277bcb){console[_0x1ad7f1(0x15e)](_0x277bcb);}}),router[a0_0x42eb9c(0x16b)]('/view',auth,async(_0xabb17d,_0x4d17de)=>{const _0x36ff19=a0_0x42eb9c;try{const {name:_0x1f01ac,email:_0x3754e8,mobile:_0x5ad504,company:_0x519e3b,address:_0x5201d2,receivable:_0x34e9a5,payable:_0x31624f,code:_0x40360a,contactperson:_0x1399e2,landline:_0x3f448f}=_0xabb17d[_0x36ff19(0x13a)],_0x47e510=new suppliers({'name':_0x1f01ac,'email':_0x3754e8,'mobile':_0x5ad504,'company':_0x519e3b,'address':_0x5201d2,'receivable':_0x34e9a5,'payable':_0x31624f,'suppliers_code':_0x40360a,'contactperson':_0x1399e2,'landline':_0x3f448f}),_0x76717f=await _0x47e510['save']();_0xabb17d['flash'](_0x36ff19(0x163),_0x36ff19(0x12c)),_0x4d17de['redirect'](_0x36ff19(0x15c));}catch(_0x407774){console[_0x36ff19(0x15e)](_0x407774);}}),router[a0_0x42eb9c(0x165)](a0_0x42eb9c(0x117),auth,async(_0x8124f3,_0x1f6d5f)=>{const _0x3b0ee8=a0_0x42eb9c;try{const {username:_0x2e3ea8,email:_0x3e5931,role:_0x36a3f4}=_0x8124f3['user'],_0x40bfcd=_0x8124f3[_0x3b0ee8(0x120)],_0x9e9e9c=await profile[_0x3b0ee8(0x10f)]({'email':_0x40bfcd[_0x3b0ee8(0x173)]}),_0x36b5df=await master_shop['find']();console[_0x3b0ee8(0x15e)](_0x3b0ee8(0x167),_0x36b5df);const _0x5289ec=_0x8124f3[_0x3b0ee8(0x156)]['id'],_0x24a732=await suppliers[_0x3b0ee8(0x137)](_0x5289ec);console[_0x3b0ee8(0x15e)](_0x24a732);if(_0x36b5df[0x0]['language']==_0x3b0ee8(0x127)){var _0x25dee6=users['English'];console[_0x3b0ee8(0x15e)](_0x25dee6);}else{if(_0x36b5df[0x0][_0x3b0ee8(0x121)]==_0x3b0ee8(0x110))var _0x25dee6=users['Hindi'];else{if(_0x36b5df[0x0][_0x3b0ee8(0x121)]==_0x3b0ee8(0x155))var _0x25dee6=users[_0x3b0ee8(0x155)];else{if(_0x36b5df[0x0]['language']==_0x3b0ee8(0x12d))var _0x25dee6=users[_0x3b0ee8(0x12d)];else{if(_0x36b5df[0x0]['language']==_0x3b0ee8(0x11e))var _0x25dee6=users[_0x3b0ee8(0x11e)];else{if(_0x36b5df[0x0][_0x3b0ee8(0x121)]==_0x3b0ee8(0x10c))var _0x25dee6=users[_0x3b0ee8(0x147)];else{if(_0x36b5df[0x0][_0x3b0ee8(0x121)]=='Chinese')var _0x25dee6=users[_0x3b0ee8(0x134)];else{if(_0x36b5df[0x0][_0x3b0ee8(0x121)]==_0x3b0ee8(0x14b))var _0x25dee6=users[_0x3b0ee8(0x153)];}}}}}}}_0x1f6d5f[_0x3b0ee8(0x159)](_0x3b0ee8(0x16f),{'success':_0x8124f3['flash'](_0x3b0ee8(0x163)),'errors':_0x8124f3['flash'](_0x3b0ee8(0x135)),'role':_0x40bfcd,'profile':_0x9e9e9c,'master_shop':_0x36b5df,'user':_0x24a732,'language':_0x25dee6});}catch(_0x59e3a0){console[_0x3b0ee8(0x15e)](_0x59e3a0);}}),router[a0_0x42eb9c(0x16b)](a0_0x42eb9c(0x117),auth,async(_0x39f8f0,_0x20757b)=>{const _0x2790e0=a0_0x42eb9c;try{const _0x1dbc14=_0x39f8f0[_0x2790e0(0x156)]['id'],_0x5e6dc4=await suppliers['findById'](_0x1dbc14),{name:_0x352e51,email:_0x78993b,mobile:_0x3531db,company:_0x2046e1,address:_0x447190,receivable:_0x3ddc8e,payable:_0x32cadd,code:_0x587e91,contactperson:_0x45f500,landline:_0x376e2d}=_0x39f8f0[_0x2790e0(0x13a)];_0x5e6dc4[_0x2790e0(0x151)]=_0x352e51,_0x5e6dc4[_0x2790e0(0x173)]=_0x78993b,_0x5e6dc4[_0x2790e0(0x128)]=_0x3531db,_0x5e6dc4[_0x2790e0(0x136)]=_0x2046e1,_0x5e6dc4[_0x2790e0(0x130)]=_0x447190,_0x5e6dc4[_0x2790e0(0x13d)]=_0x3ddc8e,_0x5e6dc4['payable']=_0x32cadd,_0x5e6dc4[_0x2790e0(0x133)]=_0x587e91,_0x5e6dc4[_0x2790e0(0x15f)]=_0x45f500,_0x5e6dc4[_0x2790e0(0x157)]=_0x376e2d;const _0x24af0d=await _0x5e6dc4[_0x2790e0(0x158)]();_0x39f8f0[_0x2790e0(0x150)](_0x2790e0(0x163),_0x2790e0(0x11c)),_0x20757b[_0x2790e0(0x11a)]('/supplier/view');}catch(_0x39ff4a){console[_0x2790e0(0x15e)](_0x39ff4a);}}),router[a0_0x42eb9c(0x165)](a0_0x42eb9c(0x16a),auth,async(_0x499930,_0x2e0437)=>{const _0xe7c121=a0_0x42eb9c;try{const {username:_0x2eedd5,email:_0x25f197,role:_0x138249}=_0x499930[_0xe7c121(0x120)],_0x33b4f0=_0x499930[_0xe7c121(0x120)],_0x534b07=await profile['findOne']({'email':_0x33b4f0[_0xe7c121(0x173)]}),_0x18ecef=await master_shop[_0xe7c121(0x166)]();console[_0xe7c121(0x15e)](_0xe7c121(0x167),_0x18ecef),console['log'](_0x499930[_0xe7c121(0x156)]['id']);const _0x50a82a=await suppliers[_0xe7c121(0x10f)]({'_id':_0x499930[_0xe7c121(0x156)]['id']});console[_0xe7c121(0x15e)](_0x50a82a);const _0x3fa930=await s_payment_data[_0xe7c121(0x166)]({'suppliers':_0x50a82a[_0xe7c121(0x151)]});console['log'](_0x3fa930);const _0x24feae=await s_payment_data[_0xe7c121(0x148)]([{'$match':{'suppliers':_0x50a82a[_0xe7c121(0x151)]}},{'$match':{'reason':_0xe7c121(0x146)}},{'$group':{'_id':_0xe7c121(0x15a),'sum':{'$sum':_0xe7c121(0x162)}}}]);console[_0xe7c121(0x15e)](_0xe7c121(0x118),_0x24feae);const _0x5100f4=await s_payment_data[_0xe7c121(0x148)]([{'$match':{'suppliers':_0x50a82a[_0xe7c121(0x151)]}},{'$match':{'reason':_0xe7c121(0x176)}},{'$group':{'_id':_0xe7c121(0x15a),'sum':{'$sum':_0xe7c121(0x162)}}}]);console[_0xe7c121(0x15e)](_0xe7c121(0x14c),_0x5100f4);if(_0x18ecef[0x0][_0xe7c121(0x121)]==_0xe7c121(0x127)){var _0x27feb4=users['English'];console[_0xe7c121(0x15e)](_0x27feb4);}else{if(_0x18ecef[0x0][_0xe7c121(0x121)]==_0xe7c121(0x110))var _0x27feb4=users[_0xe7c121(0x110)];else{if(_0x18ecef[0x0]['language']==_0xe7c121(0x155))var _0x27feb4=users[_0xe7c121(0x155)];else{if(_0x18ecef[0x0][_0xe7c121(0x121)]==_0xe7c121(0x12d))var _0x27feb4=users[_0xe7c121(0x12d)];else{if(_0x18ecef[0x0][_0xe7c121(0x121)]==_0xe7c121(0x11e))var _0x27feb4=users[_0xe7c121(0x11e)];else{if(_0x18ecef[0x0][_0xe7c121(0x121)]==_0xe7c121(0x10c))var _0x27feb4=users['Portuguese'];else{if(_0x18ecef[0x0]['language']==_0xe7c121(0x134))var _0x27feb4=users[_0xe7c121(0x134)];else{if(_0x18ecef[0x0][_0xe7c121(0x121)]==_0xe7c121(0x14b))var _0x27feb4=users[_0xe7c121(0x153)];}}}}}}}_0x2e0437[_0xe7c121(0x159)](_0xe7c121(0x132),{'success':_0x499930['flash'](_0xe7c121(0x163)),'errors':_0x499930[_0xe7c121(0x150)](_0xe7c121(0x135)),'role':_0x33b4f0,'profile':_0x534b07,'master_shop':_0x18ecef,'payment':_0x3fa930,'payable':_0x24feae,'receivable':_0x5100f4,'language':_0x27feb4});}catch(_0x5f4316){console[_0xe7c121(0x15e)](_0x5f4316);}}),router[a0_0x42eb9c(0x165)]('/products_export_migrate_file',auth,async(_0x509bd0,_0x448f9d)=>{const _0x3950d5=a0_0x42eb9c;try{const _0x3ea0bd=new excelJS['Workbook'](),_0x55e22f=_0x3ea0bd[_0x3950d5(0x169)]('Customers');return _0x55e22f['columns']=[{'header':_0x3950d5(0x126),'key':_0x3950d5(0x14f),'width':0xa},{'header':_0x3950d5(0x142),'key':_0x3950d5(0x10d),'width':0xa},{'header':_0x3950d5(0x125),'key':'SalesmanName','width':0xa},{'header':_0x3950d5(0x14a),'key':_0x3950d5(0x130),'width':0xa},{'header':_0x3950d5(0x14e),'key':_0x3950d5(0x128),'width':0xa},{'header':_0x3950d5(0x130),'key':_0x3950d5(0x173),'width':0xa}],_0x448f9d['setHeader'](_0x3950d5(0x113),_0x3950d5(0x124)),_0x448f9d[_0x3950d5(0x16c)](_0x3950d5(0x152),_0x3950d5(0x179)),_0x3ea0bd['xlsx'][_0x3950d5(0x15b)](_0x448f9d)[_0x3950d5(0x172)](()=>{const _0x297426=_0x3950d5;_0x448f9d[_0x297426(0x11b)](0xc8);});}catch(_0x483a5e){_0x448f9d[_0x3950d5(0x11b)](0x190)[_0x3950d5(0x14d)]({'errors':_0x483a5e[_0x3950d5(0x15d)]});}});const storage1=multer[a0_0x42eb9c(0x175)]({'destination':(_0x2c7252,_0x19e6ee,_0x51273b)=>{const _0x5c6e04=a0_0x42eb9c;_0x51273b(null,_0x5c6e04(0x143));},'filename':(_0x1fd950,_0x23991f,_0x128d4a)=>{const _0x55ceae=a0_0x42eb9c;_0x128d4a(null,Date['now']()+_0x23991f[_0x55ceae(0x129)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x42eb9c(0x16b)]('/supplier_import_migrate_file',auth,uploadMigrate['single'](a0_0x42eb9c(0x138)),async(_0x32473c,_0x53aedb)=>{const _0xf3e628=a0_0x42eb9c,_0x561112=_0x32473c[_0xf3e628(0x161)][_0xf3e628(0x149)],_0x5e69f3=await xlsx[_0xf3e628(0x171)](_0xf3e628(0x154)+_0x561112);let _0x1aec07=_0x5e69f3[_0xf3e628(0x140)],_0x4a8c24=xlsx['utils'][_0xf3e628(0x170)](_0x5e69f3[_0xf3e628(0x12a)][_0x1aec07[0x0]]);for(const _0x162a4a of _0x4a8c24){const _0x5b8119=_0x162a4a[_0xf3e628(0x126)],_0x327d1e=_0x162a4a[_0xf3e628(0x142)],_0x9948ff=_0x162a4a[_0xf3e628(0x130)],_0x4818cf=_0x162a4a['Mobile_number'],_0x1efb67=_0x162a4a[_0xf3e628(0x125)],_0x290458=_0x162a4a[_0xf3e628(0x14e)];try{let _0x3823bf=await suppliers[_0xf3e628(0x10f)]({'name':_0x5b8119});if(!_0x3823bf){const _0xbc289c=new suppliers({'name':_0x5b8119,'suppliers_code':_0x327d1e,'address':_0x9948ff,'mobile':_0x4818cf,'email':_0x1efb67,'company':_0x290458});_0x3823bf=await _0xbc289c[_0xf3e628(0x158)](),_0x32473c['flash'](_0xf3e628(0x163),_0x5b8119+_0xf3e628(0x114));}else _0x32473c[_0xf3e628(0x150)](_0xf3e628(0x141),_0x5b8119+_0xf3e628(0x112));}catch(_0x4b2be4){_0x53aedb[_0xf3e628(0x11b)](0x1f4)[_0xf3e628(0x164)]({'proderror':_0x4b2be4[_0xf3e628(0x15d)],'aproduct':ProductName});}}_0x53aedb['redirect'](_0xf3e628(0x15c));}),module[a0_0x42eb9c(0x10e)]=router;