function a0_0x11f1(_0x2aa376,_0x3d12e3){const _0xe92470=a0_0xe924();return a0_0x11f1=function(_0x11f18c,_0x161c11){_0x11f18c=_0x11f18c-0x196;let _0x17a1b4=_0xe92470[_0x11f18c];return _0x17a1b4;},a0_0x11f1(_0x2aa376,_0x3d12e3);}function a0_0xe924(){const _0x24da42=['user','5229336iDJBQf','Chinese','reason','$amount','findOne','addWorksheet','../models/all_models','suppliers','receivable','Arabic','params','success','Portuguese','62165DjDCmV','express','English\x20(US)','redirect','\x20Failed','Purchase\x20Return','Spanish','then','aggregate','error','$reason','landline','/view/payment/:id','2697222GfaUGw','purchase','suppliers_docs','456DjhmPe','1hJMgdI','exports','json','German','/view','email','originalname','message','find','diskStorage','public/Migration','contactperson','Content-Type','../middleware/auth','body','supplier.js\x20payment_data','log','save','utils','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','French','data','100LUppDI','1697106SMwrEh','now','\x20added\x20successfully','Hindi','xlsx','master','Name','supplier\x20data\x20update\x20successfully','post','render','name','attachment;\x20filename=supplier_Migration_File.xlsx','setHeader','mobile','send','Purchase','32137sMmjVN','/supplier/view','errors','English','public/Migration/','Email','amount','SalesmanName','Supplier_Code','1759236pPlvfu','supplier','8379342DgsxeI','/supplier_import_migrate_file','language','status','receivable_sum','SheetNames','map','flash','supplier\x20data\x20add\x20successfully','company','452aEIDLL','doc','PBrands','address','get','file','filename','Router','Workbook','/view/:id','findById','supplier_product_file','Mobile_number','readFile','forEach','payable_sum','Arabic\x20(ae)','payable','Portuguese\x20(BR)'];a0_0xe924=function(){return _0x24da42;};return a0_0xe924();}const a0_0x4aea6c=a0_0x11f1;(function(_0xccf850,_0x3db533){const _0x29d282=a0_0x11f1,_0x825993=_0xccf850();while(!![]){try{const _0x3c25fa=-parseInt(_0x29d282(0x1ca))/0x1*(-parseInt(_0x29d282(0x1e1))/0x2)+-parseInt(_0x29d282(0x1fa))/0x3+parseInt(_0x29d282(0x198))/0x4*(parseInt(_0x29d282(0x1b9))/0x5)+parseInt(_0x29d282(0x1ac))/0x6+-parseInt(_0x29d282(0x1f1))/0x7*(parseInt(_0x29d282(0x1c9))/0x8)+parseInt(_0x29d282(0x1fc))/0x9+-parseInt(_0x29d282(0x1e0))/0xa*(parseInt(_0x29d282(0x1c6))/0xb);if(_0x3c25fa===_0x3db533)break;else _0x825993['push'](_0x825993['shift']());}catch(_0x336a23){_0x825993['push'](_0x825993['shift']());}}}(a0_0xe924,0xb88f5));const express=require(a0_0x4aea6c(0x1ba)),app=express(),router=express[a0_0x4aea6c(0x19f)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x4aea6c(0x1b2)),auth=require(a0_0x4aea6c(0x1d7)),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require(a0_0x4aea6c(0x1e5)),multer=require('multer');router[a0_0x4aea6c(0x19c)](a0_0x4aea6c(0x1ce),auth,async(_0x459159,_0x2f749a)=>{const _0x5aa64e=a0_0x4aea6c;try{const {username:_0x1c7d22,email:_0x5df1f9,role:_0x42b527}=_0x459159[_0x5aa64e(0x1ab)],_0x198214=_0x459159[_0x5aa64e(0x1ab)],_0xb00f2=await profile['findOne']({'email':_0x198214[_0x5aa64e(0x1cf)]}),_0x478bbb=await master_shop[_0x5aa64e(0x1d2)]();console['log'](_0x5aa64e(0x1e6),_0x478bbb);const _0x4c8aeb=await suppliers[_0x5aa64e(0x1d2)]();console['log'](_0x4c8aeb);const _0x3ae62c=await suppliers[_0x5aa64e(0x1c1)]([{'$lookup':{'from':'s_payments','localField':'name','foreignField':_0x5aa64e(0x1b3),'as':_0x5aa64e(0x1c8)}}]),_0x46b127=_0x3ae62c[_0x5aa64e(0x202)](_0x352cd1=>{const _0x5a79fd=_0x5aa64e;console[_0x5a79fd(0x1da)](_0x5a79fd(0x1df),_0x352cd1);var _0x48ef6a=0x0,_0x108601=0x0;return _0x352cd1[_0x5a79fd(0x1c8)][_0x5a79fd(0x1a6)](_0x58a158=>{const _0x1aee20=_0x5a79fd;console[_0x1aee20(0x1da)](_0x1aee20(0x199),_0x58a158),_0x58a158[_0x1aee20(0x1ae)]==_0x1aee20(0x1f0)?_0x48ef6a+=_0x58a158['amount']:_0x108601+=_0x58a158[_0x1aee20(0x1f7)];}),_0x352cd1[_0x5a79fd(0x1c7)]=_0x48ef6a,_0x352cd1['purchase_return']=_0x108601,_0x352cd1;});console['log'](_0x5aa64e(0x1d9),_0x46b127);if(_0x478bbb[0x0][_0x5aa64e(0x1fe)]==_0x5aa64e(0x1bb)){var _0x3f298f=users[_0x5aa64e(0x1f4)];console[_0x5aa64e(0x1da)](_0x3f298f);}else{if(_0x478bbb[0x0][_0x5aa64e(0x1fe)]==_0x5aa64e(0x1e4))var _0x3f298f=users[_0x5aa64e(0x1e4)];else{if(_0x478bbb[0x0][_0x5aa64e(0x1fe)]==_0x5aa64e(0x1cd))var _0x3f298f=users[_0x5aa64e(0x1cd)];else{if(_0x478bbb[0x0][_0x5aa64e(0x1fe)]==_0x5aa64e(0x1bf))var _0x3f298f=users[_0x5aa64e(0x1bf)];else{if(_0x478bbb[0x0]['language']==_0x5aa64e(0x1de))var _0x3f298f=users[_0x5aa64e(0x1de)];else{if(_0x478bbb[0x0][_0x5aa64e(0x1fe)]=='Portuguese\x20(BR)')var _0x3f298f=users[_0x5aa64e(0x1b8)];else{if(_0x478bbb[0x0][_0x5aa64e(0x1fe)]==_0x5aa64e(0x1ad))var _0x3f298f=users[_0x5aa64e(0x1ad)];else{if(_0x478bbb[0x0][_0x5aa64e(0x1fe)]=='Arabic\x20(ae)')var _0x3f298f=users[_0x5aa64e(0x1b5)];}}}}}}}_0x2f749a[_0x5aa64e(0x1ea)](_0x5aa64e(0x1fb),{'success':_0x459159[_0x5aa64e(0x203)](_0x5aa64e(0x1b7)),'errors':_0x459159['flash'](_0x5aa64e(0x1f3)),'user':_0x4c8aeb,'profile':_0xb00f2,'master_shop':_0x478bbb,'role':_0x198214,'payment':_0x46b127,'language':_0x3f298f});}catch(_0x30975a){console[_0x5aa64e(0x1da)](_0x30975a);}}),router[a0_0x4aea6c(0x1e9)]('/view',auth,async(_0x12d8ce,_0x57e958)=>{const _0x11951f=a0_0x4aea6c;try{const {name:_0x5afbc3,email:_0x528819,mobile:_0xebcb4a,company:_0x49f702,address:_0x47d6c0,receivable:_0x3cdb2c,payable:_0x476e00,code:_0xffc882,contactperson:_0x55ff47,landline:_0x43d265}=_0x12d8ce['body'],_0x232db8=new suppliers({'name':_0x5afbc3,'email':_0x528819,'mobile':_0xebcb4a,'company':_0x49f702,'address':_0x47d6c0,'receivable':_0x3cdb2c,'payable':_0x476e00,'suppliers_code':_0xffc882,'contactperson':_0x55ff47,'landline':_0x43d265}),_0x9a4cb1=await _0x232db8[_0x11951f(0x1db)]();_0x12d8ce[_0x11951f(0x203)](_0x11951f(0x1b7),_0x11951f(0x196)),_0x57e958[_0x11951f(0x1bc)]('/supplier/view');}catch(_0x2a706b){console[_0x11951f(0x1da)](_0x2a706b);}}),router[a0_0x4aea6c(0x19c)](a0_0x4aea6c(0x1a1),auth,async(_0x1ff0f7,_0x30c618)=>{const _0x4145cb=a0_0x4aea6c;try{const {username:_0x522ed5,email:_0x2ab18d,role:_0x15315f}=_0x1ff0f7[_0x4145cb(0x1ab)],_0x4ea2ef=_0x1ff0f7[_0x4145cb(0x1ab)],_0x3eb482=await profile[_0x4145cb(0x1b0)]({'email':_0x4ea2ef[_0x4145cb(0x1cf)]}),_0x39cbba=await master_shop['find']();console[_0x4145cb(0x1da)]('master',_0x39cbba);const _0x6a7f7a=_0x1ff0f7[_0x4145cb(0x1b6)]['id'],_0x5bfcab=await suppliers[_0x4145cb(0x1a2)](_0x6a7f7a);console[_0x4145cb(0x1da)](_0x5bfcab);if(_0x39cbba[0x0][_0x4145cb(0x1fe)]=='English\x20(US)'){var _0x2bde0c=users[_0x4145cb(0x1f4)];console[_0x4145cb(0x1da)](_0x2bde0c);}else{if(_0x39cbba[0x0][_0x4145cb(0x1fe)]==_0x4145cb(0x1e4))var _0x2bde0c=users['Hindi'];else{if(_0x39cbba[0x0][_0x4145cb(0x1fe)]==_0x4145cb(0x1cd))var _0x2bde0c=users[_0x4145cb(0x1cd)];else{if(_0x39cbba[0x0][_0x4145cb(0x1fe)]==_0x4145cb(0x1bf))var _0x2bde0c=users[_0x4145cb(0x1bf)];else{if(_0x39cbba[0x0][_0x4145cb(0x1fe)]==_0x4145cb(0x1de))var _0x2bde0c=users['French'];else{if(_0x39cbba[0x0]['language']==_0x4145cb(0x1aa))var _0x2bde0c=users['Portuguese'];else{if(_0x39cbba[0x0]['language']=='Chinese')var _0x2bde0c=users[_0x4145cb(0x1ad)];else{if(_0x39cbba[0x0][_0x4145cb(0x1fe)]=='Arabic\x20(ae)')var _0x2bde0c=users[_0x4145cb(0x1b5)];}}}}}}}_0x30c618[_0x4145cb(0x1ea)](_0x4145cb(0x1fb),{'success':_0x1ff0f7['flash'](_0x4145cb(0x1b7)),'errors':_0x1ff0f7[_0x4145cb(0x203)](_0x4145cb(0x1f3)),'role':_0x4ea2ef,'profile':_0x3eb482,'master_shop':_0x39cbba,'user':_0x5bfcab,'language':_0x2bde0c});}catch(_0xe88e14){console[_0x4145cb(0x1da)](_0xe88e14);}}),router[a0_0x4aea6c(0x1e9)](a0_0x4aea6c(0x1a1),auth,async(_0x1935c5,_0x12214e)=>{const _0x4d2f5f=a0_0x4aea6c;try{const _0x349a39=_0x1935c5['params']['id'],_0x5d034e=await suppliers[_0x4d2f5f(0x1a2)](_0x349a39),{name:_0x1183a6,email:_0x4987ea,mobile:_0x486721,company:_0xdf98e3,address:_0x48b7ae,receivable:_0x158e5f,payable:_0x4635cd,code:_0x3cb24d,contactperson:_0x37d6ed,landline:_0x5bf66a}=_0x1935c5[_0x4d2f5f(0x1d8)];_0x5d034e[_0x4d2f5f(0x1eb)]=_0x1183a6,_0x5d034e[_0x4d2f5f(0x1cf)]=_0x4987ea,_0x5d034e['mobile']=_0x486721,_0x5d034e[_0x4d2f5f(0x197)]=_0xdf98e3,_0x5d034e[_0x4d2f5f(0x19b)]=_0x48b7ae,_0x5d034e[_0x4d2f5f(0x1b4)]=_0x158e5f,_0x5d034e[_0x4d2f5f(0x1a9)]=_0x4635cd,_0x5d034e['suppliers_code']=_0x3cb24d,_0x5d034e[_0x4d2f5f(0x1d5)]=_0x37d6ed,_0x5d034e[_0x4d2f5f(0x1c4)]=_0x5bf66a;const _0x40a15d=await _0x5d034e['save']();_0x1935c5[_0x4d2f5f(0x203)]('success',_0x4d2f5f(0x1e8)),_0x12214e[_0x4d2f5f(0x1bc)](_0x4d2f5f(0x1f2));}catch(_0x326e0f){console[_0x4d2f5f(0x1da)](_0x326e0f);}}),router['get'](a0_0x4aea6c(0x1c5),auth,async(_0x2afe0b,_0x578cef)=>{const _0x399107=a0_0x4aea6c;try{const {username:_0x5db574,email:_0x5d198f,role:_0x50fb4d}=_0x2afe0b['user'],_0x5d2d80=_0x2afe0b[_0x399107(0x1ab)],_0x439c5a=await profile[_0x399107(0x1b0)]({'email':_0x5d2d80['email']}),_0x152d4d=await master_shop[_0x399107(0x1d2)]();console[_0x399107(0x1da)](_0x399107(0x1e6),_0x152d4d),console[_0x399107(0x1da)](_0x2afe0b['params']['id']);const _0x2c74b2=await suppliers['findOne']({'_id':_0x2afe0b[_0x399107(0x1b6)]['id']});console[_0x399107(0x1da)](_0x2c74b2);const _0xa2202=await s_payment_data['find']({'suppliers':_0x2c74b2['name']});console[_0x399107(0x1da)](_0xa2202);const _0x5b0b37=await s_payment_data[_0x399107(0x1c1)]([{'$match':{'suppliers':_0x2c74b2[_0x399107(0x1eb)]}},{'$match':{'reason':_0x399107(0x1f0)}},{'$group':{'_id':_0x399107(0x1c3),'sum':{'$sum':'$amount'}}}]);console['log'](_0x399107(0x1a7),_0x5b0b37);const _0x298985=await s_payment_data[_0x399107(0x1c1)]([{'$match':{'suppliers':_0x2c74b2[_0x399107(0x1eb)]}},{'$match':{'reason':_0x399107(0x1be)}},{'$group':{'_id':_0x399107(0x1c3),'sum':{'$sum':_0x399107(0x1af)}}}]);console['log'](_0x399107(0x200),_0x298985);if(_0x152d4d[0x0][_0x399107(0x1fe)]==_0x399107(0x1bb)){var _0x5bbc51=users[_0x399107(0x1f4)];console[_0x399107(0x1da)](_0x5bbc51);}else{if(_0x152d4d[0x0][_0x399107(0x1fe)]=='Hindi')var _0x5bbc51=users[_0x399107(0x1e4)];else{if(_0x152d4d[0x0]['language']==_0x399107(0x1cd))var _0x5bbc51=users['German'];else{if(_0x152d4d[0x0][_0x399107(0x1fe)]==_0x399107(0x1bf))var _0x5bbc51=users['Spanish'];else{if(_0x152d4d[0x0][_0x399107(0x1fe)]==_0x399107(0x1de))var _0x5bbc51=users[_0x399107(0x1de)];else{if(_0x152d4d[0x0]['language']==_0x399107(0x1aa))var _0x5bbc51=users[_0x399107(0x1b8)];else{if(_0x152d4d[0x0][_0x399107(0x1fe)]==_0x399107(0x1ad))var _0x5bbc51=users[_0x399107(0x1ad)];else{if(_0x152d4d[0x0][_0x399107(0x1fe)]==_0x399107(0x1a8))var _0x5bbc51=users['Arabic'];}}}}}}}_0x578cef[_0x399107(0x1ea)]('supplier_payment',{'success':_0x2afe0b[_0x399107(0x203)]('success'),'errors':_0x2afe0b['flash']('errors'),'role':_0x5d2d80,'profile':_0x439c5a,'master_shop':_0x152d4d,'payment':_0xa2202,'payable':_0x5b0b37,'receivable':_0x298985,'language':_0x5bbc51});}catch(_0x239b51){console['log'](_0x239b51);}}),router[a0_0x4aea6c(0x19c)]('/products_export_migrate_file',auth,async(_0x5d47e5,_0x165a39)=>{const _0x3dd226=a0_0x4aea6c;try{const _0x46a444=new excelJS[(_0x3dd226(0x1a0))](),_0x6220e8=_0x46a444[_0x3dd226(0x1b1)]('Customers');return _0x6220e8['columns']=[{'header':_0x3dd226(0x1e7),'key':_0x3dd226(0x19a),'width':0xa},{'header':_0x3dd226(0x1f9),'key':'PUnits','width':0xa},{'header':_0x3dd226(0x1f6),'key':_0x3dd226(0x1f8),'width':0xa},{'header':'Mobile_number','key':_0x3dd226(0x19b),'width':0xa},{'header':'Company_Name','key':_0x3dd226(0x1ee),'width':0xa},{'header':_0x3dd226(0x19b),'key':_0x3dd226(0x1cf),'width':0xa}],_0x165a39[_0x3dd226(0x1ed)](_0x3dd226(0x1d6),_0x3dd226(0x1dd)),_0x165a39['setHeader']('Content-Disposition',_0x3dd226(0x1ec)),_0x46a444[_0x3dd226(0x1e5)]['write'](_0x165a39)[_0x3dd226(0x1c0)](()=>{_0x165a39['status'](0xc8);});}catch(_0x42f669){_0x165a39['status'](0x190)[_0x3dd226(0x1ef)]({'errors':_0x42f669[_0x3dd226(0x1d1)]});}});const storage1=multer[a0_0x4aea6c(0x1d3)]({'destination':(_0x43d100,_0x2bccf8,_0x1ff083)=>{const _0x3d4ea1=a0_0x4aea6c;_0x1ff083(null,_0x3d4ea1(0x1d4));},'filename':(_0x547c78,_0x1add51,_0x373e7f)=>{const _0x10524d=a0_0x4aea6c;_0x373e7f(null,Date[_0x10524d(0x1e2)]()+_0x1add51[_0x10524d(0x1d0)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x4aea6c(0x1fd),auth,uploadMigrate['single'](a0_0x4aea6c(0x1a3)),async(_0x2e199e,_0x1fefed)=>{const _0x1e664c=a0_0x4aea6c,_0x1975b8=_0x2e199e[_0x1e664c(0x19d)][_0x1e664c(0x19e)],_0x426b7e=await xlsx[_0x1e664c(0x1a5)](_0x1e664c(0x1f5)+_0x1975b8);let _0x5084fa=_0x426b7e[_0x1e664c(0x201)],_0x472e33=xlsx[_0x1e664c(0x1dc)]['sheet_to_json'](_0x426b7e['Sheets'][_0x5084fa[0x0]]);for(const _0x58e03d of _0x472e33){const _0x1603e6=_0x58e03d[_0x1e664c(0x1e7)],_0x5bcf33=_0x58e03d['Supplier_Code'],_0x22f17b=_0x58e03d[_0x1e664c(0x19b)],_0x32044f=_0x58e03d[_0x1e664c(0x1a4)],_0x37f900=_0x58e03d['Email'],_0x81a7d2=_0x58e03d['Company_Name'];try{let _0x5b2801=await suppliers[_0x1e664c(0x1b0)]({'name':_0x1603e6});if(!_0x5b2801){const _0x12ee0a=new suppliers({'name':_0x1603e6,'suppliers_code':_0x5bcf33,'address':_0x22f17b,'mobile':_0x32044f,'email':_0x37f900,'company':_0x81a7d2});_0x5b2801=await _0x12ee0a['save'](),_0x2e199e[_0x1e664c(0x203)](_0x1e664c(0x1b7),_0x1603e6+_0x1e664c(0x1e3));}else _0x2e199e[_0x1e664c(0x203)](_0x1e664c(0x1c2),_0x1603e6+_0x1e664c(0x1bd));}catch(_0x236c11){_0x1fefed[_0x1e664c(0x1ff)](0x1f4)[_0x1e664c(0x1cc)]({'proderror':_0x236c11[_0x1e664c(0x1d1)],'aproduct':ProductName});}}_0x1fefed[_0x1e664c(0x1bc)](_0x1e664c(0x1f2));}),module[a0_0x4aea6c(0x1cb)]=router;