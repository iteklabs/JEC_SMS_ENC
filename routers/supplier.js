function a0_0x1a1d(){const _0x21b685=['Portuguese\x20(BR)','$amount','English','../models/all_models','21855390tACUwH','supplier.js\x20payment_data','single','5603034KEYdQe','express','/supplier/view','Content-Type','exports','error','5SFpYem','doc','SalesmanName','suppliers_code','filename','Content-Disposition','success','master','supplier\x20data\x20add\x20successfully','email','payable_sum','columns','findById','Chinese','../middleware/auth','4132668SxBKNv','redirect','addWorksheet','s_payments','/supplier_import_migrate_file','name','company','reason','../public/language/languages.json','payable','file','/view/:id','originalname','setHeader','utils','data','28588CsLRTq','receivable_sum','purchase','body','Router','Arabic\x20(ae)','send','$reason','log','amount','Company_Name','readFile','French','save','Portuguese','Name','findOne','xlsx','map','9330592VIQaIW','English\x20(US)','render','Customers','Mobile_number','flash','Spanish','multer','public/Migration/','params','get','find','2733092xneJIk','Email','Hindi','suppliers_docs','\x20Failed','mobile','/products_export_migrate_file','now','address','supplier','PBrands','exceljs','7YlONSK','json','16kQKOfb','errors','language','Supplier_Code','user','German','status','suppliers','message','3257640cZYGpp','aggregate','post','SheetNames','Sheets','receivable','Arabic'];a0_0x1a1d=function(){return _0x21b685;};return a0_0x1a1d();}const a0_0x1a0d90=a0_0x333d;function a0_0x333d(_0x524a23,_0x5e6ef3){const _0x1a1df2=a0_0x1a1d();return a0_0x333d=function(_0x333d20,_0x109ea2){_0x333d20=_0x333d20-0x1db;let _0x37c1d0=_0x1a1df2[_0x333d20];return _0x37c1d0;},a0_0x333d(_0x524a23,_0x5e6ef3);}(function(_0x3edf1f,_0x55c9b0){const _0x1eb61a=a0_0x333d,_0x164c3f=_0x3edf1f();while(!![]){try{const _0x48e333=parseInt(_0x1eb61a(0x21f))/0x1*(-parseInt(_0x1eb61a(0x1e3))/0x2)+parseInt(_0x1eb61a(0x20f))/0x3+-parseInt(_0x1eb61a(0x23e))/0x4*(parseInt(_0x1eb61a(0x200))/0x5)+-parseInt(_0x1eb61a(0x1fa))/0x6*(-parseInt(_0x1eb61a(0x1e1))/0x7)+parseInt(_0x1eb61a(0x232))/0x8+parseInt(_0x1eb61a(0x1ec))/0x9+-parseInt(_0x1eb61a(0x1f7))/0xa;if(_0x48e333===_0x55c9b0)break;else _0x164c3f['push'](_0x164c3f['shift']());}catch(_0x4e9d68){_0x164c3f['push'](_0x164c3f['shift']());}}}(a0_0x1a1d,0xb5313));const express=require(a0_0x1a0d90(0x1fb)),app=express(),router=express[a0_0x1a0d90(0x223)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x1a0d90(0x1f6)),auth=require(a0_0x1a0d90(0x20e)),users=require(a0_0x1a0d90(0x217)),excelJS=require(a0_0x1a0d90(0x1e0)),xlsx=require(a0_0x1a0d90(0x230)),multer=require(a0_0x1a0d90(0x239));router['get']('/view',auth,async(_0x1f083e,_0x419eff)=>{const _0x27b2d2=a0_0x1a0d90;try{const {username:_0x546362,email:_0x57f9e8,role:_0x5a3275}=_0x1f083e[_0x27b2d2(0x1e7)],_0x2de14d=_0x1f083e[_0x27b2d2(0x1e7)],_0x5c1989=await profile['findOne']({'email':_0x2de14d[_0x27b2d2(0x209)]}),_0x1ab02d=await master_shop['find']();console[_0x27b2d2(0x227)]('master',_0x1ab02d);const _0x1fa839=await suppliers[_0x27b2d2(0x23d)]();console[_0x27b2d2(0x227)](_0x1fa839);const _0x1f6d87=await suppliers[_0x27b2d2(0x1ed)]([{'$lookup':{'from':_0x27b2d2(0x212),'localField':'name','foreignField':_0x27b2d2(0x1ea),'as':_0x27b2d2(0x241)}}]),_0x1cc84b=_0x1f6d87[_0x27b2d2(0x231)](_0x465f92=>{const _0x13d60a=_0x27b2d2;console[_0x13d60a(0x227)](_0x13d60a(0x21e),_0x465f92);var _0x19ab21=0x0,_0x376127=0x0;return _0x465f92[_0x13d60a(0x241)]['forEach'](_0x35504a=>{const _0x4eda8f=_0x13d60a;console['log'](_0x4eda8f(0x201),_0x35504a),_0x35504a[_0x4eda8f(0x216)]=='Purchase'?_0x19ab21+=_0x35504a[_0x4eda8f(0x228)]:_0x376127+=_0x35504a['amount'];}),_0x465f92[_0x13d60a(0x221)]=_0x19ab21,_0x465f92['purchase_return']=_0x376127,_0x465f92;});console[_0x27b2d2(0x227)](_0x27b2d2(0x1f8),_0x1cc84b);if(_0x1ab02d[0x0]['language']=='English\x20(US)'){var _0x149997=users[_0x27b2d2(0x1f5)];console[_0x27b2d2(0x227)](_0x149997);}else{if(_0x1ab02d[0x0][_0x27b2d2(0x1e5)]==_0x27b2d2(0x240))var _0x149997=users['Hindi'];else{if(_0x1ab02d[0x0][_0x27b2d2(0x1e5)]==_0x27b2d2(0x1e8))var _0x149997=users[_0x27b2d2(0x1e8)];else{if(_0x1ab02d[0x0][_0x27b2d2(0x1e5)]==_0x27b2d2(0x238))var _0x149997=users[_0x27b2d2(0x238)];else{if(_0x1ab02d[0x0][_0x27b2d2(0x1e5)]==_0x27b2d2(0x22b))var _0x149997=users[_0x27b2d2(0x22b)];else{if(_0x1ab02d[0x0][_0x27b2d2(0x1e5)]==_0x27b2d2(0x1f3))var _0x149997=users['Portuguese'];else{if(_0x1ab02d[0x0][_0x27b2d2(0x1e5)]==_0x27b2d2(0x20d))var _0x149997=users[_0x27b2d2(0x20d)];else{if(_0x1ab02d[0x0][_0x27b2d2(0x1e5)]=='Arabic\x20(ae)')var _0x149997=users[_0x27b2d2(0x1f2)];}}}}}}}_0x419eff['render']('supplier',{'success':_0x1f083e[_0x27b2d2(0x237)](_0x27b2d2(0x206)),'errors':_0x1f083e[_0x27b2d2(0x237)]('errors'),'user':_0x1fa839,'profile':_0x5c1989,'master_shop':_0x1ab02d,'role':_0x2de14d,'payment':_0x1cc84b,'language':_0x149997});}catch(_0x4fb06b){console['log'](_0x4fb06b);}}),router['post']('/view',auth,async(_0x1e4239,_0xe799e2)=>{const _0x4df965=a0_0x1a0d90;try{const {name:_0x18a1e3,email:_0x2072a9,mobile:_0x44db75,company:_0x14beb9,address:_0x289f55,receivable:_0x5a72a9,payable:_0x219fb5,code:_0x5454ae,contactperson:_0x49fbd7,landline:_0x3dd953}=_0x1e4239[_0x4df965(0x222)],_0x103d1f=new suppliers({'name':_0x18a1e3,'email':_0x2072a9,'mobile':_0x44db75,'company':_0x14beb9,'address':_0x289f55,'receivable':_0x5a72a9,'payable':_0x219fb5,'suppliers_code':_0x5454ae,'contactperson':_0x49fbd7,'landline':_0x3dd953}),_0x4d5e9f=await _0x103d1f[_0x4df965(0x22c)]();_0x1e4239['flash'](_0x4df965(0x206),_0x4df965(0x208)),_0xe799e2[_0x4df965(0x210)](_0x4df965(0x1fc));}catch(_0x134c94){console['log'](_0x134c94);}}),router[a0_0x1a0d90(0x23c)](a0_0x1a0d90(0x21a),auth,async(_0x1e2a29,_0x21b5a9)=>{const _0x2dab86=a0_0x1a0d90;try{const {username:_0xee44a3,email:_0x3c8705,role:_0x15ff7b}=_0x1e2a29['user'],_0x521145=_0x1e2a29[_0x2dab86(0x1e7)],_0x3ef14d=await profile['findOne']({'email':_0x521145['email']}),_0x5df198=await master_shop['find']();console[_0x2dab86(0x227)](_0x2dab86(0x207),_0x5df198);const _0x83b76b=_0x1e2a29['params']['id'],_0x5a4a12=await suppliers[_0x2dab86(0x20c)](_0x83b76b);console[_0x2dab86(0x227)](_0x5a4a12);if(_0x5df198[0x0][_0x2dab86(0x1e5)]==_0x2dab86(0x233)){var _0x579a57=users[_0x2dab86(0x1f5)];console['log'](_0x579a57);}else{if(_0x5df198[0x0][_0x2dab86(0x1e5)]==_0x2dab86(0x240))var _0x579a57=users[_0x2dab86(0x240)];else{if(_0x5df198[0x0][_0x2dab86(0x1e5)]=='German')var _0x579a57=users[_0x2dab86(0x1e8)];else{if(_0x5df198[0x0][_0x2dab86(0x1e5)]==_0x2dab86(0x238))var _0x579a57=users[_0x2dab86(0x238)];else{if(_0x5df198[0x0][_0x2dab86(0x1e5)]==_0x2dab86(0x22b))var _0x579a57=users[_0x2dab86(0x22b)];else{if(_0x5df198[0x0][_0x2dab86(0x1e5)]==_0x2dab86(0x1f3))var _0x579a57=users[_0x2dab86(0x22d)];else{if(_0x5df198[0x0][_0x2dab86(0x1e5)]==_0x2dab86(0x20d))var _0x579a57=users['Chinese'];else{if(_0x5df198[0x0][_0x2dab86(0x1e5)]==_0x2dab86(0x224))var _0x579a57=users[_0x2dab86(0x1f2)];}}}}}}}_0x21b5a9['render'](_0x2dab86(0x1de),{'success':_0x1e2a29[_0x2dab86(0x237)]('success'),'errors':_0x1e2a29['flash']('errors'),'role':_0x521145,'profile':_0x3ef14d,'master_shop':_0x5df198,'user':_0x5a4a12,'language':_0x579a57});}catch(_0x271f6c){console[_0x2dab86(0x227)](_0x271f6c);}}),router['post'](a0_0x1a0d90(0x21a),auth,async(_0xca78be,_0x22b415)=>{const _0x2b1211=a0_0x1a0d90;try{const _0x44e58c=_0xca78be[_0x2b1211(0x23b)]['id'],_0x11927e=await suppliers['findById'](_0x44e58c),{name:_0x49be6c,email:_0x412f44,mobile:_0x38e82d,company:_0x57b61d,address:_0x3495ec,receivable:_0x4bfda9,payable:_0x3fd62d,code:_0x54d21d,contactperson:_0xcfff37,landline:_0xedcab5}=_0xca78be[_0x2b1211(0x222)];_0x11927e[_0x2b1211(0x214)]=_0x49be6c,_0x11927e[_0x2b1211(0x209)]=_0x412f44,_0x11927e[_0x2b1211(0x243)]=_0x38e82d,_0x11927e[_0x2b1211(0x215)]=_0x57b61d,_0x11927e[_0x2b1211(0x1dd)]=_0x3495ec,_0x11927e[_0x2b1211(0x1f1)]=_0x4bfda9,_0x11927e[_0x2b1211(0x218)]=_0x3fd62d,_0x11927e[_0x2b1211(0x203)]=_0x54d21d,_0x11927e['contactperson']=_0xcfff37,_0x11927e['landline']=_0xedcab5;const _0x4eeb1e=await _0x11927e[_0x2b1211(0x22c)]();_0xca78be[_0x2b1211(0x237)](_0x2b1211(0x206),'supplier\x20data\x20update\x20successfully'),_0x22b415[_0x2b1211(0x210)](_0x2b1211(0x1fc));}catch(_0x3cdd59){console[_0x2b1211(0x227)](_0x3cdd59);}}),router[a0_0x1a0d90(0x23c)]('/view/payment/:id',auth,async(_0x197194,_0x3658c3)=>{const _0x33062f=a0_0x1a0d90;try{const {username:_0x4a6f9b,email:_0x304a67,role:_0x5d9d4d}=_0x197194[_0x33062f(0x1e7)],_0x42ed14=_0x197194['user'],_0x2657da=await profile[_0x33062f(0x22f)]({'email':_0x42ed14[_0x33062f(0x209)]}),_0x59b73f=await master_shop[_0x33062f(0x23d)]();console[_0x33062f(0x227)](_0x33062f(0x207),_0x59b73f),console[_0x33062f(0x227)](_0x197194[_0x33062f(0x23b)]['id']);const _0x511035=await suppliers[_0x33062f(0x22f)]({'_id':_0x197194['params']['id']});console[_0x33062f(0x227)](_0x511035);const _0x3f6d44=await s_payment_data[_0x33062f(0x23d)]({'suppliers':_0x511035[_0x33062f(0x214)]});console[_0x33062f(0x227)](_0x3f6d44);const _0x50f038=await s_payment_data['aggregate']([{'$match':{'suppliers':_0x511035[_0x33062f(0x214)]}},{'$match':{'reason':'Purchase'}},{'$group':{'_id':_0x33062f(0x226),'sum':{'$sum':_0x33062f(0x1f4)}}}]);console[_0x33062f(0x227)](_0x33062f(0x20a),_0x50f038);const _0x1fdb95=await s_payment_data[_0x33062f(0x1ed)]([{'$match':{'suppliers':_0x511035['name']}},{'$match':{'reason':'Purchase\x20Return'}},{'$group':{'_id':'$reason','sum':{'$sum':_0x33062f(0x1f4)}}}]);console['log'](_0x33062f(0x220),_0x1fdb95);if(_0x59b73f[0x0][_0x33062f(0x1e5)]==_0x33062f(0x233)){var _0x9aaeb6=users[_0x33062f(0x1f5)];console[_0x33062f(0x227)](_0x9aaeb6);}else{if(_0x59b73f[0x0][_0x33062f(0x1e5)]==_0x33062f(0x240))var _0x9aaeb6=users[_0x33062f(0x240)];else{if(_0x59b73f[0x0][_0x33062f(0x1e5)]==_0x33062f(0x1e8))var _0x9aaeb6=users[_0x33062f(0x1e8)];else{if(_0x59b73f[0x0][_0x33062f(0x1e5)]==_0x33062f(0x238))var _0x9aaeb6=users[_0x33062f(0x238)];else{if(_0x59b73f[0x0]['language']==_0x33062f(0x22b))var _0x9aaeb6=users[_0x33062f(0x22b)];else{if(_0x59b73f[0x0]['language']==_0x33062f(0x1f3))var _0x9aaeb6=users[_0x33062f(0x22d)];else{if(_0x59b73f[0x0]['language']==_0x33062f(0x20d))var _0x9aaeb6=users[_0x33062f(0x20d)];else{if(_0x59b73f[0x0][_0x33062f(0x1e5)]==_0x33062f(0x224))var _0x9aaeb6=users['Arabic'];}}}}}}}_0x3658c3[_0x33062f(0x234)]('supplier_payment',{'success':_0x197194[_0x33062f(0x237)](_0x33062f(0x206)),'errors':_0x197194[_0x33062f(0x237)](_0x33062f(0x1e4)),'role':_0x42ed14,'profile':_0x2657da,'master_shop':_0x59b73f,'payment':_0x3f6d44,'payable':_0x50f038,'receivable':_0x1fdb95,'language':_0x9aaeb6});}catch(_0xf0f030){console[_0x33062f(0x227)](_0xf0f030);}}),router[a0_0x1a0d90(0x23c)](a0_0x1a0d90(0x1db),auth,async(_0x1f949e,_0x3ded71)=>{const _0x2b4536=a0_0x1a0d90;try{const _0x2dbfe6=new excelJS['Workbook'](),_0x5a81c7=_0x2dbfe6[_0x2b4536(0x211)](_0x2b4536(0x235));return _0x5a81c7[_0x2b4536(0x20b)]=[{'header':_0x2b4536(0x22e),'key':_0x2b4536(0x1df),'width':0xa},{'header':_0x2b4536(0x1e6),'key':'PUnits','width':0xa},{'header':_0x2b4536(0x23f),'key':_0x2b4536(0x202),'width':0xa},{'header':_0x2b4536(0x236),'key':_0x2b4536(0x1dd),'width':0xa},{'header':_0x2b4536(0x229),'key':_0x2b4536(0x243),'width':0xa},{'header':'address','key':_0x2b4536(0x209),'width':0xa}],_0x3ded71[_0x2b4536(0x21c)](_0x2b4536(0x1fd),'application/vnd.openxmlformats-officedocument.spreadsheatml.sheet'),_0x3ded71['setHeader'](_0x2b4536(0x205),'attachment;\x20filename=supplier_Migration_File.xlsx'),_0x2dbfe6['xlsx']['write'](_0x3ded71)['then'](()=>{const _0x1afb35=_0x2b4536;_0x3ded71[_0x1afb35(0x1e9)](0xc8);});}catch(_0x22b9cd){_0x3ded71[_0x2b4536(0x1e9)](0x190)[_0x2b4536(0x225)]({'errors':_0x22b9cd[_0x2b4536(0x1eb)]});}});const storage1=multer['diskStorage']({'destination':(_0x3f1a36,_0x83f851,_0x6873b2)=>{_0x6873b2(null,'public/Migration');},'filename':(_0x2c7049,_0x56bcbd,_0x4727cf)=>{const _0xad1055=a0_0x1a0d90;_0x4727cf(null,Date[_0xad1055(0x1dc)]()+_0x56bcbd[_0xad1055(0x21b)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x1a0d90(0x1ee)](a0_0x1a0d90(0x213),auth,uploadMigrate[a0_0x1a0d90(0x1f9)]('supplier_product_file'),async(_0x3faf87,_0x43bac6)=>{const _0x2f37da=a0_0x1a0d90,_0x44950d=_0x3faf87[_0x2f37da(0x219)][_0x2f37da(0x204)],_0x6b2aa=await xlsx[_0x2f37da(0x22a)](_0x2f37da(0x23a)+_0x44950d);let _0x109a00=_0x6b2aa[_0x2f37da(0x1ef)],_0x4aab2e=xlsx[_0x2f37da(0x21d)]['sheet_to_json'](_0x6b2aa[_0x2f37da(0x1f0)][_0x109a00[0x0]]);for(const _0x27261c of _0x4aab2e){const _0x580297=_0x27261c[_0x2f37da(0x22e)],_0x1d07e8=_0x27261c[_0x2f37da(0x1e6)],_0x43013a=_0x27261c[_0x2f37da(0x1dd)],_0xd2145b=_0x27261c[_0x2f37da(0x236)],_0x18d0fe=_0x27261c[_0x2f37da(0x23f)],_0x342870=_0x27261c[_0x2f37da(0x229)];try{let _0x30f215=await suppliers['findOne']({'name':_0x580297});if(!_0x30f215){const _0x31484a=new suppliers({'name':_0x580297,'suppliers_code':_0x1d07e8,'address':_0x43013a,'mobile':_0xd2145b,'email':_0x18d0fe,'company':_0x342870});_0x30f215=await _0x31484a['save'](),_0x3faf87[_0x2f37da(0x237)](_0x2f37da(0x206),_0x580297+'\x20added\x20successfully');}else _0x3faf87[_0x2f37da(0x237)](_0x2f37da(0x1ff),_0x580297+_0x2f37da(0x242));}catch(_0x2025bb){_0x43bac6[_0x2f37da(0x1e9)](0x1f4)[_0x2f37da(0x1e2)]({'proderror':_0x2025bb[_0x2f37da(0x1eb)],'aproduct':ProductName});}}_0x43bac6[_0x2f37da(0x210)](_0x2f37da(0x1fc));}),module[a0_0x1a0d90(0x1fe)]=router;