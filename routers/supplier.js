function a0_0x4c73(_0x509848,_0x225574){const _0x30c6aa=a0_0x30c6();return a0_0x4c73=function(_0x4c73c6,_0x2b1b25){_0x4c73c6=_0x4c73c6-0x1b1;let _0x290e10=_0x30c6aa[_0x4c73c6];return _0x290e10;},a0_0x4c73(_0x509848,_0x225574);}function a0_0x30c6(){const _0x4d84e9=['send','forEach','Hindi','Spanish','supplier\x20data\x20add\x20successfully','multer','Email','Arabic\x20(ae)','77605rrQRlW','language','/supplier_import_migrate_file','Name','user','Purchase\x20Return','Portuguese','params','English\x20(US)','originalname','Content-Type','save','suppliers','supplier_product_file','columns','log','addWorksheet','name','setHeader','message','reason','findById','errors','SheetNames','get','95041imAHDm','readFile','purchase_return','master','map','5SOcwMu','data','$amount','suppliers_docs','Company_Name','supplier','/view','json','../models/all_models','find','Content-Disposition','Router','success','redirect','Purchase','5313592bXyIAg','write','status','Supplier_Code','post','suppliers_code','/view/payment/:id','/supplier/view','aggregate','/view/:id','xlsx','then','address','flash','supplier_payment','Portuguese\x20(BR)','attachment;\x20filename=supplier_Migration_File.xlsx','../middleware/auth','1928ekHwjq','utils','5030DwasZU','diskStorage','receivable_sum','Chinese','92998XZvCFt','file','doc','11257299FblImB','mobile','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','public/Migration/','Arabic','32844FqDAOL','now','findOne','\x20Failed','/products_export_migrate_file','\x20added\x20successfully','landline','s_payments','27eKIIrY','exports','Mobile_number','supplier.js\x20payment_data','public/Migration','sheet_to_json','PUnits','payable','body','English','French','express','8622414SEPMjJ','$reason','email','German','Sheets','Workbook','PBrands'];a0_0x30c6=function(){return _0x4d84e9;};return a0_0x30c6();}const a0_0x51e2db=a0_0x4c73;(function(_0x4f745a,_0x5bccfd){const _0x28c6dc=a0_0x4c73,_0x16a1a6=_0x4f745a();while(!![]){try{const _0x104f86=parseInt(_0x28c6dc(0x21f))/0x1+parseInt(_0x28c6dc(0x1db))/0x2*(-parseInt(_0x28c6dc(0x1eb))/0x3)+-parseInt(_0x28c6dc(0x1c3))/0x4*(-parseInt(_0x28c6dc(0x1b4))/0x5)+-parseInt(_0x28c6dc(0x1f7))/0x6+parseInt(_0x28c6dc(0x1e3))/0x7*(-parseInt(_0x28c6dc(0x1d5))/0x8)+-parseInt(_0x28c6dc(0x1de))/0x9+-parseInt(_0x28c6dc(0x1d7))/0xa*(-parseInt(_0x28c6dc(0x206))/0xb);if(_0x104f86===_0x5bccfd)break;else _0x16a1a6['push'](_0x16a1a6['shift']());}catch(_0x26e154){_0x16a1a6['push'](_0x16a1a6['shift']());}}}(a0_0x30c6,0xb36f1));const express=require(a0_0x51e2db(0x1f6)),app=express(),router=express[a0_0x51e2db(0x1bf)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x51e2db(0x1bc)),auth=require(a0_0x51e2db(0x1d4)),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require('xlsx'),multer=require(a0_0x51e2db(0x203));router[a0_0x51e2db(0x21e)](a0_0x51e2db(0x1ba),auth,async(_0x120b2f,_0xc583a1)=>{const _0x1aea7c=a0_0x51e2db;try{const {username:_0xcca0ba,email:_0x49219e,role:_0x3574df}=_0x120b2f[_0x1aea7c(0x20a)],_0x3b216d=_0x120b2f[_0x1aea7c(0x20a)],_0x632560=await profile[_0x1aea7c(0x1e5)]({'email':_0x3b216d['email']}),_0xb68fff=await master_shop[_0x1aea7c(0x1bd)]();console[_0x1aea7c(0x215)](_0x1aea7c(0x1b2),_0xb68fff);const _0x3bce5e=await suppliers[_0x1aea7c(0x1bd)]();console[_0x1aea7c(0x215)](_0x3bce5e);const _0xf58072=await suppliers[_0x1aea7c(0x1cb)]([{'$lookup':{'from':_0x1aea7c(0x1ea),'localField':_0x1aea7c(0x217),'foreignField':_0x1aea7c(0x212),'as':'suppliers_docs'}}]),_0x3f9f25=_0xf58072[_0x1aea7c(0x1b3)](_0x4479d8=>{const _0x3a525b=_0x1aea7c;console[_0x3a525b(0x215)](_0x3a525b(0x1b5),_0x4479d8);var _0x256a89=0x0,_0x129015=0x0;return _0x4479d8[_0x3a525b(0x1b7)][_0x3a525b(0x1ff)](_0x3e744e=>{const _0x32173d=_0x3a525b;console[_0x32173d(0x215)](_0x32173d(0x1dd),_0x3e744e),_0x3e744e[_0x32173d(0x21a)]=='Purchase'?_0x256a89+=_0x3e744e['amount']:_0x129015+=_0x3e744e['amount'];}),_0x4479d8['purchase']=_0x256a89,_0x4479d8[_0x3a525b(0x1b1)]=_0x129015,_0x4479d8;});console['log'](_0x1aea7c(0x1ee),_0x3f9f25);if(_0xb68fff[0x0]['language']=='English\x20(US)'){var _0x32bf20=users['English'];console['log'](_0x32bf20);}else{if(_0xb68fff[0x0][_0x1aea7c(0x207)]==_0x1aea7c(0x200))var _0x32bf20=users[_0x1aea7c(0x200)];else{if(_0xb68fff[0x0][_0x1aea7c(0x207)]==_0x1aea7c(0x1fa))var _0x32bf20=users['German'];else{if(_0xb68fff[0x0][_0x1aea7c(0x207)]==_0x1aea7c(0x201))var _0x32bf20=users[_0x1aea7c(0x201)];else{if(_0xb68fff[0x0]['language']==_0x1aea7c(0x1f5))var _0x32bf20=users[_0x1aea7c(0x1f5)];else{if(_0xb68fff[0x0][_0x1aea7c(0x207)]==_0x1aea7c(0x1d2))var _0x32bf20=users[_0x1aea7c(0x20c)];else{if(_0xb68fff[0x0][_0x1aea7c(0x207)]==_0x1aea7c(0x1da))var _0x32bf20=users[_0x1aea7c(0x1da)];else{if(_0xb68fff[0x0][_0x1aea7c(0x207)]==_0x1aea7c(0x205))var _0x32bf20=users[_0x1aea7c(0x1e2)];}}}}}}}_0xc583a1['render'](_0x1aea7c(0x1b9),{'success':_0x120b2f[_0x1aea7c(0x1d0)](_0x1aea7c(0x1c0)),'errors':_0x120b2f[_0x1aea7c(0x1d0)](_0x1aea7c(0x21c)),'user':_0x3bce5e,'profile':_0x632560,'master_shop':_0xb68fff,'role':_0x3b216d,'payment':_0x3f9f25,'language':_0x32bf20});}catch(_0x2fdc57){console[_0x1aea7c(0x215)](_0x2fdc57);}}),router['post']('/view',auth,async(_0x595b66,_0x502dcb)=>{const _0x23f63c=a0_0x51e2db;try{const {name:_0x594272,email:_0x224554,mobile:_0x398dad,company:_0x3a071f,address:_0x19e27c,receivable:_0x227ad3,payable:_0x5acca4,code:_0x582471,contactperson:_0x32780f,landline:_0x4adf9f}=_0x595b66[_0x23f63c(0x1f3)],_0x3160b0=new suppliers({'name':_0x594272,'email':_0x224554,'mobile':_0x398dad,'company':_0x3a071f,'address':_0x19e27c,'receivable':_0x227ad3,'payable':_0x5acca4,'suppliers_code':_0x582471,'contactperson':_0x32780f,'landline':_0x4adf9f}),_0x5a8a31=await _0x3160b0[_0x23f63c(0x211)]();_0x595b66['flash']('success',_0x23f63c(0x202)),_0x502dcb[_0x23f63c(0x1c1)](_0x23f63c(0x1ca));}catch(_0x182a2d){console[_0x23f63c(0x215)](_0x182a2d);}}),router['get']('/view/:id',auth,async(_0xab29ec,_0x373593)=>{const _0x355b1c=a0_0x51e2db;try{const {username:_0x17be65,email:_0x4275be,role:_0x3be423}=_0xab29ec['user'],_0x135987=_0xab29ec[_0x355b1c(0x20a)],_0x2e9905=await profile[_0x355b1c(0x1e5)]({'email':_0x135987[_0x355b1c(0x1f9)]}),_0x37f991=await master_shop[_0x355b1c(0x1bd)]();console['log']('master',_0x37f991);const _0x19a341=_0xab29ec[_0x355b1c(0x20d)]['id'],_0x5f39f4=await suppliers['findById'](_0x19a341);console['log'](_0x5f39f4);if(_0x37f991[0x0]['language']==_0x355b1c(0x20e)){var _0x1d9790=users[_0x355b1c(0x1f4)];console[_0x355b1c(0x215)](_0x1d9790);}else{if(_0x37f991[0x0][_0x355b1c(0x207)]==_0x355b1c(0x200))var _0x1d9790=users[_0x355b1c(0x200)];else{if(_0x37f991[0x0]['language']==_0x355b1c(0x1fa))var _0x1d9790=users[_0x355b1c(0x1fa)];else{if(_0x37f991[0x0][_0x355b1c(0x207)]=='Spanish')var _0x1d9790=users['Spanish'];else{if(_0x37f991[0x0][_0x355b1c(0x207)]==_0x355b1c(0x1f5))var _0x1d9790=users[_0x355b1c(0x1f5)];else{if(_0x37f991[0x0][_0x355b1c(0x207)]==_0x355b1c(0x1d2))var _0x1d9790=users[_0x355b1c(0x20c)];else{if(_0x37f991[0x0]['language']==_0x355b1c(0x1da))var _0x1d9790=users[_0x355b1c(0x1da)];else{if(_0x37f991[0x0][_0x355b1c(0x207)]==_0x355b1c(0x205))var _0x1d9790=users[_0x355b1c(0x1e2)];}}}}}}}_0x373593['render']('supplier',{'success':_0xab29ec[_0x355b1c(0x1d0)](_0x355b1c(0x1c0)),'errors':_0xab29ec['flash'](_0x355b1c(0x21c)),'role':_0x135987,'profile':_0x2e9905,'master_shop':_0x37f991,'user':_0x5f39f4,'language':_0x1d9790});}catch(_0x5c96b9){console['log'](_0x5c96b9);}}),router[a0_0x51e2db(0x1c7)](a0_0x51e2db(0x1cc),auth,async(_0x40d70f,_0x4033dd)=>{const _0x38452d=a0_0x51e2db;try{const _0x2243f8=_0x40d70f[_0x38452d(0x20d)]['id'],_0x2e6541=await suppliers[_0x38452d(0x21b)](_0x2243f8),{name:_0x431903,email:_0x47b765,mobile:_0x2318aa,company:_0xd0617,address:_0x14137c,receivable:_0x36afc5,payable:_0x2c0d61,code:_0x53ddb7,contactperson:_0x39b03d,landline:_0x2a9fbe}=_0x40d70f[_0x38452d(0x1f3)];_0x2e6541[_0x38452d(0x217)]=_0x431903,_0x2e6541['email']=_0x47b765,_0x2e6541[_0x38452d(0x1df)]=_0x2318aa,_0x2e6541['company']=_0xd0617,_0x2e6541[_0x38452d(0x1cf)]=_0x14137c,_0x2e6541['receivable']=_0x36afc5,_0x2e6541[_0x38452d(0x1f2)]=_0x2c0d61,_0x2e6541[_0x38452d(0x1c8)]=_0x53ddb7,_0x2e6541['contactperson']=_0x39b03d,_0x2e6541[_0x38452d(0x1e9)]=_0x2a9fbe;const _0x4667bd=await _0x2e6541[_0x38452d(0x211)]();_0x40d70f[_0x38452d(0x1d0)](_0x38452d(0x1c0),'supplier\x20data\x20update\x20successfully'),_0x4033dd[_0x38452d(0x1c1)](_0x38452d(0x1ca));}catch(_0x4d38bd){console[_0x38452d(0x215)](_0x4d38bd);}}),router[a0_0x51e2db(0x21e)](a0_0x51e2db(0x1c9),auth,async(_0x59cd99,_0x449904)=>{const _0x432f93=a0_0x51e2db;try{const {username:_0x5ce538,email:_0x3bca38,role:_0x508a22}=_0x59cd99['user'],_0x241680=_0x59cd99[_0x432f93(0x20a)],_0x188d9f=await profile[_0x432f93(0x1e5)]({'email':_0x241680[_0x432f93(0x1f9)]}),_0x4b729a=await master_shop[_0x432f93(0x1bd)]();console[_0x432f93(0x215)](_0x432f93(0x1b2),_0x4b729a),console[_0x432f93(0x215)](_0x59cd99[_0x432f93(0x20d)]['id']);const _0x500212=await suppliers['findOne']({'_id':_0x59cd99['params']['id']});console[_0x432f93(0x215)](_0x500212);const _0x3d7d7a=await s_payment_data[_0x432f93(0x1bd)]({'suppliers':_0x500212[_0x432f93(0x217)]});console[_0x432f93(0x215)](_0x3d7d7a);const _0x17e4ac=await s_payment_data[_0x432f93(0x1cb)]([{'$match':{'suppliers':_0x500212[_0x432f93(0x217)]}},{'$match':{'reason':_0x432f93(0x1c2)}},{'$group':{'_id':_0x432f93(0x1f8),'sum':{'$sum':_0x432f93(0x1b6)}}}]);console[_0x432f93(0x215)]('payable_sum',_0x17e4ac);const _0x1fbb8d=await s_payment_data[_0x432f93(0x1cb)]([{'$match':{'suppliers':_0x500212[_0x432f93(0x217)]}},{'$match':{'reason':_0x432f93(0x20b)}},{'$group':{'_id':_0x432f93(0x1f8),'sum':{'$sum':_0x432f93(0x1b6)}}}]);console[_0x432f93(0x215)](_0x432f93(0x1d9),_0x1fbb8d);if(_0x4b729a[0x0]['language']==_0x432f93(0x20e)){var _0xcc6e3e=users[_0x432f93(0x1f4)];console[_0x432f93(0x215)](_0xcc6e3e);}else{if(_0x4b729a[0x0]['language']==_0x432f93(0x200))var _0xcc6e3e=users[_0x432f93(0x200)];else{if(_0x4b729a[0x0][_0x432f93(0x207)]=='German')var _0xcc6e3e=users['German'];else{if(_0x4b729a[0x0]['language']==_0x432f93(0x201))var _0xcc6e3e=users[_0x432f93(0x201)];else{if(_0x4b729a[0x0][_0x432f93(0x207)]==_0x432f93(0x1f5))var _0xcc6e3e=users['French'];else{if(_0x4b729a[0x0][_0x432f93(0x207)]==_0x432f93(0x1d2))var _0xcc6e3e=users[_0x432f93(0x20c)];else{if(_0x4b729a[0x0][_0x432f93(0x207)]==_0x432f93(0x1da))var _0xcc6e3e=users[_0x432f93(0x1da)];else{if(_0x4b729a[0x0][_0x432f93(0x207)]=='Arabic\x20(ae)')var _0xcc6e3e=users[_0x432f93(0x1e2)];}}}}}}}_0x449904['render'](_0x432f93(0x1d1),{'success':_0x59cd99[_0x432f93(0x1d0)]('success'),'errors':_0x59cd99[_0x432f93(0x1d0)](_0x432f93(0x21c)),'role':_0x241680,'profile':_0x188d9f,'master_shop':_0x4b729a,'payment':_0x3d7d7a,'payable':_0x17e4ac,'receivable':_0x1fbb8d,'language':_0xcc6e3e});}catch(_0x23a7a5){console[_0x432f93(0x215)](_0x23a7a5);}}),router[a0_0x51e2db(0x21e)](a0_0x51e2db(0x1e7),auth,async(_0x596ed,_0x19c842)=>{const _0x5a5bc2=a0_0x51e2db;try{const _0x2706d3=new excelJS[(_0x5a5bc2(0x1fc))](),_0x13cff3=_0x2706d3[_0x5a5bc2(0x216)]('Customers');return _0x13cff3[_0x5a5bc2(0x214)]=[{'header':_0x5a5bc2(0x209),'key':_0x5a5bc2(0x1fd),'width':0xa},{'header':_0x5a5bc2(0x1c6),'key':_0x5a5bc2(0x1f1),'width':0xa},{'header':'Email','key':'SalesmanName','width':0xa},{'header':_0x5a5bc2(0x1ed),'key':_0x5a5bc2(0x1cf),'width':0xa},{'header':_0x5a5bc2(0x1b8),'key':'mobile','width':0xa},{'header':'address','key':'email','width':0xa}],_0x19c842[_0x5a5bc2(0x218)](_0x5a5bc2(0x210),_0x5a5bc2(0x1e0)),_0x19c842[_0x5a5bc2(0x218)](_0x5a5bc2(0x1be),_0x5a5bc2(0x1d3)),_0x2706d3[_0x5a5bc2(0x1cd)][_0x5a5bc2(0x1c4)](_0x19c842)[_0x5a5bc2(0x1ce)](()=>{const _0x2f8b43=_0x5a5bc2;_0x19c842[_0x2f8b43(0x1c5)](0xc8);});}catch(_0xb8ccb1){_0x19c842[_0x5a5bc2(0x1c5)](0x190)[_0x5a5bc2(0x1fe)]({'errors':_0xb8ccb1[_0x5a5bc2(0x219)]});}});const storage1=multer[a0_0x51e2db(0x1d8)]({'destination':(_0xd05ad1,_0x2bdff9,_0x325401)=>{const _0x3eb271=a0_0x51e2db;_0x325401(null,_0x3eb271(0x1ef));},'filename':(_0x45d02a,_0x256246,_0x9f316c)=>{const _0x38dd99=a0_0x51e2db;_0x9f316c(null,Date[_0x38dd99(0x1e4)]()+_0x256246[_0x38dd99(0x20f)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x51e2db(0x208),auth,uploadMigrate['single'](a0_0x51e2db(0x213)),async(_0x25ec02,_0x384b5d)=>{const _0x15e46a=a0_0x51e2db,_0x5c30a9=_0x25ec02[_0x15e46a(0x1dc)]['filename'],_0x561ebb=await xlsx[_0x15e46a(0x220)](_0x15e46a(0x1e1)+_0x5c30a9);let _0x1fbc85=_0x561ebb[_0x15e46a(0x21d)],_0xa4f242=xlsx[_0x15e46a(0x1d6)][_0x15e46a(0x1f0)](_0x561ebb[_0x15e46a(0x1fb)][_0x1fbc85[0x0]]);for(const _0x201742 of _0xa4f242){const _0x5756d6=_0x201742[_0x15e46a(0x209)],_0x4c377b=_0x201742[_0x15e46a(0x1c6)],_0x4ac61b=_0x201742[_0x15e46a(0x1cf)],_0x12f133=_0x201742['Mobile_number'],_0x28d3c7=_0x201742[_0x15e46a(0x204)],_0x4a2134=_0x201742[_0x15e46a(0x1b8)];try{let _0x52053e=await suppliers[_0x15e46a(0x1e5)]({'name':_0x5756d6});if(!_0x52053e){const _0x351149=new suppliers({'name':_0x5756d6,'suppliers_code':_0x4c377b,'address':_0x4ac61b,'mobile':_0x12f133,'email':_0x28d3c7,'company':_0x4a2134});_0x52053e=await _0x351149[_0x15e46a(0x211)](),_0x25ec02[_0x15e46a(0x1d0)](_0x15e46a(0x1c0),_0x5756d6+_0x15e46a(0x1e8));}else _0x25ec02[_0x15e46a(0x1d0)]('error',_0x5756d6+_0x15e46a(0x1e6));}catch(_0x4820b3){_0x384b5d[_0x15e46a(0x1c5)](0x1f4)[_0x15e46a(0x1bb)]({'proderror':_0x4820b3[_0x15e46a(0x219)],'aproduct':ProductName});}}_0x384b5d[_0x15e46a(0x1c1)]('/supplier/view');}),module[a0_0x51e2db(0x1ec)]=router;