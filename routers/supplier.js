function a0_0x3752(){const _0x4a7e61=['findById','public/Migration/','doc','12497630WpEwCR','exceljs','Content-Disposition','flash','xlsx','sheet_to_json','exports','6HMPsEi','/supplier_import_migrate_file','supplier\x20data\x20update\x20successfully','save','Company_Name','receivable','contactperson','Mobile_number','amount','forEach','/view/:id','Portuguese','success','utils','errors','5EqJLCZ','data','map','language','Arabic\x20(ae)','$amount','Content-Type','public/Migration','Chinese','setHeader','Email','json','Hindi','English\x20(US)','email','Workbook','1055352scAUZb','render','status','../middleware/auth','user','findOne','filename','write','landline','purchase_return','Arabic','supplier_product_file','attachment;\x20filename=supplier_Migration_File.xlsx','payable_sum','Customers','supplier','suppliers_code','English','$reason','/supplier/view','company','express','German','send','Purchase','4821303cvVVfr','supplier\x20data\x20add\x20successfully','Supplier_Code','s_payments','body','2QhMVzM','now','71620692fTYjnB','payable','aggregate','../public/language/languages.json','columns','get','suppliers_docs','French','PBrands','2515372kyNLia','single','then','/view','Portuguese\x20(BR)','mobile','addWorksheet','Name','message','log','3370934JZWUoT','Router','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','params','Spanish','redirect','SalesmanName','supplier_payment','post','file','master','Purchase\x20Return','address','suppliers','reason','name','originalname','\x20Failed','purchase','808kxqngz','find','../models/all_models','57393UVZlzk'];a0_0x3752=function(){return _0x4a7e61;};return a0_0x3752();}function a0_0x3716(_0x7a2260,_0x54df60){const _0x375271=a0_0x3752();return a0_0x3716=function(_0x371660,_0x2d7431){_0x371660=_0x371660-0x11b;let _0x16d9f4=_0x375271[_0x371660];return _0x16d9f4;},a0_0x3716(_0x7a2260,_0x54df60);}const a0_0x529d79=a0_0x3716;(function(_0xf1f8e3,_0x2b0499){const _0x2f6914=a0_0x3716,_0x5e0944=_0xf1f8e3();while(!![]){try{const _0x370c95=-parseInt(_0x2f6914(0x12e))/0x1*(parseInt(_0x2f6914(0x183))/0x2)+-parseInt(_0x2f6914(0x129))/0x3+parseInt(_0x2f6914(0x139))/0x4*(-parseInt(_0x2f6914(0x173))/0x5)+parseInt(_0x2f6914(0x164))/0x6*(-parseInt(_0x2f6914(0x143))/0x7)+-parseInt(_0x2f6914(0x156))/0x8*(parseInt(_0x2f6914(0x159))/0x9)+-parseInt(_0x2f6914(0x15d))/0xa+parseInt(_0x2f6914(0x130))/0xb;if(_0x370c95===_0x2b0499)break;else _0x5e0944['push'](_0x5e0944['shift']());}catch(_0x8addd7){_0x5e0944['push'](_0x5e0944['shift']());}}}(a0_0x3752,0xce1f2));const express=require(a0_0x529d79(0x125)),app=express(),router=express[a0_0x529d79(0x144)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x529d79(0x158)),auth=require(a0_0x529d79(0x186)),users=require(a0_0x529d79(0x133)),excelJS=require(a0_0x529d79(0x15e)),xlsx=require(a0_0x529d79(0x161)),multer=require('multer');router[a0_0x529d79(0x135)]('/view',auth,async(_0x5a3046,_0x24abe0)=>{const _0x3bb24d=a0_0x529d79;try{const {username:_0x29910c,email:_0x2c794c,role:_0x70a075}=_0x5a3046['user'],_0x3dd882=_0x5a3046[_0x3bb24d(0x187)],_0x11c7b4=await profile['findOne']({'email':_0x3dd882[_0x3bb24d(0x181)]}),_0x4556a3=await master_shop[_0x3bb24d(0x157)]();console[_0x3bb24d(0x142)](_0x3bb24d(0x14d),_0x4556a3);const _0x599a46=await suppliers[_0x3bb24d(0x157)]();console[_0x3bb24d(0x142)](_0x599a46);const _0x4fdb61=await suppliers[_0x3bb24d(0x132)]([{'$lookup':{'from':_0x3bb24d(0x12c),'localField':_0x3bb24d(0x152),'foreignField':_0x3bb24d(0x150),'as':'suppliers_docs'}}]),_0x49610c=_0x4fdb61[_0x3bb24d(0x175)](_0x2a85ee=>{const _0x5f1210=_0x3bb24d;console[_0x5f1210(0x142)](_0x5f1210(0x174),_0x2a85ee);var _0x57fd54=0x0,_0x3b2fda=0x0;return _0x2a85ee[_0x5f1210(0x136)][_0x5f1210(0x16d)](_0x2b6be0=>{const _0x4a6bb3=_0x5f1210;console[_0x4a6bb3(0x142)](_0x4a6bb3(0x15c),_0x2b6be0),_0x2b6be0[_0x4a6bb3(0x151)]==_0x4a6bb3(0x128)?_0x57fd54+=_0x2b6be0['amount']:_0x3b2fda+=_0x2b6be0[_0x4a6bb3(0x16c)];}),_0x2a85ee[_0x5f1210(0x155)]=_0x57fd54,_0x2a85ee[_0x5f1210(0x18c)]=_0x3b2fda,_0x2a85ee;});console[_0x3bb24d(0x142)]('supplier.js\x20payment_data',_0x49610c);if(_0x4556a3[0x0][_0x3bb24d(0x176)]==_0x3bb24d(0x180)){var _0x3a03bf=users['English'];console[_0x3bb24d(0x142)](_0x3a03bf);}else{if(_0x4556a3[0x0][_0x3bb24d(0x176)]==_0x3bb24d(0x17f))var _0x3a03bf=users[_0x3bb24d(0x17f)];else{if(_0x4556a3[0x0][_0x3bb24d(0x176)]==_0x3bb24d(0x126))var _0x3a03bf=users[_0x3bb24d(0x126)];else{if(_0x4556a3[0x0]['language']==_0x3bb24d(0x147))var _0x3a03bf=users['Spanish'];else{if(_0x4556a3[0x0][_0x3bb24d(0x176)]==_0x3bb24d(0x137))var _0x3a03bf=users[_0x3bb24d(0x137)];else{if(_0x4556a3[0x0]['language']=='Portuguese\x20(BR)')var _0x3a03bf=users['Portuguese'];else{if(_0x4556a3[0x0][_0x3bb24d(0x176)]=='Chinese')var _0x3a03bf=users[_0x3bb24d(0x17b)];else{if(_0x4556a3[0x0]['language']=='Arabic\x20(ae)')var _0x3a03bf=users[_0x3bb24d(0x18d)];}}}}}}}_0x24abe0[_0x3bb24d(0x184)](_0x3bb24d(0x11f),{'success':_0x5a3046[_0x3bb24d(0x160)](_0x3bb24d(0x170)),'errors':_0x5a3046['flash'](_0x3bb24d(0x172)),'user':_0x599a46,'profile':_0x11c7b4,'master_shop':_0x4556a3,'role':_0x3dd882,'payment':_0x49610c,'language':_0x3a03bf});}catch(_0x15e4b4){console[_0x3bb24d(0x142)](_0x15e4b4);}}),router[a0_0x529d79(0x14b)](a0_0x529d79(0x13c),auth,async(_0x2ed0ae,_0x4fb448)=>{const _0x27f4fa=a0_0x529d79;try{const {name:_0x43996c,email:_0x35bfdc,mobile:_0x463cb7,company:_0x6d558e,address:_0x1f1fe8,receivable:_0x2a230d,payable:_0x5d0d3f,code:_0x2a076a,contactperson:_0x470fbd,landline:_0x2e1414}=_0x2ed0ae[_0x27f4fa(0x12d)],_0x4f51bd=new suppliers({'name':_0x43996c,'email':_0x35bfdc,'mobile':_0x463cb7,'company':_0x6d558e,'address':_0x1f1fe8,'receivable':_0x2a230d,'payable':_0x5d0d3f,'suppliers_code':_0x2a076a,'contactperson':_0x470fbd,'landline':_0x2e1414}),_0x3e70a7=await _0x4f51bd[_0x27f4fa(0x167)]();_0x2ed0ae[_0x27f4fa(0x160)](_0x27f4fa(0x170),_0x27f4fa(0x12a)),_0x4fb448[_0x27f4fa(0x148)]('/supplier/view');}catch(_0xda3895){console[_0x27f4fa(0x142)](_0xda3895);}}),router[a0_0x529d79(0x135)](a0_0x529d79(0x16e),auth,async(_0x16f0ce,_0x77b7c4)=>{const _0x218a7f=a0_0x529d79;try{const {username:_0x1c8ff0,email:_0x31d3e5,role:_0x422191}=_0x16f0ce[_0x218a7f(0x187)],_0x37fcc9=_0x16f0ce['user'],_0x1b73b1=await profile[_0x218a7f(0x188)]({'email':_0x37fcc9['email']}),_0x2a2f83=await master_shop[_0x218a7f(0x157)]();console[_0x218a7f(0x142)]('master',_0x2a2f83);const _0x160178=_0x16f0ce[_0x218a7f(0x146)]['id'],_0x113240=await suppliers[_0x218a7f(0x15a)](_0x160178);console[_0x218a7f(0x142)](_0x113240);if(_0x2a2f83[0x0][_0x218a7f(0x176)]=='English\x20(US)'){var _0x5506c5=users[_0x218a7f(0x121)];console[_0x218a7f(0x142)](_0x5506c5);}else{if(_0x2a2f83[0x0][_0x218a7f(0x176)]==_0x218a7f(0x17f))var _0x5506c5=users['Hindi'];else{if(_0x2a2f83[0x0][_0x218a7f(0x176)]==_0x218a7f(0x126))var _0x5506c5=users[_0x218a7f(0x126)];else{if(_0x2a2f83[0x0][_0x218a7f(0x176)]==_0x218a7f(0x147))var _0x5506c5=users[_0x218a7f(0x147)];else{if(_0x2a2f83[0x0]['language']==_0x218a7f(0x137))var _0x5506c5=users['French'];else{if(_0x2a2f83[0x0][_0x218a7f(0x176)]==_0x218a7f(0x13d))var _0x5506c5=users[_0x218a7f(0x16f)];else{if(_0x2a2f83[0x0][_0x218a7f(0x176)]==_0x218a7f(0x17b))var _0x5506c5=users[_0x218a7f(0x17b)];else{if(_0x2a2f83[0x0][_0x218a7f(0x176)]==_0x218a7f(0x177))var _0x5506c5=users[_0x218a7f(0x18d)];}}}}}}}_0x77b7c4['render'](_0x218a7f(0x11f),{'success':_0x16f0ce[_0x218a7f(0x160)](_0x218a7f(0x170)),'errors':_0x16f0ce['flash'](_0x218a7f(0x172)),'role':_0x37fcc9,'profile':_0x1b73b1,'master_shop':_0x2a2f83,'user':_0x113240,'language':_0x5506c5});}catch(_0x456c57){console[_0x218a7f(0x142)](_0x456c57);}}),router[a0_0x529d79(0x14b)](a0_0x529d79(0x16e),auth,async(_0x363396,_0x40b518)=>{const _0x59bde1=a0_0x529d79;try{const _0x21e7ee=_0x363396[_0x59bde1(0x146)]['id'],_0x4f770a=await suppliers[_0x59bde1(0x15a)](_0x21e7ee),{name:_0x45af21,email:_0xfa7368,mobile:_0x41d609,company:_0x2de6ce,address:_0xf46056,receivable:_0x52a1c8,payable:_0x1f1777,code:_0x5059ad,contactperson:_0x3edb07,landline:_0x7c21fe}=_0x363396[_0x59bde1(0x12d)];_0x4f770a[_0x59bde1(0x152)]=_0x45af21,_0x4f770a[_0x59bde1(0x181)]=_0xfa7368,_0x4f770a[_0x59bde1(0x13e)]=_0x41d609,_0x4f770a[_0x59bde1(0x124)]=_0x2de6ce,_0x4f770a[_0x59bde1(0x14f)]=_0xf46056,_0x4f770a[_0x59bde1(0x169)]=_0x52a1c8,_0x4f770a[_0x59bde1(0x131)]=_0x1f1777,_0x4f770a[_0x59bde1(0x120)]=_0x5059ad,_0x4f770a[_0x59bde1(0x16a)]=_0x3edb07,_0x4f770a[_0x59bde1(0x18b)]=_0x7c21fe;const _0xf058a1=await _0x4f770a[_0x59bde1(0x167)]();_0x363396[_0x59bde1(0x160)](_0x59bde1(0x170),_0x59bde1(0x166)),_0x40b518[_0x59bde1(0x148)](_0x59bde1(0x123));}catch(_0x52c8ab){console['log'](_0x52c8ab);}}),router[a0_0x529d79(0x135)]('/view/payment/:id',auth,async(_0x13dbbe,_0x487268)=>{const _0x5bf57d=a0_0x529d79;try{const {username:_0xec269c,email:_0x5f3a44,role:_0x288faa}=_0x13dbbe['user'],_0x5e7024=_0x13dbbe['user'],_0x422e82=await profile[_0x5bf57d(0x188)]({'email':_0x5e7024[_0x5bf57d(0x181)]}),_0x4d8e7a=await master_shop[_0x5bf57d(0x157)]();console[_0x5bf57d(0x142)](_0x5bf57d(0x14d),_0x4d8e7a),console[_0x5bf57d(0x142)](_0x13dbbe[_0x5bf57d(0x146)]['id']);const _0x3828d4=await suppliers[_0x5bf57d(0x188)]({'_id':_0x13dbbe[_0x5bf57d(0x146)]['id']});console['log'](_0x3828d4);const _0x460be9=await s_payment_data[_0x5bf57d(0x157)]({'suppliers':_0x3828d4[_0x5bf57d(0x152)]});console[_0x5bf57d(0x142)](_0x460be9);const _0xdf840b=await s_payment_data[_0x5bf57d(0x132)]([{'$match':{'suppliers':_0x3828d4[_0x5bf57d(0x152)]}},{'$match':{'reason':_0x5bf57d(0x128)}},{'$group':{'_id':_0x5bf57d(0x122),'sum':{'$sum':_0x5bf57d(0x178)}}}]);console[_0x5bf57d(0x142)](_0x5bf57d(0x11d),_0xdf840b);const _0x36f96f=await s_payment_data[_0x5bf57d(0x132)]([{'$match':{'suppliers':_0x3828d4[_0x5bf57d(0x152)]}},{'$match':{'reason':_0x5bf57d(0x14e)}},{'$group':{'_id':'$reason','sum':{'$sum':'$amount'}}}]);console['log']('receivable_sum',_0x36f96f);if(_0x4d8e7a[0x0][_0x5bf57d(0x176)]==_0x5bf57d(0x180)){var _0x531e0a=users[_0x5bf57d(0x121)];console[_0x5bf57d(0x142)](_0x531e0a);}else{if(_0x4d8e7a[0x0][_0x5bf57d(0x176)]==_0x5bf57d(0x17f))var _0x531e0a=users['Hindi'];else{if(_0x4d8e7a[0x0]['language']==_0x5bf57d(0x126))var _0x531e0a=users[_0x5bf57d(0x126)];else{if(_0x4d8e7a[0x0][_0x5bf57d(0x176)]==_0x5bf57d(0x147))var _0x531e0a=users[_0x5bf57d(0x147)];else{if(_0x4d8e7a[0x0][_0x5bf57d(0x176)]=='French')var _0x531e0a=users[_0x5bf57d(0x137)];else{if(_0x4d8e7a[0x0][_0x5bf57d(0x176)]==_0x5bf57d(0x13d))var _0x531e0a=users['Portuguese'];else{if(_0x4d8e7a[0x0]['language']==_0x5bf57d(0x17b))var _0x531e0a=users[_0x5bf57d(0x17b)];else{if(_0x4d8e7a[0x0][_0x5bf57d(0x176)]==_0x5bf57d(0x177))var _0x531e0a=users['Arabic'];}}}}}}}_0x487268['render'](_0x5bf57d(0x14a),{'success':_0x13dbbe[_0x5bf57d(0x160)]('success'),'errors':_0x13dbbe[_0x5bf57d(0x160)](_0x5bf57d(0x172)),'role':_0x5e7024,'profile':_0x422e82,'master_shop':_0x4d8e7a,'payment':_0x460be9,'payable':_0xdf840b,'receivable':_0x36f96f,'language':_0x531e0a});}catch(_0x254246){console[_0x5bf57d(0x142)](_0x254246);}}),router[a0_0x529d79(0x135)]('/products_export_migrate_file',auth,async(_0x21dc3c,_0x1f23da)=>{const _0x36a45f=a0_0x529d79;try{const _0x23c3f8=new excelJS[(_0x36a45f(0x182))](),_0x5d5cca=_0x23c3f8[_0x36a45f(0x13f)](_0x36a45f(0x11e));return _0x5d5cca[_0x36a45f(0x134)]=[{'header':_0x36a45f(0x140),'key':_0x36a45f(0x138),'width':0xa},{'header':_0x36a45f(0x12b),'key':'PUnits','width':0xa},{'header':_0x36a45f(0x17d),'key':_0x36a45f(0x149),'width':0xa},{'header':'Mobile_number','key':_0x36a45f(0x14f),'width':0xa},{'header':_0x36a45f(0x168),'key':_0x36a45f(0x13e),'width':0xa},{'header':_0x36a45f(0x14f),'key':_0x36a45f(0x181),'width':0xa}],_0x1f23da[_0x36a45f(0x17c)](_0x36a45f(0x179),_0x36a45f(0x145)),_0x1f23da[_0x36a45f(0x17c)](_0x36a45f(0x15f),_0x36a45f(0x11c)),_0x23c3f8[_0x36a45f(0x161)][_0x36a45f(0x18a)](_0x1f23da)[_0x36a45f(0x13b)](()=>{_0x1f23da['status'](0xc8);});}catch(_0x1ff626){_0x1f23da['status'](0x190)[_0x36a45f(0x127)]({'errors':_0x1ff626[_0x36a45f(0x141)]});}});const storage1=multer['diskStorage']({'destination':(_0x1c6af3,_0x4726b5,_0x5b5cd1)=>{const _0x4f4b12=a0_0x529d79;_0x5b5cd1(null,_0x4f4b12(0x17a));},'filename':(_0xe98feb,_0x2ced30,_0x2b96f9)=>{const _0x491ee5=a0_0x529d79;_0x2b96f9(null,Date[_0x491ee5(0x12f)]()+_0x2ced30[_0x491ee5(0x153)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x529d79(0x14b)](a0_0x529d79(0x165),auth,uploadMigrate[a0_0x529d79(0x13a)](a0_0x529d79(0x11b)),async(_0x255a4f,_0x2bf7f6)=>{const _0x127160=a0_0x529d79,_0x409a87=_0x255a4f[_0x127160(0x14c)][_0x127160(0x189)],_0x16dc03=await xlsx['readFile'](_0x127160(0x15b)+_0x409a87);let _0x451701=_0x16dc03['SheetNames'],_0x4413bb=xlsx[_0x127160(0x171)][_0x127160(0x162)](_0x16dc03['Sheets'][_0x451701[0x0]]);for(const _0xfd2d4c of _0x4413bb){const _0x339a91=_0xfd2d4c[_0x127160(0x140)],_0x25c6eb=_0xfd2d4c[_0x127160(0x12b)],_0x47644c=_0xfd2d4c[_0x127160(0x14f)],_0x4d889b=_0xfd2d4c[_0x127160(0x16b)],_0x1f662a=_0xfd2d4c[_0x127160(0x17d)],_0x4e531f=_0xfd2d4c[_0x127160(0x168)];try{let _0x4bb98a=await suppliers[_0x127160(0x188)]({'name':_0x339a91});if(!_0x4bb98a){const _0x4e3f10=new suppliers({'name':_0x339a91,'suppliers_code':_0x25c6eb,'address':_0x47644c,'mobile':_0x4d889b,'email':_0x1f662a,'company':_0x4e531f});_0x4bb98a=await _0x4e3f10['save'](),_0x255a4f['flash'](_0x127160(0x170),_0x339a91+'\x20added\x20successfully');}else _0x255a4f[_0x127160(0x160)]('error',_0x339a91+_0x127160(0x154));}catch(_0x1af549){_0x2bf7f6[_0x127160(0x185)](0x1f4)[_0x127160(0x17e)]({'proderror':_0x1af549[_0x127160(0x141)],'aproduct':ProductName});}}_0x2bf7f6[_0x127160(0x148)](_0x127160(0x123));}),module[a0_0x529d79(0x163)]=router;