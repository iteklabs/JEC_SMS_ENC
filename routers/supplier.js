const a0_0x53844a=a0_0x339a;(function(_0x548d9c,_0x52dd95){const _0x910c35=a0_0x339a,_0x1cc0b4=_0x548d9c();while(!![]){try{const _0xce76f5=parseInt(_0x910c35(0x223))/0x1*(parseInt(_0x910c35(0x1e2))/0x2)+parseInt(_0x910c35(0x226))/0x3*(parseInt(_0x910c35(0x1c9))/0x4)+-parseInt(_0x910c35(0x214))/0x5+-parseInt(_0x910c35(0x1f1))/0x6*(parseInt(_0x910c35(0x1da))/0x7)+-parseInt(_0x910c35(0x219))/0x8+-parseInt(_0x910c35(0x1f7))/0x9+-parseInt(_0x910c35(0x1f4))/0xa*(-parseInt(_0x910c35(0x225))/0xb);if(_0xce76f5===_0x52dd95)break;else _0x1cc0b4['push'](_0x1cc0b4['shift']());}catch(_0x4eb582){_0x1cc0b4['push'](_0x1cc0b4['shift']());}}}(a0_0x4701,0x967ad));const express=require(a0_0x53844a(0x216)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x53844a(0x1e4)),auth=require(a0_0x53844a(0x1ec)),users=require(a0_0x53844a(0x21c)),excelJS=require(a0_0x53844a(0x1dc)),xlsx=require(a0_0x53844a(0x1f2)),multer=require(a0_0x53844a(0x1eb));router[a0_0x53844a(0x1d8)](a0_0x53844a(0x1e3),auth,async(_0x2a794b,_0x571852)=>{const _0x1efdb5=a0_0x53844a;try{const {username:_0x42b156,email:_0x31e72c,role:_0xc4b489}=_0x2a794b[_0x1efdb5(0x1c3)],_0x4843ba=_0x2a794b[_0x1efdb5(0x1c3)],_0x195311=await profile[_0x1efdb5(0x1f6)]({'email':_0x4843ba[_0x1efdb5(0x1e6)]}),_0x20f888=await master_shop[_0x1efdb5(0x1f3)]();console['log'](_0x1efdb5(0x1c7),_0x20f888);const _0x2a815b=await suppliers['find']();console[_0x1efdb5(0x1e7)](_0x2a815b);const _0x18139e=await suppliers[_0x1efdb5(0x20b)]([{'$lookup':{'from':_0x1efdb5(0x1fe),'localField':'name','foreignField':_0x1efdb5(0x20c),'as':_0x1efdb5(0x228)}}]),_0x234e28=_0x18139e['map'](_0x4b6a3c=>{const _0x24d2d6=_0x1efdb5;console['log'](_0x24d2d6(0x1fd),_0x4b6a3c);var _0x8e9cee=0x0,_0x1d96fa=0x0;return _0x4b6a3c[_0x24d2d6(0x228)][_0x24d2d6(0x1c5)](_0x38493d=>{const _0x367947=_0x24d2d6;console[_0x367947(0x1e7)](_0x367947(0x1d0),_0x38493d),_0x38493d[_0x367947(0x1cb)]==_0x367947(0x22a)?_0x8e9cee+=_0x38493d['amount']:_0x1d96fa+=_0x38493d[_0x367947(0x1ed)];}),_0x4b6a3c[_0x24d2d6(0x1ef)]=_0x8e9cee,_0x4b6a3c[_0x24d2d6(0x213)]=_0x1d96fa,_0x4b6a3c;});console['log'](_0x1efdb5(0x20d),_0x234e28);if(_0x20f888[0x0]['language']==_0x1efdb5(0x1ce)){var _0x3ee838=users['English'];console[_0x1efdb5(0x1e7)](_0x3ee838);}else{if(_0x20f888[0x0]['language']==_0x1efdb5(0x207))var _0x3ee838=users[_0x1efdb5(0x207)];else{if(_0x20f888[0x0][_0x1efdb5(0x206)]=='German')var _0x3ee838=users[_0x1efdb5(0x208)];else{if(_0x20f888[0x0][_0x1efdb5(0x206)]==_0x1efdb5(0x1fc))var _0x3ee838=users[_0x1efdb5(0x1fc)];else{if(_0x20f888[0x0][_0x1efdb5(0x206)]==_0x1efdb5(0x204))var _0x3ee838=users[_0x1efdb5(0x204)];else{if(_0x20f888[0x0][_0x1efdb5(0x206)]==_0x1efdb5(0x220))var _0x3ee838=users[_0x1efdb5(0x1e8)];else{if(_0x20f888[0x0]['language']==_0x1efdb5(0x222))var _0x3ee838=users[_0x1efdb5(0x222)];else{if(_0x20f888[0x0]['language']==_0x1efdb5(0x212))var _0x3ee838=users[_0x1efdb5(0x1ea)];}}}}}}}_0x571852[_0x1efdb5(0x20a)]('supplier',{'success':_0x2a794b[_0x1efdb5(0x1cc)](_0x1efdb5(0x227)),'errors':_0x2a794b[_0x1efdb5(0x1cc)](_0x1efdb5(0x1de)),'user':_0x2a815b,'profile':_0x195311,'master_shop':_0x20f888,'role':_0x4843ba,'payment':_0x234e28,'language':_0x3ee838});}catch(_0x1d6654){console[_0x1efdb5(0x1e7)](_0x1d6654);}}),router[a0_0x53844a(0x1fa)](a0_0x53844a(0x1e3),auth,async(_0x1a4c50,_0x361a6f)=>{const _0x866a92=a0_0x53844a;try{const {name:_0x15dad7,email:_0x101744,mobile:_0x2d41d7,company:_0x25890b,address:_0x56ceb8,receivable:_0x2e0970,payable:_0x24484b,code:_0x4cf408,contactperson:_0x5d1c0b,landline:_0x39a9ef}=_0x1a4c50[_0x866a92(0x1ff)],_0x49f6c3=new suppliers({'name':_0x15dad7,'email':_0x101744,'mobile':_0x2d41d7,'company':_0x25890b,'address':_0x56ceb8,'receivable':_0x2e0970,'payable':_0x24484b,'suppliers_code':_0x4cf408,'contactperson':_0x5d1c0b,'landline':_0x39a9ef}),_0x291e50=await _0x49f6c3['save']();_0x1a4c50[_0x866a92(0x1cc)](_0x866a92(0x227),_0x866a92(0x1fb)),_0x361a6f[_0x866a92(0x1c8)](_0x866a92(0x1ca));}catch(_0x579813){console['log'](_0x579813);}}),router[a0_0x53844a(0x1d8)](a0_0x53844a(0x1dd),auth,async(_0x2e4690,_0x1e77d3)=>{const _0xf49898=a0_0x53844a;try{const {username:_0xb72a1a,email:_0x2707b7,role:_0x243d22}=_0x2e4690[_0xf49898(0x1c3)],_0x31a5b6=_0x2e4690[_0xf49898(0x1c3)],_0x2a72d8=await profile['findOne']({'email':_0x31a5b6['email']}),_0x5b9685=await master_shop[_0xf49898(0x1f3)]();console['log'](_0xf49898(0x1c7),_0x5b9685);const _0x3b59a0=_0x2e4690[_0xf49898(0x1cf)]['id'],_0x2b5a3a=await suppliers[_0xf49898(0x1df)](_0x3b59a0);console[_0xf49898(0x1e7)](_0x2b5a3a);if(_0x5b9685[0x0][_0xf49898(0x206)]=='English\x20(US)'){var _0x1ef257=users[_0xf49898(0x1d4)];console['log'](_0x1ef257);}else{if(_0x5b9685[0x0]['language']=='Hindi')var _0x1ef257=users[_0xf49898(0x207)];else{if(_0x5b9685[0x0][_0xf49898(0x206)]==_0xf49898(0x208))var _0x1ef257=users[_0xf49898(0x208)];else{if(_0x5b9685[0x0][_0xf49898(0x206)]=='Spanish')var _0x1ef257=users[_0xf49898(0x1fc)];else{if(_0x5b9685[0x0]['language']==_0xf49898(0x204))var _0x1ef257=users[_0xf49898(0x204)];else{if(_0x5b9685[0x0]['language']==_0xf49898(0x220))var _0x1ef257=users[_0xf49898(0x1e8)];else{if(_0x5b9685[0x0][_0xf49898(0x206)]==_0xf49898(0x222))var _0x1ef257=users['Chinese'];else{if(_0x5b9685[0x0][_0xf49898(0x206)]==_0xf49898(0x212))var _0x1ef257=users[_0xf49898(0x1ea)];}}}}}}}_0x1e77d3[_0xf49898(0x20a)]('supplier',{'success':_0x2e4690[_0xf49898(0x1cc)](_0xf49898(0x227)),'errors':_0x2e4690['flash'](_0xf49898(0x1de)),'role':_0x31a5b6,'profile':_0x2a72d8,'master_shop':_0x5b9685,'user':_0x2b5a3a,'language':_0x1ef257});}catch(_0x1eba25){console[_0xf49898(0x1e7)](_0x1eba25);}}),router[a0_0x53844a(0x1fa)](a0_0x53844a(0x1dd),auth,async(_0xc2f7a1,_0x1b5672)=>{const _0x15712d=a0_0x53844a;try{const _0x348f88=_0xc2f7a1['params']['id'],_0x571daa=await suppliers['findById'](_0x348f88),{name:_0x336290,email:_0x2cf789,mobile:_0x228f21,company:_0x1b0997,address:_0xb7cdc2,receivable:_0x5e0eac,payable:_0x39380c,code:_0x2d7d61,contactperson:_0x4888ce,landline:_0x210db2}=_0xc2f7a1[_0x15712d(0x1ff)];_0x571daa[_0x15712d(0x1d3)]=_0x336290,_0x571daa[_0x15712d(0x1e6)]=_0x2cf789,_0x571daa['mobile']=_0x228f21,_0x571daa[_0x15712d(0x1c6)]=_0x1b0997,_0x571daa[_0x15712d(0x21d)]=_0xb7cdc2,_0x571daa['receivable']=_0x5e0eac,_0x571daa['payable']=_0x39380c,_0x571daa[_0x15712d(0x202)]=_0x2d7d61,_0x571daa[_0x15712d(0x1c0)]=_0x4888ce,_0x571daa[_0x15712d(0x210)]=_0x210db2;const _0x4e985d=await _0x571daa[_0x15712d(0x22b)]();_0xc2f7a1[_0x15712d(0x1cc)](_0x15712d(0x227),_0x15712d(0x209)),_0x1b5672[_0x15712d(0x1c8)]('/supplier/view');}catch(_0x150add){console[_0x15712d(0x1e7)](_0x150add);}}),router[a0_0x53844a(0x1d8)]('/view/payment/:id',auth,async(_0x37c48a,_0x320a56)=>{const _0x9f4d02=a0_0x53844a;try{const {username:_0x195bd8,email:_0x2c325c,role:_0x495bc7}=_0x37c48a[_0x9f4d02(0x1c3)],_0x2c5f0f=_0x37c48a['user'],_0x39c245=await profile[_0x9f4d02(0x1f6)]({'email':_0x2c5f0f[_0x9f4d02(0x1e6)]}),_0x43844d=await master_shop[_0x9f4d02(0x1f3)]();console['log']('master',_0x43844d),console['log'](_0x37c48a[_0x9f4d02(0x1cf)]['id']);const _0x243d37=await suppliers[_0x9f4d02(0x1f6)]({'_id':_0x37c48a[_0x9f4d02(0x1cf)]['id']});console['log'](_0x243d37);const _0x451ee4=await s_payment_data[_0x9f4d02(0x1f3)]({'suppliers':_0x243d37[_0x9f4d02(0x1d3)]});console[_0x9f4d02(0x1e7)](_0x451ee4);const _0x503bd8=await s_payment_data[_0x9f4d02(0x20b)]([{'$match':{'suppliers':_0x243d37[_0x9f4d02(0x1d3)]}},{'$match':{'reason':'Purchase'}},{'$group':{'_id':_0x9f4d02(0x217),'sum':{'$sum':_0x9f4d02(0x1cd)}}}]);console[_0x9f4d02(0x1e7)](_0x9f4d02(0x1e9),_0x503bd8);const _0x21da6e=await s_payment_data[_0x9f4d02(0x20b)]([{'$match':{'suppliers':_0x243d37[_0x9f4d02(0x1d3)]}},{'$match':{'reason':'Purchase\x20Return'}},{'$group':{'_id':'$reason','sum':{'$sum':_0x9f4d02(0x1cd)}}}]);console[_0x9f4d02(0x1e7)](_0x9f4d02(0x1f9),_0x21da6e);if(_0x43844d[0x0][_0x9f4d02(0x206)]==_0x9f4d02(0x1ce)){var _0xa19e72=users[_0x9f4d02(0x1d4)];console[_0x9f4d02(0x1e7)](_0xa19e72);}else{if(_0x43844d[0x0][_0x9f4d02(0x206)]==_0x9f4d02(0x207))var _0xa19e72=users[_0x9f4d02(0x207)];else{if(_0x43844d[0x0][_0x9f4d02(0x206)]=='German')var _0xa19e72=users[_0x9f4d02(0x208)];else{if(_0x43844d[0x0][_0x9f4d02(0x206)]==_0x9f4d02(0x1fc))var _0xa19e72=users['Spanish'];else{if(_0x43844d[0x0][_0x9f4d02(0x206)]==_0x9f4d02(0x204))var _0xa19e72=users[_0x9f4d02(0x204)];else{if(_0x43844d[0x0][_0x9f4d02(0x206)]==_0x9f4d02(0x220))var _0xa19e72=users[_0x9f4d02(0x1e8)];else{if(_0x43844d[0x0][_0x9f4d02(0x206)]==_0x9f4d02(0x222))var _0xa19e72=users[_0x9f4d02(0x222)];else{if(_0x43844d[0x0][_0x9f4d02(0x206)]==_0x9f4d02(0x212))var _0xa19e72=users[_0x9f4d02(0x1ea)];}}}}}}}_0x320a56['render'](_0x9f4d02(0x1bc),{'success':_0x37c48a[_0x9f4d02(0x1cc)](_0x9f4d02(0x227)),'errors':_0x37c48a['flash'](_0x9f4d02(0x1de)),'role':_0x2c5f0f,'profile':_0x39c245,'master_shop':_0x43844d,'payment':_0x451ee4,'payable':_0x503bd8,'receivable':_0x21da6e,'language':_0xa19e72});}catch(_0x162115){console['log'](_0x162115);}}),router[a0_0x53844a(0x1d8)](a0_0x53844a(0x1c2),auth,async(_0xbb0374,_0x50b8eb)=>{const _0x442115=a0_0x53844a;try{const _0x184e09=new excelJS[(_0x442115(0x22c))](),_0xa7d0d1=_0x184e09[_0x442115(0x218)](_0x442115(0x1d6));return _0xa7d0d1[_0x442115(0x1e5)]=[{'header':_0x442115(0x1bf),'key':_0x442115(0x1c1),'width':0xa},{'header':'Supplier_Code','key':_0x442115(0x203),'width':0xa},{'header':_0x442115(0x1c4),'key':_0x442115(0x201),'width':0xa},{'header':'Mobile_number','key':'address','width':0xa},{'header':'Company_Name','key':'mobile','width':0xa},{'header':_0x442115(0x21d),'key':_0x442115(0x1e6),'width':0xa}],_0x50b8eb[_0x442115(0x21f)](_0x442115(0x21a),_0x442115(0x205)),_0x50b8eb[_0x442115(0x21f)]('Content-Disposition',_0x442115(0x200)),_0x184e09[_0x442115(0x1f2)][_0x442115(0x211)](_0x50b8eb)[_0x442115(0x1f0)](()=>{const _0x402c8c=_0x442115;_0x50b8eb[_0x402c8c(0x1f5)](0xc8);});}catch(_0x49f878){_0x50b8eb[_0x442115(0x1f5)](0x190)[_0x442115(0x1d9)]({'errors':_0x49f878[_0x442115(0x221)]});}});const storage1=multer[a0_0x53844a(0x1db)]({'destination':(_0x3cdf89,_0x56454a,_0x2addb8)=>{const _0x1596cf=a0_0x53844a;_0x2addb8(null,_0x1596cf(0x20f));},'filename':(_0x3b59aa,_0x191706,_0x240ba3)=>{const _0xc690fc=a0_0x53844a;_0x240ba3(null,Date[_0xc690fc(0x1bd)]()+_0x191706[_0xc690fc(0x1d5)]);}}),uploadMigrate=multer({'storage':storage1});function a0_0x4701(){const _0x1f711b=['/supplier/view','reason','flash','$amount','English\x20(US)','params','doc','Supplier_Code','readFile','name','English','originalname','Customers','error','get','send','4902149jeXwGd','diskStorage','exceljs','/view/:id','errors','findById','\x20Failed','Mobile_number','2hMmelS','/view','../models/all_models','columns','email','log','Portuguese','payable_sum','Arabic','multer','../middleware/auth','amount','SheetNames','purchase','then','6bVzDOZ','xlsx','find','14315660sdhePO','status','findOne','10483155iXcRtT','single','receivable_sum','post','supplier\x20data\x20add\x20successfully','Spanish','data','s_payments','body','attachment;\x20filename=supplier_Migration_File.xlsx','SalesmanName','suppliers_code','PUnits','French','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','language','Hindi','German','supplier\x20data\x20update\x20successfully','render','aggregate','suppliers','supplier.js\x20payment_data','exports','public/Migration','landline','write','Arabic\x20(ae)','purchase_return','2446235MvoHQX','sheet_to_json','express','$reason','addWorksheet','4569656YrFWfP','Content-Type','\x20added\x20successfully','../public/language/languages.json','address','utils','setHeader','Portuguese\x20(BR)','message','Chinese','628153YWnXXr','Company_Name','22pGBTcf','3MqPqCk','success','suppliers_docs','/supplier_import_migrate_file','Purchase','save','Workbook','supplier_payment','now','json','Name','contactperson','PBrands','/products_export_migrate_file','user','Email','forEach','company','master','redirect','202544NiUatx'];a0_0x4701=function(){return _0x1f711b;};return a0_0x4701();}function a0_0x339a(_0x5ab1e9,_0x566f1a){const _0x470172=a0_0x4701();return a0_0x339a=function(_0x339a67,_0x2e9d2){_0x339a67=_0x339a67-0x1bc;let _0x5ea2bf=_0x470172[_0x339a67];return _0x5ea2bf;},a0_0x339a(_0x5ab1e9,_0x566f1a);}router[a0_0x53844a(0x1fa)](a0_0x53844a(0x229),auth,uploadMigrate[a0_0x53844a(0x1f8)]('supplier_product_file'),async(_0x5ba923,_0x8dbc9a)=>{const _0x19c321=a0_0x53844a,_0x2b0824=_0x5ba923['file']['filename'],_0x4f04f1=await xlsx[_0x19c321(0x1d2)]('public/Migration/'+_0x2b0824);let _0x3a863e=_0x4f04f1[_0x19c321(0x1ee)],_0xde82b0=xlsx[_0x19c321(0x21e)][_0x19c321(0x215)](_0x4f04f1['Sheets'][_0x3a863e[0x0]]);for(const _0x32ee4f of _0xde82b0){const _0xe02144=_0x32ee4f[_0x19c321(0x1bf)],_0x370b5e=_0x32ee4f[_0x19c321(0x1d1)],_0x3237f2=_0x32ee4f['address'],_0x4d04d0=_0x32ee4f[_0x19c321(0x1e1)],_0x1945a2=_0x32ee4f['Email'],_0xdead82=_0x32ee4f[_0x19c321(0x224)];try{let _0x59447f=await suppliers[_0x19c321(0x1f6)]({'name':_0xe02144});if(!_0x59447f){const _0x37fe69=new suppliers({'name':_0xe02144,'suppliers_code':_0x370b5e,'address':_0x3237f2,'mobile':_0x4d04d0,'email':_0x1945a2,'company':_0xdead82});_0x59447f=await _0x37fe69[_0x19c321(0x22b)](),_0x5ba923['flash'](_0x19c321(0x227),_0xe02144+_0x19c321(0x21b));}else _0x5ba923[_0x19c321(0x1cc)](_0x19c321(0x1d7),_0xe02144+_0x19c321(0x1e0));}catch(_0x1c0dbe){_0x8dbc9a[_0x19c321(0x1f5)](0x1f4)[_0x19c321(0x1be)]({'proderror':_0x1c0dbe[_0x19c321(0x221)],'aproduct':ProductName});}}_0x8dbc9a[_0x19c321(0x1c8)]('/supplier/view');}),module[a0_0x53844a(0x20e)]=router;