function a0_0x29da(_0x1b7df2,_0x237823){const _0x492dd2=a0_0x492d();return a0_0x29da=function(_0x29daf7,_0x53b2bf){_0x29daf7=_0x29daf7-0x89;let _0x8960f4=_0x492dd2[_0x29daf7];return _0x8960f4;},a0_0x29da(_0x1b7df2,_0x237823);}const a0_0x3b647b=a0_0x29da;(function(_0x410fe2,_0x3bf5e6){const _0x3ab595=a0_0x29da,_0x417b37=_0x410fe2();while(!![]){try{const _0x21b9b4=parseInt(_0x3ab595(0xe7))/0x1+-parseInt(_0x3ab595(0xeb))/0x2+-parseInt(_0x3ab595(0xdb))/0x3+-parseInt(_0x3ab595(0xa1))/0x4+parseInt(_0x3ab595(0xc4))/0x5*(-parseInt(_0x3ab595(0x9b))/0x6)+parseInt(_0x3ab595(0xf3))/0x7*(-parseInt(_0x3ab595(0xea))/0x8)+-parseInt(_0x3ab595(0xc9))/0x9*(-parseInt(_0x3ab595(0x95))/0xa);if(_0x21b9b4===_0x3bf5e6)break;else _0x417b37['push'](_0x417b37['shift']());}catch(_0x46e0ee){_0x417b37['push'](_0x417b37['shift']());}}}(a0_0x492d,0x71dad));function a0_0x492d(){const _0xc4492f=['100HfezMY','$supplier_docs.email','/purchases_return/view','success','bay','purchase_quantity','19416MqfuvE','$return_product.return_qty','due_amount','payment\x20successfull','secondary_code_hide','Received\x20For\x20Purchase\x20Return','1029840apTjsY','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','render','Return\x20Goods','exports','/view/:id','findOne','../middleware/auth','$supplier_docs','save','name','findById','Chinese','redirect','Hindi','log','status','purchase\x20return\x20successfully','$warehouse_name','product_name','French','$product_details.floorlevel','$suppliers','Arabic','supplier_docs','back','get','invoice','received','/view','Arabic\x20(ae)','$product_details.secondary_code','$supplier_docs.address','product_code_hide','English\x20(US)','1120yTYBZC','Portuguese','json','room','product_stock','2400147UZnCcy','$received','suppliers','secondary_code','$product_details','find','forEach','string','Portuguese\x20(BR)','product_details','$receivable','master','getFullYear','user','note','to_Room_name','primary_code','flash','1906227pSFREz','$supplier_docs.mobile','$_id','stocks','slice','Finished\x20Goods','$product_details.bay','German','$invoice','return_purchase_invoice','$product_details.primary_code','aggregate','656983BBMCuJ','/purchases_return_finished/view','../models/all_models','4001152bOjwYC','1479174kzogCC','stock_data','return_qty','getMonth','$return_product.product_name','Purchase\x20Return','$total_amount','post','7pQgjJq','$product_details.product_name','body','params','$return_product.price','/receive_payment/:id','to_room','English','$product_details.bin','errors','primary_code_hide','warehouse_name','stock_quantity','Spanish','level','return_product','/invoice/:id','../public/language/languages.json','email','$name','$discount','$return_product','to_warehouse_name','Router','product_code','language','map','$product_details.rack','$product_details.type','$due_amount','purchases_return_finished','express'];a0_0x492d=function(){return _0xc4492f;};return a0_0x492d();}const express=require(a0_0x3b647b(0x94)),app=express(),router=express[a0_0x3b647b(0x8c)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,purchases_return_finished}=require(a0_0x3b647b(0xe9)),auth=require(a0_0x3b647b(0xa8)),users=require(a0_0x3b647b(0x104));router[a0_0x3b647b(0xbb)](a0_0x3b647b(0xbe),auth,async(_0x57c1fd,_0x4e0cef)=>{const _0x199fb7=a0_0x3b647b;try{const {username:_0x2c82a8,email:_0x511a0a,role:_0x40d8f2}=_0x57c1fd[_0x199fb7(0xd6)],_0x356a11=_0x57c1fd[_0x199fb7(0xd6)],_0x2474c5=await profile[_0x199fb7(0xa7)]({'email':_0x356a11[_0x199fb7(0x105)]}),_0x2bdec1=await master_shop[_0x199fb7(0xce)]();console[_0x199fb7(0xb0)](_0x199fb7(0xd4),_0x2bdec1);const _0x3d97c5=await purchases_return_finished[_0x199fb7(0xe6)]([{'$lookup':{'from':_0x199fb7(0xcb),'localField':'suppliers','foreignField':_0x199fb7(0xab),'as':_0x199fb7(0xb9)}},{'$unwind':_0x199fb7(0x8a)},{'$unwind':_0x199fb7(0xa9)},{'$group':{'_id':_0x199fb7(0xdd),'invoice':{'$first':_0x199fb7(0xe3)},'date':{'$first':'$date'},'suppliers':{'$first':_0x199fb7(0xb7)},'warehouse_name':{'$first':_0x199fb7(0xb3)},'product_name':{'$first':_0x199fb7(0xef)},'return_qty':{'$first':_0x199fb7(0x9c)},'price':{'$first':_0x199fb7(0xf7)},'total':{'$sum':'$return_product.total'},'note':{'$first':'$note'},'total_amount':{'$first':_0x199fb7(0xf1)},'discount':{'$first':_0x199fb7(0x89)},'receivable':{'$first':_0x199fb7(0xd3)},'received':{'$first':_0x199fb7(0xca)},'due_amount':{'$first':_0x199fb7(0x92)},'mobile':{'$first':_0x199fb7(0xdc)},'email':{'$first':_0x199fb7(0x96)},'address':{'$first':_0x199fb7(0xc1)},'return_sum_qty':{'$sum':_0x199fb7(0x9c)}}}]);console[_0x199fb7(0xb0)](_0x3d97c5);if(_0x2bdec1[0x0][_0x199fb7(0x8e)]==_0x199fb7(0xc3)){var _0x2cc9ee=users[_0x199fb7(0xfa)];console['log'](_0x2cc9ee);}else{if(_0x2bdec1[0x0][_0x199fb7(0x8e)]==_0x199fb7(0xaf))var _0x2cc9ee=users[_0x199fb7(0xaf)];else{if(_0x2bdec1[0x0][_0x199fb7(0x8e)]=='German')var _0x2cc9ee=users[_0x199fb7(0xe2)];else{if(_0x2bdec1[0x0][_0x199fb7(0x8e)]==_0x199fb7(0x100))var _0x2cc9ee=users[_0x199fb7(0x100)];else{if(_0x2bdec1[0x0][_0x199fb7(0x8e)]==_0x199fb7(0xb5))var _0x2cc9ee=users['French'];else{if(_0x2bdec1[0x0][_0x199fb7(0x8e)]==_0x199fb7(0xd1))var _0x2cc9ee=users[_0x199fb7(0xc5)];else{if(_0x2bdec1[0x0][_0x199fb7(0x8e)]==_0x199fb7(0xad))var _0x2cc9ee=users['Chinese'];else{if(_0x2bdec1[0x0]['language']==_0x199fb7(0xbf))var _0x2cc9ee=users['Arabic'];}}}}}}}_0x4e0cef[_0x199fb7(0xa3)](_0x199fb7(0x93),{'success':_0x57c1fd[_0x199fb7(0xda)](_0x199fb7(0x98)),'errors':_0x57c1fd[_0x199fb7(0xda)]('errors'),'role':_0x356a11,'profile':_0x2474c5,'master_shop':_0x2bdec1,'user':_0x3d97c5,'language':_0x2cc9ee});}catch(_0x14b306){console['log'](_0x14b306);}}),router[a0_0x3b647b(0xbb)](a0_0x3b647b(0xa6),auth,async(_0x417f70,_0x4a0b55)=>{const _0x276188=a0_0x3b647b;try{const {username:_0x44380f,email:_0x27abec,role:_0x301ab3}=_0x417f70[_0x276188(0xd6)],_0x2a463a=_0x417f70['user'],_0x5f164e=await profile[_0x276188(0xa7)]({'email':_0x2a463a[_0x276188(0x105)]}),_0x59fb55=await product[_0x276188(0xce)]({}),_0x53af68=await master_shop[_0x276188(0xce)](),_0x16a91b=_0x417f70[_0x276188(0xf6)]['id'],_0x34e0ff=await purchases_return_finished[_0x276188(0xac)](_0x16a91b),_0x10671e=await warehouse[_0x276188(0xe6)]([{'$match':{'name':_0x34e0ff[_0x276188(0xfe)],'room':_0x34e0ff['room'],'warehouse_category':_0x276188(0xe0)}},{'$unwind':_0x276188(0xcd)},{'$group':{'_id':'$product_details._id','name':{'$first':_0x276188(0xf4)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x276188(0xe1)},'bin':{'$first':_0x276188(0xfb)},'type':{'$first':_0x276188(0x91)},'floorlevel':{'$first':_0x276188(0xb6)},'primary_code':{'$first':_0x276188(0xe5)},'secondary_code':{'$first':_0x276188(0xc0)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x276188(0x90)}}}]);warehouse_data=await warehouse[_0x276188(0xe6)]([{'$match':{'status':'Enabled','name':_0x276188(0xa4),'warehouse_category':_0x276188(0xe0)}},{'$group':{'_id':'$name','name':{'$first':_0x276188(0x106)}}},{'$sort':{'name':0x1}}]),console[_0x276188(0xb0)](_0x276188(0xec),_0x10671e);if(_0x53af68[0x0][_0x276188(0x8e)]==_0x276188(0xc3)){var _0x4b3063=users[_0x276188(0xfa)];console[_0x276188(0xb0)](_0x4b3063);}else{if(_0x53af68[0x0]['language']==_0x276188(0xaf))var _0x4b3063=users['Hindi'];else{if(_0x53af68[0x0][_0x276188(0x8e)]==_0x276188(0xe2))var _0x4b3063=users[_0x276188(0xe2)];else{if(_0x53af68[0x0][_0x276188(0x8e)]==_0x276188(0x100))var _0x4b3063=users[_0x276188(0x100)];else{if(_0x53af68[0x0][_0x276188(0x8e)]==_0x276188(0xb5))var _0x4b3063=users[_0x276188(0xb5)];else{if(_0x53af68[0x0]['language']==_0x276188(0xd1))var _0x4b3063=users[_0x276188(0xc5)];else{if(_0x53af68[0x0][_0x276188(0x8e)]=='Chinese')var _0x4b3063=users[_0x276188(0xad)];else{if(_0x53af68[0x0][_0x276188(0x8e)]==_0x276188(0xbf))var _0x4b3063=users['Arabic'];}}}}}}}_0x4a0b55[_0x276188(0xa3)]('return_purchase_edit_finished',{'success':_0x417f70[_0x276188(0xda)](_0x276188(0x98)),'errors':_0x417f70['flash'](_0x276188(0xfc)),'role':_0x2a463a,'master_shop':_0x53af68,'profile':_0x5f164e,'user':_0x34e0ff,'stock':_0x10671e,'product':_0x59fb55,'language':_0x4b3063,'warehouse':warehouse_data});}catch(_0xb30b75){console[_0x276188(0xb0)](_0xb30b75);}}),router[a0_0x3b647b(0xf2)](a0_0x3b647b(0xa6),auth,async(_0x117905,_0x187709)=>{const _0x176d35=a0_0x3b647b;try{const _0x58a20c=_0x117905[_0x176d35(0xf6)]['id'],_0x2b28ae=await purchases_return_finished[_0x176d35(0xa7)]({'invoice':_0x117905[_0x176d35(0xf5)][_0x176d35(0xbc)]}),_0xaefac9=await warehouse['findOne']({'name':_0x2b28ae[_0x176d35(0x8b)],'room':_0x2b28ae[_0x176d35(0xf9)],'warehouse_category':'Finished\x20Goods'}),{invoice:_0x1c53de,suppliers:_0x1e0674,date:_0x5d302c,warehouse_name:_0x33f52b,product_name:_0x5abfd0,purchase_quantity:_0x4265bc,stocks:_0x4437dc,return_qty:_0x281cd0,note:_0x5a83a5,Room_name:_0x4501c3,level:_0x4ff798,isle:_0x58ba22,pallet:_0xd6aee7,to_warehouse_name:_0xb7aa59,to_Room_name:_0xa393d0}=_0x117905[_0x176d35(0xf5)];if(typeof _0x5abfd0==_0x176d35(0xd0))var _0x1974a4=[_0x117905[_0x176d35(0xf5)][_0x176d35(0xb4)]],_0x234a78=[_0x117905[_0x176d35(0xf5)][_0x176d35(0x9a)]],_0x26d27e=[_0x117905[_0x176d35(0xf5)][_0x176d35(0xde)]],_0xc4412f=[_0x117905[_0x176d35(0xf5)][_0x176d35(0xed)]],_0x1740f5=[_0x117905[_0x176d35(0xf5)]['level']],_0x68529=[_0x117905['body'][_0x176d35(0xc2)]],_0x5c5279=[_0x117905[_0x176d35(0xf5)]['primary_code_hide']],_0x1ad53a=[_0x117905[_0x176d35(0xf5)][_0x176d35(0x9f)]];else var _0x1974a4=[..._0x117905[_0x176d35(0xf5)][_0x176d35(0xb4)]],_0x234a78=[..._0x117905['body'][_0x176d35(0x9a)]],_0x26d27e=[..._0x117905[_0x176d35(0xf5)][_0x176d35(0xde)]],_0xc4412f=[..._0x117905[_0x176d35(0xf5)][_0x176d35(0xed)]],_0x1740f5=[..._0x117905['body'][_0x176d35(0x101)]],_0x68529=[..._0x117905[_0x176d35(0xf5)][_0x176d35(0xc2)]],_0x5c5279=[..._0x117905[_0x176d35(0xf5)][_0x176d35(0xfd)]],_0x1ad53a=[..._0x117905[_0x176d35(0xf5)][_0x176d35(0x9f)]];const _0x533308=_0x1974a4['map'](_0x30da20=>{return _0x30da20={'product_name':_0x30da20};});_0x234a78[_0x176d35(0xcf)]((_0x38ed48,_0x996d56)=>{const _0x58cc05=_0x176d35;_0x533308[_0x996d56][_0x58cc05(0x9a)]=_0x38ed48;}),_0x26d27e[_0x176d35(0xcf)]((_0x2d36e2,_0x24bb7e)=>{const _0x43ee2d=_0x176d35;_0x533308[_0x24bb7e][_0x43ee2d(0xff)]=_0x2d36e2;}),_0xc4412f[_0x176d35(0xcf)]((_0x8716a9,_0x13d986)=>{const _0x423581=_0x176d35;_0x533308[_0x13d986][_0x423581(0xed)]=_0x8716a9;}),_0x1740f5[_0x176d35(0xcf)]((_0x4eeda7,_0xb3b21b)=>{const _0x1b0119=_0x176d35;_0x533308[_0xb3b21b][_0x1b0119(0x99)]=_0x4eeda7;}),_0x68529[_0x176d35(0xcf)]((_0x279bef,_0xefcd00)=>{const _0x3872a5=_0x176d35;_0x533308[_0xefcd00][_0x3872a5(0x8d)]=_0x279bef;}),_0x5c5279[_0x176d35(0xcf)]((_0xdf3dcf,_0x9f053c)=>{const _0x4e76d4=_0x176d35;_0x533308[_0x9f053c][_0x4e76d4(0xd9)]=_0xdf3dcf;}),_0x1ad53a[_0x176d35(0xcf)]((_0x4fa389,_0x31219f)=>{const _0x4ebae4=_0x176d35;_0x533308[_0x31219f][_0x4ebae4(0xcc)]=_0x4fa389;});var _0x5332fa=0x0;_0x533308[_0x176d35(0xcf)](_0x5dee15=>{const _0x4f32a3=_0x176d35;(parseInt(_0x5dee15[_0x4f32a3(0x9a)])<parseInt(_0x5dee15[_0x4f32a3(0xed)])||parseInt(_0x5dee15['stock_quantity'])<parseInt(_0x5dee15[_0x4f32a3(0xed)]))&&_0x5332fa++;});if(_0x5332fa!=0x0)return _0x117905[_0x176d35(0xda)](_0x176d35(0xfc),_0x176d35(0xa2)),_0x187709[_0x176d35(0xae)](_0x176d35(0xba));_0x2b28ae[_0x176d35(0x102)]['forEach'](_0x146381=>{const _0x5ed49b=_0x176d35;if(_0x146381['return_qty']>0x0){const _0x23cf14=_0xaefac9[_0x5ed49b(0xd2)][_0x5ed49b(0x8f)](_0x2a489b=>{const _0x116615=_0x5ed49b;_0x2a489b['product_name']==_0x146381[_0x116615(0xb4)]&&_0x2a489b[_0x116615(0x99)]==_0x146381['bay']&&(_0x2a489b['product_stock']=parseInt(_0x2a489b[_0x116615(0xc8)])+parseInt(_0x146381['return_qty']));});}}),await _0xaefac9['save'](),_0x2b28ae[_0x176d35(0xbc)]=_0x1c53de,_0x2b28ae[_0x176d35(0xcb)]=_0x1e0674,_0x2b28ae['date']=_0x5d302c,_0x2b28ae[_0x176d35(0xfe)]=_0x33f52b,_0x2b28ae[_0x176d35(0x102)]=_0x533308,_0x2b28ae[_0x176d35(0xd7)]=_0x5a83a5,_0x2b28ae[_0x176d35(0xc7)]=_0x4501c3,_0x2b28ae[_0x176d35(0x8b)]=_0xb7aa59,_0x2b28ae[_0x176d35(0xf9)]=_0xa393d0;const _0x54568f=await _0x2b28ae[_0x176d35(0xaa)](),_0x50520b=await purchases_return_finished[_0x176d35(0xa7)]({'invoice':_0x117905[_0x176d35(0xf5)]['invoice']}),_0x37983a=await warehouse[_0x176d35(0xa7)]({'name':_0x117905[_0x176d35(0xf5)][_0x176d35(0x8b)],'room':_0x117905[_0x176d35(0xf5)][_0x176d35(0xd8)],'warehouse_category':'Finished\x20Goods'});_0x50520b[_0x176d35(0x102)]['forEach'](_0x2307c2=>{_0x37983a['product_details']['map'](_0x215d04=>{const _0x42d527=a0_0x29da;_0x215d04[_0x42d527(0xb4)]==_0x2307c2[_0x42d527(0xb4)]&&_0x215d04['bay']==_0x2307c2['bay']&&(_0x215d04['product_stock']=parseInt(_0x215d04[_0x42d527(0xc8)])-parseInt(_0x2307c2[_0x42d527(0xed)]));});}),await _0x37983a['save']();const _0x19e578=await s_payment_data['findOne']({'invoice':_0x117905[_0x176d35(0xf5)][_0x176d35(0xbc)],'reason':_0x176d35(0xf0)});await _0x19e578[_0x176d35(0xaa)](),_0x117905['flash'](_0x176d35(0x98),_0x176d35(0xb2)),_0x187709[_0x176d35(0xae)](_0x176d35(0xe8));}catch(_0x4fa016){console[_0x176d35(0xb0)](_0x4fa016),_0x187709[_0x176d35(0xb1)](0xc8)[_0x176d35(0xc6)]({'message':_0x4fa016['message']});}}),router[a0_0x3b647b(0xbb)](a0_0x3b647b(0x103),auth,async(_0x40eae3,_0x197d6e)=>{const _0x360d65=a0_0x3b647b;try{const {username:_0x1d4b31,email:_0xbc8576,role:_0x2e22d7}=_0x40eae3[_0x360d65(0xd6)],_0x28f5b9=_0x40eae3[_0x360d65(0xd6)],_0x5d4b09=await profile[_0x360d65(0xa7)]({'email':_0x28f5b9[_0x360d65(0x105)]}),_0x11f953=await master_shop[_0x360d65(0xce)]();console[_0x360d65(0xb0)]('master',_0x11f953);const _0x16a09e=_0x40eae3[_0x360d65(0xf6)]['id'],_0x1dc1ff=await purchases_return['findById'](_0x16a09e);console['log'](_0x1dc1ff);const _0x22f4f2=await suppliers[_0x360d65(0xa7)]({'name':_0x1dc1ff['suppliers']});console['log'](_0x22f4f2);if(_0x11f953[0x0][_0x360d65(0x8e)]==_0x360d65(0xc3)){var _0xf16fb2=users[_0x360d65(0xfa)];console[_0x360d65(0xb0)](_0xf16fb2);}else{if(_0x11f953[0x0]['language']==_0x360d65(0xaf))var _0xf16fb2=users['Hindi'];else{if(_0x11f953[0x0][_0x360d65(0x8e)]==_0x360d65(0xe2))var _0xf16fb2=users[_0x360d65(0xe2)];else{if(_0x11f953[0x0][_0x360d65(0x8e)]==_0x360d65(0x100))var _0xf16fb2=users['Spanish'];else{if(_0x11f953[0x0][_0x360d65(0x8e)]==_0x360d65(0xb5))var _0xf16fb2=users[_0x360d65(0xb5)];else{if(_0x11f953[0x0]['language']==_0x360d65(0xd1))var _0xf16fb2=users[_0x360d65(0xc5)];else{if(_0x11f953[0x0][_0x360d65(0x8e)]=='Chinese')var _0xf16fb2=users[_0x360d65(0xad)];else{if(_0x11f953[0x0][_0x360d65(0x8e)]==_0x360d65(0xbf))var _0xf16fb2=users[_0x360d65(0xb8)];}}}}}}}_0x197d6e[_0x360d65(0xa3)](_0x360d65(0xe4),{'success':_0x40eae3['flash'](_0x360d65(0x98)),'errors':_0x40eae3['flash'](_0x360d65(0xfc)),'role':_0x28f5b9,'profile':_0x5d4b09,'master_shop':_0x11f953,'supplier':_0x22f4f2,'purchase':_0x1dc1ff,'language':_0xf16fb2});}catch(_0x223396){console[_0x360d65(0xb0)](_0x223396);}}),router[a0_0x3b647b(0xf2)](a0_0x3b647b(0xf8),auth,async(_0x27d682,_0x3e3453)=>{const _0x22d612=a0_0x3b647b;try{const _0x3ab784=_0x27d682['params']['id'],{invoice:_0x748324,suppliers:_0x479f77,receivable_amount:_0x28d2c6,received_amount:_0x32269e}=_0x27d682[_0x22d612(0xf5)],_0x53d5db=await purchases_return[_0x22d612(0xac)](_0x3ab784);console[_0x22d612(0xb0)](_0x53d5db);var _0x51cae0=_0x28d2c6-_0x32269e;console[_0x22d612(0xb0)](_0x32269e),_0x53d5db['received']=parseFloat(_0x32269e)+parseFloat(_0x53d5db[_0x22d612(0xbd)]),_0x53d5db[_0x22d612(0x9d)]=_0x51cae0,console['log'](_0x53d5db);const _0xbc3a32=await _0x53d5db['save'](),_0x577857=await s_payment_data['findOne']({'invoice':_0x27d682['body'][_0x22d612(0xbc)],'reason':'Purchase\x20Return'});_0x577857['amount']=_0x51cae0,await _0x577857[_0x22d612(0xaa)]();let _0x149e2c=new Date(),_0x19b00b=('0'+_0x149e2c['getDate']())[_0x22d612(0xdf)](-0x2),_0x1475dc=('0'+(_0x149e2c[_0x22d612(0xee)]()+0x1))[_0x22d612(0xdf)](-0x2),_0x2230a1=_0x149e2c[_0x22d612(0xd5)](),_0x51e17e=_0x2230a1+'-'+_0x1475dc+'-'+_0x19b00b;const _0x47f191=new suppliers_payment({'invoice':_0x748324,'date':_0x2230a1+'-'+_0x1475dc+'-'+_0x19b00b,'suppliers':_0x479f77,'reason':_0x22d612(0xa0),'amount':_0x32269e}),_0x3926be=await _0x47f191['save']();_0x27d682['flash'](_0x22d612(0x98),_0x22d612(0x9e)),_0x3e3453[_0x22d612(0xae)](_0x22d612(0x97));}catch(_0x37d79e){console[_0x22d612(0xb0)](_0x37d79e);}}),module[a0_0x3b647b(0xa5)]=router;