var a0_0x3503e4=a0_0x1c08;(function(_0x1bf9e7,_0x5df000){var _0xa350fd=a0_0x1c08,_0x570af1=_0x1bf9e7();while(!![]){try{var _0x58c5d4=-parseInt(_0xa350fd(0x238))/0x1+-parseInt(_0xa350fd(0x19a))/0x2*(parseInt(_0xa350fd(0x22c))/0x3)+parseInt(_0xa350fd(0x1a0))/0x4*(parseInt(_0xa350fd(0x1c1))/0x5)+parseInt(_0xa350fd(0x19b))/0x6+parseInt(_0xa350fd(0x22d))/0x7+parseInt(_0xa350fd(0x248))/0x8+-parseInt(_0xa350fd(0x21d))/0x9;if(_0x58c5d4===_0x5df000)break;else _0x570af1['push'](_0x570af1['shift']());}catch(_0x28a8f4){_0x570af1['push'](_0x570af1['shift']());}}}(a0_0x5015,0x6d915));const express=require(a0_0x3503e4(0x19c)),app=express(),router=express['Router'](),auth=require(a0_0x3503e4(0x1e3)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0x3503e4(0x259)),users=require(a0_0x3503e4(0x21c)),nodemailer=require(a0_0x3503e4(0x1e6));router['get'](a0_0x3503e4(0x200),auth,async(_0x5adf6a,_0x2630d4)=>{var _0x238fc3=a0_0x3503e4;try{const {username:_0x169c49,email:_0x2de055,role:_0x37ec54}=_0x5adf6a[_0x238fc3(0x1b4)],_0x5f3676=_0x5adf6a[_0x238fc3(0x1b4)],_0x2e3054=await profile[_0x238fc3(0x256)]({'email':_0x5f3676[_0x238fc3(0x234)]}),_0x4f6108=await master_shop[_0x238fc3(0x1e1)]();console[_0x238fc3(0x192)]('master',_0x4f6108);let _0x5e98e7;if(_0x5f3676[_0x238fc3(0x254)]=='staff'){const _0x555e6e=await staff[_0x238fc3(0x256)]({'email':_0x5f3676[_0x238fc3(0x234)]});_0x5e98e7=await warehouse['find']({'status':_0x238fc3(0x233),'name':_0x555e6e[_0x238fc3(0x1e4)]});}else _0x5e98e7=await warehouse[_0x238fc3(0x1e1)]({'status':_0x238fc3(0x233)});const _0x3094b3=await product[_0x238fc3(0x1e1)]();let _0x2e5ec0;if(_0x5f3676[_0x238fc3(0x254)]==_0x238fc3(0x23d)){const _0x51be88=await staff['findOne']({'email':_0x5f3676['email']});_0x2e5ec0=await adjustment[_0x238fc3(0x1e1)]({'warehouse_name':_0x51be88['warehouse']});}else _0x2e5ec0=await adjustment['aggregate']([{'$unwind':_0x238fc3(0x1d9)},{'$group':{'_id':_0x238fc3(0x209),'invoice':{'$first':'$invoice'},'date':{'$first':_0x238fc3(0x211)},'warehouse_name':{'$first':_0x238fc3(0x205)},'room':{'$addToSet':_0x238fc3(0x23a)},'finalize':{'$first':'$finalize'},'isAllowEdit':{'$first':'$isAllowEdit'}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x4f6108[0x0][_0x238fc3(0x242)]=='English\x20(US)'){var _0x4921f5=users[_0x238fc3(0x213)];console[_0x238fc3(0x192)](_0x4921f5);}else{if(_0x4f6108[0x0][_0x238fc3(0x242)]==_0x238fc3(0x1d5))var _0x4921f5=users[_0x238fc3(0x1d5)];else{if(_0x4f6108[0x0][_0x238fc3(0x242)]==_0x238fc3(0x245))var _0x4921f5=users['German'];else{if(_0x4f6108[0x0][_0x238fc3(0x242)]=='Spanish')var _0x4921f5=users[_0x238fc3(0x20e)];else{if(_0x4f6108[0x0]['language']==_0x238fc3(0x24c))var _0x4921f5=users[_0x238fc3(0x24c)];else{if(_0x4f6108[0x0][_0x238fc3(0x242)]==_0x238fc3(0x235))var _0x4921f5=users[_0x238fc3(0x19f)];else{if(_0x4f6108[0x0][_0x238fc3(0x242)]==_0x238fc3(0x1d4))var _0x4921f5=users[_0x238fc3(0x1d4)];else{if(_0x4f6108[0x0][_0x238fc3(0x242)]==_0x238fc3(0x1a5))var _0x4921f5=users[_0x238fc3(0x262)];}}}}}}}_0x2630d4[_0x238fc3(0x21e)](_0x238fc3(0x261),{'success':_0x5adf6a[_0x238fc3(0x1d0)](_0x238fc3(0x1e2)),'errors':_0x5adf6a[_0x238fc3(0x1d0)](_0x238fc3(0x193)),'role':_0x5f3676,'profile':_0x2e3054,'warehouse':_0x5e98e7,'product':_0x3094b3,'adjustment':_0x2e5ec0,'master_shop':_0x4f6108,'language':_0x4921f5});}catch(_0x17c935){console[_0x238fc3(0x192)](_0x17c935);}});function a0_0x5015(){var _0x4dcff7=['$product_details.bin','stock','$product_details.secondary_code','New_Qty_Converted_adj','find','success','../middleware/auth','warehouse','error','nodemailer','<table\x20style=\x22width:\x20100%\x20!important;\x22>','/view/add_adjustment','Floor','warehouse_name','<strong>\x20Regards\x20</strong>','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','prod_cat','Level','edit_adjustment_view','There\x27s\x20a\x20error\x20in\x20this\x20transaction','Raw\x20Materials','$product_details.product_name','Email\x20sent\x20successfully','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','stockBefore','$product_details.level','site_title','aggregate','random','image','$product_details.batch_code','Receiving\x20Area','/picking_list/PDF_adjustment_rm/','edit_adjustment','type','/view','new_adjust_qty','/preview/:id','invoice','Secondary_units','$warehouse_name','$product_details.expiry_date','</body></html>','<h5\x20style=\x22text-align:\x20left;\x22>','$_id','$product_details.production_date','secondary_unit','then','$product_details.maxPerUnit','Spanish','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','floorlevel','$date','</tr>','English','$product_details.pallet','secondary_code','rack','post','length','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','room_names','Ambient','../public/language/languages.json','3654657tuDGmh','render','True','add_adjustment','False','prod_invoice','expiry_date','$product_details.storage','RMSEmail','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','<div>','Return\x20Goods','$product_details.rack','body','date','1397325losJYS','1330945XMnOIC','$product_details.bay','prime1','\x20<>\x20','</thead>','note','Enabled','email','Portuguese\x20(BR)','</table>','save','164023AMVStp','push','$product.room_names','An\x20error\x20occurred.','product_code','staff','product','foreach\x20newproduct','production_date','back','language','message','bin','German','$product_details.type','<!DOCTYPE\x20html>','856128PEOyrL','Shelves','\x20Order\x20Date\x20:\x20','split','French','bay','/adjustment/view','Rooms','batch_code','$room','<h5>','<tr>','role','prod_code','findOne','<h2>\x20','$product_details','../models/all_models','$product_details._id','second1','<hr\x20class=\x22my-3\x22>','maxperunit','product_details','</head><body>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','adjustment','Arabic','id_transaction','filter','primary_code','id_transaction_from','json','/view/:id','storage','log','errors','$product_details.primary_code','types','$product_details.maxProducts','max_per_unit','level','ADJ-','2rmVAzM','5250492yCRcaO','express','<tbody\x20style=\x22text-align:\x20center;\x22>','prod_name','Portuguese','1249708mXHHyf','product_name','$product_details.product_code','English\x20(US)','/upload/','Arabic\x20(ae)','$product_details.product_stock','</tbody>','createTransport','status','adjust_qty','slice','New_Qty_Converted','string','all','</div>','padStart','$product.product_name','findById','\x20Order\x20Number\x20:\x20','user','</span>','_id','$product_details.floorlevel','$product_details.invoice','minus','$product_details.unit','Return\x20Rooms','params','redirect','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','toString','Enclosed','5dYspuo','/adjustment/preview/','Primary_Units','catch','/CheckingWarehouse','sendMail','$name','forEach','unit','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','</td>','$product_details.product_cat','$product_details.secondary_unit','room','flash','get','Adjustment\x20Mail','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','Chinese','Hindi','Logo.png','product_stock','host','$product','</h5>','map','<html><head><title></title>'];a0_0x5015=function(){return _0x4dcff7;};return a0_0x5015();}function a0_0x1c08(_0x32eaba,_0x126f13){var _0x50150e=a0_0x5015();return a0_0x1c08=function(_0x1c08b5,_0x1cac6e){_0x1c08b5=_0x1c08b5-0x18c;var _0x1272df=_0x50150e[_0x1c08b5];return _0x1272df;},a0_0x1c08(_0x32eaba,_0x126f13);}async function getRandom8DigitNumber(){var _0x4b80d1=a0_0x3503e4;const _0x5c7a01=0x989680,_0x3d9940=0x5f5e0ff,_0x3886f4=Math['floor'](Math[_0x4b80d1(0x1f9)]()*(_0x3d9940-_0x5c7a01+0x1))+_0x5c7a01;var _0x98ef57;const _0x2b047c=await adjustment[_0x4b80d1(0x256)]({'invoice':_0x4b80d1(0x199)+_0x3886f4});return _0x2b047c&&_0x2b047c[_0x4b80d1(0x218)]>0x0?_0x98ef57=_0x4b80d1(0x199)+_0x3886f4:_0x98ef57='ADJ-'+_0x3886f4,_0x98ef57;}router[a0_0x3503e4(0x1d1)](a0_0x3503e4(0x1e8),auth,async(_0x37fd2a,_0x12c1b2)=>{var _0x23ba55=a0_0x3503e4;try{const {username:_0xfc614,email:_0x4502d6,role:_0x28a26c}=_0x37fd2a['user'],_0x2dbd3d=_0x37fd2a[_0x23ba55(0x1b4)],_0x3267be=await profile['findOne']({'email':_0x2dbd3d[_0x23ba55(0x234)]}),_0x4e91b3=await master_shop[_0x23ba55(0x1e1)]();let _0x15c4c0;if(_0x2dbd3d[_0x23ba55(0x254)]==_0x23ba55(0x23d)){const _0x50a077=await staff[_0x23ba55(0x256)]({'email':_0x2dbd3d[_0x23ba55(0x234)]});_0x15c4c0=await warehouse[_0x23ba55(0x1f8)]([{'$match':{'status':_0x23ba55(0x233),'name':_0x50a077['warehouse'],'warehouse_category':_0x23ba55(0x1f1),'name':{'$ne':_0x23ba55(0x228)}}},{'$group':{'_id':_0x23ba55(0x1c7),'name':{'$first':_0x23ba55(0x1c7)}}}]);}else _0x15c4c0=await warehouse[_0x23ba55(0x1f8)]([{'$match':{'status':_0x23ba55(0x233),'warehouse_category':_0x23ba55(0x1f1),'name':{'$ne':_0x23ba55(0x228)}}},{'$group':{'_id':'$name','name':{'$first':_0x23ba55(0x1c7)}}}]);const _0x4718bb=await product[_0x23ba55(0x1e1)]({}),_0x42b611=await adjustment['find']({}),_0xa5769b=_0x42b611[_0x23ba55(0x218)]+0x1,_0x386115=_0x23ba55(0x199)+_0xa5769b[_0x23ba55(0x1bf)]()[_0x23ba55(0x1b0)](0x5,'0');var _0x1fbb4b=[_0x23ba55(0x21b),_0x23ba55(0x1c0),_0x23ba55(0x1bb)];if(_0x4e91b3[0x0][_0x23ba55(0x242)]==_0x23ba55(0x1a3))var _0x59bc4a=users['English'];else{if(_0x4e91b3[0x0][_0x23ba55(0x242)]==_0x23ba55(0x1d5))var _0x59bc4a=users['Hindi'];else{if(_0x4e91b3[0x0]['language']==_0x23ba55(0x245))var _0x59bc4a=users[_0x23ba55(0x245)];else{if(_0x4e91b3[0x0]['language']==_0x23ba55(0x20e))var _0x59bc4a=users['Spanish'];else{if(_0x4e91b3[0x0][_0x23ba55(0x242)]==_0x23ba55(0x24c))var _0x59bc4a=users['French'];else{if(_0x4e91b3[0x0][_0x23ba55(0x242)]==_0x23ba55(0x235))var _0x59bc4a=users[_0x23ba55(0x19f)];else{if(_0x4e91b3[0x0]['language']=='Chinese')var _0x59bc4a=users[_0x23ba55(0x1d4)];else{if(_0x4e91b3[0x0][_0x23ba55(0x242)]==_0x23ba55(0x1a5))var _0x59bc4a=users[_0x23ba55(0x262)];}}}}}}}const _0x901eb9=getRandom8DigitNumber();_0x901eb9[_0x23ba55(0x20c)](_0x3cd07a=>{var _0xa7ea98=_0x23ba55;_0x12c1b2['render'](_0xa7ea98(0x220),{'success':_0x37fd2a['flash'](_0xa7ea98(0x1e2)),'errors':_0x37fd2a[_0xa7ea98(0x1d0)](_0xa7ea98(0x193)),'role':_0x2dbd3d,'profile':_0x3267be,'warehouse':_0x15c4c0,'product':_0x4718bb,'master_shop':_0x4e91b3,'language':_0x59bc4a,'rooms_data':_0x1fbb4b,'invoice_no':_0x3cd07a});})[_0x23ba55(0x1c4)](_0x110fad=>{var _0x163809=_0x23ba55;_0x37fd2a[_0x163809(0x1d0)]('errors',_0x163809(0x1f0)),_0x12c1b2['redirect'](_0x163809(0x24e));});}catch(_0x50478b){console[_0x23ba55(0x192)](_0x50478b);}}),router[a0_0x3503e4(0x217)](a0_0x3503e4(0x1e8),auth,async(_0x3d0b0a,_0xf4d378)=>{var _0x50c70f=a0_0x3503e4;try{const {warehouse_name:_0x2da345,date:_0x51450c,prod_name:_0x3a3391,level:_0x18ac10,isle:_0x430003,pallet:_0x353c32,stock:_0x56763d,types:_0x2f68a6,adjust_qty:_0x84391,new_adjust_qty:_0x599f65,note:_0x4577b1,Room_name:_0x304320,invoice:_0x1735e0,JO_number:_0x250af5,expiry_date:_0x592a4a}=_0x3d0b0a[_0x50c70f(0x22a)];if(typeof _0x3a3391==_0x50c70f(0x1ad))var _0x312ce9=[_0x3d0b0a['body'][_0x50c70f(0x19e)]],_0x4d3230=[_0x3d0b0a['body'][_0x50c70f(0x198)]],_0x25551e=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x1de)]],_0x23daec=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x195)]],_0x3cac8a=[_0x3d0b0a['body'][_0x50c70f(0x1e0)]],_0x5ac8a4=[_0x3d0b0a['body'][_0x50c70f(0x1ac)]],_0x2405ac=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x1c3)]],_0x6baa5d=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x204)]],_0x3b6f07=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x255)]],_0x1e6280=[_0x3d0b0a[_0x50c70f(0x22a)]['batch_code']],_0x404b75=[_0x3d0b0a['body'][_0x50c70f(0x223)]],_0x2e915b=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x197)]],_0x5efbbd=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x240)]],_0x2bb8d9=[_0x3d0b0a['body'][_0x50c70f(0x1ed)]],_0xcdaf3e=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x24f)]],_0x2728e8=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x22f)]],_0x5c48ba=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x25b)]],_0x206eed=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x222)]],_0x5c777d=[_0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x263)]];else var _0x312ce9=[..._0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x19e)]],_0x4d3230=[..._0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x198)]],_0x25551e=[..._0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x1de)]],_0x23daec=[..._0x3d0b0a['body'][_0x50c70f(0x195)]],_0x3cac8a=[..._0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x1e0)]],_0x5ac8a4=[..._0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x1ac)]],_0x2405ac=[..._0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x1c9)]],_0x6baa5d=[..._0x3d0b0a['body'][_0x50c70f(0x204)]],_0x3b6f07=[..._0x3d0b0a[_0x50c70f(0x22a)]['prod_code']],_0x1e6280=[..._0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x250)]],_0x404b75=[..._0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x223)]],_0x2e915b=[..._0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x197)]],_0x5efbbd=[..._0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x240)]],_0x2bb8d9=[..._0x3d0b0a[_0x50c70f(0x22a)]['prod_cat']],_0xcdaf3e=[..._0x3d0b0a[_0x50c70f(0x22a)]['Rooms']],_0x2728e8=[..._0x3d0b0a[_0x50c70f(0x22a)]['prime1']],_0x5c48ba=[..._0x3d0b0a[_0x50c70f(0x22a)]['second1']],_0x206eed=[..._0x3d0b0a['body'][_0x50c70f(0x222)]],_0x5c777d=[..._0x3d0b0a[_0x50c70f(0x22a)][_0x50c70f(0x263)]];const _0x15b472=_0x312ce9[_0x50c70f(0x1db)](_0x47e5ec=>{return _0x47e5ec={'product_name':_0x47e5ec};});_0x4d3230[_0x50c70f(0x1c8)]((_0x2e1ea9,_0x28e19c)=>{var _0x2aa324=_0x50c70f;_0xcdaf3e[_0x2aa324(0x1c8)]((_0x5d67ba,_0x2b78f8)=>{var _0x2a4acf=_0x2aa324;if(_0x5d67ba==_0x2a4acf(0x1fc)&&_0x28e19c==_0x2b78f8){var _0x3f024d=_0x2e1ea9['slice'](0x3);_0x15b472[_0x28e19c][_0x2a4acf(0x191)]=_0x2e1ea9[0x0],_0x15b472[_0x28e19c][_0x2a4acf(0x216)]=_0x2e1ea9[0x1],_0x15b472[_0x28e19c][_0x2a4acf(0x24d)]=0x0,_0x15b472[_0x28e19c]['bin']=0x0,_0x15b472[_0x28e19c][_0x2a4acf(0x1ff)]=_0x2a4acf(0x1e9),_0x15b472[_0x28e19c]['floorlevel']=_0x3f024d;}else{if(_0x5d67ba=='Shelves'&&_0x28e19c==_0x2b78f8){var _0x3f024d=_0x2e1ea9[_0x2a4acf(0x1ab)](0x3);_0x15b472[_0x28e19c][_0x2a4acf(0x191)]=_0x2e1ea9[0x0],_0x15b472[_0x28e19c][_0x2a4acf(0x216)]=_0x2e1ea9[0x1],_0x15b472[_0x28e19c][_0x2a4acf(0x24d)]=0x0,_0x15b472[_0x28e19c][_0x2a4acf(0x244)]=0x0,_0x15b472[_0x28e19c][_0x2a4acf(0x1ff)]='Floor',_0x15b472[_0x28e19c][_0x2a4acf(0x210)]=_0x2e1ea9[0x5];}else{if(_0x28e19c==_0x2b78f8){var _0x3f3c0b;if(_0x2e1ea9[0x4]=='L')_0x3f3c0b=_0x2a4acf(0x1ee);else _0x2e1ea9[0x4]=='F'&&(_0x3f3c0b=_0x2a4acf(0x1e9));_0x15b472[_0x28e19c][_0x2a4acf(0x191)]=_0x2e1ea9[0x0],_0x15b472[_0x28e19c][_0x2a4acf(0x216)]=_0x2e1ea9[0x1],_0x15b472[_0x28e19c]['bay']=_0x2e1ea9[0x2],_0x15b472[_0x28e19c][_0x2a4acf(0x244)]=_0x2e1ea9[0x3],_0x15b472[_0x28e19c][_0x2a4acf(0x1ff)]=_0x3f3c0b,_0x15b472[_0x28e19c]['floorlevel']=_0x2e1ea9[0x5];}}}});}),_0x25551e['forEach']((_0x3c634f,_0x4d634a)=>{_0x15b472[_0x4d634a]['stockBefore']=_0x3c634f;}),_0x5c777d[_0x50c70f(0x1c8)]((_0x317234,_0x2ce7e4)=>{var _0x57f9ce=_0x50c70f;_0x15b472[_0x2ce7e4][_0x57f9ce(0x18e)]=_0x317234;}),_0x23daec[_0x50c70f(0x1c8)]((_0x3d006d,_0x93f942)=>{var _0x3204e1=_0x50c70f;_0x15b472[_0x93f942][_0x3204e1(0x195)]=_0x3d006d;}),_0x3cac8a['forEach']((_0x499135,_0x3c2090)=>{var _0x47a661=_0x50c70f;_0x15b472[_0x3c2090][_0x47a661(0x1aa)]=_0x499135;}),_0x5ac8a4[_0x50c70f(0x1c8)]((_0x6c15b4,_0x4db4ce)=>{var _0x9a2c01=_0x50c70f;_0x15b472[_0x4db4ce][_0x9a2c01(0x201)]=_0x6c15b4;}),_0x2405ac[_0x50c70f(0x1c8)]((_0x4302b3,_0x5f10ca)=>{var _0x110207=_0x50c70f;_0x15b472[_0x5f10ca][_0x110207(0x1c9)]=_0x4302b3;}),_0x6baa5d[_0x50c70f(0x1c8)]((_0x3196a8,_0x501907)=>{var _0xc43d94=_0x50c70f;_0x15b472[_0x501907][_0xc43d94(0x20b)]=_0x3196a8;}),_0x3b6f07['forEach']((_0x430223,_0x407081)=>{var _0x31d02a=_0x50c70f;_0x15b472[_0x407081][_0x31d02a(0x23c)]=_0x430223;}),_0x1e6280[_0x50c70f(0x1c8)]((_0x454baa,_0x1aba42)=>{var _0x2e2e9e=_0x50c70f;_0x15b472[_0x1aba42][_0x2e2e9e(0x250)]=_0x454baa;}),_0x404b75[_0x50c70f(0x1c8)]((_0x268f0f,_0x511662)=>{var _0x13c88d=_0x50c70f;_0x15b472[_0x511662][_0x13c88d(0x223)]=_0x268f0f;}),_0x2e915b['forEach']((_0x10f4fb,_0x568284)=>{var _0x5489fb=_0x50c70f;_0x15b472[_0x568284][_0x5489fb(0x25d)]=_0x10f4fb;}),_0x5efbbd[_0x50c70f(0x1c8)]((_0x76b422,_0x645cf9)=>{var _0x33d295=_0x50c70f;_0x15b472[_0x645cf9][_0x33d295(0x240)]=_0x76b422;}),_0x2bb8d9[_0x50c70f(0x1c8)]((_0x44a580,_0xeb67a3)=>{var _0x4476b6=_0x50c70f;_0x15b472[_0xeb67a3][_0x4476b6(0x1ed)]=_0x44a580;}),_0xcdaf3e[_0x50c70f(0x1c8)]((_0x2f4a82,_0x2bd6d8)=>{var _0x19aa65=_0x50c70f;_0x15b472[_0x2bd6d8][_0x19aa65(0x21a)]=_0x2f4a82;}),_0x2728e8[_0x50c70f(0x1c8)]((_0x607b67,_0x438711)=>{_0x15b472[_0x438711]['primary_code']=_0x607b67;}),_0x5c48ba[_0x50c70f(0x1c8)]((_0x3c9183,_0x453178)=>{var _0x510efd=_0x50c70f;_0x15b472[_0x453178][_0x510efd(0x215)]=_0x3c9183;}),_0x206eed[_0x50c70f(0x1c8)]((_0x3cf48b,_0x417477)=>{var _0x11662e=_0x50c70f;_0x15b472[_0x417477][_0x11662e(0x203)]=_0x3cf48b;});const _0x1ec1fd=_0x15b472[_0x50c70f(0x18c)](_0x327729=>_0x327729[_0x50c70f(0x1aa)]!=='0'&&_0x327729[_0x50c70f(0x1aa)]!=='');var _0x560414=0x0;_0x1ec1fd[_0x50c70f(0x1c8)](_0x257684=>{var _0xa73256=_0x50c70f;console[_0xa73256(0x192)]('foreach\x20newproduct',_0x257684),parseInt(_0x257684[_0xa73256(0x1aa)])<=0x0&&_0x560414++;});if(_0x560414!=0x0)return _0x3d0b0a[_0x50c70f(0x1d0)]('errors',_0x50c70f(0x1ec)),_0xf4d378[_0x50c70f(0x1bd)](_0x50c70f(0x241));const _0x70f8a8=new adjustment({'warehouse_name':_0x2da345,'date':_0x51450c,'product':_0x1ec1fd,'note':_0x4577b1,'room':_0x304320,'invoice':_0x1735e0,'JO_number':_0x250af5,'expiry_date':_0x592a4a}),_0x35d015=await _0x70f8a8[_0x50c70f(0x237)]();_0x3d0b0a[_0x50c70f(0x1d0)]('success','adjustment\x20add\x20successfull'),_0xf4d378[_0x50c70f(0x1bd)](_0x50c70f(0x1c2)+_0x35d015[_0x50c70f(0x1b6)]);}catch(_0x30b075){console[_0x50c70f(0x192)](_0x30b075),_0xf4d378[_0x50c70f(0x1a9)](0xc8)[_0x50c70f(0x18f)]({'message':_0x30b075['message']});}}),router[a0_0x3503e4(0x1d1)](a0_0x3503e4(0x202),auth,async(_0x179dfd,_0x4e8221)=>{var _0x1ddd7d=a0_0x3503e4;try{const {username:_0x2b2eb6,email:_0x100ee5,role:_0x5866ab}=_0x179dfd['user'],_0x1df3c4=_0x179dfd['user'],_0x55a1bc=await profile['findOne']({'email':_0x1df3c4[_0x1ddd7d(0x234)]}),_0x12ca0d=await master_shop[_0x1ddd7d(0x1e1)](),_0x190f5c=_0x179dfd[_0x1ddd7d(0x1bc)]['id'],_0x122175=await adjustment[_0x1ddd7d(0x1b2)]({'_id':_0x190f5c}),_0xbb8e04=await purchases['aggregate']([{'$match':{'warehouse_name':_0x122175['warehouse_name']}},{'$unwind':_0x1ddd7d(0x1d9)},{'$group':{'_id':_0x1ddd7d(0x1b1)}}]),_0xf34430=await product[_0x1ddd7d(0x1e1)]({}),_0x23d8e7=await warehouse[_0x1ddd7d(0x1f8)]([{'$match':{'name':_0x122175[_0x1ddd7d(0x1ea)]}},{'$unwind':_0x1ddd7d(0x258)},{'$group':{'_id':_0x1ddd7d(0x25a),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x1ddd7d(0x1a6)},'bay':{'$first':_0x1ddd7d(0x22e)},'bin':{'$first':_0x1ddd7d(0x1dd)},'type':{'$first':_0x1ddd7d(0x246)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x1ddd7d(0x194)},'secondary_code':{'$first':_0x1ddd7d(0x1df)},'product_code':{'$first':_0x1ddd7d(0x1a2)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x1ddd7d(0x229)},'maxPerUnit':{'$first':_0x1ddd7d(0x20d)},'expiry_date':{'$first':_0x1ddd7d(0x206)},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x1ddd7d(0x1fb)},'room':{'$first':_0x1ddd7d(0x251)}}}]);if(_0x12ca0d[0x0][_0x1ddd7d(0x242)]==_0x1ddd7d(0x1a3)){var _0x50eb0b=users['English'];console['log'](_0x50eb0b);}else{if(_0x12ca0d[0x0][_0x1ddd7d(0x242)]==_0x1ddd7d(0x1d5))var _0x50eb0b=users[_0x1ddd7d(0x1d5)];else{if(_0x12ca0d[0x0][_0x1ddd7d(0x242)]==_0x1ddd7d(0x245))var _0x50eb0b=users[_0x1ddd7d(0x245)];else{if(_0x12ca0d[0x0][_0x1ddd7d(0x242)]==_0x1ddd7d(0x20e))var _0x50eb0b=users['Spanish'];else{if(_0x12ca0d[0x0][_0x1ddd7d(0x242)]=='French')var _0x50eb0b=users[_0x1ddd7d(0x24c)];else{if(_0x12ca0d[0x0][_0x1ddd7d(0x242)]==_0x1ddd7d(0x235))var _0x50eb0b=users['Portuguese'];else{if(_0x12ca0d[0x0][_0x1ddd7d(0x242)]==_0x1ddd7d(0x1d4))var _0x50eb0b=users['Chinese'];else{if(_0x12ca0d[0x0]['language']==_0x1ddd7d(0x1a5))var _0x50eb0b=users['Arabic'];}}}}}}}_0x4e8221[_0x1ddd7d(0x21e)](_0x1ddd7d(0x1ef),{'success':_0x179dfd[_0x1ddd7d(0x1d0)](_0x1ddd7d(0x1e2)),'errors':_0x179dfd[_0x1ddd7d(0x1d0)](_0x1ddd7d(0x193)),'role':_0x1df3c4,'profile':_0x55a1bc,'adjustment':_0x122175,'stock':_0x23d8e7,'master_shop':_0x12ca0d,'warehouse_name':_0xbb8e04,'unit':_0xf34430,'language':_0x50eb0b});}catch(_0xa183ae){console[_0x1ddd7d(0x192)](_0xa183ae),_0x4e8221[_0x1ddd7d(0x1a9)](0xc8)[_0x1ddd7d(0x18f)]({'message':_0xa183ae['message']});}}),router['post'](a0_0x3503e4(0x202),auth,async(_0xf6132d,_0x2456c9)=>{var _0x256835=a0_0x3503e4;try{const _0x2e661e=_0xf6132d['params']['id'],{warehouse_name:_0x454a93,Room_name:_0x262be0}=_0xf6132d[_0x256835(0x22a)],_0x568ea4=await adjustment[_0x256835(0x1b2)]({'_id':_0x2e661e}),_0x312745=_0x568ea4['product'][_0x256835(0x1db)](async _0x16b859=>{var _0x54b920=_0x256835;if(_0x16b859[_0x54b920(0x1aa)]>0x0){var _0x573217=await warehouse[_0x54b920(0x256)]({'name':_0x454a93,'room':_0x16b859[_0x54b920(0x21a)],'warehouse_category':_0x54b920(0x1f1)});const _0x295ed9=_0x573217[_0x54b920(0x25e)]['map'](_0x319366=>{var _0x38f07c=_0x54b920;console[_0x38f07c(0x192)](_0x16b859['types']+_0x38f07c(0x230));if(_0x16b859[_0x38f07c(0x195)]==_0x38f07c(0x1b9)){if(_0x319366[_0x38f07c(0x1a1)]==_0x16b859['product_name']&&_0x319366[_0x38f07c(0x210)]==_0x16b859[_0x38f07c(0x210)]&&_0x319366[_0x38f07c(0x1ff)]==_0x16b859['type']&&_0x319366[_0x38f07c(0x244)]==_0x16b859[_0x38f07c(0x244)]&&_0x319366[_0x38f07c(0x24d)]==_0x16b859[_0x38f07c(0x24d)]&&_0x319366[_0x38f07c(0x216)]==_0x16b859[_0x38f07c(0x216)]&&_0x319366['storage']==_0x16b859[_0x38f07c(0x191)]&&_0x319366[_0x38f07c(0x223)]==_0x16b859[_0x38f07c(0x223)]&&_0x319366[_0x38f07c(0x250)]==_0x16b859[_0x38f07c(0x250)]&&_0x319366[_0x38f07c(0x240)]==_0x16b859[_0x38f07c(0x240)]&&_0x319366[_0x38f07c(0x203)]==_0x16b859[_0x38f07c(0x203)]&&_0x319366['_id']==_0x16b859[_0x38f07c(0x18e)]){var _0x4fa016;_0x4fa016=_0x16b859['adjust_qty'],_0x16b859['prod_cat']=='S'&&(_0x4fa016=_0x16b859[_0x38f07c(0x1aa)]),_0x319366[_0x38f07c(0x1d7)]=_0x319366[_0x38f07c(0x1d7)]-_0x4fa016;}}else{if(_0x319366['product_name']==_0x16b859[_0x38f07c(0x1a1)]&&_0x319366[_0x38f07c(0x210)]==_0x16b859[_0x38f07c(0x210)]&&_0x319366[_0x38f07c(0x1ff)]==_0x16b859[_0x38f07c(0x1ff)]&&_0x319366[_0x38f07c(0x244)]==_0x16b859['bin']&&_0x319366['bay']==_0x16b859['bay']&&_0x319366['rack']==_0x16b859[_0x38f07c(0x216)]&&_0x319366[_0x38f07c(0x191)]==_0x16b859[_0x38f07c(0x191)]&&_0x319366['expiry_date']==_0x16b859[_0x38f07c(0x223)]&&_0x319366[_0x38f07c(0x250)]==_0x16b859['batch_code']&&_0x319366['production_date']==_0x16b859['production_date']&&_0x319366[_0x38f07c(0x203)]==_0x16b859[_0x38f07c(0x203)]&&_0x319366['_id']==_0x16b859[_0x38f07c(0x18e)]){console[_0x38f07c(0x192)](_0x16b859);var _0x4fa016;_0x4fa016=_0x16b859[_0x38f07c(0x1aa)],_0x16b859[_0x38f07c(0x1ed)]=='S'&&(_0x4fa016=_0x16b859[_0x38f07c(0x1aa)]),_0x319366[_0x38f07c(0x1d7)]=_0x319366[_0x38f07c(0x1d7)]+_0x4fa016;}}});}return _0x573217;});Promise[_0x256835(0x1ae)](_0x312745)[_0x256835(0x20c)](async _0x345f52=>{var _0x228e46=_0x256835;try{for(const _0x289c21 of _0x345f52){await _0x289c21[_0x228e46(0x237)]();}_0x568ea4['finalize']=_0x228e46(0x21f);const _0x4ddee0=await _0x568ea4['save'](),_0x1ee5cb=await master_shop[_0x228e46(0x1e1)](),_0x2d377d=await email_settings[_0x228e46(0x256)](),_0x5303be=await supervisor_settings[_0x228e46(0x1e1)]();var _0x15a09d=_0x568ea4[_0x228e46(0x23e)],_0x51688f='',_0x4811f9;for(_0x4811f9 in _0x15a09d){_0x51688f+=_0x228e46(0x253)+_0x228e46(0x1f4)+_0x15a09d[_0x4811f9][_0x228e46(0x1a1)]+_0x228e46(0x1cc)+_0x228e46(0x1f4)+_0x15a09d[_0x4811f9]['product_code']+_0x228e46(0x1cc)+_0x228e46(0x1f4)+_0x15a09d[_0x4811f9][_0x228e46(0x1aa)]+'</td>'+_0x228e46(0x1f4)+_0x15a09d[_0x4811f9][_0x228e46(0x1c9)]+_0x228e46(0x1cc)+_0x228e46(0x1f4)+_0x15a09d[_0x4811f9][_0x228e46(0x20b)]+_0x228e46(0x1cc)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x568ea4[_0x228e46(0x1ea)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x15a09d[_0x4811f9][_0x228e46(0x21a)]+_0x228e46(0x1cc)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x15a09d[_0x4811f9][_0x228e46(0x191)]+_0x15a09d[_0x4811f9][_0x228e46(0x216)]+_0x15a09d[_0x4811f9][_0x228e46(0x24d)]+_0x15a09d[_0x4811f9][_0x228e46(0x244)]+_0x15a09d[_0x4811f9][_0x228e46(0x1ff)][0x0]+_0x15a09d[_0x4811f9]['floorlevel']+_0x228e46(0x1cc),_0x228e46(0x212);}let _0x1287fb=nodemailer[_0x228e46(0x1a8)]({'host':_0x2d377d[_0x228e46(0x1d8)],'port':Number(_0x2d377d['port']),'secure':![],'auth':{'user':_0x2d377d[_0x228e46(0x234)],'pass':_0x2d377d['password']}}),_0x3c8205={'from':_0x2d377d[_0x228e46(0x234)],'to':_0x5303be[0x0][_0x228e46(0x225)],'subject':_0x228e46(0x1d2),'attachments':[{'filename':_0x228e46(0x1d6),'path':__dirname+'/../public'+_0x228e46(0x1a4)+_0x1ee5cb[0x0][_0x228e46(0x1fa)],'cid':'logo'}],'html':_0x228e46(0x247)+_0x228e46(0x1dc)+_0x228e46(0x25f)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+_0x228e46(0x1ca)+_0x228e46(0x1af)+_0x228e46(0x227)+_0x228e46(0x257)+_0x1ee5cb[0x0][_0x228e46(0x1f7)]+'\x20</h2>'+_0x228e46(0x1af)+_0x228e46(0x1af)+_0x228e46(0x25c)+_0x228e46(0x227)+_0x228e46(0x208)+_0x228e46(0x1b3)+_0x568ea4['invoice']+'\x20'+'<span\x20style=\x22float:\x20right;\x22>'+_0x228e46(0x24a)+_0x568ea4[_0x228e46(0x22b)]+'\x20'+_0x228e46(0x1b5)+_0x228e46(0x1da)+_0x228e46(0x1af)+_0x228e46(0x1e7)+_0x228e46(0x1cb)+_0x228e46(0x253)+_0x228e46(0x226)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x228e46(0x260)+_0x228e46(0x20f)+_0x228e46(0x1d3)+_0x228e46(0x1be)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>'+_0x228e46(0x219)+'</tr>'+_0x228e46(0x231)+_0x228e46(0x19d)+'\x20'+_0x51688f+'\x20'+_0x228e46(0x1a7)+_0x228e46(0x236)+_0x228e46(0x227)+_0x228e46(0x1eb)+_0x228e46(0x252)+_0x1ee5cb[0x0][_0x228e46(0x1f7)]+_0x228e46(0x1da)+_0x228e46(0x1af)+'</div>'+_0x228e46(0x207)};_0x1287fb[_0x228e46(0x1c6)](_0x3c8205,function(_0xc9bb63,_0x3f34d3){var _0x12367d=_0x228e46;_0xc9bb63?(console['log'](_0xc9bb63),console[_0x12367d(0x192)]('Error\x20Occurs')):console[_0x12367d(0x192)](_0x12367d(0x1f3));}),_0xf6132d[_0x228e46(0x1d0)]('success','adjustment\x20Finalized\x20successfully'),_0x2456c9[_0x228e46(0x1bd)](_0x228e46(0x1fd)+_0x4ddee0[_0x228e46(0x1b6)]);}catch(_0x310e3d){console[_0x228e46(0x1e5)](_0x310e3d),_0x2456c9[_0x228e46(0x1a9)](0x1f4)[_0x228e46(0x18f)]({'error':'An\x20error\x20occurred\x20while\x20saving\x20data.'});}})[_0x256835(0x1c4)](_0x5bcf59=>{var _0x42eeae=_0x256835;console[_0x42eeae(0x1e5)](_0x5bcf59),_0x2456c9[_0x42eeae(0x1a9)](0x1f4)[_0x42eeae(0x18f)]({'error':_0x42eeae(0x23b)});});}catch(_0x145b36){console[_0x256835(0x192)](_0x145b36),_0x2456c9[_0x256835(0x1a9)](0xc8)[_0x256835(0x18f)]({'message':_0x145b36[_0x256835(0x243)]});}}),router['get'](a0_0x3503e4(0x190),auth,async(_0x403e1d,_0x288644)=>{var _0x724d4=a0_0x3503e4;try{const {username:_0x228ab3,email:_0x37794e,role:_0x5c85ef}=_0x403e1d[_0x724d4(0x1b4)],_0x3ab068=_0x403e1d[_0x724d4(0x1b4)],_0x28a2d1=await profile[_0x724d4(0x256)]({'email':_0x3ab068[_0x724d4(0x234)]}),_0x30b0df=await master_shop[_0x724d4(0x1e1)](),_0x25cf8e=_0x403e1d[_0x724d4(0x1bc)]['id'],_0x18c42b=await adjustment['findById']({'_id':_0x25cf8e}),_0x203027=await purchases[_0x724d4(0x1f8)]([{'$match':{'warehouse_name':_0x18c42b[_0x724d4(0x1ea)]}},{'$unwind':_0x724d4(0x1d9)},{'$group':{'_id':_0x724d4(0x1b1)}}]),_0x5757a1=await product[_0x724d4(0x1e1)]({}),_0x189fef=await warehouse[_0x724d4(0x1f8)]([{'$match':{'name':_0x18c42b['warehouse_name']}},{'$unwind':_0x724d4(0x258)},{'$group':{'_id':_0x724d4(0x25a),'name':{'$first':_0x724d4(0x1f2)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x724d4(0x1dd)},'type':{'$first':_0x724d4(0x246)},'floorlevel':{'$first':_0x724d4(0x1b7)},'primary_code':{'$first':_0x724d4(0x194)},'secondary_code':{'$first':_0x724d4(0x1df)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'},'maxPerUnit':{'$first':_0x724d4(0x20d)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x724d4(0x20a)},'batch_code':{'$first':_0x724d4(0x1fb)},'room':{'$first':'$room'}}}]);let _0x4ade11;if(_0x3ab068[_0x724d4(0x254)]==_0x724d4(0x23d)){const _0x50e2f9=await staff[_0x724d4(0x256)]({'email':_0x3ab068['email']});_0x4ade11=await warehouse[_0x724d4(0x1f8)]([{'$match':{'status':_0x724d4(0x233),'name':_0x50e2f9[_0x724d4(0x1e4)],'warehouse_category':'Raw\x20Materials','name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x724d4(0x1c7),'name':{'$first':_0x724d4(0x1c7)}}}]);}else _0x4ade11=await warehouse['aggregate']([{'$match':{'status':_0x724d4(0x233),'warehouse_category':_0x724d4(0x1f1),'name':{'$ne':_0x724d4(0x228)}}},{'$group':{'_id':'$name','name':{'$first':_0x724d4(0x1c7)}}}]);if(_0x30b0df[0x0]['language']=='English\x20(US)'){var _0x46487a=users['English'];console['log'](_0x46487a);}else{if(_0x30b0df[0x0][_0x724d4(0x242)]==_0x724d4(0x1d5))var _0x46487a=users[_0x724d4(0x1d5)];else{if(_0x30b0df[0x0][_0x724d4(0x242)]=='German')var _0x46487a=users[_0x724d4(0x245)];else{if(_0x30b0df[0x0][_0x724d4(0x242)]=='Spanish')var _0x46487a=users[_0x724d4(0x20e)];else{if(_0x30b0df[0x0]['language']==_0x724d4(0x24c))var _0x46487a=users[_0x724d4(0x24c)];else{if(_0x30b0df[0x0]['language']=='Portuguese\x20(BR)')var _0x46487a=users[_0x724d4(0x19f)];else{if(_0x30b0df[0x0][_0x724d4(0x242)]==_0x724d4(0x1d4))var _0x46487a=users[_0x724d4(0x1d4)];else{if(_0x30b0df[0x0][_0x724d4(0x242)]==_0x724d4(0x1a5))var _0x46487a=users[_0x724d4(0x262)];}}}}}}}_0x288644[_0x724d4(0x21e)](_0x724d4(0x1fe),{'success':_0x403e1d[_0x724d4(0x1d0)](_0x724d4(0x1e2)),'errors':_0x403e1d[_0x724d4(0x1d0)](_0x724d4(0x193)),'role':_0x3ab068,'profile':_0x28a2d1,'adjustment':_0x18c42b,'stock':_0x189fef,'master_shop':_0x30b0df,'warehouse_name':_0x203027,'unit':_0x5757a1,'language':_0x46487a,'warehouse':_0x4ade11});}catch(_0x26d1c8){console['log'](_0x26d1c8),_0x288644['status'](0xc8)[_0x724d4(0x18f)]({'message':_0x26d1c8[_0x724d4(0x243)]});}}),router['post'](a0_0x3503e4(0x190),auth,async(_0x1be8f9,_0x3f4d10)=>{var _0x34c124=a0_0x3503e4;try{const _0x2c06ea=_0x1be8f9['params']['id'],_0x35babb=await adjustment[_0x34c124(0x1b2)]({'_id':_0x2c06ea}),_0x101016=await warehouse[_0x34c124(0x256)]({'name':_0x35babb[_0x34c124(0x1ea)],'room':_0x35babb[_0x34c124(0x1cf)]}),{warehouse_name:_0x4ef946,date:_0x227b3c,prod_name:_0x185dd8,level:_0x5b2412,isle:_0x4b44e1,pallet:_0x1b437b,stock:_0x325bd7,types:_0x4dcd96,adjust_qty:_0x219699,new_adjust_qty:_0x30b729,note:_0x157f91,Room_name:_0x255b59,invoice:_0x441941,JO_number:_0x3824d8,expiry_date:_0x44a55e}=_0x1be8f9[_0x34c124(0x22a)];if(typeof _0x185dd8==_0x34c124(0x1ad))var _0x45a80e=[_0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x19e)]],_0x4d5993=[_0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x198)]],_0x3dd9e2=[_0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x1de)]],_0xb2f614=[_0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x195)]],_0x254716=[_0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x1e0)]],_0xbe611d=[_0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x1ac)]],_0x54d9f4=[_0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x1c3)]],_0x49d7f3=[_0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x204)]],_0x586ab6=[_0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x255)]],_0xa00c=[_0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x250)]],_0x236935=[_0x1be8f9['body'][_0x34c124(0x223)]],_0x837787=[_0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x197)]],_0x362d25=[_0x1be8f9['body'][_0x34c124(0x240)]],_0x5e3b72=[_0x1be8f9[_0x34c124(0x22a)]['prod_cat']],_0x5e79c7=[_0x1be8f9['body'][_0x34c124(0x24f)]],_0x2b2534=[_0x1be8f9[_0x34c124(0x22a)]['prime1']],_0x26782d=[_0x1be8f9[_0x34c124(0x22a)]['second1']];else var _0x45a80e=[..._0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x19e)]],_0x4d5993=[..._0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x198)]],_0x3dd9e2=[..._0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x1de)]],_0xb2f614=[..._0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x195)]],_0x254716=[..._0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x1e0)]],_0xbe611d=[..._0x1be8f9['body'][_0x34c124(0x1ac)]],_0x54d9f4=[..._0x1be8f9['body'][_0x34c124(0x1c9)]],_0x49d7f3=[..._0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x204)]],_0x586ab6=[..._0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x255)]],_0xa00c=[..._0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x250)]],_0x236935=[..._0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x223)]],_0x837787=[..._0x1be8f9[_0x34c124(0x22a)]['max_per_unit']],_0x362d25=[..._0x1be8f9[_0x34c124(0x22a)][_0x34c124(0x240)]],_0x5e3b72=[..._0x1be8f9['body'][_0x34c124(0x1ed)]],_0x5e79c7=[..._0x1be8f9[_0x34c124(0x22a)]['Rooms']],_0x2b2534=[..._0x1be8f9[_0x34c124(0x22a)]['prime1']],_0x26782d=[..._0x1be8f9[_0x34c124(0x22a)]['second1']];const _0xdb6f84=_0x45a80e[_0x34c124(0x1db)](_0x41cc33=>{return _0x41cc33={'product_name':_0x41cc33};});_0x4d5993[_0x34c124(0x1c8)]((_0x18145f,_0x59f8db)=>{_0x5e79c7['forEach']((_0x24032f,_0x26a512)=>{var _0x47d12f=a0_0x1c08;if(_0x24032f=='Receiving\x20Area'&&_0x59f8db==_0x26a512){var _0x268b13=_0x18145f[_0x47d12f(0x1ab)](0x3);_0xdb6f84[_0x59f8db]['storage']=_0x18145f[0x0],_0xdb6f84[_0x59f8db]['rack']=_0x18145f[0x1],_0xdb6f84[_0x59f8db][_0x47d12f(0x24d)]=0x0,_0xdb6f84[_0x59f8db][_0x47d12f(0x244)]=0x0,_0xdb6f84[_0x59f8db][_0x47d12f(0x1ff)]=_0x47d12f(0x1e9),_0xdb6f84[_0x59f8db]['floorlevel']=_0x268b13;}else{if(_0x24032f==_0x47d12f(0x249)&&_0x59f8db==_0x26a512){var _0x268b13=_0x18145f[_0x47d12f(0x1ab)](0x3);_0xdb6f84[_0x59f8db]['storage']=_0x18145f[0x0],_0xdb6f84[_0x59f8db]['rack']=_0x18145f[0x1],_0xdb6f84[_0x59f8db][_0x47d12f(0x24d)]=0x0,_0xdb6f84[_0x59f8db][_0x47d12f(0x244)]=0x0,_0xdb6f84[_0x59f8db][_0x47d12f(0x1ff)]=_0x47d12f(0x1e9),_0xdb6f84[_0x59f8db][_0x47d12f(0x210)]=_0x18145f[0x5];}else{if(_0x59f8db==_0x26a512){var _0x5b3b91;if(_0x18145f[0x4]=='L')_0x5b3b91=_0x47d12f(0x1ee);else _0x18145f[0x4]=='F'&&(_0x5b3b91='Floor');_0xdb6f84[_0x59f8db][_0x47d12f(0x191)]=_0x18145f[0x0],_0xdb6f84[_0x59f8db][_0x47d12f(0x216)]=_0x18145f[0x1],_0xdb6f84[_0x59f8db][_0x47d12f(0x24d)]=_0x18145f[0x2],_0xdb6f84[_0x59f8db][_0x47d12f(0x244)]=_0x18145f[0x3],_0xdb6f84[_0x59f8db]['type']=_0x5b3b91,_0xdb6f84[_0x59f8db]['floorlevel']=_0x18145f[0x5];}}}});}),_0x3dd9e2[_0x34c124(0x1c8)]((_0x19903d,_0x11017b)=>{var _0x238ae1=_0x34c124;_0xdb6f84[_0x11017b][_0x238ae1(0x1f5)]=_0x19903d;}),_0xb2f614[_0x34c124(0x1c8)]((_0x589d03,_0x21a754)=>{var _0xd4f5d3=_0x34c124;_0xdb6f84[_0x21a754][_0xd4f5d3(0x195)]=_0x589d03;}),_0x254716['forEach']((_0x242b60,_0x4d7b9e)=>{_0xdb6f84[_0x4d7b9e]['adjust_qty']=_0x242b60;}),_0xbe611d[_0x34c124(0x1c8)]((_0x26f3e3,_0x47d5b3)=>{var _0x1a5e8b=_0x34c124;_0xdb6f84[_0x47d5b3][_0x1a5e8b(0x201)]=_0x26f3e3;}),_0x54d9f4[_0x34c124(0x1c8)]((_0x222132,_0x9cbc42)=>{var _0x3be7ef=_0x34c124;_0xdb6f84[_0x9cbc42][_0x3be7ef(0x1c9)]=_0x222132;}),_0x49d7f3[_0x34c124(0x1c8)]((_0x36321b,_0x149d73)=>{var _0x551a78=_0x34c124;_0xdb6f84[_0x149d73][_0x551a78(0x20b)]=_0x36321b;}),_0x586ab6[_0x34c124(0x1c8)]((_0x2d16e6,_0x49e890)=>{var _0x4402ef=_0x34c124;_0xdb6f84[_0x49e890][_0x4402ef(0x23c)]=_0x2d16e6;}),_0xa00c[_0x34c124(0x1c8)]((_0x384d55,_0x4115c3)=>{var _0xb78018=_0x34c124;_0xdb6f84[_0x4115c3][_0xb78018(0x250)]=_0x384d55;}),_0x236935['forEach']((_0x270ca8,_0x50f007)=>{var _0x588e25=_0x34c124;_0xdb6f84[_0x50f007][_0x588e25(0x223)]=_0x270ca8;}),_0x837787[_0x34c124(0x1c8)]((_0x1cd7d9,_0x591ad4)=>{var _0x2e913c=_0x34c124;_0xdb6f84[_0x591ad4][_0x2e913c(0x25d)]=_0x1cd7d9;}),_0x362d25[_0x34c124(0x1c8)]((_0x99b885,_0x10ddf6)=>{var _0x38d914=_0x34c124;_0xdb6f84[_0x10ddf6][_0x38d914(0x240)]=_0x99b885;}),_0x5e3b72[_0x34c124(0x1c8)]((_0x1f97e5,_0x30d376)=>{var _0x28e8b0=_0x34c124;_0xdb6f84[_0x30d376][_0x28e8b0(0x1ed)]=_0x1f97e5;}),_0x5e79c7[_0x34c124(0x1c8)]((_0x462f91,_0x383db9)=>{var _0xa30061=_0x34c124;_0xdb6f84[_0x383db9][_0xa30061(0x21a)]=_0x462f91;}),_0x2b2534[_0x34c124(0x1c8)]((_0x2a177b,_0x4dc74b)=>{var _0x148349=_0x34c124;_0xdb6f84[_0x4dc74b][_0x148349(0x18d)]=_0x2a177b;}),_0x26782d['forEach']((_0x11e2ee,_0x2db27b)=>{var _0x35b9ae=_0x34c124;_0xdb6f84[_0x2db27b][_0x35b9ae(0x215)]=_0x11e2ee;});const _0x56fe0a=_0xdb6f84['filter'](_0x2a04ea=>_0x2a04ea[_0x34c124(0x1aa)]!=='0'&&_0x2a04ea[_0x34c124(0x1aa)]!=='');var _0x1292eb=0x0;_0x56fe0a[_0x34c124(0x1c8)](_0x2cadc1=>{var _0xa686ee=_0x34c124;console['log'](_0xa686ee(0x23f),_0x2cadc1),parseInt(_0x2cadc1[_0xa686ee(0x1aa)])<=0x0&&_0x1292eb++;});if(_0x1292eb!=0x0)return _0x1be8f9[_0x34c124(0x1d0)](_0x34c124(0x193),_0x34c124(0x1ec)),_0x3f4d10[_0x34c124(0x1bd)](_0x34c124(0x241));_0x35babb[_0x34c124(0x1ea)]=_0x4ef946,_0x35babb[_0x34c124(0x22b)]=_0x227b3c,_0x35babb[_0x34c124(0x23e)]=_0x56fe0a,_0x35babb[_0x34c124(0x232)]=_0x157f91,_0x35babb[_0x34c124(0x203)]=_0x441941,_0x35babb['isAllowEdit']=_0x34c124(0x221);const _0x3472b3=await _0x35babb[_0x34c124(0x237)]();_0x1be8f9[_0x34c124(0x1d0)]('success','adjustment\x20data\x20update\x20successfully'),_0x3f4d10[_0x34c124(0x1bd)]('/adjustment/view');}catch(_0x303574){console[_0x34c124(0x192)](_0x303574);}}),router[a0_0x3503e4(0x217)]('/barcode_scanner',async(_0x4c628d,_0x45d9d3)=>{var _0x50a0e5=a0_0x3503e4;const {primary_code:_0x4f44cb,warehouse_data:_0x1755d8,rooms_data:_0x3a8a50,Roomslist:_0xf13b27}=_0x4c628d[_0x50a0e5(0x22a)],_0x53f29c=_0xf13b27[_0x50a0e5(0x24b)](','),_0xef021e=[];async function _0x786a86(_0x38feac){var _0x49356b=_0x50a0e5;const _0x1a3650=await warehouse[_0x49356b(0x1f8)]([{'$match':{'name':_0x1755d8,'room':_0x38feac}},{'$unwind':_0x49356b(0x258)},{'$match':{'product_details.primary_code':_0x4f44cb}},{'$group':{'_id':_0x49356b(0x25a),'name':{'$first':_0x49356b(0x1f2)},'product_stock':{'$first':_0x49356b(0x1a6)},'primary_code':{'$first':_0x49356b(0x194)},'secondary_code':{'$first':_0x49356b(0x1df)},'product_code':{'$first':_0x49356b(0x1a2)},'level':{'$first':_0x49356b(0x22e)},'isle':{'$first':_0x49356b(0x1dd)},'type':{'$first':_0x49356b(0x246)},'pallet':{'$first':_0x49356b(0x1b7)},'unit':{'$first':_0x49356b(0x1ba)},'secondary_unit':{'$first':_0x49356b(0x1ce)},'storage':{'$first':_0x49356b(0x224)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x49356b(0x206)},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':_0x49356b(0x20d)},'batch_code':{'$first':_0x49356b(0x1fb)},'product_cat':{'$first':_0x49356b(0x1cd)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x49356b(0x251)},'invoice':{'$first':_0x49356b(0x1b8)}}}]),_0x40ecec=await warehouse[_0x49356b(0x1f8)]([{'$match':{'name':_0x1755d8,'room':_0x38feac}},{'$unwind':_0x49356b(0x258)},{'$match':{'product_details.secondary_code':_0x4f44cb}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x49356b(0x1f2)},'product_stock':{'$first':_0x49356b(0x1a6)},'primary_code':{'$first':_0x49356b(0x194)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x49356b(0x1a2)},'level':{'$first':_0x49356b(0x22e)},'isle':{'$first':_0x49356b(0x1dd)},'type':{'$first':_0x49356b(0x246)},'pallet':{'$first':_0x49356b(0x1b7)},'unit':{'$first':_0x49356b(0x1ba)},'secondary_unit':{'$first':_0x49356b(0x1ce)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x49356b(0x229)},'expiry_date':{'$first':_0x49356b(0x206)},'production_date':{'$first':_0x49356b(0x20a)},'maxPerUnit':{'$first':_0x49356b(0x20d)},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':'$product_details.product_cat'},'computeUsed':{'$first':'S'},'roomNamed':{'$first':_0x49356b(0x251)}}}]);if(_0x1a3650[_0x49356b(0x218)]>0x0)_0xef021e['push'](_0x1a3650);else _0x40ecec['length']>0x0&&_0xef021e[_0x49356b(0x239)](_0x40ecec);}const _0x45a096=_0x53f29c['map'](_0x560009=>_0x786a86(_0x560009));await Promise[_0x50a0e5(0x1ae)](_0x45a096),_0x45d9d3[_0x50a0e5(0x18f)](_0xef021e);}),router['post'](a0_0x3503e4(0x1c5),async(_0x3662c2,_0xe9d544)=>{var _0x534d06=a0_0x3503e4;const {primaryCode:_0x238938,secondaryCode:_0x4ab0d7,productCode:_0x28ab77,level:_0x5a2b89,isle:_0x57def2,pallet:_0x115413,warehouses:_0x312a79,room:_0x68896a}=_0x3662c2[_0x534d06(0x22a)];try{const _0x30e91a=await warehouse[_0x534d06(0x1f8)]([{'$match':{'name':_0x312a79,'room':_0x68896a}},{'$unwind':_0x534d06(0x258)},{'$match':{'product_details.level':parseInt(_0x5a2b89),'product_details.isle':_0x57def2,'product_details.pallet':parseInt(_0x115413)}},{'$group':{'_id':_0x534d06(0x25a),'name':{'$first':_0x534d06(0x1f2)},'product_stock':{'$first':_0x534d06(0x1a6)},'level':{'$first':_0x534d06(0x1f6)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x534d06(0x214)},'maxProducts':{'$first':_0x534d06(0x196)}}}]);_0xe9d544[_0x534d06(0x1a9)](0xc8)[_0x534d06(0x18f)](_0x30e91a);}catch(_0x3c9688){_0xe9d544[_0x534d06(0x1a9)](0x194)[_0x534d06(0x18f)]({'message':_0x3c9688[_0x534d06(0x243)]});}}),module['exports']=router;