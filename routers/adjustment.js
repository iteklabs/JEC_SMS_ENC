function a0_0x38e3(_0x330b00,_0x396d7c){var _0x46ae72=a0_0x46ae();return a0_0x38e3=function(_0x38e3c3,_0x4d5950){_0x38e3c3=_0x38e3c3-0xf2;var _0x38634c=_0x46ae72[_0x38e3c3];return _0x38634c;},a0_0x38e3(_0x330b00,_0x396d7c);}var a0_0x493d6c=a0_0x38e3;function a0_0x46ae(){var _0x238a2c=['product_name','<tr>','$product.room_names','$product_details.production_date','<span\x20style=\x22float:\x20right;\x22>','user','<html><head><title></title>','map','bay','json','id_transaction_from','minus','$product_details._id','slice','There\x27s\x20a\x20error\x20in\x20this\x20transaction','</h5>','master','bin','$product_details.product_cat','$product_details.secondary_code','Portuguese\x20(BR)','password','email','production_date','padStart','toString','$product_details.batch_code','adjustment\x20Finalized\x20successfully','Spanish','$isAllowEdit','unit','image','rack','language','$product_details.rack','findById','$product_details.product_code','edit_adjustment','</div>','$product_details.pallet','room','$product_details.maxPerUnit','/picking_list/PDF_adjustment_rm/','Primary_Units','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','$room','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','string','$product_details.invoice','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','body','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','$product_details','flash','$product_details.bay','filter','room_names','get','Secondary_units','Rooms','prod_name','expiry_date','Receiving\x20Area','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','<div>','prod_invoice','Email\x20sent\x20successfully','$name','3586686SWkTsm','edit_adjustment_view','New_Qty_Converted_adj','types','4496lyiEWM','../public/language/languages.json','params','exports','4922112lrOqbk','redirect','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','Portuguese','English','adjustment\x20data\x20update\x20successfully','prod_cat','$product_details.product_name','stock','stockBefore','$product_details.floorlevel','59868yToJZJ','/../public','new_adjust_qty','render','$product.product_name','max_per_unit','warehouse_name','site_title','</head><body>','4014UmYwHe','random','product','$product_details.secondary_unit','$product','product_code','Shelves','length','status','\x20<>\x20','nodemailer','New_Qty_Converted','type','True','/preview/:id','3960691uANcGe','invoice','<strong>\x20Regards\x20</strong>','/view/:id','product_stock','/barcode_scanner','/view/add_adjustment','French','</thead>','adjust_qty','19lEqOXu','batch_code','adjustment\x20add\x20successfull','message','prod_code','An\x20error\x20occurred\x20while\x20saving\x20data.','Raw\x20Materials','Enclosed','Chinese','catch','id_transaction','$product_details.expiry_date','errors','aggregate','storage','\x20</h2>','<h5>','ADJ-','primary_code','secondary_unit','$invoice','../models/all_models','RMSEmail','error','Floor','Adjustment\x20Mail','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','$finalize','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','$product_details.storage','\x20Order\x20Number\x20:\x20','secondary_code','$_id','</td>','$product_details.isle','$product_details.level','isAllowEdit','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','host','$product_details.primary_code','Router','express','German','floorlevel','$warehouse_name','Enabled','$product_details.type','port','<hr\x20class=\x22my-3\x22>','/view','Logo.png','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','</tbody>','date','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','foreach\x20newproduct','then','add_adjustment','prime1','1406352wRwrVF','Return\x20Goods','Arabic\x20(ae)','$date','$product_details.unit','warehouse','$product_details.bin','findOne','Level','staff','note','logo','role','log','second1','1294060mzMjsg','level','$product_details.product_stock','</span>','<table\x20style=\x22width:\x20100%\x20!important;\x22>','sendMail','post','</table>','finalize','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','save','split','English\x20(US)','<tbody\x20style=\x22text-align:\x20center;\x22>','maxperunit','success','back','</tr>','find','Ambient','Arabic','Hindi','$product_details.maxProducts','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','forEach','An\x20error\x20occurred.','_id','</body></html>'];a0_0x46ae=function(){return _0x238a2c;};return a0_0x46ae();}(function(_0x481c26,_0x17594f){var _0x49eda7=a0_0x38e3,_0x166ad5=_0x481c26();while(!![]){try{var _0x1511b2=-parseInt(_0x49eda7(0x191))/0x1*(-parseInt(_0x49eda7(0x16f))/0x2)+parseInt(_0x49eda7(0x15c))/0x3+-parseInt(_0x49eda7(0x1cc))/0x4+-parseInt(_0x49eda7(0xfc))/0x5+-parseInt(_0x49eda7(0x164))/0x6+parseInt(_0x49eda7(0x187))/0x7+-parseInt(_0x49eda7(0x160))/0x8*(parseInt(_0x49eda7(0x178))/0x9);if(_0x1511b2===_0x17594f)break;else _0x166ad5['push'](_0x166ad5['shift']());}catch(_0x56ccb2){_0x166ad5['push'](_0x166ad5['shift']());}}}(a0_0x46ae,0x9e60d));const express=require(a0_0x493d6c(0x1ba)),app=express(),router=express[a0_0x493d6c(0x1b9)](),auth=require('../middleware/auth'),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0x493d6c(0x1a6)),users=require(a0_0x493d6c(0x161)),nodemailer=require(a0_0x493d6c(0x182));router[a0_0x493d6c(0x151)](a0_0x493d6c(0x1c2),auth,async(_0x9662c4,_0x568674)=>{var _0x510ea=a0_0x493d6c;try{const {username:_0x425ec5,email:_0x5f3072,role:_0x45350c}=_0x9662c4[_0x510ea(0x11d)],_0x31fef0=_0x9662c4[_0x510ea(0x11d)],_0x49af4b=await profile[_0x510ea(0xf4)]({'email':_0x31fef0[_0x510ea(0x12e)]}),_0x564311=await master_shop[_0x510ea(0x10e)]();console['log'](_0x510ea(0x128),_0x564311);let _0x3a6dc5;if(_0x31fef0['role']=='staff'){const _0x3e3f6b=await staff[_0x510ea(0xf4)]({'email':_0x31fef0[_0x510ea(0x12e)]});_0x3a6dc5=await warehouse[_0x510ea(0x10e)]({'status':_0x510ea(0x1be),'name':_0x3e3f6b[_0x510ea(0xf2)]});}else _0x3a6dc5=await warehouse[_0x510ea(0x10e)]({'status':_0x510ea(0x1be)});const _0x1147d4=await product[_0x510ea(0x10e)]();let _0x5a4549;if(_0x31fef0['role']==_0x510ea(0xf6)){const _0x577d83=await staff[_0x510ea(0xf4)]({'email':_0x31fef0[_0x510ea(0x12e)]});_0x5a4549=await adjustment[_0x510ea(0x10e)]({'warehouse_name':_0x577d83[_0x510ea(0xf2)]});}else _0x5a4549=await adjustment[_0x510ea(0x19e)]([{'$unwind':_0x510ea(0x17c)},{'$group':{'_id':_0x510ea(0x1b1),'invoice':{'$first':_0x510ea(0x1a5)},'date':{'$first':_0x510ea(0x1cf)},'warehouse_name':{'$first':_0x510ea(0x1bd)},'room':{'$addToSet':_0x510ea(0x11a)},'finalize':{'$first':_0x510ea(0x1ac)},'isAllowEdit':{'$first':_0x510ea(0x135)}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x564311[0x0][_0x510ea(0x139)]==_0x510ea(0x108)){var _0x3ffeee=users[_0x510ea(0x168)];console[_0x510ea(0xfa)](_0x3ffeee);}else{if(_0x564311[0x0][_0x510ea(0x139)]==_0x510ea(0x111))var _0x3ffeee=users['Hindi'];else{if(_0x564311[0x0][_0x510ea(0x139)]==_0x510ea(0x1bb))var _0x3ffeee=users[_0x510ea(0x1bb)];else{if(_0x564311[0x0]['language']=='Spanish')var _0x3ffeee=users[_0x510ea(0x134)];else{if(_0x564311[0x0][_0x510ea(0x139)]==_0x510ea(0x18e))var _0x3ffeee=users[_0x510ea(0x18e)];else{if(_0x564311[0x0][_0x510ea(0x139)]=='Portuguese\x20(BR)')var _0x3ffeee=users[_0x510ea(0x167)];else{if(_0x564311[0x0][_0x510ea(0x139)]==_0x510ea(0x199))var _0x3ffeee=users['Chinese'];else{if(_0x564311[0x0][_0x510ea(0x139)]==_0x510ea(0x1ce))var _0x3ffeee=users[_0x510ea(0x110)];}}}}}}}_0x568674[_0x510ea(0x172)]('adjustment',{'success':_0x9662c4['flash'](_0x510ea(0x10b)),'errors':_0x9662c4['flash'](_0x510ea(0x19d)),'role':_0x31fef0,'profile':_0x49af4b,'warehouse':_0x3a6dc5,'product':_0x1147d4,'adjustment':_0x5a4549,'master_shop':_0x564311,'language':_0x3ffeee});}catch(_0x58df1e){console[_0x510ea(0xfa)](_0x58df1e);}});async function getRandom8DigitNumber(){var _0x341f72=a0_0x493d6c;const _0x451424=0x989680,_0x506d81=0x5f5e0ff,_0x27b244=Math['floor'](Math[_0x341f72(0x179)]()*(_0x506d81-_0x451424+0x1))+_0x451424;var _0x121f4b;const _0x4c4207=await adjustment[_0x341f72(0xf4)]({'invoice':'ADJ-'+_0x27b244});return _0x4c4207&&_0x4c4207[_0x341f72(0x17f)]>0x0?_0x121f4b=_0x341f72(0x1a2)+_0x27b244:_0x121f4b='ADJ-'+_0x27b244,_0x121f4b;}router[a0_0x493d6c(0x151)](a0_0x493d6c(0x18d),auth,async(_0x5e386f,_0x4ff007)=>{var _0x36854b=a0_0x493d6c;try{const {username:_0x5e9d1f,email:_0x421d60,role:_0x4ec1f0}=_0x5e386f[_0x36854b(0x11d)],_0x2552b1=_0x5e386f[_0x36854b(0x11d)],_0x566446=await profile['findOne']({'email':_0x2552b1[_0x36854b(0x12e)]}),_0x4d26c4=await master_shop[_0x36854b(0x10e)]();let _0x4d49da;if(_0x2552b1[_0x36854b(0xf9)]==_0x36854b(0xf6)){const _0x2d6e87=await staff[_0x36854b(0xf4)]({'email':_0x2552b1[_0x36854b(0x12e)]});_0x4d49da=await warehouse[_0x36854b(0x19e)]([{'$match':{'status':_0x36854b(0x1be),'name':_0x2d6e87[_0x36854b(0xf2)],'warehouse_category':_0x36854b(0x197),'name':{'$ne':_0x36854b(0x1cd)}}},{'$group':{'_id':_0x36854b(0x15b),'name':{'$first':_0x36854b(0x15b)}}}]);}else _0x4d49da=await warehouse['aggregate']([{'$match':{'status':_0x36854b(0x1be),'warehouse_category':_0x36854b(0x197),'name':{'$ne':_0x36854b(0x1cd)}}},{'$group':{'_id':_0x36854b(0x15b),'name':{'$first':_0x36854b(0x15b)}}}]);const _0x3e871d=await product[_0x36854b(0x10e)]({}),_0x27b20a=await adjustment[_0x36854b(0x10e)]({}),_0x4d73e7=_0x27b20a[_0x36854b(0x17f)]+0x1,_0x2f5fa7=_0x36854b(0x1a2)+_0x4d73e7[_0x36854b(0x131)]()[_0x36854b(0x130)](0x5,'0');var _0x2cb0dd=[_0x36854b(0x10f),_0x36854b(0x198),'Return\x20Rooms'];if(_0x4d26c4[0x0]['language']==_0x36854b(0x108))var _0x8a5b05=users[_0x36854b(0x168)];else{if(_0x4d26c4[0x0]['language']==_0x36854b(0x111))var _0x8a5b05=users[_0x36854b(0x111)];else{if(_0x4d26c4[0x0][_0x36854b(0x139)]==_0x36854b(0x1bb))var _0x8a5b05=users[_0x36854b(0x1bb)];else{if(_0x4d26c4[0x0][_0x36854b(0x139)]==_0x36854b(0x134))var _0x8a5b05=users[_0x36854b(0x134)];else{if(_0x4d26c4[0x0]['language']==_0x36854b(0x18e))var _0x8a5b05=users['French'];else{if(_0x4d26c4[0x0][_0x36854b(0x139)]==_0x36854b(0x12c))var _0x8a5b05=users[_0x36854b(0x167)];else{if(_0x4d26c4[0x0][_0x36854b(0x139)]==_0x36854b(0x199))var _0x8a5b05=users['Chinese'];else{if(_0x4d26c4[0x0][_0x36854b(0x139)]==_0x36854b(0x1ce))var _0x8a5b05=users[_0x36854b(0x110)];}}}}}}}const _0x482c99=getRandom8DigitNumber();_0x482c99[_0x36854b(0x1c9)](_0x1b9335=>{var _0x502951=_0x36854b;_0x4ff007['render'](_0x502951(0x1ca),{'success':_0x5e386f[_0x502951(0x14d)](_0x502951(0x10b)),'errors':_0x5e386f[_0x502951(0x14d)](_0x502951(0x19d)),'role':_0x2552b1,'profile':_0x566446,'warehouse':_0x4d49da,'product':_0x3e871d,'master_shop':_0x4d26c4,'language':_0x8a5b05,'rooms_data':_0x2cb0dd,'invoice_no':_0x1b9335});})[_0x36854b(0x19a)](_0x4427a4=>{var _0x4c3f95=_0x36854b;_0x5e386f[_0x4c3f95(0x14d)](_0x4c3f95(0x19d),_0x4c3f95(0x126)),_0x4ff007[_0x4c3f95(0x165)]('/adjustment/view');});}catch(_0x8fc2a8){console[_0x36854b(0xfa)](_0x8fc2a8);}}),router['post'](a0_0x493d6c(0x18d),auth,async(_0x3ea80d,_0x3d9193)=>{var _0x5b3abc=a0_0x493d6c;try{const {warehouse_name:_0x56654,date:_0x49389b,prod_name:_0x52b728,level:_0x48699d,isle:_0x428e0b,pallet:_0x54b52d,stock:_0x2db45d,types:_0x1c174c,adjust_qty:_0x5c64d6,new_adjust_qty:_0x22d322,note:_0x142490,Room_name:_0x327ee5,invoice:_0x56e2ff,JO_number:_0x3ba1a6,expiry_date:_0x18e8bd}=_0x3ea80d[_0x5b3abc(0x14a)];if(typeof _0x52b728==_0x5b3abc(0x147))var _0x3cf2af=[_0x3ea80d['body'][_0x5b3abc(0x154)]],_0x3f05fc=[_0x3ea80d[_0x5b3abc(0x14a)]['level']],_0x1b24b7=[_0x3ea80d['body']['stock']],_0x11f7c7=[_0x3ea80d['body'][_0x5b3abc(0x15f)]],_0x1973ee=[_0x3ea80d[_0x5b3abc(0x14a)]['New_Qty_Converted_adj']],_0x3edadf=[_0x3ea80d['body'][_0x5b3abc(0x183)]],_0x1022c0=[_0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x143)]],_0x1cffbe=[_0x3ea80d['body']['Secondary_units']],_0x325073=[_0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x195)]],_0x2ff4a2=[_0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x192)]],_0xf322e6=[_0x3ea80d[_0x5b3abc(0x14a)]['expiry_date']],_0x2a30ee=[_0x3ea80d[_0x5b3abc(0x14a)]['max_per_unit']],_0x1626e6=[_0x3ea80d[_0x5b3abc(0x14a)]['production_date']],_0xa34e66=[_0x3ea80d['body']['prod_cat']],_0x4a41c0=[_0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x153)]],_0x512f5f=[_0x3ea80d['body']['prime1']],_0x12e814=[_0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0xfb)]],_0x48a6e5=[_0x3ea80d['body'][_0x5b3abc(0x159)]],_0x68e9ea=[_0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x19b)]];else var _0x3cf2af=[..._0x3ea80d[_0x5b3abc(0x14a)]['prod_name']],_0x3f05fc=[..._0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0xfd)]],_0x1b24b7=[..._0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x16c)]],_0x11f7c7=[..._0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x15f)]],_0x1973ee=[..._0x3ea80d['body'][_0x5b3abc(0x15e)]],_0x3edadf=[..._0x3ea80d[_0x5b3abc(0x14a)]['New_Qty_Converted']],_0x1022c0=[..._0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x136)]],_0x1cffbe=[..._0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x152)]],_0x325073=[..._0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x195)]],_0x2ff4a2=[..._0x3ea80d[_0x5b3abc(0x14a)]['batch_code']],_0xf322e6=[..._0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x155)]],_0x2a30ee=[..._0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x174)]],_0x1626e6=[..._0x3ea80d[_0x5b3abc(0x14a)]['production_date']],_0xa34e66=[..._0x3ea80d[_0x5b3abc(0x14a)][_0x5b3abc(0x16a)]],_0x4a41c0=[..._0x3ea80d['body'][_0x5b3abc(0x153)]],_0x512f5f=[..._0x3ea80d['body'][_0x5b3abc(0x1cb)]],_0x12e814=[..._0x3ea80d['body'][_0x5b3abc(0xfb)]],_0x48a6e5=[..._0x3ea80d[_0x5b3abc(0x14a)]['prod_invoice']],_0x68e9ea=[..._0x3ea80d[_0x5b3abc(0x14a)]['id_transaction']];const _0x2f3e63=_0x3cf2af[_0x5b3abc(0x11f)](_0x5e52a6=>{return _0x5e52a6={'product_name':_0x5e52a6};});_0x3f05fc['forEach']((_0x2dcd7b,_0x721a4)=>{var _0x23bd4e=_0x5b3abc;_0x4a41c0[_0x23bd4e(0x114)]((_0x574b9d,_0x14d8e4)=>{var _0x83e409=_0x23bd4e;if(_0x574b9d==_0x83e409(0x156)&&_0x721a4==_0x14d8e4){var _0x44e89f=_0x2dcd7b[_0x83e409(0x125)](0x3);_0x2f3e63[_0x721a4]['storage']=_0x2dcd7b[0x0],_0x2f3e63[_0x721a4][_0x83e409(0x138)]=_0x2dcd7b[0x1],_0x2f3e63[_0x721a4][_0x83e409(0x120)]=0x0,_0x2f3e63[_0x721a4][_0x83e409(0x129)]=0x0,_0x2f3e63[_0x721a4]['type']=_0x83e409(0x1a9),_0x2f3e63[_0x721a4]['floorlevel']=_0x44e89f;}else{if(_0x574b9d==_0x83e409(0x17e)&&_0x721a4==_0x14d8e4){var _0x44e89f=_0x2dcd7b[_0x83e409(0x125)](0x3);_0x2f3e63[_0x721a4][_0x83e409(0x19f)]=_0x2dcd7b[0x0],_0x2f3e63[_0x721a4][_0x83e409(0x138)]=_0x2dcd7b[0x1],_0x2f3e63[_0x721a4][_0x83e409(0x120)]=0x0,_0x2f3e63[_0x721a4][_0x83e409(0x129)]=0x0,_0x2f3e63[_0x721a4][_0x83e409(0x184)]='Floor',_0x2f3e63[_0x721a4][_0x83e409(0x1bc)]=_0x2dcd7b[0x5];}else{if(_0x721a4==_0x14d8e4){var _0x7584f0;if(_0x2dcd7b[0x4]=='L')_0x7584f0=_0x83e409(0xf5);else _0x2dcd7b[0x4]=='F'&&(_0x7584f0=_0x83e409(0x1a9));_0x2f3e63[_0x721a4]['storage']=_0x2dcd7b[0x0],_0x2f3e63[_0x721a4][_0x83e409(0x138)]=_0x2dcd7b[0x1],_0x2f3e63[_0x721a4][_0x83e409(0x120)]=_0x2dcd7b[0x2],_0x2f3e63[_0x721a4][_0x83e409(0x129)]=_0x2dcd7b[0x3],_0x2f3e63[_0x721a4]['type']=_0x7584f0,_0x2f3e63[_0x721a4]['floorlevel']=_0x2dcd7b[0x5];}}}});}),_0x1b24b7[_0x5b3abc(0x114)]((_0x2dd5a2,_0x59b2b4)=>{var _0x491e4e=_0x5b3abc;_0x2f3e63[_0x59b2b4][_0x491e4e(0x16d)]=_0x2dd5a2;}),_0x68e9ea[_0x5b3abc(0x114)]((_0x50e76a,_0x400ed1)=>{var _0x1ea296=_0x5b3abc;_0x2f3e63[_0x400ed1][_0x1ea296(0x122)]=_0x50e76a;}),_0x11f7c7[_0x5b3abc(0x114)]((_0x59116d,_0x1ac96e)=>{var _0xefd514=_0x5b3abc;_0x2f3e63[_0x1ac96e][_0xefd514(0x15f)]=_0x59116d;}),_0x1973ee['forEach']((_0x12e06f,_0x5f4273)=>{var _0x596d06=_0x5b3abc;_0x2f3e63[_0x5f4273][_0x596d06(0x190)]=_0x12e06f;}),_0x3edadf['forEach']((_0x2d4847,_0x55b004)=>{var _0x2bc08f=_0x5b3abc;_0x2f3e63[_0x55b004][_0x2bc08f(0x171)]=_0x2d4847;}),_0x1022c0[_0x5b3abc(0x114)]((_0x108333,_0x3f0989)=>{var _0x35f064=_0x5b3abc;_0x2f3e63[_0x3f0989][_0x35f064(0x136)]=_0x108333;}),_0x1cffbe[_0x5b3abc(0x114)]((_0x42cc95,_0x5dbe59)=>{var _0x4654ed=_0x5b3abc;_0x2f3e63[_0x5dbe59][_0x4654ed(0x1a4)]=_0x42cc95;}),_0x325073['forEach']((_0x1bc35c,_0x595a60)=>{var _0x3c32e5=_0x5b3abc;_0x2f3e63[_0x595a60][_0x3c32e5(0x17d)]=_0x1bc35c;}),_0x2ff4a2[_0x5b3abc(0x114)]((_0x33e85d,_0x470f7b)=>{_0x2f3e63[_0x470f7b]['batch_code']=_0x33e85d;}),_0xf322e6['forEach']((_0xc3047c,_0x5d130b)=>{_0x2f3e63[_0x5d130b]['expiry_date']=_0xc3047c;}),_0x2a30ee[_0x5b3abc(0x114)]((_0x1b1035,_0x31846f)=>{var _0x2c93d1=_0x5b3abc;_0x2f3e63[_0x31846f][_0x2c93d1(0x10a)]=_0x1b1035;}),_0x1626e6['forEach']((_0x4f0c5a,_0x40c85e)=>{var _0x512308=_0x5b3abc;_0x2f3e63[_0x40c85e][_0x512308(0x12f)]=_0x4f0c5a;}),_0xa34e66[_0x5b3abc(0x114)]((_0xe48d40,_0x1ad73c)=>{var _0x433f8b=_0x5b3abc;_0x2f3e63[_0x1ad73c][_0x433f8b(0x16a)]=_0xe48d40;}),_0x4a41c0['forEach']((_0x314415,_0x5c8b5e)=>{var _0xbea4cb=_0x5b3abc;_0x2f3e63[_0x5c8b5e][_0xbea4cb(0x150)]=_0x314415;}),_0x512f5f[_0x5b3abc(0x114)]((_0x59b258,_0x42c14e)=>{var _0x173d8f=_0x5b3abc;_0x2f3e63[_0x42c14e][_0x173d8f(0x1a3)]=_0x59b258;}),_0x12e814['forEach']((_0x30a3aa,_0x52219e)=>{var _0x2b24c8=_0x5b3abc;_0x2f3e63[_0x52219e][_0x2b24c8(0x1b0)]=_0x30a3aa;}),_0x48a6e5['forEach']((_0x39d470,_0x17e46f)=>{_0x2f3e63[_0x17e46f]['invoice']=_0x39d470;});const _0x2b8e76=_0x2f3e63['filter'](_0x2b38f0=>_0x2b38f0[_0x5b3abc(0x190)]!=='0'&&_0x2b38f0['adjust_qty']!=='');var _0x9713da=0x0;_0x2b8e76[_0x5b3abc(0x114)](_0x2d67a0=>{var _0xc3fac4=_0x5b3abc;console[_0xc3fac4(0xfa)]('foreach\x20newproduct',_0x2d67a0),parseInt(_0x2d67a0[_0xc3fac4(0x190)])<=0x0&&_0x9713da++;});if(_0x9713da!=0x0)return _0x3ea80d['flash']('errors',_0x5b3abc(0x1c4)),_0x3d9193['redirect'](_0x5b3abc(0x10c));const _0x26eeec=new adjustment({'warehouse_name':_0x56654,'date':_0x49389b,'product':_0x2b8e76,'note':_0x142490,'room':_0x327ee5,'invoice':_0x56e2ff,'JO_number':_0x3ba1a6,'expiry_date':_0x18e8bd}),_0x3ff28e=await _0x26eeec[_0x5b3abc(0x106)]();_0x3ea80d['flash']('success',_0x5b3abc(0x193)),_0x3d9193[_0x5b3abc(0x165)]('/adjustment/preview/'+_0x3ff28e[_0x5b3abc(0x116)]);}catch(_0x3df85d){console[_0x5b3abc(0xfa)](_0x3df85d),_0x3d9193['status'](0xc8)['json']({'message':_0x3df85d['message']});}}),router['get']('/preview/:id',auth,async(_0x5ef38a,_0x1a8eab)=>{var _0x1399f4=a0_0x493d6c;try{const {username:_0x5138a3,email:_0x4d2509,role:_0x25e8a3}=_0x5ef38a[_0x1399f4(0x11d)],_0xfe2868=_0x5ef38a['user'],_0x433b62=await profile['findOne']({'email':_0xfe2868[_0x1399f4(0x12e)]}),_0x2d3063=await master_shop['find'](),_0x1cd58f=_0x5ef38a['params']['id'],_0x4e47f6=await adjustment['findById']({'_id':_0x1cd58f}),_0x316cdd=await purchases['aggregate']([{'$match':{'warehouse_name':_0x4e47f6[_0x1399f4(0x175)]}},{'$unwind':_0x1399f4(0x17c)},{'$group':{'_id':_0x1399f4(0x173)}}]),_0x42a45a=await product[_0x1399f4(0x10e)]({}),_0x147536=await warehouse['aggregate']([{'$match':{'name':_0x4e47f6[_0x1399f4(0x175)]}},{'$unwind':_0x1399f4(0x14c)},{'$group':{'_id':_0x1399f4(0x124),'name':{'$first':_0x1399f4(0x16b)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x1399f4(0x14e)},'bin':{'$first':_0x1399f4(0xf3)},'type':{'$first':_0x1399f4(0x1bf)},'floorlevel':{'$first':_0x1399f4(0x16e)},'primary_code':{'$first':_0x1399f4(0x1b8)},'secondary_code':{'$first':_0x1399f4(0x12b)},'product_code':{'$first':_0x1399f4(0x13c)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x1399f4(0x13a)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x1399f4(0x11b)},'batch_code':{'$first':_0x1399f4(0x132)},'room':{'$first':_0x1399f4(0x145)}}}]);if(_0x2d3063[0x0][_0x1399f4(0x139)]==_0x1399f4(0x108)){var _0x34d050=users['English'];console['log'](_0x34d050);}else{if(_0x2d3063[0x0]['language']==_0x1399f4(0x111))var _0x34d050=users['Hindi'];else{if(_0x2d3063[0x0][_0x1399f4(0x139)]==_0x1399f4(0x1bb))var _0x34d050=users[_0x1399f4(0x1bb)];else{if(_0x2d3063[0x0]['language']=='Spanish')var _0x34d050=users[_0x1399f4(0x134)];else{if(_0x2d3063[0x0][_0x1399f4(0x139)]=='French')var _0x34d050=users[_0x1399f4(0x18e)];else{if(_0x2d3063[0x0]['language']==_0x1399f4(0x12c))var _0x34d050=users[_0x1399f4(0x167)];else{if(_0x2d3063[0x0][_0x1399f4(0x139)]==_0x1399f4(0x199))var _0x34d050=users['Chinese'];else{if(_0x2d3063[0x0][_0x1399f4(0x139)]=='Arabic\x20(ae)')var _0x34d050=users[_0x1399f4(0x110)];}}}}}}}_0x1a8eab[_0x1399f4(0x172)](_0x1399f4(0x15d),{'success':_0x5ef38a[_0x1399f4(0x14d)](_0x1399f4(0x10b)),'errors':_0x5ef38a[_0x1399f4(0x14d)](_0x1399f4(0x19d)),'role':_0xfe2868,'profile':_0x433b62,'adjustment':_0x4e47f6,'stock':_0x147536,'master_shop':_0x2d3063,'warehouse_name':_0x316cdd,'unit':_0x42a45a,'language':_0x34d050});}catch(_0xa5233a){console[_0x1399f4(0xfa)](_0xa5233a),_0x1a8eab['status'](0xc8)[_0x1399f4(0x121)]({'message':_0xa5233a[_0x1399f4(0x194)]});}}),router['post'](a0_0x493d6c(0x186),auth,async(_0x422f32,_0x4e7453)=>{var _0x2f8d3c=a0_0x493d6c;try{const _0x580b47=_0x422f32['params']['id'],{warehouse_name:_0x4e31ff,Room_name:_0x43bf66}=_0x422f32['body'],_0xae36d0=await adjustment[_0x2f8d3c(0x13b)]({'_id':_0x580b47}),_0x2c0a80=_0xae36d0[_0x2f8d3c(0x17a)]['map'](async _0x4a33c2=>{var _0x4de805=_0x2f8d3c;if(_0x4a33c2[_0x4de805(0x190)]>0x0){var _0x421f50=await warehouse['findOne']({'name':_0x4e31ff,'room':_0x4a33c2[_0x4de805(0x150)],'warehouse_category':_0x4de805(0x197)});const _0x1b9edb=_0x421f50['product_details'][_0x4de805(0x11f)](_0x3d91a9=>{var _0xb8c965=_0x4de805;console[_0xb8c965(0xfa)](_0x4a33c2[_0xb8c965(0x15f)]+_0xb8c965(0x181));if(_0x4a33c2[_0xb8c965(0x15f)]==_0xb8c965(0x123)){if(_0x3d91a9[_0xb8c965(0x118)]==_0x4a33c2[_0xb8c965(0x118)]&&_0x3d91a9['floorlevel']==_0x4a33c2['floorlevel']&&_0x3d91a9['type']==_0x4a33c2[_0xb8c965(0x184)]&&_0x3d91a9[_0xb8c965(0x129)]==_0x4a33c2[_0xb8c965(0x129)]&&_0x3d91a9[_0xb8c965(0x120)]==_0x4a33c2[_0xb8c965(0x120)]&&_0x3d91a9[_0xb8c965(0x138)]==_0x4a33c2['rack']&&_0x3d91a9[_0xb8c965(0x19f)]==_0x4a33c2[_0xb8c965(0x19f)]&&_0x3d91a9[_0xb8c965(0x155)]==_0x4a33c2[_0xb8c965(0x155)]&&_0x3d91a9[_0xb8c965(0x192)]==_0x4a33c2['batch_code']&&_0x3d91a9[_0xb8c965(0x12f)]==_0x4a33c2[_0xb8c965(0x12f)]&&_0x3d91a9[_0xb8c965(0x188)]==_0x4a33c2[_0xb8c965(0x188)]&&_0x3d91a9[_0xb8c965(0x116)]==_0x4a33c2[_0xb8c965(0x122)]){var _0x3a2381;_0x3a2381=_0x4a33c2[_0xb8c965(0x190)],_0x4a33c2[_0xb8c965(0x16a)]=='S'&&(_0x3a2381=_0x4a33c2[_0xb8c965(0x190)]),_0x3d91a9['product_stock']=_0x3d91a9[_0xb8c965(0x18b)]-_0x3a2381;}}else{if(_0x3d91a9['product_name']==_0x4a33c2[_0xb8c965(0x118)]&&_0x3d91a9['floorlevel']==_0x4a33c2[_0xb8c965(0x1bc)]&&_0x3d91a9[_0xb8c965(0x184)]==_0x4a33c2[_0xb8c965(0x184)]&&_0x3d91a9['bin']==_0x4a33c2[_0xb8c965(0x129)]&&_0x3d91a9['bay']==_0x4a33c2[_0xb8c965(0x120)]&&_0x3d91a9['rack']==_0x4a33c2['rack']&&_0x3d91a9['storage']==_0x4a33c2[_0xb8c965(0x19f)]&&_0x3d91a9['expiry_date']==_0x4a33c2['expiry_date']&&_0x3d91a9[_0xb8c965(0x192)]==_0x4a33c2['batch_code']&&_0x3d91a9[_0xb8c965(0x12f)]==_0x4a33c2[_0xb8c965(0x12f)]&&_0x3d91a9[_0xb8c965(0x188)]==_0x4a33c2[_0xb8c965(0x188)]&&_0x3d91a9[_0xb8c965(0x116)]==_0x4a33c2[_0xb8c965(0x122)]){console[_0xb8c965(0xfa)](_0x4a33c2);var _0x3a2381;_0x3a2381=_0x4a33c2[_0xb8c965(0x190)],_0x4a33c2[_0xb8c965(0x16a)]=='S'&&(_0x3a2381=_0x4a33c2['adjust_qty']),_0x3d91a9['product_stock']=_0x3d91a9[_0xb8c965(0x18b)]+_0x3a2381;}}});}return _0x421f50;});Promise['all'](_0x2c0a80)[_0x2f8d3c(0x1c9)](async _0x1c6202=>{var _0x4acc9e=_0x2f8d3c;try{for(const _0x1f5120 of _0x1c6202){await _0x1f5120[_0x4acc9e(0x106)]();}_0xae36d0[_0x4acc9e(0x104)]=_0x4acc9e(0x185);const _0xe75575=await _0xae36d0[_0x4acc9e(0x106)](),_0x63c1d6=await master_shop[_0x4acc9e(0x10e)](),_0x561733=await email_settings[_0x4acc9e(0xf4)](),_0x3f0b7a=await supervisor_settings[_0x4acc9e(0x10e)]();var _0x493d3b=_0xae36d0[_0x4acc9e(0x17a)],_0x1ebd84='',_0x4672f2;for(_0x4672f2 in _0x493d3b){_0x1ebd84+='<tr>'+_0x4acc9e(0x157)+_0x493d3b[_0x4672f2]['product_name']+_0x4acc9e(0x1b2)+_0x4acc9e(0x157)+_0x493d3b[_0x4672f2][_0x4acc9e(0x17d)]+'</td>'+_0x4acc9e(0x157)+_0x493d3b[_0x4672f2]['adjust_qty']+_0x4acc9e(0x1b2)+_0x4acc9e(0x157)+_0x493d3b[_0x4672f2][_0x4acc9e(0x136)]+_0x4acc9e(0x1b2)+_0x4acc9e(0x157)+_0x493d3b[_0x4672f2][_0x4acc9e(0x1a4)]+'</td>'+_0x4acc9e(0x157)+_0xae36d0[_0x4acc9e(0x175)]+'</td>'+_0x4acc9e(0x157)+_0x493d3b[_0x4672f2][_0x4acc9e(0x150)]+_0x4acc9e(0x1b2)+_0x4acc9e(0x157)+_0x493d3b[_0x4672f2][_0x4acc9e(0x19f)]+_0x493d3b[_0x4672f2][_0x4acc9e(0x138)]+_0x493d3b[_0x4672f2][_0x4acc9e(0x120)]+_0x493d3b[_0x4672f2][_0x4acc9e(0x129)]+_0x493d3b[_0x4672f2]['type'][0x0]+_0x493d3b[_0x4672f2][_0x4acc9e(0x1bc)]+_0x4acc9e(0x1b2),_0x4acc9e(0x10d);}let _0x44eec1=nodemailer['createTransport']({'host':_0x561733[_0x4acc9e(0x1b7)],'port':Number(_0x561733[_0x4acc9e(0x1c0)]),'secure':![],'auth':{'user':_0x561733['email'],'pass':_0x561733[_0x4acc9e(0x12d)]}}),_0x759461={'from':_0x561733['email'],'to':_0x3f0b7a[0x0][_0x4acc9e(0x1a7)],'subject':_0x4acc9e(0x1aa),'attachments':[{'filename':_0x4acc9e(0x1c3),'path':__dirname+_0x4acc9e(0x170)+'/upload/'+_0x63c1d6[0x0][_0x4acc9e(0x137)],'cid':_0x4acc9e(0xf8)}],'html':'<!DOCTYPE\x20html>'+_0x4acc9e(0x11e)+_0x4acc9e(0x177)+'<div>'+_0x4acc9e(0x113)+'<div>'+_0x4acc9e(0x1ad)+_0x4acc9e(0x13e)+'<div>'+'<h2>\x20'+_0x63c1d6[0x0][_0x4acc9e(0x176)]+_0x4acc9e(0x1a0)+'</div>'+_0x4acc9e(0x13e)+_0x4acc9e(0x1c1)+_0x4acc9e(0x158)+'<h5\x20style=\x22text-align:\x20left;\x22>'+_0x4acc9e(0x1af)+_0xae36d0[_0x4acc9e(0x188)]+'\x20'+_0x4acc9e(0x11c)+'\x20Order\x20Date\x20:\x20'+_0xae36d0[_0x4acc9e(0x1c6)]+'\x20'+_0x4acc9e(0xff)+'</h5>'+_0x4acc9e(0x13e)+_0x4acc9e(0x100)+_0x4acc9e(0x144)+_0x4acc9e(0x119)+_0x4acc9e(0x1c7)+_0x4acc9e(0x105)+_0x4acc9e(0x149)+_0x4acc9e(0x166)+_0x4acc9e(0x146)+_0x4acc9e(0x14b)+_0x4acc9e(0x1ab)+_0x4acc9e(0x1b6)+_0x4acc9e(0x10d)+_0x4acc9e(0x18f)+_0x4acc9e(0x109)+'\x20'+_0x1ebd84+'\x20'+_0x4acc9e(0x1c5)+_0x4acc9e(0x103)+_0x4acc9e(0x158)+_0x4acc9e(0x189)+_0x4acc9e(0x1a1)+_0x63c1d6[0x0][_0x4acc9e(0x176)]+_0x4acc9e(0x127)+_0x4acc9e(0x13e)+_0x4acc9e(0x13e)+_0x4acc9e(0x117)};_0x44eec1[_0x4acc9e(0x101)](_0x759461,function(_0x231692,_0x397e65){var _0x36754b=_0x4acc9e;_0x231692?(console[_0x36754b(0xfa)](_0x231692),console[_0x36754b(0xfa)]('Error\x20Occurs')):console[_0x36754b(0xfa)](_0x36754b(0x15a));}),_0x422f32['flash']('success',_0x4acc9e(0x133)),_0x4e7453['redirect'](_0x4acc9e(0x142)+_0xe75575[_0x4acc9e(0x116)]);}catch(_0x24a298){console['error'](_0x24a298),_0x4e7453[_0x4acc9e(0x180)](0x1f4)[_0x4acc9e(0x121)]({'error':_0x4acc9e(0x196)});}})[_0x2f8d3c(0x19a)](_0x5b1d71=>{var _0x42e84d=_0x2f8d3c;console[_0x42e84d(0x1a8)](_0x5b1d71),_0x4e7453[_0x42e84d(0x180)](0x1f4)[_0x42e84d(0x121)]({'error':_0x42e84d(0x115)});});}catch(_0x6240f0){console[_0x2f8d3c(0xfa)](_0x6240f0),_0x4e7453[_0x2f8d3c(0x180)](0xc8)[_0x2f8d3c(0x121)]({'message':_0x6240f0[_0x2f8d3c(0x194)]});}}),router[a0_0x493d6c(0x151)](a0_0x493d6c(0x18a),auth,async(_0x538c9f,_0x243d9d)=>{var _0x5ca0fa=a0_0x493d6c;try{const {username:_0x44342b,email:_0x4cc03a,role:_0x16ab09}=_0x538c9f[_0x5ca0fa(0x11d)],_0x2cd711=_0x538c9f['user'],_0x1565dc=await profile['findOne']({'email':_0x2cd711[_0x5ca0fa(0x12e)]}),_0x1f36a4=await master_shop[_0x5ca0fa(0x10e)](),_0x5d3ee2=_0x538c9f[_0x5ca0fa(0x162)]['id'],_0xecfb04=await adjustment[_0x5ca0fa(0x13b)]({'_id':_0x5d3ee2}),_0x2b4c21=await purchases[_0x5ca0fa(0x19e)]([{'$match':{'warehouse_name':_0xecfb04['warehouse_name']}},{'$unwind':'$product'},{'$group':{'_id':_0x5ca0fa(0x173)}}]),_0x57cf9d=await product[_0x5ca0fa(0x10e)]({}),_0x4f0f84=await warehouse['aggregate']([{'$match':{'name':_0xecfb04[_0x5ca0fa(0x175)]}},{'$unwind':_0x5ca0fa(0x14c)},{'$group':{'_id':_0x5ca0fa(0x124),'name':{'$first':_0x5ca0fa(0x16b)},'product_stock':{'$first':'$product_details.product_stock'},'bay':{'$first':_0x5ca0fa(0x14e)},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x5ca0fa(0x16e)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x5ca0fa(0x13c)},'storage':{'$first':_0x5ca0fa(0x1ae)},'rack':{'$first':_0x5ca0fa(0x13a)},'maxPerUnit':{'$first':_0x5ca0fa(0x141)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':'$product_details.production_date'},'batch_code':{'$first':_0x5ca0fa(0x132)},'room':{'$first':_0x5ca0fa(0x145)}}}]);let _0x46cb25;if(_0x2cd711[_0x5ca0fa(0xf9)]=='staff'){const _0x480078=await staff[_0x5ca0fa(0xf4)]({'email':_0x2cd711[_0x5ca0fa(0x12e)]});_0x46cb25=await warehouse[_0x5ca0fa(0x19e)]([{'$match':{'status':_0x5ca0fa(0x1be),'name':_0x480078[_0x5ca0fa(0xf2)],'warehouse_category':_0x5ca0fa(0x197),'name':{'$ne':_0x5ca0fa(0x1cd)}}},{'$group':{'_id':_0x5ca0fa(0x15b),'name':{'$first':_0x5ca0fa(0x15b)}}}]);}else _0x46cb25=await warehouse[_0x5ca0fa(0x19e)]([{'$match':{'status':_0x5ca0fa(0x1be),'warehouse_category':'Raw\x20Materials','name':{'$ne':_0x5ca0fa(0x1cd)}}},{'$group':{'_id':_0x5ca0fa(0x15b),'name':{'$first':'$name'}}}]);if(_0x1f36a4[0x0][_0x5ca0fa(0x139)]==_0x5ca0fa(0x108)){var _0x3b4730=users[_0x5ca0fa(0x168)];console[_0x5ca0fa(0xfa)](_0x3b4730);}else{if(_0x1f36a4[0x0]['language']=='Hindi')var _0x3b4730=users['Hindi'];else{if(_0x1f36a4[0x0][_0x5ca0fa(0x139)]==_0x5ca0fa(0x1bb))var _0x3b4730=users['German'];else{if(_0x1f36a4[0x0][_0x5ca0fa(0x139)]==_0x5ca0fa(0x134))var _0x3b4730=users[_0x5ca0fa(0x134)];else{if(_0x1f36a4[0x0][_0x5ca0fa(0x139)]=='French')var _0x3b4730=users['French'];else{if(_0x1f36a4[0x0][_0x5ca0fa(0x139)]=='Portuguese\x20(BR)')var _0x3b4730=users[_0x5ca0fa(0x167)];else{if(_0x1f36a4[0x0]['language']=='Chinese')var _0x3b4730=users[_0x5ca0fa(0x199)];else{if(_0x1f36a4[0x0]['language']=='Arabic\x20(ae)')var _0x3b4730=users[_0x5ca0fa(0x110)];}}}}}}}_0x243d9d[_0x5ca0fa(0x172)](_0x5ca0fa(0x13d),{'success':_0x538c9f[_0x5ca0fa(0x14d)](_0x5ca0fa(0x10b)),'errors':_0x538c9f['flash']('errors'),'role':_0x2cd711,'profile':_0x1565dc,'adjustment':_0xecfb04,'stock':_0x4f0f84,'master_shop':_0x1f36a4,'warehouse_name':_0x2b4c21,'unit':_0x57cf9d,'language':_0x3b4730,'warehouse':_0x46cb25});}catch(_0x2f4239){console[_0x5ca0fa(0xfa)](_0x2f4239),_0x243d9d['status'](0xc8)[_0x5ca0fa(0x121)]({'message':_0x2f4239['message']});}}),router[a0_0x493d6c(0x102)]('/view/:id',auth,async(_0x52efd9,_0x136b40)=>{var _0x43e3b8=a0_0x493d6c;try{const _0x31578c=_0x52efd9[_0x43e3b8(0x162)]['id'],_0x1026af=await adjustment['findById']({'_id':_0x31578c}),_0x1de5cf=await warehouse[_0x43e3b8(0xf4)]({'name':_0x1026af[_0x43e3b8(0x175)],'room':_0x1026af[_0x43e3b8(0x140)]}),{warehouse_name:_0x43308f,date:_0x910de3,prod_name:_0x3e9df9,level:_0xb3bed5,isle:_0x40d98c,pallet:_0x1d19eb,stock:_0x26fc4d,types:_0x2c6cfd,adjust_qty:_0x22bb28,new_adjust_qty:_0x36882b,note:_0x2a842d,Room_name:_0x2a8ab8,invoice:_0x51823c,JO_number:_0x6902e4,expiry_date:_0x2cc188}=_0x52efd9[_0x43e3b8(0x14a)];if(typeof _0x3e9df9==_0x43e3b8(0x147))var _0x1bb0f3=[_0x52efd9[_0x43e3b8(0x14a)][_0x43e3b8(0x154)]],_0x2155c4=[_0x52efd9['body'][_0x43e3b8(0xfd)]],_0x3f1d4d=[_0x52efd9[_0x43e3b8(0x14a)][_0x43e3b8(0x16c)]],_0x25b7f9=[_0x52efd9['body'][_0x43e3b8(0x15f)]],_0x44abb5=[_0x52efd9[_0x43e3b8(0x14a)][_0x43e3b8(0x15e)]],_0x402ff4=[_0x52efd9[_0x43e3b8(0x14a)][_0x43e3b8(0x183)]],_0x24d416=[_0x52efd9['body']['Primary_Units']],_0x41dd3e=[_0x52efd9['body'][_0x43e3b8(0x152)]],_0x17a86a=[_0x52efd9[_0x43e3b8(0x14a)][_0x43e3b8(0x195)]],_0x48a064=[_0x52efd9['body'][_0x43e3b8(0x192)]],_0x31d06c=[_0x52efd9[_0x43e3b8(0x14a)][_0x43e3b8(0x155)]],_0x4b2531=[_0x52efd9[_0x43e3b8(0x14a)]['max_per_unit']],_0x376b50=[_0x52efd9[_0x43e3b8(0x14a)]['production_date']],_0x3c54df=[_0x52efd9['body'][_0x43e3b8(0x16a)]],_0x341655=[_0x52efd9['body'][_0x43e3b8(0x153)]],_0x20aa99=[_0x52efd9[_0x43e3b8(0x14a)][_0x43e3b8(0x1cb)]],_0x57a255=[_0x52efd9['body']['second1']];else var _0x1bb0f3=[..._0x52efd9[_0x43e3b8(0x14a)]['prod_name']],_0x2155c4=[..._0x52efd9['body']['level']],_0x3f1d4d=[..._0x52efd9[_0x43e3b8(0x14a)][_0x43e3b8(0x16c)]],_0x25b7f9=[..._0x52efd9['body']['types']],_0x44abb5=[..._0x52efd9[_0x43e3b8(0x14a)]['New_Qty_Converted_adj']],_0x402ff4=[..._0x52efd9[_0x43e3b8(0x14a)][_0x43e3b8(0x183)]],_0x24d416=[..._0x52efd9['body'][_0x43e3b8(0x136)]],_0x41dd3e=[..._0x52efd9[_0x43e3b8(0x14a)]['Secondary_units']],_0x17a86a=[..._0x52efd9['body'][_0x43e3b8(0x195)]],_0x48a064=[..._0x52efd9[_0x43e3b8(0x14a)]['batch_code']],_0x31d06c=[..._0x52efd9['body'][_0x43e3b8(0x155)]],_0x4b2531=[..._0x52efd9[_0x43e3b8(0x14a)][_0x43e3b8(0x174)]],_0x376b50=[..._0x52efd9['body'][_0x43e3b8(0x12f)]],_0x3c54df=[..._0x52efd9[_0x43e3b8(0x14a)]['prod_cat']],_0x341655=[..._0x52efd9['body'][_0x43e3b8(0x153)]],_0x20aa99=[..._0x52efd9['body']['prime1']],_0x57a255=[..._0x52efd9[_0x43e3b8(0x14a)][_0x43e3b8(0xfb)]];const _0x564b39=_0x1bb0f3[_0x43e3b8(0x11f)](_0x387bea=>{return _0x387bea={'product_name':_0x387bea};});_0x2155c4[_0x43e3b8(0x114)]((_0x386d54,_0x495af7)=>{var _0x23e165=_0x43e3b8;_0x341655[_0x23e165(0x114)]((_0x4f0158,_0x1bc94a)=>{var _0x89ec0a=_0x23e165;if(_0x4f0158=='Receiving\x20Area'&&_0x495af7==_0x1bc94a){var _0x360ffb=_0x386d54[_0x89ec0a(0x125)](0x3);_0x564b39[_0x495af7][_0x89ec0a(0x19f)]=_0x386d54[0x0],_0x564b39[_0x495af7][_0x89ec0a(0x138)]=_0x386d54[0x1],_0x564b39[_0x495af7][_0x89ec0a(0x120)]=0x0,_0x564b39[_0x495af7][_0x89ec0a(0x129)]=0x0,_0x564b39[_0x495af7][_0x89ec0a(0x184)]=_0x89ec0a(0x1a9),_0x564b39[_0x495af7][_0x89ec0a(0x1bc)]=_0x360ffb;}else{if(_0x4f0158==_0x89ec0a(0x17e)&&_0x495af7==_0x1bc94a){var _0x360ffb=_0x386d54[_0x89ec0a(0x125)](0x3);_0x564b39[_0x495af7][_0x89ec0a(0x19f)]=_0x386d54[0x0],_0x564b39[_0x495af7][_0x89ec0a(0x138)]=_0x386d54[0x1],_0x564b39[_0x495af7][_0x89ec0a(0x120)]=0x0,_0x564b39[_0x495af7][_0x89ec0a(0x129)]=0x0,_0x564b39[_0x495af7][_0x89ec0a(0x184)]='Floor',_0x564b39[_0x495af7][_0x89ec0a(0x1bc)]=_0x386d54[0x5];}else{if(_0x495af7==_0x1bc94a){var _0xa23106;if(_0x386d54[0x4]=='L')_0xa23106=_0x89ec0a(0xf5);else _0x386d54[0x4]=='F'&&(_0xa23106='Floor');_0x564b39[_0x495af7][_0x89ec0a(0x19f)]=_0x386d54[0x0],_0x564b39[_0x495af7][_0x89ec0a(0x138)]=_0x386d54[0x1],_0x564b39[_0x495af7]['bay']=_0x386d54[0x2],_0x564b39[_0x495af7]['bin']=_0x386d54[0x3],_0x564b39[_0x495af7][_0x89ec0a(0x184)]=_0xa23106,_0x564b39[_0x495af7]['floorlevel']=_0x386d54[0x5];}}}});}),_0x3f1d4d[_0x43e3b8(0x114)]((_0x223adc,_0x399e90)=>{_0x564b39[_0x399e90]['stockBefore']=_0x223adc;}),_0x25b7f9[_0x43e3b8(0x114)]((_0x5af272,_0x4d725d)=>{var _0x2694ba=_0x43e3b8;_0x564b39[_0x4d725d][_0x2694ba(0x15f)]=_0x5af272;}),_0x44abb5['forEach']((_0x4e734f,_0x2193c2)=>{_0x564b39[_0x2193c2]['adjust_qty']=_0x4e734f;}),_0x402ff4[_0x43e3b8(0x114)]((_0x474d87,_0x1f7af6)=>{_0x564b39[_0x1f7af6]['new_adjust_qty']=_0x474d87;}),_0x24d416['forEach']((_0xa09214,_0x27f6c9)=>{var _0x245600=_0x43e3b8;_0x564b39[_0x27f6c9][_0x245600(0x136)]=_0xa09214;}),_0x41dd3e[_0x43e3b8(0x114)]((_0x47b1a7,_0x98b70c)=>{var _0x4ee8e4=_0x43e3b8;_0x564b39[_0x98b70c][_0x4ee8e4(0x1a4)]=_0x47b1a7;}),_0x17a86a[_0x43e3b8(0x114)]((_0x37ed2f,_0x368335)=>{var _0x39c7ce=_0x43e3b8;_0x564b39[_0x368335][_0x39c7ce(0x17d)]=_0x37ed2f;}),_0x48a064[_0x43e3b8(0x114)]((_0x39499a,_0x87b781)=>{_0x564b39[_0x87b781]['batch_code']=_0x39499a;}),_0x31d06c[_0x43e3b8(0x114)]((_0x275fa5,_0x2ee80f)=>{var _0x239270=_0x43e3b8;_0x564b39[_0x2ee80f][_0x239270(0x155)]=_0x275fa5;}),_0x4b2531['forEach']((_0x23bbc9,_0x53330d)=>{var _0x3e745b=_0x43e3b8;_0x564b39[_0x53330d][_0x3e745b(0x10a)]=_0x23bbc9;}),_0x376b50[_0x43e3b8(0x114)]((_0x53e5f5,_0x2bd117)=>{var _0x4a2e95=_0x43e3b8;_0x564b39[_0x2bd117][_0x4a2e95(0x12f)]=_0x53e5f5;}),_0x3c54df[_0x43e3b8(0x114)]((_0x23e4c3,_0x4daf17)=>{var _0x5ab63b=_0x43e3b8;_0x564b39[_0x4daf17][_0x5ab63b(0x16a)]=_0x23e4c3;}),_0x341655[_0x43e3b8(0x114)]((_0x1d7906,_0x49eda8)=>{var _0x3f60c=_0x43e3b8;_0x564b39[_0x49eda8][_0x3f60c(0x150)]=_0x1d7906;}),_0x20aa99[_0x43e3b8(0x114)]((_0x5eacec,_0x435dd0)=>{var _0x4f9d04=_0x43e3b8;_0x564b39[_0x435dd0][_0x4f9d04(0x1a3)]=_0x5eacec;}),_0x57a255['forEach']((_0x479733,_0x13002a)=>{var _0x439bb8=_0x43e3b8;_0x564b39[_0x13002a][_0x439bb8(0x1b0)]=_0x479733;});const _0x262f73=_0x564b39[_0x43e3b8(0x14f)](_0x289590=>_0x289590[_0x43e3b8(0x190)]!=='0'&&_0x289590[_0x43e3b8(0x190)]!=='');var _0x131c4d=0x0;_0x262f73[_0x43e3b8(0x114)](_0x6d19a6=>{var _0x48adb0=_0x43e3b8;console[_0x48adb0(0xfa)](_0x48adb0(0x1c8),_0x6d19a6),parseInt(_0x6d19a6[_0x48adb0(0x190)])<=0x0&&_0x131c4d++;});if(_0x131c4d!=0x0)return _0x52efd9[_0x43e3b8(0x14d)](_0x43e3b8(0x19d),_0x43e3b8(0x1c4)),_0x136b40[_0x43e3b8(0x165)](_0x43e3b8(0x10c));_0x1026af[_0x43e3b8(0x175)]=_0x43308f,_0x1026af[_0x43e3b8(0x1c6)]=_0x910de3,_0x1026af['product']=_0x262f73,_0x1026af[_0x43e3b8(0xf7)]=_0x2a842d,_0x1026af[_0x43e3b8(0x188)]=_0x51823c,_0x1026af[_0x43e3b8(0x1b5)]='False';const _0x84e805=await _0x1026af[_0x43e3b8(0x106)]();_0x52efd9[_0x43e3b8(0x14d)](_0x43e3b8(0x10b),_0x43e3b8(0x169)),_0x136b40[_0x43e3b8(0x165)]('/adjustment/view');}catch(_0x2093f0){console['log'](_0x2093f0);}}),router[a0_0x493d6c(0x102)](a0_0x493d6c(0x18c),async(_0x54f3ed,_0x2b5309)=>{var _0xc8f7b3=a0_0x493d6c;const {primary_code:_0x4d0694,warehouse_data:_0x3e48ae,rooms_data:_0x2d9a24,Roomslist:_0x464425}=_0x54f3ed['body'],_0x1efe3f=_0x464425[_0xc8f7b3(0x107)](','),_0x5419c7=[];async function _0x1b8e2f(_0x319394){var _0x185dc1=_0xc8f7b3;const _0x2244ae=await warehouse['aggregate']([{'$match':{'name':_0x3e48ae,'room':_0x319394}},{'$unwind':_0x185dc1(0x14c)},{'$match':{'product_details.primary_code':_0x4d0694}},{'$group':{'_id':_0x185dc1(0x124),'name':{'$first':_0x185dc1(0x16b)},'product_stock':{'$first':_0x185dc1(0xfe)},'primary_code':{'$first':_0x185dc1(0x1b8)},'secondary_code':{'$first':_0x185dc1(0x12b)},'product_code':{'$first':_0x185dc1(0x13c)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x185dc1(0xf3)},'type':{'$first':_0x185dc1(0x1bf)},'pallet':{'$first':_0x185dc1(0x16e)},'unit':{'$first':_0x185dc1(0x1d0)},'secondary_unit':{'$first':_0x185dc1(0x17b)},'storage':{'$first':_0x185dc1(0x1ae)},'rack':{'$first':_0x185dc1(0x13a)},'expiry_date':{'$first':_0x185dc1(0x19c)},'production_date':{'$first':_0x185dc1(0x11b)},'maxPerUnit':{'$first':_0x185dc1(0x141)},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':_0x185dc1(0x12a)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x185dc1(0x145)},'invoice':{'$first':_0x185dc1(0x148)}}}]),_0x23c321=await warehouse[_0x185dc1(0x19e)]([{'$match':{'name':_0x3e48ae,'room':_0x319394}},{'$unwind':'$product_details'},{'$match':{'product_details.secondary_code':_0x4d0694}},{'$group':{'_id':_0x185dc1(0x124),'name':{'$first':_0x185dc1(0x16b)},'product_stock':{'$first':'$product_details.product_stock'},'primary_code':{'$first':_0x185dc1(0x1b8)},'secondary_code':{'$first':_0x185dc1(0x12b)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x185dc1(0x14e)},'isle':{'$first':_0x185dc1(0xf3)},'type':{'$first':'$product_details.type'},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x185dc1(0x17b)},'storage':{'$first':_0x185dc1(0x1ae)},'rack':{'$first':_0x185dc1(0x13a)},'expiry_date':{'$first':_0x185dc1(0x19c)},'production_date':{'$first':_0x185dc1(0x11b)},'maxPerUnit':{'$first':_0x185dc1(0x141)},'batch_code':{'$first':_0x185dc1(0x132)},'product_cat':{'$first':'$product_details.product_cat'},'computeUsed':{'$first':'S'},'roomNamed':{'$first':_0x185dc1(0x145)}}}]);if(_0x2244ae['length']>0x0)_0x5419c7['push'](_0x2244ae);else _0x23c321[_0x185dc1(0x17f)]>0x0&&_0x5419c7['push'](_0x23c321);}const _0x1d750f=_0x1efe3f[_0xc8f7b3(0x11f)](_0x544de8=>_0x1b8e2f(_0x544de8));await Promise['all'](_0x1d750f),_0x2b5309[_0xc8f7b3(0x121)](_0x5419c7);}),router[a0_0x493d6c(0x102)]('/CheckingWarehouse',async(_0x43729b,_0x5cdb9f)=>{var _0x9002af=a0_0x493d6c;const {primaryCode:_0x30f437,secondaryCode:_0x454567,productCode:_0x4a80bd,level:_0x4b36a7,isle:_0x4bbd4d,pallet:_0x1fbf96,warehouses:_0x5b4936,room:_0x3598b6}=_0x43729b[_0x9002af(0x14a)];try{const _0x412f10=await warehouse[_0x9002af(0x19e)]([{'$match':{'name':_0x5b4936,'room':_0x3598b6}},{'$unwind':_0x9002af(0x14c)},{'$match':{'product_details.level':parseInt(_0x4b36a7),'product_details.isle':_0x4bbd4d,'product_details.pallet':parseInt(_0x1fbf96)}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x9002af(0xfe)},'level':{'$first':_0x9002af(0x1b4)},'isle':{'$first':_0x9002af(0x1b3)},'pallet':{'$first':_0x9002af(0x13f)},'maxProducts':{'$first':_0x9002af(0x112)}}}]);_0x5cdb9f['status'](0xc8)[_0x9002af(0x121)](_0x412f10);}catch(_0x541ac1){_0x5cdb9f['status'](0x194)[_0x9002af(0x121)]({'message':_0x541ac1[_0x9002af(0x194)]});}}),module[a0_0x493d6c(0x163)]=router;