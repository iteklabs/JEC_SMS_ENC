var a0_0x5626c3=a0_0x5c48;function a0_0x57a4(){var _0x42bfb4=['$warehouse_name','product_stock','$product_details.unit','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','<tr>','</div>','$product_details.primary_code','findOne','secondary_unit','510684kxryXo','map','adjustment\x20add\x20successfull','Ambient','$product_details.secondary_unit','user','slice','Router','site_title','post','port','$product_details.storage','note','rack','7302LmSReV','/picking_list/PDF_adjustment_rm/','RMSEmail','Shelves','length','production_date','../public/language/languages.json','adjust_qty','ADJ-','warehouse','An\x20error\x20occurred.','Portuguese','password','second1','\x20</h2>','376jbcpsd','\x20Order\x20Date\x20:\x20','</td>','back','Adjustment\x20Mail','39gOywHc','error','floorlevel','json','$product.room_names','_id','$isAllowEdit','889686sULuel','Portuguese\x20(BR)','/upload/','prime1','Rooms','Primary_Units','$product_details.floorlevel','<table\x20style=\x22width:\x20100%\x20!important;\x22>','express','</tr>','id_transaction_from','/preview/:id','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','log','</span>','expiry_date','../models/all_models','date','<h5\x20style=\x22text-align:\x20left;\x22>','adjustment','Enclosed','secondary_code','save','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','max_per_unit','/../public','French','$product_details.type','<!DOCTYPE\x20html>','$product_details.expiry_date','stockBefore','<h2>\x20','prod_name','Arabic','10676300qpDOCq','Receiving\x20Area','primary_code','$product_details.product_cat','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>','status','language','English','staff','find','finalize','unit','aggregate','then','$product_details.isle','<span\x20style=\x22float:\x20right;\x22>','Return\x20Rooms','stock','$product_details.production_date','$product_details.bay','logo','success','$product_details.product_name','10vaqArC','$product_details.product_code','Enabled','There\x27s\x20a\x20error\x20in\x20this\x20transaction','foreach\x20newproduct','$product_details.pallet','/view/:id','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','role','types','batch_code','<html><head><title></title>','162327rtbouk','$product_details.product_stock','string','bay','invoice','True','push','image','body','Return\x20Goods','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','master','../middleware/auth','12208815bhLPaw','all','$product','Arabic\x20(ae)','$finalize','$product_details','</tbody>','level','forEach','sendMail','</head><body>','render','type','floor','$name','product_code','get','prod_code','product_name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','\x20Order\x20Number\x20:\x20','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','</thead>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','Spanish','warehouse_name','prod_invoice','flash','filter','$product_details.batch_code','/adjustment/view','catch','edit_adjustment','$_id','English\x20(US)','storage','$product_details.bin','params','$product_details.level','New_Qty_Converted_adj','bin','Hindi','$product_details.secondary_code','New_Qty_Converted','add_adjustment','room_names','841712fQhwcQ','new_adjust_qty','/barcode_scanner','redirect','$product_details._id','$product_details.rack','product_details','message','<hr\x20class=\x22my-3\x22>','adjustment\x20Finalized\x20successfully','$product_details.maxPerUnit','Chinese','Secondary_units','/view/add_adjustment','product','112ziSnlk','Floor','<div>','exports','errors','False','$product.product_name','German','prod_cat','$invoice','email','$date','</h5>','$room','4608BDjPGc','minus','findById','maxperunit','Raw\x20Materials'];a0_0x57a4=function(){return _0x42bfb4;};return a0_0x57a4();}(function(_0xa191d8,_0x5a3ec8){var _0x1588ed=a0_0x5c48,_0x12a480=_0xa191d8();while(!![]){try{var _0x1e5fda=-parseInt(_0x1588ed(0x131))/0x1*(-parseInt(_0x1588ed(0x140))/0x2)+parseInt(_0x1588ed(0x145))/0x3*(-parseInt(_0x1588ed(0x123))/0x4)+parseInt(_0x1588ed(0x185))/0x5*(-parseInt(_0x1588ed(0x14c))/0x6)+-parseInt(_0x1588ed(0x107))/0x7*(parseInt(_0x1588ed(0xf8))/0x8)+-parseInt(_0x1588ed(0xc9))/0x9+-parseInt(_0x1588ed(0x16e))/0xa+parseInt(_0x1588ed(0x191))/0xb*(parseInt(_0x1588ed(0x115))/0xc);if(_0x1e5fda===_0x5a3ec8)break;else _0x12a480['push'](_0x12a480['shift']());}catch(_0x3649d0){_0x12a480['push'](_0x12a480['shift']());}}}(a0_0x57a4,0xee2e6));const express=require(a0_0x5626c3(0x154)),app=express(),router=express[a0_0x5626c3(0x12a)](),auth=require(a0_0x5626c3(0xc8)),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0x5626c3(0x15c)),users=require(a0_0x5626c3(0x137)),nodemailer=require('nodemailer');router['get']('/view',auth,async(_0x15999c,_0x27f7ee)=>{var _0x2d3e24=a0_0x5626c3;try{const {username:_0x42fe99,email:_0x1cee00,role:_0x267038}=_0x15999c[_0x2d3e24(0x128)],_0x6f7526=_0x15999c[_0x2d3e24(0x128)],_0xc4aa0b=await profile[_0x2d3e24(0x121)]({'email':_0x6f7526[_0x2d3e24(0x111)]}),_0x204cf4=await master_shop[_0x2d3e24(0x177)]();console[_0x2d3e24(0x159)](_0x2d3e24(0xc7),_0x204cf4);let _0x44f9d0;if(_0x6f7526[_0x2d3e24(0x18d)]==_0x2d3e24(0x176)){const _0x1145b4=await staff[_0x2d3e24(0x121)]({'email':_0x6f7526[_0x2d3e24(0x111)]});_0x44f9d0=await warehouse[_0x2d3e24(0x177)]({'status':_0x2d3e24(0x187),'name':_0x1145b4['warehouse']});}else _0x44f9d0=await warehouse[_0x2d3e24(0x177)]({'status':_0x2d3e24(0x187)});const _0x3a45b1=await product[_0x2d3e24(0x177)]();let _0x285026;if(_0x6f7526[_0x2d3e24(0x18d)]==_0x2d3e24(0x176)){const _0x19c832=await staff[_0x2d3e24(0x121)]({'email':_0x6f7526[_0x2d3e24(0x111)]});_0x285026=await adjustment['find']({'warehouse_name':_0x19c832[_0x2d3e24(0x13a)]});}else _0x285026=await adjustment[_0x2d3e24(0x17a)]([{'$unwind':'$product'},{'$group':{'_id':_0x2d3e24(0xeb),'invoice':{'$first':_0x2d3e24(0x110)},'date':{'$first':_0x2d3e24(0x112)},'warehouse_name':{'$first':_0x2d3e24(0x11a)},'room':{'$addToSet':_0x2d3e24(0x149)},'finalize':{'$first':_0x2d3e24(0xcd)},'isAllowEdit':{'$first':_0x2d3e24(0x14b)}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x204cf4[0x0][_0x2d3e24(0x174)]==_0x2d3e24(0xec)){var _0x29faed=users['English'];console['log'](_0x29faed);}else{if(_0x204cf4[0x0][_0x2d3e24(0x174)]=='Hindi')var _0x29faed=users[_0x2d3e24(0xf3)];else{if(_0x204cf4[0x0][_0x2d3e24(0x174)]==_0x2d3e24(0x10e))var _0x29faed=users[_0x2d3e24(0x10e)];else{if(_0x204cf4[0x0]['language']==_0x2d3e24(0xe2))var _0x29faed=users[_0x2d3e24(0xe2)];else{if(_0x204cf4[0x0][_0x2d3e24(0x174)]=='French')var _0x29faed=users[_0x2d3e24(0x166)];else{if(_0x204cf4[0x0][_0x2d3e24(0x174)]==_0x2d3e24(0x14d))var _0x29faed=users[_0x2d3e24(0x13c)];else{if(_0x204cf4[0x0][_0x2d3e24(0x174)]=='Chinese')var _0x29faed=users[_0x2d3e24(0x103)];else{if(_0x204cf4[0x0][_0x2d3e24(0x174)]==_0x2d3e24(0xcc))var _0x29faed=users[_0x2d3e24(0x16d)];}}}}}}}_0x27f7ee[_0x2d3e24(0xd4)](_0x2d3e24(0x15f),{'success':_0x15999c[_0x2d3e24(0xe5)]('success'),'errors':_0x15999c[_0x2d3e24(0xe5)](_0x2d3e24(0x10b)),'role':_0x6f7526,'profile':_0xc4aa0b,'warehouse':_0x44f9d0,'product':_0x3a45b1,'adjustment':_0x285026,'master_shop':_0x204cf4,'language':_0x29faed});}catch(_0x2000a6){console[_0x2d3e24(0x159)](_0x2000a6);}});function a0_0x5c48(_0x246145,_0x1a8b97){var _0x57a461=a0_0x57a4();return a0_0x5c48=function(_0x5c483b,_0x26f004){_0x5c483b=_0x5c483b-0xc4;var _0x13a818=_0x57a461[_0x5c483b];return _0x13a818;},a0_0x5c48(_0x246145,_0x1a8b97);}async function getRandom8DigitNumber(){var _0x341b19=a0_0x5626c3;const _0x3e935b=0x989680,_0x40fbaf=0x5f5e0ff,_0x4ec5dc=Math[_0x341b19(0xd6)](Math['random']()*(_0x40fbaf-_0x3e935b+0x1))+_0x3e935b;var _0x394079;const _0x350ac5=await adjustment[_0x341b19(0x121)]({'invoice':_0x341b19(0x139)+_0x4ec5dc});return _0x350ac5&&_0x350ac5[_0x341b19(0x135)]>0x0?_0x394079=_0x341b19(0x139)+_0x4ec5dc:_0x394079=_0x341b19(0x139)+_0x4ec5dc,_0x394079;}router[a0_0x5626c3(0xd9)](a0_0x5626c3(0x105),auth,async(_0x1c35f3,_0xb50eaa)=>{var _0xf84530=a0_0x5626c3;try{const {username:_0x4cff76,email:_0x4722c4,role:_0x576779}=_0x1c35f3[_0xf84530(0x128)],_0x1a4e5e=_0x1c35f3[_0xf84530(0x128)],_0x4c88bb=await profile['findOne']({'email':_0x1a4e5e['email']}),_0x1d08b0=await master_shop[_0xf84530(0x177)]();let _0x2d340e;if(_0x1a4e5e['role']==_0xf84530(0x176)){const _0x4030b2=await staff[_0xf84530(0x121)]({'email':_0x1a4e5e[_0xf84530(0x111)]});_0x2d340e=await warehouse[_0xf84530(0x17a)]([{'$match':{'status':_0xf84530(0x187),'name':_0x4030b2[_0xf84530(0x13a)],'warehouse_category':_0xf84530(0x119),'name':{'$ne':_0xf84530(0xc5)}}},{'$group':{'_id':_0xf84530(0xd7),'name':{'$first':_0xf84530(0xd7)}}}]);}else _0x2d340e=await warehouse[_0xf84530(0x17a)]([{'$match':{'status':_0xf84530(0x187),'warehouse_category':_0xf84530(0x119),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0xf84530(0xd7),'name':{'$first':_0xf84530(0xd7)}}}]);const _0x174d0a=await product[_0xf84530(0x177)]({}),_0xc2f29d=await adjustment['find']({}),_0x339ef6=_0xc2f29d[_0xf84530(0x135)]+0x1,_0x5863c3='ADJ-'+_0x339ef6['toString']()['padStart'](0x5,'0');var _0x5f4b4c=[_0xf84530(0x126),_0xf84530(0x160),_0xf84530(0x17e)];if(_0x1d08b0[0x0]['language']==_0xf84530(0xec))var _0x409421=users['English'];else{if(_0x1d08b0[0x0]['language']==_0xf84530(0xf3))var _0x409421=users[_0xf84530(0xf3)];else{if(_0x1d08b0[0x0][_0xf84530(0x174)]=='German')var _0x409421=users[_0xf84530(0x10e)];else{if(_0x1d08b0[0x0][_0xf84530(0x174)]=='Spanish')var _0x409421=users['Spanish'];else{if(_0x1d08b0[0x0]['language']=='French')var _0x409421=users[_0xf84530(0x166)];else{if(_0x1d08b0[0x0][_0xf84530(0x174)]==_0xf84530(0x14d))var _0x409421=users[_0xf84530(0x13c)];else{if(_0x1d08b0[0x0]['language']==_0xf84530(0x103))var _0x409421=users[_0xf84530(0x103)];else{if(_0x1d08b0[0x0][_0xf84530(0x174)]==_0xf84530(0xcc))var _0x409421=users[_0xf84530(0x16d)];}}}}}}}const _0x4a5478=getRandom8DigitNumber();_0x4a5478[_0xf84530(0x17b)](_0x191260=>{var _0x1e1a1c=_0xf84530;_0xb50eaa[_0x1e1a1c(0xd4)](_0x1e1a1c(0xf6),{'success':_0x1c35f3['flash'](_0x1e1a1c(0x183)),'errors':_0x1c35f3[_0x1e1a1c(0xe5)](_0x1e1a1c(0x10b)),'role':_0x1a4e5e,'profile':_0x4c88bb,'warehouse':_0x2d340e,'product':_0x174d0a,'master_shop':_0x1d08b0,'language':_0x409421,'rooms_data':_0x5f4b4c,'invoice_no':_0x191260});})[_0xf84530(0xe9)](_0x5ecb2f=>{var _0x378e99=_0xf84530;_0x1c35f3[_0x378e99(0xe5)](_0x378e99(0x10b),_0x378e99(0x188)),_0xb50eaa[_0x378e99(0xfb)](_0x378e99(0xe8));});}catch(_0x1afd5d){console[_0xf84530(0x159)](_0x1afd5d);}}),router[a0_0x5626c3(0x12c)](a0_0x5626c3(0x105),auth,async(_0x5ce21e,_0x4e8859)=>{var _0x472517=a0_0x5626c3;try{const {warehouse_name:_0x3ffede,date:_0xaf9e98,prod_name:_0x258126,level:_0x1a56fd,isle:_0x48a6a3,pallet:_0x3001c7,stock:_0x29fa83,types:_0x2f4364,adjust_qty:_0x1e63b9,new_adjust_qty:_0x5a793b,note:_0x10b9bf,Room_name:_0x1b6d6a,invoice:_0x2f4da5,JO_number:_0xb87174,expiry_date:_0x2688d5}=_0x5ce21e[_0x472517(0xc4)];if(typeof _0x258126=='string')var _0x537923=[_0x5ce21e['body'][_0x472517(0x16c)]],_0x5d74a5=[_0x5ce21e['body'][_0x472517(0xd0)]],_0x233316=[_0x5ce21e['body'][_0x472517(0x17f)]],_0x239749=[_0x5ce21e[_0x472517(0xc4)][_0x472517(0x18e)]],_0x30c7dc=[_0x5ce21e[_0x472517(0xc4)][_0x472517(0xf1)]],_0x79b01f=[_0x5ce21e[_0x472517(0xc4)][_0x472517(0xf5)]],_0x2eeecc=[_0x5ce21e[_0x472517(0xc4)][_0x472517(0x151)]],_0x5790bf=[_0x5ce21e[_0x472517(0xc4)][_0x472517(0x104)]],_0x10636f=[_0x5ce21e['body'][_0x472517(0xda)]],_0x5ee905=[_0x5ce21e['body'][_0x472517(0x18f)]],_0x50fff1=[_0x5ce21e['body'][_0x472517(0x15b)]],_0x25ced2=[_0x5ce21e[_0x472517(0xc4)][_0x472517(0x164)]],_0x1f5022=[_0x5ce21e['body'][_0x472517(0x136)]],_0x4fa414=[_0x5ce21e[_0x472517(0xc4)][_0x472517(0x10f)]],_0x21497b=[_0x5ce21e[_0x472517(0xc4)][_0x472517(0x150)]],_0x400bdd=[_0x5ce21e[_0x472517(0xc4)]['prime1']],_0x14be87=[_0x5ce21e['body'][_0x472517(0x13e)]],_0x53d9b1=[_0x5ce21e['body']['prod_invoice']],_0x5755e0=[_0x5ce21e[_0x472517(0xc4)]['id_transaction']];else var _0x537923=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0x16c)]],_0x5d74a5=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0xd0)]],_0x233316=[..._0x5ce21e['body'][_0x472517(0x17f)]],_0x239749=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0x18e)]],_0x30c7dc=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0xf1)]],_0x79b01f=[..._0x5ce21e[_0x472517(0xc4)]['New_Qty_Converted']],_0x2eeecc=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0x179)]],_0x5790bf=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0x104)]],_0x10636f=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0xda)]],_0x5ee905=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0x18f)]],_0x50fff1=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0x15b)]],_0x25ced2=[..._0x5ce21e['body']['max_per_unit']],_0x1f5022=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0x136)]],_0x4fa414=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0x10f)]],_0x21497b=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0x150)]],_0x400bdd=[..._0x5ce21e['body']['prime1']],_0x14be87=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0x13e)]],_0x53d9b1=[..._0x5ce21e[_0x472517(0xc4)][_0x472517(0xe4)]],_0x5755e0=[..._0x5ce21e[_0x472517(0xc4)]['id_transaction']];const _0x569ab8=_0x537923['map'](_0x2f79a3=>{return _0x2f79a3={'product_name':_0x2f79a3};});_0x5d74a5[_0x472517(0xd1)]((_0x57dd22,_0x159474)=>{var _0x3d2414=_0x472517;_0x21497b[_0x3d2414(0xd1)]((_0x46c047,_0x282589)=>{var _0x20e553=_0x3d2414;if(_0x46c047=='Receiving\x20Area'&&_0x159474==_0x282589){var _0xfc6aac=_0x57dd22[_0x20e553(0x129)](0x3);_0x569ab8[_0x159474][_0x20e553(0xed)]=_0x57dd22[0x0],_0x569ab8[_0x159474]['rack']=_0x57dd22[0x1],_0x569ab8[_0x159474]['bay']=0x0,_0x569ab8[_0x159474][_0x20e553(0xf2)]=0x0,_0x569ab8[_0x159474][_0x20e553(0xd5)]='Floor',_0x569ab8[_0x159474]['floorlevel']=_0xfc6aac;}else{if(_0x46c047==_0x20e553(0x134)&&_0x159474==_0x282589){var _0xfc6aac=_0x57dd22['slice'](0x3);_0x569ab8[_0x159474]['storage']=_0x57dd22[0x0],_0x569ab8[_0x159474][_0x20e553(0x130)]=_0x57dd22[0x1],_0x569ab8[_0x159474][_0x20e553(0x194)]=0x0,_0x569ab8[_0x159474]['bin']=0x0,_0x569ab8[_0x159474][_0x20e553(0xd5)]=_0x20e553(0x108),_0x569ab8[_0x159474][_0x20e553(0x147)]=_0x57dd22[0x5];}else{if(_0x159474==_0x282589){var _0x2a7234;if(_0x57dd22[0x4]=='L')_0x2a7234='Level';else _0x57dd22[0x4]=='F'&&(_0x2a7234=_0x20e553(0x108));_0x569ab8[_0x159474]['storage']=_0x57dd22[0x0],_0x569ab8[_0x159474][_0x20e553(0x130)]=_0x57dd22[0x1],_0x569ab8[_0x159474]['bay']=_0x57dd22[0x2],_0x569ab8[_0x159474][_0x20e553(0xf2)]=_0x57dd22[0x3],_0x569ab8[_0x159474][_0x20e553(0xd5)]=_0x2a7234,_0x569ab8[_0x159474][_0x20e553(0x147)]=_0x57dd22[0x5];}}}});}),_0x233316[_0x472517(0xd1)]((_0x2c1008,_0x575b55)=>{var _0x45a6a6=_0x472517;_0x569ab8[_0x575b55][_0x45a6a6(0x16a)]=_0x2c1008;}),_0x5755e0[_0x472517(0xd1)]((_0x44911a,_0x4d95f0)=>{var _0x14e470=_0x472517;_0x569ab8[_0x4d95f0][_0x14e470(0x156)]=_0x44911a;}),_0x239749['forEach']((_0x1f28e2,_0x1f5cfe)=>{var _0x4e438b=_0x472517;_0x569ab8[_0x1f5cfe][_0x4e438b(0x18e)]=_0x1f28e2;}),_0x30c7dc['forEach']((_0x216615,_0x3836c6)=>{var _0xde2875=_0x472517;_0x569ab8[_0x3836c6][_0xde2875(0x138)]=_0x216615;}),_0x79b01f[_0x472517(0xd1)]((_0x3c0524,_0x165cc5)=>{var _0x3ae129=_0x472517;_0x569ab8[_0x165cc5][_0x3ae129(0xf9)]=_0x3c0524;}),_0x2eeecc['forEach']((_0x4abc3c,_0x48a1dd)=>{var _0x3b200e=_0x472517;_0x569ab8[_0x48a1dd][_0x3b200e(0x179)]=_0x4abc3c;}),_0x5790bf['forEach']((_0x2b7dd2,_0x4790b3)=>{var _0x443a48=_0x472517;_0x569ab8[_0x4790b3][_0x443a48(0x122)]=_0x2b7dd2;}),_0x10636f['forEach']((_0x3f9a20,_0xc8ad02)=>{var _0x4fbc24=_0x472517;_0x569ab8[_0xc8ad02][_0x4fbc24(0xd8)]=_0x3f9a20;}),_0x5ee905[_0x472517(0xd1)]((_0x4c9287,_0x4f4b1a)=>{var _0x8e4e4e=_0x472517;_0x569ab8[_0x4f4b1a][_0x8e4e4e(0x18f)]=_0x4c9287;}),_0x50fff1[_0x472517(0xd1)]((_0xaba20a,_0x121288)=>{_0x569ab8[_0x121288]['expiry_date']=_0xaba20a;}),_0x25ced2['forEach']((_0x40abc0,_0x555031)=>{var _0x3829b4=_0x472517;_0x569ab8[_0x555031][_0x3829b4(0x118)]=_0x40abc0;}),_0x1f5022[_0x472517(0xd1)]((_0x4a3329,_0x3875af)=>{var _0x810064=_0x472517;_0x569ab8[_0x3875af][_0x810064(0x136)]=_0x4a3329;}),_0x4fa414[_0x472517(0xd1)]((_0x53110d,_0x43644b)=>{var _0x229b48=_0x472517;_0x569ab8[_0x43644b][_0x229b48(0x10f)]=_0x53110d;}),_0x21497b['forEach']((_0x847517,_0x5d1518)=>{var _0x568d1c=_0x472517;_0x569ab8[_0x5d1518][_0x568d1c(0xf7)]=_0x847517;}),_0x400bdd[_0x472517(0xd1)]((_0xcfab09,_0x2a8fb2)=>{var _0x49bbd0=_0x472517;_0x569ab8[_0x2a8fb2][_0x49bbd0(0x170)]=_0xcfab09;}),_0x14be87[_0x472517(0xd1)]((_0x353398,_0x33fe9d)=>{var _0x135ab0=_0x472517;_0x569ab8[_0x33fe9d][_0x135ab0(0x161)]=_0x353398;}),_0x53d9b1[_0x472517(0xd1)]((_0x292fd1,_0x2a6071)=>{var _0x238ac3=_0x472517;_0x569ab8[_0x2a6071][_0x238ac3(0x195)]=_0x292fd1;});const _0x28342c=_0x569ab8[_0x472517(0xe6)](_0x1be7f6=>_0x1be7f6['adjust_qty']!=='0'&&_0x1be7f6[_0x472517(0x138)]!=='');var _0x1a0b05=0x0;_0x28342c[_0x472517(0xd1)](_0x9575bd=>{var _0x7e2d5e=_0x472517;console[_0x7e2d5e(0x159)](_0x7e2d5e(0x189),_0x9575bd),parseInt(_0x9575bd['adjust_qty'])<=0x0&&_0x1a0b05++;});if(_0x1a0b05!=0x0)return _0x5ce21e[_0x472517(0xe5)](_0x472517(0x10b),'You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200'),_0x4e8859[_0x472517(0xfb)](_0x472517(0x143));const _0x1081db=new adjustment({'warehouse_name':_0x3ffede,'date':_0xaf9e98,'product':_0x28342c,'note':_0x10b9bf,'room':_0x1b6d6a,'invoice':_0x2f4da5,'JO_number':_0xb87174,'expiry_date':_0x2688d5}),_0x278ac5=await _0x1081db['save']();_0x5ce21e[_0x472517(0xe5)](_0x472517(0x183),_0x472517(0x125)),_0x4e8859[_0x472517(0xfb)]('/adjustment/preview/'+_0x278ac5[_0x472517(0x14a)]);}catch(_0x3bcc15){console['log'](_0x3bcc15),_0x4e8859[_0x472517(0x173)](0xc8)[_0x472517(0x148)]({'message':_0x3bcc15[_0x472517(0xff)]});}}),router['get']('/preview/:id',auth,async(_0x2d4068,_0x173d76)=>{var _0x12c1b0=a0_0x5626c3;try{const {username:_0x163cde,email:_0x3dbf92,role:_0x43a017}=_0x2d4068[_0x12c1b0(0x128)],_0x5ac469=_0x2d4068['user'],_0x53eb64=await profile['findOne']({'email':_0x5ac469[_0x12c1b0(0x111)]}),_0x53e83a=await master_shop[_0x12c1b0(0x177)](),_0x54f02a=_0x2d4068[_0x12c1b0(0xef)]['id'],_0xccdaa4=await adjustment[_0x12c1b0(0x117)]({'_id':_0x54f02a}),_0x37d3ee=await purchases['aggregate']([{'$match':{'warehouse_name':_0xccdaa4[_0x12c1b0(0xe3)]}},{'$unwind':_0x12c1b0(0xcb)},{'$group':{'_id':_0x12c1b0(0x10d)}}]),_0x17c7ff=await product[_0x12c1b0(0x177)]({}),_0xfc3d8e=await warehouse[_0x12c1b0(0x17a)]([{'$match':{'name':_0xccdaa4[_0x12c1b0(0xe3)]}},{'$unwind':_0x12c1b0(0xce)},{'$group':{'_id':_0x12c1b0(0xfc),'name':{'$first':_0x12c1b0(0x184)},'product_stock':{'$first':_0x12c1b0(0x192)},'bay':{'$first':_0x12c1b0(0x181)},'bin':{'$first':_0x12c1b0(0xee)},'type':{'$first':_0x12c1b0(0x167)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':_0x12c1b0(0x120)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x12c1b0(0x12e)},'rack':{'$first':_0x12c1b0(0xfd)},'maxPerUnit':{'$first':_0x12c1b0(0x102)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x12c1b0(0x180)},'batch_code':{'$first':_0x12c1b0(0xe7)},'room':{'$first':_0x12c1b0(0x114)}}}]);if(_0x53e83a[0x0][_0x12c1b0(0x174)]=='English\x20(US)'){var _0x26e1a8=users[_0x12c1b0(0x175)];console['log'](_0x26e1a8);}else{if(_0x53e83a[0x0]['language']==_0x12c1b0(0xf3))var _0x26e1a8=users[_0x12c1b0(0xf3)];else{if(_0x53e83a[0x0][_0x12c1b0(0x174)]==_0x12c1b0(0x10e))var _0x26e1a8=users['German'];else{if(_0x53e83a[0x0][_0x12c1b0(0x174)]=='Spanish')var _0x26e1a8=users[_0x12c1b0(0xe2)];else{if(_0x53e83a[0x0][_0x12c1b0(0x174)]==_0x12c1b0(0x166))var _0x26e1a8=users[_0x12c1b0(0x166)];else{if(_0x53e83a[0x0]['language']=='Portuguese\x20(BR)')var _0x26e1a8=users['Portuguese'];else{if(_0x53e83a[0x0][_0x12c1b0(0x174)]==_0x12c1b0(0x103))var _0x26e1a8=users[_0x12c1b0(0x103)];else{if(_0x53e83a[0x0]['language']==_0x12c1b0(0xcc))var _0x26e1a8=users[_0x12c1b0(0x16d)];}}}}}}}_0x173d76['render']('edit_adjustment_view',{'success':_0x2d4068[_0x12c1b0(0xe5)](_0x12c1b0(0x183)),'errors':_0x2d4068[_0x12c1b0(0xe5)](_0x12c1b0(0x10b)),'role':_0x5ac469,'profile':_0x53eb64,'adjustment':_0xccdaa4,'stock':_0xfc3d8e,'master_shop':_0x53e83a,'warehouse_name':_0x37d3ee,'unit':_0x17c7ff,'language':_0x26e1a8});}catch(_0x55e228){console[_0x12c1b0(0x159)](_0x55e228),_0x173d76[_0x12c1b0(0x173)](0xc8)[_0x12c1b0(0x148)]({'message':_0x55e228[_0x12c1b0(0xff)]});}}),router[a0_0x5626c3(0x12c)](a0_0x5626c3(0x157),auth,async(_0x53eab2,_0x5a1338)=>{var _0x23f80e=a0_0x5626c3;try{const _0x448d43=_0x53eab2['params']['id'],{warehouse_name:_0xfbd559,Room_name:_0x2b798b}=_0x53eab2[_0x23f80e(0xc4)],_0x3b1c64=await adjustment['findById']({'_id':_0x448d43}),_0x28a87d=_0x3b1c64['product']['map'](async _0x461778=>{var _0x565279=_0x23f80e;if(_0x461778[_0x565279(0x138)]>0x0){var _0x574cb8=await warehouse[_0x565279(0x121)]({'name':_0xfbd559,'room':_0x461778[_0x565279(0xf7)],'warehouse_category':'Raw\x20Materials'});const _0x436dff=_0x574cb8[_0x565279(0xfe)][_0x565279(0x124)](_0x210234=>{var _0x4896ea=_0x565279;console[_0x4896ea(0x159)](_0x461778['types']+'\x20<>\x20');if(_0x461778['types']==_0x4896ea(0x116)){if(_0x210234[_0x4896ea(0xdb)]==_0x461778['product_name']&&_0x210234[_0x4896ea(0x147)]==_0x461778[_0x4896ea(0x147)]&&_0x210234[_0x4896ea(0xd5)]==_0x461778[_0x4896ea(0xd5)]&&_0x210234[_0x4896ea(0xf2)]==_0x461778['bin']&&_0x210234[_0x4896ea(0x194)]==_0x461778[_0x4896ea(0x194)]&&_0x210234[_0x4896ea(0x130)]==_0x461778[_0x4896ea(0x130)]&&_0x210234['storage']==_0x461778[_0x4896ea(0xed)]&&_0x210234[_0x4896ea(0x15b)]==_0x461778[_0x4896ea(0x15b)]&&_0x210234[_0x4896ea(0x18f)]==_0x461778[_0x4896ea(0x18f)]&&_0x210234[_0x4896ea(0x136)]==_0x461778[_0x4896ea(0x136)]&&_0x210234[_0x4896ea(0x195)]==_0x461778[_0x4896ea(0x195)]&&_0x210234[_0x4896ea(0x14a)]==_0x461778[_0x4896ea(0x156)]){var _0x36f57a;_0x36f57a=_0x461778[_0x4896ea(0x138)],_0x461778[_0x4896ea(0x10f)]=='S'&&(_0x36f57a=_0x461778['adjust_qty']),_0x210234[_0x4896ea(0x11b)]=_0x210234[_0x4896ea(0x11b)]-_0x36f57a;}}else{if(_0x210234[_0x4896ea(0xdb)]==_0x461778[_0x4896ea(0xdb)]&&_0x210234[_0x4896ea(0x147)]==_0x461778[_0x4896ea(0x147)]&&_0x210234[_0x4896ea(0xd5)]==_0x461778['type']&&_0x210234[_0x4896ea(0xf2)]==_0x461778[_0x4896ea(0xf2)]&&_0x210234[_0x4896ea(0x194)]==_0x461778['bay']&&_0x210234[_0x4896ea(0x130)]==_0x461778[_0x4896ea(0x130)]&&_0x210234[_0x4896ea(0xed)]==_0x461778[_0x4896ea(0xed)]&&_0x210234[_0x4896ea(0x15b)]==_0x461778[_0x4896ea(0x15b)]&&_0x210234[_0x4896ea(0x18f)]==_0x461778['batch_code']&&_0x210234[_0x4896ea(0x136)]==_0x461778['production_date']&&_0x210234[_0x4896ea(0x195)]==_0x461778[_0x4896ea(0x195)]&&_0x210234['_id']==_0x461778['id_transaction_from']){console[_0x4896ea(0x159)](_0x461778);var _0x36f57a;_0x36f57a=_0x461778[_0x4896ea(0x138)],_0x461778[_0x4896ea(0x10f)]=='S'&&(_0x36f57a=_0x461778[_0x4896ea(0x138)]),_0x210234[_0x4896ea(0x11b)]=_0x210234[_0x4896ea(0x11b)]+_0x36f57a;}}});}return _0x574cb8;});Promise[_0x23f80e(0xca)](_0x28a87d)[_0x23f80e(0x17b)](async _0x537fd4=>{var _0x2229a7=_0x23f80e;try{for(const _0x1a5348 of _0x537fd4){await _0x1a5348[_0x2229a7(0x162)]();}_0x3b1c64[_0x2229a7(0x178)]=_0x2229a7(0x196);const _0x23c95f=await _0x3b1c64[_0x2229a7(0x162)](),_0x4494af=await master_shop['find'](),_0x53ade6=await email_settings[_0x2229a7(0x121)](),_0x3a70a3=await supervisor_settings['find']();var _0x36f9d3=_0x3b1c64[_0x2229a7(0x106)],_0x1db276='',_0x27473a;for(_0x27473a in _0x36f9d3){_0x1db276+=_0x2229a7(0x11e)+_0x2229a7(0xdf)+_0x36f9d3[_0x27473a]['product_name']+_0x2229a7(0x142)+_0x2229a7(0xdf)+_0x36f9d3[_0x27473a][_0x2229a7(0xd8)]+_0x2229a7(0x142)+_0x2229a7(0xdf)+_0x36f9d3[_0x27473a][_0x2229a7(0x138)]+_0x2229a7(0x142)+_0x2229a7(0xdf)+_0x36f9d3[_0x27473a]['unit']+_0x2229a7(0x142)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x36f9d3[_0x27473a][_0x2229a7(0x122)]+'</td>'+_0x2229a7(0xdf)+_0x3b1c64[_0x2229a7(0xe3)]+_0x2229a7(0x142)+_0x2229a7(0xdf)+_0x36f9d3[_0x27473a][_0x2229a7(0xf7)]+'</td>'+_0x2229a7(0xdf)+_0x36f9d3[_0x27473a][_0x2229a7(0xed)]+_0x36f9d3[_0x27473a][_0x2229a7(0x130)]+_0x36f9d3[_0x27473a]['bay']+_0x36f9d3[_0x27473a][_0x2229a7(0xf2)]+_0x36f9d3[_0x27473a]['type'][0x0]+_0x36f9d3[_0x27473a][_0x2229a7(0x147)]+_0x2229a7(0x142),_0x2229a7(0x155);}let _0x192f6f=nodemailer['createTransport']({'host':_0x53ade6['host'],'port':Number(_0x53ade6[_0x2229a7(0x12d)]),'secure':![],'auth':{'user':_0x53ade6[_0x2229a7(0x111)],'pass':_0x53ade6[_0x2229a7(0x13d)]}}),_0x4082d8={'from':_0x53ade6[_0x2229a7(0x111)],'to':_0x3a70a3[0x0][_0x2229a7(0x133)],'subject':_0x2229a7(0x144),'attachments':[{'filename':'Logo.png','path':__dirname+_0x2229a7(0x165)+_0x2229a7(0x14e)+_0x4494af[0x0][_0x2229a7(0x198)],'cid':_0x2229a7(0x182)}],'html':_0x2229a7(0x168)+_0x2229a7(0x190)+_0x2229a7(0xd3)+_0x2229a7(0x109)+_0x2229a7(0x163)+'<div>'+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x2229a7(0x11f)+'<div>'+_0x2229a7(0x16b)+_0x4494af[0x0][_0x2229a7(0x12b)]+_0x2229a7(0x13f)+'</div>'+_0x2229a7(0x11f)+_0x2229a7(0x100)+_0x2229a7(0x109)+_0x2229a7(0x15e)+_0x2229a7(0xde)+_0x3b1c64[_0x2229a7(0x195)]+'\x20'+_0x2229a7(0x17d)+_0x2229a7(0x141)+_0x3b1c64[_0x2229a7(0x15d)]+'\x20'+_0x2229a7(0x15a)+_0x2229a7(0x113)+_0x2229a7(0x11f)+_0x2229a7(0x153)+_0x2229a7(0x158)+_0x2229a7(0x11e)+_0x2229a7(0xc6)+_0x2229a7(0x11d)+_0x2229a7(0xdd)+_0x2229a7(0xe1)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>'+_0x2229a7(0xdc)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>'+_0x2229a7(0x172)+_0x2229a7(0x155)+_0x2229a7(0xe0)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x1db276+'\x20'+_0x2229a7(0xcf)+'</table>'+'<div>'+'<strong>\x20Regards\x20</strong>'+'<h5>'+_0x4494af[0x0][_0x2229a7(0x12b)]+_0x2229a7(0x113)+_0x2229a7(0x11f)+_0x2229a7(0x11f)+'</body></html>'};_0x192f6f[_0x2229a7(0xd2)](_0x4082d8,function(_0x4b20a2,_0xd0f533){var _0x35e5f2=_0x2229a7;_0x4b20a2?(console[_0x35e5f2(0x159)](_0x4b20a2),console[_0x35e5f2(0x159)]('Error\x20Occurs')):console[_0x35e5f2(0x159)]('Email\x20sent\x20successfully');}),_0x53eab2[_0x2229a7(0xe5)](_0x2229a7(0x183),_0x2229a7(0x101)),_0x5a1338['redirect'](_0x2229a7(0x132)+_0x23c95f[_0x2229a7(0x14a)]);}catch(_0x463606){console[_0x2229a7(0x146)](_0x463606),_0x5a1338[_0x2229a7(0x173)](0x1f4)[_0x2229a7(0x148)]({'error':'An\x20error\x20occurred\x20while\x20saving\x20data.'});}})[_0x23f80e(0xe9)](_0x325f49=>{var _0x2fa460=_0x23f80e;console[_0x2fa460(0x146)](_0x325f49),_0x5a1338['status'](0x1f4)['json']({'error':_0x2fa460(0x13b)});});}catch(_0x17ffe9){console['log'](_0x17ffe9),_0x5a1338[_0x23f80e(0x173)](0xc8)[_0x23f80e(0x148)]({'message':_0x17ffe9[_0x23f80e(0xff)]});}}),router['get'](a0_0x5626c3(0x18b),auth,async(_0x183546,_0x3a6ada)=>{var _0x221d7b=a0_0x5626c3;try{const {username:_0x2fc784,email:_0x11832b,role:_0x243af7}=_0x183546[_0x221d7b(0x128)],_0x2a8952=_0x183546[_0x221d7b(0x128)],_0x2c6ae1=await profile[_0x221d7b(0x121)]({'email':_0x2a8952[_0x221d7b(0x111)]}),_0x2ab0e2=await master_shop[_0x221d7b(0x177)](),_0x2fc812=_0x183546[_0x221d7b(0xef)]['id'],_0x417b7b=await adjustment['findById']({'_id':_0x2fc812}),_0x29f050=await purchases[_0x221d7b(0x17a)]([{'$match':{'warehouse_name':_0x417b7b[_0x221d7b(0xe3)]}},{'$unwind':_0x221d7b(0xcb)},{'$group':{'_id':'$product.product_name'}}]),_0x14393d=await product[_0x221d7b(0x177)]({}),_0x5d02f6=await warehouse['aggregate']([{'$match':{'name':_0x417b7b['warehouse_name']}},{'$unwind':_0x221d7b(0xce)},{'$group':{'_id':_0x221d7b(0xfc),'name':{'$first':_0x221d7b(0x184)},'product_stock':{'$first':_0x221d7b(0x192)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x221d7b(0xee)},'type':{'$first':_0x221d7b(0x167)},'floorlevel':{'$first':_0x221d7b(0x152)},'primary_code':{'$first':_0x221d7b(0x120)},'secondary_code':{'$first':_0x221d7b(0xf4)},'product_code':{'$first':_0x221d7b(0x186)},'storage':{'$first':_0x221d7b(0x12e)},'rack':{'$first':_0x221d7b(0xfd)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'expiry_date':{'$first':_0x221d7b(0x169)},'production_date':{'$first':_0x221d7b(0x180)},'batch_code':{'$first':_0x221d7b(0xe7)},'room':{'$first':_0x221d7b(0x114)}}}]);let _0x22ba1e;if(_0x2a8952[_0x221d7b(0x18d)]==_0x221d7b(0x176)){const _0x2920de=await staff[_0x221d7b(0x121)]({'email':_0x2a8952['email']});_0x22ba1e=await warehouse['aggregate']([{'$match':{'status':_0x221d7b(0x187),'name':_0x2920de[_0x221d7b(0x13a)],'warehouse_category':_0x221d7b(0x119),'name':{'$ne':'Return\x20Goods'}}},{'$group':{'_id':_0x221d7b(0xd7),'name':{'$first':_0x221d7b(0xd7)}}}]);}else _0x22ba1e=await warehouse[_0x221d7b(0x17a)]([{'$match':{'status':_0x221d7b(0x187),'warehouse_category':_0x221d7b(0x119),'name':{'$ne':_0x221d7b(0xc5)}}},{'$group':{'_id':_0x221d7b(0xd7),'name':{'$first':'$name'}}}]);if(_0x2ab0e2[0x0][_0x221d7b(0x174)]==_0x221d7b(0xec)){var _0x5dab42=users[_0x221d7b(0x175)];console[_0x221d7b(0x159)](_0x5dab42);}else{if(_0x2ab0e2[0x0][_0x221d7b(0x174)]==_0x221d7b(0xf3))var _0x5dab42=users[_0x221d7b(0xf3)];else{if(_0x2ab0e2[0x0][_0x221d7b(0x174)]==_0x221d7b(0x10e))var _0x5dab42=users[_0x221d7b(0x10e)];else{if(_0x2ab0e2[0x0]['language']==_0x221d7b(0xe2))var _0x5dab42=users[_0x221d7b(0xe2)];else{if(_0x2ab0e2[0x0]['language']==_0x221d7b(0x166))var _0x5dab42=users[_0x221d7b(0x166)];else{if(_0x2ab0e2[0x0][_0x221d7b(0x174)]=='Portuguese\x20(BR)')var _0x5dab42=users[_0x221d7b(0x13c)];else{if(_0x2ab0e2[0x0][_0x221d7b(0x174)]==_0x221d7b(0x103))var _0x5dab42=users[_0x221d7b(0x103)];else{if(_0x2ab0e2[0x0][_0x221d7b(0x174)]==_0x221d7b(0xcc))var _0x5dab42=users[_0x221d7b(0x16d)];}}}}}}}_0x3a6ada[_0x221d7b(0xd4)](_0x221d7b(0xea),{'success':_0x183546[_0x221d7b(0xe5)]('success'),'errors':_0x183546[_0x221d7b(0xe5)](_0x221d7b(0x10b)),'role':_0x2a8952,'profile':_0x2c6ae1,'adjustment':_0x417b7b,'stock':_0x5d02f6,'master_shop':_0x2ab0e2,'warehouse_name':_0x29f050,'unit':_0x14393d,'language':_0x5dab42,'warehouse':_0x22ba1e});}catch(_0x55a8e6){console[_0x221d7b(0x159)](_0x55a8e6),_0x3a6ada[_0x221d7b(0x173)](0xc8)['json']({'message':_0x55a8e6[_0x221d7b(0xff)]});}}),router[a0_0x5626c3(0x12c)](a0_0x5626c3(0x18b),auth,async(_0xdd6a33,_0x3d34d0)=>{var _0x55dd0e=a0_0x5626c3;try{const _0x161290=_0xdd6a33[_0x55dd0e(0xef)]['id'],_0x4620c0=await adjustment[_0x55dd0e(0x117)]({'_id':_0x161290}),_0x41501d=await warehouse['findOne']({'name':_0x4620c0[_0x55dd0e(0xe3)],'room':_0x4620c0['room']}),{warehouse_name:_0x5ed026,date:_0x39f32c,prod_name:_0x3ed011,level:_0x275029,isle:_0x5eee0f,pallet:_0x15035f,stock:_0x32f71f,types:_0x2467cb,adjust_qty:_0x1c9111,new_adjust_qty:_0x37f68a,note:_0x18caa6,Room_name:_0x288d5d,invoice:_0x4bb9f6,JO_number:_0x4905c9,expiry_date:_0x17dfc0}=_0xdd6a33[_0x55dd0e(0xc4)];if(typeof _0x3ed011==_0x55dd0e(0x193))var _0x11b1e4=[_0xdd6a33[_0x55dd0e(0xc4)]['prod_name']],_0x2a9019=[_0xdd6a33[_0x55dd0e(0xc4)]['level']],_0x4218ea=[_0xdd6a33['body'][_0x55dd0e(0x17f)]],_0x290959=[_0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x18e)]],_0x1b40a9=[_0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0xf1)]],_0x36b80a=[_0xdd6a33[_0x55dd0e(0xc4)]['New_Qty_Converted']],_0x3522d8=[_0xdd6a33['body'][_0x55dd0e(0x151)]],_0x3ceea5=[_0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x104)]],_0x300f8f=[_0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0xda)]],_0x54cd27=[_0xdd6a33['body']['batch_code']],_0x2a4ee1=[_0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x15b)]],_0x5280aa=[_0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x164)]],_0x3f6f9a=[_0xdd6a33[_0x55dd0e(0xc4)]['production_date']],_0x4864ba=[_0xdd6a33[_0x55dd0e(0xc4)]['prod_cat']],_0x13b77b=[_0xdd6a33[_0x55dd0e(0xc4)]['Rooms']],_0x3cf557=[_0xdd6a33[_0x55dd0e(0xc4)]['prime1']],_0xb6f2e9=[_0xdd6a33[_0x55dd0e(0xc4)]['second1']];else var _0x11b1e4=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x16c)]],_0x2a9019=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0xd0)]],_0x4218ea=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x17f)]],_0x290959=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x18e)]],_0x1b40a9=[..._0xdd6a33['body'][_0x55dd0e(0xf1)]],_0x36b80a=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0xf5)]],_0x3522d8=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x179)]],_0x3ceea5=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x104)]],_0x300f8f=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0xda)]],_0x54cd27=[..._0xdd6a33['body'][_0x55dd0e(0x18f)]],_0x2a4ee1=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x15b)]],_0x5280aa=[..._0xdd6a33[_0x55dd0e(0xc4)]['max_per_unit']],_0x3f6f9a=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x136)]],_0x4864ba=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x10f)]],_0x13b77b=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x150)]],_0x3cf557=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x14f)]],_0xb6f2e9=[..._0xdd6a33[_0x55dd0e(0xc4)][_0x55dd0e(0x13e)]];const _0x1361d2=_0x11b1e4['map'](_0x1459c5=>{return _0x1459c5={'product_name':_0x1459c5};});_0x2a9019['forEach']((_0x36e992,_0x357f35)=>{var _0x414ce7=_0x55dd0e;_0x13b77b[_0x414ce7(0xd1)]((_0x278cbc,_0x544893)=>{var _0x899baf=_0x414ce7;if(_0x278cbc==_0x899baf(0x16f)&&_0x357f35==_0x544893){var _0x435140=_0x36e992['slice'](0x3);_0x1361d2[_0x357f35][_0x899baf(0xed)]=_0x36e992[0x0],_0x1361d2[_0x357f35][_0x899baf(0x130)]=_0x36e992[0x1],_0x1361d2[_0x357f35][_0x899baf(0x194)]=0x0,_0x1361d2[_0x357f35][_0x899baf(0xf2)]=0x0,_0x1361d2[_0x357f35][_0x899baf(0xd5)]='Floor',_0x1361d2[_0x357f35][_0x899baf(0x147)]=_0x435140;}else{if(_0x278cbc==_0x899baf(0x134)&&_0x357f35==_0x544893){var _0x435140=_0x36e992['slice'](0x3);_0x1361d2[_0x357f35]['storage']=_0x36e992[0x0],_0x1361d2[_0x357f35][_0x899baf(0x130)]=_0x36e992[0x1],_0x1361d2[_0x357f35][_0x899baf(0x194)]=0x0,_0x1361d2[_0x357f35][_0x899baf(0xf2)]=0x0,_0x1361d2[_0x357f35][_0x899baf(0xd5)]=_0x899baf(0x108),_0x1361d2[_0x357f35]['floorlevel']=_0x36e992[0x5];}else{if(_0x357f35==_0x544893){var _0xb364c3;if(_0x36e992[0x4]=='L')_0xb364c3='Level';else _0x36e992[0x4]=='F'&&(_0xb364c3='Floor');_0x1361d2[_0x357f35][_0x899baf(0xed)]=_0x36e992[0x0],_0x1361d2[_0x357f35]['rack']=_0x36e992[0x1],_0x1361d2[_0x357f35][_0x899baf(0x194)]=_0x36e992[0x2],_0x1361d2[_0x357f35][_0x899baf(0xf2)]=_0x36e992[0x3],_0x1361d2[_0x357f35][_0x899baf(0xd5)]=_0xb364c3,_0x1361d2[_0x357f35][_0x899baf(0x147)]=_0x36e992[0x5];}}}});}),_0x4218ea[_0x55dd0e(0xd1)]((_0x3b6b44,_0x4ef521)=>{var _0x29192b=_0x55dd0e;_0x1361d2[_0x4ef521][_0x29192b(0x16a)]=_0x3b6b44;}),_0x290959['forEach']((_0x4138e0,_0x261a82)=>{var _0x2c1b57=_0x55dd0e;_0x1361d2[_0x261a82][_0x2c1b57(0x18e)]=_0x4138e0;}),_0x1b40a9[_0x55dd0e(0xd1)]((_0x2bc4c1,_0xa59657)=>{var _0xce68ab=_0x55dd0e;_0x1361d2[_0xa59657][_0xce68ab(0x138)]=_0x2bc4c1;}),_0x36b80a[_0x55dd0e(0xd1)]((_0x565a0f,_0x406d94)=>{_0x1361d2[_0x406d94]['new_adjust_qty']=_0x565a0f;}),_0x3522d8['forEach']((_0x44b01f,_0x87865b)=>{var _0x31b298=_0x55dd0e;_0x1361d2[_0x87865b][_0x31b298(0x179)]=_0x44b01f;}),_0x3ceea5[_0x55dd0e(0xd1)]((_0x3f4842,_0x31553f)=>{var _0x2ef44b=_0x55dd0e;_0x1361d2[_0x31553f][_0x2ef44b(0x122)]=_0x3f4842;}),_0x300f8f['forEach']((_0xe0ffff,_0xedeacc)=>{var _0x114cb9=_0x55dd0e;_0x1361d2[_0xedeacc][_0x114cb9(0xd8)]=_0xe0ffff;}),_0x54cd27[_0x55dd0e(0xd1)]((_0x31eeb8,_0xbfdf70)=>{var _0x2341ec=_0x55dd0e;_0x1361d2[_0xbfdf70][_0x2341ec(0x18f)]=_0x31eeb8;}),_0x2a4ee1[_0x55dd0e(0xd1)]((_0x5bd168,_0x2123c2)=>{_0x1361d2[_0x2123c2]['expiry_date']=_0x5bd168;}),_0x5280aa['forEach']((_0x546a9c,_0x5550cb)=>{var _0x84af52=_0x55dd0e;_0x1361d2[_0x5550cb][_0x84af52(0x118)]=_0x546a9c;}),_0x3f6f9a[_0x55dd0e(0xd1)]((_0x52f24b,_0x42e29c)=>{var _0x3dfe4b=_0x55dd0e;_0x1361d2[_0x42e29c][_0x3dfe4b(0x136)]=_0x52f24b;}),_0x4864ba['forEach']((_0x31d3dc,_0x2341d1)=>{_0x1361d2[_0x2341d1]['prod_cat']=_0x31d3dc;}),_0x13b77b[_0x55dd0e(0xd1)]((_0x293bff,_0x1b02f3)=>{var _0x5c41c4=_0x55dd0e;_0x1361d2[_0x1b02f3][_0x5c41c4(0xf7)]=_0x293bff;}),_0x3cf557[_0x55dd0e(0xd1)]((_0xd68155,_0xb312e3)=>{_0x1361d2[_0xb312e3]['primary_code']=_0xd68155;}),_0xb6f2e9[_0x55dd0e(0xd1)]((_0x5739cd,_0x144a28)=>{_0x1361d2[_0x144a28]['secondary_code']=_0x5739cd;});const _0x2f54b9=_0x1361d2[_0x55dd0e(0xe6)](_0x369e68=>_0x369e68[_0x55dd0e(0x138)]!=='0'&&_0x369e68['adjust_qty']!=='');var _0x851ed1=0x0;_0x2f54b9[_0x55dd0e(0xd1)](_0x908aeb=>{var _0x58755a=_0x55dd0e;console[_0x58755a(0x159)](_0x58755a(0x189),_0x908aeb),parseInt(_0x908aeb[_0x58755a(0x138)])<=0x0&&_0x851ed1++;});if(_0x851ed1!=0x0)return _0xdd6a33[_0x55dd0e(0xe5)](_0x55dd0e(0x10b),_0x55dd0e(0x18c)),_0x3d34d0[_0x55dd0e(0xfb)]('back');_0x4620c0[_0x55dd0e(0xe3)]=_0x5ed026,_0x4620c0[_0x55dd0e(0x15d)]=_0x39f32c,_0x4620c0[_0x55dd0e(0x106)]=_0x2f54b9,_0x4620c0[_0x55dd0e(0x12f)]=_0x18caa6,_0x4620c0['invoice']=_0x4bb9f6,_0x4620c0['isAllowEdit']=_0x55dd0e(0x10c);const _0x300caf=await _0x4620c0['save']();_0xdd6a33['flash']('success','adjustment\x20data\x20update\x20successfully'),_0x3d34d0[_0x55dd0e(0xfb)]('/adjustment/view');}catch(_0x581e68){console[_0x55dd0e(0x159)](_0x581e68);}}),router[a0_0x5626c3(0x12c)](a0_0x5626c3(0xfa),async(_0x32fb1a,_0x11d0c2)=>{var _0x509e7b=a0_0x5626c3;const {primary_code:_0x5b504d,warehouse_data:_0x50bb11,rooms_data:_0x22c98c,Roomslist:_0x650f5c}=_0x32fb1a[_0x509e7b(0xc4)],_0x6c090e=_0x650f5c['split'](','),_0x22f42c=[];async function _0x2eaa0d(_0x2d91d5){var _0x1d2a5d=_0x509e7b;const _0x109bc4=await warehouse[_0x1d2a5d(0x17a)]([{'$match':{'name':_0x50bb11,'room':_0x2d91d5}},{'$unwind':'$product_details'},{'$match':{'product_details.primary_code':_0x5b504d}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x1d2a5d(0x192)},'primary_code':{'$first':_0x1d2a5d(0x120)},'secondary_code':{'$first':_0x1d2a5d(0xf4)},'product_code':{'$first':_0x1d2a5d(0x186)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x1d2a5d(0xee)},'type':{'$first':'$product_details.type'},'pallet':{'$first':_0x1d2a5d(0x152)},'unit':{'$first':_0x1d2a5d(0x11c)},'secondary_unit':{'$first':_0x1d2a5d(0x127)},'storage':{'$first':_0x1d2a5d(0x12e)},'rack':{'$first':_0x1d2a5d(0xfd)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x1d2a5d(0x180)},'maxPerUnit':{'$first':_0x1d2a5d(0x102)},'batch_code':{'$first':_0x1d2a5d(0xe7)},'product_cat':{'$first':_0x1d2a5d(0x171)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x1d2a5d(0x114)},'invoice':{'$first':'$product_details.invoice'}}}]),_0x2c489d=await warehouse['aggregate']([{'$match':{'name':_0x50bb11,'room':_0x2d91d5}},{'$unwind':_0x1d2a5d(0xce)},{'$match':{'product_details.secondary_code':_0x5b504d}},{'$group':{'_id':_0x1d2a5d(0xfc),'name':{'$first':_0x1d2a5d(0x184)},'product_stock':{'$first':_0x1d2a5d(0x192)},'primary_code':{'$first':_0x1d2a5d(0x120)},'secondary_code':{'$first':_0x1d2a5d(0xf4)},'product_code':{'$first':'$product_details.product_code'},'level':{'$first':_0x1d2a5d(0x181)},'isle':{'$first':'$product_details.bin'},'type':{'$first':_0x1d2a5d(0x167)},'pallet':{'$first':_0x1d2a5d(0x152)},'unit':{'$first':_0x1d2a5d(0x11c)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x1d2a5d(0xfd)},'expiry_date':{'$first':'$product_details.expiry_date'},'production_date':{'$first':_0x1d2a5d(0x180)},'maxPerUnit':{'$first':_0x1d2a5d(0x102)},'batch_code':{'$first':_0x1d2a5d(0xe7)},'product_cat':{'$first':_0x1d2a5d(0x171)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':_0x1d2a5d(0x114)}}}]);if(_0x109bc4['length']>0x0)_0x22f42c[_0x1d2a5d(0x197)](_0x109bc4);else _0x2c489d[_0x1d2a5d(0x135)]>0x0&&_0x22f42c[_0x1d2a5d(0x197)](_0x2c489d);}const _0x4e26cc=_0x6c090e['map'](_0x3c4bf2=>_0x2eaa0d(_0x3c4bf2));await Promise[_0x509e7b(0xca)](_0x4e26cc),_0x11d0c2[_0x509e7b(0x148)](_0x22f42c);}),router[a0_0x5626c3(0x12c)]('/CheckingWarehouse',async(_0x4a3f70,_0x59ea8c)=>{var _0x30aea4=a0_0x5626c3;const {primaryCode:_0x3718b3,secondaryCode:_0x346d32,productCode:_0x3cdbb5,level:_0x4d329c,isle:_0xa8f56e,pallet:_0x1e5b9d,warehouses:_0x39c2de,room:_0x2b4d98}=_0x4a3f70[_0x30aea4(0xc4)];try{const _0x182866=await warehouse['aggregate']([{'$match':{'name':_0x39c2de,'room':_0x2b4d98}},{'$unwind':_0x30aea4(0xce)},{'$match':{'product_details.level':parseInt(_0x4d329c),'product_details.isle':_0xa8f56e,'product_details.pallet':parseInt(_0x1e5b9d)}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x30aea4(0x184)},'product_stock':{'$first':_0x30aea4(0x192)},'level':{'$first':_0x30aea4(0xf0)},'isle':{'$first':_0x30aea4(0x17c)},'pallet':{'$first':_0x30aea4(0x18a)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x59ea8c[_0x30aea4(0x173)](0xc8)[_0x30aea4(0x148)](_0x182866);}catch(_0x49f96c){_0x59ea8c[_0x30aea4(0x173)](0x194)[_0x30aea4(0x148)]({'message':_0x49f96c[_0x30aea4(0xff)]});}}),module[a0_0x5626c3(0x10a)]=router;