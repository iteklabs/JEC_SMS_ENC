function a0_0x2467(_0x16a614,_0x2a4ed2){var _0x20cb17=a0_0x20cb();return a0_0x2467=function(_0x2467a9,_0x32c036){_0x2467a9=_0x2467a9-0x16b;var _0x6441bd=_0x20cb17[_0x2467a9];return _0x6441bd;},a0_0x2467(_0x16a614,_0x2a4ed2);}var a0_0xad32b5=a0_0x2467;(function(_0x177ec3,_0xe5d75c){var _0x40fcc5=a0_0x2467,_0x3da91a=_0x177ec3();while(!![]){try{var _0x5d4f0e=parseInt(_0x40fcc5(0x1ff))/0x1+parseInt(_0x40fcc5(0x22f))/0x2+parseInt(_0x40fcc5(0x200))/0x3+parseInt(_0x40fcc5(0x193))/0x4*(-parseInt(_0x40fcc5(0x1c3))/0x5)+parseInt(_0x40fcc5(0x176))/0x6*(parseInt(_0x40fcc5(0x245))/0x7)+parseInt(_0x40fcc5(0x223))/0x8+-parseInt(_0x40fcc5(0x21d))/0x9*(parseInt(_0x40fcc5(0x1d4))/0xa);if(_0x5d4f0e===_0xe5d75c)break;else _0x3da91a['push'](_0x3da91a['shift']());}catch(_0x3562bf){_0x3da91a['push'](_0x3da91a['shift']());}}}(a0_0x20cb,0xedfa3));const express=require(a0_0xad32b5(0x1e5)),app=express(),router=express[a0_0xad32b5(0x186)](),auth=require('../middleware/auth'),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment,supervisor_settings,email_settings}=require(a0_0xad32b5(0x18e)),users=require(a0_0xad32b5(0x16c)),nodemailer=require('nodemailer');router[a0_0xad32b5(0x1e6)](a0_0xad32b5(0x196),auth,async(_0x1f5f77,_0x29c6a6)=>{var _0x48756a=a0_0xad32b5;try{const {username:_0xf58368,email:_0x6d48fa,role:_0x48ed38}=_0x1f5f77[_0x48756a(0x180)],_0x562fd6=_0x1f5f77[_0x48756a(0x180)],_0x42387b=await profile[_0x48756a(0x1c7)]({'email':_0x562fd6[_0x48756a(0x1da)]}),_0x23389d=await master_shop[_0x48756a(0x1a8)]();console[_0x48756a(0x1bb)](_0x48756a(0x1a2),_0x23389d);let _0x1df6fd;if(_0x562fd6[_0x48756a(0x244)]==_0x48756a(0x213)){const _0x4d68a6=await staff[_0x48756a(0x1c7)]({'email':_0x562fd6[_0x48756a(0x1da)]});_0x1df6fd=await warehouse[_0x48756a(0x1a8)]({'status':_0x48756a(0x187),'name':_0x4d68a6['warehouse']});}else _0x1df6fd=await warehouse[_0x48756a(0x1a8)]({'status':'Enabled'});const _0x20e0d2=await product[_0x48756a(0x1a8)]();let _0x597c0d;if(_0x562fd6[_0x48756a(0x244)]==_0x48756a(0x213)){const _0x151a0e=await staff[_0x48756a(0x1c7)]({'email':_0x562fd6[_0x48756a(0x1da)]});_0x597c0d=await adjustment['find']({'warehouse_name':_0x151a0e[_0x48756a(0x226)]});}else _0x597c0d=await adjustment[_0x48756a(0x1bf)]([{'$unwind':_0x48756a(0x240)},{'$group':{'_id':_0x48756a(0x1f4),'invoice':{'$first':_0x48756a(0x237)},'date':{'$first':_0x48756a(0x215)},'warehouse_name':{'$first':_0x48756a(0x1f2)},'room':{'$addToSet':_0x48756a(0x197)},'finalize':{'$first':_0x48756a(0x170)},'isAllowEdit':{'$first':'$isAllowEdit'}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1,'isAllowEdit':0x1}}]);if(_0x23389d[0x0][_0x48756a(0x1ee)]==_0x48756a(0x1fd)){var _0xa6e49d=users['English'];console[_0x48756a(0x1bb)](_0xa6e49d);}else{if(_0x23389d[0x0][_0x48756a(0x1ee)]==_0x48756a(0x1b2))var _0xa6e49d=users[_0x48756a(0x1b2)];else{if(_0x23389d[0x0][_0x48756a(0x1ee)]==_0x48756a(0x1bc))var _0xa6e49d=users['German'];else{if(_0x23389d[0x0]['language']=='Spanish')var _0xa6e49d=users['Spanish'];else{if(_0x23389d[0x0][_0x48756a(0x1ee)]==_0x48756a(0x220))var _0xa6e49d=users['French'];else{if(_0x23389d[0x0][_0x48756a(0x1ee)]==_0x48756a(0x1f8))var _0xa6e49d=users[_0x48756a(0x19c)];else{if(_0x23389d[0x0][_0x48756a(0x1ee)]==_0x48756a(0x23a))var _0xa6e49d=users['Chinese'];else{if(_0x23389d[0x0]['language']=='Arabic\x20(ae)')var _0xa6e49d=users['Arabic'];}}}}}}}_0x29c6a6['render'](_0x48756a(0x1a4),{'success':_0x1f5f77[_0x48756a(0x1b6)](_0x48756a(0x1a5)),'errors':_0x1f5f77['flash'](_0x48756a(0x23d)),'role':_0x562fd6,'profile':_0x42387b,'warehouse':_0x1df6fd,'product':_0x20e0d2,'adjustment':_0x597c0d,'master_shop':_0x23389d,'language':_0xa6e49d});}catch(_0x978609){console[_0x48756a(0x1bb)](_0x978609);}});async function getRandom8DigitNumber(){var _0x513667=a0_0xad32b5;const _0xeb7319=0x989680,_0x1899ca=0x5f5e0ff,_0x30c428=Math[_0x513667(0x23f)](Math[_0x513667(0x242)]()*(_0x1899ca-_0xeb7319+0x1))+_0xeb7319;var _0x4e8869;const _0xb9dc5=await adjustment['findOne']({'invoice':'ADJ-'+_0x30c428});return _0xb9dc5&&_0xb9dc5[_0x513667(0x1e2)]>0x0?_0x4e8869='ADJ-'+_0x30c428:_0x4e8869=_0x513667(0x1d8)+_0x30c428,_0x4e8869;}router[a0_0xad32b5(0x1e6)](a0_0xad32b5(0x1ac),auth,async(_0x4799e2,_0x1b418a)=>{var _0x7698b7=a0_0xad32b5;try{const {username:_0x2efc7f,email:_0x15cd4b,role:_0x56f28e}=_0x4799e2[_0x7698b7(0x180)],_0x50409f=_0x4799e2[_0x7698b7(0x180)],_0x8e0188=await profile['findOne']({'email':_0x50409f['email']}),_0x5ef56f=await master_shop[_0x7698b7(0x1a8)]();let _0x5b20b8;if(_0x50409f[_0x7698b7(0x244)]=='staff'){const _0xb2ef1a=await staff['findOne']({'email':_0x50409f[_0x7698b7(0x1da)]});_0x5b20b8=await warehouse[_0x7698b7(0x1bf)]([{'$match':{'status':_0x7698b7(0x187),'name':_0xb2ef1a[_0x7698b7(0x226)],'warehouse_category':_0x7698b7(0x221),'name':{'$ne':_0x7698b7(0x19a)}}},{'$group':{'_id':_0x7698b7(0x1aa),'name':{'$first':_0x7698b7(0x1aa)}}}]);}else _0x5b20b8=await warehouse[_0x7698b7(0x1bf)]([{'$match':{'status':_0x7698b7(0x187),'warehouse_category':_0x7698b7(0x221),'name':{'$ne':_0x7698b7(0x19a)}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);const _0xd7d287=await product[_0x7698b7(0x1a8)]({}),_0x46ac05=await adjustment[_0x7698b7(0x1a8)]({}),_0x20bb86=_0x46ac05['length']+0x1,_0x2606e9=_0x7698b7(0x1d8)+_0x20bb86['toString']()['padStart'](0x5,'0');var _0x202522=[_0x7698b7(0x173),'Enclosed',_0x7698b7(0x17d)];if(_0x5ef56f[0x0][_0x7698b7(0x1ee)]==_0x7698b7(0x1fd))var _0x1f1adb=users[_0x7698b7(0x16e)];else{if(_0x5ef56f[0x0]['language']=='Hindi')var _0x1f1adb=users['Hindi'];else{if(_0x5ef56f[0x0][_0x7698b7(0x1ee)]==_0x7698b7(0x1bc))var _0x1f1adb=users[_0x7698b7(0x1bc)];else{if(_0x5ef56f[0x0][_0x7698b7(0x1ee)]==_0x7698b7(0x1b8))var _0x1f1adb=users[_0x7698b7(0x1b8)];else{if(_0x5ef56f[0x0][_0x7698b7(0x1ee)]==_0x7698b7(0x220))var _0x1f1adb=users[_0x7698b7(0x220)];else{if(_0x5ef56f[0x0][_0x7698b7(0x1ee)]==_0x7698b7(0x1f8))var _0x1f1adb=users[_0x7698b7(0x19c)];else{if(_0x5ef56f[0x0][_0x7698b7(0x1ee)]=='Chinese')var _0x1f1adb=users[_0x7698b7(0x23a)];else{if(_0x5ef56f[0x0][_0x7698b7(0x1ee)]==_0x7698b7(0x1bd))var _0x1f1adb=users[_0x7698b7(0x205)];}}}}}}}const _0x159897=getRandom8DigitNumber();_0x159897[_0x7698b7(0x230)](_0x3b0bd7=>{var _0x2c3472=_0x7698b7;_0x1b418a['render'](_0x2c3472(0x1d7),{'success':_0x4799e2['flash'](_0x2c3472(0x1a5)),'errors':_0x4799e2[_0x2c3472(0x1b6)](_0x2c3472(0x23d)),'role':_0x50409f,'profile':_0x8e0188,'warehouse':_0x5b20b8,'product':_0xd7d287,'master_shop':_0x5ef56f,'language':_0x1f1adb,'rooms_data':_0x202522,'invoice_no':_0x3b0bd7});})[_0x7698b7(0x1cf)](_0x121e38=>{var _0x594251=_0x7698b7;_0x4799e2[_0x594251(0x1b6)](_0x594251(0x23d),_0x594251(0x23c)),_0x1b418a[_0x594251(0x1cc)](_0x594251(0x1c5));});}catch(_0x33e6a7){console[_0x7698b7(0x1bb)](_0x33e6a7);}}),router[a0_0xad32b5(0x174)](a0_0xad32b5(0x1ac),auth,async(_0x20f80e,_0x13c73d)=>{var _0x5b62f7=a0_0xad32b5;try{const {warehouse_name:_0x63aafc,date:_0x3cf5cd,prod_name:_0x13dc50,level:_0x248834,isle:_0xba6200,pallet:_0x2323f6,stock:_0x1af68c,types:_0x1feff9,adjust_qty:_0x3adef0,new_adjust_qty:_0x5c8641,note:_0x52cbff,Room_name:_0x1e9346,invoice:_0x5a89bb,JO_number:_0x5b38ef,expiry_date:_0x4e1cce}=_0x20f80e[_0x5b62f7(0x190)];if(typeof _0x13dc50==_0x5b62f7(0x183))var _0x5be255=[_0x20f80e[_0x5b62f7(0x190)]['prod_name']],_0x4a4120=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x1f0)]],_0x3cf112=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x178)]],_0x94fba7=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x206)]],_0x1fe5a2=[_0x20f80e['body'][_0x5b62f7(0x172)]],_0xa02bbb=[_0x20f80e['body'][_0x5b62f7(0x1a3)]],_0x1401c2=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x1ea)]],_0x362a64=[_0x20f80e['body']['Secondary_units']],_0x51fbb3=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x18a)]],_0x421e7f=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x243)]],_0x38b547=[_0x20f80e[_0x5b62f7(0x190)]['expiry_date']],_0x345a0f=[_0x20f80e[_0x5b62f7(0x190)]['max_per_unit']],_0x942c94=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x191)]],_0x323dba=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x22b)]],_0x16e62e=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x222)]],_0x130ef9=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x198)]],_0x4517d7=[_0x20f80e[_0x5b62f7(0x190)]['second1']],_0x105888=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x1fc)]],_0x434838=[_0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x227)]];else var _0x5be255=[..._0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x232)]],_0x4a4120=[..._0x20f80e[_0x5b62f7(0x190)]['level']],_0x3cf112=[..._0x20f80e['body'][_0x5b62f7(0x178)]],_0x94fba7=[..._0x20f80e['body'][_0x5b62f7(0x206)]],_0x1fe5a2=[..._0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x172)]],_0xa02bbb=[..._0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x1a3)]],_0x1401c2=[..._0x20f80e[_0x5b62f7(0x190)]['unit']],_0x362a64=[..._0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x235)]],_0x51fbb3=[..._0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x18a)]],_0x421e7f=[..._0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x243)]],_0x38b547=[..._0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x1fa)]],_0x345a0f=[..._0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x182)]],_0x942c94=[..._0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x191)]],_0x323dba=[..._0x20f80e['body'][_0x5b62f7(0x22b)]],_0x16e62e=[..._0x20f80e['body'][_0x5b62f7(0x222)]],_0x130ef9=[..._0x20f80e[_0x5b62f7(0x190)]['prime1']],_0x4517d7=[..._0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x1ed)]],_0x105888=[..._0x20f80e[_0x5b62f7(0x190)][_0x5b62f7(0x1fc)]],_0x434838=[..._0x20f80e[_0x5b62f7(0x190)]['id_transaction']];const _0x23219a=_0x5be255['map'](_0x207f4d=>{return _0x207f4d={'product_name':_0x207f4d};});_0x4a4120[_0x5b62f7(0x199)]((_0x45843f,_0x30c2c1)=>{var _0xfc546c=_0x5b62f7;_0x16e62e[_0xfc546c(0x199)]((_0x580960,_0x117b6c)=>{var _0xb41f79=_0xfc546c;if(_0x580960==_0xb41f79(0x1f9)&&_0x30c2c1==_0x117b6c){var _0x5668bf=_0x45843f[_0xb41f79(0x225)](0x3);_0x23219a[_0x30c2c1]['storage']=_0x45843f[0x0],_0x23219a[_0x30c2c1][_0xb41f79(0x1e8)]=_0x45843f[0x1],_0x23219a[_0x30c2c1][_0xb41f79(0x1d1)]=0x0,_0x23219a[_0x30c2c1]['bin']=0x0,_0x23219a[_0x30c2c1][_0xb41f79(0x203)]=_0xb41f79(0x218),_0x23219a[_0x30c2c1][_0xb41f79(0x1ad)]=_0x5668bf;}else{if(_0x580960==_0xb41f79(0x1dc)&&_0x30c2c1==_0x117b6c){var _0x5668bf=_0x45843f[_0xb41f79(0x225)](0x3);_0x23219a[_0x30c2c1][_0xb41f79(0x188)]=_0x45843f[0x0],_0x23219a[_0x30c2c1][_0xb41f79(0x1e8)]=_0x45843f[0x1],_0x23219a[_0x30c2c1][_0xb41f79(0x1d1)]=0x0,_0x23219a[_0x30c2c1][_0xb41f79(0x1e1)]=0x0,_0x23219a[_0x30c2c1][_0xb41f79(0x203)]=_0xb41f79(0x218),_0x23219a[_0x30c2c1][_0xb41f79(0x1ad)]=_0x45843f[0x5];}else{if(_0x30c2c1==_0x117b6c){var _0x2f2983;if(_0x45843f[0x4]=='L')_0x2f2983=_0xb41f79(0x195);else _0x45843f[0x4]=='F'&&(_0x2f2983=_0xb41f79(0x218));_0x23219a[_0x30c2c1][_0xb41f79(0x188)]=_0x45843f[0x0],_0x23219a[_0x30c2c1][_0xb41f79(0x1e8)]=_0x45843f[0x1],_0x23219a[_0x30c2c1][_0xb41f79(0x1d1)]=_0x45843f[0x2],_0x23219a[_0x30c2c1][_0xb41f79(0x1e1)]=_0x45843f[0x3],_0x23219a[_0x30c2c1]['type']=_0x2f2983,_0x23219a[_0x30c2c1][_0xb41f79(0x1ad)]=_0x45843f[0x5];}}}});}),_0x3cf112['forEach']((_0xc5f572,_0x514417)=>{var _0x4cbea6=_0x5b62f7;_0x23219a[_0x514417][_0x4cbea6(0x1ae)]=_0xc5f572;}),_0x434838['forEach']((_0x4c622,_0x2f5504)=>{var _0x5cfe46=_0x5b62f7;_0x23219a[_0x2f5504][_0x5cfe46(0x1e7)]=_0x4c622;}),_0x94fba7[_0x5b62f7(0x199)]((_0x65b54,_0x3886a9)=>{var _0x291dc1=_0x5b62f7;_0x23219a[_0x3886a9][_0x291dc1(0x206)]=_0x65b54;}),_0x1fe5a2[_0x5b62f7(0x199)]((_0x15f064,_0x55dc8a)=>{_0x23219a[_0x55dc8a]['adjust_qty']=_0x15f064;}),_0xa02bbb['forEach']((_0x491aff,_0x19a2b4)=>{var _0x46682c=_0x5b62f7;_0x23219a[_0x19a2b4][_0x46682c(0x20b)]=_0x491aff;}),_0x1401c2[_0x5b62f7(0x199)]((_0x4ae43e,_0x4bc89a)=>{_0x23219a[_0x4bc89a]['unit']=_0x4ae43e;}),_0x362a64[_0x5b62f7(0x199)]((_0x59506b,_0x11fc1d)=>{var _0x39794c=_0x5b62f7;_0x23219a[_0x11fc1d][_0x39794c(0x19b)]=_0x59506b;}),_0x51fbb3['forEach']((_0x49b629,_0x367c14)=>{var _0x7343d6=_0x5b62f7;_0x23219a[_0x367c14][_0x7343d6(0x212)]=_0x49b629;}),_0x421e7f[_0x5b62f7(0x199)]((_0x1b0a1e,_0x32cd38)=>{_0x23219a[_0x32cd38]['batch_code']=_0x1b0a1e;}),_0x38b547[_0x5b62f7(0x199)]((_0x549407,_0x572102)=>{var _0x315317=_0x5b62f7;_0x23219a[_0x572102][_0x315317(0x1fa)]=_0x549407;}),_0x345a0f['forEach']((_0x17157f,_0x3b4aa7)=>{_0x23219a[_0x3b4aa7]['maxperunit']=_0x17157f;}),_0x942c94[_0x5b62f7(0x199)]((_0x3b03dd,_0x2a319f)=>{var _0x144542=_0x5b62f7;_0x23219a[_0x2a319f][_0x144542(0x191)]=_0x3b03dd;}),_0x323dba[_0x5b62f7(0x199)]((_0x5aadb7,_0xb70603)=>{var _0x125f64=_0x5b62f7;_0x23219a[_0xb70603][_0x125f64(0x22b)]=_0x5aadb7;}),_0x16e62e[_0x5b62f7(0x199)]((_0x506d99,_0x2547a8)=>{_0x23219a[_0x2547a8]['room_names']=_0x506d99;}),_0x130ef9[_0x5b62f7(0x199)]((_0x119653,_0x4a2741)=>{_0x23219a[_0x4a2741]['primary_code']=_0x119653;}),_0x4517d7[_0x5b62f7(0x199)]((_0x1372ad,_0x144371)=>{_0x23219a[_0x144371]['secondary_code']=_0x1372ad;}),_0x105888[_0x5b62f7(0x199)]((_0x51d433,_0x12bd86)=>{var _0x5a187b=_0x5b62f7;_0x23219a[_0x12bd86][_0x5a187b(0x216)]=_0x51d433;});const _0x4246df=_0x23219a[_0x5b62f7(0x1b0)](_0x4703e2=>_0x4703e2[_0x5b62f7(0x20a)]!=='0'&&_0x4703e2[_0x5b62f7(0x20a)]!=='');var _0x350808=0x0;_0x4246df['forEach'](_0x2abf69=>{var _0x5438b4=_0x5b62f7;console[_0x5438b4(0x1bb)](_0x5438b4(0x1fb),_0x2abf69),parseInt(_0x2abf69[_0x5438b4(0x20a)])<=0x0&&_0x350808++;});if(_0x350808!=0x0)return _0x20f80e[_0x5b62f7(0x1b6)](_0x5b62f7(0x23d),'You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200'),_0x13c73d[_0x5b62f7(0x1cc)](_0x5b62f7(0x1fe));const _0x3ff43a=new adjustment({'warehouse_name':_0x63aafc,'date':_0x3cf5cd,'product':_0x4246df,'note':_0x52cbff,'room':_0x1e9346,'invoice':_0x5a89bb,'JO_number':_0x5b38ef,'expiry_date':_0x4e1cce}),_0x16be02=await _0x3ff43a[_0x5b62f7(0x20f)]();_0x20f80e[_0x5b62f7(0x1b6)]('success','adjustment\x20add\x20successfull'),_0x13c73d[_0x5b62f7(0x1cc)](_0x5b62f7(0x210)+_0x16be02[_0x5b62f7(0x236)]);}catch(_0x545895){console['log'](_0x545895),_0x13c73d[_0x5b62f7(0x184)](0xc8)['json']({'message':_0x545895['message']});}}),router[a0_0xad32b5(0x1e6)](a0_0xad32b5(0x1c1),auth,async(_0x164a47,_0xcbf26a)=>{var _0x393e31=a0_0xad32b5;try{const {username:_0x541629,email:_0x19b750,role:_0x2bfaa6}=_0x164a47[_0x393e31(0x180)],_0x27f86=_0x164a47['user'],_0x5cd841=await profile[_0x393e31(0x1c7)]({'email':_0x27f86[_0x393e31(0x1da)]}),_0x4ab120=await master_shop[_0x393e31(0x1a8)](),_0x47a2b4=_0x164a47[_0x393e31(0x21c)]['id'],_0x2c7999=await adjustment[_0x393e31(0x209)]({'_id':_0x47a2b4}),_0x91aaae=await purchases[_0x393e31(0x1bf)]([{'$match':{'warehouse_name':_0x2c7999[_0x393e31(0x228)]}},{'$unwind':_0x393e31(0x240)},{'$group':{'_id':_0x393e31(0x16b)}}]),_0x583388=await product['find']({}),_0x47acd6=await warehouse[_0x393e31(0x1bf)]([{'$match':{'name':_0x2c7999[_0x393e31(0x228)]}},{'$unwind':_0x393e31(0x20e)},{'$group':{'_id':_0x393e31(0x1d9),'name':{'$first':_0x393e31(0x1c9)},'product_stock':{'$first':_0x393e31(0x21e)},'bay':{'$first':_0x393e31(0x239)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x393e31(0x241)},'floorlevel':{'$first':_0x393e31(0x181)},'primary_code':{'$first':_0x393e31(0x21b)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x393e31(0x1a0)},'storage':{'$first':_0x393e31(0x22a)},'rack':{'$first':_0x393e31(0x229)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'expiry_date':{'$first':_0x393e31(0x1e4)},'production_date':{'$first':_0x393e31(0x1b7)},'batch_code':{'$first':'$product_details.batch_code'},'room':{'$first':_0x393e31(0x20d)}}}]);if(_0x4ab120[0x0][_0x393e31(0x1ee)]==_0x393e31(0x1fd)){var _0x33d791=users['English'];console['log'](_0x33d791);}else{if(_0x4ab120[0x0][_0x393e31(0x1ee)]==_0x393e31(0x1b2))var _0x33d791=users[_0x393e31(0x1b2)];else{if(_0x4ab120[0x0][_0x393e31(0x1ee)]==_0x393e31(0x1bc))var _0x33d791=users['German'];else{if(_0x4ab120[0x0][_0x393e31(0x1ee)]==_0x393e31(0x1b8))var _0x33d791=users['Spanish'];else{if(_0x4ab120[0x0]['language']==_0x393e31(0x220))var _0x33d791=users[_0x393e31(0x220)];else{if(_0x4ab120[0x0][_0x393e31(0x1ee)]==_0x393e31(0x1f8))var _0x33d791=users[_0x393e31(0x19c)];else{if(_0x4ab120[0x0][_0x393e31(0x1ee)]==_0x393e31(0x23a))var _0x33d791=users[_0x393e31(0x23a)];else{if(_0x4ab120[0x0][_0x393e31(0x1ee)]=='Arabic\x20(ae)')var _0x33d791=users[_0x393e31(0x205)];}}}}}}}_0xcbf26a[_0x393e31(0x1f6)]('edit_adjustment_view',{'success':_0x164a47[_0x393e31(0x1b6)](_0x393e31(0x1a5)),'errors':_0x164a47[_0x393e31(0x1b6)]('errors'),'role':_0x27f86,'profile':_0x5cd841,'adjustment':_0x2c7999,'stock':_0x47acd6,'master_shop':_0x4ab120,'warehouse_name':_0x91aaae,'unit':_0x583388,'language':_0x33d791});}catch(_0x3407e8){console['log'](_0x3407e8),_0xcbf26a[_0x393e31(0x184)](0xc8)['json']({'message':_0x3407e8[_0x393e31(0x1eb)]});}}),router[a0_0xad32b5(0x174)](a0_0xad32b5(0x1c1),auth,async(_0x25f243,_0x4fe13e)=>{var _0x42327e=a0_0xad32b5;try{const _0x5d094a=_0x25f243['params']['id'],{warehouse_name:_0x480111,Room_name:_0x451a1a}=_0x25f243[_0x42327e(0x190)],_0x4cef7c=await adjustment['findById']({'_id':_0x5d094a}),_0x52ea49=_0x4cef7c[_0x42327e(0x1be)]['map'](async _0x4d5bb9=>{var _0xfe7d19=_0x42327e;if(_0x4d5bb9[_0xfe7d19(0x20a)]>0x0){var _0x1d8239=await warehouse[_0xfe7d19(0x1c7)]({'name':_0x480111,'room':_0x4d5bb9['room_names'],'warehouse_category':'Raw\x20Materials'});const _0x130a76=_0x1d8239[_0xfe7d19(0x246)][_0xfe7d19(0x18f)](_0x4a6d27=>{var _0x3487d2=_0xfe7d19;console[_0x3487d2(0x1bb)](_0x4d5bb9[_0x3487d2(0x206)]+'\x20<>\x20');if(_0x4d5bb9[_0x3487d2(0x206)]==_0x3487d2(0x207)){if(_0x4a6d27[_0x3487d2(0x238)]==_0x4d5bb9[_0x3487d2(0x238)]&&_0x4a6d27[_0x3487d2(0x1ad)]==_0x4d5bb9['floorlevel']&&_0x4a6d27[_0x3487d2(0x203)]==_0x4d5bb9[_0x3487d2(0x203)]&&_0x4a6d27[_0x3487d2(0x1e1)]==_0x4d5bb9[_0x3487d2(0x1e1)]&&_0x4a6d27[_0x3487d2(0x1d1)]==_0x4d5bb9['bay']&&_0x4a6d27['rack']==_0x4d5bb9['rack']&&_0x4a6d27['storage']==_0x4d5bb9[_0x3487d2(0x188)]&&_0x4a6d27['expiry_date']==_0x4d5bb9['expiry_date']&&_0x4a6d27[_0x3487d2(0x243)]==_0x4d5bb9[_0x3487d2(0x243)]&&_0x4a6d27[_0x3487d2(0x191)]==_0x4d5bb9[_0x3487d2(0x191)]&&_0x4a6d27['invoice']==_0x4d5bb9['invoice']&&_0x4a6d27[_0x3487d2(0x236)]==_0x4d5bb9[_0x3487d2(0x1e7)]){var _0x495fb9;_0x495fb9=_0x4d5bb9[_0x3487d2(0x20a)],_0x4d5bb9[_0x3487d2(0x22b)]=='S'&&(_0x495fb9=_0x4d5bb9[_0x3487d2(0x20a)]),_0x4a6d27[_0x3487d2(0x19f)]=_0x4a6d27[_0x3487d2(0x19f)]-_0x495fb9;}}else{if(_0x4a6d27[_0x3487d2(0x238)]==_0x4d5bb9['product_name']&&_0x4a6d27['floorlevel']==_0x4d5bb9['floorlevel']&&_0x4a6d27[_0x3487d2(0x203)]==_0x4d5bb9[_0x3487d2(0x203)]&&_0x4a6d27[_0x3487d2(0x1e1)]==_0x4d5bb9[_0x3487d2(0x1e1)]&&_0x4a6d27[_0x3487d2(0x1d1)]==_0x4d5bb9['bay']&&_0x4a6d27['rack']==_0x4d5bb9[_0x3487d2(0x1e8)]&&_0x4a6d27['storage']==_0x4d5bb9['storage']&&_0x4a6d27[_0x3487d2(0x1fa)]==_0x4d5bb9[_0x3487d2(0x1fa)]&&_0x4a6d27['batch_code']==_0x4d5bb9[_0x3487d2(0x243)]&&_0x4a6d27[_0x3487d2(0x191)]==_0x4d5bb9[_0x3487d2(0x191)]&&_0x4a6d27['invoice']==_0x4d5bb9[_0x3487d2(0x216)]&&_0x4a6d27[_0x3487d2(0x236)]==_0x4d5bb9['id_transaction_from']){console['log'](_0x4d5bb9);var _0x495fb9;_0x495fb9=_0x4d5bb9[_0x3487d2(0x20a)],_0x4d5bb9['prod_cat']=='S'&&(_0x495fb9=_0x4d5bb9[_0x3487d2(0x20a)]),_0x4a6d27[_0x3487d2(0x19f)]=_0x4a6d27[_0x3487d2(0x19f)]+_0x495fb9;}}});}return _0x1d8239;});Promise['all'](_0x52ea49)[_0x42327e(0x230)](async _0x46ad83=>{var _0x29fe6f=_0x42327e;try{for(const _0x2c0608 of _0x46ad83){await _0x2c0608[_0x29fe6f(0x20f)]();}_0x4cef7c['finalize']=_0x29fe6f(0x175);const _0x89f98d=await _0x4cef7c[_0x29fe6f(0x20f)](),_0x49ab39=await master_shop[_0x29fe6f(0x1a8)](),_0x216649=await email_settings['findOne'](),_0x294c6e=await supervisor_settings[_0x29fe6f(0x1a8)]();var _0xe36c00=_0x4cef7c['product'],_0xd7f9ce='',_0x1c0bcd;for(_0x1c0bcd in _0xe36c00){_0xd7f9ce+=_0x29fe6f(0x1cb)+_0x29fe6f(0x201)+_0xe36c00[_0x1c0bcd][_0x29fe6f(0x238)]+_0x29fe6f(0x1a9)+_0x29fe6f(0x201)+_0xe36c00[_0x1c0bcd][_0x29fe6f(0x212)]+_0x29fe6f(0x1a9)+_0x29fe6f(0x201)+_0xe36c00[_0x1c0bcd]['adjust_qty']+_0x29fe6f(0x1a9)+_0x29fe6f(0x201)+_0xe36c00[_0x1c0bcd][_0x29fe6f(0x1b3)]+_0x29fe6f(0x1a9)+_0x29fe6f(0x201)+_0xe36c00[_0x1c0bcd][_0x29fe6f(0x19b)]+_0x29fe6f(0x1a9)+_0x29fe6f(0x201)+_0x4cef7c['warehouse_name']+_0x29fe6f(0x1a9)+_0x29fe6f(0x201)+_0xe36c00[_0x1c0bcd][_0x29fe6f(0x1ca)]+_0x29fe6f(0x1a9)+_0x29fe6f(0x201)+_0xe36c00[_0x1c0bcd][_0x29fe6f(0x188)]+_0xe36c00[_0x1c0bcd][_0x29fe6f(0x1e8)]+_0xe36c00[_0x1c0bcd][_0x29fe6f(0x1d1)]+_0xe36c00[_0x1c0bcd][_0x29fe6f(0x1e1)]+_0xe36c00[_0x1c0bcd][_0x29fe6f(0x203)][0x0]+_0xe36c00[_0x1c0bcd][_0x29fe6f(0x1ad)]+_0x29fe6f(0x1a9),_0x29fe6f(0x249);}let _0x4b5274=nodemailer[_0x29fe6f(0x22c)]({'host':_0x216649[_0x29fe6f(0x204)],'port':Number(_0x216649[_0x29fe6f(0x1f7)]),'secure':![],'auth':{'user':_0x216649[_0x29fe6f(0x1da)],'pass':_0x216649[_0x29fe6f(0x16f)]}}),_0x46026a={'from':_0x216649[_0x29fe6f(0x1da)],'to':_0x294c6e[0x0][_0x29fe6f(0x1e0)],'subject':_0x29fe6f(0x1a7),'attachments':[{'filename':'Logo.png','path':__dirname+_0x29fe6f(0x23b)+_0x29fe6f(0x18c)+_0x49ab39[0x0][_0x29fe6f(0x189)],'cid':_0x29fe6f(0x20c)}],'html':_0x29fe6f(0x17c)+_0x29fe6f(0x224)+_0x29fe6f(0x1ce)+_0x29fe6f(0x1ef)+_0x29fe6f(0x1c8)+_0x29fe6f(0x1ef)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x29fe6f(0x214)+_0x29fe6f(0x1ef)+_0x29fe6f(0x1db)+_0x49ab39[0x0]['site_title']+_0x29fe6f(0x234)+_0x29fe6f(0x214)+_0x29fe6f(0x214)+_0x29fe6f(0x1d2)+_0x29fe6f(0x1ef)+_0x29fe6f(0x1a6)+_0x29fe6f(0x1dd)+_0x4cef7c['invoice']+'\x20'+_0x29fe6f(0x247)+_0x29fe6f(0x1d3)+_0x4cef7c[_0x29fe6f(0x1ba)]+'\x20'+_0x29fe6f(0x19e)+_0x29fe6f(0x1b1)+_0x29fe6f(0x214)+_0x29fe6f(0x202)+_0x29fe6f(0x22d)+_0x29fe6f(0x1cb)+_0x29fe6f(0x179)+_0x29fe6f(0x1f5)+_0x29fe6f(0x233)+_0x29fe6f(0x17b)+_0x29fe6f(0x1cd)+_0x29fe6f(0x18b)+_0x29fe6f(0x1d6)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Location\x20</th>'+_0x29fe6f(0x249)+_0x29fe6f(0x248)+_0x29fe6f(0x1af)+'\x20'+_0xd7f9ce+'\x20'+_0x29fe6f(0x185)+_0x29fe6f(0x1df)+_0x29fe6f(0x1ef)+_0x29fe6f(0x1f3)+_0x29fe6f(0x16d)+_0x49ab39[0x0][_0x29fe6f(0x1b9)]+'</h5>'+_0x29fe6f(0x214)+_0x29fe6f(0x214)+_0x29fe6f(0x23e)};_0x4b5274['sendMail'](_0x46026a,function(_0x5d8a7b,_0x5e2747){var _0x2f8bfe=_0x29fe6f;_0x5d8a7b?(console[_0x2f8bfe(0x1bb)](_0x5d8a7b),console[_0x2f8bfe(0x1bb)](_0x2f8bfe(0x1f1))):console[_0x2f8bfe(0x1bb)](_0x2f8bfe(0x1de));}),_0x25f243[_0x29fe6f(0x1b6)]('success',_0x29fe6f(0x208)),_0x4fe13e[_0x29fe6f(0x1cc)](_0x29fe6f(0x231)+_0x89f98d[_0x29fe6f(0x236)]);}catch(_0x4a8802){console[_0x29fe6f(0x177)](_0x4a8802),_0x4fe13e[_0x29fe6f(0x184)](0x1f4)[_0x29fe6f(0x1d5)]({'error':_0x29fe6f(0x217)});}})[_0x42327e(0x1cf)](_0x5a97a8=>{var _0x91dbb5=_0x42327e;console[_0x91dbb5(0x177)](_0x5a97a8),_0x4fe13e[_0x91dbb5(0x184)](0x1f4)[_0x91dbb5(0x1d5)]({'error':_0x91dbb5(0x21a)});});}catch(_0x4a34ce){console[_0x42327e(0x1bb)](_0x4a34ce),_0x4fe13e[_0x42327e(0x184)](0xc8)[_0x42327e(0x1d5)]({'message':_0x4a34ce[_0x42327e(0x1eb)]});}}),router[a0_0xad32b5(0x1e6)](a0_0xad32b5(0x19d),auth,async(_0x45baad,_0x3bbf3a)=>{var _0x2f214e=a0_0xad32b5;try{const {username:_0x12db2e,email:_0x130752,role:_0x18d4b9}=_0x45baad[_0x2f214e(0x180)],_0x5aa73e=_0x45baad[_0x2f214e(0x180)],_0x49ec8a=await profile[_0x2f214e(0x1c7)]({'email':_0x5aa73e['email']}),_0xa4d9ef=await master_shop[_0x2f214e(0x1a8)](),_0x507197=_0x45baad[_0x2f214e(0x21c)]['id'],_0x27cdc3=await adjustment['findById']({'_id':_0x507197}),_0x5c04fa=await purchases['aggregate']([{'$match':{'warehouse_name':_0x27cdc3['warehouse_name']}},{'$unwind':_0x2f214e(0x240)},{'$group':{'_id':_0x2f214e(0x16b)}}]),_0x274c55=await product[_0x2f214e(0x1a8)]({}),_0x1510dd=await warehouse[_0x2f214e(0x1bf)]([{'$match':{'name':_0x27cdc3[_0x2f214e(0x228)]}},{'$unwind':_0x2f214e(0x20e)},{'$group':{'_id':_0x2f214e(0x1d9),'name':{'$first':_0x2f214e(0x1c9)},'product_stock':{'$first':_0x2f214e(0x21e)},'bay':{'$first':_0x2f214e(0x239)},'bin':{'$first':_0x2f214e(0x211)},'type':{'$first':_0x2f214e(0x241)},'floorlevel':{'$first':_0x2f214e(0x181)},'primary_code':{'$first':_0x2f214e(0x21b)},'secondary_code':{'$first':_0x2f214e(0x1d0)},'product_code':{'$first':_0x2f214e(0x1a0)},'storage':{'$first':_0x2f214e(0x22a)},'rack':{'$first':_0x2f214e(0x229)},'maxPerUnit':{'$first':_0x2f214e(0x1b4)},'expiry_date':{'$first':_0x2f214e(0x1e4)},'production_date':{'$first':_0x2f214e(0x1b7)},'batch_code':{'$first':_0x2f214e(0x17a)},'room':{'$first':_0x2f214e(0x20d)}}}]);let _0x4d7537;if(_0x5aa73e[_0x2f214e(0x244)]==_0x2f214e(0x213)){const _0x5c74cd=await staff['findOne']({'email':_0x5aa73e[_0x2f214e(0x1da)]});_0x4d7537=await warehouse[_0x2f214e(0x1bf)]([{'$match':{'status':_0x2f214e(0x187),'name':_0x5c74cd[_0x2f214e(0x226)],'warehouse_category':_0x2f214e(0x221),'name':{'$ne':_0x2f214e(0x19a)}}},{'$group':{'_id':_0x2f214e(0x1aa),'name':{'$first':_0x2f214e(0x1aa)}}}]);}else _0x4d7537=await warehouse[_0x2f214e(0x1bf)]([{'$match':{'status':'Enabled','warehouse_category':_0x2f214e(0x221),'name':{'$ne':_0x2f214e(0x19a)}}},{'$group':{'_id':'$name','name':{'$first':_0x2f214e(0x1aa)}}}]);if(_0xa4d9ef[0x0]['language']==_0x2f214e(0x1fd)){var _0x36d637=users[_0x2f214e(0x16e)];console[_0x2f214e(0x1bb)](_0x36d637);}else{if(_0xa4d9ef[0x0][_0x2f214e(0x1ee)]==_0x2f214e(0x1b2))var _0x36d637=users[_0x2f214e(0x1b2)];else{if(_0xa4d9ef[0x0]['language']==_0x2f214e(0x1bc))var _0x36d637=users['German'];else{if(_0xa4d9ef[0x0][_0x2f214e(0x1ee)]=='Spanish')var _0x36d637=users['Spanish'];else{if(_0xa4d9ef[0x0]['language']==_0x2f214e(0x220))var _0x36d637=users[_0x2f214e(0x220)];else{if(_0xa4d9ef[0x0]['language']==_0x2f214e(0x1f8))var _0x36d637=users[_0x2f214e(0x19c)];else{if(_0xa4d9ef[0x0][_0x2f214e(0x1ee)]==_0x2f214e(0x23a))var _0x36d637=users[_0x2f214e(0x23a)];else{if(_0xa4d9ef[0x0][_0x2f214e(0x1ee)]==_0x2f214e(0x1bd))var _0x36d637=users[_0x2f214e(0x205)];}}}}}}}_0x3bbf3a['render']('edit_adjustment',{'success':_0x45baad[_0x2f214e(0x1b6)](_0x2f214e(0x1a5)),'errors':_0x45baad[_0x2f214e(0x1b6)](_0x2f214e(0x23d)),'role':_0x5aa73e,'profile':_0x49ec8a,'adjustment':_0x27cdc3,'stock':_0x1510dd,'master_shop':_0xa4d9ef,'warehouse_name':_0x5c04fa,'unit':_0x274c55,'language':_0x36d637,'warehouse':_0x4d7537});}catch(_0x2ffe95){console[_0x2f214e(0x1bb)](_0x2ffe95),_0x3bbf3a['status'](0xc8)[_0x2f214e(0x1d5)]({'message':_0x2ffe95[_0x2f214e(0x1eb)]});}}),router[a0_0xad32b5(0x174)](a0_0xad32b5(0x19d),auth,async(_0x13e19a,_0x34eb46)=>{var _0xbd81df=a0_0xad32b5;try{const _0x638d08=_0x13e19a[_0xbd81df(0x21c)]['id'],_0x472d6f=await adjustment[_0xbd81df(0x209)]({'_id':_0x638d08}),_0x49ba33=await warehouse['findOne']({'name':_0x472d6f['warehouse_name'],'room':_0x472d6f[_0xbd81df(0x1a1)]}),{warehouse_name:_0x2fffa6,date:_0x4c9941,prod_name:_0x2dca79,level:_0x5680ec,isle:_0x2e3670,pallet:_0x2cf693,stock:_0xe156bc,types:_0x3ea09f,adjust_qty:_0x529c22,new_adjust_qty:_0x518831,note:_0x177d43,Room_name:_0x26dd5a,invoice:_0x3017a4,JO_number:_0x3a185d,expiry_date:_0x1fe18f}=_0x13e19a[_0xbd81df(0x190)];if(typeof _0x2dca79==_0xbd81df(0x183))var _0x502d5c=[_0x13e19a['body'][_0xbd81df(0x232)]],_0xb9476d=[_0x13e19a['body'][_0xbd81df(0x1f0)]],_0x1eab76=[_0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x178)]],_0x175159=[_0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x206)]],_0x423288=[_0x13e19a[_0xbd81df(0x190)]['New_Qty_Converted_adj']],_0x185f47=[_0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x1a3)]],_0x4c8ab2=[_0x13e19a['body'][_0xbd81df(0x1ea)]],_0x36ad47=[_0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x235)]],_0x4c5456=[_0x13e19a['body'][_0xbd81df(0x18a)]],_0x916e48=[_0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x243)]],_0x319529=[_0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x1fa)]],_0x4dd0fb=[_0x13e19a['body'][_0xbd81df(0x182)]],_0x444be6=[_0x13e19a[_0xbd81df(0x190)]['production_date']],_0x4034bf=[_0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x22b)]],_0x577c05=[_0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x222)]],_0x48b9ed=[_0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x198)]],_0x17cf4a=[_0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x1ed)]];else var _0x502d5c=[..._0x13e19a['body'][_0xbd81df(0x232)]],_0xb9476d=[..._0x13e19a[_0xbd81df(0x190)]['level']],_0x1eab76=[..._0x13e19a['body']['stock']],_0x175159=[..._0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x206)]],_0x423288=[..._0x13e19a['body'][_0xbd81df(0x172)]],_0x185f47=[..._0x13e19a[_0xbd81df(0x190)]['New_Qty_Converted']],_0x4c8ab2=[..._0x13e19a[_0xbd81df(0x190)]['unit']],_0x36ad47=[..._0x13e19a['body'][_0xbd81df(0x235)]],_0x4c5456=[..._0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x18a)]],_0x916e48=[..._0x13e19a[_0xbd81df(0x190)]['batch_code']],_0x319529=[..._0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x1fa)]],_0x4dd0fb=[..._0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x182)]],_0x444be6=[..._0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x191)]],_0x4034bf=[..._0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x22b)]],_0x577c05=[..._0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x222)]],_0x48b9ed=[..._0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x198)]],_0x17cf4a=[..._0x13e19a[_0xbd81df(0x190)][_0xbd81df(0x1ed)]];const _0x9ae835=_0x502d5c[_0xbd81df(0x18f)](_0x11d69a=>{return _0x11d69a={'product_name':_0x11d69a};});_0xb9476d[_0xbd81df(0x199)]((_0x48b44b,_0x168ec1)=>{var _0x527786=_0xbd81df;_0x577c05[_0x527786(0x199)]((_0x3e7232,_0x3cac7c)=>{var _0x3cb16e=_0x527786;if(_0x3e7232==_0x3cb16e(0x1f9)&&_0x168ec1==_0x3cac7c){var _0x2f0f83=_0x48b44b[_0x3cb16e(0x225)](0x3);_0x9ae835[_0x168ec1]['storage']=_0x48b44b[0x0],_0x9ae835[_0x168ec1]['rack']=_0x48b44b[0x1],_0x9ae835[_0x168ec1]['bay']=0x0,_0x9ae835[_0x168ec1][_0x3cb16e(0x1e1)]=0x0,_0x9ae835[_0x168ec1]['type']=_0x3cb16e(0x218),_0x9ae835[_0x168ec1][_0x3cb16e(0x1ad)]=_0x2f0f83;}else{if(_0x3e7232==_0x3cb16e(0x1dc)&&_0x168ec1==_0x3cac7c){var _0x2f0f83=_0x48b44b[_0x3cb16e(0x225)](0x3);_0x9ae835[_0x168ec1]['storage']=_0x48b44b[0x0],_0x9ae835[_0x168ec1][_0x3cb16e(0x1e8)]=_0x48b44b[0x1],_0x9ae835[_0x168ec1][_0x3cb16e(0x1d1)]=0x0,_0x9ae835[_0x168ec1][_0x3cb16e(0x1e1)]=0x0,_0x9ae835[_0x168ec1][_0x3cb16e(0x203)]='Floor',_0x9ae835[_0x168ec1][_0x3cb16e(0x1ad)]=_0x48b44b[0x5];}else{if(_0x168ec1==_0x3cac7c){var _0x422dd5;if(_0x48b44b[0x4]=='L')_0x422dd5=_0x3cb16e(0x195);else _0x48b44b[0x4]=='F'&&(_0x422dd5=_0x3cb16e(0x218));_0x9ae835[_0x168ec1][_0x3cb16e(0x188)]=_0x48b44b[0x0],_0x9ae835[_0x168ec1][_0x3cb16e(0x1e8)]=_0x48b44b[0x1],_0x9ae835[_0x168ec1][_0x3cb16e(0x1d1)]=_0x48b44b[0x2],_0x9ae835[_0x168ec1][_0x3cb16e(0x1e1)]=_0x48b44b[0x3],_0x9ae835[_0x168ec1][_0x3cb16e(0x203)]=_0x422dd5,_0x9ae835[_0x168ec1]['floorlevel']=_0x48b44b[0x5];}}}});}),_0x1eab76[_0xbd81df(0x199)]((_0x4f2919,_0x42d7de)=>{var _0x20e0dc=_0xbd81df;_0x9ae835[_0x42d7de][_0x20e0dc(0x1ae)]=_0x4f2919;}),_0x175159['forEach']((_0x2fb924,_0x543561)=>{_0x9ae835[_0x543561]['types']=_0x2fb924;}),_0x423288[_0xbd81df(0x199)]((_0x13c65d,_0x356759)=>{var _0x44ff92=_0xbd81df;_0x9ae835[_0x356759][_0x44ff92(0x20a)]=_0x13c65d;}),_0x185f47[_0xbd81df(0x199)]((_0x3d9d7e,_0x37cd6b)=>{_0x9ae835[_0x37cd6b]['new_adjust_qty']=_0x3d9d7e;}),_0x4c8ab2[_0xbd81df(0x199)]((_0x3b3e85,_0x46593b)=>{var _0x3003d9=_0xbd81df;_0x9ae835[_0x46593b][_0x3003d9(0x1b3)]=_0x3b3e85;}),_0x36ad47[_0xbd81df(0x199)]((_0x505140,_0x5e5ebb)=>{_0x9ae835[_0x5e5ebb]['secondary_unit']=_0x505140;}),_0x4c5456[_0xbd81df(0x199)]((_0x52dfe2,_0x27b742)=>{var _0x42df6f=_0xbd81df;_0x9ae835[_0x27b742][_0x42df6f(0x212)]=_0x52dfe2;}),_0x916e48['forEach']((_0x5a56f2,_0x4ec364)=>{var _0x5d1a74=_0xbd81df;_0x9ae835[_0x4ec364][_0x5d1a74(0x243)]=_0x5a56f2;}),_0x319529['forEach']((_0x2d097a,_0x2d4e27)=>{var _0x4470a3=_0xbd81df;_0x9ae835[_0x2d4e27][_0x4470a3(0x1fa)]=_0x2d097a;}),_0x4dd0fb[_0xbd81df(0x199)]((_0x37a192,_0x4aebc1)=>{var _0x4232e2=_0xbd81df;_0x9ae835[_0x4aebc1][_0x4232e2(0x1c6)]=_0x37a192;}),_0x444be6[_0xbd81df(0x199)]((_0x1cda3e,_0x3819fd)=>{_0x9ae835[_0x3819fd]['production_date']=_0x1cda3e;}),_0x4034bf[_0xbd81df(0x199)]((_0x1080ca,_0x994d64)=>{var _0xfdce7c=_0xbd81df;_0x9ae835[_0x994d64][_0xfdce7c(0x22b)]=_0x1080ca;}),_0x577c05['forEach']((_0x247b79,_0x4afd18)=>{var _0x1f970b=_0xbd81df;_0x9ae835[_0x4afd18][_0x1f970b(0x1ca)]=_0x247b79;}),_0x48b9ed[_0xbd81df(0x199)]((_0x376c85,_0x2544e2)=>{var _0x41d0d9=_0xbd81df;_0x9ae835[_0x2544e2][_0x41d0d9(0x18d)]=_0x376c85;}),_0x17cf4a['forEach']((_0x48075a,_0x4105a5)=>{_0x9ae835[_0x4105a5]['secondary_code']=_0x48075a;});const _0x278bd9=_0x9ae835[_0xbd81df(0x1b0)](_0x451676=>_0x451676[_0xbd81df(0x20a)]!=='0'&&_0x451676[_0xbd81df(0x20a)]!=='');var _0x292270=0x0;_0x278bd9[_0xbd81df(0x199)](_0x3d89a5=>{var _0x51cb5c=_0xbd81df;console[_0x51cb5c(0x1bb)](_0x51cb5c(0x1fb),_0x3d89a5),parseInt(_0x3d89a5[_0x51cb5c(0x20a)])<=0x0&&_0x292270++;});if(_0x292270!=0x0)return _0x13e19a['flash'](_0xbd81df(0x23d),_0xbd81df(0x1ec)),_0x34eb46['redirect']('back');_0x472d6f[_0xbd81df(0x228)]=_0x2fffa6,_0x472d6f[_0xbd81df(0x1ba)]=_0x4c9941,_0x472d6f['product']=_0x278bd9,_0x472d6f[_0xbd81df(0x1c2)]=_0x177d43,_0x472d6f['invoice']=_0x3017a4,_0x472d6f['isAllowEdit']=_0xbd81df(0x1c4);const _0x531b16=await _0x472d6f[_0xbd81df(0x20f)]();_0x13e19a['flash'](_0xbd81df(0x1a5),_0xbd81df(0x1ab)),_0x34eb46['redirect'](_0xbd81df(0x1c5));}catch(_0x5641ea){console['log'](_0x5641ea);}}),router['post'](a0_0xad32b5(0x1b5),async(_0x4f5fe4,_0x3a445b)=>{var _0x3b8e9c=a0_0xad32b5;const {primary_code:_0x11dd91,warehouse_data:_0xb830b3,rooms_data:_0x5caba4,Roomslist:_0x15bb19}=_0x4f5fe4[_0x3b8e9c(0x190)],_0x4fcb40=_0x15bb19[_0x3b8e9c(0x192)](','),_0x2b8f41=[];async function _0x38d6cc(_0x27bec4){var _0x4eb768=_0x3b8e9c;const _0x4615be=await warehouse[_0x4eb768(0x1bf)]([{'$match':{'name':_0xb830b3,'room':_0x27bec4}},{'$unwind':_0x4eb768(0x20e)},{'$match':{'product_details.primary_code':_0x11dd91}},{'$group':{'_id':_0x4eb768(0x1d9),'name':{'$first':_0x4eb768(0x1c9)},'product_stock':{'$first':_0x4eb768(0x21e)},'primary_code':{'$first':_0x4eb768(0x21b)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x4eb768(0x1a0)},'level':{'$first':_0x4eb768(0x239)},'isle':{'$first':'$product_details.bin'},'type':{'$first':_0x4eb768(0x241)},'pallet':{'$first':_0x4eb768(0x181)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x4eb768(0x21f)},'storage':{'$first':_0x4eb768(0x22a)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x4eb768(0x1e4)},'production_date':{'$first':'$product_details.production_date'},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'batch_code':{'$first':'$product_details.batch_code'},'product_cat':{'$first':_0x4eb768(0x17e)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':'$room'},'invoice':{'$first':_0x4eb768(0x1e9)}}}]),_0x2a7e18=await warehouse[_0x4eb768(0x1bf)]([{'$match':{'name':_0xb830b3,'room':_0x27bec4}},{'$unwind':_0x4eb768(0x20e)},{'$match':{'product_details.secondary_code':_0x11dd91}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x4eb768(0x1c9)},'product_stock':{'$first':_0x4eb768(0x21e)},'primary_code':{'$first':_0x4eb768(0x21b)},'secondary_code':{'$first':_0x4eb768(0x1d0)},'product_code':{'$first':_0x4eb768(0x1a0)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x4eb768(0x211)},'type':{'$first':_0x4eb768(0x241)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0x4eb768(0x22a)},'rack':{'$first':_0x4eb768(0x229)},'expiry_date':{'$first':_0x4eb768(0x1e4)},'production_date':{'$first':_0x4eb768(0x1b7)},'maxPerUnit':{'$first':_0x4eb768(0x1b4)},'batch_code':{'$first':_0x4eb768(0x17a)},'product_cat':{'$first':_0x4eb768(0x17e)},'computeUsed':{'$first':'S'},'roomNamed':{'$first':'$room'}}}]);if(_0x4615be[_0x4eb768(0x1e2)]>0x0)_0x2b8f41[_0x4eb768(0x17f)](_0x4615be);else _0x2a7e18['length']>0x0&&_0x2b8f41[_0x4eb768(0x17f)](_0x2a7e18);}const _0x3c9ca2=_0x4fcb40['map'](_0x2cbd38=>_0x38d6cc(_0x2cbd38));await Promise[_0x3b8e9c(0x171)](_0x3c9ca2),_0x3a445b[_0x3b8e9c(0x1d5)](_0x2b8f41);}),router[a0_0xad32b5(0x174)](a0_0xad32b5(0x1c0),async(_0x427238,_0x11df72)=>{var _0x4f63db=a0_0xad32b5;const {primaryCode:_0x33ba68,secondaryCode:_0xb4e18f,productCode:_0x591d1d,level:_0x1b30c8,isle:_0x1dbf48,pallet:_0x5d5103,warehouses:_0x181004,room:_0x1ffd23}=_0x427238[_0x4f63db(0x190)];try{const _0x12ad90=await warehouse[_0x4f63db(0x1bf)]([{'$match':{'name':_0x181004,'room':_0x1ffd23}},{'$unwind':_0x4f63db(0x20e)},{'$match':{'product_details.level':parseInt(_0x1b30c8),'product_details.isle':_0x1dbf48,'product_details.pallet':parseInt(_0x5d5103)}},{'$group':{'_id':_0x4f63db(0x1d9),'name':{'$first':_0x4f63db(0x1c9)},'product_stock':{'$first':_0x4f63db(0x21e)},'level':{'$first':_0x4f63db(0x1e3)},'isle':{'$first':_0x4f63db(0x22e)},'pallet':{'$first':_0x4f63db(0x219)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x11df72[_0x4f63db(0x184)](0xc8)[_0x4f63db(0x1d5)](_0x12ad90);}catch(_0x112ba3){_0x11df72[_0x4f63db(0x184)](0x194)['json']({'message':_0x112ba3[_0x4f63db(0x1eb)]});}}),module[a0_0xad32b5(0x194)]=router;function a0_0x20cb(){var _0x1e7bc0=['<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Warehouse</th>','/upload/','primary_code','../models/all_models','map','body','production_date','split','133664bRvwDy','exports','Level','/view','$product.room_names','prime1','forEach','Return\x20Goods','secondary_unit','Portuguese','/view/:id','</span>','product_stock','$product_details.product_code','room','master','New_Qty_Converted','adjustment','success','<h5\x20style=\x22text-align:\x20left;\x22>','Adjustment\x20Mail','find','</td>','$name','adjustment\x20data\x20update\x20successfully','/view/add_adjustment','floorlevel','stockBefore','<tbody\x20style=\x22text-align:\x20center;\x22>','filter','</h5>','Hindi','unit','$product_details.maxPerUnit','/barcode_scanner','flash','$product_details.production_date','Spanish','site_title','date','log','German','Arabic\x20(ae)','product','aggregate','/CheckingWarehouse','/preview/:id','note','125gaAMKU','False','/adjustment/view','maxperunit','findOne','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','$product_details.product_name','room_names','<tr>','redirect','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Secondary\x20Unit\x20</th>','</head><body>','catch','$product_details.secondary_code','bay','<hr\x20class=\x22my-3\x22>','\x20Order\x20Date\x20:\x20','10XifhwA','json','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Room</th>','add_adjustment','ADJ-','$product_details._id','email','<h2>\x20','Shelves','\x20Order\x20Number\x20:\x20','Email\x20sent\x20successfully','</table>','RMSEmail','bin','length','$product_details.level','$product_details.expiry_date','express','get','id_transaction_from','rack','$product_details.invoice','Primary_Units','message','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','second1','language','<div>','level','Error\x20Occurs','$warehouse_name','<strong>\x20Regards\x20</strong>','$_id','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','render','port','Portuguese\x20(BR)','Receiving\x20Area','expiry_date','foreach\x20newproduct','prod_invoice','English\x20(US)','back','1552882HYPTGa','5186136FArLkm','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','<table\x20style=\x22width:\x20100%\x20!important;\x22>','type','host','Arabic','types','minus','adjustment\x20Finalized\x20successfully','findById','adjust_qty','new_adjust_qty','logo','$room','$product_details','save','/adjustment/preview/','$product_details.bin','product_code','staff','</div>','$date','invoice','An\x20error\x20occurred\x20while\x20saving\x20data.','Floor','$product_details.pallet','An\x20error\x20occurred.','$product_details.primary_code','params','42919407oKjNCj','$product_details.product_stock','$product_details.secondary_unit','French','Raw\x20Materials','Rooms','1356576iNEZKO','<html><head><title></title>','slice','warehouse','id_transaction','warehouse_name','$product_details.rack','$product_details.storage','prod_cat','createTransport','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','$product_details.isle','2880366jQZEAA','then','/picking_list/PDF_adjustment_rm/','prod_name','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','\x20</h2>','Secondary_units','_id','$invoice','product_name','$product_details.bay','Chinese','/../public','There\x27s\x20a\x20error\x20in\x20this\x20transaction','errors','</body></html>','floor','$product','$product_details.type','random','batch_code','role','11813403iblKCf','product_details','<span\x20style=\x22float:\x20right;\x22>','</thead>','</tr>','$product.product_name','../public/language/languages.json','<h5>','English','password','$finalize','all','New_Qty_Converted_adj','Ambient','post','True','6aHYiSS','error','stock','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','$product_details.batch_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','<!DOCTYPE\x20html>','Return\x20Rooms','$product_details.product_cat','push','user','$product_details.floorlevel','max_per_unit','string','status','</tbody>','Router','Enabled','storage','image','prod_code'];a0_0x20cb=function(){return _0x1e7bc0;};return a0_0x20cb();}