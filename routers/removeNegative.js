function a0_0x174f(){const _0x47ceab=['$product.id_transaction_from','/negative','modifiedCount','status','14800005047429','_id','$product.invoice','$sale_product._id','monitor','$$invoice','$to_warehouse','$product.product_code','$product_details.product_name','$sale_product.product_code','260610YyBTGT','$product','data_transfer','push','all','aggregate','data_adjustment','2769954elAQGQ','9566IJFLEa','valueOf','../../models/all_models','$product.product_name','log','$sale_product.invoice','table\x20page','INCF-52068316','$room','updateMany','warehouse_data','/join','get','86BVMZom','message','\x20documents\x20updated','$invoice','$sale_product','$product.new_adjust_qty','$product_details._id','errors','Router','$product.to_quantity','$product._id','7jOKZSV','map','$product_details.invoice','26630JJQQiF','712UYOwQk','$sale_product.id_transaction_from','5376288pRRCCv','4875756OqTJnC','length','7456842mcpcDc','$product.room_names','flash','$product_details','data_sales','json','exports','/checking','$warehouse_name','warehouses','invoice','success','$product.id_transaction_id','$product_details.product_code'];a0_0x174f=function(){return _0x47ceab;};return a0_0x174f();}const a0_0x485a5a=a0_0x4b6c;(function(_0x2ed530,_0x44361c){const _0x50353b=a0_0x4b6c,_0x11a4ed=_0x2ed530();while(!![]){try{const _0x5a7556=parseInt(_0x50353b(0x81))/0x1*(-parseInt(_0x50353b(0x74))/0x2)+parseInt(_0x50353b(0x73))/0x3+parseInt(_0x50353b(0x90))/0x4*(parseInt(_0x50353b(0x8f))/0x5)+-parseInt(_0x50353b(0x93))/0x6*(parseInt(_0x50353b(0x8c))/0x7)+parseInt(_0x50353b(0x92))/0x8+-parseInt(_0x50353b(0x95))/0x9+parseInt(_0x50353b(0x6c))/0xa;if(_0x5a7556===_0x44361c)break;else _0x11a4ed['push'](_0x11a4ed['shift']());}catch(_0x1a2202){_0x11a4ed['push'](_0x11a4ed['shift']());}}}(a0_0x174f,0x7e34d));const express=require('express'),app=express(),router=express[a0_0x485a5a(0x89)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x485a5a(0x76));function a0_0x4b6c(_0x31e8c9,_0x3cf90c){const _0x174f8a=a0_0x174f();return a0_0x4b6c=function(_0x4b6c7e,_0x3ec712){_0x4b6c7e=_0x4b6c7e-0x6b;let _0x3da8ef=_0x174f8a[_0x4b6c7e];return _0x3da8ef;},a0_0x4b6c(_0x31e8c9,_0x3cf90c);}router[a0_0x485a5a(0x80)](a0_0x485a5a(0xa4),async(_0x35baf3,_0x158c66)=>{const _0x24700b=a0_0x485a5a;try{const _0x2a2505=await warehouse[_0x24700b(0x7d)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x158c66[_0x24700b(0x9a)]({'status':_0x2a2505[_0x24700b(0xa5)]+_0x24700b(0x83)});}catch(_0x462fe4){console[_0x24700b(0x78)](_0x24700b(0x7a),_0x462fe4),_0x158c66[_0x24700b(0xa6)](0xc8)[_0x24700b(0x9a)]({'message':_0x462fe4[_0x24700b(0x82)]});}}),router['get'](a0_0x485a5a(0x9c),async(_0x4959a4,_0x57770a)=>{const _0x2d8927=a0_0x485a5a;try{const _0x30ddc9=await warehouse[_0x2d8927(0x71)]([{'$unwind':_0x2d8927(0x98)},{'$match':{'product_details.invoice':_0x2d8927(0x7b),'product_details.primary_code':_0x2d8927(0xa7)}},{'$group':{'_id':{'name':'$name','room':_0x2d8927(0x7c)},'products':{'$push':_0x2d8927(0x98)}}}]);_0x57770a[_0x2d8927(0x9a)](_0x30ddc9);}catch(_0x1f6bae){console['log'](_0x2d8927(0x7a),_0x1f6bae),_0x57770a[_0x2d8927(0xa6)](0xc8)['json']({'message':_0x1f6bae[_0x2d8927(0x82)]});}}),router[a0_0x485a5a(0x80)]('/warehouse_monitor',async(_0x4a6ed9,_0x22949a)=>{const _0x43b333=a0_0x485a5a;_0x22949a['render'](_0x43b333(0xab),{'success':_0x4a6ed9[_0x43b333(0x97)](_0x43b333(0xa0)),'errors':_0x4a6ed9[_0x43b333(0x97)](_0x43b333(0x88))});}),router[a0_0x485a5a(0x80)](a0_0x485a5a(0x7f),async(_0x3dfbf1,_0x3b5302)=>{const _0x47b787=a0_0x485a5a;var _0x3de0b9=await purchases[_0x47b787(0x71)]([{'$lookup':{'from':_0x47b787(0x9e),'let':{'invoice':_0x47b787(0x84)},'pipeline':[{'$unwind':_0x47b787(0x98)},{'$match':{'$expr':{'$eq':[_0x47b787(0xac),_0x47b787(0x8e)]}}},{'$project':{'_id':_0x47b787(0x87),'product_name':_0x47b787(0xaf),'product_code':_0x47b787(0xa2),'quantity_available':'$product_details.product_stock','warehouse_name':'$name','warehouse_room':_0x47b787(0x7c),'invoice':_0x47b787(0x8e)}}],'as':_0x47b787(0x7e)}}]);_0x3de0b9[_0x47b787(0x99)]={},await Promise['all'](_0x3de0b9[_0x47b787(0x8d)](async _0x37ba12=>{const _0x2cb8d4=_0x47b787;_0x3de0b9[_0x2cb8d4(0x99)][_0x37ba12[_0x2cb8d4(0x9f)]]=[],await Promise['all'](_0x37ba12[_0x2cb8d4(0x7e)]['map'](async _0x3bb694=>{const _0x481722=_0x2cb8d4,_0x381031=await sales[_0x481722(0x71)]([{'$unwind':_0x481722(0x85)},{'$match':{'sale_product.id_transaction_from':_0x3bb694[_0x481722(0xa8)][_0x481722(0x75)](),'sale_product.invoice':_0x3bb694[_0x481722(0x9f)]}},{'$project':{'_id':_0x481722(0xaa),'product_name':'$sale_product.product_name','product_code':_0x481722(0x6b),'quantity_available':'$sale_product.quantity','warehouse_name':_0x481722(0x9d),'warehouse_room':'$sale_product.room_name','product_invoice':_0x481722(0x79),'invoice':'$invoice','id_transaction_from':_0x481722(0x91)}}]);_0x381031['length']>0x0&&_0x3de0b9[_0x481722(0x99)][_0x37ba12[_0x481722(0x9f)]][_0x481722(0x6f)](..._0x381031);}));})),_0x3de0b9[_0x47b787(0x99)]=_0x3de0b9[_0x47b787(0x99)],_0x3de0b9[_0x47b787(0x72)]={},await Promise[_0x47b787(0x70)](_0x3de0b9['map'](async _0x9d0887=>{const _0x8ad410=_0x47b787;_0x3de0b9[_0x8ad410(0x72)][_0x9d0887[_0x8ad410(0x9f)]]=[],await Promise['all'](_0x9d0887[_0x8ad410(0x7e)]['map'](async _0x949331=>{const _0x1d64dc=_0x8ad410,_0xeafad=await adjustment[_0x1d64dc(0x71)]([{'$unwind':_0x1d64dc(0x6d)},{'$match':{'product.id_transaction_from':_0x949331[_0x1d64dc(0xa8)][_0x1d64dc(0x75)](),'product.invoice':_0x949331[_0x1d64dc(0x9f)]}},{'$project':{'_id':_0x1d64dc(0x8b),'product_name':_0x1d64dc(0x77),'product_code':'$product.product_code','quantity_available':_0x1d64dc(0x86),'warehouse_name':_0x1d64dc(0x9d),'warehouse_room':'$product.room_names','product_invoice':_0x1d64dc(0xa9),'invoice':_0x1d64dc(0x84),'id_transaction_from':_0x1d64dc(0xa3)}}]);_0xeafad[_0x1d64dc(0x94)]>0x0&&_0x3de0b9[_0x1d64dc(0x72)][_0x9d0887['invoice']][_0x1d64dc(0x6f)](..._0xeafad);}));})),_0x3de0b9[_0x47b787(0x6e)]={},await Promise[_0x47b787(0x70)](_0x3de0b9[_0x47b787(0x8d)](async _0x2564c2=>{const _0x3efae1=_0x47b787;_0x3de0b9[_0x3efae1(0x6e)][_0x2564c2['invoice']]=[],await Promise[_0x3efae1(0x70)](_0x2564c2[_0x3efae1(0x7e)][_0x3efae1(0x8d)](async _0x4de2f9=>{const _0x1ab63a=_0x3efae1,_0x3f90ae=await transfers[_0x1ab63a(0x71)]([{'$unwind':_0x1ab63a(0x6d)},{'$match':{'product.id_transaction_id':_0x4de2f9[_0x1ab63a(0xa8)][_0x1ab63a(0x75)](),'product.To_invoice':_0x4de2f9[_0x1ab63a(0x9f)]}},{'$project':{'_id':_0x1ab63a(0x8b),'product_name':'$product.product_name','product_code':_0x1ab63a(0xae),'quantity_available':_0x1ab63a(0x8a),'warehouse_name':_0x1ab63a(0xad),'warehouse_room':_0x1ab63a(0x96),'product_invoice':'$product.to_room_name','invoice':_0x1ab63a(0x84),'id_transaction_id':_0x1ab63a(0xa1)}}]);console[_0x1ab63a(0x78)](_0x3f90ae),_0x3f90ae['length']>0x0&&_0x3de0b9['data_transfer'][_0x2564c2[_0x1ab63a(0x9f)]]['push'](..._0x3f90ae);}));})),_0x3b5302[_0x47b787(0x9a)]({'purchases_warehouse':_0x3de0b9,'data_sales':_0x3de0b9[_0x47b787(0x99)],'data_adjustment':_0x3de0b9[_0x47b787(0x72)],'data_transfer':_0x3de0b9[_0x47b787(0x6e)]});}),module[a0_0x485a5a(0x9b)]=router;