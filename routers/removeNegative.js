function a0_0xaa3f(){const _0x4e8e9a=['$product.product_name','$to_warehouse','aggregate','push','16zABfeK','warehouse_data','all','data_sales','$product_details.product_code','message','Router','warehouses','flash','$sale_product.product_code','$product_details.invoice','$product.id_transaction_from','$product_details.product_name','$room','data_adjustment','6dCdHOU','$product.room_names','log','length','2172TdWttb','$product.to_room_name','status','2212731xuBdiM','$invoice','$product.id_transaction_id','4ahCnJs','1169674KoBWGZ','30xlcqhJ','$sale_product.id_transaction_from','render','$product_details.product_stock','$sale_product.invoice','modifiedCount','$sale_product.room_name','$sale_product.product_name','success','\x20documents\x20updated','_id','1850592WjyPTI','$product.product_code','exports','invoice','335665VnmYTb','$sale_product.quantity','419XblZWi','errors','$warehouse_name','$sale_product','get','monitor','express','/warehouse_monitor','table\x20page','$name','$product.new_adjust_qty','/negative','valueOf','INCF-52068316','48062keTPui','906441ckEGBQ','$product.to_quantity','data_transfer','$product.invoice','$$invoice','map','$product','json','$product_details','/checking','updateMany'];a0_0xaa3f=function(){return _0x4e8e9a;};return a0_0xaa3f();}const a0_0x18ce04=a0_0x2fa0;(function(_0x302833,_0x477426){const _0x11286a=a0_0x2fa0,_0x5e1168=_0x302833();while(!![]){try{const _0x10a4ce=-parseInt(_0x11286a(0x1db))/0x1*(-parseInt(_0x11286a(0x20c))/0x2)+parseInt(_0x11286a(0x1ea))/0x3*(-parseInt(_0x11286a(0x1c8))/0x4)+-parseInt(_0x11286a(0x1d9))/0x5*(parseInt(_0x11286a(0x208))/0x6)+-parseInt(_0x11286a(0x1e9))/0x7+-parseInt(_0x11286a(0x1f9))/0x8*(-parseInt(_0x11286a(0x20f))/0x9)+-parseInt(_0x11286a(0x1ca))/0xa*(parseInt(_0x11286a(0x1c9))/0xb)+parseInt(_0x11286a(0x1d5))/0xc;if(_0x10a4ce===_0x477426)break;else _0x5e1168['push'](_0x5e1168['shift']());}catch(_0x4aeafb){_0x5e1168['push'](_0x5e1168['shift']());}}}(a0_0xaa3f,0x6313c));const express=require(a0_0x18ce04(0x1e1)),app=express(),router=express[a0_0x18ce04(0x1ff)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');function a0_0x2fa0(_0x14c235,_0x5b8413){const _0xaa3f00=a0_0xaa3f();return a0_0x2fa0=function(_0x2fa060,_0x2e61c8){_0x2fa060=_0x2fa060-0x1c8;let _0x4de561=_0xaa3f00[_0x2fa060];return _0x4de561;},a0_0x2fa0(_0x14c235,_0x5b8413);}router[a0_0x18ce04(0x1df)](a0_0x18ce04(0x1e6),async(_0x3ee8a7,_0x28b1e3)=>{const _0x48d740=a0_0x18ce04;try{const _0x30911d=await warehouse[_0x48d740(0x1f4)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x28b1e3['json']({'status':_0x30911d[_0x48d740(0x1cf)]+_0x48d740(0x1d3)});}catch(_0x30fc32){console[_0x48d740(0x20a)](_0x48d740(0x1e3),_0x30fc32),_0x28b1e3['status'](0xc8)[_0x48d740(0x1f1)]({'message':_0x30fc32[_0x48d740(0x1fe)]});}}),router[a0_0x18ce04(0x1df)](a0_0x18ce04(0x1f3),async(_0x5b246d,_0x4136ef)=>{const _0x26f605=a0_0x18ce04;try{const _0x21b499=await warehouse['aggregate']([{'$unwind':_0x26f605(0x1f2)},{'$match':{'product_details.invoice':_0x26f605(0x1e8),'product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x26f605(0x1e4),'room':_0x26f605(0x206)},'products':{'$push':'$product_details'}}}]);_0x4136ef[_0x26f605(0x1f1)](_0x21b499);}catch(_0x4c8551){console[_0x26f605(0x20a)]('table\x20page',_0x4c8551),_0x4136ef[_0x26f605(0x20e)](0xc8)['json']({'message':_0x4c8551['message']});}}),router[a0_0x18ce04(0x1df)](a0_0x18ce04(0x1e2),async(_0x41121c,_0x124f9a)=>{const _0x180c38=a0_0x18ce04;_0x124f9a[_0x180c38(0x1cc)](_0x180c38(0x1e0),{'success':_0x41121c[_0x180c38(0x201)](_0x180c38(0x1d2)),'errors':_0x41121c[_0x180c38(0x201)](_0x180c38(0x1dc))});}),router[a0_0x18ce04(0x1df)]('/join',async(_0x2c5e44,_0x238e6c)=>{const _0x442499=a0_0x18ce04;var _0x4f6e84=await purchases[_0x442499(0x1f7)]([{'$lookup':{'from':_0x442499(0x200),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x442499(0x1f2)},{'$match':{'$expr':{'$eq':[_0x442499(0x1ee),'$product_details.invoice']}}},{'$project':{'_id':'$product_details._id','product_name':_0x442499(0x205),'product_code':_0x442499(0x1fd),'quantity_available':_0x442499(0x1cd),'warehouse_name':_0x442499(0x1e4),'warehouse_room':_0x442499(0x206),'invoice':_0x442499(0x203)}}],'as':'warehouse_data'}}]);_0x4f6e84['data_sales']={},await Promise[_0x442499(0x1fb)](_0x4f6e84[_0x442499(0x1ef)](async _0x130a37=>{const _0x5f3f25=_0x442499;_0x4f6e84[_0x5f3f25(0x1fc)][_0x130a37[_0x5f3f25(0x1d8)]]=[],await Promise['all'](_0x130a37[_0x5f3f25(0x1fa)][_0x5f3f25(0x1ef)](async _0x5e8a59=>{const _0x23eee8=_0x5f3f25,_0x32341d=await sales[_0x23eee8(0x1f7)]([{'$unwind':_0x23eee8(0x1de)},{'$match':{'sale_product.id_transaction_from':_0x5e8a59[_0x23eee8(0x1d4)][_0x23eee8(0x1e7)](),'sale_product.invoice':_0x5e8a59[_0x23eee8(0x1d8)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x23eee8(0x1d1),'product_code':_0x23eee8(0x202),'quantity_available':_0x23eee8(0x1da),'warehouse_name':_0x23eee8(0x1dd),'warehouse_room':_0x23eee8(0x1d0),'product_invoice':_0x23eee8(0x1ce),'invoice':_0x23eee8(0x210),'id_transaction_from':_0x23eee8(0x1cb)}}]);_0x32341d[_0x23eee8(0x20b)]>0x0&&_0x4f6e84[_0x23eee8(0x1fc)][_0x130a37[_0x23eee8(0x1d8)]][_0x23eee8(0x1f8)](..._0x32341d);}));})),_0x4f6e84['data_sales']=_0x4f6e84[_0x442499(0x1fc)],_0x4f6e84[_0x442499(0x207)]={},await Promise[_0x442499(0x1fb)](_0x4f6e84[_0x442499(0x1ef)](async _0x53385b=>{const _0x560a1b=_0x442499;_0x4f6e84[_0x560a1b(0x207)][_0x53385b[_0x560a1b(0x1d8)]]=[],await Promise[_0x560a1b(0x1fb)](_0x53385b[_0x560a1b(0x1fa)][_0x560a1b(0x1ef)](async _0x25a06b=>{const _0x3ae53d=_0x560a1b,_0x2f7f96=await adjustment[_0x3ae53d(0x1f7)]([{'$unwind':_0x3ae53d(0x1f0)},{'$match':{'product.id_transaction_from':_0x25a06b[_0x3ae53d(0x1d4)][_0x3ae53d(0x1e7)](),'product.invoice':_0x25a06b['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x3ae53d(0x1f5),'product_code':_0x3ae53d(0x1d6),'quantity_available':_0x3ae53d(0x1e5),'warehouse_name':_0x3ae53d(0x1dd),'warehouse_room':_0x3ae53d(0x209),'product_invoice':_0x3ae53d(0x1ed),'invoice':_0x3ae53d(0x210),'id_transaction_from':_0x3ae53d(0x204)}}]);_0x2f7f96['length']>0x0&&_0x4f6e84['data_adjustment'][_0x53385b['invoice']]['push'](..._0x2f7f96);}));})),_0x4f6e84['data_transfer']={},await Promise[_0x442499(0x1fb)](_0x4f6e84[_0x442499(0x1ef)](async _0x3cfdf5=>{const _0x252f51=_0x442499;_0x4f6e84[_0x252f51(0x1ec)][_0x3cfdf5[_0x252f51(0x1d8)]]=[],await Promise[_0x252f51(0x1fb)](_0x3cfdf5[_0x252f51(0x1fa)][_0x252f51(0x1ef)](async _0x44fc97=>{const _0x51efeb=_0x252f51,_0x302d1c=await transfers[_0x51efeb(0x1f7)]([{'$unwind':_0x51efeb(0x1f0)},{'$match':{'product.id_transaction_id':_0x44fc97[_0x51efeb(0x1d4)][_0x51efeb(0x1e7)](),'product.To_invoice':_0x44fc97[_0x51efeb(0x1d8)]}},{'$project':{'_id':'$product._id','product_name':_0x51efeb(0x1f5),'product_code':_0x51efeb(0x1d6),'quantity_available':_0x51efeb(0x1eb),'warehouse_name':_0x51efeb(0x1f6),'warehouse_room':_0x51efeb(0x209),'product_invoice':_0x51efeb(0x20d),'invoice':_0x51efeb(0x210),'id_transaction_id':_0x51efeb(0x211)}}]);console[_0x51efeb(0x20a)](_0x302d1c),_0x302d1c['length']>0x0&&_0x4f6e84['data_transfer'][_0x3cfdf5['invoice']][_0x51efeb(0x1f8)](..._0x302d1c);}));})),_0x238e6c[_0x442499(0x1f1)]({'purchases_warehouse':_0x4f6e84,'data_sales':_0x4f6e84[_0x442499(0x1fc)],'data_adjustment':_0x4f6e84['data_adjustment'],'data_transfer':_0x4f6e84[_0x442499(0x1ec)]});}),module[a0_0x18ce04(0x1d7)]=router;