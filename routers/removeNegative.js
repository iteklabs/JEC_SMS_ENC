const a0_0x1eec3f=a0_0x222b;(function(_0x2c4157,_0x359308){const _0x3ad801=a0_0x222b,_0x1471e0=_0x2c4157();while(!![]){try{const _0x1e809c=-parseInt(_0x3ad801(0x1e2))/0x1*(parseInt(_0x3ad801(0x1d0))/0x2)+parseInt(_0x3ad801(0x1d9))/0x3*(-parseInt(_0x3ad801(0x1bc))/0x4)+parseInt(_0x3ad801(0x1dd))/0x5+parseInt(_0x3ad801(0x1b8))/0x6+parseInt(_0x3ad801(0x1d2))/0x7*(-parseInt(_0x3ad801(0x1b4))/0x8)+parseInt(_0x3ad801(0x1e5))/0x9+parseInt(_0x3ad801(0x1d4))/0xa*(-parseInt(_0x3ad801(0x1f4))/0xb);if(_0x1e809c===_0x359308)break;else _0x1471e0['push'](_0x1471e0['shift']());}catch(_0x421a4f){_0x1471e0['push'](_0x1471e0['shift']());}}}(a0_0x36af,0x6adad));function a0_0x222b(_0x5ec31a,_0x6e02ed){const _0x36af8a=a0_0x36af();return a0_0x222b=function(_0x222bf2,_0x5d3456){_0x222bf2=_0x222bf2-0x1b3;let _0x54c790=_0x36af8a[_0x222bf2];return _0x54c790;},a0_0x222b(_0x5ec31a,_0x6e02ed);}const express=require(a0_0x1eec3f(0x1d3)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x1eec3f(0x1e1));function a0_0x36af(){const _0x3b50e2=['11yzxuwX','table\x20page','data_adjustment','6979320AdlshQ','$product.new_adjust_qty','$product.invoice','modifiedCount','$sale_product','/negative','$product_details.invoice','push','$sale_product.product_name','data_sales','aggregate','$product_details._id','_id','$product.product_name','map','52679XLunVf','$product.to_room_name','$product._id','7984GmgoNf','$sale_product.product_code','$product.room_names','INCF-52068316','5122506ymfxgv','invoice','$sale_product.invoice','updateMany','1823828ocCRjn','$product_details.product_stock','$product.id_transaction_from','$product_details.product_code','$product.product_code','message','/join','$product.id_transaction_id','warehouses','$to_warehouse','monitor','$invoice','get','render','$product_details','flash','valueOf','$product_details.product_name','$sale_product.room_name','$warehouse_name','58886IMCHZo','$name','2394gOGsXc','express','590dbjEnj','length','log','$product','data_transfer','3IUwyPM','warehouse_data','all','json','1060715ZwLCWD','$room','$sale_product.quantity','$sale_product.id_transaction_from','../../models/all_models'];a0_0x36af=function(){return _0x3b50e2;};return a0_0x36af();}router['get'](a0_0x1eec3f(0x1ea),async(_0x39598,_0x58e8cd)=>{const _0x10224b=a0_0x1eec3f;try{const _0x55b008=await warehouse[_0x10224b(0x1bb)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x58e8cd[_0x10224b(0x1dc)]({'status':_0x55b008[_0x10224b(0x1e8)]+'\x20documents\x20updated'});}catch(_0x5193cb){console[_0x10224b(0x1d6)](_0x10224b(0x1e3),_0x5193cb),_0x58e8cd['status'](0xc8)[_0x10224b(0x1dc)]({'message':_0x5193cb['message']});}}),router[a0_0x1eec3f(0x1c8)]('/checking',async(_0x5b684d,_0x272a1f)=>{const _0x55a94f=a0_0x1eec3f;try{const _0x1f2392=await warehouse[_0x55a94f(0x1ef)]([{'$unwind':_0x55a94f(0x1ca)},{'$match':{'product_details.invoice':_0x55a94f(0x1b7),'product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x55a94f(0x1d1),'room':'$room'},'products':{'$push':_0x55a94f(0x1ca)}}}]);_0x272a1f['json'](_0x1f2392);}catch(_0x2ab81b){console['log'](_0x55a94f(0x1e3),_0x2ab81b),_0x272a1f['status'](0xc8)[_0x55a94f(0x1dc)]({'message':_0x2ab81b[_0x55a94f(0x1c1)]});}}),router[a0_0x1eec3f(0x1c8)]('/warehouse_monitor',async(_0x4fceff,_0x482a53)=>{const _0x271380=a0_0x1eec3f;_0x482a53[_0x271380(0x1c9)](_0x271380(0x1c6),{'success':_0x4fceff[_0x271380(0x1cb)]('success'),'errors':_0x4fceff['flash']('errors')});}),router[a0_0x1eec3f(0x1c8)](a0_0x1eec3f(0x1c2),async(_0x1dc0e7,_0xe2ad79)=>{const _0x3dfca3=a0_0x1eec3f;var _0x52f06f=await purchases[_0x3dfca3(0x1ef)]([{'$lookup':{'from':_0x3dfca3(0x1c4),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x3dfca3(0x1ca)},{'$match':{'$expr':{'$eq':['$$invoice',_0x3dfca3(0x1eb)]}}},{'$project':{'_id':_0x3dfca3(0x1f0),'product_name':_0x3dfca3(0x1cd),'product_code':_0x3dfca3(0x1bf),'quantity_available':_0x3dfca3(0x1bd),'warehouse_name':_0x3dfca3(0x1d1),'warehouse_room':_0x3dfca3(0x1de),'invoice':'$product_details.invoice'}}],'as':_0x3dfca3(0x1da)}}]);_0x52f06f[_0x3dfca3(0x1ee)]={},await Promise[_0x3dfca3(0x1db)](_0x52f06f[_0x3dfca3(0x1f3)](async _0x3aa1f8=>{const _0x421753=_0x3dfca3;_0x52f06f[_0x421753(0x1ee)][_0x3aa1f8[_0x421753(0x1b9)]]=[],await Promise['all'](_0x3aa1f8[_0x421753(0x1da)][_0x421753(0x1f3)](async _0x6098fd=>{const _0x13825a=_0x421753,_0x5a4981=await sales['aggregate']([{'$unwind':_0x13825a(0x1e9)},{'$match':{'sale_product.id_transaction_from':_0x6098fd[_0x13825a(0x1f1)][_0x13825a(0x1cc)](),'sale_product.invoice':_0x6098fd[_0x13825a(0x1b9)]}},{'$project':{'_id':'$sale_product._id','product_name':_0x13825a(0x1ed),'product_code':_0x13825a(0x1b5),'quantity_available':_0x13825a(0x1df),'warehouse_name':_0x13825a(0x1cf),'warehouse_room':_0x13825a(0x1ce),'product_invoice':_0x13825a(0x1ba),'invoice':_0x13825a(0x1c7),'id_transaction_from':_0x13825a(0x1e0)}}]);_0x5a4981['length']>0x0&&_0x52f06f[_0x13825a(0x1ee)][_0x3aa1f8['invoice']][_0x13825a(0x1ec)](..._0x5a4981);}));})),_0x52f06f[_0x3dfca3(0x1ee)]=_0x52f06f[_0x3dfca3(0x1ee)],_0x52f06f['data_adjustment']={},await Promise['all'](_0x52f06f[_0x3dfca3(0x1f3)](async _0x136ea5=>{const _0x17204a=_0x3dfca3;_0x52f06f['data_adjustment'][_0x136ea5[_0x17204a(0x1b9)]]=[],await Promise['all'](_0x136ea5['warehouse_data'][_0x17204a(0x1f3)](async _0x2327dc=>{const _0x13c9bc=_0x17204a,_0x1c7db5=await adjustment[_0x13c9bc(0x1ef)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x2327dc['_id'][_0x13c9bc(0x1cc)](),'product.invoice':_0x2327dc[_0x13c9bc(0x1b9)]}},{'$project':{'_id':_0x13c9bc(0x1b3),'product_name':'$product.product_name','product_code':_0x13c9bc(0x1c0),'quantity_available':_0x13c9bc(0x1e6),'warehouse_name':_0x13c9bc(0x1cf),'warehouse_room':_0x13c9bc(0x1b6),'product_invoice':_0x13c9bc(0x1e7),'invoice':_0x13c9bc(0x1c7),'id_transaction_from':_0x13c9bc(0x1be)}}]);_0x1c7db5[_0x13c9bc(0x1d5)]>0x0&&_0x52f06f[_0x13c9bc(0x1e4)][_0x136ea5['invoice']][_0x13c9bc(0x1ec)](..._0x1c7db5);}));})),_0x52f06f[_0x3dfca3(0x1d8)]={},await Promise[_0x3dfca3(0x1db)](_0x52f06f[_0x3dfca3(0x1f3)](async _0x216b24=>{const _0x2d3416=_0x3dfca3;_0x52f06f['data_transfer'][_0x216b24[_0x2d3416(0x1b9)]]=[],await Promise[_0x2d3416(0x1db)](_0x216b24[_0x2d3416(0x1da)][_0x2d3416(0x1f3)](async _0x210e11=>{const _0x8445e4=_0x2d3416,_0x31e652=await transfers['aggregate']([{'$unwind':_0x8445e4(0x1d7)},{'$match':{'product.id_transaction_id':_0x210e11[_0x8445e4(0x1f1)][_0x8445e4(0x1cc)](),'product.To_invoice':_0x210e11['invoice']}},{'$project':{'_id':_0x8445e4(0x1b3),'product_name':_0x8445e4(0x1f2),'product_code':'$product.product_code','quantity_available':'$product.to_quantity','warehouse_name':_0x8445e4(0x1c5),'warehouse_room':'$product.room_names','product_invoice':_0x8445e4(0x1f5),'invoice':_0x8445e4(0x1c7),'id_transaction_id':_0x8445e4(0x1c3)}}]);console[_0x8445e4(0x1d6)](_0x31e652),_0x31e652[_0x8445e4(0x1d5)]>0x0&&_0x52f06f[_0x8445e4(0x1d8)][_0x216b24[_0x8445e4(0x1b9)]][_0x8445e4(0x1ec)](..._0x31e652);}));})),_0xe2ad79[_0x3dfca3(0x1dc)]({'purchases_warehouse':_0x52f06f,'data_sales':_0x52f06f[_0x3dfca3(0x1ee)],'data_adjustment':_0x52f06f[_0x3dfca3(0x1e4)],'data_transfer':_0x52f06f[_0x3dfca3(0x1d8)]});}),module['exports']=router;