const a0_0x326a82=a0_0x54e9;(function(_0x302458,_0x482554){const _0x56f777=a0_0x54e9,_0x32f766=_0x302458();while(!![]){try{const _0x4bc15f=-parseInt(_0x56f777(0x17a))/0x1*(parseInt(_0x56f777(0x185))/0x2)+-parseInt(_0x56f777(0x158))/0x3+-parseInt(_0x56f777(0x173))/0x4*(-parseInt(_0x56f777(0x15f))/0x5)+parseInt(_0x56f777(0x183))/0x6*(-parseInt(_0x56f777(0x16d))/0x7)+-parseInt(_0x56f777(0x182))/0x8*(-parseInt(_0x56f777(0x17c))/0x9)+parseInt(_0x56f777(0x170))/0xa+parseInt(_0x56f777(0x149))/0xb*(-parseInt(_0x56f777(0x150))/0xc);if(_0x4bc15f===_0x482554)break;else _0x32f766['push'](_0x32f766['shift']());}catch(_0x392162){_0x32f766['push'](_0x32f766['shift']());}}}(a0_0xda51,0xb26a6));function a0_0xda51(){const _0x5dfc27=['/join','$invoice','$sale_product','$product_details.invoice','15gNaLgz','$product.invoice','message','get','success','$product.product_name','log','_id','$product.new_adjust_qty','../../models/all_models','$product.to_room_name','$name','invoice','$sale_product.quantity','364UPCTnI','table\x20page','data_adjustment','13296720hObtZJ','$$invoice','aggregate','1687736qUjldn','map','$product.product_code','$product_details.product_name','$warehouse_name','valueOf','$to_warehouse','5AkOTMw','$room','27pCpHMe','warehouse_data','data_transfer','$product.to_quantity','status','$product_details','424968tIPTVv','42774kTBHyL','$product.room_names','344902MSIqEI','flash','data_sales','modifiedCount','push','$sale_product.invoice','11KlPPWY','/checking','monitor','warehouses','$product._id','/warehouse_monitor','express','7334136IrCgVs','Router','all','exports','length','$sale_product.id_transaction_from','$product_details.product_stock','json','539718SEOdjH','14800005047429','errors'];a0_0xda51=function(){return _0x5dfc27;};return a0_0xda51();}function a0_0x54e9(_0x113c97,_0x26e7e3){const _0xda5167=a0_0xda51();return a0_0x54e9=function(_0x54e989,_0x4a0ed1){_0x54e989=_0x54e989-0x148;let _0x421d17=_0xda5167[_0x54e989];return _0x421d17;},a0_0x54e9(_0x113c97,_0x26e7e3);}const express=require(a0_0x326a82(0x14f)),app=express(),router=express[a0_0x326a82(0x151)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x326a82(0x168));router['get']('/negative',async(_0x504c9b,_0x2b6b85)=>{const _0x2daaf1=a0_0x326a82;try{const _0x463aee=await warehouse['updateMany']({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x2b6b85[_0x2daaf1(0x157)]({'status':_0x463aee[_0x2daaf1(0x188)]+'\x20documents\x20updated'});}catch(_0x4b1fac){console[_0x2daaf1(0x165)](_0x2daaf1(0x16e),_0x4b1fac),_0x2b6b85[_0x2daaf1(0x180)](0xc8)['json']({'message':_0x4b1fac[_0x2daaf1(0x161)]});}}),router[a0_0x326a82(0x162)](a0_0x326a82(0x14a),async(_0x5c96cf,_0x286449)=>{const _0xb15bfb=a0_0x326a82;try{const _0x1f84f0=await warehouse[_0xb15bfb(0x172)]([{'$unwind':_0xb15bfb(0x181)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':_0xb15bfb(0x159)}},{'$group':{'_id':{'name':_0xb15bfb(0x16a),'room':_0xb15bfb(0x17b)},'products':{'$push':_0xb15bfb(0x181)}}}]);_0x286449[_0xb15bfb(0x157)](_0x1f84f0);}catch(_0x33e9f4){console[_0xb15bfb(0x165)](_0xb15bfb(0x16e),_0x33e9f4),_0x286449[_0xb15bfb(0x180)](0xc8)[_0xb15bfb(0x157)]({'message':_0x33e9f4[_0xb15bfb(0x161)]});}}),router[a0_0x326a82(0x162)](a0_0x326a82(0x14e),async(_0x7292e5,_0x33d95a)=>{const _0x207ec1=a0_0x326a82;_0x33d95a['render'](_0x207ec1(0x14b),{'success':_0x7292e5[_0x207ec1(0x186)](_0x207ec1(0x163)),'errors':_0x7292e5[_0x207ec1(0x186)](_0x207ec1(0x15a))});}),router[a0_0x326a82(0x162)](a0_0x326a82(0x15b),async(_0x3eb435,_0x2bd868)=>{const _0x2aae3e=a0_0x326a82;var _0x2d8b75=await purchases[_0x2aae3e(0x172)]([{'$lookup':{'from':_0x2aae3e(0x14c),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x2aae3e(0x181)},{'$match':{'$expr':{'$eq':[_0x2aae3e(0x171),_0x2aae3e(0x15e)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x2aae3e(0x176),'product_code':'$product_details.product_code','quantity_available':_0x2aae3e(0x156),'warehouse_name':'$name','warehouse_room':'$room','invoice':'$product_details.invoice'}}],'as':_0x2aae3e(0x17d)}}]);_0x2d8b75[_0x2aae3e(0x187)]={},await Promise[_0x2aae3e(0x152)](_0x2d8b75[_0x2aae3e(0x174)](async _0x5617c1=>{const _0x1920a9=_0x2aae3e;_0x2d8b75[_0x1920a9(0x187)][_0x5617c1[_0x1920a9(0x16b)]]=[],await Promise[_0x1920a9(0x152)](_0x5617c1[_0x1920a9(0x17d)][_0x1920a9(0x174)](async _0x4e3467=>{const _0x2d0f1d=_0x1920a9,_0x199632=await sales[_0x2d0f1d(0x172)]([{'$unwind':_0x2d0f1d(0x15d)},{'$match':{'sale_product.id_transaction_from':_0x4e3467[_0x2d0f1d(0x166)][_0x2d0f1d(0x178)](),'sale_product.invoice':_0x4e3467[_0x2d0f1d(0x16b)]}},{'$project':{'_id':'$sale_product._id','product_name':'$sale_product.product_name','product_code':'$sale_product.product_code','quantity_available':_0x2d0f1d(0x16c),'warehouse_name':_0x2d0f1d(0x177),'warehouse_room':'$sale_product.room_name','product_invoice':_0x2d0f1d(0x148),'invoice':'$invoice','id_transaction_from':_0x2d0f1d(0x155)}}]);_0x199632['length']>0x0&&_0x2d8b75[_0x2d0f1d(0x187)][_0x5617c1[_0x2d0f1d(0x16b)]]['push'](..._0x199632);}));})),_0x2d8b75[_0x2aae3e(0x187)]=_0x2d8b75['data_sales'],_0x2d8b75[_0x2aae3e(0x16f)]={},await Promise[_0x2aae3e(0x152)](_0x2d8b75['map'](async _0x596d94=>{const _0xc0769a=_0x2aae3e;_0x2d8b75[_0xc0769a(0x16f)][_0x596d94[_0xc0769a(0x16b)]]=[],await Promise[_0xc0769a(0x152)](_0x596d94[_0xc0769a(0x17d)][_0xc0769a(0x174)](async _0x2d172a=>{const _0x653c85=_0xc0769a,_0x21602e=await adjustment[_0x653c85(0x172)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x2d172a[_0x653c85(0x166)][_0x653c85(0x178)](),'product.invoice':_0x2d172a['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x653c85(0x164),'product_code':_0x653c85(0x175),'quantity_available':_0x653c85(0x167),'warehouse_name':_0x653c85(0x177),'warehouse_room':'$product.room_names','product_invoice':_0x653c85(0x160),'invoice':_0x653c85(0x15c),'id_transaction_from':'$product.id_transaction_from'}}]);_0x21602e[_0x653c85(0x154)]>0x0&&_0x2d8b75[_0x653c85(0x16f)][_0x596d94[_0x653c85(0x16b)]][_0x653c85(0x189)](..._0x21602e);}));})),_0x2d8b75[_0x2aae3e(0x17e)]={},await Promise[_0x2aae3e(0x152)](_0x2d8b75[_0x2aae3e(0x174)](async _0x3f3f9f=>{const _0x5c4f80=_0x2aae3e;_0x2d8b75[_0x5c4f80(0x17e)][_0x3f3f9f[_0x5c4f80(0x16b)]]=[],await Promise[_0x5c4f80(0x152)](_0x3f3f9f[_0x5c4f80(0x17d)][_0x5c4f80(0x174)](async _0x27d21c=>{const _0x48a8e7=_0x5c4f80,_0x32563a=await transfers[_0x48a8e7(0x172)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x27d21c[_0x48a8e7(0x166)]['valueOf'](),'product.To_invoice':_0x27d21c[_0x48a8e7(0x16b)]}},{'$project':{'_id':_0x48a8e7(0x14d),'product_name':'$product.product_name','product_code':'$product.product_code','quantity_available':_0x48a8e7(0x17f),'warehouse_name':_0x48a8e7(0x179),'warehouse_room':_0x48a8e7(0x184),'product_invoice':_0x48a8e7(0x169),'invoice':_0x48a8e7(0x15c),'id_transaction_id':'$product.id_transaction_id'}}]);console[_0x48a8e7(0x165)](_0x32563a),_0x32563a[_0x48a8e7(0x154)]>0x0&&_0x2d8b75[_0x48a8e7(0x17e)][_0x3f3f9f['invoice']][_0x48a8e7(0x189)](..._0x32563a);}));})),_0x2bd868[_0x2aae3e(0x157)]({'purchases_warehouse':_0x2d8b75,'data_sales':_0x2d8b75[_0x2aae3e(0x187)],'data_adjustment':_0x2d8b75[_0x2aae3e(0x16f)],'data_transfer':_0x2d8b75[_0x2aae3e(0x17e)]});}),module[a0_0x326a82(0x153)]=router;