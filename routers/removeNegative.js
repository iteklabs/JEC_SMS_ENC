function a0_0x2825(_0x2c6693,_0x479420){const _0x59aae2=a0_0x59aa();return a0_0x2825=function(_0x28253a,_0x290900){_0x28253a=_0x28253a-0x147;let _0x301075=_0x59aae2[_0x28253a];return _0x301075;},a0_0x2825(_0x2c6693,_0x479420);}const a0_0xe1266b=a0_0x2825;(function(_0x3d3d2d,_0x3ee56c){const _0x351cdd=a0_0x2825,_0x1a2b4e=_0x3d3d2d();while(!![]){try{const _0x34a00b=parseInt(_0x351cdd(0x14e))/0x1+-parseInt(_0x351cdd(0x17c))/0x2*(parseInt(_0x351cdd(0x152))/0x3)+-parseInt(_0x351cdd(0x14f))/0x4*(parseInt(_0x351cdd(0x179))/0x5)+-parseInt(_0x351cdd(0x169))/0x6*(parseInt(_0x351cdd(0x181))/0x7)+parseInt(_0x351cdd(0x16c))/0x8+parseInt(_0x351cdd(0x157))/0x9+-parseInt(_0x351cdd(0x165))/0xa*(-parseInt(_0x351cdd(0x16d))/0xb);if(_0x34a00b===_0x3ee56c)break;else _0x1a2b4e['push'](_0x1a2b4e['shift']());}catch(_0x5d459b){_0x1a2b4e['push'](_0x1a2b4e['shift']());}}}(a0_0x59aa,0xd20ec));function a0_0x59aa(){const _0x3392a7=['$product.to_room_name','2136xLjjCG','data_transfer','$product_details.invoice','10241224OfkXvA','11kJpcsx','$sale_product.invoice','flash','log','$product.id_transaction_from','$sale_product.quantity','$to_warehouse','$product','$warehouse_name','valueOf','message','express','1868450moAQIQ','$product.product_name','\x20documents\x20updated','66zELUjn','_id','invoice','table\x20page','modifiedCount','29855hqtsXv','$product.id_transaction_id','json','$product_details','data_sales','$sale_product','push','aggregate','$product.to_quantity','/negative','warehouse_data','updateMany','$sale_product.id_transaction_from','$name','1253939UvSSoq','16eiLITW','$$invoice','map','88698GLaBnI','data_adjustment','render','$room','errors','3194037MxIffj','$product_details._id','Router','$product.invoice','$sale_product.product_name','all','/join','$product_details.product_stock','$product_details.product_code','$invoice','$product.room_names','$product.product_code','get','length','19601890vpZiXc','$sale_product.room_name','$sale_product._id'];a0_0x59aa=function(){return _0x3392a7;};return a0_0x59aa();}const express=require(a0_0xe1266b(0x178)),app=express(),router=express[a0_0xe1266b(0x159)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');router[a0_0xe1266b(0x163)](a0_0xe1266b(0x149),async(_0x308f62,_0x2627f2)=>{const _0x207a7f=a0_0xe1266b;try{const _0x27cafc=await warehouse[_0x207a7f(0x14b)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x2627f2['json']({'status':_0x27cafc[_0x207a7f(0x180)]+_0x207a7f(0x17b)});}catch(_0x402cd7){console[_0x207a7f(0x170)](_0x207a7f(0x17f),_0x402cd7),_0x2627f2['status'](0xc8)[_0x207a7f(0x183)]({'message':_0x402cd7[_0x207a7f(0x177)]});}}),router[a0_0xe1266b(0x163)]('/checking',async(_0x54044f,_0x2b4ad4)=>{const _0x3b3c5f=a0_0xe1266b;try{const _0xa79d62=await warehouse[_0x3b3c5f(0x147)]([{'$unwind':_0x3b3c5f(0x184)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':'14800005047429'}},{'$group':{'_id':{'name':_0x3b3c5f(0x14d),'room':_0x3b3c5f(0x155)},'products':{'$push':_0x3b3c5f(0x184)}}}]);_0x2b4ad4[_0x3b3c5f(0x183)](_0xa79d62);}catch(_0x3a3f5e){console[_0x3b3c5f(0x170)](_0x3b3c5f(0x17f),_0x3a3f5e),_0x2b4ad4['status'](0xc8)[_0x3b3c5f(0x183)]({'message':_0x3a3f5e[_0x3b3c5f(0x177)]});}}),router['get']('/warehouse_monitor',async(_0x4a1ff6,_0x4942ce)=>{const _0x1eee0f=a0_0xe1266b;_0x4942ce[_0x1eee0f(0x154)]('monitor',{'success':_0x4a1ff6[_0x1eee0f(0x16f)]('success'),'errors':_0x4a1ff6[_0x1eee0f(0x16f)](_0x1eee0f(0x156))});}),router['get'](a0_0xe1266b(0x15d),async(_0x33045c,_0x27e9e8)=>{const _0x3c8360=a0_0xe1266b;var _0x585653=await purchases[_0x3c8360(0x147)]([{'$lookup':{'from':'warehouses','let':{'invoice':_0x3c8360(0x160)},'pipeline':[{'$unwind':_0x3c8360(0x184)},{'$match':{'$expr':{'$eq':[_0x3c8360(0x150),_0x3c8360(0x16b)]}}},{'$project':{'_id':_0x3c8360(0x158),'product_name':'$product_details.product_name','product_code':_0x3c8360(0x15f),'quantity_available':_0x3c8360(0x15e),'warehouse_name':_0x3c8360(0x14d),'warehouse_room':_0x3c8360(0x155),'invoice':_0x3c8360(0x16b)}}],'as':_0x3c8360(0x14a)}}]);_0x585653[_0x3c8360(0x185)]={},await Promise[_0x3c8360(0x15c)](_0x585653[_0x3c8360(0x151)](async _0x38b11e=>{const _0x5b9d3e=_0x3c8360;_0x585653['data_sales'][_0x38b11e['invoice']]=[],await Promise[_0x5b9d3e(0x15c)](_0x38b11e[_0x5b9d3e(0x14a)]['map'](async _0x737b90=>{const _0x1ffdef=_0x5b9d3e,_0x5baee1=await sales[_0x1ffdef(0x147)]([{'$unwind':_0x1ffdef(0x186)},{'$match':{'sale_product.id_transaction_from':_0x737b90['_id'][_0x1ffdef(0x176)](),'sale_product.invoice':_0x737b90['invoice']}},{'$project':{'_id':_0x1ffdef(0x167),'product_name':_0x1ffdef(0x15b),'product_code':'$sale_product.product_code','quantity_available':_0x1ffdef(0x172),'warehouse_name':'$warehouse_name','warehouse_room':_0x1ffdef(0x166),'product_invoice':_0x1ffdef(0x16e),'invoice':'$invoice','id_transaction_from':_0x1ffdef(0x14c)}}]);_0x5baee1[_0x1ffdef(0x164)]>0x0&&_0x585653[_0x1ffdef(0x185)][_0x38b11e[_0x1ffdef(0x17e)]][_0x1ffdef(0x187)](..._0x5baee1);}));})),_0x585653[_0x3c8360(0x185)]=_0x585653['data_sales'],_0x585653[_0x3c8360(0x153)]={},await Promise['all'](_0x585653[_0x3c8360(0x151)](async _0x3ab140=>{const _0x1392ed=_0x3c8360;_0x585653['data_adjustment'][_0x3ab140['invoice']]=[],await Promise[_0x1392ed(0x15c)](_0x3ab140[_0x1392ed(0x14a)]['map'](async _0x1f1a67=>{const _0x58de32=_0x1392ed,_0x5c2828=await adjustment['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x1f1a67[_0x58de32(0x17d)]['valueOf'](),'product.invoice':_0x1f1a67['invoice']}},{'$project':{'_id':'$product._id','product_name':_0x58de32(0x17a),'product_code':_0x58de32(0x162),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x58de32(0x175),'warehouse_room':_0x58de32(0x161),'product_invoice':_0x58de32(0x15a),'invoice':_0x58de32(0x160),'id_transaction_from':_0x58de32(0x171)}}]);_0x5c2828['length']>0x0&&_0x585653[_0x58de32(0x153)][_0x3ab140['invoice']][_0x58de32(0x187)](..._0x5c2828);}));})),_0x585653[_0x3c8360(0x16a)]={},await Promise[_0x3c8360(0x15c)](_0x585653[_0x3c8360(0x151)](async _0x497f6e=>{const _0x28fafe=_0x3c8360;_0x585653[_0x28fafe(0x16a)][_0x497f6e['invoice']]=[],await Promise[_0x28fafe(0x15c)](_0x497f6e[_0x28fafe(0x14a)][_0x28fafe(0x151)](async _0xe8983a=>{const _0x5cfa4c=_0x28fafe,_0x1ab45d=await transfers[_0x5cfa4c(0x147)]([{'$unwind':_0x5cfa4c(0x174)},{'$match':{'product.id_transaction_id':_0xe8983a[_0x5cfa4c(0x17d)][_0x5cfa4c(0x176)](),'product.To_invoice':_0xe8983a[_0x5cfa4c(0x17e)]}},{'$project':{'_id':'$product._id','product_name':_0x5cfa4c(0x17a),'product_code':_0x5cfa4c(0x162),'quantity_available':_0x5cfa4c(0x148),'warehouse_name':_0x5cfa4c(0x173),'warehouse_room':'$product.room_names','product_invoice':_0x5cfa4c(0x168),'invoice':_0x5cfa4c(0x160),'id_transaction_id':_0x5cfa4c(0x182)}}]);console[_0x5cfa4c(0x170)](_0x1ab45d),_0x1ab45d[_0x5cfa4c(0x164)]>0x0&&_0x585653['data_transfer'][_0x497f6e['invoice']][_0x5cfa4c(0x187)](..._0x1ab45d);}));})),_0x27e9e8[_0x3c8360(0x183)]({'purchases_warehouse':_0x585653,'data_sales':_0x585653[_0x3c8360(0x185)],'data_adjustment':_0x585653[_0x3c8360(0x153)],'data_transfer':_0x585653[_0x3c8360(0x16a)]});}),module['exports']=router;