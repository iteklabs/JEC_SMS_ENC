function a0_0x5906(_0x4c67ae,_0x746e2f){const _0x42cb1b=a0_0x42cb();return a0_0x5906=function(_0x590692,_0x52f0de){_0x590692=_0x590692-0x74;let _0x5cf8a7=_0x42cb1b[_0x590692];return _0x5cf8a7;},a0_0x5906(_0x4c67ae,_0x746e2f);}function a0_0x42cb(){const _0x421770=['exports','$invoice','/join','1440292ncLEUk','314yzNfaJ','Router','json','render','aggregate','$sale_product.id_transaction_from','errors','/checking','length','$product.product_code','$product.id_transaction_id','$product.to_room_name','data_transfer','$product_details','1003095Smchvy','$product_details._id','log','/warehouse_monitor','$sale_product.product_name','$product.to_quantity','106381lHAHit','$product._id','all','$sale_product.quantity','$product.product_name','$product_details.product_stock','5oHgnvq','/negative','$product.invoice','data_adjustment','14800005047429','$$invoice','get','$sale_product.room_name','updateMany','INCF-52068316','$warehouse_name','data_sales','$product','invoice','5158JLkePf','36EYePtG','24sakiAM','$product_details.product_code','$product.room_names','push','$product_details.product_name','2069538orcOtI','flash','75270ItPzJc','_id','table\x20page','$sale_product._id','1897077AvSley','$room','warehouses','valueOf','\x20documents\x20updated','$sale_product.invoice','message','map','warehouse_data','$sale_product.product_code','$product_details.invoice'];a0_0x42cb=function(){return _0x421770;};return a0_0x42cb();}const a0_0x4e0dc9=a0_0x5906;(function(_0x3d5055,_0x82fcb5){const _0x2ec3b4=a0_0x5906,_0x100ab9=_0x3d5055();while(!![]){try{const _0x4f0709=parseInt(_0x2ec3b4(0x7b))/0x1*(parseInt(_0x2ec3b4(0x97))/0x2)+-parseInt(_0x2ec3b4(0xa5))/0x3+parseInt(_0x2ec3b4(0x96))/0x4+parseInt(_0x2ec3b4(0xb1))/0x5*(parseInt(_0x2ec3b4(0x82))/0x6)+-parseInt(_0x2ec3b4(0x88))/0x7*(parseInt(_0x2ec3b4(0x7d))/0x8)+-parseInt(_0x2ec3b4(0x7c))/0x9*(-parseInt(_0x2ec3b4(0x84))/0xa)+parseInt(_0x2ec3b4(0xab))/0xb;if(_0x4f0709===_0x82fcb5)break;else _0x100ab9['push'](_0x100ab9['shift']());}catch(_0xdec080){_0x100ab9['push'](_0x100ab9['shift']());}}}(a0_0x42cb,0x6368f));const express=require('express'),app=express(),router=express[a0_0x4e0dc9(0x98)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');router[a0_0x4e0dc9(0xb7)](a0_0x4e0dc9(0xb2),async(_0x4c4a91,_0x1fdbec)=>{const _0x396c5d=a0_0x4e0dc9;try{const _0x38929d=await warehouse[_0x396c5d(0x75)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x1fdbec[_0x396c5d(0x99)]({'status':_0x38929d['modifiedCount']+_0x396c5d(0x8c)});}catch(_0x1b9eb0){console[_0x396c5d(0xa7)]('table\x20page',_0x1b9eb0),_0x1fdbec['status'](0xc8)['json']({'message':_0x1b9eb0[_0x396c5d(0x8e)]});}}),router[a0_0x4e0dc9(0xb7)](a0_0x4e0dc9(0x9e),async(_0x28100a,_0x14e1ae)=>{const _0x5abc48=a0_0x4e0dc9;try{const _0x29367a=await warehouse[_0x5abc48(0x9b)]([{'$unwind':_0x5abc48(0xa4)},{'$match':{'product_details.invoice':_0x5abc48(0x76),'product_details.primary_code':_0x5abc48(0xb5)}},{'$group':{'_id':{'name':'$name','room':_0x5abc48(0x89)},'products':{'$push':_0x5abc48(0xa4)}}}]);_0x14e1ae['json'](_0x29367a);}catch(_0x184e56){console['log'](_0x5abc48(0x86),_0x184e56),_0x14e1ae['status'](0xc8)[_0x5abc48(0x99)]({'message':_0x184e56['message']});}}),router[a0_0x4e0dc9(0xb7)](a0_0x4e0dc9(0xa8),async(_0x44cfbb,_0x2da598)=>{const _0x62ae03=a0_0x4e0dc9;_0x2da598[_0x62ae03(0x9a)]('monitor',{'success':_0x44cfbb[_0x62ae03(0x83)]('success'),'errors':_0x44cfbb[_0x62ae03(0x83)](_0x62ae03(0x9d))});}),router[a0_0x4e0dc9(0xb7)](a0_0x4e0dc9(0x95),async(_0x3f3167,_0xaddf8e)=>{const _0x26193c=a0_0x4e0dc9;var _0x3ee4fe=await purchases[_0x26193c(0x9b)]([{'$lookup':{'from':_0x26193c(0x8a),'let':{'invoice':_0x26193c(0x94)},'pipeline':[{'$unwind':_0x26193c(0xa4)},{'$match':{'$expr':{'$eq':[_0x26193c(0xb6),_0x26193c(0x92)]}}},{'$project':{'_id':_0x26193c(0xa6),'product_name':_0x26193c(0x81),'product_code':_0x26193c(0x7e),'quantity_available':_0x26193c(0xb0),'warehouse_name':'$name','warehouse_room':_0x26193c(0x89),'invoice':_0x26193c(0x92)}}],'as':_0x26193c(0x90)}}]);_0x3ee4fe['data_sales']={},await Promise[_0x26193c(0xad)](_0x3ee4fe[_0x26193c(0x8f)](async _0x10572c=>{const _0x372206=_0x26193c;_0x3ee4fe[_0x372206(0x78)][_0x10572c['invoice']]=[],await Promise[_0x372206(0xad)](_0x10572c[_0x372206(0x90)][_0x372206(0x8f)](async _0x282d57=>{const _0x4536eb=_0x372206,_0x45ef98=await sales[_0x4536eb(0x9b)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x282d57[_0x4536eb(0x85)]['valueOf'](),'sale_product.invoice':_0x282d57['invoice']}},{'$project':{'_id':_0x4536eb(0x87),'product_name':_0x4536eb(0xa9),'product_code':_0x4536eb(0x91),'quantity_available':_0x4536eb(0xae),'warehouse_name':_0x4536eb(0x77),'warehouse_room':_0x4536eb(0x74),'product_invoice':_0x4536eb(0x8d),'invoice':_0x4536eb(0x94),'id_transaction_from':_0x4536eb(0x9c)}}]);_0x45ef98['length']>0x0&&_0x3ee4fe[_0x4536eb(0x78)][_0x10572c[_0x4536eb(0x7a)]][_0x4536eb(0x80)](..._0x45ef98);}));})),_0x3ee4fe[_0x26193c(0x78)]=_0x3ee4fe['data_sales'],_0x3ee4fe[_0x26193c(0xb4)]={},await Promise[_0x26193c(0xad)](_0x3ee4fe[_0x26193c(0x8f)](async _0x2c615b=>{const _0x5f10a8=_0x26193c;_0x3ee4fe[_0x5f10a8(0xb4)][_0x2c615b[_0x5f10a8(0x7a)]]=[],await Promise[_0x5f10a8(0xad)](_0x2c615b[_0x5f10a8(0x90)][_0x5f10a8(0x8f)](async _0xb9dac6=>{const _0x48647b=_0x5f10a8,_0x48f7b3=await adjustment[_0x48647b(0x9b)]([{'$unwind':_0x48647b(0x79)},{'$match':{'product.id_transaction_from':_0xb9dac6[_0x48647b(0x85)][_0x48647b(0x8b)](),'product.invoice':_0xb9dac6[_0x48647b(0x7a)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0x48647b(0xa0),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x48647b(0x77),'warehouse_room':_0x48647b(0x7f),'product_invoice':_0x48647b(0xb3),'invoice':'$invoice','id_transaction_from':'$product.id_transaction_from'}}]);_0x48f7b3[_0x48647b(0x9f)]>0x0&&_0x3ee4fe['data_adjustment'][_0x2c615b[_0x48647b(0x7a)]][_0x48647b(0x80)](..._0x48f7b3);}));})),_0x3ee4fe[_0x26193c(0xa3)]={},await Promise['all'](_0x3ee4fe[_0x26193c(0x8f)](async _0x465590=>{const _0x3f7f01=_0x26193c;_0x3ee4fe['data_transfer'][_0x465590['invoice']]=[],await Promise[_0x3f7f01(0xad)](_0x465590[_0x3f7f01(0x90)][_0x3f7f01(0x8f)](async _0x8d3da2=>{const _0x1628fb=_0x3f7f01,_0x8d6dd1=await transfers[_0x1628fb(0x9b)]([{'$unwind':_0x1628fb(0x79)},{'$match':{'product.id_transaction_id':_0x8d3da2[_0x1628fb(0x85)]['valueOf'](),'product.To_invoice':_0x8d3da2[_0x1628fb(0x7a)]}},{'$project':{'_id':_0x1628fb(0xac),'product_name':_0x1628fb(0xaf),'product_code':'$product.product_code','quantity_available':_0x1628fb(0xaa),'warehouse_name':'$to_warehouse','warehouse_room':_0x1628fb(0x7f),'product_invoice':_0x1628fb(0xa2),'invoice':_0x1628fb(0x94),'id_transaction_id':_0x1628fb(0xa1)}}]);console[_0x1628fb(0xa7)](_0x8d6dd1),_0x8d6dd1[_0x1628fb(0x9f)]>0x0&&_0x3ee4fe[_0x1628fb(0xa3)][_0x465590['invoice']]['push'](..._0x8d6dd1);}));})),_0xaddf8e[_0x26193c(0x99)]({'purchases_warehouse':_0x3ee4fe,'data_sales':_0x3ee4fe[_0x26193c(0x78)],'data_adjustment':_0x3ee4fe[_0x26193c(0xb4)],'data_transfer':_0x3ee4fe['data_transfer']});}),module[a0_0x4e0dc9(0x93)]=router;