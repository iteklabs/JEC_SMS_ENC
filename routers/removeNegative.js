function a0_0x5373(){const _0x160b6d=['INCF-52068316','flash','$to_warehouse','$sale_product.quantity','exports','json','$warehouse_name','14800005047429','$product.to_room_name','$sale_product.product_name','$sale_product.id_transaction_from','/checking','warehouse_data','Router','2022248htyLUI','express','$product.product_name','$product.product_code','$product.room_names','errors','\x20documents\x20updated','updateMany','status','$name','$product.to_quantity','$invoice','invoice','valueOf','data_sales','data_transfer','1501014qwmuUN','log','/negative','/warehouse_monitor','message','$product_details.product_name','map','length','100323fVUfpI','278425RatClr','_id','$product_details._id','$sale_product.product_code','data_adjustment','$product_details','success','2270WyLhAU','all','$product_details.invoice','86508YtaDPC','$product.invoice','push','$sale_product._id','$product.id_transaction_id','7uBXXvm','$sale_product.room_name','28737ihfSxt','aggregate','table\x20page','get','364304EYlGGO','$room','warehouses','2JfiVgJ'];a0_0x5373=function(){return _0x160b6d;};return a0_0x5373();}const a0_0x4ece19=a0_0x4bf8;(function(_0x247d15,_0x1ee396){const _0x2fd835=a0_0x4bf8,_0x348a12=_0x247d15();while(!![]){try{const _0x47d453=parseInt(_0x2fd835(0x8c))/0x1+-parseInt(_0x2fd835(0x9a))/0x2*(parseInt(_0x2fd835(0x81))/0x3)+-parseInt(_0x2fd835(0x97))/0x4+-parseInt(_0x2fd835(0x82))/0x5+-parseInt(_0x2fd835(0x79))/0x6*(parseInt(_0x2fd835(0x91))/0x7)+-parseInt(_0x2fd835(0x69))/0x8+parseInt(_0x2fd835(0x93))/0x9*(parseInt(_0x2fd835(0x89))/0xa);if(_0x47d453===_0x1ee396)break;else _0x348a12['push'](_0x348a12['shift']());}catch(_0x48a0fa){_0x348a12['push'](_0x348a12['shift']());}}}(a0_0x5373,0x1f4a7));function a0_0x4bf8(_0x52514d,_0x40685a){const _0x5373ca=a0_0x5373();return a0_0x4bf8=function(_0x4bf82b,_0x32c0e2){_0x4bf82b=_0x4bf82b-0x67;let _0x4971ab=_0x5373ca[_0x4bf82b];return _0x4971ab;},a0_0x4bf8(_0x52514d,_0x40685a);}const express=require(a0_0x4ece19(0x6a)),app=express(),router=express[a0_0x4ece19(0x68)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require('../../models/all_models');router['get'](a0_0x4ece19(0x7b),async(_0x25e3a0,_0x20ba80)=>{const _0x152555=a0_0x4ece19;try{const _0x555859=await warehouse[_0x152555(0x70)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x20ba80[_0x152555(0xa0)]({'status':_0x555859['modifiedCount']+_0x152555(0x6f)});}catch(_0x357e0d){console[_0x152555(0x7a)](_0x152555(0x95),_0x357e0d),_0x20ba80[_0x152555(0x71)](0xc8)['json']({'message':_0x357e0d[_0x152555(0x7d)]});}}),router['get'](a0_0x4ece19(0xa6),async(_0x2f8c48,_0x24d25f)=>{const _0x24a836=a0_0x4ece19;try{const _0x44ddca=await warehouse[_0x24a836(0x94)]([{'$unwind':_0x24a836(0x87)},{'$match':{'product_details.invoice':_0x24a836(0x9b),'product_details.primary_code':_0x24a836(0xa2)}},{'$group':{'_id':{'name':_0x24a836(0x72),'room':_0x24a836(0x98)},'products':{'$push':_0x24a836(0x87)}}}]);_0x24d25f['json'](_0x44ddca);}catch(_0x4396f0){console[_0x24a836(0x7a)](_0x24a836(0x95),_0x4396f0),_0x24d25f[_0x24a836(0x71)](0xc8)[_0x24a836(0xa0)]({'message':_0x4396f0[_0x24a836(0x7d)]});}}),router[a0_0x4ece19(0x96)](a0_0x4ece19(0x7c),async(_0x5da03a,_0x2140cc)=>{const _0x5ba93e=a0_0x4ece19;_0x2140cc['render']('monitor',{'success':_0x5da03a[_0x5ba93e(0x9c)](_0x5ba93e(0x88)),'errors':_0x5da03a[_0x5ba93e(0x9c)](_0x5ba93e(0x6e))});}),router[a0_0x4ece19(0x96)]('/join',async(_0x446aa6,_0x319a33)=>{const _0x4af8f9=a0_0x4ece19;var _0x50f913=await purchases[_0x4af8f9(0x94)]([{'$lookup':{'from':_0x4af8f9(0x99),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x4af8f9(0x87)},{'$match':{'$expr':{'$eq':['$$invoice',_0x4af8f9(0x8b)]}}},{'$project':{'_id':_0x4af8f9(0x84),'product_name':_0x4af8f9(0x7e),'product_code':'$product_details.product_code','quantity_available':'$product_details.product_stock','warehouse_name':_0x4af8f9(0x72),'warehouse_room':_0x4af8f9(0x98),'invoice':_0x4af8f9(0x8b)}}],'as':'warehouse_data'}}]);_0x50f913[_0x4af8f9(0x77)]={},await Promise[_0x4af8f9(0x8a)](_0x50f913['map'](async _0x3d90dd=>{const _0x47efb2=_0x4af8f9;_0x50f913[_0x47efb2(0x77)][_0x3d90dd[_0x47efb2(0x75)]]=[],await Promise[_0x47efb2(0x8a)](_0x3d90dd[_0x47efb2(0x67)][_0x47efb2(0x7f)](async _0x20371f=>{const _0xf579f7=_0x47efb2,_0x29e518=await sales[_0xf579f7(0x94)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x20371f[_0xf579f7(0x83)]['valueOf'](),'sale_product.invoice':_0x20371f[_0xf579f7(0x75)]}},{'$project':{'_id':_0xf579f7(0x8f),'product_name':_0xf579f7(0xa4),'product_code':_0xf579f7(0x85),'quantity_available':_0xf579f7(0x9e),'warehouse_name':'$warehouse_name','warehouse_room':_0xf579f7(0x92),'product_invoice':'$sale_product.invoice','invoice':_0xf579f7(0x74),'id_transaction_from':_0xf579f7(0xa5)}}]);_0x29e518[_0xf579f7(0x80)]>0x0&&_0x50f913['data_sales'][_0x3d90dd[_0xf579f7(0x75)]][_0xf579f7(0x8e)](..._0x29e518);}));})),_0x50f913[_0x4af8f9(0x77)]=_0x50f913[_0x4af8f9(0x77)],_0x50f913['data_adjustment']={},await Promise[_0x4af8f9(0x8a)](_0x50f913['map'](async _0x58579b=>{const _0x4be606=_0x4af8f9;_0x50f913[_0x4be606(0x86)][_0x58579b['invoice']]=[],await Promise[_0x4be606(0x8a)](_0x58579b[_0x4be606(0x67)][_0x4be606(0x7f)](async _0x8bacf9=>{const _0x590243=_0x4be606,_0x4bcb5d=await adjustment[_0x590243(0x94)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x8bacf9[_0x590243(0x83)][_0x590243(0x76)](),'product.invoice':_0x8bacf9[_0x590243(0x75)]}},{'$project':{'_id':'$product._id','product_name':_0x590243(0x6b),'product_code':_0x590243(0x6c),'quantity_available':'$product.new_adjust_qty','warehouse_name':_0x590243(0xa1),'warehouse_room':_0x590243(0x6d),'product_invoice':_0x590243(0x8d),'invoice':_0x590243(0x74),'id_transaction_from':'$product.id_transaction_from'}}]);_0x4bcb5d[_0x590243(0x80)]>0x0&&_0x50f913[_0x590243(0x86)][_0x58579b['invoice']][_0x590243(0x8e)](..._0x4bcb5d);}));})),_0x50f913['data_transfer']={},await Promise[_0x4af8f9(0x8a)](_0x50f913[_0x4af8f9(0x7f)](async _0x34d692=>{const _0x59f9fe=_0x4af8f9;_0x50f913['data_transfer'][_0x34d692[_0x59f9fe(0x75)]]=[],await Promise[_0x59f9fe(0x8a)](_0x34d692[_0x59f9fe(0x67)][_0x59f9fe(0x7f)](async _0x11be92=>{const _0x12e78c=_0x59f9fe,_0x33557d=await transfers['aggregate']([{'$unwind':'$product'},{'$match':{'product.id_transaction_id':_0x11be92[_0x12e78c(0x83)][_0x12e78c(0x76)](),'product.To_invoice':_0x11be92[_0x12e78c(0x75)]}},{'$project':{'_id':'$product._id','product_name':_0x12e78c(0x6b),'product_code':_0x12e78c(0x6c),'quantity_available':_0x12e78c(0x73),'warehouse_name':_0x12e78c(0x9d),'warehouse_room':'$product.room_names','product_invoice':_0x12e78c(0xa3),'invoice':_0x12e78c(0x74),'id_transaction_id':_0x12e78c(0x90)}}]);console[_0x12e78c(0x7a)](_0x33557d),_0x33557d['length']>0x0&&_0x50f913[_0x12e78c(0x78)][_0x34d692[_0x12e78c(0x75)]][_0x12e78c(0x8e)](..._0x33557d);}));})),_0x319a33[_0x4af8f9(0xa0)]({'purchases_warehouse':_0x50f913,'data_sales':_0x50f913[_0x4af8f9(0x77)],'data_adjustment':_0x50f913[_0x4af8f9(0x86)],'data_transfer':_0x50f913[_0x4af8f9(0x78)]});}),module[a0_0x4ece19(0x9f)]=router;