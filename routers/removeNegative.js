function a0_0xc3b5(){const _0x3a9064=['$to_warehouse','status','$sale_product.id_transaction_from','all','_id','data_sales','/negative','log','render','errors','59028PiQYOu','$sale_product.product_code','$product.product_name','5dHnQGn','message','/warehouse_monitor','$product_details.product_name','$product_details.product_code','data_adjustment','$$invoice','14800005047429','../../models/all_models','$invoice','$product._id','$product.room_names','3147848wPhtSl','$product_details.product_stock','168216PGFwtf','monitor','data_transfer','$sale_product.invoice','$product.new_adjust_qty','warehouse_data','json','length','$sale_product.product_name','INCF-52068316','$product.id_transaction_id','\x20documents\x20updated','9luQyZT','valueOf','express','aggregate','invoice','$name','$product.to_quantity','table\x20page','$product_details','success','$product.product_code','push','$sale_product._id','$room','3853818apbLJV','map','exports','get','updateMany','$product','/join','$sale_product.quantity','3611013jkgUfI','2845548XDpdTK','Router','$product_details._id','modifiedCount','warehouses','$sale_product.room_name','6569024WXZCJT'];a0_0xc3b5=function(){return _0x3a9064;};return a0_0xc3b5();}function a0_0xdc41(_0x49f457,_0x24c9cb){const _0xc3b5eb=a0_0xc3b5();return a0_0xdc41=function(_0xdc41c6,_0x5eea55){_0xdc41c6=_0xdc41c6-0x7e;let _0x8f21c7=_0xc3b5eb[_0xdc41c6];return _0x8f21c7;},a0_0xdc41(_0x49f457,_0x24c9cb);}const a0_0x47ce27=a0_0xdc41;(function(_0x143559,_0x16cae2){const _0x91e7b4=a0_0xdc41,_0x849069=_0x143559();while(!![]){try{const _0x1eb660=parseInt(_0x91e7b4(0x88))/0x1+parseInt(_0x91e7b4(0xbc))/0x2*(parseInt(_0x91e7b4(0x94))/0x3)+parseInt(_0x91e7b4(0x86))/0x4+parseInt(_0x91e7b4(0xbf))/0x5*(-parseInt(_0x91e7b4(0xab))/0x6)+-parseInt(_0x91e7b4(0xaa))/0x7+parseInt(_0x91e7b4(0xb1))/0x8+-parseInt(_0x91e7b4(0xa2))/0x9;if(_0x1eb660===_0x16cae2)break;else _0x849069['push'](_0x849069['shift']());}catch(_0x352bb3){_0x849069['push'](_0x849069['shift']());}}}(a0_0xc3b5,0x6d041));const express=require(a0_0x47ce27(0x96)),app=express(),router=express[a0_0x47ce27(0xac)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x47ce27(0x82));router['get'](a0_0x47ce27(0xb8),async(_0x5797b9,_0x5d6865)=>{const _0x174aaa=a0_0x47ce27;try{const _0x339fca=await warehouse[_0x174aaa(0xa6)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x5d6865[_0x174aaa(0x8e)]({'status':_0x339fca[_0x174aaa(0xae)]+_0x174aaa(0x93)});}catch(_0x99787d){console[_0x174aaa(0xb9)](_0x174aaa(0x9b),_0x99787d),_0x5d6865[_0x174aaa(0xb3)](0xc8)[_0x174aaa(0x8e)]({'message':_0x99787d[_0x174aaa(0xc0)]});}}),router['get']('/checking',async(_0x1a6809,_0x21e3b3)=>{const _0x72d13a=a0_0x47ce27;try{const _0x4ea06c=await warehouse['aggregate']([{'$unwind':_0x72d13a(0x9c)},{'$match':{'product_details.invoice':_0x72d13a(0x91),'product_details.primary_code':_0x72d13a(0x81)}},{'$group':{'_id':{'name':_0x72d13a(0x99),'room':_0x72d13a(0xa1)},'products':{'$push':_0x72d13a(0x9c)}}}]);_0x21e3b3['json'](_0x4ea06c);}catch(_0x10712d){console[_0x72d13a(0xb9)]('table\x20page',_0x10712d),_0x21e3b3[_0x72d13a(0xb3)](0xc8)[_0x72d13a(0x8e)]({'message':_0x10712d[_0x72d13a(0xc0)]});}}),router[a0_0x47ce27(0xa5)](a0_0x47ce27(0xc1),async(_0x4c9c32,_0x3d699b)=>{const _0x29f09c=a0_0x47ce27;_0x3d699b[_0x29f09c(0xba)](_0x29f09c(0x89),{'success':_0x4c9c32['flash'](_0x29f09c(0x9d)),'errors':_0x4c9c32['flash'](_0x29f09c(0xbb))});}),router[a0_0x47ce27(0xa5)](a0_0x47ce27(0xa8),async(_0x47ca17,_0x39d1ac)=>{const _0x29c456=a0_0x47ce27;var _0x335ddd=await purchases[_0x29c456(0x97)]([{'$lookup':{'from':_0x29c456(0xaf),'let':{'invoice':_0x29c456(0x83)},'pipeline':[{'$unwind':_0x29c456(0x9c)},{'$match':{'$expr':{'$eq':[_0x29c456(0x80),'$product_details.invoice']}}},{'$project':{'_id':_0x29c456(0xad),'product_name':_0x29c456(0xc2),'product_code':_0x29c456(0x7e),'quantity_available':_0x29c456(0x87),'warehouse_name':_0x29c456(0x99),'warehouse_room':'$room','invoice':'$product_details.invoice'}}],'as':'warehouse_data'}}]);_0x335ddd['data_sales']={},await Promise['all'](_0x335ddd[_0x29c456(0xa3)](async _0x34d5eb=>{const _0x2e2ce3=_0x29c456;_0x335ddd[_0x2e2ce3(0xb7)][_0x34d5eb[_0x2e2ce3(0x98)]]=[],await Promise[_0x2e2ce3(0xb5)](_0x34d5eb[_0x2e2ce3(0x8d)][_0x2e2ce3(0xa3)](async _0x1f4372=>{const _0x1361db=_0x2e2ce3,_0x4b8db6=await sales[_0x1361db(0x97)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x1f4372[_0x1361db(0xb6)][_0x1361db(0x95)](),'sale_product.invoice':_0x1f4372[_0x1361db(0x98)]}},{'$project':{'_id':_0x1361db(0xa0),'product_name':_0x1361db(0x90),'product_code':_0x1361db(0xbd),'quantity_available':_0x1361db(0xa9),'warehouse_name':'$warehouse_name','warehouse_room':_0x1361db(0xb0),'product_invoice':_0x1361db(0x8b),'invoice':_0x1361db(0x83),'id_transaction_from':_0x1361db(0xb4)}}]);_0x4b8db6[_0x1361db(0x8f)]>0x0&&_0x335ddd[_0x1361db(0xb7)][_0x34d5eb[_0x1361db(0x98)]][_0x1361db(0x9f)](..._0x4b8db6);}));})),_0x335ddd['data_sales']=_0x335ddd['data_sales'],_0x335ddd['data_adjustment']={},await Promise[_0x29c456(0xb5)](_0x335ddd[_0x29c456(0xa3)](async _0x27fa72=>{const _0x15d7f5=_0x29c456;_0x335ddd[_0x15d7f5(0x7f)][_0x27fa72[_0x15d7f5(0x98)]]=[],await Promise[_0x15d7f5(0xb5)](_0x27fa72['warehouse_data'][_0x15d7f5(0xa3)](async _0x14154c=>{const _0x2c1c86=_0x15d7f5,_0x35f1b5=await adjustment[_0x2c1c86(0x97)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x14154c['_id']['valueOf'](),'product.invoice':_0x14154c[_0x2c1c86(0x98)]}},{'$project':{'_id':'$product._id','product_name':_0x2c1c86(0xbe),'product_code':'$product.product_code','quantity_available':_0x2c1c86(0x8c),'warehouse_name':'$warehouse_name','warehouse_room':_0x2c1c86(0x85),'product_invoice':'$product.invoice','invoice':_0x2c1c86(0x83),'id_transaction_from':'$product.id_transaction_from'}}]);_0x35f1b5['length']>0x0&&_0x335ddd[_0x2c1c86(0x7f)][_0x27fa72[_0x2c1c86(0x98)]][_0x2c1c86(0x9f)](..._0x35f1b5);}));})),_0x335ddd['data_transfer']={},await Promise['all'](_0x335ddd['map'](async _0x2ef2eb=>{const _0x466f0a=_0x29c456;_0x335ddd[_0x466f0a(0x8a)][_0x2ef2eb[_0x466f0a(0x98)]]=[],await Promise['all'](_0x2ef2eb[_0x466f0a(0x8d)][_0x466f0a(0xa3)](async _0x4feac3=>{const _0x1d5981=_0x466f0a,_0x2e7e2d=await transfers[_0x1d5981(0x97)]([{'$unwind':_0x1d5981(0xa7)},{'$match':{'product.id_transaction_id':_0x4feac3['_id'][_0x1d5981(0x95)](),'product.To_invoice':_0x4feac3[_0x1d5981(0x98)]}},{'$project':{'_id':_0x1d5981(0x84),'product_name':_0x1d5981(0xbe),'product_code':_0x1d5981(0x9e),'quantity_available':_0x1d5981(0x9a),'warehouse_name':_0x1d5981(0xb2),'warehouse_room':_0x1d5981(0x85),'product_invoice':'$product.to_room_name','invoice':_0x1d5981(0x83),'id_transaction_id':_0x1d5981(0x92)}}]);console[_0x1d5981(0xb9)](_0x2e7e2d),_0x2e7e2d[_0x1d5981(0x8f)]>0x0&&_0x335ddd[_0x1d5981(0x8a)][_0x2ef2eb[_0x1d5981(0x98)]][_0x1d5981(0x9f)](..._0x2e7e2d);}));})),_0x39d1ac[_0x29c456(0x8e)]({'purchases_warehouse':_0x335ddd,'data_sales':_0x335ddd[_0x29c456(0xb7)],'data_adjustment':_0x335ddd[_0x29c456(0x7f)],'data_transfer':_0x335ddd[_0x29c456(0x8a)]});}),module[a0_0x47ce27(0xa4)]=router;