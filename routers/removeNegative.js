function a0_0x2ce3(){const _0x2c3bae=['9944504ZLnSiJ','4220757kUJJlm','json','$product.new_adjust_qty','$product._id','$product_details.product_stock','updateMany','$$invoice','14800005047429','4ElaVfh','exports','$product_details.invoice','../../models/all_models','6200465VEKcFJ','warehouses','$sale_product._id','$to_warehouse','1148947yRbJvn','2050531dffGOr','success','$product.to_quantity','$product_details.product_name','flash','$product_details._id','$product_details','Router','$product.product_code','$product.invoice','get','7133694IqogCa','/negative','log','length','invoice','$invoice','modifiedCount','$product','warehouse_data','1294268bvdBFD','data_transfer','$name','data_sales','render','$product.to_room_name','$warehouse_name','aggregate','/checking','status','$sale_product.room_name','valueOf','all','$product.product_name','express','push','map','$room','$sale_product.invoice','_id','data_adjustment'];a0_0x2ce3=function(){return _0x2c3bae;};return a0_0x2ce3();}const a0_0xc2019b=a0_0x4489;function a0_0x4489(_0x40b9d3,_0x5c19e6){const _0x2ce3aa=a0_0x2ce3();return a0_0x4489=function(_0x448901,_0x492f57){_0x448901=_0x448901-0x138;let _0x2bc78b=_0x2ce3aa[_0x448901];return _0x2bc78b;},a0_0x4489(_0x40b9d3,_0x5c19e6);}(function(_0x4f2c1b,_0x2b9f66){const _0x3f05a8=a0_0x4489,_0x5f0b11=_0x4f2c1b();while(!![]){try{const _0x29a2cc=-parseInt(_0x3f05a8(0x15a))/0x1+-parseInt(_0x3f05a8(0x16f))/0x2+-parseInt(_0x3f05a8(0x14a))/0x3+parseInt(_0x3f05a8(0x152))/0x4*(parseInt(_0x3f05a8(0x156))/0x5)+parseInt(_0x3f05a8(0x166))/0x6+parseInt(_0x3f05a8(0x15b))/0x7+parseInt(_0x3f05a8(0x149))/0x8;if(_0x29a2cc===_0x2b9f66)break;else _0x5f0b11['push'](_0x5f0b11['shift']());}catch(_0x3ae855){_0x5f0b11['push'](_0x5f0b11['shift']());}}}(a0_0x2ce3,0xba0b6));const express=require(a0_0xc2019b(0x142)),app=express(),router=express[a0_0xc2019b(0x162)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0xc2019b(0x155));router['get'](a0_0xc2019b(0x167),async(_0x26ae71,_0x1d6859)=>{const _0x264c27=a0_0xc2019b;try{const _0x2d89b3=await warehouse[_0x264c27(0x14f)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x1d6859[_0x264c27(0x14b)]({'status':_0x2d89b3[_0x264c27(0x16c)]+'\x20documents\x20updated'});}catch(_0x8f1c58){console[_0x264c27(0x168)]('table\x20page',_0x8f1c58),_0x1d6859[_0x264c27(0x13d)](0xc8)[_0x264c27(0x14b)]({'message':_0x8f1c58['message']});}}),router[a0_0xc2019b(0x165)](a0_0xc2019b(0x13c),async(_0x15fda0,_0xab5683)=>{const _0x192e1b=a0_0xc2019b;try{const _0x14e136=await warehouse[_0x192e1b(0x13b)]([{'$unwind':_0x192e1b(0x161)},{'$match':{'product_details.invoice':'INCF-52068316','product_details.primary_code':_0x192e1b(0x151)}},{'$group':{'_id':{'name':_0x192e1b(0x171),'room':'$room'},'products':{'$push':_0x192e1b(0x161)}}}]);_0xab5683[_0x192e1b(0x14b)](_0x14e136);}catch(_0x11c407){console[_0x192e1b(0x168)]('table\x20page',_0x11c407),_0xab5683[_0x192e1b(0x13d)](0xc8)[_0x192e1b(0x14b)]({'message':_0x11c407['message']});}}),router['get']('/warehouse_monitor',async(_0x37d8dd,_0xf11d3b)=>{const _0x1239c1=a0_0xc2019b;_0xf11d3b[_0x1239c1(0x138)]('monitor',{'success':_0x37d8dd[_0x1239c1(0x15f)](_0x1239c1(0x15c)),'errors':_0x37d8dd[_0x1239c1(0x15f)]('errors')});}),router[a0_0xc2019b(0x165)]('/join',async(_0x44a948,_0x62374)=>{const _0x594025=a0_0xc2019b;var _0x4f3898=await purchases[_0x594025(0x13b)]([{'$lookup':{'from':_0x594025(0x157),'let':{'invoice':_0x594025(0x16b)},'pipeline':[{'$unwind':_0x594025(0x161)},{'$match':{'$expr':{'$eq':[_0x594025(0x150),_0x594025(0x154)]}}},{'$project':{'_id':_0x594025(0x160),'product_name':_0x594025(0x15e),'product_code':'$product_details.product_code','quantity_available':_0x594025(0x14e),'warehouse_name':_0x594025(0x171),'warehouse_room':_0x594025(0x145),'invoice':'$product_details.invoice'}}],'as':_0x594025(0x16e)}}]);_0x4f3898[_0x594025(0x172)]={},await Promise[_0x594025(0x140)](_0x4f3898['map'](async _0x541a90=>{const _0x1466b6=_0x594025;_0x4f3898[_0x1466b6(0x172)][_0x541a90[_0x1466b6(0x16a)]]=[],await Promise[_0x1466b6(0x140)](_0x541a90[_0x1466b6(0x16e)][_0x1466b6(0x144)](async _0x118f4c=>{const _0xe3e6c8=_0x1466b6,_0x254792=await sales[_0xe3e6c8(0x13b)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x118f4c[_0xe3e6c8(0x147)][_0xe3e6c8(0x13f)](),'sale_product.invoice':_0x118f4c[_0xe3e6c8(0x16a)]}},{'$project':{'_id':_0xe3e6c8(0x158),'product_name':'$sale_product.product_name','product_code':'$sale_product.product_code','quantity_available':'$sale_product.quantity','warehouse_name':_0xe3e6c8(0x13a),'warehouse_room':_0xe3e6c8(0x13e),'product_invoice':_0xe3e6c8(0x146),'invoice':_0xe3e6c8(0x16b),'id_transaction_from':'$sale_product.id_transaction_from'}}]);_0x254792[_0xe3e6c8(0x169)]>0x0&&_0x4f3898['data_sales'][_0x541a90['invoice']][_0xe3e6c8(0x143)](..._0x254792);}));})),_0x4f3898['data_sales']=_0x4f3898[_0x594025(0x172)],_0x4f3898[_0x594025(0x148)]={},await Promise[_0x594025(0x140)](_0x4f3898[_0x594025(0x144)](async _0x330356=>{const _0x5a748c=_0x594025;_0x4f3898['data_adjustment'][_0x330356[_0x5a748c(0x16a)]]=[],await Promise[_0x5a748c(0x140)](_0x330356[_0x5a748c(0x16e)][_0x5a748c(0x144)](async _0x152bc4=>{const _0x55d641=_0x5a748c,_0x56fe3c=await adjustment['aggregate']([{'$unwind':_0x55d641(0x16d)},{'$match':{'product.id_transaction_from':_0x152bc4[_0x55d641(0x147)][_0x55d641(0x13f)](),'product.invoice':_0x152bc4[_0x55d641(0x16a)]}},{'$project':{'_id':_0x55d641(0x14d),'product_name':'$product.product_name','product_code':_0x55d641(0x163),'quantity_available':_0x55d641(0x14c),'warehouse_name':'$warehouse_name','warehouse_room':'$product.room_names','product_invoice':_0x55d641(0x164),'invoice':_0x55d641(0x16b),'id_transaction_from':'$product.id_transaction_from'}}]);_0x56fe3c[_0x55d641(0x169)]>0x0&&_0x4f3898[_0x55d641(0x148)][_0x330356[_0x55d641(0x16a)]][_0x55d641(0x143)](..._0x56fe3c);}));})),_0x4f3898[_0x594025(0x170)]={},await Promise['all'](_0x4f3898[_0x594025(0x144)](async _0x1c78ed=>{const _0x138427=_0x594025;_0x4f3898[_0x138427(0x170)][_0x1c78ed[_0x138427(0x16a)]]=[],await Promise[_0x138427(0x140)](_0x1c78ed[_0x138427(0x16e)]['map'](async _0x33a51b=>{const _0x45c28b=_0x138427,_0x211bd9=await transfers['aggregate']([{'$unwind':_0x45c28b(0x16d)},{'$match':{'product.id_transaction_id':_0x33a51b[_0x45c28b(0x147)][_0x45c28b(0x13f)](),'product.To_invoice':_0x33a51b['invoice']}},{'$project':{'_id':_0x45c28b(0x14d),'product_name':_0x45c28b(0x141),'product_code':_0x45c28b(0x163),'quantity_available':_0x45c28b(0x15d),'warehouse_name':_0x45c28b(0x159),'warehouse_room':'$product.room_names','product_invoice':_0x45c28b(0x139),'invoice':_0x45c28b(0x16b),'id_transaction_id':'$product.id_transaction_id'}}]);console[_0x45c28b(0x168)](_0x211bd9),_0x211bd9[_0x45c28b(0x169)]>0x0&&_0x4f3898[_0x45c28b(0x170)][_0x1c78ed[_0x45c28b(0x16a)]][_0x45c28b(0x143)](..._0x211bd9);}));})),_0x62374[_0x594025(0x14b)]({'purchases_warehouse':_0x4f3898,'data_sales':_0x4f3898[_0x594025(0x172)],'data_adjustment':_0x4f3898[_0x594025(0x148)],'data_transfer':_0x4f3898[_0x594025(0x170)]});}),module[a0_0xc2019b(0x153)]=router;