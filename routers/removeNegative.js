function a0_0x5e6a(){const _0x43fb6a=['$sale_product.product_code','$product.id_transaction_from','updateMany','\x20documents\x20updated','$to_warehouse','push','../../models/all_models','express','map','$invoice','560cfUlSu','55zRXRww','table\x20page','12042770TJwQxO','$product.product_code','/negative','get','$warehouse_name','$sale_product.id_transaction_from','length','status','valueOf','$sale_product.invoice','$product.to_quantity','/checking','$product.new_adjust_qty','$room','20187nLCSEJ','message','warehouse_data','exports','success','14800005047429','1332756Yrmute','$product_details','data_adjustment','1273YHwADT','$sale_product.product_name','$product.to_room_name','data_sales','56224edutHT','$product','all','$product.product_name','INCF-52068316','json','aggregate','flash','$product_details.invoice','data_transfer','log','warehouses','3183306lLcwpv','errors','modifiedCount','$product.room_names','$product.id_transaction_id','$sale_product.quantity','2104zqWoeJ','invoice','$sale_product._id','Router','/warehouse_monitor','_id','75342ssFkRG','$product._id'];a0_0x5e6a=function(){return _0x43fb6a;};return a0_0x5e6a();}function a0_0x596c(_0x388ad1,_0x2186b5){const _0x5e6a53=a0_0x5e6a();return a0_0x596c=function(_0x596c68,_0x1f9e83){_0x596c68=_0x596c68-0x118;let _0x2a45bc=_0x5e6a53[_0x596c68];return _0x2a45bc;},a0_0x596c(_0x388ad1,_0x2186b5);}const a0_0x124c11=a0_0x596c;(function(_0xbd6dfe,_0x275158){const _0x388cc8=a0_0x596c,_0x384146=_0xbd6dfe();while(!![]){try{const _0x459d99=-parseInt(_0x388cc8(0x12e))/0x1*(parseInt(_0x388cc8(0x156))/0x2)+parseInt(_0x388cc8(0x12b))/0x3+parseInt(_0x388cc8(0x132))/0x4+parseInt(_0x388cc8(0x157))/0x5*(parseInt(_0x388cc8(0x14a))/0x6)+-parseInt(_0x388cc8(0x13e))/0x7+parseInt(_0x388cc8(0x144))/0x8*(-parseInt(_0x388cc8(0x125))/0x9)+parseInt(_0x388cc8(0x159))/0xa;if(_0x459d99===_0x275158)break;else _0x384146['push'](_0x384146['shift']());}catch(_0x4b7c40){_0x384146['push'](_0x384146['shift']());}}}(a0_0x5e6a,0x618f5));const express=require(a0_0x124c11(0x153)),app=express(),router=express[a0_0x124c11(0x147)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x124c11(0x152));router['get'](a0_0x124c11(0x119),async(_0x4eab2b,_0x4db8c0)=>{const _0x1bd9ba=a0_0x124c11;try{const _0x26470d=await warehouse[_0x1bd9ba(0x14e)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x4db8c0[_0x1bd9ba(0x137)]({'status':_0x26470d[_0x1bd9ba(0x140)]+_0x1bd9ba(0x14f)});}catch(_0x261779){console[_0x1bd9ba(0x13c)](_0x1bd9ba(0x158),_0x261779),_0x4db8c0['status'](0xc8)['json']({'message':_0x261779[_0x1bd9ba(0x126)]});}}),router[a0_0x124c11(0x11a)](a0_0x124c11(0x122),async(_0x442274,_0x427f06)=>{const _0x30160d=a0_0x124c11;try{const _0x53c7d3=await warehouse['aggregate']([{'$unwind':_0x30160d(0x12c)},{'$match':{'product_details.invoice':_0x30160d(0x136),'product_details.primary_code':_0x30160d(0x12a)}},{'$group':{'_id':{'name':'$name','room':_0x30160d(0x124)},'products':{'$push':_0x30160d(0x12c)}}}]);_0x427f06[_0x30160d(0x137)](_0x53c7d3);}catch(_0x5e8924){console[_0x30160d(0x13c)](_0x30160d(0x158),_0x5e8924),_0x427f06[_0x30160d(0x11e)](0xc8)[_0x30160d(0x137)]({'message':_0x5e8924[_0x30160d(0x126)]});}}),router[a0_0x124c11(0x11a)](a0_0x124c11(0x148),async(_0x46006f,_0x3381d8)=>{const _0x4ad7f0=a0_0x124c11;_0x3381d8['render']('monitor',{'success':_0x46006f[_0x4ad7f0(0x139)](_0x4ad7f0(0x129)),'errors':_0x46006f[_0x4ad7f0(0x139)](_0x4ad7f0(0x13f))});}),router['get']('/join',async(_0x26c12e,_0x5eebf8)=>{const _0x4fab3f=a0_0x124c11;var _0x4b32cb=await purchases[_0x4fab3f(0x138)]([{'$lookup':{'from':_0x4fab3f(0x13d),'let':{'invoice':'$invoice'},'pipeline':[{'$unwind':_0x4fab3f(0x12c)},{'$match':{'$expr':{'$eq':['$$invoice','$product_details.invoice']}}},{'$project':{'_id':'$product_details._id','product_name':'$product_details.product_name','product_code':'$product_details.product_code','quantity_available':'$product_details.product_stock','warehouse_name':'$name','warehouse_room':'$room','invoice':_0x4fab3f(0x13a)}}],'as':'warehouse_data'}}]);_0x4b32cb[_0x4fab3f(0x131)]={},await Promise[_0x4fab3f(0x134)](_0x4b32cb[_0x4fab3f(0x154)](async _0x2cfab9=>{const _0x2baf19=_0x4fab3f;_0x4b32cb[_0x2baf19(0x131)][_0x2cfab9[_0x2baf19(0x145)]]=[],await Promise[_0x2baf19(0x134)](_0x2cfab9[_0x2baf19(0x127)]['map'](async _0x5b35af=>{const _0x300ce7=_0x2baf19,_0x137119=await sales[_0x300ce7(0x138)]([{'$unwind':'$sale_product'},{'$match':{'sale_product.id_transaction_from':_0x5b35af['_id'][_0x300ce7(0x11f)](),'sale_product.invoice':_0x5b35af['invoice']}},{'$project':{'_id':_0x300ce7(0x146),'product_name':_0x300ce7(0x12f),'product_code':_0x300ce7(0x14c),'quantity_available':_0x300ce7(0x143),'warehouse_name':_0x300ce7(0x11b),'warehouse_room':'$sale_product.room_name','product_invoice':_0x300ce7(0x120),'invoice':_0x300ce7(0x155),'id_transaction_from':_0x300ce7(0x11c)}}]);_0x137119[_0x300ce7(0x11d)]>0x0&&_0x4b32cb[_0x300ce7(0x131)][_0x2cfab9['invoice']][_0x300ce7(0x151)](..._0x137119);}));})),_0x4b32cb[_0x4fab3f(0x131)]=_0x4b32cb[_0x4fab3f(0x131)],_0x4b32cb['data_adjustment']={},await Promise[_0x4fab3f(0x134)](_0x4b32cb[_0x4fab3f(0x154)](async _0x2ca4b5=>{const _0x5ac97c=_0x4fab3f;_0x4b32cb[_0x5ac97c(0x12d)][_0x2ca4b5[_0x5ac97c(0x145)]]=[],await Promise['all'](_0x2ca4b5[_0x5ac97c(0x127)][_0x5ac97c(0x154)](async _0x25a2e2=>{const _0xa46228=_0x5ac97c,_0x39ffcf=await adjustment[_0xa46228(0x138)]([{'$unwind':_0xa46228(0x133)},{'$match':{'product.id_transaction_from':_0x25a2e2[_0xa46228(0x149)]['valueOf'](),'product.invoice':_0x25a2e2[_0xa46228(0x145)]}},{'$project':{'_id':'$product._id','product_name':'$product.product_name','product_code':_0xa46228(0x118),'quantity_available':_0xa46228(0x123),'warehouse_name':_0xa46228(0x11b),'warehouse_room':_0xa46228(0x141),'product_invoice':'$product.invoice','invoice':_0xa46228(0x155),'id_transaction_from':_0xa46228(0x14d)}}]);_0x39ffcf[_0xa46228(0x11d)]>0x0&&_0x4b32cb[_0xa46228(0x12d)][_0x2ca4b5['invoice']]['push'](..._0x39ffcf);}));})),_0x4b32cb[_0x4fab3f(0x13b)]={},await Promise[_0x4fab3f(0x134)](_0x4b32cb[_0x4fab3f(0x154)](async _0x264805=>{const _0x15a099=_0x4fab3f;_0x4b32cb[_0x15a099(0x13b)][_0x264805[_0x15a099(0x145)]]=[],await Promise['all'](_0x264805['warehouse_data'][_0x15a099(0x154)](async _0x453586=>{const _0x21cacd=_0x15a099,_0x44ded2=await transfers[_0x21cacd(0x138)]([{'$unwind':_0x21cacd(0x133)},{'$match':{'product.id_transaction_id':_0x453586[_0x21cacd(0x149)]['valueOf'](),'product.To_invoice':_0x453586['invoice']}},{'$project':{'_id':_0x21cacd(0x14b),'product_name':_0x21cacd(0x135),'product_code':_0x21cacd(0x118),'quantity_available':_0x21cacd(0x121),'warehouse_name':_0x21cacd(0x150),'warehouse_room':_0x21cacd(0x141),'product_invoice':_0x21cacd(0x130),'invoice':'$invoice','id_transaction_id':_0x21cacd(0x142)}}]);console[_0x21cacd(0x13c)](_0x44ded2),_0x44ded2[_0x21cacd(0x11d)]>0x0&&_0x4b32cb[_0x21cacd(0x13b)][_0x264805[_0x21cacd(0x145)]]['push'](..._0x44ded2);}));})),_0x5eebf8['json']({'purchases_warehouse':_0x4b32cb,'data_sales':_0x4b32cb[_0x4fab3f(0x131)],'data_adjustment':_0x4b32cb['data_adjustment'],'data_transfer':_0x4b32cb[_0x4fab3f(0x13b)]});}),module[a0_0x124c11(0x128)]=router;