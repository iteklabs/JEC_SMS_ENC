const a0_0x2884ad=a0_0x35e5;(function(_0x558027,_0x16b214){const _0x572cc3=a0_0x35e5,_0x406c8c=_0x558027();while(!![]){try{const _0x36e64e=-parseInt(_0x572cc3(0x189))/0x1*(parseInt(_0x572cc3(0x163))/0x2)+-parseInt(_0x572cc3(0x185))/0x3*(-parseInt(_0x572cc3(0x158))/0x4)+parseInt(_0x572cc3(0x18d))/0x5*(parseInt(_0x572cc3(0x182))/0x6)+parseInt(_0x572cc3(0x162))/0x7*(-parseInt(_0x572cc3(0x199))/0x8)+parseInt(_0x572cc3(0x18b))/0x9+parseInt(_0x572cc3(0x196))/0xa+-parseInt(_0x572cc3(0x191))/0xb*(-parseInt(_0x572cc3(0x17a))/0xc);if(_0x36e64e===_0x16b214)break;else _0x406c8c['push'](_0x406c8c['shift']());}catch(_0xe379fd){_0x406c8c['push'](_0x406c8c['shift']());}}}(a0_0x9a7c,0x7d013));function a0_0x35e5(_0x1b617a,_0x2c7874){const _0x9a7ce7=a0_0x9a7c();return a0_0x35e5=function(_0x35e580,_0x254c31){_0x35e580=_0x35e580-0x158;let _0x362358=_0x9a7ce7[_0x35e580];return _0x362358;},a0_0x35e5(_0x1b617a,_0x2c7874);}const express=require('express'),app=express(),router=express[a0_0x2884ad(0x198)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data,email_settings,supervisor_settings,purchases_finished,sales_finished,adjustment_finished,transfers,transfers_finished,sales,adjustment}=require(a0_0x2884ad(0x15f));router['get'](a0_0x2884ad(0x17b),async(_0x368ca6,_0x21a669)=>{const _0x4f8808=a0_0x2884ad;try{const _0x38c593=await warehouse[_0x4f8808(0x18f)]({'product_details.product_stock':{'$lt':0x0}},{'$mul':{'product_details.$[elem].product_stock':-0x1}},{'arrayFilters':[{'elem.product_stock':{'$lt':0x0}}]});_0x21a669[_0x4f8808(0x194)]({'status':_0x38c593[_0x4f8808(0x170)]+_0x4f8808(0x19a)});}catch(_0x311fa2){console[_0x4f8808(0x18e)]('table\x20page',_0x311fa2),_0x21a669[_0x4f8808(0x17c)](0xc8)[_0x4f8808(0x194)]({'message':_0x311fa2['message']});}}),router['get'](a0_0x2884ad(0x168),async(_0x31b7cc,_0x16815a)=>{const _0x46d030=a0_0x2884ad;try{const _0x3b58f3=await warehouse[_0x46d030(0x176)]([{'$unwind':_0x46d030(0x173)},{'$match':{'product_details.invoice':_0x46d030(0x166),'product_details.primary_code':_0x46d030(0x167)}},{'$group':{'_id':{'name':_0x46d030(0x178),'room':_0x46d030(0x15d)},'products':{'$push':_0x46d030(0x173)}}}]);_0x16815a['json'](_0x3b58f3);}catch(_0x3b6c69){console['log']('table\x20page',_0x3b6c69),_0x16815a[_0x46d030(0x17c)](0xc8)['json']({'message':_0x3b6c69[_0x46d030(0x17d)]});}}),router[a0_0x2884ad(0x16c)]('/warehouse_monitor',async(_0x2a3f61,_0x28595f)=>{const _0x5d00f1=a0_0x2884ad;_0x28595f['render'](_0x5d00f1(0x175),{'success':_0x2a3f61[_0x5d00f1(0x187)](_0x5d00f1(0x15a)),'errors':_0x2a3f61[_0x5d00f1(0x187)]('errors')});}),router['get'](a0_0x2884ad(0x172),async(_0x2edbbd,_0x5c74af)=>{const _0x123cee=a0_0x2884ad;var _0x5085f9=await purchases['aggregate']([{'$lookup':{'from':_0x123cee(0x184),'let':{'invoice':_0x123cee(0x193)},'pipeline':[{'$unwind':_0x123cee(0x173)},{'$match':{'$expr':{'$eq':[_0x123cee(0x183),_0x123cee(0x16a)]}}},{'$project':{'_id':'$product_details._id','product_name':_0x123cee(0x160),'product_code':'$product_details.product_code','quantity_available':_0x123cee(0x169),'warehouse_name':_0x123cee(0x178),'warehouse_room':_0x123cee(0x15d),'invoice':_0x123cee(0x16a)}}],'as':_0x123cee(0x15e)}}]);_0x5085f9[_0x123cee(0x18a)]={},await Promise[_0x123cee(0x159)](_0x5085f9['map'](async _0x3bd4ad=>{const _0x4421b5=_0x123cee;_0x5085f9[_0x4421b5(0x18a)][_0x3bd4ad['invoice']]=[],await Promise['all'](_0x3bd4ad[_0x4421b5(0x15e)][_0x4421b5(0x161)](async _0x2f7b3f=>{const _0x3e20b8=_0x4421b5,_0xca1797=await sales[_0x3e20b8(0x176)]([{'$unwind':_0x3e20b8(0x165)},{'$match':{'sale_product.id_transaction_from':_0x2f7b3f['_id'][_0x3e20b8(0x16e)](),'sale_product.invoice':_0x2f7b3f[_0x3e20b8(0x177)]}},{'$project':{'_id':_0x3e20b8(0x186),'product_name':_0x3e20b8(0x16b),'product_code':_0x3e20b8(0x18c),'quantity_available':_0x3e20b8(0x16d),'warehouse_name':_0x3e20b8(0x17f),'warehouse_room':'$sale_product.room_name','product_invoice':_0x3e20b8(0x171),'invoice':_0x3e20b8(0x193),'id_transaction_from':_0x3e20b8(0x15b)}}]);_0xca1797[_0x3e20b8(0x180)]>0x0&&_0x5085f9['data_sales'][_0x3bd4ad[_0x3e20b8(0x177)]][_0x3e20b8(0x192)](..._0xca1797);}));})),_0x5085f9['data_sales']=_0x5085f9[_0x123cee(0x18a)],_0x5085f9[_0x123cee(0x197)]={},await Promise[_0x123cee(0x159)](_0x5085f9['map'](async _0x294092=>{const _0x866f82=_0x123cee;_0x5085f9[_0x866f82(0x197)][_0x294092['invoice']]=[],await Promise[_0x866f82(0x159)](_0x294092[_0x866f82(0x15e)][_0x866f82(0x161)](async _0x1b1a2d=>{const _0x491be9=_0x866f82,_0x507b0a=await adjustment[_0x491be9(0x176)]([{'$unwind':'$product'},{'$match':{'product.id_transaction_from':_0x1b1a2d[_0x491be9(0x195)][_0x491be9(0x16e)](),'product.invoice':_0x1b1a2d[_0x491be9(0x177)]}},{'$project':{'_id':'$product._id','product_name':_0x491be9(0x190),'product_code':_0x491be9(0x179),'quantity_available':_0x491be9(0x164),'warehouse_name':'$warehouse_name','warehouse_room':_0x491be9(0x188),'product_invoice':'$product.invoice','invoice':_0x491be9(0x193),'id_transaction_from':_0x491be9(0x16f)}}]);_0x507b0a[_0x491be9(0x180)]>0x0&&_0x5085f9[_0x491be9(0x197)][_0x294092['invoice']][_0x491be9(0x192)](..._0x507b0a);}));})),_0x5085f9[_0x123cee(0x17e)]={},await Promise[_0x123cee(0x159)](_0x5085f9[_0x123cee(0x161)](async _0x5c1c44=>{const _0x1f7403=_0x123cee;_0x5085f9[_0x1f7403(0x17e)][_0x5c1c44[_0x1f7403(0x177)]]=[],await Promise[_0x1f7403(0x159)](_0x5c1c44[_0x1f7403(0x15e)][_0x1f7403(0x161)](async _0x29ef7f=>{const _0x110871=_0x1f7403,_0x26e156=await transfers[_0x110871(0x176)]([{'$unwind':_0x110871(0x174)},{'$match':{'product.id_transaction_id':_0x29ef7f[_0x110871(0x195)][_0x110871(0x16e)](),'product.To_invoice':_0x29ef7f[_0x110871(0x177)]}},{'$project':{'_id':'$product._id','product_name':_0x110871(0x190),'product_code':'$product.product_code','quantity_available':_0x110871(0x15c),'warehouse_name':'$to_warehouse','warehouse_room':_0x110871(0x188),'product_invoice':'$product.to_room_name','invoice':_0x110871(0x193),'id_transaction_id':'$product.id_transaction_id'}}]);console[_0x110871(0x18e)](_0x26e156),_0x26e156[_0x110871(0x180)]>0x0&&_0x5085f9[_0x110871(0x17e)][_0x5c1c44['invoice']][_0x110871(0x192)](..._0x26e156);}));})),_0x5c74af[_0x123cee(0x194)]({'purchases_warehouse':_0x5085f9,'data_sales':_0x5085f9[_0x123cee(0x18a)],'data_adjustment':_0x5085f9[_0x123cee(0x197)],'data_transfer':_0x5085f9[_0x123cee(0x17e)]});}),module[a0_0x2884ad(0x181)]=router;function a0_0x9a7c(){const _0x48e9b7=['data_transfer','$warehouse_name','length','exports','24jjXoZg','$$invoice','warehouses','3zQyyhN','$sale_product._id','flash','$product.room_names','1tMhkjQ','data_sales','2583198fKRgoh','$sale_product.product_code','15315yQOiAR','log','updateMany','$product.product_name','52778AMLlqb','push','$invoice','json','_id','1919570lbqJpO','data_adjustment','Router','899736Grnljc','\x20documents\x20updated','1298500hDcOoY','all','success','$sale_product.id_transaction_from','$product.to_quantity','$room','warehouse_data','../../models/all_models','$product_details.product_name','map','7ITziGi','968096dwrFnV','$product.new_adjust_qty','$sale_product','INCF-52068316','14800005047429','/checking','$product_details.product_stock','$product_details.invoice','$sale_product.product_name','get','$sale_product.quantity','valueOf','$product.id_transaction_from','modifiedCount','$sale_product.invoice','/join','$product_details','$product','monitor','aggregate','invoice','$name','$product.product_code','732XBtaTn','/negative','status','message'];a0_0x9a7c=function(){return _0x48e9b7;};return a0_0x9a7c();}