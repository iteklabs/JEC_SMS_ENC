const a0_0x52d9d5=a0_0x448f;(function(_0x34fc0d,_0x3ca1da){const _0x2c5068=a0_0x448f,_0x2f6489=_0x34fc0d();while(!![]){try{const _0x3a2a4a=-parseInt(_0x2c5068(0x1d0))/0x1+parseInt(_0x2c5068(0x208))/0x2+-parseInt(_0x2c5068(0x1e9))/0x3*(-parseInt(_0x2c5068(0x1c7))/0x4)+-parseInt(_0x2c5068(0x1bd))/0x5+parseInt(_0x2c5068(0x1ed))/0x6+parseInt(_0x2c5068(0x1f9))/0x7+-parseInt(_0x2c5068(0x1d3))/0x8;if(_0x3a2a4a===_0x3ca1da)break;else _0x2f6489['push'](_0x2f6489['shift']());}catch(_0x5df6a8){_0x2f6489['push'](_0x2f6489['shift']());}}}(a0_0x2921,0x18a72));const express=require(a0_0x52d9d5(0x20f)),app=express(),router=express[a0_0x52d9d5(0x1e3)](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x52d9d5(0x1ce)),auth=require(a0_0x52d9d5(0x1ea));function a0_0x448f(_0x2d5f10,_0x518f1a){const _0x292177=a0_0x2921();return a0_0x448f=function(_0x448ffd,_0x1347fd){_0x448ffd=_0x448ffd-0x1bd;let _0x4c85bf=_0x292177[_0x448ffd];return _0x4c85bf;},a0_0x448f(_0x2d5f10,_0x518f1a);}var timezones=require(a0_0x52d9d5(0x1d2));const users=require('../public/language/languages.json');function a0_0x2921(){const _0x20bcef=['$product_details.product_stock','Portuguese\x20(BR)','$product_details.product_name','../models/all_models','Arabic','40941wJuDwi','$product_details.bin','timezones-list','886088fXhbDD','$product_details.bay','errors','Arabic\x20(ae)','/staff_sales_id','timezone','$_id.bay','English\x20(US)','DRY\x20STORAGE','json','German','language','/Rooms_data2','/MapData2','warehouse','exports','Router','staff','Raw\x20Materials','$products','all','$product_details.batch_code','6KnSiId','../middleware/auth','Return\x20Goods','$product_code','432642JtmkGu','Spanish','Finished\x20Goods','$$product.product_quantity','Enabled','log','pack','$_id.bin','$product_details.level','$expiry_date','/Rooms_data','email','700588WRhVQe','find','message','Hindi','post','aggregate','toLocaleString','All','$product_details.expiry_date','/map_value','$product_details.product_code','warehousemap_incoming','French','$count','findOne','368638zmrmjs','user','status','$_id.type','$room','/staff_sales','QA\x20Warehouse','express','/view','en-US','589840iXNamb','$product_details','success','Portuguese','body','$product_details.floorlevel','$product_details.type','$name','$_id.level','flash','28276yqJmpF','$production_date','$_id','/MapData'];a0_0x2921=function(){return _0x20bcef;};return a0_0x2921();}router['get'](a0_0x52d9d5(0x210),auth,async(_0x20fc6f,_0x1870ad)=>{const _0x4e1c96=a0_0x52d9d5;try{const {username:_0x401bff,email:_0x41d0f6,role:_0x40f137}=_0x20fc6f[_0x4e1c96(0x209)],_0x4fc519=_0x20fc6f[_0x4e1c96(0x209)],_0x905b38=await profile[_0x4e1c96(0x207)]({'email':_0x4fc519[_0x4e1c96(0x1f8)]}),_0x22af12=await master_shop[_0x4e1c96(0x1fa)]();let _0xf7f6b5;if(_0x4fc519['role']==_0x4e1c96(0x1e4)){const _0x446590=await staff[_0x4e1c96(0x207)]({'email':_0x4fc519[_0x4e1c96(0x1f8)]});_0xf7f6b5=await warehouse[_0x4e1c96(0x1fe)]([{'$match':{'status':_0x4e1c96(0x1f1),'name':_0x446590[_0x4e1c96(0x1e1)]}},{'$group':{'_id':_0x4e1c96(0x1c4),'name':{'$first':'$name'}}},{'$sort':{'name':-0x1}}]);}else _0xf7f6b5=await warehouse[_0x4e1c96(0x1fe)]([{'$match':{'status':_0x4e1c96(0x1f1)}},{'$group':{'_id':'$name','name':{'$first':_0x4e1c96(0x1c4)}}},{'$sort':{'name':-0x1}}]);const _0x2abcda=new Date()[_0x4e1c96(0x1ff)](_0x4e1c96(0x211),{'timeZone':_0x22af12[0x0][_0x4e1c96(0x1d8)]});if(_0x22af12[0x0][_0x4e1c96(0x1de)]==_0x4e1c96(0x1da))var _0xfcf6df=users['English'];else{if(_0x22af12[0x0]['language']==_0x4e1c96(0x1fc))var _0xfcf6df=users[_0x4e1c96(0x1fc)];else{if(_0x22af12[0x0]['language']==_0x4e1c96(0x1dd))var _0xfcf6df=users[_0x4e1c96(0x1dd)];else{if(_0x22af12[0x0][_0x4e1c96(0x1de)]==_0x4e1c96(0x1ee))var _0xfcf6df=users[_0x4e1c96(0x1ee)];else{if(_0x22af12[0x0]['language']==_0x4e1c96(0x205))var _0xfcf6df=users[_0x4e1c96(0x205)];else{if(_0x22af12[0x0][_0x4e1c96(0x1de)]==_0x4e1c96(0x1cc))var _0xfcf6df=users[_0x4e1c96(0x1c0)];else{if(_0x22af12[0x0][_0x4e1c96(0x1de)]=='Chinese')var _0xfcf6df=users['Chinese'];else{if(_0x22af12[0x0][_0x4e1c96(0x1de)]==_0x4e1c96(0x1d6))var _0xfcf6df=users[_0x4e1c96(0x1cf)];}}}}}}}_0x1870ad['render'](_0x4e1c96(0x204),{'success':_0x20fc6f['flash'](_0x4e1c96(0x1bf)),'errors':_0x20fc6f[_0x4e1c96(0x1c6)](_0x4e1c96(0x1d5)),'role':_0x4fc519,'profile':_0x905b38,'master_shop':_0x22af12,'timezones':timezones,'language':_0xfcf6df,'warehouse':_0xf7f6b5});}catch(_0x322d1c){console[_0x4e1c96(0x1f2)](_0x322d1c),_0x1870ad[_0x4e1c96(0x20a)](0xc8)[_0x4e1c96(0x1dc)]({'message':_0x322d1c[_0x4e1c96(0x1fb)]});}}),router[a0_0x52d9d5(0x1fd)](a0_0x52d9d5(0x1ca),async(_0x5b42ed,_0x3ab27e)=>{const _0x3284de=a0_0x52d9d5,{warehouseNew:_0x38db27,rooms:_0x53ec2f,Type:_0xe3b698}=_0x5b42ed[_0x3284de(0x1c1)],_0x2c2554=await warehouse[_0x3284de(0x1fe)]([{'$unwind':_0x3284de(0x1be)},{'$match':{'name':_0x38db27,'room':_0x53ec2f,'product_details.type':_0xe3b698}},{'$group':{'_id':{'bay':_0x3284de(0x1d4),'bin':_0x3284de(0x1d1),'type':_0x3284de(0x1c3),'floorlevel':_0x3284de(0x1c2)},'products':{'$push':{'product_name':_0x3284de(0x1cd),'product_quantity':_0x3284de(0x1cb),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x3284de(0x1cb),0x0]},'then':_0x3284de(0x1cb),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','bin':_0x3284de(0x1f4),'type':_0x3284de(0x20b),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x3284de(0x1e6),'as':'product','cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x3ab27e['json'](_0x2c2554);}),router[a0_0x52d9d5(0x1fd)](a0_0x52d9d5(0x1e0),async(_0x36a157,_0x52d16e)=>{const _0x238a72=a0_0x52d9d5,{warehouseNew:_0xee04cf,rooms:_0x31fefd,room_cat:_0x4e4814}=_0x36a157[_0x238a72(0x1c1)];let _0x338333;if(_0x4e4814==_0x238a72(0x200))_0x338333=await warehouse[_0x238a72(0x1fe)]([{'$unwind':_0x238a72(0x1be)},{'$match':{'name':_0xee04cf}},{'$group':{'_id':{'bay':_0x238a72(0x1d4),'product':'$product_details.product_name','expiry':_0x238a72(0x201)},'count':{'$sum':_0x238a72(0x1cb)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x238a72(0x201)},'batch_code':{'$first':_0x238a72(0x1e8)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':_0x238a72(0x1d9),'products':{'$push':{'product':'$_id.product','quantity':_0x238a72(0x206),'production_date':_0x238a72(0x1c8),'expiry_date':_0x238a72(0x1f6),'batch_code':'$batch_code','product_code':_0x238a72(0x1ec)}},'totalQuantity':{'$sum':_0x238a72(0x206)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x238a72(0x1c9),'products':0x1,'totalQuantity':0x1}}]),console[_0x238a72(0x1f2)](_0x4e4814);else{}_0x52d16e['json'](_0x338333);}),router[a0_0x52d9d5(0x1fd)](a0_0x52d9d5(0x1f7),async(_0xf78f36,_0x3268d1)=>{const _0x595a29=a0_0x52d9d5;try{const {warehouse_name:_0x5a56d3}=_0xf78f36[_0x595a29(0x1c1)];var _0x4a7f45='';_0x4a7f45=[{'$match':{'name':_0x5a56d3,'status':_0x595a29(0x1f1)}},{'$group':{'_id':'$_id','room_name':{'$first':_0x595a29(0x20c)}}},{'$sort':{'room_name':0x1}}];const _0x56bb6e=await warehouse[_0x595a29(0x1fe)](_0x4a7f45);_0x3268d1[_0x595a29(0x20a)](0xc8)[_0x595a29(0x1dc)](_0x56bb6e);}catch(_0x3fe8a9){_0x3268d1[_0x595a29(0x20a)](0x190)[_0x595a29(0x1dc)]({'errorMessage':_0x3fe8a9['message']});}}),router[a0_0x52d9d5(0x1fd)](a0_0x52d9d5(0x1df),async(_0x15f086,_0x32858)=>{const _0xc68827=a0_0x52d9d5;try{const {warehouse_name:_0x25581e,cat:_0x19bb49,valNew:_0x408906}=_0x15f086[_0xc68827(0x1c1)];var _0x500c3e='',_0x4bc20b='';if(_0x19bb49==_0xc68827(0x1e5))_0x500c3e=_0xc68827(0x1eb),_0x408906==_0xc68827(0x1f3)?_0x4bc20b=[{'$match':{'status':'Enabled','warehouse_category':_0x19bb49,'name':{'$ne':_0x500c3e},'name':_0xc68827(0x1db)}},{'$group':{'_id':'$name','room_name':{'$first':_0xc68827(0x1c4)}}},{'$sort':{'room_name':0x1}}]:_0x4bc20b=[{'$match':{'status':_0xc68827(0x1f1),'warehouse_category':_0x19bb49,'name':{'$ne':_0x500c3e}}},{'$group':{'_id':_0xc68827(0x1c4),'room_name':{'$first':_0xc68827(0x1c4)}}},{'$sort':{'room_name':0x1}}];else _0x19bb49==_0xc68827(0x1ef)?(_0x500c3e=_0xc68827(0x20e),_0x4bc20b=[{'$match':{'status':'Enabled','warehouse_category':_0x19bb49,'name':{'$ne':_0x500c3e}}},{'$group':{'_id':_0xc68827(0x1c4),'room_name':{'$first':_0xc68827(0x1c4)}}},{'$sort':{'room_name':0x1}}]):_0x4bc20b=[{'$match':{'status':'Enabled'}},{'$group':{'_id':_0xc68827(0x1c4),'room_name':{'$first':_0xc68827(0x1c4)}}},{'$sort':{'room_name':0x1}}];const _0x4385c4=await warehouse['aggregate'](_0x4bc20b);_0x32858[_0xc68827(0x20a)](0xc8)[_0xc68827(0x1dc)](_0x4385c4);}catch(_0x3b2651){_0x32858[_0xc68827(0x20a)](0x190)[_0xc68827(0x1dc)]({'errorMessage':_0x3b2651['message']}),console[_0xc68827(0x1f2)](_0x3b2651);}}),router['post']('/Rooms_data3',async(_0x308e9f,_0x48cae0)=>{const _0x5acbba=a0_0x52d9d5;try{const {warehouse_name:_0x991702,cat:_0x585555}=_0x308e9f[_0x5acbba(0x1c1)],_0x195cb9=await warehouse[_0x5acbba(0x1fe)]([{'$match':{'status':_0x5acbba(0x1f1),'warehouse_category':_0x585555,'name':_0x991702}},{'$group':{'_id':_0x5acbba(0x20c),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]);_0x48cae0[_0x5acbba(0x20a)](0xc8)[_0x5acbba(0x1dc)](_0x195cb9);}catch(_0x4d8725){_0x48cae0[_0x5acbba(0x20a)](0x190)[_0x5acbba(0x1dc)]({'errorMessage':_0x4d8725[_0x5acbba(0x1fb)]});}}),router[a0_0x52d9d5(0x1fd)](a0_0x52d9d5(0x20d),async(_0x3e549f,_0x12e5b0)=>{const _0x210b2f=a0_0x52d9d5;try{const {typeofsales:_0x2215c6}=_0x3e549f[_0x210b2f(0x1c1)];var _0x4d36e4;_0x2215c6=='1'&&(_0x4d36e4=await staff[_0x210b2f(0x1fa)]({'account_category':'sa','type_of_acc_cat':_0x2215c6})),_0x12e5b0['status'](0xc8)[_0x210b2f(0x1dc)](_0x4d36e4);}catch(_0x4f1ae6){_0x12e5b0[_0x210b2f(0x20a)](0x190)[_0x210b2f(0x1dc)]({'errorMessage':_0x4f1ae6['message']});}}),router['post'](a0_0x52d9d5(0x1d7),async(_0x4a0ed9,_0x59d0af)=>{const _0x6623c2=a0_0x52d9d5;try{const {id:_0x2d052a}=_0x4a0ed9[_0x6623c2(0x1c1)],_0x10b073=await staff[_0x6623c2(0x1fa)]({'_id':_0x2d052a});_0x59d0af[_0x6623c2(0x20a)](0xc8)[_0x6623c2(0x1dc)](_0x10b073);}catch(_0x2b80a5){_0x59d0af[_0x6623c2(0x20a)](0x190)[_0x6623c2(0x1dc)]({'errorMessage':_0x2b80a5['message']});}}),router[a0_0x52d9d5(0x1fd)](a0_0x52d9d5(0x202),async(_0x430049,_0x4777df)=>{const _0x258ac1=a0_0x52d9d5;try{const {warehouse_name:_0x964cbf,room_value:_0x7edbe0}=_0x430049[_0x258ac1(0x1c1)];let _0x3d58a0;_0x7edbe0==_0x258ac1(0x1e7)?_0x3d58a0=await warehouse[_0x258ac1(0x1fe)]([{'$unwind':_0x258ac1(0x1be)},{'$match':{'name':_0x964cbf}},{'$group':{'_id':{'bay':'$product_details.bay','level':_0x258ac1(0x1f5),'type':_0x258ac1(0x1c3),'floorlevel':_0x258ac1(0x1c2)},'products':{'$push':{'product_name':_0x258ac1(0x1cd),'product_quantity':_0x258ac1(0x1cb),'product_code':_0x258ac1(0x203)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x258ac1(0x1cb),0x0]},'then':_0x258ac1(0x1cb),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x258ac1(0x1d9),'level':_0x258ac1(0x1c5),'type':_0x258ac1(0x20b),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x258ac1(0x1e6),'as':'product','cond':{'$gt':[_0x258ac1(0x1f0),0x0]}}},'totalQuantity':0x1}}]):_0x3d58a0=await warehouse['aggregate']([{'$unwind':_0x258ac1(0x1be)},{'$match':{'name':_0x964cbf,'room':_0x7edbe0}},{'$group':{'_id':{'bay':'$product_details.bay','level':_0x258ac1(0x1f5),'type':_0x258ac1(0x1c3),'floorlevel':_0x258ac1(0x1c2)},'products':{'$push':{'product_name':_0x258ac1(0x1cd),'product_quantity':_0x258ac1(0x1cb),'product_code':_0x258ac1(0x203)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':['$product_details.product_stock',0x0]},'then':_0x258ac1(0x1cb),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x258ac1(0x1d9),'level':_0x258ac1(0x1c5),'type':'$_id.type','floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x258ac1(0x1e6),'as':'product','cond':{'$gt':[_0x258ac1(0x1f0),0x0]}}},'totalQuantity':0x1}}]),_0x4777df[_0x258ac1(0x20a)](0xc8)[_0x258ac1(0x1dc)](_0x3d58a0);}catch(_0x149b56){_0x4777df[_0x258ac1(0x20a)](0x190)[_0x258ac1(0x1dc)]({'errorMessage':_0x149b56[_0x258ac1(0x1fb)]});}}),module[a0_0x52d9d5(0x1e2)]=router;