function a0_0x2635(){const _0xbc9cca=['Router','English\x20(US)','$product_details.expiry_date','language','Raw\x20Materials','success','All','body','/staff_sales','German','$count','$product_details.product_stock','express','/MapData2','3436JZoFxv','Finished\x20Goods','55aTFZzZ','$_id.product','pack','/MapData','$_id.floorlevel','$product_details.floorlevel','staff','4YTBhHj','Spanish','Portuguese\x20(BR)','$product_details','Portuguese','role','9427852SIuNQx','English','timezone','warehouse','$room','$product_details.bin','Arabic','errors','aggregate','40uMEwkm','post','user','../public/language/languages.json','2683632nnJFHg','email','11220420xoaFLY','$product_details.product_code','en-US','$_id.type','../models/all_models','$_id.level','$product_details.bay','Return\x20Goods','$_id.bay','33OooyCT','12355twLhts','DRY\x20STORAGE','$product_details.product_name','2286wamyPq','$_id.bin','multer','Enabled','Chinese','$product_details.level','French','json','Hindi','../middleware/auth','toLocaleString','findOne','product','/Rooms_data','$$product.product_quantity','render','$expiry_date','message','exports','815346gvvbLj','status','QA\x20Warehouse','/map_value','Arabic\x20(ae)','$products','timezones-list','find','$product_details.batch_code','$product_details.production_date','1032201tDikuP','$name','$product_details.type','log','$product_code'];a0_0x2635=function(){return _0xbc9cca;};return a0_0x2635();}function a0_0x31b3(_0x3ca382,_0x5b6547){const _0x26353a=a0_0x2635();return a0_0x31b3=function(_0x31b3f9,_0x5a9470){_0x31b3f9=_0x31b3f9-0x13c;let _0x3c0a9b=_0x26353a[_0x31b3f9];return _0x3c0a9b;},a0_0x31b3(_0x3ca382,_0x5b6547);}const a0_0x2f3e16=a0_0x31b3;(function(_0x21618e,_0x5aa988){const _0x20f8c8=a0_0x31b3,_0x19431e=_0x21618e();while(!![]){try{const _0x1483e7=-parseInt(_0x20f8c8(0x171))/0x1*(parseInt(_0x20f8c8(0x16f))/0x2)+-parseInt(_0x20f8c8(0x152))/0x3*(-parseInt(_0x20f8c8(0x178))/0x4)+-parseInt(_0x20f8c8(0x13c))/0x5*(parseInt(_0x20f8c8(0x13f))/0x6)+parseInt(_0x20f8c8(0x17e))/0x7+parseInt(_0x20f8c8(0x187))/0x8*(parseInt(_0x20f8c8(0x15c))/0x9)+-parseInt(_0x20f8c8(0x18d))/0xa+-parseInt(_0x20f8c8(0x196))/0xb*(-parseInt(_0x20f8c8(0x18b))/0xc);if(_0x1483e7===_0x5aa988)break;else _0x19431e['push'](_0x19431e['shift']());}catch(_0x210e7e){_0x19431e['push'](_0x19431e['shift']());}}}(a0_0x2635,0xac1dc));const express=require(a0_0x2f3e16(0x16d)),app=express(),router=express[a0_0x2f3e16(0x161)](),multer=require(a0_0x2f3e16(0x141)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x2f3e16(0x191)),auth=require(a0_0x2f3e16(0x148));var timezones=require(a0_0x2f3e16(0x158));const users=require(a0_0x2f3e16(0x18a));router['get']('/view',auth,async(_0x328c2e,_0x4b23fb)=>{const _0x149636=a0_0x2f3e16;try{const {username:_0x203229,email:_0x13da35,role:_0x1bc16}=_0x328c2e[_0x149636(0x189)],_0x1c160b=_0x328c2e['user'],_0x14df88=await profile[_0x149636(0x14a)]({'email':_0x1c160b[_0x149636(0x18c)]}),_0x4ddc2f=await master_shop[_0x149636(0x159)]();let _0x2d93ad;if(_0x1c160b[_0x149636(0x17d)]==_0x149636(0x177)){const _0x1774b4=await staff[_0x149636(0x14a)]({'email':_0x1c160b['email']});_0x2d93ad=await warehouse[_0x149636(0x186)]([{'$match':{'status':'Enabled','name':_0x1774b4[_0x149636(0x181)]}},{'$group':{'_id':'$name','name':{'$first':_0x149636(0x15d)}}},{'$sort':{'name':-0x1}}]);}else _0x2d93ad=await warehouse[_0x149636(0x186)]([{'$match':{'status':_0x149636(0x142)}},{'$group':{'_id':_0x149636(0x15d),'name':{'$first':_0x149636(0x15d)}}},{'$sort':{'name':-0x1}}]);const _0x17bc26=new Date()[_0x149636(0x149)](_0x149636(0x18f),{'timeZone':_0x4ddc2f[0x0][_0x149636(0x180)]});if(_0x4ddc2f[0x0][_0x149636(0x164)]==_0x149636(0x162))var _0x3bd49d=users[_0x149636(0x17f)];else{if(_0x4ddc2f[0x0]['language']==_0x149636(0x147))var _0x3bd49d=users[_0x149636(0x147)];else{if(_0x4ddc2f[0x0][_0x149636(0x164)]==_0x149636(0x16a))var _0x3bd49d=users['German'];else{if(_0x4ddc2f[0x0][_0x149636(0x164)]==_0x149636(0x179))var _0x3bd49d=users[_0x149636(0x179)];else{if(_0x4ddc2f[0x0][_0x149636(0x164)]=='French')var _0x3bd49d=users[_0x149636(0x145)];else{if(_0x4ddc2f[0x0]['language']==_0x149636(0x17a))var _0x3bd49d=users[_0x149636(0x17c)];else{if(_0x4ddc2f[0x0][_0x149636(0x164)]==_0x149636(0x143))var _0x3bd49d=users['Chinese'];else{if(_0x4ddc2f[0x0][_0x149636(0x164)]==_0x149636(0x156))var _0x3bd49d=users[_0x149636(0x184)];}}}}}}}_0x4b23fb[_0x149636(0x14e)]('warehousemap_incoming',{'success':_0x328c2e['flash'](_0x149636(0x166)),'errors':_0x328c2e['flash'](_0x149636(0x185)),'role':_0x1c160b,'profile':_0x14df88,'master_shop':_0x4ddc2f,'timezones':timezones,'language':_0x3bd49d,'warehouse':_0x2d93ad});}catch(_0x338605){console[_0x149636(0x15f)](_0x338605),_0x4b23fb[_0x149636(0x153)](0xc8)[_0x149636(0x146)]({'message':_0x338605[_0x149636(0x150)]});}}),router[a0_0x2f3e16(0x188)](a0_0x2f3e16(0x174),async(_0x3b25c6,_0x32c803)=>{const _0x1e64f6=a0_0x2f3e16,{warehouseNew:_0x4365b2,rooms:_0x956bd8,Type:_0x2a8d84}=_0x3b25c6[_0x1e64f6(0x168)],_0xce92e=await warehouse[_0x1e64f6(0x186)]([{'$unwind':_0x1e64f6(0x17b)},{'$match':{'name':_0x4365b2,'room':_0x956bd8,'product_details.type':_0x2a8d84}},{'$group':{'_id':{'bay':_0x1e64f6(0x193),'bin':_0x1e64f6(0x183),'type':_0x1e64f6(0x15e),'floorlevel':_0x1e64f6(0x176)},'products':{'$push':{'product_name':_0x1e64f6(0x13e),'product_quantity':'$product_details.product_stock','product_code':_0x1e64f6(0x18e)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x1e64f6(0x16c),0x0]},'then':_0x1e64f6(0x16c),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x1e64f6(0x195),'bin':_0x1e64f6(0x140),'type':'$_id.type','floorlevel':_0x1e64f6(0x175),'products':{'$filter':{'input':_0x1e64f6(0x157),'as':_0x1e64f6(0x14b),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x32c803[_0x1e64f6(0x146)](_0xce92e);}),router['post'](a0_0x2f3e16(0x16e),async(_0xa0ad23,_0x2973b5)=>{const _0x4a055e=a0_0x2f3e16,{warehouseNew:_0x3d145a,rooms:_0x4c98ec,room_cat:_0x261150}=_0xa0ad23['body'];let _0x1efc22;if(_0x261150==_0x4a055e(0x167))_0x1efc22=await warehouse['aggregate']([{'$unwind':_0x4a055e(0x17b)},{'$match':{'name':_0x3d145a}},{'$group':{'_id':{'bay':'$product_details.bay','product':'$product_details.product_name','expiry':_0x4a055e(0x163)},'count':{'$sum':_0x4a055e(0x16c)},'production_date':{'$first':_0x4a055e(0x15b)},'expiry_date':{'$first':_0x4a055e(0x163)},'batch_code':{'$first':_0x4a055e(0x15a)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':_0x4a055e(0x195),'products':{'$push':{'product':_0x4a055e(0x172),'quantity':_0x4a055e(0x16b),'production_date':'$production_date','expiry_date':_0x4a055e(0x14f),'batch_code':'$batch_code','product_code':_0x4a055e(0x160)}},'totalQuantity':{'$sum':_0x4a055e(0x16b)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console['log'](_0x261150);else{}_0x2973b5[_0x4a055e(0x146)](_0x1efc22);}),router['post'](a0_0x2f3e16(0x14c),async(_0x35d093,_0x10ed84)=>{const _0x3a4fa7=a0_0x2f3e16;try{const {warehouse_name:_0x91e34f}=_0x35d093[_0x3a4fa7(0x168)];var _0x11bc85='';_0x11bc85=[{'$match':{'name':_0x91e34f,'status':'Enabled'}},{'$group':{'_id':'$_id','room_name':{'$first':_0x3a4fa7(0x182)}}},{'$sort':{'room_name':0x1}}];const _0x4ad572=await warehouse[_0x3a4fa7(0x186)](_0x11bc85);_0x10ed84[_0x3a4fa7(0x153)](0xc8)[_0x3a4fa7(0x146)](_0x4ad572);}catch(_0x2181a6){_0x10ed84[_0x3a4fa7(0x153)](0x190)[_0x3a4fa7(0x146)]({'errorMessage':_0x2181a6[_0x3a4fa7(0x150)]});}}),router[a0_0x2f3e16(0x188)]('/Rooms_data2',async(_0x2eaa97,_0x4540b2)=>{const _0x4f51f1=a0_0x2f3e16;try{const {warehouse_name:_0x48cdb6,cat:_0x2b2b3a,valNew:_0x1a450a}=_0x2eaa97[_0x4f51f1(0x168)];var _0xba16ef='',_0x9d7fad='';if(_0x2b2b3a==_0x4f51f1(0x165))_0xba16ef=_0x4f51f1(0x194),_0x1a450a==_0x4f51f1(0x173)?_0x9d7fad=[{'$match':{'status':_0x4f51f1(0x142),'warehouse_category':_0x2b2b3a,'name':{'$ne':_0xba16ef},'name':_0x4f51f1(0x13d)}},{'$group':{'_id':_0x4f51f1(0x15d),'room_name':{'$first':_0x4f51f1(0x15d)}}},{'$sort':{'room_name':0x1}}]:_0x9d7fad=[{'$match':{'status':_0x4f51f1(0x142),'warehouse_category':_0x2b2b3a,'name':{'$ne':_0xba16ef}}},{'$group':{'_id':_0x4f51f1(0x15d),'room_name':{'$first':_0x4f51f1(0x15d)}}},{'$sort':{'room_name':0x1}}];else _0x2b2b3a==_0x4f51f1(0x170)?(_0xba16ef=_0x4f51f1(0x154),_0x9d7fad=[{'$match':{'status':_0x4f51f1(0x142),'warehouse_category':_0x2b2b3a,'name':{'$ne':_0xba16ef}}},{'$group':{'_id':_0x4f51f1(0x15d),'room_name':{'$first':_0x4f51f1(0x15d)}}},{'$sort':{'room_name':0x1}}]):_0x9d7fad=[{'$match':{'status':_0x4f51f1(0x142)}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x175424=await warehouse[_0x4f51f1(0x186)](_0x9d7fad);_0x4540b2[_0x4f51f1(0x153)](0xc8)[_0x4f51f1(0x146)](_0x175424);}catch(_0x3e1de4){_0x4540b2[_0x4f51f1(0x153)](0x190)['json']({'errorMessage':_0x3e1de4[_0x4f51f1(0x150)]}),console[_0x4f51f1(0x15f)](_0x3e1de4);}}),router[a0_0x2f3e16(0x188)]('/Rooms_data3',async(_0x47abb3,_0x5285d3)=>{const _0x47b7f2=a0_0x2f3e16;try{const {warehouse_name:_0x268275,cat:_0x5a1325}=_0x47abb3[_0x47b7f2(0x168)],_0x3121ce=await warehouse[_0x47b7f2(0x186)]([{'$match':{'status':_0x47b7f2(0x142),'warehouse_category':_0x5a1325,'name':_0x268275}},{'$group':{'_id':'$room','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]);_0x5285d3[_0x47b7f2(0x153)](0xc8)[_0x47b7f2(0x146)](_0x3121ce);}catch(_0x11a65e){_0x5285d3['status'](0x190)['json']({'errorMessage':_0x11a65e[_0x47b7f2(0x150)]});}}),router[a0_0x2f3e16(0x188)](a0_0x2f3e16(0x169),async(_0x24425d,_0x2ef10e)=>{const _0x2fbe70=a0_0x2f3e16;try{const {typeofsales:_0x23c5a7}=_0x24425d['body'];var _0x5696d1;_0x23c5a7=='1'&&(_0x5696d1=await staff[_0x2fbe70(0x159)]({'account_category':'sa','type_of_acc_cat':_0x23c5a7})),_0x2ef10e[_0x2fbe70(0x153)](0xc8)[_0x2fbe70(0x146)](_0x5696d1);}catch(_0x5f06bf){_0x2ef10e[_0x2fbe70(0x153)](0x190)[_0x2fbe70(0x146)]({'errorMessage':_0x5f06bf[_0x2fbe70(0x150)]});}}),router['post']('/staff_sales_id',async(_0x18a91c,_0x459023)=>{const _0x404946=a0_0x2f3e16;try{const {id:_0x2d55d8}=_0x18a91c[_0x404946(0x168)],_0x24694e=await staff['find']({'_id':_0x2d55d8});_0x459023[_0x404946(0x153)](0xc8)[_0x404946(0x146)](_0x24694e);}catch(_0x2cba23){_0x459023[_0x404946(0x153)](0x190)['json']({'errorMessage':_0x2cba23['message']});}}),router['post'](a0_0x2f3e16(0x155),async(_0x27da6b,_0xe4257f)=>{const _0x59e920=a0_0x2f3e16;try{const {warehouse_name:_0x20fb24,room_value:_0x299eb3}=_0x27da6b[_0x59e920(0x168)];let _0x4a972e;_0x299eb3=='all'?_0x4a972e=await warehouse[_0x59e920(0x186)]([{'$unwind':_0x59e920(0x17b)},{'$match':{'name':_0x20fb24}},{'$group':{'_id':{'bay':_0x59e920(0x193),'level':_0x59e920(0x144),'type':_0x59e920(0x15e),'floorlevel':_0x59e920(0x176)},'products':{'$push':{'product_name':_0x59e920(0x13e),'product_quantity':_0x59e920(0x16c),'product_code':_0x59e920(0x18e)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x59e920(0x16c),0x0]},'then':_0x59e920(0x16c),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x59e920(0x195),'level':_0x59e920(0x192),'type':'$_id.type','floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x59e920(0x157),'as':_0x59e920(0x14b),'cond':{'$gt':[_0x59e920(0x14d),0x0]}}},'totalQuantity':0x1}}]):_0x4a972e=await warehouse[_0x59e920(0x186)]([{'$unwind':'$product_details'},{'$match':{'name':_0x20fb24,'room':_0x299eb3}},{'$group':{'_id':{'bay':'$product_details.bay','level':_0x59e920(0x144),'type':'$product_details.type','floorlevel':_0x59e920(0x176)},'products':{'$push':{'product_name':_0x59e920(0x13e),'product_quantity':_0x59e920(0x16c),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x59e920(0x16c),0x0]},'then':_0x59e920(0x16c),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x59e920(0x195),'level':_0x59e920(0x192),'type':_0x59e920(0x190),'floorlevel':_0x59e920(0x175),'products':{'$filter':{'input':'$products','as':'product','cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]),_0xe4257f[_0x59e920(0x153)](0xc8)[_0x59e920(0x146)](_0x4a972e);}catch(_0x13301e){_0xe4257f[_0x59e920(0x153)](0x190)[_0x59e920(0x146)]({'errorMessage':_0x13301e[_0x59e920(0x150)]});}}),module[a0_0x2f3e16(0x151)]=router;