function a0_0x4d6a(_0x54089b,_0x321df0){const _0x1b6805=a0_0x1b68();return a0_0x4d6a=function(_0x4d6a9e,_0x32ba68){_0x4d6a9e=_0x4d6a9e-0x119;let _0x146a30=_0x1b6805[_0x4d6a9e];return _0x146a30;},a0_0x4d6a(_0x54089b,_0x321df0);}const a0_0x1e7591=a0_0x4d6a;function a0_0x1b68(){const _0x205a6c=['$_id.type','success','Raw\x20Materials','$count','render','/view','743378pyQftD','1622536KYIEFj','Arabic\x20(ae)','Chinese','Finished\x20Goods','$_id.level','$$product.product_quantity','/staff_sales_id','../models/all_models','$_id.floorlevel','all','$product_details','$product_details.product_name','$_id.bay','$product_details.bay','find','154896mZsSpk','Enabled','$_id.product','/Rooms_data3','/map_value','staff','email','user','27rQiSNh','All','$room','3752388ghxeKz','warehousemap_incoming','product','/MapData','log','Hindi','$name','multer','$product_details.product_code','errors','German','DRY\x20STORAGE','$product_details.type','$product_details.product_stock','body','../public/language/languages.json','$batch_code','10cHpqDB','1338982mZsBxz','findOne','language','French','Spanish','Router','message','json','/MapData2','/Rooms_data2','7783389jtiatG','../middleware/auth','Return\x20Goods','$_id.bin','294090CsyVPY','$product_details.level','warehouse','$product_details.expiry_date','$_id','$product_details.bin','timezones-list','get','English','7DkeLuO','timezone','Portuguese\x20(BR)','status','exports','$product_details.production_date','$product_details.floorlevel','aggregate','$products','QA\x20Warehouse','role','Arabic','flash','post','/Rooms_data','English\x20(US)'];a0_0x1b68=function(){return _0x205a6c;};return a0_0x1b68();}(function(_0xc233d2,_0x2c3321){const _0x38cc1e=a0_0x4d6a,_0x1d3bd9=_0xc233d2();while(!![]){try{const _0x55d421=parseInt(_0x38cc1e(0x121))/0x1+-parseInt(_0x38cc1e(0x14e))/0x2+parseInt(_0x38cc1e(0x139))/0x3*(parseInt(_0x38cc1e(0x131))/0x4)+-parseInt(_0x38cc1e(0x15c))/0x5+-parseInt(_0x38cc1e(0x13c))/0x6+-parseInt(_0x38cc1e(0x165))/0x7*(parseInt(_0x38cc1e(0x122))/0x8)+parseInt(_0x38cc1e(0x158))/0x9*(parseInt(_0x38cc1e(0x14d))/0xa);if(_0x55d421===_0x2c3321)break;else _0x1d3bd9['push'](_0x1d3bd9['shift']());}catch(_0x45089c){_0x1d3bd9['push'](_0x1d3bd9['shift']());}}}(a0_0x1b68,0x61b3f));const express=require('express'),app=express(),router=express[a0_0x1e7591(0x153)](),multer=require(a0_0x1e7591(0x143)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x1e7591(0x129)),auth=require(a0_0x1e7591(0x159));var timezones=require(a0_0x1e7591(0x162));const users=require(a0_0x1e7591(0x14b));router[a0_0x1e7591(0x163)](a0_0x1e7591(0x120),auth,async(_0x322424,_0x2e5fe8)=>{const _0x5bba59=a0_0x1e7591;try{const {username:_0x1d49f0,email:_0x4b917b,role:_0x535bbc}=_0x322424[_0x5bba59(0x138)],_0x35599e=_0x322424['user'],_0x40f449=await profile['findOne']({'email':_0x35599e[_0x5bba59(0x137)]}),_0x2ed3ba=await master_shop['find']();let _0x3a7df0;if(_0x35599e[_0x5bba59(0x16f)]==_0x5bba59(0x136)){const _0x1a8f12=await staff[_0x5bba59(0x14f)]({'email':_0x35599e[_0x5bba59(0x137)]});_0x3a7df0=await warehouse[_0x5bba59(0x16c)]([{'$match':{'status':_0x5bba59(0x132),'name':_0x1a8f12[_0x5bba59(0x15e)]}},{'$group':{'_id':_0x5bba59(0x142),'name':{'$first':_0x5bba59(0x142)}}},{'$sort':{'name':-0x1}}]);}else _0x3a7df0=await warehouse[_0x5bba59(0x16c)]([{'$match':{'status':_0x5bba59(0x132)}},{'$group':{'_id':'$name','name':{'$first':_0x5bba59(0x142)}}},{'$sort':{'name':-0x1}}]);const _0xbc5ce5=new Date()['toLocaleString']('en-US',{'timeZone':_0x2ed3ba[0x0][_0x5bba59(0x166)]});if(_0x2ed3ba[0x0][_0x5bba59(0x150)]==_0x5bba59(0x11a))var _0x9e66ce=users[_0x5bba59(0x164)];else{if(_0x2ed3ba[0x0][_0x5bba59(0x150)]==_0x5bba59(0x141))var _0x9e66ce=users[_0x5bba59(0x141)];else{if(_0x2ed3ba[0x0][_0x5bba59(0x150)]==_0x5bba59(0x146))var _0x9e66ce=users['German'];else{if(_0x2ed3ba[0x0][_0x5bba59(0x150)]==_0x5bba59(0x152))var _0x9e66ce=users[_0x5bba59(0x152)];else{if(_0x2ed3ba[0x0][_0x5bba59(0x150)]==_0x5bba59(0x151))var _0x9e66ce=users[_0x5bba59(0x151)];else{if(_0x2ed3ba[0x0][_0x5bba59(0x150)]==_0x5bba59(0x167))var _0x9e66ce=users['Portuguese'];else{if(_0x2ed3ba[0x0][_0x5bba59(0x150)]==_0x5bba59(0x124))var _0x9e66ce=users[_0x5bba59(0x124)];else{if(_0x2ed3ba[0x0]['language']==_0x5bba59(0x123))var _0x9e66ce=users[_0x5bba59(0x170)];}}}}}}}_0x2e5fe8[_0x5bba59(0x11f)](_0x5bba59(0x13d),{'success':_0x322424[_0x5bba59(0x171)](_0x5bba59(0x11c)),'errors':_0x322424[_0x5bba59(0x171)](_0x5bba59(0x145)),'role':_0x35599e,'profile':_0x40f449,'master_shop':_0x2ed3ba,'timezones':timezones,'language':_0x9e66ce,'warehouse':_0x3a7df0});}catch(_0x213894){console[_0x5bba59(0x140)](_0x213894),_0x2e5fe8[_0x5bba59(0x168)](0xc8)[_0x5bba59(0x155)]({'message':_0x213894['message']});}}),router[a0_0x1e7591(0x172)](a0_0x1e7591(0x13f),async(_0x32341c,_0x59b3ea)=>{const _0x220e9a=a0_0x1e7591,{warehouseNew:_0x4cd119,rooms:_0x59dc1a,Type:_0xbc8367}=_0x32341c[_0x220e9a(0x14a)],_0xb40537=await warehouse['aggregate']([{'$unwind':_0x220e9a(0x12c)},{'$match':{'name':_0x4cd119,'room':_0x59dc1a,'product_details.type':_0xbc8367}},{'$group':{'_id':{'bay':_0x220e9a(0x12f),'bin':_0x220e9a(0x161),'type':_0x220e9a(0x148),'floorlevel':_0x220e9a(0x16b)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x220e9a(0x149),'product_code':_0x220e9a(0x144)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':['$product_details.product_stock',0x0]},'then':_0x220e9a(0x149),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','bin':_0x220e9a(0x15b),'type':_0x220e9a(0x11b),'floorlevel':_0x220e9a(0x12a),'products':{'$filter':{'input':_0x220e9a(0x16d),'as':_0x220e9a(0x13e),'cond':{'$gt':[_0x220e9a(0x127),0x0]}}},'totalQuantity':0x1}}]);_0x59b3ea[_0x220e9a(0x155)](_0xb40537);}),router['post'](a0_0x1e7591(0x156),async(_0x26ff32,_0x2fee9c)=>{const _0x33991b=a0_0x1e7591,{warehouseNew:_0x282dc8,rooms:_0x4e718b,room_cat:_0x364a79}=_0x26ff32[_0x33991b(0x14a)];let _0x41259c;if(_0x364a79==_0x33991b(0x13a))_0x41259c=await warehouse[_0x33991b(0x16c)]([{'$unwind':_0x33991b(0x12c)},{'$match':{'name':_0x282dc8}},{'$group':{'_id':{'bay':_0x33991b(0x12f),'product':_0x33991b(0x12d),'expiry':'$product_details.expiry_date'},'count':{'$sum':_0x33991b(0x149)},'production_date':{'$first':_0x33991b(0x16a)},'expiry_date':{'$first':_0x33991b(0x15f)},'batch_code':{'$first':'$product_details.batch_code'},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':_0x33991b(0x12e),'products':{'$push':{'product':_0x33991b(0x133),'quantity':_0x33991b(0x11e),'production_date':'$production_date','expiry_date':'$expiry_date','batch_code':_0x33991b(0x14c),'product_code':'$product_code'}},'totalQuantity':{'$sum':_0x33991b(0x11e)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console[_0x33991b(0x140)](_0x364a79);else{}_0x2fee9c['json'](_0x41259c);}),router[a0_0x1e7591(0x172)](a0_0x1e7591(0x119),async(_0x4fd569,_0x2be8ab)=>{const _0x4e1f35=a0_0x1e7591;try{const {warehouse_name:_0x31b4f8}=_0x4fd569[_0x4e1f35(0x14a)];var _0x3a4917='';_0x3a4917=[{'$match':{'name':_0x31b4f8,'status':_0x4e1f35(0x132)}},{'$group':{'_id':_0x4e1f35(0x160),'room_name':{'$first':_0x4e1f35(0x13b)}}},{'$sort':{'room_name':0x1}}];const _0x5cf7a0=await warehouse['aggregate'](_0x3a4917);_0x2be8ab[_0x4e1f35(0x168)](0xc8)[_0x4e1f35(0x155)](_0x5cf7a0);}catch(_0x5b1a57){_0x2be8ab[_0x4e1f35(0x168)](0x190)['json']({'errorMessage':_0x5b1a57[_0x4e1f35(0x154)]});}}),router[a0_0x1e7591(0x172)](a0_0x1e7591(0x157),async(_0x2d2fdd,_0x4ad422)=>{const _0x5b2b48=a0_0x1e7591;try{const {warehouse_name:_0x2c1f96,cat:_0x2f53ad,valNew:_0x3b5c67}=_0x2d2fdd['body'];var _0x46d086='',_0x354a08='';if(_0x2f53ad==_0x5b2b48(0x11d))_0x46d086=_0x5b2b48(0x15a),_0x3b5c67=='pack'?_0x354a08=[{'$match':{'status':_0x5b2b48(0x132),'warehouse_category':_0x2f53ad,'name':{'$ne':_0x46d086},'name':_0x5b2b48(0x147)}},{'$group':{'_id':'$name','room_name':{'$first':_0x5b2b48(0x142)}}},{'$sort':{'room_name':0x1}}]:_0x354a08=[{'$match':{'status':_0x5b2b48(0x132),'warehouse_category':_0x2f53ad,'name':{'$ne':_0x46d086}}},{'$group':{'_id':_0x5b2b48(0x142),'room_name':{'$first':_0x5b2b48(0x142)}}},{'$sort':{'room_name':0x1}}];else _0x2f53ad==_0x5b2b48(0x125)?(_0x46d086=_0x5b2b48(0x16e),_0x354a08=[{'$match':{'status':_0x5b2b48(0x132),'warehouse_category':_0x2f53ad,'name':{'$ne':_0x46d086}}},{'$group':{'_id':_0x5b2b48(0x142),'room_name':{'$first':_0x5b2b48(0x142)}}},{'$sort':{'room_name':0x1}}]):_0x354a08=[{'$match':{'status':_0x5b2b48(0x132)}},{'$group':{'_id':_0x5b2b48(0x142),'room_name':{'$first':_0x5b2b48(0x142)}}},{'$sort':{'room_name':0x1}}];const _0x3f2036=await warehouse['aggregate'](_0x354a08);_0x4ad422[_0x5b2b48(0x168)](0xc8)[_0x5b2b48(0x155)](_0x3f2036);}catch(_0x15fc77){_0x4ad422[_0x5b2b48(0x168)](0x190)[_0x5b2b48(0x155)]({'errorMessage':_0x15fc77[_0x5b2b48(0x154)]}),console[_0x5b2b48(0x140)](_0x15fc77);}}),router[a0_0x1e7591(0x172)](a0_0x1e7591(0x134),async(_0x322a15,_0x9d4538)=>{const _0x1a6057=a0_0x1e7591;try{const {warehouse_name:_0x44cc25,cat:_0x217824}=_0x322a15[_0x1a6057(0x14a)],_0x34157e=await warehouse[_0x1a6057(0x16c)]([{'$match':{'status':_0x1a6057(0x132),'warehouse_category':_0x217824,'name':_0x44cc25}},{'$group':{'_id':'$room','room_name':{'$first':_0x1a6057(0x13b)}}},{'$sort':{'room_name':0x1}}]);_0x9d4538[_0x1a6057(0x168)](0xc8)[_0x1a6057(0x155)](_0x34157e);}catch(_0x56ed6b){_0x9d4538[_0x1a6057(0x168)](0x190)[_0x1a6057(0x155)]({'errorMessage':_0x56ed6b[_0x1a6057(0x154)]});}}),router['post']('/staff_sales',async(_0x139fb4,_0x1c9f01)=>{const _0x1080b5=a0_0x1e7591;try{const {typeofsales:_0x3ac1ca}=_0x139fb4[_0x1080b5(0x14a)];var _0x25315b;_0x3ac1ca=='1'&&(_0x25315b=await staff[_0x1080b5(0x130)]({'account_category':'sa','type_of_acc_cat':_0x3ac1ca})),_0x1c9f01[_0x1080b5(0x168)](0xc8)[_0x1080b5(0x155)](_0x25315b);}catch(_0x200069){_0x1c9f01[_0x1080b5(0x168)](0x190)[_0x1080b5(0x155)]({'errorMessage':_0x200069['message']});}}),router[a0_0x1e7591(0x172)](a0_0x1e7591(0x128),async(_0x2bea92,_0x12bd91)=>{const _0xe95de9=a0_0x1e7591;try{const {id:_0x13c5c8}=_0x2bea92[_0xe95de9(0x14a)],_0x337588=await staff[_0xe95de9(0x130)]({'_id':_0x13c5c8});_0x12bd91['status'](0xc8)['json'](_0x337588);}catch(_0x1d442e){_0x12bd91[_0xe95de9(0x168)](0x190)[_0xe95de9(0x155)]({'errorMessage':_0x1d442e[_0xe95de9(0x154)]});}}),router[a0_0x1e7591(0x172)](a0_0x1e7591(0x135),async(_0x3d1fd1,_0x3828be)=>{const _0x29a3d4=a0_0x1e7591;try{const {warehouse_name:_0x5da22d,room_value:_0x3acd5e}=_0x3d1fd1[_0x29a3d4(0x14a)];let _0x158d19;_0x3acd5e==_0x29a3d4(0x12b)?_0x158d19=await warehouse['aggregate']([{'$unwind':_0x29a3d4(0x12c)},{'$match':{'name':_0x5da22d}},{'$group':{'_id':{'bay':'$product_details.bay','level':_0x29a3d4(0x15d),'type':_0x29a3d4(0x148),'floorlevel':_0x29a3d4(0x16b)},'products':{'$push':{'product_name':_0x29a3d4(0x12d),'product_quantity':_0x29a3d4(0x149),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x29a3d4(0x149),0x0]},'then':'$product_details.product_stock','else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x29a3d4(0x12e),'level':_0x29a3d4(0x126),'type':_0x29a3d4(0x11b),'floorlevel':_0x29a3d4(0x12a),'products':{'$filter':{'input':_0x29a3d4(0x16d),'as':_0x29a3d4(0x13e),'cond':{'$gt':[_0x29a3d4(0x127),0x0]}}},'totalQuantity':0x1}}]):_0x158d19=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$match':{'name':_0x5da22d,'room':_0x3acd5e}},{'$group':{'_id':{'bay':_0x29a3d4(0x12f),'level':'$product_details.level','type':_0x29a3d4(0x148),'floorlevel':_0x29a3d4(0x16b)},'products':{'$push':{'product_name':_0x29a3d4(0x12d),'product_quantity':'$product_details.product_stock','product_code':_0x29a3d4(0x144)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x29a3d4(0x149),0x0]},'then':'$product_details.product_stock','else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x29a3d4(0x12e),'level':_0x29a3d4(0x126),'type':_0x29a3d4(0x11b),'floorlevel':_0x29a3d4(0x12a),'products':{'$filter':{'input':_0x29a3d4(0x16d),'as':_0x29a3d4(0x13e),'cond':{'$gt':[_0x29a3d4(0x127),0x0]}}},'totalQuantity':0x1}}]),_0x3828be[_0x29a3d4(0x168)](0xc8)[_0x29a3d4(0x155)](_0x158d19);}catch(_0x42d75a){_0x3828be[_0x29a3d4(0x168)](0x190)[_0x29a3d4(0x155)]({'errorMessage':_0x42d75a[_0x29a3d4(0x154)]});}}),module[a0_0x1e7591(0x169)]=router;