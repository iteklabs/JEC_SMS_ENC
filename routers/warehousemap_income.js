function a0_0x4088(_0x39763c,_0x8eed4c){const _0xe88400=a0_0xe884();return a0_0x4088=function(_0x4088a1,_0x2bd499){_0x4088a1=_0x4088a1-0x168;let _0x1f6aab=_0xe88400[_0x4088a1];return _0x1f6aab;},a0_0x4088(_0x39763c,_0x8eed4c);}const a0_0x5effbe=a0_0x4088;function a0_0xe884(){const _0x5d1917=['Enabled','$product_details.product_code','$name','../models/all_models','$batch_code','warehousemap_incoming','$product_details.production_date','$_id.level','4yGfiCx','$_id.bay','message','$production_date','1010617WRuHTH','Return\x20Goods','timezone','$product_details.product_stock','Router','role','en-US','$$product.product_quantity','/Rooms_data3','$product_details.product_name','/MapData','/view','$_id.type','../public/language/languages.json','Portuguese','$_id.floorlevel','German','flash','Spanish','$product_details.level','$count','$product_details.bin','$products','pack','$product_details.floorlevel','9jybEgo','Arabic\x20(ae)','$_id','English','$_id.product','language','5808460KgzDLU','1798617jbNehV','multer','aggregate','$product_details.expiry_date','$product_details.bay','log','128195hCbYlB','$product_details.batch_code','$product_details.type','json','post','French','$product_code','all','4352112LSnLMV','Finished\x20Goods','2052196BFAtNc','errors','product','body','Raw\x20Materials','$product_details','/staff_sales_id','$room','/staff_sales','/Rooms_data2','status','find','warehouse','user','294ugzXwF','493710tDTdDu','findOne','Chinese','render','email'];a0_0xe884=function(){return _0x5d1917;};return a0_0xe884();}(function(_0x29d283,_0x53478c){const _0x25473d=a0_0x4088,_0x5694af=_0x29d283();while(!![]){try{const _0x3f9e99=parseInt(_0x25473d(0x1b1))/0x1+-parseInt(_0x25473d(0x191))/0x2+-parseInt(_0x25473d(0x181))/0x3*(parseInt(_0x25473d(0x1ad))/0x4)+parseInt(_0x25473d(0x187))/0x5*(parseInt(_0x25473d(0x19f))/0x6)+parseInt(_0x25473d(0x1a0))/0x7+parseInt(_0x25473d(0x18f))/0x8+parseInt(_0x25473d(0x17a))/0x9*(-parseInt(_0x25473d(0x180))/0xa);if(_0x3f9e99===_0x53478c)break;else _0x5694af['push'](_0x5694af['shift']());}catch(_0x571bad){_0x5694af['push'](_0x5694af['shift']());}}}(a0_0xe884,0xa4cad));const express=require('express'),app=express(),router=express[a0_0x5effbe(0x1b5)](),multer=require(a0_0x5effbe(0x182)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x5effbe(0x1a8)),auth=require('../middleware/auth');var timezones=require('timezones-list');const users=require(a0_0x5effbe(0x16e));router['get'](a0_0x5effbe(0x16c),auth,async(_0x34a792,_0x517cbf)=>{const _0xd9dfd9=a0_0x5effbe;try{const {username:_0x4495b3,email:_0x19880e,role:_0x15dcb9}=_0x34a792[_0xd9dfd9(0x19e)],_0x54810c=_0x34a792[_0xd9dfd9(0x19e)],_0x4c879b=await profile[_0xd9dfd9(0x1a1)]({'email':_0x54810c[_0xd9dfd9(0x1a4)]}),_0x10249c=await master_shop[_0xd9dfd9(0x19c)]();let _0x18ed31;if(_0x54810c[_0xd9dfd9(0x1b6)]=='staff'){const _0x3ce178=await staff['findOne']({'email':_0x54810c[_0xd9dfd9(0x1a4)]});_0x18ed31=await warehouse[_0xd9dfd9(0x183)]([{'$match':{'status':'Enabled','name':_0x3ce178[_0xd9dfd9(0x19d)]}},{'$group':{'_id':_0xd9dfd9(0x1a7),'name':{'$first':_0xd9dfd9(0x1a7)}}},{'$sort':{'name':-0x1}}]);}else _0x18ed31=await warehouse[_0xd9dfd9(0x183)]([{'$match':{'status':'Enabled'}},{'$group':{'_id':'$name','name':{'$first':_0xd9dfd9(0x1a7)}}},{'$sort':{'name':-0x1}}]);const _0x57ec3f=new Date()['toLocaleString'](_0xd9dfd9(0x1b7),{'timeZone':_0x10249c[0x0][_0xd9dfd9(0x1b3)]});if(_0x10249c[0x0]['language']=='English\x20(US)')var _0x5b1cbd=users[_0xd9dfd9(0x17d)];else{if(_0x10249c[0x0][_0xd9dfd9(0x17f)]=='Hindi')var _0x5b1cbd=users['Hindi'];else{if(_0x10249c[0x0][_0xd9dfd9(0x17f)]==_0xd9dfd9(0x171))var _0x5b1cbd=users[_0xd9dfd9(0x171)];else{if(_0x10249c[0x0][_0xd9dfd9(0x17f)]==_0xd9dfd9(0x173))var _0x5b1cbd=users[_0xd9dfd9(0x173)];else{if(_0x10249c[0x0][_0xd9dfd9(0x17f)]==_0xd9dfd9(0x18c))var _0x5b1cbd=users[_0xd9dfd9(0x18c)];else{if(_0x10249c[0x0][_0xd9dfd9(0x17f)]=='Portuguese\x20(BR)')var _0x5b1cbd=users[_0xd9dfd9(0x16f)];else{if(_0x10249c[0x0][_0xd9dfd9(0x17f)]==_0xd9dfd9(0x1a2))var _0x5b1cbd=users['Chinese'];else{if(_0x10249c[0x0][_0xd9dfd9(0x17f)]==_0xd9dfd9(0x17b))var _0x5b1cbd=users['Arabic'];}}}}}}}_0x517cbf[_0xd9dfd9(0x1a3)](_0xd9dfd9(0x1aa),{'success':_0x34a792['flash']('success'),'errors':_0x34a792[_0xd9dfd9(0x172)](_0xd9dfd9(0x192)),'role':_0x54810c,'profile':_0x4c879b,'master_shop':_0x10249c,'timezones':timezones,'language':_0x5b1cbd,'warehouse':_0x18ed31});}catch(_0x32a081){console[_0xd9dfd9(0x186)](_0x32a081),_0x517cbf[_0xd9dfd9(0x19b)](0xc8)[_0xd9dfd9(0x18a)]({'message':_0x32a081[_0xd9dfd9(0x1af)]});}}),router[a0_0x5effbe(0x18b)](a0_0x5effbe(0x16b),async(_0x15b2b3,_0x11eccc)=>{const _0x284ee=a0_0x5effbe,{warehouseNew:_0x300921,rooms:_0x42ede2,Type:_0x39ac35}=_0x15b2b3['body'],_0x5eda64=await warehouse[_0x284ee(0x183)]([{'$unwind':'$product_details'},{'$match':{'name':_0x300921,'room':_0x42ede2,'product_details.type':_0x39ac35}},{'$group':{'_id':{'bay':_0x284ee(0x185),'bin':_0x284ee(0x176),'type':'$product_details.type','floorlevel':_0x284ee(0x179)},'products':{'$push':{'product_name':_0x284ee(0x16a),'product_quantity':_0x284ee(0x1b4),'product_code':_0x284ee(0x1a6)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x284ee(0x1b4),0x0]},'then':_0x284ee(0x1b4),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x284ee(0x1ae),'bin':'$_id.bin','type':_0x284ee(0x16d),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x284ee(0x177),'as':'product','cond':{'$gt':[_0x284ee(0x168),0x0]}}},'totalQuantity':0x1}}]);_0x11eccc['json'](_0x5eda64);}),router[a0_0x5effbe(0x18b)]('/MapData2',async(_0x22b4b0,_0x22bf72)=>{const _0xd34655=a0_0x5effbe,{warehouseNew:_0xc7bde,rooms:_0x3445c1,room_cat:_0x4a57dd}=_0x22b4b0[_0xd34655(0x194)];let _0x24222e;if(_0x4a57dd=='All')_0x24222e=await warehouse['aggregate']([{'$unwind':_0xd34655(0x196)},{'$match':{'name':_0xc7bde}},{'$group':{'_id':{'bay':'$product_details.bay','product':_0xd34655(0x16a),'expiry':_0xd34655(0x184)},'count':{'$sum':'$product_details.product_stock'},'production_date':{'$first':_0xd34655(0x1ab)},'expiry_date':{'$first':_0xd34655(0x184)},'batch_code':{'$first':_0xd34655(0x188)},'product_code':{'$first':_0xd34655(0x1a6)}}},{'$group':{'_id':_0xd34655(0x1ae),'products':{'$push':{'product':_0xd34655(0x17e),'quantity':_0xd34655(0x175),'production_date':_0xd34655(0x1b0),'expiry_date':'$expiry_date','batch_code':_0xd34655(0x1a9),'product_code':_0xd34655(0x18d)}},'totalQuantity':{'$sum':_0xd34655(0x175)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console['log'](_0x4a57dd);else{}_0x22bf72[_0xd34655(0x18a)](_0x24222e);}),router[a0_0x5effbe(0x18b)]('/Rooms_data',async(_0x39673b,_0x1cbacd)=>{const _0x4ab6d5=a0_0x5effbe;try{const {warehouse_name:_0x34b6db}=_0x39673b[_0x4ab6d5(0x194)];var _0x1ae179='';_0x1ae179=[{'$match':{'name':_0x34b6db,'status':_0x4ab6d5(0x1a5)}},{'$group':{'_id':_0x4ab6d5(0x17c),'room_name':{'$first':_0x4ab6d5(0x198)}}},{'$sort':{'room_name':0x1}}];const _0x6b87ad=await warehouse[_0x4ab6d5(0x183)](_0x1ae179);_0x1cbacd[_0x4ab6d5(0x19b)](0xc8)['json'](_0x6b87ad);}catch(_0x5466ed){_0x1cbacd[_0x4ab6d5(0x19b)](0x190)[_0x4ab6d5(0x18a)]({'errorMessage':_0x5466ed[_0x4ab6d5(0x1af)]});}}),router[a0_0x5effbe(0x18b)](a0_0x5effbe(0x19a),async(_0x4f0f2e,_0x339b4a)=>{const _0x538792=a0_0x5effbe;try{const {warehouse_name:_0xc99f74,cat:_0xb1f5e8,valNew:_0x114dc5}=_0x4f0f2e[_0x538792(0x194)];var _0x1131ea='',_0x1c98b3='';if(_0xb1f5e8==_0x538792(0x195))_0x1131ea=_0x538792(0x1b2),_0x114dc5==_0x538792(0x178)?_0x1c98b3=[{'$match':{'status':_0x538792(0x1a5),'warehouse_category':_0xb1f5e8,'name':{'$ne':_0x1131ea},'name':'DRY\x20STORAGE'}},{'$group':{'_id':_0x538792(0x1a7),'room_name':{'$first':_0x538792(0x1a7)}}},{'$sort':{'room_name':0x1}}]:_0x1c98b3=[{'$match':{'status':_0x538792(0x1a5),'warehouse_category':_0xb1f5e8,'name':{'$ne':_0x1131ea}}},{'$group':{'_id':'$name','room_name':{'$first':_0x538792(0x1a7)}}},{'$sort':{'room_name':0x1}}];else _0xb1f5e8==_0x538792(0x190)?(_0x1131ea='QA\x20Warehouse',_0x1c98b3=[{'$match':{'status':_0x538792(0x1a5),'warehouse_category':_0xb1f5e8,'name':{'$ne':_0x1131ea}}},{'$group':{'_id':_0x538792(0x1a7),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x1c98b3=[{'$match':{'status':_0x538792(0x1a5)}},{'$group':{'_id':'$name','room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x13c75b=await warehouse[_0x538792(0x183)](_0x1c98b3);_0x339b4a[_0x538792(0x19b)](0xc8)['json'](_0x13c75b);}catch(_0x1c14db){_0x339b4a[_0x538792(0x19b)](0x190)[_0x538792(0x18a)]({'errorMessage':_0x1c14db['message']}),console[_0x538792(0x186)](_0x1c14db);}}),router[a0_0x5effbe(0x18b)](a0_0x5effbe(0x169),async(_0x208aea,_0x44f089)=>{const _0x440bb8=a0_0x5effbe;try{const {warehouse_name:_0x2724b0,cat:_0x2e8668}=_0x208aea['body'],_0x2b2501=await warehouse[_0x440bb8(0x183)]([{'$match':{'status':_0x440bb8(0x1a5),'warehouse_category':_0x2e8668,'name':_0x2724b0}},{'$group':{'_id':_0x440bb8(0x198),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}]);_0x44f089[_0x440bb8(0x19b)](0xc8)['json'](_0x2b2501);}catch(_0x4c96de){_0x44f089[_0x440bb8(0x19b)](0x190)[_0x440bb8(0x18a)]({'errorMessage':_0x4c96de[_0x440bb8(0x1af)]});}}),router['post'](a0_0x5effbe(0x199),async(_0x46d348,_0x54b245)=>{const _0x400edc=a0_0x5effbe;try{const {typeofsales:_0x487636}=_0x46d348[_0x400edc(0x194)],_0x1d05ca=await staff['find']({'account_category':'sa','type_of_acc_cat':_0x487636});_0x54b245[_0x400edc(0x19b)](0xc8)[_0x400edc(0x18a)](_0x1d05ca);}catch(_0x5dac15){_0x54b245[_0x400edc(0x19b)](0x190)['json']({'errorMessage':_0x5dac15[_0x400edc(0x1af)]});}}),router[a0_0x5effbe(0x18b)](a0_0x5effbe(0x197),async(_0x35eb2f,_0x9ed60e)=>{const _0x47e65e=a0_0x5effbe;try{const {id:_0x158765}=_0x35eb2f[_0x47e65e(0x194)],_0x394b83=await staff[_0x47e65e(0x19c)]({'_id':_0x158765});_0x9ed60e[_0x47e65e(0x19b)](0xc8)['json'](_0x394b83);}catch(_0xa49add){_0x9ed60e[_0x47e65e(0x19b)](0x190)[_0x47e65e(0x18a)]({'errorMessage':_0xa49add[_0x47e65e(0x1af)]});}}),router[a0_0x5effbe(0x18b)]('/map_value',async(_0x66a6c2,_0x3973b8)=>{const _0x5b500b=a0_0x5effbe;try{const {warehouse_name:_0x11b2b5,room_value:_0xbe3677}=_0x66a6c2['body'];let _0x4397a0;_0xbe3677==_0x5b500b(0x18e)?_0x4397a0=await warehouse[_0x5b500b(0x183)]([{'$unwind':_0x5b500b(0x196)},{'$match':{'name':_0x11b2b5}},{'$group':{'_id':{'bay':'$product_details.bay','level':'$product_details.level','type':'$product_details.type','floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x5b500b(0x1b4),'product_code':_0x5b500b(0x1a6)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x5b500b(0x1b4),0x0]},'then':_0x5b500b(0x1b4),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','level':_0x5b500b(0x1ac),'type':_0x5b500b(0x16d),'floorlevel':_0x5b500b(0x170),'products':{'$filter':{'input':_0x5b500b(0x177),'as':'product','cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]):_0x4397a0=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$match':{'name':_0x11b2b5,'room':_0xbe3677}},{'$group':{'_id':{'bay':'$product_details.bay','level':_0x5b500b(0x174),'type':_0x5b500b(0x189),'floorlevel':_0x5b500b(0x179)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x5b500b(0x1b4),'product_code':_0x5b500b(0x1a6)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x5b500b(0x1b4),0x0]},'then':_0x5b500b(0x1b4),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x5b500b(0x1ae),'level':'$_id.level','type':_0x5b500b(0x16d),'floorlevel':_0x5b500b(0x170),'products':{'$filter':{'input':_0x5b500b(0x177),'as':_0x5b500b(0x193),'cond':{'$gt':[_0x5b500b(0x168),0x0]}}},'totalQuantity':0x1}}]),_0x3973b8[_0x5b500b(0x19b)](0xc8)[_0x5b500b(0x18a)](_0x4397a0);}catch(_0xfd909b){_0x3973b8[_0x5b500b(0x19b)](0x190)[_0x5b500b(0x18a)]({'errorMessage':_0xfd909b[_0x5b500b(0x1af)]});}}),module['exports']=router;