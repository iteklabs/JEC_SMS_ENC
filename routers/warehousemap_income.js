function a0_0x1c8e(_0x579e31,_0x396c8c){const _0x106262=a0_0x1062();return a0_0x1c8e=function(_0x1c8ef9,_0x1e01aa){_0x1c8ef9=_0x1c8ef9-0x1a1;let _0x2f65dd=_0x106262[_0x1c8ef9];return _0x2f65dd;},a0_0x1c8e(_0x579e31,_0x396c8c);}const a0_0x5ba7e0=a0_0x1c8e;(function(_0x3a846b,_0x67811b){const _0x39e5d9=a0_0x1c8e,_0x451c40=_0x3a846b();while(!![]){try{const _0x167c89=-parseInt(_0x39e5d9(0x1ec))/0x1*(parseInt(_0x39e5d9(0x1ba))/0x2)+parseInt(_0x39e5d9(0x1b3))/0x3+parseInt(_0x39e5d9(0x1e1))/0x4*(-parseInt(_0x39e5d9(0x1fb))/0x5)+parseInt(_0x39e5d9(0x1be))/0x6*(-parseInt(_0x39e5d9(0x1cd))/0x7)+parseInt(_0x39e5d9(0x1c0))/0x8*(-parseInt(_0x39e5d9(0x1f9))/0x9)+parseInt(_0x39e5d9(0x1b6))/0xa*(parseInt(_0x39e5d9(0x1d7))/0xb)+parseInt(_0x39e5d9(0x1bd))/0xc*(parseInt(_0x39e5d9(0x1e8))/0xd);if(_0x167c89===_0x67811b)break;else _0x451c40['push'](_0x451c40['shift']());}catch(_0x3f7668){_0x451c40['push'](_0x451c40['shift']());}}}(a0_0x1062,0x31722));const express=require(a0_0x5ba7e0(0x1de)),app=express(),router=express['Router'](),multer=require(a0_0x5ba7e0(0x1d4)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x5ba7e0(0x1ab)),auth=require('../middleware/auth');var timezones=require(a0_0x5ba7e0(0x1f6));const users=require(a0_0x5ba7e0(0x1a5));function a0_0x1062(){const _0xca5254=['$product_details.level','$name','Portuguese','$room','$expiry_date','/MapData','/map_value','$product_details.batch_code','Chinese','7eSzhJn','message','warehouse','English','$product_details','$product_details.product_code','English\x20(US)','multer','Arabic\x20(ae)','$production_date','328537TYEHDU','Finished\x20Goods','$product_details.expiry_date','German','$batch_code','$product_code','$_id.floorlevel','express','status','$product_details.bin','617964zvhJpf','role','DRY\x20STORAGE','Arabic','get','$product_details.bay','French','9803391tQwBRn','$_id.level','log','all','3fzxURo','json','/Rooms_data3','Portuguese\x20(BR)','post','Hindi','timezone','$_id','/staff_sales','$count','timezones-list','success','$$product.product_quantity','361602jUDTFJ','find','5tVDknL','user','pack','errors','body','$product_details.production_date','email','Enabled','../public/language/languages.json','$_id.bin','render','Raw\x20Materials','/staff_sales_id','flash','../models/all_models','toLocaleString','findOne','/view','$product_details.product_stock','$_id.type','product','/Rooms_data','264753xHYDxA','QA\x20Warehouse','/Rooms_data2','120BHIbBd','$products','$_id.product','$product_details.floorlevel','169664StHADQ','$product_details.product_name','language','12Ktzjrf','1847994UqjGWf','$product_details.type','56UJbQob','$_id.bay','Return\x20Goods','aggregate'];a0_0x1062=function(){return _0xca5254;};return a0_0x1062();}router[a0_0x5ba7e0(0x1e5)](a0_0x5ba7e0(0x1ae),auth,async(_0xbc8ec6,_0x23839d)=>{const _0x4cdf2b=a0_0x5ba7e0;try{const {username:_0x5ce9f3,email:_0x1e7500,role:_0x134775}=_0xbc8ec6[_0x4cdf2b(0x1fc)],_0x510332=_0xbc8ec6[_0x4cdf2b(0x1fc)],_0xaddb28=await profile[_0x4cdf2b(0x1ad)]({'email':_0x510332['email']}),_0x400ae6=await master_shop[_0x4cdf2b(0x1fa)]();let _0x549bd2;if(_0x510332[_0x4cdf2b(0x1e2)]=='staff'){const _0x1c1a0c=await staff[_0x4cdf2b(0x1ad)]({'email':_0x510332[_0x4cdf2b(0x1a3)]});_0x549bd2=await warehouse[_0x4cdf2b(0x1c3)]([{'$match':{'status':'Enabled','name':_0x1c1a0c[_0x4cdf2b(0x1cf)]}},{'$group':{'_id':_0x4cdf2b(0x1c5),'name':{'$first':_0x4cdf2b(0x1c5)}}},{'$sort':{'name':-0x1}}]);}else _0x549bd2=await warehouse['aggregate']([{'$match':{'status':_0x4cdf2b(0x1a4)}},{'$group':{'_id':_0x4cdf2b(0x1c5),'name':{'$first':_0x4cdf2b(0x1c5)}}},{'$sort':{'name':-0x1}}]);const _0x32f53c=new Date()[_0x4cdf2b(0x1ac)]('en-US',{'timeZone':_0x400ae6[0x0][_0x4cdf2b(0x1f2)]});if(_0x400ae6[0x0]['language']==_0x4cdf2b(0x1d3))var _0x4bd8c1=users[_0x4cdf2b(0x1d0)];else{if(_0x400ae6[0x0][_0x4cdf2b(0x1bc)]=='Hindi')var _0x4bd8c1=users[_0x4cdf2b(0x1f1)];else{if(_0x400ae6[0x0][_0x4cdf2b(0x1bc)]==_0x4cdf2b(0x1da))var _0x4bd8c1=users[_0x4cdf2b(0x1da)];else{if(_0x400ae6[0x0]['language']=='Spanish')var _0x4bd8c1=users['Spanish'];else{if(_0x400ae6[0x0]['language']=='French')var _0x4bd8c1=users[_0x4cdf2b(0x1e7)];else{if(_0x400ae6[0x0][_0x4cdf2b(0x1bc)]==_0x4cdf2b(0x1ef))var _0x4bd8c1=users[_0x4cdf2b(0x1c6)];else{if(_0x400ae6[0x0][_0x4cdf2b(0x1bc)]==_0x4cdf2b(0x1cc))var _0x4bd8c1=users[_0x4cdf2b(0x1cc)];else{if(_0x400ae6[0x0][_0x4cdf2b(0x1bc)]==_0x4cdf2b(0x1d5))var _0x4bd8c1=users[_0x4cdf2b(0x1e4)];}}}}}}}_0x23839d[_0x4cdf2b(0x1a7)]('warehousemap_incoming',{'success':_0xbc8ec6[_0x4cdf2b(0x1aa)](_0x4cdf2b(0x1f7)),'errors':_0xbc8ec6[_0x4cdf2b(0x1aa)](_0x4cdf2b(0x1fe)),'role':_0x510332,'profile':_0xaddb28,'master_shop':_0x400ae6,'timezones':timezones,'language':_0x4bd8c1,'warehouse':_0x549bd2});}catch(_0x8294af){console[_0x4cdf2b(0x1ea)](_0x8294af),_0x23839d[_0x4cdf2b(0x1df)](0xc8)[_0x4cdf2b(0x1ed)]({'message':_0x8294af[_0x4cdf2b(0x1ce)]});}}),router[a0_0x5ba7e0(0x1f0)](a0_0x5ba7e0(0x1c9),async(_0x369f82,_0x1a88e9)=>{const _0x493caa=a0_0x5ba7e0,{warehouseNew:_0x37ed2e,rooms:_0x11056d,Type:_0xe6523a}=_0x369f82['body'],_0x562ca5=await warehouse[_0x493caa(0x1c3)]([{'$unwind':_0x493caa(0x1d1)},{'$match':{'name':_0x37ed2e,'room':_0x11056d,'product_details.type':_0xe6523a}},{'$group':{'_id':{'bay':_0x493caa(0x1e6),'bin':_0x493caa(0x1e0),'type':_0x493caa(0x1bf),'floorlevel':_0x493caa(0x1b9)},'products':{'$push':{'product_name':_0x493caa(0x1bb),'product_quantity':_0x493caa(0x1af),'product_code':_0x493caa(0x1d2)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x493caa(0x1af),0x0]},'then':_0x493caa(0x1af),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x493caa(0x1c1),'bin':_0x493caa(0x1a6),'type':'$_id.type','floorlevel':_0x493caa(0x1dd),'products':{'$filter':{'input':_0x493caa(0x1b7),'as':_0x493caa(0x1b1),'cond':{'$gt':[_0x493caa(0x1f8),0x0]}}},'totalQuantity':0x1}}]);_0x1a88e9[_0x493caa(0x1ed)](_0x562ca5);}),router[a0_0x5ba7e0(0x1f0)]('/MapData2',async(_0x1581c1,_0x5baeea)=>{const _0x2c6063=a0_0x5ba7e0,{warehouseNew:_0x2d5281,rooms:_0x5522a6,room_cat:_0x132ff5}=_0x1581c1[_0x2c6063(0x1a1)];let _0x382ed7;if(_0x132ff5=='All')_0x382ed7=await warehouse[_0x2c6063(0x1c3)]([{'$unwind':'$product_details'},{'$match':{'name':_0x2d5281}},{'$group':{'_id':{'bay':_0x2c6063(0x1e6),'product':_0x2c6063(0x1bb),'expiry':_0x2c6063(0x1d9)},'count':{'$sum':_0x2c6063(0x1af)},'production_date':{'$first':_0x2c6063(0x1a2)},'expiry_date':{'$first':_0x2c6063(0x1d9)},'batch_code':{'$first':_0x2c6063(0x1cb)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':_0x2c6063(0x1c1),'products':{'$push':{'product':_0x2c6063(0x1b8),'quantity':_0x2c6063(0x1f5),'production_date':_0x2c6063(0x1d6),'expiry_date':_0x2c6063(0x1c8),'batch_code':_0x2c6063(0x1db),'product_code':_0x2c6063(0x1dc)}},'totalQuantity':{'$sum':_0x2c6063(0x1f5)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x2c6063(0x1f3),'products':0x1,'totalQuantity':0x1}}]),console[_0x2c6063(0x1ea)](_0x132ff5);else{}_0x5baeea[_0x2c6063(0x1ed)](_0x382ed7);}),router['post'](a0_0x5ba7e0(0x1b2),async(_0x521477,_0x232302)=>{const _0x3d8f35=a0_0x5ba7e0;try{const {warehouse_name:_0x5351e4}=_0x521477[_0x3d8f35(0x1a1)];var _0x548778='';_0x548778=[{'$match':{'name':_0x5351e4,'status':_0x3d8f35(0x1a4)}},{'$group':{'_id':_0x3d8f35(0x1f3),'room_name':{'$first':_0x3d8f35(0x1c7)}}},{'$sort':{'room_name':0x1}}];const _0x2583e8=await warehouse[_0x3d8f35(0x1c3)](_0x548778);_0x232302[_0x3d8f35(0x1df)](0xc8)[_0x3d8f35(0x1ed)](_0x2583e8);}catch(_0x151aa4){_0x232302[_0x3d8f35(0x1df)](0x190)['json']({'errorMessage':_0x151aa4['message']});}}),router[a0_0x5ba7e0(0x1f0)](a0_0x5ba7e0(0x1b5),async(_0x25b886,_0x58e141)=>{const _0x46adb2=a0_0x5ba7e0;try{const {warehouse_name:_0x107b24,cat:_0x18847b,valNew:_0x5ed14f}=_0x25b886['body'];var _0x505e03='',_0x437156='';if(_0x18847b==_0x46adb2(0x1a8))_0x505e03=_0x46adb2(0x1c2),_0x5ed14f==_0x46adb2(0x1fd)?_0x437156=[{'$match':{'status':_0x46adb2(0x1a4),'warehouse_category':_0x18847b,'name':{'$ne':_0x505e03},'name':_0x46adb2(0x1e3)}},{'$group':{'_id':_0x46adb2(0x1c5),'room_name':{'$first':_0x46adb2(0x1c5)}}},{'$sort':{'room_name':0x1}}]:_0x437156=[{'$match':{'status':_0x46adb2(0x1a4),'warehouse_category':_0x18847b,'name':{'$ne':_0x505e03}}},{'$group':{'_id':_0x46adb2(0x1c5),'room_name':{'$first':_0x46adb2(0x1c5)}}},{'$sort':{'room_name':0x1}}];else _0x18847b==_0x46adb2(0x1d8)?(_0x505e03=_0x46adb2(0x1b4),_0x437156=[{'$match':{'status':_0x46adb2(0x1a4),'warehouse_category':_0x18847b,'name':{'$ne':_0x505e03}}},{'$group':{'_id':_0x46adb2(0x1c5),'room_name':{'$first':_0x46adb2(0x1c5)}}},{'$sort':{'room_name':0x1}}]):_0x437156=[{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x46adb2(0x1c5),'room_name':{'$first':_0x46adb2(0x1c5)}}},{'$sort':{'room_name':0x1}}];const _0x1b2d01=await warehouse[_0x46adb2(0x1c3)](_0x437156);_0x58e141[_0x46adb2(0x1df)](0xc8)[_0x46adb2(0x1ed)](_0x1b2d01);}catch(_0x5efe0d){_0x58e141[_0x46adb2(0x1df)](0x190)['json']({'errorMessage':_0x5efe0d[_0x46adb2(0x1ce)]}),console[_0x46adb2(0x1ea)](_0x5efe0d);}}),router['post'](a0_0x5ba7e0(0x1ee),async(_0x22e08d,_0x418ade)=>{const _0x369364=a0_0x5ba7e0;try{const {warehouse_name:_0x5841c9,cat:_0x4cf287}=_0x22e08d[_0x369364(0x1a1)],_0x5999c7=await warehouse['aggregate']([{'$match':{'status':_0x369364(0x1a4),'warehouse_category':_0x4cf287,'name':_0x5841c9}},{'$group':{'_id':_0x369364(0x1c7),'room_name':{'$first':_0x369364(0x1c7)}}},{'$sort':{'room_name':0x1}}]);_0x418ade[_0x369364(0x1df)](0xc8)[_0x369364(0x1ed)](_0x5999c7);}catch(_0x43dac2){_0x418ade[_0x369364(0x1df)](0x190)[_0x369364(0x1ed)]({'errorMessage':_0x43dac2[_0x369364(0x1ce)]});}}),router[a0_0x5ba7e0(0x1f0)](a0_0x5ba7e0(0x1f4),async(_0x3c0036,_0x317330)=>{const _0x40d7ea=a0_0x5ba7e0;try{const {typeofsales:_0x5f5623}=_0x3c0036[_0x40d7ea(0x1a1)];var _0x346be6;_0x5f5623=='1'&&(_0x346be6=await staff['find']({'account_category':'sa','type_of_acc_cat':_0x5f5623})),_0x317330['status'](0xc8)[_0x40d7ea(0x1ed)](_0x346be6);}catch(_0x2f2985){_0x317330[_0x40d7ea(0x1df)](0x190)[_0x40d7ea(0x1ed)]({'errorMessage':_0x2f2985[_0x40d7ea(0x1ce)]});}}),router['post'](a0_0x5ba7e0(0x1a9),async(_0x1784b9,_0x52bf51)=>{const _0x37c06b=a0_0x5ba7e0;try{const {id:_0x4f87b1}=_0x1784b9['body'],_0x542196=await staff[_0x37c06b(0x1fa)]({'_id':_0x4f87b1});_0x52bf51['status'](0xc8)['json'](_0x542196);}catch(_0x38cf86){_0x52bf51[_0x37c06b(0x1df)](0x190)[_0x37c06b(0x1ed)]({'errorMessage':_0x38cf86[_0x37c06b(0x1ce)]});}}),router[a0_0x5ba7e0(0x1f0)](a0_0x5ba7e0(0x1ca),async(_0x3d2178,_0x592043)=>{const _0x4e2c96=a0_0x5ba7e0;try{const {warehouse_name:_0xc66e5e,room_value:_0x2a54ba}=_0x3d2178[_0x4e2c96(0x1a1)];let _0x4780ee;_0x2a54ba==_0x4e2c96(0x1eb)?_0x4780ee=await warehouse[_0x4e2c96(0x1c3)]([{'$unwind':_0x4e2c96(0x1d1)},{'$match':{'name':_0xc66e5e}},{'$group':{'_id':{'bay':_0x4e2c96(0x1e6),'level':_0x4e2c96(0x1c4),'type':_0x4e2c96(0x1bf),'floorlevel':_0x4e2c96(0x1b9)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':'$product_details.product_stock','product_code':_0x4e2c96(0x1d2)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x4e2c96(0x1af),0x0]},'then':_0x4e2c96(0x1af),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x4e2c96(0x1c1),'level':_0x4e2c96(0x1e9),'type':_0x4e2c96(0x1b0),'floorlevel':_0x4e2c96(0x1dd),'products':{'$filter':{'input':_0x4e2c96(0x1b7),'as':'product','cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]):_0x4780ee=await warehouse['aggregate']([{'$unwind':_0x4e2c96(0x1d1)},{'$match':{'name':_0xc66e5e,'room':_0x2a54ba}},{'$group':{'_id':{'bay':_0x4e2c96(0x1e6),'level':_0x4e2c96(0x1c4),'type':'$product_details.type','floorlevel':_0x4e2c96(0x1b9)},'products':{'$push':{'product_name':_0x4e2c96(0x1bb),'product_quantity':_0x4e2c96(0x1af),'product_code':_0x4e2c96(0x1d2)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x4e2c96(0x1af),0x0]},'then':_0x4e2c96(0x1af),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x4e2c96(0x1c1),'level':_0x4e2c96(0x1e9),'type':_0x4e2c96(0x1b0),'floorlevel':_0x4e2c96(0x1dd),'products':{'$filter':{'input':_0x4e2c96(0x1b7),'as':_0x4e2c96(0x1b1),'cond':{'$gt':[_0x4e2c96(0x1f8),0x0]}}},'totalQuantity':0x1}}]),_0x592043[_0x4e2c96(0x1df)](0xc8)[_0x4e2c96(0x1ed)](_0x4780ee);}catch(_0x43be11){_0x592043[_0x4e2c96(0x1df)](0x190)[_0x4e2c96(0x1ed)]({'errorMessage':_0x43be11[_0x4e2c96(0x1ce)]});}}),module['exports']=router;