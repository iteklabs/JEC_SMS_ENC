const a0_0x96c0a7=a0_0x519e;(function(_0x4f0fa1,_0x111712){const _0x400164=a0_0x519e,_0x456ad0=_0x4f0fa1();while(!![]){try{const _0x51c05e=-parseInt(_0x400164(0xd3))/0x1+-parseInt(_0x400164(0xe2))/0x2+parseInt(_0x400164(0xe5))/0x3+-parseInt(_0x400164(0xfc))/0x4*(-parseInt(_0x400164(0x106))/0x5)+-parseInt(_0x400164(0xff))/0x6*(parseInt(_0x400164(0xc6))/0x7)+-parseInt(_0x400164(0x105))/0x8*(-parseInt(_0x400164(0xc1))/0x9)+parseInt(_0x400164(0xc4))/0xa;if(_0x51c05e===_0x111712)break;else _0x456ad0['push'](_0x456ad0['shift']());}catch(_0x3ae4aa){_0x456ad0['push'](_0x456ad0['shift']());}}}(a0_0x963d,0xb552f));function a0_0x519e(_0x745f3e,_0x479e23){const _0x963dc5=a0_0x963d();return a0_0x519e=function(_0x519ea6,_0x1d4731){_0x519ea6=_0x519ea6-0xad;let _0x3f4b77=_0x963dc5[_0x519ea6];return _0x3f4b77;},a0_0x519e(_0x745f3e,_0x479e23);}const express=require(a0_0x96c0a7(0xd5)),app=express(),router=express[a0_0x96c0a7(0xad)](),multer=require(a0_0x96c0a7(0xd8)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x96c0a7(0xd4)),auth=require(a0_0x96c0a7(0xf7));function a0_0x963d(){const _0x2bdf09=['DRY\x20STORAGE','$product_details.batch_code','$_id.bay','$products','4708636cAQeqX','Portuguese\x20(BR)','/Rooms_data3','6iiSbEB','post','email','Hindi','language','$_id.floorlevel','6215096ibsKyq','5qbPRfI','Router','$product_details.product_stock','$product_details.level','$product_details.product_name','$_id.product','$_id.bin','$product_details.production_date','French','$batch_code','$production_date','get','$product_details.bin','Spanish','$room','English\x20(US)','exports','staff','Return\x20Goods','message','flash','9ojOKRa','$$product.product_quantity','find','15015430EvEcsY','Finished\x20Goods','9520070WBzGHL','toLocaleString','log','$_id.level','$product_details.floorlevel','$name','Chinese','errors','timezone','/staff_sales','$expiry_date','/map_value','$product_details.bay','980502kZmxqS','../models/all_models','express','render','all','multer','/Rooms_data','$product_code','$count','role','$_id.type','/MapData','Portuguese','$_id','en-US','797560OunuvG','findOne','$product_details.type','79218xGQxOc','Arabic','warehouse','All','$product_details','body','QA\x20Warehouse','$product_details.product_code','aggregate','pack','$product_details.expiry_date','json','English','product','German','user','Enabled','status','../middleware/auth'];a0_0x963d=function(){return _0x2bdf09;};return a0_0x963d();}var timezones=require('timezones-list');const users=require('../public/language/languages.json');router[a0_0x96c0a7(0xb7)]('/view',auth,async(_0x53f0a8,_0x42bbdf)=>{const _0x344b79=a0_0x96c0a7;try{const {username:_0xbe9221,email:_0xbddb18,role:_0x32b0c1}=_0x53f0a8[_0x344b79(0xf4)],_0x498d89=_0x53f0a8['user'],_0x5995a4=await profile[_0x344b79(0xe3)]({'email':_0x498d89[_0x344b79(0x101)]}),_0x104df7=await master_shop[_0x344b79(0xc3)]();let _0x908a00;if(_0x498d89[_0x344b79(0xdc)]==_0x344b79(0xbd)){const _0x4dcf71=await staff[_0x344b79(0xe3)]({'email':_0x498d89[_0x344b79(0x101)]});_0x908a00=await warehouse[_0x344b79(0xed)]([{'$match':{'status':_0x344b79(0xf5),'name':_0x4dcf71[_0x344b79(0xe7)]}},{'$group':{'_id':_0x344b79(0xcb),'name':{'$first':_0x344b79(0xcb)}}},{'$sort':{'name':-0x1}}]);}else _0x908a00=await warehouse[_0x344b79(0xed)]([{'$match':{'status':_0x344b79(0xf5)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':-0x1}}]);const _0x36b8a8=new Date()[_0x344b79(0xc7)](_0x344b79(0xe1),{'timeZone':_0x104df7[0x0][_0x344b79(0xce)]});if(_0x104df7[0x0]['language']==_0x344b79(0xbb))var _0x474b14=users[_0x344b79(0xf1)];else{if(_0x104df7[0x0][_0x344b79(0x103)]==_0x344b79(0x102))var _0x474b14=users['Hindi'];else{if(_0x104df7[0x0]['language']==_0x344b79(0xf3))var _0x474b14=users[_0x344b79(0xf3)];else{if(_0x104df7[0x0][_0x344b79(0x103)]==_0x344b79(0xb9))var _0x474b14=users[_0x344b79(0xb9)];else{if(_0x104df7[0x0][_0x344b79(0x103)]=='French')var _0x474b14=users[_0x344b79(0xb4)];else{if(_0x104df7[0x0][_0x344b79(0x103)]==_0x344b79(0xfd))var _0x474b14=users[_0x344b79(0xdf)];else{if(_0x104df7[0x0]['language']=='Chinese')var _0x474b14=users[_0x344b79(0xcc)];else{if(_0x104df7[0x0][_0x344b79(0x103)]=='Arabic\x20(ae)')var _0x474b14=users[_0x344b79(0xe6)];}}}}}}}_0x42bbdf[_0x344b79(0xd6)]('warehousemap_incoming',{'success':_0x53f0a8[_0x344b79(0xc0)]('success'),'errors':_0x53f0a8[_0x344b79(0xc0)](_0x344b79(0xcd)),'role':_0x498d89,'profile':_0x5995a4,'master_shop':_0x104df7,'timezones':timezones,'language':_0x474b14,'warehouse':_0x908a00});}catch(_0x5a4e52){console[_0x344b79(0xc8)](_0x5a4e52),_0x42bbdf[_0x344b79(0xf6)](0xc8)[_0x344b79(0xf0)]({'message':_0x5a4e52[_0x344b79(0xbf)]});}}),router[a0_0x96c0a7(0x100)](a0_0x96c0a7(0xde),async(_0x408270,_0x29ff3b)=>{const _0x2f3f1c=a0_0x96c0a7,{warehouseNew:_0x5d0759,rooms:_0x52697f,Type:_0x360327}=_0x408270[_0x2f3f1c(0xea)],_0x2aed0a=await warehouse[_0x2f3f1c(0xed)]([{'$unwind':_0x2f3f1c(0xe9)},{'$match':{'name':_0x5d0759,'room':_0x52697f,'product_details.type':_0x360327}},{'$group':{'_id':{'bay':_0x2f3f1c(0xd2),'bin':_0x2f3f1c(0xb8),'type':_0x2f3f1c(0xe4),'floorlevel':_0x2f3f1c(0xca)},'products':{'$push':{'product_name':_0x2f3f1c(0xb0),'product_quantity':'$product_details.product_stock','product_code':_0x2f3f1c(0xec)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x2f3f1c(0xae),0x0]},'then':'$product_details.product_stock','else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x2f3f1c(0xfa),'bin':_0x2f3f1c(0xb2),'type':_0x2f3f1c(0xdd),'floorlevel':_0x2f3f1c(0x104),'products':{'$filter':{'input':_0x2f3f1c(0xfb),'as':_0x2f3f1c(0xf2),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0x29ff3b['json'](_0x2aed0a);}),router[a0_0x96c0a7(0x100)]('/MapData2',async(_0x50d72f,_0x328f39)=>{const _0x3a0e60=a0_0x96c0a7,{warehouseNew:_0x2364c5,rooms:_0x1db611,room_cat:_0x2b9b3d}=_0x50d72f[_0x3a0e60(0xea)];let _0x423b67;if(_0x2b9b3d==_0x3a0e60(0xe8))_0x423b67=await warehouse['aggregate']([{'$unwind':_0x3a0e60(0xe9)},{'$match':{'name':_0x2364c5}},{'$group':{'_id':{'bay':_0x3a0e60(0xd2),'product':_0x3a0e60(0xb0),'expiry':_0x3a0e60(0xef)},'count':{'$sum':_0x3a0e60(0xae)},'production_date':{'$first':_0x3a0e60(0xb3)},'expiry_date':{'$first':_0x3a0e60(0xef)},'batch_code':{'$first':_0x3a0e60(0xf9)},'product_code':{'$first':_0x3a0e60(0xec)}}},{'$group':{'_id':_0x3a0e60(0xfa),'products':{'$push':{'product':_0x3a0e60(0xb1),'quantity':_0x3a0e60(0xdb),'production_date':_0x3a0e60(0xb6),'expiry_date':_0x3a0e60(0xd0),'batch_code':_0x3a0e60(0xb5),'product_code':_0x3a0e60(0xda)}},'totalQuantity':{'$sum':_0x3a0e60(0xdb)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x3a0e60(0xe0),'products':0x1,'totalQuantity':0x1}}]),console['log'](_0x2b9b3d);else{}_0x328f39['json'](_0x423b67);}),router['post'](a0_0x96c0a7(0xd9),async(_0x37a692,_0x2fd052)=>{const _0x14025d=a0_0x96c0a7;try{const {warehouse_name:_0x5b207b}=_0x37a692[_0x14025d(0xea)];var _0x83ade7='';_0x83ade7=[{'$match':{'name':_0x5b207b,'status':_0x14025d(0xf5)}},{'$group':{'_id':_0x14025d(0xe0),'room_name':{'$first':_0x14025d(0xba)}}},{'$sort':{'room_name':0x1}}];const _0x5d3fd8=await warehouse[_0x14025d(0xed)](_0x83ade7);_0x2fd052[_0x14025d(0xf6)](0xc8)[_0x14025d(0xf0)](_0x5d3fd8);}catch(_0x9cf0b){_0x2fd052[_0x14025d(0xf6)](0x190)[_0x14025d(0xf0)]({'errorMessage':_0x9cf0b[_0x14025d(0xbf)]});}}),router[a0_0x96c0a7(0x100)]('/Rooms_data2',async(_0x140cfe,_0x278949)=>{const _0x3c7773=a0_0x96c0a7;try{const {warehouse_name:_0x542521,cat:_0x2ff644,valNew:_0x388144}=_0x140cfe[_0x3c7773(0xea)];var _0x1dff66='',_0x4e7acb='';if(_0x2ff644=='Raw\x20Materials')_0x1dff66=_0x3c7773(0xbe),_0x388144==_0x3c7773(0xee)?_0x4e7acb=[{'$match':{'status':'Enabled','warehouse_category':_0x2ff644,'name':{'$ne':_0x1dff66},'name':_0x3c7773(0xf8)}},{'$group':{'_id':_0x3c7773(0xcb),'room_name':{'$first':_0x3c7773(0xcb)}}},{'$sort':{'room_name':0x1}}]:_0x4e7acb=[{'$match':{'status':'Enabled','warehouse_category':_0x2ff644,'name':{'$ne':_0x1dff66}}},{'$group':{'_id':_0x3c7773(0xcb),'room_name':{'$first':_0x3c7773(0xcb)}}},{'$sort':{'room_name':0x1}}];else _0x2ff644==_0x3c7773(0xc5)?(_0x1dff66=_0x3c7773(0xeb),_0x4e7acb=[{'$match':{'status':_0x3c7773(0xf5),'warehouse_category':_0x2ff644,'name':{'$ne':_0x1dff66}}},{'$group':{'_id':'$name','room_name':{'$first':_0x3c7773(0xcb)}}},{'$sort':{'room_name':0x1}}]):_0x4e7acb=[{'$match':{'status':_0x3c7773(0xf5)}},{'$group':{'_id':_0x3c7773(0xcb),'room_name':{'$first':_0x3c7773(0xcb)}}},{'$sort':{'room_name':0x1}}];const _0x560875=await warehouse[_0x3c7773(0xed)](_0x4e7acb);_0x278949[_0x3c7773(0xf6)](0xc8)[_0x3c7773(0xf0)](_0x560875);}catch(_0x3f7aab){_0x278949[_0x3c7773(0xf6)](0x190)[_0x3c7773(0xf0)]({'errorMessage':_0x3f7aab[_0x3c7773(0xbf)]}),console[_0x3c7773(0xc8)](_0x3f7aab);}}),router[a0_0x96c0a7(0x100)](a0_0x96c0a7(0xfe),async(_0x192d44,_0x354e9c)=>{const _0x17620a=a0_0x96c0a7;try{const {warehouse_name:_0x2606c5,cat:_0x58fbd0}=_0x192d44['body'],_0x2e054b=await warehouse[_0x17620a(0xed)]([{'$match':{'status':_0x17620a(0xf5),'warehouse_category':_0x58fbd0,'name':_0x2606c5}},{'$group':{'_id':_0x17620a(0xba),'room_name':{'$first':_0x17620a(0xba)}}},{'$sort':{'room_name':0x1}}]);_0x354e9c['status'](0xc8)[_0x17620a(0xf0)](_0x2e054b);}catch(_0x2708dc){_0x354e9c[_0x17620a(0xf6)](0x190)['json']({'errorMessage':_0x2708dc[_0x17620a(0xbf)]});}}),router[a0_0x96c0a7(0x100)](a0_0x96c0a7(0xcf),async(_0x17fd09,_0x2f6f9e)=>{const _0xfd892=a0_0x96c0a7;try{const {typeofsales:_0x4b93e7}=_0x17fd09[_0xfd892(0xea)];var _0x18cd1e;_0x4b93e7=='1'&&(_0x18cd1e=await staff[_0xfd892(0xc3)]({'account_category':'sa','type_of_acc_cat':_0x4b93e7})),_0x2f6f9e[_0xfd892(0xf6)](0xc8)[_0xfd892(0xf0)](_0x18cd1e);}catch(_0x4e88f4){_0x2f6f9e[_0xfd892(0xf6)](0x190)['json']({'errorMessage':_0x4e88f4[_0xfd892(0xbf)]});}}),router[a0_0x96c0a7(0x100)]('/staff_sales_id',async(_0xd9ce4e,_0x23760e)=>{const _0x57ab7e=a0_0x96c0a7;try{const {id:_0x27853d}=_0xd9ce4e[_0x57ab7e(0xea)],_0x55613f=await staff['find']({'_id':_0x27853d});_0x23760e[_0x57ab7e(0xf6)](0xc8)[_0x57ab7e(0xf0)](_0x55613f);}catch(_0x31e004){_0x23760e[_0x57ab7e(0xf6)](0x190)['json']({'errorMessage':_0x31e004[_0x57ab7e(0xbf)]});}}),router['post'](a0_0x96c0a7(0xd1),async(_0x649077,_0x375d7a)=>{const _0x5b2ec2=a0_0x96c0a7;try{const {warehouse_name:_0x5b13d6,room_value:_0x12d634}=_0x649077['body'];let _0x39b460;_0x12d634==_0x5b2ec2(0xd7)?_0x39b460=await warehouse[_0x5b2ec2(0xed)]([{'$unwind':_0x5b2ec2(0xe9)},{'$match':{'name':_0x5b13d6}},{'$group':{'_id':{'bay':_0x5b2ec2(0xd2),'level':_0x5b2ec2(0xaf),'type':_0x5b2ec2(0xe4),'floorlevel':_0x5b2ec2(0xca)},'products':{'$push':{'product_name':_0x5b2ec2(0xb0),'product_quantity':'$product_details.product_stock','product_code':_0x5b2ec2(0xec)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x5b2ec2(0xae),0x0]},'then':_0x5b2ec2(0xae),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x5b2ec2(0xfa),'level':'$_id.level','type':_0x5b2ec2(0xdd),'floorlevel':_0x5b2ec2(0x104),'products':{'$filter':{'input':_0x5b2ec2(0xfb),'as':_0x5b2ec2(0xf2),'cond':{'$gt':[_0x5b2ec2(0xc2),0x0]}}},'totalQuantity':0x1}}]):_0x39b460=await warehouse[_0x5b2ec2(0xed)]([{'$unwind':_0x5b2ec2(0xe9)},{'$match':{'name':_0x5b13d6,'room':_0x12d634}},{'$group':{'_id':{'bay':_0x5b2ec2(0xd2),'level':_0x5b2ec2(0xaf),'type':'$product_details.type','floorlevel':_0x5b2ec2(0xca)},'products':{'$push':{'product_name':_0x5b2ec2(0xb0),'product_quantity':_0x5b2ec2(0xae),'product_code':_0x5b2ec2(0xec)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x5b2ec2(0xae),0x0]},'then':_0x5b2ec2(0xae),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x5b2ec2(0xfa),'level':_0x5b2ec2(0xc9),'type':'$_id.type','floorlevel':_0x5b2ec2(0x104),'products':{'$filter':{'input':_0x5b2ec2(0xfb),'as':_0x5b2ec2(0xf2),'cond':{'$gt':[_0x5b2ec2(0xc2),0x0]}}},'totalQuantity':0x1}}]),_0x375d7a['status'](0xc8)[_0x5b2ec2(0xf0)](_0x39b460);}catch(_0x3b9127){_0x375d7a['status'](0x190)['json']({'errorMessage':_0x3b9127[_0x5b2ec2(0xbf)]});}}),module[a0_0x96c0a7(0xbc)]=router;