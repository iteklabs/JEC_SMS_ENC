function a0_0x3b05(){const _0x532aea=['email','Hindi','user','get','$product_details.bin','find','$product_details.floorlevel','en-US','Portuguese','../public/language/languages.json','$_id.level','aggregate','$products','render','pack','English\x20(US)','/MapData','3066345wNcASp','success','multer','Chinese','express','Router','warehousemap_incoming','$product_details.product_code','timezone','$product_details.production_date','/Rooms_data','message','$room','log','$product_details.level','63BITHLV','$batch_code','staff','$product_details.product_name','$_id.bin','DRY\x20STORAGE','$product_details.expiry_date','4RhMAFS','toLocaleString','post','German','/staff_sales_id','Finished\x20Goods','json','product','All','$product_details','$expiry_date','$product_details.batch_code','Enabled','$product_details.bay','Spanish','7410400FEWSQY','French','body','$production_date','4889745iLnUod','$_id.bay','$name','19948CSdkUb','93ccRAqj','findOne','722104ZrTZLJ','Portuguese\x20(BR)','$_id.type','flash','/Rooms_data2','../models/all_models','/MapData2','exports','warehouse','2168328pcOiYW','Raw\x20Materials','all','English','$_id','$product_details.type','language','/staff_sales','errors','$product_code','status','$$product.product_quantity','$product_details.product_stock','194970RRBwLQ'];a0_0x3b05=function(){return _0x532aea;};return a0_0x3b05();}const a0_0x56ff93=a0_0x21cd;(function(_0xe75058,_0x1d01e3){const _0x33cef1=a0_0x21cd,_0x3e075e=_0xe75058();while(!![]){try{const _0xc6943b=-parseInt(_0x33cef1(0x132))/0x1*(-parseInt(_0x33cef1(0x161))/0x2)+-parseInt(_0x33cef1(0x149))/0x3*(parseInt(_0x33cef1(0x148))/0x4)+-parseInt(_0x33cef1(0x11c))/0x5+parseInt(_0x33cef1(0x154))/0x6+-parseInt(_0x33cef1(0x145))/0x7+-parseInt(_0x33cef1(0x14b))/0x8*(-parseInt(_0x33cef1(0x12b))/0x9)+parseInt(_0x33cef1(0x141))/0xa;if(_0xc6943b===_0x1d01e3)break;else _0x3e075e['push'](_0x3e075e['shift']());}catch(_0x2aca3b){_0x3e075e['push'](_0x3e075e['shift']());}}}(a0_0x3b05,0xa0990));const express=require(a0_0x56ff93(0x120)),app=express(),router=express[a0_0x56ff93(0x121)](),multer=require(a0_0x56ff93(0x11e)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x56ff93(0x150)),auth=require('../middleware/auth');var timezones=require('timezones-list');function a0_0x21cd(_0xae6f80,_0x6b0165){const _0x3b05d5=a0_0x3b05();return a0_0x21cd=function(_0x21cd48,_0x442345){_0x21cd48=_0x21cd48-0x10b;let _0x5922c6=_0x3b05d5[_0x21cd48];return _0x5922c6;},a0_0x21cd(_0xae6f80,_0x6b0165);}const users=require(a0_0x56ff93(0x114));router[a0_0x56ff93(0x10e)]('/view',auth,async(_0x4d499d,_0x1daae1)=>{const _0x5b9605=a0_0x56ff93;try{const {username:_0x741b79,email:_0x20f09d,role:_0x4ac32c}=_0x4d499d[_0x5b9605(0x10d)],_0x37fad0=_0x4d499d[_0x5b9605(0x10d)],_0x5f333d=await profile[_0x5b9605(0x14a)]({'email':_0x37fad0[_0x5b9605(0x10b)]}),_0x2a0e1d=await master_shop['find']();let _0x3a15ae;if(_0x37fad0['role']==_0x5b9605(0x12d)){const _0x242237=await staff[_0x5b9605(0x14a)]({'email':_0x37fad0['email']});_0x3a15ae=await warehouse[_0x5b9605(0x116)]([{'$match':{'status':'Enabled','name':_0x242237[_0x5b9605(0x153)]}},{'$group':{'_id':'$name','name':{'$first':_0x5b9605(0x147)}}},{'$sort':{'name':-0x1}}]);}else _0x3a15ae=await warehouse[_0x5b9605(0x116)]([{'$match':{'status':_0x5b9605(0x13e)}},{'$group':{'_id':_0x5b9605(0x147),'name':{'$first':'$name'}}},{'$sort':{'name':-0x1}}]);const _0x2138f7=new Date()[_0x5b9605(0x133)](_0x5b9605(0x112),{'timeZone':_0x2a0e1d[0x0][_0x5b9605(0x124)]});if(_0x2a0e1d[0x0][_0x5b9605(0x15a)]==_0x5b9605(0x11a))var _0x1f2e00=users[_0x5b9605(0x157)];else{if(_0x2a0e1d[0x0][_0x5b9605(0x15a)]==_0x5b9605(0x10c))var _0x1f2e00=users[_0x5b9605(0x10c)];else{if(_0x2a0e1d[0x0][_0x5b9605(0x15a)]==_0x5b9605(0x135))var _0x1f2e00=users[_0x5b9605(0x135)];else{if(_0x2a0e1d[0x0][_0x5b9605(0x15a)]==_0x5b9605(0x140))var _0x1f2e00=users[_0x5b9605(0x140)];else{if(_0x2a0e1d[0x0][_0x5b9605(0x15a)]==_0x5b9605(0x142))var _0x1f2e00=users[_0x5b9605(0x142)];else{if(_0x2a0e1d[0x0]['language']==_0x5b9605(0x14c))var _0x1f2e00=users[_0x5b9605(0x113)];else{if(_0x2a0e1d[0x0]['language']=='Chinese')var _0x1f2e00=users[_0x5b9605(0x11f)];else{if(_0x2a0e1d[0x0][_0x5b9605(0x15a)]=='Arabic\x20(ae)')var _0x1f2e00=users['Arabic'];}}}}}}}_0x1daae1[_0x5b9605(0x118)](_0x5b9605(0x122),{'success':_0x4d499d['flash'](_0x5b9605(0x11d)),'errors':_0x4d499d[_0x5b9605(0x14e)](_0x5b9605(0x15c)),'role':_0x37fad0,'profile':_0x5f333d,'master_shop':_0x2a0e1d,'timezones':timezones,'language':_0x1f2e00,'warehouse':_0x3a15ae});}catch(_0x4daf97){console[_0x5b9605(0x129)](_0x4daf97),_0x1daae1[_0x5b9605(0x15e)](0xc8)[_0x5b9605(0x138)]({'message':_0x4daf97['message']});}}),router[a0_0x56ff93(0x134)](a0_0x56ff93(0x11b),async(_0x3594d3,_0x593a8f)=>{const _0x4ae9cd=a0_0x56ff93,{warehouseNew:_0x236643,rooms:_0x674a80,Type:_0x1db011}=_0x3594d3['body'],_0x1f70c8=await warehouse[_0x4ae9cd(0x116)]([{'$unwind':_0x4ae9cd(0x13b)},{'$match':{'name':_0x236643,'room':_0x674a80,'product_details.type':_0x1db011}},{'$group':{'_id':{'bay':_0x4ae9cd(0x13f),'bin':_0x4ae9cd(0x10f),'type':_0x4ae9cd(0x159),'floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':_0x4ae9cd(0x12e),'product_quantity':_0x4ae9cd(0x160),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x4ae9cd(0x160),0x0]},'then':_0x4ae9cd(0x160),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x4ae9cd(0x146),'bin':_0x4ae9cd(0x12f),'type':_0x4ae9cd(0x14d),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x4ae9cd(0x117),'as':_0x4ae9cd(0x139),'cond':{'$gt':[_0x4ae9cd(0x15f),0x0]}}},'totalQuantity':0x1}}]);_0x593a8f['json'](_0x1f70c8);}),router[a0_0x56ff93(0x134)](a0_0x56ff93(0x151),async(_0x504685,_0x9897d)=>{const _0x45bd04=a0_0x56ff93,{warehouseNew:_0x27f3e8,rooms:_0x4d7008,room_cat:_0x5982cf}=_0x504685[_0x45bd04(0x143)];let _0x5cf803;if(_0x5982cf==_0x45bd04(0x13a))_0x5cf803=await warehouse[_0x45bd04(0x116)]([{'$unwind':'$product_details'},{'$match':{'name':_0x27f3e8}},{'$group':{'_id':{'bay':_0x45bd04(0x13f),'product':'$product_details.product_name','expiry':_0x45bd04(0x131)},'count':{'$sum':_0x45bd04(0x160)},'production_date':{'$first':_0x45bd04(0x125)},'expiry_date':{'$first':'$product_details.expiry_date'},'batch_code':{'$first':_0x45bd04(0x13d)},'product_code':{'$first':_0x45bd04(0x123)}}},{'$group':{'_id':_0x45bd04(0x146),'products':{'$push':{'product':'$_id.product','quantity':'$count','production_date':_0x45bd04(0x144),'expiry_date':_0x45bd04(0x13c),'batch_code':_0x45bd04(0x12c),'product_code':_0x45bd04(0x15d)}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x45bd04(0x158),'products':0x1,'totalQuantity':0x1}}]),console[_0x45bd04(0x129)](_0x5982cf);else{}_0x9897d[_0x45bd04(0x138)](_0x5cf803);}),router['post'](a0_0x56ff93(0x126),async(_0x23bc27,_0x419a55)=>{const _0x543f1d=a0_0x56ff93;try{const {warehouse_name:_0x17146a}=_0x23bc27[_0x543f1d(0x143)];var _0x707b26='';_0x707b26=[{'$match':{'name':_0x17146a,'status':_0x543f1d(0x13e)}},{'$group':{'_id':_0x543f1d(0x158),'room_name':{'$first':_0x543f1d(0x128)}}},{'$sort':{'room_name':0x1}}];const _0x1903c9=await warehouse['aggregate'](_0x707b26);_0x419a55[_0x543f1d(0x15e)](0xc8)[_0x543f1d(0x138)](_0x1903c9);}catch(_0x316935){_0x419a55[_0x543f1d(0x15e)](0x190)[_0x543f1d(0x138)]({'errorMessage':_0x316935[_0x543f1d(0x127)]});}}),router[a0_0x56ff93(0x134)](a0_0x56ff93(0x14f),async(_0x127a1b,_0x1fd9b5)=>{const _0x22946b=a0_0x56ff93;try{const {warehouse_name:_0x516d63,cat:_0x220702,valNew:_0x465f18}=_0x127a1b[_0x22946b(0x143)];var _0xb3cfa9='',_0x306377='';if(_0x220702==_0x22946b(0x155))_0xb3cfa9='Return\x20Goods',_0x465f18==_0x22946b(0x119)?_0x306377=[{'$match':{'status':_0x22946b(0x13e),'warehouse_category':_0x220702,'name':{'$ne':_0xb3cfa9},'name':_0x22946b(0x130)}},{'$group':{'_id':_0x22946b(0x147),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x306377=[{'$match':{'status':_0x22946b(0x13e),'warehouse_category':_0x220702,'name':{'$ne':_0xb3cfa9}}},{'$group':{'_id':_0x22946b(0x147),'room_name':{'$first':_0x22946b(0x147)}}},{'$sort':{'room_name':0x1}}];else _0x220702==_0x22946b(0x137)?(_0xb3cfa9='QA\x20Warehouse',_0x306377=[{'$match':{'status':_0x22946b(0x13e),'warehouse_category':_0x220702,'name':{'$ne':_0xb3cfa9}}},{'$group':{'_id':_0x22946b(0x147),'room_name':{'$first':_0x22946b(0x147)}}},{'$sort':{'room_name':0x1}}]):_0x306377=[{'$match':{'status':_0x22946b(0x13e)}},{'$group':{'_id':_0x22946b(0x147),'room_name':{'$first':_0x22946b(0x147)}}},{'$sort':{'room_name':0x1}}];const _0x4b5f40=await warehouse[_0x22946b(0x116)](_0x306377);_0x1fd9b5[_0x22946b(0x15e)](0xc8)['json'](_0x4b5f40);}catch(_0xe83858){_0x1fd9b5[_0x22946b(0x15e)](0x190)['json']({'errorMessage':_0xe83858['message']}),console[_0x22946b(0x129)](_0xe83858);}}),router[a0_0x56ff93(0x134)]('/Rooms_data3',async(_0x2450d5,_0x49fff7)=>{const _0x5f2fe6=a0_0x56ff93;try{const {warehouse_name:_0x39dfd7,cat:_0x1a205d}=_0x2450d5['body'],_0xb75090=await warehouse['aggregate']([{'$match':{'status':_0x5f2fe6(0x13e),'warehouse_category':_0x1a205d,'name':_0x39dfd7}},{'$group':{'_id':_0x5f2fe6(0x128),'room_name':{'$first':_0x5f2fe6(0x128)}}},{'$sort':{'room_name':0x1}}]);_0x49fff7[_0x5f2fe6(0x15e)](0xc8)[_0x5f2fe6(0x138)](_0xb75090);}catch(_0x564d82){_0x49fff7[_0x5f2fe6(0x15e)](0x190)['json']({'errorMessage':_0x564d82['message']});}}),router['post'](a0_0x56ff93(0x15b),async(_0x1fad55,_0x210059)=>{const _0x581ca7=a0_0x56ff93;try{const {typeofsales:_0x58c49a}=_0x1fad55['body'];var _0x2ebafd;_0x58c49a=='1'&&(_0x2ebafd=await staff[_0x581ca7(0x110)]({'account_category':'sa','type_of_acc_cat':_0x58c49a})),_0x210059[_0x581ca7(0x15e)](0xc8)[_0x581ca7(0x138)](_0x2ebafd);}catch(_0x24026d){_0x210059[_0x581ca7(0x15e)](0x190)[_0x581ca7(0x138)]({'errorMessage':_0x24026d['message']});}}),router[a0_0x56ff93(0x134)](a0_0x56ff93(0x136),async(_0x14d102,_0x4d7692)=>{const _0x3a0d0a=a0_0x56ff93;try{const {id:_0x340db4}=_0x14d102['body'],_0x2a7f1e=await staff[_0x3a0d0a(0x110)]({'_id':_0x340db4});_0x4d7692[_0x3a0d0a(0x15e)](0xc8)[_0x3a0d0a(0x138)](_0x2a7f1e);}catch(_0xabe68f){_0x4d7692[_0x3a0d0a(0x15e)](0x190)['json']({'errorMessage':_0xabe68f['message']});}}),router[a0_0x56ff93(0x134)]('/map_value',async(_0x31a6e2,_0x5ef91c)=>{const _0xde5cbb=a0_0x56ff93;try{const {warehouse_name:_0x41ae67,room_value:_0x270acd}=_0x31a6e2[_0xde5cbb(0x143)];let _0x12fc2d;_0x270acd==_0xde5cbb(0x156)?_0x12fc2d=await warehouse['aggregate']([{'$unwind':_0xde5cbb(0x13b)},{'$match':{'name':_0x41ae67}},{'$group':{'_id':{'bay':_0xde5cbb(0x13f),'level':_0xde5cbb(0x12a),'type':_0xde5cbb(0x159),'floorlevel':_0xde5cbb(0x111)},'products':{'$push':{'product_name':_0xde5cbb(0x12e),'product_quantity':_0xde5cbb(0x160),'product_code':_0xde5cbb(0x123)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0xde5cbb(0x160),0x0]},'then':_0xde5cbb(0x160),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0xde5cbb(0x146),'level':'$_id.level','type':_0xde5cbb(0x14d),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0xde5cbb(0x117),'as':'product','cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]):_0x12fc2d=await warehouse[_0xde5cbb(0x116)]([{'$unwind':_0xde5cbb(0x13b)},{'$match':{'name':_0x41ae67,'room':_0x270acd}},{'$group':{'_id':{'bay':'$product_details.bay','level':_0xde5cbb(0x12a),'type':_0xde5cbb(0x159),'floorlevel':_0xde5cbb(0x111)},'products':{'$push':{'product_name':_0xde5cbb(0x12e),'product_quantity':_0xde5cbb(0x160),'product_code':_0xde5cbb(0x123)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0xde5cbb(0x160),0x0]},'then':'$product_details.product_stock','else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0xde5cbb(0x146),'level':_0xde5cbb(0x115),'type':_0xde5cbb(0x14d),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0xde5cbb(0x117),'as':_0xde5cbb(0x139),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]),_0x5ef91c[_0xde5cbb(0x15e)](0xc8)[_0xde5cbb(0x138)](_0x12fc2d);}catch(_0x490ff6){_0x5ef91c[_0xde5cbb(0x15e)](0x190)[_0xde5cbb(0x138)]({'errorMessage':_0x490ff6[_0xde5cbb(0x127)]});}}),module[a0_0x56ff93(0x152)]=router;