function a0_0x5022(){const _0x2fd022=['success','$product_details.production_date','all','$product_details.level','Portuguese\x20(BR)','/view','flash','warehousemap_incoming','pack','Chinese','$_id.floorlevel','product','English','$product_details.bay','multer','email','role','/staff_sales','log','$_id.product','timezone','find','Arabic\x20(ae)','$product_details.expiry_date','$name','message','Spanish','../models/all_models','$product_details.type','body','/Rooms_data2','language','French','$$product.product_quantity','Enabled','$product_details','1902486MpfLWF','$_id.type','express','post','3931753hhMQGx','$room','get','Raw\x20Materials','staff','German','Portuguese','json','1662522mspZFm','Finished\x20Goods','$_id.bay','$products','$product_details.product_code','English\x20(US)','$product_details.floorlevel','3191760ktZytJ','user','/MapData2','QA\x20Warehouse','$_id.bin','../public/language/languages.json','27ZRdeJH','status','16951728fFDZxt','/staff_sales_id','../middleware/auth','5692624GesQmS','$count','$product_details.product_name','$_id','aggregate','timezones-list','$product_details.batch_code','warehouse','$production_date','findOne','1ZKWbnz','/Rooms_data3','$_id.level','$product_details.product_stock','7699490aMbCsM','toLocaleString','/map_value','Hindi'];a0_0x5022=function(){return _0x2fd022;};return a0_0x5022();}const a0_0x5dc06e=a0_0x3559;function a0_0x3559(_0x56a53e,_0x2d09e0){const _0x502214=a0_0x5022();return a0_0x3559=function(_0x3559ce,_0x10417f){_0x3559ce=_0x3559ce-0x1d6;let _0x585706=_0x502214[_0x3559ce];return _0x585706;},a0_0x3559(_0x56a53e,_0x2d09e0);}(function(_0x571d43,_0x3b9e80){const _0x4f919b=a0_0x3559,_0x16f633=_0x571d43();while(!![]){try{const _0x2ef994=parseInt(_0x4f919b(0x1dc))/0x1*(-parseInt(_0x4f919b(0x214))/0x2)+-parseInt(_0x4f919b(0x208))/0x3+-parseInt(_0x4f919b(0x226))/0x4+-parseInt(_0x4f919b(0x1e0))/0x5+-parseInt(_0x4f919b(0x21b))/0x6+-parseInt(_0x4f919b(0x20c))/0x7+parseInt(_0x4f919b(0x223))/0x8*(parseInt(_0x4f919b(0x221))/0x9);if(_0x2ef994===_0x3b9e80)break;else _0x16f633['push'](_0x16f633['shift']());}catch(_0x47da7b){_0x16f633['push'](_0x16f633['shift']());}}}(a0_0x5022,0xcbcde));const express=require(a0_0x5dc06e(0x20a)),app=express(),router=express['Router'](),multer=require(a0_0x5dc06e(0x1f2)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x5dc06e(0x1ff)),auth=require(a0_0x5dc06e(0x225));var timezones=require(a0_0x5dc06e(0x1d7));const users=require(a0_0x5dc06e(0x220));router[a0_0x5dc06e(0x20e)](a0_0x5dc06e(0x1e9),auth,async(_0x598a7d,_0xaa88b3)=>{const _0xde3f94=a0_0x5dc06e;try{const {username:_0x3a1329,email:_0x148bfb,role:_0x7f529e}=_0x598a7d[_0xde3f94(0x21c)],_0x4af0d4=_0x598a7d[_0xde3f94(0x21c)],_0x3b2188=await profile[_0xde3f94(0x1db)]({'email':_0x4af0d4[_0xde3f94(0x1f3)]}),_0x13ed80=await master_shop['find']();let _0x439b71;if(_0x4af0d4[_0xde3f94(0x1f4)]==_0xde3f94(0x210)){const _0x4c2c66=await staff[_0xde3f94(0x1db)]({'email':_0x4af0d4[_0xde3f94(0x1f3)]});_0x439b71=await warehouse[_0xde3f94(0x1d6)]([{'$match':{'status':_0xde3f94(0x206),'name':_0x4c2c66[_0xde3f94(0x1d9)]}},{'$group':{'_id':'$name','name':{'$first':_0xde3f94(0x1fc)}}},{'$sort':{'name':-0x1}}]);}else _0x439b71=await warehouse[_0xde3f94(0x1d6)]([{'$match':{'status':_0xde3f94(0x206)}},{'$group':{'_id':_0xde3f94(0x1fc),'name':{'$first':'$name'}}},{'$sort':{'name':-0x1}}]);const _0x35eae6=new Date()[_0xde3f94(0x1e1)]('en-US',{'timeZone':_0x13ed80[0x0][_0xde3f94(0x1f8)]});if(_0x13ed80[0x0][_0xde3f94(0x203)]==_0xde3f94(0x219))var _0x14d6d1=users[_0xde3f94(0x1f0)];else{if(_0x13ed80[0x0][_0xde3f94(0x203)]==_0xde3f94(0x1e3))var _0x14d6d1=users[_0xde3f94(0x1e3)];else{if(_0x13ed80[0x0][_0xde3f94(0x203)]==_0xde3f94(0x211))var _0x14d6d1=users[_0xde3f94(0x211)];else{if(_0x13ed80[0x0]['language']==_0xde3f94(0x1fe))var _0x14d6d1=users[_0xde3f94(0x1fe)];else{if(_0x13ed80[0x0][_0xde3f94(0x203)]==_0xde3f94(0x204))var _0x14d6d1=users[_0xde3f94(0x204)];else{if(_0x13ed80[0x0][_0xde3f94(0x203)]==_0xde3f94(0x1e8))var _0x14d6d1=users[_0xde3f94(0x212)];else{if(_0x13ed80[0x0][_0xde3f94(0x203)]=='Chinese')var _0x14d6d1=users[_0xde3f94(0x1ed)];else{if(_0x13ed80[0x0][_0xde3f94(0x203)]==_0xde3f94(0x1fa))var _0x14d6d1=users['Arabic'];}}}}}}}_0xaa88b3['render'](_0xde3f94(0x1eb),{'success':_0x598a7d[_0xde3f94(0x1ea)](_0xde3f94(0x1e4)),'errors':_0x598a7d[_0xde3f94(0x1ea)]('errors'),'role':_0x4af0d4,'profile':_0x3b2188,'master_shop':_0x13ed80,'timezones':timezones,'language':_0x14d6d1,'warehouse':_0x439b71});}catch(_0x173b5b){console[_0xde3f94(0x1f6)](_0x173b5b),_0xaa88b3[_0xde3f94(0x222)](0xc8)['json']({'message':_0x173b5b[_0xde3f94(0x1fd)]});}}),router[a0_0x5dc06e(0x20b)]('/MapData',async(_0x27c122,_0x298456)=>{const _0x27a7c7=a0_0x5dc06e,{warehouseNew:_0x2fc83c,rooms:_0x3b21fc,Type:_0x1eca4b}=_0x27c122[_0x27a7c7(0x201)],_0x22ca5f=await warehouse[_0x27a7c7(0x1d6)]([{'$unwind':'$product_details'},{'$match':{'name':_0x2fc83c,'room':_0x3b21fc,'product_details.type':_0x1eca4b}},{'$group':{'_id':{'bay':'$product_details.bay','bin':'$product_details.bin','type':_0x27a7c7(0x200),'floorlevel':_0x27a7c7(0x21a)},'products':{'$push':{'product_name':_0x27a7c7(0x228),'product_quantity':'$product_details.product_stock','product_code':_0x27a7c7(0x218)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x27a7c7(0x1df),0x0]},'then':_0x27a7c7(0x1df),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x27a7c7(0x216),'bin':_0x27a7c7(0x21f),'type':_0x27a7c7(0x209),'floorlevel':_0x27a7c7(0x1ee),'products':{'$filter':{'input':'$products','as':_0x27a7c7(0x1ef),'cond':{'$gt':[_0x27a7c7(0x205),0x0]}}},'totalQuantity':0x1}}]);_0x298456['json'](_0x22ca5f);}),router[a0_0x5dc06e(0x20b)](a0_0x5dc06e(0x21d),async(_0x51ca6f,_0x1d3fcf)=>{const _0x1ac76c=a0_0x5dc06e,{warehouseNew:_0x179ba1,rooms:_0x2d3fd1,room_cat:_0x46afe1}=_0x51ca6f[_0x1ac76c(0x201)];let _0x987758;if(_0x46afe1=='All')_0x987758=await warehouse[_0x1ac76c(0x1d6)]([{'$unwind':'$product_details'},{'$match':{'name':_0x179ba1}},{'$group':{'_id':{'bay':_0x1ac76c(0x1f1),'product':_0x1ac76c(0x228),'expiry':_0x1ac76c(0x1fb)},'count':{'$sum':'$product_details.product_stock'},'production_date':{'$first':_0x1ac76c(0x1e5)},'expiry_date':{'$first':_0x1ac76c(0x1fb)},'batch_code':{'$first':_0x1ac76c(0x1d8)},'product_code':{'$first':_0x1ac76c(0x218)}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':_0x1ac76c(0x1f7),'quantity':_0x1ac76c(0x227),'production_date':_0x1ac76c(0x1da),'expiry_date':'$expiry_date','batch_code':'$batch_code','product_code':'$product_code'}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x1ac76c(0x229),'products':0x1,'totalQuantity':0x1}}]),console[_0x1ac76c(0x1f6)](_0x46afe1);else{}_0x1d3fcf[_0x1ac76c(0x213)](_0x987758);}),router[a0_0x5dc06e(0x20b)]('/Rooms_data',async(_0x5b8073,_0xa0ebb0)=>{const _0x4b1951=a0_0x5dc06e;try{const {warehouse_name:_0x1f5d75}=_0x5b8073[_0x4b1951(0x201)];var _0x292823='';_0x292823=[{'$match':{'name':_0x1f5d75,'status':_0x4b1951(0x206)}},{'$group':{'_id':_0x4b1951(0x229),'room_name':{'$first':_0x4b1951(0x20d)}}},{'$sort':{'room_name':0x1}}];const _0x57805e=await warehouse[_0x4b1951(0x1d6)](_0x292823);_0xa0ebb0['status'](0xc8)[_0x4b1951(0x213)](_0x57805e);}catch(_0x3dca17){_0xa0ebb0[_0x4b1951(0x222)](0x190)[_0x4b1951(0x213)]({'errorMessage':_0x3dca17[_0x4b1951(0x1fd)]});}}),router['post'](a0_0x5dc06e(0x202),async(_0x1d3bcb,_0x314ab4)=>{const _0x24c3af=a0_0x5dc06e;try{const {warehouse_name:_0x1b9ba8,cat:_0x2b7459,valNew:_0x5c37e2}=_0x1d3bcb['body'];var _0x3238c9='',_0x363dfb='';if(_0x2b7459==_0x24c3af(0x20f))_0x3238c9='Return\x20Goods',_0x5c37e2==_0x24c3af(0x1ec)?_0x363dfb=[{'$match':{'status':'Enabled','warehouse_category':_0x2b7459,'name':{'$ne':_0x3238c9},'name':'DRY\x20STORAGE'}},{'$group':{'_id':_0x24c3af(0x1fc),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x363dfb=[{'$match':{'status':_0x24c3af(0x206),'warehouse_category':_0x2b7459,'name':{'$ne':_0x3238c9}}},{'$group':{'_id':'$name','room_name':{'$first':_0x24c3af(0x1fc)}}},{'$sort':{'room_name':0x1}}];else _0x2b7459==_0x24c3af(0x215)?(_0x3238c9=_0x24c3af(0x21e),_0x363dfb=[{'$match':{'status':'Enabled','warehouse_category':_0x2b7459,'name':{'$ne':_0x3238c9}}},{'$group':{'_id':_0x24c3af(0x1fc),'room_name':{'$first':_0x24c3af(0x1fc)}}},{'$sort':{'room_name':0x1}}]):_0x363dfb=[{'$match':{'status':_0x24c3af(0x206)}},{'$group':{'_id':_0x24c3af(0x1fc),'room_name':{'$first':_0x24c3af(0x1fc)}}},{'$sort':{'room_name':0x1}}];const _0x4cc86a=await warehouse[_0x24c3af(0x1d6)](_0x363dfb);_0x314ab4[_0x24c3af(0x222)](0xc8)[_0x24c3af(0x213)](_0x4cc86a);}catch(_0x52810b){_0x314ab4[_0x24c3af(0x222)](0x190)[_0x24c3af(0x213)]({'errorMessage':_0x52810b['message']}),console[_0x24c3af(0x1f6)](_0x52810b);}}),router[a0_0x5dc06e(0x20b)](a0_0x5dc06e(0x1dd),async(_0xf1f3d6,_0x118a16)=>{const _0x37d85c=a0_0x5dc06e;try{const {warehouse_name:_0x5be214,cat:_0x38aab8}=_0xf1f3d6[_0x37d85c(0x201)],_0x42f982=await warehouse[_0x37d85c(0x1d6)]([{'$match':{'status':'Enabled','warehouse_category':_0x38aab8,'name':_0x5be214}},{'$group':{'_id':_0x37d85c(0x20d),'room_name':{'$first':_0x37d85c(0x20d)}}},{'$sort':{'room_name':0x1}}]);_0x118a16['status'](0xc8)[_0x37d85c(0x213)](_0x42f982);}catch(_0x3dc7e3){_0x118a16[_0x37d85c(0x222)](0x190)[_0x37d85c(0x213)]({'errorMessage':_0x3dc7e3[_0x37d85c(0x1fd)]});}}),router[a0_0x5dc06e(0x20b)](a0_0x5dc06e(0x1f5),async(_0x55f3c6,_0x894ade)=>{const _0x249bcc=a0_0x5dc06e;try{const {typeofsales:_0x505978}=_0x55f3c6['body'];var _0x480277;_0x505978=='1'&&(_0x480277=await staff[_0x249bcc(0x1f9)]({'account_category':'sa','type_of_acc_cat':_0x505978})),_0x894ade[_0x249bcc(0x222)](0xc8)[_0x249bcc(0x213)](_0x480277);}catch(_0xb0d1a4){_0x894ade[_0x249bcc(0x222)](0x190)[_0x249bcc(0x213)]({'errorMessage':_0xb0d1a4[_0x249bcc(0x1fd)]});}}),router['post'](a0_0x5dc06e(0x224),async(_0x40bca6,_0x38c249)=>{const _0x3ed4d8=a0_0x5dc06e;try{const {id:_0x5a1ea6}=_0x40bca6[_0x3ed4d8(0x201)],_0x18b15e=await staff[_0x3ed4d8(0x1f9)]({'_id':_0x5a1ea6});_0x38c249[_0x3ed4d8(0x222)](0xc8)[_0x3ed4d8(0x213)](_0x18b15e);}catch(_0x2f29a7){_0x38c249[_0x3ed4d8(0x222)](0x190)['json']({'errorMessage':_0x2f29a7[_0x3ed4d8(0x1fd)]});}}),router['post'](a0_0x5dc06e(0x1e2),async(_0x2922bd,_0x450ebf)=>{const _0x2f6320=a0_0x5dc06e;try{const {warehouse_name:_0x20042b,room_value:_0x57bb3b}=_0x2922bd['body'];let _0x52c184;_0x57bb3b==_0x2f6320(0x1e6)?_0x52c184=await warehouse[_0x2f6320(0x1d6)]([{'$unwind':_0x2f6320(0x207)},{'$match':{'name':_0x20042b}},{'$group':{'_id':{'bay':'$product_details.bay','level':_0x2f6320(0x1e7),'type':_0x2f6320(0x200),'floorlevel':_0x2f6320(0x21a)},'products':{'$push':{'product_name':_0x2f6320(0x228),'product_quantity':_0x2f6320(0x1df),'product_code':_0x2f6320(0x218)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x2f6320(0x1df),0x0]},'then':_0x2f6320(0x1df),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x2f6320(0x216),'level':_0x2f6320(0x1de),'type':_0x2f6320(0x209),'floorlevel':_0x2f6320(0x1ee),'products':{'$filter':{'input':_0x2f6320(0x217),'as':_0x2f6320(0x1ef),'cond':{'$gt':[_0x2f6320(0x205),0x0]}}},'totalQuantity':0x1}}]):_0x52c184=await warehouse[_0x2f6320(0x1d6)]([{'$unwind':_0x2f6320(0x207)},{'$match':{'name':_0x20042b,'room':_0x57bb3b}},{'$group':{'_id':{'bay':_0x2f6320(0x1f1),'level':_0x2f6320(0x1e7),'type':_0x2f6320(0x200),'floorlevel':_0x2f6320(0x21a)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':'$product_details.product_stock','product_code':_0x2f6320(0x218)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x2f6320(0x1df),0x0]},'then':_0x2f6320(0x1df),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','level':_0x2f6320(0x1de),'type':'$_id.type','floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x2f6320(0x217),'as':_0x2f6320(0x1ef),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]),_0x450ebf['status'](0xc8)[_0x2f6320(0x213)](_0x52c184);}catch(_0x1a61cd){_0x450ebf[_0x2f6320(0x222)](0x190)[_0x2f6320(0x213)]({'errorMessage':_0x1a61cd[_0x2f6320(0x1fd)]});}}),module['exports']=router;