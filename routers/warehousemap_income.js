function a0_0x5bd4(_0x453321,_0x3da593){const _0x4aa526=a0_0x4aa5();return a0_0x5bd4=function(_0x5bd477,_0xd2194b){_0x5bd477=_0x5bd477-0x1e7;let _0x3b312a=_0x4aa526[_0x5bd477];return _0x3b312a;},a0_0x5bd4(_0x453321,_0x3da593);}const a0_0x51ac2c=a0_0x5bd4;(function(_0x5c90c0,_0x1e3112){const _0x21bccc=a0_0x5bd4,_0x3463e6=_0x5c90c0();while(!![]){try{const _0x3a71c4=parseInt(_0x21bccc(0x21d))/0x1*(parseInt(_0x21bccc(0x1f2))/0x2)+parseInt(_0x21bccc(0x21a))/0x3*(-parseInt(_0x21bccc(0x22b))/0x4)+-parseInt(_0x21bccc(0x21f))/0x5+-parseInt(_0x21bccc(0x232))/0x6*(-parseInt(_0x21bccc(0x208))/0x7)+-parseInt(_0x21bccc(0x21b))/0x8+parseInt(_0x21bccc(0x209))/0x9+-parseInt(_0x21bccc(0x23c))/0xa;if(_0x3a71c4===_0x1e3112)break;else _0x3463e6['push'](_0x3463e6['shift']());}catch(_0x73cbd4){_0x3463e6['push'](_0x3463e6['shift']());}}}(a0_0x4aa5,0xb760a));const express=require(a0_0x51ac2c(0x227)),app=express(),router=express['Router'](),multer=require('multer'),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x51ac2c(0x219)),auth=require(a0_0x51ac2c(0x1f7));var timezones=require(a0_0x51ac2c(0x1ee));const users=require(a0_0x51ac2c(0x221));function a0_0x4aa5(){const _0x15eb96=['$_id.floorlevel','success','render','Raw\x20Materials','message','Arabic\x20(ae)','English\x20(US)','exports','$product_details.floorlevel','$_id.bin','/view','$_id.bay','$$product.product_quantity','All','German','Finished\x20Goods','202195irncWa','11312010sajimF','$room','pack','language','Enabled','errors','$product_details.product_name','post','French','aggregate','English','json','flash','$product_details.production_date','log','$products','../models/all_models','2082819GyLPTe','10734584twqCET','Spanish','57874cTSjxA','/staff_sales_id','1577050bAxknU','Portuguese\x20(BR)','../public/language/languages.json','status','$expiry_date','Return\x20Goods','$_id.product','user','express','body','$product_details.bin','$name','4KBoVwh','$product_details.batch_code','/Rooms_data3','Hindi','$product_details.level','$product_details','$product_details.product_code','222HLYWfP','all','warehouse','$_id.type','$product_details.type','product','findOne','email','en-US','role','1489990EFeLbA','$product_details.expiry_date','$product_code','toLocaleString','$product_details.bay','find','$batch_code','Chinese','DRY\x20STORAGE','timezone','timezones-list','Portuguese','/Rooms_data2','$product_details.product_stock','32uKrVpw','$_id.level','$_id','/staff_sales','$count','../middleware/auth'];a0_0x4aa5=function(){return _0x15eb96;};return a0_0x4aa5();}router['get'](a0_0x51ac2c(0x202),auth,async(_0x3824c2,_0x8bc61d)=>{const _0x311d8c=a0_0x51ac2c;try{const {username:_0x58f656,email:_0x39bf02,role:_0x52342b}=_0x3824c2[_0x311d8c(0x226)],_0xdcd475=_0x3824c2['user'],_0xec19a3=await profile[_0x311d8c(0x238)]({'email':_0xdcd475[_0x311d8c(0x239)]}),_0x127885=await master_shop[_0x311d8c(0x1e9)]();let _0xc207bc;if(_0xdcd475[_0x311d8c(0x23b)]=='staff'){const _0x5e8dc4=await staff[_0x311d8c(0x238)]({'email':_0xdcd475['email']});_0xc207bc=await warehouse[_0x311d8c(0x212)]([{'$match':{'status':'Enabled','name':_0x5e8dc4[_0x311d8c(0x234)]}},{'$group':{'_id':_0x311d8c(0x22a),'name':{'$first':'$name'}}},{'$sort':{'name':-0x1}}]);}else _0xc207bc=await warehouse[_0x311d8c(0x212)]([{'$match':{'status':_0x311d8c(0x20d)}},{'$group':{'_id':_0x311d8c(0x22a),'name':{'$first':_0x311d8c(0x22a)}}},{'$sort':{'name':-0x1}}]);const _0x2be1f5=new Date()[_0x311d8c(0x1e7)](_0x311d8c(0x23a),{'timeZone':_0x127885[0x0][_0x311d8c(0x1ed)]});if(_0x127885[0x0][_0x311d8c(0x20c)]==_0x311d8c(0x1fe))var _0x37009c=users[_0x311d8c(0x213)];else{if(_0x127885[0x0][_0x311d8c(0x20c)]==_0x311d8c(0x22e))var _0x37009c=users[_0x311d8c(0x22e)];else{if(_0x127885[0x0]['language']=='German')var _0x37009c=users[_0x311d8c(0x206)];else{if(_0x127885[0x0]['language']==_0x311d8c(0x21c))var _0x37009c=users[_0x311d8c(0x21c)];else{if(_0x127885[0x0]['language']==_0x311d8c(0x211))var _0x37009c=users['French'];else{if(_0x127885[0x0][_0x311d8c(0x20c)]==_0x311d8c(0x220))var _0x37009c=users[_0x311d8c(0x1ef)];else{if(_0x127885[0x0][_0x311d8c(0x20c)]==_0x311d8c(0x1eb))var _0x37009c=users[_0x311d8c(0x1eb)];else{if(_0x127885[0x0][_0x311d8c(0x20c)]==_0x311d8c(0x1fd))var _0x37009c=users['Arabic'];}}}}}}}_0x8bc61d[_0x311d8c(0x1fa)]('warehousemap_incoming',{'success':_0x3824c2[_0x311d8c(0x215)](_0x311d8c(0x1f9)),'errors':_0x3824c2[_0x311d8c(0x215)](_0x311d8c(0x20e)),'role':_0xdcd475,'profile':_0xec19a3,'master_shop':_0x127885,'timezones':timezones,'language':_0x37009c,'warehouse':_0xc207bc});}catch(_0x2f6ae1){console[_0x311d8c(0x217)](_0x2f6ae1),_0x8bc61d[_0x311d8c(0x222)](0xc8)[_0x311d8c(0x214)]({'message':_0x2f6ae1['message']});}}),router[a0_0x51ac2c(0x210)]('/MapData',async(_0x567be7,_0x392fb0)=>{const _0x22719e=a0_0x51ac2c,{warehouseNew:_0x5c26d5,rooms:_0x143830,Type:_0x598687}=_0x567be7[_0x22719e(0x228)],_0x28043f=await warehouse[_0x22719e(0x212)]([{'$unwind':'$product_details'},{'$match':{'name':_0x5c26d5,'room':_0x143830,'product_details.type':_0x598687}},{'$group':{'_id':{'bay':_0x22719e(0x1e8),'bin':_0x22719e(0x229),'type':_0x22719e(0x236),'floorlevel':_0x22719e(0x200)},'products':{'$push':{'product_name':_0x22719e(0x20f),'product_quantity':_0x22719e(0x1f1),'product_code':_0x22719e(0x231)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x22719e(0x1f1),0x0]},'then':_0x22719e(0x1f1),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x22719e(0x203),'bin':_0x22719e(0x201),'type':_0x22719e(0x235),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x22719e(0x218),'as':_0x22719e(0x237),'cond':{'$gt':[_0x22719e(0x204),0x0]}}},'totalQuantity':0x1}}]);_0x392fb0['json'](_0x28043f);}),router['post']('/MapData2',async(_0x2090e6,_0x41a6eb)=>{const _0x6d4734=a0_0x51ac2c,{warehouseNew:_0x338dc4,rooms:_0x56384e,room_cat:_0x47dda4}=_0x2090e6[_0x6d4734(0x228)];let _0x4f5c77;if(_0x47dda4==_0x6d4734(0x205))_0x4f5c77=await warehouse[_0x6d4734(0x212)]([{'$unwind':_0x6d4734(0x230)},{'$match':{'name':_0x338dc4}},{'$group':{'_id':{'bay':'$product_details.bay','product':_0x6d4734(0x20f),'expiry':_0x6d4734(0x23d)},'count':{'$sum':_0x6d4734(0x1f1)},'production_date':{'$first':_0x6d4734(0x216)},'expiry_date':{'$first':_0x6d4734(0x23d)},'batch_code':{'$first':_0x6d4734(0x22c)},'product_code':{'$first':_0x6d4734(0x231)}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':_0x6d4734(0x225),'quantity':'$count','production_date':'$production_date','expiry_date':_0x6d4734(0x223),'batch_code':_0x6d4734(0x1ea),'product_code':_0x6d4734(0x23e)}},'totalQuantity':{'$sum':_0x6d4734(0x1f6)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':'$_id','products':0x1,'totalQuantity':0x1}}]),console['log'](_0x47dda4);else{}_0x41a6eb[_0x6d4734(0x214)](_0x4f5c77);}),router[a0_0x51ac2c(0x210)]('/Rooms_data',async(_0x1b4fe8,_0x24fc9d)=>{const _0x40c279=a0_0x51ac2c;try{const {warehouse_name:_0x396e18}=_0x1b4fe8['body'];var _0x64b054='';_0x64b054=[{'$match':{'name':_0x396e18,'status':'Enabled'}},{'$group':{'_id':_0x40c279(0x1f4),'room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0x5117f0=await warehouse['aggregate'](_0x64b054);_0x24fc9d['status'](0xc8)[_0x40c279(0x214)](_0x5117f0);}catch(_0xdf41e3){_0x24fc9d['status'](0x190)[_0x40c279(0x214)]({'errorMessage':_0xdf41e3[_0x40c279(0x1fc)]});}}),router['post'](a0_0x51ac2c(0x1f0),async(_0x42ba5d,_0x433283)=>{const _0x386032=a0_0x51ac2c;try{const {warehouse_name:_0x2b9932,cat:_0x2d54f9,valNew:_0x4e3e62}=_0x42ba5d[_0x386032(0x228)];var _0x517108='',_0x1aa138='';if(_0x2d54f9==_0x386032(0x1fb))_0x517108=_0x386032(0x224),_0x4e3e62==_0x386032(0x20b)?_0x1aa138=[{'$match':{'status':'Enabled','warehouse_category':_0x2d54f9,'name':{'$ne':_0x517108},'name':_0x386032(0x1ec)}},{'$group':{'_id':_0x386032(0x22a),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0x1aa138=[{'$match':{'status':'Enabled','warehouse_category':_0x2d54f9,'name':{'$ne':_0x517108}}},{'$group':{'_id':_0x386032(0x22a),'room_name':{'$first':_0x386032(0x22a)}}},{'$sort':{'room_name':0x1}}];else _0x2d54f9==_0x386032(0x207)?(_0x517108='QA\x20Warehouse',_0x1aa138=[{'$match':{'status':_0x386032(0x20d),'warehouse_category':_0x2d54f9,'name':{'$ne':_0x517108}}},{'$group':{'_id':_0x386032(0x22a),'room_name':{'$first':_0x386032(0x22a)}}},{'$sort':{'room_name':0x1}}]):_0x1aa138=[{'$match':{'status':_0x386032(0x20d)}},{'$group':{'_id':_0x386032(0x22a),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}];const _0x2ed0f7=await warehouse[_0x386032(0x212)](_0x1aa138);_0x433283[_0x386032(0x222)](0xc8)[_0x386032(0x214)](_0x2ed0f7);}catch(_0x2249a8){_0x433283['status'](0x190)[_0x386032(0x214)]({'errorMessage':_0x2249a8[_0x386032(0x1fc)]}),console['log'](_0x2249a8);}}),router[a0_0x51ac2c(0x210)](a0_0x51ac2c(0x22d),async(_0x2f1f05,_0x5dabff)=>{const _0x2c50e4=a0_0x51ac2c;try{const {warehouse_name:_0x48312b,cat:_0x54dd68}=_0x2f1f05['body'],_0x20f79a=await warehouse[_0x2c50e4(0x212)]([{'$match':{'status':'Enabled','warehouse_category':_0x54dd68,'name':_0x48312b}},{'$group':{'_id':_0x2c50e4(0x20a),'room_name':{'$first':_0x2c50e4(0x20a)}}},{'$sort':{'room_name':0x1}}]);_0x5dabff[_0x2c50e4(0x222)](0xc8)[_0x2c50e4(0x214)](_0x20f79a);}catch(_0x18c836){_0x5dabff[_0x2c50e4(0x222)](0x190)['json']({'errorMessage':_0x18c836[_0x2c50e4(0x1fc)]});}}),router[a0_0x51ac2c(0x210)](a0_0x51ac2c(0x1f5),async(_0x1fc6b4,_0x4dc403)=>{const _0x16767e=a0_0x51ac2c;try{const {typeofsales:_0x45fe5f}=_0x1fc6b4[_0x16767e(0x228)];var _0xbb2d7a;_0x45fe5f=='1'&&(_0xbb2d7a=await staff['find']({'account_category':'sa','type_of_acc_cat':_0x45fe5f})),_0x4dc403[_0x16767e(0x222)](0xc8)['json'](_0xbb2d7a);}catch(_0x405e04){_0x4dc403['status'](0x190)[_0x16767e(0x214)]({'errorMessage':_0x405e04[_0x16767e(0x1fc)]});}}),router[a0_0x51ac2c(0x210)](a0_0x51ac2c(0x21e),async(_0x1076e1,_0x283862)=>{const _0x156705=a0_0x51ac2c;try{const {id:_0x243b15}=_0x1076e1[_0x156705(0x228)],_0x9f0f2e=await staff[_0x156705(0x1e9)]({'_id':_0x243b15});_0x283862[_0x156705(0x222)](0xc8)[_0x156705(0x214)](_0x9f0f2e);}catch(_0x5affb8){_0x283862['status'](0x190)['json']({'errorMessage':_0x5affb8[_0x156705(0x1fc)]});}}),router[a0_0x51ac2c(0x210)]('/map_value',async(_0x3b42c9,_0x74cc4b)=>{const _0x30f433=a0_0x51ac2c;try{const {warehouse_name:_0x9a2479,room_value:_0x29a02d}=_0x3b42c9['body'];let _0x1d86d1;_0x29a02d==_0x30f433(0x233)?_0x1d86d1=await warehouse[_0x30f433(0x212)]([{'$unwind':_0x30f433(0x230)},{'$match':{'name':_0x9a2479}},{'$group':{'_id':{'bay':'$product_details.bay','level':_0x30f433(0x22f),'type':_0x30f433(0x236),'floorlevel':_0x30f433(0x200)},'products':{'$push':{'product_name':_0x30f433(0x20f),'product_quantity':_0x30f433(0x1f1),'product_code':_0x30f433(0x231)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x30f433(0x1f1),0x0]},'then':_0x30f433(0x1f1),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x30f433(0x203),'level':_0x30f433(0x1f3),'type':_0x30f433(0x235),'floorlevel':'$_id.floorlevel','products':{'$filter':{'input':'$products','as':_0x30f433(0x237),'cond':{'$gt':[_0x30f433(0x204),0x0]}}},'totalQuantity':0x1}}]):_0x1d86d1=await warehouse[_0x30f433(0x212)]([{'$unwind':'$product_details'},{'$match':{'name':_0x9a2479,'room':_0x29a02d}},{'$group':{'_id':{'bay':_0x30f433(0x1e8),'level':_0x30f433(0x22f),'type':_0x30f433(0x236),'floorlevel':_0x30f433(0x200)},'products':{'$push':{'product_name':_0x30f433(0x20f),'product_quantity':_0x30f433(0x1f1),'product_code':_0x30f433(0x231)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':['$product_details.product_stock',0x0]},'then':_0x30f433(0x1f1),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x30f433(0x203),'level':_0x30f433(0x1f3),'type':'$_id.type','floorlevel':_0x30f433(0x1f8),'products':{'$filter':{'input':_0x30f433(0x218),'as':_0x30f433(0x237),'cond':{'$gt':[_0x30f433(0x204),0x0]}}},'totalQuantity':0x1}}]),_0x74cc4b[_0x30f433(0x222)](0xc8)['json'](_0x1d86d1);}catch(_0x333bfe){_0x74cc4b[_0x30f433(0x222)](0x190)['json']({'errorMessage':_0x333bfe[_0x30f433(0x1fc)]});}}),module[a0_0x51ac2c(0x1ff)]=router;