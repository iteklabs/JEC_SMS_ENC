function a0_0x4309(){const _0xd244e6=['/staff_sales','../models/all_models','warehouse','warehousemap_incoming','DRY\x20STORAGE','$count','16796150MmoEDE','$product_details','$product_details.production_date','/view','timezone','aggregate','$_id.floorlevel','$batch_code','QA\x20Warehouse','German','Router','body','English\x20(US)','language','$room','Enabled','$_id','2476404IAKpDk','Spanish','$product_details.bay','477066VEsHyU','$_id.type','message','findOne','/MapData2','12wFaNCG','Raw\x20Materials','toLocaleString','16167096hUODNg','$expiry_date','Hindi','Chinese','Arabic\x20(ae)','status','966215PswMru','$product_details.type','9dtnUXj','English','$product_details.product_name','Return\x20Goods','753444IDVWfH','French','product','$_id.level','$production_date','$product_details.product_code','multer','exports','post','errors','$product_details.level','Finished\x20Goods','json','$product_details.expiry_date','All','$_id.bin','$_id.bay','$_id.product','Arabic','express','role','get','14PyKdrO','/staff_sales_id','en-US','$product_details.product_stock','$$product.product_quantity','/map_value','timezones-list','flash','render','log','../middleware/auth','staff','2746760txWOrO','email','$products','$name','$product_details.floorlevel','find'];a0_0x4309=function(){return _0xd244e6;};return a0_0x4309();}const a0_0x3e682d=a0_0x380d;function a0_0x380d(_0x3d174c,_0x5dbaad){const _0x430947=a0_0x4309();return a0_0x380d=function(_0x380dbf,_0x89ff10){_0x380dbf=_0x380dbf-0x16c;let _0x1e0d55=_0x430947[_0x380dbf];return _0x1e0d55;},a0_0x380d(_0x3d174c,_0x5dbaad);}(function(_0x20d007,_0x147e19){const _0x3890ba=a0_0x380d,_0x5f5297=_0x20d007();while(!![]){try{const _0x15bd7b=-parseInt(_0x3890ba(0x16f))/0x1+parseInt(_0x3890ba(0x16c))/0x2+-parseInt(_0x3890ba(0x17f))/0x3*(-parseInt(_0x3890ba(0x183))/0x4)+parseInt(_0x3890ba(0x17d))/0x5*(parseInt(_0x3890ba(0x174))/0x6)+-parseInt(_0x3890ba(0x199))/0x7*(parseInt(_0x3890ba(0x1a5))/0x8)+-parseInt(_0x3890ba(0x177))/0x9+parseInt(_0x3890ba(0x1b1))/0xa;if(_0x15bd7b===_0x147e19)break;else _0x5f5297['push'](_0x5f5297['shift']());}catch(_0x3839e8){_0x5f5297['push'](_0x5f5297['shift']());}}}(a0_0x4309,0xddfe6));const express=require(a0_0x3e682d(0x196)),app=express(),router=express[a0_0x3e682d(0x1bb)](),multer=require(a0_0x3e682d(0x189)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x3e682d(0x1ac)),auth=require(a0_0x3e682d(0x1a3));var timezones=require(a0_0x3e682d(0x19f));const users=require('../public/language/languages.json');router[a0_0x3e682d(0x198)](a0_0x3e682d(0x1b4),auth,async(_0x441075,_0x4c88fc)=>{const _0x354862=a0_0x3e682d;try{const {username:_0xd885a6,email:_0x1a814,role:_0x4c892b}=_0x441075['user'],_0x2adebe=_0x441075['user'],_0x2b8f06=await profile['findOne']({'email':_0x2adebe[_0x354862(0x1a6)]}),_0x438f37=await master_shop[_0x354862(0x1aa)]();let _0x175fb2;if(_0x2adebe[_0x354862(0x197)]==_0x354862(0x1a4)){const _0x4723b9=await staff[_0x354862(0x172)]({'email':_0x2adebe[_0x354862(0x1a6)]});_0x175fb2=await warehouse[_0x354862(0x1b6)]([{'$match':{'status':'Enabled','name':_0x4723b9[_0x354862(0x1ad)]}},{'$group':{'_id':_0x354862(0x1a8),'name':{'$first':_0x354862(0x1a8)}}},{'$sort':{'name':-0x1}}]);}else _0x175fb2=await warehouse[_0x354862(0x1b6)]([{'$match':{'status':_0x354862(0x1c0)}},{'$group':{'_id':'$name','name':{'$first':'$name'}}},{'$sort':{'name':-0x1}}]);const _0x404fe6=new Date()[_0x354862(0x176)](_0x354862(0x19b),{'timeZone':_0x438f37[0x0][_0x354862(0x1b5)]});if(_0x438f37[0x0][_0x354862(0x1be)]==_0x354862(0x1bd))var _0x34022f=users[_0x354862(0x180)];else{if(_0x438f37[0x0]['language']==_0x354862(0x179))var _0x34022f=users[_0x354862(0x179)];else{if(_0x438f37[0x0][_0x354862(0x1be)]=='German')var _0x34022f=users[_0x354862(0x1ba)];else{if(_0x438f37[0x0]['language']==_0x354862(0x16d))var _0x34022f=users[_0x354862(0x16d)];else{if(_0x438f37[0x0][_0x354862(0x1be)]==_0x354862(0x184))var _0x34022f=users['French'];else{if(_0x438f37[0x0][_0x354862(0x1be)]=='Portuguese\x20(BR)')var _0x34022f=users['Portuguese'];else{if(_0x438f37[0x0]['language']==_0x354862(0x17a))var _0x34022f=users[_0x354862(0x17a)];else{if(_0x438f37[0x0][_0x354862(0x1be)]==_0x354862(0x17b))var _0x34022f=users[_0x354862(0x195)];}}}}}}}_0x4c88fc[_0x354862(0x1a1)](_0x354862(0x1ae),{'success':_0x441075['flash']('success'),'errors':_0x441075[_0x354862(0x1a0)](_0x354862(0x18c)),'role':_0x2adebe,'profile':_0x2b8f06,'master_shop':_0x438f37,'timezones':timezones,'language':_0x34022f,'warehouse':_0x175fb2});}catch(_0x38e7c4){console[_0x354862(0x1a2)](_0x38e7c4),_0x4c88fc['status'](0xc8)[_0x354862(0x18f)]({'message':_0x38e7c4[_0x354862(0x171)]});}}),router[a0_0x3e682d(0x18b)]('/MapData',async(_0x400bb6,_0x22b2e9)=>{const _0x59516f=a0_0x3e682d,{warehouseNew:_0x1962a6,rooms:_0x53ea5c,Type:_0x247477}=_0x400bb6[_0x59516f(0x1bc)],_0x495770=await warehouse[_0x59516f(0x1b6)]([{'$unwind':_0x59516f(0x1b2)},{'$match':{'name':_0x1962a6,'room':_0x53ea5c,'product_details.type':_0x247477}},{'$group':{'_id':{'bay':_0x59516f(0x16e),'bin':'$product_details.bin','type':_0x59516f(0x17e),'floorlevel':_0x59516f(0x1a9)},'products':{'$push':{'product_name':_0x59516f(0x181),'product_quantity':'$product_details.product_stock','product_code':_0x59516f(0x188)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x59516f(0x19c),0x0]},'then':_0x59516f(0x19c),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','bin':_0x59516f(0x192),'type':_0x59516f(0x170),'floorlevel':_0x59516f(0x1b7),'products':{'$filter':{'input':_0x59516f(0x1a7),'as':'product','cond':{'$gt':[_0x59516f(0x19d),0x0]}}},'totalQuantity':0x1}}]);_0x22b2e9[_0x59516f(0x18f)](_0x495770);}),router[a0_0x3e682d(0x18b)](a0_0x3e682d(0x173),async(_0x25e848,_0x5802a5)=>{const _0x45b184=a0_0x3e682d,{warehouseNew:_0x2fef40,rooms:_0xba2ce5,room_cat:_0x1228e5}=_0x25e848['body'];let _0x3ccee5;if(_0x1228e5==_0x45b184(0x191))_0x3ccee5=await warehouse[_0x45b184(0x1b6)]([{'$unwind':_0x45b184(0x1b2)},{'$match':{'name':_0x2fef40}},{'$group':{'_id':{'bay':_0x45b184(0x16e),'product':_0x45b184(0x181),'expiry':_0x45b184(0x190)},'count':{'$sum':_0x45b184(0x19c)},'production_date':{'$first':_0x45b184(0x1b3)},'expiry_date':{'$first':_0x45b184(0x190)},'batch_code':{'$first':'$product_details.batch_code'},'product_code':{'$first':_0x45b184(0x188)}}},{'$group':{'_id':_0x45b184(0x193),'products':{'$push':{'product':_0x45b184(0x194),'quantity':_0x45b184(0x1b0),'production_date':_0x45b184(0x187),'expiry_date':_0x45b184(0x178),'batch_code':_0x45b184(0x1b8),'product_code':'$product_code'}},'totalQuantity':{'$sum':_0x45b184(0x1b0)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x45b184(0x1c1),'products':0x1,'totalQuantity':0x1}}]),console[_0x45b184(0x1a2)](_0x1228e5);else{}_0x5802a5[_0x45b184(0x18f)](_0x3ccee5);}),router['post']('/Rooms_data',async(_0x452d94,_0x1beb7e)=>{const _0x5db5c0=a0_0x3e682d;try{const {warehouse_name:_0x2b0a32}=_0x452d94['body'];var _0x162999='';_0x162999=[{'$match':{'name':_0x2b0a32,'status':_0x5db5c0(0x1c0)}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0x1b7d9c=await warehouse[_0x5db5c0(0x1b6)](_0x162999);_0x1beb7e['status'](0xc8)[_0x5db5c0(0x18f)](_0x1b7d9c);}catch(_0x266334){_0x1beb7e[_0x5db5c0(0x17c)](0x190)[_0x5db5c0(0x18f)]({'errorMessage':_0x266334['message']});}}),router[a0_0x3e682d(0x18b)]('/Rooms_data2',async(_0x2de54d,_0x220d35)=>{const _0x7f11a0=a0_0x3e682d;try{const {warehouse_name:_0x19cbbf,cat:_0x42c823,valNew:_0x4a3feb}=_0x2de54d[_0x7f11a0(0x1bc)];var _0x1904e='',_0xa10450='';if(_0x42c823==_0x7f11a0(0x175))_0x1904e=_0x7f11a0(0x182),_0x4a3feb=='pack'?_0xa10450=[{'$match':{'status':'Enabled','warehouse_category':_0x42c823,'name':{'$ne':_0x1904e},'name':_0x7f11a0(0x1af)}},{'$group':{'_id':_0x7f11a0(0x1a8),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]:_0xa10450=[{'$match':{'status':_0x7f11a0(0x1c0),'warehouse_category':_0x42c823,'name':{'$ne':_0x1904e}}},{'$group':{'_id':_0x7f11a0(0x1a8),'room_name':{'$first':_0x7f11a0(0x1a8)}}},{'$sort':{'room_name':0x1}}];else _0x42c823==_0x7f11a0(0x18e)?(_0x1904e=_0x7f11a0(0x1b9),_0xa10450=[{'$match':{'status':_0x7f11a0(0x1c0),'warehouse_category':_0x42c823,'name':{'$ne':_0x1904e}}},{'$group':{'_id':_0x7f11a0(0x1a8),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0xa10450=[{'$match':{'status':'Enabled'}},{'$group':{'_id':'$name','room_name':{'$first':_0x7f11a0(0x1a8)}}},{'$sort':{'room_name':0x1}}];const _0x33b8fe=await warehouse[_0x7f11a0(0x1b6)](_0xa10450);_0x220d35[_0x7f11a0(0x17c)](0xc8)[_0x7f11a0(0x18f)](_0x33b8fe);}catch(_0x5d7b8d){_0x220d35[_0x7f11a0(0x17c)](0x190)[_0x7f11a0(0x18f)]({'errorMessage':_0x5d7b8d[_0x7f11a0(0x171)]}),console[_0x7f11a0(0x1a2)](_0x5d7b8d);}}),router[a0_0x3e682d(0x18b)]('/Rooms_data3',async(_0x9b5b8f,_0x30cbf1)=>{const _0x1fbadc=a0_0x3e682d;try{const {warehouse_name:_0xca5bfa,cat:_0x5d0e49}=_0x9b5b8f['body'],_0x489dff=await warehouse['aggregate']([{'$match':{'status':_0x1fbadc(0x1c0),'warehouse_category':_0x5d0e49,'name':_0xca5bfa}},{'$group':{'_id':_0x1fbadc(0x1bf),'room_name':{'$first':_0x1fbadc(0x1bf)}}},{'$sort':{'room_name':0x1}}]);_0x30cbf1['status'](0xc8)[_0x1fbadc(0x18f)](_0x489dff);}catch(_0xc57cd7){_0x30cbf1[_0x1fbadc(0x17c)](0x190)['json']({'errorMessage':_0xc57cd7[_0x1fbadc(0x171)]});}}),router[a0_0x3e682d(0x18b)](a0_0x3e682d(0x1ab),async(_0x3c217d,_0xd247b5)=>{const _0x2c074d=a0_0x3e682d;try{const {typeofsales:_0x447978}=_0x3c217d['body'];var _0x54abaf;_0x447978=='1'&&(_0x54abaf=await staff[_0x2c074d(0x1aa)]({'account_category':'sa','type_of_acc_cat':_0x447978})),_0xd247b5[_0x2c074d(0x17c)](0xc8)[_0x2c074d(0x18f)](_0x54abaf);}catch(_0x115282){_0xd247b5[_0x2c074d(0x17c)](0x190)[_0x2c074d(0x18f)]({'errorMessage':_0x115282[_0x2c074d(0x171)]});}}),router[a0_0x3e682d(0x18b)](a0_0x3e682d(0x19a),async(_0x27720f,_0x147444)=>{const _0x3e1520=a0_0x3e682d;try{const {id:_0x2ab6ba}=_0x27720f[_0x3e1520(0x1bc)],_0x527a5b=await staff[_0x3e1520(0x1aa)]({'_id':_0x2ab6ba});_0x147444[_0x3e1520(0x17c)](0xc8)[_0x3e1520(0x18f)](_0x527a5b);}catch(_0xc9673a){_0x147444['status'](0x190)[_0x3e1520(0x18f)]({'errorMessage':_0xc9673a[_0x3e1520(0x171)]});}}),router[a0_0x3e682d(0x18b)](a0_0x3e682d(0x19e),async(_0x576b53,_0x51bb7f)=>{const _0x1bdfdb=a0_0x3e682d;try{const {warehouse_name:_0x33e934,room_value:_0x38e424}=_0x576b53[_0x1bdfdb(0x1bc)];let _0x46bd4c;_0x38e424=='all'?_0x46bd4c=await warehouse[_0x1bdfdb(0x1b6)]([{'$unwind':_0x1bdfdb(0x1b2)},{'$match':{'name':_0x33e934}},{'$group':{'_id':{'bay':_0x1bdfdb(0x16e),'level':_0x1bdfdb(0x18d),'type':_0x1bdfdb(0x17e),'floorlevel':_0x1bdfdb(0x1a9)},'products':{'$push':{'product_name':_0x1bdfdb(0x181),'product_quantity':_0x1bdfdb(0x19c),'product_code':_0x1bdfdb(0x188)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x1bdfdb(0x19c),0x0]},'then':_0x1bdfdb(0x19c),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x1bdfdb(0x193),'level':_0x1bdfdb(0x186),'type':_0x1bdfdb(0x170),'floorlevel':_0x1bdfdb(0x1b7),'products':{'$filter':{'input':'$products','as':_0x1bdfdb(0x185),'cond':{'$gt':[_0x1bdfdb(0x19d),0x0]}}},'totalQuantity':0x1}}]):_0x46bd4c=await warehouse[_0x1bdfdb(0x1b6)]([{'$unwind':_0x1bdfdb(0x1b2)},{'$match':{'name':_0x33e934,'room':_0x38e424}},{'$group':{'_id':{'bay':_0x1bdfdb(0x16e),'level':_0x1bdfdb(0x18d),'type':'$product_details.type','floorlevel':_0x1bdfdb(0x1a9)},'products':{'$push':{'product_name':_0x1bdfdb(0x181),'product_quantity':'$product_details.product_stock','product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x1bdfdb(0x19c),0x0]},'then':_0x1bdfdb(0x19c),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','level':'$_id.level','type':_0x1bdfdb(0x170),'floorlevel':_0x1bdfdb(0x1b7),'products':{'$filter':{'input':_0x1bdfdb(0x1a7),'as':_0x1bdfdb(0x185),'cond':{'$gt':[_0x1bdfdb(0x19d),0x0]}}},'totalQuantity':0x1}}]),_0x51bb7f[_0x1bdfdb(0x17c)](0xc8)[_0x1bdfdb(0x18f)](_0x46bd4c);}catch(_0x38a65a){_0x51bb7f['status'](0x190)[_0x1bdfdb(0x18f)]({'errorMessage':_0x38a65a[_0x1bdfdb(0x171)]});}}),module[a0_0x3e682d(0x18a)]=router;