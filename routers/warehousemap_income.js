function a0_0x5210(){const _0x11a553=['$product_details','warehousemap_incoming','message','Arabic\x20(ae)','$product_details.level','/staff_sales','Chinese','/MapData2','$product_details.product_code','2238IMEvNs','Enabled','status','Portuguese','$product_details.bay','Arabic','language','$batch_code','$_id.floorlevel','warehouse','Spanish','/MapData','toLocaleString','2659321aIgKAi','Hindi','product','get','multer','json','Finished\x20Goods','$expiry_date','128344CGBMVk','$count','$_id.type','10404520YmIKHo','125krnXGD','en-US','$_id.bay','render','success','DRY\x20STORAGE','user','express','log','$name','findOne','$product_details.product_name','flash','post','$_id','../public/language/languages.json','$products','body','role','2296440sLwNos','$product_details.batch_code','pack','4852926CRMfGh','Return\x20Goods','timezones-list','aggregate','errors','8UHDTBt','$$product.product_quantity','find','timezone','French','Router','$room','email','$product_details.expiry_date','staff','$product_details.product_stock','../models/all_models','$_id.product','$product_details.type','all','$_id.bin','128PuAwpD','$_id.level','Portuguese\x20(BR)','$product_details.floorlevel','QA\x20Warehouse','German','$product_details.production_date','Raw\x20Materials','49525qluQZK'];a0_0x5210=function(){return _0x11a553;};return a0_0x5210();}const a0_0x3959c5=a0_0x5ab1;(function(_0x3fe450,_0x32dd29){const _0x335bd2=a0_0x5ab1,_0x1a9cd6=_0x3fe450();while(!![]){try{const _0x2e1ead=-parseInt(_0x335bd2(0x1a1))/0x1+parseInt(_0x335bd2(0x199))/0x2*(parseInt(_0x335bd2(0x1ab))/0x3)+parseInt(_0x335bd2(0x1c0))/0x4*(-parseInt(_0x335bd2(0x1c4))/0x5)+parseInt(_0x335bd2(0x1d7))/0x6+parseInt(_0x335bd2(0x1b8))/0x7*(parseInt(_0x335bd2(0x1df))/0x8)+-parseInt(_0x335bd2(0x1da))/0x9+parseInt(_0x335bd2(0x1c3))/0xa;if(_0x2e1ead===_0x32dd29)break;else _0x1a9cd6['push'](_0x1a9cd6['shift']());}catch(_0x408a93){_0x1a9cd6['push'](_0x1a9cd6['shift']());}}}(a0_0x5210,0x704ae));const express=require(a0_0x3959c5(0x1cb)),app=express(),router=express[a0_0x3959c5(0x18e)](),multer=require(a0_0x3959c5(0x1bc)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0x3959c5(0x194)),auth=require('../middleware/auth');var timezones=require(a0_0x3959c5(0x1dc));const users=require(a0_0x3959c5(0x1d3));function a0_0x5ab1(_0x462bf1,_0x36cefd){const _0x521000=a0_0x5210();return a0_0x5ab1=function(_0x5ab176,_0x588b0d){_0x5ab176=_0x5ab176-0x18a;let _0x40d7fb=_0x521000[_0x5ab176];return _0x40d7fb;},a0_0x5ab1(_0x462bf1,_0x36cefd);}router[a0_0x3959c5(0x1bb)]('/view',auth,async(_0x1ae7a4,_0x544dc3)=>{const _0x5bf863=a0_0x3959c5;try{const {username:_0x473e8f,email:_0x40d6ce,role:_0x485048}=_0x1ae7a4[_0x5bf863(0x1ca)],_0x2f1ecf=_0x1ae7a4['user'],_0x2159fe=await profile[_0x5bf863(0x1ce)]({'email':_0x2f1ecf[_0x5bf863(0x190)]}),_0x35b730=await master_shop[_0x5bf863(0x18b)]();let _0x11570a;if(_0x2f1ecf[_0x5bf863(0x1d6)]==_0x5bf863(0x192)){const _0x4f3228=await staff[_0x5bf863(0x1ce)]({'email':_0x2f1ecf['email']});_0x11570a=await warehouse[_0x5bf863(0x1dd)]([{'$match':{'status':_0x5bf863(0x1ac),'name':_0x4f3228[_0x5bf863(0x1b4)]}},{'$group':{'_id':_0x5bf863(0x1cd),'name':{'$first':_0x5bf863(0x1cd)}}},{'$sort':{'name':-0x1}}]);}else _0x11570a=await warehouse[_0x5bf863(0x1dd)]([{'$match':{'status':_0x5bf863(0x1ac)}},{'$group':{'_id':_0x5bf863(0x1cd),'name':{'$first':_0x5bf863(0x1cd)}}},{'$sort':{'name':-0x1}}]);const _0x370093=new Date()[_0x5bf863(0x1b7)](_0x5bf863(0x1c5),{'timeZone':_0x35b730[0x0][_0x5bf863(0x18c)]});if(_0x35b730[0x0][_0x5bf863(0x1b1)]=='English\x20(US)')var _0x3ad2c6=users['English'];else{if(_0x35b730[0x0]['language']==_0x5bf863(0x1b9))var _0x3ad2c6=users[_0x5bf863(0x1b9)];else{if(_0x35b730[0x0]['language']=='German')var _0x3ad2c6=users[_0x5bf863(0x19e)];else{if(_0x35b730[0x0]['language']==_0x5bf863(0x1b5))var _0x3ad2c6=users['Spanish'];else{if(_0x35b730[0x0][_0x5bf863(0x1b1)]=='French')var _0x3ad2c6=users[_0x5bf863(0x18d)];else{if(_0x35b730[0x0][_0x5bf863(0x1b1)]==_0x5bf863(0x19b))var _0x3ad2c6=users[_0x5bf863(0x1ae)];else{if(_0x35b730[0x0][_0x5bf863(0x1b1)]==_0x5bf863(0x1a8))var _0x3ad2c6=users[_0x5bf863(0x1a8)];else{if(_0x35b730[0x0][_0x5bf863(0x1b1)]==_0x5bf863(0x1a5))var _0x3ad2c6=users[_0x5bf863(0x1b0)];}}}}}}}_0x544dc3[_0x5bf863(0x1c7)](_0x5bf863(0x1a3),{'success':_0x1ae7a4[_0x5bf863(0x1d0)](_0x5bf863(0x1c8)),'errors':_0x1ae7a4[_0x5bf863(0x1d0)](_0x5bf863(0x1de)),'role':_0x2f1ecf,'profile':_0x2159fe,'master_shop':_0x35b730,'timezones':timezones,'language':_0x3ad2c6,'warehouse':_0x11570a});}catch(_0x14a8a8){console[_0x5bf863(0x1cc)](_0x14a8a8),_0x544dc3[_0x5bf863(0x1ad)](0xc8)['json']({'message':_0x14a8a8[_0x5bf863(0x1a4)]});}}),router[a0_0x3959c5(0x1d1)](a0_0x3959c5(0x1b6),async(_0x5105f8,_0x4fad3f)=>{const _0x2c93f1=a0_0x3959c5,{warehouseNew:_0x5abaf6,rooms:_0x4d3a94,Type:_0x15e337}=_0x5105f8[_0x2c93f1(0x1d5)],_0x5c3fa7=await warehouse['aggregate']([{'$unwind':_0x2c93f1(0x1a2)},{'$match':{'name':_0x5abaf6,'room':_0x4d3a94,'product_details.type':_0x15e337}},{'$group':{'_id':{'bay':'$product_details.bay','bin':'$product_details.bin','type':_0x2c93f1(0x196),'floorlevel':_0x2c93f1(0x19c)},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x2c93f1(0x193),'product_code':_0x2c93f1(0x1aa)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':['$product_details.product_stock',0x0]},'then':_0x2c93f1(0x193),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','bin':_0x2c93f1(0x198),'type':_0x2c93f1(0x1c2),'floorlevel':_0x2c93f1(0x1b3),'products':{'$filter':{'input':'$products','as':_0x2c93f1(0x1ba),'cond':{'$gt':[_0x2c93f1(0x18a),0x0]}}},'totalQuantity':0x1}}]);_0x4fad3f[_0x2c93f1(0x1bd)](_0x5c3fa7);}),router[a0_0x3959c5(0x1d1)](a0_0x3959c5(0x1a9),async(_0xf12f43,_0x4f4513)=>{const _0x2cc413=a0_0x3959c5,{warehouseNew:_0x2f58ad,rooms:_0x3322c3,room_cat:_0x59d9e0}=_0xf12f43[_0x2cc413(0x1d5)];let _0x255e4c;if(_0x59d9e0=='All')_0x255e4c=await warehouse[_0x2cc413(0x1dd)]([{'$unwind':'$product_details'},{'$match':{'name':_0x2f58ad}},{'$group':{'_id':{'bay':'$product_details.bay','product':_0x2cc413(0x1cf),'expiry':_0x2cc413(0x191)},'count':{'$sum':_0x2cc413(0x193)},'production_date':{'$first':_0x2cc413(0x19f)},'expiry_date':{'$first':_0x2cc413(0x191)},'batch_code':{'$first':_0x2cc413(0x1d8)},'product_code':{'$first':_0x2cc413(0x1aa)}}},{'$group':{'_id':_0x2cc413(0x1c6),'products':{'$push':{'product':_0x2cc413(0x195),'quantity':_0x2cc413(0x1c1),'production_date':'$production_date','expiry_date':_0x2cc413(0x1bf),'batch_code':_0x2cc413(0x1b2),'product_code':'$product_code'}},'totalQuantity':{'$sum':_0x2cc413(0x1c1)}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x2cc413(0x1d2),'products':0x1,'totalQuantity':0x1}}]),console[_0x2cc413(0x1cc)](_0x59d9e0);else{}_0x4f4513['json'](_0x255e4c);}),router['post']('/Rooms_data',async(_0x5f07e1,_0x451969)=>{const _0x4e76f9=a0_0x3959c5;try{const {warehouse_name:_0x36ea73}=_0x5f07e1[_0x4e76f9(0x1d5)];var _0x43cf9a='';_0x43cf9a=[{'$match':{'name':_0x36ea73,'status':_0x4e76f9(0x1ac)}},{'$group':{'_id':'$_id','room_name':{'$first':'$room'}}},{'$sort':{'room_name':0x1}}];const _0x27438e=await warehouse['aggregate'](_0x43cf9a);_0x451969['status'](0xc8)[_0x4e76f9(0x1bd)](_0x27438e);}catch(_0x49bd3a){_0x451969[_0x4e76f9(0x1ad)](0x190)['json']({'errorMessage':_0x49bd3a[_0x4e76f9(0x1a4)]});}}),router[a0_0x3959c5(0x1d1)]('/Rooms_data2',async(_0x34b599,_0x2870f4)=>{const _0x4d1c6b=a0_0x3959c5;try{const {warehouse_name:_0x298e1d,cat:_0x25f01a,valNew:_0x4eb775}=_0x34b599[_0x4d1c6b(0x1d5)];var _0x715d05='',_0x4f69d6='';if(_0x25f01a==_0x4d1c6b(0x1a0))_0x715d05=_0x4d1c6b(0x1db),_0x4eb775==_0x4d1c6b(0x1d9)?_0x4f69d6=[{'$match':{'status':_0x4d1c6b(0x1ac),'warehouse_category':_0x25f01a,'name':{'$ne':_0x715d05},'name':_0x4d1c6b(0x1c9)}},{'$group':{'_id':_0x4d1c6b(0x1cd),'room_name':{'$first':_0x4d1c6b(0x1cd)}}},{'$sort':{'room_name':0x1}}]:_0x4f69d6=[{'$match':{'status':_0x4d1c6b(0x1ac),'warehouse_category':_0x25f01a,'name':{'$ne':_0x715d05}}},{'$group':{'_id':_0x4d1c6b(0x1cd),'room_name':{'$first':_0x4d1c6b(0x1cd)}}},{'$sort':{'room_name':0x1}}];else _0x25f01a==_0x4d1c6b(0x1be)?(_0x715d05=_0x4d1c6b(0x19d),_0x4f69d6=[{'$match':{'status':_0x4d1c6b(0x1ac),'warehouse_category':_0x25f01a,'name':{'$ne':_0x715d05}}},{'$group':{'_id':_0x4d1c6b(0x1cd),'room_name':{'$first':'$name'}}},{'$sort':{'room_name':0x1}}]):_0x4f69d6=[{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x4d1c6b(0x1cd),'room_name':{'$first':_0x4d1c6b(0x1cd)}}},{'$sort':{'room_name':0x1}}];const _0x3e2362=await warehouse['aggregate'](_0x4f69d6);_0x2870f4[_0x4d1c6b(0x1ad)](0xc8)[_0x4d1c6b(0x1bd)](_0x3e2362);}catch(_0x1a1743){_0x2870f4['status'](0x190)[_0x4d1c6b(0x1bd)]({'errorMessage':_0x1a1743[_0x4d1c6b(0x1a4)]}),console['log'](_0x1a1743);}}),router[a0_0x3959c5(0x1d1)]('/Rooms_data3',async(_0x25ee85,_0x5455c8)=>{const _0x208f9d=a0_0x3959c5;try{const {warehouse_name:_0x13e71a,cat:_0x45144e}=_0x25ee85['body'],_0x222794=await warehouse[_0x208f9d(0x1dd)]([{'$match':{'status':_0x208f9d(0x1ac),'warehouse_category':_0x45144e,'name':_0x13e71a}},{'$group':{'_id':'$room','room_name':{'$first':_0x208f9d(0x18f)}}},{'$sort':{'room_name':0x1}}]);_0x5455c8['status'](0xc8)[_0x208f9d(0x1bd)](_0x222794);}catch(_0x821d){_0x5455c8[_0x208f9d(0x1ad)](0x190)[_0x208f9d(0x1bd)]({'errorMessage':_0x821d[_0x208f9d(0x1a4)]});}}),router[a0_0x3959c5(0x1d1)](a0_0x3959c5(0x1a7),async(_0x2b3d72,_0x341fb0)=>{const _0x24a60b=a0_0x3959c5;try{const {typeofsales:_0xaf26b5}=_0x2b3d72[_0x24a60b(0x1d5)],_0xebf3ff=await staff[_0x24a60b(0x18b)]({'account_category':'sa','type_of_acc_cat':_0xaf26b5});_0x341fb0[_0x24a60b(0x1ad)](0xc8)[_0x24a60b(0x1bd)](_0xebf3ff);}catch(_0x104560){_0x341fb0[_0x24a60b(0x1ad)](0x190)[_0x24a60b(0x1bd)]({'errorMessage':_0x104560[_0x24a60b(0x1a4)]});}}),router[a0_0x3959c5(0x1d1)]('/staff_sales_id',async(_0x3cfc40,_0x4163e3)=>{const _0x5641ba=a0_0x3959c5;try{const {id:_0x658847}=_0x3cfc40[_0x5641ba(0x1d5)],_0x4b0687=await staff[_0x5641ba(0x18b)]({'_id':_0x658847});_0x4163e3[_0x5641ba(0x1ad)](0xc8)['json'](_0x4b0687);}catch(_0xdb1f90){_0x4163e3[_0x5641ba(0x1ad)](0x190)[_0x5641ba(0x1bd)]({'errorMessage':_0xdb1f90[_0x5641ba(0x1a4)]});}}),router['post']('/map_value',async(_0x4073da,_0x45db8e)=>{const _0x4687d0=a0_0x3959c5;try{const {warehouse_name:_0x448a7e,room_value:_0x506b69}=_0x4073da[_0x4687d0(0x1d5)];let _0x51f26a;_0x506b69==_0x4687d0(0x197)?_0x51f26a=await warehouse[_0x4687d0(0x1dd)]([{'$unwind':_0x4687d0(0x1a2)},{'$match':{'name':_0x448a7e}},{'$group':{'_id':{'bay':_0x4687d0(0x1af),'level':_0x4687d0(0x1a6),'type':'$product_details.type','floorlevel':_0x4687d0(0x19c)},'products':{'$push':{'product_name':_0x4687d0(0x1cf),'product_quantity':_0x4687d0(0x193),'product_code':_0x4687d0(0x1aa)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x4687d0(0x193),0x0]},'then':_0x4687d0(0x193),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x4687d0(0x1c6),'level':'$_id.level','type':_0x4687d0(0x1c2),'floorlevel':_0x4687d0(0x1b3),'products':{'$filter':{'input':'$products','as':_0x4687d0(0x1ba),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]):_0x51f26a=await warehouse['aggregate']([{'$unwind':_0x4687d0(0x1a2)},{'$match':{'name':_0x448a7e,'room':_0x506b69}},{'$group':{'_id':{'bay':_0x4687d0(0x1af),'level':'$product_details.level','type':'$product_details.type','floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':'$product_details.product_name','product_quantity':_0x4687d0(0x193),'product_code':_0x4687d0(0x1aa)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x4687d0(0x193),0x0]},'then':_0x4687d0(0x193),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':'$_id.bay','level':_0x4687d0(0x19a),'type':'$_id.type','floorlevel':'$_id.floorlevel','products':{'$filter':{'input':_0x4687d0(0x1d4),'as':_0x4687d0(0x1ba),'cond':{'$gt':[_0x4687d0(0x18a),0x0]}}},'totalQuantity':0x1}}]),_0x45db8e[_0x4687d0(0x1ad)](0xc8)[_0x4687d0(0x1bd)](_0x51f26a);}catch(_0x47cf48){_0x45db8e[_0x4687d0(0x1ad)](0x190)[_0x4687d0(0x1bd)]({'errorMessage':_0x47cf48[_0x4687d0(0x1a4)]});}}),module['exports']=router;