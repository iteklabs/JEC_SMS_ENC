const a0_0xf06413=a0_0x19f4;(function(_0x132e6d,_0xb223fa){const _0xdde1ec=a0_0x19f4,_0x41fbbb=_0x132e6d();while(!![]){try{const _0x5bf952=parseInt(_0xdde1ec(0x1bc))/0x1+parseInt(_0xdde1ec(0x1a7))/0x2+-parseInt(_0xdde1ec(0x1d7))/0x3*(-parseInt(_0xdde1ec(0x1e5))/0x4)+parseInt(_0xdde1ec(0x1c4))/0x5+parseInt(_0xdde1ec(0x1d8))/0x6+-parseInt(_0xdde1ec(0x1b3))/0x7+-parseInt(_0xdde1ec(0x1b5))/0x8;if(_0x5bf952===_0xb223fa)break;else _0x41fbbb['push'](_0x41fbbb['shift']());}catch(_0x1aa3e7){_0x41fbbb['push'](_0x41fbbb['shift']());}}}(a0_0x5051,0x1cf81));const express=require(a0_0xf06413(0x1c3)),app=express(),router=express[a0_0xf06413(0x1c5)](),multer=require(a0_0xf06413(0x1e0)),{profile,master_shop,email_settings,warehouse,purchases,staff}=require(a0_0xf06413(0x1af)),auth=require(a0_0xf06413(0x1c2));var timezones=require(a0_0xf06413(0x1c8));const users=require(a0_0xf06413(0x1d0));function a0_0x5051(){const _0x4a00e5=['find','/map_value','Portuguese\x20(BR)','../middleware/auth','express','706500bCdBBI','Router','$_id.level','get','timezones-list','$products','$_id.product','$count','$product_details.bay','$room','/staff_sales_id','QA\x20Warehouse','../public/language/languages.json','findOne','json','Spanish','timezone','language','$batch_code','3myoehw','748614DYTlkC','status','$product_details.product_name','Hindi','$_id','staff','flash','$product_code','multer','Enabled','$product_details.type','message','$name','383092BkXlxN','/Rooms_data3','/MapData','toLocaleString','/Rooms_data','warehouse','Return\x20Goods','$product_details','Arabic\x20(ae)','warehousemap_incoming','/MapData2','German','log','success','$_id.type','English\x20(US)','user','en-US','DRY\x20STORAGE','pack','French','body','$product_details.expiry_date','All','460304JYKHMp','$expiry_date','English','$product_details.product_code','email','$product_details.product_stock','$product_details.batch_code','aggregate','../models/all_models','$_id.floorlevel','$$product.product_quantity','render','1342929MXADgD','Finished\x20Goods','2919088akcSoN','post','errors','/view','product','Arabic','/Rooms_data2','83396HFkrUj','$_id.bay','$product_details.bin'];a0_0x5051=function(){return _0x4a00e5;};return a0_0x5051();}function a0_0x19f4(_0x104726,_0xd041b2){const _0x505131=a0_0x5051();return a0_0x19f4=function(_0x19f4a6,_0x3fafdb){_0x19f4a6=_0x19f4a6-0x19a;let _0x4021da=_0x505131[_0x19f4a6];return _0x4021da;},a0_0x19f4(_0x104726,_0xd041b2);}router[a0_0xf06413(0x1c7)](a0_0xf06413(0x1b8),auth,async(_0x2ec56f,_0x3f32d3)=>{const _0x1b06a9=a0_0xf06413;try{const {username:_0x8a61f,email:_0x5cdb43,role:_0x3b3fd1}=_0x2ec56f['user'],_0x484222=_0x2ec56f[_0x1b06a9(0x19f)],_0x655394=await profile[_0x1b06a9(0x1d1)]({'email':_0x484222[_0x1b06a9(0x1ab)]}),_0x10bed1=await master_shop[_0x1b06a9(0x1bf)]();let _0x438677;if(_0x484222['role']==_0x1b06a9(0x1dd)){const _0x590a8d=await staff[_0x1b06a9(0x1d1)]({'email':_0x484222[_0x1b06a9(0x1ab)]});_0x438677=await warehouse[_0x1b06a9(0x1ae)]([{'$match':{'status':_0x1b06a9(0x1e1),'name':_0x590a8d[_0x1b06a9(0x1ea)]}},{'$group':{'_id':_0x1b06a9(0x1e4),'name':{'$first':_0x1b06a9(0x1e4)}}},{'$sort':{'name':-0x1}}]);}else _0x438677=await warehouse['aggregate']([{'$match':{'status':_0x1b06a9(0x1e1)}},{'$group':{'_id':_0x1b06a9(0x1e4),'name':{'$first':_0x1b06a9(0x1e4)}}},{'$sort':{'name':-0x1}}]);const _0x3d81f7=new Date()[_0x1b06a9(0x1e8)](_0x1b06a9(0x1a0),{'timeZone':_0x10bed1[0x0][_0x1b06a9(0x1d4)]});if(_0x10bed1[0x0][_0x1b06a9(0x1d5)]==_0x1b06a9(0x19e))var _0x50e3f1=users[_0x1b06a9(0x1a9)];else{if(_0x10bed1[0x0]['language']==_0x1b06a9(0x1db))var _0x50e3f1=users['Hindi'];else{if(_0x10bed1[0x0][_0x1b06a9(0x1d5)]==_0x1b06a9(0x19a))var _0x50e3f1=users['German'];else{if(_0x10bed1[0x0][_0x1b06a9(0x1d5)]=='Spanish')var _0x50e3f1=users[_0x1b06a9(0x1d3)];else{if(_0x10bed1[0x0][_0x1b06a9(0x1d5)]==_0x1b06a9(0x1a3))var _0x50e3f1=users[_0x1b06a9(0x1a3)];else{if(_0x10bed1[0x0][_0x1b06a9(0x1d5)]==_0x1b06a9(0x1c1))var _0x50e3f1=users['Portuguese'];else{if(_0x10bed1[0x0][_0x1b06a9(0x1d5)]=='Chinese')var _0x50e3f1=users['Chinese'];else{if(_0x10bed1[0x0][_0x1b06a9(0x1d5)]==_0x1b06a9(0x1ed))var _0x50e3f1=users[_0x1b06a9(0x1ba)];}}}}}}}_0x3f32d3[_0x1b06a9(0x1b2)](_0x1b06a9(0x1ee),{'success':_0x2ec56f[_0x1b06a9(0x1de)](_0x1b06a9(0x19c)),'errors':_0x2ec56f[_0x1b06a9(0x1de)](_0x1b06a9(0x1b7)),'role':_0x484222,'profile':_0x655394,'master_shop':_0x10bed1,'timezones':timezones,'language':_0x50e3f1,'warehouse':_0x438677});}catch(_0x1821a0){console[_0x1b06a9(0x19b)](_0x1821a0),_0x3f32d3[_0x1b06a9(0x1d9)](0xc8)[_0x1b06a9(0x1d2)]({'message':_0x1821a0[_0x1b06a9(0x1e3)]});}}),router[a0_0xf06413(0x1b6)](a0_0xf06413(0x1e7),async(_0x8e2ec4,_0xc3bb)=>{const _0x242bed=a0_0xf06413,{warehouseNew:_0x304bba,rooms:_0x5ea407,Type:_0x3cfaec}=_0x8e2ec4[_0x242bed(0x1a4)],_0x1e5930=await warehouse['aggregate']([{'$unwind':'$product_details'},{'$match':{'name':_0x304bba,'room':_0x5ea407,'product_details.type':_0x3cfaec}},{'$group':{'_id':{'bay':'$product_details.bay','bin':_0x242bed(0x1be),'type':'$product_details.type','floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':_0x242bed(0x1da),'product_quantity':_0x242bed(0x1ac),'product_code':_0x242bed(0x1aa)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x242bed(0x1ac),0x0]},'then':_0x242bed(0x1ac),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x242bed(0x1bd),'bin':'$_id.bin','type':_0x242bed(0x19d),'floorlevel':_0x242bed(0x1b0),'products':{'$filter':{'input':_0x242bed(0x1c9),'as':_0x242bed(0x1b9),'cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]);_0xc3bb[_0x242bed(0x1d2)](_0x1e5930);}),router['post'](a0_0xf06413(0x1ef),async(_0x31f7ea,_0x3161be)=>{const _0x36ce91=a0_0xf06413,{warehouseNew:_0x130019,rooms:_0x2ffbd0,room_cat:_0xbe9f48}=_0x31f7ea['body'];let _0x17fef0;if(_0xbe9f48==_0x36ce91(0x1a6))_0x17fef0=await warehouse[_0x36ce91(0x1ae)]([{'$unwind':_0x36ce91(0x1ec)},{'$match':{'name':_0x130019}},{'$group':{'_id':{'bay':'$product_details.bay','product':'$product_details.product_name','expiry':'$product_details.expiry_date'},'count':{'$sum':_0x36ce91(0x1ac)},'production_date':{'$first':'$product_details.production_date'},'expiry_date':{'$first':_0x36ce91(0x1a5)},'batch_code':{'$first':_0x36ce91(0x1ad)},'product_code':{'$first':'$product_details.product_code'}}},{'$group':{'_id':'$_id.bay','products':{'$push':{'product':_0x36ce91(0x1ca),'quantity':_0x36ce91(0x1cb),'production_date':'$production_date','expiry_date':_0x36ce91(0x1a8),'batch_code':_0x36ce91(0x1d6),'product_code':_0x36ce91(0x1df)}},'totalQuantity':{'$sum':'$count'}}},{'$match':{'totalQuantity':{'$gt':0x0}}},{'$project':{'_id':0x0,'bay':_0x36ce91(0x1dc),'products':0x1,'totalQuantity':0x1}}]),console[_0x36ce91(0x19b)](_0xbe9f48);else{}_0x3161be['json'](_0x17fef0);}),router[a0_0xf06413(0x1b6)](a0_0xf06413(0x1e9),async(_0x55a040,_0xca9dc0)=>{const _0x4b3355=a0_0xf06413;try{const {warehouse_name:_0x4ec193}=_0x55a040['body'];var _0x14aa22='';_0x14aa22=[{'$match':{'name':_0x4ec193,'status':'Enabled'}},{'$group':{'_id':'$_id','room_name':{'$first':_0x4b3355(0x1cd)}}},{'$sort':{'room_name':0x1}}];const _0xa2df8d=await warehouse['aggregate'](_0x14aa22);_0xca9dc0[_0x4b3355(0x1d9)](0xc8)['json'](_0xa2df8d);}catch(_0x129fa5){_0xca9dc0[_0x4b3355(0x1d9)](0x190)['json']({'errorMessage':_0x129fa5['message']});}}),router[a0_0xf06413(0x1b6)](a0_0xf06413(0x1bb),async(_0x5f357b,_0x269e05)=>{const _0x2a2526=a0_0xf06413;try{const {warehouse_name:_0xe8e75a,cat:_0x152b74,valNew:_0x29882f}=_0x5f357b[_0x2a2526(0x1a4)];var _0x483cab='',_0x18fe57='';if(_0x152b74=='Raw\x20Materials')_0x483cab=_0x2a2526(0x1eb),_0x29882f==_0x2a2526(0x1a2)?_0x18fe57=[{'$match':{'status':_0x2a2526(0x1e1),'warehouse_category':_0x152b74,'name':{'$ne':_0x483cab},'name':_0x2a2526(0x1a1)}},{'$group':{'_id':_0x2a2526(0x1e4),'room_name':{'$first':_0x2a2526(0x1e4)}}},{'$sort':{'room_name':0x1}}]:_0x18fe57=[{'$match':{'status':'Enabled','warehouse_category':_0x152b74,'name':{'$ne':_0x483cab}}},{'$group':{'_id':_0x2a2526(0x1e4),'room_name':{'$first':_0x2a2526(0x1e4)}}},{'$sort':{'room_name':0x1}}];else _0x152b74==_0x2a2526(0x1b4)?(_0x483cab=_0x2a2526(0x1cf),_0x18fe57=[{'$match':{'status':_0x2a2526(0x1e1),'warehouse_category':_0x152b74,'name':{'$ne':_0x483cab}}},{'$group':{'_id':_0x2a2526(0x1e4),'room_name':{'$first':_0x2a2526(0x1e4)}}},{'$sort':{'room_name':0x1}}]):_0x18fe57=[{'$match':{'status':'Enabled'}},{'$group':{'_id':_0x2a2526(0x1e4),'room_name':{'$first':_0x2a2526(0x1e4)}}},{'$sort':{'room_name':0x1}}];const _0x3605fd=await warehouse[_0x2a2526(0x1ae)](_0x18fe57);_0x269e05[_0x2a2526(0x1d9)](0xc8)[_0x2a2526(0x1d2)](_0x3605fd);}catch(_0x117bb1){_0x269e05['status'](0x190)[_0x2a2526(0x1d2)]({'errorMessage':_0x117bb1[_0x2a2526(0x1e3)]}),console[_0x2a2526(0x19b)](_0x117bb1);}}),router[a0_0xf06413(0x1b6)](a0_0xf06413(0x1e6),async(_0x4101db,_0x416400)=>{const _0x34a2a2=a0_0xf06413;try{const {warehouse_name:_0x5b35ed,cat:_0x2f2b7e}=_0x4101db[_0x34a2a2(0x1a4)],_0x5868f3=await warehouse[_0x34a2a2(0x1ae)]([{'$match':{'status':_0x34a2a2(0x1e1),'warehouse_category':_0x2f2b7e,'name':_0x5b35ed}},{'$group':{'_id':_0x34a2a2(0x1cd),'room_name':{'$first':_0x34a2a2(0x1cd)}}},{'$sort':{'room_name':0x1}}]);_0x416400[_0x34a2a2(0x1d9)](0xc8)[_0x34a2a2(0x1d2)](_0x5868f3);}catch(_0x4aa87e){_0x416400[_0x34a2a2(0x1d9)](0x190)[_0x34a2a2(0x1d2)]({'errorMessage':_0x4aa87e[_0x34a2a2(0x1e3)]});}}),router[a0_0xf06413(0x1b6)]('/staff_sales',async(_0x5e4b58,_0x44cd9e)=>{const _0x1a5ff7=a0_0xf06413;try{const {typeofsales:_0xdd6732}=_0x5e4b58['body'];var _0x4f5cd2;_0xdd6732=='1'&&(_0x4f5cd2=await staff['find']({'account_category':'sa','type_of_acc_cat':_0xdd6732})),_0x44cd9e['status'](0xc8)['json'](_0x4f5cd2);}catch(_0x56ca6f){_0x44cd9e[_0x1a5ff7(0x1d9)](0x190)['json']({'errorMessage':_0x56ca6f['message']});}}),router[a0_0xf06413(0x1b6)](a0_0xf06413(0x1ce),async(_0x5e7d4e,_0x7e0f4a)=>{const _0xd75bbe=a0_0xf06413;try{const {id:_0x30de78}=_0x5e7d4e[_0xd75bbe(0x1a4)],_0x2055cf=await staff[_0xd75bbe(0x1bf)]({'_id':_0x30de78});_0x7e0f4a[_0xd75bbe(0x1d9)](0xc8)[_0xd75bbe(0x1d2)](_0x2055cf);}catch(_0x41a195){_0x7e0f4a['status'](0x190)['json']({'errorMessage':_0x41a195[_0xd75bbe(0x1e3)]});}}),router[a0_0xf06413(0x1b6)](a0_0xf06413(0x1c0),async(_0x29298f,_0xf70c67)=>{const _0x4b787a=a0_0xf06413;try{const {warehouse_name:_0x10586e,room_value:_0x39af6f}=_0x29298f['body'];let _0x1df8a2;_0x39af6f=='all'?_0x1df8a2=await warehouse[_0x4b787a(0x1ae)]([{'$unwind':_0x4b787a(0x1ec)},{'$match':{'name':_0x10586e}},{'$group':{'_id':{'bay':_0x4b787a(0x1cc),'level':'$product_details.level','type':'$product_details.type','floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':_0x4b787a(0x1da),'product_quantity':_0x4b787a(0x1ac),'product_code':_0x4b787a(0x1aa)}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':[_0x4b787a(0x1ac),0x0]},'then':_0x4b787a(0x1ac),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x4b787a(0x1bd),'level':_0x4b787a(0x1c6),'type':_0x4b787a(0x19d),'floorlevel':_0x4b787a(0x1b0),'products':{'$filter':{'input':_0x4b787a(0x1c9),'as':'product','cond':{'$gt':['$$product.product_quantity',0x0]}}},'totalQuantity':0x1}}]):_0x1df8a2=await warehouse['aggregate']([{'$unwind':_0x4b787a(0x1ec)},{'$match':{'name':_0x10586e,'room':_0x39af6f}},{'$group':{'_id':{'bay':_0x4b787a(0x1cc),'level':'$product_details.level','type':_0x4b787a(0x1e2),'floorlevel':'$product_details.floorlevel'},'products':{'$push':{'product_name':_0x4b787a(0x1da),'product_quantity':_0x4b787a(0x1ac),'product_code':'$product_details.product_code'}},'totalQuantity':{'$sum':{'$cond':{'if':{'$gt':['$product_details.product_stock',0x0]},'then':_0x4b787a(0x1ac),'else':0x0}}}}},{'$project':{'_id':0x0,'bay':_0x4b787a(0x1bd),'level':_0x4b787a(0x1c6),'type':'$_id.type','floorlevel':'$_id.floorlevel','products':{'$filter':{'input':'$products','as':'product','cond':{'$gt':[_0x4b787a(0x1b1),0x0]}}},'totalQuantity':0x1}}]),_0xf70c67[_0x4b787a(0x1d9)](0xc8)[_0x4b787a(0x1d2)](_0x1df8a2);}catch(_0x3262a5){_0xf70c67[_0x4b787a(0x1d9)](0x190)[_0x4b787a(0x1d2)]({'errorMessage':_0x3262a5['message']});}}),module['exports']=router;