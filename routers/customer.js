function a0_0x118c(_0x2e1f24,_0x493e5e){const _0x5bc276=a0_0x5bc2();return a0_0x118c=function(_0x118c09,_0x5af0dc){_0x118c09=_0x118c09-0x192;let _0x4ec169=_0x5bc276[_0x118c09];return _0x4ec169;},a0_0x118c(_0x2e1f24,_0x493e5e);}const a0_0x271545=a0_0x118c;function a0_0x5bc2(){const _0x34b291=['findOne','express','$reason','SheetNames','/view/:id','receivable_sum','mobile','PName','redirect','1050054xHgfDj','user','email','public/Migration','4275175toooCu','German','forEach','customer\x20add\x20successfully','$amount','send','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Arabic','then','exports','multer','readFile','file','json','Portuguese\x20(BR)','aggregate','contactperson','flash','SalesmanName','Content-Disposition','log','English\x20(US)','/customer_import_migrate_file','reason','setHeader','7244100oOFrNM','../models/all_models','originalname','customer_docs','SalesmanCode','Workbook','exceljs','filename','get','Spanish','customer','/view','now','landline','findById','French','1252668lwtlFH','PUnits','Router','diskStorage','customer_payment','Hindi','params','render','/customer/view','sale','Name','map','payable','data','14367VSCMXb','129400ZbHiNj','English','receivable','errors','language','error','columns','success','Sale','name','customer_product_fule','post','xlsx','payable_sum','body','write','save','735ZygSSh','public/Migration/','1398956BNfERi','Chinese','\x20added\x20successfully','Arabic\x20(ae)','Portuguese','customer\x20update\x20successfully','status','sheet_to_json','../middleware/auth','/view/payment/:id','find','\x20Failed','address','message','628XNkcXq','sale_return','Customers','master'];a0_0x5bc2=function(){return _0x34b291;};return a0_0x5bc2();}(function(_0x3f181b,_0x4622bd){const _0x18e444=a0_0x118c,_0x2830aa=_0x3f181b();while(!![]){try{const _0x3dd0c9=parseInt(_0x18e444(0x1a9))/0x1+parseInt(_0x18e444(0x1f1))/0x2+-parseInt(_0x18e444(0x195))/0x3*(-parseInt(_0x18e444(0x1b7))/0x4)+-parseInt(_0x18e444(0x1c8))/0x5+-parseInt(_0x18e444(0x1c4))/0x6+parseInt(_0x18e444(0x1a7))/0x7*(-parseInt(_0x18e444(0x196))/0x8)+parseInt(_0x18e444(0x1e1))/0x9;if(_0x3dd0c9===_0x4622bd)break;else _0x2830aa['push'](_0x2830aa['shift']());}catch(_0x58611c){_0x2830aa['push'](_0x2830aa['shift']());}}}(a0_0x5bc2,0xd068c));const express=require(a0_0x271545(0x1bc)),app=express(),router=express[a0_0x271545(0x1f3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require(a0_0x271545(0x1e2)),auth=require(a0_0x271545(0x1b1)),users=require('../public/language/languages.json'),excelJS=require(a0_0x271545(0x1e7)),xlsx=require('xlsx'),multer=require(a0_0x271545(0x1d2));router[a0_0x271545(0x1e9)](a0_0x271545(0x1ec),auth,async(_0x1abcd5,_0x3b1de2)=>{const _0x42bc55=a0_0x271545;try{const {username:_0x5553ee,email:_0x33a07c,role:_0x52ea7a}=_0x1abcd5[_0x42bc55(0x1c5)],_0x54d9da=_0x1abcd5['user'],_0x1bd24d=await profile['findOne']({'email':_0x54d9da[_0x42bc55(0x1c6)]}),_0x5a370f=await master_shop[_0x42bc55(0x1b3)]();console['log']('master',_0x5a370f);const _0x535ae9=await customer[_0x42bc55(0x1b3)](),_0x38b956=await customer[_0x42bc55(0x1d7)]([{'$lookup':{'from':'c_payments','localField':_0x42bc55(0x19f),'foreignField':_0x42bc55(0x1eb),'as':_0x42bc55(0x1e4)}}]);console['log'](_0x38b956);const _0x53d216=_0x38b956[_0x42bc55(0x192)](_0x3c29b0=>{const _0x32fcef=_0x42bc55;console['log'](_0x32fcef(0x194),_0x3c29b0);var _0x4ffab7=0x0,_0x3dc628=0x0;return _0x3c29b0[_0x32fcef(0x1e4)][_0x32fcef(0x1ca)](_0x323144=>{const _0x272b8d=_0x32fcef;console[_0x272b8d(0x1dc)]('element',_0x323144),_0x323144[_0x272b8d(0x1df)]=='Sale'?_0x4ffab7+=_0x323144['amount']:_0x3dc628+=_0x323144['amount'];}),_0x3c29b0[_0x32fcef(0x1fa)]=parseFloat(_0x4ffab7)+0x0,_0x3c29b0[_0x32fcef(0x1b8)]=parseFloat(_0x3dc628)+0x0,_0x3c29b0;});console['log']('payment_data',_0x53d216);if(_0x5a370f[0x0][_0x42bc55(0x19a)]==_0x42bc55(0x1dd)){var _0x376064=users['English'];console['log'](_0x376064);}else{if(_0x5a370f[0x0][_0x42bc55(0x19a)]==_0x42bc55(0x1f6))var _0x376064=users[_0x42bc55(0x1f6)];else{if(_0x5a370f[0x0][_0x42bc55(0x19a)]==_0x42bc55(0x1c9))var _0x376064=users['German'];else{if(_0x5a370f[0x0][_0x42bc55(0x19a)]=='Spanish')var _0x376064=users[_0x42bc55(0x1ea)];else{if(_0x5a370f[0x0][_0x42bc55(0x19a)]=='French')var _0x376064=users[_0x42bc55(0x1f0)];else{if(_0x5a370f[0x0][_0x42bc55(0x19a)]==_0x42bc55(0x1d6))var _0x376064=users[_0x42bc55(0x1ad)];else{if(_0x5a370f[0x0][_0x42bc55(0x19a)]==_0x42bc55(0x1aa))var _0x376064=users[_0x42bc55(0x1aa)];else{if(_0x5a370f[0x0][_0x42bc55(0x19a)]==_0x42bc55(0x1ac))var _0x376064=users[_0x42bc55(0x1cf)];}}}}}}}_0x3b1de2[_0x42bc55(0x1f8)](_0x42bc55(0x1eb),{'success':_0x1abcd5[_0x42bc55(0x1d9)]('success'),'errors':_0x1abcd5['flash'](_0x42bc55(0x199)),'user':_0x535ae9,'role':_0x54d9da,'profile':_0x1bd24d,'payment':_0x53d216,'master_shop':_0x5a370f,'language':_0x376064});}catch(_0x374f9a){console[_0x42bc55(0x1dc)](_0x374f9a);}}),router[a0_0x271545(0x1a1)](a0_0x271545(0x1ec),auth,async(_0xd8a15,_0x389df9)=>{const _0x1f2ed9=a0_0x271545;try{const {name:_0x2a4bea,address:_0x1686d7,mobile:_0x579fe1,email:_0xabf213,receivable:_0x21295c,payable:_0x1e56cb,contactperson:_0x833c4c,landline:_0x5c4ee1}=_0xd8a15[_0x1f2ed9(0x1a4)],_0x1a8031=new customer({'name':_0x2a4bea,'address':_0x1686d7,'mobile':_0x579fe1,'email':_0xabf213,'receivable':_0x21295c,'payable':_0x1e56cb,'contactperson':_0x833c4c,'landline':_0x5c4ee1}),_0x55653b=await _0x1a8031[_0x1f2ed9(0x1a6)]();_0xd8a15[_0x1f2ed9(0x1d9)](_0x1f2ed9(0x19d),_0x1f2ed9(0x1cb)),_0x389df9[_0x1f2ed9(0x1c3)](_0x1f2ed9(0x1f9));}catch(_0x2a83f6){console[_0x1f2ed9(0x1dc)](_0x2a83f6);}}),router[a0_0x271545(0x1e9)](a0_0x271545(0x1bf),auth,async(_0x595d83,_0x4fee46)=>{const _0x409dc1=a0_0x271545;try{const {username:_0x480b68,email:_0x58e77a,role:_0x809e19}=_0x595d83['user'],_0x37be41=_0x595d83['user'],_0x1b06af=await profile[_0x409dc1(0x1bb)]({'email':_0x37be41[_0x409dc1(0x1c6)]}),_0x48ec31=await master_shop[_0x409dc1(0x1b3)]();console['log']('master',_0x48ec31);const _0x32021e=_0x595d83[_0x409dc1(0x1f7)]['id'],_0xdabffd=await customer[_0x409dc1(0x1ef)](_0x32021e);if(_0x48ec31[0x0][_0x409dc1(0x19a)]==_0x409dc1(0x1dd)){var _0x1530d6=users['English'];console[_0x409dc1(0x1dc)](_0x1530d6);}else{if(_0x48ec31[0x0][_0x409dc1(0x19a)]=='Hindi')var _0x1530d6=users['Hindi'];else{if(_0x48ec31[0x0]['language']==_0x409dc1(0x1c9))var _0x1530d6=users[_0x409dc1(0x1c9)];else{if(_0x48ec31[0x0][_0x409dc1(0x19a)]==_0x409dc1(0x1ea))var _0x1530d6=users[_0x409dc1(0x1ea)];else{if(_0x48ec31[0x0][_0x409dc1(0x19a)]==_0x409dc1(0x1f0))var _0x1530d6=users['French'];else{if(_0x48ec31[0x0][_0x409dc1(0x19a)]==_0x409dc1(0x1d6))var _0x1530d6=users[_0x409dc1(0x1ad)];else{if(_0x48ec31[0x0]['language']==_0x409dc1(0x1aa))var _0x1530d6=users[_0x409dc1(0x1aa)];else{if(_0x48ec31[0x0][_0x409dc1(0x19a)]=='Arabic\x20(ae)')var _0x1530d6=users[_0x409dc1(0x1cf)];}}}}}}}_0x4fee46[_0x409dc1(0x1f8)]('customer',{'success':_0x595d83[_0x409dc1(0x1d9)](_0x409dc1(0x19d)),'errors':_0x595d83[_0x409dc1(0x1d9)](_0x409dc1(0x199)),'role':_0x37be41,'profile':_0x1b06af,'user':_0xdabffd,'master_shop':_0x48ec31,'language':_0x1530d6});}catch(_0xb1ff5){console[_0x409dc1(0x1dc)](_0xb1ff5);}}),router[a0_0x271545(0x1a1)](a0_0x271545(0x1bf),auth,async(_0x332ead,_0x1e0eb6)=>{const _0x593cac=a0_0x271545;try{const _0xd6cee0=_0x332ead[_0x593cac(0x1f7)]['id'],_0x494ad2=await customer['findById'](_0xd6cee0),{name:_0x371849,address:_0x514322,mobile:_0x1a1283,email:_0x1f5882,receivable:_0x5168b3,payable:_0x5fb5e0,contactperson:_0x55b9f9,landline:_0x3dcee0}=_0x332ead[_0x593cac(0x1a4)];_0x494ad2[_0x593cac(0x19f)]=_0x371849,_0x494ad2[_0x593cac(0x1b5)]=_0x514322,_0x494ad2['mobile']=_0x1a1283,_0x494ad2[_0x593cac(0x1c6)]=_0x1f5882,_0x494ad2[_0x593cac(0x198)]=_0x5168b3,_0x494ad2[_0x593cac(0x193)]=_0x5fb5e0,_0x494ad2[_0x593cac(0x1d8)]=_0x55b9f9,_0x494ad2[_0x593cac(0x1ee)]=_0x3dcee0;const _0x3b6f96=await _0x494ad2[_0x593cac(0x1a6)]();_0x332ead[_0x593cac(0x1d9)](_0x593cac(0x19d),_0x593cac(0x1ae)),_0x1e0eb6[_0x593cac(0x1c3)]('/customer/view');}catch(_0x1880ba){console[_0x593cac(0x1dc)](_0x1880ba);}}),router[a0_0x271545(0x1e9)](a0_0x271545(0x1b2),auth,async(_0xc314d0,_0x13e51b)=>{const _0x38557b=a0_0x271545;try{const {username:_0x3033bb,email:_0x506716,role:_0x318aac}=_0xc314d0[_0x38557b(0x1c5)],_0x466a66=_0xc314d0[_0x38557b(0x1c5)],_0x280598=await profile[_0x38557b(0x1bb)]({'email':_0x466a66['email']}),_0x450bbb=await master_shop['find']();console[_0x38557b(0x1dc)](_0x38557b(0x1ba),_0x450bbb),console[_0x38557b(0x1dc)](_0xc314d0[_0x38557b(0x1f7)]['id']);const _0x4a31a6=await customer[_0x38557b(0x1bb)]({'_id':_0xc314d0[_0x38557b(0x1f7)]['id']});console[_0x38557b(0x1dc)]('customer_data',_0x4a31a6);const _0x2529f3=await c_payment_data[_0x38557b(0x1b3)]({'customer':_0x4a31a6['name']});console[_0x38557b(0x1dc)](_0x2529f3);const _0x2833d1=await c_payment_data[_0x38557b(0x1d7)]([{'$match':{'customer':_0x4a31a6['name']}},{'$match':{'reason':_0x38557b(0x19e)}},{'$group':{'_id':_0x38557b(0x1bd),'sum':{'$sum':_0x38557b(0x1cc)}}}]);console['log'](_0x38557b(0x1a3),_0x2833d1);const _0x36346c=await c_payment_data[_0x38557b(0x1d7)]([{'$match':{'customer':_0x4a31a6[_0x38557b(0x19f)]}},{'$match':{'reason':'Sale\x20Return'}},{'$group':{'_id':'$reason','sum':{'$sum':_0x38557b(0x1cc)}}}]);console[_0x38557b(0x1dc)](_0x38557b(0x1c0),_0x36346c);if(_0x450bbb[0x0][_0x38557b(0x19a)]=='English\x20(US)'){var _0x4b0c5c=users[_0x38557b(0x197)];console[_0x38557b(0x1dc)](_0x4b0c5c);}else{if(_0x450bbb[0x0]['language']==_0x38557b(0x1f6))var _0x4b0c5c=users[_0x38557b(0x1f6)];else{if(_0x450bbb[0x0][_0x38557b(0x19a)]==_0x38557b(0x1c9))var _0x4b0c5c=users[_0x38557b(0x1c9)];else{if(_0x450bbb[0x0][_0x38557b(0x19a)]==_0x38557b(0x1ea))var _0x4b0c5c=users['Spanish'];else{if(_0x450bbb[0x0]['language']==_0x38557b(0x1f0))var _0x4b0c5c=users[_0x38557b(0x1f0)];else{if(_0x450bbb[0x0][_0x38557b(0x19a)]==_0x38557b(0x1d6))var _0x4b0c5c=users[_0x38557b(0x1ad)];else{if(_0x450bbb[0x0]['language']=='Chinese')var _0x4b0c5c=users[_0x38557b(0x1aa)];else{if(_0x450bbb[0x0][_0x38557b(0x19a)]=='Arabic\x20(ae)')var _0x4b0c5c=users[_0x38557b(0x1cf)];}}}}}}}_0x13e51b['render'](_0x38557b(0x1f5),{'success':_0xc314d0[_0x38557b(0x1d9)](_0x38557b(0x19d)),'errors':_0xc314d0[_0x38557b(0x1d9)](_0x38557b(0x199)),'role':_0x466a66,'profile':_0x280598,'payment':_0x2529f3,'payable':_0x2833d1,'receivable':_0x36346c,'master_shop':_0x450bbb,'language':_0x4b0c5c});}catch(_0x4dc3ef){console[_0x38557b(0x1dc)](_0x4dc3ef);}}),router[a0_0x271545(0x1e9)]('/products_export_migrate_file',auth,async(_0xe037ba,_0x575fc1)=>{const _0x21bd69=a0_0x271545;try{const _0x2a7ef6=new excelJS[(_0x21bd69(0x1e6))](),_0x32b305=_0x2a7ef6['addWorksheet'](_0x21bd69(0x1b9));return _0x32b305[_0x21bd69(0x19c)]=[{'header':'ID','key':_0x21bd69(0x1c2),'width':0xa},{'header':_0x21bd69(0x1fb),'key':'PBrands','width':0xa},{'header':'SalesmanCode','key':_0x21bd69(0x1f2),'width':0xa},{'header':'SalesmanName','key':_0x21bd69(0x1da),'width':0xa},{'header':_0x21bd69(0x1b5),'key':'address','width':0xa},{'header':_0x21bd69(0x1c1),'key':'mobile','width':0xa},{'header':_0x21bd69(0x1c6),'key':_0x21bd69(0x1c6),'width':0xa}],_0x575fc1[_0x21bd69(0x1e0)]('Content-Type',_0x21bd69(0x1ce)),_0x575fc1[_0x21bd69(0x1e0)](_0x21bd69(0x1db),'attachment;\x20filename=customer_Migration_File.xlsx'),_0x2a7ef6[_0x21bd69(0x1a2)][_0x21bd69(0x1a5)](_0x575fc1)[_0x21bd69(0x1d0)](()=>{_0x575fc1['status'](0xc8);});}catch(_0x5c4c86){_0x575fc1['status'](0x190)[_0x21bd69(0x1cd)]({'errors':_0x5c4c86[_0x21bd69(0x1b6)]});}});const storage1=multer[a0_0x271545(0x1f4)]({'destination':(_0x50aca6,_0xbac87f,_0x3d91d3)=>{const _0x3b99e1=a0_0x271545;_0x3d91d3(null,_0x3b99e1(0x1c7));},'filename':(_0x2c5125,_0x354b1b,_0xa4fcbe)=>{const _0x10bb9f=a0_0x271545;_0xa4fcbe(null,Date[_0x10bb9f(0x1ed)]()+_0x354b1b[_0x10bb9f(0x1e3)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x271545(0x1a1)](a0_0x271545(0x1de),auth,uploadMigrate['single'](a0_0x271545(0x1a0)),async(_0x2664e2,_0x1ba88e)=>{const _0x20b69b=a0_0x271545,_0x2e5722=_0x2664e2[_0x20b69b(0x1d4)][_0x20b69b(0x1e8)],_0xd97202=await xlsx[_0x20b69b(0x1d3)](_0x20b69b(0x1a8)+_0x2e5722);let _0xc91b7a=_0xd97202[_0x20b69b(0x1be)],_0x28e190=xlsx['utils'][_0x20b69b(0x1b0)](_0xd97202['Sheets'][_0xc91b7a[0x0]]);for(const _0x5524b3 of _0x28e190){const _0x4e7e18=_0x5524b3['ID'],_0x248047=_0x5524b3[_0x20b69b(0x1fb)],_0x2201e3=_0x5524b3[_0x20b69b(0x1e5)],_0x5b74a9=_0x5524b3['SalesmanName'],_0x5e6578=_0x5524b3[_0x20b69b(0x1b5)],_0x5a3716=_0x5524b3[_0x20b69b(0x1c1)],_0x117722=_0x5524b3[_0x20b69b(0x1c6)];try{let _0x1e5bbd=await customer[_0x20b69b(0x1bb)]({'name':_0x248047});if(!_0x1e5bbd){const _0x12281c=new customer({'name':_0x248047,'ID':_0x4e7e18,'SalesmanCode':_0x2201e3,'SalesmanName':_0x5b74a9,'address':_0x5e6578,'mobile':_0x5a3716,'email':_0x117722});_0x1e5bbd=await _0x12281c[_0x20b69b(0x1a6)](),_0x2664e2['flash']('success',_0x248047+_0x20b69b(0x1ab));}else _0x2664e2[_0x20b69b(0x1d9)](_0x20b69b(0x19b),_0x248047+_0x20b69b(0x1b4));}catch(_0x538c60){_0x1ba88e[_0x20b69b(0x1af)](0x1f4)[_0x20b69b(0x1d5)]({'proderror':_0x538c60[_0x20b69b(0x1b6)],'aproduct':ProductName});}}_0x1ba88e[_0x20b69b(0x1c3)](_0x20b69b(0x1f9));}),module[a0_0x271545(0x1d1)]=router;