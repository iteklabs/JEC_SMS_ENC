function a0_0x1747(){const _0x1404d1=['../public/language/languages.json','English\x20(US)','json','reason','$reason','Content-Type','payable_sum','PName','log','2609607YVNkxm','findOne','get','Arabic\x20(ae)','customer_docs','landline','mobile','../middleware/auth','language','Portuguese\x20(BR)','Sale','PUnits','amount','save','Arabic','name','map','436285hMJHeQ','address','message','find','master','194376fpMIll','\x20Failed','body','data','12124096xcwHcj','803OSONHV','French','payment_data','redirect','express','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','success','6NXMuRc','Sale\x20Return','filename','then','SalesmanCode','post','German','/view','$amount','now','columns','Router','6716575LdIteK','xlsx','error','user','c_payments','findById','13538140rYlvoY','4tcslFQ','../models/all_models','English','9hTfyIU','21mJzSto','customer\x20update\x20successfully','/view/payment/:id','public/Migration','customer\x20add\x20successfully','Workbook','receivable_sum','customer_payment','PBrands','write','sale','Portuguese','Spanish','sale_return','/customer/view','forEach','utils','915318CMcRIO','aggregate','email','setHeader','SalesmanName','Content-Disposition','Chinese','status','SheetNames','addWorksheet','/view/:id','customer','params','flash','multer','errors','Customers','render','sheet_to_json','Hindi'];a0_0x1747=function(){return _0x1404d1;};return a0_0x1747();}const a0_0x50ff80=a0_0x1336;(function(_0x5dbe23,_0x835b5e){const _0x3ef7a4=a0_0x1336,_0x3822f4=_0x5dbe23();while(!![]){try{const _0x2b30ee=parseInt(_0x3ef7a4(0x11e))/0x1*(parseInt(_0x3ef7a4(0x12f))/0x2)+-parseInt(_0x3ef7a4(0x174))/0x3+parseInt(_0x3ef7a4(0x142))/0x4*(-parseInt(_0x3ef7a4(0x13b))/0x5)+-parseInt(_0x3ef7a4(0x157))/0x6*(-parseInt(_0x3ef7a4(0x146))/0x7)+-parseInt(_0x3ef7a4(0x127))/0x8*(-parseInt(_0x3ef7a4(0x145))/0x9)+-parseInt(_0x3ef7a4(0x141))/0xa+-parseInt(_0x3ef7a4(0x128))/0xb*(-parseInt(_0x3ef7a4(0x123))/0xc);if(_0x2b30ee===_0x835b5e)break;else _0x3822f4['push'](_0x3822f4['shift']());}catch(_0x51136a){_0x3822f4['push'](_0x3822f4['shift']());}}}(a0_0x1747,0xdb1ca));function a0_0x1336(_0x1064c5,_0x4a1f92){const _0x174792=a0_0x1747();return a0_0x1336=function(_0x1336c7,_0x263d14){_0x1336c7=_0x1336c7-0x11a;let _0x3d152f=_0x174792[_0x1336c7];return _0x3d152f;},a0_0x1336(_0x1064c5,_0x4a1f92);}const express=require(a0_0x50ff80(0x12c)),app=express(),router=express[a0_0x50ff80(0x13a)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sing_up}=require(a0_0x50ff80(0x143)),auth=require(a0_0x50ff80(0x17b)),users=require(a0_0x50ff80(0x16b)),excelJS=require('exceljs'),xlsx=require('xlsx'),multer=require(a0_0x50ff80(0x165));router[a0_0x50ff80(0x176)](a0_0x50ff80(0x136),auth,async(_0x4bfed1,_0x424328)=>{const _0x52aa9b=a0_0x50ff80;try{const {username:_0xeb60c2,email:_0xba14f9,role:_0x1ed557}=_0x4bfed1['user'],_0x308cbc=_0x4bfed1['user'],_0x206ab3=await profile[_0x52aa9b(0x175)]({'email':_0x308cbc['email']}),_0x5ea3d6=await master_shop[_0x52aa9b(0x121)]();console[_0x52aa9b(0x173)](_0x52aa9b(0x122),_0x5ea3d6);const _0x1c7f81=await customer[_0x52aa9b(0x121)](),_0x2f3cb6=await customer[_0x52aa9b(0x158)]([{'$lookup':{'from':_0x52aa9b(0x13f),'localField':_0x52aa9b(0x11c),'foreignField':_0x52aa9b(0x162),'as':_0x52aa9b(0x178)}}]);console[_0x52aa9b(0x173)](_0x2f3cb6);const _0x4900fa=_0x2f3cb6[_0x52aa9b(0x11d)](_0x1ddb62=>{const _0x2792e3=_0x52aa9b;console[_0x2792e3(0x173)](_0x2792e3(0x126),_0x1ddb62);var _0x3b4ad9=0x0,_0x1f9096=0x0;return _0x1ddb62[_0x2792e3(0x178)][_0x2792e3(0x155)](_0x33ff15=>{const _0x46b0f9=_0x2792e3;console['log']('element',_0x33ff15),_0x33ff15[_0x46b0f9(0x16e)]==_0x46b0f9(0x17e)?_0x3b4ad9+=_0x33ff15[_0x46b0f9(0x180)]:_0x1f9096+=_0x33ff15[_0x46b0f9(0x180)];}),_0x1ddb62[_0x2792e3(0x150)]=parseFloat(_0x3b4ad9)+0x0,_0x1ddb62[_0x2792e3(0x153)]=parseFloat(_0x1f9096)+0x0,_0x1ddb62;});console['log'](_0x52aa9b(0x12a),_0x4900fa);if(_0x5ea3d6[0x0][_0x52aa9b(0x17c)]==_0x52aa9b(0x16c)){var _0x433ce4=users['English'];console[_0x52aa9b(0x173)](_0x433ce4);}else{if(_0x5ea3d6[0x0]['language']=='Hindi')var _0x433ce4=users['Hindi'];else{if(_0x5ea3d6[0x0][_0x52aa9b(0x17c)]==_0x52aa9b(0x135))var _0x433ce4=users[_0x52aa9b(0x135)];else{if(_0x5ea3d6[0x0]['language']==_0x52aa9b(0x152))var _0x433ce4=users[_0x52aa9b(0x152)];else{if(_0x5ea3d6[0x0][_0x52aa9b(0x17c)]=='French')var _0x433ce4=users['French'];else{if(_0x5ea3d6[0x0][_0x52aa9b(0x17c)]=='Portuguese\x20(BR)')var _0x433ce4=users[_0x52aa9b(0x151)];else{if(_0x5ea3d6[0x0][_0x52aa9b(0x17c)]=='Chinese')var _0x433ce4=users[_0x52aa9b(0x15d)];else{if(_0x5ea3d6[0x0][_0x52aa9b(0x17c)]==_0x52aa9b(0x177))var _0x433ce4=users[_0x52aa9b(0x11b)];}}}}}}}_0x424328[_0x52aa9b(0x168)](_0x52aa9b(0x162),{'success':_0x4bfed1[_0x52aa9b(0x164)](_0x52aa9b(0x12e)),'errors':_0x4bfed1[_0x52aa9b(0x164)]('errors'),'user':_0x1c7f81,'role':_0x308cbc,'profile':_0x206ab3,'payment':_0x4900fa,'master_shop':_0x5ea3d6,'language':_0x433ce4});}catch(_0x101c23){console['log'](_0x101c23);}}),router[a0_0x50ff80(0x134)]('/view',auth,async(_0x52dd3a,_0x16d672)=>{const _0x43011e=a0_0x50ff80;try{const {name:_0x9bf629,address:_0x943307,mobile:_0x24440a,email:_0x47a266,receivable:_0x49cb54,payable:_0x434d8d,contactperson:_0x596174,landline:_0x3f4aaa}=_0x52dd3a['body'],_0x1f2389=new customer({'name':_0x9bf629,'address':_0x943307,'mobile':_0x24440a,'email':_0x47a266,'receivable':_0x49cb54,'payable':_0x434d8d,'contactperson':_0x596174,'landline':_0x3f4aaa}),_0x4b152a=await _0x1f2389['save']();_0x52dd3a['flash'](_0x43011e(0x12e),_0x43011e(0x14a)),_0x16d672[_0x43011e(0x12b)](_0x43011e(0x154));}catch(_0x175b21){console['log'](_0x175b21);}}),router['get'](a0_0x50ff80(0x161),auth,async(_0x5e1bfd,_0x426eef)=>{const _0x53fc3a=a0_0x50ff80;try{const {username:_0x33cd7a,email:_0x7f84b0,role:_0x55e767}=_0x5e1bfd['user'],_0x6d9bf4=_0x5e1bfd['user'],_0x314d1b=await profile[_0x53fc3a(0x175)]({'email':_0x6d9bf4[_0x53fc3a(0x159)]}),_0x3ca53d=await master_shop['find']();console[_0x53fc3a(0x173)](_0x53fc3a(0x122),_0x3ca53d);const _0x2892aa=_0x5e1bfd[_0x53fc3a(0x163)]['id'],_0x4f286e=await customer[_0x53fc3a(0x140)](_0x2892aa);if(_0x3ca53d[0x0][_0x53fc3a(0x17c)]==_0x53fc3a(0x16c)){var _0x4fa02f=users[_0x53fc3a(0x144)];console[_0x53fc3a(0x173)](_0x4fa02f);}else{if(_0x3ca53d[0x0]['language']==_0x53fc3a(0x16a))var _0x4fa02f=users[_0x53fc3a(0x16a)];else{if(_0x3ca53d[0x0][_0x53fc3a(0x17c)]=='German')var _0x4fa02f=users[_0x53fc3a(0x135)];else{if(_0x3ca53d[0x0][_0x53fc3a(0x17c)]=='Spanish')var _0x4fa02f=users[_0x53fc3a(0x152)];else{if(_0x3ca53d[0x0]['language']=='French')var _0x4fa02f=users['French'];else{if(_0x3ca53d[0x0][_0x53fc3a(0x17c)]==_0x53fc3a(0x17d))var _0x4fa02f=users[_0x53fc3a(0x151)];else{if(_0x3ca53d[0x0]['language']==_0x53fc3a(0x15d))var _0x4fa02f=users[_0x53fc3a(0x15d)];else{if(_0x3ca53d[0x0][_0x53fc3a(0x17c)]==_0x53fc3a(0x177))var _0x4fa02f=users[_0x53fc3a(0x11b)];}}}}}}}_0x426eef[_0x53fc3a(0x168)](_0x53fc3a(0x162),{'success':_0x5e1bfd[_0x53fc3a(0x164)]('success'),'errors':_0x5e1bfd[_0x53fc3a(0x164)](_0x53fc3a(0x166)),'role':_0x6d9bf4,'profile':_0x314d1b,'user':_0x4f286e,'master_shop':_0x3ca53d,'language':_0x4fa02f});}catch(_0x42dee6){console['log'](_0x42dee6);}}),router[a0_0x50ff80(0x134)]('/view/:id',auth,async(_0x553324,_0x25459c)=>{const _0x406271=a0_0x50ff80;try{const _0x144337=_0x553324[_0x406271(0x163)]['id'],_0x293752=await customer[_0x406271(0x140)](_0x144337),{name:_0x259fce,address:_0xa5af65,mobile:_0x1bbadb,email:_0x147e2a,receivable:_0x55c858,payable:_0x50e3f0,contactperson:_0x526275,landline:_0xd0f997}=_0x553324[_0x406271(0x125)];_0x293752[_0x406271(0x11c)]=_0x259fce,_0x293752[_0x406271(0x11f)]=_0xa5af65,_0x293752[_0x406271(0x17a)]=_0x1bbadb,_0x293752[_0x406271(0x159)]=_0x147e2a,_0x293752['receivable']=_0x55c858,_0x293752['payable']=_0x50e3f0,_0x293752['contactperson']=_0x526275,_0x293752[_0x406271(0x179)]=_0xd0f997;const _0x46f28a=await _0x293752[_0x406271(0x11a)]();_0x553324['flash'](_0x406271(0x12e),_0x406271(0x147)),_0x25459c[_0x406271(0x12b)](_0x406271(0x154));}catch(_0x3fd2db){console[_0x406271(0x173)](_0x3fd2db);}}),router[a0_0x50ff80(0x176)](a0_0x50ff80(0x148),auth,async(_0x447531,_0x5bf11a)=>{const _0xec5d7d=a0_0x50ff80;try{const {username:_0x223b91,email:_0x4d421e,role:_0x47b231}=_0x447531[_0xec5d7d(0x13e)],_0x4db00d=_0x447531['user'],_0x1f06ea=await profile[_0xec5d7d(0x175)]({'email':_0x4db00d[_0xec5d7d(0x159)]}),_0x277eb0=await master_shop[_0xec5d7d(0x121)]();console[_0xec5d7d(0x173)]('master',_0x277eb0),console[_0xec5d7d(0x173)](_0x447531[_0xec5d7d(0x163)]['id']);const _0x1ac191=await customer[_0xec5d7d(0x175)]({'_id':_0x447531[_0xec5d7d(0x163)]['id']});console[_0xec5d7d(0x173)]('customer_data',_0x1ac191);const _0x1963cf=await c_payment_data[_0xec5d7d(0x121)]({'customer':_0x1ac191[_0xec5d7d(0x11c)]});console[_0xec5d7d(0x173)](_0x1963cf);const _0x3c1bb4=await c_payment_data[_0xec5d7d(0x158)]([{'$match':{'customer':_0x1ac191[_0xec5d7d(0x11c)]}},{'$match':{'reason':_0xec5d7d(0x17e)}},{'$group':{'_id':_0xec5d7d(0x16f),'sum':{'$sum':_0xec5d7d(0x137)}}}]);console[_0xec5d7d(0x173)](_0xec5d7d(0x171),_0x3c1bb4);const _0x5c8022=await c_payment_data[_0xec5d7d(0x158)]([{'$match':{'customer':_0x1ac191[_0xec5d7d(0x11c)]}},{'$match':{'reason':_0xec5d7d(0x130)}},{'$group':{'_id':'$reason','sum':{'$sum':_0xec5d7d(0x137)}}}]);console[_0xec5d7d(0x173)](_0xec5d7d(0x14c),_0x5c8022);if(_0x277eb0[0x0][_0xec5d7d(0x17c)]=='English\x20(US)'){var _0x94eb6d=users[_0xec5d7d(0x144)];console['log'](_0x94eb6d);}else{if(_0x277eb0[0x0][_0xec5d7d(0x17c)]=='Hindi')var _0x94eb6d=users[_0xec5d7d(0x16a)];else{if(_0x277eb0[0x0][_0xec5d7d(0x17c)]==_0xec5d7d(0x135))var _0x94eb6d=users[_0xec5d7d(0x135)];else{if(_0x277eb0[0x0][_0xec5d7d(0x17c)]==_0xec5d7d(0x152))var _0x94eb6d=users[_0xec5d7d(0x152)];else{if(_0x277eb0[0x0]['language']==_0xec5d7d(0x129))var _0x94eb6d=users['French'];else{if(_0x277eb0[0x0][_0xec5d7d(0x17c)]==_0xec5d7d(0x17d))var _0x94eb6d=users['Portuguese'];else{if(_0x277eb0[0x0]['language']==_0xec5d7d(0x15d))var _0x94eb6d=users[_0xec5d7d(0x15d)];else{if(_0x277eb0[0x0]['language']==_0xec5d7d(0x177))var _0x94eb6d=users[_0xec5d7d(0x11b)];}}}}}}}_0x5bf11a['render'](_0xec5d7d(0x14d),{'success':_0x447531[_0xec5d7d(0x164)]('success'),'errors':_0x447531[_0xec5d7d(0x164)](_0xec5d7d(0x166)),'role':_0x4db00d,'profile':_0x1f06ea,'payment':_0x1963cf,'payable':_0x3c1bb4,'receivable':_0x5c8022,'master_shop':_0x277eb0,'language':_0x94eb6d});}catch(_0x5232d8){console[_0xec5d7d(0x173)](_0x5232d8);}}),router[a0_0x50ff80(0x176)]('/products_export_migrate_file',auth,async(_0x3536ce,_0x4b39a7)=>{const _0x344b78=a0_0x50ff80;try{const _0x20e1c6=new excelJS[(_0x344b78(0x14b))](),_0x1aaba4=_0x20e1c6[_0x344b78(0x160)](_0x344b78(0x167));return _0x1aaba4[_0x344b78(0x139)]=[{'header':'ID','key':_0x344b78(0x172),'width':0xa},{'header':'Name','key':_0x344b78(0x14e),'width':0xa},{'header':'SalesmanCode','key':_0x344b78(0x17f),'width':0xa},{'header':_0x344b78(0x15b),'key':_0x344b78(0x15b),'width':0xa},{'header':_0x344b78(0x11f),'key':_0x344b78(0x11f),'width':0xa},{'header':_0x344b78(0x17a),'key':_0x344b78(0x17a),'width':0xa},{'header':'email','key':_0x344b78(0x159),'width':0xa}],_0x4b39a7[_0x344b78(0x15a)](_0x344b78(0x170),_0x344b78(0x12d)),_0x4b39a7[_0x344b78(0x15a)](_0x344b78(0x15c),'attachment;\x20filename=customer_Migration_File.xlsx'),_0x20e1c6[_0x344b78(0x13c)][_0x344b78(0x14f)](_0x4b39a7)[_0x344b78(0x132)](()=>{const _0x328bc6=_0x344b78;_0x4b39a7[_0x328bc6(0x15e)](0xc8);});}catch(_0x3e67c4){_0x4b39a7[_0x344b78(0x15e)](0x190)['send']({'errors':_0x3e67c4[_0x344b78(0x120)]});}});const storage1=multer['diskStorage']({'destination':(_0x4d92a4,_0x8b4c02,_0x3bb24e)=>{const _0xf3b3bb=a0_0x50ff80;_0x3bb24e(null,_0xf3b3bb(0x149));},'filename':(_0x2fa902,_0x2244b4,_0x1df4e3)=>{const _0x44f729=a0_0x50ff80;_0x1df4e3(null,Date[_0x44f729(0x138)]()+_0x2244b4['originalname']);}}),uploadMigrate=multer({'storage':storage1});router['post']('/customer_import_migrate_file',auth,uploadMigrate['single']('customer_product_fule'),async(_0x4398b8,_0x6d2dea)=>{const _0x3c7281=a0_0x50ff80,_0x5b4f59=_0x4398b8['file'][_0x3c7281(0x131)],_0x4fa3fd=await xlsx['readFile']('public/Migration/'+_0x5b4f59);let _0x543006=_0x4fa3fd[_0x3c7281(0x15f)],_0x12634d=xlsx[_0x3c7281(0x156)][_0x3c7281(0x169)](_0x4fa3fd['Sheets'][_0x543006[0x0]]);for(const _0x229ee6 of _0x12634d){const _0x4afea5=_0x229ee6['ID'],_0x41d1f5=_0x229ee6['Name'],_0x5da990=_0x229ee6[_0x3c7281(0x133)],_0x3d2981=_0x229ee6['SalesmanName'],_0x2c754f=_0x229ee6['address'],_0x3f157c=_0x229ee6['mobile'],_0x5b6657=_0x229ee6[_0x3c7281(0x159)];try{let _0xd1d06b=await customer[_0x3c7281(0x175)]({'name':_0x41d1f5});if(!_0xd1d06b){const _0x583ff6=new customer({'name':_0x41d1f5,'ID':_0x4afea5,'SalesmanCode':_0x5da990,'SalesmanName':_0x3d2981,'address':_0x2c754f,'mobile':_0x3f157c,'email':_0x5b6657});_0xd1d06b=await _0x583ff6[_0x3c7281(0x11a)](),_0x4398b8[_0x3c7281(0x164)](_0x3c7281(0x12e),_0x41d1f5+'\x20added\x20successfully');}else _0x4398b8[_0x3c7281(0x164)](_0x3c7281(0x13d),_0x41d1f5+_0x3c7281(0x124));}catch(_0x22c6b1){_0x6d2dea[_0x3c7281(0x15e)](0x1f4)[_0x3c7281(0x16d)]({'proderror':_0x22c6b1[_0x3c7281(0x120)],'aproduct':ProductName});}}_0x6d2dea[_0x3c7281(0x12b)](_0x3c7281(0x154));}),module['exports']=router;