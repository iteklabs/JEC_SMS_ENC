const a0_0x4f5a76=a0_0x3345;function a0_0x3345(_0x243bff,_0x23b093){const _0x43a7c4=a0_0x43a7();return a0_0x3345=function(_0x33459,_0x2b8c5c){_0x33459=_0x33459-0x1e1;let _0xeb1240=_0x43a7c4[_0x33459];return _0xeb1240;},a0_0x3345(_0x243bff,_0x23b093);}(function(_0x503e8c,_0x46269f){const _0x41deeb=a0_0x3345,_0x59baf0=_0x503e8c();while(!![]){try{const _0x34bfa8=parseInt(_0x41deeb(0x1ea))/0x1+parseInt(_0x41deeb(0x210))/0x2+-parseInt(_0x41deeb(0x21d))/0x3+-parseInt(_0x41deeb(0x22e))/0x4+-parseInt(_0x41deeb(0x1f6))/0x5*(parseInt(_0x41deeb(0x22b))/0x6)+parseInt(_0x41deeb(0x228))/0x7+-parseInt(_0x41deeb(0x213))/0x8*(-parseInt(_0x41deeb(0x207))/0x9);if(_0x34bfa8===_0x46269f)break;else _0x59baf0['push'](_0x59baf0['shift']());}catch(_0x1fa1f7){_0x59baf0['push'](_0x59baf0['shift']());}}}(a0_0x43a7,0x74c72));function a0_0x43a7(){const _0x433334=['errors','/sales_chart','$sale_product','_id','301059sphfPs','acc','save','$product_list.product_stock','sad','Finished\x20Goods','index_acc','account_category','French','express','Portuguese\x20(BR)','Raw\x20Materials','46775CULmPp','Arabic','Chinese','valueOf','email','$sumprice','German','$to_warehouse','/avg_data','/pending_data','/paid_data','aggregate','log','language','$product.to_quantity','../public/language/languages.json','rsm','41949YlPRgx','warehouse_category','/get_count','findById','$from_warehouse','$return_sale.sale_qty','paid','user','$date','93536siMwEi','English\x20(US)','/pending_data_table','2824lwZYVb','/paid_data_table','$count','find','/my_inv','$sale_product.totalprice','post','True','/index','length','1854669vshrdz','$return_product.return_qty','index_asd','/update_data','$product.quantity','$product_list','$return_sale','flash','Portuguese','render','$product.from_quantity','5271196zVvLsc','success','$product','474PkVHtn','Router','../models/all_models','3642392oEJGWB','$total_amount','$return_product','English','$total_price','False','fss','index_sa','Hindi','findOne','true','Spanish','$product.product_name','get','$sale_product.price','json'];a0_0x43a7=function(){return _0x433334;};return a0_0x43a7();}const express=require(a0_0x4f5a76(0x1f3)),app=express(),router=express[a0_0x4f5a76(0x22c)](),auth=require('../middleware/auth'),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order}=require(a0_0x4f5a76(0x22d)),users=require(a0_0x4f5a76(0x205));router[a0_0x4f5a76(0x1e3)](a0_0x4f5a76(0x21b),auth,async(_0x4087fe,_0x48ca36)=>{const _0x2c54da=a0_0x4f5a76;try{const {username:_0x437861,email:_0x15d2ad,role:_0x528370}=_0x4087fe['user'],_0x2081b5=_0x4087fe[_0x2c54da(0x20e)],_0x7f733f=await master_shop[_0x2c54da(0x216)](),_0x524951=await profile[_0x2c54da(0x237)]({'email':_0x2081b5[_0x2c54da(0x1fa)]});if(_0x7f733f[0x0][_0x2c54da(0x203)]==_0x2c54da(0x211))var _0x1b4b00=users[_0x2c54da(0x231)];else{if(_0x7f733f[0x0][_0x2c54da(0x203)]=='Hindi')var _0x1b4b00=users[_0x2c54da(0x236)];else{if(_0x7f733f[0x0][_0x2c54da(0x203)]=='German')var _0x1b4b00=users[_0x2c54da(0x1fc)];else{if(_0x7f733f[0x0][_0x2c54da(0x203)]==_0x2c54da(0x1e1))var _0x1b4b00=users[_0x2c54da(0x1e1)];else{if(_0x7f733f[0x0][_0x2c54da(0x203)]==_0x2c54da(0x1f2))var _0x1b4b00=users[_0x2c54da(0x1f2)];else{if(_0x7f733f[0x0][_0x2c54da(0x203)]==_0x2c54da(0x1f4))var _0x1b4b00=users[_0x2c54da(0x225)];else{if(_0x7f733f[0x0][_0x2c54da(0x203)]==_0x2c54da(0x1f8))var _0x1b4b00=users[_0x2c54da(0x1f8)];else{if(_0x7f733f[0x0]['language']=='Arabic\x20(ae)')var _0x1b4b00=users[_0x2c54da(0x1f7)];}}}}}}}if(_0x2081b5[_0x2c54da(0x1f1)]=='wm'){var _0x12fec8;if(_0x2081b5[_0x2c54da(0x208)]=='Raw\x20Materials'){const _0x2f23f2=await product[_0x2c54da(0x216)]({'product_category':_0x2c54da(0x1f5)});_0x12fec8=_0x2f23f2[_0x2c54da(0x21c)];}else{if(_0x2081b5[_0x2c54da(0x208)]==_0x2c54da(0x1ef)){const _0x57c281=await product[_0x2c54da(0x216)]({'product_category':'Finished\x20Goods'});_0x12fec8=_0x57c281[_0x2c54da(0x21c)];}else{const _0x569b46=await product[_0x2c54da(0x216)]();_0x12fec8=_0x569b46[_0x2c54da(0x21c)];}}const _0x4e231a=await sales[_0x2c54da(0x201)]([{'$group':{'_id':null,'total_price':{'$sum':_0x2c54da(0x232)}}}]),_0x380a99=await sales[_0x2c54da(0x201)]([{'$unwind':_0x2c54da(0x1e8)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$sale_product.quantity'}}}]),_0x1db16e=await sales_return[_0x2c54da(0x201)]([{'$group':{'_id':null,'total':{'$sum':'$total_amount'}}}]),_0x238fe8=await sales_return[_0x2c54da(0x201)]([{'$unwind':_0x2c54da(0x223)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x2c54da(0x20c)}}}]),_0x3f76d3=await purchases[_0x2c54da(0x201)]([{'$group':{'_id':null,'total_amount':{'$sum':_0x2c54da(0x22f)}}}]),_0x4d1cb6=await purchases_return[_0x2c54da(0x201)]([{'$group':{'_id':null,'total':{'$sum':_0x2c54da(0x22f)}}}]),_0x463e82=await purchases_return[_0x2c54da(0x201)]([{'$unwind':'$return_product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x2c54da(0x21e)}}}]),_0x1e861b=await purchases[_0x2c54da(0x201)]([{'$unwind':_0x2c54da(0x22a)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x2c54da(0x221)}}}]),_0x1b221b=await purchases[_0x2c54da(0x201)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x4e5c90=await sales[_0x2c54da(0x201)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x4381a8=await transfers[_0x2c54da(0x201)]([{'$unwind':'$product'},{'$group':{'_id':_0x2c54da(0x1e2),'fromWarehouse':{'$first':_0x2c54da(0x20b)},'toWareHouse':{'$first':_0x2c54da(0x1fd)},'FromtotalQuantity':{'$sum':_0x2c54da(0x227)},'TototalQuantity':{'$sum':_0x2c54da(0x204)}}}]),_0x2e6ca4=await categories[_0x2c54da(0x216)](),_0x37f66f=await product['find'](),_0x3aad4a=await suppliers[_0x2c54da(0x216)](),_0x1ca709=await customer[_0x2c54da(0x216)]();_0x48ca36[_0x2c54da(0x226)]('index',{'success':_0x4087fe[_0x2c54da(0x224)](_0x2c54da(0x229)),'errors':_0x4087fe[_0x2c54da(0x224)]('errors'),'role':_0x2081b5,'profile':_0x524951,'sale':_0x4e231a[0x0],'sales_return':_0x1db16e[0x0],'purchases':_0x3f76d3[0x0],'purchases_return':_0x4d1cb6[0x0],'purchases_table':_0x1b221b,'sales_table':_0x4e5c90,'categories':_0x2e6ca4[_0x2c54da(0x21c)],'product':_0x37f66f[_0x2c54da(0x21c)],'suppliers':_0x3aad4a[_0x2c54da(0x21c)],'customer':_0x1ca709['length'],'master_shop':_0x7f733f,'language':_0x1b4b00,'sale_QTY':_0x380a99[0x0],'purchases_QTY':_0x1e861b[0x0],'sales_return_QTY':_0x238fe8[0x0],'purchases_return_QTY':_0x463e82[0x0],'transfer_table':_0x4381a8,'product_cnt':_0x12fec8});}else{if(_0x2081b5[_0x2c54da(0x1f1)]=='sa'){const _0x1b2ce1=await staff['findOne']({'email':_0x2081b5[_0x2c54da(0x1fa)]}),_0x536f7f=await sales_sa['find']({'sales_staff_id':_0x1b2ce1[_0x2c54da(0x1e9)]}),_0x2ff9ef=await sales_sa[_0x2c54da(0x216)]({'sales_staff_id':_0x1b2ce1[_0x2c54da(0x1e9)],'paid':'True'}),_0x2ef6e4=await sales_sa[_0x2c54da(0x216)]({'sales_staff_id':_0x1b2ce1[_0x2c54da(0x1e9)],'paid':_0x2c54da(0x233)}),_0x1e892f=await sales_sa[_0x2c54da(0x201)]([{'$match':{'sales_staff_id':_0x1b2ce1['_id'][_0x2c54da(0x1f9)]()}},{'$unwind':_0x2c54da(0x1e8)},{'$group':{'_id':null,'sumprice':{'$sum':_0x2c54da(0x1e4)},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':['$sumprice',_0x2c54da(0x215)]},0x2]}}}]),_0x3d91d4=await staff[_0x2c54da(0x201)]([{'$match':{'email':_0x2081b5[_0x2c54da(0x1fa)]}},{'$unwind':_0x2c54da(0x222)},{'$group':{'_id':null,'totalQTY':{'$sum':_0x2c54da(0x1ed)}}}]);_0x48ca36[_0x2c54da(0x226)](_0x2c54da(0x235),{'success':_0x4087fe[_0x2c54da(0x224)](_0x2c54da(0x229)),'errors':_0x4087fe['flash'](_0x2c54da(0x1e6)),'role':_0x2081b5,'profile':_0x524951,'master_shop':_0x7f733f,'language':_0x1b4b00,'cntPaid':_0x2ff9ef,'cntNotPaid':_0x2ef6e4,'avg_price':_0x1e892f[0x0],'my_stock':_0x3d91d4[0x0],'staff_arr':_0x1b2ce1});}else{if(_0x2081b5[_0x2c54da(0x1f1)]==_0x2c54da(0x1eb)){const _0x1d7a7a=await staff['findOne']({'email':_0x2081b5['email']});_0x48ca36[_0x2c54da(0x226)](_0x2c54da(0x1f0),{'success':_0x4087fe[_0x2c54da(0x224)](_0x2c54da(0x229)),'errors':_0x4087fe[_0x2c54da(0x224)](_0x2c54da(0x1e6)),'role':_0x2081b5,'profile':_0x524951,'master_shop':_0x7f733f,'language':_0x1b4b00}),_0x48ca36['json'](_0x1d7a7a);}else{if(_0x2081b5[_0x2c54da(0x1f1)]==_0x2c54da(0x1ee)||_0x2081b5['account_category']==_0x2c54da(0x206)||_0x2081b5[_0x2c54da(0x1f1)]==_0x2c54da(0x234)){const _0x5d0bce=await staff['findOne']({'email':_0x2081b5[_0x2c54da(0x1fa)]});_0x48ca36[_0x2c54da(0x226)](_0x2c54da(0x21f),{'success':_0x4087fe[_0x2c54da(0x224)](_0x2c54da(0x229)),'errors':_0x4087fe[_0x2c54da(0x224)](_0x2c54da(0x1e6)),'role':_0x2081b5,'profile':_0x524951,'master_shop':_0x7f733f,'language':_0x1b4b00});}else{var _0x12fec8;if(_0x2081b5[_0x2c54da(0x208)]==_0x2c54da(0x1f5)){const _0x4e4c16=await product[_0x2c54da(0x216)]({'product_category':_0x2c54da(0x1f5)});_0x12fec8=_0x4e4c16['length'];}else{if(_0x2081b5[_0x2c54da(0x208)]=='Finished\x20Goods'){const _0x3ade1d=await product[_0x2c54da(0x216)]({'product_category':_0x2c54da(0x1ef)});_0x12fec8=_0x3ade1d[_0x2c54da(0x21c)];}else{const _0x37c1c5=await product['find']();_0x12fec8=_0x37c1c5[_0x2c54da(0x21c)];}}const _0x331b83=await sales['aggregate']([{'$group':{'_id':null,'total_price':{'$sum':'$total_price'}}}]),_0xe74c22=await sales[_0x2c54da(0x201)]([{'$unwind':_0x2c54da(0x1e8)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$sale_product.quantity'}}}]),_0x294691=await sales_return[_0x2c54da(0x201)]([{'$group':{'_id':null,'total':{'$sum':_0x2c54da(0x22f)}}}]),_0x21d209=await sales_return[_0x2c54da(0x201)]([{'$unwind':_0x2c54da(0x223)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x2c54da(0x20c)}}}]),_0x5cfa34=await purchases['aggregate']([{'$group':{'_id':null,'total_amount':{'$sum':_0x2c54da(0x22f)}}}]),_0x1555a8=await purchases_return[_0x2c54da(0x201)]([{'$group':{'_id':null,'total':{'$sum':_0x2c54da(0x22f)}}}]),_0x552944=await purchases_return[_0x2c54da(0x201)]([{'$unwind':_0x2c54da(0x230)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x2c54da(0x21e)}}}]),_0x3c54cd=await purchases[_0x2c54da(0x201)]([{'$unwind':_0x2c54da(0x22a)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x2c54da(0x221)}}}]),_0x4f6c58=await purchases[_0x2c54da(0x201)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x5c396d=await sales[_0x2c54da(0x201)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x6a4d9=await transfers['aggregate']([{'$unwind':_0x2c54da(0x22a)},{'$group':{'_id':_0x2c54da(0x1e2),'fromWarehouse':{'$first':_0x2c54da(0x20b)},'toWareHouse':{'$first':_0x2c54da(0x1fd)},'FromtotalQuantity':{'$sum':_0x2c54da(0x227)},'TototalQuantity':{'$sum':'$product.to_quantity'}}}]),_0x1fcf9d=await categories[_0x2c54da(0x216)](),_0x12a0b2=await product['find'](),_0x59f4e6=await suppliers[_0x2c54da(0x216)](),_0x1752fe=await customer[_0x2c54da(0x216)]();_0x48ca36[_0x2c54da(0x226)]('index',{'success':_0x4087fe[_0x2c54da(0x224)](_0x2c54da(0x229)),'errors':_0x4087fe[_0x2c54da(0x224)](_0x2c54da(0x1e6)),'role':_0x2081b5,'profile':_0x524951,'sale':_0x331b83[0x0],'sales_return':_0x294691[0x0],'purchases':_0x5cfa34[0x0],'purchases_return':_0x1555a8[0x0],'purchases_table':_0x4f6c58,'sales_table':_0x5c396d,'categories':_0x1fcf9d['length'],'product':_0x12a0b2['length'],'suppliers':_0x59f4e6[_0x2c54da(0x21c)],'customer':_0x1752fe[_0x2c54da(0x21c)],'master_shop':_0x7f733f,'language':_0x1b4b00,'sale_QTY':_0xe74c22[0x0],'purchases_QTY':_0x3c54cd[0x0],'sales_return_QTY':_0x21d209[0x0],'purchases_return_QTY':_0x552944[0x0],'transfer_table':_0x6a4d9,'product_cnt':_0x12fec8});}}}}}catch(_0x54ebc7){console[_0x2c54da(0x202)](_0x54ebc7);}}),router[a0_0x4f5a76(0x1e3)](a0_0x4f5a76(0x212),auth,async(_0x29b0c3,_0x392870)=>{const _0x1949e0=a0_0x4f5a76;try{const _0xd90195=_0x29b0c3[_0x1949e0(0x20e)],_0x5aeef9=await staff['findOne']({'email':_0xd90195[_0x1949e0(0x1fa)]}),_0x1886d9=await sales_sa[_0x1949e0(0x201)]([{'$match':{'sales_staff_id':_0x5aeef9['_id']['valueOf'](),'paid':'False'}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x392870[_0x1949e0(0x1e5)](_0x1886d9);}catch(_0x24c292){_0x392870[_0x1949e0(0x1e5)](_0x24c292);}}),router[a0_0x4f5a76(0x1e3)](a0_0x4f5a76(0x1ff),auth,async(_0x2e2b80,_0x20e345)=>{const _0x1f275b=a0_0x4f5a76;try{const _0xabe2e6=_0x2e2b80[_0x1f275b(0x20e)],_0x14135d=await staff[_0x1f275b(0x237)]({'email':_0xabe2e6[_0x1f275b(0x1fa)]}),_0x37ea93=await sales_sa[_0x1f275b(0x216)]({'sales_staff_id':_0x14135d['_id'],'paid':_0x1f275b(0x233)});_0x20e345[_0x1f275b(0x1e5)](_0x37ea93);}catch(_0x46f4bc){_0x20e345[_0x1f275b(0x1e5)](_0x46f4bc);}}),router[a0_0x4f5a76(0x219)](a0_0x4f5a76(0x209),auth,async(_0x51d11f,_0x59aa1f)=>{const _0x47949f=a0_0x4f5a76;try{const {sttaff_id:_0x2839bf,warehouse:_0x404c3d,account_category:_0x26aaa9}=_0x51d11f[_0x47949f(0x20e)],_0x13545d=await sales_order[_0x47949f(0x201)]([{'$match':{'accounting_account_id':_0x2839bf,'accounting_account_confirm':'false'}}]);_0x59aa1f[_0x47949f(0x1e5)](_0x13545d);}catch(_0x3eac32){}}),router['get'](a0_0x4f5a76(0x214),auth,async(_0x4ef791,_0x343db9)=>{const _0x5e0f9b=a0_0x4f5a76;try{const _0x17c8fa=_0x4ef791[_0x5e0f9b(0x20e)],_0x49bd32=await staff[_0x5e0f9b(0x237)]({'email':_0x17c8fa['email']}),_0x177442=await sales_sa[_0x5e0f9b(0x216)]({'sales_staff_id':_0x49bd32[_0x5e0f9b(0x1e9)],'paid':_0x5e0f9b(0x21a)});_0x343db9[_0x5e0f9b(0x1e5)](_0x177442);}catch(_0x38f5a0){_0x343db9[_0x5e0f9b(0x1e5)](_0x38f5a0);}}),router['get'](a0_0x4f5a76(0x200),auth,async(_0x5b5017,_0x2a99a0)=>{const _0x169a94=a0_0x4f5a76;try{const _0x421a7b=_0x5b5017[_0x169a94(0x20e)],_0x23b4c3=await staff[_0x169a94(0x237)]({'email':_0x421a7b[_0x169a94(0x1fa)]}),_0x346142=await sales_sa[_0x169a94(0x201)]([{'$match':{'sales_staff_id':_0x23b4c3['_id'][_0x169a94(0x1f9)](),'paid':'True'}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x2a99a0[_0x169a94(0x1e5)](_0x346142);}catch(_0x378010){_0x2a99a0['json'](_0x378010);}}),router[a0_0x4f5a76(0x219)](a0_0x4f5a76(0x220),auth,async(_0x533212,_0x4a963d)=>{const _0x486c84=a0_0x4f5a76;try{const {id:_0x154814,price:_0x2e5d53}=_0x533212['body'],_0x2dcdeb=await sales_sa[_0x486c84(0x20a)](_0x154814);_0x2dcdeb[_0x486c84(0x20d)]='True',_0x2dcdeb['collection_price']=parseFloat(_0x2e5d53);const _0x4ad708=await _0x2dcdeb[_0x486c84(0x1ec)]();_0x4a963d[_0x486c84(0x1e5)](_0x4ad708);}catch(_0xaf8fb0){_0x4a963d[_0x486c84(0x1e5)](_0xaf8fb0);}}),router[a0_0x4f5a76(0x1e3)]('/pending_data',auth,async(_0x2d3203,_0x2d1fff)=>{const _0x2980ca=a0_0x4f5a76;try{const _0x3da5d2=_0x2d3203[_0x2980ca(0x20e)],_0x54d7c3=await staff[_0x2980ca(0x237)]({'email':_0x3da5d2[_0x2980ca(0x1fa)]}),_0x56b20e=await sales_sa[_0x2980ca(0x216)]({'sales_staff_id':_0x54d7c3[_0x2980ca(0x1e9)],'paid':_0x2980ca(0x233)});_0x2d1fff[_0x2980ca(0x1e5)](_0x56b20e);}catch(_0x5965e4){_0x2d1fff[_0x2980ca(0x1e5)](_0x5965e4);}}),router['get'](a0_0x4f5a76(0x1fe),auth,async(_0x550cff,_0x2232d7)=>{const _0x2bdb43=a0_0x4f5a76;try{const _0x2f732c=_0x550cff[_0x2bdb43(0x20e)],_0x528084=await staff[_0x2bdb43(0x237)]({'email':_0x2f732c[_0x2bdb43(0x1fa)]}),_0x30d279=await sales_sa[_0x2bdb43(0x201)]([{'$match':{'sales_staff_id':_0x528084[_0x2bdb43(0x1e9)][_0x2bdb43(0x1f9)]()}},{'$unwind':_0x2bdb43(0x1e8)},{'$group':{'_id':null,'sumprice':{'$sum':_0x2bdb43(0x1e4)},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':[_0x2bdb43(0x1fb),_0x2bdb43(0x215)]},0x2]}}}]);_0x2232d7['json'](_0x30d279);}catch(_0x4d67ae){_0x2232d7[_0x2bdb43(0x1e5)](_0x4d67ae);}}),router[a0_0x4f5a76(0x1e3)](a0_0x4f5a76(0x217),auth,async(_0x33fde6,_0x5cb9d5)=>{const _0x5cf92c=a0_0x4f5a76;try{const _0xe6431b=_0x33fde6[_0x5cf92c(0x20e)],_0x3b57d0=await staff['findOne']({'email':_0xe6431b[_0x5cf92c(0x1fa)]}),_0x56a969=await staff[_0x5cf92c(0x201)]([{'$match':{'email':_0xe6431b[_0x5cf92c(0x1fa)]}},{'$unwind':_0x5cf92c(0x222)},{'$match':{'product_list.isConfirm':_0x5cf92c(0x238)}},{'$group':{'_id':null,'totalQTY':{'$sum':'$product_list.product_stock'}}}]);_0x5cb9d5['json'](_0x56a969);}catch(_0x218a50){_0x5cb9d5[_0x5cf92c(0x1e5)](_0x218a50);}}),router[a0_0x4f5a76(0x1e3)](a0_0x4f5a76(0x1e7),auth,async(_0x15f25f,_0x71f24a)=>{const _0x20bed=a0_0x4f5a76;try{const _0x4b5a98=_0x15f25f[_0x20bed(0x20e)],_0x451623=await staff[_0x20bed(0x237)]({'email':_0x4b5a98['email']}),_0x18b9af=await sales_sa['aggregate']([{'$match':{'sales_staff_id':_0x451623[_0x20bed(0x1e9)][_0x20bed(0x1f9)]()}},{'$unwind':_0x20bed(0x1e8)},{'$group':{'_id':_0x20bed(0x20f),'totalQuantity':{'$sum':'$sale_product.quantity'},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0x71f24a['json'](_0x18b9af);}catch(_0x2ba1f6){_0x71f24a[_0x20bed(0x1e5)](_0x2ba1f6);}}),router['get']('/price_chart',auth,async(_0x51f34c,_0x58494c)=>{const _0x19f58a=a0_0x4f5a76;try{const _0xbd71b2=_0x51f34c[_0x19f58a(0x20e)],_0x458450=await staff[_0x19f58a(0x237)]({'email':_0xbd71b2[_0x19f58a(0x1fa)]}),_0x41a6a0=await sales_sa[_0x19f58a(0x201)]([{'$match':{'sales_staff_id':_0x458450[_0x19f58a(0x1e9)]['valueOf']()}},{'$unwind':_0x19f58a(0x1e8)},{'$group':{'_id':'$date','totalPrice':{'$sum':_0x19f58a(0x218)},'date':{'$first':_0x19f58a(0x20f)}}},{'$sort':{'date':0x1}}]);_0x58494c[_0x19f58a(0x1e5)](_0x41a6a0);}catch(_0x4b2327){_0x58494c['json'](_0x4b2327);}}),module['exports']=router;