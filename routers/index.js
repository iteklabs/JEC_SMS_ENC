const a0_0x21e3b1=a0_0x153a;(function(_0x1af4ea,_0x2c54d0){const _0xbbf2b3=a0_0x153a,_0x2321e5=_0x1af4ea();while(!![]){try{const _0xc63b88=parseInt(_0xbbf2b3(0x1f0))/0x1*(-parseInt(_0xbbf2b3(0x1ec))/0x2)+-parseInt(_0xbbf2b3(0x1fe))/0x3*(-parseInt(_0xbbf2b3(0x20c))/0x4)+-parseInt(_0xbbf2b3(0x232))/0x5*(parseInt(_0xbbf2b3(0x201))/0x6)+-parseInt(_0xbbf2b3(0x1f1))/0x7*(parseInt(_0xbbf2b3(0x1cf))/0x8)+-parseInt(_0xbbf2b3(0x1cc))/0x9*(-parseInt(_0xbbf2b3(0x1f6))/0xa)+-parseInt(_0xbbf2b3(0x230))/0xb*(parseInt(_0xbbf2b3(0x1f4))/0xc)+parseInt(_0xbbf2b3(0x1f5))/0xd;if(_0xc63b88===_0x2c54d0)break;else _0x2321e5['push'](_0x2321e5['shift']());}catch(_0x2d09f0){_0x2321e5['push'](_0x2321e5['shift']());}}}(a0_0x2f90,0x72f20));function a0_0x153a(_0x1f494f,_0x4d7f2f){const _0x2f90ad=a0_0x2f90();return a0_0x153a=function(_0x153a92,_0x329774){_0x153a92=_0x153a92-0x1c0;let _0x1f9b1f=_0x2f90ad[_0x153a92];return _0x1f9b1f;},a0_0x153a(_0x1f494f,_0x4d7f2f);}const express=require(a0_0x21e3b1(0x21e)),app=express(),router=express[a0_0x21e3b1(0x1c3)](),auth=require(a0_0x21e3b1(0x1ca)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order}=require(a0_0x21e3b1(0x202)),users=require('../public/language/languages.json');function a0_0x2f90(){const _0x5ae30a=['/paid_data_table','email','/get_count','findOne','$return_sale.sale_qty','/sales_chart','aggregate','4EVINBc','$total_price','$sale_product.price','$name','222674nRnQcj','589561cboVXQ','$product_info.gross_price','$product.to_quantity','213348tGkaDX','10790819pNcmnO','20uuDKHP','_id','$products.product_details','/pending_data_table','sales_sa_year','index_sa','index','success','574380TIXMwC','cat_brand','sales_sa_month','18LotXrI','../models/all_models','$from_warehouse','$_id.brand','sale_product.product_code','exports','$product_info.brand','user','$product_info.category','category','$date','16neNejr','Hindi','$product.quantity','products','$products.product_details.category','push','True','length','/avg_data','get','$sale_product.totalprice','index_asd','$product','$products.discount','Finished\x20Goods','$products.qty','product_code','/price_chart','express','index_acc','Arabic\x20(ae)','$products.NetPrice','English\x20(US)','$products.product_details.gross_price','$_id.category','$count','acc','Portuguese\x20(BR)','/sales_data_dashboard','$product_details','valueOf','$sale_product.discount','$totalQty','$product_info.name','$return_product.return_qty','net','22FXSGPF','paid','601270GXWCUs','$product_list','$return_product','$sumprice','$products','NetPrice','Arabic','fss','log','$brand','true','false','$sale_product.adj_discount','$sale_product','account_category','$product_list.product_stock','$total_amount','brand','$products.product_details.brand','post','collection_price','$product.product_name','False','$sale_product.quantity','/pending_data','findById','product_info','qty','Router','$product_info','Spanish','$return_sale','$totalGross','$category','sad','../middleware/auth','Raw\x20Materials','2135646vBgBde','flash','$discount','72CImVSO','/update_data','German','$to_warehouse','totalQty','$sale_product.real_qty_unit_val','language','errors','Chinese','$adj_discount','warehouse_category','body','$product.from_quantity','find','json','Portuguese','/paid_data','$product_code','$product_info.product_code','$products.adj_discount','render','$NetPrice'];a0_0x2f90=function(){return _0x5ae30a;};return a0_0x2f90();}router['get']('/index',auth,async(_0x3556b4,_0x17629c)=>{const _0x1034ea=a0_0x21e3b1;try{const {username:_0x299c75,email:_0xd61f93,role:_0x59a876}=_0x3556b4['user'],_0x891f94=_0x3556b4[_0x1034ea(0x208)],_0x338ac9=await master_shop[_0x1034ea(0x1dc)](),_0x4d6b19=await profile[_0x1034ea(0x1e8)]({'email':_0x891f94['email']});if(_0x338ac9[0x0][_0x1034ea(0x1d5)]==_0x1034ea(0x222))var _0x4ec83a=users['English'];else{if(_0x338ac9[0x0][_0x1034ea(0x1d5)]==_0x1034ea(0x20d))var _0x4ec83a=users['Hindi'];else{if(_0x338ac9[0x0][_0x1034ea(0x1d5)]==_0x1034ea(0x1d1))var _0x4ec83a=users['German'];else{if(_0x338ac9[0x0][_0x1034ea(0x1d5)]=='Spanish')var _0x4ec83a=users[_0x1034ea(0x1c5)];else{if(_0x338ac9[0x0]['language']=='French')var _0x4ec83a=users['French'];else{if(_0x338ac9[0x0]['language']==_0x1034ea(0x227))var _0x4ec83a=users[_0x1034ea(0x1de)];else{if(_0x338ac9[0x0][_0x1034ea(0x1d5)]==_0x1034ea(0x1d7))var _0x4ec83a=users[_0x1034ea(0x1d7)];else{if(_0x338ac9[0x0][_0x1034ea(0x1d5)]==_0x1034ea(0x220))var _0x4ec83a=users[_0x1034ea(0x238)];}}}}}}}if(_0x891f94['account_category']=='wm'){var _0x1c4357;if(_0x891f94[_0x1034ea(0x1d9)]==_0x1034ea(0x1cb)){const _0x486338=await product['find']({'product_category':_0x1034ea(0x1cb)});_0x1c4357=_0x486338['length'];}else{if(_0x891f94[_0x1034ea(0x1d9)]==_0x1034ea(0x21a)){const _0x5ef3db=await product[_0x1034ea(0x1dc)]({'product_category':_0x1034ea(0x21a)});_0x1c4357=_0x5ef3db[_0x1034ea(0x213)];}else{const _0xf35432=await product['find']();_0x1c4357=_0xf35432[_0x1034ea(0x213)];}}const _0x581f16=await sales[_0x1034ea(0x1eb)]([{'$group':{'_id':null,'total_price':{'$sum':_0x1034ea(0x1ed)}}}]),_0xd4698f=await sales[_0x1034ea(0x1eb)]([{'$unwind':_0x1034ea(0x23f)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x1034ea(0x249)}}}]),_0x2969f4=await sales_return['aggregate']([{'$group':{'_id':null,'total':{'$sum':'$total_amount'}}}]),_0x6aed3c=await sales_return['aggregate']([{'$unwind':_0x1034ea(0x1c6)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x1034ea(0x1e9)}}}]),_0x413114=await purchases[_0x1034ea(0x1eb)]([{'$group':{'_id':null,'total_amount':{'$sum':_0x1034ea(0x242)}}}]),_0x4c28c0=await purchases_return['aggregate']([{'$group':{'_id':null,'total':{'$sum':_0x1034ea(0x242)}}}]),_0x1d8142=await purchases_return['aggregate']([{'$unwind':_0x1034ea(0x234)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x1034ea(0x22e)}}}]),_0x2a2ad4=await purchases['aggregate']([{'$unwind':'$product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x1034ea(0x20e)}}}]),_0x413fce=await purchases[_0x1034ea(0x1eb)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0xea6274=await sales['aggregate']([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x11410c=await transfers[_0x1034ea(0x1eb)]([{'$unwind':_0x1034ea(0x218)},{'$group':{'_id':'$product.product_name','fromWarehouse':{'$first':_0x1034ea(0x203)},'toWareHouse':{'$first':_0x1034ea(0x1d2)},'FromtotalQuantity':{'$sum':_0x1034ea(0x1db)},'TototalQuantity':{'$sum':_0x1034ea(0x1f3)}}}]),_0x1289fb=await categories[_0x1034ea(0x1dc)](),_0x53aaef=await product[_0x1034ea(0x1dc)](),_0x1df84d=await suppliers['find'](),_0x5ae446=await customer[_0x1034ea(0x1dc)]();_0x17629c['render'](_0x1034ea(0x1fc),{'success':_0x3556b4['flash']('success'),'errors':_0x3556b4[_0x1034ea(0x1cd)]('errors'),'role':_0x891f94,'profile':_0x4d6b19,'sale':_0x581f16[0x0],'sales_return':_0x2969f4[0x0],'purchases':_0x413114[0x0],'purchases_return':_0x4c28c0[0x0],'purchases_table':_0x413fce,'sales_table':_0xea6274,'categories':_0x1289fb['length'],'product':_0x53aaef[_0x1034ea(0x213)],'suppliers':_0x1df84d[_0x1034ea(0x213)],'customer':_0x5ae446[_0x1034ea(0x213)],'master_shop':_0x338ac9,'language':_0x4ec83a,'sale_QTY':_0xd4698f[0x0],'purchases_QTY':_0x2a2ad4[0x0],'sales_return_QTY':_0x6aed3c[0x0],'purchases_return_QTY':_0x1d8142[0x0],'transfer_table':_0x11410c,'product_cnt':_0x1c4357});}else{if(_0x891f94[_0x1034ea(0x240)]=='sa'){const _0x20214c=await staff[_0x1034ea(0x1e8)]({'email':_0x891f94[_0x1034ea(0x1e6)]}),_0x2025e0=await sales_sa[_0x1034ea(0x1dc)]({'sales_staff_id':_0x20214c['_id']}),_0x2b3f83=await sales_sa[_0x1034ea(0x1dc)]({'sales_staff_id':_0x20214c[_0x1034ea(0x1f7)],'paid':_0x1034ea(0x212)}),_0x3ca89e=await sales_sa[_0x1034ea(0x1dc)]({'sales_staff_id':_0x20214c['_id'],'paid':_0x1034ea(0x248)}),_0xbfd82b=await sales_sa[_0x1034ea(0x1eb)]([{'$match':{'sales_staff_id':_0x20214c[_0x1034ea(0x1f7)][_0x1034ea(0x22a)]()}},{'$unwind':_0x1034ea(0x23f)},{'$group':{'_id':null,'sumprice':{'$sum':_0x1034ea(0x1ee)},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':[_0x1034ea(0x235),_0x1034ea(0x225)]},0x2]}}}]),_0x3285eb=await staff[_0x1034ea(0x1eb)]([{'$match':{'email':_0x891f94[_0x1034ea(0x1e6)]}},{'$unwind':_0x1034ea(0x233)},{'$group':{'_id':null,'totalQTY':{'$sum':_0x1034ea(0x241)}}}]);_0x17629c[_0x1034ea(0x1e3)](_0x1034ea(0x1fb),{'success':_0x3556b4[_0x1034ea(0x1cd)](_0x1034ea(0x1fd)),'errors':_0x3556b4[_0x1034ea(0x1cd)]('errors'),'role':_0x891f94,'profile':_0x4d6b19,'master_shop':_0x338ac9,'language':_0x4ec83a,'cntPaid':_0x2b3f83,'cntNotPaid':_0x3ca89e,'avg_price':_0xbfd82b[0x0],'my_stock':_0x3285eb[0x0],'staff_arr':_0x20214c});}else{if(_0x891f94[_0x1034ea(0x240)]==_0x1034ea(0x226)){const _0x515313=await staff[_0x1034ea(0x1e8)]({'email':_0x891f94[_0x1034ea(0x1e6)]});_0x17629c[_0x1034ea(0x1e3)](_0x1034ea(0x21f),{'success':_0x3556b4['flash'](_0x1034ea(0x1fd)),'errors':_0x3556b4['flash'](_0x1034ea(0x1d6)),'role':_0x891f94,'profile':_0x4d6b19,'master_shop':_0x338ac9,'language':_0x4ec83a}),_0x17629c['json'](_0x515313);}else{if(_0x891f94[_0x1034ea(0x240)]==_0x1034ea(0x1c9)||_0x891f94['account_category']=='rsm'||_0x891f94[_0x1034ea(0x240)]==_0x1034ea(0x239)){const _0x489be2=await staff[_0x1034ea(0x1e8)]({'email':_0x891f94[_0x1034ea(0x1e6)]});_0x17629c['render'](_0x1034ea(0x217),{'success':_0x3556b4[_0x1034ea(0x1cd)](_0x1034ea(0x1fd)),'errors':_0x3556b4['flash'](_0x1034ea(0x1d6)),'role':_0x891f94,'profile':_0x4d6b19,'master_shop':_0x338ac9,'language':_0x4ec83a});}else{var _0x1c4357;if(_0x891f94[_0x1034ea(0x1d9)]==_0x1034ea(0x1cb)){const _0x3bc223=await product['find']({'product_category':_0x1034ea(0x1cb)});_0x1c4357=_0x3bc223[_0x1034ea(0x213)];}else{if(_0x891f94[_0x1034ea(0x1d9)]==_0x1034ea(0x21a)){const _0x14796c=await product[_0x1034ea(0x1dc)]({'product_category':_0x1034ea(0x21a)});_0x1c4357=_0x14796c['length'];}else{const _0x3e1fd5=await product[_0x1034ea(0x1dc)]();_0x1c4357=_0x3e1fd5[_0x1034ea(0x213)];}}const _0x5ce145=await sales[_0x1034ea(0x1eb)]([{'$group':{'_id':null,'total_price':{'$sum':_0x1034ea(0x1ed)}}}]),_0x247328=await sales[_0x1034ea(0x1eb)]([{'$unwind':'$sale_product'},{'$group':{'_id':null,'totalQuantity':{'$sum':'$sale_product.quantity'}}}]),_0x4a2515=await sales_return[_0x1034ea(0x1eb)]([{'$group':{'_id':null,'total':{'$sum':_0x1034ea(0x242)}}}]),_0x4cd2ce=await sales_return[_0x1034ea(0x1eb)]([{'$unwind':_0x1034ea(0x1c6)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x1034ea(0x1e9)}}}]),_0x30a1b5=await purchases[_0x1034ea(0x1eb)]([{'$group':{'_id':null,'total_amount':{'$sum':_0x1034ea(0x242)}}}]),_0x886b79=await purchases_return[_0x1034ea(0x1eb)]([{'$group':{'_id':null,'total':{'$sum':'$total_amount'}}}]),_0x94d53e=await purchases_return['aggregate']([{'$unwind':'$return_product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x1034ea(0x22e)}}}]),_0x53be71=await purchases[_0x1034ea(0x1eb)]([{'$unwind':_0x1034ea(0x218)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x1034ea(0x20e)}}}]),_0x503150=await purchases[_0x1034ea(0x1eb)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x3629bc=await sales[_0x1034ea(0x1eb)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x36e2f2=await transfers[_0x1034ea(0x1eb)]([{'$unwind':_0x1034ea(0x218)},{'$group':{'_id':_0x1034ea(0x247),'fromWarehouse':{'$first':_0x1034ea(0x203)},'toWareHouse':{'$first':_0x1034ea(0x1d2)},'FromtotalQuantity':{'$sum':_0x1034ea(0x1db)},'TototalQuantity':{'$sum':_0x1034ea(0x1f3)}}}]),_0x1e9018=await categories[_0x1034ea(0x1dc)](),_0x142b80=await product[_0x1034ea(0x1dc)](),_0xd9abe6=await suppliers[_0x1034ea(0x1dc)](),_0x5d4b8d=await customer[_0x1034ea(0x1dc)]();_0x17629c[_0x1034ea(0x1e3)](_0x1034ea(0x1fc),{'success':_0x3556b4[_0x1034ea(0x1cd)]('success'),'errors':_0x3556b4[_0x1034ea(0x1cd)]('errors'),'role':_0x891f94,'profile':_0x4d6b19,'sale':_0x5ce145[0x0],'sales_return':_0x4a2515[0x0],'purchases':_0x30a1b5[0x0],'purchases_return':_0x886b79[0x0],'purchases_table':_0x503150,'sales_table':_0x3629bc,'categories':_0x1e9018[_0x1034ea(0x213)],'product':_0x142b80[_0x1034ea(0x213)],'suppliers':_0xd9abe6[_0x1034ea(0x213)],'customer':_0x5d4b8d['length'],'master_shop':_0x338ac9,'language':_0x4ec83a,'sale_QTY':_0x247328[0x0],'purchases_QTY':_0x53be71[0x0],'sales_return_QTY':_0x4cd2ce[0x0],'purchases_return_QTY':_0x94d53e[0x0],'transfer_table':_0x36e2f2,'product_cnt':_0x1c4357});}}}}}catch(_0x258ee8){console['log'](_0x258ee8);}}),router[a0_0x21e3b1(0x215)](a0_0x21e3b1(0x1f9),auth,async(_0x795347,_0x599d97)=>{const _0x599a49=a0_0x21e3b1;try{const _0x5104f1=_0x795347[_0x599a49(0x208)],_0x263a4e=await staff[_0x599a49(0x1e8)]({'email':_0x5104f1[_0x599a49(0x1e6)]}),_0x2144d0=await sales_sa[_0x599a49(0x1eb)]([{'$match':{'sales_staff_id':_0x263a4e[_0x599a49(0x1f7)][_0x599a49(0x22a)](),'paid':_0x599a49(0x248)}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x599d97[_0x599a49(0x1dd)](_0x2144d0);}catch(_0x11ea54){_0x599d97[_0x599a49(0x1dd)](_0x11ea54);}}),router[a0_0x21e3b1(0x215)](a0_0x21e3b1(0x24a),auth,async(_0x331a9e,_0x6b6d46)=>{const _0x32d927=a0_0x21e3b1;try{const _0x406534=_0x331a9e[_0x32d927(0x208)],_0x18ad62=await staff['findOne']({'email':_0x406534[_0x32d927(0x1e6)]}),_0x4db40b=await sales_sa[_0x32d927(0x1dc)]({'sales_staff_id':_0x18ad62['_id'],'paid':_0x32d927(0x248)});_0x6b6d46[_0x32d927(0x1dd)](_0x4db40b);}catch(_0x17d155){_0x6b6d46['json'](_0x17d155);}}),router[a0_0x21e3b1(0x245)](a0_0x21e3b1(0x1e7),auth,async(_0x5e0139,_0x59f1e5)=>{const _0x19aa4e=a0_0x21e3b1;try{const {sttaff_id:_0x27dff0,warehouse:_0xf5e507,account_category:_0x29ce66}=_0x5e0139[_0x19aa4e(0x208)],_0x3e1ace=await sales_order[_0x19aa4e(0x1eb)]([{'$match':{'accounting_account_id':_0x27dff0,'accounting_account_confirm':_0x19aa4e(0x23d)}}]);_0x59f1e5[_0x19aa4e(0x1dd)](_0x3e1ace);}catch(_0x3b4129){}}),router[a0_0x21e3b1(0x215)](a0_0x21e3b1(0x1e5),auth,async(_0x44d084,_0x360b5a)=>{const _0x4f96ff=a0_0x21e3b1;try{const _0x3c7304=_0x44d084[_0x4f96ff(0x208)],_0x3b4aed=await staff[_0x4f96ff(0x1e8)]({'email':_0x3c7304['email']}),_0x34d13c=await sales_sa[_0x4f96ff(0x1dc)]({'sales_staff_id':_0x3b4aed[_0x4f96ff(0x1f7)],'paid':'True'});_0x360b5a[_0x4f96ff(0x1dd)](_0x34d13c);}catch(_0x16951b){_0x360b5a[_0x4f96ff(0x1dd)](_0x16951b);}}),router['get'](a0_0x21e3b1(0x1df),auth,async(_0x2f3a22,_0x59f3d6)=>{const _0x121e85=a0_0x21e3b1;try{const _0x3262bd=_0x2f3a22[_0x121e85(0x208)],_0x2b2886=await staff[_0x121e85(0x1e8)]({'email':_0x3262bd['email']}),_0x338053=await sales_sa[_0x121e85(0x1eb)]([{'$match':{'sales_staff_id':_0x2b2886[_0x121e85(0x1f7)]['valueOf'](),'paid':'True'}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x59f3d6['json'](_0x338053);}catch(_0x109bd8){_0x59f3d6[_0x121e85(0x1dd)](_0x109bd8);}}),router[a0_0x21e3b1(0x245)](a0_0x21e3b1(0x1d0),auth,async(_0x37aa42,_0x415aa2)=>{const _0x7e4855=a0_0x21e3b1;try{const {id:_0x51a3a2,price:_0x38f06d}=_0x37aa42[_0x7e4855(0x1da)],_0x289728=await sales_sa[_0x7e4855(0x1c0)](_0x51a3a2);_0x289728[_0x7e4855(0x231)]=_0x7e4855(0x212),_0x289728[_0x7e4855(0x246)]=parseFloat(_0x38f06d);const _0x3e31ff=await _0x289728['save']();_0x415aa2[_0x7e4855(0x1dd)](_0x3e31ff);}catch(_0x5afeb3){_0x415aa2['json'](_0x5afeb3);}}),router['get'](a0_0x21e3b1(0x24a),auth,async(_0xde4dbc,_0x57366c)=>{const _0x3e8f56=a0_0x21e3b1;try{const _0x17bb3c=_0xde4dbc[_0x3e8f56(0x208)],_0x2fb5ca=await staff[_0x3e8f56(0x1e8)]({'email':_0x17bb3c[_0x3e8f56(0x1e6)]}),_0x15df1b=await sales_sa[_0x3e8f56(0x1dc)]({'sales_staff_id':_0x2fb5ca[_0x3e8f56(0x1f7)],'paid':_0x3e8f56(0x248)});_0x57366c[_0x3e8f56(0x1dd)](_0x15df1b);}catch(_0x5321a1){_0x57366c[_0x3e8f56(0x1dd)](_0x5321a1);}}),router[a0_0x21e3b1(0x215)](a0_0x21e3b1(0x214),auth,async(_0x12f815,_0x162360)=>{const _0x8c039a=a0_0x21e3b1;try{const _0x2a1ab7=_0x12f815[_0x8c039a(0x208)],_0x1ddaea=await staff['findOne']({'email':_0x2a1ab7[_0x8c039a(0x1e6)]}),_0xfbec9a=await sales_sa[_0x8c039a(0x1eb)]([{'$match':{'sales_staff_id':_0x1ddaea[_0x8c039a(0x1f7)]['valueOf']()}},{'$unwind':'$sale_product'},{'$group':{'_id':null,'sumprice':{'$sum':'$sale_product.price'},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':[_0x8c039a(0x235),_0x8c039a(0x225)]},0x2]}}}]);_0x162360[_0x8c039a(0x1dd)](_0xfbec9a);}catch(_0x40247d){_0x162360[_0x8c039a(0x1dd)](_0x40247d);}}),router[a0_0x21e3b1(0x215)]('/my_inv',auth,async(_0x14dedc,_0x5e020b)=>{const _0x50bcef=a0_0x21e3b1;try{const _0x1b428c=_0x14dedc['user'],_0x45d77c=await staff['findOne']({'email':_0x1b428c[_0x50bcef(0x1e6)]}),_0x531e3f=await staff[_0x50bcef(0x1eb)]([{'$match':{'email':_0x1b428c[_0x50bcef(0x1e6)]}},{'$unwind':_0x50bcef(0x233)},{'$match':{'product_list.isConfirm':_0x50bcef(0x23c)}},{'$group':{'_id':null,'totalQTY':{'$sum':_0x50bcef(0x241)}}}]);_0x5e020b[_0x50bcef(0x1dd)](_0x531e3f);}catch(_0x13fe0b){_0x5e020b[_0x50bcef(0x1dd)](_0x13fe0b);}}),router[a0_0x21e3b1(0x215)](a0_0x21e3b1(0x1ea),auth,async(_0x1c0d5d,_0x855e3b)=>{const _0x166c27=a0_0x21e3b1;try{const _0xdff03f=_0x1c0d5d[_0x166c27(0x208)],_0x4c51b3=await staff[_0x166c27(0x1e8)]({'email':_0xdff03f[_0x166c27(0x1e6)]}),_0x377ef2=await sales_sa[_0x166c27(0x1eb)]([{'$match':{'sales_staff_id':_0x4c51b3['_id'][_0x166c27(0x22a)]()}},{'$unwind':_0x166c27(0x23f)},{'$group':{'_id':_0x166c27(0x20b),'totalQuantity':{'$sum':'$sale_product.quantity'},'date':{'$first':_0x166c27(0x20b)}}},{'$sort':{'date':0x1}}]);_0x855e3b['json'](_0x377ef2);}catch(_0x4ed6db){_0x855e3b[_0x166c27(0x1dd)](_0x4ed6db);}}),router[a0_0x21e3b1(0x215)](a0_0x21e3b1(0x21d),auth,async(_0x8f63f,_0x269425)=>{const _0x2da3bd=a0_0x21e3b1;try{const _0x2ad0e4=_0x8f63f[_0x2da3bd(0x208)],_0x3ab2d5=await staff[_0x2da3bd(0x1e8)]({'email':_0x2ad0e4['email']}),_0x4d539b=await sales_sa[_0x2da3bd(0x1eb)]([{'$match':{'sales_staff_id':_0x3ab2d5[_0x2da3bd(0x1f7)]['valueOf']()}},{'$unwind':_0x2da3bd(0x23f)},{'$group':{'_id':_0x2da3bd(0x20b),'totalPrice':{'$sum':'$sale_product.totalprice'},'date':{'$first':_0x2da3bd(0x20b)}}},{'$sort':{'date':0x1}}]);_0x269425['json'](_0x4d539b);}catch(_0x2b7e63){_0x269425[_0x2da3bd(0x1dd)](_0x2b7e63);}}),router['post'](a0_0x21e3b1(0x228),auth,async(_0x4e10da,_0x342037)=>{const _0x519ccd=a0_0x21e3b1;try{const {date_today:_0x2fa438,first_month:_0x10551b,first_year:_0x444592}=_0x4e10da[_0x519ccd(0x1da)],{sttaff_id:_0x59379a}=_0x4e10da[_0x519ccd(0x208)],_0x25a8f9=await product[_0x519ccd(0x1eb)]([{'$group':{'_id':{'brand':_0x519ccd(0x23b),'category':_0x519ccd(0x1c8)},'products':{'$push':{'name':_0x519ccd(0x1ef),'product_code':'$product_code'}}}},{'$sort':{'_id.category':-0x1,'_id.brand':0x1}}]);var _0x522d11=[];_0x522d11[_0x519ccd(0x1ff)]=[];for(let _0x22fc66=0x0;_0x22fc66<=_0x25a8f9[_0x519ccd(0x213)]-0x1;_0x22fc66++){const _0xc4bfb9=_0x25a8f9[_0x22fc66];_0x522d11[_0x519ccd(0x1ff)]['push'](_0xc4bfb9);}const _0x47374b=await sales_sa[_0x519ccd(0x1eb)]([{'$match':{'date':{'$gte':_0x10551b,'$lte':_0x2fa438},'sales_staff_id':_0x59379a,'sale_product.isFG':_0x519ccd(0x23d),'status_data':_0x519ccd(0x23d)}},{'$unwind':'$sale_product'},{'$match':{'sale_product.isFG':_0x519ccd(0x23d)}},{'$lookup':{'from':_0x519ccd(0x20f),'localField':'sale_product.product_code','foreignField':_0x519ccd(0x21c),'as':_0x519ccd(0x1c1)}},{'$unwind':'$product_info'},{'$group':{'_id':{'category':_0x519ccd(0x209),'brand':_0x519ccd(0x207)},'totalQty':{'$sum':_0x519ccd(0x1d4)},'products':{'$push':{'qty':_0x519ccd(0x1d4),'NetPrice':_0x519ccd(0x216),'discount':_0x519ccd(0x22b),'adj_discount':_0x519ccd(0x23e),'product_details':{'prod_name':_0x519ccd(0x22d),'product_code':_0x519ccd(0x1e1),'category':'$product_info.category','brand':'$product_info.brand','gross_price':_0x519ccd(0x1f2)}}}}},{'$unwind':_0x519ccd(0x236)},{'$group':{'_id':{'category':'$products.product_details.category','brand':_0x519ccd(0x244)},'totalQty':{'$sum':_0x519ccd(0x21b)},'totalGross':{'$sum':{'$multiply':[_0x519ccd(0x21b),'$products.product_details.gross_price']}},'NetPrice':{'$sum':_0x519ccd(0x221)},'discount':{'$sum':_0x519ccd(0x219)},'adj_discount':{'$sum':'$products.adj_discount'},'product_details':{'$first':_0x519ccd(0x1f8)}}},{'$group':{'_id':{'category':_0x519ccd(0x224),'brand':_0x519ccd(0x204)},'totalQty':{'$sum':_0x519ccd(0x22c)},'totalGross':{'$sum':'$totalGross'},'NetPrice':{'$sum':'$NetPrice'},'discount':{'$sum':_0x519ccd(0x1ce)},'adj_discount':{'$sum':_0x519ccd(0x1d8)},'products':{'$push':{'qty':_0x519ccd(0x22c),'category':_0x519ccd(0x224),'brand':'$_id.brand','product_details':_0x519ccd(0x229)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x170519=[];_0x170519[_0x519ccd(0x200)]={};for(let _0x5c3e56=0x0;_0x5c3e56<=_0x47374b[_0x519ccd(0x213)]-0x1;_0x5c3e56++){const _0x333ab4=_0x47374b[_0x5c3e56];!_0x170519['sales_sa_month'][_0x333ab4['_id'][_0x519ccd(0x243)]]&&(_0x170519[_0x519ccd(0x200)][_0x333ab4['_id'][_0x519ccd(0x243)]]={}),!_0x170519[_0x519ccd(0x200)][_0x333ab4['_id']['brand']][_0x333ab4[_0x519ccd(0x1f7)][_0x519ccd(0x20a)]]&&(_0x170519[_0x519ccd(0x200)][_0x333ab4[_0x519ccd(0x1f7)]['brand']][_0x333ab4[_0x519ccd(0x1f7)]['category']]={}),!_0x170519[_0x519ccd(0x200)][_0x333ab4[_0x519ccd(0x1f7)]['brand']][_0x333ab4[_0x519ccd(0x1f7)]['category']][_0x519ccd(0x1c2)]&&(_0x170519['sales_sa_month'][_0x333ab4[_0x519ccd(0x1f7)][_0x519ccd(0x243)]][_0x333ab4[_0x519ccd(0x1f7)][_0x519ccd(0x20a)]][_0x519ccd(0x1c2)]=0x0),!_0x170519[_0x519ccd(0x200)][_0x333ab4[_0x519ccd(0x1f7)][_0x519ccd(0x243)]][_0x333ab4[_0x519ccd(0x1f7)][_0x519ccd(0x20a)]][_0x519ccd(0x22f)]&&(_0x170519['sales_sa_month'][_0x333ab4['_id'][_0x519ccd(0x243)]][_0x333ab4['_id'][_0x519ccd(0x20a)]][_0x519ccd(0x22f)]=0x0),_0x170519[_0x519ccd(0x200)][_0x333ab4['_id'][_0x519ccd(0x243)]][_0x333ab4['_id'][_0x519ccd(0x20a)]][_0x519ccd(0x1c2)]=_0x333ab4[_0x519ccd(0x1d3)],_0x170519[_0x519ccd(0x200)][_0x333ab4[_0x519ccd(0x1f7)][_0x519ccd(0x243)]][_0x333ab4[_0x519ccd(0x1f7)]['category']][_0x519ccd(0x22f)]=_0x333ab4[_0x519ccd(0x237)];}const _0x94c7e5=await sales_sa[_0x519ccd(0x1eb)]([{'$match':{'date':{'$gte':_0x444592,'$lte':_0x2fa438},'sales_staff_id':_0x59379a,'sale_product.isFG':_0x519ccd(0x23d),'status_data':_0x519ccd(0x23d)}},{'$unwind':'$sale_product'},{'$match':{'sale_product.isFG':_0x519ccd(0x23d)}},{'$lookup':{'from':_0x519ccd(0x20f),'localField':_0x519ccd(0x205),'foreignField':_0x519ccd(0x21c),'as':'product_info'}},{'$unwind':_0x519ccd(0x1c4)},{'$group':{'_id':{'category':_0x519ccd(0x209),'brand':'$product_info.brand'},'totalQty':{'$sum':_0x519ccd(0x1d4)},'products':{'$push':{'qty':_0x519ccd(0x1d4),'NetPrice':'$sale_product.totalprice','discount':'$sale_product.discount','adj_discount':_0x519ccd(0x23e),'product_details':{'prod_name':'$product_info.name','product_code':'$product_info.product_code','category':'$product_info.category','brand':_0x519ccd(0x207),'gross_price':_0x519ccd(0x1f2)}}}}},{'$unwind':_0x519ccd(0x236)},{'$group':{'_id':{'category':_0x519ccd(0x210),'brand':_0x519ccd(0x244)},'totalQty':{'$sum':_0x519ccd(0x21b)},'totalGross':{'$sum':{'$multiply':[_0x519ccd(0x21b),_0x519ccd(0x223)]}},'NetPrice':{'$sum':_0x519ccd(0x221)},'discount':{'$sum':_0x519ccd(0x219)},'adj_discount':{'$sum':_0x519ccd(0x1e2)},'product_details':{'$first':_0x519ccd(0x1f8)}}},{'$group':{'_id':{'category':_0x519ccd(0x224),'brand':_0x519ccd(0x204)},'totalQty':{'$sum':_0x519ccd(0x22c)},'totalGross':{'$sum':'$totalGross'},'NetPrice':{'$sum':'$NetPrice'},'discount':{'$sum':_0x519ccd(0x1ce)},'adj_discount':{'$sum':_0x519ccd(0x1d8)},'products':{'$push':{'qty':'$totalQty','category':_0x519ccd(0x224),'brand':_0x519ccd(0x204),'product_details':'$product_details'}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x492a74=[];_0x492a74['sales_sa_year']={};for(let _0x27d471=0x0;_0x27d471<=_0x94c7e5[_0x519ccd(0x213)]-0x1;_0x27d471++){const _0x6f1f6f=_0x94c7e5[_0x27d471];!_0x492a74['sales_sa_year'][_0x6f1f6f['_id'][_0x519ccd(0x243)]]&&(_0x492a74[_0x519ccd(0x1fa)][_0x6f1f6f['_id']['brand']]={}),!_0x492a74[_0x519ccd(0x1fa)][_0x6f1f6f[_0x519ccd(0x1f7)][_0x519ccd(0x243)]][_0x6f1f6f['_id'][_0x519ccd(0x20a)]]&&(_0x492a74[_0x519ccd(0x1fa)][_0x6f1f6f[_0x519ccd(0x1f7)][_0x519ccd(0x243)]][_0x6f1f6f[_0x519ccd(0x1f7)][_0x519ccd(0x20a)]]={}),!_0x492a74['sales_sa_year'][_0x6f1f6f[_0x519ccd(0x1f7)][_0x519ccd(0x243)]][_0x6f1f6f[_0x519ccd(0x1f7)][_0x519ccd(0x20a)]][_0x519ccd(0x1c2)]&&(_0x492a74[_0x519ccd(0x1fa)][_0x6f1f6f[_0x519ccd(0x1f7)][_0x519ccd(0x243)]][_0x6f1f6f[_0x519ccd(0x1f7)][_0x519ccd(0x20a)]][_0x519ccd(0x1c2)]=0x0),!_0x492a74[_0x519ccd(0x1fa)][_0x6f1f6f[_0x519ccd(0x1f7)][_0x519ccd(0x243)]][_0x6f1f6f['_id']['category']][_0x519ccd(0x22f)]&&(_0x492a74[_0x519ccd(0x1fa)][_0x6f1f6f['_id']['brand']][_0x6f1f6f['_id']['category']][_0x519ccd(0x22f)]=0x0),_0x492a74['sales_sa_year'][_0x6f1f6f[_0x519ccd(0x1f7)][_0x519ccd(0x243)]][_0x6f1f6f[_0x519ccd(0x1f7)]['category']][_0x519ccd(0x1c2)]=_0x6f1f6f['totalQty'],_0x492a74['sales_sa_year'][_0x6f1f6f[_0x519ccd(0x1f7)][_0x519ccd(0x243)]][_0x6f1f6f['_id'][_0x519ccd(0x20a)]][_0x519ccd(0x22f)]=_0x6f1f6f[_0x519ccd(0x237)];}_0x342037['json']({'product':_0x522d11[_0x519ccd(0x1ff)],'month_data':_0x170519[_0x519ccd(0x200)],'year_data':_0x492a74[_0x519ccd(0x1fa)]});}catch(_0xaae4a){console[_0x519ccd(0x23a)](_0xaae4a);}}),router['post']('/sales_data__admin_dashboard',auth,async(_0x56e3ab,_0x1edcc8)=>{const _0xcac3ed=a0_0x21e3b1;try{const {date_today:_0x24f0ce,first_month:_0x476e58,first_year:_0x2600fb}=_0x56e3ab['body'],{sttaff_id:_0x3d78e8}=_0x56e3ab[_0xcac3ed(0x208)],_0x4e7262=await product['aggregate']([{'$group':{'_id':{'brand':_0xcac3ed(0x23b),'category':_0xcac3ed(0x1c8)},'products':{'$push':{'name':_0xcac3ed(0x1ef),'product_code':_0xcac3ed(0x1e0)}}}},{'$sort':{'_id.category':-0x1,'_id.brand':0x1}}]);var _0x3be431=[];_0x3be431[_0xcac3ed(0x1ff)]=[];for(let _0x474f5f=0x0;_0x474f5f<=_0x4e7262['length']-0x1;_0x474f5f++){const _0x245dbd=_0x4e7262[_0x474f5f];_0x3be431['cat_brand'][_0xcac3ed(0x211)](_0x245dbd);}const _0x305b52=await sales_sa[_0xcac3ed(0x1eb)]([{'$match':{'date':{'$gte':_0x476e58,'$lte':_0x24f0ce},'sale_product.isFG':_0xcac3ed(0x23d),'status_data':'false'}},{'$unwind':'$sale_product'},{'$match':{'sale_product.isFG':'false'}},{'$lookup':{'from':_0xcac3ed(0x20f),'localField':'sale_product.product_code','foreignField':'product_code','as':'product_info'}},{'$unwind':'$product_info'},{'$group':{'_id':{'category':_0xcac3ed(0x209),'brand':_0xcac3ed(0x207)},'totalQty':{'$sum':'$sale_product.real_qty_unit_val'},'products':{'$push':{'qty':_0xcac3ed(0x1d4),'NetPrice':_0xcac3ed(0x216),'discount':_0xcac3ed(0x22b),'adj_discount':_0xcac3ed(0x23e),'product_details':{'prod_name':_0xcac3ed(0x22d),'product_code':_0xcac3ed(0x1e1),'category':_0xcac3ed(0x209),'brand':_0xcac3ed(0x207),'gross_price':'$product_info.gross_price'}}}}},{'$unwind':_0xcac3ed(0x236)},{'$group':{'_id':{'category':_0xcac3ed(0x210),'brand':'$products.product_details.brand'},'totalQty':{'$sum':_0xcac3ed(0x21b)},'totalGross':{'$sum':{'$multiply':['$products.qty',_0xcac3ed(0x223)]}},'NetPrice':{'$sum':_0xcac3ed(0x221)},'discount':{'$sum':'$products.discount'},'adj_discount':{'$sum':_0xcac3ed(0x1e2)},'product_details':{'$first':_0xcac3ed(0x1f8)}}},{'$group':{'_id':{'category':_0xcac3ed(0x224),'brand':'$_id.brand'},'totalQty':{'$sum':_0xcac3ed(0x22c)},'totalGross':{'$sum':_0xcac3ed(0x1c7)},'NetPrice':{'$sum':_0xcac3ed(0x1e4)},'discount':{'$sum':'$discount'},'adj_discount':{'$sum':'$adj_discount'},'products':{'$push':{'qty':_0xcac3ed(0x22c),'category':_0xcac3ed(0x224),'brand':_0xcac3ed(0x204),'product_details':_0xcac3ed(0x229)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x382d4b=[];_0x382d4b[_0xcac3ed(0x200)]={};for(let _0x55ff61=0x0;_0x55ff61<=_0x305b52[_0xcac3ed(0x213)]-0x1;_0x55ff61++){const _0x2304ec=_0x305b52[_0x55ff61];!_0x382d4b[_0xcac3ed(0x200)][_0x2304ec['_id'][_0xcac3ed(0x243)]]&&(_0x382d4b[_0xcac3ed(0x200)][_0x2304ec['_id']['brand']]={}),!_0x382d4b[_0xcac3ed(0x200)][_0x2304ec[_0xcac3ed(0x1f7)][_0xcac3ed(0x243)]][_0x2304ec[_0xcac3ed(0x1f7)]['category']]&&(_0x382d4b[_0xcac3ed(0x200)][_0x2304ec[_0xcac3ed(0x1f7)][_0xcac3ed(0x243)]][_0x2304ec['_id'][_0xcac3ed(0x20a)]]={}),!_0x382d4b[_0xcac3ed(0x200)][_0x2304ec['_id'][_0xcac3ed(0x243)]][_0x2304ec[_0xcac3ed(0x1f7)][_0xcac3ed(0x20a)]][_0xcac3ed(0x1c2)]&&(_0x382d4b[_0xcac3ed(0x200)][_0x2304ec['_id'][_0xcac3ed(0x243)]][_0x2304ec[_0xcac3ed(0x1f7)][_0xcac3ed(0x20a)]][_0xcac3ed(0x1c2)]=0x0),!_0x382d4b[_0xcac3ed(0x200)][_0x2304ec[_0xcac3ed(0x1f7)][_0xcac3ed(0x243)]][_0x2304ec[_0xcac3ed(0x1f7)][_0xcac3ed(0x20a)]][_0xcac3ed(0x22f)]&&(_0x382d4b['sales_sa_month'][_0x2304ec[_0xcac3ed(0x1f7)]['brand']][_0x2304ec[_0xcac3ed(0x1f7)][_0xcac3ed(0x20a)]][_0xcac3ed(0x22f)]=0x0),_0x382d4b[_0xcac3ed(0x200)][_0x2304ec[_0xcac3ed(0x1f7)]['brand']][_0x2304ec[_0xcac3ed(0x1f7)][_0xcac3ed(0x20a)]][_0xcac3ed(0x1c2)]=_0x2304ec[_0xcac3ed(0x1d3)],_0x382d4b[_0xcac3ed(0x200)][_0x2304ec[_0xcac3ed(0x1f7)]['brand']][_0x2304ec[_0xcac3ed(0x1f7)][_0xcac3ed(0x20a)]][_0xcac3ed(0x22f)]=_0x2304ec['NetPrice'];}const _0x43ea97=await sales_sa[_0xcac3ed(0x1eb)]([{'$match':{'date':{'$gte':_0x2600fb,'$lte':_0x24f0ce},'sale_product.isFG':_0xcac3ed(0x23d),'status_data':'false'}},{'$unwind':_0xcac3ed(0x23f)},{'$match':{'sale_product.isFG':_0xcac3ed(0x23d)}},{'$lookup':{'from':_0xcac3ed(0x20f),'localField':_0xcac3ed(0x205),'foreignField':_0xcac3ed(0x21c),'as':_0xcac3ed(0x1c1)}},{'$unwind':_0xcac3ed(0x1c4)},{'$group':{'_id':{'category':_0xcac3ed(0x209),'brand':_0xcac3ed(0x207)},'totalQty':{'$sum':_0xcac3ed(0x1d4)},'products':{'$push':{'qty':'$sale_product.real_qty_unit_val','NetPrice':_0xcac3ed(0x216),'discount':'$sale_product.discount','adj_discount':_0xcac3ed(0x23e),'product_details':{'prod_name':'$product_info.name','product_code':_0xcac3ed(0x1e1),'category':_0xcac3ed(0x209),'brand':_0xcac3ed(0x207),'gross_price':_0xcac3ed(0x1f2)}}}}},{'$unwind':_0xcac3ed(0x236)},{'$group':{'_id':{'category':_0xcac3ed(0x210),'brand':_0xcac3ed(0x244)},'totalQty':{'$sum':'$products.qty'},'totalGross':{'$sum':{'$multiply':[_0xcac3ed(0x21b),_0xcac3ed(0x223)]}},'NetPrice':{'$sum':'$products.NetPrice'},'discount':{'$sum':_0xcac3ed(0x219)},'adj_discount':{'$sum':_0xcac3ed(0x1e2)},'product_details':{'$first':_0xcac3ed(0x1f8)}}},{'$group':{'_id':{'category':_0xcac3ed(0x224),'brand':_0xcac3ed(0x204)},'totalQty':{'$sum':_0xcac3ed(0x22c)},'totalGross':{'$sum':_0xcac3ed(0x1c7)},'NetPrice':{'$sum':_0xcac3ed(0x1e4)},'discount':{'$sum':_0xcac3ed(0x1ce)},'adj_discount':{'$sum':_0xcac3ed(0x1d8)},'products':{'$push':{'qty':_0xcac3ed(0x22c),'category':_0xcac3ed(0x224),'brand':_0xcac3ed(0x204),'product_details':_0xcac3ed(0x229)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x2f2b54=[];_0x2f2b54[_0xcac3ed(0x1fa)]={};for(let _0x4beda6=0x0;_0x4beda6<=_0x43ea97[_0xcac3ed(0x213)]-0x1;_0x4beda6++){const _0x57631a=_0x43ea97[_0x4beda6];!_0x2f2b54['sales_sa_year'][_0x57631a[_0xcac3ed(0x1f7)][_0xcac3ed(0x243)]]&&(_0x2f2b54['sales_sa_year'][_0x57631a[_0xcac3ed(0x1f7)]['brand']]={}),!_0x2f2b54['sales_sa_year'][_0x57631a[_0xcac3ed(0x1f7)][_0xcac3ed(0x243)]][_0x57631a[_0xcac3ed(0x1f7)][_0xcac3ed(0x20a)]]&&(_0x2f2b54['sales_sa_year'][_0x57631a[_0xcac3ed(0x1f7)][_0xcac3ed(0x243)]][_0x57631a[_0xcac3ed(0x1f7)][_0xcac3ed(0x20a)]]={}),!_0x2f2b54[_0xcac3ed(0x1fa)][_0x57631a[_0xcac3ed(0x1f7)][_0xcac3ed(0x243)]][_0x57631a[_0xcac3ed(0x1f7)][_0xcac3ed(0x20a)]]['qty']&&(_0x2f2b54['sales_sa_year'][_0x57631a[_0xcac3ed(0x1f7)]['brand']][_0x57631a['_id']['category']]['qty']=0x0),!_0x2f2b54[_0xcac3ed(0x1fa)][_0x57631a['_id'][_0xcac3ed(0x243)]][_0x57631a[_0xcac3ed(0x1f7)][_0xcac3ed(0x20a)]][_0xcac3ed(0x22f)]&&(_0x2f2b54['sales_sa_year'][_0x57631a['_id'][_0xcac3ed(0x243)]][_0x57631a[_0xcac3ed(0x1f7)]['category']][_0xcac3ed(0x22f)]=0x0),_0x2f2b54[_0xcac3ed(0x1fa)][_0x57631a['_id'][_0xcac3ed(0x243)]][_0x57631a[_0xcac3ed(0x1f7)][_0xcac3ed(0x20a)]]['qty']=_0x57631a[_0xcac3ed(0x1d3)],_0x2f2b54[_0xcac3ed(0x1fa)][_0x57631a[_0xcac3ed(0x1f7)][_0xcac3ed(0x243)]][_0x57631a[_0xcac3ed(0x1f7)]['category']][_0xcac3ed(0x22f)]=_0x57631a['NetPrice'];}_0x1edcc8[_0xcac3ed(0x1dd)]({'product':_0x3be431['cat_brand'],'month_data':_0x382d4b[_0xcac3ed(0x200)],'year_data':_0x2f2b54[_0xcac3ed(0x1fa)]});}catch(_0xf065f0){console[_0xcac3ed(0x23a)](_0xf065f0);}}),router[a0_0x21e3b1(0x215)]('/fg_line',auth,async(_0x3c0426,_0x3b350f)=>{const _0x18680b=a0_0x21e3b1;try{const _0x29c6df=await purchases_finished[_0x18680b(0x1eb)]([{'$unwind':_0x18680b(0x218)},{'$group':{'_id':_0x18680b(0x20b),'totalQuantity':{'$sum':_0x18680b(0x20e)},'date':{'$first':_0x18680b(0x20b)}}},{'$sort':{'date':0x1}}]);_0x3b350f[_0x18680b(0x1dd)](_0x29c6df);}catch(_0x18a43f){_0x3b350f[_0x18680b(0x1dd)](_0x18a43f);}}),router['get']('/fg_out_line',auth,async(_0x4a69ef,_0x107682)=>{const _0x5e0a5f=a0_0x21e3b1;try{const _0x39032c=await sales_finished['aggregate']([{'$match':{'finalize':_0x5e0a5f(0x248)}},{'$unwind':_0x5e0a5f(0x23f)},{'$group':{'_id':_0x5e0a5f(0x20b),'totalQuantity':{'$sum':_0x5e0a5f(0x249)},'date':{'$first':_0x5e0a5f(0x20b)}}},{'$sort':{'date':0x1}}]);_0x107682[_0x5e0a5f(0x1dd)](_0x39032c);}catch(_0x2c5a50){_0x107682[_0x5e0a5f(0x1dd)](_0x2c5a50);}}),module[a0_0x21e3b1(0x206)]=router;