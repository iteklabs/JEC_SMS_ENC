function a0_0x5897(){const _0x357459=['aggregate','true','$to_warehouse','index_acc','user','$product','sad','product_code','$sumprice','Spanish','$sale_product.price','40312hXRZer','$sale_product.quantity','language','valueOf','$products.product_details.category','English\x20(US)','../middleware/auth','$products.product_details.brand','express','net','$products.discount','12395eXvpyH','$total_amount','$totalGross','$product_info.category','totalQty','fss','log','account_category','/sales_chart','$product_info.product_code','German','false','cat_brand','$discount','sales_sa_year','render','Arabic\x20(ae)','Hindi','$product.quantity','$adj_discount','$_id.brand','$product_code','$totalQty','errors','$product_details','1818XKmYcm','../models/all_models','paid','$_id.category','$products.qty','$return_sale.sale_qty','$sale_product.adj_discount','NetPrice','$product_list','collection_price','find','product_info','Raw\x20Materials','$product.from_quantity','$products.NetPrice','3904628LZGgUr','Finished\x20Goods','$sale_product.totalprice','$product.to_quantity','json','exports','Router','$brand','$return_product','/price_chart','150QxwYpb','$return_sale','/pending_data','$count','body','flash','get','1489856POaxSg','push','$date','length','$product_list.product_stock','$products','products','rsm','$sale_product.discount','/sales_data_dashboard','False','category','sales_sa_month','/pending_data_table','$from_warehouse','French','$sale_product','email','$sale_product.real_qty_unit_val','_id','sale_product.product_code','qty','491749ZjPjWE','$product_info','post','294836mKLJNv','$products.product_details','530961hRlhBi','index','$product.product_name','/my_inv','$products.adj_discount','findOne','$total_price','save','True','warehouse_category','success','/paid_data_table','$product_info.brand','$NetPrice','Chinese','$product_info.gross_price','index_sa','/index','brand','Arabic','$category','$product_info.name','$products.product_details.gross_price','findById'];a0_0x5897=function(){return _0x357459;};return a0_0x5897();}const a0_0x5061e0=a0_0x802f;(function(_0x207ce6,_0x23c66d){const _0x2d4562=a0_0x802f,_0x3cf21d=_0x207ce6();while(!![]){try{const _0x39bc71=-parseInt(_0x2d4562(0x132))/0x1+-parseInt(_0x2d4562(0x135))/0x2+parseInt(_0x2d4562(0x137))/0x3+parseInt(_0x2d4562(0x11c))/0x4+parseInt(_0x2d4562(0xe3))/0x5*(-parseInt(_0x2d4562(0x115))/0x6)+-parseInt(_0x2d4562(0x10b))/0x7+-parseInt(_0x2d4562(0xd8))/0x8*(-parseInt(_0x2d4562(0xfc))/0x9);if(_0x39bc71===_0x23c66d)break;else _0x3cf21d['push'](_0x3cf21d['shift']());}catch(_0xf6c62b){_0x3cf21d['push'](_0x3cf21d['shift']());}}}(a0_0x5897,0x4b49f));function a0_0x802f(_0x1a07e5,_0x443b57){const _0x589730=a0_0x5897();return a0_0x802f=function(_0x802f82,_0x5eb81f){_0x802f82=_0x802f82-0xd4;let _0x2ae3fe=_0x589730[_0x802f82];return _0x2ae3fe;},a0_0x802f(_0x1a07e5,_0x443b57);}const express=require(a0_0x5061e0(0xe0)),app=express(),router=express[a0_0x5061e0(0x111)](),auth=require(a0_0x5061e0(0xde)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order}=require(a0_0x5061e0(0xfd)),users=require('../public/language/languages.json');router[a0_0x5061e0(0x11b)](a0_0x5061e0(0x148),auth,async(_0x1ee21f,_0x194eaa)=>{const _0x222f54=a0_0x5061e0;try{const {username:_0x1fea74,email:_0x2018d6,role:_0x4c4370}=_0x1ee21f['user'],_0xf1d837=_0x1ee21f[_0x222f54(0x153)],_0x4f50eb=await master_shop[_0x222f54(0x106)](),_0x3de5da=await profile['findOne']({'email':_0xf1d837[_0x222f54(0x12d)]});if(_0x4f50eb[0x0][_0x222f54(0xda)]==_0x222f54(0xdd))var _0x564a2d=users['English'];else{if(_0x4f50eb[0x0][_0x222f54(0xda)]==_0x222f54(0xf4))var _0x564a2d=users[_0x222f54(0xf4)];else{if(_0x4f50eb[0x0][_0x222f54(0xda)]==_0x222f54(0xed))var _0x564a2d=users[_0x222f54(0xed)];else{if(_0x4f50eb[0x0][_0x222f54(0xda)]==_0x222f54(0xd6))var _0x564a2d=users['Spanish'];else{if(_0x4f50eb[0x0][_0x222f54(0xda)]==_0x222f54(0x12b))var _0x564a2d=users['French'];else{if(_0x4f50eb[0x0]['language']=='Portuguese\x20(BR)')var _0x564a2d=users['Portuguese'];else{if(_0x4f50eb[0x0][_0x222f54(0xda)]==_0x222f54(0x145))var _0x564a2d=users['Chinese'];else{if(_0x4f50eb[0x0][_0x222f54(0xda)]==_0x222f54(0xf3))var _0x564a2d=users[_0x222f54(0x14a)];}}}}}}}if(_0xf1d837['account_category']=='wm'){var _0x442345;if(_0xf1d837[_0x222f54(0x140)]==_0x222f54(0x108)){const _0x5685e8=await product[_0x222f54(0x106)]({'product_category':_0x222f54(0x108)});_0x442345=_0x5685e8['length'];}else{if(_0xf1d837[_0x222f54(0x140)]==_0x222f54(0x10c)){const _0x1e5e3e=await product[_0x222f54(0x106)]({'product_category':_0x222f54(0x10c)});_0x442345=_0x1e5e3e[_0x222f54(0x11f)];}else{const _0x48bece=await product[_0x222f54(0x106)]();_0x442345=_0x48bece['length'];}}const _0x4f85b0=await sales[_0x222f54(0x14f)]([{'$group':{'_id':null,'total_price':{'$sum':_0x222f54(0x13d)}}}]),_0x59ba27=await sales['aggregate']([{'$unwind':'$sale_product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x222f54(0xd9)}}}]),_0x4efc70=await sales_return[_0x222f54(0x14f)]([{'$group':{'_id':null,'total':{'$sum':_0x222f54(0xe4)}}}]),_0x35a4ab=await sales_return[_0x222f54(0x14f)]([{'$unwind':'$return_sale'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x222f54(0x101)}}}]),_0x1fc6f3=await purchases[_0x222f54(0x14f)]([{'$group':{'_id':null,'total_amount':{'$sum':_0x222f54(0xe4)}}}]),_0x53721c=await purchases_return[_0x222f54(0x14f)]([{'$group':{'_id':null,'total':{'$sum':_0x222f54(0xe4)}}}]),_0x2b9266=await purchases_return[_0x222f54(0x14f)]([{'$unwind':_0x222f54(0x113)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_product.return_qty'}}}]),_0x2f65b9=await purchases[_0x222f54(0x14f)]([{'$unwind':_0x222f54(0x154)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$product.quantity'}}}]),_0x50ee0c=await purchases['aggregate']([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x51737f=await sales[_0x222f54(0x14f)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x4c4c65=await transfers[_0x222f54(0x14f)]([{'$unwind':_0x222f54(0x154)},{'$group':{'_id':_0x222f54(0x139),'fromWarehouse':{'$first':_0x222f54(0x12a)},'toWareHouse':{'$first':_0x222f54(0x151)},'FromtotalQuantity':{'$sum':_0x222f54(0x109)},'TototalQuantity':{'$sum':_0x222f54(0x10e)}}}]),_0x9fe9ef=await categories['find'](),_0x5e0bbf=await product[_0x222f54(0x106)](),_0x5cbb4f=await suppliers[_0x222f54(0x106)](),_0x20bb92=await customer[_0x222f54(0x106)]();_0x194eaa[_0x222f54(0xf2)](_0x222f54(0x138),{'success':_0x1ee21f['flash']('success'),'errors':_0x1ee21f['flash'](_0x222f54(0xfa)),'role':_0xf1d837,'profile':_0x3de5da,'sale':_0x4f85b0[0x0],'sales_return':_0x4efc70[0x0],'purchases':_0x1fc6f3[0x0],'purchases_return':_0x53721c[0x0],'purchases_table':_0x50ee0c,'sales_table':_0x51737f,'categories':_0x9fe9ef[_0x222f54(0x11f)],'product':_0x5e0bbf['length'],'suppliers':_0x5cbb4f[_0x222f54(0x11f)],'customer':_0x20bb92['length'],'master_shop':_0x4f50eb,'language':_0x564a2d,'sale_QTY':_0x59ba27[0x0],'purchases_QTY':_0x2f65b9[0x0],'sales_return_QTY':_0x35a4ab[0x0],'purchases_return_QTY':_0x2b9266[0x0],'transfer_table':_0x4c4c65,'product_cnt':_0x442345});}else{if(_0xf1d837[_0x222f54(0xea)]=='sa'){const _0x307ab0=await staff[_0x222f54(0x13c)]({'email':_0xf1d837[_0x222f54(0x12d)]}),_0x99b49a=await sales_sa['find']({'sales_staff_id':_0x307ab0['_id']}),_0xe36b7a=await sales_sa[_0x222f54(0x106)]({'sales_staff_id':_0x307ab0[_0x222f54(0x12f)],'paid':_0x222f54(0x13f)}),_0x532b60=await sales_sa['find']({'sales_staff_id':_0x307ab0[_0x222f54(0x12f)],'paid':'False'}),_0xba098f=await sales_sa[_0x222f54(0x14f)]([{'$match':{'sales_staff_id':_0x307ab0[_0x222f54(0x12f)][_0x222f54(0xdb)]()}},{'$unwind':'$sale_product'},{'$group':{'_id':null,'sumprice':{'$sum':'$sale_product.price'},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':[_0x222f54(0xd5),'$count']},0x2]}}}]),_0x571e14=await staff[_0x222f54(0x14f)]([{'$match':{'email':_0xf1d837[_0x222f54(0x12d)]}},{'$unwind':_0x222f54(0x104)},{'$group':{'_id':null,'totalQTY':{'$sum':_0x222f54(0x120)}}}]);_0x194eaa['render'](_0x222f54(0x147),{'success':_0x1ee21f[_0x222f54(0x11a)](_0x222f54(0x141)),'errors':_0x1ee21f[_0x222f54(0x11a)](_0x222f54(0xfa)),'role':_0xf1d837,'profile':_0x3de5da,'master_shop':_0x4f50eb,'language':_0x564a2d,'cntPaid':_0xe36b7a,'cntNotPaid':_0x532b60,'avg_price':_0xba098f[0x0],'my_stock':_0x571e14[0x0],'staff_arr':_0x307ab0});}else{if(_0xf1d837[_0x222f54(0xea)]=='acc'){const _0x3d327c=await staff[_0x222f54(0x13c)]({'email':_0xf1d837['email']});_0x194eaa['render'](_0x222f54(0x152),{'success':_0x1ee21f[_0x222f54(0x11a)]('success'),'errors':_0x1ee21f['flash'](_0x222f54(0xfa)),'role':_0xf1d837,'profile':_0x3de5da,'master_shop':_0x4f50eb,'language':_0x564a2d}),_0x194eaa[_0x222f54(0x10f)](_0x3d327c);}else{if(_0xf1d837[_0x222f54(0xea)]==_0x222f54(0x155)||_0xf1d837[_0x222f54(0xea)]==_0x222f54(0x123)||_0xf1d837['account_category']==_0x222f54(0xe8)){const _0x3430d6=await staff[_0x222f54(0x13c)]({'email':_0xf1d837[_0x222f54(0x12d)]});_0x194eaa['render']('index_asd',{'success':_0x1ee21f[_0x222f54(0x11a)]('success'),'errors':_0x1ee21f['flash'](_0x222f54(0xfa)),'role':_0xf1d837,'profile':_0x3de5da,'master_shop':_0x4f50eb,'language':_0x564a2d});}else{var _0x442345;if(_0xf1d837[_0x222f54(0x140)]==_0x222f54(0x108)){const _0x2d8e48=await product['find']({'product_category':'Raw\x20Materials'});_0x442345=_0x2d8e48[_0x222f54(0x11f)];}else{if(_0xf1d837['warehouse_category']=='Finished\x20Goods'){const _0x1b7beb=await product[_0x222f54(0x106)]({'product_category':_0x222f54(0x10c)});_0x442345=_0x1b7beb[_0x222f54(0x11f)];}else{const _0x27cb88=await product[_0x222f54(0x106)]();_0x442345=_0x27cb88[_0x222f54(0x11f)];}}const _0x9a0003=await sales[_0x222f54(0x14f)]([{'$group':{'_id':null,'total_price':{'$sum':'$total_price'}}}]),_0x2973af=await sales['aggregate']([{'$unwind':_0x222f54(0x12c)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$sale_product.quantity'}}}]),_0xb6511a=await sales_return['aggregate']([{'$group':{'_id':null,'total':{'$sum':_0x222f54(0xe4)}}}]),_0x515a39=await sales_return[_0x222f54(0x14f)]([{'$unwind':_0x222f54(0x116)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x222f54(0x101)}}}]),_0x2ebd0a=await purchases[_0x222f54(0x14f)]([{'$group':{'_id':null,'total_amount':{'$sum':_0x222f54(0xe4)}}}]),_0x7bdee6=await purchases_return[_0x222f54(0x14f)]([{'$group':{'_id':null,'total':{'$sum':_0x222f54(0xe4)}}}]),_0x42e0b5=await purchases_return[_0x222f54(0x14f)]([{'$unwind':_0x222f54(0x113)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_product.return_qty'}}}]),_0x365ad3=await purchases[_0x222f54(0x14f)]([{'$unwind':'$product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x222f54(0xf5)}}}]),_0xe465b9=await purchases[_0x222f54(0x14f)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0xc8a654=await sales[_0x222f54(0x14f)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x26cb0e=await transfers[_0x222f54(0x14f)]([{'$unwind':_0x222f54(0x154)},{'$group':{'_id':_0x222f54(0x139),'fromWarehouse':{'$first':_0x222f54(0x12a)},'toWareHouse':{'$first':'$to_warehouse'},'FromtotalQuantity':{'$sum':_0x222f54(0x109)},'TototalQuantity':{'$sum':_0x222f54(0x10e)}}}]),_0x33a5fd=await categories[_0x222f54(0x106)](),_0x42e563=await product[_0x222f54(0x106)](),_0x17ac04=await suppliers['find'](),_0x114af4=await customer[_0x222f54(0x106)]();_0x194eaa[_0x222f54(0xf2)](_0x222f54(0x138),{'success':_0x1ee21f[_0x222f54(0x11a)](_0x222f54(0x141)),'errors':_0x1ee21f[_0x222f54(0x11a)]('errors'),'role':_0xf1d837,'profile':_0x3de5da,'sale':_0x9a0003[0x0],'sales_return':_0xb6511a[0x0],'purchases':_0x2ebd0a[0x0],'purchases_return':_0x7bdee6[0x0],'purchases_table':_0xe465b9,'sales_table':_0xc8a654,'categories':_0x33a5fd['length'],'product':_0x42e563['length'],'suppliers':_0x17ac04['length'],'customer':_0x114af4['length'],'master_shop':_0x4f50eb,'language':_0x564a2d,'sale_QTY':_0x2973af[0x0],'purchases_QTY':_0x365ad3[0x0],'sales_return_QTY':_0x515a39[0x0],'purchases_return_QTY':_0x42e0b5[0x0],'transfer_table':_0x26cb0e,'product_cnt':_0x442345});}}}}}catch(_0x3129e3){console[_0x222f54(0xe9)](_0x3129e3);}}),router['get'](a0_0x5061e0(0x129),auth,async(_0xb94baa,_0x1da177)=>{const _0x4805b3=a0_0x5061e0;try{const _0x28dd43=_0xb94baa[_0x4805b3(0x153)],_0x4ffc20=await staff[_0x4805b3(0x13c)]({'email':_0x28dd43[_0x4805b3(0x12d)]}),_0x5bb2aa=await sales_sa[_0x4805b3(0x14f)]([{'$match':{'sales_staff_id':_0x4ffc20[_0x4805b3(0x12f)][_0x4805b3(0xdb)](),'paid':_0x4805b3(0x126)}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x1da177[_0x4805b3(0x10f)](_0x5bb2aa);}catch(_0x1822ab){_0x1da177[_0x4805b3(0x10f)](_0x1822ab);}}),router[a0_0x5061e0(0x11b)]('/pending_data',auth,async(_0x5bbe32,_0x157ea5)=>{const _0x4e399c=a0_0x5061e0;try{const _0x551cd2=_0x5bbe32['user'],_0x22f2c4=await staff[_0x4e399c(0x13c)]({'email':_0x551cd2[_0x4e399c(0x12d)]}),_0x5b94fe=await sales_sa[_0x4e399c(0x106)]({'sales_staff_id':_0x22f2c4[_0x4e399c(0x12f)],'paid':'False'});_0x157ea5[_0x4e399c(0x10f)](_0x5b94fe);}catch(_0x364d84){_0x157ea5[_0x4e399c(0x10f)](_0x364d84);}}),router['post']('/get_count',auth,async(_0x47dcee,_0x4ba04a)=>{const _0x32f04a=a0_0x5061e0;try{const {sttaff_id:_0x33d400,warehouse:_0x8aba34,account_category:_0x139575}=_0x47dcee[_0x32f04a(0x153)],_0x2c8a67=await sales_order['aggregate']([{'$match':{'accounting_account_id':_0x33d400,'accounting_account_confirm':_0x32f04a(0xee)}}]);_0x4ba04a[_0x32f04a(0x10f)](_0x2c8a67);}catch(_0x59d959){}}),router[a0_0x5061e0(0x11b)](a0_0x5061e0(0x142),auth,async(_0x174c92,_0x51f641)=>{const _0x1c2aa3=a0_0x5061e0;try{const _0x516fe2=_0x174c92[_0x1c2aa3(0x153)],_0x20a990=await staff['findOne']({'email':_0x516fe2[_0x1c2aa3(0x12d)]}),_0x241c08=await sales_sa['find']({'sales_staff_id':_0x20a990[_0x1c2aa3(0x12f)],'paid':_0x1c2aa3(0x13f)});_0x51f641[_0x1c2aa3(0x10f)](_0x241c08);}catch(_0x173793){_0x51f641[_0x1c2aa3(0x10f)](_0x173793);}}),router[a0_0x5061e0(0x11b)]('/paid_data',auth,async(_0x4dc101,_0x4f7de0)=>{const _0x1da18d=a0_0x5061e0;try{const _0x7e5f64=_0x4dc101[_0x1da18d(0x153)],_0x512f77=await staff[_0x1da18d(0x13c)]({'email':_0x7e5f64[_0x1da18d(0x12d)]}),_0x16f270=await sales_sa[_0x1da18d(0x14f)]([{'$match':{'sales_staff_id':_0x512f77[_0x1da18d(0x12f)][_0x1da18d(0xdb)](),'paid':_0x1da18d(0x13f)}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x4f7de0['json'](_0x16f270);}catch(_0x15f619){_0x4f7de0['json'](_0x15f619);}}),router[a0_0x5061e0(0x134)]('/update_data',auth,async(_0x40754f,_0x288600)=>{const _0xeb67ce=a0_0x5061e0;try{const {id:_0x449a2c,price:_0x44865a}=_0x40754f[_0xeb67ce(0x119)],_0x32164e=await sales_sa[_0xeb67ce(0x14e)](_0x449a2c);_0x32164e[_0xeb67ce(0xfe)]=_0xeb67ce(0x13f),_0x32164e[_0xeb67ce(0x105)]=parseFloat(_0x44865a);const _0x52c153=await _0x32164e[_0xeb67ce(0x13e)]();_0x288600[_0xeb67ce(0x10f)](_0x52c153);}catch(_0x594850){_0x288600[_0xeb67ce(0x10f)](_0x594850);}}),router[a0_0x5061e0(0x11b)](a0_0x5061e0(0x117),auth,async(_0x21af9d,_0x304cc8)=>{const _0x53ea01=a0_0x5061e0;try{const _0x30a8f6=_0x21af9d[_0x53ea01(0x153)],_0x4028d4=await staff[_0x53ea01(0x13c)]({'email':_0x30a8f6[_0x53ea01(0x12d)]}),_0x560239=await sales_sa[_0x53ea01(0x106)]({'sales_staff_id':_0x4028d4[_0x53ea01(0x12f)],'paid':_0x53ea01(0x126)});_0x304cc8[_0x53ea01(0x10f)](_0x560239);}catch(_0x97e314){_0x304cc8['json'](_0x97e314);}}),router['get']('/avg_data',auth,async(_0x5ef52a,_0x10b629)=>{const _0x2eef15=a0_0x5061e0;try{const _0x29dd1d=_0x5ef52a[_0x2eef15(0x153)],_0x18f574=await staff[_0x2eef15(0x13c)]({'email':_0x29dd1d[_0x2eef15(0x12d)]}),_0x3fc3d9=await sales_sa[_0x2eef15(0x14f)]([{'$match':{'sales_staff_id':_0x18f574[_0x2eef15(0x12f)]['valueOf']()}},{'$unwind':'$sale_product'},{'$group':{'_id':null,'sumprice':{'$sum':_0x2eef15(0xd7)},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':['$sumprice',_0x2eef15(0x118)]},0x2]}}}]);_0x10b629[_0x2eef15(0x10f)](_0x3fc3d9);}catch(_0x358374){_0x10b629[_0x2eef15(0x10f)](_0x358374);}}),router['get'](a0_0x5061e0(0x13a),auth,async(_0xb5ca4f,_0x299cc5)=>{const _0x57e185=a0_0x5061e0;try{const _0x1cb91d=_0xb5ca4f[_0x57e185(0x153)],_0x1ef560=await staff[_0x57e185(0x13c)]({'email':_0x1cb91d[_0x57e185(0x12d)]}),_0x1cd41d=await staff[_0x57e185(0x14f)]([{'$match':{'email':_0x1cb91d[_0x57e185(0x12d)]}},{'$unwind':_0x57e185(0x104)},{'$match':{'product_list.isConfirm':_0x57e185(0x150)}},{'$group':{'_id':null,'totalQTY':{'$sum':'$product_list.product_stock'}}}]);_0x299cc5[_0x57e185(0x10f)](_0x1cd41d);}catch(_0x33c01b){_0x299cc5['json'](_0x33c01b);}}),router['get'](a0_0x5061e0(0xeb),auth,async(_0x4ea088,_0x826226)=>{const _0x3b325f=a0_0x5061e0;try{const _0xc2f29e=_0x4ea088[_0x3b325f(0x153)],_0x44c542=await staff[_0x3b325f(0x13c)]({'email':_0xc2f29e[_0x3b325f(0x12d)]}),_0x565305=await sales_sa[_0x3b325f(0x14f)]([{'$match':{'sales_staff_id':_0x44c542['_id'][_0x3b325f(0xdb)]()}},{'$unwind':'$sale_product'},{'$group':{'_id':_0x3b325f(0x11e),'totalQuantity':{'$sum':_0x3b325f(0xd9)},'date':{'$first':_0x3b325f(0x11e)}}},{'$sort':{'date':0x1}}]);_0x826226[_0x3b325f(0x10f)](_0x565305);}catch(_0x2994d4){_0x826226[_0x3b325f(0x10f)](_0x2994d4);}}),router[a0_0x5061e0(0x11b)](a0_0x5061e0(0x114),auth,async(_0x32c171,_0x568e7c)=>{const _0x44c8e2=a0_0x5061e0;try{const _0x5ebaa1=_0x32c171['user'],_0x307d66=await staff[_0x44c8e2(0x13c)]({'email':_0x5ebaa1[_0x44c8e2(0x12d)]}),_0x582af9=await sales_sa[_0x44c8e2(0x14f)]([{'$match':{'sales_staff_id':_0x307d66[_0x44c8e2(0x12f)]['valueOf']()}},{'$unwind':_0x44c8e2(0x12c)},{'$group':{'_id':_0x44c8e2(0x11e),'totalPrice':{'$sum':_0x44c8e2(0x10d)},'date':{'$first':_0x44c8e2(0x11e)}}},{'$sort':{'date':0x1}}]);_0x568e7c['json'](_0x582af9);}catch(_0x5f2f0b){_0x568e7c[_0x44c8e2(0x10f)](_0x5f2f0b);}}),router['post'](a0_0x5061e0(0x125),auth,async(_0x40fe39,_0x5b3138)=>{const _0x1ac044=a0_0x5061e0;try{const {date_today:_0x1c9946,first_month:_0x477a2b,first_year:_0x6f4266}=_0x40fe39[_0x1ac044(0x119)],{sttaff_id:_0x5562a9}=_0x40fe39[_0x1ac044(0x153)],_0x54b386=await product[_0x1ac044(0x14f)]([{'$group':{'_id':{'brand':_0x1ac044(0x112),'category':_0x1ac044(0x14b)},'products':{'$push':{'name':'$name','product_code':_0x1ac044(0xf8)}}}},{'$sort':{'_id.category':-0x1,'_id.brand':0x1}}]);var _0x35e5c4=[];_0x35e5c4[_0x1ac044(0xef)]=[];for(let _0x5ac4c4=0x0;_0x5ac4c4<=_0x54b386[_0x1ac044(0x11f)]-0x1;_0x5ac4c4++){const _0x58ca8f=_0x54b386[_0x5ac4c4];_0x35e5c4[_0x1ac044(0xef)][_0x1ac044(0x11d)](_0x58ca8f);}const _0x40807e=await sales_sa[_0x1ac044(0x14f)]([{'$match':{'date':{'$gte':_0x477a2b,'$lte':_0x1c9946},'sales_staff_id':_0x5562a9,'sale_product.isFG':_0x1ac044(0xee),'status_data':_0x1ac044(0xee)}},{'$unwind':_0x1ac044(0x12c)},{'$match':{'sale_product.isFG':_0x1ac044(0xee)}},{'$lookup':{'from':_0x1ac044(0x122),'localField':_0x1ac044(0x130),'foreignField':_0x1ac044(0xd4),'as':_0x1ac044(0x107)}},{'$unwind':_0x1ac044(0x133)},{'$group':{'_id':{'category':'$product_info.category','brand':_0x1ac044(0x143)},'totalQty':{'$sum':'$sale_product.real_qty_unit_val'},'products':{'$push':{'qty':_0x1ac044(0x12e),'NetPrice':_0x1ac044(0x10d),'discount':_0x1ac044(0x124),'adj_discount':_0x1ac044(0x102),'product_details':{'prod_name':_0x1ac044(0x14c),'product_code':_0x1ac044(0xec),'category':_0x1ac044(0xe6),'brand':'$product_info.brand','gross_price':'$product_info.gross_price'}}}}},{'$unwind':_0x1ac044(0x121)},{'$group':{'_id':{'category':_0x1ac044(0xdc),'brand':_0x1ac044(0xdf)},'totalQty':{'$sum':_0x1ac044(0x100)},'totalGross':{'$sum':{'$multiply':[_0x1ac044(0x100),'$products.product_details.gross_price']}},'NetPrice':{'$sum':_0x1ac044(0x10a)},'discount':{'$sum':_0x1ac044(0xe2)},'adj_discount':{'$sum':_0x1ac044(0x13b)},'product_details':{'$first':_0x1ac044(0x136)}}},{'$group':{'_id':{'category':_0x1ac044(0xff),'brand':_0x1ac044(0xf7)},'totalQty':{'$sum':_0x1ac044(0xf9)},'totalGross':{'$sum':'$totalGross'},'NetPrice':{'$sum':_0x1ac044(0x144)},'discount':{'$sum':_0x1ac044(0xf0)},'adj_discount':{'$sum':_0x1ac044(0xf6)},'products':{'$push':{'qty':_0x1ac044(0xf9),'category':_0x1ac044(0xff),'brand':_0x1ac044(0xf7),'product_details':_0x1ac044(0xfb)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x571137=[];_0x571137[_0x1ac044(0x128)]={};for(let _0x59434a=0x0;_0x59434a<=_0x40807e['length']-0x1;_0x59434a++){const _0x46ef05=_0x40807e[_0x59434a];!_0x571137[_0x1ac044(0x128)][_0x46ef05[_0x1ac044(0x12f)][_0x1ac044(0x149)]]&&(_0x571137[_0x1ac044(0x128)][_0x46ef05[_0x1ac044(0x12f)]['brand']]={}),!_0x571137['sales_sa_month'][_0x46ef05[_0x1ac044(0x12f)][_0x1ac044(0x149)]][_0x46ef05[_0x1ac044(0x12f)][_0x1ac044(0x127)]]&&(_0x571137[_0x1ac044(0x128)][_0x46ef05[_0x1ac044(0x12f)][_0x1ac044(0x149)]][_0x46ef05[_0x1ac044(0x12f)][_0x1ac044(0x127)]]={}),!_0x571137[_0x1ac044(0x128)][_0x46ef05['_id'][_0x1ac044(0x149)]][_0x46ef05[_0x1ac044(0x12f)][_0x1ac044(0x127)]]['qty']&&(_0x571137[_0x1ac044(0x128)][_0x46ef05[_0x1ac044(0x12f)]['brand']][_0x46ef05['_id']['category']][_0x1ac044(0x131)]=0x0),!_0x571137[_0x1ac044(0x128)][_0x46ef05[_0x1ac044(0x12f)][_0x1ac044(0x149)]][_0x46ef05[_0x1ac044(0x12f)][_0x1ac044(0x127)]][_0x1ac044(0xe1)]&&(_0x571137[_0x1ac044(0x128)][_0x46ef05['_id']['brand']][_0x46ef05[_0x1ac044(0x12f)]['category']]['net']=0x0),_0x571137[_0x1ac044(0x128)][_0x46ef05[_0x1ac044(0x12f)]['brand']][_0x46ef05[_0x1ac044(0x12f)][_0x1ac044(0x127)]][_0x1ac044(0x131)]=_0x46ef05[_0x1ac044(0xe7)],_0x571137['sales_sa_month'][_0x46ef05[_0x1ac044(0x12f)][_0x1ac044(0x149)]][_0x46ef05[_0x1ac044(0x12f)][_0x1ac044(0x127)]][_0x1ac044(0xe1)]=_0x46ef05[_0x1ac044(0x103)];}const _0x262d20=await sales_sa[_0x1ac044(0x14f)]([{'$match':{'date':{'$gte':_0x6f4266,'$lte':_0x1c9946},'sales_staff_id':_0x5562a9,'sale_product.isFG':'false','status_data':_0x1ac044(0xee)}},{'$unwind':_0x1ac044(0x12c)},{'$match':{'sale_product.isFG':_0x1ac044(0xee)}},{'$lookup':{'from':'products','localField':_0x1ac044(0x130),'foreignField':_0x1ac044(0xd4),'as':_0x1ac044(0x107)}},{'$unwind':_0x1ac044(0x133)},{'$group':{'_id':{'category':_0x1ac044(0xe6),'brand':'$product_info.brand'},'totalQty':{'$sum':_0x1ac044(0x12e)},'products':{'$push':{'qty':'$sale_product.real_qty_unit_val','NetPrice':'$sale_product.totalprice','discount':_0x1ac044(0x124),'adj_discount':_0x1ac044(0x102),'product_details':{'prod_name':_0x1ac044(0x14c),'product_code':_0x1ac044(0xec),'category':_0x1ac044(0xe6),'brand':_0x1ac044(0x143),'gross_price':_0x1ac044(0x146)}}}}},{'$unwind':_0x1ac044(0x121)},{'$group':{'_id':{'category':_0x1ac044(0xdc),'brand':_0x1ac044(0xdf)},'totalQty':{'$sum':'$products.qty'},'totalGross':{'$sum':{'$multiply':[_0x1ac044(0x100),_0x1ac044(0x14d)]}},'NetPrice':{'$sum':_0x1ac044(0x10a)},'discount':{'$sum':_0x1ac044(0xe2)},'adj_discount':{'$sum':_0x1ac044(0x13b)},'product_details':{'$first':_0x1ac044(0x136)}}},{'$group':{'_id':{'category':_0x1ac044(0xff),'brand':_0x1ac044(0xf7)},'totalQty':{'$sum':'$totalQty'},'totalGross':{'$sum':_0x1ac044(0xe5)},'NetPrice':{'$sum':_0x1ac044(0x144)},'discount':{'$sum':_0x1ac044(0xf0)},'adj_discount':{'$sum':_0x1ac044(0xf6)},'products':{'$push':{'qty':_0x1ac044(0xf9),'category':_0x1ac044(0xff),'brand':_0x1ac044(0xf7),'product_details':_0x1ac044(0xfb)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x59e21c=[];_0x59e21c['sales_sa_year']={};for(let _0x52a6ca=0x0;_0x52a6ca<=_0x262d20['length']-0x1;_0x52a6ca++){const _0x1b109c=_0x262d20[_0x52a6ca];!_0x59e21c[_0x1ac044(0xf1)][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x149)]]&&(_0x59e21c[_0x1ac044(0xf1)][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x149)]]={}),!_0x59e21c['sales_sa_year'][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x149)]][_0x1b109c[_0x1ac044(0x12f)]['category']]&&(_0x59e21c[_0x1ac044(0xf1)][_0x1b109c['_id'][_0x1ac044(0x149)]][_0x1b109c[_0x1ac044(0x12f)]['category']]={}),!_0x59e21c[_0x1ac044(0xf1)][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x149)]][_0x1b109c[_0x1ac044(0x12f)]['category']]['qty']&&(_0x59e21c[_0x1ac044(0xf1)][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x149)]][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x127)]][_0x1ac044(0x131)]=0x0),!_0x59e21c[_0x1ac044(0xf1)][_0x1b109c['_id'][_0x1ac044(0x149)]][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x127)]]['net']&&(_0x59e21c[_0x1ac044(0xf1)][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x149)]][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x127)]]['net']=0x0),_0x59e21c[_0x1ac044(0xf1)][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x149)]][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x127)]][_0x1ac044(0x131)]=_0x1b109c[_0x1ac044(0xe7)],_0x59e21c[_0x1ac044(0xf1)][_0x1b109c[_0x1ac044(0x12f)]['brand']][_0x1b109c[_0x1ac044(0x12f)][_0x1ac044(0x127)]][_0x1ac044(0xe1)]=_0x1b109c[_0x1ac044(0x103)];}_0x5b3138['json']({'product':_0x35e5c4['cat_brand'],'month_data':_0x571137[_0x1ac044(0x128)],'year_data':_0x59e21c[_0x1ac044(0xf1)]});}catch(_0x3fe75e){console[_0x1ac044(0xe9)](_0x3fe75e);}}),module[a0_0x5061e0(0x110)]=router;