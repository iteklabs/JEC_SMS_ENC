function a0_0x59a9(_0x1339d0,_0x3e17ee){const _0x4cd4f4=a0_0x4cd4();return a0_0x59a9=function(_0x59a9d8,_0x140e1e){_0x59a9d8=_0x59a9d8-0x91;let _0x3b7586=_0x4cd4f4[_0x59a9d8];return _0x3b7586;},a0_0x59a9(_0x1339d0,_0x3e17ee);}function a0_0x4cd4(){const _0x55fec1=['$product_info.name','$sumprice','Router','$products.product_details.brand','$count','$total_price','errors','$product_list','body','9wBYvkd','product_info','$discount','acc','$return_sale.sale_qty','Arabic\x20(ae)','$return_sale','/get_count','index','$sale_product.adj_discount','21413700hdLgpd','NetPrice','../public/language/languages.json','German','$products.product_details.category','sales_sa_year','$NetPrice','6wVVYMJ','save','$products.product_details.gross_price','$products.adj_discount','post','Raw\x20Materials','16824mVtrnS','products','express','/paid_data','French','$product.product_name','$sale_product','valueOf','6344945pAFuyg','qty','Portuguese\x20(BR)','English\x20(US)','2gqRXLp','find','render','/avg_data','5258420DaOYbO','$sale_product.real_qty_unit_val','False','$total_amount','$product_info.category','867GwRvqa','/pending_data_table','../middleware/auth','$products.discount','$product_info.product_code','1152274UQCZdq','findById','get','$sale_product.totalprice','$products.qty','fss','$product_info.brand','findOne','11lOkCTg','sale_product.product_code','sad','1516040bWUHdd','totalQty','$product.from_quantity','push','../models/all_models','112javeid','$products','$product_info.gross_price','user','Chinese','$_id.category','aggregate','$totalGross','Spanish','$totalQty','$return_product','/pending_data','$date','warehouse_category','true','$product_list.product_stock','email','$product_details','$products.product_details','/price_chart','json','sales_sa_month','True','paid','net','cat_brand','$sale_product.quantity','language','/paid_data_table','$from_warehouse','/update_data','Portuguese','$products.NetPrice','$to_warehouse','1429363VyRKde','$_id.brand','$sale_product.price','category','$product.quantity','success','$return_product.return_qty','/sales_data_dashboard','brand','_id','$sale_product.discount','account_category','flash','English','$product','$name','Finished\x20Goods','Hindi','$product.to_quantity','$adj_discount','length','collection_price','63CbgGXo','false','$product_info'];a0_0x4cd4=function(){return _0x55fec1;};return a0_0x4cd4();}const a0_0xdb56e8=a0_0x59a9;(function(_0x3ceada,_0x2bd2f3){const _0x3783af=a0_0x59a9,_0xc082d2=_0x3ceada();while(!![]){try{const _0x12c35f=-parseInt(_0x3783af(0xa9))/0x1*(parseInt(_0x3783af(0xb7))/0x2)+-parseInt(_0x3783af(0xb2))/0x3*(-parseInt(_0x3783af(0x9d))/0x4)+parseInt(_0x3783af(0xa5))/0x5*(parseInt(_0x3783af(0x97))/0x6)+parseInt(_0x3783af(0xff))/0x7*(parseInt(_0x3783af(0xc2))/0x8)+-parseInt(_0x3783af(0x10b))/0x9*(-parseInt(_0x3783af(0xad))/0xa)+-parseInt(_0x3783af(0xbf))/0xb*(parseInt(_0x3783af(0x115))/0xc)+parseInt(_0x3783af(0xe9))/0xd*(-parseInt(_0x3783af(0xc7))/0xe);if(_0x12c35f===_0x2bd2f3)break;else _0xc082d2['push'](_0xc082d2['shift']());}catch(_0x23f50a){_0xc082d2['push'](_0xc082d2['shift']());}}}(a0_0x4cd4,0xdb9e1));const express=require(a0_0xdb56e8(0x9f)),app=express(),router=express[a0_0xdb56e8(0x104)](),auth=require(a0_0xdb56e8(0xb4)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order}=require(a0_0xdb56e8(0xc6)),users=require(a0_0xdb56e8(0x92));router['get']('/index',auth,async(_0x29c6cd,_0x13ad37)=>{const _0x293997=a0_0xdb56e8;try{const {username:_0x3e66bb,email:_0xa5b889,role:_0x320534}=_0x29c6cd[_0x293997(0xca)],_0x19d58e=_0x29c6cd[_0x293997(0xca)],_0x194f60=await master_shop[_0x293997(0xaa)](),_0x3ab6c0=await profile[_0x293997(0xbe)]({'email':_0x19d58e['email']});if(_0x194f60[0x0][_0x293997(0xe2)]==_0x293997(0xa8))var _0x160649=users[_0x293997(0xf6)];else{if(_0x194f60[0x0]['language']==_0x293997(0xfa))var _0x160649=users[_0x293997(0xfa)];else{if(_0x194f60[0x0]['language']==_0x293997(0x93))var _0x160649=users[_0x293997(0x93)];else{if(_0x194f60[0x0][_0x293997(0xe2)]==_0x293997(0xcf))var _0x160649=users[_0x293997(0xcf)];else{if(_0x194f60[0x0][_0x293997(0xe2)]==_0x293997(0xa1))var _0x160649=users[_0x293997(0xa1)];else{if(_0x194f60[0x0][_0x293997(0xe2)]==_0x293997(0xa7))var _0x160649=users[_0x293997(0xe6)];else{if(_0x194f60[0x0][_0x293997(0xe2)]=='Chinese')var _0x160649=users[_0x293997(0xcb)];else{if(_0x194f60[0x0]['language']==_0x293997(0x110))var _0x160649=users['Arabic'];}}}}}}}if(_0x19d58e[_0x293997(0xf4)]=='wm'){var _0xeb23fa;if(_0x19d58e['warehouse_category']=='Raw\x20Materials'){const _0x850a0f=await product['find']({'product_category':'Raw\x20Materials'});_0xeb23fa=_0x850a0f['length'];}else{if(_0x19d58e[_0x293997(0xd4)]==_0x293997(0xf9)){const _0x34e307=await product[_0x293997(0xaa)]({'product_category':'Finished\x20Goods'});_0xeb23fa=_0x34e307[_0x293997(0xfd)];}else{const _0x4c9040=await product[_0x293997(0xaa)]();_0xeb23fa=_0x4c9040[_0x293997(0xfd)];}}const _0x790b2d=await sales['aggregate']([{'$group':{'_id':null,'total_price':{'$sum':'$total_price'}}}]),_0x4fb093=await sales[_0x293997(0xcd)]([{'$unwind':_0x293997(0xa3)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x293997(0xe1)}}}]),_0x322dc8=await sales_return[_0x293997(0xcd)]([{'$group':{'_id':null,'total':{'$sum':_0x293997(0xb0)}}}]),_0x55cee9=await sales_return['aggregate']([{'$unwind':'$return_sale'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x293997(0x10f)}}}]),_0x5dc828=await purchases[_0x293997(0xcd)]([{'$group':{'_id':null,'total_amount':{'$sum':_0x293997(0xb0)}}}]),_0xc6f3c8=await purchases_return['aggregate']([{'$group':{'_id':null,'total':{'$sum':_0x293997(0xb0)}}}]),_0x2717e6=await purchases_return[_0x293997(0xcd)]([{'$unwind':_0x293997(0xd1)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_product.return_qty'}}}]),_0x36bbee=await purchases[_0x293997(0xcd)]([{'$unwind':_0x293997(0xf7)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$product.quantity'}}}]),_0x5d139c=await purchases[_0x293997(0xcd)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x5e2af9=await sales[_0x293997(0xcd)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x2efc02=await transfers[_0x293997(0xcd)]([{'$unwind':'$product'},{'$group':{'_id':_0x293997(0xa2),'fromWarehouse':{'$first':_0x293997(0xe4)},'toWareHouse':{'$first':_0x293997(0xe8)},'FromtotalQuantity':{'$sum':_0x293997(0xc4)},'TototalQuantity':{'$sum':_0x293997(0xfb)}}}]),_0x7a94ed=await categories[_0x293997(0xaa)](),_0x5a49fb=await product[_0x293997(0xaa)](),_0x40bff3=await suppliers[_0x293997(0xaa)](),_0x2f0652=await customer[_0x293997(0xaa)]();_0x13ad37[_0x293997(0xab)](_0x293997(0x113),{'success':_0x29c6cd[_0x293997(0xf5)](_0x293997(0xee)),'errors':_0x29c6cd[_0x293997(0xf5)](_0x293997(0x108)),'role':_0x19d58e,'profile':_0x3ab6c0,'sale':_0x790b2d[0x0],'sales_return':_0x322dc8[0x0],'purchases':_0x5dc828[0x0],'purchases_return':_0xc6f3c8[0x0],'purchases_table':_0x5d139c,'sales_table':_0x5e2af9,'categories':_0x7a94ed[_0x293997(0xfd)],'product':_0x5a49fb[_0x293997(0xfd)],'suppliers':_0x40bff3[_0x293997(0xfd)],'customer':_0x2f0652['length'],'master_shop':_0x194f60,'language':_0x160649,'sale_QTY':_0x4fb093[0x0],'purchases_QTY':_0x36bbee[0x0],'sales_return_QTY':_0x55cee9[0x0],'purchases_return_QTY':_0x2717e6[0x0],'transfer_table':_0x2efc02,'product_cnt':_0xeb23fa});}else{if(_0x19d58e[_0x293997(0xf4)]=='sa'){const _0x21a7da=await staff[_0x293997(0xbe)]({'email':_0x19d58e[_0x293997(0xd7)]}),_0x47a5cd=await sales_sa[_0x293997(0xaa)]({'sales_staff_id':_0x21a7da['_id']}),_0xb1bc44=await sales_sa[_0x293997(0xaa)]({'sales_staff_id':_0x21a7da[_0x293997(0xf2)],'paid':_0x293997(0xdd)}),_0x38ba40=await sales_sa[_0x293997(0xaa)]({'sales_staff_id':_0x21a7da['_id'],'paid':_0x293997(0xaf)}),_0x2d1d6c=await sales_sa[_0x293997(0xcd)]([{'$match':{'sales_staff_id':_0x21a7da[_0x293997(0xf2)]['valueOf']()}},{'$unwind':'$sale_product'},{'$group':{'_id':null,'sumprice':{'$sum':_0x293997(0xeb)},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':[_0x293997(0x103),_0x293997(0x106)]},0x2]}}}]),_0x4ec87d=await staff[_0x293997(0xcd)]([{'$match':{'email':_0x19d58e[_0x293997(0xd7)]}},{'$unwind':_0x293997(0x109)},{'$group':{'_id':null,'totalQTY':{'$sum':'$product_list.product_stock'}}}]);_0x13ad37[_0x293997(0xab)]('index_sa',{'success':_0x29c6cd[_0x293997(0xf5)]('success'),'errors':_0x29c6cd['flash'](_0x293997(0x108)),'role':_0x19d58e,'profile':_0x3ab6c0,'master_shop':_0x194f60,'language':_0x160649,'cntPaid':_0xb1bc44,'cntNotPaid':_0x38ba40,'avg_price':_0x2d1d6c[0x0],'my_stock':_0x4ec87d[0x0],'staff_arr':_0x21a7da});}else{if(_0x19d58e['account_category']==_0x293997(0x10e)){const _0x2441a3=await staff[_0x293997(0xbe)]({'email':_0x19d58e[_0x293997(0xd7)]});_0x13ad37[_0x293997(0xab)]('index_acc',{'success':_0x29c6cd[_0x293997(0xf5)](_0x293997(0xee)),'errors':_0x29c6cd[_0x293997(0xf5)]('errors'),'role':_0x19d58e,'profile':_0x3ab6c0,'master_shop':_0x194f60,'language':_0x160649}),_0x13ad37[_0x293997(0xdb)](_0x2441a3);}else{if(_0x19d58e[_0x293997(0xf4)]==_0x293997(0xc1)||_0x19d58e[_0x293997(0xf4)]=='rsm'||_0x19d58e[_0x293997(0xf4)]==_0x293997(0xbc)){const _0x349397=await staff[_0x293997(0xbe)]({'email':_0x19d58e['email']});_0x13ad37['render']('index_asd',{'success':_0x29c6cd['flash'](_0x293997(0xee)),'errors':_0x29c6cd[_0x293997(0xf5)](_0x293997(0x108)),'role':_0x19d58e,'profile':_0x3ab6c0,'master_shop':_0x194f60,'language':_0x160649});}else{var _0xeb23fa;if(_0x19d58e[_0x293997(0xd4)]==_0x293997(0x9c)){const _0x1529f7=await product[_0x293997(0xaa)]({'product_category':_0x293997(0x9c)});_0xeb23fa=_0x1529f7[_0x293997(0xfd)];}else{if(_0x19d58e[_0x293997(0xd4)]==_0x293997(0xf9)){const _0x53bb7e=await product[_0x293997(0xaa)]({'product_category':_0x293997(0xf9)});_0xeb23fa=_0x53bb7e[_0x293997(0xfd)];}else{const _0x3a54d3=await product[_0x293997(0xaa)]();_0xeb23fa=_0x3a54d3[_0x293997(0xfd)];}}const _0x5dad54=await sales[_0x293997(0xcd)]([{'$group':{'_id':null,'total_price':{'$sum':_0x293997(0x107)}}}]),_0x4462d5=await sales[_0x293997(0xcd)]([{'$unwind':_0x293997(0xa3)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x293997(0xe1)}}}]),_0x7ee371=await sales_return[_0x293997(0xcd)]([{'$group':{'_id':null,'total':{'$sum':_0x293997(0xb0)}}}]),_0x116b77=await sales_return[_0x293997(0xcd)]([{'$unwind':_0x293997(0x111)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x293997(0x10f)}}}]),_0x10e965=await purchases[_0x293997(0xcd)]([{'$group':{'_id':null,'total_amount':{'$sum':'$total_amount'}}}]),_0x2a9b53=await purchases_return['aggregate']([{'$group':{'_id':null,'total':{'$sum':_0x293997(0xb0)}}}]),_0x2a3af0=await purchases_return[_0x293997(0xcd)]([{'$unwind':_0x293997(0xd1)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x293997(0xef)}}}]),_0x3790bd=await purchases['aggregate']([{'$unwind':_0x293997(0xf7)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x293997(0xed)}}}]),_0x3ad0ce=await purchases[_0x293997(0xcd)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x39d481=await sales['aggregate']([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x373d85=await transfers[_0x293997(0xcd)]([{'$unwind':_0x293997(0xf7)},{'$group':{'_id':'$product.product_name','fromWarehouse':{'$first':_0x293997(0xe4)},'toWareHouse':{'$first':'$to_warehouse'},'FromtotalQuantity':{'$sum':'$product.from_quantity'},'TototalQuantity':{'$sum':'$product.to_quantity'}}}]),_0x371407=await categories['find'](),_0x667b4=await product[_0x293997(0xaa)](),_0x7d5a0c=await suppliers[_0x293997(0xaa)](),_0x323a7f=await customer[_0x293997(0xaa)]();_0x13ad37[_0x293997(0xab)](_0x293997(0x113),{'success':_0x29c6cd['flash'](_0x293997(0xee)),'errors':_0x29c6cd[_0x293997(0xf5)](_0x293997(0x108)),'role':_0x19d58e,'profile':_0x3ab6c0,'sale':_0x5dad54[0x0],'sales_return':_0x7ee371[0x0],'purchases':_0x10e965[0x0],'purchases_return':_0x2a9b53[0x0],'purchases_table':_0x3ad0ce,'sales_table':_0x39d481,'categories':_0x371407[_0x293997(0xfd)],'product':_0x667b4['length'],'suppliers':_0x7d5a0c[_0x293997(0xfd)],'customer':_0x323a7f['length'],'master_shop':_0x194f60,'language':_0x160649,'sale_QTY':_0x4462d5[0x0],'purchases_QTY':_0x3790bd[0x0],'sales_return_QTY':_0x116b77[0x0],'purchases_return_QTY':_0x2a3af0[0x0],'transfer_table':_0x373d85,'product_cnt':_0xeb23fa});}}}}}catch(_0x531000){console['log'](_0x531000);}}),router[a0_0xdb56e8(0xb9)](a0_0xdb56e8(0xb3),auth,async(_0x3d3388,_0x53805a)=>{const _0xb0c03d=a0_0xdb56e8;try{const _0x3c426e=_0x3d3388['user'],_0x5a05c6=await staff[_0xb0c03d(0xbe)]({'email':_0x3c426e[_0xb0c03d(0xd7)]}),_0x32f6a5=await sales_sa[_0xb0c03d(0xcd)]([{'$match':{'sales_staff_id':_0x5a05c6[_0xb0c03d(0xf2)][_0xb0c03d(0xa4)](),'paid':'False'}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x53805a[_0xb0c03d(0xdb)](_0x32f6a5);}catch(_0x5830e9){_0x53805a['json'](_0x5830e9);}}),router[a0_0xdb56e8(0xb9)](a0_0xdb56e8(0xd2),auth,async(_0x2bd9e2,_0x5e58c1)=>{const _0x2e8cae=a0_0xdb56e8;try{const _0x228860=_0x2bd9e2[_0x2e8cae(0xca)],_0x5a4344=await staff[_0x2e8cae(0xbe)]({'email':_0x228860['email']}),_0x27199f=await sales_sa[_0x2e8cae(0xaa)]({'sales_staff_id':_0x5a4344['_id'],'paid':'False'});_0x5e58c1['json'](_0x27199f);}catch(_0x1ae9a6){_0x5e58c1[_0x2e8cae(0xdb)](_0x1ae9a6);}}),router['post'](a0_0xdb56e8(0x112),auth,async(_0x227c26,_0x58cbd5)=>{const _0x20475a=a0_0xdb56e8;try{const {sttaff_id:_0x30ab4b,warehouse:_0x1d64ff,account_category:_0x2b5b0b}=_0x227c26['user'],_0x1d3b9b=await sales_order[_0x20475a(0xcd)]([{'$match':{'accounting_account_id':_0x30ab4b,'accounting_account_confirm':_0x20475a(0x100)}}]);_0x58cbd5['json'](_0x1d3b9b);}catch(_0x22d19e){}}),router['get'](a0_0xdb56e8(0xe3),auth,async(_0x170d81,_0x4a6864)=>{const _0x49125e=a0_0xdb56e8;try{const _0x4fe6fd=_0x170d81[_0x49125e(0xca)],_0x4e1375=await staff[_0x49125e(0xbe)]({'email':_0x4fe6fd['email']}),_0x25508c=await sales_sa[_0x49125e(0xaa)]({'sales_staff_id':_0x4e1375[_0x49125e(0xf2)],'paid':'True'});_0x4a6864[_0x49125e(0xdb)](_0x25508c);}catch(_0x516cf8){_0x4a6864[_0x49125e(0xdb)](_0x516cf8);}}),router[a0_0xdb56e8(0xb9)](a0_0xdb56e8(0xa0),auth,async(_0x59b4df,_0x26ac80)=>{const _0xa749=a0_0xdb56e8;try{const _0x4ab67a=_0x59b4df[_0xa749(0xca)],_0x311833=await staff[_0xa749(0xbe)]({'email':_0x4ab67a[_0xa749(0xd7)]}),_0x5087fd=await sales_sa['aggregate']([{'$match':{'sales_staff_id':_0x311833[_0xa749(0xf2)][_0xa749(0xa4)](),'paid':_0xa749(0xdd)}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x26ac80[_0xa749(0xdb)](_0x5087fd);}catch(_0x185e3e){_0x26ac80[_0xa749(0xdb)](_0x185e3e);}}),router[a0_0xdb56e8(0x9b)](a0_0xdb56e8(0xe5),auth,async(_0x273805,_0x245506)=>{const _0x52b278=a0_0xdb56e8;try{const {id:_0x5959db,price:_0x5d90e8}=_0x273805[_0x52b278(0x10a)],_0x3ece86=await sales_sa[_0x52b278(0xb8)](_0x5959db);_0x3ece86[_0x52b278(0xde)]=_0x52b278(0xdd),_0x3ece86[_0x52b278(0xfe)]=parseFloat(_0x5d90e8);const _0x27edc4=await _0x3ece86[_0x52b278(0x98)]();_0x245506['json'](_0x27edc4);}catch(_0x2b5ad4){_0x245506[_0x52b278(0xdb)](_0x2b5ad4);}}),router[a0_0xdb56e8(0xb9)](a0_0xdb56e8(0xd2),auth,async(_0x5a2f65,_0x50ed74)=>{const _0x59a010=a0_0xdb56e8;try{const _0x575fa6=_0x5a2f65['user'],_0x28164d=await staff['findOne']({'email':_0x575fa6[_0x59a010(0xd7)]}),_0x2a1f24=await sales_sa[_0x59a010(0xaa)]({'sales_staff_id':_0x28164d['_id'],'paid':_0x59a010(0xaf)});_0x50ed74['json'](_0x2a1f24);}catch(_0x4dff20){_0x50ed74[_0x59a010(0xdb)](_0x4dff20);}}),router[a0_0xdb56e8(0xb9)](a0_0xdb56e8(0xac),auth,async(_0x179ddb,_0xb7cdef)=>{const _0x83acd6=a0_0xdb56e8;try{const _0x53cdf1=_0x179ddb[_0x83acd6(0xca)],_0x4aad0a=await staff[_0x83acd6(0xbe)]({'email':_0x53cdf1[_0x83acd6(0xd7)]}),_0x50cbea=await sales_sa[_0x83acd6(0xcd)]([{'$match':{'sales_staff_id':_0x4aad0a[_0x83acd6(0xf2)][_0x83acd6(0xa4)]()}},{'$unwind':_0x83acd6(0xa3)},{'$group':{'_id':null,'sumprice':{'$sum':_0x83acd6(0xeb)},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':['$sumprice',_0x83acd6(0x106)]},0x2]}}}]);_0xb7cdef[_0x83acd6(0xdb)](_0x50cbea);}catch(_0x427c3e){_0xb7cdef[_0x83acd6(0xdb)](_0x427c3e);}}),router['get']('/my_inv',auth,async(_0x3ec668,_0x3baa85)=>{const _0x4499e5=a0_0xdb56e8;try{const _0x23ae48=_0x3ec668['user'],_0x1fc1cf=await staff[_0x4499e5(0xbe)]({'email':_0x23ae48[_0x4499e5(0xd7)]}),_0xa18fd8=await staff[_0x4499e5(0xcd)]([{'$match':{'email':_0x23ae48[_0x4499e5(0xd7)]}},{'$unwind':_0x4499e5(0x109)},{'$match':{'product_list.isConfirm':_0x4499e5(0xd5)}},{'$group':{'_id':null,'totalQTY':{'$sum':_0x4499e5(0xd6)}}}]);_0x3baa85[_0x4499e5(0xdb)](_0xa18fd8);}catch(_0x4a1126){_0x3baa85[_0x4499e5(0xdb)](_0x4a1126);}}),router['get']('/sales_chart',auth,async(_0x2463ab,_0x1b689c)=>{const _0xad69bf=a0_0xdb56e8;try{const _0x482a96=_0x2463ab[_0xad69bf(0xca)],_0x41ab2d=await staff[_0xad69bf(0xbe)]({'email':_0x482a96['email']}),_0x5ac1cf=await sales_sa[_0xad69bf(0xcd)]([{'$match':{'sales_staff_id':_0x41ab2d['_id']['valueOf']()}},{'$unwind':_0xad69bf(0xa3)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0xad69bf(0xe1)},'date':{'$first':_0xad69bf(0xd3)}}},{'$sort':{'date':0x1}}]);_0x1b689c['json'](_0x5ac1cf);}catch(_0x83d4a1){_0x1b689c[_0xad69bf(0xdb)](_0x83d4a1);}}),router[a0_0xdb56e8(0xb9)](a0_0xdb56e8(0xda),auth,async(_0xfc558f,_0x398fac)=>{const _0x49733e=a0_0xdb56e8;try{const _0x3afa19=_0xfc558f['user'],_0x3688d1=await staff[_0x49733e(0xbe)]({'email':_0x3afa19[_0x49733e(0xd7)]}),_0x3f34ca=await sales_sa[_0x49733e(0xcd)]([{'$match':{'sales_staff_id':_0x3688d1['_id'][_0x49733e(0xa4)]()}},{'$unwind':_0x49733e(0xa3)},{'$group':{'_id':_0x49733e(0xd3),'totalPrice':{'$sum':_0x49733e(0xba)},'date':{'$first':_0x49733e(0xd3)}}},{'$sort':{'date':0x1}}]);_0x398fac[_0x49733e(0xdb)](_0x3f34ca);}catch(_0x3d4ded){_0x398fac['json'](_0x3d4ded);}}),router['post'](a0_0xdb56e8(0xf0),auth,async(_0x4571f9,_0xeabbb9)=>{const _0x33002c=a0_0xdb56e8;try{const {date_today:_0x4a8417,first_month:_0x3c291f,first_year:_0x78d776}=_0x4571f9[_0x33002c(0x10a)],{sttaff_id:_0x4962e9}=_0x4571f9[_0x33002c(0xca)],_0x5e6fea=await product[_0x33002c(0xcd)]([{'$group':{'_id':{'brand':'$brand','category':'$category'},'products':{'$push':{'name':_0x33002c(0xf8),'product_code':'$product_code'}}}},{'$sort':{'_id.category':-0x1,'_id.brand':0x1}}]);var _0x1daec1=[];_0x1daec1[_0x33002c(0xe0)]=[];for(let _0x8cd395=0x0;_0x8cd395<=_0x5e6fea['length']-0x1;_0x8cd395++){const _0x12deec=_0x5e6fea[_0x8cd395];_0x1daec1['cat_brand'][_0x33002c(0xc5)](_0x12deec);}const _0x52869c=await sales_sa[_0x33002c(0xcd)]([{'$match':{'date':{'$gte':_0x3c291f,'$lte':_0x4a8417},'sales_staff_id':_0x4962e9,'sale_product.isFG':_0x33002c(0x100),'status_data':'false'}},{'$unwind':_0x33002c(0xa3)},{'$match':{'sale_product.isFG':_0x33002c(0x100)}},{'$lookup':{'from':_0x33002c(0x9e),'localField':_0x33002c(0xc0),'foreignField':'product_code','as':'product_info'}},{'$unwind':_0x33002c(0x101)},{'$group':{'_id':{'category':_0x33002c(0xb1),'brand':_0x33002c(0xbd)},'totalQty':{'$sum':_0x33002c(0xae)},'products':{'$push':{'qty':'$sale_product.real_qty_unit_val','NetPrice':_0x33002c(0xba),'discount':'$sale_product.discount','adj_discount':_0x33002c(0x114),'product_details':{'prod_name':_0x33002c(0x102),'product_code':'$product_info.product_code','category':_0x33002c(0xb1),'brand':_0x33002c(0xbd),'gross_price':_0x33002c(0xc9)}}}}},{'$unwind':'$products'},{'$group':{'_id':{'category':_0x33002c(0x94),'brand':_0x33002c(0x105)},'totalQty':{'$sum':_0x33002c(0xbb)},'totalGross':{'$sum':{'$multiply':['$products.qty',_0x33002c(0x99)]}},'NetPrice':{'$sum':_0x33002c(0xe7)},'discount':{'$sum':'$products.discount'},'adj_discount':{'$sum':_0x33002c(0x9a)},'product_details':{'$first':_0x33002c(0xd9)}}},{'$group':{'_id':{'category':_0x33002c(0xcc),'brand':_0x33002c(0xea)},'totalQty':{'$sum':_0x33002c(0xd0)},'totalGross':{'$sum':_0x33002c(0xce)},'NetPrice':{'$sum':_0x33002c(0x96)},'discount':{'$sum':'$discount'},'adj_discount':{'$sum':_0x33002c(0xfc)},'products':{'$push':{'qty':_0x33002c(0xd0),'category':_0x33002c(0xcc),'brand':_0x33002c(0xea),'product_details':_0x33002c(0xd8)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x4efd53=[];_0x4efd53[_0x33002c(0xdc)]={};for(let _0x185475=0x0;_0x185475<=_0x52869c[_0x33002c(0xfd)]-0x1;_0x185475++){const _0x2385a7=_0x52869c[_0x185475];!_0x4efd53[_0x33002c(0xdc)][_0x2385a7[_0x33002c(0xf2)][_0x33002c(0xf1)]]&&(_0x4efd53[_0x33002c(0xdc)][_0x2385a7['_id'][_0x33002c(0xf1)]]={}),!_0x4efd53['sales_sa_month'][_0x2385a7[_0x33002c(0xf2)]['brand']][_0x2385a7[_0x33002c(0xf2)][_0x33002c(0xec)]]&&(_0x4efd53[_0x33002c(0xdc)][_0x2385a7[_0x33002c(0xf2)][_0x33002c(0xf1)]][_0x2385a7['_id'][_0x33002c(0xec)]]={}),!_0x4efd53[_0x33002c(0xdc)][_0x2385a7[_0x33002c(0xf2)][_0x33002c(0xf1)]][_0x2385a7['_id'][_0x33002c(0xec)]][_0x33002c(0xa6)]&&(_0x4efd53[_0x33002c(0xdc)][_0x2385a7['_id'][_0x33002c(0xf1)]][_0x2385a7[_0x33002c(0xf2)][_0x33002c(0xec)]][_0x33002c(0xa6)]=0x0),!_0x4efd53['sales_sa_month'][_0x2385a7['_id'][_0x33002c(0xf1)]][_0x2385a7[_0x33002c(0xf2)][_0x33002c(0xec)]][_0x33002c(0xdf)]&&(_0x4efd53[_0x33002c(0xdc)][_0x2385a7['_id']['brand']][_0x2385a7[_0x33002c(0xf2)]['category']]['net']=0x0),_0x4efd53[_0x33002c(0xdc)][_0x2385a7[_0x33002c(0xf2)]['brand']][_0x2385a7['_id'][_0x33002c(0xec)]]['qty']=_0x2385a7[_0x33002c(0xc3)],_0x4efd53[_0x33002c(0xdc)][_0x2385a7[_0x33002c(0xf2)][_0x33002c(0xf1)]][_0x2385a7[_0x33002c(0xf2)][_0x33002c(0xec)]][_0x33002c(0xdf)]=_0x2385a7['NetPrice'];}const _0x155019=await sales_sa['aggregate']([{'$match':{'date':{'$gte':_0x78d776,'$lte':_0x4a8417},'sales_staff_id':_0x4962e9,'sale_product.isFG':_0x33002c(0x100),'status_data':_0x33002c(0x100)}},{'$unwind':'$sale_product'},{'$match':{'sale_product.isFG':'false'}},{'$lookup':{'from':_0x33002c(0x9e),'localField':_0x33002c(0xc0),'foreignField':'product_code','as':_0x33002c(0x10c)}},{'$unwind':_0x33002c(0x101)},{'$group':{'_id':{'category':_0x33002c(0xb1),'brand':_0x33002c(0xbd)},'totalQty':{'$sum':_0x33002c(0xae)},'products':{'$push':{'qty':'$sale_product.real_qty_unit_val','NetPrice':'$sale_product.totalprice','discount':_0x33002c(0xf3),'adj_discount':_0x33002c(0x114),'product_details':{'prod_name':_0x33002c(0x102),'product_code':_0x33002c(0xb6),'category':_0x33002c(0xb1),'brand':_0x33002c(0xbd),'gross_price':_0x33002c(0xc9)}}}}},{'$unwind':_0x33002c(0xc8)},{'$group':{'_id':{'category':_0x33002c(0x94),'brand':_0x33002c(0x105)},'totalQty':{'$sum':_0x33002c(0xbb)},'totalGross':{'$sum':{'$multiply':[_0x33002c(0xbb),_0x33002c(0x99)]}},'NetPrice':{'$sum':_0x33002c(0xe7)},'discount':{'$sum':_0x33002c(0xb5)},'adj_discount':{'$sum':'$products.adj_discount'},'product_details':{'$first':_0x33002c(0xd9)}}},{'$group':{'_id':{'category':_0x33002c(0xcc),'brand':_0x33002c(0xea)},'totalQty':{'$sum':_0x33002c(0xd0)},'totalGross':{'$sum':_0x33002c(0xce)},'NetPrice':{'$sum':_0x33002c(0x96)},'discount':{'$sum':_0x33002c(0x10d)},'adj_discount':{'$sum':_0x33002c(0xfc)},'products':{'$push':{'qty':_0x33002c(0xd0),'category':_0x33002c(0xcc),'brand':_0x33002c(0xea),'product_details':_0x33002c(0xd8)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x11a625=[];_0x11a625[_0x33002c(0x95)]={};for(let _0x5b078c=0x0;_0x5b078c<=_0x155019[_0x33002c(0xfd)]-0x1;_0x5b078c++){const _0x3b4b1a=_0x155019[_0x5b078c];!_0x11a625['sales_sa_year'][_0x3b4b1a[_0x33002c(0xf2)][_0x33002c(0xf1)]]&&(_0x11a625[_0x33002c(0x95)][_0x3b4b1a['_id'][_0x33002c(0xf1)]]={}),!_0x11a625[_0x33002c(0x95)][_0x3b4b1a['_id'][_0x33002c(0xf1)]][_0x3b4b1a['_id'][_0x33002c(0xec)]]&&(_0x11a625[_0x33002c(0x95)][_0x3b4b1a[_0x33002c(0xf2)][_0x33002c(0xf1)]][_0x3b4b1a[_0x33002c(0xf2)][_0x33002c(0xec)]]={}),!_0x11a625[_0x33002c(0x95)][_0x3b4b1a[_0x33002c(0xf2)][_0x33002c(0xf1)]][_0x3b4b1a[_0x33002c(0xf2)]['category']][_0x33002c(0xa6)]&&(_0x11a625[_0x33002c(0x95)][_0x3b4b1a[_0x33002c(0xf2)]['brand']][_0x3b4b1a['_id']['category']]['qty']=0x0),!_0x11a625['sales_sa_year'][_0x3b4b1a[_0x33002c(0xf2)][_0x33002c(0xf1)]][_0x3b4b1a[_0x33002c(0xf2)][_0x33002c(0xec)]][_0x33002c(0xdf)]&&(_0x11a625[_0x33002c(0x95)][_0x3b4b1a['_id'][_0x33002c(0xf1)]][_0x3b4b1a['_id'][_0x33002c(0xec)]][_0x33002c(0xdf)]=0x0),_0x11a625['sales_sa_year'][_0x3b4b1a[_0x33002c(0xf2)][_0x33002c(0xf1)]][_0x3b4b1a[_0x33002c(0xf2)][_0x33002c(0xec)]][_0x33002c(0xa6)]=_0x3b4b1a[_0x33002c(0xc3)],_0x11a625[_0x33002c(0x95)][_0x3b4b1a[_0x33002c(0xf2)][_0x33002c(0xf1)]][_0x3b4b1a[_0x33002c(0xf2)][_0x33002c(0xec)]][_0x33002c(0xdf)]=_0x3b4b1a[_0x33002c(0x91)];}_0xeabbb9['json']({'product':_0x1daec1['cat_brand'],'month_data':_0x4efd53[_0x33002c(0xdc)],'year_data':_0x11a625[_0x33002c(0x95)]});}catch(_0x351d26){console['log'](_0x351d26);}}),module['exports']=router;