function a0_0x9cc8(){const _0x5c061e=['$products.product_details','$total_amount','$products.product_details.category','$product_info','../middleware/auth','$products.NetPrice','$category','fss','$sale_product.real_qty_unit_val','$_id.category','/sales_data_dashboard','$products.product_details.brand','$product_info.gross_price','$totalGross','German','$sumprice','find','net','/fg_line','$sale_product.quantity','qty','$_id.brand','37310152xMppbB','index_acc','success','$sale_product.adj_discount','$sale_product.totalprice','product_info','email','5TmOQuc','$products.discount','aggregate','$sale_product.discount','save','render','Finished\x20Goods','totalQty','/sales_chart','Arabic','True','Chinese','$product','$product_info.brand','English','Raw\x20Materials','5258248DWbjXN','French','$brand','errors','54TrzcRl','$products.qty','English\x20(US)','$return_product.return_qty','$products.adj_discount','sad','express','index_sa','2378110nVgmFM','NetPrice','$product.from_quantity','flash','$product_details','products','Hindi','/index','index','sales_sa_month','brand','$sale_product.price','json','_id','account_category','user','true','14AGUDKk','$adj_discount','$product_list.product_stock','$product_list','paid','findOne','index_asd','$product_info.product_code','$return_product','$to_warehouse','$product_info.name','cat_brand','/paid_data','786TgZHkb','3267336zGWpbU','get','collection_price','False','$product.quantity','sale_product.product_code','Arabic\x20(ae)','$totalQty','$product.to_quantity','$name','false','body','acc','/sales_data__admin_dashboard','$NetPrice','language','$date','/price_chart','product_code','rsm','$product.product_name','669899letIHN','post','../public/language/languages.json','$products.product_details.gross_price','$return_sale','category','/paid_data_table','6662406zCiykj','$product_info.category','warehouse_category','$sale_product','push','Portuguese','$from_warehouse','valueOf','../models/all_models','log','$discount','/avg_data','$count','Router','length','sales_sa_year','Portuguese\x20(BR)','9108UPwxaw','exports','$product_code','/update_data','$products'];a0_0x9cc8=function(){return _0x5c061e;};return a0_0x9cc8();}const a0_0x13fb0c=a0_0x59a5;(function(_0x24de63,_0x373de3){const _0x6bee01=a0_0x59a5,_0x26bb45=_0x24de63();while(!![]){try{const _0x14b95b=-parseInt(_0x6bee01(0x21d))/0x1+parseInt(_0x6bee01(0x207))/0x2*(-parseInt(_0x6bee01(0x235))/0x3)+-parseInt(_0x6bee01(0x1dd))/0x4+-parseInt(_0x6bee01(0x1cd))/0x5*(-parseInt(_0x6bee01(0x224))/0x6)+parseInt(_0x6bee01(0x1fa))/0x7*(parseInt(_0x6bee01(0x208))/0x8)+parseInt(_0x6bee01(0x1e1))/0x9*(-parseInt(_0x6bee01(0x1e9))/0xa)+parseInt(_0x6bee01(0x1c6))/0xb;if(_0x14b95b===_0x373de3)break;else _0x26bb45['push'](_0x26bb45['shift']());}catch(_0x58838c){_0x26bb45['push'](_0x26bb45['shift']());}}}(a0_0x9cc8,0xae760));function a0_0x59a5(_0x577b0c,_0x10d0b8){const _0x9cc87b=a0_0x9cc8();return a0_0x59a5=function(_0x59a5c8,_0x426deb){_0x59a5c8=_0x59a5c8-0x1bc;let _0x289dec=_0x9cc87b[_0x59a5c8];return _0x289dec;},a0_0x59a5(_0x577b0c,_0x10d0b8);}const express=require(a0_0x13fb0c(0x1e7)),app=express(),router=express[a0_0x13fb0c(0x231)](),auth=require(a0_0x13fb0c(0x23e)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order}=require(a0_0x13fb0c(0x22c)),users=require(a0_0x13fb0c(0x21f));router[a0_0x13fb0c(0x209)](a0_0x13fb0c(0x1f0),auth,async(_0xd4a2f8,_0x4982f1)=>{const _0x10e98d=a0_0x13fb0c;try{const {username:_0x4ff95d,email:_0x446f21,role:_0xc97c34}=_0xd4a2f8[_0x10e98d(0x1f8)],_0x3e577e=_0xd4a2f8[_0x10e98d(0x1f8)],_0x14c46f=await master_shop[_0x10e98d(0x1c0)](),_0x3c121b=await profile['findOne']({'email':_0x3e577e[_0x10e98d(0x1cc)]});if(_0x14c46f[0x0]['language']==_0x10e98d(0x1e3))var _0x14a852=users[_0x10e98d(0x1db)];else{if(_0x14c46f[0x0][_0x10e98d(0x217)]==_0x10e98d(0x1ef))var _0x14a852=users[_0x10e98d(0x1ef)];else{if(_0x14c46f[0x0][_0x10e98d(0x217)]==_0x10e98d(0x1be))var _0x14a852=users[_0x10e98d(0x1be)];else{if(_0x14c46f[0x0][_0x10e98d(0x217)]=='Spanish')var _0x14a852=users['Spanish'];else{if(_0x14c46f[0x0][_0x10e98d(0x217)]==_0x10e98d(0x1de))var _0x14a852=users['French'];else{if(_0x14c46f[0x0][_0x10e98d(0x217)]==_0x10e98d(0x234))var _0x14a852=users[_0x10e98d(0x229)];else{if(_0x14c46f[0x0][_0x10e98d(0x217)]==_0x10e98d(0x1d8))var _0x14a852=users[_0x10e98d(0x1d8)];else{if(_0x14c46f[0x0][_0x10e98d(0x217)]==_0x10e98d(0x20e))var _0x14a852=users[_0x10e98d(0x1d6)];}}}}}}}if(_0x3e577e[_0x10e98d(0x1f7)]=='wm'){var _0x972071;if(_0x3e577e[_0x10e98d(0x226)]==_0x10e98d(0x1dc)){const _0x400173=await product['find']({'product_category':_0x10e98d(0x1dc)});_0x972071=_0x400173[_0x10e98d(0x232)];}else{if(_0x3e577e[_0x10e98d(0x226)]==_0x10e98d(0x1d3)){const _0x369edc=await product[_0x10e98d(0x1c0)]({'product_category':_0x10e98d(0x1d3)});_0x972071=_0x369edc[_0x10e98d(0x232)];}else{const _0x4c9dba=await product[_0x10e98d(0x1c0)]();_0x972071=_0x4c9dba[_0x10e98d(0x232)];}}const _0x3cd91c=await sales[_0x10e98d(0x1cf)]([{'$group':{'_id':null,'total_price':{'$sum':'$total_price'}}}]),_0xc91e96=await sales['aggregate']([{'$unwind':_0x10e98d(0x227)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x10e98d(0x1c3)}}}]),_0x21a77a=await sales_return['aggregate']([{'$group':{'_id':null,'total':{'$sum':_0x10e98d(0x23b)}}}]),_0x8e508d=await sales_return[_0x10e98d(0x1cf)]([{'$unwind':_0x10e98d(0x221)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_sale.sale_qty'}}}]),_0x1c54b5=await purchases[_0x10e98d(0x1cf)]([{'$group':{'_id':null,'total_amount':{'$sum':'$total_amount'}}}]),_0x4ecbc2=await purchases_return[_0x10e98d(0x1cf)]([{'$group':{'_id':null,'total':{'$sum':_0x10e98d(0x23b)}}}]),_0x1f185b=await purchases_return[_0x10e98d(0x1cf)]([{'$unwind':_0x10e98d(0x202)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_product.return_qty'}}}]),_0x43bef9=await purchases['aggregate']([{'$unwind':_0x10e98d(0x1d9)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x10e98d(0x20c)}}}]),_0x3b3873=await purchases['aggregate']([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x44bb5d=await sales[_0x10e98d(0x1cf)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x3bb27d=await transfers[_0x10e98d(0x1cf)]([{'$unwind':_0x10e98d(0x1d9)},{'$group':{'_id':_0x10e98d(0x21c),'fromWarehouse':{'$first':_0x10e98d(0x22a)},'toWareHouse':{'$first':_0x10e98d(0x203)},'FromtotalQuantity':{'$sum':_0x10e98d(0x1eb)},'TototalQuantity':{'$sum':_0x10e98d(0x210)}}}]),_0x9968a6=await categories['find'](),_0x33d31a=await product[_0x10e98d(0x1c0)](),_0x25d5dc=await suppliers[_0x10e98d(0x1c0)](),_0x4edd30=await customer[_0x10e98d(0x1c0)]();_0x4982f1[_0x10e98d(0x1d2)](_0x10e98d(0x1f1),{'success':_0xd4a2f8[_0x10e98d(0x1ec)](_0x10e98d(0x1c8)),'errors':_0xd4a2f8[_0x10e98d(0x1ec)]('errors'),'role':_0x3e577e,'profile':_0x3c121b,'sale':_0x3cd91c[0x0],'sales_return':_0x21a77a[0x0],'purchases':_0x1c54b5[0x0],'purchases_return':_0x4ecbc2[0x0],'purchases_table':_0x3b3873,'sales_table':_0x44bb5d,'categories':_0x9968a6[_0x10e98d(0x232)],'product':_0x33d31a['length'],'suppliers':_0x25d5dc[_0x10e98d(0x232)],'customer':_0x4edd30[_0x10e98d(0x232)],'master_shop':_0x14c46f,'language':_0x14a852,'sale_QTY':_0xc91e96[0x0],'purchases_QTY':_0x43bef9[0x0],'sales_return_QTY':_0x8e508d[0x0],'purchases_return_QTY':_0x1f185b[0x0],'transfer_table':_0x3bb27d,'product_cnt':_0x972071});}else{if(_0x3e577e[_0x10e98d(0x1f7)]=='sa'){const _0x403b74=await staff[_0x10e98d(0x1ff)]({'email':_0x3e577e[_0x10e98d(0x1cc)]}),_0x4b2012=await sales_sa['find']({'sales_staff_id':_0x403b74[_0x10e98d(0x1f6)]}),_0x277f4c=await sales_sa[_0x10e98d(0x1c0)]({'sales_staff_id':_0x403b74[_0x10e98d(0x1f6)],'paid':_0x10e98d(0x1d7)}),_0x78c185=await sales_sa[_0x10e98d(0x1c0)]({'sales_staff_id':_0x403b74[_0x10e98d(0x1f6)],'paid':'False'}),_0x3636e6=await sales_sa[_0x10e98d(0x1cf)]([{'$match':{'sales_staff_id':_0x403b74[_0x10e98d(0x1f6)][_0x10e98d(0x22b)]()}},{'$unwind':'$sale_product'},{'$group':{'_id':null,'sumprice':{'$sum':_0x10e98d(0x1f4)},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':[_0x10e98d(0x1bf),_0x10e98d(0x230)]},0x2]}}}]),_0x5d7086=await staff[_0x10e98d(0x1cf)]([{'$match':{'email':_0x3e577e[_0x10e98d(0x1cc)]}},{'$unwind':_0x10e98d(0x1fd)},{'$group':{'_id':null,'totalQTY':{'$sum':_0x10e98d(0x1fc)}}}]);_0x4982f1[_0x10e98d(0x1d2)](_0x10e98d(0x1e8),{'success':_0xd4a2f8[_0x10e98d(0x1ec)](_0x10e98d(0x1c8)),'errors':_0xd4a2f8[_0x10e98d(0x1ec)](_0x10e98d(0x1e0)),'role':_0x3e577e,'profile':_0x3c121b,'master_shop':_0x14c46f,'language':_0x14a852,'cntPaid':_0x277f4c,'cntNotPaid':_0x78c185,'avg_price':_0x3636e6[0x0],'my_stock':_0x5d7086[0x0],'staff_arr':_0x403b74});}else{if(_0x3e577e[_0x10e98d(0x1f7)]==_0x10e98d(0x214)){const _0x2511bf=await staff[_0x10e98d(0x1ff)]({'email':_0x3e577e[_0x10e98d(0x1cc)]});_0x4982f1[_0x10e98d(0x1d2)](_0x10e98d(0x1c7),{'success':_0xd4a2f8[_0x10e98d(0x1ec)]('success'),'errors':_0xd4a2f8[_0x10e98d(0x1ec)]('errors'),'role':_0x3e577e,'profile':_0x3c121b,'master_shop':_0x14c46f,'language':_0x14a852}),_0x4982f1['json'](_0x2511bf);}else{if(_0x3e577e[_0x10e98d(0x1f7)]==_0x10e98d(0x1e6)||_0x3e577e['account_category']==_0x10e98d(0x21b)||_0x3e577e[_0x10e98d(0x1f7)]==_0x10e98d(0x241)){const _0x1c3962=await staff['findOne']({'email':_0x3e577e[_0x10e98d(0x1cc)]});_0x4982f1[_0x10e98d(0x1d2)](_0x10e98d(0x200),{'success':_0xd4a2f8[_0x10e98d(0x1ec)]('success'),'errors':_0xd4a2f8[_0x10e98d(0x1ec)](_0x10e98d(0x1e0)),'role':_0x3e577e,'profile':_0x3c121b,'master_shop':_0x14c46f,'language':_0x14a852});}else{var _0x972071;if(_0x3e577e[_0x10e98d(0x226)]=='Raw\x20Materials'){const _0x1739cf=await product[_0x10e98d(0x1c0)]({'product_category':'Raw\x20Materials'});_0x972071=_0x1739cf['length'];}else{if(_0x3e577e[_0x10e98d(0x226)]==_0x10e98d(0x1d3)){const _0x413bcf=await product[_0x10e98d(0x1c0)]({'product_category':_0x10e98d(0x1d3)});_0x972071=_0x413bcf[_0x10e98d(0x232)];}else{const _0x4e9abc=await product[_0x10e98d(0x1c0)]();_0x972071=_0x4e9abc[_0x10e98d(0x232)];}}const _0x109d9c=await sales[_0x10e98d(0x1cf)]([{'$group':{'_id':null,'total_price':{'$sum':'$total_price'}}}]),_0x3b676=await sales[_0x10e98d(0x1cf)]([{'$unwind':'$sale_product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x10e98d(0x1c3)}}}]),_0x4199ea=await sales_return['aggregate']([{'$group':{'_id':null,'total':{'$sum':_0x10e98d(0x23b)}}}]),_0x3d50a4=await sales_return['aggregate']([{'$unwind':_0x10e98d(0x221)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_sale.sale_qty'}}}]),_0x46ba31=await purchases[_0x10e98d(0x1cf)]([{'$group':{'_id':null,'total_amount':{'$sum':_0x10e98d(0x23b)}}}]),_0x263efd=await purchases_return[_0x10e98d(0x1cf)]([{'$group':{'_id':null,'total':{'$sum':_0x10e98d(0x23b)}}}]),_0x3caa41=await purchases_return[_0x10e98d(0x1cf)]([{'$unwind':'$return_product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x10e98d(0x1e4)}}}]),_0x18eb3e=await purchases['aggregate']([{'$unwind':_0x10e98d(0x1d9)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0x10e98d(0x20c)}}}]),_0x2ebc6f=await purchases[_0x10e98d(0x1cf)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x136894=await sales[_0x10e98d(0x1cf)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x201c66=await transfers[_0x10e98d(0x1cf)]([{'$unwind':_0x10e98d(0x1d9)},{'$group':{'_id':_0x10e98d(0x21c),'fromWarehouse':{'$first':_0x10e98d(0x22a)},'toWareHouse':{'$first':_0x10e98d(0x203)},'FromtotalQuantity':{'$sum':'$product.from_quantity'},'TototalQuantity':{'$sum':'$product.to_quantity'}}}]),_0x450012=await categories[_0x10e98d(0x1c0)](),_0x40c4ff=await product['find'](),_0x3ad28a=await suppliers[_0x10e98d(0x1c0)](),_0x7df068=await customer[_0x10e98d(0x1c0)]();_0x4982f1[_0x10e98d(0x1d2)](_0x10e98d(0x1f1),{'success':_0xd4a2f8[_0x10e98d(0x1ec)](_0x10e98d(0x1c8)),'errors':_0xd4a2f8['flash'](_0x10e98d(0x1e0)),'role':_0x3e577e,'profile':_0x3c121b,'sale':_0x109d9c[0x0],'sales_return':_0x4199ea[0x0],'purchases':_0x46ba31[0x0],'purchases_return':_0x263efd[0x0],'purchases_table':_0x2ebc6f,'sales_table':_0x136894,'categories':_0x450012[_0x10e98d(0x232)],'product':_0x40c4ff[_0x10e98d(0x232)],'suppliers':_0x3ad28a[_0x10e98d(0x232)],'customer':_0x7df068[_0x10e98d(0x232)],'master_shop':_0x14c46f,'language':_0x14a852,'sale_QTY':_0x3b676[0x0],'purchases_QTY':_0x18eb3e[0x0],'sales_return_QTY':_0x3d50a4[0x0],'purchases_return_QTY':_0x3caa41[0x0],'transfer_table':_0x201c66,'product_cnt':_0x972071});}}}}}catch(_0x1e31a3){console[_0x10e98d(0x22d)](_0x1e31a3);}}),router['get']('/pending_data_table',auth,async(_0x3c3af9,_0x4f477c)=>{const _0x35fcb6=a0_0x13fb0c;try{const _0x394fc2=_0x3c3af9[_0x35fcb6(0x1f8)],_0x4fa1ab=await staff['findOne']({'email':_0x394fc2[_0x35fcb6(0x1cc)]}),_0xfcf31c=await sales_sa['aggregate']([{'$match':{'sales_staff_id':_0x4fa1ab[_0x35fcb6(0x1f6)]['valueOf'](),'paid':_0x35fcb6(0x20b)}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x4f477c[_0x35fcb6(0x1f5)](_0xfcf31c);}catch(_0x3a3eed){_0x4f477c[_0x35fcb6(0x1f5)](_0x3a3eed);}}),router[a0_0x13fb0c(0x209)]('/pending_data',auth,async(_0xf5a867,_0x529b2f)=>{const _0x49be7f=a0_0x13fb0c;try{const _0x136c24=_0xf5a867[_0x49be7f(0x1f8)],_0x530e9c=await staff[_0x49be7f(0x1ff)]({'email':_0x136c24[_0x49be7f(0x1cc)]}),_0x18715a=await sales_sa[_0x49be7f(0x1c0)]({'sales_staff_id':_0x530e9c[_0x49be7f(0x1f6)],'paid':'False'});_0x529b2f['json'](_0x18715a);}catch(_0x583997){_0x529b2f[_0x49be7f(0x1f5)](_0x583997);}}),router[a0_0x13fb0c(0x21e)]('/get_count',auth,async(_0x5a2e90,_0x521e44)=>{const _0x51d41b=a0_0x13fb0c;try{const {sttaff_id:_0x1e72d8,warehouse:_0x36dee4,account_category:_0xf8a8f9}=_0x5a2e90[_0x51d41b(0x1f8)],_0x179f8c=await sales_order[_0x51d41b(0x1cf)]([{'$match':{'accounting_account_id':_0x1e72d8,'accounting_account_confirm':_0x51d41b(0x212)}}]);_0x521e44['json'](_0x179f8c);}catch(_0x14e947){}}),router[a0_0x13fb0c(0x209)](a0_0x13fb0c(0x223),auth,async(_0x78578f,_0x409118)=>{const _0x793f6f=a0_0x13fb0c;try{const _0x3baecc=_0x78578f[_0x793f6f(0x1f8)],_0xffe3e6=await staff[_0x793f6f(0x1ff)]({'email':_0x3baecc[_0x793f6f(0x1cc)]}),_0x581b72=await sales_sa[_0x793f6f(0x1c0)]({'sales_staff_id':_0xffe3e6[_0x793f6f(0x1f6)],'paid':'True'});_0x409118['json'](_0x581b72);}catch(_0x5c1570){_0x409118[_0x793f6f(0x1f5)](_0x5c1570);}}),router[a0_0x13fb0c(0x209)](a0_0x13fb0c(0x206),auth,async(_0x535c62,_0x48f4ba)=>{const _0x25660a=a0_0x13fb0c;try{const _0x3999b5=_0x535c62['user'],_0x16a880=await staff['findOne']({'email':_0x3999b5[_0x25660a(0x1cc)]}),_0x96ea2b=await sales_sa['aggregate']([{'$match':{'sales_staff_id':_0x16a880[_0x25660a(0x1f6)][_0x25660a(0x22b)](),'paid':_0x25660a(0x1d7)}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x48f4ba[_0x25660a(0x1f5)](_0x96ea2b);}catch(_0x11c621){_0x48f4ba['json'](_0x11c621);}}),router['post'](a0_0x13fb0c(0x238),auth,async(_0x4f44f5,_0xd28139)=>{const _0x34ec2c=a0_0x13fb0c;try{const {id:_0x40349f,price:_0x207efa}=_0x4f44f5[_0x34ec2c(0x213)],_0x1e1584=await sales_sa['findById'](_0x40349f);_0x1e1584[_0x34ec2c(0x1fe)]=_0x34ec2c(0x1d7),_0x1e1584[_0x34ec2c(0x20a)]=parseFloat(_0x207efa);const _0x2346e1=await _0x1e1584[_0x34ec2c(0x1d1)]();_0xd28139[_0x34ec2c(0x1f5)](_0x2346e1);}catch(_0x1c6583){_0xd28139['json'](_0x1c6583);}}),router[a0_0x13fb0c(0x209)]('/pending_data',auth,async(_0x31052e,_0x19625b)=>{const _0x1bbf59=a0_0x13fb0c;try{const _0x4e5996=_0x31052e['user'],_0x44d135=await staff[_0x1bbf59(0x1ff)]({'email':_0x4e5996[_0x1bbf59(0x1cc)]}),_0x4835ce=await sales_sa[_0x1bbf59(0x1c0)]({'sales_staff_id':_0x44d135['_id'],'paid':'False'});_0x19625b[_0x1bbf59(0x1f5)](_0x4835ce);}catch(_0x38dd22){_0x19625b['json'](_0x38dd22);}}),router[a0_0x13fb0c(0x209)](a0_0x13fb0c(0x22f),auth,async(_0x4812f5,_0x5e7611)=>{const _0x3f52dd=a0_0x13fb0c;try{const _0x120ac6=_0x4812f5[_0x3f52dd(0x1f8)],_0x2bbb6c=await staff[_0x3f52dd(0x1ff)]({'email':_0x120ac6['email']}),_0x4bc325=await sales_sa[_0x3f52dd(0x1cf)]([{'$match':{'sales_staff_id':_0x2bbb6c[_0x3f52dd(0x1f6)][_0x3f52dd(0x22b)]()}},{'$unwind':'$sale_product'},{'$group':{'_id':null,'sumprice':{'$sum':_0x3f52dd(0x1f4)},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':[_0x3f52dd(0x1bf),_0x3f52dd(0x230)]},0x2]}}}]);_0x5e7611[_0x3f52dd(0x1f5)](_0x4bc325);}catch(_0x2de16f){_0x5e7611[_0x3f52dd(0x1f5)](_0x2de16f);}}),router[a0_0x13fb0c(0x209)]('/my_inv',auth,async(_0x58d8fe,_0x2f903c)=>{const _0x4eaf59=a0_0x13fb0c;try{const _0x5aaf65=_0x58d8fe[_0x4eaf59(0x1f8)],_0x4b77bf=await staff[_0x4eaf59(0x1ff)]({'email':_0x5aaf65[_0x4eaf59(0x1cc)]}),_0x1ed448=await staff[_0x4eaf59(0x1cf)]([{'$match':{'email':_0x5aaf65[_0x4eaf59(0x1cc)]}},{'$unwind':_0x4eaf59(0x1fd)},{'$match':{'product_list.isConfirm':_0x4eaf59(0x1f9)}},{'$group':{'_id':null,'totalQTY':{'$sum':_0x4eaf59(0x1fc)}}}]);_0x2f903c[_0x4eaf59(0x1f5)](_0x1ed448);}catch(_0x47bbec){_0x2f903c[_0x4eaf59(0x1f5)](_0x47bbec);}}),router['get'](a0_0x13fb0c(0x1d5),auth,async(_0xc39394,_0x256087)=>{const _0x30cf4f=a0_0x13fb0c;try{const _0x37827f=_0xc39394[_0x30cf4f(0x1f8)],_0x52a513=await staff['findOne']({'email':_0x37827f['email']}),_0x21b0ec=await sales_sa['aggregate']([{'$match':{'sales_staff_id':_0x52a513[_0x30cf4f(0x1f6)][_0x30cf4f(0x22b)]()}},{'$unwind':'$sale_product'},{'$group':{'_id':_0x30cf4f(0x218),'totalQuantity':{'$sum':_0x30cf4f(0x1c3)},'date':{'$first':_0x30cf4f(0x218)}}},{'$sort':{'date':0x1}}]);_0x256087[_0x30cf4f(0x1f5)](_0x21b0ec);}catch(_0x3be9a1){_0x256087[_0x30cf4f(0x1f5)](_0x3be9a1);}}),router[a0_0x13fb0c(0x209)](a0_0x13fb0c(0x219),auth,async(_0x2171fe,_0x355836)=>{const _0x48dbb3=a0_0x13fb0c;try{const _0x20f72b=_0x2171fe[_0x48dbb3(0x1f8)],_0x21a843=await staff[_0x48dbb3(0x1ff)]({'email':_0x20f72b[_0x48dbb3(0x1cc)]}),_0x9d045d=await sales_sa[_0x48dbb3(0x1cf)]([{'$match':{'sales_staff_id':_0x21a843['_id']['valueOf']()}},{'$unwind':_0x48dbb3(0x227)},{'$group':{'_id':_0x48dbb3(0x218),'totalPrice':{'$sum':'$sale_product.totalprice'},'date':{'$first':_0x48dbb3(0x218)}}},{'$sort':{'date':0x1}}]);_0x355836[_0x48dbb3(0x1f5)](_0x9d045d);}catch(_0x3a8d1f){_0x355836[_0x48dbb3(0x1f5)](_0x3a8d1f);}}),router[a0_0x13fb0c(0x21e)](a0_0x13fb0c(0x244),auth,async(_0x1d1780,_0x4464b4)=>{const _0x261abb=a0_0x13fb0c;try{const {date_today:_0x312846,first_month:_0x1d8126,first_year:_0x1a4bbe}=_0x1d1780[_0x261abb(0x213)],{sttaff_id:_0x1dbd34}=_0x1d1780['user'],_0x55830a=await product['aggregate']([{'$group':{'_id':{'brand':_0x261abb(0x1df),'category':_0x261abb(0x240)},'products':{'$push':{'name':_0x261abb(0x211),'product_code':_0x261abb(0x237)}}}},{'$sort':{'_id.category':-0x1,'_id.brand':0x1}}]);var _0x40d67a=[];_0x40d67a['cat_brand']=[];for(let _0x10755e=0x0;_0x10755e<=_0x55830a[_0x261abb(0x232)]-0x1;_0x10755e++){const _0xfe90f7=_0x55830a[_0x10755e];_0x40d67a[_0x261abb(0x205)][_0x261abb(0x228)](_0xfe90f7);}const _0x57ad81=await sales_sa[_0x261abb(0x1cf)]([{'$match':{'date':{'$gte':_0x1d8126,'$lte':_0x312846},'sales_staff_id':_0x1dbd34,'sale_product.isFG':'false','status_data':_0x261abb(0x212)}},{'$unwind':'$sale_product'},{'$match':{'sale_product.isFG':_0x261abb(0x212)}},{'$lookup':{'from':_0x261abb(0x1ee),'localField':_0x261abb(0x20d),'foreignField':'product_code','as':'product_info'}},{'$unwind':'$product_info'},{'$group':{'_id':{'category':'$product_info.category','brand':_0x261abb(0x1da)},'totalQty':{'$sum':'$sale_product.real_qty_unit_val'},'products':{'$push':{'qty':_0x261abb(0x242),'NetPrice':_0x261abb(0x1ca),'discount':_0x261abb(0x1d0),'adj_discount':'$sale_product.adj_discount','product_details':{'prod_name':_0x261abb(0x204),'product_code':_0x261abb(0x201),'category':'$product_info.category','brand':_0x261abb(0x1da),'gross_price':'$product_info.gross_price'}}}}},{'$unwind':'$products'},{'$group':{'_id':{'category':'$products.product_details.category','brand':'$products.product_details.brand'},'totalQty':{'$sum':_0x261abb(0x1e2)},'totalGross':{'$sum':{'$multiply':[_0x261abb(0x1e2),'$products.product_details.gross_price']}},'NetPrice':{'$sum':_0x261abb(0x23f)},'discount':{'$sum':'$products.discount'},'adj_discount':{'$sum':_0x261abb(0x1e5)},'product_details':{'$first':_0x261abb(0x23a)}}},{'$group':{'_id':{'category':_0x261abb(0x243),'brand':_0x261abb(0x1c5)},'totalQty':{'$sum':'$totalQty'},'totalGross':{'$sum':_0x261abb(0x1bd)},'NetPrice':{'$sum':_0x261abb(0x216)},'discount':{'$sum':_0x261abb(0x22e)},'adj_discount':{'$sum':_0x261abb(0x1fb)},'products':{'$push':{'qty':'$totalQty','category':_0x261abb(0x243),'brand':_0x261abb(0x1c5),'product_details':_0x261abb(0x1ed)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x3a952e=[];_0x3a952e[_0x261abb(0x1f2)]={};for(let _0x5dd288=0x0;_0x5dd288<=_0x57ad81[_0x261abb(0x232)]-0x1;_0x5dd288++){const _0x37c94a=_0x57ad81[_0x5dd288];!_0x3a952e[_0x261abb(0x1f2)][_0x37c94a['_id'][_0x261abb(0x1f3)]]&&(_0x3a952e[_0x261abb(0x1f2)][_0x37c94a[_0x261abb(0x1f6)][_0x261abb(0x1f3)]]={}),!_0x3a952e[_0x261abb(0x1f2)][_0x37c94a[_0x261abb(0x1f6)]['brand']][_0x37c94a[_0x261abb(0x1f6)][_0x261abb(0x222)]]&&(_0x3a952e['sales_sa_month'][_0x37c94a[_0x261abb(0x1f6)][_0x261abb(0x1f3)]][_0x37c94a[_0x261abb(0x1f6)]['category']]={}),!_0x3a952e[_0x261abb(0x1f2)][_0x37c94a['_id'][_0x261abb(0x1f3)]][_0x37c94a['_id'][_0x261abb(0x222)]]['qty']&&(_0x3a952e[_0x261abb(0x1f2)][_0x37c94a['_id'][_0x261abb(0x1f3)]][_0x37c94a[_0x261abb(0x1f6)]['category']][_0x261abb(0x1c4)]=0x0),!_0x3a952e[_0x261abb(0x1f2)][_0x37c94a[_0x261abb(0x1f6)][_0x261abb(0x1f3)]][_0x37c94a['_id'][_0x261abb(0x222)]]['net']&&(_0x3a952e[_0x261abb(0x1f2)][_0x37c94a[_0x261abb(0x1f6)][_0x261abb(0x1f3)]][_0x37c94a['_id']['category']][_0x261abb(0x1c1)]=0x0),_0x3a952e['sales_sa_month'][_0x37c94a[_0x261abb(0x1f6)][_0x261abb(0x1f3)]][_0x37c94a[_0x261abb(0x1f6)][_0x261abb(0x222)]]['qty']=_0x37c94a['totalQty'],_0x3a952e['sales_sa_month'][_0x37c94a['_id'][_0x261abb(0x1f3)]][_0x37c94a['_id']['category']][_0x261abb(0x1c1)]=_0x37c94a[_0x261abb(0x1ea)];}const _0x32dd3c=await sales_sa['aggregate']([{'$match':{'date':{'$gte':_0x1a4bbe,'$lte':_0x312846},'sales_staff_id':_0x1dbd34,'sale_product.isFG':_0x261abb(0x212),'status_data':_0x261abb(0x212)}},{'$unwind':_0x261abb(0x227)},{'$match':{'sale_product.isFG':_0x261abb(0x212)}},{'$lookup':{'from':_0x261abb(0x1ee),'localField':_0x261abb(0x20d),'foreignField':'product_code','as':'product_info'}},{'$unwind':_0x261abb(0x23d)},{'$group':{'_id':{'category':'$product_info.category','brand':'$product_info.brand'},'totalQty':{'$sum':'$sale_product.real_qty_unit_val'},'products':{'$push':{'qty':_0x261abb(0x242),'NetPrice':_0x261abb(0x1ca),'discount':_0x261abb(0x1d0),'adj_discount':_0x261abb(0x1c9),'product_details':{'prod_name':_0x261abb(0x204),'product_code':'$product_info.product_code','category':_0x261abb(0x225),'brand':_0x261abb(0x1da),'gross_price':_0x261abb(0x1bc)}}}}},{'$unwind':_0x261abb(0x239)},{'$group':{'_id':{'category':_0x261abb(0x23c),'brand':_0x261abb(0x245)},'totalQty':{'$sum':_0x261abb(0x1e2)},'totalGross':{'$sum':{'$multiply':[_0x261abb(0x1e2),_0x261abb(0x220)]}},'NetPrice':{'$sum':'$products.NetPrice'},'discount':{'$sum':_0x261abb(0x1ce)},'adj_discount':{'$sum':'$products.adj_discount'},'product_details':{'$first':_0x261abb(0x23a)}}},{'$group':{'_id':{'category':_0x261abb(0x243),'brand':_0x261abb(0x1c5)},'totalQty':{'$sum':'$totalQty'},'totalGross':{'$sum':_0x261abb(0x1bd)},'NetPrice':{'$sum':'$NetPrice'},'discount':{'$sum':'$discount'},'adj_discount':{'$sum':_0x261abb(0x1fb)},'products':{'$push':{'qty':'$totalQty','category':_0x261abb(0x243),'brand':_0x261abb(0x1c5),'product_details':_0x261abb(0x1ed)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x63a7b1=[];_0x63a7b1['sales_sa_year']={};for(let _0x96cf4d=0x0;_0x96cf4d<=_0x32dd3c[_0x261abb(0x232)]-0x1;_0x96cf4d++){const _0x837026=_0x32dd3c[_0x96cf4d];!_0x63a7b1[_0x261abb(0x233)][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x1f3)]]&&(_0x63a7b1['sales_sa_year'][_0x837026[_0x261abb(0x1f6)]['brand']]={}),!_0x63a7b1[_0x261abb(0x233)][_0x837026[_0x261abb(0x1f6)]['brand']][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x222)]]&&(_0x63a7b1[_0x261abb(0x233)][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x1f3)]][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x222)]]={}),!_0x63a7b1[_0x261abb(0x233)][_0x837026[_0x261abb(0x1f6)]['brand']][_0x837026['_id']['category']][_0x261abb(0x1c4)]&&(_0x63a7b1[_0x261abb(0x233)][_0x837026[_0x261abb(0x1f6)]['brand']][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x222)]][_0x261abb(0x1c4)]=0x0),!_0x63a7b1[_0x261abb(0x233)][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x1f3)]][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x222)]][_0x261abb(0x1c1)]&&(_0x63a7b1[_0x261abb(0x233)][_0x837026[_0x261abb(0x1f6)]['brand']][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x222)]][_0x261abb(0x1c1)]=0x0),_0x63a7b1[_0x261abb(0x233)][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x1f3)]][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x222)]]['qty']=_0x837026[_0x261abb(0x1d4)],_0x63a7b1['sales_sa_year'][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x1f3)]][_0x837026[_0x261abb(0x1f6)][_0x261abb(0x222)]][_0x261abb(0x1c1)]=_0x837026['NetPrice'];}_0x4464b4[_0x261abb(0x1f5)]({'product':_0x40d67a['cat_brand'],'month_data':_0x3a952e[_0x261abb(0x1f2)],'year_data':_0x63a7b1['sales_sa_year']});}catch(_0x4d77d6){console[_0x261abb(0x22d)](_0x4d77d6);}}),router[a0_0x13fb0c(0x21e)](a0_0x13fb0c(0x215),auth,async(_0x1251fb,_0x2bc745)=>{const _0x55e210=a0_0x13fb0c;try{const {date_today:_0x36f811,first_month:_0x873302,first_year:_0x53e590}=_0x1251fb[_0x55e210(0x213)],{sttaff_id:_0x54abee}=_0x1251fb[_0x55e210(0x1f8)],_0x429ff9=await product[_0x55e210(0x1cf)]([{'$group':{'_id':{'brand':_0x55e210(0x1df),'category':_0x55e210(0x240)},'products':{'$push':{'name':_0x55e210(0x211),'product_code':'$product_code'}}}},{'$sort':{'_id.category':-0x1,'_id.brand':0x1}}]);var _0x3167aa=[];_0x3167aa[_0x55e210(0x205)]=[];for(let _0x1249d1=0x0;_0x1249d1<=_0x429ff9[_0x55e210(0x232)]-0x1;_0x1249d1++){const _0x5d3ab6=_0x429ff9[_0x1249d1];_0x3167aa['cat_brand'][_0x55e210(0x228)](_0x5d3ab6);}const _0x18de7b=await sales_sa[_0x55e210(0x1cf)]([{'$match':{'date':{'$gte':_0x873302,'$lte':_0x36f811},'sale_product.isFG':'false','status_data':'false'}},{'$unwind':_0x55e210(0x227)},{'$match':{'sale_product.isFG':_0x55e210(0x212)}},{'$lookup':{'from':_0x55e210(0x1ee),'localField':_0x55e210(0x20d),'foreignField':_0x55e210(0x21a),'as':_0x55e210(0x1cb)}},{'$unwind':_0x55e210(0x23d)},{'$group':{'_id':{'category':_0x55e210(0x225),'brand':_0x55e210(0x1da)},'totalQty':{'$sum':'$sale_product.real_qty_unit_val'},'products':{'$push':{'qty':'$sale_product.real_qty_unit_val','NetPrice':_0x55e210(0x1ca),'discount':_0x55e210(0x1d0),'adj_discount':_0x55e210(0x1c9),'product_details':{'prod_name':_0x55e210(0x204),'product_code':'$product_info.product_code','category':'$product_info.category','brand':_0x55e210(0x1da),'gross_price':_0x55e210(0x1bc)}}}}},{'$unwind':_0x55e210(0x239)},{'$group':{'_id':{'category':'$products.product_details.category','brand':_0x55e210(0x245)},'totalQty':{'$sum':_0x55e210(0x1e2)},'totalGross':{'$sum':{'$multiply':['$products.qty',_0x55e210(0x220)]}},'NetPrice':{'$sum':_0x55e210(0x23f)},'discount':{'$sum':_0x55e210(0x1ce)},'adj_discount':{'$sum':_0x55e210(0x1e5)},'product_details':{'$first':_0x55e210(0x23a)}}},{'$group':{'_id':{'category':_0x55e210(0x243),'brand':_0x55e210(0x1c5)},'totalQty':{'$sum':_0x55e210(0x20f)},'totalGross':{'$sum':'$totalGross'},'NetPrice':{'$sum':'$NetPrice'},'discount':{'$sum':_0x55e210(0x22e)},'adj_discount':{'$sum':'$adj_discount'},'products':{'$push':{'qty':_0x55e210(0x20f),'category':_0x55e210(0x243),'brand':_0x55e210(0x1c5),'product_details':_0x55e210(0x1ed)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x28eb41=[];_0x28eb41[_0x55e210(0x1f2)]={};for(let _0x36d773=0x0;_0x36d773<=_0x18de7b[_0x55e210(0x232)]-0x1;_0x36d773++){const _0x35651d=_0x18de7b[_0x36d773];!_0x28eb41[_0x55e210(0x1f2)][_0x35651d[_0x55e210(0x1f6)][_0x55e210(0x1f3)]]&&(_0x28eb41[_0x55e210(0x1f2)][_0x35651d['_id']['brand']]={}),!_0x28eb41['sales_sa_month'][_0x35651d[_0x55e210(0x1f6)][_0x55e210(0x1f3)]][_0x35651d['_id'][_0x55e210(0x222)]]&&(_0x28eb41[_0x55e210(0x1f2)][_0x35651d[_0x55e210(0x1f6)]['brand']][_0x35651d[_0x55e210(0x1f6)][_0x55e210(0x222)]]={}),!_0x28eb41['sales_sa_month'][_0x35651d[_0x55e210(0x1f6)][_0x55e210(0x1f3)]][_0x35651d[_0x55e210(0x1f6)][_0x55e210(0x222)]][_0x55e210(0x1c4)]&&(_0x28eb41[_0x55e210(0x1f2)][_0x35651d[_0x55e210(0x1f6)][_0x55e210(0x1f3)]][_0x35651d[_0x55e210(0x1f6)][_0x55e210(0x222)]][_0x55e210(0x1c4)]=0x0),!_0x28eb41[_0x55e210(0x1f2)][_0x35651d['_id'][_0x55e210(0x1f3)]][_0x35651d[_0x55e210(0x1f6)][_0x55e210(0x222)]]['net']&&(_0x28eb41[_0x55e210(0x1f2)][_0x35651d[_0x55e210(0x1f6)]['brand']][_0x35651d['_id']['category']][_0x55e210(0x1c1)]=0x0),_0x28eb41[_0x55e210(0x1f2)][_0x35651d[_0x55e210(0x1f6)]['brand']][_0x35651d[_0x55e210(0x1f6)][_0x55e210(0x222)]][_0x55e210(0x1c4)]=_0x35651d[_0x55e210(0x1d4)],_0x28eb41[_0x55e210(0x1f2)][_0x35651d['_id'][_0x55e210(0x1f3)]][_0x35651d[_0x55e210(0x1f6)]['category']][_0x55e210(0x1c1)]=_0x35651d['NetPrice'];}const _0x2c66cf=await sales_sa[_0x55e210(0x1cf)]([{'$match':{'date':{'$gte':_0x53e590,'$lte':_0x36f811},'sale_product.isFG':'false','status_data':_0x55e210(0x212)}},{'$unwind':'$sale_product'},{'$match':{'sale_product.isFG':_0x55e210(0x212)}},{'$lookup':{'from':_0x55e210(0x1ee),'localField':_0x55e210(0x20d),'foreignField':_0x55e210(0x21a),'as':_0x55e210(0x1cb)}},{'$unwind':_0x55e210(0x23d)},{'$group':{'_id':{'category':_0x55e210(0x225),'brand':_0x55e210(0x1da)},'totalQty':{'$sum':_0x55e210(0x242)},'products':{'$push':{'qty':_0x55e210(0x242),'NetPrice':_0x55e210(0x1ca),'discount':'$sale_product.discount','adj_discount':_0x55e210(0x1c9),'product_details':{'prod_name':'$product_info.name','product_code':'$product_info.product_code','category':_0x55e210(0x225),'brand':'$product_info.brand','gross_price':_0x55e210(0x1bc)}}}}},{'$unwind':_0x55e210(0x239)},{'$group':{'_id':{'category':_0x55e210(0x23c),'brand':_0x55e210(0x245)},'totalQty':{'$sum':'$products.qty'},'totalGross':{'$sum':{'$multiply':['$products.qty',_0x55e210(0x220)]}},'NetPrice':{'$sum':_0x55e210(0x23f)},'discount':{'$sum':_0x55e210(0x1ce)},'adj_discount':{'$sum':_0x55e210(0x1e5)},'product_details':{'$first':_0x55e210(0x23a)}}},{'$group':{'_id':{'category':_0x55e210(0x243),'brand':_0x55e210(0x1c5)},'totalQty':{'$sum':'$totalQty'},'totalGross':{'$sum':_0x55e210(0x1bd)},'NetPrice':{'$sum':_0x55e210(0x216)},'discount':{'$sum':_0x55e210(0x22e)},'adj_discount':{'$sum':_0x55e210(0x1fb)},'products':{'$push':{'qty':_0x55e210(0x20f),'category':_0x55e210(0x243),'brand':_0x55e210(0x1c5),'product_details':'$product_details'}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x1fa1bc=[];_0x1fa1bc[_0x55e210(0x233)]={};for(let _0x40a130=0x0;_0x40a130<=_0x2c66cf[_0x55e210(0x232)]-0x1;_0x40a130++){const _0x56175c=_0x2c66cf[_0x40a130];!_0x1fa1bc[_0x55e210(0x233)][_0x56175c[_0x55e210(0x1f6)][_0x55e210(0x1f3)]]&&(_0x1fa1bc[_0x55e210(0x233)][_0x56175c[_0x55e210(0x1f6)]['brand']]={}),!_0x1fa1bc['sales_sa_year'][_0x56175c[_0x55e210(0x1f6)][_0x55e210(0x1f3)]][_0x56175c[_0x55e210(0x1f6)][_0x55e210(0x222)]]&&(_0x1fa1bc[_0x55e210(0x233)][_0x56175c[_0x55e210(0x1f6)]['brand']][_0x56175c[_0x55e210(0x1f6)]['category']]={}),!_0x1fa1bc[_0x55e210(0x233)][_0x56175c[_0x55e210(0x1f6)]['brand']][_0x56175c[_0x55e210(0x1f6)][_0x55e210(0x222)]][_0x55e210(0x1c4)]&&(_0x1fa1bc[_0x55e210(0x233)][_0x56175c[_0x55e210(0x1f6)][_0x55e210(0x1f3)]][_0x56175c['_id'][_0x55e210(0x222)]]['qty']=0x0),!_0x1fa1bc[_0x55e210(0x233)][_0x56175c[_0x55e210(0x1f6)][_0x55e210(0x1f3)]][_0x56175c[_0x55e210(0x1f6)]['category']][_0x55e210(0x1c1)]&&(_0x1fa1bc[_0x55e210(0x233)][_0x56175c['_id'][_0x55e210(0x1f3)]][_0x56175c[_0x55e210(0x1f6)][_0x55e210(0x222)]][_0x55e210(0x1c1)]=0x0),_0x1fa1bc[_0x55e210(0x233)][_0x56175c[_0x55e210(0x1f6)][_0x55e210(0x1f3)]][_0x56175c[_0x55e210(0x1f6)][_0x55e210(0x222)]]['qty']=_0x56175c[_0x55e210(0x1d4)],_0x1fa1bc['sales_sa_year'][_0x56175c[_0x55e210(0x1f6)]['brand']][_0x56175c[_0x55e210(0x1f6)]['category']][_0x55e210(0x1c1)]=_0x56175c[_0x55e210(0x1ea)];}_0x2bc745[_0x55e210(0x1f5)]({'product':_0x3167aa[_0x55e210(0x205)],'month_data':_0x28eb41[_0x55e210(0x1f2)],'year_data':_0x1fa1bc[_0x55e210(0x233)]});}catch(_0x4c4118){console[_0x55e210(0x22d)](_0x4c4118);}}),router[a0_0x13fb0c(0x209)](a0_0x13fb0c(0x1c2),auth,async(_0x3d90bc,_0x33fe73)=>{const _0xb432fa=a0_0x13fb0c;try{const _0xd21751=await purchases_finished[_0xb432fa(0x1cf)]([{'$unwind':'$product'},{'$group':{'_id':_0xb432fa(0x218),'totalQuantity':{'$sum':'$product.quantity'},'date':{'$first':_0xb432fa(0x218)}}},{'$sort':{'date':0x1}}]);_0x33fe73['json'](_0xd21751);}catch(_0x25cfd1){_0x33fe73[_0xb432fa(0x1f5)](_0x25cfd1);}}),router['get']('/fg_out_line',auth,async(_0x28fdad,_0x425715)=>{const _0x1eae96=a0_0x13fb0c;try{const _0x2f6385=await sales_finished['aggregate']([{'$match':{'finalize':_0x1eae96(0x20b)}},{'$unwind':_0x1eae96(0x227)},{'$group':{'_id':'$date','totalQuantity':{'$sum':_0x1eae96(0x1c3)},'date':{'$first':_0x1eae96(0x218)}}},{'$sort':{'date':0x1}}]);_0x425715[_0x1eae96(0x1f5)](_0x2f6385);}catch(_0x24aed0){_0x425715[_0x1eae96(0x1f5)](_0x24aed0);}}),module[a0_0x13fb0c(0x236)]=router;