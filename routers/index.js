function a0_0x25d5(){const _0x55a45d=['index','$to_warehouse','$products.qty','$products.product_details.brand','email','False','$_id.brand','../middleware/auth','$return_sale','$product.from_quantity','brand','/paid_data_table','express','render','body','$NetPrice','sales_sa_year','$sale_product.adj_discount','121334rHAzmb','/avg_data','../public/language/languages.json','Arabic','user','/pending_data','$sale_product.price','flash','$totalGross','sale_product.product_code','$products','_id','qty','Chinese','$product_info.gross_price','$totalQty','$_id.category','$products.NetPrice','Portuguese\x20(BR)','log','/paid_data','NetPrice','Spanish','$product_info.brand','errors','English\x20(US)','product_info','product_code','$product_info.product_code','28cUgmBO','$total_price','French','$sale_product.totalprice','$brand','Hindi','../models/all_models','$product.product_name','net','$product_info.category','get','false','account_category','$product_info.name','$name','$product_code','/index','$product','$return_product','Finished\x20Goods','24UGnNiO','totalQty','$product.to_quantity','$products.product_details.category','valueOf','Portuguese','findOne','success','$sale_product.quantity','English','Router','$product_list.product_stock','$products.adj_discount','$product_list','$count','$product_details','/get_count','28363239PZqyJA','$sale_product.real_qty_unit_val','/sales_chart','$from_warehouse','sales_sa_month','1799581RHnknO','language','/price_chart','fss','collection_price','$discount','$product_info','$sale_product','1105192aIewzM','/sales_data_dashboard','post','aggregate','products','$sale_product.discount','$category','$total_amount','push','find','$date','json','$products.product_details','warehouse_category','5843352lGHHTi','cat_brand','/pending_data_table','/my_inv','853772xcsztn','$adj_discount','$products.product_details.gross_price','Raw\x20Materials','length','$products.discount','index_acc','$sumprice','$product.quantity','True','$return_sale.sale_qty','category','acc','findById','2291185sCsobV'];a0_0x25d5=function(){return _0x55a45d;};return a0_0x25d5();}function a0_0x34d4(_0x4e9e84,_0x44133f){const _0x25d591=a0_0x25d5();return a0_0x34d4=function(_0x34d4ab,_0xfad06a){_0x34d4ab=_0x34d4ab-0xc1;let _0x14bf54=_0x25d591[_0x34d4ab];return _0x14bf54;},a0_0x34d4(_0x4e9e84,_0x44133f);}const a0_0x8edafc=a0_0x34d4;(function(_0x520ebc,_0x2c770f){const _0x37597b=a0_0x34d4,_0x1ec4c6=_0x520ebc();while(!![]){try{const _0x2400d6=parseInt(_0x37597b(0xd3))/0x1*(parseInt(_0x37597b(0x138))/0x2)+-parseInt(_0x37597b(0x113))/0x3+-parseInt(_0x37597b(0x117))/0x4+-parseInt(_0x37597b(0x125))/0x5*(parseInt(_0x37597b(0xe7))/0x6)+parseInt(_0x37597b(0xfd))/0x7+-parseInt(_0x37597b(0x105))/0x8+parseInt(_0x37597b(0xf8))/0x9;if(_0x2400d6===_0x2c770f)break;else _0x1ec4c6['push'](_0x1ec4c6['shift']());}catch(_0x18ac3d){_0x1ec4c6['push'](_0x1ec4c6['shift']());}}}(a0_0x25d5,0xee03a));const express=require(a0_0x8edafc(0x132)),app=express(),router=express[a0_0x8edafc(0xf1)](),auth=require(a0_0x8edafc(0x12d)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order}=require(a0_0x8edafc(0xd9)),users=require(a0_0x8edafc(0x13a));router[a0_0x8edafc(0xdd)](a0_0x8edafc(0xe3),auth,async(_0x5b5b92,_0x5ea0dc)=>{const _0xa332e7=a0_0x8edafc;try{const {username:_0x4ab6a4,email:_0x6bfa5c,role:_0x35923c}=_0x5b5b92['user'],_0x1a39ce=_0x5b5b92['user'],_0x3222a5=await master_shop[_0xa332e7(0x10e)](),_0x25c581=await profile[_0xa332e7(0xed)]({'email':_0x1a39ce[_0xa332e7(0x12a)]});if(_0x3222a5[0x0][_0xa332e7(0xfe)]==_0xa332e7(0xcf))var _0x19e35b=users[_0xa332e7(0xf0)];else{if(_0x3222a5[0x0]['language']=='Hindi')var _0x19e35b=users[_0xa332e7(0xd8)];else{if(_0x3222a5[0x0][_0xa332e7(0xfe)]=='German')var _0x19e35b=users['German'];else{if(_0x3222a5[0x0][_0xa332e7(0xfe)]==_0xa332e7(0xcc))var _0x19e35b=users[_0xa332e7(0xcc)];else{if(_0x3222a5[0x0][_0xa332e7(0xfe)]==_0xa332e7(0xd5))var _0x19e35b=users['French'];else{if(_0x3222a5[0x0][_0xa332e7(0xfe)]==_0xa332e7(0xc8))var _0x19e35b=users[_0xa332e7(0xec)];else{if(_0x3222a5[0x0][_0xa332e7(0xfe)]==_0xa332e7(0xc3))var _0x19e35b=users[_0xa332e7(0xc3)];else{if(_0x3222a5[0x0][_0xa332e7(0xfe)]=='Arabic\x20(ae)')var _0x19e35b=users[_0xa332e7(0x13b)];}}}}}}}if(_0x1a39ce[_0xa332e7(0xdf)]=='wm'){var _0x1b972c;if(_0x1a39ce[_0xa332e7(0x112)]==_0xa332e7(0x11a)){const _0x3ec053=await product[_0xa332e7(0x10e)]({'product_category':'Raw\x20Materials'});_0x1b972c=_0x3ec053[_0xa332e7(0x11b)];}else{if(_0x1a39ce[_0xa332e7(0x112)]==_0xa332e7(0xe6)){const _0x35d077=await product[_0xa332e7(0x10e)]({'product_category':'Finished\x20Goods'});_0x1b972c=_0x35d077[_0xa332e7(0x11b)];}else{const _0x4303ae=await product[_0xa332e7(0x10e)]();_0x1b972c=_0x4303ae[_0xa332e7(0x11b)];}}const _0x5d0fd4=await sales['aggregate']([{'$group':{'_id':null,'total_price':{'$sum':_0xa332e7(0xd4)}}}]),_0x59e501=await sales['aggregate']([{'$unwind':_0xa332e7(0x104)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0xa332e7(0xef)}}}]),_0x18e9ff=await sales_return[_0xa332e7(0x108)]([{'$group':{'_id':null,'total':{'$sum':'$total_amount'}}}]),_0x54d7f6=await sales_return[_0xa332e7(0x108)]([{'$unwind':_0xa332e7(0x12e)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_sale.sale_qty'}}}]),_0x4f6539=await purchases[_0xa332e7(0x108)]([{'$group':{'_id':null,'total_amount':{'$sum':_0xa332e7(0x10c)}}}]),_0x3e7e45=await purchases_return[_0xa332e7(0x108)]([{'$group':{'_id':null,'total':{'$sum':_0xa332e7(0x10c)}}}]),_0x770078=await purchases_return[_0xa332e7(0x108)]([{'$unwind':_0xa332e7(0xe5)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_product.return_qty'}}}]),_0xc9210c=await purchases[_0xa332e7(0x108)]([{'$unwind':_0xa332e7(0xe4)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0xa332e7(0x11f)}}}]),_0x28ff5a=await purchases[_0xa332e7(0x108)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x5a41d7=await sales[_0xa332e7(0x108)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0xd8cb05=await transfers[_0xa332e7(0x108)]([{'$unwind':'$product'},{'$group':{'_id':_0xa332e7(0xda),'fromWarehouse':{'$first':_0xa332e7(0xfb)},'toWareHouse':{'$first':'$to_warehouse'},'FromtotalQuantity':{'$sum':'$product.from_quantity'},'TototalQuantity':{'$sum':_0xa332e7(0xe9)}}}]),_0x36a422=await categories['find'](),_0x1388b7=await product[_0xa332e7(0x10e)](),_0x3e287e=await suppliers[_0xa332e7(0x10e)](),_0x429784=await customer[_0xa332e7(0x10e)]();_0x5ea0dc[_0xa332e7(0x133)]('index',{'success':_0x5b5b92[_0xa332e7(0x13f)](_0xa332e7(0xee)),'errors':_0x5b5b92['flash'](_0xa332e7(0xce)),'role':_0x1a39ce,'profile':_0x25c581,'sale':_0x5d0fd4[0x0],'sales_return':_0x18e9ff[0x0],'purchases':_0x4f6539[0x0],'purchases_return':_0x3e7e45[0x0],'purchases_table':_0x28ff5a,'sales_table':_0x5a41d7,'categories':_0x36a422[_0xa332e7(0x11b)],'product':_0x1388b7['length'],'suppliers':_0x3e287e[_0xa332e7(0x11b)],'customer':_0x429784['length'],'master_shop':_0x3222a5,'language':_0x19e35b,'sale_QTY':_0x59e501[0x0],'purchases_QTY':_0xc9210c[0x0],'sales_return_QTY':_0x54d7f6[0x0],'purchases_return_QTY':_0x770078[0x0],'transfer_table':_0xd8cb05,'product_cnt':_0x1b972c});}else{if(_0x1a39ce[_0xa332e7(0xdf)]=='sa'){const _0x422f33=await staff['findOne']({'email':_0x1a39ce[_0xa332e7(0x12a)]}),_0x46200c=await sales_sa[_0xa332e7(0x10e)]({'sales_staff_id':_0x422f33[_0xa332e7(0xc1)]}),_0x322238=await sales_sa[_0xa332e7(0x10e)]({'sales_staff_id':_0x422f33['_id'],'paid':'True'}),_0x1d5299=await sales_sa[_0xa332e7(0x10e)]({'sales_staff_id':_0x422f33[_0xa332e7(0xc1)],'paid':_0xa332e7(0x12b)}),_0x43a7ff=await sales_sa['aggregate']([{'$match':{'sales_staff_id':_0x422f33[_0xa332e7(0xc1)]['valueOf']()}},{'$unwind':'$sale_product'},{'$group':{'_id':null,'sumprice':{'$sum':_0xa332e7(0x13e)},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':[_0xa332e7(0x11e),_0xa332e7(0xf5)]},0x2]}}}]),_0x2db2d5=await staff[_0xa332e7(0x108)]([{'$match':{'email':_0x1a39ce[_0xa332e7(0x12a)]}},{'$unwind':_0xa332e7(0xf4)},{'$group':{'_id':null,'totalQTY':{'$sum':'$product_list.product_stock'}}}]);_0x5ea0dc['render']('index_sa',{'success':_0x5b5b92[_0xa332e7(0x13f)]('success'),'errors':_0x5b5b92[_0xa332e7(0x13f)](_0xa332e7(0xce)),'role':_0x1a39ce,'profile':_0x25c581,'master_shop':_0x3222a5,'language':_0x19e35b,'cntPaid':_0x322238,'cntNotPaid':_0x1d5299,'avg_price':_0x43a7ff[0x0],'my_stock':_0x2db2d5[0x0],'staff_arr':_0x422f33});}else{if(_0x1a39ce[_0xa332e7(0xdf)]==_0xa332e7(0x123)){const _0x1aff20=await staff[_0xa332e7(0xed)]({'email':_0x1a39ce[_0xa332e7(0x12a)]});_0x5ea0dc['render'](_0xa332e7(0x11d),{'success':_0x5b5b92[_0xa332e7(0x13f)](_0xa332e7(0xee)),'errors':_0x5b5b92[_0xa332e7(0x13f)](_0xa332e7(0xce)),'role':_0x1a39ce,'profile':_0x25c581,'master_shop':_0x3222a5,'language':_0x19e35b}),_0x5ea0dc[_0xa332e7(0x110)](_0x1aff20);}else{if(_0x1a39ce[_0xa332e7(0xdf)]=='sad'||_0x1a39ce[_0xa332e7(0xdf)]=='rsm'||_0x1a39ce[_0xa332e7(0xdf)]==_0xa332e7(0x100)){const _0x259ba2=await staff[_0xa332e7(0xed)]({'email':_0x1a39ce['email']});_0x5ea0dc[_0xa332e7(0x133)]('index_asd',{'success':_0x5b5b92[_0xa332e7(0x13f)]('success'),'errors':_0x5b5b92['flash'](_0xa332e7(0xce)),'role':_0x1a39ce,'profile':_0x25c581,'master_shop':_0x3222a5,'language':_0x19e35b});}else{var _0x1b972c;if(_0x1a39ce[_0xa332e7(0x112)]==_0xa332e7(0x11a)){const _0x10b5a3=await product['find']({'product_category':_0xa332e7(0x11a)});_0x1b972c=_0x10b5a3[_0xa332e7(0x11b)];}else{if(_0x1a39ce[_0xa332e7(0x112)]==_0xa332e7(0xe6)){const _0x47eed4=await product[_0xa332e7(0x10e)]({'product_category':'Finished\x20Goods'});_0x1b972c=_0x47eed4[_0xa332e7(0x11b)];}else{const _0x3b64cf=await product[_0xa332e7(0x10e)]();_0x1b972c=_0x3b64cf[_0xa332e7(0x11b)];}}const _0x2907af=await sales[_0xa332e7(0x108)]([{'$group':{'_id':null,'total_price':{'$sum':_0xa332e7(0xd4)}}}]),_0x493643=await sales[_0xa332e7(0x108)]([{'$unwind':'$sale_product'},{'$group':{'_id':null,'totalQuantity':{'$sum':_0xa332e7(0xef)}}}]),_0x1817b9=await sales_return[_0xa332e7(0x108)]([{'$group':{'_id':null,'total':{'$sum':_0xa332e7(0x10c)}}}]),_0x47982f=await sales_return['aggregate']([{'$unwind':_0xa332e7(0x12e)},{'$group':{'_id':null,'totalQuantity':{'$sum':_0xa332e7(0x121)}}}]),_0x370740=await purchases['aggregate']([{'$group':{'_id':null,'total_amount':{'$sum':'$total_amount'}}}]),_0x3eba35=await purchases_return[_0xa332e7(0x108)]([{'$group':{'_id':null,'total':{'$sum':_0xa332e7(0x10c)}}}]),_0x170bcd=await purchases_return[_0xa332e7(0x108)]([{'$unwind':_0xa332e7(0xe5)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$return_product.return_qty'}}}]),_0x43759c=await purchases[_0xa332e7(0x108)]([{'$unwind':_0xa332e7(0xe4)},{'$group':{'_id':null,'totalQuantity':{'$sum':'$product.quantity'}}}]),_0x198330=await purchases[_0xa332e7(0x108)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0x56bbc4=await sales[_0xa332e7(0x108)]([{'$sort':{'invoice':-0x1}},{'$limit':0x5},{'$sort':{'invoice':0x1}}]),_0xbed3eb=await transfers[_0xa332e7(0x108)]([{'$unwind':_0xa332e7(0xe4)},{'$group':{'_id':_0xa332e7(0xda),'fromWarehouse':{'$first':_0xa332e7(0xfb)},'toWareHouse':{'$first':_0xa332e7(0x127)},'FromtotalQuantity':{'$sum':_0xa332e7(0x12f)},'TototalQuantity':{'$sum':_0xa332e7(0xe9)}}}]),_0x14093b=await categories[_0xa332e7(0x10e)](),_0x28884b=await product[_0xa332e7(0x10e)](),_0xf1bb5=await suppliers['find'](),_0x5d07d6=await customer[_0xa332e7(0x10e)]();_0x5ea0dc[_0xa332e7(0x133)](_0xa332e7(0x126),{'success':_0x5b5b92[_0xa332e7(0x13f)](_0xa332e7(0xee)),'errors':_0x5b5b92[_0xa332e7(0x13f)](_0xa332e7(0xce)),'role':_0x1a39ce,'profile':_0x25c581,'sale':_0x2907af[0x0],'sales_return':_0x1817b9[0x0],'purchases':_0x370740[0x0],'purchases_return':_0x3eba35[0x0],'purchases_table':_0x198330,'sales_table':_0x56bbc4,'categories':_0x14093b[_0xa332e7(0x11b)],'product':_0x28884b[_0xa332e7(0x11b)],'suppliers':_0xf1bb5['length'],'customer':_0x5d07d6[_0xa332e7(0x11b)],'master_shop':_0x3222a5,'language':_0x19e35b,'sale_QTY':_0x493643[0x0],'purchases_QTY':_0x43759c[0x0],'sales_return_QTY':_0x47982f[0x0],'purchases_return_QTY':_0x170bcd[0x0],'transfer_table':_0xbed3eb,'product_cnt':_0x1b972c});}}}}}catch(_0x359a9e){console['log'](_0x359a9e);}}),router[a0_0x8edafc(0xdd)](a0_0x8edafc(0x115),auth,async(_0x36ba9c,_0x33ff70)=>{const _0x222198=a0_0x8edafc;try{const _0x482195=_0x36ba9c[_0x222198(0x13c)],_0x11e923=await staff[_0x222198(0xed)]({'email':_0x482195[_0x222198(0x12a)]}),_0x17426b=await sales_sa[_0x222198(0x108)]([{'$match':{'sales_staff_id':_0x11e923['_id'][_0x222198(0xeb)](),'paid':_0x222198(0x12b)}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x33ff70[_0x222198(0x110)](_0x17426b);}catch(_0x3569ab){_0x33ff70[_0x222198(0x110)](_0x3569ab);}}),router['get'](a0_0x8edafc(0x13d),auth,async(_0x49cc71,_0x5b7f63)=>{const _0x132fdd=a0_0x8edafc;try{const _0x3f7a76=_0x49cc71[_0x132fdd(0x13c)],_0x2896d1=await staff[_0x132fdd(0xed)]({'email':_0x3f7a76['email']}),_0x3a9fbb=await sales_sa['find']({'sales_staff_id':_0x2896d1[_0x132fdd(0xc1)],'paid':'False'});_0x5b7f63['json'](_0x3a9fbb);}catch(_0x27c6e2){_0x5b7f63['json'](_0x27c6e2);}}),router['post'](a0_0x8edafc(0xf7),auth,async(_0x5750bb,_0x4b8de6)=>{const _0x1f86be=a0_0x8edafc;try{const {sttaff_id:_0x1c3b0f,warehouse:_0x22819a,account_category:_0x167286}=_0x5750bb['user'],_0x54b5b1=await sales_order[_0x1f86be(0x108)]([{'$match':{'accounting_account_id':_0x1c3b0f,'accounting_account_confirm':_0x1f86be(0xde)}}]);_0x4b8de6[_0x1f86be(0x110)](_0x54b5b1);}catch(_0x6fb231){}}),router['get'](a0_0x8edafc(0x131),auth,async(_0xeda780,_0x39efcf)=>{const _0x3c71b0=a0_0x8edafc;try{const _0x5e118b=_0xeda780[_0x3c71b0(0x13c)],_0x27b8fe=await staff[_0x3c71b0(0xed)]({'email':_0x5e118b['email']}),_0x2f064f=await sales_sa['find']({'sales_staff_id':_0x27b8fe[_0x3c71b0(0xc1)],'paid':_0x3c71b0(0x120)});_0x39efcf[_0x3c71b0(0x110)](_0x2f064f);}catch(_0x9c224d){_0x39efcf[_0x3c71b0(0x110)](_0x9c224d);}}),router[a0_0x8edafc(0xdd)](a0_0x8edafc(0xca),auth,async(_0x30e39c,_0x197178)=>{const _0x3b8149=a0_0x8edafc;try{const _0x5afa58=_0x30e39c['user'],_0x585c8a=await staff[_0x3b8149(0xed)]({'email':_0x5afa58[_0x3b8149(0x12a)]}),_0x177ee9=await sales_sa['aggregate']([{'$match':{'sales_staff_id':_0x585c8a[_0x3b8149(0xc1)][_0x3b8149(0xeb)](),'paid':_0x3b8149(0x120)}},{'$limit':0x4},{'$sort':{'invoice':-0x1}}]);_0x197178[_0x3b8149(0x110)](_0x177ee9);}catch(_0x356aa2){_0x197178[_0x3b8149(0x110)](_0x356aa2);}}),router[a0_0x8edafc(0x107)]('/update_data',auth,async(_0x19bfd6,_0x28e6f6)=>{const _0x304eff=a0_0x8edafc;try{const {id:_0x483b5c,price:_0x1829a2}=_0x19bfd6['body'],_0x3810ba=await sales_sa[_0x304eff(0x124)](_0x483b5c);_0x3810ba['paid']='True',_0x3810ba[_0x304eff(0x101)]=parseFloat(_0x1829a2);const _0x419b09=await _0x3810ba['save']();_0x28e6f6[_0x304eff(0x110)](_0x419b09);}catch(_0x425990){_0x28e6f6['json'](_0x425990);}}),router[a0_0x8edafc(0xdd)](a0_0x8edafc(0x13d),auth,async(_0x4dc2a1,_0x2361db)=>{const _0x52d788=a0_0x8edafc;try{const _0x430138=_0x4dc2a1['user'],_0x25ee32=await staff[_0x52d788(0xed)]({'email':_0x430138['email']}),_0x265d14=await sales_sa[_0x52d788(0x10e)]({'sales_staff_id':_0x25ee32[_0x52d788(0xc1)],'paid':_0x52d788(0x12b)});_0x2361db[_0x52d788(0x110)](_0x265d14);}catch(_0x13f485){_0x2361db['json'](_0x13f485);}}),router[a0_0x8edafc(0xdd)](a0_0x8edafc(0x139),auth,async(_0x16430d,_0x539d47)=>{const _0x1f6662=a0_0x8edafc;try{const _0x2d0f75=_0x16430d[_0x1f6662(0x13c)],_0x5070fe=await staff[_0x1f6662(0xed)]({'email':_0x2d0f75[_0x1f6662(0x12a)]}),_0x2f11e1=await sales_sa[_0x1f6662(0x108)]([{'$match':{'sales_staff_id':_0x5070fe[_0x1f6662(0xc1)][_0x1f6662(0xeb)]()}},{'$unwind':_0x1f6662(0x104)},{'$group':{'_id':null,'sumprice':{'$sum':_0x1f6662(0x13e)},'count':{'$sum':0x1}}},{'$project':{'_id':0x0,'sumprice':0x1,'averageprice':{'$round':[{'$divide':[_0x1f6662(0x11e),'$count']},0x2]}}}]);_0x539d47[_0x1f6662(0x110)](_0x2f11e1);}catch(_0x3be14e){_0x539d47[_0x1f6662(0x110)](_0x3be14e);}}),router[a0_0x8edafc(0xdd)](a0_0x8edafc(0x116),auth,async(_0x36831a,_0x3ae837)=>{const _0x399e1c=a0_0x8edafc;try{const _0x5bab3c=_0x36831a[_0x399e1c(0x13c)],_0x2e432e=await staff[_0x399e1c(0xed)]({'email':_0x5bab3c[_0x399e1c(0x12a)]}),_0x32a9b6=await staff[_0x399e1c(0x108)]([{'$match':{'email':_0x5bab3c['email']}},{'$unwind':_0x399e1c(0xf4)},{'$match':{'product_list.isConfirm':'true'}},{'$group':{'_id':null,'totalQTY':{'$sum':_0x399e1c(0xf2)}}}]);_0x3ae837[_0x399e1c(0x110)](_0x32a9b6);}catch(_0x3225dc){_0x3ae837['json'](_0x3225dc);}}),router[a0_0x8edafc(0xdd)](a0_0x8edafc(0xfa),auth,async(_0x29a247,_0x1c7e6a)=>{const _0x2cb9e1=a0_0x8edafc;try{const _0x3279b7=_0x29a247[_0x2cb9e1(0x13c)],_0x38f99d=await staff[_0x2cb9e1(0xed)]({'email':_0x3279b7[_0x2cb9e1(0x12a)]}),_0x8f0cc5=await sales_sa[_0x2cb9e1(0x108)]([{'$match':{'sales_staff_id':_0x38f99d[_0x2cb9e1(0xc1)][_0x2cb9e1(0xeb)]()}},{'$unwind':_0x2cb9e1(0x104)},{'$group':{'_id':_0x2cb9e1(0x10f),'totalQuantity':{'$sum':_0x2cb9e1(0xef)},'date':{'$first':_0x2cb9e1(0x10f)}}},{'$sort':{'date':0x1}}]);_0x1c7e6a['json'](_0x8f0cc5);}catch(_0x456dcc){_0x1c7e6a[_0x2cb9e1(0x110)](_0x456dcc);}}),router['get'](a0_0x8edafc(0xff),auth,async(_0x2c28a1,_0x502668)=>{const _0x41b196=a0_0x8edafc;try{const _0x4253ed=_0x2c28a1[_0x41b196(0x13c)],_0x526151=await staff['findOne']({'email':_0x4253ed[_0x41b196(0x12a)]}),_0x309303=await sales_sa[_0x41b196(0x108)]([{'$match':{'sales_staff_id':_0x526151['_id'][_0x41b196(0xeb)]()}},{'$unwind':_0x41b196(0x104)},{'$group':{'_id':_0x41b196(0x10f),'totalPrice':{'$sum':_0x41b196(0xd6)},'date':{'$first':'$date'}}},{'$sort':{'date':0x1}}]);_0x502668[_0x41b196(0x110)](_0x309303);}catch(_0x21f91f){_0x502668[_0x41b196(0x110)](_0x21f91f);}}),router[a0_0x8edafc(0x107)](a0_0x8edafc(0x106),auth,async(_0x34b977,_0x3b2b29)=>{const _0x1433ed=a0_0x8edafc;try{const {date_today:_0x28f248,first_month:_0x723cfc,first_year:_0x2c41ec}=_0x34b977[_0x1433ed(0x134)],{sttaff_id:_0x24a7d5}=_0x34b977[_0x1433ed(0x13c)],_0x4b23e0=await product[_0x1433ed(0x108)]([{'$group':{'_id':{'brand':'$brand','category':_0x1433ed(0x10b)},'products':{'$push':{'name':'$name','product_code':'$product_code'}}}},{'$sort':{'_id.category':-0x1,'_id.brand':0x1}}]);var _0x3d9f45=[];_0x3d9f45[_0x1433ed(0x114)]=[];for(let _0xa5cb1a=0x0;_0xa5cb1a<=_0x4b23e0['length']-0x1;_0xa5cb1a++){const _0x56c26c=_0x4b23e0[_0xa5cb1a];_0x3d9f45[_0x1433ed(0x114)][_0x1433ed(0x10d)](_0x56c26c);}const _0x2ee4ec=await sales_sa[_0x1433ed(0x108)]([{'$match':{'date':{'$gte':_0x723cfc,'$lte':_0x28f248},'sales_staff_id':_0x24a7d5,'sale_product.isFG':_0x1433ed(0xde),'status_data':'false'}},{'$unwind':_0x1433ed(0x104)},{'$match':{'sale_product.isFG':'false'}},{'$lookup':{'from':'products','localField':'sale_product.product_code','foreignField':'product_code','as':_0x1433ed(0xd0)}},{'$unwind':_0x1433ed(0x103)},{'$group':{'_id':{'category':_0x1433ed(0xdc),'brand':_0x1433ed(0xcd)},'totalQty':{'$sum':_0x1433ed(0xf9)},'products':{'$push':{'qty':_0x1433ed(0xf9),'NetPrice':_0x1433ed(0xd6),'discount':_0x1433ed(0x10a),'adj_discount':'$sale_product.adj_discount','product_details':{'prod_name':_0x1433ed(0xe0),'product_code':_0x1433ed(0xd2),'category':_0x1433ed(0xdc),'brand':'$product_info.brand','gross_price':'$product_info.gross_price'}}}}},{'$unwind':_0x1433ed(0x142)},{'$group':{'_id':{'category':_0x1433ed(0xea),'brand':_0x1433ed(0x129)},'totalQty':{'$sum':_0x1433ed(0x128)},'totalGross':{'$sum':{'$multiply':[_0x1433ed(0x128),_0x1433ed(0x119)]}},'NetPrice':{'$sum':'$products.NetPrice'},'discount':{'$sum':_0x1433ed(0x11c)},'adj_discount':{'$sum':_0x1433ed(0xf3)},'product_details':{'$first':'$products.product_details'}}},{'$group':{'_id':{'category':'$_id.category','brand':_0x1433ed(0x12c)},'totalQty':{'$sum':_0x1433ed(0xc5)},'totalGross':{'$sum':_0x1433ed(0x140)},'NetPrice':{'$sum':_0x1433ed(0x135)},'discount':{'$sum':_0x1433ed(0x102)},'adj_discount':{'$sum':_0x1433ed(0x118)},'products':{'$push':{'qty':_0x1433ed(0xc5),'category':_0x1433ed(0xc6),'brand':_0x1433ed(0x12c),'product_details':'$product_details'}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x23e573=[];_0x23e573[_0x1433ed(0xfc)]={};for(let _0x4a4017=0x0;_0x4a4017<=_0x2ee4ec[_0x1433ed(0x11b)]-0x1;_0x4a4017++){const _0x1894fc=_0x2ee4ec[_0x4a4017];!_0x23e573['sales_sa_month'][_0x1894fc['_id'][_0x1433ed(0x130)]]&&(_0x23e573['sales_sa_month'][_0x1894fc['_id']['brand']]={}),!_0x23e573[_0x1433ed(0xfc)][_0x1894fc[_0x1433ed(0xc1)][_0x1433ed(0x130)]][_0x1894fc[_0x1433ed(0xc1)][_0x1433ed(0x122)]]&&(_0x23e573[_0x1433ed(0xfc)][_0x1894fc['_id']['brand']][_0x1894fc[_0x1433ed(0xc1)][_0x1433ed(0x122)]]={}),!_0x23e573[_0x1433ed(0xfc)][_0x1894fc['_id'][_0x1433ed(0x130)]][_0x1894fc[_0x1433ed(0xc1)][_0x1433ed(0x122)]][_0x1433ed(0xc2)]&&(_0x23e573[_0x1433ed(0xfc)][_0x1894fc[_0x1433ed(0xc1)][_0x1433ed(0x130)]][_0x1894fc[_0x1433ed(0xc1)]['category']][_0x1433ed(0xc2)]=0x0),!_0x23e573[_0x1433ed(0xfc)][_0x1894fc['_id']['brand']][_0x1894fc['_id'][_0x1433ed(0x122)]]['net']&&(_0x23e573[_0x1433ed(0xfc)][_0x1894fc['_id']['brand']][_0x1894fc[_0x1433ed(0xc1)][_0x1433ed(0x122)]]['net']=0x0),_0x23e573[_0x1433ed(0xfc)][_0x1894fc[_0x1433ed(0xc1)][_0x1433ed(0x130)]][_0x1894fc['_id'][_0x1433ed(0x122)]][_0x1433ed(0xc2)]=_0x1894fc[_0x1433ed(0xe8)],_0x23e573[_0x1433ed(0xfc)][_0x1894fc['_id'][_0x1433ed(0x130)]][_0x1894fc[_0x1433ed(0xc1)][_0x1433ed(0x122)]][_0x1433ed(0xdb)]=_0x1894fc[_0x1433ed(0xcb)];}const _0xba4aab=await sales_sa['aggregate']([{'$match':{'date':{'$gte':_0x2c41ec,'$lte':_0x28f248},'sales_staff_id':_0x24a7d5,'sale_product.isFG':_0x1433ed(0xde),'status_data':_0x1433ed(0xde)}},{'$unwind':_0x1433ed(0x104)},{'$match':{'sale_product.isFG':_0x1433ed(0xde)}},{'$lookup':{'from':'products','localField':'sale_product.product_code','foreignField':_0x1433ed(0xd1),'as':_0x1433ed(0xd0)}},{'$unwind':_0x1433ed(0x103)},{'$group':{'_id':{'category':_0x1433ed(0xdc),'brand':_0x1433ed(0xcd)},'totalQty':{'$sum':_0x1433ed(0xf9)},'products':{'$push':{'qty':'$sale_product.real_qty_unit_val','NetPrice':_0x1433ed(0xd6),'discount':_0x1433ed(0x10a),'adj_discount':_0x1433ed(0x137),'product_details':{'prod_name':_0x1433ed(0xe0),'product_code':_0x1433ed(0xd2),'category':_0x1433ed(0xdc),'brand':_0x1433ed(0xcd),'gross_price':_0x1433ed(0xc4)}}}}},{'$unwind':_0x1433ed(0x142)},{'$group':{'_id':{'category':_0x1433ed(0xea),'brand':'$products.product_details.brand'},'totalQty':{'$sum':_0x1433ed(0x128)},'totalGross':{'$sum':{'$multiply':[_0x1433ed(0x128),'$products.product_details.gross_price']}},'NetPrice':{'$sum':_0x1433ed(0xc7)},'discount':{'$sum':_0x1433ed(0x11c)},'adj_discount':{'$sum':_0x1433ed(0xf3)},'product_details':{'$first':_0x1433ed(0x111)}}},{'$group':{'_id':{'category':'$_id.category','brand':_0x1433ed(0x12c)},'totalQty':{'$sum':_0x1433ed(0xc5)},'totalGross':{'$sum':_0x1433ed(0x140)},'NetPrice':{'$sum':_0x1433ed(0x135)},'discount':{'$sum':_0x1433ed(0x102)},'adj_discount':{'$sum':'$adj_discount'},'products':{'$push':{'qty':_0x1433ed(0xc5),'category':'$_id.category','brand':_0x1433ed(0x12c),'product_details':_0x1433ed(0xf6)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x36bf8d=[];_0x36bf8d['sales_sa_year']={};for(let _0x55265b=0x0;_0x55265b<=_0xba4aab[_0x1433ed(0x11b)]-0x1;_0x55265b++){const _0x355891=_0xba4aab[_0x55265b];!_0x36bf8d[_0x1433ed(0x136)][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x130)]]&&(_0x36bf8d[_0x1433ed(0x136)][_0x355891[_0x1433ed(0xc1)]['brand']]={}),!_0x36bf8d['sales_sa_year'][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x130)]][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x122)]]&&(_0x36bf8d[_0x1433ed(0x136)][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x130)]][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x122)]]={}),!_0x36bf8d[_0x1433ed(0x136)][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x130)]][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x122)]][_0x1433ed(0xc2)]&&(_0x36bf8d[_0x1433ed(0x136)][_0x355891['_id'][_0x1433ed(0x130)]][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x122)]][_0x1433ed(0xc2)]=0x0),!_0x36bf8d[_0x1433ed(0x136)][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x130)]][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x122)]][_0x1433ed(0xdb)]&&(_0x36bf8d[_0x1433ed(0x136)][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x130)]][_0x355891['_id'][_0x1433ed(0x122)]][_0x1433ed(0xdb)]=0x0),_0x36bf8d[_0x1433ed(0x136)][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x130)]][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x122)]]['qty']=_0x355891[_0x1433ed(0xe8)],_0x36bf8d[_0x1433ed(0x136)][_0x355891[_0x1433ed(0xc1)][_0x1433ed(0x130)]][_0x355891['_id'][_0x1433ed(0x122)]][_0x1433ed(0xdb)]=_0x355891[_0x1433ed(0xcb)];}_0x3b2b29[_0x1433ed(0x110)]({'product':_0x3d9f45['cat_brand'],'month_data':_0x23e573[_0x1433ed(0xfc)],'year_data':_0x36bf8d[_0x1433ed(0x136)]});}catch(_0x25f1ad){console[_0x1433ed(0xc9)](_0x25f1ad);}}),router[a0_0x8edafc(0x107)]('/sales_data__admin_dashboard',auth,async(_0x201072,_0x4e060c)=>{const _0x1d27f6=a0_0x8edafc;try{const {date_today:_0x22bcd8,first_month:_0x103970,first_year:_0x55416d}=_0x201072[_0x1d27f6(0x134)],{sttaff_id:_0x239b56}=_0x201072[_0x1d27f6(0x13c)],_0xd34504=await product[_0x1d27f6(0x108)]([{'$group':{'_id':{'brand':_0x1d27f6(0xd7),'category':_0x1d27f6(0x10b)},'products':{'$push':{'name':_0x1d27f6(0xe1),'product_code':_0x1d27f6(0xe2)}}}},{'$sort':{'_id.category':-0x1,'_id.brand':0x1}}]);var _0x31f8a6=[];_0x31f8a6[_0x1d27f6(0x114)]=[];for(let _0x438a0c=0x0;_0x438a0c<=_0xd34504[_0x1d27f6(0x11b)]-0x1;_0x438a0c++){const _0x5b2c80=_0xd34504[_0x438a0c];_0x31f8a6[_0x1d27f6(0x114)][_0x1d27f6(0x10d)](_0x5b2c80);}const _0x3f34b7=await sales_sa[_0x1d27f6(0x108)]([{'$match':{'date':{'$gte':_0x103970,'$lte':_0x22bcd8},'sale_product.isFG':_0x1d27f6(0xde),'status_data':_0x1d27f6(0xde)}},{'$unwind':'$sale_product'},{'$match':{'sale_product.isFG':_0x1d27f6(0xde)}},{'$lookup':{'from':_0x1d27f6(0x109),'localField':'sale_product.product_code','foreignField':'product_code','as':_0x1d27f6(0xd0)}},{'$unwind':_0x1d27f6(0x103)},{'$group':{'_id':{'category':_0x1d27f6(0xdc),'brand':_0x1d27f6(0xcd)},'totalQty':{'$sum':_0x1d27f6(0xf9)},'products':{'$push':{'qty':_0x1d27f6(0xf9),'NetPrice':_0x1d27f6(0xd6),'discount':_0x1d27f6(0x10a),'adj_discount':_0x1d27f6(0x137),'product_details':{'prod_name':_0x1d27f6(0xe0),'product_code':_0x1d27f6(0xd2),'category':_0x1d27f6(0xdc),'brand':'$product_info.brand','gross_price':'$product_info.gross_price'}}}}},{'$unwind':'$products'},{'$group':{'_id':{'category':_0x1d27f6(0xea),'brand':_0x1d27f6(0x129)},'totalQty':{'$sum':'$products.qty'},'totalGross':{'$sum':{'$multiply':[_0x1d27f6(0x128),'$products.product_details.gross_price']}},'NetPrice':{'$sum':_0x1d27f6(0xc7)},'discount':{'$sum':'$products.discount'},'adj_discount':{'$sum':_0x1d27f6(0xf3)},'product_details':{'$first':_0x1d27f6(0x111)}}},{'$group':{'_id':{'category':'$_id.category','brand':'$_id.brand'},'totalQty':{'$sum':_0x1d27f6(0xc5)},'totalGross':{'$sum':_0x1d27f6(0x140)},'NetPrice':{'$sum':'$NetPrice'},'discount':{'$sum':_0x1d27f6(0x102)},'adj_discount':{'$sum':_0x1d27f6(0x118)},'products':{'$push':{'qty':_0x1d27f6(0xc5),'category':_0x1d27f6(0xc6),'brand':_0x1d27f6(0x12c),'product_details':'$product_details'}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x215421=[];_0x215421[_0x1d27f6(0xfc)]={};for(let _0x13c829=0x0;_0x13c829<=_0x3f34b7[_0x1d27f6(0x11b)]-0x1;_0x13c829++){const _0x54c99d=_0x3f34b7[_0x13c829];!_0x215421[_0x1d27f6(0xfc)][_0x54c99d[_0x1d27f6(0xc1)][_0x1d27f6(0x130)]]&&(_0x215421['sales_sa_month'][_0x54c99d[_0x1d27f6(0xc1)][_0x1d27f6(0x130)]]={}),!_0x215421['sales_sa_month'][_0x54c99d[_0x1d27f6(0xc1)]['brand']][_0x54c99d[_0x1d27f6(0xc1)][_0x1d27f6(0x122)]]&&(_0x215421[_0x1d27f6(0xfc)][_0x54c99d[_0x1d27f6(0xc1)][_0x1d27f6(0x130)]][_0x54c99d[_0x1d27f6(0xc1)][_0x1d27f6(0x122)]]={}),!_0x215421[_0x1d27f6(0xfc)][_0x54c99d[_0x1d27f6(0xc1)][_0x1d27f6(0x130)]][_0x54c99d['_id'][_0x1d27f6(0x122)]]['qty']&&(_0x215421[_0x1d27f6(0xfc)][_0x54c99d[_0x1d27f6(0xc1)]['brand']][_0x54c99d[_0x1d27f6(0xc1)][_0x1d27f6(0x122)]][_0x1d27f6(0xc2)]=0x0),!_0x215421[_0x1d27f6(0xfc)][_0x54c99d['_id'][_0x1d27f6(0x130)]][_0x54c99d['_id'][_0x1d27f6(0x122)]]['net']&&(_0x215421['sales_sa_month'][_0x54c99d[_0x1d27f6(0xc1)][_0x1d27f6(0x130)]][_0x54c99d[_0x1d27f6(0xc1)][_0x1d27f6(0x122)]][_0x1d27f6(0xdb)]=0x0),_0x215421[_0x1d27f6(0xfc)][_0x54c99d[_0x1d27f6(0xc1)]['brand']][_0x54c99d['_id'][_0x1d27f6(0x122)]][_0x1d27f6(0xc2)]=_0x54c99d[_0x1d27f6(0xe8)],_0x215421[_0x1d27f6(0xfc)][_0x54c99d['_id'][_0x1d27f6(0x130)]][_0x54c99d[_0x1d27f6(0xc1)][_0x1d27f6(0x122)]][_0x1d27f6(0xdb)]=_0x54c99d[_0x1d27f6(0xcb)];}const _0x1cb41c=await sales_sa[_0x1d27f6(0x108)]([{'$match':{'date':{'$gte':_0x55416d,'$lte':_0x22bcd8},'sale_product.isFG':_0x1d27f6(0xde),'status_data':'false'}},{'$unwind':'$sale_product'},{'$match':{'sale_product.isFG':_0x1d27f6(0xde)}},{'$lookup':{'from':_0x1d27f6(0x109),'localField':_0x1d27f6(0x141),'foreignField':'product_code','as':_0x1d27f6(0xd0)}},{'$unwind':_0x1d27f6(0x103)},{'$group':{'_id':{'category':_0x1d27f6(0xdc),'brand':_0x1d27f6(0xcd)},'totalQty':{'$sum':_0x1d27f6(0xf9)},'products':{'$push':{'qty':_0x1d27f6(0xf9),'NetPrice':_0x1d27f6(0xd6),'discount':_0x1d27f6(0x10a),'adj_discount':_0x1d27f6(0x137),'product_details':{'prod_name':_0x1d27f6(0xe0),'product_code':'$product_info.product_code','category':_0x1d27f6(0xdc),'brand':_0x1d27f6(0xcd),'gross_price':_0x1d27f6(0xc4)}}}}},{'$unwind':_0x1d27f6(0x142)},{'$group':{'_id':{'category':_0x1d27f6(0xea),'brand':_0x1d27f6(0x129)},'totalQty':{'$sum':'$products.qty'},'totalGross':{'$sum':{'$multiply':[_0x1d27f6(0x128),_0x1d27f6(0x119)]}},'NetPrice':{'$sum':_0x1d27f6(0xc7)},'discount':{'$sum':_0x1d27f6(0x11c)},'adj_discount':{'$sum':_0x1d27f6(0xf3)},'product_details':{'$first':_0x1d27f6(0x111)}}},{'$group':{'_id':{'category':_0x1d27f6(0xc6),'brand':_0x1d27f6(0x12c)},'totalQty':{'$sum':'$totalQty'},'totalGross':{'$sum':_0x1d27f6(0x140)},'NetPrice':{'$sum':_0x1d27f6(0x135)},'discount':{'$sum':_0x1d27f6(0x102)},'adj_discount':{'$sum':'$adj_discount'},'products':{'$push':{'qty':_0x1d27f6(0xc5),'category':'$_id.category','brand':_0x1d27f6(0x12c),'product_details':_0x1d27f6(0xf6)}}}},{'$sort':{'_id.dsi':-0x1,'_id.date':0x1}}]);var _0x25835c=[];_0x25835c['sales_sa_year']={};for(let _0x32027d=0x0;_0x32027d<=_0x1cb41c[_0x1d27f6(0x11b)]-0x1;_0x32027d++){const _0x392c7f=_0x1cb41c[_0x32027d];!_0x25835c[_0x1d27f6(0x136)][_0x392c7f['_id']['brand']]&&(_0x25835c[_0x1d27f6(0x136)][_0x392c7f[_0x1d27f6(0xc1)][_0x1d27f6(0x130)]]={}),!_0x25835c['sales_sa_year'][_0x392c7f['_id'][_0x1d27f6(0x130)]][_0x392c7f[_0x1d27f6(0xc1)][_0x1d27f6(0x122)]]&&(_0x25835c['sales_sa_year'][_0x392c7f['_id'][_0x1d27f6(0x130)]][_0x392c7f[_0x1d27f6(0xc1)][_0x1d27f6(0x122)]]={}),!_0x25835c[_0x1d27f6(0x136)][_0x392c7f[_0x1d27f6(0xc1)][_0x1d27f6(0x130)]][_0x392c7f[_0x1d27f6(0xc1)][_0x1d27f6(0x122)]][_0x1d27f6(0xc2)]&&(_0x25835c['sales_sa_year'][_0x392c7f[_0x1d27f6(0xc1)][_0x1d27f6(0x130)]][_0x392c7f['_id'][_0x1d27f6(0x122)]]['qty']=0x0),!_0x25835c[_0x1d27f6(0x136)][_0x392c7f[_0x1d27f6(0xc1)][_0x1d27f6(0x130)]][_0x392c7f[_0x1d27f6(0xc1)][_0x1d27f6(0x122)]][_0x1d27f6(0xdb)]&&(_0x25835c[_0x1d27f6(0x136)][_0x392c7f['_id'][_0x1d27f6(0x130)]][_0x392c7f[_0x1d27f6(0xc1)][_0x1d27f6(0x122)]][_0x1d27f6(0xdb)]=0x0),_0x25835c['sales_sa_year'][_0x392c7f[_0x1d27f6(0xc1)][_0x1d27f6(0x130)]][_0x392c7f['_id'][_0x1d27f6(0x122)]][_0x1d27f6(0xc2)]=_0x392c7f[_0x1d27f6(0xe8)],_0x25835c['sales_sa_year'][_0x392c7f[_0x1d27f6(0xc1)]['brand']][_0x392c7f[_0x1d27f6(0xc1)][_0x1d27f6(0x122)]]['net']=_0x392c7f[_0x1d27f6(0xcb)];}_0x4e060c[_0x1d27f6(0x110)]({'product':_0x31f8a6[_0x1d27f6(0x114)],'month_data':_0x215421[_0x1d27f6(0xfc)],'year_data':_0x25835c['sales_sa_year']});}catch(_0x557ff3){console[_0x1d27f6(0xc9)](_0x557ff3);}}),module['exports']=router;