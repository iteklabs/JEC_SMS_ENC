var a0_0x57860d=a0_0x3a12;(function(_0xe9953c,_0x563ddc){var _0x306258=a0_0x3a12,_0x5d606c=_0xe9953c();while(!![]){try{var _0x286d4e=-parseInt(_0x306258(0x1d7))/0x1+parseInt(_0x306258(0x209))/0x2+parseInt(_0x306258(0x20e))/0x3*(parseInt(_0x306258(0x208))/0x4)+parseInt(_0x306258(0x1f5))/0x5+-parseInt(_0x306258(0x1f6))/0x6*(parseInt(_0x306258(0x1fa))/0x7)+-parseInt(_0x306258(0x207))/0x8+-parseInt(_0x306258(0x1ec))/0x9*(-parseInt(_0x306258(0x1d4))/0xa);if(_0x286d4e===_0x563ddc)break;else _0x5d606c['push'](_0x5d606c['shift']());}catch(_0x457c33){_0x5d606c['push'](_0x5d606c['shift']());}}}(a0_0x24f0,0xe7351));const express=require(a0_0x57860d(0x20f)),app=express(),router=express[a0_0x57860d(0x200)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x57860d(0x1c0)),excelJS=require(a0_0x57860d(0x1c8)),xlsx=require(a0_0x57860d(0x1fe)),multer=require(a0_0x57860d(0x1df)),mongoose=require(a0_0x57860d(0x1db));function a0_0x24f0(){var _0x3acfec=['user','Spanish','Portuguese\x20(BR)','mongoose','redirect','paid','Portuguese','multer','updateOne','English','Arabic\x20(ae)','params','French','language','collection_price','valueOf','view_collections_sox','findById','typeofprocess','/view_xt/:id','369dKatpv','True','ObjectId','/view/:id','errors','flash','body','forEach','/view_sox/:id','3740360hGaZZV','252bCekyX','fin_disc','ewt','view_collections_so_xt','98518oBpAzO','vol_deals','Arabic','/view_so_xt/:id','xlsx','json','Router','English\x20(US)','view_collections','collection_sox','log','id_detl','type_of_payment','13693168HuEcFb','3788JcqWNh','3586008fmkkUh','cash_date','find','/so_x','string','3138GaQBqM','express','Collection\x20Update\x20successfully','totalcollection','findOne','Types','map','../public/language/languages.json','exports','German','spwp','get','email','Hindi','totalNewPrice','exceljs','post','save','Chinese','render','/collection/view_so_xt/','_id','collectionnumber','bo_disc','view_collections_xt','success','collection_xt','30750hhMqud','/view','/collection/view/','407934oyIZtP'];a0_0x24f0=function(){return _0x3acfec;};return a0_0x24f0();}function a0_0x3a12(_0xaaad0b,_0x5be008){var _0x24f0bf=a0_0x24f0();return a0_0x3a12=function(_0x3a127f,_0xb4e70f){_0x3a127f=_0x3a127f-0x1bd;var _0x3296dc=_0x24f0bf[_0x3a127f];return _0x3296dc;},a0_0x3a12(_0xaaad0b,_0x5be008);}router[a0_0x57860d(0x1c4)](a0_0x57860d(0x1d5),auth,async(_0x470dda,_0x5017ab)=>{var _0x2c18ea=a0_0x57860d;try{const _0x58e85e=await master_shop[_0x2c18ea(0x20b)](),_0x223d2e=_0x470dda[_0x2c18ea(0x1d8)],_0x419c2f=await profile[_0x2c18ea(0x1bd)]({'email':_0x223d2e[_0x2c18ea(0x1c5)]}),_0x557154=await staff[_0x2c18ea(0x1bd)]({'email':_0x223d2e[_0x2c18ea(0x1c5)],'type_of_acc_cat':'2'});let _0x591929=[];_0x557154!=null&&(_0x591929=await sales_order[_0x2c18ea(0x20b)]({'sales_staff_id':_0x557154['_id']}));if(_0x58e85e[0x0][_0x2c18ea(0x1e5)]=='English\x20(US)')var _0x825d0b=users[_0x2c18ea(0x1e1)];else{if(_0x58e85e[0x0][_0x2c18ea(0x1e5)]==_0x2c18ea(0x1c6))var _0x825d0b=users['Hindi'];else{if(_0x58e85e[0x0][_0x2c18ea(0x1e5)]==_0x2c18ea(0x1c2))var _0x825d0b=users[_0x2c18ea(0x1c2)];else{if(_0x58e85e[0x0][_0x2c18ea(0x1e5)]==_0x2c18ea(0x1d9))var _0x825d0b=users['Spanish'];else{if(_0x58e85e[0x0][_0x2c18ea(0x1e5)]==_0x2c18ea(0x1e4))var _0x825d0b=users[_0x2c18ea(0x1e4)];else{if(_0x58e85e[0x0][_0x2c18ea(0x1e5)]=='Portuguese\x20(BR)')var _0x825d0b=users[_0x2c18ea(0x1de)];else{if(_0x58e85e[0x0][_0x2c18ea(0x1e5)]==_0x2c18ea(0x1cb))var _0x825d0b=users[_0x2c18ea(0x1cb)];else{if(_0x58e85e[0x0][_0x2c18ea(0x1e5)]==_0x2c18ea(0x1e2))var _0x825d0b=users[_0x2c18ea(0x1fc)];}}}}}}}_0x5017ab[_0x2c18ea(0x1cc)]('collection',{'success':_0x470dda[_0x2c18ea(0x1f1)](_0x2c18ea(0x1d2)),'errors':_0x470dda[_0x2c18ea(0x1f1)](_0x2c18ea(0x1f0)),'master_shop':_0x58e85e,'profile':_0x419c2f,'role':_0x223d2e,'language':_0x825d0b,'sales_mine':_0x591929,'staff_arr':_0x557154});}catch(_0x483b7b){console[_0x2c18ea(0x204)](_0x483b7b);}}),router[a0_0x57860d(0x1c4)](a0_0x57860d(0x1ef),auth,async(_0x350ac3,_0x1913b2)=>{var _0x1f4556=a0_0x57860d;try{const _0x2cf9ea=await master_shop['find'](),_0x4a9e03=_0x350ac3[_0x1f4556(0x1d8)],_0x81a9b7=await profile['findOne']({'email':_0x4a9e03[_0x1f4556(0x1c5)]}),_0x41ad23=await staff[_0x1f4556(0x1bd)]({'email':_0x4a9e03[_0x1f4556(0x1c5)]}),_0x50d25d=await customer[_0x1f4556(0x20b)]({'agent_id':_0x41ad23[_0x1f4556(0x1ce)]}),_0x39fcb6=_0x350ac3['params']['id'],_0x2e7927=await sales_sa[_0x1f4556(0x1e9)](_0x39fcb6);if(_0x2cf9ea[0x0][_0x1f4556(0x1e5)]==_0x1f4556(0x201))var _0xa868e1=users['English'];else{if(_0x2cf9ea[0x0][_0x1f4556(0x1e5)]=='Hindi')var _0xa868e1=users[_0x1f4556(0x1c6)];else{if(_0x2cf9ea[0x0]['language']==_0x1f4556(0x1c2))var _0xa868e1=users[_0x1f4556(0x1c2)];else{if(_0x2cf9ea[0x0][_0x1f4556(0x1e5)]==_0x1f4556(0x1d9))var _0xa868e1=users[_0x1f4556(0x1d9)];else{if(_0x2cf9ea[0x0][_0x1f4556(0x1e5)]==_0x1f4556(0x1e4))var _0xa868e1=users[_0x1f4556(0x1e4)];else{if(_0x2cf9ea[0x0][_0x1f4556(0x1e5)]==_0x1f4556(0x1da))var _0xa868e1=users['Portuguese'];else{if(_0x2cf9ea[0x0][_0x1f4556(0x1e5)]==_0x1f4556(0x1cb))var _0xa868e1=users['Chinese'];else{if(_0x2cf9ea[0x0][_0x1f4556(0x1e5)]==_0x1f4556(0x1e2))var _0xa868e1=users[_0x1f4556(0x1fc)];}}}}}}}_0x1913b2[_0x1f4556(0x1cc)](_0x1f4556(0x202),{'success':_0x350ac3['flash'](_0x1f4556(0x1d2)),'errors':_0x350ac3[_0x1f4556(0x1f1)](_0x1f4556(0x1f0)),'master_shop':_0x2cf9ea,'profile':_0x81a9b7,'role':_0x4a9e03,'language':_0xa868e1,'customer':_0x50d25d,'sales_sa':_0x2e7927,'staff_arr':_0x41ad23});}catch(_0x4cc581){console[_0x1f4556(0x204)](_0x4cc581);}}),router['post']('/view/:id',auth,async(_0x2d2d86,_0x3d76f8)=>{var _0x340210=a0_0x57860d;try{const _0x2937c9=_0x2d2d86[_0x340210(0x1e3)]['id'],_0x5695d7=await sales_sa['findById'](_0x2937c9),{collection:_0x17c629,invoicemoney:_0x53cad2,collectionnumber:_0x17b470,typeofpayment:_0x421728,cashdate:_0x514d85,id_detl:_0x3cae53}=_0x2d2d86[_0x340210(0x1f2)];_0x3d76f8[_0x340210(0x1ff)](_0x5695d7);return;if(typeof _0x3cae53==_0x340210(0x20d))var _0x1e63d1=[_0x2d2d86[_0x340210(0x1f2)][_0x340210(0x205)]],_0x2a0d77=[_0x2d2d86[_0x340210(0x1f2)][_0x340210(0x1f8)]],_0x487778=[_0x2d2d86[_0x340210(0x1f2)]['spwp']],_0x51682c=[_0x2d2d86['body']['fin_disc']],_0x4fc198=[_0x2d2d86['body'][_0x340210(0x1fb)]],_0x473467=[_0x2d2d86[_0x340210(0x1f2)][_0x340210(0x1d0)]],_0x2ee39c=[_0x2d2d86['body']['totalNewPrice']];else var _0x1e63d1=[..._0x2d2d86['body']['id_detl']],_0x2a0d77=[..._0x2d2d86[_0x340210(0x1f2)][_0x340210(0x1f8)]],_0x487778=[..._0x2d2d86[_0x340210(0x1f2)][_0x340210(0x1c3)]],_0x51682c=[..._0x2d2d86[_0x340210(0x1f2)][_0x340210(0x1f7)]],_0x4fc198=[..._0x2d2d86[_0x340210(0x1f2)][_0x340210(0x1fb)]],_0x473467=[..._0x2d2d86[_0x340210(0x1f2)]['bo_disc']],_0x2ee39c=[..._0x2d2d86[_0x340210(0x1f2)][_0x340210(0x1c7)]];const _0x388020=_0x1e63d1[_0x340210(0x1bf)](_0x96bd38=>{return _0x96bd38={'id_detl':_0x96bd38};});_0x2a0d77[_0x340210(0x1f3)]((_0x33b6e4,_0x27b2b5)=>{var _0x5a5b96=_0x340210;_0x388020[_0x27b2b5][_0x5a5b96(0x1f8)]=_0x33b6e4;}),_0x487778[_0x340210(0x1f3)]((_0x2d5c1c,_0x397e71)=>{var _0x453f71=_0x340210;_0x388020[_0x397e71][_0x453f71(0x1c3)]=_0x2d5c1c;}),_0x51682c[_0x340210(0x1f3)]((_0xd0563d,_0x5c01c2)=>{var _0x5cac1f=_0x340210;_0x388020[_0x5c01c2][_0x5cac1f(0x1f7)]=_0xd0563d;}),_0x4fc198[_0x340210(0x1f3)]((_0x391a55,_0x323004)=>{_0x388020[_0x323004]['vol_deals']=_0x391a55;}),_0x473467[_0x340210(0x1f3)]((_0x275a66,_0x3b4caa)=>{var _0x1ed3e6=_0x340210;_0x388020[_0x3b4caa][_0x1ed3e6(0x1d0)]=_0x275a66;}),_0x2ee39c[_0x340210(0x1f3)]((_0x4bfb36,_0xd2d295)=>{var _0xd12ab5=_0x340210;_0x388020[_0xd2d295][_0xd12ab5(0x211)]=_0x4bfb36;}),_0x5695d7[_0x340210(0x1e6)]=_0x17c629,_0x5695d7[_0x340210(0x1cf)]=_0x17b470,_0x5695d7[_0x340210(0x206)]=_0x421728,_0x5695d7[_0x340210(0x20a)]=_0x514d85,_0x5695d7[_0x340210(0x1dd)]='True';const _0x34527e=await _0x5695d7['save']();if(_0x34527e[_0x340210(0x1dd)]=='True')for(let _0x98f5c2=0x0;_0x98f5c2<=_0x388020['length']-0x1;_0x98f5c2++){const _0xab28dc=_0x388020[_0x98f5c2],_0x5cf02f=mongoose[_0x340210(0x1be)][_0x340210(0x1ee)];console[_0x340210(0x204)](_0xab28dc);const _0x41078d=await sales_sa[_0x340210(0x1e0)]({'_id':_0x5cf02f(_0x2937c9['valueOf']()),'sale_product._id':_0x5cf02f(_0xab28dc['id_detl'][_0x340210(0x1e7)]())},{'$set':{'sale_product.$.ewt':_0xab28dc['ewt'],'sale_product.$.spwp':_0xab28dc[_0x340210(0x1c3)],'sale_product.$.fin_disc':_0xab28dc['fin_disc'],'sale_product.$.vol_deals':_0xab28dc[_0x340210(0x1fb)],'sale_product.$.bo_disc':_0xab28dc['bo_disc'],'sale_product.$.totalprice':parseFloat(_0xab28dc[_0x340210(0x211)])}});}_0x2d2d86[_0x340210(0x1f1)](_0x340210(0x1d2),_0x340210(0x210)),_0x3d76f8[_0x340210(0x1dc)](_0x340210(0x1d6)+_0x2937c9);}catch(_0x5b4d12){console[_0x340210(0x204)](_0x5b4d12);}}),router[a0_0x57860d(0x1c4)]('/x_so',auth,async(_0x123cef,_0xbd0ca4)=>{var _0xd7f354=a0_0x57860d;try{const _0x4cc4e1=await master_shop[_0xd7f354(0x20b)](),_0x5327c8=_0x123cef[_0xd7f354(0x1d8)],_0x1154f4=await profile[_0xd7f354(0x1bd)]({'email':_0x5327c8['email']}),_0x176453=await staff[_0xd7f354(0x1bd)]({'email':_0x5327c8[_0xd7f354(0x1c5)],'type_of_acc_cat':'2'});let _0x690985=[];_0x176453!=null&&(_0x690985=await sales_order['find']({'sales_staff_id':_0x176453[_0xd7f354(0x1ce)]}));console[_0xd7f354(0x204)](_0x690985);if(_0x4cc4e1[0x0][_0xd7f354(0x1e5)]==_0xd7f354(0x201))var _0x5c7f0d=users[_0xd7f354(0x1e1)];else{if(_0x4cc4e1[0x0]['language']==_0xd7f354(0x1c6))var _0x5c7f0d=users[_0xd7f354(0x1c6)];else{if(_0x4cc4e1[0x0][_0xd7f354(0x1e5)]==_0xd7f354(0x1c2))var _0x5c7f0d=users[_0xd7f354(0x1c2)];else{if(_0x4cc4e1[0x0][_0xd7f354(0x1e5)]=='Spanish')var _0x5c7f0d=users[_0xd7f354(0x1d9)];else{if(_0x4cc4e1[0x0]['language']==_0xd7f354(0x1e4))var _0x5c7f0d=users['French'];else{if(_0x4cc4e1[0x0]['language']==_0xd7f354(0x1da))var _0x5c7f0d=users[_0xd7f354(0x1de)];else{if(_0x4cc4e1[0x0][_0xd7f354(0x1e5)]=='Chinese')var _0x5c7f0d=users[_0xd7f354(0x1cb)];else{if(_0x4cc4e1[0x0]['language']==_0xd7f354(0x1e2))var _0x5c7f0d=users['Arabic'];}}}}}}}_0xbd0ca4['render'](_0xd7f354(0x203),{'success':_0x123cef[_0xd7f354(0x1f1)](_0xd7f354(0x1d2)),'errors':_0x123cef[_0xd7f354(0x1f1)](_0xd7f354(0x1f0)),'master_shop':_0x4cc4e1,'profile':_0x1154f4,'role':_0x5327c8,'language':_0x5c7f0d,'sales_mine':_0x690985,'staff_arr':_0x176453});}catch(_0x22ea31){console['log'](_0x22ea31);}}),router['get'](a0_0x57860d(0x1f4),auth,async(_0x5f2077,_0x76ba56)=>{var _0x2779d0=a0_0x57860d;try{const _0x5150ae=await master_shop[_0x2779d0(0x20b)](),_0x133970=_0x5f2077[_0x2779d0(0x1d8)],_0x5039f1=await profile['findOne']({'email':_0x133970['email']}),_0x4222e1=await staff['findOne']({'email':_0x133970['email']}),_0x2e32a7=await customer[_0x2779d0(0x20b)]({'agent_id':_0x4222e1[_0x2779d0(0x1ce)]}),_0x53d16a=_0x5f2077['params']['id'],_0x587175=await sales_order[_0x2779d0(0x1e9)](_0x53d16a);if(_0x5150ae[0x0][_0x2779d0(0x1e5)]==_0x2779d0(0x201))var _0x23a112=users[_0x2779d0(0x1e1)];else{if(_0x5150ae[0x0][_0x2779d0(0x1e5)]==_0x2779d0(0x1c6))var _0x23a112=users[_0x2779d0(0x1c6)];else{if(_0x5150ae[0x0]['language']==_0x2779d0(0x1c2))var _0x23a112=users[_0x2779d0(0x1c2)];else{if(_0x5150ae[0x0][_0x2779d0(0x1e5)]=='Spanish')var _0x23a112=users[_0x2779d0(0x1d9)];else{if(_0x5150ae[0x0][_0x2779d0(0x1e5)]==_0x2779d0(0x1e4))var _0x23a112=users[_0x2779d0(0x1e4)];else{if(_0x5150ae[0x0][_0x2779d0(0x1e5)]==_0x2779d0(0x1da))var _0x23a112=users[_0x2779d0(0x1de)];else{if(_0x5150ae[0x0]['language']=='Chinese')var _0x23a112=users[_0x2779d0(0x1cb)];else{if(_0x5150ae[0x0][_0x2779d0(0x1e5)]==_0x2779d0(0x1e2))var _0x23a112=users[_0x2779d0(0x1fc)];}}}}}}}_0x76ba56[_0x2779d0(0x1cc)](_0x2779d0(0x1e8),{'success':_0x5f2077[_0x2779d0(0x1f1)](_0x2779d0(0x1d2)),'errors':_0x5f2077[_0x2779d0(0x1f1)](_0x2779d0(0x1f0)),'master_shop':_0x5150ae,'profile':_0x5039f1,'role':_0x133970,'language':_0x23a112,'customer':_0x2e32a7,'sales_sa':_0x587175});}catch(_0x8171a6){console[_0x2779d0(0x204)](_0x8171a6);}}),router[a0_0x57860d(0x1c4)]('/view_x',auth,async(_0x36dbf9,_0x3c2c57)=>{var _0x533ae9=a0_0x57860d;try{const _0x67dd42=await master_shop['find'](),_0x574f72=_0x36dbf9['user'],_0x367615=await profile[_0x533ae9(0x1bd)]({'email':_0x574f72[_0x533ae9(0x1c5)]}),_0x401f8e=await staff[_0x533ae9(0x1bd)]({'email':_0x574f72[_0x533ae9(0x1c5)],'type_of_acc_cat':'1'});let _0x45716d=[];_0x401f8e!=null&&(_0x45716d=await sales_sa[_0x533ae9(0x20b)]({'sales_staff_id':_0x401f8e[_0x533ae9(0x1ce)]}));if(_0x67dd42[0x0]['language']==_0x533ae9(0x201))var _0x1d9ef8=users['English'];else{if(_0x67dd42[0x0][_0x533ae9(0x1e5)]=='Hindi')var _0x1d9ef8=users[_0x533ae9(0x1c6)];else{if(_0x67dd42[0x0][_0x533ae9(0x1e5)]==_0x533ae9(0x1c2))var _0x1d9ef8=users[_0x533ae9(0x1c2)];else{if(_0x67dd42[0x0][_0x533ae9(0x1e5)]==_0x533ae9(0x1d9))var _0x1d9ef8=users[_0x533ae9(0x1d9)];else{if(_0x67dd42[0x0]['language']==_0x533ae9(0x1e4))var _0x1d9ef8=users['French'];else{if(_0x67dd42[0x0][_0x533ae9(0x1e5)]=='Portuguese\x20(BR)')var _0x1d9ef8=users[_0x533ae9(0x1de)];else{if(_0x67dd42[0x0][_0x533ae9(0x1e5)]==_0x533ae9(0x1cb))var _0x1d9ef8=users[_0x533ae9(0x1cb)];else{if(_0x67dd42[0x0][_0x533ae9(0x1e5)]==_0x533ae9(0x1e2))var _0x1d9ef8=users['Arabic'];}}}}}}}_0x3c2c57['render'](_0x533ae9(0x1d3),{'success':_0x36dbf9[_0x533ae9(0x1f1)]('success'),'errors':_0x36dbf9[_0x533ae9(0x1f1)]('errors'),'master_shop':_0x67dd42,'profile':_0x367615,'role':_0x574f72,'language':_0x1d9ef8,'sales_mine':_0x45716d,'staff_arr':_0x401f8e});}catch(_0x26b941){console[_0x533ae9(0x204)](_0x26b941);}}),router[a0_0x57860d(0x1c4)](a0_0x57860d(0x1eb),auth,async(_0x371d28,_0x34d022)=>{var _0x193b11=a0_0x57860d;try{const _0x46fbff=await master_shop['find'](),_0x422672=_0x371d28[_0x193b11(0x1d8)],_0x592e8c=await profile[_0x193b11(0x1bd)]({'email':_0x422672[_0x193b11(0x1c5)]}),_0x118b08=await staff[_0x193b11(0x1bd)]({'email':_0x422672[_0x193b11(0x1c5)]}),_0x41396e=await customer['find']({'agent_id':_0x118b08[_0x193b11(0x1ce)]}),_0xe1e864=_0x371d28[_0x193b11(0x1e3)]['id'],_0x4eca18=await sales_sa['findById'](_0xe1e864);if(_0x46fbff[0x0]['language']==_0x193b11(0x201))var _0x400155=users[_0x193b11(0x1e1)];else{if(_0x46fbff[0x0][_0x193b11(0x1e5)]=='Hindi')var _0x400155=users[_0x193b11(0x1c6)];else{if(_0x46fbff[0x0]['language']==_0x193b11(0x1c2))var _0x400155=users['German'];else{if(_0x46fbff[0x0][_0x193b11(0x1e5)]==_0x193b11(0x1d9))var _0x400155=users[_0x193b11(0x1d9)];else{if(_0x46fbff[0x0][_0x193b11(0x1e5)]==_0x193b11(0x1e4))var _0x400155=users[_0x193b11(0x1e4)];else{if(_0x46fbff[0x0][_0x193b11(0x1e5)]==_0x193b11(0x1da))var _0x400155=users[_0x193b11(0x1de)];else{if(_0x46fbff[0x0]['language']==_0x193b11(0x1cb))var _0x400155=users['Chinese'];else{if(_0x46fbff[0x0]['language']==_0x193b11(0x1e2))var _0x400155=users['Arabic'];}}}}}}}_0x34d022['render'](_0x193b11(0x1d1),{'success':_0x371d28[_0x193b11(0x1f1)]('success'),'errors':_0x371d28[_0x193b11(0x1f1)](_0x193b11(0x1f0)),'master_shop':_0x46fbff,'profile':_0x592e8c,'role':_0x422672,'language':_0x400155,'customer':_0x41396e,'sales_sa':_0x4eca18,'staff_arr':_0x118b08});}catch(_0x144d65){console[_0x193b11(0x204)](_0x144d65);}}),router[a0_0x57860d(0x1c9)](a0_0x57860d(0x1eb),auth,async(_0x37329b,_0x539008)=>{var _0x57b7d2=a0_0x57860d;try{const _0x3198ef=_0x37329b['params']['id'],_0x10dab1=await sales_sa[_0x57b7d2(0x1e9)](_0x3198ef),{collection:_0x55615c,invoicemoney:_0xf2988d,collectionnumber:_0x31e1a9,typeofpayment:_0x174b77,cashdate:_0x5c81f8,id_detl:_0x1a7ea5}=_0x37329b[_0x57b7d2(0x1f2)];if(typeof _0x1a7ea5==_0x57b7d2(0x20d))var _0x355e7a=[_0x37329b[_0x57b7d2(0x1f2)][_0x57b7d2(0x205)]],_0x46cc3f=[_0x37329b['body'][_0x57b7d2(0x1f8)]],_0x43e429=[_0x37329b['body'][_0x57b7d2(0x1c3)]],_0x1be3c7=[_0x37329b[_0x57b7d2(0x1f2)]['fin_disc']],_0xc3cdf=[_0x37329b[_0x57b7d2(0x1f2)][_0x57b7d2(0x1fb)]],_0xc5c5db=[_0x37329b['body']['bo_disc']],_0x2d7a3e=[_0x37329b[_0x57b7d2(0x1f2)][_0x57b7d2(0x1c7)]];else var _0x355e7a=[..._0x37329b[_0x57b7d2(0x1f2)]['id_detl']],_0x46cc3f=[..._0x37329b['body'][_0x57b7d2(0x1f8)]],_0x43e429=[..._0x37329b[_0x57b7d2(0x1f2)][_0x57b7d2(0x1c3)]],_0x1be3c7=[..._0x37329b[_0x57b7d2(0x1f2)][_0x57b7d2(0x1f7)]],_0xc3cdf=[..._0x37329b[_0x57b7d2(0x1f2)][_0x57b7d2(0x1fb)]],_0xc5c5db=[..._0x37329b['body']['bo_disc']],_0x2d7a3e=[..._0x37329b[_0x57b7d2(0x1f2)][_0x57b7d2(0x1c7)]];const _0x56f5e0=_0x355e7a[_0x57b7d2(0x1bf)](_0x23ef74=>{return _0x23ef74={'id_detl':_0x23ef74};});_0x46cc3f[_0x57b7d2(0x1f3)]((_0x59e3bd,_0x63b5a9)=>{var _0x553e63=_0x57b7d2;_0x56f5e0[_0x63b5a9][_0x553e63(0x1f8)]=_0x59e3bd;}),_0x43e429[_0x57b7d2(0x1f3)]((_0x301402,_0x5d168c)=>{var _0x3347ea=_0x57b7d2;_0x56f5e0[_0x5d168c][_0x3347ea(0x1c3)]=_0x301402;}),_0x1be3c7['forEach']((_0x42f74f,_0x5cdb8e)=>{var _0x1ef799=_0x57b7d2;_0x56f5e0[_0x5cdb8e][_0x1ef799(0x1f7)]=_0x42f74f;}),_0xc3cdf['forEach']((_0x5c8a5c,_0x3f51bc)=>{var _0x44fcec=_0x57b7d2;_0x56f5e0[_0x3f51bc][_0x44fcec(0x1fb)]=_0x5c8a5c;}),_0xc5c5db[_0x57b7d2(0x1f3)]((_0x28a8d6,_0x158235)=>{_0x56f5e0[_0x158235]['bo_disc']=_0x28a8d6;}),_0x2d7a3e[_0x57b7d2(0x1f3)]((_0x5e758a,_0x31db5f)=>{var _0x41e120=_0x57b7d2;_0x56f5e0[_0x31db5f][_0x41e120(0x211)]=_0x5e758a;}),_0x10dab1[_0x57b7d2(0x1e6)]=_0x55615c,_0x10dab1[_0x57b7d2(0x1cf)]=_0x31e1a9,_0x10dab1[_0x57b7d2(0x206)]=_0x174b77,_0x10dab1[_0x57b7d2(0x20a)]=_0x5c81f8,_0x10dab1['paid']='True',_0x10dab1[_0x57b7d2(0x1ea)]='1';const _0x4cafe3=await _0x10dab1[_0x57b7d2(0x1ca)]();if(_0x4cafe3[_0x57b7d2(0x1dd)]==_0x57b7d2(0x1ed))for(let _0x34c63c=0x0;_0x34c63c<=_0x56f5e0['length']-0x1;_0x34c63c++){const _0x469b0f=_0x56f5e0[_0x34c63c],_0x26f6b4=mongoose['Types'][_0x57b7d2(0x1ee)];console[_0x57b7d2(0x204)](_0x469b0f);const _0x2651cb=await sales_sa[_0x57b7d2(0x1e0)]({'_id':_0x26f6b4(_0x3198ef[_0x57b7d2(0x1e7)]()),'sale_product._id':_0x26f6b4(_0x469b0f[_0x57b7d2(0x205)]['valueOf']())},{'$set':{'sale_product.$.ewt':_0x469b0f[_0x57b7d2(0x1f8)],'sale_product.$.spwp':_0x469b0f[_0x57b7d2(0x1c3)],'sale_product.$.fin_disc':_0x469b0f[_0x57b7d2(0x1f7)],'sale_product.$.vol_deals':_0x469b0f['vol_deals'],'sale_product.$.bo_disc':_0x469b0f[_0x57b7d2(0x1d0)],'sale_product.$.totalprice':parseFloat(_0x469b0f[_0x57b7d2(0x211)])}});}_0x37329b[_0x57b7d2(0x1f1)](_0x57b7d2(0x1d2),_0x57b7d2(0x210)),_0x539008[_0x57b7d2(0x1dc)](_0x57b7d2(0x1d6)+_0x3198ef);}catch(_0x21586b){console[_0x57b7d2(0x204)](_0x21586b);}}),router[a0_0x57860d(0x1c4)](a0_0x57860d(0x20c),auth,async(_0x5688bf,_0x58adcb)=>{var _0x37b52e=a0_0x57860d;try{const _0x2715c5=await master_shop['find'](),_0x333ad7=_0x5688bf[_0x37b52e(0x1d8)],_0x21cac6=await profile[_0x37b52e(0x1bd)]({'email':_0x333ad7[_0x37b52e(0x1c5)]}),_0x2b7edf=await staff['findOne']({'email':_0x333ad7['email'],'type_of_acc_cat':'1'});let _0x50444e=[];_0x2b7edf!=null&&(_0x50444e=await sales_order[_0x37b52e(0x20b)]({'sales_staff_id':_0x2b7edf['_id']}));if(_0x2715c5[0x0][_0x37b52e(0x1e5)]==_0x37b52e(0x201))var _0x5261e6=users[_0x37b52e(0x1e1)];else{if(_0x2715c5[0x0]['language']==_0x37b52e(0x1c6))var _0x5261e6=users[_0x37b52e(0x1c6)];else{if(_0x2715c5[0x0]['language']=='German')var _0x5261e6=users[_0x37b52e(0x1c2)];else{if(_0x2715c5[0x0][_0x37b52e(0x1e5)]==_0x37b52e(0x1d9))var _0x5261e6=users['Spanish'];else{if(_0x2715c5[0x0][_0x37b52e(0x1e5)]==_0x37b52e(0x1e4))var _0x5261e6=users[_0x37b52e(0x1e4)];else{if(_0x2715c5[0x0][_0x37b52e(0x1e5)]==_0x37b52e(0x1da))var _0x5261e6=users[_0x37b52e(0x1de)];else{if(_0x2715c5[0x0]['language']==_0x37b52e(0x1cb))var _0x5261e6=users[_0x37b52e(0x1cb)];else{if(_0x2715c5[0x0]['language']=='Arabic\x20(ae)')var _0x5261e6=users['Arabic'];}}}}}}}_0x58adcb[_0x37b52e(0x1cc)]('collection_so_xt',{'success':_0x5688bf[_0x37b52e(0x1f1)](_0x37b52e(0x1d2)),'errors':_0x5688bf[_0x37b52e(0x1f1)]('errors'),'master_shop':_0x2715c5,'profile':_0x21cac6,'role':_0x333ad7,'language':_0x5261e6,'sales_mine':_0x50444e,'staff_arr':_0x2b7edf});}catch(_0x25434a){console['log'](_0x25434a);}}),router[a0_0x57860d(0x1c4)](a0_0x57860d(0x1fd),auth,async(_0xd7cc47,_0x39eced)=>{var _0x7ddcfa=a0_0x57860d;try{const _0x1b49ae=await master_shop['find'](),_0x15d62e=_0xd7cc47[_0x7ddcfa(0x1d8)],_0x1fab02=await profile[_0x7ddcfa(0x1bd)]({'email':_0x15d62e[_0x7ddcfa(0x1c5)]}),_0x9b79b0=await staff['findOne']({'email':_0x15d62e['email']}),_0x3dca52=await customer[_0x7ddcfa(0x20b)]({'agent_id':_0x9b79b0['_id']}),_0x50861a=_0xd7cc47['params']['id'],_0x1550b6=await sales_order['findById'](_0x50861a);if(_0x1b49ae[0x0][_0x7ddcfa(0x1e5)]=='English\x20(US)')var _0xf09a21=users[_0x7ddcfa(0x1e1)];else{if(_0x1b49ae[0x0][_0x7ddcfa(0x1e5)]==_0x7ddcfa(0x1c6))var _0xf09a21=users[_0x7ddcfa(0x1c6)];else{if(_0x1b49ae[0x0][_0x7ddcfa(0x1e5)]==_0x7ddcfa(0x1c2))var _0xf09a21=users['German'];else{if(_0x1b49ae[0x0]['language']=='Spanish')var _0xf09a21=users['Spanish'];else{if(_0x1b49ae[0x0][_0x7ddcfa(0x1e5)]==_0x7ddcfa(0x1e4))var _0xf09a21=users[_0x7ddcfa(0x1e4)];else{if(_0x1b49ae[0x0][_0x7ddcfa(0x1e5)]==_0x7ddcfa(0x1da))var _0xf09a21=users[_0x7ddcfa(0x1de)];else{if(_0x1b49ae[0x0][_0x7ddcfa(0x1e5)]=='Chinese')var _0xf09a21=users[_0x7ddcfa(0x1cb)];else{if(_0x1b49ae[0x0][_0x7ddcfa(0x1e5)]==_0x7ddcfa(0x1e2))var _0xf09a21=users[_0x7ddcfa(0x1fc)];}}}}}}}_0x39eced[_0x7ddcfa(0x1cc)](_0x7ddcfa(0x1f9),{'success':_0xd7cc47[_0x7ddcfa(0x1f1)](_0x7ddcfa(0x1d2)),'errors':_0xd7cc47[_0x7ddcfa(0x1f1)](_0x7ddcfa(0x1f0)),'master_shop':_0x1b49ae,'profile':_0x1fab02,'role':_0x15d62e,'language':_0xf09a21,'customer':_0x3dca52,'sales_sa':_0x1550b6,'staff_arr':_0x9b79b0});}catch(_0x475d97){console[_0x7ddcfa(0x204)](_0x475d97);}}),router[a0_0x57860d(0x1c9)]('/view_so_xt/:id',auth,async(_0x7f3b43,_0x270095)=>{var _0x27e904=a0_0x57860d;try{const _0x5ddba7=_0x7f3b43[_0x27e904(0x1e3)]['id'],_0x4de8fa=await sales_order['findById'](_0x5ddba7),{collection:_0x349b55,invoicemoney:_0x543bc0,collectionnumber:_0x205930,typeofpayment:_0x1f9990,cashdate:_0x5d889d,id_detl:_0x6d74f8}=_0x7f3b43[_0x27e904(0x1f2)];_0x4de8fa['collection_price']=_0x349b55,_0x4de8fa[_0x27e904(0x206)]=_0x1f9990,_0x4de8fa[_0x27e904(0x20a)]=_0x5d889d,_0x4de8fa[_0x27e904(0x1dd)]=_0x27e904(0x1ed),_0x4de8fa['typeofprocess']='1';const _0x19ae52=await _0x4de8fa[_0x27e904(0x1ca)]();_0x7f3b43[_0x27e904(0x1f1)](_0x27e904(0x1d2),_0x27e904(0x210)),_0x270095[_0x27e904(0x1dc)](_0x27e904(0x1cd)+_0x5ddba7);}catch(_0x28527a){console[_0x27e904(0x204)](_0x28527a);}}),module[a0_0x57860d(0x1c1)]=router;