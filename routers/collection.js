function a0_0x3cd5(_0x4fd8a3,_0x263d59){var _0x23a65c=a0_0x23a6();return a0_0x3cd5=function(_0x3cd55e,_0x5825f2){_0x3cd55e=_0x3cd55e-0x151;var _0xb057c5=_0x23a65c[_0x3cd55e];return _0xb057c5;},a0_0x3cd5(_0x4fd8a3,_0x263d59);}var a0_0xc6142a=a0_0x3cd5;(function(_0x304c87,_0x509eeb){var _0x112978=a0_0x3cd5,_0x4e4fe5=_0x304c87();while(!![]){try{var _0x2e23c0=parseInt(_0x112978(0x161))/0x1+parseInt(_0x112978(0x18b))/0x2+-parseInt(_0x112978(0x162))/0x3*(-parseInt(_0x112978(0x19d))/0x4)+-parseInt(_0x112978(0x15d))/0x5*(parseInt(_0x112978(0x156))/0x6)+parseInt(_0x112978(0x18f))/0x7*(-parseInt(_0x112978(0x18e))/0x8)+-parseInt(_0x112978(0x16d))/0x9*(parseInt(_0x112978(0x151))/0xa)+-parseInt(_0x112978(0x194))/0xb*(-parseInt(_0x112978(0x166))/0xc);if(_0x2e23c0===_0x509eeb)break;else _0x4e4fe5['push'](_0x4e4fe5['shift']());}catch(_0x695c68){_0x4e4fe5['push'](_0x4e4fe5['shift']());}}}(a0_0x23a6,0x9a325));function a0_0x23a6(){var _0x46df72=['7231714yCTpQM','German','spwp','cash_date','success','9471zLrrCn','id_detl','/view','Portuguese','body','errors','get','view_collections_so_xt','find','10100YrDmQP','exceljs','_id','/view/:id','Hindi','Portuguese\x20(BR)','params','typeofprocess','updateOne','mongoose','1030CRzwia','English','Arabic','fin_disc','render','4790196ufRzVw','string','French','Types','save','Collection\x20Update\x20successfully','../public/language/languages.json','5PjmECh','collection_sox','/x_so','/view_sox/:id','563626HPmRGj','375ennNWN','bo_disc','flash','Chinese','16236NBWChX','email','redirect','exports','Spanish','Arabic\x20(ae)','forEach','27333tObnyY','valueOf','language','../middleware/auth','json','/view_so_xt/:id','paid','express','/view_xt/:id','type_of_payment','map','collection','multer','findOne','collection_xt','post','vol_deals','/collection/view_so_xt/','/collection/view/','ewt','True','English\x20(US)','collection_so_xt','view_collections_sox','log','totalNewPrice','totalcollection','user','findById','collectionnumber','1463368AhASSm','collection_price','length','8PmcRiz'];a0_0x23a6=function(){return _0x46df72;};return a0_0x23a6();}const express=require(a0_0xc6142a(0x174)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require('../models/all_models'),auth=require(a0_0xc6142a(0x170)),users=require(a0_0xc6142a(0x15c)),excelJS=require(a0_0xc6142a(0x19e)),xlsx=require('xlsx'),multer=require(a0_0xc6142a(0x179)),mongoose=require(a0_0xc6142a(0x1a6));router[a0_0xc6142a(0x19a)](a0_0xc6142a(0x196),auth,async(_0xc24273,_0x434020)=>{var _0x4b6419=a0_0xc6142a;try{const _0x7a8e36=await master_shop[_0x4b6419(0x19c)](),_0x2c8774=_0xc24273[_0x4b6419(0x188)],_0x11be52=await profile[_0x4b6419(0x17a)]({'email':_0x2c8774['email']}),_0x28709e=await staff['findOne']({'email':_0x2c8774[_0x4b6419(0x167)],'type_of_acc_cat':'2'});let _0xb1023f=[];_0x28709e!=null&&(_0xb1023f=await sales_order[_0x4b6419(0x19c)]({'sales_staff_id':_0x28709e[_0x4b6419(0x19f)]}));if(_0x7a8e36[0x0][_0x4b6419(0x16f)]==_0x4b6419(0x182))var _0x2db3f2=users[_0x4b6419(0x152)];else{if(_0x7a8e36[0x0][_0x4b6419(0x16f)]==_0x4b6419(0x1a1))var _0x2db3f2=users[_0x4b6419(0x1a1)];else{if(_0x7a8e36[0x0]['language']==_0x4b6419(0x190))var _0x2db3f2=users[_0x4b6419(0x190)];else{if(_0x7a8e36[0x0][_0x4b6419(0x16f)]==_0x4b6419(0x16a))var _0x2db3f2=users[_0x4b6419(0x16a)];else{if(_0x7a8e36[0x0]['language']==_0x4b6419(0x158))var _0x2db3f2=users[_0x4b6419(0x158)];else{if(_0x7a8e36[0x0][_0x4b6419(0x16f)]==_0x4b6419(0x1a2))var _0x2db3f2=users[_0x4b6419(0x197)];else{if(_0x7a8e36[0x0]['language']==_0x4b6419(0x165))var _0x2db3f2=users[_0x4b6419(0x165)];else{if(_0x7a8e36[0x0][_0x4b6419(0x16f)]==_0x4b6419(0x16b))var _0x2db3f2=users[_0x4b6419(0x153)];}}}}}}}_0x434020['render'](_0x4b6419(0x178),{'success':_0xc24273[_0x4b6419(0x164)](_0x4b6419(0x193)),'errors':_0xc24273[_0x4b6419(0x164)](_0x4b6419(0x199)),'master_shop':_0x7a8e36,'profile':_0x11be52,'role':_0x2c8774,'language':_0x2db3f2,'sales_mine':_0xb1023f,'staff_arr':_0x28709e});}catch(_0x59c20d){console[_0x4b6419(0x185)](_0x59c20d);}}),router[a0_0xc6142a(0x19a)]('/view/:id',auth,async(_0x293918,_0x19beae)=>{var _0x2d6713=a0_0xc6142a;try{const _0x3c364c=await master_shop[_0x2d6713(0x19c)](),_0x2ceeb1=_0x293918[_0x2d6713(0x188)],_0x3a2bba=await profile[_0x2d6713(0x17a)]({'email':_0x2ceeb1[_0x2d6713(0x167)]}),_0x29e2e1=await staff[_0x2d6713(0x17a)]({'email':_0x2ceeb1[_0x2d6713(0x167)]}),_0x474440=await customer[_0x2d6713(0x19c)]({'agent_id':_0x29e2e1[_0x2d6713(0x19f)]}),_0xa70383=_0x293918[_0x2d6713(0x1a3)]['id'],_0x4396ff=await sales_sa[_0x2d6713(0x189)](_0xa70383);if(_0x3c364c[0x0][_0x2d6713(0x16f)]==_0x2d6713(0x182))var _0x4b6db0=users[_0x2d6713(0x152)];else{if(_0x3c364c[0x0][_0x2d6713(0x16f)]==_0x2d6713(0x1a1))var _0x4b6db0=users[_0x2d6713(0x1a1)];else{if(_0x3c364c[0x0][_0x2d6713(0x16f)]=='German')var _0x4b6db0=users[_0x2d6713(0x190)];else{if(_0x3c364c[0x0]['language']==_0x2d6713(0x16a))var _0x4b6db0=users[_0x2d6713(0x16a)];else{if(_0x3c364c[0x0][_0x2d6713(0x16f)]==_0x2d6713(0x158))var _0x4b6db0=users[_0x2d6713(0x158)];else{if(_0x3c364c[0x0][_0x2d6713(0x16f)]=='Portuguese\x20(BR)')var _0x4b6db0=users[_0x2d6713(0x197)];else{if(_0x3c364c[0x0]['language']==_0x2d6713(0x165))var _0x4b6db0=users[_0x2d6713(0x165)];else{if(_0x3c364c[0x0][_0x2d6713(0x16f)]=='Arabic\x20(ae)')var _0x4b6db0=users[_0x2d6713(0x153)];}}}}}}}_0x19beae[_0x2d6713(0x155)]('view_collections',{'success':_0x293918[_0x2d6713(0x164)](_0x2d6713(0x193)),'errors':_0x293918['flash'](_0x2d6713(0x199)),'master_shop':_0x3c364c,'profile':_0x3a2bba,'role':_0x2ceeb1,'language':_0x4b6db0,'customer':_0x474440,'sales_sa':_0x4396ff,'staff_arr':_0x29e2e1});}catch(_0x82d69c){console['log'](_0x82d69c);}}),router['post'](a0_0xc6142a(0x1a0),auth,async(_0x579718,_0x22d866)=>{var _0xcc0e1f=a0_0xc6142a;try{const _0x102111=_0x579718['params']['id'],_0x88492a=await sales_sa[_0xcc0e1f(0x189)](_0x102111),{collection:_0xc02974,invoicemoney:_0x2d3748,collectionnumber:_0x4b9d41,typeofpayment:_0xb1306f,cashdate:_0x2b0785,id_detl:_0x551492}=_0x579718[_0xcc0e1f(0x198)];_0x22d866[_0xcc0e1f(0x171)](_0x88492a);return;if(typeof _0x551492==_0xcc0e1f(0x157))var _0x7638ed=[_0x579718[_0xcc0e1f(0x198)][_0xcc0e1f(0x195)]],_0x4b27b3=[_0x579718[_0xcc0e1f(0x198)][_0xcc0e1f(0x180)]],_0x183fac=[_0x579718['body'][_0xcc0e1f(0x191)]],_0x304cf3=[_0x579718['body'][_0xcc0e1f(0x154)]],_0x3ff92d=[_0x579718[_0xcc0e1f(0x198)][_0xcc0e1f(0x17d)]],_0x5dc464=[_0x579718[_0xcc0e1f(0x198)][_0xcc0e1f(0x163)]],_0x7713f5=[_0x579718['body'][_0xcc0e1f(0x186)]];else var _0x7638ed=[..._0x579718[_0xcc0e1f(0x198)]['id_detl']],_0x4b27b3=[..._0x579718[_0xcc0e1f(0x198)]['ewt']],_0x183fac=[..._0x579718[_0xcc0e1f(0x198)]['spwp']],_0x304cf3=[..._0x579718['body'][_0xcc0e1f(0x154)]],_0x3ff92d=[..._0x579718[_0xcc0e1f(0x198)][_0xcc0e1f(0x17d)]],_0x5dc464=[..._0x579718[_0xcc0e1f(0x198)]['bo_disc']],_0x7713f5=[..._0x579718[_0xcc0e1f(0x198)][_0xcc0e1f(0x186)]];const _0x4dd93f=_0x7638ed[_0xcc0e1f(0x177)](_0x521ea4=>{return _0x521ea4={'id_detl':_0x521ea4};});_0x4b27b3[_0xcc0e1f(0x16c)]((_0x2ab8f0,_0x4d9b19)=>{_0x4dd93f[_0x4d9b19]['ewt']=_0x2ab8f0;}),_0x183fac['forEach']((_0x1d7470,_0x22a58e)=>{_0x4dd93f[_0x22a58e]['spwp']=_0x1d7470;}),_0x304cf3[_0xcc0e1f(0x16c)]((_0x3af228,_0x80c0d5)=>{var _0x1e35e5=_0xcc0e1f;_0x4dd93f[_0x80c0d5][_0x1e35e5(0x154)]=_0x3af228;}),_0x3ff92d['forEach']((_0x45afb5,_0xdb9281)=>{_0x4dd93f[_0xdb9281]['vol_deals']=_0x45afb5;}),_0x5dc464[_0xcc0e1f(0x16c)]((_0x1bddb5,_0x4a98ae)=>{var _0x835c30=_0xcc0e1f;_0x4dd93f[_0x4a98ae][_0x835c30(0x163)]=_0x1bddb5;}),_0x7713f5[_0xcc0e1f(0x16c)]((_0x4afe80,_0x2ba88d)=>{var _0x20f33d=_0xcc0e1f;_0x4dd93f[_0x2ba88d][_0x20f33d(0x187)]=_0x4afe80;}),_0x88492a[_0xcc0e1f(0x18c)]=_0xc02974,_0x88492a['collectionnumber']=_0x4b9d41,_0x88492a[_0xcc0e1f(0x176)]=_0xb1306f,_0x88492a[_0xcc0e1f(0x192)]=_0x2b0785,_0x88492a[_0xcc0e1f(0x173)]=_0xcc0e1f(0x181);const _0x3ac49d=await _0x88492a['save']();if(_0x3ac49d[_0xcc0e1f(0x173)]==_0xcc0e1f(0x181))for(let _0x10c29d=0x0;_0x10c29d<=_0x4dd93f[_0xcc0e1f(0x18d)]-0x1;_0x10c29d++){const _0x5ecdd1=_0x4dd93f[_0x10c29d],_0x2b9efb=mongoose[_0xcc0e1f(0x159)]['ObjectId'];console[_0xcc0e1f(0x185)](_0x5ecdd1);const _0x437abd=await sales_sa[_0xcc0e1f(0x1a5)]({'_id':_0x2b9efb(_0x102111[_0xcc0e1f(0x16e)]()),'sale_product._id':_0x2b9efb(_0x5ecdd1[_0xcc0e1f(0x195)][_0xcc0e1f(0x16e)]())},{'$set':{'sale_product.$.ewt':_0x5ecdd1[_0xcc0e1f(0x180)],'sale_product.$.spwp':_0x5ecdd1[_0xcc0e1f(0x191)],'sale_product.$.fin_disc':_0x5ecdd1[_0xcc0e1f(0x154)],'sale_product.$.vol_deals':_0x5ecdd1['vol_deals'],'sale_product.$.bo_disc':_0x5ecdd1[_0xcc0e1f(0x163)],'sale_product.$.totalprice':parseFloat(_0x5ecdd1[_0xcc0e1f(0x187)])}});}_0x579718[_0xcc0e1f(0x164)]('success',_0xcc0e1f(0x15b)),_0x22d866[_0xcc0e1f(0x168)](_0xcc0e1f(0x17f)+_0x102111);}catch(_0x2b6a15){console['log'](_0x2b6a15);}}),router[a0_0xc6142a(0x19a)](a0_0xc6142a(0x15f),auth,async(_0x5e51f2,_0x7a7062)=>{var _0x3ad8c8=a0_0xc6142a;try{const _0x4b4497=await master_shop['find'](),_0x578e3b=_0x5e51f2[_0x3ad8c8(0x188)],_0x2ca0d1=await profile[_0x3ad8c8(0x17a)]({'email':_0x578e3b[_0x3ad8c8(0x167)]}),_0x4f3dd9=await staff[_0x3ad8c8(0x17a)]({'email':_0x578e3b[_0x3ad8c8(0x167)],'type_of_acc_cat':'2'});let _0xeb1c02=[];_0x4f3dd9!=null&&(_0xeb1c02=await sales_order['find']({'sales_staff_id':_0x4f3dd9[_0x3ad8c8(0x19f)]}));console['log'](_0xeb1c02);if(_0x4b4497[0x0][_0x3ad8c8(0x16f)]==_0x3ad8c8(0x182))var _0x40fb37=users[_0x3ad8c8(0x152)];else{if(_0x4b4497[0x0][_0x3ad8c8(0x16f)]==_0x3ad8c8(0x1a1))var _0x40fb37=users[_0x3ad8c8(0x1a1)];else{if(_0x4b4497[0x0][_0x3ad8c8(0x16f)]==_0x3ad8c8(0x190))var _0x40fb37=users[_0x3ad8c8(0x190)];else{if(_0x4b4497[0x0]['language']==_0x3ad8c8(0x16a))var _0x40fb37=users[_0x3ad8c8(0x16a)];else{if(_0x4b4497[0x0][_0x3ad8c8(0x16f)]=='French')var _0x40fb37=users['French'];else{if(_0x4b4497[0x0][_0x3ad8c8(0x16f)]==_0x3ad8c8(0x1a2))var _0x40fb37=users[_0x3ad8c8(0x197)];else{if(_0x4b4497[0x0][_0x3ad8c8(0x16f)]==_0x3ad8c8(0x165))var _0x40fb37=users[_0x3ad8c8(0x165)];else{if(_0x4b4497[0x0][_0x3ad8c8(0x16f)]==_0x3ad8c8(0x16b))var _0x40fb37=users[_0x3ad8c8(0x153)];}}}}}}}_0x7a7062[_0x3ad8c8(0x155)](_0x3ad8c8(0x15e),{'success':_0x5e51f2['flash'](_0x3ad8c8(0x193)),'errors':_0x5e51f2['flash']('errors'),'master_shop':_0x4b4497,'profile':_0x2ca0d1,'role':_0x578e3b,'language':_0x40fb37,'sales_mine':_0xeb1c02,'staff_arr':_0x4f3dd9});}catch(_0x455a53){console[_0x3ad8c8(0x185)](_0x455a53);}}),router[a0_0xc6142a(0x19a)](a0_0xc6142a(0x160),auth,async(_0x110bf4,_0x3cc557)=>{var _0x28534d=a0_0xc6142a;try{const _0x29e96a=await master_shop[_0x28534d(0x19c)](),_0xb8e3f=_0x110bf4[_0x28534d(0x188)],_0x5c9b93=await profile[_0x28534d(0x17a)]({'email':_0xb8e3f['email']}),_0x180d41=await staff[_0x28534d(0x17a)]({'email':_0xb8e3f[_0x28534d(0x167)]}),_0x52f7f9=await customer[_0x28534d(0x19c)]({'agent_id':_0x180d41['_id']}),_0x56835a=_0x110bf4[_0x28534d(0x1a3)]['id'],_0x5ab74a=await sales_order[_0x28534d(0x189)](_0x56835a);if(_0x29e96a[0x0][_0x28534d(0x16f)]==_0x28534d(0x182))var _0x125b6a=users[_0x28534d(0x152)];else{if(_0x29e96a[0x0][_0x28534d(0x16f)]==_0x28534d(0x1a1))var _0x125b6a=users[_0x28534d(0x1a1)];else{if(_0x29e96a[0x0][_0x28534d(0x16f)]==_0x28534d(0x190))var _0x125b6a=users[_0x28534d(0x190)];else{if(_0x29e96a[0x0][_0x28534d(0x16f)]==_0x28534d(0x16a))var _0x125b6a=users[_0x28534d(0x16a)];else{if(_0x29e96a[0x0][_0x28534d(0x16f)]=='French')var _0x125b6a=users['French'];else{if(_0x29e96a[0x0][_0x28534d(0x16f)]==_0x28534d(0x1a2))var _0x125b6a=users['Portuguese'];else{if(_0x29e96a[0x0]['language']==_0x28534d(0x165))var _0x125b6a=users['Chinese'];else{if(_0x29e96a[0x0][_0x28534d(0x16f)]=='Arabic\x20(ae)')var _0x125b6a=users['Arabic'];}}}}}}}_0x3cc557[_0x28534d(0x155)](_0x28534d(0x184),{'success':_0x110bf4[_0x28534d(0x164)]('success'),'errors':_0x110bf4['flash'](_0x28534d(0x199)),'master_shop':_0x29e96a,'profile':_0x5c9b93,'role':_0xb8e3f,'language':_0x125b6a,'customer':_0x52f7f9,'sales_sa':_0x5ab74a});}catch(_0x4f9681){console[_0x28534d(0x185)](_0x4f9681);}}),router[a0_0xc6142a(0x19a)]('/view_x',auth,async(_0x1423e7,_0x129e0e)=>{var _0x1b0ef0=a0_0xc6142a;try{const _0x20b697=await master_shop[_0x1b0ef0(0x19c)](),_0x5265bb=_0x1423e7[_0x1b0ef0(0x188)],_0x3c48b2=await profile[_0x1b0ef0(0x17a)]({'email':_0x5265bb[_0x1b0ef0(0x167)]}),_0x16f66e=await staff[_0x1b0ef0(0x17a)]({'email':_0x5265bb[_0x1b0ef0(0x167)],'type_of_acc_cat':'1'});let _0x15ef0c=[];_0x16f66e!=null&&(_0x15ef0c=await sales_sa[_0x1b0ef0(0x19c)]({'sales_staff_id':_0x16f66e[_0x1b0ef0(0x19f)]}));if(_0x20b697[0x0][_0x1b0ef0(0x16f)]=='English\x20(US)')var _0x1dfaae=users[_0x1b0ef0(0x152)];else{if(_0x20b697[0x0]['language']=='Hindi')var _0x1dfaae=users[_0x1b0ef0(0x1a1)];else{if(_0x20b697[0x0][_0x1b0ef0(0x16f)]==_0x1b0ef0(0x190))var _0x1dfaae=users['German'];else{if(_0x20b697[0x0][_0x1b0ef0(0x16f)]==_0x1b0ef0(0x16a))var _0x1dfaae=users[_0x1b0ef0(0x16a)];else{if(_0x20b697[0x0][_0x1b0ef0(0x16f)]==_0x1b0ef0(0x158))var _0x1dfaae=users[_0x1b0ef0(0x158)];else{if(_0x20b697[0x0][_0x1b0ef0(0x16f)]==_0x1b0ef0(0x1a2))var _0x1dfaae=users[_0x1b0ef0(0x197)];else{if(_0x20b697[0x0]['language']=='Chinese')var _0x1dfaae=users[_0x1b0ef0(0x165)];else{if(_0x20b697[0x0][_0x1b0ef0(0x16f)]==_0x1b0ef0(0x16b))var _0x1dfaae=users[_0x1b0ef0(0x153)];}}}}}}}_0x129e0e[_0x1b0ef0(0x155)](_0x1b0ef0(0x17b),{'success':_0x1423e7[_0x1b0ef0(0x164)](_0x1b0ef0(0x193)),'errors':_0x1423e7[_0x1b0ef0(0x164)]('errors'),'master_shop':_0x20b697,'profile':_0x3c48b2,'role':_0x5265bb,'language':_0x1dfaae,'sales_mine':_0x15ef0c,'staff_arr':_0x16f66e});}catch(_0x399f0a){console[_0x1b0ef0(0x185)](_0x399f0a);}}),router['get']('/view_xt/:id',auth,async(_0x28fff4,_0x4458e6)=>{var _0x13c5f1=a0_0xc6142a;try{const _0x239d8b=await master_shop[_0x13c5f1(0x19c)](),_0x3b1db0=_0x28fff4[_0x13c5f1(0x188)],_0x543432=await profile[_0x13c5f1(0x17a)]({'email':_0x3b1db0[_0x13c5f1(0x167)]}),_0x50163c=await staff[_0x13c5f1(0x17a)]({'email':_0x3b1db0[_0x13c5f1(0x167)]}),_0x22d311=await customer[_0x13c5f1(0x19c)]({'agent_id':_0x50163c[_0x13c5f1(0x19f)]}),_0x33a0c2=_0x28fff4[_0x13c5f1(0x1a3)]['id'],_0x2f5e56=await sales_sa[_0x13c5f1(0x189)](_0x33a0c2);if(_0x239d8b[0x0][_0x13c5f1(0x16f)]==_0x13c5f1(0x182))var _0x3fb938=users['English'];else{if(_0x239d8b[0x0][_0x13c5f1(0x16f)]=='Hindi')var _0x3fb938=users[_0x13c5f1(0x1a1)];else{if(_0x239d8b[0x0][_0x13c5f1(0x16f)]==_0x13c5f1(0x190))var _0x3fb938=users[_0x13c5f1(0x190)];else{if(_0x239d8b[0x0][_0x13c5f1(0x16f)]=='Spanish')var _0x3fb938=users[_0x13c5f1(0x16a)];else{if(_0x239d8b[0x0][_0x13c5f1(0x16f)]==_0x13c5f1(0x158))var _0x3fb938=users[_0x13c5f1(0x158)];else{if(_0x239d8b[0x0][_0x13c5f1(0x16f)]=='Portuguese\x20(BR)')var _0x3fb938=users[_0x13c5f1(0x197)];else{if(_0x239d8b[0x0][_0x13c5f1(0x16f)]==_0x13c5f1(0x165))var _0x3fb938=users[_0x13c5f1(0x165)];else{if(_0x239d8b[0x0][_0x13c5f1(0x16f)]==_0x13c5f1(0x16b))var _0x3fb938=users[_0x13c5f1(0x153)];}}}}}}}_0x4458e6[_0x13c5f1(0x155)]('view_collections_xt',{'success':_0x28fff4[_0x13c5f1(0x164)](_0x13c5f1(0x193)),'errors':_0x28fff4[_0x13c5f1(0x164)](_0x13c5f1(0x199)),'master_shop':_0x239d8b,'profile':_0x543432,'role':_0x3b1db0,'language':_0x3fb938,'customer':_0x22d311,'sales_sa':_0x2f5e56,'staff_arr':_0x50163c});}catch(_0x2de117){console['log'](_0x2de117);}}),router['post'](a0_0xc6142a(0x175),auth,async(_0x10a694,_0x1dce0b)=>{var _0x2aa404=a0_0xc6142a;try{const _0x16910e=_0x10a694['params']['id'],_0x177988=await sales_sa[_0x2aa404(0x189)](_0x16910e),{collection:_0x64305b,invoicemoney:_0x3d457d,collectionnumber:_0x15c29c,typeofpayment:_0x338257,cashdate:_0x530830,id_detl:_0x5ef134}=_0x10a694[_0x2aa404(0x198)];if(typeof _0x5ef134==_0x2aa404(0x157))var _0x55c40f=[_0x10a694[_0x2aa404(0x198)][_0x2aa404(0x195)]],_0x2e4268=[_0x10a694['body'][_0x2aa404(0x180)]],_0x4ec696=[_0x10a694[_0x2aa404(0x198)][_0x2aa404(0x191)]],_0x205f62=[_0x10a694['body']['fin_disc']],_0x2bd667=[_0x10a694['body']['vol_deals']],_0x59346d=[_0x10a694[_0x2aa404(0x198)][_0x2aa404(0x163)]],_0x166eb2=[_0x10a694[_0x2aa404(0x198)]['totalNewPrice']];else var _0x55c40f=[..._0x10a694[_0x2aa404(0x198)]['id_detl']],_0x2e4268=[..._0x10a694[_0x2aa404(0x198)][_0x2aa404(0x180)]],_0x4ec696=[..._0x10a694[_0x2aa404(0x198)][_0x2aa404(0x191)]],_0x205f62=[..._0x10a694['body'][_0x2aa404(0x154)]],_0x2bd667=[..._0x10a694['body'][_0x2aa404(0x17d)]],_0x59346d=[..._0x10a694[_0x2aa404(0x198)]['bo_disc']],_0x166eb2=[..._0x10a694['body']['totalNewPrice']];const _0x4adbca=_0x55c40f['map'](_0x162d82=>{return _0x162d82={'id_detl':_0x162d82};});_0x2e4268['forEach']((_0x41a4ab,_0x492fcc)=>{var _0x265e64=_0x2aa404;_0x4adbca[_0x492fcc][_0x265e64(0x180)]=_0x41a4ab;}),_0x4ec696['forEach']((_0x3dfe73,_0xdac532)=>{_0x4adbca[_0xdac532]['spwp']=_0x3dfe73;}),_0x205f62[_0x2aa404(0x16c)]((_0x3b1066,_0x84055c)=>{var _0xa870e6=_0x2aa404;_0x4adbca[_0x84055c][_0xa870e6(0x154)]=_0x3b1066;}),_0x2bd667[_0x2aa404(0x16c)]((_0x18c614,_0x21217b)=>{var _0x4fc097=_0x2aa404;_0x4adbca[_0x21217b][_0x4fc097(0x17d)]=_0x18c614;}),_0x59346d['forEach']((_0x494b1a,_0x3c6e7d)=>{var _0x323d62=_0x2aa404;_0x4adbca[_0x3c6e7d][_0x323d62(0x163)]=_0x494b1a;}),_0x166eb2[_0x2aa404(0x16c)]((_0x1b31cc,_0x2c0195)=>{var _0x4971a3=_0x2aa404;_0x4adbca[_0x2c0195][_0x4971a3(0x187)]=_0x1b31cc;}),_0x177988['collection_price']=_0x64305b,_0x177988[_0x2aa404(0x18a)]=_0x15c29c,_0x177988[_0x2aa404(0x176)]=_0x338257,_0x177988[_0x2aa404(0x192)]=_0x530830,_0x177988[_0x2aa404(0x173)]=_0x2aa404(0x181),_0x177988[_0x2aa404(0x1a4)]='1';const _0x3d81d7=await _0x177988[_0x2aa404(0x15a)]();if(_0x3d81d7['paid']==_0x2aa404(0x181))for(let _0x3b64fc=0x0;_0x3b64fc<=_0x4adbca[_0x2aa404(0x18d)]-0x1;_0x3b64fc++){const _0x23555a=_0x4adbca[_0x3b64fc],_0x152813=mongoose[_0x2aa404(0x159)]['ObjectId'];console['log'](_0x23555a);const _0x263fe7=await sales_sa[_0x2aa404(0x1a5)]({'_id':_0x152813(_0x16910e[_0x2aa404(0x16e)]()),'sale_product._id':_0x152813(_0x23555a[_0x2aa404(0x195)][_0x2aa404(0x16e)]())},{'$set':{'sale_product.$.ewt':_0x23555a[_0x2aa404(0x180)],'sale_product.$.spwp':_0x23555a[_0x2aa404(0x191)],'sale_product.$.fin_disc':_0x23555a['fin_disc'],'sale_product.$.vol_deals':_0x23555a['vol_deals'],'sale_product.$.bo_disc':_0x23555a[_0x2aa404(0x163)],'sale_product.$.totalprice':parseFloat(_0x23555a[_0x2aa404(0x187)])}});}_0x10a694[_0x2aa404(0x164)](_0x2aa404(0x193),_0x2aa404(0x15b)),_0x1dce0b[_0x2aa404(0x168)]('/collection/view/'+_0x16910e);}catch(_0x398589){console[_0x2aa404(0x185)](_0x398589);}}),router[a0_0xc6142a(0x19a)]('/so_x',auth,async(_0x96ca96,_0x262908)=>{var _0x4f291e=a0_0xc6142a;try{const _0x3d9004=await master_shop['find'](),_0xd8a611=_0x96ca96[_0x4f291e(0x188)],_0x172509=await profile[_0x4f291e(0x17a)]({'email':_0xd8a611[_0x4f291e(0x167)]}),_0xf35ea6=await staff['findOne']({'email':_0xd8a611[_0x4f291e(0x167)],'type_of_acc_cat':'1'});let _0x4e0fd7=[];_0xf35ea6!=null&&(_0x4e0fd7=await sales_order['find']({'sales_staff_id':_0xf35ea6[_0x4f291e(0x19f)]}));if(_0x3d9004[0x0]['language']==_0x4f291e(0x182))var _0x1787c5=users[_0x4f291e(0x152)];else{if(_0x3d9004[0x0][_0x4f291e(0x16f)]==_0x4f291e(0x1a1))var _0x1787c5=users['Hindi'];else{if(_0x3d9004[0x0]['language']==_0x4f291e(0x190))var _0x1787c5=users[_0x4f291e(0x190)];else{if(_0x3d9004[0x0][_0x4f291e(0x16f)]==_0x4f291e(0x16a))var _0x1787c5=users[_0x4f291e(0x16a)];else{if(_0x3d9004[0x0][_0x4f291e(0x16f)]=='French')var _0x1787c5=users[_0x4f291e(0x158)];else{if(_0x3d9004[0x0][_0x4f291e(0x16f)]==_0x4f291e(0x1a2))var _0x1787c5=users['Portuguese'];else{if(_0x3d9004[0x0][_0x4f291e(0x16f)]=='Chinese')var _0x1787c5=users[_0x4f291e(0x165)];else{if(_0x3d9004[0x0][_0x4f291e(0x16f)]=='Arabic\x20(ae)')var _0x1787c5=users[_0x4f291e(0x153)];}}}}}}}_0x262908[_0x4f291e(0x155)](_0x4f291e(0x183),{'success':_0x96ca96[_0x4f291e(0x164)](_0x4f291e(0x193)),'errors':_0x96ca96[_0x4f291e(0x164)](_0x4f291e(0x199)),'master_shop':_0x3d9004,'profile':_0x172509,'role':_0xd8a611,'language':_0x1787c5,'sales_mine':_0x4e0fd7,'staff_arr':_0xf35ea6});}catch(_0x315e6f){console[_0x4f291e(0x185)](_0x315e6f);}}),router[a0_0xc6142a(0x19a)](a0_0xc6142a(0x172),auth,async(_0x5a80be,_0x41c484)=>{var _0x4b6e31=a0_0xc6142a;try{const _0x2f36e7=await master_shop['find'](),_0x516578=_0x5a80be[_0x4b6e31(0x188)],_0x2553fe=await profile[_0x4b6e31(0x17a)]({'email':_0x516578['email']}),_0x23a127=await staff[_0x4b6e31(0x17a)]({'email':_0x516578['email']}),_0x13f855=await customer['find']({'agent_id':_0x23a127[_0x4b6e31(0x19f)]}),_0xb56954=_0x5a80be[_0x4b6e31(0x1a3)]['id'],_0x2a3133=await sales_order['findById'](_0xb56954);if(_0x2f36e7[0x0][_0x4b6e31(0x16f)]==_0x4b6e31(0x182))var _0x27b5d5=users['English'];else{if(_0x2f36e7[0x0][_0x4b6e31(0x16f)]==_0x4b6e31(0x1a1))var _0x27b5d5=users[_0x4b6e31(0x1a1)];else{if(_0x2f36e7[0x0][_0x4b6e31(0x16f)]=='German')var _0x27b5d5=users['German'];else{if(_0x2f36e7[0x0][_0x4b6e31(0x16f)]==_0x4b6e31(0x16a))var _0x27b5d5=users['Spanish'];else{if(_0x2f36e7[0x0][_0x4b6e31(0x16f)]==_0x4b6e31(0x158))var _0x27b5d5=users['French'];else{if(_0x2f36e7[0x0][_0x4b6e31(0x16f)]=='Portuguese\x20(BR)')var _0x27b5d5=users[_0x4b6e31(0x197)];else{if(_0x2f36e7[0x0]['language']==_0x4b6e31(0x165))var _0x27b5d5=users['Chinese'];else{if(_0x2f36e7[0x0]['language']==_0x4b6e31(0x16b))var _0x27b5d5=users['Arabic'];}}}}}}}_0x41c484[_0x4b6e31(0x155)](_0x4b6e31(0x19b),{'success':_0x5a80be[_0x4b6e31(0x164)](_0x4b6e31(0x193)),'errors':_0x5a80be['flash'](_0x4b6e31(0x199)),'master_shop':_0x2f36e7,'profile':_0x2553fe,'role':_0x516578,'language':_0x27b5d5,'customer':_0x13f855,'sales_sa':_0x2a3133,'staff_arr':_0x23a127});}catch(_0x51c12b){console['log'](_0x51c12b);}}),router[a0_0xc6142a(0x17c)]('/view_so_xt/:id',auth,async(_0x545715,_0x119e95)=>{var _0x3eb548=a0_0xc6142a;try{const _0x8d3b6c=_0x545715[_0x3eb548(0x1a3)]['id'],_0x591269=await sales_order[_0x3eb548(0x189)](_0x8d3b6c),{collection:_0x1a69ed,invoicemoney:_0x1456a5,collectionnumber:_0x469dd6,typeofpayment:_0x344778,cashdate:_0x92e054,id_detl:_0x386dc5}=_0x545715['body'];_0x591269[_0x3eb548(0x18c)]=_0x1a69ed,_0x591269['type_of_payment']=_0x344778,_0x591269[_0x3eb548(0x192)]=_0x92e054,_0x591269[_0x3eb548(0x173)]=_0x3eb548(0x181),_0x591269[_0x3eb548(0x1a4)]='1';const _0xc4093a=await _0x591269[_0x3eb548(0x15a)]();_0x545715[_0x3eb548(0x164)]('success','Collection\x20Update\x20successfully'),_0x119e95['redirect'](_0x3eb548(0x17e)+_0x8d3b6c);}catch(_0x4a1e7f){console['log'](_0x4a1e7f);}}),module[a0_0xc6142a(0x169)]=router;