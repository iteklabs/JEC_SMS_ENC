var a0_0x43f227=a0_0x244f;function a0_0x244f(_0x3c4e54,_0x191eca){var _0x5dd206=a0_0x5dd2();return a0_0x244f=function(_0x244f26,_0x46af5c){_0x244f26=_0x244f26-0x185;var _0x1d55bd=_0x5dd206[_0x244f26];return _0x1d55bd;},a0_0x244f(_0x3c4e54,_0x191eca);}(function(_0x15d5ee,_0x119480){var _0xc3e082=a0_0x244f,_0x2ea2c9=_0x15d5ee();while(!![]){try{var _0x5193d2=-parseInt(_0xc3e082(0x1b7))/0x1+-parseInt(_0xc3e082(0x1c9))/0x2+-parseInt(_0xc3e082(0x18f))/0x3+-parseInt(_0xc3e082(0x1d5))/0x4*(-parseInt(_0xc3e082(0x1b5))/0x5)+-parseInt(_0xc3e082(0x1b4))/0x6*(-parseInt(_0xc3e082(0x1b2))/0x7)+-parseInt(_0xc3e082(0x1a0))/0x8+parseInt(_0xc3e082(0x19e))/0x9;if(_0x5193d2===_0x119480)break;else _0x2ea2c9['push'](_0x2ea2c9['shift']());}catch(_0x5d5ff1){_0x2ea2c9['push'](_0x2ea2c9['shift']());}}}(a0_0x5dd2,0xa8eaf));const express=require('express'),app=express(),router=express[a0_0x43f227(0x194)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require('../models/all_models'),auth=require(a0_0x43f227(0x1bd)),users=require(a0_0x43f227(0x192)),excelJS=require(a0_0x43f227(0x191)),xlsx=require(a0_0x43f227(0x19a)),multer=require('multer'),mongoose=require('mongoose');router['get'](a0_0x43f227(0x1cb),auth,async(_0xd2ae0,_0x419487)=>{var _0x41958d=a0_0x43f227;try{const _0x12018e=await master_shop[_0x41958d(0x1c1)](),_0x219f01=_0xd2ae0[_0x41958d(0x195)],_0x5d3951=await profile[_0x41958d(0x1bf)]({'email':_0x219f01[_0x41958d(0x1d8)]}),_0x1f48c9=await staff[_0x41958d(0x1bf)]({'email':_0x219f01[_0x41958d(0x1d8)],'type_of_acc_cat':'2'});let _0x35bdf1=[];_0x1f48c9!=null&&(_0x35bdf1=await sales_order[_0x41958d(0x1c1)]({'sales_staff_id':_0x1f48c9[_0x41958d(0x1aa)]}));if(_0x12018e[0x0]['language']==_0x41958d(0x197))var _0x40388f=users[_0x41958d(0x1ab)];else{if(_0x12018e[0x0][_0x41958d(0x1c6)]==_0x41958d(0x1b1))var _0x40388f=users[_0x41958d(0x1b1)];else{if(_0x12018e[0x0][_0x41958d(0x1c6)]==_0x41958d(0x185))var _0x40388f=users[_0x41958d(0x185)];else{if(_0x12018e[0x0][_0x41958d(0x1c6)]==_0x41958d(0x1b8))var _0x40388f=users[_0x41958d(0x1b8)];else{if(_0x12018e[0x0][_0x41958d(0x1c6)]==_0x41958d(0x1a2))var _0x40388f=users[_0x41958d(0x1a2)];else{if(_0x12018e[0x0][_0x41958d(0x1c6)]==_0x41958d(0x1a8))var _0x40388f=users[_0x41958d(0x1c0)];else{if(_0x12018e[0x0]['language']==_0x41958d(0x1bc))var _0x40388f=users[_0x41958d(0x1bc)];else{if(_0x12018e[0x0][_0x41958d(0x1c6)]=='Arabic\x20(ae)')var _0x40388f=users['Arabic'];}}}}}}}_0x419487['render'](_0x41958d(0x186),{'success':_0xd2ae0[_0x41958d(0x1d7)](_0x41958d(0x1d3)),'errors':_0xd2ae0[_0x41958d(0x1d7)]('errors'),'master_shop':_0x12018e,'profile':_0x5d3951,'role':_0x219f01,'language':_0x40388f,'sales_mine':_0x35bdf1,'staff_arr':_0x1f48c9});}catch(_0xc6271a){console['log'](_0xc6271a);}}),router[a0_0x43f227(0x1c3)](a0_0x43f227(0x1a4),auth,async(_0x1c0f74,_0x7f5615)=>{var _0x52af51=a0_0x43f227;try{const _0x1d11c2=await master_shop[_0x52af51(0x1c1)](),_0x33e8f7=_0x1c0f74[_0x52af51(0x195)],_0x29cd39=await profile[_0x52af51(0x1bf)]({'email':_0x33e8f7[_0x52af51(0x1d8)]}),_0x65e42c=await staff[_0x52af51(0x1bf)]({'email':_0x33e8f7['email']}),_0x3c188c=await customer[_0x52af51(0x1c1)]({'agent_id':_0x65e42c[_0x52af51(0x1aa)]}),_0x3d8629=_0x1c0f74['params']['id'],_0x49eb03=await sales_sa['findById'](_0x3d8629);if(_0x1d11c2[0x0][_0x52af51(0x1c6)]==_0x52af51(0x197))var _0x7cafb3=users[_0x52af51(0x1ab)];else{if(_0x1d11c2[0x0]['language']==_0x52af51(0x1b1))var _0x7cafb3=users['Hindi'];else{if(_0x1d11c2[0x0][_0x52af51(0x1c6)]==_0x52af51(0x185))var _0x7cafb3=users[_0x52af51(0x185)];else{if(_0x1d11c2[0x0][_0x52af51(0x1c6)]=='Spanish')var _0x7cafb3=users[_0x52af51(0x1b8)];else{if(_0x1d11c2[0x0][_0x52af51(0x1c6)]==_0x52af51(0x1a2))var _0x7cafb3=users[_0x52af51(0x1a2)];else{if(_0x1d11c2[0x0][_0x52af51(0x1c6)]==_0x52af51(0x1a8))var _0x7cafb3=users[_0x52af51(0x1c0)];else{if(_0x1d11c2[0x0][_0x52af51(0x1c6)]==_0x52af51(0x1bc))var _0x7cafb3=users[_0x52af51(0x1bc)];else{if(_0x1d11c2[0x0][_0x52af51(0x1c6)]=='Arabic\x20(ae)')var _0x7cafb3=users['Arabic'];}}}}}}}_0x7f5615[_0x52af51(0x1cf)](_0x52af51(0x1d1),{'success':_0x1c0f74[_0x52af51(0x1d7)](_0x52af51(0x1d3)),'errors':_0x1c0f74[_0x52af51(0x1d7)](_0x52af51(0x1ac)),'master_shop':_0x1d11c2,'profile':_0x29cd39,'role':_0x33e8f7,'language':_0x7cafb3,'customer':_0x3c188c,'sales_sa':_0x49eb03,'staff_arr':_0x65e42c});}catch(_0x50f947){console[_0x52af51(0x1bb)](_0x50f947);}}),router[a0_0x43f227(0x1c5)](a0_0x43f227(0x1a4),auth,async(_0x323a7d,_0x3ef8a6)=>{var _0x3af9a7=a0_0x43f227;try{const _0x347e94=_0x323a7d[_0x3af9a7(0x1a9)]['id'],_0x4e8c55=await sales_sa[_0x3af9a7(0x1ae)](_0x347e94),{collection:_0x451aed,invoicemoney:_0x1c87e3,collectionnumber:_0x544109,typeofpayment:_0x5acd13,cashdate:_0x557c1e,id_detl:_0x425fd0}=_0x323a7d[_0x3af9a7(0x1ce)];_0x3ef8a6[_0x3af9a7(0x1cd)](_0x4e8c55);return;if(typeof _0x425fd0==_0x3af9a7(0x18c))var _0x22242e=[_0x323a7d['body'][_0x3af9a7(0x18d)]],_0x16daff=[_0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x19c)]],_0x3b1cb3=[_0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x1c2)]],_0x3967e2=[_0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x19f)]],_0x5bbb10=[_0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x188)]],_0x1582ad=[_0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x1d2)]],_0x23fb66=[_0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x1a7)]];else var _0x22242e=[..._0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x18d)]],_0x16daff=[..._0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x19c)]],_0x3b1cb3=[..._0x323a7d['body'][_0x3af9a7(0x1c2)]],_0x3967e2=[..._0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x19f)]],_0x5bbb10=[..._0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x188)]],_0x1582ad=[..._0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x1d2)]],_0x23fb66=[..._0x323a7d[_0x3af9a7(0x1ce)][_0x3af9a7(0x1a7)]];const _0xb8cc3b=_0x22242e[_0x3af9a7(0x1b6)](_0x279f4b=>{return _0x279f4b={'id_detl':_0x279f4b};});_0x16daff[_0x3af9a7(0x1c4)]((_0x4d49c0,_0x926d81)=>{var _0xff22c6=_0x3af9a7;_0xb8cc3b[_0x926d81][_0xff22c6(0x19c)]=_0x4d49c0;}),_0x3b1cb3[_0x3af9a7(0x1c4)]((_0x1cbd14,_0x184a8d)=>{var _0x18097b=_0x3af9a7;_0xb8cc3b[_0x184a8d][_0x18097b(0x1c2)]=_0x1cbd14;}),_0x3967e2[_0x3af9a7(0x1c4)]((_0x2a8644,_0x24a960)=>{var _0x28f226=_0x3af9a7;_0xb8cc3b[_0x24a960][_0x28f226(0x19f)]=_0x2a8644;}),_0x5bbb10[_0x3af9a7(0x1c4)]((_0x75d2b5,_0x4bc5c3)=>{var _0x550df2=_0x3af9a7;_0xb8cc3b[_0x4bc5c3][_0x550df2(0x188)]=_0x75d2b5;}),_0x1582ad['forEach']((_0x3b7794,_0x24b19a)=>{_0xb8cc3b[_0x24b19a]['bo_disc']=_0x3b7794;}),_0x23fb66[_0x3af9a7(0x1c4)]((_0x83656e,_0x278d77)=>{_0xb8cc3b[_0x278d77]['totalcollection']=_0x83656e;}),_0x4e8c55[_0x3af9a7(0x1b0)]=_0x451aed,_0x4e8c55[_0x3af9a7(0x1c8)]=_0x544109,_0x4e8c55[_0x3af9a7(0x1c7)]=_0x5acd13,_0x4e8c55[_0x3af9a7(0x187)]=_0x557c1e,_0x4e8c55['paid']='True';const _0x43fac2=await _0x4e8c55[_0x3af9a7(0x1ca)]();if(_0x43fac2[_0x3af9a7(0x1b9)]==_0x3af9a7(0x1a3))for(let _0x104f84=0x0;_0x104f84<=_0xb8cc3b[_0x3af9a7(0x1a1)]-0x1;_0x104f84++){const _0x4f7518=_0xb8cc3b[_0x104f84],_0x25f870=mongoose[_0x3af9a7(0x19b)][_0x3af9a7(0x1ad)];console['log'](_0x4f7518);const _0x34cd4f=await sales_sa[_0x3af9a7(0x190)]({'_id':_0x25f870(_0x347e94[_0x3af9a7(0x1cc)]()),'sale_product._id':_0x25f870(_0x4f7518[_0x3af9a7(0x18d)]['valueOf']())},{'$set':{'sale_product.$.ewt':_0x4f7518[_0x3af9a7(0x19c)],'sale_product.$.spwp':_0x4f7518[_0x3af9a7(0x1c2)],'sale_product.$.fin_disc':_0x4f7518[_0x3af9a7(0x19f)],'sale_product.$.vol_deals':_0x4f7518[_0x3af9a7(0x188)],'sale_product.$.bo_disc':_0x4f7518[_0x3af9a7(0x1d2)],'sale_product.$.totalprice':parseFloat(_0x4f7518[_0x3af9a7(0x1be)])}});}_0x323a7d[_0x3af9a7(0x1d7)](_0x3af9a7(0x1d3),_0x3af9a7(0x198)),_0x3ef8a6[_0x3af9a7(0x19d)](_0x3af9a7(0x189)+_0x347e94);}catch(_0x27d72c){console[_0x3af9a7(0x1bb)](_0x27d72c);}}),router['get'](a0_0x43f227(0x18b),auth,async(_0xf89a72,_0x4a4286)=>{var _0x1e5e7e=a0_0x43f227;try{const _0x20f93c=await master_shop[_0x1e5e7e(0x1c1)](),_0x311114=_0xf89a72[_0x1e5e7e(0x195)],_0x46374f=await profile[_0x1e5e7e(0x1bf)]({'email':_0x311114[_0x1e5e7e(0x1d8)]}),_0x18e613=await staff[_0x1e5e7e(0x1bf)]({'email':_0x311114[_0x1e5e7e(0x1d8)],'type_of_acc_cat':'2'});let _0x493b37=[];_0x18e613!=null&&(_0x493b37=await sales_order[_0x1e5e7e(0x1c1)]({'sales_staff_id':_0x18e613[_0x1e5e7e(0x1aa)]}));console[_0x1e5e7e(0x1bb)](_0x493b37);if(_0x20f93c[0x0][_0x1e5e7e(0x1c6)]==_0x1e5e7e(0x197))var _0x1cbf29=users[_0x1e5e7e(0x1ab)];else{if(_0x20f93c[0x0]['language']==_0x1e5e7e(0x1b1))var _0x1cbf29=users['Hindi'];else{if(_0x20f93c[0x0][_0x1e5e7e(0x1c6)]==_0x1e5e7e(0x185))var _0x1cbf29=users[_0x1e5e7e(0x185)];else{if(_0x20f93c[0x0][_0x1e5e7e(0x1c6)]==_0x1e5e7e(0x1b8))var _0x1cbf29=users[_0x1e5e7e(0x1b8)];else{if(_0x20f93c[0x0]['language']==_0x1e5e7e(0x1a2))var _0x1cbf29=users[_0x1e5e7e(0x1a2)];else{if(_0x20f93c[0x0][_0x1e5e7e(0x1c6)]==_0x1e5e7e(0x1a8))var _0x1cbf29=users[_0x1e5e7e(0x1c0)];else{if(_0x20f93c[0x0][_0x1e5e7e(0x1c6)]==_0x1e5e7e(0x1bc))var _0x1cbf29=users[_0x1e5e7e(0x1bc)];else{if(_0x20f93c[0x0][_0x1e5e7e(0x1c6)]==_0x1e5e7e(0x1d0))var _0x1cbf29=users[_0x1e5e7e(0x1d4)];}}}}}}}_0x4a4286[_0x1e5e7e(0x1cf)](_0x1e5e7e(0x1a5),{'success':_0xf89a72[_0x1e5e7e(0x1d7)](_0x1e5e7e(0x1d3)),'errors':_0xf89a72['flash'](_0x1e5e7e(0x1ac)),'master_shop':_0x20f93c,'profile':_0x46374f,'role':_0x311114,'language':_0x1cbf29,'sales_mine':_0x493b37,'staff_arr':_0x18e613});}catch(_0x1fd9f6){console['log'](_0x1fd9f6);}}),router[a0_0x43f227(0x1c3)](a0_0x43f227(0x193),auth,async(_0x1b7769,_0xd7fba8)=>{var _0x4fec8a=a0_0x43f227;try{const _0x368cd8=await master_shop['find'](),_0x207e41=_0x1b7769[_0x4fec8a(0x195)],_0x1979ed=await profile[_0x4fec8a(0x1bf)]({'email':_0x207e41['email']}),_0x58cc5d=await staff[_0x4fec8a(0x1bf)]({'email':_0x207e41['email']}),_0x4feb99=await customer[_0x4fec8a(0x1c1)]({'agent_id':_0x58cc5d['_id']}),_0x1e7721=_0x1b7769[_0x4fec8a(0x1a9)]['id'],_0x2bbbe1=await sales_order[_0x4fec8a(0x1ae)](_0x1e7721);if(_0x368cd8[0x0]['language']==_0x4fec8a(0x197))var _0xd3f5ed=users[_0x4fec8a(0x1ab)];else{if(_0x368cd8[0x0]['language']==_0x4fec8a(0x1b1))var _0xd3f5ed=users['Hindi'];else{if(_0x368cd8[0x0][_0x4fec8a(0x1c6)]==_0x4fec8a(0x185))var _0xd3f5ed=users['German'];else{if(_0x368cd8[0x0][_0x4fec8a(0x1c6)]==_0x4fec8a(0x1b8))var _0xd3f5ed=users[_0x4fec8a(0x1b8)];else{if(_0x368cd8[0x0][_0x4fec8a(0x1c6)]=='French')var _0xd3f5ed=users[_0x4fec8a(0x1a2)];else{if(_0x368cd8[0x0][_0x4fec8a(0x1c6)]==_0x4fec8a(0x1a8))var _0xd3f5ed=users['Portuguese'];else{if(_0x368cd8[0x0][_0x4fec8a(0x1c6)]==_0x4fec8a(0x1bc))var _0xd3f5ed=users[_0x4fec8a(0x1bc)];else{if(_0x368cd8[0x0][_0x4fec8a(0x1c6)]==_0x4fec8a(0x1d0))var _0xd3f5ed=users[_0x4fec8a(0x1d4)];}}}}}}}_0xd7fba8[_0x4fec8a(0x1cf)](_0x4fec8a(0x199),{'success':_0x1b7769[_0x4fec8a(0x1d7)](_0x4fec8a(0x1d3)),'errors':_0x1b7769[_0x4fec8a(0x1d7)](_0x4fec8a(0x1ac)),'master_shop':_0x368cd8,'profile':_0x1979ed,'role':_0x207e41,'language':_0xd3f5ed,'customer':_0x4feb99,'sales_sa':_0x2bbbe1});}catch(_0x49f441){console[_0x4fec8a(0x1bb)](_0x49f441);}}),router[a0_0x43f227(0x1c3)](a0_0x43f227(0x18a),auth,async(_0x4d171c,_0x239d12)=>{var _0x5a646d=a0_0x43f227;try{const _0x217fca=await master_shop['find'](),_0x9de7ee=_0x4d171c[_0x5a646d(0x195)],_0x3fb29c=await profile[_0x5a646d(0x1bf)]({'email':_0x9de7ee[_0x5a646d(0x1d8)]}),_0x47df16=await staff[_0x5a646d(0x1bf)]({'email':_0x9de7ee['email'],'type_of_acc_cat':'1'});let _0x1b63f0=[];_0x47df16!=null&&(_0x1b63f0=await sales_sa[_0x5a646d(0x1c1)]({'sales_staff_id':_0x47df16['_id']}));if(_0x217fca[0x0][_0x5a646d(0x1c6)]==_0x5a646d(0x197))var _0x3f90ce=users[_0x5a646d(0x1ab)];else{if(_0x217fca[0x0][_0x5a646d(0x1c6)]==_0x5a646d(0x1b1))var _0x3f90ce=users[_0x5a646d(0x1b1)];else{if(_0x217fca[0x0][_0x5a646d(0x1c6)]==_0x5a646d(0x185))var _0x3f90ce=users[_0x5a646d(0x185)];else{if(_0x217fca[0x0]['language']==_0x5a646d(0x1b8))var _0x3f90ce=users['Spanish'];else{if(_0x217fca[0x0][_0x5a646d(0x1c6)]=='French')var _0x3f90ce=users[_0x5a646d(0x1a2)];else{if(_0x217fca[0x0]['language']==_0x5a646d(0x1a8))var _0x3f90ce=users['Portuguese'];else{if(_0x217fca[0x0][_0x5a646d(0x1c6)]==_0x5a646d(0x1bc))var _0x3f90ce=users['Chinese'];else{if(_0x217fca[0x0]['language']=='Arabic\x20(ae)')var _0x3f90ce=users[_0x5a646d(0x1d4)];}}}}}}}_0x239d12[_0x5a646d(0x1cf)]('collection_xt',{'success':_0x4d171c[_0x5a646d(0x1d7)]('success'),'errors':_0x4d171c[_0x5a646d(0x1d7)](_0x5a646d(0x1ac)),'master_shop':_0x217fca,'profile':_0x3fb29c,'role':_0x9de7ee,'language':_0x3f90ce,'sales_mine':_0x1b63f0,'staff_arr':_0x47df16});}catch(_0x4174c2){console['log'](_0x4174c2);}}),router[a0_0x43f227(0x1c3)](a0_0x43f227(0x1af),auth,async(_0x67f5e1,_0x2a78b5)=>{var _0x5488cf=a0_0x43f227;try{const _0x1bad18=await master_shop[_0x5488cf(0x1c1)](),_0x151352=_0x67f5e1['user'],_0x39a00f=await profile[_0x5488cf(0x1bf)]({'email':_0x151352[_0x5488cf(0x1d8)]}),_0x57518c=await staff['findOne']({'email':_0x151352[_0x5488cf(0x1d8)]}),_0x5b16be=await customer[_0x5488cf(0x1c1)]({'agent_id':_0x57518c[_0x5488cf(0x1aa)]}),_0xfe5909=_0x67f5e1[_0x5488cf(0x1a9)]['id'],_0x3c6c5b=await sales_sa[_0x5488cf(0x1ae)](_0xfe5909);if(_0x1bad18[0x0][_0x5488cf(0x1c6)]==_0x5488cf(0x197))var _0xc752e=users[_0x5488cf(0x1ab)];else{if(_0x1bad18[0x0][_0x5488cf(0x1c6)]==_0x5488cf(0x1b1))var _0xc752e=users[_0x5488cf(0x1b1)];else{if(_0x1bad18[0x0][_0x5488cf(0x1c6)]==_0x5488cf(0x185))var _0xc752e=users[_0x5488cf(0x185)];else{if(_0x1bad18[0x0][_0x5488cf(0x1c6)]==_0x5488cf(0x1b8))var _0xc752e=users['Spanish'];else{if(_0x1bad18[0x0][_0x5488cf(0x1c6)]=='French')var _0xc752e=users[_0x5488cf(0x1a2)];else{if(_0x1bad18[0x0]['language']==_0x5488cf(0x1a8))var _0xc752e=users['Portuguese'];else{if(_0x1bad18[0x0]['language']==_0x5488cf(0x1bc))var _0xc752e=users[_0x5488cf(0x1bc)];else{if(_0x1bad18[0x0][_0x5488cf(0x1c6)]=='Arabic\x20(ae)')var _0xc752e=users[_0x5488cf(0x1d4)];}}}}}}}_0x2a78b5[_0x5488cf(0x1cf)](_0x5488cf(0x1ba),{'success':_0x67f5e1['flash'](_0x5488cf(0x1d3)),'errors':_0x67f5e1[_0x5488cf(0x1d7)](_0x5488cf(0x1ac)),'master_shop':_0x1bad18,'profile':_0x39a00f,'role':_0x151352,'language':_0xc752e,'customer':_0x5b16be,'sales_sa':_0x3c6c5b,'staff_arr':_0x57518c});}catch(_0xd184b1){console['log'](_0xd184b1);}}),router[a0_0x43f227(0x1c5)](a0_0x43f227(0x1af),auth,async(_0x211a60,_0x543ba8)=>{var _0x449087=a0_0x43f227;try{const _0x4429b5=_0x211a60[_0x449087(0x1a9)]['id'],_0x3d49c3=await sales_sa['findById'](_0x4429b5),{collection:_0x1a50c0,invoicemoney:_0x47a322,collectionnumber:_0x125622,typeofpayment:_0x4b0ec6,cashdate:_0x4e12cd,id_detl:_0x5094bd}=_0x211a60[_0x449087(0x1ce)];if(typeof _0x5094bd==_0x449087(0x18c))var _0x432247=[_0x211a60[_0x449087(0x1ce)]['id_detl']],_0x4c7ca9=[_0x211a60[_0x449087(0x1ce)]['ewt']],_0x4dca10=[_0x211a60['body'][_0x449087(0x1c2)]],_0x33174e=[_0x211a60[_0x449087(0x1ce)][_0x449087(0x19f)]],_0x34ee81=[_0x211a60[_0x449087(0x1ce)][_0x449087(0x188)]],_0x1764ad=[_0x211a60[_0x449087(0x1ce)][_0x449087(0x1d2)]],_0xae6224=[_0x211a60[_0x449087(0x1ce)][_0x449087(0x1a7)]];else var _0x432247=[..._0x211a60[_0x449087(0x1ce)][_0x449087(0x18d)]],_0x4c7ca9=[..._0x211a60[_0x449087(0x1ce)]['ewt']],_0x4dca10=[..._0x211a60[_0x449087(0x1ce)][_0x449087(0x1c2)]],_0x33174e=[..._0x211a60[_0x449087(0x1ce)][_0x449087(0x19f)]],_0x34ee81=[..._0x211a60[_0x449087(0x1ce)][_0x449087(0x188)]],_0x1764ad=[..._0x211a60['body'][_0x449087(0x1d2)]],_0xae6224=[..._0x211a60[_0x449087(0x1ce)][_0x449087(0x1a7)]];const _0x484346=_0x432247['map'](_0x5b6998=>{return _0x5b6998={'id_detl':_0x5b6998};});_0x4c7ca9[_0x449087(0x1c4)]((_0x2025cb,_0x25fc66)=>{var _0x466a29=_0x449087;_0x484346[_0x25fc66][_0x466a29(0x19c)]=_0x2025cb;}),_0x4dca10[_0x449087(0x1c4)]((_0x49c87f,_0xd560de)=>{var _0x22ee61=_0x449087;_0x484346[_0xd560de][_0x22ee61(0x1c2)]=_0x49c87f;}),_0x33174e[_0x449087(0x1c4)]((_0x5d59ea,_0x19f6da)=>{var _0x31552e=_0x449087;_0x484346[_0x19f6da][_0x31552e(0x19f)]=_0x5d59ea;}),_0x34ee81[_0x449087(0x1c4)]((_0x2e147f,_0x3c0491)=>{var _0x26987e=_0x449087;_0x484346[_0x3c0491][_0x26987e(0x188)]=_0x2e147f;}),_0x1764ad[_0x449087(0x1c4)]((_0x2c36d2,_0x3dff2a)=>{_0x484346[_0x3dff2a]['bo_disc']=_0x2c36d2;}),_0xae6224['forEach']((_0x15a97f,_0x45c915)=>{var _0x38da81=_0x449087;_0x484346[_0x45c915][_0x38da81(0x1be)]=_0x15a97f;}),_0x3d49c3[_0x449087(0x1b0)]=_0x1a50c0,_0x3d49c3[_0x449087(0x1c8)]=_0x125622,_0x3d49c3[_0x449087(0x1c7)]=_0x4b0ec6,_0x3d49c3[_0x449087(0x187)]=_0x4e12cd,_0x3d49c3[_0x449087(0x1b9)]=_0x449087(0x1a3),_0x3d49c3['typeofprocess']='1';const _0x55af7b=await _0x3d49c3[_0x449087(0x1ca)]();if(_0x55af7b[_0x449087(0x1b9)]==_0x449087(0x1a3))for(let _0x3728f1=0x0;_0x3728f1<=_0x484346[_0x449087(0x1a1)]-0x1;_0x3728f1++){const _0x44fc72=_0x484346[_0x3728f1],_0x4b58c1=mongoose[_0x449087(0x19b)]['ObjectId'];console['log'](_0x44fc72);const _0x1873e1=await sales_sa[_0x449087(0x190)]({'_id':_0x4b58c1(_0x4429b5[_0x449087(0x1cc)]()),'sale_product._id':_0x4b58c1(_0x44fc72[_0x449087(0x18d)][_0x449087(0x1cc)]())},{'$set':{'sale_product.$.ewt':_0x44fc72[_0x449087(0x19c)],'sale_product.$.spwp':_0x44fc72[_0x449087(0x1c2)],'sale_product.$.fin_disc':_0x44fc72[_0x449087(0x19f)],'sale_product.$.vol_deals':_0x44fc72[_0x449087(0x188)],'sale_product.$.bo_disc':_0x44fc72[_0x449087(0x1d2)],'sale_product.$.totalprice':parseFloat(_0x44fc72[_0x449087(0x1be)])}});}_0x211a60[_0x449087(0x1d7)](_0x449087(0x1d3),_0x449087(0x198)),_0x543ba8[_0x449087(0x19d)](_0x449087(0x189)+_0x4429b5);}catch(_0x386c5f){console[_0x449087(0x1bb)](_0x386c5f);}}),router['get'](a0_0x43f227(0x1d6),auth,async(_0x152d5e,_0x5f2585)=>{var _0x24bd55=a0_0x43f227;try{const _0x1154a5=await master_shop[_0x24bd55(0x1c1)](),_0x1328c3=_0x152d5e['user'],_0x142aaf=await profile[_0x24bd55(0x1bf)]({'email':_0x1328c3[_0x24bd55(0x1d8)]}),_0x2b9be7=await staff[_0x24bd55(0x1bf)]({'email':_0x1328c3['email'],'type_of_acc_cat':'1'});let _0x52e87d=[];_0x2b9be7!=null&&(_0x52e87d=await sales_order['find']({'sales_staff_id':_0x2b9be7['_id']}));if(_0x1154a5[0x0][_0x24bd55(0x1c6)]==_0x24bd55(0x197))var _0x48373f=users[_0x24bd55(0x1ab)];else{if(_0x1154a5[0x0]['language']=='Hindi')var _0x48373f=users[_0x24bd55(0x1b1)];else{if(_0x1154a5[0x0][_0x24bd55(0x1c6)]==_0x24bd55(0x185))var _0x48373f=users[_0x24bd55(0x185)];else{if(_0x1154a5[0x0][_0x24bd55(0x1c6)]=='Spanish')var _0x48373f=users[_0x24bd55(0x1b8)];else{if(_0x1154a5[0x0][_0x24bd55(0x1c6)]==_0x24bd55(0x1a2))var _0x48373f=users['French'];else{if(_0x1154a5[0x0][_0x24bd55(0x1c6)]==_0x24bd55(0x1a8))var _0x48373f=users[_0x24bd55(0x1c0)];else{if(_0x1154a5[0x0][_0x24bd55(0x1c6)]=='Chinese')var _0x48373f=users['Chinese'];else{if(_0x1154a5[0x0]['language']==_0x24bd55(0x1d0))var _0x48373f=users[_0x24bd55(0x1d4)];}}}}}}}_0x5f2585[_0x24bd55(0x1cf)](_0x24bd55(0x1b3),{'success':_0x152d5e[_0x24bd55(0x1d7)](_0x24bd55(0x1d3)),'errors':_0x152d5e[_0x24bd55(0x1d7)](_0x24bd55(0x1ac)),'master_shop':_0x1154a5,'profile':_0x142aaf,'role':_0x1328c3,'language':_0x48373f,'sales_mine':_0x52e87d,'staff_arr':_0x2b9be7});}catch(_0x1ba16b){console['log'](_0x1ba16b);}}),router[a0_0x43f227(0x1c3)](a0_0x43f227(0x18e),auth,async(_0x595dc6,_0x4f03ce)=>{var _0xa5706a=a0_0x43f227;try{const _0x172f4a=await master_shop[_0xa5706a(0x1c1)](),_0x33c86f=_0x595dc6[_0xa5706a(0x195)],_0x2deb5e=await profile['findOne']({'email':_0x33c86f['email']}),_0x2d6469=await staff[_0xa5706a(0x1bf)]({'email':_0x33c86f[_0xa5706a(0x1d8)]}),_0x1befeb=await customer['find']({'agent_id':_0x2d6469[_0xa5706a(0x1aa)]}),_0x53f873=_0x595dc6[_0xa5706a(0x1a9)]['id'],_0x49c9d1=await sales_order['findById'](_0x53f873);if(_0x172f4a[0x0][_0xa5706a(0x1c6)]==_0xa5706a(0x197))var _0x549d64=users['English'];else{if(_0x172f4a[0x0][_0xa5706a(0x1c6)]=='Hindi')var _0x549d64=users[_0xa5706a(0x1b1)];else{if(_0x172f4a[0x0]['language']==_0xa5706a(0x185))var _0x549d64=users['German'];else{if(_0x172f4a[0x0][_0xa5706a(0x1c6)]==_0xa5706a(0x1b8))var _0x549d64=users[_0xa5706a(0x1b8)];else{if(_0x172f4a[0x0][_0xa5706a(0x1c6)]==_0xa5706a(0x1a2))var _0x549d64=users['French'];else{if(_0x172f4a[0x0][_0xa5706a(0x1c6)]==_0xa5706a(0x1a8))var _0x549d64=users['Portuguese'];else{if(_0x172f4a[0x0][_0xa5706a(0x1c6)]=='Chinese')var _0x549d64=users['Chinese'];else{if(_0x172f4a[0x0][_0xa5706a(0x1c6)]==_0xa5706a(0x1d0))var _0x549d64=users[_0xa5706a(0x1d4)];}}}}}}}_0x4f03ce[_0xa5706a(0x1cf)]('view_collections_so_xt',{'success':_0x595dc6[_0xa5706a(0x1d7)](_0xa5706a(0x1d3)),'errors':_0x595dc6[_0xa5706a(0x1d7)](_0xa5706a(0x1ac)),'master_shop':_0x172f4a,'profile':_0x2deb5e,'role':_0x33c86f,'language':_0x549d64,'customer':_0x1befeb,'sales_sa':_0x49c9d1,'staff_arr':_0x2d6469});}catch(_0x31b319){console[_0xa5706a(0x1bb)](_0x31b319);}}),router[a0_0x43f227(0x1c5)](a0_0x43f227(0x18e),auth,async(_0x38ef1f,_0x1557c5)=>{var _0x2f7779=a0_0x43f227;try{const _0x18199c=_0x38ef1f[_0x2f7779(0x1a9)]['id'],_0x46d50d=await sales_order[_0x2f7779(0x1ae)](_0x18199c),{collection:_0x525b91,invoicemoney:_0x1be621,collectionnumber:_0x57fb2f,typeofpayment:_0x4faa77,cashdate:_0x45f43d,id_detl:_0x14dc1c}=_0x38ef1f[_0x2f7779(0x1ce)];_0x46d50d[_0x2f7779(0x1b0)]=_0x525b91,_0x46d50d[_0x2f7779(0x1c7)]=_0x4faa77,_0x46d50d[_0x2f7779(0x187)]=_0x45f43d,_0x46d50d['paid']=_0x2f7779(0x1a3),_0x46d50d[_0x2f7779(0x196)]='1';const _0x2ea07f=await _0x46d50d[_0x2f7779(0x1ca)]();_0x38ef1f[_0x2f7779(0x1d7)](_0x2f7779(0x1d3),_0x2f7779(0x198)),_0x1557c5['redirect'](_0x2f7779(0x1a6)+_0x18199c);}catch(_0x27c762){console['log'](_0x27c762);}}),module['exports']=router;function a0_0x5dd2(){var _0x5abf9a=['/view_x','/x_so','string','id_detl','/view_so_xt/:id','1717206raGRzi','updateOne','exceljs','../public/language/languages.json','/view_sox/:id','Router','user','typeofprocess','English\x20(US)','Collection\x20Update\x20successfully','view_collections_sox','xlsx','Types','ewt','redirect','6482142YUaBfO','fin_disc','642104HxjFYK','length','French','True','/view/:id','collection_sox','/collection/view_so_xt/','totalNewPrice','Portuguese\x20(BR)','params','_id','English','errors','ObjectId','findById','/view_xt/:id','collection_price','Hindi','13041QImUwQ','collection_so_xt','3762vBBbaA','5BoKxOw','map','895979JnwcOf','Spanish','paid','view_collections_xt','log','Chinese','../middleware/auth','totalcollection','findOne','Portuguese','find','spwp','get','forEach','post','language','type_of_payment','collectionnumber','849822UhgCxc','save','/view','valueOf','json','body','render','Arabic\x20(ae)','view_collections','bo_disc','success','Arabic','3108412vbPPIJ','/so_x','flash','email','German','collection','cash_date','vol_deals','/collection/view/'];a0_0x5dd2=function(){return _0x5abf9a;};return a0_0x5dd2();}