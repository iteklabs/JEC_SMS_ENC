var a0_0x243bd1=a0_0x2f07;(function(_0x38dc55,_0x2ddcb2){var _0x5a66a7=a0_0x2f07,_0x1a54af=_0x38dc55();while(!![]){try{var _0x258ff0=parseInt(_0x5a66a7(0x20e))/0x1*(parseInt(_0x5a66a7(0x202))/0x2)+parseInt(_0x5a66a7(0x228))/0x3*(parseInt(_0x5a66a7(0x22e))/0x4)+-parseInt(_0x5a66a7(0x1f7))/0x5+parseInt(_0x5a66a7(0x223))/0x6+-parseInt(_0x5a66a7(0x1e2))/0x7*(parseInt(_0x5a66a7(0x1f3))/0x8)+-parseInt(_0x5a66a7(0x213))/0x9+-parseInt(_0x5a66a7(0x1da))/0xa*(parseInt(_0x5a66a7(0x222))/0xb);if(_0x258ff0===_0x2ddcb2)break;else _0x1a54af['push'](_0x1a54af['shift']());}catch(_0x38a521){_0x1a54af['push'](_0x1a54af['shift']());}}}(a0_0x28b2,0xdf857));function a0_0x2f07(_0x3fe5d1,_0x1e926e){var _0x28b227=a0_0x28b2();return a0_0x2f07=function(_0x2f0724,_0x31baca){_0x2f0724=_0x2f0724-0x1da;var _0x47794a=_0x28b227[_0x2f0724];return _0x47794a;},a0_0x2f07(_0x3fe5d1,_0x1e926e);}function a0_0x28b2(){var _0x49c1b1=['typeofprocess','4665477rAwWZk','Portuguese','paid','ObjectId','post','fin_disc','4FYSQfD','type_of_payment','../middleware/auth','string','10CtRYSu','valueOf','totalNewPrice','/view','findOne','True','/view_sox/:id','/collection/view_so_xt/','2751iOEaNm','vol_deals','body','save','Spanish','English','Types','Arabic\x20(ae)','id_detl','Collection\x20Update\x20successfully','/collection/view/','/view/:id','length','ewt','French','flash','log','24872NsiEEM','totalcollection','redirect','bo_disc','3357970CZrNjw','updateOne','json','express','collection_xt','errors','/view_xt/:id','Hindi','exports','spwp','success','2nbBXjs','/view_x','collectionnumber','/x_so','view_collections_so_xt','/view_so_xt/:id','map','English\x20(US)','/so_x','Portuguese\x20(BR)','_id','German','992663koqCyD','cash_date','view_collections_sox','../models/all_models','Arabic','6117264MRqPga','forEach','get','multer','Chinese','xlsx','render','collection','exceljs','language','find','mongoose','collection_sox','findById','email','1922569nvLexH','6693762XwudMQ','params','collection_price','user'];a0_0x28b2=function(){return _0x49c1b1;};return a0_0x28b2();}const express=require(a0_0x243bd1(0x1fa)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x243bd1(0x211)),auth=require(a0_0x243bd1(0x230)),users=require('../public/language/languages.json'),excelJS=require(a0_0x243bd1(0x21b)),xlsx=require(a0_0x243bd1(0x218)),multer=require(a0_0x243bd1(0x216)),mongoose=require(a0_0x243bd1(0x21e));router[a0_0x243bd1(0x215)](a0_0x243bd1(0x1dd),auth,async(_0x542702,_0xbbb36f)=>{var _0x5ccb4c=a0_0x243bd1;try{const _0x38d6c5=await master_shop[_0x5ccb4c(0x21d)](),_0x218571=_0x542702[_0x5ccb4c(0x226)],_0x4e5eb3=await profile[_0x5ccb4c(0x1de)]({'email':_0x218571[_0x5ccb4c(0x221)]}),_0x55745f=await staff[_0x5ccb4c(0x1de)]({'email':_0x218571[_0x5ccb4c(0x221)],'type_of_acc_cat':'2'});let _0x5b7a85=[];_0x55745f!=null&&(_0x5b7a85=await sales_order['find']({'sales_staff_id':_0x55745f[_0x5ccb4c(0x20c)]}));if(_0x38d6c5[0x0][_0x5ccb4c(0x21c)]=='English\x20(US)')var _0x1e8c1f=users[_0x5ccb4c(0x1e7)];else{if(_0x38d6c5[0x0][_0x5ccb4c(0x21c)]==_0x5ccb4c(0x1fe))var _0x1e8c1f=users[_0x5ccb4c(0x1fe)];else{if(_0x38d6c5[0x0][_0x5ccb4c(0x21c)]==_0x5ccb4c(0x20d))var _0x1e8c1f=users['German'];else{if(_0x38d6c5[0x0][_0x5ccb4c(0x21c)]=='Spanish')var _0x1e8c1f=users['Spanish'];else{if(_0x38d6c5[0x0][_0x5ccb4c(0x21c)]=='French')var _0x1e8c1f=users[_0x5ccb4c(0x1f0)];else{if(_0x38d6c5[0x0][_0x5ccb4c(0x21c)]==_0x5ccb4c(0x20b))var _0x1e8c1f=users[_0x5ccb4c(0x229)];else{if(_0x38d6c5[0x0][_0x5ccb4c(0x21c)]=='Chinese')var _0x1e8c1f=users[_0x5ccb4c(0x217)];else{if(_0x38d6c5[0x0]['language']=='Arabic\x20(ae)')var _0x1e8c1f=users['Arabic'];}}}}}}}_0xbbb36f[_0x5ccb4c(0x219)](_0x5ccb4c(0x21a),{'success':_0x542702[_0x5ccb4c(0x1f1)](_0x5ccb4c(0x201)),'errors':_0x542702[_0x5ccb4c(0x1f1)]('errors'),'master_shop':_0x38d6c5,'profile':_0x4e5eb3,'role':_0x218571,'language':_0x1e8c1f,'sales_mine':_0x5b7a85,'staff_arr':_0x55745f});}catch(_0x2e6bd8){console[_0x5ccb4c(0x1f2)](_0x2e6bd8);}}),router['get'](a0_0x243bd1(0x1ed),auth,async(_0x287849,_0x4304c5)=>{var _0x313f02=a0_0x243bd1;try{const _0x175b03=await master_shop['find'](),_0x434e17=_0x287849[_0x313f02(0x226)],_0x123470=await profile[_0x313f02(0x1de)]({'email':_0x434e17['email']}),_0x22991f=await staff[_0x313f02(0x1de)]({'email':_0x434e17[_0x313f02(0x221)]}),_0x5e88b8=await customer[_0x313f02(0x21d)]({'agent_id':_0x22991f[_0x313f02(0x20c)]}),_0x42176c=_0x287849['params']['id'],_0x51cf90=await sales_sa[_0x313f02(0x220)](_0x42176c);if(_0x175b03[0x0][_0x313f02(0x21c)]=='English\x20(US)')var _0x3dcc37=users['English'];else{if(_0x175b03[0x0][_0x313f02(0x21c)]==_0x313f02(0x1fe))var _0x3dcc37=users[_0x313f02(0x1fe)];else{if(_0x175b03[0x0]['language']=='German')var _0x3dcc37=users['German'];else{if(_0x175b03[0x0][_0x313f02(0x21c)]=='Spanish')var _0x3dcc37=users['Spanish'];else{if(_0x175b03[0x0][_0x313f02(0x21c)]==_0x313f02(0x1f0))var _0x3dcc37=users['French'];else{if(_0x175b03[0x0][_0x313f02(0x21c)]==_0x313f02(0x20b))var _0x3dcc37=users['Portuguese'];else{if(_0x175b03[0x0][_0x313f02(0x21c)]==_0x313f02(0x217))var _0x3dcc37=users[_0x313f02(0x217)];else{if(_0x175b03[0x0][_0x313f02(0x21c)]=='Arabic\x20(ae)')var _0x3dcc37=users['Arabic'];}}}}}}}_0x4304c5[_0x313f02(0x219)]('view_collections',{'success':_0x287849[_0x313f02(0x1f1)]('success'),'errors':_0x287849[_0x313f02(0x1f1)](_0x313f02(0x1fc)),'master_shop':_0x175b03,'profile':_0x123470,'role':_0x434e17,'language':_0x3dcc37,'customer':_0x5e88b8,'sales_sa':_0x51cf90,'staff_arr':_0x22991f});}catch(_0x46a629){console[_0x313f02(0x1f2)](_0x46a629);}}),router['post'](a0_0x243bd1(0x1ed),auth,async(_0x360214,_0x2be84f)=>{var _0x1520ea=a0_0x243bd1;try{const _0x46e788=_0x360214[_0x1520ea(0x224)]['id'],_0x46c0e3=await sales_sa['findById'](_0x46e788),{collection:_0x52446f,invoicemoney:_0x5b78c9,collectionnumber:_0x3f57cb,typeofpayment:_0x5cd15f,cashdate:_0x3d2259,id_detl:_0x57db29}=_0x360214[_0x1520ea(0x1e4)];_0x2be84f[_0x1520ea(0x1f9)](_0x46c0e3);return;if(typeof _0x57db29==_0x1520ea(0x231))var _0x5c2b4d=[_0x360214[_0x1520ea(0x1e4)][_0x1520ea(0x1ea)]],_0x862c9c=[_0x360214[_0x1520ea(0x1e4)][_0x1520ea(0x1ef)]],_0x571012=[_0x360214[_0x1520ea(0x1e4)][_0x1520ea(0x200)]],_0x5c0604=[_0x360214[_0x1520ea(0x1e4)]['fin_disc']],_0x1cfb3f=[_0x360214[_0x1520ea(0x1e4)][_0x1520ea(0x1e3)]],_0x543720=[_0x360214[_0x1520ea(0x1e4)][_0x1520ea(0x1f6)]],_0x33cb52=[_0x360214['body'][_0x1520ea(0x1dc)]];else var _0x5c2b4d=[..._0x360214[_0x1520ea(0x1e4)][_0x1520ea(0x1ea)]],_0x862c9c=[..._0x360214['body']['ewt']],_0x571012=[..._0x360214[_0x1520ea(0x1e4)][_0x1520ea(0x200)]],_0x5c0604=[..._0x360214[_0x1520ea(0x1e4)][_0x1520ea(0x22d)]],_0x1cfb3f=[..._0x360214[_0x1520ea(0x1e4)]['vol_deals']],_0x543720=[..._0x360214[_0x1520ea(0x1e4)][_0x1520ea(0x1f6)]],_0x33cb52=[..._0x360214['body'][_0x1520ea(0x1dc)]];const _0x49d8e2=_0x5c2b4d[_0x1520ea(0x208)](_0x57a775=>{return _0x57a775={'id_detl':_0x57a775};});_0x862c9c[_0x1520ea(0x214)]((_0x47b83f,_0x3cc692)=>{var _0xe418e7=_0x1520ea;_0x49d8e2[_0x3cc692][_0xe418e7(0x1ef)]=_0x47b83f;}),_0x571012[_0x1520ea(0x214)]((_0x340564,_0x53f145)=>{var _0x5f3acd=_0x1520ea;_0x49d8e2[_0x53f145][_0x5f3acd(0x200)]=_0x340564;}),_0x5c0604[_0x1520ea(0x214)]((_0x38906e,_0xad3ede)=>{var _0x3d3e75=_0x1520ea;_0x49d8e2[_0xad3ede][_0x3d3e75(0x22d)]=_0x38906e;}),_0x1cfb3f['forEach']((_0x5b7eff,_0x54e8d1)=>{var _0x37ccbb=_0x1520ea;_0x49d8e2[_0x54e8d1][_0x37ccbb(0x1e3)]=_0x5b7eff;}),_0x543720[_0x1520ea(0x214)]((_0x8110a0,_0x3fd1b9)=>{var _0x5f96ac=_0x1520ea;_0x49d8e2[_0x3fd1b9][_0x5f96ac(0x1f6)]=_0x8110a0;}),_0x33cb52['forEach']((_0x5eb7f7,_0x4dc66d)=>{var _0x437320=_0x1520ea;_0x49d8e2[_0x4dc66d][_0x437320(0x1f4)]=_0x5eb7f7;}),_0x46c0e3['collection_price']=_0x52446f,_0x46c0e3[_0x1520ea(0x204)]=_0x3f57cb,_0x46c0e3['type_of_payment']=_0x5cd15f,_0x46c0e3[_0x1520ea(0x20f)]=_0x3d2259,_0x46c0e3[_0x1520ea(0x22a)]='True';const _0x3bd332=await _0x46c0e3[_0x1520ea(0x1e5)]();if(_0x3bd332[_0x1520ea(0x22a)]==_0x1520ea(0x1df))for(let _0x12bef8=0x0;_0x12bef8<=_0x49d8e2[_0x1520ea(0x1ee)]-0x1;_0x12bef8++){const _0x1b4bae=_0x49d8e2[_0x12bef8],_0x3fc7f7=mongoose[_0x1520ea(0x1e8)][_0x1520ea(0x22b)];console[_0x1520ea(0x1f2)](_0x1b4bae);const _0x1fe85f=await sales_sa[_0x1520ea(0x1f8)]({'_id':_0x3fc7f7(_0x46e788[_0x1520ea(0x1db)]()),'sale_product._id':_0x3fc7f7(_0x1b4bae[_0x1520ea(0x1ea)]['valueOf']())},{'$set':{'sale_product.$.ewt':_0x1b4bae[_0x1520ea(0x1ef)],'sale_product.$.spwp':_0x1b4bae[_0x1520ea(0x200)],'sale_product.$.fin_disc':_0x1b4bae[_0x1520ea(0x22d)],'sale_product.$.vol_deals':_0x1b4bae[_0x1520ea(0x1e3)],'sale_product.$.bo_disc':_0x1b4bae['bo_disc'],'sale_product.$.totalprice':parseFloat(_0x1b4bae[_0x1520ea(0x1f4)])}});}_0x360214[_0x1520ea(0x1f1)](_0x1520ea(0x201),_0x1520ea(0x1eb)),_0x2be84f['redirect'](_0x1520ea(0x1ec)+_0x46e788);}catch(_0x3700c4){console[_0x1520ea(0x1f2)](_0x3700c4);}}),router['get'](a0_0x243bd1(0x205),auth,async(_0xd42e6e,_0xf90d3d)=>{var _0x53be33=a0_0x243bd1;try{const _0x356ae1=await master_shop[_0x53be33(0x21d)](),_0x974074=_0xd42e6e[_0x53be33(0x226)],_0x4fff28=await profile[_0x53be33(0x1de)]({'email':_0x974074[_0x53be33(0x221)]}),_0x5708bc=await staff[_0x53be33(0x1de)]({'email':_0x974074['email'],'type_of_acc_cat':'2'});let _0x2a0816=[];_0x5708bc!=null&&(_0x2a0816=await sales_order[_0x53be33(0x21d)]({'sales_staff_id':_0x5708bc[_0x53be33(0x20c)]}));console[_0x53be33(0x1f2)](_0x2a0816);if(_0x356ae1[0x0][_0x53be33(0x21c)]==_0x53be33(0x209))var _0x34f652=users[_0x53be33(0x1e7)];else{if(_0x356ae1[0x0]['language']==_0x53be33(0x1fe))var _0x34f652=users[_0x53be33(0x1fe)];else{if(_0x356ae1[0x0][_0x53be33(0x21c)]=='German')var _0x34f652=users[_0x53be33(0x20d)];else{if(_0x356ae1[0x0]['language']==_0x53be33(0x1e6))var _0x34f652=users['Spanish'];else{if(_0x356ae1[0x0][_0x53be33(0x21c)]==_0x53be33(0x1f0))var _0x34f652=users['French'];else{if(_0x356ae1[0x0][_0x53be33(0x21c)]=='Portuguese\x20(BR)')var _0x34f652=users[_0x53be33(0x229)];else{if(_0x356ae1[0x0][_0x53be33(0x21c)]==_0x53be33(0x217))var _0x34f652=users[_0x53be33(0x217)];else{if(_0x356ae1[0x0]['language']=='Arabic\x20(ae)')var _0x34f652=users['Arabic'];}}}}}}}_0xf90d3d['render'](_0x53be33(0x21f),{'success':_0xd42e6e['flash'](_0x53be33(0x201)),'errors':_0xd42e6e[_0x53be33(0x1f1)]('errors'),'master_shop':_0x356ae1,'profile':_0x4fff28,'role':_0x974074,'language':_0x34f652,'sales_mine':_0x2a0816,'staff_arr':_0x5708bc});}catch(_0x5a67ba){console[_0x53be33(0x1f2)](_0x5a67ba);}}),router[a0_0x243bd1(0x215)](a0_0x243bd1(0x1e0),auth,async(_0x7997e,_0x2a3d85)=>{var _0x4381b6=a0_0x243bd1;try{const _0x43966c=await master_shop[_0x4381b6(0x21d)](),_0x8640dc=_0x7997e['user'],_0x388934=await profile['findOne']({'email':_0x8640dc['email']}),_0x1eb440=await staff[_0x4381b6(0x1de)]({'email':_0x8640dc[_0x4381b6(0x221)]}),_0x523e62=await customer[_0x4381b6(0x21d)]({'agent_id':_0x1eb440['_id']}),_0x47d306=_0x7997e['params']['id'],_0xe6c0df=await sales_order[_0x4381b6(0x220)](_0x47d306);if(_0x43966c[0x0]['language']==_0x4381b6(0x209))var _0x326735=users[_0x4381b6(0x1e7)];else{if(_0x43966c[0x0][_0x4381b6(0x21c)]==_0x4381b6(0x1fe))var _0x326735=users[_0x4381b6(0x1fe)];else{if(_0x43966c[0x0][_0x4381b6(0x21c)]==_0x4381b6(0x20d))var _0x326735=users[_0x4381b6(0x20d)];else{if(_0x43966c[0x0][_0x4381b6(0x21c)]==_0x4381b6(0x1e6))var _0x326735=users[_0x4381b6(0x1e6)];else{if(_0x43966c[0x0]['language']==_0x4381b6(0x1f0))var _0x326735=users[_0x4381b6(0x1f0)];else{if(_0x43966c[0x0][_0x4381b6(0x21c)]==_0x4381b6(0x20b))var _0x326735=users['Portuguese'];else{if(_0x43966c[0x0][_0x4381b6(0x21c)]==_0x4381b6(0x217))var _0x326735=users[_0x4381b6(0x217)];else{if(_0x43966c[0x0][_0x4381b6(0x21c)]==_0x4381b6(0x1e9))var _0x326735=users[_0x4381b6(0x212)];}}}}}}}_0x2a3d85[_0x4381b6(0x219)](_0x4381b6(0x210),{'success':_0x7997e[_0x4381b6(0x1f1)]('success'),'errors':_0x7997e[_0x4381b6(0x1f1)](_0x4381b6(0x1fc)),'master_shop':_0x43966c,'profile':_0x388934,'role':_0x8640dc,'language':_0x326735,'customer':_0x523e62,'sales_sa':_0xe6c0df});}catch(_0x13a071){console['log'](_0x13a071);}}),router[a0_0x243bd1(0x215)](a0_0x243bd1(0x203),auth,async(_0x11a18c,_0x2c08ec)=>{var _0x41a058=a0_0x243bd1;try{const _0x5771cf=await master_shop[_0x41a058(0x21d)](),_0x4f6dfe=_0x11a18c[_0x41a058(0x226)],_0x48bf3c=await profile[_0x41a058(0x1de)]({'email':_0x4f6dfe['email']}),_0x30edbe=await staff[_0x41a058(0x1de)]({'email':_0x4f6dfe[_0x41a058(0x221)],'type_of_acc_cat':'1'});let _0x38e5ac=[];_0x30edbe!=null&&(_0x38e5ac=await sales_sa['find']({'sales_staff_id':_0x30edbe[_0x41a058(0x20c)]}));if(_0x5771cf[0x0][_0x41a058(0x21c)]==_0x41a058(0x209))var _0x4d25ad=users[_0x41a058(0x1e7)];else{if(_0x5771cf[0x0]['language']==_0x41a058(0x1fe))var _0x4d25ad=users[_0x41a058(0x1fe)];else{if(_0x5771cf[0x0][_0x41a058(0x21c)]==_0x41a058(0x20d))var _0x4d25ad=users['German'];else{if(_0x5771cf[0x0][_0x41a058(0x21c)]==_0x41a058(0x1e6))var _0x4d25ad=users[_0x41a058(0x1e6)];else{if(_0x5771cf[0x0]['language']==_0x41a058(0x1f0))var _0x4d25ad=users[_0x41a058(0x1f0)];else{if(_0x5771cf[0x0][_0x41a058(0x21c)]==_0x41a058(0x20b))var _0x4d25ad=users[_0x41a058(0x229)];else{if(_0x5771cf[0x0]['language']==_0x41a058(0x217))var _0x4d25ad=users[_0x41a058(0x217)];else{if(_0x5771cf[0x0][_0x41a058(0x21c)]==_0x41a058(0x1e9))var _0x4d25ad=users['Arabic'];}}}}}}}_0x2c08ec['render'](_0x41a058(0x1fb),{'success':_0x11a18c[_0x41a058(0x1f1)](_0x41a058(0x201)),'errors':_0x11a18c[_0x41a058(0x1f1)](_0x41a058(0x1fc)),'master_shop':_0x5771cf,'profile':_0x48bf3c,'role':_0x4f6dfe,'language':_0x4d25ad,'sales_mine':_0x38e5ac,'staff_arr':_0x30edbe});}catch(_0xb1b5cc){console['log'](_0xb1b5cc);}}),router[a0_0x243bd1(0x215)]('/view_xt/:id',auth,async(_0x3e93f9,_0x2686cf)=>{var _0x4b3de4=a0_0x243bd1;try{const _0x1d1480=await master_shop[_0x4b3de4(0x21d)](),_0x178acf=_0x3e93f9[_0x4b3de4(0x226)],_0x1c7cfa=await profile[_0x4b3de4(0x1de)]({'email':_0x178acf[_0x4b3de4(0x221)]}),_0x462f10=await staff[_0x4b3de4(0x1de)]({'email':_0x178acf['email']}),_0x547cec=await customer[_0x4b3de4(0x21d)]({'agent_id':_0x462f10[_0x4b3de4(0x20c)]}),_0x18a2df=_0x3e93f9[_0x4b3de4(0x224)]['id'],_0xb6e9b7=await sales_sa[_0x4b3de4(0x220)](_0x18a2df);if(_0x1d1480[0x0][_0x4b3de4(0x21c)]==_0x4b3de4(0x209))var _0x12773c=users['English'];else{if(_0x1d1480[0x0][_0x4b3de4(0x21c)]==_0x4b3de4(0x1fe))var _0x12773c=users[_0x4b3de4(0x1fe)];else{if(_0x1d1480[0x0][_0x4b3de4(0x21c)]==_0x4b3de4(0x20d))var _0x12773c=users[_0x4b3de4(0x20d)];else{if(_0x1d1480[0x0][_0x4b3de4(0x21c)]=='Spanish')var _0x12773c=users['Spanish'];else{if(_0x1d1480[0x0][_0x4b3de4(0x21c)]==_0x4b3de4(0x1f0))var _0x12773c=users[_0x4b3de4(0x1f0)];else{if(_0x1d1480[0x0][_0x4b3de4(0x21c)]=='Portuguese\x20(BR)')var _0x12773c=users[_0x4b3de4(0x229)];else{if(_0x1d1480[0x0][_0x4b3de4(0x21c)]==_0x4b3de4(0x217))var _0x12773c=users[_0x4b3de4(0x217)];else{if(_0x1d1480[0x0][_0x4b3de4(0x21c)]==_0x4b3de4(0x1e9))var _0x12773c=users[_0x4b3de4(0x212)];}}}}}}}_0x2686cf[_0x4b3de4(0x219)]('view_collections_xt',{'success':_0x3e93f9['flash'](_0x4b3de4(0x201)),'errors':_0x3e93f9[_0x4b3de4(0x1f1)]('errors'),'master_shop':_0x1d1480,'profile':_0x1c7cfa,'role':_0x178acf,'language':_0x12773c,'customer':_0x547cec,'sales_sa':_0xb6e9b7,'staff_arr':_0x462f10});}catch(_0x28e1a2){console[_0x4b3de4(0x1f2)](_0x28e1a2);}}),router[a0_0x243bd1(0x22c)](a0_0x243bd1(0x1fd),auth,async(_0x2b8b80,_0x83dd27)=>{var _0x23b157=a0_0x243bd1;try{const _0x8d4175=_0x2b8b80['params']['id'],_0x547880=await sales_sa[_0x23b157(0x220)](_0x8d4175),{collection:_0x2b0a20,invoicemoney:_0x428741,collectionnumber:_0x485b4b,typeofpayment:_0x4f0b38,cashdate:_0x1fad40,id_detl:_0x49708a}=_0x2b8b80[_0x23b157(0x1e4)];if(typeof _0x49708a=='string')var _0xbbccf9=[_0x2b8b80[_0x23b157(0x1e4)][_0x23b157(0x1ea)]],_0x4e8b66=[_0x2b8b80[_0x23b157(0x1e4)]['ewt']],_0xe9a696=[_0x2b8b80[_0x23b157(0x1e4)][_0x23b157(0x200)]],_0x397cfe=[_0x2b8b80[_0x23b157(0x1e4)][_0x23b157(0x22d)]],_0x4eb023=[_0x2b8b80[_0x23b157(0x1e4)][_0x23b157(0x1e3)]],_0x1b387f=[_0x2b8b80[_0x23b157(0x1e4)][_0x23b157(0x1f6)]],_0x1063ce=[_0x2b8b80[_0x23b157(0x1e4)][_0x23b157(0x1dc)]];else var _0xbbccf9=[..._0x2b8b80[_0x23b157(0x1e4)][_0x23b157(0x1ea)]],_0x4e8b66=[..._0x2b8b80[_0x23b157(0x1e4)][_0x23b157(0x1ef)]],_0xe9a696=[..._0x2b8b80['body'][_0x23b157(0x200)]],_0x397cfe=[..._0x2b8b80[_0x23b157(0x1e4)][_0x23b157(0x22d)]],_0x4eb023=[..._0x2b8b80[_0x23b157(0x1e4)]['vol_deals']],_0x1b387f=[..._0x2b8b80[_0x23b157(0x1e4)][_0x23b157(0x1f6)]],_0x1063ce=[..._0x2b8b80[_0x23b157(0x1e4)][_0x23b157(0x1dc)]];const _0x2d5ba8=_0xbbccf9[_0x23b157(0x208)](_0x3eb1d5=>{return _0x3eb1d5={'id_detl':_0x3eb1d5};});_0x4e8b66[_0x23b157(0x214)]((_0x171163,_0x39a630)=>{var _0x2568a0=_0x23b157;_0x2d5ba8[_0x39a630][_0x2568a0(0x1ef)]=_0x171163;}),_0xe9a696[_0x23b157(0x214)]((_0xe08b75,_0x2a7932)=>{var _0x5ac67b=_0x23b157;_0x2d5ba8[_0x2a7932][_0x5ac67b(0x200)]=_0xe08b75;}),_0x397cfe[_0x23b157(0x214)]((_0x211527,_0x419d0c)=>{var _0x20fb9b=_0x23b157;_0x2d5ba8[_0x419d0c][_0x20fb9b(0x22d)]=_0x211527;}),_0x4eb023['forEach']((_0x2367b2,_0x51f082)=>{_0x2d5ba8[_0x51f082]['vol_deals']=_0x2367b2;}),_0x1b387f['forEach']((_0x36ef55,_0x284d20)=>{var _0x3ab3fe=_0x23b157;_0x2d5ba8[_0x284d20][_0x3ab3fe(0x1f6)]=_0x36ef55;}),_0x1063ce[_0x23b157(0x214)]((_0x4ff417,_0x34e2d6)=>{var _0x1d0e09=_0x23b157;_0x2d5ba8[_0x34e2d6][_0x1d0e09(0x1f4)]=_0x4ff417;}),_0x547880[_0x23b157(0x225)]=_0x2b0a20,_0x547880[_0x23b157(0x204)]=_0x485b4b,_0x547880['type_of_payment']=_0x4f0b38,_0x547880[_0x23b157(0x20f)]=_0x1fad40,_0x547880[_0x23b157(0x22a)]='True',_0x547880[_0x23b157(0x227)]='1';const _0x3df4ca=await _0x547880[_0x23b157(0x1e5)]();if(_0x3df4ca[_0x23b157(0x22a)]=='True')for(let _0x440231=0x0;_0x440231<=_0x2d5ba8[_0x23b157(0x1ee)]-0x1;_0x440231++){const _0x2a4e67=_0x2d5ba8[_0x440231],_0x291733=mongoose[_0x23b157(0x1e8)][_0x23b157(0x22b)];console[_0x23b157(0x1f2)](_0x2a4e67);const _0x1049a3=await sales_sa[_0x23b157(0x1f8)]({'_id':_0x291733(_0x8d4175[_0x23b157(0x1db)]()),'sale_product._id':_0x291733(_0x2a4e67[_0x23b157(0x1ea)]['valueOf']())},{'$set':{'sale_product.$.ewt':_0x2a4e67[_0x23b157(0x1ef)],'sale_product.$.spwp':_0x2a4e67[_0x23b157(0x200)],'sale_product.$.fin_disc':_0x2a4e67[_0x23b157(0x22d)],'sale_product.$.vol_deals':_0x2a4e67[_0x23b157(0x1e3)],'sale_product.$.bo_disc':_0x2a4e67[_0x23b157(0x1f6)],'sale_product.$.totalprice':parseFloat(_0x2a4e67['totalcollection'])}});}_0x2b8b80[_0x23b157(0x1f1)](_0x23b157(0x201),_0x23b157(0x1eb)),_0x83dd27[_0x23b157(0x1f5)](_0x23b157(0x1ec)+_0x8d4175);}catch(_0x18dd60){console[_0x23b157(0x1f2)](_0x18dd60);}}),router[a0_0x243bd1(0x215)](a0_0x243bd1(0x20a),auth,async(_0x3b9ddb,_0x47c535)=>{var _0x36f7f1=a0_0x243bd1;try{const _0x2daba3=await master_shop[_0x36f7f1(0x21d)](),_0x52623f=_0x3b9ddb['user'],_0x39adb0=await profile[_0x36f7f1(0x1de)]({'email':_0x52623f[_0x36f7f1(0x221)]}),_0x2ab87a=await staff[_0x36f7f1(0x1de)]({'email':_0x52623f[_0x36f7f1(0x221)],'type_of_acc_cat':'1'});let _0x5a01a2=[];_0x2ab87a!=null&&(_0x5a01a2=await sales_order[_0x36f7f1(0x21d)]({'sales_staff_id':_0x2ab87a[_0x36f7f1(0x20c)]}));if(_0x2daba3[0x0][_0x36f7f1(0x21c)]==_0x36f7f1(0x209))var _0x1849d5=users[_0x36f7f1(0x1e7)];else{if(_0x2daba3[0x0][_0x36f7f1(0x21c)]==_0x36f7f1(0x1fe))var _0x1849d5=users[_0x36f7f1(0x1fe)];else{if(_0x2daba3[0x0][_0x36f7f1(0x21c)]=='German')var _0x1849d5=users[_0x36f7f1(0x20d)];else{if(_0x2daba3[0x0][_0x36f7f1(0x21c)]==_0x36f7f1(0x1e6))var _0x1849d5=users[_0x36f7f1(0x1e6)];else{if(_0x2daba3[0x0]['language']=='French')var _0x1849d5=users[_0x36f7f1(0x1f0)];else{if(_0x2daba3[0x0][_0x36f7f1(0x21c)]==_0x36f7f1(0x20b))var _0x1849d5=users[_0x36f7f1(0x229)];else{if(_0x2daba3[0x0][_0x36f7f1(0x21c)]==_0x36f7f1(0x217))var _0x1849d5=users[_0x36f7f1(0x217)];else{if(_0x2daba3[0x0][_0x36f7f1(0x21c)]=='Arabic\x20(ae)')var _0x1849d5=users['Arabic'];}}}}}}}_0x47c535[_0x36f7f1(0x219)]('collection_so_xt',{'success':_0x3b9ddb[_0x36f7f1(0x1f1)]('success'),'errors':_0x3b9ddb[_0x36f7f1(0x1f1)](_0x36f7f1(0x1fc)),'master_shop':_0x2daba3,'profile':_0x39adb0,'role':_0x52623f,'language':_0x1849d5,'sales_mine':_0x5a01a2,'staff_arr':_0x2ab87a});}catch(_0x5db305){console[_0x36f7f1(0x1f2)](_0x5db305);}}),router[a0_0x243bd1(0x215)](a0_0x243bd1(0x207),auth,async(_0x2ed447,_0x5048a0)=>{var _0x54a0af=a0_0x243bd1;try{const _0x1b5c37=await master_shop[_0x54a0af(0x21d)](),_0x314c09=_0x2ed447[_0x54a0af(0x226)],_0x2a2bce=await profile[_0x54a0af(0x1de)]({'email':_0x314c09[_0x54a0af(0x221)]}),_0x3039aa=await staff['findOne']({'email':_0x314c09[_0x54a0af(0x221)]}),_0x23a58a=await customer['find']({'agent_id':_0x3039aa[_0x54a0af(0x20c)]}),_0x33a7f5=_0x2ed447['params']['id'],_0x4b0c70=await sales_order['findById'](_0x33a7f5);if(_0x1b5c37[0x0]['language']=='English\x20(US)')var _0x3c843b=users['English'];else{if(_0x1b5c37[0x0][_0x54a0af(0x21c)]==_0x54a0af(0x1fe))var _0x3c843b=users['Hindi'];else{if(_0x1b5c37[0x0]['language']=='German')var _0x3c843b=users[_0x54a0af(0x20d)];else{if(_0x1b5c37[0x0]['language']=='Spanish')var _0x3c843b=users[_0x54a0af(0x1e6)];else{if(_0x1b5c37[0x0][_0x54a0af(0x21c)]==_0x54a0af(0x1f0))var _0x3c843b=users[_0x54a0af(0x1f0)];else{if(_0x1b5c37[0x0][_0x54a0af(0x21c)]==_0x54a0af(0x20b))var _0x3c843b=users[_0x54a0af(0x229)];else{if(_0x1b5c37[0x0][_0x54a0af(0x21c)]=='Chinese')var _0x3c843b=users[_0x54a0af(0x217)];else{if(_0x1b5c37[0x0]['language']=='Arabic\x20(ae)')var _0x3c843b=users[_0x54a0af(0x212)];}}}}}}}_0x5048a0[_0x54a0af(0x219)](_0x54a0af(0x206),{'success':_0x2ed447[_0x54a0af(0x1f1)](_0x54a0af(0x201)),'errors':_0x2ed447[_0x54a0af(0x1f1)](_0x54a0af(0x1fc)),'master_shop':_0x1b5c37,'profile':_0x2a2bce,'role':_0x314c09,'language':_0x3c843b,'customer':_0x23a58a,'sales_sa':_0x4b0c70,'staff_arr':_0x3039aa});}catch(_0x2fe66c){console['log'](_0x2fe66c);}}),router[a0_0x243bd1(0x22c)]('/view_so_xt/:id',auth,async(_0x2d201a,_0x4d564d)=>{var _0x303bec=a0_0x243bd1;try{const _0x5b52a1=_0x2d201a[_0x303bec(0x224)]['id'],_0xdf7082=await sales_order[_0x303bec(0x220)](_0x5b52a1),{collection:_0x29a073,invoicemoney:_0x488136,collectionnumber:_0x680487,typeofpayment:_0x3be584,cashdate:_0x40567a,id_detl:_0x160107}=_0x2d201a[_0x303bec(0x1e4)];_0xdf7082['collection_price']=_0x29a073,_0xdf7082[_0x303bec(0x22f)]=_0x3be584,_0xdf7082[_0x303bec(0x20f)]=_0x40567a,_0xdf7082[_0x303bec(0x22a)]=_0x303bec(0x1df),_0xdf7082[_0x303bec(0x227)]='1';const _0x1c65f4=await _0xdf7082[_0x303bec(0x1e5)]();_0x2d201a[_0x303bec(0x1f1)](_0x303bec(0x201),_0x303bec(0x1eb)),_0x4d564d['redirect'](_0x303bec(0x1e1)+_0x5b52a1);}catch(_0x1fcc9f){console['log'](_0x1fcc9f);}}),module[a0_0x243bd1(0x1ff)]=router;