function a0_0x1850(){var _0x29d98f=['view_collections_xt','17391060uRknkK','1348929iUPLKe','/view_x','collection_so_xt','80Vstidv','length','/view_sox/:id','/view/:id','vol_deals','2LWNXkX','../middleware/auth','2771176LOaenw','English\x20(US)','collection_price','language','typeofprocess','Chinese','id_detl','Arabic','string','map','redirect','type_of_payment','totalNewPrice','post','spwp','totalcollection','98692Urkoze','xlsx','find','Portuguese\x20(BR)','params','updateOne','flash','148446zedfXi','Spanish','English','collection','fin_disc','view_collections_sox','valueOf','collectionnumber','save','_id','2430scgWJg','Router','body','user','cash_date','json','render','log','email','multer','paid','7jsTcCJ','view_collections_so_xt','Portuguese','/collection/view/','success','/view_so_xt/:id','../models/all_models','/view','Collection\x20Update\x20successfully','True','bo_disc','collection_xt','German','forEach','ObjectId','French','Types','ewt','findById','get','3300LtQxeu','Hindi','5833080nzbcvm','/x_so','Arabic\x20(ae)','errors','exceljs','express','60rvJfNL','exports','findOne','/view_xt/:id','collection_sox'];a0_0x1850=function(){return _0x29d98f;};return a0_0x1850();}var a0_0x24547c=a0_0x3d3c;(function(_0x43afcd,_0x13b48d){var _0x2d6809=a0_0x3d3c,_0x12e16d=_0x43afcd();while(!![]){try{var _0x20fcbe=-parseInt(_0x2d6809(0x10d))/0x1*(-parseInt(_0x2d6809(0x11f))/0x2)+parseInt(_0x2d6809(0x130))/0x3*(-parseInt(_0x2d6809(0x14f))/0x4)+parseInt(_0x2d6809(0x161))/0x5*(-parseInt(_0x2d6809(0x126))/0x6)+parseInt(_0x2d6809(0x13b))/0x7*(parseInt(_0x2d6809(0x10f))/0x8)+parseInt(_0x2d6809(0x15e))/0x9*(-parseInt(_0x2d6809(0x157))/0xa)+parseInt(_0x2d6809(0x151))/0xb+parseInt(_0x2d6809(0x15d))/0xc;if(_0x20fcbe===_0x13b48d)break;else _0x12e16d['push'](_0x12e16d['shift']());}catch(_0x153975){_0x12e16d['push'](_0x12e16d['shift']());}}}(a0_0x1850,0x709b0));const express=require(a0_0x24547c(0x156)),app=express(),router=express[a0_0x24547c(0x131)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x24547c(0x141)),auth=require(a0_0x24547c(0x10e)),users=require('../public/language/languages.json'),excelJS=require(a0_0x24547c(0x155)),xlsx=require(a0_0x24547c(0x120)),multer=require(a0_0x24547c(0x139)),mongoose=require('mongoose');function a0_0x3d3c(_0x42720e,_0xb35da2){var _0x1850aa=a0_0x1850();return a0_0x3d3c=function(_0x3d3c59,_0x531d64){_0x3d3c59=_0x3d3c59-0x10b;var _0x46c166=_0x1850aa[_0x3d3c59];return _0x46c166;},a0_0x3d3c(_0x42720e,_0xb35da2);}router[a0_0x24547c(0x14e)](a0_0x24547c(0x142),auth,async(_0x3f9d51,_0x148342)=>{var _0x5e2a1b=a0_0x24547c;try{const _0x3bfb96=await master_shop['find'](),_0x29dc42=_0x3f9d51[_0x5e2a1b(0x133)],_0x69bc5b=await profile[_0x5e2a1b(0x159)]({'email':_0x29dc42[_0x5e2a1b(0x138)]}),_0x2d7c2e=await staff[_0x5e2a1b(0x159)]({'email':_0x29dc42['email'],'type_of_acc_cat':'2'});let _0x21d582=[];_0x2d7c2e!=null&&(_0x21d582=await sales_order[_0x5e2a1b(0x121)]({'sales_staff_id':_0x2d7c2e[_0x5e2a1b(0x12f)]}));if(_0x3bfb96[0x0]['language']==_0x5e2a1b(0x110))var _0x54df3c=users[_0x5e2a1b(0x128)];else{if(_0x3bfb96[0x0][_0x5e2a1b(0x112)]=='Hindi')var _0x54df3c=users[_0x5e2a1b(0x150)];else{if(_0x3bfb96[0x0]['language']==_0x5e2a1b(0x147))var _0x54df3c=users[_0x5e2a1b(0x147)];else{if(_0x3bfb96[0x0][_0x5e2a1b(0x112)]==_0x5e2a1b(0x127))var _0x54df3c=users[_0x5e2a1b(0x127)];else{if(_0x3bfb96[0x0]['language']=='French')var _0x54df3c=users['French'];else{if(_0x3bfb96[0x0][_0x5e2a1b(0x112)]==_0x5e2a1b(0x122))var _0x54df3c=users[_0x5e2a1b(0x13d)];else{if(_0x3bfb96[0x0]['language']==_0x5e2a1b(0x114))var _0x54df3c=users['Chinese'];else{if(_0x3bfb96[0x0][_0x5e2a1b(0x112)]==_0x5e2a1b(0x153))var _0x54df3c=users[_0x5e2a1b(0x116)];}}}}}}}_0x148342[_0x5e2a1b(0x136)](_0x5e2a1b(0x129),{'success':_0x3f9d51[_0x5e2a1b(0x125)](_0x5e2a1b(0x13f)),'errors':_0x3f9d51['flash']('errors'),'master_shop':_0x3bfb96,'profile':_0x69bc5b,'role':_0x29dc42,'language':_0x54df3c,'sales_mine':_0x21d582,'staff_arr':_0x2d7c2e});}catch(_0x40af87){console['log'](_0x40af87);}}),router['get']('/view/:id',auth,async(_0x2fc95,_0xb572b)=>{var _0x31106e=a0_0x24547c;try{const _0x3cf0f6=await master_shop[_0x31106e(0x121)](),_0x5dffe7=_0x2fc95[_0x31106e(0x133)],_0x1ba7df=await profile['findOne']({'email':_0x5dffe7[_0x31106e(0x138)]}),_0x41145a=await staff[_0x31106e(0x159)]({'email':_0x5dffe7[_0x31106e(0x138)]}),_0x5af9e8=await customer['find']({'agent_id':_0x41145a['_id']}),_0x16b8a0=_0x2fc95[_0x31106e(0x123)]['id'],_0x4ca843=await sales_sa[_0x31106e(0x14d)](_0x16b8a0);if(_0x3cf0f6[0x0][_0x31106e(0x112)]==_0x31106e(0x110))var _0x5db515=users['English'];else{if(_0x3cf0f6[0x0][_0x31106e(0x112)]==_0x31106e(0x150))var _0x5db515=users[_0x31106e(0x150)];else{if(_0x3cf0f6[0x0][_0x31106e(0x112)]==_0x31106e(0x147))var _0x5db515=users['German'];else{if(_0x3cf0f6[0x0][_0x31106e(0x112)]=='Spanish')var _0x5db515=users['Spanish'];else{if(_0x3cf0f6[0x0][_0x31106e(0x112)]==_0x31106e(0x14a))var _0x5db515=users[_0x31106e(0x14a)];else{if(_0x3cf0f6[0x0][_0x31106e(0x112)]==_0x31106e(0x122))var _0x5db515=users[_0x31106e(0x13d)];else{if(_0x3cf0f6[0x0][_0x31106e(0x112)]=='Chinese')var _0x5db515=users[_0x31106e(0x114)];else{if(_0x3cf0f6[0x0]['language']==_0x31106e(0x153))var _0x5db515=users[_0x31106e(0x116)];}}}}}}}_0xb572b['render']('view_collections',{'success':_0x2fc95['flash'](_0x31106e(0x13f)),'errors':_0x2fc95[_0x31106e(0x125)](_0x31106e(0x154)),'master_shop':_0x3cf0f6,'profile':_0x1ba7df,'role':_0x5dffe7,'language':_0x5db515,'customer':_0x5af9e8,'sales_sa':_0x4ca843,'staff_arr':_0x41145a});}catch(_0x54c2f8){console['log'](_0x54c2f8);}}),router[a0_0x24547c(0x11c)](a0_0x24547c(0x10b),auth,async(_0x644c94,_0x3f2310)=>{var _0x2b3bb5=a0_0x24547c;try{const _0x6a05b6=_0x644c94[_0x2b3bb5(0x123)]['id'],_0x67d4e5=await sales_sa[_0x2b3bb5(0x14d)](_0x6a05b6),{collection:_0x8707e1,invoicemoney:_0x5976d1,collectionnumber:_0x59a422,typeofpayment:_0x497e0e,cashdate:_0x4fa151,id_detl:_0x4e03d0}=_0x644c94[_0x2b3bb5(0x132)];_0x3f2310[_0x2b3bb5(0x135)](_0x67d4e5);return;if(typeof _0x4e03d0==_0x2b3bb5(0x117))var _0x4cc36e=[_0x644c94[_0x2b3bb5(0x132)]['id_detl']],_0x3227a6=[_0x644c94[_0x2b3bb5(0x132)][_0x2b3bb5(0x14c)]],_0x326cf2=[_0x644c94[_0x2b3bb5(0x132)][_0x2b3bb5(0x11d)]],_0x163bca=[_0x644c94[_0x2b3bb5(0x132)]['fin_disc']],_0x5ef391=[_0x644c94[_0x2b3bb5(0x132)][_0x2b3bb5(0x10c)]],_0x5e1ae4=[_0x644c94[_0x2b3bb5(0x132)]['bo_disc']],_0x26a534=[_0x644c94[_0x2b3bb5(0x132)]['totalNewPrice']];else var _0x4cc36e=[..._0x644c94[_0x2b3bb5(0x132)][_0x2b3bb5(0x115)]],_0x3227a6=[..._0x644c94['body'][_0x2b3bb5(0x14c)]],_0x326cf2=[..._0x644c94[_0x2b3bb5(0x132)][_0x2b3bb5(0x11d)]],_0x163bca=[..._0x644c94['body'][_0x2b3bb5(0x12a)]],_0x5ef391=[..._0x644c94[_0x2b3bb5(0x132)]['vol_deals']],_0x5e1ae4=[..._0x644c94[_0x2b3bb5(0x132)]['bo_disc']],_0x26a534=[..._0x644c94[_0x2b3bb5(0x132)][_0x2b3bb5(0x11b)]];const _0x35f2ad=_0x4cc36e[_0x2b3bb5(0x118)](_0x202cf9=>{return _0x202cf9={'id_detl':_0x202cf9};});_0x3227a6[_0x2b3bb5(0x148)]((_0x127be8,_0xf28ec9)=>{var _0x89bb6=_0x2b3bb5;_0x35f2ad[_0xf28ec9][_0x89bb6(0x14c)]=_0x127be8;}),_0x326cf2[_0x2b3bb5(0x148)]((_0x6eb44f,_0x5edaf2)=>{_0x35f2ad[_0x5edaf2]['spwp']=_0x6eb44f;}),_0x163bca[_0x2b3bb5(0x148)]((_0x31afb0,_0xd3b337)=>{var _0x2e17f7=_0x2b3bb5;_0x35f2ad[_0xd3b337][_0x2e17f7(0x12a)]=_0x31afb0;}),_0x5ef391['forEach']((_0xf86ae4,_0x2cf4d5)=>{var _0x3c4ff7=_0x2b3bb5;_0x35f2ad[_0x2cf4d5][_0x3c4ff7(0x10c)]=_0xf86ae4;}),_0x5e1ae4[_0x2b3bb5(0x148)]((_0x559c93,_0x462470)=>{_0x35f2ad[_0x462470]['bo_disc']=_0x559c93;}),_0x26a534[_0x2b3bb5(0x148)]((_0x4aa705,_0x535ca2)=>{var _0x2e0d10=_0x2b3bb5;_0x35f2ad[_0x535ca2][_0x2e0d10(0x11e)]=_0x4aa705;}),_0x67d4e5[_0x2b3bb5(0x111)]=_0x8707e1,_0x67d4e5['collectionnumber']=_0x59a422,_0x67d4e5[_0x2b3bb5(0x11a)]=_0x497e0e,_0x67d4e5['cash_date']=_0x4fa151,_0x67d4e5['paid']='True';const _0x59c05e=await _0x67d4e5[_0x2b3bb5(0x12e)]();if(_0x59c05e[_0x2b3bb5(0x13a)]==_0x2b3bb5(0x144))for(let _0x307993=0x0;_0x307993<=_0x35f2ad[_0x2b3bb5(0x162)]-0x1;_0x307993++){const _0x4b978f=_0x35f2ad[_0x307993],_0x25b220=mongoose[_0x2b3bb5(0x14b)][_0x2b3bb5(0x149)];console['log'](_0x4b978f);const _0x30ad98=await sales_sa[_0x2b3bb5(0x124)]({'_id':_0x25b220(_0x6a05b6[_0x2b3bb5(0x12c)]()),'sale_product._id':_0x25b220(_0x4b978f[_0x2b3bb5(0x115)]['valueOf']())},{'$set':{'sale_product.$.ewt':_0x4b978f[_0x2b3bb5(0x14c)],'sale_product.$.spwp':_0x4b978f[_0x2b3bb5(0x11d)],'sale_product.$.fin_disc':_0x4b978f['fin_disc'],'sale_product.$.vol_deals':_0x4b978f[_0x2b3bb5(0x10c)],'sale_product.$.bo_disc':_0x4b978f[_0x2b3bb5(0x145)],'sale_product.$.totalprice':parseFloat(_0x4b978f[_0x2b3bb5(0x11e)])}});}_0x644c94[_0x2b3bb5(0x125)](_0x2b3bb5(0x13f),_0x2b3bb5(0x143)),_0x3f2310[_0x2b3bb5(0x119)](_0x2b3bb5(0x13e)+_0x6a05b6);}catch(_0x28a2fa){console[_0x2b3bb5(0x137)](_0x28a2fa);}}),router[a0_0x24547c(0x14e)](a0_0x24547c(0x152),auth,async(_0x3115ed,_0x5a94b8)=>{var _0x5e53c7=a0_0x24547c;try{const _0x327235=await master_shop[_0x5e53c7(0x121)](),_0x20811b=_0x3115ed[_0x5e53c7(0x133)],_0x4bf028=await profile[_0x5e53c7(0x159)]({'email':_0x20811b[_0x5e53c7(0x138)]}),_0x1455c1=await staff[_0x5e53c7(0x159)]({'email':_0x20811b['email'],'type_of_acc_cat':'2'});let _0x51c97c=[];_0x1455c1!=null&&(_0x51c97c=await sales_order[_0x5e53c7(0x121)]({'sales_staff_id':_0x1455c1[_0x5e53c7(0x12f)]}));console[_0x5e53c7(0x137)](_0x51c97c);if(_0x327235[0x0]['language']=='English\x20(US)')var _0x57c5cd=users[_0x5e53c7(0x128)];else{if(_0x327235[0x0]['language']==_0x5e53c7(0x150))var _0x57c5cd=users[_0x5e53c7(0x150)];else{if(_0x327235[0x0][_0x5e53c7(0x112)]==_0x5e53c7(0x147))var _0x57c5cd=users[_0x5e53c7(0x147)];else{if(_0x327235[0x0][_0x5e53c7(0x112)]==_0x5e53c7(0x127))var _0x57c5cd=users['Spanish'];else{if(_0x327235[0x0][_0x5e53c7(0x112)]=='French')var _0x57c5cd=users['French'];else{if(_0x327235[0x0][_0x5e53c7(0x112)]==_0x5e53c7(0x122))var _0x57c5cd=users[_0x5e53c7(0x13d)];else{if(_0x327235[0x0][_0x5e53c7(0x112)]=='Chinese')var _0x57c5cd=users[_0x5e53c7(0x114)];else{if(_0x327235[0x0][_0x5e53c7(0x112)]=='Arabic\x20(ae)')var _0x57c5cd=users[_0x5e53c7(0x116)];}}}}}}}_0x5a94b8['render'](_0x5e53c7(0x15b),{'success':_0x3115ed[_0x5e53c7(0x125)](_0x5e53c7(0x13f)),'errors':_0x3115ed[_0x5e53c7(0x125)](_0x5e53c7(0x154)),'master_shop':_0x327235,'profile':_0x4bf028,'role':_0x20811b,'language':_0x57c5cd,'sales_mine':_0x51c97c,'staff_arr':_0x1455c1});}catch(_0x5630af){console['log'](_0x5630af);}}),router[a0_0x24547c(0x14e)](a0_0x24547c(0x163),auth,async(_0x2456e1,_0x50f9ed)=>{var _0x224f5c=a0_0x24547c;try{const _0x20a00d=await master_shop[_0x224f5c(0x121)](),_0x2092a6=_0x2456e1[_0x224f5c(0x133)],_0x3bb198=await profile[_0x224f5c(0x159)]({'email':_0x2092a6[_0x224f5c(0x138)]}),_0x1c1739=await staff[_0x224f5c(0x159)]({'email':_0x2092a6[_0x224f5c(0x138)]}),_0x2e0f1a=await customer[_0x224f5c(0x121)]({'agent_id':_0x1c1739[_0x224f5c(0x12f)]}),_0x1b9960=_0x2456e1[_0x224f5c(0x123)]['id'],_0xbd73b8=await sales_order[_0x224f5c(0x14d)](_0x1b9960);if(_0x20a00d[0x0][_0x224f5c(0x112)]==_0x224f5c(0x110))var _0x491650=users[_0x224f5c(0x128)];else{if(_0x20a00d[0x0][_0x224f5c(0x112)]==_0x224f5c(0x150))var _0x491650=users[_0x224f5c(0x150)];else{if(_0x20a00d[0x0][_0x224f5c(0x112)]==_0x224f5c(0x147))var _0x491650=users[_0x224f5c(0x147)];else{if(_0x20a00d[0x0]['language']==_0x224f5c(0x127))var _0x491650=users['Spanish'];else{if(_0x20a00d[0x0][_0x224f5c(0x112)]==_0x224f5c(0x14a))var _0x491650=users[_0x224f5c(0x14a)];else{if(_0x20a00d[0x0][_0x224f5c(0x112)]==_0x224f5c(0x122))var _0x491650=users['Portuguese'];else{if(_0x20a00d[0x0][_0x224f5c(0x112)]==_0x224f5c(0x114))var _0x491650=users[_0x224f5c(0x114)];else{if(_0x20a00d[0x0][_0x224f5c(0x112)]==_0x224f5c(0x153))var _0x491650=users[_0x224f5c(0x116)];}}}}}}}_0x50f9ed[_0x224f5c(0x136)](_0x224f5c(0x12b),{'success':_0x2456e1[_0x224f5c(0x125)]('success'),'errors':_0x2456e1[_0x224f5c(0x125)]('errors'),'master_shop':_0x20a00d,'profile':_0x3bb198,'role':_0x2092a6,'language':_0x491650,'customer':_0x2e0f1a,'sales_sa':_0xbd73b8});}catch(_0x395855){console['log'](_0x395855);}}),router[a0_0x24547c(0x14e)](a0_0x24547c(0x15f),auth,async(_0x3926da,_0x368117)=>{var _0x2096d6=a0_0x24547c;try{const _0x3ead74=await master_shop[_0x2096d6(0x121)](),_0x37c44d=_0x3926da[_0x2096d6(0x133)],_0x3237ca=await profile['findOne']({'email':_0x37c44d[_0x2096d6(0x138)]}),_0x59b244=await staff[_0x2096d6(0x159)]({'email':_0x37c44d['email'],'type_of_acc_cat':'1'});let _0x43c12c=[];_0x59b244!=null&&(_0x43c12c=await sales_sa['find']({'sales_staff_id':_0x59b244[_0x2096d6(0x12f)]}));if(_0x3ead74[0x0][_0x2096d6(0x112)]==_0x2096d6(0x110))var _0x11bf69=users['English'];else{if(_0x3ead74[0x0][_0x2096d6(0x112)]=='Hindi')var _0x11bf69=users[_0x2096d6(0x150)];else{if(_0x3ead74[0x0]['language']==_0x2096d6(0x147))var _0x11bf69=users[_0x2096d6(0x147)];else{if(_0x3ead74[0x0]['language']==_0x2096d6(0x127))var _0x11bf69=users[_0x2096d6(0x127)];else{if(_0x3ead74[0x0][_0x2096d6(0x112)]==_0x2096d6(0x14a))var _0x11bf69=users[_0x2096d6(0x14a)];else{if(_0x3ead74[0x0]['language']==_0x2096d6(0x122))var _0x11bf69=users[_0x2096d6(0x13d)];else{if(_0x3ead74[0x0]['language']==_0x2096d6(0x114))var _0x11bf69=users['Chinese'];else{if(_0x3ead74[0x0]['language']==_0x2096d6(0x153))var _0x11bf69=users[_0x2096d6(0x116)];}}}}}}}_0x368117[_0x2096d6(0x136)](_0x2096d6(0x146),{'success':_0x3926da[_0x2096d6(0x125)](_0x2096d6(0x13f)),'errors':_0x3926da[_0x2096d6(0x125)]('errors'),'master_shop':_0x3ead74,'profile':_0x3237ca,'role':_0x37c44d,'language':_0x11bf69,'sales_mine':_0x43c12c,'staff_arr':_0x59b244});}catch(_0x36d77e){console['log'](_0x36d77e);}}),router[a0_0x24547c(0x14e)](a0_0x24547c(0x15a),auth,async(_0x5240b4,_0x2e89fd)=>{var _0x5d772a=a0_0x24547c;try{const _0x17ef4b=await master_shop[_0x5d772a(0x121)](),_0x31d84a=_0x5240b4[_0x5d772a(0x133)],_0x564dda=await profile[_0x5d772a(0x159)]({'email':_0x31d84a[_0x5d772a(0x138)]}),_0x27551e=await staff['findOne']({'email':_0x31d84a[_0x5d772a(0x138)]}),_0x1ab601=await customer[_0x5d772a(0x121)]({'agent_id':_0x27551e[_0x5d772a(0x12f)]}),_0x5e7bf7=_0x5240b4['params']['id'],_0x5a301f=await sales_sa[_0x5d772a(0x14d)](_0x5e7bf7);if(_0x17ef4b[0x0][_0x5d772a(0x112)]==_0x5d772a(0x110))var _0x4ed57c=users['English'];else{if(_0x17ef4b[0x0]['language']=='Hindi')var _0x4ed57c=users[_0x5d772a(0x150)];else{if(_0x17ef4b[0x0]['language']==_0x5d772a(0x147))var _0x4ed57c=users[_0x5d772a(0x147)];else{if(_0x17ef4b[0x0]['language']==_0x5d772a(0x127))var _0x4ed57c=users[_0x5d772a(0x127)];else{if(_0x17ef4b[0x0]['language']==_0x5d772a(0x14a))var _0x4ed57c=users[_0x5d772a(0x14a)];else{if(_0x17ef4b[0x0]['language']==_0x5d772a(0x122))var _0x4ed57c=users[_0x5d772a(0x13d)];else{if(_0x17ef4b[0x0][_0x5d772a(0x112)]==_0x5d772a(0x114))var _0x4ed57c=users[_0x5d772a(0x114)];else{if(_0x17ef4b[0x0]['language']==_0x5d772a(0x153))var _0x4ed57c=users[_0x5d772a(0x116)];}}}}}}}_0x2e89fd['render'](_0x5d772a(0x15c),{'success':_0x5240b4[_0x5d772a(0x125)](_0x5d772a(0x13f)),'errors':_0x5240b4[_0x5d772a(0x125)](_0x5d772a(0x154)),'master_shop':_0x17ef4b,'profile':_0x564dda,'role':_0x31d84a,'language':_0x4ed57c,'customer':_0x1ab601,'sales_sa':_0x5a301f,'staff_arr':_0x27551e});}catch(_0x391f69){console['log'](_0x391f69);}}),router[a0_0x24547c(0x11c)](a0_0x24547c(0x15a),auth,async(_0x4ed22d,_0xdd7022)=>{var _0x2cbe27=a0_0x24547c;try{const _0x1bb214=_0x4ed22d[_0x2cbe27(0x123)]['id'],_0x42fa58=await sales_sa[_0x2cbe27(0x14d)](_0x1bb214),{collection:_0x5bbeda,invoicemoney:_0x51fd07,collectionnumber:_0x2d83bf,typeofpayment:_0x318e50,cashdate:_0x2279d9,id_detl:_0x20e358}=_0x4ed22d[_0x2cbe27(0x132)];if(typeof _0x20e358==_0x2cbe27(0x117))var _0x45d3d7=[_0x4ed22d['body'][_0x2cbe27(0x115)]],_0x41d2c9=[_0x4ed22d[_0x2cbe27(0x132)][_0x2cbe27(0x14c)]],_0x354723=[_0x4ed22d[_0x2cbe27(0x132)]['spwp']],_0x4d5a3b=[_0x4ed22d['body']['fin_disc']],_0x45caaf=[_0x4ed22d['body'][_0x2cbe27(0x10c)]],_0x2fe209=[_0x4ed22d[_0x2cbe27(0x132)]['bo_disc']],_0x5a93cd=[_0x4ed22d['body'][_0x2cbe27(0x11b)]];else var _0x45d3d7=[..._0x4ed22d['body'][_0x2cbe27(0x115)]],_0x41d2c9=[..._0x4ed22d[_0x2cbe27(0x132)]['ewt']],_0x354723=[..._0x4ed22d[_0x2cbe27(0x132)][_0x2cbe27(0x11d)]],_0x4d5a3b=[..._0x4ed22d['body'][_0x2cbe27(0x12a)]],_0x45caaf=[..._0x4ed22d['body'][_0x2cbe27(0x10c)]],_0x2fe209=[..._0x4ed22d[_0x2cbe27(0x132)][_0x2cbe27(0x145)]],_0x5a93cd=[..._0x4ed22d[_0x2cbe27(0x132)][_0x2cbe27(0x11b)]];const _0x21742a=_0x45d3d7['map'](_0x16c74f=>{return _0x16c74f={'id_detl':_0x16c74f};});_0x41d2c9[_0x2cbe27(0x148)]((_0x1d7822,_0x25df5d)=>{var _0x56876c=_0x2cbe27;_0x21742a[_0x25df5d][_0x56876c(0x14c)]=_0x1d7822;}),_0x354723[_0x2cbe27(0x148)]((_0x474762,_0x3b5d1d)=>{var _0x115150=_0x2cbe27;_0x21742a[_0x3b5d1d][_0x115150(0x11d)]=_0x474762;}),_0x4d5a3b[_0x2cbe27(0x148)]((_0x88bab3,_0x356a9a)=>{var _0x39f29c=_0x2cbe27;_0x21742a[_0x356a9a][_0x39f29c(0x12a)]=_0x88bab3;}),_0x45caaf[_0x2cbe27(0x148)]((_0x582b93,_0x5f1e7f)=>{var _0x132288=_0x2cbe27;_0x21742a[_0x5f1e7f][_0x132288(0x10c)]=_0x582b93;}),_0x2fe209[_0x2cbe27(0x148)]((_0x2705bd,_0x5b252f)=>{_0x21742a[_0x5b252f]['bo_disc']=_0x2705bd;}),_0x5a93cd[_0x2cbe27(0x148)]((_0x4897a7,_0x1b9b5e)=>{_0x21742a[_0x1b9b5e]['totalcollection']=_0x4897a7;}),_0x42fa58['collection_price']=_0x5bbeda,_0x42fa58[_0x2cbe27(0x12d)]=_0x2d83bf,_0x42fa58[_0x2cbe27(0x11a)]=_0x318e50,_0x42fa58[_0x2cbe27(0x134)]=_0x2279d9,_0x42fa58['paid']=_0x2cbe27(0x144),_0x42fa58[_0x2cbe27(0x113)]='1';const _0x31c6da=await _0x42fa58['save']();if(_0x31c6da[_0x2cbe27(0x13a)]==_0x2cbe27(0x144))for(let _0x3becfd=0x0;_0x3becfd<=_0x21742a[_0x2cbe27(0x162)]-0x1;_0x3becfd++){const _0x521942=_0x21742a[_0x3becfd],_0x2cdb2b=mongoose[_0x2cbe27(0x14b)]['ObjectId'];console[_0x2cbe27(0x137)](_0x521942);const _0x2d659c=await sales_sa[_0x2cbe27(0x124)]({'_id':_0x2cdb2b(_0x1bb214[_0x2cbe27(0x12c)]()),'sale_product._id':_0x2cdb2b(_0x521942['id_detl'][_0x2cbe27(0x12c)]())},{'$set':{'sale_product.$.ewt':_0x521942[_0x2cbe27(0x14c)],'sale_product.$.spwp':_0x521942[_0x2cbe27(0x11d)],'sale_product.$.fin_disc':_0x521942[_0x2cbe27(0x12a)],'sale_product.$.vol_deals':_0x521942[_0x2cbe27(0x10c)],'sale_product.$.bo_disc':_0x521942[_0x2cbe27(0x145)],'sale_product.$.totalprice':parseFloat(_0x521942['totalcollection'])}});}_0x4ed22d[_0x2cbe27(0x125)](_0x2cbe27(0x13f),_0x2cbe27(0x143)),_0xdd7022['redirect'](_0x2cbe27(0x13e)+_0x1bb214);}catch(_0xaf3ff8){console[_0x2cbe27(0x137)](_0xaf3ff8);}}),router[a0_0x24547c(0x14e)]('/so_x',auth,async(_0x4e173d,_0x1c4e3a)=>{var _0x4a8e19=a0_0x24547c;try{const _0x4d59ad=await master_shop[_0x4a8e19(0x121)](),_0x441a8a=_0x4e173d[_0x4a8e19(0x133)],_0x54ee0d=await profile['findOne']({'email':_0x441a8a[_0x4a8e19(0x138)]}),_0xf9643f=await staff['findOne']({'email':_0x441a8a[_0x4a8e19(0x138)],'type_of_acc_cat':'1'});let _0x2e82a8=[];_0xf9643f!=null&&(_0x2e82a8=await sales_order[_0x4a8e19(0x121)]({'sales_staff_id':_0xf9643f[_0x4a8e19(0x12f)]}));if(_0x4d59ad[0x0][_0x4a8e19(0x112)]=='English\x20(US)')var _0xc7ac95=users[_0x4a8e19(0x128)];else{if(_0x4d59ad[0x0][_0x4a8e19(0x112)]==_0x4a8e19(0x150))var _0xc7ac95=users[_0x4a8e19(0x150)];else{if(_0x4d59ad[0x0]['language']==_0x4a8e19(0x147))var _0xc7ac95=users[_0x4a8e19(0x147)];else{if(_0x4d59ad[0x0][_0x4a8e19(0x112)]==_0x4a8e19(0x127))var _0xc7ac95=users['Spanish'];else{if(_0x4d59ad[0x0][_0x4a8e19(0x112)]==_0x4a8e19(0x14a))var _0xc7ac95=users[_0x4a8e19(0x14a)];else{if(_0x4d59ad[0x0][_0x4a8e19(0x112)]==_0x4a8e19(0x122))var _0xc7ac95=users[_0x4a8e19(0x13d)];else{if(_0x4d59ad[0x0][_0x4a8e19(0x112)]==_0x4a8e19(0x114))var _0xc7ac95=users[_0x4a8e19(0x114)];else{if(_0x4d59ad[0x0][_0x4a8e19(0x112)]==_0x4a8e19(0x153))var _0xc7ac95=users['Arabic'];}}}}}}}_0x1c4e3a[_0x4a8e19(0x136)](_0x4a8e19(0x160),{'success':_0x4e173d[_0x4a8e19(0x125)](_0x4a8e19(0x13f)),'errors':_0x4e173d[_0x4a8e19(0x125)](_0x4a8e19(0x154)),'master_shop':_0x4d59ad,'profile':_0x54ee0d,'role':_0x441a8a,'language':_0xc7ac95,'sales_mine':_0x2e82a8,'staff_arr':_0xf9643f});}catch(_0x5ac9a5){console['log'](_0x5ac9a5);}}),router['get'](a0_0x24547c(0x140),auth,async(_0x5a5fe3,_0x3a043d)=>{var _0x2d7794=a0_0x24547c;try{const _0x3200b3=await master_shop['find'](),_0x4c30c1=_0x5a5fe3[_0x2d7794(0x133)],_0x348252=await profile[_0x2d7794(0x159)]({'email':_0x4c30c1[_0x2d7794(0x138)]}),_0x47fd6b=await staff[_0x2d7794(0x159)]({'email':_0x4c30c1[_0x2d7794(0x138)]}),_0x5314c8=await customer[_0x2d7794(0x121)]({'agent_id':_0x47fd6b[_0x2d7794(0x12f)]}),_0x429709=_0x5a5fe3['params']['id'],_0x5fcda7=await sales_order['findById'](_0x429709);if(_0x3200b3[0x0][_0x2d7794(0x112)]=='English\x20(US)')var _0xb2ecbb=users['English'];else{if(_0x3200b3[0x0][_0x2d7794(0x112)]=='Hindi')var _0xb2ecbb=users[_0x2d7794(0x150)];else{if(_0x3200b3[0x0]['language']==_0x2d7794(0x147))var _0xb2ecbb=users[_0x2d7794(0x147)];else{if(_0x3200b3[0x0]['language']==_0x2d7794(0x127))var _0xb2ecbb=users[_0x2d7794(0x127)];else{if(_0x3200b3[0x0][_0x2d7794(0x112)]==_0x2d7794(0x14a))var _0xb2ecbb=users[_0x2d7794(0x14a)];else{if(_0x3200b3[0x0][_0x2d7794(0x112)]==_0x2d7794(0x122))var _0xb2ecbb=users['Portuguese'];else{if(_0x3200b3[0x0]['language']=='Chinese')var _0xb2ecbb=users[_0x2d7794(0x114)];else{if(_0x3200b3[0x0]['language']==_0x2d7794(0x153))var _0xb2ecbb=users['Arabic'];}}}}}}}_0x3a043d[_0x2d7794(0x136)](_0x2d7794(0x13c),{'success':_0x5a5fe3['flash'](_0x2d7794(0x13f)),'errors':_0x5a5fe3[_0x2d7794(0x125)](_0x2d7794(0x154)),'master_shop':_0x3200b3,'profile':_0x348252,'role':_0x4c30c1,'language':_0xb2ecbb,'customer':_0x5314c8,'sales_sa':_0x5fcda7,'staff_arr':_0x47fd6b});}catch(_0xfc4470){console[_0x2d7794(0x137)](_0xfc4470);}}),router[a0_0x24547c(0x11c)](a0_0x24547c(0x140),auth,async(_0x53c783,_0x203174)=>{var _0x18e1b5=a0_0x24547c;try{const _0xbef343=_0x53c783[_0x18e1b5(0x123)]['id'],_0x4db12a=await sales_order[_0x18e1b5(0x14d)](_0xbef343),{collection:_0x1918f5,invoicemoney:_0x9af010,collectionnumber:_0x5e0761,typeofpayment:_0x316e35,cashdate:_0x32d1df,id_detl:_0x1b1ff4}=_0x53c783[_0x18e1b5(0x132)];_0x4db12a[_0x18e1b5(0x111)]=_0x1918f5,_0x4db12a['type_of_payment']=_0x316e35,_0x4db12a['cash_date']=_0x32d1df,_0x4db12a[_0x18e1b5(0x13a)]=_0x18e1b5(0x144),_0x4db12a[_0x18e1b5(0x113)]='1';const _0x5b2aed=await _0x4db12a['save']();_0x53c783[_0x18e1b5(0x125)](_0x18e1b5(0x13f),'Collection\x20Update\x20successfully'),_0x203174['redirect']('/collection/view_so_xt/'+_0xbef343);}catch(_0x3c96b1){console[_0x18e1b5(0x137)](_0x3c96b1);}}),module[a0_0x24547c(0x158)]=router;