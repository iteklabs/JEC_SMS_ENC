function a0_0x3741(){var _0x34986b=['Spanish','/collection/view_so_xt/','view_collections_xt','errors','valueOf','body','user','/view_x','Portuguese','6RXwcjR','xlsx','2028467GxnHLA','ewt','type_of_payment','collection','exports','bo_disc','forEach','_id','Arabic\x20(ae)','24SKqHXB','ObjectId','get','/view_so_xt/:id','550pKNGbj','Collection\x20Update\x20successfully','string','render','French','211270jUqNkO','typeofprocess','exceljs','params','/so_x','express','/x_so','vol_deals','fin_disc','collectionnumber','18GvzUfz','collection_so_xt','length','/view_xt/:id','save','post','/view_sox/:id','Chinese','view_collections_sox','id_detl','log','118063UdDymu','flash','mongoose','collection_sox','139567ZAhUPa','Arabic','view_collections','English\x20(US)','redirect','Portuguese\x20(BR)','spwp','124640ZJVltB','4zzskwz','Types','totalNewPrice','1660371WoqSRk','Hindi','True','find','success','language','totalcollection','updateOne','multer','/view','/collection/view/','cash_date','map','/view/:id','Router','paid','findById','email','German','13244808xfVfAn','../public/language/languages.json','findOne','collection_price','English'];a0_0x3741=function(){return _0x34986b;};return a0_0x3741();}var a0_0x46b513=a0_0x3ac2;function a0_0x3ac2(_0x126198,_0x5075ab){var _0x3741e1=a0_0x3741();return a0_0x3ac2=function(_0x3ac218,_0x1acc23){_0x3ac218=_0x3ac218-0xf7;var _0x1076ab=_0x3741e1[_0x3ac218];return _0x1076ab;},a0_0x3ac2(_0x126198,_0x5075ab);}(function(_0x2dbcc1,_0x32f560){var _0x1dd221=a0_0x3ac2,_0x3347e4=_0x2dbcc1();while(!![]){try{var _0x578a1b=-parseInt(_0x1dd221(0x142))/0x1*(-parseInt(_0x1dd221(0x14a))/0x2)+parseInt(_0x1dd221(0x14d))/0x3+parseInt(_0x1dd221(0x120))/0x4*(-parseInt(_0x1dd221(0x129))/0x5)+parseInt(_0x1dd221(0x115))/0x6*(parseInt(_0x1dd221(0x117))/0x7)+-parseInt(_0x1dd221(0x149))/0x8*(parseInt(_0x1dd221(0x133))/0x9)+parseInt(_0x1dd221(0x124))/0xa*(parseInt(_0x1dd221(0x13e))/0xb)+-parseInt(_0x1dd221(0x107))/0xc;if(_0x578a1b===_0x32f560)break;else _0x3347e4['push'](_0x3347e4['shift']());}catch(_0x2273d7){_0x3347e4['push'](_0x3347e4['shift']());}}}(a0_0x3741,0x4f2ad));const express=require(a0_0x46b513(0x12e)),app=express(),router=express[a0_0x46b513(0x102)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x46b513(0x108)),excelJS=require(a0_0x46b513(0x12b)),xlsx=require(a0_0x46b513(0x116)),multer=require(a0_0x46b513(0xfc)),mongoose=require(a0_0x46b513(0x140));router['get'](a0_0x46b513(0xfd),auth,async(_0x171efe,_0x4c07f2)=>{var _0x23ffed=a0_0x46b513;try{const _0x26e450=await master_shop[_0x23ffed(0xf7)](),_0x417881=_0x171efe[_0x23ffed(0x112)],_0x417523=await profile[_0x23ffed(0x109)]({'email':_0x417881[_0x23ffed(0x105)]}),_0x3ef984=await staff[_0x23ffed(0x109)]({'email':_0x417881[_0x23ffed(0x105)],'type_of_acc_cat':'2'});let _0xd37024=[];_0x3ef984!=null&&(_0xd37024=await sales_order[_0x23ffed(0xf7)]({'sales_staff_id':_0x3ef984[_0x23ffed(0x11e)]}));if(_0x26e450[0x0][_0x23ffed(0xf9)]==_0x23ffed(0x145))var _0x1a8a8e=users[_0x23ffed(0x10b)];else{if(_0x26e450[0x0][_0x23ffed(0xf9)]=='Hindi')var _0x1a8a8e=users[_0x23ffed(0x14e)];else{if(_0x26e450[0x0][_0x23ffed(0xf9)]=='German')var _0x1a8a8e=users[_0x23ffed(0x106)];else{if(_0x26e450[0x0]['language']=='Spanish')var _0x1a8a8e=users['Spanish'];else{if(_0x26e450[0x0][_0x23ffed(0xf9)]==_0x23ffed(0x128))var _0x1a8a8e=users[_0x23ffed(0x128)];else{if(_0x26e450[0x0][_0x23ffed(0xf9)]==_0x23ffed(0x147))var _0x1a8a8e=users[_0x23ffed(0x114)];else{if(_0x26e450[0x0][_0x23ffed(0xf9)]==_0x23ffed(0x13a))var _0x1a8a8e=users['Chinese'];else{if(_0x26e450[0x0][_0x23ffed(0xf9)]==_0x23ffed(0x11f))var _0x1a8a8e=users[_0x23ffed(0x143)];}}}}}}}_0x4c07f2[_0x23ffed(0x127)](_0x23ffed(0x11a),{'success':_0x171efe[_0x23ffed(0x13f)](_0x23ffed(0xf8)),'errors':_0x171efe[_0x23ffed(0x13f)](_0x23ffed(0x10f)),'master_shop':_0x26e450,'profile':_0x417523,'role':_0x417881,'language':_0x1a8a8e,'sales_mine':_0xd37024,'staff_arr':_0x3ef984});}catch(_0x88af25){console[_0x23ffed(0x13d)](_0x88af25);}}),router[a0_0x46b513(0x122)](a0_0x46b513(0x101),auth,async(_0x1d6593,_0x347f73)=>{var _0x332c3d=a0_0x46b513;try{const _0x337bf0=await master_shop[_0x332c3d(0xf7)](),_0x2ee6bc=_0x1d6593[_0x332c3d(0x112)],_0x2556be=await profile[_0x332c3d(0x109)]({'email':_0x2ee6bc[_0x332c3d(0x105)]}),_0x1a0eb4=await staff[_0x332c3d(0x109)]({'email':_0x2ee6bc[_0x332c3d(0x105)]}),_0x2ab5a4=await customer['find']({'agent_id':_0x1a0eb4[_0x332c3d(0x11e)]}),_0xcf66f1=_0x1d6593[_0x332c3d(0x12c)]['id'],_0x2956c3=await sales_sa['findById'](_0xcf66f1);if(_0x337bf0[0x0][_0x332c3d(0xf9)]==_0x332c3d(0x145))var _0xc99cb9=users[_0x332c3d(0x10b)];else{if(_0x337bf0[0x0]['language']==_0x332c3d(0x14e))var _0xc99cb9=users[_0x332c3d(0x14e)];else{if(_0x337bf0[0x0][_0x332c3d(0xf9)]=='German')var _0xc99cb9=users[_0x332c3d(0x106)];else{if(_0x337bf0[0x0]['language']==_0x332c3d(0x10c))var _0xc99cb9=users['Spanish'];else{if(_0x337bf0[0x0][_0x332c3d(0xf9)]==_0x332c3d(0x128))var _0xc99cb9=users[_0x332c3d(0x128)];else{if(_0x337bf0[0x0][_0x332c3d(0xf9)]==_0x332c3d(0x147))var _0xc99cb9=users[_0x332c3d(0x114)];else{if(_0x337bf0[0x0][_0x332c3d(0xf9)]==_0x332c3d(0x13a))var _0xc99cb9=users[_0x332c3d(0x13a)];else{if(_0x337bf0[0x0][_0x332c3d(0xf9)]==_0x332c3d(0x11f))var _0xc99cb9=users[_0x332c3d(0x143)];}}}}}}}_0x347f73[_0x332c3d(0x127)](_0x332c3d(0x144),{'success':_0x1d6593[_0x332c3d(0x13f)]('success'),'errors':_0x1d6593[_0x332c3d(0x13f)](_0x332c3d(0x10f)),'master_shop':_0x337bf0,'profile':_0x2556be,'role':_0x2ee6bc,'language':_0xc99cb9,'customer':_0x2ab5a4,'sales_sa':_0x2956c3,'staff_arr':_0x1a0eb4});}catch(_0x25075b){console[_0x332c3d(0x13d)](_0x25075b);}}),router[a0_0x46b513(0x138)](a0_0x46b513(0x101),auth,async(_0x2c70cd,_0x4af423)=>{var _0x51c57f=a0_0x46b513;try{const _0x4e3ad9=_0x2c70cd[_0x51c57f(0x12c)]['id'],_0x5ec35a=await sales_sa[_0x51c57f(0x104)](_0x4e3ad9),{collection:_0x2bd4ab,invoicemoney:_0x35a257,collectionnumber:_0x38c3a0,typeofpayment:_0x6e68ec,cashdate:_0x3aa98a,id_detl:_0xa59c7d}=_0x2c70cd['body'];_0x4af423['json'](_0x5ec35a);return;if(typeof _0xa59c7d==_0x51c57f(0x126))var _0x17cd41=[_0x2c70cd['body']['id_detl']],_0x31de04=[_0x2c70cd['body']['ewt']],_0x2dd2df=[_0x2c70cd[_0x51c57f(0x111)][_0x51c57f(0x148)]],_0x2dc258=[_0x2c70cd['body'][_0x51c57f(0x131)]],_0x5d89b8=[_0x2c70cd[_0x51c57f(0x111)][_0x51c57f(0x130)]],_0xf33e76=[_0x2c70cd[_0x51c57f(0x111)][_0x51c57f(0x11c)]],_0x1a1aa1=[_0x2c70cd[_0x51c57f(0x111)]['totalNewPrice']];else var _0x17cd41=[..._0x2c70cd[_0x51c57f(0x111)]['id_detl']],_0x31de04=[..._0x2c70cd[_0x51c57f(0x111)][_0x51c57f(0x118)]],_0x2dd2df=[..._0x2c70cd[_0x51c57f(0x111)][_0x51c57f(0x148)]],_0x2dc258=[..._0x2c70cd[_0x51c57f(0x111)][_0x51c57f(0x131)]],_0x5d89b8=[..._0x2c70cd[_0x51c57f(0x111)][_0x51c57f(0x130)]],_0xf33e76=[..._0x2c70cd[_0x51c57f(0x111)][_0x51c57f(0x11c)]],_0x1a1aa1=[..._0x2c70cd[_0x51c57f(0x111)]['totalNewPrice']];const _0x15bf51=_0x17cd41['map'](_0x6647d8=>{return _0x6647d8={'id_detl':_0x6647d8};});_0x31de04[_0x51c57f(0x11d)]((_0x220227,_0x3f9e30)=>{var _0xa9a7bc=_0x51c57f;_0x15bf51[_0x3f9e30][_0xa9a7bc(0x118)]=_0x220227;}),_0x2dd2df[_0x51c57f(0x11d)]((_0xbe3acd,_0x360cec)=>{var _0xcba749=_0x51c57f;_0x15bf51[_0x360cec][_0xcba749(0x148)]=_0xbe3acd;}),_0x2dc258['forEach']((_0x14c336,_0x102c26)=>{var _0x122948=_0x51c57f;_0x15bf51[_0x102c26][_0x122948(0x131)]=_0x14c336;}),_0x5d89b8[_0x51c57f(0x11d)]((_0x35dbab,_0x40d8aa)=>{var _0x2e80f1=_0x51c57f;_0x15bf51[_0x40d8aa][_0x2e80f1(0x130)]=_0x35dbab;}),_0xf33e76['forEach']((_0x18af72,_0x304700)=>{var _0x48be18=_0x51c57f;_0x15bf51[_0x304700][_0x48be18(0x11c)]=_0x18af72;}),_0x1a1aa1['forEach']((_0x3402ff,_0x577a1b)=>{var _0x45e9f6=_0x51c57f;_0x15bf51[_0x577a1b][_0x45e9f6(0xfa)]=_0x3402ff;}),_0x5ec35a['collection_price']=_0x2bd4ab,_0x5ec35a[_0x51c57f(0x132)]=_0x38c3a0,_0x5ec35a[_0x51c57f(0x119)]=_0x6e68ec,_0x5ec35a[_0x51c57f(0xff)]=_0x3aa98a,_0x5ec35a[_0x51c57f(0x103)]='True';const _0x3c4650=await _0x5ec35a['save']();if(_0x3c4650['paid']=='True')for(let _0x1355f8=0x0;_0x1355f8<=_0x15bf51[_0x51c57f(0x135)]-0x1;_0x1355f8++){const _0x434f4f=_0x15bf51[_0x1355f8],_0x43ef0d=mongoose[_0x51c57f(0x14b)]['ObjectId'];console[_0x51c57f(0x13d)](_0x434f4f);const _0x17ba40=await sales_sa[_0x51c57f(0xfb)]({'_id':_0x43ef0d(_0x4e3ad9[_0x51c57f(0x110)]()),'sale_product._id':_0x43ef0d(_0x434f4f['id_detl']['valueOf']())},{'$set':{'sale_product.$.ewt':_0x434f4f[_0x51c57f(0x118)],'sale_product.$.spwp':_0x434f4f[_0x51c57f(0x148)],'sale_product.$.fin_disc':_0x434f4f[_0x51c57f(0x131)],'sale_product.$.vol_deals':_0x434f4f[_0x51c57f(0x130)],'sale_product.$.bo_disc':_0x434f4f[_0x51c57f(0x11c)],'sale_product.$.totalprice':parseFloat(_0x434f4f[_0x51c57f(0xfa)])}});}_0x2c70cd[_0x51c57f(0x13f)](_0x51c57f(0xf8),'Collection\x20Update\x20successfully'),_0x4af423[_0x51c57f(0x146)](_0x51c57f(0xfe)+_0x4e3ad9);}catch(_0x118738){console['log'](_0x118738);}}),router['get'](a0_0x46b513(0x12f),auth,async(_0x3039a7,_0x5dfc20)=>{var _0xd59f31=a0_0x46b513;try{const _0x5f07cd=await master_shop[_0xd59f31(0xf7)](),_0x24be52=_0x3039a7['user'],_0x3659c3=await profile['findOne']({'email':_0x24be52[_0xd59f31(0x105)]}),_0x27da1c=await staff['findOne']({'email':_0x24be52[_0xd59f31(0x105)],'type_of_acc_cat':'2'});let _0x3729a4=[];_0x27da1c!=null&&(_0x3729a4=await sales_order[_0xd59f31(0xf7)]({'sales_staff_id':_0x27da1c[_0xd59f31(0x11e)]}));console['log'](_0x3729a4);if(_0x5f07cd[0x0][_0xd59f31(0xf9)]==_0xd59f31(0x145))var _0x187859=users[_0xd59f31(0x10b)];else{if(_0x5f07cd[0x0]['language']==_0xd59f31(0x14e))var _0x187859=users[_0xd59f31(0x14e)];else{if(_0x5f07cd[0x0][_0xd59f31(0xf9)]==_0xd59f31(0x106))var _0x187859=users[_0xd59f31(0x106)];else{if(_0x5f07cd[0x0][_0xd59f31(0xf9)]=='Spanish')var _0x187859=users[_0xd59f31(0x10c)];else{if(_0x5f07cd[0x0]['language']=='French')var _0x187859=users[_0xd59f31(0x128)];else{if(_0x5f07cd[0x0][_0xd59f31(0xf9)]=='Portuguese\x20(BR)')var _0x187859=users[_0xd59f31(0x114)];else{if(_0x5f07cd[0x0][_0xd59f31(0xf9)]==_0xd59f31(0x13a))var _0x187859=users[_0xd59f31(0x13a)];else{if(_0x5f07cd[0x0][_0xd59f31(0xf9)]==_0xd59f31(0x11f))var _0x187859=users[_0xd59f31(0x143)];}}}}}}}_0x5dfc20[_0xd59f31(0x127)](_0xd59f31(0x141),{'success':_0x3039a7[_0xd59f31(0x13f)]('success'),'errors':_0x3039a7[_0xd59f31(0x13f)](_0xd59f31(0x10f)),'master_shop':_0x5f07cd,'profile':_0x3659c3,'role':_0x24be52,'language':_0x187859,'sales_mine':_0x3729a4,'staff_arr':_0x27da1c});}catch(_0x5ad430){console[_0xd59f31(0x13d)](_0x5ad430);}}),router['get'](a0_0x46b513(0x139),auth,async(_0x1b52d6,_0x5bb5a0)=>{var _0x2042e4=a0_0x46b513;try{const _0x1dba68=await master_shop[_0x2042e4(0xf7)](),_0x23d7b0=_0x1b52d6[_0x2042e4(0x112)],_0x309493=await profile[_0x2042e4(0x109)]({'email':_0x23d7b0[_0x2042e4(0x105)]}),_0x1bfa70=await staff['findOne']({'email':_0x23d7b0[_0x2042e4(0x105)]}),_0x25a81e=await customer[_0x2042e4(0xf7)]({'agent_id':_0x1bfa70[_0x2042e4(0x11e)]}),_0x54d498=_0x1b52d6[_0x2042e4(0x12c)]['id'],_0x54d7ef=await sales_order[_0x2042e4(0x104)](_0x54d498);if(_0x1dba68[0x0][_0x2042e4(0xf9)]==_0x2042e4(0x145))var _0xedba90=users[_0x2042e4(0x10b)];else{if(_0x1dba68[0x0]['language']==_0x2042e4(0x14e))var _0xedba90=users[_0x2042e4(0x14e)];else{if(_0x1dba68[0x0][_0x2042e4(0xf9)]==_0x2042e4(0x106))var _0xedba90=users[_0x2042e4(0x106)];else{if(_0x1dba68[0x0][_0x2042e4(0xf9)]==_0x2042e4(0x10c))var _0xedba90=users[_0x2042e4(0x10c)];else{if(_0x1dba68[0x0][_0x2042e4(0xf9)]=='French')var _0xedba90=users[_0x2042e4(0x128)];else{if(_0x1dba68[0x0][_0x2042e4(0xf9)]==_0x2042e4(0x147))var _0xedba90=users['Portuguese'];else{if(_0x1dba68[0x0][_0x2042e4(0xf9)]=='Chinese')var _0xedba90=users['Chinese'];else{if(_0x1dba68[0x0][_0x2042e4(0xf9)]==_0x2042e4(0x11f))var _0xedba90=users[_0x2042e4(0x143)];}}}}}}}_0x5bb5a0[_0x2042e4(0x127)](_0x2042e4(0x13b),{'success':_0x1b52d6['flash'](_0x2042e4(0xf8)),'errors':_0x1b52d6[_0x2042e4(0x13f)](_0x2042e4(0x10f)),'master_shop':_0x1dba68,'profile':_0x309493,'role':_0x23d7b0,'language':_0xedba90,'customer':_0x25a81e,'sales_sa':_0x54d7ef});}catch(_0x160cbe){console['log'](_0x160cbe);}}),router['get'](a0_0x46b513(0x113),auth,async(_0x4a764f,_0x143c70)=>{var _0x474a37=a0_0x46b513;try{const _0xa0bec0=await master_shop['find'](),_0x39b84f=_0x4a764f[_0x474a37(0x112)],_0x4b30ce=await profile[_0x474a37(0x109)]({'email':_0x39b84f[_0x474a37(0x105)]}),_0x587e5f=await staff['findOne']({'email':_0x39b84f[_0x474a37(0x105)],'type_of_acc_cat':'1'});let _0x9ca568=[];_0x587e5f!=null&&(_0x9ca568=await sales_sa[_0x474a37(0xf7)]({'sales_staff_id':_0x587e5f['_id']}));if(_0xa0bec0[0x0][_0x474a37(0xf9)]=='English\x20(US)')var _0x201042=users[_0x474a37(0x10b)];else{if(_0xa0bec0[0x0][_0x474a37(0xf9)]=='Hindi')var _0x201042=users[_0x474a37(0x14e)];else{if(_0xa0bec0[0x0][_0x474a37(0xf9)]=='German')var _0x201042=users[_0x474a37(0x106)];else{if(_0xa0bec0[0x0]['language']==_0x474a37(0x10c))var _0x201042=users['Spanish'];else{if(_0xa0bec0[0x0]['language']==_0x474a37(0x128))var _0x201042=users[_0x474a37(0x128)];else{if(_0xa0bec0[0x0]['language']=='Portuguese\x20(BR)')var _0x201042=users[_0x474a37(0x114)];else{if(_0xa0bec0[0x0][_0x474a37(0xf9)]==_0x474a37(0x13a))var _0x201042=users[_0x474a37(0x13a)];else{if(_0xa0bec0[0x0][_0x474a37(0xf9)]==_0x474a37(0x11f))var _0x201042=users[_0x474a37(0x143)];}}}}}}}_0x143c70[_0x474a37(0x127)]('collection_xt',{'success':_0x4a764f[_0x474a37(0x13f)](_0x474a37(0xf8)),'errors':_0x4a764f[_0x474a37(0x13f)](_0x474a37(0x10f)),'master_shop':_0xa0bec0,'profile':_0x4b30ce,'role':_0x39b84f,'language':_0x201042,'sales_mine':_0x9ca568,'staff_arr':_0x587e5f});}catch(_0x266233){console[_0x474a37(0x13d)](_0x266233);}}),router['get'](a0_0x46b513(0x136),auth,async(_0x3fad8a,_0x4f577a)=>{var _0x4f6f5d=a0_0x46b513;try{const _0x325542=await master_shop['find'](),_0x4d1d88=_0x3fad8a[_0x4f6f5d(0x112)],_0x3f03f1=await profile[_0x4f6f5d(0x109)]({'email':_0x4d1d88[_0x4f6f5d(0x105)]}),_0x2f2bcf=await staff[_0x4f6f5d(0x109)]({'email':_0x4d1d88[_0x4f6f5d(0x105)]}),_0xd6daf8=await customer[_0x4f6f5d(0xf7)]({'agent_id':_0x2f2bcf['_id']}),_0x27a32f=_0x3fad8a['params']['id'],_0x184541=await sales_sa[_0x4f6f5d(0x104)](_0x27a32f);if(_0x325542[0x0]['language']==_0x4f6f5d(0x145))var _0x4c3442=users[_0x4f6f5d(0x10b)];else{if(_0x325542[0x0][_0x4f6f5d(0xf9)]=='Hindi')var _0x4c3442=users[_0x4f6f5d(0x14e)];else{if(_0x325542[0x0]['language']==_0x4f6f5d(0x106))var _0x4c3442=users[_0x4f6f5d(0x106)];else{if(_0x325542[0x0][_0x4f6f5d(0xf9)]=='Spanish')var _0x4c3442=users[_0x4f6f5d(0x10c)];else{if(_0x325542[0x0][_0x4f6f5d(0xf9)]=='French')var _0x4c3442=users[_0x4f6f5d(0x128)];else{if(_0x325542[0x0][_0x4f6f5d(0xf9)]==_0x4f6f5d(0x147))var _0x4c3442=users['Portuguese'];else{if(_0x325542[0x0]['language']==_0x4f6f5d(0x13a))var _0x4c3442=users[_0x4f6f5d(0x13a)];else{if(_0x325542[0x0]['language']==_0x4f6f5d(0x11f))var _0x4c3442=users['Arabic'];}}}}}}}_0x4f577a['render'](_0x4f6f5d(0x10e),{'success':_0x3fad8a['flash'](_0x4f6f5d(0xf8)),'errors':_0x3fad8a[_0x4f6f5d(0x13f)](_0x4f6f5d(0x10f)),'master_shop':_0x325542,'profile':_0x3f03f1,'role':_0x4d1d88,'language':_0x4c3442,'customer':_0xd6daf8,'sales_sa':_0x184541,'staff_arr':_0x2f2bcf});}catch(_0x59f266){console[_0x4f6f5d(0x13d)](_0x59f266);}}),router[a0_0x46b513(0x138)]('/view_xt/:id',auth,async(_0x49f064,_0x5277fa)=>{var _0x409ffa=a0_0x46b513;try{const _0x9e19a1=_0x49f064[_0x409ffa(0x12c)]['id'],_0x271add=await sales_sa[_0x409ffa(0x104)](_0x9e19a1),{collection:_0x4e2ab0,invoicemoney:_0x26dcdf,collectionnumber:_0x325ef3,typeofpayment:_0x373bc9,cashdate:_0x347d58,id_detl:_0x8a846}=_0x49f064[_0x409ffa(0x111)];if(typeof _0x8a846==_0x409ffa(0x126))var _0x1ab510=[_0x49f064['body'][_0x409ffa(0x13c)]],_0x260b10=[_0x49f064[_0x409ffa(0x111)]['ewt']],_0x2d8373=[_0x49f064[_0x409ffa(0x111)][_0x409ffa(0x148)]],_0x158bd2=[_0x49f064[_0x409ffa(0x111)][_0x409ffa(0x131)]],_0x569f66=[_0x49f064[_0x409ffa(0x111)][_0x409ffa(0x130)]],_0x3dcfa7=[_0x49f064['body'][_0x409ffa(0x11c)]],_0x348947=[_0x49f064['body'][_0x409ffa(0x14c)]];else var _0x1ab510=[..._0x49f064['body']['id_detl']],_0x260b10=[..._0x49f064['body'][_0x409ffa(0x118)]],_0x2d8373=[..._0x49f064[_0x409ffa(0x111)][_0x409ffa(0x148)]],_0x158bd2=[..._0x49f064[_0x409ffa(0x111)][_0x409ffa(0x131)]],_0x569f66=[..._0x49f064['body'][_0x409ffa(0x130)]],_0x3dcfa7=[..._0x49f064[_0x409ffa(0x111)][_0x409ffa(0x11c)]],_0x348947=[..._0x49f064[_0x409ffa(0x111)]['totalNewPrice']];const _0x251144=_0x1ab510[_0x409ffa(0x100)](_0x3f7aae=>{return _0x3f7aae={'id_detl':_0x3f7aae};});_0x260b10['forEach']((_0x421709,_0x1fcfd4)=>{var _0x48a4a3=_0x409ffa;_0x251144[_0x1fcfd4][_0x48a4a3(0x118)]=_0x421709;}),_0x2d8373[_0x409ffa(0x11d)]((_0x5170ab,_0x74809f)=>{var _0x366192=_0x409ffa;_0x251144[_0x74809f][_0x366192(0x148)]=_0x5170ab;}),_0x158bd2[_0x409ffa(0x11d)]((_0x467767,_0x9d8ea6)=>{var _0x3e8cc8=_0x409ffa;_0x251144[_0x9d8ea6][_0x3e8cc8(0x131)]=_0x467767;}),_0x569f66['forEach']((_0x1c6d6f,_0xb4ea33)=>{var _0x378444=_0x409ffa;_0x251144[_0xb4ea33][_0x378444(0x130)]=_0x1c6d6f;}),_0x3dcfa7['forEach']((_0x38e0bf,_0x533291)=>{var _0x2bea80=_0x409ffa;_0x251144[_0x533291][_0x2bea80(0x11c)]=_0x38e0bf;}),_0x348947['forEach']((_0x37a041,_0x545f80)=>{var _0x588e49=_0x409ffa;_0x251144[_0x545f80][_0x588e49(0xfa)]=_0x37a041;}),_0x271add['collection_price']=_0x4e2ab0,_0x271add[_0x409ffa(0x132)]=_0x325ef3,_0x271add[_0x409ffa(0x119)]=_0x373bc9,_0x271add['cash_date']=_0x347d58,_0x271add[_0x409ffa(0x103)]=_0x409ffa(0x14f),_0x271add[_0x409ffa(0x12a)]='1';const _0x23e13a=await _0x271add[_0x409ffa(0x137)]();if(_0x23e13a[_0x409ffa(0x103)]==_0x409ffa(0x14f))for(let _0x188307=0x0;_0x188307<=_0x251144[_0x409ffa(0x135)]-0x1;_0x188307++){const _0x2a7149=_0x251144[_0x188307],_0x5711a7=mongoose[_0x409ffa(0x14b)][_0x409ffa(0x121)];console['log'](_0x2a7149);const _0x515a78=await sales_sa[_0x409ffa(0xfb)]({'_id':_0x5711a7(_0x9e19a1[_0x409ffa(0x110)]()),'sale_product._id':_0x5711a7(_0x2a7149['id_detl'][_0x409ffa(0x110)]())},{'$set':{'sale_product.$.ewt':_0x2a7149['ewt'],'sale_product.$.spwp':_0x2a7149[_0x409ffa(0x148)],'sale_product.$.fin_disc':_0x2a7149[_0x409ffa(0x131)],'sale_product.$.vol_deals':_0x2a7149[_0x409ffa(0x130)],'sale_product.$.bo_disc':_0x2a7149['bo_disc'],'sale_product.$.totalprice':parseFloat(_0x2a7149[_0x409ffa(0xfa)])}});}_0x49f064[_0x409ffa(0x13f)](_0x409ffa(0xf8),_0x409ffa(0x125)),_0x5277fa[_0x409ffa(0x146)](_0x409ffa(0xfe)+_0x9e19a1);}catch(_0x1c875b){console[_0x409ffa(0x13d)](_0x1c875b);}}),router[a0_0x46b513(0x122)](a0_0x46b513(0x12d),auth,async(_0x201147,_0x12aba5)=>{var _0xced925=a0_0x46b513;try{const _0x2f856b=await master_shop['find'](),_0x529268=_0x201147[_0xced925(0x112)],_0x5391ef=await profile[_0xced925(0x109)]({'email':_0x529268[_0xced925(0x105)]}),_0x3e14a5=await staff['findOne']({'email':_0x529268[_0xced925(0x105)],'type_of_acc_cat':'1'});let _0x2e7aa8=[];_0x3e14a5!=null&&(_0x2e7aa8=await sales_order[_0xced925(0xf7)]({'sales_staff_id':_0x3e14a5['_id']}));if(_0x2f856b[0x0][_0xced925(0xf9)]==_0xced925(0x145))var _0x3030d6=users['English'];else{if(_0x2f856b[0x0][_0xced925(0xf9)]==_0xced925(0x14e))var _0x3030d6=users[_0xced925(0x14e)];else{if(_0x2f856b[0x0][_0xced925(0xf9)]==_0xced925(0x106))var _0x3030d6=users[_0xced925(0x106)];else{if(_0x2f856b[0x0][_0xced925(0xf9)]=='Spanish')var _0x3030d6=users[_0xced925(0x10c)];else{if(_0x2f856b[0x0][_0xced925(0xf9)]==_0xced925(0x128))var _0x3030d6=users['French'];else{if(_0x2f856b[0x0]['language']==_0xced925(0x147))var _0x3030d6=users[_0xced925(0x114)];else{if(_0x2f856b[0x0][_0xced925(0xf9)]==_0xced925(0x13a))var _0x3030d6=users['Chinese'];else{if(_0x2f856b[0x0]['language']==_0xced925(0x11f))var _0x3030d6=users[_0xced925(0x143)];}}}}}}}_0x12aba5[_0xced925(0x127)](_0xced925(0x134),{'success':_0x201147[_0xced925(0x13f)](_0xced925(0xf8)),'errors':_0x201147[_0xced925(0x13f)](_0xced925(0x10f)),'master_shop':_0x2f856b,'profile':_0x5391ef,'role':_0x529268,'language':_0x3030d6,'sales_mine':_0x2e7aa8,'staff_arr':_0x3e14a5});}catch(_0x440c3c){console[_0xced925(0x13d)](_0x440c3c);}}),router['get'](a0_0x46b513(0x123),auth,async(_0x5329e8,_0x44ca3a)=>{var _0x1f0882=a0_0x46b513;try{const _0x352e27=await master_shop[_0x1f0882(0xf7)](),_0x1aaecc=_0x5329e8[_0x1f0882(0x112)],_0xbff77b=await profile[_0x1f0882(0x109)]({'email':_0x1aaecc['email']}),_0x565489=await staff[_0x1f0882(0x109)]({'email':_0x1aaecc['email']}),_0x5d2fbb=await customer[_0x1f0882(0xf7)]({'agent_id':_0x565489[_0x1f0882(0x11e)]}),_0x58a7ff=_0x5329e8[_0x1f0882(0x12c)]['id'],_0x1d4747=await sales_order[_0x1f0882(0x104)](_0x58a7ff);if(_0x352e27[0x0][_0x1f0882(0xf9)]==_0x1f0882(0x145))var _0x20cb83=users[_0x1f0882(0x10b)];else{if(_0x352e27[0x0][_0x1f0882(0xf9)]==_0x1f0882(0x14e))var _0x20cb83=users[_0x1f0882(0x14e)];else{if(_0x352e27[0x0]['language']==_0x1f0882(0x106))var _0x20cb83=users[_0x1f0882(0x106)];else{if(_0x352e27[0x0][_0x1f0882(0xf9)]==_0x1f0882(0x10c))var _0x20cb83=users['Spanish'];else{if(_0x352e27[0x0][_0x1f0882(0xf9)]==_0x1f0882(0x128))var _0x20cb83=users[_0x1f0882(0x128)];else{if(_0x352e27[0x0][_0x1f0882(0xf9)]=='Portuguese\x20(BR)')var _0x20cb83=users[_0x1f0882(0x114)];else{if(_0x352e27[0x0][_0x1f0882(0xf9)]==_0x1f0882(0x13a))var _0x20cb83=users[_0x1f0882(0x13a)];else{if(_0x352e27[0x0][_0x1f0882(0xf9)]==_0x1f0882(0x11f))var _0x20cb83=users[_0x1f0882(0x143)];}}}}}}}_0x44ca3a[_0x1f0882(0x127)]('view_collections_so_xt',{'success':_0x5329e8[_0x1f0882(0x13f)](_0x1f0882(0xf8)),'errors':_0x5329e8[_0x1f0882(0x13f)]('errors'),'master_shop':_0x352e27,'profile':_0xbff77b,'role':_0x1aaecc,'language':_0x20cb83,'customer':_0x5d2fbb,'sales_sa':_0x1d4747,'staff_arr':_0x565489});}catch(_0x32832d){console[_0x1f0882(0x13d)](_0x32832d);}}),router[a0_0x46b513(0x138)](a0_0x46b513(0x123),auth,async(_0x11616e,_0x3b640a)=>{var _0x282b9d=a0_0x46b513;try{const _0x58b232=_0x11616e[_0x282b9d(0x12c)]['id'],_0x1bd956=await sales_order[_0x282b9d(0x104)](_0x58b232),{collection:_0x439d26,invoicemoney:_0x33a156,collectionnumber:_0x4ca147,typeofpayment:_0x249b91,cashdate:_0x4f0424,id_detl:_0x10f1ff}=_0x11616e['body'];_0x1bd956[_0x282b9d(0x10a)]=_0x439d26,_0x1bd956[_0x282b9d(0x119)]=_0x249b91,_0x1bd956[_0x282b9d(0xff)]=_0x4f0424,_0x1bd956['paid']=_0x282b9d(0x14f),_0x1bd956[_0x282b9d(0x12a)]='1';const _0x5a807a=await _0x1bd956['save']();_0x11616e[_0x282b9d(0x13f)](_0x282b9d(0xf8),_0x282b9d(0x125)),_0x3b640a[_0x282b9d(0x146)](_0x282b9d(0x10d)+_0x58b232);}catch(_0x5110fc){console['log'](_0x5110fc);}}),module[a0_0x46b513(0x11b)]=router;