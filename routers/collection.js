function a0_0x55d0(_0x19822e,_0x2ee013){var _0x2163e5=a0_0x2163();return a0_0x55d0=function(_0x55d058,_0x690ef8){_0x55d058=_0x55d058-0x1e0;var _0x5cc502=_0x2163e5[_0x55d058];return _0x5cc502;},a0_0x55d0(_0x19822e,_0x2ee013);}var a0_0x4f4be0=a0_0x55d0;function a0_0x2163(){var _0x498c3a=['/so_x','_id','findOne','totalcollection','type_of_payment','4148512xGPEsC','Types','email','params','/view_xt/:id','collection_sox','totalNewPrice','exports','Chinese','English','typeofprocess','id_detl','save','../public/language/languages.json','findById','235487KSLdPU','Portuguese','German','/view_so_xt/:id','view_collections_xt','/view','../middleware/auth','vol_deals','../models/all_models','/view/:id','language','640680Yuayfv','exceljs','multer','ObjectId','view_collections','125660wVrNCt','valueOf','string','96956avwmeC','French','find','render','1FUDFQj','ewt','cash_date','post','flash','body','mongoose','36aQqRPJ','Collection\x20Update\x20successfully','bo_disc','paid','length','collectionnumber','fin_disc','success','/view_sox/:id','user','/x_so','30mWvdOq','/collection/view/','English\x20(US)','6093879MUtJPD','True','forEach','updateOne','Hindi','get','collection','map','/collection/view_so_xt/','Router','Spanish','596362ifepBT','collection_price','Portuguese\x20(BR)','spwp','errors','Arabic','Arabic\x20(ae)','redirect','42stnJQU','log'];a0_0x2163=function(){return _0x498c3a;};return a0_0x2163();}(function(_0xba67a0,_0x2b8140){var _0x4d97b1=a0_0x55d0,_0x1f2c4c=_0xba67a0();while(!![]){try{var _0x224f57=parseInt(_0x4d97b1(0x224))/0x1*(parseInt(_0x4d97b1(0x1ef))/0x2)+-parseInt(_0x4d97b1(0x1f7))/0x3*(-parseInt(_0x4d97b1(0x220))/0x4)+-parseInt(_0x4d97b1(0x218))/0x5+parseInt(_0x4d97b1(0x1e1))/0x6*(-parseInt(_0x4d97b1(0x20d))/0x7)+parseInt(_0x4d97b1(0x1fe))/0x8+-parseInt(_0x4d97b1(0x22b))/0x9*(-parseInt(_0x4d97b1(0x21d))/0xa)+-parseInt(_0x4d97b1(0x1e4))/0xb;if(_0x224f57===_0x2b8140)break;else _0x1f2c4c['push'](_0x1f2c4c['shift']());}catch(_0xec6697){_0x1f2c4c['push'](_0x1f2c4c['shift']());}}}(a0_0x2163,0x56eb9));const express=require('express'),app=express(),router=express[a0_0x4f4be0(0x1ed)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x4f4be0(0x215)),auth=require(a0_0x4f4be0(0x213)),users=require(a0_0x4f4be0(0x20b)),excelJS=require(a0_0x4f4be0(0x219)),xlsx=require('xlsx'),multer=require(a0_0x4f4be0(0x21a)),mongoose=require(a0_0x4f4be0(0x22a));router[a0_0x4f4be0(0x1e9)](a0_0x4f4be0(0x212),auth,async(_0x52938a,_0x2b26f5)=>{var _0x3156af=a0_0x4f4be0;try{const _0x3b70e9=await master_shop['find'](),_0x4a64d3=_0x52938a[_0x3156af(0x234)],_0x4c7eb9=await profile['findOne']({'email':_0x4a64d3['email']}),_0x210252=await staff['findOne']({'email':_0x4a64d3[_0x3156af(0x200)],'type_of_acc_cat':'2'});let _0x1418f1=[];_0x210252!=null&&(_0x1418f1=await sales_order[_0x3156af(0x222)]({'sales_staff_id':_0x210252[_0x3156af(0x1fa)]}));if(_0x3b70e9[0x0][_0x3156af(0x217)]==_0x3156af(0x1e3))var _0x40d755=users[_0x3156af(0x207)];else{if(_0x3b70e9[0x0][_0x3156af(0x217)]==_0x3156af(0x1e8))var _0x40d755=users['Hindi'];else{if(_0x3b70e9[0x0][_0x3156af(0x217)]==_0x3156af(0x20f))var _0x40d755=users[_0x3156af(0x20f)];else{if(_0x3b70e9[0x0][_0x3156af(0x217)]==_0x3156af(0x1ee))var _0x40d755=users[_0x3156af(0x1ee)];else{if(_0x3b70e9[0x0][_0x3156af(0x217)]==_0x3156af(0x221))var _0x40d755=users[_0x3156af(0x221)];else{if(_0x3b70e9[0x0][_0x3156af(0x217)]==_0x3156af(0x1f1))var _0x40d755=users[_0x3156af(0x20e)];else{if(_0x3b70e9[0x0][_0x3156af(0x217)]==_0x3156af(0x206))var _0x40d755=users[_0x3156af(0x206)];else{if(_0x3b70e9[0x0][_0x3156af(0x217)]==_0x3156af(0x1f5))var _0x40d755=users[_0x3156af(0x1f4)];}}}}}}}_0x2b26f5['render'](_0x3156af(0x1ea),{'success':_0x52938a[_0x3156af(0x228)]('success'),'errors':_0x52938a[_0x3156af(0x228)](_0x3156af(0x1f3)),'master_shop':_0x3b70e9,'profile':_0x4c7eb9,'role':_0x4a64d3,'language':_0x40d755,'sales_mine':_0x1418f1,'staff_arr':_0x210252});}catch(_0x1d95fb){console[_0x3156af(0x1f8)](_0x1d95fb);}}),router[a0_0x4f4be0(0x1e9)]('/view/:id',auth,async(_0xbc763b,_0x45bb1d)=>{var _0x48256d=a0_0x4f4be0;try{const _0x30358a=await master_shop['find'](),_0x58975e=_0xbc763b[_0x48256d(0x234)],_0xdf3742=await profile[_0x48256d(0x1fb)]({'email':_0x58975e[_0x48256d(0x200)]}),_0x3a3d45=await staff['findOne']({'email':_0x58975e['email']}),_0x2af17f=await customer[_0x48256d(0x222)]({'agent_id':_0x3a3d45[_0x48256d(0x1fa)]}),_0x463d8a=_0xbc763b[_0x48256d(0x201)]['id'],_0x25c257=await sales_sa[_0x48256d(0x20c)](_0x463d8a);if(_0x30358a[0x0][_0x48256d(0x217)]==_0x48256d(0x1e3))var _0x2c1e1a=users[_0x48256d(0x207)];else{if(_0x30358a[0x0][_0x48256d(0x217)]==_0x48256d(0x1e8))var _0x2c1e1a=users[_0x48256d(0x1e8)];else{if(_0x30358a[0x0]['language']==_0x48256d(0x20f))var _0x2c1e1a=users[_0x48256d(0x20f)];else{if(_0x30358a[0x0]['language']==_0x48256d(0x1ee))var _0x2c1e1a=users['Spanish'];else{if(_0x30358a[0x0][_0x48256d(0x217)]=='French')var _0x2c1e1a=users[_0x48256d(0x221)];else{if(_0x30358a[0x0][_0x48256d(0x217)]==_0x48256d(0x1f1))var _0x2c1e1a=users[_0x48256d(0x20e)];else{if(_0x30358a[0x0]['language']==_0x48256d(0x206))var _0x2c1e1a=users[_0x48256d(0x206)];else{if(_0x30358a[0x0][_0x48256d(0x217)]==_0x48256d(0x1f5))var _0x2c1e1a=users[_0x48256d(0x1f4)];}}}}}}}_0x45bb1d[_0x48256d(0x223)](_0x48256d(0x21c),{'success':_0xbc763b[_0x48256d(0x228)]('success'),'errors':_0xbc763b[_0x48256d(0x228)](_0x48256d(0x1f3)),'master_shop':_0x30358a,'profile':_0xdf3742,'role':_0x58975e,'language':_0x2c1e1a,'customer':_0x2af17f,'sales_sa':_0x25c257,'staff_arr':_0x3a3d45});}catch(_0x18947c){console['log'](_0x18947c);}}),router[a0_0x4f4be0(0x227)](a0_0x4f4be0(0x216),auth,async(_0x3c25f5,_0x2d633d)=>{var _0x325628=a0_0x4f4be0;try{const _0x29cfe7=_0x3c25f5[_0x325628(0x201)]['id'],_0x3e7eee=await sales_sa[_0x325628(0x20c)](_0x29cfe7),{collection:_0x44b9a9,invoicemoney:_0x33130c,collectionnumber:_0x219e1b,typeofpayment:_0x49edae,cashdate:_0x494272,id_detl:_0x1eb07e}=_0x3c25f5[_0x325628(0x229)];_0x2d633d['json'](_0x3e7eee);return;if(typeof _0x1eb07e==_0x325628(0x21f))var _0x4bc77a=[_0x3c25f5['body'][_0x325628(0x209)]],_0x278313=[_0x3c25f5[_0x325628(0x229)]['ewt']],_0x4e6d65=[_0x3c25f5[_0x325628(0x229)][_0x325628(0x1f2)]],_0x56712f=[_0x3c25f5[_0x325628(0x229)][_0x325628(0x231)]],_0x324e34=[_0x3c25f5[_0x325628(0x229)][_0x325628(0x214)]],_0x3bd366=[_0x3c25f5[_0x325628(0x229)][_0x325628(0x22d)]],_0x6aa15=[_0x3c25f5[_0x325628(0x229)][_0x325628(0x204)]];else var _0x4bc77a=[..._0x3c25f5[_0x325628(0x229)]['id_detl']],_0x278313=[..._0x3c25f5[_0x325628(0x229)]['ewt']],_0x4e6d65=[..._0x3c25f5[_0x325628(0x229)][_0x325628(0x1f2)]],_0x56712f=[..._0x3c25f5[_0x325628(0x229)][_0x325628(0x231)]],_0x324e34=[..._0x3c25f5[_0x325628(0x229)][_0x325628(0x214)]],_0x3bd366=[..._0x3c25f5['body'][_0x325628(0x22d)]],_0x6aa15=[..._0x3c25f5[_0x325628(0x229)]['totalNewPrice']];const _0x24a7bf=_0x4bc77a[_0x325628(0x1eb)](_0x3d4616=>{return _0x3d4616={'id_detl':_0x3d4616};});_0x278313[_0x325628(0x1e6)]((_0x492b65,_0x56ce1e)=>{_0x24a7bf[_0x56ce1e]['ewt']=_0x492b65;}),_0x4e6d65['forEach']((_0x2229ff,_0x216c90)=>{var _0x15601e=_0x325628;_0x24a7bf[_0x216c90][_0x15601e(0x1f2)]=_0x2229ff;}),_0x56712f[_0x325628(0x1e6)]((_0x1fd737,_0x235292)=>{var _0x477d9b=_0x325628;_0x24a7bf[_0x235292][_0x477d9b(0x231)]=_0x1fd737;}),_0x324e34['forEach']((_0x40677f,_0x3f8abf)=>{var _0x4d12b8=_0x325628;_0x24a7bf[_0x3f8abf][_0x4d12b8(0x214)]=_0x40677f;}),_0x3bd366['forEach']((_0x22be62,_0x121d17)=>{var _0x513e1f=_0x325628;_0x24a7bf[_0x121d17][_0x513e1f(0x22d)]=_0x22be62;}),_0x6aa15[_0x325628(0x1e6)]((_0x1c1308,_0x11d9fe)=>{var _0x8d5f1d=_0x325628;_0x24a7bf[_0x11d9fe][_0x8d5f1d(0x1fc)]=_0x1c1308;}),_0x3e7eee[_0x325628(0x1f0)]=_0x44b9a9,_0x3e7eee[_0x325628(0x230)]=_0x219e1b,_0x3e7eee[_0x325628(0x1fd)]=_0x49edae,_0x3e7eee[_0x325628(0x226)]=_0x494272,_0x3e7eee[_0x325628(0x22e)]=_0x325628(0x1e5);const _0x58dd4d=await _0x3e7eee[_0x325628(0x20a)]();if(_0x58dd4d['paid']==_0x325628(0x1e5))for(let _0x428330=0x0;_0x428330<=_0x24a7bf[_0x325628(0x22f)]-0x1;_0x428330++){const _0x20b090=_0x24a7bf[_0x428330],_0x5cc976=mongoose[_0x325628(0x1ff)][_0x325628(0x21b)];console[_0x325628(0x1f8)](_0x20b090);const _0x58e079=await sales_sa[_0x325628(0x1e7)]({'_id':_0x5cc976(_0x29cfe7[_0x325628(0x21e)]()),'sale_product._id':_0x5cc976(_0x20b090[_0x325628(0x209)][_0x325628(0x21e)]())},{'$set':{'sale_product.$.ewt':_0x20b090[_0x325628(0x225)],'sale_product.$.spwp':_0x20b090[_0x325628(0x1f2)],'sale_product.$.fin_disc':_0x20b090[_0x325628(0x231)],'sale_product.$.vol_deals':_0x20b090[_0x325628(0x214)],'sale_product.$.bo_disc':_0x20b090[_0x325628(0x22d)],'sale_product.$.totalprice':parseFloat(_0x20b090[_0x325628(0x1fc)])}});}_0x3c25f5[_0x325628(0x228)](_0x325628(0x232),'Collection\x20Update\x20successfully'),_0x2d633d[_0x325628(0x1f6)]('/collection/view/'+_0x29cfe7);}catch(_0x2e0ca0){console[_0x325628(0x1f8)](_0x2e0ca0);}}),router[a0_0x4f4be0(0x1e9)](a0_0x4f4be0(0x1e0),auth,async(_0x447614,_0x3620d7)=>{var _0x343c5c=a0_0x4f4be0;try{const _0x525915=await master_shop[_0x343c5c(0x222)](),_0x1df359=_0x447614['user'],_0x29a1ce=await profile[_0x343c5c(0x1fb)]({'email':_0x1df359[_0x343c5c(0x200)]}),_0x16333e=await staff[_0x343c5c(0x1fb)]({'email':_0x1df359['email'],'type_of_acc_cat':'2'});let _0x3c2dc1=[];_0x16333e!=null&&(_0x3c2dc1=await sales_order['find']({'sales_staff_id':_0x16333e[_0x343c5c(0x1fa)]}));console['log'](_0x3c2dc1);if(_0x525915[0x0]['language']=='English\x20(US)')var _0x527081=users[_0x343c5c(0x207)];else{if(_0x525915[0x0][_0x343c5c(0x217)]==_0x343c5c(0x1e8))var _0x527081=users['Hindi'];else{if(_0x525915[0x0][_0x343c5c(0x217)]==_0x343c5c(0x20f))var _0x527081=users['German'];else{if(_0x525915[0x0][_0x343c5c(0x217)]==_0x343c5c(0x1ee))var _0x527081=users[_0x343c5c(0x1ee)];else{if(_0x525915[0x0][_0x343c5c(0x217)]==_0x343c5c(0x221))var _0x527081=users[_0x343c5c(0x221)];else{if(_0x525915[0x0][_0x343c5c(0x217)]==_0x343c5c(0x1f1))var _0x527081=users[_0x343c5c(0x20e)];else{if(_0x525915[0x0][_0x343c5c(0x217)]=='Chinese')var _0x527081=users[_0x343c5c(0x206)];else{if(_0x525915[0x0][_0x343c5c(0x217)]=='Arabic\x20(ae)')var _0x527081=users[_0x343c5c(0x1f4)];}}}}}}}_0x3620d7[_0x343c5c(0x223)](_0x343c5c(0x203),{'success':_0x447614[_0x343c5c(0x228)]('success'),'errors':_0x447614[_0x343c5c(0x228)](_0x343c5c(0x1f3)),'master_shop':_0x525915,'profile':_0x29a1ce,'role':_0x1df359,'language':_0x527081,'sales_mine':_0x3c2dc1,'staff_arr':_0x16333e});}catch(_0x1159c9){console[_0x343c5c(0x1f8)](_0x1159c9);}}),router[a0_0x4f4be0(0x1e9)](a0_0x4f4be0(0x233),auth,async(_0x35c3b3,_0x297899)=>{var _0x15bada=a0_0x4f4be0;try{const _0x5c057e=await master_shop[_0x15bada(0x222)](),_0x34adfa=_0x35c3b3[_0x15bada(0x234)],_0x59de68=await profile['findOne']({'email':_0x34adfa[_0x15bada(0x200)]}),_0x4b0ba4=await staff[_0x15bada(0x1fb)]({'email':_0x34adfa[_0x15bada(0x200)]}),_0x5408c0=await customer['find']({'agent_id':_0x4b0ba4['_id']}),_0x154d75=_0x35c3b3['params']['id'],_0x48707c=await sales_order['findById'](_0x154d75);if(_0x5c057e[0x0][_0x15bada(0x217)]==_0x15bada(0x1e3))var _0x2adf44=users[_0x15bada(0x207)];else{if(_0x5c057e[0x0]['language']==_0x15bada(0x1e8))var _0x2adf44=users[_0x15bada(0x1e8)];else{if(_0x5c057e[0x0]['language']==_0x15bada(0x20f))var _0x2adf44=users[_0x15bada(0x20f)];else{if(_0x5c057e[0x0][_0x15bada(0x217)]==_0x15bada(0x1ee))var _0x2adf44=users['Spanish'];else{if(_0x5c057e[0x0][_0x15bada(0x217)]==_0x15bada(0x221))var _0x2adf44=users[_0x15bada(0x221)];else{if(_0x5c057e[0x0][_0x15bada(0x217)]==_0x15bada(0x1f1))var _0x2adf44=users[_0x15bada(0x20e)];else{if(_0x5c057e[0x0][_0x15bada(0x217)]==_0x15bada(0x206))var _0x2adf44=users['Chinese'];else{if(_0x5c057e[0x0][_0x15bada(0x217)]==_0x15bada(0x1f5))var _0x2adf44=users[_0x15bada(0x1f4)];}}}}}}}_0x297899[_0x15bada(0x223)]('view_collections_sox',{'success':_0x35c3b3[_0x15bada(0x228)](_0x15bada(0x232)),'errors':_0x35c3b3['flash'](_0x15bada(0x1f3)),'master_shop':_0x5c057e,'profile':_0x59de68,'role':_0x34adfa,'language':_0x2adf44,'customer':_0x5408c0,'sales_sa':_0x48707c});}catch(_0x350ded){console[_0x15bada(0x1f8)](_0x350ded);}}),router['get']('/view_x',auth,async(_0x12fc35,_0x473282)=>{var _0x429fee=a0_0x4f4be0;try{const _0x1fe000=await master_shop[_0x429fee(0x222)](),_0xbf1ac=_0x12fc35[_0x429fee(0x234)],_0x281c3b=await profile[_0x429fee(0x1fb)]({'email':_0xbf1ac[_0x429fee(0x200)]}),_0x326f1d=await staff[_0x429fee(0x1fb)]({'email':_0xbf1ac[_0x429fee(0x200)],'type_of_acc_cat':'1'});let _0xa39198=[];_0x326f1d!=null&&(_0xa39198=await sales_sa['find']({'sales_staff_id':_0x326f1d[_0x429fee(0x1fa)]}));if(_0x1fe000[0x0]['language']==_0x429fee(0x1e3))var _0x454023=users[_0x429fee(0x207)];else{if(_0x1fe000[0x0][_0x429fee(0x217)]==_0x429fee(0x1e8))var _0x454023=users['Hindi'];else{if(_0x1fe000[0x0]['language']=='German')var _0x454023=users[_0x429fee(0x20f)];else{if(_0x1fe000[0x0][_0x429fee(0x217)]==_0x429fee(0x1ee))var _0x454023=users[_0x429fee(0x1ee)];else{if(_0x1fe000[0x0]['language']==_0x429fee(0x221))var _0x454023=users[_0x429fee(0x221)];else{if(_0x1fe000[0x0][_0x429fee(0x217)]=='Portuguese\x20(BR)')var _0x454023=users[_0x429fee(0x20e)];else{if(_0x1fe000[0x0]['language']==_0x429fee(0x206))var _0x454023=users[_0x429fee(0x206)];else{if(_0x1fe000[0x0][_0x429fee(0x217)]==_0x429fee(0x1f5))var _0x454023=users[_0x429fee(0x1f4)];}}}}}}}_0x473282[_0x429fee(0x223)]('collection_xt',{'success':_0x12fc35[_0x429fee(0x228)](_0x429fee(0x232)),'errors':_0x12fc35[_0x429fee(0x228)](_0x429fee(0x1f3)),'master_shop':_0x1fe000,'profile':_0x281c3b,'role':_0xbf1ac,'language':_0x454023,'sales_mine':_0xa39198,'staff_arr':_0x326f1d});}catch(_0xb472bb){console[_0x429fee(0x1f8)](_0xb472bb);}}),router[a0_0x4f4be0(0x1e9)](a0_0x4f4be0(0x202),auth,async(_0xa25af4,_0x2fe62e)=>{var _0x4a9c5e=a0_0x4f4be0;try{const _0x487add=await master_shop['find'](),_0x3b9ac5=_0xa25af4['user'],_0x4b5201=await profile[_0x4a9c5e(0x1fb)]({'email':_0x3b9ac5[_0x4a9c5e(0x200)]}),_0x49914b=await staff[_0x4a9c5e(0x1fb)]({'email':_0x3b9ac5[_0x4a9c5e(0x200)]}),_0x23229e=await customer['find']({'agent_id':_0x49914b[_0x4a9c5e(0x1fa)]}),_0x44ce77=_0xa25af4['params']['id'],_0x18f21f=await sales_sa[_0x4a9c5e(0x20c)](_0x44ce77);if(_0x487add[0x0][_0x4a9c5e(0x217)]=='English\x20(US)')var _0x545f82=users[_0x4a9c5e(0x207)];else{if(_0x487add[0x0][_0x4a9c5e(0x217)]==_0x4a9c5e(0x1e8))var _0x545f82=users[_0x4a9c5e(0x1e8)];else{if(_0x487add[0x0][_0x4a9c5e(0x217)]=='German')var _0x545f82=users[_0x4a9c5e(0x20f)];else{if(_0x487add[0x0][_0x4a9c5e(0x217)]=='Spanish')var _0x545f82=users['Spanish'];else{if(_0x487add[0x0][_0x4a9c5e(0x217)]=='French')var _0x545f82=users[_0x4a9c5e(0x221)];else{if(_0x487add[0x0][_0x4a9c5e(0x217)]==_0x4a9c5e(0x1f1))var _0x545f82=users['Portuguese'];else{if(_0x487add[0x0][_0x4a9c5e(0x217)]==_0x4a9c5e(0x206))var _0x545f82=users[_0x4a9c5e(0x206)];else{if(_0x487add[0x0]['language']=='Arabic\x20(ae)')var _0x545f82=users[_0x4a9c5e(0x1f4)];}}}}}}}_0x2fe62e[_0x4a9c5e(0x223)](_0x4a9c5e(0x211),{'success':_0xa25af4[_0x4a9c5e(0x228)](_0x4a9c5e(0x232)),'errors':_0xa25af4['flash'](_0x4a9c5e(0x1f3)),'master_shop':_0x487add,'profile':_0x4b5201,'role':_0x3b9ac5,'language':_0x545f82,'customer':_0x23229e,'sales_sa':_0x18f21f,'staff_arr':_0x49914b});}catch(_0x5904fd){console[_0x4a9c5e(0x1f8)](_0x5904fd);}}),router[a0_0x4f4be0(0x227)](a0_0x4f4be0(0x202),auth,async(_0x23d96e,_0x1030e9)=>{var _0x52071f=a0_0x4f4be0;try{const _0x21af73=_0x23d96e['params']['id'],_0x343784=await sales_sa[_0x52071f(0x20c)](_0x21af73),{collection:_0x51a43c,invoicemoney:_0xbf7040,collectionnumber:_0x186579,typeofpayment:_0x302697,cashdate:_0x21373f,id_detl:_0x2cc702}=_0x23d96e[_0x52071f(0x229)];if(typeof _0x2cc702==_0x52071f(0x21f))var _0x4232dd=[_0x23d96e[_0x52071f(0x229)][_0x52071f(0x209)]],_0x5bbf30=[_0x23d96e[_0x52071f(0x229)][_0x52071f(0x225)]],_0x28c4dd=[_0x23d96e['body'][_0x52071f(0x1f2)]],_0x231e2d=[_0x23d96e[_0x52071f(0x229)][_0x52071f(0x231)]],_0x41b927=[_0x23d96e['body'][_0x52071f(0x214)]],_0x20365f=[_0x23d96e[_0x52071f(0x229)][_0x52071f(0x22d)]],_0x132ccb=[_0x23d96e['body']['totalNewPrice']];else var _0x4232dd=[..._0x23d96e[_0x52071f(0x229)][_0x52071f(0x209)]],_0x5bbf30=[..._0x23d96e[_0x52071f(0x229)][_0x52071f(0x225)]],_0x28c4dd=[..._0x23d96e[_0x52071f(0x229)][_0x52071f(0x1f2)]],_0x231e2d=[..._0x23d96e[_0x52071f(0x229)][_0x52071f(0x231)]],_0x41b927=[..._0x23d96e[_0x52071f(0x229)][_0x52071f(0x214)]],_0x20365f=[..._0x23d96e['body'][_0x52071f(0x22d)]],_0x132ccb=[..._0x23d96e[_0x52071f(0x229)][_0x52071f(0x204)]];const _0x22aab2=_0x4232dd[_0x52071f(0x1eb)](_0xf4cacb=>{return _0xf4cacb={'id_detl':_0xf4cacb};});_0x5bbf30[_0x52071f(0x1e6)]((_0x548c2d,_0x386e0f)=>{var _0x515a77=_0x52071f;_0x22aab2[_0x386e0f][_0x515a77(0x225)]=_0x548c2d;}),_0x28c4dd[_0x52071f(0x1e6)]((_0x425964,_0x154e4b)=>{var _0x3391c0=_0x52071f;_0x22aab2[_0x154e4b][_0x3391c0(0x1f2)]=_0x425964;}),_0x231e2d['forEach']((_0xf979b,_0x260a71)=>{var _0x5ad2a2=_0x52071f;_0x22aab2[_0x260a71][_0x5ad2a2(0x231)]=_0xf979b;}),_0x41b927[_0x52071f(0x1e6)]((_0x564aba,_0x2b111c)=>{var _0x2ead06=_0x52071f;_0x22aab2[_0x2b111c][_0x2ead06(0x214)]=_0x564aba;}),_0x20365f['forEach']((_0x2b0a86,_0x51436b)=>{var _0x208bcd=_0x52071f;_0x22aab2[_0x51436b][_0x208bcd(0x22d)]=_0x2b0a86;}),_0x132ccb['forEach']((_0x20a360,_0xe595b9)=>{var _0x34c9ae=_0x52071f;_0x22aab2[_0xe595b9][_0x34c9ae(0x1fc)]=_0x20a360;}),_0x343784[_0x52071f(0x1f0)]=_0x51a43c,_0x343784[_0x52071f(0x230)]=_0x186579,_0x343784[_0x52071f(0x1fd)]=_0x302697,_0x343784['cash_date']=_0x21373f,_0x343784[_0x52071f(0x22e)]='True',_0x343784[_0x52071f(0x208)]='1';const _0x3547c6=await _0x343784[_0x52071f(0x20a)]();if(_0x3547c6[_0x52071f(0x22e)]==_0x52071f(0x1e5))for(let _0x2d3388=0x0;_0x2d3388<=_0x22aab2[_0x52071f(0x22f)]-0x1;_0x2d3388++){const _0x9de76d=_0x22aab2[_0x2d3388],_0x1bd75c=mongoose[_0x52071f(0x1ff)]['ObjectId'];console['log'](_0x9de76d);const _0x1324a3=await sales_sa[_0x52071f(0x1e7)]({'_id':_0x1bd75c(_0x21af73[_0x52071f(0x21e)]()),'sale_product._id':_0x1bd75c(_0x9de76d['id_detl'][_0x52071f(0x21e)]())},{'$set':{'sale_product.$.ewt':_0x9de76d[_0x52071f(0x225)],'sale_product.$.spwp':_0x9de76d[_0x52071f(0x1f2)],'sale_product.$.fin_disc':_0x9de76d[_0x52071f(0x231)],'sale_product.$.vol_deals':_0x9de76d['vol_deals'],'sale_product.$.bo_disc':_0x9de76d['bo_disc'],'sale_product.$.totalprice':parseFloat(_0x9de76d[_0x52071f(0x1fc)])}});}_0x23d96e['flash']('success',_0x52071f(0x22c)),_0x1030e9[_0x52071f(0x1f6)](_0x52071f(0x1e2)+_0x21af73);}catch(_0x1071e1){console['log'](_0x1071e1);}}),router[a0_0x4f4be0(0x1e9)](a0_0x4f4be0(0x1f9),auth,async(_0x4668a6,_0xe13af)=>{var _0x4dc526=a0_0x4f4be0;try{const _0x4ff2ac=await master_shop[_0x4dc526(0x222)](),_0x5ab7ac=_0x4668a6[_0x4dc526(0x234)],_0x1cf064=await profile[_0x4dc526(0x1fb)]({'email':_0x5ab7ac[_0x4dc526(0x200)]}),_0x3b4373=await staff[_0x4dc526(0x1fb)]({'email':_0x5ab7ac[_0x4dc526(0x200)],'type_of_acc_cat':'1'});let _0x18f0d0=[];_0x3b4373!=null&&(_0x18f0d0=await sales_order[_0x4dc526(0x222)]({'sales_staff_id':_0x3b4373[_0x4dc526(0x1fa)]}));if(_0x4ff2ac[0x0]['language']==_0x4dc526(0x1e3))var _0x1876de=users['English'];else{if(_0x4ff2ac[0x0]['language']==_0x4dc526(0x1e8))var _0x1876de=users[_0x4dc526(0x1e8)];else{if(_0x4ff2ac[0x0][_0x4dc526(0x217)]==_0x4dc526(0x20f))var _0x1876de=users[_0x4dc526(0x20f)];else{if(_0x4ff2ac[0x0][_0x4dc526(0x217)]==_0x4dc526(0x1ee))var _0x1876de=users[_0x4dc526(0x1ee)];else{if(_0x4ff2ac[0x0]['language']=='French')var _0x1876de=users[_0x4dc526(0x221)];else{if(_0x4ff2ac[0x0]['language']==_0x4dc526(0x1f1))var _0x1876de=users['Portuguese'];else{if(_0x4ff2ac[0x0][_0x4dc526(0x217)]==_0x4dc526(0x206))var _0x1876de=users[_0x4dc526(0x206)];else{if(_0x4ff2ac[0x0][_0x4dc526(0x217)]==_0x4dc526(0x1f5))var _0x1876de=users[_0x4dc526(0x1f4)];}}}}}}}_0xe13af[_0x4dc526(0x223)]('collection_so_xt',{'success':_0x4668a6['flash'](_0x4dc526(0x232)),'errors':_0x4668a6[_0x4dc526(0x228)](_0x4dc526(0x1f3)),'master_shop':_0x4ff2ac,'profile':_0x1cf064,'role':_0x5ab7ac,'language':_0x1876de,'sales_mine':_0x18f0d0,'staff_arr':_0x3b4373});}catch(_0x557222){console[_0x4dc526(0x1f8)](_0x557222);}}),router[a0_0x4f4be0(0x1e9)](a0_0x4f4be0(0x210),auth,async(_0x56b2f1,_0x2449c5)=>{var _0x392d5f=a0_0x4f4be0;try{const _0x52b710=await master_shop[_0x392d5f(0x222)](),_0x349e79=_0x56b2f1[_0x392d5f(0x234)],_0x2c6876=await profile['findOne']({'email':_0x349e79[_0x392d5f(0x200)]}),_0x379314=await staff['findOne']({'email':_0x349e79[_0x392d5f(0x200)]}),_0x183643=await customer[_0x392d5f(0x222)]({'agent_id':_0x379314[_0x392d5f(0x1fa)]}),_0x28ea1b=_0x56b2f1[_0x392d5f(0x201)]['id'],_0x5a3ea8=await sales_order[_0x392d5f(0x20c)](_0x28ea1b);if(_0x52b710[0x0][_0x392d5f(0x217)]==_0x392d5f(0x1e3))var _0x4a5e87=users[_0x392d5f(0x207)];else{if(_0x52b710[0x0][_0x392d5f(0x217)]==_0x392d5f(0x1e8))var _0x4a5e87=users[_0x392d5f(0x1e8)];else{if(_0x52b710[0x0][_0x392d5f(0x217)]=='German')var _0x4a5e87=users[_0x392d5f(0x20f)];else{if(_0x52b710[0x0]['language']==_0x392d5f(0x1ee))var _0x4a5e87=users['Spanish'];else{if(_0x52b710[0x0][_0x392d5f(0x217)]==_0x392d5f(0x221))var _0x4a5e87=users['French'];else{if(_0x52b710[0x0]['language']==_0x392d5f(0x1f1))var _0x4a5e87=users[_0x392d5f(0x20e)];else{if(_0x52b710[0x0][_0x392d5f(0x217)]==_0x392d5f(0x206))var _0x4a5e87=users[_0x392d5f(0x206)];else{if(_0x52b710[0x0][_0x392d5f(0x217)]==_0x392d5f(0x1f5))var _0x4a5e87=users[_0x392d5f(0x1f4)];}}}}}}}_0x2449c5[_0x392d5f(0x223)]('view_collections_so_xt',{'success':_0x56b2f1[_0x392d5f(0x228)](_0x392d5f(0x232)),'errors':_0x56b2f1[_0x392d5f(0x228)]('errors'),'master_shop':_0x52b710,'profile':_0x2c6876,'role':_0x349e79,'language':_0x4a5e87,'customer':_0x183643,'sales_sa':_0x5a3ea8,'staff_arr':_0x379314});}catch(_0x3744a7){console[_0x392d5f(0x1f8)](_0x3744a7);}}),router['post'](a0_0x4f4be0(0x210),auth,async(_0x259aa8,_0x15e335)=>{var _0x5c50c9=a0_0x4f4be0;try{const _0x5544d1=_0x259aa8['params']['id'],_0x1fa45f=await sales_order['findById'](_0x5544d1),{collection:_0x52a24e,invoicemoney:_0x251988,collectionnumber:_0x2888fc,typeofpayment:_0xe8db70,cashdate:_0x325b44,id_detl:_0x164327}=_0x259aa8['body'];_0x1fa45f[_0x5c50c9(0x1f0)]=_0x52a24e,_0x1fa45f[_0x5c50c9(0x1fd)]=_0xe8db70,_0x1fa45f['cash_date']=_0x325b44,_0x1fa45f['paid']=_0x5c50c9(0x1e5),_0x1fa45f[_0x5c50c9(0x208)]='1';const _0xce0eea=await _0x1fa45f['save']();_0x259aa8['flash']('success',_0x5c50c9(0x22c)),_0x15e335['redirect'](_0x5c50c9(0x1ec)+_0x5544d1);}catch(_0x1c5ef5){console[_0x5c50c9(0x1f8)](_0x1c5ef5);}}),module[a0_0x4f4be0(0x205)]=router;