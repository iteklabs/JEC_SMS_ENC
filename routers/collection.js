var a0_0x4556c0=a0_0x185c;function a0_0x185c(_0x449b7c,_0x333cc1){var _0x5910c2=a0_0x5910();return a0_0x185c=function(_0x185c2c,_0x209000){_0x185c2c=_0x185c2c-0xd8;var _0x29ce83=_0x5910c2[_0x185c2c];return _0x29ce83;},a0_0x185c(_0x449b7c,_0x333cc1);}(function(_0x6c75e6,_0x26cac5){var _0x15d528=a0_0x185c,_0x41805c=_0x6c75e6();while(!![]){try{var _0x50a5a0=parseInt(_0x15d528(0x124))/0x1*(-parseInt(_0x15d528(0xff))/0x2)+parseInt(_0x15d528(0x116))/0x3*(-parseInt(_0x15d528(0xf2))/0x4)+parseInt(_0x15d528(0xfb))/0x5*(parseInt(_0x15d528(0x109))/0x6)+parseInt(_0x15d528(0x120))/0x7*(-parseInt(_0x15d528(0x11a))/0x8)+-parseInt(_0x15d528(0x118))/0x9+parseInt(_0x15d528(0xe4))/0xa*(-parseInt(_0x15d528(0x11c))/0xb)+parseInt(_0x15d528(0x128))/0xc;if(_0x50a5a0===_0x26cac5)break;else _0x41805c['push'](_0x41805c['shift']());}catch(_0xf66fd1){_0x41805c['push'](_0x41805c['shift']());}}}(a0_0x5910,0xd1871));const express=require(a0_0x4556c0(0xe9)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x4556c0(0x105)),auth=require(a0_0x4556c0(0x114)),users=require(a0_0x4556c0(0x10a)),excelJS=require('exceljs'),xlsx=require('xlsx'),multer=require(a0_0x4556c0(0xfe)),mongoose=require(a0_0x4556c0(0x108));router[a0_0x4556c0(0xe7)](a0_0x4556c0(0x12a),auth,async(_0x233535,_0xf3d133)=>{var _0x185ef0=a0_0x4556c0;try{const _0xe02359=await master_shop['find'](),_0xda975=_0x233535['user'],_0x5b8f79=await profile[_0x185ef0(0xec)]({'email':_0xda975['email']}),_0x551726=await staff[_0x185ef0(0xec)]({'email':_0xda975[_0x185ef0(0x10e)],'type_of_acc_cat':'2'});let _0x38a7fc=[];_0x551726!=null&&(_0x38a7fc=await sales_order[_0x185ef0(0xed)]({'sales_staff_id':_0x551726[_0x185ef0(0x122)]}));if(_0xe02359[0x0][_0x185ef0(0xe6)]==_0x185ef0(0xf8))var _0x317e5b=users[_0x185ef0(0x101)];else{if(_0xe02359[0x0][_0x185ef0(0xe6)]=='Hindi')var _0x317e5b=users[_0x185ef0(0xf1)];else{if(_0xe02359[0x0]['language']==_0x185ef0(0x11e))var _0x317e5b=users['German'];else{if(_0xe02359[0x0][_0x185ef0(0xe6)]==_0x185ef0(0x11d))var _0x317e5b=users[_0x185ef0(0x11d)];else{if(_0xe02359[0x0][_0x185ef0(0xe6)]=='French')var _0x317e5b=users[_0x185ef0(0xdb)];else{if(_0xe02359[0x0]['language']==_0x185ef0(0x10c))var _0x317e5b=users[_0x185ef0(0x12c)];else{if(_0xe02359[0x0][_0x185ef0(0xe6)]==_0x185ef0(0xdd))var _0x317e5b=users[_0x185ef0(0xdd)];else{if(_0xe02359[0x0]['language']==_0x185ef0(0xfd))var _0x317e5b=users[_0x185ef0(0xea)];}}}}}}}_0xf3d133[_0x185ef0(0xda)](_0x185ef0(0x107),{'success':_0x233535[_0x185ef0(0xd9)](_0x185ef0(0x129)),'errors':_0x233535[_0x185ef0(0xd9)](_0x185ef0(0xf0)),'master_shop':_0xe02359,'profile':_0x5b8f79,'role':_0xda975,'language':_0x317e5b,'sales_mine':_0x38a7fc,'staff_arr':_0x551726});}catch(_0x34956){console['log'](_0x34956);}}),router[a0_0x4556c0(0xe7)](a0_0x4556c0(0x125),auth,async(_0x4e0ca9,_0x56687b)=>{var _0x13c290=a0_0x4556c0;try{const _0x5aab3f=await master_shop[_0x13c290(0xed)](),_0x3eef27=_0x4e0ca9['user'],_0x16a285=await profile[_0x13c290(0xec)]({'email':_0x3eef27[_0x13c290(0x10e)]}),_0x3dc1fd=await staff['findOne']({'email':_0x3eef27[_0x13c290(0x10e)]}),_0x379faa=await customer[_0x13c290(0xed)]({'agent_id':_0x3dc1fd[_0x13c290(0x122)]}),_0x109843=_0x4e0ca9[_0x13c290(0xe0)]['id'],_0x751e26=await sales_sa['findById'](_0x109843);if(_0x5aab3f[0x0][_0x13c290(0xe6)]==_0x13c290(0xf8))var _0x251ea2=users[_0x13c290(0x101)];else{if(_0x5aab3f[0x0][_0x13c290(0xe6)]==_0x13c290(0xf1))var _0x251ea2=users[_0x13c290(0xf1)];else{if(_0x5aab3f[0x0][_0x13c290(0xe6)]==_0x13c290(0x11e))var _0x251ea2=users[_0x13c290(0x11e)];else{if(_0x5aab3f[0x0][_0x13c290(0xe6)]==_0x13c290(0x11d))var _0x251ea2=users[_0x13c290(0x11d)];else{if(_0x5aab3f[0x0]['language']==_0x13c290(0xdb))var _0x251ea2=users['French'];else{if(_0x5aab3f[0x0][_0x13c290(0xe6)]==_0x13c290(0x10c))var _0x251ea2=users[_0x13c290(0x12c)];else{if(_0x5aab3f[0x0]['language']==_0x13c290(0xdd))var _0x251ea2=users[_0x13c290(0xdd)];else{if(_0x5aab3f[0x0]['language']==_0x13c290(0xfd))var _0x251ea2=users[_0x13c290(0xea)];}}}}}}}_0x56687b[_0x13c290(0xda)](_0x13c290(0x10b),{'success':_0x4e0ca9[_0x13c290(0xd9)](_0x13c290(0x129)),'errors':_0x4e0ca9['flash'](_0x13c290(0xf0)),'master_shop':_0x5aab3f,'profile':_0x16a285,'role':_0x3eef27,'language':_0x251ea2,'customer':_0x379faa,'sales_sa':_0x751e26,'staff_arr':_0x3dc1fd});}catch(_0x157a2e){console['log'](_0x157a2e);}}),router[a0_0x4556c0(0x106)]('/view/:id',auth,async(_0x4b3ce0,_0x143272)=>{var _0x48140e=a0_0x4556c0;try{const _0xd98833=_0x4b3ce0[_0x48140e(0xe0)]['id'],_0x2fce49=await sales_sa[_0x48140e(0x121)](_0xd98833),{collection:_0x45e3ae,invoicemoney:_0x49a32f,collectionnumber:_0x27cd4d,typeofpayment:_0x44c801,cashdate:_0x2b3b71,id_detl:_0x3e985c}=_0x4b3ce0[_0x48140e(0x11b)];_0x143272['json'](_0x2fce49);return;if(typeof _0x3e985c==_0x48140e(0x119))var _0x1a1512=[_0x4b3ce0[_0x48140e(0x11b)][_0x48140e(0xef)]],_0x3f9108=[_0x4b3ce0[_0x48140e(0x11b)][_0x48140e(0x12b)]],_0x261d72=[_0x4b3ce0[_0x48140e(0x11b)][_0x48140e(0x126)]],_0x212026=[_0x4b3ce0[_0x48140e(0x11b)]['fin_disc']],_0x586dda=[_0x4b3ce0[_0x48140e(0x11b)]['vol_deals']],_0x36af14=[_0x4b3ce0[_0x48140e(0x11b)][_0x48140e(0xdf)]],_0x1d0089=[_0x4b3ce0[_0x48140e(0x11b)][_0x48140e(0x117)]];else var _0x1a1512=[..._0x4b3ce0[_0x48140e(0x11b)][_0x48140e(0xef)]],_0x3f9108=[..._0x4b3ce0[_0x48140e(0x11b)][_0x48140e(0x12b)]],_0x261d72=[..._0x4b3ce0[_0x48140e(0x11b)]['spwp']],_0x212026=[..._0x4b3ce0[_0x48140e(0x11b)][_0x48140e(0x127)]],_0x586dda=[..._0x4b3ce0[_0x48140e(0x11b)]['vol_deals']],_0x36af14=[..._0x4b3ce0[_0x48140e(0x11b)][_0x48140e(0xdf)]],_0x1d0089=[..._0x4b3ce0['body'][_0x48140e(0x117)]];const _0x2f1a75=_0x1a1512['map'](_0x174df8=>{return _0x174df8={'id_detl':_0x174df8};});_0x3f9108['forEach']((_0x50cad3,_0x4dd218)=>{var _0xd80eec=_0x48140e;_0x2f1a75[_0x4dd218][_0xd80eec(0x12b)]=_0x50cad3;}),_0x261d72[_0x48140e(0x104)]((_0x1a5cfd,_0xe0ee4e)=>{var _0x27c687=_0x48140e;_0x2f1a75[_0xe0ee4e][_0x27c687(0x126)]=_0x1a5cfd;}),_0x212026[_0x48140e(0x104)]((_0x75555c,_0x15a466)=>{_0x2f1a75[_0x15a466]['fin_disc']=_0x75555c;}),_0x586dda[_0x48140e(0x104)]((_0x2f0521,_0x571b12)=>{_0x2f1a75[_0x571b12]['vol_deals']=_0x2f0521;}),_0x36af14[_0x48140e(0x104)]((_0x1eb7f1,_0x543d7d)=>{var _0x784494=_0x48140e;_0x2f1a75[_0x543d7d][_0x784494(0xdf)]=_0x1eb7f1;}),_0x1d0089['forEach']((_0xaf3163,_0x176a96)=>{var _0x5a3d07=_0x48140e;_0x2f1a75[_0x176a96][_0x5a3d07(0xfa)]=_0xaf3163;}),_0x2fce49[_0x48140e(0xd8)]=_0x45e3ae,_0x2fce49[_0x48140e(0x11f)]=_0x27cd4d,_0x2fce49[_0x48140e(0x123)]=_0x44c801,_0x2fce49['cash_date']=_0x2b3b71,_0x2fce49['paid']='True';const _0x1ce0c1=await _0x2fce49['save']();if(_0x1ce0c1['paid']=='True')for(let _0x339de6=0x0;_0x339de6<=_0x2f1a75['length']-0x1;_0x339de6++){const _0x4c2b7e=_0x2f1a75[_0x339de6],_0x40c2ba=mongoose[_0x48140e(0x111)][_0x48140e(0x112)];console[_0x48140e(0xf7)](_0x4c2b7e);const _0x5a4a30=await sales_sa['updateOne']({'_id':_0x40c2ba(_0xd98833['valueOf']()),'sale_product._id':_0x40c2ba(_0x4c2b7e[_0x48140e(0xef)][_0x48140e(0xee)]())},{'$set':{'sale_product.$.ewt':_0x4c2b7e[_0x48140e(0x12b)],'sale_product.$.spwp':_0x4c2b7e[_0x48140e(0x126)],'sale_product.$.fin_disc':_0x4c2b7e[_0x48140e(0x127)],'sale_product.$.vol_deals':_0x4c2b7e[_0x48140e(0x103)],'sale_product.$.bo_disc':_0x4c2b7e[_0x48140e(0xdf)],'sale_product.$.totalprice':parseFloat(_0x4c2b7e['totalcollection'])}});}_0x4b3ce0[_0x48140e(0xd9)](_0x48140e(0x129),_0x48140e(0xfc)),_0x143272['redirect']('/collection/view/'+_0xd98833);}catch(_0x4c43d1){console[_0x48140e(0xf7)](_0x4c43d1);}}),router[a0_0x4556c0(0xe7)]('/x_so',auth,async(_0x3d1c88,_0x3ed72f)=>{var _0x80c38f=a0_0x4556c0;try{const _0x3761f1=await master_shop[_0x80c38f(0xed)](),_0x229280=_0x3d1c88['user'],_0x2de4d8=await profile[_0x80c38f(0xec)]({'email':_0x229280[_0x80c38f(0x10e)]}),_0x193a16=await staff['findOne']({'email':_0x229280[_0x80c38f(0x10e)],'type_of_acc_cat':'2'});let _0x3b8883=[];_0x193a16!=null&&(_0x3b8883=await sales_order[_0x80c38f(0xed)]({'sales_staff_id':_0x193a16['_id']}));console[_0x80c38f(0xf7)](_0x3b8883);if(_0x3761f1[0x0]['language']=='English\x20(US)')var _0x5246a4=users[_0x80c38f(0x101)];else{if(_0x3761f1[0x0][_0x80c38f(0xe6)]==_0x80c38f(0xf1))var _0x5246a4=users['Hindi'];else{if(_0x3761f1[0x0][_0x80c38f(0xe6)]==_0x80c38f(0x11e))var _0x5246a4=users['German'];else{if(_0x3761f1[0x0][_0x80c38f(0xe6)]=='Spanish')var _0x5246a4=users[_0x80c38f(0x11d)];else{if(_0x3761f1[0x0][_0x80c38f(0xe6)]==_0x80c38f(0xdb))var _0x5246a4=users['French'];else{if(_0x3761f1[0x0][_0x80c38f(0xe6)]==_0x80c38f(0x10c))var _0x5246a4=users['Portuguese'];else{if(_0x3761f1[0x0]['language']==_0x80c38f(0xdd))var _0x5246a4=users[_0x80c38f(0xdd)];else{if(_0x3761f1[0x0][_0x80c38f(0xe6)]==_0x80c38f(0xfd))var _0x5246a4=users[_0x80c38f(0xea)];}}}}}}}_0x3ed72f[_0x80c38f(0xda)](_0x80c38f(0xe3),{'success':_0x3d1c88[_0x80c38f(0xd9)](_0x80c38f(0x129)),'errors':_0x3d1c88[_0x80c38f(0xd9)](_0x80c38f(0xf0)),'master_shop':_0x3761f1,'profile':_0x2de4d8,'role':_0x229280,'language':_0x5246a4,'sales_mine':_0x3b8883,'staff_arr':_0x193a16});}catch(_0x460ca1){console[_0x80c38f(0xf7)](_0x460ca1);}}),router['get'](a0_0x4556c0(0xf4),auth,async(_0x4a8474,_0x224a2a)=>{var _0xe32ecd=a0_0x4556c0;try{const _0x304456=await master_shop[_0xe32ecd(0xed)](),_0x11e5ea=_0x4a8474[_0xe32ecd(0xe1)],_0x219a78=await profile[_0xe32ecd(0xec)]({'email':_0x11e5ea[_0xe32ecd(0x10e)]}),_0x23ac05=await staff[_0xe32ecd(0xec)]({'email':_0x11e5ea[_0xe32ecd(0x10e)]}),_0x4b8482=await customer[_0xe32ecd(0xed)]({'agent_id':_0x23ac05['_id']}),_0x5d680a=_0x4a8474[_0xe32ecd(0xe0)]['id'],_0x4473ed=await sales_order[_0xe32ecd(0x121)](_0x5d680a);if(_0x304456[0x0][_0xe32ecd(0xe6)]==_0xe32ecd(0xf8))var _0x5749f2=users['English'];else{if(_0x304456[0x0]['language']==_0xe32ecd(0xf1))var _0x5749f2=users[_0xe32ecd(0xf1)];else{if(_0x304456[0x0][_0xe32ecd(0xe6)]==_0xe32ecd(0x11e))var _0x5749f2=users[_0xe32ecd(0x11e)];else{if(_0x304456[0x0][_0xe32ecd(0xe6)]==_0xe32ecd(0x11d))var _0x5749f2=users[_0xe32ecd(0x11d)];else{if(_0x304456[0x0]['language']==_0xe32ecd(0xdb))var _0x5749f2=users[_0xe32ecd(0xdb)];else{if(_0x304456[0x0][_0xe32ecd(0xe6)]==_0xe32ecd(0x10c))var _0x5749f2=users[_0xe32ecd(0x12c)];else{if(_0x304456[0x0][_0xe32ecd(0xe6)]==_0xe32ecd(0xdd))var _0x5749f2=users[_0xe32ecd(0xdd)];else{if(_0x304456[0x0]['language']==_0xe32ecd(0xfd))var _0x5749f2=users[_0xe32ecd(0xea)];}}}}}}}_0x224a2a[_0xe32ecd(0xda)](_0xe32ecd(0x115),{'success':_0x4a8474[_0xe32ecd(0xd9)](_0xe32ecd(0x129)),'errors':_0x4a8474['flash'](_0xe32ecd(0xf0)),'master_shop':_0x304456,'profile':_0x219a78,'role':_0x11e5ea,'language':_0x5749f2,'customer':_0x4b8482,'sales_sa':_0x4473ed});}catch(_0x59a9ce){console['log'](_0x59a9ce);}}),router[a0_0x4556c0(0xe7)]('/view_x',auth,async(_0x28edbc,_0x421914)=>{var _0x591d16=a0_0x4556c0;try{const _0x347a43=await master_shop[_0x591d16(0xed)](),_0x47a251=_0x28edbc[_0x591d16(0xe1)],_0x1729d9=await profile[_0x591d16(0xec)]({'email':_0x47a251[_0x591d16(0x10e)]}),_0x11e906=await staff[_0x591d16(0xec)]({'email':_0x47a251[_0x591d16(0x10e)],'type_of_acc_cat':'1'});let _0xf633a7=[];_0x11e906!=null&&(_0xf633a7=await sales_sa[_0x591d16(0xed)]({'sales_staff_id':_0x11e906['_id']}));if(_0x347a43[0x0][_0x591d16(0xe6)]=='English\x20(US)')var _0x481862=users[_0x591d16(0x101)];else{if(_0x347a43[0x0][_0x591d16(0xe6)]=='Hindi')var _0x481862=users[_0x591d16(0xf1)];else{if(_0x347a43[0x0][_0x591d16(0xe6)]==_0x591d16(0x11e))var _0x481862=users[_0x591d16(0x11e)];else{if(_0x347a43[0x0][_0x591d16(0xe6)]==_0x591d16(0x11d))var _0x481862=users[_0x591d16(0x11d)];else{if(_0x347a43[0x0][_0x591d16(0xe6)]==_0x591d16(0xdb))var _0x481862=users[_0x591d16(0xdb)];else{if(_0x347a43[0x0]['language']==_0x591d16(0x10c))var _0x481862=users[_0x591d16(0x12c)];else{if(_0x347a43[0x0][_0x591d16(0xe6)]==_0x591d16(0xdd))var _0x481862=users[_0x591d16(0xdd)];else{if(_0x347a43[0x0][_0x591d16(0xe6)]=='Arabic\x20(ae)')var _0x481862=users[_0x591d16(0xea)];}}}}}}}_0x421914[_0x591d16(0xda)](_0x591d16(0x113),{'success':_0x28edbc['flash'](_0x591d16(0x129)),'errors':_0x28edbc[_0x591d16(0xd9)](_0x591d16(0xf0)),'master_shop':_0x347a43,'profile':_0x1729d9,'role':_0x47a251,'language':_0x481862,'sales_mine':_0xf633a7,'staff_arr':_0x11e906});}catch(_0x452d2b){console[_0x591d16(0xf7)](_0x452d2b);}}),router[a0_0x4556c0(0xe7)](a0_0x4556c0(0xe2),auth,async(_0x3bbfb8,_0x2dd20d)=>{var _0x235b08=a0_0x4556c0;try{const _0x2c502f=await master_shop[_0x235b08(0xed)](),_0x7d73a9=_0x3bbfb8[_0x235b08(0xe1)],_0x125fde=await profile[_0x235b08(0xec)]({'email':_0x7d73a9[_0x235b08(0x10e)]}),_0x9635bf=await staff['findOne']({'email':_0x7d73a9['email']}),_0x4bf817=await customer['find']({'agent_id':_0x9635bf[_0x235b08(0x122)]}),_0x53087f=_0x3bbfb8[_0x235b08(0xe0)]['id'],_0x4492ec=await sales_sa[_0x235b08(0x121)](_0x53087f);if(_0x2c502f[0x0][_0x235b08(0xe6)]==_0x235b08(0xf8))var _0x1423fc=users[_0x235b08(0x101)];else{if(_0x2c502f[0x0][_0x235b08(0xe6)]==_0x235b08(0xf1))var _0x1423fc=users[_0x235b08(0xf1)];else{if(_0x2c502f[0x0]['language']==_0x235b08(0x11e))var _0x1423fc=users[_0x235b08(0x11e)];else{if(_0x2c502f[0x0][_0x235b08(0xe6)]=='Spanish')var _0x1423fc=users[_0x235b08(0x11d)];else{if(_0x2c502f[0x0][_0x235b08(0xe6)]=='French')var _0x1423fc=users[_0x235b08(0xdb)];else{if(_0x2c502f[0x0][_0x235b08(0xe6)]==_0x235b08(0x10c))var _0x1423fc=users[_0x235b08(0x12c)];else{if(_0x2c502f[0x0][_0x235b08(0xe6)]==_0x235b08(0xdd))var _0x1423fc=users[_0x235b08(0xdd)];else{if(_0x2c502f[0x0]['language']=='Arabic\x20(ae)')var _0x1423fc=users[_0x235b08(0xea)];}}}}}}}_0x2dd20d[_0x235b08(0xda)](_0x235b08(0xf9),{'success':_0x3bbfb8['flash']('success'),'errors':_0x3bbfb8[_0x235b08(0xd9)](_0x235b08(0xf0)),'master_shop':_0x2c502f,'profile':_0x125fde,'role':_0x7d73a9,'language':_0x1423fc,'customer':_0x4bf817,'sales_sa':_0x4492ec,'staff_arr':_0x9635bf});}catch(_0x3b3cd1){console[_0x235b08(0xf7)](_0x3b3cd1);}}),router[a0_0x4556c0(0x106)]('/view_xt/:id',auth,async(_0x2db564,_0x672f1a)=>{var _0x142593=a0_0x4556c0;try{const _0x4f52f9=_0x2db564[_0x142593(0xe0)]['id'],_0x2f2331=await sales_sa[_0x142593(0x121)](_0x4f52f9),{collection:_0x1ee042,invoicemoney:_0x5cfa67,collectionnumber:_0x20f00a,typeofpayment:_0x339bb5,cashdate:_0x288d89,id_detl:_0xea5d31}=_0x2db564['body'];if(typeof _0xea5d31=='string')var _0x134e5a=[_0x2db564['body'][_0x142593(0xef)]],_0x3a09a6=[_0x2db564[_0x142593(0x11b)]['ewt']],_0x5b9c26=[_0x2db564['body'][_0x142593(0x126)]],_0x3890c2=[_0x2db564['body'][_0x142593(0x127)]],_0x5e6e3f=[_0x2db564[_0x142593(0x11b)]['vol_deals']],_0x364d8a=[_0x2db564[_0x142593(0x11b)]['bo_disc']],_0x5724fb=[_0x2db564[_0x142593(0x11b)]['totalNewPrice']];else var _0x134e5a=[..._0x2db564[_0x142593(0x11b)][_0x142593(0xef)]],_0x3a09a6=[..._0x2db564[_0x142593(0x11b)][_0x142593(0x12b)]],_0x5b9c26=[..._0x2db564[_0x142593(0x11b)][_0x142593(0x126)]],_0x3890c2=[..._0x2db564['body'][_0x142593(0x127)]],_0x5e6e3f=[..._0x2db564[_0x142593(0x11b)][_0x142593(0x103)]],_0x364d8a=[..._0x2db564[_0x142593(0x11b)][_0x142593(0xdf)]],_0x5724fb=[..._0x2db564[_0x142593(0x11b)][_0x142593(0x117)]];const _0x370c7f=_0x134e5a['map'](_0x5830a9=>{return _0x5830a9={'id_detl':_0x5830a9};});_0x3a09a6[_0x142593(0x104)]((_0x53941a,_0x275294)=>{var _0x7b0f0=_0x142593;_0x370c7f[_0x275294][_0x7b0f0(0x12b)]=_0x53941a;}),_0x5b9c26[_0x142593(0x104)]((_0x42085a,_0x546618)=>{var _0x1454ec=_0x142593;_0x370c7f[_0x546618][_0x1454ec(0x126)]=_0x42085a;}),_0x3890c2[_0x142593(0x104)]((_0x2ee6ea,_0x453fec)=>{var _0x404709=_0x142593;_0x370c7f[_0x453fec][_0x404709(0x127)]=_0x2ee6ea;}),_0x5e6e3f[_0x142593(0x104)]((_0x77a06a,_0x4875f7)=>{var _0x67e384=_0x142593;_0x370c7f[_0x4875f7][_0x67e384(0x103)]=_0x77a06a;}),_0x364d8a[_0x142593(0x104)]((_0x1f8806,_0x2731fe)=>{var _0x32cfc9=_0x142593;_0x370c7f[_0x2731fe][_0x32cfc9(0xdf)]=_0x1f8806;}),_0x5724fb[_0x142593(0x104)]((_0x481cf8,_0x1ce12c)=>{var _0x24e8d0=_0x142593;_0x370c7f[_0x1ce12c][_0x24e8d0(0xfa)]=_0x481cf8;}),_0x2f2331[_0x142593(0xd8)]=_0x1ee042,_0x2f2331['collectionnumber']=_0x20f00a,_0x2f2331[_0x142593(0x123)]=_0x339bb5,_0x2f2331['cash_date']=_0x288d89,_0x2f2331['paid']=_0x142593(0x102),_0x2f2331[_0x142593(0xf3)]='1';const _0x1aa631=await _0x2f2331[_0x142593(0x10f)]();if(_0x1aa631[_0x142593(0xde)]=='True')for(let _0x5946ad=0x0;_0x5946ad<=_0x370c7f[_0x142593(0xf6)]-0x1;_0x5946ad++){const _0x3521d2=_0x370c7f[_0x5946ad],_0x2d4a61=mongoose[_0x142593(0x111)][_0x142593(0x112)];console[_0x142593(0xf7)](_0x3521d2);const _0x546722=await sales_sa[_0x142593(0xe5)]({'_id':_0x2d4a61(_0x4f52f9[_0x142593(0xee)]()),'sale_product._id':_0x2d4a61(_0x3521d2[_0x142593(0xef)][_0x142593(0xee)]())},{'$set':{'sale_product.$.ewt':_0x3521d2[_0x142593(0x12b)],'sale_product.$.spwp':_0x3521d2[_0x142593(0x126)],'sale_product.$.fin_disc':_0x3521d2[_0x142593(0x127)],'sale_product.$.vol_deals':_0x3521d2[_0x142593(0x103)],'sale_product.$.bo_disc':_0x3521d2[_0x142593(0xdf)],'sale_product.$.totalprice':parseFloat(_0x3521d2[_0x142593(0xfa)])}});}_0x2db564[_0x142593(0xd9)](_0x142593(0x129),_0x142593(0xfc)),_0x672f1a[_0x142593(0xdc)]('/collection/view/'+_0x4f52f9);}catch(_0x5e62c7){console[_0x142593(0xf7)](_0x5e62c7);}}),router[a0_0x4556c0(0xe7)](a0_0x4556c0(0xe8),auth,async(_0x22e027,_0x12647c)=>{var _0x38532f=a0_0x4556c0;try{const _0x46e7a4=await master_shop[_0x38532f(0xed)](),_0x3ab2a0=_0x22e027[_0x38532f(0xe1)],_0x3d3aa0=await profile[_0x38532f(0xec)]({'email':_0x3ab2a0[_0x38532f(0x10e)]}),_0xfdc5d8=await staff[_0x38532f(0xec)]({'email':_0x3ab2a0[_0x38532f(0x10e)],'type_of_acc_cat':'1'});let _0x34403f=[];_0xfdc5d8!=null&&(_0x34403f=await sales_order['find']({'sales_staff_id':_0xfdc5d8['_id']}));if(_0x46e7a4[0x0]['language']==_0x38532f(0xf8))var _0x143940=users[_0x38532f(0x101)];else{if(_0x46e7a4[0x0][_0x38532f(0xe6)]==_0x38532f(0xf1))var _0x143940=users[_0x38532f(0xf1)];else{if(_0x46e7a4[0x0][_0x38532f(0xe6)]==_0x38532f(0x11e))var _0x143940=users[_0x38532f(0x11e)];else{if(_0x46e7a4[0x0]['language']=='Spanish')var _0x143940=users[_0x38532f(0x11d)];else{if(_0x46e7a4[0x0]['language']=='French')var _0x143940=users[_0x38532f(0xdb)];else{if(_0x46e7a4[0x0][_0x38532f(0xe6)]==_0x38532f(0x10c))var _0x143940=users[_0x38532f(0x12c)];else{if(_0x46e7a4[0x0]['language']==_0x38532f(0xdd))var _0x143940=users[_0x38532f(0xdd)];else{if(_0x46e7a4[0x0][_0x38532f(0xe6)]==_0x38532f(0xfd))var _0x143940=users['Arabic'];}}}}}}}_0x12647c[_0x38532f(0xda)](_0x38532f(0xf5),{'success':_0x22e027['flash'](_0x38532f(0x129)),'errors':_0x22e027[_0x38532f(0xd9)]('errors'),'master_shop':_0x46e7a4,'profile':_0x3d3aa0,'role':_0x3ab2a0,'language':_0x143940,'sales_mine':_0x34403f,'staff_arr':_0xfdc5d8});}catch(_0x44070a){console[_0x38532f(0xf7)](_0x44070a);}}),router['get'](a0_0x4556c0(0xeb),auth,async(_0x33177e,_0x11fff4)=>{var _0x30efc8=a0_0x4556c0;try{const _0x226636=await master_shop['find'](),_0x126418=_0x33177e[_0x30efc8(0xe1)],_0x3f6f37=await profile[_0x30efc8(0xec)]({'email':_0x126418[_0x30efc8(0x10e)]}),_0x27d717=await staff[_0x30efc8(0xec)]({'email':_0x126418[_0x30efc8(0x10e)]}),_0x2f114a=await customer['find']({'agent_id':_0x27d717['_id']}),_0x42601e=_0x33177e[_0x30efc8(0xe0)]['id'],_0x23984c=await sales_order[_0x30efc8(0x121)](_0x42601e);if(_0x226636[0x0]['language']=='English\x20(US)')var _0x4c8ca8=users[_0x30efc8(0x101)];else{if(_0x226636[0x0]['language']==_0x30efc8(0xf1))var _0x4c8ca8=users[_0x30efc8(0xf1)];else{if(_0x226636[0x0][_0x30efc8(0xe6)]==_0x30efc8(0x11e))var _0x4c8ca8=users[_0x30efc8(0x11e)];else{if(_0x226636[0x0][_0x30efc8(0xe6)]==_0x30efc8(0x11d))var _0x4c8ca8=users['Spanish'];else{if(_0x226636[0x0][_0x30efc8(0xe6)]==_0x30efc8(0xdb))var _0x4c8ca8=users[_0x30efc8(0xdb)];else{if(_0x226636[0x0][_0x30efc8(0xe6)]==_0x30efc8(0x10c))var _0x4c8ca8=users[_0x30efc8(0x12c)];else{if(_0x226636[0x0]['language']==_0x30efc8(0xdd))var _0x4c8ca8=users[_0x30efc8(0xdd)];else{if(_0x226636[0x0]['language']==_0x30efc8(0xfd))var _0x4c8ca8=users[_0x30efc8(0xea)];}}}}}}}_0x11fff4[_0x30efc8(0xda)](_0x30efc8(0x110),{'success':_0x33177e['flash'](_0x30efc8(0x129)),'errors':_0x33177e[_0x30efc8(0xd9)](_0x30efc8(0xf0)),'master_shop':_0x226636,'profile':_0x3f6f37,'role':_0x126418,'language':_0x4c8ca8,'customer':_0x2f114a,'sales_sa':_0x23984c,'staff_arr':_0x27d717});}catch(_0x46477b){console['log'](_0x46477b);}}),router[a0_0x4556c0(0x106)](a0_0x4556c0(0xeb),auth,async(_0x2925f5,_0x49a7cb)=>{var _0x4dc88d=a0_0x4556c0;try{const _0x353c8d=_0x2925f5['params']['id'],_0x3eb683=await sales_order[_0x4dc88d(0x121)](_0x353c8d),{collection:_0x1efe1f,invoicemoney:_0xd593c5,collectionnumber:_0xa9cfb,typeofpayment:_0x38c06e,cashdate:_0x5a46ee,id_detl:_0x2e1ab5}=_0x2925f5[_0x4dc88d(0x11b)];_0x3eb683['collection_price']=_0x1efe1f,_0x3eb683['type_of_payment']=_0x38c06e,_0x3eb683[_0x4dc88d(0x100)]=_0x5a46ee,_0x3eb683[_0x4dc88d(0xde)]=_0x4dc88d(0x102),_0x3eb683[_0x4dc88d(0xf3)]='1';const _0x1a837b=await _0x3eb683[_0x4dc88d(0x10f)]();_0x2925f5[_0x4dc88d(0xd9)](_0x4dc88d(0x129),_0x4dc88d(0xfc)),_0x49a7cb[_0x4dc88d(0xdc)](_0x4dc88d(0x10d)+_0x353c8d);}catch(_0x44d06c){console[_0x4dc88d(0xf7)](_0x44d06c);}}),module['exports']=router;function a0_0x5910(){var _0x26bf77=['16lyOQsR','typeofprocess','/view_sox/:id','collection_so_xt','length','log','English\x20(US)','view_collections_xt','totalcollection','38635DzxAgC','Collection\x20Update\x20successfully','Arabic\x20(ae)','multer','4WetXPT','cash_date','English','True','vol_deals','forEach','../models/all_models','post','collection','mongoose','852MmTEbx','../public/language/languages.json','view_collections','Portuguese\x20(BR)','/collection/view_so_xt/','email','save','view_collections_so_xt','Types','ObjectId','collection_xt','../middleware/auth','view_collections_sox','21039LvUXZe','totalNewPrice','13534065oqvMva','string','24XyCTsI','body','11qtaMra','Spanish','German','collectionnumber','957649Remukj','findById','_id','type_of_payment','266377uTGRQo','/view/:id','spwp','fin_disc','39741000JSjGAW','success','/view','ewt','Portuguese','collection_price','flash','render','French','redirect','Chinese','paid','bo_disc','params','user','/view_xt/:id','collection_sox','10757470kTYPoS','updateOne','language','get','/so_x','express','Arabic','/view_so_xt/:id','findOne','find','valueOf','id_detl','errors','Hindi'];a0_0x5910=function(){return _0x26bf77;};return a0_0x5910();}