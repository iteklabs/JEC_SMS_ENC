var a0_0x766cf4=a0_0x1f72;function a0_0x1f72(_0x127e97,_0x5e0724){var _0x2bacfe=a0_0x2bac();return a0_0x1f72=function(_0x1f7277,_0x37b360){_0x1f7277=_0x1f7277-0xf5;var _0x2310e2=_0x2bacfe[_0x1f7277];return _0x2310e2;},a0_0x1f72(_0x127e97,_0x5e0724);}(function(_0xa03ba5,_0x276be6){var _0x11f482=a0_0x1f72,_0x54542a=_0xa03ba5();while(!![]){try{var _0x48c551=parseInt(_0x11f482(0x13a))/0x1*(-parseInt(_0x11f482(0xf6))/0x2)+parseInt(_0x11f482(0x100))/0x3+-parseInt(_0x11f482(0x143))/0x4+-parseInt(_0x11f482(0xfa))/0x5*(-parseInt(_0x11f482(0x12f))/0x6)+-parseInt(_0x11f482(0x108))/0x7*(parseInt(_0x11f482(0x135))/0x8)+parseInt(_0x11f482(0x104))/0x9*(parseInt(_0x11f482(0x130))/0xa)+parseInt(_0x11f482(0x11c))/0xb;if(_0x48c551===_0x276be6)break;else _0x54542a['push'](_0x54542a['shift']());}catch(_0x57ba3c){_0x54542a['push'](_0x54542a['shift']());}}}(a0_0x2bac,0xe2634));function a0_0x2bac(){var _0x41eb93=['/view_x','view_collections','7CxaGyB','../public/language/languages.json','Spanish','/view_sox/:id','paid','/collection/view/','multer','collectionnumber','view_collections_so_xt','Hindi','errors','map','body','success','Types','updateOne','cash_date','express','spwp','/view_xt/:id','6815974IAfVYU','length','findById','Portuguese\x20(BR)','log','French','user','email','type_of_payment','forEach','params','findOne','Chinese','/view_so_xt/:id','string','vol_deals','get','/view/:id','../models/all_models','96588JyQsZc','229920sydmFu','ewt','Portuguese','ObjectId','English','6673168hSpEpq','save','mongoose','flash','exceljs','119GrtzgV','typeofprocess','view_collections_sox','bo_disc','_id','True','collection_price','Arabic','json','5477108BvXiUi','Collection\x20Update\x20successfully','collection_sox','totalNewPrice','/x_so','render','exports','totalcollection','English\x20(US)','15128TFrgsu','id_detl','language','find','485gIPEeA','../middleware/auth','/collection/view_so_xt/','Arabic\x20(ae)','fin_disc','German','4100553VQYSMR','redirect','post','valueOf','189mrmfWu','collection_so_xt'];a0_0x2bac=function(){return _0x41eb93;};return a0_0x2bac();}const express=require(a0_0x766cf4(0x119)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x766cf4(0x12e)),auth=require(a0_0x766cf4(0xfb)),users=require(a0_0x766cf4(0x109)),excelJS=require(a0_0x766cf4(0x139)),xlsx=require('xlsx'),multer=require(a0_0x766cf4(0x10e)),mongoose=require(a0_0x766cf4(0x137));router[a0_0x766cf4(0x12c)]('/view',auth,async(_0x1b9137,_0x59127a)=>{var _0x4290fe=a0_0x766cf4;try{const _0x15d63c=await master_shop[_0x4290fe(0xf9)](),_0x3e3fe4=_0x1b9137[_0x4290fe(0x122)],_0x443412=await profile[_0x4290fe(0x127)]({'email':_0x3e3fe4[_0x4290fe(0x123)]}),_0x5067b2=await staff[_0x4290fe(0x127)]({'email':_0x3e3fe4[_0x4290fe(0x123)],'type_of_acc_cat':'2'});let _0x52c680=[];_0x5067b2!=null&&(_0x52c680=await sales_order[_0x4290fe(0xf9)]({'sales_staff_id':_0x5067b2[_0x4290fe(0x13e)]}));if(_0x15d63c[0x0][_0x4290fe(0xf8)]==_0x4290fe(0xf5))var _0x3533b7=users['English'];else{if(_0x15d63c[0x0][_0x4290fe(0xf8)]==_0x4290fe(0x111))var _0x3533b7=users['Hindi'];else{if(_0x15d63c[0x0][_0x4290fe(0xf8)]==_0x4290fe(0xff))var _0x3533b7=users[_0x4290fe(0xff)];else{if(_0x15d63c[0x0][_0x4290fe(0xf8)]=='Spanish')var _0x3533b7=users[_0x4290fe(0x10a)];else{if(_0x15d63c[0x0]['language']==_0x4290fe(0x121))var _0x3533b7=users['French'];else{if(_0x15d63c[0x0][_0x4290fe(0xf8)]==_0x4290fe(0x11f))var _0x3533b7=users[_0x4290fe(0x132)];else{if(_0x15d63c[0x0][_0x4290fe(0xf8)]==_0x4290fe(0x128))var _0x3533b7=users[_0x4290fe(0x128)];else{if(_0x15d63c[0x0][_0x4290fe(0xf8)]=='Arabic\x20(ae)')var _0x3533b7=users[_0x4290fe(0x141)];}}}}}}}_0x59127a['render']('collection',{'success':_0x1b9137[_0x4290fe(0x138)](_0x4290fe(0x115)),'errors':_0x1b9137['flash']('errors'),'master_shop':_0x15d63c,'profile':_0x443412,'role':_0x3e3fe4,'language':_0x3533b7,'sales_mine':_0x52c680,'staff_arr':_0x5067b2});}catch(_0x17e3e7){console[_0x4290fe(0x120)](_0x17e3e7);}}),router['get'](a0_0x766cf4(0x12d),auth,async(_0x55815a,_0x25bdd5)=>{var _0x5ea35d=a0_0x766cf4;try{const _0x3fa180=await master_shop[_0x5ea35d(0xf9)](),_0x3561bd=_0x55815a[_0x5ea35d(0x122)],_0x478ebd=await profile[_0x5ea35d(0x127)]({'email':_0x3561bd[_0x5ea35d(0x123)]}),_0x20a43c=await staff['findOne']({'email':_0x3561bd[_0x5ea35d(0x123)]}),_0x4b2a46=await customer[_0x5ea35d(0xf9)]({'agent_id':_0x20a43c[_0x5ea35d(0x13e)]}),_0x427be5=_0x55815a[_0x5ea35d(0x126)]['id'],_0x2099b3=await sales_sa[_0x5ea35d(0x11e)](_0x427be5);if(_0x3fa180[0x0][_0x5ea35d(0xf8)]==_0x5ea35d(0xf5))var _0x16b3a6=users['English'];else{if(_0x3fa180[0x0][_0x5ea35d(0xf8)]=='Hindi')var _0x16b3a6=users[_0x5ea35d(0x111)];else{if(_0x3fa180[0x0][_0x5ea35d(0xf8)]==_0x5ea35d(0xff))var _0x16b3a6=users[_0x5ea35d(0xff)];else{if(_0x3fa180[0x0][_0x5ea35d(0xf8)]==_0x5ea35d(0x10a))var _0x16b3a6=users[_0x5ea35d(0x10a)];else{if(_0x3fa180[0x0][_0x5ea35d(0xf8)]==_0x5ea35d(0x121))var _0x16b3a6=users[_0x5ea35d(0x121)];else{if(_0x3fa180[0x0][_0x5ea35d(0xf8)]==_0x5ea35d(0x11f))var _0x16b3a6=users[_0x5ea35d(0x132)];else{if(_0x3fa180[0x0][_0x5ea35d(0xf8)]=='Chinese')var _0x16b3a6=users['Chinese'];else{if(_0x3fa180[0x0][_0x5ea35d(0xf8)]=='Arabic\x20(ae)')var _0x16b3a6=users[_0x5ea35d(0x141)];}}}}}}}_0x25bdd5[_0x5ea35d(0x148)](_0x5ea35d(0x107),{'success':_0x55815a['flash']('success'),'errors':_0x55815a['flash']('errors'),'master_shop':_0x3fa180,'profile':_0x478ebd,'role':_0x3561bd,'language':_0x16b3a6,'customer':_0x4b2a46,'sales_sa':_0x2099b3,'staff_arr':_0x20a43c});}catch(_0x536c03){console[_0x5ea35d(0x120)](_0x536c03);}}),router['post'](a0_0x766cf4(0x12d),auth,async(_0x313302,_0x44a4cb)=>{var _0x565b93=a0_0x766cf4;try{const _0x15cc61=_0x313302[_0x565b93(0x126)]['id'],_0xd8f82f=await sales_sa[_0x565b93(0x11e)](_0x15cc61),{collection:_0x362390,invoicemoney:_0x23f054,collectionnumber:_0x21693a,typeofpayment:_0x24bc37,cashdate:_0x280445,id_detl:_0x55e5cd}=_0x313302[_0x565b93(0x114)];_0x44a4cb[_0x565b93(0x142)](_0xd8f82f);return;if(typeof _0x55e5cd==_0x565b93(0x12a))var _0x6a0240=[_0x313302[_0x565b93(0x114)][_0x565b93(0xf7)]],_0xb38f98=[_0x313302[_0x565b93(0x114)][_0x565b93(0x131)]],_0x52cb76=[_0x313302[_0x565b93(0x114)]['spwp']],_0x2b4aff=[_0x313302['body']['fin_disc']],_0x93b0c1=[_0x313302[_0x565b93(0x114)][_0x565b93(0x12b)]],_0x18315c=[_0x313302['body'][_0x565b93(0x13d)]],_0x5ce799=[_0x313302[_0x565b93(0x114)]['totalNewPrice']];else var _0x6a0240=[..._0x313302[_0x565b93(0x114)][_0x565b93(0xf7)]],_0xb38f98=[..._0x313302['body']['ewt']],_0x52cb76=[..._0x313302[_0x565b93(0x114)]['spwp']],_0x2b4aff=[..._0x313302[_0x565b93(0x114)]['fin_disc']],_0x93b0c1=[..._0x313302[_0x565b93(0x114)][_0x565b93(0x12b)]],_0x18315c=[..._0x313302[_0x565b93(0x114)][_0x565b93(0x13d)]],_0x5ce799=[..._0x313302[_0x565b93(0x114)][_0x565b93(0x146)]];const _0x4a364d=_0x6a0240[_0x565b93(0x113)](_0x2b0162=>{return _0x2b0162={'id_detl':_0x2b0162};});_0xb38f98[_0x565b93(0x125)]((_0x4ef217,_0x2c1c04)=>{var _0x4edeca=_0x565b93;_0x4a364d[_0x2c1c04][_0x4edeca(0x131)]=_0x4ef217;}),_0x52cb76[_0x565b93(0x125)]((_0x51349f,_0x466e9f)=>{var _0x3b40b6=_0x565b93;_0x4a364d[_0x466e9f][_0x3b40b6(0x11a)]=_0x51349f;}),_0x2b4aff[_0x565b93(0x125)]((_0x18679f,_0x3756fe)=>{var _0x5e1987=_0x565b93;_0x4a364d[_0x3756fe][_0x5e1987(0xfe)]=_0x18679f;}),_0x93b0c1[_0x565b93(0x125)]((_0x3ab1fc,_0x3f41f7)=>{var _0x5871d1=_0x565b93;_0x4a364d[_0x3f41f7][_0x5871d1(0x12b)]=_0x3ab1fc;}),_0x18315c['forEach']((_0x154819,_0x3ddebc)=>{var _0x851c98=_0x565b93;_0x4a364d[_0x3ddebc][_0x851c98(0x13d)]=_0x154819;}),_0x5ce799['forEach']((_0x42b956,_0x6e3814)=>{_0x4a364d[_0x6e3814]['totalcollection']=_0x42b956;}),_0xd8f82f[_0x565b93(0x140)]=_0x362390,_0xd8f82f[_0x565b93(0x10f)]=_0x21693a,_0xd8f82f[_0x565b93(0x124)]=_0x24bc37,_0xd8f82f['cash_date']=_0x280445,_0xd8f82f[_0x565b93(0x10c)]='True';const _0xb8d754=await _0xd8f82f[_0x565b93(0x136)]();if(_0xb8d754[_0x565b93(0x10c)]==_0x565b93(0x13f))for(let _0x28545b=0x0;_0x28545b<=_0x4a364d[_0x565b93(0x11d)]-0x1;_0x28545b++){const _0x491072=_0x4a364d[_0x28545b],_0x127f9e=mongoose[_0x565b93(0x116)][_0x565b93(0x133)];console[_0x565b93(0x120)](_0x491072);const _0x9646d4=await sales_sa[_0x565b93(0x117)]({'_id':_0x127f9e(_0x15cc61[_0x565b93(0x103)]()),'sale_product._id':_0x127f9e(_0x491072['id_detl'][_0x565b93(0x103)]())},{'$set':{'sale_product.$.ewt':_0x491072[_0x565b93(0x131)],'sale_product.$.spwp':_0x491072[_0x565b93(0x11a)],'sale_product.$.fin_disc':_0x491072['fin_disc'],'sale_product.$.vol_deals':_0x491072[_0x565b93(0x12b)],'sale_product.$.bo_disc':_0x491072[_0x565b93(0x13d)],'sale_product.$.totalprice':parseFloat(_0x491072[_0x565b93(0x14a)])}});}_0x313302[_0x565b93(0x138)](_0x565b93(0x115),_0x565b93(0x144)),_0x44a4cb[_0x565b93(0x101)](_0x565b93(0x10d)+_0x15cc61);}catch(_0x503af2){console[_0x565b93(0x120)](_0x503af2);}}),router[a0_0x766cf4(0x12c)](a0_0x766cf4(0x147),auth,async(_0x204212,_0xe0b8e5)=>{var _0x10763d=a0_0x766cf4;try{const _0x34719b=await master_shop[_0x10763d(0xf9)](),_0x55b6f9=_0x204212[_0x10763d(0x122)],_0x2ffcce=await profile[_0x10763d(0x127)]({'email':_0x55b6f9[_0x10763d(0x123)]}),_0x3b8898=await staff[_0x10763d(0x127)]({'email':_0x55b6f9[_0x10763d(0x123)],'type_of_acc_cat':'2'});let _0x1ed1c3=[];_0x3b8898!=null&&(_0x1ed1c3=await sales_order[_0x10763d(0xf9)]({'sales_staff_id':_0x3b8898['_id']}));console[_0x10763d(0x120)](_0x1ed1c3);if(_0x34719b[0x0][_0x10763d(0xf8)]==_0x10763d(0xf5))var _0x2d98e2=users[_0x10763d(0x134)];else{if(_0x34719b[0x0][_0x10763d(0xf8)]==_0x10763d(0x111))var _0x2d98e2=users[_0x10763d(0x111)];else{if(_0x34719b[0x0][_0x10763d(0xf8)]=='German')var _0x2d98e2=users[_0x10763d(0xff)];else{if(_0x34719b[0x0][_0x10763d(0xf8)]=='Spanish')var _0x2d98e2=users['Spanish'];else{if(_0x34719b[0x0][_0x10763d(0xf8)]==_0x10763d(0x121))var _0x2d98e2=users[_0x10763d(0x121)];else{if(_0x34719b[0x0]['language']=='Portuguese\x20(BR)')var _0x2d98e2=users[_0x10763d(0x132)];else{if(_0x34719b[0x0][_0x10763d(0xf8)]==_0x10763d(0x128))var _0x2d98e2=users['Chinese'];else{if(_0x34719b[0x0][_0x10763d(0xf8)]=='Arabic\x20(ae)')var _0x2d98e2=users[_0x10763d(0x141)];}}}}}}}_0xe0b8e5[_0x10763d(0x148)](_0x10763d(0x145),{'success':_0x204212[_0x10763d(0x138)](_0x10763d(0x115)),'errors':_0x204212[_0x10763d(0x138)](_0x10763d(0x112)),'master_shop':_0x34719b,'profile':_0x2ffcce,'role':_0x55b6f9,'language':_0x2d98e2,'sales_mine':_0x1ed1c3,'staff_arr':_0x3b8898});}catch(_0x50b397){console[_0x10763d(0x120)](_0x50b397);}}),router['get'](a0_0x766cf4(0x10b),auth,async(_0x3e85c9,_0x7e53d8)=>{var _0x5ed090=a0_0x766cf4;try{const _0xa54a26=await master_shop[_0x5ed090(0xf9)](),_0xde0fd6=_0x3e85c9[_0x5ed090(0x122)],_0x2d53fa=await profile[_0x5ed090(0x127)]({'email':_0xde0fd6[_0x5ed090(0x123)]}),_0x17256e=await staff[_0x5ed090(0x127)]({'email':_0xde0fd6[_0x5ed090(0x123)]}),_0x21a2c0=await customer[_0x5ed090(0xf9)]({'agent_id':_0x17256e[_0x5ed090(0x13e)]}),_0x1a2ead=_0x3e85c9[_0x5ed090(0x126)]['id'],_0x3f3310=await sales_order[_0x5ed090(0x11e)](_0x1a2ead);if(_0xa54a26[0x0][_0x5ed090(0xf8)]==_0x5ed090(0xf5))var _0x9772b3=users['English'];else{if(_0xa54a26[0x0]['language']==_0x5ed090(0x111))var _0x9772b3=users[_0x5ed090(0x111)];else{if(_0xa54a26[0x0][_0x5ed090(0xf8)]=='German')var _0x9772b3=users[_0x5ed090(0xff)];else{if(_0xa54a26[0x0][_0x5ed090(0xf8)]==_0x5ed090(0x10a))var _0x9772b3=users[_0x5ed090(0x10a)];else{if(_0xa54a26[0x0]['language']==_0x5ed090(0x121))var _0x9772b3=users[_0x5ed090(0x121)];else{if(_0xa54a26[0x0][_0x5ed090(0xf8)]==_0x5ed090(0x11f))var _0x9772b3=users[_0x5ed090(0x132)];else{if(_0xa54a26[0x0][_0x5ed090(0xf8)]==_0x5ed090(0x128))var _0x9772b3=users[_0x5ed090(0x128)];else{if(_0xa54a26[0x0][_0x5ed090(0xf8)]==_0x5ed090(0xfd))var _0x9772b3=users[_0x5ed090(0x141)];}}}}}}}_0x7e53d8[_0x5ed090(0x148)](_0x5ed090(0x13c),{'success':_0x3e85c9[_0x5ed090(0x138)](_0x5ed090(0x115)),'errors':_0x3e85c9['flash'](_0x5ed090(0x112)),'master_shop':_0xa54a26,'profile':_0x2d53fa,'role':_0xde0fd6,'language':_0x9772b3,'customer':_0x21a2c0,'sales_sa':_0x3f3310});}catch(_0x2bc7e8){console['log'](_0x2bc7e8);}}),router[a0_0x766cf4(0x12c)](a0_0x766cf4(0x106),auth,async(_0x549dbf,_0x210f03)=>{var _0x1def01=a0_0x766cf4;try{const _0x318353=await master_shop['find'](),_0x58f4e0=_0x549dbf[_0x1def01(0x122)],_0x2cdf70=await profile[_0x1def01(0x127)]({'email':_0x58f4e0[_0x1def01(0x123)]}),_0xcdc6d8=await staff[_0x1def01(0x127)]({'email':_0x58f4e0[_0x1def01(0x123)],'type_of_acc_cat':'1'});let _0x38d53f=[];_0xcdc6d8!=null&&(_0x38d53f=await sales_sa[_0x1def01(0xf9)]({'sales_staff_id':_0xcdc6d8['_id']}));if(_0x318353[0x0]['language']=='English\x20(US)')var _0x325a91=users[_0x1def01(0x134)];else{if(_0x318353[0x0][_0x1def01(0xf8)]==_0x1def01(0x111))var _0x325a91=users[_0x1def01(0x111)];else{if(_0x318353[0x0][_0x1def01(0xf8)]==_0x1def01(0xff))var _0x325a91=users[_0x1def01(0xff)];else{if(_0x318353[0x0][_0x1def01(0xf8)]==_0x1def01(0x10a))var _0x325a91=users[_0x1def01(0x10a)];else{if(_0x318353[0x0][_0x1def01(0xf8)]==_0x1def01(0x121))var _0x325a91=users[_0x1def01(0x121)];else{if(_0x318353[0x0]['language']==_0x1def01(0x11f))var _0x325a91=users['Portuguese'];else{if(_0x318353[0x0][_0x1def01(0xf8)]==_0x1def01(0x128))var _0x325a91=users[_0x1def01(0x128)];else{if(_0x318353[0x0][_0x1def01(0xf8)]=='Arabic\x20(ae)')var _0x325a91=users[_0x1def01(0x141)];}}}}}}}_0x210f03['render']('collection_xt',{'success':_0x549dbf[_0x1def01(0x138)](_0x1def01(0x115)),'errors':_0x549dbf[_0x1def01(0x138)](_0x1def01(0x112)),'master_shop':_0x318353,'profile':_0x2cdf70,'role':_0x58f4e0,'language':_0x325a91,'sales_mine':_0x38d53f,'staff_arr':_0xcdc6d8});}catch(_0x16220){console['log'](_0x16220);}}),router[a0_0x766cf4(0x12c)](a0_0x766cf4(0x11b),auth,async(_0x14b373,_0x26ce82)=>{var _0x259839=a0_0x766cf4;try{const _0x51245f=await master_shop[_0x259839(0xf9)](),_0x4a9e70=_0x14b373[_0x259839(0x122)],_0x4fd717=await profile[_0x259839(0x127)]({'email':_0x4a9e70[_0x259839(0x123)]}),_0x1ee1af=await staff[_0x259839(0x127)]({'email':_0x4a9e70[_0x259839(0x123)]}),_0x44f36a=await customer[_0x259839(0xf9)]({'agent_id':_0x1ee1af[_0x259839(0x13e)]}),_0x23a7aa=_0x14b373[_0x259839(0x126)]['id'],_0x48ff14=await sales_sa[_0x259839(0x11e)](_0x23a7aa);if(_0x51245f[0x0][_0x259839(0xf8)]=='English\x20(US)')var _0x44ea60=users['English'];else{if(_0x51245f[0x0][_0x259839(0xf8)]==_0x259839(0x111))var _0x44ea60=users['Hindi'];else{if(_0x51245f[0x0][_0x259839(0xf8)]=='German')var _0x44ea60=users['German'];else{if(_0x51245f[0x0][_0x259839(0xf8)]==_0x259839(0x10a))var _0x44ea60=users[_0x259839(0x10a)];else{if(_0x51245f[0x0][_0x259839(0xf8)]==_0x259839(0x121))var _0x44ea60=users[_0x259839(0x121)];else{if(_0x51245f[0x0][_0x259839(0xf8)]==_0x259839(0x11f))var _0x44ea60=users[_0x259839(0x132)];else{if(_0x51245f[0x0][_0x259839(0xf8)]=='Chinese')var _0x44ea60=users['Chinese'];else{if(_0x51245f[0x0]['language']==_0x259839(0xfd))var _0x44ea60=users[_0x259839(0x141)];}}}}}}}_0x26ce82[_0x259839(0x148)]('view_collections_xt',{'success':_0x14b373[_0x259839(0x138)](_0x259839(0x115)),'errors':_0x14b373[_0x259839(0x138)]('errors'),'master_shop':_0x51245f,'profile':_0x4fd717,'role':_0x4a9e70,'language':_0x44ea60,'customer':_0x44f36a,'sales_sa':_0x48ff14,'staff_arr':_0x1ee1af});}catch(_0x25a209){console[_0x259839(0x120)](_0x25a209);}}),router[a0_0x766cf4(0x102)]('/view_xt/:id',auth,async(_0x479cd9,_0x291958)=>{var _0x1a46df=a0_0x766cf4;try{const _0x1b0300=_0x479cd9['params']['id'],_0x240908=await sales_sa[_0x1a46df(0x11e)](_0x1b0300),{collection:_0x5c730c,invoicemoney:_0x1b1705,collectionnumber:_0x3f96a7,typeofpayment:_0x447dad,cashdate:_0x2dc8bd,id_detl:_0x4faf77}=_0x479cd9[_0x1a46df(0x114)];if(typeof _0x4faf77==_0x1a46df(0x12a))var _0x231701=[_0x479cd9[_0x1a46df(0x114)][_0x1a46df(0xf7)]],_0x32bccd=[_0x479cd9['body']['ewt']],_0x2f44a5=[_0x479cd9['body'][_0x1a46df(0x11a)]],_0x213e10=[_0x479cd9[_0x1a46df(0x114)][_0x1a46df(0xfe)]],_0x4ed678=[_0x479cd9[_0x1a46df(0x114)][_0x1a46df(0x12b)]],_0x578e5d=[_0x479cd9[_0x1a46df(0x114)]['bo_disc']],_0x1c7fa9=[_0x479cd9[_0x1a46df(0x114)]['totalNewPrice']];else var _0x231701=[..._0x479cd9[_0x1a46df(0x114)]['id_detl']],_0x32bccd=[..._0x479cd9[_0x1a46df(0x114)][_0x1a46df(0x131)]],_0x2f44a5=[..._0x479cd9[_0x1a46df(0x114)][_0x1a46df(0x11a)]],_0x213e10=[..._0x479cd9[_0x1a46df(0x114)]['fin_disc']],_0x4ed678=[..._0x479cd9['body'][_0x1a46df(0x12b)]],_0x578e5d=[..._0x479cd9[_0x1a46df(0x114)]['bo_disc']],_0x1c7fa9=[..._0x479cd9[_0x1a46df(0x114)][_0x1a46df(0x146)]];const _0x4c575e=_0x231701[_0x1a46df(0x113)](_0x2369fa=>{return _0x2369fa={'id_detl':_0x2369fa};});_0x32bccd[_0x1a46df(0x125)]((_0x29aa0d,_0x466433)=>{var _0x3fe500=_0x1a46df;_0x4c575e[_0x466433][_0x3fe500(0x131)]=_0x29aa0d;}),_0x2f44a5[_0x1a46df(0x125)]((_0x318f2d,_0x472140)=>{var _0x2ea3f4=_0x1a46df;_0x4c575e[_0x472140][_0x2ea3f4(0x11a)]=_0x318f2d;}),_0x213e10[_0x1a46df(0x125)]((_0x2413a1,_0x18c500)=>{_0x4c575e[_0x18c500]['fin_disc']=_0x2413a1;}),_0x4ed678['forEach']((_0x6a41d0,_0x2dd7e8)=>{var _0x435453=_0x1a46df;_0x4c575e[_0x2dd7e8][_0x435453(0x12b)]=_0x6a41d0;}),_0x578e5d[_0x1a46df(0x125)]((_0x372881,_0x1bdc6c)=>{var _0x31a993=_0x1a46df;_0x4c575e[_0x1bdc6c][_0x31a993(0x13d)]=_0x372881;}),_0x1c7fa9[_0x1a46df(0x125)]((_0x5b9e72,_0x5e1ac8)=>{var _0xaa4f4e=_0x1a46df;_0x4c575e[_0x5e1ac8][_0xaa4f4e(0x14a)]=_0x5b9e72;}),_0x240908['collection_price']=_0x5c730c,_0x240908['collectionnumber']=_0x3f96a7,_0x240908[_0x1a46df(0x124)]=_0x447dad,_0x240908['cash_date']=_0x2dc8bd,_0x240908[_0x1a46df(0x10c)]=_0x1a46df(0x13f),_0x240908[_0x1a46df(0x13b)]='1';const _0x59005e=await _0x240908[_0x1a46df(0x136)]();if(_0x59005e['paid']==_0x1a46df(0x13f))for(let _0x59f7aa=0x0;_0x59f7aa<=_0x4c575e[_0x1a46df(0x11d)]-0x1;_0x59f7aa++){const _0x2f6b97=_0x4c575e[_0x59f7aa],_0x38770b=mongoose['Types']['ObjectId'];console[_0x1a46df(0x120)](_0x2f6b97);const _0x4b9c59=await sales_sa[_0x1a46df(0x117)]({'_id':_0x38770b(_0x1b0300[_0x1a46df(0x103)]()),'sale_product._id':_0x38770b(_0x2f6b97[_0x1a46df(0xf7)][_0x1a46df(0x103)]())},{'$set':{'sale_product.$.ewt':_0x2f6b97['ewt'],'sale_product.$.spwp':_0x2f6b97[_0x1a46df(0x11a)],'sale_product.$.fin_disc':_0x2f6b97[_0x1a46df(0xfe)],'sale_product.$.vol_deals':_0x2f6b97['vol_deals'],'sale_product.$.bo_disc':_0x2f6b97[_0x1a46df(0x13d)],'sale_product.$.totalprice':parseFloat(_0x2f6b97['totalcollection'])}});}_0x479cd9[_0x1a46df(0x138)]('success',_0x1a46df(0x144)),_0x291958[_0x1a46df(0x101)]('/collection/view/'+_0x1b0300);}catch(_0x2a253f){console[_0x1a46df(0x120)](_0x2a253f);}}),router[a0_0x766cf4(0x12c)]('/so_x',auth,async(_0x18d9be,_0x53f783)=>{var _0xadb0bf=a0_0x766cf4;try{const _0x542155=await master_shop['find'](),_0x141fd4=_0x18d9be[_0xadb0bf(0x122)],_0x372b95=await profile[_0xadb0bf(0x127)]({'email':_0x141fd4['email']}),_0x5045f6=await staff['findOne']({'email':_0x141fd4[_0xadb0bf(0x123)],'type_of_acc_cat':'1'});let _0x26a3f1=[];_0x5045f6!=null&&(_0x26a3f1=await sales_order['find']({'sales_staff_id':_0x5045f6[_0xadb0bf(0x13e)]}));if(_0x542155[0x0][_0xadb0bf(0xf8)]==_0xadb0bf(0xf5))var _0x57d332=users['English'];else{if(_0x542155[0x0][_0xadb0bf(0xf8)]=='Hindi')var _0x57d332=users[_0xadb0bf(0x111)];else{if(_0x542155[0x0][_0xadb0bf(0xf8)]=='German')var _0x57d332=users['German'];else{if(_0x542155[0x0][_0xadb0bf(0xf8)]==_0xadb0bf(0x10a))var _0x57d332=users[_0xadb0bf(0x10a)];else{if(_0x542155[0x0]['language']==_0xadb0bf(0x121))var _0x57d332=users['French'];else{if(_0x542155[0x0]['language']==_0xadb0bf(0x11f))var _0x57d332=users[_0xadb0bf(0x132)];else{if(_0x542155[0x0][_0xadb0bf(0xf8)]==_0xadb0bf(0x128))var _0x57d332=users['Chinese'];else{if(_0x542155[0x0][_0xadb0bf(0xf8)]==_0xadb0bf(0xfd))var _0x57d332=users[_0xadb0bf(0x141)];}}}}}}}_0x53f783[_0xadb0bf(0x148)](_0xadb0bf(0x105),{'success':_0x18d9be[_0xadb0bf(0x138)](_0xadb0bf(0x115)),'errors':_0x18d9be['flash'](_0xadb0bf(0x112)),'master_shop':_0x542155,'profile':_0x372b95,'role':_0x141fd4,'language':_0x57d332,'sales_mine':_0x26a3f1,'staff_arr':_0x5045f6});}catch(_0xf87791){console[_0xadb0bf(0x120)](_0xf87791);}}),router[a0_0x766cf4(0x12c)](a0_0x766cf4(0x129),auth,async(_0x43d2d4,_0x10a89b)=>{var _0x1d3e33=a0_0x766cf4;try{const _0x489d2f=await master_shop[_0x1d3e33(0xf9)](),_0x531167=_0x43d2d4['user'],_0x3c8b86=await profile[_0x1d3e33(0x127)]({'email':_0x531167[_0x1d3e33(0x123)]}),_0x34e652=await staff[_0x1d3e33(0x127)]({'email':_0x531167['email']}),_0x2ac8a7=await customer[_0x1d3e33(0xf9)]({'agent_id':_0x34e652[_0x1d3e33(0x13e)]}),_0x26c9f5=_0x43d2d4[_0x1d3e33(0x126)]['id'],_0x2a4d47=await sales_order[_0x1d3e33(0x11e)](_0x26c9f5);if(_0x489d2f[0x0][_0x1d3e33(0xf8)]==_0x1d3e33(0xf5))var _0x300cc9=users[_0x1d3e33(0x134)];else{if(_0x489d2f[0x0][_0x1d3e33(0xf8)]=='Hindi')var _0x300cc9=users[_0x1d3e33(0x111)];else{if(_0x489d2f[0x0][_0x1d3e33(0xf8)]=='German')var _0x300cc9=users[_0x1d3e33(0xff)];else{if(_0x489d2f[0x0][_0x1d3e33(0xf8)]==_0x1d3e33(0x10a))var _0x300cc9=users['Spanish'];else{if(_0x489d2f[0x0]['language']==_0x1d3e33(0x121))var _0x300cc9=users['French'];else{if(_0x489d2f[0x0][_0x1d3e33(0xf8)]==_0x1d3e33(0x11f))var _0x300cc9=users[_0x1d3e33(0x132)];else{if(_0x489d2f[0x0][_0x1d3e33(0xf8)]==_0x1d3e33(0x128))var _0x300cc9=users[_0x1d3e33(0x128)];else{if(_0x489d2f[0x0][_0x1d3e33(0xf8)]==_0x1d3e33(0xfd))var _0x300cc9=users[_0x1d3e33(0x141)];}}}}}}}_0x10a89b['render'](_0x1d3e33(0x110),{'success':_0x43d2d4['flash'](_0x1d3e33(0x115)),'errors':_0x43d2d4['flash'](_0x1d3e33(0x112)),'master_shop':_0x489d2f,'profile':_0x3c8b86,'role':_0x531167,'language':_0x300cc9,'customer':_0x2ac8a7,'sales_sa':_0x2a4d47,'staff_arr':_0x34e652});}catch(_0x23233a){console[_0x1d3e33(0x120)](_0x23233a);}}),router[a0_0x766cf4(0x102)](a0_0x766cf4(0x129),auth,async(_0x5c7e0f,_0x2d7318)=>{var _0x222d5d=a0_0x766cf4;try{const _0x4a4b05=_0x5c7e0f[_0x222d5d(0x126)]['id'],_0x5202b7=await sales_order[_0x222d5d(0x11e)](_0x4a4b05),{collection:_0xe19c77,invoicemoney:_0x6a2dd1,collectionnumber:_0x178dc1,typeofpayment:_0x56b3fe,cashdate:_0x2aa81f,id_detl:_0x340b8d}=_0x5c7e0f[_0x222d5d(0x114)];_0x5202b7['collection_price']=_0xe19c77,_0x5202b7[_0x222d5d(0x124)]=_0x56b3fe,_0x5202b7[_0x222d5d(0x118)]=_0x2aa81f,_0x5202b7['paid']=_0x222d5d(0x13f),_0x5202b7[_0x222d5d(0x13b)]='1';const _0x11d57f=await _0x5202b7[_0x222d5d(0x136)]();_0x5c7e0f[_0x222d5d(0x138)](_0x222d5d(0x115),_0x222d5d(0x144)),_0x2d7318[_0x222d5d(0x101)](_0x222d5d(0xfc)+_0x4a4b05);}catch(_0x4aa0cc){console[_0x222d5d(0x120)](_0x4aa0cc);}}),module[a0_0x766cf4(0x149)]=router;