var a0_0x271b39=a0_0x15f6;function a0_0x15f6(_0xd56af6,_0x357a28){var _0x37e0ee=a0_0x37e0();return a0_0x15f6=function(_0x15f6c0,_0x5a35c5){_0x15f6c0=_0x15f6c0-0x161;var _0x1f038b=_0x37e0ee[_0x15f6c0];return _0x1f038b;},a0_0x15f6(_0xd56af6,_0x357a28);}(function(_0x3546aa,_0x140925){var _0x2a1def=a0_0x15f6,_0x522390=_0x3546aa();while(!![]){try{var _0x5b4ffe=-parseInt(_0x2a1def(0x1ab))/0x1*(-parseInt(_0x2a1def(0x197))/0x2)+-parseInt(_0x2a1def(0x1b6))/0x3*(-parseInt(_0x2a1def(0x19c))/0x4)+parseInt(_0x2a1def(0x19f))/0x5+-parseInt(_0x2a1def(0x166))/0x6+-parseInt(_0x2a1def(0x16f))/0x7+-parseInt(_0x2a1def(0x19e))/0x8*(-parseInt(_0x2a1def(0x177))/0x9)+parseInt(_0x2a1def(0x176))/0xa*(-parseInt(_0x2a1def(0x175))/0xb);if(_0x5b4ffe===_0x140925)break;else _0x522390['push'](_0x522390['shift']());}catch(_0x5a0108){_0x522390['push'](_0x522390['shift']());}}}(a0_0x37e0,0x658ee));const express=require('express'),app=express(),router=express[a0_0x271b39(0x17a)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x271b39(0x1b2)),auth=require('../middleware/auth'),users=require(a0_0x271b39(0x18e)),excelJS=require('exceljs'),xlsx=require(a0_0x271b39(0x185)),multer=require('multer'),mongoose=require(a0_0x271b39(0x172));router[a0_0x271b39(0x162)](a0_0x271b39(0x191),auth,async(_0x18adf7,_0x4cecfe)=>{var _0x563512=a0_0x271b39;try{const _0x21268c=await master_shop['find'](),_0x4cb928=_0x18adf7['user'],_0x284251=await profile[_0x563512(0x18a)]({'email':_0x4cb928[_0x563512(0x17d)]}),_0x559cfe=await staff['findOne']({'email':_0x4cb928[_0x563512(0x17d)],'type_of_acc_cat':'2'});let _0x7b44e1=[];_0x559cfe!=null&&(_0x7b44e1=await sales_order[_0x563512(0x18c)]({'sales_staff_id':_0x559cfe['_id']}));if(_0x21268c[0x0][_0x563512(0x19d)]=='English\x20(US)')var _0xe2dcbc=users[_0x563512(0x1a3)];else{if(_0x21268c[0x0][_0x563512(0x19d)]==_0x563512(0x1a7))var _0xe2dcbc=users['Hindi'];else{if(_0x21268c[0x0][_0x563512(0x19d)]=='German')var _0xe2dcbc=users['German'];else{if(_0x21268c[0x0][_0x563512(0x19d)]==_0x563512(0x18b))var _0xe2dcbc=users[_0x563512(0x18b)];else{if(_0x21268c[0x0][_0x563512(0x19d)]==_0x563512(0x16c))var _0xe2dcbc=users[_0x563512(0x16c)];else{if(_0x21268c[0x0][_0x563512(0x19d)]=='Portuguese\x20(BR)')var _0xe2dcbc=users['Portuguese'];else{if(_0x21268c[0x0][_0x563512(0x19d)]==_0x563512(0x187))var _0xe2dcbc=users['Chinese'];else{if(_0x21268c[0x0]['language']=='Arabic\x20(ae)')var _0xe2dcbc=users[_0x563512(0x1b0)];}}}}}}}_0x4cecfe[_0x563512(0x199)](_0x563512(0x1a8),{'success':_0x18adf7[_0x563512(0x1a9)](_0x563512(0x195)),'errors':_0x18adf7['flash'](_0x563512(0x19b)),'master_shop':_0x21268c,'profile':_0x284251,'role':_0x4cb928,'language':_0xe2dcbc,'sales_mine':_0x7b44e1,'staff_arr':_0x559cfe});}catch(_0xff8a8f){console[_0x563512(0x1ad)](_0xff8a8f);}}),router[a0_0x271b39(0x162)](a0_0x271b39(0x192),auth,async(_0x59036e,_0x2f54d1)=>{var _0x1e75b7=a0_0x271b39;try{const _0x161da9=await master_shop['find'](),_0x5cc830=_0x59036e[_0x1e75b7(0x180)],_0x33d9de=await profile[_0x1e75b7(0x18a)]({'email':_0x5cc830[_0x1e75b7(0x17d)]}),_0x25fe9e=await staff[_0x1e75b7(0x18a)]({'email':_0x5cc830[_0x1e75b7(0x17d)]}),_0x376a36=await customer[_0x1e75b7(0x18c)]({'agent_id':_0x25fe9e[_0x1e75b7(0x188)]}),_0x5b29ca=_0x59036e[_0x1e75b7(0x17c)]['id'],_0x334908=await sales_sa[_0x1e75b7(0x181)](_0x5b29ca);if(_0x161da9[0x0][_0x1e75b7(0x19d)]==_0x1e75b7(0x1a0))var _0x4228fb=users['English'];else{if(_0x161da9[0x0][_0x1e75b7(0x19d)]==_0x1e75b7(0x1a7))var _0x4228fb=users['Hindi'];else{if(_0x161da9[0x0][_0x1e75b7(0x19d)]=='German')var _0x4228fb=users[_0x1e75b7(0x169)];else{if(_0x161da9[0x0][_0x1e75b7(0x19d)]==_0x1e75b7(0x18b))var _0x4228fb=users[_0x1e75b7(0x18b)];else{if(_0x161da9[0x0][_0x1e75b7(0x19d)]=='French')var _0x4228fb=users[_0x1e75b7(0x16c)];else{if(_0x161da9[0x0]['language']==_0x1e75b7(0x1a2))var _0x4228fb=users['Portuguese'];else{if(_0x161da9[0x0]['language']==_0x1e75b7(0x187))var _0x4228fb=users['Chinese'];else{if(_0x161da9[0x0]['language']==_0x1e75b7(0x1a4))var _0x4228fb=users[_0x1e75b7(0x1b0)];}}}}}}}_0x2f54d1[_0x1e75b7(0x199)](_0x1e75b7(0x1ac),{'success':_0x59036e[_0x1e75b7(0x1a9)]('success'),'errors':_0x59036e[_0x1e75b7(0x1a9)](_0x1e75b7(0x19b)),'master_shop':_0x161da9,'profile':_0x33d9de,'role':_0x5cc830,'language':_0x4228fb,'customer':_0x376a36,'sales_sa':_0x334908,'staff_arr':_0x25fe9e});}catch(_0x5b767a){console[_0x1e75b7(0x1ad)](_0x5b767a);}}),router[a0_0x271b39(0x161)](a0_0x271b39(0x192),auth,async(_0x3d0dd3,_0x4f6b38)=>{var _0x290f5d=a0_0x271b39;try{const _0x1d3820=_0x3d0dd3[_0x290f5d(0x17c)]['id'],_0x3575c1=await sales_sa['findById'](_0x1d3820),{collection:_0x16d23e,invoicemoney:_0x16b553,collectionnumber:_0x1622bf,typeofpayment:_0x1fb4d4,cashdate:_0x3bbdbb,id_detl:_0x2d8f26}=_0x3d0dd3[_0x290f5d(0x196)];_0x4f6b38[_0x290f5d(0x194)](_0x3575c1);return;if(typeof _0x2d8f26==_0x290f5d(0x190))var _0x208bb2=[_0x3d0dd3[_0x290f5d(0x196)][_0x290f5d(0x179)]],_0x462766=[_0x3d0dd3['body']['ewt']],_0x132307=[_0x3d0dd3['body']['spwp']],_0x46fa25=[_0x3d0dd3[_0x290f5d(0x196)][_0x290f5d(0x17e)]],_0x168474=[_0x3d0dd3[_0x290f5d(0x196)][_0x290f5d(0x1a1)]],_0x2e297b=[_0x3d0dd3['body'][_0x290f5d(0x1aa)]],_0x26f3d1=[_0x3d0dd3[_0x290f5d(0x196)][_0x290f5d(0x17f)]];else var _0x208bb2=[..._0x3d0dd3[_0x290f5d(0x196)][_0x290f5d(0x179)]],_0x462766=[..._0x3d0dd3[_0x290f5d(0x196)]['ewt']],_0x132307=[..._0x3d0dd3[_0x290f5d(0x196)][_0x290f5d(0x193)]],_0x46fa25=[..._0x3d0dd3[_0x290f5d(0x196)][_0x290f5d(0x17e)]],_0x168474=[..._0x3d0dd3[_0x290f5d(0x196)]['vol_deals']],_0x2e297b=[..._0x3d0dd3['body'][_0x290f5d(0x1aa)]],_0x26f3d1=[..._0x3d0dd3[_0x290f5d(0x196)][_0x290f5d(0x17f)]];const _0x34d49e=_0x208bb2['map'](_0x12ef3c=>{return _0x12ef3c={'id_detl':_0x12ef3c};});_0x462766['forEach']((_0x4d2975,_0x511c2d)=>{var _0x3486c1=_0x290f5d;_0x34d49e[_0x511c2d][_0x3486c1(0x1b1)]=_0x4d2975;}),_0x132307[_0x290f5d(0x182)]((_0x573023,_0x4430a9)=>{var _0xc0f6dc=_0x290f5d;_0x34d49e[_0x4430a9][_0xc0f6dc(0x193)]=_0x573023;}),_0x46fa25['forEach']((_0x5606dc,_0x347ab9)=>{var _0x1d3245=_0x290f5d;_0x34d49e[_0x347ab9][_0x1d3245(0x17e)]=_0x5606dc;}),_0x168474['forEach']((_0xc1bdec,_0x510a12)=>{_0x34d49e[_0x510a12]['vol_deals']=_0xc1bdec;}),_0x2e297b['forEach']((_0x996b24,_0x24d255)=>{_0x34d49e[_0x24d255]['bo_disc']=_0x996b24;}),_0x26f3d1[_0x290f5d(0x182)]((_0x226d65,_0x195a22)=>{_0x34d49e[_0x195a22]['totalcollection']=_0x226d65;}),_0x3575c1[_0x290f5d(0x178)]=_0x16d23e,_0x3575c1['collectionnumber']=_0x1622bf,_0x3575c1[_0x290f5d(0x167)]=_0x1fb4d4,_0x3575c1[_0x290f5d(0x19a)]=_0x3bbdbb,_0x3575c1[_0x290f5d(0x16a)]='True';const _0x4c7f50=await _0x3575c1[_0x290f5d(0x1a6)]();if(_0x4c7f50['paid']=='True')for(let _0x49450f=0x0;_0x49450f<=_0x34d49e['length']-0x1;_0x49450f++){const _0x830ae5=_0x34d49e[_0x49450f],_0x326e4c=mongoose[_0x290f5d(0x18f)][_0x290f5d(0x170)];console[_0x290f5d(0x1ad)](_0x830ae5);const _0x3c13a5=await sales_sa[_0x290f5d(0x16e)]({'_id':_0x326e4c(_0x1d3820['valueOf']()),'sale_product._id':_0x326e4c(_0x830ae5['id_detl'][_0x290f5d(0x198)]())},{'$set':{'sale_product.$.ewt':_0x830ae5[_0x290f5d(0x1b1)],'sale_product.$.spwp':_0x830ae5[_0x290f5d(0x193)],'sale_product.$.fin_disc':_0x830ae5[_0x290f5d(0x17e)],'sale_product.$.vol_deals':_0x830ae5[_0x290f5d(0x1a1)],'sale_product.$.bo_disc':_0x830ae5[_0x290f5d(0x1aa)],'sale_product.$.totalprice':parseFloat(_0x830ae5[_0x290f5d(0x174)])}});}_0x3d0dd3[_0x290f5d(0x1a9)]('success','Collection\x20Update\x20successfully'),_0x4f6b38['redirect']('/collection/view/'+_0x1d3820);}catch(_0x59f921){console[_0x290f5d(0x1ad)](_0x59f921);}}),router[a0_0x271b39(0x162)](a0_0x271b39(0x189),auth,async(_0x9e4d52,_0x1e3913)=>{var _0x1a00b8=a0_0x271b39;try{const _0x36019e=await master_shop[_0x1a00b8(0x18c)](),_0x3881d4=_0x9e4d52['user'],_0x475435=await profile[_0x1a00b8(0x18a)]({'email':_0x3881d4[_0x1a00b8(0x17d)]}),_0x410b3a=await staff[_0x1a00b8(0x18a)]({'email':_0x3881d4['email'],'type_of_acc_cat':'2'});let _0x3b6565=[];_0x410b3a!=null&&(_0x3b6565=await sales_order[_0x1a00b8(0x18c)]({'sales_staff_id':_0x410b3a[_0x1a00b8(0x188)]}));console[_0x1a00b8(0x1ad)](_0x3b6565);if(_0x36019e[0x0]['language']==_0x1a00b8(0x1a0))var _0x4a3a9a=users[_0x1a00b8(0x1a3)];else{if(_0x36019e[0x0][_0x1a00b8(0x19d)]==_0x1a00b8(0x1a7))var _0x4a3a9a=users[_0x1a00b8(0x1a7)];else{if(_0x36019e[0x0]['language']==_0x1a00b8(0x169))var _0x4a3a9a=users[_0x1a00b8(0x169)];else{if(_0x36019e[0x0][_0x1a00b8(0x19d)]=='Spanish')var _0x4a3a9a=users[_0x1a00b8(0x18b)];else{if(_0x36019e[0x0][_0x1a00b8(0x19d)]==_0x1a00b8(0x16c))var _0x4a3a9a=users[_0x1a00b8(0x16c)];else{if(_0x36019e[0x0][_0x1a00b8(0x19d)]=='Portuguese\x20(BR)')var _0x4a3a9a=users['Portuguese'];else{if(_0x36019e[0x0][_0x1a00b8(0x19d)]==_0x1a00b8(0x187))var _0x4a3a9a=users[_0x1a00b8(0x187)];else{if(_0x36019e[0x0]['language']==_0x1a00b8(0x1a4))var _0x4a3a9a=users[_0x1a00b8(0x1b0)];}}}}}}}_0x1e3913[_0x1a00b8(0x199)](_0x1a00b8(0x1b3),{'success':_0x9e4d52['flash']('success'),'errors':_0x9e4d52[_0x1a00b8(0x1a9)](_0x1a00b8(0x19b)),'master_shop':_0x36019e,'profile':_0x475435,'role':_0x3881d4,'language':_0x4a3a9a,'sales_mine':_0x3b6565,'staff_arr':_0x410b3a});}catch(_0x104017){console[_0x1a00b8(0x1ad)](_0x104017);}}),router[a0_0x271b39(0x162)](a0_0x271b39(0x1b4),auth,async(_0x2e7045,_0x84d804)=>{var _0x3a7b50=a0_0x271b39;try{const _0x253758=await master_shop[_0x3a7b50(0x18c)](),_0x73bb86=_0x2e7045[_0x3a7b50(0x180)],_0xe259b6=await profile[_0x3a7b50(0x18a)]({'email':_0x73bb86[_0x3a7b50(0x17d)]}),_0x278eec=await staff[_0x3a7b50(0x18a)]({'email':_0x73bb86[_0x3a7b50(0x17d)]}),_0x29c347=await customer[_0x3a7b50(0x18c)]({'agent_id':_0x278eec[_0x3a7b50(0x188)]}),_0x4b5352=_0x2e7045[_0x3a7b50(0x17c)]['id'],_0x263791=await sales_order['findById'](_0x4b5352);if(_0x253758[0x0][_0x3a7b50(0x19d)]==_0x3a7b50(0x1a0))var _0x47b650=users[_0x3a7b50(0x1a3)];else{if(_0x253758[0x0][_0x3a7b50(0x19d)]==_0x3a7b50(0x1a7))var _0x47b650=users[_0x3a7b50(0x1a7)];else{if(_0x253758[0x0][_0x3a7b50(0x19d)]=='German')var _0x47b650=users[_0x3a7b50(0x169)];else{if(_0x253758[0x0][_0x3a7b50(0x19d)]=='Spanish')var _0x47b650=users['Spanish'];else{if(_0x253758[0x0][_0x3a7b50(0x19d)]==_0x3a7b50(0x16c))var _0x47b650=users[_0x3a7b50(0x16c)];else{if(_0x253758[0x0][_0x3a7b50(0x19d)]==_0x3a7b50(0x1a2))var _0x47b650=users[_0x3a7b50(0x165)];else{if(_0x253758[0x0][_0x3a7b50(0x19d)]==_0x3a7b50(0x187))var _0x47b650=users[_0x3a7b50(0x187)];else{if(_0x253758[0x0]['language']=='Arabic\x20(ae)')var _0x47b650=users[_0x3a7b50(0x1b0)];}}}}}}}_0x84d804[_0x3a7b50(0x199)](_0x3a7b50(0x186),{'success':_0x2e7045[_0x3a7b50(0x1a9)]('success'),'errors':_0x2e7045[_0x3a7b50(0x1a9)](_0x3a7b50(0x19b)),'master_shop':_0x253758,'profile':_0xe259b6,'role':_0x73bb86,'language':_0x47b650,'customer':_0x29c347,'sales_sa':_0x263791});}catch(_0x3076ef){console[_0x3a7b50(0x1ad)](_0x3076ef);}}),router[a0_0x271b39(0x162)]('/view_x',auth,async(_0x11863d,_0x378fe1)=>{var _0x5aa60b=a0_0x271b39;try{const _0x53730c=await master_shop[_0x5aa60b(0x18c)](),_0x2c9de7=_0x11863d[_0x5aa60b(0x180)],_0x3bed35=await profile[_0x5aa60b(0x18a)]({'email':_0x2c9de7[_0x5aa60b(0x17d)]}),_0x6cd547=await staff[_0x5aa60b(0x18a)]({'email':_0x2c9de7[_0x5aa60b(0x17d)],'type_of_acc_cat':'1'});let _0x48ae73=[];_0x6cd547!=null&&(_0x48ae73=await sales_sa[_0x5aa60b(0x18c)]({'sales_staff_id':_0x6cd547[_0x5aa60b(0x188)]}));if(_0x53730c[0x0][_0x5aa60b(0x19d)]==_0x5aa60b(0x1a0))var _0x957080=users[_0x5aa60b(0x1a3)];else{if(_0x53730c[0x0]['language']=='Hindi')var _0x957080=users['Hindi'];else{if(_0x53730c[0x0]['language']==_0x5aa60b(0x169))var _0x957080=users[_0x5aa60b(0x169)];else{if(_0x53730c[0x0][_0x5aa60b(0x19d)]=='Spanish')var _0x957080=users[_0x5aa60b(0x18b)];else{if(_0x53730c[0x0]['language']==_0x5aa60b(0x16c))var _0x957080=users['French'];else{if(_0x53730c[0x0]['language']==_0x5aa60b(0x1a2))var _0x957080=users[_0x5aa60b(0x165)];else{if(_0x53730c[0x0][_0x5aa60b(0x19d)]==_0x5aa60b(0x187))var _0x957080=users[_0x5aa60b(0x187)];else{if(_0x53730c[0x0]['language']==_0x5aa60b(0x1a4))var _0x957080=users[_0x5aa60b(0x1b0)];}}}}}}}_0x378fe1['render'](_0x5aa60b(0x173),{'success':_0x11863d[_0x5aa60b(0x1a9)](_0x5aa60b(0x195)),'errors':_0x11863d[_0x5aa60b(0x1a9)](_0x5aa60b(0x19b)),'master_shop':_0x53730c,'profile':_0x3bed35,'role':_0x2c9de7,'language':_0x957080,'sales_mine':_0x48ae73,'staff_arr':_0x6cd547});}catch(_0x178fff){console[_0x5aa60b(0x1ad)](_0x178fff);}}),router[a0_0x271b39(0x162)](a0_0x271b39(0x1ae),auth,async(_0x8c7a5a,_0x41de06)=>{var _0x3b47e6=a0_0x271b39;try{const _0x59edfa=await master_shop[_0x3b47e6(0x18c)](),_0x218ace=_0x8c7a5a['user'],_0x500d0b=await profile['findOne']({'email':_0x218ace[_0x3b47e6(0x17d)]}),_0x322513=await staff[_0x3b47e6(0x18a)]({'email':_0x218ace[_0x3b47e6(0x17d)]}),_0x4ec8eb=await customer[_0x3b47e6(0x18c)]({'agent_id':_0x322513[_0x3b47e6(0x188)]}),_0x3311fd=_0x8c7a5a[_0x3b47e6(0x17c)]['id'],_0x420b41=await sales_sa['findById'](_0x3311fd);if(_0x59edfa[0x0][_0x3b47e6(0x19d)]==_0x3b47e6(0x1a0))var _0x40395e=users[_0x3b47e6(0x1a3)];else{if(_0x59edfa[0x0][_0x3b47e6(0x19d)]==_0x3b47e6(0x1a7))var _0x40395e=users['Hindi'];else{if(_0x59edfa[0x0]['language']==_0x3b47e6(0x169))var _0x40395e=users['German'];else{if(_0x59edfa[0x0]['language']==_0x3b47e6(0x18b))var _0x40395e=users[_0x3b47e6(0x18b)];else{if(_0x59edfa[0x0]['language']==_0x3b47e6(0x16c))var _0x40395e=users[_0x3b47e6(0x16c)];else{if(_0x59edfa[0x0][_0x3b47e6(0x19d)]==_0x3b47e6(0x1a2))var _0x40395e=users[_0x3b47e6(0x165)];else{if(_0x59edfa[0x0][_0x3b47e6(0x19d)]=='Chinese')var _0x40395e=users[_0x3b47e6(0x187)];else{if(_0x59edfa[0x0]['language']=='Arabic\x20(ae)')var _0x40395e=users['Arabic'];}}}}}}}_0x41de06['render'](_0x3b47e6(0x16b),{'success':_0x8c7a5a[_0x3b47e6(0x1a9)](_0x3b47e6(0x195)),'errors':_0x8c7a5a[_0x3b47e6(0x1a9)]('errors'),'master_shop':_0x59edfa,'profile':_0x500d0b,'role':_0x218ace,'language':_0x40395e,'customer':_0x4ec8eb,'sales_sa':_0x420b41,'staff_arr':_0x322513});}catch(_0x1b6223){console[_0x3b47e6(0x1ad)](_0x1b6223);}}),router[a0_0x271b39(0x161)](a0_0x271b39(0x1ae),auth,async(_0x1b206b,_0x49067d)=>{var _0x659703=a0_0x271b39;try{const _0x52a1f1=_0x1b206b[_0x659703(0x17c)]['id'],_0x35cc75=await sales_sa[_0x659703(0x181)](_0x52a1f1),{collection:_0x246a81,invoicemoney:_0x376bc1,collectionnumber:_0x19d1ec,typeofpayment:_0x69f922,cashdate:_0x303c97,id_detl:_0x519318}=_0x1b206b[_0x659703(0x196)];if(typeof _0x519318==_0x659703(0x190))var _0x128076=[_0x1b206b[_0x659703(0x196)][_0x659703(0x179)]],_0x124899=[_0x1b206b['body'][_0x659703(0x1b1)]],_0x2aafad=[_0x1b206b[_0x659703(0x196)]['spwp']],_0x43b14b=[_0x1b206b['body'][_0x659703(0x17e)]],_0x442925=[_0x1b206b['body'][_0x659703(0x1a1)]],_0x5c1efa=[_0x1b206b[_0x659703(0x196)][_0x659703(0x1aa)]],_0x3eb55c=[_0x1b206b[_0x659703(0x196)][_0x659703(0x17f)]];else var _0x128076=[..._0x1b206b[_0x659703(0x196)][_0x659703(0x179)]],_0x124899=[..._0x1b206b['body'][_0x659703(0x1b1)]],_0x2aafad=[..._0x1b206b[_0x659703(0x196)][_0x659703(0x193)]],_0x43b14b=[..._0x1b206b[_0x659703(0x196)][_0x659703(0x17e)]],_0x442925=[..._0x1b206b['body'][_0x659703(0x1a1)]],_0x5c1efa=[..._0x1b206b['body'][_0x659703(0x1aa)]],_0x3eb55c=[..._0x1b206b[_0x659703(0x196)][_0x659703(0x17f)]];const _0x4cc1a2=_0x128076[_0x659703(0x17b)](_0x9bb456=>{return _0x9bb456={'id_detl':_0x9bb456};});_0x124899[_0x659703(0x182)]((_0x36cfc7,_0x244aae)=>{var _0x2dfb8c=_0x659703;_0x4cc1a2[_0x244aae][_0x2dfb8c(0x1b1)]=_0x36cfc7;}),_0x2aafad['forEach']((_0xee1951,_0x292a37)=>{var _0x34e5a7=_0x659703;_0x4cc1a2[_0x292a37][_0x34e5a7(0x193)]=_0xee1951;}),_0x43b14b[_0x659703(0x182)]((_0x1267b2,_0xd705a9)=>{var _0x165719=_0x659703;_0x4cc1a2[_0xd705a9][_0x165719(0x17e)]=_0x1267b2;}),_0x442925[_0x659703(0x182)]((_0x5457e7,_0x1b1b57)=>{var _0x1f1989=_0x659703;_0x4cc1a2[_0x1b1b57][_0x1f1989(0x1a1)]=_0x5457e7;}),_0x5c1efa[_0x659703(0x182)]((_0x1082dc,_0x34630e)=>{var _0x1435be=_0x659703;_0x4cc1a2[_0x34630e][_0x1435be(0x1aa)]=_0x1082dc;}),_0x3eb55c[_0x659703(0x182)]((_0x538ead,_0x592d5a)=>{var _0x5adb26=_0x659703;_0x4cc1a2[_0x592d5a][_0x5adb26(0x174)]=_0x538ead;}),_0x35cc75[_0x659703(0x178)]=_0x246a81,_0x35cc75[_0x659703(0x1af)]=_0x19d1ec,_0x35cc75[_0x659703(0x167)]=_0x69f922,_0x35cc75['cash_date']=_0x303c97,_0x35cc75[_0x659703(0x16a)]='True',_0x35cc75[_0x659703(0x18d)]='1';const _0x55e847=await _0x35cc75['save']();if(_0x55e847[_0x659703(0x16a)]==_0x659703(0x1b7))for(let _0x479743=0x0;_0x479743<=_0x4cc1a2[_0x659703(0x168)]-0x1;_0x479743++){const _0x3f8024=_0x4cc1a2[_0x479743],_0x5c58c9=mongoose[_0x659703(0x18f)][_0x659703(0x170)];console['log'](_0x3f8024);const _0x5a17b7=await sales_sa[_0x659703(0x16e)]({'_id':_0x5c58c9(_0x52a1f1['valueOf']()),'sale_product._id':_0x5c58c9(_0x3f8024[_0x659703(0x179)]['valueOf']())},{'$set':{'sale_product.$.ewt':_0x3f8024[_0x659703(0x1b1)],'sale_product.$.spwp':_0x3f8024[_0x659703(0x193)],'sale_product.$.fin_disc':_0x3f8024[_0x659703(0x17e)],'sale_product.$.vol_deals':_0x3f8024['vol_deals'],'sale_product.$.bo_disc':_0x3f8024[_0x659703(0x1aa)],'sale_product.$.totalprice':parseFloat(_0x3f8024[_0x659703(0x174)])}});}_0x1b206b[_0x659703(0x1a9)](_0x659703(0x195),'Collection\x20Update\x20successfully'),_0x49067d['redirect']('/collection/view/'+_0x52a1f1);}catch(_0x574dc0){console['log'](_0x574dc0);}}),router[a0_0x271b39(0x162)](a0_0x271b39(0x164),auth,async(_0x52a9c6,_0x548f2a)=>{var _0x437d2f=a0_0x271b39;try{const _0x1b9d77=await master_shop[_0x437d2f(0x18c)](),_0x54fba8=_0x52a9c6[_0x437d2f(0x180)],_0x226bff=await profile['findOne']({'email':_0x54fba8[_0x437d2f(0x17d)]}),_0xb8b173=await staff[_0x437d2f(0x18a)]({'email':_0x54fba8[_0x437d2f(0x17d)],'type_of_acc_cat':'1'});let _0x40b274=[];_0xb8b173!=null&&(_0x40b274=await sales_order['find']({'sales_staff_id':_0xb8b173['_id']}));if(_0x1b9d77[0x0]['language']==_0x437d2f(0x1a0))var _0x27fbad=users[_0x437d2f(0x1a3)];else{if(_0x1b9d77[0x0]['language']=='Hindi')var _0x27fbad=users['Hindi'];else{if(_0x1b9d77[0x0][_0x437d2f(0x19d)]==_0x437d2f(0x169))var _0x27fbad=users[_0x437d2f(0x169)];else{if(_0x1b9d77[0x0]['language']=='Spanish')var _0x27fbad=users[_0x437d2f(0x18b)];else{if(_0x1b9d77[0x0]['language']==_0x437d2f(0x16c))var _0x27fbad=users[_0x437d2f(0x16c)];else{if(_0x1b9d77[0x0][_0x437d2f(0x19d)]==_0x437d2f(0x1a2))var _0x27fbad=users['Portuguese'];else{if(_0x1b9d77[0x0][_0x437d2f(0x19d)]==_0x437d2f(0x187))var _0x27fbad=users[_0x437d2f(0x187)];else{if(_0x1b9d77[0x0]['language']==_0x437d2f(0x1a4))var _0x27fbad=users['Arabic'];}}}}}}}_0x548f2a['render'](_0x437d2f(0x1a5),{'success':_0x52a9c6[_0x437d2f(0x1a9)]('success'),'errors':_0x52a9c6['flash']('errors'),'master_shop':_0x1b9d77,'profile':_0x226bff,'role':_0x54fba8,'language':_0x27fbad,'sales_mine':_0x40b274,'staff_arr':_0xb8b173});}catch(_0x3271e3){console['log'](_0x3271e3);}}),router[a0_0x271b39(0x162)](a0_0x271b39(0x184),auth,async(_0x2ea9b5,_0x423afd)=>{var _0x448084=a0_0x271b39;try{const _0x4b5518=await master_shop[_0x448084(0x18c)](),_0x330076=_0x2ea9b5['user'],_0x3c5a5e=await profile[_0x448084(0x18a)]({'email':_0x330076[_0x448084(0x17d)]}),_0x5d32a5=await staff['findOne']({'email':_0x330076[_0x448084(0x17d)]}),_0x35018f=await customer[_0x448084(0x18c)]({'agent_id':_0x5d32a5[_0x448084(0x188)]}),_0x5166ad=_0x2ea9b5[_0x448084(0x17c)]['id'],_0x264f38=await sales_order['findById'](_0x5166ad);if(_0x4b5518[0x0][_0x448084(0x19d)]==_0x448084(0x1a0))var _0x84b759=users[_0x448084(0x1a3)];else{if(_0x4b5518[0x0][_0x448084(0x19d)]==_0x448084(0x1a7))var _0x84b759=users[_0x448084(0x1a7)];else{if(_0x4b5518[0x0]['language']=='German')var _0x84b759=users['German'];else{if(_0x4b5518[0x0][_0x448084(0x19d)]==_0x448084(0x18b))var _0x84b759=users[_0x448084(0x18b)];else{if(_0x4b5518[0x0][_0x448084(0x19d)]=='French')var _0x84b759=users[_0x448084(0x16c)];else{if(_0x4b5518[0x0][_0x448084(0x19d)]=='Portuguese\x20(BR)')var _0x84b759=users[_0x448084(0x165)];else{if(_0x4b5518[0x0]['language']=='Chinese')var _0x84b759=users[_0x448084(0x187)];else{if(_0x4b5518[0x0][_0x448084(0x19d)]==_0x448084(0x1a4))var _0x84b759=users[_0x448084(0x1b0)];}}}}}}}_0x423afd[_0x448084(0x199)](_0x448084(0x163),{'success':_0x2ea9b5['flash'](_0x448084(0x195)),'errors':_0x2ea9b5['flash'](_0x448084(0x19b)),'master_shop':_0x4b5518,'profile':_0x3c5a5e,'role':_0x330076,'language':_0x84b759,'customer':_0x35018f,'sales_sa':_0x264f38,'staff_arr':_0x5d32a5});}catch(_0x40069a){console[_0x448084(0x1ad)](_0x40069a);}}),router[a0_0x271b39(0x161)](a0_0x271b39(0x184),auth,async(_0x225b89,_0x48296c)=>{var _0x141252=a0_0x271b39;try{const _0x383a19=_0x225b89[_0x141252(0x17c)]['id'],_0x293346=await sales_order[_0x141252(0x181)](_0x383a19),{collection:_0x380ee1,invoicemoney:_0x5bedf2,collectionnumber:_0x1e613e,typeofpayment:_0x2bdc79,cashdate:_0x337611,id_detl:_0x1bd163}=_0x225b89[_0x141252(0x196)];_0x293346[_0x141252(0x178)]=_0x380ee1,_0x293346['type_of_payment']=_0x2bdc79,_0x293346[_0x141252(0x19a)]=_0x337611,_0x293346[_0x141252(0x16a)]=_0x141252(0x1b7),_0x293346[_0x141252(0x18d)]='1';const _0x48cce3=await _0x293346[_0x141252(0x1a6)]();_0x225b89[_0x141252(0x1a9)](_0x141252(0x195),_0x141252(0x16d)),_0x48296c[_0x141252(0x183)](_0x141252(0x1b5)+_0x383a19);}catch(_0x2470d3){console[_0x141252(0x1ad)](_0x2470d3);}}),module[a0_0x271b39(0x171)]=router;function a0_0x37e0(){var _0x2b6d3c=['typeofprocess','../public/language/languages.json','Types','string','/view','/view/:id','spwp','json','success','body','21338xMLXEq','valueOf','render','cash_date','errors','212guXlou','language','4918376xSZYJO','3193295wNCyUW','English\x20(US)','vol_deals','Portuguese\x20(BR)','English','Arabic\x20(ae)','collection_so_xt','save','Hindi','collection','flash','bo_disc','75aIJSnN','view_collections','log','/view_xt/:id','collectionnumber','Arabic','ewt','../models/all_models','collection_sox','/view_sox/:id','/collection/view_so_xt/','33057vfZFTq','True','post','get','view_collections_so_xt','/so_x','Portuguese','2896512UKpJzC','type_of_payment','length','German','paid','view_collections_xt','French','Collection\x20Update\x20successfully','updateOne','238357hxFYYA','ObjectId','exports','mongoose','collection_xt','totalcollection','41767vmpwSE','4490JiVbhF','9jLpHYk','collection_price','id_detl','Router','map','params','email','fin_disc','totalNewPrice','user','findById','forEach','redirect','/view_so_xt/:id','xlsx','view_collections_sox','Chinese','_id','/x_so','findOne','Spanish','find'];a0_0x37e0=function(){return _0x2b6d3c;};return a0_0x37e0();}