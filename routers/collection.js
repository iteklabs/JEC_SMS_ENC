var a0_0x56f204=a0_0x2f8a;(function(_0x340ff8,_0x350d89){var _0x55d8d7=a0_0x2f8a,_0x5b0be5=_0x340ff8();while(!![]){try{var _0x2151e0=-parseInt(_0x55d8d7(0xcd))/0x1*(parseInt(_0x55d8d7(0xd0))/0x2)+parseInt(_0x55d8d7(0x96))/0x3+parseInt(_0x55d8d7(0xc9))/0x4*(parseInt(_0x55d8d7(0xc3))/0x5)+parseInt(_0x55d8d7(0x93))/0x6*(-parseInt(_0x55d8d7(0xa2))/0x7)+parseInt(_0x55d8d7(0x83))/0x8+-parseInt(_0x55d8d7(0x90))/0x9+parseInt(_0x55d8d7(0xa9))/0xa;if(_0x2151e0===_0x350d89)break;else _0x5b0be5['push'](_0x5b0be5['shift']());}catch(_0x1ede1b){_0x5b0be5['push'](_0x5b0be5['shift']());}}}(a0_0x4adc,0x9176f));function a0_0x4adc(){var _0x37db64=['json','exceljs','get','German','render','Types','length','errors','/x_so','updateOne','collection_price','findOne','English','log','fin_disc','5HBxsJm','forEach','totalcollection','body','/collection/view/','bo_disc','4096820DQsOtg','exports','Arabic','Portuguese','1psYiKn','map','English\x20(US)','987346CIplrj','collection','flash','French','Arabic\x20(ae)','3246848dcRwzM','language','post','/view/:id','Portuguese\x20(BR)','totalNewPrice','../models/all_models','Collection\x20Update\x20successfully','collection_xt','../middleware/auth','save','collectionnumber','string','3101859YAtujg','user','collection_so_xt','45726JUPDOr','True','spwp','162783fgujoc','valueOf','/view_x','type_of_payment','email','ewt','vol_deals','cash_date','success','findById','id_detl','/view_sox/:id','854HxXhVA','/view_so_xt/:id','paid','find','Spanish','xlsx','typeofprocess','8795870NyvwtQ','/view_xt/:id','/so_x','mongoose','params','Hindi','collection_sox','redirect','Chinese','_id','/view'];a0_0x4adc=function(){return _0x37db64;};return a0_0x4adc();}const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x56f204(0x89)),auth=require(a0_0x56f204(0x8c)),users=require('../public/language/languages.json'),excelJS=require(a0_0x56f204(0xb5)),xlsx=require(a0_0x56f204(0xa7)),multer=require('multer'),mongoose=require(a0_0x56f204(0xac));function a0_0x2f8a(_0x5ddd4d,_0x440bbe){var _0x4adc29=a0_0x4adc();return a0_0x2f8a=function(_0x2f8a99,_0x7cdfc9){_0x2f8a99=_0x2f8a99-0x83;var _0x5ca3ff=_0x4adc29[_0x2f8a99];return _0x5ca3ff;},a0_0x2f8a(_0x5ddd4d,_0x440bbe);}router[a0_0x56f204(0xb6)](a0_0x56f204(0xb3),auth,async(_0x5b0de8,_0xf85dca)=>{var _0x31b0d3=a0_0x56f204;try{const _0x4ea5a0=await master_shop[_0x31b0d3(0xa5)](),_0xeb1779=_0x5b0de8['user'],_0x55c84c=await profile['findOne']({'email':_0xeb1779[_0x31b0d3(0x9a)]}),_0x237245=await staff[_0x31b0d3(0xbf)]({'email':_0xeb1779[_0x31b0d3(0x9a)],'type_of_acc_cat':'2'});let _0x3d6d32=[];_0x237245!=null&&(_0x3d6d32=await sales_order['find']({'sales_staff_id':_0x237245[_0x31b0d3(0xb2)]}));if(_0x4ea5a0[0x0]['language']==_0x31b0d3(0xcf))var _0x5e2e64=users[_0x31b0d3(0xc0)];else{if(_0x4ea5a0[0x0][_0x31b0d3(0x84)]==_0x31b0d3(0xae))var _0x5e2e64=users[_0x31b0d3(0xae)];else{if(_0x4ea5a0[0x0][_0x31b0d3(0x84)]=='German')var _0x5e2e64=users[_0x31b0d3(0xb7)];else{if(_0x4ea5a0[0x0]['language']==_0x31b0d3(0xa6))var _0x5e2e64=users[_0x31b0d3(0xa6)];else{if(_0x4ea5a0[0x0][_0x31b0d3(0x84)]=='French')var _0x5e2e64=users[_0x31b0d3(0xd3)];else{if(_0x4ea5a0[0x0]['language']==_0x31b0d3(0x87))var _0x5e2e64=users[_0x31b0d3(0xcc)];else{if(_0x4ea5a0[0x0][_0x31b0d3(0x84)]==_0x31b0d3(0xb1))var _0x5e2e64=users[_0x31b0d3(0xb1)];else{if(_0x4ea5a0[0x0][_0x31b0d3(0x84)]==_0x31b0d3(0xd4))var _0x5e2e64=users[_0x31b0d3(0xcb)];}}}}}}}_0xf85dca[_0x31b0d3(0xb8)](_0x31b0d3(0xd1),{'success':_0x5b0de8['flash'](_0x31b0d3(0x9e)),'errors':_0x5b0de8[_0x31b0d3(0xd2)]('errors'),'master_shop':_0x4ea5a0,'profile':_0x55c84c,'role':_0xeb1779,'language':_0x5e2e64,'sales_mine':_0x3d6d32,'staff_arr':_0x237245});}catch(_0x43a0b5){console[_0x31b0d3(0xc1)](_0x43a0b5);}}),router[a0_0x56f204(0xb6)](a0_0x56f204(0x86),auth,async(_0x5964e9,_0x2a181d)=>{var _0x52c894=a0_0x56f204;try{const _0x27e941=await master_shop[_0x52c894(0xa5)](),_0x5dce60=_0x5964e9['user'],_0x3c9130=await profile[_0x52c894(0xbf)]({'email':_0x5dce60['email']}),_0x14ca5c=await staff['findOne']({'email':_0x5dce60[_0x52c894(0x9a)]}),_0x3ee370=await customer[_0x52c894(0xa5)]({'agent_id':_0x14ca5c['_id']}),_0x2a34db=_0x5964e9[_0x52c894(0xad)]['id'],_0x5b06f8=await sales_sa[_0x52c894(0x9f)](_0x2a34db);if(_0x27e941[0x0]['language']=='English\x20(US)')var _0xa16a69=users[_0x52c894(0xc0)];else{if(_0x27e941[0x0]['language']=='Hindi')var _0xa16a69=users[_0x52c894(0xae)];else{if(_0x27e941[0x0]['language']==_0x52c894(0xb7))var _0xa16a69=users[_0x52c894(0xb7)];else{if(_0x27e941[0x0]['language']==_0x52c894(0xa6))var _0xa16a69=users[_0x52c894(0xa6)];else{if(_0x27e941[0x0][_0x52c894(0x84)]=='French')var _0xa16a69=users[_0x52c894(0xd3)];else{if(_0x27e941[0x0][_0x52c894(0x84)]=='Portuguese\x20(BR)')var _0xa16a69=users[_0x52c894(0xcc)];else{if(_0x27e941[0x0][_0x52c894(0x84)]==_0x52c894(0xb1))var _0xa16a69=users[_0x52c894(0xb1)];else{if(_0x27e941[0x0]['language']==_0x52c894(0xd4))var _0xa16a69=users[_0x52c894(0xcb)];}}}}}}}_0x2a181d['render']('view_collections',{'success':_0x5964e9[_0x52c894(0xd2)](_0x52c894(0x9e)),'errors':_0x5964e9[_0x52c894(0xd2)](_0x52c894(0xbb)),'master_shop':_0x27e941,'profile':_0x3c9130,'role':_0x5dce60,'language':_0xa16a69,'customer':_0x3ee370,'sales_sa':_0x5b06f8,'staff_arr':_0x14ca5c});}catch(_0x3fe22){console[_0x52c894(0xc1)](_0x3fe22);}}),router[a0_0x56f204(0x85)](a0_0x56f204(0x86),auth,async(_0x285b3b,_0x2c5cc8)=>{var _0x6b904=a0_0x56f204;try{const _0x4034ae=_0x285b3b[_0x6b904(0xad)]['id'],_0x3ef3b8=await sales_sa[_0x6b904(0x9f)](_0x4034ae),{collection:_0x303e1c,invoicemoney:_0x230322,collectionnumber:_0x4c276f,typeofpayment:_0x143604,cashdate:_0x48e596,id_detl:_0x327319}=_0x285b3b[_0x6b904(0xc6)];_0x2c5cc8[_0x6b904(0xb4)](_0x3ef3b8);return;if(typeof _0x327319==_0x6b904(0x8f))var _0x312765=[_0x285b3b[_0x6b904(0xc6)]['id_detl']],_0x59c69e=[_0x285b3b[_0x6b904(0xc6)][_0x6b904(0x9b)]],_0x2c942d=[_0x285b3b['body'][_0x6b904(0x95)]],_0x423ea7=[_0x285b3b['body'][_0x6b904(0xc2)]],_0x20df8d=[_0x285b3b[_0x6b904(0xc6)][_0x6b904(0x9c)]],_0x40ca99=[_0x285b3b[_0x6b904(0xc6)]['bo_disc']],_0xe35bf1=[_0x285b3b['body'][_0x6b904(0x88)]];else var _0x312765=[..._0x285b3b[_0x6b904(0xc6)][_0x6b904(0xa0)]],_0x59c69e=[..._0x285b3b['body']['ewt']],_0x2c942d=[..._0x285b3b[_0x6b904(0xc6)][_0x6b904(0x95)]],_0x423ea7=[..._0x285b3b[_0x6b904(0xc6)][_0x6b904(0xc2)]],_0x20df8d=[..._0x285b3b[_0x6b904(0xc6)]['vol_deals']],_0x40ca99=[..._0x285b3b[_0x6b904(0xc6)][_0x6b904(0xc8)]],_0xe35bf1=[..._0x285b3b[_0x6b904(0xc6)][_0x6b904(0x88)]];const _0x1032ba=_0x312765[_0x6b904(0xce)](_0x13895a=>{return _0x13895a={'id_detl':_0x13895a};});_0x59c69e['forEach']((_0x4f6b5c,_0x49b368)=>{var _0x19abe9=_0x6b904;_0x1032ba[_0x49b368][_0x19abe9(0x9b)]=_0x4f6b5c;}),_0x2c942d['forEach']((_0x11bbc5,_0x48361d)=>{var _0x45118c=_0x6b904;_0x1032ba[_0x48361d][_0x45118c(0x95)]=_0x11bbc5;}),_0x423ea7[_0x6b904(0xc4)]((_0x2a2cac,_0x11385a)=>{var _0x2b1e6a=_0x6b904;_0x1032ba[_0x11385a][_0x2b1e6a(0xc2)]=_0x2a2cac;}),_0x20df8d[_0x6b904(0xc4)]((_0xc91083,_0x110731)=>{var _0x41633b=_0x6b904;_0x1032ba[_0x110731][_0x41633b(0x9c)]=_0xc91083;}),_0x40ca99[_0x6b904(0xc4)]((_0x3d0b24,_0x29a510)=>{var _0xa1e14e=_0x6b904;_0x1032ba[_0x29a510][_0xa1e14e(0xc8)]=_0x3d0b24;}),_0xe35bf1[_0x6b904(0xc4)]((_0x356926,_0x7da38e)=>{var _0x57f64e=_0x6b904;_0x1032ba[_0x7da38e][_0x57f64e(0xc5)]=_0x356926;}),_0x3ef3b8[_0x6b904(0xbe)]=_0x303e1c,_0x3ef3b8[_0x6b904(0x8e)]=_0x4c276f,_0x3ef3b8['type_of_payment']=_0x143604,_0x3ef3b8['cash_date']=_0x48e596,_0x3ef3b8['paid']=_0x6b904(0x94);const _0x4edfda=await _0x3ef3b8['save']();if(_0x4edfda[_0x6b904(0xa4)]==_0x6b904(0x94))for(let _0x2b777a=0x0;_0x2b777a<=_0x1032ba[_0x6b904(0xba)]-0x1;_0x2b777a++){const _0x42e1d1=_0x1032ba[_0x2b777a],_0x5ca772=mongoose[_0x6b904(0xb9)]['ObjectId'];console[_0x6b904(0xc1)](_0x42e1d1);const _0x52fff1=await sales_sa[_0x6b904(0xbd)]({'_id':_0x5ca772(_0x4034ae[_0x6b904(0x97)]()),'sale_product._id':_0x5ca772(_0x42e1d1[_0x6b904(0xa0)]['valueOf']())},{'$set':{'sale_product.$.ewt':_0x42e1d1[_0x6b904(0x9b)],'sale_product.$.spwp':_0x42e1d1[_0x6b904(0x95)],'sale_product.$.fin_disc':_0x42e1d1[_0x6b904(0xc2)],'sale_product.$.vol_deals':_0x42e1d1[_0x6b904(0x9c)],'sale_product.$.bo_disc':_0x42e1d1[_0x6b904(0xc8)],'sale_product.$.totalprice':parseFloat(_0x42e1d1[_0x6b904(0xc5)])}});}_0x285b3b['flash'](_0x6b904(0x9e),_0x6b904(0x8a)),_0x2c5cc8['redirect']('/collection/view/'+_0x4034ae);}catch(_0x401b62){console[_0x6b904(0xc1)](_0x401b62);}}),router[a0_0x56f204(0xb6)](a0_0x56f204(0xbc),auth,async(_0x2a4dc6,_0x38d326)=>{var _0x532a97=a0_0x56f204;try{const _0xafb030=await master_shop['find'](),_0x1d3f0c=_0x2a4dc6[_0x532a97(0x91)],_0x4e3789=await profile[_0x532a97(0xbf)]({'email':_0x1d3f0c[_0x532a97(0x9a)]}),_0x22217d=await staff[_0x532a97(0xbf)]({'email':_0x1d3f0c[_0x532a97(0x9a)],'type_of_acc_cat':'2'});let _0x148217=[];_0x22217d!=null&&(_0x148217=await sales_order[_0x532a97(0xa5)]({'sales_staff_id':_0x22217d['_id']}));console[_0x532a97(0xc1)](_0x148217);if(_0xafb030[0x0][_0x532a97(0x84)]==_0x532a97(0xcf))var _0x28954a=users[_0x532a97(0xc0)];else{if(_0xafb030[0x0][_0x532a97(0x84)]==_0x532a97(0xae))var _0x28954a=users[_0x532a97(0xae)];else{if(_0xafb030[0x0][_0x532a97(0x84)]=='German')var _0x28954a=users[_0x532a97(0xb7)];else{if(_0xafb030[0x0][_0x532a97(0x84)]==_0x532a97(0xa6))var _0x28954a=users['Spanish'];else{if(_0xafb030[0x0][_0x532a97(0x84)]==_0x532a97(0xd3))var _0x28954a=users['French'];else{if(_0xafb030[0x0][_0x532a97(0x84)]==_0x532a97(0x87))var _0x28954a=users[_0x532a97(0xcc)];else{if(_0xafb030[0x0]['language']==_0x532a97(0xb1))var _0x28954a=users[_0x532a97(0xb1)];else{if(_0xafb030[0x0][_0x532a97(0x84)]==_0x532a97(0xd4))var _0x28954a=users[_0x532a97(0xcb)];}}}}}}}_0x38d326[_0x532a97(0xb8)](_0x532a97(0xaf),{'success':_0x2a4dc6[_0x532a97(0xd2)](_0x532a97(0x9e)),'errors':_0x2a4dc6[_0x532a97(0xd2)]('errors'),'master_shop':_0xafb030,'profile':_0x4e3789,'role':_0x1d3f0c,'language':_0x28954a,'sales_mine':_0x148217,'staff_arr':_0x22217d});}catch(_0x40632f){console[_0x532a97(0xc1)](_0x40632f);}}),router[a0_0x56f204(0xb6)](a0_0x56f204(0xa1),auth,async(_0x39e0f9,_0x35967e)=>{var _0x47bc78=a0_0x56f204;try{const _0x4f0bd2=await master_shop[_0x47bc78(0xa5)](),_0x4e8f2a=_0x39e0f9[_0x47bc78(0x91)],_0x409abc=await profile[_0x47bc78(0xbf)]({'email':_0x4e8f2a[_0x47bc78(0x9a)]}),_0x1f6471=await staff[_0x47bc78(0xbf)]({'email':_0x4e8f2a['email']}),_0x55edbd=await customer[_0x47bc78(0xa5)]({'agent_id':_0x1f6471[_0x47bc78(0xb2)]}),_0x10a3fe=_0x39e0f9[_0x47bc78(0xad)]['id'],_0x31db77=await sales_order[_0x47bc78(0x9f)](_0x10a3fe);if(_0x4f0bd2[0x0]['language']==_0x47bc78(0xcf))var _0xeea17a=users[_0x47bc78(0xc0)];else{if(_0x4f0bd2[0x0][_0x47bc78(0x84)]==_0x47bc78(0xae))var _0xeea17a=users[_0x47bc78(0xae)];else{if(_0x4f0bd2[0x0][_0x47bc78(0x84)]==_0x47bc78(0xb7))var _0xeea17a=users[_0x47bc78(0xb7)];else{if(_0x4f0bd2[0x0]['language']==_0x47bc78(0xa6))var _0xeea17a=users[_0x47bc78(0xa6)];else{if(_0x4f0bd2[0x0][_0x47bc78(0x84)]==_0x47bc78(0xd3))var _0xeea17a=users[_0x47bc78(0xd3)];else{if(_0x4f0bd2[0x0][_0x47bc78(0x84)]==_0x47bc78(0x87))var _0xeea17a=users[_0x47bc78(0xcc)];else{if(_0x4f0bd2[0x0][_0x47bc78(0x84)]==_0x47bc78(0xb1))var _0xeea17a=users[_0x47bc78(0xb1)];else{if(_0x4f0bd2[0x0][_0x47bc78(0x84)]==_0x47bc78(0xd4))var _0xeea17a=users['Arabic'];}}}}}}}_0x35967e['render']('view_collections_sox',{'success':_0x39e0f9['flash'](_0x47bc78(0x9e)),'errors':_0x39e0f9[_0x47bc78(0xd2)](_0x47bc78(0xbb)),'master_shop':_0x4f0bd2,'profile':_0x409abc,'role':_0x4e8f2a,'language':_0xeea17a,'customer':_0x55edbd,'sales_sa':_0x31db77});}catch(_0x2c6531){console[_0x47bc78(0xc1)](_0x2c6531);}}),router[a0_0x56f204(0xb6)](a0_0x56f204(0x98),auth,async(_0x55c3cf,_0x4a3bb6)=>{var _0x2b28e3=a0_0x56f204;try{const _0xdeb1b4=await master_shop[_0x2b28e3(0xa5)](),_0x35f2fb=_0x55c3cf[_0x2b28e3(0x91)],_0x1baceb=await profile[_0x2b28e3(0xbf)]({'email':_0x35f2fb['email']}),_0x825b30=await staff[_0x2b28e3(0xbf)]({'email':_0x35f2fb[_0x2b28e3(0x9a)],'type_of_acc_cat':'1'});let _0x5bcda3=[];_0x825b30!=null&&(_0x5bcda3=await sales_sa[_0x2b28e3(0xa5)]({'sales_staff_id':_0x825b30[_0x2b28e3(0xb2)]}));if(_0xdeb1b4[0x0]['language']=='English\x20(US)')var _0x1f5390=users[_0x2b28e3(0xc0)];else{if(_0xdeb1b4[0x0][_0x2b28e3(0x84)]==_0x2b28e3(0xae))var _0x1f5390=users['Hindi'];else{if(_0xdeb1b4[0x0]['language']=='German')var _0x1f5390=users['German'];else{if(_0xdeb1b4[0x0]['language']=='Spanish')var _0x1f5390=users['Spanish'];else{if(_0xdeb1b4[0x0][_0x2b28e3(0x84)]==_0x2b28e3(0xd3))var _0x1f5390=users['French'];else{if(_0xdeb1b4[0x0][_0x2b28e3(0x84)]==_0x2b28e3(0x87))var _0x1f5390=users[_0x2b28e3(0xcc)];else{if(_0xdeb1b4[0x0][_0x2b28e3(0x84)]==_0x2b28e3(0xb1))var _0x1f5390=users[_0x2b28e3(0xb1)];else{if(_0xdeb1b4[0x0][_0x2b28e3(0x84)]=='Arabic\x20(ae)')var _0x1f5390=users[_0x2b28e3(0xcb)];}}}}}}}_0x4a3bb6[_0x2b28e3(0xb8)](_0x2b28e3(0x8b),{'success':_0x55c3cf[_0x2b28e3(0xd2)](_0x2b28e3(0x9e)),'errors':_0x55c3cf[_0x2b28e3(0xd2)](_0x2b28e3(0xbb)),'master_shop':_0xdeb1b4,'profile':_0x1baceb,'role':_0x35f2fb,'language':_0x1f5390,'sales_mine':_0x5bcda3,'staff_arr':_0x825b30});}catch(_0x441411){console[_0x2b28e3(0xc1)](_0x441411);}}),router[a0_0x56f204(0xb6)](a0_0x56f204(0xaa),auth,async(_0x2112dc,_0x199f57)=>{var _0x43b8bd=a0_0x56f204;try{const _0x107c74=await master_shop['find'](),_0x445dfe=_0x2112dc[_0x43b8bd(0x91)],_0x7d321b=await profile['findOne']({'email':_0x445dfe[_0x43b8bd(0x9a)]}),_0x43a8f8=await staff['findOne']({'email':_0x445dfe[_0x43b8bd(0x9a)]}),_0x4a1bff=await customer[_0x43b8bd(0xa5)]({'agent_id':_0x43a8f8['_id']}),_0x3bd7aa=_0x2112dc[_0x43b8bd(0xad)]['id'],_0x26a506=await sales_sa['findById'](_0x3bd7aa);if(_0x107c74[0x0][_0x43b8bd(0x84)]==_0x43b8bd(0xcf))var _0x3f984a=users[_0x43b8bd(0xc0)];else{if(_0x107c74[0x0]['language']=='Hindi')var _0x3f984a=users[_0x43b8bd(0xae)];else{if(_0x107c74[0x0]['language']==_0x43b8bd(0xb7))var _0x3f984a=users[_0x43b8bd(0xb7)];else{if(_0x107c74[0x0][_0x43b8bd(0x84)]==_0x43b8bd(0xa6))var _0x3f984a=users[_0x43b8bd(0xa6)];else{if(_0x107c74[0x0][_0x43b8bd(0x84)]==_0x43b8bd(0xd3))var _0x3f984a=users[_0x43b8bd(0xd3)];else{if(_0x107c74[0x0][_0x43b8bd(0x84)]==_0x43b8bd(0x87))var _0x3f984a=users[_0x43b8bd(0xcc)];else{if(_0x107c74[0x0][_0x43b8bd(0x84)]=='Chinese')var _0x3f984a=users[_0x43b8bd(0xb1)];else{if(_0x107c74[0x0]['language']==_0x43b8bd(0xd4))var _0x3f984a=users[_0x43b8bd(0xcb)];}}}}}}}_0x199f57[_0x43b8bd(0xb8)]('view_collections_xt',{'success':_0x2112dc[_0x43b8bd(0xd2)](_0x43b8bd(0x9e)),'errors':_0x2112dc[_0x43b8bd(0xd2)](_0x43b8bd(0xbb)),'master_shop':_0x107c74,'profile':_0x7d321b,'role':_0x445dfe,'language':_0x3f984a,'customer':_0x4a1bff,'sales_sa':_0x26a506,'staff_arr':_0x43a8f8});}catch(_0x2b0667){console[_0x43b8bd(0xc1)](_0x2b0667);}}),router[a0_0x56f204(0x85)]('/view_xt/:id',auth,async(_0x545757,_0x138278)=>{var _0x5a2bac=a0_0x56f204;try{const _0x5ab3e0=_0x545757[_0x5a2bac(0xad)]['id'],_0x1ad1ef=await sales_sa[_0x5a2bac(0x9f)](_0x5ab3e0),{collection:_0x2410d5,invoicemoney:_0x35df87,collectionnumber:_0x5e934b,typeofpayment:_0x55b02a,cashdate:_0x569b4a,id_detl:_0x58e69b}=_0x545757[_0x5a2bac(0xc6)];if(typeof _0x58e69b==_0x5a2bac(0x8f))var _0x3a9f9f=[_0x545757[_0x5a2bac(0xc6)][_0x5a2bac(0xa0)]],_0x135607=[_0x545757[_0x5a2bac(0xc6)][_0x5a2bac(0x9b)]],_0x439cbc=[_0x545757[_0x5a2bac(0xc6)]['spwp']],_0x336097=[_0x545757[_0x5a2bac(0xc6)][_0x5a2bac(0xc2)]],_0x323653=[_0x545757[_0x5a2bac(0xc6)][_0x5a2bac(0x9c)]],_0x12ccbb=[_0x545757[_0x5a2bac(0xc6)][_0x5a2bac(0xc8)]],_0xf33335=[_0x545757[_0x5a2bac(0xc6)][_0x5a2bac(0x88)]];else var _0x3a9f9f=[..._0x545757[_0x5a2bac(0xc6)]['id_detl']],_0x135607=[..._0x545757[_0x5a2bac(0xc6)][_0x5a2bac(0x9b)]],_0x439cbc=[..._0x545757[_0x5a2bac(0xc6)][_0x5a2bac(0x95)]],_0x336097=[..._0x545757[_0x5a2bac(0xc6)][_0x5a2bac(0xc2)]],_0x323653=[..._0x545757[_0x5a2bac(0xc6)][_0x5a2bac(0x9c)]],_0x12ccbb=[..._0x545757['body'][_0x5a2bac(0xc8)]],_0xf33335=[..._0x545757[_0x5a2bac(0xc6)]['totalNewPrice']];const _0x302c3c=_0x3a9f9f[_0x5a2bac(0xce)](_0x52d01f=>{return _0x52d01f={'id_detl':_0x52d01f};});_0x135607[_0x5a2bac(0xc4)]((_0x5b4bd7,_0xacecce)=>{var _0x4c37de=_0x5a2bac;_0x302c3c[_0xacecce][_0x4c37de(0x9b)]=_0x5b4bd7;}),_0x439cbc[_0x5a2bac(0xc4)]((_0x15fda2,_0x3a2612)=>{var _0x2fe680=_0x5a2bac;_0x302c3c[_0x3a2612][_0x2fe680(0x95)]=_0x15fda2;}),_0x336097['forEach']((_0x2aa4f3,_0x885b9b)=>{var _0x505410=_0x5a2bac;_0x302c3c[_0x885b9b][_0x505410(0xc2)]=_0x2aa4f3;}),_0x323653[_0x5a2bac(0xc4)]((_0x59e04f,_0xe56ebd)=>{_0x302c3c[_0xe56ebd]['vol_deals']=_0x59e04f;}),_0x12ccbb[_0x5a2bac(0xc4)]((_0x453fca,_0x2a7c5f)=>{var _0x500e79=_0x5a2bac;_0x302c3c[_0x2a7c5f][_0x500e79(0xc8)]=_0x453fca;}),_0xf33335[_0x5a2bac(0xc4)]((_0x5c00b5,_0xbc9c70)=>{_0x302c3c[_0xbc9c70]['totalcollection']=_0x5c00b5;}),_0x1ad1ef[_0x5a2bac(0xbe)]=_0x2410d5,_0x1ad1ef[_0x5a2bac(0x8e)]=_0x5e934b,_0x1ad1ef[_0x5a2bac(0x99)]=_0x55b02a,_0x1ad1ef[_0x5a2bac(0x9d)]=_0x569b4a,_0x1ad1ef[_0x5a2bac(0xa4)]='True',_0x1ad1ef[_0x5a2bac(0xa8)]='1';const _0x135d2c=await _0x1ad1ef[_0x5a2bac(0x8d)]();if(_0x135d2c[_0x5a2bac(0xa4)]=='True')for(let _0x57976a=0x0;_0x57976a<=_0x302c3c[_0x5a2bac(0xba)]-0x1;_0x57976a++){const _0x267050=_0x302c3c[_0x57976a],_0x4b07b1=mongoose[_0x5a2bac(0xb9)]['ObjectId'];console['log'](_0x267050);const _0x2bdfc2=await sales_sa[_0x5a2bac(0xbd)]({'_id':_0x4b07b1(_0x5ab3e0['valueOf']()),'sale_product._id':_0x4b07b1(_0x267050[_0x5a2bac(0xa0)]['valueOf']())},{'$set':{'sale_product.$.ewt':_0x267050['ewt'],'sale_product.$.spwp':_0x267050[_0x5a2bac(0x95)],'sale_product.$.fin_disc':_0x267050['fin_disc'],'sale_product.$.vol_deals':_0x267050['vol_deals'],'sale_product.$.bo_disc':_0x267050[_0x5a2bac(0xc8)],'sale_product.$.totalprice':parseFloat(_0x267050['totalcollection'])}});}_0x545757[_0x5a2bac(0xd2)](_0x5a2bac(0x9e),_0x5a2bac(0x8a)),_0x138278[_0x5a2bac(0xb0)](_0x5a2bac(0xc7)+_0x5ab3e0);}catch(_0x51e1da){console[_0x5a2bac(0xc1)](_0x51e1da);}}),router[a0_0x56f204(0xb6)](a0_0x56f204(0xab),auth,async(_0x3d7e2d,_0x3387d0)=>{var _0x3a6f0e=a0_0x56f204;try{const _0x7f955d=await master_shop['find'](),_0x16de05=_0x3d7e2d['user'],_0x2a601c=await profile['findOne']({'email':_0x16de05[_0x3a6f0e(0x9a)]}),_0x56257b=await staff[_0x3a6f0e(0xbf)]({'email':_0x16de05[_0x3a6f0e(0x9a)],'type_of_acc_cat':'1'});let _0x4a3524=[];_0x56257b!=null&&(_0x4a3524=await sales_order[_0x3a6f0e(0xa5)]({'sales_staff_id':_0x56257b[_0x3a6f0e(0xb2)]}));if(_0x7f955d[0x0]['language']=='English\x20(US)')var _0x32207a=users[_0x3a6f0e(0xc0)];else{if(_0x7f955d[0x0][_0x3a6f0e(0x84)]==_0x3a6f0e(0xae))var _0x32207a=users[_0x3a6f0e(0xae)];else{if(_0x7f955d[0x0][_0x3a6f0e(0x84)]==_0x3a6f0e(0xb7))var _0x32207a=users[_0x3a6f0e(0xb7)];else{if(_0x7f955d[0x0]['language']==_0x3a6f0e(0xa6))var _0x32207a=users[_0x3a6f0e(0xa6)];else{if(_0x7f955d[0x0][_0x3a6f0e(0x84)]==_0x3a6f0e(0xd3))var _0x32207a=users[_0x3a6f0e(0xd3)];else{if(_0x7f955d[0x0][_0x3a6f0e(0x84)]==_0x3a6f0e(0x87))var _0x32207a=users['Portuguese'];else{if(_0x7f955d[0x0][_0x3a6f0e(0x84)]==_0x3a6f0e(0xb1))var _0x32207a=users[_0x3a6f0e(0xb1)];else{if(_0x7f955d[0x0][_0x3a6f0e(0x84)]==_0x3a6f0e(0xd4))var _0x32207a=users[_0x3a6f0e(0xcb)];}}}}}}}_0x3387d0[_0x3a6f0e(0xb8)](_0x3a6f0e(0x92),{'success':_0x3d7e2d['flash']('success'),'errors':_0x3d7e2d['flash']('errors'),'master_shop':_0x7f955d,'profile':_0x2a601c,'role':_0x16de05,'language':_0x32207a,'sales_mine':_0x4a3524,'staff_arr':_0x56257b});}catch(_0x238bc7){console['log'](_0x238bc7);}}),router[a0_0x56f204(0xb6)](a0_0x56f204(0xa3),auth,async(_0x1b648d,_0x577980)=>{var _0x2886bc=a0_0x56f204;try{const _0x345661=await master_shop['find'](),_0x2951cf=_0x1b648d['user'],_0x3583a9=await profile[_0x2886bc(0xbf)]({'email':_0x2951cf[_0x2886bc(0x9a)]}),_0x5ee2d3=await staff[_0x2886bc(0xbf)]({'email':_0x2951cf[_0x2886bc(0x9a)]}),_0x2ae6d8=await customer[_0x2886bc(0xa5)]({'agent_id':_0x5ee2d3[_0x2886bc(0xb2)]}),_0x426d14=_0x1b648d[_0x2886bc(0xad)]['id'],_0xfce74=await sales_order['findById'](_0x426d14);if(_0x345661[0x0]['language']==_0x2886bc(0xcf))var _0x98c94f=users[_0x2886bc(0xc0)];else{if(_0x345661[0x0][_0x2886bc(0x84)]==_0x2886bc(0xae))var _0x98c94f=users[_0x2886bc(0xae)];else{if(_0x345661[0x0]['language']==_0x2886bc(0xb7))var _0x98c94f=users[_0x2886bc(0xb7)];else{if(_0x345661[0x0][_0x2886bc(0x84)]==_0x2886bc(0xa6))var _0x98c94f=users[_0x2886bc(0xa6)];else{if(_0x345661[0x0]['language']==_0x2886bc(0xd3))var _0x98c94f=users['French'];else{if(_0x345661[0x0][_0x2886bc(0x84)]==_0x2886bc(0x87))var _0x98c94f=users[_0x2886bc(0xcc)];else{if(_0x345661[0x0][_0x2886bc(0x84)]==_0x2886bc(0xb1))var _0x98c94f=users[_0x2886bc(0xb1)];else{if(_0x345661[0x0]['language']=='Arabic\x20(ae)')var _0x98c94f=users[_0x2886bc(0xcb)];}}}}}}}_0x577980['render']('view_collections_so_xt',{'success':_0x1b648d['flash'](_0x2886bc(0x9e)),'errors':_0x1b648d[_0x2886bc(0xd2)](_0x2886bc(0xbb)),'master_shop':_0x345661,'profile':_0x3583a9,'role':_0x2951cf,'language':_0x98c94f,'customer':_0x2ae6d8,'sales_sa':_0xfce74,'staff_arr':_0x5ee2d3});}catch(_0x189c6d){console[_0x2886bc(0xc1)](_0x189c6d);}}),router['post'](a0_0x56f204(0xa3),auth,async(_0x11a3ae,_0x38072a)=>{var _0xdc1768=a0_0x56f204;try{const _0x35fae5=_0x11a3ae[_0xdc1768(0xad)]['id'],_0x26aac9=await sales_order[_0xdc1768(0x9f)](_0x35fae5),{collection:_0x183242,invoicemoney:_0x521aee,collectionnumber:_0x5790ad,typeofpayment:_0x15143b,cashdate:_0x51b147,id_detl:_0x5093c1}=_0x11a3ae[_0xdc1768(0xc6)];_0x26aac9[_0xdc1768(0xbe)]=_0x183242,_0x26aac9[_0xdc1768(0x99)]=_0x15143b,_0x26aac9[_0xdc1768(0x9d)]=_0x51b147,_0x26aac9['paid']=_0xdc1768(0x94),_0x26aac9['typeofprocess']='1';const _0x2eb6e4=await _0x26aac9['save']();_0x11a3ae[_0xdc1768(0xd2)](_0xdc1768(0x9e),_0xdc1768(0x8a)),_0x38072a[_0xdc1768(0xb0)]('/collection/view_so_xt/'+_0x35fae5);}catch(_0x2b3df5){console[_0xdc1768(0xc1)](_0x2b3df5);}}),module[a0_0x56f204(0xca)]=router;