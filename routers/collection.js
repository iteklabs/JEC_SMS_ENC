var a0_0x4f9b16=a0_0x1c1e;function a0_0x4c29(){var _0xb946a=['German','redirect','/view_x','/view/:id','totalcollection','get','render','ObjectId','exports','post','email','view_collections_sox','bo_disc','../public/language/languages.json','findById','43611iGEdIg','find','string','id_detl','20gcxSiX','body','paid','view_collections_xt','Spanish','collection_sox','language','forEach','map','757719bXhJLi','French','collection','True','errors','19002fFUuZy','log','English\x20(US)','/view_so_xt/:id','ewt','Types','fin_disc','5569663LxoCTg','totalNewPrice','Collection\x20Update\x20successfully','4199028BJnspU','vol_deals','Chinese','/collection/view_so_xt/','typeofprocess','collection_price','mongoose','length','valueOf','collection_so_xt','/view','/so_x','_id','10jLiAzz','flash','Arabic\x20(ae)','14NaxHTK','view_collections_so_xt','39JoDqsX','Portuguese\x20(BR)','519916mSxREH','success','save','English','777aKPFFH','983788xxNBmk','xlsx','/view_sox/:id','Router','express','cash_date','updateOne','../models/all_models','Portuguese','type_of_payment','json','findOne','8zyMPux','exceljs','spwp','collection_xt','Arabic','/view_xt/:id','/x_so','/collection/view/','user','Hindi','params'];a0_0x4c29=function(){return _0xb946a;};return a0_0x4c29();}(function(_0x29d0a4,_0x1c6618){var _0x42fb3f=a0_0x1c1e,_0x3fe74f=_0x29d0a4();while(!![]){try{var _0x5baf54=parseInt(_0x42fb3f(0x165))/0x1+-parseInt(_0x42fb3f(0x161))/0x2*(-parseInt(_0x42fb3f(0x190))/0x3)+parseInt(_0x42fb3f(0x16a))/0x4*(parseInt(_0x42fb3f(0x194))/0x5)+parseInt(_0x42fb3f(0x1a2))/0x6*(-parseInt(_0x42fb3f(0x169))/0x7)+parseInt(_0x42fb3f(0x176))/0x8*(-parseInt(_0x42fb3f(0x19d))/0x9)+parseInt(_0x42fb3f(0x15e))/0xa*(parseInt(_0x42fb3f(0x14e))/0xb)+-parseInt(_0x42fb3f(0x151))/0xc*(parseInt(_0x42fb3f(0x163))/0xd);if(_0x5baf54===_0x1c6618)break;else _0x3fe74f['push'](_0x3fe74f['shift']());}catch(_0x40ffa5){_0x3fe74f['push'](_0x3fe74f['shift']());}}}(a0_0x4c29,0x98e87));const express=require(a0_0x4f9b16(0x16e)),app=express(),router=express[a0_0x4f9b16(0x16d)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x4f9b16(0x171)),auth=require('../middleware/auth'),users=require(a0_0x4f9b16(0x18e)),excelJS=require(a0_0x4f9b16(0x177)),xlsx=require(a0_0x4f9b16(0x16b)),multer=require('multer'),mongoose=require(a0_0x4f9b16(0x157));function a0_0x1c1e(_0x47dd7d,_0x2d9683){var _0x4c2974=a0_0x4c29();return a0_0x1c1e=function(_0x1c1e97,_0x90047e){_0x1c1e97=_0x1c1e97-0x14a;var _0x4eada7=_0x4c2974[_0x1c1e97];return _0x4eada7;},a0_0x1c1e(_0x47dd7d,_0x2d9683);}router[a0_0x4f9b16(0x186)](a0_0x4f9b16(0x15b),auth,async(_0x1501c5,_0x1174a7)=>{var _0xe7d660=a0_0x4f9b16;try{const _0xc1bca5=await master_shop[_0xe7d660(0x191)](),_0xa2fdb6=_0x1501c5['user'],_0x327ca1=await profile[_0xe7d660(0x175)]({'email':_0xa2fdb6['email']}),_0x4a8cb0=await staff[_0xe7d660(0x175)]({'email':_0xa2fdb6[_0xe7d660(0x18b)],'type_of_acc_cat':'2'});let _0x2d6277=[];_0x4a8cb0!=null&&(_0x2d6277=await sales_order[_0xe7d660(0x191)]({'sales_staff_id':_0x4a8cb0['_id']}));if(_0xc1bca5[0x0][_0xe7d660(0x19a)]=='English\x20(US)')var _0x52b0fe=users[_0xe7d660(0x168)];else{if(_0xc1bca5[0x0][_0xe7d660(0x19a)]==_0xe7d660(0x17f))var _0x52b0fe=users[_0xe7d660(0x17f)];else{if(_0xc1bca5[0x0][_0xe7d660(0x19a)]==_0xe7d660(0x181))var _0x52b0fe=users[_0xe7d660(0x181)];else{if(_0xc1bca5[0x0][_0xe7d660(0x19a)]=='Spanish')var _0x52b0fe=users[_0xe7d660(0x198)];else{if(_0xc1bca5[0x0][_0xe7d660(0x19a)]==_0xe7d660(0x19e))var _0x52b0fe=users[_0xe7d660(0x19e)];else{if(_0xc1bca5[0x0]['language']==_0xe7d660(0x164))var _0x52b0fe=users['Portuguese'];else{if(_0xc1bca5[0x0][_0xe7d660(0x19a)]==_0xe7d660(0x153))var _0x52b0fe=users['Chinese'];else{if(_0xc1bca5[0x0][_0xe7d660(0x19a)]==_0xe7d660(0x160))var _0x52b0fe=users[_0xe7d660(0x17a)];}}}}}}}_0x1174a7[_0xe7d660(0x187)](_0xe7d660(0x19f),{'success':_0x1501c5[_0xe7d660(0x15f)](_0xe7d660(0x166)),'errors':_0x1501c5[_0xe7d660(0x15f)](_0xe7d660(0x1a1)),'master_shop':_0xc1bca5,'profile':_0x327ca1,'role':_0xa2fdb6,'language':_0x52b0fe,'sales_mine':_0x2d6277,'staff_arr':_0x4a8cb0});}catch(_0x1eed12){console[_0xe7d660(0x1a3)](_0x1eed12);}}),router['get']('/view/:id',auth,async(_0x593f2e,_0x50a855)=>{var _0x3c0bb8=a0_0x4f9b16;try{const _0x4c4477=await master_shop[_0x3c0bb8(0x191)](),_0x546fde=_0x593f2e[_0x3c0bb8(0x17e)],_0x48df80=await profile['findOne']({'email':_0x546fde[_0x3c0bb8(0x18b)]}),_0x4f03a6=await staff[_0x3c0bb8(0x175)]({'email':_0x546fde[_0x3c0bb8(0x18b)]}),_0x6dd693=await customer[_0x3c0bb8(0x191)]({'agent_id':_0x4f03a6[_0x3c0bb8(0x15d)]}),_0x169b34=_0x593f2e[_0x3c0bb8(0x180)]['id'],_0x44afcc=await sales_sa['findById'](_0x169b34);if(_0x4c4477[0x0][_0x3c0bb8(0x19a)]=='English\x20(US)')var _0x56d384=users[_0x3c0bb8(0x168)];else{if(_0x4c4477[0x0][_0x3c0bb8(0x19a)]==_0x3c0bb8(0x17f))var _0x56d384=users['Hindi'];else{if(_0x4c4477[0x0][_0x3c0bb8(0x19a)]=='German')var _0x56d384=users[_0x3c0bb8(0x181)];else{if(_0x4c4477[0x0][_0x3c0bb8(0x19a)]==_0x3c0bb8(0x198))var _0x56d384=users[_0x3c0bb8(0x198)];else{if(_0x4c4477[0x0][_0x3c0bb8(0x19a)]==_0x3c0bb8(0x19e))var _0x56d384=users['French'];else{if(_0x4c4477[0x0]['language']==_0x3c0bb8(0x164))var _0x56d384=users[_0x3c0bb8(0x172)];else{if(_0x4c4477[0x0][_0x3c0bb8(0x19a)]==_0x3c0bb8(0x153))var _0x56d384=users[_0x3c0bb8(0x153)];else{if(_0x4c4477[0x0][_0x3c0bb8(0x19a)]==_0x3c0bb8(0x160))var _0x56d384=users[_0x3c0bb8(0x17a)];}}}}}}}_0x50a855[_0x3c0bb8(0x187)]('view_collections',{'success':_0x593f2e[_0x3c0bb8(0x15f)](_0x3c0bb8(0x166)),'errors':_0x593f2e[_0x3c0bb8(0x15f)](_0x3c0bb8(0x1a1)),'master_shop':_0x4c4477,'profile':_0x48df80,'role':_0x546fde,'language':_0x56d384,'customer':_0x6dd693,'sales_sa':_0x44afcc,'staff_arr':_0x4f03a6});}catch(_0x38fe1a){console[_0x3c0bb8(0x1a3)](_0x38fe1a);}}),router['post'](a0_0x4f9b16(0x184),auth,async(_0x39e109,_0x5080e2)=>{var _0x257a09=a0_0x4f9b16;try{const _0x15a043=_0x39e109[_0x257a09(0x180)]['id'],_0xd0d77d=await sales_sa['findById'](_0x15a043),{collection:_0x4acbb2,invoicemoney:_0x342be4,collectionnumber:_0x2c4702,typeofpayment:_0x578eb1,cashdate:_0x119263,id_detl:_0x417b84}=_0x39e109[_0x257a09(0x195)];_0x5080e2[_0x257a09(0x174)](_0xd0d77d);return;if(typeof _0x417b84==_0x257a09(0x192))var _0x2fa71a=[_0x39e109[_0x257a09(0x195)][_0x257a09(0x193)]],_0x2166d5=[_0x39e109[_0x257a09(0x195)][_0x257a09(0x14b)]],_0x5a7905=[_0x39e109['body'][_0x257a09(0x178)]],_0x423c07=[_0x39e109[_0x257a09(0x195)][_0x257a09(0x14d)]],_0x252409=[_0x39e109[_0x257a09(0x195)][_0x257a09(0x152)]],_0x21e865=[_0x39e109['body'][_0x257a09(0x18d)]],_0x36e219=[_0x39e109[_0x257a09(0x195)][_0x257a09(0x14f)]];else var _0x2fa71a=[..._0x39e109['body'][_0x257a09(0x193)]],_0x2166d5=[..._0x39e109[_0x257a09(0x195)][_0x257a09(0x14b)]],_0x5a7905=[..._0x39e109[_0x257a09(0x195)][_0x257a09(0x178)]],_0x423c07=[..._0x39e109[_0x257a09(0x195)][_0x257a09(0x14d)]],_0x252409=[..._0x39e109[_0x257a09(0x195)][_0x257a09(0x152)]],_0x21e865=[..._0x39e109[_0x257a09(0x195)][_0x257a09(0x18d)]],_0x36e219=[..._0x39e109[_0x257a09(0x195)][_0x257a09(0x14f)]];const _0x281998=_0x2fa71a[_0x257a09(0x19c)](_0x599c6f=>{return _0x599c6f={'id_detl':_0x599c6f};});_0x2166d5[_0x257a09(0x19b)]((_0x12cb44,_0x45a83f)=>{var _0x410957=_0x257a09;_0x281998[_0x45a83f][_0x410957(0x14b)]=_0x12cb44;}),_0x5a7905[_0x257a09(0x19b)]((_0x94ff7e,_0x59306f)=>{var _0x390c63=_0x257a09;_0x281998[_0x59306f][_0x390c63(0x178)]=_0x94ff7e;}),_0x423c07[_0x257a09(0x19b)]((_0x17bdab,_0x3ff102)=>{var _0x32348b=_0x257a09;_0x281998[_0x3ff102][_0x32348b(0x14d)]=_0x17bdab;}),_0x252409['forEach']((_0x44047e,_0x2b024c)=>{_0x281998[_0x2b024c]['vol_deals']=_0x44047e;}),_0x21e865['forEach']((_0x2e873a,_0x197fcc)=>{_0x281998[_0x197fcc]['bo_disc']=_0x2e873a;}),_0x36e219['forEach']((_0xc6d908,_0x764a9e)=>{var _0x5edcf7=_0x257a09;_0x281998[_0x764a9e][_0x5edcf7(0x185)]=_0xc6d908;}),_0xd0d77d[_0x257a09(0x156)]=_0x4acbb2,_0xd0d77d['collectionnumber']=_0x2c4702,_0xd0d77d[_0x257a09(0x173)]=_0x578eb1,_0xd0d77d[_0x257a09(0x16f)]=_0x119263,_0xd0d77d[_0x257a09(0x196)]=_0x257a09(0x1a0);const _0x3b9fc5=await _0xd0d77d[_0x257a09(0x167)]();if(_0x3b9fc5[_0x257a09(0x196)]==_0x257a09(0x1a0))for(let _0x1a8865=0x0;_0x1a8865<=_0x281998[_0x257a09(0x158)]-0x1;_0x1a8865++){const _0x31e8bb=_0x281998[_0x1a8865],_0x37e0e2=mongoose[_0x257a09(0x14c)][_0x257a09(0x188)];console[_0x257a09(0x1a3)](_0x31e8bb);const _0x4204e3=await sales_sa[_0x257a09(0x170)]({'_id':_0x37e0e2(_0x15a043[_0x257a09(0x159)]()),'sale_product._id':_0x37e0e2(_0x31e8bb[_0x257a09(0x193)][_0x257a09(0x159)]())},{'$set':{'sale_product.$.ewt':_0x31e8bb['ewt'],'sale_product.$.spwp':_0x31e8bb[_0x257a09(0x178)],'sale_product.$.fin_disc':_0x31e8bb[_0x257a09(0x14d)],'sale_product.$.vol_deals':_0x31e8bb[_0x257a09(0x152)],'sale_product.$.bo_disc':_0x31e8bb[_0x257a09(0x18d)],'sale_product.$.totalprice':parseFloat(_0x31e8bb[_0x257a09(0x185)])}});}_0x39e109['flash']('success',_0x257a09(0x150)),_0x5080e2[_0x257a09(0x182)]('/collection/view/'+_0x15a043);}catch(_0xe56fd4){console[_0x257a09(0x1a3)](_0xe56fd4);}}),router[a0_0x4f9b16(0x186)](a0_0x4f9b16(0x17c),auth,async(_0xe281a8,_0x251f37)=>{var _0x38b9c5=a0_0x4f9b16;try{const _0x453cd3=await master_shop[_0x38b9c5(0x191)](),_0x229289=_0xe281a8['user'],_0x4bb703=await profile['findOne']({'email':_0x229289[_0x38b9c5(0x18b)]}),_0x239177=await staff[_0x38b9c5(0x175)]({'email':_0x229289[_0x38b9c5(0x18b)],'type_of_acc_cat':'2'});let _0x490ba1=[];_0x239177!=null&&(_0x490ba1=await sales_order[_0x38b9c5(0x191)]({'sales_staff_id':_0x239177[_0x38b9c5(0x15d)]}));console[_0x38b9c5(0x1a3)](_0x490ba1);if(_0x453cd3[0x0][_0x38b9c5(0x19a)]==_0x38b9c5(0x1a4))var _0x11ad43=users[_0x38b9c5(0x168)];else{if(_0x453cd3[0x0][_0x38b9c5(0x19a)]==_0x38b9c5(0x17f))var _0x11ad43=users['Hindi'];else{if(_0x453cd3[0x0][_0x38b9c5(0x19a)]==_0x38b9c5(0x181))var _0x11ad43=users[_0x38b9c5(0x181)];else{if(_0x453cd3[0x0]['language']==_0x38b9c5(0x198))var _0x11ad43=users['Spanish'];else{if(_0x453cd3[0x0][_0x38b9c5(0x19a)]==_0x38b9c5(0x19e))var _0x11ad43=users[_0x38b9c5(0x19e)];else{if(_0x453cd3[0x0][_0x38b9c5(0x19a)]==_0x38b9c5(0x164))var _0x11ad43=users[_0x38b9c5(0x172)];else{if(_0x453cd3[0x0][_0x38b9c5(0x19a)]=='Chinese')var _0x11ad43=users[_0x38b9c5(0x153)];else{if(_0x453cd3[0x0][_0x38b9c5(0x19a)]==_0x38b9c5(0x160))var _0x11ad43=users[_0x38b9c5(0x17a)];}}}}}}}_0x251f37[_0x38b9c5(0x187)](_0x38b9c5(0x199),{'success':_0xe281a8[_0x38b9c5(0x15f)](_0x38b9c5(0x166)),'errors':_0xe281a8['flash'](_0x38b9c5(0x1a1)),'master_shop':_0x453cd3,'profile':_0x4bb703,'role':_0x229289,'language':_0x11ad43,'sales_mine':_0x490ba1,'staff_arr':_0x239177});}catch(_0x2f0ecd){console['log'](_0x2f0ecd);}}),router['get'](a0_0x4f9b16(0x16c),auth,async(_0x670fff,_0x48c711)=>{var _0x4d1776=a0_0x4f9b16;try{const _0x5d9802=await master_shop[_0x4d1776(0x191)](),_0x79e39a=_0x670fff[_0x4d1776(0x17e)],_0x3a248e=await profile['findOne']({'email':_0x79e39a[_0x4d1776(0x18b)]}),_0x5e6b1f=await staff[_0x4d1776(0x175)]({'email':_0x79e39a[_0x4d1776(0x18b)]}),_0x2a1178=await customer[_0x4d1776(0x191)]({'agent_id':_0x5e6b1f[_0x4d1776(0x15d)]}),_0x4f2dc5=_0x670fff[_0x4d1776(0x180)]['id'],_0x18054e=await sales_order[_0x4d1776(0x18f)](_0x4f2dc5);if(_0x5d9802[0x0]['language']==_0x4d1776(0x1a4))var _0x365652=users[_0x4d1776(0x168)];else{if(_0x5d9802[0x0][_0x4d1776(0x19a)]==_0x4d1776(0x17f))var _0x365652=users[_0x4d1776(0x17f)];else{if(_0x5d9802[0x0][_0x4d1776(0x19a)]==_0x4d1776(0x181))var _0x365652=users['German'];else{if(_0x5d9802[0x0][_0x4d1776(0x19a)]=='Spanish')var _0x365652=users[_0x4d1776(0x198)];else{if(_0x5d9802[0x0]['language']==_0x4d1776(0x19e))var _0x365652=users[_0x4d1776(0x19e)];else{if(_0x5d9802[0x0][_0x4d1776(0x19a)]==_0x4d1776(0x164))var _0x365652=users[_0x4d1776(0x172)];else{if(_0x5d9802[0x0][_0x4d1776(0x19a)]==_0x4d1776(0x153))var _0x365652=users[_0x4d1776(0x153)];else{if(_0x5d9802[0x0]['language']==_0x4d1776(0x160))var _0x365652=users[_0x4d1776(0x17a)];}}}}}}}_0x48c711['render'](_0x4d1776(0x18c),{'success':_0x670fff[_0x4d1776(0x15f)](_0x4d1776(0x166)),'errors':_0x670fff[_0x4d1776(0x15f)](_0x4d1776(0x1a1)),'master_shop':_0x5d9802,'profile':_0x3a248e,'role':_0x79e39a,'language':_0x365652,'customer':_0x2a1178,'sales_sa':_0x18054e});}catch(_0x3fbd6c){console[_0x4d1776(0x1a3)](_0x3fbd6c);}}),router[a0_0x4f9b16(0x186)](a0_0x4f9b16(0x183),auth,async(_0xab1718,_0x4462fd)=>{var _0x4f84f4=a0_0x4f9b16;try{const _0x557321=await master_shop[_0x4f84f4(0x191)](),_0x15f8b5=_0xab1718[_0x4f84f4(0x17e)],_0x845c3e=await profile[_0x4f84f4(0x175)]({'email':_0x15f8b5['email']}),_0x12ef22=await staff[_0x4f84f4(0x175)]({'email':_0x15f8b5[_0x4f84f4(0x18b)],'type_of_acc_cat':'1'});let _0x23d8fa=[];_0x12ef22!=null&&(_0x23d8fa=await sales_sa[_0x4f84f4(0x191)]({'sales_staff_id':_0x12ef22['_id']}));if(_0x557321[0x0][_0x4f84f4(0x19a)]==_0x4f84f4(0x1a4))var _0x2bb2e5=users[_0x4f84f4(0x168)];else{if(_0x557321[0x0][_0x4f84f4(0x19a)]=='Hindi')var _0x2bb2e5=users['Hindi'];else{if(_0x557321[0x0]['language']==_0x4f84f4(0x181))var _0x2bb2e5=users[_0x4f84f4(0x181)];else{if(_0x557321[0x0][_0x4f84f4(0x19a)]==_0x4f84f4(0x198))var _0x2bb2e5=users[_0x4f84f4(0x198)];else{if(_0x557321[0x0][_0x4f84f4(0x19a)]==_0x4f84f4(0x19e))var _0x2bb2e5=users[_0x4f84f4(0x19e)];else{if(_0x557321[0x0]['language']==_0x4f84f4(0x164))var _0x2bb2e5=users[_0x4f84f4(0x172)];else{if(_0x557321[0x0][_0x4f84f4(0x19a)]==_0x4f84f4(0x153))var _0x2bb2e5=users['Chinese'];else{if(_0x557321[0x0][_0x4f84f4(0x19a)]==_0x4f84f4(0x160))var _0x2bb2e5=users[_0x4f84f4(0x17a)];}}}}}}}_0x4462fd[_0x4f84f4(0x187)](_0x4f84f4(0x179),{'success':_0xab1718[_0x4f84f4(0x15f)](_0x4f84f4(0x166)),'errors':_0xab1718['flash'](_0x4f84f4(0x1a1)),'master_shop':_0x557321,'profile':_0x845c3e,'role':_0x15f8b5,'language':_0x2bb2e5,'sales_mine':_0x23d8fa,'staff_arr':_0x12ef22});}catch(_0x350074){console[_0x4f84f4(0x1a3)](_0x350074);}}),router[a0_0x4f9b16(0x186)](a0_0x4f9b16(0x17b),auth,async(_0x1bb49c,_0x46d207)=>{var _0x268774=a0_0x4f9b16;try{const _0xb713bf=await master_shop['find'](),_0x179181=_0x1bb49c[_0x268774(0x17e)],_0x56b09a=await profile[_0x268774(0x175)]({'email':_0x179181[_0x268774(0x18b)]}),_0xf7e568=await staff['findOne']({'email':_0x179181[_0x268774(0x18b)]}),_0x3ab3cf=await customer[_0x268774(0x191)]({'agent_id':_0xf7e568[_0x268774(0x15d)]}),_0x5524cc=_0x1bb49c[_0x268774(0x180)]['id'],_0x15270a=await sales_sa[_0x268774(0x18f)](_0x5524cc);if(_0xb713bf[0x0][_0x268774(0x19a)]==_0x268774(0x1a4))var _0x45fae9=users['English'];else{if(_0xb713bf[0x0][_0x268774(0x19a)]==_0x268774(0x17f))var _0x45fae9=users[_0x268774(0x17f)];else{if(_0xb713bf[0x0]['language']==_0x268774(0x181))var _0x45fae9=users[_0x268774(0x181)];else{if(_0xb713bf[0x0][_0x268774(0x19a)]=='Spanish')var _0x45fae9=users[_0x268774(0x198)];else{if(_0xb713bf[0x0][_0x268774(0x19a)]=='French')var _0x45fae9=users[_0x268774(0x19e)];else{if(_0xb713bf[0x0]['language']==_0x268774(0x164))var _0x45fae9=users[_0x268774(0x172)];else{if(_0xb713bf[0x0][_0x268774(0x19a)]==_0x268774(0x153))var _0x45fae9=users[_0x268774(0x153)];else{if(_0xb713bf[0x0][_0x268774(0x19a)]==_0x268774(0x160))var _0x45fae9=users[_0x268774(0x17a)];}}}}}}}_0x46d207[_0x268774(0x187)](_0x268774(0x197),{'success':_0x1bb49c[_0x268774(0x15f)](_0x268774(0x166)),'errors':_0x1bb49c[_0x268774(0x15f)](_0x268774(0x1a1)),'master_shop':_0xb713bf,'profile':_0x56b09a,'role':_0x179181,'language':_0x45fae9,'customer':_0x3ab3cf,'sales_sa':_0x15270a,'staff_arr':_0xf7e568});}catch(_0x515b37){console['log'](_0x515b37);}}),router[a0_0x4f9b16(0x18a)](a0_0x4f9b16(0x17b),auth,async(_0x556a6b,_0x288eb6)=>{var _0x386831=a0_0x4f9b16;try{const _0x4190c2=_0x556a6b[_0x386831(0x180)]['id'],_0x26cec0=await sales_sa[_0x386831(0x18f)](_0x4190c2),{collection:_0x5ecf53,invoicemoney:_0x492f91,collectionnumber:_0x189485,typeofpayment:_0x410cf7,cashdate:_0x161759,id_detl:_0x525493}=_0x556a6b[_0x386831(0x195)];if(typeof _0x525493==_0x386831(0x192))var _0x4a8813=[_0x556a6b[_0x386831(0x195)][_0x386831(0x193)]],_0x4fad86=[_0x556a6b['body']['ewt']],_0x1b9c3b=[_0x556a6b[_0x386831(0x195)]['spwp']],_0x2c3e6f=[_0x556a6b[_0x386831(0x195)][_0x386831(0x14d)]],_0x50b847=[_0x556a6b[_0x386831(0x195)][_0x386831(0x152)]],_0x3ccf74=[_0x556a6b[_0x386831(0x195)][_0x386831(0x18d)]],_0x49bd3e=[_0x556a6b[_0x386831(0x195)]['totalNewPrice']];else var _0x4a8813=[..._0x556a6b[_0x386831(0x195)][_0x386831(0x193)]],_0x4fad86=[..._0x556a6b['body'][_0x386831(0x14b)]],_0x1b9c3b=[..._0x556a6b[_0x386831(0x195)][_0x386831(0x178)]],_0x2c3e6f=[..._0x556a6b[_0x386831(0x195)][_0x386831(0x14d)]],_0x50b847=[..._0x556a6b[_0x386831(0x195)][_0x386831(0x152)]],_0x3ccf74=[..._0x556a6b[_0x386831(0x195)]['bo_disc']],_0x49bd3e=[..._0x556a6b[_0x386831(0x195)]['totalNewPrice']];const _0x35982c=_0x4a8813[_0x386831(0x19c)](_0x45e64e=>{return _0x45e64e={'id_detl':_0x45e64e};});_0x4fad86[_0x386831(0x19b)]((_0x585a77,_0x26eaa3)=>{var _0x2aa43d=_0x386831;_0x35982c[_0x26eaa3][_0x2aa43d(0x14b)]=_0x585a77;}),_0x1b9c3b[_0x386831(0x19b)]((_0x21fbcd,_0x3504e6)=>{_0x35982c[_0x3504e6]['spwp']=_0x21fbcd;}),_0x2c3e6f[_0x386831(0x19b)]((_0x266146,_0x3bb8bd)=>{var _0x37439d=_0x386831;_0x35982c[_0x3bb8bd][_0x37439d(0x14d)]=_0x266146;}),_0x50b847['forEach']((_0x3d457f,_0x23d4d4)=>{_0x35982c[_0x23d4d4]['vol_deals']=_0x3d457f;}),_0x3ccf74[_0x386831(0x19b)]((_0x11d241,_0x5b1220)=>{var _0x6b61d2=_0x386831;_0x35982c[_0x5b1220][_0x6b61d2(0x18d)]=_0x11d241;}),_0x49bd3e[_0x386831(0x19b)]((_0x3645b6,_0x375ff0)=>{var _0x460f80=_0x386831;_0x35982c[_0x375ff0][_0x460f80(0x185)]=_0x3645b6;}),_0x26cec0['collection_price']=_0x5ecf53,_0x26cec0['collectionnumber']=_0x189485,_0x26cec0[_0x386831(0x173)]=_0x410cf7,_0x26cec0['cash_date']=_0x161759,_0x26cec0[_0x386831(0x196)]=_0x386831(0x1a0),_0x26cec0[_0x386831(0x155)]='1';const _0x2d1ea7=await _0x26cec0['save']();if(_0x2d1ea7[_0x386831(0x196)]==_0x386831(0x1a0))for(let _0x485d59=0x0;_0x485d59<=_0x35982c[_0x386831(0x158)]-0x1;_0x485d59++){const _0x56a6bc=_0x35982c[_0x485d59],_0x5f4e41=mongoose[_0x386831(0x14c)]['ObjectId'];console[_0x386831(0x1a3)](_0x56a6bc);const _0x3592a6=await sales_sa[_0x386831(0x170)]({'_id':_0x5f4e41(_0x4190c2[_0x386831(0x159)]()),'sale_product._id':_0x5f4e41(_0x56a6bc[_0x386831(0x193)][_0x386831(0x159)]())},{'$set':{'sale_product.$.ewt':_0x56a6bc[_0x386831(0x14b)],'sale_product.$.spwp':_0x56a6bc['spwp'],'sale_product.$.fin_disc':_0x56a6bc[_0x386831(0x14d)],'sale_product.$.vol_deals':_0x56a6bc[_0x386831(0x152)],'sale_product.$.bo_disc':_0x56a6bc[_0x386831(0x18d)],'sale_product.$.totalprice':parseFloat(_0x56a6bc[_0x386831(0x185)])}});}_0x556a6b['flash'](_0x386831(0x166),_0x386831(0x150)),_0x288eb6[_0x386831(0x182)](_0x386831(0x17d)+_0x4190c2);}catch(_0x1810de){console['log'](_0x1810de);}}),router[a0_0x4f9b16(0x186)](a0_0x4f9b16(0x15c),auth,async(_0x5e4bcc,_0x1ed2e8)=>{var _0x160f05=a0_0x4f9b16;try{const _0x4cbfe0=await master_shop['find'](),_0x3f351e=_0x5e4bcc[_0x160f05(0x17e)],_0x22e6e7=await profile[_0x160f05(0x175)]({'email':_0x3f351e[_0x160f05(0x18b)]}),_0x5575ff=await staff['findOne']({'email':_0x3f351e['email'],'type_of_acc_cat':'1'});let _0x5369f5=[];_0x5575ff!=null&&(_0x5369f5=await sales_order[_0x160f05(0x191)]({'sales_staff_id':_0x5575ff[_0x160f05(0x15d)]}));if(_0x4cbfe0[0x0][_0x160f05(0x19a)]==_0x160f05(0x1a4))var _0xd097ff=users[_0x160f05(0x168)];else{if(_0x4cbfe0[0x0][_0x160f05(0x19a)]==_0x160f05(0x17f))var _0xd097ff=users[_0x160f05(0x17f)];else{if(_0x4cbfe0[0x0]['language']=='German')var _0xd097ff=users[_0x160f05(0x181)];else{if(_0x4cbfe0[0x0][_0x160f05(0x19a)]=='Spanish')var _0xd097ff=users[_0x160f05(0x198)];else{if(_0x4cbfe0[0x0][_0x160f05(0x19a)]==_0x160f05(0x19e))var _0xd097ff=users[_0x160f05(0x19e)];else{if(_0x4cbfe0[0x0][_0x160f05(0x19a)]=='Portuguese\x20(BR)')var _0xd097ff=users[_0x160f05(0x172)];else{if(_0x4cbfe0[0x0][_0x160f05(0x19a)]==_0x160f05(0x153))var _0xd097ff=users[_0x160f05(0x153)];else{if(_0x4cbfe0[0x0][_0x160f05(0x19a)]==_0x160f05(0x160))var _0xd097ff=users[_0x160f05(0x17a)];}}}}}}}_0x1ed2e8['render'](_0x160f05(0x15a),{'success':_0x5e4bcc[_0x160f05(0x15f)]('success'),'errors':_0x5e4bcc['flash'](_0x160f05(0x1a1)),'master_shop':_0x4cbfe0,'profile':_0x22e6e7,'role':_0x3f351e,'language':_0xd097ff,'sales_mine':_0x5369f5,'staff_arr':_0x5575ff});}catch(_0x3a7498){console[_0x160f05(0x1a3)](_0x3a7498);}}),router[a0_0x4f9b16(0x186)](a0_0x4f9b16(0x14a),auth,async(_0x2591f7,_0xe5ad0a)=>{var _0x29d526=a0_0x4f9b16;try{const _0x4e7d12=await master_shop['find'](),_0x2948d1=_0x2591f7['user'],_0x5cf995=await profile[_0x29d526(0x175)]({'email':_0x2948d1['email']}),_0x30eff0=await staff[_0x29d526(0x175)]({'email':_0x2948d1[_0x29d526(0x18b)]}),_0xebd5d5=await customer['find']({'agent_id':_0x30eff0[_0x29d526(0x15d)]}),_0x396e66=_0x2591f7[_0x29d526(0x180)]['id'],_0x5aa847=await sales_order[_0x29d526(0x18f)](_0x396e66);if(_0x4e7d12[0x0][_0x29d526(0x19a)]==_0x29d526(0x1a4))var _0x530f92=users['English'];else{if(_0x4e7d12[0x0][_0x29d526(0x19a)]==_0x29d526(0x17f))var _0x530f92=users[_0x29d526(0x17f)];else{if(_0x4e7d12[0x0][_0x29d526(0x19a)]==_0x29d526(0x181))var _0x530f92=users['German'];else{if(_0x4e7d12[0x0][_0x29d526(0x19a)]=='Spanish')var _0x530f92=users[_0x29d526(0x198)];else{if(_0x4e7d12[0x0][_0x29d526(0x19a)]==_0x29d526(0x19e))var _0x530f92=users['French'];else{if(_0x4e7d12[0x0][_0x29d526(0x19a)]=='Portuguese\x20(BR)')var _0x530f92=users['Portuguese'];else{if(_0x4e7d12[0x0][_0x29d526(0x19a)]=='Chinese')var _0x530f92=users['Chinese'];else{if(_0x4e7d12[0x0][_0x29d526(0x19a)]==_0x29d526(0x160))var _0x530f92=users[_0x29d526(0x17a)];}}}}}}}_0xe5ad0a[_0x29d526(0x187)](_0x29d526(0x162),{'success':_0x2591f7[_0x29d526(0x15f)](_0x29d526(0x166)),'errors':_0x2591f7['flash'](_0x29d526(0x1a1)),'master_shop':_0x4e7d12,'profile':_0x5cf995,'role':_0x2948d1,'language':_0x530f92,'customer':_0xebd5d5,'sales_sa':_0x5aa847,'staff_arr':_0x30eff0});}catch(_0x17cee7){console['log'](_0x17cee7);}}),router[a0_0x4f9b16(0x18a)]('/view_so_xt/:id',auth,async(_0x563062,_0x3f2b51)=>{var _0x3c0c0e=a0_0x4f9b16;try{const _0x5a74a8=_0x563062[_0x3c0c0e(0x180)]['id'],_0x49947d=await sales_order[_0x3c0c0e(0x18f)](_0x5a74a8),{collection:_0x322dde,invoicemoney:_0x4a6169,collectionnumber:_0x1aaa77,typeofpayment:_0x4b9721,cashdate:_0x3de7a2,id_detl:_0x273650}=_0x563062[_0x3c0c0e(0x195)];_0x49947d[_0x3c0c0e(0x156)]=_0x322dde,_0x49947d[_0x3c0c0e(0x173)]=_0x4b9721,_0x49947d[_0x3c0c0e(0x16f)]=_0x3de7a2,_0x49947d['paid']='True',_0x49947d[_0x3c0c0e(0x155)]='1';const _0x2df366=await _0x49947d['save']();_0x563062['flash'](_0x3c0c0e(0x166),_0x3c0c0e(0x150)),_0x3f2b51['redirect'](_0x3c0c0e(0x154)+_0x5a74a8);}catch(_0xe46c2b){console[_0x3c0c0e(0x1a3)](_0xe46c2b);}}),module[a0_0x4f9b16(0x189)]=router;