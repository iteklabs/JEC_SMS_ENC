function a0_0xa5f4(){var _0x3a20c9=['/view_x','25XzJMjU','collection_xt','collection_sox','/view/:id','valueOf','/view_sox/:id','717416JJxgpL','Collection\x20Update\x20successfully','6128784EuYDrr','English\x20(US)','user','view_collections','English','/so_x','language','Types','exceljs','totalNewPrice','totalcollection','findOne','collection','updateOne','vol_deals','view_collections_so_xt','map','fin_disc','find','collectionnumber','post','get','mongoose','/view_so_xt/:id','multer','spwp','id_detl','type_of_payment','ObjectId','Spanish','../models/all_models','findById','../public/language/languages.json','Arabic\x20(ae)','email','2006094zATYBG','Hindi','string','log','True','flash','forEach','../middleware/auth','/view','German','length','bo_disc','Arabic','body','/collection/view/','ewt','569482PoRDis','save','collection_price','_id','redirect','success','Portuguese','1797XjgeHw','229996YQMMnq','typeofprocess','express','cash_date','/view_xt/:id','params','French','render','Portuguese\x20(BR)','1057053YZtxdj','errors','/collection/view_so_xt/','paid','Chinese'];a0_0xa5f4=function(){return _0x3a20c9;};return a0_0xa5f4();}function a0_0x5586(_0x38eebb,_0x45328f){var _0xa5f466=a0_0xa5f4();return a0_0x5586=function(_0x5586ff,_0x126742){_0x5586ff=_0x5586ff-0x12c;var _0x4e53ec=_0xa5f466[_0x5586ff];return _0x4e53ec;},a0_0x5586(_0x38eebb,_0x45328f);}var a0_0x1e97af=a0_0x5586;(function(_0x1fb5b3,_0xa8ed48){var _0x595184=a0_0x5586,_0x2ba984=_0x1fb5b3();while(!![]){try{var _0x54b90c=parseInt(_0x595184(0x147))/0x1+-parseInt(_0x595184(0x140))/0x2+-parseInt(_0x595184(0x151))/0x3+parseInt(_0x595184(0x148))/0x4*(parseInt(_0x595184(0x157))/0x5)+-parseInt(_0x595184(0x130))/0x6+parseInt(_0x595184(0x15d))/0x7+parseInt(_0x595184(0x15f))/0x8;if(_0x54b90c===_0xa8ed48)break;else _0x2ba984['push'](_0x2ba984['shift']());}catch(_0x5ad837){_0x2ba984['push'](_0x2ba984['shift']());}}}(a0_0xa5f4,0x2d845));const express=require(a0_0x1e97af(0x14a)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x1e97af(0x17d)),auth=require(a0_0x1e97af(0x137)),users=require(a0_0x1e97af(0x12d)),excelJS=require(a0_0x1e97af(0x167)),xlsx=require('xlsx'),multer=require(a0_0x1e97af(0x177)),mongoose=require(a0_0x1e97af(0x175));router['get'](a0_0x1e97af(0x138),auth,async(_0x4120e9,_0x2d289b)=>{var _0x140412=a0_0x1e97af;try{const _0x27f97e=await master_shop[_0x140412(0x171)](),_0xb3863d=_0x4120e9['user'],_0x5903d7=await profile['findOne']({'email':_0xb3863d[_0x140412(0x12f)]}),_0xb94d8f=await staff[_0x140412(0x16a)]({'email':_0xb3863d[_0x140412(0x12f)],'type_of_acc_cat':'2'});let _0x12448b=[];_0xb94d8f!=null&&(_0x12448b=await sales_order['find']({'sales_staff_id':_0xb94d8f[_0x140412(0x143)]}));if(_0x27f97e[0x0][_0x140412(0x165)]==_0x140412(0x160))var _0x2a65cb=users[_0x140412(0x163)];else{if(_0x27f97e[0x0][_0x140412(0x165)]==_0x140412(0x131))var _0x2a65cb=users['Hindi'];else{if(_0x27f97e[0x0][_0x140412(0x165)]==_0x140412(0x139))var _0x2a65cb=users[_0x140412(0x139)];else{if(_0x27f97e[0x0][_0x140412(0x165)]==_0x140412(0x17c))var _0x2a65cb=users[_0x140412(0x17c)];else{if(_0x27f97e[0x0][_0x140412(0x165)]==_0x140412(0x14e))var _0x2a65cb=users[_0x140412(0x14e)];else{if(_0x27f97e[0x0][_0x140412(0x165)]=='Portuguese\x20(BR)')var _0x2a65cb=users[_0x140412(0x146)];else{if(_0x27f97e[0x0]['language']==_0x140412(0x155))var _0x2a65cb=users[_0x140412(0x155)];else{if(_0x27f97e[0x0][_0x140412(0x165)]==_0x140412(0x12e))var _0x2a65cb=users['Arabic'];}}}}}}}_0x2d289b['render'](_0x140412(0x16b),{'success':_0x4120e9[_0x140412(0x135)]('success'),'errors':_0x4120e9[_0x140412(0x135)](_0x140412(0x152)),'master_shop':_0x27f97e,'profile':_0x5903d7,'role':_0xb3863d,'language':_0x2a65cb,'sales_mine':_0x12448b,'staff_arr':_0xb94d8f});}catch(_0x32e869){console[_0x140412(0x133)](_0x32e869);}}),router[a0_0x1e97af(0x174)](a0_0x1e97af(0x15a),auth,async(_0x2e0458,_0x3c0d49)=>{var _0x2a2d76=a0_0x1e97af;try{const _0x3c3e6b=await master_shop[_0x2a2d76(0x171)](),_0x22dc60=_0x2e0458[_0x2a2d76(0x161)],_0x5ce361=await profile[_0x2a2d76(0x16a)]({'email':_0x22dc60[_0x2a2d76(0x12f)]}),_0x1660e8=await staff[_0x2a2d76(0x16a)]({'email':_0x22dc60[_0x2a2d76(0x12f)]}),_0x247e6f=await customer[_0x2a2d76(0x171)]({'agent_id':_0x1660e8[_0x2a2d76(0x143)]}),_0x51790f=_0x2e0458[_0x2a2d76(0x14d)]['id'],_0x53f6ba=await sales_sa[_0x2a2d76(0x12c)](_0x51790f);if(_0x3c3e6b[0x0]['language']==_0x2a2d76(0x160))var _0x5bedfa=users[_0x2a2d76(0x163)];else{if(_0x3c3e6b[0x0]['language']==_0x2a2d76(0x131))var _0x5bedfa=users[_0x2a2d76(0x131)];else{if(_0x3c3e6b[0x0][_0x2a2d76(0x165)]==_0x2a2d76(0x139))var _0x5bedfa=users[_0x2a2d76(0x139)];else{if(_0x3c3e6b[0x0][_0x2a2d76(0x165)]==_0x2a2d76(0x17c))var _0x5bedfa=users[_0x2a2d76(0x17c)];else{if(_0x3c3e6b[0x0][_0x2a2d76(0x165)]==_0x2a2d76(0x14e))var _0x5bedfa=users['French'];else{if(_0x3c3e6b[0x0][_0x2a2d76(0x165)]=='Portuguese\x20(BR)')var _0x5bedfa=users[_0x2a2d76(0x146)];else{if(_0x3c3e6b[0x0]['language']==_0x2a2d76(0x155))var _0x5bedfa=users[_0x2a2d76(0x155)];else{if(_0x3c3e6b[0x0]['language']==_0x2a2d76(0x12e))var _0x5bedfa=users[_0x2a2d76(0x13c)];}}}}}}}_0x3c0d49[_0x2a2d76(0x14f)](_0x2a2d76(0x162),{'success':_0x2e0458[_0x2a2d76(0x135)]('success'),'errors':_0x2e0458[_0x2a2d76(0x135)](_0x2a2d76(0x152)),'master_shop':_0x3c3e6b,'profile':_0x5ce361,'role':_0x22dc60,'language':_0x5bedfa,'customer':_0x247e6f,'sales_sa':_0x53f6ba,'staff_arr':_0x1660e8});}catch(_0x3c0298){console[_0x2a2d76(0x133)](_0x3c0298);}}),router['post'](a0_0x1e97af(0x15a),auth,async(_0x4446ac,_0x2afa10)=>{var _0x1cab74=a0_0x1e97af;try{const _0x57efc7=_0x4446ac[_0x1cab74(0x14d)]['id'],_0xc21730=await sales_sa['findById'](_0x57efc7),{collection:_0x52afdb,invoicemoney:_0x2eb0fd,collectionnumber:_0x43c392,typeofpayment:_0x291986,cashdate:_0xd32fe3,id_detl:_0x53ebba}=_0x4446ac[_0x1cab74(0x13d)];_0x2afa10['json'](_0xc21730);return;if(typeof _0x53ebba==_0x1cab74(0x132))var _0x2b666b=[_0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x179)]],_0x228a36=[_0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x13f)]],_0x5b92eb=[_0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x178)]],_0x28f792=[_0x4446ac['body'][_0x1cab74(0x170)]],_0x3d2023=[_0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x16d)]],_0x575258=[_0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x13b)]],_0x19654c=[_0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x168)]];else var _0x2b666b=[..._0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x179)]],_0x228a36=[..._0x4446ac['body'][_0x1cab74(0x13f)]],_0x5b92eb=[..._0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x178)]],_0x28f792=[..._0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x170)]],_0x3d2023=[..._0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x16d)]],_0x575258=[..._0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x13b)]],_0x19654c=[..._0x4446ac[_0x1cab74(0x13d)][_0x1cab74(0x168)]];const _0x5602ad=_0x2b666b[_0x1cab74(0x16f)](_0x103d9e=>{return _0x103d9e={'id_detl':_0x103d9e};});_0x228a36['forEach']((_0x368d6f,_0x5bf15a)=>{_0x5602ad[_0x5bf15a]['ewt']=_0x368d6f;}),_0x5b92eb[_0x1cab74(0x136)]((_0x181cef,_0x4c26ed)=>{var _0x1292a8=_0x1cab74;_0x5602ad[_0x4c26ed][_0x1292a8(0x178)]=_0x181cef;}),_0x28f792[_0x1cab74(0x136)]((_0x1bff0e,_0x7fe8c9)=>{var _0x31acc0=_0x1cab74;_0x5602ad[_0x7fe8c9][_0x31acc0(0x170)]=_0x1bff0e;}),_0x3d2023['forEach']((_0x3c95fc,_0x45ac98)=>{var _0x5b6b51=_0x1cab74;_0x5602ad[_0x45ac98][_0x5b6b51(0x16d)]=_0x3c95fc;}),_0x575258['forEach']((_0x202038,_0x2b01b1)=>{var _0xbfb145=_0x1cab74;_0x5602ad[_0x2b01b1][_0xbfb145(0x13b)]=_0x202038;}),_0x19654c[_0x1cab74(0x136)]((_0x4ca25b,_0x5eb912)=>{_0x5602ad[_0x5eb912]['totalcollection']=_0x4ca25b;}),_0xc21730['collection_price']=_0x52afdb,_0xc21730['collectionnumber']=_0x43c392,_0xc21730[_0x1cab74(0x17a)]=_0x291986,_0xc21730['cash_date']=_0xd32fe3,_0xc21730[_0x1cab74(0x154)]='True';const _0x391e8d=await _0xc21730[_0x1cab74(0x141)]();if(_0x391e8d[_0x1cab74(0x154)]==_0x1cab74(0x134))for(let _0x40b54d=0x0;_0x40b54d<=_0x5602ad['length']-0x1;_0x40b54d++){const _0x55cb64=_0x5602ad[_0x40b54d],_0x2700e7=mongoose[_0x1cab74(0x166)][_0x1cab74(0x17b)];console[_0x1cab74(0x133)](_0x55cb64);const _0x1c6db1=await sales_sa[_0x1cab74(0x16c)]({'_id':_0x2700e7(_0x57efc7['valueOf']()),'sale_product._id':_0x2700e7(_0x55cb64[_0x1cab74(0x179)][_0x1cab74(0x15b)]())},{'$set':{'sale_product.$.ewt':_0x55cb64['ewt'],'sale_product.$.spwp':_0x55cb64[_0x1cab74(0x178)],'sale_product.$.fin_disc':_0x55cb64[_0x1cab74(0x170)],'sale_product.$.vol_deals':_0x55cb64['vol_deals'],'sale_product.$.bo_disc':_0x55cb64['bo_disc'],'sale_product.$.totalprice':parseFloat(_0x55cb64['totalcollection'])}});}_0x4446ac['flash'](_0x1cab74(0x145),_0x1cab74(0x15e)),_0x2afa10[_0x1cab74(0x144)](_0x1cab74(0x13e)+_0x57efc7);}catch(_0x1ef83){console['log'](_0x1ef83);}}),router[a0_0x1e97af(0x174)]('/x_so',auth,async(_0x5bd4ba,_0x43ccf1)=>{var _0x118bf2=a0_0x1e97af;try{const _0x45aa8e=await master_shop['find'](),_0x22cb3e=_0x5bd4ba['user'],_0x2b553d=await profile[_0x118bf2(0x16a)]({'email':_0x22cb3e[_0x118bf2(0x12f)]}),_0x27f1a4=await staff[_0x118bf2(0x16a)]({'email':_0x22cb3e['email'],'type_of_acc_cat':'2'});let _0xa47b04=[];_0x27f1a4!=null&&(_0xa47b04=await sales_order[_0x118bf2(0x171)]({'sales_staff_id':_0x27f1a4[_0x118bf2(0x143)]}));console[_0x118bf2(0x133)](_0xa47b04);if(_0x45aa8e[0x0]['language']==_0x118bf2(0x160))var _0x2fe154=users[_0x118bf2(0x163)];else{if(_0x45aa8e[0x0][_0x118bf2(0x165)]==_0x118bf2(0x131))var _0x2fe154=users[_0x118bf2(0x131)];else{if(_0x45aa8e[0x0][_0x118bf2(0x165)]==_0x118bf2(0x139))var _0x2fe154=users[_0x118bf2(0x139)];else{if(_0x45aa8e[0x0][_0x118bf2(0x165)]=='Spanish')var _0x2fe154=users[_0x118bf2(0x17c)];else{if(_0x45aa8e[0x0]['language']==_0x118bf2(0x14e))var _0x2fe154=users[_0x118bf2(0x14e)];else{if(_0x45aa8e[0x0][_0x118bf2(0x165)]==_0x118bf2(0x150))var _0x2fe154=users[_0x118bf2(0x146)];else{if(_0x45aa8e[0x0][_0x118bf2(0x165)]=='Chinese')var _0x2fe154=users['Chinese'];else{if(_0x45aa8e[0x0][_0x118bf2(0x165)]=='Arabic\x20(ae)')var _0x2fe154=users[_0x118bf2(0x13c)];}}}}}}}_0x43ccf1[_0x118bf2(0x14f)](_0x118bf2(0x159),{'success':_0x5bd4ba[_0x118bf2(0x135)](_0x118bf2(0x145)),'errors':_0x5bd4ba['flash'](_0x118bf2(0x152)),'master_shop':_0x45aa8e,'profile':_0x2b553d,'role':_0x22cb3e,'language':_0x2fe154,'sales_mine':_0xa47b04,'staff_arr':_0x27f1a4});}catch(_0x1f922a){console['log'](_0x1f922a);}}),router[a0_0x1e97af(0x174)](a0_0x1e97af(0x15c),auth,async(_0x42f204,_0x337fd8)=>{var _0x4c3e19=a0_0x1e97af;try{const _0x4320c2=await master_shop[_0x4c3e19(0x171)](),_0x37b30e=_0x42f204['user'],_0x7c0c43=await profile[_0x4c3e19(0x16a)]({'email':_0x37b30e['email']}),_0x383961=await staff[_0x4c3e19(0x16a)]({'email':_0x37b30e[_0x4c3e19(0x12f)]}),_0x3d2a7a=await customer[_0x4c3e19(0x171)]({'agent_id':_0x383961[_0x4c3e19(0x143)]}),_0x31cc57=_0x42f204[_0x4c3e19(0x14d)]['id'],_0x516587=await sales_order['findById'](_0x31cc57);if(_0x4320c2[0x0][_0x4c3e19(0x165)]==_0x4c3e19(0x160))var _0x51d30c=users[_0x4c3e19(0x163)];else{if(_0x4320c2[0x0]['language']==_0x4c3e19(0x131))var _0x51d30c=users[_0x4c3e19(0x131)];else{if(_0x4320c2[0x0][_0x4c3e19(0x165)]=='German')var _0x51d30c=users['German'];else{if(_0x4320c2[0x0][_0x4c3e19(0x165)]==_0x4c3e19(0x17c))var _0x51d30c=users['Spanish'];else{if(_0x4320c2[0x0][_0x4c3e19(0x165)]==_0x4c3e19(0x14e))var _0x51d30c=users[_0x4c3e19(0x14e)];else{if(_0x4320c2[0x0][_0x4c3e19(0x165)]==_0x4c3e19(0x150))var _0x51d30c=users[_0x4c3e19(0x146)];else{if(_0x4320c2[0x0][_0x4c3e19(0x165)]==_0x4c3e19(0x155))var _0x51d30c=users[_0x4c3e19(0x155)];else{if(_0x4320c2[0x0][_0x4c3e19(0x165)]==_0x4c3e19(0x12e))var _0x51d30c=users[_0x4c3e19(0x13c)];}}}}}}}_0x337fd8[_0x4c3e19(0x14f)]('view_collections_sox',{'success':_0x42f204[_0x4c3e19(0x135)]('success'),'errors':_0x42f204[_0x4c3e19(0x135)](_0x4c3e19(0x152)),'master_shop':_0x4320c2,'profile':_0x7c0c43,'role':_0x37b30e,'language':_0x51d30c,'customer':_0x3d2a7a,'sales_sa':_0x516587});}catch(_0x2bfcdd){console[_0x4c3e19(0x133)](_0x2bfcdd);}}),router[a0_0x1e97af(0x174)](a0_0x1e97af(0x156),auth,async(_0x2da23c,_0x5d728e)=>{var _0x56bd6a=a0_0x1e97af;try{const _0x168147=await master_shop[_0x56bd6a(0x171)](),_0x1c96cf=_0x2da23c['user'],_0x31097b=await profile['findOne']({'email':_0x1c96cf[_0x56bd6a(0x12f)]}),_0x66eb81=await staff['findOne']({'email':_0x1c96cf[_0x56bd6a(0x12f)],'type_of_acc_cat':'1'});let _0x5e28be=[];_0x66eb81!=null&&(_0x5e28be=await sales_sa[_0x56bd6a(0x171)]({'sales_staff_id':_0x66eb81['_id']}));if(_0x168147[0x0][_0x56bd6a(0x165)]==_0x56bd6a(0x160))var _0x11c94d=users[_0x56bd6a(0x163)];else{if(_0x168147[0x0][_0x56bd6a(0x165)]==_0x56bd6a(0x131))var _0x11c94d=users['Hindi'];else{if(_0x168147[0x0][_0x56bd6a(0x165)]==_0x56bd6a(0x139))var _0x11c94d=users[_0x56bd6a(0x139)];else{if(_0x168147[0x0][_0x56bd6a(0x165)]=='Spanish')var _0x11c94d=users[_0x56bd6a(0x17c)];else{if(_0x168147[0x0][_0x56bd6a(0x165)]=='French')var _0x11c94d=users[_0x56bd6a(0x14e)];else{if(_0x168147[0x0][_0x56bd6a(0x165)]==_0x56bd6a(0x150))var _0x11c94d=users[_0x56bd6a(0x146)];else{if(_0x168147[0x0]['language']==_0x56bd6a(0x155))var _0x11c94d=users['Chinese'];else{if(_0x168147[0x0][_0x56bd6a(0x165)]==_0x56bd6a(0x12e))var _0x11c94d=users[_0x56bd6a(0x13c)];}}}}}}}_0x5d728e['render'](_0x56bd6a(0x158),{'success':_0x2da23c[_0x56bd6a(0x135)](_0x56bd6a(0x145)),'errors':_0x2da23c[_0x56bd6a(0x135)](_0x56bd6a(0x152)),'master_shop':_0x168147,'profile':_0x31097b,'role':_0x1c96cf,'language':_0x11c94d,'sales_mine':_0x5e28be,'staff_arr':_0x66eb81});}catch(_0x488770){console[_0x56bd6a(0x133)](_0x488770);}}),router[a0_0x1e97af(0x174)](a0_0x1e97af(0x14c),auth,async(_0x52c563,_0xbd9f9d)=>{var _0x4c5e01=a0_0x1e97af;try{const _0x19b81e=await master_shop[_0x4c5e01(0x171)](),_0x30e87a=_0x52c563['user'],_0x21d35d=await profile['findOne']({'email':_0x30e87a[_0x4c5e01(0x12f)]}),_0x54c1b7=await staff[_0x4c5e01(0x16a)]({'email':_0x30e87a['email']}),_0x5c4804=await customer[_0x4c5e01(0x171)]({'agent_id':_0x54c1b7['_id']}),_0x22d2f3=_0x52c563[_0x4c5e01(0x14d)]['id'],_0x1e4b9a=await sales_sa[_0x4c5e01(0x12c)](_0x22d2f3);if(_0x19b81e[0x0]['language']=='English\x20(US)')var _0x5b439a=users[_0x4c5e01(0x163)];else{if(_0x19b81e[0x0]['language']==_0x4c5e01(0x131))var _0x5b439a=users[_0x4c5e01(0x131)];else{if(_0x19b81e[0x0][_0x4c5e01(0x165)]==_0x4c5e01(0x139))var _0x5b439a=users[_0x4c5e01(0x139)];else{if(_0x19b81e[0x0][_0x4c5e01(0x165)]==_0x4c5e01(0x17c))var _0x5b439a=users[_0x4c5e01(0x17c)];else{if(_0x19b81e[0x0][_0x4c5e01(0x165)]==_0x4c5e01(0x14e))var _0x5b439a=users['French'];else{if(_0x19b81e[0x0][_0x4c5e01(0x165)]==_0x4c5e01(0x150))var _0x5b439a=users[_0x4c5e01(0x146)];else{if(_0x19b81e[0x0][_0x4c5e01(0x165)]==_0x4c5e01(0x155))var _0x5b439a=users[_0x4c5e01(0x155)];else{if(_0x19b81e[0x0][_0x4c5e01(0x165)]=='Arabic\x20(ae)')var _0x5b439a=users['Arabic'];}}}}}}}_0xbd9f9d[_0x4c5e01(0x14f)]('view_collections_xt',{'success':_0x52c563[_0x4c5e01(0x135)](_0x4c5e01(0x145)),'errors':_0x52c563[_0x4c5e01(0x135)](_0x4c5e01(0x152)),'master_shop':_0x19b81e,'profile':_0x21d35d,'role':_0x30e87a,'language':_0x5b439a,'customer':_0x5c4804,'sales_sa':_0x1e4b9a,'staff_arr':_0x54c1b7});}catch(_0x2132ce){console[_0x4c5e01(0x133)](_0x2132ce);}}),router[a0_0x1e97af(0x173)]('/view_xt/:id',auth,async(_0x1b5a5a,_0x13219f)=>{var _0x5d450a=a0_0x1e97af;try{const _0x2a64bc=_0x1b5a5a[_0x5d450a(0x14d)]['id'],_0x1f89ab=await sales_sa[_0x5d450a(0x12c)](_0x2a64bc),{collection:_0x39524c,invoicemoney:_0x21749f,collectionnumber:_0x5700db,typeofpayment:_0x30bf3e,cashdate:_0x2b0758,id_detl:_0x366600}=_0x1b5a5a[_0x5d450a(0x13d)];if(typeof _0x366600==_0x5d450a(0x132))var _0x29156b=[_0x1b5a5a[_0x5d450a(0x13d)]['id_detl']],_0x302661=[_0x1b5a5a[_0x5d450a(0x13d)][_0x5d450a(0x13f)]],_0x42e5ef=[_0x1b5a5a[_0x5d450a(0x13d)][_0x5d450a(0x178)]],_0x534b82=[_0x1b5a5a[_0x5d450a(0x13d)]['fin_disc']],_0x31a285=[_0x1b5a5a[_0x5d450a(0x13d)]['vol_deals']],_0x2f71d5=[_0x1b5a5a[_0x5d450a(0x13d)][_0x5d450a(0x13b)]],_0x54d46a=[_0x1b5a5a[_0x5d450a(0x13d)][_0x5d450a(0x168)]];else var _0x29156b=[..._0x1b5a5a[_0x5d450a(0x13d)][_0x5d450a(0x179)]],_0x302661=[..._0x1b5a5a['body']['ewt']],_0x42e5ef=[..._0x1b5a5a[_0x5d450a(0x13d)][_0x5d450a(0x178)]],_0x534b82=[..._0x1b5a5a[_0x5d450a(0x13d)][_0x5d450a(0x170)]],_0x31a285=[..._0x1b5a5a['body'][_0x5d450a(0x16d)]],_0x2f71d5=[..._0x1b5a5a[_0x5d450a(0x13d)]['bo_disc']],_0x54d46a=[..._0x1b5a5a['body']['totalNewPrice']];const _0x5c4dd0=_0x29156b[_0x5d450a(0x16f)](_0x275fe3=>{return _0x275fe3={'id_detl':_0x275fe3};});_0x302661['forEach']((_0x1e506f,_0xf27d0b)=>{var _0x3eb876=_0x5d450a;_0x5c4dd0[_0xf27d0b][_0x3eb876(0x13f)]=_0x1e506f;}),_0x42e5ef[_0x5d450a(0x136)]((_0x104e6f,_0x145d9b)=>{var _0x209720=_0x5d450a;_0x5c4dd0[_0x145d9b][_0x209720(0x178)]=_0x104e6f;}),_0x534b82['forEach']((_0x5385fb,_0x51f85e)=>{_0x5c4dd0[_0x51f85e]['fin_disc']=_0x5385fb;}),_0x31a285[_0x5d450a(0x136)]((_0x36262c,_0x22fd24)=>{var _0x304b8c=_0x5d450a;_0x5c4dd0[_0x22fd24][_0x304b8c(0x16d)]=_0x36262c;}),_0x2f71d5[_0x5d450a(0x136)]((_0x3a4b11,_0x54e72a)=>{_0x5c4dd0[_0x54e72a]['bo_disc']=_0x3a4b11;}),_0x54d46a[_0x5d450a(0x136)]((_0x4a1d10,_0x17c385)=>{_0x5c4dd0[_0x17c385]['totalcollection']=_0x4a1d10;}),_0x1f89ab['collection_price']=_0x39524c,_0x1f89ab[_0x5d450a(0x172)]=_0x5700db,_0x1f89ab['type_of_payment']=_0x30bf3e,_0x1f89ab[_0x5d450a(0x14b)]=_0x2b0758,_0x1f89ab[_0x5d450a(0x154)]=_0x5d450a(0x134),_0x1f89ab[_0x5d450a(0x149)]='1';const _0x231b88=await _0x1f89ab['save']();if(_0x231b88['paid']==_0x5d450a(0x134))for(let _0x25c4e0=0x0;_0x25c4e0<=_0x5c4dd0[_0x5d450a(0x13a)]-0x1;_0x25c4e0++){const _0x47ae54=_0x5c4dd0[_0x25c4e0],_0x46b283=mongoose['Types'][_0x5d450a(0x17b)];console[_0x5d450a(0x133)](_0x47ae54);const _0x349667=await sales_sa['updateOne']({'_id':_0x46b283(_0x2a64bc[_0x5d450a(0x15b)]()),'sale_product._id':_0x46b283(_0x47ae54[_0x5d450a(0x179)][_0x5d450a(0x15b)]())},{'$set':{'sale_product.$.ewt':_0x47ae54[_0x5d450a(0x13f)],'sale_product.$.spwp':_0x47ae54[_0x5d450a(0x178)],'sale_product.$.fin_disc':_0x47ae54['fin_disc'],'sale_product.$.vol_deals':_0x47ae54[_0x5d450a(0x16d)],'sale_product.$.bo_disc':_0x47ae54[_0x5d450a(0x13b)],'sale_product.$.totalprice':parseFloat(_0x47ae54[_0x5d450a(0x169)])}});}_0x1b5a5a[_0x5d450a(0x135)](_0x5d450a(0x145),_0x5d450a(0x15e)),_0x13219f[_0x5d450a(0x144)](_0x5d450a(0x13e)+_0x2a64bc);}catch(_0x29c757){console[_0x5d450a(0x133)](_0x29c757);}}),router[a0_0x1e97af(0x174)](a0_0x1e97af(0x164),auth,async(_0x59e3e2,_0x3c4fde)=>{var _0x3eabc1=a0_0x1e97af;try{const _0x49f83b=await master_shop[_0x3eabc1(0x171)](),_0x52dca8=_0x59e3e2[_0x3eabc1(0x161)],_0x4fc739=await profile['findOne']({'email':_0x52dca8[_0x3eabc1(0x12f)]}),_0x4bb0f3=await staff['findOne']({'email':_0x52dca8[_0x3eabc1(0x12f)],'type_of_acc_cat':'1'});let _0x4cfbe7=[];_0x4bb0f3!=null&&(_0x4cfbe7=await sales_order[_0x3eabc1(0x171)]({'sales_staff_id':_0x4bb0f3[_0x3eabc1(0x143)]}));if(_0x49f83b[0x0][_0x3eabc1(0x165)]==_0x3eabc1(0x160))var _0x4ef1fb=users['English'];else{if(_0x49f83b[0x0][_0x3eabc1(0x165)]==_0x3eabc1(0x131))var _0x4ef1fb=users[_0x3eabc1(0x131)];else{if(_0x49f83b[0x0][_0x3eabc1(0x165)]==_0x3eabc1(0x139))var _0x4ef1fb=users['German'];else{if(_0x49f83b[0x0][_0x3eabc1(0x165)]=='Spanish')var _0x4ef1fb=users[_0x3eabc1(0x17c)];else{if(_0x49f83b[0x0][_0x3eabc1(0x165)]=='French')var _0x4ef1fb=users[_0x3eabc1(0x14e)];else{if(_0x49f83b[0x0][_0x3eabc1(0x165)]=='Portuguese\x20(BR)')var _0x4ef1fb=users[_0x3eabc1(0x146)];else{if(_0x49f83b[0x0]['language']==_0x3eabc1(0x155))var _0x4ef1fb=users['Chinese'];else{if(_0x49f83b[0x0][_0x3eabc1(0x165)]==_0x3eabc1(0x12e))var _0x4ef1fb=users[_0x3eabc1(0x13c)];}}}}}}}_0x3c4fde['render']('collection_so_xt',{'success':_0x59e3e2[_0x3eabc1(0x135)](_0x3eabc1(0x145)),'errors':_0x59e3e2[_0x3eabc1(0x135)](_0x3eabc1(0x152)),'master_shop':_0x49f83b,'profile':_0x4fc739,'role':_0x52dca8,'language':_0x4ef1fb,'sales_mine':_0x4cfbe7,'staff_arr':_0x4bb0f3});}catch(_0x15fa4a){console['log'](_0x15fa4a);}}),router[a0_0x1e97af(0x174)](a0_0x1e97af(0x176),auth,async(_0x3e03e3,_0xa538f2)=>{var _0x308c67=a0_0x1e97af;try{const _0x3620d9=await master_shop[_0x308c67(0x171)](),_0x44e846=_0x3e03e3[_0x308c67(0x161)],_0x1f58e7=await profile[_0x308c67(0x16a)]({'email':_0x44e846[_0x308c67(0x12f)]}),_0x5b090d=await staff['findOne']({'email':_0x44e846[_0x308c67(0x12f)]}),_0x1f8053=await customer[_0x308c67(0x171)]({'agent_id':_0x5b090d[_0x308c67(0x143)]}),_0x2c656e=_0x3e03e3[_0x308c67(0x14d)]['id'],_0x3ffbfd=await sales_order['findById'](_0x2c656e);if(_0x3620d9[0x0][_0x308c67(0x165)]==_0x308c67(0x160))var _0x5fa685=users['English'];else{if(_0x3620d9[0x0][_0x308c67(0x165)]==_0x308c67(0x131))var _0x5fa685=users['Hindi'];else{if(_0x3620d9[0x0][_0x308c67(0x165)]==_0x308c67(0x139))var _0x5fa685=users[_0x308c67(0x139)];else{if(_0x3620d9[0x0][_0x308c67(0x165)]==_0x308c67(0x17c))var _0x5fa685=users[_0x308c67(0x17c)];else{if(_0x3620d9[0x0][_0x308c67(0x165)]=='French')var _0x5fa685=users[_0x308c67(0x14e)];else{if(_0x3620d9[0x0][_0x308c67(0x165)]=='Portuguese\x20(BR)')var _0x5fa685=users['Portuguese'];else{if(_0x3620d9[0x0][_0x308c67(0x165)]==_0x308c67(0x155))var _0x5fa685=users[_0x308c67(0x155)];else{if(_0x3620d9[0x0][_0x308c67(0x165)]==_0x308c67(0x12e))var _0x5fa685=users['Arabic'];}}}}}}}_0xa538f2[_0x308c67(0x14f)](_0x308c67(0x16e),{'success':_0x3e03e3[_0x308c67(0x135)]('success'),'errors':_0x3e03e3['flash'](_0x308c67(0x152)),'master_shop':_0x3620d9,'profile':_0x1f58e7,'role':_0x44e846,'language':_0x5fa685,'customer':_0x1f8053,'sales_sa':_0x3ffbfd,'staff_arr':_0x5b090d});}catch(_0x29e00a){console['log'](_0x29e00a);}}),router[a0_0x1e97af(0x173)](a0_0x1e97af(0x176),auth,async(_0x50f74f,_0x5e6f96)=>{var _0x49827d=a0_0x1e97af;try{const _0x49381f=_0x50f74f[_0x49827d(0x14d)]['id'],_0x2611f6=await sales_order['findById'](_0x49381f),{collection:_0x2c26f0,invoicemoney:_0x1aeddc,collectionnumber:_0x52b560,typeofpayment:_0xee4f28,cashdate:_0x179a26,id_detl:_0x42c2c7}=_0x50f74f[_0x49827d(0x13d)];_0x2611f6[_0x49827d(0x142)]=_0x2c26f0,_0x2611f6[_0x49827d(0x17a)]=_0xee4f28,_0x2611f6['cash_date']=_0x179a26,_0x2611f6[_0x49827d(0x154)]=_0x49827d(0x134),_0x2611f6[_0x49827d(0x149)]='1';const _0x4f87b0=await _0x2611f6[_0x49827d(0x141)]();_0x50f74f[_0x49827d(0x135)]('success','Collection\x20Update\x20successfully'),_0x5e6f96[_0x49827d(0x144)](_0x49827d(0x153)+_0x49381f);}catch(_0x401396){console[_0x49827d(0x133)](_0x401396);}}),module['exports']=router;