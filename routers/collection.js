function a0_0x1f58(_0x4da090,_0x47fb83){var _0x2ae340=a0_0x2ae3();return a0_0x1f58=function(_0x1f5821,_0x300de7){_0x1f5821=_0x1f5821-0x94;var _0x2a9363=_0x2ae340[_0x1f5821];return _0x2a9363;},a0_0x1f58(_0x4da090,_0x47fb83);}var a0_0x571e73=a0_0x1f58;(function(_0x139eb3,_0x23c931){var _0x25b9a7=a0_0x1f58,_0x1b4e88=_0x139eb3();while(!![]){try{var _0x5b7bbe=-parseInt(_0x25b9a7(0x9c))/0x1+parseInt(_0x25b9a7(0xcb))/0x2+-parseInt(_0x25b9a7(0xce))/0x3*(-parseInt(_0x25b9a7(0xa4))/0x4)+-parseInt(_0x25b9a7(0xc8))/0x5*(-parseInt(_0x25b9a7(0xb6))/0x6)+parseInt(_0x25b9a7(0xa7))/0x7*(-parseInt(_0x25b9a7(0xb5))/0x8)+-parseInt(_0x25b9a7(0xe3))/0x9+parseInt(_0x25b9a7(0xd3))/0xa;if(_0x5b7bbe===_0x23c931)break;else _0x1b4e88['push'](_0x1b4e88['shift']());}catch(_0x579ef1){_0x1b4e88['push'](_0x1b4e88['shift']());}}}(a0_0x2ae3,0x4dfb9));function a0_0x2ae3(){var _0x39c4b8=['2304810MJXZUC','../models/all_models','Collection\x20Update\x20successfully','paid','English','map','errors','save','totalcollection','exports','True','body','string','collection_so_xt','French','cash_date','4150395WZbXok','findById','/collection/view_so_xt/','fin_disc','exceljs','ewt','Portuguese\x20(BR)','_id','/collection/view/','collection','email','ObjectId','336207FTqdfm','/view','mongoose','/so_x','Arabic','English\x20(US)','params','log','1887772YFrqEf','flash','render','9975nDWZyT','../middleware/auth','view_collections_xt','json','user','type_of_payment','get','German','view_collections','collectionnumber','../public/language/languages.json','id_detl','express','spwp','1336sMkbCP','6YCnEjH','forEach','typeofprocess','vol_deals','Portuguese','/x_so','Types','collection_price','valueOf','Hindi','findOne','bo_disc','/view_so_xt/:id','Chinese','Spanish','Arabic\x20(ae)','find','multer','2366305fEGMJf','totalNewPrice','length','358138Alasuq','/view_xt/:id','language','3sCtXaD','/view/:id','success','post','redirect'];a0_0x2ae3=function(){return _0x39c4b8;};return a0_0x2ae3();}const express=require(a0_0x571e73(0xb3)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x571e73(0xd4)),auth=require(a0_0x571e73(0xa8)),users=require(a0_0x571e73(0xb1)),excelJS=require(a0_0x571e73(0x94)),xlsx=require('xlsx'),multer=require(a0_0x571e73(0xc7)),mongoose=require(a0_0x571e73(0x9e));router['get'](a0_0x571e73(0x9d),auth,async(_0x1e8124,_0x212c0a)=>{var _0x1429bb=a0_0x571e73;try{const _0x29918d=await master_shop[_0x1429bb(0xc6)](),_0x2fbd87=_0x1e8124[_0x1429bb(0xab)],_0x353da3=await profile['findOne']({'email':_0x2fbd87[_0x1429bb(0x9a)]}),_0x2ed3f7=await staff[_0x1429bb(0xc0)]({'email':_0x2fbd87[_0x1429bb(0x9a)],'type_of_acc_cat':'2'});let _0x1457cd=[];_0x2ed3f7!=null&&(_0x1457cd=await sales_order[_0x1429bb(0xc6)]({'sales_staff_id':_0x2ed3f7['_id']}));if(_0x29918d[0x0][_0x1429bb(0xcd)]==_0x1429bb(0xa1))var _0x21a558=users['English'];else{if(_0x29918d[0x0][_0x1429bb(0xcd)]==_0x1429bb(0xbf))var _0x21a558=users[_0x1429bb(0xbf)];else{if(_0x29918d[0x0][_0x1429bb(0xcd)]=='German')var _0x21a558=users[_0x1429bb(0xae)];else{if(_0x29918d[0x0][_0x1429bb(0xcd)]=='Spanish')var _0x21a558=users[_0x1429bb(0xc4)];else{if(_0x29918d[0x0][_0x1429bb(0xcd)]==_0x1429bb(0xe1))var _0x21a558=users['French'];else{if(_0x29918d[0x0][_0x1429bb(0xcd)]==_0x1429bb(0x96))var _0x21a558=users['Portuguese'];else{if(_0x29918d[0x0][_0x1429bb(0xcd)]==_0x1429bb(0xc3))var _0x21a558=users[_0x1429bb(0xc3)];else{if(_0x29918d[0x0][_0x1429bb(0xcd)]=='Arabic\x20(ae)')var _0x21a558=users[_0x1429bb(0xa0)];}}}}}}}_0x212c0a[_0x1429bb(0xa6)](_0x1429bb(0x99),{'success':_0x1e8124[_0x1429bb(0xa5)](_0x1429bb(0xd0)),'errors':_0x1e8124[_0x1429bb(0xa5)](_0x1429bb(0xd9)),'master_shop':_0x29918d,'profile':_0x353da3,'role':_0x2fbd87,'language':_0x21a558,'sales_mine':_0x1457cd,'staff_arr':_0x2ed3f7});}catch(_0x4ff2e3){console['log'](_0x4ff2e3);}}),router[a0_0x571e73(0xad)](a0_0x571e73(0xcf),auth,async(_0x305bd1,_0x47b94f)=>{var _0x207ad3=a0_0x571e73;try{const _0x3246fc=await master_shop[_0x207ad3(0xc6)](),_0x4a7037=_0x305bd1[_0x207ad3(0xab)],_0x14dc95=await profile[_0x207ad3(0xc0)]({'email':_0x4a7037['email']}),_0x361e55=await staff[_0x207ad3(0xc0)]({'email':_0x4a7037[_0x207ad3(0x9a)]}),_0x6ed890=await customer[_0x207ad3(0xc6)]({'agent_id':_0x361e55[_0x207ad3(0x97)]}),_0x155b8c=_0x305bd1[_0x207ad3(0xa2)]['id'],_0x5e7691=await sales_sa['findById'](_0x155b8c);if(_0x3246fc[0x0][_0x207ad3(0xcd)]==_0x207ad3(0xa1))var _0x2de687=users[_0x207ad3(0xd7)];else{if(_0x3246fc[0x0]['language']==_0x207ad3(0xbf))var _0x2de687=users[_0x207ad3(0xbf)];else{if(_0x3246fc[0x0][_0x207ad3(0xcd)]==_0x207ad3(0xae))var _0x2de687=users['German'];else{if(_0x3246fc[0x0][_0x207ad3(0xcd)]==_0x207ad3(0xc4))var _0x2de687=users[_0x207ad3(0xc4)];else{if(_0x3246fc[0x0][_0x207ad3(0xcd)]==_0x207ad3(0xe1))var _0x2de687=users[_0x207ad3(0xe1)];else{if(_0x3246fc[0x0]['language']==_0x207ad3(0x96))var _0x2de687=users['Portuguese'];else{if(_0x3246fc[0x0][_0x207ad3(0xcd)]=='Chinese')var _0x2de687=users['Chinese'];else{if(_0x3246fc[0x0][_0x207ad3(0xcd)]==_0x207ad3(0xc5))var _0x2de687=users[_0x207ad3(0xa0)];}}}}}}}_0x47b94f[_0x207ad3(0xa6)](_0x207ad3(0xaf),{'success':_0x305bd1[_0x207ad3(0xa5)](_0x207ad3(0xd0)),'errors':_0x305bd1['flash'](_0x207ad3(0xd9)),'master_shop':_0x3246fc,'profile':_0x14dc95,'role':_0x4a7037,'language':_0x2de687,'customer':_0x6ed890,'sales_sa':_0x5e7691,'staff_arr':_0x361e55});}catch(_0x24e586){console[_0x207ad3(0xa3)](_0x24e586);}}),router['post'](a0_0x571e73(0xcf),auth,async(_0x5025a0,_0x9fa26c)=>{var _0x343cd4=a0_0x571e73;try{const _0x9c6372=_0x5025a0[_0x343cd4(0xa2)]['id'],_0x2f270c=await sales_sa[_0x343cd4(0xe4)](_0x9c6372),{collection:_0x214da7,invoicemoney:_0x2d33e2,collectionnumber:_0x4e1fd,typeofpayment:_0x67b4ed,cashdate:_0x170f69,id_detl:_0x441187}=_0x5025a0['body'];_0x9fa26c[_0x343cd4(0xaa)](_0x2f270c);return;if(typeof _0x441187==_0x343cd4(0xdf))var _0x2318d3=[_0x5025a0[_0x343cd4(0xde)][_0x343cd4(0xb2)]],_0x37e560=[_0x5025a0['body'][_0x343cd4(0x95)]],_0xeb55a9=[_0x5025a0[_0x343cd4(0xde)]['spwp']],_0x395027=[_0x5025a0[_0x343cd4(0xde)][_0x343cd4(0xe6)]],_0xfa3a81=[_0x5025a0[_0x343cd4(0xde)][_0x343cd4(0xb9)]],_0x463028=[_0x5025a0['body']['bo_disc']],_0x548d2b=[_0x5025a0[_0x343cd4(0xde)][_0x343cd4(0xc9)]];else var _0x2318d3=[..._0x5025a0['body'][_0x343cd4(0xb2)]],_0x37e560=[..._0x5025a0['body'][_0x343cd4(0x95)]],_0xeb55a9=[..._0x5025a0[_0x343cd4(0xde)][_0x343cd4(0xb4)]],_0x395027=[..._0x5025a0[_0x343cd4(0xde)][_0x343cd4(0xe6)]],_0xfa3a81=[..._0x5025a0[_0x343cd4(0xde)][_0x343cd4(0xb9)]],_0x463028=[..._0x5025a0[_0x343cd4(0xde)][_0x343cd4(0xc1)]],_0x548d2b=[..._0x5025a0[_0x343cd4(0xde)]['totalNewPrice']];const _0x5c0501=_0x2318d3[_0x343cd4(0xd8)](_0x347260=>{return _0x347260={'id_detl':_0x347260};});_0x37e560['forEach']((_0x346a0f,_0x53a265)=>{_0x5c0501[_0x53a265]['ewt']=_0x346a0f;}),_0xeb55a9['forEach']((_0x438dca,_0x4134b8)=>{_0x5c0501[_0x4134b8]['spwp']=_0x438dca;}),_0x395027[_0x343cd4(0xb7)]((_0x12ec3c,_0x57bbc6)=>{_0x5c0501[_0x57bbc6]['fin_disc']=_0x12ec3c;}),_0xfa3a81[_0x343cd4(0xb7)]((_0x9f88b4,_0x2c0623)=>{var _0xa840a5=_0x343cd4;_0x5c0501[_0x2c0623][_0xa840a5(0xb9)]=_0x9f88b4;}),_0x463028['forEach']((_0x25db83,_0x55d8d3)=>{var _0x354705=_0x343cd4;_0x5c0501[_0x55d8d3][_0x354705(0xc1)]=_0x25db83;}),_0x548d2b['forEach']((_0x308365,_0x58ea58)=>{var _0x38d750=_0x343cd4;_0x5c0501[_0x58ea58][_0x38d750(0xdb)]=_0x308365;}),_0x2f270c[_0x343cd4(0xbd)]=_0x214da7,_0x2f270c['collectionnumber']=_0x4e1fd,_0x2f270c[_0x343cd4(0xac)]=_0x67b4ed,_0x2f270c[_0x343cd4(0xe2)]=_0x170f69,_0x2f270c[_0x343cd4(0xd6)]=_0x343cd4(0xdd);const _0x3c2969=await _0x2f270c[_0x343cd4(0xda)]();if(_0x3c2969['paid']==_0x343cd4(0xdd))for(let _0x1ba4a2=0x0;_0x1ba4a2<=_0x5c0501[_0x343cd4(0xca)]-0x1;_0x1ba4a2++){const _0x41bde4=_0x5c0501[_0x1ba4a2],_0x4035dc=mongoose[_0x343cd4(0xbc)]['ObjectId'];console[_0x343cd4(0xa3)](_0x41bde4);const _0x565ca3=await sales_sa['updateOne']({'_id':_0x4035dc(_0x9c6372[_0x343cd4(0xbe)]()),'sale_product._id':_0x4035dc(_0x41bde4[_0x343cd4(0xb2)]['valueOf']())},{'$set':{'sale_product.$.ewt':_0x41bde4['ewt'],'sale_product.$.spwp':_0x41bde4[_0x343cd4(0xb4)],'sale_product.$.fin_disc':_0x41bde4['fin_disc'],'sale_product.$.vol_deals':_0x41bde4[_0x343cd4(0xb9)],'sale_product.$.bo_disc':_0x41bde4[_0x343cd4(0xc1)],'sale_product.$.totalprice':parseFloat(_0x41bde4[_0x343cd4(0xdb)])}});}_0x5025a0['flash']('success',_0x343cd4(0xd5)),_0x9fa26c[_0x343cd4(0xd2)]('/collection/view/'+_0x9c6372);}catch(_0x42671d){console[_0x343cd4(0xa3)](_0x42671d);}}),router[a0_0x571e73(0xad)](a0_0x571e73(0xbb),auth,async(_0x2fa0be,_0x15a683)=>{var _0x1f4f5f=a0_0x571e73;try{const _0xa9dbaa=await master_shop[_0x1f4f5f(0xc6)](),_0x292538=_0x2fa0be['user'],_0x1fc109=await profile[_0x1f4f5f(0xc0)]({'email':_0x292538[_0x1f4f5f(0x9a)]}),_0x2c0cac=await staff[_0x1f4f5f(0xc0)]({'email':_0x292538[_0x1f4f5f(0x9a)],'type_of_acc_cat':'2'});let _0x929f7c=[];_0x2c0cac!=null&&(_0x929f7c=await sales_order['find']({'sales_staff_id':_0x2c0cac['_id']}));console[_0x1f4f5f(0xa3)](_0x929f7c);if(_0xa9dbaa[0x0][_0x1f4f5f(0xcd)]==_0x1f4f5f(0xa1))var _0x5e75ce=users[_0x1f4f5f(0xd7)];else{if(_0xa9dbaa[0x0][_0x1f4f5f(0xcd)]==_0x1f4f5f(0xbf))var _0x5e75ce=users[_0x1f4f5f(0xbf)];else{if(_0xa9dbaa[0x0][_0x1f4f5f(0xcd)]=='German')var _0x5e75ce=users[_0x1f4f5f(0xae)];else{if(_0xa9dbaa[0x0][_0x1f4f5f(0xcd)]==_0x1f4f5f(0xc4))var _0x5e75ce=users['Spanish'];else{if(_0xa9dbaa[0x0]['language']==_0x1f4f5f(0xe1))var _0x5e75ce=users['French'];else{if(_0xa9dbaa[0x0]['language']==_0x1f4f5f(0x96))var _0x5e75ce=users['Portuguese'];else{if(_0xa9dbaa[0x0][_0x1f4f5f(0xcd)]=='Chinese')var _0x5e75ce=users[_0x1f4f5f(0xc3)];else{if(_0xa9dbaa[0x0]['language']==_0x1f4f5f(0xc5))var _0x5e75ce=users[_0x1f4f5f(0xa0)];}}}}}}}_0x15a683[_0x1f4f5f(0xa6)]('collection_sox',{'success':_0x2fa0be['flash'](_0x1f4f5f(0xd0)),'errors':_0x2fa0be['flash'](_0x1f4f5f(0xd9)),'master_shop':_0xa9dbaa,'profile':_0x1fc109,'role':_0x292538,'language':_0x5e75ce,'sales_mine':_0x929f7c,'staff_arr':_0x2c0cac});}catch(_0x1b665e){console[_0x1f4f5f(0xa3)](_0x1b665e);}}),router[a0_0x571e73(0xad)]('/view_sox/:id',auth,async(_0x7589b6,_0x12a0bd)=>{var _0x1c20b5=a0_0x571e73;try{const _0x163483=await master_shop[_0x1c20b5(0xc6)](),_0x1e96e8=_0x7589b6[_0x1c20b5(0xab)],_0x1e4713=await profile['findOne']({'email':_0x1e96e8[_0x1c20b5(0x9a)]}),_0x3c18b6=await staff['findOne']({'email':_0x1e96e8[_0x1c20b5(0x9a)]}),_0x3350d8=await customer[_0x1c20b5(0xc6)]({'agent_id':_0x3c18b6['_id']}),_0x30dfea=_0x7589b6[_0x1c20b5(0xa2)]['id'],_0x1fab4f=await sales_order['findById'](_0x30dfea);if(_0x163483[0x0][_0x1c20b5(0xcd)]==_0x1c20b5(0xa1))var _0x3f32e2=users[_0x1c20b5(0xd7)];else{if(_0x163483[0x0]['language']==_0x1c20b5(0xbf))var _0x3f32e2=users['Hindi'];else{if(_0x163483[0x0]['language']==_0x1c20b5(0xae))var _0x3f32e2=users[_0x1c20b5(0xae)];else{if(_0x163483[0x0][_0x1c20b5(0xcd)]==_0x1c20b5(0xc4))var _0x3f32e2=users[_0x1c20b5(0xc4)];else{if(_0x163483[0x0][_0x1c20b5(0xcd)]=='French')var _0x3f32e2=users[_0x1c20b5(0xe1)];else{if(_0x163483[0x0][_0x1c20b5(0xcd)]==_0x1c20b5(0x96))var _0x3f32e2=users[_0x1c20b5(0xba)];else{if(_0x163483[0x0][_0x1c20b5(0xcd)]==_0x1c20b5(0xc3))var _0x3f32e2=users[_0x1c20b5(0xc3)];else{if(_0x163483[0x0][_0x1c20b5(0xcd)]==_0x1c20b5(0xc5))var _0x3f32e2=users[_0x1c20b5(0xa0)];}}}}}}}_0x12a0bd['render']('view_collections_sox',{'success':_0x7589b6[_0x1c20b5(0xa5)](_0x1c20b5(0xd0)),'errors':_0x7589b6[_0x1c20b5(0xa5)]('errors'),'master_shop':_0x163483,'profile':_0x1e4713,'role':_0x1e96e8,'language':_0x3f32e2,'customer':_0x3350d8,'sales_sa':_0x1fab4f});}catch(_0x3a424b){console[_0x1c20b5(0xa3)](_0x3a424b);}}),router[a0_0x571e73(0xad)]('/view_x',auth,async(_0x6c0e98,_0x5f02c5)=>{var _0xcca8f7=a0_0x571e73;try{const _0x31db9c=await master_shop[_0xcca8f7(0xc6)](),_0x3cd7c4=_0x6c0e98[_0xcca8f7(0xab)],_0x237b6c=await profile[_0xcca8f7(0xc0)]({'email':_0x3cd7c4[_0xcca8f7(0x9a)]}),_0x494392=await staff[_0xcca8f7(0xc0)]({'email':_0x3cd7c4[_0xcca8f7(0x9a)],'type_of_acc_cat':'1'});let _0x4302ea=[];_0x494392!=null&&(_0x4302ea=await sales_sa['find']({'sales_staff_id':_0x494392[_0xcca8f7(0x97)]}));if(_0x31db9c[0x0][_0xcca8f7(0xcd)]==_0xcca8f7(0xa1))var _0x2761e3=users[_0xcca8f7(0xd7)];else{if(_0x31db9c[0x0][_0xcca8f7(0xcd)]==_0xcca8f7(0xbf))var _0x2761e3=users[_0xcca8f7(0xbf)];else{if(_0x31db9c[0x0]['language']==_0xcca8f7(0xae))var _0x2761e3=users[_0xcca8f7(0xae)];else{if(_0x31db9c[0x0][_0xcca8f7(0xcd)]==_0xcca8f7(0xc4))var _0x2761e3=users[_0xcca8f7(0xc4)];else{if(_0x31db9c[0x0][_0xcca8f7(0xcd)]==_0xcca8f7(0xe1))var _0x2761e3=users['French'];else{if(_0x31db9c[0x0][_0xcca8f7(0xcd)]==_0xcca8f7(0x96))var _0x2761e3=users['Portuguese'];else{if(_0x31db9c[0x0][_0xcca8f7(0xcd)]==_0xcca8f7(0xc3))var _0x2761e3=users[_0xcca8f7(0xc3)];else{if(_0x31db9c[0x0][_0xcca8f7(0xcd)]==_0xcca8f7(0xc5))var _0x2761e3=users['Arabic'];}}}}}}}_0x5f02c5[_0xcca8f7(0xa6)]('collection_xt',{'success':_0x6c0e98[_0xcca8f7(0xa5)](_0xcca8f7(0xd0)),'errors':_0x6c0e98['flash'](_0xcca8f7(0xd9)),'master_shop':_0x31db9c,'profile':_0x237b6c,'role':_0x3cd7c4,'language':_0x2761e3,'sales_mine':_0x4302ea,'staff_arr':_0x494392});}catch(_0x4ea583){console['log'](_0x4ea583);}}),router[a0_0x571e73(0xad)](a0_0x571e73(0xcc),auth,async(_0xb48341,_0x543c37)=>{var _0x1a3ef2=a0_0x571e73;try{const _0x3b5b68=await master_shop[_0x1a3ef2(0xc6)](),_0x55b0e5=_0xb48341[_0x1a3ef2(0xab)],_0x24f85a=await profile[_0x1a3ef2(0xc0)]({'email':_0x55b0e5[_0x1a3ef2(0x9a)]}),_0x3d13a8=await staff['findOne']({'email':_0x55b0e5[_0x1a3ef2(0x9a)]}),_0x1238ee=await customer[_0x1a3ef2(0xc6)]({'agent_id':_0x3d13a8[_0x1a3ef2(0x97)]}),_0x4fa7a8=_0xb48341[_0x1a3ef2(0xa2)]['id'],_0x3e871a=await sales_sa[_0x1a3ef2(0xe4)](_0x4fa7a8);if(_0x3b5b68[0x0][_0x1a3ef2(0xcd)]==_0x1a3ef2(0xa1))var _0x5c6320=users[_0x1a3ef2(0xd7)];else{if(_0x3b5b68[0x0]['language']=='Hindi')var _0x5c6320=users[_0x1a3ef2(0xbf)];else{if(_0x3b5b68[0x0]['language']==_0x1a3ef2(0xae))var _0x5c6320=users[_0x1a3ef2(0xae)];else{if(_0x3b5b68[0x0][_0x1a3ef2(0xcd)]=='Spanish')var _0x5c6320=users[_0x1a3ef2(0xc4)];else{if(_0x3b5b68[0x0]['language']=='French')var _0x5c6320=users[_0x1a3ef2(0xe1)];else{if(_0x3b5b68[0x0][_0x1a3ef2(0xcd)]==_0x1a3ef2(0x96))var _0x5c6320=users[_0x1a3ef2(0xba)];else{if(_0x3b5b68[0x0][_0x1a3ef2(0xcd)]=='Chinese')var _0x5c6320=users[_0x1a3ef2(0xc3)];else{if(_0x3b5b68[0x0][_0x1a3ef2(0xcd)]==_0x1a3ef2(0xc5))var _0x5c6320=users[_0x1a3ef2(0xa0)];}}}}}}}_0x543c37[_0x1a3ef2(0xa6)](_0x1a3ef2(0xa9),{'success':_0xb48341[_0x1a3ef2(0xa5)](_0x1a3ef2(0xd0)),'errors':_0xb48341['flash'](_0x1a3ef2(0xd9)),'master_shop':_0x3b5b68,'profile':_0x24f85a,'role':_0x55b0e5,'language':_0x5c6320,'customer':_0x1238ee,'sales_sa':_0x3e871a,'staff_arr':_0x3d13a8});}catch(_0x197446){console[_0x1a3ef2(0xa3)](_0x197446);}}),router['post']('/view_xt/:id',auth,async(_0x5cf067,_0x558c76)=>{var _0x451b22=a0_0x571e73;try{const _0x3e1fee=_0x5cf067[_0x451b22(0xa2)]['id'],_0x3a13cc=await sales_sa[_0x451b22(0xe4)](_0x3e1fee),{collection:_0x5bb00e,invoicemoney:_0x1a6b8f,collectionnumber:_0x46d19b,typeofpayment:_0x307019,cashdate:_0x15eaff,id_detl:_0x3b7f78}=_0x5cf067[_0x451b22(0xde)];if(typeof _0x3b7f78==_0x451b22(0xdf))var _0x40879a=[_0x5cf067[_0x451b22(0xde)][_0x451b22(0xb2)]],_0x4ee28d=[_0x5cf067[_0x451b22(0xde)][_0x451b22(0x95)]],_0x73c053=[_0x5cf067[_0x451b22(0xde)][_0x451b22(0xb4)]],_0x179ece=[_0x5cf067['body'][_0x451b22(0xe6)]],_0x435aee=[_0x5cf067[_0x451b22(0xde)][_0x451b22(0xb9)]],_0x39d62e=[_0x5cf067[_0x451b22(0xde)]['bo_disc']],_0x141d91=[_0x5cf067[_0x451b22(0xde)][_0x451b22(0xc9)]];else var _0x40879a=[..._0x5cf067[_0x451b22(0xde)][_0x451b22(0xb2)]],_0x4ee28d=[..._0x5cf067[_0x451b22(0xde)][_0x451b22(0x95)]],_0x73c053=[..._0x5cf067[_0x451b22(0xde)][_0x451b22(0xb4)]],_0x179ece=[..._0x5cf067[_0x451b22(0xde)][_0x451b22(0xe6)]],_0x435aee=[..._0x5cf067[_0x451b22(0xde)][_0x451b22(0xb9)]],_0x39d62e=[..._0x5cf067[_0x451b22(0xde)][_0x451b22(0xc1)]],_0x141d91=[..._0x5cf067[_0x451b22(0xde)][_0x451b22(0xc9)]];const _0x398a1c=_0x40879a['map'](_0x5302f6=>{return _0x5302f6={'id_detl':_0x5302f6};});_0x4ee28d[_0x451b22(0xb7)]((_0x2d69e1,_0x53222d)=>{var _0xb29782=_0x451b22;_0x398a1c[_0x53222d][_0xb29782(0x95)]=_0x2d69e1;}),_0x73c053[_0x451b22(0xb7)]((_0x102a87,_0x4e50b2)=>{var _0x5ea354=_0x451b22;_0x398a1c[_0x4e50b2][_0x5ea354(0xb4)]=_0x102a87;}),_0x179ece[_0x451b22(0xb7)]((_0x4922d4,_0x1832d0)=>{var _0x3ccb8e=_0x451b22;_0x398a1c[_0x1832d0][_0x3ccb8e(0xe6)]=_0x4922d4;}),_0x435aee[_0x451b22(0xb7)]((_0x123673,_0x55cc51)=>{var _0x243d07=_0x451b22;_0x398a1c[_0x55cc51][_0x243d07(0xb9)]=_0x123673;}),_0x39d62e[_0x451b22(0xb7)]((_0x170d49,_0x47af86)=>{var _0x44c354=_0x451b22;_0x398a1c[_0x47af86][_0x44c354(0xc1)]=_0x170d49;}),_0x141d91['forEach']((_0x2bc4e9,_0x2a45b9)=>{var _0x546373=_0x451b22;_0x398a1c[_0x2a45b9][_0x546373(0xdb)]=_0x2bc4e9;}),_0x3a13cc[_0x451b22(0xbd)]=_0x5bb00e,_0x3a13cc[_0x451b22(0xb0)]=_0x46d19b,_0x3a13cc['type_of_payment']=_0x307019,_0x3a13cc[_0x451b22(0xe2)]=_0x15eaff,_0x3a13cc[_0x451b22(0xd6)]=_0x451b22(0xdd),_0x3a13cc[_0x451b22(0xb8)]='1';const _0x5d7512=await _0x3a13cc[_0x451b22(0xda)]();if(_0x5d7512[_0x451b22(0xd6)]==_0x451b22(0xdd))for(let _0x1eaaea=0x0;_0x1eaaea<=_0x398a1c['length']-0x1;_0x1eaaea++){const _0x34b319=_0x398a1c[_0x1eaaea],_0x4a5ef6=mongoose[_0x451b22(0xbc)][_0x451b22(0x9b)];console[_0x451b22(0xa3)](_0x34b319);const _0x5dd9ea=await sales_sa['updateOne']({'_id':_0x4a5ef6(_0x3e1fee['valueOf']()),'sale_product._id':_0x4a5ef6(_0x34b319[_0x451b22(0xb2)][_0x451b22(0xbe)]())},{'$set':{'sale_product.$.ewt':_0x34b319[_0x451b22(0x95)],'sale_product.$.spwp':_0x34b319[_0x451b22(0xb4)],'sale_product.$.fin_disc':_0x34b319[_0x451b22(0xe6)],'sale_product.$.vol_deals':_0x34b319[_0x451b22(0xb9)],'sale_product.$.bo_disc':_0x34b319[_0x451b22(0xc1)],'sale_product.$.totalprice':parseFloat(_0x34b319['totalcollection'])}});}_0x5cf067['flash'](_0x451b22(0xd0),_0x451b22(0xd5)),_0x558c76[_0x451b22(0xd2)](_0x451b22(0x98)+_0x3e1fee);}catch(_0x583119){console[_0x451b22(0xa3)](_0x583119);}}),router['get'](a0_0x571e73(0x9f),auth,async(_0x31689f,_0x40332d)=>{var _0x4cb85d=a0_0x571e73;try{const _0x4398d7=await master_shop[_0x4cb85d(0xc6)](),_0x1a6ad8=_0x31689f[_0x4cb85d(0xab)],_0x4c9ede=await profile[_0x4cb85d(0xc0)]({'email':_0x1a6ad8[_0x4cb85d(0x9a)]}),_0x4f8334=await staff[_0x4cb85d(0xc0)]({'email':_0x1a6ad8[_0x4cb85d(0x9a)],'type_of_acc_cat':'1'});let _0x58565a=[];_0x4f8334!=null&&(_0x58565a=await sales_order[_0x4cb85d(0xc6)]({'sales_staff_id':_0x4f8334[_0x4cb85d(0x97)]}));if(_0x4398d7[0x0]['language']==_0x4cb85d(0xa1))var _0x36b197=users[_0x4cb85d(0xd7)];else{if(_0x4398d7[0x0]['language']==_0x4cb85d(0xbf))var _0x36b197=users[_0x4cb85d(0xbf)];else{if(_0x4398d7[0x0][_0x4cb85d(0xcd)]==_0x4cb85d(0xae))var _0x36b197=users[_0x4cb85d(0xae)];else{if(_0x4398d7[0x0][_0x4cb85d(0xcd)]==_0x4cb85d(0xc4))var _0x36b197=users[_0x4cb85d(0xc4)];else{if(_0x4398d7[0x0][_0x4cb85d(0xcd)]==_0x4cb85d(0xe1))var _0x36b197=users[_0x4cb85d(0xe1)];else{if(_0x4398d7[0x0][_0x4cb85d(0xcd)]==_0x4cb85d(0x96))var _0x36b197=users[_0x4cb85d(0xba)];else{if(_0x4398d7[0x0][_0x4cb85d(0xcd)]==_0x4cb85d(0xc3))var _0x36b197=users[_0x4cb85d(0xc3)];else{if(_0x4398d7[0x0][_0x4cb85d(0xcd)]==_0x4cb85d(0xc5))var _0x36b197=users[_0x4cb85d(0xa0)];}}}}}}}_0x40332d['render'](_0x4cb85d(0xe0),{'success':_0x31689f[_0x4cb85d(0xa5)](_0x4cb85d(0xd0)),'errors':_0x31689f[_0x4cb85d(0xa5)]('errors'),'master_shop':_0x4398d7,'profile':_0x4c9ede,'role':_0x1a6ad8,'language':_0x36b197,'sales_mine':_0x58565a,'staff_arr':_0x4f8334});}catch(_0x1f4312){console[_0x4cb85d(0xa3)](_0x1f4312);}}),router[a0_0x571e73(0xad)](a0_0x571e73(0xc2),auth,async(_0xcb7c87,_0x42da06)=>{var _0x4bbaa7=a0_0x571e73;try{const _0x215f23=await master_shop[_0x4bbaa7(0xc6)](),_0x2713e0=_0xcb7c87[_0x4bbaa7(0xab)],_0x4dfb60=await profile[_0x4bbaa7(0xc0)]({'email':_0x2713e0[_0x4bbaa7(0x9a)]}),_0x5464f5=await staff[_0x4bbaa7(0xc0)]({'email':_0x2713e0[_0x4bbaa7(0x9a)]}),_0x5e3ef6=await customer['find']({'agent_id':_0x5464f5[_0x4bbaa7(0x97)]}),_0x2f7b08=_0xcb7c87[_0x4bbaa7(0xa2)]['id'],_0x21a89b=await sales_order[_0x4bbaa7(0xe4)](_0x2f7b08);if(_0x215f23[0x0][_0x4bbaa7(0xcd)]==_0x4bbaa7(0xa1))var _0x1d5909=users[_0x4bbaa7(0xd7)];else{if(_0x215f23[0x0][_0x4bbaa7(0xcd)]==_0x4bbaa7(0xbf))var _0x1d5909=users['Hindi'];else{if(_0x215f23[0x0][_0x4bbaa7(0xcd)]==_0x4bbaa7(0xae))var _0x1d5909=users['German'];else{if(_0x215f23[0x0]['language']=='Spanish')var _0x1d5909=users['Spanish'];else{if(_0x215f23[0x0][_0x4bbaa7(0xcd)]==_0x4bbaa7(0xe1))var _0x1d5909=users[_0x4bbaa7(0xe1)];else{if(_0x215f23[0x0]['language']==_0x4bbaa7(0x96))var _0x1d5909=users[_0x4bbaa7(0xba)];else{if(_0x215f23[0x0][_0x4bbaa7(0xcd)]==_0x4bbaa7(0xc3))var _0x1d5909=users[_0x4bbaa7(0xc3)];else{if(_0x215f23[0x0][_0x4bbaa7(0xcd)]==_0x4bbaa7(0xc5))var _0x1d5909=users[_0x4bbaa7(0xa0)];}}}}}}}_0x42da06[_0x4bbaa7(0xa6)]('view_collections_so_xt',{'success':_0xcb7c87[_0x4bbaa7(0xa5)](_0x4bbaa7(0xd0)),'errors':_0xcb7c87[_0x4bbaa7(0xa5)](_0x4bbaa7(0xd9)),'master_shop':_0x215f23,'profile':_0x4dfb60,'role':_0x2713e0,'language':_0x1d5909,'customer':_0x5e3ef6,'sales_sa':_0x21a89b,'staff_arr':_0x5464f5});}catch(_0x3bd9a6){console[_0x4bbaa7(0xa3)](_0x3bd9a6);}}),router[a0_0x571e73(0xd1)]('/view_so_xt/:id',auth,async(_0x4bed2e,_0x1c3275)=>{var _0x1f757d=a0_0x571e73;try{const _0x59a25e=_0x4bed2e[_0x1f757d(0xa2)]['id'],_0x341182=await sales_order[_0x1f757d(0xe4)](_0x59a25e),{collection:_0x4f820e,invoicemoney:_0x484c7c,collectionnumber:_0x3d30f1,typeofpayment:_0x24cf40,cashdate:_0x50e8f5,id_detl:_0x57b6ae}=_0x4bed2e[_0x1f757d(0xde)];_0x341182['collection_price']=_0x4f820e,_0x341182['type_of_payment']=_0x24cf40,_0x341182['cash_date']=_0x50e8f5,_0x341182[_0x1f757d(0xd6)]=_0x1f757d(0xdd),_0x341182['typeofprocess']='1';const _0x4320e1=await _0x341182['save']();_0x4bed2e['flash'](_0x1f757d(0xd0),'Collection\x20Update\x20successfully'),_0x1c3275['redirect'](_0x1f757d(0xe5)+_0x59a25e);}catch(_0x266e73){console[_0x1f757d(0xa3)](_0x266e73);}}),module[a0_0x571e73(0xdc)]=router;