var a0_0x54e952=a0_0x29e5;function a0_0x29e5(_0x1ff2f3,_0xeb3457){var _0x4c186c=a0_0x4c18();return a0_0x29e5=function(_0x29e51d,_0x35c999){_0x29e51d=_0x29e51d-0xb8;var _0x227645=_0x4c186c[_0x29e51d];return _0x227645;},a0_0x29e5(_0x1ff2f3,_0xeb3457);}(function(_0x251614,_0x3c9f16){var _0x256551=a0_0x29e5,_0x2eb486=_0x251614();while(!![]){try{var _0xf9520a=parseInt(_0x256551(0xe7))/0x1*(parseInt(_0x256551(0xcc))/0x2)+-parseInt(_0x256551(0xbf))/0x3*(parseInt(_0x256551(0x100))/0x4)+-parseInt(_0x256551(0xf9))/0x5*(parseInt(_0x256551(0xbc))/0x6)+-parseInt(_0x256551(0xce))/0x7+-parseInt(_0x256551(0xcf))/0x8+-parseInt(_0x256551(0xc7))/0x9*(-parseInt(_0x256551(0xd7))/0xa)+parseInt(_0x256551(0xd1))/0xb*(parseInt(_0x256551(0xdc))/0xc);if(_0xf9520a===_0x3c9f16)break;else _0x2eb486['push'](_0x2eb486['shift']());}catch(_0x34d533){_0x2eb486['push'](_0x2eb486['shift']());}}}(a0_0x4c18,0xc76cc));const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x54e952(0xb8)),auth=require(a0_0x54e952(0xba)),users=require(a0_0x54e952(0x10b)),excelJS=require(a0_0x54e952(0xee)),xlsx=require('xlsx'),multer=require(a0_0x54e952(0x105)),mongoose=require(a0_0x54e952(0xc1));function a0_0x4c18(){var _0x250379=['9054248erMRZa','spwp','22EgbHIy','Hindi','render','Chinese','params','/view/:id','16170llkqUm','True','typeofprocess','findById','flash','22049316OceZVO','collection_xt','paid','_id','vol_deals','view_collections_xt','/collection/view/','updateOne','findOne','collection_price','email','2mosvGN','string','Spanish','Arabic','English','Portuguese\x20(BR)','errors','exceljs','find','view_collections_so_xt','fin_disc','user','/view_so_xt/:id','/view_xt/:id','body','totalcollection','language','log','20RLuFQk','cash_date','collectionnumber','/view','/collection/view_so_xt/','valueOf','success','335504YQVilh','totalNewPrice','German','bo_disc','get','multer','post','ObjectId','French','Portuguese','redirect','../public/language/languages.json','/so_x','../models/all_models','exports','../middleware/auth','collection','619356QTBAOG','English\x20(US)','ewt','57bOEWXA','view_collections','mongoose','save','view_collections_sox','map','json','/view_x','4923atUboO','length','forEach','Collection\x20Update\x20successfully','id_detl','737202vNLbnX','Arabic\x20(ae)','9389898ktsSGw'];a0_0x4c18=function(){return _0x250379;};return a0_0x4c18();}router[a0_0x54e952(0x104)](a0_0x54e952(0xfc),auth,async(_0x5bc7b1,_0x516aa2)=>{var _0x9b4431=a0_0x54e952;try{const _0x35aff6=await master_shop[_0x9b4431(0xef)](),_0x372224=_0x5bc7b1['user'],_0x571387=await profile[_0x9b4431(0xe4)]({'email':_0x372224[_0x9b4431(0xe6)]}),_0x4c817c=await staff[_0x9b4431(0xe4)]({'email':_0x372224['email'],'type_of_acc_cat':'2'});let _0x1653ff=[];_0x4c817c!=null&&(_0x1653ff=await sales_order[_0x9b4431(0xef)]({'sales_staff_id':_0x4c817c['_id']}));if(_0x35aff6[0x0][_0x9b4431(0xf7)]==_0x9b4431(0xbd))var _0x43e674=users[_0x9b4431(0xeb)];else{if(_0x35aff6[0x0][_0x9b4431(0xf7)]==_0x9b4431(0xd2))var _0x43e674=users['Hindi'];else{if(_0x35aff6[0x0][_0x9b4431(0xf7)]==_0x9b4431(0x102))var _0x43e674=users['German'];else{if(_0x35aff6[0x0][_0x9b4431(0xf7)]==_0x9b4431(0xe9))var _0x43e674=users[_0x9b4431(0xe9)];else{if(_0x35aff6[0x0][_0x9b4431(0xf7)]==_0x9b4431(0x108))var _0x43e674=users[_0x9b4431(0x108)];else{if(_0x35aff6[0x0][_0x9b4431(0xf7)]==_0x9b4431(0xec))var _0x43e674=users[_0x9b4431(0x109)];else{if(_0x35aff6[0x0]['language']==_0x9b4431(0xd4))var _0x43e674=users[_0x9b4431(0xd4)];else{if(_0x35aff6[0x0][_0x9b4431(0xf7)]==_0x9b4431(0xcd))var _0x43e674=users[_0x9b4431(0xea)];}}}}}}}_0x516aa2['render'](_0x9b4431(0xbb),{'success':_0x5bc7b1[_0x9b4431(0xdb)](_0x9b4431(0xff)),'errors':_0x5bc7b1[_0x9b4431(0xdb)](_0x9b4431(0xed)),'master_shop':_0x35aff6,'profile':_0x571387,'role':_0x372224,'language':_0x43e674,'sales_mine':_0x1653ff,'staff_arr':_0x4c817c});}catch(_0x755343){console['log'](_0x755343);}}),router[a0_0x54e952(0x104)](a0_0x54e952(0xd6),auth,async(_0x26e3df,_0x258611)=>{var _0x4110a3=a0_0x54e952;try{const _0xd4df44=await master_shop[_0x4110a3(0xef)](),_0x436892=_0x26e3df[_0x4110a3(0xf2)],_0x4d8e37=await profile['findOne']({'email':_0x436892['email']}),_0x4b16e9=await staff[_0x4110a3(0xe4)]({'email':_0x436892['email']}),_0x220fb1=await customer[_0x4110a3(0xef)]({'agent_id':_0x4b16e9[_0x4110a3(0xdf)]}),_0x5f0b64=_0x26e3df[_0x4110a3(0xd5)]['id'],_0x335d44=await sales_sa[_0x4110a3(0xda)](_0x5f0b64);if(_0xd4df44[0x0][_0x4110a3(0xf7)]==_0x4110a3(0xbd))var _0x577937=users[_0x4110a3(0xeb)];else{if(_0xd4df44[0x0][_0x4110a3(0xf7)]==_0x4110a3(0xd2))var _0x577937=users[_0x4110a3(0xd2)];else{if(_0xd4df44[0x0][_0x4110a3(0xf7)]==_0x4110a3(0x102))var _0x577937=users['German'];else{if(_0xd4df44[0x0][_0x4110a3(0xf7)]==_0x4110a3(0xe9))var _0x577937=users[_0x4110a3(0xe9)];else{if(_0xd4df44[0x0]['language']=='French')var _0x577937=users['French'];else{if(_0xd4df44[0x0]['language']=='Portuguese\x20(BR)')var _0x577937=users[_0x4110a3(0x109)];else{if(_0xd4df44[0x0][_0x4110a3(0xf7)]==_0x4110a3(0xd4))var _0x577937=users['Chinese'];else{if(_0xd4df44[0x0][_0x4110a3(0xf7)]=='Arabic\x20(ae)')var _0x577937=users[_0x4110a3(0xea)];}}}}}}}_0x258611[_0x4110a3(0xd3)](_0x4110a3(0xc0),{'success':_0x26e3df['flash'](_0x4110a3(0xff)),'errors':_0x26e3df['flash']('errors'),'master_shop':_0xd4df44,'profile':_0x4d8e37,'role':_0x436892,'language':_0x577937,'customer':_0x220fb1,'sales_sa':_0x335d44,'staff_arr':_0x4b16e9});}catch(_0x1205c4){console[_0x4110a3(0xf8)](_0x1205c4);}}),router[a0_0x54e952(0x106)](a0_0x54e952(0xd6),auth,async(_0x539913,_0x20c14c)=>{var _0x5b7f2f=a0_0x54e952;try{const _0x482a2c=_0x539913['params']['id'],_0x3af657=await sales_sa[_0x5b7f2f(0xda)](_0x482a2c),{collection:_0x3e64df,invoicemoney:_0x1cf0db,collectionnumber:_0x25ff3e,typeofpayment:_0xa26568,cashdate:_0x349081,id_detl:_0x3db27c}=_0x539913[_0x5b7f2f(0xf5)];_0x20c14c[_0x5b7f2f(0xc5)](_0x3af657);return;if(typeof _0x3db27c=='string')var _0x5b961a=[_0x539913[_0x5b7f2f(0xf5)][_0x5b7f2f(0xcb)]],_0x458903=[_0x539913[_0x5b7f2f(0xf5)][_0x5b7f2f(0xbe)]],_0x5406cf=[_0x539913[_0x5b7f2f(0xf5)][_0x5b7f2f(0xd0)]],_0x59cbdb=[_0x539913[_0x5b7f2f(0xf5)]['fin_disc']],_0xe191e8=[_0x539913['body'][_0x5b7f2f(0xe0)]],_0xe40c02=[_0x539913[_0x5b7f2f(0xf5)][_0x5b7f2f(0x103)]],_0x13453b=[_0x539913[_0x5b7f2f(0xf5)][_0x5b7f2f(0x101)]];else var _0x5b961a=[..._0x539913[_0x5b7f2f(0xf5)]['id_detl']],_0x458903=[..._0x539913[_0x5b7f2f(0xf5)][_0x5b7f2f(0xbe)]],_0x5406cf=[..._0x539913[_0x5b7f2f(0xf5)][_0x5b7f2f(0xd0)]],_0x59cbdb=[..._0x539913[_0x5b7f2f(0xf5)][_0x5b7f2f(0xf1)]],_0xe191e8=[..._0x539913['body']['vol_deals']],_0xe40c02=[..._0x539913[_0x5b7f2f(0xf5)][_0x5b7f2f(0x103)]],_0x13453b=[..._0x539913[_0x5b7f2f(0xf5)][_0x5b7f2f(0x101)]];const _0x17d95=_0x5b961a[_0x5b7f2f(0xc4)](_0x4381da=>{return _0x4381da={'id_detl':_0x4381da};});_0x458903[_0x5b7f2f(0xc9)]((_0x326250,_0x3020dd)=>{_0x17d95[_0x3020dd]['ewt']=_0x326250;}),_0x5406cf[_0x5b7f2f(0xc9)]((_0x41ea1e,_0x49203f)=>{var _0xe61600=_0x5b7f2f;_0x17d95[_0x49203f][_0xe61600(0xd0)]=_0x41ea1e;}),_0x59cbdb[_0x5b7f2f(0xc9)]((_0x4ae160,_0x565098)=>{var _0x1d0c12=_0x5b7f2f;_0x17d95[_0x565098][_0x1d0c12(0xf1)]=_0x4ae160;}),_0xe191e8[_0x5b7f2f(0xc9)]((_0x514edd,_0x3e6326)=>{var _0x4b97f2=_0x5b7f2f;_0x17d95[_0x3e6326][_0x4b97f2(0xe0)]=_0x514edd;}),_0xe40c02[_0x5b7f2f(0xc9)]((_0x26b103,_0x39f756)=>{var _0x2490bf=_0x5b7f2f;_0x17d95[_0x39f756][_0x2490bf(0x103)]=_0x26b103;}),_0x13453b[_0x5b7f2f(0xc9)]((_0x32d435,_0xe1344c)=>{var _0x192cd1=_0x5b7f2f;_0x17d95[_0xe1344c][_0x192cd1(0xf6)]=_0x32d435;}),_0x3af657[_0x5b7f2f(0xe5)]=_0x3e64df,_0x3af657['collectionnumber']=_0x25ff3e,_0x3af657['type_of_payment']=_0xa26568,_0x3af657[_0x5b7f2f(0xfa)]=_0x349081,_0x3af657['paid']='True';const _0x492b81=await _0x3af657[_0x5b7f2f(0xc2)]();if(_0x492b81[_0x5b7f2f(0xde)]==_0x5b7f2f(0xd8))for(let _0x4a8ad9=0x0;_0x4a8ad9<=_0x17d95[_0x5b7f2f(0xc8)]-0x1;_0x4a8ad9++){const _0x5ea787=_0x17d95[_0x4a8ad9],_0x373c87=mongoose['Types'][_0x5b7f2f(0x107)];console[_0x5b7f2f(0xf8)](_0x5ea787);const _0x5d4d69=await sales_sa[_0x5b7f2f(0xe3)]({'_id':_0x373c87(_0x482a2c['valueOf']()),'sale_product._id':_0x373c87(_0x5ea787[_0x5b7f2f(0xcb)][_0x5b7f2f(0xfe)]())},{'$set':{'sale_product.$.ewt':_0x5ea787[_0x5b7f2f(0xbe)],'sale_product.$.spwp':_0x5ea787[_0x5b7f2f(0xd0)],'sale_product.$.fin_disc':_0x5ea787[_0x5b7f2f(0xf1)],'sale_product.$.vol_deals':_0x5ea787[_0x5b7f2f(0xe0)],'sale_product.$.bo_disc':_0x5ea787['bo_disc'],'sale_product.$.totalprice':parseFloat(_0x5ea787[_0x5b7f2f(0xf6)])}});}_0x539913[_0x5b7f2f(0xdb)]('success',_0x5b7f2f(0xca)),_0x20c14c[_0x5b7f2f(0x10a)](_0x5b7f2f(0xe2)+_0x482a2c);}catch(_0x29c219){console['log'](_0x29c219);}}),router[a0_0x54e952(0x104)]('/x_so',auth,async(_0x3a5ea5,_0x345fff)=>{var _0x68ea5=a0_0x54e952;try{const _0x35c2ad=await master_shop['find'](),_0x47b5e0=_0x3a5ea5[_0x68ea5(0xf2)],_0x55b945=await profile[_0x68ea5(0xe4)]({'email':_0x47b5e0['email']}),_0xa1c95d=await staff['findOne']({'email':_0x47b5e0[_0x68ea5(0xe6)],'type_of_acc_cat':'2'});let _0x47e397=[];_0xa1c95d!=null&&(_0x47e397=await sales_order['find']({'sales_staff_id':_0xa1c95d[_0x68ea5(0xdf)]}));console['log'](_0x47e397);if(_0x35c2ad[0x0][_0x68ea5(0xf7)]==_0x68ea5(0xbd))var _0x5037f6=users[_0x68ea5(0xeb)];else{if(_0x35c2ad[0x0][_0x68ea5(0xf7)]==_0x68ea5(0xd2))var _0x5037f6=users[_0x68ea5(0xd2)];else{if(_0x35c2ad[0x0][_0x68ea5(0xf7)]==_0x68ea5(0x102))var _0x5037f6=users[_0x68ea5(0x102)];else{if(_0x35c2ad[0x0][_0x68ea5(0xf7)]==_0x68ea5(0xe9))var _0x5037f6=users[_0x68ea5(0xe9)];else{if(_0x35c2ad[0x0][_0x68ea5(0xf7)]=='French')var _0x5037f6=users[_0x68ea5(0x108)];else{if(_0x35c2ad[0x0][_0x68ea5(0xf7)]==_0x68ea5(0xec))var _0x5037f6=users['Portuguese'];else{if(_0x35c2ad[0x0]['language']==_0x68ea5(0xd4))var _0x5037f6=users[_0x68ea5(0xd4)];else{if(_0x35c2ad[0x0][_0x68ea5(0xf7)]=='Arabic\x20(ae)')var _0x5037f6=users[_0x68ea5(0xea)];}}}}}}}_0x345fff[_0x68ea5(0xd3)]('collection_sox',{'success':_0x3a5ea5[_0x68ea5(0xdb)](_0x68ea5(0xff)),'errors':_0x3a5ea5['flash'](_0x68ea5(0xed)),'master_shop':_0x35c2ad,'profile':_0x55b945,'role':_0x47b5e0,'language':_0x5037f6,'sales_mine':_0x47e397,'staff_arr':_0xa1c95d});}catch(_0x484317){console['log'](_0x484317);}}),router[a0_0x54e952(0x104)]('/view_sox/:id',auth,async(_0x1e1d9b,_0x59684f)=>{var _0x667dd0=a0_0x54e952;try{const _0xb3e95f=await master_shop[_0x667dd0(0xef)](),_0x2f74ee=_0x1e1d9b[_0x667dd0(0xf2)],_0x50a33e=await profile[_0x667dd0(0xe4)]({'email':_0x2f74ee['email']}),_0x2da272=await staff[_0x667dd0(0xe4)]({'email':_0x2f74ee['email']}),_0x30ad7b=await customer['find']({'agent_id':_0x2da272[_0x667dd0(0xdf)]}),_0x29c70e=_0x1e1d9b[_0x667dd0(0xd5)]['id'],_0x2057de=await sales_order[_0x667dd0(0xda)](_0x29c70e);if(_0xb3e95f[0x0][_0x667dd0(0xf7)]==_0x667dd0(0xbd))var _0xe5990f=users[_0x667dd0(0xeb)];else{if(_0xb3e95f[0x0][_0x667dd0(0xf7)]==_0x667dd0(0xd2))var _0xe5990f=users[_0x667dd0(0xd2)];else{if(_0xb3e95f[0x0][_0x667dd0(0xf7)]==_0x667dd0(0x102))var _0xe5990f=users[_0x667dd0(0x102)];else{if(_0xb3e95f[0x0][_0x667dd0(0xf7)]==_0x667dd0(0xe9))var _0xe5990f=users[_0x667dd0(0xe9)];else{if(_0xb3e95f[0x0][_0x667dd0(0xf7)]==_0x667dd0(0x108))var _0xe5990f=users['French'];else{if(_0xb3e95f[0x0][_0x667dd0(0xf7)]=='Portuguese\x20(BR)')var _0xe5990f=users['Portuguese'];else{if(_0xb3e95f[0x0]['language']=='Chinese')var _0xe5990f=users[_0x667dd0(0xd4)];else{if(_0xb3e95f[0x0]['language']=='Arabic\x20(ae)')var _0xe5990f=users[_0x667dd0(0xea)];}}}}}}}_0x59684f[_0x667dd0(0xd3)](_0x667dd0(0xc3),{'success':_0x1e1d9b[_0x667dd0(0xdb)]('success'),'errors':_0x1e1d9b['flash'](_0x667dd0(0xed)),'master_shop':_0xb3e95f,'profile':_0x50a33e,'role':_0x2f74ee,'language':_0xe5990f,'customer':_0x30ad7b,'sales_sa':_0x2057de});}catch(_0x2285dc){console[_0x667dd0(0xf8)](_0x2285dc);}}),router[a0_0x54e952(0x104)](a0_0x54e952(0xc6),auth,async(_0x3756d4,_0x4425ef)=>{var _0x353cc5=a0_0x54e952;try{const _0x143f3e=await master_shop['find'](),_0x12e51b=_0x3756d4[_0x353cc5(0xf2)],_0x33dfd6=await profile[_0x353cc5(0xe4)]({'email':_0x12e51b['email']}),_0x41f3b1=await staff[_0x353cc5(0xe4)]({'email':_0x12e51b['email'],'type_of_acc_cat':'1'});let _0x63acc8=[];_0x41f3b1!=null&&(_0x63acc8=await sales_sa[_0x353cc5(0xef)]({'sales_staff_id':_0x41f3b1[_0x353cc5(0xdf)]}));if(_0x143f3e[0x0][_0x353cc5(0xf7)]==_0x353cc5(0xbd))var _0x50cd6b=users[_0x353cc5(0xeb)];else{if(_0x143f3e[0x0]['language']==_0x353cc5(0xd2))var _0x50cd6b=users[_0x353cc5(0xd2)];else{if(_0x143f3e[0x0][_0x353cc5(0xf7)]==_0x353cc5(0x102))var _0x50cd6b=users[_0x353cc5(0x102)];else{if(_0x143f3e[0x0][_0x353cc5(0xf7)]=='Spanish')var _0x50cd6b=users[_0x353cc5(0xe9)];else{if(_0x143f3e[0x0][_0x353cc5(0xf7)]==_0x353cc5(0x108))var _0x50cd6b=users[_0x353cc5(0x108)];else{if(_0x143f3e[0x0]['language']==_0x353cc5(0xec))var _0x50cd6b=users['Portuguese'];else{if(_0x143f3e[0x0]['language']==_0x353cc5(0xd4))var _0x50cd6b=users[_0x353cc5(0xd4)];else{if(_0x143f3e[0x0][_0x353cc5(0xf7)]==_0x353cc5(0xcd))var _0x50cd6b=users[_0x353cc5(0xea)];}}}}}}}_0x4425ef[_0x353cc5(0xd3)](_0x353cc5(0xdd),{'success':_0x3756d4['flash'](_0x353cc5(0xff)),'errors':_0x3756d4[_0x353cc5(0xdb)](_0x353cc5(0xed)),'master_shop':_0x143f3e,'profile':_0x33dfd6,'role':_0x12e51b,'language':_0x50cd6b,'sales_mine':_0x63acc8,'staff_arr':_0x41f3b1});}catch(_0x3e5193){console[_0x353cc5(0xf8)](_0x3e5193);}}),router[a0_0x54e952(0x104)]('/view_xt/:id',auth,async(_0x7cd499,_0x5871dd)=>{var _0x32b253=a0_0x54e952;try{const _0x1b9467=await master_shop['find'](),_0x26577d=_0x7cd499[_0x32b253(0xf2)],_0x454cbd=await profile['findOne']({'email':_0x26577d[_0x32b253(0xe6)]}),_0x9fa69a=await staff[_0x32b253(0xe4)]({'email':_0x26577d[_0x32b253(0xe6)]}),_0x586538=await customer[_0x32b253(0xef)]({'agent_id':_0x9fa69a[_0x32b253(0xdf)]}),_0x2202ce=_0x7cd499['params']['id'],_0x3a1182=await sales_sa[_0x32b253(0xda)](_0x2202ce);if(_0x1b9467[0x0]['language']==_0x32b253(0xbd))var _0x7dd363=users[_0x32b253(0xeb)];else{if(_0x1b9467[0x0]['language']==_0x32b253(0xd2))var _0x7dd363=users[_0x32b253(0xd2)];else{if(_0x1b9467[0x0][_0x32b253(0xf7)]==_0x32b253(0x102))var _0x7dd363=users['German'];else{if(_0x1b9467[0x0][_0x32b253(0xf7)]=='Spanish')var _0x7dd363=users[_0x32b253(0xe9)];else{if(_0x1b9467[0x0][_0x32b253(0xf7)]=='French')var _0x7dd363=users[_0x32b253(0x108)];else{if(_0x1b9467[0x0]['language']=='Portuguese\x20(BR)')var _0x7dd363=users[_0x32b253(0x109)];else{if(_0x1b9467[0x0][_0x32b253(0xf7)]=='Chinese')var _0x7dd363=users[_0x32b253(0xd4)];else{if(_0x1b9467[0x0][_0x32b253(0xf7)]==_0x32b253(0xcd))var _0x7dd363=users[_0x32b253(0xea)];}}}}}}}_0x5871dd[_0x32b253(0xd3)](_0x32b253(0xe1),{'success':_0x7cd499[_0x32b253(0xdb)](_0x32b253(0xff)),'errors':_0x7cd499[_0x32b253(0xdb)]('errors'),'master_shop':_0x1b9467,'profile':_0x454cbd,'role':_0x26577d,'language':_0x7dd363,'customer':_0x586538,'sales_sa':_0x3a1182,'staff_arr':_0x9fa69a});}catch(_0x4e8727){console['log'](_0x4e8727);}}),router[a0_0x54e952(0x106)](a0_0x54e952(0xf4),auth,async(_0x4fc3f8,_0x3d14e8)=>{var _0x4aa160=a0_0x54e952;try{const _0x1b7d96=_0x4fc3f8[_0x4aa160(0xd5)]['id'],_0x31e271=await sales_sa['findById'](_0x1b7d96),{collection:_0x3465f6,invoicemoney:_0x34eecd,collectionnumber:_0x4558ba,typeofpayment:_0x319b90,cashdate:_0x50ca9e,id_detl:_0x26308c}=_0x4fc3f8[_0x4aa160(0xf5)];if(typeof _0x26308c==_0x4aa160(0xe8))var _0x5f501a=[_0x4fc3f8[_0x4aa160(0xf5)]['id_detl']],_0xa474fc=[_0x4fc3f8[_0x4aa160(0xf5)][_0x4aa160(0xbe)]],_0x462da1=[_0x4fc3f8[_0x4aa160(0xf5)]['spwp']],_0x501963=[_0x4fc3f8[_0x4aa160(0xf5)][_0x4aa160(0xf1)]],_0x37b409=[_0x4fc3f8[_0x4aa160(0xf5)][_0x4aa160(0xe0)]],_0x1c2084=[_0x4fc3f8[_0x4aa160(0xf5)][_0x4aa160(0x103)]],_0x4d7519=[_0x4fc3f8[_0x4aa160(0xf5)][_0x4aa160(0x101)]];else var _0x5f501a=[..._0x4fc3f8[_0x4aa160(0xf5)]['id_detl']],_0xa474fc=[..._0x4fc3f8[_0x4aa160(0xf5)]['ewt']],_0x462da1=[..._0x4fc3f8['body'][_0x4aa160(0xd0)]],_0x501963=[..._0x4fc3f8[_0x4aa160(0xf5)][_0x4aa160(0xf1)]],_0x37b409=[..._0x4fc3f8['body'][_0x4aa160(0xe0)]],_0x1c2084=[..._0x4fc3f8['body'][_0x4aa160(0x103)]],_0x4d7519=[..._0x4fc3f8['body'][_0x4aa160(0x101)]];const _0x116407=_0x5f501a['map'](_0x3700c0=>{return _0x3700c0={'id_detl':_0x3700c0};});_0xa474fc[_0x4aa160(0xc9)]((_0x428930,_0x377c28)=>{var _0x3b77a0=_0x4aa160;_0x116407[_0x377c28][_0x3b77a0(0xbe)]=_0x428930;}),_0x462da1[_0x4aa160(0xc9)]((_0x426d5d,_0x47c123)=>{var _0x2b6cd4=_0x4aa160;_0x116407[_0x47c123][_0x2b6cd4(0xd0)]=_0x426d5d;}),_0x501963[_0x4aa160(0xc9)]((_0x1b6302,_0x2264e9)=>{var _0x1a58b8=_0x4aa160;_0x116407[_0x2264e9][_0x1a58b8(0xf1)]=_0x1b6302;}),_0x37b409['forEach']((_0x37eec6,_0x5dd907)=>{var _0xec6c64=_0x4aa160;_0x116407[_0x5dd907][_0xec6c64(0xe0)]=_0x37eec6;}),_0x1c2084[_0x4aa160(0xc9)]((_0x1a672e,_0x4cfd62)=>{var _0x148804=_0x4aa160;_0x116407[_0x4cfd62][_0x148804(0x103)]=_0x1a672e;}),_0x4d7519[_0x4aa160(0xc9)]((_0x2be089,_0x306834)=>{_0x116407[_0x306834]['totalcollection']=_0x2be089;}),_0x31e271['collection_price']=_0x3465f6,_0x31e271[_0x4aa160(0xfb)]=_0x4558ba,_0x31e271['type_of_payment']=_0x319b90,_0x31e271[_0x4aa160(0xfa)]=_0x50ca9e,_0x31e271[_0x4aa160(0xde)]=_0x4aa160(0xd8),_0x31e271[_0x4aa160(0xd9)]='1';const _0x5d2bc6=await _0x31e271[_0x4aa160(0xc2)]();if(_0x5d2bc6[_0x4aa160(0xde)]=='True')for(let _0x5b506a=0x0;_0x5b506a<=_0x116407[_0x4aa160(0xc8)]-0x1;_0x5b506a++){const _0x110680=_0x116407[_0x5b506a],_0x551c4d=mongoose['Types']['ObjectId'];console[_0x4aa160(0xf8)](_0x110680);const _0x5c6970=await sales_sa[_0x4aa160(0xe3)]({'_id':_0x551c4d(_0x1b7d96[_0x4aa160(0xfe)]()),'sale_product._id':_0x551c4d(_0x110680[_0x4aa160(0xcb)][_0x4aa160(0xfe)]())},{'$set':{'sale_product.$.ewt':_0x110680[_0x4aa160(0xbe)],'sale_product.$.spwp':_0x110680['spwp'],'sale_product.$.fin_disc':_0x110680[_0x4aa160(0xf1)],'sale_product.$.vol_deals':_0x110680[_0x4aa160(0xe0)],'sale_product.$.bo_disc':_0x110680[_0x4aa160(0x103)],'sale_product.$.totalprice':parseFloat(_0x110680['totalcollection'])}});}_0x4fc3f8['flash'](_0x4aa160(0xff),'Collection\x20Update\x20successfully'),_0x3d14e8[_0x4aa160(0x10a)](_0x4aa160(0xe2)+_0x1b7d96);}catch(_0x5ce106){console[_0x4aa160(0xf8)](_0x5ce106);}}),router[a0_0x54e952(0x104)](a0_0x54e952(0x10c),auth,async(_0x227810,_0x41b599)=>{var _0x33766a=a0_0x54e952;try{const _0x5293ea=await master_shop[_0x33766a(0xef)](),_0x465e05=_0x227810[_0x33766a(0xf2)],_0x348487=await profile[_0x33766a(0xe4)]({'email':_0x465e05[_0x33766a(0xe6)]}),_0x47ef82=await staff['findOne']({'email':_0x465e05['email'],'type_of_acc_cat':'1'});let _0x5a2065=[];_0x47ef82!=null&&(_0x5a2065=await sales_order[_0x33766a(0xef)]({'sales_staff_id':_0x47ef82['_id']}));if(_0x5293ea[0x0][_0x33766a(0xf7)]==_0x33766a(0xbd))var _0x20542a=users[_0x33766a(0xeb)];else{if(_0x5293ea[0x0][_0x33766a(0xf7)]=='Hindi')var _0x20542a=users[_0x33766a(0xd2)];else{if(_0x5293ea[0x0]['language']==_0x33766a(0x102))var _0x20542a=users[_0x33766a(0x102)];else{if(_0x5293ea[0x0][_0x33766a(0xf7)]==_0x33766a(0xe9))var _0x20542a=users[_0x33766a(0xe9)];else{if(_0x5293ea[0x0]['language']==_0x33766a(0x108))var _0x20542a=users[_0x33766a(0x108)];else{if(_0x5293ea[0x0][_0x33766a(0xf7)]=='Portuguese\x20(BR)')var _0x20542a=users[_0x33766a(0x109)];else{if(_0x5293ea[0x0][_0x33766a(0xf7)]==_0x33766a(0xd4))var _0x20542a=users[_0x33766a(0xd4)];else{if(_0x5293ea[0x0]['language']==_0x33766a(0xcd))var _0x20542a=users[_0x33766a(0xea)];}}}}}}}_0x41b599['render']('collection_so_xt',{'success':_0x227810[_0x33766a(0xdb)](_0x33766a(0xff)),'errors':_0x227810['flash'](_0x33766a(0xed)),'master_shop':_0x5293ea,'profile':_0x348487,'role':_0x465e05,'language':_0x20542a,'sales_mine':_0x5a2065,'staff_arr':_0x47ef82});}catch(_0xe3ddcd){console[_0x33766a(0xf8)](_0xe3ddcd);}}),router[a0_0x54e952(0x104)]('/view_so_xt/:id',auth,async(_0x3e6eda,_0x5cea9b)=>{var _0x321f00=a0_0x54e952;try{const _0x32f073=await master_shop[_0x321f00(0xef)](),_0x458503=_0x3e6eda[_0x321f00(0xf2)],_0x477eaf=await profile['findOne']({'email':_0x458503[_0x321f00(0xe6)]}),_0x554ed4=await staff['findOne']({'email':_0x458503['email']}),_0x41c2c3=await customer[_0x321f00(0xef)]({'agent_id':_0x554ed4['_id']}),_0x4968c8=_0x3e6eda[_0x321f00(0xd5)]['id'],_0x1f2f19=await sales_order[_0x321f00(0xda)](_0x4968c8);if(_0x32f073[0x0][_0x321f00(0xf7)]==_0x321f00(0xbd))var _0x5b8cf8=users[_0x321f00(0xeb)];else{if(_0x32f073[0x0]['language']==_0x321f00(0xd2))var _0x5b8cf8=users[_0x321f00(0xd2)];else{if(_0x32f073[0x0]['language']==_0x321f00(0x102))var _0x5b8cf8=users['German'];else{if(_0x32f073[0x0][_0x321f00(0xf7)]==_0x321f00(0xe9))var _0x5b8cf8=users[_0x321f00(0xe9)];else{if(_0x32f073[0x0][_0x321f00(0xf7)]==_0x321f00(0x108))var _0x5b8cf8=users[_0x321f00(0x108)];else{if(_0x32f073[0x0][_0x321f00(0xf7)]==_0x321f00(0xec))var _0x5b8cf8=users[_0x321f00(0x109)];else{if(_0x32f073[0x0][_0x321f00(0xf7)]==_0x321f00(0xd4))var _0x5b8cf8=users[_0x321f00(0xd4)];else{if(_0x32f073[0x0][_0x321f00(0xf7)]==_0x321f00(0xcd))var _0x5b8cf8=users[_0x321f00(0xea)];}}}}}}}_0x5cea9b['render'](_0x321f00(0xf0),{'success':_0x3e6eda[_0x321f00(0xdb)](_0x321f00(0xff)),'errors':_0x3e6eda[_0x321f00(0xdb)](_0x321f00(0xed)),'master_shop':_0x32f073,'profile':_0x477eaf,'role':_0x458503,'language':_0x5b8cf8,'customer':_0x41c2c3,'sales_sa':_0x1f2f19,'staff_arr':_0x554ed4});}catch(_0x407b1f){console['log'](_0x407b1f);}}),router[a0_0x54e952(0x106)](a0_0x54e952(0xf3),auth,async(_0x1a816a,_0x560aaf)=>{var _0x3e9e30=a0_0x54e952;try{const _0x448d58=_0x1a816a[_0x3e9e30(0xd5)]['id'],_0x2fa7a4=await sales_order[_0x3e9e30(0xda)](_0x448d58),{collection:_0x1f9b3d,invoicemoney:_0x252063,collectionnumber:_0x431f69,typeofpayment:_0x2e0f18,cashdate:_0x10eef5,id_detl:_0xf8785f}=_0x1a816a[_0x3e9e30(0xf5)];_0x2fa7a4[_0x3e9e30(0xe5)]=_0x1f9b3d,_0x2fa7a4['type_of_payment']=_0x2e0f18,_0x2fa7a4['cash_date']=_0x10eef5,_0x2fa7a4[_0x3e9e30(0xde)]='True',_0x2fa7a4[_0x3e9e30(0xd9)]='1';const _0xf397a8=await _0x2fa7a4[_0x3e9e30(0xc2)]();_0x1a816a['flash'](_0x3e9e30(0xff),_0x3e9e30(0xca)),_0x560aaf['redirect'](_0x3e9e30(0xfd)+_0x448d58);}catch(_0x4e9a3f){console[_0x3e9e30(0xf8)](_0x4e9a3f);}}),module[a0_0x54e952(0xb9)]=router;