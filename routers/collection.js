function a0_0x54bb(_0x4c5f80,_0x23bcde){var _0x395441=a0_0x3954();return a0_0x54bb=function(_0x54bb00,_0x409ac7){_0x54bb00=_0x54bb00-0x106;var _0x457b07=_0x395441[_0x54bb00];return _0x457b07;},a0_0x54bb(_0x4c5f80,_0x23bcde);}var a0_0x18eea9=a0_0x54bb;(function(_0x431d49,_0x1d38ae){var _0x5d3381=a0_0x54bb,_0x56e67e=_0x431d49();while(!![]){try{var _0x23c237=parseInt(_0x5d3381(0x143))/0x1*(-parseInt(_0x5d3381(0x12f))/0x2)+-parseInt(_0x5d3381(0x156))/0x3*(parseInt(_0x5d3381(0x10f))/0x4)+parseInt(_0x5d3381(0x119))/0x5+-parseInt(_0x5d3381(0x138))/0x6+parseInt(_0x5d3381(0x10b))/0x7+-parseInt(_0x5d3381(0x125))/0x8*(-parseInt(_0x5d3381(0x118))/0x9)+-parseInt(_0x5d3381(0x130))/0xa;if(_0x23c237===_0x1d38ae)break;else _0x56e67e['push'](_0x56e67e['shift']());}catch(_0x4c2d8e){_0x56e67e['push'](_0x56e67e['shift']());}}}(a0_0x3954,0x7cab7));const express=require(a0_0x18eea9(0x11a)),app=express(),router=express[a0_0x18eea9(0x11b)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x18eea9(0x12d)),auth=require(a0_0x18eea9(0x139)),users=require(a0_0x18eea9(0x110)),excelJS=require('exceljs'),xlsx=require(a0_0x18eea9(0x114)),multer=require(a0_0x18eea9(0x147)),mongoose=require(a0_0x18eea9(0x14b));function a0_0x3954(){var _0x30e57f=['Router','English\x20(US)','Types','/view_xt/:id','flash','ewt','get','findOne','id_detl','spwp','8rhimvN','Portuguese','vol_deals','find','/so_x','German','language','cash_date','../models/all_models','/collection/view_so_xt/','321880WTchcK','683070DTtZCZ','Collection\x20Update\x20successfully','totalNewPrice','redirect','French','collection_price','body','_id','1181484GMArqd','../middleware/auth','/view/:id','collection_xt','typeofprocess','success','forEach','collectionnumber','English','view_collections_xt','post','6nZOvVj','length','map','fin_disc','multer','valueOf','findById','view_collections_sox','mongoose','render','collection','/view_x','True','params','string','ObjectId','view_collections','exports','save','213KZAfqT','Chinese','collection_sox','email','Spanish','Arabic','type_of_payment','Arabic\x20(ae)','Hindi','errors','4413038NhdVwL','totalcollection','collection_so_xt','paid','43012reYwrb','../public/language/languages.json','/view_so_xt/:id','user','Portuguese\x20(BR)','xlsx','log','view_collections_so_xt','bo_disc','8927001WsRozj','4413240gDaFHj','express'];a0_0x3954=function(){return _0x30e57f;};return a0_0x3954();}router[a0_0x18eea9(0x121)]('/view',auth,async(_0x13a637,_0xfa4eaf)=>{var _0x14d17d=a0_0x18eea9;try{const _0x342ded=await master_shop[_0x14d17d(0x128)](),_0x5e3486=_0x13a637['user'],_0x8d4d72=await profile['findOne']({'email':_0x5e3486[_0x14d17d(0x159)]}),_0x115adc=await staff[_0x14d17d(0x122)]({'email':_0x5e3486[_0x14d17d(0x159)],'type_of_acc_cat':'2'});let _0x2ba115=[];_0x115adc!=null&&(_0x2ba115=await sales_order['find']({'sales_staff_id':_0x115adc['_id']}));if(_0x342ded[0x0][_0x14d17d(0x12b)]==_0x14d17d(0x11c))var _0x4535da=users['English'];else{if(_0x342ded[0x0]['language']==_0x14d17d(0x109))var _0x4535da=users[_0x14d17d(0x109)];else{if(_0x342ded[0x0][_0x14d17d(0x12b)]==_0x14d17d(0x12a))var _0x4535da=users[_0x14d17d(0x12a)];else{if(_0x342ded[0x0][_0x14d17d(0x12b)]=='Spanish')var _0x4535da=users[_0x14d17d(0x15a)];else{if(_0x342ded[0x0][_0x14d17d(0x12b)]==_0x14d17d(0x134))var _0x4535da=users[_0x14d17d(0x134)];else{if(_0x342ded[0x0]['language']==_0x14d17d(0x113))var _0x4535da=users[_0x14d17d(0x126)];else{if(_0x342ded[0x0][_0x14d17d(0x12b)]==_0x14d17d(0x157))var _0x4535da=users[_0x14d17d(0x157)];else{if(_0x342ded[0x0]['language']=='Arabic\x20(ae)')var _0x4535da=users['Arabic'];}}}}}}}_0xfa4eaf[_0x14d17d(0x14c)](_0x14d17d(0x14d),{'success':_0x13a637[_0x14d17d(0x11f)]('success'),'errors':_0x13a637['flash'](_0x14d17d(0x10a)),'master_shop':_0x342ded,'profile':_0x8d4d72,'role':_0x5e3486,'language':_0x4535da,'sales_mine':_0x2ba115,'staff_arr':_0x115adc});}catch(_0x2311eb){console[_0x14d17d(0x115)](_0x2311eb);}}),router[a0_0x18eea9(0x121)](a0_0x18eea9(0x13a),auth,async(_0x1d8eb3,_0x583ad6)=>{var _0x5fc38b=a0_0x18eea9;try{const _0x288926=await master_shop[_0x5fc38b(0x128)](),_0x586c1c=_0x1d8eb3[_0x5fc38b(0x112)],_0xcd721f=await profile[_0x5fc38b(0x122)]({'email':_0x586c1c[_0x5fc38b(0x159)]}),_0x3a0a3a=await staff[_0x5fc38b(0x122)]({'email':_0x586c1c['email']}),_0x21b063=await customer['find']({'agent_id':_0x3a0a3a[_0x5fc38b(0x137)]}),_0xf955fd=_0x1d8eb3['params']['id'],_0x5206c7=await sales_sa['findById'](_0xf955fd);if(_0x288926[0x0]['language']==_0x5fc38b(0x11c))var _0x5cdc33=users[_0x5fc38b(0x140)];else{if(_0x288926[0x0][_0x5fc38b(0x12b)]=='Hindi')var _0x5cdc33=users[_0x5fc38b(0x109)];else{if(_0x288926[0x0][_0x5fc38b(0x12b)]==_0x5fc38b(0x12a))var _0x5cdc33=users['German'];else{if(_0x288926[0x0][_0x5fc38b(0x12b)]==_0x5fc38b(0x15a))var _0x5cdc33=users[_0x5fc38b(0x15a)];else{if(_0x288926[0x0]['language']==_0x5fc38b(0x134))var _0x5cdc33=users[_0x5fc38b(0x134)];else{if(_0x288926[0x0][_0x5fc38b(0x12b)]=='Portuguese\x20(BR)')var _0x5cdc33=users['Portuguese'];else{if(_0x288926[0x0]['language']==_0x5fc38b(0x157))var _0x5cdc33=users[_0x5fc38b(0x157)];else{if(_0x288926[0x0][_0x5fc38b(0x12b)]=='Arabic\x20(ae)')var _0x5cdc33=users['Arabic'];}}}}}}}_0x583ad6[_0x5fc38b(0x14c)](_0x5fc38b(0x153),{'success':_0x1d8eb3['flash']('success'),'errors':_0x1d8eb3[_0x5fc38b(0x11f)](_0x5fc38b(0x10a)),'master_shop':_0x288926,'profile':_0xcd721f,'role':_0x586c1c,'language':_0x5cdc33,'customer':_0x21b063,'sales_sa':_0x5206c7,'staff_arr':_0x3a0a3a});}catch(_0x5ca709){console[_0x5fc38b(0x115)](_0x5ca709);}}),router[a0_0x18eea9(0x142)](a0_0x18eea9(0x13a),auth,async(_0x4829b7,_0xb933a7)=>{var _0x574975=a0_0x18eea9;try{const _0x5e9ce8=_0x4829b7[_0x574975(0x150)]['id'],_0x11dc14=await sales_sa[_0x574975(0x149)](_0x5e9ce8),{collection:_0x58caf3,invoicemoney:_0x7324a3,collectionnumber:_0x28cdaa,typeofpayment:_0x13264b,cashdate:_0x2dc8f6,id_detl:_0x4ebcf0}=_0x4829b7['body'];_0xb933a7['json'](_0x11dc14);return;if(typeof _0x4ebcf0==_0x574975(0x151))var _0x20bd03=[_0x4829b7['body'][_0x574975(0x123)]],_0x3211d8=[_0x4829b7[_0x574975(0x136)][_0x574975(0x120)]],_0x3935b9=[_0x4829b7[_0x574975(0x136)][_0x574975(0x124)]],_0x6079ec=[_0x4829b7[_0x574975(0x136)][_0x574975(0x146)]],_0x16b880=[_0x4829b7['body']['vol_deals']],_0x505e2e=[_0x4829b7[_0x574975(0x136)][_0x574975(0x117)]],_0xc88eef=[_0x4829b7[_0x574975(0x136)][_0x574975(0x132)]];else var _0x20bd03=[..._0x4829b7['body']['id_detl']],_0x3211d8=[..._0x4829b7[_0x574975(0x136)][_0x574975(0x120)]],_0x3935b9=[..._0x4829b7[_0x574975(0x136)]['spwp']],_0x6079ec=[..._0x4829b7[_0x574975(0x136)]['fin_disc']],_0x16b880=[..._0x4829b7[_0x574975(0x136)][_0x574975(0x127)]],_0x505e2e=[..._0x4829b7[_0x574975(0x136)][_0x574975(0x117)]],_0xc88eef=[..._0x4829b7[_0x574975(0x136)][_0x574975(0x132)]];const _0x32fa23=_0x20bd03['map'](_0xcedcf1=>{return _0xcedcf1={'id_detl':_0xcedcf1};});_0x3211d8[_0x574975(0x13e)]((_0x4381d0,_0x56790b)=>{_0x32fa23[_0x56790b]['ewt']=_0x4381d0;}),_0x3935b9['forEach']((_0x305454,_0x33a00e)=>{var _0x4c2dbc=_0x574975;_0x32fa23[_0x33a00e][_0x4c2dbc(0x124)]=_0x305454;}),_0x6079ec[_0x574975(0x13e)]((_0x455cce,_0x59f572)=>{var _0x39b2de=_0x574975;_0x32fa23[_0x59f572][_0x39b2de(0x146)]=_0x455cce;}),_0x16b880[_0x574975(0x13e)]((_0x2cef9f,_0x2a103a)=>{var _0x4952d7=_0x574975;_0x32fa23[_0x2a103a][_0x4952d7(0x127)]=_0x2cef9f;}),_0x505e2e[_0x574975(0x13e)]((_0x174e2a,_0x5f2175)=>{var _0xb0312d=_0x574975;_0x32fa23[_0x5f2175][_0xb0312d(0x117)]=_0x174e2a;}),_0xc88eef[_0x574975(0x13e)]((_0x5aab32,_0x329def)=>{_0x32fa23[_0x329def]['totalcollection']=_0x5aab32;}),_0x11dc14['collection_price']=_0x58caf3,_0x11dc14[_0x574975(0x13f)]=_0x28cdaa,_0x11dc14[_0x574975(0x107)]=_0x13264b,_0x11dc14[_0x574975(0x12c)]=_0x2dc8f6,_0x11dc14['paid']=_0x574975(0x14f);const _0x5b9914=await _0x11dc14[_0x574975(0x155)]();if(_0x5b9914[_0x574975(0x10e)]==_0x574975(0x14f))for(let _0x39ce42=0x0;_0x39ce42<=_0x32fa23[_0x574975(0x144)]-0x1;_0x39ce42++){const _0x203d18=_0x32fa23[_0x39ce42],_0x153c3b=mongoose[_0x574975(0x11d)][_0x574975(0x152)];console[_0x574975(0x115)](_0x203d18);const _0x5251a8=await sales_sa['updateOne']({'_id':_0x153c3b(_0x5e9ce8['valueOf']()),'sale_product._id':_0x153c3b(_0x203d18[_0x574975(0x123)][_0x574975(0x148)]())},{'$set':{'sale_product.$.ewt':_0x203d18[_0x574975(0x120)],'sale_product.$.spwp':_0x203d18['spwp'],'sale_product.$.fin_disc':_0x203d18[_0x574975(0x146)],'sale_product.$.vol_deals':_0x203d18[_0x574975(0x127)],'sale_product.$.bo_disc':_0x203d18['bo_disc'],'sale_product.$.totalprice':parseFloat(_0x203d18[_0x574975(0x10c)])}});}_0x4829b7[_0x574975(0x11f)]('success',_0x574975(0x131)),_0xb933a7[_0x574975(0x133)]('/collection/view/'+_0x5e9ce8);}catch(_0x49538c){console['log'](_0x49538c);}}),router[a0_0x18eea9(0x121)]('/x_so',auth,async(_0x4ea66d,_0x54de20)=>{var _0x4a9d2b=a0_0x18eea9;try{const _0x4b1b7d=await master_shop[_0x4a9d2b(0x128)](),_0x3543a9=_0x4ea66d[_0x4a9d2b(0x112)],_0x3b7f63=await profile[_0x4a9d2b(0x122)]({'email':_0x3543a9[_0x4a9d2b(0x159)]}),_0x177552=await staff['findOne']({'email':_0x3543a9[_0x4a9d2b(0x159)],'type_of_acc_cat':'2'});let _0x24348d=[];_0x177552!=null&&(_0x24348d=await sales_order[_0x4a9d2b(0x128)]({'sales_staff_id':_0x177552[_0x4a9d2b(0x137)]}));console[_0x4a9d2b(0x115)](_0x24348d);if(_0x4b1b7d[0x0]['language']==_0x4a9d2b(0x11c))var _0x4cbb3f=users[_0x4a9d2b(0x140)];else{if(_0x4b1b7d[0x0][_0x4a9d2b(0x12b)]==_0x4a9d2b(0x109))var _0x4cbb3f=users[_0x4a9d2b(0x109)];else{if(_0x4b1b7d[0x0][_0x4a9d2b(0x12b)]==_0x4a9d2b(0x12a))var _0x4cbb3f=users[_0x4a9d2b(0x12a)];else{if(_0x4b1b7d[0x0][_0x4a9d2b(0x12b)]=='Spanish')var _0x4cbb3f=users[_0x4a9d2b(0x15a)];else{if(_0x4b1b7d[0x0][_0x4a9d2b(0x12b)]==_0x4a9d2b(0x134))var _0x4cbb3f=users[_0x4a9d2b(0x134)];else{if(_0x4b1b7d[0x0][_0x4a9d2b(0x12b)]==_0x4a9d2b(0x113))var _0x4cbb3f=users['Portuguese'];else{if(_0x4b1b7d[0x0][_0x4a9d2b(0x12b)]=='Chinese')var _0x4cbb3f=users[_0x4a9d2b(0x157)];else{if(_0x4b1b7d[0x0][_0x4a9d2b(0x12b)]==_0x4a9d2b(0x108))var _0x4cbb3f=users['Arabic'];}}}}}}}_0x54de20['render'](_0x4a9d2b(0x158),{'success':_0x4ea66d[_0x4a9d2b(0x11f)]('success'),'errors':_0x4ea66d[_0x4a9d2b(0x11f)]('errors'),'master_shop':_0x4b1b7d,'profile':_0x3b7f63,'role':_0x3543a9,'language':_0x4cbb3f,'sales_mine':_0x24348d,'staff_arr':_0x177552});}catch(_0x36d6c8){console['log'](_0x36d6c8);}}),router[a0_0x18eea9(0x121)]('/view_sox/:id',auth,async(_0xfb21d9,_0x153997)=>{var _0x39052c=a0_0x18eea9;try{const _0xcb0e3e=await master_shop['find'](),_0x468aad=_0xfb21d9[_0x39052c(0x112)],_0x48291c=await profile[_0x39052c(0x122)]({'email':_0x468aad[_0x39052c(0x159)]}),_0x27225e=await staff[_0x39052c(0x122)]({'email':_0x468aad[_0x39052c(0x159)]}),_0x737a8e=await customer['find']({'agent_id':_0x27225e[_0x39052c(0x137)]}),_0x2ab821=_0xfb21d9['params']['id'],_0x412431=await sales_order[_0x39052c(0x149)](_0x2ab821);if(_0xcb0e3e[0x0]['language']==_0x39052c(0x11c))var _0x425e27=users[_0x39052c(0x140)];else{if(_0xcb0e3e[0x0][_0x39052c(0x12b)]==_0x39052c(0x109))var _0x425e27=users[_0x39052c(0x109)];else{if(_0xcb0e3e[0x0][_0x39052c(0x12b)]=='German')var _0x425e27=users[_0x39052c(0x12a)];else{if(_0xcb0e3e[0x0][_0x39052c(0x12b)]==_0x39052c(0x15a))var _0x425e27=users[_0x39052c(0x15a)];else{if(_0xcb0e3e[0x0]['language']==_0x39052c(0x134))var _0x425e27=users[_0x39052c(0x134)];else{if(_0xcb0e3e[0x0]['language']=='Portuguese\x20(BR)')var _0x425e27=users[_0x39052c(0x126)];else{if(_0xcb0e3e[0x0][_0x39052c(0x12b)]=='Chinese')var _0x425e27=users[_0x39052c(0x157)];else{if(_0xcb0e3e[0x0][_0x39052c(0x12b)]==_0x39052c(0x108))var _0x425e27=users[_0x39052c(0x106)];}}}}}}}_0x153997['render'](_0x39052c(0x14a),{'success':_0xfb21d9[_0x39052c(0x11f)](_0x39052c(0x13d)),'errors':_0xfb21d9['flash'](_0x39052c(0x10a)),'master_shop':_0xcb0e3e,'profile':_0x48291c,'role':_0x468aad,'language':_0x425e27,'customer':_0x737a8e,'sales_sa':_0x412431});}catch(_0x259093){console['log'](_0x259093);}}),router[a0_0x18eea9(0x121)](a0_0x18eea9(0x14e),auth,async(_0x4dd9c3,_0x485364)=>{var _0x23f910=a0_0x18eea9;try{const _0x499c7e=await master_shop[_0x23f910(0x128)](),_0x267a96=_0x4dd9c3[_0x23f910(0x112)],_0xc388b6=await profile[_0x23f910(0x122)]({'email':_0x267a96[_0x23f910(0x159)]}),_0x3bab8f=await staff['findOne']({'email':_0x267a96[_0x23f910(0x159)],'type_of_acc_cat':'1'});let _0x1a2368=[];_0x3bab8f!=null&&(_0x1a2368=await sales_sa[_0x23f910(0x128)]({'sales_staff_id':_0x3bab8f[_0x23f910(0x137)]}));if(_0x499c7e[0x0][_0x23f910(0x12b)]=='English\x20(US)')var _0x2e7159=users[_0x23f910(0x140)];else{if(_0x499c7e[0x0]['language']==_0x23f910(0x109))var _0x2e7159=users[_0x23f910(0x109)];else{if(_0x499c7e[0x0][_0x23f910(0x12b)]==_0x23f910(0x12a))var _0x2e7159=users[_0x23f910(0x12a)];else{if(_0x499c7e[0x0][_0x23f910(0x12b)]==_0x23f910(0x15a))var _0x2e7159=users[_0x23f910(0x15a)];else{if(_0x499c7e[0x0][_0x23f910(0x12b)]==_0x23f910(0x134))var _0x2e7159=users[_0x23f910(0x134)];else{if(_0x499c7e[0x0][_0x23f910(0x12b)]=='Portuguese\x20(BR)')var _0x2e7159=users[_0x23f910(0x126)];else{if(_0x499c7e[0x0][_0x23f910(0x12b)]=='Chinese')var _0x2e7159=users['Chinese'];else{if(_0x499c7e[0x0]['language']==_0x23f910(0x108))var _0x2e7159=users[_0x23f910(0x106)];}}}}}}}_0x485364[_0x23f910(0x14c)](_0x23f910(0x13b),{'success':_0x4dd9c3[_0x23f910(0x11f)]('success'),'errors':_0x4dd9c3[_0x23f910(0x11f)](_0x23f910(0x10a)),'master_shop':_0x499c7e,'profile':_0xc388b6,'role':_0x267a96,'language':_0x2e7159,'sales_mine':_0x1a2368,'staff_arr':_0x3bab8f});}catch(_0x57a7ce){console[_0x23f910(0x115)](_0x57a7ce);}}),router[a0_0x18eea9(0x121)]('/view_xt/:id',auth,async(_0x55a71e,_0x552383)=>{var _0x439c3d=a0_0x18eea9;try{const _0x251859=await master_shop[_0x439c3d(0x128)](),_0x540991=_0x55a71e[_0x439c3d(0x112)],_0x54f920=await profile['findOne']({'email':_0x540991[_0x439c3d(0x159)]}),_0x17d519=await staff['findOne']({'email':_0x540991[_0x439c3d(0x159)]}),_0x549ec2=await customer[_0x439c3d(0x128)]({'agent_id':_0x17d519[_0x439c3d(0x137)]}),_0x4d2f65=_0x55a71e[_0x439c3d(0x150)]['id'],_0x221a7a=await sales_sa[_0x439c3d(0x149)](_0x4d2f65);if(_0x251859[0x0][_0x439c3d(0x12b)]==_0x439c3d(0x11c))var _0x3fd6ad=users[_0x439c3d(0x140)];else{if(_0x251859[0x0][_0x439c3d(0x12b)]==_0x439c3d(0x109))var _0x3fd6ad=users[_0x439c3d(0x109)];else{if(_0x251859[0x0][_0x439c3d(0x12b)]=='German')var _0x3fd6ad=users[_0x439c3d(0x12a)];else{if(_0x251859[0x0]['language']==_0x439c3d(0x15a))var _0x3fd6ad=users[_0x439c3d(0x15a)];else{if(_0x251859[0x0][_0x439c3d(0x12b)]==_0x439c3d(0x134))var _0x3fd6ad=users[_0x439c3d(0x134)];else{if(_0x251859[0x0][_0x439c3d(0x12b)]==_0x439c3d(0x113))var _0x3fd6ad=users['Portuguese'];else{if(_0x251859[0x0]['language']=='Chinese')var _0x3fd6ad=users[_0x439c3d(0x157)];else{if(_0x251859[0x0][_0x439c3d(0x12b)]==_0x439c3d(0x108))var _0x3fd6ad=users[_0x439c3d(0x106)];}}}}}}}_0x552383['render'](_0x439c3d(0x141),{'success':_0x55a71e[_0x439c3d(0x11f)](_0x439c3d(0x13d)),'errors':_0x55a71e[_0x439c3d(0x11f)]('errors'),'master_shop':_0x251859,'profile':_0x54f920,'role':_0x540991,'language':_0x3fd6ad,'customer':_0x549ec2,'sales_sa':_0x221a7a,'staff_arr':_0x17d519});}catch(_0x36c338){console[_0x439c3d(0x115)](_0x36c338);}}),router[a0_0x18eea9(0x142)](a0_0x18eea9(0x11e),auth,async(_0x148d0e,_0x907690)=>{var _0x5e11ac=a0_0x18eea9;try{const _0x6553b8=_0x148d0e[_0x5e11ac(0x150)]['id'],_0x31a03b=await sales_sa[_0x5e11ac(0x149)](_0x6553b8),{collection:_0x5ee87f,invoicemoney:_0x3594de,collectionnumber:_0x19d50f,typeofpayment:_0x492634,cashdate:_0x5155af,id_detl:_0x3c3627}=_0x148d0e[_0x5e11ac(0x136)];if(typeof _0x3c3627=='string')var _0x563eb3=[_0x148d0e[_0x5e11ac(0x136)][_0x5e11ac(0x123)]],_0x5b833e=[_0x148d0e[_0x5e11ac(0x136)][_0x5e11ac(0x120)]],_0x4d65df=[_0x148d0e[_0x5e11ac(0x136)]['spwp']],_0x3d34ad=[_0x148d0e['body'][_0x5e11ac(0x146)]],_0x222ce8=[_0x148d0e[_0x5e11ac(0x136)]['vol_deals']],_0x40df5b=[_0x148d0e[_0x5e11ac(0x136)][_0x5e11ac(0x117)]],_0x4b711f=[_0x148d0e[_0x5e11ac(0x136)]['totalNewPrice']];else var _0x563eb3=[..._0x148d0e[_0x5e11ac(0x136)]['id_detl']],_0x5b833e=[..._0x148d0e[_0x5e11ac(0x136)][_0x5e11ac(0x120)]],_0x4d65df=[..._0x148d0e['body']['spwp']],_0x3d34ad=[..._0x148d0e[_0x5e11ac(0x136)][_0x5e11ac(0x146)]],_0x222ce8=[..._0x148d0e[_0x5e11ac(0x136)][_0x5e11ac(0x127)]],_0x40df5b=[..._0x148d0e[_0x5e11ac(0x136)][_0x5e11ac(0x117)]],_0x4b711f=[..._0x148d0e[_0x5e11ac(0x136)]['totalNewPrice']];const _0x2bba2b=_0x563eb3[_0x5e11ac(0x145)](_0x389a25=>{return _0x389a25={'id_detl':_0x389a25};});_0x5b833e['forEach']((_0x2a9fb0,_0xc5ff4c)=>{_0x2bba2b[_0xc5ff4c]['ewt']=_0x2a9fb0;}),_0x4d65df[_0x5e11ac(0x13e)]((_0x4671e3,_0x275459)=>{var _0x300287=_0x5e11ac;_0x2bba2b[_0x275459][_0x300287(0x124)]=_0x4671e3;}),_0x3d34ad[_0x5e11ac(0x13e)]((_0x42d4e0,_0x5bb5a1)=>{var _0x38007d=_0x5e11ac;_0x2bba2b[_0x5bb5a1][_0x38007d(0x146)]=_0x42d4e0;}),_0x222ce8['forEach']((_0x3e9264,_0x5bacb0)=>{_0x2bba2b[_0x5bacb0]['vol_deals']=_0x3e9264;}),_0x40df5b[_0x5e11ac(0x13e)]((_0x5da743,_0x275575)=>{var _0x5c4744=_0x5e11ac;_0x2bba2b[_0x275575][_0x5c4744(0x117)]=_0x5da743;}),_0x4b711f['forEach']((_0x3d449a,_0x4ac5f7)=>{_0x2bba2b[_0x4ac5f7]['totalcollection']=_0x3d449a;}),_0x31a03b[_0x5e11ac(0x135)]=_0x5ee87f,_0x31a03b[_0x5e11ac(0x13f)]=_0x19d50f,_0x31a03b['type_of_payment']=_0x492634,_0x31a03b['cash_date']=_0x5155af,_0x31a03b['paid']=_0x5e11ac(0x14f),_0x31a03b[_0x5e11ac(0x13c)]='1';const _0x1c8185=await _0x31a03b[_0x5e11ac(0x155)]();if(_0x1c8185[_0x5e11ac(0x10e)]==_0x5e11ac(0x14f))for(let _0x42b061=0x0;_0x42b061<=_0x2bba2b[_0x5e11ac(0x144)]-0x1;_0x42b061++){const _0x5f4e69=_0x2bba2b[_0x42b061],_0x4a8cd3=mongoose['Types'][_0x5e11ac(0x152)];console[_0x5e11ac(0x115)](_0x5f4e69);const _0x39d340=await sales_sa['updateOne']({'_id':_0x4a8cd3(_0x6553b8[_0x5e11ac(0x148)]()),'sale_product._id':_0x4a8cd3(_0x5f4e69['id_detl'][_0x5e11ac(0x148)]())},{'$set':{'sale_product.$.ewt':_0x5f4e69['ewt'],'sale_product.$.spwp':_0x5f4e69[_0x5e11ac(0x124)],'sale_product.$.fin_disc':_0x5f4e69[_0x5e11ac(0x146)],'sale_product.$.vol_deals':_0x5f4e69[_0x5e11ac(0x127)],'sale_product.$.bo_disc':_0x5f4e69['bo_disc'],'sale_product.$.totalprice':parseFloat(_0x5f4e69['totalcollection'])}});}_0x148d0e[_0x5e11ac(0x11f)](_0x5e11ac(0x13d),_0x5e11ac(0x131)),_0x907690[_0x5e11ac(0x133)]('/collection/view/'+_0x6553b8);}catch(_0x21316c){console[_0x5e11ac(0x115)](_0x21316c);}}),router[a0_0x18eea9(0x121)](a0_0x18eea9(0x129),auth,async(_0x5a9d62,_0x597ec7)=>{var _0xda8570=a0_0x18eea9;try{const _0x4f7f37=await master_shop[_0xda8570(0x128)](),_0x58aa46=_0x5a9d62[_0xda8570(0x112)],_0x25e4f6=await profile[_0xda8570(0x122)]({'email':_0x58aa46[_0xda8570(0x159)]}),_0x435d7b=await staff[_0xda8570(0x122)]({'email':_0x58aa46[_0xda8570(0x159)],'type_of_acc_cat':'1'});let _0x35ef6e=[];_0x435d7b!=null&&(_0x35ef6e=await sales_order[_0xda8570(0x128)]({'sales_staff_id':_0x435d7b[_0xda8570(0x137)]}));if(_0x4f7f37[0x0][_0xda8570(0x12b)]=='English\x20(US)')var _0x3e769a=users['English'];else{if(_0x4f7f37[0x0][_0xda8570(0x12b)]=='Hindi')var _0x3e769a=users['Hindi'];else{if(_0x4f7f37[0x0][_0xda8570(0x12b)]==_0xda8570(0x12a))var _0x3e769a=users[_0xda8570(0x12a)];else{if(_0x4f7f37[0x0][_0xda8570(0x12b)]=='Spanish')var _0x3e769a=users[_0xda8570(0x15a)];else{if(_0x4f7f37[0x0]['language']==_0xda8570(0x134))var _0x3e769a=users[_0xda8570(0x134)];else{if(_0x4f7f37[0x0]['language']==_0xda8570(0x113))var _0x3e769a=users['Portuguese'];else{if(_0x4f7f37[0x0]['language']==_0xda8570(0x157))var _0x3e769a=users[_0xda8570(0x157)];else{if(_0x4f7f37[0x0][_0xda8570(0x12b)]=='Arabic\x20(ae)')var _0x3e769a=users[_0xda8570(0x106)];}}}}}}}_0x597ec7[_0xda8570(0x14c)](_0xda8570(0x10d),{'success':_0x5a9d62[_0xda8570(0x11f)](_0xda8570(0x13d)),'errors':_0x5a9d62[_0xda8570(0x11f)](_0xda8570(0x10a)),'master_shop':_0x4f7f37,'profile':_0x25e4f6,'role':_0x58aa46,'language':_0x3e769a,'sales_mine':_0x35ef6e,'staff_arr':_0x435d7b});}catch(_0x537188){console[_0xda8570(0x115)](_0x537188);}}),router[a0_0x18eea9(0x121)](a0_0x18eea9(0x111),auth,async(_0x2a789e,_0x4053db)=>{var _0x27e106=a0_0x18eea9;try{const _0xe7c701=await master_shop[_0x27e106(0x128)](),_0x19b38a=_0x2a789e[_0x27e106(0x112)],_0x34b4a9=await profile[_0x27e106(0x122)]({'email':_0x19b38a['email']}),_0x2e317f=await staff[_0x27e106(0x122)]({'email':_0x19b38a[_0x27e106(0x159)]}),_0x497757=await customer[_0x27e106(0x128)]({'agent_id':_0x2e317f[_0x27e106(0x137)]}),_0xcdff14=_0x2a789e[_0x27e106(0x150)]['id'],_0xe9f375=await sales_order[_0x27e106(0x149)](_0xcdff14);if(_0xe7c701[0x0][_0x27e106(0x12b)]==_0x27e106(0x11c))var _0x2c1781=users[_0x27e106(0x140)];else{if(_0xe7c701[0x0][_0x27e106(0x12b)]=='Hindi')var _0x2c1781=users[_0x27e106(0x109)];else{if(_0xe7c701[0x0]['language']==_0x27e106(0x12a))var _0x2c1781=users[_0x27e106(0x12a)];else{if(_0xe7c701[0x0][_0x27e106(0x12b)]=='Spanish')var _0x2c1781=users[_0x27e106(0x15a)];else{if(_0xe7c701[0x0][_0x27e106(0x12b)]==_0x27e106(0x134))var _0x2c1781=users[_0x27e106(0x134)];else{if(_0xe7c701[0x0][_0x27e106(0x12b)]==_0x27e106(0x113))var _0x2c1781=users[_0x27e106(0x126)];else{if(_0xe7c701[0x0][_0x27e106(0x12b)]==_0x27e106(0x157))var _0x2c1781=users[_0x27e106(0x157)];else{if(_0xe7c701[0x0][_0x27e106(0x12b)]==_0x27e106(0x108))var _0x2c1781=users[_0x27e106(0x106)];}}}}}}}_0x4053db[_0x27e106(0x14c)](_0x27e106(0x116),{'success':_0x2a789e[_0x27e106(0x11f)]('success'),'errors':_0x2a789e[_0x27e106(0x11f)](_0x27e106(0x10a)),'master_shop':_0xe7c701,'profile':_0x34b4a9,'role':_0x19b38a,'language':_0x2c1781,'customer':_0x497757,'sales_sa':_0xe9f375,'staff_arr':_0x2e317f});}catch(_0x1b8115){console[_0x27e106(0x115)](_0x1b8115);}}),router['post'](a0_0x18eea9(0x111),auth,async(_0x33b2d9,_0x31e623)=>{var _0x10813a=a0_0x18eea9;try{const _0x3f635a=_0x33b2d9[_0x10813a(0x150)]['id'],_0x4897d0=await sales_order[_0x10813a(0x149)](_0x3f635a),{collection:_0x1b69af,invoicemoney:_0x51e83e,collectionnumber:_0x49e333,typeofpayment:_0x1a1fcb,cashdate:_0x2a82e6,id_detl:_0x34865a}=_0x33b2d9[_0x10813a(0x136)];_0x4897d0[_0x10813a(0x135)]=_0x1b69af,_0x4897d0['type_of_payment']=_0x1a1fcb,_0x4897d0[_0x10813a(0x12c)]=_0x2a82e6,_0x4897d0[_0x10813a(0x10e)]=_0x10813a(0x14f),_0x4897d0['typeofprocess']='1';const _0x4b61c4=await _0x4897d0[_0x10813a(0x155)]();_0x33b2d9['flash'](_0x10813a(0x13d),_0x10813a(0x131)),_0x31e623[_0x10813a(0x133)](_0x10813a(0x12e)+_0x3f635a);}catch(_0x40c643){console[_0x10813a(0x115)](_0x40c643);}}),module[a0_0x18eea9(0x154)]=router;