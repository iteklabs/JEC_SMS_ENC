var a0_0x5bde56=a0_0x468b;(function(_0x59f200,_0x3adfde){var _0x4568ef=a0_0x468b,_0x490428=_0x59f200();while(!![]){try{var _0x3060b2=parseInt(_0x4568ef(0x74))/0x1+parseInt(_0x4568ef(0xa0))/0x2+-parseInt(_0x4568ef(0x90))/0x3*(-parseInt(_0x4568ef(0xac))/0x4)+-parseInt(_0x4568ef(0x85))/0x5*(-parseInt(_0x4568ef(0x73))/0x6)+parseInt(_0x4568ef(0xbf))/0x7+parseInt(_0x4568ef(0xb1))/0x8+-parseInt(_0x4568ef(0x71))/0x9*(parseInt(_0x4568ef(0x9e))/0xa);if(_0x3060b2===_0x3adfde)break;else _0x490428['push'](_0x490428['shift']());}catch(_0x123d5c){_0x490428['push'](_0x490428['shift']());}}}(a0_0x10d5,0xac2ee));const express=require(a0_0x5bde56(0xa6)),app=express(),router=express[a0_0x5bde56(0x77)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require('../models/all_models'),auth=require(a0_0x5bde56(0x8d)),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require('xlsx'),multer=require(a0_0x5bde56(0x94)),mongoose=require(a0_0x5bde56(0x8b));function a0_0x468b(_0x2270bd,_0x15ad67){var _0x10d5a3=a0_0x10d5();return a0_0x468b=function(_0x468bf5,_0x242b8f){_0x468bf5=_0x468bf5-0x70;var _0x191fa3=_0x10d5a3[_0x468bf5];return _0x191fa3;},a0_0x468b(_0x2270bd,_0x15ad67);}function a0_0x10d5(){var _0x3864b3=['valueOf','mongoose','spwp','../middleware/auth','string','post','312fWCULW','save','Portuguese','_id','multer','/view_xt/:id','view_collections','True','typeofprocess','collection_price','Portuguese\x20(BR)','id_detl','language','collection','20QxurYt','German','664948nbgQVU','Spanish','find','Chinese','ObjectId','/so_x','express','flash','get','Arabic\x20(ae)','/x_so','collectionnumber','41264QAGcax','Arabic','render','Types','forEach','2583576yJtWAS','Hindi','body','ewt','/view_so_xt/:id','/view','length','view_collections_so_xt','collection_so_xt','collection_sox','vol_deals','French','params','/view_x','5844510nJgnmJ','success','fin_disc','log','user','exports','totalcollection','16383555sFDZEw','email','6pTfZsE','737424LpnPhr','English','type_of_payment','Router','findById','Collection\x20Update\x20successfully','view_collections_sox','redirect','/collection/view_so_xt/','English\x20(US)','cash_date','map','/view/:id','errors','bo_disc','paid','updateOne','5227065IWsneC','collection_xt','findOne','totalNewPrice','view_collections_xt'];a0_0x10d5=function(){return _0x3864b3;};return a0_0x10d5();}router[a0_0x5bde56(0xa8)](a0_0x5bde56(0xb6),auth,async(_0x3aa429,_0x5d842f)=>{var _0x149c2a=a0_0x5bde56;try{const _0x6144a1=await master_shop['find'](),_0x391b20=_0x3aa429[_0x149c2a(0xc3)],_0x15e508=await profile[_0x149c2a(0x87)]({'email':_0x391b20[_0x149c2a(0x72)]}),_0xee2d8c=await staff[_0x149c2a(0x87)]({'email':_0x391b20[_0x149c2a(0x72)],'type_of_acc_cat':'2'});let _0x195001=[];_0xee2d8c!=null&&(_0x195001=await sales_order[_0x149c2a(0xa2)]({'sales_staff_id':_0xee2d8c[_0x149c2a(0x93)]}));if(_0x6144a1[0x0][_0x149c2a(0x9c)]==_0x149c2a(0x7d))var _0x1d7fdb=users['English'];else{if(_0x6144a1[0x0]['language']=='Hindi')var _0x1d7fdb=users[_0x149c2a(0xb2)];else{if(_0x6144a1[0x0][_0x149c2a(0x9c)]==_0x149c2a(0x9f))var _0x1d7fdb=users[_0x149c2a(0x9f)];else{if(_0x6144a1[0x0][_0x149c2a(0x9c)]==_0x149c2a(0xa1))var _0x1d7fdb=users[_0x149c2a(0xa1)];else{if(_0x6144a1[0x0]['language']==_0x149c2a(0xbc))var _0x1d7fdb=users[_0x149c2a(0xbc)];else{if(_0x6144a1[0x0]['language']==_0x149c2a(0x9a))var _0x1d7fdb=users['Portuguese'];else{if(_0x6144a1[0x0]['language']=='Chinese')var _0x1d7fdb=users[_0x149c2a(0xa3)];else{if(_0x6144a1[0x0]['language']==_0x149c2a(0xa9))var _0x1d7fdb=users[_0x149c2a(0xad)];}}}}}}}_0x5d842f['render'](_0x149c2a(0x9d),{'success':_0x3aa429[_0x149c2a(0xa7)](_0x149c2a(0xc0)),'errors':_0x3aa429[_0x149c2a(0xa7)](_0x149c2a(0x81)),'master_shop':_0x6144a1,'profile':_0x15e508,'role':_0x391b20,'language':_0x1d7fdb,'sales_mine':_0x195001,'staff_arr':_0xee2d8c});}catch(_0x5810f4){console[_0x149c2a(0xc2)](_0x5810f4);}}),router[a0_0x5bde56(0xa8)](a0_0x5bde56(0x80),auth,async(_0x53a342,_0x1ec0b3)=>{var _0xaa2039=a0_0x5bde56;try{const _0x48dfe2=await master_shop[_0xaa2039(0xa2)](),_0x403008=_0x53a342[_0xaa2039(0xc3)],_0x115ed7=await profile['findOne']({'email':_0x403008[_0xaa2039(0x72)]}),_0xe4bf23=await staff['findOne']({'email':_0x403008[_0xaa2039(0x72)]}),_0x50a048=await customer[_0xaa2039(0xa2)]({'agent_id':_0xe4bf23[_0xaa2039(0x93)]}),_0x46fba5=_0x53a342[_0xaa2039(0xbd)]['id'],_0x423886=await sales_sa['findById'](_0x46fba5);if(_0x48dfe2[0x0][_0xaa2039(0x9c)]==_0xaa2039(0x7d))var _0x1c03a4=users[_0xaa2039(0x75)];else{if(_0x48dfe2[0x0][_0xaa2039(0x9c)]==_0xaa2039(0xb2))var _0x1c03a4=users['Hindi'];else{if(_0x48dfe2[0x0][_0xaa2039(0x9c)]==_0xaa2039(0x9f))var _0x1c03a4=users['German'];else{if(_0x48dfe2[0x0][_0xaa2039(0x9c)]==_0xaa2039(0xa1))var _0x1c03a4=users[_0xaa2039(0xa1)];else{if(_0x48dfe2[0x0][_0xaa2039(0x9c)]==_0xaa2039(0xbc))var _0x1c03a4=users['French'];else{if(_0x48dfe2[0x0][_0xaa2039(0x9c)]==_0xaa2039(0x9a))var _0x1c03a4=users[_0xaa2039(0x92)];else{if(_0x48dfe2[0x0][_0xaa2039(0x9c)]==_0xaa2039(0xa3))var _0x1c03a4=users['Chinese'];else{if(_0x48dfe2[0x0][_0xaa2039(0x9c)]=='Arabic\x20(ae)')var _0x1c03a4=users['Arabic'];}}}}}}}_0x1ec0b3[_0xaa2039(0xae)](_0xaa2039(0x96),{'success':_0x53a342[_0xaa2039(0xa7)](_0xaa2039(0xc0)),'errors':_0x53a342[_0xaa2039(0xa7)]('errors'),'master_shop':_0x48dfe2,'profile':_0x115ed7,'role':_0x403008,'language':_0x1c03a4,'customer':_0x50a048,'sales_sa':_0x423886,'staff_arr':_0xe4bf23});}catch(_0x2c563b){console[_0xaa2039(0xc2)](_0x2c563b);}}),router['post'](a0_0x5bde56(0x80),auth,async(_0xd2e950,_0x535927)=>{var _0x548a40=a0_0x5bde56;try{const _0x19b3ef=_0xd2e950[_0x548a40(0xbd)]['id'],_0x168ed4=await sales_sa['findById'](_0x19b3ef),{collection:_0x5875dd,invoicemoney:_0x888b7d,collectionnumber:_0x53f117,typeofpayment:_0x1437ef,cashdate:_0x3b6d30,id_detl:_0x284843}=_0xd2e950[_0x548a40(0xb3)];_0x535927['json'](_0x168ed4);return;if(typeof _0x284843==_0x548a40(0x8e))var _0x5a742d=[_0xd2e950[_0x548a40(0xb3)][_0x548a40(0x9b)]],_0xa57147=[_0xd2e950[_0x548a40(0xb3)]['ewt']],_0x29adee=[_0xd2e950['body']['spwp']],_0x1831ab=[_0xd2e950[_0x548a40(0xb3)][_0x548a40(0xc1)]],_0x3132c9=[_0xd2e950[_0x548a40(0xb3)][_0x548a40(0xbb)]],_0x3aa3bd=[_0xd2e950[_0x548a40(0xb3)]['bo_disc']],_0x4f658b=[_0xd2e950[_0x548a40(0xb3)][_0x548a40(0x88)]];else var _0x5a742d=[..._0xd2e950[_0x548a40(0xb3)][_0x548a40(0x9b)]],_0xa57147=[..._0xd2e950[_0x548a40(0xb3)]['ewt']],_0x29adee=[..._0xd2e950[_0x548a40(0xb3)][_0x548a40(0x8c)]],_0x1831ab=[..._0xd2e950[_0x548a40(0xb3)][_0x548a40(0xc1)]],_0x3132c9=[..._0xd2e950[_0x548a40(0xb3)][_0x548a40(0xbb)]],_0x3aa3bd=[..._0xd2e950['body']['bo_disc']],_0x4f658b=[..._0xd2e950['body'][_0x548a40(0x88)]];const _0x190c99=_0x5a742d[_0x548a40(0x7f)](_0x5a5aa3=>{return _0x5a5aa3={'id_detl':_0x5a5aa3};});_0xa57147['forEach']((_0x284db8,_0x17b0a9)=>{var _0x28ce0c=_0x548a40;_0x190c99[_0x17b0a9][_0x28ce0c(0xb4)]=_0x284db8;}),_0x29adee[_0x548a40(0xb0)]((_0x4e57ec,_0x352950)=>{var _0x24b772=_0x548a40;_0x190c99[_0x352950][_0x24b772(0x8c)]=_0x4e57ec;}),_0x1831ab[_0x548a40(0xb0)]((_0x4d06a7,_0x3218b0)=>{var _0x23fc3d=_0x548a40;_0x190c99[_0x3218b0][_0x23fc3d(0xc1)]=_0x4d06a7;}),_0x3132c9['forEach']((_0x150e72,_0x1cbce0)=>{var _0x1c437c=_0x548a40;_0x190c99[_0x1cbce0][_0x1c437c(0xbb)]=_0x150e72;}),_0x3aa3bd[_0x548a40(0xb0)]((_0x21094d,_0x300530)=>{_0x190c99[_0x300530]['bo_disc']=_0x21094d;}),_0x4f658b[_0x548a40(0xb0)]((_0x272e26,_0x67c72e)=>{var _0x3e13f8=_0x548a40;_0x190c99[_0x67c72e][_0x3e13f8(0x70)]=_0x272e26;}),_0x168ed4[_0x548a40(0x99)]=_0x5875dd,_0x168ed4[_0x548a40(0xab)]=_0x53f117,_0x168ed4[_0x548a40(0x76)]=_0x1437ef,_0x168ed4[_0x548a40(0x7e)]=_0x3b6d30,_0x168ed4[_0x548a40(0x83)]=_0x548a40(0x97);const _0x498502=await _0x168ed4[_0x548a40(0x91)]();if(_0x498502['paid']=='True')for(let _0x5e3b5e=0x0;_0x5e3b5e<=_0x190c99[_0x548a40(0xb7)]-0x1;_0x5e3b5e++){const _0x18eb18=_0x190c99[_0x5e3b5e],_0x45f305=mongoose['Types'][_0x548a40(0xa4)];console[_0x548a40(0xc2)](_0x18eb18);const _0x2053d7=await sales_sa[_0x548a40(0x84)]({'_id':_0x45f305(_0x19b3ef['valueOf']()),'sale_product._id':_0x45f305(_0x18eb18['id_detl'][_0x548a40(0x8a)]())},{'$set':{'sale_product.$.ewt':_0x18eb18['ewt'],'sale_product.$.spwp':_0x18eb18[_0x548a40(0x8c)],'sale_product.$.fin_disc':_0x18eb18['fin_disc'],'sale_product.$.vol_deals':_0x18eb18[_0x548a40(0xbb)],'sale_product.$.bo_disc':_0x18eb18['bo_disc'],'sale_product.$.totalprice':parseFloat(_0x18eb18[_0x548a40(0x70)])}});}_0xd2e950[_0x548a40(0xa7)](_0x548a40(0xc0),_0x548a40(0x79)),_0x535927[_0x548a40(0x7b)]('/collection/view/'+_0x19b3ef);}catch(_0xa23ea1){console[_0x548a40(0xc2)](_0xa23ea1);}}),router[a0_0x5bde56(0xa8)](a0_0x5bde56(0xaa),auth,async(_0x2160ff,_0x37eabc)=>{var _0x4a7876=a0_0x5bde56;try{const _0x19c70b=await master_shop[_0x4a7876(0xa2)](),_0x1ef966=_0x2160ff[_0x4a7876(0xc3)],_0x51572a=await profile[_0x4a7876(0x87)]({'email':_0x1ef966[_0x4a7876(0x72)]}),_0x462f3b=await staff[_0x4a7876(0x87)]({'email':_0x1ef966[_0x4a7876(0x72)],'type_of_acc_cat':'2'});let _0x35af4e=[];_0x462f3b!=null&&(_0x35af4e=await sales_order[_0x4a7876(0xa2)]({'sales_staff_id':_0x462f3b[_0x4a7876(0x93)]}));console['log'](_0x35af4e);if(_0x19c70b[0x0]['language']==_0x4a7876(0x7d))var _0x2d61f3=users[_0x4a7876(0x75)];else{if(_0x19c70b[0x0][_0x4a7876(0x9c)]==_0x4a7876(0xb2))var _0x2d61f3=users[_0x4a7876(0xb2)];else{if(_0x19c70b[0x0][_0x4a7876(0x9c)]==_0x4a7876(0x9f))var _0x2d61f3=users['German'];else{if(_0x19c70b[0x0][_0x4a7876(0x9c)]==_0x4a7876(0xa1))var _0x2d61f3=users['Spanish'];else{if(_0x19c70b[0x0][_0x4a7876(0x9c)]==_0x4a7876(0xbc))var _0x2d61f3=users[_0x4a7876(0xbc)];else{if(_0x19c70b[0x0][_0x4a7876(0x9c)]==_0x4a7876(0x9a))var _0x2d61f3=users[_0x4a7876(0x92)];else{if(_0x19c70b[0x0][_0x4a7876(0x9c)]==_0x4a7876(0xa3))var _0x2d61f3=users[_0x4a7876(0xa3)];else{if(_0x19c70b[0x0][_0x4a7876(0x9c)]==_0x4a7876(0xa9))var _0x2d61f3=users['Arabic'];}}}}}}}_0x37eabc['render'](_0x4a7876(0xba),{'success':_0x2160ff[_0x4a7876(0xa7)](_0x4a7876(0xc0)),'errors':_0x2160ff[_0x4a7876(0xa7)](_0x4a7876(0x81)),'master_shop':_0x19c70b,'profile':_0x51572a,'role':_0x1ef966,'language':_0x2d61f3,'sales_mine':_0x35af4e,'staff_arr':_0x462f3b});}catch(_0x586a1f){console[_0x4a7876(0xc2)](_0x586a1f);}}),router[a0_0x5bde56(0xa8)]('/view_sox/:id',auth,async(_0x2e6204,_0x110768)=>{var _0x493447=a0_0x5bde56;try{const _0x4108d8=await master_shop[_0x493447(0xa2)](),_0x434420=_0x2e6204['user'],_0x28948d=await profile[_0x493447(0x87)]({'email':_0x434420[_0x493447(0x72)]}),_0x4fd509=await staff[_0x493447(0x87)]({'email':_0x434420[_0x493447(0x72)]}),_0x31862b=await customer[_0x493447(0xa2)]({'agent_id':_0x4fd509[_0x493447(0x93)]}),_0xfb1146=_0x2e6204[_0x493447(0xbd)]['id'],_0x3d130b=await sales_order['findById'](_0xfb1146);if(_0x4108d8[0x0]['language']==_0x493447(0x7d))var _0x44ea79=users[_0x493447(0x75)];else{if(_0x4108d8[0x0][_0x493447(0x9c)]==_0x493447(0xb2))var _0x44ea79=users[_0x493447(0xb2)];else{if(_0x4108d8[0x0]['language']=='German')var _0x44ea79=users[_0x493447(0x9f)];else{if(_0x4108d8[0x0][_0x493447(0x9c)]==_0x493447(0xa1))var _0x44ea79=users['Spanish'];else{if(_0x4108d8[0x0]['language']=='French')var _0x44ea79=users[_0x493447(0xbc)];else{if(_0x4108d8[0x0][_0x493447(0x9c)]==_0x493447(0x9a))var _0x44ea79=users['Portuguese'];else{if(_0x4108d8[0x0][_0x493447(0x9c)]=='Chinese')var _0x44ea79=users[_0x493447(0xa3)];else{if(_0x4108d8[0x0]['language']==_0x493447(0xa9))var _0x44ea79=users[_0x493447(0xad)];}}}}}}}_0x110768['render'](_0x493447(0x7a),{'success':_0x2e6204[_0x493447(0xa7)]('success'),'errors':_0x2e6204['flash'](_0x493447(0x81)),'master_shop':_0x4108d8,'profile':_0x28948d,'role':_0x434420,'language':_0x44ea79,'customer':_0x31862b,'sales_sa':_0x3d130b});}catch(_0x741929){console[_0x493447(0xc2)](_0x741929);}}),router[a0_0x5bde56(0xa8)](a0_0x5bde56(0xbe),auth,async(_0x3c1220,_0x5c514d)=>{var _0x586328=a0_0x5bde56;try{const _0x355af7=await master_shop['find'](),_0x9092bb=_0x3c1220[_0x586328(0xc3)],_0x25d916=await profile[_0x586328(0x87)]({'email':_0x9092bb[_0x586328(0x72)]}),_0x3f8fca=await staff[_0x586328(0x87)]({'email':_0x9092bb[_0x586328(0x72)],'type_of_acc_cat':'1'});let _0x3f5427=[];_0x3f8fca!=null&&(_0x3f5427=await sales_sa[_0x586328(0xa2)]({'sales_staff_id':_0x3f8fca[_0x586328(0x93)]}));if(_0x355af7[0x0][_0x586328(0x9c)]==_0x586328(0x7d))var _0x2d3f0a=users[_0x586328(0x75)];else{if(_0x355af7[0x0][_0x586328(0x9c)]==_0x586328(0xb2))var _0x2d3f0a=users[_0x586328(0xb2)];else{if(_0x355af7[0x0]['language']=='German')var _0x2d3f0a=users[_0x586328(0x9f)];else{if(_0x355af7[0x0]['language']==_0x586328(0xa1))var _0x2d3f0a=users[_0x586328(0xa1)];else{if(_0x355af7[0x0][_0x586328(0x9c)]==_0x586328(0xbc))var _0x2d3f0a=users[_0x586328(0xbc)];else{if(_0x355af7[0x0]['language']==_0x586328(0x9a))var _0x2d3f0a=users[_0x586328(0x92)];else{if(_0x355af7[0x0]['language']==_0x586328(0xa3))var _0x2d3f0a=users[_0x586328(0xa3)];else{if(_0x355af7[0x0]['language']==_0x586328(0xa9))var _0x2d3f0a=users[_0x586328(0xad)];}}}}}}}_0x5c514d[_0x586328(0xae)](_0x586328(0x86),{'success':_0x3c1220[_0x586328(0xa7)]('success'),'errors':_0x3c1220[_0x586328(0xa7)]('errors'),'master_shop':_0x355af7,'profile':_0x25d916,'role':_0x9092bb,'language':_0x2d3f0a,'sales_mine':_0x3f5427,'staff_arr':_0x3f8fca});}catch(_0x477ca2){console[_0x586328(0xc2)](_0x477ca2);}}),router[a0_0x5bde56(0xa8)](a0_0x5bde56(0x95),auth,async(_0x445b8b,_0x3006d3)=>{var _0x5bdb70=a0_0x5bde56;try{const _0x3992f7=await master_shop['find'](),_0x4e5872=_0x445b8b[_0x5bdb70(0xc3)],_0xee8a92=await profile['findOne']({'email':_0x4e5872[_0x5bdb70(0x72)]}),_0x3143c2=await staff[_0x5bdb70(0x87)]({'email':_0x4e5872[_0x5bdb70(0x72)]}),_0x19fd7a=await customer[_0x5bdb70(0xa2)]({'agent_id':_0x3143c2[_0x5bdb70(0x93)]}),_0x211205=_0x445b8b[_0x5bdb70(0xbd)]['id'],_0x396de7=await sales_sa[_0x5bdb70(0x78)](_0x211205);if(_0x3992f7[0x0][_0x5bdb70(0x9c)]==_0x5bdb70(0x7d))var _0xd8c0a4=users['English'];else{if(_0x3992f7[0x0][_0x5bdb70(0x9c)]==_0x5bdb70(0xb2))var _0xd8c0a4=users['Hindi'];else{if(_0x3992f7[0x0][_0x5bdb70(0x9c)]=='German')var _0xd8c0a4=users['German'];else{if(_0x3992f7[0x0][_0x5bdb70(0x9c)]==_0x5bdb70(0xa1))var _0xd8c0a4=users[_0x5bdb70(0xa1)];else{if(_0x3992f7[0x0][_0x5bdb70(0x9c)]==_0x5bdb70(0xbc))var _0xd8c0a4=users['French'];else{if(_0x3992f7[0x0]['language']==_0x5bdb70(0x9a))var _0xd8c0a4=users[_0x5bdb70(0x92)];else{if(_0x3992f7[0x0][_0x5bdb70(0x9c)]=='Chinese')var _0xd8c0a4=users[_0x5bdb70(0xa3)];else{if(_0x3992f7[0x0][_0x5bdb70(0x9c)]==_0x5bdb70(0xa9))var _0xd8c0a4=users['Arabic'];}}}}}}}_0x3006d3[_0x5bdb70(0xae)](_0x5bdb70(0x89),{'success':_0x445b8b['flash'](_0x5bdb70(0xc0)),'errors':_0x445b8b['flash'](_0x5bdb70(0x81)),'master_shop':_0x3992f7,'profile':_0xee8a92,'role':_0x4e5872,'language':_0xd8c0a4,'customer':_0x19fd7a,'sales_sa':_0x396de7,'staff_arr':_0x3143c2});}catch(_0x14d1f7){console[_0x5bdb70(0xc2)](_0x14d1f7);}}),router[a0_0x5bde56(0x8f)](a0_0x5bde56(0x95),auth,async(_0x53b942,_0x4b07d9)=>{var _0x1d8a9b=a0_0x5bde56;try{const _0x566834=_0x53b942[_0x1d8a9b(0xbd)]['id'],_0x413c8a=await sales_sa[_0x1d8a9b(0x78)](_0x566834),{collection:_0x4ca40b,invoicemoney:_0xf5048d,collectionnumber:_0x1fffad,typeofpayment:_0x94a266,cashdate:_0x5802ed,id_detl:_0x475317}=_0x53b942[_0x1d8a9b(0xb3)];if(typeof _0x475317=='string')var _0x58873a=[_0x53b942['body'][_0x1d8a9b(0x9b)]],_0x559081=[_0x53b942[_0x1d8a9b(0xb3)][_0x1d8a9b(0xb4)]],_0x589981=[_0x53b942[_0x1d8a9b(0xb3)]['spwp']],_0x5d34d3=[_0x53b942[_0x1d8a9b(0xb3)][_0x1d8a9b(0xc1)]],_0x21490b=[_0x53b942['body'][_0x1d8a9b(0xbb)]],_0x43ec0f=[_0x53b942['body'][_0x1d8a9b(0x82)]],_0x34dfd2=[_0x53b942[_0x1d8a9b(0xb3)][_0x1d8a9b(0x88)]];else var _0x58873a=[..._0x53b942[_0x1d8a9b(0xb3)][_0x1d8a9b(0x9b)]],_0x559081=[..._0x53b942['body'][_0x1d8a9b(0xb4)]],_0x589981=[..._0x53b942['body'][_0x1d8a9b(0x8c)]],_0x5d34d3=[..._0x53b942[_0x1d8a9b(0xb3)][_0x1d8a9b(0xc1)]],_0x21490b=[..._0x53b942[_0x1d8a9b(0xb3)][_0x1d8a9b(0xbb)]],_0x43ec0f=[..._0x53b942[_0x1d8a9b(0xb3)]['bo_disc']],_0x34dfd2=[..._0x53b942['body'][_0x1d8a9b(0x88)]];const _0xea9069=_0x58873a[_0x1d8a9b(0x7f)](_0x62b2b1=>{return _0x62b2b1={'id_detl':_0x62b2b1};});_0x559081['forEach']((_0x5b3e89,_0x28724a)=>{var _0x575ab2=_0x1d8a9b;_0xea9069[_0x28724a][_0x575ab2(0xb4)]=_0x5b3e89;}),_0x589981[_0x1d8a9b(0xb0)]((_0x4223b1,_0x15ae26)=>{_0xea9069[_0x15ae26]['spwp']=_0x4223b1;}),_0x5d34d3['forEach']((_0x10f780,_0x2bd714)=>{var _0x26e914=_0x1d8a9b;_0xea9069[_0x2bd714][_0x26e914(0xc1)]=_0x10f780;}),_0x21490b['forEach']((_0x4ca817,_0x2386cc)=>{_0xea9069[_0x2386cc]['vol_deals']=_0x4ca817;}),_0x43ec0f[_0x1d8a9b(0xb0)]((_0x203470,_0x3c7aa7)=>{var _0x5058dc=_0x1d8a9b;_0xea9069[_0x3c7aa7][_0x5058dc(0x82)]=_0x203470;}),_0x34dfd2['forEach']((_0xec0606,_0x914d75)=>{var _0x25d5d2=_0x1d8a9b;_0xea9069[_0x914d75][_0x25d5d2(0x70)]=_0xec0606;}),_0x413c8a[_0x1d8a9b(0x99)]=_0x4ca40b,_0x413c8a['collectionnumber']=_0x1fffad,_0x413c8a[_0x1d8a9b(0x76)]=_0x94a266,_0x413c8a[_0x1d8a9b(0x7e)]=_0x5802ed,_0x413c8a[_0x1d8a9b(0x83)]=_0x1d8a9b(0x97),_0x413c8a[_0x1d8a9b(0x98)]='1';const _0x4d6c01=await _0x413c8a[_0x1d8a9b(0x91)]();if(_0x4d6c01[_0x1d8a9b(0x83)]==_0x1d8a9b(0x97))for(let _0x223ee2=0x0;_0x223ee2<=_0xea9069[_0x1d8a9b(0xb7)]-0x1;_0x223ee2++){const _0x407874=_0xea9069[_0x223ee2],_0xc8cede=mongoose[_0x1d8a9b(0xaf)][_0x1d8a9b(0xa4)];console[_0x1d8a9b(0xc2)](_0x407874);const _0x50e620=await sales_sa[_0x1d8a9b(0x84)]({'_id':_0xc8cede(_0x566834['valueOf']()),'sale_product._id':_0xc8cede(_0x407874['id_detl'][_0x1d8a9b(0x8a)]())},{'$set':{'sale_product.$.ewt':_0x407874[_0x1d8a9b(0xb4)],'sale_product.$.spwp':_0x407874['spwp'],'sale_product.$.fin_disc':_0x407874[_0x1d8a9b(0xc1)],'sale_product.$.vol_deals':_0x407874['vol_deals'],'sale_product.$.bo_disc':_0x407874[_0x1d8a9b(0x82)],'sale_product.$.totalprice':parseFloat(_0x407874[_0x1d8a9b(0x70)])}});}_0x53b942[_0x1d8a9b(0xa7)](_0x1d8a9b(0xc0),_0x1d8a9b(0x79)),_0x4b07d9[_0x1d8a9b(0x7b)]('/collection/view/'+_0x566834);}catch(_0x44e7f1){console[_0x1d8a9b(0xc2)](_0x44e7f1);}}),router[a0_0x5bde56(0xa8)](a0_0x5bde56(0xa5),auth,async(_0x26b8cb,_0x55bb11)=>{var _0x4f5f59=a0_0x5bde56;try{const _0x33794c=await master_shop[_0x4f5f59(0xa2)](),_0x2f9923=_0x26b8cb[_0x4f5f59(0xc3)],_0x26525d=await profile[_0x4f5f59(0x87)]({'email':_0x2f9923[_0x4f5f59(0x72)]}),_0x5a857b=await staff[_0x4f5f59(0x87)]({'email':_0x2f9923['email'],'type_of_acc_cat':'1'});let _0xcd58e7=[];_0x5a857b!=null&&(_0xcd58e7=await sales_order[_0x4f5f59(0xa2)]({'sales_staff_id':_0x5a857b['_id']}));if(_0x33794c[0x0]['language']=='English\x20(US)')var _0xd3cea=users[_0x4f5f59(0x75)];else{if(_0x33794c[0x0]['language']==_0x4f5f59(0xb2))var _0xd3cea=users[_0x4f5f59(0xb2)];else{if(_0x33794c[0x0][_0x4f5f59(0x9c)]==_0x4f5f59(0x9f))var _0xd3cea=users[_0x4f5f59(0x9f)];else{if(_0x33794c[0x0][_0x4f5f59(0x9c)]==_0x4f5f59(0xa1))var _0xd3cea=users[_0x4f5f59(0xa1)];else{if(_0x33794c[0x0]['language']=='French')var _0xd3cea=users[_0x4f5f59(0xbc)];else{if(_0x33794c[0x0][_0x4f5f59(0x9c)]=='Portuguese\x20(BR)')var _0xd3cea=users[_0x4f5f59(0x92)];else{if(_0x33794c[0x0][_0x4f5f59(0x9c)]==_0x4f5f59(0xa3))var _0xd3cea=users['Chinese'];else{if(_0x33794c[0x0][_0x4f5f59(0x9c)]=='Arabic\x20(ae)')var _0xd3cea=users[_0x4f5f59(0xad)];}}}}}}}_0x55bb11[_0x4f5f59(0xae)](_0x4f5f59(0xb9),{'success':_0x26b8cb[_0x4f5f59(0xa7)]('success'),'errors':_0x26b8cb[_0x4f5f59(0xa7)]('errors'),'master_shop':_0x33794c,'profile':_0x26525d,'role':_0x2f9923,'language':_0xd3cea,'sales_mine':_0xcd58e7,'staff_arr':_0x5a857b});}catch(_0x107d6b){console['log'](_0x107d6b);}}),router[a0_0x5bde56(0xa8)](a0_0x5bde56(0xb5),auth,async(_0x597986,_0x22f405)=>{var _0xd1107a=a0_0x5bde56;try{const _0x4c6653=await master_shop['find'](),_0x31f3c0=_0x597986[_0xd1107a(0xc3)],_0x1ecf3c=await profile[_0xd1107a(0x87)]({'email':_0x31f3c0[_0xd1107a(0x72)]}),_0x2b355a=await staff[_0xd1107a(0x87)]({'email':_0x31f3c0[_0xd1107a(0x72)]}),_0x1e4148=await customer[_0xd1107a(0xa2)]({'agent_id':_0x2b355a[_0xd1107a(0x93)]}),_0x1c00ca=_0x597986['params']['id'],_0x21d1a2=await sales_order['findById'](_0x1c00ca);if(_0x4c6653[0x0][_0xd1107a(0x9c)]==_0xd1107a(0x7d))var _0x5ae014=users['English'];else{if(_0x4c6653[0x0][_0xd1107a(0x9c)]==_0xd1107a(0xb2))var _0x5ae014=users[_0xd1107a(0xb2)];else{if(_0x4c6653[0x0][_0xd1107a(0x9c)]==_0xd1107a(0x9f))var _0x5ae014=users[_0xd1107a(0x9f)];else{if(_0x4c6653[0x0][_0xd1107a(0x9c)]==_0xd1107a(0xa1))var _0x5ae014=users[_0xd1107a(0xa1)];else{if(_0x4c6653[0x0][_0xd1107a(0x9c)]==_0xd1107a(0xbc))var _0x5ae014=users[_0xd1107a(0xbc)];else{if(_0x4c6653[0x0][_0xd1107a(0x9c)]=='Portuguese\x20(BR)')var _0x5ae014=users[_0xd1107a(0x92)];else{if(_0x4c6653[0x0][_0xd1107a(0x9c)]==_0xd1107a(0xa3))var _0x5ae014=users['Chinese'];else{if(_0x4c6653[0x0][_0xd1107a(0x9c)]==_0xd1107a(0xa9))var _0x5ae014=users[_0xd1107a(0xad)];}}}}}}}_0x22f405[_0xd1107a(0xae)](_0xd1107a(0xb8),{'success':_0x597986[_0xd1107a(0xa7)](_0xd1107a(0xc0)),'errors':_0x597986['flash'](_0xd1107a(0x81)),'master_shop':_0x4c6653,'profile':_0x1ecf3c,'role':_0x31f3c0,'language':_0x5ae014,'customer':_0x1e4148,'sales_sa':_0x21d1a2,'staff_arr':_0x2b355a});}catch(_0x5cf011){console[_0xd1107a(0xc2)](_0x5cf011);}}),router[a0_0x5bde56(0x8f)](a0_0x5bde56(0xb5),auth,async(_0x3c29af,_0x27e0d2)=>{var _0x5d7e7c=a0_0x5bde56;try{const _0xb4d1e9=_0x3c29af[_0x5d7e7c(0xbd)]['id'],_0x577c35=await sales_order[_0x5d7e7c(0x78)](_0xb4d1e9),{collection:_0x55b0ce,invoicemoney:_0x17f874,collectionnumber:_0x23e98e,typeofpayment:_0x42e9ed,cashdate:_0x1285b4,id_detl:_0x9402ba}=_0x3c29af[_0x5d7e7c(0xb3)];_0x577c35[_0x5d7e7c(0x99)]=_0x55b0ce,_0x577c35[_0x5d7e7c(0x76)]=_0x42e9ed,_0x577c35[_0x5d7e7c(0x7e)]=_0x1285b4,_0x577c35[_0x5d7e7c(0x83)]=_0x5d7e7c(0x97),_0x577c35[_0x5d7e7c(0x98)]='1';const _0x5f111e=await _0x577c35['save']();_0x3c29af[_0x5d7e7c(0xa7)](_0x5d7e7c(0xc0),'Collection\x20Update\x20successfully'),_0x27e0d2[_0x5d7e7c(0x7b)](_0x5d7e7c(0x7c)+_0xb4d1e9);}catch(_0x4cd1f2){console[_0x5d7e7c(0xc2)](_0x4cd1f2);}}),module[a0_0x5bde56(0xc4)]=router;