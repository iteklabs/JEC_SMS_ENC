function a0_0xd3bc(_0xfe66f6,_0x1795cc){var _0x3ef99b=a0_0x3ef9();return a0_0xd3bc=function(_0xd3bc2d,_0x20e40d){_0xd3bc2d=_0xd3bc2d-0x74;var _0x50a5a0=_0x3ef99b[_0xd3bc2d];return _0x50a5a0;},a0_0xd3bc(_0xfe66f6,_0x1795cc);}var a0_0x26856e=a0_0xd3bc;(function(_0x4d3ca5,_0x2778aa){var _0x10af14=a0_0xd3bc,_0x3baca4=_0x4d3ca5();while(!![]){try{var _0x5c1063=parseInt(_0x10af14(0x9e))/0x1+-parseInt(_0x10af14(0xc7))/0x2*(parseInt(_0x10af14(0xc1))/0x3)+parseInt(_0x10af14(0xb6))/0x4+parseInt(_0x10af14(0xa1))/0x5*(-parseInt(_0x10af14(0x74))/0x6)+-parseInt(_0x10af14(0xc0))/0x7+-parseInt(_0x10af14(0xaf))/0x8+parseInt(_0x10af14(0x8a))/0x9*(parseInt(_0x10af14(0x76))/0xa);if(_0x5c1063===_0x2778aa)break;else _0x3baca4['push'](_0x3baca4['shift']());}catch(_0x34a2f3){_0x3baca4['push'](_0x3baca4['shift']());}}}(a0_0x3ef9,0xbff9b));function a0_0x3ef9(){var _0x4fb859=['14690RSFecv','paid','collection','language','/collection/view/','/view_xt/:id','exceljs','10554NebWkO','save','50840KNJmBK','user','/view_sox/:id','multer','view_collections_sox','../middleware/auth','fin_disc','/view','mongoose','params','valueOf','collection_so_xt','forEach','Arabic\x20(ae)','/x_so','string','../public/language/languages.json','view_collections_so_xt','German','get','4230gBTLBp','totalNewPrice','map','vol_deals','render','collectionnumber','collection_xt','totalcollection','flash','log','/collection/view_so_xt/','Arabic','collection_sox','/view/:id','post','Collection\x20Update\x20successfully','updateOne','find','exports','type_of_payment','1521768lIYJzX','success','Portuguese\x20(BR)','75zYAROT','Chinese','../models/all_models','findById','ewt','typeofprocess','English\x20(US)','/so_x','view_collections_xt','_id','length','/view_so_xt/:id','ObjectId','Hindi','4749352zjRPue','French','English','Spanish','cash_date','/view_x','collection_price','2222708ESEYWD','True','Types','Router','id_detl','email','body','json','findOne','Portuguese','10523800gmozEf','636BprYbh','errors','bo_disc','redirect','spwp','xlsx'];a0_0x3ef9=function(){return _0x4fb859;};return a0_0x3ef9();}const express=require('express'),app=express(),router=express[a0_0x26856e(0xb9)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x26856e(0xa3)),auth=require(a0_0x26856e(0x7b)),users=require(a0_0x26856e(0x86)),excelJS=require(a0_0x26856e(0xcd)),xlsx=require(a0_0x26856e(0xc6)),multer=require(a0_0x26856e(0x79)),mongoose=require(a0_0x26856e(0x7e));router[a0_0x26856e(0x89)](a0_0x26856e(0x7d),auth,async(_0x32e949,_0x4fa887)=>{var _0x261720=a0_0x26856e;try{const _0x1f44b1=await master_shop['find'](),_0x43ed1d=_0x32e949['user'],_0x4d4a93=await profile['findOne']({'email':_0x43ed1d[_0x261720(0xbb)]}),_0x2737da=await staff[_0x261720(0xbe)]({'email':_0x43ed1d['email'],'type_of_acc_cat':'2'});let _0x287be6=[];_0x2737da!=null&&(_0x287be6=await sales_order[_0x261720(0x9b)]({'sales_staff_id':_0x2737da[_0x261720(0xaa)]}));if(_0x1f44b1[0x0]['language']==_0x261720(0xa7))var _0x983ada=users['English'];else{if(_0x1f44b1[0x0][_0x261720(0xca)]==_0x261720(0xae))var _0x983ada=users[_0x261720(0xae)];else{if(_0x1f44b1[0x0][_0x261720(0xca)]=='German')var _0x983ada=users[_0x261720(0x88)];else{if(_0x1f44b1[0x0]['language']==_0x261720(0xb2))var _0x983ada=users['Spanish'];else{if(_0x1f44b1[0x0][_0x261720(0xca)]==_0x261720(0xb0))var _0x983ada=users['French'];else{if(_0x1f44b1[0x0][_0x261720(0xca)]=='Portuguese\x20(BR)')var _0x983ada=users[_0x261720(0xbf)];else{if(_0x1f44b1[0x0][_0x261720(0xca)]==_0x261720(0xa2))var _0x983ada=users[_0x261720(0xa2)];else{if(_0x1f44b1[0x0][_0x261720(0xca)]=='Arabic\x20(ae)')var _0x983ada=users[_0x261720(0x95)];}}}}}}}_0x4fa887[_0x261720(0x8e)](_0x261720(0xc9),{'success':_0x32e949[_0x261720(0x92)](_0x261720(0x9f)),'errors':_0x32e949['flash']('errors'),'master_shop':_0x1f44b1,'profile':_0x4d4a93,'role':_0x43ed1d,'language':_0x983ada,'sales_mine':_0x287be6,'staff_arr':_0x2737da});}catch(_0x23faf6){console[_0x261720(0x93)](_0x23faf6);}}),router['get'](a0_0x26856e(0x97),auth,async(_0x22df35,_0x10f8a0)=>{var _0x3e82d6=a0_0x26856e;try{const _0x13a547=await master_shop[_0x3e82d6(0x9b)](),_0x34cb88=_0x22df35[_0x3e82d6(0x77)],_0x1a01c9=await profile[_0x3e82d6(0xbe)]({'email':_0x34cb88[_0x3e82d6(0xbb)]}),_0xa1f3a2=await staff[_0x3e82d6(0xbe)]({'email':_0x34cb88['email']}),_0x2adcde=await customer[_0x3e82d6(0x9b)]({'agent_id':_0xa1f3a2[_0x3e82d6(0xaa)]}),_0x5153d2=_0x22df35[_0x3e82d6(0x7f)]['id'],_0x105326=await sales_sa['findById'](_0x5153d2);if(_0x13a547[0x0][_0x3e82d6(0xca)]==_0x3e82d6(0xa7))var _0x411cd5=users['English'];else{if(_0x13a547[0x0][_0x3e82d6(0xca)]==_0x3e82d6(0xae))var _0x411cd5=users['Hindi'];else{if(_0x13a547[0x0]['language']==_0x3e82d6(0x88))var _0x411cd5=users['German'];else{if(_0x13a547[0x0][_0x3e82d6(0xca)]==_0x3e82d6(0xb2))var _0x411cd5=users[_0x3e82d6(0xb2)];else{if(_0x13a547[0x0][_0x3e82d6(0xca)]=='French')var _0x411cd5=users[_0x3e82d6(0xb0)];else{if(_0x13a547[0x0][_0x3e82d6(0xca)]==_0x3e82d6(0xa0))var _0x411cd5=users[_0x3e82d6(0xbf)];else{if(_0x13a547[0x0][_0x3e82d6(0xca)]==_0x3e82d6(0xa2))var _0x411cd5=users[_0x3e82d6(0xa2)];else{if(_0x13a547[0x0][_0x3e82d6(0xca)]==_0x3e82d6(0x83))var _0x411cd5=users[_0x3e82d6(0x95)];}}}}}}}_0x10f8a0[_0x3e82d6(0x8e)]('view_collections',{'success':_0x22df35['flash'](_0x3e82d6(0x9f)),'errors':_0x22df35[_0x3e82d6(0x92)](_0x3e82d6(0xc2)),'master_shop':_0x13a547,'profile':_0x1a01c9,'role':_0x34cb88,'language':_0x411cd5,'customer':_0x2adcde,'sales_sa':_0x105326,'staff_arr':_0xa1f3a2});}catch(_0x5c16d5){console[_0x3e82d6(0x93)](_0x5c16d5);}}),router['post']('/view/:id',auth,async(_0x161559,_0x4c7ba1)=>{var _0x6b7334=a0_0x26856e;try{const _0x1c9412=_0x161559[_0x6b7334(0x7f)]['id'],_0x2302d3=await sales_sa[_0x6b7334(0xa4)](_0x1c9412),{collection:_0x51f1ac,invoicemoney:_0x4cd065,collectionnumber:_0x232480,typeofpayment:_0x59ec7f,cashdate:_0xefdbb5,id_detl:_0x3368a7}=_0x161559[_0x6b7334(0xbc)];_0x4c7ba1[_0x6b7334(0xbd)](_0x2302d3);return;if(typeof _0x3368a7==_0x6b7334(0x85))var _0x13f0cc=[_0x161559[_0x6b7334(0xbc)]['id_detl']],_0x1631c1=[_0x161559['body'][_0x6b7334(0xa5)]],_0x884eb9=[_0x161559[_0x6b7334(0xbc)][_0x6b7334(0xc5)]],_0x398843=[_0x161559[_0x6b7334(0xbc)][_0x6b7334(0x7c)]],_0x5bf6b5=[_0x161559['body'][_0x6b7334(0x8d)]],_0x4cd3bb=[_0x161559[_0x6b7334(0xbc)]['bo_disc']],_0x576873=[_0x161559[_0x6b7334(0xbc)][_0x6b7334(0x8b)]];else var _0x13f0cc=[..._0x161559['body'][_0x6b7334(0xba)]],_0x1631c1=[..._0x161559[_0x6b7334(0xbc)][_0x6b7334(0xa5)]],_0x884eb9=[..._0x161559[_0x6b7334(0xbc)][_0x6b7334(0xc5)]],_0x398843=[..._0x161559[_0x6b7334(0xbc)]['fin_disc']],_0x5bf6b5=[..._0x161559[_0x6b7334(0xbc)]['vol_deals']],_0x4cd3bb=[..._0x161559[_0x6b7334(0xbc)][_0x6b7334(0xc3)]],_0x576873=[..._0x161559[_0x6b7334(0xbc)]['totalNewPrice']];const _0x51535c=_0x13f0cc[_0x6b7334(0x8c)](_0x543fe1=>{return _0x543fe1={'id_detl':_0x543fe1};});_0x1631c1['forEach']((_0x5492cd,_0x137f25)=>{var _0x1527fc=_0x6b7334;_0x51535c[_0x137f25][_0x1527fc(0xa5)]=_0x5492cd;}),_0x884eb9[_0x6b7334(0x82)]((_0x141e5f,_0x29092a)=>{var _0x576818=_0x6b7334;_0x51535c[_0x29092a][_0x576818(0xc5)]=_0x141e5f;}),_0x398843['forEach']((_0x42394e,_0xb1aca9)=>{var _0x56b72e=_0x6b7334;_0x51535c[_0xb1aca9][_0x56b72e(0x7c)]=_0x42394e;}),_0x5bf6b5[_0x6b7334(0x82)]((_0x1745c8,_0x39c28a)=>{var _0x23b345=_0x6b7334;_0x51535c[_0x39c28a][_0x23b345(0x8d)]=_0x1745c8;}),_0x4cd3bb[_0x6b7334(0x82)]((_0x531d45,_0x9e482f)=>{var _0x3d2483=_0x6b7334;_0x51535c[_0x9e482f][_0x3d2483(0xc3)]=_0x531d45;}),_0x576873[_0x6b7334(0x82)]((_0x59484e,_0x58a631)=>{var _0x25e65a=_0x6b7334;_0x51535c[_0x58a631][_0x25e65a(0x91)]=_0x59484e;}),_0x2302d3[_0x6b7334(0xb5)]=_0x51f1ac,_0x2302d3['collectionnumber']=_0x232480,_0x2302d3[_0x6b7334(0x9d)]=_0x59ec7f,_0x2302d3['cash_date']=_0xefdbb5,_0x2302d3[_0x6b7334(0xc8)]='True';const _0x4acf4b=await _0x2302d3['save']();if(_0x4acf4b[_0x6b7334(0xc8)]==_0x6b7334(0xb7))for(let _0x25215c=0x0;_0x25215c<=_0x51535c['length']-0x1;_0x25215c++){const _0x5800c7=_0x51535c[_0x25215c],_0x3a3a9d=mongoose[_0x6b7334(0xb8)]['ObjectId'];console[_0x6b7334(0x93)](_0x5800c7);const _0x4ba9a7=await sales_sa[_0x6b7334(0x9a)]({'_id':_0x3a3a9d(_0x1c9412['valueOf']()),'sale_product._id':_0x3a3a9d(_0x5800c7['id_detl'][_0x6b7334(0x80)]())},{'$set':{'sale_product.$.ewt':_0x5800c7[_0x6b7334(0xa5)],'sale_product.$.spwp':_0x5800c7[_0x6b7334(0xc5)],'sale_product.$.fin_disc':_0x5800c7['fin_disc'],'sale_product.$.vol_deals':_0x5800c7[_0x6b7334(0x8d)],'sale_product.$.bo_disc':_0x5800c7[_0x6b7334(0xc3)],'sale_product.$.totalprice':parseFloat(_0x5800c7[_0x6b7334(0x91)])}});}_0x161559[_0x6b7334(0x92)](_0x6b7334(0x9f),_0x6b7334(0x99)),_0x4c7ba1[_0x6b7334(0xc4)](_0x6b7334(0xcb)+_0x1c9412);}catch(_0x1782ae){console['log'](_0x1782ae);}}),router[a0_0x26856e(0x89)](a0_0x26856e(0x84),auth,async(_0x5cdfcb,_0x2d2bfe)=>{var _0x4ce3ba=a0_0x26856e;try{const _0x5c135c=await master_shop[_0x4ce3ba(0x9b)](),_0x34afa9=_0x5cdfcb[_0x4ce3ba(0x77)],_0x3062ca=await profile[_0x4ce3ba(0xbe)]({'email':_0x34afa9['email']}),_0x4c66fa=await staff[_0x4ce3ba(0xbe)]({'email':_0x34afa9[_0x4ce3ba(0xbb)],'type_of_acc_cat':'2'});let _0x5dc4dc=[];_0x4c66fa!=null&&(_0x5dc4dc=await sales_order[_0x4ce3ba(0x9b)]({'sales_staff_id':_0x4c66fa[_0x4ce3ba(0xaa)]}));console[_0x4ce3ba(0x93)](_0x5dc4dc);if(_0x5c135c[0x0]['language']==_0x4ce3ba(0xa7))var _0x122528=users[_0x4ce3ba(0xb1)];else{if(_0x5c135c[0x0][_0x4ce3ba(0xca)]==_0x4ce3ba(0xae))var _0x122528=users[_0x4ce3ba(0xae)];else{if(_0x5c135c[0x0][_0x4ce3ba(0xca)]==_0x4ce3ba(0x88))var _0x122528=users['German'];else{if(_0x5c135c[0x0][_0x4ce3ba(0xca)]==_0x4ce3ba(0xb2))var _0x122528=users[_0x4ce3ba(0xb2)];else{if(_0x5c135c[0x0][_0x4ce3ba(0xca)]=='French')var _0x122528=users[_0x4ce3ba(0xb0)];else{if(_0x5c135c[0x0][_0x4ce3ba(0xca)]=='Portuguese\x20(BR)')var _0x122528=users['Portuguese'];else{if(_0x5c135c[0x0][_0x4ce3ba(0xca)]=='Chinese')var _0x122528=users[_0x4ce3ba(0xa2)];else{if(_0x5c135c[0x0]['language']==_0x4ce3ba(0x83))var _0x122528=users[_0x4ce3ba(0x95)];}}}}}}}_0x2d2bfe['render'](_0x4ce3ba(0x96),{'success':_0x5cdfcb[_0x4ce3ba(0x92)]('success'),'errors':_0x5cdfcb[_0x4ce3ba(0x92)]('errors'),'master_shop':_0x5c135c,'profile':_0x3062ca,'role':_0x34afa9,'language':_0x122528,'sales_mine':_0x5dc4dc,'staff_arr':_0x4c66fa});}catch(_0x4b9e7a){console[_0x4ce3ba(0x93)](_0x4b9e7a);}}),router['get'](a0_0x26856e(0x78),auth,async(_0x31306c,_0x536819)=>{var _0xbee4da=a0_0x26856e;try{const _0x567a7c=await master_shop['find'](),_0xac76c0=_0x31306c[_0xbee4da(0x77)],_0x41df50=await profile[_0xbee4da(0xbe)]({'email':_0xac76c0[_0xbee4da(0xbb)]}),_0x96eaee=await staff[_0xbee4da(0xbe)]({'email':_0xac76c0[_0xbee4da(0xbb)]}),_0x5745e1=await customer['find']({'agent_id':_0x96eaee[_0xbee4da(0xaa)]}),_0x14f0ac=_0x31306c['params']['id'],_0xe91e83=await sales_order[_0xbee4da(0xa4)](_0x14f0ac);if(_0x567a7c[0x0]['language']==_0xbee4da(0xa7))var _0x1201bb=users['English'];else{if(_0x567a7c[0x0][_0xbee4da(0xca)]==_0xbee4da(0xae))var _0x1201bb=users['Hindi'];else{if(_0x567a7c[0x0][_0xbee4da(0xca)]=='German')var _0x1201bb=users[_0xbee4da(0x88)];else{if(_0x567a7c[0x0][_0xbee4da(0xca)]=='Spanish')var _0x1201bb=users[_0xbee4da(0xb2)];else{if(_0x567a7c[0x0]['language']=='French')var _0x1201bb=users[_0xbee4da(0xb0)];else{if(_0x567a7c[0x0][_0xbee4da(0xca)]==_0xbee4da(0xa0))var _0x1201bb=users['Portuguese'];else{if(_0x567a7c[0x0][_0xbee4da(0xca)]=='Chinese')var _0x1201bb=users[_0xbee4da(0xa2)];else{if(_0x567a7c[0x0][_0xbee4da(0xca)]=='Arabic\x20(ae)')var _0x1201bb=users[_0xbee4da(0x95)];}}}}}}}_0x536819[_0xbee4da(0x8e)](_0xbee4da(0x7a),{'success':_0x31306c[_0xbee4da(0x92)]('success'),'errors':_0x31306c[_0xbee4da(0x92)]('errors'),'master_shop':_0x567a7c,'profile':_0x41df50,'role':_0xac76c0,'language':_0x1201bb,'customer':_0x5745e1,'sales_sa':_0xe91e83});}catch(_0x2221ac){console[_0xbee4da(0x93)](_0x2221ac);}}),router[a0_0x26856e(0x89)](a0_0x26856e(0xb4),auth,async(_0x28c8de,_0x1c58ba)=>{var _0x12fbef=a0_0x26856e;try{const _0x435e40=await master_shop[_0x12fbef(0x9b)](),_0x50ecc9=_0x28c8de[_0x12fbef(0x77)],_0x545f2a=await profile['findOne']({'email':_0x50ecc9[_0x12fbef(0xbb)]}),_0x3e4947=await staff[_0x12fbef(0xbe)]({'email':_0x50ecc9[_0x12fbef(0xbb)],'type_of_acc_cat':'1'});let _0x1e2e66=[];_0x3e4947!=null&&(_0x1e2e66=await sales_sa[_0x12fbef(0x9b)]({'sales_staff_id':_0x3e4947[_0x12fbef(0xaa)]}));if(_0x435e40[0x0][_0x12fbef(0xca)]==_0x12fbef(0xa7))var _0x2a6545=users['English'];else{if(_0x435e40[0x0][_0x12fbef(0xca)]=='Hindi')var _0x2a6545=users[_0x12fbef(0xae)];else{if(_0x435e40[0x0][_0x12fbef(0xca)]==_0x12fbef(0x88))var _0x2a6545=users['German'];else{if(_0x435e40[0x0]['language']=='Spanish')var _0x2a6545=users[_0x12fbef(0xb2)];else{if(_0x435e40[0x0][_0x12fbef(0xca)]==_0x12fbef(0xb0))var _0x2a6545=users['French'];else{if(_0x435e40[0x0][_0x12fbef(0xca)]=='Portuguese\x20(BR)')var _0x2a6545=users[_0x12fbef(0xbf)];else{if(_0x435e40[0x0][_0x12fbef(0xca)]==_0x12fbef(0xa2))var _0x2a6545=users[_0x12fbef(0xa2)];else{if(_0x435e40[0x0][_0x12fbef(0xca)]==_0x12fbef(0x83))var _0x2a6545=users[_0x12fbef(0x95)];}}}}}}}_0x1c58ba[_0x12fbef(0x8e)](_0x12fbef(0x90),{'success':_0x28c8de['flash']('success'),'errors':_0x28c8de[_0x12fbef(0x92)](_0x12fbef(0xc2)),'master_shop':_0x435e40,'profile':_0x545f2a,'role':_0x50ecc9,'language':_0x2a6545,'sales_mine':_0x1e2e66,'staff_arr':_0x3e4947});}catch(_0x185c23){console[_0x12fbef(0x93)](_0x185c23);}}),router[a0_0x26856e(0x89)](a0_0x26856e(0xcc),auth,async(_0x13b74e,_0x11fe94)=>{var _0x348366=a0_0x26856e;try{const _0x191183=await master_shop[_0x348366(0x9b)](),_0x5b6e01=_0x13b74e[_0x348366(0x77)],_0x582ff3=await profile['findOne']({'email':_0x5b6e01[_0x348366(0xbb)]}),_0x5d23d9=await staff[_0x348366(0xbe)]({'email':_0x5b6e01[_0x348366(0xbb)]}),_0x406635=await customer[_0x348366(0x9b)]({'agent_id':_0x5d23d9[_0x348366(0xaa)]}),_0x501a5=_0x13b74e[_0x348366(0x7f)]['id'],_0x3c9e3d=await sales_sa['findById'](_0x501a5);if(_0x191183[0x0][_0x348366(0xca)]==_0x348366(0xa7))var _0x4ac987=users[_0x348366(0xb1)];else{if(_0x191183[0x0][_0x348366(0xca)]==_0x348366(0xae))var _0x4ac987=users[_0x348366(0xae)];else{if(_0x191183[0x0]['language']==_0x348366(0x88))var _0x4ac987=users[_0x348366(0x88)];else{if(_0x191183[0x0][_0x348366(0xca)]==_0x348366(0xb2))var _0x4ac987=users[_0x348366(0xb2)];else{if(_0x191183[0x0][_0x348366(0xca)]==_0x348366(0xb0))var _0x4ac987=users['French'];else{if(_0x191183[0x0][_0x348366(0xca)]==_0x348366(0xa0))var _0x4ac987=users[_0x348366(0xbf)];else{if(_0x191183[0x0][_0x348366(0xca)]==_0x348366(0xa2))var _0x4ac987=users[_0x348366(0xa2)];else{if(_0x191183[0x0][_0x348366(0xca)]==_0x348366(0x83))var _0x4ac987=users[_0x348366(0x95)];}}}}}}}_0x11fe94['render'](_0x348366(0xa9),{'success':_0x13b74e['flash'](_0x348366(0x9f)),'errors':_0x13b74e[_0x348366(0x92)]('errors'),'master_shop':_0x191183,'profile':_0x582ff3,'role':_0x5b6e01,'language':_0x4ac987,'customer':_0x406635,'sales_sa':_0x3c9e3d,'staff_arr':_0x5d23d9});}catch(_0x255d74){console[_0x348366(0x93)](_0x255d74);}}),router[a0_0x26856e(0x98)](a0_0x26856e(0xcc),auth,async(_0x2d14a8,_0x27f859)=>{var _0x34d061=a0_0x26856e;try{const _0x4ac96f=_0x2d14a8['params']['id'],_0x2b204b=await sales_sa[_0x34d061(0xa4)](_0x4ac96f),{collection:_0x422202,invoicemoney:_0x47969a,collectionnumber:_0x16639f,typeofpayment:_0x5f0775,cashdate:_0x466a6e,id_detl:_0xac56f3}=_0x2d14a8[_0x34d061(0xbc)];if(typeof _0xac56f3==_0x34d061(0x85))var _0x198aa1=[_0x2d14a8[_0x34d061(0xbc)][_0x34d061(0xba)]],_0xd0a519=[_0x2d14a8['body'][_0x34d061(0xa5)]],_0x472cf5=[_0x2d14a8[_0x34d061(0xbc)][_0x34d061(0xc5)]],_0x683595=[_0x2d14a8[_0x34d061(0xbc)]['fin_disc']],_0x58fb22=[_0x2d14a8[_0x34d061(0xbc)][_0x34d061(0x8d)]],_0xb276b6=[_0x2d14a8[_0x34d061(0xbc)][_0x34d061(0xc3)]],_0x190aad=[_0x2d14a8[_0x34d061(0xbc)][_0x34d061(0x8b)]];else var _0x198aa1=[..._0x2d14a8['body'][_0x34d061(0xba)]],_0xd0a519=[..._0x2d14a8[_0x34d061(0xbc)][_0x34d061(0xa5)]],_0x472cf5=[..._0x2d14a8[_0x34d061(0xbc)][_0x34d061(0xc5)]],_0x683595=[..._0x2d14a8[_0x34d061(0xbc)][_0x34d061(0x7c)]],_0x58fb22=[..._0x2d14a8[_0x34d061(0xbc)][_0x34d061(0x8d)]],_0xb276b6=[..._0x2d14a8[_0x34d061(0xbc)][_0x34d061(0xc3)]],_0x190aad=[..._0x2d14a8[_0x34d061(0xbc)][_0x34d061(0x8b)]];const _0xf290ac=_0x198aa1[_0x34d061(0x8c)](_0x48b6a8=>{return _0x48b6a8={'id_detl':_0x48b6a8};});_0xd0a519[_0x34d061(0x82)]((_0x17a5aa,_0x5c2103)=>{var _0x3db9f9=_0x34d061;_0xf290ac[_0x5c2103][_0x3db9f9(0xa5)]=_0x17a5aa;}),_0x472cf5[_0x34d061(0x82)]((_0xa65eb0,_0x14a91f)=>{var _0x4af5de=_0x34d061;_0xf290ac[_0x14a91f][_0x4af5de(0xc5)]=_0xa65eb0;}),_0x683595[_0x34d061(0x82)]((_0x567f93,_0x1fb6d5)=>{var _0x39059d=_0x34d061;_0xf290ac[_0x1fb6d5][_0x39059d(0x7c)]=_0x567f93;}),_0x58fb22[_0x34d061(0x82)]((_0x2b65c5,_0x3e1adc)=>{_0xf290ac[_0x3e1adc]['vol_deals']=_0x2b65c5;}),_0xb276b6[_0x34d061(0x82)]((_0x356df2,_0x345bcc)=>{_0xf290ac[_0x345bcc]['bo_disc']=_0x356df2;}),_0x190aad[_0x34d061(0x82)]((_0x451f94,_0x274df0)=>{var _0x120973=_0x34d061;_0xf290ac[_0x274df0][_0x120973(0x91)]=_0x451f94;}),_0x2b204b['collection_price']=_0x422202,_0x2b204b[_0x34d061(0x8f)]=_0x16639f,_0x2b204b['type_of_payment']=_0x5f0775,_0x2b204b[_0x34d061(0xb3)]=_0x466a6e,_0x2b204b['paid']=_0x34d061(0xb7),_0x2b204b['typeofprocess']='1';const _0x24d2f3=await _0x2b204b['save']();if(_0x24d2f3[_0x34d061(0xc8)]==_0x34d061(0xb7))for(let _0x4729c0=0x0;_0x4729c0<=_0xf290ac[_0x34d061(0xab)]-0x1;_0x4729c0++){const _0x366b73=_0xf290ac[_0x4729c0],_0x5b137a=mongoose[_0x34d061(0xb8)][_0x34d061(0xad)];console[_0x34d061(0x93)](_0x366b73);const _0x2c8b25=await sales_sa[_0x34d061(0x9a)]({'_id':_0x5b137a(_0x4ac96f[_0x34d061(0x80)]()),'sale_product._id':_0x5b137a(_0x366b73['id_detl'][_0x34d061(0x80)]())},{'$set':{'sale_product.$.ewt':_0x366b73[_0x34d061(0xa5)],'sale_product.$.spwp':_0x366b73[_0x34d061(0xc5)],'sale_product.$.fin_disc':_0x366b73[_0x34d061(0x7c)],'sale_product.$.vol_deals':_0x366b73['vol_deals'],'sale_product.$.bo_disc':_0x366b73['bo_disc'],'sale_product.$.totalprice':parseFloat(_0x366b73[_0x34d061(0x91)])}});}_0x2d14a8['flash'](_0x34d061(0x9f),'Collection\x20Update\x20successfully'),_0x27f859['redirect'](_0x34d061(0xcb)+_0x4ac96f);}catch(_0x2a2b43){console[_0x34d061(0x93)](_0x2a2b43);}}),router[a0_0x26856e(0x89)](a0_0x26856e(0xa8),auth,async(_0x3a290d,_0x123481)=>{var _0x4e0ff9=a0_0x26856e;try{const _0x2bd922=await master_shop[_0x4e0ff9(0x9b)](),_0x44a79c=_0x3a290d[_0x4e0ff9(0x77)],_0xbad4ab=await profile[_0x4e0ff9(0xbe)]({'email':_0x44a79c[_0x4e0ff9(0xbb)]}),_0x1887b3=await staff[_0x4e0ff9(0xbe)]({'email':_0x44a79c['email'],'type_of_acc_cat':'1'});let _0xad3238=[];_0x1887b3!=null&&(_0xad3238=await sales_order[_0x4e0ff9(0x9b)]({'sales_staff_id':_0x1887b3[_0x4e0ff9(0xaa)]}));if(_0x2bd922[0x0]['language']==_0x4e0ff9(0xa7))var _0x174d12=users[_0x4e0ff9(0xb1)];else{if(_0x2bd922[0x0]['language']==_0x4e0ff9(0xae))var _0x174d12=users[_0x4e0ff9(0xae)];else{if(_0x2bd922[0x0][_0x4e0ff9(0xca)]==_0x4e0ff9(0x88))var _0x174d12=users['German'];else{if(_0x2bd922[0x0]['language']==_0x4e0ff9(0xb2))var _0x174d12=users[_0x4e0ff9(0xb2)];else{if(_0x2bd922[0x0][_0x4e0ff9(0xca)]==_0x4e0ff9(0xb0))var _0x174d12=users['French'];else{if(_0x2bd922[0x0][_0x4e0ff9(0xca)]==_0x4e0ff9(0xa0))var _0x174d12=users[_0x4e0ff9(0xbf)];else{if(_0x2bd922[0x0][_0x4e0ff9(0xca)]==_0x4e0ff9(0xa2))var _0x174d12=users['Chinese'];else{if(_0x2bd922[0x0][_0x4e0ff9(0xca)]==_0x4e0ff9(0x83))var _0x174d12=users[_0x4e0ff9(0x95)];}}}}}}}_0x123481[_0x4e0ff9(0x8e)](_0x4e0ff9(0x81),{'success':_0x3a290d[_0x4e0ff9(0x92)](_0x4e0ff9(0x9f)),'errors':_0x3a290d[_0x4e0ff9(0x92)](_0x4e0ff9(0xc2)),'master_shop':_0x2bd922,'profile':_0xbad4ab,'role':_0x44a79c,'language':_0x174d12,'sales_mine':_0xad3238,'staff_arr':_0x1887b3});}catch(_0x4cf928){console[_0x4e0ff9(0x93)](_0x4cf928);}}),router['get'](a0_0x26856e(0xac),auth,async(_0x49f894,_0x51ce9a)=>{var _0x3b79af=a0_0x26856e;try{const _0x5e72a4=await master_shop[_0x3b79af(0x9b)](),_0x1f6a75=_0x49f894[_0x3b79af(0x77)],_0x49fd9f=await profile[_0x3b79af(0xbe)]({'email':_0x1f6a75[_0x3b79af(0xbb)]}),_0x46bc90=await staff[_0x3b79af(0xbe)]({'email':_0x1f6a75[_0x3b79af(0xbb)]}),_0x1fc46f=await customer[_0x3b79af(0x9b)]({'agent_id':_0x46bc90['_id']}),_0x4a8558=_0x49f894[_0x3b79af(0x7f)]['id'],_0x46aa69=await sales_order[_0x3b79af(0xa4)](_0x4a8558);if(_0x5e72a4[0x0][_0x3b79af(0xca)]==_0x3b79af(0xa7))var _0x2f6e88=users[_0x3b79af(0xb1)];else{if(_0x5e72a4[0x0][_0x3b79af(0xca)]==_0x3b79af(0xae))var _0x2f6e88=users[_0x3b79af(0xae)];else{if(_0x5e72a4[0x0][_0x3b79af(0xca)]=='German')var _0x2f6e88=users[_0x3b79af(0x88)];else{if(_0x5e72a4[0x0]['language']==_0x3b79af(0xb2))var _0x2f6e88=users['Spanish'];else{if(_0x5e72a4[0x0][_0x3b79af(0xca)]=='French')var _0x2f6e88=users[_0x3b79af(0xb0)];else{if(_0x5e72a4[0x0][_0x3b79af(0xca)]==_0x3b79af(0xa0))var _0x2f6e88=users[_0x3b79af(0xbf)];else{if(_0x5e72a4[0x0][_0x3b79af(0xca)]==_0x3b79af(0xa2))var _0x2f6e88=users[_0x3b79af(0xa2)];else{if(_0x5e72a4[0x0][_0x3b79af(0xca)]==_0x3b79af(0x83))var _0x2f6e88=users[_0x3b79af(0x95)];}}}}}}}_0x51ce9a[_0x3b79af(0x8e)](_0x3b79af(0x87),{'success':_0x49f894['flash']('success'),'errors':_0x49f894[_0x3b79af(0x92)]('errors'),'master_shop':_0x5e72a4,'profile':_0x49fd9f,'role':_0x1f6a75,'language':_0x2f6e88,'customer':_0x1fc46f,'sales_sa':_0x46aa69,'staff_arr':_0x46bc90});}catch(_0x367745){console[_0x3b79af(0x93)](_0x367745);}}),router[a0_0x26856e(0x98)](a0_0x26856e(0xac),auth,async(_0xd5f3be,_0x5a0237)=>{var _0x1c557c=a0_0x26856e;try{const _0x1bd4df=_0xd5f3be[_0x1c557c(0x7f)]['id'],_0x2df436=await sales_order[_0x1c557c(0xa4)](_0x1bd4df),{collection:_0x41c174,invoicemoney:_0x11cd1a,collectionnumber:_0x5a0fb7,typeofpayment:_0x7e5ce7,cashdate:_0x44bb7d,id_detl:_0x41a2ea}=_0xd5f3be[_0x1c557c(0xbc)];_0x2df436[_0x1c557c(0xb5)]=_0x41c174,_0x2df436[_0x1c557c(0x9d)]=_0x7e5ce7,_0x2df436['cash_date']=_0x44bb7d,_0x2df436['paid']='True',_0x2df436[_0x1c557c(0xa6)]='1';const _0x896544=await _0x2df436[_0x1c557c(0x75)]();_0xd5f3be[_0x1c557c(0x92)](_0x1c557c(0x9f),_0x1c557c(0x99)),_0x5a0237[_0x1c557c(0xc4)](_0x1c557c(0x94)+_0x1bd4df);}catch(_0x273929){console[_0x1c557c(0x93)](_0x273929);}}),module[a0_0x26856e(0x9c)]=router;