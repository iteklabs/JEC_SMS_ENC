var a0_0x8b45c=a0_0x53d4;(function(_0x1b5b07,_0x345535){var _0x17f6cc=a0_0x53d4,_0x407ff4=_0x1b5b07();while(!![]){try{var _0x452baa=parseInt(_0x17f6cc(0x17b))/0x1+parseInt(_0x17f6cc(0x1a5))/0x2+-parseInt(_0x17f6cc(0x180))/0x3+-parseInt(_0x17f6cc(0x1ae))/0x4*(parseInt(_0x17f6cc(0x198))/0x5)+parseInt(_0x17f6cc(0x1be))/0x6+-parseInt(_0x17f6cc(0x1cd))/0x7*(-parseInt(_0x17f6cc(0x1ba))/0x8)+parseInt(_0x17f6cc(0x197))/0x9;if(_0x452baa===_0x345535)break;else _0x407ff4['push'](_0x407ff4['shift']());}catch(_0x25379e){_0x407ff4['push'](_0x407ff4['shift']());}}}(a0_0x4c56,0xaf5a7));const express=require('express'),app=express(),router=express[a0_0x8b45c(0x1a8)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x8b45c(0x1c0)),auth=require(a0_0x8b45c(0x1c1)),users=require(a0_0x8b45c(0x1ce)),excelJS=require(a0_0x8b45c(0x1c5)),xlsx=require(a0_0x8b45c(0x199)),multer=require(a0_0x8b45c(0x183)),mongoose=require(a0_0x8b45c(0x1b1));router[a0_0x8b45c(0x1a4)](a0_0x8b45c(0x1ac),auth,async(_0x319837,_0x58cedb)=>{var _0x1b10f2=a0_0x8b45c;try{const _0x3891ed=await master_shop['find'](),_0xa4685d=_0x319837[_0x1b10f2(0x181)],_0x264d93=await profile['findOne']({'email':_0xa4685d[_0x1b10f2(0x1bf)]}),_0x417e81=await staff[_0x1b10f2(0x18d)]({'email':_0xa4685d[_0x1b10f2(0x1bf)],'type_of_acc_cat':'2'});let _0x38eb84=[];_0x417e81!=null&&(_0x38eb84=await sales_order[_0x1b10f2(0x187)]({'sales_staff_id':_0x417e81[_0x1b10f2(0x193)]}));if(_0x3891ed[0x0][_0x1b10f2(0x1c7)]==_0x1b10f2(0x191))var _0x516815=users[_0x1b10f2(0x1c9)];else{if(_0x3891ed[0x0][_0x1b10f2(0x1c7)]==_0x1b10f2(0x18c))var _0x516815=users[_0x1b10f2(0x18c)];else{if(_0x3891ed[0x0][_0x1b10f2(0x1c7)]==_0x1b10f2(0x1a0))var _0x516815=users[_0x1b10f2(0x1a0)];else{if(_0x3891ed[0x0][_0x1b10f2(0x1c7)]==_0x1b10f2(0x1bb))var _0x516815=users[_0x1b10f2(0x1bb)];else{if(_0x3891ed[0x0][_0x1b10f2(0x1c7)]=='French')var _0x516815=users[_0x1b10f2(0x19c)];else{if(_0x3891ed[0x0][_0x1b10f2(0x1c7)]=='Portuguese\x20(BR)')var _0x516815=users[_0x1b10f2(0x196)];else{if(_0x3891ed[0x0][_0x1b10f2(0x1c7)]==_0x1b10f2(0x19d))var _0x516815=users['Chinese'];else{if(_0x3891ed[0x0][_0x1b10f2(0x1c7)]==_0x1b10f2(0x1b2))var _0x516815=users['Arabic'];}}}}}}}_0x58cedb[_0x1b10f2(0x188)](_0x1b10f2(0x185),{'success':_0x319837['flash'](_0x1b10f2(0x1b8)),'errors':_0x319837[_0x1b10f2(0x1ab)](_0x1b10f2(0x1c8)),'master_shop':_0x3891ed,'profile':_0x264d93,'role':_0xa4685d,'language':_0x516815,'sales_mine':_0x38eb84,'staff_arr':_0x417e81});}catch(_0x2c2066){console[_0x1b10f2(0x1cc)](_0x2c2066);}}),router[a0_0x8b45c(0x1a4)](a0_0x8b45c(0x1b4),auth,async(_0x337aef,_0x2612b0)=>{var _0x2782e9=a0_0x8b45c;try{const _0x2c93ad=await master_shop[_0x2782e9(0x187)](),_0x5b8999=_0x337aef[_0x2782e9(0x181)],_0x1403f6=await profile[_0x2782e9(0x18d)]({'email':_0x5b8999[_0x2782e9(0x1bf)]}),_0x504b49=await staff[_0x2782e9(0x18d)]({'email':_0x5b8999[_0x2782e9(0x1bf)]}),_0x57531e=await customer[_0x2782e9(0x187)]({'agent_id':_0x504b49[_0x2782e9(0x193)]}),_0x22d9ee=_0x337aef[_0x2782e9(0x1b0)]['id'],_0xb9b00=await sales_sa[_0x2782e9(0x184)](_0x22d9ee);if(_0x2c93ad[0x0]['language']==_0x2782e9(0x191))var _0x2563c8=users[_0x2782e9(0x1c9)];else{if(_0x2c93ad[0x0]['language']==_0x2782e9(0x18c))var _0x2563c8=users['Hindi'];else{if(_0x2c93ad[0x0]['language']==_0x2782e9(0x1a0))var _0x2563c8=users[_0x2782e9(0x1a0)];else{if(_0x2c93ad[0x0][_0x2782e9(0x1c7)]=='Spanish')var _0x2563c8=users[_0x2782e9(0x1bb)];else{if(_0x2c93ad[0x0][_0x2782e9(0x1c7)]=='French')var _0x2563c8=users['French'];else{if(_0x2c93ad[0x0][_0x2782e9(0x1c7)]==_0x2782e9(0x18f))var _0x2563c8=users[_0x2782e9(0x196)];else{if(_0x2c93ad[0x0][_0x2782e9(0x1c7)]==_0x2782e9(0x19d))var _0x2563c8=users[_0x2782e9(0x19d)];else{if(_0x2c93ad[0x0]['language']=='Arabic\x20(ae)')var _0x2563c8=users[_0x2782e9(0x1c4)];}}}}}}}_0x2612b0[_0x2782e9(0x188)](_0x2782e9(0x190),{'success':_0x337aef[_0x2782e9(0x1ab)](_0x2782e9(0x1b8)),'errors':_0x337aef[_0x2782e9(0x1ab)]('errors'),'master_shop':_0x2c93ad,'profile':_0x1403f6,'role':_0x5b8999,'language':_0x2563c8,'customer':_0x57531e,'sales_sa':_0xb9b00,'staff_arr':_0x504b49});}catch(_0x386f76){console['log'](_0x386f76);}}),router[a0_0x8b45c(0x1c2)]('/view/:id',auth,async(_0x15ff44,_0x4abfb4)=>{var _0x23a5fc=a0_0x8b45c;try{const _0x5e5c5f=_0x15ff44[_0x23a5fc(0x1b0)]['id'],_0x1b6a95=await sales_sa[_0x23a5fc(0x184)](_0x5e5c5f),{collection:_0x5970e3,invoicemoney:_0x10f7c0,collectionnumber:_0x27852b,typeofpayment:_0x49d559,cashdate:_0x29a994,id_detl:_0x3a0fe9}=_0x15ff44[_0x23a5fc(0x19a)];_0x4abfb4['json'](_0x1b6a95);return;if(typeof _0x3a0fe9==_0x23a5fc(0x194))var _0x3da417=[_0x15ff44[_0x23a5fc(0x19a)]['id_detl']],_0x4e4301=[_0x15ff44['body'][_0x23a5fc(0x1b6)]],_0x50cc96=[_0x15ff44['body'][_0x23a5fc(0x182)]],_0xb40f99=[_0x15ff44[_0x23a5fc(0x19a)]['fin_disc']],_0x354320=[_0x15ff44[_0x23a5fc(0x19a)][_0x23a5fc(0x19b)]],_0x4cdb82=[_0x15ff44['body'][_0x23a5fc(0x195)]],_0x3b1d02=[_0x15ff44[_0x23a5fc(0x19a)]['totalNewPrice']];else var _0x3da417=[..._0x15ff44['body']['id_detl']],_0x4e4301=[..._0x15ff44['body'][_0x23a5fc(0x1b6)]],_0x50cc96=[..._0x15ff44[_0x23a5fc(0x19a)][_0x23a5fc(0x182)]],_0xb40f99=[..._0x15ff44[_0x23a5fc(0x19a)][_0x23a5fc(0x1bd)]],_0x354320=[..._0x15ff44[_0x23a5fc(0x19a)]['vol_deals']],_0x4cdb82=[..._0x15ff44['body'][_0x23a5fc(0x195)]],_0x3b1d02=[..._0x15ff44[_0x23a5fc(0x19a)][_0x23a5fc(0x17f)]];const _0x54c826=_0x3da417['map'](_0x2462a3=>{return _0x2462a3={'id_detl':_0x2462a3};});_0x4e4301[_0x23a5fc(0x1aa)]((_0x585cc5,_0x284ed7)=>{var _0x4f34ba=_0x23a5fc;_0x54c826[_0x284ed7][_0x4f34ba(0x1b6)]=_0x585cc5;}),_0x50cc96[_0x23a5fc(0x1aa)]((_0x3e0088,_0x38b09b)=>{_0x54c826[_0x38b09b]['spwp']=_0x3e0088;}),_0xb40f99[_0x23a5fc(0x1aa)]((_0x4fd48e,_0x6efb79)=>{_0x54c826[_0x6efb79]['fin_disc']=_0x4fd48e;}),_0x354320[_0x23a5fc(0x1aa)]((_0x43e928,_0x1e2c81)=>{var _0x3a73bf=_0x23a5fc;_0x54c826[_0x1e2c81][_0x3a73bf(0x19b)]=_0x43e928;}),_0x4cdb82['forEach']((_0x133c57,_0x108777)=>{var _0x4aecc3=_0x23a5fc;_0x54c826[_0x108777][_0x4aecc3(0x195)]=_0x133c57;}),_0x3b1d02[_0x23a5fc(0x1aa)]((_0x41147c,_0x1c38d1)=>{var _0x16dea1=_0x23a5fc;_0x54c826[_0x1c38d1][_0x16dea1(0x19e)]=_0x41147c;}),_0x1b6a95['collection_price']=_0x5970e3,_0x1b6a95[_0x23a5fc(0x1a6)]=_0x27852b,_0x1b6a95['type_of_payment']=_0x49d559,_0x1b6a95[_0x23a5fc(0x17d)]=_0x29a994,_0x1b6a95['paid']=_0x23a5fc(0x1cf);const _0x34fc3f=await _0x1b6a95[_0x23a5fc(0x189)]();if(_0x34fc3f['paid']==_0x23a5fc(0x1cf))for(let _0x1aa312=0x0;_0x1aa312<=_0x54c826[_0x23a5fc(0x186)]-0x1;_0x1aa312++){const _0x5c3494=_0x54c826[_0x1aa312],_0x54dd39=mongoose[_0x23a5fc(0x1d1)][_0x23a5fc(0x19f)];console[_0x23a5fc(0x1cc)](_0x5c3494);const _0x11dc6b=await sales_sa[_0x23a5fc(0x1cb)]({'_id':_0x54dd39(_0x5e5c5f[_0x23a5fc(0x1ca)]()),'sale_product._id':_0x54dd39(_0x5c3494[_0x23a5fc(0x1ad)][_0x23a5fc(0x1ca)]())},{'$set':{'sale_product.$.ewt':_0x5c3494[_0x23a5fc(0x1b6)],'sale_product.$.spwp':_0x5c3494[_0x23a5fc(0x182)],'sale_product.$.fin_disc':_0x5c3494[_0x23a5fc(0x1bd)],'sale_product.$.vol_deals':_0x5c3494[_0x23a5fc(0x19b)],'sale_product.$.bo_disc':_0x5c3494[_0x23a5fc(0x195)],'sale_product.$.totalprice':parseFloat(_0x5c3494[_0x23a5fc(0x19e)])}});}_0x15ff44['flash'](_0x23a5fc(0x1b8),_0x23a5fc(0x1d2)),_0x4abfb4[_0x23a5fc(0x1bc)](_0x23a5fc(0x1d0)+_0x5e5c5f);}catch(_0x349905){console['log'](_0x349905);}}),router[a0_0x8b45c(0x1a4)](a0_0x8b45c(0x18a),auth,async(_0x5b9255,_0x35f4d3)=>{var _0x1120f3=a0_0x8b45c;try{const _0x259e26=await master_shop['find'](),_0x3cfbe8=_0x5b9255[_0x1120f3(0x181)],_0x1b111b=await profile[_0x1120f3(0x18d)]({'email':_0x3cfbe8[_0x1120f3(0x1bf)]}),_0x510da5=await staff[_0x1120f3(0x18d)]({'email':_0x3cfbe8['email'],'type_of_acc_cat':'2'});let _0x14701f=[];_0x510da5!=null&&(_0x14701f=await sales_order[_0x1120f3(0x187)]({'sales_staff_id':_0x510da5['_id']}));console[_0x1120f3(0x1cc)](_0x14701f);if(_0x259e26[0x0][_0x1120f3(0x1c7)]==_0x1120f3(0x191))var _0xa0d271=users[_0x1120f3(0x1c9)];else{if(_0x259e26[0x0][_0x1120f3(0x1c7)]==_0x1120f3(0x18c))var _0xa0d271=users[_0x1120f3(0x18c)];else{if(_0x259e26[0x0][_0x1120f3(0x1c7)]==_0x1120f3(0x1a0))var _0xa0d271=users[_0x1120f3(0x1a0)];else{if(_0x259e26[0x0][_0x1120f3(0x1c7)]==_0x1120f3(0x1bb))var _0xa0d271=users['Spanish'];else{if(_0x259e26[0x0][_0x1120f3(0x1c7)]==_0x1120f3(0x19c))var _0xa0d271=users[_0x1120f3(0x19c)];else{if(_0x259e26[0x0][_0x1120f3(0x1c7)]==_0x1120f3(0x18f))var _0xa0d271=users[_0x1120f3(0x196)];else{if(_0x259e26[0x0]['language']==_0x1120f3(0x19d))var _0xa0d271=users['Chinese'];else{if(_0x259e26[0x0][_0x1120f3(0x1c7)]==_0x1120f3(0x1b2))var _0xa0d271=users['Arabic'];}}}}}}}_0x35f4d3['render'](_0x1120f3(0x1a1),{'success':_0x5b9255[_0x1120f3(0x1ab)](_0x1120f3(0x1b8)),'errors':_0x5b9255[_0x1120f3(0x1ab)](_0x1120f3(0x1c8)),'master_shop':_0x259e26,'profile':_0x1b111b,'role':_0x3cfbe8,'language':_0xa0d271,'sales_mine':_0x14701f,'staff_arr':_0x510da5});}catch(_0x3911a5){console[_0x1120f3(0x1cc)](_0x3911a5);}}),router[a0_0x8b45c(0x1a4)](a0_0x8b45c(0x1b7),auth,async(_0x516b50,_0x5d395c)=>{var _0x295425=a0_0x8b45c;try{const _0x65764a=await master_shop['find'](),_0xeb0ad7=_0x516b50[_0x295425(0x181)],_0x14907a=await profile['findOne']({'email':_0xeb0ad7[_0x295425(0x1bf)]}),_0x505c85=await staff['findOne']({'email':_0xeb0ad7[_0x295425(0x1bf)]}),_0x2ed0ac=await customer[_0x295425(0x187)]({'agent_id':_0x505c85[_0x295425(0x193)]}),_0x3daaf4=_0x516b50['params']['id'],_0x487057=await sales_order[_0x295425(0x184)](_0x3daaf4);if(_0x65764a[0x0][_0x295425(0x1c7)]==_0x295425(0x191))var _0x4c818d=users['English'];else{if(_0x65764a[0x0][_0x295425(0x1c7)]==_0x295425(0x18c))var _0x4c818d=users[_0x295425(0x18c)];else{if(_0x65764a[0x0][_0x295425(0x1c7)]==_0x295425(0x1a0))var _0x4c818d=users[_0x295425(0x1a0)];else{if(_0x65764a[0x0]['language']==_0x295425(0x1bb))var _0x4c818d=users[_0x295425(0x1bb)];else{if(_0x65764a[0x0]['language']==_0x295425(0x19c))var _0x4c818d=users[_0x295425(0x19c)];else{if(_0x65764a[0x0][_0x295425(0x1c7)]==_0x295425(0x18f))var _0x4c818d=users[_0x295425(0x196)];else{if(_0x65764a[0x0][_0x295425(0x1c7)]==_0x295425(0x19d))var _0x4c818d=users[_0x295425(0x19d)];else{if(_0x65764a[0x0][_0x295425(0x1c7)]=='Arabic\x20(ae)')var _0x4c818d=users['Arabic'];}}}}}}}_0x5d395c[_0x295425(0x188)](_0x295425(0x1a2),{'success':_0x516b50[_0x295425(0x1ab)](_0x295425(0x1b8)),'errors':_0x516b50[_0x295425(0x1ab)](_0x295425(0x1c8)),'master_shop':_0x65764a,'profile':_0x14907a,'role':_0xeb0ad7,'language':_0x4c818d,'customer':_0x2ed0ac,'sales_sa':_0x487057});}catch(_0x2ff7a7){console[_0x295425(0x1cc)](_0x2ff7a7);}}),router[a0_0x8b45c(0x1a4)](a0_0x8b45c(0x1a7),auth,async(_0x4885d6,_0x3d6568)=>{var _0x1063db=a0_0x8b45c;try{const _0x5bb82a=await master_shop[_0x1063db(0x187)](),_0x174eb2=_0x4885d6[_0x1063db(0x181)],_0x12e008=await profile[_0x1063db(0x18d)]({'email':_0x174eb2[_0x1063db(0x1bf)]}),_0x1d22a1=await staff[_0x1063db(0x18d)]({'email':_0x174eb2[_0x1063db(0x1bf)],'type_of_acc_cat':'1'});let _0x18f222=[];_0x1d22a1!=null&&(_0x18f222=await sales_sa[_0x1063db(0x187)]({'sales_staff_id':_0x1d22a1['_id']}));if(_0x5bb82a[0x0][_0x1063db(0x1c7)]==_0x1063db(0x191))var _0x33278=users[_0x1063db(0x1c9)];else{if(_0x5bb82a[0x0]['language']==_0x1063db(0x18c))var _0x33278=users[_0x1063db(0x18c)];else{if(_0x5bb82a[0x0][_0x1063db(0x1c7)]==_0x1063db(0x1a0))var _0x33278=users[_0x1063db(0x1a0)];else{if(_0x5bb82a[0x0][_0x1063db(0x1c7)]==_0x1063db(0x1bb))var _0x33278=users[_0x1063db(0x1bb)];else{if(_0x5bb82a[0x0][_0x1063db(0x1c7)]==_0x1063db(0x19c))var _0x33278=users[_0x1063db(0x19c)];else{if(_0x5bb82a[0x0][_0x1063db(0x1c7)]==_0x1063db(0x18f))var _0x33278=users[_0x1063db(0x196)];else{if(_0x5bb82a[0x0][_0x1063db(0x1c7)]==_0x1063db(0x19d))var _0x33278=users[_0x1063db(0x19d)];else{if(_0x5bb82a[0x0]['language']=='Arabic\x20(ae)')var _0x33278=users[_0x1063db(0x1c4)];}}}}}}}_0x3d6568[_0x1063db(0x188)](_0x1063db(0x1c3),{'success':_0x4885d6[_0x1063db(0x1ab)](_0x1063db(0x1b8)),'errors':_0x4885d6[_0x1063db(0x1ab)](_0x1063db(0x1c8)),'master_shop':_0x5bb82a,'profile':_0x12e008,'role':_0x174eb2,'language':_0x33278,'sales_mine':_0x18f222,'staff_arr':_0x1d22a1});}catch(_0x360e62){console[_0x1063db(0x1cc)](_0x360e62);}}),router[a0_0x8b45c(0x1a4)](a0_0x8b45c(0x18e),auth,async(_0x52262e,_0x4796df)=>{var _0x13c96c=a0_0x8b45c;try{const _0x2fb803=await master_shop[_0x13c96c(0x187)](),_0x102880=_0x52262e[_0x13c96c(0x181)],_0xf01c20=await profile[_0x13c96c(0x18d)]({'email':_0x102880[_0x13c96c(0x1bf)]}),_0x1a75aa=await staff[_0x13c96c(0x18d)]({'email':_0x102880['email']}),_0x3b7ffd=await customer[_0x13c96c(0x187)]({'agent_id':_0x1a75aa[_0x13c96c(0x193)]}),_0x40c7a9=_0x52262e[_0x13c96c(0x1b0)]['id'],_0x555bd4=await sales_sa[_0x13c96c(0x184)](_0x40c7a9);if(_0x2fb803[0x0][_0x13c96c(0x1c7)]==_0x13c96c(0x191))var _0x22b2a4=users[_0x13c96c(0x1c9)];else{if(_0x2fb803[0x0]['language']==_0x13c96c(0x18c))var _0x22b2a4=users[_0x13c96c(0x18c)];else{if(_0x2fb803[0x0][_0x13c96c(0x1c7)]=='German')var _0x22b2a4=users[_0x13c96c(0x1a0)];else{if(_0x2fb803[0x0][_0x13c96c(0x1c7)]==_0x13c96c(0x1bb))var _0x22b2a4=users[_0x13c96c(0x1bb)];else{if(_0x2fb803[0x0][_0x13c96c(0x1c7)]==_0x13c96c(0x19c))var _0x22b2a4=users['French'];else{if(_0x2fb803[0x0][_0x13c96c(0x1c7)]==_0x13c96c(0x18f))var _0x22b2a4=users[_0x13c96c(0x196)];else{if(_0x2fb803[0x0][_0x13c96c(0x1c7)]==_0x13c96c(0x19d))var _0x22b2a4=users[_0x13c96c(0x19d)];else{if(_0x2fb803[0x0]['language']==_0x13c96c(0x1b2))var _0x22b2a4=users['Arabic'];}}}}}}}_0x4796df['render'](_0x13c96c(0x1a3),{'success':_0x52262e[_0x13c96c(0x1ab)]('success'),'errors':_0x52262e[_0x13c96c(0x1ab)](_0x13c96c(0x1c8)),'master_shop':_0x2fb803,'profile':_0xf01c20,'role':_0x102880,'language':_0x22b2a4,'customer':_0x3b7ffd,'sales_sa':_0x555bd4,'staff_arr':_0x1a75aa});}catch(_0x3f38b4){console[_0x13c96c(0x1cc)](_0x3f38b4);}}),router[a0_0x8b45c(0x1c2)](a0_0x8b45c(0x18e),auth,async(_0x236eaa,_0x5cc416)=>{var _0x39078f=a0_0x8b45c;try{const _0x13334a=_0x236eaa[_0x39078f(0x1b0)]['id'],_0x5aadff=await sales_sa['findById'](_0x13334a),{collection:_0x36d195,invoicemoney:_0x29af7d,collectionnumber:_0x66e70f,typeofpayment:_0x28ae17,cashdate:_0x40a3e8,id_detl:_0x35d772}=_0x236eaa['body'];if(typeof _0x35d772==_0x39078f(0x194))var _0x40bebd=[_0x236eaa[_0x39078f(0x19a)][_0x39078f(0x1ad)]],_0x107133=[_0x236eaa['body']['ewt']],_0x2ea345=[_0x236eaa[_0x39078f(0x19a)][_0x39078f(0x182)]],_0x33786d=[_0x236eaa[_0x39078f(0x19a)][_0x39078f(0x1bd)]],_0x2d476b=[_0x236eaa[_0x39078f(0x19a)][_0x39078f(0x19b)]],_0xdcf44f=[_0x236eaa[_0x39078f(0x19a)]['bo_disc']],_0x2e7b5d=[_0x236eaa[_0x39078f(0x19a)][_0x39078f(0x17f)]];else var _0x40bebd=[..._0x236eaa[_0x39078f(0x19a)]['id_detl']],_0x107133=[..._0x236eaa['body'][_0x39078f(0x1b6)]],_0x2ea345=[..._0x236eaa[_0x39078f(0x19a)][_0x39078f(0x182)]],_0x33786d=[..._0x236eaa['body'][_0x39078f(0x1bd)]],_0x2d476b=[..._0x236eaa[_0x39078f(0x19a)][_0x39078f(0x19b)]],_0xdcf44f=[..._0x236eaa[_0x39078f(0x19a)][_0x39078f(0x195)]],_0x2e7b5d=[..._0x236eaa[_0x39078f(0x19a)][_0x39078f(0x17f)]];const _0x340f4a=_0x40bebd[_0x39078f(0x1b9)](_0x3fee36=>{return _0x3fee36={'id_detl':_0x3fee36};});_0x107133[_0x39078f(0x1aa)]((_0x3573ad,_0x2c3771)=>{var _0x3498fa=_0x39078f;_0x340f4a[_0x2c3771][_0x3498fa(0x1b6)]=_0x3573ad;}),_0x2ea345['forEach']((_0x3a512d,_0x413b59)=>{var _0x4d5454=_0x39078f;_0x340f4a[_0x413b59][_0x4d5454(0x182)]=_0x3a512d;}),_0x33786d['forEach']((_0x547075,_0x4b602e)=>{var _0x384936=_0x39078f;_0x340f4a[_0x4b602e][_0x384936(0x1bd)]=_0x547075;}),_0x2d476b[_0x39078f(0x1aa)]((_0x54cda6,_0xe6d606)=>{_0x340f4a[_0xe6d606]['vol_deals']=_0x54cda6;}),_0xdcf44f[_0x39078f(0x1aa)]((_0x5e62d8,_0x332870)=>{var _0xc28cdc=_0x39078f;_0x340f4a[_0x332870][_0xc28cdc(0x195)]=_0x5e62d8;}),_0x2e7b5d[_0x39078f(0x1aa)]((_0x52c5ba,_0x2abc26)=>{_0x340f4a[_0x2abc26]['totalcollection']=_0x52c5ba;}),_0x5aadff['collection_price']=_0x36d195,_0x5aadff[_0x39078f(0x1a6)]=_0x66e70f,_0x5aadff['type_of_payment']=_0x28ae17,_0x5aadff['cash_date']=_0x40a3e8,_0x5aadff[_0x39078f(0x1c6)]=_0x39078f(0x1cf),_0x5aadff['typeofprocess']='1';const _0x588c05=await _0x5aadff[_0x39078f(0x189)]();if(_0x588c05['paid']=='True')for(let _0x927c41=0x0;_0x927c41<=_0x340f4a[_0x39078f(0x186)]-0x1;_0x927c41++){const _0x273a92=_0x340f4a[_0x927c41],_0x3c02b6=mongoose[_0x39078f(0x1d1)]['ObjectId'];console[_0x39078f(0x1cc)](_0x273a92);const _0x211d40=await sales_sa[_0x39078f(0x1cb)]({'_id':_0x3c02b6(_0x13334a[_0x39078f(0x1ca)]()),'sale_product._id':_0x3c02b6(_0x273a92['id_detl']['valueOf']())},{'$set':{'sale_product.$.ewt':_0x273a92[_0x39078f(0x1b6)],'sale_product.$.spwp':_0x273a92['spwp'],'sale_product.$.fin_disc':_0x273a92['fin_disc'],'sale_product.$.vol_deals':_0x273a92[_0x39078f(0x19b)],'sale_product.$.bo_disc':_0x273a92['bo_disc'],'sale_product.$.totalprice':parseFloat(_0x273a92['totalcollection'])}});}_0x236eaa[_0x39078f(0x1ab)]('success',_0x39078f(0x1d2)),_0x5cc416[_0x39078f(0x1bc)](_0x39078f(0x1d0)+_0x13334a);}catch(_0x56fd4c){console[_0x39078f(0x1cc)](_0x56fd4c);}}),router[a0_0x8b45c(0x1a4)](a0_0x8b45c(0x18b),auth,async(_0x64b4f1,_0x3831d1)=>{var _0x1ccd3c=a0_0x8b45c;try{const _0x36ad9a=await master_shop[_0x1ccd3c(0x187)](),_0x40b062=_0x64b4f1[_0x1ccd3c(0x181)],_0x3f8fb2=await profile[_0x1ccd3c(0x18d)]({'email':_0x40b062[_0x1ccd3c(0x1bf)]}),_0xe8573f=await staff[_0x1ccd3c(0x18d)]({'email':_0x40b062[_0x1ccd3c(0x1bf)],'type_of_acc_cat':'1'});let _0x482f97=[];_0xe8573f!=null&&(_0x482f97=await sales_order[_0x1ccd3c(0x187)]({'sales_staff_id':_0xe8573f[_0x1ccd3c(0x193)]}));if(_0x36ad9a[0x0]['language']==_0x1ccd3c(0x191))var _0x3721e5=users['English'];else{if(_0x36ad9a[0x0][_0x1ccd3c(0x1c7)]==_0x1ccd3c(0x18c))var _0x3721e5=users[_0x1ccd3c(0x18c)];else{if(_0x36ad9a[0x0]['language']==_0x1ccd3c(0x1a0))var _0x3721e5=users[_0x1ccd3c(0x1a0)];else{if(_0x36ad9a[0x0][_0x1ccd3c(0x1c7)]==_0x1ccd3c(0x1bb))var _0x3721e5=users[_0x1ccd3c(0x1bb)];else{if(_0x36ad9a[0x0][_0x1ccd3c(0x1c7)]==_0x1ccd3c(0x19c))var _0x3721e5=users[_0x1ccd3c(0x19c)];else{if(_0x36ad9a[0x0][_0x1ccd3c(0x1c7)]==_0x1ccd3c(0x18f))var _0x3721e5=users[_0x1ccd3c(0x196)];else{if(_0x36ad9a[0x0][_0x1ccd3c(0x1c7)]==_0x1ccd3c(0x19d))var _0x3721e5=users[_0x1ccd3c(0x19d)];else{if(_0x36ad9a[0x0]['language']==_0x1ccd3c(0x1b2))var _0x3721e5=users[_0x1ccd3c(0x1c4)];}}}}}}}_0x3831d1[_0x1ccd3c(0x188)](_0x1ccd3c(0x1b5),{'success':_0x64b4f1[_0x1ccd3c(0x1ab)](_0x1ccd3c(0x1b8)),'errors':_0x64b4f1[_0x1ccd3c(0x1ab)](_0x1ccd3c(0x1c8)),'master_shop':_0x36ad9a,'profile':_0x3f8fb2,'role':_0x40b062,'language':_0x3721e5,'sales_mine':_0x482f97,'staff_arr':_0xe8573f});}catch(_0xbcb374){console['log'](_0xbcb374);}}),router['get']('/view_so_xt/:id',auth,async(_0x1a68a8,_0x3336be)=>{var _0x23fc4d=a0_0x8b45c;try{const _0x36c6af=await master_shop[_0x23fc4d(0x187)](),_0x58700d=_0x1a68a8['user'],_0x5577ef=await profile[_0x23fc4d(0x18d)]({'email':_0x58700d['email']}),_0x23c46b=await staff['findOne']({'email':_0x58700d[_0x23fc4d(0x1bf)]}),_0x619ca5=await customer[_0x23fc4d(0x187)]({'agent_id':_0x23c46b[_0x23fc4d(0x193)]}),_0x4702ee=_0x1a68a8['params']['id'],_0x1bbaa4=await sales_order[_0x23fc4d(0x184)](_0x4702ee);if(_0x36c6af[0x0][_0x23fc4d(0x1c7)]=='English\x20(US)')var _0x26df87=users['English'];else{if(_0x36c6af[0x0][_0x23fc4d(0x1c7)]==_0x23fc4d(0x18c))var _0x26df87=users[_0x23fc4d(0x18c)];else{if(_0x36c6af[0x0][_0x23fc4d(0x1c7)]=='German')var _0x26df87=users[_0x23fc4d(0x1a0)];else{if(_0x36c6af[0x0][_0x23fc4d(0x1c7)]==_0x23fc4d(0x1bb))var _0x26df87=users['Spanish'];else{if(_0x36c6af[0x0][_0x23fc4d(0x1c7)]=='French')var _0x26df87=users[_0x23fc4d(0x19c)];else{if(_0x36c6af[0x0][_0x23fc4d(0x1c7)]==_0x23fc4d(0x18f))var _0x26df87=users['Portuguese'];else{if(_0x36c6af[0x0][_0x23fc4d(0x1c7)]=='Chinese')var _0x26df87=users[_0x23fc4d(0x19d)];else{if(_0x36c6af[0x0]['language']=='Arabic\x20(ae)')var _0x26df87=users[_0x23fc4d(0x1c4)];}}}}}}}_0x3336be[_0x23fc4d(0x188)](_0x23fc4d(0x1af),{'success':_0x1a68a8[_0x23fc4d(0x1ab)](_0x23fc4d(0x1b8)),'errors':_0x1a68a8[_0x23fc4d(0x1ab)](_0x23fc4d(0x1c8)),'master_shop':_0x36c6af,'profile':_0x5577ef,'role':_0x58700d,'language':_0x26df87,'customer':_0x619ca5,'sales_sa':_0x1bbaa4,'staff_arr':_0x23c46b});}catch(_0x25583d){console['log'](_0x25583d);}}),router[a0_0x8b45c(0x1c2)](a0_0x8b45c(0x192),auth,async(_0xd60ada,_0x108f9b)=>{var _0x63dc68=a0_0x8b45c;try{const _0xf0e6ec=_0xd60ada[_0x63dc68(0x1b0)]['id'],_0x50e7b8=await sales_order[_0x63dc68(0x184)](_0xf0e6ec),{collection:_0x45833a,invoicemoney:_0x5b9ab8,collectionnumber:_0x2292b7,typeofpayment:_0x1cb793,cashdate:_0x5620db,id_detl:_0xde7053}=_0xd60ada[_0x63dc68(0x19a)];_0x50e7b8['collection_price']=_0x45833a,_0x50e7b8[_0x63dc68(0x1a9)]=_0x1cb793,_0x50e7b8[_0x63dc68(0x17d)]=_0x5620db,_0x50e7b8[_0x63dc68(0x1c6)]=_0x63dc68(0x1cf),_0x50e7b8[_0x63dc68(0x1b3)]='1';const _0x222784=await _0x50e7b8[_0x63dc68(0x189)]();_0xd60ada[_0x63dc68(0x1ab)](_0x63dc68(0x1b8),_0x63dc68(0x1d2)),_0x108f9b['redirect'](_0x63dc68(0x17c)+_0xf0e6ec);}catch(_0x1e31d9){console[_0x63dc68(0x1cc)](_0x1e31d9);}}),module[a0_0x8b45c(0x17e)]=router;function a0_0x53d4(_0x470e80,_0x2df729){var _0x4c56ac=a0_0x4c56();return a0_0x53d4=function(_0x53d45c,_0x423a50){_0x53d45c=_0x53d45c-0x17b;var _0x3bbd29=_0x4c56ac[_0x53d45c];return _0x3bbd29;},a0_0x53d4(_0x470e80,_0x2df729);}function a0_0x4c56(){var _0x3a773a=['params','mongoose','Arabic\x20(ae)','typeofprocess','/view/:id','collection_so_xt','ewt','/view_sox/:id','success','map','8dzXdWk','Spanish','redirect','fin_disc','2280492YoEvZe','email','../models/all_models','../middleware/auth','post','collection_xt','Arabic','exceljs','paid','language','errors','English','valueOf','updateOne','log','3031399rybAau','../public/language/languages.json','True','/collection/view/','Types','Collection\x20Update\x20successfully','34598RKKtDK','/collection/view_so_xt/','cash_date','exports','totalNewPrice','3586707UjMEot','user','spwp','multer','findById','collection','length','find','render','save','/x_so','/so_x','Hindi','findOne','/view_xt/:id','Portuguese\x20(BR)','view_collections','English\x20(US)','/view_so_xt/:id','_id','string','bo_disc','Portuguese','1671561ooMNgS','2090ddlpAB','xlsx','body','vol_deals','French','Chinese','totalcollection','ObjectId','German','collection_sox','view_collections_sox','view_collections_xt','get','2824928basJfQ','collectionnumber','/view_x','Router','type_of_payment','forEach','flash','/view','id_detl','5092YQZVbm','view_collections_so_xt'];a0_0x4c56=function(){return _0x3a773a;};return a0_0x4c56();}