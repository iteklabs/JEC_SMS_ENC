function a0_0x3ba1(_0x2b62e3,_0x52bfab){var _0x42ab8f=a0_0x42ab();return a0_0x3ba1=function(_0x3ba1eb,_0x6f6d67){_0x3ba1eb=_0x3ba1eb-0x16b;var _0x154f2c=_0x42ab8f[_0x3ba1eb];return _0x154f2c;},a0_0x3ba1(_0x2b62e3,_0x52bfab);}var a0_0x10b5c5=a0_0x3ba1;(function(_0x280e3c,_0x299131){var _0x5ef812=a0_0x3ba1,_0x2b8609=_0x280e3c();while(!![]){try{var _0x511830=-parseInt(_0x5ef812(0x173))/0x1+parseInt(_0x5ef812(0x1b0))/0x2*(-parseInt(_0x5ef812(0x19d))/0x3)+parseInt(_0x5ef812(0x189))/0x4+-parseInt(_0x5ef812(0x1ba))/0x5*(-parseInt(_0x5ef812(0x184))/0x6)+-parseInt(_0x5ef812(0x1a7))/0x7+-parseInt(_0x5ef812(0x1aa))/0x8*(parseInt(_0x5ef812(0x16d))/0x9)+-parseInt(_0x5ef812(0x1bd))/0xa*(-parseInt(_0x5ef812(0x1a5))/0xb);if(_0x511830===_0x299131)break;else _0x2b8609['push'](_0x2b8609['shift']());}catch(_0x4583f5){_0x2b8609['push'](_0x2b8609['shift']());}}}(a0_0x42ab,0xa51aa));const express=require('express'),app=express(),router=express[a0_0x10b5c5(0x17e)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x10b5c5(0x18a)),auth=require(a0_0x10b5c5(0x17b)),users=require(a0_0x10b5c5(0x18d)),excelJS=require(a0_0x10b5c5(0x178)),xlsx=require(a0_0x10b5c5(0x194)),multer=require(a0_0x10b5c5(0x199)),mongoose=require(a0_0x10b5c5(0x1a6));router['get'](a0_0x10b5c5(0x1bc),auth,async(_0xe5f158,_0x57f026)=>{var _0x38c7a9=a0_0x10b5c5;try{const _0x5284a1=await master_shop[_0x38c7a9(0x18c)](),_0x537b12=_0xe5f158['user'],_0x2d2ad1=await profile[_0x38c7a9(0x19b)]({'email':_0x537b12['email']}),_0x54b561=await staff[_0x38c7a9(0x19b)]({'email':_0x537b12[_0x38c7a9(0x19c)],'type_of_acc_cat':'2'});let _0x588a61=[];_0x54b561!=null&&(_0x588a61=await sales_order['find']({'sales_staff_id':_0x54b561[_0x38c7a9(0x1af)]}));if(_0x5284a1[0x0][_0x38c7a9(0x192)]=='English\x20(US)')var _0x34a490=users[_0x38c7a9(0x170)];else{if(_0x5284a1[0x0][_0x38c7a9(0x192)]==_0x38c7a9(0x1ac))var _0x34a490=users[_0x38c7a9(0x1ac)];else{if(_0x5284a1[0x0]['language']==_0x38c7a9(0x19a))var _0x34a490=users['German'];else{if(_0x5284a1[0x0][_0x38c7a9(0x192)]==_0x38c7a9(0x176))var _0x34a490=users[_0x38c7a9(0x176)];else{if(_0x5284a1[0x0]['language']=='French')var _0x34a490=users[_0x38c7a9(0x1b5)];else{if(_0x5284a1[0x0][_0x38c7a9(0x192)]==_0x38c7a9(0x190))var _0x34a490=users['Portuguese'];else{if(_0x5284a1[0x0]['language']==_0x38c7a9(0x193))var _0x34a490=users[_0x38c7a9(0x193)];else{if(_0x5284a1[0x0][_0x38c7a9(0x192)]==_0x38c7a9(0x172))var _0x34a490=users['Arabic'];}}}}}}}_0x57f026[_0x38c7a9(0x16c)](_0x38c7a9(0x1b9),{'success':_0xe5f158[_0x38c7a9(0x16f)](_0x38c7a9(0x17c)),'errors':_0xe5f158[_0x38c7a9(0x16f)](_0x38c7a9(0x185)),'master_shop':_0x5284a1,'profile':_0x2d2ad1,'role':_0x537b12,'language':_0x34a490,'sales_mine':_0x588a61,'staff_arr':_0x54b561});}catch(_0x274808){console[_0x38c7a9(0x17d)](_0x274808);}}),router[a0_0x10b5c5(0x1be)]('/view/:id',auth,async(_0x431ff6,_0x2ddb5f)=>{var _0x53f85f=a0_0x10b5c5;try{const _0x35cec5=await master_shop[_0x53f85f(0x18c)](),_0x5d4b75=_0x431ff6[_0x53f85f(0x195)],_0x464f56=await profile[_0x53f85f(0x19b)]({'email':_0x5d4b75[_0x53f85f(0x19c)]}),_0x3a4dc3=await staff[_0x53f85f(0x19b)]({'email':_0x5d4b75[_0x53f85f(0x19c)]}),_0x48f022=await customer['find']({'agent_id':_0x3a4dc3['_id']}),_0x357839=_0x431ff6['params']['id'],_0x15921f=await sales_sa[_0x53f85f(0x175)](_0x357839);if(_0x35cec5[0x0]['language']==_0x53f85f(0x1a3))var _0x408a03=users['English'];else{if(_0x35cec5[0x0][_0x53f85f(0x192)]==_0x53f85f(0x1ac))var _0x408a03=users[_0x53f85f(0x1ac)];else{if(_0x35cec5[0x0][_0x53f85f(0x192)]=='German')var _0x408a03=users['German'];else{if(_0x35cec5[0x0][_0x53f85f(0x192)]==_0x53f85f(0x176))var _0x408a03=users[_0x53f85f(0x176)];else{if(_0x35cec5[0x0][_0x53f85f(0x192)]=='French')var _0x408a03=users[_0x53f85f(0x1b5)];else{if(_0x35cec5[0x0][_0x53f85f(0x192)]==_0x53f85f(0x190))var _0x408a03=users[_0x53f85f(0x1a4)];else{if(_0x35cec5[0x0]['language']==_0x53f85f(0x193))var _0x408a03=users[_0x53f85f(0x193)];else{if(_0x35cec5[0x0][_0x53f85f(0x192)]==_0x53f85f(0x172))var _0x408a03=users[_0x53f85f(0x1a1)];}}}}}}}_0x2ddb5f[_0x53f85f(0x16c)](_0x53f85f(0x1a0),{'success':_0x431ff6[_0x53f85f(0x16f)](_0x53f85f(0x17c)),'errors':_0x431ff6[_0x53f85f(0x16f)](_0x53f85f(0x185)),'master_shop':_0x35cec5,'profile':_0x464f56,'role':_0x5d4b75,'language':_0x408a03,'customer':_0x48f022,'sales_sa':_0x15921f,'staff_arr':_0x3a4dc3});}catch(_0x2cb7f8){console[_0x53f85f(0x17d)](_0x2cb7f8);}}),router['post'](a0_0x10b5c5(0x197),auth,async(_0x45a3cd,_0x484fd6)=>{var _0x4e4d2c=a0_0x10b5c5;try{const _0x3ffd71=_0x45a3cd[_0x4e4d2c(0x1b1)]['id'],_0xb7b9e=await sales_sa[_0x4e4d2c(0x175)](_0x3ffd71),{collection:_0x470459,invoicemoney:_0x48343c,collectionnumber:_0x35ca9b,typeofpayment:_0x323e52,cashdate:_0x35d10a,id_detl:_0x6bbd73}=_0x45a3cd[_0x4e4d2c(0x188)];_0x484fd6[_0x4e4d2c(0x1b4)](_0xb7b9e);return;if(typeof _0x6bbd73=='string')var _0x183b4c=[_0x45a3cd[_0x4e4d2c(0x188)][_0x4e4d2c(0x19f)]],_0x1237a4=[_0x45a3cd[_0x4e4d2c(0x188)]['ewt']],_0x104fab=[_0x45a3cd['body'][_0x4e4d2c(0x171)]],_0x29dc52=[_0x45a3cd[_0x4e4d2c(0x188)][_0x4e4d2c(0x18b)]],_0x53aaf4=[_0x45a3cd[_0x4e4d2c(0x188)][_0x4e4d2c(0x1b6)]],_0x4890f4=[_0x45a3cd[_0x4e4d2c(0x188)][_0x4e4d2c(0x183)]],_0x2bea80=[_0x45a3cd['body']['totalNewPrice']];else var _0x183b4c=[..._0x45a3cd[_0x4e4d2c(0x188)][_0x4e4d2c(0x19f)]],_0x1237a4=[..._0x45a3cd['body']['ewt']],_0x104fab=[..._0x45a3cd['body'][_0x4e4d2c(0x171)]],_0x29dc52=[..._0x45a3cd[_0x4e4d2c(0x188)][_0x4e4d2c(0x18b)]],_0x53aaf4=[..._0x45a3cd[_0x4e4d2c(0x188)][_0x4e4d2c(0x1b6)]],_0x4890f4=[..._0x45a3cd[_0x4e4d2c(0x188)][_0x4e4d2c(0x183)]],_0x2bea80=[..._0x45a3cd[_0x4e4d2c(0x188)][_0x4e4d2c(0x1bf)]];const _0x28ca74=_0x183b4c['map'](_0x1dcc31=>{return _0x1dcc31={'id_detl':_0x1dcc31};});_0x1237a4[_0x4e4d2c(0x1ad)]((_0x56a896,_0x20cb98)=>{var _0xdd5df7=_0x4e4d2c;_0x28ca74[_0x20cb98][_0xdd5df7(0x1b7)]=_0x56a896;}),_0x104fab[_0x4e4d2c(0x1ad)]((_0x521d9a,_0x10c651)=>{_0x28ca74[_0x10c651]['spwp']=_0x521d9a;}),_0x29dc52[_0x4e4d2c(0x1ad)]((_0xe979eb,_0xbf0a60)=>{var _0x28bed=_0x4e4d2c;_0x28ca74[_0xbf0a60][_0x28bed(0x18b)]=_0xe979eb;}),_0x53aaf4['forEach']((_0x25128d,_0x344a33)=>{var _0x104cd9=_0x4e4d2c;_0x28ca74[_0x344a33][_0x104cd9(0x1b6)]=_0x25128d;}),_0x4890f4[_0x4e4d2c(0x1ad)]((_0x1e7a45,_0x3ffca8)=>{var _0x52aed7=_0x4e4d2c;_0x28ca74[_0x3ffca8][_0x52aed7(0x183)]=_0x1e7a45;}),_0x2bea80[_0x4e4d2c(0x1ad)]((_0x5c45d6,_0x383490)=>{var _0x1762bd=_0x4e4d2c;_0x28ca74[_0x383490][_0x1762bd(0x182)]=_0x5c45d6;}),_0xb7b9e[_0x4e4d2c(0x186)]=_0x470459,_0xb7b9e[_0x4e4d2c(0x16e)]=_0x35ca9b,_0xb7b9e['type_of_payment']=_0x323e52,_0xb7b9e[_0x4e4d2c(0x1bb)]=_0x35d10a,_0xb7b9e['paid']='True';const _0x31ad3a=await _0xb7b9e[_0x4e4d2c(0x174)]();if(_0x31ad3a[_0x4e4d2c(0x1a8)]==_0x4e4d2c(0x181))for(let _0x505172=0x0;_0x505172<=_0x28ca74[_0x4e4d2c(0x1c0)]-0x1;_0x505172++){const _0x4953e0=_0x28ca74[_0x505172],_0x5f1eec=mongoose[_0x4e4d2c(0x180)][_0x4e4d2c(0x1b2)];console[_0x4e4d2c(0x17d)](_0x4953e0);const _0x4fd9be=await sales_sa[_0x4e4d2c(0x198)]({'_id':_0x5f1eec(_0x3ffd71[_0x4e4d2c(0x177)]()),'sale_product._id':_0x5f1eec(_0x4953e0[_0x4e4d2c(0x19f)][_0x4e4d2c(0x177)]())},{'$set':{'sale_product.$.ewt':_0x4953e0['ewt'],'sale_product.$.spwp':_0x4953e0[_0x4e4d2c(0x171)],'sale_product.$.fin_disc':_0x4953e0[_0x4e4d2c(0x18b)],'sale_product.$.vol_deals':_0x4953e0[_0x4e4d2c(0x1b6)],'sale_product.$.bo_disc':_0x4953e0[_0x4e4d2c(0x183)],'sale_product.$.totalprice':parseFloat(_0x4953e0['totalcollection'])}});}_0x45a3cd[_0x4e4d2c(0x16f)]('success',_0x4e4d2c(0x17a)),_0x484fd6[_0x4e4d2c(0x16b)](_0x4e4d2c(0x1c1)+_0x3ffd71);}catch(_0x4abca7){console[_0x4e4d2c(0x17d)](_0x4abca7);}}),router['get'](a0_0x10b5c5(0x1b8),auth,async(_0x30bb44,_0x5c6855)=>{var _0xa5b4ca=a0_0x10b5c5;try{const _0xa10f9c=await master_shop[_0xa5b4ca(0x18c)](),_0x4001fd=_0x30bb44[_0xa5b4ca(0x195)],_0x1717c5=await profile[_0xa5b4ca(0x19b)]({'email':_0x4001fd[_0xa5b4ca(0x19c)]}),_0x45ad7d=await staff[_0xa5b4ca(0x19b)]({'email':_0x4001fd[_0xa5b4ca(0x19c)],'type_of_acc_cat':'2'});let _0x13fda2=[];_0x45ad7d!=null&&(_0x13fda2=await sales_order[_0xa5b4ca(0x18c)]({'sales_staff_id':_0x45ad7d[_0xa5b4ca(0x1af)]}));console[_0xa5b4ca(0x17d)](_0x13fda2);if(_0xa10f9c[0x0][_0xa5b4ca(0x192)]=='English\x20(US)')var _0x3aafbe=users[_0xa5b4ca(0x170)];else{if(_0xa10f9c[0x0]['language']==_0xa5b4ca(0x1ac))var _0x3aafbe=users[_0xa5b4ca(0x1ac)];else{if(_0xa10f9c[0x0]['language']==_0xa5b4ca(0x19a))var _0x3aafbe=users['German'];else{if(_0xa10f9c[0x0][_0xa5b4ca(0x192)]==_0xa5b4ca(0x176))var _0x3aafbe=users[_0xa5b4ca(0x176)];else{if(_0xa10f9c[0x0][_0xa5b4ca(0x192)]==_0xa5b4ca(0x1b5))var _0x3aafbe=users['French'];else{if(_0xa10f9c[0x0][_0xa5b4ca(0x192)]=='Portuguese\x20(BR)')var _0x3aafbe=users['Portuguese'];else{if(_0xa10f9c[0x0][_0xa5b4ca(0x192)]==_0xa5b4ca(0x193))var _0x3aafbe=users[_0xa5b4ca(0x193)];else{if(_0xa10f9c[0x0][_0xa5b4ca(0x192)]==_0xa5b4ca(0x172))var _0x3aafbe=users['Arabic'];}}}}}}}_0x5c6855['render'](_0xa5b4ca(0x187),{'success':_0x30bb44[_0xa5b4ca(0x16f)](_0xa5b4ca(0x17c)),'errors':_0x30bb44[_0xa5b4ca(0x16f)]('errors'),'master_shop':_0xa10f9c,'profile':_0x1717c5,'role':_0x4001fd,'language':_0x3aafbe,'sales_mine':_0x13fda2,'staff_arr':_0x45ad7d});}catch(_0x3c377e){console[_0xa5b4ca(0x17d)](_0x3c377e);}}),router[a0_0x10b5c5(0x1be)](a0_0x10b5c5(0x17f),auth,async(_0x5034ac,_0x49e759)=>{var _0x28ff67=a0_0x10b5c5;try{const _0x52ebb7=await master_shop['find'](),_0x1a3f31=_0x5034ac[_0x28ff67(0x195)],_0x98166=await profile[_0x28ff67(0x19b)]({'email':_0x1a3f31[_0x28ff67(0x19c)]}),_0x279313=await staff[_0x28ff67(0x19b)]({'email':_0x1a3f31['email']}),_0xec10c5=await customer[_0x28ff67(0x18c)]({'agent_id':_0x279313[_0x28ff67(0x1af)]}),_0x4bd832=_0x5034ac[_0x28ff67(0x1b1)]['id'],_0x46e345=await sales_order['findById'](_0x4bd832);if(_0x52ebb7[0x0]['language']=='English\x20(US)')var _0x2d423a=users['English'];else{if(_0x52ebb7[0x0][_0x28ff67(0x192)]==_0x28ff67(0x1ac))var _0x2d423a=users[_0x28ff67(0x1ac)];else{if(_0x52ebb7[0x0][_0x28ff67(0x192)]==_0x28ff67(0x19a))var _0x2d423a=users[_0x28ff67(0x19a)];else{if(_0x52ebb7[0x0]['language']=='Spanish')var _0x2d423a=users[_0x28ff67(0x176)];else{if(_0x52ebb7[0x0][_0x28ff67(0x192)]==_0x28ff67(0x1b5))var _0x2d423a=users[_0x28ff67(0x1b5)];else{if(_0x52ebb7[0x0][_0x28ff67(0x192)]=='Portuguese\x20(BR)')var _0x2d423a=users[_0x28ff67(0x1a4)];else{if(_0x52ebb7[0x0]['language']=='Chinese')var _0x2d423a=users['Chinese'];else{if(_0x52ebb7[0x0][_0x28ff67(0x192)]==_0x28ff67(0x172))var _0x2d423a=users[_0x28ff67(0x1a1)];}}}}}}}_0x49e759[_0x28ff67(0x16c)](_0x28ff67(0x18f),{'success':_0x5034ac[_0x28ff67(0x16f)](_0x28ff67(0x17c)),'errors':_0x5034ac[_0x28ff67(0x16f)]('errors'),'master_shop':_0x52ebb7,'profile':_0x98166,'role':_0x1a3f31,'language':_0x2d423a,'customer':_0xec10c5,'sales_sa':_0x46e345});}catch(_0x1af52e){console[_0x28ff67(0x17d)](_0x1af52e);}}),router[a0_0x10b5c5(0x1be)]('/view_x',auth,async(_0x39ef82,_0x45f059)=>{var _0x5b2ee5=a0_0x10b5c5;try{const _0x10f5c5=await master_shop[_0x5b2ee5(0x18c)](),_0x572340=_0x39ef82[_0x5b2ee5(0x195)],_0x41e9a3=await profile[_0x5b2ee5(0x19b)]({'email':_0x572340[_0x5b2ee5(0x19c)]}),_0x24c349=await staff[_0x5b2ee5(0x19b)]({'email':_0x572340['email'],'type_of_acc_cat':'1'});let _0x3093fb=[];_0x24c349!=null&&(_0x3093fb=await sales_sa[_0x5b2ee5(0x18c)]({'sales_staff_id':_0x24c349['_id']}));if(_0x10f5c5[0x0][_0x5b2ee5(0x192)]==_0x5b2ee5(0x1a3))var _0x2e8d17=users[_0x5b2ee5(0x170)];else{if(_0x10f5c5[0x0][_0x5b2ee5(0x192)]==_0x5b2ee5(0x1ac))var _0x2e8d17=users[_0x5b2ee5(0x1ac)];else{if(_0x10f5c5[0x0][_0x5b2ee5(0x192)]==_0x5b2ee5(0x19a))var _0x2e8d17=users[_0x5b2ee5(0x19a)];else{if(_0x10f5c5[0x0]['language']==_0x5b2ee5(0x176))var _0x2e8d17=users[_0x5b2ee5(0x176)];else{if(_0x10f5c5[0x0][_0x5b2ee5(0x192)]==_0x5b2ee5(0x1b5))var _0x2e8d17=users[_0x5b2ee5(0x1b5)];else{if(_0x10f5c5[0x0][_0x5b2ee5(0x192)]=='Portuguese\x20(BR)')var _0x2e8d17=users['Portuguese'];else{if(_0x10f5c5[0x0][_0x5b2ee5(0x192)]==_0x5b2ee5(0x193))var _0x2e8d17=users['Chinese'];else{if(_0x10f5c5[0x0][_0x5b2ee5(0x192)]==_0x5b2ee5(0x172))var _0x2e8d17=users[_0x5b2ee5(0x1a1)];}}}}}}}_0x45f059['render']('collection_xt',{'success':_0x39ef82[_0x5b2ee5(0x16f)](_0x5b2ee5(0x17c)),'errors':_0x39ef82[_0x5b2ee5(0x16f)](_0x5b2ee5(0x185)),'master_shop':_0x10f5c5,'profile':_0x41e9a3,'role':_0x572340,'language':_0x2e8d17,'sales_mine':_0x3093fb,'staff_arr':_0x24c349});}catch(_0x3aaebb){console['log'](_0x3aaebb);}}),router[a0_0x10b5c5(0x1be)](a0_0x10b5c5(0x19e),auth,async(_0x23893b,_0x291246)=>{var _0x3502de=a0_0x10b5c5;try{const _0x230529=await master_shop[_0x3502de(0x18c)](),_0x191c9e=_0x23893b[_0x3502de(0x195)],_0x10c532=await profile[_0x3502de(0x19b)]({'email':_0x191c9e[_0x3502de(0x19c)]}),_0x4a36a8=await staff[_0x3502de(0x19b)]({'email':_0x191c9e[_0x3502de(0x19c)]}),_0x1a82db=await customer[_0x3502de(0x18c)]({'agent_id':_0x4a36a8[_0x3502de(0x1af)]}),_0x1eb5c6=_0x23893b[_0x3502de(0x1b1)]['id'],_0x11c7d3=await sales_sa['findById'](_0x1eb5c6);if(_0x230529[0x0]['language']==_0x3502de(0x1a3))var _0x3dbda0=users[_0x3502de(0x170)];else{if(_0x230529[0x0][_0x3502de(0x192)]==_0x3502de(0x1ac))var _0x3dbda0=users[_0x3502de(0x1ac)];else{if(_0x230529[0x0][_0x3502de(0x192)]==_0x3502de(0x19a))var _0x3dbda0=users[_0x3502de(0x19a)];else{if(_0x230529[0x0][_0x3502de(0x192)]==_0x3502de(0x176))var _0x3dbda0=users['Spanish'];else{if(_0x230529[0x0]['language']==_0x3502de(0x1b5))var _0x3dbda0=users[_0x3502de(0x1b5)];else{if(_0x230529[0x0][_0x3502de(0x192)]==_0x3502de(0x190))var _0x3dbda0=users[_0x3502de(0x1a4)];else{if(_0x230529[0x0][_0x3502de(0x192)]==_0x3502de(0x193))var _0x3dbda0=users[_0x3502de(0x193)];else{if(_0x230529[0x0][_0x3502de(0x192)]==_0x3502de(0x172))var _0x3dbda0=users[_0x3502de(0x1a1)];}}}}}}}_0x291246[_0x3502de(0x16c)](_0x3502de(0x1ae),{'success':_0x23893b[_0x3502de(0x16f)](_0x3502de(0x17c)),'errors':_0x23893b['flash'](_0x3502de(0x185)),'master_shop':_0x230529,'profile':_0x10c532,'role':_0x191c9e,'language':_0x3dbda0,'customer':_0x1a82db,'sales_sa':_0x11c7d3,'staff_arr':_0x4a36a8});}catch(_0x152534){console[_0x3502de(0x17d)](_0x152534);}}),router[a0_0x10b5c5(0x18e)](a0_0x10b5c5(0x19e),auth,async(_0x1eb9c7,_0x3ee76c)=>{var _0xfddfb5=a0_0x10b5c5;try{const _0x3e83f1=_0x1eb9c7[_0xfddfb5(0x1b1)]['id'],_0x5d0ddd=await sales_sa[_0xfddfb5(0x175)](_0x3e83f1),{collection:_0x152e29,invoicemoney:_0x54ab04,collectionnumber:_0x128406,typeofpayment:_0x1b5a1d,cashdate:_0x2da318,id_detl:_0x2c0c56}=_0x1eb9c7['body'];if(typeof _0x2c0c56=='string')var _0x1dbad9=[_0x1eb9c7[_0xfddfb5(0x188)][_0xfddfb5(0x19f)]],_0x1a03c4=[_0x1eb9c7['body'][_0xfddfb5(0x1b7)]],_0x2b4c18=[_0x1eb9c7[_0xfddfb5(0x188)][_0xfddfb5(0x171)]],_0x1851f9=[_0x1eb9c7['body'][_0xfddfb5(0x18b)]],_0x32feb1=[_0x1eb9c7[_0xfddfb5(0x188)][_0xfddfb5(0x1b6)]],_0x4c950b=[_0x1eb9c7[_0xfddfb5(0x188)][_0xfddfb5(0x183)]],_0x16161f=[_0x1eb9c7[_0xfddfb5(0x188)][_0xfddfb5(0x1bf)]];else var _0x1dbad9=[..._0x1eb9c7[_0xfddfb5(0x188)][_0xfddfb5(0x19f)]],_0x1a03c4=[..._0x1eb9c7[_0xfddfb5(0x188)][_0xfddfb5(0x1b7)]],_0x2b4c18=[..._0x1eb9c7['body'][_0xfddfb5(0x171)]],_0x1851f9=[..._0x1eb9c7[_0xfddfb5(0x188)][_0xfddfb5(0x18b)]],_0x32feb1=[..._0x1eb9c7[_0xfddfb5(0x188)][_0xfddfb5(0x1b6)]],_0x4c950b=[..._0x1eb9c7['body'][_0xfddfb5(0x183)]],_0x16161f=[..._0x1eb9c7[_0xfddfb5(0x188)][_0xfddfb5(0x1bf)]];const _0x124340=_0x1dbad9[_0xfddfb5(0x1a2)](_0x3a48a4=>{return _0x3a48a4={'id_detl':_0x3a48a4};});_0x1a03c4[_0xfddfb5(0x1ad)]((_0x2ccc9f,_0x756c9a)=>{var _0x3ff3cc=_0xfddfb5;_0x124340[_0x756c9a][_0x3ff3cc(0x1b7)]=_0x2ccc9f;}),_0x2b4c18[_0xfddfb5(0x1ad)]((_0x5b05a3,_0x58eefc)=>{var _0x7eb6d1=_0xfddfb5;_0x124340[_0x58eefc][_0x7eb6d1(0x171)]=_0x5b05a3;}),_0x1851f9[_0xfddfb5(0x1ad)]((_0x3a2d0c,_0x105dc2)=>{_0x124340[_0x105dc2]['fin_disc']=_0x3a2d0c;}),_0x32feb1[_0xfddfb5(0x1ad)]((_0x2ad496,_0x23a801)=>{var _0x49857c=_0xfddfb5;_0x124340[_0x23a801][_0x49857c(0x1b6)]=_0x2ad496;}),_0x4c950b[_0xfddfb5(0x1ad)]((_0x274363,_0x21b9af)=>{var _0xe98514=_0xfddfb5;_0x124340[_0x21b9af][_0xe98514(0x183)]=_0x274363;}),_0x16161f[_0xfddfb5(0x1ad)]((_0x40c45b,_0x2eb722)=>{_0x124340[_0x2eb722]['totalcollection']=_0x40c45b;}),_0x5d0ddd[_0xfddfb5(0x186)]=_0x152e29,_0x5d0ddd[_0xfddfb5(0x16e)]=_0x128406,_0x5d0ddd['type_of_payment']=_0x1b5a1d,_0x5d0ddd[_0xfddfb5(0x1bb)]=_0x2da318,_0x5d0ddd[_0xfddfb5(0x1a8)]=_0xfddfb5(0x181),_0x5d0ddd['typeofprocess']='1';const _0x59b6fd=await _0x5d0ddd[_0xfddfb5(0x174)]();if(_0x59b6fd[_0xfddfb5(0x1a8)]==_0xfddfb5(0x181))for(let _0x53458e=0x0;_0x53458e<=_0x124340[_0xfddfb5(0x1c0)]-0x1;_0x53458e++){const _0x4904ae=_0x124340[_0x53458e],_0x2ee925=mongoose[_0xfddfb5(0x180)]['ObjectId'];console[_0xfddfb5(0x17d)](_0x4904ae);const _0x35c67d=await sales_sa['updateOne']({'_id':_0x2ee925(_0x3e83f1[_0xfddfb5(0x177)]()),'sale_product._id':_0x2ee925(_0x4904ae[_0xfddfb5(0x19f)][_0xfddfb5(0x177)]())},{'$set':{'sale_product.$.ewt':_0x4904ae[_0xfddfb5(0x1b7)],'sale_product.$.spwp':_0x4904ae[_0xfddfb5(0x171)],'sale_product.$.fin_disc':_0x4904ae[_0xfddfb5(0x18b)],'sale_product.$.vol_deals':_0x4904ae[_0xfddfb5(0x1b6)],'sale_product.$.bo_disc':_0x4904ae[_0xfddfb5(0x183)],'sale_product.$.totalprice':parseFloat(_0x4904ae['totalcollection'])}});}_0x1eb9c7[_0xfddfb5(0x16f)](_0xfddfb5(0x17c),_0xfddfb5(0x17a)),_0x3ee76c[_0xfddfb5(0x16b)](_0xfddfb5(0x1c1)+_0x3e83f1);}catch(_0x24ac08){console[_0xfddfb5(0x17d)](_0x24ac08);}}),router[a0_0x10b5c5(0x1be)](a0_0x10b5c5(0x191),auth,async(_0x55d83b,_0x117498)=>{var _0x10e715=a0_0x10b5c5;try{const _0x1554d2=await master_shop['find'](),_0x57fad1=_0x55d83b[_0x10e715(0x195)],_0x314864=await profile['findOne']({'email':_0x57fad1[_0x10e715(0x19c)]}),_0x340236=await staff[_0x10e715(0x19b)]({'email':_0x57fad1[_0x10e715(0x19c)],'type_of_acc_cat':'1'});let _0x55279e=[];_0x340236!=null&&(_0x55279e=await sales_order[_0x10e715(0x18c)]({'sales_staff_id':_0x340236[_0x10e715(0x1af)]}));if(_0x1554d2[0x0][_0x10e715(0x192)]==_0x10e715(0x1a3))var _0x3a394f=users[_0x10e715(0x170)];else{if(_0x1554d2[0x0][_0x10e715(0x192)]==_0x10e715(0x1ac))var _0x3a394f=users[_0x10e715(0x1ac)];else{if(_0x1554d2[0x0][_0x10e715(0x192)]==_0x10e715(0x19a))var _0x3a394f=users[_0x10e715(0x19a)];else{if(_0x1554d2[0x0][_0x10e715(0x192)]==_0x10e715(0x176))var _0x3a394f=users[_0x10e715(0x176)];else{if(_0x1554d2[0x0][_0x10e715(0x192)]==_0x10e715(0x1b5))var _0x3a394f=users['French'];else{if(_0x1554d2[0x0][_0x10e715(0x192)]==_0x10e715(0x190))var _0x3a394f=users[_0x10e715(0x1a4)];else{if(_0x1554d2[0x0][_0x10e715(0x192)]==_0x10e715(0x193))var _0x3a394f=users[_0x10e715(0x193)];else{if(_0x1554d2[0x0][_0x10e715(0x192)]==_0x10e715(0x172))var _0x3a394f=users['Arabic'];}}}}}}}_0x117498[_0x10e715(0x16c)]('collection_so_xt',{'success':_0x55d83b[_0x10e715(0x16f)](_0x10e715(0x17c)),'errors':_0x55d83b[_0x10e715(0x16f)]('errors'),'master_shop':_0x1554d2,'profile':_0x314864,'role':_0x57fad1,'language':_0x3a394f,'sales_mine':_0x55279e,'staff_arr':_0x340236});}catch(_0x4844bc){console[_0x10e715(0x17d)](_0x4844bc);}}),router[a0_0x10b5c5(0x1be)](a0_0x10b5c5(0x1ab),auth,async(_0x27ca72,_0xdcc033)=>{var _0x4f8120=a0_0x10b5c5;try{const _0x63522a=await master_shop[_0x4f8120(0x18c)](),_0x63ab5d=_0x27ca72[_0x4f8120(0x195)],_0x418b05=await profile[_0x4f8120(0x19b)]({'email':_0x63ab5d['email']}),_0x6668ee=await staff[_0x4f8120(0x19b)]({'email':_0x63ab5d['email']}),_0x1357c6=await customer['find']({'agent_id':_0x6668ee[_0x4f8120(0x1af)]}),_0x437f36=_0x27ca72[_0x4f8120(0x1b1)]['id'],_0xbaac69=await sales_order['findById'](_0x437f36);if(_0x63522a[0x0][_0x4f8120(0x192)]==_0x4f8120(0x1a3))var _0x159fc3=users[_0x4f8120(0x170)];else{if(_0x63522a[0x0][_0x4f8120(0x192)]==_0x4f8120(0x1ac))var _0x159fc3=users[_0x4f8120(0x1ac)];else{if(_0x63522a[0x0]['language']==_0x4f8120(0x19a))var _0x159fc3=users[_0x4f8120(0x19a)];else{if(_0x63522a[0x0][_0x4f8120(0x192)]=='Spanish')var _0x159fc3=users['Spanish'];else{if(_0x63522a[0x0]['language']=='French')var _0x159fc3=users['French'];else{if(_0x63522a[0x0][_0x4f8120(0x192)]==_0x4f8120(0x190))var _0x159fc3=users['Portuguese'];else{if(_0x63522a[0x0][_0x4f8120(0x192)]==_0x4f8120(0x193))var _0x159fc3=users[_0x4f8120(0x193)];else{if(_0x63522a[0x0]['language']==_0x4f8120(0x172))var _0x159fc3=users[_0x4f8120(0x1a1)];}}}}}}}_0xdcc033['render'](_0x4f8120(0x1a9),{'success':_0x27ca72[_0x4f8120(0x16f)](_0x4f8120(0x17c)),'errors':_0x27ca72[_0x4f8120(0x16f)](_0x4f8120(0x185)),'master_shop':_0x63522a,'profile':_0x418b05,'role':_0x63ab5d,'language':_0x159fc3,'customer':_0x1357c6,'sales_sa':_0xbaac69,'staff_arr':_0x6668ee});}catch(_0xb13e1f){console[_0x4f8120(0x17d)](_0xb13e1f);}}),router['post'](a0_0x10b5c5(0x1ab),auth,async(_0x274b09,_0xc9a4e6)=>{var _0x5a1c6c=a0_0x10b5c5;try{const _0x503b5a=_0x274b09['params']['id'],_0x2cd129=await sales_order[_0x5a1c6c(0x175)](_0x503b5a),{collection:_0x4a7d5f,invoicemoney:_0x288db2,collectionnumber:_0x22584c,typeofpayment:_0x166d1a,cashdate:_0x2c356c,id_detl:_0x5c31d2}=_0x274b09['body'];_0x2cd129[_0x5a1c6c(0x186)]=_0x4a7d5f,_0x2cd129[_0x5a1c6c(0x179)]=_0x166d1a,_0x2cd129['cash_date']=_0x2c356c,_0x2cd129[_0x5a1c6c(0x1a8)]='True',_0x2cd129['typeofprocess']='1';const _0x120d31=await _0x2cd129['save']();_0x274b09[_0x5a1c6c(0x16f)](_0x5a1c6c(0x17c),_0x5a1c6c(0x17a)),_0xc9a4e6[_0x5a1c6c(0x16b)](_0x5a1c6c(0x1b3)+_0x503b5a);}catch(_0x56bd0d){console[_0x5a1c6c(0x17d)](_0x56bd0d);}}),module[a0_0x10b5c5(0x196)]=router;function a0_0x42ab(){var _0x1a28f6=['collection','124050tYOzGs','cash_date','/view','540QMmgAN','get','totalNewPrice','length','/collection/view/','redirect','render','2043ImBToc','collectionnumber','flash','English','spwp','Arabic\x20(ae)','729563zMDUzP','save','findById','Spanish','valueOf','exceljs','type_of_payment','Collection\x20Update\x20successfully','../middleware/auth','success','log','Router','/view_sox/:id','Types','True','totalcollection','bo_disc','24RCyEOG','errors','collection_price','collection_sox','body','4700148itZsaj','../models/all_models','fin_disc','find','../public/language/languages.json','post','view_collections_sox','Portuguese\x20(BR)','/so_x','language','Chinese','xlsx','user','exports','/view/:id','updateOne','multer','German','findOne','email','87774MpcuYR','/view_xt/:id','id_detl','view_collections','Arabic','map','English\x20(US)','Portuguese','689304qasRYo','mongoose','9333394GrGCZV','paid','view_collections_so_xt','44944JBACKm','/view_so_xt/:id','Hindi','forEach','view_collections_xt','_id','44YYxCns','params','ObjectId','/collection/view_so_xt/','json','French','vol_deals','ewt','/x_so'];a0_0x42ab=function(){return _0x1a28f6;};return a0_0x42ab();}