var a0_0x34d34c=a0_0x2054;function a0_0xf52b(){var _0xbe7a6a=['Router','mongoose','collection','10920488dyUyIV','multer','typeofprocess','get','render','True','/view/:id','paid','log','exceljs','/x_so','658246BZTGbJ','/view_x','map','6ZsSYtL','702913PlpHFj','Arabic','type_of_payment','id_detl','errors','post','English','German','5266596RJTxlV','view_collections_xt','English\x20(US)','/so_x','1740822hVTfuy','updateOne','Portuguese\x20(BR)','Types','/view_xt/:id','Hindi','Portuguese','save','ObjectId','length','totalcollection','collection_so_xt','params','view_collections','findOne','body','9013221iXvLrS','redirect','findById','_id','collection_xt','collection_price','totalNewPrice','../middleware/auth','spwp','/view','Collection\x20Update\x20successfully','/view_so_xt/:id','forEach','ewt','valueOf','2143130QqgTbi','string','vol_deals','find','flash','/collection/view_so_xt/','user','French','email','fin_disc','success','9NjidRK','language','Spanish','/view_sox/:id','exports','cash_date','Chinese','collectionnumber','/collection/view/','json','Arabic\x20(ae)','bo_disc','../models/all_models','view_collections_sox'];a0_0xf52b=function(){return _0xbe7a6a;};return a0_0xf52b();}(function(_0x36cc4e,_0x10e523){var _0x3ab6b7=a0_0x2054,_0x1061ab=_0x36cc4e();while(!![]){try{var _0x694273=-parseInt(_0x3ab6b7(0x205))/0x1+parseInt(_0x3ab6b7(0x201))/0x2*(-parseInt(_0x3ab6b7(0x204))/0x3)+-parseInt(_0x3ab6b7(0x20d))/0x4+parseInt(_0x3ab6b7(0x1da))/0x5+parseInt(_0x3ab6b7(0x211))/0x6+parseInt(_0x3ab6b7(0x1cb))/0x7+parseInt(_0x3ab6b7(0x1f6))/0x8*(parseInt(_0x3ab6b7(0x1e5))/0x9);if(_0x694273===_0x10e523)break;else _0x1061ab['push'](_0x1061ab['shift']());}catch(_0x3b1b7e){_0x1061ab['push'](_0x1061ab['shift']());}}}(a0_0xf52b,0xa9573));const express=require('express'),app=express(),router=express[a0_0x34d34c(0x1f3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x34d34c(0x1f1)),auth=require(a0_0x34d34c(0x1d2)),users=require('../public/language/languages.json'),excelJS=require(a0_0x34d34c(0x1ff)),xlsx=require('xlsx'),multer=require(a0_0x34d34c(0x1f7)),mongoose=require(a0_0x34d34c(0x1f4));function a0_0x2054(_0x237959,_0x1a90be){var _0xf52b08=a0_0xf52b();return a0_0x2054=function(_0x2054b1,_0x5caa27){_0x2054b1=_0x2054b1-0x1c3;var _0x3c4b63=_0xf52b08[_0x2054b1];return _0x3c4b63;},a0_0x2054(_0x237959,_0x1a90be);}router[a0_0x34d34c(0x1f9)](a0_0x34d34c(0x1d4),auth,async(_0x1cbaa1,_0x5736cd)=>{var _0x1083ab=a0_0x34d34c;try{const _0xd1e006=await master_shop[_0x1083ab(0x1dd)](),_0x37b253=_0x1cbaa1[_0x1083ab(0x1e0)],_0x1e066f=await profile[_0x1083ab(0x1c9)]({'email':_0x37b253[_0x1083ab(0x1e2)]}),_0x4d2203=await staff[_0x1083ab(0x1c9)]({'email':_0x37b253['email'],'type_of_acc_cat':'2'});let _0x5bd3cc=[];_0x4d2203!=null&&(_0x5bd3cc=await sales_order[_0x1083ab(0x1dd)]({'sales_staff_id':_0x4d2203[_0x1083ab(0x1ce)]}));if(_0xd1e006[0x0][_0x1083ab(0x1e6)]==_0x1083ab(0x20f))var _0x439cc6=users[_0x1083ab(0x20b)];else{if(_0xd1e006[0x0][_0x1083ab(0x1e6)]==_0x1083ab(0x216))var _0x439cc6=users[_0x1083ab(0x216)];else{if(_0xd1e006[0x0][_0x1083ab(0x1e6)]==_0x1083ab(0x20c))var _0x439cc6=users[_0x1083ab(0x20c)];else{if(_0xd1e006[0x0][_0x1083ab(0x1e6)]==_0x1083ab(0x1e7))var _0x439cc6=users[_0x1083ab(0x1e7)];else{if(_0xd1e006[0x0][_0x1083ab(0x1e6)]==_0x1083ab(0x1e1))var _0x439cc6=users[_0x1083ab(0x1e1)];else{if(_0xd1e006[0x0][_0x1083ab(0x1e6)]==_0x1083ab(0x213))var _0x439cc6=users['Portuguese'];else{if(_0xd1e006[0x0][_0x1083ab(0x1e6)]==_0x1083ab(0x1eb))var _0x439cc6=users[_0x1083ab(0x1eb)];else{if(_0xd1e006[0x0][_0x1083ab(0x1e6)]=='Arabic\x20(ae)')var _0x439cc6=users[_0x1083ab(0x206)];}}}}}}}_0x5736cd[_0x1083ab(0x1fa)](_0x1083ab(0x1f5),{'success':_0x1cbaa1[_0x1083ab(0x1de)]('success'),'errors':_0x1cbaa1['flash'](_0x1083ab(0x209)),'master_shop':_0xd1e006,'profile':_0x1e066f,'role':_0x37b253,'language':_0x439cc6,'sales_mine':_0x5bd3cc,'staff_arr':_0x4d2203});}catch(_0x2a14c7){console[_0x1083ab(0x1fe)](_0x2a14c7);}}),router[a0_0x34d34c(0x1f9)](a0_0x34d34c(0x1fc),auth,async(_0x14e57c,_0x48737e)=>{var _0x418afe=a0_0x34d34c;try{const _0x42f46b=await master_shop['find'](),_0x4d5480=_0x14e57c['user'],_0x416ec5=await profile[_0x418afe(0x1c9)]({'email':_0x4d5480[_0x418afe(0x1e2)]}),_0x2bb1a1=await staff[_0x418afe(0x1c9)]({'email':_0x4d5480['email']}),_0x1643c3=await customer['find']({'agent_id':_0x2bb1a1['_id']}),_0x36ce86=_0x14e57c[_0x418afe(0x1c7)]['id'],_0x1d2a4a=await sales_sa[_0x418afe(0x1cd)](_0x36ce86);if(_0x42f46b[0x0][_0x418afe(0x1e6)]==_0x418afe(0x20f))var _0x565a3d=users[_0x418afe(0x20b)];else{if(_0x42f46b[0x0][_0x418afe(0x1e6)]==_0x418afe(0x216))var _0x565a3d=users[_0x418afe(0x216)];else{if(_0x42f46b[0x0][_0x418afe(0x1e6)]=='German')var _0x565a3d=users['German'];else{if(_0x42f46b[0x0][_0x418afe(0x1e6)]==_0x418afe(0x1e7))var _0x565a3d=users[_0x418afe(0x1e7)];else{if(_0x42f46b[0x0][_0x418afe(0x1e6)]==_0x418afe(0x1e1))var _0x565a3d=users[_0x418afe(0x1e1)];else{if(_0x42f46b[0x0]['language']=='Portuguese\x20(BR)')var _0x565a3d=users[_0x418afe(0x217)];else{if(_0x42f46b[0x0]['language']==_0x418afe(0x1eb))var _0x565a3d=users[_0x418afe(0x1eb)];else{if(_0x42f46b[0x0][_0x418afe(0x1e6)]==_0x418afe(0x1ef))var _0x565a3d=users[_0x418afe(0x206)];}}}}}}}_0x48737e['render'](_0x418afe(0x1c8),{'success':_0x14e57c['flash'](_0x418afe(0x1e4)),'errors':_0x14e57c[_0x418afe(0x1de)]('errors'),'master_shop':_0x42f46b,'profile':_0x416ec5,'role':_0x4d5480,'language':_0x565a3d,'customer':_0x1643c3,'sales_sa':_0x1d2a4a,'staff_arr':_0x2bb1a1});}catch(_0x41327b){console[_0x418afe(0x1fe)](_0x41327b);}}),router['post'](a0_0x34d34c(0x1fc),auth,async(_0xd9ffb9,_0x1cab1d)=>{var _0x591c6f=a0_0x34d34c;try{const _0x22a3d3=_0xd9ffb9[_0x591c6f(0x1c7)]['id'],_0x457e6c=await sales_sa['findById'](_0x22a3d3),{collection:_0x5a5c1b,invoicemoney:_0x4ab7c7,collectionnumber:_0xd8b402,typeofpayment:_0x2c6b71,cashdate:_0x43960d,id_detl:_0x2f34ab}=_0xd9ffb9[_0x591c6f(0x1ca)];_0x1cab1d[_0x591c6f(0x1ee)](_0x457e6c);return;if(typeof _0x2f34ab==_0x591c6f(0x1db))var _0x16dfa7=[_0xd9ffb9[_0x591c6f(0x1ca)][_0x591c6f(0x208)]],_0x19fab1=[_0xd9ffb9[_0x591c6f(0x1ca)]['ewt']],_0x21ca2d=[_0xd9ffb9[_0x591c6f(0x1ca)]['spwp']],_0x40a8af=[_0xd9ffb9[_0x591c6f(0x1ca)][_0x591c6f(0x1e3)]],_0x5de9bb=[_0xd9ffb9[_0x591c6f(0x1ca)]['vol_deals']],_0x483ddf=[_0xd9ffb9[_0x591c6f(0x1ca)]['bo_disc']],_0xc9df5e=[_0xd9ffb9[_0x591c6f(0x1ca)][_0x591c6f(0x1d1)]];else var _0x16dfa7=[..._0xd9ffb9[_0x591c6f(0x1ca)]['id_detl']],_0x19fab1=[..._0xd9ffb9['body'][_0x591c6f(0x1d8)]],_0x21ca2d=[..._0xd9ffb9[_0x591c6f(0x1ca)][_0x591c6f(0x1d3)]],_0x40a8af=[..._0xd9ffb9[_0x591c6f(0x1ca)]['fin_disc']],_0x5de9bb=[..._0xd9ffb9['body'][_0x591c6f(0x1dc)]],_0x483ddf=[..._0xd9ffb9['body']['bo_disc']],_0xc9df5e=[..._0xd9ffb9[_0x591c6f(0x1ca)][_0x591c6f(0x1d1)]];const _0x4201fb=_0x16dfa7[_0x591c6f(0x203)](_0x52e803=>{return _0x52e803={'id_detl':_0x52e803};});_0x19fab1[_0x591c6f(0x1d7)]((_0x46b898,_0x5d1fc8)=>{_0x4201fb[_0x5d1fc8]['ewt']=_0x46b898;}),_0x21ca2d[_0x591c6f(0x1d7)]((_0x31bd17,_0x4a9c8e)=>{_0x4201fb[_0x4a9c8e]['spwp']=_0x31bd17;}),_0x40a8af['forEach']((_0x12e74d,_0x4ee695)=>{var _0x32d405=_0x591c6f;_0x4201fb[_0x4ee695][_0x32d405(0x1e3)]=_0x12e74d;}),_0x5de9bb[_0x591c6f(0x1d7)]((_0x1e687e,_0x2d7ae1)=>{var _0x43d831=_0x591c6f;_0x4201fb[_0x2d7ae1][_0x43d831(0x1dc)]=_0x1e687e;}),_0x483ddf['forEach']((_0x304fcc,_0x52cbf4)=>{var _0xa12475=_0x591c6f;_0x4201fb[_0x52cbf4][_0xa12475(0x1f0)]=_0x304fcc;}),_0xc9df5e[_0x591c6f(0x1d7)]((_0x1b9c1d,_0x5017fd)=>{var _0x146a44=_0x591c6f;_0x4201fb[_0x5017fd][_0x146a44(0x1c5)]=_0x1b9c1d;}),_0x457e6c[_0x591c6f(0x1d0)]=_0x5a5c1b,_0x457e6c[_0x591c6f(0x1ec)]=_0xd8b402,_0x457e6c[_0x591c6f(0x207)]=_0x2c6b71,_0x457e6c[_0x591c6f(0x1ea)]=_0x43960d,_0x457e6c[_0x591c6f(0x1fd)]=_0x591c6f(0x1fb);const _0x508fe4=await _0x457e6c[_0x591c6f(0x218)]();if(_0x508fe4[_0x591c6f(0x1fd)]=='True')for(let _0x1b6adc=0x0;_0x1b6adc<=_0x4201fb[_0x591c6f(0x1c4)]-0x1;_0x1b6adc++){const _0x3bf41d=_0x4201fb[_0x1b6adc],_0x1ce877=mongoose[_0x591c6f(0x214)][_0x591c6f(0x1c3)];console[_0x591c6f(0x1fe)](_0x3bf41d);const _0x4a05a0=await sales_sa[_0x591c6f(0x212)]({'_id':_0x1ce877(_0x22a3d3[_0x591c6f(0x1d9)]()),'sale_product._id':_0x1ce877(_0x3bf41d[_0x591c6f(0x208)][_0x591c6f(0x1d9)]())},{'$set':{'sale_product.$.ewt':_0x3bf41d[_0x591c6f(0x1d8)],'sale_product.$.spwp':_0x3bf41d[_0x591c6f(0x1d3)],'sale_product.$.fin_disc':_0x3bf41d['fin_disc'],'sale_product.$.vol_deals':_0x3bf41d['vol_deals'],'sale_product.$.bo_disc':_0x3bf41d['bo_disc'],'sale_product.$.totalprice':parseFloat(_0x3bf41d['totalcollection'])}});}_0xd9ffb9['flash'](_0x591c6f(0x1e4),_0x591c6f(0x1d5)),_0x1cab1d[_0x591c6f(0x1cc)](_0x591c6f(0x1ed)+_0x22a3d3);}catch(_0x30b048){console[_0x591c6f(0x1fe)](_0x30b048);}}),router[a0_0x34d34c(0x1f9)](a0_0x34d34c(0x200),auth,async(_0x5f5298,_0xcfe11e)=>{var _0x27036b=a0_0x34d34c;try{const _0xf560f4=await master_shop[_0x27036b(0x1dd)](),_0x294777=_0x5f5298['user'],_0x23a70b=await profile[_0x27036b(0x1c9)]({'email':_0x294777[_0x27036b(0x1e2)]}),_0xcd126=await staff[_0x27036b(0x1c9)]({'email':_0x294777[_0x27036b(0x1e2)],'type_of_acc_cat':'2'});let _0x2c3c84=[];_0xcd126!=null&&(_0x2c3c84=await sales_order[_0x27036b(0x1dd)]({'sales_staff_id':_0xcd126[_0x27036b(0x1ce)]}));console[_0x27036b(0x1fe)](_0x2c3c84);if(_0xf560f4[0x0][_0x27036b(0x1e6)]==_0x27036b(0x20f))var _0x5de04a=users['English'];else{if(_0xf560f4[0x0]['language']==_0x27036b(0x216))var _0x5de04a=users[_0x27036b(0x216)];else{if(_0xf560f4[0x0]['language']=='German')var _0x5de04a=users['German'];else{if(_0xf560f4[0x0][_0x27036b(0x1e6)]==_0x27036b(0x1e7))var _0x5de04a=users[_0x27036b(0x1e7)];else{if(_0xf560f4[0x0][_0x27036b(0x1e6)]=='French')var _0x5de04a=users[_0x27036b(0x1e1)];else{if(_0xf560f4[0x0][_0x27036b(0x1e6)]==_0x27036b(0x213))var _0x5de04a=users[_0x27036b(0x217)];else{if(_0xf560f4[0x0][_0x27036b(0x1e6)]==_0x27036b(0x1eb))var _0x5de04a=users[_0x27036b(0x1eb)];else{if(_0xf560f4[0x0]['language']==_0x27036b(0x1ef))var _0x5de04a=users['Arabic'];}}}}}}}_0xcfe11e[_0x27036b(0x1fa)]('collection_sox',{'success':_0x5f5298['flash']('success'),'errors':_0x5f5298[_0x27036b(0x1de)](_0x27036b(0x209)),'master_shop':_0xf560f4,'profile':_0x23a70b,'role':_0x294777,'language':_0x5de04a,'sales_mine':_0x2c3c84,'staff_arr':_0xcd126});}catch(_0x5ee796){console[_0x27036b(0x1fe)](_0x5ee796);}}),router[a0_0x34d34c(0x1f9)](a0_0x34d34c(0x1e8),auth,async(_0x59559f,_0x263213)=>{var _0x2ee973=a0_0x34d34c;try{const _0x1acf0a=await master_shop[_0x2ee973(0x1dd)](),_0x4e9092=_0x59559f[_0x2ee973(0x1e0)],_0xda619d=await profile[_0x2ee973(0x1c9)]({'email':_0x4e9092['email']}),_0x1d97f0=await staff['findOne']({'email':_0x4e9092[_0x2ee973(0x1e2)]}),_0x182dd7=await customer[_0x2ee973(0x1dd)]({'agent_id':_0x1d97f0[_0x2ee973(0x1ce)]}),_0x264f75=_0x59559f[_0x2ee973(0x1c7)]['id'],_0x461763=await sales_order[_0x2ee973(0x1cd)](_0x264f75);if(_0x1acf0a[0x0][_0x2ee973(0x1e6)]==_0x2ee973(0x20f))var _0x2af4ac=users['English'];else{if(_0x1acf0a[0x0][_0x2ee973(0x1e6)]=='Hindi')var _0x2af4ac=users[_0x2ee973(0x216)];else{if(_0x1acf0a[0x0][_0x2ee973(0x1e6)]==_0x2ee973(0x20c))var _0x2af4ac=users['German'];else{if(_0x1acf0a[0x0]['language']==_0x2ee973(0x1e7))var _0x2af4ac=users[_0x2ee973(0x1e7)];else{if(_0x1acf0a[0x0]['language']==_0x2ee973(0x1e1))var _0x2af4ac=users[_0x2ee973(0x1e1)];else{if(_0x1acf0a[0x0][_0x2ee973(0x1e6)]=='Portuguese\x20(BR)')var _0x2af4ac=users[_0x2ee973(0x217)];else{if(_0x1acf0a[0x0][_0x2ee973(0x1e6)]=='Chinese')var _0x2af4ac=users[_0x2ee973(0x1eb)];else{if(_0x1acf0a[0x0][_0x2ee973(0x1e6)]=='Arabic\x20(ae)')var _0x2af4ac=users['Arabic'];}}}}}}}_0x263213[_0x2ee973(0x1fa)](_0x2ee973(0x1f2),{'success':_0x59559f[_0x2ee973(0x1de)](_0x2ee973(0x1e4)),'errors':_0x59559f['flash'](_0x2ee973(0x209)),'master_shop':_0x1acf0a,'profile':_0xda619d,'role':_0x4e9092,'language':_0x2af4ac,'customer':_0x182dd7,'sales_sa':_0x461763});}catch(_0x1527be){console['log'](_0x1527be);}}),router[a0_0x34d34c(0x1f9)](a0_0x34d34c(0x202),auth,async(_0x3c3bb8,_0xa05b3e)=>{var _0x135999=a0_0x34d34c;try{const _0x17a411=await master_shop[_0x135999(0x1dd)](),_0x9e8a07=_0x3c3bb8['user'],_0x268960=await profile[_0x135999(0x1c9)]({'email':_0x9e8a07[_0x135999(0x1e2)]}),_0x3f0a67=await staff[_0x135999(0x1c9)]({'email':_0x9e8a07['email'],'type_of_acc_cat':'1'});let _0x3f29f8=[];_0x3f0a67!=null&&(_0x3f29f8=await sales_sa[_0x135999(0x1dd)]({'sales_staff_id':_0x3f0a67[_0x135999(0x1ce)]}));if(_0x17a411[0x0][_0x135999(0x1e6)]=='English\x20(US)')var _0x1140c7=users[_0x135999(0x20b)];else{if(_0x17a411[0x0]['language']==_0x135999(0x216))var _0x1140c7=users[_0x135999(0x216)];else{if(_0x17a411[0x0][_0x135999(0x1e6)]==_0x135999(0x20c))var _0x1140c7=users['German'];else{if(_0x17a411[0x0][_0x135999(0x1e6)]==_0x135999(0x1e7))var _0x1140c7=users[_0x135999(0x1e7)];else{if(_0x17a411[0x0][_0x135999(0x1e6)]==_0x135999(0x1e1))var _0x1140c7=users[_0x135999(0x1e1)];else{if(_0x17a411[0x0][_0x135999(0x1e6)]==_0x135999(0x213))var _0x1140c7=users['Portuguese'];else{if(_0x17a411[0x0]['language']==_0x135999(0x1eb))var _0x1140c7=users[_0x135999(0x1eb)];else{if(_0x17a411[0x0][_0x135999(0x1e6)]=='Arabic\x20(ae)')var _0x1140c7=users[_0x135999(0x206)];}}}}}}}_0xa05b3e[_0x135999(0x1fa)](_0x135999(0x1cf),{'success':_0x3c3bb8[_0x135999(0x1de)](_0x135999(0x1e4)),'errors':_0x3c3bb8[_0x135999(0x1de)](_0x135999(0x209)),'master_shop':_0x17a411,'profile':_0x268960,'role':_0x9e8a07,'language':_0x1140c7,'sales_mine':_0x3f29f8,'staff_arr':_0x3f0a67});}catch(_0x377f97){console[_0x135999(0x1fe)](_0x377f97);}}),router[a0_0x34d34c(0x1f9)](a0_0x34d34c(0x215),auth,async(_0x677578,_0xc4532e)=>{var _0x2558b6=a0_0x34d34c;try{const _0x6cfd78=await master_shop[_0x2558b6(0x1dd)](),_0xb6d7a0=_0x677578['user'],_0xb2872e=await profile[_0x2558b6(0x1c9)]({'email':_0xb6d7a0[_0x2558b6(0x1e2)]}),_0x1f5583=await staff[_0x2558b6(0x1c9)]({'email':_0xb6d7a0['email']}),_0x15e64f=await customer['find']({'agent_id':_0x1f5583[_0x2558b6(0x1ce)]}),_0xa5b619=_0x677578['params']['id'],_0x29ad0e=await sales_sa[_0x2558b6(0x1cd)](_0xa5b619);if(_0x6cfd78[0x0][_0x2558b6(0x1e6)]=='English\x20(US)')var _0x587a08=users[_0x2558b6(0x20b)];else{if(_0x6cfd78[0x0][_0x2558b6(0x1e6)]==_0x2558b6(0x216))var _0x587a08=users[_0x2558b6(0x216)];else{if(_0x6cfd78[0x0]['language']=='German')var _0x587a08=users[_0x2558b6(0x20c)];else{if(_0x6cfd78[0x0][_0x2558b6(0x1e6)]==_0x2558b6(0x1e7))var _0x587a08=users[_0x2558b6(0x1e7)];else{if(_0x6cfd78[0x0]['language']==_0x2558b6(0x1e1))var _0x587a08=users[_0x2558b6(0x1e1)];else{if(_0x6cfd78[0x0][_0x2558b6(0x1e6)]=='Portuguese\x20(BR)')var _0x587a08=users[_0x2558b6(0x217)];else{if(_0x6cfd78[0x0][_0x2558b6(0x1e6)]==_0x2558b6(0x1eb))var _0x587a08=users[_0x2558b6(0x1eb)];else{if(_0x6cfd78[0x0][_0x2558b6(0x1e6)]==_0x2558b6(0x1ef))var _0x587a08=users[_0x2558b6(0x206)];}}}}}}}_0xc4532e[_0x2558b6(0x1fa)](_0x2558b6(0x20e),{'success':_0x677578['flash'](_0x2558b6(0x1e4)),'errors':_0x677578['flash'](_0x2558b6(0x209)),'master_shop':_0x6cfd78,'profile':_0xb2872e,'role':_0xb6d7a0,'language':_0x587a08,'customer':_0x15e64f,'sales_sa':_0x29ad0e,'staff_arr':_0x1f5583});}catch(_0x39aa3c){console[_0x2558b6(0x1fe)](_0x39aa3c);}}),router[a0_0x34d34c(0x20a)](a0_0x34d34c(0x215),auth,async(_0x3feb9d,_0x51d125)=>{var _0x157775=a0_0x34d34c;try{const _0x18e948=_0x3feb9d[_0x157775(0x1c7)]['id'],_0x469fbf=await sales_sa[_0x157775(0x1cd)](_0x18e948),{collection:_0xe1fcc5,invoicemoney:_0x3b41c5,collectionnumber:_0x5b1f72,typeofpayment:_0x32f868,cashdate:_0x529d22,id_detl:_0x9d4c61}=_0x3feb9d['body'];if(typeof _0x9d4c61==_0x157775(0x1db))var _0x194167=[_0x3feb9d[_0x157775(0x1ca)]['id_detl']],_0x1d68e2=[_0x3feb9d[_0x157775(0x1ca)]['ewt']],_0x5ce5ac=[_0x3feb9d[_0x157775(0x1ca)]['spwp']],_0x3d2f67=[_0x3feb9d['body'][_0x157775(0x1e3)]],_0x741da2=[_0x3feb9d[_0x157775(0x1ca)][_0x157775(0x1dc)]],_0xa09438=[_0x3feb9d[_0x157775(0x1ca)][_0x157775(0x1f0)]],_0x3c5e7c=[_0x3feb9d[_0x157775(0x1ca)]['totalNewPrice']];else var _0x194167=[..._0x3feb9d[_0x157775(0x1ca)]['id_detl']],_0x1d68e2=[..._0x3feb9d[_0x157775(0x1ca)][_0x157775(0x1d8)]],_0x5ce5ac=[..._0x3feb9d[_0x157775(0x1ca)][_0x157775(0x1d3)]],_0x3d2f67=[..._0x3feb9d[_0x157775(0x1ca)][_0x157775(0x1e3)]],_0x741da2=[..._0x3feb9d[_0x157775(0x1ca)][_0x157775(0x1dc)]],_0xa09438=[..._0x3feb9d[_0x157775(0x1ca)][_0x157775(0x1f0)]],_0x3c5e7c=[..._0x3feb9d['body'][_0x157775(0x1d1)]];const _0x42b4f2=_0x194167[_0x157775(0x203)](_0xf03f7e=>{return _0xf03f7e={'id_detl':_0xf03f7e};});_0x1d68e2[_0x157775(0x1d7)]((_0x2d1637,_0xee4494)=>{var _0x4bdc02=_0x157775;_0x42b4f2[_0xee4494][_0x4bdc02(0x1d8)]=_0x2d1637;}),_0x5ce5ac[_0x157775(0x1d7)]((_0xd59de5,_0xb8a855)=>{var _0xe9afee=_0x157775;_0x42b4f2[_0xb8a855][_0xe9afee(0x1d3)]=_0xd59de5;}),_0x3d2f67[_0x157775(0x1d7)]((_0x37d1f1,_0x444fe8)=>{_0x42b4f2[_0x444fe8]['fin_disc']=_0x37d1f1;}),_0x741da2[_0x157775(0x1d7)]((_0x10bb87,_0x4b11d6)=>{_0x42b4f2[_0x4b11d6]['vol_deals']=_0x10bb87;}),_0xa09438['forEach']((_0x4c813a,_0x4a1d5e)=>{var _0x391902=_0x157775;_0x42b4f2[_0x4a1d5e][_0x391902(0x1f0)]=_0x4c813a;}),_0x3c5e7c[_0x157775(0x1d7)]((_0x31194c,_0x49175d)=>{var _0x337925=_0x157775;_0x42b4f2[_0x49175d][_0x337925(0x1c5)]=_0x31194c;}),_0x469fbf['collection_price']=_0xe1fcc5,_0x469fbf[_0x157775(0x1ec)]=_0x5b1f72,_0x469fbf[_0x157775(0x207)]=_0x32f868,_0x469fbf[_0x157775(0x1ea)]=_0x529d22,_0x469fbf[_0x157775(0x1fd)]=_0x157775(0x1fb),_0x469fbf[_0x157775(0x1f8)]='1';const _0x2abdde=await _0x469fbf[_0x157775(0x218)]();if(_0x2abdde[_0x157775(0x1fd)]==_0x157775(0x1fb))for(let _0x2c778e=0x0;_0x2c778e<=_0x42b4f2[_0x157775(0x1c4)]-0x1;_0x2c778e++){const _0x140197=_0x42b4f2[_0x2c778e],_0x57f0bb=mongoose[_0x157775(0x214)][_0x157775(0x1c3)];console['log'](_0x140197);const _0xaa937d=await sales_sa[_0x157775(0x212)]({'_id':_0x57f0bb(_0x18e948[_0x157775(0x1d9)]()),'sale_product._id':_0x57f0bb(_0x140197[_0x157775(0x208)][_0x157775(0x1d9)]())},{'$set':{'sale_product.$.ewt':_0x140197['ewt'],'sale_product.$.spwp':_0x140197['spwp'],'sale_product.$.fin_disc':_0x140197[_0x157775(0x1e3)],'sale_product.$.vol_deals':_0x140197[_0x157775(0x1dc)],'sale_product.$.bo_disc':_0x140197[_0x157775(0x1f0)],'sale_product.$.totalprice':parseFloat(_0x140197[_0x157775(0x1c5)])}});}_0x3feb9d[_0x157775(0x1de)]('success',_0x157775(0x1d5)),_0x51d125[_0x157775(0x1cc)](_0x157775(0x1ed)+_0x18e948);}catch(_0x433716){console['log'](_0x433716);}}),router[a0_0x34d34c(0x1f9)](a0_0x34d34c(0x210),auth,async(_0x2aa241,_0x2b6455)=>{var _0xb4b17=a0_0x34d34c;try{const _0xe16d1d=await master_shop[_0xb4b17(0x1dd)](),_0x1a305e=_0x2aa241[_0xb4b17(0x1e0)],_0x286c7f=await profile[_0xb4b17(0x1c9)]({'email':_0x1a305e[_0xb4b17(0x1e2)]}),_0x710a4d=await staff[_0xb4b17(0x1c9)]({'email':_0x1a305e[_0xb4b17(0x1e2)],'type_of_acc_cat':'1'});let _0x4ac520=[];_0x710a4d!=null&&(_0x4ac520=await sales_order[_0xb4b17(0x1dd)]({'sales_staff_id':_0x710a4d[_0xb4b17(0x1ce)]}));if(_0xe16d1d[0x0][_0xb4b17(0x1e6)]==_0xb4b17(0x20f))var _0x342e05=users['English'];else{if(_0xe16d1d[0x0][_0xb4b17(0x1e6)]==_0xb4b17(0x216))var _0x342e05=users[_0xb4b17(0x216)];else{if(_0xe16d1d[0x0][_0xb4b17(0x1e6)]==_0xb4b17(0x20c))var _0x342e05=users[_0xb4b17(0x20c)];else{if(_0xe16d1d[0x0][_0xb4b17(0x1e6)]=='Spanish')var _0x342e05=users[_0xb4b17(0x1e7)];else{if(_0xe16d1d[0x0][_0xb4b17(0x1e6)]==_0xb4b17(0x1e1))var _0x342e05=users['French'];else{if(_0xe16d1d[0x0][_0xb4b17(0x1e6)]=='Portuguese\x20(BR)')var _0x342e05=users[_0xb4b17(0x217)];else{if(_0xe16d1d[0x0][_0xb4b17(0x1e6)]=='Chinese')var _0x342e05=users[_0xb4b17(0x1eb)];else{if(_0xe16d1d[0x0]['language']==_0xb4b17(0x1ef))var _0x342e05=users[_0xb4b17(0x206)];}}}}}}}_0x2b6455[_0xb4b17(0x1fa)](_0xb4b17(0x1c6),{'success':_0x2aa241[_0xb4b17(0x1de)]('success'),'errors':_0x2aa241[_0xb4b17(0x1de)](_0xb4b17(0x209)),'master_shop':_0xe16d1d,'profile':_0x286c7f,'role':_0x1a305e,'language':_0x342e05,'sales_mine':_0x4ac520,'staff_arr':_0x710a4d});}catch(_0x310949){console[_0xb4b17(0x1fe)](_0x310949);}}),router[a0_0x34d34c(0x1f9)](a0_0x34d34c(0x1d6),auth,async(_0x3bb756,_0x5d97f8)=>{var _0x16ce95=a0_0x34d34c;try{const _0x7e11ab=await master_shop[_0x16ce95(0x1dd)](),_0x523996=_0x3bb756[_0x16ce95(0x1e0)],_0x4e224d=await profile[_0x16ce95(0x1c9)]({'email':_0x523996[_0x16ce95(0x1e2)]}),_0x205941=await staff['findOne']({'email':_0x523996[_0x16ce95(0x1e2)]}),_0x3fa294=await customer[_0x16ce95(0x1dd)]({'agent_id':_0x205941[_0x16ce95(0x1ce)]}),_0x5c44ad=_0x3bb756['params']['id'],_0x1b9cf2=await sales_order[_0x16ce95(0x1cd)](_0x5c44ad);if(_0x7e11ab[0x0][_0x16ce95(0x1e6)]==_0x16ce95(0x20f))var _0x2e4020=users[_0x16ce95(0x20b)];else{if(_0x7e11ab[0x0]['language']==_0x16ce95(0x216))var _0x2e4020=users[_0x16ce95(0x216)];else{if(_0x7e11ab[0x0][_0x16ce95(0x1e6)]==_0x16ce95(0x20c))var _0x2e4020=users[_0x16ce95(0x20c)];else{if(_0x7e11ab[0x0][_0x16ce95(0x1e6)]==_0x16ce95(0x1e7))var _0x2e4020=users[_0x16ce95(0x1e7)];else{if(_0x7e11ab[0x0][_0x16ce95(0x1e6)]=='French')var _0x2e4020=users[_0x16ce95(0x1e1)];else{if(_0x7e11ab[0x0]['language']==_0x16ce95(0x213))var _0x2e4020=users[_0x16ce95(0x217)];else{if(_0x7e11ab[0x0][_0x16ce95(0x1e6)]==_0x16ce95(0x1eb))var _0x2e4020=users['Chinese'];else{if(_0x7e11ab[0x0][_0x16ce95(0x1e6)]=='Arabic\x20(ae)')var _0x2e4020=users['Arabic'];}}}}}}}_0x5d97f8['render']('view_collections_so_xt',{'success':_0x3bb756[_0x16ce95(0x1de)](_0x16ce95(0x1e4)),'errors':_0x3bb756[_0x16ce95(0x1de)](_0x16ce95(0x209)),'master_shop':_0x7e11ab,'profile':_0x4e224d,'role':_0x523996,'language':_0x2e4020,'customer':_0x3fa294,'sales_sa':_0x1b9cf2,'staff_arr':_0x205941});}catch(_0x54ddaf){console['log'](_0x54ddaf);}}),router[a0_0x34d34c(0x20a)](a0_0x34d34c(0x1d6),auth,async(_0x22dee9,_0x3900aa)=>{var _0x4ae6dc=a0_0x34d34c;try{const _0xe25c09=_0x22dee9[_0x4ae6dc(0x1c7)]['id'],_0x35c280=await sales_order[_0x4ae6dc(0x1cd)](_0xe25c09),{collection:_0x1687d0,invoicemoney:_0x5b8e54,collectionnumber:_0x49e170,typeofpayment:_0x356d5f,cashdate:_0x1a4d60,id_detl:_0x515452}=_0x22dee9['body'];_0x35c280[_0x4ae6dc(0x1d0)]=_0x1687d0,_0x35c280[_0x4ae6dc(0x207)]=_0x356d5f,_0x35c280[_0x4ae6dc(0x1ea)]=_0x1a4d60,_0x35c280[_0x4ae6dc(0x1fd)]=_0x4ae6dc(0x1fb),_0x35c280[_0x4ae6dc(0x1f8)]='1';const _0x1597b1=await _0x35c280['save']();_0x22dee9[_0x4ae6dc(0x1de)](_0x4ae6dc(0x1e4),'Collection\x20Update\x20successfully'),_0x3900aa[_0x4ae6dc(0x1cc)](_0x4ae6dc(0x1df)+_0xe25c09);}catch(_0x501bae){console[_0x4ae6dc(0x1fe)](_0x501bae);}}),module[a0_0x34d34c(0x1e9)]=router;