var a0_0x38f7b0=a0_0x6050;(function(_0x1dae42,_0x1552c5){var _0xb4fd82=a0_0x6050,_0x58facb=_0x1dae42();while(!![]){try{var _0x1c4786=parseInt(_0xb4fd82(0xea))/0x1*(parseInt(_0xb4fd82(0xe8))/0x2)+parseInt(_0xb4fd82(0xc4))/0x3*(parseInt(_0xb4fd82(0xc6))/0x4)+parseInt(_0xb4fd82(0xd6))/0x5+parseInt(_0xb4fd82(0x105))/0x6+-parseInt(_0xb4fd82(0xda))/0x7*(-parseInt(_0xb4fd82(0xf3))/0x8)+-parseInt(_0xb4fd82(0xd3))/0x9+-parseInt(_0xb4fd82(0xcc))/0xa;if(_0x1c4786===_0x1552c5)break;else _0x58facb['push'](_0x58facb['shift']());}catch(_0x38858d){_0x58facb['push'](_0x58facb['shift']());}}}(a0_0x5572,0xd4a8a));function a0_0x6050(_0xd84440,_0x225d5c){var _0x55722e=a0_0x5572();return a0_0x6050=function(_0x60509c,_0x23dc67){_0x60509c=_0x60509c-0xb6;var _0x5b066a=_0x55722e[_0x60509c];return _0x5b066a;},a0_0x6050(_0xd84440,_0x225d5c);}const express=require('express'),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require('../models/all_models'),auth=require('../middleware/auth'),users=require(a0_0x38f7b0(0xdc)),excelJS=require('exceljs'),xlsx=require('xlsx'),multer=require('multer'),mongoose=require(a0_0x38f7b0(0xb7));router[a0_0x38f7b0(0xeb)](a0_0x38f7b0(0xc1),auth,async(_0x1147ea,_0x14bc0a)=>{var _0x34ae0d=a0_0x38f7b0;try{const _0x58422a=await master_shop[_0x34ae0d(0xcb)](),_0x2ed7fb=_0x1147ea['user'],_0x184a63=await profile[_0x34ae0d(0xf7)]({'email':_0x2ed7fb[_0x34ae0d(0xcd)]}),_0x2cabd7=await staff['findOne']({'email':_0x2ed7fb[_0x34ae0d(0xcd)],'type_of_acc_cat':'2'});let _0x7c56e9=[];_0x2cabd7!=null&&(_0x7c56e9=await sales_order['find']({'sales_staff_id':_0x2cabd7[_0x34ae0d(0xd4)]}));if(_0x58422a[0x0][_0x34ae0d(0xc7)]==_0x34ae0d(0xbc))var _0x344073=users['English'];else{if(_0x58422a[0x0]['language']=='Hindi')var _0x344073=users[_0x34ae0d(0xe1)];else{if(_0x58422a[0x0]['language']==_0x34ae0d(0xf6))var _0x344073=users[_0x34ae0d(0xf6)];else{if(_0x58422a[0x0][_0x34ae0d(0xc7)]==_0x34ae0d(0x103))var _0x344073=users[_0x34ae0d(0x103)];else{if(_0x58422a[0x0][_0x34ae0d(0xc7)]==_0x34ae0d(0xed))var _0x344073=users[_0x34ae0d(0xed)];else{if(_0x58422a[0x0][_0x34ae0d(0xc7)]==_0x34ae0d(0xfe))var _0x344073=users[_0x34ae0d(0xc0)];else{if(_0x58422a[0x0][_0x34ae0d(0xc7)]==_0x34ae0d(0xbf))var _0x344073=users['Chinese'];else{if(_0x58422a[0x0][_0x34ae0d(0xc7)]=='Arabic\x20(ae)')var _0x344073=users[_0x34ae0d(0xde)];}}}}}}}_0x14bc0a[_0x34ae0d(0xcf)](_0x34ae0d(0xe4),{'success':_0x1147ea[_0x34ae0d(0xb8)](_0x34ae0d(0xfa)),'errors':_0x1147ea[_0x34ae0d(0xb8)](_0x34ae0d(0xfc)),'master_shop':_0x58422a,'profile':_0x184a63,'role':_0x2ed7fb,'language':_0x344073,'sales_mine':_0x7c56e9,'staff_arr':_0x2cabd7});}catch(_0x2efadf){console[_0x34ae0d(0xd1)](_0x2efadf);}}),router[a0_0x38f7b0(0xeb)](a0_0x38f7b0(0xd8),auth,async(_0xef8d17,_0x4c67f7)=>{var _0x1d60f2=a0_0x38f7b0;try{const _0xe2e327=await master_shop[_0x1d60f2(0xcb)](),_0x492779=_0xef8d17['user'],_0x2febd5=await profile[_0x1d60f2(0xf7)]({'email':_0x492779[_0x1d60f2(0xcd)]}),_0x432fe2=await staff['findOne']({'email':_0x492779[_0x1d60f2(0xcd)]}),_0x5154fb=await customer[_0x1d60f2(0xcb)]({'agent_id':_0x432fe2[_0x1d60f2(0xd4)]}),_0x3db823=_0xef8d17[_0x1d60f2(0xca)]['id'],_0xec568f=await sales_sa[_0x1d60f2(0xe2)](_0x3db823);if(_0xe2e327[0x0][_0x1d60f2(0xc7)]==_0x1d60f2(0xbc))var _0x160539=users[_0x1d60f2(0xc5)];else{if(_0xe2e327[0x0][_0x1d60f2(0xc7)]==_0x1d60f2(0xe1))var _0x160539=users['Hindi'];else{if(_0xe2e327[0x0][_0x1d60f2(0xc7)]=='German')var _0x160539=users[_0x1d60f2(0xf6)];else{if(_0xe2e327[0x0][_0x1d60f2(0xc7)]==_0x1d60f2(0x103))var _0x160539=users[_0x1d60f2(0x103)];else{if(_0xe2e327[0x0][_0x1d60f2(0xc7)]=='French')var _0x160539=users[_0x1d60f2(0xed)];else{if(_0xe2e327[0x0][_0x1d60f2(0xc7)]=='Portuguese\x20(BR)')var _0x160539=users[_0x1d60f2(0xc0)];else{if(_0xe2e327[0x0][_0x1d60f2(0xc7)]==_0x1d60f2(0xbf))var _0x160539=users[_0x1d60f2(0xbf)];else{if(_0xe2e327[0x0][_0x1d60f2(0xc7)]==_0x1d60f2(0x101))var _0x160539=users[_0x1d60f2(0xde)];}}}}}}}_0x4c67f7[_0x1d60f2(0xcf)](_0x1d60f2(0x100),{'success':_0xef8d17[_0x1d60f2(0xb8)](_0x1d60f2(0xfa)),'errors':_0xef8d17[_0x1d60f2(0xb8)](_0x1d60f2(0xfc)),'master_shop':_0xe2e327,'profile':_0x2febd5,'role':_0x492779,'language':_0x160539,'customer':_0x5154fb,'sales_sa':_0xec568f,'staff_arr':_0x432fe2});}catch(_0xb66512){console['log'](_0xb66512);}}),router['post'](a0_0x38f7b0(0xd8),auth,async(_0x305ae9,_0x3bff99)=>{var _0x1a28ba=a0_0x38f7b0;try{const _0x162261=_0x305ae9[_0x1a28ba(0xca)]['id'],_0x5d02a1=await sales_sa[_0x1a28ba(0xe2)](_0x162261),{collection:_0x344476,invoicemoney:_0x1be61c,collectionnumber:_0x397743,typeofpayment:_0x138327,cashdate:_0xa2f61a,id_detl:_0x5b6793}=_0x305ae9[_0x1a28ba(0xdb)];_0x3bff99['json'](_0x5d02a1);return;if(typeof _0x5b6793==_0x1a28ba(0xf8))var _0x360f14=[_0x305ae9['body'][_0x1a28ba(0xdf)]],_0x539938=[_0x305ae9[_0x1a28ba(0xdb)][_0x1a28ba(0xce)]],_0x494e54=[_0x305ae9['body'][_0x1a28ba(0xee)]],_0x4c9d2f=[_0x305ae9['body'][_0x1a28ba(0xfd)]],_0x4d8c9=[_0x305ae9[_0x1a28ba(0xdb)]['vol_deals']],_0x4eadc1=[_0x305ae9[_0x1a28ba(0xdb)][_0x1a28ba(0xd2)]],_0x40f38b=[_0x305ae9[_0x1a28ba(0xdb)][_0x1a28ba(0xf9)]];else var _0x360f14=[..._0x305ae9[_0x1a28ba(0xdb)]['id_detl']],_0x539938=[..._0x305ae9['body'][_0x1a28ba(0xce)]],_0x494e54=[..._0x305ae9[_0x1a28ba(0xdb)][_0x1a28ba(0xee)]],_0x4c9d2f=[..._0x305ae9[_0x1a28ba(0xdb)][_0x1a28ba(0xfd)]],_0x4d8c9=[..._0x305ae9['body']['vol_deals']],_0x4eadc1=[..._0x305ae9['body'][_0x1a28ba(0xd2)]],_0x40f38b=[..._0x305ae9[_0x1a28ba(0xdb)][_0x1a28ba(0xf9)]];const _0x19b160=_0x360f14[_0x1a28ba(0xbb)](_0x220934=>{return _0x220934={'id_detl':_0x220934};});_0x539938[_0x1a28ba(0xd9)]((_0x4636a1,_0x28749a)=>{var _0x46ac9d=_0x1a28ba;_0x19b160[_0x28749a][_0x46ac9d(0xce)]=_0x4636a1;}),_0x494e54[_0x1a28ba(0xd9)]((_0x29929b,_0x3d1beb)=>{var _0x4e50d5=_0x1a28ba;_0x19b160[_0x3d1beb][_0x4e50d5(0xee)]=_0x29929b;}),_0x4c9d2f[_0x1a28ba(0xd9)]((_0x4baffe,_0x10bb6d)=>{var _0xd78440=_0x1a28ba;_0x19b160[_0x10bb6d][_0xd78440(0xfd)]=_0x4baffe;}),_0x4d8c9[_0x1a28ba(0xd9)]((_0x13e2fd,_0x453b06)=>{var _0x5cc437=_0x1a28ba;_0x19b160[_0x453b06][_0x5cc437(0xe0)]=_0x13e2fd;}),_0x4eadc1[_0x1a28ba(0xd9)]((_0x4898ff,_0x3a11fd)=>{var _0x2c53aa=_0x1a28ba;_0x19b160[_0x3a11fd][_0x2c53aa(0xd2)]=_0x4898ff;}),_0x40f38b['forEach']((_0xb523d9,_0x5e6a96)=>{var _0x3c803c=_0x1a28ba;_0x19b160[_0x5e6a96][_0x3c803c(0xc3)]=_0xb523d9;}),_0x5d02a1[_0x1a28ba(0xc9)]=_0x344476,_0x5d02a1['collectionnumber']=_0x397743,_0x5d02a1[_0x1a28ba(0xf1)]=_0x138327,_0x5d02a1[_0x1a28ba(0xdd)]=_0xa2f61a,_0x5d02a1['paid']='True';const _0x59939c=await _0x5d02a1[_0x1a28ba(0xe7)]();if(_0x59939c[_0x1a28ba(0xf0)]=='True')for(let _0x124e0a=0x0;_0x124e0a<=_0x19b160[_0x1a28ba(0xd7)]-0x1;_0x124e0a++){const _0xcb4b0e=_0x19b160[_0x124e0a],_0x77ae4=mongoose[_0x1a28ba(0xe3)]['ObjectId'];console[_0x1a28ba(0xd1)](_0xcb4b0e);const _0x3c23df=await sales_sa['updateOne']({'_id':_0x77ae4(_0x162261[_0x1a28ba(0xff)]()),'sale_product._id':_0x77ae4(_0xcb4b0e['id_detl']['valueOf']())},{'$set':{'sale_product.$.ewt':_0xcb4b0e['ewt'],'sale_product.$.spwp':_0xcb4b0e[_0x1a28ba(0xee)],'sale_product.$.fin_disc':_0xcb4b0e[_0x1a28ba(0xfd)],'sale_product.$.vol_deals':_0xcb4b0e[_0x1a28ba(0xe0)],'sale_product.$.bo_disc':_0xcb4b0e[_0x1a28ba(0xd2)],'sale_product.$.totalprice':parseFloat(_0xcb4b0e[_0x1a28ba(0xc3)])}});}_0x305ae9[_0x1a28ba(0xb8)](_0x1a28ba(0xfa),_0x1a28ba(0xf5)),_0x3bff99[_0x1a28ba(0xf4)](_0x1a28ba(0xef)+_0x162261);}catch(_0x14b4d5){console['log'](_0x14b4d5);}}),router[a0_0x38f7b0(0xeb)](a0_0x38f7b0(0xc2),auth,async(_0x449856,_0x1bcf4f)=>{var _0x8b6889=a0_0x38f7b0;try{const _0x2833a4=await master_shop[_0x8b6889(0xcb)](),_0x5926d4=_0x449856['user'],_0x29f290=await profile['findOne']({'email':_0x5926d4[_0x8b6889(0xcd)]}),_0x4e7f2d=await staff[_0x8b6889(0xf7)]({'email':_0x5926d4[_0x8b6889(0xcd)],'type_of_acc_cat':'2'});let _0x2f20f6=[];_0x4e7f2d!=null&&(_0x2f20f6=await sales_order[_0x8b6889(0xcb)]({'sales_staff_id':_0x4e7f2d[_0x8b6889(0xd4)]}));console['log'](_0x2f20f6);if(_0x2833a4[0x0][_0x8b6889(0xc7)]==_0x8b6889(0xbc))var _0x47d545=users['English'];else{if(_0x2833a4[0x0]['language']=='Hindi')var _0x47d545=users[_0x8b6889(0xe1)];else{if(_0x2833a4[0x0]['language']==_0x8b6889(0xf6))var _0x47d545=users['German'];else{if(_0x2833a4[0x0][_0x8b6889(0xc7)]=='Spanish')var _0x47d545=users[_0x8b6889(0x103)];else{if(_0x2833a4[0x0][_0x8b6889(0xc7)]=='French')var _0x47d545=users['French'];else{if(_0x2833a4[0x0][_0x8b6889(0xc7)]==_0x8b6889(0xfe))var _0x47d545=users[_0x8b6889(0xc0)];else{if(_0x2833a4[0x0][_0x8b6889(0xc7)]==_0x8b6889(0xbf))var _0x47d545=users[_0x8b6889(0xbf)];else{if(_0x2833a4[0x0][_0x8b6889(0xc7)]==_0x8b6889(0x101))var _0x47d545=users[_0x8b6889(0xde)];}}}}}}}_0x1bcf4f['render'](_0x8b6889(0xb6),{'success':_0x449856['flash'](_0x8b6889(0xfa)),'errors':_0x449856[_0x8b6889(0xb8)](_0x8b6889(0xfc)),'master_shop':_0x2833a4,'profile':_0x29f290,'role':_0x5926d4,'language':_0x47d545,'sales_mine':_0x2f20f6,'staff_arr':_0x4e7f2d});}catch(_0x1905b3){console[_0x8b6889(0xd1)](_0x1905b3);}}),router[a0_0x38f7b0(0xeb)]('/view_sox/:id',auth,async(_0x42b4ca,_0x8c348)=>{var _0x3c8d11=a0_0x38f7b0;try{const _0x232605=await master_shop[_0x3c8d11(0xcb)](),_0x40acc3=_0x42b4ca[_0x3c8d11(0xfb)],_0x2bef1b=await profile[_0x3c8d11(0xf7)]({'email':_0x40acc3[_0x3c8d11(0xcd)]}),_0x184a6d=await staff[_0x3c8d11(0xf7)]({'email':_0x40acc3['email']}),_0x2bdce1=await customer[_0x3c8d11(0xcb)]({'agent_id':_0x184a6d[_0x3c8d11(0xd4)]}),_0x404b41=_0x42b4ca[_0x3c8d11(0xca)]['id'],_0x5d11da=await sales_order[_0x3c8d11(0xe2)](_0x404b41);if(_0x232605[0x0][_0x3c8d11(0xc7)]==_0x3c8d11(0xbc))var _0x5d3bbe=users[_0x3c8d11(0xc5)];else{if(_0x232605[0x0][_0x3c8d11(0xc7)]==_0x3c8d11(0xe1))var _0x5d3bbe=users['Hindi'];else{if(_0x232605[0x0][_0x3c8d11(0xc7)]==_0x3c8d11(0xf6))var _0x5d3bbe=users[_0x3c8d11(0xf6)];else{if(_0x232605[0x0][_0x3c8d11(0xc7)]=='Spanish')var _0x5d3bbe=users[_0x3c8d11(0x103)];else{if(_0x232605[0x0][_0x3c8d11(0xc7)]==_0x3c8d11(0xed))var _0x5d3bbe=users[_0x3c8d11(0xed)];else{if(_0x232605[0x0][_0x3c8d11(0xc7)]==_0x3c8d11(0xfe))var _0x5d3bbe=users['Portuguese'];else{if(_0x232605[0x0]['language']==_0x3c8d11(0xbf))var _0x5d3bbe=users[_0x3c8d11(0xbf)];else{if(_0x232605[0x0]['language']==_0x3c8d11(0x101))var _0x5d3bbe=users[_0x3c8d11(0xde)];}}}}}}}_0x8c348['render'](_0x3c8d11(0xbd),{'success':_0x42b4ca[_0x3c8d11(0xb8)](_0x3c8d11(0xfa)),'errors':_0x42b4ca[_0x3c8d11(0xb8)]('errors'),'master_shop':_0x232605,'profile':_0x2bef1b,'role':_0x40acc3,'language':_0x5d3bbe,'customer':_0x2bdce1,'sales_sa':_0x5d11da});}catch(_0x4a218c){console[_0x3c8d11(0xd1)](_0x4a218c);}}),router[a0_0x38f7b0(0xeb)](a0_0x38f7b0(0xf2),auth,async(_0x3d70a4,_0x45c8e2)=>{var _0x1a3322=a0_0x38f7b0;try{const _0x3ed9f8=await master_shop['find'](),_0x3b4494=_0x3d70a4[_0x1a3322(0xfb)],_0x1f0eb4=await profile[_0x1a3322(0xf7)]({'email':_0x3b4494[_0x1a3322(0xcd)]}),_0x1ad8a7=await staff['findOne']({'email':_0x3b4494['email'],'type_of_acc_cat':'1'});let _0x4c70f4=[];_0x1ad8a7!=null&&(_0x4c70f4=await sales_sa[_0x1a3322(0xcb)]({'sales_staff_id':_0x1ad8a7[_0x1a3322(0xd4)]}));if(_0x3ed9f8[0x0][_0x1a3322(0xc7)]==_0x1a3322(0xbc))var _0x4f8916=users['English'];else{if(_0x3ed9f8[0x0][_0x1a3322(0xc7)]==_0x1a3322(0xe1))var _0x4f8916=users[_0x1a3322(0xe1)];else{if(_0x3ed9f8[0x0]['language']==_0x1a3322(0xf6))var _0x4f8916=users[_0x1a3322(0xf6)];else{if(_0x3ed9f8[0x0][_0x1a3322(0xc7)]=='Spanish')var _0x4f8916=users[_0x1a3322(0x103)];else{if(_0x3ed9f8[0x0][_0x1a3322(0xc7)]==_0x1a3322(0xed))var _0x4f8916=users[_0x1a3322(0xed)];else{if(_0x3ed9f8[0x0]['language']==_0x1a3322(0xfe))var _0x4f8916=users[_0x1a3322(0xc0)];else{if(_0x3ed9f8[0x0][_0x1a3322(0xc7)]==_0x1a3322(0xbf))var _0x4f8916=users[_0x1a3322(0xbf)];else{if(_0x3ed9f8[0x0][_0x1a3322(0xc7)]==_0x1a3322(0x101))var _0x4f8916=users[_0x1a3322(0xde)];}}}}}}}_0x45c8e2['render'](_0x1a3322(0xc8),{'success':_0x3d70a4[_0x1a3322(0xb8)](_0x1a3322(0xfa)),'errors':_0x3d70a4['flash']('errors'),'master_shop':_0x3ed9f8,'profile':_0x1f0eb4,'role':_0x3b4494,'language':_0x4f8916,'sales_mine':_0x4c70f4,'staff_arr':_0x1ad8a7});}catch(_0x1831a0){console[_0x1a3322(0xd1)](_0x1831a0);}}),router[a0_0x38f7b0(0xeb)](a0_0x38f7b0(0xec),auth,async(_0x8cccc2,_0x84b091)=>{var _0x2d2fee=a0_0x38f7b0;try{const _0x14178d=await master_shop[_0x2d2fee(0xcb)](),_0x336d2c=_0x8cccc2['user'],_0x3a8ee0=await profile[_0x2d2fee(0xf7)]({'email':_0x336d2c['email']}),_0x14f2e9=await staff['findOne']({'email':_0x336d2c['email']}),_0x5d7cad=await customer[_0x2d2fee(0xcb)]({'agent_id':_0x14f2e9[_0x2d2fee(0xd4)]}),_0x2a8172=_0x8cccc2[_0x2d2fee(0xca)]['id'],_0x46e4a8=await sales_sa[_0x2d2fee(0xe2)](_0x2a8172);if(_0x14178d[0x0]['language']==_0x2d2fee(0xbc))var _0x22a5ab=users[_0x2d2fee(0xc5)];else{if(_0x14178d[0x0]['language']==_0x2d2fee(0xe1))var _0x22a5ab=users[_0x2d2fee(0xe1)];else{if(_0x14178d[0x0][_0x2d2fee(0xc7)]=='German')var _0x22a5ab=users[_0x2d2fee(0xf6)];else{if(_0x14178d[0x0][_0x2d2fee(0xc7)]==_0x2d2fee(0x103))var _0x22a5ab=users[_0x2d2fee(0x103)];else{if(_0x14178d[0x0][_0x2d2fee(0xc7)]==_0x2d2fee(0xed))var _0x22a5ab=users[_0x2d2fee(0xed)];else{if(_0x14178d[0x0][_0x2d2fee(0xc7)]==_0x2d2fee(0xfe))var _0x22a5ab=users[_0x2d2fee(0xc0)];else{if(_0x14178d[0x0][_0x2d2fee(0xc7)]=='Chinese')var _0x22a5ab=users[_0x2d2fee(0xbf)];else{if(_0x14178d[0x0]['language']==_0x2d2fee(0x101))var _0x22a5ab=users['Arabic'];}}}}}}}_0x84b091[_0x2d2fee(0xcf)](_0x2d2fee(0xd0),{'success':_0x8cccc2[_0x2d2fee(0xb8)](_0x2d2fee(0xfa)),'errors':_0x8cccc2[_0x2d2fee(0xb8)](_0x2d2fee(0xfc)),'master_shop':_0x14178d,'profile':_0x3a8ee0,'role':_0x336d2c,'language':_0x22a5ab,'customer':_0x5d7cad,'sales_sa':_0x46e4a8,'staff_arr':_0x14f2e9});}catch(_0x22f467){console[_0x2d2fee(0xd1)](_0x22f467);}}),router[a0_0x38f7b0(0x102)]('/view_xt/:id',auth,async(_0xd3e93,_0x4083a1)=>{var _0x45b601=a0_0x38f7b0;try{const _0x1151b7=_0xd3e93[_0x45b601(0xca)]['id'],_0x4d3c66=await sales_sa[_0x45b601(0xe2)](_0x1151b7),{collection:_0x4c09ac,invoicemoney:_0x245253,collectionnumber:_0x2d4f44,typeofpayment:_0x525e14,cashdate:_0x703aaa,id_detl:_0x1eb3da}=_0xd3e93['body'];if(typeof _0x1eb3da==_0x45b601(0xf8))var _0x534622=[_0xd3e93[_0x45b601(0xdb)][_0x45b601(0xdf)]],_0x204f5e=[_0xd3e93[_0x45b601(0xdb)][_0x45b601(0xce)]],_0x9fa4fd=[_0xd3e93[_0x45b601(0xdb)][_0x45b601(0xee)]],_0x5a98ca=[_0xd3e93['body'][_0x45b601(0xfd)]],_0x19505f=[_0xd3e93[_0x45b601(0xdb)][_0x45b601(0xe0)]],_0x54df81=[_0xd3e93[_0x45b601(0xdb)][_0x45b601(0xd2)]],_0x5355ba=[_0xd3e93[_0x45b601(0xdb)][_0x45b601(0xf9)]];else var _0x534622=[..._0xd3e93[_0x45b601(0xdb)][_0x45b601(0xdf)]],_0x204f5e=[..._0xd3e93[_0x45b601(0xdb)][_0x45b601(0xce)]],_0x9fa4fd=[..._0xd3e93[_0x45b601(0xdb)][_0x45b601(0xee)]],_0x5a98ca=[..._0xd3e93[_0x45b601(0xdb)][_0x45b601(0xfd)]],_0x19505f=[..._0xd3e93[_0x45b601(0xdb)][_0x45b601(0xe0)]],_0x54df81=[..._0xd3e93['body'][_0x45b601(0xd2)]],_0x5355ba=[..._0xd3e93[_0x45b601(0xdb)][_0x45b601(0xf9)]];const _0x3bbee4=_0x534622[_0x45b601(0xbb)](_0x53d044=>{return _0x53d044={'id_detl':_0x53d044};});_0x204f5e[_0x45b601(0xd9)]((_0x1fdb31,_0x2e5a7c)=>{_0x3bbee4[_0x2e5a7c]['ewt']=_0x1fdb31;}),_0x9fa4fd[_0x45b601(0xd9)]((_0x3be1e6,_0x58ba6a)=>{var _0x216ee7=_0x45b601;_0x3bbee4[_0x58ba6a][_0x216ee7(0xee)]=_0x3be1e6;}),_0x5a98ca[_0x45b601(0xd9)]((_0x4aa18b,_0x182570)=>{var _0x34c38d=_0x45b601;_0x3bbee4[_0x182570][_0x34c38d(0xfd)]=_0x4aa18b;}),_0x19505f[_0x45b601(0xd9)]((_0x4a9d16,_0x385306)=>{var _0x4a57e4=_0x45b601;_0x3bbee4[_0x385306][_0x4a57e4(0xe0)]=_0x4a9d16;}),_0x54df81['forEach']((_0x5e5370,_0x962131)=>{var _0x4c9376=_0x45b601;_0x3bbee4[_0x962131][_0x4c9376(0xd2)]=_0x5e5370;}),_0x5355ba[_0x45b601(0xd9)]((_0x33d7f3,_0x426f01)=>{var _0x20e91e=_0x45b601;_0x3bbee4[_0x426f01][_0x20e91e(0xc3)]=_0x33d7f3;}),_0x4d3c66[_0x45b601(0xc9)]=_0x4c09ac,_0x4d3c66[_0x45b601(0xb9)]=_0x2d4f44,_0x4d3c66[_0x45b601(0xf1)]=_0x525e14,_0x4d3c66[_0x45b601(0xdd)]=_0x703aaa,_0x4d3c66[_0x45b601(0xf0)]=_0x45b601(0xd5),_0x4d3c66['typeofprocess']='1';const _0x443004=await _0x4d3c66['save']();if(_0x443004[_0x45b601(0xf0)]==_0x45b601(0xd5))for(let _0x249f5e=0x0;_0x249f5e<=_0x3bbee4[_0x45b601(0xd7)]-0x1;_0x249f5e++){const _0x3cbb79=_0x3bbee4[_0x249f5e],_0x7eb56e=mongoose[_0x45b601(0xe3)][_0x45b601(0xba)];console[_0x45b601(0xd1)](_0x3cbb79);const _0x2f3ead=await sales_sa[_0x45b601(0xe6)]({'_id':_0x7eb56e(_0x1151b7[_0x45b601(0xff)]()),'sale_product._id':_0x7eb56e(_0x3cbb79[_0x45b601(0xdf)][_0x45b601(0xff)]())},{'$set':{'sale_product.$.ewt':_0x3cbb79[_0x45b601(0xce)],'sale_product.$.spwp':_0x3cbb79['spwp'],'sale_product.$.fin_disc':_0x3cbb79['fin_disc'],'sale_product.$.vol_deals':_0x3cbb79['vol_deals'],'sale_product.$.bo_disc':_0x3cbb79[_0x45b601(0xd2)],'sale_product.$.totalprice':parseFloat(_0x3cbb79[_0x45b601(0xc3)])}});}_0xd3e93['flash'](_0x45b601(0xfa),'Collection\x20Update\x20successfully'),_0x4083a1['redirect']('/collection/view/'+_0x1151b7);}catch(_0x11ea96){console[_0x45b601(0xd1)](_0x11ea96);}}),router[a0_0x38f7b0(0xeb)]('/so_x',auth,async(_0xb12667,_0x374d55)=>{var _0x42a048=a0_0x38f7b0;try{const _0x3d401f=await master_shop[_0x42a048(0xcb)](),_0x3a9516=_0xb12667[_0x42a048(0xfb)],_0x28cd3f=await profile[_0x42a048(0xf7)]({'email':_0x3a9516[_0x42a048(0xcd)]}),_0x219a37=await staff[_0x42a048(0xf7)]({'email':_0x3a9516['email'],'type_of_acc_cat':'1'});let _0x3b1930=[];_0x219a37!=null&&(_0x3b1930=await sales_order[_0x42a048(0xcb)]({'sales_staff_id':_0x219a37[_0x42a048(0xd4)]}));if(_0x3d401f[0x0]['language']=='English\x20(US)')var _0x3fdd9c=users[_0x42a048(0xc5)];else{if(_0x3d401f[0x0][_0x42a048(0xc7)]=='Hindi')var _0x3fdd9c=users[_0x42a048(0xe1)];else{if(_0x3d401f[0x0][_0x42a048(0xc7)]=='German')var _0x3fdd9c=users[_0x42a048(0xf6)];else{if(_0x3d401f[0x0][_0x42a048(0xc7)]=='Spanish')var _0x3fdd9c=users[_0x42a048(0x103)];else{if(_0x3d401f[0x0]['language']==_0x42a048(0xed))var _0x3fdd9c=users[_0x42a048(0xed)];else{if(_0x3d401f[0x0]['language']=='Portuguese\x20(BR)')var _0x3fdd9c=users[_0x42a048(0xc0)];else{if(_0x3d401f[0x0][_0x42a048(0xc7)]==_0x42a048(0xbf))var _0x3fdd9c=users[_0x42a048(0xbf)];else{if(_0x3d401f[0x0][_0x42a048(0xc7)]==_0x42a048(0x101))var _0x3fdd9c=users['Arabic'];}}}}}}}_0x374d55[_0x42a048(0xcf)](_0x42a048(0xe9),{'success':_0xb12667['flash'](_0x42a048(0xfa)),'errors':_0xb12667['flash']('errors'),'master_shop':_0x3d401f,'profile':_0x28cd3f,'role':_0x3a9516,'language':_0x3fdd9c,'sales_mine':_0x3b1930,'staff_arr':_0x219a37});}catch(_0x4e63fe){console[_0x42a048(0xd1)](_0x4e63fe);}}),router[a0_0x38f7b0(0xeb)](a0_0x38f7b0(0xe5),auth,async(_0x3bb17b,_0xbb1cb9)=>{var _0xbb188f=a0_0x38f7b0;try{const _0x5bb85d=await master_shop[_0xbb188f(0xcb)](),_0x4fa909=_0x3bb17b[_0xbb188f(0xfb)],_0x1de585=await profile[_0xbb188f(0xf7)]({'email':_0x4fa909['email']}),_0x3213fc=await staff['findOne']({'email':_0x4fa909['email']}),_0x5e753d=await customer[_0xbb188f(0xcb)]({'agent_id':_0x3213fc[_0xbb188f(0xd4)]}),_0x5e737e=_0x3bb17b[_0xbb188f(0xca)]['id'],_0x1b81d4=await sales_order['findById'](_0x5e737e);if(_0x5bb85d[0x0]['language']=='English\x20(US)')var _0x2db911=users[_0xbb188f(0xc5)];else{if(_0x5bb85d[0x0][_0xbb188f(0xc7)]=='Hindi')var _0x2db911=users[_0xbb188f(0xe1)];else{if(_0x5bb85d[0x0][_0xbb188f(0xc7)]==_0xbb188f(0xf6))var _0x2db911=users[_0xbb188f(0xf6)];else{if(_0x5bb85d[0x0][_0xbb188f(0xc7)]==_0xbb188f(0x103))var _0x2db911=users[_0xbb188f(0x103)];else{if(_0x5bb85d[0x0][_0xbb188f(0xc7)]==_0xbb188f(0xed))var _0x2db911=users['French'];else{if(_0x5bb85d[0x0]['language']==_0xbb188f(0xfe))var _0x2db911=users[_0xbb188f(0xc0)];else{if(_0x5bb85d[0x0]['language']=='Chinese')var _0x2db911=users[_0xbb188f(0xbf)];else{if(_0x5bb85d[0x0]['language']==_0xbb188f(0x101))var _0x2db911=users[_0xbb188f(0xde)];}}}}}}}_0xbb1cb9[_0xbb188f(0xcf)]('view_collections_so_xt',{'success':_0x3bb17b[_0xbb188f(0xb8)]('success'),'errors':_0x3bb17b[_0xbb188f(0xb8)](_0xbb188f(0xfc)),'master_shop':_0x5bb85d,'profile':_0x1de585,'role':_0x4fa909,'language':_0x2db911,'customer':_0x5e753d,'sales_sa':_0x1b81d4,'staff_arr':_0x3213fc});}catch(_0x252fcb){console['log'](_0x252fcb);}}),router[a0_0x38f7b0(0x102)](a0_0x38f7b0(0xe5),auth,async(_0x8127f5,_0x549947)=>{var _0x1b961f=a0_0x38f7b0;try{const _0x174216=_0x8127f5['params']['id'],_0x5a2c5e=await sales_order['findById'](_0x174216),{collection:_0xd3ddb3,invoicemoney:_0x3938ae,collectionnumber:_0x1a16e8,typeofpayment:_0x296e19,cashdate:_0x57f061,id_detl:_0x1a5da4}=_0x8127f5[_0x1b961f(0xdb)];_0x5a2c5e[_0x1b961f(0xc9)]=_0xd3ddb3,_0x5a2c5e[_0x1b961f(0xf1)]=_0x296e19,_0x5a2c5e[_0x1b961f(0xdd)]=_0x57f061,_0x5a2c5e[_0x1b961f(0xf0)]='True',_0x5a2c5e['typeofprocess']='1';const _0x29db09=await _0x5a2c5e[_0x1b961f(0xe7)]();_0x8127f5['flash'](_0x1b961f(0xfa),_0x1b961f(0xf5)),_0x549947[_0x1b961f(0xf4)](_0x1b961f(0xbe)+_0x174216);}catch(_0x6159fc){console[_0x1b961f(0xd1)](_0x6159fc);}}),module[a0_0x38f7b0(0x104)]=router;function a0_0x5572(){var _0x459a32=['328730iweMXw','email','ewt','render','view_collections_xt','log','bo_disc','10765566NzHHXI','_id','True','614895dhOFDB','length','/view/:id','forEach','4039LnQlDR','body','../public/language/languages.json','cash_date','Arabic','id_detl','vol_deals','Hindi','findById','Types','collection','/view_so_xt/:id','updateOne','save','32lDQRoO','collection_so_xt','55193ximuLk','get','/view_xt/:id','French','spwp','/collection/view/','paid','type_of_payment','/view_x','9160ZJpvqX','redirect','Collection\x20Update\x20successfully','German','findOne','string','totalNewPrice','success','user','errors','fin_disc','Portuguese\x20(BR)','valueOf','view_collections','Arabic\x20(ae)','post','Spanish','exports','1146648RLKyly','collection_sox','mongoose','flash','collectionnumber','ObjectId','map','English\x20(US)','view_collections_sox','/collection/view_so_xt/','Chinese','Portuguese','/view','/x_so','totalcollection','3stdvdL','English','969028PmQigB','language','collection_xt','collection_price','params','find'];a0_0x5572=function(){return _0x459a32;};return a0_0x5572();}