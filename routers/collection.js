var a0_0x19db71=a0_0x3f62;function a0_0x1af9(){var _0x3c2fa5=['370614oYxwkr','Spanish','collection_price','flash','totalNewPrice','/view/:id','save','typeofprocess','/x_so','4928WoUeRq','findOne','_id','823892BBUcXL','/view','errors','length','xlsx','collectionnumber','spwp','exceljs','252485DbDlWC','json','render','/view_xt/:id','True','find','language','Portuguese','log','/collection/view/','cash_date','id_detl','user','collection','body','collection_so_xt','16055dYXMvx','updateOne','Arabic\x20(ae)','Types','params','string','valueOf','multer','Chinese','view_collections_sox','fin_disc','German','/view_sox/:id','post','view_collections_xt','forEach','map','Arabic','view_collections_so_xt','type_of_payment','findById','get','ewt','186BwfMDx','Router','email','French','English\x20(US)','express','ObjectId','Hindi','/collection/view_so_xt/','mongoose','bo_disc','English','totalcollection','10ngYPDE','view_collections','collection_xt','4zjlVho','1186273MHDozu','success','../models/all_models','vol_deals','/so_x','paid','redirect','Portuguese\x20(BR)','3598uvnloj','Collection\x20Update\x20successfully','309096pmbDEK'];a0_0x1af9=function(){return _0x3c2fa5;};return a0_0x1af9();}(function(_0xe221d8,_0x6a19c3){var _0x226009=a0_0x3f62,_0x48df4b=_0xe221d8();while(!![]){try{var _0x17ab86=-parseInt(_0x226009(0xef))/0x1*(-parseInt(_0x226009(0xcf))/0x2)+-parseInt(_0x226009(0xdb))/0x3+-parseInt(_0x226009(0xe7))/0x4+parseInt(_0x226009(0xff))/0x5*(-parseInt(_0x226009(0xbf))/0x6)+-parseInt(_0x226009(0xd8))/0x7*(-parseInt(_0x226009(0xe4))/0x8)+parseInt(_0x226009(0xda))/0x9+parseInt(_0x226009(0xcc))/0xa*(-parseInt(_0x226009(0xd0))/0xb);if(_0x17ab86===_0x6a19c3)break;else _0x48df4b['push'](_0x48df4b['shift']());}catch(_0x231f8a){_0x48df4b['push'](_0x48df4b['shift']());}}}(a0_0x1af9,0x4de43));const express=require(a0_0x19db71(0xc4)),app=express(),router=express[a0_0x19db71(0xc0)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,customer_payment,c_payment_data,sales_sa,sales_order}=require(a0_0x19db71(0xd2)),auth=require('../middleware/auth'),users=require('../public/language/languages.json'),excelJS=require(a0_0x19db71(0xee)),xlsx=require(a0_0x19db71(0xeb)),multer=require(a0_0x19db71(0x106)),mongoose=require(a0_0x19db71(0xc8));function a0_0x3f62(_0x1f6827,_0x350ff9){var _0x1af99d=a0_0x1af9();return a0_0x3f62=function(_0x3f62cf,_0x2404ad){_0x3f62cf=_0x3f62cf-0xb8;var _0x7c0333=_0x1af99d[_0x3f62cf];return _0x7c0333;},a0_0x3f62(_0x1f6827,_0x350ff9);}router['get'](a0_0x19db71(0xe8),auth,async(_0x360967,_0x6892e3)=>{var _0x134965=a0_0x19db71;try{const _0x495f0b=await master_shop[_0x134965(0xf4)](),_0x37db43=_0x360967[_0x134965(0xfb)],_0x276463=await profile['findOne']({'email':_0x37db43[_0x134965(0xc1)]}),_0xdeaf8d=await staff[_0x134965(0xe5)]({'email':_0x37db43[_0x134965(0xc1)],'type_of_acc_cat':'2'});let _0x367f8e=[];_0xdeaf8d!=null&&(_0x367f8e=await sales_order['find']({'sales_staff_id':_0xdeaf8d[_0x134965(0xe6)]}));if(_0x495f0b[0x0][_0x134965(0xf5)]==_0x134965(0xc3))var _0x2c5e68=users['English'];else{if(_0x495f0b[0x0][_0x134965(0xf5)]==_0x134965(0xc6))var _0x2c5e68=users[_0x134965(0xc6)];else{if(_0x495f0b[0x0][_0x134965(0xf5)]=='German')var _0x2c5e68=users[_0x134965(0x10a)];else{if(_0x495f0b[0x0][_0x134965(0xf5)]==_0x134965(0xdc))var _0x2c5e68=users[_0x134965(0xdc)];else{if(_0x495f0b[0x0][_0x134965(0xf5)]==_0x134965(0xc2))var _0x2c5e68=users[_0x134965(0xc2)];else{if(_0x495f0b[0x0][_0x134965(0xf5)]==_0x134965(0xd7))var _0x2c5e68=users['Portuguese'];else{if(_0x495f0b[0x0][_0x134965(0xf5)]==_0x134965(0x107))var _0x2c5e68=users['Chinese'];else{if(_0x495f0b[0x0][_0x134965(0xf5)]==_0x134965(0x101))var _0x2c5e68=users[_0x134965(0xb9)];}}}}}}}_0x6892e3['render'](_0x134965(0xfc),{'success':_0x360967[_0x134965(0xde)](_0x134965(0xd1)),'errors':_0x360967[_0x134965(0xde)](_0x134965(0xe9)),'master_shop':_0x495f0b,'profile':_0x276463,'role':_0x37db43,'language':_0x2c5e68,'sales_mine':_0x367f8e,'staff_arr':_0xdeaf8d});}catch(_0x3e547d){console[_0x134965(0xf7)](_0x3e547d);}}),router[a0_0x19db71(0xbd)](a0_0x19db71(0xe0),auth,async(_0x177e94,_0x273c1f)=>{var _0x5e0063=a0_0x19db71;try{const _0x49ca71=await master_shop[_0x5e0063(0xf4)](),_0x14677e=_0x177e94[_0x5e0063(0xfb)],_0x28ddda=await profile[_0x5e0063(0xe5)]({'email':_0x14677e[_0x5e0063(0xc1)]}),_0x2ec9ef=await staff[_0x5e0063(0xe5)]({'email':_0x14677e[_0x5e0063(0xc1)]}),_0x18d1e3=await customer['find']({'agent_id':_0x2ec9ef[_0x5e0063(0xe6)]}),_0x10d4dc=_0x177e94[_0x5e0063(0x103)]['id'],_0x2537a9=await sales_sa[_0x5e0063(0xbc)](_0x10d4dc);if(_0x49ca71[0x0][_0x5e0063(0xf5)]==_0x5e0063(0xc3))var _0x4248a8=users[_0x5e0063(0xca)];else{if(_0x49ca71[0x0]['language']==_0x5e0063(0xc6))var _0x4248a8=users[_0x5e0063(0xc6)];else{if(_0x49ca71[0x0]['language']=='German')var _0x4248a8=users[_0x5e0063(0x10a)];else{if(_0x49ca71[0x0][_0x5e0063(0xf5)]=='Spanish')var _0x4248a8=users[_0x5e0063(0xdc)];else{if(_0x49ca71[0x0][_0x5e0063(0xf5)]==_0x5e0063(0xc2))var _0x4248a8=users[_0x5e0063(0xc2)];else{if(_0x49ca71[0x0][_0x5e0063(0xf5)]==_0x5e0063(0xd7))var _0x4248a8=users[_0x5e0063(0xf6)];else{if(_0x49ca71[0x0][_0x5e0063(0xf5)]=='Chinese')var _0x4248a8=users[_0x5e0063(0x107)];else{if(_0x49ca71[0x0][_0x5e0063(0xf5)]==_0x5e0063(0x101))var _0x4248a8=users[_0x5e0063(0xb9)];}}}}}}}_0x273c1f['render'](_0x5e0063(0xcd),{'success':_0x177e94['flash'](_0x5e0063(0xd1)),'errors':_0x177e94['flash'](_0x5e0063(0xe9)),'master_shop':_0x49ca71,'profile':_0x28ddda,'role':_0x14677e,'language':_0x4248a8,'customer':_0x18d1e3,'sales_sa':_0x2537a9,'staff_arr':_0x2ec9ef});}catch(_0x1903af){console[_0x5e0063(0xf7)](_0x1903af);}}),router[a0_0x19db71(0x10c)](a0_0x19db71(0xe0),auth,async(_0x1ac3aa,_0x7c0116)=>{var _0x30ce09=a0_0x19db71;try{const _0x14522c=_0x1ac3aa['params']['id'],_0x35ac08=await sales_sa[_0x30ce09(0xbc)](_0x14522c),{collection:_0x8c32bf,invoicemoney:_0x2a5486,collectionnumber:_0x504136,typeofpayment:_0x33c44e,cashdate:_0x437a23,id_detl:_0x27a68b}=_0x1ac3aa[_0x30ce09(0xfd)];_0x7c0116[_0x30ce09(0xf0)](_0x35ac08);return;if(typeof _0x27a68b==_0x30ce09(0x104))var _0x1b4ae5=[_0x1ac3aa[_0x30ce09(0xfd)][_0x30ce09(0xfa)]],_0x4e6273=[_0x1ac3aa[_0x30ce09(0xfd)][_0x30ce09(0xbe)]],_0x501a20=[_0x1ac3aa[_0x30ce09(0xfd)][_0x30ce09(0xed)]],_0x5025d5=[_0x1ac3aa[_0x30ce09(0xfd)][_0x30ce09(0x109)]],_0x18431f=[_0x1ac3aa['body'][_0x30ce09(0xd3)]],_0x17dd76=[_0x1ac3aa[_0x30ce09(0xfd)][_0x30ce09(0xc9)]],_0x5c9483=[_0x1ac3aa[_0x30ce09(0xfd)]['totalNewPrice']];else var _0x1b4ae5=[..._0x1ac3aa[_0x30ce09(0xfd)]['id_detl']],_0x4e6273=[..._0x1ac3aa[_0x30ce09(0xfd)][_0x30ce09(0xbe)]],_0x501a20=[..._0x1ac3aa['body'][_0x30ce09(0xed)]],_0x5025d5=[..._0x1ac3aa[_0x30ce09(0xfd)]['fin_disc']],_0x18431f=[..._0x1ac3aa[_0x30ce09(0xfd)][_0x30ce09(0xd3)]],_0x17dd76=[..._0x1ac3aa[_0x30ce09(0xfd)][_0x30ce09(0xc9)]],_0x5c9483=[..._0x1ac3aa[_0x30ce09(0xfd)]['totalNewPrice']];const _0x1845e9=_0x1b4ae5[_0x30ce09(0xb8)](_0x52909c=>{return _0x52909c={'id_detl':_0x52909c};});_0x4e6273[_0x30ce09(0x10e)]((_0x3ae0ea,_0xdd95f9)=>{var _0x492e29=_0x30ce09;_0x1845e9[_0xdd95f9][_0x492e29(0xbe)]=_0x3ae0ea;}),_0x501a20['forEach']((_0xdf3f68,_0x43bfa2)=>{_0x1845e9[_0x43bfa2]['spwp']=_0xdf3f68;}),_0x5025d5['forEach']((_0x2997c2,_0x13c68a)=>{_0x1845e9[_0x13c68a]['fin_disc']=_0x2997c2;}),_0x18431f[_0x30ce09(0x10e)]((_0x5aa2ee,_0x400893)=>{var _0x583a68=_0x30ce09;_0x1845e9[_0x400893][_0x583a68(0xd3)]=_0x5aa2ee;}),_0x17dd76[_0x30ce09(0x10e)]((_0x48866a,_0x4b9942)=>{var _0xe07972=_0x30ce09;_0x1845e9[_0x4b9942][_0xe07972(0xc9)]=_0x48866a;}),_0x5c9483[_0x30ce09(0x10e)]((_0x3f82f5,_0x524ba1)=>{var _0x49fc80=_0x30ce09;_0x1845e9[_0x524ba1][_0x49fc80(0xcb)]=_0x3f82f5;}),_0x35ac08[_0x30ce09(0xdd)]=_0x8c32bf,_0x35ac08[_0x30ce09(0xec)]=_0x504136,_0x35ac08[_0x30ce09(0xbb)]=_0x33c44e,_0x35ac08[_0x30ce09(0xf9)]=_0x437a23,_0x35ac08['paid']=_0x30ce09(0xf3);const _0x4b60ff=await _0x35ac08[_0x30ce09(0xe1)]();if(_0x4b60ff[_0x30ce09(0xd5)]=='True')for(let _0x4fdce9=0x0;_0x4fdce9<=_0x1845e9[_0x30ce09(0xea)]-0x1;_0x4fdce9++){const _0x134abe=_0x1845e9[_0x4fdce9],_0x580c7d=mongoose['Types'][_0x30ce09(0xc5)];console['log'](_0x134abe);const _0x4f7aa9=await sales_sa['updateOne']({'_id':_0x580c7d(_0x14522c['valueOf']()),'sale_product._id':_0x580c7d(_0x134abe[_0x30ce09(0xfa)][_0x30ce09(0x105)]())},{'$set':{'sale_product.$.ewt':_0x134abe[_0x30ce09(0xbe)],'sale_product.$.spwp':_0x134abe['spwp'],'sale_product.$.fin_disc':_0x134abe[_0x30ce09(0x109)],'sale_product.$.vol_deals':_0x134abe['vol_deals'],'sale_product.$.bo_disc':_0x134abe[_0x30ce09(0xc9)],'sale_product.$.totalprice':parseFloat(_0x134abe['totalcollection'])}});}_0x1ac3aa[_0x30ce09(0xde)](_0x30ce09(0xd1),_0x30ce09(0xd9)),_0x7c0116[_0x30ce09(0xd6)](_0x30ce09(0xf8)+_0x14522c);}catch(_0x29f1e7){console[_0x30ce09(0xf7)](_0x29f1e7);}}),router['get'](a0_0x19db71(0xe3),auth,async(_0x4bc761,_0x3d8d62)=>{var _0x34b4a0=a0_0x19db71;try{const _0x193699=await master_shop[_0x34b4a0(0xf4)](),_0x6d4074=_0x4bc761[_0x34b4a0(0xfb)],_0x512599=await profile[_0x34b4a0(0xe5)]({'email':_0x6d4074[_0x34b4a0(0xc1)]}),_0x3b30bb=await staff[_0x34b4a0(0xe5)]({'email':_0x6d4074['email'],'type_of_acc_cat':'2'});let _0x5ca223=[];_0x3b30bb!=null&&(_0x5ca223=await sales_order['find']({'sales_staff_id':_0x3b30bb[_0x34b4a0(0xe6)]}));console[_0x34b4a0(0xf7)](_0x5ca223);if(_0x193699[0x0][_0x34b4a0(0xf5)]==_0x34b4a0(0xc3))var _0x5c56ac=users[_0x34b4a0(0xca)];else{if(_0x193699[0x0][_0x34b4a0(0xf5)]=='Hindi')var _0x5c56ac=users['Hindi'];else{if(_0x193699[0x0][_0x34b4a0(0xf5)]==_0x34b4a0(0x10a))var _0x5c56ac=users[_0x34b4a0(0x10a)];else{if(_0x193699[0x0][_0x34b4a0(0xf5)]==_0x34b4a0(0xdc))var _0x5c56ac=users[_0x34b4a0(0xdc)];else{if(_0x193699[0x0][_0x34b4a0(0xf5)]==_0x34b4a0(0xc2))var _0x5c56ac=users[_0x34b4a0(0xc2)];else{if(_0x193699[0x0]['language']==_0x34b4a0(0xd7))var _0x5c56ac=users[_0x34b4a0(0xf6)];else{if(_0x193699[0x0][_0x34b4a0(0xf5)]==_0x34b4a0(0x107))var _0x5c56ac=users[_0x34b4a0(0x107)];else{if(_0x193699[0x0][_0x34b4a0(0xf5)]==_0x34b4a0(0x101))var _0x5c56ac=users[_0x34b4a0(0xb9)];}}}}}}}_0x3d8d62[_0x34b4a0(0xf1)]('collection_sox',{'success':_0x4bc761['flash'](_0x34b4a0(0xd1)),'errors':_0x4bc761['flash'](_0x34b4a0(0xe9)),'master_shop':_0x193699,'profile':_0x512599,'role':_0x6d4074,'language':_0x5c56ac,'sales_mine':_0x5ca223,'staff_arr':_0x3b30bb});}catch(_0x5a6e98){console[_0x34b4a0(0xf7)](_0x5a6e98);}}),router['get'](a0_0x19db71(0x10b),auth,async(_0x5265a6,_0x32f0f6)=>{var _0x3f9c30=a0_0x19db71;try{const _0x12886a=await master_shop[_0x3f9c30(0xf4)](),_0x5a9720=_0x5265a6['user'],_0x5cef05=await profile[_0x3f9c30(0xe5)]({'email':_0x5a9720['email']}),_0xf396c2=await staff['findOne']({'email':_0x5a9720[_0x3f9c30(0xc1)]}),_0x4b0b9f=await customer[_0x3f9c30(0xf4)]({'agent_id':_0xf396c2[_0x3f9c30(0xe6)]}),_0x38ac73=_0x5265a6[_0x3f9c30(0x103)]['id'],_0x36b1a3=await sales_order[_0x3f9c30(0xbc)](_0x38ac73);if(_0x12886a[0x0][_0x3f9c30(0xf5)]==_0x3f9c30(0xc3))var _0x4ec819=users[_0x3f9c30(0xca)];else{if(_0x12886a[0x0][_0x3f9c30(0xf5)]==_0x3f9c30(0xc6))var _0x4ec819=users[_0x3f9c30(0xc6)];else{if(_0x12886a[0x0][_0x3f9c30(0xf5)]==_0x3f9c30(0x10a))var _0x4ec819=users[_0x3f9c30(0x10a)];else{if(_0x12886a[0x0][_0x3f9c30(0xf5)]==_0x3f9c30(0xdc))var _0x4ec819=users[_0x3f9c30(0xdc)];else{if(_0x12886a[0x0][_0x3f9c30(0xf5)]=='French')var _0x4ec819=users[_0x3f9c30(0xc2)];else{if(_0x12886a[0x0][_0x3f9c30(0xf5)]==_0x3f9c30(0xd7))var _0x4ec819=users[_0x3f9c30(0xf6)];else{if(_0x12886a[0x0][_0x3f9c30(0xf5)]==_0x3f9c30(0x107))var _0x4ec819=users[_0x3f9c30(0x107)];else{if(_0x12886a[0x0][_0x3f9c30(0xf5)]==_0x3f9c30(0x101))var _0x4ec819=users['Arabic'];}}}}}}}_0x32f0f6[_0x3f9c30(0xf1)](_0x3f9c30(0x108),{'success':_0x5265a6[_0x3f9c30(0xde)]('success'),'errors':_0x5265a6['flash']('errors'),'master_shop':_0x12886a,'profile':_0x5cef05,'role':_0x5a9720,'language':_0x4ec819,'customer':_0x4b0b9f,'sales_sa':_0x36b1a3});}catch(_0x56a7db){console[_0x3f9c30(0xf7)](_0x56a7db);}}),router[a0_0x19db71(0xbd)]('/view_x',auth,async(_0x4f4f8e,_0x5935c6)=>{var _0x3011d1=a0_0x19db71;try{const _0x7c4e45=await master_shop[_0x3011d1(0xf4)](),_0x9c3d0e=_0x4f4f8e[_0x3011d1(0xfb)],_0xe6b381=await profile[_0x3011d1(0xe5)]({'email':_0x9c3d0e[_0x3011d1(0xc1)]}),_0x106528=await staff[_0x3011d1(0xe5)]({'email':_0x9c3d0e[_0x3011d1(0xc1)],'type_of_acc_cat':'1'});let _0x2654a0=[];_0x106528!=null&&(_0x2654a0=await sales_sa[_0x3011d1(0xf4)]({'sales_staff_id':_0x106528['_id']}));if(_0x7c4e45[0x0][_0x3011d1(0xf5)]==_0x3011d1(0xc3))var _0xfdd84d=users[_0x3011d1(0xca)];else{if(_0x7c4e45[0x0][_0x3011d1(0xf5)]==_0x3011d1(0xc6))var _0xfdd84d=users[_0x3011d1(0xc6)];else{if(_0x7c4e45[0x0][_0x3011d1(0xf5)]==_0x3011d1(0x10a))var _0xfdd84d=users[_0x3011d1(0x10a)];else{if(_0x7c4e45[0x0][_0x3011d1(0xf5)]==_0x3011d1(0xdc))var _0xfdd84d=users['Spanish'];else{if(_0x7c4e45[0x0][_0x3011d1(0xf5)]==_0x3011d1(0xc2))var _0xfdd84d=users[_0x3011d1(0xc2)];else{if(_0x7c4e45[0x0][_0x3011d1(0xf5)]==_0x3011d1(0xd7))var _0xfdd84d=users[_0x3011d1(0xf6)];else{if(_0x7c4e45[0x0][_0x3011d1(0xf5)]==_0x3011d1(0x107))var _0xfdd84d=users[_0x3011d1(0x107)];else{if(_0x7c4e45[0x0][_0x3011d1(0xf5)]==_0x3011d1(0x101))var _0xfdd84d=users[_0x3011d1(0xb9)];}}}}}}}_0x5935c6[_0x3011d1(0xf1)](_0x3011d1(0xce),{'success':_0x4f4f8e['flash'](_0x3011d1(0xd1)),'errors':_0x4f4f8e[_0x3011d1(0xde)](_0x3011d1(0xe9)),'master_shop':_0x7c4e45,'profile':_0xe6b381,'role':_0x9c3d0e,'language':_0xfdd84d,'sales_mine':_0x2654a0,'staff_arr':_0x106528});}catch(_0x2224f3){console[_0x3011d1(0xf7)](_0x2224f3);}}),router[a0_0x19db71(0xbd)](a0_0x19db71(0xf2),auth,async(_0x596128,_0x21949d)=>{var _0x47fdd1=a0_0x19db71;try{const _0x4a85c3=await master_shop[_0x47fdd1(0xf4)](),_0x132353=_0x596128[_0x47fdd1(0xfb)],_0x580df7=await profile[_0x47fdd1(0xe5)]({'email':_0x132353[_0x47fdd1(0xc1)]}),_0x1cd062=await staff[_0x47fdd1(0xe5)]({'email':_0x132353[_0x47fdd1(0xc1)]}),_0x2e3594=await customer['find']({'agent_id':_0x1cd062[_0x47fdd1(0xe6)]}),_0x4ff5b1=_0x596128['params']['id'],_0x4bfaf6=await sales_sa[_0x47fdd1(0xbc)](_0x4ff5b1);if(_0x4a85c3[0x0][_0x47fdd1(0xf5)]==_0x47fdd1(0xc3))var _0x134b56=users[_0x47fdd1(0xca)];else{if(_0x4a85c3[0x0][_0x47fdd1(0xf5)]==_0x47fdd1(0xc6))var _0x134b56=users[_0x47fdd1(0xc6)];else{if(_0x4a85c3[0x0][_0x47fdd1(0xf5)]==_0x47fdd1(0x10a))var _0x134b56=users[_0x47fdd1(0x10a)];else{if(_0x4a85c3[0x0][_0x47fdd1(0xf5)]==_0x47fdd1(0xdc))var _0x134b56=users[_0x47fdd1(0xdc)];else{if(_0x4a85c3[0x0]['language']=='French')var _0x134b56=users[_0x47fdd1(0xc2)];else{if(_0x4a85c3[0x0]['language']=='Portuguese\x20(BR)')var _0x134b56=users[_0x47fdd1(0xf6)];else{if(_0x4a85c3[0x0]['language']==_0x47fdd1(0x107))var _0x134b56=users[_0x47fdd1(0x107)];else{if(_0x4a85c3[0x0][_0x47fdd1(0xf5)]==_0x47fdd1(0x101))var _0x134b56=users[_0x47fdd1(0xb9)];}}}}}}}_0x21949d[_0x47fdd1(0xf1)](_0x47fdd1(0x10d),{'success':_0x596128['flash'](_0x47fdd1(0xd1)),'errors':_0x596128[_0x47fdd1(0xde)](_0x47fdd1(0xe9)),'master_shop':_0x4a85c3,'profile':_0x580df7,'role':_0x132353,'language':_0x134b56,'customer':_0x2e3594,'sales_sa':_0x4bfaf6,'staff_arr':_0x1cd062});}catch(_0x4d7ccd){console[_0x47fdd1(0xf7)](_0x4d7ccd);}}),router['post'](a0_0x19db71(0xf2),auth,async(_0x276180,_0x1d043a)=>{var _0x4e6195=a0_0x19db71;try{const _0x3ae350=_0x276180[_0x4e6195(0x103)]['id'],_0x14492a=await sales_sa['findById'](_0x3ae350),{collection:_0x3fa339,invoicemoney:_0x352a08,collectionnumber:_0xf3cfb1,typeofpayment:_0x52b11f,cashdate:_0x5e506c,id_detl:_0x19ff31}=_0x276180[_0x4e6195(0xfd)];if(typeof _0x19ff31==_0x4e6195(0x104))var _0x42df57=[_0x276180[_0x4e6195(0xfd)][_0x4e6195(0xfa)]],_0x3e6fcb=[_0x276180[_0x4e6195(0xfd)][_0x4e6195(0xbe)]],_0x219041=[_0x276180['body']['spwp']],_0x10f284=[_0x276180[_0x4e6195(0xfd)]['fin_disc']],_0x3c88ea=[_0x276180['body'][_0x4e6195(0xd3)]],_0x2fb090=[_0x276180[_0x4e6195(0xfd)]['bo_disc']],_0x2a6051=[_0x276180[_0x4e6195(0xfd)][_0x4e6195(0xdf)]];else var _0x42df57=[..._0x276180[_0x4e6195(0xfd)][_0x4e6195(0xfa)]],_0x3e6fcb=[..._0x276180[_0x4e6195(0xfd)]['ewt']],_0x219041=[..._0x276180[_0x4e6195(0xfd)][_0x4e6195(0xed)]],_0x10f284=[..._0x276180['body'][_0x4e6195(0x109)]],_0x3c88ea=[..._0x276180[_0x4e6195(0xfd)][_0x4e6195(0xd3)]],_0x2fb090=[..._0x276180['body']['bo_disc']],_0x2a6051=[..._0x276180[_0x4e6195(0xfd)]['totalNewPrice']];const _0x4e8121=_0x42df57[_0x4e6195(0xb8)](_0x4e48b8=>{return _0x4e48b8={'id_detl':_0x4e48b8};});_0x3e6fcb[_0x4e6195(0x10e)]((_0xb9cca3,_0x37d53c)=>{_0x4e8121[_0x37d53c]['ewt']=_0xb9cca3;}),_0x219041['forEach']((_0x40622e,_0x4a16c6)=>{var _0x32460b=_0x4e6195;_0x4e8121[_0x4a16c6][_0x32460b(0xed)]=_0x40622e;}),_0x10f284[_0x4e6195(0x10e)]((_0x489f4c,_0x3e2984)=>{var _0x391f8c=_0x4e6195;_0x4e8121[_0x3e2984][_0x391f8c(0x109)]=_0x489f4c;}),_0x3c88ea[_0x4e6195(0x10e)]((_0x4823b0,_0x41f7b9)=>{_0x4e8121[_0x41f7b9]['vol_deals']=_0x4823b0;}),_0x2fb090['forEach']((_0x169b84,_0x3ceb04)=>{_0x4e8121[_0x3ceb04]['bo_disc']=_0x169b84;}),_0x2a6051['forEach']((_0x24383d,_0x3d98b6)=>{var _0x33934a=_0x4e6195;_0x4e8121[_0x3d98b6][_0x33934a(0xcb)]=_0x24383d;}),_0x14492a[_0x4e6195(0xdd)]=_0x3fa339,_0x14492a[_0x4e6195(0xec)]=_0xf3cfb1,_0x14492a[_0x4e6195(0xbb)]=_0x52b11f,_0x14492a[_0x4e6195(0xf9)]=_0x5e506c,_0x14492a[_0x4e6195(0xd5)]=_0x4e6195(0xf3),_0x14492a['typeofprocess']='1';const _0x8958e6=await _0x14492a[_0x4e6195(0xe1)]();if(_0x8958e6[_0x4e6195(0xd5)]==_0x4e6195(0xf3))for(let _0x232265=0x0;_0x232265<=_0x4e8121['length']-0x1;_0x232265++){const _0x189984=_0x4e8121[_0x232265],_0x1c79a4=mongoose[_0x4e6195(0x102)][_0x4e6195(0xc5)];console[_0x4e6195(0xf7)](_0x189984);const _0x3ebf2a=await sales_sa[_0x4e6195(0x100)]({'_id':_0x1c79a4(_0x3ae350[_0x4e6195(0x105)]()),'sale_product._id':_0x1c79a4(_0x189984[_0x4e6195(0xfa)][_0x4e6195(0x105)]())},{'$set':{'sale_product.$.ewt':_0x189984[_0x4e6195(0xbe)],'sale_product.$.spwp':_0x189984[_0x4e6195(0xed)],'sale_product.$.fin_disc':_0x189984[_0x4e6195(0x109)],'sale_product.$.vol_deals':_0x189984[_0x4e6195(0xd3)],'sale_product.$.bo_disc':_0x189984[_0x4e6195(0xc9)],'sale_product.$.totalprice':parseFloat(_0x189984[_0x4e6195(0xcb)])}});}_0x276180['flash'](_0x4e6195(0xd1),_0x4e6195(0xd9)),_0x1d043a['redirect'](_0x4e6195(0xf8)+_0x3ae350);}catch(_0x2fcfe6){console[_0x4e6195(0xf7)](_0x2fcfe6);}}),router[a0_0x19db71(0xbd)](a0_0x19db71(0xd4),auth,async(_0x559689,_0x22ebc7)=>{var _0x422331=a0_0x19db71;try{const _0x3a7ce0=await master_shop['find'](),_0x52027=_0x559689[_0x422331(0xfb)],_0x3ec925=await profile[_0x422331(0xe5)]({'email':_0x52027['email']}),_0x2b69b4=await staff[_0x422331(0xe5)]({'email':_0x52027[_0x422331(0xc1)],'type_of_acc_cat':'1'});let _0x3774d5=[];_0x2b69b4!=null&&(_0x3774d5=await sales_order[_0x422331(0xf4)]({'sales_staff_id':_0x2b69b4[_0x422331(0xe6)]}));if(_0x3a7ce0[0x0]['language']=='English\x20(US)')var _0xf3849=users['English'];else{if(_0x3a7ce0[0x0]['language']=='Hindi')var _0xf3849=users[_0x422331(0xc6)];else{if(_0x3a7ce0[0x0][_0x422331(0xf5)]==_0x422331(0x10a))var _0xf3849=users[_0x422331(0x10a)];else{if(_0x3a7ce0[0x0][_0x422331(0xf5)]==_0x422331(0xdc))var _0xf3849=users[_0x422331(0xdc)];else{if(_0x3a7ce0[0x0]['language']=='French')var _0xf3849=users['French'];else{if(_0x3a7ce0[0x0][_0x422331(0xf5)]==_0x422331(0xd7))var _0xf3849=users[_0x422331(0xf6)];else{if(_0x3a7ce0[0x0][_0x422331(0xf5)]==_0x422331(0x107))var _0xf3849=users['Chinese'];else{if(_0x3a7ce0[0x0]['language']==_0x422331(0x101))var _0xf3849=users[_0x422331(0xb9)];}}}}}}}_0x22ebc7[_0x422331(0xf1)](_0x422331(0xfe),{'success':_0x559689[_0x422331(0xde)](_0x422331(0xd1)),'errors':_0x559689[_0x422331(0xde)](_0x422331(0xe9)),'master_shop':_0x3a7ce0,'profile':_0x3ec925,'role':_0x52027,'language':_0xf3849,'sales_mine':_0x3774d5,'staff_arr':_0x2b69b4});}catch(_0xf3aa5e){console[_0x422331(0xf7)](_0xf3aa5e);}}),router[a0_0x19db71(0xbd)]('/view_so_xt/:id',auth,async(_0xa36651,_0x345200)=>{var _0xb15871=a0_0x19db71;try{const _0x3dd971=await master_shop[_0xb15871(0xf4)](),_0x2ab2e5=_0xa36651[_0xb15871(0xfb)],_0x38384e=await profile[_0xb15871(0xe5)]({'email':_0x2ab2e5['email']}),_0x4ae319=await staff[_0xb15871(0xe5)]({'email':_0x2ab2e5['email']}),_0x20c922=await customer['find']({'agent_id':_0x4ae319[_0xb15871(0xe6)]}),_0x1c5b38=_0xa36651['params']['id'],_0x41f1b4=await sales_order[_0xb15871(0xbc)](_0x1c5b38);if(_0x3dd971[0x0][_0xb15871(0xf5)]==_0xb15871(0xc3))var _0x14ac65=users[_0xb15871(0xca)];else{if(_0x3dd971[0x0][_0xb15871(0xf5)]==_0xb15871(0xc6))var _0x14ac65=users[_0xb15871(0xc6)];else{if(_0x3dd971[0x0]['language']=='German')var _0x14ac65=users['German'];else{if(_0x3dd971[0x0][_0xb15871(0xf5)]==_0xb15871(0xdc))var _0x14ac65=users[_0xb15871(0xdc)];else{if(_0x3dd971[0x0][_0xb15871(0xf5)]==_0xb15871(0xc2))var _0x14ac65=users[_0xb15871(0xc2)];else{if(_0x3dd971[0x0][_0xb15871(0xf5)]==_0xb15871(0xd7))var _0x14ac65=users[_0xb15871(0xf6)];else{if(_0x3dd971[0x0][_0xb15871(0xf5)]=='Chinese')var _0x14ac65=users[_0xb15871(0x107)];else{if(_0x3dd971[0x0][_0xb15871(0xf5)]==_0xb15871(0x101))var _0x14ac65=users[_0xb15871(0xb9)];}}}}}}}_0x345200['render'](_0xb15871(0xba),{'success':_0xa36651[_0xb15871(0xde)](_0xb15871(0xd1)),'errors':_0xa36651[_0xb15871(0xde)](_0xb15871(0xe9)),'master_shop':_0x3dd971,'profile':_0x38384e,'role':_0x2ab2e5,'language':_0x14ac65,'customer':_0x20c922,'sales_sa':_0x41f1b4,'staff_arr':_0x4ae319});}catch(_0x4e6fbd){console[_0xb15871(0xf7)](_0x4e6fbd);}}),router[a0_0x19db71(0x10c)]('/view_so_xt/:id',auth,async(_0x728c10,_0x3226d6)=>{var _0x1b790c=a0_0x19db71;try{const _0x14044b=_0x728c10['params']['id'],_0x1e8fb4=await sales_order[_0x1b790c(0xbc)](_0x14044b),{collection:_0x84b68c,invoicemoney:_0x11cd11,collectionnumber:_0x17c391,typeofpayment:_0x29bb5c,cashdate:_0x2d16fc,id_detl:_0x377fd2}=_0x728c10[_0x1b790c(0xfd)];_0x1e8fb4[_0x1b790c(0xdd)]=_0x84b68c,_0x1e8fb4['type_of_payment']=_0x29bb5c,_0x1e8fb4[_0x1b790c(0xf9)]=_0x2d16fc,_0x1e8fb4[_0x1b790c(0xd5)]=_0x1b790c(0xf3),_0x1e8fb4[_0x1b790c(0xe2)]='1';const _0x5bd410=await _0x1e8fb4[_0x1b790c(0xe1)]();_0x728c10['flash'](_0x1b790c(0xd1),'Collection\x20Update\x20successfully'),_0x3226d6[_0x1b790c(0xd6)](_0x1b790c(0xc7)+_0x14044b);}catch(_0x35e1c9){console[_0x1b790c(0xf7)](_0x35e1c9);}}),module['exports']=router;