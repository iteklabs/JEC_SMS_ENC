const a0_0x48864a=a0_0x13bd;(function(_0x3279af,_0x3b5fdb){const _0xc11789=a0_0x13bd,_0x3442f9=_0x3279af();while(!![]){try{const _0x3b5b66=parseInt(_0xc11789(0x150))/0x1*(parseInt(_0xc11789(0x134))/0x2)+parseInt(_0xc11789(0x11f))/0x3*(-parseInt(_0xc11789(0x137))/0x4)+-parseInt(_0xc11789(0x118))/0x5+-parseInt(_0xc11789(0x13e))/0x6*(-parseInt(_0xc11789(0x138))/0x7)+parseInt(_0xc11789(0x121))/0x8*(parseInt(_0xc11789(0x110))/0x9)+-parseInt(_0xc11789(0x136))/0xa+-parseInt(_0xc11789(0x140))/0xb*(-parseInt(_0xc11789(0x11e))/0xc);if(_0x3b5b66===_0x3b5fdb)break;else _0x3442f9['push'](_0x3442f9['shift']());}catch(_0x4ffc91){_0x3442f9['push'](_0x3442f9['shift']());}}}(a0_0x18f9,0x54b49));function a0_0x18f9(){const _0x3ea2ef=['warehouse_id_detl','../public/language/languages.json','German','invoice','product_name','72662hfbrgQ','date_time','373630UPwFPx','88TQMmRv','7eFlPBA','user','Portuguese','render','gross_price','errors','2703720cJwzYc','French','11bUKrnw','Hindi','false','Chinese','_id','post','express','warehouse','length','alertQTY','cancel','warehouse_checking','product_code','path','isUsed','map','11PAzbQh','flash','find','data_type','body','confirm_by','../models/all_models','expiry_date','out','isAvailable','date_recieved','ejs','sort','inc','Spanish','get','nodemailer','/view_data_all','English','maxperunit','9WFjXCo','All','language','Arabic','exports','product_stock','true','save','3374350CCDtFr','email','level','room_name','findOne','/view/','1605360SJwOuk','37920qDRyKO','/confirm_data','2825800XJHbnE','English\x20(US)','primary_code','../middleware/auth','Router','log','Portuguese\x20(BR)','isConfirm','batch_code','json','product_cat','/cancel_data','secondary_code','product_details'];a0_0x18f9=function(){return _0x3ea2ef;};return a0_0x18f9();}const express=require(a0_0x48864a(0x146)),app=express(),router=express[a0_0x48864a(0x125)](),{warehouse_validation_setup,master_shop,profile,warehouse,warehouse_temporary}=require(a0_0x48864a(0x102)),auth=require(a0_0x48864a(0x124)),nodemailer=require(a0_0x48864a(0x10c));var ejs=require(a0_0x48864a(0x107));const path=require(a0_0x48864a(0x14d)),users=require(a0_0x48864a(0x130));function a0_0x13bd(_0x1f248a,_0x1937bc){const _0x18f989=a0_0x18f9();return a0_0x13bd=function(_0x13bd25,_0x1f7552){_0x13bd25=_0x13bd25-0xfe;let _0x13a945=_0x18f989[_0x13bd25];return _0x13a945;},a0_0x13bd(_0x1f248a,_0x1937bc);}router[a0_0x48864a(0x10b)](a0_0x48864a(0x11d),auth,async(_0x61dc53,_0x28bc94)=>{const _0x2e2a8f=a0_0x48864a;try{const {username:_0x39f3e9,email:_0x42609b,role:_0x12355b}=_0x61dc53[_0x2e2a8f(0x139)],_0x7cd7b7=_0x61dc53[_0x2e2a8f(0x139)],_0xde2cae=await profile['findOne']({'email':_0x7cd7b7[_0x2e2a8f(0x119)]}),_0x240c84=await master_shop[_0x2e2a8f(0xfe)]();if(_0x240c84[0x0][_0x2e2a8f(0x112)]==_0x2e2a8f(0x122))var _0x41b7f7=users[_0x2e2a8f(0x10e)];else{if(_0x240c84[0x0][_0x2e2a8f(0x112)]=='Hindi')var _0x41b7f7=users[_0x2e2a8f(0x141)];else{if(_0x240c84[0x0][_0x2e2a8f(0x112)]==_0x2e2a8f(0x131))var _0x41b7f7=users[_0x2e2a8f(0x131)];else{if(_0x240c84[0x0]['language']==_0x2e2a8f(0x10a))var _0x41b7f7=users[_0x2e2a8f(0x10a)];else{if(_0x240c84[0x0][_0x2e2a8f(0x112)]==_0x2e2a8f(0x13f))var _0x41b7f7=users[_0x2e2a8f(0x13f)];else{if(_0x240c84[0x0]['language']==_0x2e2a8f(0x127))var _0x41b7f7=users[_0x2e2a8f(0x13a)];else{if(_0x240c84[0x0][_0x2e2a8f(0x112)]==_0x2e2a8f(0x143))var _0x41b7f7=users[_0x2e2a8f(0x143)];else{if(_0x240c84[0x0][_0x2e2a8f(0x112)]=='Arabic\x20(ae)')var _0x41b7f7=users[_0x2e2a8f(0x113)];}}}}}}}_0x28bc94[_0x2e2a8f(0x13b)](_0x2e2a8f(0x14b),{'success':_0x61dc53[_0x2e2a8f(0x151)]('success'),'errors':_0x61dc53[_0x2e2a8f(0x151)](_0x2e2a8f(0x13d)),'profile':_0xde2cae,'master_shop':_0x240c84,'role':_0x7cd7b7,'language':_0x41b7f7});}catch(_0x1eb4cb){console[_0x2e2a8f(0x126)](_0x1eb4cb);}}),router['post']('/check_to_confirm',auth,async(_0x1eb366,_0x5bdcae)=>{const _0x39c56a=a0_0x48864a;try{const {product_code:_0x280e6b,type_of_process:_0x5cf5e4}=_0x1eb366[_0x39c56a(0x100)];var _0x317537=_0x280e6b['split']('~');const _0x4acba9=_0x317537[0x0],_0x287020=_0x317537[0x1],_0x4710bd=_0x317537[0x2],_0x352ec3=_0x317537[0x3],_0x1e3a65=await warehouse_temporary[_0x39c56a(0xfe)]({'warehouse':_0x4acba9,'room_name':_0x287020,'level':_0x4710bd,'bay':_0x352ec3,'data_type':_0x5cf5e4,'isConfirm':'false'});_0x5bdcae['json'](_0x1e3a65);}catch(_0x5d92da){console[_0x39c56a(0x126)](_0x5d92da);}}),router[a0_0x48864a(0x145)](a0_0x48864a(0x120),auth,async(_0x10fe62,_0x1fedf5)=>{const _0x228408=a0_0x48864a;try{const {id_data:_0x3b10ff}=_0x10fe62[_0x228408(0x100)],_0x3bb713=await warehouse_temporary[_0x228408(0xfe)]({'_id':_0x3b10ff}),_0x512afe=_0x10fe62[_0x228408(0x139)],_0x3ad678=new Date();for(let _0x3e2de3=0x0;_0x3e2de3<=_0x3bb713[_0x228408(0x148)]-0x1;_0x3e2de3++){const _0x4c78a1=_0x3bb713[_0x3e2de3];var _0x37ecd0=0x0;if(_0x4c78a1['data_type']==_0x228408(0x109)){var _0x2a8663=await warehouse[_0x228408(0x11c)]({'name':_0x4c78a1['warehouse'],'room':_0x4c78a1['room_name']});const _0x483ea7=_0x2a8663['product_details'][_0x228408(0x14f)](_0x258b5a=>{const _0x1979ce=_0x228408;_0x258b5a[_0x1979ce(0x133)]==_0x4c78a1[_0x1979ce(0x133)]&&_0x258b5a['primary_code']==_0x4c78a1['primary_code']&&_0x258b5a[_0x1979ce(0x12d)]==_0x4c78a1[_0x1979ce(0x12d)]&&_0x258b5a[_0x1979ce(0x14c)]==_0x4c78a1[_0x1979ce(0x14c)]&&_0x258b5a['bay']==_0x4c78a1['bay']&&_0x258b5a[_0x1979ce(0x11a)]==_0x4c78a1['level']&&_0x258b5a['date_recieved']==_0x4c78a1['date_recieved']&&(_0x258b5a['product_stock']=parseInt(_0x258b5a[_0x1979ce(0x115)])+parseInt(_0x4c78a1[_0x1979ce(0x115)]),_0x37ecd0++);});_0x37ecd0=='0'&&(_0x2a8663[_0x228408(0x12e)]=_0x2a8663[_0x228408(0x12e)]['concat']({'product_name':_0x4c78a1[_0x228408(0x133)],'product_stock':_0x4c78a1['product_stock'],'primary_code':_0x4c78a1[_0x228408(0x123)],'secondary_code':_0x4c78a1[_0x228408(0x12d)],'product_code':_0x4c78a1[_0x228408(0x14c)],'bay':_0x4c78a1['bay'],'level':_0x4c78a1[_0x228408(0x11a)],'maxProducts':_0x4c78a1['maxStocks'],'unit':_0x4c78a1['unit'],'secondary_unit':_0x4c78a1['secondary_unit'],'maxPerUnit':_0x4c78a1[_0x228408(0x10f)],'alertQTY':_0x4c78a1[_0x228408(0x149)],'production_date':_0x4c78a1['production_date'],'expiry_date':_0x4c78a1[_0x228408(0x103)],'batch_code':_0x4c78a1[_0x228408(0x129)],'invoice':_0x4c78a1[_0x228408(0x132)],'product_cat':_0x4c78a1[_0x228408(0x12b)],'uuid':_0x4c78a1['uuid'],'gross_price':_0x4c78a1[_0x228408(0x13c)],'date_recieved':_0x4c78a1[_0x228408(0x106)],'isAvailable':_0x228408(0x116),'isUsed':'false','warehouse_id_temp_inc':_0x4c78a1[_0x228408(0x144)]})),_0x3bb713[_0x3e2de3]['isConfirm']=_0x228408(0x116),_0x3bb713[_0x3e2de3][_0x228408(0x101)]=_0x512afe[_0x228408(0x119)],_0x3bb713[_0x3e2de3]['date_time']=_0x3ad678,await _0x3bb713[_0x3e2de3][_0x228408(0x117)](),await _0x2a8663[_0x228408(0x117)]();}else{if(_0x4c78a1[_0x228408(0xff)]==_0x228408(0x104)){var _0x2a8663=await warehouse[_0x228408(0x11c)]({'name':_0x4c78a1['warehouse'],'room':_0x4c78a1[_0x228408(0x11b)]});const _0x11db10=_0x2a8663['product_details'][_0x228408(0x14f)](_0x1df80d=>{const _0x2af7e7=_0x228408;_0x1df80d[_0x2af7e7(0x133)]==_0x4c78a1['product_name']&&_0x1df80d[_0x2af7e7(0x123)]==_0x4c78a1[_0x2af7e7(0x123)]&&_0x1df80d[_0x2af7e7(0x12d)]==_0x4c78a1[_0x2af7e7(0x12d)]&&_0x1df80d['product_code']==_0x4c78a1['product_code']&&_0x1df80d['_id']==_0x4c78a1[_0x2af7e7(0x12f)]&&(_0x1df80d[_0x2af7e7(0x115)]=parseInt(_0x1df80d['product_stock'])-parseInt(_0x4c78a1[_0x2af7e7(0x115)]),_0x1df80d[_0x2af7e7(0x115)]==0x0?(_0x1df80d[_0x2af7e7(0x105)]=_0x2af7e7(0x142),_0x3bb713[_0x3e2de3]['isAvailable']=_0x2af7e7(0x142),_0x3bb713[_0x3e2de3]['isUsed']=_0x2af7e7(0x116)):_0x3bb713[_0x3e2de3]['isUsed']=_0x2af7e7(0x142),_0x1df80d[_0x2af7e7(0x14e)]=_0x2af7e7(0x142),_0x37ecd0++);});_0x3bb713[_0x3e2de3][_0x228408(0x128)]=_0x228408(0x116),_0x3bb713[_0x3e2de3][_0x228408(0x101)]=_0x512afe[_0x228408(0x119)],_0x3bb713[_0x3e2de3][_0x228408(0x135)]=_0x3ad678,await _0x3bb713[_0x3e2de3][_0x228408(0x117)](),await _0x2a8663['save']();}}}_0x1fedf5[_0x228408(0x12a)]({'data_main':_0x3bb713,'data_warehouse':_0x2a8663});}catch(_0xf5a974){console[_0x228408(0x126)](_0xf5a974);}}),router[a0_0x48864a(0x145)](a0_0x48864a(0x12c),auth,async(_0xf88f1c,_0x1f0f6a)=>{const _0x245500=a0_0x48864a;try{const {id_data:_0x3c8a5c}=_0xf88f1c['body'],_0x965178=await warehouse_temporary[_0x245500(0xfe)]({'_id':_0x3c8a5c}),_0x498684=_0xf88f1c[_0x245500(0x139)],_0x49b570=new Date();for(let _0x4a62e3=0x0;_0x4a62e3<=_0x965178[_0x245500(0x148)]-0x1;_0x4a62e3++){const _0x58381d=_0x965178[_0x4a62e3];var _0x327936=0x0;if(_0x58381d[_0x245500(0xff)]==_0x245500(0x104)){var _0x4d2c03=await warehouse[_0x245500(0x11c)]({'name':_0x58381d[_0x245500(0x147)],'room':_0x58381d['room_name']});const _0x35c50c=_0x4d2c03[_0x245500(0x12e)][_0x245500(0x14f)](_0x20e0b8=>{const _0x466019=_0x245500;_0x20e0b8[_0x466019(0x133)]==_0x58381d[_0x466019(0x133)]&&_0x20e0b8[_0x466019(0x123)]==_0x58381d[_0x466019(0x123)]&&_0x20e0b8[_0x466019(0x12d)]==_0x58381d['secondary_code']&&_0x20e0b8[_0x466019(0x14c)]==_0x58381d[_0x466019(0x14c)]&&_0x20e0b8['_id']==_0x58381d['warehouse_id_detl']&&(_0x20e0b8[_0x466019(0x105)]=_0x466019(0x116),_0x965178[_0x4a62e3]['isAvailable']=_0x466019(0x14a),_0x965178[_0x4a62e3][_0x466019(0x14e)]=_0x466019(0x116),_0x965178[_0x4a62e3][_0x466019(0x101)]=_0x498684[_0x466019(0x119)],_0x965178[_0x4a62e3]['date_time']=_0x49b570,_0x20e0b8[_0x466019(0x14e)]=_0x466019(0x142),_0x327936++);});_0x965178[_0x4a62e3]['isConfirm']='true',await _0x965178[_0x4a62e3]['save'](),await _0x4d2c03['save']();}}_0x1f0f6a[_0x245500(0x12a)]({'data_main':_0x965178,'data_warehouse':_0x4d2c03});}catch(_0x17c392){console[_0x245500(0x126)](_0x17c392);}}),router[a0_0x48864a(0x145)](a0_0x48864a(0x10d),auth,async(_0x39dcc2,_0x32932c)=>{const _0x432bb0=a0_0x48864a;try{const {data_show:_0xaf4b58,type_proc:_0x2f509a}=_0x39dcc2[_0x432bb0(0x100)];if(_0xaf4b58==_0x432bb0(0x111)){const _0x4817f8=await warehouse_temporary[_0x432bb0(0xfe)]({'isConfirm':_0x432bb0(0x116),'data_type':_0x2f509a})[_0x432bb0(0x108)]({'level':0x1,'bin':0x1});_0x32932c[_0x432bb0(0x12a)](_0x4817f8);}else{const _0x48145b=await warehouse_temporary['find']({'isConfirm':_0xaf4b58,'data_type':_0x2f509a})[_0x432bb0(0x108)]({'level':0x1,'bin':0x1});_0x32932c[_0x432bb0(0x12a)](_0x48145b);}}catch(_0x46ac9b){console['log'](_0x46ac9b);}}),module[a0_0x48864a(0x114)]=router;