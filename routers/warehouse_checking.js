const a0_0x3321e3=a0_0x1a03;function a0_0x1a03(_0x27519d,_0x191f33){const _0x27bb2d=a0_0x27bb();return a0_0x1a03=function(_0x1a03f4,_0x3472ca){_0x1a03f4=_0x1a03f4-0xf5;let _0x5d5192=_0x27bb2d[_0x1a03f4];return _0x5d5192;},a0_0x1a03(_0x27519d,_0x191f33);}(function(_0x1b2d7f,_0x50776c){const _0x5af48f=a0_0x1a03,_0x3651f8=_0x1b2d7f();while(!![]){try{const _0x5524cf=parseInt(_0x5af48f(0x11f))/0x1*(parseInt(_0x5af48f(0x112))/0x2)+parseInt(_0x5af48f(0x132))/0x3+-parseInt(_0x5af48f(0xf6))/0x4*(parseInt(_0x5af48f(0x138))/0x5)+parseInt(_0x5af48f(0x13f))/0x6+parseInt(_0x5af48f(0x136))/0x7*(-parseInt(_0x5af48f(0x11c))/0x8)+-parseInt(_0x5af48f(0x12a))/0x9*(parseInt(_0x5af48f(0xfc))/0xa)+-parseInt(_0x5af48f(0x142))/0xb*(-parseInt(_0x5af48f(0x13e))/0xc);if(_0x5524cf===_0x50776c)break;else _0x3651f8['push'](_0x3651f8['shift']());}catch(_0x582596){_0x3651f8['push'](_0x3651f8['shift']());}}}(a0_0x27bb,0xb952c));const express=require(a0_0x3321e3(0x144)),app=express(),router=express['Router'](),{warehouse_validation_setup,master_shop,profile,warehouse,warehouse_temporary}=require(a0_0x3321e3(0x126)),auth=require(a0_0x3321e3(0x133)),nodemailer=require(a0_0x3321e3(0x11e));function a0_0x27bb(){const _0x3e5092=['save','express','gross_price','inc','warehouse_id_detl','json','4hhjHdD','product_code','expiry_date','Hindi','uuid','Chinese','110pJOWuz','ejs','language','secondary_unit','body','_id','date_recieved','product_cat','render','room_name','German','isConfirm','sort','maxStocks','Portuguese\x20(BR)','product_name','flash','invoice','product_stock','isUsed','primary_code','user','356bbunQA','production_date','false','isAvailable','findOne','post','get','product_details','/confirm_data','find','3104uAMKGt','bay','nodemailer','7474AAExAP','/cancel_data','data_type','map','exports','secondary_code','All','../models/all_models','length','English\x20(US)','date_time','380493SizRUq','maxperunit','success','level','Portuguese','Spanish','Arabic','out','682758qqwZDB','../middleware/auth','French','email','6013URhuwO','true','2359290LfgifV','warehouse_checking','warehouse','errors','../public/language/languages.json','log','2222664aZTbqo','1716606oJnxjp','/view_data_all','confirm_by','11xwSpEl'];a0_0x27bb=function(){return _0x3e5092;};return a0_0x27bb();}var ejs=require(a0_0x3321e3(0xfd));const path=require('path'),users=require(a0_0x3321e3(0x13c));router[a0_0x3321e3(0x118)]('/view/',auth,async(_0x221457,_0x51d961)=>{const _0x5f0ff0=a0_0x3321e3;try{const {username:_0x2fba17,email:_0x48fffb,role:_0x1b898b}=_0x221457[_0x5f0ff0(0x111)],_0x922cd5=_0x221457['user'],_0x12c071=await profile[_0x5f0ff0(0x116)]({'email':_0x922cd5[_0x5f0ff0(0x135)]}),_0x599ee8=await master_shop[_0x5f0ff0(0x11b)]();if(_0x599ee8[0x0][_0x5f0ff0(0xfe)]==_0x5f0ff0(0x128))var _0x24dc5f=users['English'];else{if(_0x599ee8[0x0][_0x5f0ff0(0xfe)]==_0x5f0ff0(0xf9))var _0x24dc5f=users['Hindi'];else{if(_0x599ee8[0x0][_0x5f0ff0(0xfe)]=='German')var _0x24dc5f=users[_0x5f0ff0(0x106)];else{if(_0x599ee8[0x0][_0x5f0ff0(0xfe)]==_0x5f0ff0(0x12f))var _0x24dc5f=users['Spanish'];else{if(_0x599ee8[0x0][_0x5f0ff0(0xfe)]==_0x5f0ff0(0x134))var _0x24dc5f=users[_0x5f0ff0(0x134)];else{if(_0x599ee8[0x0][_0x5f0ff0(0xfe)]==_0x5f0ff0(0x10a))var _0x24dc5f=users[_0x5f0ff0(0x12e)];else{if(_0x599ee8[0x0][_0x5f0ff0(0xfe)]=='Chinese')var _0x24dc5f=users[_0x5f0ff0(0xfb)];else{if(_0x599ee8[0x0][_0x5f0ff0(0xfe)]=='Arabic\x20(ae)')var _0x24dc5f=users[_0x5f0ff0(0x130)];}}}}}}}_0x51d961[_0x5f0ff0(0x104)](_0x5f0ff0(0x139),{'success':_0x221457[_0x5f0ff0(0x10c)](_0x5f0ff0(0x12c)),'errors':_0x221457[_0x5f0ff0(0x10c)](_0x5f0ff0(0x13b)),'profile':_0x12c071,'master_shop':_0x599ee8,'role':_0x922cd5,'language':_0x24dc5f});}catch(_0x3fc533){console['log'](_0x3fc533);}}),router['post']('/check_to_confirm',auth,async(_0x7ff92f,_0x45cbb1)=>{const _0x47be20=a0_0x3321e3;try{const {product_code:_0x166886,type_of_process:_0x35a804}=_0x7ff92f[_0x47be20(0x100)];var _0x46e220=_0x166886['split']('~');const _0x53d3a1=_0x46e220[0x0],_0x2c2a2b=_0x46e220[0x1],_0x4d30ce=_0x46e220[0x2],_0x797a6a=_0x46e220[0x3],_0x10582d=await warehouse_temporary[_0x47be20(0x11b)]({'warehouse':_0x53d3a1,'room_name':_0x2c2a2b,'level':_0x4d30ce,'bay':_0x797a6a,'data_type':_0x35a804,'isConfirm':_0x47be20(0x114)});_0x45cbb1['json'](_0x10582d);}catch(_0x151ae4){console[_0x47be20(0x13d)](_0x151ae4);}}),router[a0_0x3321e3(0x117)](a0_0x3321e3(0x11a),auth,async(_0x5797f4,_0x2c6bc7)=>{const _0xf83367=a0_0x3321e3;try{const {id_data:_0x5250b9}=_0x5797f4[_0xf83367(0x100)],_0x57e6e4=await warehouse_temporary[_0xf83367(0x11b)]({'_id':_0x5250b9}),_0x3cff34=_0x5797f4['user'],_0x1bad0b=new Date();for(let _0x35b937=0x0;_0x35b937<=_0x57e6e4[_0xf83367(0x127)]-0x1;_0x35b937++){const _0x33048c=_0x57e6e4[_0x35b937];var _0x1791d2=0x0;if(_0x33048c[_0xf83367(0x121)]==_0xf83367(0x146)){var _0x258d99=await warehouse[_0xf83367(0x116)]({'name':_0x33048c[_0xf83367(0x13a)],'room':_0x33048c[_0xf83367(0x105)]});const _0x31de46=_0x258d99[_0xf83367(0x119)][_0xf83367(0x122)](_0x199ac2=>{const _0x3521d8=_0xf83367;_0x199ac2[_0x3521d8(0x10b)]==_0x33048c[_0x3521d8(0x10b)]&&_0x199ac2[_0x3521d8(0x110)]==_0x33048c[_0x3521d8(0x110)]&&_0x199ac2[_0x3521d8(0x124)]==_0x33048c[_0x3521d8(0x124)]&&_0x199ac2[_0x3521d8(0xf7)]==_0x33048c['product_code']&&_0x199ac2[_0x3521d8(0x11d)]==_0x33048c[_0x3521d8(0x11d)]&&_0x199ac2[_0x3521d8(0x12d)]==_0x33048c[_0x3521d8(0x12d)]&&_0x199ac2[_0x3521d8(0x102)]==_0x33048c['date_recieved']&&(_0x199ac2[_0x3521d8(0x10e)]=parseInt(_0x199ac2['product_stock'])+parseInt(_0x33048c[_0x3521d8(0x10e)]),_0x1791d2++);});_0x1791d2=='0'&&(_0x258d99['product_details']=_0x258d99[_0xf83367(0x119)]['concat']({'product_name':_0x33048c[_0xf83367(0x10b)],'product_stock':_0x33048c[_0xf83367(0x10e)],'primary_code':_0x33048c[_0xf83367(0x110)],'secondary_code':_0x33048c[_0xf83367(0x124)],'product_code':_0x33048c[_0xf83367(0xf7)],'bay':_0x33048c['bay'],'level':_0x33048c[_0xf83367(0x12d)],'maxProducts':_0x33048c[_0xf83367(0x109)],'unit':_0x33048c['unit'],'secondary_unit':_0x33048c[_0xf83367(0xff)],'maxPerUnit':_0x33048c[_0xf83367(0x12b)],'alertQTY':_0x33048c['alertQTY'],'production_date':_0x33048c[_0xf83367(0x113)],'expiry_date':_0x33048c[_0xf83367(0xf8)],'batch_code':_0x33048c['batch_code'],'invoice':_0x33048c[_0xf83367(0x10d)],'product_cat':_0x33048c[_0xf83367(0x103)],'uuid':_0x33048c[_0xf83367(0xfa)],'gross_price':_0x33048c[_0xf83367(0x145)],'date_recieved':_0x33048c[_0xf83367(0x102)],'isAvailable':_0xf83367(0x137),'isUsed':'false','warehouse_id_temp_inc':_0x33048c[_0xf83367(0x101)]})),_0x57e6e4[_0x35b937][_0xf83367(0x107)]=_0xf83367(0x137),_0x57e6e4[_0x35b937][_0xf83367(0x141)]=_0x3cff34[_0xf83367(0x135)],_0x57e6e4[_0x35b937]['date_time']=_0x1bad0b,await _0x57e6e4[_0x35b937]['save'](),await _0x258d99[_0xf83367(0x143)]();}else{if(_0x33048c[_0xf83367(0x121)]==_0xf83367(0x131)){var _0x258d99=await warehouse['findOne']({'name':_0x33048c['warehouse'],'room':_0x33048c[_0xf83367(0x105)]});const _0x16e385=_0x258d99['product_details'][_0xf83367(0x122)](_0x5e3d07=>{const _0x425663=_0xf83367;_0x5e3d07[_0x425663(0x10b)]==_0x33048c['product_name']&&_0x5e3d07[_0x425663(0x110)]==_0x33048c['primary_code']&&_0x5e3d07[_0x425663(0x124)]==_0x33048c['secondary_code']&&_0x5e3d07[_0x425663(0xf7)]==_0x33048c[_0x425663(0xf7)]&&_0x5e3d07[_0x425663(0x101)]==_0x33048c[_0x425663(0x147)]&&(_0x5e3d07[_0x425663(0x10e)]=parseInt(_0x5e3d07['product_stock'])-parseInt(_0x33048c['product_stock']),_0x5e3d07['product_stock']==0x0?(_0x5e3d07[_0x425663(0x115)]=_0x425663(0x114),_0x57e6e4[_0x35b937][_0x425663(0x115)]='false',_0x57e6e4[_0x35b937][_0x425663(0x10f)]=_0x425663(0x137)):_0x57e6e4[_0x35b937]['isUsed']='false',_0x5e3d07[_0x425663(0x10f)]='false',_0x1791d2++);});_0x57e6e4[_0x35b937][_0xf83367(0x107)]=_0xf83367(0x137),_0x57e6e4[_0x35b937][_0xf83367(0x141)]=_0x3cff34['email'],_0x57e6e4[_0x35b937]['date_time']=_0x1bad0b,await _0x57e6e4[_0x35b937][_0xf83367(0x143)](),await _0x258d99['save']();}}}_0x2c6bc7[_0xf83367(0xf5)]({'data_main':_0x57e6e4,'data_warehouse':_0x258d99});}catch(_0x49babe){console['log'](_0x49babe);}}),router[a0_0x3321e3(0x117)](a0_0x3321e3(0x120),auth,async(_0x41127a,_0x1cb369)=>{const _0x342479=a0_0x3321e3;try{const {id_data:_0x2278e8}=_0x41127a[_0x342479(0x100)],_0x4ff0e3=await warehouse_temporary['find']({'_id':_0x2278e8}),_0x2df1fc=_0x41127a[_0x342479(0x111)],_0x1c79de=new Date();for(let _0xf9591d=0x0;_0xf9591d<=_0x4ff0e3['length']-0x1;_0xf9591d++){const _0x55faf9=_0x4ff0e3[_0xf9591d];var _0x4420a8=0x0;if(_0x55faf9[_0x342479(0x121)]==_0x342479(0x131)){var _0x3c83a0=await warehouse[_0x342479(0x116)]({'name':_0x55faf9['warehouse'],'room':_0x55faf9[_0x342479(0x105)]});const _0x52e4ad=_0x3c83a0[_0x342479(0x119)][_0x342479(0x122)](_0x3264bf=>{const _0xb1cb06=_0x342479;_0x3264bf['product_name']==_0x55faf9[_0xb1cb06(0x10b)]&&_0x3264bf[_0xb1cb06(0x110)]==_0x55faf9[_0xb1cb06(0x110)]&&_0x3264bf['secondary_code']==_0x55faf9[_0xb1cb06(0x124)]&&_0x3264bf[_0xb1cb06(0xf7)]==_0x55faf9[_0xb1cb06(0xf7)]&&_0x3264bf[_0xb1cb06(0x101)]==_0x55faf9['warehouse_id_detl']&&(_0x3264bf[_0xb1cb06(0x115)]='true',_0x4ff0e3[_0xf9591d][_0xb1cb06(0x115)]='cancel',_0x4ff0e3[_0xf9591d]['isUsed']=_0xb1cb06(0x137),_0x4ff0e3[_0xf9591d][_0xb1cb06(0x141)]=_0x2df1fc['email'],_0x4ff0e3[_0xf9591d][_0xb1cb06(0x129)]=_0x1c79de,_0x3264bf[_0xb1cb06(0x10f)]=_0xb1cb06(0x114),_0x4420a8++);});_0x4ff0e3[_0xf9591d][_0x342479(0x107)]=_0x342479(0x137),await _0x4ff0e3[_0xf9591d][_0x342479(0x143)](),await _0x3c83a0['save']();}}_0x1cb369['json']({'data_main':_0x4ff0e3,'data_warehouse':_0x3c83a0});}catch(_0x3281f1){console[_0x342479(0x13d)](_0x3281f1);}}),router['post'](a0_0x3321e3(0x140),auth,async(_0x538a67,_0x420bf8)=>{const _0xdd849b=a0_0x3321e3;try{const {data_show:_0x54d8a7,type_proc:_0x576927}=_0x538a67['body'];if(_0x54d8a7==_0xdd849b(0x125)){const _0x3c257a=await warehouse_temporary[_0xdd849b(0x11b)]({'isConfirm':'true','data_type':_0x576927})[_0xdd849b(0x108)]({'level':0x1,'bin':0x1});_0x420bf8[_0xdd849b(0xf5)](_0x3c257a);}else{const _0x4e9fc2=await warehouse_temporary[_0xdd849b(0x11b)]({'isConfirm':_0x54d8a7,'data_type':_0x576927})[_0xdd849b(0x108)]({'level':0x1,'bin':0x1});_0x420bf8[_0xdd849b(0xf5)](_0x4e9fc2);}}catch(_0x2cbdd4){console['log'](_0x2cbdd4);}}),module[a0_0x3321e3(0x123)]=router;