function a0_0x2d15(){const _0x2d249c=['secondary_unit','../models/all_models','body','concat','language','room_name','Spanish','product_name','isAvailable','Router','log','118edJNrv','isUsed','secondary_code','map','product_details','isConfirm','32138865WbMRJN','errors','Arabic','production_date','nodemailer','warehouse_checking','invoice','date_recieved','8933082aUrnvx','exports','confirm_by','bay','post','split','data_type','1868DddIaf','save','level','sort','expiry_date','Hindi','Arabic\x20(ae)','/check_to_confirm','35aGNBkU','date_time','product_code','batch_code','716407bOzfUn','/view/','320jQBmdY','out','length','7RWQtMv','cancel','Chinese','email','findOne','find','../public/language/languages.json','24483VTpsEh','alertQTY','user','ejs','English','render','json','path','44208cXhuYY','primary_code','maxStocks','false','product_stock','French','Portuguese','Portuguese\x20(BR)','All','true','7985040VrZCZj','flash','gross_price','inc','warehouse','German','/confirm_data'];a0_0x2d15=function(){return _0x2d249c;};return a0_0x2d15();}const a0_0x3b8b46=a0_0x3e45;(function(_0x4b8a18,_0x98ce52){const _0x4cad49=a0_0x3e45,_0x227658=_0x4b8a18();while(!![]){try{const _0x421ded=parseInt(_0x4cad49(0x1bb))/0x1+-parseInt(_0x4cad49(0x1eb))/0x2*(-parseInt(_0x4cad49(0x1c7))/0x3)+-parseInt(_0x4cad49(0x1af))/0x4*(-parseInt(_0x4cad49(0x1b7))/0x5)+-parseInt(_0x4cad49(0x1a8))/0x6*(-parseInt(_0x4cad49(0x1c0))/0x7)+-parseInt(_0x4cad49(0x1bd))/0x8*(-parseInt(_0x4cad49(0x1cf))/0x9)+parseInt(_0x4cad49(0x1d9))/0xa+-parseInt(_0x4cad49(0x1a0))/0xb;if(_0x421ded===_0x98ce52)break;else _0x227658['push'](_0x227658['shift']());}catch(_0x1d9b8e){_0x227658['push'](_0x227658['shift']());}}}(a0_0x2d15,0xba59b));const express=require('express'),app=express(),router=express[a0_0x3b8b46(0x1e9)](),{warehouse_validation_setup,master_shop,profile,warehouse,warehouse_temporary}=require(a0_0x3b8b46(0x1e1)),auth=require('../middleware/auth'),nodemailer=require(a0_0x3b8b46(0x1a4));var ejs=require(a0_0x3b8b46(0x1ca));function a0_0x3e45(_0x1b8f9f,_0x35c824){const _0x2d15dc=a0_0x2d15();return a0_0x3e45=function(_0x3e4548,_0xacfd15){_0x3e4548=_0x3e4548-0x19e;let _0x2beb44=_0x2d15dc[_0x3e4548];return _0x2beb44;},a0_0x3e45(_0x1b8f9f,_0x35c824);}const path=require(a0_0x3b8b46(0x1ce)),users=require(a0_0x3b8b46(0x1c6));router['get'](a0_0x3b8b46(0x1bc),auth,async(_0x53334c,_0x2ad14e)=>{const _0x119982=a0_0x3b8b46;try{const {username:_0x3815a8,email:_0x47e9d4,role:_0x4ac0da}=_0x53334c[_0x119982(0x1c9)],_0x17720a=_0x53334c[_0x119982(0x1c9)],_0x543114=await profile[_0x119982(0x1c4)]({'email':_0x17720a[_0x119982(0x1c3)]}),_0x10fea0=await master_shop[_0x119982(0x1c5)]();if(_0x10fea0[0x0][_0x119982(0x1e4)]=='English\x20(US)')var _0x382895=users[_0x119982(0x1cb)];else{if(_0x10fea0[0x0][_0x119982(0x1e4)]==_0x119982(0x1b4))var _0x382895=users[_0x119982(0x1b4)];else{if(_0x10fea0[0x0][_0x119982(0x1e4)]==_0x119982(0x1de))var _0x382895=users[_0x119982(0x1de)];else{if(_0x10fea0[0x0]['language']==_0x119982(0x1e6))var _0x382895=users[_0x119982(0x1e6)];else{if(_0x10fea0[0x0][_0x119982(0x1e4)]==_0x119982(0x1d4))var _0x382895=users[_0x119982(0x1d4)];else{if(_0x10fea0[0x0][_0x119982(0x1e4)]==_0x119982(0x1d6))var _0x382895=users[_0x119982(0x1d5)];else{if(_0x10fea0[0x0]['language']==_0x119982(0x1c2))var _0x382895=users[_0x119982(0x1c2)];else{if(_0x10fea0[0x0][_0x119982(0x1e4)]==_0x119982(0x1b5))var _0x382895=users[_0x119982(0x1a2)];}}}}}}}_0x2ad14e[_0x119982(0x1cc)](_0x119982(0x1a5),{'success':_0x53334c['flash']('success'),'errors':_0x53334c[_0x119982(0x1da)](_0x119982(0x1a1)),'profile':_0x543114,'master_shop':_0x10fea0,'role':_0x17720a,'language':_0x382895});}catch(_0x1f933c){console['log'](_0x1f933c);}}),router[a0_0x3b8b46(0x1ac)](a0_0x3b8b46(0x1b6),auth,async(_0x29ecb0,_0x5036ab)=>{const _0x46551a=a0_0x3b8b46;try{const {product_code:_0x5b821d,type_of_process:_0x5b98ad}=_0x29ecb0[_0x46551a(0x1e2)];var _0x13eb1d=_0x5b821d[_0x46551a(0x1ad)]('~');const _0x32f7a8=_0x13eb1d[0x0],_0x1930bf=_0x13eb1d[0x1],_0x1dcc86=_0x13eb1d[0x2],_0x1e57f6=_0x13eb1d[0x3],_0xba4629=await warehouse_temporary[_0x46551a(0x1c5)]({'warehouse':_0x32f7a8,'room_name':_0x1930bf,'level':_0x1dcc86,'bay':_0x1e57f6,'data_type':_0x5b98ad,'isConfirm':_0x46551a(0x1d2)});_0x5036ab[_0x46551a(0x1cd)](_0xba4629);}catch(_0x267f6d){console[_0x46551a(0x1ea)](_0x267f6d);}}),router[a0_0x3b8b46(0x1ac)](a0_0x3b8b46(0x1df),auth,async(_0x1d9e7e,_0x4efd61)=>{const _0x4fdfc1=a0_0x3b8b46;try{const {id_data:_0x240803}=_0x1d9e7e[_0x4fdfc1(0x1e2)],_0x5db3c6=await warehouse_temporary[_0x4fdfc1(0x1c5)]({'_id':_0x240803}),_0x5746be=_0x1d9e7e[_0x4fdfc1(0x1c9)],_0x5cedb3=new Date();for(let _0xa31923=0x0;_0xa31923<=_0x5db3c6[_0x4fdfc1(0x1bf)]-0x1;_0xa31923++){const _0x21c033=_0x5db3c6[_0xa31923];var _0x4d4c51=0x0;if(_0x21c033[_0x4fdfc1(0x1ae)]==_0x4fdfc1(0x1dc)){var _0x4fb6f9=await warehouse[_0x4fdfc1(0x1c4)]({'name':_0x21c033[_0x4fdfc1(0x1dd)],'room':_0x21c033[_0x4fdfc1(0x1e5)]});const _0x232e13=_0x4fb6f9[_0x4fdfc1(0x19e)][_0x4fdfc1(0x1ee)](_0x2be537=>{const _0x2d4dc3=_0x4fdfc1;_0x2be537[_0x2d4dc3(0x1e7)]==_0x21c033[_0x2d4dc3(0x1e7)]&&_0x2be537[_0x2d4dc3(0x1d0)]==_0x21c033[_0x2d4dc3(0x1d0)]&&_0x2be537[_0x2d4dc3(0x1ed)]==_0x21c033[_0x2d4dc3(0x1ed)]&&_0x2be537['product_code']==_0x21c033['product_code']&&_0x2be537['bay']==_0x21c033[_0x2d4dc3(0x1ab)]&&_0x2be537[_0x2d4dc3(0x1b1)]==_0x21c033[_0x2d4dc3(0x1b1)]&&_0x2be537[_0x2d4dc3(0x1a7)]==_0x21c033[_0x2d4dc3(0x1a7)]&&(_0x2be537[_0x2d4dc3(0x1d3)]=parseInt(_0x2be537[_0x2d4dc3(0x1d3)])+parseInt(_0x21c033[_0x2d4dc3(0x1d3)]),_0x4d4c51++);});_0x4d4c51=='0'&&(_0x4fb6f9[_0x4fdfc1(0x19e)]=_0x4fb6f9['product_details'][_0x4fdfc1(0x1e3)]({'product_name':_0x21c033[_0x4fdfc1(0x1e7)],'product_stock':_0x21c033['product_stock'],'primary_code':_0x21c033['primary_code'],'secondary_code':_0x21c033[_0x4fdfc1(0x1ed)],'product_code':_0x21c033[_0x4fdfc1(0x1b9)],'bay':_0x21c033[_0x4fdfc1(0x1ab)],'level':_0x21c033['level'],'maxProducts':_0x21c033[_0x4fdfc1(0x1d1)],'unit':_0x21c033['unit'],'secondary_unit':_0x21c033[_0x4fdfc1(0x1e0)],'maxPerUnit':_0x21c033['maxperunit'],'alertQTY':_0x21c033[_0x4fdfc1(0x1c8)],'production_date':_0x21c033[_0x4fdfc1(0x1a3)],'expiry_date':_0x21c033[_0x4fdfc1(0x1b3)],'batch_code':_0x21c033[_0x4fdfc1(0x1ba)],'invoice':_0x21c033[_0x4fdfc1(0x1a6)],'product_cat':_0x21c033['product_cat'],'uuid':_0x21c033['uuid'],'gross_price':_0x21c033[_0x4fdfc1(0x1db)],'date_recieved':_0x21c033[_0x4fdfc1(0x1a7)],'isAvailable':'true','isUsed':'false','warehouse_id_temp_inc':_0x21c033['_id']})),_0x5db3c6[_0xa31923][_0x4fdfc1(0x19f)]=_0x4fdfc1(0x1d8),_0x5db3c6[_0xa31923][_0x4fdfc1(0x1aa)]=_0x5746be['email'],_0x5db3c6[_0xa31923][_0x4fdfc1(0x1b8)]=_0x5cedb3,await _0x5db3c6[_0xa31923][_0x4fdfc1(0x1b0)](),await _0x4fb6f9[_0x4fdfc1(0x1b0)]();}else{if(_0x21c033[_0x4fdfc1(0x1ae)]==_0x4fdfc1(0x1be)){var _0x4fb6f9=await warehouse[_0x4fdfc1(0x1c4)]({'name':_0x21c033[_0x4fdfc1(0x1dd)],'room':_0x21c033[_0x4fdfc1(0x1e5)]});const _0x4f993c=_0x4fb6f9[_0x4fdfc1(0x19e)][_0x4fdfc1(0x1ee)](_0x9204a6=>{const _0xca2568=_0x4fdfc1;_0x9204a6[_0xca2568(0x1e7)]==_0x21c033[_0xca2568(0x1e7)]&&_0x9204a6[_0xca2568(0x1d0)]==_0x21c033[_0xca2568(0x1d0)]&&_0x9204a6['secondary_code']==_0x21c033[_0xca2568(0x1ed)]&&_0x9204a6[_0xca2568(0x1b9)]==_0x21c033[_0xca2568(0x1b9)]&&_0x9204a6['_id']==_0x21c033['warehouse_id_detl']&&(_0x9204a6['product_stock']=parseInt(_0x9204a6[_0xca2568(0x1d3)])-parseInt(_0x21c033[_0xca2568(0x1d3)]),_0x9204a6['product_stock']==0x0?(_0x9204a6[_0xca2568(0x1e8)]=_0xca2568(0x1d2),_0x5db3c6[_0xa31923][_0xca2568(0x1e8)]=_0xca2568(0x1d2),_0x5db3c6[_0xa31923][_0xca2568(0x1ec)]='true'):_0x5db3c6[_0xa31923][_0xca2568(0x1ec)]=_0xca2568(0x1d2),_0x9204a6[_0xca2568(0x1ec)]=_0xca2568(0x1d2),_0x4d4c51++);});_0x5db3c6[_0xa31923]['isConfirm']='true',_0x5db3c6[_0xa31923][_0x4fdfc1(0x1aa)]=_0x5746be[_0x4fdfc1(0x1c3)],_0x5db3c6[_0xa31923][_0x4fdfc1(0x1b8)]=_0x5cedb3,await _0x5db3c6[_0xa31923]['save'](),await _0x4fb6f9[_0x4fdfc1(0x1b0)]();}}}_0x4efd61[_0x4fdfc1(0x1cd)]({'data_main':_0x5db3c6,'data_warehouse':_0x4fb6f9});}catch(_0x1447f9){console[_0x4fdfc1(0x1ea)](_0x1447f9);}}),router[a0_0x3b8b46(0x1ac)]('/cancel_data',auth,async(_0x13b05a,_0x215dba)=>{const _0x2a3bff=a0_0x3b8b46;try{const {id_data:_0x28f684}=_0x13b05a[_0x2a3bff(0x1e2)],_0x4aa4fa=await warehouse_temporary[_0x2a3bff(0x1c5)]({'_id':_0x28f684}),_0x30b0dd=_0x13b05a[_0x2a3bff(0x1c9)],_0x38b683=new Date();for(let _0x10af6b=0x0;_0x10af6b<=_0x4aa4fa['length']-0x1;_0x10af6b++){const _0x4ae5c1=_0x4aa4fa[_0x10af6b];var _0x138ac1=0x0;if(_0x4ae5c1[_0x2a3bff(0x1ae)]==_0x2a3bff(0x1be)){var _0x1b44e6=await warehouse[_0x2a3bff(0x1c4)]({'name':_0x4ae5c1[_0x2a3bff(0x1dd)],'room':_0x4ae5c1[_0x2a3bff(0x1e5)]});const _0x320fea=_0x1b44e6['product_details']['map'](_0x555b08=>{const _0x155959=_0x2a3bff;_0x555b08[_0x155959(0x1e7)]==_0x4ae5c1['product_name']&&_0x555b08[_0x155959(0x1d0)]==_0x4ae5c1[_0x155959(0x1d0)]&&_0x555b08['secondary_code']==_0x4ae5c1[_0x155959(0x1ed)]&&_0x555b08['product_code']==_0x4ae5c1[_0x155959(0x1b9)]&&_0x555b08['_id']==_0x4ae5c1['warehouse_id_detl']&&(_0x555b08[_0x155959(0x1e8)]=_0x155959(0x1d8),_0x4aa4fa[_0x10af6b]['isAvailable']=_0x155959(0x1c1),_0x4aa4fa[_0x10af6b][_0x155959(0x1ec)]=_0x155959(0x1d8),_0x4aa4fa[_0x10af6b]['confirm_by']=_0x30b0dd[_0x155959(0x1c3)],_0x4aa4fa[_0x10af6b][_0x155959(0x1b8)]=_0x38b683,_0x555b08[_0x155959(0x1ec)]=_0x155959(0x1d2),_0x138ac1++);});_0x4aa4fa[_0x10af6b][_0x2a3bff(0x19f)]='true',await _0x4aa4fa[_0x10af6b][_0x2a3bff(0x1b0)](),await _0x1b44e6[_0x2a3bff(0x1b0)]();}}_0x215dba[_0x2a3bff(0x1cd)]({'data_main':_0x4aa4fa,'data_warehouse':_0x1b44e6});}catch(_0x5ea521){console[_0x2a3bff(0x1ea)](_0x5ea521);}}),router[a0_0x3b8b46(0x1ac)]('/view_data_all',auth,async(_0x52430a,_0xbdb3a0)=>{const _0x25dcbf=a0_0x3b8b46;try{const {data_show:_0x522de1,type_proc:_0x4942da}=_0x52430a['body'];if(_0x522de1==_0x25dcbf(0x1d7)){const _0x4a6e13=await warehouse_temporary[_0x25dcbf(0x1c5)]({'isConfirm':_0x25dcbf(0x1d8),'data_type':_0x4942da})[_0x25dcbf(0x1b2)]({'level':0x1,'bin':0x1});_0xbdb3a0[_0x25dcbf(0x1cd)](_0x4a6e13);}else{const _0x4d6324=await warehouse_temporary[_0x25dcbf(0x1c5)]({'isConfirm':_0x522de1,'data_type':_0x4942da})[_0x25dcbf(0x1b2)]({'level':0x1,'bin':0x1});_0xbdb3a0[_0x25dcbf(0x1cd)](_0x4d6324);}}catch(_0x1c6992){console['log'](_0x1c6992);}}),module[a0_0x3b8b46(0x1a9)]=router;