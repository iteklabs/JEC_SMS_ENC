const a0_0x579999=a0_0xd321;function a0_0x29dd(){const _0x1cc22d=['4935292BFYSBS','product_stock','/cancel_data','log','product_cat','findOne','out','nodemailer','maxStocks','8562334gEggwd','batch_code','140646HPwsDu','147viwxPQ','invoice','2130618WTIWol','gross_price','/confirm_data','date_recieved','ejs','level','json','warehouse','product_name','path','get','17516tqrLLh','../public/language/languages.json','_id','German','false','Spanish','true','expiry_date','render','find','Router','map','email','isUsed','English','cancel','concat','product_code','8qXsvTi','length','146ISooAn','warehouse_checking','/view/','Portuguese\x20(BR)','bay','alertQTY','../middleware/auth','4197582UfKPDp','language','production_date','isAvailable','post','product_details','inc','body','save','maxperunit','room_name','express','isConfirm','split','secondary_code','Hindi','/check_to_confirm','20iGcBwp','7001675anxNYp','warehouse_id_detl','../models/all_models','data_type','primary_code','uuid','English\x20(US)','user'];a0_0x29dd=function(){return _0x1cc22d;};return a0_0x29dd();}(function(_0x3ee1db,_0x272772){const _0x264b31=a0_0xd321,_0x29fb4d=_0x3ee1db();while(!![]){try{const _0x47b397=-parseInt(_0x264b31(0xc0))/0x1*(-parseInt(_0x264b31(0xd4))/0x2)+parseInt(_0x264b31(0xb5))/0x3+-parseInt(_0x264b31(0xa7))/0x4+-parseInt(_0x264b31(0xed))/0x5+-parseInt(_0x264b31(0xb2))/0x6*(parseInt(_0x264b31(0xb3))/0x7)+parseInt(_0x264b31(0xd2))/0x8*(parseInt(_0x264b31(0xdb))/0x9)+parseInt(_0x264b31(0xec))/0xa*(parseInt(_0x264b31(0xb0))/0xb);if(_0x47b397===_0x272772)break;else _0x29fb4d['push'](_0x29fb4d['shift']());}catch(_0x2132a1){_0x29fb4d['push'](_0x29fb4d['shift']());}}}(a0_0x29dd,0xd8389));const express=require(a0_0x579999(0xe6)),app=express(),router=express[a0_0x579999(0xca)](),{warehouse_validation_setup,master_shop,profile,warehouse,warehouse_temporary}=require(a0_0x579999(0xef)),auth=require(a0_0x579999(0xda)),nodemailer=require(a0_0x579999(0xae));function a0_0xd321(_0x2233dc,_0x81d795){const _0x29dd5=a0_0x29dd();return a0_0xd321=function(_0xd321a,_0x5895e5){_0xd321a=_0xd321a-0xa7;let _0x1d6830=_0x29dd5[_0xd321a];return _0x1d6830;},a0_0xd321(_0x2233dc,_0x81d795);}var ejs=require(a0_0x579999(0xb9));const path=require(a0_0x579999(0xbe)),users=require(a0_0x579999(0xc1));router[a0_0x579999(0xbf)](a0_0x579999(0xd6),auth,async(_0x23f48c,_0x10e1e4)=>{const _0x2b51d0=a0_0x579999;try{const {username:_0x17af7e,email:_0x39ac2f,role:_0x42cd8f}=_0x23f48c[_0x2b51d0(0xf4)],_0x3ee6cd=_0x23f48c[_0x2b51d0(0xf4)],_0x508cf3=await profile[_0x2b51d0(0xac)]({'email':_0x3ee6cd[_0x2b51d0(0xcc)]}),_0x1f9479=await master_shop[_0x2b51d0(0xc9)]();if(_0x1f9479[0x0][_0x2b51d0(0xdc)]==_0x2b51d0(0xf3))var _0x264661=users[_0x2b51d0(0xce)];else{if(_0x1f9479[0x0][_0x2b51d0(0xdc)]==_0x2b51d0(0xea))var _0x264661=users[_0x2b51d0(0xea)];else{if(_0x1f9479[0x0][_0x2b51d0(0xdc)]==_0x2b51d0(0xc3))var _0x264661=users[_0x2b51d0(0xc3)];else{if(_0x1f9479[0x0][_0x2b51d0(0xdc)]==_0x2b51d0(0xc5))var _0x264661=users[_0x2b51d0(0xc5)];else{if(_0x1f9479[0x0][_0x2b51d0(0xdc)]=='French')var _0x264661=users['French'];else{if(_0x1f9479[0x0][_0x2b51d0(0xdc)]==_0x2b51d0(0xd7))var _0x264661=users['Portuguese'];else{if(_0x1f9479[0x0][_0x2b51d0(0xdc)]=='Chinese')var _0x264661=users['Chinese'];else{if(_0x1f9479[0x0][_0x2b51d0(0xdc)]=='Arabic\x20(ae)')var _0x264661=users['Arabic'];}}}}}}}_0x10e1e4[_0x2b51d0(0xc8)](_0x2b51d0(0xd5),{'success':_0x23f48c['flash']('success'),'errors':_0x23f48c['flash']('errors'),'profile':_0x508cf3,'master_shop':_0x1f9479,'role':_0x3ee6cd,'language':_0x264661});}catch(_0x1ac492){console[_0x2b51d0(0xaa)](_0x1ac492);}}),router[a0_0x579999(0xdf)](a0_0x579999(0xeb),auth,async(_0xccdc62,_0x42cbd9)=>{const _0xbdaac7=a0_0x579999;try{const {product_code:_0x1ca5e0,type_of_process:_0x5a68b1}=_0xccdc62[_0xbdaac7(0xe2)];var _0x56269f=_0x1ca5e0[_0xbdaac7(0xe8)]('~');const _0x443552=_0x56269f[0x0],_0x5f50ff=_0x56269f[0x1],_0x1acccb=_0x56269f[0x2],_0xf775a0=_0x56269f[0x3],_0x580ac4=await warehouse_temporary[_0xbdaac7(0xc9)]({'warehouse':_0x443552,'room_name':_0x5f50ff,'level':_0x1acccb,'bay':_0xf775a0,'data_type':_0x5a68b1,'isConfirm':_0xbdaac7(0xc4)});_0x42cbd9[_0xbdaac7(0xbb)](_0x580ac4);}catch(_0x227921){console[_0xbdaac7(0xaa)](_0x227921);}}),router[a0_0x579999(0xdf)](a0_0x579999(0xb7),auth,async(_0x37c431,_0xe143c7)=>{const _0x29a5ba=a0_0x579999;try{const {id_data:_0x42fadd}=_0x37c431[_0x29a5ba(0xe2)],_0x366d72=await warehouse_temporary[_0x29a5ba(0xc9)]({'_id':_0x42fadd});for(let _0x287280=0x0;_0x287280<=_0x366d72[_0x29a5ba(0xd3)]-0x1;_0x287280++){const _0x1db67e=_0x366d72[_0x287280];var _0x3f51ee=0x0;if(_0x1db67e[_0x29a5ba(0xf0)]==_0x29a5ba(0xe1)){var _0x656a8a=await warehouse['findOne']({'name':_0x1db67e[_0x29a5ba(0xbc)],'room':_0x1db67e[_0x29a5ba(0xe5)]});const _0x43bb13=_0x656a8a[_0x29a5ba(0xe0)][_0x29a5ba(0xcb)](_0x52677c=>{const _0x32628c=_0x29a5ba;_0x52677c['product_name']==_0x1db67e[_0x32628c(0xbd)]&&_0x52677c[_0x32628c(0xf1)]==_0x1db67e['primary_code']&&_0x52677c[_0x32628c(0xe9)]==_0x1db67e[_0x32628c(0xe9)]&&_0x52677c[_0x32628c(0xd1)]==_0x1db67e[_0x32628c(0xd1)]&&_0x52677c[_0x32628c(0xd8)]==_0x1db67e[_0x32628c(0xd8)]&&_0x52677c[_0x32628c(0xba)]==_0x1db67e[_0x32628c(0xba)]&&_0x52677c[_0x32628c(0xb8)]==_0x1db67e[_0x32628c(0xb8)]&&(_0x52677c[_0x32628c(0xa8)]=parseInt(_0x52677c[_0x32628c(0xa8)])+parseInt(_0x1db67e[_0x32628c(0xa8)]),_0x3f51ee++);});_0x3f51ee=='0'&&(_0x656a8a['product_details']=_0x656a8a[_0x29a5ba(0xe0)][_0x29a5ba(0xd0)]({'product_name':_0x1db67e['product_name'],'product_stock':_0x1db67e[_0x29a5ba(0xa8)],'primary_code':_0x1db67e[_0x29a5ba(0xf1)],'secondary_code':_0x1db67e[_0x29a5ba(0xe9)],'product_code':_0x1db67e[_0x29a5ba(0xd1)],'bay':_0x1db67e[_0x29a5ba(0xd8)],'level':_0x1db67e[_0x29a5ba(0xba)],'maxProducts':_0x1db67e['maxStocks'],'unit':_0x1db67e['unit'],'secondary_unit':_0x1db67e['secondary_unit'],'maxPerUnit':_0x1db67e[_0x29a5ba(0xe4)],'alertQTY':_0x1db67e[_0x29a5ba(0xd9)],'production_date':_0x1db67e[_0x29a5ba(0xdd)],'expiry_date':_0x1db67e[_0x29a5ba(0xc7)],'batch_code':_0x1db67e[_0x29a5ba(0xb1)],'invoice':_0x1db67e[_0x29a5ba(0xb4)],'product_cat':_0x1db67e[_0x29a5ba(0xab)],'uuid':_0x1db67e[_0x29a5ba(0xf2)],'gross_price':_0x1db67e[_0x29a5ba(0xb6)],'date_recieved':_0x1db67e['date_recieved'],'isAvailable':_0x29a5ba(0xc6),'isUsed':_0x29a5ba(0xc4),'warehouse_id_temp_inc':_0x1db67e[_0x29a5ba(0xc2)]})),_0x366d72[_0x287280]['isConfirm']=_0x29a5ba(0xc6),await _0x366d72[_0x287280][_0x29a5ba(0xe3)](),await _0x656a8a[_0x29a5ba(0xe3)]();}else{if(_0x1db67e[_0x29a5ba(0xf0)]=='out'){var _0x656a8a=await warehouse[_0x29a5ba(0xac)]({'name':_0x1db67e['warehouse'],'room':_0x1db67e[_0x29a5ba(0xe5)]});const _0x1725b2=_0x656a8a['product_details']['map'](_0x284bcf=>{const _0x35c27b=_0x29a5ba;_0x284bcf['product_name']==_0x1db67e[_0x35c27b(0xbd)]&&_0x284bcf[_0x35c27b(0xf1)]==_0x1db67e['primary_code']&&_0x284bcf[_0x35c27b(0xe9)]==_0x1db67e[_0x35c27b(0xe9)]&&_0x284bcf[_0x35c27b(0xd1)]==_0x1db67e[_0x35c27b(0xd1)]&&_0x284bcf[_0x35c27b(0xc2)]==_0x1db67e[_0x35c27b(0xee)]&&(_0x284bcf['product_stock']=parseInt(_0x284bcf[_0x35c27b(0xa8)])-parseInt(_0x1db67e[_0x35c27b(0xa8)]),_0x284bcf[_0x35c27b(0xa8)]==0x0?(_0x284bcf['isAvailable']='false',_0x366d72[_0x287280][_0x35c27b(0xde)]=_0x35c27b(0xc4),_0x366d72[_0x287280]['isUsed']=_0x35c27b(0xc6)):_0x366d72[_0x287280]['isUsed']=_0x35c27b(0xc4),_0x284bcf[_0x35c27b(0xcd)]=_0x35c27b(0xc4),_0x3f51ee++);});_0x366d72[_0x287280][_0x29a5ba(0xe7)]=_0x29a5ba(0xc6),await _0x366d72[_0x287280]['save'](),await _0x656a8a['save']();}}}_0xe143c7[_0x29a5ba(0xbb)]({'data_main':_0x366d72,'data_warehouse':_0x656a8a});}catch(_0x139f4f){console['log'](_0x139f4f);}}),router[a0_0x579999(0xdf)](a0_0x579999(0xa9),auth,async(_0x2ce0de,_0x5a9f98)=>{const _0x1ddd71=a0_0x579999;try{const {id_data:_0xa65c56}=_0x2ce0de[_0x1ddd71(0xe2)],_0x7be300=await warehouse_temporary[_0x1ddd71(0xc9)]({'_id':_0xa65c56});for(let _0xc9ee84=0x0;_0xc9ee84<=_0x7be300[_0x1ddd71(0xd3)]-0x1;_0xc9ee84++){const _0x1b3241=_0x7be300[_0xc9ee84];var _0x33a323=0x0;if(_0x1b3241[_0x1ddd71(0xf0)]==_0x1ddd71(0xe1)){var _0x41c71d=await warehouse[_0x1ddd71(0xac)]({'name':_0x1b3241[_0x1ddd71(0xbc)],'room':_0x1b3241['room_name']});const _0x44f7ce=_0x41c71d[_0x1ddd71(0xe0)]['map'](_0x132d4b=>{const _0x425cec=_0x1ddd71;_0x132d4b['product_name']==_0x1b3241[_0x425cec(0xbd)]&&_0x132d4b[_0x425cec(0xf1)]==_0x1b3241[_0x425cec(0xf1)]&&_0x132d4b[_0x425cec(0xe9)]==_0x1b3241[_0x425cec(0xe9)]&&_0x132d4b[_0x425cec(0xd1)]==_0x1b3241['product_code']&&_0x132d4b[_0x425cec(0xd8)]==_0x1b3241[_0x425cec(0xd8)]&&_0x132d4b[_0x425cec(0xba)]==_0x1b3241[_0x425cec(0xba)]&&_0x132d4b[_0x425cec(0xb8)]==_0x1b3241[_0x425cec(0xb8)]&&(_0x132d4b['product_stock']=parseInt(_0x132d4b[_0x425cec(0xa8)])+parseInt(_0x1b3241['product_stock']),_0x33a323++);});_0x33a323=='0'&&(_0x41c71d[_0x1ddd71(0xe0)]=_0x41c71d[_0x1ddd71(0xe0)][_0x1ddd71(0xd0)]({'product_name':_0x1b3241['product_name'],'product_stock':_0x1b3241[_0x1ddd71(0xa8)],'primary_code':_0x1b3241['primary_code'],'secondary_code':_0x1b3241[_0x1ddd71(0xe9)],'product_code':_0x1b3241[_0x1ddd71(0xd1)],'bay':_0x1b3241[_0x1ddd71(0xd8)],'level':_0x1b3241[_0x1ddd71(0xba)],'maxProducts':_0x1b3241[_0x1ddd71(0xaf)],'unit':_0x1b3241['unit'],'secondary_unit':_0x1b3241['secondary_unit'],'maxPerUnit':_0x1b3241[_0x1ddd71(0xe4)],'alertQTY':_0x1b3241[_0x1ddd71(0xd9)],'production_date':_0x1b3241[_0x1ddd71(0xdd)],'expiry_date':_0x1b3241[_0x1ddd71(0xc7)],'batch_code':_0x1b3241[_0x1ddd71(0xb1)],'invoice':_0x1b3241[_0x1ddd71(0xb4)],'product_cat':_0x1b3241[_0x1ddd71(0xab)],'uuid':_0x1b3241[_0x1ddd71(0xf2)],'gross_price':_0x1b3241[_0x1ddd71(0xb6)],'date_recieved':_0x1b3241['date_recieved'],'isAvailable':_0x1ddd71(0xc6),'isUsed':_0x1ddd71(0xc4),'warehouse_id_temp_inc':_0x1b3241[_0x1ddd71(0xc2)]})),_0x7be300[_0xc9ee84][_0x1ddd71(0xe7)]=_0x1ddd71(0xc6),await _0x7be300[_0xc9ee84]['save'](),await _0x41c71d[_0x1ddd71(0xe3)]();}else{if(_0x1b3241[_0x1ddd71(0xf0)]==_0x1ddd71(0xad)){var _0x41c71d=await warehouse[_0x1ddd71(0xac)]({'name':_0x1b3241[_0x1ddd71(0xbc)],'room':_0x1b3241[_0x1ddd71(0xe5)]});const _0xbb17f=_0x41c71d[_0x1ddd71(0xe0)][_0x1ddd71(0xcb)](_0x55e181=>{const _0x3397fc=_0x1ddd71;_0x55e181[_0x3397fc(0xbd)]==_0x1b3241[_0x3397fc(0xbd)]&&_0x55e181[_0x3397fc(0xf1)]==_0x1b3241[_0x3397fc(0xf1)]&&_0x55e181[_0x3397fc(0xe9)]==_0x1b3241[_0x3397fc(0xe9)]&&_0x55e181[_0x3397fc(0xd1)]==_0x1b3241['product_code']&&_0x55e181[_0x3397fc(0xc2)]==_0x1b3241[_0x3397fc(0xee)]&&(_0x55e181['isAvailable']=_0x3397fc(0xc6),_0x7be300[_0xc9ee84][_0x3397fc(0xde)]=_0x3397fc(0xcf),_0x7be300[_0xc9ee84][_0x3397fc(0xcd)]='true',_0x55e181[_0x3397fc(0xcd)]=_0x3397fc(0xc4),_0x33a323++);});_0x7be300[_0xc9ee84]['isConfirm']=_0x1ddd71(0xc6),await _0x7be300[_0xc9ee84][_0x1ddd71(0xe3)](),await _0x41c71d[_0x1ddd71(0xe3)]();}}}_0x5a9f98['json']({'data_main':_0x7be300,'data_warehouse':_0x41c71d});}catch(_0x167ace){console[_0x1ddd71(0xaa)](_0x167ace);}}),module['exports']=router;