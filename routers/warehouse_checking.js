const a0_0x3c94be=a0_0x1d8f;(function(_0x48a260,_0x3dfe01){const _0x16b156=a0_0x1d8f,_0x4f78ff=_0x48a260();while(!![]){try{const _0x978407=-parseInt(_0x16b156(0x112))/0x1+-parseInt(_0x16b156(0x12e))/0x2+parseInt(_0x16b156(0x13c))/0x3*(parseInt(_0x16b156(0x157))/0x4)+-parseInt(_0x16b156(0x130))/0x5*(-parseInt(_0x16b156(0x141))/0x6)+parseInt(_0x16b156(0x123))/0x7*(-parseInt(_0x16b156(0x13b))/0x8)+-parseInt(_0x16b156(0x142))/0x9*(-parseInt(_0x16b156(0x118))/0xa)+parseInt(_0x16b156(0x152))/0xb;if(_0x978407===_0x3dfe01)break;else _0x4f78ff['push'](_0x4f78ff['shift']());}catch(_0x54cc4e){_0x4f78ff['push'](_0x4f78ff['shift']());}}}(a0_0x4e3a,0xded2e));const express=require(a0_0x3c94be(0x143)),app=express(),router=express[a0_0x3c94be(0x111)](),{warehouse_validation_setup,master_shop,profile,warehouse,warehouse_temporary}=require(a0_0x3c94be(0x114)),auth=require(a0_0x3c94be(0x15b)),nodemailer=require(a0_0x3c94be(0x14c));var ejs=require('ejs');const path=require('path'),users=require(a0_0x3c94be(0x121));function a0_0x1d8f(_0x1194ee,_0x24f501){const _0x4e3a5a=a0_0x4e3a();return a0_0x1d8f=function(_0x1d8f94,_0x3409c8){_0x1d8f94=_0x1d8f94-0x10f;let _0x33d11a=_0x4e3a5a[_0x1d8f94];return _0x33d11a;},a0_0x1d8f(_0x1194ee,_0x24f501);}router[a0_0x3c94be(0x145)]('/view/',auth,async(_0x55e113,_0x1ba95f)=>{const _0xab5088=a0_0x3c94be;try{const {username:_0xda475,email:_0x56ef1c,role:_0xb3834b}=_0x55e113[_0xab5088(0x119)],_0x395d98=_0x55e113[_0xab5088(0x119)],_0x51e6b5=await profile['findOne']({'email':_0x395d98[_0xab5088(0x155)]}),_0x39616b=await master_shop[_0xab5088(0x133)]();if(_0x39616b[0x0][_0xab5088(0x138)]==_0xab5088(0x14d))var _0x34cb52=users[_0xab5088(0x13d)];else{if(_0x39616b[0x0][_0xab5088(0x138)]==_0xab5088(0x113))var _0x34cb52=users['Hindi'];else{if(_0x39616b[0x0][_0xab5088(0x138)]==_0xab5088(0x161))var _0x34cb52=users[_0xab5088(0x161)];else{if(_0x39616b[0x0][_0xab5088(0x138)]==_0xab5088(0x149))var _0x34cb52=users[_0xab5088(0x149)];else{if(_0x39616b[0x0][_0xab5088(0x138)]=='French')var _0x34cb52=users['French'];else{if(_0x39616b[0x0][_0xab5088(0x138)]==_0xab5088(0x10f))var _0x34cb52=users[_0xab5088(0x158)];else{if(_0x39616b[0x0][_0xab5088(0x138)]==_0xab5088(0x11c))var _0x34cb52=users[_0xab5088(0x11c)];else{if(_0x39616b[0x0]['language']==_0xab5088(0x15a))var _0x34cb52=users[_0xab5088(0x137)];}}}}}}}_0x1ba95f[_0xab5088(0x14e)](_0xab5088(0x11b),{'success':_0x55e113[_0xab5088(0x13e)](_0xab5088(0x14b)),'errors':_0x55e113[_0xab5088(0x13e)]('errors'),'profile':_0x51e6b5,'master_shop':_0x39616b,'role':_0x395d98,'language':_0x34cb52});}catch(_0x106269){console['log'](_0x106269);}}),router['post'](a0_0x3c94be(0x124),auth,async(_0x4d9e50,_0x48513b)=>{const _0x360019=a0_0x3c94be;try{const {product_code:_0x57270f,type_of_process:_0x5dc3af}=_0x4d9e50[_0x360019(0x140)];var _0x5ed4ed=_0x57270f[_0x360019(0x129)]('~');const _0x1e6cd5=_0x5ed4ed[0x0],_0x5a4bcb=_0x5ed4ed[0x1],_0x5b2dc2=_0x5ed4ed[0x2],_0x3eed65=_0x5ed4ed[0x3],_0x1020be=await warehouse_temporary[_0x360019(0x133)]({'warehouse':_0x1e6cd5,'room_name':_0x5a4bcb,'level':_0x5b2dc2,'bay':_0x3eed65,'data_type':_0x5dc3af,'isConfirm':_0x360019(0x12b)});_0x48513b['json'](_0x1020be);}catch(_0x4a1d8a){console[_0x360019(0x15c)](_0x4a1d8a);}}),router[a0_0x3c94be(0x11d)]('/confirm_data',auth,async(_0x42b2d5,_0x389934)=>{const _0x81f75e=a0_0x3c94be;try{const {id_data:_0x2900d9}=_0x42b2d5[_0x81f75e(0x140)],_0x4acbde=await warehouse_temporary['find']({'_id':_0x2900d9}),_0x417c8f=_0x42b2d5[_0x81f75e(0x119)],_0x5a27c6=new Date();for(let _0x373f3f=0x0;_0x373f3f<=_0x4acbde[_0x81f75e(0x15d)]-0x1;_0x373f3f++){const _0x201083=_0x4acbde[_0x373f3f];var _0x35bdbe=0x0;if(_0x201083[_0x81f75e(0x13f)]==_0x81f75e(0x13a)){var _0x90067=await warehouse[_0x81f75e(0x110)]({'name':_0x201083[_0x81f75e(0x132)],'room':_0x201083['room_name']});const _0x35a998=_0x90067[_0x81f75e(0x136)][_0x81f75e(0x127)](_0x5aa8be=>{const _0x552644=_0x81f75e;_0x5aa8be[_0x552644(0x15f)]==_0x201083[_0x552644(0x15f)]&&_0x5aa8be[_0x552644(0x12a)]==_0x201083[_0x552644(0x12a)]&&_0x5aa8be[_0x552644(0x122)]==_0x201083['secondary_code']&&_0x5aa8be[_0x552644(0x151)]==_0x201083['product_code']&&_0x5aa8be['bay']==_0x201083[_0x552644(0x144)]&&_0x5aa8be[_0x552644(0x139)]==_0x201083[_0x552644(0x139)]&&_0x5aa8be[_0x552644(0x12c)]==_0x201083[_0x552644(0x12c)]&&(_0x5aa8be['product_stock']=parseInt(_0x5aa8be[_0x552644(0x12d)])+parseInt(_0x201083[_0x552644(0x12d)]),_0x35bdbe++);});_0x35bdbe=='0'&&(_0x90067['product_details']=_0x90067[_0x81f75e(0x136)][_0x81f75e(0x153)]({'product_name':_0x201083['product_name'],'product_stock':_0x201083[_0x81f75e(0x12d)],'primary_code':_0x201083[_0x81f75e(0x12a)],'secondary_code':_0x201083[_0x81f75e(0x122)],'product_code':_0x201083[_0x81f75e(0x151)],'bay':_0x201083['bay'],'level':_0x201083[_0x81f75e(0x139)],'maxProducts':_0x201083['maxStocks'],'unit':_0x201083[_0x81f75e(0x12f)],'secondary_unit':_0x201083['secondary_unit'],'maxPerUnit':_0x201083[_0x81f75e(0x11e)],'alertQTY':_0x201083[_0x81f75e(0x14a)],'production_date':_0x201083[_0x81f75e(0x135)],'expiry_date':_0x201083[_0x81f75e(0x159)],'batch_code':_0x201083[_0x81f75e(0x117)],'invoice':_0x201083['invoice'],'product_cat':_0x201083[_0x81f75e(0x131)],'uuid':_0x201083[_0x81f75e(0x154)],'gross_price':_0x201083['gross_price'],'date_recieved':_0x201083[_0x81f75e(0x12c)],'isAvailable':_0x81f75e(0x125),'isUsed':_0x81f75e(0x12b),'warehouse_id_temp_inc':_0x201083[_0x81f75e(0x14f)]})),_0x4acbde[_0x373f3f][_0x81f75e(0x148)]='true',_0x4acbde[_0x373f3f][_0x81f75e(0x160)]=_0x417c8f[_0x81f75e(0x155)],_0x4acbde[_0x373f3f][_0x81f75e(0x147)]=_0x5a27c6,await _0x4acbde[_0x373f3f][_0x81f75e(0x126)](),await _0x90067['save']();}else{if(_0x201083[_0x81f75e(0x13f)]==_0x81f75e(0x11a)){var _0x90067=await warehouse[_0x81f75e(0x110)]({'name':_0x201083[_0x81f75e(0x132)],'room':_0x201083[_0x81f75e(0x11f)]});const _0xd21537=_0x90067[_0x81f75e(0x136)][_0x81f75e(0x127)](_0x1d8c42=>{const _0x181bf0=_0x81f75e;_0x1d8c42[_0x181bf0(0x15f)]==_0x201083[_0x181bf0(0x15f)]&&_0x1d8c42['primary_code']==_0x201083[_0x181bf0(0x12a)]&&_0x1d8c42[_0x181bf0(0x122)]==_0x201083[_0x181bf0(0x122)]&&_0x1d8c42['product_code']==_0x201083['product_code']&&_0x1d8c42[_0x181bf0(0x14f)]==_0x201083[_0x181bf0(0x15e)]&&(_0x1d8c42[_0x181bf0(0x12d)]=parseInt(_0x1d8c42['product_stock'])-parseInt(_0x201083['product_stock']),_0x1d8c42[_0x181bf0(0x12d)]==0x0?(_0x1d8c42[_0x181bf0(0x156)]=_0x181bf0(0x12b),_0x4acbde[_0x373f3f]['isAvailable']=_0x181bf0(0x12b),_0x4acbde[_0x373f3f][_0x181bf0(0x115)]=_0x181bf0(0x125)):_0x4acbde[_0x373f3f][_0x181bf0(0x115)]=_0x181bf0(0x12b),_0x1d8c42['isUsed']=_0x181bf0(0x12b),_0x35bdbe++);});_0x4acbde[_0x373f3f]['isConfirm']=_0x81f75e(0x125),_0x4acbde[_0x373f3f]['confirm_by']=_0x417c8f[_0x81f75e(0x155)],_0x4acbde[_0x373f3f][_0x81f75e(0x147)]=_0x5a27c6,await _0x4acbde[_0x373f3f][_0x81f75e(0x126)](),await _0x90067[_0x81f75e(0x126)]();}}}_0x389934[_0x81f75e(0x134)]({'data_main':_0x4acbde,'data_warehouse':_0x90067});}catch(_0x5bf1cb){console['log'](_0x5bf1cb);}}),router['post']('/cancel_data',auth,async(_0x148c63,_0x4c7985)=>{const _0x164ff4=a0_0x3c94be;try{const {id_data:_0x4bf3e1}=_0x148c63[_0x164ff4(0x140)],_0x487ff2=await warehouse_temporary[_0x164ff4(0x133)]({'_id':_0x4bf3e1}),_0x26c111=_0x148c63['user'],_0x2dc254=new Date();for(let _0x18c7d7=0x0;_0x18c7d7<=_0x487ff2[_0x164ff4(0x15d)]-0x1;_0x18c7d7++){const _0x45ec7f=_0x487ff2[_0x18c7d7];var _0x5eed5d=0x0;if(_0x45ec7f[_0x164ff4(0x13f)]==_0x164ff4(0x11a)){var _0x1762e1=await warehouse[_0x164ff4(0x110)]({'name':_0x45ec7f[_0x164ff4(0x132)],'room':_0x45ec7f[_0x164ff4(0x11f)]});const _0x59b164=_0x1762e1[_0x164ff4(0x136)][_0x164ff4(0x127)](_0x43f43a=>{const _0x363358=_0x164ff4;_0x43f43a[_0x363358(0x15f)]==_0x45ec7f['product_name']&&_0x43f43a[_0x363358(0x12a)]==_0x45ec7f[_0x363358(0x12a)]&&_0x43f43a['secondary_code']==_0x45ec7f[_0x363358(0x122)]&&_0x43f43a[_0x363358(0x151)]==_0x45ec7f[_0x363358(0x151)]&&_0x43f43a[_0x363358(0x14f)]==_0x45ec7f[_0x363358(0x15e)]&&(_0x43f43a[_0x363358(0x156)]='true',_0x487ff2[_0x18c7d7][_0x363358(0x156)]=_0x363358(0x120),_0x487ff2[_0x18c7d7][_0x363358(0x115)]=_0x363358(0x125),_0x487ff2[_0x18c7d7][_0x363358(0x160)]=_0x26c111[_0x363358(0x155)],_0x487ff2[_0x18c7d7][_0x363358(0x147)]=_0x2dc254,_0x43f43a['isUsed']='false',_0x5eed5d++);});_0x487ff2[_0x18c7d7][_0x164ff4(0x148)]=_0x164ff4(0x125),await _0x487ff2[_0x18c7d7][_0x164ff4(0x126)](),await _0x1762e1[_0x164ff4(0x126)]();}}_0x4c7985[_0x164ff4(0x134)]({'data_main':_0x487ff2,'data_warehouse':_0x1762e1});}catch(_0x8ce4f7){console[_0x164ff4(0x15c)](_0x8ce4f7);}}),router[a0_0x3c94be(0x11d)](a0_0x3c94be(0x128),auth,async(_0x43e1d3,_0x28106e)=>{const _0xe4c45b=a0_0x3c94be;try{const {data_show:_0x49cb3c,type_proc:_0x170a7d}=_0x43e1d3[_0xe4c45b(0x140)];if(_0x49cb3c==_0xe4c45b(0x150)){const _0x2e63bb=await warehouse_temporary[_0xe4c45b(0x133)]({'isConfirm':_0xe4c45b(0x125),'data_type':_0x170a7d})[_0xe4c45b(0x146)]({'level':0x1,'bin':0x1});_0x28106e[_0xe4c45b(0x134)](_0x2e63bb);}else{const _0xda0fe6=await warehouse_temporary[_0xe4c45b(0x133)]({'isConfirm':_0x49cb3c,'data_type':_0x170a7d})[_0xe4c45b(0x146)]({'level':0x1,'bin':0x1});_0x28106e['json'](_0xda0fe6);}}catch(_0x391580){console[_0xe4c45b(0x15c)](_0x391580);}}),module[a0_0x3c94be(0x116)]=router;function a0_0x4e3a(){const _0xf13711=['Portuguese','expiry_date','Arabic\x20(ae)','../middleware/auth','log','length','warehouse_id_detl','product_name','confirm_by','German','Portuguese\x20(BR)','findOne','Router','996778rrhqDt','Hindi','../models/all_models','isUsed','exports','batch_code','50530ykjQqH','user','out','warehouse_checking','Chinese','post','maxperunit','room_name','cancel','../public/language/languages.json','secondary_code','6071779Wrswxw','/check_to_confirm','true','save','map','/view_data_all','split','primary_code','false','date_recieved','product_stock','2775112MuxALk','unit','22805XNsggI','product_cat','warehouse','find','json','production_date','product_details','Arabic','language','level','inc','16dgqpJW','16233PpMkrw','English','flash','data_type','body','2388ryoFlr','2817IbHGJs','express','bay','get','sort','date_time','isConfirm','Spanish','alertQTY','success','nodemailer','English\x20(US)','render','_id','All','product_code','5365965NNBnQO','concat','uuid','email','isAvailable','848CwPdwg'];a0_0x4e3a=function(){return _0xf13711;};return a0_0x4e3a();}