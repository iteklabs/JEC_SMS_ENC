const a0_0x175603=a0_0x1662;(function(_0x153b0d,_0x3c6fd5){const _0x2ccc17=a0_0x1662,_0x332409=_0x153b0d();while(!![]){try{const _0x2aacd1=parseInt(_0x2ccc17(0xb5))/0x1+-parseInt(_0x2ccc17(0xfa))/0x2+parseInt(_0x2ccc17(0xd5))/0x3+-parseInt(_0x2ccc17(0xed))/0x4*(parseInt(_0x2ccc17(0xf1))/0x5)+parseInt(_0x2ccc17(0xe0))/0x6+parseInt(_0x2ccc17(0xf5))/0x7*(parseInt(_0x2ccc17(0xc8))/0x8)+parseInt(_0x2ccc17(0x101))/0x9*(parseInt(_0x2ccc17(0xcb))/0xa);if(_0x2aacd1===_0x3c6fd5)break;else _0x332409['push'](_0x332409['shift']());}catch(_0x1b0473){_0x332409['push'](_0x332409['shift']());}}}(a0_0x209d,0x538ff));function a0_0x1662(_0x4de74a,_0x52b466){const _0x209db0=a0_0x209d();return a0_0x1662=function(_0x166231,_0x5e8816){_0x166231=_0x166231-0xb3;let _0x4d3393=_0x209db0[_0x166231];return _0x4d3393;},a0_0x1662(_0x4de74a,_0x52b466);}const express=require(a0_0x175603(0xc3)),app=express(),router=express[a0_0x175603(0xdd)](),{warehouse_validation_setup,master_shop,profile,warehouse,warehouse_temporary}=require(a0_0x175603(0xd4)),auth=require(a0_0x175603(0xbb)),nodemailer=require(a0_0x175603(0xcc));var ejs=require(a0_0x175603(0xc4));function a0_0x209d(){const _0x593056=['bay','Arabic','Spanish','out','isAvailable','French','express','ejs','batch_code','findOne','false','32YFyeKV','unit','product_cat','10VQKZvJ','nodemailer','cancel','errors','render','maxStocks','split','date_recieved','success','../models/all_models','229671kCoFcb','alertQTY','invoice','room_name','language','/view_data_all','expiry_date','warehouse_checking','Router','All','_id','2938008DWgtSz','Hindi','/check_to_confirm','product_name','log','data_type','user','English','English\x20(US)','sort','save','date_time','true','464632FBlNsL','/cancel_data','product_code','confirm_by','25QecSvt','German','production_date','Portuguese','306019ZZJwLm','json','../public/language/languages.json','path','isUsed','40728XXupYu','warehouse','Chinese','uuid','primary_code','inc','product_details','969534XqcABd','find','gross_price','warehouse_id_detl','product_stock','body','flash','94606OLaMjx','map','post','maxperunit','email','secondary_code','../middleware/auth','Portuguese\x20(BR)'];a0_0x209d=function(){return _0x593056;};return a0_0x209d();}const path=require(a0_0x175603(0xf8)),users=require(a0_0x175603(0xf7));router['get']('/view/',auth,async(_0xbde93,_0xb20433)=>{const _0x8045d5=a0_0x175603;try{const {username:_0x1dfaf7,email:_0x3f30e4,role:_0x4b6a59}=_0xbde93['user'],_0x41aaf5=_0xbde93['user'],_0x3aaf62=await profile[_0x8045d5(0xc6)]({'email':_0x41aaf5[_0x8045d5(0xb9)]}),_0x308f01=await master_shop['find']();if(_0x308f01[0x0][_0x8045d5(0xd9)]==_0x8045d5(0xe8))var _0x564136=users[_0x8045d5(0xe7)];else{if(_0x308f01[0x0]['language']==_0x8045d5(0xe1))var _0x564136=users[_0x8045d5(0xe1)];else{if(_0x308f01[0x0][_0x8045d5(0xd9)]=='German')var _0x564136=users[_0x8045d5(0xf2)];else{if(_0x308f01[0x0][_0x8045d5(0xd9)]=='Spanish')var _0x564136=users[_0x8045d5(0xbf)];else{if(_0x308f01[0x0][_0x8045d5(0xd9)]=='French')var _0x564136=users[_0x8045d5(0xc2)];else{if(_0x308f01[0x0][_0x8045d5(0xd9)]==_0x8045d5(0xbc))var _0x564136=users[_0x8045d5(0xf4)];else{if(_0x308f01[0x0][_0x8045d5(0xd9)]==_0x8045d5(0xfc))var _0x564136=users['Chinese'];else{if(_0x308f01[0x0][_0x8045d5(0xd9)]=='Arabic\x20(ae)')var _0x564136=users[_0x8045d5(0xbe)];}}}}}}}_0xb20433[_0x8045d5(0xcf)](_0x8045d5(0xdc),{'success':_0xbde93['flash'](_0x8045d5(0xd3)),'errors':_0xbde93[_0x8045d5(0xb4)](_0x8045d5(0xce)),'profile':_0x3aaf62,'master_shop':_0x308f01,'role':_0x41aaf5,'language':_0x564136});}catch(_0x301e7a){console[_0x8045d5(0xe4)](_0x301e7a);}}),router[a0_0x175603(0xb7)](a0_0x175603(0xe2),auth,async(_0x4070e5,_0xf74e0b)=>{const _0x2fca69=a0_0x175603;try{const {product_code:_0x55acfc,type_of_process:_0x2fe902}=_0x4070e5[_0x2fca69(0xb3)];var _0x55d388=_0x55acfc[_0x2fca69(0xd1)]('~');const _0xb39f2a=_0x55d388[0x0],_0x4d54a2=_0x55d388[0x1],_0x31daa7=_0x55d388[0x2],_0x48a168=_0x55d388[0x3],_0x5d86ed=await warehouse_temporary[_0x2fca69(0x102)]({'warehouse':_0xb39f2a,'room_name':_0x4d54a2,'level':_0x31daa7,'bay':_0x48a168,'data_type':_0x2fe902,'isConfirm':_0x2fca69(0xc7)});_0xf74e0b[_0x2fca69(0xf6)](_0x5d86ed);}catch(_0x5b3741){console[_0x2fca69(0xe4)](_0x5b3741);}}),router['post']('/confirm_data',auth,async(_0x4f7222,_0x4571b6)=>{const _0x44f3da=a0_0x175603;try{const {id_data:_0x37c031}=_0x4f7222[_0x44f3da(0xb3)],_0x5764a3=await warehouse_temporary[_0x44f3da(0x102)]({'_id':_0x37c031}),_0x4c2e4d=_0x4f7222[_0x44f3da(0xe6)],_0x39c23e=new Date();for(let _0x26b347=0x0;_0x26b347<=_0x5764a3['length']-0x1;_0x26b347++){const _0x1fd4ec=_0x5764a3[_0x26b347];var _0x337374=0x0;if(_0x1fd4ec['data_type']==_0x44f3da(0xff)){var _0x5038d7=await warehouse[_0x44f3da(0xc6)]({'name':_0x1fd4ec[_0x44f3da(0xfb)],'room':_0x1fd4ec[_0x44f3da(0xd8)]});const _0x43f4c2=_0x5038d7['product_details'][_0x44f3da(0xb6)](_0x3ae816=>{const _0x4e1b99=_0x44f3da;_0x3ae816[_0x4e1b99(0xe3)]==_0x1fd4ec['product_name']&&_0x3ae816[_0x4e1b99(0xfe)]==_0x1fd4ec[_0x4e1b99(0xfe)]&&_0x3ae816[_0x4e1b99(0xba)]==_0x1fd4ec[_0x4e1b99(0xba)]&&_0x3ae816[_0x4e1b99(0xef)]==_0x1fd4ec['product_code']&&_0x3ae816[_0x4e1b99(0xbd)]==_0x1fd4ec['bay']&&_0x3ae816['level']==_0x1fd4ec['level']&&_0x3ae816[_0x4e1b99(0xd2)]==_0x1fd4ec[_0x4e1b99(0xd2)]&&(_0x3ae816[_0x4e1b99(0x105)]=parseInt(_0x3ae816[_0x4e1b99(0x105)])+parseInt(_0x1fd4ec[_0x4e1b99(0x105)]),_0x337374++);});_0x337374=='0'&&(_0x5038d7[_0x44f3da(0x100)]=_0x5038d7[_0x44f3da(0x100)]['concat']({'product_name':_0x1fd4ec['product_name'],'product_stock':_0x1fd4ec[_0x44f3da(0x105)],'primary_code':_0x1fd4ec[_0x44f3da(0xfe)],'secondary_code':_0x1fd4ec[_0x44f3da(0xba)],'product_code':_0x1fd4ec[_0x44f3da(0xef)],'bay':_0x1fd4ec[_0x44f3da(0xbd)],'level':_0x1fd4ec['level'],'maxProducts':_0x1fd4ec[_0x44f3da(0xd0)],'unit':_0x1fd4ec[_0x44f3da(0xc9)],'secondary_unit':_0x1fd4ec['secondary_unit'],'maxPerUnit':_0x1fd4ec[_0x44f3da(0xb8)],'alertQTY':_0x1fd4ec[_0x44f3da(0xd6)],'production_date':_0x1fd4ec[_0x44f3da(0xf3)],'expiry_date':_0x1fd4ec[_0x44f3da(0xdb)],'batch_code':_0x1fd4ec[_0x44f3da(0xc5)],'invoice':_0x1fd4ec[_0x44f3da(0xd7)],'product_cat':_0x1fd4ec[_0x44f3da(0xca)],'uuid':_0x1fd4ec[_0x44f3da(0xfd)],'gross_price':_0x1fd4ec[_0x44f3da(0x103)],'date_recieved':_0x1fd4ec[_0x44f3da(0xd2)],'isAvailable':_0x44f3da(0xec),'isUsed':_0x44f3da(0xc7),'warehouse_id_temp_inc':_0x1fd4ec['_id']})),_0x5764a3[_0x26b347]['isConfirm']=_0x44f3da(0xec),_0x5764a3[_0x26b347][_0x44f3da(0xf0)]=_0x4c2e4d[_0x44f3da(0xb9)],_0x5764a3[_0x26b347][_0x44f3da(0xeb)]=_0x39c23e,await _0x5764a3[_0x26b347][_0x44f3da(0xea)](),await _0x5038d7['save']();}else{if(_0x1fd4ec[_0x44f3da(0xe5)]==_0x44f3da(0xc0)){var _0x5038d7=await warehouse['findOne']({'name':_0x1fd4ec[_0x44f3da(0xfb)],'room':_0x1fd4ec[_0x44f3da(0xd8)]});const _0x27cbca=_0x5038d7[_0x44f3da(0x100)][_0x44f3da(0xb6)](_0x358470=>{const _0x52aa16=_0x44f3da;_0x358470[_0x52aa16(0xe3)]==_0x1fd4ec[_0x52aa16(0xe3)]&&_0x358470[_0x52aa16(0xfe)]==_0x1fd4ec[_0x52aa16(0xfe)]&&_0x358470['secondary_code']==_0x1fd4ec[_0x52aa16(0xba)]&&_0x358470['product_code']==_0x1fd4ec['product_code']&&_0x358470['_id']==_0x1fd4ec[_0x52aa16(0x104)]&&(_0x358470[_0x52aa16(0x105)]=parseInt(_0x358470[_0x52aa16(0x105)])-parseInt(_0x1fd4ec[_0x52aa16(0x105)]),_0x358470['product_stock']==0x0?(_0x358470['isAvailable']='false',_0x5764a3[_0x26b347][_0x52aa16(0xc1)]=_0x52aa16(0xc7),_0x5764a3[_0x26b347]['isUsed']=_0x52aa16(0xec)):_0x5764a3[_0x26b347][_0x52aa16(0xf9)]='false',_0x358470[_0x52aa16(0xf9)]=_0x52aa16(0xc7),_0x337374++);});_0x5764a3[_0x26b347]['isConfirm']=_0x44f3da(0xec),_0x5764a3[_0x26b347][_0x44f3da(0xf0)]=_0x4c2e4d['email'],_0x5764a3[_0x26b347]['date_time']=_0x39c23e,await _0x5764a3[_0x26b347][_0x44f3da(0xea)](),await _0x5038d7['save']();}}}_0x4571b6[_0x44f3da(0xf6)]({'data_main':_0x5764a3,'data_warehouse':_0x5038d7});}catch(_0x51d45c){console[_0x44f3da(0xe4)](_0x51d45c);}}),router[a0_0x175603(0xb7)](a0_0x175603(0xee),auth,async(_0x3a44e8,_0xfe2610)=>{const _0x226945=a0_0x175603;try{const {id_data:_0x51d119}=_0x3a44e8[_0x226945(0xb3)],_0x4e4729=await warehouse_temporary[_0x226945(0x102)]({'_id':_0x51d119}),_0x4f970e=_0x3a44e8['user'],_0x328613=new Date();for(let _0x5f0a99=0x0;_0x5f0a99<=_0x4e4729['length']-0x1;_0x5f0a99++){const _0x3df8ab=_0x4e4729[_0x5f0a99];var _0x58b2a4=0x0;if(_0x3df8ab[_0x226945(0xe5)]==_0x226945(0xc0)){var _0x561aae=await warehouse[_0x226945(0xc6)]({'name':_0x3df8ab[_0x226945(0xfb)],'room':_0x3df8ab[_0x226945(0xd8)]});const _0x228d13=_0x561aae[_0x226945(0x100)][_0x226945(0xb6)](_0x2f93e5=>{const _0x579778=_0x226945;_0x2f93e5[_0x579778(0xe3)]==_0x3df8ab[_0x579778(0xe3)]&&_0x2f93e5[_0x579778(0xfe)]==_0x3df8ab[_0x579778(0xfe)]&&_0x2f93e5[_0x579778(0xba)]==_0x3df8ab[_0x579778(0xba)]&&_0x2f93e5[_0x579778(0xef)]==_0x3df8ab[_0x579778(0xef)]&&_0x2f93e5[_0x579778(0xdf)]==_0x3df8ab['warehouse_id_detl']&&(_0x2f93e5['isAvailable']=_0x579778(0xec),_0x4e4729[_0x5f0a99][_0x579778(0xc1)]=_0x579778(0xcd),_0x4e4729[_0x5f0a99]['isUsed']=_0x579778(0xec),_0x4e4729[_0x5f0a99][_0x579778(0xf0)]=_0x4f970e[_0x579778(0xb9)],_0x4e4729[_0x5f0a99][_0x579778(0xeb)]=_0x328613,_0x2f93e5[_0x579778(0xf9)]=_0x579778(0xc7),_0x58b2a4++);});_0x4e4729[_0x5f0a99]['isConfirm']=_0x226945(0xec),await _0x4e4729[_0x5f0a99][_0x226945(0xea)](),await _0x561aae[_0x226945(0xea)]();}}_0xfe2610[_0x226945(0xf6)]({'data_main':_0x4e4729,'data_warehouse':_0x561aae});}catch(_0x117145){console['log'](_0x117145);}}),router[a0_0x175603(0xb7)](a0_0x175603(0xda),auth,async(_0xcd2fec,_0x79c8ec)=>{const _0x40421f=a0_0x175603;try{const {data_show:_0x48bb8e,type_proc:_0x19e9b3}=_0xcd2fec['body'];if(_0x48bb8e==_0x40421f(0xde)){const _0x46834c=await warehouse_temporary[_0x40421f(0x102)]({'isConfirm':_0x40421f(0xec),'data_type':_0x19e9b3})[_0x40421f(0xe9)]({'level':0x1,'bin':0x1});_0x79c8ec[_0x40421f(0xf6)](_0x46834c);}else{const _0x40cc78=await warehouse_temporary[_0x40421f(0x102)]({'isConfirm':_0x48bb8e,'data_type':_0x19e9b3})['sort']({'level':0x1,'bin':0x1});_0x79c8ec['json'](_0x40cc78);}}catch(_0x474180){console[_0x40421f(0xe4)](_0x474180);}}),module['exports']=router;