const a0_0x3acd38=a0_0x235e;(function(_0x3b87be,_0x865a75){const _0x3567ef=a0_0x235e,_0x1b5cb3=_0x3b87be();while(!![]){try{const _0x28f971=parseInt(_0x3567ef(0x179))/0x1+-parseInt(_0x3567ef(0x14b))/0x2*(parseInt(_0x3567ef(0x16a))/0x3)+-parseInt(_0x3567ef(0x15a))/0x4*(-parseInt(_0x3567ef(0x192))/0x5)+parseInt(_0x3567ef(0x17f))/0x6+parseInt(_0x3567ef(0x15b))/0x7*(parseInt(_0x3567ef(0x189))/0x8)+-parseInt(_0x3567ef(0x18e))/0x9+parseInt(_0x3567ef(0x198))/0xa*(-parseInt(_0x3567ef(0x153))/0xb);if(_0x28f971===_0x865a75)break;else _0x1b5cb3['push'](_0x1b5cb3['shift']());}catch(_0x51faaa){_0x1b5cb3['push'](_0x1b5cb3['shift']());}}}(a0_0x243c,0xaa94f));const express=require(a0_0x3acd38(0x176)),app=express(),router=express[a0_0x3acd38(0x15c)](),{warehouse_validation_setup,master_shop,profile,warehouse,warehouse_temporary}=require(a0_0x3acd38(0x19b)),auth=require(a0_0x3acd38(0x18d)),nodemailer=require(a0_0x3acd38(0x167));function a0_0x235e(_0x27335f,_0x30d397){const _0x243ca1=a0_0x243c();return a0_0x235e=function(_0x235e96,_0x2f2ce2){_0x235e96=_0x235e96-0x14a;let _0x4c37fd=_0x243ca1[_0x235e96];return _0x4c37fd;},a0_0x235e(_0x27335f,_0x30d397);}var ejs=require(a0_0x3acd38(0x191));function a0_0x243c(){const _0x3aa58f=['bay','Arabic','flash','4LgckzJ','14xfGgZl','Router','Arabic\x20(ae)','/view/','date_recieved','date_time','data_type','expiry_date','unit','_id','product_code','isConfirm','nodemailer','split','warehouse_id_detl','24417CHZjeR','product_name','path','../public/language/languages.json','save','findOne','primary_code','batch_code','map','invoice','email','secondary_code','express','inc','isAvailable','961602oAKPkx','German','post','warehouse_checking','uuid','exports','5803812DbGQmR','maxperunit','length','errors','secondary_unit','Chinese','sort','product_details','json','All','2584984kxBCkW','/cancel_data','find','get','../middleware/auth','2408859GfNwoR','product_stock','Spanish','ejs','2970255QpWPYY','language','Hindi','false','maxStocks','isUsed','161810aeBZck','success','/confirm_data','../models/all_models','out','cancel','92WrEtOQ','body','user','room_name','warehouse','confirm_by','/view_data_all','level','1243RoFEtO','log','true','concat'];a0_0x243c=function(){return _0x3aa58f;};return a0_0x243c();}const path=require(a0_0x3acd38(0x16c)),users=require(a0_0x3acd38(0x16d));router[a0_0x3acd38(0x18c)](a0_0x3acd38(0x15e),auth,async(_0x2e0d84,_0x31f089)=>{const _0x4f6e25=a0_0x3acd38;try{const {username:_0x553113,email:_0x3c5798,role:_0x29928d}=_0x2e0d84[_0x4f6e25(0x14d)],_0x12ec55=_0x2e0d84['user'],_0x21cb87=await profile[_0x4f6e25(0x16f)]({'email':_0x12ec55[_0x4f6e25(0x174)]}),_0xc6ebf9=await master_shop['find']();if(_0xc6ebf9[0x0][_0x4f6e25(0x193)]=='English\x20(US)')var _0x1429b7=users['English'];else{if(_0xc6ebf9[0x0][_0x4f6e25(0x193)]==_0x4f6e25(0x194))var _0x1429b7=users[_0x4f6e25(0x194)];else{if(_0xc6ebf9[0x0]['language']==_0x4f6e25(0x17a))var _0x1429b7=users[_0x4f6e25(0x17a)];else{if(_0xc6ebf9[0x0]['language']==_0x4f6e25(0x190))var _0x1429b7=users[_0x4f6e25(0x190)];else{if(_0xc6ebf9[0x0][_0x4f6e25(0x193)]=='French')var _0x1429b7=users['French'];else{if(_0xc6ebf9[0x0]['language']=='Portuguese\x20(BR)')var _0x1429b7=users['Portuguese'];else{if(_0xc6ebf9[0x0][_0x4f6e25(0x193)]==_0x4f6e25(0x184))var _0x1429b7=users[_0x4f6e25(0x184)];else{if(_0xc6ebf9[0x0][_0x4f6e25(0x193)]==_0x4f6e25(0x15d))var _0x1429b7=users[_0x4f6e25(0x158)];}}}}}}}_0x31f089['render'](_0x4f6e25(0x17c),{'success':_0x2e0d84[_0x4f6e25(0x159)](_0x4f6e25(0x199)),'errors':_0x2e0d84['flash'](_0x4f6e25(0x182)),'profile':_0x21cb87,'master_shop':_0xc6ebf9,'role':_0x12ec55,'language':_0x1429b7});}catch(_0x213adf){console[_0x4f6e25(0x154)](_0x213adf);}}),router['post']('/check_to_confirm',auth,async(_0x45007a,_0xd8524d)=>{const _0x4aab4b=a0_0x3acd38;try{const {product_code:_0x2bbac3,type_of_process:_0x4ae255}=_0x45007a[_0x4aab4b(0x14c)];var _0x5ada02=_0x2bbac3[_0x4aab4b(0x168)]('~');const _0x2ff8a9=_0x5ada02[0x0],_0x464a5c=_0x5ada02[0x1],_0xbb1312=_0x5ada02[0x2],_0x4b6c6f=_0x5ada02[0x3],_0x58dad0=await warehouse_temporary[_0x4aab4b(0x18b)]({'warehouse':_0x2ff8a9,'room_name':_0x464a5c,'level':_0xbb1312,'bay':_0x4b6c6f,'data_type':_0x4ae255,'isConfirm':_0x4aab4b(0x195)});_0xd8524d['json'](_0x58dad0);}catch(_0x18c7a9){console[_0x4aab4b(0x154)](_0x18c7a9);}}),router[a0_0x3acd38(0x17b)](a0_0x3acd38(0x19a),auth,async(_0x2d7831,_0x2e797f)=>{const _0x4900fb=a0_0x3acd38;try{const {id_data:_0x3562e5}=_0x2d7831[_0x4900fb(0x14c)],_0x5b58e7=await warehouse_temporary[_0x4900fb(0x18b)]({'_id':_0x3562e5}),_0x1116e2=_0x2d7831['user'],_0x1df55d=new Date();for(let _0x3525e0=0x0;_0x3525e0<=_0x5b58e7['length']-0x1;_0x3525e0++){const _0x11ff09=_0x5b58e7[_0x3525e0];var _0x30f772=0x0;if(_0x11ff09[_0x4900fb(0x161)]==_0x4900fb(0x177)){var _0x287b26=await warehouse[_0x4900fb(0x16f)]({'name':_0x11ff09['warehouse'],'room':_0x11ff09[_0x4900fb(0x14e)]});const _0x598faf=_0x287b26[_0x4900fb(0x186)]['map'](_0x11181a=>{const _0x45070a=_0x4900fb;_0x11181a['product_name']==_0x11ff09['product_name']&&_0x11181a['primary_code']==_0x11ff09[_0x45070a(0x170)]&&_0x11181a['secondary_code']==_0x11ff09[_0x45070a(0x175)]&&_0x11181a[_0x45070a(0x165)]==_0x11ff09['product_code']&&_0x11181a[_0x45070a(0x157)]==_0x11ff09['bay']&&_0x11181a[_0x45070a(0x152)]==_0x11ff09[_0x45070a(0x152)]&&_0x11181a['date_recieved']==_0x11ff09[_0x45070a(0x15f)]&&(_0x11181a['product_stock']=parseInt(_0x11181a[_0x45070a(0x18f)])+parseInt(_0x11ff09[_0x45070a(0x18f)]),_0x30f772++);});_0x30f772=='0'&&(_0x287b26['product_details']=_0x287b26[_0x4900fb(0x186)][_0x4900fb(0x156)]({'product_name':_0x11ff09['product_name'],'product_stock':_0x11ff09[_0x4900fb(0x18f)],'primary_code':_0x11ff09['primary_code'],'secondary_code':_0x11ff09[_0x4900fb(0x175)],'product_code':_0x11ff09[_0x4900fb(0x165)],'bay':_0x11ff09[_0x4900fb(0x157)],'level':_0x11ff09[_0x4900fb(0x152)],'maxProducts':_0x11ff09[_0x4900fb(0x196)],'unit':_0x11ff09[_0x4900fb(0x163)],'secondary_unit':_0x11ff09[_0x4900fb(0x183)],'maxPerUnit':_0x11ff09[_0x4900fb(0x180)],'alertQTY':_0x11ff09['alertQTY'],'production_date':_0x11ff09['production_date'],'expiry_date':_0x11ff09[_0x4900fb(0x162)],'batch_code':_0x11ff09[_0x4900fb(0x171)],'invoice':_0x11ff09[_0x4900fb(0x173)],'product_cat':_0x11ff09['product_cat'],'uuid':_0x11ff09[_0x4900fb(0x17d)],'gross_price':_0x11ff09['gross_price'],'date_recieved':_0x11ff09[_0x4900fb(0x15f)],'isAvailable':_0x4900fb(0x155),'isUsed':_0x4900fb(0x195),'warehouse_id_temp_inc':_0x11ff09[_0x4900fb(0x164)]})),_0x5b58e7[_0x3525e0][_0x4900fb(0x166)]=_0x4900fb(0x155),_0x5b58e7[_0x3525e0][_0x4900fb(0x150)]=_0x1116e2['email'],_0x5b58e7[_0x3525e0]['date_time']=_0x1df55d,await _0x5b58e7[_0x3525e0][_0x4900fb(0x16e)](),await _0x287b26[_0x4900fb(0x16e)]();}else{if(_0x11ff09[_0x4900fb(0x161)]==_0x4900fb(0x19c)){var _0x287b26=await warehouse['findOne']({'name':_0x11ff09[_0x4900fb(0x14f)],'room':_0x11ff09[_0x4900fb(0x14e)]});const _0x12360d=_0x287b26['product_details'][_0x4900fb(0x172)](_0x424ac5=>{const _0x13e80a=_0x4900fb;_0x424ac5[_0x13e80a(0x16b)]==_0x11ff09['product_name']&&_0x424ac5['primary_code']==_0x11ff09[_0x13e80a(0x170)]&&_0x424ac5[_0x13e80a(0x175)]==_0x11ff09[_0x13e80a(0x175)]&&_0x424ac5['product_code']==_0x11ff09['product_code']&&_0x424ac5[_0x13e80a(0x164)]==_0x11ff09[_0x13e80a(0x169)]&&(_0x424ac5[_0x13e80a(0x18f)]=parseInt(_0x424ac5[_0x13e80a(0x18f)])-parseInt(_0x11ff09['product_stock']),_0x424ac5[_0x13e80a(0x18f)]==0x0?(_0x424ac5['isAvailable']='false',_0x5b58e7[_0x3525e0][_0x13e80a(0x178)]='false',_0x5b58e7[_0x3525e0][_0x13e80a(0x197)]=_0x13e80a(0x155)):_0x5b58e7[_0x3525e0]['isUsed']='false',_0x424ac5['isUsed']=_0x13e80a(0x195),_0x30f772++);});_0x5b58e7[_0x3525e0]['isConfirm']=_0x4900fb(0x155),_0x5b58e7[_0x3525e0]['confirm_by']=_0x1116e2['email'],_0x5b58e7[_0x3525e0]['date_time']=_0x1df55d,await _0x5b58e7[_0x3525e0]['save'](),await _0x287b26[_0x4900fb(0x16e)]();}}}_0x2e797f['json']({'data_main':_0x5b58e7,'data_warehouse':_0x287b26});}catch(_0x1a4db0){console[_0x4900fb(0x154)](_0x1a4db0);}}),router[a0_0x3acd38(0x17b)](a0_0x3acd38(0x18a),auth,async(_0x4cdacd,_0x15b98f)=>{const _0x26ec60=a0_0x3acd38;try{const {id_data:_0x47d004}=_0x4cdacd[_0x26ec60(0x14c)],_0x3d5248=await warehouse_temporary[_0x26ec60(0x18b)]({'_id':_0x47d004}),_0xfebda5=_0x4cdacd[_0x26ec60(0x14d)],_0x47e3a5=new Date();for(let _0x465934=0x0;_0x465934<=_0x3d5248[_0x26ec60(0x181)]-0x1;_0x465934++){const _0xc81763=_0x3d5248[_0x465934];var _0x575fde=0x0;if(_0xc81763[_0x26ec60(0x161)]=='out'){var _0x52a894=await warehouse['findOne']({'name':_0xc81763[_0x26ec60(0x14f)],'room':_0xc81763[_0x26ec60(0x14e)]});const _0x3d3c2f=_0x52a894[_0x26ec60(0x186)]['map'](_0x589d5e=>{const _0xbf9a54=_0x26ec60;_0x589d5e[_0xbf9a54(0x16b)]==_0xc81763[_0xbf9a54(0x16b)]&&_0x589d5e[_0xbf9a54(0x170)]==_0xc81763[_0xbf9a54(0x170)]&&_0x589d5e[_0xbf9a54(0x175)]==_0xc81763[_0xbf9a54(0x175)]&&_0x589d5e[_0xbf9a54(0x165)]==_0xc81763[_0xbf9a54(0x165)]&&_0x589d5e[_0xbf9a54(0x164)]==_0xc81763[_0xbf9a54(0x169)]&&(_0x589d5e[_0xbf9a54(0x178)]=_0xbf9a54(0x155),_0x3d5248[_0x465934][_0xbf9a54(0x178)]=_0xbf9a54(0x14a),_0x3d5248[_0x465934]['isUsed']=_0xbf9a54(0x155),_0x3d5248[_0x465934]['confirm_by']=_0xfebda5[_0xbf9a54(0x174)],_0x3d5248[_0x465934][_0xbf9a54(0x160)]=_0x47e3a5,_0x589d5e[_0xbf9a54(0x197)]=_0xbf9a54(0x195),_0x575fde++);});_0x3d5248[_0x465934][_0x26ec60(0x166)]=_0x26ec60(0x155),await _0x3d5248[_0x465934]['save'](),await _0x52a894[_0x26ec60(0x16e)]();}}_0x15b98f[_0x26ec60(0x187)]({'data_main':_0x3d5248,'data_warehouse':_0x52a894});}catch(_0x468c79){console[_0x26ec60(0x154)](_0x468c79);}}),router[a0_0x3acd38(0x17b)](a0_0x3acd38(0x151),auth,async(_0x151c8d,_0x477456)=>{const _0x2f06fb=a0_0x3acd38;try{const {data_show:_0x4e40a2,type_proc:_0x268486}=_0x151c8d[_0x2f06fb(0x14c)];if(_0x4e40a2==_0x2f06fb(0x188)){const _0x20acec=await warehouse_temporary['find']({'isConfirm':_0x2f06fb(0x155),'data_type':_0x268486})[_0x2f06fb(0x185)]({'level':0x1,'bin':0x1});_0x477456[_0x2f06fb(0x187)](_0x20acec);}else{const _0x376f8b=await warehouse_temporary[_0x2f06fb(0x18b)]({'isConfirm':_0x4e40a2,'data_type':_0x268486})[_0x2f06fb(0x185)]({'level':0x1,'bin':0x1});_0x477456[_0x2f06fb(0x187)](_0x376f8b);}}catch(_0x3b7e85){console[_0x2f06fb(0x154)](_0x3b7e85);}}),module[a0_0x3acd38(0x17e)]=router;