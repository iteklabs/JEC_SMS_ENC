const a0_0x1c24b3=a0_0x3477;(function(_0x2c3618,_0x1b1f1f){const _0x57038e=a0_0x3477,_0x4b377d=_0x2c3618();while(!![]){try{const _0x5b4310=-parseInt(_0x57038e(0xf3))/0x1*(-parseInt(_0x57038e(0x104))/0x2)+-parseInt(_0x57038e(0xd3))/0x3+-parseInt(_0x57038e(0xe7))/0x4*(-parseInt(_0x57038e(0xec))/0x5)+parseInt(_0x57038e(0x102))/0x6*(-parseInt(_0x57038e(0xf5))/0x7)+parseInt(_0x57038e(0x10c))/0x8+parseInt(_0x57038e(0x10b))/0x9+parseInt(_0x57038e(0xdb))/0xa;if(_0x5b4310===_0x1b1f1f)break;else _0x4b377d['push'](_0x4b377d['shift']());}catch(_0x501ca2){_0x4b377d['push'](_0x4b377d['shift']());}}}(a0_0x387a,0xc63e3));const express=require('express'),app=express(),router=express[a0_0x1c24b3(0xe3)](),{warehouse_validation_setup,master_shop,profile,warehouse,warehouse_temporary}=require(a0_0x1c24b3(0x103)),auth=require(a0_0x1c24b3(0xd6)),nodemailer=require('nodemailer');function a0_0x3477(_0x1be10f,_0x366d94){const _0x387a00=a0_0x387a();return a0_0x3477=function(_0x3477d1,_0x1f60e2){_0x3477d1=_0x3477d1-0xc8;let _0x15d2e8=_0x387a00[_0x3477d1];return _0x15d2e8;},a0_0x3477(_0x1be10f,_0x366d94);}var ejs=require(a0_0x1c24b3(0xfb));function a0_0x387a(){const _0x46e88b=['6Zobsme','../models/all_models','64QDujJx','product_details','English\x20(US)','out','Portuguese\x20(BR)','user','batch_code','7693812QiHCPw','1912320eixrQV','render','inc','maxStocks','warehouse','json','date_recieved','email','primary_code','post','map','Spanish','gross_price','../public/language/languages.json','uuid','3609171thLXXi','true','product_stock','../middleware/auth','save','German','isConfirm','length','19095700zkZzDF','errors','product_code','exports','findOne','product_cat','warehouse_checking','product_name','Router','_id','Chinese','warehouse_id_detl','32172zciCov','maxperunit','level','Arabic','flash','60EaUcee','bay','room_name','data_type','success','language','find','1111fxRZaI','get','7843402OplGbh','Portuguese','/confirm_data','secondary_code','Hindi','body','ejs','French','Arabic\x20(ae)','false','English','/check_to_confirm','invoice'];a0_0x387a=function(){return _0x46e88b;};return a0_0x387a();}const path=require('path'),users=require(a0_0x1c24b3(0xd1));router[a0_0x1c24b3(0xf4)]('/view/',auth,async(_0x3b8f06,_0x195941)=>{const _0x102b8e=a0_0x1c24b3;try{const {username:_0x2be23e,email:_0xb8bec7,role:_0x400e53}=_0x3b8f06[_0x102b8e(0x109)],_0x3acbec=_0x3b8f06[_0x102b8e(0x109)],_0x4556bb=await profile[_0x102b8e(0xdf)]({'email':_0x3acbec[_0x102b8e(0xcb)]}),_0x3ab5a4=await master_shop['find']();if(_0x3ab5a4[0x0][_0x102b8e(0xf1)]==_0x102b8e(0x106))var _0xeff68f=users[_0x102b8e(0xff)];else{if(_0x3ab5a4[0x0][_0x102b8e(0xf1)]==_0x102b8e(0xf9))var _0xeff68f=users['Hindi'];else{if(_0x3ab5a4[0x0][_0x102b8e(0xf1)]==_0x102b8e(0xd8))var _0xeff68f=users[_0x102b8e(0xd8)];else{if(_0x3ab5a4[0x0]['language']==_0x102b8e(0xcf))var _0xeff68f=users[_0x102b8e(0xcf)];else{if(_0x3ab5a4[0x0][_0x102b8e(0xf1)]=='French')var _0xeff68f=users[_0x102b8e(0xfc)];else{if(_0x3ab5a4[0x0][_0x102b8e(0xf1)]==_0x102b8e(0x108))var _0xeff68f=users[_0x102b8e(0xf6)];else{if(_0x3ab5a4[0x0][_0x102b8e(0xf1)]=='Chinese')var _0xeff68f=users[_0x102b8e(0xe5)];else{if(_0x3ab5a4[0x0]['language']==_0x102b8e(0xfd))var _0xeff68f=users[_0x102b8e(0xea)];}}}}}}}_0x195941[_0x102b8e(0x10d)](_0x102b8e(0xe1),{'success':_0x3b8f06[_0x102b8e(0xeb)](_0x102b8e(0xf0)),'errors':_0x3b8f06[_0x102b8e(0xeb)](_0x102b8e(0xdc)),'profile':_0x4556bb,'master_shop':_0x3ab5a4,'role':_0x3acbec,'language':_0xeff68f});}catch(_0x5af6c8){console['log'](_0x5af6c8);}}),router[a0_0x1c24b3(0xcd)](a0_0x1c24b3(0x100),auth,async(_0x26fbb7,_0x1f4417)=>{const _0x481fd5=a0_0x1c24b3;try{const {product_code:_0x177d9f,type_of_process:_0x54ef5e}=_0x26fbb7[_0x481fd5(0xfa)];var _0x5e1789=_0x177d9f['split']('~');const _0x21cbe2=_0x5e1789[0x0],_0x58d4d3=_0x5e1789[0x1],_0x305156=_0x5e1789[0x2],_0x18d41b=_0x5e1789[0x3],_0x230adf=await warehouse_temporary[_0x481fd5(0xf2)]({'warehouse':_0x21cbe2,'room_name':_0x58d4d3,'level':_0x305156,'bay':_0x18d41b,'data_type':_0x54ef5e,'isConfirm':_0x481fd5(0xfe)});_0x1f4417[_0x481fd5(0xc9)](_0x230adf);}catch(_0x3e4a56){console['log'](_0x3e4a56);}}),router['post'](a0_0x1c24b3(0xf7),auth,async(_0x53dc58,_0x49a07b)=>{const _0x2af07e=a0_0x1c24b3;try{const {id_data:_0x1da33a}=_0x53dc58[_0x2af07e(0xfa)],_0x56f295=await warehouse_temporary[_0x2af07e(0xf2)]({'_id':_0x1da33a});for(let _0x16e265=0x0;_0x16e265<=_0x56f295[_0x2af07e(0xda)]-0x1;_0x16e265++){const _0x1c9457=_0x56f295[_0x16e265];var _0x3ca805=0x0;if(_0x1c9457['data_type']==_0x2af07e(0x10e)){var _0x425cfe=await warehouse[_0x2af07e(0xdf)]({'name':_0x1c9457[_0x2af07e(0xc8)],'room':_0x1c9457[_0x2af07e(0xee)]});const _0x4fea86=_0x425cfe[_0x2af07e(0x105)][_0x2af07e(0xce)](_0x203493=>{const _0x5775b1=_0x2af07e;_0x203493[_0x5775b1(0xe2)]==_0x1c9457[_0x5775b1(0xe2)]&&_0x203493[_0x5775b1(0xcc)]==_0x1c9457[_0x5775b1(0xcc)]&&_0x203493['secondary_code']==_0x1c9457[_0x5775b1(0xf8)]&&_0x203493['product_code']==_0x1c9457[_0x5775b1(0xdd)]&&_0x203493[_0x5775b1(0xed)]==_0x1c9457['bay']&&_0x203493[_0x5775b1(0xe9)]==_0x1c9457[_0x5775b1(0xe9)]&&_0x203493[_0x5775b1(0xca)]==_0x1c9457[_0x5775b1(0xca)]&&(_0x203493[_0x5775b1(0xd5)]=parseInt(_0x203493[_0x5775b1(0xd5)])+parseInt(_0x1c9457[_0x5775b1(0xd5)]),_0x3ca805++);});_0x3ca805=='0'&&(_0x425cfe[_0x2af07e(0x105)]=_0x425cfe[_0x2af07e(0x105)]['concat']({'product_name':_0x1c9457[_0x2af07e(0xe2)],'product_stock':_0x1c9457[_0x2af07e(0xd5)],'primary_code':_0x1c9457[_0x2af07e(0xcc)],'secondary_code':_0x1c9457[_0x2af07e(0xf8)],'product_code':_0x1c9457['product_code'],'bay':_0x1c9457['bay'],'level':_0x1c9457[_0x2af07e(0xe9)],'maxProducts':_0x1c9457[_0x2af07e(0x10f)],'unit':_0x1c9457['unit'],'secondary_unit':_0x1c9457['secondary_unit'],'maxPerUnit':_0x1c9457[_0x2af07e(0xe8)],'alertQTY':_0x1c9457['alertQTY'],'production_date':_0x1c9457['production_date'],'expiry_date':_0x1c9457['expiry_date'],'batch_code':_0x1c9457[_0x2af07e(0x10a)],'invoice':_0x1c9457[_0x2af07e(0x101)],'product_cat':_0x1c9457[_0x2af07e(0xe0)],'uuid':_0x1c9457[_0x2af07e(0xd2)],'gross_price':_0x1c9457[_0x2af07e(0xd0)],'date_recieved':_0x1c9457[_0x2af07e(0xca)],'isAvailable':_0x2af07e(0xd4),'isUsed':_0x2af07e(0xfe),'warehouse_id_temp_inc':_0x1c9457[_0x2af07e(0xe4)]})),_0x56f295[_0x16e265][_0x2af07e(0xd9)]=_0x2af07e(0xd4),await _0x56f295[_0x16e265][_0x2af07e(0xd7)](),await _0x425cfe[_0x2af07e(0xd7)]();}else{if(_0x1c9457[_0x2af07e(0xef)]==_0x2af07e(0x107)){var _0x425cfe=await warehouse['findOne']({'name':_0x1c9457[_0x2af07e(0xc8)],'room':_0x1c9457['room_name']});const _0x494ad2=_0x425cfe[_0x2af07e(0x105)][_0x2af07e(0xce)](_0x1ca29c=>{const _0x72515a=_0x2af07e;_0x1ca29c[_0x72515a(0xe2)]==_0x1c9457[_0x72515a(0xe2)]&&_0x1ca29c[_0x72515a(0xcc)]==_0x1c9457[_0x72515a(0xcc)]&&_0x1ca29c[_0x72515a(0xf8)]==_0x1c9457[_0x72515a(0xf8)]&&_0x1ca29c['product_code']==_0x1c9457[_0x72515a(0xdd)]&&_0x1ca29c[_0x72515a(0xe4)]==_0x1c9457[_0x72515a(0xe6)]&&(_0x1ca29c[_0x72515a(0xd5)]=parseInt(_0x1ca29c[_0x72515a(0xd5)])-parseInt(_0x1c9457['product_stock']),_0x1ca29c[_0x72515a(0xd5)]==0x0?(_0x1ca29c['isAvailable']=_0x72515a(0xfe),_0x56f295[_0x16e265]['isAvailable']='false',_0x56f295[_0x16e265]['isUsed']=_0x72515a(0xd4)):_0x56f295[_0x16e265]['isUsed']=_0x72515a(0xfe),_0x1ca29c['isUsed']=_0x72515a(0xfe),_0x3ca805++);});_0x56f295[_0x16e265][_0x2af07e(0xd9)]='true',await _0x56f295[_0x16e265]['save'](),await _0x425cfe[_0x2af07e(0xd7)]();}}}_0x49a07b[_0x2af07e(0xc9)]({'data_main':_0x56f295,'data_warehouse':_0x425cfe});}catch(_0x38612c){console['log'](_0x38612c);}}),module[a0_0x1c24b3(0xde)]=router;