function a0_0x2380(){var _0x5999e5=['outgoing_id','unit','logo','log','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','host','://','../models/all_models','invoice','push','mongodb','English\x20(US)','room','/../public','warehouse_approval_All','xlsx','Sales\x20Add\x20successfully','date_data','<div>','4744290siZzaV','288460FPowgy','/all_sales_finished/preview/','Router','</div>','aggregate','accounting_account_id','wms_data','prod_id','toString','Arabic\x20(ae)','1422276uOmoCe','Hindi','flash','maxPerUnit','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','$product_details.product_name','Chinese','forEach','wms_account_id','warehouse_detl','</body></html>','7616707LMixOW','back','<hr\x20class=\x22my-3\x22>','$wms_account_id','nodemailer','Portuguese','$_id','padStart','../middleware/auth','exports','</b></span>\x20<br>','primary_code','user','94408VsZTNz','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','<tr>','get','secondary_code','<!DOCTYPE\x20html>','</thead>','map','Portuguese\x20(BR)','$room','filter','qty','English','</tr>','quantity','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','redirect','uuid','<h5>\x20JEC\x20SMS\x20</h5>','product_stock','document_number_out','warehouse_id','<html><head><title></title>','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','Error\x20Occurs','2889750WUxVMZ','production_date','$product_details.product_stock','port','German','False','createTransport','$product_details.bay','exceljs','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','Email\x20sent\x20successfully','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','find','outgoing_invoice','bay','staffs','date','batch_code','3609fbPweF','</table>','6SqkkmP','post','maxperunit','product_details','_id','</tbody>','product_code','language','../public/language/languages.json','secondary_unit','data_loc','success','product_name','errors','/data/data_rack','express','Types','117389iOmckj','<br><br><br>','sendMail','params','request_qty','save','$wms_data','/data/data_loc','body','$product_details','Spanish','wms_account_confirm','OUT-','$product_details._id','/:id','json','invoice_init','Arabic','render','findOne','$product_details.level','length','email','mongoose','<table\x20style=\x22width:\x20100%\x20!important;\x22>','$accounting_account_id','</td>','christian.villamer@jakagroup.com','level','$account_data','expiry_date','ObjectId','gross_price','/data/All','</head><body>','warehouse_approval','French','protocol','findById','stock'];a0_0x2380=function(){return _0x5999e5;};return a0_0x2380();}var a0_0x16ffda=a0_0x3ed8;function a0_0x3ed8(_0x5c7cdc,_0x497e01){var _0x2380e4=a0_0x2380();return a0_0x3ed8=function(_0x3ed883,_0x3803f7){_0x3ed883=_0x3ed883-0x163;var _0x3aba13=_0x2380e4[_0x3ed883];return _0x3aba13;},a0_0x3ed8(_0x5c7cdc,_0x497e01);}(function(_0x3eafe7,_0x2a6e7b){var _0x82ad69=a0_0x3ed8,_0x47f0ac=_0x3eafe7();while(!![]){try{var _0x976829=parseInt(_0x82ad69(0x1a6))/0x1+-parseInt(_0x82ad69(0x181))/0x2+-parseInt(_0x82ad69(0x195))/0x3*(parseInt(_0x82ad69(0x1ec))/0x4)+-parseInt(_0x82ad69(0x1e2))/0x5+-parseInt(_0x82ad69(0x1e1))/0x6+-parseInt(_0x82ad69(0x1f9))/0x7+-parseInt(_0x82ad69(0x168))/0x8*(-parseInt(_0x82ad69(0x193))/0x9);if(_0x976829===_0x2a6e7b)break;else _0x47f0ac['push'](_0x47f0ac['shift']());}catch(_0xb36922){_0x47f0ac['push'](_0x47f0ac['shift']());}}}(a0_0x2380,0xb8d4d));const express=require(a0_0x16ffda(0x1a4)),app=express(),router=express[a0_0x16ffda(0x1e4)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x16ffda(0x1d5)),auth=require(a0_0x16ffda(0x163)),users=require(a0_0x16ffda(0x19d)),excelJS=require(a0_0x16ffda(0x189)),xlsx=require(a0_0x16ffda(0x1dd)),mongoose=require(a0_0x16ffda(0x1bd)),{ObjectId}=require(a0_0x16ffda(0x1d8)),nodemailer=require(a0_0x16ffda(0x1fd));router[a0_0x16ffda(0x16b)](a0_0x16ffda(0x1b4),auth,async(_0x1c4d6c,_0x47692d)=>{var _0x291c5c=a0_0x16ffda;try{const _0x504646=await master_shop[_0x291c5c(0x18d)](),_0x78bbf=_0x1c4d6c[_0x291c5c(0x167)],_0x478672=await profile[_0x291c5c(0x1b9)]({'email':_0x78bbf[_0x291c5c(0x1bc)]}),_0x152baa=await staff[_0x291c5c(0x1b9)]({'email':_0x78bbf['email']}),_0x282a6b=await customer[_0x291c5c(0x18d)]({'agent_id':_0x152baa[_0x291c5c(0x199)]}),_0x5f1409=mongoose[_0x291c5c(0x1a5)]['ObjectId'],_0x28a40c=_0x1c4d6c[_0x291c5c(0x1a9)]['id'],_0x393322=await sales_order[_0x291c5c(0x1cc)](_0x28a40c),_0x51efa5=await sales_order[_0x291c5c(0x1e6)]([{'$match':{'_id':_0x5f1409(_0x28a40c)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x291c5c(0x1bf)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':'staffs','localField':'accounting_account_id','foreignField':_0x291c5c(0x199),'as':'account_data'}},{'$unwind':_0x291c5c(0x1c3)},{'$lookup':{'from':_0x291c5c(0x190),'localField':_0x291c5c(0x1f6),'foreignField':_0x291c5c(0x199),'as':_0x291c5c(0x1e8)}},{'$unwind':_0x291c5c(0x1ac)}]);if(_0x504646[0x0]['language']==_0x291c5c(0x1d9))var _0xcaf70d=users[_0x291c5c(0x174)];else{if(_0x504646[0x0][_0x291c5c(0x19c)]==_0x291c5c(0x1ed))var _0xcaf70d=users['Hindi'];else{if(_0x504646[0x0][_0x291c5c(0x19c)]==_0x291c5c(0x185))var _0xcaf70d=users[_0x291c5c(0x185)];else{if(_0x504646[0x0]['language']==_0x291c5c(0x1b0))var _0xcaf70d=users[_0x291c5c(0x1b0)];else{if(_0x504646[0x0][_0x291c5c(0x19c)]==_0x291c5c(0x1ca))var _0xcaf70d=users[_0x291c5c(0x1ca)];else{if(_0x504646[0x0][_0x291c5c(0x19c)]==_0x291c5c(0x170))var _0xcaf70d=users['Portuguese'];else{if(_0x504646[0x0][_0x291c5c(0x19c)]=='Chinese')var _0xcaf70d=users[_0x291c5c(0x1f4)];else{if(_0x504646[0x0]['language']=='Arabic\x20(ae)')var _0xcaf70d=users[_0x291c5c(0x1b7)];}}}}}}}_0x47692d[_0x291c5c(0x1b8)](_0x291c5c(0x1c9),{'success':_0x1c4d6c[_0x291c5c(0x1ee)](_0x291c5c(0x1a0)),'errors':_0x1c4d6c['flash']('errors'),'master_shop':_0x504646,'profile':_0x478672,'role':_0x78bbf,'language':_0xcaf70d,'customer':_0x282a6b,'sales_sa':_0x393322,'approvers':_0x51efa5[0x0],'the_id':_0x28a40c});}catch(_0x16f3b5){console[_0x291c5c(0x1d1)](_0x16f3b5);}}),router['post'](a0_0x16ffda(0x1b4),auth,async(_0x3b79f8,_0x184573)=>{var _0x2d35c4=a0_0x16ffda;try{const {date:_0x415162,invoice_data:_0x16a067,wms_confirm:_0x323f5b,the_id_val:_0x3224b2,prod_id:_0x563c87,SCRN:_0x2c31be,ReqBy:_0x4ff270,dateofreq:_0x3f6dd5,PO_number:_0x3e32a4,warehouse_name:_0x1fe0af,typeservicesData:_0x183e88,typevehicle:_0x183bb4,destination:_0x9d7dc9,deliverydate:_0x23aac1,driver:_0xdde68f,plate:_0x58073b,van:_0x4b9938,DRSI:_0x70750b,TSU:_0x1a22f4,TFU:_0x2e94de,note:_0x30e4ef}=_0x3b79f8[_0x2d35c4(0x1ae)],_0x2ac33a=await sales_order[_0x2d35c4(0x1cc)](_0x3224b2);if(typeof _0x563c87=='string')var _0xd96dbd=[_0x3b79f8[_0x2d35c4(0x1ae)][_0x2d35c4(0x1e9)]],_0xe87ad7=[_0x3b79f8[_0x2d35c4(0x1ae)]['qty']],_0x9dd4f1=[_0x3b79f8['body'][_0x2d35c4(0x19f)]];else var _0xd96dbd=[..._0x3b79f8['body']['prod_id']],_0xe87ad7=[..._0x3b79f8[_0x2d35c4(0x1ae)][_0x2d35c4(0x173)]],_0x9dd4f1=[..._0x3b79f8['body'][_0x2d35c4(0x19f)]];const _0x2daf7e=_0xd96dbd[_0x2d35c4(0x16f)](_0x4af9c9=>{return _0x4af9c9={'prod_id':_0x4af9c9};});_0x9dd4f1['forEach']((_0x47c658,_0x1aa897)=>{var _0x11e105=_0x2d35c4,_0x3bef24=_0x47c658['split']('~');_0x2daf7e[_0x1aa897][_0x11e105(0x17d)]=_0x3bef24[0x0],_0x2daf7e[_0x1aa897][_0x11e105(0x1f7)]=_0x3bef24[0x1];}),_0xe87ad7[_0x2d35c4(0x1f5)]((_0x697053,_0x205a85)=>{var _0x23f960=_0x2d35c4;_0x2daf7e[_0x205a85][_0x23f960(0x1aa)]=_0x697053;});var _0x1e7ef2=[],_0x4da50e=[],_0x3898e3=[],_0x56d664=[],_0x116b99=[],_0x51edde=[],_0x4db22b=[],_0x888c42=[],_0x28580b=[],_0x2b0d79=[],_0x84c55c=[],_0x3a2522=[],_0x291586=[],_0x442b6c=[],_0x31d7a7=[],_0x4f3fa3=[],_0xf9f639=[],_0x5bfb57=[],_0x1b1fa6=[],_0x578019=[];for(let _0x2e75b8=0x0;_0x2e75b8<=_0x2daf7e[_0x2d35c4(0x1bb)]-0x1;_0x2e75b8++){const _0x2fa4a4=_0x2daf7e[_0x2e75b8],_0x2b1262=mongoose[_0x2d35c4(0x1a5)][_0x2d35c4(0x1c5)];var _0x2dd383=await warehouse[_0x2d35c4(0x1e6)]([{'$match':{'_id':_0x2b1262(_0x2fa4a4[_0x2d35c4(0x17d)])}},{'$unwind':'$product_details'},{'$match':{'product_details._id':_0x2b1262(_0x2fa4a4[_0x2d35c4(0x1f7)])}}]),_0x64f45a=0x0;for(let _0x42b599=0x0;_0x42b599<=_0x2dd383[_0x2d35c4(0x1bb)]-0x1;_0x42b599++){var _0x25e89a=_0x2dd383[_0x42b599];_0x25e89a[_0x2d35c4(0x198)][_0x2d35c4(0x17b)]<_0x2fa4a4[_0x2d35c4(0x1aa)]&&_0x64f45a++;}if(_0x64f45a>0x0)return _0x3b79f8['flash']('errors',_0x2d35c4(0x1f1)),_0x184573[_0x2d35c4(0x178)](_0x2d35c4(0x1fa));var _0x4e3ba5=0x0;for(let _0x293c2b=0x0;_0x293c2b<=_0x2dd383[_0x2d35c4(0x1bb)]-0x1;_0x293c2b++){var _0x25e89a=_0x2dd383[_0x293c2b];_0x25e89a[_0x2d35c4(0x198)]['product_stock']>_0x2fa4a4['request_qty']&&(_0x1e7ef2[_0x2d35c4(0x1d7)](_0x25e89a['product_details']['product_name']),_0x4da50e[_0x2d35c4(0x1d7)](_0x25e89a[_0x2d35c4(0x198)][_0x2d35c4(0x17b)]),_0x3898e3[_0x2d35c4(0x1d7)](_0x2fa4a4['request_qty']),_0x56d664[_0x2d35c4(0x1d7)](_0x25e89a['product_details'][_0x2d35c4(0x166)]),_0x116b99[_0x2d35c4(0x1d7)](_0x25e89a[_0x2d35c4(0x198)]['secondary_code']),_0x51edde[_0x2d35c4(0x1d7)](_0x25e89a['product_details'][_0x2d35c4(0x19b)]),_0x4db22b[_0x2d35c4(0x1d7)](_0x25e89a['product_details'][_0x2d35c4(0x1c2)]),_0x888c42['push'](_0x25e89a[_0x2d35c4(0x198)][_0x2d35c4(0x18f)]),_0x28580b[_0x2d35c4(0x1d7)](_0x25e89a[_0x2d35c4(0x198)][_0x2d35c4(0x1cf)]),_0x2b0d79[_0x2d35c4(0x1d7)](_0x25e89a[_0x2d35c4(0x198)][_0x2d35c4(0x19e)]),_0x84c55c[_0x2d35c4(0x1d7)](_0x25e89a[_0x2d35c4(0x198)][_0x2d35c4(0x192)]),_0x3a2522['push'](_0x25e89a[_0x2d35c4(0x198)][_0x2d35c4(0x1c4)]),_0x291586[_0x2d35c4(0x1d7)](_0x25e89a[_0x2d35c4(0x198)][_0x2d35c4(0x182)]),_0x442b6c['push'](_0x25e89a[_0x2d35c4(0x198)][_0x2d35c4(0x1ef)]),_0x31d7a7[_0x2d35c4(0x1d7)](_0x25e89a[_0x2d35c4(0x198)]['product_cat']),_0x4f3fa3[_0x2d35c4(0x1d7)](_0x25e89a[_0x2d35c4(0x1da)]),_0xf9f639[_0x2d35c4(0x1d7)](_0x25e89a[_0x2d35c4(0x198)][_0x2d35c4(0x1d6)]),_0x5bfb57[_0x2d35c4(0x1d7)](_0x25e89a[_0x2d35c4(0x198)]['_id']),_0x1b1fa6[_0x2d35c4(0x1d7)](_0x25e89a['product_details'][_0x2d35c4(0x179)]),_0x578019['push'](_0x25e89a[_0x2d35c4(0x198)]['gross_price']),_0x4e3ba5++);}}const _0x1d0d8f=_0x1e7ef2[_0x2d35c4(0x16f)](_0x2e5c4a=>{return _0x2e5c4a={'product_name':_0x2e5c4a};});_0x4da50e['forEach']((_0x7952bb,_0x55a82d)=>{var _0x44600d=_0x2d35c4;_0x1d0d8f[_0x55a82d][_0x44600d(0x1cd)]=_0x7952bb;}),_0x3898e3[_0x2d35c4(0x1f5)]((_0x2ff698,_0xfe916d)=>{var _0x310ad3=_0x2d35c4;_0x1d0d8f[_0xfe916d][_0x310ad3(0x176)]=Math['abs'](_0x2ff698);}),_0x578019['forEach']((_0x5850fd,_0x555475)=>{var _0x444450=_0x2d35c4;_0x1d0d8f[_0x555475][_0x444450(0x1c6)]=_0x5850fd;}),_0x1b1fa6['forEach']((_0x1e5301,_0x5dcd9f)=>{_0x1d0d8f[_0x5dcd9f]['uuid']=_0x1e5301;}),_0x5bfb57[_0x2d35c4(0x1f5)]((_0xc38d5,_0x1a05d4)=>{_0x1d0d8f[_0x1a05d4]['id_transaction_from']=_0xc38d5;}),_0x56d664[_0x2d35c4(0x1f5)]((_0xb505f0,_0x34b07d)=>{var _0x24ffc7=_0x2d35c4;_0x1d0d8f[_0x34b07d][_0x24ffc7(0x166)]=_0xb505f0;}),_0x116b99[_0x2d35c4(0x1f5)]((_0x5e2b86,_0x2b8ceb)=>{var _0x340021=_0x2d35c4;_0x1d0d8f[_0x2b8ceb][_0x340021(0x16c)]=_0x5e2b86;}),_0x51edde[_0x2d35c4(0x1f5)]((_0xbd084d,_0x376de6)=>{var _0x1bc74b=_0x2d35c4;_0x1d0d8f[_0x376de6][_0x1bc74b(0x19b)]=_0xbd084d;}),_0x4db22b[_0x2d35c4(0x1f5)]((_0x1ea96d,_0x2fc8da)=>{var _0x10ebad=_0x2d35c4;_0x1d0d8f[_0x2fc8da][_0x10ebad(0x1c2)]=_0x1ea96d;}),_0x888c42[_0x2d35c4(0x1f5)]((_0x4981b1,_0x24900b)=>{var _0x3dd715=_0x2d35c4;_0x1d0d8f[_0x24900b][_0x3dd715(0x18f)]=_0x4981b1;}),_0x28580b[_0x2d35c4(0x1f5)]((_0x1fc7b2,_0x1d3d51)=>{var _0xe66f4d=_0x2d35c4;_0x1d0d8f[_0x1d3d51][_0xe66f4d(0x1cf)]=_0x1fc7b2;}),_0x2b0d79[_0x2d35c4(0x1f5)]((_0x5062b6,_0x25d731)=>{var _0x5f301f=_0x2d35c4;_0x1d0d8f[_0x25d731][_0x5f301f(0x19e)]=_0x5062b6;}),_0x84c55c[_0x2d35c4(0x1f5)]((_0x42db45,_0x4fb24d)=>{var _0x5d2ca0=_0x2d35c4;_0x1d0d8f[_0x4fb24d][_0x5d2ca0(0x192)]=_0x42db45;}),_0x3a2522[_0x2d35c4(0x1f5)]((_0x1aa5a4,_0x50dc31)=>{_0x1d0d8f[_0x50dc31]['expiry_date']=_0x1aa5a4;}),_0x291586[_0x2d35c4(0x1f5)]((_0x583137,_0x2acc20)=>{var _0x428107=_0x2d35c4;_0x1d0d8f[_0x2acc20][_0x428107(0x182)]=_0x583137;}),_0x442b6c[_0x2d35c4(0x1f5)]((_0x5b3498,_0x19adf2)=>{var _0x363f0e=_0x2d35c4;_0x1d0d8f[_0x19adf2][_0x363f0e(0x197)]=_0x5b3498;}),_0x31d7a7[_0x2d35c4(0x1f5)]((_0x1235fe,_0x594a3c)=>{_0x1d0d8f[_0x594a3c]['prod_cat']=_0x1235fe;}),_0x4f3fa3[_0x2d35c4(0x1f5)]((_0x41078c,_0x3b117f)=>{_0x1d0d8f[_0x3b117f]['room_name']=_0x41078c;}),_0xf9f639[_0x2d35c4(0x1f5)]((_0xd951bd,_0xadd6d8)=>{var _0x23d3c0=_0x2d35c4;_0x1d0d8f[_0xadd6d8][_0x23d3c0(0x1d6)]=_0xd951bd,_0x1d0d8f[_0xadd6d8][_0x23d3c0(0x1df)]=_0x415162;});const _0x4621c6=new invoice_for_outgoing();await _0x4621c6[_0x2d35c4(0x1ab)](),_0xf9f639['forEach']((_0x485fc1,_0x129eaa)=>{var _0xbc3f6f=_0x2d35c4;_0x1d0d8f[_0x129eaa][_0xbc3f6f(0x18e)]=_0xbc3f6f(0x1b2)+_0x4621c6['invoice_init'][_0xbc3f6f(0x1ea)]()['padStart'](0x8,'0');});const _0x3137b0=_0x1d0d8f[_0x2d35c4(0x172)](_0x4d3cbe=>_0x4d3cbe['quantity']!=='0'&&_0x4d3cbe['quantity']!==''),_0x864eb9=new sales_finished({'invoice':_0x2d35c4(0x1b2)+_0x4621c6[_0x2d35c4(0x1b6)]['toString']()[_0x2d35c4(0x200)](0x8,'0'),'date':_0x415162,'warehouse_name':_0x1fe0af,'sale_product':_0x3137b0,'note':_0x30e4ef,'SCRN':_0x2c31be,'finalize':_0x2d35c4(0x186),'ReqBy':_0x4ff270,'dateofreq':_0x3f6dd5,'PO_number':_0x3e32a4,'typeservicesData':_0x183e88,'typevehicle':_0x183bb4,'destination':_0x9d7dc9,'deliverydate':_0x23aac1,'driver':_0xdde68f,'plate':_0x58073b,'van':_0x4b9938,'DRSI':_0x70750b,'TSU':_0x1a22f4,'TFU':_0x2e94de}),_0x56ea67=await _0x864eb9[_0x2d35c4(0x1ab)](),_0x3218ec=new Date(),_0x2ae5b0=_0x3218ec['toLocaleDateString']();_0x2ac33a[_0x2d35c4(0x1b1)]=_0x323f5b,_0x2ac33a['wms_account_date']=_0x2ae5b0,_0x2ac33a[_0x2d35c4(0x17c)]=_0x2d35c4(0x1b2)+_0x4621c6[_0x2d35c4(0x1b6)][_0x2d35c4(0x1ea)]()['padStart'](0x8,'0'),_0x2ac33a[_0x2d35c4(0x1ce)]=_0x56ea67['_id'],await _0x2ac33a[_0x2d35c4(0x1ab)]();const _0x40d222=await master_shop[_0x2d35c4(0x18d)](),_0x338771=await email_settings['findOne']();let _0x25df0c=nodemailer[_0x2d35c4(0x187)]({'host':_0x338771[_0x2d35c4(0x1d3)],'port':Number(_0x338771[_0x2d35c4(0x184)]),'secure':![],'auth':{'user':_0x338771[_0x2d35c4(0x1bc)],'pass':_0x338771['password']}});const _0x1525e4=_0x3b79f8[_0x2d35c4(0x1cb)]+_0x2d35c4(0x1d4)+_0x3b79f8['headers'][_0x2d35c4(0x1d3)];var _0x2312c6=_0x2ac33a['sale_product'],_0x58d964='',_0x335250,_0x2b955e=0x0;for(_0x335250 in _0x2312c6){_0x58d964+=_0x2d35c4(0x16a)+_0x2d35c4(0x17f)+_0x2312c6[_0x335250][_0x2d35c4(0x1a1)]+_0x2d35c4(0x1c0)+_0x2d35c4(0x17f)+_0x2312c6[_0x335250][_0x2d35c4(0x19b)]+_0x2d35c4(0x1c0)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2312c6[_0x335250][_0x2d35c4(0x176)]+'</td>'+_0x2d35c4(0x17f)+_0x2312c6[_0x335250][_0x2d35c4(0x1cf)]+_0x2d35c4(0x1c0)+_0x2d35c4(0x175),_0x2b955e+=parseInt(_0x2312c6[_0x335250][_0x2d35c4(0x176)]);}let _0x58eac7={'from':_0x338771[_0x2d35c4(0x1bc)],'to':_0x2d35c4(0x1c1),'subject':'Email\x20for\x20Customer','attachments':[{'filename':'Logo.png','path':__dirname+_0x2d35c4(0x1db)+'/upload/'+_0x40d222[0x0]['image'],'cid':_0x2d35c4(0x1d0)}],'html':_0x2d35c4(0x16d)+_0x2d35c4(0x17e)+_0x2d35c4(0x177)+_0x2d35c4(0x1c8)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x2d35c4(0x1e0)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x2d35c4(0x1e5)+_0x2d35c4(0x1e0)+'<h2>\x20JEC\x20SMS\x20</h2>'+_0x2d35c4(0x1e5)+_0x2d35c4(0x1e5)+_0x2d35c4(0x1fb)+_0x2d35c4(0x1e0)+_0x2d35c4(0x1e5)+'<div>'+'<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>'+'</div>'+_0x2d35c4(0x1e0)+'<span>\x20Request\x20ID:\x20<b>'+_0x2ac33a[_0x2d35c4(0x1d6)]+_0x2d35c4(0x165)+'<span>\x20Request\x20Date:\x20<b>'+_0x2ac33a[_0x2d35c4(0x191)]+'</b></span>\x20<br><br>'+_0x2d35c4(0x1e5)+_0x2d35c4(0x1be)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x2d35c4(0x16a)+_0x2d35c4(0x1f2)+_0x2d35c4(0x18a)+_0x2d35c4(0x1d2)+_0x2d35c4(0x18c)+_0x2d35c4(0x175)+_0x2d35c4(0x16e)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x58d964+'\x20'+_0x2d35c4(0x19a)+_0x2d35c4(0x194)+_0x2d35c4(0x1e0)+_0x2d35c4(0x169)+_0x2d35c4(0x1f0)+_0x2d35c4(0x1a7)+_0x2d35c4(0x1e5)+_0x2d35c4(0x1e0)+'<strong>\x20Regards\x20</strong>'+_0x2d35c4(0x17a)+_0x2d35c4(0x1e5)+_0x2d35c4(0x1e5)+'<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>'+_0x2d35c4(0x1f8)};_0x25df0c[_0x2d35c4(0x1a8)](_0x58eac7,function(_0x37ed87,_0x4daaa2){var _0x5854c4=_0x2d35c4;_0x37ed87?(console['log'](_0x37ed87),console[_0x5854c4(0x1d1)](_0x5854c4(0x180))):console[_0x5854c4(0x1d1)](_0x5854c4(0x18b));}),_0x3b79f8[_0x2d35c4(0x1ee)](_0x2d35c4(0x1a0),_0x2d35c4(0x1de)),_0x184573['redirect'](_0x2d35c4(0x1e3)+_0x56ea67['_id']),_0x184573['json'](_0x3137b0);return;}catch(_0x4d8698){}}),router[a0_0x16ffda(0x16b)]('/view_sales_order/:id',auth,async(_0xf0e7c9,_0x297f1a)=>{var _0x34d9e7=a0_0x16ffda;try{const _0x5039c2=await master_shop['find'](),_0x5043ab=_0xf0e7c9['user'],_0x420143=await profile[_0x34d9e7(0x1b9)]({'email':_0x5043ab[_0x34d9e7(0x1bc)]}),_0x36c326=await staff[_0x34d9e7(0x1b9)]({'email':_0x5043ab[_0x34d9e7(0x1bc)]}),_0x280c4f=await customer[_0x34d9e7(0x18d)]({'agent_id':_0x36c326[_0x34d9e7(0x199)]}),_0x569177=mongoose[_0x34d9e7(0x1a5)][_0x34d9e7(0x1c5)],_0xb90fd1=_0xf0e7c9[_0x34d9e7(0x1a9)]['id'],_0x2a63f0=await sales_order[_0x34d9e7(0x1cc)](_0xb90fd1),_0x375d1b=await sales_order['aggregate']([{'$match':{'_id':_0x569177(_0xb90fd1)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x34d9e7(0x1bf)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x34d9e7(0x1fc)}}},{'$lookup':{'from':_0x34d9e7(0x190),'localField':_0x34d9e7(0x1e7),'foreignField':_0x34d9e7(0x199),'as':'account_data'}},{'$unwind':_0x34d9e7(0x1c3)},{'$lookup':{'from':_0x34d9e7(0x190),'localField':_0x34d9e7(0x1f6),'foreignField':_0x34d9e7(0x199),'as':'wms_data'}},{'$unwind':_0x34d9e7(0x1ac)}]);if(_0x5039c2[0x0][_0x34d9e7(0x19c)]==_0x34d9e7(0x1d9))var _0x434f79=users[_0x34d9e7(0x174)];else{if(_0x5039c2[0x0][_0x34d9e7(0x19c)]==_0x34d9e7(0x1ed))var _0x434f79=users['Hindi'];else{if(_0x5039c2[0x0][_0x34d9e7(0x19c)]==_0x34d9e7(0x185))var _0x434f79=users['German'];else{if(_0x5039c2[0x0]['language']==_0x34d9e7(0x1b0))var _0x434f79=users[_0x34d9e7(0x1b0)];else{if(_0x5039c2[0x0][_0x34d9e7(0x19c)]==_0x34d9e7(0x1ca))var _0x434f79=users['French'];else{if(_0x5039c2[0x0][_0x34d9e7(0x19c)]==_0x34d9e7(0x170))var _0x434f79=users[_0x34d9e7(0x1fe)];else{if(_0x5039c2[0x0][_0x34d9e7(0x19c)]=='Chinese')var _0x434f79=users[_0x34d9e7(0x1f4)];else{if(_0x5039c2[0x0][_0x34d9e7(0x19c)]=='Arabic\x20(ae)')var _0x434f79=users[_0x34d9e7(0x1b7)];}}}}}}}_0x297f1a[_0x34d9e7(0x1b8)]('view_accounting_approval',{'success':_0xf0e7c9[_0x34d9e7(0x1ee)]('success'),'errors':_0xf0e7c9[_0x34d9e7(0x1ee)]('errors'),'master_shop':_0x5039c2,'profile':_0x420143,'role':_0x5043ab,'language':_0x434f79,'customer':_0x280c4f,'sales_sa':_0x2a63f0,'approvers':_0x375d1b[0x0],'the_id':_0xb90fd1});}catch(_0x370299){console[_0x34d9e7(0x1d1)](_0x370299);}}),router[a0_0x16ffda(0x196)](a0_0x16ffda(0x1a3),auth,async(_0x40dcb4,_0x35e96f)=>{var _0x34bcee=a0_0x16ffda;try{const {warehouse_name:_0x5d773c,product_code:_0x7047db}=_0x40dcb4[_0x34bcee(0x1ae)],_0x57bf2d=await warehouse[_0x34bcee(0x1e6)]([{'$match':{'name':_0x5d773c}},{'$unwind':_0x34bcee(0x1af)},{'$match':{'product_details.product_code':_0x7047db}},{'$group':{'_id':{'room':_0x34bcee(0x171),'_id':_0x34bcee(0x1ff)}}}]);_0x35e96f['json'](_0x57bf2d);}catch(_0x51ce30){}}),router[a0_0x16ffda(0x196)](a0_0x16ffda(0x1ad),auth,async(_0x2468a7,_0x321905)=>{var _0x581077=a0_0x16ffda;try{const {warehouse_name:_0x3f718a,product_code:_0x32e6be,room_name:_0x3212b3}=_0x2468a7['body'];console[_0x581077(0x1d1)](_0x2468a7[_0x581077(0x1ae)]);const _0x25ba9e=await warehouse[_0x581077(0x1e6)]([{'$match':{'name':_0x3f718a,'room':_0x3212b3}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x32e6be}},{'$group':{'_id':{'main_id':_0x581077(0x1ff),'detl_id':_0x581077(0x1b3),'product_name':_0x581077(0x1f3),'product_code':'$product_details.product_code','level':_0x581077(0x1ba),'bay':_0x581077(0x188),'stocks':_0x581077(0x183)}}}]);_0x321905[_0x581077(0x1b5)](_0x25ba9e);}catch(_0x2b29ed){}}),router[a0_0x16ffda(0x16b)](a0_0x16ffda(0x1c7),auth,async(_0x236e98,_0x7b353f)=>{var _0x3c2b58=a0_0x16ffda;try{const {sttaff_id:_0x39f55c,email:_0x291e43,warehouse:_0x19b743}=_0x236e98[_0x3c2b58(0x167)],_0x4b1b6d=await master_shop[_0x3c2b58(0x18d)](),_0x1d2a80=_0x236e98['user'],_0x840e8e=await profile[_0x3c2b58(0x1b9)]({'email':_0x1d2a80[_0x3c2b58(0x1bc)]}),_0x39e9b5=await sales_order['find']({'wms_account_id':_0x39f55c});if(_0x4b1b6d[0x0]['language']==_0x3c2b58(0x1d9))var _0x1134fa=users[_0x3c2b58(0x174)];else{if(_0x4b1b6d[0x0][_0x3c2b58(0x19c)]==_0x3c2b58(0x1ed))var _0x1134fa=users[_0x3c2b58(0x1ed)];else{if(_0x4b1b6d[0x0][_0x3c2b58(0x19c)]==_0x3c2b58(0x185))var _0x1134fa=users[_0x3c2b58(0x185)];else{if(_0x4b1b6d[0x0][_0x3c2b58(0x19c)]==_0x3c2b58(0x1b0))var _0x1134fa=users[_0x3c2b58(0x1b0)];else{if(_0x4b1b6d[0x0][_0x3c2b58(0x19c)]=='French')var _0x1134fa=users[_0x3c2b58(0x1ca)];else{if(_0x4b1b6d[0x0][_0x3c2b58(0x19c)]==_0x3c2b58(0x170))var _0x1134fa=users[_0x3c2b58(0x1fe)];else{if(_0x4b1b6d[0x0][_0x3c2b58(0x19c)]=='Chinese')var _0x1134fa=users[_0x3c2b58(0x1f4)];else{if(_0x4b1b6d[0x0][_0x3c2b58(0x19c)]==_0x3c2b58(0x1eb))var _0x1134fa=users[_0x3c2b58(0x1b7)];}}}}}}}_0x7b353f[_0x3c2b58(0x1b8)](_0x3c2b58(0x1dc),{'success':_0x236e98[_0x3c2b58(0x1ee)](_0x3c2b58(0x1a0)),'errors':_0x236e98[_0x3c2b58(0x1ee)](_0x3c2b58(0x1a2)),'master_shop':_0x4b1b6d,'profile':_0x840e8e,'role':_0x1d2a80,'language':_0x1134fa,'sales_order':_0x39e9b5});}catch(_0x12d47f){}}),module[a0_0x16ffda(0x164)]=router;