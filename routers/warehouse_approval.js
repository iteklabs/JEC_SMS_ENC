function a0_0x1910(_0x153d44,_0x299dc2){var _0x565650=a0_0x5656();return a0_0x1910=function(_0x1910f3,_0x2c801d){_0x1910f3=_0x1910f3-0x128;var _0x27e2f0=_0x565650[_0x1910f3];return _0x27e2f0;},a0_0x1910(_0x153d44,_0x299dc2);}function a0_0x5656(){var _0x2d6dbc=['language','Hindi','prod_cat','</thead>','<strong>\x20Regards\x20</strong>','room','bay','mongoose','invoice','toString','Types','319ZmiyAt','Router','data_loc','144DqjTqb','<!DOCTYPE\x20html>','length','85335gIiEKh','filter','expiry_date','ObjectId','</table>','mongodb','<div>','OUT-','headers','Portuguese\x20(BR)','</body></html>','gross_price','5FflStK','$room','invoice_init','forEach','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','<table\x20style=\x22width:\x20100%\x20!important;\x22>','</tr>','qty','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','</div>','product_code','/data/data_rack','://','xlsx','image','push','secondary_code','stock','</b></span>\x20<br>','114248sjmzXY','secondary_unit','params','aggregate','247005gfLziw','$_id','host','wms_account_date','/data/data_loc','French','flash','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','email','German','Arabic','map','product_stock','$product_details._id','/:id','<html><head><title></title>','</td>','77RKLLoZ','_id','find','<span>\x20Request\x20ID:\x20<b>','success','protocol','quantity','user','$product_details.product_stock','<tbody\x20style=\x22text-align:\x20center;\x22>','<tr>','warehouse_approval_All','../public/language/languages.json','json','Portuguese','</tbody>','$wms_account_id','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','save','batch_code','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','uuid','</b></span>\x20<br><br>','findOne','maxPerUnit','English\x20(US)','Email\x20sent\x20successfully','$product_details','unit','$wms_data','product_name','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','English','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','product_details','<br><br><br>','../models/all_models','level','logo','body','string','warehouse_approval','$product_details.level','warehouse_detl','114794KarWXa','/upload/','abs','log','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','id_transaction_from','$product_details.product_code','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','post','staffs','render','exports','$product_details.bay','product_cat','findById','accounting_account_id','$account_data','/view_sales_order/:id','Email\x20for\x20Customer','port','sale_product','540216CTHFLA','30Kdwfpl','christian.villamer@jakagroup.com','account_data','Chinese','request_qty','/../public','86376UArlGY','errors','Arabic\x20(ae)','primary_code','../middleware/auth','Logo.png','room_name','wms_data','split','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','password','/data/All','production_date','40RGdqCb','back','express','<h5>\x20JEC\x20SMS\x20</h5>','Spanish','$accounting_account_id','toLocaleDateString','wms_account_id','exceljs','view_accounting_approval','Error\x20Occurs','nodemailer','padStart'];a0_0x5656=function(){return _0x2d6dbc;};return a0_0x5656();}var a0_0x3dfcca=a0_0x1910;(function(_0x246516,_0x3e0ca9){var _0x261b69=a0_0x1910,_0x45673c=_0x246516();while(!![]){try{var _0x54d7e5=-parseInt(_0x261b69(0x187))/0x1*(parseInt(_0x261b69(0x134))/0x2)+-parseInt(_0x261b69(0x17b))/0x3+parseInt(_0x261b69(0x149))/0x4+-parseInt(_0x261b69(0x15d))/0x5*(-parseInt(_0x261b69(0x150))/0x6)+-parseInt(_0x261b69(0x1af))/0x7*(-parseInt(_0x261b69(0x19a))/0x8)+parseInt(_0x261b69(0x19e))/0x9*(parseInt(_0x261b69(0x14a))/0xa)+parseInt(_0x261b69(0x175))/0xb*(parseInt(_0x261b69(0x178))/0xc);if(_0x54d7e5===_0x3e0ca9)break;else _0x45673c['push'](_0x45673c['shift']());}catch(_0x33ed3e){_0x45673c['push'](_0x45673c['shift']());}}}(a0_0x5656,0x2a9e6));const express=require(a0_0x3dfcca(0x15f)),app=express(),router=express[a0_0x3dfcca(0x176)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x3dfcca(0x12c)),auth=require(a0_0x3dfcca(0x154)),users=require(a0_0x3dfcca(0x1bb)),excelJS=require(a0_0x3dfcca(0x165)),xlsx=require(a0_0x3dfcca(0x194)),mongoose=require(a0_0x3dfcca(0x171)),{ObjectId}=require(a0_0x3dfcca(0x180)),nodemailer=require(a0_0x3dfcca(0x168));router['get'](a0_0x3dfcca(0x1ac),auth,async(_0x36c95b,_0x37395f)=>{var _0x38c884=a0_0x3dfcca;try{const _0x43b321=await master_shop[_0x38c884(0x1b1)](),_0x3f37fa=_0x36c95b[_0x38c884(0x1b6)],_0x4b4672=await profile[_0x38c884(0x1c6)]({'email':_0x3f37fa['email']}),_0x363d47=await staff[_0x38c884(0x1c6)]({'email':_0x3f37fa[_0x38c884(0x1a6)]}),_0x104235=await customer[_0x38c884(0x1b1)]({'agent_id':_0x363d47[_0x38c884(0x1b0)]}),_0x3c9892=mongoose[_0x38c884(0x174)][_0x38c884(0x17e)],_0x22e5c7=_0x36c95b[_0x38c884(0x19c)]['id'],_0x2e813c=await sales_order[_0x38c884(0x142)](_0x22e5c7),_0x11ffd2=await sales_order[_0x38c884(0x19d)]([{'$match':{'_id':_0x3c9892(_0x22e5c7)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x38c884(0x162)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x38c884(0x1bf)}}},{'$lookup':{'from':'staffs','localField':'accounting_account_id','foreignField':_0x38c884(0x1b0),'as':_0x38c884(0x14c)}},{'$unwind':_0x38c884(0x144)},{'$lookup':{'from':_0x38c884(0x13d),'localField':'wms_account_id','foreignField':_0x38c884(0x1b0),'as':_0x38c884(0x157)}},{'$unwind':_0x38c884(0x1cc)}]);if(_0x43b321[0x0][_0x38c884(0x16a)]==_0x38c884(0x1c8))var _0x56255e=users[_0x38c884(0x128)];else{if(_0x43b321[0x0][_0x38c884(0x16a)]=='Hindi')var _0x56255e=users[_0x38c884(0x16b)];else{if(_0x43b321[0x0][_0x38c884(0x16a)]==_0x38c884(0x1a7))var _0x56255e=users[_0x38c884(0x1a7)];else{if(_0x43b321[0x0][_0x38c884(0x16a)]==_0x38c884(0x161))var _0x56255e=users[_0x38c884(0x161)];else{if(_0x43b321[0x0][_0x38c884(0x16a)]==_0x38c884(0x1a3))var _0x56255e=users['French'];else{if(_0x43b321[0x0][_0x38c884(0x16a)]==_0x38c884(0x184))var _0x56255e=users[_0x38c884(0x1bd)];else{if(_0x43b321[0x0]['language']==_0x38c884(0x14d))var _0x56255e=users[_0x38c884(0x14d)];else{if(_0x43b321[0x0]['language']==_0x38c884(0x152))var _0x56255e=users['Arabic'];}}}}}}}_0x37395f['render'](_0x38c884(0x131),{'success':_0x36c95b['flash'](_0x38c884(0x1b3)),'errors':_0x36c95b['flash']('errors'),'master_shop':_0x43b321,'profile':_0x4b4672,'role':_0x3f37fa,'language':_0x56255e,'customer':_0x104235,'sales_sa':_0x2e813c,'approvers':_0x11ffd2[0x0],'the_id':_0x22e5c7});}catch(_0x10265a){console[_0x38c884(0x137)](_0x10265a);}}),router[a0_0x3dfcca(0x13c)]('/:id',auth,async(_0x16d569,_0x5eeba0)=>{var _0x4d3f2b=a0_0x3dfcca;try{const {date:_0xc24cec,invoice_data:_0x147363,wms_confirm:_0x21e571,the_id_val:_0x2bb8f7,prod_id:_0x5b8636,SCRN:_0x5d26c2,ReqBy:_0x15bbbd,dateofreq:_0x10da59,PO_number:_0x2ec9e4,warehouse_name:_0x41ccb3,typeservicesData:_0x3c9d1d,typevehicle:_0x283da8,destination:_0x1cb949,deliverydate:_0x224d7b,driver:_0x18bff4,plate:_0x17f37,van:_0x536061,DRSI:_0x50b012,TSU:_0x17466a,TFU:_0x1e9a2a,note:_0x5b5263}=_0x16d569[_0x4d3f2b(0x12f)],_0x3ac00b=await sales_order[_0x4d3f2b(0x142)](_0x2bb8f7);if(typeof _0x5b8636==_0x4d3f2b(0x130))var _0x46a389=[_0x16d569['body']['prod_id']],_0x5a43a7=[_0x16d569[_0x4d3f2b(0x12f)][_0x4d3f2b(0x18e)]],_0x1db22e=[_0x16d569[_0x4d3f2b(0x12f)]['data_loc']];else var _0x46a389=[..._0x16d569['body']['prod_id']],_0x5a43a7=[..._0x16d569['body'][_0x4d3f2b(0x18e)]],_0x1db22e=[..._0x16d569[_0x4d3f2b(0x12f)][_0x4d3f2b(0x177)]];const _0x163995=_0x46a389[_0x4d3f2b(0x1a9)](_0x3c06ac=>{return _0x3c06ac={'prod_id':_0x3c06ac};});_0x1db22e['forEach']((_0x1149a9,_0x304aff)=>{var _0x4b9790=_0x4d3f2b,_0x12400f=_0x1149a9[_0x4b9790(0x158)]('~');_0x163995[_0x304aff]['warehouse_id']=_0x12400f[0x0],_0x163995[_0x304aff][_0x4b9790(0x133)]=_0x12400f[0x1];}),_0x5a43a7[_0x4d3f2b(0x18a)]((_0x2f0bc1,_0x3e2827)=>{var _0x4f4f2=_0x4d3f2b;_0x163995[_0x3e2827][_0x4f4f2(0x14e)]=_0x2f0bc1;});var _0x182996=[],_0x405f21=[],_0x4db474=[],_0xf539f7=[],_0x11c871=[],_0x82538d=[],_0x540401=[],_0x5704e1=[],_0x2a238c=[],_0x3c26fb=[],_0x2dd30f=[],_0x46da67=[],_0x588450=[],_0x8fd90=[],_0x20fa24=[],_0x5188d0=[],_0x263527=[],_0x79a6a6=[],_0x1c15c4=[],_0x489c65=[];for(let _0x303741=0x0;_0x303741<=_0x163995[_0x4d3f2b(0x17a)]-0x1;_0x303741++){const _0x240e95=_0x163995[_0x303741],_0x257949=mongoose[_0x4d3f2b(0x174)][_0x4d3f2b(0x17e)];var _0x4fdbdb=await warehouse[_0x4d3f2b(0x19d)]([{'$match':{'_id':_0x257949(_0x240e95['warehouse_id'])}},{'$unwind':_0x4d3f2b(0x1ca)},{'$match':{'product_details._id':_0x257949(_0x240e95['warehouse_detl'])}}]),_0x466b11=0x0;for(let _0x2e636d=0x0;_0x2e636d<=_0x4fdbdb[_0x4d3f2b(0x17a)]-0x1;_0x2e636d++){var _0x3ccb2=_0x4fdbdb[_0x2e636d];_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x1aa)]<_0x240e95[_0x4d3f2b(0x14e)]&&_0x466b11++;}if(_0x466b11>0x0)return _0x16d569[_0x4d3f2b(0x1a4)](_0x4d3f2b(0x151),_0x4d3f2b(0x138)),_0x5eeba0['redirect'](_0x4d3f2b(0x15e));var _0x1c175e=0x0;for(let _0x46495e=0x0;_0x46495e<=_0x4fdbdb['length']-0x1;_0x46495e++){var _0x3ccb2=_0x4fdbdb[_0x46495e];_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x1aa)]>_0x240e95[_0x4d3f2b(0x14e)]&&(_0x182996[_0x4d3f2b(0x196)](_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x1cd)]),_0x405f21[_0x4d3f2b(0x196)](_0x3ccb2['product_details'][_0x4d3f2b(0x1aa)]),_0x4db474['push'](_0x240e95[_0x4d3f2b(0x14e)]),_0xf539f7['push'](_0x3ccb2['product_details'][_0x4d3f2b(0x153)]),_0x11c871[_0x4d3f2b(0x196)](_0x3ccb2[_0x4d3f2b(0x12a)]['secondary_code']),_0x82538d['push'](_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x191)]),_0x540401['push'](_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x12d)]),_0x5704e1['push'](_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x170)]),_0x2a238c[_0x4d3f2b(0x196)](_0x3ccb2['product_details'][_0x4d3f2b(0x1cb)]),_0x3c26fb[_0x4d3f2b(0x196)](_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x19b)]),_0x2dd30f[_0x4d3f2b(0x196)](_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x1c2)]),_0x46da67[_0x4d3f2b(0x196)](_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x17d)]),_0x588450['push'](_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x15c)]),_0x8fd90['push'](_0x3ccb2['product_details'][_0x4d3f2b(0x1c7)]),_0x20fa24[_0x4d3f2b(0x196)](_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x141)]),_0x5188d0[_0x4d3f2b(0x196)](_0x3ccb2[_0x4d3f2b(0x16f)]),_0x263527[_0x4d3f2b(0x196)](_0x3ccb2[_0x4d3f2b(0x12a)][_0x4d3f2b(0x172)]),_0x79a6a6[_0x4d3f2b(0x196)](_0x3ccb2[_0x4d3f2b(0x12a)]['_id']),_0x1c15c4['push'](_0x3ccb2[_0x4d3f2b(0x12a)]['uuid']),_0x489c65[_0x4d3f2b(0x196)](_0x3ccb2['product_details']['gross_price']),_0x1c175e++);}}const _0xb178d5=_0x182996[_0x4d3f2b(0x1a9)](_0x195656=>{return _0x195656={'product_name':_0x195656};});_0x405f21[_0x4d3f2b(0x18a)]((_0x54b052,_0x540927)=>{var _0x15906a=_0x4d3f2b;_0xb178d5[_0x540927][_0x15906a(0x198)]=_0x54b052;}),_0x4db474['forEach']((_0xc72acc,_0x123353)=>{var _0x122c51=_0x4d3f2b;_0xb178d5[_0x123353][_0x122c51(0x1b5)]=Math[_0x122c51(0x136)](_0xc72acc);}),_0x489c65['forEach']((_0x4ebd78,_0x32db19)=>{var _0xdb0a23=_0x4d3f2b;_0xb178d5[_0x32db19][_0xdb0a23(0x186)]=_0x4ebd78;}),_0x1c15c4[_0x4d3f2b(0x18a)]((_0x5e40ec,_0x4fe0a7)=>{var _0x35e4ed=_0x4d3f2b;_0xb178d5[_0x4fe0a7][_0x35e4ed(0x1c4)]=_0x5e40ec;}),_0x79a6a6[_0x4d3f2b(0x18a)]((_0x440429,_0x12881c)=>{var _0xa6139a=_0x4d3f2b;_0xb178d5[_0x12881c][_0xa6139a(0x139)]=_0x440429;}),_0xf539f7[_0x4d3f2b(0x18a)]((_0x513837,_0x400f95)=>{var _0x394856=_0x4d3f2b;_0xb178d5[_0x400f95][_0x394856(0x153)]=_0x513837;}),_0x11c871['forEach']((_0xe3c0e2,_0x19dcb2)=>{var _0x93d13b=_0x4d3f2b;_0xb178d5[_0x19dcb2][_0x93d13b(0x197)]=_0xe3c0e2;}),_0x82538d[_0x4d3f2b(0x18a)]((_0xe588f8,_0xac8567)=>{var _0x2def2a=_0x4d3f2b;_0xb178d5[_0xac8567][_0x2def2a(0x191)]=_0xe588f8;}),_0x540401[_0x4d3f2b(0x18a)]((_0x57e349,_0x4259f9)=>{var _0x5c98a0=_0x4d3f2b;_0xb178d5[_0x4259f9][_0x5c98a0(0x12d)]=_0x57e349;}),_0x5704e1['forEach']((_0xfdf2b7,_0x2747bb)=>{var _0x282216=_0x4d3f2b;_0xb178d5[_0x2747bb][_0x282216(0x170)]=_0xfdf2b7;}),_0x2a238c[_0x4d3f2b(0x18a)]((_0x5d2161,_0x3d0621)=>{var _0x2e95ff=_0x4d3f2b;_0xb178d5[_0x3d0621][_0x2e95ff(0x1cb)]=_0x5d2161;}),_0x3c26fb[_0x4d3f2b(0x18a)]((_0x5bb45e,_0xd921e3)=>{var _0x288849=_0x4d3f2b;_0xb178d5[_0xd921e3][_0x288849(0x19b)]=_0x5bb45e;}),_0x2dd30f['forEach']((_0x837e0d,_0x21995f)=>{var _0x536841=_0x4d3f2b;_0xb178d5[_0x21995f][_0x536841(0x1c2)]=_0x837e0d;}),_0x46da67[_0x4d3f2b(0x18a)]((_0x136680,_0xeafd0e)=>{var _0x2328bf=_0x4d3f2b;_0xb178d5[_0xeafd0e][_0x2328bf(0x17d)]=_0x136680;}),_0x588450[_0x4d3f2b(0x18a)]((_0x2249d2,_0x3f65ea)=>{var _0x1ced2b=_0x4d3f2b;_0xb178d5[_0x3f65ea][_0x1ced2b(0x15c)]=_0x2249d2;}),_0x8fd90[_0x4d3f2b(0x18a)]((_0x26df44,_0x5d0389)=>{_0xb178d5[_0x5d0389]['maxperunit']=_0x26df44;}),_0x20fa24[_0x4d3f2b(0x18a)]((_0x381ceb,_0x260e73)=>{var _0x261baa=_0x4d3f2b;_0xb178d5[_0x260e73][_0x261baa(0x16c)]=_0x381ceb;}),_0x5188d0[_0x4d3f2b(0x18a)]((_0x584c31,_0x509105)=>{var _0x1ff772=_0x4d3f2b;_0xb178d5[_0x509105][_0x1ff772(0x156)]=_0x584c31;}),_0x263527[_0x4d3f2b(0x18a)]((_0x38ff2c,_0x5cdff8)=>{_0xb178d5[_0x5cdff8]['invoice']=_0x38ff2c,_0xb178d5[_0x5cdff8]['date_data']=_0xc24cec;});const _0x51c405=new invoice_for_outgoing();await _0x51c405[_0x4d3f2b(0x1c1)](),_0x263527[_0x4d3f2b(0x18a)]((_0x46fc1a,_0x395992)=>{var _0x46d2cb=_0x4d3f2b;_0xb178d5[_0x395992]['outgoing_invoice']=_0x46d2cb(0x182)+_0x51c405[_0x46d2cb(0x189)]['toString']()[_0x46d2cb(0x169)](0x8,'0');});const _0x411389=_0xb178d5[_0x4d3f2b(0x17c)](_0x3bddfc=>_0x3bddfc[_0x4d3f2b(0x1b5)]!=='0'&&_0x3bddfc[_0x4d3f2b(0x1b5)]!==''),_0x18b278=new sales_finished({'invoice':_0x4d3f2b(0x182)+_0x51c405[_0x4d3f2b(0x189)]['toString']()[_0x4d3f2b(0x169)](0x8,'0'),'date':_0xc24cec,'warehouse_name':_0x41ccb3,'sale_product':_0x411389,'note':_0x5b5263,'SCRN':_0x5d26c2,'finalize':'False','ReqBy':_0x15bbbd,'dateofreq':_0x10da59,'PO_number':_0x2ec9e4,'typeservicesData':_0x3c9d1d,'typevehicle':_0x283da8,'destination':_0x1cb949,'deliverydate':_0x224d7b,'driver':_0x18bff4,'plate':_0x17f37,'van':_0x536061,'DRSI':_0x50b012,'TSU':_0x17466a,'TFU':_0x1e9a2a}),_0x5492ca=await _0x18b278['save'](),_0x7b3624=new Date(),_0x49cf27=_0x7b3624[_0x4d3f2b(0x163)]();_0x3ac00b['wms_account_confirm']=_0x21e571,_0x3ac00b[_0x4d3f2b(0x1a1)]=_0x49cf27,_0x3ac00b['document_number_out']=_0x4d3f2b(0x182)+_0x51c405[_0x4d3f2b(0x189)][_0x4d3f2b(0x173)]()['padStart'](0x8,'0'),_0x3ac00b['outgoing_id']=_0x5492ca['_id'],await _0x3ac00b[_0x4d3f2b(0x1c1)]();const _0x263d4c=await master_shop['find'](),_0x5e9270=await email_settings['findOne']();let _0x1afecd=nodemailer['createTransport']({'host':_0x5e9270[_0x4d3f2b(0x1a0)],'port':Number(_0x5e9270[_0x4d3f2b(0x147)]),'secure':![],'auth':{'user':_0x5e9270[_0x4d3f2b(0x1a6)],'pass':_0x5e9270[_0x4d3f2b(0x15a)]}});const _0x2b3980=_0x16d569[_0x4d3f2b(0x1b4)]+_0x4d3f2b(0x193)+_0x16d569[_0x4d3f2b(0x183)][_0x4d3f2b(0x1a0)];var _0x554e3e=_0x3ac00b[_0x4d3f2b(0x148)],_0xbd810e='',_0x2bc75c,_0x49b787=0x0;for(_0x2bc75c in _0x554e3e){_0xbd810e+=_0x4d3f2b(0x1b9)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x554e3e[_0x2bc75c][_0x4d3f2b(0x1cd)]+'</td>'+_0x4d3f2b(0x1ce)+_0x554e3e[_0x2bc75c][_0x4d3f2b(0x191)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x554e3e[_0x2bc75c]['quantity']+_0x4d3f2b(0x1ae)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x554e3e[_0x2bc75c][_0x4d3f2b(0x1cb)]+_0x4d3f2b(0x1ae)+_0x4d3f2b(0x18d),_0x49b787+=parseInt(_0x554e3e[_0x2bc75c]['quantity']);}let _0x106fdd={'from':_0x5e9270[_0x4d3f2b(0x1a6)],'to':_0x4d3f2b(0x14b),'subject':_0x4d3f2b(0x146),'attachments':[{'filename':_0x4d3f2b(0x155),'path':__dirname+_0x4d3f2b(0x14f)+_0x4d3f2b(0x135)+_0x263d4c[0x0][_0x4d3f2b(0x195)],'cid':_0x4d3f2b(0x12e)}],'html':_0x4d3f2b(0x179)+_0x4d3f2b(0x1ad)+_0x4d3f2b(0x129)+'</head><body>'+'<div>'+_0x4d3f2b(0x1c0)+_0x4d3f2b(0x181)+_0x4d3f2b(0x159)+'</div>'+_0x4d3f2b(0x181)+'<h2>\x20JEC\x20SMS\x20</h2>'+'</div>'+'</div>'+'<hr\x20class=\x22my-3\x22>'+_0x4d3f2b(0x181)+_0x4d3f2b(0x190)+_0x4d3f2b(0x181)+_0x4d3f2b(0x13b)+_0x4d3f2b(0x190)+_0x4d3f2b(0x181)+_0x4d3f2b(0x1b2)+_0x3ac00b[_0x4d3f2b(0x172)]+_0x4d3f2b(0x199)+'<span>\x20Request\x20Date:\x20<b>'+_0x3ac00b['date']+_0x4d3f2b(0x1c5)+'</div>'+_0x4d3f2b(0x18c)+_0x4d3f2b(0x1a5)+_0x4d3f2b(0x1b9)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+_0x4d3f2b(0x18b)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x4d3f2b(0x18d)+_0x4d3f2b(0x16d)+_0x4d3f2b(0x1b8)+'\x20'+_0xbd810e+'\x20'+_0x4d3f2b(0x1be)+_0x4d3f2b(0x17f)+_0x4d3f2b(0x181)+_0x4d3f2b(0x1c3)+'<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>'+_0x4d3f2b(0x12b)+_0x4d3f2b(0x190)+_0x4d3f2b(0x181)+_0x4d3f2b(0x16e)+_0x4d3f2b(0x160)+'</div>'+_0x4d3f2b(0x190)+_0x4d3f2b(0x18f)+_0x4d3f2b(0x185)};_0x1afecd['sendMail'](_0x106fdd,function(_0x1fe3c7,_0x27c0a3){var _0x3e7ba7=_0x4d3f2b;_0x1fe3c7?(console['log'](_0x1fe3c7),console[_0x3e7ba7(0x137)](_0x3e7ba7(0x167))):console[_0x3e7ba7(0x137)](_0x3e7ba7(0x1c9));}),_0x16d569[_0x4d3f2b(0x1a4)](_0x4d3f2b(0x1b3),'Sales\x20Add\x20successfully'),_0x5eeba0['redirect']('/all_sales_finished/preview/'+_0x5492ca[_0x4d3f2b(0x1b0)]),_0x5eeba0[_0x4d3f2b(0x1bc)](_0x411389);return;}catch(_0x389aed){}}),router['get'](a0_0x3dfcca(0x145),auth,async(_0x1af999,_0x5a4965)=>{var _0x52614e=a0_0x3dfcca;try{const _0x375ea5=await master_shop[_0x52614e(0x1b1)](),_0x2559f0=_0x1af999['user'],_0xcc8024=await profile[_0x52614e(0x1c6)]({'email':_0x2559f0['email']}),_0x2c22ab=await staff[_0x52614e(0x1c6)]({'email':_0x2559f0[_0x52614e(0x1a6)]}),_0x2be350=await customer[_0x52614e(0x1b1)]({'agent_id':_0x2c22ab[_0x52614e(0x1b0)]}),_0x1d1882=mongoose[_0x52614e(0x174)]['ObjectId'],_0x253f71=_0x1af999['params']['id'],_0x11eedd=await sales_order[_0x52614e(0x142)](_0x253f71),_0x2d8eba=await sales_order[_0x52614e(0x19d)]([{'$match':{'_id':_0x1d1882(_0x253f71)}},{'$addFields':{'accounting_account_id':{'$toObjectId':'$accounting_account_id'}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x52614e(0x1bf)}}},{'$lookup':{'from':_0x52614e(0x13d),'localField':_0x52614e(0x143),'foreignField':_0x52614e(0x1b0),'as':_0x52614e(0x14c)}},{'$unwind':'$account_data'},{'$lookup':{'from':'staffs','localField':_0x52614e(0x164),'foreignField':_0x52614e(0x1b0),'as':'wms_data'}},{'$unwind':_0x52614e(0x1cc)}]);if(_0x375ea5[0x0][_0x52614e(0x16a)]=='English\x20(US)')var _0x21e818=users['English'];else{if(_0x375ea5[0x0]['language']==_0x52614e(0x16b))var _0x21e818=users[_0x52614e(0x16b)];else{if(_0x375ea5[0x0][_0x52614e(0x16a)]==_0x52614e(0x1a7))var _0x21e818=users['German'];else{if(_0x375ea5[0x0][_0x52614e(0x16a)]==_0x52614e(0x161))var _0x21e818=users['Spanish'];else{if(_0x375ea5[0x0][_0x52614e(0x16a)]==_0x52614e(0x1a3))var _0x21e818=users[_0x52614e(0x1a3)];else{if(_0x375ea5[0x0][_0x52614e(0x16a)]==_0x52614e(0x184))var _0x21e818=users[_0x52614e(0x1bd)];else{if(_0x375ea5[0x0][_0x52614e(0x16a)]==_0x52614e(0x14d))var _0x21e818=users['Chinese'];else{if(_0x375ea5[0x0][_0x52614e(0x16a)]==_0x52614e(0x152))var _0x21e818=users[_0x52614e(0x1a8)];}}}}}}}_0x5a4965[_0x52614e(0x13e)](_0x52614e(0x166),{'success':_0x1af999[_0x52614e(0x1a4)]('success'),'errors':_0x1af999['flash'](_0x52614e(0x151)),'master_shop':_0x375ea5,'profile':_0xcc8024,'role':_0x2559f0,'language':_0x21e818,'customer':_0x2be350,'sales_sa':_0x11eedd,'approvers':_0x2d8eba[0x0],'the_id':_0x253f71});}catch(_0x8d08ee){console[_0x52614e(0x137)](_0x8d08ee);}}),router[a0_0x3dfcca(0x13c)](a0_0x3dfcca(0x192),auth,async(_0x364367,_0x130373)=>{var _0x3578f7=a0_0x3dfcca;try{const {warehouse_name:_0x5dd323,product_code:_0x4bea80}=_0x364367[_0x3578f7(0x12f)],_0xb6c462=await warehouse[_0x3578f7(0x19d)]([{'$match':{'name':_0x5dd323}},{'$unwind':_0x3578f7(0x1ca)},{'$match':{'product_details.product_code':_0x4bea80}},{'$group':{'_id':{'room':_0x3578f7(0x188),'_id':_0x3578f7(0x19f)}}}]);_0x130373[_0x3578f7(0x1bc)](_0xb6c462);}catch(_0x872625){}}),router[a0_0x3dfcca(0x13c)](a0_0x3dfcca(0x1a2),auth,async(_0x28f1ce,_0x2c462c)=>{var _0x472cea=a0_0x3dfcca;try{const {warehouse_name:_0x520c24,product_code:_0x279b06,room_name:_0x5b8fff}=_0x28f1ce[_0x472cea(0x12f)];console[_0x472cea(0x137)](_0x28f1ce[_0x472cea(0x12f)]);const _0x335142=await warehouse['aggregate']([{'$match':{'name':_0x520c24,'room':_0x5b8fff}},{'$unwind':_0x472cea(0x1ca)},{'$match':{'product_details.product_code':_0x279b06}},{'$group':{'_id':{'main_id':_0x472cea(0x19f),'detl_id':_0x472cea(0x1ab),'product_name':'$product_details.product_name','product_code':_0x472cea(0x13a),'level':_0x472cea(0x132),'bay':_0x472cea(0x140),'stocks':_0x472cea(0x1b7)}}}]);_0x2c462c['json'](_0x335142);}catch(_0x1ff3e6){}}),router['get'](a0_0x3dfcca(0x15b),auth,async(_0x58bfa3,_0x290c77)=>{var _0x4c2bdd=a0_0x3dfcca;try{const {sttaff_id:_0x26d3c8,email:_0xf4340e,warehouse:_0x1d059f}=_0x58bfa3['user'],_0x3e2581=await master_shop[_0x4c2bdd(0x1b1)](),_0xec6202=_0x58bfa3[_0x4c2bdd(0x1b6)],_0x1b314e=await profile[_0x4c2bdd(0x1c6)]({'email':_0xec6202[_0x4c2bdd(0x1a6)]}),_0x35a8c4=await sales_order[_0x4c2bdd(0x1b1)]({'wms_account_id':_0x26d3c8});if(_0x3e2581[0x0][_0x4c2bdd(0x16a)]==_0x4c2bdd(0x1c8))var _0x160c28=users['English'];else{if(_0x3e2581[0x0][_0x4c2bdd(0x16a)]=='Hindi')var _0x160c28=users[_0x4c2bdd(0x16b)];else{if(_0x3e2581[0x0][_0x4c2bdd(0x16a)]=='German')var _0x160c28=users['German'];else{if(_0x3e2581[0x0][_0x4c2bdd(0x16a)]==_0x4c2bdd(0x161))var _0x160c28=users[_0x4c2bdd(0x161)];else{if(_0x3e2581[0x0][_0x4c2bdd(0x16a)]==_0x4c2bdd(0x1a3))var _0x160c28=users[_0x4c2bdd(0x1a3)];else{if(_0x3e2581[0x0][_0x4c2bdd(0x16a)]==_0x4c2bdd(0x184))var _0x160c28=users[_0x4c2bdd(0x1bd)];else{if(_0x3e2581[0x0][_0x4c2bdd(0x16a)]=='Chinese')var _0x160c28=users['Chinese'];else{if(_0x3e2581[0x0][_0x4c2bdd(0x16a)]==_0x4c2bdd(0x152))var _0x160c28=users[_0x4c2bdd(0x1a8)];}}}}}}}_0x290c77[_0x4c2bdd(0x13e)](_0x4c2bdd(0x1ba),{'success':_0x58bfa3[_0x4c2bdd(0x1a4)]('success'),'errors':_0x58bfa3[_0x4c2bdd(0x1a4)](_0x4c2bdd(0x151)),'master_shop':_0x3e2581,'profile':_0x1b314e,'role':_0xec6202,'language':_0x160c28,'sales_order':_0x35a8c4});}catch(_0x19c5eb){}}),module[a0_0x3dfcca(0x13f)]=router;