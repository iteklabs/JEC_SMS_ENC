function a0_0x148c(_0x50f676,_0xc1365){var _0x9cbded=a0_0x9cbd();return a0_0x148c=function(_0x148c8f,_0x21d68e){_0x148c8f=_0x148c8f-0x9d;var _0x487bdf=_0x9cbded[_0x148c8f];return _0x487bdf;},a0_0x148c(_0x50f676,_0xc1365);}var a0_0x3d0581=a0_0x148c;function a0_0x9cbd(){var _0x1c94fd=['/upload/','product_cat','Hindi','</thead>','<div>','<h2>\x20JEC\x20SMS\x20</h2>','Email\x20for\x20Customer','email','Portuguese\x20(BR)','Types','maxperunit','quantity','</div>','$product_details','accounting_account_id','German','find','bay','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','<span>\x20Request\x20ID:\x20<b>','$product_details.product_name','warehouse_detl','log','level','</tr>','<h5>\x20JEC\x20SMS\x20</h5>','<table\x20style=\x22width:\x20100%\x20!important;\x22>','push','wms_data','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','/../public','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','qty','product_details','<tbody\x20style=\x22text-align:\x20center;\x22>','/view_sales_order/:id','Portuguese','uuid','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','mongoose','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','secondary_unit','batch_code','$product_details._id','document_number_out','<hr\x20class=\x22my-3\x22>','port','primary_code','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','<tr>','/data/data_loc','flash','French','$wms_data','invoice','OUT-','christian.villamer@jakagroup.com','render','account_data','id_transaction_from','body','request_qty','room_name','sendMail','get','2358840rNTmMk','2997294ZfnOLY','5445144iVpXSO','redirect','gross_price','Spanish','wms_account_id','product_code','createTransport','image','findOne','string','language','../middleware/auth','toLocaleDateString','$accounting_account_id','$account_data','</head><body>','params','</tbody>','success','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','aggregate','exceljs','3478097TrMDER','warehouse_id','wms_account_confirm','/:id','date','mongodb','$wms_account_id','/all_sales_finished/preview/','$room','stock','abs','invoice_init','prod_id','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','logo','padStart','errors','headers','toString','length','$_id','$product_details.product_stock','../models/all_models','7862337QOetfO','English','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','expiry_date','$product_details.bay','8DSRaHK','</b></span>\x20<br>','Chinese','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','data_loc','maxPerUnit','production_date','Arabic','warehouse_approval_All','post','host','forEach','prod_cat','nodemailer','json','Error\x20Occurs','exports','unit','user','ObjectId','124IhUlln','secondary_code','6937248WdoqzR','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','express','://','date_data','English\x20(US)','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','_id','</td>','xlsx','product_stock','Arabic\x20(ae)','map','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','findById','staffs','outgoing_invoice','Email\x20sent\x20successfully','</body></html>','False','save','product_name','<!DOCTYPE\x20html>','14152WLBSgu'];a0_0x9cbd=function(){return _0x1c94fd;};return a0_0x9cbd();}(function(_0x1b2231,_0x296547){var _0x488c47=a0_0x148c,_0x55ebc4=_0x1b2231();while(!![]){try{var _0x53606c=-parseInt(_0x488c47(0xbf))/0x1*(-parseInt(_0x488c47(0xa6))/0x2)+parseInt(_0x488c47(0x102))/0x3+-parseInt(_0x488c47(0xa8))/0x4+-parseInt(_0x488c47(0x101))/0x5+parseInt(_0x488c47(0x103))/0x6+-parseInt(_0x488c47(0x119))/0x7*(parseInt(_0x488c47(0x135))/0x8)+parseInt(_0x488c47(0x130))/0x9;if(_0x53606c===_0x296547)break;else _0x55ebc4['push'](_0x55ebc4['shift']());}catch(_0x49dfdc){_0x55ebc4['push'](_0x55ebc4['shift']());}}}(a0_0x9cbd,0xe9140));const express=require(a0_0x3d0581(0xaa)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x3d0581(0x12f)),auth=require(a0_0x3d0581(0x10e)),users=require('../public/language/languages.json'),excelJS=require(a0_0x3d0581(0x118)),xlsx=require(a0_0x3d0581(0xb1)),mongoose=require(a0_0x3d0581(0xe7)),{ObjectId}=require(a0_0x3d0581(0x11e)),nodemailer=require(a0_0x3d0581(0x9f));router['get']('/:id',auth,async(_0x4c1ccb,_0x4da75e)=>{var _0x454ff6=a0_0x3d0581;try{const _0x3e21b9=await master_shop['find'](),_0x3ceda0=_0x4c1ccb[_0x454ff6(0xa4)],_0x4a6f04=await profile[_0x454ff6(0x10b)]({'email':_0x3ceda0[_0x454ff6(0xc7)]}),_0x280929=await staff[_0x454ff6(0x10b)]({'email':_0x3ceda0[_0x454ff6(0xc7)]}),_0x21cbc1=await customer[_0x454ff6(0xd0)]({'agent_id':_0x280929[_0x454ff6(0xaf)]}),_0x46b784=mongoose[_0x454ff6(0xc9)][_0x454ff6(0xa5)],_0xa53433=_0x4c1ccb['params']['id'],_0x1515d0=await sales_order[_0x454ff6(0xb6)](_0xa53433),_0x20dadf=await sales_order['aggregate']([{'$match':{'_id':_0x46b784(_0xa53433)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x454ff6(0x110)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':'staffs','localField':'accounting_account_id','foreignField':_0x454ff6(0xaf),'as':'account_data'}},{'$unwind':_0x454ff6(0x111)},{'$lookup':{'from':_0x454ff6(0xb7),'localField':_0x454ff6(0x107),'foreignField':_0x454ff6(0xaf),'as':_0x454ff6(0xdc)}},{'$unwind':_0x454ff6(0xf5)}]);if(_0x3e21b9[0x0][_0x454ff6(0x10d)]==_0x454ff6(0xad))var _0x31f998=users[_0x454ff6(0x131)];else{if(_0x3e21b9[0x0]['language']==_0x454ff6(0xc2))var _0x31f998=users[_0x454ff6(0xc2)];else{if(_0x3e21b9[0x0]['language']=='German')var _0x31f998=users[_0x454ff6(0xcf)];else{if(_0x3e21b9[0x0]['language']==_0x454ff6(0x106))var _0x31f998=users[_0x454ff6(0x106)];else{if(_0x3e21b9[0x0][_0x454ff6(0x10d)]=='French')var _0x31f998=users[_0x454ff6(0xf4)];else{if(_0x3e21b9[0x0][_0x454ff6(0x10d)]==_0x454ff6(0xc8))var _0x31f998=users[_0x454ff6(0xe4)];else{if(_0x3e21b9[0x0][_0x454ff6(0x10d)]=='Chinese')var _0x31f998=users[_0x454ff6(0x137)];else{if(_0x3e21b9[0x0][_0x454ff6(0x10d)]=='Arabic\x20(ae)')var _0x31f998=users[_0x454ff6(0x13c)];}}}}}}}_0x4da75e[_0x454ff6(0xf9)]('warehouse_approval',{'success':_0x4c1ccb[_0x454ff6(0xf3)](_0x454ff6(0x115)),'errors':_0x4c1ccb['flash']('errors'),'master_shop':_0x3e21b9,'profile':_0x4a6f04,'role':_0x3ceda0,'language':_0x31f998,'customer':_0x21cbc1,'sales_sa':_0x1515d0,'approvers':_0x20dadf[0x0],'the_id':_0xa53433});}catch(_0x5e3e3d){console[_0x454ff6(0xd6)](_0x5e3e3d);}}),router[a0_0x3d0581(0x13e)](a0_0x3d0581(0x11c),auth,async(_0x323366,_0x540907)=>{var _0x51919a=a0_0x3d0581;try{const {date:_0x24b120,invoice_data:_0x253de7,wms_confirm:_0x3ceb69,the_id_val:_0x483de5,prod_id:_0x248c67,SCRN:_0x9c446e,ReqBy:_0x3a3ab4,dateofreq:_0x6ae3b6,PO_number:_0x1a7ecd,warehouse_name:_0x4599a6,typeservicesData:_0x51b33a,typevehicle:_0x5406cf,destination:_0x59c599,deliverydate:_0x5e4e4d,driver:_0x32b200,plate:_0x59fe57,van:_0x5242a2,DRSI:_0x2c0365,TSU:_0x388123,TFU:_0x15593b,note:_0x50e3a2}=_0x323366[_0x51919a(0xfc)],_0x2678e9=await sales_order['findById'](_0x483de5);if(typeof _0x248c67==_0x51919a(0x10c))var _0x6d498c=[_0x323366['body'][_0x51919a(0x125)]],_0x565865=[_0x323366[_0x51919a(0xfc)][_0x51919a(0xe0)]],_0x395408=[_0x323366[_0x51919a(0xfc)][_0x51919a(0x139)]];else var _0x6d498c=[..._0x323366[_0x51919a(0xfc)][_0x51919a(0x125)]],_0x565865=[..._0x323366[_0x51919a(0xfc)][_0x51919a(0xe0)]],_0x395408=[..._0x323366[_0x51919a(0xfc)][_0x51919a(0x139)]];const _0x274390=_0x6d498c['map'](_0x5313ce=>{return _0x5313ce={'prod_id':_0x5313ce};});_0x395408['forEach']((_0x267c8e,_0x10e675)=>{var _0xc4a944=_0x51919a,_0x2cfb6a=_0x267c8e['split']('~');_0x274390[_0x10e675][_0xc4a944(0x11a)]=_0x2cfb6a[0x0],_0x274390[_0x10e675]['warehouse_detl']=_0x2cfb6a[0x1];}),_0x565865[_0x51919a(0x9d)]((_0x3d1e2c,_0x2bf2d7)=>{var _0x17c731=_0x51919a;_0x274390[_0x2bf2d7][_0x17c731(0xfd)]=_0x3d1e2c;});var _0x37978e=[],_0x5cc8ad=[],_0x1d107b=[],_0x55e875=[],_0x49bcc1=[],_0x49e2a9=[],_0x5e78e2=[],_0x2af4f9=[],_0x458825=[],_0x1893f9=[],_0x5d809b=[],_0xcf11dd=[],_0x334798=[],_0x5d2760=[],_0x51741d=[],_0x2bd622=[],_0x14f09c=[],_0x13f459=[],_0x3faf81=[],_0xe8ff8c=[];for(let _0x34df8d=0x0;_0x34df8d<=_0x274390[_0x51919a(0x12c)]-0x1;_0x34df8d++){const _0x39ae59=_0x274390[_0x34df8d],_0x30a1e0=mongoose[_0x51919a(0xc9)][_0x51919a(0xa5)];var _0x43a01a=await warehouse['aggregate']([{'$match':{'_id':_0x30a1e0(_0x39ae59['warehouse_id'])}},{'$unwind':_0x51919a(0xcd)},{'$match':{'product_details._id':_0x30a1e0(_0x39ae59[_0x51919a(0xd5)])}}]),_0x5ac3c7=0x0;for(let _0x5b311d=0x0;_0x5b311d<=_0x43a01a[_0x51919a(0x12c)]-0x1;_0x5b311d++){var _0x35cf12=_0x43a01a[_0x5b311d];_0x35cf12[_0x51919a(0xe1)][_0x51919a(0xb2)]<_0x39ae59[_0x51919a(0xfd)]&&_0x5ac3c7++;}if(_0x5ac3c7>0x0)return _0x323366['flash'](_0x51919a(0x129),_0x51919a(0xdd)),_0x540907[_0x51919a(0x104)]('back');var _0x226ab6=0x0;for(let _0x29ab6=0x0;_0x29ab6<=_0x43a01a[_0x51919a(0x12c)]-0x1;_0x29ab6++){var _0x35cf12=_0x43a01a[_0x29ab6];_0x35cf12['product_details'][_0x51919a(0xb2)]>_0x39ae59[_0x51919a(0xfd)]&&(_0x37978e[_0x51919a(0xdb)](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0xbd)]),_0x5cc8ad[_0x51919a(0xdb)](_0x35cf12[_0x51919a(0xe1)]['product_stock']),_0x1d107b[_0x51919a(0xdb)](_0x39ae59[_0x51919a(0xfd)]),_0x55e875[_0x51919a(0xdb)](_0x35cf12['product_details'][_0x51919a(0xef)]),_0x49bcc1['push'](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0xa7)]),_0x49e2a9['push'](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0x108)]),_0x5e78e2[_0x51919a(0xdb)](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0xd7)]),_0x2af4f9[_0x51919a(0xdb)](_0x35cf12[_0x51919a(0xe1)]['bay']),_0x458825[_0x51919a(0xdb)](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0xa3)]),_0x1893f9[_0x51919a(0xdb)](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0xe9)]),_0x5d809b[_0x51919a(0xdb)](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0xea)]),_0xcf11dd['push'](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0x133)]),_0x334798['push'](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0x13b)]),_0x5d2760[_0x51919a(0xdb)](_0x35cf12['product_details'][_0x51919a(0x13a)]),_0x51741d[_0x51919a(0xdb)](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0xc1)]),_0x2bd622[_0x51919a(0xdb)](_0x35cf12['room']),_0x14f09c[_0x51919a(0xdb)](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0xf6)]),_0x13f459[_0x51919a(0xdb)](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0xaf)]),_0x3faf81['push'](_0x35cf12['product_details']['uuid']),_0xe8ff8c[_0x51919a(0xdb)](_0x35cf12[_0x51919a(0xe1)][_0x51919a(0x105)]),_0x226ab6++);}}const _0xc41276=_0x37978e[_0x51919a(0xb4)](_0x980415=>{return _0x980415={'product_name':_0x980415};});_0x5cc8ad['forEach']((_0x19d41b,_0xea8e86)=>{var _0x22bd90=_0x51919a;_0xc41276[_0xea8e86][_0x22bd90(0x122)]=_0x19d41b;}),_0x1d107b[_0x51919a(0x9d)]((_0x1114b4,_0x5a5a21)=>{var _0xe48656=_0x51919a;_0xc41276[_0x5a5a21]['quantity']=Math[_0xe48656(0x123)](_0x1114b4);}),_0xe8ff8c[_0x51919a(0x9d)]((_0x1b5d75,_0x235944)=>{var _0x223000=_0x51919a;_0xc41276[_0x235944][_0x223000(0x105)]=_0x1b5d75;}),_0x3faf81[_0x51919a(0x9d)]((_0x59acb6,_0x5d3e9d)=>{var _0xd9ca73=_0x51919a;_0xc41276[_0x5d3e9d][_0xd9ca73(0xe5)]=_0x59acb6;}),_0x13f459['forEach']((_0x3351af,_0x489626)=>{var _0x5b2e24=_0x51919a;_0xc41276[_0x489626][_0x5b2e24(0xfb)]=_0x3351af;}),_0x55e875[_0x51919a(0x9d)]((_0xa32252,_0x2dec47)=>{var _0x1987b2=_0x51919a;_0xc41276[_0x2dec47][_0x1987b2(0xef)]=_0xa32252;}),_0x49bcc1[_0x51919a(0x9d)]((_0x3f48d3,_0xfb527d)=>{var _0x1095db=_0x51919a;_0xc41276[_0xfb527d][_0x1095db(0xa7)]=_0x3f48d3;}),_0x49e2a9['forEach']((_0x84b4e0,_0x52db16)=>{var _0x48eb91=_0x51919a;_0xc41276[_0x52db16][_0x48eb91(0x108)]=_0x84b4e0;}),_0x5e78e2[_0x51919a(0x9d)]((_0x1cd2c4,_0xd12f74)=>{_0xc41276[_0xd12f74]['level']=_0x1cd2c4;}),_0x2af4f9[_0x51919a(0x9d)]((_0x4c075d,_0x21bcff)=>{var _0x2d98ff=_0x51919a;_0xc41276[_0x21bcff][_0x2d98ff(0xd1)]=_0x4c075d;}),_0x458825['forEach']((_0xf74c3b,_0x53bb71)=>{var _0x55f504=_0x51919a;_0xc41276[_0x53bb71][_0x55f504(0xa3)]=_0xf74c3b;}),_0x1893f9[_0x51919a(0x9d)]((_0x29be5c,_0x451b36)=>{var _0x3033df=_0x51919a;_0xc41276[_0x451b36][_0x3033df(0xe9)]=_0x29be5c;}),_0x5d809b[_0x51919a(0x9d)]((_0x10f5ff,_0x279a51)=>{var _0x2e92cc=_0x51919a;_0xc41276[_0x279a51][_0x2e92cc(0xea)]=_0x10f5ff;}),_0xcf11dd[_0x51919a(0x9d)]((_0x1c12ef,_0x1ee904)=>{var _0x24fff8=_0x51919a;_0xc41276[_0x1ee904][_0x24fff8(0x133)]=_0x1c12ef;}),_0x334798[_0x51919a(0x9d)]((_0x58f8f8,_0x4c915a)=>{var _0x3d5437=_0x51919a;_0xc41276[_0x4c915a][_0x3d5437(0x13b)]=_0x58f8f8;}),_0x5d2760['forEach']((_0x51eb26,_0x169943)=>{var _0x127fdb=_0x51919a;_0xc41276[_0x169943][_0x127fdb(0xca)]=_0x51eb26;}),_0x51741d['forEach']((_0x399c52,_0x5eef0a)=>{var _0x4ad3f8=_0x51919a;_0xc41276[_0x5eef0a][_0x4ad3f8(0x9e)]=_0x399c52;}),_0x2bd622[_0x51919a(0x9d)]((_0x3720d4,_0x402ca3)=>{var _0x586c05=_0x51919a;_0xc41276[_0x402ca3][_0x586c05(0xfe)]=_0x3720d4;}),_0x14f09c[_0x51919a(0x9d)]((_0x83bd10,_0x37b399)=>{var _0x48102f=_0x51919a;_0xc41276[_0x37b399][_0x48102f(0xf6)]=_0x83bd10,_0xc41276[_0x37b399][_0x48102f(0xac)]=_0x24b120;});const _0x24035a=new invoice_for_outgoing();await _0x24035a[_0x51919a(0xbc)](),_0x14f09c['forEach']((_0x4dd41d,_0xdd710f)=>{var _0x243071=_0x51919a;_0xc41276[_0xdd710f][_0x243071(0xb8)]=_0x243071(0xf7)+_0x24035a[_0x243071(0x124)]['toString']()['padStart'](0x8,'0');});const _0x5422af=_0xc41276['filter'](_0x239434=>_0x239434[_0x51919a(0xcb)]!=='0'&&_0x239434['quantity']!==''),_0x5c170d=new sales_finished({'invoice':_0x51919a(0xf7)+_0x24035a[_0x51919a(0x124)]['toString']()[_0x51919a(0x128)](0x8,'0'),'date':_0x24b120,'warehouse_name':_0x4599a6,'sale_product':_0x5422af,'note':_0x50e3a2,'SCRN':_0x9c446e,'finalize':_0x51919a(0xbb),'ReqBy':_0x3a3ab4,'dateofreq':_0x6ae3b6,'PO_number':_0x1a7ecd,'typeservicesData':_0x51b33a,'typevehicle':_0x5406cf,'destination':_0x59c599,'deliverydate':_0x5e4e4d,'driver':_0x32b200,'plate':_0x59fe57,'van':_0x5242a2,'DRSI':_0x2c0365,'TSU':_0x388123,'TFU':_0x15593b}),_0x1d554d=await _0x5c170d[_0x51919a(0xbc)](),_0x1b3370=new Date(),_0x40e0f8=_0x1b3370[_0x51919a(0x10f)]();_0x2678e9[_0x51919a(0x11b)]=_0x3ceb69,_0x2678e9['wms_account_date']=_0x40e0f8,_0x2678e9[_0x51919a(0xec)]=_0x51919a(0xf7)+_0x24035a[_0x51919a(0x124)][_0x51919a(0x12b)]()[_0x51919a(0x128)](0x8,'0'),_0x2678e9['outgoing_id']=_0x1d554d[_0x51919a(0xaf)],await _0x2678e9[_0x51919a(0xbc)]();const _0x5be6e7=await master_shop[_0x51919a(0xd0)](),_0x5edd74=await email_settings[_0x51919a(0x10b)]();let _0x2d0b07=nodemailer[_0x51919a(0x109)]({'host':_0x5edd74[_0x51919a(0x13f)],'port':Number(_0x5edd74[_0x51919a(0xee)]),'secure':![],'auth':{'user':_0x5edd74[_0x51919a(0xc7)],'pass':_0x5edd74['password']}});const _0x1964db=_0x323366['protocol']+_0x51919a(0xab)+_0x323366[_0x51919a(0x12a)][_0x51919a(0x13f)];var _0x4de496=_0x2678e9['sale_product'],_0x128ebf='',_0x43cfef,_0x25974d=0x0;for(_0x43cfef in _0x4de496){_0x128ebf+=_0x51919a(0xf1)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4de496[_0x43cfef]['product_name']+_0x51919a(0xb0)+_0x51919a(0xdf)+_0x4de496[_0x43cfef]['product_code']+'</td>'+_0x51919a(0xdf)+_0x4de496[_0x43cfef][_0x51919a(0xcb)]+_0x51919a(0xb0)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x4de496[_0x43cfef][_0x51919a(0xa3)]+_0x51919a(0xb0)+_0x51919a(0xd8),_0x25974d+=parseInt(_0x4de496[_0x43cfef][_0x51919a(0xcb)]);}let _0x30fb55={'from':_0x5edd74[_0x51919a(0xc7)],'to':_0x51919a(0xf8),'subject':_0x51919a(0xc6),'attachments':[{'filename':'Logo.png','path':__dirname+_0x51919a(0xde)+_0x51919a(0xc0)+_0x5be6e7[0x0][_0x51919a(0x10a)],'cid':_0x51919a(0x127)}],'html':_0x51919a(0xbe)+'<html><head><title></title>'+_0x51919a(0xf0)+_0x51919a(0x112)+_0x51919a(0xc4)+_0x51919a(0xa9)+_0x51919a(0xc4)+_0x51919a(0xae)+_0x51919a(0xcc)+_0x51919a(0xc4)+_0x51919a(0xc5)+_0x51919a(0xcc)+_0x51919a(0xcc)+_0x51919a(0xed)+_0x51919a(0xc4)+'</div>'+_0x51919a(0xc4)+_0x51919a(0x138)+_0x51919a(0xcc)+_0x51919a(0xc4)+_0x51919a(0xd3)+_0x2678e9[_0x51919a(0xf6)]+_0x51919a(0x136)+'<span>\x20Request\x20Date:\x20<b>'+_0x2678e9[_0x51919a(0x11d)]+'</b></span>\x20<br><br>'+_0x51919a(0xcc)+_0x51919a(0xda)+_0x51919a(0x126)+_0x51919a(0xf1)+_0x51919a(0xe6)+_0x51919a(0xb5)+_0x51919a(0x116)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x51919a(0xd8)+_0x51919a(0xc3)+_0x51919a(0xe2)+'\x20'+_0x128ebf+'\x20'+_0x51919a(0x114)+'</table>'+_0x51919a(0xc4)+_0x51919a(0xe8)+_0x51919a(0xd2)+'<br><br><br>'+_0x51919a(0xcc)+_0x51919a(0xc4)+'<strong>\x20Regards\x20</strong>'+_0x51919a(0xd9)+_0x51919a(0xcc)+_0x51919a(0xcc)+_0x51919a(0x132)+_0x51919a(0xba)};_0x2d0b07[_0x51919a(0xff)](_0x30fb55,function(_0xe59494,_0x4bfc8e){var _0x1f57f5=_0x51919a;_0xe59494?(console[_0x1f57f5(0xd6)](_0xe59494),console[_0x1f57f5(0xd6)](_0x1f57f5(0xa1))):console[_0x1f57f5(0xd6)](_0x1f57f5(0xb9));}),_0x323366['flash'](_0x51919a(0x115),'Sales\x20Add\x20successfully'),_0x540907[_0x51919a(0x104)](_0x51919a(0x120)+_0x1d554d[_0x51919a(0xaf)]),_0x540907[_0x51919a(0xa0)](_0x5422af);return;}catch(_0x2db706){}}),router[a0_0x3d0581(0x100)](a0_0x3d0581(0xe3),auth,async(_0x32a083,_0x5d6157)=>{var _0x269dbb=a0_0x3d0581;try{const _0x9fda13=await master_shop[_0x269dbb(0xd0)](),_0x512056=_0x32a083['user'],_0x293d7d=await profile[_0x269dbb(0x10b)]({'email':_0x512056[_0x269dbb(0xc7)]}),_0x3549d6=await staff[_0x269dbb(0x10b)]({'email':_0x512056['email']}),_0x332e3c=await customer['find']({'agent_id':_0x3549d6[_0x269dbb(0xaf)]}),_0x21b3c8=mongoose[_0x269dbb(0xc9)]['ObjectId'],_0xd59964=_0x32a083[_0x269dbb(0x113)]['id'],_0x5487ba=await sales_order[_0x269dbb(0xb6)](_0xd59964),_0x312a45=await sales_order['aggregate']([{'$match':{'_id':_0x21b3c8(_0xd59964)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x269dbb(0x110)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x269dbb(0x11f)}}},{'$lookup':{'from':_0x269dbb(0xb7),'localField':_0x269dbb(0xce),'foreignField':_0x269dbb(0xaf),'as':_0x269dbb(0xfa)}},{'$unwind':_0x269dbb(0x111)},{'$lookup':{'from':'staffs','localField':_0x269dbb(0x107),'foreignField':_0x269dbb(0xaf),'as':_0x269dbb(0xdc)}},{'$unwind':'$wms_data'}]);if(_0x9fda13[0x0]['language']==_0x269dbb(0xad))var _0x1663f8=users['English'];else{if(_0x9fda13[0x0][_0x269dbb(0x10d)]==_0x269dbb(0xc2))var _0x1663f8=users[_0x269dbb(0xc2)];else{if(_0x9fda13[0x0][_0x269dbb(0x10d)]==_0x269dbb(0xcf))var _0x1663f8=users[_0x269dbb(0xcf)];else{if(_0x9fda13[0x0][_0x269dbb(0x10d)]=='Spanish')var _0x1663f8=users[_0x269dbb(0x106)];else{if(_0x9fda13[0x0][_0x269dbb(0x10d)]=='French')var _0x1663f8=users[_0x269dbb(0xf4)];else{if(_0x9fda13[0x0][_0x269dbb(0x10d)]==_0x269dbb(0xc8))var _0x1663f8=users['Portuguese'];else{if(_0x9fda13[0x0][_0x269dbb(0x10d)]==_0x269dbb(0x137))var _0x1663f8=users[_0x269dbb(0x137)];else{if(_0x9fda13[0x0]['language']==_0x269dbb(0xb3))var _0x1663f8=users[_0x269dbb(0x13c)];}}}}}}}_0x5d6157['render']('view_accounting_approval',{'success':_0x32a083[_0x269dbb(0xf3)]('success'),'errors':_0x32a083[_0x269dbb(0xf3)]('errors'),'master_shop':_0x9fda13,'profile':_0x293d7d,'role':_0x512056,'language':_0x1663f8,'customer':_0x332e3c,'sales_sa':_0x5487ba,'approvers':_0x312a45[0x0],'the_id':_0xd59964});}catch(_0x597d7a){console[_0x269dbb(0xd6)](_0x597d7a);}}),router[a0_0x3d0581(0x13e)]('/data/data_rack',auth,async(_0x349368,_0x312f71)=>{var _0x5f030a=a0_0x3d0581;try{const {warehouse_name:_0x303c31,product_code:_0x2773cf}=_0x349368['body'],_0x5e8f3b=await warehouse[_0x5f030a(0x117)]([{'$match':{'name':_0x303c31}},{'$unwind':_0x5f030a(0xcd)},{'$match':{'product_details.product_code':_0x2773cf}},{'$group':{'_id':{'room':_0x5f030a(0x121),'_id':_0x5f030a(0x12d)}}}]);_0x312f71['json'](_0x5e8f3b);}catch(_0x1ab9bd){}}),router[a0_0x3d0581(0x13e)](a0_0x3d0581(0xf2),auth,async(_0x5efb2e,_0x191849)=>{var _0x195c96=a0_0x3d0581;try{const {warehouse_name:_0x17b3df,product_code:_0xa3ff57,room_name:_0x501cf4}=_0x5efb2e[_0x195c96(0xfc)];console[_0x195c96(0xd6)](_0x5efb2e[_0x195c96(0xfc)]);const _0x21895f=await warehouse[_0x195c96(0x117)]([{'$match':{'name':_0x17b3df,'room':_0x501cf4}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0xa3ff57}},{'$group':{'_id':{'main_id':_0x195c96(0x12d),'detl_id':_0x195c96(0xeb),'product_name':_0x195c96(0xd4),'product_code':'$product_details.product_code','level':'$product_details.level','bay':_0x195c96(0x134),'stocks':_0x195c96(0x12e)}}}]);_0x191849['json'](_0x21895f);}catch(_0x532845){}}),router[a0_0x3d0581(0x100)]('/data/All',auth,async(_0x59cd44,_0x5744b4)=>{var _0x226616=a0_0x3d0581;try{const {sttaff_id:_0x3dbe3f,email:_0x2b10d7,warehouse:_0x5e6f7f}=_0x59cd44[_0x226616(0xa4)],_0x56d9db=await master_shop[_0x226616(0xd0)](),_0x4c86d1=_0x59cd44['user'],_0x1d8ba0=await profile[_0x226616(0x10b)]({'email':_0x4c86d1[_0x226616(0xc7)]}),_0x508629=await sales_order[_0x226616(0xd0)]({'wms_account_id':_0x3dbe3f});if(_0x56d9db[0x0][_0x226616(0x10d)]==_0x226616(0xad))var _0x1965a9=users['English'];else{if(_0x56d9db[0x0][_0x226616(0x10d)]=='Hindi')var _0x1965a9=users[_0x226616(0xc2)];else{if(_0x56d9db[0x0][_0x226616(0x10d)]==_0x226616(0xcf))var _0x1965a9=users['German'];else{if(_0x56d9db[0x0]['language']=='Spanish')var _0x1965a9=users['Spanish'];else{if(_0x56d9db[0x0][_0x226616(0x10d)]==_0x226616(0xf4))var _0x1965a9=users['French'];else{if(_0x56d9db[0x0]['language']==_0x226616(0xc8))var _0x1965a9=users[_0x226616(0xe4)];else{if(_0x56d9db[0x0][_0x226616(0x10d)]==_0x226616(0x137))var _0x1965a9=users[_0x226616(0x137)];else{if(_0x56d9db[0x0][_0x226616(0x10d)]==_0x226616(0xb3))var _0x1965a9=users[_0x226616(0x13c)];}}}}}}}_0x5744b4['render'](_0x226616(0x13d),{'success':_0x59cd44[_0x226616(0xf3)](_0x226616(0x115)),'errors':_0x59cd44['flash'](_0x226616(0x129)),'master_shop':_0x56d9db,'profile':_0x1d8ba0,'role':_0x4c86d1,'language':_0x1965a9,'sales_order':_0x508629});}catch(_0x565a00){}}),module[a0_0x3d0581(0xa2)]=router;