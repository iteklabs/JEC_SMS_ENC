var a0_0x330a8b=a0_0x227a;function a0_0x227a(_0x548eba,_0xa91b84){var _0x5ac292=a0_0x5ac2();return a0_0x227a=function(_0x227adc,_0x593acd){_0x227adc=_0x227adc-0xe1;var _0x1dc466=_0x5ac292[_0x227adc];return _0x1dc466;},a0_0x227a(_0x548eba,_0xa91b84);}(function(_0x59edb5,_0x4e0ab9){var _0x242386=a0_0x227a,_0x2be36c=_0x59edb5();while(!![]){try{var _0x27d87c=-parseInt(_0x242386(0x105))/0x1*(-parseInt(_0x242386(0x17c))/0x2)+-parseInt(_0x242386(0x12d))/0x3+parseInt(_0x242386(0x119))/0x4+parseInt(_0x242386(0x182))/0x5+parseInt(_0x242386(0x169))/0x6+parseInt(_0x242386(0xf8))/0x7+parseInt(_0x242386(0xfd))/0x8*(-parseInt(_0x242386(0x109))/0x9);if(_0x27d87c===_0x4e0ab9)break;else _0x2be36c['push'](_0x2be36c['shift']());}catch(_0x4c2e79){_0x2be36c['push'](_0x2be36c['shift']());}}}(a0_0x5ac2,0x190c2));const express=require(a0_0x330a8b(0x153)),app=express(),router=express[a0_0x330a8b(0xf5)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require('../models/all_models'),auth=require(a0_0x330a8b(0xfc)),users=require(a0_0x330a8b(0x13c)),excelJS=require('exceljs'),xlsx=require('xlsx'),mongoose=require(a0_0x330a8b(0x143)),{ObjectId}=require(a0_0x330a8b(0xed)),nodemailer=require(a0_0x330a8b(0x16e));router[a0_0x330a8b(0x12f)](a0_0x330a8b(0x132),auth,async(_0x5c0eae,_0xbbe2f)=>{var _0x879534=a0_0x330a8b;try{const _0x33e7dc=await master_shop[_0x879534(0xe9)](),_0x5aff95=_0x5c0eae[_0x879534(0x104)],_0x3d6280=await profile['findOne']({'email':_0x5aff95[_0x879534(0x11c)]}),_0x900cb4=await staff[_0x879534(0x156)]({'email':_0x5aff95[_0x879534(0x11c)]}),_0x24bedb=await customer[_0x879534(0xe9)]({'agent_id':_0x900cb4[_0x879534(0x13e)]}),_0x14de24=mongoose[_0x879534(0x165)][_0x879534(0x178)],_0x35c7a1=_0x5c0eae[_0x879534(0x13b)]['id'],_0x3e5aa8=await sales_order[_0x879534(0x14f)](_0x35c7a1),_0x338568=await sales_order[_0x879534(0x11a)]([{'$match':{'_id':_0x14de24(_0x35c7a1)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x879534(0x17f)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x879534(0x126)}}},{'$lookup':{'from':_0x879534(0x16a),'localField':'accounting_account_id','foreignField':_0x879534(0x13e),'as':_0x879534(0x15e)}},{'$unwind':_0x879534(0x117)},{'$lookup':{'from':_0x879534(0x16a),'localField':_0x879534(0x122),'foreignField':_0x879534(0x13e),'as':_0x879534(0x11e)}},{'$unwind':_0x879534(0x123)}]);if(_0x33e7dc[0x0]['language']==_0x879534(0x17d))var _0xddab65=users['English'];else{if(_0x33e7dc[0x0][_0x879534(0x118)]==_0x879534(0x106))var _0xddab65=users[_0x879534(0x106)];else{if(_0x33e7dc[0x0][_0x879534(0x118)]==_0x879534(0x127))var _0xddab65=users[_0x879534(0x127)];else{if(_0x33e7dc[0x0][_0x879534(0x118)]==_0x879534(0x121))var _0xddab65=users[_0x879534(0x121)];else{if(_0x33e7dc[0x0][_0x879534(0x118)]==_0x879534(0x154))var _0xddab65=users[_0x879534(0x154)];else{if(_0x33e7dc[0x0][_0x879534(0x118)]==_0x879534(0x141))var _0xddab65=users['Portuguese'];else{if(_0x33e7dc[0x0][_0x879534(0x118)]=='Chinese')var _0xddab65=users['Chinese'];else{if(_0x33e7dc[0x0][_0x879534(0x118)]=='Arabic\x20(ae)')var _0xddab65=users[_0x879534(0x142)];}}}}}}}_0xbbe2f[_0x879534(0x10a)]('warehouse_approval',{'success':_0x5c0eae[_0x879534(0x10b)]('success'),'errors':_0x5c0eae[_0x879534(0x10b)](_0x879534(0x158)),'master_shop':_0x33e7dc,'profile':_0x3d6280,'role':_0x5aff95,'language':_0xddab65,'customer':_0x24bedb,'sales_sa':_0x3e5aa8,'approvers':_0x338568[0x0],'the_id':_0x35c7a1});}catch(_0x474233){console[_0x879534(0x155)](_0x474233);}}),router[a0_0x330a8b(0x14d)](a0_0x330a8b(0x132),auth,async(_0xdda020,_0x2d95d8)=>{var _0xda993a=a0_0x330a8b;try{const {date:_0x86d9cd,invoice_data:_0x12d637,wms_confirm:_0x2a5ccd,the_id_val:_0xed923f,prod_id:_0x12de9d,SCRN:_0x52993f,ReqBy:_0x36c34f,dateofreq:_0x5a6092,PO_number:_0x3297a5,warehouse_name:_0x5eb876,typeservicesData:_0x849e1b,typevehicle:_0x1c532e,destination:_0x32b3ed,deliverydate:_0x3c9275,driver:_0x49afe1,plate:_0x39ef13,van:_0x2fd8f8,DRSI:_0x20803a,TSU:_0xfc9bdf,TFU:_0x2c835d,note:_0x451830}=_0xdda020['body'],_0x5deb28=await sales_order[_0xda993a(0x14f)](_0xed923f);if(typeof _0x12de9d==_0xda993a(0x17e))var _0x48fbca=[_0xdda020['body'][_0xda993a(0xef)]],_0x712c07=[_0xdda020[_0xda993a(0x162)]['qty']],_0x10c18b=[_0xdda020[_0xda993a(0x162)][_0xda993a(0xf6)]];else var _0x48fbca=[..._0xdda020[_0xda993a(0x162)][_0xda993a(0xef)]],_0x712c07=[..._0xdda020['body'][_0xda993a(0xe4)]],_0x10c18b=[..._0xdda020['body']['data_loc']];const _0x12aa15=_0x48fbca['map'](_0x92186b=>{return _0x92186b={'prod_id':_0x92186b};});_0x10c18b['forEach']((_0x239287,_0x5d6004)=>{var _0x2f90db=_0xda993a,_0x25cb03=_0x239287[_0x2f90db(0x167)]('~');_0x12aa15[_0x5d6004][_0x2f90db(0x14a)]=_0x25cb03[0x0],_0x12aa15[_0x5d6004][_0x2f90db(0x107)]=_0x25cb03[0x1];}),_0x712c07['forEach']((_0x2ad893,_0x2c1e50)=>{_0x12aa15[_0x2c1e50]['request_qty']=_0x2ad893;});var _0xbe2abb=[],_0x598394=[],_0x28bb01=[],_0x4b674d=[],_0x5e5b64=[],_0x439d5c=[],_0x5802f6=[],_0x59417a=[],_0x296d15=[],_0x496318=[],_0x451b5a=[],_0x10b28f=[],_0x533fec=[],_0x538d38=[],_0x15b513=[],_0x4e863e=[],_0x4be8b6=[],_0x2cb031=[],_0x468961=[],_0xbfddee=[];for(let _0x44dc27=0x0;_0x44dc27<=_0x12aa15[_0xda993a(0x180)]-0x1;_0x44dc27++){const _0x2bc190=_0x12aa15[_0x44dc27],_0x29fd44=mongoose[_0xda993a(0x165)][_0xda993a(0x178)];var _0x4211fd=await warehouse[_0xda993a(0x11a)]([{'$match':{'_id':_0x29fd44(_0x2bc190[_0xda993a(0x14a)])}},{'$unwind':_0xda993a(0x134)},{'$match':{'product_details._id':_0x29fd44(_0x2bc190[_0xda993a(0x107)])}}]),_0x2245ed=0x0;for(let _0x5c817b=0x0;_0x5c817b<=_0x4211fd[_0xda993a(0x180)]-0x1;_0x5c817b++){var _0x186e3c=_0x4211fd[_0x5c817b];_0x186e3c[_0xda993a(0x110)]['product_stock']<_0x2bc190[_0xda993a(0x16c)]&&_0x2245ed++;}if(_0x2245ed>0x0)return _0xdda020['flash'](_0xda993a(0x158),_0xda993a(0x14e)),_0x2d95d8[_0xda993a(0x115)](_0xda993a(0x161));var _0x10b73b=0x0;for(let _0x18ebe5=0x0;_0x18ebe5<=_0x4211fd[_0xda993a(0x180)]-0x1;_0x18ebe5++){var _0x186e3c=_0x4211fd[_0x18ebe5];_0x186e3c[_0xda993a(0x110)][_0xda993a(0x116)]>_0x2bc190[_0xda993a(0x16c)]&&(_0xbe2abb['push'](_0x186e3c[_0xda993a(0x110)]['product_name']),_0x598394[_0xda993a(0x176)](_0x186e3c['product_details'][_0xda993a(0x116)]),_0x28bb01[_0xda993a(0x176)](_0x2bc190[_0xda993a(0x16c)]),_0x4b674d[_0xda993a(0x176)](_0x186e3c['product_details'][_0xda993a(0x102)]),_0x5e5b64[_0xda993a(0x176)](_0x186e3c['product_details'][_0xda993a(0x12e)]),_0x439d5c['push'](_0x186e3c[_0xda993a(0x110)][_0xda993a(0x17a)]),_0x5802f6[_0xda993a(0x176)](_0x186e3c['product_details'][_0xda993a(0x15b)]),_0x59417a[_0xda993a(0x176)](_0x186e3c['product_details'][_0xda993a(0x147)]),_0x296d15['push'](_0x186e3c[_0xda993a(0x110)][_0xda993a(0xee)]),_0x496318[_0xda993a(0x176)](_0x186e3c[_0xda993a(0x110)][_0xda993a(0x16f)]),_0x451b5a[_0xda993a(0x176)](_0x186e3c[_0xda993a(0x110)][_0xda993a(0x145)]),_0x10b28f[_0xda993a(0x176)](_0x186e3c['product_details']['expiry_date']),_0x533fec['push'](_0x186e3c['product_details'][_0xda993a(0x140)]),_0x538d38[_0xda993a(0x176)](_0x186e3c[_0xda993a(0x110)][_0xda993a(0x114)]),_0x15b513[_0xda993a(0x176)](_0x186e3c[_0xda993a(0x110)][_0xda993a(0x151)]),_0x4e863e[_0xda993a(0x176)](_0x186e3c['room']),_0x4be8b6[_0xda993a(0x176)](_0x186e3c['product_details']['invoice']),_0x2cb031['push'](_0x186e3c[_0xda993a(0x110)][_0xda993a(0x13e)]),_0x468961[_0xda993a(0x176)](_0x186e3c[_0xda993a(0x110)][_0xda993a(0x138)]),_0xbfddee[_0xda993a(0x176)](_0x186e3c[_0xda993a(0x110)][_0xda993a(0x125)]),_0x10b73b++);}}const _0x206790=_0xbe2abb['map'](_0x2be631=>{return _0x2be631={'product_name':_0x2be631};});_0x598394[_0xda993a(0x166)]((_0xfbda17,_0x2585a1)=>{var _0x43e29f=_0xda993a;_0x206790[_0x2585a1][_0x43e29f(0x14b)]=_0xfbda17;}),_0x28bb01[_0xda993a(0x166)]((_0x4d63c7,_0x7c09d8)=>{var _0x45a5d8=_0xda993a;_0x206790[_0x7c09d8][_0x45a5d8(0x16b)]=Math[_0x45a5d8(0x15c)](_0x4d63c7);}),_0xbfddee['forEach']((_0x1847e8,_0x75bde4)=>{var _0x478dab=_0xda993a;_0x206790[_0x75bde4][_0x478dab(0x125)]=_0x1847e8;}),_0x468961['forEach']((_0x7c132e,_0x20dbe9)=>{var _0x5da85d=_0xda993a;_0x206790[_0x20dbe9][_0x5da85d(0x138)]=_0x7c132e;}),_0x2cb031[_0xda993a(0x166)]((_0x23257e,_0xa0873e)=>{var _0x7b9a75=_0xda993a;_0x206790[_0xa0873e][_0x7b9a75(0x124)]=_0x23257e;}),_0x4b674d[_0xda993a(0x166)]((_0x1a36d4,_0x2ba8f8)=>{var _0x5d8305=_0xda993a;_0x206790[_0x2ba8f8][_0x5d8305(0x102)]=_0x1a36d4;}),_0x5e5b64[_0xda993a(0x166)]((_0x2c0b4b,_0x2e3f4d)=>{var _0x31b44c=_0xda993a;_0x206790[_0x2e3f4d][_0x31b44c(0x12e)]=_0x2c0b4b;}),_0x439d5c[_0xda993a(0x166)]((_0x6ccecf,_0x1c3cf0)=>{var _0x2039d5=_0xda993a;_0x206790[_0x1c3cf0][_0x2039d5(0x17a)]=_0x6ccecf;}),_0x5802f6['forEach']((_0x881d43,_0x4c33d0)=>{var _0x4587fa=_0xda993a;_0x206790[_0x4c33d0][_0x4587fa(0x15b)]=_0x881d43;}),_0x59417a[_0xda993a(0x166)]((_0x581424,_0x21f195)=>{_0x206790[_0x21f195]['bay']=_0x581424;}),_0x296d15['forEach']((_0x3ba0fd,_0x28a660)=>{var _0x346d88=_0xda993a;_0x206790[_0x28a660][_0x346d88(0xee)]=_0x3ba0fd;}),_0x496318[_0xda993a(0x166)]((_0x35104e,_0x1ee578)=>{var _0x3d3ba2=_0xda993a;_0x206790[_0x1ee578][_0x3d3ba2(0x16f)]=_0x35104e;}),_0x451b5a[_0xda993a(0x166)]((_0x46a4f6,_0x188e15)=>{var _0x560b58=_0xda993a;_0x206790[_0x188e15][_0x560b58(0x145)]=_0x46a4f6;}),_0x10b28f[_0xda993a(0x166)]((_0x26e418,_0x1aad96)=>{_0x206790[_0x1aad96]['expiry_date']=_0x26e418;}),_0x533fec['forEach']((_0x4c0c8d,_0x6f20b5)=>{_0x206790[_0x6f20b5]['production_date']=_0x4c0c8d;}),_0x538d38[_0xda993a(0x166)]((_0x49448a,_0x4ea513)=>{var _0x3451be=_0xda993a;_0x206790[_0x4ea513][_0x3451be(0xf0)]=_0x49448a;}),_0x15b513[_0xda993a(0x166)]((_0x5c0749,_0x4da806)=>{var _0x42cba2=_0xda993a;_0x206790[_0x4da806][_0x42cba2(0x137)]=_0x5c0749;}),_0x4e863e[_0xda993a(0x166)]((_0x2768ee,_0x3606f7)=>{var _0x1b9f4e=_0xda993a;_0x206790[_0x3606f7][_0x1b9f4e(0x139)]=_0x2768ee;}),_0x4be8b6[_0xda993a(0x166)]((_0xdcd5a,_0x2c1486)=>{var _0x34341f=_0xda993a;_0x206790[_0x2c1486][_0x34341f(0xf3)]=_0xdcd5a,_0x206790[_0x2c1486][_0x34341f(0x13f)]=_0x86d9cd;});const _0x5c5477=new invoice_for_outgoing();await _0x5c5477[_0xda993a(0xe3)](),_0x4be8b6[_0xda993a(0x166)]((_0x192212,_0x21ae1f)=>{var _0x34e973=_0xda993a;_0x206790[_0x21ae1f][_0x34e973(0xec)]=_0x34e973(0x171)+_0x5c5477[_0x34e973(0x13d)][_0x34e973(0x15f)]()[_0x34e973(0x12c)](0x8,'0');});const _0x3c81ea=_0x206790[_0xda993a(0x174)](_0x554f7e=>_0x554f7e[_0xda993a(0x16b)]!=='0'&&_0x554f7e['quantity']!==''),_0x136eef=new sales_finished({'invoice':_0xda993a(0x171)+_0x5c5477[_0xda993a(0x13d)]['toString']()['padStart'](0x8,'0'),'date':_0x86d9cd,'warehouse_name':_0x5eb876,'sale_product':_0x3c81ea,'note':_0x451830,'SCRN':_0x52993f,'finalize':'False','ReqBy':_0x36c34f,'dateofreq':_0x5a6092,'PO_number':_0x3297a5,'typeservicesData':_0x849e1b,'typevehicle':_0x1c532e,'destination':_0x32b3ed,'deliverydate':_0x3c9275,'driver':_0x49afe1,'plate':_0x39ef13,'van':_0x2fd8f8,'DRSI':_0x20803a,'TSU':_0xfc9bdf,'TFU':_0x2c835d}),_0x316dab=await _0x136eef['save'](),_0x1a5a01=new Date(),_0x3da20f=_0x1a5a01['toLocaleDateString']();_0x5deb28['wms_account_confirm']=_0x2a5ccd,_0x5deb28[_0xda993a(0x131)]=_0x3da20f,_0x5deb28[_0xda993a(0x10f)]='OUT-'+_0x5c5477[_0xda993a(0x13d)][_0xda993a(0x15f)]()[_0xda993a(0x12c)](0x8,'0'),_0x5deb28[_0xda993a(0x10c)]=_0x316dab['_id'],await _0x5deb28[_0xda993a(0xe3)]();const _0x3b036b=await master_shop[_0xda993a(0xe9)](),_0x41b950=await email_settings[_0xda993a(0x156)]();let _0x1417e5=nodemailer[_0xda993a(0xf4)]({'host':_0x41b950[_0xda993a(0x10d)],'port':Number(_0x41b950[_0xda993a(0x159)]),'secure':![],'auth':{'user':_0x41b950[_0xda993a(0x11c)],'pass':_0x41b950[_0xda993a(0x111)]}});const _0x2d9702=_0xdda020[_0xda993a(0x108)]+'://'+_0xdda020['headers'][_0xda993a(0x10d)];var _0x218858=_0x5deb28[_0xda993a(0x172)],_0x3e9272='',_0x63222c,_0x2d7ca5=0x0;for(_0x63222c in _0x218858){_0x3e9272+=_0xda993a(0x150)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x218858[_0x63222c]['product_name']+_0xda993a(0x170)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x218858[_0x63222c]['product_code']+_0xda993a(0x170)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x218858[_0x63222c][_0xda993a(0x16b)]+_0xda993a(0x170)+_0xda993a(0x103)+_0x218858[_0x63222c]['unit']+_0xda993a(0x170)+_0xda993a(0x177),_0x2d7ca5+=parseInt(_0x218858[_0x63222c][_0xda993a(0x16b)]);}let _0x509690={'from':_0x41b950['email'],'to':_0xda993a(0xf1),'subject':'Email\x20for\x20Customer','attachments':[{'filename':_0xda993a(0x160),'path':__dirname+_0xda993a(0x135)+_0xda993a(0xeb)+_0x3b036b[0x0][_0xda993a(0x136)],'cid':_0xda993a(0xf9)}],'html':'<!DOCTYPE\x20html>'+_0xda993a(0x130)+_0xda993a(0x14c)+_0xda993a(0xf7)+_0xda993a(0x163)+_0xda993a(0xf2)+_0xda993a(0x163)+_0xda993a(0x11d)+_0xda993a(0x15d)+'<div>'+_0xda993a(0xe7)+_0xda993a(0x15d)+'</div>'+_0xda993a(0x168)+_0xda993a(0x163)+_0xda993a(0x15d)+_0xda993a(0x163)+_0xda993a(0xe2)+_0xda993a(0x15d)+_0xda993a(0x163)+_0xda993a(0x157)+_0x5deb28['invoice']+_0xda993a(0x112)+_0xda993a(0x144)+_0x5deb28[_0xda993a(0x179)]+_0xda993a(0x146)+_0xda993a(0x15d)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0xda993a(0xea)+_0xda993a(0x150)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+_0xda993a(0x152)+_0xda993a(0x148)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0xda993a(0x177)+_0xda993a(0x12a)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x3e9272+'\x20'+_0xda993a(0x16d)+_0xda993a(0xe6)+_0xda993a(0x163)+_0xda993a(0x173)+_0xda993a(0x149)+'<br><br><br>'+_0xda993a(0x15d)+_0xda993a(0x163)+_0xda993a(0x15a)+'<h5>\x20JEC\x20SMS\x20</h5>'+_0xda993a(0x15d)+_0xda993a(0x15d)+_0xda993a(0x11b)+_0xda993a(0x164)};_0x1417e5[_0xda993a(0xff)](_0x509690,function(_0x2a4325,_0x488aba){var _0x2e94a6=_0xda993a;_0x2a4325?(console[_0x2e94a6(0x155)](_0x2a4325),console['log'](_0x2e94a6(0x100))):console['log']('Email\x20sent\x20successfully');}),_0xdda020['flash'](_0xda993a(0x175),_0xda993a(0x128)),_0x2d95d8[_0xda993a(0x115)](_0xda993a(0x113)+_0x316dab['_id']),_0x2d95d8[_0xda993a(0x133)](_0x3c81ea);return;}catch(_0x5acaf5){}}),router[a0_0x330a8b(0x12f)](a0_0x330a8b(0x17b),auth,async(_0x5f24e8,_0x39a6e2)=>{var _0x3240c5=a0_0x330a8b;try{const _0x3869eb=await master_shop['find'](),_0x159e3f=_0x5f24e8['user'],_0x2262ae=await profile['findOne']({'email':_0x159e3f[_0x3240c5(0x11c)]}),_0x5eb431=await staff['findOne']({'email':_0x159e3f[_0x3240c5(0x11c)]}),_0x3a40e1=await customer[_0x3240c5(0xe9)]({'agent_id':_0x5eb431['_id']}),_0x3ee205=mongoose[_0x3240c5(0x165)][_0x3240c5(0x178)],_0x3180a4=_0x5f24e8['params']['id'],_0x10f517=await sales_order[_0x3240c5(0x14f)](_0x3180a4),_0x228614=await sales_order['aggregate']([{'$match':{'_id':_0x3ee205(_0x3180a4)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x3240c5(0x17f)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x3240c5(0x126)}}},{'$lookup':{'from':'staffs','localField':_0x3240c5(0xe8),'foreignField':_0x3240c5(0x13e),'as':_0x3240c5(0x15e)}},{'$unwind':_0x3240c5(0x117)},{'$lookup':{'from':_0x3240c5(0x16a),'localField':_0x3240c5(0x122),'foreignField':'_id','as':_0x3240c5(0x11e)}},{'$unwind':'$wms_data'}]);if(_0x3869eb[0x0][_0x3240c5(0x118)]==_0x3240c5(0x17d))var _0x379a7c=users[_0x3240c5(0x11f)];else{if(_0x3869eb[0x0][_0x3240c5(0x118)]==_0x3240c5(0x106))var _0x379a7c=users['Hindi'];else{if(_0x3869eb[0x0][_0x3240c5(0x118)]==_0x3240c5(0x127))var _0x379a7c=users[_0x3240c5(0x127)];else{if(_0x3869eb[0x0][_0x3240c5(0x118)]==_0x3240c5(0x121))var _0x379a7c=users['Spanish'];else{if(_0x3869eb[0x0][_0x3240c5(0x118)]==_0x3240c5(0x154))var _0x379a7c=users[_0x3240c5(0x154)];else{if(_0x3869eb[0x0][_0x3240c5(0x118)]==_0x3240c5(0x141))var _0x379a7c=users['Portuguese'];else{if(_0x3869eb[0x0][_0x3240c5(0x118)]==_0x3240c5(0xfe))var _0x379a7c=users[_0x3240c5(0xfe)];else{if(_0x3869eb[0x0]['language']==_0x3240c5(0x101))var _0x379a7c=users[_0x3240c5(0x142)];}}}}}}}_0x39a6e2[_0x3240c5(0x10a)](_0x3240c5(0xe5),{'success':_0x5f24e8[_0x3240c5(0x10b)](_0x3240c5(0x175)),'errors':_0x5f24e8[_0x3240c5(0x10b)](_0x3240c5(0x158)),'master_shop':_0x3869eb,'profile':_0x2262ae,'role':_0x159e3f,'language':_0x379a7c,'customer':_0x3a40e1,'sales_sa':_0x10f517,'approvers':_0x228614[0x0],'the_id':_0x3180a4});}catch(_0x1625c7){console[_0x3240c5(0x155)](_0x1625c7);}}),router[a0_0x330a8b(0x14d)](a0_0x330a8b(0xe1),auth,async(_0x2335ff,_0xcfbd89)=>{var _0x4dcbd8=a0_0x330a8b;try{const {warehouse_name:_0x48d319,product_code:_0x5c1e48}=_0x2335ff[_0x4dcbd8(0x162)],_0x3d6af1=await warehouse['aggregate']([{'$match':{'name':_0x48d319}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x5c1e48}},{'$group':{'_id':{'room':_0x4dcbd8(0x13a),'_id':'$_id'}}}]);_0xcfbd89['json'](_0x3d6af1);}catch(_0xc7facb){}}),router[a0_0x330a8b(0x14d)](a0_0x330a8b(0x129),auth,async(_0x18f707,_0x56c6c7)=>{var _0x50bb8d=a0_0x330a8b;try{const {warehouse_name:_0x4ff653,product_code:_0x4fec6b,room_name:_0x2fea87}=_0x18f707[_0x50bb8d(0x162)];console[_0x50bb8d(0x155)](_0x18f707['body']);const _0x59b8e1=await warehouse['aggregate']([{'$match':{'name':_0x4ff653,'room':_0x2fea87}},{'$unwind':_0x50bb8d(0x134)},{'$match':{'product_details.product_code':_0x4fec6b}},{'$group':{'_id':{'main_id':'$_id','detl_id':'$product_details._id','product_name':_0x50bb8d(0x12b),'product_code':_0x50bb8d(0x181),'level':_0x50bb8d(0x10e),'bay':'$product_details.bay','stocks':_0x50bb8d(0xfb)}}}]);_0x56c6c7[_0x50bb8d(0x133)](_0x59b8e1);}catch(_0x4dc95a){}}),router['get'](a0_0x330a8b(0x120),auth,async(_0x37f2c2,_0x10e055)=>{var _0x3b251f=a0_0x330a8b;try{const {sttaff_id:_0x1b31ab,email:_0x2d5a6f,warehouse:_0x4b5399}=_0x37f2c2[_0x3b251f(0x104)],_0x5e3743=await master_shop[_0x3b251f(0xe9)](),_0x245e20=_0x37f2c2[_0x3b251f(0x104)],_0x2edf7d=await profile['findOne']({'email':_0x245e20[_0x3b251f(0x11c)]}),_0x124925=await sales_order[_0x3b251f(0xe9)]({'wms_account_id':_0x1b31ab});if(_0x5e3743[0x0][_0x3b251f(0x118)]==_0x3b251f(0x17d))var _0x5038a7=users[_0x3b251f(0x11f)];else{if(_0x5e3743[0x0]['language']==_0x3b251f(0x106))var _0x5038a7=users[_0x3b251f(0x106)];else{if(_0x5e3743[0x0][_0x3b251f(0x118)]=='German')var _0x5038a7=users[_0x3b251f(0x127)];else{if(_0x5e3743[0x0][_0x3b251f(0x118)]==_0x3b251f(0x121))var _0x5038a7=users[_0x3b251f(0x121)];else{if(_0x5e3743[0x0][_0x3b251f(0x118)]=='French')var _0x5038a7=users[_0x3b251f(0x154)];else{if(_0x5e3743[0x0]['language']=='Portuguese\x20(BR)')var _0x5038a7=users['Portuguese'];else{if(_0x5e3743[0x0][_0x3b251f(0x118)]==_0x3b251f(0xfe))var _0x5038a7=users[_0x3b251f(0xfe)];else{if(_0x5e3743[0x0][_0x3b251f(0x118)]==_0x3b251f(0x101))var _0x5038a7=users[_0x3b251f(0x142)];}}}}}}}_0x10e055[_0x3b251f(0x10a)](_0x3b251f(0xfa),{'success':_0x37f2c2[_0x3b251f(0x10b)]('success'),'errors':_0x37f2c2['flash'](_0x3b251f(0x158)),'master_shop':_0x5e3743,'profile':_0x2edf7d,'role':_0x245e20,'language':_0x5038a7,'sales_order':_0x124925});}catch(_0x4ee7b6){}}),module['exports']=router;function a0_0x5ac2(){var _0x294813=['../middleware/auth','2880856ivaOVY','Chinese','sendMail','Error\x20Occurs','Arabic\x20(ae)','primary_code','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','user','1yKIzaS','Hindi','warehouse_detl','protocol','9NgPPry','render','flash','outgoing_id','host','$product_details.level','document_number_out','product_details','password','</b></span>\x20<br>','/all_sales_finished/preview/','maxPerUnit','redirect','product_stock','$account_data','language','748884XjITyf','aggregate','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','email','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','wms_data','English','/data/All','Spanish','wms_account_id','$wms_data','id_transaction_from','gross_price','$wms_account_id','German','Sales\x20Add\x20successfully','/data/data_loc','</thead>','$product_details.product_name','padStart','307824PePYgy','secondary_code','get','<html><head><title></title>','wms_account_date','/:id','json','$product_details','/../public','image','prod_cat','uuid','room_name','$room','params','../public/language/languages.json','invoice_init','_id','date_data','production_date','Portuguese\x20(BR)','Arabic','mongoose','<span>\x20Request\x20Date:\x20<b>','batch_code','</b></span>\x20<br><br>','bay','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','warehouse_id','stock','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','post','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','findById','<tr>','product_cat','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','express','French','log','findOne','<span>\x20Request\x20ID:\x20<b>','errors','port','<strong>\x20Regards\x20</strong>','level','abs','</div>','account_data','toString','Logo.png','back','body','<div>','</body></html>','Types','forEach','split','<hr\x20class=\x22my-3\x22>','702144VyfHTV','staffs','quantity','request_qty','</tbody>','nodemailer','secondary_unit','</td>','OUT-','sale_product','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','filter','success','push','</tr>','ObjectId','date','product_code','/view_sales_order/:id','230372VYVjaC','English\x20(US)','string','$accounting_account_id','length','$product_details.product_code','309400nmGics','/data/data_rack','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','save','qty','view_accounting_approval','</table>','<h2>\x20JEC\x20SMS\x20</h2>','accounting_account_id','find','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','/upload/','outgoing_invoice','mongodb','unit','prod_id','maxperunit','christian.villamer@jakagroup.com','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','invoice','createTransport','Router','data_loc','</head><body>','587986ZQMSRm','logo','warehouse_approval_All','$product_details.product_stock'];a0_0x5ac2=function(){return _0x294813;};return a0_0x5ac2();}