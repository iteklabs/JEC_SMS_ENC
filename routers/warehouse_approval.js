var a0_0x1f45e4=a0_0x2c96;(function(_0x3ddbd9,_0x111874){var _0x376f79=a0_0x2c96,_0x23a7b2=_0x3ddbd9();while(!![]){try{var _0x237e6a=parseInt(_0x376f79(0xd9))/0x1+parseInt(_0x376f79(0xba))/0x2*(parseInt(_0x376f79(0x110))/0x3)+-parseInt(_0x376f79(0x107))/0x4*(-parseInt(_0x376f79(0xb2))/0x5)+-parseInt(_0x376f79(0xf7))/0x6+parseInt(_0x376f79(0xf5))/0x7*(-parseInt(_0x376f79(0xa2))/0x8)+-parseInt(_0x376f79(0x95))/0x9+-parseInt(_0x376f79(0xcb))/0xa;if(_0x237e6a===_0x111874)break;else _0x23a7b2['push'](_0x23a7b2['shift']());}catch(_0x5d2297){_0x23a7b2['push'](_0x23a7b2['shift']());}}}(a0_0x2b55,0xc535a));const express=require(a0_0x1f45e4(0xa6)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x1f45e4(0x78)),auth=require(a0_0x1f45e4(0x114)),users=require(a0_0x1f45e4(0x8b)),excelJS=require(a0_0x1f45e4(0xee)),xlsx=require(a0_0x1f45e4(0xdf)),mongoose=require('mongoose'),{ObjectId}=require(a0_0x1f45e4(0x99)),nodemailer=require(a0_0x1f45e4(0xae));function a0_0x2c96(_0x25e5b0,_0x39eef2){var _0x2b55d0=a0_0x2b55();return a0_0x2c96=function(_0x2c96b5,_0x90cb21){_0x2c96b5=_0x2c96b5-0x75;var _0x1045eb=_0x2b55d0[_0x2c96b5];return _0x1045eb;},a0_0x2c96(_0x25e5b0,_0x39eef2);}router['get'](a0_0x1f45e4(0xf8),auth,async(_0x422659,_0x3ee3c8)=>{var _0x4b54dd=a0_0x1f45e4;try{const _0x2f44a1=await master_shop[_0x4b54dd(0xb7)](),_0x2b8545=_0x422659['user'],_0x3730c1=await profile[_0x4b54dd(0x117)]({'email':_0x2b8545[_0x4b54dd(0x8d)]}),_0x683e1f=await staff['findOne']({'email':_0x2b8545[_0x4b54dd(0x8d)]}),_0x557bcc=await customer[_0x4b54dd(0xb7)]({'agent_id':_0x683e1f[_0x4b54dd(0xbe)]}),_0x4e6a81=mongoose[_0x4b54dd(0x115)][_0x4b54dd(0xad)],_0x22ca4b=_0x422659[_0x4b54dd(0xc6)]['id'],_0x165750=await sales_order[_0x4b54dd(0xd2)](_0x22ca4b),_0x271022=await sales_order['aggregate']([{'$match':{'_id':_0x4e6a81(_0x22ca4b)}},{'$addFields':{'accounting_account_id':{'$toObjectId':'$accounting_account_id'}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':_0x4b54dd(0xc0),'localField':'accounting_account_id','foreignField':_0x4b54dd(0xbe),'as':'account_data'}},{'$unwind':'$account_data'},{'$lookup':{'from':'staffs','localField':_0x4b54dd(0xa3),'foreignField':_0x4b54dd(0xbe),'as':'wms_data'}},{'$unwind':'$wms_data'}]);if(_0x2f44a1[0x0][_0x4b54dd(0x8e)]=='English\x20(US)')var _0x3601c2=users['English'];else{if(_0x2f44a1[0x0][_0x4b54dd(0x8e)]=='Hindi')var _0x3601c2=users['Hindi'];else{if(_0x2f44a1[0x0][_0x4b54dd(0x8e)]==_0x4b54dd(0x90))var _0x3601c2=users[_0x4b54dd(0x90)];else{if(_0x2f44a1[0x0][_0x4b54dd(0x8e)]=='Spanish')var _0x3601c2=users['Spanish'];else{if(_0x2f44a1[0x0][_0x4b54dd(0x8e)]=='French')var _0x3601c2=users['French'];else{if(_0x2f44a1[0x0][_0x4b54dd(0x8e)]=='Portuguese\x20(BR)')var _0x3601c2=users[_0x4b54dd(0xca)];else{if(_0x2f44a1[0x0][_0x4b54dd(0x8e)]==_0x4b54dd(0xfd))var _0x3601c2=users[_0x4b54dd(0xfd)];else{if(_0x2f44a1[0x0][_0x4b54dd(0x8e)]==_0x4b54dd(0xc9))var _0x3601c2=users[_0x4b54dd(0x10f)];}}}}}}}_0x3ee3c8[_0x4b54dd(0x108)]('warehouse_approval',{'success':_0x422659[_0x4b54dd(0x112)]('success'),'errors':_0x422659['flash'](_0x4b54dd(0xa9)),'master_shop':_0x2f44a1,'profile':_0x3730c1,'role':_0x2b8545,'language':_0x3601c2,'customer':_0x557bcc,'sales_sa':_0x165750,'approvers':_0x271022[0x0],'the_id':_0x22ca4b});}catch(_0x4ce093){console['log'](_0x4ce093);}}),router['post'](a0_0x1f45e4(0xf8),auth,async(_0x458817,_0x26c269)=>{var _0x460ae5=a0_0x1f45e4;try{const {date:_0x4c754c,invoice_data:_0x1d6a39,wms_confirm:_0x4b4fc1,the_id_val:_0x11c130,prod_id:_0x428757,SCRN:_0x4a6249,ReqBy:_0x2ec571,dateofreq:_0xe41efa,PO_number:_0x39ae58,warehouse_name:_0x5d5452,typeservicesData:_0x2387d8,typevehicle:_0x482d99,destination:_0x3ea5a1,deliverydate:_0x276c45,driver:_0x335041,plate:_0x22158c,van:_0x429c25,DRSI:_0xa2eadd,TSU:_0x36e4ac,TFU:_0x1b5304,note:_0x3e4799}=_0x458817[_0x460ae5(0xc5)],_0x68a707=await sales_order[_0x460ae5(0xd2)](_0x11c130);if(typeof _0x428757==_0x460ae5(0xe7))var _0x1f8660=[_0x458817[_0x460ae5(0xc5)]['prod_id']],_0x406dd1=[_0x458817[_0x460ae5(0xc5)]['qty']],_0x20757c=[_0x458817[_0x460ae5(0xc5)][_0x460ae5(0x83)]];else var _0x1f8660=[..._0x458817[_0x460ae5(0xc5)][_0x460ae5(0xb9)]],_0x406dd1=[..._0x458817['body'][_0x460ae5(0xd3)]],_0x20757c=[..._0x458817[_0x460ae5(0xc5)][_0x460ae5(0x83)]];const _0x546112=_0x1f8660['map'](_0xb837ce=>{return _0xb837ce={'prod_id':_0xb837ce};});_0x20757c[_0x460ae5(0x102)]((_0x3148fb,_0xef3715)=>{var _0xd02496=_0x460ae5,_0x49bbc1=_0x3148fb['split']('~');_0x546112[_0xef3715]['warehouse_id']=_0x49bbc1[0x0],_0x546112[_0xef3715][_0xd02496(0x7d)]=_0x49bbc1[0x1];}),_0x406dd1['forEach']((_0x4ca823,_0x1b29b0)=>{var _0x5d1cc4=_0x460ae5;_0x546112[_0x1b29b0][_0x5d1cc4(0x7a)]=_0x4ca823;});var _0x27cf9e=[],_0x5cb070=[],_0x469348=[],_0x40d2dd=[],_0x1dceb1=[],_0x329325=[],_0x51b219=[],_0x6f9979=[],_0x365aed=[],_0x195b71=[],_0x348b71=[],_0x520a73=[],_0xa725a9=[],_0x2be52b=[],_0x353264=[],_0x440070=[],_0x5e87cf=[],_0x39b4a4=[],_0x170b79=[],_0x486032=[];for(let _0x59ea1d=0x0;_0x59ea1d<=_0x546112[_0x460ae5(0x82)]-0x1;_0x59ea1d++){const _0x224043=_0x546112[_0x59ea1d],_0x28f52f=mongoose[_0x460ae5(0x115)]['ObjectId'];var _0x46f415=await warehouse[_0x460ae5(0xf2)]([{'$match':{'_id':_0x28f52f(_0x224043['warehouse_id'])}},{'$unwind':'$product_details'},{'$match':{'product_details._id':_0x28f52f(_0x224043[_0x460ae5(0x7d)])}}]),_0x249f97=0x0;for(let _0x3e07f8=0x0;_0x3e07f8<=_0x46f415[_0x460ae5(0x82)]-0x1;_0x3e07f8++){var _0x4e2ecf=_0x46f415[_0x3e07f8];_0x4e2ecf['product_details'][_0x460ae5(0x103)]<_0x224043[_0x460ae5(0x7a)]&&_0x249f97++;}if(_0x249f97>0x0)return _0x458817[_0x460ae5(0x112)](_0x460ae5(0xa9),_0x460ae5(0xb5)),_0x26c269[_0x460ae5(0xd8)](_0x460ae5(0xd0));var _0x4c1d56=0x0;for(let _0x585eb8=0x0;_0x585eb8<=_0x46f415[_0x460ae5(0x82)]-0x1;_0x585eb8++){var _0x4e2ecf=_0x46f415[_0x585eb8];_0x4e2ecf[_0x460ae5(0x7f)][_0x460ae5(0x103)]>_0x224043[_0x460ae5(0x7a)]&&(_0x27cf9e[_0x460ae5(0x9c)](_0x4e2ecf[_0x460ae5(0x7f)][_0x460ae5(0xb4)]),_0x5cb070[_0x460ae5(0x9c)](_0x4e2ecf['product_details'][_0x460ae5(0x103)]),_0x469348['push'](_0x224043[_0x460ae5(0x7a)]),_0x40d2dd[_0x460ae5(0x9c)](_0x4e2ecf['product_details'][_0x460ae5(0xa5)]),_0x1dceb1[_0x460ae5(0x9c)](_0x4e2ecf[_0x460ae5(0x7f)][_0x460ae5(0xfc)]),_0x329325[_0x460ae5(0x9c)](_0x4e2ecf['product_details'][_0x460ae5(0xaf)]),_0x51b219['push'](_0x4e2ecf[_0x460ae5(0x7f)][_0x460ae5(0x109)]),_0x6f9979[_0x460ae5(0x9c)](_0x4e2ecf['product_details'][_0x460ae5(0xa4)]),_0x365aed[_0x460ae5(0x9c)](_0x4e2ecf[_0x460ae5(0x7f)][_0x460ae5(0x8f)]),_0x195b71[_0x460ae5(0x9c)](_0x4e2ecf['product_details']['secondary_unit']),_0x348b71[_0x460ae5(0x9c)](_0x4e2ecf['product_details'][_0x460ae5(0x77)]),_0x520a73[_0x460ae5(0x9c)](_0x4e2ecf[_0x460ae5(0x7f)][_0x460ae5(0xcc)]),_0xa725a9[_0x460ae5(0x9c)](_0x4e2ecf['product_details'][_0x460ae5(0x94)]),_0x2be52b['push'](_0x4e2ecf[_0x460ae5(0x7f)][_0x460ae5(0x80)]),_0x353264[_0x460ae5(0x9c)](_0x4e2ecf['product_details'][_0x460ae5(0xdd)]),_0x440070[_0x460ae5(0x9c)](_0x4e2ecf['room']),_0x5e87cf[_0x460ae5(0x9c)](_0x4e2ecf[_0x460ae5(0x7f)][_0x460ae5(0x116)]),_0x39b4a4[_0x460ae5(0x9c)](_0x4e2ecf[_0x460ae5(0x7f)]['_id']),_0x170b79[_0x460ae5(0x9c)](_0x4e2ecf[_0x460ae5(0x7f)][_0x460ae5(0xaa)]),_0x486032[_0x460ae5(0x9c)](_0x4e2ecf[_0x460ae5(0x7f)]['gross_price']),_0x4c1d56++);}}const _0x6db759=_0x27cf9e['map'](_0x94c4c8=>{return _0x94c4c8={'product_name':_0x94c4c8};});_0x5cb070['forEach']((_0x52fb94,_0x45609a)=>{var _0x4dd282=_0x460ae5;_0x6db759[_0x45609a][_0x4dd282(0xdc)]=_0x52fb94;}),_0x469348[_0x460ae5(0x102)]((_0x166cf9,_0x241dc1)=>{var _0x2dfee1=_0x460ae5;_0x6db759[_0x241dc1][_0x2dfee1(0x105)]=Math[_0x2dfee1(0xa7)](_0x166cf9);}),_0x486032[_0x460ae5(0x102)]((_0x1b1a5e,_0x4eba24)=>{_0x6db759[_0x4eba24]['gross_price']=_0x1b1a5e;}),_0x170b79[_0x460ae5(0x102)]((_0x7a39d3,_0x24bac2)=>{var _0x2f5127=_0x460ae5;_0x6db759[_0x24bac2][_0x2f5127(0xaa)]=_0x7a39d3;}),_0x39b4a4['forEach']((_0x5edb00,_0x256a18)=>{var _0x53fd7f=_0x460ae5;_0x6db759[_0x256a18][_0x53fd7f(0xd1)]=_0x5edb00;}),_0x40d2dd[_0x460ae5(0x102)]((_0x2212d9,_0x1cb6f1)=>{var _0x228aea=_0x460ae5;_0x6db759[_0x1cb6f1][_0x228aea(0xa5)]=_0x2212d9;}),_0x1dceb1[_0x460ae5(0x102)]((_0x965082,_0x157eab)=>{var _0x4fd39c=_0x460ae5;_0x6db759[_0x157eab][_0x4fd39c(0xfc)]=_0x965082;}),_0x329325[_0x460ae5(0x102)]((_0x25b3fe,_0x4e39bd)=>{var _0x1ae305=_0x460ae5;_0x6db759[_0x4e39bd][_0x1ae305(0xaf)]=_0x25b3fe;}),_0x51b219['forEach']((_0x48b35b,_0x25e23d)=>{var _0xe4f11d=_0x460ae5;_0x6db759[_0x25e23d][_0xe4f11d(0x109)]=_0x48b35b;}),_0x6f9979['forEach']((_0x1124e6,_0x375ae7)=>{var _0x587a1f=_0x460ae5;_0x6db759[_0x375ae7][_0x587a1f(0xa4)]=_0x1124e6;}),_0x365aed[_0x460ae5(0x102)]((_0x2e623f,_0x37d26b)=>{var _0x2025f4=_0x460ae5;_0x6db759[_0x37d26b][_0x2025f4(0x8f)]=_0x2e623f;}),_0x195b71[_0x460ae5(0x102)]((_0x59a79f,_0x3ced91)=>{var _0x40deae=_0x460ae5;_0x6db759[_0x3ced91][_0x40deae(0xf4)]=_0x59a79f;}),_0x348b71[_0x460ae5(0x102)]((_0x266363,_0x114359)=>{var _0x1e7995=_0x460ae5;_0x6db759[_0x114359][_0x1e7995(0x77)]=_0x266363;}),_0x520a73['forEach']((_0x1183fa,_0x457259)=>{_0x6db759[_0x457259]['expiry_date']=_0x1183fa;}),_0xa725a9[_0x460ae5(0x102)]((_0x7c8a71,_0x1fc20e)=>{var _0xc620db=_0x460ae5;_0x6db759[_0x1fc20e][_0xc620db(0x94)]=_0x7c8a71;}),_0x2be52b[_0x460ae5(0x102)]((_0x12860a,_0x29f68b)=>{_0x6db759[_0x29f68b]['maxperunit']=_0x12860a;}),_0x353264[_0x460ae5(0x102)]((_0x18af5d,_0x2b1e71)=>{_0x6db759[_0x2b1e71]['prod_cat']=_0x18af5d;}),_0x440070[_0x460ae5(0x102)]((_0x1804dc,_0x465063)=>{_0x6db759[_0x465063]['room_name']=_0x1804dc;}),_0x5e87cf[_0x460ae5(0x102)]((_0x3e8824,_0x1dd307)=>{var _0x70576e=_0x460ae5;_0x6db759[_0x1dd307]['invoice']=_0x3e8824,_0x6db759[_0x1dd307][_0x70576e(0xa0)]=_0x4c754c;});const _0x54b4c6=new invoice_for_outgoing();await _0x54b4c6[_0x460ae5(0x7c)](),_0x5e87cf[_0x460ae5(0x102)]((_0x1e7202,_0x5adf30)=>{var _0x2747d9=_0x460ae5;_0x6db759[_0x5adf30][_0x2747d9(0xd4)]=_0x2747d9(0x81)+_0x54b4c6[_0x2747d9(0x84)][_0x2747d9(0xc3)]()['padStart'](0x8,'0');});const _0x470def=_0x6db759[_0x460ae5(0xf3)](_0x2f694d=>_0x2f694d[_0x460ae5(0x105)]!=='0'&&_0x2f694d[_0x460ae5(0x105)]!==''),_0x214980=new sales_finished({'invoice':'OUT-'+_0x54b4c6[_0x460ae5(0x84)][_0x460ae5(0xc3)]()[_0x460ae5(0xea)](0x8,'0'),'date':_0x4c754c,'warehouse_name':_0x5d5452,'sale_product':_0x470def,'note':_0x3e4799,'SCRN':_0x4a6249,'finalize':'False','ReqBy':_0x2ec571,'dateofreq':_0xe41efa,'PO_number':_0x39ae58,'typeservicesData':_0x2387d8,'typevehicle':_0x482d99,'destination':_0x3ea5a1,'deliverydate':_0x276c45,'driver':_0x335041,'plate':_0x22158c,'van':_0x429c25,'DRSI':_0xa2eadd,'TSU':_0x36e4ac,'TFU':_0x1b5304}),_0x27978c=await _0x214980[_0x460ae5(0x7c)](),_0x5158a9=new Date(),_0x59553a=_0x5158a9[_0x460ae5(0x10b)]();_0x68a707[_0x460ae5(0xa8)]=_0x4b4fc1,_0x68a707['wms_account_date']=_0x59553a,_0x68a707[_0x460ae5(0xfe)]=_0x460ae5(0x81)+_0x54b4c6[_0x460ae5(0x84)][_0x460ae5(0xc3)]()[_0x460ae5(0xea)](0x8,'0'),_0x68a707[_0x460ae5(0x9b)]=_0x27978c[_0x460ae5(0xbe)],await _0x68a707[_0x460ae5(0x7c)]();const _0x262024=await master_shop[_0x460ae5(0xb7)](),_0x5343df=await email_settings['findOne']();let _0x216e23=nodemailer[_0x460ae5(0x100)]({'host':_0x5343df[_0x460ae5(0xe2)],'port':Number(_0x5343df[_0x460ae5(0x10c)]),'secure':![],'auth':{'user':_0x5343df[_0x460ae5(0x8d)],'pass':_0x5343df[_0x460ae5(0xc4)]}});const _0x1d0a4e=_0x458817[_0x460ae5(0xde)]+_0x460ae5(0xb0)+_0x458817[_0x460ae5(0xe5)]['host'];var _0xaa8c8a=_0x68a707[_0x460ae5(0x8c)],_0x52f55b='',_0x1fd479,_0x4e1366=0x0;for(_0x1fd479 in _0xaa8c8a){_0x52f55b+=_0x460ae5(0x79)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xaa8c8a[_0x1fd479][_0x460ae5(0xb4)]+_0x460ae5(0x7e)+_0x460ae5(0xda)+_0xaa8c8a[_0x1fd479][_0x460ae5(0xaf)]+'</td>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0xaa8c8a[_0x1fd479][_0x460ae5(0x105)]+_0x460ae5(0x7e)+_0x460ae5(0xda)+_0xaa8c8a[_0x1fd479][_0x460ae5(0x8f)]+_0x460ae5(0x7e)+_0x460ae5(0xbc),_0x4e1366+=parseInt(_0xaa8c8a[_0x1fd479][_0x460ae5(0x105)]);}let _0x144145={'from':_0x5343df[_0x460ae5(0x8d)],'to':'christian.villamer@jakagroup.com','subject':_0x460ae5(0xf1),'attachments':[{'filename':_0x460ae5(0xed),'path':__dirname+_0x460ae5(0x76)+_0x460ae5(0xbb)+_0x262024[0x0][_0x460ae5(0x86)],'cid':'logo'}],'html':_0x460ae5(0xff)+'<html><head><title></title>'+'<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>'+_0x460ae5(0xef)+_0x460ae5(0x93)+_0x460ae5(0xa1)+_0x460ae5(0x93)+_0x460ae5(0x88)+_0x460ae5(0xec)+_0x460ae5(0x93)+'<h2>\x20JEC\x20SMS\x20</h2>'+_0x460ae5(0xec)+_0x460ae5(0xec)+_0x460ae5(0x10d)+_0x460ae5(0x93)+_0x460ae5(0xec)+_0x460ae5(0x93)+_0x460ae5(0xb3)+_0x460ae5(0xec)+'<div>'+_0x460ae5(0xe0)+_0x68a707['invoice']+_0x460ae5(0x97)+'<span>\x20Request\x20Date:\x20<b>'+_0x68a707[_0x460ae5(0xf9)]+_0x460ae5(0x10e)+'</div>'+_0x460ae5(0x92)+_0x460ae5(0x106)+_0x460ae5(0x79)+_0x460ae5(0xac)+_0x460ae5(0xb6)+_0x460ae5(0xe1)+_0x460ae5(0xbf)+_0x460ae5(0xbc)+_0x460ae5(0xfa)+_0x460ae5(0xe9)+'\x20'+_0x52f55b+'\x20'+'</tbody>'+_0x460ae5(0x8a)+_0x460ae5(0x93)+_0x460ae5(0xce)+_0x460ae5(0xc8)+_0x460ae5(0x9f)+_0x460ae5(0xec)+_0x460ae5(0x93)+_0x460ae5(0xe3)+_0x460ae5(0x89)+_0x460ae5(0xec)+_0x460ae5(0xec)+_0x460ae5(0x96)+_0x460ae5(0xc2)};_0x216e23[_0x460ae5(0xb1)](_0x144145,function(_0x4a371e,_0x49bc28){var _0x24b7ee=_0x460ae5;_0x4a371e?(console[_0x24b7ee(0xc1)](_0x4a371e),console[_0x24b7ee(0xc1)](_0x24b7ee(0xd5))):console[_0x24b7ee(0xc1)](_0x24b7ee(0xbd));}),_0x458817[_0x460ae5(0x112)](_0x460ae5(0x85),'Sales\x20Add\x20successfully'),_0x26c269[_0x460ae5(0xd8)](_0x460ae5(0x10a)+_0x27978c[_0x460ae5(0xbe)]),_0x26c269[_0x460ae5(0xcf)](_0x470def);return;}catch(_0x594876){}}),router[a0_0x1f45e4(0x111)](a0_0x1f45e4(0x9e),auth,async(_0x194dd2,_0x2432cb)=>{var _0x2ca56e=a0_0x1f45e4;try{const _0x55d588=await master_shop['find'](),_0xb103c9=_0x194dd2[_0x2ca56e(0xfb)],_0x1c2572=await profile[_0x2ca56e(0x117)]({'email':_0xb103c9[_0x2ca56e(0x8d)]}),_0x363008=await staff[_0x2ca56e(0x117)]({'email':_0xb103c9['email']}),_0x5a3ef5=await customer[_0x2ca56e(0xb7)]({'agent_id':_0x363008[_0x2ca56e(0xbe)]}),_0x1335af=mongoose[_0x2ca56e(0x115)]['ObjectId'],_0x4b7f52=_0x194dd2[_0x2ca56e(0xc6)]['id'],_0x4e3d17=await sales_order[_0x2ca56e(0xd2)](_0x4b7f52),_0x3dde95=await sales_order[_0x2ca56e(0xf2)]([{'$match':{'_id':_0x1335af(_0x4b7f52)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x2ca56e(0x98)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':_0x2ca56e(0xc0),'localField':'accounting_account_id','foreignField':_0x2ca56e(0xbe),'as':'account_data'}},{'$unwind':_0x2ca56e(0xab)},{'$lookup':{'from':_0x2ca56e(0xc0),'localField':'wms_account_id','foreignField':_0x2ca56e(0xbe),'as':'wms_data'}},{'$unwind':_0x2ca56e(0xe4)}]);if(_0x55d588[0x0]['language']==_0x2ca56e(0xb8))var _0x4b41d6=users[_0x2ca56e(0xd6)];else{if(_0x55d588[0x0]['language']==_0x2ca56e(0x7b))var _0x4b41d6=users[_0x2ca56e(0x7b)];else{if(_0x55d588[0x0][_0x2ca56e(0x8e)]=='German')var _0x4b41d6=users['German'];else{if(_0x55d588[0x0][_0x2ca56e(0x8e)]=='Spanish')var _0x4b41d6=users[_0x2ca56e(0xcd)];else{if(_0x55d588[0x0][_0x2ca56e(0x8e)]==_0x2ca56e(0x9a))var _0x4b41d6=users[_0x2ca56e(0x9a)];else{if(_0x55d588[0x0][_0x2ca56e(0x8e)]==_0x2ca56e(0xdb))var _0x4b41d6=users[_0x2ca56e(0xca)];else{if(_0x55d588[0x0][_0x2ca56e(0x8e)]==_0x2ca56e(0xfd))var _0x4b41d6=users['Chinese'];else{if(_0x55d588[0x0][_0x2ca56e(0x8e)]==_0x2ca56e(0xc9))var _0x4b41d6=users['Arabic'];}}}}}}}_0x2432cb['render'](_0x2ca56e(0xc7),{'success':_0x194dd2[_0x2ca56e(0x112)]('success'),'errors':_0x194dd2[_0x2ca56e(0x112)](_0x2ca56e(0xa9)),'master_shop':_0x55d588,'profile':_0x1c2572,'role':_0xb103c9,'language':_0x4b41d6,'customer':_0x5a3ef5,'sales_sa':_0x4e3d17,'approvers':_0x3dde95[0x0],'the_id':_0x4b7f52});}catch(_0x4ec4db){console[_0x2ca56e(0xc1)](_0x4ec4db);}}),router[a0_0x1f45e4(0xe8)]('/data/data_rack',auth,async(_0x61eac0,_0x4eff71)=>{var _0x4d9d71=a0_0x1f45e4;try{const {warehouse_name:_0x342130,product_code:_0x490444}=_0x61eac0[_0x4d9d71(0xc5)],_0x54f1a5=await warehouse[_0x4d9d71(0xf2)]([{'$match':{'name':_0x342130}},{'$unwind':_0x4d9d71(0xf6)},{'$match':{'product_details.product_code':_0x490444}},{'$group':{'_id':{'room':_0x4d9d71(0x104),'_id':_0x4d9d71(0xe6)}}}]);_0x4eff71[_0x4d9d71(0xcf)](_0x54f1a5);}catch(_0x3c18e9){}}),router[a0_0x1f45e4(0xe8)](a0_0x1f45e4(0xd7),auth,async(_0x4c4b03,_0x221a4e)=>{var _0x237eca=a0_0x1f45e4;try{const {warehouse_name:_0x4f4c1b,product_code:_0x14b499,room_name:_0x48c1bb}=_0x4c4b03[_0x237eca(0xc5)];console['log'](_0x4c4b03['body']);const _0x50bdd3=await warehouse[_0x237eca(0xf2)]([{'$match':{'name':_0x4f4c1b,'room':_0x48c1bb}},{'$unwind':_0x237eca(0xf6)},{'$match':{'product_details.product_code':_0x14b499}},{'$group':{'_id':{'main_id':_0x237eca(0xe6),'detl_id':_0x237eca(0x87),'product_name':_0x237eca(0x9d),'product_code':_0x237eca(0xf0),'level':_0x237eca(0x91),'bay':'$product_details.bay','stocks':_0x237eca(0x113)}}}]);_0x221a4e['json'](_0x50bdd3);}catch(_0x3b6df4){}}),router[a0_0x1f45e4(0x111)](a0_0x1f45e4(0x75),auth,async(_0x1bbfe3,_0x266de0)=>{var _0x211d4f=a0_0x1f45e4;try{const {sttaff_id:_0x417b7f,email:_0x543539,warehouse:_0x3cbe08}=_0x1bbfe3[_0x211d4f(0xfb)],_0x2a0499=await master_shop[_0x211d4f(0xb7)](),_0x2641dd=_0x1bbfe3[_0x211d4f(0xfb)],_0x197033=await profile['findOne']({'email':_0x2641dd[_0x211d4f(0x8d)]}),_0x502f9c=await sales_order[_0x211d4f(0xb7)]({'wms_account_id':_0x417b7f});if(_0x2a0499[0x0][_0x211d4f(0x8e)]==_0x211d4f(0xb8))var _0x5915b9=users[_0x211d4f(0xd6)];else{if(_0x2a0499[0x0][_0x211d4f(0x8e)]=='Hindi')var _0x5915b9=users[_0x211d4f(0x7b)];else{if(_0x2a0499[0x0][_0x211d4f(0x8e)]==_0x211d4f(0x90))var _0x5915b9=users[_0x211d4f(0x90)];else{if(_0x2a0499[0x0][_0x211d4f(0x8e)]=='Spanish')var _0x5915b9=users[_0x211d4f(0xcd)];else{if(_0x2a0499[0x0][_0x211d4f(0x8e)]==_0x211d4f(0x9a))var _0x5915b9=users[_0x211d4f(0x9a)];else{if(_0x2a0499[0x0]['language']=='Portuguese\x20(BR)')var _0x5915b9=users[_0x211d4f(0xca)];else{if(_0x2a0499[0x0][_0x211d4f(0x8e)]==_0x211d4f(0xfd))var _0x5915b9=users[_0x211d4f(0xfd)];else{if(_0x2a0499[0x0][_0x211d4f(0x8e)]==_0x211d4f(0xc9))var _0x5915b9=users[_0x211d4f(0x10f)];}}}}}}}_0x266de0[_0x211d4f(0x108)](_0x211d4f(0x101),{'success':_0x1bbfe3[_0x211d4f(0x112)](_0x211d4f(0x85)),'errors':_0x1bbfe3[_0x211d4f(0x112)]('errors'),'master_shop':_0x2a0499,'profile':_0x197033,'role':_0x2641dd,'language':_0x5915b9,'sales_order':_0x502f9c});}catch(_0x495390){}}),module[a0_0x1f45e4(0xeb)]=router;function a0_0x2b55(){var _0x38e927=['protocol','xlsx','<span>\x20Request\x20ID:\x20<b>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','host','<strong>\x20Regards\x20</strong>','$wms_data','headers','$_id','string','post','<tbody\x20style=\x22text-align:\x20center;\x22>','padStart','exports','</div>','Logo.png','exceljs','</head><body>','$product_details.product_code','Email\x20for\x20Customer','aggregate','filter','secondary_unit','68964HnVOzo','$product_details','1414578pHCBem','/:id','date','</thead>','user','secondary_code','Chinese','document_number_out','<!DOCTYPE\x20html>','createTransport','warehouse_approval_All','forEach','product_stock','$room','quantity','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','12wgaDlP','render','level','/all_sales_finished/preview/','toLocaleDateString','port','<hr\x20class=\x22my-3\x22>','</b></span>\x20<br><br>','Arabic','12LPTpyI','get','flash','$product_details.product_stock','../middleware/auth','Types','invoice','findOne','/data/All','/../public','batch_code','../models/all_models','<tr>','request_qty','Hindi','save','warehouse_detl','</td>','product_details','maxPerUnit','OUT-','length','data_loc','invoice_init','success','image','$product_details._id','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','<h5>\x20JEC\x20SMS\x20</h5>','</table>','../public/language/languages.json','sale_product','email','language','unit','German','$product_details.level','<table\x20style=\x22width:\x20100%\x20!important;\x22>','<div>','production_date','1702512CGToYi','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','</b></span>\x20<br>','$accounting_account_id','mongodb','French','outgoing_id','push','$product_details.product_name','/view_sales_order/:id','<br><br><br>','date_data','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','728lbzqJr','wms_account_id','bay','primary_code','express','abs','wms_account_confirm','errors','uuid','$account_data','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','ObjectId','nodemailer','product_code','://','sendMail','1780345OxDYAR','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','product_name','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','find','English\x20(US)','prod_id','176448eKkyKj','/upload/','</tr>','Email\x20sent\x20successfully','_id','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','staffs','log','</body></html>','toString','password','body','params','view_accounting_approval','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','Arabic\x20(ae)','Portuguese','8359420JofItq','expiry_date','Spanish','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','json','back','id_transaction_from','findById','qty','outgoing_invoice','Error\x20Occurs','English','/data/data_loc','redirect','1544072creBpH','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','Portuguese\x20(BR)','stock','product_cat'];a0_0x2b55=function(){return _0x38e927;};return a0_0x2b55();}