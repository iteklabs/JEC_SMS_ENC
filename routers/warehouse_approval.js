var a0_0x460788=a0_0x3251;(function(_0x34fb7c,_0x2e321c){var _0xf3eb3d=a0_0x3251,_0x6b04fc=_0x34fb7c();while(!![]){try{var _0x2ac503=parseInt(_0xf3eb3d(0xd6))/0x1+parseInt(_0xf3eb3d(0x9b))/0x2+parseInt(_0xf3eb3d(0x110))/0x3+parseInt(_0xf3eb3d(0xc6))/0x4+parseInt(_0xf3eb3d(0xbb))/0x5+parseInt(_0xf3eb3d(0xc9))/0x6*(parseInt(_0xf3eb3d(0xfa))/0x7)+-parseInt(_0xf3eb3d(0xf0))/0x8*(parseInt(_0xf3eb3d(0x9e))/0x9);if(_0x2ac503===_0x2e321c)break;else _0x6b04fc['push'](_0x6b04fc['shift']());}catch(_0x30545b){_0x6b04fc['push'](_0x6b04fc['shift']());}}}(a0_0x2032,0x9e447));const express=require(a0_0x460788(0xee)),app=express(),router=express[a0_0x460788(0x102)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x460788(0xf9)),auth=require('../middleware/auth'),users=require(a0_0x460788(0x89)),excelJS=require(a0_0x460788(0x100)),xlsx=require('xlsx'),mongoose=require(a0_0x460788(0x99)),{ObjectId}=require('mongodb'),nodemailer=require(a0_0x460788(0xf5));router['get']('/:id',auth,async(_0x10a4bc,_0x1ccab6)=>{var _0x139aa4=a0_0x460788;try{const _0x1cf404=await master_shop[_0x139aa4(0x114)](),_0x6deaab=_0x10a4bc[_0x139aa4(0xe7)],_0x59cdc5=await profile[_0x139aa4(0xea)]({'email':_0x6deaab[_0x139aa4(0xc5)]}),_0x28d55d=await staff[_0x139aa4(0xea)]({'email':_0x6deaab['email']}),_0x1f52c5=await customer[_0x139aa4(0x114)]({'agent_id':_0x28d55d['_id']}),_0xf9c086=mongoose[_0x139aa4(0x8a)]['ObjectId'],_0x5c4ab3=_0x10a4bc['params']['id'],_0x5ce26f=await sales_order['findById'](_0x5c4ab3),_0x28e0cb=await sales_order[_0x139aa4(0xa5)]([{'$match':{'_id':_0xf9c086(_0x5c4ab3)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x139aa4(0xa7)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x139aa4(0xa4)}}},{'$lookup':{'from':_0x139aa4(0xcb),'localField':_0x139aa4(0x108),'foreignField':'_id','as':_0x139aa4(0xa2)}},{'$unwind':_0x139aa4(0xda)},{'$lookup':{'from':'staffs','localField':_0x139aa4(0xb2),'foreignField':'_id','as':_0x139aa4(0xb3)}},{'$unwind':_0x139aa4(0x122)}]);if(_0x1cf404[0x0][_0x139aa4(0xaa)]==_0x139aa4(0xe6))var _0x11c9ac=users[_0x139aa4(0xf3)];else{if(_0x1cf404[0x0][_0x139aa4(0xaa)]==_0x139aa4(0xd3))var _0x11c9ac=users[_0x139aa4(0xd3)];else{if(_0x1cf404[0x0][_0x139aa4(0xaa)]==_0x139aa4(0xd9))var _0x11c9ac=users[_0x139aa4(0xd9)];else{if(_0x1cf404[0x0][_0x139aa4(0xaa)]==_0x139aa4(0x9d))var _0x11c9ac=users[_0x139aa4(0x9d)];else{if(_0x1cf404[0x0][_0x139aa4(0xaa)]=='French')var _0x11c9ac=users[_0x139aa4(0xab)];else{if(_0x1cf404[0x0][_0x139aa4(0xaa)]==_0x139aa4(0x120))var _0x11c9ac=users[_0x139aa4(0xd1)];else{if(_0x1cf404[0x0][_0x139aa4(0xaa)]==_0x139aa4(0x8d))var _0x11c9ac=users[_0x139aa4(0x8d)];else{if(_0x1cf404[0x0][_0x139aa4(0xaa)]=='Arabic\x20(ae)')var _0x11c9ac=users[_0x139aa4(0x9c)];}}}}}}}_0x1ccab6[_0x139aa4(0xdb)](_0x139aa4(0xd4),{'success':_0x10a4bc[_0x139aa4(0xdf)]('success'),'errors':_0x10a4bc[_0x139aa4(0xdf)](_0x139aa4(0x11f)),'master_shop':_0x1cf404,'profile':_0x59cdc5,'role':_0x6deaab,'language':_0x11c9ac,'customer':_0x1f52c5,'sales_sa':_0x5ce26f,'approvers':_0x28e0cb[0x0],'the_id':_0x5c4ab3});}catch(_0xa4eded){console[_0x139aa4(0x121)](_0xa4eded);}}),router[a0_0x460788(0x111)]('/:id',auth,async(_0x4d6767,_0x58ab98)=>{var _0x347931=a0_0x460788;try{const {date:_0x1213be,invoice_data:_0x449032,wms_confirm:_0x47609a,the_id_val:_0x4dbd5b,prod_id:_0x502630,SCRN:_0x45ab79,ReqBy:_0x43459c,dateofreq:_0x4ad35b,PO_number:_0x3091b8,warehouse_name:_0x8a4c56,typeservicesData:_0x4c7616,typevehicle:_0x10ebda,destination:_0x34c657,deliverydate:_0x384d4f,driver:_0x133446,plate:_0x2808e7,van:_0x573803,DRSI:_0x542431,TSU:_0x18f43b,TFU:_0x4799c7,note:_0x29f3c7}=_0x4d6767['body'],_0x389139=await sales_order[_0x347931(0x93)](_0x4dbd5b);if(typeof _0x502630=='string')var _0xe7a67d=[_0x4d6767[_0x347931(0xb0)]['prod_id']],_0x418bf3=[_0x4d6767[_0x347931(0xb0)][_0x347931(0xcc)]],_0x476092=[_0x4d6767[_0x347931(0xb0)]['data_loc']];else var _0xe7a67d=[..._0x4d6767[_0x347931(0xb0)]['prod_id']],_0x418bf3=[..._0x4d6767[_0x347931(0xb0)]['qty']],_0x476092=[..._0x4d6767[_0x347931(0xb0)][_0x347931(0xf2)]];const _0x1f7611=_0xe7a67d[_0x347931(0xce)](_0x3041f3=>{return _0x3041f3={'prod_id':_0x3041f3};});_0x476092['forEach']((_0x5d8e95,_0x379e05)=>{var _0x708f6d=_0x347931,_0x26df74=_0x5d8e95[_0x708f6d(0x124)]('~');_0x1f7611[_0x379e05][_0x708f6d(0xb5)]=_0x26df74[0x0],_0x1f7611[_0x379e05][_0x708f6d(0x90)]=_0x26df74[0x1];}),_0x418bf3[_0x347931(0x97)]((_0x295116,_0x45c229)=>{var _0x12a85d=_0x347931;_0x1f7611[_0x45c229][_0x12a85d(0x95)]=_0x295116;});var _0x51d6e5=[],_0x33f85f=[],_0x44c320=[],_0x1eb12e=[],_0x432188=[],_0x1fadd8=[],_0x4d293f=[],_0x434474=[],_0x1442a3=[],_0x28aefa=[],_0x470d56=[],_0x49ccd8=[],_0x1909e4=[],_0x111bf7=[],_0x5951c5=[],_0x5bf736=[],_0x4ea4e6=[],_0x2f4c5f=[],_0x6a70fa=[],_0x4e5615=[];for(let _0x10ead5=0x0;_0x10ead5<=_0x1f7611[_0x347931(0x10d)]-0x1;_0x10ead5++){const _0x21eeba=_0x1f7611[_0x10ead5],_0x29fdce=mongoose[_0x347931(0x8a)][_0x347931(0xf7)];var _0x4a232a=await warehouse[_0x347931(0xa5)]([{'$match':{'_id':_0x29fdce(_0x21eeba['warehouse_id'])}},{'$unwind':_0x347931(0xbf)},{'$match':{'product_details._id':_0x29fdce(_0x21eeba[_0x347931(0x90)])}}]),_0xc0b5d9=0x0;for(let _0x1363fc=0x0;_0x1363fc<=_0x4a232a[_0x347931(0x10d)]-0x1;_0x1363fc++){var _0x4920d7=_0x4a232a[_0x1363fc];_0x4920d7['product_details'][_0x347931(0xde)]<_0x21eeba[_0x347931(0x95)]&&_0xc0b5d9++;}if(_0xc0b5d9>0x0)return _0x4d6767['flash']('errors',_0x347931(0x103)),_0x58ab98['redirect'](_0x347931(0xae));var _0x5abd27=0x0;for(let _0x332f07=0x0;_0x332f07<=_0x4a232a[_0x347931(0x10d)]-0x1;_0x332f07++){var _0x4920d7=_0x4a232a[_0x332f07];_0x4920d7['product_details'][_0x347931(0xde)]>_0x21eeba['request_qty']&&(_0x51d6e5['push'](_0x4920d7[_0x347931(0xe1)][_0x347931(0xb7)]),_0x33f85f[_0x347931(0xf8)](_0x4920d7[_0x347931(0xe1)][_0x347931(0xde)]),_0x44c320[_0x347931(0xf8)](_0x21eeba['request_qty']),_0x1eb12e['push'](_0x4920d7['product_details']['primary_code']),_0x432188[_0x347931(0xf8)](_0x4920d7[_0x347931(0xe1)][_0x347931(0x8f)]),_0x1fadd8[_0x347931(0xf8)](_0x4920d7['product_details'][_0x347931(0xfc)]),_0x4d293f[_0x347931(0xf8)](_0x4920d7['product_details'][_0x347931(0xe2)]),_0x434474[_0x347931(0xf8)](_0x4920d7['product_details'][_0x347931(0x109)]),_0x1442a3[_0x347931(0xf8)](_0x4920d7[_0x347931(0xe1)][_0x347931(0x10f)]),_0x28aefa[_0x347931(0xf8)](_0x4920d7['product_details'][_0x347931(0xb4)]),_0x470d56[_0x347931(0xf8)](_0x4920d7[_0x347931(0xe1)][_0x347931(0xf6)]),_0x49ccd8[_0x347931(0xf8)](_0x4920d7[_0x347931(0xe1)][_0x347931(0xfe)]),_0x1909e4[_0x347931(0xf8)](_0x4920d7[_0x347931(0xe1)][_0x347931(0xeb)]),_0x111bf7['push'](_0x4920d7[_0x347931(0xe1)]['maxPerUnit']),_0x5951c5[_0x347931(0xf8)](_0x4920d7[_0x347931(0xe1)][_0x347931(0xfd)]),_0x5bf736['push'](_0x4920d7['room']),_0x4ea4e6[_0x347931(0xf8)](_0x4920d7['product_details']['invoice']),_0x2f4c5f['push'](_0x4920d7[_0x347931(0xe1)][_0x347931(0xd7)]),_0x6a70fa[_0x347931(0xf8)](_0x4920d7['product_details'][_0x347931(0xd5)]),_0x4e5615['push'](_0x4920d7[_0x347931(0xe1)]['gross_price']),_0x5abd27++);}}const _0x252935=_0x51d6e5['map'](_0x13dfbc=>{return _0x13dfbc={'product_name':_0x13dfbc};});_0x33f85f[_0x347931(0x97)]((_0x469dec,_0x3f7ac1)=>{var _0x35484d=_0x347931;_0x252935[_0x3f7ac1][_0x35484d(0x107)]=_0x469dec;}),_0x44c320['forEach']((_0x2e1083,_0x392a88)=>{var _0xd7923d=_0x347931;_0x252935[_0x392a88][_0xd7923d(0x105)]=Math['abs'](_0x2e1083);}),_0x4e5615['forEach']((_0x220b78,_0x46d90a)=>{var _0x513f23=_0x347931;_0x252935[_0x46d90a][_0x513f23(0x118)]=_0x220b78;}),_0x6a70fa[_0x347931(0x97)]((_0x557e62,_0x2bf121)=>{var _0x47e17a=_0x347931;_0x252935[_0x2bf121][_0x47e17a(0xd5)]=_0x557e62;}),_0x2f4c5f[_0x347931(0x97)]((_0x511a25,_0x13cfe7)=>{_0x252935[_0x13cfe7]['id_transaction_from']=_0x511a25;}),_0x1eb12e[_0x347931(0x97)]((_0x1fc13c,_0x170997)=>{var _0x280c9d=_0x347931;_0x252935[_0x170997][_0x280c9d(0xac)]=_0x1fc13c;}),_0x432188[_0x347931(0x97)]((_0x4100a1,_0x23fba7)=>{_0x252935[_0x23fba7]['secondary_code']=_0x4100a1;}),_0x1fadd8[_0x347931(0x97)]((_0x5bd627,_0x22da9e)=>{_0x252935[_0x22da9e]['product_code']=_0x5bd627;}),_0x4d293f['forEach']((_0x55b95e,_0x3d6af0)=>{var _0x36f445=_0x347931;_0x252935[_0x3d6af0][_0x36f445(0xe2)]=_0x55b95e;}),_0x434474[_0x347931(0x97)]((_0x4d6dff,_0x55b02b)=>{_0x252935[_0x55b02b]['bay']=_0x4d6dff;}),_0x1442a3[_0x347931(0x97)]((_0x1ce5e8,_0x32edef)=>{var _0x34a49c=_0x347931;_0x252935[_0x32edef][_0x34a49c(0x10f)]=_0x1ce5e8;}),_0x28aefa[_0x347931(0x97)]((_0x3f6ec5,_0x14d78a)=>{var _0x4a6b9f=_0x347931;_0x252935[_0x14d78a][_0x4a6b9f(0xb4)]=_0x3f6ec5;}),_0x470d56['forEach']((_0x5cd7c1,_0x5e7045)=>{var _0x4b1bc8=_0x347931;_0x252935[_0x5e7045][_0x4b1bc8(0xf6)]=_0x5cd7c1;}),_0x49ccd8[_0x347931(0x97)]((_0x1d8db5,_0xab7a0)=>{var _0x1d9135=_0x347931;_0x252935[_0xab7a0][_0x1d9135(0xfe)]=_0x1d8db5;}),_0x1909e4[_0x347931(0x97)]((_0x17ce21,_0x7f835e)=>{var _0x1e11d7=_0x347931;_0x252935[_0x7f835e][_0x1e11d7(0xeb)]=_0x17ce21;}),_0x111bf7[_0x347931(0x97)]((_0x2cf1d7,_0xb1c91c)=>{var _0x22c4e9=_0x347931;_0x252935[_0xb1c91c][_0x22c4e9(0xed)]=_0x2cf1d7;}),_0x5951c5[_0x347931(0x97)]((_0x258379,_0x175ba2)=>{var _0x3e5ebd=_0x347931;_0x252935[_0x175ba2][_0x3e5ebd(0xb8)]=_0x258379;}),_0x5bf736[_0x347931(0x97)]((_0x402e4a,_0xb191af)=>{var _0x3a1ace=_0x347931;_0x252935[_0xb191af][_0x3a1ace(0xfb)]=_0x402e4a;}),_0x4ea4e6[_0x347931(0x97)]((_0x411189,_0x88bfab)=>{var _0x1ff9b5=_0x347931;_0x252935[_0x88bfab][_0x1ff9b5(0xcf)]=_0x411189,_0x252935[_0x88bfab][_0x1ff9b5(0xc3)]=_0x1213be;});const _0x46b47d=new invoice_for_outgoing();await _0x46b47d[_0x347931(0xc7)](),_0x4ea4e6[_0x347931(0x97)]((_0x578f75,_0x46ca22)=>{var _0x55fb76=_0x347931;_0x252935[_0x46ca22][_0x55fb76(0xe4)]=_0x55fb76(0x10a)+_0x46b47d['invoice_init'][_0x55fb76(0x119)]()['padStart'](0x8,'0');});const _0x5e0a03=_0x252935[_0x347931(0x116)](_0x16a024=>_0x16a024[_0x347931(0x105)]!=='0'&&_0x16a024[_0x347931(0x105)]!==''),_0x29d784=new sales_finished({'invoice':_0x347931(0x10a)+_0x46b47d[_0x347931(0xc4)][_0x347931(0x119)]()[_0x347931(0xe3)](0x8,'0'),'date':_0x1213be,'warehouse_name':_0x8a4c56,'sale_product':_0x5e0a03,'note':_0x29f3c7,'SCRN':_0x45ab79,'finalize':'False','ReqBy':_0x43459c,'dateofreq':_0x4ad35b,'PO_number':_0x3091b8,'typeservicesData':_0x4c7616,'typevehicle':_0x10ebda,'destination':_0x34c657,'deliverydate':_0x384d4f,'driver':_0x133446,'plate':_0x2808e7,'van':_0x573803,'DRSI':_0x542431,'TSU':_0x18f43b,'TFU':_0x4799c7}),_0x2cbe27=await _0x29d784[_0x347931(0xc7)](),_0x1260fb=new Date(),_0x2f34a2=_0x1260fb['toLocaleDateString']();_0x389139['wms_account_confirm']=_0x47609a,_0x389139[_0x347931(0x8c)]=_0x2f34a2,_0x389139['document_number_out']=_0x347931(0x10a)+_0x46b47d[_0x347931(0xc4)][_0x347931(0x119)]()[_0x347931(0xe3)](0x8,'0'),_0x389139['outgoing_id']=_0x2cbe27[_0x347931(0xd7)],await _0x389139['save']();const _0x54625c=await master_shop['find'](),_0x469c5f=await email_settings[_0x347931(0xea)]();let _0x2562af=nodemailer[_0x347931(0x94)]({'host':_0x469c5f['host'],'port':Number(_0x469c5f[_0x347931(0x11c)]),'secure':![],'auth':{'user':_0x469c5f[_0x347931(0xc5)],'pass':_0x469c5f['password']}});const _0x1595a7=_0x4d6767[_0x347931(0xe5)]+_0x347931(0xcd)+_0x4d6767['headers'][_0x347931(0x10c)];var _0x118175=_0x389139[_0x347931(0x9f)],_0x960033='',_0x3b50a8,_0x2ce26b=0x0;for(_0x3b50a8 in _0x118175){_0x960033+=_0x347931(0x8b)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x118175[_0x3b50a8][_0x347931(0xb7)]+_0x347931(0x91)+_0x347931(0x115)+_0x118175[_0x3b50a8][_0x347931(0xfc)]+_0x347931(0x91)+_0x347931(0x115)+_0x118175[_0x3b50a8][_0x347931(0x105)]+_0x347931(0x91)+_0x347931(0x115)+_0x118175[_0x3b50a8][_0x347931(0x10f)]+_0x347931(0x91)+_0x347931(0xb9),_0x2ce26b+=parseInt(_0x118175[_0x3b50a8]['quantity']);}let _0x450220={'from':_0x469c5f[_0x347931(0xc5)],'to':'christian.villamer@jakagroup.com','subject':_0x347931(0xff),'attachments':[{'filename':_0x347931(0xe9),'path':__dirname+'/../public'+_0x347931(0xa9)+_0x54625c[0x0][_0x347931(0xd8)],'cid':'logo'}],'html':_0x347931(0x11b)+_0x347931(0xd2)+'<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>'+_0x347931(0xb6)+_0x347931(0xe8)+_0x347931(0x10e)+_0x347931(0xe8)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+_0x347931(0xe8)+_0x347931(0xc1)+_0x347931(0xa3)+_0x347931(0xa3)+'<hr\x20class=\x22my-3\x22>'+_0x347931(0xe8)+_0x347931(0xa3)+'<div>'+'<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>'+_0x347931(0xa3)+'<div>'+_0x347931(0xd0)+_0x389139[_0x347931(0xcf)]+_0x347931(0x98)+_0x347931(0xc2)+_0x389139['date']+_0x347931(0xbd)+_0x347931(0xa3)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+'<tr>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+_0x347931(0x92)+_0x347931(0xad)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x347931(0xb9)+_0x347931(0xf4)+_0x347931(0x11a)+'\x20'+_0x960033+'\x20'+_0x347931(0xa8)+_0x347931(0xb1)+_0x347931(0xe8)+_0x347931(0x104)+_0x347931(0xca)+_0x347931(0xaf)+_0x347931(0xa3)+'<div>'+_0x347931(0x96)+_0x347931(0xdd)+'</div>'+'</div>'+_0x347931(0xdc)+'</body></html>'};_0x2562af[_0x347931(0xa6)](_0x450220,function(_0x555e9d,_0x47f0be){var _0x4e03c7=_0x347931;_0x555e9d?(console[_0x4e03c7(0x121)](_0x555e9d),console['log'](_0x4e03c7(0x113))):console['log'](_0x4e03c7(0xa1));}),_0x4d6767['flash'](_0x347931(0x106),_0x347931(0xbe)),_0x58ab98[_0x347931(0xbc)](_0x347931(0x10b)+_0x2cbe27[_0x347931(0xd7)]),_0x58ab98[_0x347931(0xc8)](_0x5e0a03);return;}catch(_0x59463a){}}),router[a0_0x460788(0x117)](a0_0x460788(0x11d),auth,async(_0x44980c,_0x180de7)=>{var _0x120596=a0_0x460788;try{const _0x25fcc6=await master_shop['find'](),_0x1e1f8b=_0x44980c[_0x120596(0xe7)],_0x5a3fa4=await profile[_0x120596(0xea)]({'email':_0x1e1f8b['email']}),_0x44dbde=await staff[_0x120596(0xea)]({'email':_0x1e1f8b['email']}),_0x52ca03=await customer['find']({'agent_id':_0x44dbde['_id']}),_0xef92ce=mongoose[_0x120596(0x8a)][_0x120596(0xf7)],_0x49d12b=_0x44980c[_0x120596(0x101)]['id'],_0x30af14=await sales_order[_0x120596(0x93)](_0x49d12b),_0x57ad5f=await sales_order[_0x120596(0xa5)]([{'$match':{'_id':_0xef92ce(_0x49d12b)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x120596(0xa7)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':_0x120596(0xcb),'localField':_0x120596(0x108),'foreignField':'_id','as':_0x120596(0xa2)}},{'$unwind':_0x120596(0xda)},{'$lookup':{'from':_0x120596(0xcb),'localField':_0x120596(0xb2),'foreignField':_0x120596(0xd7),'as':_0x120596(0xb3)}},{'$unwind':_0x120596(0x122)}]);if(_0x25fcc6[0x0][_0x120596(0xaa)]==_0x120596(0xe6))var _0x3fec1c=users[_0x120596(0xf3)];else{if(_0x25fcc6[0x0][_0x120596(0xaa)]==_0x120596(0xd3))var _0x3fec1c=users[_0x120596(0xd3)];else{if(_0x25fcc6[0x0][_0x120596(0xaa)]==_0x120596(0xd9))var _0x3fec1c=users[_0x120596(0xd9)];else{if(_0x25fcc6[0x0][_0x120596(0xaa)]=='Spanish')var _0x3fec1c=users[_0x120596(0x9d)];else{if(_0x25fcc6[0x0][_0x120596(0xaa)]==_0x120596(0xab))var _0x3fec1c=users[_0x120596(0xab)];else{if(_0x25fcc6[0x0]['language']==_0x120596(0x120))var _0x3fec1c=users[_0x120596(0xd1)];else{if(_0x25fcc6[0x0][_0x120596(0xaa)]=='Chinese')var _0x3fec1c=users[_0x120596(0x8d)];else{if(_0x25fcc6[0x0][_0x120596(0xaa)]=='Arabic\x20(ae)')var _0x3fec1c=users['Arabic'];}}}}}}}_0x180de7[_0x120596(0xdb)]('view_accounting_approval',{'success':_0x44980c[_0x120596(0xdf)](_0x120596(0x106)),'errors':_0x44980c[_0x120596(0xdf)](_0x120596(0x11f)),'master_shop':_0x25fcc6,'profile':_0x5a3fa4,'role':_0x1e1f8b,'language':_0x3fec1c,'customer':_0x52ca03,'sales_sa':_0x30af14,'approvers':_0x57ad5f[0x0],'the_id':_0x49d12b});}catch(_0x42cd55){console[_0x120596(0x121)](_0x42cd55);}}),router[a0_0x460788(0x111)](a0_0x460788(0x11e),auth,async(_0xe5a8d9,_0x5c6171)=>{var _0x3f91ac=a0_0x460788;try{const {warehouse_name:_0x502b87,product_code:_0x350bfa}=_0xe5a8d9[_0x3f91ac(0xb0)],_0x1c3628=await warehouse[_0x3f91ac(0xa5)]([{'$match':{'name':_0x502b87}},{'$unwind':_0x3f91ac(0xbf)},{'$match':{'product_details.product_code':_0x350bfa}},{'$group':{'_id':{'room':_0x3f91ac(0xa0),'_id':_0x3f91ac(0xe0)}}}]);_0x5c6171[_0x3f91ac(0xc8)](_0x1c3628);}catch(_0x5b1650){}}),router[a0_0x460788(0x111)]('/data/data_loc',auth,async(_0x123fbd,_0x1c6c12)=>{var _0x1f951b=a0_0x460788;try{const {warehouse_name:_0x3e1470,product_code:_0x1edf9f,room_name:_0x2aa1ef}=_0x123fbd[_0x1f951b(0xb0)];console[_0x1f951b(0x121)](_0x123fbd['body']);const _0xb8bd2=await warehouse[_0x1f951b(0xa5)]([{'$match':{'name':_0x3e1470,'room':_0x2aa1ef}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x1edf9f}},{'$group':{'_id':{'main_id':'$_id','detl_id':_0x1f951b(0xef),'product_name':_0x1f951b(0xf1),'product_code':_0x1f951b(0xc0),'level':_0x1f951b(0x112),'bay':_0x1f951b(0x123),'stocks':_0x1f951b(0x9a)}}}]);_0x1c6c12[_0x1f951b(0xc8)](_0xb8bd2);}catch(_0x4286e6){}}),router[a0_0x460788(0x117)]('/data/All',auth,async(_0x210971,_0xb83c3d)=>{var _0x443afb=a0_0x460788;try{const {sttaff_id:_0x36cfbf,email:_0x109da1,warehouse:_0x4f3943}=_0x210971[_0x443afb(0xe7)],_0x4d3100=await master_shop[_0x443afb(0x114)](),_0xe27f41=_0x210971[_0x443afb(0xe7)],_0x260f59=await profile[_0x443afb(0xea)]({'email':_0xe27f41['email']}),_0x5ab426=await sales_order[_0x443afb(0x114)]({'wms_account_id':_0x36cfbf});if(_0x4d3100[0x0][_0x443afb(0xaa)]=='English\x20(US)')var _0x192039=users['English'];else{if(_0x4d3100[0x0][_0x443afb(0xaa)]==_0x443afb(0xd3))var _0x192039=users[_0x443afb(0xd3)];else{if(_0x4d3100[0x0][_0x443afb(0xaa)]==_0x443afb(0xd9))var _0x192039=users[_0x443afb(0xd9)];else{if(_0x4d3100[0x0][_0x443afb(0xaa)]=='Spanish')var _0x192039=users[_0x443afb(0x9d)];else{if(_0x4d3100[0x0][_0x443afb(0xaa)]==_0x443afb(0xab))var _0x192039=users['French'];else{if(_0x4d3100[0x0][_0x443afb(0xaa)]==_0x443afb(0x120))var _0x192039=users[_0x443afb(0xd1)];else{if(_0x4d3100[0x0][_0x443afb(0xaa)]=='Chinese')var _0x192039=users[_0x443afb(0x8d)];else{if(_0x4d3100[0x0][_0x443afb(0xaa)]==_0x443afb(0xba))var _0x192039=users[_0x443afb(0x9c)];}}}}}}}_0xb83c3d[_0x443afb(0xdb)](_0x443afb(0x8e),{'success':_0x210971['flash']('success'),'errors':_0x210971[_0x443afb(0xdf)](_0x443afb(0x11f)),'master_shop':_0x4d3100,'profile':_0x260f59,'role':_0xe27f41,'language':_0x192039,'sales_order':_0x5ab426});}catch(_0x32cb48){}}),module[a0_0x460788(0xec)]=router;function a0_0x3251(_0x3872d1,_0x1b7e25){var _0x203206=a0_0x2032();return a0_0x3251=function(_0x3251ef,_0x16e4c2){_0x3251ef=_0x3251ef-0x89;var _0x20e496=_0x203206[_0x3251ef];return _0x20e496;},a0_0x3251(_0x3872d1,_0x1b7e25);}function a0_0x2032(){var _0x332362=['$product_details.product_stock','1264304YOLEHN','Arabic','Spanish','9xxZrwC','sale_product','$room','Email\x20sent\x20successfully','account_data','</div>','$wms_account_id','aggregate','sendMail','$accounting_account_id','</tbody>','/upload/','language','French','primary_code','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','back','<br><br><br>','body','</table>','wms_account_id','wms_data','secondary_unit','warehouse_id','</head><body>','product_name','prod_cat','</tr>','Arabic\x20(ae)','2767215yxhyrZ','redirect','</b></span>\x20<br><br>','Sales\x20Add\x20successfully','$product_details','$product_details.product_code','<h2>\x20JEC\x20SMS\x20</h2>','<span>\x20Request\x20Date:\x20<b>','date_data','invoice_init','email','3835936ZhknDJ','save','json','445044aTibHv','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','staffs','qty','://','map','invoice','<span>\x20Request\x20ID:\x20<b>','Portuguese','<html><head><title></title>','Hindi','warehouse_approval','uuid','926821HkOWKZ','_id','image','German','$account_data','render','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','<h5>\x20JEC\x20SMS\x20</h5>','product_stock','flash','$_id','product_details','level','padStart','outgoing_invoice','protocol','English\x20(US)','user','<div>','Logo.png','findOne','production_date','exports','maxperunit','express','$product_details._id','34382664ZcxJvX','$product_details.product_name','data_loc','English','</thead>','nodemailer','batch_code','ObjectId','push','../models/all_models','84InuYtk','room_name','product_code','product_cat','expiry_date','Email\x20for\x20Customer','exceljs','params','Router','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','quantity','success','stock','accounting_account_id','bay','OUT-','/all_sales_finished/preview/','host','length','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','unit','2953824uQHbyK','post','$product_details.level','Error\x20Occurs','find','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','filter','get','gross_price','toString','<tbody\x20style=\x22text-align:\x20center;\x22>','<!DOCTYPE\x20html>','port','/view_sales_order/:id','/data/data_rack','errors','Portuguese\x20(BR)','log','$wms_data','$product_details.bay','split','../public/language/languages.json','Types','<tr>','wms_account_date','Chinese','warehouse_approval_All','secondary_code','warehouse_detl','</td>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','findById','createTransport','request_qty','<strong>\x20Regards\x20</strong>','forEach','</b></span>\x20<br>','mongoose'];a0_0x2032=function(){return _0x332362;};return a0_0x2032();}