var a0_0xddd8e5=a0_0x47c4;(function(_0x18a9af,_0x1cb56a){var _0x188976=a0_0x47c4,_0x17249e=_0x18a9af();while(!![]){try{var _0x508b7a=-parseInt(_0x188976(0x11e))/0x1*(parseInt(_0x188976(0x164))/0x2)+parseInt(_0x188976(0x15a))/0x3*(parseInt(_0x188976(0x16a))/0x4)+parseInt(_0x188976(0x177))/0x5+-parseInt(_0x188976(0x15e))/0x6+parseInt(_0x188976(0x172))/0x7*(-parseInt(_0x188976(0x151))/0x8)+-parseInt(_0x188976(0x15f))/0x9*(parseInt(_0x188976(0x15c))/0xa)+-parseInt(_0x188976(0x100))/0xb*(-parseInt(_0x188976(0x16d))/0xc);if(_0x508b7a===_0x1cb56a)break;else _0x17249e['push'](_0x17249e['shift']());}catch(_0x7bd6e9){_0x17249e['push'](_0x17249e['shift']());}}}(a0_0x7569,0x387ce));function a0_0x47c4(_0x480e1d,_0x25354d){var _0x75694e=a0_0x7569();return a0_0x47c4=function(_0x47c4bc,_0x2999a5){_0x47c4bc=_0x47c4bc-0xf8;var _0x4403a9=_0x75694e[_0x47c4bc];return _0x4403a9;},a0_0x47c4(_0x480e1d,_0x25354d);}const express=require(a0_0xddd8e5(0x14d)),app=express(),router=express[a0_0xddd8e5(0x126)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0xddd8e5(0x154)),auth=require('../middleware/auth'),users=require(a0_0xddd8e5(0xfc)),excelJS=require('exceljs'),xlsx=require(a0_0xddd8e5(0x115)),mongoose=require(a0_0xddd8e5(0x196)),{ObjectId}=require(a0_0xddd8e5(0x142)),nodemailer=require(a0_0xddd8e5(0x146));function a0_0x7569(){var _0x474730=['<!DOCTYPE\x20html>','body','warehouse_detl','/../public','$product_details.bay','stock','split','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','document_number_out','English','qty','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','False','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','invoice','xlsx','<tbody\x20style=\x22text-align:\x20center;\x22>','primary_code','flash','Chinese','product_details','<table\x20style=\x22width:\x20100%\x20!important;\x22>','<div>','json','26jULooU','product_cat','staffs','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','data_loc','date','$_id','success','Router','quantity','Hindi','bay','Arabic','wms_data','image','$product_details.level','port','email','$room','account_data','back','Spanish','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','render','maxperunit','redirect','warehouse_approval','christian.villamer@jakagroup.com','gross_price','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','post','/all_sales_finished/preview/','invoice_init','warehouse_id','forEach','user','mongodb','</b></span>\x20<br><br>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','/data/All','nodemailer','<span>\x20Request\x20ID:\x20<b>','map','level','sendMail','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','</body></html>','express','wms_account_confirm','</td>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','3280PysVDA','outgoing_invoice','uuid','../models/all_models','OUT-','host','production_date','English\x20(US)','$accounting_account_id','550110uZKOAo','push','1549720sdWEpQ','</b></span>\x20<br>','1385976sFflDO','18SishCR','</div>','Types','Logo.png','request_qty','3910DcaqLO','wms_account_id','</head><body>','<hr\x20class=\x22my-3\x22>','secondary_code','room','4VjEXOT','$wms_account_id','French','1465824lgSvck','Arabic\x20(ae)','params','product_name','_id','2807omFzkQ','</tbody>','abs','sale_product','headers','356360CacKyq','secondary_unit','get','find','://','errors','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','prod_id','German','exports','aggregate','toLocaleDateString','<span>\x20Request\x20Date:\x20<b>','Email\x20for\x20Customer','</thead>','batch_code','ObjectId','id_transaction_from','$product_details.product_stock','$product_details','<strong>\x20Regards\x20</strong>','/view_sales_order/:id','padStart','$product_details.product_name','<br><br><br>','<tr>','toString','findById','language','save','length','mongoose','<h2>\x20JEC\x20SMS\x20</h2>','unit','Portuguese','/data/data_rack','findOne','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','log','logo','product_stock','</tr>','../public/language/languages.json','Portuguese\x20(BR)','/:id','view_accounting_approval','66fpMThH','accounting_account_id','wms_account_date','$account_data','expiry_date','warehouse_approval_All'];a0_0x7569=function(){return _0x474730;};return a0_0x7569();}router[a0_0xddd8e5(0x179)](a0_0xddd8e5(0xfe),auth,async(_0x46fc25,_0x717b24)=>{var _0x478f72=a0_0xddd8e5;try{const _0x2b038f=await master_shop[_0x478f72(0x17a)](),_0x1d46d8=_0x46fc25[_0x478f72(0x141)],_0x4fb0f4=await profile[_0x478f72(0x19b)]({'email':_0x1d46d8[_0x478f72(0x12f)]}),_0x453d3f=await staff['findOne']({'email':_0x1d46d8[_0x478f72(0x12f)]}),_0x6b4e7e=await customer['find']({'agent_id':_0x453d3f[_0x478f72(0x171)]}),_0x49201b=mongoose['Types'][_0x478f72(0x187)],_0x3f3433=_0x46fc25[_0x478f72(0x16f)]['id'],_0x25209c=await sales_order['findById'](_0x3f3433),_0xcd851b=await sales_order[_0x478f72(0x181)]([{'$match':{'_id':_0x49201b(_0x3f3433)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x478f72(0x159)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x478f72(0x16b)}}},{'$lookup':{'from':_0x478f72(0x120),'localField':_0x478f72(0x101),'foreignField':_0x478f72(0x171),'as':_0x478f72(0x131)}},{'$unwind':_0x478f72(0x103)},{'$lookup':{'from':_0x478f72(0x120),'localField':_0x478f72(0x165),'foreignField':_0x478f72(0x171),'as':'wms_data'}},{'$unwind':'$wms_data'}]);if(_0x2b038f[0x0][_0x478f72(0x193)]==_0x478f72(0x158))var _0x51259c=users[_0x478f72(0x10f)];else{if(_0x2b038f[0x0][_0x478f72(0x193)]==_0x478f72(0x128))var _0x51259c=users[_0x478f72(0x128)];else{if(_0x2b038f[0x0]['language']==_0x478f72(0x17f))var _0x51259c=users[_0x478f72(0x17f)];else{if(_0x2b038f[0x0][_0x478f72(0x193)]==_0x478f72(0x133))var _0x51259c=users[_0x478f72(0x133)];else{if(_0x2b038f[0x0][_0x478f72(0x193)]==_0x478f72(0x16c))var _0x51259c=users['French'];else{if(_0x2b038f[0x0]['language']=='Portuguese\x20(BR)')var _0x51259c=users['Portuguese'];else{if(_0x2b038f[0x0][_0x478f72(0x193)]==_0x478f72(0x119))var _0x51259c=users['Chinese'];else{if(_0x2b038f[0x0][_0x478f72(0x193)]=='Arabic\x20(ae)')var _0x51259c=users[_0x478f72(0x12a)];}}}}}}}_0x717b24[_0x478f72(0x135)](_0x478f72(0x138),{'success':_0x46fc25['flash']('success'),'errors':_0x46fc25['flash'](_0x478f72(0x17c)),'master_shop':_0x2b038f,'profile':_0x4fb0f4,'role':_0x1d46d8,'language':_0x51259c,'customer':_0x6b4e7e,'sales_sa':_0x25209c,'approvers':_0xcd851b[0x0],'the_id':_0x3f3433});}catch(_0x2c54a4){console['log'](_0x2c54a4);}}),router['post']('/:id',auth,async(_0x539764,_0x4ab12e)=>{var _0x2eb923=a0_0xddd8e5;try{const {date:_0x299445,invoice_data:_0x4efc54,wms_confirm:_0x33d361,the_id_val:_0x181608,prod_id:_0x19eb11,SCRN:_0x50a0f3,ReqBy:_0x211640,dateofreq:_0x4717e4,PO_number:_0x246ee2,warehouse_name:_0x1c9238,typeservicesData:_0x44cae0,typevehicle:_0x2c3b8f,destination:_0xc1042c,deliverydate:_0x392aca,driver:_0xd4a09a,plate:_0x103d86,van:_0x2a5057,DRSI:_0x40d006,TSU:_0x551e86,TFU:_0x44b252,note:_0x3c22c2}=_0x539764[_0x2eb923(0x107)],_0x143b0a=await sales_order[_0x2eb923(0x192)](_0x181608);if(typeof _0x19eb11=='string')var _0x16e648=[_0x539764[_0x2eb923(0x107)][_0x2eb923(0x17e)]],_0x5e3f75=[_0x539764[_0x2eb923(0x107)]['qty']],_0x2de37f=[_0x539764['body']['data_loc']];else var _0x16e648=[..._0x539764[_0x2eb923(0x107)]['prod_id']],_0x5e3f75=[..._0x539764[_0x2eb923(0x107)][_0x2eb923(0x110)]],_0x2de37f=[..._0x539764[_0x2eb923(0x107)][_0x2eb923(0x122)]];const _0x212e63=_0x16e648['map'](_0x153474=>{return _0x153474={'prod_id':_0x153474};});_0x2de37f[_0x2eb923(0x140)]((_0x1b158e,_0x3b335e)=>{var _0x1eeab5=_0x2eb923,_0x3c5811=_0x1b158e[_0x1eeab5(0x10c)]('~');_0x212e63[_0x3b335e][_0x1eeab5(0x13f)]=_0x3c5811[0x0],_0x212e63[_0x3b335e][_0x1eeab5(0x108)]=_0x3c5811[0x1];}),_0x5e3f75['forEach']((_0x431893,_0x3614e7)=>{var _0x485dd6=_0x2eb923;_0x212e63[_0x3614e7][_0x485dd6(0x163)]=_0x431893;});var _0x5a2674=[],_0x1498a3=[],_0x3281cf=[],_0x1e5573=[],_0x26de8b=[],_0x19834b=[],_0x348e00=[],_0x21f4cd=[],_0x306ee8=[],_0x4a5cc5=[],_0x5b1fb4=[],_0x521975=[],_0x4b4739=[],_0x4d72e9=[],_0x24919c=[],_0x13b250=[],_0x12db42=[],_0x36cc48=[],_0x1e9cca=[],_0x2045ba=[];for(let _0x5cc037=0x0;_0x5cc037<=_0x212e63[_0x2eb923(0x195)]-0x1;_0x5cc037++){const _0x10b5b3=_0x212e63[_0x5cc037],_0x5469ce=mongoose[_0x2eb923(0x161)][_0x2eb923(0x187)];var _0x39bfa4=await warehouse[_0x2eb923(0x181)]([{'$match':{'_id':_0x5469ce(_0x10b5b3['warehouse_id'])}},{'$unwind':'$product_details'},{'$match':{'product_details._id':_0x5469ce(_0x10b5b3[_0x2eb923(0x108)])}}]),_0x402214=0x0;for(let _0x28264c=0x0;_0x28264c<=_0x39bfa4[_0x2eb923(0x195)]-0x1;_0x28264c++){var _0x18fba7=_0x39bfa4[_0x28264c];_0x18fba7['product_details']['product_stock']<_0x10b5b3[_0x2eb923(0x163)]&&_0x402214++;}if(_0x402214>0x0)return _0x539764[_0x2eb923(0x118)](_0x2eb923(0x17c),_0x2eb923(0x111)),_0x4ab12e[_0x2eb923(0x137)](_0x2eb923(0x132));var _0xc3f563=0x0;for(let _0x574dbb=0x0;_0x574dbb<=_0x39bfa4['length']-0x1;_0x574dbb++){var _0x18fba7=_0x39bfa4[_0x574dbb];_0x18fba7[_0x2eb923(0x11a)]['product_stock']>_0x10b5b3[_0x2eb923(0x163)]&&(_0x5a2674['push'](_0x18fba7['product_details'][_0x2eb923(0x170)]),_0x1498a3[_0x2eb923(0x15b)](_0x18fba7[_0x2eb923(0x11a)][_0x2eb923(0xfa)]),_0x3281cf[_0x2eb923(0x15b)](_0x10b5b3[_0x2eb923(0x163)]),_0x1e5573['push'](_0x18fba7[_0x2eb923(0x11a)][_0x2eb923(0x117)]),_0x26de8b[_0x2eb923(0x15b)](_0x18fba7[_0x2eb923(0x11a)][_0x2eb923(0x168)]),_0x19834b[_0x2eb923(0x15b)](_0x18fba7[_0x2eb923(0x11a)]['product_code']),_0x348e00[_0x2eb923(0x15b)](_0x18fba7['product_details']['level']),_0x21f4cd[_0x2eb923(0x15b)](_0x18fba7['product_details'][_0x2eb923(0x129)]),_0x306ee8[_0x2eb923(0x15b)](_0x18fba7[_0x2eb923(0x11a)]['unit']),_0x4a5cc5[_0x2eb923(0x15b)](_0x18fba7[_0x2eb923(0x11a)]['secondary_unit']),_0x5b1fb4['push'](_0x18fba7[_0x2eb923(0x11a)]['batch_code']),_0x521975[_0x2eb923(0x15b)](_0x18fba7[_0x2eb923(0x11a)]['expiry_date']),_0x4b4739[_0x2eb923(0x15b)](_0x18fba7[_0x2eb923(0x11a)][_0x2eb923(0x157)]),_0x4d72e9[_0x2eb923(0x15b)](_0x18fba7['product_details']['maxPerUnit']),_0x24919c['push'](_0x18fba7[_0x2eb923(0x11a)][_0x2eb923(0x11f)]),_0x13b250[_0x2eb923(0x15b)](_0x18fba7[_0x2eb923(0x169)]),_0x12db42['push'](_0x18fba7['product_details'][_0x2eb923(0x114)]),_0x36cc48[_0x2eb923(0x15b)](_0x18fba7[_0x2eb923(0x11a)][_0x2eb923(0x171)]),_0x1e9cca[_0x2eb923(0x15b)](_0x18fba7['product_details']['uuid']),_0x2045ba[_0x2eb923(0x15b)](_0x18fba7[_0x2eb923(0x11a)][_0x2eb923(0x13a)]),_0xc3f563++);}}const _0x10973e=_0x5a2674[_0x2eb923(0x148)](_0x467ae6=>{return _0x467ae6={'product_name':_0x467ae6};});_0x1498a3[_0x2eb923(0x140)]((_0xa650b4,_0x13a9bb)=>{var _0x453160=_0x2eb923;_0x10973e[_0x13a9bb][_0x453160(0x10b)]=_0xa650b4;}),_0x3281cf['forEach']((_0x22a883,_0x29e85e)=>{var _0x46ba17=_0x2eb923;_0x10973e[_0x29e85e]['quantity']=Math[_0x46ba17(0x174)](_0x22a883);}),_0x2045ba[_0x2eb923(0x140)]((_0x2e4d34,_0x145a3b)=>{_0x10973e[_0x145a3b]['gross_price']=_0x2e4d34;}),_0x1e9cca['forEach']((_0x4cc86e,_0x549d16)=>{var _0x3c8540=_0x2eb923;_0x10973e[_0x549d16][_0x3c8540(0x153)]=_0x4cc86e;}),_0x36cc48['forEach']((_0x3e72ad,_0x672f2c)=>{var _0x3835c0=_0x2eb923;_0x10973e[_0x672f2c][_0x3835c0(0x188)]=_0x3e72ad;}),_0x1e5573[_0x2eb923(0x140)]((_0x44ed9c,_0x1f72da)=>{_0x10973e[_0x1f72da]['primary_code']=_0x44ed9c;}),_0x26de8b[_0x2eb923(0x140)]((_0xbe4265,_0xf8fa41)=>{var _0x70210d=_0x2eb923;_0x10973e[_0xf8fa41][_0x70210d(0x168)]=_0xbe4265;}),_0x19834b[_0x2eb923(0x140)]((_0x4b6d96,_0x133071)=>{_0x10973e[_0x133071]['product_code']=_0x4b6d96;}),_0x348e00[_0x2eb923(0x140)]((_0x5453f0,_0xd03d4f)=>{var _0x977bf0=_0x2eb923;_0x10973e[_0xd03d4f][_0x977bf0(0x149)]=_0x5453f0;}),_0x21f4cd[_0x2eb923(0x140)]((_0x5cc5e1,_0x16b465)=>{var _0x229af5=_0x2eb923;_0x10973e[_0x16b465][_0x229af5(0x129)]=_0x5cc5e1;}),_0x306ee8[_0x2eb923(0x140)]((_0x1e8214,_0x4ecf8a)=>{var _0x25a16e=_0x2eb923;_0x10973e[_0x4ecf8a][_0x25a16e(0x198)]=_0x1e8214;}),_0x4a5cc5['forEach']((_0x426cb1,_0xcee948)=>{var _0xb8b257=_0x2eb923;_0x10973e[_0xcee948][_0xb8b257(0x178)]=_0x426cb1;}),_0x5b1fb4[_0x2eb923(0x140)]((_0x287ba1,_0xd01c21)=>{var _0x4fbe10=_0x2eb923;_0x10973e[_0xd01c21][_0x4fbe10(0x186)]=_0x287ba1;}),_0x521975[_0x2eb923(0x140)]((_0x19c661,_0x28c8ea)=>{var _0x3f1992=_0x2eb923;_0x10973e[_0x28c8ea][_0x3f1992(0x104)]=_0x19c661;}),_0x4b4739[_0x2eb923(0x140)]((_0x1e463e,_0x32a4ec)=>{_0x10973e[_0x32a4ec]['production_date']=_0x1e463e;}),_0x4d72e9[_0x2eb923(0x140)]((_0x3e1150,_0x16d0b9)=>{var _0x482d06=_0x2eb923;_0x10973e[_0x16d0b9][_0x482d06(0x136)]=_0x3e1150;}),_0x24919c['forEach']((_0x3ca008,_0x5ccf97)=>{_0x10973e[_0x5ccf97]['prod_cat']=_0x3ca008;}),_0x13b250[_0x2eb923(0x140)]((_0x60749b,_0x4936f0)=>{_0x10973e[_0x4936f0]['room_name']=_0x60749b;}),_0x12db42['forEach']((_0x16e859,_0xbd24fb)=>{var _0x43950b=_0x2eb923;_0x10973e[_0xbd24fb][_0x43950b(0x114)]=_0x16e859,_0x10973e[_0xbd24fb]['date_data']=_0x299445;});const _0x177fa0=new invoice_for_outgoing();await _0x177fa0[_0x2eb923(0x194)](),_0x12db42['forEach']((_0x3fe5dc,_0x5206d4)=>{var _0x2a7270=_0x2eb923;_0x10973e[_0x5206d4][_0x2a7270(0x152)]=_0x2a7270(0x155)+_0x177fa0['invoice_init'][_0x2a7270(0x191)]()[_0x2a7270(0x18d)](0x8,'0');});const _0x52df50=_0x10973e['filter'](_0x3f2fbf=>_0x3f2fbf['quantity']!=='0'&&_0x3f2fbf['quantity']!==''),_0x16e7ca=new sales_finished({'invoice':_0x2eb923(0x155)+_0x177fa0['invoice_init'][_0x2eb923(0x191)]()[_0x2eb923(0x18d)](0x8,'0'),'date':_0x299445,'warehouse_name':_0x1c9238,'sale_product':_0x52df50,'note':_0x3c22c2,'SCRN':_0x50a0f3,'finalize':_0x2eb923(0x112),'ReqBy':_0x211640,'dateofreq':_0x4717e4,'PO_number':_0x246ee2,'typeservicesData':_0x44cae0,'typevehicle':_0x2c3b8f,'destination':_0xc1042c,'deliverydate':_0x392aca,'driver':_0xd4a09a,'plate':_0x103d86,'van':_0x2a5057,'DRSI':_0x40d006,'TSU':_0x551e86,'TFU':_0x44b252}),_0x5f00a9=await _0x16e7ca[_0x2eb923(0x194)](),_0x124f50=new Date(),_0x36bcc5=_0x124f50[_0x2eb923(0x182)]();_0x143b0a[_0x2eb923(0x14e)]=_0x33d361,_0x143b0a[_0x2eb923(0x102)]=_0x36bcc5,_0x143b0a[_0x2eb923(0x10e)]=_0x2eb923(0x155)+_0x177fa0[_0x2eb923(0x13e)][_0x2eb923(0x191)]()['padStart'](0x8,'0'),_0x143b0a['outgoing_id']=_0x5f00a9[_0x2eb923(0x171)],await _0x143b0a[_0x2eb923(0x194)]();const _0x11b548=await master_shop[_0x2eb923(0x17a)](),_0x260c3b=await email_settings['findOne']();let _0x44fe5c=nodemailer['createTransport']({'host':_0x260c3b[_0x2eb923(0x156)],'port':Number(_0x260c3b[_0x2eb923(0x12e)]),'secure':![],'auth':{'user':_0x260c3b[_0x2eb923(0x12f)],'pass':_0x260c3b['password']}});const _0x2ba6b6=_0x539764['protocol']+_0x2eb923(0x17b)+_0x539764[_0x2eb923(0x176)]['host'];var _0x510618=_0x143b0a[_0x2eb923(0x175)],_0x6f1194='',_0x44db8a,_0x39245f=0x0;for(_0x44db8a in _0x510618){_0x6f1194+=_0x2eb923(0x190)+_0x2eb923(0x14b)+_0x510618[_0x44db8a][_0x2eb923(0x170)]+_0x2eb923(0x14f)+_0x2eb923(0x14b)+_0x510618[_0x44db8a]['product_code']+_0x2eb923(0x14f)+_0x2eb923(0x14b)+_0x510618[_0x44db8a][_0x2eb923(0x127)]+'</td>'+_0x2eb923(0x14b)+_0x510618[_0x44db8a]['unit']+'</td>'+_0x2eb923(0xfb),_0x39245f+=parseInt(_0x510618[_0x44db8a][_0x2eb923(0x127)]);}let _0x88b2e5={'from':_0x260c3b[_0x2eb923(0x12f)],'to':_0x2eb923(0x139),'subject':_0x2eb923(0x184),'attachments':[{'filename':_0x2eb923(0x162),'path':__dirname+_0x2eb923(0x109)+'/upload/'+_0x11b548[0x0][_0x2eb923(0x12c)],'cid':_0x2eb923(0xf9)}],'html':_0x2eb923(0x106)+'<html><head><title></title>'+_0x2eb923(0x134)+_0x2eb923(0x166)+_0x2eb923(0x11c)+_0x2eb923(0x13b)+_0x2eb923(0x11c)+_0x2eb923(0x113)+_0x2eb923(0x160)+_0x2eb923(0x11c)+_0x2eb923(0x197)+_0x2eb923(0x160)+_0x2eb923(0x160)+_0x2eb923(0x167)+_0x2eb923(0x11c)+'</div>'+'<div>'+'<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>'+_0x2eb923(0x160)+_0x2eb923(0x11c)+_0x2eb923(0x147)+_0x143b0a['invoice']+_0x2eb923(0x15d)+_0x2eb923(0x183)+_0x143b0a[_0x2eb923(0x123)]+_0x2eb923(0x143)+_0x2eb923(0x160)+_0x2eb923(0x11b)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x2eb923(0x190)+_0x2eb923(0x150)+_0x2eb923(0x10d)+_0x2eb923(0x17d)+_0x2eb923(0x144)+_0x2eb923(0xfb)+_0x2eb923(0x185)+_0x2eb923(0x116)+'\x20'+_0x6f1194+'\x20'+_0x2eb923(0x173)+'</table>'+_0x2eb923(0x11c)+'<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>'+_0x2eb923(0x121)+_0x2eb923(0x18f)+_0x2eb923(0x160)+'<div>'+_0x2eb923(0x18b)+'<h5>\x20JEC\x20SMS\x20</h5>'+'</div>'+_0x2eb923(0x160)+_0x2eb923(0x19c)+_0x2eb923(0x14c)};_0x44fe5c[_0x2eb923(0x14a)](_0x88b2e5,function(_0x27d00b,_0x831d7b){var _0x1f5170=_0x2eb923;_0x27d00b?(console[_0x1f5170(0xf8)](_0x27d00b),console[_0x1f5170(0xf8)]('Error\x20Occurs')):console['log']('Email\x20sent\x20successfully');}),_0x539764[_0x2eb923(0x118)]('success','Sales\x20Add\x20successfully'),_0x4ab12e[_0x2eb923(0x137)](_0x2eb923(0x13d)+_0x5f00a9[_0x2eb923(0x171)]),_0x4ab12e['json'](_0x52df50);return;}catch(_0x53651c){}}),router['get'](a0_0xddd8e5(0x18c),auth,async(_0x4d3c50,_0x569cd1)=>{var _0x57b579=a0_0xddd8e5;try{const _0x12c7ab=await master_shop[_0x57b579(0x17a)](),_0x16c2a2=_0x4d3c50[_0x57b579(0x141)],_0x933047=await profile[_0x57b579(0x19b)]({'email':_0x16c2a2[_0x57b579(0x12f)]}),_0x2c5c25=await staff[_0x57b579(0x19b)]({'email':_0x16c2a2[_0x57b579(0x12f)]}),_0x18e96b=await customer[_0x57b579(0x17a)]({'agent_id':_0x2c5c25[_0x57b579(0x171)]}),_0x46585a=mongoose[_0x57b579(0x161)][_0x57b579(0x187)],_0x5125dd=_0x4d3c50[_0x57b579(0x16f)]['id'],_0x1e7cd6=await sales_order[_0x57b579(0x192)](_0x5125dd),_0x35ff90=await sales_order['aggregate']([{'$match':{'_id':_0x46585a(_0x5125dd)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x57b579(0x159)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x57b579(0x16b)}}},{'$lookup':{'from':_0x57b579(0x120),'localField':'accounting_account_id','foreignField':_0x57b579(0x171),'as':_0x57b579(0x131)}},{'$unwind':_0x57b579(0x103)},{'$lookup':{'from':_0x57b579(0x120),'localField':_0x57b579(0x165),'foreignField':'_id','as':_0x57b579(0x12b)}},{'$unwind':'$wms_data'}]);if(_0x12c7ab[0x0][_0x57b579(0x193)]==_0x57b579(0x158))var _0x461575=users['English'];else{if(_0x12c7ab[0x0][_0x57b579(0x193)]=='Hindi')var _0x461575=users[_0x57b579(0x128)];else{if(_0x12c7ab[0x0]['language']==_0x57b579(0x17f))var _0x461575=users[_0x57b579(0x17f)];else{if(_0x12c7ab[0x0][_0x57b579(0x193)]==_0x57b579(0x133))var _0x461575=users[_0x57b579(0x133)];else{if(_0x12c7ab[0x0]['language']==_0x57b579(0x16c))var _0x461575=users[_0x57b579(0x16c)];else{if(_0x12c7ab[0x0][_0x57b579(0x193)]==_0x57b579(0xfd))var _0x461575=users[_0x57b579(0x199)];else{if(_0x12c7ab[0x0]['language']==_0x57b579(0x119))var _0x461575=users[_0x57b579(0x119)];else{if(_0x12c7ab[0x0]['language']==_0x57b579(0x16e))var _0x461575=users[_0x57b579(0x12a)];}}}}}}}_0x569cd1[_0x57b579(0x135)](_0x57b579(0xff),{'success':_0x4d3c50[_0x57b579(0x118)](_0x57b579(0x125)),'errors':_0x4d3c50['flash']('errors'),'master_shop':_0x12c7ab,'profile':_0x933047,'role':_0x16c2a2,'language':_0x461575,'customer':_0x18e96b,'sales_sa':_0x1e7cd6,'approvers':_0x35ff90[0x0],'the_id':_0x5125dd});}catch(_0x26d956){console['log'](_0x26d956);}}),router[a0_0xddd8e5(0x13c)](a0_0xddd8e5(0x19a),auth,async(_0xf1c84e,_0x58d676)=>{var _0x44cc77=a0_0xddd8e5;try{const {warehouse_name:_0x227449,product_code:_0x57df17}=_0xf1c84e[_0x44cc77(0x107)],_0x324125=await warehouse[_0x44cc77(0x181)]([{'$match':{'name':_0x227449}},{'$unwind':_0x44cc77(0x18a)},{'$match':{'product_details.product_code':_0x57df17}},{'$group':{'_id':{'room':_0x44cc77(0x130),'_id':_0x44cc77(0x124)}}}]);_0x58d676['json'](_0x324125);}catch(_0x5ee13c){}}),router['post']('/data/data_loc',auth,async(_0x14deda,_0x163553)=>{var _0x41ecea=a0_0xddd8e5;try{const {warehouse_name:_0x48932c,product_code:_0x15b6c8,room_name:_0x4a7835}=_0x14deda[_0x41ecea(0x107)];console[_0x41ecea(0xf8)](_0x14deda[_0x41ecea(0x107)]);const _0x3647ad=await warehouse[_0x41ecea(0x181)]([{'$match':{'name':_0x48932c,'room':_0x4a7835}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x15b6c8}},{'$group':{'_id':{'main_id':_0x41ecea(0x124),'detl_id':'$product_details._id','product_name':_0x41ecea(0x18e),'product_code':'$product_details.product_code','level':_0x41ecea(0x12d),'bay':_0x41ecea(0x10a),'stocks':_0x41ecea(0x189)}}}]);_0x163553[_0x41ecea(0x11d)](_0x3647ad);}catch(_0x466ec8){}}),router[a0_0xddd8e5(0x179)](a0_0xddd8e5(0x145),auth,async(_0x571444,_0x4ec867)=>{var _0x2a53f6=a0_0xddd8e5;try{const {sttaff_id:_0x1efcf0,email:_0x48f612,warehouse:_0x19494b}=_0x571444[_0x2a53f6(0x141)],_0x57007e=await master_shop[_0x2a53f6(0x17a)](),_0x3d3a51=_0x571444[_0x2a53f6(0x141)],_0x476f37=await profile[_0x2a53f6(0x19b)]({'email':_0x3d3a51[_0x2a53f6(0x12f)]}),_0x64a3d7=await sales_order[_0x2a53f6(0x17a)]({'wms_account_id':_0x1efcf0});if(_0x57007e[0x0][_0x2a53f6(0x193)]==_0x2a53f6(0x158))var _0x123f98=users[_0x2a53f6(0x10f)];else{if(_0x57007e[0x0][_0x2a53f6(0x193)]=='Hindi')var _0x123f98=users[_0x2a53f6(0x128)];else{if(_0x57007e[0x0][_0x2a53f6(0x193)]=='German')var _0x123f98=users['German'];else{if(_0x57007e[0x0]['language']==_0x2a53f6(0x133))var _0x123f98=users[_0x2a53f6(0x133)];else{if(_0x57007e[0x0][_0x2a53f6(0x193)]==_0x2a53f6(0x16c))var _0x123f98=users[_0x2a53f6(0x16c)];else{if(_0x57007e[0x0][_0x2a53f6(0x193)]==_0x2a53f6(0xfd))var _0x123f98=users[_0x2a53f6(0x199)];else{if(_0x57007e[0x0]['language']=='Chinese')var _0x123f98=users[_0x2a53f6(0x119)];else{if(_0x57007e[0x0][_0x2a53f6(0x193)]==_0x2a53f6(0x16e))var _0x123f98=users['Arabic'];}}}}}}}_0x4ec867[_0x2a53f6(0x135)](_0x2a53f6(0x105),{'success':_0x571444[_0x2a53f6(0x118)](_0x2a53f6(0x125)),'errors':_0x571444[_0x2a53f6(0x118)]('errors'),'master_shop':_0x57007e,'profile':_0x476f37,'role':_0x3d3a51,'language':_0x123f98,'sales_order':_0x64a3d7});}catch(_0x1d33c3){}}),module[a0_0xddd8e5(0x180)]=router;