function a0_0x4913(){var _0x4699b4=['../middleware/auth','/all_sales_finished/preview/','/view_sales_order/:id','Logo.png','invoice','/upload/','maxPerUnit','Arabic','$wms_account_id','account_data','warehouse_detl','room','exports','flash','email','express','$product_details.level','$product_details._id','aggregate','<hr\x20class=\x22my-3\x22>','Sales\x20Add\x20successfully','protocol','1053nqoWhs','French','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','$product_details.product_stock','warehouse_id','back','</div>','Email\x20for\x20Customer','6120530XZOVWC','string','English\x20(US)','accounting_account_id','json','$_id','render','primary_code','params','6666198lviFoI','password','product_name','mongodb','<span>\x20Request\x20ID:\x20<b>','<table\x20style=\x22width:\x20100%\x20!important;\x22>','../public/language/languages.json','Hindi','get','$accounting_account_id','date_data','headers','split','invoice_init','wms_data','$account_data','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','Email\x20sent\x20successfully','abs','image','sendMail','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','request_qty','product_code','view_accounting_approval','log','</b></span>\x20<br>','toLocaleDateString','prod_cat','Router','warehouse_approval_All','104FQaLrg','/data/data_loc','4630592eezTOb','<html><head><title></title>','<!DOCTYPE\x20html>','Portuguese','save','document_number_out','<span>\x20Request\x20Date:\x20<b>','$wms_data','post','errors','id_transaction_from','</td>','port','/data/All','bay','</b></span>\x20<br><br>','167egHlDu','expiry_date','Spanish','ObjectId','logo','data_loc','redirect','<tbody\x20style=\x22text-align:\x20center;\x22>','7KNlyVf','</thead>','push','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','Types','host','_id','maxperunit','/../public','findById','product_details','staffs','/:id','prod_id','xlsx','level','gross_price','length','Portuguese\x20(BR)','Chinese','quantity','False','toString','mongoose','room_name','</tbody>','batch_code','success','uuid','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','warehouse_approval','product_stock','6418bCIVoT','unit','filter','language','<div>','production_date','secondary_code','../models/all_models','forEach','6864882WaUypK','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','</head><body>','user','73060HZqdpM','sale_product','$product_details','body','90879fXSUPy','English','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','German','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','<h2>\x20JEC\x20SMS\x20</h2>','date','outgoing_invoice','OUT-','/data/data_rack','<h5>\x20JEC\x20SMS\x20</h5>','<strong>\x20Regards\x20</strong>','Arabic\x20(ae)','find','createTransport','qty','wms_account_confirm','padStart','$product_details.product_name','map','<tr>','</tr>','findOne','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>'];a0_0x4913=function(){return _0x4699b4;};return a0_0x4913();}function a0_0x3897(_0x49ae14,_0x2ccc4c){var _0x4913c2=a0_0x4913();return a0_0x3897=function(_0x389721,_0x45546f){_0x389721=_0x389721-0x1d4;var _0x2e0b97=_0x4913c2[_0x389721];return _0x2e0b97;},a0_0x3897(_0x49ae14,_0x2ccc4c);}var a0_0x5c8044=a0_0x3897;(function(_0x2f82ab,_0x3bbd90){var _0x4128c3=a0_0x3897,_0x42e111=_0x2f82ab();while(!![]){try{var _0x3559af=-parseInt(_0x4128c3(0x254))/0x1*(-parseInt(_0x4128c3(0x27c))/0x2)+parseInt(_0x4128c3(0x1e3))/0x3*(-parseInt(_0x4128c3(0x242))/0x4)+parseInt(_0x4128c3(0x21a))/0x5+-parseInt(_0x4128c3(0x1db))/0x6*(parseInt(_0x4128c3(0x25c))/0x7)+-parseInt(_0x4128c3(0x244))/0x8+-parseInt(_0x4128c3(0x212))/0x9*(-parseInt(_0x4128c3(0x1df))/0xa)+parseInt(_0x4128c3(0x223))/0xb;if(_0x3559af===_0x3bbd90)break;else _0x42e111['push'](_0x42e111['shift']());}catch(_0x322df3){_0x42e111['push'](_0x42e111['shift']());}}}(a0_0x4913,0xad660));const express=require(a0_0x5c8044(0x20b)),app=express(),router=express[a0_0x5c8044(0x240)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x5c8044(0x1d9)),auth=require(a0_0x5c8044(0x1fc)),users=require(a0_0x5c8044(0x229)),excelJS=require('exceljs'),xlsx=require(a0_0x5c8044(0x26a)),mongoose=require(a0_0x5c8044(0x273)),{ObjectId}=require(a0_0x5c8044(0x226)),nodemailer=require('nodemailer');router['get'](a0_0x5c8044(0x268),auth,async(_0x15366c,_0x2e6fc7)=>{var _0x812757=a0_0x5c8044;try{const _0x151499=await master_shop[_0x812757(0x1f1)](),_0x1e5926=_0x15366c[_0x812757(0x1de)],_0x3f58a6=await profile[_0x812757(0x1fa)]({'email':_0x1e5926[_0x812757(0x20a)]}),_0x2e58d6=await staff['findOne']({'email':_0x1e5926[_0x812757(0x20a)]}),_0x1107ec=await customer[_0x812757(0x1f1)]({'agent_id':_0x2e58d6['_id']}),_0x13e62f=mongoose[_0x812757(0x260)]['ObjectId'],_0xab1452=_0x15366c[_0x812757(0x222)]['id'],_0x59f37d=await sales_order['findById'](_0xab1452),_0x5dd056=await sales_order['aggregate']([{'$match':{'_id':_0x13e62f(_0xab1452)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x812757(0x22c)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x812757(0x204)}}},{'$lookup':{'from':_0x812757(0x267),'localField':_0x812757(0x21d),'foreignField':_0x812757(0x262),'as':_0x812757(0x205)}},{'$unwind':_0x812757(0x232)},{'$lookup':{'from':_0x812757(0x267),'localField':'wms_account_id','foreignField':_0x812757(0x262),'as':'wms_data'}},{'$unwind':_0x812757(0x24b)}]);if(_0x151499[0x0][_0x812757(0x1d5)]==_0x812757(0x21c))var _0xbf1113=users[_0x812757(0x1e4)];else{if(_0x151499[0x0]['language']==_0x812757(0x22a))var _0xbf1113=users[_0x812757(0x22a)];else{if(_0x151499[0x0][_0x812757(0x1d5)]==_0x812757(0x1e7))var _0xbf1113=users[_0x812757(0x1e7)];else{if(_0x151499[0x0]['language']==_0x812757(0x256))var _0xbf1113=users[_0x812757(0x256)];else{if(_0x151499[0x0][_0x812757(0x1d5)]==_0x812757(0x213))var _0xbf1113=users[_0x812757(0x213)];else{if(_0x151499[0x0]['language']==_0x812757(0x26e))var _0xbf1113=users[_0x812757(0x247)];else{if(_0x151499[0x0][_0x812757(0x1d5)]==_0x812757(0x26f))var _0xbf1113=users[_0x812757(0x26f)];else{if(_0x151499[0x0]['language']==_0x812757(0x1f0))var _0xbf1113=users[_0x812757(0x203)];}}}}}}}_0x2e6fc7['render'](_0x812757(0x27a),{'success':_0x15366c[_0x812757(0x209)](_0x812757(0x277)),'errors':_0x15366c[_0x812757(0x209)](_0x812757(0x24d)),'master_shop':_0x151499,'profile':_0x3f58a6,'role':_0x1e5926,'language':_0xbf1113,'customer':_0x1107ec,'sales_sa':_0x59f37d,'approvers':_0x5dd056[0x0],'the_id':_0xab1452});}catch(_0x585b56){console[_0x812757(0x23c)](_0x585b56);}}),router[a0_0x5c8044(0x24c)]('/:id',auth,async(_0x4bf050,_0x5f1d9a)=>{var _0x361978=a0_0x5c8044;try{const {date:_0x50ee15,invoice_data:_0x2b087f,wms_confirm:_0x38a999,the_id_val:_0x32f95e,prod_id:_0x31a74d,SCRN:_0x599102,ReqBy:_0x37aa4a,dateofreq:_0x305785,PO_number:_0x47fb6f,warehouse_name:_0x5ae82d,typeservicesData:_0x4088d9,typevehicle:_0x327058,destination:_0x2da683,deliverydate:_0x45f76e,driver:_0x10e05c,plate:_0x3915a3,van:_0x588538,DRSI:_0x4168a5,TSU:_0x5bcb25,TFU:_0x516339,note:_0x16b61c}=_0x4bf050[_0x361978(0x1e2)],_0x41db1c=await sales_order['findById'](_0x32f95e);if(typeof _0x31a74d==_0x361978(0x21b))var _0x1a9228=[_0x4bf050[_0x361978(0x1e2)][_0x361978(0x269)]],_0x5ebb1f=[_0x4bf050[_0x361978(0x1e2)][_0x361978(0x1f3)]],_0x2dd84b=[_0x4bf050['body'][_0x361978(0x259)]];else var _0x1a9228=[..._0x4bf050[_0x361978(0x1e2)]['prod_id']],_0x5ebb1f=[..._0x4bf050[_0x361978(0x1e2)]['qty']],_0x2dd84b=[..._0x4bf050[_0x361978(0x1e2)]['data_loc']];const _0x50bbcb=_0x1a9228[_0x361978(0x1f7)](_0x7c1f9e=>{return _0x7c1f9e={'prod_id':_0x7c1f9e};});_0x2dd84b[_0x361978(0x1da)]((_0x5bf393,_0x4bb0a1)=>{var _0x2386b1=_0x361978,_0x4b99e3=_0x5bf393[_0x2386b1(0x22f)]('~');_0x50bbcb[_0x4bb0a1][_0x2386b1(0x216)]=_0x4b99e3[0x0],_0x50bbcb[_0x4bb0a1][_0x2386b1(0x206)]=_0x4b99e3[0x1];}),_0x5ebb1f[_0x361978(0x1da)]((_0x4b3405,_0x49951c)=>{_0x50bbcb[_0x49951c]['request_qty']=_0x4b3405;});var _0x228150=[],_0x36bc60=[],_0xf49226=[],_0x50f656=[],_0x411638=[],_0x5b2020=[],_0x5dbb1e=[],_0x28738f=[],_0x3ddab1=[],_0x4658d9=[],_0x10a69e=[],_0xbdc3e3=[],_0x5e8193=[],_0x2eb385=[],_0x50f813=[],_0x14be85=[],_0x1f58ef=[],_0x28942a=[],_0x61fa1e=[],_0x118bb8=[];for(let _0x4b7cc2=0x0;_0x4b7cc2<=_0x50bbcb['length']-0x1;_0x4b7cc2++){const _0x1485c9=_0x50bbcb[_0x4b7cc2],_0x1e1e6a=mongoose['Types'][_0x361978(0x257)];var _0x51ffd1=await warehouse[_0x361978(0x20e)]([{'$match':{'_id':_0x1e1e6a(_0x1485c9['warehouse_id'])}},{'$unwind':'$product_details'},{'$match':{'product_details._id':_0x1e1e6a(_0x1485c9[_0x361978(0x206)])}}]),_0x4e2e01=0x0;for(let _0x20de09=0x0;_0x20de09<=_0x51ffd1[_0x361978(0x26d)]-0x1;_0x20de09++){var _0x946c19=_0x51ffd1[_0x20de09];_0x946c19[_0x361978(0x266)][_0x361978(0x27b)]<_0x1485c9[_0x361978(0x239)]&&_0x4e2e01++;}if(_0x4e2e01>0x0)return _0x4bf050['flash'](_0x361978(0x24d),_0x361978(0x1dc)),_0x5f1d9a['redirect'](_0x361978(0x217));var _0x205700=0x0;for(let _0x2ded3f=0x0;_0x2ded3f<=_0x51ffd1[_0x361978(0x26d)]-0x1;_0x2ded3f++){var _0x946c19=_0x51ffd1[_0x2ded3f];_0x946c19[_0x361978(0x266)][_0x361978(0x27b)]>_0x1485c9[_0x361978(0x239)]&&(_0x228150[_0x361978(0x25e)](_0x946c19[_0x361978(0x266)][_0x361978(0x225)]),_0x36bc60[_0x361978(0x25e)](_0x946c19[_0x361978(0x266)][_0x361978(0x27b)]),_0xf49226[_0x361978(0x25e)](_0x1485c9[_0x361978(0x239)]),_0x50f656[_0x361978(0x25e)](_0x946c19['product_details'][_0x361978(0x221)]),_0x411638['push'](_0x946c19[_0x361978(0x266)][_0x361978(0x1d8)]),_0x5b2020[_0x361978(0x25e)](_0x946c19[_0x361978(0x266)][_0x361978(0x23a)]),_0x5dbb1e[_0x361978(0x25e)](_0x946c19[_0x361978(0x266)][_0x361978(0x26b)]),_0x28738f['push'](_0x946c19[_0x361978(0x266)]['bay']),_0x3ddab1[_0x361978(0x25e)](_0x946c19[_0x361978(0x266)][_0x361978(0x27d)]),_0x4658d9[_0x361978(0x25e)](_0x946c19['product_details']['secondary_unit']),_0x10a69e[_0x361978(0x25e)](_0x946c19[_0x361978(0x266)][_0x361978(0x276)]),_0xbdc3e3[_0x361978(0x25e)](_0x946c19[_0x361978(0x266)][_0x361978(0x255)]),_0x5e8193[_0x361978(0x25e)](_0x946c19[_0x361978(0x266)][_0x361978(0x1d7)]),_0x2eb385[_0x361978(0x25e)](_0x946c19['product_details'][_0x361978(0x202)]),_0x50f813[_0x361978(0x25e)](_0x946c19[_0x361978(0x266)]['product_cat']),_0x14be85[_0x361978(0x25e)](_0x946c19[_0x361978(0x207)]),_0x1f58ef[_0x361978(0x25e)](_0x946c19['product_details'][_0x361978(0x200)]),_0x28942a[_0x361978(0x25e)](_0x946c19['product_details'][_0x361978(0x262)]),_0x61fa1e[_0x361978(0x25e)](_0x946c19[_0x361978(0x266)][_0x361978(0x278)]),_0x118bb8[_0x361978(0x25e)](_0x946c19[_0x361978(0x266)][_0x361978(0x26c)]),_0x205700++);}}const _0x28ac4d=_0x228150[_0x361978(0x1f7)](_0x5b5ecd=>{return _0x5b5ecd={'product_name':_0x5b5ecd};});_0x36bc60[_0x361978(0x1da)]((_0x37cb12,_0x487866)=>{_0x28ac4d[_0x487866]['stock']=_0x37cb12;}),_0xf49226[_0x361978(0x1da)]((_0x147b11,_0x542080)=>{var _0x1e2f4b=_0x361978;_0x28ac4d[_0x542080][_0x1e2f4b(0x270)]=Math[_0x1e2f4b(0x235)](_0x147b11);}),_0x118bb8['forEach']((_0x1ed998,_0x5a25cb)=>{var _0x53f3d8=_0x361978;_0x28ac4d[_0x5a25cb][_0x53f3d8(0x26c)]=_0x1ed998;}),_0x61fa1e[_0x361978(0x1da)]((_0x313620,_0x2e9fbb)=>{_0x28ac4d[_0x2e9fbb]['uuid']=_0x313620;}),_0x28942a[_0x361978(0x1da)]((_0x10ae0d,_0x5d0053)=>{var _0x19b682=_0x361978;_0x28ac4d[_0x5d0053][_0x19b682(0x24e)]=_0x10ae0d;}),_0x50f656[_0x361978(0x1da)]((_0xa9031,_0x5cd8ee)=>{var _0x2da991=_0x361978;_0x28ac4d[_0x5cd8ee][_0x2da991(0x221)]=_0xa9031;}),_0x411638[_0x361978(0x1da)]((_0x152d6c,_0x3de86e)=>{_0x28ac4d[_0x3de86e]['secondary_code']=_0x152d6c;}),_0x5b2020[_0x361978(0x1da)]((_0x31e918,_0x162ccd)=>{_0x28ac4d[_0x162ccd]['product_code']=_0x31e918;}),_0x5dbb1e[_0x361978(0x1da)]((_0x1083c9,_0x34ffd8)=>{var _0x3a0fc3=_0x361978;_0x28ac4d[_0x34ffd8][_0x3a0fc3(0x26b)]=_0x1083c9;}),_0x28738f['forEach']((_0x3c90da,_0x1c0593)=>{var _0x87206d=_0x361978;_0x28ac4d[_0x1c0593][_0x87206d(0x252)]=_0x3c90da;}),_0x3ddab1[_0x361978(0x1da)]((_0x59be63,_0x28f358)=>{var _0x271b21=_0x361978;_0x28ac4d[_0x28f358][_0x271b21(0x27d)]=_0x59be63;}),_0x4658d9[_0x361978(0x1da)]((_0x26b255,_0x5aa900)=>{_0x28ac4d[_0x5aa900]['secondary_unit']=_0x26b255;}),_0x10a69e['forEach']((_0x514d7a,_0x4cd345)=>{_0x28ac4d[_0x4cd345]['batch_code']=_0x514d7a;}),_0xbdc3e3['forEach']((_0x38cfc7,_0x190b60)=>{var _0xdd347=_0x361978;_0x28ac4d[_0x190b60][_0xdd347(0x255)]=_0x38cfc7;}),_0x5e8193[_0x361978(0x1da)]((_0x2cf2b2,_0x400649)=>{var _0x5bf78a=_0x361978;_0x28ac4d[_0x400649][_0x5bf78a(0x1d7)]=_0x2cf2b2;}),_0x2eb385[_0x361978(0x1da)]((_0x1e5adb,_0x5191b6)=>{var _0x21c061=_0x361978;_0x28ac4d[_0x5191b6][_0x21c061(0x263)]=_0x1e5adb;}),_0x50f813[_0x361978(0x1da)]((_0x2eb7ad,_0x49795d)=>{var _0x2a4ed1=_0x361978;_0x28ac4d[_0x49795d][_0x2a4ed1(0x23f)]=_0x2eb7ad;}),_0x14be85[_0x361978(0x1da)]((_0x5bcf56,_0x2e05af)=>{var _0x185b82=_0x361978;_0x28ac4d[_0x2e05af][_0x185b82(0x274)]=_0x5bcf56;}),_0x1f58ef[_0x361978(0x1da)]((_0x4163d6,_0x1b855a)=>{var _0xf33c76=_0x361978;_0x28ac4d[_0x1b855a][_0xf33c76(0x200)]=_0x4163d6,_0x28ac4d[_0x1b855a][_0xf33c76(0x22d)]=_0x50ee15;});const _0x3ca6b7=new invoice_for_outgoing();await _0x3ca6b7[_0x361978(0x248)](),_0x1f58ef['forEach']((_0x377f4d,_0x34b5cd)=>{var _0x40f71e=_0x361978;_0x28ac4d[_0x34b5cd][_0x40f71e(0x1eb)]='OUT-'+_0x3ca6b7[_0x40f71e(0x230)][_0x40f71e(0x272)]()[_0x40f71e(0x1f5)](0x8,'0');});const _0x53255b=_0x28ac4d[_0x361978(0x1d4)](_0x3e025f=>_0x3e025f[_0x361978(0x270)]!=='0'&&_0x3e025f['quantity']!==''),_0x497ee1=new sales_finished({'invoice':'OUT-'+_0x3ca6b7['invoice_init'][_0x361978(0x272)]()[_0x361978(0x1f5)](0x8,'0'),'date':_0x50ee15,'warehouse_name':_0x5ae82d,'sale_product':_0x53255b,'note':_0x16b61c,'SCRN':_0x599102,'finalize':_0x361978(0x271),'ReqBy':_0x37aa4a,'dateofreq':_0x305785,'PO_number':_0x47fb6f,'typeservicesData':_0x4088d9,'typevehicle':_0x327058,'destination':_0x2da683,'deliverydate':_0x45f76e,'driver':_0x10e05c,'plate':_0x3915a3,'van':_0x588538,'DRSI':_0x4168a5,'TSU':_0x5bcb25,'TFU':_0x516339}),_0x255201=await _0x497ee1[_0x361978(0x248)](),_0x1554d5=new Date(),_0x529aab=_0x1554d5[_0x361978(0x23e)]();_0x41db1c[_0x361978(0x1f4)]=_0x38a999,_0x41db1c['wms_account_date']=_0x529aab,_0x41db1c[_0x361978(0x249)]=_0x361978(0x1ec)+_0x3ca6b7[_0x361978(0x230)][_0x361978(0x272)]()[_0x361978(0x1f5)](0x8,'0'),_0x41db1c['outgoing_id']=_0x255201['_id'],await _0x41db1c[_0x361978(0x248)]();const _0x30c98f=await master_shop[_0x361978(0x1f1)](),_0x1e3119=await email_settings[_0x361978(0x1fa)]();let _0x360458=nodemailer[_0x361978(0x1f2)]({'host':_0x1e3119[_0x361978(0x261)],'port':Number(_0x1e3119[_0x361978(0x250)]),'secure':![],'auth':{'user':_0x1e3119[_0x361978(0x20a)],'pass':_0x1e3119[_0x361978(0x224)]}});const _0xded53f=_0x4bf050[_0x361978(0x211)]+'://'+_0x4bf050[_0x361978(0x22e)][_0x361978(0x261)];var _0x12cbf=_0x41db1c[_0x361978(0x1e0)],_0x643726='',_0x580ab0,_0xb44dfc=0x0;for(_0x580ab0 in _0x12cbf){_0x643726+='<tr>'+_0x361978(0x233)+_0x12cbf[_0x580ab0][_0x361978(0x225)]+_0x361978(0x24f)+_0x361978(0x233)+_0x12cbf[_0x580ab0][_0x361978(0x23a)]+_0x361978(0x24f)+_0x361978(0x233)+_0x12cbf[_0x580ab0][_0x361978(0x270)]+_0x361978(0x24f)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x12cbf[_0x580ab0][_0x361978(0x27d)]+_0x361978(0x24f)+_0x361978(0x1f9),_0xb44dfc+=parseInt(_0x12cbf[_0x580ab0][_0x361978(0x270)]);}let _0xcc52a8={'from':_0x1e3119['email'],'to':'christian.villamer@jakagroup.com','subject':_0x361978(0x219),'attachments':[{'filename':_0x361978(0x1ff),'path':__dirname+_0x361978(0x264)+_0x361978(0x201)+_0x30c98f[0x0][_0x361978(0x236)],'cid':_0x361978(0x258)}],'html':_0x361978(0x246)+_0x361978(0x245)+_0x361978(0x1fb)+_0x361978(0x1dd)+'<div>'+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+_0x361978(0x1d6)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x361978(0x218)+'<div>'+_0x361978(0x1e9)+'</div>'+_0x361978(0x218)+_0x361978(0x20f)+_0x361978(0x1d6)+_0x361978(0x218)+'<div>'+_0x361978(0x214)+_0x361978(0x218)+_0x361978(0x1d6)+_0x361978(0x227)+_0x41db1c[_0x361978(0x200)]+_0x361978(0x23d)+_0x361978(0x24a)+_0x41db1c[_0x361978(0x1ea)]+_0x361978(0x253)+_0x361978(0x218)+_0x361978(0x228)+_0x361978(0x238)+_0x361978(0x1f8)+_0x361978(0x1e6)+_0x361978(0x25f)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>'+_0x361978(0x1f9)+_0x361978(0x25d)+_0x361978(0x25b)+'\x20'+_0x643726+'\x20'+_0x361978(0x275)+'</table>'+'<div>'+_0x361978(0x1e5)+_0x361978(0x279)+'<br><br><br>'+_0x361978(0x218)+_0x361978(0x1d6)+_0x361978(0x1ef)+_0x361978(0x1ee)+_0x361978(0x218)+_0x361978(0x218)+_0x361978(0x1e8)+'</body></html>'};_0x360458[_0x361978(0x237)](_0xcc52a8,function(_0x486fad,_0x222e25){var _0x466218=_0x361978;_0x486fad?(console[_0x466218(0x23c)](_0x486fad),console[_0x466218(0x23c)]('Error\x20Occurs')):console['log'](_0x466218(0x234));}),_0x4bf050[_0x361978(0x209)](_0x361978(0x277),_0x361978(0x210)),_0x5f1d9a[_0x361978(0x25a)](_0x361978(0x1fd)+_0x255201[_0x361978(0x262)]),_0x5f1d9a['json'](_0x53255b);return;}catch(_0x3e8239){}}),router[a0_0x5c8044(0x22b)](a0_0x5c8044(0x1fe),auth,async(_0x1023dd,_0x3a059a)=>{var _0x2f5e14=a0_0x5c8044;try{const _0x5ef105=await master_shop[_0x2f5e14(0x1f1)](),_0x2308f0=_0x1023dd[_0x2f5e14(0x1de)],_0x10777d=await profile['findOne']({'email':_0x2308f0[_0x2f5e14(0x20a)]}),_0x2dbe84=await staff[_0x2f5e14(0x1fa)]({'email':_0x2308f0[_0x2f5e14(0x20a)]}),_0x221ff1=await customer[_0x2f5e14(0x1f1)]({'agent_id':_0x2dbe84[_0x2f5e14(0x262)]}),_0x1aa595=mongoose['Types']['ObjectId'],_0x3eda79=_0x1023dd['params']['id'],_0x4ecb64=await sales_order[_0x2f5e14(0x265)](_0x3eda79),_0x4cc0a0=await sales_order[_0x2f5e14(0x20e)]([{'$match':{'_id':_0x1aa595(_0x3eda79)}},{'$addFields':{'accounting_account_id':{'$toObjectId':'$accounting_account_id'}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':_0x2f5e14(0x267),'localField':_0x2f5e14(0x21d),'foreignField':_0x2f5e14(0x262),'as':_0x2f5e14(0x205)}},{'$unwind':_0x2f5e14(0x232)},{'$lookup':{'from':_0x2f5e14(0x267),'localField':'wms_account_id','foreignField':_0x2f5e14(0x262),'as':_0x2f5e14(0x231)}},{'$unwind':_0x2f5e14(0x24b)}]);if(_0x5ef105[0x0][_0x2f5e14(0x1d5)]=='English\x20(US)')var _0xe91bc5=users[_0x2f5e14(0x1e4)];else{if(_0x5ef105[0x0][_0x2f5e14(0x1d5)]=='Hindi')var _0xe91bc5=users[_0x2f5e14(0x22a)];else{if(_0x5ef105[0x0][_0x2f5e14(0x1d5)]==_0x2f5e14(0x1e7))var _0xe91bc5=users['German'];else{if(_0x5ef105[0x0][_0x2f5e14(0x1d5)]==_0x2f5e14(0x256))var _0xe91bc5=users[_0x2f5e14(0x256)];else{if(_0x5ef105[0x0][_0x2f5e14(0x1d5)]=='French')var _0xe91bc5=users[_0x2f5e14(0x213)];else{if(_0x5ef105[0x0][_0x2f5e14(0x1d5)]==_0x2f5e14(0x26e))var _0xe91bc5=users['Portuguese'];else{if(_0x5ef105[0x0]['language']==_0x2f5e14(0x26f))var _0xe91bc5=users[_0x2f5e14(0x26f)];else{if(_0x5ef105[0x0][_0x2f5e14(0x1d5)]==_0x2f5e14(0x1f0))var _0xe91bc5=users[_0x2f5e14(0x203)];}}}}}}}_0x3a059a[_0x2f5e14(0x220)](_0x2f5e14(0x23b),{'success':_0x1023dd[_0x2f5e14(0x209)]('success'),'errors':_0x1023dd[_0x2f5e14(0x209)](_0x2f5e14(0x24d)),'master_shop':_0x5ef105,'profile':_0x10777d,'role':_0x2308f0,'language':_0xe91bc5,'customer':_0x221ff1,'sales_sa':_0x4ecb64,'approvers':_0x4cc0a0[0x0],'the_id':_0x3eda79});}catch(_0x2e100d){console[_0x2f5e14(0x23c)](_0x2e100d);}}),router[a0_0x5c8044(0x24c)](a0_0x5c8044(0x1ed),auth,async(_0x5f4562,_0x340444)=>{var _0x300a97=a0_0x5c8044;try{const {warehouse_name:_0x13c69d,product_code:_0x1f843d}=_0x5f4562['body'],_0x1ce150=await warehouse['aggregate']([{'$match':{'name':_0x13c69d}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x1f843d}},{'$group':{'_id':{'room':'$room','_id':_0x300a97(0x21f)}}}]);_0x340444[_0x300a97(0x21e)](_0x1ce150);}catch(_0x1782a7){}}),router[a0_0x5c8044(0x24c)](a0_0x5c8044(0x243),auth,async(_0x30b242,_0x4a25e7)=>{var _0x1bafa4=a0_0x5c8044;try{const {warehouse_name:_0x1f529a,product_code:_0xb0bb1c,room_name:_0x5934d7}=_0x30b242['body'];console[_0x1bafa4(0x23c)](_0x30b242['body']);const _0x17a1f3=await warehouse[_0x1bafa4(0x20e)]([{'$match':{'name':_0x1f529a,'room':_0x5934d7}},{'$unwind':_0x1bafa4(0x1e1)},{'$match':{'product_details.product_code':_0xb0bb1c}},{'$group':{'_id':{'main_id':_0x1bafa4(0x21f),'detl_id':_0x1bafa4(0x20d),'product_name':_0x1bafa4(0x1f6),'product_code':'$product_details.product_code','level':_0x1bafa4(0x20c),'bay':'$product_details.bay','stocks':_0x1bafa4(0x215)}}}]);_0x4a25e7[_0x1bafa4(0x21e)](_0x17a1f3);}catch(_0x4daefd){}}),router[a0_0x5c8044(0x22b)](a0_0x5c8044(0x251),auth,async(_0x4ba44e,_0x13c959)=>{var _0x56c00b=a0_0x5c8044;try{const {sttaff_id:_0x40ebc1,email:_0x3ee8cf,warehouse:_0x3b8f59}=_0x4ba44e['user'],_0x158faf=await master_shop[_0x56c00b(0x1f1)](),_0x23ce81=_0x4ba44e[_0x56c00b(0x1de)],_0x1848c7=await profile['findOne']({'email':_0x23ce81['email']}),_0x2e3f9c=await sales_order[_0x56c00b(0x1f1)]({'wms_account_id':_0x40ebc1});if(_0x158faf[0x0][_0x56c00b(0x1d5)]=='English\x20(US)')var _0x488916=users[_0x56c00b(0x1e4)];else{if(_0x158faf[0x0][_0x56c00b(0x1d5)]==_0x56c00b(0x22a))var _0x488916=users['Hindi'];else{if(_0x158faf[0x0]['language']==_0x56c00b(0x1e7))var _0x488916=users[_0x56c00b(0x1e7)];else{if(_0x158faf[0x0][_0x56c00b(0x1d5)]==_0x56c00b(0x256))var _0x488916=users[_0x56c00b(0x256)];else{if(_0x158faf[0x0]['language']==_0x56c00b(0x213))var _0x488916=users[_0x56c00b(0x213)];else{if(_0x158faf[0x0]['language']==_0x56c00b(0x26e))var _0x488916=users[_0x56c00b(0x247)];else{if(_0x158faf[0x0][_0x56c00b(0x1d5)]=='Chinese')var _0x488916=users[_0x56c00b(0x26f)];else{if(_0x158faf[0x0][_0x56c00b(0x1d5)]==_0x56c00b(0x1f0))var _0x488916=users[_0x56c00b(0x203)];}}}}}}}_0x13c959[_0x56c00b(0x220)](_0x56c00b(0x241),{'success':_0x4ba44e[_0x56c00b(0x209)]('success'),'errors':_0x4ba44e[_0x56c00b(0x209)](_0x56c00b(0x24d)),'master_shop':_0x158faf,'profile':_0x1848c7,'role':_0x23ce81,'language':_0x488916,'sales_order':_0x2e3f9c});}catch(_0x2c1ddd){}}),module[a0_0x5c8044(0x208)]=router;