function a0_0x5666(_0x1b63ec,_0x44cb58){var _0x5d9250=a0_0x5d92();return a0_0x5666=function(_0x56668a,_0x53ba03){_0x56668a=_0x56668a-0x192;var _0x2aebe8=_0x5d9250[_0x56668a];return _0x2aebe8;},a0_0x5666(_0x1b63ec,_0x44cb58);}var a0_0x258075=a0_0x5666;(function(_0x3c8f57,_0x516de2){var _0x1f41a0=a0_0x5666,_0x4e28cd=_0x3c8f57();while(!![]){try{var _0x4b656b=-parseInt(_0x1f41a0(0x1ac))/0x1*(parseInt(_0x1f41a0(0x1d1))/0x2)+-parseInt(_0x1f41a0(0x1b2))/0x3+-parseInt(_0x1f41a0(0x1c0))/0x4*(parseInt(_0x1f41a0(0x20a))/0x5)+parseInt(_0x1f41a0(0x1e4))/0x6+parseInt(_0x1f41a0(0x1bd))/0x7*(-parseInt(_0x1f41a0(0x19e))/0x8)+parseInt(_0x1f41a0(0x1a4))/0x9*(-parseInt(_0x1f41a0(0x1f1))/0xa)+-parseInt(_0x1f41a0(0x1ab))/0xb*(-parseInt(_0x1f41a0(0x200))/0xc);if(_0x4b656b===_0x516de2)break;else _0x4e28cd['push'](_0x4e28cd['shift']());}catch(_0x3dabb9){_0x4e28cd['push'](_0x4e28cd['shift']());}}}(a0_0x5d92,0xb5eb6));const express=require(a0_0x258075(0x202)),app=express(),router=express[a0_0x258075(0x1c6)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x258075(0x1dc)),auth=require(a0_0x258075(0x21b)),users=require('../public/language/languages.json'),excelJS=require(a0_0x258075(0x1d2)),xlsx=require(a0_0x258075(0x203)),mongoose=require('mongoose'),{ObjectId}=require('mongodb'),nodemailer=require(a0_0x258075(0x1d5));router['get'](a0_0x258075(0x1c5),auth,async(_0x11ae18,_0x20ed38)=>{var _0x19d25e=a0_0x258075;try{const _0x5ac770=await master_shop[_0x19d25e(0x1eb)](),_0x155f08=_0x11ae18['user'],_0x2feb9c=await profile['findOne']({'email':_0x155f08[_0x19d25e(0x207)]}),_0x11a2d7=await staff[_0x19d25e(0x1cf)]({'email':_0x155f08[_0x19d25e(0x207)]}),_0x3f4bef=await customer[_0x19d25e(0x1eb)]({'agent_id':_0x11a2d7[_0x19d25e(0x1aa)]}),_0x588699=mongoose[_0x19d25e(0x1ad)][_0x19d25e(0x208)],_0x2869ea=_0x11ae18[_0x19d25e(0x226)]['id'],_0x5e108e=await sales_order['findById'](_0x2869ea),_0x298023=await sales_order[_0x19d25e(0x20d)]([{'$match':{'_id':_0x588699(_0x2869ea)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x19d25e(0x1bf)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x19d25e(0x1da)}}},{'$lookup':{'from':_0x19d25e(0x1fc),'localField':_0x19d25e(0x20e),'foreignField':_0x19d25e(0x1aa),'as':'account_data'}},{'$unwind':'$account_data'},{'$lookup':{'from':_0x19d25e(0x1fc),'localField':_0x19d25e(0x1e5),'foreignField':_0x19d25e(0x1aa),'as':'wms_data'}},{'$unwind':_0x19d25e(0x220)}]);if(_0x5ac770[0x0]['language']==_0x19d25e(0x204))var _0x129b12=users['English'];else{if(_0x5ac770[0x0][_0x19d25e(0x1a9)]==_0x19d25e(0x1f4))var _0x129b12=users[_0x19d25e(0x1f4)];else{if(_0x5ac770[0x0][_0x19d25e(0x1a9)]==_0x19d25e(0x216))var _0x129b12=users[_0x19d25e(0x216)];else{if(_0x5ac770[0x0][_0x19d25e(0x1a9)]==_0x19d25e(0x211))var _0x129b12=users[_0x19d25e(0x211)];else{if(_0x5ac770[0x0][_0x19d25e(0x1a9)]==_0x19d25e(0x1b6))var _0x129b12=users[_0x19d25e(0x1b6)];else{if(_0x5ac770[0x0][_0x19d25e(0x1a9)]=='Portuguese\x20(BR)')var _0x129b12=users[_0x19d25e(0x1ea)];else{if(_0x5ac770[0x0]['language']=='Chinese')var _0x129b12=users[_0x19d25e(0x1a3)];else{if(_0x5ac770[0x0][_0x19d25e(0x1a9)]==_0x19d25e(0x21e))var _0x129b12=users[_0x19d25e(0x193)];}}}}}}}_0x20ed38[_0x19d25e(0x201)]('warehouse_approval',{'success':_0x11ae18[_0x19d25e(0x1cd)](_0x19d25e(0x1db)),'errors':_0x11ae18[_0x19d25e(0x1cd)]('errors'),'master_shop':_0x5ac770,'profile':_0x2feb9c,'role':_0x155f08,'language':_0x129b12,'customer':_0x3f4bef,'sales_sa':_0x5e108e,'approvers':_0x298023[0x0],'the_id':_0x2869ea});}catch(_0x2fd5db){console[_0x19d25e(0x217)](_0x2fd5db);}}),router[a0_0x258075(0x1bc)](a0_0x258075(0x1c5),auth,async(_0x588c26,_0x57ddf6)=>{var _0x51d257=a0_0x258075;try{const {date:_0x4d6ea3,invoice_data:_0x388e90,wms_confirm:_0x36213a,the_id_val:_0x16d2cd,prod_id:_0x5f06f0,SCRN:_0x4d17c9,ReqBy:_0x180218,dateofreq:_0x3cabd7,PO_number:_0x4a1963,warehouse_name:_0x53d1da,typeservicesData:_0x569a13,typevehicle:_0x55c72b,destination:_0x4bcb82,deliverydate:_0x26cf0e,driver:_0xf08a76,plate:_0x549e5f,van:_0x1c8e31,DRSI:_0x1743bf,TSU:_0x3eaa9f,TFU:_0x1643b3,note:_0x1d25a3}=_0x588c26[_0x51d257(0x22d)],_0x5c11f7=await sales_order[_0x51d257(0x22c)](_0x16d2cd);if(typeof _0x5f06f0=='string')var _0xc4174d=[_0x588c26[_0x51d257(0x22d)][_0x51d257(0x197)]],_0x57b944=[_0x588c26[_0x51d257(0x22d)][_0x51d257(0x21f)]],_0x568864=[_0x588c26[_0x51d257(0x22d)]['data_loc']];else var _0xc4174d=[..._0x588c26[_0x51d257(0x22d)][_0x51d257(0x197)]],_0x57b944=[..._0x588c26[_0x51d257(0x22d)][_0x51d257(0x21f)]],_0x568864=[..._0x588c26[_0x51d257(0x22d)][_0x51d257(0x20c)]];const _0x1ac473=_0xc4174d['map'](_0x3bfe14=>{return _0x3bfe14={'prod_id':_0x3bfe14};});_0x568864[_0x51d257(0x205)]((_0x2e77c8,_0xa3708b)=>{var _0xe8b82a=_0x51d257,_0x43849b=_0x2e77c8['split']('~');_0x1ac473[_0xa3708b][_0xe8b82a(0x222)]=_0x43849b[0x0],_0x1ac473[_0xa3708b][_0xe8b82a(0x196)]=_0x43849b[0x1];}),_0x57b944[_0x51d257(0x205)]((_0x2f0b83,_0x479cf2)=>{var _0x3af84b=_0x51d257;_0x1ac473[_0x479cf2][_0x3af84b(0x1b0)]=_0x2f0b83;});var _0x345f43=[],_0x48a24e=[],_0x3ff268=[],_0x2a0b76=[],_0x10f41b=[],_0x371337=[],_0x433695=[],_0x4cc880=[],_0x7fb10c=[],_0x16d24e=[],_0x2977c2=[],_0x4094e3=[],_0x5795ca=[],_0x123d41=[],_0x5c4dc4=[],_0x18131=[],_0x2c8375=[],_0x2dbe40=[],_0x2aa686=[],_0x27e16c=[];for(let _0x3e52d4=0x0;_0x3e52d4<=_0x1ac473[_0x51d257(0x1c4)]-0x1;_0x3e52d4++){const _0x240d5a=_0x1ac473[_0x3e52d4],_0x8501b2=mongoose['Types'][_0x51d257(0x208)];var _0x12910f=await warehouse['aggregate']([{'$match':{'_id':_0x8501b2(_0x240d5a[_0x51d257(0x222)])}},{'$unwind':_0x51d257(0x227)},{'$match':{'product_details._id':_0x8501b2(_0x240d5a[_0x51d257(0x196)])}}]),_0x3a54c5=0x0;for(let _0x3d5098=0x0;_0x3d5098<=_0x12910f['length']-0x1;_0x3d5098++){var _0x58c35a=_0x12910f[_0x3d5098];_0x58c35a[_0x51d257(0x206)][_0x51d257(0x224)]<_0x240d5a[_0x51d257(0x1b0)]&&_0x3a54c5++;}if(_0x3a54c5>0x0)return _0x588c26[_0x51d257(0x1cd)](_0x51d257(0x1a5),_0x51d257(0x19d)),_0x57ddf6[_0x51d257(0x1de)](_0x51d257(0x231));var _0x3cc0a0=0x0;for(let _0x4c9b2b=0x0;_0x4c9b2b<=_0x12910f[_0x51d257(0x1c4)]-0x1;_0x4c9b2b++){var _0x58c35a=_0x12910f[_0x4c9b2b];_0x58c35a[_0x51d257(0x206)]['product_stock']>_0x240d5a[_0x51d257(0x1b0)]&&(_0x345f43['push'](_0x58c35a['product_details'][_0x51d257(0x1fb)]),_0x48a24e[_0x51d257(0x1ff)](_0x58c35a[_0x51d257(0x206)]['product_stock']),_0x3ff268[_0x51d257(0x1ff)](_0x240d5a[_0x51d257(0x1b0)]),_0x2a0b76['push'](_0x58c35a[_0x51d257(0x206)][_0x51d257(0x21d)]),_0x10f41b[_0x51d257(0x1ff)](_0x58c35a[_0x51d257(0x206)][_0x51d257(0x22e)]),_0x371337[_0x51d257(0x1ff)](_0x58c35a[_0x51d257(0x206)][_0x51d257(0x22a)]),_0x433695[_0x51d257(0x1ff)](_0x58c35a[_0x51d257(0x206)][_0x51d257(0x213)]),_0x4cc880[_0x51d257(0x1ff)](_0x58c35a[_0x51d257(0x206)][_0x51d257(0x209)]),_0x7fb10c['push'](_0x58c35a[_0x51d257(0x206)]['unit']),_0x16d24e['push'](_0x58c35a[_0x51d257(0x206)][_0x51d257(0x1e7)]),_0x2977c2[_0x51d257(0x1ff)](_0x58c35a['product_details']['batch_code']),_0x4094e3[_0x51d257(0x1ff)](_0x58c35a[_0x51d257(0x206)][_0x51d257(0x1a0)]),_0x5795ca['push'](_0x58c35a[_0x51d257(0x206)]['production_date']),_0x123d41[_0x51d257(0x1ff)](_0x58c35a[_0x51d257(0x206)][_0x51d257(0x230)]),_0x5c4dc4[_0x51d257(0x1ff)](_0x58c35a[_0x51d257(0x206)]['product_cat']),_0x18131[_0x51d257(0x1ff)](_0x58c35a['room']),_0x2c8375['push'](_0x58c35a[_0x51d257(0x206)]['invoice']),_0x2dbe40[_0x51d257(0x1ff)](_0x58c35a[_0x51d257(0x206)][_0x51d257(0x1aa)]),_0x2aa686[_0x51d257(0x1ff)](_0x58c35a['product_details']['uuid']),_0x27e16c[_0x51d257(0x1ff)](_0x58c35a['product_details']['gross_price']),_0x3cc0a0++);}}const _0x1506ed=_0x345f43[_0x51d257(0x218)](_0x48d8a1=>{return _0x48d8a1={'product_name':_0x48d8a1};});_0x48a24e[_0x51d257(0x205)]((_0x5a9f2a,_0x3c4713)=>{var _0x495bc3=_0x51d257;_0x1506ed[_0x3c4713][_0x495bc3(0x1cc)]=_0x5a9f2a;}),_0x3ff268[_0x51d257(0x205)]((_0x4dfec4,_0x392c8f)=>{var _0x357eac=_0x51d257;_0x1506ed[_0x392c8f]['quantity']=Math[_0x357eac(0x1a2)](_0x4dfec4);}),_0x27e16c['forEach']((_0x59bc81,_0x57fcbc)=>{var _0x3399f3=_0x51d257;_0x1506ed[_0x57fcbc][_0x3399f3(0x1e2)]=_0x59bc81;}),_0x2aa686[_0x51d257(0x205)]((_0x3b4e8f,_0x5e5c2c)=>{var _0x4ceef7=_0x51d257;_0x1506ed[_0x5e5c2c][_0x4ceef7(0x210)]=_0x3b4e8f;}),_0x2dbe40['forEach']((_0x12ddb9,_0x2f5d94)=>{var _0x480b81=_0x51d257;_0x1506ed[_0x2f5d94][_0x480b81(0x221)]=_0x12ddb9;}),_0x2a0b76[_0x51d257(0x205)]((_0x24ba87,_0x377d3e)=>{var _0x3c985e=_0x51d257;_0x1506ed[_0x377d3e][_0x3c985e(0x21d)]=_0x24ba87;}),_0x10f41b[_0x51d257(0x205)]((_0x2894c1,_0x1e05f1)=>{var _0x5895e4=_0x51d257;_0x1506ed[_0x1e05f1][_0x5895e4(0x22e)]=_0x2894c1;}),_0x371337['forEach']((_0x3ae0b9,_0x5d8cb6)=>{var _0x233759=_0x51d257;_0x1506ed[_0x5d8cb6][_0x233759(0x22a)]=_0x3ae0b9;}),_0x433695['forEach']((_0x432447,_0x1b5db4)=>{var _0x446fce=_0x51d257;_0x1506ed[_0x1b5db4][_0x446fce(0x213)]=_0x432447;}),_0x4cc880[_0x51d257(0x205)]((_0x147182,_0x475c9b)=>{var _0x4022c4=_0x51d257;_0x1506ed[_0x475c9b][_0x4022c4(0x209)]=_0x147182;}),_0x7fb10c[_0x51d257(0x205)]((_0x300570,_0x286f9a)=>{var _0x4c1322=_0x51d257;_0x1506ed[_0x286f9a][_0x4c1322(0x223)]=_0x300570;}),_0x16d24e[_0x51d257(0x205)]((_0x3bad1b,_0x414c46)=>{var _0x3e9289=_0x51d257;_0x1506ed[_0x414c46][_0x3e9289(0x1e7)]=_0x3bad1b;}),_0x2977c2[_0x51d257(0x205)]((_0x5b6936,_0x2fa834)=>{var _0x27f4ab=_0x51d257;_0x1506ed[_0x2fa834][_0x27f4ab(0x1a1)]=_0x5b6936;}),_0x4094e3['forEach']((_0x213b74,_0x5a5e4e)=>{_0x1506ed[_0x5a5e4e]['expiry_date']=_0x213b74;}),_0x5795ca[_0x51d257(0x205)]((_0x4fb8c7,_0x163c41)=>{var _0x38c0de=_0x51d257;_0x1506ed[_0x163c41][_0x38c0de(0x1c2)]=_0x4fb8c7;}),_0x123d41[_0x51d257(0x205)]((_0x1557c8,_0x548752)=>{var _0x542040=_0x51d257;_0x1506ed[_0x548752][_0x542040(0x1a6)]=_0x1557c8;}),_0x5c4dc4[_0x51d257(0x205)]((_0x1a07aa,_0x21f931)=>{var _0xcbc0d3=_0x51d257;_0x1506ed[_0x21f931][_0xcbc0d3(0x1ee)]=_0x1a07aa;}),_0x18131[_0x51d257(0x205)]((_0x582a66,_0x4d738e)=>{_0x1506ed[_0x4d738e]['room_name']=_0x582a66;}),_0x2c8375[_0x51d257(0x205)]((_0x1d8552,_0x28851a)=>{var _0x332f09=_0x51d257;_0x1506ed[_0x28851a][_0x332f09(0x225)]=_0x1d8552,_0x1506ed[_0x28851a][_0x332f09(0x1be)]=_0x4d6ea3;});const _0x1901ea=new invoice_for_outgoing();await _0x1901ea[_0x51d257(0x232)](),_0x2c8375[_0x51d257(0x205)]((_0x19a5f3,_0xfc51e9)=>{var _0xb8a614=_0x51d257;_0x1506ed[_0xfc51e9][_0xb8a614(0x1ca)]=_0xb8a614(0x21c)+_0x1901ea[_0xb8a614(0x1e6)][_0xb8a614(0x1c7)]()[_0xb8a614(0x214)](0x8,'0');});const _0x56137e=_0x1506ed[_0x51d257(0x1f7)](_0x1e593f=>_0x1e593f['quantity']!=='0'&&_0x1e593f['quantity']!==''),_0x39ee20=new sales_finished({'invoice':_0x51d257(0x21c)+_0x1901ea['invoice_init'][_0x51d257(0x1c7)]()['padStart'](0x8,'0'),'date':_0x4d6ea3,'warehouse_name':_0x53d1da,'sale_product':_0x56137e,'note':_0x1d25a3,'SCRN':_0x4d17c9,'finalize':_0x51d257(0x1bb),'ReqBy':_0x180218,'dateofreq':_0x3cabd7,'PO_number':_0x4a1963,'typeservicesData':_0x569a13,'typevehicle':_0x55c72b,'destination':_0x4bcb82,'deliverydate':_0x26cf0e,'driver':_0xf08a76,'plate':_0x549e5f,'van':_0x1c8e31,'DRSI':_0x1743bf,'TSU':_0x3eaa9f,'TFU':_0x1643b3}),_0x239805=await _0x39ee20[_0x51d257(0x232)](),_0x42d15e=new Date(),_0x15a604=_0x42d15e[_0x51d257(0x1fe)]();_0x5c11f7['wms_account_confirm']=_0x36213a,_0x5c11f7[_0x51d257(0x1d3)]=_0x15a604,_0x5c11f7[_0x51d257(0x1a8)]='OUT-'+_0x1901ea[_0x51d257(0x1e6)]['toString']()[_0x51d257(0x214)](0x8,'0'),_0x5c11f7[_0x51d257(0x215)]=_0x239805['_id'],await _0x5c11f7[_0x51d257(0x232)]();const _0xde039a=await master_shop[_0x51d257(0x1eb)](),_0x5d75ae=await email_settings[_0x51d257(0x1cf)]();let _0x15baac=nodemailer['createTransport']({'host':_0x5d75ae[_0x51d257(0x1f5)],'port':Number(_0x5d75ae[_0x51d257(0x1ae)]),'secure':![],'auth':{'user':_0x5d75ae[_0x51d257(0x207)],'pass':_0x5d75ae[_0x51d257(0x1f3)]}});const _0x4dbf48=_0x588c26[_0x51d257(0x1e8)]+_0x51d257(0x1ec)+_0x588c26[_0x51d257(0x1c1)]['host'];var _0x3bea8a=_0x5c11f7[_0x51d257(0x1f8)],_0x4d4bca='',_0x187c9c,_0x5d45f3=0x0;for(_0x187c9c in _0x3bea8a){_0x4d4bca+=_0x51d257(0x229)+_0x51d257(0x235)+_0x3bea8a[_0x187c9c][_0x51d257(0x1fb)]+_0x51d257(0x1e1)+_0x51d257(0x235)+_0x3bea8a[_0x187c9c][_0x51d257(0x22a)]+_0x51d257(0x1e1)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x3bea8a[_0x187c9c][_0x51d257(0x1b4)]+_0x51d257(0x1e1)+_0x51d257(0x235)+_0x3bea8a[_0x187c9c][_0x51d257(0x223)]+'</td>'+_0x51d257(0x1f0),_0x5d45f3+=parseInt(_0x3bea8a[_0x187c9c][_0x51d257(0x1b4)]);}let _0x580795={'from':_0x5d75ae[_0x51d257(0x207)],'to':'christian.villamer@jakagroup.com','subject':_0x51d257(0x1af),'attachments':[{'filename':'Logo.png','path':__dirname+_0x51d257(0x1f9)+_0x51d257(0x192)+_0xde039a[0x0]['image'],'cid':_0x51d257(0x1d4)}],'html':_0x51d257(0x19f)+_0x51d257(0x1c8)+_0x51d257(0x1cb)+_0x51d257(0x1d0)+_0x51d257(0x19c)+_0x51d257(0x1e3)+_0x51d257(0x19c)+_0x51d257(0x1c3)+'</div>'+_0x51d257(0x19c)+_0x51d257(0x19b)+'</div>'+_0x51d257(0x1f6)+_0x51d257(0x1dd)+_0x51d257(0x19c)+_0x51d257(0x1f6)+'<div>'+_0x51d257(0x219)+_0x51d257(0x1f6)+_0x51d257(0x19c)+_0x51d257(0x1d9)+_0x5c11f7[_0x51d257(0x225)]+_0x51d257(0x1b9)+_0x51d257(0x1b5)+_0x5c11f7[_0x51d257(0x1d7)]+'</b></span>\x20<br><br>'+'</div>'+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x51d257(0x1ed)+'<tr>'+_0x51d257(0x1b8)+_0x51d257(0x1e9)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x51d257(0x1ce)+_0x51d257(0x1f0)+'</thead>'+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x4d4bca+'\x20'+_0x51d257(0x195)+_0x51d257(0x1d6)+'<div>'+_0x51d257(0x22f)+_0x51d257(0x1b1)+_0x51d257(0x234)+'</div>'+'<div>'+_0x51d257(0x1fd)+'<h5>\x20JEC\x20SMS\x20</h5>'+'</div>'+'</div>'+_0x51d257(0x20f)+'</body></html>'};_0x15baac['sendMail'](_0x580795,function(_0x469a7e,_0x5a4aac){var _0x2f2a0c=_0x51d257;_0x469a7e?(console[_0x2f2a0c(0x217)](_0x469a7e),console[_0x2f2a0c(0x217)]('Error\x20Occurs')):console['log'](_0x2f2a0c(0x1fa));}),_0x588c26[_0x51d257(0x1cd)](_0x51d257(0x1db),'Sales\x20Add\x20successfully'),_0x57ddf6['redirect'](_0x51d257(0x212)+_0x239805[_0x51d257(0x1aa)]),_0x57ddf6['json'](_0x56137e);return;}catch(_0x281758){}}),router[a0_0x258075(0x22b)]('/view_sales_order/:id',auth,async(_0x1aa3bc,_0x383583)=>{var _0x34f93d=a0_0x258075;try{const _0x3586a0=await master_shop[_0x34f93d(0x1eb)](),_0x290ba1=_0x1aa3bc[_0x34f93d(0x21a)],_0x36f30b=await profile[_0x34f93d(0x1cf)]({'email':_0x290ba1[_0x34f93d(0x207)]}),_0x288102=await staff['findOne']({'email':_0x290ba1[_0x34f93d(0x207)]}),_0x266e37=await customer[_0x34f93d(0x1eb)]({'agent_id':_0x288102[_0x34f93d(0x1aa)]}),_0x1e89c1=mongoose[_0x34f93d(0x1ad)][_0x34f93d(0x208)],_0x495f32=_0x1aa3bc[_0x34f93d(0x226)]['id'],_0x536fc8=await sales_order[_0x34f93d(0x22c)](_0x495f32),_0x352192=await sales_order[_0x34f93d(0x20d)]([{'$match':{'_id':_0x1e89c1(_0x495f32)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x34f93d(0x1bf)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x34f93d(0x1da)}}},{'$lookup':{'from':_0x34f93d(0x1fc),'localField':_0x34f93d(0x20e),'foreignField':_0x34f93d(0x1aa),'as':_0x34f93d(0x1d8)}},{'$unwind':_0x34f93d(0x194)},{'$lookup':{'from':_0x34f93d(0x1fc),'localField':_0x34f93d(0x1e5),'foreignField':_0x34f93d(0x1aa),'as':_0x34f93d(0x228)}},{'$unwind':_0x34f93d(0x220)}]);if(_0x3586a0[0x0][_0x34f93d(0x1a9)]==_0x34f93d(0x204))var _0x4e3b96=users['English'];else{if(_0x3586a0[0x0][_0x34f93d(0x1a9)]=='Hindi')var _0x4e3b96=users[_0x34f93d(0x1f4)];else{if(_0x3586a0[0x0][_0x34f93d(0x1a9)]==_0x34f93d(0x216))var _0x4e3b96=users[_0x34f93d(0x216)];else{if(_0x3586a0[0x0][_0x34f93d(0x1a9)]==_0x34f93d(0x211))var _0x4e3b96=users['Spanish'];else{if(_0x3586a0[0x0][_0x34f93d(0x1a9)]=='French')var _0x4e3b96=users[_0x34f93d(0x1b6)];else{if(_0x3586a0[0x0]['language']==_0x34f93d(0x1a7))var _0x4e3b96=users[_0x34f93d(0x1ea)];else{if(_0x3586a0[0x0][_0x34f93d(0x1a9)]==_0x34f93d(0x1a3))var _0x4e3b96=users['Chinese'];else{if(_0x3586a0[0x0][_0x34f93d(0x1a9)]==_0x34f93d(0x21e))var _0x4e3b96=users['Arabic'];}}}}}}}_0x383583[_0x34f93d(0x201)](_0x34f93d(0x199),{'success':_0x1aa3bc['flash'](_0x34f93d(0x1db)),'errors':_0x1aa3bc[_0x34f93d(0x1cd)]('errors'),'master_shop':_0x3586a0,'profile':_0x36f30b,'role':_0x290ba1,'language':_0x4e3b96,'customer':_0x266e37,'sales_sa':_0x536fc8,'approvers':_0x352192[0x0],'the_id':_0x495f32});}catch(_0x47c951){console[_0x34f93d(0x217)](_0x47c951);}}),router[a0_0x258075(0x1bc)](a0_0x258075(0x1e0),auth,async(_0x44d8df,_0x1d0030)=>{var _0x1e2bfb=a0_0x258075;try{const {warehouse_name:_0x176102,product_code:_0x4af810}=_0x44d8df['body'],_0x36c8dc=await warehouse[_0x1e2bfb(0x20d)]([{'$match':{'name':_0x176102}},{'$unwind':_0x1e2bfb(0x227)},{'$match':{'product_details.product_code':_0x4af810}},{'$group':{'_id':{'room':'$room','_id':'$_id'}}}]);_0x1d0030[_0x1e2bfb(0x1c9)](_0x36c8dc);}catch(_0x1552c1){}}),router[a0_0x258075(0x1bc)](a0_0x258075(0x1ef),auth,async(_0x3c8af2,_0x4e9509)=>{var _0x48cdf2=a0_0x258075;try{const {warehouse_name:_0x4db906,product_code:_0x2e91a8,room_name:_0x2cc83d}=_0x3c8af2[_0x48cdf2(0x22d)];console[_0x48cdf2(0x217)](_0x3c8af2[_0x48cdf2(0x22d)]);const _0x4b516d=await warehouse[_0x48cdf2(0x20d)]([{'$match':{'name':_0x4db906,'room':_0x2cc83d}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x2e91a8}},{'$group':{'_id':{'main_id':_0x48cdf2(0x233),'detl_id':_0x48cdf2(0x20b),'product_name':'$product_details.product_name','product_code':_0x48cdf2(0x198),'level':_0x48cdf2(0x1b3),'bay':_0x48cdf2(0x1df),'stocks':'$product_details.product_stock'}}}]);_0x4e9509['json'](_0x4b516d);}catch(_0x575808){}}),router[a0_0x258075(0x22b)](a0_0x258075(0x1b7),auth,async(_0x43eaff,_0x56a460)=>{var _0x5316bf=a0_0x258075;try{const {sttaff_id:_0x73ee3c,email:_0x15c2d1,warehouse:_0x50eb8d}=_0x43eaff[_0x5316bf(0x21a)],_0x867507=await master_shop[_0x5316bf(0x1eb)](),_0xae22d8=_0x43eaff[_0x5316bf(0x21a)],_0x2b6376=await profile[_0x5316bf(0x1cf)]({'email':_0xae22d8[_0x5316bf(0x207)]}),_0x555b01=await sales_order['find']({'wms_account_id':_0x73ee3c});if(_0x867507[0x0]['language']==_0x5316bf(0x204))var _0x563a86=users[_0x5316bf(0x1ba)];else{if(_0x867507[0x0][_0x5316bf(0x1a9)]==_0x5316bf(0x1f4))var _0x563a86=users[_0x5316bf(0x1f4)];else{if(_0x867507[0x0]['language']==_0x5316bf(0x216))var _0x563a86=users[_0x5316bf(0x216)];else{if(_0x867507[0x0]['language']==_0x5316bf(0x211))var _0x563a86=users[_0x5316bf(0x211)];else{if(_0x867507[0x0][_0x5316bf(0x1a9)]==_0x5316bf(0x1b6))var _0x563a86=users[_0x5316bf(0x1b6)];else{if(_0x867507[0x0][_0x5316bf(0x1a9)]=='Portuguese\x20(BR)')var _0x563a86=users[_0x5316bf(0x1ea)];else{if(_0x867507[0x0][_0x5316bf(0x1a9)]==_0x5316bf(0x1a3))var _0x563a86=users[_0x5316bf(0x1a3)];else{if(_0x867507[0x0]['language']==_0x5316bf(0x21e))var _0x563a86=users[_0x5316bf(0x193)];}}}}}}}_0x56a460[_0x5316bf(0x201)](_0x5316bf(0x19a),{'success':_0x43eaff['flash'](_0x5316bf(0x1db)),'errors':_0x43eaff[_0x5316bf(0x1cd)](_0x5316bf(0x1a5)),'master_shop':_0x867507,'profile':_0x2b6376,'role':_0xae22d8,'language':_0x563a86,'sales_order':_0x555b01});}catch(_0x251ee5){}}),module[a0_0x258075(0x1f2)]=router;function a0_0x5d92(){var _0x592638=['../middleware/auth','OUT-','primary_code','Arabic\x20(ae)','qty','$wms_data','id_transaction_from','warehouse_id','unit','product_stock','invoice','params','$product_details','wms_data','<tr>','product_code','get','findById','body','secondary_code','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','maxPerUnit','back','save','$_id','<br><br><br>','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','/upload/','Arabic','$account_data','</tbody>','warehouse_detl','prod_id','$product_details.product_code','view_accounting_approval','warehouse_approval_All','<h2>\x20JEC\x20SMS\x20</h2>','<div>','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','1545392bAvWPJ','<!DOCTYPE\x20html>','expiry_date','batch_code','abs','Chinese','54846BpVZwY','errors','maxperunit','Portuguese\x20(BR)','document_number_out','language','_id','66sXDkgD','3QrKpOH','Types','port','Email\x20for\x20Customer','request_qty','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','4052541Umxfph','$product_details.level','quantity','<span>\x20Request\x20Date:\x20<b>','French','/data/All','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','</b></span>\x20<br>','English','False','post','7IQEcem','date_data','$accounting_account_id','601304IcCswx','headers','production_date','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','length','/:id','Router','toString','<html><head><title></title>','json','outgoing_invoice','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','stock','flash','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','findOne','</head><body>','438054JKTDyt','exceljs','wms_account_date','logo','nodemailer','</table>','date','account_data','<span>\x20Request\x20ID:\x20<b>','$wms_account_id','success','../models/all_models','<hr\x20class=\x22my-3\x22>','redirect','$product_details.bay','/data/data_rack','</td>','gross_price','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','8848752wZZGIP','wms_account_id','invoice_init','secondary_unit','protocol','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','Portuguese','find','://','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','prod_cat','/data/data_loc','</tr>','70rcFjbj','exports','password','Hindi','host','</div>','filter','sale_product','/../public','Email\x20sent\x20successfully','product_name','staffs','<strong>\x20Regards\x20</strong>','toLocaleDateString','push','3328872kqgHbO','render','express','xlsx','English\x20(US)','forEach','product_details','email','ObjectId','bay','5cgGXRv','$product_details._id','data_loc','aggregate','accounting_account_id','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','uuid','Spanish','/all_sales_finished/preview/','level','padStart','outgoing_id','German','log','map','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','user'];a0_0x5d92=function(){return _0x592638;};return a0_0x5d92();}