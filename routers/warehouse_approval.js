function a0_0x13f3(_0x2df531,_0x1691bb){var _0x4c692d=a0_0x4c69();return a0_0x13f3=function(_0x13f316,_0x148500){_0x13f316=_0x13f316-0xa2;var _0x1df50f=_0x4c692d[_0x13f316];return _0x1df50f;},a0_0x13f3(_0x2df531,_0x1691bb);}var a0_0x76b1b0=a0_0x13f3;(function(_0x46877c,_0x4c3d4e){var _0x19bdde=a0_0x13f3,_0x136f6c=_0x46877c();while(!![]){try{var _0x5cb917=parseInt(_0x19bdde(0xc8))/0x1*(parseInt(_0x19bdde(0x135))/0x2)+-parseInt(_0x19bdde(0x11f))/0x3+parseInt(_0x19bdde(0x138))/0x4+parseInt(_0x19bdde(0xe8))/0x5*(-parseInt(_0x19bdde(0x111))/0x6)+-parseInt(_0x19bdde(0x117))/0x7*(parseInt(_0x19bdde(0xcb))/0x8)+-parseInt(_0x19bdde(0xdc))/0x9+parseInt(_0x19bdde(0xbc))/0xa*(parseInt(_0x19bdde(0xe3))/0xb);if(_0x5cb917===_0x4c3d4e)break;else _0x136f6c['push'](_0x136f6c['shift']());}catch(_0x27b229){_0x136f6c['push'](_0x136f6c['shift']());}}}(a0_0x4c69,0x1c93a));function a0_0x4c69(){var _0x3641ea=['Router','accounting_account_id','</tbody>','prod_id','christian.villamer@jakagroup.com','1xTuqLm','<br><br><br>','findOne','24XiORTI','view_accounting_approval','date','<h2>\x20JEC\x20SMS\x20</h2>','$product_details.bay','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','ObjectId','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','../public/language/languages.json','Spanish','image','uuid','wms_account_confirm','://','account_data','push','OUT-','120069zAWyOS','sendMail','logo','nodemailer','../middleware/auth','get','body','3605613NwBGGr','sale_product','wms_account_id','$product_details.product_stock','product_name','40305OcfQsn','Error\x20Occurs','findById','Portuguese\x20(BR)','flash','product_details','German','warehouse_id','prod_cat','</b></span>\x20<br>','room','$room','/:id','json','product_code','$account_data','</body></html>','$wms_data','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','_id','$product_details.product_code','<tr>','request_qty','wms_account_date','../models/all_models','redirect','</b></span>\x20<br><br>','success','padStart','<div>','/data/data_loc','Portuguese','Hindi','staffs','$_id','secondary_unit','$accounting_account_id','mongoose','production_date','<html><head><title></title>','find','162ceQOfL','warehouse_approval','English\x20(US)','$wms_account_id','</head><body>','Sales\x20Add\x20successfully','407477QEEiiG','Arabic','createTransport','errors','save','invoice_init','secondary_code','<h5>\x20JEC\x20SMS\x20</h5>','288012OnpZgr','password','aggregate','maxperunit','qty','headers','primary_code','unit','warehouse_detl','<tbody\x20style=\x22text-align:\x20center;\x22>','forEach','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','$product_details.product_name','expiry_date','outgoing_invoice','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','user','/data/data_rack','$product_details','log','map','</td>','195246sNbYcg','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','773076VMrcEZ','xlsx','bay','wms_data','level','exceljs','toString','batch_code','<!DOCTYPE\x20html>','</tr>','/view_sales_order/:id','document_number_out','exports','quantity','protocol','length','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','express','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','render','<span>\x20Request\x20ID:\x20<b>','invoice','post','French','language','Arabic\x20(ae)','Types','port','</div>','$product_details._id','product_stock','host','10eUSFWs','English','params','Logo.png','Chinese','gross_price','email'];a0_0x4c69=function(){return _0x3641ea;};return a0_0x4c69();}const express=require(a0_0x76b1b0(0xad)),app=express(),router=express[a0_0x76b1b0(0xc3)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x76b1b0(0x100)),auth=require(a0_0x76b1b0(0xe0)),users=require(a0_0x76b1b0(0xd3)),excelJS=require(a0_0x76b1b0(0x13d)),xlsx=require(a0_0x76b1b0(0x139)),mongoose=require(a0_0x76b1b0(0x10d)),{ObjectId}=require('mongodb'),nodemailer=require(a0_0x76b1b0(0xdf));router[a0_0x76b1b0(0xe1)](a0_0x76b1b0(0xf4),auth,async(_0x5053b5,_0x2df301)=>{var _0x228a93=a0_0x76b1b0;try{const _0x3a6a0f=await master_shop['find'](),_0x2e794b=_0x5053b5['user'],_0x564250=await profile['findOne']({'email':_0x2e794b[_0x228a93(0xc2)]}),_0x44368f=await staff[_0x228a93(0xca)]({'email':_0x2e794b['email']}),_0x58313c=await customer[_0x228a93(0x110)]({'agent_id':_0x44368f[_0x228a93(0xfb)]}),_0xc96945=mongoose['Types'][_0x228a93(0xd1)],_0x1f5a24=_0x5053b5[_0x228a93(0xbe)]['id'],_0x2f60c5=await sales_order[_0x228a93(0xea)](_0x1f5a24),_0x40c88d=await sales_order[_0x228a93(0x121)]([{'$match':{'_id':_0xc96945(_0x1f5a24)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x228a93(0x10c)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x228a93(0x114)}}},{'$lookup':{'from':_0x228a93(0x109),'localField':_0x228a93(0xc4),'foreignField':_0x228a93(0xfb),'as':_0x228a93(0xd9)}},{'$unwind':_0x228a93(0xf7)},{'$lookup':{'from':'staffs','localField':_0x228a93(0xe5),'foreignField':_0x228a93(0xfb),'as':_0x228a93(0x13b)}},{'$unwind':_0x228a93(0xf9)}]);if(_0x3a6a0f[0x0][_0x228a93(0xb4)]==_0x228a93(0x113))var _0x4fad98=users[_0x228a93(0xbd)];else{if(_0x3a6a0f[0x0][_0x228a93(0xb4)]==_0x228a93(0x108))var _0x4fad98=users['Hindi'];else{if(_0x3a6a0f[0x0]['language']=='German')var _0x4fad98=users[_0x228a93(0xee)];else{if(_0x3a6a0f[0x0][_0x228a93(0xb4)]==_0x228a93(0xd4))var _0x4fad98=users['Spanish'];else{if(_0x3a6a0f[0x0]['language']=='French')var _0x4fad98=users[_0x228a93(0xb3)];else{if(_0x3a6a0f[0x0][_0x228a93(0xb4)]==_0x228a93(0xeb))var _0x4fad98=users[_0x228a93(0x107)];else{if(_0x3a6a0f[0x0][_0x228a93(0xb4)]==_0x228a93(0xc0))var _0x4fad98=users[_0x228a93(0xc0)];else{if(_0x3a6a0f[0x0][_0x228a93(0xb4)]==_0x228a93(0xb5))var _0x4fad98=users[_0x228a93(0x118)];}}}}}}}_0x2df301[_0x228a93(0xaf)](_0x228a93(0x112),{'success':_0x5053b5[_0x228a93(0xec)]('success'),'errors':_0x5053b5['flash'](_0x228a93(0x11a)),'master_shop':_0x3a6a0f,'profile':_0x564250,'role':_0x2e794b,'language':_0x4fad98,'customer':_0x58313c,'sales_sa':_0x2f60c5,'approvers':_0x40c88d[0x0],'the_id':_0x1f5a24});}catch(_0x4d43c5){console['log'](_0x4d43c5);}}),router[a0_0x76b1b0(0xb2)](a0_0x76b1b0(0xf4),auth,async(_0x35a15e,_0x14d0ce)=>{var _0x561a10=a0_0x76b1b0;try{const {date:_0x296448,invoice_data:_0x52c2cc,wms_confirm:_0x56be4e,the_id_val:_0x25361,prod_id:_0x133f6e,SCRN:_0x4ca54d,ReqBy:_0x52ecd5,dateofreq:_0x23ed28,PO_number:_0x453bb5,warehouse_name:_0x28917f,typeservicesData:_0x29481c,typevehicle:_0x4b96f,destination:_0x2b2a25,deliverydate:_0x1e2a9f,driver:_0x41ccbb,plate:_0x2861c7,van:_0x388817,DRSI:_0x126272,TSU:_0x27d456,TFU:_0x1c5a31,note:_0x4f9077}=_0x35a15e[_0x561a10(0xe2)],_0x2608dd=await sales_order[_0x561a10(0xea)](_0x25361);if(typeof _0x133f6e=='string')var _0xe35cf3=[_0x35a15e[_0x561a10(0xe2)][_0x561a10(0xc6)]],_0x233abd=[_0x35a15e[_0x561a10(0xe2)][_0x561a10(0x123)]],_0x497d6b=[_0x35a15e[_0x561a10(0xe2)]['data_loc']];else var _0xe35cf3=[..._0x35a15e['body'][_0x561a10(0xc6)]],_0x233abd=[..._0x35a15e['body'][_0x561a10(0x123)]],_0x497d6b=[..._0x35a15e[_0x561a10(0xe2)]['data_loc']];const _0x210990=_0xe35cf3['map'](_0x2bde75=>{return _0x2bde75={'prod_id':_0x2bde75};});_0x497d6b[_0x561a10(0x129)]((_0x31c399,_0x57fc44)=>{var _0x5d271d=_0x561a10,_0x397f9a=_0x31c399['split']('~');_0x210990[_0x57fc44]['warehouse_id']=_0x397f9a[0x0],_0x210990[_0x57fc44][_0x5d271d(0x127)]=_0x397f9a[0x1];}),_0x233abd['forEach']((_0x3eef9e,_0x4c251f)=>{var _0x5fa43a=_0x561a10;_0x210990[_0x4c251f][_0x5fa43a(0xfe)]=_0x3eef9e;});var _0x505e42=[],_0x2a1669=[],_0x2cc1ac=[],_0x2cd219=[],_0xa07149=[],_0x3222f3=[],_0x46427f=[],_0x15d727=[],_0x55fdaa=[],_0x3d603f=[],_0x470b0c=[],_0x3063d3=[],_0x42569e=[],_0xdeec5c=[],_0x5c1c5a=[],_0x5d5acc=[],_0x21aaba=[],_0x5eb0a1=[],_0x61b6d9=[],_0x3411cb=[];for(let _0x35b51e=0x0;_0x35b51e<=_0x210990[_0x561a10(0xab)]-0x1;_0x35b51e++){const _0x3c2969=_0x210990[_0x35b51e],_0x4f4d15=mongoose[_0x561a10(0xb6)][_0x561a10(0xd1)];var _0x66af59=await warehouse['aggregate']([{'$match':{'_id':_0x4f4d15(_0x3c2969[_0x561a10(0xef)])}},{'$unwind':'$product_details'},{'$match':{'product_details._id':_0x4f4d15(_0x3c2969['warehouse_detl'])}}]),_0x930a47=0x0;for(let _0x484be3=0x0;_0x484be3<=_0x66af59[_0x561a10(0xab)]-0x1;_0x484be3++){var _0x339a79=_0x66af59[_0x484be3];_0x339a79[_0x561a10(0xed)]['product_stock']<_0x3c2969[_0x561a10(0xfe)]&&_0x930a47++;}if(_0x930a47>0x0)return _0x35a15e[_0x561a10(0xec)]('errors',_0x561a10(0x12e)),_0x14d0ce[_0x561a10(0x101)]('back');var _0x3c0baa=0x0;for(let _0x1fc305=0x0;_0x1fc305<=_0x66af59[_0x561a10(0xab)]-0x1;_0x1fc305++){var _0x339a79=_0x66af59[_0x1fc305];_0x339a79['product_details'][_0x561a10(0xba)]>_0x3c2969[_0x561a10(0xfe)]&&(_0x505e42[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)]['product_name']),_0x2a1669[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)][_0x561a10(0xba)]),_0x2cc1ac['push'](_0x3c2969['request_qty']),_0x2cd219[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)]['primary_code']),_0xa07149[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)]['secondary_code']),_0x3222f3[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)]['product_code']),_0x46427f[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)][_0x561a10(0x13c)]),_0x15d727[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)][_0x561a10(0x13a)]),_0x55fdaa[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)][_0x561a10(0x126)]),_0x3d603f[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)][_0x561a10(0x10b)]),_0x470b0c['push'](_0x339a79[_0x561a10(0xed)][_0x561a10(0xa3)]),_0x3063d3[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)][_0x561a10(0x12c)]),_0x42569e[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)][_0x561a10(0x10e)]),_0xdeec5c['push'](_0x339a79[_0x561a10(0xed)]['maxPerUnit']),_0x5c1c5a[_0x561a10(0xda)](_0x339a79['product_details']['product_cat']),_0x5d5acc[_0x561a10(0xda)](_0x339a79[_0x561a10(0xf2)]),_0x21aaba[_0x561a10(0xda)](_0x339a79['product_details'][_0x561a10(0xb1)]),_0x5eb0a1[_0x561a10(0xda)](_0x339a79[_0x561a10(0xed)][_0x561a10(0xfb)]),_0x61b6d9['push'](_0x339a79[_0x561a10(0xed)][_0x561a10(0xd6)]),_0x3411cb['push'](_0x339a79[_0x561a10(0xed)]['gross_price']),_0x3c0baa++);}}const _0x5e0da1=_0x505e42[_0x561a10(0x133)](_0x591031=>{return _0x591031={'product_name':_0x591031};});_0x2a1669['forEach']((_0x3ec5af,_0x27a754)=>{_0x5e0da1[_0x27a754]['stock']=_0x3ec5af;}),_0x2cc1ac['forEach']((_0x18c344,_0x26026b)=>{var _0x3bd7fc=_0x561a10;_0x5e0da1[_0x26026b][_0x3bd7fc(0xa9)]=Math['abs'](_0x18c344);}),_0x3411cb[_0x561a10(0x129)]((_0x46b303,_0x30dfa2)=>{var _0x191d0b=_0x561a10;_0x5e0da1[_0x30dfa2][_0x191d0b(0xc1)]=_0x46b303;}),_0x61b6d9['forEach']((_0x419af9,_0x18501d)=>{var _0x5b0c0d=_0x561a10;_0x5e0da1[_0x18501d][_0x5b0c0d(0xd6)]=_0x419af9;}),_0x5eb0a1[_0x561a10(0x129)]((_0x8aa8e9,_0x9c0632)=>{_0x5e0da1[_0x9c0632]['id_transaction_from']=_0x8aa8e9;}),_0x2cd219['forEach']((_0x4a37ac,_0x2b30a7)=>{var _0x3efbfa=_0x561a10;_0x5e0da1[_0x2b30a7][_0x3efbfa(0x125)]=_0x4a37ac;}),_0xa07149['forEach']((_0xbac142,_0x5116e2)=>{var _0x3056da=_0x561a10;_0x5e0da1[_0x5116e2][_0x3056da(0x11d)]=_0xbac142;}),_0x3222f3['forEach']((_0x17639d,_0x2e458f)=>{var _0x31ea2f=_0x561a10;_0x5e0da1[_0x2e458f][_0x31ea2f(0xf6)]=_0x17639d;}),_0x46427f['forEach']((_0x3f8d14,_0x3b51a1)=>{var _0x54e2b6=_0x561a10;_0x5e0da1[_0x3b51a1][_0x54e2b6(0x13c)]=_0x3f8d14;}),_0x15d727[_0x561a10(0x129)]((_0x4ef2e9,_0x4197cf)=>{var _0x4498c1=_0x561a10;_0x5e0da1[_0x4197cf][_0x4498c1(0x13a)]=_0x4ef2e9;}),_0x55fdaa['forEach']((_0x1c341d,_0x34769a)=>{var _0xb77a87=_0x561a10;_0x5e0da1[_0x34769a][_0xb77a87(0x126)]=_0x1c341d;}),_0x3d603f[_0x561a10(0x129)]((_0x123076,_0x231cb1)=>{_0x5e0da1[_0x231cb1]['secondary_unit']=_0x123076;}),_0x470b0c[_0x561a10(0x129)]((_0x3ba2c3,_0x4f4ddf)=>{_0x5e0da1[_0x4f4ddf]['batch_code']=_0x3ba2c3;}),_0x3063d3[_0x561a10(0x129)]((_0x2c432e,_0x349ddb)=>{var _0x302a6c=_0x561a10;_0x5e0da1[_0x349ddb][_0x302a6c(0x12c)]=_0x2c432e;}),_0x42569e[_0x561a10(0x129)]((_0x46b241,_0x32f2dc)=>{var _0x58bf9f=_0x561a10;_0x5e0da1[_0x32f2dc][_0x58bf9f(0x10e)]=_0x46b241;}),_0xdeec5c[_0x561a10(0x129)]((_0x5c911a,_0x15d588)=>{var _0x5cd819=_0x561a10;_0x5e0da1[_0x15d588][_0x5cd819(0x122)]=_0x5c911a;}),_0x5c1c5a['forEach']((_0x2ae970,_0x3f28c6)=>{var _0x3d22b3=_0x561a10;_0x5e0da1[_0x3f28c6][_0x3d22b3(0xf0)]=_0x2ae970;}),_0x5d5acc[_0x561a10(0x129)]((_0x54c557,_0x418b75)=>{_0x5e0da1[_0x418b75]['room_name']=_0x54c557;}),_0x21aaba[_0x561a10(0x129)]((_0x2dd551,_0x5616fa)=>{var _0x7011a0=_0x561a10;_0x5e0da1[_0x5616fa][_0x7011a0(0xb1)]=_0x2dd551,_0x5e0da1[_0x5616fa]['date_data']=_0x296448;});const _0x2b4bf0=new invoice_for_outgoing();await _0x2b4bf0[_0x561a10(0x11b)](),_0x21aaba[_0x561a10(0x129)]((_0x4a46c7,_0x4be18f)=>{var _0x34a14c=_0x561a10;_0x5e0da1[_0x4be18f][_0x34a14c(0x12d)]='OUT-'+_0x2b4bf0[_0x34a14c(0x11c)][_0x34a14c(0xa2)]()['padStart'](0x8,'0');});const _0x450841=_0x5e0da1['filter'](_0x116510=>_0x116510[_0x561a10(0xa9)]!=='0'&&_0x116510[_0x561a10(0xa9)]!==''),_0x4c9ea7=new sales_finished({'invoice':_0x561a10(0xdb)+_0x2b4bf0['invoice_init'][_0x561a10(0xa2)]()[_0x561a10(0x104)](0x8,'0'),'date':_0x296448,'warehouse_name':_0x28917f,'sale_product':_0x450841,'note':_0x4f9077,'SCRN':_0x4ca54d,'finalize':'False','ReqBy':_0x52ecd5,'dateofreq':_0x23ed28,'PO_number':_0x453bb5,'typeservicesData':_0x29481c,'typevehicle':_0x4b96f,'destination':_0x2b2a25,'deliverydate':_0x1e2a9f,'driver':_0x41ccbb,'plate':_0x2861c7,'van':_0x388817,'DRSI':_0x126272,'TSU':_0x27d456,'TFU':_0x1c5a31}),_0x1fa415=await _0x4c9ea7[_0x561a10(0x11b)](),_0x59b9e2=new Date(),_0x1a10ce=_0x59b9e2['toLocaleDateString']();_0x2608dd[_0x561a10(0xd7)]=_0x56be4e,_0x2608dd[_0x561a10(0xff)]=_0x1a10ce,_0x2608dd[_0x561a10(0xa7)]='OUT-'+_0x2b4bf0[_0x561a10(0x11c)][_0x561a10(0xa2)]()[_0x561a10(0x104)](0x8,'0'),_0x2608dd['outgoing_id']=_0x1fa415[_0x561a10(0xfb)],await _0x2608dd[_0x561a10(0x11b)]();const _0x4b76fa=await master_shop['find'](),_0x202ab1=await email_settings[_0x561a10(0xca)]();let _0x35dd65=nodemailer[_0x561a10(0x119)]({'host':_0x202ab1[_0x561a10(0xbb)],'port':Number(_0x202ab1[_0x561a10(0xb7)]),'secure':![],'auth':{'user':_0x202ab1[_0x561a10(0xc2)],'pass':_0x202ab1[_0x561a10(0x120)]}});const _0x2b3a90=_0x35a15e[_0x561a10(0xaa)]+_0x561a10(0xd8)+_0x35a15e[_0x561a10(0x124)][_0x561a10(0xbb)];var _0x551243=_0x2608dd[_0x561a10(0xe4)],_0x17472f='',_0xbf8f8d,_0x36ebde=0x0;for(_0xbf8f8d in _0x551243){_0x17472f+='<tr>'+_0x561a10(0xd2)+_0x551243[_0xbf8f8d][_0x561a10(0xe7)]+_0x561a10(0x134)+_0x561a10(0xd2)+_0x551243[_0xbf8f8d]['product_code']+_0x561a10(0x134)+_0x561a10(0xd2)+_0x551243[_0xbf8f8d][_0x561a10(0xa9)]+_0x561a10(0x134)+_0x561a10(0xd2)+_0x551243[_0xbf8f8d][_0x561a10(0x126)]+_0x561a10(0x134)+'</tr>',_0x36ebde+=parseInt(_0x551243[_0xbf8f8d][_0x561a10(0xa9)]);}let _0x262d42={'from':_0x202ab1[_0x561a10(0xc2)],'to':_0x561a10(0xc7),'subject':'Email\x20for\x20Customer','attachments':[{'filename':_0x561a10(0xbf),'path':__dirname+'/../public'+'/upload/'+_0x4b76fa[0x0][_0x561a10(0xd5)],'cid':_0x561a10(0xde)}],'html':_0x561a10(0xa4)+_0x561a10(0x10f)+_0x561a10(0x136)+_0x561a10(0x115)+'<div>'+_0x561a10(0xae)+_0x561a10(0x105)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+_0x561a10(0xb8)+_0x561a10(0x105)+_0x561a10(0xce)+_0x561a10(0xb8)+_0x561a10(0xb8)+'<hr\x20class=\x22my-3\x22>'+_0x561a10(0x105)+_0x561a10(0xb8)+_0x561a10(0x105)+'<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>'+'</div>'+_0x561a10(0x105)+_0x561a10(0xb0)+_0x2608dd['invoice']+_0x561a10(0xf1)+'<span>\x20Request\x20Date:\x20<b>'+_0x2608dd[_0x561a10(0xcd)]+_0x561a10(0x102)+_0x561a10(0xb8)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x561a10(0xfd)+_0x561a10(0x12a)+_0x561a10(0xd0)+_0x561a10(0x137)+_0x561a10(0xfa)+_0x561a10(0xa5)+'</thead>'+_0x561a10(0x128)+'\x20'+_0x17472f+'\x20'+_0x561a10(0xc5)+'</table>'+_0x561a10(0x105)+'<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>'+_0x561a10(0xac)+_0x561a10(0xc9)+_0x561a10(0xb8)+_0x561a10(0x105)+'<strong>\x20Regards\x20</strong>'+_0x561a10(0x11e)+_0x561a10(0xb8)+_0x561a10(0xb8)+'<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>'+_0x561a10(0xf8)};_0x35dd65[_0x561a10(0xdd)](_0x262d42,function(_0x68541d,_0x255ca8){var _0x440a7b=_0x561a10;_0x68541d?(console[_0x440a7b(0x132)](_0x68541d),console[_0x440a7b(0x132)](_0x440a7b(0xe9))):console[_0x440a7b(0x132)]('Email\x20sent\x20successfully');}),_0x35a15e[_0x561a10(0xec)]('success',_0x561a10(0x116)),_0x14d0ce[_0x561a10(0x101)]('/all_sales_finished/preview/'+_0x1fa415[_0x561a10(0xfb)]),_0x14d0ce['json'](_0x450841);return;}catch(_0x313d9a){}}),router[a0_0x76b1b0(0xe1)](a0_0x76b1b0(0xa6),auth,async(_0x3a3ef3,_0x1988bc)=>{var _0x59e244=a0_0x76b1b0;try{const _0x466bda=await master_shop[_0x59e244(0x110)](),_0x50026f=_0x3a3ef3[_0x59e244(0x12f)],_0x574e8b=await profile[_0x59e244(0xca)]({'email':_0x50026f[_0x59e244(0xc2)]}),_0x27cacd=await staff[_0x59e244(0xca)]({'email':_0x50026f[_0x59e244(0xc2)]}),_0x378a01=await customer[_0x59e244(0x110)]({'agent_id':_0x27cacd[_0x59e244(0xfb)]}),_0x1cb6a9=mongoose[_0x59e244(0xb6)][_0x59e244(0xd1)],_0x57c813=_0x3a3ef3['params']['id'],_0x516d17=await sales_order[_0x59e244(0xea)](_0x57c813),_0xa6368f=await sales_order[_0x59e244(0x121)]([{'$match':{'_id':_0x1cb6a9(_0x57c813)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x59e244(0x10c)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x59e244(0x114)}}},{'$lookup':{'from':_0x59e244(0x109),'localField':'accounting_account_id','foreignField':_0x59e244(0xfb),'as':_0x59e244(0xd9)}},{'$unwind':'$account_data'},{'$lookup':{'from':_0x59e244(0x109),'localField':_0x59e244(0xe5),'foreignField':_0x59e244(0xfb),'as':'wms_data'}},{'$unwind':_0x59e244(0xf9)}]);if(_0x466bda[0x0][_0x59e244(0xb4)]==_0x59e244(0x113))var _0x11fdc3=users[_0x59e244(0xbd)];else{if(_0x466bda[0x0][_0x59e244(0xb4)]==_0x59e244(0x108))var _0x11fdc3=users[_0x59e244(0x108)];else{if(_0x466bda[0x0][_0x59e244(0xb4)]==_0x59e244(0xee))var _0x11fdc3=users[_0x59e244(0xee)];else{if(_0x466bda[0x0][_0x59e244(0xb4)]=='Spanish')var _0x11fdc3=users[_0x59e244(0xd4)];else{if(_0x466bda[0x0][_0x59e244(0xb4)]=='French')var _0x11fdc3=users[_0x59e244(0xb3)];else{if(_0x466bda[0x0][_0x59e244(0xb4)]==_0x59e244(0xeb))var _0x11fdc3=users['Portuguese'];else{if(_0x466bda[0x0][_0x59e244(0xb4)]==_0x59e244(0xc0))var _0x11fdc3=users[_0x59e244(0xc0)];else{if(_0x466bda[0x0]['language']==_0x59e244(0xb5))var _0x11fdc3=users[_0x59e244(0x118)];}}}}}}}_0x1988bc['render'](_0x59e244(0xcc),{'success':_0x3a3ef3[_0x59e244(0xec)](_0x59e244(0x103)),'errors':_0x3a3ef3['flash'](_0x59e244(0x11a)),'master_shop':_0x466bda,'profile':_0x574e8b,'role':_0x50026f,'language':_0x11fdc3,'customer':_0x378a01,'sales_sa':_0x516d17,'approvers':_0xa6368f[0x0],'the_id':_0x57c813});}catch(_0x37c7e9){console['log'](_0x37c7e9);}}),router[a0_0x76b1b0(0xb2)](a0_0x76b1b0(0x130),auth,async(_0x3d6a61,_0x1affbc)=>{var _0x50a7f4=a0_0x76b1b0;try{const {warehouse_name:_0x188b48,product_code:_0x3f5950}=_0x3d6a61['body'],_0x1ba3c0=await warehouse[_0x50a7f4(0x121)]([{'$match':{'name':_0x188b48}},{'$unwind':_0x50a7f4(0x131)},{'$match':{'product_details.product_code':_0x3f5950}},{'$group':{'_id':{'room':_0x50a7f4(0xf3),'_id':_0x50a7f4(0x10a)}}}]);_0x1affbc[_0x50a7f4(0xf5)](_0x1ba3c0);}catch(_0x4ddd9c){}}),router[a0_0x76b1b0(0xb2)](a0_0x76b1b0(0x106),auth,async(_0x10a6d0,_0x2944ed)=>{var _0x4a4238=a0_0x76b1b0;try{const {warehouse_name:_0x582fb3,product_code:_0x49f441,room_name:_0x514513}=_0x10a6d0[_0x4a4238(0xe2)];console[_0x4a4238(0x132)](_0x10a6d0[_0x4a4238(0xe2)]);const _0x15a5ea=await warehouse[_0x4a4238(0x121)]([{'$match':{'name':_0x582fb3,'room':_0x514513}},{'$unwind':_0x4a4238(0x131)},{'$match':{'product_details.product_code':_0x49f441}},{'$group':{'_id':{'main_id':_0x4a4238(0x10a),'detl_id':_0x4a4238(0xb9),'product_name':_0x4a4238(0x12b),'product_code':_0x4a4238(0xfc),'level':'$product_details.level','bay':_0x4a4238(0xcf),'stocks':_0x4a4238(0xe6)}}}]);_0x2944ed['json'](_0x15a5ea);}catch(_0x1dd057){}}),router['get']('/data/All',auth,async(_0x59770f,_0x123e3c)=>{var _0x26cff5=a0_0x76b1b0;try{const {sttaff_id:_0x30019f,email:_0x2b72bb,warehouse:_0x5d75b8}=_0x59770f['user'],_0x61e956=await master_shop['find'](),_0x4700bb=_0x59770f['user'],_0xe0d66=await profile[_0x26cff5(0xca)]({'email':_0x4700bb[_0x26cff5(0xc2)]}),_0x2b9b53=await sales_order[_0x26cff5(0x110)]({'wms_account_id':_0x30019f});if(_0x61e956[0x0][_0x26cff5(0xb4)]=='English\x20(US)')var _0xcf9995=users[_0x26cff5(0xbd)];else{if(_0x61e956[0x0]['language']==_0x26cff5(0x108))var _0xcf9995=users['Hindi'];else{if(_0x61e956[0x0][_0x26cff5(0xb4)]==_0x26cff5(0xee))var _0xcf9995=users[_0x26cff5(0xee)];else{if(_0x61e956[0x0][_0x26cff5(0xb4)]=='Spanish')var _0xcf9995=users[_0x26cff5(0xd4)];else{if(_0x61e956[0x0][_0x26cff5(0xb4)]==_0x26cff5(0xb3))var _0xcf9995=users[_0x26cff5(0xb3)];else{if(_0x61e956[0x0]['language']==_0x26cff5(0xeb))var _0xcf9995=users[_0x26cff5(0x107)];else{if(_0x61e956[0x0][_0x26cff5(0xb4)]=='Chinese')var _0xcf9995=users[_0x26cff5(0xc0)];else{if(_0x61e956[0x0][_0x26cff5(0xb4)]==_0x26cff5(0xb5))var _0xcf9995=users[_0x26cff5(0x118)];}}}}}}}_0x123e3c['render']('warehouse_approval_All',{'success':_0x59770f['flash']('success'),'errors':_0x59770f[_0x26cff5(0xec)](_0x26cff5(0x11a)),'master_shop':_0x61e956,'profile':_0xe0d66,'role':_0x4700bb,'language':_0xcf9995,'sales_order':_0x2b9b53});}catch(_0x18567a){}}),module[a0_0x76b1b0(0xa8)]=router;