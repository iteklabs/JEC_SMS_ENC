function a0_0x31db(){var _0x3ba7de=['secondary_unit','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','outgoing_invoice','outgoing_id','../public/language/languages.json','primary_code','toLocaleDateString','data_loc','secondary_code','Hindi','Logo.png','English','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','German','<h2>\x20JEC\x20SMS\x20</h2>','map','invoice_init','/data/All','1101878uByxad','quantity','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','aggregate','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','<hr\x20class=\x22my-3\x22>','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','_id','exports','get','level','<html><head><title></title>','express','view_accounting_approval','nodemailer','/:id','warehouse_detl','sendMail','$room','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','accounting_account_id','4711086QsWdvB','prod_cat','product_name','abs','Router','request_qty','forEach','<h5>\x20JEC\x20SMS\x20</h5>','2eqweVM','$product_details._id','798198PISdlp','Arabic','3232250bBFiLi','Email\x20for\x20Customer','christian.villamer@jakagroup.com','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','product_cat','False','118806rqOZpJ','mongodb','gross_price','findOne','</thead>','$wms_account_id','expiry_date','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','date_data','$product_details.product_name','://','params','Sales\x20Add\x20successfully','host','/all_sales_finished/preview/','uuid','$accounting_account_id','../models/all_models','wms_data','mongoose','$account_data','/../public','filter','qty','language','Portuguese','protocol','104UXLbfm','<tbody\x20style=\x22text-align:\x20center;\x22>','1837rgGkqi','product_details','</table>','logo','post','Spanish','errors','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','batch_code','$product_details.product_stock','password','save','room_name','redirect','headers','/upload/','render','<tr>','26050GyHEtS','bay','findById','production_date','email','unit','Chinese','/view_sales_order/:id','split','/data/data_loc','port','log','Types','$product_details.product_code','</tr>','<div>','<strong>\x20Regards\x20</strong>','id_transaction_from','</tbody>','3629440OCxweA','prod_id','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','</b></span>\x20<br><br>','user','Email\x20sent\x20successfully','length','Arabic\x20(ae)','flash','find','body','warehouse_approval_All','push','21xVTuKF','room','product_code','xlsx','OUT-','English\x20(US)','</div>','</body></html>','French','Error\x20Occurs','$product_details.level','</td>','$product_details','../middleware/auth','ObjectId','padStart','<table\x20style=\x22width:\x20100%\x20!important;\x22>','staffs','maxperunit','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','json','sale_product','toString','warehouse_id','$_id','success','product_stock','Portuguese\x20(BR)','maxPerUnit','<!DOCTYPE\x20html>','<span>\x20Request\x20Date:\x20<b>','invoice','string','warehouse_approval'];a0_0x31db=function(){return _0x3ba7de;};return a0_0x31db();}function a0_0x24df(_0x41707e,_0x4752f8){var _0x31dbcf=a0_0x31db();return a0_0x24df=function(_0x24dfa0,_0x20f9b0){_0x24dfa0=_0x24dfa0-0x184;var _0x288234=_0x31dbcf[_0x24dfa0];return _0x288234;},a0_0x24df(_0x41707e,_0x4752f8);}var a0_0x299ed3=a0_0x24df;(function(_0x1d2f3b,_0x19f79b){var _0x956f03=a0_0x24df,_0x36a383=_0x1d2f3b();while(!![]){try{var _0x551315=-parseInt(_0x956f03(0x1eb))/0x1*(-parseInt(_0x956f03(0x208))/0x2)+-parseInt(_0x956f03(0x212))/0x3*(parseInt(_0x956f03(0x22d))/0x4)+parseInt(_0x956f03(0x20c))/0x5+parseInt(_0x956f03(0x20a))/0x6*(-parseInt(_0x956f03(0x1b7))/0x7)+parseInt(_0x956f03(0x1aa))/0x8+parseInt(_0x956f03(0x200))/0x9+-parseInt(_0x956f03(0x197))/0xa*(parseInt(_0x956f03(0x185))/0xb);if(_0x551315===_0x19f79b)break;else _0x36a383['push'](_0x36a383['shift']());}catch(_0x166f52){_0x36a383['push'](_0x36a383['shift']());}}}(a0_0x31db,0xd25ec));const express=require(a0_0x299ed3(0x1f7)),app=express(),router=express[a0_0x299ed3(0x204)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x299ed3(0x223)),auth=require(a0_0x299ed3(0x1c4)),users=require(a0_0x299ed3(0x1dd)),excelJS=require('exceljs'),xlsx=require(a0_0x299ed3(0x1ba)),mongoose=require(a0_0x299ed3(0x225)),{ObjectId}=require(a0_0x299ed3(0x213)),nodemailer=require(a0_0x299ed3(0x1f9));router[a0_0x299ed3(0x1f4)](a0_0x299ed3(0x1fa),auth,async(_0x3c1049,_0x23c54f)=>{var _0x34fdbb=a0_0x299ed3;try{const _0x10edd3=await master_shop[_0x34fdbb(0x1b3)](),_0x1c3084=_0x3c1049[_0x34fdbb(0x1ae)],_0x48490e=await profile[_0x34fdbb(0x215)]({'email':_0x1c3084['email']}),_0x3a4dc3=await staff['findOne']({'email':_0x1c3084[_0x34fdbb(0x19b)]}),_0x265f71=await customer[_0x34fdbb(0x1b3)]({'agent_id':_0x3a4dc3[_0x34fdbb(0x1f2)]}),_0x532166=mongoose['Types'][_0x34fdbb(0x1c5)],_0x5bd21d=_0x3c1049[_0x34fdbb(0x21d)]['id'],_0x23ac7a=await sales_order[_0x34fdbb(0x199)](_0x5bd21d),_0x1fecbe=await sales_order[_0x34fdbb(0x1ee)]([{'$match':{'_id':_0x532166(_0x5bd21d)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x34fdbb(0x222)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':_0x34fdbb(0x1c8),'localField':_0x34fdbb(0x1ff),'foreignField':'_id','as':'account_data'}},{'$unwind':'$account_data'},{'$lookup':{'from':_0x34fdbb(0x1c8),'localField':'wms_account_id','foreignField':_0x34fdbb(0x1f2),'as':_0x34fdbb(0x224)}},{'$unwind':'$wms_data'}]);if(_0x10edd3[0x0]['language']==_0x34fdbb(0x1bc))var _0x5889ab=users[_0x34fdbb(0x1e4)];else{if(_0x10edd3[0x0][_0x34fdbb(0x22a)]==_0x34fdbb(0x1e2))var _0x5889ab=users[_0x34fdbb(0x1e2)];else{if(_0x10edd3[0x0]['language']==_0x34fdbb(0x1e6))var _0x5889ab=users[_0x34fdbb(0x1e6)];else{if(_0x10edd3[0x0][_0x34fdbb(0x22a)]==_0x34fdbb(0x18a))var _0x5889ab=users[_0x34fdbb(0x18a)];else{if(_0x10edd3[0x0][_0x34fdbb(0x22a)]==_0x34fdbb(0x1bf))var _0x5889ab=users[_0x34fdbb(0x1bf)];else{if(_0x10edd3[0x0][_0x34fdbb(0x22a)]=='Portuguese\x20(BR)')var _0x5889ab=users[_0x34fdbb(0x22b)];else{if(_0x10edd3[0x0]['language']==_0x34fdbb(0x19d))var _0x5889ab=users[_0x34fdbb(0x19d)];else{if(_0x10edd3[0x0][_0x34fdbb(0x22a)]==_0x34fdbb(0x1b1))var _0x5889ab=users[_0x34fdbb(0x20b)];}}}}}}}_0x23c54f[_0x34fdbb(0x195)](_0x34fdbb(0x1d8),{'success':_0x3c1049[_0x34fdbb(0x1b2)](_0x34fdbb(0x1d0)),'errors':_0x3c1049['flash'](_0x34fdbb(0x18b)),'master_shop':_0x10edd3,'profile':_0x48490e,'role':_0x1c3084,'language':_0x5889ab,'customer':_0x265f71,'sales_sa':_0x23ac7a,'approvers':_0x1fecbe[0x0],'the_id':_0x5bd21d});}catch(_0xe99ad){console[_0x34fdbb(0x1a2)](_0xe99ad);}}),router[a0_0x299ed3(0x189)](a0_0x299ed3(0x1fa),auth,async(_0x53b9d3,_0x2774c1)=>{var _0x21e38c=a0_0x299ed3;try{const {date:_0x323701,invoice_data:_0x1d9513,wms_confirm:_0x476f60,the_id_val:_0x3fc0b1,prod_id:_0x20581b,SCRN:_0x1a2270,ReqBy:_0x173ef4,dateofreq:_0x5ee073,PO_number:_0xc68bc,warehouse_name:_0x5a86ca,typeservicesData:_0x21fc85,typevehicle:_0xa6d858,destination:_0x331952,deliverydate:_0x1300e6,driver:_0x397a77,plate:_0x84c712,van:_0x946726,DRSI:_0x115ae7,TSU:_0x665795,TFU:_0x4547d1,note:_0x5cbf8d}=_0x53b9d3[_0x21e38c(0x1b4)],_0x14f447=await sales_order['findById'](_0x3fc0b1);if(typeof _0x20581b==_0x21e38c(0x1d7))var _0x5093f5=[_0x53b9d3['body'][_0x21e38c(0x1ab)]],_0x27b1dd=[_0x53b9d3['body'][_0x21e38c(0x229)]],_0x493889=[_0x53b9d3[_0x21e38c(0x1b4)][_0x21e38c(0x1e0)]];else var _0x5093f5=[..._0x53b9d3[_0x21e38c(0x1b4)]['prod_id']],_0x27b1dd=[..._0x53b9d3[_0x21e38c(0x1b4)][_0x21e38c(0x229)]],_0x493889=[..._0x53b9d3['body'][_0x21e38c(0x1e0)]];const _0xd010ab=_0x5093f5[_0x21e38c(0x1e8)](_0x4572c2=>{return _0x4572c2={'prod_id':_0x4572c2};});_0x493889['forEach']((_0x4fd350,_0x446bba)=>{var _0x4af4be=_0x21e38c,_0xfef7f=_0x4fd350[_0x4af4be(0x19f)]('~');_0xd010ab[_0x446bba][_0x4af4be(0x1ce)]=_0xfef7f[0x0],_0xd010ab[_0x446bba][_0x4af4be(0x1fb)]=_0xfef7f[0x1];}),_0x27b1dd[_0x21e38c(0x206)]((_0x586b23,_0x52bc20)=>{var _0x58b1a1=_0x21e38c;_0xd010ab[_0x52bc20][_0x58b1a1(0x205)]=_0x586b23;});var _0x28d754=[],_0x3652bb=[],_0x79961e=[],_0x4f1324=[],_0x5debff=[],_0x181e3d=[],_0x3d2130=[],_0xef65cb=[],_0x489af8=[],_0x307a1c=[],_0x3957c2=[],_0x4c8255=[],_0x54af9f=[],_0x3d4807=[],_0x574106=[],_0x4129df=[],_0x57150c=[],_0x279a73=[],_0x44034c=[],_0x226515=[];for(let _0x5c74eb=0x0;_0x5c74eb<=_0xd010ab[_0x21e38c(0x1b0)]-0x1;_0x5c74eb++){const _0x43a9b9=_0xd010ab[_0x5c74eb],_0x4c3365=mongoose[_0x21e38c(0x1a3)]['ObjectId'];var _0x4c7b3b=await warehouse[_0x21e38c(0x1ee)]([{'$match':{'_id':_0x4c3365(_0x43a9b9[_0x21e38c(0x1ce)])}},{'$unwind':_0x21e38c(0x1c3)},{'$match':{'product_details._id':_0x4c3365(_0x43a9b9[_0x21e38c(0x1fb)])}}]),_0x386cc5=0x0;for(let _0x18d8f4=0x0;_0x18d8f4<=_0x4c7b3b[_0x21e38c(0x1b0)]-0x1;_0x18d8f4++){var _0x4c9ee9=_0x4c7b3b[_0x18d8f4];_0x4c9ee9[_0x21e38c(0x186)]['product_stock']<_0x43a9b9[_0x21e38c(0x205)]&&_0x386cc5++;}if(_0x386cc5>0x0)return _0x53b9d3[_0x21e38c(0x1b2)](_0x21e38c(0x18b),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x2774c1[_0x21e38c(0x192)]('back');var _0x31e633=0x0;for(let _0x10983e=0x0;_0x10983e<=_0x4c7b3b[_0x21e38c(0x1b0)]-0x1;_0x10983e++){var _0x4c9ee9=_0x4c7b3b[_0x10983e];_0x4c9ee9[_0x21e38c(0x186)]['product_stock']>_0x43a9b9[_0x21e38c(0x205)]&&(_0x28d754[_0x21e38c(0x1b6)](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x202)]),_0x3652bb[_0x21e38c(0x1b6)](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x1d1)]),_0x79961e[_0x21e38c(0x1b6)](_0x43a9b9[_0x21e38c(0x205)]),_0x4f1324['push'](_0x4c9ee9['product_details']['primary_code']),_0x5debff['push'](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x1e1)]),_0x181e3d[_0x21e38c(0x1b6)](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x1b9)]),_0x3d2130[_0x21e38c(0x1b6)](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x1f5)]),_0xef65cb[_0x21e38c(0x1b6)](_0x4c9ee9[_0x21e38c(0x186)]['bay']),_0x489af8['push'](_0x4c9ee9[_0x21e38c(0x186)]['unit']),_0x307a1c[_0x21e38c(0x1b6)](_0x4c9ee9['product_details'][_0x21e38c(0x1d9)]),_0x3957c2[_0x21e38c(0x1b6)](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x18d)]),_0x4c8255['push'](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x218)]),_0x54af9f['push'](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x19a)]),_0x3d4807[_0x21e38c(0x1b6)](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x1d3)]),_0x574106['push'](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x210)]),_0x4129df[_0x21e38c(0x1b6)](_0x4c9ee9[_0x21e38c(0x1b8)]),_0x57150c['push'](_0x4c9ee9['product_details'][_0x21e38c(0x1d6)]),_0x279a73[_0x21e38c(0x1b6)](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x1f2)]),_0x44034c[_0x21e38c(0x1b6)](_0x4c9ee9[_0x21e38c(0x186)]['uuid']),_0x226515[_0x21e38c(0x1b6)](_0x4c9ee9[_0x21e38c(0x186)][_0x21e38c(0x214)]),_0x31e633++);}}const _0x241322=_0x28d754[_0x21e38c(0x1e8)](_0x13ffee=>{return _0x13ffee={'product_name':_0x13ffee};});_0x3652bb[_0x21e38c(0x206)]((_0x47e273,_0x50ef61)=>{_0x241322[_0x50ef61]['stock']=_0x47e273;}),_0x79961e['forEach']((_0x44a551,_0x73d826)=>{var _0x14ab8a=_0x21e38c;_0x241322[_0x73d826]['quantity']=Math[_0x14ab8a(0x203)](_0x44a551);}),_0x226515['forEach']((_0x1bfc12,_0x3e30b8)=>{var _0x56f369=_0x21e38c;_0x241322[_0x3e30b8][_0x56f369(0x214)]=_0x1bfc12;}),_0x44034c[_0x21e38c(0x206)]((_0x5738a1,_0x13da88)=>{var _0x1163f8=_0x21e38c;_0x241322[_0x13da88][_0x1163f8(0x221)]=_0x5738a1;}),_0x279a73['forEach']((_0x1d2009,_0x431378)=>{var _0x3a7e2a=_0x21e38c;_0x241322[_0x431378][_0x3a7e2a(0x1a8)]=_0x1d2009;}),_0x4f1324[_0x21e38c(0x206)]((_0x5eabe7,_0x6f8c89)=>{var _0x41c2c8=_0x21e38c;_0x241322[_0x6f8c89][_0x41c2c8(0x1de)]=_0x5eabe7;}),_0x5debff[_0x21e38c(0x206)]((_0x5cbb03,_0x3ec51b)=>{var _0x58d3d0=_0x21e38c;_0x241322[_0x3ec51b][_0x58d3d0(0x1e1)]=_0x5cbb03;}),_0x181e3d['forEach']((_0xe20071,_0xefef33)=>{_0x241322[_0xefef33]['product_code']=_0xe20071;}),_0x3d2130['forEach']((_0x381209,_0x4188f0)=>{var _0x1f130e=_0x21e38c;_0x241322[_0x4188f0][_0x1f130e(0x1f5)]=_0x381209;}),_0xef65cb[_0x21e38c(0x206)]((_0x59836b,_0x24e10f)=>{var _0x3529b6=_0x21e38c;_0x241322[_0x24e10f][_0x3529b6(0x198)]=_0x59836b;}),_0x489af8[_0x21e38c(0x206)]((_0x50c3ac,_0x472495)=>{_0x241322[_0x472495]['unit']=_0x50c3ac;}),_0x307a1c[_0x21e38c(0x206)]((_0x406f55,_0x33978f)=>{_0x241322[_0x33978f]['secondary_unit']=_0x406f55;}),_0x3957c2[_0x21e38c(0x206)]((_0x1d0204,_0x353df9)=>{var _0x3a630f=_0x21e38c;_0x241322[_0x353df9][_0x3a630f(0x18d)]=_0x1d0204;}),_0x4c8255[_0x21e38c(0x206)]((_0x1fdb5a,_0x5f159b)=>{var _0x586205=_0x21e38c;_0x241322[_0x5f159b][_0x586205(0x218)]=_0x1fdb5a;}),_0x54af9f[_0x21e38c(0x206)]((_0x16baf5,_0x3d59bc)=>{_0x241322[_0x3d59bc]['production_date']=_0x16baf5;}),_0x3d4807[_0x21e38c(0x206)]((_0x78586f,_0x4b09f7)=>{var _0x2b7105=_0x21e38c;_0x241322[_0x4b09f7][_0x2b7105(0x1c9)]=_0x78586f;}),_0x574106['forEach']((_0x48f08b,_0x158bd6)=>{var _0x4c7279=_0x21e38c;_0x241322[_0x158bd6][_0x4c7279(0x201)]=_0x48f08b;}),_0x4129df[_0x21e38c(0x206)]((_0x3c5999,_0x22c126)=>{var _0x47fa2a=_0x21e38c;_0x241322[_0x22c126][_0x47fa2a(0x191)]=_0x3c5999;}),_0x57150c['forEach']((_0x21a8d8,_0xfc3837)=>{var _0x3714aa=_0x21e38c;_0x241322[_0xfc3837][_0x3714aa(0x1d6)]=_0x21a8d8,_0x241322[_0xfc3837][_0x3714aa(0x21a)]=_0x323701;});const _0x1e510e=new invoice_for_outgoing();await _0x1e510e[_0x21e38c(0x190)](),_0x57150c['forEach']((_0x3f23f3,_0x4630fb)=>{var _0xad99e0=_0x21e38c;_0x241322[_0x4630fb][_0xad99e0(0x1db)]=_0xad99e0(0x1bb)+_0x1e510e['invoice_init'][_0xad99e0(0x1cd)]()[_0xad99e0(0x1c6)](0x8,'0');});const _0xb58bbf=_0x241322[_0x21e38c(0x228)](_0x6686c8=>_0x6686c8[_0x21e38c(0x1ec)]!=='0'&&_0x6686c8[_0x21e38c(0x1ec)]!==''),_0x222556=new sales_finished({'invoice':_0x21e38c(0x1bb)+_0x1e510e[_0x21e38c(0x1e9)]['toString']()[_0x21e38c(0x1c6)](0x8,'0'),'date':_0x323701,'warehouse_name':_0x5a86ca,'sale_product':_0xb58bbf,'note':_0x5cbf8d,'SCRN':_0x1a2270,'finalize':_0x21e38c(0x211),'ReqBy':_0x173ef4,'dateofreq':_0x5ee073,'PO_number':_0xc68bc,'typeservicesData':_0x21fc85,'typevehicle':_0xa6d858,'destination':_0x331952,'deliverydate':_0x1300e6,'driver':_0x397a77,'plate':_0x84c712,'van':_0x946726,'DRSI':_0x115ae7,'TSU':_0x665795,'TFU':_0x4547d1}),_0x2ed0a7=await _0x222556[_0x21e38c(0x190)](),_0x1bf6ca=new Date(),_0x506df8=_0x1bf6ca[_0x21e38c(0x1df)]();_0x14f447['wms_account_confirm']=_0x476f60,_0x14f447['wms_account_date']=_0x506df8,_0x14f447['document_number_out']='OUT-'+_0x1e510e[_0x21e38c(0x1e9)][_0x21e38c(0x1cd)]()[_0x21e38c(0x1c6)](0x8,'0'),_0x14f447[_0x21e38c(0x1dc)]=_0x2ed0a7[_0x21e38c(0x1f2)],await _0x14f447[_0x21e38c(0x190)]();const _0x22d2d8=await master_shop[_0x21e38c(0x1b3)](),_0x3e7e60=await email_settings['findOne']();let _0x18c42c=nodemailer['createTransport']({'host':_0x3e7e60[_0x21e38c(0x21f)],'port':Number(_0x3e7e60[_0x21e38c(0x1a1)]),'secure':![],'auth':{'user':_0x3e7e60[_0x21e38c(0x19b)],'pass':_0x3e7e60[_0x21e38c(0x18f)]}});const _0x2d5800=_0x53b9d3[_0x21e38c(0x22c)]+_0x21e38c(0x21c)+_0x53b9d3[_0x21e38c(0x193)][_0x21e38c(0x21f)];var _0x272b08=_0x14f447[_0x21e38c(0x1cc)],_0x47f92f='',_0x5e10d5,_0x366178=0x0;for(_0x5e10d5 in _0x272b08){_0x47f92f+='<tr>'+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x272b08[_0x5e10d5][_0x21e38c(0x202)]+_0x21e38c(0x1c2)+_0x21e38c(0x1f1)+_0x272b08[_0x5e10d5][_0x21e38c(0x1b9)]+_0x21e38c(0x1c2)+_0x21e38c(0x1f1)+_0x272b08[_0x5e10d5]['quantity']+_0x21e38c(0x1c2)+_0x21e38c(0x1f1)+_0x272b08[_0x5e10d5][_0x21e38c(0x19c)]+'</td>'+'</tr>',_0x366178+=parseInt(_0x272b08[_0x5e10d5][_0x21e38c(0x1ec)]);}let _0x27e144={'from':_0x3e7e60[_0x21e38c(0x19b)],'to':_0x21e38c(0x20e),'subject':_0x21e38c(0x20d),'attachments':[{'filename':_0x21e38c(0x1e3),'path':__dirname+_0x21e38c(0x227)+_0x21e38c(0x194)+_0x22d2d8[0x0]['image'],'cid':_0x21e38c(0x188)}],'html':_0x21e38c(0x1d4)+_0x21e38c(0x1f6)+_0x21e38c(0x1fe)+'</head><body>'+_0x21e38c(0x1a6)+_0x21e38c(0x1ef)+_0x21e38c(0x1a6)+_0x21e38c(0x1ca)+_0x21e38c(0x1bd)+'<div>'+_0x21e38c(0x1e7)+_0x21e38c(0x1bd)+_0x21e38c(0x1bd)+_0x21e38c(0x1f0)+_0x21e38c(0x1a6)+'</div>'+_0x21e38c(0x1a6)+_0x21e38c(0x219)+'</div>'+_0x21e38c(0x1a6)+'<span>\x20Request\x20ID:\x20<b>'+_0x14f447[_0x21e38c(0x1d6)]+'</b></span>\x20<br>'+_0x21e38c(0x1d5)+_0x14f447['date']+_0x21e38c(0x1ad)+_0x21e38c(0x1bd)+_0x21e38c(0x1c7)+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x21e38c(0x196)+_0x21e38c(0x1ac)+_0x21e38c(0x1ed)+_0x21e38c(0x20f)+_0x21e38c(0x1e5)+_0x21e38c(0x1a5)+_0x21e38c(0x216)+_0x21e38c(0x184)+'\x20'+_0x47f92f+'\x20'+_0x21e38c(0x1a9)+_0x21e38c(0x187)+_0x21e38c(0x1a6)+'<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>'+_0x21e38c(0x18c)+'<br><br><br>'+_0x21e38c(0x1bd)+_0x21e38c(0x1a6)+_0x21e38c(0x1a7)+_0x21e38c(0x207)+_0x21e38c(0x1bd)+_0x21e38c(0x1bd)+_0x21e38c(0x1da)+_0x21e38c(0x1be)};_0x18c42c[_0x21e38c(0x1fc)](_0x27e144,function(_0x4d37c0,_0x3968d3){var _0x2ba532=_0x21e38c;_0x4d37c0?(console[_0x2ba532(0x1a2)](_0x4d37c0),console[_0x2ba532(0x1a2)](_0x2ba532(0x1c0))):console['log'](_0x2ba532(0x1af));}),_0x53b9d3['flash'](_0x21e38c(0x1d0),_0x21e38c(0x21e)),_0x2774c1[_0x21e38c(0x192)](_0x21e38c(0x220)+_0x2ed0a7[_0x21e38c(0x1f2)]),_0x2774c1[_0x21e38c(0x1cb)](_0xb58bbf);return;}catch(_0x2fb210){}}),router[a0_0x299ed3(0x1f4)](a0_0x299ed3(0x19e),auth,async(_0x15056a,_0x46456c)=>{var _0x3cb98d=a0_0x299ed3;try{const _0x52f796=await master_shop['find'](),_0x3db11d=_0x15056a[_0x3cb98d(0x1ae)],_0x5b2953=await profile[_0x3cb98d(0x215)]({'email':_0x3db11d[_0x3cb98d(0x19b)]}),_0x321345=await staff[_0x3cb98d(0x215)]({'email':_0x3db11d[_0x3cb98d(0x19b)]}),_0x2048db=await customer['find']({'agent_id':_0x321345[_0x3cb98d(0x1f2)]}),_0x588597=mongoose[_0x3cb98d(0x1a3)]['ObjectId'],_0x5c3171=_0x15056a[_0x3cb98d(0x21d)]['id'],_0x3eb32d=await sales_order[_0x3cb98d(0x199)](_0x5c3171),_0x24893a=await sales_order['aggregate']([{'$match':{'_id':_0x588597(_0x5c3171)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x3cb98d(0x222)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x3cb98d(0x217)}}},{'$lookup':{'from':_0x3cb98d(0x1c8),'localField':_0x3cb98d(0x1ff),'foreignField':'_id','as':'account_data'}},{'$unwind':_0x3cb98d(0x226)},{'$lookup':{'from':_0x3cb98d(0x1c8),'localField':'wms_account_id','foreignField':_0x3cb98d(0x1f2),'as':_0x3cb98d(0x224)}},{'$unwind':'$wms_data'}]);if(_0x52f796[0x0][_0x3cb98d(0x22a)]==_0x3cb98d(0x1bc))var _0xe8e7d7=users['English'];else{if(_0x52f796[0x0]['language']==_0x3cb98d(0x1e2))var _0xe8e7d7=users['Hindi'];else{if(_0x52f796[0x0][_0x3cb98d(0x22a)]==_0x3cb98d(0x1e6))var _0xe8e7d7=users[_0x3cb98d(0x1e6)];else{if(_0x52f796[0x0][_0x3cb98d(0x22a)]=='Spanish')var _0xe8e7d7=users[_0x3cb98d(0x18a)];else{if(_0x52f796[0x0]['language']=='French')var _0xe8e7d7=users[_0x3cb98d(0x1bf)];else{if(_0x52f796[0x0][_0x3cb98d(0x22a)]==_0x3cb98d(0x1d2))var _0xe8e7d7=users['Portuguese'];else{if(_0x52f796[0x0][_0x3cb98d(0x22a)]==_0x3cb98d(0x19d))var _0xe8e7d7=users[_0x3cb98d(0x19d)];else{if(_0x52f796[0x0][_0x3cb98d(0x22a)]==_0x3cb98d(0x1b1))var _0xe8e7d7=users[_0x3cb98d(0x20b)];}}}}}}}_0x46456c[_0x3cb98d(0x195)](_0x3cb98d(0x1f8),{'success':_0x15056a[_0x3cb98d(0x1b2)](_0x3cb98d(0x1d0)),'errors':_0x15056a[_0x3cb98d(0x1b2)](_0x3cb98d(0x18b)),'master_shop':_0x52f796,'profile':_0x5b2953,'role':_0x3db11d,'language':_0xe8e7d7,'customer':_0x2048db,'sales_sa':_0x3eb32d,'approvers':_0x24893a[0x0],'the_id':_0x5c3171});}catch(_0x4b4928){console[_0x3cb98d(0x1a2)](_0x4b4928);}}),router['post']('/data/data_rack',auth,async(_0x37ddc1,_0x2d7a42)=>{var _0x37f2ab=a0_0x299ed3;try{const {warehouse_name:_0x519186,product_code:_0x3a758c}=_0x37ddc1[_0x37f2ab(0x1b4)],_0x418dc6=await warehouse[_0x37f2ab(0x1ee)]([{'$match':{'name':_0x519186}},{'$unwind':_0x37f2ab(0x1c3)},{'$match':{'product_details.product_code':_0x3a758c}},{'$group':{'_id':{'room':_0x37f2ab(0x1fd),'_id':'$_id'}}}]);_0x2d7a42['json'](_0x418dc6);}catch(_0x3eddd3){}}),router[a0_0x299ed3(0x189)](a0_0x299ed3(0x1a0),auth,async(_0x5f4897,_0x450dd8)=>{var _0x152162=a0_0x299ed3;try{const {warehouse_name:_0x182369,product_code:_0x2a7896,room_name:_0x47af37}=_0x5f4897[_0x152162(0x1b4)];console[_0x152162(0x1a2)](_0x5f4897[_0x152162(0x1b4)]);const _0x592af8=await warehouse[_0x152162(0x1ee)]([{'$match':{'name':_0x182369,'room':_0x47af37}},{'$unwind':_0x152162(0x1c3)},{'$match':{'product_details.product_code':_0x2a7896}},{'$group':{'_id':{'main_id':_0x152162(0x1cf),'detl_id':_0x152162(0x209),'product_name':_0x152162(0x21b),'product_code':_0x152162(0x1a4),'level':_0x152162(0x1c1),'bay':'$product_details.bay','stocks':_0x152162(0x18e)}}}]);_0x450dd8[_0x152162(0x1cb)](_0x592af8);}catch(_0x54bdae){}}),router['get'](a0_0x299ed3(0x1ea),auth,async(_0x20ae39,_0x28e693)=>{var _0xe56ce3=a0_0x299ed3;try{const {sttaff_id:_0xfd5ba0,email:_0x4fc858,warehouse:_0x36fdb8}=_0x20ae39[_0xe56ce3(0x1ae)],_0x12c681=await master_shop[_0xe56ce3(0x1b3)](),_0x3c28de=_0x20ae39[_0xe56ce3(0x1ae)],_0x345bc7=await profile[_0xe56ce3(0x215)]({'email':_0x3c28de['email']}),_0x381622=await sales_order[_0xe56ce3(0x1b3)]({'wms_account_id':_0xfd5ba0});if(_0x12c681[0x0][_0xe56ce3(0x22a)]==_0xe56ce3(0x1bc))var _0x40ade4=users['English'];else{if(_0x12c681[0x0][_0xe56ce3(0x22a)]==_0xe56ce3(0x1e2))var _0x40ade4=users[_0xe56ce3(0x1e2)];else{if(_0x12c681[0x0][_0xe56ce3(0x22a)]=='German')var _0x40ade4=users[_0xe56ce3(0x1e6)];else{if(_0x12c681[0x0]['language']==_0xe56ce3(0x18a))var _0x40ade4=users[_0xe56ce3(0x18a)];else{if(_0x12c681[0x0][_0xe56ce3(0x22a)]=='French')var _0x40ade4=users[_0xe56ce3(0x1bf)];else{if(_0x12c681[0x0]['language']==_0xe56ce3(0x1d2))var _0x40ade4=users[_0xe56ce3(0x22b)];else{if(_0x12c681[0x0]['language']==_0xe56ce3(0x19d))var _0x40ade4=users[_0xe56ce3(0x19d)];else{if(_0x12c681[0x0][_0xe56ce3(0x22a)]==_0xe56ce3(0x1b1))var _0x40ade4=users['Arabic'];}}}}}}}_0x28e693[_0xe56ce3(0x195)](_0xe56ce3(0x1b5),{'success':_0x20ae39['flash'](_0xe56ce3(0x1d0)),'errors':_0x20ae39[_0xe56ce3(0x1b2)]('errors'),'master_shop':_0x12c681,'profile':_0x345bc7,'role':_0x3c28de,'language':_0x40ade4,'sales_order':_0x381622});}catch(_0x340ffa){}}),module[a0_0x299ed3(0x1f3)]=router;