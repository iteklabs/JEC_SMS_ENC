function a0_0x325e(){var _0x1c000b=['protocol','params','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','length','padStart','redirect','4595910FqEqnR','maxPerUnit','email','user','Logo.png','<strong>\x20Regards\x20</strong>','port','product_code','post','Email\x20for\x20Customer','findById','invoice_init','$wms_data','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','headers','product_stock','<table\x20style=\x22width:\x20100%\x20!important;\x22>','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','warehouse_approval_All','account_data','30MhWgIF','/:id','</b></span>\x20<br>','Error\x20Occurs','</b></span>\x20<br><br>','findOne','<h5>\x20JEC\x20SMS\x20</h5>','/data/data_loc','warehouse_approval','forEach','get','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','exports','<div>','outgoing_invoice','uuid','mongodb','success','$_id','production_date','<tr>','prod_cat','outgoing_id','document_number_out','$account_data','warehouse_detl','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','xlsx','render','expiry_date','French','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','/data/data_rack','7649512YHYmCi','room_name','sendMail','$product_details','invoice','password','log','primary_code','push','accounting_account_id','filter','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','qty','warehouse_id','_id','wms_data','4258420emYpMS','<span>\x20Request\x20ID:\x20<b>','<h2>\x20JEC\x20SMS\x20</h2>','level','view_accounting_approval','quantity','7646220KkdZTb','/data/All','OUT-','request_qty','Portuguese\x20(BR)','Arabic','Portuguese','German','string','save','</div>','632709JMRayS','split','flash','5773775EibhXS','mongoose','bay','Spanish','Router','staffs','</td>','Hindi','secondary_code','</body></html>','data_loc','$product_details.level','secondary_unit','createTransport','://','wms_account_id','errors','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','batch_code','json','exceljs','/upload/','unit','English','logo','Arabic\x20(ae)','3446jXVGTi','English\x20(US)','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','/view_sales_order/:id','express','<br><br><br>','</thead>','room','Email\x20sent\x20successfully','../middleware/auth','</tr>','id_transaction_from','$product_details.product_name','nodemailer','ObjectId','$product_details.product_code','6IPkqii','stock','Types','language','date','<html><head><title></title>','gross_price','abs','wms_account_confirm','aggregate','362zsUtex','maxperunit','3hFeXuH','$product_details._id','</table>','find','host','Chinese','body','wms_account_date','product_cat','product_details','$accounting_account_id','toLocaleDateString','map','$product_details.product_stock','prod_id','<span>\x20Request\x20Date:\x20<b>','$wms_account_id','toString'];a0_0x325e=function(){return _0x1c000b;};return a0_0x325e();}var a0_0x283b41=a0_0x9463;(function(_0xc9a88e,_0x48b38e){var _0x44f77e=a0_0x9463,_0x27d1f8=_0xc9a88e();while(!![]){try{var _0x4fd0a4=-parseInt(_0x44f77e(0x1c8))/0x1*(parseInt(_0x44f77e(0x1ae))/0x2)+-parseInt(_0x44f77e(0x1ca))/0x3*(-parseInt(_0x44f77e(0x227))/0x4)+parseInt(_0x44f77e(0x1e2))/0x5+parseInt(_0x44f77e(0x1be))/0x6*(-parseInt(_0x44f77e(0x194))/0x7)+-parseInt(_0x44f77e(0x217))/0x8+parseInt(_0x44f77e(0x22d))/0x9+parseInt(_0x44f77e(0x1f6))/0xa*(parseInt(_0x44f77e(0x191))/0xb);if(_0x4fd0a4===_0x48b38e)break;else _0x27d1f8['push'](_0x27d1f8['shift']());}catch(_0x28b68d){_0x27d1f8['push'](_0x27d1f8['shift']());}}}(a0_0x325e,0x92c60));function a0_0x9463(_0x478811,_0x18ae2e){var _0x325e6b=a0_0x325e();return a0_0x9463=function(_0x9463e9,_0xf86eb0){_0x9463e9=_0x9463e9-0x190;var _0x23533d=_0x325e6b[_0x9463e9];return _0x23533d;},a0_0x9463(_0x478811,_0x18ae2e);}const express=require(a0_0x283b41(0x1b2)),app=express(),router=express[a0_0x283b41(0x198)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require('../models/all_models'),auth=require(a0_0x283b41(0x1b7)),users=require('../public/language/languages.json'),excelJS=require(a0_0x283b41(0x1a8)),xlsx=require(a0_0x283b41(0x211)),mongoose=require(a0_0x283b41(0x195)),{ObjectId}=require(a0_0x283b41(0x206)),nodemailer=require(a0_0x283b41(0x1bb));router[a0_0x283b41(0x200)](a0_0x283b41(0x1f7),auth,async(_0x54c9e,_0x2139b8)=>{var _0x23e778=a0_0x283b41;try{const _0x59309f=await master_shop['find'](),_0x5caf69=_0x54c9e[_0x23e778(0x1e5)],_0x340f6a=await profile[_0x23e778(0x1fb)]({'email':_0x5caf69['email']}),_0x4ac58b=await staff[_0x23e778(0x1fb)]({'email':_0x5caf69[_0x23e778(0x1e4)]}),_0x4412f4=await customer[_0x23e778(0x1cd)]({'agent_id':_0x4ac58b[_0x23e778(0x225)]}),_0x2cff3a=mongoose['Types']['ObjectId'],_0x4bb32d=_0x54c9e[_0x23e778(0x1dd)]['id'],_0x64b362=await sales_order[_0x23e778(0x1ec)](_0x4bb32d),_0x20dd93=await sales_order[_0x23e778(0x1c7)]([{'$match':{'_id':_0x2cff3a(_0x4bb32d)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x23e778(0x1d4)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':_0x23e778(0x199),'localField':_0x23e778(0x220),'foreignField':_0x23e778(0x225),'as':_0x23e778(0x1f5)}},{'$unwind':_0x23e778(0x20e)},{'$lookup':{'from':_0x23e778(0x199),'localField':_0x23e778(0x1a3),'foreignField':'_id','as':_0x23e778(0x226)}},{'$unwind':_0x23e778(0x1ee)}]);if(_0x59309f[0x0][_0x23e778(0x1c1)]=='English\x20(US)')var _0x1ad2b9=users[_0x23e778(0x1ab)];else{if(_0x59309f[0x0][_0x23e778(0x1c1)]==_0x23e778(0x19b))var _0x1ad2b9=users['Hindi'];else{if(_0x59309f[0x0][_0x23e778(0x1c1)]==_0x23e778(0x234))var _0x1ad2b9=users['German'];else{if(_0x59309f[0x0][_0x23e778(0x1c1)]==_0x23e778(0x197))var _0x1ad2b9=users['Spanish'];else{if(_0x59309f[0x0][_0x23e778(0x1c1)]==_0x23e778(0x214))var _0x1ad2b9=users[_0x23e778(0x214)];else{if(_0x59309f[0x0][_0x23e778(0x1c1)]==_0x23e778(0x231))var _0x1ad2b9=users[_0x23e778(0x233)];else{if(_0x59309f[0x0][_0x23e778(0x1c1)]==_0x23e778(0x1cf))var _0x1ad2b9=users['Chinese'];else{if(_0x59309f[0x0][_0x23e778(0x1c1)]=='Arabic\x20(ae)')var _0x1ad2b9=users['Arabic'];}}}}}}}_0x2139b8[_0x23e778(0x212)](_0x23e778(0x1fe),{'success':_0x54c9e[_0x23e778(0x193)](_0x23e778(0x207)),'errors':_0x54c9e[_0x23e778(0x193)](_0x23e778(0x1a4)),'master_shop':_0x59309f,'profile':_0x340f6a,'role':_0x5caf69,'language':_0x1ad2b9,'customer':_0x4412f4,'sales_sa':_0x64b362,'approvers':_0x20dd93[0x0],'the_id':_0x4bb32d});}catch(_0x4e277c){console['log'](_0x4e277c);}}),router[a0_0x283b41(0x1ea)](a0_0x283b41(0x1f7),auth,async(_0x23cca0,_0xd44363)=>{var _0x164db6=a0_0x283b41;try{const {date:_0x38b255,invoice_data:_0x437e77,wms_confirm:_0xa61221,the_id_val:_0xda91c5,prod_id:_0x2cb51c,SCRN:_0x11242b,ReqBy:_0x507545,dateofreq:_0x2a1c96,PO_number:_0x5ec5e4,warehouse_name:_0x447d93,typeservicesData:_0x5e4da8,typevehicle:_0x85b080,destination:_0x78df2,deliverydate:_0x2cb376,driver:_0x5afeb6,plate:_0x149c10,van:_0x5ef5ef,DRSI:_0x5db476,TSU:_0x1f129b,TFU:_0x51d18b,note:_0x5434d2}=_0x23cca0[_0x164db6(0x1d0)],_0xb4090d=await sales_order[_0x164db6(0x1ec)](_0xda91c5);if(typeof _0x2cb51c==_0x164db6(0x235))var _0x348a59=[_0x23cca0[_0x164db6(0x1d0)][_0x164db6(0x1d8)]],_0x347b5b=[_0x23cca0[_0x164db6(0x1d0)][_0x164db6(0x223)]],_0x3fd36a=[_0x23cca0['body'][_0x164db6(0x19e)]];else var _0x348a59=[..._0x23cca0['body'][_0x164db6(0x1d8)]],_0x347b5b=[..._0x23cca0[_0x164db6(0x1d0)][_0x164db6(0x223)]],_0x3fd36a=[..._0x23cca0[_0x164db6(0x1d0)][_0x164db6(0x19e)]];const _0x5d9e1d=_0x348a59[_0x164db6(0x1d6)](_0x5501f7=>{return _0x5501f7={'prod_id':_0x5501f7};});_0x3fd36a[_0x164db6(0x1ff)]((_0x15c518,_0x39cd06)=>{var _0x37985a=_0x164db6,_0x4a9273=_0x15c518[_0x37985a(0x192)]('~');_0x5d9e1d[_0x39cd06]['warehouse_id']=_0x4a9273[0x0],_0x5d9e1d[_0x39cd06][_0x37985a(0x20f)]=_0x4a9273[0x1];}),_0x347b5b['forEach']((_0x4cdf16,_0x592176)=>{var _0x2fc0da=_0x164db6;_0x5d9e1d[_0x592176][_0x2fc0da(0x230)]=_0x4cdf16;});var _0x18e5c1=[],_0xa780b3=[],_0x50f0d9=[],_0x3540ea=[],_0x1820e4=[],_0x25f94f=[],_0x411da6=[],_0x112093=[],_0x5bf676=[],_0x4db69c=[],_0x3e86f3=[],_0x4ecf90=[],_0x5b3750=[],_0x2a5930=[],_0x1d29b=[],_0x27313=[],_0x23fb85=[],_0x1a144d=[],_0x1b7a32=[],_0x1d30b8=[];for(let _0x596c95=0x0;_0x596c95<=_0x5d9e1d[_0x164db6(0x1df)]-0x1;_0x596c95++){const _0x53535b=_0x5d9e1d[_0x596c95],_0x519442=mongoose['Types'][_0x164db6(0x1bc)];var _0x1ab651=await warehouse[_0x164db6(0x1c7)]([{'$match':{'_id':_0x519442(_0x53535b[_0x164db6(0x224)])}},{'$unwind':_0x164db6(0x21a)},{'$match':{'product_details._id':_0x519442(_0x53535b['warehouse_detl'])}}]),_0x450b87=0x0;for(let _0xbe84a4=0x0;_0xbe84a4<=_0x1ab651[_0x164db6(0x1df)]-0x1;_0xbe84a4++){var _0x3a3e5b=_0x1ab651[_0xbe84a4];_0x3a3e5b['product_details'][_0x164db6(0x1f1)]<_0x53535b[_0x164db6(0x230)]&&_0x450b87++;}if(_0x450b87>0x0)return _0x23cca0['flash'](_0x164db6(0x1a4),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0xd44363[_0x164db6(0x1e1)]('back');var _0x9e31c0=0x0;for(let _0x4dbfc1=0x0;_0x4dbfc1<=_0x1ab651[_0x164db6(0x1df)]-0x1;_0x4dbfc1++){var _0x3a3e5b=_0x1ab651[_0x4dbfc1];_0x3a3e5b[_0x164db6(0x1d3)]['product_stock']>_0x53535b['request_qty']&&(_0x18e5c1[_0x164db6(0x21f)](_0x3a3e5b[_0x164db6(0x1d3)]['product_name']),_0xa780b3[_0x164db6(0x21f)](_0x3a3e5b[_0x164db6(0x1d3)]['product_stock']),_0x50f0d9['push'](_0x53535b[_0x164db6(0x230)]),_0x3540ea['push'](_0x3a3e5b[_0x164db6(0x1d3)][_0x164db6(0x21e)]),_0x1820e4[_0x164db6(0x21f)](_0x3a3e5b['product_details'][_0x164db6(0x19c)]),_0x25f94f[_0x164db6(0x21f)](_0x3a3e5b[_0x164db6(0x1d3)][_0x164db6(0x1e9)]),_0x411da6[_0x164db6(0x21f)](_0x3a3e5b['product_details'][_0x164db6(0x22a)]),_0x112093[_0x164db6(0x21f)](_0x3a3e5b['product_details'][_0x164db6(0x196)]),_0x5bf676[_0x164db6(0x21f)](_0x3a3e5b[_0x164db6(0x1d3)][_0x164db6(0x1aa)]),_0x4db69c[_0x164db6(0x21f)](_0x3a3e5b[_0x164db6(0x1d3)][_0x164db6(0x1a0)]),_0x3e86f3['push'](_0x3a3e5b[_0x164db6(0x1d3)][_0x164db6(0x1a6)]),_0x4ecf90[_0x164db6(0x21f)](_0x3a3e5b[_0x164db6(0x1d3)][_0x164db6(0x213)]),_0x5b3750[_0x164db6(0x21f)](_0x3a3e5b[_0x164db6(0x1d3)][_0x164db6(0x209)]),_0x2a5930[_0x164db6(0x21f)](_0x3a3e5b['product_details'][_0x164db6(0x1e3)]),_0x1d29b[_0x164db6(0x21f)](_0x3a3e5b['product_details'][_0x164db6(0x1d2)]),_0x27313[_0x164db6(0x21f)](_0x3a3e5b[_0x164db6(0x1b5)]),_0x23fb85['push'](_0x3a3e5b[_0x164db6(0x1d3)][_0x164db6(0x21b)]),_0x1a144d[_0x164db6(0x21f)](_0x3a3e5b[_0x164db6(0x1d3)][_0x164db6(0x225)]),_0x1b7a32[_0x164db6(0x21f)](_0x3a3e5b['product_details'][_0x164db6(0x205)]),_0x1d30b8[_0x164db6(0x21f)](_0x3a3e5b[_0x164db6(0x1d3)]['gross_price']),_0x9e31c0++);}}const _0x6723ae=_0x18e5c1['map'](_0x4681f2=>{return _0x4681f2={'product_name':_0x4681f2};});_0xa780b3[_0x164db6(0x1ff)]((_0xd70b24,_0x3006a7)=>{var _0x1f191e=_0x164db6;_0x6723ae[_0x3006a7][_0x1f191e(0x1bf)]=_0xd70b24;}),_0x50f0d9[_0x164db6(0x1ff)]((_0x282858,_0x197944)=>{var _0x4f961c=_0x164db6;_0x6723ae[_0x197944][_0x4f961c(0x22c)]=Math[_0x4f961c(0x1c5)](_0x282858);}),_0x1d30b8[_0x164db6(0x1ff)]((_0x3b9a20,_0x2f38de)=>{var _0x58a789=_0x164db6;_0x6723ae[_0x2f38de][_0x58a789(0x1c4)]=_0x3b9a20;}),_0x1b7a32[_0x164db6(0x1ff)]((_0x230186,_0x3e80e8)=>{var _0x12f646=_0x164db6;_0x6723ae[_0x3e80e8][_0x12f646(0x205)]=_0x230186;}),_0x1a144d[_0x164db6(0x1ff)]((_0x23d4bd,_0x5267da)=>{var _0x38eabe=_0x164db6;_0x6723ae[_0x5267da][_0x38eabe(0x1b9)]=_0x23d4bd;}),_0x3540ea[_0x164db6(0x1ff)]((_0x579d9c,_0x340b88)=>{var _0x1149d9=_0x164db6;_0x6723ae[_0x340b88][_0x1149d9(0x21e)]=_0x579d9c;}),_0x1820e4[_0x164db6(0x1ff)]((_0x1c319a,_0x3b51bd)=>{var _0x4bf286=_0x164db6;_0x6723ae[_0x3b51bd][_0x4bf286(0x19c)]=_0x1c319a;}),_0x25f94f[_0x164db6(0x1ff)]((_0x1c3f3e,_0x4ffbe9)=>{var _0xb56318=_0x164db6;_0x6723ae[_0x4ffbe9][_0xb56318(0x1e9)]=_0x1c3f3e;}),_0x411da6[_0x164db6(0x1ff)]((_0x54d7ab,_0x5221e3)=>{_0x6723ae[_0x5221e3]['level']=_0x54d7ab;}),_0x112093[_0x164db6(0x1ff)]((_0x1f84ba,_0xcf56e0)=>{_0x6723ae[_0xcf56e0]['bay']=_0x1f84ba;}),_0x5bf676[_0x164db6(0x1ff)]((_0x39a145,_0x6c7e4a)=>{_0x6723ae[_0x6c7e4a]['unit']=_0x39a145;}),_0x4db69c['forEach']((_0xa5bb8b,_0x3fa640)=>{var _0x1a19c3=_0x164db6;_0x6723ae[_0x3fa640][_0x1a19c3(0x1a0)]=_0xa5bb8b;}),_0x3e86f3[_0x164db6(0x1ff)]((_0x47f68f,_0x3c9480)=>{_0x6723ae[_0x3c9480]['batch_code']=_0x47f68f;}),_0x4ecf90[_0x164db6(0x1ff)]((_0x4d5a4d,_0x4f052c)=>{_0x6723ae[_0x4f052c]['expiry_date']=_0x4d5a4d;}),_0x5b3750[_0x164db6(0x1ff)]((_0x46471,_0x15e33c)=>{var _0x220311=_0x164db6;_0x6723ae[_0x15e33c][_0x220311(0x209)]=_0x46471;}),_0x2a5930[_0x164db6(0x1ff)]((_0x5d748d,_0x37be81)=>{var _0x576e98=_0x164db6;_0x6723ae[_0x37be81][_0x576e98(0x1c9)]=_0x5d748d;}),_0x1d29b[_0x164db6(0x1ff)]((_0x516819,_0x341719)=>{var _0x3628d0=_0x164db6;_0x6723ae[_0x341719][_0x3628d0(0x20b)]=_0x516819;}),_0x27313['forEach']((_0x188a9e,_0x2d27c5)=>{var _0x209dc4=_0x164db6;_0x6723ae[_0x2d27c5][_0x209dc4(0x218)]=_0x188a9e;}),_0x23fb85[_0x164db6(0x1ff)]((_0x4a583b,_0x5963bf)=>{var _0x3f915f=_0x164db6;_0x6723ae[_0x5963bf][_0x3f915f(0x21b)]=_0x4a583b,_0x6723ae[_0x5963bf]['date_data']=_0x38b255;});const _0x525d94=new invoice_for_outgoing();await _0x525d94['save'](),_0x23fb85[_0x164db6(0x1ff)]((_0x1b72f0,_0x2d21b6)=>{var _0x1d6294=_0x164db6;_0x6723ae[_0x2d21b6][_0x1d6294(0x204)]=_0x1d6294(0x22f)+_0x525d94[_0x1d6294(0x1ed)]['toString']()[_0x1d6294(0x1e0)](0x8,'0');});const _0x5d363a=_0x6723ae[_0x164db6(0x221)](_0x5224ee=>_0x5224ee['quantity']!=='0'&&_0x5224ee[_0x164db6(0x22c)]!==''),_0x3e6ec7=new sales_finished({'invoice':_0x164db6(0x22f)+_0x525d94[_0x164db6(0x1ed)][_0x164db6(0x1db)]()['padStart'](0x8,'0'),'date':_0x38b255,'warehouse_name':_0x447d93,'sale_product':_0x5d363a,'note':_0x5434d2,'SCRN':_0x11242b,'finalize':'False','ReqBy':_0x507545,'dateofreq':_0x2a1c96,'PO_number':_0x5ec5e4,'typeservicesData':_0x5e4da8,'typevehicle':_0x85b080,'destination':_0x78df2,'deliverydate':_0x2cb376,'driver':_0x5afeb6,'plate':_0x149c10,'van':_0x5ef5ef,'DRSI':_0x5db476,'TSU':_0x1f129b,'TFU':_0x51d18b}),_0x1508ca=await _0x3e6ec7[_0x164db6(0x236)](),_0x49ff6c=new Date(),_0xd574c5=_0x49ff6c[_0x164db6(0x1d5)]();_0xb4090d[_0x164db6(0x1c6)]=_0xa61221,_0xb4090d[_0x164db6(0x1d1)]=_0xd574c5,_0xb4090d[_0x164db6(0x20d)]='OUT-'+_0x525d94[_0x164db6(0x1ed)]['toString']()['padStart'](0x8,'0'),_0xb4090d[_0x164db6(0x20c)]=_0x1508ca[_0x164db6(0x225)],await _0xb4090d[_0x164db6(0x236)]();const _0x2a3f7b=await master_shop[_0x164db6(0x1cd)](),_0x3a75b8=await email_settings[_0x164db6(0x1fb)]();let _0x3780ab=nodemailer[_0x164db6(0x1a1)]({'host':_0x3a75b8[_0x164db6(0x1ce)],'port':Number(_0x3a75b8[_0x164db6(0x1e8)]),'secure':![],'auth':{'user':_0x3a75b8[_0x164db6(0x1e4)],'pass':_0x3a75b8[_0x164db6(0x21c)]}});const _0xfecb51=_0x23cca0[_0x164db6(0x1dc)]+_0x164db6(0x1a2)+_0x23cca0[_0x164db6(0x1f0)][_0x164db6(0x1ce)];var _0x2497ee=_0xb4090d['sale_product'],_0x9bfe54='',_0x24cd60,_0x5c8a87=0x0;for(_0x24cd60 in _0x2497ee){_0x9bfe54+=_0x164db6(0x20a)+_0x164db6(0x210)+_0x2497ee[_0x24cd60]['product_name']+_0x164db6(0x19a)+_0x164db6(0x210)+_0x2497ee[_0x24cd60][_0x164db6(0x1e9)]+_0x164db6(0x19a)+_0x164db6(0x210)+_0x2497ee[_0x24cd60]['quantity']+_0x164db6(0x19a)+_0x164db6(0x210)+_0x2497ee[_0x24cd60][_0x164db6(0x1aa)]+_0x164db6(0x19a)+'</tr>',_0x5c8a87+=parseInt(_0x2497ee[_0x24cd60][_0x164db6(0x22c)]);}let _0x292fa1={'from':_0x3a75b8[_0x164db6(0x1e4)],'to':'christian.villamer@jakagroup.com','subject':_0x164db6(0x1eb),'attachments':[{'filename':_0x164db6(0x1e6),'path':__dirname+'/../public'+_0x164db6(0x1a9)+_0x2a3f7b[0x0]['image'],'cid':_0x164db6(0x1ac)}],'html':'<!DOCTYPE\x20html>'+_0x164db6(0x1c3)+_0x164db6(0x1f3)+'</head><body>'+_0x164db6(0x203)+_0x164db6(0x1b0)+_0x164db6(0x203)+_0x164db6(0x222)+_0x164db6(0x190)+_0x164db6(0x203)+_0x164db6(0x229)+_0x164db6(0x190)+_0x164db6(0x190)+'<hr\x20class=\x22my-3\x22>'+_0x164db6(0x203)+_0x164db6(0x190)+_0x164db6(0x203)+'<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>'+_0x164db6(0x190)+_0x164db6(0x203)+_0x164db6(0x228)+_0xb4090d[_0x164db6(0x21b)]+_0x164db6(0x1f8)+_0x164db6(0x1d9)+_0xb4090d[_0x164db6(0x1c2)]+_0x164db6(0x1fa)+_0x164db6(0x190)+_0x164db6(0x1f2)+_0x164db6(0x201)+_0x164db6(0x20a)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x164db6(0x1ef)+_0x164db6(0x1b8)+_0x164db6(0x1b4)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x9bfe54+'\x20'+'</tbody>'+_0x164db6(0x1cc)+_0x164db6(0x203)+_0x164db6(0x1de)+_0x164db6(0x1a5)+_0x164db6(0x1b3)+'</div>'+_0x164db6(0x203)+_0x164db6(0x1e7)+_0x164db6(0x1fc)+_0x164db6(0x190)+_0x164db6(0x190)+_0x164db6(0x215)+_0x164db6(0x19d)};_0x3780ab[_0x164db6(0x219)](_0x292fa1,function(_0x7f943c,_0x4dfd61){var _0x5ad214=_0x164db6;_0x7f943c?(console['log'](_0x7f943c),console['log'](_0x5ad214(0x1f9))):console[_0x5ad214(0x21d)](_0x5ad214(0x1b6));}),_0x23cca0['flash'](_0x164db6(0x207),'Sales\x20Add\x20successfully'),_0xd44363[_0x164db6(0x1e1)]('/all_sales_finished/preview/'+_0x1508ca[_0x164db6(0x225)]),_0xd44363[_0x164db6(0x1a7)](_0x5d363a);return;}catch(_0x420f26){}}),router[a0_0x283b41(0x200)](a0_0x283b41(0x1b1),auth,async(_0x2bb9d4,_0x1109a2)=>{var _0xc3ddfb=a0_0x283b41;try{const _0x3d3f23=await master_shop['find'](),_0x48ae70=_0x2bb9d4[_0xc3ddfb(0x1e5)],_0x15f44b=await profile[_0xc3ddfb(0x1fb)]({'email':_0x48ae70['email']}),_0x100a64=await staff[_0xc3ddfb(0x1fb)]({'email':_0x48ae70[_0xc3ddfb(0x1e4)]}),_0x1909fb=await customer[_0xc3ddfb(0x1cd)]({'agent_id':_0x100a64['_id']}),_0x3ef6ae=mongoose[_0xc3ddfb(0x1c0)][_0xc3ddfb(0x1bc)],_0x991876=_0x2bb9d4[_0xc3ddfb(0x1dd)]['id'],_0x521b25=await sales_order[_0xc3ddfb(0x1ec)](_0x991876),_0xd72394=await sales_order[_0xc3ddfb(0x1c7)]([{'$match':{'_id':_0x3ef6ae(_0x991876)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0xc3ddfb(0x1d4)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0xc3ddfb(0x1da)}}},{'$lookup':{'from':_0xc3ddfb(0x199),'localField':_0xc3ddfb(0x220),'foreignField':_0xc3ddfb(0x225),'as':_0xc3ddfb(0x1f5)}},{'$unwind':_0xc3ddfb(0x20e)},{'$lookup':{'from':_0xc3ddfb(0x199),'localField':_0xc3ddfb(0x1a3),'foreignField':_0xc3ddfb(0x225),'as':_0xc3ddfb(0x226)}},{'$unwind':_0xc3ddfb(0x1ee)}]);if(_0x3d3f23[0x0][_0xc3ddfb(0x1c1)]=='English\x20(US)')var _0x5d87c7=users['English'];else{if(_0x3d3f23[0x0]['language']==_0xc3ddfb(0x19b))var _0x5d87c7=users[_0xc3ddfb(0x19b)];else{if(_0x3d3f23[0x0][_0xc3ddfb(0x1c1)]=='German')var _0x5d87c7=users[_0xc3ddfb(0x234)];else{if(_0x3d3f23[0x0][_0xc3ddfb(0x1c1)]==_0xc3ddfb(0x197))var _0x5d87c7=users[_0xc3ddfb(0x197)];else{if(_0x3d3f23[0x0][_0xc3ddfb(0x1c1)]==_0xc3ddfb(0x214))var _0x5d87c7=users[_0xc3ddfb(0x214)];else{if(_0x3d3f23[0x0][_0xc3ddfb(0x1c1)]==_0xc3ddfb(0x231))var _0x5d87c7=users[_0xc3ddfb(0x233)];else{if(_0x3d3f23[0x0][_0xc3ddfb(0x1c1)]==_0xc3ddfb(0x1cf))var _0x5d87c7=users[_0xc3ddfb(0x1cf)];else{if(_0x3d3f23[0x0]['language']==_0xc3ddfb(0x1ad))var _0x5d87c7=users[_0xc3ddfb(0x232)];}}}}}}}_0x1109a2[_0xc3ddfb(0x212)](_0xc3ddfb(0x22b),{'success':_0x2bb9d4['flash'](_0xc3ddfb(0x207)),'errors':_0x2bb9d4[_0xc3ddfb(0x193)]('errors'),'master_shop':_0x3d3f23,'profile':_0x15f44b,'role':_0x48ae70,'language':_0x5d87c7,'customer':_0x1909fb,'sales_sa':_0x521b25,'approvers':_0xd72394[0x0],'the_id':_0x991876});}catch(_0x12f61a){console[_0xc3ddfb(0x21d)](_0x12f61a);}}),router[a0_0x283b41(0x1ea)](a0_0x283b41(0x216),auth,async(_0xa73787,_0x3b320a)=>{var _0x50b933=a0_0x283b41;try{const {warehouse_name:_0xe991ce,product_code:_0x421337}=_0xa73787['body'],_0x4d5233=await warehouse[_0x50b933(0x1c7)]([{'$match':{'name':_0xe991ce}},{'$unwind':_0x50b933(0x21a)},{'$match':{'product_details.product_code':_0x421337}},{'$group':{'_id':{'room':'$room','_id':_0x50b933(0x208)}}}]);_0x3b320a['json'](_0x4d5233);}catch(_0x287c7f){}}),router['post'](a0_0x283b41(0x1fd),auth,async(_0xe0283e,_0x5bd5c8)=>{var _0x352695=a0_0x283b41;try{const {warehouse_name:_0x2e5c0a,product_code:_0x58c883,room_name:_0xd541c2}=_0xe0283e[_0x352695(0x1d0)];console[_0x352695(0x21d)](_0xe0283e[_0x352695(0x1d0)]);const _0x39c04f=await warehouse[_0x352695(0x1c7)]([{'$match':{'name':_0x2e5c0a,'room':_0xd541c2}},{'$unwind':_0x352695(0x21a)},{'$match':{'product_details.product_code':_0x58c883}},{'$group':{'_id':{'main_id':_0x352695(0x208),'detl_id':_0x352695(0x1cb),'product_name':_0x352695(0x1ba),'product_code':_0x352695(0x1bd),'level':_0x352695(0x19f),'bay':'$product_details.bay','stocks':_0x352695(0x1d7)}}}]);_0x5bd5c8['json'](_0x39c04f);}catch(_0x36a7ce){}}),router[a0_0x283b41(0x200)](a0_0x283b41(0x22e),auth,async(_0x3f92e8,_0x2f7a95)=>{var _0x34d08f=a0_0x283b41;try{const {sttaff_id:_0x5b6f85,email:_0xa9d64a,warehouse:_0x5f5b6a}=_0x3f92e8['user'],_0x4dcb0f=await master_shop[_0x34d08f(0x1cd)](),_0x156e05=_0x3f92e8[_0x34d08f(0x1e5)],_0x19fb82=await profile[_0x34d08f(0x1fb)]({'email':_0x156e05[_0x34d08f(0x1e4)]}),_0x40429f=await sales_order['find']({'wms_account_id':_0x5b6f85});if(_0x4dcb0f[0x0][_0x34d08f(0x1c1)]==_0x34d08f(0x1af))var _0x2268d4=users[_0x34d08f(0x1ab)];else{if(_0x4dcb0f[0x0]['language']==_0x34d08f(0x19b))var _0x2268d4=users['Hindi'];else{if(_0x4dcb0f[0x0][_0x34d08f(0x1c1)]==_0x34d08f(0x234))var _0x2268d4=users['German'];else{if(_0x4dcb0f[0x0][_0x34d08f(0x1c1)]=='Spanish')var _0x2268d4=users[_0x34d08f(0x197)];else{if(_0x4dcb0f[0x0][_0x34d08f(0x1c1)]==_0x34d08f(0x214))var _0x2268d4=users[_0x34d08f(0x214)];else{if(_0x4dcb0f[0x0][_0x34d08f(0x1c1)]==_0x34d08f(0x231))var _0x2268d4=users[_0x34d08f(0x233)];else{if(_0x4dcb0f[0x0][_0x34d08f(0x1c1)]==_0x34d08f(0x1cf))var _0x2268d4=users['Chinese'];else{if(_0x4dcb0f[0x0][_0x34d08f(0x1c1)]=='Arabic\x20(ae)')var _0x2268d4=users[_0x34d08f(0x232)];}}}}}}}_0x2f7a95['render'](_0x34d08f(0x1f4),{'success':_0x3f92e8[_0x34d08f(0x193)](_0x34d08f(0x207)),'errors':_0x3f92e8[_0x34d08f(0x193)](_0x34d08f(0x1a4)),'master_shop':_0x4dcb0f,'profile':_0x19fb82,'role':_0x156e05,'language':_0x2268d4,'sales_order':_0x40429f});}catch(_0x41566e){}}),module[a0_0x283b41(0x202)]=router;