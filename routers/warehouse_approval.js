function a0_0x590e(){var _0x17a31a=['<span>\x20Request\x20Date:\x20<b>','exceljs','product_stock','Arabic\x20(ae)','save','length','</body></html>','host','Chinese','toString','room_name','1Phdlbl','<table\x20style=\x22width:\x20100%\x20!important;\x22>','/:id','flash','invoice_init','wms_account_id','Portuguese\x20(BR)','Router','maxPerUnit','OUT-','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','Logo.png','$room','render','createTransport','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','product_cat','post','express','toLocaleDateString','findOne','params','get','forEach','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','French','Hindi','Portuguese','$wms_account_id','image','gross_price','<hr\x20class=\x22my-3\x22>','204TsNiiL','<tr>','warehouse_approval_All','</b></span>\x20<br><br>','secondary_code','email','request_qty','account_data','product_code','string','outgoing_invoice','bay','exports','$product_details.product_name','2197680MarAzn','maxperunit','4fiObaU','/../public','../middleware/auth','Types','<br><br><br>','<h2>\x20JEC\x20SMS\x20</h2>','aggregate','<strong>\x20Regards\x20</strong>','product_details','<html><head><title></title>','outgoing_id','sale_product','$product_details._id','Spanish','2517487gmpLCL','</tr>','wms_account_date','protocol','secondary_unit','data_loc','stock','errors','success','nodemailer','password','1254VlYNZw','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','://','json','English','port','wms_data','warehouse_detl','findById','</thead>','$product_details','Email\x20sent\x20successfully','English\x20(US)','xlsx','redirect','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','$wms_data','date_data','mongoose','</div>','18UxLfEr','prod_id','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','unit','/data/All','qty','../models/all_models','German','level','quantity','</tbody>','$product_details.product_code','wms_account_confirm','/data/data_loc','Arabic','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','accounting_account_id','</head><body>','_id','/view_sales_order/:id','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','staffs','$_id','padStart','Email\x20for\x20Customer','<div>','warehouse_id','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','production_date','ObjectId','body','push','$account_data','expiry_date','$accounting_account_id','map','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','845273KloBnF','id_transaction_from','<span>\x20Request\x20ID:\x20<b>','Sales\x20Add\x20successfully','False','<!DOCTYPE\x20html>','batch_code','language','invoice','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','2270694rADLYD','logo','find','filter','primary_code','uuid','warehouse_approval','christian.villamer@jakagroup.com','/upload/','product_name','document_number_out','user','</td>','back','31598014IwJHMR','24lQINUM','<tbody\x20style=\x22text-align:\x20center;\x22>','1965NwMyqh','</b></span>\x20<br>','$product_details.level','abs','1724368cUXRDn','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','log','13pivcLP','<thead\x20style=\x22width:\x20100%\x20!important;\x22>'];a0_0x590e=function(){return _0x17a31a;};return a0_0x590e();}function a0_0x25d0(_0x935219,_0x5efaea){var _0x590e1e=a0_0x590e();return a0_0x25d0=function(_0x25d07e,_0x2efee8){_0x25d07e=_0x25d07e-0x13d;var _0x1bb1dd=_0x590e1e[_0x25d07e];return _0x1bb1dd;},a0_0x25d0(_0x935219,_0x5efaea);}var a0_0x24e71c=a0_0x25d0;(function(_0x3828ff,_0x267227){var _0x2f0279=a0_0x25d0,_0x233c06=_0x3828ff();while(!![]){try{var _0x324892=-parseInt(_0x2f0279(0x1d4))/0x1*(parseInt(_0x2f0279(0x1c4))/0x2)+-parseInt(_0x2f0279(0x1af))/0x3*(parseInt(_0x2f0279(0x153))/0x4)+-parseInt(_0x2f0279(0x1c0))/0x5*(parseInt(_0x2f0279(0x16c))/0x6)+parseInt(_0x2f0279(0x161))/0x7*(parseInt(_0x2f0279(0x1be))/0x8)+-parseInt(_0x2f0279(0x180))/0x9*(-parseInt(_0x2f0279(0x151))/0xa)+-parseInt(_0x2f0279(0x1a5))/0xb*(parseInt(_0x2f0279(0x143))/0xc)+-parseInt(_0x2f0279(0x1c7))/0xd*(-parseInt(_0x2f0279(0x1bd))/0xe);if(_0x324892===_0x267227)break;else _0x233c06['push'](_0x233c06['shift']());}catch(_0x305184){_0x233c06['push'](_0x233c06['shift']());}}}(a0_0x590e,0xbb7a6));const express=require(a0_0x24e71c(0x1e6)),app=express(),router=express[a0_0x24e71c(0x1db)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x24e71c(0x186)),auth=require(a0_0x24e71c(0x155)),users=require('../public/language/languages.json'),excelJS=require(a0_0x24e71c(0x1ca)),xlsx=require(a0_0x24e71c(0x179)),mongoose=require(a0_0x24e71c(0x17e)),{ObjectId}=require('mongodb'),nodemailer=require(a0_0x24e71c(0x16a));router['get'](a0_0x24e71c(0x1d6),auth,async(_0x349c9c,_0x4af4bf)=>{var _0x5eafbc=a0_0x24e71c;try{const _0x1bacca=await master_shop[_0x5eafbc(0x1b1)](),_0x4c96ac=_0x349c9c[_0x5eafbc(0x1ba)],_0x46ddbe=await profile[_0x5eafbc(0x1e8)]({'email':_0x4c96ac['email']}),_0xbc9c70=await staff['findOne']({'email':_0x4c96ac[_0x5eafbc(0x148)]}),_0x34b7d2=await customer['find']({'agent_id':_0xbc9c70[_0x5eafbc(0x192)]}),_0x41e342=mongoose[_0x5eafbc(0x156)][_0x5eafbc(0x19d)],_0x4a6d2f=_0x349c9c[_0x5eafbc(0x1e9)]['id'],_0x328dd5=await sales_order['findById'](_0x4a6d2f),_0xcf2f5a=await sales_order['aggregate']([{'$match':{'_id':_0x41e342(_0x4a6d2f)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x5eafbc(0x1a2)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x5eafbc(0x13f)}}},{'$lookup':{'from':_0x5eafbc(0x195),'localField':_0x5eafbc(0x190),'foreignField':'_id','as':_0x5eafbc(0x14a)}},{'$unwind':_0x5eafbc(0x1a0)},{'$lookup':{'from':_0x5eafbc(0x195),'localField':_0x5eafbc(0x1d9),'foreignField':_0x5eafbc(0x192),'as':_0x5eafbc(0x172)}},{'$unwind':'$wms_data'}]);if(_0x1bacca[0x0][_0x5eafbc(0x1ac)]==_0x5eafbc(0x178))var _0x1b7c74=users[_0x5eafbc(0x170)];else{if(_0x1bacca[0x0][_0x5eafbc(0x1ac)]==_0x5eafbc(0x13d))var _0x1b7c74=users['Hindi'];else{if(_0x1bacca[0x0][_0x5eafbc(0x1ac)]==_0x5eafbc(0x187))var _0x1b7c74=users[_0x5eafbc(0x187)];else{if(_0x1bacca[0x0]['language']==_0x5eafbc(0x160))var _0x1b7c74=users[_0x5eafbc(0x160)];else{if(_0x1bacca[0x0]['language']=='French')var _0x1b7c74=users['French'];else{if(_0x1bacca[0x0][_0x5eafbc(0x1ac)]==_0x5eafbc(0x1da))var _0x1b7c74=users['Portuguese'];else{if(_0x1bacca[0x0]['language']==_0x5eafbc(0x1d1))var _0x1b7c74=users[_0x5eafbc(0x1d1)];else{if(_0x1bacca[0x0][_0x5eafbc(0x1ac)]==_0x5eafbc(0x1cc))var _0x1b7c74=users[_0x5eafbc(0x18e)];}}}}}}}_0x4af4bf['render'](_0x5eafbc(0x1b5),{'success':_0x349c9c['flash'](_0x5eafbc(0x169)),'errors':_0x349c9c[_0x5eafbc(0x1d7)](_0x5eafbc(0x168)),'master_shop':_0x1bacca,'profile':_0x46ddbe,'role':_0x4c96ac,'language':_0x1b7c74,'customer':_0x34b7d2,'sales_sa':_0x328dd5,'approvers':_0xcf2f5a[0x0],'the_id':_0x4a6d2f});}catch(_0x54676c){console['log'](_0x54676c);}}),router[a0_0x24e71c(0x1e5)](a0_0x24e71c(0x1d6),auth,async(_0x2e414b,_0x2de768)=>{var _0x42c356=a0_0x24e71c;try{const {date:_0x353483,invoice_data:_0x2fae23,wms_confirm:_0x3406cc,the_id_val:_0x131de8,prod_id:_0x27869c,SCRN:_0x44aba6,ReqBy:_0x119731,dateofreq:_0x1619d5,PO_number:_0x46c6df,warehouse_name:_0x3ca2d5,typeservicesData:_0x1923c9,typevehicle:_0x249b18,destination:_0x575e86,deliverydate:_0x11450a,driver:_0x5cab84,plate:_0x1d78c8,van:_0x593f2e,DRSI:_0x1a89d1,TSU:_0x404605,TFU:_0x333634,note:_0xd89428}=_0x2e414b[_0x42c356(0x19e)],_0xc9725=await sales_order[_0x42c356(0x174)](_0x131de8);if(typeof _0x27869c==_0x42c356(0x14c))var _0x2afb28=[_0x2e414b['body'][_0x42c356(0x181)]],_0x292b09=[_0x2e414b['body'][_0x42c356(0x185)]],_0x196587=[_0x2e414b[_0x42c356(0x19e)][_0x42c356(0x166)]];else var _0x2afb28=[..._0x2e414b['body'][_0x42c356(0x181)]],_0x292b09=[..._0x2e414b['body'][_0x42c356(0x185)]],_0x196587=[..._0x2e414b[_0x42c356(0x19e)][_0x42c356(0x166)]];const _0x3f695d=_0x2afb28[_0x42c356(0x1a3)](_0x15b9f3=>{return _0x15b9f3={'prod_id':_0x15b9f3};});_0x196587[_0x42c356(0x1eb)]((_0x246607,_0x45701d)=>{var _0x22f0e4=_0x42c356,_0x13cf9c=_0x246607['split']('~');_0x3f695d[_0x45701d][_0x22f0e4(0x19a)]=_0x13cf9c[0x0],_0x3f695d[_0x45701d]['warehouse_detl']=_0x13cf9c[0x1];}),_0x292b09['forEach']((_0x1bd481,_0x20a62f)=>{var _0x26192f=_0x42c356;_0x3f695d[_0x20a62f][_0x26192f(0x149)]=_0x1bd481;});var _0x553c0e=[],_0x2f08d4=[],_0x2aa133=[],_0x57d5b5=[],_0x276d9d=[],_0x3f5446=[],_0x4f7fa6=[],_0x493cbc=[],_0x18122a=[],_0x3bbd87=[],_0x52efb8=[],_0x43c789=[],_0x5e63df=[],_0x463993=[],_0x20d5fa=[],_0x23e140=[],_0x16cf30=[],_0x213189=[],_0x3058f4=[],_0x3af347=[];for(let _0x1d05d7=0x0;_0x1d05d7<=_0x3f695d[_0x42c356(0x1ce)]-0x1;_0x1d05d7++){const _0x2b2b09=_0x3f695d[_0x1d05d7],_0x571286=mongoose[_0x42c356(0x156)]['ObjectId'];var _0x3463c1=await warehouse[_0x42c356(0x159)]([{'$match':{'_id':_0x571286(_0x2b2b09[_0x42c356(0x19a)])}},{'$unwind':_0x42c356(0x176)},{'$match':{'product_details._id':_0x571286(_0x2b2b09[_0x42c356(0x173)])}}]),_0x533838=0x0;for(let _0x44b6b5=0x0;_0x44b6b5<=_0x3463c1[_0x42c356(0x1ce)]-0x1;_0x44b6b5++){var _0x3d77d1=_0x3463c1[_0x44b6b5];_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x1cb)]<_0x2b2b09[_0x42c356(0x149)]&&_0x533838++;}if(_0x533838>0x0)return _0x2e414b[_0x42c356(0x1d7)](_0x42c356(0x168),_0x42c356(0x1ec)),_0x2de768['redirect'](_0x42c356(0x1bc));var _0x38044f=0x0;for(let _0xab5e92=0x0;_0xab5e92<=_0x3463c1[_0x42c356(0x1ce)]-0x1;_0xab5e92++){var _0x3d77d1=_0x3463c1[_0xab5e92];_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x1cb)]>_0x2b2b09[_0x42c356(0x149)]&&(_0x553c0e[_0x42c356(0x19f)](_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x1b8)]),_0x2f08d4[_0x42c356(0x19f)](_0x3d77d1['product_details'][_0x42c356(0x1cb)]),_0x2aa133[_0x42c356(0x19f)](_0x2b2b09[_0x42c356(0x149)]),_0x57d5b5[_0x42c356(0x19f)](_0x3d77d1['product_details'][_0x42c356(0x1b3)]),_0x276d9d[_0x42c356(0x19f)](_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x147)]),_0x3f5446[_0x42c356(0x19f)](_0x3d77d1['product_details'][_0x42c356(0x14b)]),_0x4f7fa6[_0x42c356(0x19f)](_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x188)]),_0x493cbc[_0x42c356(0x19f)](_0x3d77d1['product_details'][_0x42c356(0x14e)]),_0x18122a[_0x42c356(0x19f)](_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x183)]),_0x3bbd87['push'](_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x165)]),_0x52efb8[_0x42c356(0x19f)](_0x3d77d1['product_details'][_0x42c356(0x1ab)]),_0x43c789[_0x42c356(0x19f)](_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x1a1)]),_0x5e63df[_0x42c356(0x19f)](_0x3d77d1['product_details'][_0x42c356(0x19c)]),_0x463993[_0x42c356(0x19f)](_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x1dc)]),_0x20d5fa[_0x42c356(0x19f)](_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x1e4)]),_0x23e140[_0x42c356(0x19f)](_0x3d77d1['room']),_0x16cf30[_0x42c356(0x19f)](_0x3d77d1['product_details'][_0x42c356(0x1ad)]),_0x213189['push'](_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x192)]),_0x3058f4[_0x42c356(0x19f)](_0x3d77d1[_0x42c356(0x15b)]['uuid']),_0x3af347[_0x42c356(0x19f)](_0x3d77d1[_0x42c356(0x15b)][_0x42c356(0x141)]),_0x38044f++);}}const _0x1e1f85=_0x553c0e[_0x42c356(0x1a3)](_0x1429d9=>{return _0x1429d9={'product_name':_0x1429d9};});_0x2f08d4[_0x42c356(0x1eb)]((_0x3122c7,_0x319281)=>{var _0x383db7=_0x42c356;_0x1e1f85[_0x319281][_0x383db7(0x167)]=_0x3122c7;}),_0x2aa133['forEach']((_0x5ce22d,_0x1c403e)=>{var _0x3dcbfd=_0x42c356;_0x1e1f85[_0x1c403e][_0x3dcbfd(0x189)]=Math[_0x3dcbfd(0x1c3)](_0x5ce22d);}),_0x3af347[_0x42c356(0x1eb)]((_0x4044f0,_0x4879a9)=>{var _0x108c62=_0x42c356;_0x1e1f85[_0x4879a9][_0x108c62(0x141)]=_0x4044f0;}),_0x3058f4[_0x42c356(0x1eb)]((_0x164e4b,_0x3a8d6)=>{var _0x480602=_0x42c356;_0x1e1f85[_0x3a8d6][_0x480602(0x1b4)]=_0x164e4b;}),_0x213189['forEach']((_0x454309,_0x4502ef)=>{var _0x2e5f48=_0x42c356;_0x1e1f85[_0x4502ef][_0x2e5f48(0x1a6)]=_0x454309;}),_0x57d5b5[_0x42c356(0x1eb)]((_0x3bd641,_0x5850a7)=>{var _0x483821=_0x42c356;_0x1e1f85[_0x5850a7][_0x483821(0x1b3)]=_0x3bd641;}),_0x276d9d[_0x42c356(0x1eb)]((_0xb1edae,_0x2e0bba)=>{var _0x361318=_0x42c356;_0x1e1f85[_0x2e0bba][_0x361318(0x147)]=_0xb1edae;}),_0x3f5446[_0x42c356(0x1eb)]((_0x402e36,_0x2a194d)=>{_0x1e1f85[_0x2a194d]['product_code']=_0x402e36;}),_0x4f7fa6[_0x42c356(0x1eb)]((_0x21aac4,_0x4de853)=>{var _0x5d386e=_0x42c356;_0x1e1f85[_0x4de853][_0x5d386e(0x188)]=_0x21aac4;}),_0x493cbc[_0x42c356(0x1eb)]((_0x1cb161,_0x385939)=>{var _0x28b683=_0x42c356;_0x1e1f85[_0x385939][_0x28b683(0x14e)]=_0x1cb161;}),_0x18122a[_0x42c356(0x1eb)]((_0x2a64f7,_0x1d8fb9)=>{var _0x1a5f55=_0x42c356;_0x1e1f85[_0x1d8fb9][_0x1a5f55(0x183)]=_0x2a64f7;}),_0x3bbd87[_0x42c356(0x1eb)]((_0x27595a,_0x36d1e7)=>{_0x1e1f85[_0x36d1e7]['secondary_unit']=_0x27595a;}),_0x52efb8[_0x42c356(0x1eb)]((_0x513506,_0xa0d2a3)=>{var _0xed1db6=_0x42c356;_0x1e1f85[_0xa0d2a3][_0xed1db6(0x1ab)]=_0x513506;}),_0x43c789['forEach']((_0x2cfb33,_0xcaf44e)=>{var _0x376c83=_0x42c356;_0x1e1f85[_0xcaf44e][_0x376c83(0x1a1)]=_0x2cfb33;}),_0x5e63df['forEach']((_0x1c696a,_0x1706bc)=>{var _0x36dd07=_0x42c356;_0x1e1f85[_0x1706bc][_0x36dd07(0x19c)]=_0x1c696a;}),_0x463993[_0x42c356(0x1eb)]((_0x30ed7b,_0x3bc4e4)=>{var _0xb5ef0c=_0x42c356;_0x1e1f85[_0x3bc4e4][_0xb5ef0c(0x152)]=_0x30ed7b;}),_0x20d5fa[_0x42c356(0x1eb)]((_0x281310,_0x4b3a65)=>{_0x1e1f85[_0x4b3a65]['prod_cat']=_0x281310;}),_0x23e140[_0x42c356(0x1eb)]((_0x364446,_0x4e9a09)=>{var _0x50ef7a=_0x42c356;_0x1e1f85[_0x4e9a09][_0x50ef7a(0x1d3)]=_0x364446;}),_0x16cf30[_0x42c356(0x1eb)]((_0x2dba86,_0x2339f7)=>{var _0x5c79a7=_0x42c356;_0x1e1f85[_0x2339f7][_0x5c79a7(0x1ad)]=_0x2dba86,_0x1e1f85[_0x2339f7][_0x5c79a7(0x17d)]=_0x353483;});const _0x4b5e98=new invoice_for_outgoing();await _0x4b5e98['save'](),_0x16cf30[_0x42c356(0x1eb)]((_0x5e05c5,_0x37d4de)=>{var _0x3384a1=_0x42c356;_0x1e1f85[_0x37d4de][_0x3384a1(0x14d)]=_0x3384a1(0x1dd)+_0x4b5e98['invoice_init'][_0x3384a1(0x1d2)]()[_0x3384a1(0x197)](0x8,'0');});const _0x386a29=_0x1e1f85[_0x42c356(0x1b2)](_0x319005=>_0x319005[_0x42c356(0x189)]!=='0'&&_0x319005['quantity']!==''),_0x50a9cc=new sales_finished({'invoice':_0x42c356(0x1dd)+_0x4b5e98[_0x42c356(0x1d8)]['toString']()['padStart'](0x8,'0'),'date':_0x353483,'warehouse_name':_0x3ca2d5,'sale_product':_0x386a29,'note':_0xd89428,'SCRN':_0x44aba6,'finalize':_0x42c356(0x1a9),'ReqBy':_0x119731,'dateofreq':_0x1619d5,'PO_number':_0x46c6df,'typeservicesData':_0x1923c9,'typevehicle':_0x249b18,'destination':_0x575e86,'deliverydate':_0x11450a,'driver':_0x5cab84,'plate':_0x1d78c8,'van':_0x593f2e,'DRSI':_0x1a89d1,'TSU':_0x404605,'TFU':_0x333634}),_0x5b2b50=await _0x50a9cc[_0x42c356(0x1cd)](),_0x431e23=new Date(),_0x465de1=_0x431e23[_0x42c356(0x1e7)]();_0xc9725[_0x42c356(0x18c)]=_0x3406cc,_0xc9725[_0x42c356(0x163)]=_0x465de1,_0xc9725[_0x42c356(0x1b9)]=_0x42c356(0x1dd)+_0x4b5e98['invoice_init']['toString']()['padStart'](0x8,'0'),_0xc9725[_0x42c356(0x15d)]=_0x5b2b50['_id'],await _0xc9725[_0x42c356(0x1cd)]();const _0x3228ac=await master_shop['find'](),_0x8c02c1=await email_settings[_0x42c356(0x1e8)]();let _0x47d4cf=nodemailer[_0x42c356(0x1e2)]({'host':_0x8c02c1[_0x42c356(0x1d0)],'port':Number(_0x8c02c1[_0x42c356(0x171)]),'secure':![],'auth':{'user':_0x8c02c1['email'],'pass':_0x8c02c1[_0x42c356(0x16b)]}});const _0x3f5347=_0x2e414b[_0x42c356(0x164)]+_0x42c356(0x16e)+_0x2e414b['headers'][_0x42c356(0x1d0)];var _0x253d79=_0xc9725[_0x42c356(0x15e)],_0x3e2dcf='',_0x1c5171,_0x1cac85=0x0;for(_0x1c5171 in _0x253d79){_0x3e2dcf+=_0x42c356(0x144)+_0x42c356(0x182)+_0x253d79[_0x1c5171]['product_name']+_0x42c356(0x1bb)+_0x42c356(0x182)+_0x253d79[_0x1c5171][_0x42c356(0x14b)]+_0x42c356(0x1bb)+_0x42c356(0x182)+_0x253d79[_0x1c5171]['quantity']+'</td>'+_0x42c356(0x182)+_0x253d79[_0x1c5171][_0x42c356(0x183)]+_0x42c356(0x1bb)+_0x42c356(0x162),_0x1cac85+=parseInt(_0x253d79[_0x1c5171][_0x42c356(0x189)]);}let _0x183fc3={'from':_0x8c02c1[_0x42c356(0x148)],'to':_0x42c356(0x1b6),'subject':_0x42c356(0x198),'attachments':[{'filename':_0x42c356(0x1df),'path':__dirname+_0x42c356(0x154)+_0x42c356(0x1b7)+_0x3228ac[0x0][_0x42c356(0x140)],'cid':_0x42c356(0x1b0)}],'html':_0x42c356(0x1aa)+_0x42c356(0x15c)+_0x42c356(0x19b)+_0x42c356(0x191)+'<div>'+_0x42c356(0x1de)+_0x42c356(0x199)+_0x42c356(0x194)+'</div>'+'<div>'+_0x42c356(0x158)+_0x42c356(0x17f)+_0x42c356(0x17f)+_0x42c356(0x142)+_0x42c356(0x199)+'</div>'+_0x42c356(0x199)+_0x42c356(0x1c5)+_0x42c356(0x17f)+_0x42c356(0x199)+_0x42c356(0x1a7)+_0xc9725[_0x42c356(0x1ad)]+_0x42c356(0x1c1)+_0x42c356(0x1c9)+_0xc9725['date']+_0x42c356(0x146)+_0x42c356(0x17f)+_0x42c356(0x1d5)+_0x42c356(0x1c8)+_0x42c356(0x144)+_0x42c356(0x1a4)+_0x42c356(0x17b)+_0x42c356(0x18f)+_0x42c356(0x16d)+_0x42c356(0x162)+_0x42c356(0x175)+_0x42c356(0x1bf)+'\x20'+_0x3e2dcf+'\x20'+_0x42c356(0x18a)+'</table>'+_0x42c356(0x199)+_0x42c356(0x1ae)+_0x42c356(0x1e3)+_0x42c356(0x157)+_0x42c356(0x17f)+_0x42c356(0x199)+_0x42c356(0x15a)+'<h5>\x20JEC\x20SMS\x20</h5>'+_0x42c356(0x17f)+'</div>'+'<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>'+_0x42c356(0x1cf)};_0x47d4cf['sendMail'](_0x183fc3,function(_0xf07de,_0x26f1c3){var _0x450bdf=_0x42c356;_0xf07de?(console[_0x450bdf(0x1c6)](_0xf07de),console[_0x450bdf(0x1c6)]('Error\x20Occurs')):console[_0x450bdf(0x1c6)](_0x450bdf(0x177));}),_0x2e414b[_0x42c356(0x1d7)]('success',_0x42c356(0x1a8)),_0x2de768[_0x42c356(0x17a)]('/all_sales_finished/preview/'+_0x5b2b50[_0x42c356(0x192)]),_0x2de768[_0x42c356(0x16f)](_0x386a29);return;}catch(_0x2a0e77){}}),router['get'](a0_0x24e71c(0x193),auth,async(_0x55f66f,_0x4768ee)=>{var _0x5734e6=a0_0x24e71c;try{const _0x7f1a7c=await master_shop[_0x5734e6(0x1b1)](),_0x39368a=_0x55f66f['user'],_0x315f3b=await profile[_0x5734e6(0x1e8)]({'email':_0x39368a[_0x5734e6(0x148)]}),_0x1ca4a2=await staff['findOne']({'email':_0x39368a['email']}),_0x71b6db=await customer['find']({'agent_id':_0x1ca4a2[_0x5734e6(0x192)]}),_0x26d9b2=mongoose[_0x5734e6(0x156)][_0x5734e6(0x19d)],_0x3e8f02=_0x55f66f[_0x5734e6(0x1e9)]['id'],_0x39b3f6=await sales_order[_0x5734e6(0x174)](_0x3e8f02),_0x439430=await sales_order['aggregate']([{'$match':{'_id':_0x26d9b2(_0x3e8f02)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x5734e6(0x1a2)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':'staffs','localField':'accounting_account_id','foreignField':_0x5734e6(0x192),'as':'account_data'}},{'$unwind':_0x5734e6(0x1a0)},{'$lookup':{'from':_0x5734e6(0x195),'localField':_0x5734e6(0x1d9),'foreignField':_0x5734e6(0x192),'as':_0x5734e6(0x172)}},{'$unwind':_0x5734e6(0x17c)}]);if(_0x7f1a7c[0x0]['language']=='English\x20(US)')var _0x170c16=users[_0x5734e6(0x170)];else{if(_0x7f1a7c[0x0][_0x5734e6(0x1ac)]=='Hindi')var _0x170c16=users[_0x5734e6(0x13d)];else{if(_0x7f1a7c[0x0][_0x5734e6(0x1ac)]==_0x5734e6(0x187))var _0x170c16=users[_0x5734e6(0x187)];else{if(_0x7f1a7c[0x0][_0x5734e6(0x1ac)]=='Spanish')var _0x170c16=users[_0x5734e6(0x160)];else{if(_0x7f1a7c[0x0][_0x5734e6(0x1ac)]==_0x5734e6(0x1ed))var _0x170c16=users[_0x5734e6(0x1ed)];else{if(_0x7f1a7c[0x0][_0x5734e6(0x1ac)]==_0x5734e6(0x1da))var _0x170c16=users[_0x5734e6(0x13e)];else{if(_0x7f1a7c[0x0][_0x5734e6(0x1ac)]==_0x5734e6(0x1d1))var _0x170c16=users[_0x5734e6(0x1d1)];else{if(_0x7f1a7c[0x0][_0x5734e6(0x1ac)]==_0x5734e6(0x1cc))var _0x170c16=users[_0x5734e6(0x18e)];}}}}}}}_0x4768ee[_0x5734e6(0x1e1)]('view_accounting_approval',{'success':_0x55f66f[_0x5734e6(0x1d7)](_0x5734e6(0x169)),'errors':_0x55f66f[_0x5734e6(0x1d7)](_0x5734e6(0x168)),'master_shop':_0x7f1a7c,'profile':_0x315f3b,'role':_0x39368a,'language':_0x170c16,'customer':_0x71b6db,'sales_sa':_0x39b3f6,'approvers':_0x439430[0x0],'the_id':_0x3e8f02});}catch(_0x2ea44a){console['log'](_0x2ea44a);}}),router[a0_0x24e71c(0x1e5)]('/data/data_rack',auth,async(_0x3941ca,_0x5b950d)=>{var _0x5937fe=a0_0x24e71c;try{const {warehouse_name:_0x5fdf48,product_code:_0x1ab0cb}=_0x3941ca['body'],_0x3853e0=await warehouse[_0x5937fe(0x159)]([{'$match':{'name':_0x5fdf48}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x1ab0cb}},{'$group':{'_id':{'room':_0x5937fe(0x1e0),'_id':_0x5937fe(0x196)}}}]);_0x5b950d[_0x5937fe(0x16f)](_0x3853e0);}catch(_0x2a38a6){}}),router[a0_0x24e71c(0x1e5)](a0_0x24e71c(0x18d),auth,async(_0x4d2339,_0x289bd6)=>{var _0xa421e3=a0_0x24e71c;try{const {warehouse_name:_0x34663f,product_code:_0x3dd6bc,room_name:_0xe86ad}=_0x4d2339[_0xa421e3(0x19e)];console[_0xa421e3(0x1c6)](_0x4d2339[_0xa421e3(0x19e)]);const _0x80bcc2=await warehouse[_0xa421e3(0x159)]([{'$match':{'name':_0x34663f,'room':_0xe86ad}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x3dd6bc}},{'$group':{'_id':{'main_id':_0xa421e3(0x196),'detl_id':_0xa421e3(0x15f),'product_name':_0xa421e3(0x150),'product_code':_0xa421e3(0x18b),'level':_0xa421e3(0x1c2),'bay':'$product_details.bay','stocks':'$product_details.product_stock'}}}]);_0x289bd6['json'](_0x80bcc2);}catch(_0x47e806){}}),router[a0_0x24e71c(0x1ea)](a0_0x24e71c(0x184),auth,async(_0xcb2f47,_0x7990a9)=>{var _0x1a245f=a0_0x24e71c;try{const {sttaff_id:_0x3577ea,email:_0xb85dfa,warehouse:_0x22d9d5}=_0xcb2f47[_0x1a245f(0x1ba)],_0x8c0be6=await master_shop[_0x1a245f(0x1b1)](),_0x169351=_0xcb2f47['user'],_0x5b42f1=await profile[_0x1a245f(0x1e8)]({'email':_0x169351[_0x1a245f(0x148)]}),_0x10d5bc=await sales_order[_0x1a245f(0x1b1)]({'wms_account_id':_0x3577ea});if(_0x8c0be6[0x0][_0x1a245f(0x1ac)]==_0x1a245f(0x178))var _0x3ecfc8=users[_0x1a245f(0x170)];else{if(_0x8c0be6[0x0]['language']==_0x1a245f(0x13d))var _0x3ecfc8=users[_0x1a245f(0x13d)];else{if(_0x8c0be6[0x0][_0x1a245f(0x1ac)]=='German')var _0x3ecfc8=users[_0x1a245f(0x187)];else{if(_0x8c0be6[0x0][_0x1a245f(0x1ac)]==_0x1a245f(0x160))var _0x3ecfc8=users[_0x1a245f(0x160)];else{if(_0x8c0be6[0x0][_0x1a245f(0x1ac)]=='French')var _0x3ecfc8=users[_0x1a245f(0x1ed)];else{if(_0x8c0be6[0x0][_0x1a245f(0x1ac)]==_0x1a245f(0x1da))var _0x3ecfc8=users[_0x1a245f(0x13e)];else{if(_0x8c0be6[0x0]['language']==_0x1a245f(0x1d1))var _0x3ecfc8=users[_0x1a245f(0x1d1)];else{if(_0x8c0be6[0x0]['language']==_0x1a245f(0x1cc))var _0x3ecfc8=users[_0x1a245f(0x18e)];}}}}}}}_0x7990a9[_0x1a245f(0x1e1)](_0x1a245f(0x145),{'success':_0xcb2f47['flash'](_0x1a245f(0x169)),'errors':_0xcb2f47['flash'](_0x1a245f(0x168)),'master_shop':_0x8c0be6,'profile':_0x5b42f1,'role':_0x169351,'language':_0x3ecfc8,'sales_order':_0x10d5bc});}catch(_0xcd4c60){}}),module[a0_0x24e71c(0x14f)]=router;