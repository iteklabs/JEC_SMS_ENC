var a0_0x25ad95=a0_0x29fa;function a0_0x5039(){var _0x2caed2=['bay','ObjectId','level','Sales\x20Add\x20successfully','unit','secondary_unit','language','product_details','$product_details','outgoing_invoice','maxPerUnit','Error\x20Occurs','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','invoice_init','27317KQReLv','express','4476045mojzHJ','</td>','body','toLocaleDateString','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','expiry_date','map','$accounting_account_id','</tbody>','redirect','stock','$_id','errors','_id','$product_details._id','</head><body>','148zhQjLE','save','qty','createTransport','../middleware/auth','Types','$account_data','product_cat','view_accounting_approval','wms_data','christian.villamer@jakagroup.com','headers','host','product_code','warehouse_detl','string','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','aggregate','product_name','gross_price','<tr>','/:id','password','batch_code','/data/data_loc','production_date','warehouse_id','date_data','$product_details.level','document_number_out','xlsx','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','57475hPreAo','$wms_data','quantity','post','flash','length','2522490IzLCxE','<br><br><br>','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','room_name','split','params','</div>','accounting_account_id','English','mongodb','Hindi','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','findById','protocol','False','request_qty','abs','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','toString','/../public','prod_id','wms_account_confirm','invoice','$product_details.product_name','date','Portuguese\x20(BR)','warehouse_approval_All','back','find','Portuguese','1632328zlDSpH','staffs','filter','wms_account_id','/data/data_rack','prod_cat','German','room','forEach','log','Chinese','findOne','</b></span>\x20<br><br>','<div>','://','Arabic','<h5>\x20JEC\x20SMS\x20</h5>','sale_product','get','warehouse_approval','nodemailer','exceljs','Arabic\x20(ae)','</tr>','success','$product_details.product_stock','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','user','1471641SWVgcH','id_transaction_from','French','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','email','<h2>\x20JEC\x20SMS\x20</h2>','OUT-','product_stock','exports','/view_sales_order/:id','render','</table>','../models/all_models','Spanish','json','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','$wms_account_id','mongoose','logo','<table\x20style=\x22width:\x20100%\x20!important;\x22>','Logo.png','12118869IrkGQY','<!DOCTYPE\x20html>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','/data/All','push','<tbody\x20style=\x22text-align:\x20center;\x22>','padStart','<span>\x20Request\x20ID:\x20<b>','$product_details.bay','English\x20(US)','secondary_code','38FLYGgC','Email\x20sent\x20successfully','/upload/'];a0_0x5039=function(){return _0x2caed2;};return a0_0x5039();}(function(_0x100667,_0x52bc10){var _0x36448c=a0_0x29fa,_0x57ec13=_0x100667();while(!![]){try{var _0x371dff=-parseInt(_0x36448c(0x1ea))/0x1*(-parseInt(_0x36448c(0x1d9))/0x2)+-parseInt(_0x36448c(0x1b9))/0x3+parseInt(_0x36448c(0x158))/0x4*(parseInt(_0x36448c(0x179))/0x5)+parseInt(_0x36448c(0x17f))/0x6+parseInt(_0x36448c(0x148))/0x7+parseInt(_0x36448c(0x19d))/0x8+-parseInt(_0x36448c(0x1ce))/0x9;if(_0x371dff===_0x52bc10)break;else _0x57ec13['push'](_0x57ec13['shift']());}catch(_0x247916){_0x57ec13['push'](_0x57ec13['shift']());}}}(a0_0x5039,0x5a9c5));const express=require(a0_0x25ad95(0x147)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x25ad95(0x1c5)),auth=require(a0_0x25ad95(0x15c)),users=require('../public/language/languages.json'),excelJS=require(a0_0x25ad95(0x1b2)),xlsx=require(a0_0x25ad95(0x177)),mongoose=require(a0_0x25ad95(0x1ca)),{ObjectId}=require(a0_0x25ad95(0x188)),nodemailer=require(a0_0x25ad95(0x1b1));function a0_0x29fa(_0x4332c4,_0xf1f2bc){var _0x503948=a0_0x5039();return a0_0x29fa=function(_0x29fa98,_0xa177a2){_0x29fa98=_0x29fa98-0x147;var _0x5b5fe4=_0x503948[_0x29fa98];return _0x5b5fe4;},a0_0x29fa(_0x4332c4,_0xf1f2bc);}router[a0_0x25ad95(0x1af)](a0_0x25ad95(0x16e),auth,async(_0x1ecfb9,_0x5578bd)=>{var _0x56a174=a0_0x25ad95;try{const _0x2c7b31=await master_shop[_0x56a174(0x19b)](),_0x2f57ad=_0x1ecfb9[_0x56a174(0x1b8)],_0x5b7cde=await profile[_0x56a174(0x1a8)]({'email':_0x2f57ad['email']}),_0x2cff43=await staff['findOne']({'email':_0x2f57ad[_0x56a174(0x1bd)]}),_0x1b0a77=await customer[_0x56a174(0x19b)]({'agent_id':_0x2cff43[_0x56a174(0x155)]}),_0x11417a=mongoose['Types'][_0x56a174(0x1dd)],_0x4b5237=_0x1ecfb9[_0x56a174(0x184)]['id'],_0x58b8ca=await sales_order[_0x56a174(0x18b)](_0x4b5237),_0x4e9030=await sales_order[_0x56a174(0x16a)]([{'$match':{'_id':_0x11417a(_0x4b5237)}},{'$addFields':{'accounting_account_id':{'$toObjectId':'$accounting_account_id'}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x56a174(0x1c9)}}},{'$lookup':{'from':'staffs','localField':_0x56a174(0x186),'foreignField':'_id','as':'account_data'}},{'$unwind':_0x56a174(0x15e)},{'$lookup':{'from':_0x56a174(0x19e),'localField':'wms_account_id','foreignField':'_id','as':_0x56a174(0x161)}},{'$unwind':_0x56a174(0x17a)}]);if(_0x2c7b31[0x0][_0x56a174(0x1e2)]==_0x56a174(0x1d7))var _0x477aac=users[_0x56a174(0x187)];else{if(_0x2c7b31[0x0][_0x56a174(0x1e2)]==_0x56a174(0x189))var _0x477aac=users['Hindi'];else{if(_0x2c7b31[0x0][_0x56a174(0x1e2)]==_0x56a174(0x1a3))var _0x477aac=users['German'];else{if(_0x2c7b31[0x0]['language']==_0x56a174(0x1c6))var _0x477aac=users[_0x56a174(0x1c6)];else{if(_0x2c7b31[0x0][_0x56a174(0x1e2)]==_0x56a174(0x1bb))var _0x477aac=users['French'];else{if(_0x2c7b31[0x0][_0x56a174(0x1e2)]==_0x56a174(0x198))var _0x477aac=users[_0x56a174(0x19c)];else{if(_0x2c7b31[0x0]['language']==_0x56a174(0x1a7))var _0x477aac=users['Chinese'];else{if(_0x2c7b31[0x0][_0x56a174(0x1e2)]==_0x56a174(0x1b3))var _0x477aac=users['Arabic'];}}}}}}}_0x5578bd['render'](_0x56a174(0x1b0),{'success':_0x1ecfb9[_0x56a174(0x17d)](_0x56a174(0x1b5)),'errors':_0x1ecfb9[_0x56a174(0x17d)](_0x56a174(0x154)),'master_shop':_0x2c7b31,'profile':_0x5b7cde,'role':_0x2f57ad,'language':_0x477aac,'customer':_0x1b0a77,'sales_sa':_0x58b8ca,'approvers':_0x4e9030[0x0],'the_id':_0x4b5237});}catch(_0x4a186e){console[_0x56a174(0x1a6)](_0x4a186e);}}),router[a0_0x25ad95(0x17c)](a0_0x25ad95(0x16e),auth,async(_0x5c0d3d,_0x36df1c)=>{var _0x4db2e9=a0_0x25ad95;try{const {date:_0x2dbc12,invoice_data:_0x131217,wms_confirm:_0x5155b9,the_id_val:_0x1b3faf,prod_id:_0xacd0b4,SCRN:_0x3b50df,ReqBy:_0x129252,dateofreq:_0x10472d,PO_number:_0x3e5bd7,warehouse_name:_0x1d3f3e,typeservicesData:_0xc4e001,typevehicle:_0x1693c6,destination:_0x4310b9,deliverydate:_0x1c7f6f,driver:_0x24ecd4,plate:_0x53be41,van:_0x3f51f6,DRSI:_0x1c1848,TSU:_0x206d65,TFU:_0x513644,note:_0x44266a}=_0x5c0d3d['body'],_0x389adf=await sales_order[_0x4db2e9(0x18b)](_0x1b3faf);if(typeof _0xacd0b4==_0x4db2e9(0x167))var _0x1f6447=[_0x5c0d3d[_0x4db2e9(0x14a)][_0x4db2e9(0x193)]],_0x2a0eb3=[_0x5c0d3d['body'][_0x4db2e9(0x15a)]],_0xec55b0=[_0x5c0d3d[_0x4db2e9(0x14a)]['data_loc']];else var _0x1f6447=[..._0x5c0d3d['body'][_0x4db2e9(0x193)]],_0x2a0eb3=[..._0x5c0d3d[_0x4db2e9(0x14a)][_0x4db2e9(0x15a)]],_0xec55b0=[..._0x5c0d3d[_0x4db2e9(0x14a)]['data_loc']];const _0x18c98c=_0x1f6447[_0x4db2e9(0x14e)](_0x2df6ba=>{return _0x2df6ba={'prod_id':_0x2df6ba};});_0xec55b0[_0x4db2e9(0x1a5)]((_0xa006bb,_0x395292)=>{var _0x506c76=_0x4db2e9,_0x333665=_0xa006bb[_0x506c76(0x183)]('~');_0x18c98c[_0x395292]['warehouse_id']=_0x333665[0x0],_0x18c98c[_0x395292][_0x506c76(0x166)]=_0x333665[0x1];}),_0x2a0eb3[_0x4db2e9(0x1a5)]((_0x572aa3,_0x1af4ef)=>{var _0x333b46=_0x4db2e9;_0x18c98c[_0x1af4ef][_0x333b46(0x18e)]=_0x572aa3;});var _0x4d8fa6=[],_0x181cf4=[],_0xe584a=[],_0x267d25=[],_0x7b6500=[],_0x21d66d=[],_0x1c7bbc=[],_0x4ba52e=[],_0x10a5a7=[],_0x4ca293=[],_0x425ae7=[],_0x117e61=[],_0x27d61a=[],_0x2a3556=[],_0x40c231=[],_0x3d32b3=[],_0x103106=[],_0xab415d=[],_0x186e33=[],_0x49bd0=[];for(let _0x441056=0x0;_0x441056<=_0x18c98c[_0x4db2e9(0x17e)]-0x1;_0x441056++){const _0x202f1c=_0x18c98c[_0x441056],_0x204a8e=mongoose[_0x4db2e9(0x15d)][_0x4db2e9(0x1dd)];var _0x1d6895=await warehouse[_0x4db2e9(0x16a)]([{'$match':{'_id':_0x204a8e(_0x202f1c[_0x4db2e9(0x173)])}},{'$unwind':_0x4db2e9(0x1e4)},{'$match':{'product_details._id':_0x204a8e(_0x202f1c['warehouse_detl'])}}]),_0x1f8af1=0x0;for(let _0x152be4=0x0;_0x152be4<=_0x1d6895[_0x4db2e9(0x17e)]-0x1;_0x152be4++){var _0x1e948e=_0x1d6895[_0x152be4];_0x1e948e['product_details']['product_stock']<_0x202f1c[_0x4db2e9(0x18e)]&&_0x1f8af1++;}if(_0x1f8af1>0x0)return _0x5c0d3d[_0x4db2e9(0x17d)](_0x4db2e9(0x154),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x36df1c[_0x4db2e9(0x151)](_0x4db2e9(0x19a));var _0x22effa=0x0;for(let _0x351de4=0x0;_0x351de4<=_0x1d6895[_0x4db2e9(0x17e)]-0x1;_0x351de4++){var _0x1e948e=_0x1d6895[_0x351de4];_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x1c0)]>_0x202f1c[_0x4db2e9(0x18e)]&&(_0x4d8fa6[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x16b)]),_0x181cf4[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x1c0)]),_0xe584a[_0x4db2e9(0x1d2)](_0x202f1c[_0x4db2e9(0x18e)]),_0x267d25[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)]['primary_code']),_0x7b6500[_0x4db2e9(0x1d2)](_0x1e948e['product_details'][_0x4db2e9(0x1d8)]),_0x21d66d[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x165)]),_0x1c7bbc[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x1de)]),_0x4ba52e[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x1dc)]),_0x10a5a7['push'](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x1e0)]),_0x4ca293[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x1e1)]),_0x425ae7[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x170)]),_0x117e61['push'](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x14d)]),_0x27d61a[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x172)]),_0x2a3556['push'](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x1e6)]),_0x40c231[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x15f)]),_0x3d32b3[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1a4)]),_0x103106[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x195)]),_0xab415d[_0x4db2e9(0x1d2)](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x155)]),_0x186e33['push'](_0x1e948e['product_details']['uuid']),_0x49bd0['push'](_0x1e948e[_0x4db2e9(0x1e3)][_0x4db2e9(0x16c)]),_0x22effa++);}}const _0x373f92=_0x4d8fa6['map'](_0x25d526=>{return _0x25d526={'product_name':_0x25d526};});_0x181cf4[_0x4db2e9(0x1a5)]((_0x3527ff,_0x2719cb)=>{var _0x3cd7a7=_0x4db2e9;_0x373f92[_0x2719cb][_0x3cd7a7(0x152)]=_0x3527ff;}),_0xe584a['forEach']((_0x4f2873,_0x2cb5d8)=>{var _0x3aff74=_0x4db2e9;_0x373f92[_0x2cb5d8][_0x3aff74(0x17b)]=Math[_0x3aff74(0x18f)](_0x4f2873);}),_0x49bd0['forEach']((_0x57b391,_0x1e9960)=>{_0x373f92[_0x1e9960]['gross_price']=_0x57b391;}),_0x186e33[_0x4db2e9(0x1a5)]((_0x3104bf,_0x40e046)=>{_0x373f92[_0x40e046]['uuid']=_0x3104bf;}),_0xab415d['forEach']((_0x4a0c64,_0x18350b)=>{var _0xafdfab=_0x4db2e9;_0x373f92[_0x18350b][_0xafdfab(0x1ba)]=_0x4a0c64;}),_0x267d25[_0x4db2e9(0x1a5)]((_0x47bbbe,_0xa232dc)=>{_0x373f92[_0xa232dc]['primary_code']=_0x47bbbe;}),_0x7b6500[_0x4db2e9(0x1a5)]((_0x3331a1,_0x2c65d6)=>{_0x373f92[_0x2c65d6]['secondary_code']=_0x3331a1;}),_0x21d66d[_0x4db2e9(0x1a5)]((_0x29776f,_0x2e4ccb)=>{var _0x98c261=_0x4db2e9;_0x373f92[_0x2e4ccb][_0x98c261(0x165)]=_0x29776f;}),_0x1c7bbc['forEach']((_0x4ef27e,_0x2dd1f1)=>{_0x373f92[_0x2dd1f1]['level']=_0x4ef27e;}),_0x4ba52e[_0x4db2e9(0x1a5)]((_0x18833e,_0x4098c8)=>{_0x373f92[_0x4098c8]['bay']=_0x18833e;}),_0x10a5a7[_0x4db2e9(0x1a5)]((_0x1e406c,_0x186643)=>{var _0x5d783b=_0x4db2e9;_0x373f92[_0x186643][_0x5d783b(0x1e0)]=_0x1e406c;}),_0x4ca293[_0x4db2e9(0x1a5)]((_0x5084b8,_0x10242c)=>{var _0x596f01=_0x4db2e9;_0x373f92[_0x10242c][_0x596f01(0x1e1)]=_0x5084b8;}),_0x425ae7[_0x4db2e9(0x1a5)]((_0x1f4438,_0x475a3a)=>{var _0x33c1de=_0x4db2e9;_0x373f92[_0x475a3a][_0x33c1de(0x170)]=_0x1f4438;}),_0x117e61[_0x4db2e9(0x1a5)]((_0x2d6505,_0x4e8550)=>{var _0xf6823a=_0x4db2e9;_0x373f92[_0x4e8550][_0xf6823a(0x14d)]=_0x2d6505;}),_0x27d61a['forEach']((_0x340e57,_0x10bd1f)=>{var _0x1a6b36=_0x4db2e9;_0x373f92[_0x10bd1f][_0x1a6b36(0x172)]=_0x340e57;}),_0x2a3556[_0x4db2e9(0x1a5)]((_0x33a759,_0x39489d)=>{_0x373f92[_0x39489d]['maxperunit']=_0x33a759;}),_0x40c231[_0x4db2e9(0x1a5)]((_0x4a484c,_0x280aa9)=>{var _0x581f5f=_0x4db2e9;_0x373f92[_0x280aa9][_0x581f5f(0x1a2)]=_0x4a484c;}),_0x3d32b3[_0x4db2e9(0x1a5)]((_0x522bd0,_0x45f386)=>{var _0x4ade5b=_0x4db2e9;_0x373f92[_0x45f386][_0x4ade5b(0x182)]=_0x522bd0;}),_0x103106[_0x4db2e9(0x1a5)]((_0x94c908,_0x2e3999)=>{var _0x345ac5=_0x4db2e9;_0x373f92[_0x2e3999][_0x345ac5(0x195)]=_0x94c908,_0x373f92[_0x2e3999][_0x345ac5(0x174)]=_0x2dbc12;});const _0x52377b=new invoice_for_outgoing();await _0x52377b[_0x4db2e9(0x159)](),_0x103106[_0x4db2e9(0x1a5)]((_0x402527,_0x373591)=>{var _0x2f6344=_0x4db2e9;_0x373f92[_0x373591][_0x2f6344(0x1e5)]='OUT-'+_0x52377b['invoice_init'][_0x2f6344(0x191)]()[_0x2f6344(0x1d4)](0x8,'0');});const _0x182176=_0x373f92[_0x4db2e9(0x19f)](_0x4e4fcd=>_0x4e4fcd[_0x4db2e9(0x17b)]!=='0'&&_0x4e4fcd[_0x4db2e9(0x17b)]!==''),_0x2e15b4=new sales_finished({'invoice':_0x4db2e9(0x1bf)+_0x52377b['invoice_init'][_0x4db2e9(0x191)]()[_0x4db2e9(0x1d4)](0x8,'0'),'date':_0x2dbc12,'warehouse_name':_0x1d3f3e,'sale_product':_0x182176,'note':_0x44266a,'SCRN':_0x3b50df,'finalize':_0x4db2e9(0x18d),'ReqBy':_0x129252,'dateofreq':_0x10472d,'PO_number':_0x3e5bd7,'typeservicesData':_0xc4e001,'typevehicle':_0x1693c6,'destination':_0x4310b9,'deliverydate':_0x1c7f6f,'driver':_0x24ecd4,'plate':_0x53be41,'van':_0x3f51f6,'DRSI':_0x1c1848,'TSU':_0x206d65,'TFU':_0x513644}),_0x4a5877=await _0x2e15b4['save'](),_0xfbccb1=new Date(),_0x3545b5=_0xfbccb1[_0x4db2e9(0x14b)]();_0x389adf[_0x4db2e9(0x194)]=_0x5155b9,_0x389adf['wms_account_date']=_0x3545b5,_0x389adf[_0x4db2e9(0x176)]='OUT-'+_0x52377b[_0x4db2e9(0x1e9)][_0x4db2e9(0x191)]()[_0x4db2e9(0x1d4)](0x8,'0'),_0x389adf['outgoing_id']=_0x4a5877[_0x4db2e9(0x155)],await _0x389adf['save']();const _0x50c09c=await master_shop[_0x4db2e9(0x19b)](),_0xaf4037=await email_settings[_0x4db2e9(0x1a8)]();let _0x94598d=nodemailer[_0x4db2e9(0x15b)]({'host':_0xaf4037[_0x4db2e9(0x164)],'port':Number(_0xaf4037['port']),'secure':![],'auth':{'user':_0xaf4037[_0x4db2e9(0x1bd)],'pass':_0xaf4037[_0x4db2e9(0x16f)]}});const _0x120bca=_0x5c0d3d[_0x4db2e9(0x18c)]+_0x4db2e9(0x1ab)+_0x5c0d3d[_0x4db2e9(0x163)][_0x4db2e9(0x164)];var _0xe9b281=_0x389adf[_0x4db2e9(0x1ae)],_0x992070='',_0x37adbc,_0x1bb621=0x0;for(_0x37adbc in _0xe9b281){_0x992070+=_0x4db2e9(0x16d)+_0x4db2e9(0x18a)+_0xe9b281[_0x37adbc][_0x4db2e9(0x16b)]+_0x4db2e9(0x149)+_0x4db2e9(0x18a)+_0xe9b281[_0x37adbc][_0x4db2e9(0x165)]+_0x4db2e9(0x149)+_0x4db2e9(0x18a)+_0xe9b281[_0x37adbc][_0x4db2e9(0x17b)]+_0x4db2e9(0x149)+_0x4db2e9(0x18a)+_0xe9b281[_0x37adbc][_0x4db2e9(0x1e0)]+'</td>'+_0x4db2e9(0x1b4),_0x1bb621+=parseInt(_0xe9b281[_0x37adbc][_0x4db2e9(0x17b)]);}let _0x44b232={'from':_0xaf4037['email'],'to':_0x4db2e9(0x162),'subject':'Email\x20for\x20Customer','attachments':[{'filename':_0x4db2e9(0x1cd),'path':__dirname+_0x4db2e9(0x192)+_0x4db2e9(0x1db)+_0x50c09c[0x0]['image'],'cid':_0x4db2e9(0x1cb)}],'html':_0x4db2e9(0x1cf)+'<html><head><title></title>'+_0x4db2e9(0x1b7)+_0x4db2e9(0x157)+_0x4db2e9(0x1aa)+_0x4db2e9(0x1c8)+_0x4db2e9(0x1aa)+_0x4db2e9(0x14c)+_0x4db2e9(0x185)+_0x4db2e9(0x1aa)+_0x4db2e9(0x1be)+'</div>'+'</div>'+'<hr\x20class=\x22my-3\x22>'+'<div>'+_0x4db2e9(0x185)+'<div>'+'<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>'+_0x4db2e9(0x185)+'<div>'+_0x4db2e9(0x1d5)+_0x389adf[_0x4db2e9(0x195)]+'</b></span>\x20<br>'+'<span>\x20Request\x20Date:\x20<b>'+_0x389adf[_0x4db2e9(0x197)]+_0x4db2e9(0x1a9)+_0x4db2e9(0x185)+_0x4db2e9(0x1cc)+_0x4db2e9(0x1e8)+_0x4db2e9(0x16d)+_0x4db2e9(0x1bc)+_0x4db2e9(0x1d0)+_0x4db2e9(0x169)+_0x4db2e9(0x168)+_0x4db2e9(0x1b4)+'</thead>'+_0x4db2e9(0x1d3)+'\x20'+_0x992070+'\x20'+_0x4db2e9(0x150)+_0x4db2e9(0x1c4)+'<div>'+_0x4db2e9(0x178)+_0x4db2e9(0x190)+_0x4db2e9(0x180)+_0x4db2e9(0x185)+_0x4db2e9(0x1aa)+'<strong>\x20Regards\x20</strong>'+_0x4db2e9(0x1ad)+'</div>'+_0x4db2e9(0x185)+_0x4db2e9(0x181)+'</body></html>'};_0x94598d['sendMail'](_0x44b232,function(_0x167970,_0x1c6a2b){var _0x19f70c=_0x4db2e9;_0x167970?(console['log'](_0x167970),console[_0x19f70c(0x1a6)](_0x19f70c(0x1e7))):console[_0x19f70c(0x1a6)](_0x19f70c(0x1da));}),_0x5c0d3d['flash'](_0x4db2e9(0x1b5),_0x4db2e9(0x1df)),_0x36df1c[_0x4db2e9(0x151)]('/all_sales_finished/preview/'+_0x4a5877[_0x4db2e9(0x155)]),_0x36df1c[_0x4db2e9(0x1c7)](_0x182176);return;}catch(_0x30652e){}}),router[a0_0x25ad95(0x1af)](a0_0x25ad95(0x1c2),auth,async(_0x40245c,_0x1009fd)=>{var _0x3414e0=a0_0x25ad95;try{const _0x3b04f2=await master_shop[_0x3414e0(0x19b)](),_0x5eadf5=_0x40245c[_0x3414e0(0x1b8)],_0x176a08=await profile[_0x3414e0(0x1a8)]({'email':_0x5eadf5['email']}),_0x50920a=await staff[_0x3414e0(0x1a8)]({'email':_0x5eadf5[_0x3414e0(0x1bd)]}),_0x447646=await customer[_0x3414e0(0x19b)]({'agent_id':_0x50920a['_id']}),_0x28d043=mongoose['Types']['ObjectId'],_0x5dd14e=_0x40245c[_0x3414e0(0x184)]['id'],_0x11c48f=await sales_order['findById'](_0x5dd14e),_0x248450=await sales_order[_0x3414e0(0x16a)]([{'$match':{'_id':_0x28d043(_0x5dd14e)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x3414e0(0x14f)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x3414e0(0x1c9)}}},{'$lookup':{'from':_0x3414e0(0x19e),'localField':_0x3414e0(0x186),'foreignField':'_id','as':'account_data'}},{'$unwind':_0x3414e0(0x15e)},{'$lookup':{'from':_0x3414e0(0x19e),'localField':_0x3414e0(0x1a0),'foreignField':_0x3414e0(0x155),'as':'wms_data'}},{'$unwind':_0x3414e0(0x17a)}]);if(_0x3b04f2[0x0][_0x3414e0(0x1e2)]==_0x3414e0(0x1d7))var _0x2be772=users[_0x3414e0(0x187)];else{if(_0x3b04f2[0x0]['language']=='Hindi')var _0x2be772=users[_0x3414e0(0x189)];else{if(_0x3b04f2[0x0][_0x3414e0(0x1e2)]=='German')var _0x2be772=users['German'];else{if(_0x3b04f2[0x0][_0x3414e0(0x1e2)]==_0x3414e0(0x1c6))var _0x2be772=users[_0x3414e0(0x1c6)];else{if(_0x3b04f2[0x0][_0x3414e0(0x1e2)]==_0x3414e0(0x1bb))var _0x2be772=users[_0x3414e0(0x1bb)];else{if(_0x3b04f2[0x0][_0x3414e0(0x1e2)]==_0x3414e0(0x198))var _0x2be772=users[_0x3414e0(0x19c)];else{if(_0x3b04f2[0x0][_0x3414e0(0x1e2)]==_0x3414e0(0x1a7))var _0x2be772=users['Chinese'];else{if(_0x3b04f2[0x0][_0x3414e0(0x1e2)]==_0x3414e0(0x1b3))var _0x2be772=users[_0x3414e0(0x1ac)];}}}}}}}_0x1009fd[_0x3414e0(0x1c3)](_0x3414e0(0x160),{'success':_0x40245c[_0x3414e0(0x17d)](_0x3414e0(0x1b5)),'errors':_0x40245c[_0x3414e0(0x17d)]('errors'),'master_shop':_0x3b04f2,'profile':_0x176a08,'role':_0x5eadf5,'language':_0x2be772,'customer':_0x447646,'sales_sa':_0x11c48f,'approvers':_0x248450[0x0],'the_id':_0x5dd14e});}catch(_0x1e4edc){console[_0x3414e0(0x1a6)](_0x1e4edc);}}),router[a0_0x25ad95(0x17c)](a0_0x25ad95(0x1a1),auth,async(_0x2eb301,_0x56dd1c)=>{var _0x2adb0d=a0_0x25ad95;try{const {warehouse_name:_0x5f31e2,product_code:_0x4de1b2}=_0x2eb301[_0x2adb0d(0x14a)],_0xd15548=await warehouse[_0x2adb0d(0x16a)]([{'$match':{'name':_0x5f31e2}},{'$unwind':_0x2adb0d(0x1e4)},{'$match':{'product_details.product_code':_0x4de1b2}},{'$group':{'_id':{'room':'$room','_id':_0x2adb0d(0x153)}}}]);_0x56dd1c[_0x2adb0d(0x1c7)](_0xd15548);}catch(_0x265694){}}),router[a0_0x25ad95(0x17c)](a0_0x25ad95(0x171),auth,async(_0x14d692,_0x2a4ce1)=>{var _0x378e06=a0_0x25ad95;try{const {warehouse_name:_0x54db97,product_code:_0x2636e5,room_name:_0xb915d1}=_0x14d692['body'];console['log'](_0x14d692['body']);const _0x88cd0b=await warehouse[_0x378e06(0x16a)]([{'$match':{'name':_0x54db97,'room':_0xb915d1}},{'$unwind':_0x378e06(0x1e4)},{'$match':{'product_details.product_code':_0x2636e5}},{'$group':{'_id':{'main_id':'$_id','detl_id':_0x378e06(0x156),'product_name':_0x378e06(0x196),'product_code':'$product_details.product_code','level':_0x378e06(0x175),'bay':_0x378e06(0x1d6),'stocks':_0x378e06(0x1b6)}}}]);_0x2a4ce1[_0x378e06(0x1c7)](_0x88cd0b);}catch(_0x415db6){}}),router[a0_0x25ad95(0x1af)](a0_0x25ad95(0x1d1),auth,async(_0x13af66,_0x74c092)=>{var _0x2141b5=a0_0x25ad95;try{const {sttaff_id:_0x363dc4,email:_0x2d2314,warehouse:_0x45703a}=_0x13af66[_0x2141b5(0x1b8)],_0x426762=await master_shop['find'](),_0x2ed408=_0x13af66['user'],_0x1a8c5a=await profile[_0x2141b5(0x1a8)]({'email':_0x2ed408[_0x2141b5(0x1bd)]}),_0x1224aa=await sales_order[_0x2141b5(0x19b)]({'wms_account_id':_0x363dc4});if(_0x426762[0x0][_0x2141b5(0x1e2)]==_0x2141b5(0x1d7))var _0x3977c3=users[_0x2141b5(0x187)];else{if(_0x426762[0x0]['language']=='Hindi')var _0x3977c3=users[_0x2141b5(0x189)];else{if(_0x426762[0x0][_0x2141b5(0x1e2)]==_0x2141b5(0x1a3))var _0x3977c3=users[_0x2141b5(0x1a3)];else{if(_0x426762[0x0][_0x2141b5(0x1e2)]==_0x2141b5(0x1c6))var _0x3977c3=users[_0x2141b5(0x1c6)];else{if(_0x426762[0x0][_0x2141b5(0x1e2)]==_0x2141b5(0x1bb))var _0x3977c3=users['French'];else{if(_0x426762[0x0][_0x2141b5(0x1e2)]==_0x2141b5(0x198))var _0x3977c3=users[_0x2141b5(0x19c)];else{if(_0x426762[0x0][_0x2141b5(0x1e2)]==_0x2141b5(0x1a7))var _0x3977c3=users['Chinese'];else{if(_0x426762[0x0][_0x2141b5(0x1e2)]==_0x2141b5(0x1b3))var _0x3977c3=users[_0x2141b5(0x1ac)];}}}}}}}_0x74c092[_0x2141b5(0x1c3)](_0x2141b5(0x199),{'success':_0x13af66[_0x2141b5(0x17d)](_0x2141b5(0x1b5)),'errors':_0x13af66[_0x2141b5(0x17d)](_0x2141b5(0x154)),'master_shop':_0x426762,'profile':_0x1a8c5a,'role':_0x2ed408,'language':_0x3977c3,'sales_order':_0x1224aa});}catch(_0x41fec8){}}),module[a0_0x25ad95(0x1c1)]=router;