function a0_0x32be(_0xceabe9,_0x58c7b4){var _0x5ebcd0=a0_0x5ebc();return a0_0x32be=function(_0x32bec6,_0x15a774){_0x32bec6=_0x32bec6-0x1ad;var _0x3936a2=_0x5ebcd0[_0x32bec6];return _0x3936a2;},a0_0x32be(_0xceabe9,_0x58c7b4);}var a0_0x268053=a0_0x32be;(function(_0x574cc4,_0x25177f){var _0xdf2d63=a0_0x32be,_0x3093ac=_0x574cc4();while(!![]){try{var _0x28645c=-parseInt(_0xdf2d63(0x1ad))/0x1+-parseInt(_0xdf2d63(0x1f8))/0x2+-parseInt(_0xdf2d63(0x1ce))/0x3*(parseInt(_0xdf2d63(0x1b2))/0x4)+-parseInt(_0xdf2d63(0x1b8))/0x5*(parseInt(_0xdf2d63(0x1ca))/0x6)+parseInt(_0xdf2d63(0x20b))/0x7*(parseInt(_0xdf2d63(0x1c5))/0x8)+-parseInt(_0xdf2d63(0x201))/0x9*(-parseInt(_0xdf2d63(0x213))/0xa)+-parseInt(_0xdf2d63(0x1b0))/0xb*(-parseInt(_0xdf2d63(0x220))/0xc);if(_0x28645c===_0x25177f)break;else _0x3093ac['push'](_0x3093ac['shift']());}catch(_0x11cd07){_0x3093ac['push'](_0x3093ac['shift']());}}}(a0_0x5ebc,0x31ea7));const express=require(a0_0x268053(0x1d7)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require('../models/all_models'),auth=require(a0_0x268053(0x223)),users=require(a0_0x268053(0x23d)),excelJS=require('exceljs'),xlsx=require(a0_0x268053(0x1cf)),mongoose=require(a0_0x268053(0x212)),{ObjectId}=require(a0_0x268053(0x1fd)),nodemailer=require(a0_0x268053(0x1cd));router[a0_0x268053(0x1f2)](a0_0x268053(0x1da),auth,async(_0x256720,_0x4644ae)=>{var _0x1823e1=a0_0x268053;try{const _0x412e4f=await master_shop[_0x1823e1(0x216)](),_0x596085=_0x256720[_0x1823e1(0x1cc)],_0x39fd9d=await profile['findOne']({'email':_0x596085[_0x1823e1(0x231)]}),_0x59bf7f=await staff[_0x1823e1(0x1c7)]({'email':_0x596085[_0x1823e1(0x231)]}),_0x4128aa=await customer[_0x1823e1(0x216)]({'agent_id':_0x59bf7f[_0x1823e1(0x1c3)]}),_0x1086e6=mongoose['Types'][_0x1823e1(0x1e7)],_0x12b6b2=_0x256720[_0x1823e1(0x1f0)]['id'],_0x12a045=await sales_order[_0x1823e1(0x1bd)](_0x12b6b2),_0x1f1b76=await sales_order['aggregate']([{'$match':{'_id':_0x1086e6(_0x12b6b2)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x1823e1(0x1db)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':_0x1823e1(0x1eb),'localField':'accounting_account_id','foreignField':_0x1823e1(0x1c3),'as':'account_data'}},{'$unwind':_0x1823e1(0x1d6)},{'$lookup':{'from':_0x1823e1(0x1eb),'localField':_0x1823e1(0x230),'foreignField':_0x1823e1(0x1c3),'as':_0x1823e1(0x1fe)}},{'$unwind':_0x1823e1(0x20a)}]);if(_0x412e4f[0x0][_0x1823e1(0x1ee)]=='English\x20(US)')var _0x5e781f=users['English'];else{if(_0x412e4f[0x0][_0x1823e1(0x1ee)]==_0x1823e1(0x241))var _0x5e781f=users[_0x1823e1(0x241)];else{if(_0x412e4f[0x0][_0x1823e1(0x1ee)]==_0x1823e1(0x1c0))var _0x5e781f=users[_0x1823e1(0x1c0)];else{if(_0x412e4f[0x0][_0x1823e1(0x1ee)]=='Spanish')var _0x5e781f=users[_0x1823e1(0x1d0)];else{if(_0x412e4f[0x0]['language']==_0x1823e1(0x229))var _0x5e781f=users['French'];else{if(_0x412e4f[0x0][_0x1823e1(0x1ee)]==_0x1823e1(0x1ff))var _0x5e781f=users['Portuguese'];else{if(_0x412e4f[0x0]['language']==_0x1823e1(0x1c4))var _0x5e781f=users[_0x1823e1(0x1c4)];else{if(_0x412e4f[0x0][_0x1823e1(0x1ee)]==_0x1823e1(0x225))var _0x5e781f=users[_0x1823e1(0x1b7)];}}}}}}}_0x4644ae[_0x1823e1(0x1e1)](_0x1823e1(0x244),{'success':_0x256720[_0x1823e1(0x23f)](_0x1823e1(0x1f1)),'errors':_0x256720['flash'](_0x1823e1(0x247)),'master_shop':_0x412e4f,'profile':_0x39fd9d,'role':_0x596085,'language':_0x5e781f,'customer':_0x4128aa,'sales_sa':_0x12a045,'approvers':_0x1f1b76[0x0],'the_id':_0x12b6b2});}catch(_0x58041a){console[_0x1823e1(0x215)](_0x58041a);}}),router['post'](a0_0x268053(0x1da),auth,async(_0x20538c,_0x5e0447)=>{var _0x43e3eb=a0_0x268053;try{const {date:_0x11a46b,invoice_data:_0x18616d,wms_confirm:_0x2a6ee9,the_id_val:_0x6de822,prod_id:_0x2917de,SCRN:_0xa2c24d,ReqBy:_0x5bc60f,dateofreq:_0x8203d0,PO_number:_0x258501,warehouse_name:_0x5285ac,typeservicesData:_0x1947ad,typevehicle:_0x25bf7b,destination:_0x8a0675,deliverydate:_0x15e97f,driver:_0xdb4d09,plate:_0x41acc4,van:_0x38fe7d,DRSI:_0x5a27cc,TSU:_0x4aeb42,TFU:_0x2379ef,note:_0x4fa425}=_0x20538c[_0x43e3eb(0x1ae)],_0x55b550=await sales_order[_0x43e3eb(0x1bd)](_0x6de822);if(typeof _0x2917de=='string')var _0x25fdef=[_0x20538c[_0x43e3eb(0x1ae)][_0x43e3eb(0x237)]],_0x217f0f=[_0x20538c[_0x43e3eb(0x1ae)]['qty']],_0x2c0653=[_0x20538c['body']['data_loc']];else var _0x25fdef=[..._0x20538c[_0x43e3eb(0x1ae)]['prod_id']],_0x217f0f=[..._0x20538c[_0x43e3eb(0x1ae)]['qty']],_0x2c0653=[..._0x20538c['body'][_0x43e3eb(0x1c2)]];const _0x3498e8=_0x25fdef[_0x43e3eb(0x1bb)](_0x304453=>{return _0x304453={'prod_id':_0x304453};});_0x2c0653[_0x43e3eb(0x1dd)]((_0xfe9070,_0x3a0032)=>{var _0x5762d5=_0x43e3eb,_0x4c6584=_0xfe9070[_0x5762d5(0x1e4)]('~');_0x3498e8[_0x3a0032][_0x5762d5(0x204)]=_0x4c6584[0x0],_0x3498e8[_0x3a0032][_0x5762d5(0x1f6)]=_0x4c6584[0x1];}),_0x217f0f[_0x43e3eb(0x1dd)]((_0x522a8c,_0x274274)=>{var _0x1c449c=_0x43e3eb;_0x3498e8[_0x274274][_0x1c449c(0x242)]=_0x522a8c;});var _0xade682=[],_0x167f52=[],_0x4ce082=[],_0x23e66b=[],_0x23add5=[],_0x29a9f5=[],_0x131fe3=[],_0x48504a=[],_0x3a3e48=[],_0x375408=[],_0x32266c=[],_0x25717d=[],_0x452729=[],_0x2411f8=[],_0x1f8755=[],_0x3ba163=[],_0x1795b1=[],_0x2a6896=[],_0x18d795=[],_0x4871cf=[];for(let _0x203b89=0x0;_0x203b89<=_0x3498e8[_0x43e3eb(0x20c)]-0x1;_0x203b89++){const _0x15796a=_0x3498e8[_0x203b89],_0x1d67a6=mongoose[_0x43e3eb(0x227)][_0x43e3eb(0x1e7)];var _0x2d3cd5=await warehouse[_0x43e3eb(0x222)]([{'$match':{'_id':_0x1d67a6(_0x15796a['warehouse_id'])}},{'$unwind':'$product_details'},{'$match':{'product_details._id':_0x1d67a6(_0x15796a[_0x43e3eb(0x1f6)])}}]),_0x23162a=0x0;for(let _0x1f3373=0x0;_0x1f3373<=_0x2d3cd5[_0x43e3eb(0x20c)]-0x1;_0x1f3373++){var _0x13a59c=_0x2d3cd5[_0x1f3373];_0x13a59c[_0x43e3eb(0x243)][_0x43e3eb(0x1b9)]<_0x15796a[_0x43e3eb(0x242)]&&_0x23162a++;}if(_0x23162a>0x0)return _0x20538c[_0x43e3eb(0x23f)](_0x43e3eb(0x247),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0x5e0447[_0x43e3eb(0x1d2)]('back');var _0x2b1e9c=0x0;for(let _0xd57bb9=0x0;_0xd57bb9<=_0x2d3cd5[_0x43e3eb(0x20c)]-0x1;_0xd57bb9++){var _0x13a59c=_0x2d3cd5[_0xd57bb9];_0x13a59c[_0x43e3eb(0x243)]['product_stock']>_0x15796a[_0x43e3eb(0x242)]&&(_0xade682[_0x43e3eb(0x206)](_0x13a59c['product_details'][_0x43e3eb(0x1fa)]),_0x167f52['push'](_0x13a59c[_0x43e3eb(0x243)]['product_stock']),_0x4ce082[_0x43e3eb(0x206)](_0x15796a[_0x43e3eb(0x242)]),_0x23e66b[_0x43e3eb(0x206)](_0x13a59c[_0x43e3eb(0x243)]['primary_code']),_0x23add5[_0x43e3eb(0x206)](_0x13a59c[_0x43e3eb(0x243)]['secondary_code']),_0x29a9f5[_0x43e3eb(0x206)](_0x13a59c[_0x43e3eb(0x243)]['product_code']),_0x131fe3['push'](_0x13a59c[_0x43e3eb(0x243)][_0x43e3eb(0x22c)]),_0x48504a[_0x43e3eb(0x206)](_0x13a59c[_0x43e3eb(0x243)][_0x43e3eb(0x21f)]),_0x3a3e48['push'](_0x13a59c[_0x43e3eb(0x243)][_0x43e3eb(0x221)]),_0x375408[_0x43e3eb(0x206)](_0x13a59c['product_details']['secondary_unit']),_0x32266c[_0x43e3eb(0x206)](_0x13a59c[_0x43e3eb(0x243)]['batch_code']),_0x25717d[_0x43e3eb(0x206)](_0x13a59c[_0x43e3eb(0x243)][_0x43e3eb(0x1d3)]),_0x452729[_0x43e3eb(0x206)](_0x13a59c[_0x43e3eb(0x243)]['production_date']),_0x2411f8[_0x43e3eb(0x206)](_0x13a59c[_0x43e3eb(0x243)][_0x43e3eb(0x1ec)]),_0x1f8755['push'](_0x13a59c[_0x43e3eb(0x243)][_0x43e3eb(0x21d)]),_0x3ba163[_0x43e3eb(0x206)](_0x13a59c[_0x43e3eb(0x1b5)]),_0x1795b1['push'](_0x13a59c['product_details'][_0x43e3eb(0x217)]),_0x2a6896['push'](_0x13a59c[_0x43e3eb(0x243)]['_id']),_0x18d795[_0x43e3eb(0x206)](_0x13a59c['product_details'][_0x43e3eb(0x239)]),_0x4871cf['push'](_0x13a59c[_0x43e3eb(0x243)][_0x43e3eb(0x22e)]),_0x2b1e9c++);}}const _0x236b00=_0xade682[_0x43e3eb(0x1bb)](_0x3004fe=>{return _0x3004fe={'product_name':_0x3004fe};});_0x167f52[_0x43e3eb(0x1dd)]((_0x58ff1c,_0x34dedd)=>{var _0x385c51=_0x43e3eb;_0x236b00[_0x34dedd][_0x385c51(0x1e6)]=_0x58ff1c;}),_0x4ce082[_0x43e3eb(0x1dd)]((_0x303ad8,_0x11053b)=>{var _0x1e80c4=_0x43e3eb;_0x236b00[_0x11053b][_0x1e80c4(0x210)]=Math['abs'](_0x303ad8);}),_0x4871cf[_0x43e3eb(0x1dd)]((_0x535992,_0x164c4d)=>{_0x236b00[_0x164c4d]['gross_price']=_0x535992;}),_0x18d795[_0x43e3eb(0x1dd)]((_0x5f5826,_0x3574dc)=>{var _0x556b15=_0x43e3eb;_0x236b00[_0x3574dc][_0x556b15(0x239)]=_0x5f5826;}),_0x2a6896[_0x43e3eb(0x1dd)]((_0x2c0b0b,_0x17cf8d)=>{var _0x4c239e=_0x43e3eb;_0x236b00[_0x17cf8d][_0x4c239e(0x209)]=_0x2c0b0b;}),_0x23e66b['forEach']((_0x114ee8,_0x195504)=>{var _0x40ae70=_0x43e3eb;_0x236b00[_0x195504][_0x40ae70(0x1dc)]=_0x114ee8;}),_0x23add5[_0x43e3eb(0x1dd)]((_0x19bfea,_0x7463b8)=>{_0x236b00[_0x7463b8]['secondary_code']=_0x19bfea;}),_0x29a9f5[_0x43e3eb(0x1dd)]((_0x1d1c5c,_0x2a1d9c)=>{var _0x301df7=_0x43e3eb;_0x236b00[_0x2a1d9c][_0x301df7(0x218)]=_0x1d1c5c;}),_0x131fe3[_0x43e3eb(0x1dd)]((_0x2be8e4,_0x1fe579)=>{var _0x2b1e89=_0x43e3eb;_0x236b00[_0x1fe579][_0x2b1e89(0x22c)]=_0x2be8e4;}),_0x48504a['forEach']((_0x4604d3,_0x13948d)=>{_0x236b00[_0x13948d]['bay']=_0x4604d3;}),_0x3a3e48['forEach']((_0x261aec,_0x80339e)=>{var _0x2e9578=_0x43e3eb;_0x236b00[_0x80339e][_0x2e9578(0x221)]=_0x261aec;}),_0x375408[_0x43e3eb(0x1dd)]((_0x474a27,_0x383843)=>{var _0x1e0dab=_0x43e3eb;_0x236b00[_0x383843][_0x1e0dab(0x1c8)]=_0x474a27;}),_0x32266c[_0x43e3eb(0x1dd)]((_0x9930ed,_0x35311e)=>{_0x236b00[_0x35311e]['batch_code']=_0x9930ed;}),_0x25717d['forEach']((_0x4b8436,_0x1032eb)=>{var _0x50a027=_0x43e3eb;_0x236b00[_0x1032eb][_0x50a027(0x1d3)]=_0x4b8436;}),_0x452729[_0x43e3eb(0x1dd)]((_0x2aec9f,_0x117b95)=>{var _0x469cbe=_0x43e3eb;_0x236b00[_0x117b95][_0x469cbe(0x1c6)]=_0x2aec9f;}),_0x2411f8[_0x43e3eb(0x1dd)]((_0x331d5a,_0x397df5)=>{var _0x5ef7a3=_0x43e3eb;_0x236b00[_0x397df5][_0x5ef7a3(0x245)]=_0x331d5a;}),_0x1f8755[_0x43e3eb(0x1dd)]((_0x583d95,_0x5adcdd)=>{_0x236b00[_0x5adcdd]['prod_cat']=_0x583d95;}),_0x3ba163[_0x43e3eb(0x1dd)]((_0x23a891,_0x2448aa)=>{_0x236b00[_0x2448aa]['room_name']=_0x23a891;}),_0x1795b1['forEach']((_0x41fba6,_0x330a79)=>{var _0x43b921=_0x43e3eb;_0x236b00[_0x330a79][_0x43b921(0x217)]=_0x41fba6,_0x236b00[_0x330a79]['date_data']=_0x11a46b;});const _0x476ca6=new invoice_for_outgoing();await _0x476ca6[_0x43e3eb(0x202)](),_0x1795b1[_0x43e3eb(0x1dd)]((_0xa0a73c,_0x1eef54)=>{var _0x8a2155=_0x43e3eb;_0x236b00[_0x1eef54]['outgoing_invoice']=_0x8a2155(0x21e)+_0x476ca6['invoice_init'][_0x8a2155(0x240)]()[_0x8a2155(0x1e3)](0x8,'0');});const _0x8ecc5f=_0x236b00[_0x43e3eb(0x1e0)](_0x36adaa=>_0x36adaa[_0x43e3eb(0x210)]!=='0'&&_0x36adaa['quantity']!==''),_0x4be491=new sales_finished({'invoice':_0x43e3eb(0x21e)+_0x476ca6[_0x43e3eb(0x1ed)][_0x43e3eb(0x240)]()[_0x43e3eb(0x1e3)](0x8,'0'),'date':_0x11a46b,'warehouse_name':_0x5285ac,'sale_product':_0x8ecc5f,'note':_0x4fa425,'SCRN':_0xa2c24d,'finalize':_0x43e3eb(0x1d4),'ReqBy':_0x5bc60f,'dateofreq':_0x8203d0,'PO_number':_0x258501,'typeservicesData':_0x1947ad,'typevehicle':_0x25bf7b,'destination':_0x8a0675,'deliverydate':_0x15e97f,'driver':_0xdb4d09,'plate':_0x41acc4,'van':_0x38fe7d,'DRSI':_0x5a27cc,'TSU':_0x4aeb42,'TFU':_0x2379ef}),_0x460ac9=await _0x4be491['save'](),_0x5b6389=new Date(),_0x9f088b=_0x5b6389[_0x43e3eb(0x1f4)]();_0x55b550[_0x43e3eb(0x1c9)]=_0x2a6ee9,_0x55b550[_0x43e3eb(0x1b6)]=_0x9f088b,_0x55b550[_0x43e3eb(0x1f7)]='OUT-'+_0x476ca6[_0x43e3eb(0x1ed)][_0x43e3eb(0x240)]()['padStart'](0x8,'0'),_0x55b550['outgoing_id']=_0x460ac9[_0x43e3eb(0x1c3)],await _0x55b550[_0x43e3eb(0x202)]();const _0x53842b=await master_shop[_0x43e3eb(0x216)](),_0x1622ba=await email_settings[_0x43e3eb(0x1c7)]();let _0x3b68b=nodemailer[_0x43e3eb(0x203)]({'host':_0x1622ba[_0x43e3eb(0x20f)],'port':Number(_0x1622ba[_0x43e3eb(0x1f3)]),'secure':![],'auth':{'user':_0x1622ba[_0x43e3eb(0x231)],'pass':_0x1622ba[_0x43e3eb(0x1cb)]}});const _0x4df71a=_0x20538c['protocol']+_0x43e3eb(0x1de)+_0x20538c[_0x43e3eb(0x1b1)][_0x43e3eb(0x20f)];var _0x2a298e=_0x55b550[_0x43e3eb(0x1ba)],_0x3ff2f5='',_0x3ca404,_0x500a2d=0x0;for(_0x3ca404 in _0x2a298e){_0x3ff2f5+='<tr>'+_0x43e3eb(0x219)+_0x2a298e[_0x3ca404][_0x43e3eb(0x1fa)]+_0x43e3eb(0x236)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x2a298e[_0x3ca404][_0x43e3eb(0x218)]+_0x43e3eb(0x236)+_0x43e3eb(0x219)+_0x2a298e[_0x3ca404][_0x43e3eb(0x210)]+_0x43e3eb(0x236)+_0x43e3eb(0x219)+_0x2a298e[_0x3ca404][_0x43e3eb(0x221)]+_0x43e3eb(0x236)+_0x43e3eb(0x24a),_0x500a2d+=parseInt(_0x2a298e[_0x3ca404][_0x43e3eb(0x210)]);}let _0x22d698={'from':_0x1622ba['email'],'to':_0x43e3eb(0x205),'subject':_0x43e3eb(0x23c),'attachments':[{'filename':_0x43e3eb(0x1d8),'path':__dirname+'/../public'+_0x43e3eb(0x24b)+_0x53842b[0x0][_0x43e3eb(0x22a)],'cid':_0x43e3eb(0x1bc)}],'html':_0x43e3eb(0x20d)+'<html><head><title></title>'+_0x43e3eb(0x228)+'</head><body>'+_0x43e3eb(0x23b)+_0x43e3eb(0x1ef)+_0x43e3eb(0x23b)+'<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>'+'</div>'+_0x43e3eb(0x23b)+'<h2>\x20JEC\x20SMS\x20</h2>'+_0x43e3eb(0x1df)+_0x43e3eb(0x1df)+_0x43e3eb(0x1bf)+_0x43e3eb(0x23b)+_0x43e3eb(0x1df)+_0x43e3eb(0x23b)+_0x43e3eb(0x235)+_0x43e3eb(0x1df)+'<div>'+_0x43e3eb(0x1f9)+_0x55b550[_0x43e3eb(0x217)]+_0x43e3eb(0x21c)+'<span>\x20Request\x20Date:\x20<b>'+_0x55b550[_0x43e3eb(0x1c1)]+_0x43e3eb(0x207)+_0x43e3eb(0x1df)+_0x43e3eb(0x1be)+_0x43e3eb(0x1fb)+_0x43e3eb(0x1e8)+_0x43e3eb(0x248)+_0x43e3eb(0x21b)+_0x43e3eb(0x1d9)+_0x43e3eb(0x1e9)+'</tr>'+'</thead>'+_0x43e3eb(0x1e5)+'\x20'+_0x3ff2f5+'\x20'+_0x43e3eb(0x246)+'</table>'+_0x43e3eb(0x23b)+_0x43e3eb(0x1ea)+'<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>'+_0x43e3eb(0x234)+_0x43e3eb(0x1df)+_0x43e3eb(0x23b)+_0x43e3eb(0x226)+'<h5>\x20JEC\x20SMS\x20</h5>'+_0x43e3eb(0x1df)+'</div>'+_0x43e3eb(0x1f5)+_0x43e3eb(0x1d5)};_0x3b68b['sendMail'](_0x22d698,function(_0x355df2,_0x3f7aa9){var _0x1e89b1=_0x43e3eb;_0x355df2?(console[_0x1e89b1(0x215)](_0x355df2),console[_0x1e89b1(0x215)](_0x1e89b1(0x1b3))):console[_0x1e89b1(0x215)](_0x1e89b1(0x249));}),_0x20538c['flash'](_0x43e3eb(0x1f1),'Sales\x20Add\x20successfully'),_0x5e0447[_0x43e3eb(0x1d2)](_0x43e3eb(0x20e)+_0x460ac9[_0x43e3eb(0x1c3)]),_0x5e0447[_0x43e3eb(0x211)](_0x8ecc5f);return;}catch(_0x58727d){}}),router[a0_0x268053(0x1f2)](a0_0x268053(0x232),auth,async(_0x1141aa,_0x59311f)=>{var _0x242461=a0_0x268053;try{const _0x2d9355=await master_shop[_0x242461(0x216)](),_0x262dd7=_0x1141aa[_0x242461(0x1cc)],_0x144dfc=await profile[_0x242461(0x1c7)]({'email':_0x262dd7[_0x242461(0x231)]}),_0x52163e=await staff[_0x242461(0x1c7)]({'email':_0x262dd7[_0x242461(0x231)]}),_0x1de76a=await customer[_0x242461(0x216)]({'agent_id':_0x52163e[_0x242461(0x1c3)]}),_0x249839=mongoose[_0x242461(0x227)][_0x242461(0x1e7)],_0x5d48c5=_0x1141aa[_0x242461(0x1f0)]['id'],_0x59b472=await sales_order[_0x242461(0x1bd)](_0x5d48c5),_0x4971a3=await sales_order[_0x242461(0x222)]([{'$match':{'_id':_0x249839(_0x5d48c5)}},{'$addFields':{'accounting_account_id':{'$toObjectId':'$accounting_account_id'}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x242461(0x1b4)}}},{'$lookup':{'from':'staffs','localField':_0x242461(0x1af),'foreignField':_0x242461(0x1c3),'as':_0x242461(0x1d1)}},{'$unwind':_0x242461(0x1d6)},{'$lookup':{'from':_0x242461(0x1eb),'localField':_0x242461(0x230),'foreignField':_0x242461(0x1c3),'as':_0x242461(0x1fe)}},{'$unwind':_0x242461(0x20a)}]);if(_0x2d9355[0x0][_0x242461(0x1ee)]=='English\x20(US)')var _0xdd6566=users['English'];else{if(_0x2d9355[0x0][_0x242461(0x1ee)]=='Hindi')var _0xdd6566=users[_0x242461(0x241)];else{if(_0x2d9355[0x0]['language']=='German')var _0xdd6566=users[_0x242461(0x1c0)];else{if(_0x2d9355[0x0][_0x242461(0x1ee)]==_0x242461(0x1d0))var _0xdd6566=users[_0x242461(0x1d0)];else{if(_0x2d9355[0x0]['language']==_0x242461(0x229))var _0xdd6566=users['French'];else{if(_0x2d9355[0x0][_0x242461(0x1ee)]==_0x242461(0x1ff))var _0xdd6566=users[_0x242461(0x1e2)];else{if(_0x2d9355[0x0]['language']==_0x242461(0x1c4))var _0xdd6566=users[_0x242461(0x1c4)];else{if(_0x2d9355[0x0][_0x242461(0x1ee)]=='Arabic\x20(ae)')var _0xdd6566=users[_0x242461(0x1b7)];}}}}}}}_0x59311f[_0x242461(0x1e1)]('view_accounting_approval',{'success':_0x1141aa[_0x242461(0x23f)](_0x242461(0x1f1)),'errors':_0x1141aa[_0x242461(0x23f)](_0x242461(0x247)),'master_shop':_0x2d9355,'profile':_0x144dfc,'role':_0x262dd7,'language':_0xdd6566,'customer':_0x1de76a,'sales_sa':_0x59b472,'approvers':_0x4971a3[0x0],'the_id':_0x5d48c5});}catch(_0x62099b){console[_0x242461(0x215)](_0x62099b);}}),router['post']('/data/data_rack',auth,async(_0x11ed35,_0x487725)=>{var _0x396d9d=a0_0x268053;try{const {warehouse_name:_0x356e94,product_code:_0x40ccdb}=_0x11ed35[_0x396d9d(0x1ae)],_0x4621a6=await warehouse['aggregate']([{'$match':{'name':_0x356e94}},{'$unwind':_0x396d9d(0x233)},{'$match':{'product_details.product_code':_0x40ccdb}},{'$group':{'_id':{'room':_0x396d9d(0x214),'_id':_0x396d9d(0x22f)}}}]);_0x487725[_0x396d9d(0x211)](_0x4621a6);}catch(_0x56d7c2){}}),router[a0_0x268053(0x21a)](a0_0x268053(0x23e),auth,async(_0x137510,_0x2c56a8)=>{var _0x4a494b=a0_0x268053;try{const {warehouse_name:_0x54d2d3,product_code:_0x50bb47,room_name:_0x2c80ea}=_0x137510[_0x4a494b(0x1ae)];console[_0x4a494b(0x215)](_0x137510[_0x4a494b(0x1ae)]);const _0x5fea1e=await warehouse[_0x4a494b(0x222)]([{'$match':{'name':_0x54d2d3,'room':_0x2c80ea}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x50bb47}},{'$group':{'_id':{'main_id':_0x4a494b(0x22f),'detl_id':'$product_details._id','product_name':_0x4a494b(0x224),'product_code':_0x4a494b(0x22b),'level':_0x4a494b(0x200),'bay':_0x4a494b(0x238),'stocks':'$product_details.product_stock'}}}]);_0x2c56a8[_0x4a494b(0x211)](_0x5fea1e);}catch(_0x5a3aa5){}}),router[a0_0x268053(0x1f2)](a0_0x268053(0x1fc),auth,async(_0x1bd0bf,_0x271a88)=>{var _0x4897d0=a0_0x268053;try{const {sttaff_id:_0x358d15,email:_0x30d788,warehouse:_0x356e5f}=_0x1bd0bf[_0x4897d0(0x1cc)],_0x5acd12=await master_shop['find'](),_0x5d7bb2=_0x1bd0bf[_0x4897d0(0x1cc)],_0x2c70b6=await profile['findOne']({'email':_0x5d7bb2[_0x4897d0(0x231)]}),_0x4a872f=await sales_order[_0x4897d0(0x216)]({'wms_account_id':_0x358d15});if(_0x5acd12[0x0][_0x4897d0(0x1ee)]=='English\x20(US)')var _0x11d613=users[_0x4897d0(0x22d)];else{if(_0x5acd12[0x0]['language']==_0x4897d0(0x241))var _0x11d613=users['Hindi'];else{if(_0x5acd12[0x0][_0x4897d0(0x1ee)]==_0x4897d0(0x1c0))var _0x11d613=users['German'];else{if(_0x5acd12[0x0][_0x4897d0(0x1ee)]==_0x4897d0(0x1d0))var _0x11d613=users[_0x4897d0(0x1d0)];else{if(_0x5acd12[0x0][_0x4897d0(0x1ee)]=='French')var _0x11d613=users[_0x4897d0(0x229)];else{if(_0x5acd12[0x0][_0x4897d0(0x1ee)]==_0x4897d0(0x1ff))var _0x11d613=users[_0x4897d0(0x1e2)];else{if(_0x5acd12[0x0][_0x4897d0(0x1ee)]==_0x4897d0(0x1c4))var _0x11d613=users[_0x4897d0(0x1c4)];else{if(_0x5acd12[0x0][_0x4897d0(0x1ee)]==_0x4897d0(0x225))var _0x11d613=users[_0x4897d0(0x1b7)];}}}}}}}_0x271a88['render'](_0x4897d0(0x23a),{'success':_0x1bd0bf[_0x4897d0(0x23f)](_0x4897d0(0x1f1)),'errors':_0x1bd0bf[_0x4897d0(0x23f)](_0x4897d0(0x247)),'master_shop':_0x5acd12,'profile':_0x2c70b6,'role':_0x5d7bb2,'language':_0x11d613,'sales_order':_0x4a872f});}catch(_0x2dca7f){}}),module[a0_0x268053(0x208)]=router;function a0_0x5ebc(){var _0x4d231a=['password','user','nodemailer','779541dbLHPq','xlsx','Spanish','account_data','redirect','expiry_date','False','</body></html>','$account_data','express','Logo.png','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','/:id','$accounting_account_id','primary_code','forEach','://','</div>','filter','render','Portuguese','padStart','split','<tbody\x20style=\x22text-align:\x20center;\x22>','stock','ObjectId','<tr>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','staffs','maxPerUnit','invoice_init','language','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','params','success','get','port','toLocaleDateString','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','warehouse_detl','document_number_out','449652YpQqGL','<span>\x20Request\x20ID:\x20<b>','product_name','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','/data/All','mongodb','wms_data','Portuguese\x20(BR)','$product_details.level','1674aAawBS','save','createTransport','warehouse_id','christian.villamer@jakagroup.com','push','</b></span>\x20<br><br>','exports','id_transaction_from','$wms_data','28AUgOFV','length','<!DOCTYPE\x20html>','/all_sales_finished/preview/','host','quantity','json','mongoose','8570BvkKky','$room','log','find','invoice','product_code','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','post','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','</b></span>\x20<br>','product_cat','OUT-','bay','204OLxRAx','unit','aggregate','../middleware/auth','$product_details.product_name','Arabic\x20(ae)','<strong>\x20Regards\x20</strong>','Types','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','French','image','$product_details.product_code','level','English','gross_price','$_id','wms_account_id','email','/view_sales_order/:id','$product_details','<br><br><br>','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','</td>','prod_id','$product_details.bay','uuid','warehouse_approval_All','<div>','Email\x20for\x20Customer','../public/language/languages.json','/data/data_loc','flash','toString','Hindi','request_qty','product_details','warehouse_approval','maxperunit','</tbody>','errors','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','Email\x20sent\x20successfully','</tr>','/upload/','404462GUMjgo','body','accounting_account_id','728475xqugYQ','headers','4AamTci','Error\x20Occurs','$wms_account_id','room','wms_account_date','Arabic','5TiobCS','product_stock','sale_product','map','logo','findById','<table\x20style=\x22width:\x20100%\x20!important;\x22>','<hr\x20class=\x22my-3\x22>','German','date','data_loc','_id','Chinese','294104bpVPjs','production_date','findOne','secondary_unit','wms_account_confirm','2032134ptHKRT'];a0_0x5ebc=function(){return _0x4d231a;};return a0_0x5ebc();}