var a0_0x5bdbc4=a0_0x1dc3;function a0_0x2453(){var _0x2c81bc=['params','createTransport','49TcCdhK','<tbody\x20style=\x22text-align:\x20center;\x22>','body','<hr\x20class=\x22my-3\x22>','render','account_data','primary_code','padStart','ObjectId','Arabic','prod_cat','</table>','972412gQIVxP','3VBaTdh','warehouse_detl','/:id','christian.villamer@jakagroup.com','uuid','id_transaction_from','<html><head><title></title>','secondary_unit','invoice','$product_details.bay','port','prod_id','$accounting_account_id','product_details','English','abs','English\x20(US)','post','Hindi','</b></span>\x20<br>','host','$room','$wms_account_id','/upload/','sendMail','<span>\x20Request\x20Date:\x20<b>','41178LmMAlQ','batch_code','warehouse_id','Spanish','findOne','filter','Error\x20Occurs','request_qty','424730tTbrXW','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','production_date','forEach','json','bay','<div>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','<!DOCTYPE\x20html>','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','French','gross_price','Router','Logo.png','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','logo','</tbody>','<strong>\x20Regards\x20</strong>','<tr>','accounting_account_id','mongoose','$_id','view_accounting_approval','back','outgoing_id','maxPerUnit','find','5761044asdXQN','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','staffs','errors','maxperunit','</body></html>','split','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','date_data','</tr>','aggregate','wms_data','log','$account_data','235028nSGaWH','False','German','level','nodemailer','exports','Types','Arabic\x20(ae)','map','data_loc','password','$product_details.product_name','user','flash','language','/all_sales_finished/preview/','express','xlsx','_id','://','date','sale_product','room_name','invoice_init','/../public','$product_details.product_code','qty','push','</div>','redirect','../middleware/auth','OUT-','</thead>','/data/All','save','stock','get','product_code','/data/data_rack','wms_account_confirm','secondary_code','1432656WLslxn','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','outgoing_invoice','Portuguese\x20(BR)','../models/all_models','../public/language/languages.json','document_number_out','unit','$product_details','wms_account_id','quantity','/data/data_loc','email','Portuguese','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','Chinese','$wms_data','findById','success','</td>','product_stock','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','105428ecjOJG','image','length','expiry_date','string','toString'];a0_0x2453=function(){return _0x2c81bc;};return a0_0x2453();}function a0_0x1dc3(_0x18b37d,_0x5c37e5){var _0x2453f8=a0_0x2453();return a0_0x1dc3=function(_0x1dc388,_0x36240a){_0x1dc388=_0x1dc388-0xa3;var _0x404fe7=_0x2453f8[_0x1dc388];return _0x404fe7;},a0_0x1dc3(_0x18b37d,_0x5c37e5);}(function(_0x9e8c91,_0x14940f){var _0x55113d=a0_0x1dc3,_0x5b0d26=_0x9e8c91();while(!![]){try{var _0x7c275d=parseInt(_0x55113d(0xc7))/0x1+-parseInt(_0x55113d(0x128))/0x2+-parseInt(_0x55113d(0xdc))/0x3*(parseInt(_0x55113d(0xdb))/0x4)+-parseInt(_0x55113d(0xfe))/0x5+-parseInt(_0x55113d(0xf6))/0x6*(-parseInt(_0x55113d(0xcf))/0x7)+-parseInt(_0x55113d(0xb1))/0x8+parseInt(_0x55113d(0x11a))/0x9;if(_0x7c275d===_0x14940f)break;else _0x5b0d26['push'](_0x5b0d26['shift']());}catch(_0x69d840){_0x5b0d26['push'](_0x5b0d26['shift']());}}}(a0_0x2453,0x293ec));const express=require(a0_0x5bdbc4(0x138)),app=express(),router=express[a0_0x5bdbc4(0x10a)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x5bdbc4(0xb5)),auth=require(a0_0x5bdbc4(0xa6)),users=require(a0_0x5bdbc4(0xb6)),excelJS=require('exceljs'),xlsx=require(a0_0x5bdbc4(0x139)),mongoose=require(a0_0x5bdbc4(0x113)),{ObjectId}=require('mongodb'),nodemailer=require(a0_0x5bdbc4(0x12c));router[a0_0x5bdbc4(0xac)](a0_0x5bdbc4(0xde),auth,async(_0x5bf05,_0x37fdf9)=>{var _0x337f1d=a0_0x5bdbc4;try{const _0x2515a5=await master_shop[_0x337f1d(0x119)](),_0x20739f=_0x5bf05[_0x337f1d(0x134)],_0x12a320=await profile[_0x337f1d(0xfa)]({'email':_0x20739f[_0x337f1d(0xbd)]}),_0x154082=await staff[_0x337f1d(0xfa)]({'email':_0x20739f[_0x337f1d(0xbd)]}),_0x37a45a=await customer[_0x337f1d(0x119)]({'agent_id':_0x154082['_id']}),_0x52a67f=mongoose[_0x337f1d(0x12e)][_0x337f1d(0xd7)],_0x38d358=_0x5bf05[_0x337f1d(0xcd)]['id'],_0x23c6b3=await sales_order[_0x337f1d(0xc2)](_0x38d358),_0x3e15e5=await sales_order['aggregate']([{'$match':{'_id':_0x52a67f(_0x38d358)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x337f1d(0xe8)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x337f1d(0xf2)}}},{'$lookup':{'from':_0x337f1d(0x11c),'localField':_0x337f1d(0x112),'foreignField':_0x337f1d(0x13a),'as':'account_data'}},{'$unwind':_0x337f1d(0x127)},{'$lookup':{'from':_0x337f1d(0x11c),'localField':'wms_account_id','foreignField':_0x337f1d(0x13a),'as':_0x337f1d(0x125)}},{'$unwind':_0x337f1d(0xc1)}]);if(_0x2515a5[0x0][_0x337f1d(0x136)]==_0x337f1d(0xec))var _0x434481=users['English'];else{if(_0x2515a5[0x0]['language']==_0x337f1d(0xee))var _0x434481=users['Hindi'];else{if(_0x2515a5[0x0][_0x337f1d(0x136)]==_0x337f1d(0x12a))var _0x434481=users['German'];else{if(_0x2515a5[0x0]['language']==_0x337f1d(0xf9))var _0x434481=users[_0x337f1d(0xf9)];else{if(_0x2515a5[0x0][_0x337f1d(0x136)]=='French')var _0x434481=users[_0x337f1d(0x108)];else{if(_0x2515a5[0x0][_0x337f1d(0x136)]=='Portuguese\x20(BR)')var _0x434481=users[_0x337f1d(0xbe)];else{if(_0x2515a5[0x0][_0x337f1d(0x136)]==_0x337f1d(0xc0))var _0x434481=users['Chinese'];else{if(_0x2515a5[0x0][_0x337f1d(0x136)]==_0x337f1d(0x12f))var _0x434481=users[_0x337f1d(0xd8)];}}}}}}}_0x37fdf9[_0x337f1d(0xd3)]('warehouse_approval',{'success':_0x5bf05[_0x337f1d(0x135)](_0x337f1d(0xc3)),'errors':_0x5bf05[_0x337f1d(0x135)](_0x337f1d(0x11d)),'master_shop':_0x2515a5,'profile':_0x12a320,'role':_0x20739f,'language':_0x434481,'customer':_0x37a45a,'sales_sa':_0x23c6b3,'approvers':_0x3e15e5[0x0],'the_id':_0x38d358});}catch(_0x3ec7f4){console[_0x337f1d(0x126)](_0x3ec7f4);}}),router['post']('/:id',auth,async(_0x43926e,_0xad82ce)=>{var _0x2fab3c=a0_0x5bdbc4;try{const {date:_0x19a5d7,invoice_data:_0x4c5511,wms_confirm:_0xdd478f,the_id_val:_0x21d902,prod_id:_0x4cde70,SCRN:_0xa7a4fe,ReqBy:_0x233cfd,dateofreq:_0x189128,PO_number:_0xc0d94b,warehouse_name:_0x1d65c6,typeservicesData:_0x4c395a,typevehicle:_0x26a87f,destination:_0x1a1902,deliverydate:_0x45b6b4,driver:_0x12000b,plate:_0x38a31e,van:_0xddde0e,DRSI:_0xc1cb89,TSU:_0x4d0215,TFU:_0x4e8582,note:_0x110662}=_0x43926e[_0x2fab3c(0xd1)],_0x390dce=await sales_order['findById'](_0x21d902);if(typeof _0x4cde70==_0x2fab3c(0xcb))var _0x3325c7=[_0x43926e[_0x2fab3c(0xd1)][_0x2fab3c(0xe7)]],_0x4c4934=[_0x43926e['body'][_0x2fab3c(0x142)]],_0x35d13b=[_0x43926e[_0x2fab3c(0xd1)][_0x2fab3c(0x131)]];else var _0x3325c7=[..._0x43926e[_0x2fab3c(0xd1)][_0x2fab3c(0xe7)]],_0x4c4934=[..._0x43926e[_0x2fab3c(0xd1)][_0x2fab3c(0x142)]],_0x35d13b=[..._0x43926e[_0x2fab3c(0xd1)][_0x2fab3c(0x131)]];const _0x377f33=_0x3325c7[_0x2fab3c(0x130)](_0x338526=>{return _0x338526={'prod_id':_0x338526};});_0x35d13b['forEach']((_0x206cd9,_0x2be494)=>{var _0x55d6c6=_0x2fab3c,_0x3ff920=_0x206cd9[_0x55d6c6(0x120)]('~');_0x377f33[_0x2be494][_0x55d6c6(0xf8)]=_0x3ff920[0x0],_0x377f33[_0x2be494][_0x55d6c6(0xdd)]=_0x3ff920[0x1];}),_0x4c4934[_0x2fab3c(0x101)]((_0x129d01,_0x258e6d)=>{var _0x1cebd7=_0x2fab3c;_0x377f33[_0x258e6d][_0x1cebd7(0xfd)]=_0x129d01;});var _0x767e5f=[],_0x34ac16=[],_0x4e9014=[],_0x39ec16=[],_0x411fd5=[],_0x12bc44=[],_0x13e9ed=[],_0x38dc94=[],_0x1290ca=[],_0x43f470=[],_0x5bd6c3=[],_0x56f0da=[],_0x37c22d=[],_0x33fbc9=[],_0x5e7b99=[],_0x5dd508=[],_0x4104cf=[],_0x2d1cab=[],_0x709b53=[],_0x6c9ac0=[];for(let _0x52fea6=0x0;_0x52fea6<=_0x377f33[_0x2fab3c(0xc9)]-0x1;_0x52fea6++){const _0x127acc=_0x377f33[_0x52fea6],_0x5deb4f=mongoose[_0x2fab3c(0x12e)][_0x2fab3c(0xd7)];var _0x430435=await warehouse[_0x2fab3c(0x124)]([{'$match':{'_id':_0x5deb4f(_0x127acc[_0x2fab3c(0xf8)])}},{'$unwind':_0x2fab3c(0xb9)},{'$match':{'product_details._id':_0x5deb4f(_0x127acc['warehouse_detl'])}}]),_0x13be0c=0x0;for(let _0x4aa013=0x0;_0x4aa013<=_0x430435[_0x2fab3c(0xc9)]-0x1;_0x4aa013++){var _0x294334=_0x430435[_0x4aa013];_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0xc5)]<_0x127acc[_0x2fab3c(0xfd)]&&_0x13be0c++;}if(_0x13be0c>0x0)return _0x43926e[_0x2fab3c(0x135)](_0x2fab3c(0x11d),_0x2fab3c(0xff)),_0xad82ce[_0x2fab3c(0xa5)](_0x2fab3c(0x116));var _0x3c9c9b=0x0;for(let _0x19a974=0x0;_0x19a974<=_0x430435[_0x2fab3c(0xc9)]-0x1;_0x19a974++){var _0x294334=_0x430435[_0x19a974];_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0xc5)]>_0x127acc[_0x2fab3c(0xfd)]&&(_0x767e5f[_0x2fab3c(0xa3)](_0x294334['product_details']['product_name']),_0x34ac16[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0xc5)]),_0x4e9014['push'](_0x127acc[_0x2fab3c(0xfd)]),_0x39ec16[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0xd5)]),_0x411fd5[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)]['secondary_code']),_0x12bc44[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0xad)]),_0x13e9ed[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)]['level']),_0x38dc94[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0x103)]),_0x1290ca[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)]['unit']),_0x43f470['push'](_0x294334[_0x2fab3c(0xe9)]['secondary_unit']),_0x5bd6c3[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)]['batch_code']),_0x56f0da[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0xca)]),_0x37c22d[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0x100)]),_0x33fbc9[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0x118)]),_0x5e7b99[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)]['product_cat']),_0x5dd508['push'](_0x294334['room']),_0x4104cf[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0xe4)]),_0x2d1cab[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0x13a)]),_0x709b53[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0xe0)]),_0x6c9ac0[_0x2fab3c(0xa3)](_0x294334[_0x2fab3c(0xe9)][_0x2fab3c(0x109)]),_0x3c9c9b++);}}const _0x2cfbd4=_0x767e5f[_0x2fab3c(0x130)](_0x2da55a=>{return _0x2da55a={'product_name':_0x2da55a};});_0x34ac16[_0x2fab3c(0x101)]((_0x4bc7e2,_0x42dd3f)=>{var _0x52d857=_0x2fab3c;_0x2cfbd4[_0x42dd3f][_0x52d857(0xab)]=_0x4bc7e2;}),_0x4e9014[_0x2fab3c(0x101)]((_0x124275,_0x2b1392)=>{var _0x54b68f=_0x2fab3c;_0x2cfbd4[_0x2b1392][_0x54b68f(0xbb)]=Math[_0x54b68f(0xeb)](_0x124275);}),_0x6c9ac0[_0x2fab3c(0x101)]((_0x4f3472,_0x19f049)=>{_0x2cfbd4[_0x19f049]['gross_price']=_0x4f3472;}),_0x709b53[_0x2fab3c(0x101)]((_0xab5992,_0x5486b6)=>{var _0x4fe430=_0x2fab3c;_0x2cfbd4[_0x5486b6][_0x4fe430(0xe0)]=_0xab5992;}),_0x2d1cab[_0x2fab3c(0x101)]((_0x990333,_0xd59d5)=>{var _0x5739a0=_0x2fab3c;_0x2cfbd4[_0xd59d5][_0x5739a0(0xe1)]=_0x990333;}),_0x39ec16[_0x2fab3c(0x101)]((_0x5173f1,_0x53f1c0)=>{var _0x530270=_0x2fab3c;_0x2cfbd4[_0x53f1c0][_0x530270(0xd5)]=_0x5173f1;}),_0x411fd5[_0x2fab3c(0x101)]((_0x387f35,_0x5a7c5d)=>{var _0xcee56e=_0x2fab3c;_0x2cfbd4[_0x5a7c5d][_0xcee56e(0xb0)]=_0x387f35;}),_0x12bc44[_0x2fab3c(0x101)]((_0x51cf10,_0x5bc6a0)=>{_0x2cfbd4[_0x5bc6a0]['product_code']=_0x51cf10;}),_0x13e9ed[_0x2fab3c(0x101)]((_0x546260,_0x45e835)=>{var _0x284b94=_0x2fab3c;_0x2cfbd4[_0x45e835][_0x284b94(0x12b)]=_0x546260;}),_0x38dc94['forEach']((_0x36982a,_0x37d109)=>{var _0x5762b7=_0x2fab3c;_0x2cfbd4[_0x37d109][_0x5762b7(0x103)]=_0x36982a;}),_0x1290ca[_0x2fab3c(0x101)]((_0x3fe042,_0x36e492)=>{var _0x94cf9d=_0x2fab3c;_0x2cfbd4[_0x36e492][_0x94cf9d(0xb8)]=_0x3fe042;}),_0x43f470[_0x2fab3c(0x101)]((_0x10588f,_0x3214a6)=>{var _0x58557c=_0x2fab3c;_0x2cfbd4[_0x3214a6][_0x58557c(0xe3)]=_0x10588f;}),_0x5bd6c3['forEach']((_0x1c2a0a,_0x246981)=>{var _0x3072a3=_0x2fab3c;_0x2cfbd4[_0x246981][_0x3072a3(0xf7)]=_0x1c2a0a;}),_0x56f0da[_0x2fab3c(0x101)]((_0x42cc75,_0x52608e)=>{var _0x500776=_0x2fab3c;_0x2cfbd4[_0x52608e][_0x500776(0xca)]=_0x42cc75;}),_0x37c22d[_0x2fab3c(0x101)]((_0x467c91,_0x34a4a3)=>{_0x2cfbd4[_0x34a4a3]['production_date']=_0x467c91;}),_0x33fbc9[_0x2fab3c(0x101)]((_0x3db983,_0x55564a)=>{var _0xab1be6=_0x2fab3c;_0x2cfbd4[_0x55564a][_0xab1be6(0x11e)]=_0x3db983;}),_0x5e7b99['forEach']((_0x569dd3,_0x172593)=>{var _0x216d5a=_0x2fab3c;_0x2cfbd4[_0x172593][_0x216d5a(0xd9)]=_0x569dd3;}),_0x5dd508[_0x2fab3c(0x101)]((_0x2f89b9,_0x1cf83c)=>{var _0x913a84=_0x2fab3c;_0x2cfbd4[_0x1cf83c][_0x913a84(0x13e)]=_0x2f89b9;}),_0x4104cf[_0x2fab3c(0x101)]((_0x56080d,_0x59c4f5)=>{var _0x1d3891=_0x2fab3c;_0x2cfbd4[_0x59c4f5][_0x1d3891(0xe4)]=_0x56080d,_0x2cfbd4[_0x59c4f5][_0x1d3891(0x122)]=_0x19a5d7;});const _0x2ac4bc=new invoice_for_outgoing();await _0x2ac4bc[_0x2fab3c(0xaa)](),_0x4104cf[_0x2fab3c(0x101)]((_0x4e2683,_0xc333b6)=>{var _0x5f35ce=_0x2fab3c;_0x2cfbd4[_0xc333b6][_0x5f35ce(0xb3)]=_0x5f35ce(0xa7)+_0x2ac4bc[_0x5f35ce(0x13f)][_0x5f35ce(0xcc)]()[_0x5f35ce(0xd6)](0x8,'0');});const _0x1517a3=_0x2cfbd4[_0x2fab3c(0xfb)](_0x362d01=>_0x362d01[_0x2fab3c(0xbb)]!=='0'&&_0x362d01['quantity']!==''),_0x339252=new sales_finished({'invoice':'OUT-'+_0x2ac4bc[_0x2fab3c(0x13f)][_0x2fab3c(0xcc)]()[_0x2fab3c(0xd6)](0x8,'0'),'date':_0x19a5d7,'warehouse_name':_0x1d65c6,'sale_product':_0x1517a3,'note':_0x110662,'SCRN':_0xa7a4fe,'finalize':_0x2fab3c(0x129),'ReqBy':_0x233cfd,'dateofreq':_0x189128,'PO_number':_0xc0d94b,'typeservicesData':_0x4c395a,'typevehicle':_0x26a87f,'destination':_0x1a1902,'deliverydate':_0x45b6b4,'driver':_0x12000b,'plate':_0x38a31e,'van':_0xddde0e,'DRSI':_0xc1cb89,'TSU':_0x4d0215,'TFU':_0x4e8582}),_0x29c301=await _0x339252['save'](),_0x23feae=new Date(),_0x3bac05=_0x23feae['toLocaleDateString']();_0x390dce[_0x2fab3c(0xaf)]=_0xdd478f,_0x390dce['wms_account_date']=_0x3bac05,_0x390dce[_0x2fab3c(0xb7)]=_0x2fab3c(0xa7)+_0x2ac4bc['invoice_init'][_0x2fab3c(0xcc)]()[_0x2fab3c(0xd6)](0x8,'0'),_0x390dce[_0x2fab3c(0x117)]=_0x29c301[_0x2fab3c(0x13a)],await _0x390dce['save']();const _0x4d90ab=await master_shop[_0x2fab3c(0x119)](),_0x83d06e=await email_settings['findOne']();let _0x2f94eb=nodemailer[_0x2fab3c(0xce)]({'host':_0x83d06e['host'],'port':Number(_0x83d06e[_0x2fab3c(0xe6)]),'secure':![],'auth':{'user':_0x83d06e['email'],'pass':_0x83d06e[_0x2fab3c(0x132)]}});const _0x299971=_0x43926e['protocol']+_0x2fab3c(0x13b)+_0x43926e['headers'][_0x2fab3c(0xf0)];var _0x1c9f46=_0x390dce[_0x2fab3c(0x13d)],_0x40fb67='',_0x4f493d,_0x40085a=0x0;for(_0x4f493d in _0x1c9f46){_0x40fb67+=_0x2fab3c(0x111)+_0x2fab3c(0x10c)+_0x1c9f46[_0x4f493d]['product_name']+_0x2fab3c(0xc4)+_0x2fab3c(0x10c)+_0x1c9f46[_0x4f493d][_0x2fab3c(0xad)]+'</td>'+_0x2fab3c(0x10c)+_0x1c9f46[_0x4f493d][_0x2fab3c(0xbb)]+_0x2fab3c(0xc4)+'<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>'+_0x1c9f46[_0x4f493d][_0x2fab3c(0xb8)]+_0x2fab3c(0xc4)+'</tr>',_0x40085a+=parseInt(_0x1c9f46[_0x4f493d][_0x2fab3c(0xbb)]);}let _0x4265ab={'from':_0x83d06e['email'],'to':_0x2fab3c(0xdf),'subject':'Email\x20for\x20Customer','attachments':[{'filename':_0x2fab3c(0x10b),'path':__dirname+_0x2fab3c(0x140)+_0x2fab3c(0xf3)+_0x4d90ab[0x0][_0x2fab3c(0xc8)],'cid':_0x2fab3c(0x10e)}],'html':_0x2fab3c(0x106)+_0x2fab3c(0xe2)+_0x2fab3c(0x121)+'</head><body>'+_0x2fab3c(0x104)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+_0x2fab3c(0xbf)+_0x2fab3c(0xa4)+_0x2fab3c(0x104)+'<h2>\x20JEC\x20SMS\x20</h2>'+_0x2fab3c(0xa4)+_0x2fab3c(0xa4)+_0x2fab3c(0xd2)+'<div>'+'</div>'+_0x2fab3c(0x104)+_0x2fab3c(0xc6)+_0x2fab3c(0xa4)+_0x2fab3c(0x104)+'<span>\x20Request\x20ID:\x20<b>'+_0x390dce[_0x2fab3c(0xe4)]+_0x2fab3c(0xef)+_0x2fab3c(0xf5)+_0x390dce[_0x2fab3c(0x13c)]+'</b></span>\x20<br><br>'+'</div>'+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+'<thead\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x2fab3c(0x111)+_0x2fab3c(0x105)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+_0x2fab3c(0x10d)+_0x2fab3c(0xb2)+_0x2fab3c(0x123)+_0x2fab3c(0xa8)+_0x2fab3c(0xd0)+'\x20'+_0x40fb67+'\x20'+_0x2fab3c(0x10f)+_0x2fab3c(0xda)+_0x2fab3c(0x104)+_0x2fab3c(0x11b)+'<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>'+'<br><br><br>'+_0x2fab3c(0xa4)+_0x2fab3c(0x104)+_0x2fab3c(0x110)+'<h5>\x20JEC\x20SMS\x20</h5>'+_0x2fab3c(0xa4)+_0x2fab3c(0xa4)+_0x2fab3c(0x107)+_0x2fab3c(0x11f)};_0x2f94eb[_0x2fab3c(0xf4)](_0x4265ab,function(_0x2ecb19,_0x1b65d7){var _0x17f3db=_0x2fab3c;_0x2ecb19?(console[_0x17f3db(0x126)](_0x2ecb19),console['log'](_0x17f3db(0xfc))):console['log']('Email\x20sent\x20successfully');}),_0x43926e[_0x2fab3c(0x135)](_0x2fab3c(0xc3),'Sales\x20Add\x20successfully'),_0xad82ce['redirect'](_0x2fab3c(0x137)+_0x29c301[_0x2fab3c(0x13a)]),_0xad82ce[_0x2fab3c(0x102)](_0x1517a3);return;}catch(_0x2e61a6){}}),router[a0_0x5bdbc4(0xac)]('/view_sales_order/:id',auth,async(_0x132e19,_0x5d9c9b)=>{var _0x3d0d81=a0_0x5bdbc4;try{const _0x4d978c=await master_shop[_0x3d0d81(0x119)](),_0x2e4252=_0x132e19[_0x3d0d81(0x134)],_0x296816=await profile[_0x3d0d81(0xfa)]({'email':_0x2e4252[_0x3d0d81(0xbd)]}),_0xe739f0=await staff[_0x3d0d81(0xfa)]({'email':_0x2e4252[_0x3d0d81(0xbd)]}),_0xb5b18b=await customer[_0x3d0d81(0x119)]({'agent_id':_0xe739f0[_0x3d0d81(0x13a)]}),_0x35e375=mongoose['Types'][_0x3d0d81(0xd7)],_0x1d3baf=_0x132e19[_0x3d0d81(0xcd)]['id'],_0x123e37=await sales_order[_0x3d0d81(0xc2)](_0x1d3baf),_0x5bd485=await sales_order[_0x3d0d81(0x124)]([{'$match':{'_id':_0x35e375(_0x1d3baf)}},{'$addFields':{'accounting_account_id':{'$toObjectId':'$accounting_account_id'}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x3d0d81(0xf2)}}},{'$lookup':{'from':_0x3d0d81(0x11c),'localField':_0x3d0d81(0x112),'foreignField':_0x3d0d81(0x13a),'as':_0x3d0d81(0xd4)}},{'$unwind':'$account_data'},{'$lookup':{'from':_0x3d0d81(0x11c),'localField':_0x3d0d81(0xba),'foreignField':'_id','as':_0x3d0d81(0x125)}},{'$unwind':_0x3d0d81(0xc1)}]);if(_0x4d978c[0x0]['language']==_0x3d0d81(0xec))var _0xa61c86=users[_0x3d0d81(0xea)];else{if(_0x4d978c[0x0][_0x3d0d81(0x136)]==_0x3d0d81(0xee))var _0xa61c86=users['Hindi'];else{if(_0x4d978c[0x0][_0x3d0d81(0x136)]==_0x3d0d81(0x12a))var _0xa61c86=users['German'];else{if(_0x4d978c[0x0][_0x3d0d81(0x136)]==_0x3d0d81(0xf9))var _0xa61c86=users[_0x3d0d81(0xf9)];else{if(_0x4d978c[0x0][_0x3d0d81(0x136)]=='French')var _0xa61c86=users[_0x3d0d81(0x108)];else{if(_0x4d978c[0x0][_0x3d0d81(0x136)]=='Portuguese\x20(BR)')var _0xa61c86=users[_0x3d0d81(0xbe)];else{if(_0x4d978c[0x0][_0x3d0d81(0x136)]==_0x3d0d81(0xc0))var _0xa61c86=users[_0x3d0d81(0xc0)];else{if(_0x4d978c[0x0][_0x3d0d81(0x136)]==_0x3d0d81(0x12f))var _0xa61c86=users[_0x3d0d81(0xd8)];}}}}}}}_0x5d9c9b['render'](_0x3d0d81(0x115),{'success':_0x132e19[_0x3d0d81(0x135)](_0x3d0d81(0xc3)),'errors':_0x132e19[_0x3d0d81(0x135)](_0x3d0d81(0x11d)),'master_shop':_0x4d978c,'profile':_0x296816,'role':_0x2e4252,'language':_0xa61c86,'customer':_0xb5b18b,'sales_sa':_0x123e37,'approvers':_0x5bd485[0x0],'the_id':_0x1d3baf});}catch(_0x224b4f){console[_0x3d0d81(0x126)](_0x224b4f);}}),router['post'](a0_0x5bdbc4(0xae),auth,async(_0x44687d,_0x3170a8)=>{var _0x4c6905=a0_0x5bdbc4;try{const {warehouse_name:_0x25f0b4,product_code:_0x5a86fe}=_0x44687d[_0x4c6905(0xd1)],_0x56684c=await warehouse[_0x4c6905(0x124)]([{'$match':{'name':_0x25f0b4}},{'$unwind':_0x4c6905(0xb9)},{'$match':{'product_details.product_code':_0x5a86fe}},{'$group':{'_id':{'room':_0x4c6905(0xf1),'_id':_0x4c6905(0x114)}}}]);_0x3170a8[_0x4c6905(0x102)](_0x56684c);}catch(_0x34ceb0){}}),router[a0_0x5bdbc4(0xed)](a0_0x5bdbc4(0xbc),auth,async(_0x3297d6,_0x3a1255)=>{var _0x115c88=a0_0x5bdbc4;try{const {warehouse_name:_0x420427,product_code:_0xa5edcc,room_name:_0x415dc8}=_0x3297d6[_0x115c88(0xd1)];console[_0x115c88(0x126)](_0x3297d6[_0x115c88(0xd1)]);const _0x1f619a=await warehouse[_0x115c88(0x124)]([{'$match':{'name':_0x420427,'room':_0x415dc8}},{'$unwind':_0x115c88(0xb9)},{'$match':{'product_details.product_code':_0xa5edcc}},{'$group':{'_id':{'main_id':'$_id','detl_id':'$product_details._id','product_name':_0x115c88(0x133),'product_code':_0x115c88(0x141),'level':'$product_details.level','bay':_0x115c88(0xe5),'stocks':'$product_details.product_stock'}}}]);_0x3a1255[_0x115c88(0x102)](_0x1f619a);}catch(_0x344705){}}),router[a0_0x5bdbc4(0xac)](a0_0x5bdbc4(0xa9),auth,async(_0x59b127,_0x1a42d6)=>{var _0x21e528=a0_0x5bdbc4;try{const {sttaff_id:_0x3a9a97,email:_0x29731a,warehouse:_0x3b10dc}=_0x59b127[_0x21e528(0x134)],_0x5bc62f=await master_shop[_0x21e528(0x119)](),_0x502301=_0x59b127[_0x21e528(0x134)],_0x41768a=await profile[_0x21e528(0xfa)]({'email':_0x502301[_0x21e528(0xbd)]}),_0x50ccb3=await sales_order[_0x21e528(0x119)]({'wms_account_id':_0x3a9a97});if(_0x5bc62f[0x0][_0x21e528(0x136)]=='English\x20(US)')var _0x2854aa=users['English'];else{if(_0x5bc62f[0x0][_0x21e528(0x136)]==_0x21e528(0xee))var _0x2854aa=users[_0x21e528(0xee)];else{if(_0x5bc62f[0x0][_0x21e528(0x136)]==_0x21e528(0x12a))var _0x2854aa=users[_0x21e528(0x12a)];else{if(_0x5bc62f[0x0][_0x21e528(0x136)]=='Spanish')var _0x2854aa=users['Spanish'];else{if(_0x5bc62f[0x0]['language']==_0x21e528(0x108))var _0x2854aa=users['French'];else{if(_0x5bc62f[0x0]['language']==_0x21e528(0xb4))var _0x2854aa=users[_0x21e528(0xbe)];else{if(_0x5bc62f[0x0][_0x21e528(0x136)]==_0x21e528(0xc0))var _0x2854aa=users['Chinese'];else{if(_0x5bc62f[0x0][_0x21e528(0x136)]==_0x21e528(0x12f))var _0x2854aa=users['Arabic'];}}}}}}}_0x1a42d6['render']('warehouse_approval_All',{'success':_0x59b127['flash']('success'),'errors':_0x59b127[_0x21e528(0x135)](_0x21e528(0x11d)),'master_shop':_0x5bc62f,'profile':_0x41768a,'role':_0x502301,'language':_0x2854aa,'sales_order':_0x50ccb3});}catch(_0x570c8a){}}),module[a0_0x5bdbc4(0x12d)]=router;