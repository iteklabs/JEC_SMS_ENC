function a0_0x61e0(_0x38e0e5,_0x5ae4f7){var _0x239963=a0_0x2399();return a0_0x61e0=function(_0x61e086,_0xef8c8d){_0x61e086=_0x61e086-0xe0;var _0x2e6060=_0x239963[_0x61e086];return _0x2e6060;},a0_0x61e0(_0x38e0e5,_0x5ae4f7);}var a0_0x652577=a0_0x61e0;(function(_0x1b14fc,_0x486580){var _0x1b5fde=a0_0x61e0,_0x36e71c=_0x1b14fc();while(!![]){try{var _0x23615d=parseInt(_0x1b5fde(0xf7))/0x1+parseInt(_0x1b5fde(0x13c))/0x2*(-parseInt(_0x1b5fde(0x17c))/0x3)+-parseInt(_0x1b5fde(0x138))/0x4*(parseInt(_0x1b5fde(0x12b))/0x5)+-parseInt(_0x1b5fde(0x136))/0x6*(-parseInt(_0x1b5fde(0x158))/0x7)+parseInt(_0x1b5fde(0xed))/0x8+parseInt(_0x1b5fde(0x128))/0x9+-parseInt(_0x1b5fde(0x185))/0xa*(parseInt(_0x1b5fde(0x167))/0xb);if(_0x23615d===_0x486580)break;else _0x36e71c['push'](_0x36e71c['shift']());}catch(_0x1a6c18){_0x36e71c['push'](_0x36e71c['shift']());}}}(a0_0x2399,0xd6019));function a0_0x2399(){var _0x20166d=['christian.villamer@jakagroup.com','warehouse_id','wms_account_confirm','express','user','stock','exports','length','date_data','render','False','findById','767158pOXRcm','success','_id','/data/data_rack','xlsx','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','protocol','gross_price','redirect','Email\x20sent\x20successfully','$wms_account_id','/upload/','Logo.png','</table>','language','14244296sBUEEJ','log','<br><br><br>','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>','</div>','French','email','Error\x20Occurs','<span>\x20Request\x20Date:\x20<b>','forEach','string','warehouse_approval_All','Sales\x20Add\x20successfully','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','toString','body','<strong>\x20Regards\x20</strong>','batch_code','push','/../public','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','18813uAZAOh','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>','OUT-','host','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','production_date','split','English','</tr>','10beidSh','sendMail','$product_details._id','document_number_out','Portuguese','password','$accounting_account_id','invoice','request_qty','product_stock','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','wms_account_id','</td>','view_accounting_approval','</b></span>\x20<br><br>','../models/all_models','back','5838600eRzQsK','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','createTransport','outgoing_invoice','toLocaleDateString','account_data','</b></span>\x20<br>','expiry_date','exceljs','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','1567483pWHahU','$account_data','/view_sales_order/:id','/data/All','data_loc','find','unit','<h5>\x20JEC\x20SMS\x20</h5>','nodemailer','port','/data/data_loc','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','findOne','maxperunit','secondary_unit','ObjectId','flash','date','product_cat','room','save','Hindi','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','Chinese','Arabic','../middleware/auth','../public/language/languages.json','$product_details.product_stock','mongodb','</body></html>','</thead>','aggregate','<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>','</head><body>','product_name','$product_details','<div>','<h2>\x20JEC\x20SMS\x20</h2>','abs','Arabic\x20(ae)','wms_data','/:id','German','params','post','outgoing_id','qty','://','json','6392403SUYYOo','</tbody>','prod_id','50NaVyRv','Email\x20for\x20Customer','/all_sales_finished/preview/','warehouse_detl','staffs','primary_code','padStart','$wms_data','Portuguese\x20(BR)','<!DOCTYPE\x20html>','level','18llUZBw','quantity','335504CvVLsb','<tr>','Types','logo','104ZHnpZr','product_details','English\x20(US)','uuid','$_id','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','product_code','get','errors','mongoose','$product_details.product_name','bay','Spanish','accounting_account_id','maxPerUnit','invoice_init'];a0_0x2399=function(){return _0x20166d;};return a0_0x2399();}const express=require(a0_0x652577(0x14f)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x652577(0xeb)),auth=require(a0_0x652577(0x110)),users=require(a0_0x652577(0x111)),excelJS=require(a0_0x652577(0xf5)),xlsx=require(a0_0x652577(0x15c)),mongoose=require(a0_0x652577(0x145)),{ObjectId}=require(a0_0x652577(0x113)),nodemailer=require(a0_0x652577(0xff));router[a0_0x652577(0x143)]('/:id',auth,async(_0x42490b,_0x2d58f6)=>{var _0x39cade=a0_0x652577;try{const _0x5d2b76=await master_shop[_0x39cade(0xfc)](),_0x24126d=_0x42490b[_0x39cade(0x150)],_0x21dd33=await profile[_0x39cade(0x103)]({'email':_0x24126d[_0x39cade(0x16d)]}),_0x419760=await staff[_0x39cade(0x103)]({'email':_0x24126d[_0x39cade(0x16d)]}),_0x1645ea=await customer[_0x39cade(0xfc)]({'agent_id':_0x419760[_0x39cade(0x15a)]}),_0x18594e=mongoose[_0x39cade(0x13a)][_0x39cade(0x106)],_0x552e05=_0x42490b[_0x39cade(0x122)]['id'],_0x54d237=await sales_order[_0x39cade(0x157)](_0x552e05),_0x46fa4b=await sales_order[_0x39cade(0x116)]([{'$match':{'_id':_0x18594e(_0x552e05)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x39cade(0xe2)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x39cade(0x162)}}},{'$lookup':{'from':_0x39cade(0x12f),'localField':_0x39cade(0x149),'foreignField':_0x39cade(0x15a),'as':_0x39cade(0xf2)}},{'$unwind':'$account_data'},{'$lookup':{'from':'staffs','localField':_0x39cade(0xe7),'foreignField':'_id','as':_0x39cade(0x11f)}},{'$unwind':_0x39cade(0x132)}]);if(_0x5d2b76[0x0][_0x39cade(0x166)]==_0x39cade(0x13e))var _0x4638fa=users[_0x39cade(0x183)];else{if(_0x5d2b76[0x0][_0x39cade(0x166)]=='Hindi')var _0x4638fa=users[_0x39cade(0x10c)];else{if(_0x5d2b76[0x0]['language']=='German')var _0x4638fa=users[_0x39cade(0x121)];else{if(_0x5d2b76[0x0][_0x39cade(0x166)]==_0x39cade(0x148))var _0x4638fa=users[_0x39cade(0x148)];else{if(_0x5d2b76[0x0][_0x39cade(0x166)]==_0x39cade(0x16c))var _0x4638fa=users[_0x39cade(0x16c)];else{if(_0x5d2b76[0x0][_0x39cade(0x166)]==_0x39cade(0x133))var _0x4638fa=users[_0x39cade(0xe0)];else{if(_0x5d2b76[0x0]['language']==_0x39cade(0x10e))var _0x4638fa=users[_0x39cade(0x10e)];else{if(_0x5d2b76[0x0][_0x39cade(0x166)]==_0x39cade(0x11e))var _0x4638fa=users[_0x39cade(0x10f)];}}}}}}}_0x2d58f6[_0x39cade(0x155)]('warehouse_approval',{'success':_0x42490b[_0x39cade(0x107)](_0x39cade(0x159)),'errors':_0x42490b['flash'](_0x39cade(0x144)),'master_shop':_0x5d2b76,'profile':_0x21dd33,'role':_0x24126d,'language':_0x4638fa,'customer':_0x1645ea,'sales_sa':_0x54d237,'approvers':_0x46fa4b[0x0],'the_id':_0x552e05});}catch(_0x1deb17){console[_0x39cade(0x168)](_0x1deb17);}}),router['post'](a0_0x652577(0x120),auth,async(_0x22448b,_0x28ab7f)=>{var _0x26071f=a0_0x652577;try{const {date:_0x53de95,invoice_data:_0xe8a5ce,wms_confirm:_0x4422c4,the_id_val:_0xb0490c,prod_id:_0x2c8cdd,SCRN:_0x4098be,ReqBy:_0x3883e3,dateofreq:_0x3e764c,PO_number:_0x3024a3,warehouse_name:_0x537b7d,typeservicesData:_0x113e9b,typevehicle:_0x46467d,destination:_0x353177,deliverydate:_0x564a1a,driver:_0x47b955,plate:_0x2933eb,van:_0x244ddd,DRSI:_0x2b71bb,TSU:_0x125cfa,TFU:_0x5de405,note:_0x77618d}=_0x22448b['body'],_0x136593=await sales_order['findById'](_0xb0490c);if(typeof _0x2c8cdd==_0x26071f(0x171))var _0xe91b84=[_0x22448b['body'][_0x26071f(0x12a)]],_0x4437c7=[_0x22448b['body'][_0x26071f(0x125)]],_0x207556=[_0x22448b[_0x26071f(0x176)]['data_loc']];else var _0xe91b84=[..._0x22448b[_0x26071f(0x176)][_0x26071f(0x12a)]],_0x4437c7=[..._0x22448b[_0x26071f(0x176)][_0x26071f(0x125)]],_0x207556=[..._0x22448b[_0x26071f(0x176)][_0x26071f(0xfb)]];const _0x39b991=_0xe91b84['map'](_0x58f93c=>{return _0x58f93c={'prod_id':_0x58f93c};});_0x207556[_0x26071f(0x170)]((_0x19de73,_0x50aed2)=>{var _0x26029a=_0x26071f,_0x725ef2=_0x19de73[_0x26029a(0x182)]('~');_0x39b991[_0x50aed2]['warehouse_id']=_0x725ef2[0x0],_0x39b991[_0x50aed2]['warehouse_detl']=_0x725ef2[0x1];}),_0x4437c7[_0x26071f(0x170)]((_0x3aa7ff,_0x512268)=>{var _0x57d69b=_0x26071f;_0x39b991[_0x512268][_0x57d69b(0xe4)]=_0x3aa7ff;});var _0x56f545=[],_0x48ac3f=[],_0x20c7c7=[],_0x4a2a81=[],_0x37b8e2=[],_0x3b5075=[],_0x555287=[],_0x33c11f=[],_0xaa5c6d=[],_0x5d228=[],_0x267ab2=[],_0x1c5648=[],_0x42857e=[],_0x47bca7=[],_0x3bf72b=[],_0x124849=[],_0x2ed47c=[],_0x4f2a18=[],_0x3c62b4=[],_0x256f76=[];for(let _0x56bc99=0x0;_0x56bc99<=_0x39b991['length']-0x1;_0x56bc99++){const _0x3c2ef2=_0x39b991[_0x56bc99],_0x257633=mongoose[_0x26071f(0x13a)][_0x26071f(0x106)];var _0xa2ef97=await warehouse['aggregate']([{'$match':{'_id':_0x257633(_0x3c2ef2[_0x26071f(0x14d)])}},{'$unwind':_0x26071f(0x11a)},{'$match':{'product_details._id':_0x257633(_0x3c2ef2[_0x26071f(0x12e)])}}]),_0x233bb2=0x0;for(let _0x42ec8d=0x0;_0x42ec8d<=_0xa2ef97[_0x26071f(0x153)]-0x1;_0x42ec8d++){var _0x383d1f=_0xa2ef97[_0x42ec8d];_0x383d1f[_0x26071f(0x13d)][_0x26071f(0xe5)]<_0x3c2ef2[_0x26071f(0xe4)]&&_0x233bb2++;}if(_0x233bb2>0x0)return _0x22448b[_0x26071f(0x107)](_0x26071f(0x144),_0x26071f(0x141)),_0x28ab7f[_0x26071f(0x160)](_0x26071f(0xec));var _0x2928cd=0x0;for(let _0x4b2938=0x0;_0x4b2938<=_0xa2ef97[_0x26071f(0x153)]-0x1;_0x4b2938++){var _0x383d1f=_0xa2ef97[_0x4b2938];_0x383d1f['product_details']['product_stock']>_0x3c2ef2[_0x26071f(0xe4)]&&(_0x56f545[_0x26071f(0x179)](_0x383d1f['product_details'][_0x26071f(0x119)]),_0x48ac3f[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x13d)][_0x26071f(0xe5)]),_0x20c7c7[_0x26071f(0x179)](_0x3c2ef2[_0x26071f(0xe4)]),_0x4a2a81[_0x26071f(0x179)](_0x383d1f['product_details'][_0x26071f(0x130)]),_0x37b8e2['push'](_0x383d1f[_0x26071f(0x13d)]['secondary_code']),_0x3b5075[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x13d)]['product_code']),_0x555287[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x13d)]['level']),_0x33c11f[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x13d)][_0x26071f(0x147)]),_0xaa5c6d[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x13d)][_0x26071f(0xfd)]),_0x5d228['push'](_0x383d1f[_0x26071f(0x13d)][_0x26071f(0x105)]),_0x267ab2[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x13d)][_0x26071f(0x178)]),_0x1c5648[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x13d)][_0x26071f(0xf4)]),_0x42857e[_0x26071f(0x179)](_0x383d1f['product_details'][_0x26071f(0x181)]),_0x47bca7[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x13d)][_0x26071f(0x14a)]),_0x3bf72b[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x13d)][_0x26071f(0x109)]),_0x124849[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x10a)]),_0x2ed47c[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x13d)][_0x26071f(0xe3)]),_0x4f2a18['push'](_0x383d1f['product_details'][_0x26071f(0x15a)]),_0x3c62b4[_0x26071f(0x179)](_0x383d1f[_0x26071f(0x13d)][_0x26071f(0x13f)]),_0x256f76[_0x26071f(0x179)](_0x383d1f['product_details'][_0x26071f(0x15f)]),_0x2928cd++);}}const _0x397b56=_0x56f545['map'](_0x36840c=>{return _0x36840c={'product_name':_0x36840c};});_0x48ac3f['forEach']((_0x15e9c7,_0x4f22a1)=>{var _0x1b64a7=_0x26071f;_0x397b56[_0x4f22a1][_0x1b64a7(0x151)]=_0x15e9c7;}),_0x20c7c7[_0x26071f(0x170)]((_0x5c0258,_0x3ed543)=>{var _0x24d842=_0x26071f;_0x397b56[_0x3ed543][_0x24d842(0x137)]=Math[_0x24d842(0x11d)](_0x5c0258);}),_0x256f76[_0x26071f(0x170)]((_0x2cdb7b,_0x255535)=>{var _0x565c4d=_0x26071f;_0x397b56[_0x255535][_0x565c4d(0x15f)]=_0x2cdb7b;}),_0x3c62b4[_0x26071f(0x170)]((_0xcefa1d,_0x6c1d91)=>{_0x397b56[_0x6c1d91]['uuid']=_0xcefa1d;}),_0x4f2a18[_0x26071f(0x170)]((_0x3895f2,_0x29611c)=>{_0x397b56[_0x29611c]['id_transaction_from']=_0x3895f2;}),_0x4a2a81[_0x26071f(0x170)]((_0x125309,_0x5a97c3)=>{var _0x4d5b95=_0x26071f;_0x397b56[_0x5a97c3][_0x4d5b95(0x130)]=_0x125309;}),_0x37b8e2[_0x26071f(0x170)]((_0x26114a,_0x531fdb)=>{_0x397b56[_0x531fdb]['secondary_code']=_0x26114a;}),_0x3b5075['forEach']((_0x58a588,_0x3819f3)=>{var _0x43f9ed=_0x26071f;_0x397b56[_0x3819f3][_0x43f9ed(0x142)]=_0x58a588;}),_0x555287[_0x26071f(0x170)]((_0x5620a6,_0x244045)=>{var _0x4888cf=_0x26071f;_0x397b56[_0x244045][_0x4888cf(0x135)]=_0x5620a6;}),_0x33c11f[_0x26071f(0x170)]((_0xc9947c,_0x1d93df)=>{_0x397b56[_0x1d93df]['bay']=_0xc9947c;}),_0xaa5c6d['forEach']((_0x394ca7,_0x427954)=>{var _0x3c14bb=_0x26071f;_0x397b56[_0x427954][_0x3c14bb(0xfd)]=_0x394ca7;}),_0x5d228[_0x26071f(0x170)]((_0x40c89e,_0x46e832)=>{var _0x4b18b9=_0x26071f;_0x397b56[_0x46e832][_0x4b18b9(0x105)]=_0x40c89e;}),_0x267ab2[_0x26071f(0x170)]((_0x348d72,_0x10c9ee)=>{var _0x419a7c=_0x26071f;_0x397b56[_0x10c9ee][_0x419a7c(0x178)]=_0x348d72;}),_0x1c5648[_0x26071f(0x170)]((_0x522636,_0x3277e8)=>{var _0x9a2f4f=_0x26071f;_0x397b56[_0x3277e8][_0x9a2f4f(0xf4)]=_0x522636;}),_0x42857e[_0x26071f(0x170)]((_0xaaf293,_0x305c78)=>{var _0x559dff=_0x26071f;_0x397b56[_0x305c78][_0x559dff(0x181)]=_0xaaf293;}),_0x47bca7['forEach']((_0x4d8881,_0x4ce6a2)=>{var _0x389430=_0x26071f;_0x397b56[_0x4ce6a2][_0x389430(0x104)]=_0x4d8881;}),_0x3bf72b[_0x26071f(0x170)]((_0xce8afd,_0x36b60c)=>{_0x397b56[_0x36b60c]['prod_cat']=_0xce8afd;}),_0x124849[_0x26071f(0x170)]((_0xacf46c,_0x120e42)=>{_0x397b56[_0x120e42]['room_name']=_0xacf46c;}),_0x2ed47c[_0x26071f(0x170)]((_0x75cd83,_0x2fa737)=>{var _0x46c8b0=_0x26071f;_0x397b56[_0x2fa737][_0x46c8b0(0xe3)]=_0x75cd83,_0x397b56[_0x2fa737][_0x46c8b0(0x154)]=_0x53de95;});const _0x38a4fb=new invoice_for_outgoing();await _0x38a4fb['save'](),_0x2ed47c[_0x26071f(0x170)]((_0x4182d2,_0x4d48c2)=>{var _0x1fc757=_0x26071f;_0x397b56[_0x4d48c2][_0x1fc757(0xf0)]=_0x1fc757(0x17e)+_0x38a4fb['invoice_init'][_0x1fc757(0x175)]()[_0x1fc757(0x131)](0x8,'0');});const _0x1f70e5=_0x397b56['filter'](_0x4a4258=>_0x4a4258[_0x26071f(0x137)]!=='0'&&_0x4a4258[_0x26071f(0x137)]!==''),_0x4de44d=new sales_finished({'invoice':'OUT-'+_0x38a4fb[_0x26071f(0x14b)][_0x26071f(0x175)]()[_0x26071f(0x131)](0x8,'0'),'date':_0x53de95,'warehouse_name':_0x537b7d,'sale_product':_0x1f70e5,'note':_0x77618d,'SCRN':_0x4098be,'finalize':_0x26071f(0x156),'ReqBy':_0x3883e3,'dateofreq':_0x3e764c,'PO_number':_0x3024a3,'typeservicesData':_0x113e9b,'typevehicle':_0x46467d,'destination':_0x353177,'deliverydate':_0x564a1a,'driver':_0x47b955,'plate':_0x2933eb,'van':_0x244ddd,'DRSI':_0x2b71bb,'TSU':_0x125cfa,'TFU':_0x5de405}),_0x2bacb7=await _0x4de44d['save'](),_0x430bb5=new Date(),_0x160b00=_0x430bb5[_0x26071f(0xf1)]();_0x136593[_0x26071f(0x14e)]=_0x4422c4,_0x136593['wms_account_date']=_0x160b00,_0x136593[_0x26071f(0x188)]=_0x26071f(0x17e)+_0x38a4fb['invoice_init'][_0x26071f(0x175)]()[_0x26071f(0x131)](0x8,'0'),_0x136593[_0x26071f(0x124)]=_0x2bacb7[_0x26071f(0x15a)],await _0x136593[_0x26071f(0x10b)]();const _0x23d89e=await master_shop['find'](),_0x2288ba=await email_settings[_0x26071f(0x103)]();let _0x14110e=nodemailer[_0x26071f(0xef)]({'host':_0x2288ba['host'],'port':Number(_0x2288ba[_0x26071f(0x100)]),'secure':![],'auth':{'user':_0x2288ba['email'],'pass':_0x2288ba[_0x26071f(0xe1)]}});const _0x11438e=_0x22448b[_0x26071f(0x15e)]+_0x26071f(0x126)+_0x22448b['headers'][_0x26071f(0x17f)];var _0x43466d=_0x136593['sale_product'],_0x181615='',_0x55eacf,_0x22aa0d=0x0;for(_0x55eacf in _0x43466d){_0x181615+='<tr>'+_0x26071f(0x180)+_0x43466d[_0x55eacf]['product_name']+_0x26071f(0xe8)+_0x26071f(0x180)+_0x43466d[_0x55eacf][_0x26071f(0x142)]+_0x26071f(0xe8)+_0x26071f(0x180)+_0x43466d[_0x55eacf][_0x26071f(0x137)]+'</td>'+_0x26071f(0x180)+_0x43466d[_0x55eacf][_0x26071f(0xfd)]+_0x26071f(0xe8)+_0x26071f(0x184),_0x22aa0d+=parseInt(_0x43466d[_0x55eacf]['quantity']);}let _0x33b358={'from':_0x2288ba[_0x26071f(0x16d)],'to':_0x26071f(0x14c),'subject':_0x26071f(0x12c),'attachments':[{'filename':_0x26071f(0x164),'path':__dirname+_0x26071f(0x17a)+_0x26071f(0x163)+_0x23d89e[0x0]['image'],'cid':_0x26071f(0x13b)}],'html':_0x26071f(0x134)+'<html><head><title></title>'+_0x26071f(0x10d)+_0x26071f(0x118)+'<div>'+_0x26071f(0x102)+_0x26071f(0x11b)+_0x26071f(0xee)+_0x26071f(0x16b)+_0x26071f(0x11b)+_0x26071f(0x11c)+_0x26071f(0x16b)+_0x26071f(0x16b)+'<hr\x20class=\x22my-3\x22>'+_0x26071f(0x11b)+_0x26071f(0x16b)+_0x26071f(0x11b)+_0x26071f(0x17b)+_0x26071f(0x16b)+_0x26071f(0x11b)+'<span>\x20Request\x20ID:\x20<b>'+_0x136593[_0x26071f(0xe3)]+_0x26071f(0xf3)+_0x26071f(0x16f)+_0x136593[_0x26071f(0x108)]+_0x26071f(0xea)+_0x26071f(0x16b)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x26071f(0xf6)+_0x26071f(0x139)+_0x26071f(0x117)+_0x26071f(0x16a)+_0x26071f(0x17d)+_0x26071f(0x15d)+_0x26071f(0x184)+_0x26071f(0x115)+'<tbody\x20style=\x22text-align:\x20center;\x22>'+'\x20'+_0x181615+'\x20'+_0x26071f(0x129)+_0x26071f(0x165)+_0x26071f(0x11b)+_0x26071f(0xe6)+'<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>'+_0x26071f(0x169)+_0x26071f(0x16b)+_0x26071f(0x11b)+_0x26071f(0x177)+_0x26071f(0xfe)+_0x26071f(0x16b)+'</div>'+_0x26071f(0x174)+_0x26071f(0x114)};_0x14110e[_0x26071f(0x186)](_0x33b358,function(_0x580799,_0x47be14){var _0x744d81=_0x26071f;_0x580799?(console[_0x744d81(0x168)](_0x580799),console['log'](_0x744d81(0x16e))):console['log'](_0x744d81(0x161));}),_0x22448b['flash'](_0x26071f(0x159),_0x26071f(0x173)),_0x28ab7f[_0x26071f(0x160)](_0x26071f(0x12d)+_0x2bacb7[_0x26071f(0x15a)]),_0x28ab7f[_0x26071f(0x127)](_0x1f70e5);return;}catch(_0x22c9f7){}}),router['get'](a0_0x652577(0xf9),auth,async(_0x168b9a,_0x299556)=>{var _0xc98176=a0_0x652577;try{const _0x57b840=await master_shop[_0xc98176(0xfc)](),_0x1bec2a=_0x168b9a[_0xc98176(0x150)],_0x2712be=await profile['findOne']({'email':_0x1bec2a[_0xc98176(0x16d)]}),_0x4d39fa=await staff[_0xc98176(0x103)]({'email':_0x1bec2a['email']}),_0x20d927=await customer[_0xc98176(0xfc)]({'agent_id':_0x4d39fa[_0xc98176(0x15a)]}),_0x38e45e=mongoose[_0xc98176(0x13a)][_0xc98176(0x106)],_0x26b98c=_0x168b9a[_0xc98176(0x122)]['id'],_0x48f759=await sales_order[_0xc98176(0x157)](_0x26b98c),_0x588102=await sales_order[_0xc98176(0x116)]([{'$match':{'_id':_0x38e45e(_0x26b98c)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0xc98176(0xe2)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':'staffs','localField':_0xc98176(0x149),'foreignField':_0xc98176(0x15a),'as':'account_data'}},{'$unwind':_0xc98176(0xf8)},{'$lookup':{'from':_0xc98176(0x12f),'localField':_0xc98176(0xe7),'foreignField':_0xc98176(0x15a),'as':_0xc98176(0x11f)}},{'$unwind':_0xc98176(0x132)}]);if(_0x57b840[0x0][_0xc98176(0x166)]==_0xc98176(0x13e))var _0x438e69=users[_0xc98176(0x183)];else{if(_0x57b840[0x0][_0xc98176(0x166)]=='Hindi')var _0x438e69=users[_0xc98176(0x10c)];else{if(_0x57b840[0x0][_0xc98176(0x166)]==_0xc98176(0x121))var _0x438e69=users[_0xc98176(0x121)];else{if(_0x57b840[0x0][_0xc98176(0x166)]==_0xc98176(0x148))var _0x438e69=users[_0xc98176(0x148)];else{if(_0x57b840[0x0][_0xc98176(0x166)]=='French')var _0x438e69=users[_0xc98176(0x16c)];else{if(_0x57b840[0x0]['language']==_0xc98176(0x133))var _0x438e69=users[_0xc98176(0xe0)];else{if(_0x57b840[0x0][_0xc98176(0x166)]==_0xc98176(0x10e))var _0x438e69=users[_0xc98176(0x10e)];else{if(_0x57b840[0x0][_0xc98176(0x166)]==_0xc98176(0x11e))var _0x438e69=users['Arabic'];}}}}}}}_0x299556['render'](_0xc98176(0xe9),{'success':_0x168b9a['flash']('success'),'errors':_0x168b9a[_0xc98176(0x107)](_0xc98176(0x144)),'master_shop':_0x57b840,'profile':_0x2712be,'role':_0x1bec2a,'language':_0x438e69,'customer':_0x20d927,'sales_sa':_0x48f759,'approvers':_0x588102[0x0],'the_id':_0x26b98c});}catch(_0x594ee0){console[_0xc98176(0x168)](_0x594ee0);}}),router['post'](a0_0x652577(0x15b),auth,async(_0x3589ec,_0x110323)=>{var _0x44df47=a0_0x652577;try{const {warehouse_name:_0x82c7bc,product_code:_0x43c4e3}=_0x3589ec[_0x44df47(0x176)],_0x49dca6=await warehouse['aggregate']([{'$match':{'name':_0x82c7bc}},{'$unwind':_0x44df47(0x11a)},{'$match':{'product_details.product_code':_0x43c4e3}},{'$group':{'_id':{'room':'$room','_id':'$_id'}}}]);_0x110323['json'](_0x49dca6);}catch(_0x55e887){}}),router[a0_0x652577(0x123)](a0_0x652577(0x101),auth,async(_0x51cb6b,_0x39a606)=>{var _0x473c1a=a0_0x652577;try{const {warehouse_name:_0x2389cf,product_code:_0x29cc53,room_name:_0x36662c}=_0x51cb6b[_0x473c1a(0x176)];console['log'](_0x51cb6b['body']);const _0x536530=await warehouse[_0x473c1a(0x116)]([{'$match':{'name':_0x2389cf,'room':_0x36662c}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x29cc53}},{'$group':{'_id':{'main_id':_0x473c1a(0x140),'detl_id':_0x473c1a(0x187),'product_name':_0x473c1a(0x146),'product_code':'$product_details.product_code','level':'$product_details.level','bay':'$product_details.bay','stocks':_0x473c1a(0x112)}}}]);_0x39a606[_0x473c1a(0x127)](_0x536530);}catch(_0x3023e6){}}),router[a0_0x652577(0x143)](a0_0x652577(0xfa),auth,async(_0x557443,_0x12af35)=>{var _0xa39ddd=a0_0x652577;try{const {sttaff_id:_0x1e231a,email:_0xef0e72,warehouse:_0x217d80}=_0x557443[_0xa39ddd(0x150)],_0x4f6cbb=await master_shop[_0xa39ddd(0xfc)](),_0x46bd09=_0x557443['user'],_0x22b944=await profile['findOne']({'email':_0x46bd09[_0xa39ddd(0x16d)]}),_0x2de0d0=await sales_order[_0xa39ddd(0xfc)]({'wms_account_id':_0x1e231a});if(_0x4f6cbb[0x0][_0xa39ddd(0x166)]==_0xa39ddd(0x13e))var _0x240a2e=users[_0xa39ddd(0x183)];else{if(_0x4f6cbb[0x0][_0xa39ddd(0x166)]==_0xa39ddd(0x10c))var _0x240a2e=users[_0xa39ddd(0x10c)];else{if(_0x4f6cbb[0x0][_0xa39ddd(0x166)]==_0xa39ddd(0x121))var _0x240a2e=users['German'];else{if(_0x4f6cbb[0x0][_0xa39ddd(0x166)]==_0xa39ddd(0x148))var _0x240a2e=users['Spanish'];else{if(_0x4f6cbb[0x0][_0xa39ddd(0x166)]=='French')var _0x240a2e=users['French'];else{if(_0x4f6cbb[0x0][_0xa39ddd(0x166)]==_0xa39ddd(0x133))var _0x240a2e=users['Portuguese'];else{if(_0x4f6cbb[0x0]['language']==_0xa39ddd(0x10e))var _0x240a2e=users[_0xa39ddd(0x10e)];else{if(_0x4f6cbb[0x0][_0xa39ddd(0x166)]==_0xa39ddd(0x11e))var _0x240a2e=users['Arabic'];}}}}}}}_0x12af35[_0xa39ddd(0x155)](_0xa39ddd(0x172),{'success':_0x557443[_0xa39ddd(0x107)](_0xa39ddd(0x159)),'errors':_0x557443[_0xa39ddd(0x107)](_0xa39ddd(0x144)),'master_shop':_0x4f6cbb,'profile':_0x22b944,'role':_0x46bd09,'language':_0x240a2e,'sales_order':_0x2de0d0});}catch(_0x3d822a){}}),module[a0_0x652577(0x152)]=router;