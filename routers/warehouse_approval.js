var a0_0x49e96f=a0_0x55fd;function a0_0x55fd(_0x433ab2,_0x2a0d83){var _0x523d15=a0_0x523d();return a0_0x55fd=function(_0x55fda8,_0x5f4437){_0x55fda8=_0x55fda8-0x182;var _0x48a0ea=_0x523d15[_0x55fda8];return _0x48a0ea;},a0_0x55fd(_0x433ab2,_0x2a0d83);}(function(_0x1c5893,_0x36dafd){var _0xd1818a=a0_0x55fd,_0x28a2ce=_0x1c5893();while(!![]){try{var _0x44e5fe=parseInt(_0xd1818a(0x1a3))/0x1*(-parseInt(_0xd1818a(0x216))/0x2)+parseInt(_0xd1818a(0x1b4))/0x3*(-parseInt(_0xd1818a(0x200))/0x4)+parseInt(_0xd1818a(0x194))/0x5+-parseInt(_0xd1818a(0x18d))/0x6*(-parseInt(_0xd1818a(0x1b2))/0x7)+-parseInt(_0xd1818a(0x1f2))/0x8+-parseInt(_0xd1818a(0x182))/0x9+parseInt(_0xd1818a(0x203))/0xa;if(_0x44e5fe===_0x36dafd)break;else _0x28a2ce['push'](_0x28a2ce['shift']());}catch(_0x650f11){_0x28a2ce['push'](_0x28a2ce['shift']());}}}(a0_0x523d,0x75cb4));function a0_0x523d(){var _0x2d16fa=['<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Unit\x20</th>','headers','success','date','post','/all_sales_finished/preview/','Logo.png','room_name','staffs','$_id','5566761UvnXKy','<td\x20style=\x22border:\x201px\x20solid\x20black;\x22>','warehouse_id','</b></span>\x20<br>','wms_account_date','../public/language/languages.json','<h5>\x20JEC\x20SMS\x20</h5>','accounting_account_id','gross_price','Email\x20for\x20Customer','string','612JSIosL','wms_data','English','<tr>','split','save','christian.villamer@jakagroup.com','3210085OJIAoT','<strong>\x20Regards\x20</strong>','<html><head><title></title>','product_stock','Hindi','back','</tr>','$product_details._id','Chinese','log','exports','json','email','prod_id','findById','323bNkXJB','maxperunit','forEach','production_date','$product_details.bay','product_code','/view_sales_order/:id','<!DOCTYPE\x20html>','ObjectId','$account_data','get','/../public','Portuguese\x20(BR)','<thead\x20style=\x22width:\x20100%\x20!important;\x22>','warehouse_approval','45640IcvHuy','document_number_out','33sUnuYP','product_details','/data/data_loc','flash','../models/all_models','warehouse_approval_All','user','xlsx','host','image','invoice_init','://','/upload/','createTransport','$product_details.product_code','aggregate','secondary_unit','abs','warehouse_detl','<tbody\x20style=\x22text-align:\x20center;\x22>','Email\x20sent\x20successfully','product_cat','<div>','<span>\x20A\x20product\x20request\x20has\x20been\x20submitted\x20by\x20the\x20Sales\x20Department\x20and\x20Approved\x20by\x20Accounting\x20that\x20requires\x20your\x20approval.\x20Below\x20are\x20the\x20details:\x20</span>\x20<br><br>','_id','Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty','view_accounting_approval','quantity','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','<h2>\x20JEC\x20SMS\x20</h2>','/:id','language','/data/All','map','length','errors','German','request_qty','French','padStart','maxPerUnit','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','Arabic','protocol','port','password','uuid','date_data','mongoose','Spanish','False','render','Types','Portuguese','/data/data_rack','Sales\x20Add\x20successfully','Router','exceljs','redirect','toString','body','find','6598632GgshEY','Arabic\x20(ae)','OUT-','wms_account_confirm','qty','filter','<hr\x20class=\x22my-3\x22>','level','push','<link\x20href=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\x22\x20rel=\x22stylesheet\x22\x20integrity=\x22sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\x22\x20crossorigin=\x22anonymous\x22>','unit','batch_code','<span>\x20Thank\x20you\x20for\x20your\x20prompt\x20attention\x20to\x20this\x20matter.\x20</span>','product_name','202476FbjQSQ','invoice','data_loc','11817310tKvSwU','<span>\x20lease\x20review\x20the\x20request\x20and\x20approve\x20it\x20if\x20it\x20aligns\x20with\x20our\x20operational\x20needs.\x20If\x20you\x20have\x20any\x20questions\x20or\x20require\x20further\x20information,\x20please\x20feel\x20free\x20to\x20reach\x20out\x20to\x20the\x20Sales\x20Department.\x20</span>','$accounting_account_id','sendMail','outgoing_invoice','$wms_account_id','bay','</div>','stock','../middleware/auth','mongodb','</thead>','</tbody>','$product_details.product_stock','$product_details','express','findOne','account_data','<span>\x20Request\x20ID:\x20<b>','38MzyiLD','<script\x20src=\x22https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\x22\x20integrity=\x22sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\x22\x20crossorigin=\x22anonymous\x22></script>','params','toLocaleDateString','English\x20(US)','secondary_code','</td>','</table>','wms_account_id'];a0_0x523d=function(){return _0x2d16fa;};return a0_0x523d();}const express=require(a0_0x49e96f(0x212)),app=express(),router=express[a0_0x49e96f(0x1ec)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,invoice_for_outgoing,customer_payment,c_payment_data,sales_order,invoice_sa,sales_sa,invoice_for_sales_order,approver_acct,email_settings,sales_finished}=require(a0_0x49e96f(0x1b8)),auth=require(a0_0x49e96f(0x20c)),users=require(a0_0x49e96f(0x187)),excelJS=require(a0_0x49e96f(0x1ed)),xlsx=require(a0_0x49e96f(0x1bb)),mongoose=require(a0_0x49e96f(0x1e4)),{ObjectId}=require(a0_0x49e96f(0x20d)),nodemailer=require('nodemailer');router[a0_0x49e96f(0x1ad)](a0_0x49e96f(0x1d2),auth,async(_0x289a01,_0x507c8e)=>{var _0x35d8cd=a0_0x49e96f;try{const _0x2dc1be=await master_shop[_0x35d8cd(0x1f1)](),_0x5f183b=_0x289a01[_0x35d8cd(0x1ba)],_0x4236ca=await profile[_0x35d8cd(0x213)]({'email':_0x5f183b['email']}),_0x458bbc=await staff[_0x35d8cd(0x213)]({'email':_0x5f183b[_0x35d8cd(0x1a0)]}),_0x34fce7=await customer[_0x35d8cd(0x1f1)]({'agent_id':_0x458bbc[_0x35d8cd(0x1cc)]}),_0x4b9484=mongoose[_0x35d8cd(0x1e8)][_0x35d8cd(0x1ab)],_0x47b06b=_0x289a01[_0x35d8cd(0x218)]['id'],_0x207dbf=await sales_order['findById'](_0x47b06b),_0x16d26c=await sales_order[_0x35d8cd(0x1c3)]([{'$match':{'_id':_0x4b9484(_0x47b06b)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x35d8cd(0x205)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$wms_account_id'}}},{'$lookup':{'from':_0x35d8cd(0x227),'localField':_0x35d8cd(0x189),'foreignField':'_id','as':_0x35d8cd(0x214)}},{'$unwind':_0x35d8cd(0x1ac)},{'$lookup':{'from':_0x35d8cd(0x227),'localField':'wms_account_id','foreignField':'_id','as':_0x35d8cd(0x18e)}},{'$unwind':'$wms_data'}]);if(_0x2dc1be[0x0][_0x35d8cd(0x1d3)]==_0x35d8cd(0x21a))var _0x45dbd5=users[_0x35d8cd(0x18f)];else{if(_0x2dc1be[0x0]['language']=='Hindi')var _0x45dbd5=users[_0x35d8cd(0x198)];else{if(_0x2dc1be[0x0]['language']=='German')var _0x45dbd5=users[_0x35d8cd(0x1d8)];else{if(_0x2dc1be[0x0]['language']==_0x35d8cd(0x1e5))var _0x45dbd5=users[_0x35d8cd(0x1e5)];else{if(_0x2dc1be[0x0][_0x35d8cd(0x1d3)]==_0x35d8cd(0x1da))var _0x45dbd5=users['French'];else{if(_0x2dc1be[0x0][_0x35d8cd(0x1d3)]=='Portuguese\x20(BR)')var _0x45dbd5=users[_0x35d8cd(0x1e9)];else{if(_0x2dc1be[0x0][_0x35d8cd(0x1d3)]==_0x35d8cd(0x19c))var _0x45dbd5=users[_0x35d8cd(0x19c)];else{if(_0x2dc1be[0x0][_0x35d8cd(0x1d3)]==_0x35d8cd(0x1f3))var _0x45dbd5=users[_0x35d8cd(0x1de)];}}}}}}}_0x507c8e[_0x35d8cd(0x1e7)](_0x35d8cd(0x1b1),{'success':_0x289a01[_0x35d8cd(0x1b7)]('success'),'errors':_0x289a01['flash']('errors'),'master_shop':_0x2dc1be,'profile':_0x4236ca,'role':_0x5f183b,'language':_0x45dbd5,'customer':_0x34fce7,'sales_sa':_0x207dbf,'approvers':_0x16d26c[0x0],'the_id':_0x47b06b});}catch(_0x332d07){console[_0x35d8cd(0x19d)](_0x332d07);}}),router[a0_0x49e96f(0x223)](a0_0x49e96f(0x1d2),auth,async(_0x44d41b,_0x41da53)=>{var _0x75e716=a0_0x49e96f;try{const {date:_0x330fc2,invoice_data:_0xcfa5c1,wms_confirm:_0x231ff4,the_id_val:_0x27b9f5,prod_id:_0x29819c,SCRN:_0x2178d0,ReqBy:_0x358322,dateofreq:_0x11a51b,PO_number:_0xc189da,warehouse_name:_0x477807,typeservicesData:_0x1e1542,typevehicle:_0x3312bb,destination:_0x250263,deliverydate:_0x6fec3c,driver:_0x3235c9,plate:_0x59b7f4,van:_0x26eebc,DRSI:_0x14c25f,TSU:_0x4195bb,TFU:_0x2d609b,note:_0x44ddaa}=_0x44d41b['body'],_0x51b57d=await sales_order['findById'](_0x27b9f5);if(typeof _0x29819c==_0x75e716(0x18c))var _0x325104=[_0x44d41b[_0x75e716(0x1f0)][_0x75e716(0x1a1)]],_0x174b7a=[_0x44d41b['body'][_0x75e716(0x1f6)]],_0x3601c3=[_0x44d41b['body'][_0x75e716(0x202)]];else var _0x325104=[..._0x44d41b['body']['prod_id']],_0x174b7a=[..._0x44d41b[_0x75e716(0x1f0)][_0x75e716(0x1f6)]],_0x3601c3=[..._0x44d41b[_0x75e716(0x1f0)][_0x75e716(0x202)]];const _0x21225e=_0x325104[_0x75e716(0x1d5)](_0x5414d4=>{return _0x5414d4={'prod_id':_0x5414d4};});_0x3601c3[_0x75e716(0x1a5)]((_0x1e4c8b,_0x356ef6)=>{var _0x423348=_0x75e716,_0x5d9072=_0x1e4c8b[_0x423348(0x191)]('~');_0x21225e[_0x356ef6][_0x423348(0x184)]=_0x5d9072[0x0],_0x21225e[_0x356ef6][_0x423348(0x1c6)]=_0x5d9072[0x1];}),_0x174b7a[_0x75e716(0x1a5)]((_0xd012de,_0x3a4f4d)=>{var _0x151882=_0x75e716;_0x21225e[_0x3a4f4d][_0x151882(0x1d9)]=_0xd012de;});var _0x4c317b=[],_0x37a9d3=[],_0x52c3e5=[],_0x476aab=[],_0x591c62=[],_0x595c8d=[],_0xf682ad=[],_0x51499a=[],_0x47fb70=[],_0x1aac3b=[],_0x46c492=[],_0x187cad=[],_0x4d7178=[],_0xa3dd8f=[],_0x3945f6=[],_0x4cf32=[],_0x473b17=[],_0x5ae7b5=[],_0x252bb1=[],_0x5ee0d1=[];for(let _0x301d3a=0x0;_0x301d3a<=_0x21225e[_0x75e716(0x1d6)]-0x1;_0x301d3a++){const _0x47bc2f=_0x21225e[_0x301d3a],_0x556863=mongoose['Types']['ObjectId'];var _0x205d4d=await warehouse['aggregate']([{'$match':{'_id':_0x556863(_0x47bc2f[_0x75e716(0x184)])}},{'$unwind':'$product_details'},{'$match':{'product_details._id':_0x556863(_0x47bc2f[_0x75e716(0x1c6)])}}]),_0x1e5537=0x0;for(let _0x28b48b=0x0;_0x28b48b<=_0x205d4d[_0x75e716(0x1d6)]-0x1;_0x28b48b++){var _0x58da68=_0x205d4d[_0x28b48b];_0x58da68[_0x75e716(0x1b5)]['product_stock']<_0x47bc2f[_0x75e716(0x1d9)]&&_0x1e5537++;}if(_0x1e5537>0x0)return _0x44d41b[_0x75e716(0x1b7)](_0x75e716(0x1d7),_0x75e716(0x1cd)),_0x41da53[_0x75e716(0x1ee)](_0x75e716(0x199));var _0x19bde2=0x0;for(let _0x5930f4=0x0;_0x5930f4<=_0x205d4d[_0x75e716(0x1d6)]-0x1;_0x5930f4++){var _0x58da68=_0x205d4d[_0x5930f4];_0x58da68['product_details'][_0x75e716(0x197)]>_0x47bc2f[_0x75e716(0x1d9)]&&(_0x4c317b['push'](_0x58da68[_0x75e716(0x1b5)][_0x75e716(0x1ff)]),_0x37a9d3[_0x75e716(0x1fa)](_0x58da68['product_details'][_0x75e716(0x197)]),_0x52c3e5[_0x75e716(0x1fa)](_0x47bc2f[_0x75e716(0x1d9)]),_0x476aab[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)]['primary_code']),_0x591c62[_0x75e716(0x1fa)](_0x58da68['product_details'][_0x75e716(0x21b)]),_0x595c8d[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)]['product_code']),_0xf682ad[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)]['level']),_0x51499a[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)][_0x75e716(0x209)]),_0x47fb70[_0x75e716(0x1fa)](_0x58da68['product_details'][_0x75e716(0x1fc)]),_0x1aac3b[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)][_0x75e716(0x1c4)]),_0x46c492[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)]['batch_code']),_0x187cad[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)]['expiry_date']),_0x4d7178[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)][_0x75e716(0x1a6)]),_0xa3dd8f[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)][_0x75e716(0x1dc)]),_0x3945f6[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)][_0x75e716(0x1c9)]),_0x4cf32[_0x75e716(0x1fa)](_0x58da68['room']),_0x473b17['push'](_0x58da68['product_details'][_0x75e716(0x201)]),_0x5ae7b5[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)][_0x75e716(0x1cc)]),_0x252bb1[_0x75e716(0x1fa)](_0x58da68['product_details'][_0x75e716(0x1e2)]),_0x5ee0d1[_0x75e716(0x1fa)](_0x58da68[_0x75e716(0x1b5)][_0x75e716(0x18a)]),_0x19bde2++);}}const _0x4df123=_0x4c317b[_0x75e716(0x1d5)](_0x5d5435=>{return _0x5d5435={'product_name':_0x5d5435};});_0x37a9d3[_0x75e716(0x1a5)]((_0x454f6e,_0x42cea1)=>{var _0x4bc7d5=_0x75e716;_0x4df123[_0x42cea1][_0x4bc7d5(0x20b)]=_0x454f6e;}),_0x52c3e5[_0x75e716(0x1a5)]((_0x57b45a,_0x58e3e4)=>{var _0x31661f=_0x75e716;_0x4df123[_0x58e3e4]['quantity']=Math[_0x31661f(0x1c5)](_0x57b45a);}),_0x5ee0d1[_0x75e716(0x1a5)]((_0xe2ffab,_0x75aebb)=>{var _0x7dda11=_0x75e716;_0x4df123[_0x75aebb][_0x7dda11(0x18a)]=_0xe2ffab;}),_0x252bb1[_0x75e716(0x1a5)]((_0x2a35f3,_0x2ae73b)=>{var _0x3d2117=_0x75e716;_0x4df123[_0x2ae73b][_0x3d2117(0x1e2)]=_0x2a35f3;}),_0x5ae7b5[_0x75e716(0x1a5)]((_0x2d5a7d,_0x4cd6df)=>{_0x4df123[_0x4cd6df]['id_transaction_from']=_0x2d5a7d;}),_0x476aab[_0x75e716(0x1a5)]((_0x2493cb,_0x14a406)=>{_0x4df123[_0x14a406]['primary_code']=_0x2493cb;}),_0x591c62[_0x75e716(0x1a5)]((_0x545c47,_0x269cda)=>{_0x4df123[_0x269cda]['secondary_code']=_0x545c47;}),_0x595c8d[_0x75e716(0x1a5)]((_0x530d54,_0x1b6f56)=>{var _0x598a7c=_0x75e716;_0x4df123[_0x1b6f56][_0x598a7c(0x1a8)]=_0x530d54;}),_0xf682ad['forEach']((_0x4fc4a0,_0x4757cf)=>{var _0x1f3751=_0x75e716;_0x4df123[_0x4757cf][_0x1f3751(0x1f9)]=_0x4fc4a0;}),_0x51499a['forEach']((_0x73c484,_0x4f14a9)=>{var _0x4d3f13=_0x75e716;_0x4df123[_0x4f14a9][_0x4d3f13(0x209)]=_0x73c484;}),_0x47fb70[_0x75e716(0x1a5)]((_0x78f6f6,_0x87d054)=>{var _0x35fb6c=_0x75e716;_0x4df123[_0x87d054][_0x35fb6c(0x1fc)]=_0x78f6f6;}),_0x1aac3b['forEach']((_0x290389,_0x569e33)=>{_0x4df123[_0x569e33]['secondary_unit']=_0x290389;}),_0x46c492[_0x75e716(0x1a5)]((_0x1f9c1a,_0x10040e)=>{var _0x42ea29=_0x75e716;_0x4df123[_0x10040e][_0x42ea29(0x1fd)]=_0x1f9c1a;}),_0x187cad[_0x75e716(0x1a5)]((_0x233811,_0x518ef0)=>{_0x4df123[_0x518ef0]['expiry_date']=_0x233811;}),_0x4d7178['forEach']((_0x20a9f4,_0xe28a79)=>{var _0x591807=_0x75e716;_0x4df123[_0xe28a79][_0x591807(0x1a6)]=_0x20a9f4;}),_0xa3dd8f[_0x75e716(0x1a5)]((_0x179cd1,_0x4b04fe)=>{var _0x2e95e5=_0x75e716;_0x4df123[_0x4b04fe][_0x2e95e5(0x1a4)]=_0x179cd1;}),_0x3945f6[_0x75e716(0x1a5)]((_0x19df5f,_0xaea4a4)=>{_0x4df123[_0xaea4a4]['prod_cat']=_0x19df5f;}),_0x4cf32[_0x75e716(0x1a5)]((_0x14f2ce,_0x327bc0)=>{var _0x1578a1=_0x75e716;_0x4df123[_0x327bc0][_0x1578a1(0x226)]=_0x14f2ce;}),_0x473b17['forEach']((_0x33f202,_0x51fd8f)=>{var _0xc84317=_0x75e716;_0x4df123[_0x51fd8f][_0xc84317(0x201)]=_0x33f202,_0x4df123[_0x51fd8f][_0xc84317(0x1e3)]=_0x330fc2;});const _0x1d28e3=new invoice_for_outgoing();await _0x1d28e3[_0x75e716(0x192)](),_0x473b17[_0x75e716(0x1a5)]((_0x5014c7,_0x113376)=>{var _0xd1432c=_0x75e716;_0x4df123[_0x113376][_0xd1432c(0x207)]=_0xd1432c(0x1f4)+_0x1d28e3[_0xd1432c(0x1be)]['toString']()[_0xd1432c(0x1db)](0x8,'0');});const _0x45d2b1=_0x4df123[_0x75e716(0x1f7)](_0x1b1acf=>_0x1b1acf[_0x75e716(0x1cf)]!=='0'&&_0x1b1acf['quantity']!==''),_0x21dc6a=new sales_finished({'invoice':'OUT-'+_0x1d28e3['invoice_init'][_0x75e716(0x1ef)]()[_0x75e716(0x1db)](0x8,'0'),'date':_0x330fc2,'warehouse_name':_0x477807,'sale_product':_0x45d2b1,'note':_0x44ddaa,'SCRN':_0x2178d0,'finalize':_0x75e716(0x1e6),'ReqBy':_0x358322,'dateofreq':_0x11a51b,'PO_number':_0xc189da,'typeservicesData':_0x1e1542,'typevehicle':_0x3312bb,'destination':_0x250263,'deliverydate':_0x6fec3c,'driver':_0x3235c9,'plate':_0x59b7f4,'van':_0x26eebc,'DRSI':_0x14c25f,'TSU':_0x4195bb,'TFU':_0x2d609b}),_0x45e48f=await _0x21dc6a[_0x75e716(0x192)](),_0x45814a=new Date(),_0x420d82=_0x45814a[_0x75e716(0x219)]();_0x51b57d[_0x75e716(0x1f5)]=_0x231ff4,_0x51b57d[_0x75e716(0x186)]=_0x420d82,_0x51b57d[_0x75e716(0x1b3)]=_0x75e716(0x1f4)+_0x1d28e3[_0x75e716(0x1be)]['toString']()[_0x75e716(0x1db)](0x8,'0'),_0x51b57d['outgoing_id']=_0x45e48f[_0x75e716(0x1cc)],await _0x51b57d[_0x75e716(0x192)]();const _0x20b644=await master_shop[_0x75e716(0x1f1)](),_0x36a2cf=await email_settings[_0x75e716(0x213)]();let _0x1f35fc=nodemailer[_0x75e716(0x1c1)]({'host':_0x36a2cf[_0x75e716(0x1bc)],'port':Number(_0x36a2cf[_0x75e716(0x1e0)]),'secure':![],'auth':{'user':_0x36a2cf['email'],'pass':_0x36a2cf[_0x75e716(0x1e1)]}});const _0x2d9b80=_0x44d41b[_0x75e716(0x1df)]+_0x75e716(0x1bf)+_0x44d41b[_0x75e716(0x220)][_0x75e716(0x1bc)];var _0x31eeb1=_0x51b57d['sale_product'],_0x1e1be8='',_0x52ffc2,_0x25150f=0x0;for(_0x52ffc2 in _0x31eeb1){_0x1e1be8+='<tr>'+_0x75e716(0x183)+_0x31eeb1[_0x52ffc2][_0x75e716(0x1ff)]+_0x75e716(0x21c)+_0x75e716(0x183)+_0x31eeb1[_0x52ffc2]['product_code']+_0x75e716(0x21c)+_0x75e716(0x183)+_0x31eeb1[_0x52ffc2][_0x75e716(0x1cf)]+_0x75e716(0x21c)+_0x75e716(0x183)+_0x31eeb1[_0x52ffc2]['unit']+_0x75e716(0x21c)+_0x75e716(0x19a),_0x25150f+=parseInt(_0x31eeb1[_0x52ffc2][_0x75e716(0x1cf)]);}let _0x5af595={'from':_0x36a2cf['email'],'to':_0x75e716(0x193),'subject':_0x75e716(0x18b),'attachments':[{'filename':_0x75e716(0x225),'path':__dirname+_0x75e716(0x1ae)+_0x75e716(0x1c0)+_0x20b644[0x0][_0x75e716(0x1bd)],'cid':'logo'}],'html':_0x75e716(0x1aa)+_0x75e716(0x196)+_0x75e716(0x1fb)+'</head><body>'+_0x75e716(0x1ca)+_0x75e716(0x1dd)+_0x75e716(0x1ca)+_0x75e716(0x1d0)+_0x75e716(0x20a)+_0x75e716(0x1ca)+_0x75e716(0x1d1)+_0x75e716(0x20a)+_0x75e716(0x20a)+_0x75e716(0x1f8)+_0x75e716(0x1ca)+_0x75e716(0x20a)+_0x75e716(0x1ca)+_0x75e716(0x1cb)+_0x75e716(0x20a)+_0x75e716(0x1ca)+_0x75e716(0x215)+_0x51b57d['invoice']+_0x75e716(0x185)+'<span>\x20Request\x20Date:\x20<b>'+_0x51b57d[_0x75e716(0x222)]+'</b></span>\x20<br><br>'+_0x75e716(0x20a)+'<table\x20style=\x22width:\x20100%\x20!important;\x22>'+_0x75e716(0x1b0)+_0x75e716(0x190)+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Name\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Code\x20</th>'+'<th\x20style=\x22border:\x201px\x20solid\x20black;\x22>\x20Product\x20Quantity\x20</th>'+_0x75e716(0x21f)+'</tr>'+_0x75e716(0x20e)+_0x75e716(0x1c7)+'\x20'+_0x1e1be8+'\x20'+_0x75e716(0x20f)+_0x75e716(0x21d)+'<div>'+_0x75e716(0x204)+_0x75e716(0x1fe)+'<br><br><br>'+_0x75e716(0x20a)+_0x75e716(0x1ca)+_0x75e716(0x195)+_0x75e716(0x188)+'</div>'+_0x75e716(0x20a)+_0x75e716(0x217)+'</body></html>'};_0x1f35fc[_0x75e716(0x206)](_0x5af595,function(_0x14b245,_0x582de3){var _0x415a1d=_0x75e716;_0x14b245?(console[_0x415a1d(0x19d)](_0x14b245),console[_0x415a1d(0x19d)]('Error\x20Occurs')):console[_0x415a1d(0x19d)](_0x415a1d(0x1c8));}),_0x44d41b[_0x75e716(0x1b7)](_0x75e716(0x221),_0x75e716(0x1eb)),_0x41da53[_0x75e716(0x1ee)](_0x75e716(0x224)+_0x45e48f[_0x75e716(0x1cc)]),_0x41da53[_0x75e716(0x19f)](_0x45d2b1);return;}catch(_0x24a1c4){}}),router[a0_0x49e96f(0x1ad)](a0_0x49e96f(0x1a9),auth,async(_0x202266,_0x19cb6c)=>{var _0x9cb7f2=a0_0x49e96f;try{const _0x1506ad=await master_shop['find'](),_0x2be10d=_0x202266[_0x9cb7f2(0x1ba)],_0xd9bae=await profile[_0x9cb7f2(0x213)]({'email':_0x2be10d[_0x9cb7f2(0x1a0)]}),_0x1ea756=await staff[_0x9cb7f2(0x213)]({'email':_0x2be10d[_0x9cb7f2(0x1a0)]}),_0x1972b6=await customer[_0x9cb7f2(0x1f1)]({'agent_id':_0x1ea756[_0x9cb7f2(0x1cc)]}),_0x1dc971=mongoose[_0x9cb7f2(0x1e8)][_0x9cb7f2(0x1ab)],_0x27d2be=_0x202266['params']['id'],_0x1c658e=await sales_order[_0x9cb7f2(0x1a2)](_0x27d2be),_0x4e97e2=await sales_order['aggregate']([{'$match':{'_id':_0x1dc971(_0x27d2be)}},{'$addFields':{'accounting_account_id':{'$toObjectId':_0x9cb7f2(0x205)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x9cb7f2(0x208)}}},{'$lookup':{'from':_0x9cb7f2(0x227),'localField':_0x9cb7f2(0x189),'foreignField':_0x9cb7f2(0x1cc),'as':_0x9cb7f2(0x214)}},{'$unwind':_0x9cb7f2(0x1ac)},{'$lookup':{'from':_0x9cb7f2(0x227),'localField':_0x9cb7f2(0x21e),'foreignField':_0x9cb7f2(0x1cc),'as':_0x9cb7f2(0x18e)}},{'$unwind':'$wms_data'}]);if(_0x1506ad[0x0][_0x9cb7f2(0x1d3)]==_0x9cb7f2(0x21a))var _0x1b5c83=users[_0x9cb7f2(0x18f)];else{if(_0x1506ad[0x0][_0x9cb7f2(0x1d3)]=='Hindi')var _0x1b5c83=users[_0x9cb7f2(0x198)];else{if(_0x1506ad[0x0]['language']=='German')var _0x1b5c83=users[_0x9cb7f2(0x1d8)];else{if(_0x1506ad[0x0][_0x9cb7f2(0x1d3)]==_0x9cb7f2(0x1e5))var _0x1b5c83=users[_0x9cb7f2(0x1e5)];else{if(_0x1506ad[0x0][_0x9cb7f2(0x1d3)]==_0x9cb7f2(0x1da))var _0x1b5c83=users[_0x9cb7f2(0x1da)];else{if(_0x1506ad[0x0][_0x9cb7f2(0x1d3)]==_0x9cb7f2(0x1af))var _0x1b5c83=users[_0x9cb7f2(0x1e9)];else{if(_0x1506ad[0x0][_0x9cb7f2(0x1d3)]==_0x9cb7f2(0x19c))var _0x1b5c83=users['Chinese'];else{if(_0x1506ad[0x0][_0x9cb7f2(0x1d3)]=='Arabic\x20(ae)')var _0x1b5c83=users[_0x9cb7f2(0x1de)];}}}}}}}_0x19cb6c['render'](_0x9cb7f2(0x1ce),{'success':_0x202266[_0x9cb7f2(0x1b7)](_0x9cb7f2(0x221)),'errors':_0x202266[_0x9cb7f2(0x1b7)](_0x9cb7f2(0x1d7)),'master_shop':_0x1506ad,'profile':_0xd9bae,'role':_0x2be10d,'language':_0x1b5c83,'customer':_0x1972b6,'sales_sa':_0x1c658e,'approvers':_0x4e97e2[0x0],'the_id':_0x27d2be});}catch(_0x12ec27){console[_0x9cb7f2(0x19d)](_0x12ec27);}}),router[a0_0x49e96f(0x223)](a0_0x49e96f(0x1ea),auth,async(_0x55744a,_0x11cf71)=>{var _0x4cc122=a0_0x49e96f;try{const {warehouse_name:_0x34f046,product_code:_0x22d62f}=_0x55744a[_0x4cc122(0x1f0)],_0xca9217=await warehouse['aggregate']([{'$match':{'name':_0x34f046}},{'$unwind':'$product_details'},{'$match':{'product_details.product_code':_0x22d62f}},{'$group':{'_id':{'room':'$room','_id':'$_id'}}}]);_0x11cf71[_0x4cc122(0x19f)](_0xca9217);}catch(_0x17efcf){}}),router[a0_0x49e96f(0x223)](a0_0x49e96f(0x1b6),auth,async(_0x24afb8,_0x5a25a1)=>{var _0x48c321=a0_0x49e96f;try{const {warehouse_name:_0x13586c,product_code:_0x1e67b9,room_name:_0x1f9701}=_0x24afb8[_0x48c321(0x1f0)];console['log'](_0x24afb8[_0x48c321(0x1f0)]);const _0x52807b=await warehouse[_0x48c321(0x1c3)]([{'$match':{'name':_0x13586c,'room':_0x1f9701}},{'$unwind':_0x48c321(0x211)},{'$match':{'product_details.product_code':_0x1e67b9}},{'$group':{'_id':{'main_id':_0x48c321(0x228),'detl_id':_0x48c321(0x19b),'product_name':'$product_details.product_name','product_code':_0x48c321(0x1c2),'level':'$product_details.level','bay':_0x48c321(0x1a7),'stocks':_0x48c321(0x210)}}}]);_0x5a25a1[_0x48c321(0x19f)](_0x52807b);}catch(_0x51ac88){}}),router[a0_0x49e96f(0x1ad)](a0_0x49e96f(0x1d4),auth,async(_0x34fb06,_0x6d6957)=>{var _0x151126=a0_0x49e96f;try{const {sttaff_id:_0x517480,email:_0x585b9f,warehouse:_0x474973}=_0x34fb06[_0x151126(0x1ba)],_0x3498a0=await master_shop[_0x151126(0x1f1)](),_0x1b2646=_0x34fb06[_0x151126(0x1ba)],_0x1b88e0=await profile[_0x151126(0x213)]({'email':_0x1b2646[_0x151126(0x1a0)]}),_0x33c021=await sales_order['find']({'wms_account_id':_0x517480});if(_0x3498a0[0x0][_0x151126(0x1d3)]=='English\x20(US)')var _0x2a9b9f=users[_0x151126(0x18f)];else{if(_0x3498a0[0x0][_0x151126(0x1d3)]==_0x151126(0x198))var _0x2a9b9f=users[_0x151126(0x198)];else{if(_0x3498a0[0x0][_0x151126(0x1d3)]==_0x151126(0x1d8))var _0x2a9b9f=users['German'];else{if(_0x3498a0[0x0]['language']==_0x151126(0x1e5))var _0x2a9b9f=users['Spanish'];else{if(_0x3498a0[0x0][_0x151126(0x1d3)]==_0x151126(0x1da))var _0x2a9b9f=users[_0x151126(0x1da)];else{if(_0x3498a0[0x0][_0x151126(0x1d3)]==_0x151126(0x1af))var _0x2a9b9f=users[_0x151126(0x1e9)];else{if(_0x3498a0[0x0][_0x151126(0x1d3)]=='Chinese')var _0x2a9b9f=users[_0x151126(0x19c)];else{if(_0x3498a0[0x0][_0x151126(0x1d3)]=='Arabic\x20(ae)')var _0x2a9b9f=users[_0x151126(0x1de)];}}}}}}}_0x6d6957['render'](_0x151126(0x1b9),{'success':_0x34fb06['flash']('success'),'errors':_0x34fb06[_0x151126(0x1b7)](_0x151126(0x1d7)),'master_shop':_0x3498a0,'profile':_0x1b88e0,'role':_0x1b2646,'language':_0x2a9b9f,'sales_order':_0x33c021});}catch(_0x12a822){}}),module[a0_0x49e96f(0x19e)]=router;