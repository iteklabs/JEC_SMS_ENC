const a0_0x358bee=a0_0x53d2;(function(_0x181fb4,_0x5b19c8){const _0x312bb3=a0_0x53d2,_0x95a313=_0x181fb4();while(!![]){try{const _0x4727de=parseInt(_0x312bb3(0x1a2))/0x1+parseInt(_0x312bb3(0x1bc))/0x2+parseInt(_0x312bb3(0x1aa))/0x3+-parseInt(_0x312bb3(0x1b4))/0x4+-parseInt(_0x312bb3(0x1b6))/0x5+parseInt(_0x312bb3(0x1d5))/0x6+-parseInt(_0x312bb3(0x1c7))/0x7;if(_0x4727de===_0x5b19c8)break;else _0x95a313['push'](_0x95a313['shift']());}catch(_0x5aa1e8){_0x95a313['push'](_0x95a313['shift']());}}}(a0_0xb16b,0xaf85e));function a0_0xb16b(){const _0x9db48f=['../public/language/languages.json','so_approver_add','$head_id_staff','params','483973rZhpKh','Spanish','name_accounting','aggregate','Router','/preview/:id','body','language','3584397xLDfVu','view_so_approvers','account_data','../models/all_models','$name','staffs','map','staff_id','Arabic','_id','2609752thXahA','flash','5876225zmVXdR','Chinese','get','$warehouse_staff_id','exports','find','1405406VaCJwa','German','accounting_account_id','errors','Arabic\x20(ae)','Hindi','English\x20(US)','$account_data','Portuguese\x20(BR)','render','email','5289102ziiIqb','express','name','json','string','English','French','/add/','success','user','wms_account_id','findOne','/setup','post','5524416HkGaMX','Portuguese','../middleware/auth','findById','acc','/add','forEach','/get_sales_data'];a0_0xb16b=function(){return _0x9db48f;};return a0_0xb16b();}const express=require(a0_0x358bee(0x1c8)),app=express(),router=express[a0_0x358bee(0x1a6)](),auth=require(a0_0x358bee(0x1d7)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order,approver_acct,warehouse}=require(a0_0x358bee(0x1ad)),users=require(a0_0x358bee(0x19e));function a0_0x53d2(_0x3e17de,_0x51f93c){const _0xb16b6a=a0_0xb16b();return a0_0x53d2=function(_0x53d21c,_0x5ac4c2){_0x53d21c=_0x53d21c-0x19e;let _0x16bade=_0xb16b6a[_0x53d21c];return _0x16bade;},a0_0x53d2(_0x3e17de,_0x51f93c);}router[a0_0x358bee(0x1b8)](a0_0x358bee(0x1d3),auth,async(_0x14cb2e,_0x41e8e1)=>{const _0x1fe73d=a0_0x358bee;try{const _0x47124d=_0x14cb2e[_0x1fe73d(0x1d0)],_0x5413c8=await master_shop['find'](),_0x3cac28=await profile['findOne']({'email':_0x47124d[_0x1fe73d(0x1c6)]}),_0x212001=await approver_acct[_0x1fe73d(0x1a5)]([{'$addFields':{'accounting_account_id':{'$toObjectId':_0x1fe73d(0x1a0)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x1fe73d(0x1b9)}}},{'$lookup':{'from':_0x1fe73d(0x1af),'localField':_0x1fe73d(0x1be),'foreignField':_0x1fe73d(0x1b3),'as':_0x1fe73d(0x1ac)}},{'$unwind':_0x1fe73d(0x1c3)},{'$lookup':{'from':'staffs','localField':_0x1fe73d(0x1d1),'foreignField':_0x1fe73d(0x1b3),'as':'wms_data'}},{'$unwind':'$wms_data'}]);if(_0x5413c8[0x0][_0x1fe73d(0x1a9)]==_0x1fe73d(0x1c2))var _0x349344=users[_0x1fe73d(0x1cc)];else{if(_0x5413c8[0x0][_0x1fe73d(0x1a9)]==_0x1fe73d(0x1c1))var _0x349344=users[_0x1fe73d(0x1c1)];else{if(_0x5413c8[0x0][_0x1fe73d(0x1a9)]==_0x1fe73d(0x1bd))var _0x349344=users[_0x1fe73d(0x1bd)];else{if(_0x5413c8[0x0][_0x1fe73d(0x1a9)]==_0x1fe73d(0x1a3))var _0x349344=users['Spanish'];else{if(_0x5413c8[0x0][_0x1fe73d(0x1a9)]==_0x1fe73d(0x1cd))var _0x349344=users[_0x1fe73d(0x1cd)];else{if(_0x5413c8[0x0][_0x1fe73d(0x1a9)]==_0x1fe73d(0x1c4))var _0x349344=users['Portuguese'];else{if(_0x5413c8[0x0][_0x1fe73d(0x1a9)]==_0x1fe73d(0x1b7))var _0x349344=users['Chinese'];else{if(_0x5413c8[0x0]['language']==_0x1fe73d(0x1c0))var _0x349344=users[_0x1fe73d(0x1b2)];}}}}}}}_0x41e8e1['render']('so_approver_all',{'success':_0x14cb2e[_0x1fe73d(0x1b5)]('success'),'errors':_0x14cb2e[_0x1fe73d(0x1b5)](_0x1fe73d(0x1bf)),'role':_0x47124d,'profile':_0x3cac28,'master_shop':_0x5413c8,'language':_0x349344,'data':_0x212001});}catch(_0x3370a9){}}),router['get'](a0_0x358bee(0x1da),auth,async(_0x52f189,_0x5db08f)=>{const _0x54c4e4=a0_0x358bee;try{const _0x5bb165=_0x52f189[_0x54c4e4(0x1d0)],_0x1d6427=await master_shop[_0x54c4e4(0x1bb)](),_0x51730a=await profile[_0x54c4e4(0x1d2)]({'email':_0x5bb165[_0x54c4e4(0x1c6)]}),_0x104287=await staff[_0x54c4e4(0x1bb)]({'account_category':_0x54c4e4(0x1d9)}),_0x2ac784=await staff['find']({'account_category':'wm'}),_0x2c991d=await staff['find']({'account_category':'sa'}),_0x5283c=await warehouse['aggregate']([{'$group':{'_id':_0x54c4e4(0x1ae)}}]);if(_0x1d6427[0x0][_0x54c4e4(0x1a9)]==_0x54c4e4(0x1c2))var _0x232ae8=users[_0x54c4e4(0x1cc)];else{if(_0x1d6427[0x0][_0x54c4e4(0x1a9)]=='Hindi')var _0x232ae8=users[_0x54c4e4(0x1c1)];else{if(_0x1d6427[0x0][_0x54c4e4(0x1a9)]==_0x54c4e4(0x1bd))var _0x232ae8=users[_0x54c4e4(0x1bd)];else{if(_0x1d6427[0x0][_0x54c4e4(0x1a9)]==_0x54c4e4(0x1a3))var _0x232ae8=users[_0x54c4e4(0x1a3)];else{if(_0x1d6427[0x0]['language']==_0x54c4e4(0x1cd))var _0x232ae8=users[_0x54c4e4(0x1cd)];else{if(_0x1d6427[0x0][_0x54c4e4(0x1a9)]==_0x54c4e4(0x1c4))var _0x232ae8=users['Portuguese'];else{if(_0x1d6427[0x0][_0x54c4e4(0x1a9)]=='Chinese')var _0x232ae8=users[_0x54c4e4(0x1b7)];else{if(_0x1d6427[0x0][_0x54c4e4(0x1a9)]==_0x54c4e4(0x1c0))var _0x232ae8=users[_0x54c4e4(0x1b2)];}}}}}}}_0x5db08f[_0x54c4e4(0x1c5)](_0x54c4e4(0x19f),{'success':_0x52f189[_0x54c4e4(0x1b5)](_0x54c4e4(0x1cf)),'errors':_0x52f189[_0x54c4e4(0x1b5)]('errors'),'role':_0x5bb165,'profile':_0x51730a,'master_shop':_0x1d6427,'language':_0x232ae8,'accounting':_0x104287,'warehouse_acct':_0x2ac784,'sales_acct':_0x2c991d,'warehouse_loc':_0x5283c});}catch(_0x3bbe9d){}}),router[a0_0x358bee(0x1d4)](a0_0x358bee(0x1ce),auth,async(_0x29275d,_0x49e555)=>{const _0x539a24=a0_0x358bee;try{const {accounting_account_id:_0x368ca8,warehouse_account_id:_0x5cc55b,staff_id:_0x409676,warehouse_loc:_0x5ef255}=_0x29275d['body'];if(typeof _0x409676==_0x539a24(0x1cb))var _0x269b53=[_0x29275d[_0x539a24(0x1a8)][_0x539a24(0x1b1)]],_0x324f72=[_0x29275d[_0x539a24(0x1a8)][_0x539a24(0x1a4)]];else var _0x269b53=[..._0x29275d[_0x539a24(0x1a8)][_0x539a24(0x1b1)]],_0x324f72=[..._0x29275d[_0x539a24(0x1a8)][_0x539a24(0x1a4)]];const _0x5af2e5=_0x269b53[_0x539a24(0x1b0)](_0x254a8a=>{return _0x254a8a={'id_member':_0x254a8a};});_0x324f72[_0x539a24(0x1db)]((_0x3e56e1,_0x4f70d2)=>{const _0x1f9938=_0x539a24;_0x5af2e5[_0x4f70d2][_0x1f9938(0x1c9)]=_0x3e56e1;});const _0x468a01=new approver_acct({'head_id_staff':_0x368ca8,'warehouse_staff_id':_0x5cc55b,'warehouse_name':_0x5ef255,'members':_0x5af2e5}),_0x1d2eef=await _0x468a01['save']();_0x29275d[_0x539a24(0x1b5)](_0x539a24(0x1cf),'Approver\x20Add\x20successfully'),_0x49e555['redirect']('/so_approvers/preview/'+_0x1d2eef[_0x539a24(0x1b3)]);}catch(_0x3c0629){}}),router['post'](a0_0x358bee(0x1dc),auth,async(_0x4199ea,_0x443160)=>{const _0x443b79=a0_0x358bee;try{const {id_staff:_0x50c685}=_0x4199ea['body'],_0x3e280b=await staff[_0x443b79(0x1d8)](_0x50c685);_0x443160[_0x443b79(0x1ca)](_0x3e280b);}catch(_0x591dbf){}}),router[a0_0x358bee(0x1b8)](a0_0x358bee(0x1a7),auth,async(_0x13ce6f,_0x304679)=>{const _0x2f9e86=a0_0x358bee;try{const _0x26277e=_0x13ce6f[_0x2f9e86(0x1d0)],_0x2ba14c=_0x13ce6f[_0x2f9e86(0x1a1)]['id'],_0x216fa0=await master_shop[_0x2f9e86(0x1bb)](),_0x323ddd=await profile[_0x2f9e86(0x1d2)]({'email':_0x26277e[_0x2f9e86(0x1c6)]}),_0x5a8e66=await staff[_0x2f9e86(0x1bb)]({'account_category':'acc'}),_0x4d049d=await staff[_0x2f9e86(0x1bb)]({'account_category':'wm'}),_0x30b5f9=await staff[_0x2f9e86(0x1bb)]({'account_category':'sa'}),_0x47309c=await warehouse['aggregate']([{'$group':{'_id':'$name'}}]),_0x3130d5=await approver_acct[_0x2f9e86(0x1d8)](_0x2ba14c);if(_0x216fa0[0x0]['language']=='English\x20(US)')var _0xdb1536=users[_0x2f9e86(0x1cc)];else{if(_0x216fa0[0x0]['language']==_0x2f9e86(0x1c1))var _0xdb1536=users[_0x2f9e86(0x1c1)];else{if(_0x216fa0[0x0][_0x2f9e86(0x1a9)]==_0x2f9e86(0x1bd))var _0xdb1536=users[_0x2f9e86(0x1bd)];else{if(_0x216fa0[0x0][_0x2f9e86(0x1a9)]==_0x2f9e86(0x1a3))var _0xdb1536=users[_0x2f9e86(0x1a3)];else{if(_0x216fa0[0x0]['language']==_0x2f9e86(0x1cd))var _0xdb1536=users[_0x2f9e86(0x1cd)];else{if(_0x216fa0[0x0]['language']==_0x2f9e86(0x1c4))var _0xdb1536=users[_0x2f9e86(0x1d6)];else{if(_0x216fa0[0x0]['language']==_0x2f9e86(0x1b7))var _0xdb1536=users[_0x2f9e86(0x1b7)];else{if(_0x216fa0[0x0]['language']==_0x2f9e86(0x1c0))var _0xdb1536=users['Arabic'];}}}}}}}_0x304679[_0x2f9e86(0x1c5)](_0x2f9e86(0x1ab),{'success':_0x13ce6f[_0x2f9e86(0x1b5)]('success'),'errors':_0x13ce6f['flash'](_0x2f9e86(0x1bf)),'role':_0x26277e,'profile':_0x323ddd,'master_shop':_0x216fa0,'language':_0xdb1536,'accounting':_0x5a8e66,'warehouse_acct':_0x4d049d,'sales_acct':_0x30b5f9,'warehouse_loc':_0x47309c,'data':_0x3130d5});}catch(_0xb8570e){}}),module[a0_0x358bee(0x1ba)]=router;