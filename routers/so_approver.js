const a0_0x24b6a8=a0_0x2ee3;(function(_0x22e2a1,_0x5a693b){const _0x841189=a0_0x2ee3,_0x2d8244=_0x22e2a1();while(!![]){try{const _0x30243e=-parseInt(_0x841189(0xf9))/0x1+parseInt(_0x841189(0x10a))/0x2+-parseInt(_0x841189(0x10f))/0x3+parseInt(_0x841189(0xe9))/0x4+parseInt(_0x841189(0xea))/0x5*(parseInt(_0x841189(0xf8))/0x6)+-parseInt(_0x841189(0x103))/0x7+parseInt(_0x841189(0xf0))/0x8*(-parseInt(_0x841189(0xf3))/0x9);if(_0x30243e===_0x5a693b)break;else _0x2d8244['push'](_0x2d8244['shift']());}catch(_0x57d684){_0x2d8244['push'](_0x2d8244['shift']());}}}(a0_0x2a28,0x44838));const express=require('express'),app=express(),router=express[a0_0x24b6a8(0xfd)](),auth=require(a0_0x24b6a8(0x10b)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order,approver_acct,warehouse}=require('../models/all_models'),users=require(a0_0x24b6a8(0x118));function a0_0x2a28(){const _0x38cd5c=['/setup','flash','Arabic','122224phUsSy','Hindi','_id','171EjPyqp','aggregate','save','Portuguese','French','643026MWrJMa','254198SDQlcy','accounting_account_id','user','so_approver_all','Router','$head_id_staff','render','Arabic\x20(ae)','get','/preview/:id','291760SqrBtw','post','/so_approvers/preview/','findById','find','name_accounting','Portuguese\x20(BR)','301338YzuXAm','../middleware/auth','Spanish','language','forEach','72954lEYkFu','exports','/add','map','findOne','staffs','errors','view_so_approvers','acc','../public/language/languages.json','Chinese','wms_account_id','name','email','so_approver_add','body','string','$name','account_data','$wms_data','redirect','German','success','English\x20(US)','2104396DzYcgi','10efEugT','json','English'];a0_0x2a28=function(){return _0x38cd5c;};return a0_0x2a28();}function a0_0x2ee3(_0x183b0c,_0x456b52){const _0x2a28e4=a0_0x2a28();return a0_0x2ee3=function(_0x2ee3fc,_0x35e00d){_0x2ee3fc=_0x2ee3fc-0xdb;let _0x3db5e0=_0x2a28e4[_0x2ee3fc];return _0x3db5e0;},a0_0x2ee3(_0x183b0c,_0x456b52);}router['get'](a0_0x24b6a8(0xed),auth,async(_0x54f074,_0x48c1e7)=>{const _0x2e536e=a0_0x24b6a8;try{const _0x4892cc=_0x54f074[_0x2e536e(0xfb)],_0x40ccba=await master_shop[_0x2e536e(0x107)](),_0x40402b=await profile[_0x2e536e(0x113)]({'email':_0x4892cc['email']}),_0x4897aa=await approver_acct[_0x2e536e(0xf4)]([{'$addFields':{'accounting_account_id':{'$toObjectId':_0x2e536e(0xfe)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$warehouse_staff_id'}}},{'$lookup':{'from':_0x2e536e(0x114),'localField':_0x2e536e(0xfa),'foreignField':_0x2e536e(0xf2),'as':_0x2e536e(0xe3)}},{'$unwind':'$account_data'},{'$lookup':{'from':_0x2e536e(0x114),'localField':_0x2e536e(0xdc),'foreignField':_0x2e536e(0xf2),'as':'wms_data'}},{'$unwind':_0x2e536e(0xe4)}]);if(_0x40ccba[0x0][_0x2e536e(0x10d)]==_0x2e536e(0xe8))var _0x13b0a0=users[_0x2e536e(0xec)];else{if(_0x40ccba[0x0]['language']=='Hindi')var _0x13b0a0=users['Hindi'];else{if(_0x40ccba[0x0][_0x2e536e(0x10d)]=='German')var _0x13b0a0=users[_0x2e536e(0xe6)];else{if(_0x40ccba[0x0][_0x2e536e(0x10d)]==_0x2e536e(0x10c))var _0x13b0a0=users[_0x2e536e(0x10c)];else{if(_0x40ccba[0x0]['language']==_0x2e536e(0xf7))var _0x13b0a0=users[_0x2e536e(0xf7)];else{if(_0x40ccba[0x0][_0x2e536e(0x10d)]==_0x2e536e(0x109))var _0x13b0a0=users['Portuguese'];else{if(_0x40ccba[0x0][_0x2e536e(0x10d)]==_0x2e536e(0xdb))var _0x13b0a0=users[_0x2e536e(0xdb)];else{if(_0x40ccba[0x0][_0x2e536e(0x10d)]==_0x2e536e(0x100))var _0x13b0a0=users[_0x2e536e(0xef)];}}}}}}}_0x48c1e7[_0x2e536e(0xff)](_0x2e536e(0xfc),{'success':_0x54f074[_0x2e536e(0xee)](_0x2e536e(0xe7)),'errors':_0x54f074[_0x2e536e(0xee)](_0x2e536e(0x115)),'role':_0x4892cc,'profile':_0x40402b,'master_shop':_0x40ccba,'language':_0x13b0a0,'data':_0x4897aa});}catch(_0x2f6bc7){}}),router[a0_0x24b6a8(0x101)](a0_0x24b6a8(0x111),auth,async(_0x526624,_0xc29b6)=>{const _0x53ae68=a0_0x24b6a8;try{const _0x41d565=_0x526624[_0x53ae68(0xfb)],_0xcf2768=await master_shop['find'](),_0x27d2a5=await profile[_0x53ae68(0x113)]({'email':_0x41d565[_0x53ae68(0xde)]}),_0x4e6f71=await staff[_0x53ae68(0x107)]({'account_category':_0x53ae68(0x117)}),_0x21f3b3=await staff[_0x53ae68(0x107)]({'account_category':'wm'}),_0x2aa257=await staff[_0x53ae68(0x107)]({'account_category':'sa'}),_0x10d1e6=await warehouse['aggregate']([{'$group':{'_id':_0x53ae68(0xe2)}}]);if(_0xcf2768[0x0][_0x53ae68(0x10d)]==_0x53ae68(0xe8))var _0x22e97d=users[_0x53ae68(0xec)];else{if(_0xcf2768[0x0][_0x53ae68(0x10d)]==_0x53ae68(0xf1))var _0x22e97d=users[_0x53ae68(0xf1)];else{if(_0xcf2768[0x0][_0x53ae68(0x10d)]==_0x53ae68(0xe6))var _0x22e97d=users[_0x53ae68(0xe6)];else{if(_0xcf2768[0x0][_0x53ae68(0x10d)]==_0x53ae68(0x10c))var _0x22e97d=users['Spanish'];else{if(_0xcf2768[0x0][_0x53ae68(0x10d)]==_0x53ae68(0xf7))var _0x22e97d=users['French'];else{if(_0xcf2768[0x0][_0x53ae68(0x10d)]=='Portuguese\x20(BR)')var _0x22e97d=users[_0x53ae68(0xf6)];else{if(_0xcf2768[0x0][_0x53ae68(0x10d)]==_0x53ae68(0xdb))var _0x22e97d=users[_0x53ae68(0xdb)];else{if(_0xcf2768[0x0][_0x53ae68(0x10d)]==_0x53ae68(0x100))var _0x22e97d=users[_0x53ae68(0xef)];}}}}}}}_0xc29b6['render'](_0x53ae68(0xdf),{'success':_0x526624[_0x53ae68(0xee)](_0x53ae68(0xe7)),'errors':_0x526624[_0x53ae68(0xee)](_0x53ae68(0x115)),'role':_0x41d565,'profile':_0x27d2a5,'master_shop':_0xcf2768,'language':_0x22e97d,'accounting':_0x4e6f71,'warehouse_acct':_0x21f3b3,'sales_acct':_0x2aa257,'warehouse_loc':_0x10d1e6});}catch(_0x125849){}}),router[a0_0x24b6a8(0x104)]('/add/',auth,async(_0x5efba5,_0x4c86f1)=>{const _0x1e01c5=a0_0x24b6a8;try{const {accounting_account_id:_0x303db4,warehouse_account_id:_0x5c226c,staff_id:_0x1973d9,warehouse_loc:_0x4bc502}=_0x5efba5[_0x1e01c5(0xe0)];if(typeof _0x1973d9==_0x1e01c5(0xe1))var _0x29aa14=[_0x5efba5['body']['staff_id']],_0x392bca=[_0x5efba5[_0x1e01c5(0xe0)][_0x1e01c5(0x108)]];else var _0x29aa14=[..._0x5efba5[_0x1e01c5(0xe0)]['staff_id']],_0x392bca=[..._0x5efba5[_0x1e01c5(0xe0)][_0x1e01c5(0x108)]];const _0x17e181=_0x29aa14[_0x1e01c5(0x112)](_0x3c9acf=>{return _0x3c9acf={'id_member':_0x3c9acf};});_0x392bca[_0x1e01c5(0x10e)]((_0xd22646,_0x1893f8)=>{const _0x39afc1=_0x1e01c5;_0x17e181[_0x1893f8][_0x39afc1(0xdd)]=_0xd22646;});const _0x343c06=new approver_acct({'head_id_staff':_0x303db4,'warehouse_staff_id':_0x5c226c,'warehouse_name':_0x4bc502,'members':_0x17e181}),_0xcef40e=await _0x343c06[_0x1e01c5(0xf5)]();_0x5efba5[_0x1e01c5(0xee)]('success','Approver\x20Add\x20successfully'),_0x4c86f1[_0x1e01c5(0xe5)](_0x1e01c5(0x105)+_0xcef40e[_0x1e01c5(0xf2)]);}catch(_0x3c3c38){}}),router[a0_0x24b6a8(0x104)]('/get_sales_data',auth,async(_0x1841ea,_0x5d7058)=>{const _0x55df56=a0_0x24b6a8;try{const {id_staff:_0x4cb89c}=_0x1841ea[_0x55df56(0xe0)],_0x3027a4=await staff[_0x55df56(0x106)](_0x4cb89c);_0x5d7058[_0x55df56(0xeb)](_0x3027a4);}catch(_0x3663a2){}}),router[a0_0x24b6a8(0x101)](a0_0x24b6a8(0x102),auth,async(_0x29b931,_0x586852)=>{const _0xe5e47f=a0_0x24b6a8;try{const _0x59c624=_0x29b931[_0xe5e47f(0xfb)],_0x48ee95=_0x29b931['params']['id'],_0x342b45=await master_shop[_0xe5e47f(0x107)](),_0x4418a7=await profile[_0xe5e47f(0x113)]({'email':_0x59c624[_0xe5e47f(0xde)]}),_0x45b845=await staff[_0xe5e47f(0x107)]({'account_category':_0xe5e47f(0x117)}),_0x3a3409=await staff[_0xe5e47f(0x107)]({'account_category':'wm'}),_0x23a79b=await staff[_0xe5e47f(0x107)]({'account_category':'sa'}),_0x19a9ba=await warehouse[_0xe5e47f(0xf4)]([{'$group':{'_id':_0xe5e47f(0xe2)}}]),_0x5bad79=await approver_acct[_0xe5e47f(0x106)](_0x48ee95);if(_0x342b45[0x0][_0xe5e47f(0x10d)]==_0xe5e47f(0xe8))var _0x5bc06e=users[_0xe5e47f(0xec)];else{if(_0x342b45[0x0]['language']==_0xe5e47f(0xf1))var _0x5bc06e=users[_0xe5e47f(0xf1)];else{if(_0x342b45[0x0][_0xe5e47f(0x10d)]=='German')var _0x5bc06e=users[_0xe5e47f(0xe6)];else{if(_0x342b45[0x0][_0xe5e47f(0x10d)]==_0xe5e47f(0x10c))var _0x5bc06e=users[_0xe5e47f(0x10c)];else{if(_0x342b45[0x0]['language']=='French')var _0x5bc06e=users[_0xe5e47f(0xf7)];else{if(_0x342b45[0x0][_0xe5e47f(0x10d)]=='Portuguese\x20(BR)')var _0x5bc06e=users['Portuguese'];else{if(_0x342b45[0x0][_0xe5e47f(0x10d)]==_0xe5e47f(0xdb))var _0x5bc06e=users['Chinese'];else{if(_0x342b45[0x0]['language']==_0xe5e47f(0x100))var _0x5bc06e=users[_0xe5e47f(0xef)];}}}}}}}_0x586852[_0xe5e47f(0xff)](_0xe5e47f(0x116),{'success':_0x29b931['flash'](_0xe5e47f(0xe7)),'errors':_0x29b931['flash']('errors'),'role':_0x59c624,'profile':_0x4418a7,'master_shop':_0x342b45,'language':_0x5bc06e,'accounting':_0x45b845,'warehouse_acct':_0x3a3409,'sales_acct':_0x23a79b,'warehouse_loc':_0x19a9ba,'data':_0x5bad79});}catch(_0x5de6e2){}}),module[a0_0x24b6a8(0x110)]=router;