const a0_0x33aa99=a0_0x2eac;function a0_0x2691(){const _0x47ea2d=['$wms_data','wms_data','_id','find','json','/setup','$account_data','success','findOne','map','5YUZprR','flash','string','393930PxqVeB','English','Chinese','6604902xhMjeP','get','$warehouse_staff_id','2678229rgTwfO','/add/','account_data','body','staffs','1208040cQLPOt','name','Arabic','4000ddpYvD','$name','forEach','1053355yojKSB','so_approver_all','aggregate','French','render','email','357dRRzuY','Router','user','post','acc','/preview/:id','../models/all_models','English\x20(US)','staff_id','/add','Arabic\x20(ae)','wms_account_id','Hindi','German','594GQVhEN','1949396RmMESR','name_accounting','view_so_approvers','errors','so_approver_add','Spanish','params','language','Portuguese\x20(BR)','/get_sales_data','exports','Portuguese'];a0_0x2691=function(){return _0x47ea2d;};return a0_0x2691();}(function(_0x26c43a,_0x42be9c){const _0x2a1db3=a0_0x2eac,_0x4733f2=_0x26c43a();while(!![]){try{const _0x424360=parseInt(_0x2a1db3(0x1e5))/0x1+-parseInt(_0x2a1db3(0x1df))/0x2+-parseInt(_0x2a1db3(0x1da))/0x3+-parseInt(_0x2a1db3(0x1fa))/0x4*(parseInt(_0x2a1db3(0x1d1))/0x5)+-parseInt(_0x2a1db3(0x1d7))/0x6+parseInt(_0x2a1db3(0x1eb))/0x7*(parseInt(_0x2a1db3(0x1e2))/0x8)+-parseInt(_0x2a1db3(0x1f9))/0x9*(-parseInt(_0x2a1db3(0x1d4))/0xa);if(_0x424360===_0x42be9c)break;else _0x4733f2['push'](_0x4733f2['shift']());}catch(_0x583006){_0x4733f2['push'](_0x4733f2['shift']());}}}(a0_0x2691,0x90fc8));const express=require('express'),app=express(),router=express[a0_0x33aa99(0x1ec)](),auth=require('../middleware/auth'),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order,approver_acct,warehouse}=require(a0_0x33aa99(0x1f1)),users=require('../public/language/languages.json');function a0_0x2eac(_0x3372d7,_0xcee168){const _0x2691f8=a0_0x2691();return a0_0x2eac=function(_0x2eacbc,_0x3fd14d){_0x2eacbc=_0x2eacbc-0x1cf;let _0x12595f=_0x2691f8[_0x2eacbc];return _0x12595f;},a0_0x2eac(_0x3372d7,_0xcee168);}router['get'](a0_0x33aa99(0x20b),auth,async(_0x853dc1,_0x5abe17)=>{const _0x419223=a0_0x33aa99;try{const _0x4d28ae=_0x853dc1['user'],_0x2a6200=await master_shop[_0x419223(0x209)](),_0x546b75=await profile[_0x419223(0x1cf)]({'email':_0x4d28ae[_0x419223(0x1ea)]}),_0x18b4c4=await approver_acct[_0x419223(0x1e7)]([{'$addFields':{'accounting_account_id':{'$toObjectId':'$head_id_staff'}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x419223(0x1d9)}}},{'$lookup':{'from':_0x419223(0x1de),'localField':'accounting_account_id','foreignField':_0x419223(0x208),'as':_0x419223(0x1dc)}},{'$unwind':_0x419223(0x20c)},{'$lookup':{'from':_0x419223(0x1de),'localField':_0x419223(0x1f6),'foreignField':'_id','as':_0x419223(0x207)}},{'$unwind':_0x419223(0x206)}]);if(_0x2a6200[0x0][_0x419223(0x201)]==_0x419223(0x1f2))var _0x41f9ee=users[_0x419223(0x1d5)];else{if(_0x2a6200[0x0]['language']==_0x419223(0x1f7))var _0x41f9ee=users['Hindi'];else{if(_0x2a6200[0x0]['language']=='German')var _0x41f9ee=users[_0x419223(0x1f8)];else{if(_0x2a6200[0x0][_0x419223(0x201)]=='Spanish')var _0x41f9ee=users[_0x419223(0x1ff)];else{if(_0x2a6200[0x0]['language']==_0x419223(0x1e8))var _0x41f9ee=users[_0x419223(0x1e8)];else{if(_0x2a6200[0x0][_0x419223(0x201)]==_0x419223(0x202))var _0x41f9ee=users[_0x419223(0x205)];else{if(_0x2a6200[0x0][_0x419223(0x201)]==_0x419223(0x1d6))var _0x41f9ee=users[_0x419223(0x1d6)];else{if(_0x2a6200[0x0][_0x419223(0x201)]==_0x419223(0x1f5))var _0x41f9ee=users[_0x419223(0x1e1)];}}}}}}}_0x5abe17[_0x419223(0x1e9)](_0x419223(0x1e6),{'success':_0x853dc1[_0x419223(0x1d2)](_0x419223(0x20d)),'errors':_0x853dc1[_0x419223(0x1d2)]('errors'),'role':_0x4d28ae,'profile':_0x546b75,'master_shop':_0x2a6200,'language':_0x41f9ee,'data':_0x18b4c4});}catch(_0x2ff45a){}}),router[a0_0x33aa99(0x1d8)](a0_0x33aa99(0x1f4),auth,async(_0x371678,_0x50db4f)=>{const _0x41c259=a0_0x33aa99;try{const _0x1e4c34=_0x371678[_0x41c259(0x1ed)],_0x395aeb=await master_shop['find'](),_0x43216c=await profile[_0x41c259(0x1cf)]({'email':_0x1e4c34[_0x41c259(0x1ea)]}),_0x3d34a8=await staff[_0x41c259(0x209)]({'account_category':'acc'}),_0x284428=await staff[_0x41c259(0x209)]({'account_category':'wm'}),_0xd4eb75=await staff[_0x41c259(0x209)]({'account_category':'sa'}),_0x1a6e24=await warehouse['aggregate']([{'$group':{'_id':_0x41c259(0x1e3)}}]);if(_0x395aeb[0x0][_0x41c259(0x201)]=='English\x20(US)')var _0x42a9e2=users[_0x41c259(0x1d5)];else{if(_0x395aeb[0x0][_0x41c259(0x201)]==_0x41c259(0x1f7))var _0x42a9e2=users['Hindi'];else{if(_0x395aeb[0x0][_0x41c259(0x201)]=='German')var _0x42a9e2=users[_0x41c259(0x1f8)];else{if(_0x395aeb[0x0][_0x41c259(0x201)]==_0x41c259(0x1ff))var _0x42a9e2=users['Spanish'];else{if(_0x395aeb[0x0]['language']==_0x41c259(0x1e8))var _0x42a9e2=users[_0x41c259(0x1e8)];else{if(_0x395aeb[0x0]['language']==_0x41c259(0x202))var _0x42a9e2=users[_0x41c259(0x205)];else{if(_0x395aeb[0x0]['language']==_0x41c259(0x1d6))var _0x42a9e2=users[_0x41c259(0x1d6)];else{if(_0x395aeb[0x0][_0x41c259(0x201)]==_0x41c259(0x1f5))var _0x42a9e2=users[_0x41c259(0x1e1)];}}}}}}}_0x50db4f[_0x41c259(0x1e9)](_0x41c259(0x1fe),{'success':_0x371678[_0x41c259(0x1d2)](_0x41c259(0x20d)),'errors':_0x371678[_0x41c259(0x1d2)]('errors'),'role':_0x1e4c34,'profile':_0x43216c,'master_shop':_0x395aeb,'language':_0x42a9e2,'accounting':_0x3d34a8,'warehouse_acct':_0x284428,'sales_acct':_0xd4eb75,'warehouse_loc':_0x1a6e24});}catch(_0x10d5f4){}}),router[a0_0x33aa99(0x1ee)](a0_0x33aa99(0x1db),auth,async(_0x5ee93f,_0x42b727)=>{const _0x5434ef=a0_0x33aa99;try{const {accounting_account_id:_0x3724ac,warehouse_account_id:_0x4e3578,staff_id:_0x474ab0,warehouse_loc:_0xce3ec4}=_0x5ee93f[_0x5434ef(0x1dd)];if(typeof _0x474ab0==_0x5434ef(0x1d3))var _0x1ccfd8=[_0x5ee93f[_0x5434ef(0x1dd)][_0x5434ef(0x1f3)]],_0x4c886b=[_0x5ee93f['body'][_0x5434ef(0x1fb)]];else var _0x1ccfd8=[..._0x5ee93f['body'][_0x5434ef(0x1f3)]],_0x4c886b=[..._0x5ee93f[_0x5434ef(0x1dd)]['name_accounting']];const _0x4a8ad1=_0x1ccfd8[_0x5434ef(0x1d0)](_0x5a90e7=>{return _0x5a90e7={'id_member':_0x5a90e7};});_0x4c886b[_0x5434ef(0x1e4)]((_0xadcb92,_0x5ad149)=>{const _0x45af6a=_0x5434ef;_0x4a8ad1[_0x5ad149][_0x45af6a(0x1e0)]=_0xadcb92;});const _0x55c478=new approver_acct({'head_id_staff':_0x3724ac,'warehouse_staff_id':_0x4e3578,'warehouse_name':_0xce3ec4,'members':_0x4a8ad1}),_0x3c404d=await _0x55c478['save']();_0x5ee93f['flash'](_0x5434ef(0x20d),'Approver\x20Add\x20successfully'),_0x42b727['redirect']('/so_approvers/preview/'+_0x3c404d['_id']);}catch(_0xd9f397){}}),router[a0_0x33aa99(0x1ee)](a0_0x33aa99(0x203),auth,async(_0x5a27ef,_0xb658b1)=>{const _0x4bc84a=a0_0x33aa99;try{const {id_staff:_0x5a31e7}=_0x5a27ef[_0x4bc84a(0x1dd)],_0x16edac=await staff['findById'](_0x5a31e7);_0xb658b1[_0x4bc84a(0x20a)](_0x16edac);}catch(_0x1252c2){}}),router[a0_0x33aa99(0x1d8)](a0_0x33aa99(0x1f0),auth,async(_0x24ef24,_0x9b09cb)=>{const _0x5e444a=a0_0x33aa99;try{const _0xeb823f=_0x24ef24[_0x5e444a(0x1ed)],_0x4fc146=_0x24ef24[_0x5e444a(0x200)]['id'],_0x499cc6=await master_shop[_0x5e444a(0x209)](),_0x422780=await profile[_0x5e444a(0x1cf)]({'email':_0xeb823f[_0x5e444a(0x1ea)]}),_0x1e8f38=await staff[_0x5e444a(0x209)]({'account_category':_0x5e444a(0x1ef)}),_0x4549cb=await staff[_0x5e444a(0x209)]({'account_category':'wm'}),_0x339d5e=await staff[_0x5e444a(0x209)]({'account_category':'sa'}),_0x3faf4b=await warehouse[_0x5e444a(0x1e7)]([{'$group':{'_id':'$name'}}]),_0xc8c2b5=await approver_acct['findById'](_0x4fc146);if(_0x499cc6[0x0]['language']=='English\x20(US)')var _0x1a61d2=users[_0x5e444a(0x1d5)];else{if(_0x499cc6[0x0][_0x5e444a(0x201)]==_0x5e444a(0x1f7))var _0x1a61d2=users[_0x5e444a(0x1f7)];else{if(_0x499cc6[0x0][_0x5e444a(0x201)]==_0x5e444a(0x1f8))var _0x1a61d2=users['German'];else{if(_0x499cc6[0x0][_0x5e444a(0x201)]=='Spanish')var _0x1a61d2=users['Spanish'];else{if(_0x499cc6[0x0][_0x5e444a(0x201)]==_0x5e444a(0x1e8))var _0x1a61d2=users[_0x5e444a(0x1e8)];else{if(_0x499cc6[0x0][_0x5e444a(0x201)]=='Portuguese\x20(BR)')var _0x1a61d2=users[_0x5e444a(0x205)];else{if(_0x499cc6[0x0]['language']==_0x5e444a(0x1d6))var _0x1a61d2=users[_0x5e444a(0x1d6)];else{if(_0x499cc6[0x0][_0x5e444a(0x201)]==_0x5e444a(0x1f5))var _0x1a61d2=users['Arabic'];}}}}}}}_0x9b09cb['render'](_0x5e444a(0x1fc),{'success':_0x24ef24[_0x5e444a(0x1d2)](_0x5e444a(0x20d)),'errors':_0x24ef24['flash'](_0x5e444a(0x1fd)),'role':_0xeb823f,'profile':_0x422780,'master_shop':_0x499cc6,'language':_0x1a61d2,'accounting':_0x1e8f38,'warehouse_acct':_0x4549cb,'sales_acct':_0x339d5e,'warehouse_loc':_0x3faf4b,'data':_0xc8c2b5});}catch(_0x156616){}}),module[a0_0x33aa99(0x204)]=router;