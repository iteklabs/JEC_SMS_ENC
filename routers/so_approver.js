const a0_0xcc97ad=a0_0x4cc9;(function(_0x39e06d,_0x13d35e){const _0x43a117=a0_0x4cc9,_0x5ae233=_0x39e06d();while(!![]){try{const _0x254a15=-parseInt(_0x43a117(0x1b9))/0x1*(parseInt(_0x43a117(0x1c6))/0x2)+parseInt(_0x43a117(0x1d6))/0x3+-parseInt(_0x43a117(0x1c1))/0x4*(parseInt(_0x43a117(0x1ee))/0x5)+parseInt(_0x43a117(0x1be))/0x6+parseInt(_0x43a117(0x1e4))/0x7*(parseInt(_0x43a117(0x1c8))/0x8)+-parseInt(_0x43a117(0x1d4))/0x9*(-parseInt(_0x43a117(0x1b3))/0xa)+parseInt(_0x43a117(0x1d9))/0xb*(-parseInt(_0x43a117(0x1de))/0xc);if(_0x254a15===_0x13d35e)break;else _0x5ae233['push'](_0x5ae233['shift']());}catch(_0x56299a){_0x5ae233['push'](_0x5ae233['shift']());}}}(a0_0x1321,0xa7f07));function a0_0x1321(){const _0x2aee15=['view_so_approvers','1okwjvc','redirect','$account_data','success','$name','7648398YUHwXh','Hindi','Arabic\x20(ae)','1606888YltWkM','Portuguese','acc','name','language','1277434uVMWds','Router','38352HwQErp','string','json','Arabic','so_approver_all','find','staff_id','/so_approvers/preview/','/get_sales_data','_id','get','English','9cFDeNJ','account_data','3673674oUrgUC','Spanish','French','33slindI','findOne','/setup','$warehouse_staff_id','aggregate','3919548rUVuPH','../models/all_models','$head_id_staff','post','email','wms_data','756qdFkpu','user','render','Approver\x20Add\x20successfully','English\x20(US)','accounting_account_id','exports','flash','/add/','findById','10rsrPfH','/preview/:id','body','Chinese','staffs','wms_account_id','errors','name_accounting','params','so_approver_add','Portuguese\x20(BR)','928840xLZgnV','map','German','save','../middleware/auth'];a0_0x1321=function(){return _0x2aee15;};return a0_0x1321();}const express=require('express'),app=express(),router=express[a0_0xcc97ad(0x1c7)](),auth=require(a0_0xcc97ad(0x1b7)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order,approver_acct,warehouse}=require(a0_0xcc97ad(0x1df)),users=require('../public/language/languages.json');function a0_0x4cc9(_0x3073bf,_0x3d3917){const _0x1321dd=a0_0x1321();return a0_0x4cc9=function(_0x4cc98b,_0x173d08){_0x4cc98b=_0x4cc98b-0x1b3;let _0x3def0d=_0x1321dd[_0x4cc98b];return _0x3def0d;},a0_0x4cc9(_0x3073bf,_0x3d3917);}router['get'](a0_0xcc97ad(0x1db),auth,async(_0x770f90,_0x1c9931)=>{const _0x4e1d0a=a0_0xcc97ad;try{const _0x3fa54c=_0x770f90[_0x4e1d0a(0x1e5)],_0x3c150b=await master_shop[_0x4e1d0a(0x1cd)](),_0x5b4a56=await profile[_0x4e1d0a(0x1da)]({'email':_0x3fa54c[_0x4e1d0a(0x1e2)]}),_0x3b8fcf=await approver_acct['aggregate']([{'$addFields':{'accounting_account_id':{'$toObjectId':_0x4e1d0a(0x1e0)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x4e1d0a(0x1dc)}}},{'$lookup':{'from':_0x4e1d0a(0x1f2),'localField':_0x4e1d0a(0x1e9),'foreignField':'_id','as':_0x4e1d0a(0x1d5)}},{'$unwind':_0x4e1d0a(0x1bb)},{'$lookup':{'from':'staffs','localField':_0x4e1d0a(0x1f3),'foreignField':_0x4e1d0a(0x1d1),'as':_0x4e1d0a(0x1e3)}},{'$unwind':'$wms_data'}]);if(_0x3c150b[0x0][_0x4e1d0a(0x1c5)]==_0x4e1d0a(0x1e8))var _0x84fbda=users[_0x4e1d0a(0x1d3)];else{if(_0x3c150b[0x0][_0x4e1d0a(0x1c5)]==_0x4e1d0a(0x1bf))var _0x84fbda=users[_0x4e1d0a(0x1bf)];else{if(_0x3c150b[0x0][_0x4e1d0a(0x1c5)]==_0x4e1d0a(0x1b5))var _0x84fbda=users[_0x4e1d0a(0x1b5)];else{if(_0x3c150b[0x0][_0x4e1d0a(0x1c5)]==_0x4e1d0a(0x1d7))var _0x84fbda=users[_0x4e1d0a(0x1d7)];else{if(_0x3c150b[0x0][_0x4e1d0a(0x1c5)]==_0x4e1d0a(0x1d8))var _0x84fbda=users[_0x4e1d0a(0x1d8)];else{if(_0x3c150b[0x0][_0x4e1d0a(0x1c5)]==_0x4e1d0a(0x1f8))var _0x84fbda=users['Portuguese'];else{if(_0x3c150b[0x0]['language']==_0x4e1d0a(0x1f1))var _0x84fbda=users[_0x4e1d0a(0x1f1)];else{if(_0x3c150b[0x0][_0x4e1d0a(0x1c5)]=='Arabic\x20(ae)')var _0x84fbda=users['Arabic'];}}}}}}}_0x1c9931[_0x4e1d0a(0x1e6)](_0x4e1d0a(0x1cc),{'success':_0x770f90[_0x4e1d0a(0x1eb)](_0x4e1d0a(0x1bc)),'errors':_0x770f90[_0x4e1d0a(0x1eb)](_0x4e1d0a(0x1f4)),'role':_0x3fa54c,'profile':_0x5b4a56,'master_shop':_0x3c150b,'language':_0x84fbda,'data':_0x3b8fcf});}catch(_0x2836ff){}}),router['get']('/add',auth,async(_0x406b3d,_0x16e4b8)=>{const _0xecec8a=a0_0xcc97ad;try{const _0x592a9d=_0x406b3d[_0xecec8a(0x1e5)],_0x3e0b3d=await master_shop['find'](),_0x245a79=await profile['findOne']({'email':_0x592a9d[_0xecec8a(0x1e2)]}),_0x4c16b9=await staff['find']({'account_category':_0xecec8a(0x1c3)}),_0x122e61=await staff[_0xecec8a(0x1cd)]({'account_category':'wm'}),_0xf1716e=await staff[_0xecec8a(0x1cd)]({'account_category':'sa'}),_0x36d9ac=await warehouse[_0xecec8a(0x1dd)]([{'$group':{'_id':_0xecec8a(0x1bd)}}]);if(_0x3e0b3d[0x0][_0xecec8a(0x1c5)]==_0xecec8a(0x1e8))var _0x5dc7fb=users[_0xecec8a(0x1d3)];else{if(_0x3e0b3d[0x0][_0xecec8a(0x1c5)]==_0xecec8a(0x1bf))var _0x5dc7fb=users[_0xecec8a(0x1bf)];else{if(_0x3e0b3d[0x0][_0xecec8a(0x1c5)]==_0xecec8a(0x1b5))var _0x5dc7fb=users[_0xecec8a(0x1b5)];else{if(_0x3e0b3d[0x0][_0xecec8a(0x1c5)]==_0xecec8a(0x1d7))var _0x5dc7fb=users[_0xecec8a(0x1d7)];else{if(_0x3e0b3d[0x0][_0xecec8a(0x1c5)]==_0xecec8a(0x1d8))var _0x5dc7fb=users[_0xecec8a(0x1d8)];else{if(_0x3e0b3d[0x0]['language']=='Portuguese\x20(BR)')var _0x5dc7fb=users['Portuguese'];else{if(_0x3e0b3d[0x0][_0xecec8a(0x1c5)]=='Chinese')var _0x5dc7fb=users[_0xecec8a(0x1f1)];else{if(_0x3e0b3d[0x0][_0xecec8a(0x1c5)]==_0xecec8a(0x1c0))var _0x5dc7fb=users[_0xecec8a(0x1cb)];}}}}}}}_0x16e4b8[_0xecec8a(0x1e6)](_0xecec8a(0x1f7),{'success':_0x406b3d['flash'](_0xecec8a(0x1bc)),'errors':_0x406b3d[_0xecec8a(0x1eb)]('errors'),'role':_0x592a9d,'profile':_0x245a79,'master_shop':_0x3e0b3d,'language':_0x5dc7fb,'accounting':_0x4c16b9,'warehouse_acct':_0x122e61,'sales_acct':_0xf1716e,'warehouse_loc':_0x36d9ac});}catch(_0xbd0f3f){}}),router[a0_0xcc97ad(0x1e1)](a0_0xcc97ad(0x1ec),auth,async(_0x431d05,_0x4e0b79)=>{const _0x56f5af=a0_0xcc97ad;try{const {accounting_account_id:_0x3743bb,warehouse_account_id:_0x49676c,staff_id:_0x4662d2,warehouse_loc:_0xeae8a1}=_0x431d05['body'];if(typeof _0x4662d2==_0x56f5af(0x1c9))var _0x2d4804=[_0x431d05[_0x56f5af(0x1f0)]['staff_id']],_0x14ad03=[_0x431d05[_0x56f5af(0x1f0)][_0x56f5af(0x1f5)]];else var _0x2d4804=[..._0x431d05[_0x56f5af(0x1f0)][_0x56f5af(0x1ce)]],_0x14ad03=[..._0x431d05['body'][_0x56f5af(0x1f5)]];const _0x3ed836=_0x2d4804[_0x56f5af(0x1b4)](_0x1d8622=>{return _0x1d8622={'id_member':_0x1d8622};});_0x14ad03['forEach']((_0xe8efc2,_0x2eb4ec)=>{const _0x1913c3=_0x56f5af;_0x3ed836[_0x2eb4ec][_0x1913c3(0x1c4)]=_0xe8efc2;});const _0x52a100=new approver_acct({'head_id_staff':_0x3743bb,'warehouse_staff_id':_0x49676c,'warehouse_name':_0xeae8a1,'members':_0x3ed836}),_0x569200=await _0x52a100[_0x56f5af(0x1b6)]();_0x431d05['flash'](_0x56f5af(0x1bc),_0x56f5af(0x1e7)),_0x4e0b79[_0x56f5af(0x1ba)](_0x56f5af(0x1cf)+_0x569200[_0x56f5af(0x1d1)]);}catch(_0x410195){}}),router[a0_0xcc97ad(0x1e1)](a0_0xcc97ad(0x1d0),auth,async(_0x3d63c1,_0x5145a1)=>{const _0x3a68c4=a0_0xcc97ad;try{const {id_staff:_0x52b8ec}=_0x3d63c1[_0x3a68c4(0x1f0)],_0x302314=await staff['findById'](_0x52b8ec);_0x5145a1[_0x3a68c4(0x1ca)](_0x302314);}catch(_0x415655){}}),router[a0_0xcc97ad(0x1d2)](a0_0xcc97ad(0x1ef),auth,async(_0x5d0d74,_0xb1c8d9)=>{const _0x1518e6=a0_0xcc97ad;try{const _0x1dbb39=_0x5d0d74['user'],_0x126b3b=_0x5d0d74[_0x1518e6(0x1f6)]['id'],_0x1cdaaa=await master_shop[_0x1518e6(0x1cd)](),_0x4d52d1=await profile[_0x1518e6(0x1da)]({'email':_0x1dbb39[_0x1518e6(0x1e2)]}),_0x11001b=await staff['find']({'account_category':_0x1518e6(0x1c3)}),_0x43e5ff=await staff[_0x1518e6(0x1cd)]({'account_category':'wm'}),_0x34e6eb=await staff[_0x1518e6(0x1cd)]({'account_category':'sa'}),_0x186689=await warehouse['aggregate']([{'$group':{'_id':_0x1518e6(0x1bd)}}]),_0x17f190=await approver_acct[_0x1518e6(0x1ed)](_0x126b3b);if(_0x1cdaaa[0x0]['language']==_0x1518e6(0x1e8))var _0x7b9de6=users['English'];else{if(_0x1cdaaa[0x0]['language']==_0x1518e6(0x1bf))var _0x7b9de6=users[_0x1518e6(0x1bf)];else{if(_0x1cdaaa[0x0][_0x1518e6(0x1c5)]==_0x1518e6(0x1b5))var _0x7b9de6=users[_0x1518e6(0x1b5)];else{if(_0x1cdaaa[0x0]['language']==_0x1518e6(0x1d7))var _0x7b9de6=users[_0x1518e6(0x1d7)];else{if(_0x1cdaaa[0x0]['language']=='French')var _0x7b9de6=users[_0x1518e6(0x1d8)];else{if(_0x1cdaaa[0x0][_0x1518e6(0x1c5)]==_0x1518e6(0x1f8))var _0x7b9de6=users[_0x1518e6(0x1c2)];else{if(_0x1cdaaa[0x0][_0x1518e6(0x1c5)]==_0x1518e6(0x1f1))var _0x7b9de6=users['Chinese'];else{if(_0x1cdaaa[0x0][_0x1518e6(0x1c5)]=='Arabic\x20(ae)')var _0x7b9de6=users[_0x1518e6(0x1cb)];}}}}}}}_0xb1c8d9[_0x1518e6(0x1e6)](_0x1518e6(0x1b8),{'success':_0x5d0d74[_0x1518e6(0x1eb)](_0x1518e6(0x1bc)),'errors':_0x5d0d74['flash']('errors'),'role':_0x1dbb39,'profile':_0x4d52d1,'master_shop':_0x1cdaaa,'language':_0x7b9de6,'accounting':_0x11001b,'warehouse_acct':_0x43e5ff,'sales_acct':_0x34e6eb,'warehouse_loc':_0x186689,'data':_0x17f190});}catch(_0x8bb1e8){}}),module[a0_0xcc97ad(0x1ea)]=router;