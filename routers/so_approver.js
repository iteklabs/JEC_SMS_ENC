const a0_0xa676dc=a0_0x39aa;(function(_0x2d6292,_0x319840){const _0x3aa576=a0_0x39aa,_0x50ffb6=_0x2d6292();while(!![]){try{const _0x46071b=parseInt(_0x3aa576(0xc3))/0x1+-parseInt(_0x3aa576(0xd4))/0x2+parseInt(_0x3aa576(0xb4))/0x3+-parseInt(_0x3aa576(0xd5))/0x4*(parseInt(_0x3aa576(0xd8))/0x5)+-parseInt(_0x3aa576(0xd1))/0x6*(-parseInt(_0x3aa576(0xd0))/0x7)+-parseInt(_0x3aa576(0xc2))/0x8+parseInt(_0x3aa576(0xc1))/0x9;if(_0x46071b===_0x319840)break;else _0x50ffb6['push'](_0x50ffb6['shift']());}catch(_0xf34124){_0x50ffb6['push'](_0x50ffb6['shift']());}}}(a0_0x23cb,0xb1434));function a0_0x23cb(){const _0x183883=['2846308POyFqu','errors','$wms_data','5perQiN','staffs','Arabic','staff_id','../public/language/languages.json','so_approver_all','save','flash','Portuguese','findOne','post','body','account_data','get','language','findById','../middleware/auth','redirect','/add','Chinese','Arabic\x20(ae)','2684871sujuEU','English','user','$name','params','/setup','/preview/:id','$account_data','$head_id_staff','view_so_approvers','aggregate','/get_sales_data','express','7930980AaXxjb','7671128VNfzVx','1268953pCECOy','Spanish','Portuguese\x20(BR)','Hindi','French','render','name','English\x20(US)','find','success','email','../models/all_models','name_accounting','7ZwKEkE','697026EKdijO','_id','German','1529530fQqNYj'];a0_0x23cb=function(){return _0x183883;};return a0_0x23cb();}const express=require(a0_0xa676dc(0xc0)),app=express(),router=express['Router'](),auth=require(a0_0xa676dc(0xe8)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order,approver_acct,warehouse}=require(a0_0xa676dc(0xce)),users=require(a0_0xa676dc(0xdc));function a0_0x39aa(_0x152785,_0x1c2088){const _0x23cb56=a0_0x23cb();return a0_0x39aa=function(_0x39aa47,_0x4f05d3){_0x39aa47=_0x39aa47-0xb2;let _0x512830=_0x23cb56[_0x39aa47];return _0x512830;},a0_0x39aa(_0x152785,_0x1c2088);}router[a0_0xa676dc(0xe5)](a0_0xa676dc(0xb9),auth,async(_0x2b6772,_0x136def)=>{const _0x405fdb=a0_0xa676dc;try{const _0x5c5539=_0x2b6772[_0x405fdb(0xb6)],_0x4dc70a=await master_shop[_0x405fdb(0xcb)](),_0x3710ae=await profile[_0x405fdb(0xe1)]({'email':_0x5c5539[_0x405fdb(0xcd)]}),_0xd67044=await approver_acct[_0x405fdb(0xbe)]([{'$addFields':{'accounting_account_id':{'$toObjectId':_0x405fdb(0xbc)}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$warehouse_staff_id'}}},{'$lookup':{'from':_0x405fdb(0xd9),'localField':'accounting_account_id','foreignField':'_id','as':_0x405fdb(0xe4)}},{'$unwind':_0x405fdb(0xbb)},{'$lookup':{'from':_0x405fdb(0xd9),'localField':'wms_account_id','foreignField':_0x405fdb(0xd2),'as':'wms_data'}},{'$unwind':_0x405fdb(0xd7)}]);if(_0x4dc70a[0x0]['language']==_0x405fdb(0xca))var _0x3e7424=users[_0x405fdb(0xb5)];else{if(_0x4dc70a[0x0][_0x405fdb(0xe6)]=='Hindi')var _0x3e7424=users[_0x405fdb(0xc6)];else{if(_0x4dc70a[0x0]['language']==_0x405fdb(0xd3))var _0x3e7424=users[_0x405fdb(0xd3)];else{if(_0x4dc70a[0x0][_0x405fdb(0xe6)]==_0x405fdb(0xc4))var _0x3e7424=users['Spanish'];else{if(_0x4dc70a[0x0][_0x405fdb(0xe6)]==_0x405fdb(0xc7))var _0x3e7424=users[_0x405fdb(0xc7)];else{if(_0x4dc70a[0x0]['language']==_0x405fdb(0xc5))var _0x3e7424=users['Portuguese'];else{if(_0x4dc70a[0x0]['language']==_0x405fdb(0xb2))var _0x3e7424=users[_0x405fdb(0xb2)];else{if(_0x4dc70a[0x0]['language']==_0x405fdb(0xb3))var _0x3e7424=users['Arabic'];}}}}}}}_0x136def[_0x405fdb(0xc8)](_0x405fdb(0xdd),{'success':_0x2b6772[_0x405fdb(0xdf)](_0x405fdb(0xcc)),'errors':_0x2b6772[_0x405fdb(0xdf)](_0x405fdb(0xd6)),'role':_0x5c5539,'profile':_0x3710ae,'master_shop':_0x4dc70a,'language':_0x3e7424,'data':_0xd67044});}catch(_0x69c80c){}}),router[a0_0xa676dc(0xe5)](a0_0xa676dc(0xea),auth,async(_0x23d10d,_0x47906f)=>{const _0x49aea6=a0_0xa676dc;try{const _0x1db98e=_0x23d10d['user'],_0x29adb5=await master_shop[_0x49aea6(0xcb)](),_0x4d84d8=await profile[_0x49aea6(0xe1)]({'email':_0x1db98e['email']}),_0x31f5ef=await staff[_0x49aea6(0xcb)]({'account_category':'acc'}),_0x41203a=await staff['find']({'account_category':'wm'}),_0x166a7c=await staff[_0x49aea6(0xcb)]({'account_category':'sa'}),_0x43ebd5=await warehouse['aggregate']([{'$group':{'_id':_0x49aea6(0xb7)}}]);if(_0x29adb5[0x0][_0x49aea6(0xe6)]=='English\x20(US)')var _0x2a7809=users[_0x49aea6(0xb5)];else{if(_0x29adb5[0x0][_0x49aea6(0xe6)]==_0x49aea6(0xc6))var _0x2a7809=users[_0x49aea6(0xc6)];else{if(_0x29adb5[0x0][_0x49aea6(0xe6)]=='German')var _0x2a7809=users[_0x49aea6(0xd3)];else{if(_0x29adb5[0x0][_0x49aea6(0xe6)]==_0x49aea6(0xc4))var _0x2a7809=users[_0x49aea6(0xc4)];else{if(_0x29adb5[0x0][_0x49aea6(0xe6)]==_0x49aea6(0xc7))var _0x2a7809=users[_0x49aea6(0xc7)];else{if(_0x29adb5[0x0][_0x49aea6(0xe6)]==_0x49aea6(0xc5))var _0x2a7809=users[_0x49aea6(0xe0)];else{if(_0x29adb5[0x0]['language']==_0x49aea6(0xb2))var _0x2a7809=users[_0x49aea6(0xb2)];else{if(_0x29adb5[0x0]['language']==_0x49aea6(0xb3))var _0x2a7809=users[_0x49aea6(0xda)];}}}}}}}_0x47906f['render']('so_approver_add',{'success':_0x23d10d['flash'](_0x49aea6(0xcc)),'errors':_0x23d10d['flash']('errors'),'role':_0x1db98e,'profile':_0x4d84d8,'master_shop':_0x29adb5,'language':_0x2a7809,'accounting':_0x31f5ef,'warehouse_acct':_0x41203a,'sales_acct':_0x166a7c,'warehouse_loc':_0x43ebd5});}catch(_0x3f239c){}}),router[a0_0xa676dc(0xe2)]('/add/',auth,async(_0x2d2a63,_0x3057f4)=>{const _0x377398=a0_0xa676dc;try{const {accounting_account_id:_0x4367a6,warehouse_account_id:_0xb992e4,staff_id:_0x2e5f2a,warehouse_loc:_0x17e8ea}=_0x2d2a63[_0x377398(0xe3)];if(typeof _0x2e5f2a=='string')var _0x2bb05e=[_0x2d2a63['body'][_0x377398(0xdb)]],_0x4e1133=[_0x2d2a63[_0x377398(0xe3)][_0x377398(0xcf)]];else var _0x2bb05e=[..._0x2d2a63[_0x377398(0xe3)][_0x377398(0xdb)]],_0x4e1133=[..._0x2d2a63[_0x377398(0xe3)][_0x377398(0xcf)]];const _0x1387dc=_0x2bb05e['map'](_0x4d0fe3=>{return _0x4d0fe3={'id_member':_0x4d0fe3};});_0x4e1133['forEach']((_0x16b373,_0x1267ea)=>{const _0x4669a0=_0x377398;_0x1387dc[_0x1267ea][_0x4669a0(0xc9)]=_0x16b373;});const _0x13a210=new approver_acct({'head_id_staff':_0x4367a6,'warehouse_staff_id':_0xb992e4,'warehouse_name':_0x17e8ea,'members':_0x1387dc}),_0x23922f=await _0x13a210[_0x377398(0xde)]();_0x2d2a63[_0x377398(0xdf)]('success','Approver\x20Add\x20successfully'),_0x3057f4[_0x377398(0xe9)]('/so_approvers/preview/'+_0x23922f[_0x377398(0xd2)]);}catch(_0x1185e8){}}),router[a0_0xa676dc(0xe2)](a0_0xa676dc(0xbf),auth,async(_0x3e3380,_0x2e3a28)=>{try{const {id_staff:_0x2124dd}=_0x3e3380['body'],_0x52c4f1=await staff['findById'](_0x2124dd);_0x2e3a28['json'](_0x52c4f1);}catch(_0x9a1281){}}),router['get'](a0_0xa676dc(0xba),auth,async(_0x3dce6c,_0x22bf4a)=>{const _0x214d9b=a0_0xa676dc;try{const _0x4ae635=_0x3dce6c[_0x214d9b(0xb6)],_0x3b1bd7=_0x3dce6c[_0x214d9b(0xb8)]['id'],_0x24a1ba=await master_shop[_0x214d9b(0xcb)](),_0x5e4cbd=await profile[_0x214d9b(0xe1)]({'email':_0x4ae635[_0x214d9b(0xcd)]}),_0x2ddc41=await staff[_0x214d9b(0xcb)]({'account_category':'acc'}),_0x28a282=await staff[_0x214d9b(0xcb)]({'account_category':'wm'}),_0x243a67=await staff[_0x214d9b(0xcb)]({'account_category':'sa'}),_0x27a975=await warehouse['aggregate']([{'$group':{'_id':_0x214d9b(0xb7)}}]),_0x3985db=await approver_acct[_0x214d9b(0xe7)](_0x3b1bd7);if(_0x24a1ba[0x0][_0x214d9b(0xe6)]==_0x214d9b(0xca))var _0x22f0be=users[_0x214d9b(0xb5)];else{if(_0x24a1ba[0x0][_0x214d9b(0xe6)]==_0x214d9b(0xc6))var _0x22f0be=users[_0x214d9b(0xc6)];else{if(_0x24a1ba[0x0]['language']=='German')var _0x22f0be=users['German'];else{if(_0x24a1ba[0x0][_0x214d9b(0xe6)]==_0x214d9b(0xc4))var _0x22f0be=users[_0x214d9b(0xc4)];else{if(_0x24a1ba[0x0][_0x214d9b(0xe6)]==_0x214d9b(0xc7))var _0x22f0be=users['French'];else{if(_0x24a1ba[0x0]['language']==_0x214d9b(0xc5))var _0x22f0be=users[_0x214d9b(0xe0)];else{if(_0x24a1ba[0x0]['language']==_0x214d9b(0xb2))var _0x22f0be=users[_0x214d9b(0xb2)];else{if(_0x24a1ba[0x0][_0x214d9b(0xe6)]==_0x214d9b(0xb3))var _0x22f0be=users[_0x214d9b(0xda)];}}}}}}}_0x22bf4a[_0x214d9b(0xc8)](_0x214d9b(0xbd),{'success':_0x3dce6c[_0x214d9b(0xdf)](_0x214d9b(0xcc)),'errors':_0x3dce6c[_0x214d9b(0xdf)](_0x214d9b(0xd6)),'role':_0x4ae635,'profile':_0x5e4cbd,'master_shop':_0x24a1ba,'language':_0x22f0be,'accounting':_0x2ddc41,'warehouse_acct':_0x28a282,'sales_acct':_0x243a67,'warehouse_loc':_0x27a975,'data':_0x3985db});}catch(_0x2f110e){}}),module['exports']=router;