const a0_0x989b90=a0_0x5a11;function a0_0x35ea(){const _0x1de9eb=['/get_sales_data','151445iXkEYC','$name','/preview/:id','staffs','accounting_account_id','Portuguese','success','redirect','render','Arabic\x20(ae)','4380020fGtacl','account_data','user','_id','Hindi','staff_id','/add','forEach','5gNSNXm','English','aggregate','10OCsfKK','so_approver_add','body','flash','Approver\x20Add\x20successfully','Portuguese\x20(BR)','Chinese','find','38846fBkBiJ','$wms_data','errors','Router','English\x20(US)','Spanish','email','express','language','view_so_approvers','$warehouse_staff_id','wms_account_id','$account_data','458088MrxPbb','name_accounting','findOne','56dZuRps','map','$head_id_staff','../middleware/auth','json','German','acc','587700Qsxsyw','Arabic','850545jLieqE','216516nougps','get','../models/all_models','French','wms_data','save'];a0_0x35ea=function(){return _0x1de9eb;};return a0_0x35ea();}(function(_0x100077,_0x50b119){const _0x160770=a0_0x5a11,_0x502caf=_0x100077();while(!![]){try{const _0x7cd002=parseInt(_0x160770(0x130))/0x1*(-parseInt(_0x160770(0x138))/0x2)+-parseInt(_0x160770(0x152))/0x3+-parseInt(_0x160770(0x14f))/0x4+parseInt(_0x160770(0x12d))/0x5*(parseInt(_0x160770(0x145))/0x6)+-parseInt(_0x160770(0x159))/0x7*(-parseInt(_0x160770(0x148))/0x8)+-parseInt(_0x160770(0x151))/0x9+parseInt(_0x160770(0x163))/0xa;if(_0x7cd002===_0x50b119)break;else _0x502caf['push'](_0x502caf['shift']());}catch(_0xe5547c){_0x502caf['push'](_0x502caf['shift']());}}}(a0_0x35ea,0x2690b));function a0_0x5a11(_0x335ebb,_0x5a2f25){const _0x35ea4d=a0_0x35ea();return a0_0x5a11=function(_0x5a11ee,_0x501255){_0x5a11ee=_0x5a11ee-0x126;let _0x586a46=_0x35ea4d[_0x5a11ee];return _0x586a46;},a0_0x5a11(_0x335ebb,_0x5a2f25);}const express=require(a0_0x989b90(0x13f)),app=express(),router=express[a0_0x989b90(0x13b)](),auth=require(a0_0x989b90(0x14b)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order,approver_acct,warehouse}=require(a0_0x989b90(0x154)),users=require('../public/language/languages.json');router['get']('/setup',auth,async(_0x5d8a8b,_0x295446)=>{const _0x31f900=a0_0x989b90;try{const _0x1242ed=_0x5d8a8b[_0x31f900(0x127)],_0x2b594e=await master_shop[_0x31f900(0x137)](),_0x26e0d7=await profile[_0x31f900(0x147)]({'email':_0x1242ed[_0x31f900(0x13e)]}),_0x3edb1b=await approver_acct[_0x31f900(0x12f)]([{'$addFields':{'accounting_account_id':{'$toObjectId':_0x31f900(0x14a)}}},{'$addFields':{'wms_account_id':{'$toObjectId':_0x31f900(0x142)}}},{'$lookup':{'from':_0x31f900(0x15c),'localField':_0x31f900(0x15d),'foreignField':'_id','as':_0x31f900(0x126)}},{'$unwind':_0x31f900(0x144)},{'$lookup':{'from':_0x31f900(0x15c),'localField':_0x31f900(0x143),'foreignField':_0x31f900(0x128),'as':_0x31f900(0x156)}},{'$unwind':_0x31f900(0x139)}]);if(_0x2b594e[0x0]['language']==_0x31f900(0x13c))var _0x52df98=users[_0x31f900(0x12e)];else{if(_0x2b594e[0x0][_0x31f900(0x140)]==_0x31f900(0x129))var _0x52df98=users[_0x31f900(0x129)];else{if(_0x2b594e[0x0][_0x31f900(0x140)]==_0x31f900(0x14d))var _0x52df98=users['German'];else{if(_0x2b594e[0x0][_0x31f900(0x140)]==_0x31f900(0x13d))var _0x52df98=users['Spanish'];else{if(_0x2b594e[0x0][_0x31f900(0x140)]==_0x31f900(0x155))var _0x52df98=users[_0x31f900(0x155)];else{if(_0x2b594e[0x0][_0x31f900(0x140)]==_0x31f900(0x135))var _0x52df98=users[_0x31f900(0x15e)];else{if(_0x2b594e[0x0]['language']==_0x31f900(0x136))var _0x52df98=users[_0x31f900(0x136)];else{if(_0x2b594e[0x0]['language']=='Arabic\x20(ae)')var _0x52df98=users['Arabic'];}}}}}}}_0x295446['render']('so_approver_all',{'success':_0x5d8a8b[_0x31f900(0x133)](_0x31f900(0x15f)),'errors':_0x5d8a8b[_0x31f900(0x133)](_0x31f900(0x13a)),'role':_0x1242ed,'profile':_0x26e0d7,'master_shop':_0x2b594e,'language':_0x52df98,'data':_0x3edb1b});}catch(_0x1d27d7){}}),router[a0_0x989b90(0x153)](a0_0x989b90(0x12b),auth,async(_0x19f7d4,_0x275bf0)=>{const _0x42a12b=a0_0x989b90;try{const _0x5e4d4c=_0x19f7d4[_0x42a12b(0x127)],_0x11f5f8=await master_shop[_0x42a12b(0x137)](),_0x582063=await profile[_0x42a12b(0x147)]({'email':_0x5e4d4c['email']}),_0x598c96=await staff['find']({'account_category':_0x42a12b(0x14e)}),_0x130e5d=await staff[_0x42a12b(0x137)]({'account_category':'wm'}),_0x392df4=await staff[_0x42a12b(0x137)]({'account_category':'sa'}),_0x16bcfd=await warehouse[_0x42a12b(0x12f)]([{'$group':{'_id':_0x42a12b(0x15a)}}]);if(_0x11f5f8[0x0][_0x42a12b(0x140)]==_0x42a12b(0x13c))var _0x2ac25f=users['English'];else{if(_0x11f5f8[0x0][_0x42a12b(0x140)]==_0x42a12b(0x129))var _0x2ac25f=users[_0x42a12b(0x129)];else{if(_0x11f5f8[0x0][_0x42a12b(0x140)]==_0x42a12b(0x14d))var _0x2ac25f=users[_0x42a12b(0x14d)];else{if(_0x11f5f8[0x0][_0x42a12b(0x140)]==_0x42a12b(0x13d))var _0x2ac25f=users[_0x42a12b(0x13d)];else{if(_0x11f5f8[0x0][_0x42a12b(0x140)]==_0x42a12b(0x155))var _0x2ac25f=users['French'];else{if(_0x11f5f8[0x0][_0x42a12b(0x140)]==_0x42a12b(0x135))var _0x2ac25f=users[_0x42a12b(0x15e)];else{if(_0x11f5f8[0x0]['language']=='Chinese')var _0x2ac25f=users['Chinese'];else{if(_0x11f5f8[0x0][_0x42a12b(0x140)]=='Arabic\x20(ae)')var _0x2ac25f=users['Arabic'];}}}}}}}_0x275bf0[_0x42a12b(0x161)](_0x42a12b(0x131),{'success':_0x19f7d4[_0x42a12b(0x133)](_0x42a12b(0x15f)),'errors':_0x19f7d4[_0x42a12b(0x133)](_0x42a12b(0x13a)),'role':_0x5e4d4c,'profile':_0x582063,'master_shop':_0x11f5f8,'language':_0x2ac25f,'accounting':_0x598c96,'warehouse_acct':_0x130e5d,'sales_acct':_0x392df4,'warehouse_loc':_0x16bcfd});}catch(_0x136fa5){}}),router['post']('/add/',auth,async(_0x5b8c07,_0xa715b8)=>{const _0x47fba0=a0_0x989b90;try{const {accounting_account_id:_0x463847,warehouse_account_id:_0x31d91b,staff_id:_0x1802a4,warehouse_loc:_0x30d5b1}=_0x5b8c07[_0x47fba0(0x132)];if(typeof _0x1802a4=='string')var _0x480510=[_0x5b8c07[_0x47fba0(0x132)][_0x47fba0(0x12a)]],_0x30ec10=[_0x5b8c07['body'][_0x47fba0(0x146)]];else var _0x480510=[..._0x5b8c07[_0x47fba0(0x132)][_0x47fba0(0x12a)]],_0x30ec10=[..._0x5b8c07[_0x47fba0(0x132)][_0x47fba0(0x146)]];const _0x19b734=_0x480510[_0x47fba0(0x149)](_0x518c38=>{return _0x518c38={'id_member':_0x518c38};});_0x30ec10[_0x47fba0(0x12c)]((_0x5a7f27,_0x90a748)=>{_0x19b734[_0x90a748]['name']=_0x5a7f27;});const _0x353dcc=new approver_acct({'head_id_staff':_0x463847,'warehouse_staff_id':_0x31d91b,'warehouse_name':_0x30d5b1,'members':_0x19b734}),_0x182b49=await _0x353dcc[_0x47fba0(0x157)]();_0x5b8c07[_0x47fba0(0x133)]('success',_0x47fba0(0x134)),_0xa715b8[_0x47fba0(0x160)]('/so_approvers/preview/'+_0x182b49['_id']);}catch(_0x497ffd){}}),router['post'](a0_0x989b90(0x158),auth,async(_0x3f7292,_0x227dbf)=>{const _0x4e6e0b=a0_0x989b90;try{const {id_staff:_0x27000d}=_0x3f7292[_0x4e6e0b(0x132)],_0x4f9328=await staff['findById'](_0x27000d);_0x227dbf[_0x4e6e0b(0x14c)](_0x4f9328);}catch(_0x4f1668){}}),router[a0_0x989b90(0x153)](a0_0x989b90(0x15b),auth,async(_0x210e8f,_0x20de37)=>{const _0x376777=a0_0x989b90;try{const _0x2d29bb=_0x210e8f[_0x376777(0x127)],_0x24acd8=_0x210e8f['params']['id'],_0x2fa970=await master_shop['find'](),_0x320376=await profile[_0x376777(0x147)]({'email':_0x2d29bb['email']}),_0x5de283=await staff[_0x376777(0x137)]({'account_category':_0x376777(0x14e)}),_0x13c80b=await staff['find']({'account_category':'wm'}),_0x15ba21=await staff[_0x376777(0x137)]({'account_category':'sa'}),_0x28fef0=await warehouse['aggregate']([{'$group':{'_id':_0x376777(0x15a)}}]),_0x348ebd=await approver_acct['findById'](_0x24acd8);if(_0x2fa970[0x0]['language']==_0x376777(0x13c))var _0x4b64e2=users[_0x376777(0x12e)];else{if(_0x2fa970[0x0][_0x376777(0x140)]==_0x376777(0x129))var _0x4b64e2=users[_0x376777(0x129)];else{if(_0x2fa970[0x0][_0x376777(0x140)]==_0x376777(0x14d))var _0x4b64e2=users[_0x376777(0x14d)];else{if(_0x2fa970[0x0]['language']==_0x376777(0x13d))var _0x4b64e2=users[_0x376777(0x13d)];else{if(_0x2fa970[0x0][_0x376777(0x140)]=='French')var _0x4b64e2=users[_0x376777(0x155)];else{if(_0x2fa970[0x0][_0x376777(0x140)]==_0x376777(0x135))var _0x4b64e2=users['Portuguese'];else{if(_0x2fa970[0x0][_0x376777(0x140)]==_0x376777(0x136))var _0x4b64e2=users['Chinese'];else{if(_0x2fa970[0x0][_0x376777(0x140)]==_0x376777(0x162))var _0x4b64e2=users[_0x376777(0x150)];}}}}}}}_0x20de37[_0x376777(0x161)](_0x376777(0x141),{'success':_0x210e8f['flash'](_0x376777(0x15f)),'errors':_0x210e8f[_0x376777(0x133)](_0x376777(0x13a)),'role':_0x2d29bb,'profile':_0x320376,'master_shop':_0x2fa970,'language':_0x4b64e2,'accounting':_0x5de283,'warehouse_acct':_0x13c80b,'sales_acct':_0x15ba21,'warehouse_loc':_0x28fef0,'data':_0x348ebd});}catch(_0x58aaea){}}),module['exports']=router;