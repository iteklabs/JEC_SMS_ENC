const a0_0x6e3ec8=a0_0x3162;(function(_0x186d24,_0x5eb738){const _0x300670=a0_0x3162,_0x35aa96=_0x186d24();while(!![]){try{const _0x2bfd68=-parseInt(_0x300670(0xd8))/0x1*(parseInt(_0x300670(0xeb))/0x2)+parseInt(_0x300670(0xd4))/0x3*(-parseInt(_0x300670(0xbf))/0x4)+-parseInt(_0x300670(0xee))/0x5+-parseInt(_0x300670(0xea))/0x6*(parseInt(_0x300670(0xcf))/0x7)+-parseInt(_0x300670(0xec))/0x8+-parseInt(_0x300670(0xcb))/0x9*(parseInt(_0x300670(0xde))/0xa)+parseInt(_0x300670(0xcd))/0xb;if(_0x2bfd68===_0x5eb738)break;else _0x35aa96['push'](_0x35aa96['shift']());}catch(_0x4cf07a){_0x35aa96['push'](_0x35aa96['shift']());}}}(a0_0x366b,0xaecc6));const express=require('express'),app=express(),router=express[a0_0x6e3ec8(0xd0)](),auth=require(a0_0x6e3ec8(0xd9)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order,approver_acct,warehouse}=require(a0_0x6e3ec8(0xf8)),users=require(a0_0x6e3ec8(0xd7));function a0_0x3162(_0x57dcc8,_0x2ccefb){const _0x366b8e=a0_0x366b();return a0_0x3162=function(_0x31626a,_0x19d165){_0x31626a=_0x31626a-0xbf;let _0x1d0eac=_0x366b8e[_0x31626a];return _0x1d0eac;},a0_0x3162(_0x57dcc8,_0x2ccefb);}function a0_0x366b(){const _0x12d26c=['Arabic\x20(ae)','Portuguese\x20(BR)','_id','account_data','Spanish','body','Chinese','wms_account_id','acc','414xuDuzf','Portuguese','62186289cnxoRo','flash','8341606OFwtGe','Router','French','accounting_account_id','params','9Nrodrw','Arabic','forEach','../public/language/languages.json','997gUFDtX','../middleware/auth','findById','staffs','email','/so_approvers/preview/','172460dBmEsu','errors','English','English\x20(US)','success','find','user','post','render','json','Approver\x20Add\x20successfully','/add','6yQodsy','1992XoGrez','7682880lUYkzq','language','2656890mNHHLJ','redirect','string','$account_data','/get_sales_data','name_accounting','get','staff_id','$name','aggregate','../models/all_models','German','Hindi','623468atIXTo','findOne','save'];a0_0x366b=function(){return _0x12d26c;};return a0_0x366b();}router[a0_0x6e3ec8(0xf4)]('/setup',auth,async(_0x16e42d,_0x21a165)=>{const _0x491b7c=a0_0x6e3ec8;try{const _0x1cb07b=_0x16e42d[_0x491b7c(0xe4)],_0x28b328=await master_shop[_0x491b7c(0xe3)](),_0x15df65=await profile['findOne']({'email':_0x1cb07b[_0x491b7c(0xdc)]}),_0x2a3dd0=await approver_acct[_0x491b7c(0xf7)]([{'$addFields':{'accounting_account_id':{'$toObjectId':'$head_id_staff'}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$warehouse_staff_id'}}},{'$lookup':{'from':_0x491b7c(0xdb),'localField':_0x491b7c(0xd2),'foreignField':_0x491b7c(0xc4),'as':_0x491b7c(0xc5)}},{'$unwind':_0x491b7c(0xf1)},{'$lookup':{'from':_0x491b7c(0xdb),'localField':_0x491b7c(0xc9),'foreignField':'_id','as':'wms_data'}},{'$unwind':'$wms_data'}]);if(_0x28b328[0x0][_0x491b7c(0xed)]==_0x491b7c(0xe1))var _0x250122=users['English'];else{if(_0x28b328[0x0][_0x491b7c(0xed)]=='Hindi')var _0x250122=users[_0x491b7c(0xfa)];else{if(_0x28b328[0x0][_0x491b7c(0xed)]=='German')var _0x250122=users[_0x491b7c(0xf9)];else{if(_0x28b328[0x0][_0x491b7c(0xed)]==_0x491b7c(0xc6))var _0x250122=users[_0x491b7c(0xc6)];else{if(_0x28b328[0x0][_0x491b7c(0xed)]==_0x491b7c(0xd1))var _0x250122=users[_0x491b7c(0xd1)];else{if(_0x28b328[0x0][_0x491b7c(0xed)]==_0x491b7c(0xc3))var _0x250122=users[_0x491b7c(0xcc)];else{if(_0x28b328[0x0][_0x491b7c(0xed)]=='Chinese')var _0x250122=users[_0x491b7c(0xc8)];else{if(_0x28b328[0x0][_0x491b7c(0xed)]=='Arabic\x20(ae)')var _0x250122=users[_0x491b7c(0xd5)];}}}}}}}_0x21a165[_0x491b7c(0xe6)]('so_approver_all',{'success':_0x16e42d[_0x491b7c(0xce)](_0x491b7c(0xe2)),'errors':_0x16e42d[_0x491b7c(0xce)](_0x491b7c(0xdf)),'role':_0x1cb07b,'profile':_0x15df65,'master_shop':_0x28b328,'language':_0x250122,'data':_0x2a3dd0});}catch(_0x317ea0){}}),router[a0_0x6e3ec8(0xf4)](a0_0x6e3ec8(0xe9),auth,async(_0x3454f9,_0x56b941)=>{const _0x1af4b9=a0_0x6e3ec8;try{const _0x519bdf=_0x3454f9[_0x1af4b9(0xe4)],_0x50ee98=await master_shop[_0x1af4b9(0xe3)](),_0x340831=await profile[_0x1af4b9(0xc0)]({'email':_0x519bdf['email']}),_0x3391e7=await staff[_0x1af4b9(0xe3)]({'account_category':_0x1af4b9(0xca)}),_0x791fbb=await staff[_0x1af4b9(0xe3)]({'account_category':'wm'}),_0x44960a=await staff[_0x1af4b9(0xe3)]({'account_category':'sa'}),_0x4b94cd=await warehouse['aggregate']([{'$group':{'_id':_0x1af4b9(0xf6)}}]);if(_0x50ee98[0x0][_0x1af4b9(0xed)]==_0x1af4b9(0xe1))var _0x5023c3=users[_0x1af4b9(0xe0)];else{if(_0x50ee98[0x0][_0x1af4b9(0xed)]==_0x1af4b9(0xfa))var _0x5023c3=users['Hindi'];else{if(_0x50ee98[0x0]['language']==_0x1af4b9(0xf9))var _0x5023c3=users['German'];else{if(_0x50ee98[0x0][_0x1af4b9(0xed)]==_0x1af4b9(0xc6))var _0x5023c3=users[_0x1af4b9(0xc6)];else{if(_0x50ee98[0x0][_0x1af4b9(0xed)]==_0x1af4b9(0xd1))var _0x5023c3=users[_0x1af4b9(0xd1)];else{if(_0x50ee98[0x0][_0x1af4b9(0xed)]==_0x1af4b9(0xc3))var _0x5023c3=users[_0x1af4b9(0xcc)];else{if(_0x50ee98[0x0][_0x1af4b9(0xed)]==_0x1af4b9(0xc8))var _0x5023c3=users[_0x1af4b9(0xc8)];else{if(_0x50ee98[0x0][_0x1af4b9(0xed)]==_0x1af4b9(0xc2))var _0x5023c3=users['Arabic'];}}}}}}}_0x56b941[_0x1af4b9(0xe6)]('so_approver_add',{'success':_0x3454f9['flash'](_0x1af4b9(0xe2)),'errors':_0x3454f9[_0x1af4b9(0xce)](_0x1af4b9(0xdf)),'role':_0x519bdf,'profile':_0x340831,'master_shop':_0x50ee98,'language':_0x5023c3,'accounting':_0x3391e7,'warehouse_acct':_0x791fbb,'sales_acct':_0x44960a,'warehouse_loc':_0x4b94cd});}catch(_0x48b989){}}),router[a0_0x6e3ec8(0xe5)]('/add/',auth,async(_0x3a1b8b,_0x8ff0e8)=>{const _0x5f45bc=a0_0x6e3ec8;try{const {accounting_account_id:_0x34adba,warehouse_account_id:_0xeb77eb,staff_id:_0x714c50,warehouse_loc:_0x64cdfd}=_0x3a1b8b[_0x5f45bc(0xc7)];if(typeof _0x714c50==_0x5f45bc(0xf0))var _0x1aa08f=[_0x3a1b8b[_0x5f45bc(0xc7)][_0x5f45bc(0xf5)]],_0x2bd501=[_0x3a1b8b[_0x5f45bc(0xc7)][_0x5f45bc(0xf3)]];else var _0x1aa08f=[..._0x3a1b8b[_0x5f45bc(0xc7)][_0x5f45bc(0xf5)]],_0x2bd501=[..._0x3a1b8b[_0x5f45bc(0xc7)]['name_accounting']];const _0x86b36f=_0x1aa08f['map'](_0x418166=>{return _0x418166={'id_member':_0x418166};});_0x2bd501[_0x5f45bc(0xd6)]((_0x3ac1af,_0xcc64f7)=>{_0x86b36f[_0xcc64f7]['name']=_0x3ac1af;});const _0x320ceb=new approver_acct({'head_id_staff':_0x34adba,'warehouse_staff_id':_0xeb77eb,'warehouse_name':_0x64cdfd,'members':_0x86b36f}),_0xfb6c1e=await _0x320ceb[_0x5f45bc(0xc1)]();_0x3a1b8b[_0x5f45bc(0xce)]('success',_0x5f45bc(0xe8)),_0x8ff0e8[_0x5f45bc(0xef)](_0x5f45bc(0xdd)+_0xfb6c1e[_0x5f45bc(0xc4)]);}catch(_0x160df7){}}),router[a0_0x6e3ec8(0xe5)](a0_0x6e3ec8(0xf2),auth,async(_0x35e4d6,_0x5be9b4)=>{const _0x553dbe=a0_0x6e3ec8;try{const {id_staff:_0x43a353}=_0x35e4d6[_0x553dbe(0xc7)],_0x505f15=await staff[_0x553dbe(0xda)](_0x43a353);_0x5be9b4[_0x553dbe(0xe7)](_0x505f15);}catch(_0x5730d9){}}),router[a0_0x6e3ec8(0xf4)]('/preview/:id',auth,async(_0x927949,_0x3f8494)=>{const _0x4ddc77=a0_0x6e3ec8;try{const _0x2ec270=_0x927949[_0x4ddc77(0xe4)],_0x39203e=_0x927949[_0x4ddc77(0xd3)]['id'],_0x13a19c=await master_shop[_0x4ddc77(0xe3)](),_0x26cb81=await profile[_0x4ddc77(0xc0)]({'email':_0x2ec270['email']}),_0x132016=await staff[_0x4ddc77(0xe3)]({'account_category':'acc'}),_0x38e020=await staff[_0x4ddc77(0xe3)]({'account_category':'wm'}),_0x36ac2f=await staff[_0x4ddc77(0xe3)]({'account_category':'sa'}),_0x123729=await warehouse[_0x4ddc77(0xf7)]([{'$group':{'_id':_0x4ddc77(0xf6)}}]),_0x391e8c=await approver_acct['findById'](_0x39203e);if(_0x13a19c[0x0][_0x4ddc77(0xed)]=='English\x20(US)')var _0x6d5837=users[_0x4ddc77(0xe0)];else{if(_0x13a19c[0x0][_0x4ddc77(0xed)]=='Hindi')var _0x6d5837=users['Hindi'];else{if(_0x13a19c[0x0][_0x4ddc77(0xed)]==_0x4ddc77(0xf9))var _0x6d5837=users[_0x4ddc77(0xf9)];else{if(_0x13a19c[0x0][_0x4ddc77(0xed)]==_0x4ddc77(0xc6))var _0x6d5837=users[_0x4ddc77(0xc6)];else{if(_0x13a19c[0x0][_0x4ddc77(0xed)]==_0x4ddc77(0xd1))var _0x6d5837=users['French'];else{if(_0x13a19c[0x0][_0x4ddc77(0xed)]=='Portuguese\x20(BR)')var _0x6d5837=users[_0x4ddc77(0xcc)];else{if(_0x13a19c[0x0][_0x4ddc77(0xed)]==_0x4ddc77(0xc8))var _0x6d5837=users[_0x4ddc77(0xc8)];else{if(_0x13a19c[0x0]['language']=='Arabic\x20(ae)')var _0x6d5837=users[_0x4ddc77(0xd5)];}}}}}}}_0x3f8494[_0x4ddc77(0xe6)]('view_so_approvers',{'success':_0x927949[_0x4ddc77(0xce)](_0x4ddc77(0xe2)),'errors':_0x927949[_0x4ddc77(0xce)](_0x4ddc77(0xdf)),'role':_0x2ec270,'profile':_0x26cb81,'master_shop':_0x13a19c,'language':_0x6d5837,'accounting':_0x132016,'warehouse_acct':_0x38e020,'sales_acct':_0x36ac2f,'warehouse_loc':_0x123729,'data':_0x391e8c});}catch(_0xc01163){}}),module['exports']=router;