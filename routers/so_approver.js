const a0_0x3a47af=a0_0x41d1;(function(_0x1baf6f,_0x34172f){const _0x38bd1a=a0_0x41d1,_0x468553=_0x1baf6f();while(!![]){try{const _0x4f304e=-parseInt(_0x38bd1a(0x21c))/0x1*(-parseInt(_0x38bd1a(0x209))/0x2)+parseInt(_0x38bd1a(0x1f4))/0x3*(parseInt(_0x38bd1a(0x210))/0x4)+-parseInt(_0x38bd1a(0x206))/0x5+parseInt(_0x38bd1a(0x221))/0x6+parseInt(_0x38bd1a(0x21a))/0x7+-parseInt(_0x38bd1a(0x204))/0x8*(-parseInt(_0x38bd1a(0x1e7))/0x9)+parseInt(_0x38bd1a(0x217))/0xa*(-parseInt(_0x38bd1a(0x1ef))/0xb);if(_0x4f304e===_0x34172f)break;else _0x468553['push'](_0x468553['shift']());}catch(_0x53daed){_0x468553['push'](_0x468553['shift']());}}}(a0_0x39cd,0x7666c));function a0_0x41d1(_0x2ae45d,_0x4dc113){const _0x39cd83=a0_0x39cd();return a0_0x41d1=function(_0x41d131,_0x251fb5){_0x41d131=_0x41d131-0x1e3;let _0x5bbe84=_0x39cd83[_0x41d131];return _0x5bbe84;},a0_0x41d1(_0x2ae45d,_0x4dc113);}const express=require('express'),app=express(),router=express[a0_0x3a47af(0x201)](),auth=require(a0_0x3a47af(0x20f)),{profile,sales,sales_return,purchases,purchases_return,categories,product,suppliers,customer,master_shop,transfers,adjustment,purchases_finished,sales_finished,adjustment_finished,transfers_finished,staff,sales_sa,sales_order,approver_acct,warehouse}=require(a0_0x3a47af(0x1e5)),users=require(a0_0x3a47af(0x1e8));function a0_0x39cd(){const _0x330c5d=['$account_data','Chinese','../models/all_models','French','9bWlkWo','../public/language/languages.json','Portuguese\x20(BR)','findById','map','post','name_accounting','name','11PIrmzn','Approver\x20Add\x20successfully','account_data','aggregate','English','37137ZIPBHr','Hindi','render','findOne','acc','Arabic','/get_sales_data','wms_data','email','get','/add','flash','redirect','Router','$wms_data','Arabic\x20(ae)','6269552cPOJZW','wms_account_id','2341195KktiPa','Spanish','user','2VkocaV','German','so_approver_add','/setup','staff_id','language','../middleware/auth','100qpXntf','success','Portuguese','/add/','body','so_approver_all','errors','16755140tLKZaY','find','save','6684587IhwDZl','_id','502009HZlNRV','staffs','view_so_approvers','English\x20(US)','exports','471636gqpsZi'];a0_0x39cd=function(){return _0x330c5d;};return a0_0x39cd();}router['get'](a0_0x3a47af(0x20c),auth,async(_0x146e60,_0x292201)=>{const _0x52fef2=a0_0x3a47af;try{const _0x20c787=_0x146e60[_0x52fef2(0x208)],_0x50f64f=await master_shop[_0x52fef2(0x218)](),_0x3bfc2d=await profile[_0x52fef2(0x1f7)]({'email':_0x20c787[_0x52fef2(0x1fc)]}),_0x1f53a4=await approver_acct[_0x52fef2(0x1f2)]([{'$addFields':{'accounting_account_id':{'$toObjectId':'$head_id_staff'}}},{'$addFields':{'wms_account_id':{'$toObjectId':'$warehouse_staff_id'}}},{'$lookup':{'from':_0x52fef2(0x21d),'localField':'accounting_account_id','foreignField':_0x52fef2(0x21b),'as':_0x52fef2(0x1f1)}},{'$unwind':_0x52fef2(0x1e3)},{'$lookup':{'from':_0x52fef2(0x21d),'localField':_0x52fef2(0x205),'foreignField':_0x52fef2(0x21b),'as':_0x52fef2(0x1fb)}},{'$unwind':_0x52fef2(0x202)}]);if(_0x50f64f[0x0][_0x52fef2(0x20e)]==_0x52fef2(0x21f))var _0x30161f=users[_0x52fef2(0x1f3)];else{if(_0x50f64f[0x0][_0x52fef2(0x20e)]=='Hindi')var _0x30161f=users['Hindi'];else{if(_0x50f64f[0x0][_0x52fef2(0x20e)]==_0x52fef2(0x20a))var _0x30161f=users[_0x52fef2(0x20a)];else{if(_0x50f64f[0x0][_0x52fef2(0x20e)]==_0x52fef2(0x207))var _0x30161f=users[_0x52fef2(0x207)];else{if(_0x50f64f[0x0]['language']==_0x52fef2(0x1e6))var _0x30161f=users[_0x52fef2(0x1e6)];else{if(_0x50f64f[0x0][_0x52fef2(0x20e)]==_0x52fef2(0x1e9))var _0x30161f=users[_0x52fef2(0x212)];else{if(_0x50f64f[0x0][_0x52fef2(0x20e)]=='Chinese')var _0x30161f=users['Chinese'];else{if(_0x50f64f[0x0][_0x52fef2(0x20e)]==_0x52fef2(0x203))var _0x30161f=users[_0x52fef2(0x1f9)];}}}}}}}_0x292201[_0x52fef2(0x1f6)](_0x52fef2(0x215),{'success':_0x146e60[_0x52fef2(0x1ff)](_0x52fef2(0x211)),'errors':_0x146e60[_0x52fef2(0x1ff)](_0x52fef2(0x216)),'role':_0x20c787,'profile':_0x3bfc2d,'master_shop':_0x50f64f,'language':_0x30161f,'data':_0x1f53a4});}catch(_0x6576ce){}}),router[a0_0x3a47af(0x1fd)](a0_0x3a47af(0x1fe),auth,async(_0x3336a5,_0x3a8bd1)=>{const _0x420e7f=a0_0x3a47af;try{const _0x43a589=_0x3336a5['user'],_0x35602a=await master_shop[_0x420e7f(0x218)](),_0x1fc71a=await profile[_0x420e7f(0x1f7)]({'email':_0x43a589['email']}),_0x89a167=await staff[_0x420e7f(0x218)]({'account_category':'acc'}),_0x1b45d6=await staff[_0x420e7f(0x218)]({'account_category':'wm'}),_0x391491=await staff['find']({'account_category':'sa'}),_0x54b5ab=await warehouse[_0x420e7f(0x1f2)]([{'$group':{'_id':'$name'}}]);if(_0x35602a[0x0][_0x420e7f(0x20e)]==_0x420e7f(0x21f))var _0x5cdf8d=users[_0x420e7f(0x1f3)];else{if(_0x35602a[0x0][_0x420e7f(0x20e)]==_0x420e7f(0x1f5))var _0x5cdf8d=users[_0x420e7f(0x1f5)];else{if(_0x35602a[0x0][_0x420e7f(0x20e)]=='German')var _0x5cdf8d=users[_0x420e7f(0x20a)];else{if(_0x35602a[0x0][_0x420e7f(0x20e)]==_0x420e7f(0x207))var _0x5cdf8d=users[_0x420e7f(0x207)];else{if(_0x35602a[0x0][_0x420e7f(0x20e)]==_0x420e7f(0x1e6))var _0x5cdf8d=users[_0x420e7f(0x1e6)];else{if(_0x35602a[0x0][_0x420e7f(0x20e)]==_0x420e7f(0x1e9))var _0x5cdf8d=users['Portuguese'];else{if(_0x35602a[0x0][_0x420e7f(0x20e)]==_0x420e7f(0x1e4))var _0x5cdf8d=users[_0x420e7f(0x1e4)];else{if(_0x35602a[0x0][_0x420e7f(0x20e)]=='Arabic\x20(ae)')var _0x5cdf8d=users['Arabic'];}}}}}}}_0x3a8bd1['render'](_0x420e7f(0x20b),{'success':_0x3336a5['flash']('success'),'errors':_0x3336a5['flash'](_0x420e7f(0x216)),'role':_0x43a589,'profile':_0x1fc71a,'master_shop':_0x35602a,'language':_0x5cdf8d,'accounting':_0x89a167,'warehouse_acct':_0x1b45d6,'sales_acct':_0x391491,'warehouse_loc':_0x54b5ab});}catch(_0xbc52ca){}}),router[a0_0x3a47af(0x1ec)](a0_0x3a47af(0x213),auth,async(_0x2e150d,_0x4d1f27)=>{const _0x47f7d6=a0_0x3a47af;try{const {accounting_account_id:_0x122c0c,warehouse_account_id:_0x45e12d,staff_id:_0x255410,warehouse_loc:_0x516ed8}=_0x2e150d['body'];if(typeof _0x255410=='string')var _0x559d20=[_0x2e150d[_0x47f7d6(0x214)]['staff_id']],_0xd1d7aa=[_0x2e150d[_0x47f7d6(0x214)][_0x47f7d6(0x1ed)]];else var _0x559d20=[..._0x2e150d[_0x47f7d6(0x214)][_0x47f7d6(0x20d)]],_0xd1d7aa=[..._0x2e150d['body'][_0x47f7d6(0x1ed)]];const _0x317a84=_0x559d20[_0x47f7d6(0x1eb)](_0xe25e6f=>{return _0xe25e6f={'id_member':_0xe25e6f};});_0xd1d7aa['forEach']((_0x37d0d4,_0x167014)=>{const _0x54309d=_0x47f7d6;_0x317a84[_0x167014][_0x54309d(0x1ee)]=_0x37d0d4;});const _0x1d9874=new approver_acct({'head_id_staff':_0x122c0c,'warehouse_staff_id':_0x45e12d,'warehouse_name':_0x516ed8,'members':_0x317a84}),_0x2350c8=await _0x1d9874[_0x47f7d6(0x219)]();_0x2e150d[_0x47f7d6(0x1ff)]('success',_0x47f7d6(0x1f0)),_0x4d1f27[_0x47f7d6(0x200)]('/so_approvers/preview/'+_0x2350c8[_0x47f7d6(0x21b)]);}catch(_0x42b884){}}),router['post'](a0_0x3a47af(0x1fa),auth,async(_0x5201dd,_0x38d330)=>{const _0x59bab8=a0_0x3a47af;try{const {id_staff:_0x264868}=_0x5201dd[_0x59bab8(0x214)],_0x4155f4=await staff[_0x59bab8(0x1ea)](_0x264868);_0x38d330['json'](_0x4155f4);}catch(_0x18e840){}}),router[a0_0x3a47af(0x1fd)]('/preview/:id',auth,async(_0x363998,_0x53dceb)=>{const _0x321656=a0_0x3a47af;try{const _0xa57497=_0x363998[_0x321656(0x208)],_0x2953df=_0x363998['params']['id'],_0x29ad9d=await master_shop[_0x321656(0x218)](),_0x457c94=await profile['findOne']({'email':_0xa57497['email']}),_0x1ae511=await staff[_0x321656(0x218)]({'account_category':_0x321656(0x1f8)}),_0x25c67e=await staff['find']({'account_category':'wm'}),_0x492cb9=await staff[_0x321656(0x218)]({'account_category':'sa'}),_0x317cb2=await warehouse['aggregate']([{'$group':{'_id':'$name'}}]),_0x316a5d=await approver_acct[_0x321656(0x1ea)](_0x2953df);if(_0x29ad9d[0x0]['language']==_0x321656(0x21f))var _0x46c3e4=users[_0x321656(0x1f3)];else{if(_0x29ad9d[0x0][_0x321656(0x20e)]==_0x321656(0x1f5))var _0x46c3e4=users[_0x321656(0x1f5)];else{if(_0x29ad9d[0x0][_0x321656(0x20e)]==_0x321656(0x20a))var _0x46c3e4=users['German'];else{if(_0x29ad9d[0x0][_0x321656(0x20e)]==_0x321656(0x207))var _0x46c3e4=users[_0x321656(0x207)];else{if(_0x29ad9d[0x0][_0x321656(0x20e)]==_0x321656(0x1e6))var _0x46c3e4=users['French'];else{if(_0x29ad9d[0x0]['language']==_0x321656(0x1e9))var _0x46c3e4=users[_0x321656(0x212)];else{if(_0x29ad9d[0x0][_0x321656(0x20e)]==_0x321656(0x1e4))var _0x46c3e4=users[_0x321656(0x1e4)];else{if(_0x29ad9d[0x0][_0x321656(0x20e)]==_0x321656(0x203))var _0x46c3e4=users['Arabic'];}}}}}}}_0x53dceb[_0x321656(0x1f6)](_0x321656(0x21e),{'success':_0x363998[_0x321656(0x1ff)](_0x321656(0x211)),'errors':_0x363998[_0x321656(0x1ff)](_0x321656(0x216)),'role':_0xa57497,'profile':_0x457c94,'master_shop':_0x29ad9d,'language':_0x46c3e4,'accounting':_0x1ae511,'warehouse_acct':_0x25c67e,'sales_acct':_0x492cb9,'warehouse_loc':_0x317cb2,'data':_0x316a5d});}catch(_0x576ed9){}}),module[a0_0x3a47af(0x220)]=router;